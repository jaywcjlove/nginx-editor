{"version":3,"file":"static/js/monaco-editor-vendor.9fdc3ed8.419a8d93.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/anchorSelect/browser/anchorSelect.js","../node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/moveCaretCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/caretOperations.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/transpose.js","../node_modules/monaco-editor/esm/vs/editor/contrib/clipboard/browser/clipboard.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionCommands.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionContributions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionKeybindingResolver.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionMenu.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/common/types.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelens.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codeLensCache.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorDetector.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/defaultDocumentColorProvider.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/standaloneColorPickerWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/standaloneColorPickerActions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/blockCommentCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/lineCommentCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/comment.js","../node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js","../node_modules/monaco-editor/esm/vs/editor/contrib/cursorUndo/browser/cursorUndo.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar SelectionAnchorController_1;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport './anchorSelect.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\nlet SelectionAnchorController = SelectionAnchorController_1 = class SelectionAnchorController {\n    static get(editor) {\n        return editor.getContribution(SelectionAnchorController_1.ID);\n    }\n    constructor(editor, contextKeyService) {\n        this.editor = editor;\n        this.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n        this.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n    }\n    setSelectionAnchor() {\n        if (this.editor.hasModel()) {\n            const position = this.editor.getPosition();\n            this.editor.changeDecorations((accessor) => {\n                if (this.decorationId) {\n                    accessor.removeDecoration(this.decorationId);\n                }\n                this.decorationId = accessor.addDecoration(Selection.fromPositions(position, position), {\n                    description: 'selection-anchor',\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                    hoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n                    className: 'selection-anchor'\n                });\n            });\n            this.selectionAnchorSetContextKey.set(!!this.decorationId);\n            alert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n        }\n    }\n    goToSelectionAnchor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (anchorPosition) {\n                this.editor.setPosition(anchorPosition.getStartPosition());\n            }\n        }\n    }\n    selectFromAnchorToCursor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const start = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (start) {\n                const end = this.editor.getPosition();\n                this.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n                this.cancelSelectionAnchor();\n            }\n        }\n    }\n    cancelSelectionAnchor() {\n        if (this.decorationId) {\n            const decorationId = this.decorationId;\n            this.editor.changeDecorations((accessor) => {\n                accessor.removeDecoration(decorationId);\n                this.decorationId = undefined;\n            });\n            this.selectionAnchorSetContextKey.set(false);\n        }\n    }\n    dispose() {\n        this.cancelSelectionAnchor();\n        this.modelChangeListener.dispose();\n    }\n};\nSelectionAnchorController.ID = 'editor.contrib.selectionAnchorController';\nSelectionAnchorController = SelectionAnchorController_1 = __decorate([\n    __param(1, IContextKeyService)\n], SelectionAnchorController);\nclass SetSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.setSelectionAnchor',\n            label: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n            alias: 'Set Selection Anchor',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 32 /* KeyCode.KeyB */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.setSelectionAnchor();\n        });\n    }\n}\nclass GoToSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.goToSelectionAnchor',\n            label: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n            alias: 'Go to Selection Anchor',\n            precondition: SelectionAnchorSet,\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToSelectionAnchor();\n        });\n    }\n}\nclass SelectFromAnchorToCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectFromAnchorToCursor',\n            label: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n            alias: 'Select from Anchor to Cursor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectFromAnchorToCursor();\n        });\n    }\n}\nclass CancelSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.cancelSelectionAnchor',\n            label: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n            alias: 'Cancel Selection Anchor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 9 /* KeyCode.Escape */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.cancelSelectionAnchor();\n        });\n    }\n}\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hcDark: '#A0A0A0', hcLight: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.jumpToBracket',\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n            alias: 'Go to Bracket',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 93 /* KeyCode.Backslash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\n    }\n}\nclass SelectToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectToBracket',\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n            alias: 'Select to Bracket',\n            precondition: undefined,\n            description: {\n                description: `Select to Bracket`,\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'selectBrackets': {\n                                    type: 'boolean',\n                                    default: true\n                                }\n                            },\n                        }\n                    }]\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        let selectBrackets = true;\n        if (args && args.selectBrackets === false) {\n            selectBrackets = false;\n        }\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\n    }\n}\nclass RemoveBracketsAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.removeBrackets',\n            label: nls.localize('smartSelect.removeBrackets', \"Remove Brackets\"),\n            alias: 'Remove Brackets',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 1 /* KeyCode.Backspace */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.removeBrackets(this.id);\n    }\n}\nclass BracketsData {\n    constructor(position, brackets, options) {\n        this.position = position;\n        this.brackets = brackets;\n        this.options = options;\n    }\n}\nexport class BracketMatchingController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(BracketMatchingController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n        this._matchBrackets = this._editor.getOption(71 /* EditorOption.matchBrackets */);\n        this._updateBracketsSoon.schedule();\n        this._register(editor.onDidChangeCursorPosition((e) => {\n            if (this._matchBrackets === 'never') {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelLanguageConfiguration((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(71 /* EditorOption.matchBrackets */)) {\n                this._matchBrackets = this._editor.getOption(71 /* EditorOption.matchBrackets */);\n                this._decorations.clear();\n                this._lastBracketsData = [];\n                this._lastVersionId = 0;\n                this._updateBracketsSoon.schedule();\n            }\n        }));\n        this._register(editor.onDidBlurEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidFocusEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n    }\n    jumpToBracket() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = this._editor.getSelections().map(selection => {\n            const position = selection.getStartPosition();\n            // find matching brackets if position is on a bracket\n            const brackets = model.bracketPairs.matchBracket(position);\n            let newCursorPosition = null;\n            if (brackets) {\n                if (brackets[0].containsPosition(position) && !brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[1].getStartPosition();\n                }\n                else if (brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[0].getStartPosition();\n                }\n            }\n            else {\n                // find the enclosing brackets if the position isn't on a matching bracket\n                const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (enclosingBrackets) {\n                    newCursorPosition = enclosingBrackets[1].getStartPosition();\n                }\n                else {\n                    // no enclosing brackets, try the very first next bracket\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        newCursorPosition = nextBracket.range.getStartPosition();\n                    }\n                }\n            }\n            if (newCursorPosition) {\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n            }\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n        });\n        this._editor.setSelections(newSelections);\n        this._editor.revealRange(newSelections[0]);\n    }\n    selectToBracket(selectBrackets) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = [];\n        this._editor.getSelections().forEach(selection => {\n            const position = selection.getStartPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (!brackets) {\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n                    }\n                }\n            }\n            let selectFrom = null;\n            let selectTo = null;\n            if (brackets) {\n                brackets.sort(Range.compareRangesUsingStarts);\n                const [open, close] = brackets;\n                selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n                selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n                if (close.containsPosition(position)) {\n                    // select backwards if the cursor was on the closing bracket\n                    const tmp = selectFrom;\n                    selectFrom = selectTo;\n                    selectTo = tmp;\n                }\n            }\n            if (selectFrom && selectTo) {\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n            }\n        });\n        if (newSelections.length > 0) {\n            this._editor.setSelections(newSelections);\n            this._editor.revealRange(newSelections[0]);\n        }\n    }\n    removeBrackets(editSource) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        this._editor.getSelections().forEach((selection) => {\n            const position = selection.getPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n            }\n            if (brackets) {\n                this._editor.pushUndoStop();\n                this._editor.executeEdits(editSource, [\n                    { range: brackets[0], text: '' },\n                    { range: brackets[1], text: '' }\n                ]);\n                this._editor.pushUndoStop();\n            }\n        });\n    }\n    _updateBrackets() {\n        if (this._matchBrackets === 'never') {\n            return;\n        }\n        this._recomputeBrackets();\n        const newDecorations = [];\n        let newDecorationsLen = 0;\n        for (const bracketData of this._lastBracketsData) {\n            const brackets = bracketData.brackets;\n            if (brackets) {\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\n            }\n        }\n        this._decorations.set(newDecorations);\n    }\n    _recomputeBrackets() {\n        if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n            // no model or no focus => no brackets!\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length > 100) {\n            // no bracket matching for high numbers of selections\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const model = this._editor.getModel();\n        const versionId = model.getVersionId();\n        let previousData = [];\n        if (this._lastVersionId === versionId) {\n            // use the previous data only if the model is at the same version id\n            previousData = this._lastBracketsData;\n        }\n        const positions = [];\n        let positionsLen = 0;\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (selection.isEmpty()) {\n                // will bracket match a cursor only if the selection is collapsed\n                positions[positionsLen++] = selection.getStartPosition();\n            }\n        }\n        // sort positions for `previousData` cache hits\n        if (positions.length > 1) {\n            positions.sort(Position.compare);\n        }\n        const newData = [];\n        let newDataLen = 0;\n        let previousIndex = 0;\n        const previousLen = previousData.length;\n        for (let i = 0, len = positions.length; i < len; i++) {\n            const position = positions[i];\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n                previousIndex++;\n            }\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n                newData[newDataLen++] = previousData[previousIndex];\n            }\n            else {\n                let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n                let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n                if (!brackets && this._matchBrackets === 'always') {\n                    brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n                }\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\n            }\n        }\n        this._lastBracketsData = newData;\n        this._lastVersionId = versionId;\n    }\n}\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match'\n});\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\nregisterEditorAction(RemoveBracketsAction);\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n    group: '5_infile_nav',\n    command: {\n        id: 'editor.action.jumpToBracket',\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\n    },\n    order: 2\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class MoveCaretCommand {\n    constructor(selection, isMovingLeft) {\n        this._selection = selection;\n        this._isMovingLeft = isMovingLeft;\n    }\n    getEditOperations(model, builder) {\n        if (this._selection.startLineNumber !== this._selection.endLineNumber || this._selection.isEmpty()) {\n            return;\n        }\n        const lineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        const endColumn = this._selection.endColumn;\n        if (this._isMovingLeft && startColumn === 1) {\n            return;\n        }\n        if (!this._isMovingLeft && endColumn === model.getLineMaxColumn(lineNumber)) {\n            return;\n        }\n        if (this._isMovingLeft) {\n            const rangeBefore = new Range(lineNumber, startColumn - 1, lineNumber, startColumn);\n            const charBefore = model.getValueInRange(rangeBefore);\n            builder.addEditOperation(rangeBefore, null);\n            builder.addEditOperation(new Range(lineNumber, endColumn, lineNumber, endColumn), charBefore);\n        }\n        else {\n            const rangeAfter = new Range(lineNumber, endColumn, lineNumber, endColumn + 1);\n            const charAfter = model.getValueInRange(rangeAfter);\n            builder.addEditOperation(rangeAfter, null);\n            builder.addEditOperation(new Range(lineNumber, startColumn, lineNumber, startColumn), charAfter);\n        }\n    }\n    computeCursorState(model, helper) {\n        if (this._isMovingLeft) {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn - 1, this._selection.endLineNumber, this._selection.endColumn - 1);\n        }\n        else {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn + 1, this._selection.endLineNumber, this._selection.endColumn + 1);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MoveCaretCommand } from './moveCaretCommand.js';\nimport * as nls from '../../../../nls.js';\nclass MoveCaretAction extends EditorAction {\n    constructor(left, opts) {\n        super(opts);\n        this.left = left;\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new MoveCaretCommand(selection, this.left));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveCaretLeftAction extends MoveCaretAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveCarretLeftAction',\n            label: nls.localize('caret.moveLeft', \"Move Selected Text Left\"),\n            alias: 'Move Selected Text Left',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nclass MoveCaretRightAction extends MoveCaretAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveCarretRightAction',\n            label: nls.localize('caret.moveRight', \"Move Selected Text Right\"),\n            alias: 'Move Selected Text Right',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nregisterEditorAction(MoveCaretLeftAction);\nregisterEditorAction(MoveCaretRightAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { MoveOperations } from '../../../common/cursor/cursorMoveOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass TransposeLettersAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transposeLetters',\n            label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\n            alias: 'Transpose Letters',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 50 /* KeyCode.KeyT */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const lineNumber = selection.startLineNumber;\n            const column = selection.startColumn;\n            const lastColumn = model.getLineMaxColumn(lineNumber);\n            if (lineNumber === 1 && (column === 1 || (column === 2 && lastColumn === 2))) {\n                // at beginning of file, nothing to do\n                continue;\n            }\n            // handle special case: when at end of line, transpose left two chars\n            // otherwise, transpose left and right chars\n            const endPosition = (column === lastColumn) ?\n                selection.getPosition() :\n                MoveOperations.rightPosition(model, selection.getPosition().lineNumber, selection.getPosition().column);\n            const middlePosition = MoveOperations.leftPosition(model, endPosition);\n            const beginPosition = MoveOperations.leftPosition(model, middlePosition);\n            const leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\n            const rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\n            const replaceRange = Range.fromPositions(beginPosition, endPosition);\n            commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\n        }\n        if (commands.length > 0) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, commands);\n            editor.pushUndoStop();\n        }\n    }\n}\nregisterEditorAction(TransposeLettersAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as browser from '../../../../base/browser/browser.js';\nimport { getActiveDocument } from '../../../../base/browser/dom.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { CopyOptions, InMemoryClipboardMetadataManager } from '../../../browser/controller/textAreaInput.js';\nimport { EditorAction, MultiCommand, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nconst CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\nconst supportsCut = (platform.isNative || document.queryCommandSupported('cut'));\nconst supportsCopy = (platform.isNative || document.queryCommandSupported('copy'));\n// Firefox only supports navigator.clipboard.readText() in browser extensions.\n// See https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText#Browser_compatibility\n// When loading over http, navigator.clipboard can be undefined. See https://github.com/microsoft/monaco-editor/issues/2313\nconst supportsPaste = (typeof navigator.clipboard === 'undefined' || browser.isFirefox) ? document.queryCommandSupported('paste') : true;\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const CutAction = supportsCut ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCutAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind cut keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */, secondary: [1024 /* KeyMod.Shift */ | 20 /* KeyCode.Delete */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCut', comment: ['&& denotes a mnemonic'] }, \"Cu&&t\"),\n            order: 1\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }]\n})) : undefined;\nexport const CopyAction = supportsCopy ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCopyAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind copy keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */, secondary: [2048 /* KeyMod.CtrlCmd */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCopy', comment: ['&& denotes a mnemonic'] }, \"&&Copy\"),\n            order: 2\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }]\n})) : undefined;\nMenuRegistry.appendMenuItem(MenuId.MenubarEditMenu, { submenu: MenuId.MenubarCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: '2_ccp', order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: CLIPBOARD_CONTEXT_MENU_GROUP, order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1, when: ContextKeyExpr.and(ContextKeyExpr.notEquals('resourceScheme', 'output'), EditorContextKeys.editorTextFocus) });\nMenuRegistry.appendMenuItem(MenuId.EditorTitleContext, { submenu: MenuId.EditorTitleContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\nMenuRegistry.appendMenuItem(MenuId.ExplorerContext, { submenu: MenuId.ExplorerContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\nexport const PasteAction = supportsPaste ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardPasteAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind paste keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miPaste', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\n            order: 4\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }]\n})) : undefined;\nclass ExecCommandCopyWithSyntaxHighlightingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\n            label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\n            alias: 'Copy With Syntax Highlighting',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const emptySelectionClipboard = editor.getOption(37 /* EditorOption.emptySelectionClipboard */);\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n            return;\n        }\n        CopyOptions.forceCopyWithSyntaxHighlighting = true;\n        editor.focus();\n        editor.getContainerDomNode().ownerDocument.execCommand('copy');\n        CopyOptions.forceCopyWithSyntaxHighlighting = false;\n    }\n}\nfunction registerExecCommandImpl(target, browserCommand) {\n    if (!target) {\n        return;\n    }\n    // 1. handle case when focus is in editor.\n    target.addImplementation(10000, 'code-editor', (accessor, args) => {\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            // Do not execute if there is no selection and empty selection clipboard is off\n            const emptySelectionClipboard = focusedEditor.getOption(37 /* EditorOption.emptySelectionClipboard */);\n            const selection = focusedEditor.getSelection();\n            if (selection && selection.isEmpty() && !emptySelectionClipboard) {\n                return true;\n            }\n            focusedEditor.getContainerDomNode().ownerDocument.execCommand(browserCommand);\n            return true;\n        }\n        return false;\n    });\n    // 2. (default) handle case when focus is somewhere else.\n    target.addImplementation(0, 'generic-dom', (accessor, args) => {\n        getActiveDocument().execCommand(browserCommand);\n        return true;\n    });\n}\nregisterExecCommandImpl(CutAction, 'cut');\nregisterExecCommandImpl(CopyAction, 'copy');\nif (PasteAction) {\n    // 1. Paste: handle case when focus is in editor.\n    PasteAction.addImplementation(10000, 'code-editor', (accessor, args) => {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const clipboardService = accessor.get(IClipboardService);\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = codeEditorService.getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            const result = focusedEditor.getContainerDomNode().ownerDocument.execCommand('paste');\n            // Use the clipboard service if document.execCommand('paste') was not successful\n            if (!result && platform.isWeb) {\n                return (() => __awaiter(void 0, void 0, void 0, function* () {\n                    const clipboardText = yield clipboardService.readText();\n                    if (clipboardText !== '') {\n                        const metadata = InMemoryClipboardMetadataManager.INSTANCE.get(clipboardText);\n                        let pasteOnNewLine = false;\n                        let multicursorText = null;\n                        let mode = null;\n                        if (metadata) {\n                            pasteOnNewLine = (focusedEditor.getOption(37 /* EditorOption.emptySelectionClipboard */) && !!metadata.isFromEmptySelection);\n                            multicursorText = (typeof metadata.multicursorText !== 'undefined' ? metadata.multicursorText : null);\n                            mode = metadata.mode;\n                        }\n                        focusedEditor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                            text: clipboardText,\n                            pasteOnNewLine,\n                            multicursorText,\n                            mode\n                        });\n                    }\n                }))();\n            }\n            return true;\n        }\n        return false;\n    });\n    // 2. Paste: (default) handle case when focus is somewhere else.\n    PasteAction.addImplementation(0, 'generic-dom', (accessor, args) => {\n        getActiveDocument().execCommand('paste');\n        return true;\n    });\n}\nif (supportsCopy) {\n    registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce, equals, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CodeActionItem, CodeActionKind, CodeActionTriggerSource, filtersAction, mayIncludeActionsOfKind } from '../common/types.js';\nexport const codeActionCommandId = 'editor.action.codeAction';\nexport const quickFixCommandId = 'editor.action.quickFix';\nexport const autoFixCommandId = 'editor.action.autoFix';\nexport const refactorCommandId = 'editor.action.refactor';\nexport const sourceActionCommandId = 'editor.action.sourceAction';\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\nexport const fixAllCommandId = 'editor.action.fixAll';\nclass ManagedCodeActionSet extends Disposable {\n    static codeActionsPreferredComparator(a, b) {\n        if (a.isPreferred && !b.isPreferred) {\n            return -1;\n        }\n        else if (!a.isPreferred && b.isPreferred) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static codeActionsComparator({ action: a }, { action: b }) {\n        if (isNonEmptyArray(a.diagnostics)) {\n            return isNonEmptyArray(b.diagnostics) ? ManagedCodeActionSet.codeActionsPreferredComparator(a, b) : -1;\n        }\n        else if (isNonEmptyArray(b.diagnostics)) {\n            return 1;\n        }\n        else {\n            return ManagedCodeActionSet.codeActionsPreferredComparator(a, b); // both have no diagnostics\n        }\n    }\n    constructor(actions, documentation, disposables) {\n        super();\n        this.documentation = documentation;\n        this._register(disposables);\n        this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\n        this.validActions = this.allActions.filter(({ action }) => !action.disabled);\n    }\n    get hasAutoFix() {\n        return this.validActions.some(({ action: fix }) => !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred);\n    }\n}\nconst emptyCodeActionsResponse = { actions: [], documentation: undefined };\nexport function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const filter = trigger.filter || {};\n        const notebookFilter = Object.assign(Object.assign({}, filter), { excludes: [...(filter.excludes || []), CodeActionKind.Notebook] });\n        const codeActionContext = {\n            only: (_a = filter.include) === null || _a === void 0 ? void 0 : _a.value,\n            trigger: trigger.type,\n        };\n        const cts = new TextModelCancellationTokenSource(model, token);\n        // if the trigger is auto (autosave, lightbulb, etc), we should exclude notebook codeActions\n        const excludeNotebookCodeActions = (trigger.type === 2 /* languages.CodeActionTriggerType.Auto */);\n        const providers = getCodeActionProviders(registry, model, (excludeNotebookCodeActions) ? notebookFilter : filter);\n        const disposables = new DisposableStore();\n        const promises = providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            try {\n                progress.report(provider);\n                const providedCodeActions = yield provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\n                if (providedCodeActions) {\n                    disposables.add(providedCodeActions);\n                }\n                if (cts.token.isCancellationRequested) {\n                    return emptyCodeActionsResponse;\n                }\n                const filteredActions = ((providedCodeActions === null || providedCodeActions === void 0 ? void 0 : providedCodeActions.actions) || []).filter(action => action && filtersAction(filter, action));\n                const documentation = getDocumentationFromProvider(provider, filteredActions, filter.include);\n                return {\n                    actions: filteredActions.map(action => new CodeActionItem(action, provider)),\n                    documentation\n                };\n            }\n            catch (err) {\n                if (isCancellationError(err)) {\n                    throw err;\n                }\n                onUnexpectedExternalError(err);\n                return emptyCodeActionsResponse;\n            }\n        }));\n        const listener = registry.onDidChange(() => {\n            const newProviders = registry.all(model);\n            if (!equals(newProviders, providers)) {\n                cts.cancel();\n            }\n        });\n        try {\n            const actions = yield Promise.all(promises);\n            const allActions = actions.map(x => x.actions).flat();\n            const allDocumentation = [\n                ...coalesce(actions.map(x => x.documentation)),\n                ...getAdditionalDocumentationForShowingActions(registry, model, trigger, allActions)\n            ];\n            return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\n        }\n        finally {\n            listener.dispose();\n            cts.dispose();\n        }\n    });\n}\nfunction getCodeActionProviders(registry, model, filter) {\n    return registry.all(model)\n        // Don't include providers that we know will not return code actions of interest\n        .filter(provider => {\n        if (!provider.providedCodeActionKinds) {\n            // We don't know what type of actions this provider will return.\n            return true;\n        }\n        return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new CodeActionKind(kind)));\n    });\n}\nfunction* getAdditionalDocumentationForShowingActions(registry, model, trigger, actionsToShow) {\n    var _a, _b, _c;\n    if (model && actionsToShow.length) {\n        for (const provider of registry.all(model)) {\n            if (provider._getAdditionalMenuItems) {\n                yield* (_a = provider._getAdditionalMenuItems) === null || _a === void 0 ? void 0 : _a.call(provider, { trigger: trigger.type, only: (_c = (_b = trigger.filter) === null || _b === void 0 ? void 0 : _b.include) === null || _c === void 0 ? void 0 : _c.value }, actionsToShow.map(item => item.action));\n            }\n        }\n    }\n}\nfunction getDocumentationFromProvider(provider, providedCodeActions, only) {\n    if (!provider.documentation) {\n        return undefined;\n    }\n    const documentation = provider.documentation.map(entry => ({ kind: new CodeActionKind(entry.kind), command: entry.command }));\n    if (only) {\n        let currentBest;\n        for (const entry of documentation) {\n            if (entry.kind.contains(only)) {\n                if (!currentBest) {\n                    currentBest = entry;\n                }\n                else {\n                    // Take best match\n                    if (currentBest.kind.contains(entry.kind)) {\n                        currentBest = entry;\n                    }\n                }\n            }\n        }\n        if (currentBest) {\n            return currentBest === null || currentBest === void 0 ? void 0 : currentBest.command;\n        }\n    }\n    // Otherwise, check to see if any of the provided actions match.\n    for (const action of providedCodeActions) {\n        if (!action.kind) {\n            continue;\n        }\n        for (const entry of documentation) {\n            if (entry.kind.contains(new CodeActionKind(action.kind))) {\n                return entry.command;\n            }\n        }\n    }\n    return undefined;\n}\nexport var ApplyCodeActionReason;\n(function (ApplyCodeActionReason) {\n    ApplyCodeActionReason[\"OnSave\"] = \"onSave\";\n    ApplyCodeActionReason[\"FromProblemsView\"] = \"fromProblemsView\";\n    ApplyCodeActionReason[\"FromCodeActions\"] = \"fromCodeActions\";\n})(ApplyCodeActionReason || (ApplyCodeActionReason = {}));\nexport function applyCodeAction(accessor, item, codeActionReason, options, token = CancellationToken.None) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const bulkEditService = accessor.get(IBulkEditService);\n        const commandService = accessor.get(ICommandService);\n        const telemetryService = accessor.get(ITelemetryService);\n        const notificationService = accessor.get(INotificationService);\n        telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionTitle: item.action.title,\n            codeActionKind: item.action.kind,\n            codeActionIsPreferred: !!item.action.isPreferred,\n            reason: codeActionReason,\n        });\n        yield item.resolve(token);\n        if (token.isCancellationRequested) {\n            return;\n        }\n        if ((_a = item.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length) {\n            const result = yield bulkEditService.apply(item.action.edit, {\n                editor: options === null || options === void 0 ? void 0 : options.editor,\n                label: item.action.title,\n                quotableLabel: item.action.title,\n                code: 'undoredo.codeAction',\n                respectAutoSaveConfig: codeActionReason !== ApplyCodeActionReason.OnSave,\n                showPreview: options === null || options === void 0 ? void 0 : options.preview,\n            });\n            if (!result.isApplied) {\n                return;\n            }\n        }\n        if (item.action.command) {\n            try {\n                yield commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\n            }\n            catch (err) {\n                const message = asMessage(err);\n                notificationService.error(typeof message === 'string'\n                    ? message\n                    : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\n            }\n        }\n    });\n}\nfunction asMessage(err) {\n    if (typeof err === 'string') {\n        return err;\n    }\n    else if (err instanceof Error && typeof err.message === 'string') {\n        return err.message;\n    }\n    else {\n        return undefined;\n    }\n}\nCommandsRegistry.registerCommand('_executeCodeActionProvider', function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!(resource instanceof URI)) {\n            throw illegalArgument();\n        }\n        const { codeActionProvider } = accessor.get(ILanguageFeaturesService);\n        const model = accessor.get(IModelService).getModel(resource);\n        if (!model) {\n            throw illegalArgument();\n        }\n        const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\n            ? Selection.liftSelection(rangeOrSelection)\n            : Range.isIRange(rangeOrSelection)\n                ? model.validateRange(rangeOrSelection)\n                : undefined;\n        if (!validatedRangeOrSelection) {\n            throw illegalArgument();\n        }\n        const include = typeof kind === 'string' ? new CodeActionKind(kind) : undefined;\n        const codeActionSet = yield getCodeActions(codeActionProvider, model, validatedRangeOrSelection, { type: 1 /* languages.CodeActionTriggerType.Invoke */, triggerAction: CodeActionTriggerSource.Default, filter: { includeSourceActions: true, include } }, Progress.None, CancellationToken.None);\n        const resolving = [];\n        const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\n        for (let i = 0; i < resolveCount; i++) {\n            resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\n        }\n        try {\n            yield Promise.all(resolving);\n            return codeActionSet.validActions.map(item => item.action);\n        }\n        finally {\n            setTimeout(() => codeActionSet.dispose(), 100);\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { autoFixCommandId, codeActionCommandId, fixAllCommandId, organizeImportsCommandId, quickFixCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from '../common/types.js';\nimport { CodeActionController } from './codeActionController.js';\nimport { SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\nfunction contextKeyForSupportedActions(kind) {\n    return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\n}\nconst argsSchema = {\n    type: 'object',\n    defaultSnippets: [{ body: { kind: '' } }],\n    properties: {\n        'kind': {\n            type: 'string',\n            description: nls.localize('args.schema.kind', \"Kind of the code action to run.\"),\n        },\n        'apply': {\n            type: 'string',\n            description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\n            default: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n            enum: [\"first\" /* CodeActionAutoApply.First */, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, \"never\" /* CodeActionAutoApply.Never */],\n            enumDescriptions: [\n                nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"),\n                nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"),\n                nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\"),\n            ]\n        },\n        'preferred': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\"),\n        }\n    }\n};\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply, triggerAction = CodeActionTriggerSource.Default) {\n    if (editor.hasModel()) {\n        const controller = CodeActionController.get(editor);\n        controller === null || controller === void 0 ? void 0 : controller.manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply);\n    }\n}\nexport class QuickFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: quickFixCommandId,\n            label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\n            alias: 'Quick Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined, CodeActionTriggerSource.QuickFix);\n    }\n}\nexport class CodeActionCommand extends EditorCommand {\n    constructor() {\n        super({\n            id: codeActionCommandId,\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Trigger a code action',\n                args: [{ name: 'args', schema: argsSchema, }]\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Empty,\n            apply: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\")\n                : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\n            include: args.kind,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class RefactorAction extends EditorAction {\n    constructor() {\n        super({\n            id: refactorCommandId,\n            label: nls.localize('refactor.label', \"Refactor...\"),\n            alias: 'Refactor...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor)),\n            },\n            description: {\n                description: 'Refactor...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Refactor,\n            apply: \"never\" /* CodeActionAutoApply.Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\")\n                : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\n            include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.None,\n            onlyIncludePreferredActions: args.preferred\n        }, args.apply, CodeActionTriggerSource.Refactor);\n    }\n}\nexport class SourceAction extends EditorAction {\n    constructor() {\n        super({\n            id: sourceActionCommandId,\n            label: nls.localize('source.label', \"Source Action...\"),\n            alias: 'Source Action...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2.1,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source)),\n            },\n            description: {\n                description: 'Source Action...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Source,\n            apply: \"never\" /* CodeActionAutoApply.Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\")\n                : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\n            include: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.None,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply, CodeActionTriggerSource.SourceAction);\n    }\n}\nexport class OrganizeImportsAction extends EditorAction {\n    constructor() {\n        super({\n            id: organizeImportsCommandId,\n            label: nls.localize('organizeImports.label', \"Organize Imports\"),\n            alias: 'Organize Imports',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), { include: CodeActionKind.SourceOrganizeImports, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.OrganizeImports);\n    }\n}\nexport class FixAllAction extends EditorAction {\n    constructor() {\n        super({\n            id: fixAllCommandId,\n            label: nls.localize('fixAll.label', \"Fix All\"),\n            alias: 'Fix All',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), { include: CodeActionKind.SourceFixAll, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.FixAll);\n    }\n}\nexport class AutoFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: autoFixCommandId,\n            label: nls.localize('autoFix.label', \"Auto Fix...\"),\n            alias: 'Auto Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 89 /* KeyCode.Period */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 89 /* KeyCode.Period */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\n            include: CodeActionKind.QuickFix,\n            onlyIncludePreferredActions: true\n        }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, CodeActionTriggerSource.AutoFix);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { AutoFixAction, CodeActionCommand, FixAllAction, OrganizeImportsAction, QuickFixAction, RefactorAction, SourceAction } from './codeActionCommands.js';\nimport { CodeActionController } from './codeActionController.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nregisterEditorContribution(CodeActionController.ID, CodeActionController, 3 /* EditorContributionInstantiation.Eventually */);\nregisterEditorContribution(LightBulbWidget.ID, LightBulbWidget, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(QuickFixAction);\nregisterEditorAction(RefactorAction);\nregisterEditorAction(SourceAction);\nregisterEditorAction(OrganizeImportsAction);\nregisterEditorAction(AutoFixAction);\nregisterEditorAction(FixAllAction);\nregisterEditorCommand(new CodeActionCommand());\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.codeActionWidget.showHeaders': {\n            type: 'boolean',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('showCodeActionHeaders', \"Enable/disable showing group headers in the Code Action menu.\"),\n            default: true,\n        },\n    } }));\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.codeActionWidget.includeNearbyQuickfixes': {\n            type: 'boolean',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('includeNearbyQuickfixes', \"Enable/disable showing nearest quickfix within a line when not currently on a diagnostic.\"),\n            default: false,\n        },\n    } }));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar CodeActionKeybindingResolver_1;\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionCommandArgs, CodeActionKind } from '../common/types.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nlet CodeActionKeybindingResolver = CodeActionKeybindingResolver_1 = class CodeActionKeybindingResolver {\n    constructor(keybindingService) {\n        this.keybindingService = keybindingService;\n    }\n    getResolver() {\n        // Lazy since we may not actually ever read the value\n        const allCodeActionBindings = new Lazy(() => this.keybindingService.getKeybindings()\n            .filter(item => CodeActionKeybindingResolver_1.codeActionCommands.indexOf(item.command) >= 0)\n            .filter(item => item.resolvedKeybinding)\n            .map((item) => {\n            // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\n            let commandArgs = item.commandArgs;\n            if (item.command === organizeImportsCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceOrganizeImports.value };\n            }\n            else if (item.command === fixAllCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceFixAll.value };\n            }\n            return Object.assign({ resolvedKeybinding: item.resolvedKeybinding }, CodeActionCommandArgs.fromUser(commandArgs, {\n                kind: CodeActionKind.None,\n                apply: \"never\" /* CodeActionAutoApply.Never */\n            }));\n        }));\n        return (action) => {\n            if (action.kind) {\n                const binding = this.bestKeybindingForCodeAction(action, allCodeActionBindings.value);\n                return binding === null || binding === void 0 ? void 0 : binding.resolvedKeybinding;\n            }\n            return undefined;\n        };\n    }\n    bestKeybindingForCodeAction(action, candidates) {\n        if (!action.kind) {\n            return undefined;\n        }\n        const kind = new CodeActionKind(action.kind);\n        return candidates\n            .filter(candidate => candidate.kind.contains(kind))\n            .filter(candidate => {\n            if (candidate.preferred) {\n                // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\n                return action.isPreferred;\n            }\n            return true;\n        })\n            .reduceRight((currentBest, candidate) => {\n            if (!currentBest) {\n                return candidate;\n            }\n            // Select the more specific binding\n            return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\n        }, undefined);\n    }\n};\nCodeActionKeybindingResolver.codeActionCommands = [\n    refactorCommandId,\n    codeActionCommandId,\n    sourceActionCommandId,\n    organizeImportsCommandId,\n    fixAllCommandId\n];\nCodeActionKeybindingResolver = CodeActionKeybindingResolver_1 = __decorate([\n    __param(0, IKeybindingService)\n], CodeActionKeybindingResolver);\nexport { CodeActionKeybindingResolver };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { CodeActionKind } from '../common/types.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport { localize } from '../../../../nls.js';\nconst uncategorizedCodeActionGroup = Object.freeze({ kind: CodeActionKind.Empty, title: localize('codeAction.widget.id.more', 'More Actions...') });\nconst codeActionGroups = Object.freeze([\n    { kind: CodeActionKind.QuickFix, title: localize('codeAction.widget.id.quickfix', 'Quick Fix') },\n    { kind: CodeActionKind.RefactorExtract, title: localize('codeAction.widget.id.extract', 'Extract'), icon: Codicon.wrench },\n    { kind: CodeActionKind.RefactorInline, title: localize('codeAction.widget.id.inline', 'Inline'), icon: Codicon.wrench },\n    { kind: CodeActionKind.RefactorRewrite, title: localize('codeAction.widget.id.convert', 'Rewrite'), icon: Codicon.wrench },\n    { kind: CodeActionKind.RefactorMove, title: localize('codeAction.widget.id.move', 'Move'), icon: Codicon.wrench },\n    { kind: CodeActionKind.SurroundWith, title: localize('codeAction.widget.id.surround', 'Surround With'), icon: Codicon.symbolSnippet },\n    { kind: CodeActionKind.Source, title: localize('codeAction.widget.id.source', 'Source Action'), icon: Codicon.symbolFile },\n    uncategorizedCodeActionGroup,\n]);\nexport function toMenuItems(inputCodeActions, showHeaders, keybindingResolver) {\n    if (!showHeaders) {\n        return inputCodeActions.map((action) => {\n            var _a;\n            return {\n                kind: \"action\" /* ActionListItemKind.Action */,\n                item: action,\n                group: uncategorizedCodeActionGroup,\n                disabled: !!action.action.disabled,\n                label: action.action.disabled || action.action.title,\n                canPreview: !!((_a = action.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length),\n            };\n        });\n    }\n    // Group code actions\n    const menuEntries = codeActionGroups.map(group => ({ group, actions: [] }));\n    for (const action of inputCodeActions) {\n        const kind = action.action.kind ? new CodeActionKind(action.action.kind) : CodeActionKind.None;\n        for (const menuEntry of menuEntries) {\n            if (menuEntry.group.kind.contains(kind)) {\n                menuEntry.actions.push(action);\n                break;\n            }\n        }\n    }\n    const allMenuItems = [];\n    for (const menuEntry of menuEntries) {\n        if (menuEntry.actions.length) {\n            allMenuItems.push({ kind: \"header\" /* ActionListItemKind.Header */, group: menuEntry.group });\n            for (const action of menuEntry.actions) {\n                allMenuItems.push({\n                    kind: \"action\" /* ActionListItemKind.Action */,\n                    item: action,\n                    group: menuEntry.group,\n                    label: action.action.title,\n                    disabled: !!action.action.disabled,\n                    keybinding: keybindingResolver(action.action),\n                });\n            }\n        }\n    }\n    return allMenuItems;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar CodeActionController_1;\nimport { getDomNodePagePosition } from '../../../../base/browser/dom.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { Position } from '../../../common/core/position.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ApplyCodeActionReason, applyCodeAction } from './codeAction.js';\nimport { CodeActionKeybindingResolver } from './codeActionKeybindingResolver.js';\nimport { toMenuItems } from './codeActionMenu.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { localize } from '../../../../nls.js';\nimport { IActionWidgetService } from '../../../../platform/actionWidget/browser/actionWidget.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { editorFindMatchHighlight, editorFindMatchHighlightBorder } from '../../../../platform/theme/common/colorRegistry.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { CodeActionTriggerSource } from '../common/types.js';\nimport { CodeActionModel } from './codeActionModel.js';\nconst DECORATION_CLASS_NAME = 'quickfix-edit-highlight';\nlet CodeActionController = CodeActionController_1 = class CodeActionController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(CodeActionController_1.ID);\n    }\n    constructor(editor, markerService, contextKeyService, instantiationService, languageFeaturesService, progressService, _commandService, _configurationService, _actionWidgetService, _instantiationService) {\n        super();\n        this._commandService = _commandService;\n        this._configurationService = _configurationService;\n        this._actionWidgetService = _actionWidgetService;\n        this._instantiationService = _instantiationService;\n        this._activeCodeActions = this._register(new MutableDisposable());\n        this._showDisabled = false;\n        this._disposed = false;\n        this._editor = editor;\n        this._model = this._register(new CodeActionModel(this._editor, languageFeaturesService.codeActionProvider, markerService, contextKeyService, progressService, _configurationService));\n        this._register(this._model.onDidChangeState(newState => this.update(newState)));\n        this._lightBulbWidget = new Lazy(() => {\n            const widget = this._editor.getContribution(LightBulbWidget.ID);\n            if (widget) {\n                this._register(widget.onClick(e => this.showCodeActionList(e.actions, e, { includeDisabledActions: false, fromLightbulb: true })));\n            }\n            return widget;\n        });\n        this._resolver = instantiationService.createInstance(CodeActionKeybindingResolver);\n        this._register(this._editor.onDidLayoutChange(() => this._actionWidgetService.hide()));\n    }\n    dispose() {\n        this._disposed = true;\n        super.dispose();\n    }\n    showCodeActions(_trigger, actions, at) {\n        return this.showCodeActionList(actions, at, { includeDisabledActions: false, fromLightbulb: false });\n    }\n    manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        (_a = MessageController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.closeMessage();\n        const triggerPosition = this._editor.getPosition();\n        this._trigger({ type: 1 /* CodeActionTriggerType.Invoke */, triggerAction, filter, autoApply, context: { notAvailableMessage, position: triggerPosition } });\n    }\n    _trigger(trigger) {\n        return this._model.trigger(trigger);\n    }\n    _applyCodeAction(action, retrigger, preview) {\n        return __awaiter(this, void 0, void 0, function* () {\n            try {\n                yield this._instantiationService.invokeFunction(applyCodeAction, action, ApplyCodeActionReason.FromCodeActions, { preview, editor: this._editor });\n            }\n            finally {\n                if (retrigger) {\n                    this._trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.QuickFix, filter: {} });\n                }\n            }\n        });\n    }\n    update(newState) {\n        var _a, _b, _c, _d, _e, _f, _g;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (newState.type !== 1 /* CodeActionsState.Type.Triggered */) {\n                (_a = this._lightBulbWidget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\n                return;\n            }\n            let actions;\n            try {\n                actions = yield newState.actions;\n            }\n            catch (e) {\n                onUnexpectedError(e);\n                return;\n            }\n            if (this._disposed) {\n                return;\n            }\n            (_b = this._lightBulbWidget.value) === null || _b === void 0 ? void 0 : _b.update(actions, newState.trigger, newState.position);\n            if (newState.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                if ((_c = newState.trigger.filter) === null || _c === void 0 ? void 0 : _c.include) { // Triggered for specific scope\n                    // Check to see if we want to auto apply.\n                    const validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\n                    if (validActionToApply) {\n                        try {\n                            (_d = this._lightBulbWidget.value) === null || _d === void 0 ? void 0 : _d.hide();\n                            yield this._applyCodeAction(validActionToApply, false, false);\n                        }\n                        finally {\n                            actions.dispose();\n                        }\n                        return;\n                    }\n                    // Check to see if there is an action that we would have applied were it not invalid\n                    if (newState.trigger.context) {\n                        const invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\n                        if (invalidAction && invalidAction.action.disabled) {\n                            (_e = MessageController.get(this._editor)) === null || _e === void 0 ? void 0 : _e.showMessage(invalidAction.action.disabled, newState.trigger.context.position);\n                            actions.dispose();\n                            return;\n                        }\n                    }\n                }\n                const includeDisabledActions = !!((_f = newState.trigger.filter) === null || _f === void 0 ? void 0 : _f.include);\n                if (newState.trigger.context) {\n                    if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\n                        (_g = MessageController.get(this._editor)) === null || _g === void 0 ? void 0 : _g.showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\n                        this._activeCodeActions.value = actions;\n                        actions.dispose();\n                        return;\n                    }\n                }\n                this._activeCodeActions.value = actions;\n                this.showCodeActionList(actions, this.toCoords(newState.position), { includeDisabledActions, fromLightbulb: false });\n            }\n            else {\n                // auto magically triggered\n                if (this._actionWidgetService.isVisible) {\n                    // TODO: Figure out if we should update the showing menu?\n                    actions.dispose();\n                }\n                else {\n                    this._activeCodeActions.value = actions;\n                }\n            }\n        });\n    }\n    getInvalidActionThatWouldHaveBeenApplied(trigger, actions) {\n        if (!actions.allActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length === 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.allActions.length === 1)) {\n            return actions.allActions.find(({ action }) => action.disabled);\n        }\n        return undefined;\n    }\n    tryGetValidActionToApply(trigger, actions) {\n        if (!actions.validActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length > 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.validActions.length === 1)) {\n            return actions.validActions[0];\n        }\n        return undefined;\n    }\n    showCodeActionList(actions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const currentDecorations = this._editor.createDecorationsCollection();\n            const editorDom = this._editor.getDomNode();\n            if (!editorDom) {\n                return;\n            }\n            const actionsToShow = options.includeDisabledActions && (this._showDisabled || actions.validActions.length === 0) ? actions.allActions : actions.validActions;\n            if (!actionsToShow.length) {\n                return;\n            }\n            const anchor = Position.isIPosition(at) ? this.toCoords(at) : at;\n            const delegate = {\n                onSelect: (action, preview) => __awaiter(this, void 0, void 0, function* () {\n                    this._applyCodeAction(action, /* retrigger */ true, !!preview);\n                    this._actionWidgetService.hide();\n                    currentDecorations.clear();\n                }),\n                onHide: () => {\n                    var _a;\n                    (_a = this._editor) === null || _a === void 0 ? void 0 : _a.focus();\n                    currentDecorations.clear();\n                },\n                onHover: (action, token) => __awaiter(this, void 0, void 0, function* () {\n                    var _a;\n                    yield action.resolve(token);\n                    if (token.isCancellationRequested) {\n                        return;\n                    }\n                    return { canPreview: !!((_a = action.action.edit) === null || _a === void 0 ? void 0 : _a.edits.length) };\n                }),\n                onFocus: (action) => {\n                    var _a, _b;\n                    if (action && action.highlightRange && action.action.diagnostics) {\n                        const decorations = [{ range: action.action.diagnostics[0], options: CodeActionController_1.DECORATION }];\n                        currentDecorations.set(decorations);\n                        const diagnostic = action.action.diagnostics[0];\n                        const selectionText = (_b = (_a = this._editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition({ lineNumber: diagnostic.startLineNumber, column: diagnostic.startColumn })) === null || _b === void 0 ? void 0 : _b.word;\n                        aria.status(localize('editingNewSelection', \"Context: {0} at line {1} and column {2}.\", selectionText, diagnostic.startLineNumber, diagnostic.startColumn));\n                    }\n                    else {\n                        currentDecorations.clear();\n                    }\n                }\n            };\n            this._actionWidgetService.show('codeActionWidget', true, toMenuItems(actionsToShow, this._shouldShowHeaders(), this._resolver.getResolver()), delegate, anchor, editorDom, this._getActionBarActions(actions, at, options));\n        });\n    }\n    toCoords(position) {\n        if (!this._editor.hasModel()) {\n            return { x: 0, y: 0 };\n        }\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n        this._editor.render();\n        // Translate to absolute editor position\n        const cursorCoords = this._editor.getScrolledVisiblePosition(position);\n        const editorCoords = getDomNodePagePosition(this._editor.getDomNode());\n        const x = editorCoords.left + cursorCoords.left;\n        const y = editorCoords.top + cursorCoords.top + cursorCoords.height;\n        return { x, y };\n    }\n    _shouldShowHeaders() {\n        var _a;\n        const model = (_a = this._editor) === null || _a === void 0 ? void 0 : _a.getModel();\n        return this._configurationService.getValue('editor.codeActionWidget.showHeaders', { resource: model === null || model === void 0 ? void 0 : model.uri });\n    }\n    _getActionBarActions(actions, at, options) {\n        if (options.fromLightbulb) {\n            return [];\n        }\n        const resultActions = actions.documentation.map((command) => {\n            var _a;\n            return ({\n                id: command.id,\n                label: command.title,\n                tooltip: (_a = command.tooltip) !== null && _a !== void 0 ? _a : '',\n                class: undefined,\n                enabled: true,\n                run: () => { var _a; return this._commandService.executeCommand(command.id, ...((_a = command.arguments) !== null && _a !== void 0 ? _a : [])); },\n            });\n        });\n        if (options.includeDisabledActions && actions.validActions.length > 0 && actions.allActions.length !== actions.validActions.length) {\n            resultActions.push(this._showDisabled ? {\n                id: 'hideMoreActions',\n                label: localize('hideMoreActions', 'Hide Disabled'),\n                enabled: true,\n                tooltip: '',\n                class: undefined,\n                run: () => {\n                    this._showDisabled = false;\n                    return this.showCodeActionList(actions, at, options);\n                }\n            } : {\n                id: 'showMoreActions',\n                label: localize('showMoreActions', 'Show Disabled'),\n                enabled: true,\n                tooltip: '',\n                class: undefined,\n                run: () => {\n                    this._showDisabled = true;\n                    return this.showCodeActionList(actions, at, options);\n                }\n            });\n        }\n        return resultActions;\n    }\n};\nCodeActionController.ID = 'editor.contrib.codeActionController';\nCodeActionController.DECORATION = ModelDecorationOptions.register({\n    description: 'quickfix-highlight',\n    className: DECORATION_CLASS_NAME\n});\nCodeActionController = CodeActionController_1 = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IContextKeyService),\n    __param(3, IInstantiationService),\n    __param(4, ILanguageFeaturesService),\n    __param(5, IEditorProgressService),\n    __param(6, ICommandService),\n    __param(7, IConfigurationService),\n    __param(8, IActionWidgetService),\n    __param(9, IInstantiationService)\n], CodeActionController);\nexport { CodeActionController };\nregisterThemingParticipant((theme, collector) => {\n    const addBackgroundColorRule = (selector, color) => {\n        if (color) {\n            collector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`);\n        }\n    };\n    addBackgroundColorRule('.quickfix-edit-highlight', theme.getColor(editorFindMatchHighlight));\n    const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n    if (findMatchHighlightBorder) {\n        collector.addRule(`.monaco-editor .quickfix-edit-highlight { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { CodeActionKind, CodeActionTriggerSource } from '../common/types.js';\nimport { getCodeActions } from './codeAction.js';\nexport const SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\nclass CodeActionOracle extends Disposable {\n    constructor(_editor, _markerService, _signalChange, _delay = 250) {\n        super();\n        this._editor = _editor;\n        this._markerService = _markerService;\n        this._signalChange = _signalChange;\n        this._delay = _delay;\n        this._autoTriggerTimer = this._register(new TimeoutTimer());\n        this._register(this._markerService.onMarkerChanged(e => this._onMarkerChanges(e)));\n        this._register(this._editor.onDidChangeCursorPosition(() => this._tryAutoTrigger()));\n    }\n    trigger(trigger) {\n        const selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\n        this._signalChange(selection ? { trigger, selection } : undefined);\n    }\n    _onMarkerChanges(resources) {\n        const model = this._editor.getModel();\n        if (model && resources.some(resource => isEqual(resource, model.uri))) {\n            this._tryAutoTrigger();\n        }\n    }\n    _tryAutoTrigger() {\n        this._autoTriggerTimer.cancelAndSet(() => {\n            this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }, this._delay);\n    }\n    _getRangeOfSelectionUnlessWhitespaceEnclosed(trigger) {\n        if (!this._editor.hasModel()) {\n            return undefined;\n        }\n        const model = this._editor.getModel();\n        const selection = this._editor.getSelection();\n        if (selection.isEmpty() && trigger.type === 2 /* CodeActionTriggerType.Auto */) {\n            const { lineNumber, column } = selection.getPosition();\n            const line = model.getLineContent(lineNumber);\n            if (line.length === 0) {\n                // empty line\n                return undefined;\n            }\n            else if (column === 1) {\n                // look only right\n                if (/\\s/.test(line[0])) {\n                    return undefined;\n                }\n            }\n            else if (column === model.getLineMaxColumn(lineNumber)) {\n                // look only left\n                if (/\\s/.test(line[line.length - 1])) {\n                    return undefined;\n                }\n            }\n            else {\n                // look left and right\n                if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\n                    return undefined;\n                }\n            }\n        }\n        return selection;\n    }\n}\nexport var CodeActionsState;\n(function (CodeActionsState) {\n    CodeActionsState.Empty = { type: 0 /* Type.Empty */ };\n    class Triggered {\n        constructor(trigger, position, _cancellablePromise) {\n            this.trigger = trigger;\n            this.position = position;\n            this._cancellablePromise = _cancellablePromise;\n            this.type = 1 /* Type.Triggered */;\n            this.actions = _cancellablePromise.catch((e) => {\n                if (isCancellationError(e)) {\n                    return emptyCodeActionSet;\n                }\n                throw e;\n            });\n        }\n        cancel() {\n            this._cancellablePromise.cancel();\n        }\n    }\n    CodeActionsState.Triggered = Triggered;\n})(CodeActionsState || (CodeActionsState = {}));\nconst emptyCodeActionSet = Object.freeze({\n    allActions: [],\n    validActions: [],\n    dispose: () => { },\n    documentation: [],\n    hasAutoFix: false\n});\nexport class CodeActionModel extends Disposable {\n    constructor(_editor, _registry, _markerService, contextKeyService, _progressService, _configurationService) {\n        super();\n        this._editor = _editor;\n        this._registry = _registry;\n        this._markerService = _markerService;\n        this._progressService = _progressService;\n        this._configurationService = _configurationService;\n        this._codeActionOracle = this._register(new MutableDisposable());\n        this._state = CodeActionsState.Empty;\n        this._onDidChangeState = this._register(new Emitter());\n        this.onDidChangeState = this._onDidChangeState.event;\n        this._disposed = false;\n        this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeModel(() => this._update()));\n        this._register(this._editor.onDidChangeModelLanguage(() => this._update()));\n        this._register(this._registry.onDidChange(() => this._update()));\n        this._update();\n    }\n    dispose() {\n        if (this._disposed) {\n            return;\n        }\n        this._disposed = true;\n        super.dispose();\n        this.setState(CodeActionsState.Empty, true);\n    }\n    _settingEnabledNearbyQuickfixes() {\n        var _a;\n        const model = (_a = this._editor) === null || _a === void 0 ? void 0 : _a.getModel();\n        return this._configurationService ? this._configurationService.getValue('editor.codeActionWidget.includeNearbyQuickfixes', { resource: model === null || model === void 0 ? void 0 : model.uri }) : false;\n    }\n    _update() {\n        if (this._disposed) {\n            return;\n        }\n        this._codeActionOracle.value = undefined;\n        this.setState(CodeActionsState.Empty);\n        const model = this._editor.getModel();\n        if (model\n            && this._registry.has(model)\n            && !this._editor.getOption(90 /* EditorOption.readOnly */)) {\n            const supportedActions = this._registry.all(model).flatMap(provider => { var _a; return (_a = provider.providedCodeActionKinds) !== null && _a !== void 0 ? _a : []; });\n            this._supportedCodeActions.set(supportedActions.join(' '));\n            this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, trigger => {\n                var _a;\n                if (!trigger) {\n                    this.setState(CodeActionsState.Empty);\n                    return;\n                }\n                const startPosition = trigger.selection.getStartPosition();\n                const actions = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                    var _b, _c, _d, _e, _f, _g;\n                    if (this._settingEnabledNearbyQuickfixes() && trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */ && (trigger.trigger.triggerAction === CodeActionTriggerSource.QuickFix || ((_c = (_b = trigger.trigger.filter) === null || _b === void 0 ? void 0 : _b.include) === null || _c === void 0 ? void 0 : _c.contains(CodeActionKind.QuickFix)))) {\n                        const codeActionSet = yield getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token);\n                        if (token.isCancellationRequested) {\n                            return emptyCodeActionSet;\n                        }\n                        // Search for quickfixes in the curret code action set.\n                        const foundQuickfix = (_d = codeActionSet.validActions) === null || _d === void 0 ? void 0 : _d.some(action => action.action.kind ? CodeActionKind.QuickFix.contains(new CodeActionKind(action.action.kind)) : false);\n                        if (!foundQuickfix) {\n                            const allMarkers = this._markerService.read({ resource: model.uri });\n                            // If markers exists, and there are no quickfixes found or length is zero, check for quickfixes on that line.\n                            if (allMarkers.length > 0) {\n                                const currPosition = trigger.selection.getPosition();\n                                let trackedPosition = currPosition;\n                                let distance = Number.MAX_VALUE;\n                                let toBeModified = false;\n                                for (const marker of allMarkers) {\n                                    const col = marker.endColumn;\n                                    const row = marker.endLineNumber;\n                                    const startRow = marker.startLineNumber;\n                                    // Found quickfix on the same line and check relative distance to other markers\n                                    if ((row === currPosition.lineNumber || startRow === currPosition.lineNumber) && Math.abs(currPosition.column - col) < distance) {\n                                        distance = Math.abs(currPosition.column - col);\n                                        toBeModified = true;\n                                        trackedPosition = new Position(row, col);\n                                    }\n                                }\n                                // Only retriggers if actually found quickfix on the same line as cursor\n                                if (toBeModified) {\n                                    const newCodeActionTrigger = {\n                                        type: trigger.trigger.type,\n                                        triggerAction: trigger.trigger.triggerAction,\n                                        filter: { include: ((_e = trigger.trigger.filter) === null || _e === void 0 ? void 0 : _e.include) ? (_f = trigger.trigger.filter) === null || _f === void 0 ? void 0 : _f.include : CodeActionKind.QuickFix },\n                                        autoApply: trigger.trigger.autoApply,\n                                        context: { notAvailableMessage: ((_g = trigger.trigger.context) === null || _g === void 0 ? void 0 : _g.notAvailableMessage) || '', position: trackedPosition }\n                                    };\n                                    const selectionAsPosition = new Selection(trackedPosition.lineNumber, trackedPosition.column, trackedPosition.lineNumber, trackedPosition.column);\n                                    const actionsAtMarker = yield getCodeActions(this._registry, model, selectionAsPosition, newCodeActionTrigger, Progress.None, token);\n                                    const currentActions = [...codeActionSet.validActions];\n                                    if (actionsAtMarker.validActions.length !== 0) {\n                                        actionsAtMarker.validActions.forEach(action => {\n                                            action.highlightRange = action.action.isPreferred;\n                                        });\n                                        // Already filtered through to only get quickfixes, so no need to filter again.\n                                        currentActions.push(...actionsAtMarker.validActions);\n                                    }\n                                    return { validActions: currentActions, allActions: codeActionSet.allActions, documentation: codeActionSet.documentation, hasAutoFix: codeActionSet.hasAutoFix, dispose: () => { codeActionSet.dispose(); } };\n                                }\n                            }\n                        }\n                    }\n                    // temporarilly hiding here as this is enabled/disabled behind a setting.\n                    return getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token);\n                }));\n                if (trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                    (_a = this._progressService) === null || _a === void 0 ? void 0 : _a.showWhile(actions, 250);\n                }\n                this.setState(new CodeActionsState.Triggered(trigger.trigger, startPosition, actions));\n            }, undefined);\n            this._codeActionOracle.value.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }\n        else {\n            this._supportedCodeActions.reset();\n        }\n    }\n    trigger(trigger) {\n        var _a;\n        (_a = this._codeActionOracle.value) === null || _a === void 0 ? void 0 : _a.trigger(trigger);\n    }\n    setState(newState, skipNotify) {\n        if (newState === this._state) {\n            return;\n        }\n        // Cancel old request\n        if (this._state.type === 1 /* CodeActionsState.Type.Triggered */) {\n            this._state.cancel();\n        }\n        this._state = newState;\n        if (!skipNotify && !this._disposed) {\n            this._onDidChangeState.fire(newState);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar LightBulbWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './lightBulbWidget.css';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport { autoFixCommandId, quickFixCommandId } from './codeAction.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nvar LightBulbState;\n(function (LightBulbState) {\n    LightBulbState.Hidden = { type: 0 /* Type.Hidden */ };\n    class Showing {\n        constructor(actions, trigger, editorPosition, widgetPosition) {\n            this.actions = actions;\n            this.trigger = trigger;\n            this.editorPosition = editorPosition;\n            this.widgetPosition = widgetPosition;\n            this.type = 1 /* Type.Showing */;\n        }\n    }\n    LightBulbState.Showing = Showing;\n})(LightBulbState || (LightBulbState = {}));\nlet LightBulbWidget = LightBulbWidget_1 = class LightBulbWidget extends Disposable {\n    constructor(_editor, keybindingService) {\n        super();\n        this._editor = _editor;\n        this._onClick = this._register(new Emitter());\n        this.onClick = this._onClick.event;\n        this._state = LightBulbState.Hidden;\n        this._domNode = dom.$('div.lightBulbWidget');\n        this._register(Gesture.ignoreTarget(this._domNode));\n        this._editor.addContentWidget(this);\n        this._register(this._editor.onDidChangeModelContent(_ => {\n            // cancel when the line in question has been removed\n            const editorModel = this._editor.getModel();\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n                this.hide();\n            }\n        }));\n        this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n                return;\n            }\n            // Make sure that focus / cursor location is not lost when clicking widget icon\n            this._editor.focus();\n            e.preventDefault();\n            // a bit of extra work to make sure the menu\n            // doesn't cover the line-text\n            const { top, height } = dom.getDomNodePagePosition(this._domNode);\n            const lineHeight = this._editor.getOption(66 /* EditorOption.lineHeight */);\n            let pad = Math.floor(lineHeight / 3);\n            if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n                pad += lineHeight;\n            }\n            this._onClick.fire({\n                x: e.posx,\n                y: top + height + pad,\n                actions: this.state.actions,\n                trigger: this.state.trigger,\n            });\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e) => {\n            if ((e.buttons & 1) !== 1) {\n                return;\n            }\n            // mouse enters lightbulb while the primary/left button\n            // is being pressed -> hide the lightbulb\n            this.hide();\n        }));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            // hide when told to do so\n            if (e.hasChanged(64 /* EditorOption.lightbulb */) && !this._editor.getOption(64 /* EditorOption.lightbulb */).enabled) {\n                this.hide();\n            }\n        }));\n        this._register(Event.runAndSubscribe(keybindingService.onDidUpdateKeybindings, () => {\n            var _a, _b, _c, _d;\n            this._preferredKbLabel = (_b = (_a = keybindingService.lookupKeybinding(autoFixCommandId)) === null || _a === void 0 ? void 0 : _a.getLabel()) !== null && _b !== void 0 ? _b : undefined;\n            this._quickFixKbLabel = (_d = (_c = keybindingService.lookupKeybinding(quickFixCommandId)) === null || _c === void 0 ? void 0 : _c.getLabel()) !== null && _d !== void 0 ? _d : undefined;\n            this._updateLightBulbTitleAndIcon();\n        }));\n    }\n    dispose() {\n        super.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'LightBulbWidget';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return this._state.type === 1 /* LightBulbState.Type.Showing */ ? this._state.widgetPosition : null;\n    }\n    update(actions, trigger, atPosition) {\n        if (actions.validActions.length <= 0) {\n            return this.hide();\n        }\n        const options = this._editor.getOptions();\n        if (!options.get(64 /* EditorOption.lightbulb */).enabled) {\n            return this.hide();\n        }\n        const model = this._editor.getModel();\n        if (!model) {\n            return this.hide();\n        }\n        const { lineNumber, column } = model.validatePosition(atPosition);\n        const tabSize = model.getOptions().tabSize;\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        const lineContent = model.getLineContent(lineNumber);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        const lineHasSpace = fontInfo.spaceWidth * indent > 22;\n        const isFolded = (lineNumber) => {\n            return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n        };\n        let effectiveLineNumber = lineNumber;\n        if (!lineHasSpace) {\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n                effectiveLineNumber -= 1;\n            }\n            else if (!isFolded(lineNumber + 1)) {\n                effectiveLineNumber += 1;\n            }\n            else if (column * fontInfo.spaceWidth < 22) {\n                // cannot show lightbulb above/below and showing\n                // it inline would overlay the cursor...\n                return this.hide();\n            }\n        }\n        this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n            position: { lineNumber: effectiveLineNumber, column: 1 },\n            preference: LightBulbWidget_1._posPref\n        });\n        this._editor.layoutContentWidget(this);\n    }\n    hide() {\n        if (this.state === LightBulbState.Hidden) {\n            return;\n        }\n        this.state = LightBulbState.Hidden;\n        this._editor.layoutContentWidget(this);\n    }\n    get state() { return this._state; }\n    set state(value) {\n        this._state = value;\n        this._updateLightBulbTitleAndIcon();\n    }\n    _updateLightBulbTitleAndIcon() {\n        if (this.state.type === 1 /* LightBulbState.Type.Showing */ && this.state.actions.hasAutoFix) {\n            // update icon\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(Codicon.lightBulb));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(Codicon.lightbulbAutofix));\n            if (this._preferredKbLabel) {\n                this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", this._preferredKbLabel);\n                return;\n            }\n        }\n        // update icon\n        this._domNode.classList.remove(...ThemeIcon.asClassNameArray(Codicon.lightbulbAutofix));\n        this._domNode.classList.add(...ThemeIcon.asClassNameArray(Codicon.lightBulb));\n        if (this._quickFixKbLabel) {\n            this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", this._quickFixKbLabel);\n        }\n        else {\n            this.title = nls.localize('codeAction', \"Show Code Actions\");\n        }\n    }\n    set title(value) {\n        this._domNode.title = value;\n    }\n};\nLightBulbWidget.ID = 'editor.contrib.lightbulbWidget';\nLightBulbWidget._posPref = [0 /* ContentWidgetPositionPreference.EXACT */];\nLightBulbWidget = LightBulbWidget_1 = __decorate([\n    __param(1, IKeybindingService)\n], LightBulbWidget);\nexport { LightBulbWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nexport class CodeActionKind {\n    constructor(value) {\n        this.value = value;\n    }\n    equals(other) {\n        return this.value === other.value;\n    }\n    contains(other) {\n        return this.equals(other) || this.value === '' || other.value.startsWith(this.value + CodeActionKind.sep);\n    }\n    intersects(other) {\n        return this.contains(other) || other.contains(this);\n    }\n    append(part) {\n        return new CodeActionKind(this.value + CodeActionKind.sep + part);\n    }\n}\nCodeActionKind.sep = '.';\nCodeActionKind.None = new CodeActionKind('@@none@@'); // Special code action that contains nothing\nCodeActionKind.Empty = new CodeActionKind('');\nCodeActionKind.QuickFix = new CodeActionKind('quickfix');\nCodeActionKind.Refactor = new CodeActionKind('refactor');\nCodeActionKind.RefactorExtract = CodeActionKind.Refactor.append('extract');\nCodeActionKind.RefactorInline = CodeActionKind.Refactor.append('inline');\nCodeActionKind.RefactorMove = CodeActionKind.Refactor.append('move');\nCodeActionKind.RefactorRewrite = CodeActionKind.Refactor.append('rewrite');\nCodeActionKind.Notebook = new CodeActionKind('notebook');\nCodeActionKind.Source = new CodeActionKind('source');\nCodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\nCodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\nCodeActionKind.SurroundWith = CodeActionKind.Refactor.append('surround');\nexport var CodeActionTriggerSource;\n(function (CodeActionTriggerSource) {\n    CodeActionTriggerSource[\"Refactor\"] = \"refactor\";\n    CodeActionTriggerSource[\"RefactorPreview\"] = \"refactor preview\";\n    CodeActionTriggerSource[\"Lightbulb\"] = \"lightbulb\";\n    CodeActionTriggerSource[\"Default\"] = \"other (default)\";\n    CodeActionTriggerSource[\"SourceAction\"] = \"source action\";\n    CodeActionTriggerSource[\"QuickFix\"] = \"quick fix action\";\n    CodeActionTriggerSource[\"FixAll\"] = \"fix all\";\n    CodeActionTriggerSource[\"OrganizeImports\"] = \"organize imports\";\n    CodeActionTriggerSource[\"AutoFix\"] = \"auto fix\";\n    CodeActionTriggerSource[\"QuickFixHover\"] = \"quick fix hover window\";\n    CodeActionTriggerSource[\"OnSave\"] = \"save participants\";\n    CodeActionTriggerSource[\"ProblemsView\"] = \"problems view\";\n})(CodeActionTriggerSource || (CodeActionTriggerSource = {}));\nexport function mayIncludeActionsOfKind(filter, providedKind) {\n    // A provided kind may be a subset or superset of our filtered kind.\n    if (filter.include && !filter.include.intersects(providedKind)) {\n        return false;\n    }\n    if (filter.excludes) {\n        if (filter.excludes.some(exclude => excludesAction(providedKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\n        return false;\n    }\n    return true;\n}\nexport function filtersAction(filter, action) {\n    const actionKind = action.kind ? new CodeActionKind(action.kind) : undefined;\n    // Filter out actions by kind\n    if (filter.include) {\n        if (!actionKind || !filter.include.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.excludes) {\n        if (actionKind && filter.excludes.some(exclude => excludesAction(actionKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions) {\n        if (actionKind && CodeActionKind.Source.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.onlyIncludePreferredActions) {\n        if (!action.isPreferred) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction excludesAction(providedKind, exclude, include) {\n    if (!exclude.contains(providedKind)) {\n        return false;\n    }\n    if (include && exclude.contains(include)) {\n        // The include is more specific, don't filter out\n        return false;\n    }\n    return true;\n}\nexport class CodeActionCommandArgs {\n    static fromUser(arg, defaults) {\n        if (!arg || typeof arg !== 'object') {\n            return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\n        }\n        return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\n    }\n    static getApplyFromUser(arg, defaultAutoApply) {\n        switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\n            case 'first': return \"first\" /* CodeActionAutoApply.First */;\n            case 'never': return \"never\" /* CodeActionAutoApply.Never */;\n            case 'ifsingle': return \"ifSingle\" /* CodeActionAutoApply.IfSingle */;\n            default: return defaultAutoApply;\n        }\n    }\n    static getKindFromUser(arg, defaultKind) {\n        return typeof arg.kind === 'string'\n            ? new CodeActionKind(arg.kind)\n            : defaultKind;\n    }\n    static getPreferredUser(arg) {\n        return typeof arg.preferred === 'boolean'\n            ? arg.preferred\n            : false;\n    }\n    constructor(kind, apply, preferred) {\n        this.kind = kind;\n        this.apply = apply;\n        this.preferred = preferred;\n    }\n}\nexport class CodeActionItem {\n    constructor(action, provider, highlightRange) {\n        this.action = action;\n        this.provider = provider;\n        this.highlightRange = highlightRange;\n    }\n    resolve(token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (((_a = this.provider) === null || _a === void 0 ? void 0 : _a.resolveCodeAction) && !this.action.edit) {\n                let action;\n                try {\n                    action = yield this.provider.resolveCodeAction(this.action, token);\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n                if (action) {\n                    this.action.edit = action.edit;\n                }\n            }\n            return this;\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class CodeLensModel {\n    constructor() {\n        this.lenses = [];\n        this._disposables = new DisposableStore();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    get isDisposed() {\n        return this._disposables.isDisposed;\n    }\n    add(list, provider) {\n        this._disposables.add(list);\n        for (const symbol of list.lenses) {\n            this.lenses.push({ symbol, provider });\n        }\n    }\n}\nexport function getCodeLensModel(registry, model, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        const providerRanks = new Map();\n        const result = new CodeLensModel();\n        const promises = provider.map((provider, i) => __awaiter(this, void 0, void 0, function* () {\n            providerRanks.set(provider, i);\n            try {\n                const list = yield Promise.resolve(provider.provideCodeLenses(model, token));\n                if (list) {\n                    result.add(list, provider);\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }));\n        yield Promise.all(promises);\n        result.lenses = result.lenses.sort((a, b) => {\n            // sort by lineNumber, provider-rank, and column\n            if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\n                return -1;\n            }\n            else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\n                return 1;\n            }\n            else if ((providerRanks.get(a.provider)) < (providerRanks.get(b.provider))) {\n                return -1;\n            }\n            else if ((providerRanks.get(a.provider)) > (providerRanks.get(b.provider))) {\n                return 1;\n            }\n            else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\n                return -1;\n            }\n            else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        return result;\n    });\n}\nCommandsRegistry.registerCommand('_executeCodeLensProvider', function (accessor, ...args) {\n    let [uri, itemResolveCount] = args;\n    assertType(URI.isUri(uri));\n    assertType(typeof itemResolveCount === 'number' || !itemResolveCount);\n    const { codeLensProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const result = [];\n    const disposables = new DisposableStore();\n    return getCodeLensModel(codeLensProvider, model, CancellationToken.None).then(value => {\n        disposables.add(value);\n        const resolve = [];\n        for (const item of value.lenses) {\n            if (itemResolveCount === undefined || itemResolveCount === null || Boolean(item.symbol.command)) {\n                result.push(item.symbol);\n            }\n            else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\n                resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(symbol => result.push(symbol || item.symbol)));\n            }\n        }\n        return Promise.all(resolve);\n    }).then(() => {\n        return result;\n    }).finally(() => {\n        // make sure to return results, then (on next tick)\n        // dispose the results\n        setTimeout(() => disposables.dispose(), 100);\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { runWhenIdle } from '../../../../base/common/async.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CodeLensModel } from './codelens.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport const ICodeLensCache = createDecorator('ICodeLensCache');\nclass CacheItem {\n    constructor(lineCount, data) {\n        this.lineCount = lineCount;\n        this.data = data;\n    }\n}\nlet CodeLensCache = class CodeLensCache {\n    constructor(storageService) {\n        this._fakeProvider = new class {\n            provideCodeLenses() {\n                throw new Error('not supported');\n            }\n        };\n        this._cache = new LRUCache(20, 0.75);\n        // remove old data\n        const oldkey = 'codelens/cache';\n        runWhenIdle(() => storageService.remove(oldkey, 1 /* StorageScope.WORKSPACE */));\n        // restore lens data on start\n        const key = 'codelens/cache2';\n        const raw = storageService.get(key, 1 /* StorageScope.WORKSPACE */, '{}');\n        this._deserialize(raw);\n        // store lens data on shutdown\n        Event.once(storageService.onWillSaveState)(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                storageService.store(key, this._serialize(), 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n            }\n        });\n    }\n    put(model, data) {\n        // create a copy of the model that is without command-ids\n        // but with comand-labels\n        const copyItems = data.lenses.map(item => {\n            var _a;\n            return {\n                range: item.symbol.range,\n                command: item.symbol.command && { id: '', title: (_a = item.symbol.command) === null || _a === void 0 ? void 0 : _a.title },\n            };\n        });\n        const copyModel = new CodeLensModel();\n        copyModel.add({ lenses: copyItems, dispose: () => { } }, this._fakeProvider);\n        const item = new CacheItem(model.getLineCount(), copyModel);\n        this._cache.set(model.uri.toString(), item);\n    }\n    get(model) {\n        const item = this._cache.get(model.uri.toString());\n        return item && item.lineCount === model.getLineCount() ? item.data : undefined;\n    }\n    delete(model) {\n        this._cache.delete(model.uri.toString());\n    }\n    // --- persistence\n    _serialize() {\n        const data = Object.create(null);\n        for (const [key, value] of this._cache) {\n            const lines = new Set();\n            for (const d of value.data.lenses) {\n                lines.add(d.symbol.range.startLineNumber);\n            }\n            data[key] = {\n                lineCount: value.lineCount,\n                lines: [...lines.values()]\n            };\n        }\n        return JSON.stringify(data);\n    }\n    _deserialize(raw) {\n        try {\n            const data = JSON.parse(raw);\n            for (const key in data) {\n                const element = data[key];\n                const lenses = [];\n                for (const line of element.lines) {\n                    lenses.push({ range: new Range(line, 1, line, 11) });\n                }\n                const model = new CodeLensModel();\n                model.add({ lenses, dispose() { } }, this._fakeProvider);\n                this._cache.set(key, new CacheItem(element.lineCount, model));\n            }\n        }\n        catch (_a) {\n            // ignore...\n        }\n    }\n};\nCodeLensCache = __decorate([\n    __param(0, IStorageService)\n], CodeLensCache);\nexport { CodeLensCache };\nregisterSingleton(ICodeLensCache, CodeLensCache, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport './codelensWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nclass CodeLensViewZone {\n    constructor(afterLineNumber, heightInPx, onHeight) {\n        /**\n         * We want that this view zone, which reserves space for a code lens appears\n         * as close as possible to the next line, so we use a very large value here.\n         */\n        this.afterColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = heightInPx;\n        this._onHeight = onHeight;\n        this.suppressMouseDown = true;\n        this.domNode = document.createElement('div');\n    }\n    onComputedHeight(height) {\n        if (this._lastHeight === undefined) {\n            this._lastHeight = height;\n        }\n        else if (this._lastHeight !== height) {\n            this._lastHeight = height;\n            this._onHeight();\n        }\n    }\n    isVisible() {\n        return this._lastHeight !== 0\n            && this.domNode.hasAttribute('monaco-visible-view-zone');\n    }\n}\nclass CodeLensContentWidget {\n    constructor(editor, line) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = true;\n        this._commands = new Map();\n        this._isEmpty = true;\n        this._editor = editor;\n        this._id = `codelens.widget-${(CodeLensContentWidget._idPool++)}`;\n        this.updatePosition(line);\n        this._domNode = document.createElement('span');\n        this._domNode.className = `codelens-decoration`;\n    }\n    withCommands(lenses, animate) {\n        this._commands.clear();\n        const children = [];\n        let hasSymbol = false;\n        for (let i = 0; i < lenses.length; i++) {\n            const lens = lenses[i];\n            if (!lens) {\n                continue;\n            }\n            hasSymbol = true;\n            if (lens.command) {\n                const title = renderLabelWithIcons(lens.command.title.trim());\n                if (lens.command.id) {\n                    children.push(dom.$('a', { id: String(i), title: lens.command.tooltip, role: 'button' }, ...title));\n                    this._commands.set(String(i), lens.command);\n                }\n                else {\n                    children.push(dom.$('span', { title: lens.command.tooltip }, ...title));\n                }\n                if (i + 1 < lenses.length) {\n                    children.push(dom.$('span', undefined, '\\u00a0|\\u00a0'));\n                }\n            }\n        }\n        if (!hasSymbol) {\n            // symbols but no commands\n            dom.reset(this._domNode, dom.$('span', undefined, 'no commands'));\n        }\n        else {\n            // symbols and commands\n            dom.reset(this._domNode, ...children);\n            if (this._isEmpty && animate) {\n                this._domNode.classList.add('fadein');\n            }\n            this._isEmpty = false;\n        }\n    }\n    getCommand(link) {\n        return link.parentElement === this._domNode\n            ? this._commands.get(link.id)\n            : undefined;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    updatePosition(line) {\n        const column = this._editor.getModel().getLineFirstNonWhitespaceColumn(line);\n        this._widgetPosition = {\n            position: { lineNumber: line, column: column },\n            preference: [1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    getPosition() {\n        return this._widgetPosition || null;\n    }\n}\nCodeLensContentWidget._idPool = 0;\nexport class CodeLensHelper {\n    constructor() {\n        this._removeDecorations = [];\n        this._addDecorations = [];\n        this._addDecorationsCallbacks = [];\n    }\n    addDecoration(decoration, callback) {\n        this._addDecorations.push(decoration);\n        this._addDecorationsCallbacks.push(callback);\n    }\n    removeDecoration(decorationId) {\n        this._removeDecorations.push(decorationId);\n    }\n    commit(changeAccessor) {\n        const resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\n        for (let i = 0, len = resultingDecorations.length; i < len; i++) {\n            this._addDecorationsCallbacks[i](resultingDecorations[i]);\n        }\n    }\n}\nconst codeLensDecorationOptions = ModelDecorationOptions.register({\n    collapseOnReplaceEdit: true,\n    description: 'codelens'\n});\nexport class CodeLensWidget {\n    constructor(data, editor, helper, viewZoneChangeAccessor, heightInPx, updateCallback) {\n        this._isDisposed = false;\n        this._editor = editor;\n        this._data = data;\n        // create combined range, track all ranges with decorations,\n        // check if there is already something to render\n        this._decorationIds = [];\n        let range;\n        const lenses = [];\n        this._data.forEach((codeLensData, i) => {\n            if (codeLensData.symbol.command) {\n                lenses.push(codeLensData.symbol);\n            }\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: codeLensDecorationOptions\n            }, id => this._decorationIds[i] = id);\n            // the range contains all lenses on this line\n            if (!range) {\n                range = Range.lift(codeLensData.symbol.range);\n            }\n            else {\n                range = Range.plusRange(range, codeLensData.symbol.range);\n            }\n        });\n        this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, heightInPx, updateCallback);\n        this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\n        if (lenses.length > 0) {\n            this._createContentWidgetIfNecessary();\n            this._contentWidget.withCommands(lenses, false);\n        }\n    }\n    _createContentWidgetIfNecessary() {\n        if (!this._contentWidget) {\n            this._contentWidget = new CodeLensContentWidget(this._editor, this._viewZone.afterLineNumber + 1);\n            this._editor.addContentWidget(this._contentWidget);\n        }\n        else {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    dispose(helper, viewZoneChangeAccessor) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        viewZoneChangeAccessor === null || viewZoneChangeAccessor === void 0 ? void 0 : viewZoneChangeAccessor.removeZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.removeContentWidget(this._contentWidget);\n            this._contentWidget = undefined;\n        }\n        this._isDisposed = true;\n    }\n    isDisposed() {\n        return this._isDisposed;\n    }\n    isValid() {\n        return this._decorationIds.some((id, i) => {\n            const range = this._editor.getModel().getDecorationRange(id);\n            const symbol = this._data[i].symbol;\n            return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\n        });\n    }\n    updateCodeLensSymbols(data, helper) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        this._data = data;\n        this._data.forEach((codeLensData, i) => {\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: codeLensDecorationOptions\n            }, id => this._decorationIds[i] = id);\n        });\n    }\n    updateHeight(height, viewZoneChangeAccessor) {\n        this._viewZone.heightInPx = height;\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    computeIfNecessary(model) {\n        if (!this._viewZone.isVisible()) {\n            return null;\n        }\n        // Read editor current state\n        for (let i = 0; i < this._decorationIds.length; i++) {\n            const range = model.getDecorationRange(this._decorationIds[i]);\n            if (range) {\n                this._data[i].symbol.range = range;\n            }\n        }\n        return this._data;\n    }\n    updateCommands(symbols) {\n        this._createContentWidgetIfNecessary();\n        this._contentWidget.withCommands(symbols, true);\n        for (let i = 0; i < this._data.length; i++) {\n            const resolved = symbols[i];\n            if (resolved) {\n                const { symbol } = this._data[i];\n                symbol.command = resolved.command || symbol.command;\n            }\n        }\n    }\n    getCommand(link) {\n        var _a;\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.getCommand(link);\n    }\n    getLineNumber() {\n        const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n        if (range) {\n            return range.startLineNumber;\n        }\n        return -1;\n    }\n    update(viewZoneChangeAccessor) {\n        if (this.isValid()) {\n            const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n            if (range) {\n                this._viewZone.afterLineNumber = range.startLineNumber - 1;\n                viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n                if (this._contentWidget) {\n                    this._contentWidget.updatePosition(range.startLineNumber);\n                    this._editor.layoutContentWidget(this._contentWidget);\n                }\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, disposableTimeout, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { getCodeLensModel } from './codelens.js';\nimport { ICodeLensCache } from './codeLensCache.js';\nimport { CodeLensHelper, CodeLensWidget } from './codelensWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet CodeLensContribution = class CodeLensContribution {\n    constructor(_editor, _languageFeaturesService, debounceService, _commandService, _notificationService, _codeLensCache) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._codeLensCache = _codeLensCache;\n        this._disposables = new DisposableStore();\n        this._localToDispose = new DisposableStore();\n        this._lenses = [];\n        this._oldCodeLensModels = new DisposableStore();\n        this._provideCodeLensDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensProvide', { min: 250 });\n        this._resolveCodeLensesDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensResolve', { min: 250, salt: 'resolve' });\n        this._resolveCodeLensesScheduler = new RunOnceScheduler(() => this._resolveCodeLensesInViewport(), this._resolveCodeLensesDebounce.default());\n        this._disposables.add(this._editor.onDidChangeModel(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(50 /* EditorOption.fontInfo */) || e.hasChanged(19 /* EditorOption.codeLensFontSize */) || e.hasChanged(18 /* EditorOption.codeLensFontFamily */)) {\n                this._updateLensStyle();\n            }\n            if (e.hasChanged(17 /* EditorOption.codeLens */)) {\n                this._onModelChange();\n            }\n        }));\n        this._disposables.add(_languageFeaturesService.codeLensProvider.onDidChange(this._onModelChange, this));\n        this._onModelChange();\n        this._updateLensStyle();\n    }\n    dispose() {\n        var _a;\n        this._localDispose();\n        this._disposables.dispose();\n        this._oldCodeLensModels.dispose();\n        (_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    _getLayoutInfo() {\n        const lineHeightFactor = Math.max(1.3, this._editor.getOption(66 /* EditorOption.lineHeight */) / this._editor.getOption(52 /* EditorOption.fontSize */));\n        let fontSize = this._editor.getOption(19 /* EditorOption.codeLensFontSize */);\n        if (!fontSize || fontSize < 5) {\n            fontSize = (this._editor.getOption(52 /* EditorOption.fontSize */) * .9) | 0;\n        }\n        return {\n            fontSize,\n            codeLensHeight: (fontSize * lineHeightFactor) | 0,\n        };\n    }\n    _updateLensStyle() {\n        const { codeLensHeight, fontSize } = this._getLayoutInfo();\n        const fontFamily = this._editor.getOption(18 /* EditorOption.codeLensFontFamily */);\n        const editorFontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n        const { style } = this._editor.getContainerDomNode();\n        style.setProperty('--vscode-editorCodeLens-lineHeight', `${codeLensHeight}px`);\n        style.setProperty('--vscode-editorCodeLens-fontSize', `${fontSize}px`);\n        style.setProperty('--vscode-editorCodeLens-fontFeatureSettings', editorFontInfo.fontFeatureSettings);\n        if (fontFamily) {\n            style.setProperty('--vscode-editorCodeLens-fontFamily', fontFamily);\n            style.setProperty('--vscode-editorCodeLens-fontFamilyDefault', EDITOR_FONT_DEFAULTS.fontFamily);\n        }\n        //\n        this._editor.changeViewZones(accessor => {\n            for (const lens of this._lenses) {\n                lens.updateHeight(codeLensHeight, accessor);\n            }\n        });\n    }\n    _localDispose() {\n        var _a, _b, _c;\n        (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._getCodeLensModelPromise = undefined;\n        (_b = this._resolveCodeLensesPromise) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        this._localToDispose.clear();\n        this._oldCodeLensModels.clear();\n        (_c = this._currentCodeLensModel) === null || _c === void 0 ? void 0 : _c.dispose();\n    }\n    _onModelChange() {\n        this._localDispose();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!this._editor.getOption(17 /* EditorOption.codeLens */) || model.isTooLargeForTokenization()) {\n            return;\n        }\n        const cachedLenses = this._codeLensCache.get(model);\n        if (cachedLenses) {\n            this._renderCodeLensSymbols(cachedLenses);\n        }\n        if (!this._languageFeaturesService.codeLensProvider.has(model)) {\n            // no provider -> return but check with\n            // cached lenses. they expire after 30 seconds\n            if (cachedLenses) {\n                this._localToDispose.add(disposableTimeout(() => {\n                    const cachedLensesNow = this._codeLensCache.get(model);\n                    if (cachedLenses === cachedLensesNow) {\n                        this._codeLensCache.delete(model);\n                        this._onModelChange();\n                    }\n                }, 30 * 1000));\n            }\n            return;\n        }\n        for (const provider of this._languageFeaturesService.codeLensProvider.all(model)) {\n            if (typeof provider.onDidChange === 'function') {\n                const registration = provider.onDidChange(() => scheduler.schedule());\n                this._localToDispose.add(registration);\n            }\n        }\n        const scheduler = new RunOnceScheduler(() => {\n            var _a;\n            const t1 = Date.now();\n            (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._getCodeLensModelPromise = createCancelablePromise(token => getCodeLensModel(this._languageFeaturesService.codeLensProvider, model, token));\n            this._getCodeLensModelPromise.then(result => {\n                if (this._currentCodeLensModel) {\n                    this._oldCodeLensModels.add(this._currentCodeLensModel);\n                }\n                this._currentCodeLensModel = result;\n                // cache model to reduce flicker\n                this._codeLensCache.put(model, result);\n                // update moving average\n                const newDelay = this._provideCodeLensDebounce.update(model, Date.now() - t1);\n                scheduler.delay = newDelay;\n                // render lenses\n                this._renderCodeLensSymbols(result);\n                // dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());\n                this._resolveCodeLensesInViewportSoon();\n            }, onUnexpectedError);\n        }, this._provideCodeLensDebounce.get(model));\n        this._localToDispose.add(scheduler);\n        this._localToDispose.add(toDisposable(() => this._resolveCodeLensesScheduler.cancel()));\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            var _a;\n            this._editor.changeDecorations(decorationsAccessor => {\n                this._editor.changeViewZones(viewZonesAccessor => {\n                    const toDispose = [];\n                    let lastLensLineNumber = -1;\n                    this._lenses.forEach((lens) => {\n                        if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n                            // invalid -> lens collapsed, attach range doesn't exist anymore\n                            // line_number -> lenses should never be on the same line\n                            toDispose.push(lens);\n                        }\n                        else {\n                            lens.update(viewZonesAccessor);\n                            lastLensLineNumber = lens.getLineNumber();\n                        }\n                    });\n                    const helper = new CodeLensHelper();\n                    toDispose.forEach((l) => {\n                        l.dispose(helper, viewZonesAccessor);\n                        this._lenses.splice(this._lenses.indexOf(l), 1);\n                    });\n                    helper.commit(decorationsAccessor);\n                });\n            });\n            // Ask for all references again\n            scheduler.schedule();\n            // Cancel pending and active resolve requests\n            this._resolveCodeLensesScheduler.cancel();\n            (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._resolveCodeLensesPromise = undefined;\n        }));\n        this._localToDispose.add(this._editor.onDidFocusEditorWidget(() => {\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidBlurEditorText(() => {\n            scheduler.cancel();\n        }));\n        this._localToDispose.add(this._editor.onDidScrollChange(e => {\n            if (e.scrollTopChanged && this._lenses.length > 0) {\n                this._resolveCodeLensesInViewportSoon();\n            }\n        }));\n        this._localToDispose.add(this._editor.onDidLayoutChange(() => {\n            this._resolveCodeLensesInViewportSoon();\n        }));\n        this._localToDispose.add(toDisposable(() => {\n            if (this._editor.getModel()) {\n                const scrollState = StableEditorScrollState.capture(this._editor);\n                this._editor.changeDecorations(decorationsAccessor => {\n                    this._editor.changeViewZones(viewZonesAccessor => {\n                        this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\n                    });\n                });\n                scrollState.restore(this._editor);\n            }\n            else {\n                // No accessors available\n                this._disposeAllLenses(undefined, undefined);\n            }\n        }));\n        this._localToDispose.add(this._editor.onMouseDown(e => {\n            if (e.target.type !== 9 /* MouseTargetType.CONTENT_WIDGET */) {\n                return;\n            }\n            let target = e.target.element;\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\n                target = target.parentElement;\n            }\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\n                for (const lens of this._lenses) {\n                    const command = lens.getCommand(target);\n                    if (command) {\n                        this._commandService.executeCommand(command.id, ...(command.arguments || [])).catch(err => this._notificationService.error(err));\n                        break;\n                    }\n                }\n            }\n        }));\n        scheduler.schedule();\n    }\n    _disposeAllLenses(decChangeAccessor, viewZoneChangeAccessor) {\n        const helper = new CodeLensHelper();\n        for (const lens of this._lenses) {\n            lens.dispose(helper, viewZoneChangeAccessor);\n        }\n        if (decChangeAccessor) {\n            helper.commit(decChangeAccessor);\n        }\n        this._lenses.length = 0;\n    }\n    _renderCodeLensSymbols(symbols) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const maxLineNumber = this._editor.getModel().getLineCount();\n        const groups = [];\n        let lastGroup;\n        for (const symbol of symbols.lenses) {\n            const line = symbol.symbol.range.startLineNumber;\n            if (line < 1 || line > maxLineNumber) {\n                // invalid code lens\n                continue;\n            }\n            else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n                // on same line as previous\n                lastGroup.push(symbol);\n            }\n            else {\n                // on later line as previous\n                lastGroup = [symbol];\n                groups.push(lastGroup);\n            }\n        }\n        if (!groups.length && !this._lenses.length) {\n            // Nothing to change\n            return;\n        }\n        const scrollState = StableEditorScrollState.capture(this._editor);\n        const layoutInfo = this._getLayoutInfo();\n        this._editor.changeDecorations(decorationsAccessor => {\n            this._editor.changeViewZones(viewZoneAccessor => {\n                const helper = new CodeLensHelper();\n                let codeLensIndex = 0;\n                let groupsIndex = 0;\n                while (groupsIndex < groups.length && codeLensIndex < this._lenses.length) {\n                    const symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n                    const codeLensLineNumber = this._lenses[codeLensIndex].getLineNumber();\n                    if (codeLensLineNumber < symbolsLineNumber) {\n                        this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                        this._lenses.splice(codeLensIndex, 1);\n                    }\n                    else if (codeLensLineNumber === symbolsLineNumber) {\n                        this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n                        groupsIndex++;\n                        codeLensIndex++;\n                    }\n                    else {\n                        this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                        codeLensIndex++;\n                        groupsIndex++;\n                    }\n                }\n                // Delete extra code lenses\n                while (codeLensIndex < this._lenses.length) {\n                    this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                    this._lenses.splice(codeLensIndex, 1);\n                }\n                // Create extra symbols\n                while (groupsIndex < groups.length) {\n                    this._lenses.push(new CodeLensWidget(groups[groupsIndex], this._editor, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                    groupsIndex++;\n                }\n                helper.commit(decorationsAccessor);\n            });\n        });\n        scrollState.restore(this._editor);\n    }\n    _resolveCodeLensesInViewportSoon() {\n        const model = this._editor.getModel();\n        if (model) {\n            this._resolveCodeLensesScheduler.schedule();\n        }\n    }\n    _resolveCodeLensesInViewport() {\n        var _a;\n        (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        const toResolve = [];\n        const lenses = [];\n        this._lenses.forEach((lens) => {\n            const request = lens.computeIfNecessary(model);\n            if (request) {\n                toResolve.push(request);\n                lenses.push(lens);\n            }\n        });\n        if (toResolve.length === 0) {\n            return;\n        }\n        const t1 = Date.now();\n        const resolvePromise = createCancelablePromise(token => {\n            const promises = toResolve.map((request, i) => {\n                const resolvedSymbols = new Array(request.length);\n                const promises = request.map((request, i) => {\n                    if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n                        return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(symbol => {\n                            resolvedSymbols[i] = symbol;\n                        }, onUnexpectedExternalError);\n                    }\n                    else {\n                        resolvedSymbols[i] = request.symbol;\n                        return Promise.resolve(undefined);\n                    }\n                });\n                return Promise.all(promises).then(() => {\n                    if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\n                        lenses[i].updateCommands(resolvedSymbols);\n                    }\n                });\n            });\n            return Promise.all(promises);\n        });\n        this._resolveCodeLensesPromise = resolvePromise;\n        this._resolveCodeLensesPromise.then(() => {\n            // update moving average\n            const newDelay = this._resolveCodeLensesDebounce.update(model, Date.now() - t1);\n            this._resolveCodeLensesScheduler.delay = newDelay;\n            if (this._currentCodeLensModel) { // update the cached state with new resolved items\n                this._codeLensCache.put(model, this._currentCodeLensModel);\n            }\n            this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        }, err => {\n            onUnexpectedError(err); // can also be cancellation!\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        });\n    }\n    getModel() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._getCodeLensModelPromise;\n            yield this._resolveCodeLensesPromise;\n            return !((_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.isDisposed)\n                ? this._currentCodeLensModel\n                : undefined;\n        });\n    }\n};\nCodeLensContribution.ID = 'css.editor.codeLens';\nCodeLensContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, ICommandService),\n    __param(4, INotificationService),\n    __param(5, ICodeLensCache)\n], CodeLensContribution);\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(class ShowLensesInCurrentLine extends EditorAction {\n    constructor() {\n        super({\n            id: 'codelens.showLensesInCurrentLine',\n            precondition: EditorContextKeys.hasCodeLensProvider,\n            label: localize('showLensOnLine', \"Show CodeLens Commands For Current Line\"),\n            alias: 'Show CodeLens Commands For Current Line',\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const quickInputService = accessor.get(IQuickInputService);\n            const commandService = accessor.get(ICommandService);\n            const notificationService = accessor.get(INotificationService);\n            const lineNumber = editor.getSelection().positionLineNumber;\n            const codelensController = editor.getContribution(CodeLensContribution.ID);\n            if (!codelensController) {\n                return;\n            }\n            const model = yield codelensController.getModel();\n            if (!model) {\n                // nothing\n                return;\n            }\n            const items = [];\n            for (const lens of model.lenses) {\n                if (lens.symbol.command && lens.symbol.range.startLineNumber === lineNumber) {\n                    items.push({\n                        label: lens.symbol.command.title,\n                        command: lens.symbol.command\n                    });\n                }\n            }\n            if (items.length === 0) {\n                // We dont want an empty picker\n                return;\n            }\n            const item = yield quickInputService.pick(items, {\n                canPickMany: false,\n                placeHolder: localize('placeHolder', \"Select a command\")\n            });\n            if (!item) {\n                // Nothing picked\n                return;\n            }\n            let command = item.command;\n            if (model.isDisposed) {\n                // try to find the same command again in-case the model has been re-created in the meantime\n                // this is a best attempt approach which shouldn't be needed because eager model re-creates\n                // shouldn't happen due to focus in/out anymore\n                const newModel = yield codelensController.getModel();\n                const newLens = newModel === null || newModel === void 0 ? void 0 : newModel.lenses.find(lens => { var _a; return lens.symbol.range.startLineNumber === lineNumber && ((_a = lens.symbol.command) === null || _a === void 0 ? void 0 : _a.title) === command.title; });\n                if (!newLens || !newLens.symbol.command) {\n                    return;\n                }\n                command = newLens.symbol.command;\n            }\n            try {\n                yield commandService.executeCommand(command.id, ...(command.arguments || []));\n            }\n            catch (err) {\n                notificationService.error(err);\n            }\n        });\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { DefaultDocumentColorProvider } from './defaultDocumentColorProvider.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport function getColors(colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled = true) {\n    return __awaiter(this, void 0, void 0, function* () {\n        return _findColorData(new ColorDataCollector(), colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled);\n    });\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nclass ColorDataCollector {\n    constructor() { }\n    compute(provider, model, token, colors) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const documentColors = yield provider.provideDocumentColors(model, token);\n            if (Array.isArray(documentColors)) {\n                for (const colorInfo of documentColors) {\n                    colors.push({ colorInfo, provider });\n                }\n            }\n            return Array.isArray(documentColors);\n        });\n    }\n}\nclass ExtColorDataCollector {\n    constructor() { }\n    compute(provider, model, token, colors) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const documentColors = yield provider.provideDocumentColors(model, token);\n            if (Array.isArray(documentColors)) {\n                for (const colorInfo of documentColors) {\n                    colors.push({ range: colorInfo.range, color: [colorInfo.color.red, colorInfo.color.green, colorInfo.color.blue, colorInfo.color.alpha] });\n                }\n            }\n            return Array.isArray(documentColors);\n        });\n    }\n}\nclass ColorPresentationsCollector {\n    constructor(colorInfo) {\n        this.colorInfo = colorInfo;\n    }\n    compute(provider, model, _token, colors) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const documentColors = yield provider.provideColorPresentations(model, this.colorInfo, CancellationToken.None);\n            if (Array.isArray(documentColors)) {\n                colors.push(...documentColors);\n            }\n            return Array.isArray(documentColors);\n        });\n    }\n}\nfunction _findColorData(collector, colorProviderRegistry, model, token, isDefaultColorDecoratorsEnabled) {\n    return __awaiter(this, void 0, void 0, function* () {\n        let validDocumentColorProviderFound = false;\n        let defaultProvider;\n        const colorData = [];\n        const documentColorProviders = colorProviderRegistry.ordered(model);\n        for (let i = documentColorProviders.length - 1; i >= 0; i--) {\n            const provider = documentColorProviders[i];\n            if (provider instanceof DefaultDocumentColorProvider) {\n                defaultProvider = provider;\n            }\n            else {\n                try {\n                    if (yield collector.compute(provider, model, token, colorData)) {\n                        validDocumentColorProviderFound = true;\n                    }\n                }\n                catch (e) {\n                    onUnexpectedExternalError(e);\n                }\n            }\n        }\n        if (validDocumentColorProviderFound) {\n            return colorData;\n        }\n        if (defaultProvider && isDefaultColorDecoratorsEnabled) {\n            yield collector.compute(defaultProvider, model, token, colorData);\n            return colorData;\n        }\n        return [];\n    });\n}\nfunction _setupColorCommand(accessor, resource) {\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(resource);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const isDefaultColorDecoratorsEnabled = accessor.get(IConfigurationService).getValue('editor.defaultColorDecorators', { resource });\n    return { model, colorProviderRegistry, isDefaultColorDecoratorsEnabled };\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\n    const [resource] = args;\n    if (!(resource instanceof URI)) {\n        throw illegalArgument();\n    }\n    const { model, colorProviderRegistry, isDefaultColorDecoratorsEnabled } = _setupColorCommand(accessor, resource);\n    return _findColorData(new ExtColorDataCollector(), colorProviderRegistry, model, CancellationToken.None, isDefaultColorDecoratorsEnabled);\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\n    const [color, context] = args;\n    const { uri, range } = context;\n    if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n        throw illegalArgument();\n    }\n    const { model, colorProviderRegistry, isDefaultColorDecoratorsEnabled } = _setupColorCommand(accessor, uri);\n    const [red, green, blue, alpha] = color;\n    return _findColorData(new ColorPresentationsCollector({ range: range, color: { red, green, blue, alpha } }), colorProviderRegistry, model, CancellationToken.None, isDefaultColorDecoratorsEnabled);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ModesHoverController } from '../../hover/browser/hover.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nexport class ColorContribution extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(_editor.onMouseDown((e) => this.onMouseDown(e)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    onMouseDown(mouseEvent) {\n        const colorDecoratorsActivatedOn = this._editor.getOption(146 /* EditorOption.colorDecoratorsActivatedOn */);\n        if (colorDecoratorsActivatedOn !== 'click' && colorDecoratorsActivatedOn !== 'clickAndHover') {\n            return;\n        }\n        const target = mouseEvent.target;\n        if (target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return;\n        }\n        if (!target.detail.injectedText) {\n            return;\n        }\n        if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n            return;\n        }\n        if (!target.range) {\n            return;\n        }\n        const hoverController = this._editor.getContribution(ModesHoverController.ID);\n        if (!hoverController) {\n            return;\n        }\n        if (!hoverController.isColorPickerVisible) {\n            const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n            hoverController.showContentHover(range, 1 /* HoverStartMode.Immediate */, 0 /* HoverStartSource.Mouse */, false, true);\n        }\n    }\n}\nColorContribution.ID = 'editor.contrib.colorContribution'; // ms\nregisterEditorContribution(ColorContribution.ID, ColorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nHoverParticipantRegistry.register(ColorHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar ColorDetector_1;\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { RGBA } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport const ColorDecorationInjectedTextMarker = Object.create({});\nlet ColorDetector = ColorDetector_1 = class ColorDetector extends Disposable {\n    constructor(_editor, _configurationService, _languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this._editor = _editor;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._localToDispose = this._register(new DisposableStore());\n        this._decorationsIds = [];\n        this._colorDatas = new Map();\n        this._colorDecoratorIds = this._editor.createDecorationsCollection();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._decoratorLimitReporter = new DecoratorLimitReporter();\n        this._colorDecorationClassRefs = this._register(new DisposableStore());\n        this._debounceInformation = languageFeatureDebounceService.for(_languageFeaturesService.colorProvider, 'Document Colors', { min: ColorDetector_1.RECOMPUTE_TIME });\n        this._register(_editor.onDidChangeModel(() => {\n            this._isColorDecoratorsEnabled = this.isEnabled();\n            this.updateColors();\n        }));\n        this._register(_editor.onDidChangeModelLanguage(() => this.updateColors()));\n        this._register(_languageFeaturesService.colorProvider.onDidChange(() => this.updateColors()));\n        this._register(_editor.onDidChangeConfiguration((e) => {\n            const prevIsEnabled = this._isColorDecoratorsEnabled;\n            this._isColorDecoratorsEnabled = this.isEnabled();\n            this._isDefaultColorDecoratorsEnabled = this._editor.getOption(145 /* EditorOption.defaultColorDecorators */);\n            const updatedColorDecoratorsSetting = prevIsEnabled !== this._isColorDecoratorsEnabled || e.hasChanged(21 /* EditorOption.colorDecoratorsLimit */);\n            const updatedDefaultColorDecoratorsSetting = e.hasChanged(145 /* EditorOption.defaultColorDecorators */);\n            if (updatedColorDecoratorsSetting || updatedDefaultColorDecoratorsSetting) {\n                if (this._isColorDecoratorsEnabled) {\n                    this.updateColors();\n                }\n                else {\n                    this.removeAllDecorations();\n                }\n            }\n        }));\n        this._timeoutTimer = null;\n        this._computePromise = null;\n        this._isColorDecoratorsEnabled = this.isEnabled();\n        this._isDefaultColorDecoratorsEnabled = this._editor.getOption(145 /* EditorOption.defaultColorDecorators */);\n        this.updateColors();\n    }\n    isEnabled() {\n        const model = this._editor.getModel();\n        if (!model) {\n            return false;\n        }\n        const languageId = model.getLanguageId();\n        // handle deprecated settings. [languageId].colorDecorators.enable\n        const deprecatedConfig = this._configurationService.getValue(languageId);\n        if (deprecatedConfig && typeof deprecatedConfig === 'object') {\n            const colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n                return colorDecorators['enable'];\n            }\n        }\n        return this._editor.getOption(20 /* EditorOption.colorDecorators */);\n    }\n    static get(editor) {\n        return editor.getContribution(this.ID);\n    }\n    dispose() {\n        this.stop();\n        this.removeAllDecorations();\n        super.dispose();\n    }\n    updateColors() {\n        this.stop();\n        if (!this._isColorDecoratorsEnabled) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.colorProvider.has(model)) {\n            return;\n        }\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            if (!this._timeoutTimer) {\n                this._timeoutTimer = new TimeoutTimer();\n                this._timeoutTimer.cancelAndSet(() => {\n                    this._timeoutTimer = null;\n                    this.beginCompute();\n                }, this._debounceInformation.get(model));\n            }\n        }));\n        this.beginCompute();\n    }\n    beginCompute() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._computePromise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const model = this._editor.getModel();\n                if (!model) {\n                    return [];\n                }\n                const sw = new StopWatch(false);\n                const colors = yield getColors(this._languageFeaturesService.colorProvider, model, token, this._isDefaultColorDecoratorsEnabled);\n                this._debounceInformation.update(model, sw.elapsed());\n                return colors;\n            }));\n            try {\n                const colors = yield this._computePromise;\n                this.updateDecorations(colors);\n                this.updateColorDecorators(colors);\n                this._computePromise = null;\n            }\n            catch (e) {\n                onUnexpectedError(e);\n            }\n        });\n    }\n    stop() {\n        if (this._timeoutTimer) {\n            this._timeoutTimer.cancel();\n            this._timeoutTimer = null;\n        }\n        if (this._computePromise) {\n            this._computePromise.cancel();\n            this._computePromise = null;\n        }\n        this._localToDispose.clear();\n    }\n    updateDecorations(colorDatas) {\n        const decorations = colorDatas.map(c => ({\n            range: {\n                startLineNumber: c.colorInfo.range.startLineNumber,\n                startColumn: c.colorInfo.range.startColumn,\n                endLineNumber: c.colorInfo.range.endLineNumber,\n                endColumn: c.colorInfo.range.endColumn\n            },\n            options: ModelDecorationOptions.EMPTY\n        }));\n        this._editor.changeDecorations((changeAccessor) => {\n            this._decorationsIds = changeAccessor.deltaDecorations(this._decorationsIds, decorations);\n            this._colorDatas = new Map();\n            this._decorationsIds.forEach((id, i) => this._colorDatas.set(id, colorDatas[i]));\n        });\n    }\n    updateColorDecorators(colorData) {\n        this._colorDecorationClassRefs.clear();\n        const decorations = [];\n        const limit = this._editor.getOption(21 /* EditorOption.colorDecoratorsLimit */);\n        for (let i = 0; i < colorData.length && decorations.length < limit; i++) {\n            const { red, green, blue, alpha } = colorData[i].colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`;\n            const ref = this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({\n                backgroundColor: color\n            }));\n            decorations.push({\n                range: {\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n                    startColumn: colorData[i].colorInfo.range.startColumn,\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n                    endColumn: colorData[i].colorInfo.range.endColumn\n                },\n                options: {\n                    description: 'colorDetector',\n                    before: {\n                        content: noBreakWhitespace,\n                        inlineClassName: `${ref.className} colorpicker-color-decoration`,\n                        inlineClassNameAffectsLetterSpacing: true,\n                        attachedData: ColorDecorationInjectedTextMarker\n                    }\n                }\n            });\n        }\n        const limited = limit < colorData.length ? limit : false;\n        this._decoratorLimitReporter.update(colorData.length, limited);\n        this._colorDecoratorIds.set(decorations);\n    }\n    removeAllDecorations() {\n        this._editor.removeDecorations(this._decorationsIds);\n        this._decorationsIds = [];\n        this._colorDecoratorIds.clear();\n        this._colorDecorationClassRefs.clear();\n    }\n    getColorData(position) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return null;\n        }\n        const decorations = model\n            .getDecorationsInRange(Range.fromPositions(position, position))\n            .filter(d => this._colorDatas.has(d.id));\n        if (decorations.length === 0) {\n            return null;\n        }\n        return this._colorDatas.get(decorations[0].id);\n    }\n    isColorDecoration(decoration) {\n        return this._colorDecoratorIds.has(decoration);\n    }\n};\nColorDetector.ID = 'editor.contrib.colorDetector';\nColorDetector.RECOMPUTE_TIME = 1000; // ms\nColorDetector = ColorDetector_1 = __decorate([\n    __param(1, IConfigurationService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageFeatureDebounceService)\n], ColorDetector);\nexport { ColorDetector };\nexport class DecoratorLimitReporter {\n    constructor() {\n        this._onDidChange = new Emitter();\n        this._computed = 0;\n        this._limited = false;\n    }\n    update(computed, limited) {\n        if (computed !== this._computed || limited !== this._limited) {\n            this._computed = computed;\n            this._limited = limited;\n            this._onDidChange.fire();\n        }\n    }\n}\nregisterEditorContribution(ColorDetector.ID, ColorDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nexport class ColorPickerModel {\n    get color() {\n        return this._color;\n    }\n    set color(color) {\n        if (this._color.equals(color)) {\n            return;\n        }\n        this._color = color;\n        this._onDidChangeColor.fire(color);\n    }\n    get presentation() { return this.colorPresentations[this.presentationIndex]; }\n    get colorPresentations() {\n        return this._colorPresentations;\n    }\n    set colorPresentations(colorPresentations) {\n        this._colorPresentations = colorPresentations;\n        if (this.presentationIndex > colorPresentations.length - 1) {\n            this.presentationIndex = 0;\n        }\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    constructor(color, availableColorPresentations, presentationIndex) {\n        this.presentationIndex = presentationIndex;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._onDidChangeColor = new Emitter();\n        this.onDidChangeColor = this._onDidChangeColor.event;\n        this._onDidChangePresentation = new Emitter();\n        this.onDidChangePresentation = this._onDidChangePresentation.event;\n        this.originalColor = color;\n        this._color = color;\n        this._colorPresentations = availableColorPresentations;\n    }\n    selectNextColorPresentation() {\n        this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\n        this.flushColor();\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    guessColorPresentation(color, originalText) {\n        let presentationIndex = -1;\n        for (let i = 0; i < this.colorPresentations.length; i++) {\n            if (originalText.toLowerCase() === this.colorPresentations[i].label) {\n                presentationIndex = i;\n                break;\n            }\n        }\n        if (presentationIndex === -1) {\n            // check which color presentation text has same prefix as original text's prefix\n            const originalTextPrefix = originalText.split('(')[0].toLowerCase();\n            for (let i = 0; i < this.colorPresentations.length; i++) {\n                if (this.colorPresentations[i].label.toLowerCase().startsWith(originalTextPrefix)) {\n                    presentationIndex = i;\n                    break;\n                }\n            }\n        }\n        if (presentationIndex !== -1 && presentationIndex !== this.presentationIndex) {\n            this.presentationIndex = presentationIndex;\n            this._onDidChangePresentation.fire(this.presentation);\n        }\n    }\n    flushColor() {\n        this._onColorFlushed.fire(this._color);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PixelRatio } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../../../base/browser/globalPointerMoveMonitor.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Color, HSVA, RGBA } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport './colorPicker.css';\nimport { localize } from '../../../../nls.js';\nimport { editorHoverBackground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nconst $ = dom.$;\nexport class ColorPickerHeader extends Disposable {\n    constructor(container, model, themeService, showingStandaloneColorPicker = false) {\n        super();\n        this.model = model;\n        this.showingStandaloneColorPicker = showingStandaloneColorPicker;\n        this._closeButton = null;\n        this._domNode = $('.colorpicker-header');\n        dom.append(container, this._domNode);\n        this._pickedColorNode = dom.append(this._domNode, $('.picked-color'));\n        dom.append(this._pickedColorNode, $('span.codicon.codicon-color-mode'));\n        this._pickedColorPresentation = dom.append(this._pickedColorNode, document.createElement('span'));\n        this._pickedColorPresentation.classList.add('picked-color-presentation');\n        const tooltip = localize('clickToToggleColorOptions', \"Click to toggle color options (rgb/hsl/hex)\");\n        this._pickedColorNode.setAttribute('title', tooltip);\n        this._originalColorNode = dom.append(this._domNode, $('.original-color'));\n        this._originalColorNode.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor) || '';\n        this.backgroundColor = themeService.getColorTheme().getColor(editorHoverBackground) || Color.white;\n        this._register(themeService.onDidColorThemeChange(theme => {\n            this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n        }));\n        this._register(dom.addDisposableListener(this._pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\n        this._register(dom.addDisposableListener(this._originalColorNode, dom.EventType.CLICK, () => {\n            this.model.color = this.model.originalColor;\n            this.model.flushColor();\n        }));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\n        this._pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\n        this._pickedColorNode.classList.toggle('light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\n        this.onDidChangeColor(this.model.color);\n        // When the color picker widget is a standalone color picker widget, then add a close button\n        if (this.showingStandaloneColorPicker) {\n            this._domNode.classList.add('standalone-colorpicker');\n            this._closeButton = this._register(new CloseButton(this._domNode));\n        }\n    }\n    get closeButton() {\n        return this._closeButton;\n    }\n    get pickedColorNode() {\n        return this._pickedColorNode;\n    }\n    get originalColorNode() {\n        return this._originalColorNode;\n    }\n    onDidChangeColor(color) {\n        this._pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\n        this._pickedColorNode.classList.toggle('light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n        this.onDidChangePresentation();\n    }\n    onDidChangePresentation() {\n        this._pickedColorPresentation.textContent = this.model.presentation ? this.model.presentation.label : '';\n    }\n}\nclass CloseButton extends Disposable {\n    constructor(container) {\n        super();\n        this._onClicked = this._register(new Emitter());\n        this.onClicked = this._onClicked.event;\n        this._button = document.createElement('div');\n        this._button.classList.add('close-button');\n        dom.append(container, this._button);\n        const innerDiv = document.createElement('div');\n        innerDiv.classList.add('close-button-inner-div');\n        dom.append(this._button, innerDiv);\n        const closeButton = dom.append(innerDiv, $('.button' + ThemeIcon.asCSSSelector(registerIcon('color-picker-close', Codicon.close, localize('closeIcon', 'Icon to close the color picker')))));\n        closeButton.classList.add('close-icon');\n        this._button.onclick = () => {\n            this._onClicked.fire();\n        };\n    }\n}\nexport class ColorPickerBody extends Disposable {\n    constructor(container, model, pixelRatio, isStandaloneColorPicker = false) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._insertButton = null;\n        this._domNode = $('.colorpicker-body');\n        dom.append(container, this._domNode);\n        this._saturationBox = new SaturationBox(this._domNode, this.model, this.pixelRatio);\n        this._register(this._saturationBox);\n        this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange, this));\n        this._register(this._saturationBox.onColorFlushed(this.flushColor, this));\n        this._opacityStrip = new OpacityStrip(this._domNode, this.model, isStandaloneColorPicker);\n        this._register(this._opacityStrip);\n        this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange, this));\n        this._register(this._opacityStrip.onColorFlushed(this.flushColor, this));\n        this._hueStrip = new HueStrip(this._domNode, this.model, isStandaloneColorPicker);\n        this._register(this._hueStrip);\n        this._register(this._hueStrip.onDidChange(this.onDidHueChange, this));\n        this._register(this._hueStrip.onColorFlushed(this.flushColor, this));\n        if (isStandaloneColorPicker) {\n            this._insertButton = this._register(new InsertButton(this._domNode));\n            this._domNode.classList.add('standalone-colorpicker');\n        }\n    }\n    flushColor() {\n        this.model.flushColor();\n    }\n    onDidSaturationValueChange({ s, v }) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n    }\n    onDidOpacityChange(a) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n    }\n    onDidHueChange(value) {\n        const hsva = this.model.color.hsva;\n        const h = (1 - value) * 360;\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    get saturationBox() {\n        return this._saturationBox;\n    }\n    get enterButton() {\n        return this._insertButton;\n    }\n    layout() {\n        this._saturationBox.layout();\n        this._opacityStrip.layout();\n        this._hueStrip.layout();\n    }\n}\nclass SaturationBox extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._domNode = $('.saturation-wrap');\n        dom.append(container, this._domNode);\n        // Create canvas, draw selected color\n        this._canvas = document.createElement('canvas');\n        this._canvas.className = 'saturation-box';\n        dom.append(this._domNode, this._canvas);\n        // Add selection circle\n        this.selection = $('.saturation-selection');\n        dom.append(this._domNode, this.selection);\n        this.layout();\n        this._register(dom.addDisposableListener(this._domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\n        this.monitor = null;\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        this.monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this._domNode);\n        if (e.target !== this.selection) {\n            this.onDidChangePosition(e.offsetX, e.offsetY);\n        }\n        this.monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangePosition(event.pageX - origin.left, event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(e.target.ownerDocument, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            if (this.monitor) {\n                this.monitor.stopMonitoring(true);\n                this.monitor = null;\n            }\n        }, true);\n    }\n    onDidChangePosition(left, top) {\n        const s = Math.max(0, Math.min(1, left / this.width));\n        const v = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.paintSelection(s, v);\n        this._onDidChange.fire({ s, v });\n    }\n    layout() {\n        this.width = this._domNode.offsetWidth;\n        this.height = this._domNode.offsetHeight;\n        this._canvas.width = this.width * this.pixelRatio;\n        this._canvas.height = this.height * this.pixelRatio;\n        this.paint();\n        const hsva = this.model.color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n    paint() {\n        const hsva = this.model.color.hsva;\n        const saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n        const ctx = this._canvas.getContext('2d');\n        const whiteGradient = ctx.createLinearGradient(0, 0, this._canvas.width, 0);\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        const blackGradient = ctx.createLinearGradient(0, 0, 0, this._canvas.height);\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n        ctx.rect(0, 0, this._canvas.width, this._canvas.height);\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n        ctx.fill();\n        ctx.fillStyle = whiteGradient;\n        ctx.fill();\n        ctx.fillStyle = blackGradient;\n        ctx.fill();\n    }\n    paintSelection(s, v) {\n        this.selection.style.left = `${s * this.width}px`;\n        this.selection.style.top = `${this.height - v * this.height}px`;\n    }\n    onDidChangeColor(color) {\n        if (this.monitor && this.monitor.isMonitoring()) {\n            return;\n        }\n        this.paint();\n        const hsva = color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n}\nclass Strip extends Disposable {\n    constructor(container, model, showingStandaloneColorPicker = false) {\n        super();\n        this.model = model;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        if (showingStandaloneColorPicker) {\n            this.domNode = dom.append(container, $('.standalone-strip'));\n            this.overlay = dom.append(this.domNode, $('.standalone-overlay'));\n        }\n        else {\n            this.domNode = dom.append(container, $('.strip'));\n            this.overlay = dom.append(this.domNode, $('.overlay'));\n        }\n        this.slider = dom.append(this.domNode, $('.slider'));\n        this.slider.style.top = `0px`;\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this.layout();\n    }\n    layout() {\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n        const value = this.getValue(this.model.color);\n        this.updateSliderPosition(value);\n    }\n    onDidChangeColor(color) {\n        const value = this.getValue(color);\n        this.updateSliderPosition(value);\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        this.domNode.classList.add('grabbing');\n        if (e.target !== this.slider) {\n            this.onDidChangeTop(e.offsetY);\n        }\n        monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangeTop(event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(e.target.ownerDocument, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            monitor.stopMonitoring(true);\n            this.domNode.classList.remove('grabbing');\n        }, true);\n    }\n    onDidChangeTop(top) {\n        const value = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.updateSliderPosition(value);\n        this._onDidChange.fire(value);\n    }\n    updateSliderPosition(value) {\n        this.slider.style.top = `${(1 - value) * this.height}px`;\n    }\n}\nclass OpacityStrip extends Strip {\n    constructor(container, model, showingStandaloneColorPicker = false) {\n        super(container, model, showingStandaloneColorPicker);\n        this.domNode.classList.add('opacity-strip');\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        super.onDidChangeColor(color);\n        const { r, g, b } = color.rgba;\n        const opaque = new Color(new RGBA(r, g, b, 1));\n        const transparent = new Color(new RGBA(r, g, b, 0));\n        this.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\n    }\n    getValue(color) {\n        return color.hsva.a;\n    }\n}\nclass HueStrip extends Strip {\n    constructor(container, model, showingStandaloneColorPicker = false) {\n        super(container, model, showingStandaloneColorPicker);\n        this.domNode.classList.add('hue-strip');\n    }\n    getValue(color) {\n        return 1 - (color.hsva.h / 360);\n    }\n}\nexport class InsertButton extends Disposable {\n    constructor(container) {\n        super();\n        this._onClicked = this._register(new Emitter());\n        this.onClicked = this._onClicked.event;\n        this._button = dom.append(container, document.createElement('button'));\n        this._button.classList.add('insert-button');\n        this._button.textContent = 'Insert';\n        this._button.onclick = e => {\n            this._onClicked.fire();\n        };\n    }\n    get button() {\n        return this._button;\n    }\n}\nexport class ColorPickerWidget extends Widget {\n    constructor(container, model, pixelRatio, themeService, standaloneColorPicker = false) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._register(PixelRatio.onDidChange(() => this.layout()));\n        const element = $('.colorpicker-widget');\n        container.appendChild(element);\n        this.header = this._register(new ColorPickerHeader(element, this.model, themeService, standaloneColorPicker));\n        this.body = this._register(new ColorPickerBody(element, this.model, this.pixelRatio, standaloneColorPicker));\n    }\n    layout() {\n        this.body.layout();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations, getColors } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { Dimension } from '../../../../base/browser/dom.js';\nexport class ColorHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n        /**\n         * Force the hover to always be rendered at this specific range,\n         * even in the case of multiple hover parts.\n         */\n        this.forceShowAtRange = true;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this.hoverOrdinal = 2;\n    }\n    computeSync(_anchor, _lineDecorations) {\n        return [];\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n    }\n    _computeAsync(_anchor, lineDecorations, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return [];\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return [];\n            }\n            for (const d of lineDecorations) {\n                if (!colorDetector.isColorDecoration(d)) {\n                    continue;\n                }\n                const colorData = colorDetector.getColorData(d.range.getStartPosition());\n                if (colorData) {\n                    const colorHover = yield _createColorHover(this, this._editor.getModel(), colorData.colorInfo, colorData.provider);\n                    return [colorHover];\n                }\n            }\n            return [];\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n    }\n};\nColorHoverParticipant = __decorate([\n    __param(1, IThemeService)\n], ColorHoverParticipant);\nexport { ColorHoverParticipant };\nexport class StandaloneColorPickerHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n    }\n}\nlet StandaloneColorPickerParticipant = class StandaloneColorPickerParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this._color = null;\n    }\n    createColorHover(defaultColorInfo, defaultColorProvider, colorProviderRegistry) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return null;\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return null;\n            }\n            const colors = yield getColors(colorProviderRegistry, this._editor.getModel(), CancellationToken.None);\n            let foundColorInfo = null;\n            let foundColorProvider = null;\n            for (const colorData of colors) {\n                const colorInfo = colorData.colorInfo;\n                if (Range.containsRange(colorInfo.range, defaultColorInfo.range)) {\n                    foundColorInfo = colorInfo;\n                    foundColorProvider = colorData.provider;\n                }\n            }\n            const colorInfo = foundColorInfo !== null && foundColorInfo !== void 0 ? foundColorInfo : defaultColorInfo;\n            const colorProvider = foundColorProvider !== null && foundColorProvider !== void 0 ? foundColorProvider : defaultColorProvider;\n            const foundInEditor = !!foundColorInfo;\n            return { colorHover: yield _createColorHover(this, this._editor.getModel(), colorInfo, colorProvider), foundInEditor: foundInEditor };\n        });\n    }\n    updateEditorModel(colorHoverData) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const colorPickerModel = colorHoverData.model;\n            let range = new Range(colorHoverData.range.startLineNumber, colorHoverData.range.startColumn, colorHoverData.range.endLineNumber, colorHoverData.range.endColumn);\n            if (this._color) {\n                yield _updateColorPresentations(this._editor.getModel(), colorPickerModel, this._color, range, colorHoverData);\n                range = _updateEditorModel(this._editor, range, colorPickerModel);\n            }\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderHoverParts(this, this._editor, this._themeService, hoverParts, context);\n    }\n    set color(color) {\n        this._color = color;\n    }\n    get color() {\n        return this._color;\n    }\n};\nStandaloneColorPickerParticipant = __decorate([\n    __param(1, IThemeService)\n], StandaloneColorPickerParticipant);\nexport { StandaloneColorPickerParticipant };\nfunction _createColorHover(participant, editorModel, colorInfo, provider) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const originalText = editorModel.getValueInRange(colorInfo.range);\n        const { red, green, blue, alpha } = colorInfo.color;\n        const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n        const color = new Color(rgba);\n        const colorPresentations = yield getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n        const model = new ColorPickerModel(color, [], 0);\n        model.colorPresentations = colorPresentations || [];\n        model.guessColorPresentation(color, originalText);\n        if (participant instanceof ColorHoverParticipant) {\n            return new ColorHover(participant, Range.lift(colorInfo.range), model, provider);\n        }\n        else {\n            return new StandaloneColorPickerHover(participant, Range.lift(colorInfo.range), model, provider);\n        }\n    });\n}\nfunction renderHoverParts(participant, editor, themeService, hoverParts, context) {\n    if (hoverParts.length === 0 || !editor.hasModel()) {\n        return Disposable.None;\n    }\n    if (context.setMinimumDimensions) {\n        const minimumHeight = editor.getOption(66 /* EditorOption.lineHeight */) + 8;\n        context.setMinimumDimensions(new Dimension(302, minimumHeight));\n    }\n    const disposables = new DisposableStore();\n    const colorHover = hoverParts[0];\n    const editorModel = editor.getModel();\n    const model = colorHover.model;\n    const widget = disposables.add(new ColorPickerWidget(context.fragment, model, editor.getOption(141 /* EditorOption.pixelRatio */), themeService, participant instanceof StandaloneColorPickerParticipant));\n    context.setColorPicker(widget);\n    let editorUpdatedByColorPicker = false;\n    let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n    if (participant instanceof StandaloneColorPickerParticipant) {\n        const color = hoverParts[0].model.color;\n        participant.color = color;\n        _updateColorPresentations(editorModel, model, color, range, colorHover);\n        disposables.add(model.onColorFlushed((color) => {\n            participant.color = color;\n        }));\n    }\n    else {\n        disposables.add(model.onColorFlushed((color) => __awaiter(this, void 0, void 0, function* () {\n            yield _updateColorPresentations(editorModel, model, color, range, colorHover);\n            editorUpdatedByColorPicker = true;\n            range = _updateEditorModel(editor, range, model, context);\n        })));\n    }\n    disposables.add(model.onDidChangeColor((color) => {\n        _updateColorPresentations(editorModel, model, color, range, colorHover);\n    }));\n    disposables.add(editor.onDidChangeModelContent((e) => {\n        if (editorUpdatedByColorPicker) {\n            editorUpdatedByColorPicker = false;\n        }\n        else {\n            context.hide();\n            editor.focus();\n        }\n    }));\n    return disposables;\n}\nfunction _updateEditorModel(editor, range, model, context) {\n    let textEdits;\n    let newRange;\n    if (model.presentation.textEdit) {\n        textEdits = [model.presentation.textEdit];\n        newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\n        const trackedRange = editor.getModel()._setTrackedRange(null, newRange, 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */);\n        editor.pushUndoStop();\n        editor.executeEdits('colorpicker', textEdits);\n        newRange = editor.getModel()._getTrackedRange(trackedRange) || newRange;\n    }\n    else {\n        textEdits = [{ range, text: model.presentation.label, forceMoveMarkers: false }];\n        newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\n        editor.pushUndoStop();\n        editor.executeEdits('colorpicker', textEdits);\n    }\n    if (model.presentation.additionalTextEdits) {\n        textEdits = [...model.presentation.additionalTextEdits];\n        editor.executeEdits('colorpicker', textEdits);\n        if (context) {\n            context.hide();\n        }\n    }\n    editor.pushUndoStop();\n    return newRange;\n}\nfunction _updateColorPresentations(editorModel, colorPickerModel, color, range, colorHover) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const colorPresentations = yield getColorPresentations(editorModel, {\n            range: range,\n            color: {\n                red: color.rgba.r / 255,\n                green: color.rgba.g / 255,\n                blue: color.rgba.b / 255,\n                alpha: color.rgba.a\n            }\n        }, colorHover.provider, CancellationToken.None);\n        colorPickerModel.colorPresentations = colorPresentations || [];\n    });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { EditorWorkerClient } from '../../../browser/services/editorWorkerService.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nexport class DefaultDocumentColorProvider {\n    constructor(modelService, languageConfigurationService) {\n        this._editorWorkerClient = new EditorWorkerClient(modelService, false, 'editorWorkerService', languageConfigurationService);\n    }\n    provideDocumentColors(model, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._editorWorkerClient.computeDefaultDocumentColors(model.uri);\n        });\n    }\n    provideColorPresentations(_model, colorInfo, _token) {\n        const range = colorInfo.range;\n        const colorFromInfo = colorInfo.color;\n        const alpha = colorFromInfo.alpha;\n        const color = new Color(new RGBA(Math.round(255 * colorFromInfo.red), Math.round(255 * colorFromInfo.green), Math.round(255 * colorFromInfo.blue), alpha));\n        const rgb = alpha ? Color.Format.CSS.formatRGB(color) : Color.Format.CSS.formatRGBA(color);\n        const hsl = alpha ? Color.Format.CSS.formatHSL(color) : Color.Format.CSS.formatHSLA(color);\n        const hex = alpha ? Color.Format.CSS.formatHex(color) : Color.Format.CSS.formatHexA(color);\n        const colorPresentations = [];\n        colorPresentations.push({ label: rgb, textEdit: { range: range, text: rgb } });\n        colorPresentations.push({ label: hsl, textEdit: { range: range, text: hsl } });\n        colorPresentations.push({ label: hex, textEdit: { range: range, text: hex } });\n        return colorPresentations;\n    }\n}\nlet DefaultDocumentColorProviderFeature = class DefaultDocumentColorProviderFeature extends Disposable {\n    constructor(_modelService, _languageConfigurationService, _languageFeaturesService) {\n        super();\n        this._register(_languageFeaturesService.colorProvider.register('*', new DefaultDocumentColorProvider(_modelService, _languageConfigurationService)));\n    }\n};\nDefaultDocumentColorProviderFeature = __decorate([\n    __param(0, IModelService),\n    __param(1, ILanguageConfigurationService),\n    __param(2, ILanguageFeaturesService)\n], DefaultDocumentColorProviderFeature);\nregisterEditorFeature(DefaultDocumentColorProviderFeature);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar StandaloneColorPickerController_1, StandaloneColorPickerWidget_1;\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { StandaloneColorPickerParticipant } from './colorHoverParticipant.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { EditorHoverStatusBar } from '../../hover/browser/contentHover.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { DefaultDocumentColorProvider } from './defaultDocumentColorProvider.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport './colorPicker.css';\nlet StandaloneColorPickerController = StandaloneColorPickerController_1 = class StandaloneColorPickerController extends Disposable {\n    constructor(_editor, _contextKeyService, _modelService, _keybindingService, _instantiationService, _languageFeatureService, _languageConfigurationService) {\n        super();\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._keybindingService = _keybindingService;\n        this._instantiationService = _instantiationService;\n        this._languageFeatureService = _languageFeatureService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._standaloneColorPickerWidget = null;\n        this._standaloneColorPickerVisible = EditorContextKeys.standaloneColorPickerVisible.bindTo(_contextKeyService);\n        this._standaloneColorPickerFocused = EditorContextKeys.standaloneColorPickerFocused.bindTo(_contextKeyService);\n    }\n    showOrFocus() {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._standaloneColorPickerVisible.get()) {\n            this._standaloneColorPickerWidget = new StandaloneColorPickerWidget(this._editor, this._standaloneColorPickerVisible, this._standaloneColorPickerFocused, this._instantiationService, this._modelService, this._keybindingService, this._languageFeatureService, this._languageConfigurationService);\n        }\n        else if (!this._standaloneColorPickerFocused.get()) {\n            (_a = this._standaloneColorPickerWidget) === null || _a === void 0 ? void 0 : _a.focus();\n        }\n    }\n    hide() {\n        var _a;\n        this._standaloneColorPickerFocused.set(false);\n        this._standaloneColorPickerVisible.set(false);\n        (_a = this._standaloneColorPickerWidget) === null || _a === void 0 ? void 0 : _a.hide();\n        this._editor.focus();\n    }\n    insertColor() {\n        var _a;\n        (_a = this._standaloneColorPickerWidget) === null || _a === void 0 ? void 0 : _a.updateEditor();\n        this.hide();\n    }\n    static get(editor) {\n        return editor.getContribution(StandaloneColorPickerController_1.ID);\n    }\n};\nStandaloneColorPickerController.ID = 'editor.contrib.standaloneColorPickerController';\nStandaloneColorPickerController = StandaloneColorPickerController_1 = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IModelService),\n    __param(3, IKeybindingService),\n    __param(4, IInstantiationService),\n    __param(5, ILanguageFeaturesService),\n    __param(6, ILanguageConfigurationService)\n], StandaloneColorPickerController);\nexport { StandaloneColorPickerController };\nregisterEditorContribution(StandaloneColorPickerController.ID, StandaloneColorPickerController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nconst PADDING = 8;\nconst CLOSE_BUTTON_WIDTH = 22;\nlet StandaloneColorPickerWidget = StandaloneColorPickerWidget_1 = class StandaloneColorPickerWidget extends Disposable {\n    constructor(_editor, _standaloneColorPickerVisible, _standaloneColorPickerFocused, _instantiationService, _modelService, _keybindingService, _languageFeaturesService, _languageConfigurationService) {\n        var _a;\n        super();\n        this._editor = _editor;\n        this._standaloneColorPickerVisible = _standaloneColorPickerVisible;\n        this._standaloneColorPickerFocused = _standaloneColorPickerFocused;\n        this._modelService = _modelService;\n        this._keybindingService = _keybindingService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this.allowEditorOverflow = true;\n        this._position = undefined;\n        this._body = document.createElement('div');\n        this._colorHover = null;\n        this._selectionSetInEditor = false;\n        this._onResult = this._register(new Emitter());\n        this.onResult = this._onResult.event;\n        this._standaloneColorPickerVisible.set(true);\n        this._standaloneColorPickerParticipant = _instantiationService.createInstance(StandaloneColorPickerParticipant, this._editor);\n        this._position = (_a = this._editor._getViewModel()) === null || _a === void 0 ? void 0 : _a.getPrimaryCursorState().modelState.position;\n        const editorSelection = this._editor.getSelection();\n        const selection = editorSelection ?\n            {\n                startLineNumber: editorSelection.startLineNumber,\n                startColumn: editorSelection.startColumn,\n                endLineNumber: editorSelection.endLineNumber,\n                endColumn: editorSelection.endColumn\n            } : { startLineNumber: 0, endLineNumber: 0, endColumn: 0, startColumn: 0 };\n        const focusTracker = this._register(dom.trackFocus(this._body));\n        this._register(focusTracker.onDidBlur(_ => {\n            this.hide();\n        }));\n        this._register(focusTracker.onDidFocus(_ => {\n            this.focus();\n        }));\n        // When the cursor position changes, hide the color picker\n        this._register(this._editor.onDidChangeCursorPosition(() => {\n            // Do not hide the color picker when the cursor changes position due to the keybindings\n            if (!this._selectionSetInEditor) {\n                this.hide();\n            }\n            else {\n                this._selectionSetInEditor = false;\n            }\n        }));\n        this._register(this._editor.onMouseMove((e) => {\n            var _a;\n            const classList = (_a = e.target.element) === null || _a === void 0 ? void 0 : _a.classList;\n            if (classList && classList.contains('colorpicker-color-decoration')) {\n                this.hide();\n            }\n        }));\n        this._register(this.onResult((result) => {\n            this._render(result.value, result.foundInEditor);\n        }));\n        this._start(selection);\n        this._body.style.zIndex = '50';\n        this._editor.addContentWidget(this);\n    }\n    updateEditor() {\n        if (this._colorHover) {\n            this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover);\n        }\n    }\n    getId() {\n        return StandaloneColorPickerWidget_1.ID;\n    }\n    getDomNode() {\n        return this._body;\n    }\n    getPosition() {\n        if (!this._position) {\n            return null;\n        }\n        const positionPreference = this._editor.getOption(60 /* EditorOption.hover */).above;\n        return {\n            position: this._position,\n            secondaryPosition: this._position,\n            preference: positionPreference ? [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */] : [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */],\n            positionAffinity: 2 /* PositionAffinity.None */\n        };\n    }\n    hide() {\n        this.dispose();\n        this._standaloneColorPickerVisible.set(false);\n        this._standaloneColorPickerFocused.set(false);\n        this._editor.removeContentWidget(this);\n        this._editor.focus();\n    }\n    focus() {\n        this._standaloneColorPickerFocused.set(true);\n        this._body.focus();\n    }\n    _start(selection) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const computeAsyncResult = yield this._computeAsync(selection);\n            if (!computeAsyncResult) {\n                return;\n            }\n            this._onResult.fire(new StandaloneColorPickerResult(computeAsyncResult.result, computeAsyncResult.foundInEditor));\n        });\n    }\n    _computeAsync(range) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return null;\n            }\n            const colorInfo = {\n                range: range,\n                color: { red: 0, green: 0, blue: 0, alpha: 1 }\n            };\n            const colorHoverResult = yield this._standaloneColorPickerParticipant.createColorHover(colorInfo, new DefaultDocumentColorProvider(this._modelService, this._languageConfigurationService), this._languageFeaturesService.colorProvider);\n            if (!colorHoverResult) {\n                return null;\n            }\n            return { result: colorHoverResult.colorHover, foundInEditor: colorHoverResult.foundInEditor };\n        });\n    }\n    _render(colorHover, foundInEditor) {\n        const fragment = document.createDocumentFragment();\n        const statusBar = this._register(new EditorHoverStatusBar(this._keybindingService));\n        let colorPickerWidget;\n        const context = {\n            fragment,\n            statusBar,\n            setColorPicker: (widget) => colorPickerWidget = widget,\n            onContentsChanged: () => { },\n            hide: () => this.hide()\n        };\n        this._colorHover = colorHover;\n        this._register(this._standaloneColorPickerParticipant.renderHoverParts(context, [colorHover]));\n        if (colorPickerWidget === undefined) {\n            return;\n        }\n        this._body.classList.add('standalone-colorpicker-body');\n        this._body.style.maxHeight = Math.max(this._editor.getLayoutInfo().height / 4, 250) + 'px';\n        this._body.style.maxWidth = Math.max(this._editor.getLayoutInfo().width * 0.66, 500) + 'px';\n        this._body.tabIndex = 0;\n        this._body.appendChild(fragment);\n        colorPickerWidget.layout();\n        const colorPickerBody = colorPickerWidget.body;\n        const saturationBoxWidth = colorPickerBody.saturationBox.domNode.clientWidth;\n        const widthOfOriginalColorBox = colorPickerBody.domNode.clientWidth - saturationBoxWidth - CLOSE_BUTTON_WIDTH - PADDING;\n        const enterButton = colorPickerWidget.body.enterButton;\n        enterButton === null || enterButton === void 0 ? void 0 : enterButton.onClicked(() => {\n            this.updateEditor();\n            this.hide();\n        });\n        const colorPickerHeader = colorPickerWidget.header;\n        const pickedColorNode = colorPickerHeader.pickedColorNode;\n        pickedColorNode.style.width = saturationBoxWidth + PADDING + 'px';\n        const originalColorNode = colorPickerHeader.originalColorNode;\n        originalColorNode.style.width = widthOfOriginalColorBox + 'px';\n        const closeButton = colorPickerWidget.header.closeButton;\n        closeButton === null || closeButton === void 0 ? void 0 : closeButton.onClicked(() => {\n            this.hide();\n        });\n        // When found in the editor, highlight the selection in the editor\n        if (foundInEditor) {\n            if (enterButton) {\n                enterButton.button.textContent = 'Replace';\n            }\n            this._selectionSetInEditor = true;\n            this._editor.setSelection(colorHover.range);\n        }\n        this._editor.layoutContentWidget(this);\n    }\n};\nStandaloneColorPickerWidget.ID = 'editor.contrib.standaloneColorPickerWidget';\nStandaloneColorPickerWidget = StandaloneColorPickerWidget_1 = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, IModelService),\n    __param(5, IKeybindingService),\n    __param(6, ILanguageFeaturesService),\n    __param(7, ILanguageConfigurationService)\n], StandaloneColorPickerWidget);\nexport { StandaloneColorPickerWidget };\nclass StandaloneColorPickerResult {\n    // The color picker result consists of: an array of color results and a boolean indicating if the color was found in the editor\n    constructor(value, foundInEditor) {\n        this.value = value;\n        this.foundInEditor = foundInEditor;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, EditorAction2, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { localize } from '../../../../nls.js';\nimport { StandaloneColorPickerController } from './standaloneColorPickerWidget.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MenuId, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport './colorPicker.css';\nexport class ShowOrFocusStandaloneColorPicker extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.showOrFocusStandaloneColorPicker',\n            title: {\n                value: localize('showOrFocusStandaloneColorPicker', \"Show or Focus Standalone Color Picker\"),\n                mnemonicTitle: localize({ key: 'mishowOrFocusStandaloneColorPicker', comment: ['&& denotes a mnemonic'] }, \"&&Show or Focus Standalone Color Picker\"),\n                original: 'Show or Focus Standalone Color Picker',\n            },\n            precondition: undefined,\n            menu: [\n                { id: MenuId.CommandPalette },\n            ]\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StandaloneColorPickerController.get(editor)) === null || _a === void 0 ? void 0 : _a.showOrFocus();\n    }\n}\nclass HideStandaloneColorPicker extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.hideColorPicker',\n            label: localize({\n                key: 'hideColorPicker',\n                comment: [\n                    'Action that hides the color picker'\n                ]\n            }, \"Hide the Color Picker\"),\n            alias: 'Hide the Color Picker',\n            precondition: EditorContextKeys.standaloneColorPickerVisible.isEqualTo(true),\n            kbOpts: {\n                primary: 9 /* KeyCode.Escape */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = StandaloneColorPickerController.get(editor)) === null || _a === void 0 ? void 0 : _a.hide();\n    }\n}\nclass InsertColorWithStandaloneColorPicker extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertColorWithStandaloneColorPicker',\n            label: localize({\n                key: 'insertColorWithStandaloneColorPicker',\n                comment: [\n                    'Action that inserts color with standalone color picker'\n                ]\n            }, \"Insert Color with Standalone Color Picker\"),\n            alias: 'Insert Color with Standalone Color Picker',\n            precondition: EditorContextKeys.standaloneColorPickerFocused.isEqualTo(true),\n            kbOpts: {\n                primary: 3 /* KeyCode.Enter */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = StandaloneColorPickerController.get(editor)) === null || _a === void 0 ? void 0 : _a.insertColor();\n    }\n}\nregisterEditorAction(HideStandaloneColorPicker);\nregisterEditorAction(InsertColorWithStandaloneColorPicker);\nregisterAction2(ShowOrFocusStandaloneColorPicker);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class BlockCommentCommand {\n    constructor(selection, insertSpace, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._insertSpace = insertSpace;\n        this._usedEndToken = null;\n    }\n    static _haystackHasNeedleAtOffset(haystack, needle, offset) {\n        if (offset < 0) {\n            return false;\n        }\n        const needleLength = needle.length;\n        const haystackLength = haystack.length;\n        if (offset + needleLength > haystackLength) {\n            return false;\n        }\n        for (let i = 0; i < needleLength; i++) {\n            const codeA = haystack.charCodeAt(offset + i);\n            const codeB = needle.charCodeAt(i);\n            if (codeA === codeB) {\n                continue;\n            }\n            if (codeA >= 65 /* CharCode.A */ && codeA <= 90 /* CharCode.Z */ && codeA + 32 === codeB) {\n                // codeA is upper-case variant of codeB\n                continue;\n            }\n            if (codeB >= 65 /* CharCode.A */ && codeB <= 90 /* CharCode.Z */ && codeB + 32 === codeA) {\n                // codeB is upper-case variant of codeA\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    _createOperationsForBlockComment(selection, startToken, endToken, insertSpace, model, builder) {\n        const startLineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endLineNumber = selection.endLineNumber;\n        const endColumn = selection.endColumn;\n        const startLineText = model.getLineContent(startLineNumber);\n        const endLineText = model.getLineContent(endLineNumber);\n        let startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\n        let endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            if (startLineNumber === endLineNumber) {\n                const lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\n                if (lineBetweenTokens.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n            else {\n                const startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\n                const endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\n                if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n        }\n        let ops;\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            // Consider spaces as part of the comment tokens\n            if (insertSpace && startTokenIndex + startToken.length < startLineText.length && startLineText.charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n                // Pretend the start token contains a trailing space\n                startToken = startToken + ' ';\n            }\n            if (insertSpace && endTokenIndex > 0 && endLineText.charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n                // Pretend the end token contains a leading space\n                endToken = ' ' + endToken;\n                endTokenIndex -= 1;\n            }\n            ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        else {\n            ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken, this._insertSpace);\n            this._usedEndToken = ops.length === 1 ? endToken : null;\n        }\n        for (const op of ops) {\n            builder.addTrackedEditOperation(op.range, op.text);\n        }\n    }\n    static _createRemoveBlockCommentOperations(r, startToken, endToken) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Remove block comment start\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn)));\n            // Remove block comment end\n            res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        else {\n            // Remove both continuously\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        return res;\n    }\n    static _createAddBlockCommentOperations(r, startToken, endToken, insertSpace) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Insert block comment start\n            res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + (insertSpace ? ' ' : '')));\n            // Insert block comment end\n            res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), (insertSpace ? ' ' : '') + endToken));\n        }\n        else {\n            // Insert both continuously\n            res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\n        }\n        return res;\n    }\n    getEditOperations(model, builder) {\n        const startLineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, this._insertSpace, model, builder);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        if (inverseEditOperations.length === 2) {\n            const startTokenEditOperation = inverseEditOperations[0];\n            const endTokenEditOperation = inverseEditOperations[1];\n            return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\n        }\n        else {\n            const srcRange = inverseEditOperations[0].range;\n            const deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nexport class LineCommentCommand {\n    constructor(languageConfigurationService, selection, tabSize, type, insertSpace, ignoreEmptyLines, ignoreFirstLine) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._tabSize = tabSize;\n        this._type = type;\n        this._insertSpace = insertSpace;\n        this._selectionId = null;\n        this._deltaColumn = 0;\n        this._moveEndPositionDown = false;\n        this._ignoreEmptyLines = ignoreEmptyLines;\n        this._ignoreFirstLine = ignoreFirstLine || false;\n    }\n    /**\n     * Do an initial pass over the lines and gather info about the line comment string.\n     * Returns null if any of the lines doesn't support a line comment string.\n     */\n    static _gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService) {\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\n        const config = languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        const commentStr = (config ? config.lineCommentToken : null);\n        if (!commentStr) {\n            // Mode does not support line comments\n            return null;\n        }\n        const lines = [];\n        for (let i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\n            lines[i] = {\n                ignore: false,\n                commentStr: commentStr,\n                commentStrOffset: 0,\n                commentStrLength: commentStr.length\n            };\n        }\n        return lines;\n    }\n    /**\n     * Analyze lines and decide which lines are relevant and what the toggle should do.\n     * Also, build up several offsets and lengths useful in the generation of editor operations.\n     */\n    static _analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        let onlyWhitespaceLines = true;\n        let shouldRemoveComments;\n        if (type === 0 /* Type.Toggle */) {\n            shouldRemoveComments = true;\n        }\n        else if (type === 1 /* Type.ForceAdd */) {\n            shouldRemoveComments = false;\n        }\n        else {\n            shouldRemoveComments = true;\n        }\n        for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n            const lineData = lines[i];\n            const lineNumber = startLineNumber + i;\n            if (lineNumber === startLineNumber && ignoreFirstLine) {\n                // first line ignored\n                lineData.ignore = true;\n                continue;\n            }\n            const lineContent = model.getLineContent(lineNumber);\n            const lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\n            if (lineContentStartOffset === -1) {\n                // Empty or whitespace only line\n                lineData.ignore = ignoreEmptyLines;\n                lineData.commentStrOffset = lineContent.length;\n                continue;\n            }\n            onlyWhitespaceLines = false;\n            lineData.ignore = false;\n            lineData.commentStrOffset = lineContentStartOffset;\n            if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\n                if (type === 0 /* Type.Toggle */) {\n                    // Every line so far has been a line comment, but this one is not\n                    shouldRemoveComments = false;\n                }\n                else if (type === 1 /* Type.ForceAdd */) {\n                    // Will not happen\n                }\n                else {\n                    lineData.ignore = true;\n                }\n            }\n            if (shouldRemoveComments && insertSpace) {\n                // Remove a following space if present\n                const commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\n                if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32 /* CharCode.Space */) {\n                    lineData.commentStrLength += 1;\n                }\n            }\n        }\n        if (type === 0 /* Type.Toggle */ && onlyWhitespaceLines) {\n            // For only whitespace lines, we insert comments\n            shouldRemoveComments = false;\n            // Also, no longer ignore them\n            for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n                lines[i].ignore = false;\n            }\n        }\n        return {\n            supported: true,\n            shouldRemoveComments: shouldRemoveComments,\n            lines: lines\n        };\n    }\n    /**\n     * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\n     */\n    static _gatherPreflightData(type, insertSpace, model, startLineNumber, endLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        const lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService);\n        if (lines === null) {\n            return {\n                supported: false\n            };\n        }\n        return LineCommentCommand._analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService);\n    }\n    /**\n     * Given a successful analysis, execute either insert line comments, either remove line comments\n     */\n    _executeLineComments(model, builder, data, s) {\n        let ops;\n        if (data.shouldRemoveComments) {\n            ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        else {\n            LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._tabSize);\n            ops = this._createAddLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        const cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            builder.addEditOperation(ops[i].range, ops[i].text);\n            if (Range.isEmpty(ops[i].range) && Range.getStartPosition(ops[i].range).equals(cursorPosition)) {\n                const lineContent = model.getLineContent(cursorPosition.lineNumber);\n                if (lineContent.length + 1 === cursorPosition.column) {\n                    this._deltaColumn = (ops[i].text || '').length;\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    _attemptRemoveBlockComment(model, s, startToken, endToken) {\n        let startLineNumber = s.startLineNumber;\n        let endLineNumber = s.endLineNumber;\n        const startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\n        let startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\n        let endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex === -1) {\n            endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            endLineNumber = startLineNumber;\n        }\n        if (startTokenIndex === -1 && endTokenIndex !== -1) {\n            startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\n            startLineNumber = endLineNumber;\n        }\n        if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\n            startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\n            if (startTokenIndex !== -1) {\n                endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            }\n        }\n        // We have to adjust to possible inner white space.\n        // For Space after startToken, add Space to startToken - range math will work out.\n        if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n            startToken += ' ';\n        }\n        // For Space before endToken, add Space before endToken and shift index one left.\n        if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n            endToken = ' ' + endToken;\n            endTokenIndex -= 1;\n        }\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        return null;\n    }\n    /**\n     * Given an unsuccessful analysis, delegate to the block comment command\n     */\n    _executeBlockComment(model, builder, s) {\n        model.tokenization.tokenizeIfCheap(s.startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        const startToken = config.blockCommentStartToken;\n        const endToken = config.blockCommentEndToken;\n        let ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\n        if (!ops) {\n            if (s.isEmpty()) {\n                const lineContent = model.getLineContent(s.startLineNumber);\n                let firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\n                if (firstNonWhitespaceIndex === -1) {\n                    // Line is empty or contains only whitespace\n                    firstNonWhitespaceIndex = lineContent.length;\n                }\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken, this._insertSpace);\n            }\n            else {\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken, this._insertSpace);\n            }\n            if (ops.length === 1) {\n                // Leave cursor after token and Space\n                this._deltaColumn = startToken.length + 1;\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        for (const op of ops) {\n            builder.addEditOperation(op.range, op.text);\n        }\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._moveEndPositionDown = false;\n        if (s.startLineNumber === s.endLineNumber && this._ignoreFirstLine) {\n            builder.addEditOperation(new Range(s.startLineNumber, model.getLineMaxColumn(s.startLineNumber), s.startLineNumber + 1, 1), s.startLineNumber === model.getLineCount() ? '' : '\\n');\n            this._selectionId = builder.trackSelection(s);\n            return;\n        }\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const data = LineCommentCommand._gatherPreflightData(this._type, this._insertSpace, model, s.startLineNumber, s.endLineNumber, this._ignoreEmptyLines, this._ignoreFirstLine, this.languageConfigurationService);\n        if (data.supported) {\n            return this._executeLineComments(model, builder, data, s);\n        }\n        return this._executeBlockComment(model, builder, s);\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\n    }\n    /**\n     * Generate edit operations in the remove line comment case\n     */\n    static _createRemoveLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\n        }\n        return res;\n    }\n    /**\n     * Generate edit operations in the add line comment case\n     */\n    _createAddLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        const afterCommentStr = this._insertSpace ? ' ' : '';\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + afterCommentStr));\n        }\n        return res;\n    }\n    static nextVisibleColumn(currentVisibleColumn, tabSize, isTab, columnSize) {\n        if (isTab) {\n            return currentVisibleColumn + (tabSize - (currentVisibleColumn % tabSize));\n        }\n        return currentVisibleColumn + columnSize;\n    }\n    /**\n     * Adjust insertion points to have them vertically aligned in the add line comment case\n     */\n    static _normalizeInsertionPoint(model, lines, startLineNumber, tabSize) {\n        let minVisibleColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        let j;\n        let lenJ;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (let j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn < minVisibleColumn) {\n                minVisibleColumn = currentVisibleColumn;\n            }\n        }\n        minVisibleColumn = Math.floor(minVisibleColumn / tabSize) * tabSize;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn > minVisibleColumn) {\n                lines[i].commentStrOffset = j - 1;\n            }\n            else {\n                lines[i].commentStrOffset = j;\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nimport { LineCommentCommand } from './lineCommentCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nclass CommentLineAction extends EditorAction {\n    constructor(type, opts) {\n        super(opts);\n        this._type = type;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const modelOptions = model.getOptions();\n        const commentsOptions = editor.getOption(23 /* EditorOption.comments */);\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignoreFirstLine: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignoreFirstLine = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignoreFirstLine = true;\n                    prev = curr;\n                }\n            }\n        }\n        for (const selection of selections) {\n            commands.push(new LineCommentCommand(languageConfigurationService, selection.selection, modelOptions.tabSize, this._type, commentsOptions.insertSpace, commentsOptions.ignoreEmptyLines, selection.ignoreFirstLine));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass ToggleCommentLineAction extends CommentLineAction {\n    constructor() {\n        super(0 /* Type.Toggle */, {\n            id: 'editor.action.commentLine',\n            label: nls.localize('comment.line', \"Toggle Line Comment\"),\n            alias: 'Toggle Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 90 /* KeyCode.Slash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleLineComment', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Line Comment\"),\n                order: 1\n            }\n        });\n    }\n}\nclass AddLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(1 /* Type.ForceAdd */, {\n            id: 'editor.action.addCommentLine',\n            label: nls.localize('comment.line.add', \"Add Line Comment\"),\n            alias: 'Add Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass RemoveLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(2 /* Type.ForceRemove */, {\n            id: 'editor.action.removeCommentLine',\n            label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\n            alias: 'Remove Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass BlockCommentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.blockComment',\n            label: nls.localize('comment.block', \"Toggle Block Comment\"),\n            alias: 'Toggle Block Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 31 /* KeyCode.KeyA */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 31 /* KeyCode.KeyA */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleBlockComment', comment: ['&& denotes a mnemonic'] }, \"Toggle &&Block Comment\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commentsOptions = editor.getOption(23 /* EditorOption.comments */);\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new BlockCommentCommand(selection, commentsOptions.insertSpace, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorAction(ToggleCommentLineAction);\nregisterEditorAction(AddLineCommentAction);\nregisterEditorAction(RemoveLineCommentAction);\nregisterEditorAction(BlockCommentAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ContextMenuController_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IWorkspaceContextService, isStandaloneEditorWorkspace } from '../../../../platform/workspace/common/workspace.js';\nlet ContextMenuController = ContextMenuController_1 = class ContextMenuController {\n    static get(editor) {\n        return editor.getContribution(ContextMenuController_1.ID);\n    }\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService, _workspaceContextService) {\n        this._contextMenuService = _contextMenuService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._menuService = _menuService;\n        this._configurationService = _configurationService;\n        this._workspaceContextService = _workspaceContextService;\n        this._toDispose = new DisposableStore();\n        this._contextMenuIsBeingShownCount = 0;\n        this._editor = editor;\n        this._toDispose.add(this._editor.onContextMenu((e) => this._onContextMenu(e)));\n        this._toDispose.add(this._editor.onMouseWheel((e) => {\n            if (this._contextMenuIsBeingShownCount > 0) {\n                const view = this._contextViewService.getContextViewElement();\n                const target = e.srcElement;\n                // Event triggers on shadow root host first\n                // Check if the context view is under this host before hiding it #103169\n                if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n                    this._contextViewService.hideContextView();\n                }\n            }\n        }));\n        this._toDispose.add(this._editor.onKeyDown((e) => {\n            if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n                return; // Context menu is turned off through configuration\n            }\n            if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\n                // Chrome is funny like that\n                e.preventDefault();\n                e.stopPropagation();\n                this.showContextMenu();\n            }\n        }));\n    }\n    _onContextMenu(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n            this._editor.focus();\n            // Ensure the cursor is at the position of the mouse click\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n                this._editor.setPosition(e.target.position);\n            }\n            return; // Context menu is turned off through configuration\n        }\n        if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            return; // allow native menu on widgets to support right click on input field for example in find\n        }\n        if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\n            return; // allow native menu on injected text\n        }\n        e.event.preventDefault();\n        e.event.stopPropagation();\n        if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\n            return this._showScrollbarContextMenu(e.event);\n        }\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            return; // only support mouse click into text or native context menu key for now\n        }\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position) {\n            let hasSelectionAtPosition = false;\n            for (const selection of this._editor.getSelections()) {\n                if (selection.containsPosition(e.target.position)) {\n                    hasSelectionAtPosition = true;\n                    break;\n                }\n            }\n            if (!hasSelectionAtPosition) {\n                this._editor.setPosition(e.target.position);\n            }\n        }\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n        let anchor = null;\n        if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            anchor = e.event;\n        }\n        // Show the context menu\n        this.showContextMenu(anchor);\n    }\n    showContextMenu(anchor) {\n        if (!this._editor.getOption(24 /* EditorOption.contextmenu */)) {\n            return; // Context menu is turned off through configuration\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Find actions available for menu\n        const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n        // Show menu if we have actions to show\n        if (menuActions.length > 0) {\n            this._doShowContextMenu(menuActions, anchor);\n        }\n    }\n    _getMenuActions(model, menuId) {\n        const result = [];\n        // get menu groups\n        const menu = this._menuService.createMenu(menuId, this._contextKeyService);\n        const groups = menu.getActions({ arg: model.uri });\n        menu.dispose();\n        // translate them into other actions\n        for (const group of groups) {\n            const [, actions] = group;\n            let addedItems = 0;\n            for (const action of actions) {\n                if (action instanceof SubmenuItemAction) {\n                    const subActions = this._getMenuActions(model, action.item.submenu);\n                    if (subActions.length > 0) {\n                        result.push(new SubmenuAction(action.id, action.label, subActions));\n                        addedItems++;\n                    }\n                }\n                else {\n                    result.push(action);\n                    addedItems++;\n                }\n            }\n            if (addedItems) {\n                result.push(new Separator());\n            }\n        }\n        if (result.length) {\n            result.pop(); // remove last separator\n        }\n        return result;\n    }\n    _doShowContextMenu(actions, event = null) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Disable hover\n        const oldHoverSetting = this._editor.getOption(60 /* EditorOption.hover */);\n        this._editor.updateOptions({\n            hover: {\n                enabled: false\n            }\n        });\n        let anchor = event;\n        if (!anchor) {\n            // Ensure selection is visible\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\n            this._editor.render();\n            const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n            // Translate to absolute editor position\n            const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n            const posx = editorCoords.left + cursorCoords.left;\n            const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n            anchor = { x: posx, y: posy };\n        }\n        const useShadowDOM = this._editor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        // Show menu\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            getActionViewItem: (action) => {\n                const keybinding = this._keybindingFor(action);\n                if (keybinding) {\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\n                }\n                const customActionViewItem = action;\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\n                    return customActionViewItem.getActionViewItem();\n                }\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\n            },\n            getKeyBinding: (action) => {\n                return this._keybindingFor(action);\n            },\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.updateOptions({\n                    hover: oldHoverSetting\n                });\n            }\n        });\n    }\n    _showScrollbarContextMenu(anchor) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (isStandaloneEditorWorkspace(this._workspaceContextService.getWorkspace())) {\n            // can't update the configuration properly in the standalone editor\n            return;\n        }\n        const minimapOptions = this._editor.getOption(72 /* EditorOption.minimap */);\n        let lastId = 0;\n        const createAction = (opts) => {\n            return {\n                id: `menu-action-${++lastId}`,\n                label: opts.label,\n                tooltip: '',\n                class: undefined,\n                enabled: (typeof opts.enabled === 'undefined' ? true : opts.enabled),\n                checked: opts.checked,\n                run: opts.run\n            };\n        };\n        const createSubmenuAction = (label, actions) => {\n            return new SubmenuAction(`menu-action-${++lastId}`, label, actions, undefined);\n        };\n        const createEnumAction = (label, enabled, configName, configuredValue, options) => {\n            if (!enabled) {\n                return createAction({ label, enabled, run: () => { } });\n            }\n            const createRunner = (value) => {\n                return () => {\n                    this._configurationService.updateValue(configName, value);\n                };\n            };\n            const actions = [];\n            for (const option of options) {\n                actions.push(createAction({\n                    label: option.label,\n                    checked: configuredValue === option.value,\n                    run: createRunner(option.value)\n                }));\n            }\n            return createSubmenuAction(label, actions);\n        };\n        const actions = [];\n        actions.push(createAction({\n            label: nls.localize('context.minimap.minimap', \"Minimap\"),\n            checked: minimapOptions.enabled,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\n            }\n        }));\n        actions.push(new Separator());\n        actions.push(createAction({\n            label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n            enabled: minimapOptions.enabled,\n            checked: minimapOptions.renderCharacters,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\n            }\n        }));\n        actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\n                label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n                value: 'proportional'\n            }, {\n                label: nls.localize('context.minimap.size.fill', \"Fill\"),\n                value: 'fill'\n            }, {\n                label: nls.localize('context.minimap.size.fit', \"Fit\"),\n                value: 'fit'\n            }]));\n        actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\n                label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n                value: 'mouseover'\n            }, {\n                label: nls.localize('context.minimap.slider.always', \"Always\"),\n                value: 'always'\n            }]));\n        const useShadowDOM = this._editor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n            }\n        });\n    }\n    _keybindingFor(action) {\n        return this._keybindingService.lookupKeybinding(action.id);\n    }\n    dispose() {\n        if (this._contextMenuIsBeingShownCount > 0) {\n            this._contextViewService.hideContextView();\n        }\n        this._toDispose.dispose();\n    }\n};\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = ContextMenuController_1 = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, IContextViewService),\n    __param(3, IContextKeyService),\n    __param(4, IKeybindingService),\n    __param(5, IMenuService),\n    __param(6, IConfigurationService),\n    __param(7, IWorkspaceContextService)\n], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showContextMenu',\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n            alias: 'Show Editor Context Menu',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n    }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(ShowContextMenu);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass CursorState {\n    constructor(selections) {\n        this.selections = selections;\n    }\n    equals(other) {\n        const thisLen = this.selections.length;\n        const otherLen = other.selections.length;\n        if (thisLen !== otherLen) {\n            return false;\n        }\n        for (let i = 0; i < thisLen; i++) {\n            if (!this.selections[i].equalsSelection(other.selections[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nclass StackElement {\n    constructor(cursorState, scrollTop, scrollLeft) {\n        this.cursorState = cursorState;\n        this.scrollTop = scrollTop;\n        this.scrollLeft = scrollLeft;\n    }\n}\nexport class CursorUndoRedoController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(CursorUndoRedoController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._isCursorUndoRedo = false;\n        this._undoStack = [];\n        this._redoStack = [];\n        this._register(editor.onDidChangeModel((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (this._isCursorUndoRedo) {\n                return;\n            }\n            if (!e.oldSelections) {\n                return;\n            }\n            if (e.oldModelVersionId !== e.modelVersionId) {\n                return;\n            }\n            const prevState = new CursorState(e.oldSelections);\n            const isEqualToLastUndoStack = (this._undoStack.length > 0 && this._undoStack[this._undoStack.length - 1].cursorState.equals(prevState));\n            if (!isEqualToLastUndoStack) {\n                this._undoStack.push(new StackElement(prevState, editor.getScrollTop(), editor.getScrollLeft()));\n                this._redoStack = [];\n                if (this._undoStack.length > 50) {\n                    // keep the cursor undo stack bounded\n                    this._undoStack.shift();\n                }\n            }\n        }));\n    }\n    cursorUndo() {\n        if (!this._editor.hasModel() || this._undoStack.length === 0) {\n            return;\n        }\n        this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._undoStack.pop());\n    }\n    cursorRedo() {\n        if (!this._editor.hasModel() || this._redoStack.length === 0) {\n            return;\n        }\n        this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._redoStack.pop());\n    }\n    _applyState(stackElement) {\n        this._isCursorUndoRedo = true;\n        this._editor.setSelections(stackElement.cursorState.selections);\n        this._editor.setScrollPosition({\n            scrollTop: stackElement.scrollTop,\n            scrollLeft: stackElement.scrollLeft\n        });\n        this._isCursorUndoRedo = false;\n    }\n}\nCursorUndoRedoController.ID = 'editor.contrib.cursorUndoRedoController';\nexport class CursorUndo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorUndo',\n            label: nls.localize('cursor.undo', \"Cursor Undo\"),\n            alias: 'Cursor Undo',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorUndo();\n    }\n}\nexport class CursorRedo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorRedo',\n            label: nls.localize('cursor.redo', \"Cursor Redo\"),\n            alias: 'Cursor Redo',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorRedo();\n    }\n}\nregisterEditorContribution(CursorUndoRedoController.ID, CursorUndoRedoController, 0 /* EditorContributionInstantiation.Eager */); // eager because it needs to listen to record cursor state ASAP\nregisterEditorAction(CursorUndo);\nregisterEditorAction(CursorRedo);\n"],"names":["SelectionAnchorController_1","__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","SelectionAnchorSet","RawContextKey","SelectionAnchorController","get","editor","getContribution","ID","constructor","contextKeyService","this","selectionAnchorSetContextKey","bindTo","modelChangeListener","onDidChangeModel","reset","setSelectionAnchor","hasModel","position","getPosition","changeDecorations","accessor","decorationId","removeDecoration","addDecoration","Selection","fromPositions","description","stickiness","hoverMessage","MarkdownString","appendText","localize","className","set","alert","lineNumber","column","goToSelectionAnchor","anchorPosition","getModel","getDecorationRange","setPosition","getStartPosition","selectFromAnchorToCursor","start","end","setSelection","cancelSelectionAnchor","undefined","dispose","IContextKeyService","SetSelectionAnchor","EditorAction","super","id","label","alias","precondition","kbOpts","kbExpr","EditorContextKeys","editorTextFocus","primary","KeyChord","weight","run","_accessor","_a","GoToSelectionAnchor","SelectFromAnchorToCursor","CancelSelectionAnchor","registerEditorContribution","registerEditorAction","overviewRulerBracketMatchForeground","registerColor","dark","light","hcDark","hcLight","nls","JumpToBracketAction","BracketMatchingController","jumpToBracket","SelectToBracketAction","args","name","schema","type","properties","default","selectBrackets","selectToBracket","RemoveBracketsAction","removeBrackets","BracketsData","brackets","options","Disposable","_editor","_lastBracketsData","_lastVersionId","_decorations","createDecorationsCollection","_updateBracketsSoon","_register","RunOnceScheduler","_updateBrackets","_matchBrackets","getOption","schedule","onDidChangeCursorPosition","onDidChangeModelContent","onDidChangeModelLanguageConfiguration","onDidChangeConfiguration","hasChanged","clear","onDidBlurEditorWidget","onDidFocusEditorWidget","model","newSelections","getSelections","map","selection","bracketPairs","matchBracket","newCursorPosition","containsPosition","enclosingBrackets","findEnclosingBrackets","nextBracket","findNextBracket","range","setSelections","revealRange","forEach","selectFrom","selectTo","sort","Range","compareRangesUsingStarts","open","close","getEndPosition","tmp","push","editSource","pushUndoStop","executeEdits","text","_recomputeBrackets","newDecorations","newDecorationsLen","bracketData","hasWidgetFocus","selections","versionId","getVersionId","previousData","positions","positionsLen","len","isEmpty","Position","compare","newData","newDataLen","previousIndex","previousLen","isBefore","equals","_DECORATION_OPTIONS_WITH_OVERVIEW_RULER","_DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER","ModelDecorationOptions","register","overviewRuler","color","themeColorFromId","OverviewRulerLane","Center","MenuRegistry","appendMenuItem","MenuId","MenubarGoMenu","group","command","title","comment","order","MoveCaretCommand","isMovingLeft","_selection","_isMovingLeft","getEditOperations","builder","startLineNumber","endLineNumber","startColumn","endColumn","getLineMaxColumn","rangeBefore","charBefore","getValueInRange","addEditOperation","rangeAfter","charAfter","computeCursorState","helper","MoveCaretAction","left","opts","commands","executeCommands","writable","TransposeLettersAction","textInputFocus","mac","lastColumn","endPosition","MoveOperations","rightPosition","middlePosition","leftPosition","beginPosition","leftChar","rightChar","replaceRange","ReplaceCommand","CLIPBOARD_CONTEXT_MENU_GROUP","supportsCut","platform","document","queryCommandSupported","supportsCopy","supportsPaste","navigator","clipboard","browser","registerCommand","CutAction","MultiCommand","win","secondary","menuOpts","menuId","MenubarEditMenu","EditorContext","when","CommandPalette","SimpleEditorContext","CopyAction","submenu","MenubarCopy","original","EditorContextCopy","EditorContextShare","ContextKeyExpr","and","notEquals","EditorTitleContext","EditorTitleContextShare","ExplorerContext","ExplorerContextShare","PasteAction","linux","ExecCommandCopyWithSyntaxHighlightingAction","getSelection","CopyOptions","forceCopyWithSyntaxHighlighting","focus","getContainerDomNode","ownerDocument","execCommand","registerExecCommandImpl","browserCommand","addImplementation","focusedEditor","ICodeEditorService","getFocusedCodeEditor","hasTextFocus","emptySelectionClipboard","getActiveDocument","codeEditorService","clipboardService","IClipboardService","clipboardText","readText","metadata","InMemoryClipboardMetadataManager","INSTANCE","pasteOnNewLine","multicursorText","mode","isFromEmptySelection","trigger","codeActionCommandId","quickFixCommandId","autoFixCommandId","refactorCommandId","sourceActionCommandId","organizeImportsCommandId","fixAllCommandId","ManagedCodeActionSet","codeActionsPreferredComparator","a","b","isPreferred","codeActionsComparator","_ref","_ref2","action","isNonEmptyArray","diagnostics","actions","documentation","disposables","allActions","validActions","filter","_ref3","disabled","hasAutoFix","some","_ref4","fix","kind","CodeActionKind","QuickFix","contains","emptyCodeActionsResponse","getCodeActions","registry","rangeOrSelection","progress","token","notebookFilter","assign","excludes","Notebook","codeActionContext","only","include","cts","TextModelCancellationTokenSource","excludeNotebookCodeActions","providers","all","provider","providedCodeActionKinds","mayIncludeActionsOfKind","getCodeActionProviders","DisposableStore","promises","report","providedCodeActions","provideCodeActions","add","isCancellationRequested","filteredActions","filtersAction","entry","currentBest","getDocumentationFromProvider","CodeActionItem","err","isCancellationError","onUnexpectedExternalError","listener","onDidChange","newProviders","cancel","x","flat","allDocumentation","coalesce","getAdditionalDocumentationForShowingActions","actionsToShow","_b","_c","_getAdditionalMenuItems","call","item","ApplyCodeActionReason","applyCodeAction","codeActionReason","CancellationToken","None","bulkEditService","IBulkEditService","commandService","ICommandService","telemetryService","ITelemetryService","notificationService","INotificationService","publicLog2","codeActionTitle","codeActionKind","codeActionIsPreferred","reason","edit","edits","quotableLabel","code","respectAutoSaveConfig","OnSave","showPreview","preview","isApplied","executeCommand","message","Error","asMessage","error","CommandsRegistry","resource","itemResolveCount","URI","illegalArgument","codeActionProvider","ILanguageFeaturesService","IModelService","validatedRangeOrSelection","isISelection","liftSelection","isIRange","validateRange","codeActionSet","triggerAction","CodeActionTriggerSource","Default","includeSourceActions","Progress","resolving","resolveCount","Math","min","setTimeout","contextKeyForSupportedActions","regex","SUPPORTED_CODE_ACTIONS","keys","RegExp","escapeRegExpCharacters","argsSchema","defaultSnippets","body","enum","enumDescriptions","triggerCodeActionsForEditorSelection","notAvailableMessage","autoApply","controller","CodeActionController","manualTriggerAtCurrentPosition","QuickFixAction","hasCodeActionsProvider","CodeActionCommand","EditorCommand","runEditorCommand","userArgs","CodeActionCommandArgs","fromUser","Empty","preferred","onlyIncludePreferredActions","RefactorAction","contextMenuOpts","Refactor","SourceAction","Source","OrganizeImportsAction","SourceOrganizeImports","OrganizeImports","FixAllAction","SourceFixAll","FixAll","AutoFixAction","AutoFix","LightBulbWidget","registerEditorCommand","Registry","as","Extensions","Configuration","registerConfiguration","editorConfigurationBaseNode","scope","CodeActionKeybindingResolver_1","CodeActionKeybindingResolver","keybindingService","getResolver","allCodeActionBindings","Lazy","getKeybindings","codeActionCommands","indexOf","resolvedKeybinding","commandArgs","binding","bestKeybindingForCodeAction","candidates","candidate","reduceRight","IKeybindingService","uncategorizedCodeActionGroup","freeze","codeActionGroups","RefactorExtract","icon","Codicon","wrench","RefactorInline","RefactorRewrite","RefactorMove","SurroundWith","symbolSnippet","symbolFile","CodeActionController_1","markerService","instantiationService","languageFeaturesService","progressService","_commandService","_configurationService","_actionWidgetService","_instantiationService","_activeCodeActions","MutableDisposable","_showDisabled","_disposed","_model","CodeActionModel","onDidChangeState","newState","update","_lightBulbWidget","widget","onClick","showCodeActionList","includeDisabledActions","fromLightbulb","_resolver","createInstance","onDidLayoutChange","hide","showCodeActions","_trigger","at","MessageController","closeMessage","triggerPosition","context","_applyCodeAction","retrigger","invokeFunction","FromCodeActions","_d","_e","_f","_g","rawValue","onUnexpectedError","validActionToApply","tryGetValidActionToApply","invalidAction","getInvalidActionThatWouldHaveBeenApplied","showMessage","toCoords","isVisible","find","currentDecorations","editorDom","getDomNode","anchor","isIPosition","delegate","onSelect","onHide","onHover","canPreview","onFocus","highlightRange","decorations","DECORATION","diagnostic","selectionText","getWordAtPosition","word","aria","show","inputCodeActions","showHeaders","keybindingResolver","menuEntries","menuEntry","allMenuItems","keybinding","toMenuItems","_shouldShowHeaders","_getActionBarActions","y","revealPosition","render","cursorCoords","getScrolledVisiblePosition","editorCoords","getDomNodePagePosition","top","height","getValue","uri","resultActions","tooltip","class","enabled","IMarkerService","IInstantiationService","IEditorProgressService","IConfigurationService","IActionWidgetService","registerThemingParticipant","theme","collector","addBackgroundColorRule","selector","getColor","editorFindMatchHighlight","addRule","concat","findMatchHighlightBorder","editorFindMatchHighlightBorder","isHighContrast","CodeActionOracle","_markerService","_signalChange","_delay","_autoTriggerTimer","TimeoutTimer","onMarkerChanged","_onMarkerChanges","_tryAutoTrigger","_getRangeOfSelectionUnlessWhitespaceEnclosed","resources","isEqual","cancelAndSet","line","getLineContent","test","CodeActionsState","Triggered","_cancellablePromise","catch","emptyCodeActionSet","_registry","_progressService","_codeActionOracle","_state","_onDidChangeState","Emitter","event","_supportedCodeActions","_update","onDidChangeModelLanguage","setState","_settingEnabledNearbyQuickfixes","has","supportedActions","flatMap","join","startPosition","createCancelablePromise","allMarkers","read","currPosition","trackedPosition","distance","Number","MAX_VALUE","toBeModified","marker","col","row","startRow","abs","newCodeActionTrigger","selectionAsPosition","actionsAtMarker","currentActions","showWhile","skipNotify","fire","LightBulbWidget_1","LightBulbState","Hidden","Showing","editorPosition","widgetPosition","_onClick","_domNode","dom","$","Gesture","ignoreTarget","addContentWidget","_","editorModel","state","getLineCount","preventDefault","lineHeight","pad","floor","posx","buttons","Event","runAndSubscribe","onDidUpdateKeybindings","_preferredKbLabel","lookupKeybinding","getLabel","_quickFixKbLabel","_updateLightBulbTitleAndIcon","removeContentWidget","getId","atPosition","getOptions","validatePosition","tabSize","fontInfo","lineContent","indent","computeIndentLevel","isFolded","getTopForLineNumber","effectiveLineNumber","spaceWidth","preference","_posPref","layoutContentWidget","classList","remove","ThemeIcon","asClassNameArray","lightBulb","lightbulbAutofix","other","startsWith","sep","intersects","append","part","providedKind","exclude","excludesAction","actionKind","arg","defaults","getKindFromUser","getApplyFromUser","getPreferredUser","defaultAutoApply","toLowerCase","defaultKind","resolveCodeAction","CodeLensModel","lenses","_disposables","isDisposed","list","symbol","getCodeLensModel","ordered","providerRanks","Map","provideCodeLenses","_len","Array","_key","assertType","isUri","codeLensProvider","Boolean","resolveCodeLens","finally","ICodeLensCache","createDecorator","CacheItem","lineCount","data","CodeLensCache","storageService","_fakeProvider","_cache","LRUCache","runWhenIdle","raw","_deserialize","once","onWillSaveState","WillSaveStateReason","SHUTDOWN","store","_serialize","put","copyItems","copyModel","toString","delete","create","lines","Set","values","JSON","stringify","parse","element","IStorageService","registerSingleton","CodeLensViewZone","afterLineNumber","heightInPx","onHeight","afterColumn","_onHeight","suppressMouseDown","domNode","createElement","onComputedHeight","_lastHeight","hasAttribute","CodeLensContentWidget","allowEditorOverflow","_commands","_isEmpty","_id","_idPool","updatePosition","withCommands","animate","children","hasSymbol","lens","renderLabelWithIcons","trim","String","role","getCommand","link","parentElement","getLineFirstNonWhitespaceColumn","_widgetPosition","CodeLensHelper","_removeDecorations","_addDecorations","_addDecorationsCallbacks","decoration","callback","commit","changeAccessor","resultingDecorations","deltaDecorations","codeLensDecorationOptions","collapseOnReplaceEdit","CodeLensWidget","viewZoneChangeAccessor","updateCallback","_isDisposed","_data","_decorationIds","codeLensData","plusRange","lift","_viewZone","_viewZoneId","addZone","_createContentWidgetIfNecessary","_contentWidget","removeZone","isValid","updateCodeLensSymbols","updateHeight","layoutZone","computeIfNecessary","updateCommands","symbols","resolved","getLineNumber","CodeLensContribution","_languageFeaturesService","debounceService","_notificationService","_codeLensCache","_localToDispose","_lenses","_oldCodeLensModels","_provideCodeLensDebounce","for","_resolveCodeLensesDebounce","salt","_resolveCodeLensesScheduler","_resolveCodeLensesInViewport","_onModelChange","_updateLensStyle","_localDispose","_currentCodeLensModel","_getLayoutInfo","lineHeightFactor","max","fontSize","codeLensHeight","fontFamily","editorFontInfo","style","setProperty","fontFeatureSettings","EDITOR_FONT_DEFAULTS","changeViewZones","_getCodeLensModelPromise","_resolveCodeLensesPromise","isTooLargeForTokenization","cachedLenses","_renderCodeLensSymbols","disposableTimeout","cachedLensesNow","registration","scheduler","t1","Date","now","newDelay","delay","_resolveCodeLensesInViewportSoon","toDisposable","decorationsAccessor","viewZonesAccessor","toDispose","lastLensLineNumber","l","splice","onDidBlurEditorText","onDidScrollChange","scrollTopChanged","scrollState","StableEditorScrollState","capture","_disposeAllLenses","restore","onMouseDown","tagName","decChangeAccessor","maxLineNumber","groups","lastGroup","layoutInfo","viewZoneAccessor","codeLensIndex","groupsIndex","symbolsLineNumber","codeLensLineNumber","toResolve","request","resolvePromise","resolvedSymbols","ILanguageFeatureDebounceService","hasCodeLensProvider","quickInputService","IQuickInputService","positionLineNumber","codelensController","items","pick","canPickMany","placeHolder","newModel","newLens","getColors","colorProviderRegistry","isDefaultColorDecoratorsEnabled","_findColorData","ColorDataCollector","getColorPresentations","colorInfo","provideColorPresentations","compute","colors","documentColors","provideDocumentColors","isArray","ExtColorDataCollector","red","green","blue","alpha","ColorPresentationsCollector","_token","defaultProvider","validDocumentColorProviderFound","colorData","documentColorProviders","DefaultDocumentColorProvider","_setupColorCommand","colorProvider","_len2","_key2","ColorContribution","mouseEvent","colorDecoratorsActivatedOn","detail","injectedText","attachedData","ColorDecorationInjectedTextMarker","hoverController","ModesHoverController","isColorPickerVisible","showContentHover","HoverParticipantRegistry","ColorHoverParticipant","ColorDetector_1","ColorDetector","languageFeatureDebounceService","_decorationsIds","_colorDatas","_colorDecoratorIds","_ruleFactory","DynamicCssRules","_decoratorLimitReporter","DecoratorLimitReporter","_colorDecorationClassRefs","_debounceInformation","RECOMPUTE_TIME","_isColorDecoratorsEnabled","isEnabled","updateColors","prevIsEnabled","_isDefaultColorDecoratorsEnabled","updatedColorDecoratorsSetting","updatedDefaultColorDecoratorsSetting","removeAllDecorations","_timeoutTimer","_computePromise","languageId","getLanguageId","deprecatedConfig","colorDecorators","stop","beginCompute","sw","StopWatch","elapsed","updateDecorations","updateColorDecorators","colorDatas","EMPTY","limit","rgba","RGBA","round","g","ref","createClassNameRef","backgroundColor","before","content","noBreakWhitespace","inlineClassName","inlineClassNameAffectsLetterSpacing","limited","removeDecorations","getColorData","getDecorationsInRange","isColorDecoration","_onDidChange","_computed","_limited","computed","ColorPickerModel","_color","_onDidChangeColor","presentation","colorPresentations","presentationIndex","_colorPresentations","_onDidChangePresentation","availableColorPresentations","_onColorFlushed","onColorFlushed","onDidChangeColor","onDidChangePresentation","originalColor","selectNextColorPresentation","flushColor","guessColorPresentation","originalText","originalTextPrefix","split","ColorPickerHeader","container","themeService","showingStandaloneColorPicker","_closeButton","_pickedColorNode","_pickedColorPresentation","setAttribute","_originalColorNode","Color","Format","CSS","format","getColorTheme","editorHoverBackground","white","onDidColorThemeChange","CLICK","toggle","isLighter","CloseButton","closeButton","pickedColorNode","originalColorNode","textContent","_onClicked","onClicked","_button","innerDiv","asCSSSelector","registerIcon","onclick","ColorPickerBody","pixelRatio","isStandaloneColorPicker","_insertButton","_saturationBox","SaturationBox","onDidSaturationValueChange","_opacityStrip","OpacityStrip","onDidOpacityChange","_hueStrip","HueStrip","onDidHueChange","InsertButton","s","v","hsva","HSVA","h","saturationBox","enterButton","layout","_canvas","POINTER_DOWN","onPointerDown","monitor","Element","GlobalPointerMoveMonitor","origin","onDidChangePosition","offsetX","offsetY","startMonitoring","pointerId","pageX","pageY","pointerUpListener","POINTER_UP","stopMonitoring","width","paintSelection","offsetWidth","offsetHeight","paint","saturatedColor","ctx","getContext","whiteGradient","createLinearGradient","addColorStop","blackGradient","rect","fillStyle","fill","isMonitoring","Strip","overlay","slider","updateSliderPosition","onDidChangeTop","opaque","transparent","background","button","ColorPickerWidget","Widget","standaloneColorPicker","PixelRatio","appendChild","header","ColorHover","owner","forceShowAtRange","isValidForHoverAnchor","_themeService","hoverOrdinal","computeSync","_anchor","_lineDecorations","computeAsync","lineDecorations","AsyncIterableObject","fromPromise","_computeAsync","colorDetector","_createColorHover","renderHoverParts","hoverParts","IThemeService","StandaloneColorPickerHover","StandaloneColorPickerParticipant","createColorHover","defaultColorInfo","defaultColorProvider","foundColorInfo","foundColorProvider","containsRange","foundInEditor","colorHover","updateEditorModel","colorHoverData","colorPickerModel","_updateColorPresentations","_updateEditorModel","participant","setMinimumDimensions","minimumHeight","Dimension","fragment","setColorPicker","editorUpdatedByColorPicker","textEdits","newRange","textEdit","trackedRange","_setTrackedRange","_getTrackedRange","forceMoveMarkers","setEndPosition","additionalTextEdits","modelService","languageConfigurationService","_editorWorkerClient","EditorWorkerClient","computeDefaultDocumentColors","colorFromInfo","rgb","formatRGB","formatRGBA","hsl","formatHSL","formatHSLA","hex","formatHex","formatHexA","DefaultDocumentColorProviderFeature","_modelService","_languageConfigurationService","ILanguageConfigurationService","registerEditorFeature","StandaloneColorPickerController_1","StandaloneColorPickerWidget_1","StandaloneColorPickerController","_contextKeyService","_keybindingService","_languageFeatureService","_standaloneColorPickerWidget","_standaloneColorPickerVisible","standaloneColorPickerVisible","_standaloneColorPickerFocused","standaloneColorPickerFocused","showOrFocus","StandaloneColorPickerWidget","insertColor","updateEditor","_position","_body","_colorHover","_selectionSetInEditor","_onResult","onResult","_standaloneColorPickerParticipant","_getViewModel","getPrimaryCursorState","modelState","editorSelection","focusTracker","onDidBlur","onDidFocus","onMouseMove","_render","_start","zIndex","positionPreference","above","secondaryPosition","positionAffinity","computeAsyncResult","StandaloneColorPickerResult","colorHoverResult","createDocumentFragment","colorPickerWidget","statusBar","EditorHoverStatusBar","onContentsChanged","maxHeight","getLayoutInfo","maxWidth","tabIndex","colorPickerBody","saturationBoxWidth","clientWidth","widthOfOriginalColorBox","colorPickerHeader","ShowOrFocusStandaloneColorPicker","EditorAction2","mnemonicTitle","menu","HideStandaloneColorPicker","isEqualTo","InsertColorWithStandaloneColorPicker","registerAction2","BlockCommentCommand","insertSpace","_insertSpace","_usedEndToken","_haystackHasNeedleAtOffset","haystack","needle","offset","needleLength","codeA","charCodeAt","codeB","_createOperationsForBlockComment","startToken","endToken","startLineText","endLineText","ops","startTokenIndex","lastIndexOf","endTokenIndex","substring","startLineAfterStartToken","endLineBeforeEndToken","_createRemoveBlockCommentOperations","_createAddBlockCommentOperations","op","addTrackedEditOperation","res","EditOperation","replace","insert","tokenization","tokenizeIfCheap","getLanguageIdAtPosition","config","getLanguageConfiguration","comments","blockCommentStartToken","blockCommentEndToken","inverseEditOperations","getInverseEditOperations","startTokenEditOperation","endTokenEditOperation","srcRange","deltaColumn","LineCommentCommand","ignoreEmptyLines","ignoreFirstLine","_tabSize","_type","_selectionId","_deltaColumn","_moveEndPositionDown","_ignoreEmptyLines","_ignoreFirstLine","_gatherPreflightCommentStrings","commentStr","lineCommentToken","ignore","commentStrOffset","commentStrLength","_analyzeLines","shouldRemoveComments","onlyWhitespaceLines","lineData","lineContentStartOffset","strings","commentStrEndOffset","supported","_gatherPreflightData","_executeLineComments","_createRemoveLineCommentsOperations","_normalizeInsertionPoint","_createAddLineCommentsOperations","cursorPosition","positionColumn","trackSelection","_attemptRemoveBlockComment","startTokenAllowedBeforeColumn","_executeBlockComment","firstNonWhitespaceIndex","getTrackedSelection","selectionStartLineNumber","selectionStartColumn","afterCommentStr","nextVisibleColumn","currentVisibleColumn","isTab","columnSize","j","lenJ","minVisibleColumn","CommentLineAction","modelOptions","commentsOptions","index","prev","curr","BlockCommentAction","ContextMenuController_1","ContextMenuController","_contextMenuService","_contextViewService","_menuService","_workspaceContextService","_toDispose","_contextMenuIsBeingShownCount","onContextMenu","_onContextMenu","onMouseWheel","view","getContextViewElement","srcElement","shadowRoot","hideContextView","onKeyDown","keyCode","stopPropagation","showContextMenu","_showScrollbarContextMenu","hasSelectionAtPosition","menuActions","_getMenuActions","isSimpleWidget","_doShowContextMenu","createMenu","getActions","addedItems","SubmenuItemAction","subActions","SubmenuAction","Separator","pop","oldHoverSetting","updateOptions","hover","posy","useShadowDOM","isIOS","domForShadowRoot","getAnchor","getActionViewItem","_keybindingFor","ActionViewItem","isMenu","customActionViewItem","getKeyBinding","wasCancelled","isStandaloneEditorWorkspace","getWorkspace","minimapOptions","lastId","createAction","checked","createEnumAction","configName","configuredValue","createRunner","updateValue","option","createSubmenuAction","renderCharacters","size","showSlider","IContextMenuService","IContextViewService","IMenuService","IWorkspaceContextService","ShowContextMenu","CursorState","thisLen","equalsSelection","StackElement","cursorState","scrollTop","scrollLeft","CursorUndoRedoController","_isCursorUndoRedo","_undoStack","_redoStack","onDidChangeCursorSelection","oldSelections","oldModelVersionId","modelVersionId","prevState","getScrollTop","getScrollLeft","shift","cursorUndo","_applyState","cursorRedo","stackElement","setScrollPosition","CursorUndo","CursorRedo"],"sourceRoot":""}