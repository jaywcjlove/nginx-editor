"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[4722],{82046:(e,i,t)=>{t.d(i,{BG:()=>s,IO:()=>d,Y:()=>r,eh:()=>n,pj:()=>l,qN:()=>a});class o{constructor(e,i){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=i,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const t=this._viewLayout.getCurrentViewport();this.scrollTop=t.top,this.scrollLeft=t.left,this.viewportWidth=t.width,this.viewportHeight=t.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,i){return this._viewLayout.getVerticalOffsetForLineNumber(e,i)}getVerticalOffsetAfterLineNumber(e,i){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,i)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class n extends o{constructor(e,i,t){super(e,i),this._renderingContextBrand=void 0,this._viewLines=t}linesVisibleRangesForRange(e,i){return this._viewLines.linesVisibleRangesForRange(e,i)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class s{constructor(e,i,t,o){this.outsideRenderedLine=e,this.lineNumber=i,this.ranges=t,this.continuesOnNextLine=o}}class r{static from(e){const i=new Array(e.length);for(let t=0,o=e.length;t<o;t++){const o=e[t];i[t]=new r(o.left,o.width)}return i}constructor(e,i){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(i)}toString(){return"[".concat(this.left,",").concat(this.width,"]")}}class d{constructor(e,i){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=i}toString(){return"[".concat(this.left,",").concat(this.width,"]")}static compare(e,i){return e.left-i.left}}class a{constructor(e,i){this.outsideRenderedLine=e,this.originalLeft=i,this.left=Math.round(this.originalLeft)}}class l{constructor(e,i){this.outsideRenderedLine=e,this.ranges=i}}},45956:(e,i,t)=>{t.d(i,{W:()=>r});var o=t(23030),n=t(20603),s=t(22057);class r{constructor(e,i,t,o){this.configuration=e,this.viewModel=i,this.userInputEvents=t,this.commandDelegate=o}paste(e,i,t,o){this.commandDelegate.paste(e,i,t,o)}type(e){this.commandDelegate.type(e)}compositionType(e,i,t,o){this.commandDelegate.compositionType(e,i,t,o)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){o.CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const i=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<i?new n.y(e.lineNumber,i):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(78)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const i=this.configuration.options,t=s.j9&&i.get(107),o=i.get(22);e.middleButton&&!t?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):2===e.mouseDownCount?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||o?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,i){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:i}}moveTo(e,i){o.CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_moveToSelect(e,i){o.CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_columnSelect(e,i,t){e=this._validateViewColumn(e),o.CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:i,doColumnSelect:t})}_createCursor(e,i){e=this._validateViewColumn(e),o.CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:i})}_lastCursorMoveToSelect(e,i){o.CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_wordSelect(e,i){o.CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_wordSelectDrag(e,i){o.CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_lastCursorWordSelect(e,i){o.CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_lineSelect(e,i){o.CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_lineSelectDrag(e,i){o.CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_lastCursorLineSelect(e,i){o.CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_lastCursorLineSelectDrag(e,i){o.CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_selectAll(){o.CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}},60907:(e,i,t)=>{t.d(i,{I:()=>a,T:()=>d});var o=t(54633),n=t(63919),s=t(74821),r=t(1566);class d{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,i){this._lines=i,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const i=e-this._rendLineNumberStart;if(i<0||i>=this._lines.length)throw new s.D7("Illegal value for lineNumber");return this._lines[i]}onLinesDeleted(e,i){if(0===this.getCount())return null;const t=this.getStartLineNumber(),o=this.getEndLineNumber();if(i<t){const t=i-e+1;return this._rendLineNumberStart-=t,null}if(e>o)return null;let n=0,s=0;for(let r=t;r<=o;r++){const t=r-this._rendLineNumberStart;e<=r&&r<=i&&(0===s?(n=t,s=1):s++)}if(e<t){let o=0;o=i<t?i-e+1:t-e,this._rendLineNumberStart-=o}return this._lines.splice(n,s)}onLinesChanged(e,i){const t=e+i-1;if(0===this.getCount())return!1;const o=this.getStartLineNumber(),n=this.getEndLineNumber();let s=!1;for(let r=e;r<=t;r++)r>=o&&r<=n&&(this._lines[r-this._rendLineNumberStart].onContentChanged(),s=!0);return s}onLinesInserted(e,i){if(0===this.getCount())return null;const t=i-e+1,o=this.getStartLineNumber(),n=this.getEndLineNumber();if(e<=o)return this._rendLineNumberStart+=t,null;if(e>n)return null;if(t+e>n){return this._lines.splice(e-this._rendLineNumberStart,n-e+1)}const s=[];for(let h=0;h<t;h++)s[h]=this._createLine();const r=e-this._rendLineNumberStart,d=this._lines.slice(0,r),a=this._lines.slice(r,this._lines.length-t),l=this._lines.slice(this._lines.length-t,this._lines.length);return this._lines=d.concat(s).concat(a),l}onTokensChanged(e){if(0===this.getCount())return!1;const i=this.getStartLineNumber(),t=this.getEndLineNumber();let o=!1;for(let n=0,s=e.length;n<s;n++){const s=e[n];if(s.toLineNumber<i||s.fromLineNumber>t)continue;const r=Math.max(i,s.fromLineNumber),d=Math.min(t,s.toLineNumber);for(let e=r;e<=d;e++){const i=e-this._rendLineNumberStart;this._lines[i].onTokensChanged(),o=!0}}return o}}class a{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new d((()=>this._host.createVisibleLine()))}_createDomNode(){const e=(0,o.Z)(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(145)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const i=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(i)for(let t=0,o=i.length;t<o;t++){const e=i[t].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0}onLinesInserted(e){const i=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(i)for(let t=0,o=i.length;t<o;t++){const e=i[t].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const i=this._linesCollection._get(),t=new l(this.domNode.domNode,this._host,e),o={rendLineNumberStart:i.rendLineNumberStart,lines:i.lines,linesLength:i.lines.length},n=t.render(o,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(n.rendLineNumberStart,n.lines)}}class l{constructor(e,i,t){this.domNode=e,this.host=i,this.viewportData=t}render(e,i,t,o){const n={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(n.rendLineNumberStart+n.linesLength-1<i||t<n.rendLineNumberStart){n.rendLineNumberStart=i,n.linesLength=t-i+1,n.lines=[];for(let e=i;e<=t;e++)n.lines[e-i]=this.host.createVisibleLine();return this._finishRendering(n,!0,o),n}if(this._renderUntouchedLines(n,Math.max(i-n.rendLineNumberStart,0),Math.min(t-n.rendLineNumberStart,n.linesLength-1),o,i),n.rendLineNumberStart>i){const e=i,s=Math.min(t,n.rendLineNumberStart-1);e<=s&&(this._insertLinesBefore(n,e,s,o,i),n.linesLength+=s-e+1)}else if(n.rendLineNumberStart<i){const e=Math.min(n.linesLength,i-n.rendLineNumberStart);e>0&&(this._removeLinesBefore(n,e),n.linesLength-=e)}if(n.rendLineNumberStart=i,n.rendLineNumberStart+n.linesLength-1<t){const e=n.rendLineNumberStart+n.linesLength,s=t;e<=s&&(this._insertLinesAfter(n,e,s,o,i),n.linesLength+=s-e+1)}else if(n.rendLineNumberStart+n.linesLength-1>t){const e=Math.max(0,t-n.rendLineNumberStart+1),i=n.linesLength-1-e+1;i>0&&(this._removeLinesAfter(n,i),n.linesLength-=i)}return this._finishRendering(n,!1,o),n}_renderUntouchedLines(e,i,t,o,n){const s=e.rendLineNumberStart,r=e.lines;for(let d=i;d<=t;d++){const e=s+d;r[d].layoutLine(e,o[e-n],this.viewportData.lineHeight)}}_insertLinesBefore(e,i,t,o,n){const s=[];let r=0;for(let d=i;d<=t;d++)s[r++]=this.host.createVisibleLine();e.lines=s.concat(e.lines)}_removeLinesBefore(e,i){for(let t=0;t<i;t++){const i=e.lines[t].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(0,i)}_insertLinesAfter(e,i,t,o,n){const s=[];let r=0;for(let d=i;d<=t;d++)s[r++]=this.host.createVisibleLine();e.lines=e.lines.concat(s)}_removeLinesAfter(e,i){const t=e.linesLength-i;for(let o=0;o<i;o++){const i=e.lines[t+o].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(t,i)}_finishRenderingNewLines(e,i,t,o){l._ttPolicy&&(t=l._ttPolicy.createHTML(t));const n=this.domNode.lastChild;i||!n?this.domNode.innerHTML=t:n.insertAdjacentHTML("afterend",t);let s=this.domNode.lastChild;for(let r=e.linesLength-1;r>=0;r--){const i=e.lines[r];o[r]&&(i.setDomNode(s),s=s.previousSibling)}}_finishRenderingInvalidLines(e,i,t){const o=document.createElement("div");l._ttPolicy&&(i=l._ttPolicy.createHTML(i)),o.innerHTML=i;for(let n=0;n<e.linesLength;n++){const i=e.lines[n];if(t[n]){const e=o.firstChild,t=i.getDomNode();t.parentNode.replaceChild(e,t),i.setDomNode(e)}}}_finishRendering(e,i,t){const o=l._sb,n=e.linesLength,s=e.lines,r=e.rendLineNumberStart,d=[];{o.reset();let a=!1;for(let e=0;e<n;e++){const i=s[e];d[e]=!1;if(i.getDomNode())continue;i.renderLine(e+r,t[e],this.viewportData.lineHeight,this.viewportData,o)&&(d[e]=!0,a=!0)}a&&this._finishRenderingNewLines(e,i,o.build(),d)}{o.reset();let i=!1;const a=[];for(let e=0;e<n;e++){const n=s[e];if(a[e]=!1,d[e])continue;n.renderLine(e+r,t[e],this.viewportData.lineHeight,this.viewportData,o)&&(a[e]=!0,i=!0)}i&&this._finishRenderingInvalidLines(e,o.build(),a)}}}l._ttPolicy=(0,n.H)("editorViewLayer",{createHTML:e=>e}),l._sb=new r.fe(1e5)},50609:(e,i,t)=>{t.d(i,{EA:()=>l,jE:()=>h});var o=t(54633),n=t(58431),s=t(60907),r=t(88257);class d extends r.p{constructor(e){super(e),this._visibleLines=new s.I(this),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(50);(0,n.M)(this.domNode,i),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,i=this._dynamicOverlays.length;e<i;e++){if(this._dynamicOverlays[e].shouldRender())return!0}return!1}dispose(){super.dispose();for(let e=0,i=this._dynamicOverlays.length;e<i;e++){this._dynamicOverlays[e].dispose()}this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new a(this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const i=this._context.configuration.options.get(50);return(0,n.M)(this.domNode,i),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const i=this._dynamicOverlays.filter((e=>e.shouldRender()));for(let t=0,o=i.length;t<o;t++){const o=i[t];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class a{constructor(e){this._dynamicOverlays=e,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=(0,o.Z)(e)}onContentChanged(){}onTokensChanged(){}renderLine(e,i,t,o,n){let s="";for(let r=0,d=this._dynamicOverlays.length;r<d;r++){s+=this._dynamicOverlays[r].render(o.startLineNumber,e)}return this._renderedContent!==s&&(this._renderedContent=s,n.appendString('<div style="top:'),n.appendString(String(i)),n.appendString("px;height:"),n.appendString(String(t)),n.appendString('px;">'),n.appendString(s),n.appendString("</div>"),!0)}layoutLine(e,i,t){this._domNode&&(this._domNode.setTop(i),this._domNode.setHeight(t))}}class l extends d{constructor(e){super(e);const i=this._context.configuration.options.get(145);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(145);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class h extends d{constructor(e){super(e);const i=this._context.configuration.options,t=i.get(145);this._contentLeft=t.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),(0,n.M)(this.domNode,i.get(50))}onConfigurationChanged(e){const i=this._context.configuration.options;(0,n.M)(this.domNode,i.get(50));const t=i.get(145);return this._contentLeft=t.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const i=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(i),this.domNode.setWidth(this._contentLeft)}}},88257:(e,i,t)=>{t.d(i,{L:()=>s,p:()=>n});var o=t(7679);class n extends o.i{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class s{static write(e,i){e.setAttribute("data-mprt",String(i))}static read(e){const i=e.getAttribute("data-mprt");return null===i?0:parseInt(i,10)}static collect(e,i){const t=[];let o=0;for(;e&&e!==e.ownerDocument.body&&e!==i;)e.nodeType===e.ELEMENT_NODE&&(t[o++]=this.read(e)),e=e.parentElement;const n=new Uint8Array(o);for(let s=0;s<o;s++)n[s]=t[o-s-1];return n}}},40678:(e,i,t)=>{t.d(i,{o:()=>n});var o=t(20603);class n{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var i;null===(i=this.onKeyDown)||void 0===i||i.call(this,e)}emitKeyUp(e){var i;null===(i=this.onKeyUp)||void 0===i||i.call(this,e)}emitContextMenu(e){var i;null===(i=this.onContextMenu)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var i;null===(i=this.onMouseMove)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var i;null===(i=this.onMouseLeave)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var i;null===(i=this.onMouseDown)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var i;null===(i=this.onMouseUp)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var i;null===(i=this.onMouseDrag)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var i;null===(i=this.onMouseDrop)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;null===(e=this.onMouseDropCanceled)||void 0===e||e.call(this)}emitMouseWheel(e){var i;null===(i=this.onMouseWheel)||void 0===i||i.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return n.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,i){const t={...e};return t.position&&(t.position=i.convertViewPositionToModelPosition(t.position)),t.range&&(t.range=i.convertViewRangeToModelRange(t.range)),5!==t.type&&8!==t.type||(t.detail=this.convertViewToModelViewZoneData(t.detail,i)),t}static convertViewToModelViewZoneData(e,i){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?i.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?i.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:i.convertViewPositionToModelPosition(e.position),afterLineNumber:i.convertViewPositionToModelPosition(new o.y(e.afterLineNumber,1)).lineNumber}}}},98418:(e,i,t)=>{t.r(i),t.d(i,{BooleanEventEmitter:()=>Q,CodeEditorWidget:()=>K,EditorModeContext:()=>$});t(25209);var o=t(29563),n=t(74821),s=t(4640),r=t(60704),d=t(83786),a=t(58431),l=t(8152),h=t(71145),c=t(444),g=t(24107),u=t(25849),m=t(5218),_=t(40678);class f extends r.jG{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new r.$w),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,i,t){this._editor=e,this._instantiationService=t;for(const o of i)this._pending.has(o.id)?(0,n.dz)(new Error("Cannot have two contributions with the same id ".concat(o.id))):this._pending.set(o.id,o);this._instantiateSome(0),this._register((0,o.U3)((0,o.zk)(this._editor.getDomNode()),(()=>{this._instantiateSome(1)}))),this._register((0,o.U3)((0,o.zk)(this._editor.getDomNode()),(()=>{this._instantiateSome(2)}))),this._register((0,o.U3)((0,o.zk)(this._editor.getDomNode()),(()=>{this._instantiateSome(3)}),5e3))}saveViewState(){const e={};for(const[i,t]of this._instances)"function"===typeof t.saveViewState&&(e[i]=t.saveViewState());return e}restoreViewState(e){for(const[i,t]of this._instances)"function"===typeof t.restoreViewState&&t.restoreViewState(e[i])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){var e;return(0,o.U3)((0,o.zk)(null===(e=this._editor)||void 0===e?void 0:e.getDomNode()),(()=>{this._instantiateSome(1)}),50)}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const i=this._findPendingContributionsByInstantiation(e);for(const t of i)this._instantiateById(t.id)}_findPendingContributionsByInstantiation(e){const i=[];for(const[,t]of this._pending)t.instantiation===e&&i.push(t);return i}_instantiateById(e){const i=this._pending.get(e);if(i){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const e=this._instantiationService.createInstance(i.ctor,this._editor);this._instances.set(i.id,e),"function"===typeof e.restoreViewState&&0!==i.instantiation&&console.warn("Editor contribution '".concat(i.id,"' should be eager instantiated because it uses saveViewState / restoreViewState."))}catch(t){(0,n.dz)(t)}}}}var v,p=t(60542),b=t(15155),w=t(98681),C=t(20603),D=t(38499),y=t(60928),L=t(48259),S=t(23041),M=t(11894),R=t(20484),E=t(41236),N=t(98605),I=t(58012),T=t(8749),x=t(60240),O=t(17483),P=t(42851),V=t(22137),W=t(26376),A=t(17837),F=t(2703),k=t(42861),H=t(81203),B=t(84974),U=t(90585),z=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},j=function(e,i){return function(t,o){i(t,o,e)}};let K=v=class extends r.jG{get isSimpleWidget(){return this._configuration.isSimpleWidget}get contextMenuId(){return this._configuration.contextMenuId}constructor(e,i,t,r,d,a,l,h,g,u,m,_){var v,p;super(),this.languageConfigurationService=m,this._deliveryQueue=(0,s.Qy)(),this._contributions=this._register(new f),this._onDidDispose=this._register(new s.vl),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onWillChangeModel=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onWillChangeModel=this._onWillChangeModel.event,this._onDidChangeModel=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Y(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new Q({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Y(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Y(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Y(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Y(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Y(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Y(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Y(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Y(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Y(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new s.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),d.willCreateCodeEditor();const b={...i};let w;this._domElement=e,this._overflowWidgetsDomNode=b.overflowWidgetsDomNode,delete b.overflowWidgetsDomNode,this._id=++G,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=t.telemetryData,this._configuration=this._register(this._createConfiguration(t.isSimpleWidget||!1,null!==(v=t.contextMenuId)&&void 0!==v?v:t.isSimpleWidget?U.D8.SimpleEditorContext:U.D8.EditorContext,b,u)),this._register(this._configuration.onDidChange((e=>{this._onDidChangeConfiguration.fire(e);const i=this._configuration.options;if(e.hasChanged(145)){const e=i.get(145);this._onDidLayoutChange.fire(e)}}))),this._contextKeyService=this._register(l.createScoped(this._domElement)),this._notificationService=g,this._codeEditorService=d,this._commandService=a,this._themeService=h,this._register(new q(this,this._contextKeyService)),this._register(new $(this,this._contextKeyService,_)),this._instantiationService=r.createChild(new F.a([W.fN,this._contextKeyService])),this._modelData=null,this._focusTracker=new X(e,this._overflowWidgetsDomNode),this._register(this._focusTracker.onChange((()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())}))),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={},w=Array.isArray(t.contributions)?t.contributions:c.dS.getEditorContributions(),this._contributions.initialize(this,w,this._instantiationService);for(const o of c.dS.getEditorActions()){if(this._actions.has(o.id)){(0,n.dz)(new Error("Cannot have two actions with the same id ".concat(o.id)));continue}const e=new S.f(o.id,o.label,o.alias,o.metadata,null!==(p=o.precondition)&&void 0!==p?p:void 0,(e=>this._instantiationService.invokeFunction((i=>Promise.resolve(o.runEditorCommand(i,this,e))))),this._contextKeyService);this._actions.set(e.id,e)}const C=()=>!this._configuration.options.get(91)&&this._configuration.options.get(36).enabled;this._register(new o.pN(this._domElement,{onDragOver:e=>{if(!C())return;const i=this.getTargetAtClientPoint(e.clientX,e.clientY);(null===i||void 0===i?void 0:i.position)&&this.showDropIndicatorAt(i.position)},onDrop:async e=>{if(!C())return;if(this.removeDropIndicator(),!e.dataTransfer)return;const i=this.getTargetAtClientPoint(e.clientX,e.clientY);(null===i||void 0===i?void 0:i.position)&&this._onDropIntoEditor.fire({position:i.position,event:e})},onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var i;null===(i=this._modelData)||void 0===i||i.view.writeScreenReaderContent(e)}_createConfiguration(e,i,t,o){return new l.g(e,i,t,this._domElement,o)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return M._.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?L.z.getWordAtPosition(this._modelData.model,this._configuration.options.get(131),this._configuration.options.get(130),e):null}getValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this._modelData)return"";const i=!(!e||!e.preserveBOM);let t=0;return e&&e.lineEnding&&"\n"===e.lineEnding?t=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(t=2),this._modelData.model.getValue(t,i)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(){var e;const i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===this._modelData&&null===i)return;if(this._modelData&&this._modelData.model===i)return;const t={oldModelUrl:(null===(e=this._modelData)||void 0===e?void 0:e.model.uri)||null,newModelUrl:(null===i||void 0===i?void 0:i.uri)||null};this._onWillChangeModel.fire(t);const o=this.hasTextFocus(),n=this._detachModel();this._attachModel(i),o&&this.hasModel()&&this.focus(),this._removeDecorationTypes(),this._onDidChangeModel.fire(t),this._postDetachModelCleanup(n),this._contributionsDisposable=this._contributions.onAfterModelAttached()}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const i=this._decorationTypeSubtypes[e];for(const t in i)this._removeDecorationType(e+"-"+t)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,i,t,o){const n=e.model.validatePosition({lineNumber:i,column:t}),s=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(s.lineNumber,o)}getTopForLineNumber(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?v._getVerticalOffsetForPosition(this._modelData,e,1,i):-1}getTopForPosition(e,i){return this._modelData?v._getVerticalOffsetForPosition(this._modelData,e,i,!1):-1}static _getVerticalOffsetForPosition(e,i,t){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=e.model.validatePosition({lineNumber:i,column:t}),s=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber,o)}getBottomForLineNumber(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?v._getVerticalOffsetAfterPosition(this._modelData,e,1,i):-1}setHiddenAreas(e,i){var t;null===(t=this._modelData)||void 0===t||t.viewModel.setHiddenAreas(e.map((e=>D.Q.lift(e))),i)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const i=this._modelData.model.validatePosition(e),t=this._modelData.model.getOptions().tabSize;return b.A.visibleColumnFromColumn(this._modelData.model.getLineContent(i.lineNumber),i.column,t)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this._modelData){if(!C.y.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,i,t,o){if(!this._modelData)return;if(!D.Q.isIRange(e))throw new Error("Invalid arguments");const n=this._modelData.model.validateRange(e),s=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(n);this._modelData.viewModel.revealRange("api",t,s,i,o)}revealLine(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,0,i)}revealLineInCenter(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,1,i)}revealLineInCenterIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,2,i)}revealLineNearTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,5,i)}_revealLine(e,i,t){if("number"!==typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new D.Q(e,1,e,1),i,!1,t)}revealPosition(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,0,!0,i)}revealPositionInCenter(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,1,!0,i)}revealPositionInCenterIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,2,!0,i)}revealPositionNearTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,5,!0,i)}_revealPosition(e,i,t,o){if(!C.y.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new D.Q(e.lineNumber,e.column,e.lineNumber,e.column),i,t,o)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const t=y.L.isISelection(e),o=D.Q.isIRange(e);if(!t&&!o)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e,i);else if(o){const t={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(t,i)}}_setSelectionImpl(e,i){if(!this._modelData)return;const t=new y.L(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(i,[t])}revealLines(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,0,t)}revealLinesInCenter(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,1,t)}revealLinesInCenterIfOutsideViewport(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,2,t)}revealLinesNearTop(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,5,t)}_revealLines(e,i,t,o){if("number"!==typeof e||"number"!==typeof i)throw new Error("Invalid arguments");this._sendRevealRange(new D.Q(e,1,i,1),t,!1,o)}revealRange(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._revealRange(e,t?1:0,o,i)}revealRangeInCenter(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,1,!0,i)}revealRangeInCenterIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,2,!0,i)}revealRangeNearTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,5,!0,i)}revealRangeNearTopIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,6,!0,i)}revealRangeAtTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,3,!0,i)}_revealRange(e,i,t,o){if(!D.Q.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(D.Q.lift(e),i,t,o)}setSelections(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(let i=0,t=e.length;i<t;i++)if(!y.L.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,e,t)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},i)}}setScrollTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},i)}}setScrollPosition(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,i)}hasPendingScrollAnimation(){return!!this._modelData&&this._modelData.viewModel.viewLayout.hasPendingScrollAnimation()}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState();return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const i=e;if(i&&i.cursorState&&i.viewState){const e=i.cursorState;Array.isArray(e)?e.length>0&&this._modelData.viewModel.restoreCursorState(e):this._modelData.viewModel.restoreCursorState([e]),this._contributions.restoreViewState(i.contributionsState||{});const t=this._modelData.viewModel.reduceRestoreState(i.viewState);this._modelData.view.restoreState(t)}}handleInitialized(){var e;null===(e=this._getViewModel())||void 0===e||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter((e=>e.isSupported())),e}getAction(e){return this._actions.get(e)||null}trigger(e,i,t){switch(t=t||{},i){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":{const i=t;return void this._type(e,i.text||"")}case"replacePreviousChar":{const i=t;return void this._compositionType(e,i.text||"",i.replaceCharCnt||0,0,0)}case"compositionType":{const i=t;return void this._compositionType(e,i.text||"",i.replacePrevCharCnt||0,i.replaceNextCharCnt||0,i.positionDelta||0)}case"paste":{const i=t;return void this._paste(e,i.text||"",i.pasteOnNewLine||!1,i.multicursorText||null,i.mode||null,i.clipboardEvent)}case"cut":return void this._cut(e)}const o=this.getAction(i);o?Promise.resolve(o.run(t)).then(void 0,n.dz):this._modelData&&(this._triggerEditorCommand(e,i,t)||this._triggerCommand(i,t))}_triggerCommand(e,i){this._commandService.executeCommand(e,i)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,i){this._modelData&&0!==i.length&&("keyboard"===e&&this._onWillType.fire(i),this._modelData.viewModel.type(i,e),"keyboard"===e&&this._onDidType.fire(i))}_compositionType(e,i,t,o,n){this._modelData&&this._modelData.viewModel.compositionType(i,t,o,n,e)}_paste(e,i,t,o,n,s){if(!this._modelData)return;const r=this._modelData.viewModel,d=r.getSelection().getStartPosition();r.paste(i,t,o,e);const a=r.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({clipboardEvent:s,range:new D.Q(d.lineNumber,d.column,a.lineNumber,a.column),languageId:n})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,i,t){const o=c.dS.getEditorCommand(i);return!!o&&((t=t||{}).source=e,this._instantiationService.invokeFunction((e=>{Promise.resolve(o.runEditorCommand(e,this,t)).then(void 0,n.dz)})),!0)}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!!this._modelData&&(!this._configuration.options.get(91)&&(this._modelData.model.pushStackElement(),!0))}popUndoStop(){return!!this._modelData&&(!this._configuration.options.get(91)&&(this._modelData.model.popStackElement(),!0))}executeEdits(e,i,t){if(!this._modelData)return!1;if(this._configuration.options.get(91))return!1;let o;return o=t?Array.isArray(t)?()=>t:t:()=>null,this._modelData.viewModel.executeEdits(e,i,o),!0}executeCommand(e,i){this._modelData&&this._modelData.viewModel.executeCommand(i,e)}executeCommands(e,i){this._modelData&&this._modelData.viewModel.executeCommands(i,e)}createDecorationsCollection(e){return new J(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,(0,p.$C)(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,(0,p.$C)(this._configuration.options)):null}deltaDecorations(e,i){return this._modelData?0===e.length&&0===i.length?e:this._modelData.model.deltaDecorations(e,i,this._id):[]}removeDecorations(e){this._modelData&&0!==e.length&&this._modelData.model.changeDecorations((i=>{i.deltaDecorations(e,[])}))}removeDecorationsByType(e){const i=this._decorationTypeKeysToIds[e];i&&this.changeDecorations((e=>e.deltaDecorations(i,[]))),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(145)}createOverviewRuler(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}getContainerDomNode(){return this._domElement}getDomNode(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}delegateVerticalScrollbarPointerDown(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._configuration.observeContainer(e),i||this.render()}focus(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}hasTextFocus(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const i={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id:"+e.getId()),this._contentWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(i)}layoutContentWidget(e){const i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){const t=this._contentWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(t)}}removeContentWidget(e){const i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){const e=this._contentWidgets[i];delete this._contentWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(e)}}addOverlayWidget(e){const i={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(i)}layoutOverlayWidget(e){const i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){const t=this._overlayWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(t)}}removeOverlayWidget(e){const i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){const e=this._overlayWidgets[i];delete this._overlayWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(e)}}addGlyphMarginWidget(e){const i={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(i)}layoutGlyphMarginWidget(e){const i=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(i)){const t=this._glyphMarginWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(t)}}removeGlyphMarginWidget(e){const i=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(i)){const e=this._glyphMarginWidgets[i];delete this._glyphMarginWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(e)}}changeViewZones(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}getTargetAtClientPoint(e,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,i):null}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const i=this._modelData.model.validatePosition(e),t=this._configuration.options,o=t.get(145);return{top:v._getVerticalOffsetForPosition(this._modelData,i.lineNumber,i.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(i.lineNumber,i.column)+o.glyphMarginWidth+o.lineNumbersWidth+o.decorationsWidth-this.getScrollLeft(),height:t.get(67)}}getOffsetForColumn(e,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,i):-1}render(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._modelData&&this._modelData.hasRealView&&this._modelData.viewModel.batchEvents((()=>{this._modelData.view.render(!0,e)}))}setAriaOptions(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}applyFontInfo(e){(0,a.M)(e,this._configuration.options.get(50))}setBanner(e,i){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?i:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e)return void(this._modelData=null);const i=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const t=e.onBeforeAttached(),n=new x.J(this._id,this._configuration,e,m.K.create(o.zk(this._domElement)),T.J.create(this._configuration.options),(e=>o.PG(o.zk(this._domElement),e)),this.languageConfigurationService,this._themeService,t);i.push(e.onWillDispose((()=>this.setModel(null)))),i.push(n.onEvent((i=>{switch(i.kind){case 0:this._onDidContentSizeChange.fire(i);break;case 1:this._editorTextFocus.setValue(i.hasFocus);break;case 2:this._onDidScrollChange.fire(i);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(i.reachedMaxCursorCount){const e=this.getOption(80),i=O.kg("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",e);this._notificationService.prompt(k.AI.Warning,i,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:O.kg("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const e=[];for(let n=0,s=i.selections.length;n<s;n++)e[n]=i.selections[n].getPosition();const t={position:e[0],secondaryPositions:e.slice(1),reason:i.reason,source:i.source};this._onDidChangeCursorPosition.fire(t);const o={selection:i.selections[0],secondarySelections:i.selections.slice(1),modelVersionId:i.modelVersionId,oldSelections:i.oldSelections,oldModelVersionId:i.oldModelVersionId,source:i.source,reason:i.reason};this._onDidChangeCursorSelection.fire(o);break}case 7:this._onDidChangeModelDecorations.fire(i.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(i.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(i.event);break;case 10:this._onDidChangeModelContent.fire(i.event);break;case 11:this._onDidChangeModelOptions.fire(i.event);break;case 12:this._onDidChangeModelTokens.fire(i.event)}})));const[s,r]=this._createView(n);if(r){this._domElement.appendChild(s.domNode.domNode);let i=Object.keys(this._contentWidgets);for(let e=0,t=i.length;e<t;e++){const t=i[e];s.addContentWidget(this._contentWidgets[t])}i=Object.keys(this._overlayWidgets);for(let e=0,t=i.length;e<t;e++){const t=i[e];s.addOverlayWidget(this._overlayWidgets[t])}i=Object.keys(this._glyphMarginWidgets);for(let e=0,t=i.length;e<t;e++){const t=i[e];s.addGlyphMarginWidget(this._glyphMarginWidgets[t])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new Z(e,n,s,r,i,t)}_createView(e){let i;i=this.isSimpleWidget?{paste:(e,i,t,o)=>{this._paste("keyboard",e,i,t,o)},type:e=>{this._type("keyboard",e)},compositionType:(e,i,t,o)=>{this._compositionType("keyboard",e,i,t,o)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:{paste:(e,i,t,o)=>{const n={text:e,pasteOnNewLine:i,multicursorText:t,mode:o};this._commandService.executeCommand("paste",n)},type:e=>{const i={text:e};this._commandService.executeCommand("type",i)},compositionType:(e,i,t,o)=>{if(t||o){const n={text:e,replacePrevCharCnt:i,replaceNextCharCnt:t,positionDelta:o};this._commandService.executeCommand("compositionType",n)}else{const t={text:e,replaceCharCnt:i};this._commandService.executeCommand("replacePreviousChar",t)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const t=new _.o(e.coordinatesConverter);t.onKeyDown=e=>this._onKeyDown.fire(e),t.onKeyUp=e=>this._onKeyUp.fire(e),t.onContextMenu=e=>this._onContextMenu.fire(e),t.onMouseMove=e=>this._onMouseMove.fire(e),t.onMouseLeave=e=>this._onMouseLeave.fire(e),t.onMouseDown=e=>this._onMouseDown.fire(e),t.onMouseUp=e=>this._onMouseUp.fire(e),t.onMouseDrag=e=>this._onMouseDrag.fire(e),t.onMouseDrop=e=>this._onMouseDrop.fire(e),t.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),t.onMouseWheel=e=>this._onMouseWheel.fire(e);return[new u.S(i,this._configuration,this._themeService.getColorTheme(),e,t,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){null===e||void 0===e||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){var e;if(null===(e=this._contributionsDisposable)||void 0===e||e.dispose(),this._contributionsDisposable=void 0,!this._modelData)return null;const i=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),i}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return null!==this._modelData}showDropIndicatorAt(e){const i=[{range:new D.Q(e.lineNumber,e.column,e.lineNumber,e.column),options:v.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(i),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,i){this._contextKeyService.createKey(e,i)}};K.dropIntoEditorDecorationOptions=N.kI.register({description:"workbench-dnd-target",className:"dnd-target"}),K=v=z([j(3,A._Y),j(4,g.T),j(5,V.d),j(6,W.fN),j(7,B.Gy),j(8,k.Ot),j(9,P.j),j(10,E.JZ),j(11,I.u)],K);let G=0;class Z{constructor(e,i,t,o,n,s){this.model=e,this.viewModel=i,this.view=t,this.hasRealView=o,this.listenersToRemove=n,this.attachedView=s}dispose(){(0,r.AS)(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}class Q extends r.jG{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new s.vl(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new s.vl(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const i=e?2:1;this._value!==i&&(this._value=i,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}class Y extends s.vl{constructor(e,i){super({deliveryQueue:i}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class q extends r.jG{constructor(e,i){super(),this._editor=e,i.createKey("editorId",e.getId()),this._editorSimpleInput=R.R.editorSimpleInput.bindTo(i),this._editorFocus=R.R.focus.bindTo(i),this._textInputFocus=R.R.textInputFocus.bindTo(i),this._editorTextFocus=R.R.editorTextFocus.bindTo(i),this._tabMovesFocus=R.R.tabMovesFocus.bindTo(i),this._editorReadonly=R.R.readOnly.bindTo(i),this._inDiffEditor=R.R.inDiffEditor.bindTo(i),this._editorColumnSelection=R.R.columnSelection.bindTo(i),this._hasMultipleSelections=R.R.hasMultipleSelections.bindTo(i),this._hasNonEmptySelection=R.R.hasNonEmptySelection.bindTo(i),this._canUndo=R.R.canUndo.bindTo(i),this._canRedo=R.R.canRedo.bindTo(i),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromConfig()))),this._register(this._editor.onDidChangeCursorSelection((()=>this._updateFromSelection()))),this._register(this._editor.onDidFocusEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidFocusEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidChangeModel((()=>this._updateFromModel()))),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromModel()))),this._register(h.M.onDidChangeTabFocus((e=>this._tabMovesFocus.set(e)))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(h.M.getTabFocusMode()),this._editorReadonly.set(e.get(91)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some((e=>!e.isEmpty())))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class $ extends r.jG{constructor(e,i,t){super(),this._editor=e,this._contextKeyService=i,this._languageFeaturesService=t,this._langId=R.R.languageId.bindTo(i),this._hasCompletionItemProvider=R.R.hasCompletionItemProvider.bindTo(i),this._hasCodeActionsProvider=R.R.hasCodeActionsProvider.bindTo(i),this._hasCodeLensProvider=R.R.hasCodeLensProvider.bindTo(i),this._hasDefinitionProvider=R.R.hasDefinitionProvider.bindTo(i),this._hasDeclarationProvider=R.R.hasDeclarationProvider.bindTo(i),this._hasImplementationProvider=R.R.hasImplementationProvider.bindTo(i),this._hasTypeDefinitionProvider=R.R.hasTypeDefinitionProvider.bindTo(i),this._hasHoverProvider=R.R.hasHoverProvider.bindTo(i),this._hasDocumentHighlightProvider=R.R.hasDocumentHighlightProvider.bindTo(i),this._hasDocumentSymbolProvider=R.R.hasDocumentSymbolProvider.bindTo(i),this._hasReferenceProvider=R.R.hasReferenceProvider.bindTo(i),this._hasRenameProvider=R.R.hasRenameProvider.bindTo(i),this._hasSignatureHelpProvider=R.R.hasSignatureHelpProvider.bindTo(i),this._hasInlayHintsProvider=R.R.hasInlayHintsProvider.bindTo(i),this._hasDocumentFormattingProvider=R.R.hasDocumentFormattingProvider.bindTo(i),this._hasDocumentSelectionFormattingProvider=R.R.hasDocumentSelectionFormattingProvider.bindTo(i),this._hasMultipleDocumentFormattingProvider=R.R.hasMultipleDocumentFormattingProvider.bindTo(i),this._hasMultipleDocumentSelectionFormattingProvider=R.R.hasMultipleDocumentSelectionFormattingProvider.bindTo(i),this._isInEmbeddedEditor=R.R.isInEmbeddedEditor.bindTo(i);const o=()=>this._update();this._register(e.onDidChangeModel(o)),this._register(e.onDidChangeModelLanguage(o)),this._register(t.completionProvider.onDidChange(o)),this._register(t.codeActionProvider.onDidChange(o)),this._register(t.codeLensProvider.onDidChange(o)),this._register(t.definitionProvider.onDidChange(o)),this._register(t.declarationProvider.onDidChange(o)),this._register(t.implementationProvider.onDidChange(o)),this._register(t.typeDefinitionProvider.onDidChange(o)),this._register(t.hoverProvider.onDidChange(o)),this._register(t.documentHighlightProvider.onDidChange(o)),this._register(t.documentSymbolProvider.onDidChange(o)),this._register(t.referenceProvider.onDidChange(o)),this._register(t.renameProvider.onDidChange(o)),this._register(t.documentFormattingEditProvider.onDidChange(o)),this._register(t.documentRangeFormattingEditProvider.onDidChange(o)),this._register(t.signatureHelpProvider.onDidChange(o)),this._register(t.inlayHintsProvider.onDidChange(o)),o()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents((()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInEmbeddedEditor.reset()}))}_update(){const e=this._editor.getModel();e?this._contextKeyService.bufferChangeEvents((()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInEmbeddedEditor.set(e.uri.scheme===d.ny.walkThroughSnippet||e.uri.scheme===d.ny.vscodeChatCodeBlock)})):this.reset()}}class X extends r.jG{constructor(e,i){super(),this._onChange=this._register(new s.vl),this.onChange=this._onChange.event,this._hadFocus=void 0,this._hasDomElementFocus=!1,this._domFocusTracker=this._register(o.w5(e)),this._overflowWidgetsDomNodeHasFocus=!1,this._register(this._domFocusTracker.onDidFocus((()=>{this._hasDomElementFocus=!0,this._update()}))),this._register(this._domFocusTracker.onDidBlur((()=>{this._hasDomElementFocus=!1,this._update()}))),i&&(this._overflowWidgetsDomNode=this._register(o.w5(i)),this._register(this._overflowWidgetsDomNode.onDidFocus((()=>{this._overflowWidgetsDomNodeHasFocus=!0,this._update()}))),this._register(this._overflowWidgetsDomNode.onDidBlur((()=>{this._overflowWidgetsDomNodeHasFocus=!1,this._update()}))))}_update(){const e=this._hasDomElementFocus||this._overflowWidgetsDomNodeHasFocus;this._hadFocus!==e&&(this._hadFocus=e,this._onChange.fire(void 0))}hasFocus(){var e;return null!==(e=this._hadFocus)&&void 0!==e&&e}}class J{get length(){return this._decorationIds.length}constructor(e,i){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(i)&&i.length>0&&this.set(i)}onDidChange(e,i,t){return this._editor.onDidChangeModelDecorations((t=>{this._isChangingDecorations||e.call(i,t)}),t)}getRange(e){return this._editor.hasModel()?e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e]):null}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),i=[];for(const t of this._decorationIds){const o=e.getDecorationRange(t);o&&i.push(o)}return i}has(e){return this._decorationIds.includes(e.id)}clear(){0!==this._decorationIds.length&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations((i=>{this._decorationIds=i.deltaDecorations(this._decorationIds,e)}))}finally{this._isChangingDecorations=!1}return this._decorationIds}append(e){let i=[];try{this._isChangingDecorations=!0,this._editor.changeDecorations((t=>{i=t.deltaDecorations([],e),this._decorationIds=this._decorationIds.concat(i)}))}finally{this._isChangingDecorations=!1}return i}}const ee=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),ie=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function te(e){return ee+encodeURIComponent(e.toString())+ie}const oe=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),ne=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');(0,B.zy)(((e,i)=>{const t=e.getColor(H.Rbi);t&&i.addRule(".monaco-editor .".concat("squiggly-error",' { background: url("data:image/svg+xml,',te(t),'") repeat-x bottom left; }'));const o=e.getColor(H.Hng);o&&i.addRule(".monaco-editor .".concat("squiggly-warning",' { background: url("data:image/svg+xml,',te(o),'") repeat-x bottom left; }'));const n=e.getColor(H.pOz);n&&i.addRule(".monaco-editor .".concat("squiggly-info",' { background: url("data:image/svg+xml,',te(n),'") repeat-x bottom left; }'));const s=e.getColor(H.i61);s&&i.addRule(".monaco-editor .".concat("squiggly-hint",' { background: url("data:image/svg+xml,',oe+encodeURIComponent(s.toString())+ne,'") no-repeat bottom left; }'));const r=e.getColor(w.yw);r&&i.addRule(".monaco-editor.showUnused .".concat("squiggly-inline-unnecessary"," { opacity: ",r.rgba.a,"; }"))}))},78667:(e,i,t)=>{t.d(i,{t:()=>f});var o=t(19604),n=t(24107),s=t(98418),r=t(41236),d=t(58012),a=t(42851),l=t(22137),h=t(26376),c=t(17837),g=t(42861),u=t(84974),m=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},_=function(e,i){return function(t,o){i(t,o,e)}};let f=class extends s.CodeEditorWidget{constructor(e,i,t,o,n,s,r,d,a,l,h,c,g){super(e,{...o.getRawOptions(),overflowWidgetsDomNode:o.getOverflowWidgetsDomNode()},t,n,s,r,d,a,l,h,c,g),this._parentEditor=o,this._overwriteOptions=i,super.updateOptions(this._overwriteOptions),this._register(o.onDidChangeConfiguration((e=>this._onParentConfigurationChanged(e))))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){o.co(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};f=m([_(4,c._Y),_(5,n.T),_(6,l.d),_(7,h.fN),_(8,u.Gy),_(9,g.Ot),_(10,a.j),_(11,r.JZ),_(12,d.u)],f)},37894:(e,i,t)=>{t.r(i);var o=t(33944),n=t(29563),s=t(444),r=t(24107),d=t(3553),a=t(20484),l=t(17483),h=t(90585),c=t(22311),g=t(26376);t(73109);class u extends h.L{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:(0,l.aS)("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),icon:o.W.map,toggled:g.M$.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:g.M$.has("isInDiffEditor"),menu:{when:g.M$.has("isInDiffEditor"),id:h.D8.EditorTitle,order:22,group:"navigation"}})}run(e){const i=e.get(c.pG),t=!i.getValue("diffEditor.hideUnchangedRegions.enabled");i.updateValue("diffEditor.hideUnchangedRegions.enabled",t)}}class m extends h.L{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:(0,l.aS)("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),precondition:g.M$.has("isInDiffEditor")})}run(e){const i=e.get(c.pG),t=!i.getValue("diffEditor.experimental.showMoves");i.updateValue("diffEditor.experimental.showMoves",t)}}class _ extends h.L{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:(0,l.aS)("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),precondition:g.M$.has("isInDiffEditor")})}run(e){const i=e.get(c.pG),t=!i.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");i.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",t)}}const f=(0,l.aS)("diffEditor","Diff Editor");class v extends s.qO{constructor(){super({id:"diffEditor.switchSide",title:(0,l.aS)("switchSide","Switch Side"),icon:o.W.arrowSwap,precondition:g.M$.has("isInDiffEditor"),f1:!0,category:f})}runEditorCommand(e,i,t){const o=S(e);if(o instanceof d.T){if(t&&t.dryRun)return{destinationSelection:o.mapToOtherSide().destinationSelection};o.switchSide()}}}class p extends s.qO{constructor(){super({id:"diffEditor.exitCompareMove",title:(0,l.aS)("exitCompareMove","Exit Compare Move"),icon:o.W.close,precondition:a.R.comparingMovedCode,f1:!1,category:f,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,i){const t=S(e);t instanceof d.T&&t.exitCompareMove()}}class b extends s.qO{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:(0,l.aS)("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),icon:o.W.fold,precondition:g.M$.has("isInDiffEditor"),f1:!0,category:f})}runEditorCommand(e,i){const t=S(e);t instanceof d.T&&t.collapseAllUnchangedRegions()}}class w extends s.qO{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:(0,l.aS)("showAllUnchangedRegions","Show All Unchanged Regions"),icon:o.W.unfold,precondition:g.M$.has("isInDiffEditor"),f1:!0,category:f})}runEditorCommand(e,i){const t=S(e);t instanceof d.T&&t.showAllUnchangedRegions()}}class C extends h.L{constructor(){super({id:"diffEditor.revert",title:(0,l.aS)("revert","Revert"),f1:!1,category:f})}run(e,i){var t;const o=function(e,i,t){const o=e.get(r.T);return o.listDiffEditors().find((e=>{var o,n;const s=e.getModifiedEditor(),r=e.getOriginalEditor();return s&&(null===(o=s.getModel())||void 0===o?void 0:o.uri.toString())===t.toString()&&r&&(null===(n=r.getModel())||void 0===n?void 0:n.uri.toString())===i.toString()}))||null}(e,i.originalUri,i.modifiedUri);o instanceof d.T&&o.revertRangeMappings(null!==(t=i.mapping.innerChanges)&&void 0!==t?t:[])}}const D=(0,l.aS)("accessibleDiffViewer","Accessible Diff Viewer");class y extends h.L{constructor(){super({id:y.id,title:(0,l.aS)("editor.action.accessibleDiffViewer.next","Go to Next Difference"),category:D,precondition:g.M$.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){const i=S(e);null===i||void 0===i||i.accessibleDiffViewerNext()}}y.id="editor.action.accessibleDiffViewer.next";class L extends h.L{constructor(){super({id:L.id,title:(0,l.aS)("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),category:D,precondition:g.M$.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){const i=S(e);null===i||void 0===i||i.accessibleDiffViewerPrev()}}function S(e){const i=e.get(r.T).listDiffEditors(),t=(0,n.bq)();if(t)for(const o of i){if(M(o.getContainerDomNode(),t))return o}return null}function M(e,i){let t=i;for(;t;){if(t===e)return!0;t=t.parentElement}return!1}L.id="editor.action.accessibleDiffViewer.prev";var R=t(22137);(0,h.ug)(u),(0,h.ug)(m),(0,h.ug)(_),h.ZG.appendMenuItem(h.D8.EditorTitle,{command:{id:(new _).desc.id,title:(0,l.kg)("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:g.M$.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:g.M$.has("isInDiffEditor")},order:11,group:"1_diff",when:g.M$.and(a.R.diffEditorRenderSideBySideInlineBreakpointReached,g.M$.has("isInDiffEditor"))}),h.ZG.appendMenuItem(h.D8.EditorTitle,{command:{id:(new m).desc.id,title:(0,l.kg)("showMoves","Show Moved Code Blocks"),icon:o.W.move,toggled:g.f1.create("config.diffEditor.experimental.showMoves",!0),precondition:g.M$.has("isInDiffEditor")},order:10,group:"1_diff",when:g.M$.has("isInDiffEditor")}),(0,h.ug)(C);for(const E of[{icon:o.W.arrowRight,key:a.R.diffEditorInlineMode.toNegated()},{icon:o.W.discard,key:a.R.diffEditorInlineMode}])h.ZG.appendMenuItem(h.D8.DiffEditorHunkToolbar,{command:{id:(new C).desc.id,title:(0,l.kg)("revertHunk","Revert Block"),icon:E.icon},when:g.M$.and(a.R.diffEditorModifiedWritable,E.key),order:5,group:"primary"}),h.ZG.appendMenuItem(h.D8.DiffEditorSelectionToolbar,{command:{id:(new C).desc.id,title:(0,l.kg)("revertSelection","Revert Selection"),icon:E.icon},when:g.M$.and(a.R.diffEditorModifiedWritable,E.key),order:5,group:"primary"});(0,h.ug)(v),(0,h.ug)(p),(0,h.ug)(b),(0,h.ug)(w),h.ZG.appendMenuItem(h.D8.EditorTitle,{command:{id:y.id,title:(0,l.kg)("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:g.M$.has("isInDiffEditor")},order:10,group:"2_diff",when:g.M$.and(a.R.accessibleDiffViewerVisible.negate(),g.M$.has("isInDiffEditor"))}),R.w.registerCommandAlias("editor.action.diffReview.next",y.id),(0,h.ug)(y),R.w.registerCommandAlias("editor.action.diffReview.prev",L.id),(0,h.ug)(L)},3553:(e,i,t)=>{t.d(i,{T:()=>Ui});var o=t(29563),n=t(44783),s=t(74821),r=t(4640),d=t(60704),a=t(92444),l=t(6824),h=t(444),c=t(24107),g=t(85588),u=t(98418),m=t(63919),_=t(48837),f=t(90049),v=t(49071),p=t(55648),b=t(33944),w=t(48367),C=t(58431),D=t(64854),y=t(60542),L=t(48861),S=t(59874),M=t(20603),R=t(38499),E=t(48897),N=t(48188),I=t(21707),T=t(63783),x=t(77570),O=t(17483),P=t(26531),V=t(17837),W=t(39024),A=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},F=function(e,i){return function(t,o){i(t,o,e)}};const k=(0,W.pU)("diff-review-insert",b.W.add,(0,O.kg)("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),H=(0,W.pU)("diff-review-remove",b.W.remove,(0,O.kg)("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),B=(0,W.pU)("diff-review-close",b.W.close,(0,O.kg)("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));let U=class extends d.jG{constructor(e,i,t,o,n,s,r,d,l){super(),this._parentNode=e,this._visible=i,this._setVisible=t,this._canClose=o,this._width=n,this._height=s,this._diffs=r,this._models=d,this._instantiationService=l,this._state=(0,a.rm)(this,((e,i)=>{const t=this._visible.read(e);if(this._parentNode.style.visibility=t?"visible":"hidden",!t)return null;const o=i.add(this._instantiationService.createInstance(z,this._diffs,this._models,this._setVisible,this._canClose));return{model:o,view:i.add(this._instantiationService.createInstance($,this._parentNode,o,this._width,this._height,this._models))}})).recomputeInitiallyAndOnChange(this._store)}next(){(0,a.Rn)((e=>{const i=this._visible.get();this._setVisible(!0,e),i&&this._state.get().model.nextGroup(e)}))}prev(){(0,a.Rn)((e=>{this._setVisible(!0,e),this._state.get().model.previousGroup(e)}))}close(){(0,a.Rn)((e=>{this._setVisible(!1,e)}))}};U._ttPolicy=(0,m.H)("diffReview",{createHTML:e=>e}),U=A([F(8,V._Y)],U);let z=class extends d.jG{constructor(e,i,t,o,n){super(),this._diffs=e,this._models=i,this._setVisible=t,this.canClose=o,this._accessibilitySignalService=n,this._groups=(0,a.FY)(this,[]),this._currentGroupIdx=(0,a.FY)(this,0),this._currentElementIdx=(0,a.FY)(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map(((e,i)=>this._groups.read(i)[e])),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map(((e,i)=>{var t;return null===(t=this.currentGroup.read(i))||void 0===t?void 0:t.lines[e]})),this._register((0,a.fm)((e=>{const i=this._diffs.read(e);if(!i)return void this._groups.set([],void 0);const t=function(e,i,t){const o=[];for(const n of(0,p.n)(e,((e,i)=>i.modified.startLineNumber-e.modified.endLineNumberExclusive<2*j))){const e=[];e.push(new Z);const s=new L.M(Math.max(1,n[0].original.startLineNumber-j),Math.min(n[n.length-1].original.endLineNumberExclusive+j,i+1)),r=new L.M(Math.max(1,n[0].modified.startLineNumber-j),Math.min(n[n.length-1].modified.endLineNumberExclusive+j,t+1));(0,p.pN)(n,((i,t)=>{const o=new L.M(i?i.original.endLineNumberExclusive:s.startLineNumber,t?t.original.startLineNumber:s.endLineNumberExclusive),n=new L.M(i?i.modified.endLineNumberExclusive:r.startLineNumber,t?t.modified.startLineNumber:r.endLineNumberExclusive);o.forEach((i=>{e.push(new q(i,n.startLineNumber+(i-o.startLineNumber)))})),t&&(t.original.forEach((i=>{e.push(new Q(t,i))})),t.modified.forEach((i=>{e.push(new Y(t,i))})))}));const d=n[0].modified.join(n[n.length-1].modified),a=n[0].original.join(n[n.length-1].original);o.push(new G(new E.WL(d,a),e))}return o}(i,this._models.getOriginalModel().getLineCount(),this._models.getModifiedModel().getLineCount());(0,a.Rn)((e=>{const i=this._models.getModifiedPosition();if(i){const o=t.findIndex((e=>(null===i||void 0===i?void 0:i.lineNumber)<e.range.modified.endLineNumberExclusive));-1!==o&&this._currentGroupIdx.set(o,e)}this._groups.set(t,e)}))}))),this._register((0,a.fm)((e=>{const i=this.currentElement.read(e);(null===i||void 0===i?void 0:i.type)===K.Deleted?this._accessibilitySignalService.playSignal(P.Rh.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(null===i||void 0===i?void 0:i.type)===K.Added&&this._accessibilitySignalService.playSignal(P.Rh.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})}))),this._register((0,a.fm)((e=>{var i;const t=this.currentElement.read(e);if(t&&t.type!==K.Header){const e=null!==(i=t.modifiedLineNumber)&&void 0!==i?i:t.diff.modified.startLineNumber;this._models.modifiedSetSelection(R.Q.fromPositions(new M.y(e,1)))}})))}_goToGroupDelta(e,i){const t=this.groups.get();!t||t.length<=1||(0,a.PO)(i,(i=>{this._currentGroupIdx.set(S.L.ofLength(t.length).clipCyclic(this._currentGroupIdx.get()+e),i),this._currentElementIdx.set(0,i)}))}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const i=this.currentGroup.get();!i||i.lines.length<=1||(0,a.Rn)((t=>{this._currentElementIdx.set(S.L.ofLength(i.lines.length).clip(this._currentElementIdx.get()+e),t)}))}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const i=this.currentGroup.get();if(!i)return;const t=i.lines.indexOf(e);-1!==t&&(0,a.Rn)((e=>{this._currentElementIdx.set(t,e)}))}revealCurrentElementInEditor(){if(!this.canClose.get())return;this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===K.Deleted?this._models.originalReveal(R.Q.fromPositions(new M.y(e.originalLineNumber,1))):this._models.modifiedReveal(e.type!==K.Header?R.Q.fromPositions(new M.y(e.modifiedLineNumber,1)):void 0))}close(){this.canClose.get()&&(this._setVisible(!1,void 0),this._models.modifiedFocus())}};z=A([F(4,P.Nt)],z);const j=3;var K;!function(e){e[e.Header=0]="Header",e[e.Unchanged=1]="Unchanged",e[e.Deleted=2]="Deleted",e[e.Added=3]="Added"}(K||(K={}));class G{constructor(e,i){this.range=e,this.lines=i}}class Z{constructor(){this.type=K.Header}}class Q{constructor(e,i){this.diff=e,this.originalLineNumber=i,this.type=K.Deleted,this.modifiedLineNumber=void 0}}class Y{constructor(e,i){this.diff=e,this.modifiedLineNumber=i,this.type=K.Added,this.originalLineNumber=void 0}}class q{constructor(e,i){this.originalLineNumber=e,this.modifiedLineNumber=i,this.type=K.Unchanged}}let $=class extends d.jG{constructor(e,i,t,n,s,r){super(),this._element=e,this._model=i,this._width=t,this._height=n,this._models=s,this._languageService=r,this.domNode=this._element,this.domNode.className="monaco-component diff-review monaco-editor-background";const l=document.createElement("div");l.className="diff-review-actions",this._actionBar=this._register(new _.E(l)),this._register((0,a.fm)((e=>{this._actionBar.clear(),this._model.canClose.read(e)&&this._actionBar.push(new v.rc("diffreview.close",(0,O.kg)("label.close","Close"),"close-diff-review "+w.L.asClassName(B),!0,(async()=>i.close())),{label:!1,icon:!0})}))),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new f.MU(this._content,{})),(0,o.Ln)(this.domNode,this._scrollbar.getDomNode(),l),this._register((0,a.fm)((e=>{this._height.read(e),this._width.read(e),this._scrollbar.scanDomNode()}))),this._register((0,d.s)((()=>{(0,o.Ln)(this.domNode)}))),this._register((0,D.AV)(this.domNode,{width:this._width,height:this._height})),this._register((0,D.AV)(this._content,{width:this._width,height:this._height})),this._register((0,a.yC)(((e,i)=>{this._model.currentGroup.read(e),this._render(i)}))),this._register((0,o.b2)(this.domNode,"keydown",(e=>{(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),this._model.goToNextLine()),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),this._model.goToPreviousLine()),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),this._model.close()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),this._model.revealCurrentElementInEditor())})))}_render(e){const i=this._models.getOriginalOptions(),t=this._models.getModifiedOptions(),n=document.createElement("div");n.className="diff-review-table",n.setAttribute("role","list"),n.setAttribute("aria-label",(0,O.kg)("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),(0,C.M)(n,t.get(50)),(0,o.Ln)(this._content,n);const s=this._models.getOriginalModel(),r=this._models.getModifiedModel();if(!s||!r)return;const d=s.getOptions(),l=r.getOptions(),h=t.get(67),c=this._model.currentGroup.get();for(const g of(null===c||void 0===c?void 0:c.lines)||[]){if(!c)break;let u;if(g.type===K.Header){const e=document.createElement("div");e.className="diff-review-row",e.setAttribute("role","listitem");const i=c.range,t=this._model.currentGroupIndex.get(),o=this._model.groups.get().length,n=e=>0===e?(0,O.kg)("no_lines_changed","no lines changed"):1===e?(0,O.kg)("one_line_changed","1 line changed"):(0,O.kg)("more_lines_changed","{0} lines changed",e),s=n(i.original.length),r=n(i.modified.length);e.setAttribute("aria-label",(0,O.kg)({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",t+1,o,i.original.startLineNumber,s,i.modified.startLineNumber,r));const d=document.createElement("div");d.className="diff-review-cell diff-review-summary",d.appendChild(document.createTextNode("".concat(t+1,"/").concat(o,": @@ -").concat(i.original.startLineNumber,",").concat(i.original.length," +").concat(i.modified.startLineNumber,",").concat(i.modified.length," @@"))),e.appendChild(d),u=e}else u=this._createRow(g,h,this._width.get(),i,s,d,t,r,l);n.appendChild(u);const m=(0,a.un)((e=>this._model.currentElement.read(e)===g));e.add((0,a.fm)((e=>{const i=m.read(e);u.tabIndex=i?0:-1,i&&u.focus()}))),e.add((0,o.ko)(u,"focus",(()=>{this._model.goToLine(g)})))}this._scrollbar.scanDomNode()}_createRow(e,i,t,o,n,s,r,d,a){const l=o.get(145),h=l.glyphMarginWidth+l.lineNumbersWidth,c=r.get(145),g=10+c.glyphMarginWidth+c.lineNumbersWidth;let u="diff-review-row",m="";let _=null;switch(e.type){case K.Added:u="diff-review-row line-insert",m=" char-insert",_=k;break;case K.Deleted:u="diff-review-row line-delete",m=" char-delete",_=H}const f=document.createElement("div");f.style.minWidth=t+"px",f.className=u,f.setAttribute("role","listitem"),f.ariaLevel="";const v=document.createElement("div");v.className="diff-review-cell",v.style.height="".concat(i,"px"),f.appendChild(v);const p=document.createElement("span");p.style.width=h+"px",p.style.minWidth=h+"px",p.className="diff-review-line-number"+m,void 0!==e.originalLineNumber?p.appendChild(document.createTextNode(String(e.originalLineNumber))):p.innerText="\xa0",v.appendChild(p);const b=document.createElement("span");b.style.width=g+"px",b.style.minWidth=g+"px",b.style.paddingRight="10px",b.className="diff-review-line-number"+m,void 0!==e.modifiedLineNumber?b.appendChild(document.createTextNode(String(e.modifiedLineNumber))):b.innerText="\xa0",v.appendChild(b);const C=document.createElement("span");if(C.className="diff-review-spacer",_){const e=document.createElement("span");e.className=w.L.asClassName(_),e.innerText="\xa0\xa0",C.appendChild(e)}else C.innerText="\xa0\xa0";let D;if(v.appendChild(C),void 0!==e.modifiedLineNumber){let i=this._getLineHtml(d,r,a.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);U._ttPolicy&&(i=U._ttPolicy.createHTML(i)),v.insertAdjacentHTML("beforeend",i),D=d.getLineContent(e.modifiedLineNumber)}else{let i=this._getLineHtml(n,o,s.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);U._ttPolicy&&(i=U._ttPolicy.createHTML(i)),v.insertAdjacentHTML("beforeend",i),D=n.getLineContent(e.originalLineNumber)}0===D.length&&(D=(0,O.kg)("blankLine","blank"));let y="";switch(e.type){case K.Unchanged:y=e.originalLineNumber===e.modifiedLineNumber?(0,O.kg)({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",D,e.originalLineNumber):(0,O.kg)("equalLine","{0} original line {1} modified line {2}",D,e.originalLineNumber,e.modifiedLineNumber);break;case K.Added:y=(0,O.kg)("insertLine","+ {0} modified line {1}",D,e.modifiedLineNumber);break;case K.Deleted:y=(0,O.kg)("deleteLine","- {0} original line {1}",D,e.originalLineNumber)}return f.setAttribute("aria-label",y),f}_getLineHtml(e,i,t,o,n){const s=e.getLineContent(o),r=i.get(50),d=I.f.createEmpty(s,n),a=x.qL.isBasicASCII(s,e.mightContainNonBasicASCII()),l=x.qL.containsRTL(s,a,e.mightContainRTL());return(0,T.Md)(new T.zL(r.isMonospace&&!i.get(33),r.canUseHalfwidthRightwardsArrow,s,!1,a,l,0,d,[],t,0,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,i.get(117),i.get(99),i.get(94),i.get(51)!==y.Bc.OFF,null)).html}};$=A([F(5,N.L)],$);class X{constructor(e){this.editors=e}getOriginalModel(){return this.editors.original.getModel()}getOriginalOptions(){return this.editors.original.getOptions()}originalReveal(e){this.editors.original.revealRange(e),this.editors.original.setSelection(e),this.editors.original.focus()}getModifiedModel(){return this.editors.modified.getModel()}getModifiedOptions(){return this.editors.modified.getOptions()}modifiedReveal(e){e&&(this.editors.modified.revealRange(e),this.editors.modified.setSelection(e)),this.editors.modified.focus()}modifiedSetSelection(e){this.editors.modified.setSelection(e)}modifiedFocus(){this.editors.modified.focus()}getModifiedPosition(){var e;return null!==(e=this.editors.modified.getPosition())&&void 0!==e?e:void 0}}class J extends d.jG{constructor(e,i,t,o,n){super(),this._rootElement=e,this._diffModel=i,this._originalEditorLayoutInfo=t,this._modifiedEditorLayoutInfo=o,this._editors=n,this._originalScrollTop=(0,a.y0)(this._editors.original.onDidScrollChange,(()=>this._editors.original.getScrollTop())),this._modifiedScrollTop=(0,a.y0)(this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollTop())),this._viewZonesChanged=(0,a.yQ)("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=(0,a.FY)(this,0),this._modifiedViewZonesChangedSignal=(0,a.yQ)("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=(0,a.yQ)("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=(0,a.rm)(this,((e,i)=>{var t;this._element.replaceChildren();const o=this._diffModel.read(e),n=null===(t=null===o||void 0===o?void 0:o.diff.read(e))||void 0===t?void 0:t.movedTexts;if(!n||0===n.length)return void this.width.set(0,void 0);this._viewZonesChanged.read(e);const s=this._originalEditorLayoutInfo.read(e),r=this._modifiedEditorLayoutInfo.read(e);if(!s||!r)return void this.width.set(0,void 0);this._modifiedViewZonesChangedSignal.read(e),this._originalViewZonesChangedSignal.read(e);const d=n.map((i=>{function t(e,i){return(i.getTopForLineNumber(e.startLineNumber,!0)+i.getTopForLineNumber(e.endLineNumberExclusive,!0))/2}const o=t(i.lineRangeMapping.original,this._editors.original),n=this._originalScrollTop.read(e),s=t(i.lineRangeMapping.modified,this._editors.modified),r=o-n,d=s-this._modifiedScrollTop.read(e),a=Math.min(o,s),l=Math.max(o,s);return{range:new S.L(a,l),from:r,to:d,fromWithoutScroll:o,toWithoutScroll:s,move:i}}));d.sort((0,p.nH)((0,p.VE)((e=>e.fromWithoutScroll>e.toWithoutScroll),p.TS),(0,p.VE)((e=>e.fromWithoutScroll>e.toWithoutScroll?e.fromWithoutScroll:-e.toWithoutScroll),p.U9)));const l=ee.compute(d.map((e=>e.range))),h=s.verticalScrollbarWidth,c=10*(l.getTrackCount()-1)+20,g=h+c+(r.contentLeft-J.movedCodeBlockPadding);let u=0;for(const m of d){const e=h+10+10*l.getTrack(u),t=15,n=15,s=g,d=r.glyphMarginWidth+r.lineNumbersWidth,c=18,_=document.createElementNS("http://www.w3.org/2000/svg","rect");_.classList.add("arrow-rectangle"),_.setAttribute("x","".concat(s-d)),_.setAttribute("y","".concat(m.to-c/2)),_.setAttribute("width","".concat(d)),_.setAttribute("height","".concat(c)),this._element.appendChild(_);const f=document.createElementNS("http://www.w3.org/2000/svg","g"),v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d","M ".concat(0," ",m.from," L ").concat(e," ").concat(m.from," L ").concat(e," ").concat(m.to," L ").concat(s-n," ").concat(m.to)),v.setAttribute("fill","none"),f.appendChild(v);const p=document.createElementNS("http://www.w3.org/2000/svg","polygon");p.classList.add("arrow"),i.add((0,a.fm)((e=>{v.classList.toggle("currentMove",m.move===o.activeMovedText.read(e)),p.classList.toggle("currentMove",m.move===o.activeMovedText.read(e))}))),p.setAttribute("points","".concat(s-n,",").concat(m.to-t/2," ").concat(s,",").concat(m.to," ").concat(s-n,",").concat(m.to+t/2)),f.appendChild(p),this._element.appendChild(f),u++}this.width.set(c,void 0)})),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register((0,d.s)((()=>this._element.remove()))),this._register((0,a.fm)((e=>{const i=this._originalEditorLayoutInfo.read(e),t=this._modifiedEditorLayoutInfo.read(e);i&&t&&(this._element.style.left="".concat(i.width-i.verticalScrollbarWidth,"px"),this._element.style.height="".concat(i.height,"px"),this._element.style.width="".concat(i.verticalScrollbarWidth+i.contentLeft-J.movedCodeBlockPadding+this.width.read(e),"px"))}))),this._register((0,a.OI)(this._state));const s=(0,a.un)((e=>{const i=this._diffModel.read(e),t=null===i||void 0===i?void 0:i.diff.read(e);return t?t.movedTexts.map((e=>({move:e,original:new D.D1((0,a.lk)(e.lineRangeMapping.original.startLineNumber-1),18),modified:new D.D1((0,a.lk)(e.lineRangeMapping.modified.startLineNumber-1),18)}))):[]}));this._register((0,D.Vs)(this._editors.original,s.map((e=>e.map((e=>e.original)))))),this._register((0,D.Vs)(this._editors.modified,s.map((e=>e.map((e=>e.modified)))))),this._register((0,a.yC)(((e,i)=>{const t=s.read(e);for(const o of t)i.add(new ie(this._editors.original,o.original,o.move,"original",this._diffModel.get())),i.add(new ie(this._editors.modified,o.modified,o.move,"modified",this._diffModel.get()))})));const r=(0,a.yQ)("original.onDidFocusEditorWidget",(e=>this._editors.original.onDidFocusEditorWidget((()=>setTimeout((()=>e(void 0)),0))))),l=(0,a.yQ)("modified.onDidFocusEditorWidget",(e=>this._editors.modified.onDidFocusEditorWidget((()=>setTimeout((()=>e(void 0)),0)))));let h="modified";this._register((0,a.Y)({createEmptyChangeSummary:()=>{},handleChange:(e,i)=>(e.didChange(r)&&(h="original"),e.didChange(l)&&(h="modified"),!0)},(e=>{r.read(e),l.read(e);const i=this._diffModel.read(e);if(!i)return;const t=i.diff.read(e);let o;if(t&&"original"===h){const i=this._editors.originalCursor.read(e);i&&(o=t.movedTexts.find((e=>e.lineRangeMapping.original.contains(i.lineNumber))))}if(t&&"modified"===h){const i=this._editors.modifiedCursor.read(e);i&&(o=t.movedTexts.find((e=>e.lineRangeMapping.modified.contains(i.lineNumber))))}o!==i.movedTextToCompare.get()&&i.movedTextToCompare.set(void 0,void 0),i.setActiveMovedText(o)})))}}J.movedCodeBlockPadding=4;class ee{static compute(e){const i=[],t=[];for(const o of e){let e=i.findIndex((e=>!e.intersectsStrict(o)));if(-1===e){const t=6;i.length>=t?e=(0,n.TM)(i,(0,p.VE)((e=>e.intersectWithRangeLength(o)),p.U9)):(e=i.length,i.push(new S.h))}i[e].addRange(o),t.push(e)}return new ee(i.length,t)}constructor(e,i){this._trackCount=e,this.trackPerLineIdx=i}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class ie extends D.uN{constructor(e,i,t,n,s){const r=(0,o.h)("div.diff-hidden-lines-widget");super(e,i,r.root),this._editor=e,this._move=t,this._kind=n,this._diffModel=s,this._nodes=(0,o.h)("div.diff-moved-code-block",{style:{marginRight:"4px"}},[(0,o.h)("div.text-content@textContent"),(0,o.h)("div.action-bar@actionBar")]),r.root.appendChild(this._nodes.root);const d=(0,a.y0)(this._editor.onDidLayoutChange,(()=>this._editor.getLayoutInfo()));let l;this._register((0,D.AV)(this._nodes.root,{paddingRight:d.map((e=>e.verticalScrollbarWidth))})),l=t.changes.length>0?"original"===this._kind?(0,O.kg)("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,O.kg)("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):"original"===this._kind?(0,O.kg)("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,O.kg)("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const h=this._register(new _.E(this._nodes.actionBar,{highlightToggledItems:!0})),c=new v.rc("",l,"",!1);h.push(c,{icon:!1,label:!0});const g=new v.rc("","Compare",w.L.asClassName(b.W.compareChanges),!0,(()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===t?void 0:this._move,void 0)}));this._register((0,a.fm)((e=>{const i=this._diffModel.movedTextToCompare.read(e)===t;g.checked=i}))),h.push(g,{icon:!1,label:!0})}}var te=t(73109);class oe extends d.jG{constructor(e,i,t,o){super(),this._editors=e,this._diffModel=i,this._options=t,this._decorations=(0,a.un)(this,(e=>{var i;const t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.diff.read(e);if(!t)return null;const o=this._diffModel.read(e).movedTextToCompare.read(e),n=this._options.renderIndicators.read(e),s=this._options.showEmptyDecorations.read(e),r=[],d=[];if(!o)for(const l of t.mappings)if(l.lineRangeMapping.original.isEmpty||r.push({range:l.lineRangeMapping.original.toInclusiveRange(),options:n?te.Ob:te.XT}),l.lineRangeMapping.modified.isEmpty||d.push({range:l.lineRangeMapping.modified.toInclusiveRange(),options:n?te.Kl:te.Zw}),l.lineRangeMapping.modified.isEmpty||l.lineRangeMapping.original.isEmpty)l.lineRangeMapping.original.isEmpty||r.push({range:l.lineRangeMapping.original.toInclusiveRange(),options:te.KL}),l.lineRangeMapping.modified.isEmpty||d.push({range:l.lineRangeMapping.modified.toInclusiveRange(),options:te.Ou});else for(const e of l.lineRangeMapping.innerChanges||[])l.lineRangeMapping.original.contains(e.originalRange.startLineNumber)&&r.push({range:e.originalRange,options:e.originalRange.isEmpty()&&s?te.wp:te.Zb}),l.lineRangeMapping.modified.contains(e.modifiedRange.startLineNumber)&&d.push({range:e.modifiedRange,options:e.modifiedRange.isEmpty()&&s?te.GM:te.bk});if(o)for(const l of o.changes){const e=l.original.toInclusiveRange();e&&r.push({range:e,options:n?te.Ob:te.XT});const i=l.modified.toInclusiveRange();i&&d.push({range:i,options:n?te.Kl:te.Zw});for(const t of l.innerChanges||[])r.push({range:t.originalRange,options:te.Zb}),d.push({range:t.modifiedRange,options:te.bk})}const a=this._diffModel.read(e).activeMovedText.read(e);for(const l of t.movedTexts)r.push({range:l.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(l===a?" currentMove":""),blockPadding:[J.movedCodeBlockPadding,0,J.movedCodeBlockPadding,J.movedCodeBlockPadding]}}),d.push({range:l.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(l===a?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:r,modifiedDecorations:d}})),this._register((0,D.pY)(this._editors.original,this._decorations.map((e=>(null===e||void 0===e?void 0:e.originalDecorations)||[])))),this._register((0,D.pY)(this._editors.modified,this._decorations.map((e=>(null===e||void 0===e?void 0:e.modifiedDecorations)||[]))))}}var ne=t(8558);class se extends d.jG{constructor(e,i,t,o){super(),this._options=e,this._domNode=i,this._dimensions=t,this._sashes=o,this._sashRatio=(0,a.FY)(this,void 0),this.sashLeft=(0,a.un)(this,(e=>{var i;const t=null!==(i=this._sashRatio.read(e))&&void 0!==i?i:this._options.splitViewDefaultRatio.read(e);return this._computeSashLeft(t,e)})),this._sash=this._register(new ne.m(this._domNode,{getVerticalSashTop:e=>0,getVerticalSashLeft:e=>this.sashLeft.get(),getVerticalSashHeight:e=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart((()=>{this._startSashPosition=this.sashLeft.get()}))),this._register(this._sash.onDidChange((e=>{const i=this._dimensions.width.get(),t=this._computeSashLeft((this._startSashPosition+(e.currentX-e.startX))/i,void 0);this._sashRatio.set(t/i,void 0)}))),this._register(this._sash.onDidEnd((()=>this._sash.layout()))),this._register(this._sash.onDidReset((()=>this._sashRatio.set(void 0,void 0)))),this._register((0,a.fm)((e=>{const i=this._sashes.read(e);i&&(this._sash.orthogonalEndSash=i.bottom)}))),this._register((0,a.fm)((e=>{const i=this._options.enableSplitViewResizing.read(e);this._sash.state=i?3:0,this.sashLeft.read(e),this._dimensions.height.read(e),this._sash.layout()})))}_computeSashLeft(e,i){const t=this._dimensions.width.read(i),o=Math.floor(this._options.splitViewDefaultRatio.read(i)*t),n=this._options.enableSplitViewResizing.read(i)?Math.floor(e*t):o,s=100;return t<=200?o:n<s?s:n>t-s?t-s:n}}var re,de=t(78112),ae=t(14945),le=t(53069),he=t(26528),ce=t(40331),ge=t(63786),ue=t(457),me=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},_e=function(e,i){return function(t,o){i(t,o,e)}};const fe=(0,V.u1)("diffProviderFactoryService");let ve=class{constructor(e){this.instantiationService=e}createDiffProvider(e){return this.instantiationService.createInstance(pe,e)}};ve=me([_e(0,V._Y)],ve),(0,he.v)(fe,ve,1);let pe=re=class{constructor(e,i,t){this.editorWorkerService=i,this.telemetryService=t,this.onDidChangeEventEmitter=new r.vl,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;null===(e=this.diffAlgorithmOnDidChangeSubscription)||void 0===e||e.dispose()}async computeDiff(e,i,t,o){var n,s;if("string"!==typeof this.diffAlgorithm)return this.diffAlgorithm.computeDiff(e,i,t,o);if(e.isDisposed()||i.isDisposed())return{changes:[],identical:!0,quitEarly:!1,moves:[]};if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return 1===i.getLineCount()&&1===i.getLineMaxColumn(1)?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new E.wm(new L.M(1,2),new L.M(1,i.getLineCount()+1),[new E.q6(e.getFullModelRange(),i.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const r=JSON.stringify([e.uri.toString(),i.uri.toString()]),d=JSON.stringify([e.id,i.id,e.getAlternativeVersionId(),i.getAlternativeVersionId(),JSON.stringify(t)]),a=re.diffCache.get(r);if(a&&a.context===d)return a.result;const l=ce.W.create(),h=await this.editorWorkerService.computeDiff(e.uri,i.uri,t,this.diffAlgorithm),c=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:c,timedOut:null===(n=null===h||void 0===h?void 0:h.quitEarly)||void 0===n||n,detectedMoves:t.computeMoves?null!==(s=null===h||void 0===h?void 0:h.moves.length)&&void 0!==s?s:0:-1}),o.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!h)throw new Error("no diff result available");return re.diffCache.size>10&&re.diffCache.delete(re.diffCache.keys().next().value),re.diffCache.set(r,{result:h,context:d}),h}setOptions(e){var i;let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&(null===(i=this.diffAlgorithmOnDidChangeSubscription)||void 0===i||i.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,"string"!==typeof e.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange((()=>this.onDidChangeEventEmitter.fire()))),t=!0),t&&this.onDidChangeEventEmitter.fire()}};pe.diffCache=new Map,pe=re=me([_e(1,ge.w),_e(2,ue.k)],pe);var be=t(84600),we=t(2160),Ce=t(20478),De=t(57204),ye=t(29076),Le=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},Se=function(e,i){return function(t,o){i(t,o,e)}};let Me=class extends d.jG{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,i,t){super(),this.model=e,this._options=i,this._diffProviderFactoryService=t,this._isDiffUpToDate=(0,a.FY)(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=(0,a.FY)(this,void 0),this.diff=this._diff,this._unchangedRegions=(0,a.FY)(this,void 0),this.unchangedRegions=(0,a.un)(this,(e=>{var i,t;return this._options.hideUnchangedRegions.read(e)?null!==(t=null===(i=this._unchangedRegions.read(e))||void 0===i?void 0:i.regions)&&void 0!==t?t:[]:((0,a.Rn)((e=>{var i;for(const t of(null===(i=this._unchangedRegions.get())||void 0===i?void 0:i.regions)||[])t.collapseAll(e)})),[])})),this.movedTextToCompare=(0,a.FY)(this,void 0),this._activeMovedText=(0,a.FY)(this,void 0),this._hoveredMovedText=(0,a.FY)(this,void 0),this.activeMovedText=(0,a.un)(this,(e=>{var i,t;return null!==(t=null!==(i=this.movedTextToCompare.read(e))&&void 0!==i?i:this._hoveredMovedText.read(e))&&void 0!==t?t:this._activeMovedText.read(e)})),this._cancellationTokenSource=new le.Qi,this._diffProvider=(0,a.un)(this,(e=>{const i=this._diffProviderFactoryService.createDiffProvider({diffAlgorithm:this._options.diffAlgorithm.read(e)});return{diffProvider:i,onChangeSignal:(0,a.yQ)("onDidChange",i.onDidChange)}})),this._register((0,d.s)((()=>this._cancellationTokenSource.cancel())));const o=(0,a.Yd)("contentChangedSignal"),n=this._register(new de.uC((()=>o.trigger(void 0)),200));this._register((0,a.fm)((i=>{const t=this._unchangedRegions.read(i);if(!t||t.regions.some((e=>e.isDragged.read(i))))return;const o=t.originalDecorationIds.map((i=>e.original.getDecorationRange(i))).map((e=>e?L.M.fromRangeInclusive(e):void 0)),n=t.modifiedDecorationIds.map((i=>e.modified.getDecorationRange(i))).map((e=>e?L.M.fromRangeInclusive(e):void 0)),s=t.regions.map(((e,t)=>o[t]&&n[t]?new Ne(o[t].startLineNumber,n[t].startLineNumber,o[t].length,e.visibleLineCountTop.read(i),e.visibleLineCountBottom.read(i)):void 0)).filter(ae.O9),r=[];let d=!1;for(const e of(0,p.n)(s,((e,t)=>e.getHiddenModifiedRange(i).endLineNumberExclusive===t.getHiddenModifiedRange(i).startLineNumber)))if(e.length>1){d=!0;const i=e.reduce(((e,i)=>e+i.lineCount),0),t=new Ne(e[0].originalLineNumber,e[0].modifiedLineNumber,i,e[0].visibleLineCountTop.get(),e[e.length-1].visibleLineCountBottom.get());r.push(t)}else r.push(e[0]);if(d){const i=e.original.deltaDecorations(t.originalDecorationIds,r.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})))),o=e.modified.deltaDecorations(t.modifiedDecorationIds,r.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))));(0,a.Rn)((e=>{this._unchangedRegions.set({regions:r,originalDecorationIds:i,modifiedDecorationIds:o},e)}))}})));const s=(i,t,o)=>{const n=Ne.fromDiffs(i.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(o),this._options.hideUnchangedRegionsContextLineCount.read(o));let s;const r=this._unchangedRegions.get();if(r){const i=r.originalDecorationIds.map((i=>e.original.getDecorationRange(i))).map((e=>e?L.M.fromRangeInclusive(e):void 0)),t=r.modifiedDecorationIds.map((i=>e.modified.getDecorationRange(i))).map((e=>e?L.M.fromRangeInclusive(e):void 0));let n=(0,D.EK)(r.regions.map(((e,o)=>{if(!i[o]||!t[o])return;const n=i[o].length;return new Ne(i[o].startLineNumber,t[o].startLineNumber,n,Math.min(e.visibleLineCountTop.get(),n),Math.min(e.visibleLineCountBottom.get(),n-e.visibleLineCountTop.get()))})).filter(ae.O9),((e,i)=>!i||e.modifiedLineNumber>=i.modifiedLineNumber+i.lineCount&&e.originalLineNumber>=i.originalLineNumber+i.lineCount)).map((e=>new E.WL(e.getHiddenOriginalRange(o),e.getHiddenModifiedRange(o))));n=E.WL.clip(n,L.M.ofLength(1,e.original.getLineCount()),L.M.ofLength(1,e.modified.getLineCount())),s=E.WL.inverse(n,e.original.getLineCount(),e.modified.getLineCount())}const d=[];if(s)for(const e of n){const i=s.filter((i=>i.original.intersectsStrict(e.originalUnchangedRange)&&i.modified.intersectsStrict(e.modifiedUnchangedRange)));d.push(...e.setVisibleRanges(i,t))}else d.push(...n);const a=e.original.deltaDecorations((null===r||void 0===r?void 0:r.originalDecorationIds)||[],d.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})))),l=e.modified.deltaDecorations((null===r||void 0===r?void 0:r.modifiedDecorationIds)||[],d.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))));this._unchangedRegions.set({regions:d,originalDecorationIds:a,modifiedDecorationIds:l},t)};this._register(e.modified.onDidChangeContent((i=>{if(this._diff.get()){const t=we.c.fromModelContentChanges(i.changes),o=Te(this._lastDiff,t,e.original,e.modified);o&&(this._lastDiff=o,(0,a.Rn)((e=>{this._diff.set(Re.fromDiffResult(this._lastDiff),e),s(o,e);const i=this.movedTextToCompare.get();this.movedTextToCompare.set(i?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(i.lineRangeMapping.modified))):void 0,e)})))}this._isDiffUpToDate.set(!1,void 0),n.schedule()}))),this._register(e.original.onDidChangeContent((i=>{if(this._diff.get()){const t=we.c.fromModelContentChanges(i.changes),o=Ie(this._lastDiff,t,e.original,e.modified);o&&(this._lastDiff=o,(0,a.Rn)((e=>{this._diff.set(Re.fromDiffResult(this._lastDiff),e),s(o,e);const i=this.movedTextToCompare.get();this.movedTextToCompare.set(i?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(i.lineRangeMapping.modified))):void 0,e)})))}this._isDiffUpToDate.set(!1,void 0),n.schedule()}))),this._register((0,a.yC)((async(i,t)=>{var r,d;this._options.hideUnchangedRegionsMinimumLineCount.read(i),this._options.hideUnchangedRegionsContextLineCount.read(i),n.cancel(),o.read(i);const l=this._diffProvider.read(i);l.onChangeSignal.read(i),(0,D.b6)(be.D8,i),(0,D.b6)(De.NC,i),this._isDiffUpToDate.set(!1,void 0);let h=[];t.add(e.original.onDidChangeContent((e=>{const i=we.c.fromModelContentChanges(e.changes);h=(0,Ce.M)(h,i)})));let c=[];t.add(e.modified.onDidChangeContent((e=>{const i=we.c.fromModelContentChanges(e.changes);c=(0,Ce.M)(c,i)})));let g=await l.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(i),maxComputationTimeMs:this._options.maxComputationTimeMs.read(i),computeMoves:this._options.showMoves.read(i)},this._cancellationTokenSource.token);var u,m,_;this._cancellationTokenSource.token.isCancellationRequested||(e.original.isDisposed()||e.modified.isDisposed()||(u=g,m=e.original,_=e.modified,g={changes:u.changes.map((e=>new E.wm(e.original,e.modified,e.innerChanges?e.innerChanges.map((e=>function(e,i,t){let o=e.originalRange,n=e.modifiedRange;return(1!==o.endColumn||1!==n.endColumn)&&o.endColumn===i.getLineMaxColumn(o.endLineNumber)&&n.endColumn===t.getLineMaxColumn(n.endLineNumber)&&o.endLineNumber<i.getLineCount()&&n.endLineNumber<t.getLineCount()&&(o=o.setEndPosition(o.endLineNumber+1,1),n=n.setEndPosition(n.endLineNumber+1,1)),new E.q6(o,n)}(e,m,_))):void 0))),moves:u.moves,identical:u.identical,quitEarly:u.quitEarly},g=null!==(r=Ie(g,h,e.original,e.modified))&&void 0!==r?r:g,g=null!==(d=Te(g,c,e.original,e.modified))&&void 0!==d?d:g,(0,a.Rn)((e=>{s(g,e),this._lastDiff=g;const i=Re.fromDiffResult(g);this._diff.set(i,e),this._isDiffUpToDate.set(!0,e);const t=this.movedTextToCompare.get();this.movedTextToCompare.set(t?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(t.lineRangeMapping.modified))):void 0,e)}))))})))}ensureModifiedLineIsVisible(e,i,t){var o,n;if(0===(null===(o=this.diff.get())||void 0===o?void 0:o.mappings.length))return;const s=(null===(n=this._unchangedRegions.get())||void 0===n?void 0:n.regions)||[];for(const r of s)if(r.getHiddenModifiedRange(void 0).contains(e))return void r.showModifiedLine(e,i,t)}ensureOriginalLineIsVisible(e,i,t){var o,n;if(0===(null===(o=this.diff.get())||void 0===o?void 0:o.mappings.length))return;const s=(null===(n=this._unchangedRegions.get())||void 0===n?void 0:n.regions)||[];for(const r of s)if(r.getHiddenOriginalRange(void 0).contains(e))return void r.showOriginalLine(e,i,t)}async waitForDiff(){await(0,a.oJ)(this.isDiffUpToDate,(e=>e))}serializeState(){const e=this._unchangedRegions.get();return{collapsedRegions:null===e||void 0===e?void 0:e.regions.map((e=>({range:e.getHiddenModifiedRange(void 0).serialize()})))}}restoreSerializedState(e){var i;const t=null===(i=e.collapsedRegions)||void 0===i?void 0:i.map((e=>L.M.deserialize(e.range))),o=this._unchangedRegions.get();o&&t&&(0,a.Rn)((e=>{for(const i of o.regions)for(const o of t)if(i.modifiedUnchangedRange.intersect(o)){i.setHiddenModifiedRange(o,e);break}}))}};Me=Le([Se(2,fe)],Me);class Re{static fromDiffResult(e){return new Re(e.changes.map((e=>new Ee(e))),e.moves||[],e.identical,e.quitEarly)}constructor(e,i,t,o){this.mappings=e,this.movedTexts=i,this.identical=t,this.quitEarly=o}}class Ee{constructor(e){this.lineRangeMapping=e}}class Ne{static fromDiffs(e,i,t,o,n){const s=E.wm.inverse(e,i,t),r=[];for(const d of s){let e=d.original.startLineNumber,s=d.modified.startLineNumber,a=d.original.length;const l=1===e&&1===s,h=e+a===i+1&&s+a===t+1;(l||h)&&a>=n+o?(l&&!h&&(a-=n),h&&!l&&(e+=n,s+=n,a-=n),r.push(new Ne(e,s,a,0,0))):a>=2*n+o&&(e+=n,s+=n,a-=2*n,r.push(new Ne(e,s,a,0,0)))}return r}get originalUnchangedRange(){return L.M.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return L.M.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,i,t,o,n){this.originalLineNumber=e,this.modifiedLineNumber=i,this.lineCount=t,this._visibleLineCountTop=(0,a.FY)(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=(0,a.FY)(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=(0,a.un)(this,(e=>this.visibleLineCountTop.read(e)+this.visibleLineCountBottom.read(e)===this.lineCount&&!this.isDragged.read(e))),this.isDragged=(0,a.FY)(this,void 0);const s=Math.max(Math.min(o,this.lineCount),0),r=Math.max(Math.min(n,this.lineCount-o),0);(0,ye.V7)(o===s),(0,ye.V7)(n===r),this._visibleLineCountTop.set(s,void 0),this._visibleLineCountBottom.set(r,void 0)}setVisibleRanges(e,i){const t=[],o=new L.S(e.map((e=>e.modified))).subtractFrom(this.modifiedUnchangedRange);let n=this.originalLineNumber,s=this.modifiedLineNumber;const r=this.modifiedLineNumber+this.lineCount;if(0===o.ranges.length)this.showAll(i),t.push(this);else{let e=0;for(const d of o.ranges){const a=e===o.ranges.length-1;e++;const l=(a?r:d.endLineNumberExclusive)-s,h=new Ne(n,s,l,0,0);h.setHiddenModifiedRange(d,i),t.push(h),n=h.originalUnchangedRange.endLineNumberExclusive,s=h.modifiedUnchangedRange.endLineNumberExclusive}}return t}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return L.M.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return L.M.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,i){const t=e.startLineNumber-this.modifiedLineNumber,o=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(t,o,i)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1?arguments[1]:void 0;const t=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,t),i)}showMoreBelow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1?arguments[1]:void 0;const t=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,t),i)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,i,t){const o=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),n=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;0===i&&o<n||1===i?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+o,t):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+n,t)}showOriginalLine(e,i,t){const o=e-this.originalLineNumber,n=this.originalLineNumber+this.lineCount-e;0===i&&o<n||1===i?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+n-o,this.getMaxVisibleLineCountTop()),t):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+o-n,this.getMaxVisibleLineCountBottom()),t)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,i,t){e=Math.max(Math.min(e,this.lineCount),0),i=Math.max(Math.min(i,this.lineCount-e),0),this._visibleLineCountTop.set(e,t),this._visibleLineCountBottom.set(i,t)}}function Ie(e,i,t,o){}function Te(e,i,t,o){}var xe=t(22057);class Oe extends d.jG{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,i,t,n,s,r,d,a,l){super(),this._getViewZoneId=e,this._marginDomNode=i,this._modifiedEditor=t,this._diff=n,this._editor=s,this._viewLineCounts=r,this._originalTextModel=d,this._contextMenuService=a,this._clipboardService=l,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=w.L.asClassName(b.W.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const h=this._modifiedEditor.getOption(67);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height="".concat(h,"px"),this._diffActions.style.lineHeight="".concat(h,"px"),this._marginDomNode.appendChild(this._diffActions);let c=0;const g=t.getOption(127)&&!xe.un,u=(e,i)=>{var o;this._contextMenuService.showContextMenu({domForShadowRoot:g&&null!==(o=t.getDomNode())&&void 0!==o?o:void 0,getAnchor:()=>({x:e,y:i}),getActions:()=>{const e=[],i=n.modified.isEmpty;e.push(new v.rc("diff.clipboard.copyDeletedContent",i?n.original.length>1?(0,O.kg)("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):(0,O.kg)("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):n.original.length>1?(0,O.kg)("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):(0,O.kg)("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,(async()=>{const e=this._originalTextModel.getValueInRange(n.original.toExclusiveRange());await this._clipboardService.writeText(e)}))),n.original.length>1&&e.push(new v.rc("diff.clipboard.copyDeletedLineContent",i?(0,O.kg)("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",n.original.startLineNumber+c):(0,O.kg)("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",n.original.startLineNumber+c),void 0,!0,(async()=>{let e=this._originalTextModel.getLineContent(n.original.startLineNumber+c);if(""===e){e=0===this._originalTextModel.getEndOfLineSequence()?"\n":"\r\n"}await this._clipboardService.writeText(e)})));return t.getOption(91)||e.push(new v.rc("diff.inline.revertChange",(0,O.kg)("diff.inline.revertChange.label","Revert this change"),void 0,!0,(async()=>{this._editor.revert(this._diff)}))),e},autoSelectFirstItem:!0})};this._register((0,o.b2)(this._diffActions,"mousedown",(e=>{if(!e.leftButton)return;const{top:i,height:t}=(0,o.BK)(this._diffActions),n=Math.floor(h/3);e.preventDefault(),u(e.posx,i+t+n)}))),this._register(t.onMouseMove((e=>{8!==e.target.type&&5!==e.target.type||e.target.detail.viewZoneId!==this._getViewZoneId()?this.visibility=!1:(c=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,h),this.visibility=!0)}))),this._register(t.onMouseDown((e=>{if(e.event.leftButton&&(8===e.target.type||5===e.target.type)){e.target.detail.viewZoneId===this._getViewZoneId()&&(e.event.preventDefault(),c=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,h),u(e.event.posx,e.event.posy+h))}})))}_updateLightBulbPosition(e,i,t){const{top:n}=(0,o.BK)(e),s=i-n,r=Math.floor(s/t),d=r*t;if(this._diffActions.style.top="".concat(d,"px"),this._viewLineCounts){let e=0;for(let i=0;i<this._viewLineCounts.length;i++)if(e+=this._viewLineCounts[i],r<e)return i}return r}}var Pe=t(1566),Ve=t(5551);const We=(0,m.H)("diffEditorWidget",{createHTML:e=>e});function Ae(e,i,t,o){(0,C.M)(o,i.fontInfo);const n=t.length>0,s=new Pe.fe(1e4);let r=0,d=0;const a=[];for(let c=0;c<e.lineTokens.length;c++){const o=c+1,l=e.lineTokens[c],h=e.lineBreakData[c],g=Ve.d.filter(t,o,1,Number.MAX_SAFE_INTEGER);if(h){let t=0;for(const o of h.breakOffsets){const a=l.sliceAndInflate(t,o,0);r=Math.max(r,He(d,a,Ve.d.extractWrapped(g,t,o),n,e.mightContainNonBasicASCII,e.mightContainRTL,i,s)),d++,t=o}a.push(h.breakOffsets.length)}else a.push(1),r=Math.max(r,He(d,l,g,n,e.mightContainNonBasicASCII,e.mightContainRTL,i,s)),d++}r+=i.scrollBeyondLastColumn;const l=s.build(),h=We?We.createHTML(l):l;o.innerHTML=h;return{heightInLines:d,minWidthInPx:r*i.typicalHalfwidthCharacterWidth,viewLineCounts:a}}class Fe{constructor(e,i,t,o){this.lineTokens=e,this.lineBreakData=i,this.mightContainNonBasicASCII=t,this.mightContainRTL=o}}class ke{static fromEditor(e){var i;const t=e.getOptions(),o=t.get(50),n=t.get(145);return new ke((null===(i=e.getModel())||void 0===i?void 0:i.getOptions().tabSize)||0,o,t.get(33),o.typicalHalfwidthCharacterWidth,t.get(104),t.get(67),n.decorationsWidth,t.get(117),t.get(99),t.get(94),t.get(51))}constructor(e,i,t,o,n,s,r,d,a,l,h){this.tabSize=e,this.fontInfo=i,this.disableMonospaceOptimizations=t,this.typicalHalfwidthCharacterWidth=o,this.scrollBeyondLastColumn=n,this.lineHeight=s,this.lineDecorationsWidth=r,this.stopRenderingLineAfter=d,this.renderWhitespace=a,this.renderControlCharacters=l,this.fontLigatures=h}}function He(e,i,t,o,n,s,r,d){d.appendString('<div class="view-line'),o||d.appendString(" char-delete"),d.appendString('" style="top:'),d.appendString(String(e*r.lineHeight)),d.appendString('px;width:1000000px;">');const a=i.getLineContent(),l=x.qL.isBasicASCII(a,n),h=x.qL.containsRTL(a,l,s),c=(0,T.UW)(new T.zL(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,a,!1,l,h,0,i,t,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==y.Bc.OFF,null),d);return d.appendString("</div>"),c.characterMapping.getHorizontalOffset(c.characterMapping.length)}var Be=t(23708),Ue=t(80222),ze=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},je=function(e,i){return function(t,o){i(t,o,e)}};let Ke=class extends d.jG{constructor(e,i,t,n,s,r,l,h,c,g){super(),this._targetWindow=e,this._editors=i,this._diffModel=t,this._options=n,this._diffEditorWidget=s,this._canIgnoreViewZoneUpdateEvent=r,this._origViewZonesToIgnore=l,this._modViewZonesToIgnore=h,this._clipboardService=c,this._contextMenuService=g,this._originalTopPadding=(0,a.FY)(this,0),this._originalScrollOffset=(0,a.FY)(this,0),this._originalScrollOffsetAnimated=(0,D.Nu)(this._targetWindow,this._originalScrollOffset,this._store),this._modifiedTopPadding=(0,a.FY)(this,0),this._modifiedScrollOffset=(0,a.FY)(this,0),this._modifiedScrollOffsetAnimated=(0,D.Nu)(this._targetWindow,this._modifiedScrollOffset,this._store);const u=(0,a.FY)("invalidateAlignmentsState",0),m=this._register(new de.uC((()=>{u.set(u.get()+1,void 0)}),0));this._register(this._editors.original.onDidChangeViewZones((e=>{this._canIgnoreViewZoneUpdateEvent()||m.schedule()}))),this._register(this._editors.modified.onDidChangeViewZones((e=>{this._canIgnoreViewZoneUpdateEvent()||m.schedule()}))),this._register(this._editors.original.onDidChangeConfiguration((e=>{(e.hasChanged(146)||e.hasChanged(67))&&m.schedule()}))),this._register(this._editors.modified.onDidChangeConfiguration((e=>{(e.hasChanged(146)||e.hasChanged(67))&&m.schedule()})));const _=this._diffModel.map((e=>e?(0,a.y0)(e.model.original.onDidChangeTokens,(()=>2===e.model.original.tokenization.backgroundTokenizationState)):void 0)).map(((e,i)=>null===e||void 0===e?void 0:e.read(i))),f=(0,a.un)((e=>{const i=this._diffModel.read(e),t=null===i||void 0===i?void 0:i.diff.read(e);if(!i||!t)return null;u.read(e);const o=this._options.renderSideBySide.read(e);return Ge(this._editors.original,this._editors.modified,t.mappings,this._origViewZonesToIgnore,this._modViewZonesToIgnore,o)})),v=(0,a.un)((e=>{var i;const t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.movedTextToCompare.read(e);if(!t)return null;u.read(e);const o=t.changes.map((e=>new Ee(e)));return Ge(this._editors.original,this._editors.modified,o,this._origViewZonesToIgnore,this._modViewZonesToIgnore,!0)}));function p(){const e=document.createElement("div");return e.className="diagonal-fill",e}const y=this._register(new d.Cm);this.viewZones=(0,a.rm)(this,((e,i)=>{var t,n,r,d,a,l,h,c;y.clear();const g=f.read(e)||[],u=[],m=[],D=this._modifiedTopPadding.read(e);D>0&&m.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:D,showInHiddenAreas:!0,suppressMouseDown:!0});const L=this._originalTopPadding.read(e);L>0&&u.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:L,showInHiddenAreas:!0,suppressMouseDown:!0});const S=this._options.renderSideBySide.read(e),M=S||null===(t=this._editors.modified._getViewModel())||void 0===t?void 0:t.createLineBreaksComputer();if(M){const V=this._editors.original.getModel();for(const W of g)if(W.diff)for(let A=W.originalRange.startLineNumber;A<W.originalRange.endLineNumberExclusive;A++){if(A>V.getLineCount())return{orig:u,mod:m};null===M||void 0===M||M.addRequest(V.getLineContent(A),null,null)}}const R=null!==(n=null===M||void 0===M?void 0:M.finalize())&&void 0!==n?n:[];let E=0;const N=this._editors.modified.getOption(67),I=null===(r=this._diffModel.read(e))||void 0===r?void 0:r.movedTextToCompare.read(e),T=null!==(a=null===(d=this._editors.original.getModel())||void 0===d?void 0:d.mightContainNonBasicASCII())&&void 0!==a&&a,O=null!==(h=null===(l=this._editors.original.getModel())||void 0===l?void 0:l.mightContainRTL())&&void 0!==h&&h,P=ke.fromEditor(this._editors.modified);for(const F of g)if(F.diff&&!S){if(!F.originalRange.isEmpty){_.read(e);const H=document.createElement("div");H.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const B=this._editors.original.getModel();if(F.originalRange.endLineNumberExclusive-1>B.getLineCount())return{orig:u,mod:m};const U=new Fe(F.originalRange.mapToLineArray((e=>B.tokenization.getLineTokens(e))),F.originalRange.mapToLineArray((e=>R[E++])),T,O),z=[];for(const Z of F.diff.innerChanges||[])z.push(new x.kI(Z.originalRange.delta(-(F.diff.original.startLineNumber-1)),te.Zb.className,0));const j=Ae(U,P,z,H),K=document.createElement("div");if(K.className="inline-deleted-margin-view-zone",(0,C.M)(K,P.fontInfo),this._options.renderIndicators.read(e))for(let Q=0;Q<j.heightInLines;Q++){const Y=document.createElement("div");Y.className="delete-sign ".concat(w.L.asClassName(te.dv)),Y.setAttribute("style","position:absolute;top:".concat(Q*N,"px;width:").concat(P.lineDecorationsWidth,"px;height:").concat(N,"px;right:0;")),K.appendChild(Y)}let G;y.add(new Oe((()=>(0,ae.eU)(G)),K,this._editors.modified,F.diff,this._diffEditorWidget,j.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let q=0;q<j.viewLineCounts.length;q++){const $=j.viewLineCounts[q];$>1&&u.push({afterLineNumber:F.originalRange.startLineNumber+q,domNode:p(),heightInPx:($-1)*N,showInHiddenAreas:!0,suppressMouseDown:!0})}m.push({afterLineNumber:F.modifiedRange.startLineNumber-1,domNode:H,heightInPx:j.heightInLines*N,minWidthInPx:j.minWidthInPx,marginDomNode:K,setZoneId(e){G=e},showInHiddenAreas:!0,suppressMouseDown:!0})}const k=document.createElement("div");k.className="gutter-delete",u.push({afterLineNumber:F.originalRange.endLineNumberExclusive-1,domNode:p(),heightInPx:F.modifiedHeightInPx,marginDomNode:k,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const X=F.modifiedHeightInPx-F.originalHeightInPx;if(X>0){if(null===I||void 0===I?void 0:I.lineRangeMapping.original.delta(-1).deltaLength(2).contains(F.originalRange.endLineNumberExclusive-1))continue;u.push({afterLineNumber:F.originalRange.endLineNumberExclusive-1,domNode:p(),heightInPx:X,showInHiddenAreas:!0,suppressMouseDown:!0})}else{if(null===I||void 0===I?void 0:I.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(F.modifiedRange.endLineNumberExclusive-1))continue;function J(){const e=document.createElement("div");return e.className="arrow-revert-change "+w.L.asClassName(b.W.arrowRight),i.add((0,o.ko)(e,"mousedown",(e=>e.stopPropagation()))),i.add((0,o.ko)(e,"click",(e=>{e.stopPropagation(),s.revert(F.diff)}))),(0,o.$)("div",{},e)}let ee;F.diff&&F.diff.modified.isEmpty&&this._options.shouldRenderOldRevertArrows.read(e)&&(ee=J()),m.push({afterLineNumber:F.modifiedRange.endLineNumberExclusive-1,domNode:p(),heightInPx:-X,marginDomNode:ee,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const ie of null!==(c=v.read(e))&&void 0!==c?c:[]){if(!(null===I||void 0===I?void 0:I.lineRangeMapping.original.intersect(ie.originalRange))||!(null===I||void 0===I?void 0:I.lineRangeMapping.modified.intersect(ie.modifiedRange)))continue;const oe=ie.modifiedHeightInPx-ie.originalHeightInPx;oe>0?u.push({afterLineNumber:ie.originalRange.endLineNumberExclusive-1,domNode:p(),heightInPx:oe,showInHiddenAreas:!0,suppressMouseDown:!0}):m.push({afterLineNumber:ie.modifiedRange.endLineNumberExclusive-1,domNode:p(),heightInPx:-oe,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:u,mod:m}}));let L=!1;this._register(this._editors.original.onDidScrollChange((e=>{e.scrollLeftChanged&&!L&&(L=!0,this._editors.modified.setScrollLeft(e.scrollLeft),L=!1)}))),this._register(this._editors.modified.onDidScrollChange((e=>{e.scrollLeftChanged&&!L&&(L=!0,this._editors.original.setScrollLeft(e.scrollLeft),L=!1)}))),this._originalScrollTop=(0,a.y0)(this._editors.original.onDidScrollChange,(()=>this._editors.original.getScrollTop())),this._modifiedScrollTop=(0,a.y0)(this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollTop())),this._register((0,a.fm)((e=>{const i=this._originalScrollTop.read(e)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(e))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(e));i!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(i,1)}))),this._register((0,a.fm)((e=>{const i=this._modifiedScrollTop.read(e)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(e))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(e));i!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(i,1)}))),this._register((0,a.fm)((e=>{var i;const t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.movedTextToCompare.read(e);let o=0;if(t){const e=this._editors.original.getTopForLineNumber(t.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();o=this._editors.modified.getTopForLineNumber(t.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-e}o>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(o,void 0)):o<0?(this._modifiedTopPadding.set(-o,void 0),this._originalTopPadding.set(0,void 0)):setTimeout((()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)}),400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-o,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+o,void 0,!0)})))}};function Ge(e,i,t,o,n,s){const r=new p.j3(Ze(e,o)),d=new p.j3(Ze(i,n)),a=e.getOption(67),l=i.getOption(67),h=[];let c=0,g=0;function u(e,i){for(;;){let t=r.peek(),o=d.peek();if(t&&t.lineNumber>=e&&(t=void 0),o&&o.lineNumber>=i&&(o=void 0),!t&&!o)break;const n=t?t.lineNumber-c:Number.MAX_VALUE,s=o?o.lineNumber-g:Number.MAX_VALUE;n<s?(r.dequeue(),o={lineNumber:t.lineNumber-c+g,heightInPx:0}):n>s?(d.dequeue(),t={lineNumber:o.lineNumber-g+c,heightInPx:0}):(r.dequeue(),d.dequeue()),h.push({originalRange:L.M.ofLength(t.lineNumber,1),modifiedRange:L.M.ofLength(o.lineNumber,1),originalHeightInPx:a+t.heightInPx,modifiedHeightInPx:l+o.heightInPx,diff:void 0})}}for(const m of t){const _=m.lineRangeMapping;u(_.original.startLineNumber,_.modified.startLineNumber);let f=!0,v=_.modified.startLineNumber,b=_.original.startLineNumber;function w(e,i){var t,o,n,s;if(e<b||i<v)return;if(f)f=!1;else if(e===b||i===v)return;const c=new L.M(b,e),g=new L.M(v,i);if(c.isEmpty&&g.isEmpty)return;const u=null!==(o=null===(t=r.takeWhile((i=>i.lineNumber<e)))||void 0===t?void 0:t.reduce(((e,i)=>e+i.heightInPx),0))&&void 0!==o?o:0,_=null!==(s=null===(n=d.takeWhile((e=>e.lineNumber<i)))||void 0===n?void 0:n.reduce(((e,i)=>e+i.heightInPx),0))&&void 0!==s?s:0;h.push({originalRange:c,modifiedRange:g,originalHeightInPx:c.length*a+u,modifiedHeightInPx:g.length*l+_,diff:m.lineRangeMapping}),b=e,v=i}if(s)for(const C of _.innerChanges||[]){C.originalRange.startColumn>1&&C.modifiedRange.startColumn>1&&w(C.originalRange.startLineNumber,C.modifiedRange.startLineNumber);const D=e.getModel(),y=C.originalRange.endLineNumber<=D.getLineCount()?D.getLineMaxColumn(C.originalRange.endLineNumber):Number.MAX_SAFE_INTEGER;C.originalRange.endColumn<y&&w(C.originalRange.endLineNumber,C.modifiedRange.endLineNumber)}w(_.original.endLineNumberExclusive,_.modified.endLineNumberExclusive),c=_.original.endLineNumberExclusive,g=_.modified.endLineNumberExclusive}return u(Number.MAX_VALUE,Number.MAX_VALUE),h}function Ze(e,i){const t=[],o=[],n=-1!==e.getOption(146).wrappingColumn,s=e._getViewModel().coordinatesConverter,r=e.getOption(67);if(n)for(let d=1;d<=e.getModel().getLineCount();d++){const e=s.getModelLineViewLineCount(d);e>1&&o.push({lineNumber:d,heightInPx:r*(e-1)})}for(const d of e.getWhitespaces()){if(i.has(d.id))continue;const e=0===d.afterLineNumber?0:s.convertViewPositionToModelPosition(new M.y(d.afterLineNumber,1)).lineNumber;t.push({lineNumber:e,heightInPx:d.height})}return(0,D.Am)(t,o,(e=>e.lineNumber),((e,i)=>({lineNumber:e.lineNumber,heightInPx:e.heightInPx+i.heightInPx})))}Ke=ze([je(8,Be.h),je(9,Ue.Z)],Ke);class Qe extends d.jG{constructor(e,i,t){super(),this._editor=e,this._domNode=i,this.itemProvider=t,this.scrollTop=(0,a.y0)(this._editor.onDidScrollChange,(e=>this._editor.getScrollTop())),this.isScrollTopZero=this.scrollTop.map((e=>0===e)),this.modelAttached=(0,a.y0)(this._editor.onDidChangeModel,(e=>this._editor.hasModel())),this.editorOnDidChangeViewZones=(0,a.yQ)("onDidChangeViewZones",this._editor.onDidChangeViewZones),this.editorOnDidContentSizeChange=(0,a.yQ)("onDidContentSizeChange",this._editor.onDidContentSizeChange),this.domNodeSizeChanged=(0,a.Yd)("domNodeSizeChanged"),this.views=new Map,this._domNode.className="gutter monaco-editor";const n=this._domNode.appendChild((0,o.h)("div.scroll-decoration",{role:"presentation",ariaHidden:"true",style:{width:"100%"}}).root),s=new ResizeObserver((()=>{(0,a.Rn)((e=>{this.domNodeSizeChanged.trigger(e)}))}));s.observe(this._domNode),this._register((0,d.s)((()=>s.disconnect()))),this._register((0,a.fm)((e=>{n.className=this.isScrollTopZero.read(e)?"":"scroll-decoration"}))),this._register((0,a.fm)((e=>this.render(e))))}dispose(){super.dispose(),(0,o.Ln)(this._domNode)}render(e){if(!this.modelAttached.read(e))return;this.domNodeSizeChanged.read(e),this.editorOnDidChangeViewZones.read(e),this.editorOnDidContentSizeChange.read(e);const i=this.scrollTop.read(e),t=this._editor.getVisibleRanges(),o=new Set(this.views.keys()),n=S.L.ofStartAndLength(0,this._domNode.clientHeight);if(!n.isEmpty)for(const s of t){const t=new L.M(s.startLineNumber,s.endLineNumber+1),r=this.itemProvider.getIntersectingGutterItems(t,e);(0,a.Rn)((e=>{for(const s of r){if(!s.range.intersect(t))continue;o.delete(s.id);let r=this.views.get(s.id);if(r)r.item.set(s,e);else{const e=document.createElement("div");this._domNode.appendChild(e);const i=(0,a.FY)("item",s),t=this.itemProvider.createView(i,e);r=new Ye(i,t,e),this.views.set(s.id,r)}const d=s.range.startLineNumber<=this._editor.getModel().getLineCount()?this._editor.getTopForLineNumber(s.range.startLineNumber,!0)-i:this._editor.getBottomForLineNumber(s.range.startLineNumber-1,!1)-i,l=(s.range.isEmpty?d:this._editor.getBottomForLineNumber(s.range.endLineNumberExclusive-1,!0)-i)-d;r.domNode.style.top="".concat(d,"px"),r.domNode.style.height="".concat(l,"px"),r.gutterItemView.layout(S.L.ofStartAndLength(d,l),n)}}))}for(const s of o){const e=this.views.get(s);e.gutterItemView.dispose(),this._domNode.removeChild(e.domNode),this.views.delete(s)}}}class Ye{constructor(e,i,t){this.item=e,this.gutterItemView=i,this.domNode=t}}var qe=t(6665),$e=t(7993),Xe=t(5413),Je=t(39230),ei=t(90585),ii=t(26376),ti=t(5662),oi=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},ni=function(e,i){return function(t,o){i(t,o,e)}};const si=[];let ri=class extends d.jG{constructor(e,i,t,n,s,r){super(),this._diffModel=i,this._editors=t,this._instantiationService=n,this._contextKeyService=s,this._menuService=r,this._menu=this._register(this._menuService.createMenu(ei.D8.DiffEditorHunkToolbar,this._contextKeyService)),this._actions=(0,a.y0)(this._menu.onDidChange,(()=>this._menu.getActions())),this._hasActions=this._actions.map((e=>e.length>0)),this.width=(0,a.un)(this,(e=>this._hasActions.read(e)?35:0)),this.elements=(0,o.h)("div.gutter@gutter",{style:{position:"absolute",height:"100%",width:"35px"}},[]),this._currentDiff=(0,a.un)(this,(e=>{var i;const t=this._diffModel.read(e);if(!t)return;const o=null===(i=t.diff.read(e))||void 0===i?void 0:i.mappings,n=this._editors.modifiedCursor.read(e);return n?null===o||void 0===o?void 0:o.find((e=>e.lineRangeMapping.modified.contains(n.lineNumber))):void 0})),this._selectedDiffs=(0,a.un)(this,(e=>{const i=this._diffModel.read(e),t=null===i||void 0===i?void 0:i.diff.read(e);if(!t)return si;const o=this._editors.modifiedSelections.read(e);if(o.every((e=>e.isEmpty())))return si;const n=new L.S(o.map((e=>L.M.fromRangeInclusive(e)))),s=t.mappings.filter((e=>e.lineRangeMapping.innerChanges&&n.intersects(e.lineRangeMapping.modified))).map((e=>({mapping:e,rangeMappings:e.lineRangeMapping.innerChanges.filter((e=>o.some((i=>R.Q.areIntersecting(e.modifiedRange,i)))))})));return 0===s.length||s.every((e=>0===e.rangeMappings.length))?si:s})),this._register((0,D.$y)(e,this.elements.root)),this._register((0,o.ko)(this.elements.root,"click",(()=>{this._editors.modified.focus()}))),this._register((0,D.AV)(this.elements.root,{display:this._hasActions.map((e=>e?"block":"none"))})),this._register(new Qe(this._editors.modified,this.elements.root,{getIntersectingGutterItems:(e,i)=>{const t=this._diffModel.read(i);if(!t)return[];const o=t.diff.read(i);if(!o)return[];const n=this._selectedDiffs.read(i);if(n.length>0){const e=E.wm.fromRangeMappings(n.flatMap((e=>e.rangeMappings)));return[new di(e,!0,ei.D8.DiffEditorSelectionToolbar,void 0,t.model.original.uri,t.model.modified.uri)]}const s=this._currentDiff.read(i);return o.mappings.map((e=>new di(e.lineRangeMapping.withInnerChangesFromLineRanges(),e.lineRangeMapping===(null===s||void 0===s?void 0:s.lineRangeMapping),ei.D8.DiffEditorHunkToolbar,void 0,t.model.original.uri,t.model.modified.uri)))},createView:(e,i)=>this._instantiationService.createInstance(ai,e,i,this)})),this._register((0,o.ko)(this.elements.gutter,o.Bx.MOUSE_WHEEL,(e=>{this._editors.modified.getOption(103).handleMouseWheel&&this._editors.modified.delegateScrollFromMouseWheelEvent(e)}),{passive:!1}))}computeStagedValue(e){var i;const t=null!==(i=e.innerChanges)&&void 0!==i?i:[],o=new Xe.m(this._editors.modifiedModel.get()),n=new Xe.m(this._editors.original.getModel()),s=new $e.mF(t.map((e=>e.toTextEdit(o))));return s.apply(n)}layout(e){this.elements.gutter.style.left=e+"px"}};ri=oi([ni(3,V._Y),ni(4,ii.fN),ni(5,ei.ez)],ri);class di{constructor(e,i,t,o,n,s){this.mapping=e,this.showAlways=i,this.menuId=t,this.rangeOverride=o,this.originalUri=n,this.modifiedUri=s}get id(){return this.mapping.modified.toString()}get range(){var e;return null!==(e=this.rangeOverride)&&void 0!==e?e:this.mapping.modified}}let ai=class extends d.jG{constructor(e,i,t,n){super(),this._item=e,this._elements=(0,o.h)("div.gutterItem",{style:{height:"20px",width:"34px"}},[(0,o.h)("div.background@background",{},[]),(0,o.h)("div.buttons@buttons",{},[])]),this._showAlways=this._item.map(this,(e=>e.showAlways)),this._menuId=this._item.map(this,(e=>e.menuId)),this._isSmall=(0,a.FY)(this,!1),this._lastItemRange=void 0,this._lastViewRange=void 0;const s=this._register(n.createInstance(ti.fO,"element",!0,{position:{hoverPosition:1}}));this._register((0,D.rX)(i,this._elements.root)),this._register((0,a.fm)((e=>{const i=this._showAlways.read(e);this._elements.root.classList.toggle("noTransition",!0),this._elements.root.classList.toggle("showAlways",i),setTimeout((()=>{this._elements.root.classList.toggle("noTransition",!1)}),0)}))),this._register((0,a.yC)(((e,i)=>{this._elements.buttons.replaceChildren();const o=i.add(n.createInstance(Je.m,this._elements.buttons,this._menuId.read(e),{orientation:1,hoverDelegate:s,toolbarOptions:{primaryGroup:e=>e.startsWith("primary")},overflowBehavior:{maxItems:this._isSmall.read(e)?1:3},hiddenItemStrategy:0,actionRunner:new qe.I((()=>{const e=this._item.get(),i=e.mapping;return{mapping:i,originalWithModifiedChanges:t.computeStagedValue(i),originalUri:e.originalUri,modifiedUri:e.modifiedUri}})),menuOptions:{shouldForwardArgs:!0}}));i.add(o.onDidChangeMenuItems((()=>{this._lastItemRange&&this.layout(this._lastItemRange,this._lastViewRange)})))})))}layout(e,i){this._lastItemRange=e,this._lastViewRange=i;let t=this._elements.buttons.clientHeight;this._isSmall.set(1===this._item.get().mapping.original.startLineNumber&&e.length<30,void 0),t=this._elements.buttons.clientHeight,this._elements.root.style.top=e.start+"px",this._elements.root.style.height=e.length+"px";const o=e.length/2-t/2,n=t;let s=e.start+o;const r=S.L.tryCreate(n,i.endExclusive-n-t),d=S.L.tryCreate(e.start+n,e.endExclusive-t-n);d&&r&&d.start<d.endExclusive&&(s=r.clip(s),s=d.clip(s)),this._elements.buttons.style.top="".concat(s-e.start,"px")}};ai=oi([ni(3,V._Y)],ai);var li,hi=t(98591),ci=t(54633),gi=t(44056),ui=t(58861),mi=t(81203),_i=t(84974),fi=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},vi=function(e,i){return function(t,o){i(t,o,e)}};let pi=li=class extends d.jG{constructor(e,i,t,n,s,r,d){super(),this._editors=e,this._rootElement=i,this._diffModel=t,this._rootWidth=n,this._rootHeight=s,this._modifiedEditorLayoutInfo=r,this._themeService=d,this.width=li.ENTIRE_DIFF_OVERVIEW_WIDTH;const l=(0,a.y0)(this._themeService.onDidColorThemeChange,(()=>this._themeService.getColorTheme())),h=(0,a.un)((e=>{const i=l.read(e);return{insertColor:i.getColor(mi.ld8)||(i.getColor(mi.Gj6)||mi.EY1).transparent(2),removeColor:i.getColor(mi.$BZ)||(i.getColor(mi.GNm)||mi.ZEf).transparent(2)}})),c=(0,ci.Z)(document.createElement("div"));c.setClassName("diffViewport"),c.setPosition("absolute");const g=(0,o.h)("div.diffOverview",{style:{position:"absolute",top:"0px",width:li.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;this._register((0,D.rX)(g,c.domNode)),this._register((0,o.b2)(g,o.Bx.POINTER_DOWN,(e=>{this._editors.modified.delegateVerticalScrollbarPointerDown(e)}))),this._register((0,o.ko)(g,o.Bx.MOUSE_WHEEL,(e=>{this._editors.modified.delegateScrollFromMouseWheelEvent(e)}),{passive:!1})),this._register((0,D.rX)(this._rootElement,g)),this._register((0,a.yC)(((e,i)=>{const t=this._diffModel.read(e),o=this._editors.original.createOverviewRuler("original diffOverviewRuler");o&&(i.add(o),i.add((0,D.rX)(g,o.getDomNode())));const n=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(n&&(i.add(n),i.add((0,D.rX)(g,n.getDomNode()))),!o||!n)return;const s=(0,a.yQ)("viewZoneChanged",this._editors.original.onDidChangeViewZones),r=(0,a.yQ)("viewZoneChanged",this._editors.modified.onDidChangeViewZones),d=(0,a.yQ)("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),l=(0,a.yQ)("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);i.add((0,a.fm)((e=>{var i;s.read(e),r.read(e),d.read(e),l.read(e);const a=h.read(e),c=null===(i=null===t||void 0===t?void 0:t.diff.read(e))||void 0===i?void 0:i.mappings;function g(e,i,t){const o=t._getViewModel();return o?e.filter((e=>e.length>0)).map((e=>{const t=o.coordinatesConverter.convertModelPositionToViewPosition(new M.y(e.startLineNumber,1)),n=o.coordinatesConverter.convertModelPositionToViewPosition(new M.y(e.endLineNumberExclusive,1)),s=n.lineNumber-t.lineNumber;return new ui.iE(t.lineNumber,n.lineNumber,s,i.toString())})):[]}const u=g((c||[]).map((e=>e.lineRangeMapping.original)),a.removeColor,this._editors.original),m=g((c||[]).map((e=>e.lineRangeMapping.modified)),a.insertColor,this._editors.modified);null===o||void 0===o||o.setZones(u),null===n||void 0===n||n.setZones(m)}))),i.add((0,a.fm)((e=>{const i=this._rootHeight.read(e),t=this._rootWidth.read(e),s=this._modifiedEditorLayoutInfo.read(e);if(s){const t=li.ENTIRE_DIFF_OVERVIEW_WIDTH-2*li.ONE_OVERVIEW_WIDTH;o.setLayout({top:0,height:i,right:t+li.ONE_OVERVIEW_WIDTH,width:li.ONE_OVERVIEW_WIDTH}),n.setLayout({top:0,height:i,right:0,width:li.ONE_OVERVIEW_WIDTH});const r=this._editors.modifiedScrollTop.read(e),d=this._editors.modifiedScrollHeight.read(e),a=this._editors.modified.getOption(103),l=new gi.m(a.verticalHasArrows?a.arrowSize:0,a.verticalScrollbarSize,0,s.height,d,r);c.setTop(l.getSliderPosition()),c.setHeight(l.getSliderSize())}else c.setTop(0),c.setHeight(0);g.style.height=i+"px",g.style.left=t-li.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",c.setWidth(li.ENTIRE_DIFF_OVERVIEW_WIDTH)})))})))}};pi.ONE_OVERVIEW_WIDTH=15,pi.ENTIRE_DIFF_OVERVIEW_WIDTH=2*li.ONE_OVERVIEW_WIDTH,pi=li=fi([vi(6,_i.Gy)],pi);var bi=t(76816),wi=t(17913);const Ci=[];class Di extends d.jG{constructor(e,i,t,o){super(),this._editors=e,this._diffModel=i,this._options=t,this._widget=o,this._selectedDiffs=(0,a.un)(this,(e=>{const i=this._diffModel.read(e),t=null===i||void 0===i?void 0:i.diff.read(e);if(!t)return Ci;const o=this._editors.modifiedSelections.read(e);if(o.every((e=>e.isEmpty())))return Ci;const n=new L.S(o.map((e=>L.M.fromRangeInclusive(e)))),s=t.mappings.filter((e=>e.lineRangeMapping.innerChanges&&n.intersects(e.lineRangeMapping.modified))).map((e=>({mapping:e,rangeMappings:e.lineRangeMapping.innerChanges.filter((e=>o.some((i=>R.Q.areIntersecting(e.modifiedRange,i)))))})));return 0===s.length||s.every((e=>0===e.rangeMappings.length))?Ci:s})),this._register((0,a.yC)(((e,i)=>{if(!this._options.shouldRenderOldRevertArrows.read(e))return;const t=this._diffModel.read(e),o=null===t||void 0===t?void 0:t.diff.read(e);if(!t||!o)return;if(t.movedTextToCompare.read(e))return;const n=[],s=this._selectedDiffs.read(e),r=new Set(s.map((e=>e.mapping)));if(s.length>0){const t=this._editors.modifiedSelections.read(e),o=i.add(new yi(t[t.length-1].positionLineNumber,this._widget,s.flatMap((e=>e.rangeMappings)),!0));this._editors.modified.addGlyphMarginWidget(o),n.push(o)}for(const d of o.mappings)if(!r.has(d)&&!d.lineRangeMapping.modified.isEmpty&&d.lineRangeMapping.innerChanges){const e=i.add(new yi(d.lineRangeMapping.modified.startLineNumber,this._widget,d.lineRangeMapping,!1));this._editors.modified.addGlyphMarginWidget(e),n.push(e)}i.add((0,d.s)((()=>{for(const e of n)this._editors.modified.removeGlyphMarginWidget(e)})))})))}}class yi extends d.jG{getId(){return this._id}constructor(e,i,t,n){super(),this._lineNumber=e,this._widget=i,this._diffs=t,this._revertSelection=n,this._id="revertButton".concat(yi.counter++),this._domNode=(0,o.h)("div.revertButton",{title:this._revertSelection?(0,O.kg)("revertSelectedChanges","Revert Selected Changes"):(0,O.kg)("revertChange","Revert Change")},[(0,bi.s)(b.W.arrowRight)]).root,this._register((0,o.ko)(this._domNode,o.Bx.MOUSE_DOWN,(e=>{2!==e.button&&(e.stopPropagation(),e.preventDefault())}))),this._register((0,o.ko)(this._domNode,o.Bx.MOUSE_UP,(e=>{e.stopPropagation(),e.preventDefault()}))),this._register((0,o.ko)(this._domNode,o.Bx.CLICK,(e=>{this._diffs instanceof E.WL?this._widget.revert(this._diffs):this._widget.revertRangeMappings(this._diffs),e.stopPropagation(),e.preventDefault()})))}getDomNode(){return this._domNode}getPosition(){return{lane:wi.ZS.Right,range:{startColumn:1,startLineNumber:this._lineNumber,endColumn:1,endLineNumber:this._lineNumber},zIndex:10001}}}yi.counter=0;var Li=t(11894),Si=t(20484),Mi=t(2703),Ri=t(8173),Ei=t(40112),Ni=t(37589),Ii=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},Ti=function(e,i){return function(t,o){i(t,o,e)}};let xi=class extends d.jG{get onDidContentSizeChange(){return this._onDidContentSizeChange.event}constructor(e,i,t,o,n,s,d){super(),this.originalEditorElement=e,this.modifiedEditorElement=i,this._options=t,this._argCodeEditorWidgetOptions=o,this._createInnerEditor=n,this._instantiationService=s,this._keybindingService=d,this.original=this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(this._options.editorOptions.get(),this._argCodeEditorWidgetOptions.modifiedEditor||{})),this._onDidContentSizeChange=this._register(new r.vl),this.modifiedScrollTop=(0,a.y0)(this.modified.onDidScrollChange,(()=>this.modified.getScrollTop())),this.modifiedScrollHeight=(0,a.y0)(this.modified.onDidScrollChange,(()=>this.modified.getScrollHeight())),this.modifiedModel=(0,Ei.H)(this.modified).model,this.modifiedSelections=(0,a.y0)(this.modified.onDidChangeCursorSelection,(()=>{var e;return null!==(e=this.modified.getSelections())&&void 0!==e?e:[]})),this.modifiedCursor=(0,a.C)({owner:this,equalsFn:M.y.equals},(e=>{var i,t;return null!==(t=null===(i=this.modifiedSelections.read(e)[0])||void 0===i?void 0:i.getPosition())&&void 0!==t?t:new M.y(1,1)})),this.originalCursor=(0,a.y0)(this.original.onDidChangeCursorPosition,(()=>{var e;return null!==(e=this.original.getPosition())&&void 0!==e?e:new M.y(1,1)})),this._argCodeEditorWidgetOptions=null,this._register((0,a.Y)({createEmptyChangeSummary:()=>({}),handleChange:(e,i)=>(e.didChange(t.editorOptions)&&Object.assign(i,e.change.changedOptions),!0)},((e,i)=>{t.editorOptions.read(e),this._options.renderSideBySide.read(e),this.modified.updateOptions(this._adjustOptionsForRightHandSide(e,i)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(e,i))})))}_createLeftHandSideEditor(e,i){const t=this._adjustOptionsForLeftHandSide(void 0,e),o=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,t,i);return o.setContextValue("isInDiffLeftEditor",!0),o}_createRightHandSideEditor(e,i){const t=this._adjustOptionsForRightHandSide(void 0,e),o=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,t,i);return o.setContextValue("isInDiffRightEditor",!0),o}_constructInnerEditor(e,i,t,o){const n=this._createInnerEditor(e,i,t,o);return this._register(n.onDidContentSizeChange((e=>{const i=this.original.getContentWidth()+this.modified.getContentWidth()+pi.ENTIRE_DIFF_OVERVIEW_WIDTH,t=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:t,contentWidth:i,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})}))),n}_adjustOptionsForLeftHandSide(e,i){const t=this._adjustOptionsForSubEditor(i);return this._options.renderSideBySide.get()?(t.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},t.wordWrapOverride1=this._options.diffWordWrap.get()):(t.wordWrapOverride1="off",t.wordWrapOverride2="off",t.stickyScroll={enabled:!1},t.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),t.glyphMargin=this._options.renderSideBySide.get(),i.originalAriaLabel&&(t.ariaLabel=i.originalAriaLabel),t.ariaLabel=this._updateAriaLabel(t.ariaLabel),t.readOnly=!this._options.originalEditable.get(),t.dropIntoEditor={enabled:!t.readOnly},t.extraEditorClassName="original-in-monaco-diff-editor",t}_adjustOptionsForRightHandSide(e,i){const t=this._adjustOptionsForSubEditor(i);return i.modifiedAriaLabel&&(t.ariaLabel=i.modifiedAriaLabel),t.ariaLabel=this._updateAriaLabel(t.ariaLabel),t.wordWrapOverride1=this._options.diffWordWrap.get(),t.revealHorizontalRightPadding=y.qB.revealHorizontalRightPadding.defaultValue+pi.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",t}_adjustOptionsForSubEditor(e){const i={...e,dimension:{height:0,width:0}};return i.inDiffEditor=!0,i.automaticLayout=!1,i.scrollbar={...i.scrollbar||{}},i.folding=!1,i.codeLens=this._options.diffCodeLens.get(),i.fixedOverflowWidgets=!0,i.minimap={...i.minimap||{}},i.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?i.stickyScroll={enabled:!1}:i.stickyScroll=this._options.editorOptions.get().stickyScroll,i}_updateAriaLabel(e){var i;e||(e="");const t=(0,O.kg)("diff-aria-navigation-tip"," use {0} to open the accessibility help.",null===(i=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))||void 0===i?void 0:i.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};xi=Ii([Ti(5,V._Y),Ti(6,Ni.b)],xi);class Oi extends d.jG{constructor(){super(...arguments),this._id=++Oi.idCounter,this._onDidDispose=this._register(new r.vl),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setPosition(e,i)}revealLine(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLine(e,i)}revealLineInCenter(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenter(e,i)}revealLineInCenterIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenterIfOutsideViewport(e,i)}revealLineNearTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineNearTop(e,i)}revealPosition(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPosition(e,i)}revealPositionInCenter(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenter(e,i)}revealPositionInCenterIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenterIfOutsideViewport(e,i)}revealPositionNearTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionNearTop(e,i)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelection(e,i)}setSelections(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelections(e,i)}revealLines(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLines(e,i,t)}revealLinesInCenter(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenter(e,i,t)}revealLinesInCenterIfOutsideViewport(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenterIfOutsideViewport(e,i,t)}revealLinesNearTop(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesNearTop(e,i,t)}revealRange(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._targetEditor.revealRange(e,i,t,o)}revealRangeInCenter(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenter(e,i)}revealRangeInCenterIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenterIfOutsideViewport(e,i)}revealRangeNearTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTop(e,i)}revealRangeNearTopIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTopIfOutsideViewport(e,i)}revealRangeAtTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeAtTop(e,i)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,i,t){this._targetEditor.trigger(e,i,t)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}}Oi.idCounter=0;var Pi=t(27457),Vi=t(42851),Wi=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},Ai=function(e,i){return function(t,o){i(t,o,e)}};let Fi=class{get editorOptions(){return this._options}constructor(e,i){this._accessibilityService=i,this._diffEditorWidth=(0,a.FY)(this,0),this._screenReaderMode=(0,a.y0)(this._accessibilityService.onDidChangeScreenReaderOptimized,(()=>this._accessibilityService.isScreenReaderOptimized())),this.couldShowInlineViewBecauseOfSize=(0,a.un)(this,(e=>this._options.read(e).renderSideBySide&&this._diffEditorWidth.read(e)<=this._options.read(e).renderSideBySideInlineBreakpoint)),this.renderOverviewRuler=(0,a.un)(this,(e=>this._options.read(e).renderOverviewRuler)),this.renderSideBySide=(0,a.un)(this,(e=>this._options.read(e).renderSideBySide&&!(this._options.read(e).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(e)&&!this._screenReaderMode.read(e)))),this.readOnly=(0,a.un)(this,(e=>this._options.read(e).readOnly)),this.shouldRenderOldRevertArrows=(0,a.un)(this,(e=>!!this._options.read(e).renderMarginRevertIcon&&(!!this.renderSideBySide.read(e)&&(!this.readOnly.read(e)&&!this.shouldRenderGutterMenu.read(e))))),this.shouldRenderGutterMenu=(0,a.un)(this,(e=>this._options.read(e).renderGutterMenu)),this.renderIndicators=(0,a.un)(this,(e=>this._options.read(e).renderIndicators)),this.enableSplitViewResizing=(0,a.un)(this,(e=>this._options.read(e).enableSplitViewResizing)),this.splitViewDefaultRatio=(0,a.un)(this,(e=>this._options.read(e).splitViewDefaultRatio)),this.ignoreTrimWhitespace=(0,a.un)(this,(e=>this._options.read(e).ignoreTrimWhitespace)),this.maxComputationTimeMs=(0,a.un)(this,(e=>this._options.read(e).maxComputationTime)),this.showMoves=(0,a.un)(this,(e=>this._options.read(e).experimental.showMoves&&this.renderSideBySide.read(e))),this.isInEmbeddedEditor=(0,a.un)(this,(e=>this._options.read(e).isInEmbeddedEditor)),this.diffWordWrap=(0,a.un)(this,(e=>this._options.read(e).diffWordWrap)),this.originalEditable=(0,a.un)(this,(e=>this._options.read(e).originalEditable)),this.diffCodeLens=(0,a.un)(this,(e=>this._options.read(e).diffCodeLens)),this.accessibilityVerbose=(0,a.un)(this,(e=>this._options.read(e).accessibilityVerbose)),this.diffAlgorithm=(0,a.un)(this,(e=>this._options.read(e).diffAlgorithm)),this.showEmptyDecorations=(0,a.un)(this,(e=>this._options.read(e).experimental.showEmptyDecorations)),this.onlyShowAccessibleDiffViewer=(0,a.un)(this,(e=>this._options.read(e).onlyShowAccessibleDiffViewer)),this.hideUnchangedRegions=(0,a.un)(this,(e=>this._options.read(e).hideUnchangedRegions.enabled)),this.hideUnchangedRegionsRevealLineCount=(0,a.un)(this,(e=>this._options.read(e).hideUnchangedRegions.revealLineCount)),this.hideUnchangedRegionsContextLineCount=(0,a.un)(this,(e=>this._options.read(e).hideUnchangedRegions.contextLineCount)),this.hideUnchangedRegionsMinimumLineCount=(0,a.un)(this,(e=>this._options.read(e).hideUnchangedRegions.minimumLineCount));const t={...e,...ki(e,Pi.q)};this._options=(0,a.FY)(this,t)}updateOptions(e){const i=ki(e,this._options.get()),t={...this._options.get(),...e,...i};this._options.set(t,void 0,{changedOptions:e})}setWidth(e){this._diffEditorWidth.set(e,void 0)}};function ki(e,i){var t,o,n,s,r,d,a,l;return{enableSplitViewResizing:(0,y.zM)(e.enableSplitViewResizing,i.enableSplitViewResizing),splitViewDefaultRatio:(0,y.ls)(e.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:(0,y.zM)(e.renderSideBySide,i.renderSideBySide),renderMarginRevertIcon:(0,y.zM)(e.renderMarginRevertIcon,i.renderMarginRevertIcon),maxComputationTime:(0,y.wA)(e.maxComputationTime,i.maxComputationTime,0,1073741824),maxFileSize:(0,y.wA)(e.maxFileSize,i.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,y.zM)(e.ignoreTrimWhitespace,i.ignoreTrimWhitespace),renderIndicators:(0,y.zM)(e.renderIndicators,i.renderIndicators),originalEditable:(0,y.zM)(e.originalEditable,i.originalEditable),diffCodeLens:(0,y.zM)(e.diffCodeLens,i.diffCodeLens),renderOverviewRuler:(0,y.zM)(e.renderOverviewRuler,i.renderOverviewRuler),diffWordWrap:(0,y.O4)(e.diffWordWrap,i.diffWordWrap,["off","on","inherit"]),diffAlgorithm:(0,y.O4)(e.diffAlgorithm,i.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:(0,y.zM)(e.accessibilityVerbose,i.accessibilityVerbose),experimental:{showMoves:(0,y.zM)(null===(t=e.experimental)||void 0===t?void 0:t.showMoves,i.experimental.showMoves),showEmptyDecorations:(0,y.zM)(null===(o=e.experimental)||void 0===o?void 0:o.showEmptyDecorations,i.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:(0,y.zM)(null!==(s=null===(n=e.hideUnchangedRegions)||void 0===n?void 0:n.enabled)&&void 0!==s?s:null===(r=e.experimental)||void 0===r?void 0:r.collapseUnchangedRegions,i.hideUnchangedRegions.enabled),contextLineCount:(0,y.wA)(null===(d=e.hideUnchangedRegions)||void 0===d?void 0:d.contextLineCount,i.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:(0,y.wA)(null===(a=e.hideUnchangedRegions)||void 0===a?void 0:a.minimumLineCount,i.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:(0,y.wA)(null===(l=e.hideUnchangedRegions)||void 0===l?void 0:l.revealLineCount,i.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:(0,y.zM)(e.isInEmbeddedEditor,i.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:(0,y.zM)(e.onlyShowAccessibleDiffViewer,i.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:(0,y.wA)(e.renderSideBySideInlineBreakpoint,i.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:(0,y.zM)(e.useInlineViewWhenSpaceIsLimited,i.useInlineViewWhenSpaceIsLimited),renderGutterMenu:(0,y.zM)(e.renderGutterMenu,i.renderGutterMenu)}}Fi=Wi([Ai(1,Vi.j)],Fi);var Hi=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},Bi=function(e,i){return function(t,o){i(t,o,e)}};let Ui=class extends Oi{get onDidContentSizeChange(){return this._editors.onDidContentSizeChange}constructor(e,i,t,n,s,h,c,u){var m;super(),this._domElement=e,this._parentContextKeyService=n,this._parentInstantiationService=s,this._accessibilitySignalService=c,this._editorProgressService=u,this.elements=(0,o.h)("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[(0,o.h)("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),(0,o.h)("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),(0,o.h)("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModel=(0,a.FY)(this,void 0),this._shouldDisposeDiffModel=!1,this.onDidChangeModel=r.Jh.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._parentInstantiationService.createChild(new Mi.a([ii.fN,this._contextKeyService])),this._boundarySashes=(0,a.FY)(this,void 0),this._accessibleDiffViewerShouldBeVisible=(0,a.FY)(this,!1),this._accessibleDiffViewerVisible=(0,a.un)(this,(e=>!!this._options.onlyShowAccessibleDiffViewer.read(e)||this._accessibleDiffViewerShouldBeVisible.read(e))),this._movedBlocksLinesPart=(0,a.FY)(this,void 0),this._layoutInfo=(0,a.un)(this,(e=>{var i,t,o,n,s;const r=this._rootSizeObserver.width.read(e),d=this._rootSizeObserver.height.read(e),a=this._sash.read(e),l=this._gutter.read(e),h=null!==(i=null===l||void 0===l?void 0:l.width.read(e))&&void 0!==i?i:0,c=null!==(o=null===(t=this._overviewRulerPart.read(e))||void 0===t?void 0:t.width)&&void 0!==o?o:0;let g,u,m,_,f;if(!!a){const i=a.sashLeft.read(e);g=0,u=i-h-(null!==(s=null===(n=this._movedBlocksLinesPart.read(e))||void 0===n?void 0:n.width.read(e))&&void 0!==s?s:0),f=i-h,m=i,_=r-m-c}else f=0,g=h,u=Math.max(5,this._editors.original.getLayoutInfo().decorationsLeft),m=h+u,_=r-m-c;return this.elements.original.style.left=g+"px",this.elements.original.style.width=u+"px",this._editors.original.layout({width:u,height:d},!0),null===l||void 0===l||l.layout(f),this.elements.modified.style.left=m+"px",this.elements.modified.style.width=_+"px",this._editors.modified.layout({width:_,height:d},!0),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}})),this._diffValue=this._diffModel.map(((e,i)=>null===e||void 0===e?void 0:e.diff.read(i))),this.onDidUpdateDiff=r.Jh.fromObservableLight(this._diffValue),h.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register((0,d.s)((()=>this._domElement.removeChild(this.elements.root)))),this._rootSizeObserver=this._register(new D.pN(this.elements.root,i.dimension)),this._rootSizeObserver.setAutomaticLayout(null!==(m=i.automaticLayout)&&void 0!==m&&m),this._options=this._instantiationService.createInstance(Fi,i),this._register((0,a.fm)((e=>{this._options.setWidth(this._rootSizeObserver.width.read(e))}))),this._contextKeyService.createKey(Si.R.isEmbeddedDiffEditor.key,!1),this._register((0,D.wp)(Si.R.isEmbeddedDiffEditor,this._contextKeyService,(e=>this._options.isInEmbeddedEditor.read(e)))),this._register((0,D.wp)(Si.R.comparingMovedCode,this._contextKeyService,(e=>{var i;return!!(null===(i=this._diffModel.read(e))||void 0===i?void 0:i.movedTextToCompare.read(e))}))),this._register((0,D.wp)(Si.R.diffEditorRenderSideBySideInlineBreakpointReached,this._contextKeyService,(e=>this._options.couldShowInlineViewBecauseOfSize.read(e)))),this._register((0,D.wp)(Si.R.diffEditorInlineMode,this._contextKeyService,(e=>!this._options.renderSideBySide.read(e)))),this._register((0,D.wp)(Si.R.hasChanges,this._contextKeyService,(e=>{var i,t,o;return(null!==(o=null===(t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.diff.read(e))||void 0===t?void 0:t.mappings.length)&&void 0!==o?o:0)>0}))),this._editors=this._register(this._instantiationService.createInstance(xi,this.elements.original,this.elements.modified,this._options,t,((e,i,t,o)=>this._createInnerEditor(e,i,t,o)))),this._register((0,D.wp)(Si.R.diffEditorOriginalWritable,this._contextKeyService,(e=>this._options.originalEditable.read(e)))),this._register((0,D.wp)(Si.R.diffEditorModifiedWritable,this._contextKeyService,(e=>!this._options.readOnly.read(e)))),this._register((0,D.wp)(Si.R.diffEditorOriginalUri,this._contextKeyService,(e=>{var i,t;return null!==(t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.model.original.uri.toString())&&void 0!==t?t:""}))),this._register((0,D.wp)(Si.R.diffEditorModifiedUri,this._contextKeyService,(e=>{var i,t;return null!==(t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.model.modified.uri.toString())&&void 0!==t?t:""}))),this._overviewRulerPart=(0,l.a0)(this,(e=>this._options.renderOverviewRuler.read(e)?this._instantiationService.createInstance((0,D.b6)(pi,e),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map((e=>e.modifiedEditor))):void 0)).recomputeInitiallyAndOnChange(this._store),this._sash=(0,l.a0)(this,(e=>{const i=this._options.renderSideBySide.read(e);return this.elements.root.classList.toggle("side-by-side",i),i?new se(this._options,this.elements.root,{height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map(((e,i)=>{var t,o;return e-(null!==(o=null===(t=this._overviewRulerPart.read(i))||void 0===t?void 0:t.width)&&void 0!==o?o:0)}))},this._boundarySashes):void 0})).recomputeInitiallyAndOnChange(this._store);const _=(0,l.a0)(this,(e=>this._instantiationService.createInstance((0,D.b6)(hi.N,e),this._editors,this._diffModel,this._options))).recomputeInitiallyAndOnChange(this._store);(0,l.a0)(this,(e=>this._instantiationService.createInstance((0,D.b6)(oe,e),this._editors,this._diffModel,this._options,this))).recomputeInitiallyAndOnChange(this._store);const f=new Set,v=new Set;let p=!1;const b=(0,l.a0)(this,(e=>this._instantiationService.createInstance((0,D.b6)(Ke,e),(0,o.zk)(this._domElement),this._editors,this._diffModel,this._options,this,(()=>p||_.get().isUpdatingHiddenAreas),f,v))).recomputeInitiallyAndOnChange(this._store),w=(0,a.un)(this,(e=>{const i=b.read(e).viewZones.read(e).orig,t=_.read(e).viewZones.read(e).origViewZones;return i.concat(t)})),C=(0,a.un)(this,(e=>{const i=b.read(e).viewZones.read(e).mod,t=_.read(e).viewZones.read(e).modViewZones;return i.concat(t)}));let y;this._register((0,D.Vs)(this._editors.original,w,(e=>{p=e}),f)),this._register((0,D.Vs)(this._editors.modified,C,(e=>{p=e,p?y=g.D.capture(this._editors.modified):(null===y||void 0===y||y.restore(this._editors.modified),y=void 0)}),v)),this._accessibleDiffViewer=(0,l.a0)(this,(e=>this._instantiationService.createInstance((0,D.b6)(U,e),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,((e,i)=>this._accessibleDiffViewerShouldBeVisible.set(e,i)),this._options.onlyShowAccessibleDiffViewer.map((e=>!e)),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map(((e,i)=>{var t;return null===(t=null===e||void 0===e?void 0:e.diff.read(i))||void 0===t?void 0:t.mappings.map((e=>e.lineRangeMapping))})),new X(this._editors)))).recomputeInitiallyAndOnChange(this._store);const L=this._accessibleDiffViewerVisible.map((e=>e?"hidden":"visible"));this._register((0,D.AV)(this.elements.modified,{visibility:L})),this._register((0,D.AV)(this.elements.original,{visibility:L})),this._createDiffEditorContributions(),h.addDiffEditor(this),this._gutter=(0,l.a0)(this,(e=>this._options.shouldRenderGutterMenu.read(e)?this._instantiationService.createInstance((0,D.b6)(ri,e),this.elements.root,this._diffModel,this._editors):void 0)),this._register((0,a.OI)(this._layoutInfo)),(0,l.a0)(this,(e=>new((0,D.b6)(J,e))(this.elements.root,this._diffModel,this._layoutInfo.map((e=>e.originalEditor)),this._layoutInfo.map((e=>e.modifiedEditor)),this._editors))).recomputeInitiallyAndOnChange(this._store,(e=>{this._movedBlocksLinesPart.set(e,void 0)})),this._register(r.Jh.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,(e=>this._handleCursorPositionChange(e,!0)))),this._register(r.Jh.runAndSubscribe(this._editors.original.onDidChangeCursorPosition,(e=>this._handleCursorPositionChange(e,!1))));const S=this._diffModel.map(this,((e,i)=>{if(e)return void 0===e.diff.read(i)&&!e.isDiffUpToDate.read(i)}));this._register((0,a.yC)(((e,i)=>{if(!0===S.read(e)){const e=this._editorProgressService.show(!0,1e3);i.add((0,d.s)((()=>e.done())))}}))),this._register((0,d.s)((()=>{var e;this._shouldDisposeDiffModel&&(null===(e=this._diffModel.get())||void 0===e||e.dispose())}))),this._register((0,a.yC)(((e,i)=>{i.add(new((0,D.b6)(Di,e))(this._editors,this._diffModel,this._options,this))})))}_createInnerEditor(e,i,t,o){return e.createInstance(u.CodeEditorWidget,i,t,o)}_createDiffEditorContributions(){const e=h.dS.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(i){(0,s.dz)(i)}}get _targetEditor(){return this._editors.modified}getEditorType(){return Li._.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var e;return{original:this._editors.original.saveViewState(),modified:this._editors.modified.saveViewState(),modelState:null===(e=this._diffModel.get())||void 0===e?void 0:e.serializeState()}}restoreViewState(e){var i;if(e&&e.original&&e.modified){const t=e;this._editors.original.restoreViewState(t.original),this._editors.modified.restoreViewState(t.modified),t.modelState&&(null===(i=this._diffModel.get())||void 0===i||i.restoreSerializedState(t.modelState))}}handleInitialized(){this._editors.original.handleInitialized(),this._editors.modified.handleInitialized()}createViewModel(e){return this._instantiationService.createInstance(Me,e,this._options)}getModel(){var e,i;return null!==(i=null===(e=this._diffModel.get())||void 0===e?void 0:e.model)&&void 0!==i?i:null}setModel(e,i){!e&&this._diffModel.get()&&this._accessibleDiffViewer.get().close();const t=e?"model"in e?{model:e,shouldDispose:!1}:{model:this.createViewModel(e),shouldDispose:!0}:void 0;this._diffModel.get()!==(null===t||void 0===t?void 0:t.model)&&(0,a.PO)(i,(e=>{var i;a.y0.batchEventsGlobally(e,(()=>{this._editors.original.setModel(t?t.model.model.original:null),this._editors.modified.setModel(t?t.model.model.modified:null)}));const o=this._diffModel.get(),n=this._shouldDisposeDiffModel;this._shouldDisposeDiffModel=null!==(i=null===t||void 0===t?void 0:t.shouldDispose)&&void 0!==i&&i,this._diffModel.set(null===t||void 0===t?void 0:t.model,e),n&&(null===o||void 0===o||o.dispose())}))}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var e;const i=null===(e=this._diffModel.get())||void 0===e?void 0:e.diff.get();return i?i.mappings.map((e=>{const i=e.lineRangeMapping;let t,o,n,s,r=i.innerChanges;return i.original.isEmpty?(t=i.original.startLineNumber-1,o=0,r=void 0):(t=i.original.startLineNumber,o=i.original.endLineNumberExclusive-1),i.modified.isEmpty?(n=i.modified.startLineNumber-1,s=0,r=void 0):(n=i.modified.startLineNumber,s=i.modified.endLineNumberExclusive-1),{originalStartLineNumber:t,originalEndLineNumber:o,modifiedStartLineNumber:n,modifiedEndLineNumber:s,charChanges:null===r||void 0===r?void 0:r.map((e=>({originalStartLineNumber:e.originalRange.startLineNumber,originalStartColumn:e.originalRange.startColumn,originalEndLineNumber:e.originalRange.endLineNumber,originalEndColumn:e.originalRange.endColumn,modifiedStartLineNumber:e.modifiedRange.startLineNumber,modifiedStartColumn:e.modifiedRange.startColumn,modifiedEndLineNumber:e.modifiedRange.endLineNumber,modifiedEndColumn:e.modifiedRange.endColumn})))}})):null}revert(e){const i=this._diffModel.get();i&&i.isDiffUpToDate.get()&&this._editors.modified.executeEdits("diffEditor",[{range:e.modified.toExclusiveRange(),text:i.model.original.getValueInRange(e.original.toExclusiveRange())}])}revertRangeMappings(e){const i=this._diffModel.get();if(!i||!i.isDiffUpToDate.get())return;const t=e.map((e=>({range:e.modifiedRange,text:i.model.original.getValueInRange(e.originalRange)})));this._editors.modified.executeEdits("diffEditor",t)}_goTo(e){this._editors.modified.setPosition(new M.y(e.lineRangeMapping.modified.startLineNumber,1)),this._editors.modified.revealRangeInCenter(e.lineRangeMapping.modified.toExclusiveRange())}goToDiff(e){var i,t,o,s;const r=null===(t=null===(i=this._diffModel.get())||void 0===i?void 0:i.diff.get())||void 0===t?void 0:t.mappings;if(!r||0===r.length)return;const d=this._editors.modified.getPosition().lineNumber;let a;a="next"===e?null!==(o=r.find((e=>e.lineRangeMapping.modified.startLineNumber>d)))&&void 0!==o?o:r[0]:null!==(s=(0,n.Uk)(r,(e=>e.lineRangeMapping.modified.startLineNumber<d)))&&void 0!==s?s:r[r.length-1],this._goTo(a),a.lineRangeMapping.modified.isEmpty?this._accessibilitySignalService.playSignal(P.Rh.diffLineDeleted,{source:"diffEditor.goToDiff"}):a.lineRangeMapping.original.isEmpty?this._accessibilitySignalService.playSignal(P.Rh.diffLineInserted,{source:"diffEditor.goToDiff"}):a&&this._accessibilitySignalService.playSignal(P.Rh.diffLineModified,{source:"diffEditor.goToDiff"})}revealFirstDiff(){const e=this._diffModel.get();e&&this.waitForDiff().then((()=>{var i;const t=null===(i=e.diff.get())||void 0===i?void 0:i.mappings;t&&0!==t.length&&this._goTo(t[0])}))}accessibleDiffViewerNext(){this._accessibleDiffViewer.get().next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.get().prev()}async waitForDiff(){const e=this._diffModel.get();e&&await e.waitForDiff()}mapToOtherSide(){var e,i;const t=this._editors.modified.hasWidgetFocus(),o=t?this._editors.modified:this._editors.original,n=t?this._editors.original:this._editors.modified;let s;const r=o.getSelection();if(r){const o=null===(i=null===(e=this._diffModel.get())||void 0===e?void 0:e.diff.get())||void 0===i?void 0:i.mappings.map((e=>t?e.lineRangeMapping.flip():e.lineRangeMapping));if(o){const e=(0,D.Mu)(r.getStartPosition(),o),i=(0,D.Mu)(r.getEndPosition(),o);s=R.Q.plusRange(e,i)}}return{destination:n,destinationSelection:s}}switchSide(){const{destination:e,destinationSelection:i}=this.mapToOtherSide();e.focus(),i&&e.setSelection(i)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var e;const i=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();i&&(0,a.Rn)((e=>{for(const t of i)t.collapseAll(e)}))}showAllUnchangedRegions(){var e;const i=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();i&&(0,a.Rn)((e=>{for(const t of i)t.showAll(e)}))}_handleCursorPositionChange(e,i){var t,o;if(3===(null===e||void 0===e?void 0:e.reason)){const n=null===(o=null===(t=this._diffModel.get())||void 0===t?void 0:t.diff.get())||void 0===o?void 0:o.mappings.find((t=>i?t.lineRangeMapping.modified.contains(e.position.lineNumber):t.lineRangeMapping.original.contains(e.position.lineNumber)));(null===n||void 0===n?void 0:n.lineRangeMapping.modified.isEmpty)?this._accessibilitySignalService.playSignal(P.Rh.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):(null===n||void 0===n?void 0:n.lineRangeMapping.original.isEmpty)?this._accessibilitySignalService.playSignal(P.Rh.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):n&&this._accessibilitySignalService.playSignal(P.Rh.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}}};Ui=Hi([Bi(3,ii.fN),Bi(4,V._Y),Bi(5,c.T),Bi(6,P.Nt),Bi(7,Ri.N8)],Ui)},98591:(e,i,t)=>{t.d(i,{N:()=>D});var o,n=t(29563),s=t(76816),r=t(33944),d=t(82602),a=t(60704),l=t(92444),h=t(6824),c=t(48367),g=t(14945),u=t(64854),m=t(48861),_=t(20603),f=t(38499),v=t(83011),p=t(17483),b=t(17837),w=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},C=function(e,i){return function(t,o){i(t,o,e)}};let D=o=class extends a.jG{static setBreadcrumbsSourceFactory(e){this._breadcrumbsSourceFactory.set(e,void 0)}get isUpdatingHiddenAreas(){return this._isUpdatingHiddenAreas}constructor(e,i,t,n){super(),this._editors=e,this._diffModel=i,this._options=t,this._instantiationService=n,this._modifiedOutlineSource=(0,h.a0)(this,(e=>{const i=this._editors.modifiedModel.read(e),t=o._breadcrumbsSourceFactory.read(e);return i&&t?t(i,this._instantiationService):void 0})),this._isUpdatingHiddenAreas=!1,this._register(this._editors.original.onDidChangeCursorPosition((e=>{if(1===e.reason)return;const i=this._diffModel.get();(0,l.Rn)((e=>{for(const t of this._editors.original.getSelections()||[])null===i||void 0===i||i.ensureOriginalLineIsVisible(t.getStartPosition().lineNumber,0,e),null===i||void 0===i||i.ensureOriginalLineIsVisible(t.getEndPosition().lineNumber,0,e)}))}))),this._register(this._editors.modified.onDidChangeCursorPosition((e=>{if(1===e.reason)return;const i=this._diffModel.get();(0,l.Rn)((e=>{for(const t of this._editors.modified.getSelections()||[])null===i||void 0===i||i.ensureModifiedLineIsVisible(t.getStartPosition().lineNumber,0,e),null===i||void 0===i||i.ensureModifiedLineIsVisible(t.getEndPosition().lineNumber,0,e)}))})));const s=this._diffModel.map(((e,i)=>{var t,o;const n=null!==(t=null===e||void 0===e?void 0:e.unchangedRegions.read(i))&&void 0!==t?t:[];return 1===n.length&&1===n[0].modifiedLineNumber&&n[0].lineCount===(null===(o=this._editors.modifiedModel.read(i))||void 0===o?void 0:o.getLineCount())?[]:n}));this.viewZones=(0,l.rm)(this,((e,i)=>{const t=this._modifiedOutlineSource.read(e);if(!t)return{origViewZones:[],modViewZones:[]};const o=[],n=[],r=this._options.renderSideBySide.read(e),d=s.read(e);for(const s of d)if(!s.shouldHideControls(e)){{const e=(0,l.un)(this,(e=>s.getHiddenOriginalRange(e).startLineNumber-1)),n=new u.D1(e,24);o.push(n),i.add(new y(this._editors.original,n,s,s.originalUnchangedRange,!r,t,(e=>this._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0)),this._options))}{const e=(0,l.un)(this,(e=>s.getHiddenModifiedRange(e).startLineNumber-1)),o=new u.D1(e,24);n.push(o),i.add(new y(this._editors.modified,o,s,s.modifiedUnchangedRange,!1,t,(e=>this._diffModel.get().ensureModifiedLineIsVisible(e,2,void 0)),this._options))}}return{origViewZones:o,modViewZones:n}}));const a={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},v={description:"Fold Unchanged",glyphMarginHoverMessage:new d.Bc(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown((0,p.kg)("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+c.L.asClassName(r.W.fold),zIndex:10001};this._register((0,u.pY)(this._editors.original,(0,l.un)(this,(e=>{const i=s.read(e),t=i.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:a})));for(const o of i)o.shouldHideControls(e)&&t.push({range:f.Q.fromPositions(new _.y(o.originalLineNumber,1)),options:v});return t})))),this._register((0,u.pY)(this._editors.modified,(0,l.un)(this,(e=>{const i=s.read(e),t=i.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:a})));for(const o of i)o.shouldHideControls(e)&&t.push({range:m.M.ofLength(o.modifiedLineNumber,1).toInclusiveRange(),options:v});return t})))),this._register((0,l.fm)((e=>{const i=s.read(e);this._isUpdatingHiddenAreas=!0;try{this._editors.original.setHiddenAreas(i.map((i=>i.getHiddenOriginalRange(e).toInclusiveRange())).filter(g.O9)),this._editors.modified.setHiddenAreas(i.map((i=>i.getHiddenModifiedRange(e).toInclusiveRange())).filter(g.O9))}finally{this._isUpdatingHiddenAreas=!1}}))),this._register(this._editors.modified.onMouseUp((e=>{var i;if(!e.event.rightButton&&e.target.position&&(null===(i=e.target.element)||void 0===i?void 0:i.className.includes("fold-unchanged"))){const i=e.target.position.lineNumber,t=this._diffModel.get();if(!t)return;const o=t.unchangedRegions.get().find((e=>e.modifiedUnchangedRange.includes(i)));if(!o)return;o.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}}))),this._register(this._editors.original.onMouseUp((e=>{var i;if(!e.event.rightButton&&e.target.position&&(null===(i=e.target.element)||void 0===i?void 0:i.className.includes("fold-unchanged"))){const i=e.target.position.lineNumber,t=this._diffModel.get();if(!t)return;const o=t.unchangedRegions.get().find((e=>e.originalUnchangedRange.includes(i)));if(!o)return;o.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}})))}};D._breadcrumbsSourceFactory=(0,l.FY)("breadcrumbsSourceFactory",void 0),D=o=w([C(3,b._Y)],D);class y extends u.uN{constructor(e,i,t,o,d,a,h,c){const g=(0,n.h)("div.diff-hidden-lines-widget");super(e,i,g.root),this._editor=e,this._unchangedRegion=t,this._unchangedRegionRange=o,this._hide=d,this._modifiedOutlineSource=a,this._revealModifiedHiddenLine=h,this._options=c,this._nodes=(0,n.h)("div.diff-hidden-lines",[(0,n.h)("div.top@top",{title:(0,p.kg)("diff.hiddenLines.top","Click or drag to show more above")}),(0,n.h)("div.center@content",{style:{display:"flex"}},[(0,n.h)("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[(0,n.$)("a",{title:(0,p.kg)("showUnchangedRegion","Show Unchanged Region"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...(0,s.n)("$(unfold)"))]),(0,n.h)("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),(0,n.h)("div.bottom@bottom",{title:(0,p.kg)("diff.bottom","Click or drag to show more below"),role:"button"})]),g.root.appendChild(this._nodes.root);const m=(0,l.y0)(this._editor.onDidLayoutChange,(()=>this._editor.getLayoutInfo()));this._hide?(0,n.Ln)(this._nodes.first):this._register((0,u.AV)(this._nodes.first,{width:m.map((e=>e.contentLeft))})),this._register((0,l.fm)((e=>{const i=this._unchangedRegion.visibleLineCountTop.read(e)+this._unchangedRegion.visibleLineCountBottom.read(e)===this._unchangedRegion.lineCount;this._nodes.bottom.classList.toggle("canMoveTop",!i),this._nodes.bottom.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(e)>0),this._nodes.top.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(e)>0),this._nodes.top.classList.toggle("canMoveBottom",!i);const t=this._unchangedRegion.isDragged.read(e),o=this._editor.getDomNode();o&&(o.classList.toggle("draggingUnchangedRegion",!!t),"top"===t?(o.classList.toggle("canMoveTop",this._unchangedRegion.visibleLineCountTop.read(e)>0),o.classList.toggle("canMoveBottom",!i)):"bottom"===t?(o.classList.toggle("canMoveTop",!i),o.classList.toggle("canMoveBottom",this._unchangedRegion.visibleLineCountBottom.read(e)>0)):(o.classList.toggle("canMoveTop",!1),o.classList.toggle("canMoveBottom",!1)))})));const _=this._editor;this._register((0,n.ko)(this._nodes.top,"mousedown",(e=>{if(0!==e.button)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();const i=e.clientY;let t=!1;const o=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set("top",void 0);const s=(0,n.zk)(this._nodes.top),r=(0,n.ko)(s,"mousemove",(e=>{const n=e.clientY-i;t=t||Math.abs(n)>2;const s=Math.round(n/_.getOption(67)),r=Math.max(0,Math.min(o+s,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(r,void 0)})),d=(0,n.ko)(s,"mouseup",(e=>{t||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(void 0,void 0),r.dispose(),d.dispose()}))}))),this._register((0,n.ko)(this._nodes.bottom,"mousedown",(e=>{if(0!==e.button)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();const i=e.clientY;let t=!1;const o=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set("bottom",void 0);const s=(0,n.zk)(this._nodes.bottom),r=(0,n.ko)(s,"mousemove",(e=>{const n=e.clientY-i;t=t||Math.abs(n)>2;const s=Math.round(n/_.getOption(67)),r=Math.max(0,Math.min(o-s,this._unchangedRegion.getMaxVisibleLineCountBottom())),d=this._unchangedRegionRange.endLineNumberExclusive>_.getModel().getLineCount()?_.getContentHeight():_.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(r,void 0);const a=this._unchangedRegionRange.endLineNumberExclusive>_.getModel().getLineCount()?_.getContentHeight():_.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);_.setScrollTop(_.getScrollTop()+(a-d))})),d=(0,n.ko)(s,"mouseup",(e=>{if(this._unchangedRegion.isDragged.set(void 0,void 0),!t){const e=_.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const i=_.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);_.setScrollTop(_.getScrollTop()+(i-e))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),r.dispose(),d.dispose()}))}))),this._register((0,l.fm)((e=>{const i=[];if(!this._hide){const o=t.getHiddenModifiedRange(e).length,d=(0,p.kg)("hiddenLines","{0} hidden lines",o),a=(0,n.$)("span",{title:(0,p.kg)("diff.hiddenLines.expandAll","Double click to unfold")},d);a.addEventListener("dblclick",(e=>{0===e.button&&(e.preventDefault(),this._unchangedRegion.showAll(void 0))})),i.push(a);const l=this._unchangedRegion.getHiddenModifiedRange(e),h=this._modifiedOutlineSource.getBreadcrumbItems(l,e);if(h.length>0){i.push((0,n.$)("span",void 0,"\xa0\xa0|\xa0\xa0"));for(let e=0;e<h.length;e++){const t=h[e],o=v.gP.toIcon(t.kind),d=(0,n.h)("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[(0,s.s)(o),"\xa0",t.name,...e===h.length-1?[]:[(0,s.s)(r.W.chevronRight)]]).root;i.push(d),d.onclick=()=>{this._revealModifiedHiddenLine(t.startLineNumber)}}}}(0,n.Ln)(this._nodes.others,...i)})))}}},73109:(e,i,t)=>{t.d(i,{GM:()=>v,KL:()=>b,Kl:()=>c,Ob:()=>g,Ou:()=>f,XT:()=>m,Zb:()=>p,Zw:()=>u,bk:()=>_,dv:()=>h,wp:()=>w});var o=t(33944),n=t(48367),s=t(98605),r=t(17483),d=t(81203),a=t(39024);(0,d.x1A)("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},(0,r.kg)("diffEditor.move.border","The border color for text that got moved in the diff editor.")),(0,d.x1A)("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},(0,r.kg)("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor.")),(0,d.x1A)("diffEditor.unchangedRegionShadow",{dark:"#000000",light:"#737373BF",hcDark:"#000000",hcLight:"#737373BF"},(0,r.kg)("diffEditor.unchangedRegionShadow","The color of the shadow around unchanged region widgets."));const l=(0,a.pU)("diff-insert",o.W.add,(0,r.kg)("diffInsertIcon","Line decoration for inserts in the diff editor.")),h=(0,a.pU)("diff-remove",o.W.remove,(0,r.kg)("diffRemoveIcon","Line decoration for removals in the diff editor.")),c=s.kI.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+n.L.asClassName(l),marginClassName:"gutter-insert"}),g=s.kI.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+n.L.asClassName(h),marginClassName:"gutter-delete"}),u=s.kI.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),m=s.kI.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),_=s.kI.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),f=s.kI.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),v=s.kI.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),p=s.kI.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),b=s.kI.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),w=s.kI.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"})},64854:(e,i,t)=>{t.d(i,{$y:()=>_,AV:()=>C,Am:()=>g,D1:()=>b,EK:()=>R,MZ:()=>L,Mu:()=>S,Nu:()=>v,Vs:()=>y,b6:()=>D,pN:()=>f,pY:()=>u,rX:()=>m,uN:()=>p,wp:()=>M});var o=t(44783),n=t(53069),s=t(73926),r=t(60704),d=t(92444),a=t(55065),l=t(20603),h=t(38499),c=t(48947);function g(e,i,t,o){if(0===e.length)return i;if(0===i.length)return e;const n=[];let s=0,r=0;for(;s<e.length&&r<i.length;){const d=e[s],a=i[r],l=t(d),h=t(a);l<h?(n.push(d),s++):l>h?(n.push(a),r++):(n.push(o(d,a)),s++,r++)}for(;s<e.length;)n.push(e[s]),s++;for(;r<i.length;)n.push(i[r]),r++;return n}function u(e,i){const t=new r.Cm,o=e.createDecorationsCollection();return t.add((0,d.zL)({debugName:()=>"Apply decorations from ".concat(i.debugName)},(e=>{const t=i.read(e);o.set(t)}))),t.add({dispose:()=>{o.clear()}}),t}function m(e,i){return e.appendChild(i),(0,r.s)((()=>{e.removeChild(i)}))}function _(e,i){return e.prepend(i),(0,r.s)((()=>{e.removeChild(i)}))}class f extends r.jG{get width(){return this._width}get height(){return this._height}constructor(e,i){super(),this.elementSizeObserver=this._register(new a.u(e,i)),this._width=(0,d.FY)(this,this.elementSizeObserver.getWidth()),this._height=(0,d.FY)(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange((e=>(0,d.Rn)((e=>{this._width.set(this.elementSizeObserver.getWidth(),e),this._height.set(this.elementSizeObserver.getHeight(),e)})))))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function v(e,i,t){let o=i.get(),n=o,s=o;const r=(0,d.FY)("animatedValue",o);let a=-1;let l;function h(){const i=Date.now()-a;var t,d,c,g;s=Math.floor((d=n,c=o-n,(t=i)===(g=300)?d+c:c*(1-Math.pow(2,-10*t/g))+d)),i<300?l=e.requestAnimationFrame(h):s=o,r.set(s,void 0)}return t.add((0,d.Y)({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(e,t)=>(e.didChange(i)&&(t.animate=t.animate||e.change),!0)},((t,r)=>{void 0!==l&&(e.cancelAnimationFrame(l),l=void 0),n=s,o=i.read(t),a=Date.now()-(r.animate?0:300),h()}))),r}class p extends r.jG{constructor(e,i,t){super(),this._register(new w(e,t)),this._register(C(t,{height:i.actualHeight,top:i.actualTop}))}}class b{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,i){this._afterLineNumber=e,this.heightInPx=i,this.domNode=document.createElement("div"),this._actualTop=(0,d.FY)(this,void 0),this._actualHeight=(0,d.FY)(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=e=>{this._actualTop.set(e,void 0)},this.onComputedHeight=e=>{this._actualHeight.set(e,void 0)}}}class w{constructor(e,i){this._editor=e,this._domElement=i,this._overlayWidgetId="managedOverlayWidget-".concat(w._counter++),this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}function C(e,i){return(0,d.fm)((t=>{for(let[o,n]of Object.entries(i))n&&"object"===typeof n&&"read"in n&&(n=n.read(t)),"number"===typeof n&&(n="".concat(n,"px")),o=o.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),e.style[o]=n}))}function D(e,i){return function(e,i){if((0,s.e)()){(0,d.yQ)("reload",(i=>(0,s.O)((t=>{let{oldExports:o}=t;if([...Object.values(o)].some((i=>e.includes(i))))return e=>(i(void 0),!0)})))).read(i)}}([e],i),e}function y(e,i,t,o){const n=new r.Cm,s=[];return n.add((0,d.yC)(((n,r)=>{const a=i.read(n),l=new Map,h=new Map;t&&t(!0),e.changeViewZones((e=>{for(const i of s)e.removeZone(i),null===o||void 0===o||o.delete(i);s.length=0;for(const i of a){const t=e.addZone(i);i.setZoneId&&i.setZoneId(t),s.push(t),null===o||void 0===o||o.add(t),l.set(i,t)}})),t&&t(!1),r.add((0,d.Y)({createEmptyChangeSummary:()=>({zoneIds:[]}),handleChange(e,i){const t=h.get(e.changedObservable);return void 0!==t&&i.zoneIds.push(t),!0}},((i,o)=>{for(const e of a)e.onChange&&(h.set(e.onChange,l.get(e)),e.onChange.read(i));t&&t(!0),e.changeViewZones((e=>{for(const i of o.zoneIds)e.layoutZone(i)})),t&&t(!1)})))}))),n.add({dispose(){t&&t(!0),e.changeViewZones((e=>{for(const i of s)e.removeZone(i)})),null===o||void 0===o||o.clear(),t&&t(!1)}}),n}w._counter=0;class L extends n.Qi{dispose(){super.dispose(!0)}}function S(e,i){const t=(0,o.Uk)(i,(i=>i.original.startLineNumber<=e.lineNumber));if(!t)return h.Q.fromPositions(e);if(t.original.endLineNumberExclusive<=e.lineNumber){const i=e.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return h.Q.fromPositions(new l.y(i,e.column))}if(!t.innerChanges)return h.Q.fromPositions(new l.y(t.modified.startLineNumber,1));const n=(0,o.Uk)(t.innerChanges,(i=>i.originalRange.getStartPosition().isBeforeOrEqual(e)));if(!n){const i=e.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return h.Q.fromPositions(new l.y(i,e.column))}if(n.originalRange.containsPosition(e))return n.modifiedRange;{const i=(s=n.originalRange.getEndPosition(),r=e,s.lineNumber===r.lineNumber?new c.W(0,r.column-s.column):new c.W(r.lineNumber-s.lineNumber,r.column-1));return h.Q.fromPositions(i.addToPosition(n.modifiedRange.getEndPosition()))}var s,r}function M(e,i,t){const o=e.bindTo(i);return(0,d.zL)({debugName:()=>'Set Context Key "'.concat(e.key,'"')},(e=>{o.set(t(e))}))}function R(e,i){let t;return e.filter((e=>{const o=i(e,t);return t=e,o}))}},19486:(e,i,t)=>{t.d(i,{T:()=>f,i:()=>v});var o,n=t(56253),s=t(63919),r=t(74821),d=t(4640),a=t(60704),l=t(58431),h=t(48188),c=t(32487),g=t(82868),u=t(29321),m=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},_=function(e,i){return function(t,o){i(t,o,e)}};let f=o=class{constructor(e,i,t){this._options=e,this._languageService=i,this._openerService=t,this._onDidRenderAsync=new d.vl,this.onDidRenderAsync=this._onDidRenderAsync.event}dispose(){this._onDidRenderAsync.dispose()}render(e,i,t){if(!e){return{element:document.createElement("span"),dispose:()=>{}}}const o=new a.Cm,s=o.add((0,n.Gc)(e,{...this._getRenderOptions(e,o),...i},t));return s.element.classList.add("rendered-markdown"),{element:s.element,dispose:()=>o.dispose()}}_getRenderOptions(e,i){return{codeBlockRenderer:async(e,i)=>{var t,n,s;let r;e?r=this._languageService.getLanguageIdByLanguageName(e):this._options.editor&&(r=null===(t=this._options.editor.getModel())||void 0===t?void 0:t.getLanguageId()),r||(r=c.vH);const d=await(0,g.Yj)(this._languageService,i,r),a=document.createElement("span");if(a.innerHTML=null!==(s=null===(n=o._ttpTokenizer)||void 0===n?void 0:n.createHTML(d))&&void 0!==s?s:d,this._options.editor){const e=this._options.editor.getOption(50);(0,l.M)(a,e)}else this._options.codeBlockFontFamily&&(a.style.fontFamily=this._options.codeBlockFontFamily);return void 0!==this._options.codeBlockFontSize&&(a.style.fontSize=this._options.codeBlockFontSize),a},asyncRenderCallback:()=>this._onDidRenderAsync.fire(),actionHandler:{callback:i=>v(this._openerService,i,e.isTrusted),disposables:i}}}};async function v(e,i,t){try{return await e.open(i,{fromUserGesture:!0,allowContributedOpeners:!0,allowCommands:p(t)})}catch(o){return(0,r.dz)(o),!1}}function p(e){return!0===e||!(!e||!Array.isArray(e.enabledCommands))&&e.enabledCommands}f._ttpTokenizer=(0,s.H)("tokenizeToString",{createHTML:e=>e}),f=o=m([_(1,h.L),_(2,u.C)],f)},18626:(e,i,t)=>{t.d(i,{c:()=>H});var o=t(60704),n=t(92444),s=t(64854),r=t(29563),d=t(90049),a=t(55648),l=t(44783),h=t(74821),c=t(22384),g=t(79103),u=t(59874),m=t(60928),_=t(20484),f=t(26376),v=t(17837),p=t(2703),b=t(10003),w=t(33944),C=t(3553),D=t(39230),y=t(90585),L=t(6665),S=t(12487),M=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},R=function(e,i){return function(t,o){i(t,o,e)}};class E{constructor(e,i){this.viewModel=e,this.deltaScrollVertical=i}getId(){return this.viewModel}}let N=class extends o.jG{constructor(e,i,t,s){super(),this._container=e,this._overflowWidgetsDomNode=i,this._workbenchUIElementFactory=t,this._instantiationService=s,this._viewModel=(0,c.FY)(this,void 0),this._collapsed=(0,n.un)(this,(e=>{var i;return null===(i=this._viewModel.read(e))||void 0===i?void 0:i.collapsed.read(e)})),this._editorContentHeight=(0,c.FY)(this,500),this.contentHeight=(0,n.un)(this,(e=>(this._collapsed.read(e)?0:this._editorContentHeight.read(e))+this._outerEditorHeight)),this._modifiedContentWidth=(0,c.FY)(this,0),this._modifiedWidth=(0,c.FY)(this,0),this._originalContentWidth=(0,c.FY)(this,0),this._originalWidth=(0,c.FY)(this,0),this.maxScroll=(0,n.un)(this,(e=>{const i=this._modifiedContentWidth.read(e)-this._modifiedWidth.read(e),t=this._originalContentWidth.read(e)-this._originalWidth.read(e);return i>t?{maxScroll:i,width:this._modifiedWidth.read(e)}:{maxScroll:t,width:this._originalWidth.read(e)}})),this._elements=(0,r.h)("div.multiDiffEntry",[(0,r.h)("div.header@header",[(0,r.h)("div.header-content",[(0,r.h)("div.collapse-button@collapseButton"),(0,r.h)("div.file-path",[(0,r.h)("div.title.modified.show-file-icons@primaryPath",[]),(0,r.h)("div.status.deleted@status",["R"]),(0,r.h)("div.title.original.show-file-icons@secondaryPath",[])]),(0,r.h)("div.actions@actions")])]),(0,r.h)("div.editorParent",[(0,r.h)("div.editorContainer@editor")])]),this.editor=this._register(this._instantiationService.createInstance(C.T,this._elements.editor,{overflowWidgetsDomNode:this._overflowWidgetsDomNode},{})),this.isModifedFocused=I(this.editor.getModifiedEditor()),this.isOriginalFocused=I(this.editor.getOriginalEditor()),this.isFocused=(0,n.un)(this,(e=>this.isModifedFocused.read(e)||this.isOriginalFocused.read(e))),this._resourceLabel=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath)):void 0,this._resourceLabel2=this._workbenchUIElementFactory.createResourceLabel?this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath)):void 0,this._dataStore=new o.Cm,this._headerHeight=40,this._lastScrollTop=-1,this._isSettingScrollTop=!1;const d=new b.$(this._elements.collapseButton,{});this._register((0,n.fm)((e=>{d.element.className="",d.icon=this._collapsed.read(e)?w.W.chevronRight:w.W.chevronDown}))),this._register(d.onDidClick((()=>{var e;null===(e=this._viewModel.get())||void 0===e||e.collapsed.set(!this._collapsed.get(),void 0)}))),this._register((0,n.fm)((e=>{this._elements.editor.style.display=this._collapsed.read(e)?"none":"block"}))),this._register(this.editor.getModifiedEditor().onDidLayoutChange((e=>{const i=this.editor.getModifiedEditor().getLayoutInfo().contentWidth;this._modifiedWidth.set(i,void 0)}))),this._register(this.editor.getOriginalEditor().onDidLayoutChange((e=>{const i=this.editor.getOriginalEditor().getLayoutInfo().contentWidth;this._originalWidth.set(i,void 0)}))),this._register(this.editor.onDidContentSizeChange((e=>{(0,c.YY)((i=>{this._editorContentHeight.set(e.contentHeight,i),this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(),i),this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(),i)}))}))),this._register(this.editor.getOriginalEditor().onDidScrollChange((e=>{if(this._isSettingScrollTop)return;if(!e.scrollTopChanged||!this._data)return;const i=e.scrollTop-this._lastScrollTop;this._data.deltaScrollVertical(i)}))),this._register((0,n.fm)((e=>{var i;const t=null===(i=this._viewModel.read(e))||void 0===i?void 0:i.isActive.read(e);this._elements.root.classList.toggle("active",t)}))),this._container.appendChild(this._elements.root),this._outerEditorHeight=this._headerHeight,this._register(this._instantiationService.createInstance(D.m,this._elements.actions,y.D8.MultiDiffEditorFileToolbar,{actionRunner:this._register(new L.I((()=>{var e;return null===(e=this._viewModel.get())||void 0===e?void 0:e.modifiedUri}))),menuOptions:{shouldForwardArgs:!0},toolbarOptions:{primaryGroup:e=>e.startsWith("navigation")},actionViewItemProvider:(e,i)=>(0,S.rN)(s,e,i)}))}setScrollLeft(e){this._modifiedContentWidth.get()-this._modifiedWidth.get()>this._originalContentWidth.get()-this._originalWidth.get()?this.editor.getModifiedEditor().setScrollLeft(e):this.editor.getOriginalEditor().setScrollLeft(e)}setData(e){function i(e){return{...e,scrollBeyondLastLine:!1,hideUnchangedRegions:{enabled:!0},scrollbar:{vertical:"hidden",horizontal:"hidden",handleMouseWheel:!1,useShadows:!1},renderOverviewRuler:!1,fixedOverflowWidgets:!0,overviewRulerBorder:!1}}this._data=e;const t=e.viewModel.entry.value;t.onOptionsDidChange&&this._dataStore.add(t.onOptionsDidChange((()=>{var e;this.editor.updateOptions(i(null!==(e=t.options)&&void 0!==e?e:{}))}))),(0,c.YY)((o=>{var n,s,r,d;null===(n=this._resourceLabel)||void 0===n||n.setUri(null!==(s=e.viewModel.modifiedUri)&&void 0!==s?s:e.viewModel.originalUri,{strikethrough:void 0===e.viewModel.modifiedUri});let a=!1,l=!1,h=!1,c="";e.viewModel.modifiedUri&&e.viewModel.originalUri&&e.viewModel.modifiedUri.path!==e.viewModel.originalUri.path?(c="R",a=!0):e.viewModel.modifiedUri?e.viewModel.originalUri||(c="A",h=!0):(c="D",l=!0),this._elements.status.classList.toggle("renamed",a),this._elements.status.classList.toggle("deleted",l),this._elements.status.classList.toggle("added",h),this._elements.status.innerText=c,null===(r=this._resourceLabel2)||void 0===r||r.setUri(a?e.viewModel.originalUri:void 0,{strikethrough:!0}),this._dataStore.clear(),this._viewModel.set(e.viewModel,o),this.editor.setModel(e.viewModel.diffEditorViewModel,o),this.editor.updateOptions(i(null!==(d=t.options)&&void 0!==d?d:{}))}))}render(e,i,t,o){this._elements.root.style.visibility="visible",this._elements.root.style.top="".concat(e.start,"px"),this._elements.root.style.height="".concat(e.length,"px"),this._elements.root.style.width="".concat(i,"px"),this._elements.root.style.position="absolute";const n=e.length-this._headerHeight,s=Math.max(0,Math.min(o.start-e.start,n));this._elements.header.style.transform="translateY(".concat(s,"px)"),(0,c.YY)((t=>{this.editor.layout({width:i-16-2,height:e.length-this._outerEditorHeight})}));try{this._isSettingScrollTop=!0,this._lastScrollTop=t,this.editor.getOriginalEditor().setScrollTop(t)}finally{this._isSettingScrollTop=!1}this._elements.header.classList.toggle("shadow",s>0||t>0),this._elements.header.classList.toggle("collapsed",s===n)}hide(){this._elements.root.style.top="-100000px",this._elements.root.style.visibility="hidden"}};function I(e){return(0,n.y0)((i=>{const t=new o.Cm;return t.add(e.onDidFocusEditorWidget((()=>i(!0)))),t.add(e.onDidBlurEditorWidget((()=>i(!1)))),t}),(()=>e.hasTextFocus()))}N=M([R(3,v._Y)],N);class T{constructor(e){this._create=e,this._unused=new Set,this._used=new Set,this._itemData=new Map}getUnusedObj(e){var i;let t;if(0===this._unused.size)t=this._create(e),this._itemData.set(t,e);else{const o=[...this._unused.values()];t=null!==(i=o.find((i=>this._itemData.get(i).getId()===e.getId())))&&void 0!==i?i:o[0],this._unused.delete(t),this._itemData.set(t,e),t.setData(e)}return this._used.add(t),{object:t,dispose:()=>{this._used.delete(t),this._unused.size>5?t.dispose():this._unused.add(t)}}}dispose(){for(const e of this._used)e.dispose();for(const e of this._unused)e.dispose();this._used.clear(),this._unused.clear()}}var x=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},O=function(e,i){return function(t,o){i(t,o,e)}};let P=class extends o.jG{constructor(e,i,t,u,m,v){super(),this._element=e,this._dimension=i,this._viewModel=t,this._workbenchUIElementFactory=u,this._parentContextKeyService=m,this._parentInstantiationService=v,this._elements=(0,r.h)("div.monaco-component.multiDiffEditor",[(0,r.h)("div@content",{style:{overflow:"hidden"}}),(0,r.h)("div.monaco-editor@overflowWidgetsDomNode",{})]),this._sizeObserver=this._register(new s.pN(this._element,void 0)),this._objectPool=this._register(new T((e=>{const i=this._instantiationService.createInstance(N,this._elements.content,this._elements.overflowWidgetsDomNode,this._workbenchUIElementFactory);return i.setData(e),i}))),this._scrollable=this._register(new g.yE({forceIntegerValues:!1,scheduleAtNextAnimationFrame:e=>(0,r.PG)((0,r.zk)(this._element),e),smoothScrollDuration:100})),this._scrollableElement=this._register(new d.oO(this._elements.root,{vertical:1,horizontal:1,useShadows:!1},this._scrollable)),this.scrollTop=(0,n.y0)(this._scrollableElement.onScroll,(()=>this._scrollableElement.getScrollPosition().scrollTop)),this.scrollLeft=(0,n.y0)(this._scrollableElement.onScroll,(()=>this._scrollableElement.getScrollPosition().scrollLeft)),this._viewItemsInfo=(0,n.rm)(this,((e,i)=>{const t=this._viewModel.read(e);if(!t)return{items:[],getItem:e=>{throw new h.D7}};const o=t.items.read(e),n=new Map;return{items:o.map((e=>{var t;const o=i.add(new V(e,this._objectPool,this.scrollLeft,(e=>{this._scrollableElement.setScrollPosition({scrollTop:this._scrollableElement.getScrollPosition().scrollTop+e})}))),s=null===(t=this._lastDocStates)||void 0===t?void 0:t[o.getKey()];return s&&(0,c.Rn)((e=>{o.setViewState(s,e)})),n.set(e,o),o})),getItem:e=>n.get(e)}})),this._viewItems=this._viewItemsInfo.map(this,(e=>e.items)),this._spaceBetweenPx=0,this._totalHeight=this._viewItems.map(this,((e,i)=>e.reduce(((e,t)=>e+t.contentHeight.read(i)+this._spaceBetweenPx),0))),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._element)),this._instantiationService=this._parentInstantiationService.createChild(new p.a([f.fN,this._contextKeyService])),this._lastDocStates={},this._contextKeyService.createKey(_.R.inMultiDiffEditor.key,!0),this._register((0,n.yC)(((e,i)=>{const t=this._viewModel.read(e);if(t&&t.contextKeys)for(const[n,s]of Object.entries(t.contextKeys)){const e=this._contextKeyService.createKey(n,void 0);e.set(s),i.add((0,o.s)((()=>e.reset())))}})));const b=this._parentContextKeyService.createKey(_.R.multiDiffEditorAllCollapsed.key,!1);this._register((0,n.fm)((e=>{const i=this._viewModel.read(e);if(i){const t=i.items.read(e).every((i=>i.collapsed.read(e)));b.set(t)}}))),this._register((0,n.fm)((e=>{const i=this._dimension.read(e);this._sizeObserver.observe(i)}))),this._elements.content.style.position="relative",this._register((0,n.fm)((e=>{const i=this._sizeObserver.height.read(e);this._elements.root.style.height="".concat(i,"px");const t=this._totalHeight.read(e);this._elements.content.style.height="".concat(t,"px");const o=this._sizeObserver.width.read(e);let n=o;const s=this._viewItems.read(e),r=(0,l.Cn)(s,(0,a.VE)((i=>i.maxScroll.read(e).maxScroll),a.U9));if(r){n=o+r.maxScroll.read(e).maxScroll}this._scrollableElement.setScrollDimensions({width:o,height:i,scrollHeight:t,scrollWidth:n})}))),e.replaceChildren(this._scrollableElement.getDomNode()),this._register((0,o.s)((()=>{e.replaceChildren()}))),this._register(this._register((0,n.fm)((e=>{(0,c.YY)((i=>{this.render(e)}))}))))}render(e){const i=this.scrollTop.read(e);let t=0,o=0,n=0;const s=this._sizeObserver.height.read(e),r=u.L.ofStartAndLength(i,s),d=this._sizeObserver.width.read(e);for(const a of this._viewItems.read(e)){const l=a.contentHeight.read(e),h=Math.min(l,s),c=u.L.ofStartAndLength(o,h),g=u.L.ofStartAndLength(n,l);if(g.isBefore(r))t-=l-h,a.hide();else if(g.isAfter(r))a.hide();else{const e=Math.max(0,Math.min(r.start-g.start,l-h));t-=e;const o=u.L.ofStartAndLength(i+t,s);a.render(c,e,d,o)}o+=h+this._spaceBetweenPx,n+=l+this._spaceBetweenPx}this._elements.content.style.transform="translateY(".concat(-(i+t),"px)")}};P=x([O(4,f.fN),O(5,v._Y)],P);class V extends o.jG{constructor(e,i,t,o){super(),this.viewModel=e,this._objectPool=i,this._scrollLeft=t,this._deltaScrollVertical=o,this._templateRef=this._register((0,c.X2)(this,void 0)),this.contentHeight=(0,n.un)(this,(e=>{var i,t,o;return null!==(o=null===(t=null===(i=this._templateRef.read(e))||void 0===i?void 0:i.object.contentHeight)||void 0===t?void 0:t.read(e))&&void 0!==o?o:this.viewModel.lastTemplateData.read(e).contentHeight})),this.maxScroll=(0,n.un)(this,(e=>{var i,t;return null!==(t=null===(i=this._templateRef.read(e))||void 0===i?void 0:i.object.maxScroll.read(e))&&void 0!==t?t:{maxScroll:0,scrollWidth:0}})),this.template=(0,n.un)(this,(e=>{var i;return null===(i=this._templateRef.read(e))||void 0===i?void 0:i.object})),this._isHidden=(0,n.FY)(this,!1),this._isFocused=(0,n.un)(this,(e=>{var i,t;return null!==(t=null===(i=this.template.read(e))||void 0===i?void 0:i.isFocused.read(e))&&void 0!==t&&t})),this.viewModel.setIsFocused(this._isFocused,void 0),this._register((0,n.fm)((e=>{var i;const t=this._scrollLeft.read(e);null===(i=this._templateRef.read(e))||void 0===i||i.object.setScrollLeft(t)}))),this._register((0,n.fm)((e=>{const i=this._templateRef.read(e);if(!i)return;if(!this._isHidden.read(e))return;i.object.isFocused.read(e)||this._clear()})))}dispose(){this._clear(),super.dispose()}toString(){var e;return"VirtualViewItem(".concat(null===(e=this.viewModel.entry.value.modified)||void 0===e?void 0:e.uri.toString(),")")}getKey(){return this.viewModel.getKey()}setViewState(e,i){var t;this.viewModel.collapsed.set(e.collapsed,i),this._updateTemplateData(i);const o=this.viewModel.lastTemplateData.get(),n=null===(t=e.selections)||void 0===t?void 0:t.map(m.L.liftSelection);this.viewModel.lastTemplateData.set({...o,selections:n},i);const s=this._templateRef.get();s&&n&&s.object.editor.setSelections(n)}_updateTemplateData(e){var i;const t=this._templateRef.get();t&&this.viewModel.lastTemplateData.set({contentHeight:t.object.contentHeight.get(),selections:null!==(i=t.object.editor.getSelections())&&void 0!==i?i:void 0},e)}_clear(){const e=this._templateRef.get();e&&(0,c.Rn)((i=>{this._updateTemplateData(i),e.object.hide(),this._templateRef.set(void 0,i)}))}hide(){this._isHidden.set(!0,void 0)}render(e,i,t,o){this._isHidden.set(!1,void 0);let n=this._templateRef.get();if(!n){n=this._objectPool.getUnusedObj(new E(this.viewModel,this._deltaScrollVertical)),this._templateRef.set(n,void 0);const e=this.viewModel.lastTemplateData.get().selections;e&&n.object.editor.setSelections(e)}n.object.render(e,t,i,o)}}var W=t(17483),A=t(81203);(0,A.x1A)("multiDiffEditor.headerBackground",{dark:"#262626",light:"tab.inactiveBackground",hcDark:"tab.inactiveBackground",hcLight:"tab.inactiveBackground"},(0,W.kg)("multiDiffEditor.headerBackground","The background color of the diff editor's header")),(0,A.x1A)("multiDiffEditor.background",{dark:"editorBackground",light:"editorBackground",hcDark:"editorBackground",hcLight:"editorBackground"},(0,W.kg)("multiDiffEditor.background","The background color of the multi file diff editor")),(0,A.x1A)("multiDiffEditor.border",{dark:"sideBarSectionHeader.border",light:"#cccccc",hcDark:"sideBarSectionHeader.border",hcLight:"#cccccc"},(0,W.kg)("multiDiffEditor.border","The border color of the multi file diff editor"));var F=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},k=function(e,i){return function(t,o){i(t,o,e)}};let H=class extends o.jG{constructor(e,i,t){super(),this._element=e,this._workbenchUIElementFactory=i,this._instantiationService=t,this._dimension=(0,n.FY)(this,void 0),this._viewModel=(0,n.FY)(this,void 0),this._widgetImpl=(0,n.rm)(this,((e,i)=>((0,s.b6)(N,e),i.add(this._instantiationService.createInstance((0,s.b6)(P,e),this._element,this._dimension,this._viewModel,this._workbenchUIElementFactory))))),this._register((0,n.OI)(this._widgetImpl))}};H=F([k(2,v._Y)],H)},6665:(e,i,t)=>{t.d(i,{I:()=>n});var o=t(49071);class n extends o.LN{constructor(e){super(),this._getContext=e}runAction(e,i){const t=this._getContext();return super.runAction(e,t)}}}}]);
//# sourceMappingURL=monaco-editor-vendor.55a95165.195c1359.js.map