"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[789],{48483:function(e,i,t){t.d(i,{Gm:function(){return $}});var n=t(29439),o=t(37762),r=t(97326),a=t(11752),s=t(61120),d=t(60136),l=t(43668),u=t(15671),h=t(43144),c=(t(2893),t(87697)),g=t(53210),f=t(68552),m=t(28941),v=t(10526),_=t(16496),p=t(68915),D=t(98351),w=t(56692),y=t(5415),C=t(57687),b=t(31492),E=t(32584),S=t(34538),L=t(10849),N=t(30788),k=t(52091),R=t(72048),I=t(52925),M=t(44474),T=t(49500),O=t(2374),x=t(6574),W=t(80270),P=t(89850),V=t(49525),F=t(8850),Z=t(30045),A=t(13023),H=t(3553),z=t(99277),U=t(64272),B=t(49304),q=t(36652),j=t(13805),K=t(89125),Q=t(6815),J=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},X=function(e,i){return function(t,n){i(t,n,e)}},G=0,Y=function(){function e(i,t,n,o,r){(0,u.Z)(this,e),this.model=i,this.viewModel=t,this.view=n,this.hasRealView=o,this.listenersToRemove=r}return(0,h.Z)(e,[{key:"dispose",value:function(){(0,v.B9)(this.listenersToRemove),this.model.onBeforeDetached(),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}]),e}(),$=function(e){(0,d.Z)(t,e);var i=(0,l.Z)(t);function t(e,n,a,s,d,l,h,c,g,v,_){var p;(0,u.Z)(this,t),(p=i.call(this)).languageConfigurationService=_,p._onDidDispose=p._register(new m.Q5),p.onDidDispose=p._onDidDispose.event,p._onDidChangeModelContent=p._register(new m.Q5),p.onDidChangeModelContent=p._onDidChangeModelContent.event,p._onDidChangeModelLanguage=p._register(new m.Q5),p.onDidChangeModelLanguage=p._onDidChangeModelLanguage.event,p._onDidChangeModelLanguageConfiguration=p._register(new m.Q5),p.onDidChangeModelLanguageConfiguration=p._onDidChangeModelLanguageConfiguration.event,p._onDidChangeModelOptions=p._register(new m.Q5),p.onDidChangeModelOptions=p._onDidChangeModelOptions.event,p._onDidChangeModelDecorations=p._register(new m.Q5),p.onDidChangeModelDecorations=p._onDidChangeModelDecorations.event,p._onDidChangeConfiguration=p._register(new m.Q5),p.onDidChangeConfiguration=p._onDidChangeConfiguration.event,p._onDidChangeModel=p._register(new m.Q5),p.onDidChangeModel=p._onDidChangeModel.event,p._onDidChangeCursorPosition=p._register(new m.Q5),p.onDidChangeCursorPosition=p._onDidChangeCursorPosition.event,p._onDidChangeCursorSelection=p._register(new m.Q5),p.onDidChangeCursorSelection=p._onDidChangeCursorSelection.event,p._onDidAttemptReadOnlyEdit=p._register(new m.Q5),p.onDidAttemptReadOnlyEdit=p._onDidAttemptReadOnlyEdit.event,p._onDidLayoutChange=p._register(new m.Q5),p.onDidLayoutChange=p._onDidLayoutChange.event,p._editorTextFocus=p._register(new ee),p.onDidFocusEditorText=p._editorTextFocus.onDidChangeToTrue,p.onDidBlurEditorText=p._editorTextFocus.onDidChangeToFalse,p._editorWidgetFocus=p._register(new ee),p.onDidFocusEditorWidget=p._editorWidgetFocus.onDidChangeToTrue,p.onDidBlurEditorWidget=p._editorWidgetFocus.onDidChangeToFalse,p._onWillType=p._register(new m.Q5),p.onWillType=p._onWillType.event,p._onDidType=p._register(new m.Q5),p.onDidType=p._onDidType.event,p._onDidCompositionStart=p._register(new m.Q5),p.onDidCompositionStart=p._onDidCompositionStart.event,p._onDidCompositionEnd=p._register(new m.Q5),p.onDidCompositionEnd=p._onDidCompositionEnd.event,p._onDidPaste=p._register(new m.Q5),p.onDidPaste=p._onDidPaste.event,p._onMouseUp=p._register(new m.Q5),p.onMouseUp=p._onMouseUp.event,p._onMouseDown=p._register(new m.Q5),p.onMouseDown=p._onMouseDown.event,p._onMouseDrag=p._register(new m.Q5),p.onMouseDrag=p._onMouseDrag.event,p._onMouseDrop=p._register(new m.Q5),p.onMouseDrop=p._onMouseDrop.event,p._onMouseDropCanceled=p._register(new m.Q5),p.onMouseDropCanceled=p._onMouseDropCanceled.event,p._onContextMenu=p._register(new m.Q5),p.onContextMenu=p._onContextMenu.event,p._onMouseMove=p._register(new m.Q5),p.onMouseMove=p._onMouseMove.event,p._onMouseLeave=p._register(new m.Q5),p.onMouseLeave=p._onMouseLeave.event,p._onMouseWheel=p._register(new m.Q5),p.onMouseWheel=p._onMouseWheel.event,p._onKeyUp=p._register(new m.Q5),p.onKeyUp=p._onKeyUp.event,p._onKeyDown=p._register(new m.Q5),p.onKeyDown=p._onKeyDown.event,p._onDidContentSizeChange=p._register(new m.Q5),p.onDidContentSizeChange=p._onDidContentSizeChange.event,p._onDidScrollChange=p._register(new m.Q5),p.onDidScrollChange=p._onDidScrollChange.event,p._onDidChangeViewZones=p._register(new m.Q5),p.onDidChangeViewZones=p._onDidChangeViewZones.event,p._onDidChangeHiddenAreas=p._register(new m.Q5),p.onDidChangeHiddenAreas=p._onDidChangeHiddenAreas.event,p._bannerDomNode=null;var w,y=Object.assign({},n);p._domElement=e,p._overflowWidgetsDomNode=y.overflowWidgetsDomNode,delete y.overflowWidgetsDomNode,p._id=++G,p._decorationTypeKeysToIds={},p._decorationTypeSubtypes={},p._telemetryData=a.telemetryData,p._configuration=p._register(p._createConfiguration(a.isSimpleWidget||!1,y,v)),p._register(p._configuration.onDidChange((function(e){p._onDidChangeConfiguration.fire(e);var i=p._configuration.options;if(e.hasChanged(131)){var t=i.get(131);p._onDidLayoutChange.fire(t)}}))),p._contextKeyService=p._register(h.createScoped(p._domElement)),p._notificationService=g,p._codeEditorService=d,p._commandService=l,p._themeService=c,p._register(new ie((0,r.Z)(p),p._contextKeyService)),p._register(new te((0,r.Z)(p),p._contextKeyService)),p._instantiationService=s.createChild(new Z.y([V.i6,p._contextKeyService])),p._modelData=null,p._contributions={},p._actions={},p._focusTracker=new ne(e),p._register(p._focusTracker.onChange((function(){p._editorWidgetFocus.setValue(p._focusTracker.hasFocus())}))),p._contentWidgets={},p._overlayWidgets={},w=Array.isArray(a.contributions)?a.contributions:D.Uc.getEditorContributions();var C,b=(0,o.Z)(w);try{for(b.s();!(C=b.n()).done;){var E=C.value;if(p._contributions[E.id])(0,f.dL)(new Error("Cannot have two contributions with the same id ".concat(E.id)));else try{var S=p._instantiationService.createInstance(E.ctor,(0,r.Z)(p));p._contributions[E.id]=S}catch(L){(0,f.dL)(L)}}}catch(L){b.e(L)}finally{b.f()}return D.Uc.getEditorActions().forEach((function(e){if(p._actions[e.id])(0,f.dL)(new Error("Cannot have two actions with the same id ".concat(e.id)));else{var i=new R.p(e.id,e.label,e.alias,(0,U.f6)(e.precondition),(function(){return p._instantiationService.invokeFunction((function(i){return Promise.resolve(e.runEditorCommand(i,(0,r.Z)(p),null))}))}),p._contextKeyService);p._actions[i.id]=i}})),p._codeEditorService.addCodeEditor((0,r.Z)(p)),p}return(0,h.Z)(t,[{key:"isSimpleWidget",get:function(){return this._configuration.isSimpleWidget}},{key:"_createConfiguration",value:function(e,i,t){return new p.z(e,i,this._domElement,t)}},{key:"getId",value:function(){return this.getEditorType()+":"+this._id}},{key:"getEditorType",value:function(){return I.g.ICodeEditor}},{key:"dispose",value:function(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose();for(var e=Object.keys(this._contributions),i=0,n=e.length;i<n;i++){var o=e[i];this._contributions[o].dispose()}this._contributions={},this._actions={},this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),(0,a.Z)((0,s.Z)(t.prototype),"dispose",this).call(this)}},{key:"invokeWithinContext",value:function(e){return this._instantiationService.invokeFunction(e)}},{key:"updateOptions",value:function(e){this._configuration.updateOptions(e||{})}},{key:"getOptions",value:function(){return this._configuration.options}},{key:"getOption",value:function(e){return this._configuration.options.get(e)}},{key:"getRawOptions",value:function(){return this._configuration.getRawOptions()}},{key:"getOverflowWidgetsDomNode",value:function(){return this._overflowWidgetsDomNode}},{key:"getConfiguredWordAtPosition",value:function(e){return this._modelData?j.w.getWordAtPosition(this._modelData.model,this._configuration.options.get(117),e):null}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this._modelData)return"";var i=!(!e||!e.preserveBOM),t=0;return e&&e.lineEnding&&"\n"===e.lineEnding?t=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(t=2),this._modelData.model.getValue(t,i)}},{key:"setValue",value:function(e){this._modelData&&this._modelData.model.setValue(e)}},{key:"getModel",value:function(){return this._modelData?this._modelData.model:null}},{key:"setModel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=e;if((null!==this._modelData||null!==i)&&(!this._modelData||this._modelData.model!==i)){var t=this.hasTextFocus(),n=this._detachModel();this._attachModel(i),t&&this.hasModel()&&this.focus();var o={oldModelUrl:n?n.uri:null,newModelUrl:i?i.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(o),this._postDetachModelCleanup(n)}}},{key:"_removeDecorationTypes",value:function(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(var e in this._decorationTypeSubtypes){var i=this._decorationTypeSubtypes[e];for(var t in i)this._removeDecorationType(e+"-"+t)}this._decorationTypeSubtypes={}}}},{key:"getVisibleRanges",value:function(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}},{key:"getVisibleRangesPlusViewportAboveBelow",value:function(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}},{key:"getWhitespaces",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}},{key:"getTopForLineNumber",value:function(e){return this._modelData?t._getVerticalOffsetForPosition(this._modelData,e,1):-1}},{key:"getTopForPosition",value:function(e,i){return this._modelData?t._getVerticalOffsetForPosition(this._modelData,e,i):-1}},{key:"setHiddenAreas",value:function(e){this._modelData&&this._modelData.viewModel.setHiddenAreas(e.map((function(e){return N.e.lift(e)})))}},{key:"getVisibleColumnFromPosition",value:function(e){if(!this._modelData)return e.column;var i=this._modelData.model.validatePosition(e),t=this._modelData.model.getOptions().tabSize;return S.i.visibleColumnFromColumn(this._modelData.model.getLineContent(i.lineNumber),i.column,t)+1}},{key:"getPosition",value:function(){return this._modelData?this._modelData.viewModel.getPosition():null}},{key:"setPosition",value:function(e){if(this._modelData){if(!L.L.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections("api",[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}},{key:"_sendRevealRange",value:function(e,i,t,n){if(this._modelData){if(!N.e.isIRange(e))throw new Error("Invalid arguments");var o=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",t,r,i,n)}}},{key:"revealLine",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,0,i)}},{key:"revealLineInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,1,i)}},{key:"revealLineInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,2,i)}},{key:"revealLineNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,5,i)}},{key:"_revealLine",value:function(e,i,t){if("number"!==typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new N.e(e,1,e,1),i,!1,t)}},{key:"revealPosition",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,0,!0,i)}},{key:"revealPositionInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,1,!0,i)}},{key:"revealPositionInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,2,!0,i)}},{key:"revealPositionNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,5,!0,i)}},{key:"_revealPosition",value:function(e,i,t,n){if(!L.L.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new N.e(e.lineNumber,e.column,e.lineNumber,e.column),i,t,n)}},{key:"getSelection",value:function(){return this._modelData?this._modelData.viewModel.getSelection():null}},{key:"getSelections",value:function(){return this._modelData?this._modelData.viewModel.getSelections():null}},{key:"setSelection",value:function(e){var i=k.Y.isISelection(e),t=N.e.isIRange(e);if(!i&&!t)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e);else if(t){var n={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(n)}}},{key:"_setSelectionImpl",value:function(e){if(this._modelData){var i=new k.Y(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections("api",[i])}}},{key:"revealLines",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,0,t)}},{key:"revealLinesInCenter",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,1,t)}},{key:"revealLinesInCenterIfOutsideViewport",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,2,t)}},{key:"revealLinesNearTop",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,5,t)}},{key:"_revealLines",value:function(e,i,t,n){if("number"!==typeof e||"number"!==typeof i)throw new Error("Invalid arguments");this._sendRevealRange(new N.e(e,1,i,1),t,!1,n)}},{key:"revealRange",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._revealRange(e,t?1:0,n,i)}},{key:"revealRangeInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,1,!0,i)}},{key:"revealRangeInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,2,!0,i)}},{key:"revealRangeNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,5,!0,i)}},{key:"revealRangeNearTopIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,6,!0,i)}},{key:"revealRangeAtTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,3,!0,i)}},{key:"_revealRange",value:function(e,i,t,n){if(!N.e.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(N.e.lift(e),i,t,n)}},{key:"setSelections",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(var n=0,o=e.length;n<o;n++)if(!k.Y.isISelection(e[n]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,e,t)}}},{key:"getContentWidth",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}},{key:"getScrollWidth",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}},{key:"getScrollLeft",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}},{key:"getContentHeight",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}},{key:"getScrollHeight",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}},{key:"getScrollTop",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}},{key:"setScrollLeft",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollLeft:e},i)}}},{key:"setScrollTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.setScrollPosition({scrollTop:e},i)}}},{key:"setScrollPosition",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._modelData&&this._modelData.viewModel.setScrollPosition(e,i)}},{key:"saveViewState",value:function(){if(!this._modelData)return null;for(var e={},i=0,t=Object.keys(this._contributions);i<t.length;i++){var n=t[i],o=this._contributions[n];"function"===typeof o.saveViewState&&(e[n]=o.saveViewState())}return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}},{key:"restoreViewState",value:function(e){if(this._modelData&&this._modelData.hasRealView){var i=e;if(i&&i.cursorState&&i.viewState){var t=i.cursorState;Array.isArray(t)?this._modelData.viewModel.restoreCursorState(t):this._modelData.viewModel.restoreCursorState([t]);for(var n=i.contributionsState||{},o=Object.keys(this._contributions),r=0,a=o.length;r<a;r++){var s=o[r],d=this._contributions[s];"function"===typeof d.restoreViewState&&d.restoreViewState(n[s])}var l=this._modelData.viewModel.reduceRestoreState(i.viewState);this._modelData.view.restoreState(l)}}}},{key:"getContribution",value:function(e){return this._contributions[e]||null}},{key:"getActions",value:function(){for(var e=[],i=Object.keys(this._actions),t=0,n=i.length;t<n;t++){var o=i[t];e.push(this._actions[o])}return e}},{key:"getSupportedActions",value:function(){var e=this.getActions();return e=e.filter((function(e){return e.isSupported()}))}},{key:"getAction",value:function(e){return this._actions[e]||null}},{key:"trigger",value:function(e,i,t){switch(t=t||{},i){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":var n=t;return void this._type(e,n.text||"");case"replacePreviousChar":var o=t;return void this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);case"compositionType":var r=t;return void this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);case"paste":var a=t;return void this._paste(e,a.text||"",a.pasteOnNewLine||!1,a.multicursorText||null,a.mode||null);case"cut":return void this._cut(e)}var s=this.getAction(i);s?Promise.resolve(s.run()).then(void 0,f.dL):this._modelData&&(this._triggerEditorCommand(e,i,t)||this._triggerCommand(i,t))}},{key:"_triggerCommand",value:function(e,i){this._commandService.executeCommand(e,i)}},{key:"_startComposition",value:function(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}},{key:"_endComposition",value:function(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}},{key:"_type",value:function(e,i){this._modelData&&0!==i.length&&("keyboard"===e&&this._onWillType.fire(i),this._modelData.viewModel.type(i,e),"keyboard"===e&&this._onDidType.fire(i))}},{key:"_compositionType",value:function(e,i,t,n,o){this._modelData&&this._modelData.viewModel.compositionType(i,t,n,o,e)}},{key:"_paste",value:function(e,i,t,n,o){if(this._modelData&&0!==i.length){var r=this._modelData.viewModel.getSelection().getStartPosition();this._modelData.viewModel.paste(i,t,n,e);var a=this._modelData.viewModel.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({range:new N.e(r.lineNumber,r.column,a.lineNumber,a.column),languageId:o})}}},{key:"_cut",value:function(e){this._modelData&&this._modelData.viewModel.cut(e)}},{key:"_triggerEditorCommand",value:function(e,i,t){var n=this,o=D.Uc.getEditorCommand(i);return!!o&&((t=t||{}).source=e,this._instantiationService.invokeFunction((function(e){Promise.resolve(o.runEditorCommand(e,n,t)).then(void 0,f.dL)})),!0)}},{key:"_getViewModel",value:function(){return this._modelData?this._modelData.viewModel:null}},{key:"pushUndoStop",value:function(){return!!this._modelData&&(!this._configuration.options.get(81)&&(this._modelData.model.pushStackElement(),!0))}},{key:"popUndoStop",value:function(){return!!this._modelData&&(!this._configuration.options.get(81)&&(this._modelData.model.popStackElement(),!0))}},{key:"executeEdits",value:function(e,i,t){return!!this._modelData&&(!this._configuration.options.get(81)&&(n=t?Array.isArray(t)?function(){return t}:t:function(){return null},this._modelData.viewModel.executeEdits(e,i,n),!0));var n}},{key:"executeCommand",value:function(e,i){this._modelData&&this._modelData.viewModel.executeCommand(i,e)}},{key:"executeCommands",value:function(e,i){this._modelData&&this._modelData.viewModel.executeCommands(i,e)}},{key:"changeDecorations",value:function(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}},{key:"getLineDecorations",value:function(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,(0,b.$J)(this._configuration.options)):null}},{key:"getDecorationsInRange",value:function(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,(0,b.$J)(this._configuration.options)):null}},{key:"deltaDecorations",value:function(e,i){return this._modelData?0===e.length&&0===i.length?e:this._modelData.model.deltaDecorations(e,i,this._id):[]}},{key:"removeDecorations",value:function(e){var i=this._decorationTypeKeysToIds[e];i&&this.deltaDecorations(i,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}},{key:"getLayoutInfo",value:function(){return this._configuration.options.get(131)}},{key:"createOverviewRuler",value:function(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}},{key:"getContainerDomNode",value:function(){return this._domElement}},{key:"getDomNode",value:function(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}},{key:"delegateVerticalScrollbarMouseDown",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarMouseDown(e)}},{key:"layout",value:function(e){this._configuration.observeContainer(e),this.render()}},{key:"focus",value:function(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}},{key:"hasTextFocus",value:function(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}},{key:"hasWidgetFocus",value:function(){return this._focusTracker&&this._focusTracker.hasFocus()}},{key:"addContentWidget",value:function(e){var i={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(i)}},{key:"layoutContentWidget",value:function(e){var i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){var t=this._contentWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(t)}}},{key:"removeContentWidget",value:function(e){var i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){var t=this._contentWidgets[i];delete this._contentWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(t)}}},{key:"addOverlayWidget",value:function(e){var i={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(i)}},{key:"layoutOverlayWidget",value:function(e){var i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){var t=this._overlayWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(t)}}},{key:"removeOverlayWidget",value:function(e){var i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){var t=this._overlayWidgets[i];delete this._overlayWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(t)}}},{key:"changeViewZones",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}},{key:"getTargetAtClientPoint",value:function(e,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,i):null}},{key:"getScrolledVisiblePosition",value:function(e){if(!this._modelData||!this._modelData.hasRealView)return null;var i=this._modelData.model.validatePosition(e),n=this._configuration.options,o=n.get(131);return{top:t._getVerticalOffsetForPosition(this._modelData,i.lineNumber,i.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(i.lineNumber,i.column)+o.glyphMarginWidth+o.lineNumbersWidth+o.decorationsWidth-this.getScrollLeft(),height:n.get(59)}}},{key:"getOffsetForColumn",value:function(e,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,i):-1}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)}},{key:"setAriaOptions",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}},{key:"applyFontInfo",value:function(e){(0,Q.N)(e,this._configuration.options.get(44))}},{key:"setBanner",value:function(e,i){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?i:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}},{key:"_attachModel",value:function(e){var i=this;if(e){var t=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount()),e.onBeforeAttached();var o=new W.j(this._id,this._configuration,e,q.C.create(),B.p.create(this._configuration.options),(function(e){return g.scheduleAtNextAnimationFrame(e)}),this.languageConfigurationService);t.push(e.onDidChangeDecorations((function(e){return i._onDidChangeModelDecorations.fire(e)}))),t.push(e.onDidChangeLanguage((function(t){i._domElement.setAttribute("data-mode-id",e.getLanguageId()),i._onDidChangeModelLanguage.fire(t)}))),t.push(e.onDidChangeLanguageConfiguration((function(e){return i._onDidChangeModelLanguageConfiguration.fire(e)}))),t.push(e.onDidChangeContent((function(e){return i._onDidChangeModelContent.fire(e)}))),t.push(e.onDidChangeOptions((function(e){return i._onDidChangeModelOptions.fire(e)}))),t.push(e.onWillDispose((function(){return i.setModel(null)}))),t.push(o.onEvent((function(e){switch(e.kind){case 0:i._onDidContentSizeChange.fire(e);break;case 1:i._editorTextFocus.setValue(e.hasFocus);break;case 2:i._onDidScrollChange.fire(e);break;case 3:i._onDidChangeViewZones.fire();break;case 4:i._onDidChangeHiddenAreas.fire();break;case 5:i._onDidAttemptReadOnlyEdit.fire();break;case 6:e.reachedMaxCursorCount&&i._notificationService.warn(c.N("cursors.maximum","The number of cursors has been limited to {0}.",E.U.MAX_CURSOR_COUNT));for(var t=[],n=0,o=e.selections.length;n<o;n++)t[n]=e.selections[n].getPosition();var r={position:t[0],secondaryPositions:t.slice(1),reason:e.reason,source:e.source};i._onDidChangeCursorPosition.fire(r);var a={selection:e.selections[0],secondarySelections:e.selections.slice(1),modelVersionId:e.modelVersionId,oldSelections:e.oldSelections,oldModelVersionId:e.oldModelVersionId,source:e.source,reason:e.reason};i._onDidChangeCursorSelection.fire(a)}})));var r=this._createView(o),a=(0,n.Z)(r,2),s=a[0],d=a[1];if(d){this._domElement.appendChild(s.domNode.domNode);for(var l=Object.keys(this._contentWidgets),u=0,h=l.length;u<h;u++){var f=l[u];s.addContentWidget(this._contentWidgets[f])}for(var m=0,v=(l=Object.keys(this._overlayWidgets)).length;m<v;m++){var _=l[m];s.addOverlayWidget(this._overlayWidgets[_])}s.render(!1,!0),s.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new Y(e,o,s,d,t)}else this._modelData=null}},{key:"_createView",value:function(e){var i,t=this;i=this.isSimpleWidget?{paste:function(e,i,n,o){t._paste("keyboard",e,i,n,o)},type:function(e){t._type("keyboard",e)},compositionType:function(e,i,n,o){t._compositionType("keyboard",e,i,n,o)},startComposition:function(){t._startComposition()},endComposition:function(){t._endComposition("keyboard")},cut:function(){t._cut("keyboard")}}:{paste:function(e,i,n,o){var r={text:e,pasteOnNewLine:i,multicursorText:n,mode:o};t._commandService.executeCommand("paste",r)},type:function(e){var i={text:e};t._commandService.executeCommand("type",i)},compositionType:function(e,i,n,o){if(n||o){var r={text:e,replacePrevCharCnt:i,replaceNextCharCnt:n,positionDelta:o};t._commandService.executeCommand("compositionType",r)}else{var a={text:e,replaceCharCnt:i};t._commandService.executeCommand("replacePreviousChar",a)}},startComposition:function(){t._commandService.executeCommand("compositionStart",{})},endComposition:function(){t._commandService.executeCommand("compositionEnd",{})},cut:function(){t._commandService.executeCommand("cut",{})}};var n=new C.q(e.coordinatesConverter);return n.onKeyDown=function(e){return t._onKeyDown.fire(e)},n.onKeyUp=function(e){return t._onKeyUp.fire(e)},n.onContextMenu=function(e){return t._onContextMenu.fire(e)},n.onMouseMove=function(e){return t._onMouseMove.fire(e)},n.onMouseLeave=function(e){return t._onMouseLeave.fire(e)},n.onMouseDown=function(e){return t._onMouseDown.fire(e)},n.onMouseUp=function(e){return t._onMouseUp.fire(e)},n.onMouseDrag=function(e){return t._onMouseDrag.fire(e)},n.onMouseDrop=function(e){return t._onMouseDrop.fire(e)},n.onMouseDropCanceled=function(e){return t._onMouseDropCanceled.fire(e)},n.onMouseWheel=function(e){return t._onMouseWheel.fire(e)},[new y.G(i,this._configuration,this._themeService,e,n,this._overflowWidgetsDomNode),!0]}},{key:"_postDetachModelCleanup",value:function(e){e&&e.removeAllDecorationsWithOwnerId(this._id)}},{key:"_detachModel",value:function(){if(!this._modelData)return null;var e=this._modelData.model,i=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),i&&this._domElement.contains(i)&&this._domElement.removeChild(i),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}},{key:"_removeDecorationType",value:function(e){this._codeEditorService.removeDecorationType(e)}},{key:"hasModel",value:function(){return null!==this._modelData}}],[{key:"_getVerticalOffsetForPosition",value:function(e,i,t){var n=e.model.validatePosition({lineNumber:i,column:t}),o=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(o.lineNumber)}}]),t}(v.JT);$=J([X(3,F.TG),X(4,w.$),X(5,P.Hy),X(6,V.i6),X(7,H.XE),X(8,A.lT),X(9,z.F),X(10,K.c_)],$);var ee=function(e){(0,d.Z)(t,e);var i=(0,l.Z)(t);function t(){var e;return(0,u.Z)(this,t),(e=i.call(this))._onDidChangeToTrue=e._register(new m.Q5),e.onDidChangeToTrue=e._onDidChangeToTrue.event,e._onDidChangeToFalse=e._register(new m.Q5),e.onDidChangeToFalse=e._onDidChangeToFalse.event,e._value=0,e}return(0,h.Z)(t,[{key:"setValue",value:function(e){var i=e?2:1;this._value!==i&&(this._value=i,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}]),t}(v.JT),ie=function(e){(0,d.Z)(t,e);var i=(0,l.Z)(t);function t(e,n){var o;return(0,u.Z)(this,t),(o=i.call(this))._editor=e,n.createKey("editorId",e.getId()),o._editorSimpleInput=M.u.editorSimpleInput.bindTo(n),o._editorFocus=M.u.focus.bindTo(n),o._textInputFocus=M.u.textInputFocus.bindTo(n),o._editorTextFocus=M.u.editorTextFocus.bindTo(n),o._editorTabMovesFocus=M.u.tabMovesFocus.bindTo(n),o._editorReadonly=M.u.readOnly.bindTo(n),o._inDiffEditor=M.u.inDiffEditor.bindTo(n),o._editorColumnSelection=M.u.columnSelection.bindTo(n),o._hasMultipleSelections=M.u.hasMultipleSelections.bindTo(n),o._hasNonEmptySelection=M.u.hasNonEmptySelection.bindTo(n),o._canUndo=M.u.canUndo.bindTo(n),o._canRedo=M.u.canRedo.bindTo(n),o._register(o._editor.onDidChangeConfiguration((function(){return o._updateFromConfig()}))),o._register(o._editor.onDidChangeCursorSelection((function(){return o._updateFromSelection()}))),o._register(o._editor.onDidFocusEditorWidget((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidBlurEditorWidget((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidFocusEditorText((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidBlurEditorText((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidChangeModel((function(){return o._updateFromModel()}))),o._register(o._editor.onDidChangeConfiguration((function(){return o._updateFromModel()}))),o._updateFromConfig(),o._updateFromSelection(),o._updateFromFocus(),o._updateFromModel(),o._editorSimpleInput.set(o._editor.isSimpleWidget),o}return(0,h.Z)(t,[{key:"_updateFromConfig",value:function(){var e=this._editor.getOptions();this._editorTabMovesFocus.set(e.get(130)),this._editorReadonly.set(e.get(81)),this._inDiffEditor.set(e.get(54)),this._editorColumnSelection.set(e.get(18))}},{key:"_updateFromSelection",value:function(){var e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some((function(e){return!e.isEmpty()})))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}},{key:"_updateFromFocus",value:function(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}},{key:"_updateFromModel",value:function(){var e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}]),t}(v.JT),te=function(e){(0,d.Z)(t,e);var i=(0,l.Z)(t);function t(e,n){var o;(0,u.Z)(this,t),(o=i.call(this))._editor=e,o._contextKeyService=n,o._langId=M.u.languageId.bindTo(n),o._hasCompletionItemProvider=M.u.hasCompletionItemProvider.bindTo(n),o._hasCodeActionsProvider=M.u.hasCodeActionsProvider.bindTo(n),o._hasCodeLensProvider=M.u.hasCodeLensProvider.bindTo(n),o._hasDefinitionProvider=M.u.hasDefinitionProvider.bindTo(n),o._hasDeclarationProvider=M.u.hasDeclarationProvider.bindTo(n),o._hasImplementationProvider=M.u.hasImplementationProvider.bindTo(n),o._hasTypeDefinitionProvider=M.u.hasTypeDefinitionProvider.bindTo(n),o._hasHoverProvider=M.u.hasHoverProvider.bindTo(n),o._hasDocumentHighlightProvider=M.u.hasDocumentHighlightProvider.bindTo(n),o._hasDocumentSymbolProvider=M.u.hasDocumentSymbolProvider.bindTo(n),o._hasReferenceProvider=M.u.hasReferenceProvider.bindTo(n),o._hasRenameProvider=M.u.hasRenameProvider.bindTo(n),o._hasSignatureHelpProvider=M.u.hasSignatureHelpProvider.bindTo(n),o._hasInlayHintsProvider=M.u.hasInlayHintsProvider.bindTo(n),o._hasDocumentFormattingProvider=M.u.hasDocumentFormattingProvider.bindTo(n),o._hasDocumentSelectionFormattingProvider=M.u.hasDocumentSelectionFormattingProvider.bindTo(n),o._hasMultipleDocumentFormattingProvider=M.u.hasMultipleDocumentFormattingProvider.bindTo(n),o._hasMultipleDocumentSelectionFormattingProvider=M.u.hasMultipleDocumentSelectionFormattingProvider.bindTo(n),o._isInWalkThrough=M.u.isInWalkThroughSnippet.bindTo(n);var r=function(){return o._update()};return o._register(e.onDidChangeModel(r)),o._register(e.onDidChangeModelLanguage(r)),o._register(T.KZ.onDidChange(r)),o._register(T.H9.onDidChange(r)),o._register(T.He.onDidChange(r)),o._register(T.Ct.onDidChange(r)),o._register(T.RN.onDidChange(r)),o._register(T.vI.onDidChange(r)),o._register(T.tA.onDidChange(r)),o._register(T.xp.onDidChange(r)),o._register(T.vH.onDidChange(r)),o._register(T.vJ.onDidChange(r)),o._register(T.FL.onDidChange(r)),o._register(T.G0.onDidChange(r)),o._register(T.Az.onDidChange(r)),o._register(T.vN.onDidChange(r)),o._register(T.nD.onDidChange(r)),o._register(T.mX.onDidChange(r)),r(),o}return(0,h.Z)(t,[{key:"dispose",value:function(){(0,a.Z)((0,s.Z)(t.prototype),"dispose",this).call(this)}},{key:"reset",value:function(){var e=this;this._contextKeyService.bufferChangeEvents((function(){e._langId.reset(),e._hasCompletionItemProvider.reset(),e._hasCodeActionsProvider.reset(),e._hasCodeLensProvider.reset(),e._hasDefinitionProvider.reset(),e._hasDeclarationProvider.reset(),e._hasImplementationProvider.reset(),e._hasTypeDefinitionProvider.reset(),e._hasHoverProvider.reset(),e._hasDocumentHighlightProvider.reset(),e._hasDocumentSymbolProvider.reset(),e._hasReferenceProvider.reset(),e._hasRenameProvider.reset(),e._hasDocumentFormattingProvider.reset(),e._hasDocumentSelectionFormattingProvider.reset(),e._hasSignatureHelpProvider.reset(),e._isInWalkThrough.reset()}))}},{key:"_update",value:function(){var e=this,i=this._editor.getModel();i?this._contextKeyService.bufferChangeEvents((function(){e._langId.set(i.getLanguageId()),e._hasCompletionItemProvider.set(T.KZ.has(i)),e._hasCodeActionsProvider.set(T.H9.has(i)),e._hasCodeLensProvider.set(T.He.has(i)),e._hasDefinitionProvider.set(T.Ct.has(i)),e._hasDeclarationProvider.set(T.RN.has(i)),e._hasImplementationProvider.set(T.vI.has(i)),e._hasTypeDefinitionProvider.set(T.tA.has(i)),e._hasHoverProvider.set(T.xp.has(i)),e._hasDocumentHighlightProvider.set(T.vH.has(i)),e._hasDocumentSymbolProvider.set(T.vJ.has(i)),e._hasReferenceProvider.set(T.FL.has(i)),e._hasRenameProvider.set(T.G0.has(i)),e._hasSignatureHelpProvider.set(T.nD.has(i)),e._hasInlayHintsProvider.set(T.mX.has(i)),e._hasDocumentFormattingProvider.set(T.Az.has(i)||T.vN.has(i)),e._hasDocumentSelectionFormattingProvider.set(T.vN.has(i)),e._hasMultipleDocumentFormattingProvider.set(T.Az.all(i).length+T.vN.all(i).length>1),e._hasMultipleDocumentSelectionFormattingProvider.set(T.vN.all(i).length>1),e._isInWalkThrough.set(i.uri.scheme===_.lg.walkThroughSnippet)})):this.reset()}}]),t}(v.JT),ne=function(e){(0,d.Z)(t,e);var i=(0,l.Z)(t);function t(e){var n;return(0,u.Z)(this,t),(n=i.call(this))._onChange=n._register(new m.Q5),n.onChange=n._onChange.event,n._hasFocus=!1,n._domFocusTracker=n._register(g.trackFocus(e)),n._register(n._domFocusTracker.onDidFocus((function(){n._hasFocus=!0,n._onChange.fire(void 0)}))),n._register(n._domFocusTracker.onDidBlur((function(){n._hasFocus=!1,n._onChange.fire(void 0)}))),n}return(0,h.Z)(t,[{key:"hasFocus",value:function(){return this._hasFocus}}]),t}(v.JT),oe=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),re=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function ae(e){return oe+encodeURIComponent(e.toString())+re}var se=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),de=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');(0,H.Ic)((function(e,i){var t=e.getColor(x.b6y);t&&i.addRule(".monaco-editor .".concat("squiggly-error"," { border-bottom: 4px double ",t,"; }"));var n=e.getColor(x.lXJ);n&&i.addRule(".monaco-editor .".concat("squiggly-error",' { background: url("data:image/svg+xml,',ae(n),'") repeat-x bottom left; }'));var o=e.getColor(x.L_H);o&&i.addRule(".monaco-editor .".concat("squiggly-error","::before { display: block; content: ''; width: 100%; height: 100%; background: ",o,"; }"));var r=e.getColor(x.pW3);r&&i.addRule(".monaco-editor .".concat("squiggly-warning"," { border-bottom: 4px double ",r,"; }"));var a=e.getColor(x.uoC);a&&i.addRule(".monaco-editor .".concat("squiggly-warning",' { background: url("data:image/svg+xml,',ae(a),'") repeat-x bottom left; }'));var s=e.getColor(x.gpD);s&&i.addRule(".monaco-editor .".concat("squiggly-warning","::before { display: block; content: ''; width: 100%; height: 100%; background: ",s,"; }"));var d=e.getColor(x.T83);d&&i.addRule(".monaco-editor .".concat("squiggly-info"," { border-bottom: 4px double ",d,"; }"));var l=e.getColor(x.c63);l&&i.addRule(".monaco-editor .".concat("squiggly-info",' { background: url("data:image/svg+xml,',ae(l),'") repeat-x bottom left; }'));var u=e.getColor(x.few);u&&i.addRule(".monaco-editor .".concat("squiggly-info","::before { display: block; content: ''; width: 100%; height: 100%; background: ",u,"; }"));var h=e.getColor(x.fEB);h&&i.addRule(".monaco-editor .".concat("squiggly-hint"," { border-bottom: 2px dotted ",h,"; }"));var c=e.getColor(x.Dut);c&&i.addRule(".monaco-editor .".concat("squiggly-hint",' { background: url("data:image/svg+xml,',se+encodeURIComponent(c.toString())+de,'") no-repeat bottom left; }'));var g=e.getColor(O.zu);g&&i.addRule(".monaco-editor.showUnused .".concat("squiggly-inline-unnecessary"," { opacity: ",g.rgba.a,"; }"));var f=e.getColor(O.kp);f&&i.addRule(".monaco-editor.showUnused .".concat("squiggly-unnecessary"," { border-bottom: 2px dashed ",f,"; }"));var m=e.getColor(x.NOs)||"inherit";i.addRule(".monaco-editor.showDeprecated .".concat("squiggly-inline-deprecated"," { text-decoration: line-through; text-decoration-color: ",m,"}"))}))},90203:function(e,i,t){t.d(i,{p:function(){return Se}});var n,o=t(97326),r=t(11752),a=t(61120),s=t(60136),d=t(43668),l=t(37762),u=t(15671),h=t(43144),c=t(87697),g=t(53210),f=t(16688),m=t(10150),v=t(32590),_=t(28941),p=t(10526),D=t(6815),w=t(15520),y=t(56692),C=t(48483),b=t(87757),E=t.n(b),S=t(95454),L=t(48301),N=t(89663),k=t(98351),R=t(31492),I=t(58705),M=t(10849),T=t(2374),O=t(78699),x=t(99990),W=t(49525),P=t(6574),V=t(3553),F=t(7579),Z=t(18191),A=t(79876),H=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},z=function(e,i){return function(t,n){i(t,n,e)}},U=function(e,i,t,n){return new(t||(t=Promise))((function(o,r){function a(e){try{d(n.next(e))}catch(i){r(i)}}function s(e){try{d(n.throw(e))}catch(i){r(i)}}function d(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,s)}d((n=n.apply(e,i||[])).next())}))},B=function(){function e(i,t,n,o){(0,u.Z)(this,e),this.originalLineStart=i,this.originalLineEnd=t,this.modifiedLineStart=n,this.modifiedLineEnd=o}return(0,h.Z)(e,[{key:"getType",value:function(){return 0===this.originalLineStart?1:0===this.modifiedLineStart?2:0}}]),e}(),q=(0,h.Z)((function e(i){(0,u.Z)(this,e),this.entries=i})),j=(0,Z.q5)("diff-review-insert",F.lA.add,c.N("diffReviewInsertIcon","Icon for 'Insert' in diff review.")),K=(0,Z.q5)("diff-review-remove",F.lA.remove,c.N("diffReviewRemoveIcon","Icon for 'Remove' in diff review.")),Q=(0,Z.q5)("diff-review-close",F.lA.close,c.N("diffReviewCloseIcon","Icon for 'Close' in diff review.")),J=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n){var r;return(0,u.Z)(this,t),(r=i.call(this))._languageService=n,r._width=0,r._diffEditor=e,r._isVisible=!1,r.shadow=(0,f.X)(document.createElement("div")),r.shadow.setClassName("diff-review-shadow"),r.actionBarContainer=(0,f.X)(document.createElement("div")),r.actionBarContainer.setClassName("diff-review-actions"),r._actionBar=r._register(new S.o(r.actionBarContainer.domNode)),r._actionBar.push(new N.aU("diffreview.close",c.N("label.close","Close"),"close-diff-review "+V.kS.asClassName(Q),!0,(function(){return U((0,o.Z)(r),void 0,void 0,E().mark((function e(){return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",this.hide());case 1:case"end":return e.stop()}}),e,this)})))})),{label:!1,icon:!0}),r.domNode=(0,f.X)(document.createElement("div")),r.domNode.setClassName("diff-review monaco-editor-background"),r._content=(0,f.X)(document.createElement("div")),r._content.setClassName("diff-review-content"),r._content.setAttribute("role","code"),r.scrollbar=r._register(new L.s$(r._content.domNode,{})),r.domNode.domNode.appendChild(r.scrollbar.getDomNode()),r._register(e.onDidUpdateDiff((function(){r._isVisible&&(r._diffs=r._compute(),r._render())}))),r._register(e.getModifiedEditor().onDidChangeCursorPosition((function(){r._isVisible&&r._render()}))),r._register(g.addStandardDisposableListener(r.domNode.domNode,"click",(function(e){e.preventDefault();var i=g.findParentWithClass(e.target,"diff-review-row");i&&r._goToRow(i)}))),r._register(g.addStandardDisposableListener(r.domNode.domNode,"keydown",(function(e){(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),r._goToRow(r._getNextRow())),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),r._goToRow(r._getPrevRow())),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),r.hide()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),r.accept())}))),r._diffs=[],r._currentDiff=null,r}return(0,h.Z)(t,[{key:"prev",value:function(){var e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){for(var i=-1,t=0,n=this._diffs.length;t<n;t++)if(this._diffs[t]===this._currentDiff){i=t;break}e=this._diffs.length+i-1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0!==this._diffs.length){e%=this._diffs.length;var o=this._diffs[e].entries;this._diffEditor.setPosition(new M.L(o[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:o[0].modifiedLineStart,endColumn:1073741824,endLineNumber:o[o.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}}},{key:"next",value:function(){var e=0;if(this._isVisible||(this._diffs=this._compute()),this._isVisible){for(var i=-1,t=0,n=this._diffs.length;t<n;t++)if(this._diffs[t]===this._currentDiff){i=t;break}e=i+1}else e=this._findDiffIndex(this._diffEditor.getPosition());if(0!==this._diffs.length){e%=this._diffs.length;var o=this._diffs[e].entries;this._diffEditor.setPosition(new M.L(o[0].modifiedLineStart,1)),this._diffEditor.setSelection({startColumn:1,startLineNumber:o[0].modifiedLineStart,endColumn:1073741824,endLineNumber:o[o.length-1].modifiedLineEnd}),this._isVisible=!0,this._diffEditor.doLayout(),this._render(),this._goToRow(this._getNextRow())}}},{key:"accept",value:function(){var e=-1,i=this._getCurrentFocusedRow();if(i){var t=parseInt(i.getAttribute("data-line"),10);isNaN(t)||(e=t)}this.hide(),-1!==e&&(this._diffEditor.setPosition(new M.L(e,1)),this._diffEditor.revealPosition(new M.L(e,1),1))}},{key:"hide",value:function(){this._isVisible=!1,this._diffEditor.updateOptions({readOnly:!1}),this._diffEditor.focus(),this._diffEditor.doLayout(),this._render()}},{key:"_getPrevRow",value:function(){var e=this._getCurrentFocusedRow();return e?e.previousElementSibling?e.previousElementSibling:e:this._getFirstRow()}},{key:"_getNextRow",value:function(){var e=this._getCurrentFocusedRow();return e?e.nextElementSibling?e.nextElementSibling:e:this._getFirstRow()}},{key:"_getFirstRow",value:function(){return this.domNode.domNode.querySelector(".diff-review-row")}},{key:"_getCurrentFocusedRow",value:function(){var e=document.activeElement;return e&&/diff-review-row/.test(e.className)?e:null}},{key:"_goToRow",value:function(e){var i=this._getCurrentFocusedRow();e.tabIndex=0,e.focus(),i&&i!==e&&(i.tabIndex=-1),this.scrollbar.scanDomNode()}},{key:"isVisible",value:function(){return this._isVisible}},{key:"layout",value:function(e,i,t){this._width=i,this.shadow.setTop(e-6),this.shadow.setWidth(i),this.shadow.setHeight(this._isVisible?6:0),this.domNode.setTop(e),this.domNode.setWidth(i),this.domNode.setHeight(t),this._content.setHeight(t),this._content.setWidth(i),this._isVisible?(this.actionBarContainer.setAttribute("aria-hidden","false"),this.actionBarContainer.setDisplay("block")):(this.actionBarContainer.setAttribute("aria-hidden","true"),this.actionBarContainer.setDisplay("none"))}},{key:"_compute",value:function(){var e=this._diffEditor.getLineChanges();if(!e||0===e.length)return[];var i=this._diffEditor.getOriginalEditor().getModel(),n=this._diffEditor.getModifiedEditor().getModel();return i&&n?t._mergeAdjacent(e,i.getLineCount(),n.getLineCount()):[]}},{key:"_findDiffIndex",value:function(e){for(var i=e.lineNumber,t=0,n=this._diffs.length;t<n;t++){var o=this._diffs[t].entries;if(i<=o[o.length-1].modifiedLineEnd)return t}return 0}},{key:"_render",value:function(){var e=this._diffEditor.getOriginalEditor().getOptions(),i=this._diffEditor.getModifiedEditor().getOptions(),n=this._diffEditor.getOriginalEditor().getModel(),o=this._diffEditor.getModifiedEditor().getModel(),r=n.getOptions(),a=o.getOptions();if(!this._isVisible||!n||!o)return g.clearNode(this._content.domNode),this._currentDiff=null,void this.scrollbar.scanDomNode();this._diffEditor.updateOptions({readOnly:!0});var s=this._findDiffIndex(this._diffEditor.getPosition());if(this._diffs[s]!==this._currentDiff){this._currentDiff=this._diffs[s];var d=this._diffs[s].entries,l=document.createElement("div");l.className="diff-review-table",l.setAttribute("role","list"),l.setAttribute("aria-label",'Difference review. Use "Stage | Unstage | Revert Selected Ranges" commands'),(0,D.N)(l,i.get(44));for(var u=0,h=0,f=0,m=0,v=0,_=d.length;v<_;v++){var p=d[v],w=p.originalLineStart,y=p.originalLineEnd,C=p.modifiedLineStart,b=p.modifiedLineEnd;0!==w&&(0===u||w<u)&&(u=w),0!==y&&(0===h||y>h)&&(h=y),0!==C&&(0===f||C<f)&&(f=C),0!==b&&(0===m||b>m)&&(m=b)}var E=document.createElement("div");E.className="diff-review-row";var S=document.createElement("div");S.className="diff-review-cell diff-review-summary";var L=h-u+1,N=m-f+1;S.appendChild(document.createTextNode("".concat(s+1,"/").concat(this._diffs.length,": @@ -").concat(u,",").concat(L," +").concat(f,",").concat(N," @@"))),E.setAttribute("data-line",String(f));var k=function(e){return 0===e?c.N("no_lines_changed","no lines changed"):1===e?c.N("one_line_changed","1 line changed"):c.N("more_lines_changed","{0} lines changed",e)},R=k(L),I=k(N);E.setAttribute("aria-label",c.N({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",s+1,this._diffs.length,u,R,f,I)),E.appendChild(S),E.setAttribute("role","listitem"),l.appendChild(E);for(var M=i.get(59),T=f,O=0,x=d.length;O<x;O++){var W=d[O];t._renderSection(l,W,T,M,this._width,e,n,r,i,o,a,this._languageService.languageIdCodec),0!==W.modifiedLineStart&&(T=W.modifiedLineEnd)}g.clearNode(this._content.domNode),this._content.domNode.appendChild(l),this.scrollbar.scanDomNode()}}}],[{key:"_mergeAdjacent",value:function(e,i,t){if(!e||0===e.length)return[];for(var n=[],o=0,r=0,a=e.length;r<a;r++){var s=e[r],d=s.originalStartLineNumber,l=s.originalEndLineNumber,u=s.modifiedStartLineNumber,h=s.modifiedEndLineNumber,c=[],g=0,f=0===l?d:d-1,m=0===h?u:u-1,v=1,_=1;if(r>0){var p=e[r-1];v=0===p.originalEndLineNumber?p.originalStartLineNumber+1:p.originalEndLineNumber+1,_=0===p.modifiedEndLineNumber?p.modifiedStartLineNumber+1:p.modifiedEndLineNumber+1}var D=f-3+1,w=m-3+1;if(D<v){var y=v-D;D+=y,w+=y}if(w<_){var C=_-w;D+=C,w+=C}c[g++]=new B(D,f,w,m),0!==l&&(c[g++]=new B(d,l,0,0)),0!==h&&(c[g++]=new B(0,0,u,h));var b=0===l?d+1:l+1,E=0===h?u+1:h+1,S=i,L=t;if(r+1<a){var N=e[r+1];S=0===N.originalEndLineNumber?N.originalStartLineNumber:N.originalStartLineNumber-1,L=0===N.modifiedEndLineNumber?N.modifiedStartLineNumber:N.modifiedStartLineNumber-1}var k=b+3-1,R=E+3-1;if(k>S){var I=S-k;k+=I,R+=I}if(R>L){var M=L-R;k+=M,R+=M}c[g++]=new B(b,k,E,R),n[o++]=new q(c)}for(var T=n[0].entries,O=[],x=0,W=1,P=n.length;W<P;W++){var V=n[W].entries,F=T[T.length-1],Z=V[0];0===F.getType()&&0===Z.getType()&&Z.originalLineStart<=F.originalLineEnd?(T[T.length-1]=new B(F.originalLineStart,Z.originalLineEnd,F.modifiedLineStart,Z.modifiedLineEnd),T=T.concat(V.slice(1))):(O[x++]=new q(T),T=V)}return O[x++]=new q(T),O}},{key:"_renderSection",value:function(e,i,n,o,r,a,s,d,l,u,h,g){var f=i.getType(),m="diff-review-row",v="",_=null;switch(f){case 1:m="diff-review-row line-insert",v=" char-insert",_=j;break;case 2:m="diff-review-row line-delete",v=" char-delete",_=K}for(var p=i.originalLineStart,D=i.originalLineEnd,w=i.modifiedLineStart,y=i.modifiedLineEnd,C=Math.max(y-w,D-p),b=a.get(131),E=b.glyphMarginWidth+b.lineNumbersWidth,S=l.get(131),L=10+S.glyphMarginWidth+S.lineNumbersWidth,N=0;N<=C;N++){var k=0===p?0:p+N,R=0===w?0:w+N,I=document.createElement("div");I.style.minWidth=r+"px",I.className=m,I.setAttribute("role","listitem"),0!==R&&(n=R),I.setAttribute("data-line",String(n));var M=document.createElement("div");M.className="diff-review-cell",M.style.height="".concat(o,"px"),I.appendChild(M);var T=document.createElement("span");T.style.width=E+"px",T.style.minWidth=E+"px",T.className="diff-review-line-number"+v,0!==k?T.appendChild(document.createTextNode(String(k))):T.innerText="\xa0",M.appendChild(T);var O=document.createElement("span");O.style.width=L+"px",O.style.minWidth=L+"px",O.style.paddingRight="10px",O.className="diff-review-line-number"+v,0!==R?O.appendChild(document.createTextNode(String(R))):O.innerText="\xa0",M.appendChild(O);var x=document.createElement("span");if(x.className="diff-review-spacer",_){var W=document.createElement("span");W.className=V.kS.asClassName(_),W.innerText="\xa0\xa0",x.appendChild(W)}else x.innerText="\xa0\xa0";M.appendChild(x);var P=void 0;if(0!==R){var F=this._renderLine(u,l,h.tabSize,R,g);t._ttPolicy&&(F=t._ttPolicy.createHTML(F)),M.insertAdjacentHTML("beforeend",F),P=u.getLineContent(R)}else{var Z=this._renderLine(s,a,d.tabSize,k,g);t._ttPolicy&&(Z=t._ttPolicy.createHTML(Z)),M.insertAdjacentHTML("beforeend",Z),P=s.getLineContent(k)}0===P.length&&(P=c.N("blankLine","blank"));var A="";switch(f){case 0:A=k===R?c.N({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",P,k):c.N("equalLine","{0} original line {1} modified line {2}",P,k,R);break;case 1:A=c.N("insertLine","+ {0} modified line {1}",P,R);break;case 2:A=c.N("deleteLine","- {0} original line {1}",P,k)}I.setAttribute("aria-label",A),e.appendChild(I)}}},{key:"_renderLine",value:function(e,i,t,n,o){var r=e.getLineContent(n),a=i.get(44),s=I.A.createEmpty(r,o),d=x.wA.isBasicASCII(r,e.mightContainNonBasicASCII()),l=x.wA.containsRTL(r,d,e.mightContainRTL());return(0,O.tF)(new O.IJ(a.isMonospace&&!i.get(29),a.canUseHalfwidthRightwardsArrow,r,!1,d,l,0,s,[],t,0,a.spaceWidth,a.middotWidth,a.wsmiddotWidth,i.get(105),i.get(88),i.get(83),i.get(45)!==R.n0.OFF,null)).html}}]),t}(p.JT);J._ttPolicy=null===(n=window.trustedTypes)||void 0===n?void 0:n.createPolicy("diffReview",{createHTML:function(e){return e}}),J=H([z(1,A.O)],J),(0,V.Ic)((function(e,i){var t=e.getColor(T.hw);t&&i.addRule(".monaco-diff-editor .diff-review-line-number { color: ".concat(t,"; }"));var n=e.getColor(P._wn);n&&i.addRule(".monaco-diff-editor .diff-review-shadow { box-shadow: ".concat(n," 0 -6px 6px -6px inset; }"))}));var X=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(){return(0,u.Z)(this,t),i.call(this,{id:"editor.action.diffReview.next",label:c.N("editor.action.diffReview.next","Go to Next Difference"),alias:"Go to Next Difference",precondition:W.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:65,weight:100}})}return(0,h.Z)(t,[{key:"run",value:function(e,i){var t=Y(e);t&&t.diffReviewNext()}}]),t}(k.R6),G=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(){return(0,u.Z)(this,t),i.call(this,{id:"editor.action.diffReview.prev",label:c.N("editor.action.diffReview.prev","Go to Previous Difference"),alias:"Go to Previous Difference",precondition:W.Ao.has("isInDiffEditor"),kbOpts:{kbExpr:null,primary:1089,weight:100}})}return(0,h.Z)(t,[{key:"run",value:function(e,i){var t=Y(e);t&&t.diffReviewPrev()}}]),t}(k.R6);function Y(e){var i=e.get(y.$),t=i.listDiffEditors(),n=i.getActiveCodeEditor();if(!n)return null;for(var o=0,r=t.length;o<r;o++){var a=t[o];if(a.getModifiedEditor().getId()===n.getId()||a.getOriginalEditor().getId()===n.getId())return a}return null}(0,k.Qr)(X),(0,k.Qr)(G);var $,ee=t(30788),ie=t(63633),te=t(52925),ne=t(27959),oe=t(70437),re=t(55522),ae=t(50381),se=t(8850),de=t(30045),le=t(13023),ue=t(30291),he=function(e,i,t,n){return new(t||(t=Promise))((function(o,r){function a(e){try{d(n.next(e))}catch(i){r(i)}}function s(e){try{d(n.throw(e))}catch(i){r(i)}}function d(e){var i;e.done?o(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(a,s)}d((n=n.apply(e,i||[])).next())}))},ce=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r,a,s,d){var l;(0,u.Z)(this,t),(l=i.call(this))._viewZoneId=e,l._marginDomNode=n,l.editor=r,l.diff=a,l._contextMenuService=s,l._clipboardService=d,l._visibility=!1,l._marginDomNode.style.zIndex="10",l._diffActions=document.createElement("div"),l._diffActions.className=F.lA.lightBulb.classNames+" lightbulb-glyph",l._diffActions.style.position="absolute";var h=r.getOption(59),f=r.getModel().getEOL();l._diffActions.style.right="0px",l._diffActions.style.visibility="hidden",l._diffActions.style.height="".concat(h,"px"),l._diffActions.style.lineHeight="".concat(h,"px"),l._marginDomNode.appendChild(l._diffActions);var m=[],v=0===a.modifiedEndLineNumber;m.push(new N.aU("diff.clipboard.copyDeletedContent",v?a.originalEndLineNumber>a.modifiedStartLineNumber?c.N("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):c.N("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):a.originalEndLineNumber>a.modifiedStartLineNumber?c.N("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):c.N("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,(function(){return he((0,o.Z)(l),void 0,void 0,E().mark((function e(){var i,t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=new ee.e(a.originalStartLineNumber,1,a.originalEndLineNumber+1,1),t=a.originalModel.getValueInRange(i),e.next=4,this._clipboardService.writeText(t);case 4:case"end":return e.stop()}}),e,this)})))})));var _=0,p=void 0;a.originalEndLineNumber>a.modifiedStartLineNumber&&(p=new N.aU("diff.clipboard.copyDeletedLineContent",v?c.N("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",a.originalStartLineNumber):c.N("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",a.originalStartLineNumber),void 0,!0,(function(){return he((0,o.Z)(l),void 0,void 0,E().mark((function e(){var i,t;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==(i=a.originalModel.getLineContent(a.originalStartLineNumber+_))){e.next=7;break}return t=a.originalModel.getEndOfLineSequence(),e.next=5,this._clipboardService.writeText(0===t?"\n":"\r\n");case 5:e.next=9;break;case 7:return e.next=9,this._clipboardService.writeText(i);case 9:case"end":return e.stop()}}),e,this)})))})),m.push(p)),r.getOption(81)||m.push(new N.aU("diff.inline.revertChange",c.N("diff.inline.revertChange.label","Revert this change"),void 0,!0,(function(){return he((0,o.Z)(l),void 0,void 0,E().mark((function e(){var i,t,n,o;return E().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=new ee.e(a.originalStartLineNumber,1,a.originalEndLineNumber,a.originalModel.getLineMaxColumn(a.originalEndLineNumber)),t=a.originalModel.getValueInRange(i),0===a.modifiedEndLineNumber?(n=r.getModel().getLineMaxColumn(a.modifiedStartLineNumber),r.executeEdits("diffEditor",[{range:new ee.e(a.modifiedStartLineNumber,n,a.modifiedStartLineNumber,n),text:f+t}])):(o=r.getModel().getLineMaxColumn(a.modifiedEndLineNumber),r.executeEdits("diffEditor",[{range:new ee.e(a.modifiedStartLineNumber,1,a.modifiedEndLineNumber,o),text:t}]));case 3:case"end":return e.stop()}}),e)})))})));var D=function(e,i){l._contextMenuService.showContextMenu({getAnchor:function(){return{x:e,y:i}},getActions:function(){return p&&(p.label=v?c.N("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",a.originalStartLineNumber+_):c.N("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",a.originalStartLineNumber+_)),m},autoSelectFirstItem:!0})};return l._register(g.addStandardDisposableListener(l._diffActions,"mousedown",(function(e){var i=g.getDomNodePagePosition(l._diffActions),t=i.top,n=i.height,o=Math.floor(h/3);e.preventDefault(),D(e.posx,t+n+o)}))),l._register(r.onMouseMove((function(e){8===e.target.type||5===e.target.type?e.target.detail.viewZoneId===l._viewZoneId?(l.visibility=!0,_=l._updateLightBulbPosition(l._marginDomNode,e.event.browserEvent.y,h)):l.visibility=!1:l.visibility=!1}))),l._register(r.onMouseDown((function(e){e.event.rightButton&&(8!==e.target.type&&5!==e.target.type||e.target.detail.viewZoneId===l._viewZoneId&&(e.event.preventDefault(),_=l._updateLightBulbPosition(l._marginDomNode,e.event.browserEvent.y,h),D(e.event.posx,e.event.posy+h)))}))),l}return(0,h.Z)(t,[{key:"visibility",get:function(){return this._visibility},set:function(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}},{key:"_updateLightBulbPosition",value:function(e,i,t){var n=i-g.getDomNodePagePosition(e).top,o=Math.floor(n/t),r=o*t;if(this._diffActions.style.top="".concat(r,"px"),this.diff.viewLineCounts)for(var a=0,s=0;s<this.diff.viewLineCounts.length;s++)if(o<(a+=this.diff.viewLineCounts[s]))return s;return o}}]),t}(p.JT),ge=t(88532),fe=t(68552),me=t(26562),ve=t(72380),_e=t(68537),pe=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},De=function(e,i){return function(t,n){i(t,n,e)}},we=function(){function e(i,t){(0,u.Z)(this,e),this._contextMenuService=i,this._clipboardService=t,this._zones=[],this._inlineDiffMargins=[],this._zonesMap={},this._decorations=[]}return(0,h.Z)(e,[{key:"getForeignViewZones",value:function(e){var i=this;return e.filter((function(e){return!i._zonesMap[String(e.id)]}))}},{key:"clean",value:function(e){var i=this;this._zones.length>0&&e.changeViewZones((function(e){var t,n=(0,l.Z)(i._zones);try{for(n.s();!(t=n.n()).done;){var o=t.value;e.removeZone(o)}}catch(r){n.e(r)}finally{n.f()}})),this._zones=[],this._zonesMap={},this._decorations=e.deltaDecorations(this._decorations,[])}},{key:"apply",value:function(e,i,t,n){var o=this,r=n?w.Z.capture(e):null;e.changeViewZones((function(i){var n,r,a=(0,l.Z)(o._zones);try{for(a.s();!(r=a.n()).done;){var s=r.value;i.removeZone(s)}}catch(m){a.e(m)}finally{a.f()}var d,u=(0,l.Z)(o._inlineDiffMargins);try{for(u.s();!(d=u.n()).done;){d.value.dispose()}}catch(m){u.e(m)}finally{u.f()}o._zones=[],o._zonesMap={},o._inlineDiffMargins=[];for(var h=0,c=t.zones.length;h<c;h++){var g=t.zones[h];g.suppressMouseDown=!0;var f=i.addZone(g);o._zones.push(f),o._zonesMap[String(f)]=!0,t.zones[h].diff&&g.marginDomNode&&(g.suppressMouseDown=!1,0!==(null===(n=t.zones[h].diff)||void 0===n?void 0:n.originalModel.getValueLength())&&o._inlineDiffMargins.push(new ce(f,g.marginDomNode,e,t.zones[h].diff,o._contextMenuService,o._clipboardService)))}})),r&&r.restore(e),this._decorations=e.deltaDecorations(this._decorations,t.decorations),i&&i.setZones(t.overviewZones)}}]),e}(),ye=0,Ce=(0,Z.q5)("diff-insert",F.lA.add,c.N("diffInsertIcon","Line decoration for inserts in the diff editor.")),be=(0,Z.q5)("diff-remove",F.lA.remove,c.N("diffRemoveIcon","Line decoration for removals in the diff editor.")),Ee=null===($=window.trustedTypes)||void 0===$?void 0:$.createPolicy("diffEditorWidget",{createHTML:function(e){return e}}),Se=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,r,a,s,d,h,c,m,p,D,w){var y;(0,u.Z)(this,t),(y=i.call(this))._editorProgressService=w,y._onDidDispose=y._register(new _.Q5),y.onDidDispose=y._onDidDispose.event,y._onDidUpdateDiff=y._register(new _.Q5),y.onDidUpdateDiff=y._onDidUpdateDiff.event,y._onDidContentSizeChange=y._register(new _.Q5),y._lastOriginalWarning=null,y._lastModifiedWarning=null,y._editorWorkerService=s,y._codeEditorService=c,y._contextKeyService=y._register(d.createScoped(e)),y._instantiationService=h.createChild(new de.y([W.i6,y._contextKeyService])),y._contextKeyService.createKey("isInDiffEditor",!0),y._themeService=m,y._notificationService=p,y._id=++ye,y._state=0,y._updatingDiffProgress=null,y._domElement=e,n=n||{},y._options=Ze(n,{enableSplitViewResizing:!0,renderSideBySide:!0,maxComputationTime:5e3,maxFileSize:50,ignoreTrimWhitespace:!0,renderIndicators:!0,originalEditable:!1,diffCodeLens:!1,renderOverviewRuler:!0,diffWordWrap:"inherit"}),"undefined"!==typeof n.isInEmbeddedEditor?y._contextKeyService.createKey("isInEmbeddedDiffEditor",n.isInEmbeddedEditor):y._contextKeyService.createKey("isInEmbeddedDiffEditor",!1),y._updateDecorationsRunner=y._register(new v.pY((function(){return y._updateDecorations()}),0)),y._containerDomElement=document.createElement("div"),y._containerDomElement.className=t._getClassName(y._themeService.getColorTheme(),y._options.renderSideBySide),y._containerDomElement.style.position="relative",y._containerDomElement.style.height="100%",y._domElement.appendChild(y._containerDomElement),y._overviewViewportDomElement=(0,f.X)(document.createElement("div")),y._overviewViewportDomElement.setClassName("diffViewport"),y._overviewViewportDomElement.setPosition("absolute"),y._overviewDomElement=document.createElement("div"),y._overviewDomElement.className="diffOverview",y._overviewDomElement.style.position="absolute",y._overviewDomElement.appendChild(y._overviewViewportDomElement.domNode),y._register(g.addStandardDisposableListener(y._overviewDomElement,"mousedown",(function(e){y._modifiedEditor.delegateVerticalScrollbarMouseDown(e)}))),y._options.renderOverviewRuler&&y._containerDomElement.appendChild(y._overviewDomElement),y._originalDomNode=document.createElement("div"),y._originalDomNode.className="editor original",y._originalDomNode.style.position="absolute",y._originalDomNode.style.height="100%",y._containerDomElement.appendChild(y._originalDomNode),y._modifiedDomNode=document.createElement("div"),y._modifiedDomNode.className="editor modified",y._modifiedDomNode.style.position="absolute",y._modifiedDomNode.style.height="100%",y._containerDomElement.appendChild(y._modifiedDomNode),y._beginUpdateDecorationsTimeout=-1,y._currentlyChangingViewZones=!1,y._diffComputationToken=0,y._originalEditorState=new we(D,a),y._modifiedEditorState=new we(D,a),y._isVisible=!0,y._isHandlingScrollEvent=!1,y._elementSizeObserver=y._register(new ve.I(y._containerDomElement,n.dimension)),y._register(y._elementSizeObserver.onDidChange((function(){return y._onDidContainerSizeChanged()}))),n.automaticLayout&&y._elementSizeObserver.startObserving(),y._diffComputationResult=null,y._originalEditor=y._createLeftHandSideEditor(n,r.originalEditor||{}),y._modifiedEditor=y._createRightHandSideEditor(n,r.modifiedEditor||{}),y._originalOverviewRuler=null,y._modifiedOverviewRuler=null,y._reviewPane=h.createInstance(J,(0,o.Z)(y)),y._containerDomElement.appendChild(y._reviewPane.domNode.domNode),y._containerDomElement.appendChild(y._reviewPane.shadow.domNode),y._containerDomElement.appendChild(y._reviewPane.actionBarContainer.domNode),y._options.renderSideBySide?y._setStrategy(new Me(y._createDataSource(),y._options.enableSplitViewResizing)):y._setStrategy(new Oe(y._createDataSource(),y._options.enableSplitViewResizing)),y._register(m.onDidColorThemeChange((function(e){y._strategy&&y._strategy.applyColors(e)&&y._updateDecorationsRunner.schedule(),y._containerDomElement.className=t._getClassName(y._themeService.getColorTheme(),y._options.renderSideBySide)})));var C,b=k.Uc.getDiffEditorContributions(),E=(0,l.Z)(b);try{for(E.s();!(C=E.n()).done;){var S=C.value;try{y._register(h.createInstance(S.ctor,(0,o.Z)(y)))}catch(L){(0,fe.dL)(L)}}}catch(L){E.e(L)}finally{E.f()}return y._codeEditorService.addDiffEditor((0,o.Z)(y)),y}return(0,h.Z)(t,[{key:"_setState",value:function(e){this._state!==e&&(this._state=e,this._updatingDiffProgress&&(this._updatingDiffProgress.done(),this._updatingDiffProgress=null),1===this._state&&(this._updatingDiffProgress=this._editorProgressService.show(!0,1e3)))}},{key:"diffReviewNext",value:function(){this._reviewPane.next()}},{key:"diffReviewPrev",value:function(){this._reviewPane.prev()}},{key:"_recreateOverviewRulers",value:function(){this._options.renderOverviewRuler&&(this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._originalEditor.hasModel()&&(this._originalOverviewRuler=this._originalEditor.createOverviewRuler("original diffOverviewRuler"),this._overviewDomElement.appendChild(this._originalOverviewRuler.getDomNode())),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._modifiedEditor.hasModel()&&(this._modifiedOverviewRuler=this._modifiedEditor.createOverviewRuler("modified diffOverviewRuler"),this._overviewDomElement.appendChild(this._modifiedOverviewRuler.getDomNode())),this._layoutOverviewRulers())}},{key:"_createLeftHandSideEditor",value:function(e,i){var n=this,o=this._createInnerEditor(this._instantiationService,this._originalDomNode,this._adjustOptionsForLeftHandSide(e),i);this._register(o.onDidScrollChange((function(e){n._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(n._isHandlingScrollEvent=!0,n._modifiedEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),n._isHandlingScrollEvent=!1,n._layoutOverviewViewport())}))),this._register(o.onDidChangeViewZones((function(){n._onViewZonesChanged()}))),this._register(o.onDidChangeConfiguration((function(e){o.getModel()&&(e.hasChanged(44)&&n._updateDecorationsRunner.schedule(),e.hasChanged(132)&&(n._updateDecorationsRunner.cancel(),n._updateDecorations()))}))),this._register(o.onDidChangeHiddenAreas((function(){n._updateDecorationsRunner.cancel(),n._updateDecorations()}))),this._register(o.onDidChangeModelContent((function(){n._isVisible&&n._beginUpdateDecorationsSoon()})));var r=this._contextKeyService.createKey("isInDiffLeftEditor",o.hasWidgetFocus());return this._register(o.onDidFocusEditorWidget((function(){return r.set(!0)}))),this._register(o.onDidBlurEditorWidget((function(){return r.set(!1)}))),this._register(o.onDidContentSizeChange((function(e){var i=n._originalEditor.getContentWidth()+n._modifiedEditor.getContentWidth()+t.ONE_OVERVIEW_WIDTH,o=Math.max(n._modifiedEditor.getContentHeight(),n._originalEditor.getContentHeight());n._onDidContentSizeChange.fire({contentHeight:o,contentWidth:i,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})}))),o}},{key:"_createRightHandSideEditor",value:function(e,i){var n=this,o=this._createInnerEditor(this._instantiationService,this._modifiedDomNode,this._adjustOptionsForRightHandSide(e),i);this._register(o.onDidScrollChange((function(e){n._isHandlingScrollEvent||(e.scrollTopChanged||e.scrollLeftChanged||e.scrollHeightChanged)&&(n._isHandlingScrollEvent=!0,n._originalEditor.setScrollPosition({scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}),n._isHandlingScrollEvent=!1,n._layoutOverviewViewport())}))),this._register(o.onDidChangeViewZones((function(){n._onViewZonesChanged()}))),this._register(o.onDidChangeConfiguration((function(e){o.getModel()&&(e.hasChanged(44)&&n._updateDecorationsRunner.schedule(),e.hasChanged(132)&&(n._updateDecorationsRunner.cancel(),n._updateDecorations()))}))),this._register(o.onDidChangeHiddenAreas((function(){n._updateDecorationsRunner.cancel(),n._updateDecorations()}))),this._register(o.onDidChangeModelContent((function(){n._isVisible&&n._beginUpdateDecorationsSoon()}))),this._register(o.onDidChangeModelOptions((function(e){e.tabSize&&n._updateDecorationsRunner.schedule()})));var r=this._contextKeyService.createKey("isInDiffRightEditor",o.hasWidgetFocus());return this._register(o.onDidFocusEditorWidget((function(){return r.set(!0)}))),this._register(o.onDidBlurEditorWidget((function(){return r.set(!1)}))),this._register(o.onDidContentSizeChange((function(e){var i=n._originalEditor.getContentWidth()+n._modifiedEditor.getContentWidth()+t.ONE_OVERVIEW_WIDTH,o=Math.max(n._modifiedEditor.getContentHeight(),n._originalEditor.getContentHeight());n._onDidContentSizeChange.fire({contentHeight:o,contentWidth:i,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})}))),o}},{key:"_createInnerEditor",value:function(e,i,t,n){return e.createInstance(C.Gm,i,t,n)}},{key:"dispose",value:function(){this._codeEditorService.removeDiffEditor(this),-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._cleanViewZonesAndDecorations(),this._originalOverviewRuler&&(this._overviewDomElement.removeChild(this._originalOverviewRuler.getDomNode()),this._originalOverviewRuler.dispose()),this._modifiedOverviewRuler&&(this._overviewDomElement.removeChild(this._modifiedOverviewRuler.getDomNode()),this._modifiedOverviewRuler.dispose()),this._overviewDomElement.removeChild(this._overviewViewportDomElement.domNode),this._options.renderOverviewRuler&&this._containerDomElement.removeChild(this._overviewDomElement),this._containerDomElement.removeChild(this._originalDomNode),this._originalEditor.dispose(),this._containerDomElement.removeChild(this._modifiedDomNode),this._modifiedEditor.dispose(),this._strategy.dispose(),this._containerDomElement.removeChild(this._reviewPane.domNode.domNode),this._containerDomElement.removeChild(this._reviewPane.shadow.domNode),this._containerDomElement.removeChild(this._reviewPane.actionBarContainer.domNode),this._reviewPane.dispose(),this._domElement.removeChild(this._containerDomElement),this._onDidDispose.fire(),(0,r.Z)((0,a.Z)(t.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return this.getEditorType()+":"+this._id}},{key:"getEditorType",value:function(){return te.g.IDiffEditor}},{key:"getLineChanges",value:function(){return this._diffComputationResult?this._diffComputationResult.changes:null}},{key:"getOriginalEditor",value:function(){return this._originalEditor}},{key:"getModifiedEditor",value:function(){return this._modifiedEditor}},{key:"updateOptions",value:function(e){var i,n,o=Ze(e,this._options),r=(i=this._options,n=o,{enableSplitViewResizing:i.enableSplitViewResizing!==n.enableSplitViewResizing,renderSideBySide:i.renderSideBySide!==n.renderSideBySide,maxComputationTime:i.maxComputationTime!==n.maxComputationTime,maxFileSize:i.maxFileSize!==n.maxFileSize,ignoreTrimWhitespace:i.ignoreTrimWhitespace!==n.ignoreTrimWhitespace,renderIndicators:i.renderIndicators!==n.renderIndicators,originalEditable:i.originalEditable!==n.originalEditable,diffCodeLens:i.diffCodeLens!==n.diffCodeLens,renderOverviewRuler:i.renderOverviewRuler!==n.renderOverviewRuler,diffWordWrap:i.diffWordWrap!==n.diffWordWrap});this._options=o;var a=r.ignoreTrimWhitespace||r.renderIndicators,s=this._isVisible&&(r.maxComputationTime||r.maxFileSize);a?this._beginUpdateDecorations():s&&this._beginUpdateDecorationsSoon(),this._modifiedEditor.updateOptions(this._adjustOptionsForRightHandSide(e)),this._originalEditor.updateOptions(this._adjustOptionsForLeftHandSide(e)),this._strategy.setEnableSplitViewResizing(this._options.enableSplitViewResizing),r.renderSideBySide&&(this._options.renderSideBySide?this._setStrategy(new Me(this._createDataSource(),this._options.enableSplitViewResizing)):this._setStrategy(new Oe(this._createDataSource(),this._options.enableSplitViewResizing)),this._containerDomElement.className=t._getClassName(this._themeService.getColorTheme(),this._options.renderSideBySide)),r.renderOverviewRuler&&(this._options.renderOverviewRuler?this._containerDomElement.appendChild(this._overviewDomElement):this._containerDomElement.removeChild(this._overviewDomElement))}},{key:"getModel",value:function(){return{original:this._originalEditor.getModel(),modified:this._modifiedEditor.getModel()}}},{key:"setModel",value:function(e){if(e&&(!e.original||!e.modified))throw new Error(e.original?"DiffEditorWidget.setModel: Modified model is null":"DiffEditorWidget.setModel: Original model is null");this._cleanViewZonesAndDecorations(),this._originalEditor.setModel(e?e.original:null),this._modifiedEditor.setModel(e?e.modified:null),this._updateDecorationsRunner.cancel(),e&&(this._originalEditor.setScrollTop(0),this._modifiedEditor.setScrollTop(0)),this._diffComputationResult=null,this._diffComputationToken++,this._setState(0),e&&(this._recreateOverviewRulers(),this._beginUpdateDecorations()),this._layoutOverviewViewport()}},{key:"getContainerDomNode",value:function(){return this._domElement}},{key:"getVisibleColumnFromPosition",value:function(e){return this._modifiedEditor.getVisibleColumnFromPosition(e)}},{key:"getPosition",value:function(){return this._modifiedEditor.getPosition()}},{key:"setPosition",value:function(e){this._modifiedEditor.setPosition(e)}},{key:"revealLine",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealLine(e,i)}},{key:"revealLineInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealLineInCenter(e,i)}},{key:"revealLineInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealLineInCenterIfOutsideViewport(e,i)}},{key:"revealLineNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealLineNearTop(e,i)}},{key:"revealPosition",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealPosition(e,i)}},{key:"revealPositionInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealPositionInCenter(e,i)}},{key:"revealPositionInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealPositionInCenterIfOutsideViewport(e,i)}},{key:"revealPositionNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealPositionNearTop(e,i)}},{key:"getSelection",value:function(){return this._modifiedEditor.getSelection()}},{key:"getSelections",value:function(){return this._modifiedEditor.getSelections()}},{key:"setSelection",value:function(e){this._modifiedEditor.setSelection(e)}},{key:"setSelections",value:function(e){this._modifiedEditor.setSelections(e)}},{key:"revealLines",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._modifiedEditor.revealLines(e,i,t)}},{key:"revealLinesInCenter",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._modifiedEditor.revealLinesInCenter(e,i,t)}},{key:"revealLinesInCenterIfOutsideViewport",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._modifiedEditor.revealLinesInCenterIfOutsideViewport(e,i,t)}},{key:"revealLinesNearTop",value:function(e,i){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._modifiedEditor.revealLinesNearTop(e,i,t)}},{key:"revealRange",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._modifiedEditor.revealRange(e,i,t,n)}},{key:"revealRangeInCenter",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealRangeInCenter(e,i)}},{key:"revealRangeInCenterIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealRangeInCenterIfOutsideViewport(e,i)}},{key:"revealRangeNearTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealRangeNearTop(e,i)}},{key:"revealRangeNearTopIfOutsideViewport",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealRangeNearTopIfOutsideViewport(e,i)}},{key:"revealRangeAtTop",value:function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._modifiedEditor.revealRangeAtTop(e,i)}},{key:"getSupportedActions",value:function(){return this._modifiedEditor.getSupportedActions()}},{key:"saveViewState",value:function(){return{original:this._originalEditor.saveViewState(),modified:this._modifiedEditor.saveViewState()}}},{key:"restoreViewState",value:function(e){if(e&&e.original&&e.modified){var i=e;this._originalEditor.restoreViewState(i.original),this._modifiedEditor.restoreViewState(i.modified)}}},{key:"layout",value:function(e){this._elementSizeObserver.observe(e)}},{key:"focus",value:function(){this._modifiedEditor.focus()}},{key:"hasTextFocus",value:function(){return this._originalEditor.hasTextFocus()||this._modifiedEditor.hasTextFocus()}},{key:"trigger",value:function(e,i,t){this._modifiedEditor.trigger(e,i,t)}},{key:"changeDecorations",value:function(e){return this._modifiedEditor.changeDecorations(e)}},{key:"_onDidContainerSizeChanged",value:function(){this._doLayout()}},{key:"_getReviewHeight",value:function(){return this._reviewPane.isVisible()?this._elementSizeObserver.getHeight():0}},{key:"_layoutOverviewRulers",value:function(){if(this._options.renderOverviewRuler&&this._originalOverviewRuler&&this._modifiedOverviewRuler){var e=this._elementSizeObserver.getHeight(),i=this._getReviewHeight(),n=t.ENTIRE_DIFF_OVERVIEW_WIDTH-2*t.ONE_OVERVIEW_WIDTH;this._modifiedEditor.getLayoutInfo()&&(this._originalOverviewRuler.setLayout({top:0,width:t.ONE_OVERVIEW_WIDTH,right:n+t.ONE_OVERVIEW_WIDTH,height:e-i}),this._modifiedOverviewRuler.setLayout({top:0,right:0,width:t.ONE_OVERVIEW_WIDTH,height:e-i}))}}},{key:"_onViewZonesChanged",value:function(){this._currentlyChangingViewZones||this._updateDecorationsRunner.schedule()}},{key:"_beginUpdateDecorationsSoon",value:function(){var e=this;-1!==this._beginUpdateDecorationsTimeout&&(window.clearTimeout(this._beginUpdateDecorationsTimeout),this._beginUpdateDecorationsTimeout=-1),this._beginUpdateDecorationsTimeout=window.setTimeout((function(){return e._beginUpdateDecorations()}),t.UPDATE_DIFF_DECORATIONS_DELAY)}},{key:"_beginUpdateDecorations",value:function(){var e=this;this._beginUpdateDecorationsTimeout=-1;var i=this._originalEditor.getModel(),n=this._modifiedEditor.getModel();if(i&&n){this._diffComputationToken++;var o=this._diffComputationToken,r=1024*this._options.maxFileSize*1024,a=function(e){var i=e.getValueLength();return 0===r||i<=r};a(i)&&a(n)?(this._setState(1),this._editorWorkerService.computeDiff(i.uri,n.uri,this._options.ignoreTrimWhitespace,this._options.maxComputationTime).then((function(t){o===e._diffComputationToken&&i===e._originalEditor.getModel()&&n===e._modifiedEditor.getModel()&&(e._setState(2),e._diffComputationResult=t,e._updateDecorationsRunner.schedule(),e._onDidUpdateDiff.fire())}),(function(t){o===e._diffComputationToken&&i===e._originalEditor.getModel()&&n===e._modifiedEditor.getModel()&&(e._setState(2),e._diffComputationResult=null,e._updateDecorationsRunner.schedule())}))):t._equals(i.uri,this._lastOriginalWarning)&&t._equals(n.uri,this._lastModifiedWarning)||(this._lastOriginalWarning=i.uri,this._lastModifiedWarning=n.uri,this._notificationService.warn(c.N("diff.tooLarge","Cannot compare files because one file is too large.")))}}},{key:"_cleanViewZonesAndDecorations",value:function(){this._originalEditorState.clean(this._originalEditor),this._modifiedEditorState.clean(this._modifiedEditor)}},{key:"_updateDecorations",value:function(){if(this._originalEditor.getModel()&&this._modifiedEditor.getModel()){var e=this._diffComputationResult?this._diffComputationResult.changes:[],i=this._originalEditorState.getForeignViewZones(this._originalEditor.getWhitespaces()),t=this._modifiedEditorState.getForeignViewZones(this._modifiedEditor.getWhitespaces()),n=this._strategy.getEditorsDiffDecorations(e,this._options.ignoreTrimWhitespace,this._options.renderIndicators,i,t);try{this._currentlyChangingViewZones=!0,this._originalEditorState.apply(this._originalEditor,this._originalOverviewRuler,n.original,!1),this._modifiedEditorState.apply(this._modifiedEditor,this._modifiedOverviewRuler,n.modified,!0)}finally{this._currentlyChangingViewZones=!1}}}},{key:"_adjustOptionsForSubEditor",value:function(e){var i=Object.assign({},e);return i.inDiffEditor=!0,i.automaticLayout=!1,i.scrollbar=Object.assign({},i.scrollbar||{}),i.scrollbar.vertical="visible",i.folding=!1,i.codeLens=this._options.diffCodeLens,i.fixedOverflowWidgets=!0,i.minimap=Object.assign({},i.minimap||{}),i.minimap.enabled=!1,i}},{key:"_adjustOptionsForLeftHandSide",value:function(e){var i=this._adjustOptionsForSubEditor(e);return this._options.renderSideBySide?i.wordWrapOverride1=this._options.diffWordWrap:i.wordWrapOverride1="off",e.originalAriaLabel&&(i.ariaLabel=e.originalAriaLabel),i.readOnly=!this._options.originalEditable,i.extraEditorClassName="original-in-monaco-diff-editor",Object.assign(Object.assign({},i),{dimension:{height:0,width:0}})}},{key:"_adjustOptionsForRightHandSide",value:function(e){var i=this._adjustOptionsForSubEditor(e);return e.modifiedAriaLabel&&(i.ariaLabel=e.modifiedAriaLabel),i.wordWrapOverride1=this._options.diffWordWrap,i.revealHorizontalRightPadding=R.BH.revealHorizontalRightPadding.defaultValue+t.ENTIRE_DIFF_OVERVIEW_WIDTH,i.scrollbar.verticalHasArrows=!1,i.extraEditorClassName="modified-in-monaco-diff-editor",Object.assign(Object.assign({},i),{dimension:{height:0,width:0}})}},{key:"doLayout",value:function(){this._elementSizeObserver.observe(),this._doLayout()}},{key:"_doLayout",value:function(){var e=this._elementSizeObserver.getWidth(),i=this._elementSizeObserver.getHeight(),n=this._getReviewHeight(),o=this._strategy.layout();this._originalDomNode.style.width=o+"px",this._originalDomNode.style.left="0px",this._modifiedDomNode.style.width=e-o+"px",this._modifiedDomNode.style.left=o+"px",this._overviewDomElement.style.top="0px",this._overviewDomElement.style.height=i-n+"px",this._overviewDomElement.style.width=t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewDomElement.style.left=e-t.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",this._overviewViewportDomElement.setWidth(t.ENTIRE_DIFF_OVERVIEW_WIDTH),this._overviewViewportDomElement.setHeight(30),this._originalEditor.layout({width:o,height:i-n}),this._modifiedEditor.layout({width:e-o-(this._options.renderOverviewRuler?t.ENTIRE_DIFF_OVERVIEW_WIDTH:0),height:i-n}),(this._originalOverviewRuler||this._modifiedOverviewRuler)&&this._layoutOverviewRulers(),this._reviewPane.layout(i-n,e,n),this._layoutOverviewViewport()}},{key:"_layoutOverviewViewport",value:function(){var e=this._computeOverviewViewport();e?(this._overviewViewportDomElement.setTop(e.top),this._overviewViewportDomElement.setHeight(e.height)):(this._overviewViewportDomElement.setTop(0),this._overviewViewportDomElement.setHeight(0))}},{key:"_computeOverviewViewport",value:function(){var e=this._modifiedEditor.getLayoutInfo();if(!e)return null;var i=this._modifiedEditor.getScrollTop(),t=this._modifiedEditor.getScrollHeight(),n=Math.max(0,e.height),o=Math.max(0,n-0),r=t>0?o/t:0;return{height:Math.max(0,Math.floor(e.height*r)),top:Math.floor(i*r)}}},{key:"_createDataSource",value:function(){var e=this;return{getWidth:function(){return e._elementSizeObserver.getWidth()},getHeight:function(){return e._elementSizeObserver.getHeight()-e._getReviewHeight()},getOptions:function(){return{renderOverviewRuler:e._options.renderOverviewRuler}},getContainerDomNode:function(){return e._containerDomElement},relayoutEditors:function(){e._doLayout()},getOriginalEditor:function(){return e._originalEditor},getModifiedEditor:function(){return e._modifiedEditor}}}},{key:"_setStrategy",value:function(e){this._strategy&&this._strategy.dispose(),this._strategy=e,e.applyColors(this._themeService.getColorTheme()),this._diffComputationResult&&this._updateDecorations(),this._doLayout()}},{key:"_getLineChangeAtOrBeforeLineNumber",value:function(e,i){var t=this._diffComputationResult?this._diffComputationResult.changes:[];if(0===t.length||e<i(t[0]))return null;for(var n=0,o=t.length-1;n<o;){var r=Math.floor((n+o)/2),a=i(t[r]),s=r+1<=o?i(t[r+1]):1073741824;e<a?o=r-1:e>=s?n=r+1:(n=r,o=r)}return t[n]}},{key:"_getEquivalentLineForOriginalLineNumber",value:function(e){var i=this._getLineChangeAtOrBeforeLineNumber(e,(function(e){return e.originalStartLineNumber}));if(!i)return e;var t=i.originalStartLineNumber+(i.originalEndLineNumber>0?-1:0),n=i.modifiedStartLineNumber+(i.modifiedEndLineNumber>0?-1:0),o=i.originalEndLineNumber>0?i.originalEndLineNumber-i.originalStartLineNumber+1:0,r=i.modifiedEndLineNumber>0?i.modifiedEndLineNumber-i.modifiedStartLineNumber+1:0,a=e-t;return a<=o?n+Math.min(a,r):n+r-o+a}},{key:"_getEquivalentLineForModifiedLineNumber",value:function(e){var i=this._getLineChangeAtOrBeforeLineNumber(e,(function(e){return e.modifiedStartLineNumber}));if(!i)return e;var t=i.originalStartLineNumber+(i.originalEndLineNumber>0?-1:0),n=i.modifiedStartLineNumber+(i.modifiedEndLineNumber>0?-1:0),o=i.originalEndLineNumber>0?i.originalEndLineNumber-i.originalStartLineNumber+1:0,r=i.modifiedEndLineNumber>0?i.modifiedEndLineNumber-i.modifiedStartLineNumber+1:0,a=e-n;return a<=r?t+Math.min(a,o):t+o-r+a}},{key:"getDiffLineInformationForOriginal",value:function(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForOriginalLineNumber(e)}:null}},{key:"getDiffLineInformationForModified",value:function(e){return this._diffComputationResult?{equivalentLineNumber:this._getEquivalentLineForModifiedLineNumber(e)}:null}}],[{key:"_getClassName",value:function(e,i){var t="monaco-diff-editor monaco-editor-background ";return i&&(t+="side-by-side "),t+=(0,V.m6)(e.type)}},{key:"_equals",value:function(e,i){return!e&&!i||!(!e||!i)&&e.toString()===i.toString()}}]),t}(p.JT);Se.ONE_OVERVIEW_WIDTH=15,Se.ENTIRE_DIFF_OVERVIEW_WIDTH=30,Se.UPDATE_DIFF_DECORATIONS_DELAY=200,Se=pe([De(3,ge.p),De(4,oe.p),De(5,W.i6),De(6,se.TG),De(7,y.$),De(8,V.XE),De(9,le.lT),De(10,ue.i),De(11,me.ek)],Se);var Le=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e){var n;return(0,u.Z)(this,t),(n=i.call(this))._dataSource=e,n._insertColor=null,n._removeColor=null,n}return(0,h.Z)(t,[{key:"applyColors",value:function(e){var i=(e.getColor(P.ypS)||P.CzK).transparent(2),t=(e.getColor(P.P4M)||P.keg).transparent(2),n=!i.equals(this._insertColor)||!t.equals(this._removeColor);return this._insertColor=i,this._removeColor=t,n}},{key:"getEditorsDiffDecorations",value:function(e,i,t,n,o){o=o.sort((function(e,i){return e.afterLineNumber-i.afterLineNumber})),n=n.sort((function(e,i){return e.afterLineNumber-i.afterLineNumber}));var r=this._getViewZones(e,n,o,t),a=this._getOriginalEditorDecorations(e,i,t),s=this._getModifiedEditorDecorations(e,i,t);return{original:{decorations:a.decorations,overviewZones:a.overviewZones,zones:r.original},modified:{decorations:s.decorations,overviewZones:s.overviewZones,zones:r.modified}}}}]),t}(p.JT),Ne=function(){function e(i){(0,u.Z)(this,e),this._source=i,this._index=-1,this.current=null,this.advance()}return(0,h.Z)(e,[{key:"advance",value:function(){this._index++,this._index<this._source.length?this.current=this._source[this._index]:this.current=null}}]),e}(),ke=function(){function e(i,t,n,o,r){(0,u.Z)(this,e),this._lineChanges=i,this._originalForeignVZ=t,this._modifiedForeignVZ=n,this._originalEditor=o,this._modifiedEditor=r}return(0,h.Z)(e,[{key:"getViewZones",value:function(){for(var i=this._originalEditor.getOption(59),t=this._modifiedEditor.getOption(59),n=-1!==this._originalEditor.getOption(132).wrappingColumn,o=-1!==this._modifiedEditor.getOption(132).wrappingColumn,r=n||o,a=this._originalEditor.getModel(),s=this._originalEditor._getViewModel().coordinatesConverter,d=this._modifiedEditor._getViewModel().coordinatesConverter,l=[],u=[],h=0,c=0,g=0,f=0,m=0,v=0,_=function(e,i){return e.afterLineNumber-i.afterLineNumber},p=function(e,i){if(null===i.domNode&&e.length>0){var t=e[e.length-1];if(t.afterLineNumber===i.afterLineNumber&&null===t.domNode)return void(t.heightInLines+=i.heightInLines)}e.push(i)},D=new Ne(this._modifiedForeignVZ),w=new Ne(this._originalForeignVZ),y=1,C=1,b=0,E=this._lineChanges.length;b<=E;b++){var S=b<E?this._lineChanges[b]:null;null!==S?(g=S.originalStartLineNumber+(S.originalEndLineNumber>0?-1:0),f=S.modifiedStartLineNumber+(S.modifiedEndLineNumber>0?-1:0),c=S.originalEndLineNumber>0?e._getViewLineCount(this._originalEditor,S.originalStartLineNumber,S.originalEndLineNumber):0,h=S.modifiedEndLineNumber>0?e._getViewLineCount(this._modifiedEditor,S.modifiedStartLineNumber,S.modifiedEndLineNumber):0,m=Math.max(S.originalStartLineNumber,S.originalEndLineNumber),v=Math.max(S.modifiedStartLineNumber,S.modifiedEndLineNumber)):(m=g+=1e7+c,v=f+=1e7+h);var L=[],N=[];if(r){var k=void 0;k=S?S.originalEndLineNumber>0?S.originalStartLineNumber-y:S.modifiedStartLineNumber-C:a.getLineCount()-y;for(var R=0;R<k;R++){var I=y+R,M=C+R,T=s.getModelLineViewLineCount(I),O=d.getModelLineViewLineCount(M);T<O?L.push({afterLineNumber:I,heightInLines:O-T,domNode:null,marginDomNode:null}):T>O&&N.push({afterLineNumber:M,heightInLines:T-O,domNode:null,marginDomNode:null})}S&&(y=(S.originalEndLineNumber>0?S.originalEndLineNumber:S.originalStartLineNumber)+1,C=(S.modifiedEndLineNumber>0?S.modifiedEndLineNumber:S.modifiedStartLineNumber)+1)}for(;D.current&&D.current.afterLineNumber<=v;){var x=void 0;x=D.current.afterLineNumber<=f?g-f+D.current.afterLineNumber:m;var W=null;S&&S.modifiedStartLineNumber<=D.current.afterLineNumber&&D.current.afterLineNumber<=S.modifiedEndLineNumber&&(W=this._createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion()),L.push({afterLineNumber:x,heightInLines:D.current.height/t,domNode:null,marginDomNode:W}),D.advance()}for(;w.current&&w.current.afterLineNumber<=m;){var P=void 0;P=w.current.afterLineNumber<=g?f-g+w.current.afterLineNumber:v,N.push({afterLineNumber:P,heightInLines:w.current.height/i,domNode:null}),w.advance()}if(null!==S&&We(S)){var V=this._produceOriginalFromDiff(S,c,h);V&&L.push(V)}if(null!==S&&Pe(S)){var F=this._produceModifiedFromDiff(S,c,h);F&&N.push(F)}var Z=0,A=0;for(L=L.sort(_),N=N.sort(_);Z<L.length&&A<N.length;){var H=L[Z],z=N[A],U=H.afterLineNumber-g,B=z.afterLineNumber-f;U<B?(p(l,H),Z++):B<U?(p(u,z),A++):H.shouldNotShrink?(p(l,H),Z++):z.shouldNotShrink?(p(u,z),A++):H.heightInLines>=z.heightInLines?(H.heightInLines-=z.heightInLines,A++):(z.heightInLines-=H.heightInLines,Z++)}for(;Z<L.length;)p(l,L[Z]),Z++;for(;A<N.length;)p(u,N[A]),A++}return{original:e._ensureDomNodes(l),modified:e._ensureDomNodes(u)}}}],[{key:"_getViewLineCount",value:function(e,i,t){var n=e.getModel(),o=e._getViewModel();if(n&&o){var r=Fe(n,o,i,t);return r.endLineNumber-r.startLineNumber+1}return t-i+1}},{key:"_ensureDomNodes",value:function(e){return e.map((function(e){return e.domNode||(e.domNode=Ve()),e}))}}]),e}();function Re(e,i,t,n,o){return{range:new ee.e(e,i,t,n),options:o}}var Ie={charDelete:ne.qx.register({description:"diff-editor-char-delete",className:"char-delete"}),charDeleteWholeLine:ne.qx.register({description:"diff-editor-char-delete-whole-line",className:"char-delete",isWholeLine:!0}),charInsert:ne.qx.register({description:"diff-editor-char-insert",className:"char-insert"}),charInsertWholeLine:ne.qx.register({description:"diff-editor-char-insert-whole-line",className:"char-insert",isWholeLine:!0}),lineInsert:ne.qx.register({description:"diff-editor-line-insert",className:"line-insert",marginClassName:"line-insert",isWholeLine:!0}),lineInsertWithSign:ne.qx.register({description:"diff-editor-line-insert-with-sign",className:"line-insert",linesDecorationsClassName:"insert-sign "+V.kS.asClassName(Ce),marginClassName:"line-insert",isWholeLine:!0}),lineDelete:ne.qx.register({description:"diff-editor-line-delete",className:"line-delete",marginClassName:"line-delete",isWholeLine:!0}),lineDeleteWithSign:ne.qx.register({description:"diff-editor-line-delete-with-sign",className:"line-delete",linesDecorationsClassName:"delete-sign "+V.kS.asClassName(be),marginClassName:"line-delete",isWholeLine:!0}),lineDeleteMargin:ne.qx.register({description:"diff-editor-line-delete-margin",marginClassName:"line-delete"})},Me=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n){var r;return(0,u.Z)(this,t),(r=i.call(this,e))._disableSash=!1===n,r._sashRatio=null,r._sashPosition=null,r._startSashPosition=null,r._sash=r._register(new m.g(r._dataSource.getContainerDomNode(),(0,o.Z)(r),{orientation:0})),r._disableSash&&(r._sash.state=0),r._sash.onDidStart((function(){return r._onSashDragStart()})),r._sash.onDidChange((function(e){return r._onSashDrag(e)})),r._sash.onDidEnd((function(){return r._onSashDragEnd()})),r._sash.onDidReset((function(){return r._onSashReset()})),r}return(0,h.Z)(t,[{key:"setEnableSplitViewResizing",value:function(e){var i=!1===e;this._disableSash!==i&&(this._disableSash=i,this._sash.state=this._disableSash?0:3)}},{key:"layout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._sashRatio,i=this._dataSource.getWidth(),n=i-(this._dataSource.getOptions().renderOverviewRuler?Se.ENTIRE_DIFF_OVERVIEW_WIDTH:0),o=Math.floor((e||.5)*n),r=Math.floor(.5*n);return o=this._disableSash?r:o||r,n>2*t.MINIMUM_EDITOR_WIDTH?(o<t.MINIMUM_EDITOR_WIDTH&&(o=t.MINIMUM_EDITOR_WIDTH),o>n-t.MINIMUM_EDITOR_WIDTH&&(o=n-t.MINIMUM_EDITOR_WIDTH)):o=r,this._sashPosition!==o&&(this._sashPosition=o,this._sash.layout()),this._sashPosition}},{key:"_onSashDragStart",value:function(){this._startSashPosition=this._sashPosition}},{key:"_onSashDrag",value:function(e){var i=this._dataSource.getWidth()-(this._dataSource.getOptions().renderOverviewRuler?Se.ENTIRE_DIFF_OVERVIEW_WIDTH:0),t=this.layout((this._startSashPosition+(e.currentX-e.startX))/i);this._sashRatio=t/i,this._dataSource.relayoutEditors()}},{key:"_onSashDragEnd",value:function(){this._sash.layout()}},{key:"_onSashReset",value:function(){this._sashRatio=.5,this._dataSource.relayoutEditors(),this._sash.layout()}},{key:"getVerticalSashTop",value:function(e){return 0}},{key:"getVerticalSashLeft",value:function(e){return this._sashPosition}},{key:"getVerticalSashHeight",value:function(e){return this._dataSource.getHeight()}},{key:"_getViewZones",value:function(e,i,t){var n=this._dataSource.getOriginalEditor(),o=this._dataSource.getModifiedEditor();return new Te(e,i,t,n,o).getViewZones()}},{key:"_getOriginalEditorDecorations",value:function(e,i,t){var n,o=this._dataSource.getOriginalEditor(),r=String(this._removeColor),a={decorations:[],overviewZones:[]},s=o.getModel(),d=o._getViewModel(),u=(0,l.Z)(e);try{for(u.s();!(n=u.n()).done;){var h=n.value;if(Pe(h)){a.decorations.push({range:new ee.e(h.originalStartLineNumber,1,h.originalEndLineNumber,1073741824),options:t?Ie.lineDeleteWithSign:Ie.lineDelete}),We(h)&&h.charChanges||a.decorations.push(Re(h.originalStartLineNumber,1,h.originalEndLineNumber,1073741824,Ie.charDeleteWholeLine));var c=Fe(s,d,h.originalStartLineNumber,h.originalEndLineNumber);if(a.overviewZones.push(new re.EY(c.startLineNumber,c.endLineNumber,r)),h.charChanges){var g,f=(0,l.Z)(h.charChanges);try{for(f.s();!(g=f.n()).done;){var m=g.value;if(Pe(m))if(i)for(var v=m.originalStartLineNumber;v<=m.originalEndLineNumber;v++){var _=void 0,p=void 0;_=v===m.originalStartLineNumber?m.originalStartColumn:s.getLineFirstNonWhitespaceColumn(v),p=v===m.originalEndLineNumber?m.originalEndColumn:s.getLineLastNonWhitespaceColumn(v),a.decorations.push(Re(v,_,v,p,Ie.charDelete))}else a.decorations.push(Re(m.originalStartLineNumber,m.originalStartColumn,m.originalEndLineNumber,m.originalEndColumn,Ie.charDelete))}}catch(D){f.e(D)}finally{f.f()}}}}}catch(D){u.e(D)}finally{u.f()}return a}},{key:"_getModifiedEditorDecorations",value:function(e,i,t){var n,o=this._dataSource.getModifiedEditor(),r=String(this._insertColor),a={decorations:[],overviewZones:[]},s=o.getModel(),d=o._getViewModel(),u=(0,l.Z)(e);try{for(u.s();!(n=u.n()).done;){var h=n.value;if(We(h)){a.decorations.push({range:new ee.e(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824),options:t?Ie.lineInsertWithSign:Ie.lineInsert}),Pe(h)&&h.charChanges||a.decorations.push(Re(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824,Ie.charInsertWholeLine));var c=Fe(s,d,h.modifiedStartLineNumber,h.modifiedEndLineNumber);if(a.overviewZones.push(new re.EY(c.startLineNumber,c.endLineNumber,r)),h.charChanges){var g,f=(0,l.Z)(h.charChanges);try{for(f.s();!(g=f.n()).done;){var m=g.value;if(We(m))if(i)for(var v=m.modifiedStartLineNumber;v<=m.modifiedEndLineNumber;v++){var _=void 0,p=void 0;_=v===m.modifiedStartLineNumber?m.modifiedStartColumn:s.getLineFirstNonWhitespaceColumn(v),p=v===m.modifiedEndLineNumber?m.modifiedEndColumn:s.getLineLastNonWhitespaceColumn(v),a.decorations.push(Re(v,_,v,p,Ie.charInsert))}else a.decorations.push(Re(m.modifiedStartLineNumber,m.modifiedStartColumn,m.modifiedEndLineNumber,m.modifiedEndColumn,Ie.charInsert))}}catch(D){f.e(D)}finally{f.f()}}}}}catch(D){u.e(D)}finally{u.f()}return a}}]),t}(Le);Me.MINIMUM_EDITOR_WIDTH=100;var Te=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,o,r,a){return(0,u.Z)(this,t),i.call(this,e,n,o,r,a)}return(0,h.Z)(t,[{key:"_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion",value:function(){return null}},{key:"_produceOriginalFromDiff",value:function(e,i,t){return t>i?{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:t-i,domNode:null}:null}},{key:"_produceModifiedFromDiff",value:function(e,i,t){return i>t?{afterLineNumber:Math.max(e.modifiedStartLineNumber,e.modifiedEndLineNumber),heightInLines:i-t,domNode:null}:null}}]),t}(ke),Oe=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n){var o;return(0,u.Z)(this,t),(o=i.call(this,e))._decorationsLeft=e.getOriginalEditor().getLayoutInfo().decorationsLeft,o._register(e.getOriginalEditor().onDidLayoutChange((function(i){o._decorationsLeft!==i.decorationsLeft&&(o._decorationsLeft=i.decorationsLeft,e.relayoutEditors())}))),o}return(0,h.Z)(t,[{key:"setEnableSplitViewResizing",value:function(e){}},{key:"_getViewZones",value:function(e,i,t,n){var o=this._dataSource.getOriginalEditor(),r=this._dataSource.getModifiedEditor();return new xe(e,i,t,o,r,n).getViewZones()}},{key:"_getOriginalEditorDecorations",value:function(e,i,t){var n,o=String(this._removeColor),r={decorations:[],overviewZones:[]},a=this._dataSource.getOriginalEditor(),s=a.getModel(),d=a._getViewModel(),u=(0,l.Z)(e);try{for(u.s();!(n=u.n()).done;){var h=n.value;if(Pe(h)){r.decorations.push({range:new ee.e(h.originalStartLineNumber,1,h.originalEndLineNumber,1073741824),options:Ie.lineDeleteMargin});var c=Fe(s,d,h.originalStartLineNumber,h.originalEndLineNumber);r.overviewZones.push(new re.EY(c.startLineNumber,c.endLineNumber,o))}}}catch(g){u.e(g)}finally{u.f()}return r}},{key:"_getModifiedEditorDecorations",value:function(e,i,t){var n,o=this._dataSource.getModifiedEditor(),r=String(this._insertColor),a={decorations:[],overviewZones:[]},s=o.getModel(),d=o._getViewModel(),u=(0,l.Z)(e);try{for(u.s();!(n=u.n()).done;){var h=n.value;if(We(h)){a.decorations.push({range:new ee.e(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824),options:t?Ie.lineInsertWithSign:Ie.lineInsert});var c=Fe(s,d,h.modifiedStartLineNumber,h.modifiedEndLineNumber);if(a.overviewZones.push(new re.EY(c.startLineNumber,c.endLineNumber,r)),h.charChanges){var g,f=(0,l.Z)(h.charChanges);try{for(f.s();!(g=f.n()).done;){var m=g.value;if(We(m))if(i)for(var v=m.modifiedStartLineNumber;v<=m.modifiedEndLineNumber;v++){var _=void 0,p=void 0;_=v===m.modifiedStartLineNumber?m.modifiedStartColumn:s.getLineFirstNonWhitespaceColumn(v),p=v===m.modifiedEndLineNumber?m.modifiedEndColumn:s.getLineLastNonWhitespaceColumn(v),a.decorations.push(Re(v,_,v,p,Ie.charInsert))}else a.decorations.push(Re(m.modifiedStartLineNumber,m.modifiedStartColumn,m.modifiedEndLineNumber,m.modifiedEndColumn,Ie.charInsert))}}catch(D){f.e(D)}finally{f.f()}}else a.decorations.push(Re(h.modifiedStartLineNumber,1,h.modifiedEndLineNumber,1073741824,Ie.charInsertWholeLine))}}}catch(D){u.e(D)}finally{u.f()}return a}},{key:"layout",value:function(){return Math.max(5,this._decorationsLeft)}}]),t}(Le),xe=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e,n,o,r,a,s){var d;return(0,u.Z)(this,t),(d=i.call(this,e,n,o,r,a))._originalModel=r.getModel(),d._renderIndicators=s,d._pendingLineChange=[],d._pendingViewZones=[],d._lineBreaksComputer=d._modifiedEditor._getViewModel().createLineBreaksComputer(),d}return(0,h.Z)(t,[{key:"getViewZones",value:function(){var e=(0,r.Z)((0,a.Z)(t.prototype),"getViewZones",this).call(this);return this._finalize(e),e}},{key:"_createOriginalMarginDomNodeForModifiedForeignViewZoneInAddedRegion",value:function(){var e=document.createElement("div");return e.className="inline-added-margin-view-zone",e}},{key:"_produceOriginalFromDiff",value:function(e,i,t){var n=document.createElement("div");return n.className="inline-added-margin-view-zone",{afterLineNumber:Math.max(e.originalStartLineNumber,e.originalEndLineNumber),heightInLines:t,domNode:document.createElement("div"),marginDomNode:n}}},{key:"_produceModifiedFromDiff",value:function(e,i,t){var n=document.createElement("div");n.className="view-lines line-delete ".concat(_e.S);var o=document.createElement("div");o.className="inline-deleted-margin-view-zone";for(var r={shouldNotShrink:!0,afterLineNumber:0===e.modifiedEndLineNumber?e.modifiedStartLineNumber:e.modifiedStartLineNumber-1,heightInLines:i,minWidthInPx:0,domNode:n,marginDomNode:o,diff:{originalStartLineNumber:e.originalStartLineNumber,originalEndLineNumber:e.originalEndLineNumber,modifiedStartLineNumber:e.modifiedStartLineNumber,modifiedEndLineNumber:e.modifiedEndLineNumber,originalModel:this._originalModel,viewLineCounts:null}},a=e.originalStartLineNumber;a<=e.originalEndLineNumber;a++)this._lineBreaksComputer.addRequest(this._originalModel.getLineContent(a),null,null);return this._pendingLineChange.push(e),this._pendingViewZones.push(r),r}},{key:"_finalize",value:function(e){for(var i=this._modifiedEditor.getOptions(),t=this._modifiedEditor.getModel().getOptions().tabSize,n=i.get(44),o=i.get(29),r=n.typicalHalfwidthCharacterWidth,a=i.get(93),s=this._originalModel.mightContainNonBasicASCII(),d=this._originalModel.mightContainRTL(),u=i.get(59),h=i.get(131).decorationsWidth,c=i.get(105),g=i.get(88),f=i.get(83),m=i.get(45),v=this._lineBreaksComputer.finalize(),_=0,p=0;p<this._pendingLineChange.length;p++){var w=this._pendingLineChange[p],y=this._pendingViewZones[p],C=y.domNode;(0,D.N)(C,n);var b=y.marginDomNode;(0,D.N)(b,n);var E=[];if(w.charChanges){var S,L=(0,l.Z)(w.charChanges);try{for(L.s();!(S=L.n()).done;){var N=S.value;Pe(N)&&E.push(new x.$t(new ee.e(N.originalStartLineNumber,N.originalStartColumn,N.originalEndLineNumber,N.originalEndColumn),"char-delete",0))}}catch(X){L.e(X)}finally{L.f()}}for(var k=E.length>0,R=(0,ie.l$)(1e4),I=0,M=0,T=null,O=w.originalStartLineNumber;O<=w.originalEndLineNumber;O++){var W=O-w.originalStartLineNumber,P=this._originalModel.getLineTokens(O),V=P.getLineContent(),F=v[_++],Z=ae.Kp.filter(E,O,1,V.length+1);if(F){var A,H=0,z=(0,l.Z)(F.breakOffsets);try{for(z.s();!(A=z.n()).done;){var U=A.value,B=P.sliceAndInflate(H,U,0),q=V.substring(H,U);I=Math.max(I,this._renderOriginalLine(M++,q,B,ae.Kp.extractWrapped(Z,H,U),k,s,d,n,o,u,h,c,g,f,m,t,R,b)),H=U}}catch(X){z.e(X)}finally{z.f()}for(T||(T=[]);T.length<W;)T[T.length]=1;T[W]=F.breakOffsets.length,y.heightInLines+=F.breakOffsets.length-1;var j=document.createElement("div");j.className="line-delete",e.original.push({afterLineNumber:O,afterColumn:0,heightInLines:F.breakOffsets.length-1,domNode:Ve(),marginDomNode:j})}else I=Math.max(I,this._renderOriginalLine(M++,V,P,Z,k,s,d,n,o,u,h,c,g,f,m,t,R,b))}I+=a;var K=R.build(),Q=Ee?Ee.createHTML(K):K;if(C.innerHTML=Q,y.minWidthInPx=I*r,T)for(var J=w.originalEndLineNumber-w.originalStartLineNumber;T.length<=J;)T[T.length]=1;y.diff.viewLineCounts=T}e.original.sort((function(e,i){return e.afterLineNumber-i.afterLineNumber}))}},{key:"_renderOriginalLine",value:function(e,i,t,n,o,r,a,s,d,l,u,h,c,g,f,m,v,_){v.appendASCIIString('<div class="view-line'),o||v.appendASCIIString(" char-delete"),v.appendASCIIString('" style="top:'),v.appendASCIIString(String(e*l)),v.appendASCIIString('px;width:1000000px;">');var p=x.wA.isBasicASCII(i,r),D=x.wA.containsRTL(i,p,a),w=(0,O.d1)(new O.IJ(s.isMonospace&&!d,s.canUseHalfwidthRightwardsArrow,i,!1,p,D,0,t,n,m,0,s.spaceWidth,s.middotWidth,s.wsmiddotWidth,h,c,g,f!==R.n0.OFF,null),v);if(v.appendASCIIString("</div>"),this._renderIndicators){var y=document.createElement("div");y.className="delete-sign ".concat(V.kS.asClassName(be)),y.setAttribute("style","position:absolute;top:".concat(e*l,"px;width:").concat(u,"px;height:").concat(l,"px;right:0;")),_.appendChild(y)}return w.characterMapping.getAbsoluteOffset(w.characterMapping.length)}}]),t}(ke);function We(e){return e.modifiedEndLineNumber>0}function Pe(e){return e.originalEndLineNumber>0}function Ve(){var e=document.createElement("div");return e.className="diagonal-fill",e}function Fe(e,i,t,n){var o=e.getLineCount();return t=Math.min(o,Math.max(1,t)),n=Math.min(o,Math.max(1,n)),i.coordinatesConverter.convertModelRangeToViewRange(new ee.e(t,e.getLineMinColumn(t),n,e.getLineMaxColumn(n)))}function Ze(e,i){return{enableSplitViewResizing:(0,R.O7)(e.enableSplitViewResizing,i.enableSplitViewResizing),renderSideBySide:(0,R.O7)(e.renderSideBySide,i.renderSideBySide),maxComputationTime:(0,R.Zc)(e.maxComputationTime,i.maxComputationTime,0,1073741824),maxFileSize:(0,R.Zc)(e.maxFileSize,i.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,R.O7)(e.ignoreTrimWhitespace,i.ignoreTrimWhitespace),renderIndicators:(0,R.O7)(e.renderIndicators,i.renderIndicators),originalEditable:(0,R.O7)(e.originalEditable,i.originalEditable),diffCodeLens:(0,R.O7)(e.diffCodeLens,i.diffCodeLens),renderOverviewRuler:(0,R.O7)(e.renderOverviewRuler,i.renderOverviewRuler),diffWordWrap:(t=e.diffWordWrap,n=i.diffWordWrap,(0,R.NY)(t,n,["off","on","inherit"]))};var t,n}(0,V.Ic)((function(e,i){var t=e.getColor(P.ypS);t&&(i.addRule(".monaco-editor .line-insert, .monaco-editor .char-insert { background-color: ".concat(t,"; }")),i.addRule(".monaco-diff-editor .line-insert, .monaco-diff-editor .char-insert { background-color: ".concat(t,"; }")),i.addRule(".monaco-editor .inline-added-margin-view-zone { background-color: ".concat(t,"; }")));var n=e.getColor(P.P4M);n&&(i.addRule(".monaco-editor .line-delete, .monaco-editor .char-delete { background-color: ".concat(n,"; }")),i.addRule(".monaco-diff-editor .line-delete, .monaco-diff-editor .char-delete { background-color: ".concat(n,"; }")),i.addRule(".monaco-editor .inline-deleted-margin-view-zone { background-color: ".concat(n,"; }")));var o=e.getColor(P.XL$);o&&i.addRule(".monaco-editor .line-insert, .monaco-editor .char-insert { border: 1px ".concat("hc"===e.type?"dashed":"solid"," ").concat(o,"; }"));var r=e.getColor(P.mHy);r&&i.addRule(".monaco-editor .line-delete, .monaco-editor .char-delete { border: 1px ".concat("hc"===e.type?"dashed":"solid"," ").concat(r,"; }"));var a=e.getColor(P._wn);a&&i.addRule(".monaco-diff-editor.side-by-side .editor.modified { box-shadow: -6px 0 5px -5px ".concat(a,"; }"));var s=e.getColor(P.LLc);s&&i.addRule(".monaco-diff-editor.side-by-side .editor.modified { border-left: 1px solid ".concat(s,"; }"));var d=e.getColor(P.etL);d&&i.addRule("\n\t\t\t.monaco-diff-editor .diffViewport {\n\t\t\t\tbackground: ".concat(d,";\n\t\t\t}\n\t\t"));var l=e.getColor(P.ABB);l&&i.addRule("\n\t\t\t.monaco-diff-editor .diffViewport:hover {\n\t\t\t\tbackground: ".concat(l,";\n\t\t\t}\n\t\t"));var u=e.getColor(P.ynu);u&&i.addRule("\n\t\t\t.monaco-diff-editor .diffViewport:active {\n\t\t\t\tbackground: ".concat(u,";\n\t\t\t}\n\t\t"));var h=e.getColor(P.L_t);i.addRule("\n\t.monaco-editor .diagonal-fill {\n\t\tbackground-image: linear-gradient(\n\t\t\t-45deg,\n\t\t\t".concat(h," 12.5%,\n\t\t\t#0000 12.5%, #0000 50%,\n\t\t\t").concat(h," 50%, ").concat(h," 62.5%,\n\t\t\t#0000 62.5%, #0000 100%\n\t\t);\n\t\tbackground-size: 8px 8px;\n\t}\n\t"))}))},77141:function(e,i,t){t.d(i,{F:function(){return m}});var n=t(15671),o=t(43144),r=t(11752),a=t(61120),s=t(60136),d=t(43668),l=t(65361),u=t(28941),h=t(10526),c=t(57151),g=t(30788),f={followsCaret:!0,ignoreCharChanges:!0,alwaysRevealFirst:!0},m=function(e){(0,s.Z)(t,e);var i=(0,d.Z)(t);function t(e){var o,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(0,n.Z)(this,t),(o=i.call(this))._onDidUpdate=o._register(new u.Q5),o._editor=e,o._options=c.jB(r,f,!1),o.disposed=!1,o.nextIdx=-1,o.ranges=[],o.ignoreSelectionChange=!1,o.revealFirst=Boolean(o._options.alwaysRevealFirst),o._register(o._editor.onDidDispose((function(){return o.dispose()}))),o._register(o._editor.onDidUpdateDiff((function(){return o._onDiffUpdated()}))),o._options.followsCaret&&o._register(o._editor.getModifiedEditor().onDidChangeCursorPosition((function(e){o.ignoreSelectionChange||(o.nextIdx=-1)}))),o._options.alwaysRevealFirst&&o._register(o._editor.getModifiedEditor().onDidChangeModel((function(e){o.revealFirst=!0}))),o._init(),o}return(0,o.Z)(t,[{key:"_init",value:function(){this._editor.getLineChanges()}},{key:"_onDiffUpdated",value:function(){this._init(),this._compute(this._editor.getLineChanges()),this.revealFirst&&null!==this._editor.getLineChanges()&&(this.revealFirst=!1,this.nextIdx=-1,this.next(1))}},{key:"_compute",value:function(e){var i=this;this.ranges=[],e&&e.forEach((function(e){!i._options.ignoreCharChanges&&e.charChanges?e.charChanges.forEach((function(e){i.ranges.push({rhs:!0,range:new g.e(e.modifiedStartLineNumber,e.modifiedStartColumn,e.modifiedEndLineNumber,e.modifiedEndColumn)})})):0===e.modifiedEndLineNumber?i.ranges.push({rhs:!0,range:new g.e(e.modifiedStartLineNumber,1,e.modifiedStartLineNumber+1,1)}):i.ranges.push({rhs:!0,range:new g.e(e.modifiedStartLineNumber,1,e.modifiedEndLineNumber+1,1)})})),this.ranges.sort((function(e,i){return g.e.compareRangesUsingStarts(e.range,i.range)})),this._onDidUpdate.fire(this)}},{key:"_initIdx",value:function(e){var i=!1,t=this._editor.getPosition();if(t){for(var n=0,o=this.ranges.length;n<o&&!i;n++){var r=this.ranges[n].range;t.isBeforeOrEqual(r.getStartPosition())&&(this.nextIdx=n+(e?0:-1),i=!0)}i||(this.nextIdx=e?0:this.ranges.length-1),this.nextIdx<0&&(this.nextIdx=this.ranges.length-1)}else this.nextIdx=0}},{key:"_move",value:function(e,i){if(l.ok(!this.disposed,"Illegal State - diff navigator has been disposed"),this.canNavigate()){-1===this.nextIdx?this._initIdx(e):e?(this.nextIdx+=1,this.nextIdx>=this.ranges.length&&(this.nextIdx=0)):(this.nextIdx-=1,this.nextIdx<0&&(this.nextIdx=this.ranges.length-1));var t=this.ranges[this.nextIdx];this.ignoreSelectionChange=!0;try{var n=t.range.getStartPosition();this._editor.setPosition(n),this._editor.revealRangeInCenter(t.range,i)}finally{this.ignoreSelectionChange=!1}}}},{key:"canNavigate",value:function(){return this.ranges&&this.ranges.length>0}},{key:"next",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._move(!0,e)}},{key:"previous",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this._move(!1,e)}},{key:"dispose",value:function(){(0,r.Z)((0,a.Z)(t.prototype),"dispose",this).call(this),this.ranges=[],this.disposed=!0}}]),t}(h.JT)},77087:function(e,i,t){t.d(i,{H:function(){return C}});var n=t(15671),o=t(43144),r=t(97326),a=t(60136),s=t(43668),d=t(11752),l=t(61120),u=t(57151),h=t(56692),c=t(48483),g=t(89850),f=t(49525),m=t(8850),v=t(13023),_=t(3553),p=t(99277),D=t(89125),w=function(e,i,t,n){var o,r=arguments.length,a=r<3?i:null===n?n=Object.getOwnPropertyDescriptor(i,t):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,i,t,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(i,t,a):o(i,t))||a);return r>3&&a&&Object.defineProperty(i,t,a),a},y=function(e,i){return function(t,n){i(t,n,e)}},C=function(e){(0,a.Z)(t,e);var i=(0,s.Z)(t);function t(e,o,a,s,u,h,c,g,f,m,v){var _,p;return(0,n.Z)(this,t),(p=i.call(this,e,Object.assign(Object.assign({},a.getRawOptions()),{overflowWidgetsDomNode:a.getOverflowWidgetsDomNode()}),{},s,u,h,c,g,f,m,v))._parentEditor=a,p._overwriteOptions=o,(0,d.Z)((_=(0,r.Z)(p),(0,l.Z)(t.prototype)),"updateOptions",_).call(_,p._overwriteOptions),p._register(a.onDidChangeConfiguration((function(e){return p._onParentConfigurationChanged(e)}))),p}return(0,o.Z)(t,[{key:"getParentEditor",value:function(){return this._parentEditor}},{key:"_onParentConfigurationChanged",value:function(e){(0,d.Z)((0,l.Z)(t.prototype),"updateOptions",this).call(this,this._parentEditor.getRawOptions()),(0,d.Z)((0,l.Z)(t.prototype),"updateOptions",this).call(this,this._overwriteOptions)}},{key:"updateOptions",value:function(e){u.jB(this._overwriteOptions,e,!0),(0,d.Z)((0,l.Z)(t.prototype),"updateOptions",this).call(this,this._overwriteOptions)}}]),t}(c.Gm);C=w([y(3,m.TG),y(4,h.$),y(5,g.Hy),y(6,f.i6),y(7,_.XE),y(8,v.lT),y(9,p.F),y(10,D.c_)],C)}}]);
//# sourceMappingURL=monaco-editor-vendor.9413e776.0ec4e776.js.map