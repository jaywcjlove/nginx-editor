"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[6936],{19408:function(e,t,i){i.d(t,{x:function(){return u}});var n=i(74165),o=i(37762),r=i(15671),s=i(43144),a=i(19980),l=i(39912),c=i(851),d=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},u=function(){function e(){(0,r.Z)(this,e)}return(0,s.Z)(e,[{key:"provideSelectionRanges",value:function(t,i){return d(this,void 0,void 0,(0,n.Z)().mark((function r(){var s,a,l,c;return(0,n.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:s=[],a=(0,o.Z)(i),r.prev=2,c=(0,n.Z)().mark((function i(){var o,r,a;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return o=l.value,r=[],s.push(r),a=new Map,i.next=6,new Promise((function(i){return e._bracketsRightYield(i,0,t,o,a)}));case 6:return i.next=8,new Promise((function(i){return e._bracketsLeftYield(i,0,t,o,a,r)}));case 8:case"end":return i.stop()}}),i)})),a.s();case 5:if((l=a.n()).done){r.next=9;break}return r.delegateYield(c(),"t0",7);case 7:r.next=5;break;case 9:r.next=14;break;case 11:r.prev=11,r.t1=r.catch(2),a.e(r.t1);case 14:return r.prev=14,a.f(),r.finish(14);case 17:return r.abrupt("return",s);case 18:case"end":return r.stop()}}),r,null,[[2,11,14,17]])})))}}],[{key:"_bracketsRightYield",value:function(t,i,n,o,r){for(var s=new Map,l=Date.now();;){if(i>=e._maxRounds){t();break}if(!o){t();break}var c=n.bracketPairs.findNextBracket(o);if(!c){t();break}if(Date.now()-l>e._maxDuration){setTimeout((function(){return e._bracketsRightYield(t,i+1,n,o,r)}));break}if(c.bracketInfo.isOpeningBracket){var d=c.bracketInfo.bracketText,u=s.has(d)?s.get(d):0;s.set(d,u+1)}else{var h=c.bracketInfo.getOpeningBrackets()[0].bracketText,g=s.has(h)?s.get(h):0;if(g-=1,s.set(h,Math.max(0,g)),g<0){var p=r.get(h);p||(p=new a.S,r.set(h,p)),p.push(c.range)}}o=c.range.getEndPosition()}}},{key:"_bracketsLeftYield",value:function(t,i,n,o,r,s){for(var a=new Map,l=Date.now();;){if(i>=e._maxRounds&&0===r.size){t();break}if(!o){t();break}var d=n.bracketPairs.findPrevBracket(o);if(!d){t();break}if(Date.now()-l>e._maxDuration){setTimeout((function(){return e._bracketsLeftYield(t,i+1,n,o,r,s)}));break}if(d.bracketInfo.isOpeningBracket){var u=d.bracketInfo.bracketText,h=a.has(u)?a.get(u):0;if(h-=1,a.set(u,Math.max(0,h)),h<0){var g=r.get(u);if(g){var p=g.shift();0===g.size&&r.delete(u);var f=c.e.fromPositions(d.range.getEndPosition(),p.getStartPosition()),_=c.e.fromPositions(d.range.getStartPosition(),p.getEndPosition());s.push({range:f}),s.push({range:_}),e._addBracketLeading(n,_,s)}}}else{var v=d.bracketInfo.getOpeningBrackets()[0].bracketText,m=a.has(v)?a.get(v):0;a.set(v,m+1)}o=d.range.getStartPosition()}}},{key:"_addBracketLeading",value:function(e,t,i){if(t.startLineNumber!==t.endLineNumber){var n=t.startLineNumber,o=e.getLineFirstNonWhitespaceColumn(n);0!==o&&o!==t.startColumn&&(i.push({range:c.e.fromPositions(new l.L(n,o),t.getEndPosition())}),i.push({range:c.e.fromPositions(new l.L(n,1),t.getEndPosition())}));var r=n-1;if(r>0){var s=e.getLineFirstNonWhitespaceColumn(r);s===t.startColumn&&s!==e.getLineLastNonWhitespaceColumn(r)&&(i.push({range:c.e.fromPositions(new l.L(r,s),t.getEndPosition())}),i.push({range:c.e.fromPositions(new l.L(r,1),t.getEndPosition())}))}}}}]),e}();u._maxDuration=30,u._maxRounds=2},56593:function(e,t,i){var n=i(37762),o=i(60136),r=i(27277),s=i(74165),a=i(15671),l=i(43144),c=i(85509),d=i(24404),u=i(61002),h=i(39177),g=i(39912),p=i(851),f=i(21864),_=i(78656),v=i(19408),m=i(62428),y=function(){function e(){(0,a.Z)(this,e)}return(0,l.Z)(e,[{key:"provideSelectionRanges",value:function(e,t){var i,o=[],r=(0,n.Z)(t);try{for(r.s();!(i=r.n()).done;){var s=i.value,a=[];o.push(a),this._addInWordRanges(a,e,s),this._addWordRanges(a,e,s),this._addWhitespaceLine(a,e,s),a.push({range:e.getFullModelRange()})}}catch(l){r.e(l)}finally{r.f()}return o}},{key:"_addInWordRanges",value:function(e,t,i){var n=t.getWordAtPosition(i);if(n){for(var o=n.word,r=n.startColumn,s=i.column-r,a=s,l=s,c=0;a>=0;a--){var d=o.charCodeAt(a);if(a!==s&&(95===d||45===d))break;if((0,m.mK)(d)&&(0,m.df)(c))break;c=d}for(a+=1;l<o.length;l++){var u=o.charCodeAt(l);if((0,m.df)(u)&&(0,m.mK)(c))break;if(95===u||45===u)break;c=u}a<l&&e.push({range:new p.e(i.lineNumber,r+a,i.lineNumber,r+l)})}}},{key:"_addWordRanges",value:function(e,t,i){var n=t.getWordAtPosition(i);n&&e.push({range:new p.e(i.lineNumber,n.startColumn,i.lineNumber,n.endColumn)})}},{key:"_addWhitespaceLine",value:function(e,t,i){t.getLineLength(i.lineNumber)>0&&0===t.getLineFirstNonWhitespaceColumn(i.lineNumber)&&0===t.getLineLastNonWhitespaceColumn(i.lineNumber)&&e.push({range:new p.e(i.lineNumber,1,i.lineNumber,t.getLineMaxColumn(i.lineNumber))})}}]),e}(),b=i(96531),S=i(54998),k=i(13134),w=i(69561),C=i(42832),x=i(91189),N=i(97638),D=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},L=function(e,t){return function(i,n){t(i,n,e)}},T=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},R=function(){function e(t,i){(0,a.Z)(this,e),this.index=t,this.ranges=i}return(0,l.Z)(e,[{key:"mov",value:function(t){var i=this.index+(t?1:-1);if(i<0||i>=this.ranges.length)return this;var n=new e(i,this.ranges);return n.ranges[i].equalsRange(this.ranges[this.index])?n.mov(t):n}}]),e}(),I=function(){function e(t,i){(0,a.Z)(this,e),this._editor=t,this._languageFeaturesService=i,this._ignoreSelection=!1}return(0,l.Z)(e,[{key:"dispose",value:function(){var e;null===(e=this._selectionListener)||void 0===e||e.dispose()}},{key:"run",value:function(e){return T(this,void 0,void 0,(0,s.Z)().mark((function t(){var i,n,o,r=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()){t.next=2;break}return t.abrupt("return");case 2:if(i=this._editor.getSelections(),n=this._editor.getModel(),this._state){t.next=7;break}return t.next=7,E(this._languageFeaturesService.selectionRangeProvider,n,i.map((function(e){return e.getPosition()})),this._editor.getOption(107),d.T.None).then((function(e){var t;if(c.Of(e)&&e.length===i.length&&r._editor.hasModel()&&c.fS(r._editor.getSelections(),i,(function(e,t){return e.equalsSelection(t)}))){for(var n=function(t){e[t]=e[t].filter((function(e){return e.containsPosition(i[t].getStartPosition())&&e.containsPosition(i[t].getEndPosition())})),e[t].unshift(i[t])},o=0;o<e.length;o++)n(o);r._state=e.map((function(e){return new R(0,e)})),null===(t=r._selectionListener)||void 0===t||t.dispose(),r._selectionListener=r._editor.onDidChangeCursorPosition((function(){var e;r._ignoreSelection||(null===(e=r._selectionListener)||void 0===e||e.dispose(),r._state=void 0)}))}}));case 7:if(this._state){t.next=9;break}return t.abrupt("return");case 9:this._state=this._state.map((function(t){return t.mov(e)})),o=this._state.map((function(e){return f.Y.fromPositions(e.ranges[e.index].getStartPosition(),e.ranges[e.index].getEndPosition())})),this._ignoreSelection=!0;try{this._editor.setSelections(o)}finally{this._ignoreSelection=!1}case 13:case"end":return t.stop()}}),t,this)})))}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();I.ID="editor.contrib.smartSelectController",I=D([L(1,w.p)],I);var P=function(e){(0,o.Z)(i,e);var t=(0,r.Z)(i);function i(e,n){var o;return(0,a.Z)(this,i),(o=t.call(this,n))._forward=e,o}return(0,l.Z)(i,[{key:"run",value:function(e,t){return T(this,void 0,void 0,(0,s.Z)().mark((function e(){var i;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=I.get(t))){e.next=4;break}return e.next=4,i.run(this._forward);case 4:case"end":return e.stop()}}),e,this)})))}}]),i}(h.R6),M=function(e){(0,o.Z)(i,e);var t=(0,r.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,!0,{id:"editor.action.smartSelect.expand",label:b.NC("smartSelect.expand","Expand Selection"),alias:"Expand Selection",precondition:void 0,kbOpts:{kbExpr:_.u.editorTextFocus,primary:1553,mac:{primary:3345,secondary:[1297]},weight:100},menuOpts:{menuId:S.eH.MenubarSelectionMenu,group:"1_basic",title:b.NC({key:"miSmartSelectGrow",comment:["&& denotes a mnemonic"]},"&&Expand Selection"),order:2}})}return(0,l.Z)(i)}(P);k.P.registerCommandAlias("editor.action.smartSelect.grow","editor.action.smartSelect.expand");var O=function(e){(0,o.Z)(i,e);var t=(0,r.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,!1,{id:"editor.action.smartSelect.shrink",label:b.NC("smartSelect.shrink","Shrink Selection"),alias:"Shrink Selection",precondition:void 0,kbOpts:{kbExpr:_.u.editorTextFocus,primary:1551,mac:{primary:3343,secondary:[1295]},weight:100},menuOpts:{menuId:S.eH.MenubarSelectionMenu,group:"1_basic",title:b.NC({key:"miSmartSelectShrink",comment:["&& denotes a mnemonic"]},"&&Shrink Selection"),order:3}})}return(0,l.Z)(i)}(P);function E(e,t,i,o,r){return T(this,void 0,void 0,(0,s.Z)().mark((function a(){var l,d,h,f,_,m;return(0,s.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:1===(l=e.all(t).concat(new y)).length&&l.unshift(new v.x),d=[],h=[],f=(0,n.Z)(l);try{for(f.s();!(_=f.n()).done;)m=_.value,d.push(Promise.resolve(m.provideSelectionRanges(t,i,r)).then((function(e){if(c.Of(e)&&e.length===i.length)for(var t=0;t<i.length;t++){h[t]||(h[t]=[]);var o,r=(0,n.Z)(e[t]);try{for(r.s();!(o=r.n()).done;){var s=o.value;p.e.isIRange(s.range)&&p.e.containsPosition(s.range,i[t])&&h[t].push(p.e.lift(s.range))}}catch(a){r.e(a)}finally{r.f()}}}),u.Cp))}catch(a){f.e(a)}finally{f.f()}return s.next=8,Promise.all(d);case 8:return s.abrupt("return",h.map((function(e){if(0===e.length)return[];e.sort((function(e,t){return g.L.isBefore(e.getStartPosition(),t.getStartPosition())?1:g.L.isBefore(t.getStartPosition(),e.getStartPosition())||g.L.isBefore(e.getEndPosition(),t.getEndPosition())?-1:g.L.isBefore(t.getEndPosition(),e.getEndPosition())?1:0}));var i,r,s=[],l=(0,n.Z)(e);try{for(l.s();!(r=l.n()).done;){var c=r.value;(!i||p.e.containsRange(c,i)&&!p.e.equalsRange(c,i))&&(s.push(c),i=c)}}catch(a){l.e(a)}finally{l.f()}if(!o.selectLeadingAndTrailingWhitespace)return s;for(var d=[s[0]],u=1;u<s.length;u++){var h=s[u-1],f=s[u];if(f.startLineNumber!==h.startLineNumber||f.endLineNumber!==h.endLineNumber){var _=new p.e(h.startLineNumber,t.getLineFirstNonWhitespaceColumn(h.startLineNumber),h.endLineNumber,t.getLineLastNonWhitespaceColumn(h.endLineNumber));_.containsRange(h)&&!_.equalsRange(h)&&f.containsRange(_)&&!f.equalsRange(_)&&d.push(_);var v=new p.e(h.startLineNumber,1,h.endLineNumber,t.getLineMaxColumn(h.endLineNumber));v.containsRange(h)&&!v.equalsRange(_)&&f.containsRange(v)&&!f.equalsRange(v)&&d.push(v)}d.push(f)}return d})));case 9:case"end":return s.stop()}}),a)})))}(0,h._K)(I.ID,I,4),(0,h.Qr)(M),(0,h.Qr)(O),k.P.registerCommand("_executeSelectionRangeProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return T(this,void 0,void 0,(0,s.Z)().mark((function t(){var n,o,r,a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i[0],o=i[1],(0,x.p_)(N.o.isUri(n)),r=e.get(w.p).selectionRangeProvider,t.next=5,e.get(C.S).createModelReference(n);case 5:return a=t.sent,t.prev=6,t.abrupt("return",E(r,a.object.textEditorModel,o,{selectLeadingAndTrailingWhitespace:!0},d.T.None));case 8:return t.prev=8,a.dispose(),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[6,,8,11]])})))}))},790:function(e,t,i){i.d(t,{f:function(){return b}});var n=i(15671),o=i(43144),r=i(82927),s=i(91189),a=i(39177),l=i(39912),c=i(78656),d=i(80017),u=i(69561),h=i(29084),g=i(96531),p=i(90306),f=i(58312),_=i(92745),v=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},m=function(e,t){return function(i,n){t(i,n,e)}},y={overwriteBefore:0,overwriteAfter:0,undoStopBefore:!0,undoStopAfter:!0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},b=function(){function e(t,i,o,s,a){(0,n.Z)(this,e),this._editor=t,this._logService=i,this._languageFeaturesService=o,this._languageConfigurationService=a,this._snippetListener=new r.SL,this._modelVersionId=-1,this._inSnippet=e.InSnippetMode.bindTo(s),this._hasNextTabstop=e.HasNextTabstop.bindTo(s),this._hasPrevTabstop=e.HasPrevTabstop.bindTo(s)}return(0,o.Z)(e,[{key:"dispose",value:function(){var e;this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),null===(e=this._session)||void 0===e||e.dispose(),this._snippetListener.dispose()}},{key:"insert",value:function(e,t){try{this._doInsert(e,"undefined"===typeof t?y:Object.assign(Object.assign({},y),t))}catch(i){this.cancel(),this._logService.error(i),this._logService.error("snippet_error"),this._logService.error("insert_template=",e),this._logService.error("existing_template=",this._session?this._session._logInfo():"<no_session>")}}},{key:"_doInsert",value:function(e,t){var i,n=this;if(this._editor.hasModel()){if(this._snippetListener.clear(),t.undoStopBefore&&this._editor.getModel().pushStackElement(),this._session&&"string"!==typeof e&&this.cancel(),this._session?((0,s.p_)("string"===typeof e),this._session.merge(e,t)):(this._modelVersionId=this._editor.getModel().getAlternativeVersionId(),this._session=new _.l(this._editor,e,t,this._languageConfigurationService),this._session.insert()),t.undoStopAfter&&this._editor.getModel().pushStackElement(),null===(i=this._session)||void 0===i?void 0:i.hasChoice){this._choiceCompletionItemProvider={provideCompletionItems:function(e,t){if(n._session&&e===n._editor.getModel()&&l.L.equals(n._editor.getPosition(),t)){var i=n._session.activeChoice;if(i&&0!==i.choice.options.length){for(var o=e.getValueInRange(i.range),r=Boolean(i.choice.options.find((function(e){return e.value===o}))),s=[],a=0;a<i.choice.options.length;a++){var c=i.choice.options[a];s.push({kind:13,label:c.value,insertText:c.value,sortText:"a".repeat(a+1),range:i.range,filterText:r?"".concat(o,"_").concat(c.value):void 0,command:{id:"jumpToNextSnippetPlaceholder",title:(0,g.NC)("next","Go to next placeholder...")}})}return{suggestions:s}}}}};var o=this._languageFeaturesService.completionProvider.register({language:this._editor.getModel().getLanguageId(),pattern:this._editor.getModel().uri.fsPath,scheme:this._editor.getModel().uri.scheme,exclusive:!0},this._choiceCompletionItemProvider);this._snippetListener.add(o)}this._updateState(),this._snippetListener.add(this._editor.onDidChangeModelContent((function(e){return e.isFlush&&n.cancel()}))),this._snippetListener.add(this._editor.onDidChangeModel((function(){return n.cancel()}))),this._snippetListener.add(this._editor.onDidChangeCursorSelection((function(){return n._updateState()})))}}},{key:"_updateState",value:function(){if(this._session&&this._editor.hasModel()){if(this._modelVersionId===this._editor.getModel().getAlternativeVersionId())return this.cancel();if(!this._session.hasPlaceholder)return this.cancel();if(this._session.isAtLastPlaceholder||!this._session.isSelectionWithinPlaceholders())return this._editor.getModel().pushStackElement(),this.cancel();this._inSnippet.set(!0),this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder),this._hasNextTabstop.set(!this._session.isAtLastPlaceholder),this._handleChoice()}}},{key:"_handleChoice",value:function(){var e=this;if(this._session&&this._editor.hasModel()){var t=this._session.activeChoice;t&&this._choiceCompletionItemProvider?this._currentChoice!==t.choice&&(this._currentChoice=t.choice,queueMicrotask((function(){(0,h.i5)(e._editor,e._choiceCompletionItemProvider)}))):this._currentChoice=void 0}else this._currentChoice=void 0}},{key:"finish",value:function(){for(;this._inSnippet.get();)this.next()}},{key:"cancel",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._inSnippet.reset(),this._hasPrevTabstop.reset(),this._hasNextTabstop.reset(),this._snippetListener.clear(),this._currentChoice=void 0,null===(e=this._session)||void 0===e||e.dispose(),this._session=void 0,this._modelVersionId=-1,t&&this._editor.setSelections([this._editor.getSelection()])}},{key:"prev",value:function(){var e;null===(e=this._session)||void 0===e||e.prev(),this._updateState()}},{key:"next",value:function(){var e;null===(e=this._session)||void 0===e||e.next(),this._updateState()}},{key:"isInSnippet",value:function(){return Boolean(this._inSnippet.get())}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();b.ID="snippetController2",b.InSnippetMode=new p.uy("inSnippetMode",!1,(0,g.NC)("inSnippetMode","Whether the editor in current in snippet mode")),b.HasNextTabstop=new p.uy("hasNextTabstop",!1,(0,g.NC)("hasNextTabstop","Whether there is a next tab stop when in snippet mode")),b.HasPrevTabstop=new p.uy("hasPrevTabstop",!1,(0,g.NC)("hasPrevTabstop","Whether there is a previous tab stop when in snippet mode")),b=v([m(1,f.VZ),m(2,u.p),m(3,p.i6),m(4,d.c_)],b),(0,a._K)(b.ID,b,4);var S=a._l.bindToContribution(b.get);(0,a.fK)(new S({id:"jumpToNextSnippetPlaceholder",precondition:p.Ao.and(b.InSnippetMode,b.HasNextTabstop),handler:function(e){return e.next()},kbOpts:{weight:130,kbExpr:c.u.editorTextFocus,primary:2}})),(0,a.fK)(new S({id:"jumpToPrevSnippetPlaceholder",precondition:p.Ao.and(b.InSnippetMode,b.HasPrevTabstop),handler:function(e){return e.prev()},kbOpts:{weight:130,kbExpr:c.u.editorTextFocus,primary:1026}})),(0,a.fK)(new S({id:"leaveSnippet",precondition:b.InSnippetMode,handler:function(e){return e.cancel(!0)},kbOpts:{weight:130,kbExpr:c.u.editorTextFocus,primary:9,secondary:[1033]}})),(0,a.fK)(new S({id:"acceptSnippet",precondition:b.InSnippetMode,handler:function(e){return e.finish()}}))},15165:function(e,t,i){i.d(t,{Lv:function(){return m},Vm:function(){return v},Yj:function(){return C},xv:function(){return f},y1:function(){return w}});var n,o=i(11752),r=i(61120),s=i(60136),a=i(27277),l=i(37762),c=i(93433),d=i(4942),u=i(15671),h=i(43144),g=function(){function e(){(0,u.Z)(this,e),this.value="",this.pos=0}return(0,h.Z)(e,[{key:"text",value:function(e){this.value=e,this.pos=0}},{key:"tokenText",value:function(e){return this.value.substr(e.pos,e.len)}},{key:"next",value:function(){if(this.pos>=this.value.length)return{type:14,pos:this.pos,len:0};var t,i=this.pos,n=0,o=this.value.charCodeAt(i);if("number"===typeof(t=e._table[o]))return this.pos+=1,{type:t,pos:i,len:1};if(e.isDigitCharacter(o)){t=8;do{n+=1,o=this.value.charCodeAt(i+n)}while(e.isDigitCharacter(o));return this.pos+=n,{type:t,pos:i,len:n}}if(e.isVariableCharacter(o)){t=9;do{o=this.value.charCodeAt(i+ ++n)}while(e.isVariableCharacter(o)||e.isDigitCharacter(o));return this.pos+=n,{type:t,pos:i,len:n}}t=10;do{n+=1,o=this.value.charCodeAt(i+n)}while(!isNaN(o)&&"undefined"===typeof e._table[o]&&!e.isDigitCharacter(o)&&!e.isVariableCharacter(o));return this.pos+=n,{type:t,pos:i,len:n}}}],[{key:"isDigitCharacter",value:function(e){return e>=48&&e<=57}},{key:"isVariableCharacter",value:function(e){return 95===e||e>=97&&e<=122||e>=65&&e<=90}}]),e}();g._table=(n={},(0,d.Z)(n,36,0),(0,d.Z)(n,58,1),(0,d.Z)(n,44,2),(0,d.Z)(n,123,3),(0,d.Z)(n,125,4),(0,d.Z)(n,92,5),(0,d.Z)(n,47,6),(0,d.Z)(n,124,7),(0,d.Z)(n,43,11),(0,d.Z)(n,45,12),(0,d.Z)(n,63,13),n);var p=function(){function e(){(0,u.Z)(this,e),this._children=[]}return(0,h.Z)(e,[{key:"appendChild",value:function(e){return e instanceof f&&this._children[this._children.length-1]instanceof f?this._children[this._children.length-1].value+=e.value:(e.parent=this,this._children.push(e)),this}},{key:"replace",value:function(e,t){var i=e.parent,n=i.children.indexOf(e),o=i.children.slice(0);o.splice.apply(o,[n,1].concat((0,c.Z)(t))),i._children=o,function e(t,i){var n,o=(0,l.Z)(t);try{for(o.s();!(n=o.n()).done;){var r=n.value;r.parent=i,e(r.children,r)}}catch(s){o.e(s)}finally{o.f()}}(t,i)}},{key:"children",get:function(){return this._children}},{key:"rightMostDescendant",get:function(){return this._children.length>0?this._children[this._children.length-1].rightMostDescendant:this}},{key:"snippet",get:function(){for(var e=this;;){if(!e)return;if(e instanceof w)return e;e=e.parent}}},{key:"toString",value:function(){return this.children.reduce((function(e,t){return e+t.toString()}),"")}},{key:"len",value:function(){return 0}}]),e}(),f=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(e){var n;return(0,u.Z)(this,i),(n=t.call(this)).value=e,n}return(0,h.Z)(i,[{key:"toString",value:function(){return this.value}},{key:"len",value:function(){return this.value.length}},{key:"clone",value:function(){return new i(this.value)}}]),i}(p),_=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(){return(0,u.Z)(this,i),t.apply(this,arguments)}return(0,h.Z)(i)}(p),v=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(e){var n;return(0,u.Z)(this,i),(n=t.call(this)).index=e,n}return(0,h.Z)(i,[{key:"isFinalTabstop",get:function(){return 0===this.index}},{key:"choice",get:function(){return 1===this._children.length&&this._children[0]instanceof m?this._children[0]:void 0}},{key:"clone",value:function(){var e=new i(this.index);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e}}],[{key:"compareByIndex",value:function(e,t){return e.index===t.index?0:e.isFinalTabstop?1:t.isFinalTabstop||e.index<t.index?-1:e.index>t.index?1:0}}]),i}(_),m=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(){var e;return(0,u.Z)(this,i),(e=t.apply(this,arguments)).options=[],e}return(0,h.Z)(i,[{key:"appendChild",value:function(e){return e instanceof f&&(e.parent=this,this.options.push(e)),this}},{key:"toString",value:function(){return this.options[0].value}},{key:"len",value:function(){return this.options[0].len()}},{key:"clone",value:function(){var e=new i;return this.options.forEach(e.appendChild,e),e}}]),i}(p),y=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(){var e;return(0,u.Z)(this,i),(e=t.apply(this,arguments)).regexp=new RegExp(""),e}return(0,h.Z)(i,[{key:"resolve",value:function(e){var t=this,i=!1,n=e.replace(this.regexp,(function(){return i=!0,t._replace(Array.prototype.slice.call(arguments,0,-2))}));return!i&&this._children.some((function(e){return e instanceof b&&Boolean(e.elseValue)}))&&(n=this._replace([])),n}},{key:"_replace",value:function(e){var t,i="",n=(0,l.Z)(this._children);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(o instanceof b){var r=e[o.index]||"";i+=r=o.resolve(r)}else i+=o.toString()}}catch(s){n.e(s)}finally{n.f()}return i}},{key:"toString",value:function(){return""}},{key:"clone",value:function(){var e=new i;return e.regexp=new RegExp(this.regexp.source,(this.regexp.ignoreCase?"i":"")+(this.regexp.global?"g":"")),e._children=this.children.map((function(e){return e.clone()})),e}}]),i}(p),b=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(e,n,o,r){var s;return(0,u.Z)(this,i),(s=t.call(this)).index=e,s.shorthandName=n,s.ifValue=o,s.elseValue=r,s}return(0,h.Z)(i,[{key:"resolve",value:function(e){return"upcase"===this.shorthandName?e?e.toLocaleUpperCase():"":"downcase"===this.shorthandName?e?e.toLocaleLowerCase():"":"capitalize"===this.shorthandName?e?e[0].toLocaleUpperCase()+e.substr(1):"":"pascalcase"===this.shorthandName?e?this._toPascalCase(e):"":"camelcase"===this.shorthandName?e?this._toCamelCase(e):"":Boolean(e)&&"string"===typeof this.ifValue?this.ifValue:Boolean(e)||"string"!==typeof this.elseValue?e||"":this.elseValue}},{key:"_toPascalCase",value:function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e){return e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e}},{key:"_toCamelCase",value:function(e){var t=e.match(/[a-z0-9]+/gi);return t?t.map((function(e,t){return 0===t?e.charAt(0).toLowerCase()+e.substr(1):e.charAt(0).toUpperCase()+e.substr(1)})).join(""):e}},{key:"clone",value:function(){return new i(this.index,this.shorthandName,this.ifValue,this.elseValue)}}]),i}(p),S=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(e){var n;return(0,u.Z)(this,i),(n=t.call(this)).name=e,n}return(0,h.Z)(i,[{key:"resolve",value:function(e){var t=e.resolve(this);return this.transform&&(t=this.transform.resolve(t||"")),void 0!==t&&(this._children=[new f(t)],!0)}},{key:"clone",value:function(){var e=new i(this.name);return this.transform&&(e.transform=this.transform.clone()),e._children=this.children.map((function(e){return e.clone()})),e}}]),i}(_);function k(e,t){for(var i=(0,c.Z)(e);i.length>0;){var n=i.shift();if(!t(n))break;i.unshift.apply(i,(0,c.Z)(n.children))}}var w=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(){return(0,u.Z)(this,i),t.apply(this,arguments)}return(0,h.Z)(i,[{key:"placeholderInfo",get:function(){if(!this._placeholders){var e,t=[];this.walk((function(i){return i instanceof v&&(t.push(i),e=!e||e.index<i.index?i:e),!0})),this._placeholders={all:t,last:e}}return this._placeholders}},{key:"placeholders",get:function(){return this.placeholderInfo.all}},{key:"offset",value:function(e){var t=0,i=!1;return this.walk((function(n){return n===e?(i=!0,!1):(t+=n.len(),!0)})),i?t:-1}},{key:"fullLen",value:function(e){var t=0;return k([e],(function(e){return t+=e.len(),!0})),t}},{key:"enclosingPlaceholders",value:function(e){for(var t=[],i=e.parent;i;)i instanceof v&&t.push(i),i=i.parent;return t}},{key:"resolveVariables",value:function(e){var t=this;return this.walk((function(i){return i instanceof S&&i.resolve(e)&&(t._placeholders=void 0),!0})),this}},{key:"appendChild",value:function(e){return this._placeholders=void 0,(0,o.Z)((0,r.Z)(i.prototype),"appendChild",this).call(this,e)}},{key:"replace",value:function(e,t){return this._placeholders=void 0,(0,o.Z)((0,r.Z)(i.prototype),"replace",this).call(this,e,t)}},{key:"clone",value:function(){var e=new i;return this._children=this.children.map((function(e){return e.clone()})),e}},{key:"walk",value:function(e){k(this.children,e)}}]),i}(p),C=function(){function e(){(0,u.Z)(this,e),this._scanner=new g,this._token={type:14,pos:0,len:0}}return(0,h.Z)(e,[{key:"parse",value:function(e,t,i){var n=new w;return this.parseFragment(e,n),this.ensureFinalTabstop(n,null!==i&&void 0!==i&&i,null!==t&&void 0!==t&&t),n}},{key:"parseFragment",value:function(e,t){var i=t.children.length;for(this._scanner.text(e),this._token=this._scanner.next();this._parse(t););var n=new Map,o=[];t.walk((function(e){return e instanceof v&&(e.isFinalTabstop?n.set(0,void 0):!n.has(e.index)&&e.children.length>0?n.set(e.index,e.children):o.push(e)),!0}));for(var r=function e(i,o){var r=n.get(i.index);if(r){var s=new v(i.index);s.transform=i.transform;var a,c=(0,l.Z)(r);try{for(c.s();!(a=c.n()).done;){var d=a.value.clone();s.appendChild(d),d instanceof v&&n.has(d.index)&&!o.has(d.index)&&(o.add(d.index),e(d,o),o.delete(d.index))}}catch(u){c.e(u)}finally{c.f()}t.replace(i,[s])}},s=new Set,a=0,c=o;a<c.length;a++){r(c[a],s)}return t.children.slice(i)}},{key:"ensureFinalTabstop",value:function(e,t,i){(t||i&&e.placeholders.length>0)&&(e.placeholders.find((function(e){return 0===e.index}))||e.appendChild(new v(0)))}},{key:"_accept",value:function(e,t){if(void 0===e||this._token.type===e){var i=!t||this._scanner.tokenText(this._token);return this._token=this._scanner.next(),i}return!1}},{key:"_backTo",value:function(e){return this._scanner.pos=e.pos+e.len,this._token=e,!1}},{key:"_until",value:function(e){for(var t=this._token;this._token.type!==e;){if(14===this._token.type)return!1;if(5===this._token.type){var i=this._scanner.next();if(0!==i.type&&4!==i.type&&5!==i.type)return!1}this._token=this._scanner.next()}var n=this._scanner.value.substring(t.pos,this._token.pos).replace(/\\(\$|}|\\)/g,"$1");return this._token=this._scanner.next(),n}},{key:"_parse",value:function(e){return this._parseEscaped(e)||this._parseTabstopOrVariableName(e)||this._parseComplexPlaceholder(e)||this._parseComplexVariable(e)||this._parseAnything(e)}},{key:"_parseEscaped",value:function(e){var t;return!!(t=this._accept(5,!0))&&(t=this._accept(0,!0)||this._accept(4,!0)||this._accept(5,!0)||t,e.appendChild(new f(t)),!0)}},{key:"_parseTabstopOrVariableName",value:function(e){var t,i=this._token;return this._accept(0)&&(t=this._accept(9,!0)||this._accept(8,!0))?(e.appendChild(/^\d+$/.test(t)?new v(Number(t)):new S(t)),!0):this._backTo(i)}},{key:"_parseComplexPlaceholder",value:function(e){var t,i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(8,!0))))return this._backTo(i);var n=new v(Number(t));if(this._accept(1))for(;;){if(this._accept(4))return e.appendChild(n),!0;if(!this._parse(n))return e.appendChild(new f("${"+t+":")),n.children.forEach(e.appendChild,e),!0}else{if(!(n.index>0&&this._accept(7)))return this._accept(6)?this._parseTransform(n)?(e.appendChild(n),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(n),!0):this._backTo(i);for(var o=new m;;){if(this._parseChoiceElement(o)){if(this._accept(2))continue;if(this._accept(7)&&(n.appendChild(o),this._accept(4)))return e.appendChild(n),!0}return this._backTo(i),!1}}}},{key:"_parseChoiceElement",value:function(e){for(var t=this._token,i=[];2!==this._token.type&&7!==this._token.type;){var n=void 0;if(!(n=(n=this._accept(5,!0))?this._accept(2,!0)||this._accept(7,!0)||this._accept(5,!0)||n:this._accept(void 0,!0)))return this._backTo(t),!1;i.push(n)}return 0===i.length?(this._backTo(t),!1):(e.appendChild(new f(i.join(""))),!0)}},{key:"_parseComplexVariable",value:function(e){var t,i=this._token;if(!(this._accept(0)&&this._accept(3)&&(t=this._accept(9,!0))))return this._backTo(i);var n=new S(t);if(!this._accept(1))return this._accept(6)?this._parseTransform(n)?(e.appendChild(n),!0):(this._backTo(i),!1):this._accept(4)?(e.appendChild(n),!0):this._backTo(i);for(;;){if(this._accept(4))return e.appendChild(n),!0;if(!this._parse(n))return e.appendChild(new f("${"+t+":")),n.children.forEach(e.appendChild,e),!0}}},{key:"_parseTransform",value:function(e){for(var t=new y,i="",n="";!this._accept(6);){var o=void 0;if(o=this._accept(5,!0))i+=o=this._accept(6,!0)||o;else{if(14===this._token.type)return!1;i+=this._accept(void 0,!0)}}for(;!this._accept(6);){var r=void 0;if(r=this._accept(5,!0))r=this._accept(5,!0)||this._accept(6,!0)||r,t.appendChild(new f(r));else if(!this._parseFormatString(t)&&!this._parseAnything(t))return!1}for(;!this._accept(4);){if(14===this._token.type)return!1;n+=this._accept(void 0,!0)}try{t.regexp=new RegExp(i,n)}catch(s){return!1}return e.transform=t,!0}},{key:"_parseFormatString",value:function(e){var t=this._token;if(!this._accept(0))return!1;var i=!1;this._accept(3)&&(i=!0);var n=this._accept(8,!0);if(!n)return this._backTo(t),!1;if(!i)return e.appendChild(new b(Number(n))),!0;if(this._accept(4))return e.appendChild(new b(Number(n))),!0;if(!this._accept(1))return this._backTo(t),!1;if(this._accept(6)){var o=this._accept(9,!0);return o&&this._accept(4)?(e.appendChild(new b(Number(n),o)),!0):(this._backTo(t),!1)}if(this._accept(11)){var r=this._until(4);if(r)return e.appendChild(new b(Number(n),void 0,r,void 0)),!0}else if(this._accept(12)){var s=this._until(4);if(s)return e.appendChild(new b(Number(n),void 0,void 0,s)),!0}else if(this._accept(13)){var a=this._until(1);if(a){var l=this._until(4);if(l)return e.appendChild(new b(Number(n),void 0,a,l)),!0}}else{var c=this._until(4);if(c)return e.appendChild(new b(Number(n),void 0,void 0,c)),!0}return this._backTo(t),!1}},{key:"_parseAnything",value:function(e){return 14!==this._token.type&&(e.appendChild(new f(this._scanner.tokenText(this._token))),this._accept(void 0),!0)}}],[{key:"escape",value:function(e){return e.replace(/\$|}|\\/g,"\\$&")}},{key:"guessNeedsClipboard",value:function(e){return/\${?CLIPBOARD/.test(e)}}]),e}()},92745:function(e,t,i){i.d(t,{l:function(){return A}});var n=i(29439),o=i(37762),r=i(93433),s=i(15671),a=i(43144),l=i(85509),c=i(82927),d=i(62428),u=i(72196),h=i(851),g=i(21864),p=i(80017),f=i(80598),_=i(36499),v=i(22073),m=i(15165),y=i(64759),b=i(30434),S=i(87558),k=i(53783),w=i(96531),C=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},x=function(e,t){return function(i,n){t(i,n,e)}},N=(Object.freeze({CURRENT_YEAR:!0,CURRENT_YEAR_SHORT:!0,CURRENT_MONTH:!0,CURRENT_DATE:!0,CURRENT_HOUR:!0,CURRENT_MINUTE:!0,CURRENT_SECOND:!0,CURRENT_DAY_NAME:!0,CURRENT_DAY_NAME_SHORT:!0,CURRENT_MONTH_NAME:!0,CURRENT_MONTH_NAME_SHORT:!0,CURRENT_SECONDS_UNIX:!0,SELECTION:!0,CLIPBOARD:!0,TM_SELECTED_TEXT:!0,TM_CURRENT_LINE:!0,TM_CURRENT_WORD:!0,TM_LINE_INDEX:!0,TM_LINE_NUMBER:!0,TM_FILENAME:!0,TM_FILENAME_BASE:!0,TM_DIRECTORY:!0,TM_FILEPATH:!0,CURSOR_INDEX:!0,CURSOR_NUMBER:!0,RELATIVE_FILEPATH:!0,BLOCK_COMMENT_START:!0,BLOCK_COMMENT_END:!0,LINE_COMMENT:!0,WORKSPACE_NAME:!0,WORKSPACE_FOLDER:!0,RANDOM:!0,RANDOM_HEX:!0,UUID:!0}),function(){function e(t){(0,s.Z)(this,e),this._delegates=t}return(0,a.Z)(e,[{key:"resolve",value:function(e){var t,i=(0,o.Z)(this._delegates);try{for(i.s();!(t=i.n()).done;){var n=t.value.resolve(e);if(void 0!==n)return n}}catch(r){i.e(r)}finally{i.f()}}}]),e}()),D=function(){function e(t,i,n,o){(0,s.Z)(this,e),this._model=t,this._selection=i,this._selectionIdx=n,this._overtypingCapturer=o}return(0,a.Z)(e,[{key:"resolve",value:function(e){var t=e.name;if("SELECTION"===t||"TM_SELECTED_TEXT"===t){var i=this._model.getValueInRange(this._selection)||void 0,n=this._selection.startLineNumber!==this._selection.endLineNumber;if(!i&&this._overtypingCapturer){var o=this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);o&&(i=o.value,n=o.multiline)}if(i&&n&&e.snippet){var r=this._model.getLineContent(this._selection.startLineNumber),s=(0,d.V8)(r,0,this._selection.startColumn-1),a=s;e.snippet.walk((function(t){return t!==e&&(t instanceof m.xv&&(a=(0,d.V8)((0,d.uq)(t.value).pop())),!0)}));var l=(0,d.Mh)(a,s);i=i.replace(/(\r\n|\r|\n)(.*)/g,(function(e,t,i){return"".concat(t).concat(a.substr(l)).concat(i)}))}return i}if("TM_CURRENT_LINE"===t)return this._model.getLineContent(this._selection.positionLineNumber);if("TM_CURRENT_WORD"===t){var c=this._model.getWordAtPosition({lineNumber:this._selection.positionLineNumber,column:this._selection.positionColumn});return c&&c.word||void 0}return"TM_LINE_INDEX"===t?String(this._selection.positionLineNumber-1):"TM_LINE_NUMBER"===t?String(this._selection.positionLineNumber):"CURSOR_INDEX"===t?String(this._selectionIdx):"CURSOR_NUMBER"===t?String(this._selectionIdx+1):void 0}}]),e}(),L=function(){function e(t,i){(0,s.Z)(this,e),this._labelService=t,this._model=i}return(0,a.Z)(e,[{key:"resolve",value:function(e){var t=e.name;if("TM_FILENAME"===t)return b.EZ(this._model.uri.fsPath);if("TM_FILENAME_BASE"===t){var i=b.EZ(this._model.uri.fsPath),n=i.lastIndexOf(".");return n<=0?i:i.slice(0,n)}return"TM_DIRECTORY"===t?"."===b.XX(this._model.uri.fsPath)?"":this._labelService.getUriLabel((0,S.XX)(this._model.uri)):"TM_FILEPATH"===t?this._labelService.getUriLabel(this._model.uri):"RELATIVE_FILEPATH"===t?this._labelService.getUriLabel(this._model.uri,{relative:!0,noPrefix:!0}):void 0}}]),e}(),T=function(){function e(t,i,n,o){(0,s.Z)(this,e),this._readClipboardText=t,this._selectionIdx=i,this._selectionCount=n,this._spread=o}return(0,a.Z)(e,[{key:"resolve",value:function(e){if("CLIPBOARD"===e.name){var t=this._readClipboardText();if(t){if(this._spread){var i=t.split(/\r\n|\n|\r/).filter((function(e){return!(0,d.m5)(e)}));if(i.length===this._selectionCount)return i[this._selectionIdx]}return t}}}}]),e}(),R=function(){function e(t,i,n){(0,s.Z)(this,e),this._model=t,this._selection=i,this._languageConfigurationService=n}return(0,a.Z)(e,[{key:"resolve",value:function(e){var t=e.name,i=this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber,this._selection.selectionStartColumn),n=this._languageConfigurationService.getLanguageConfiguration(i).comments;if(n)return"LINE_COMMENT"===t?n.lineCommentToken||void 0:"BLOCK_COMMENT_START"===t?n.blockCommentStartToken||void 0:"BLOCK_COMMENT_END"===t&&n.blockCommentEndToken||void 0}}]),e}();R=C([x(2,p.c_)],R);var I=function(){function e(){(0,s.Z)(this,e),this._date=new Date}return(0,a.Z)(e,[{key:"resolve",value:function(t){var i=t.name;return"CURRENT_YEAR"===i?String(this._date.getFullYear()):"CURRENT_YEAR_SHORT"===i?String(this._date.getFullYear()).slice(-2):"CURRENT_MONTH"===i?String(this._date.getMonth().valueOf()+1).padStart(2,"0"):"CURRENT_DATE"===i?String(this._date.getDate().valueOf()).padStart(2,"0"):"CURRENT_HOUR"===i?String(this._date.getHours().valueOf()).padStart(2,"0"):"CURRENT_MINUTE"===i?String(this._date.getMinutes().valueOf()).padStart(2,"0"):"CURRENT_SECOND"===i?String(this._date.getSeconds().valueOf()).padStart(2,"0"):"CURRENT_DAY_NAME"===i?e.dayNames[this._date.getDay()]:"CURRENT_DAY_NAME_SHORT"===i?e.dayNamesShort[this._date.getDay()]:"CURRENT_MONTH_NAME"===i?e.monthNames[this._date.getMonth()]:"CURRENT_MONTH_NAME_SHORT"===i?e.monthNamesShort[this._date.getMonth()]:"CURRENT_SECONDS_UNIX"===i?String(Math.floor(this._date.getTime()/1e3)):void 0}}]),e}();I.dayNames=[w.NC("Sunday","Sunday"),w.NC("Monday","Monday"),w.NC("Tuesday","Tuesday"),w.NC("Wednesday","Wednesday"),w.NC("Thursday","Thursday"),w.NC("Friday","Friday"),w.NC("Saturday","Saturday")],I.dayNamesShort=[w.NC("SundayShort","Sun"),w.NC("MondayShort","Mon"),w.NC("TuesdayShort","Tue"),w.NC("WednesdayShort","Wed"),w.NC("ThursdayShort","Thu"),w.NC("FridayShort","Fri"),w.NC("SaturdayShort","Sat")],I.monthNames=[w.NC("January","January"),w.NC("February","February"),w.NC("March","March"),w.NC("April","April"),w.NC("May","May"),w.NC("June","June"),w.NC("July","July"),w.NC("August","August"),w.NC("September","September"),w.NC("October","October"),w.NC("November","November"),w.NC("December","December")],I.monthNamesShort=[w.NC("JanuaryShort","Jan"),w.NC("FebruaryShort","Feb"),w.NC("MarchShort","Mar"),w.NC("AprilShort","Apr"),w.NC("MayShort","May"),w.NC("JuneShort","Jun"),w.NC("JulyShort","Jul"),w.NC("AugustShort","Aug"),w.NC("SeptemberShort","Sep"),w.NC("OctoberShort","Oct"),w.NC("NovemberShort","Nov"),w.NC("DecemberShort","Dec")];var P=function(){function e(t){(0,s.Z)(this,e),this._workspaceService=t}return(0,a.Z)(e,[{key:"resolve",value:function(e){if(this._workspaceService){var t=(0,v.uT)(this._workspaceService.getWorkspace());if(!(0,v.c$)(t))return"WORKSPACE_NAME"===e.name?this._resolveWorkspaceName(t):"WORKSPACE_FOLDER"===e.name?this._resoveWorkspacePath(t):void 0}}},{key:"_resolveWorkspaceName",value:function(e){if((0,v.eb)(e))return b.EZ(e.uri.path);var t=b.EZ(e.configPath.path);return t.endsWith(v.A6)&&(t=t.substr(0,t.length-v.A6.length-1)),t}},{key:"_resoveWorkspacePath",value:function(e){if((0,v.eb)(e))return(0,y.D)(e.uri.fsPath);var t=b.EZ(e.configPath.path),i=e.configPath.fsPath;return i.endsWith(t)&&(i=i.substr(0,i.length-t.length-1)),i?(0,y.D)(i):"/"}}]),e}(),M=function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,[{key:"resolve",value:function(e){var t=e.name;return"RANDOM"===t?Math.random().toString().slice(-6):"RANDOM_HEX"===t?Math.random().toString(16).slice(-6):"UUID"===t?(0,k.R)():void 0}}]),e}(),O=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},E=function(e,t){return function(i,n){t(i,n,e)}},Z=function(){function e(t,i,n){(0,s.Z)(this,e),this._editor=t,this._snippet=i,this._snippetLineLeadingWhitespace=n,this._offset=-1,this._nestingLevel=1,this._placeholderGroups=(0,l.vM)(i.placeholders,m.Vm.compareByIndex),this._placeholderGroupsIdx=-1}return(0,a.Z)(e,[{key:"initialize",value:function(e){this._offset=e.newPosition}},{key:"dispose",value:function(){this._placeholderDecorations&&this._editor.removeDecorations((0,r.Z)(this._placeholderDecorations.values())),this._placeholderGroups.length=0}},{key:"_initDecorations",value:function(){var t=this;if(-1===this._offset)throw new Error("Snippet not initialized!");if(!this._placeholderDecorations){this._placeholderDecorations=new Map;var i=this._editor.getModel();this._editor.changeDecorations((function(n){var r,s=(0,o.Z)(t._snippet.placeholders);try{for(s.s();!(r=s.n()).done;){var a=r.value,l=t._snippet.offset(a),c=t._snippet.fullLen(a),d=h.e.fromPositions(i.getPositionAt(t._offset+l),i.getPositionAt(t._offset+l+c)),u=a.isFinalTabstop?e._decor.inactiveFinal:e._decor.inactive,g=n.addDecoration(d,u);t._placeholderDecorations.set(a,g)}}catch(p){s.e(p)}finally{s.f()}}))}}},{key:"move",value:function(t){var i=this;if(!this._editor.hasModel())return[];if(this._initDecorations(),this._placeholderGroupsIdx>=0){var r,s=[],a=(0,o.Z)(this._placeholderGroups[this._placeholderGroupsIdx]);try{for(a.s();!(r=a.n()).done;){var l=r.value;if(l.transform){for(var c=this._placeholderDecorations.get(l),d=this._editor.getModel().getDecorationRange(c),h=this._editor.getModel().getValueInRange(d),p=l.transform.resolve(h).split(/\r\n|\r|\n/),f=1;f<p.length;f++)p[f]=this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace+p[f]);s.push(u.h.replace(d,p.join(this._editor.getModel().getEOL())))}}}catch(m){a.e(m)}finally{a.f()}s.length>0&&this._editor.executeEdits("snippet.placeholderTransform",s)}var _=!1;!0===t&&this._placeholderGroupsIdx<this._placeholderGroups.length-1?(this._placeholderGroupsIdx+=1,_=!0):!1===t&&this._placeholderGroupsIdx>0&&(this._placeholderGroupsIdx-=1,_=!0);var v=this._editor.getModel().changeDecorations((function(t){var r,s=new Set,a=[],l=(0,o.Z)(i._placeholderGroups[i._placeholderGroupsIdx]);try{for(l.s();!(r=l.n()).done;){var c=r.value,d=i._placeholderDecorations.get(c),u=i._editor.getModel().getDecorationRange(d);a.push(new g.Y(u.startLineNumber,u.startColumn,u.endLineNumber,u.endColumn)),_=_&&i._hasPlaceholderBeenCollapsed(c),t.changeDecorationOptions(d,c.isFinalTabstop?e._decor.activeFinal:e._decor.active),s.add(c);var h,p=(0,o.Z)(i._snippet.enclosingPlaceholders(c));try{for(p.s();!(h=p.n()).done;){var f=h.value,v=i._placeholderDecorations.get(f);t.changeDecorationOptions(v,f.isFinalTabstop?e._decor.activeFinal:e._decor.active),s.add(f)}}catch(m){p.e(m)}finally{p.f()}}}catch(m){l.e(m)}finally{l.f()}var y,b=(0,o.Z)(i._placeholderDecorations);try{for(b.s();!(y=b.n()).done;){var S=(0,n.Z)(y.value,2),k=S[0],w=S[1];s.has(k)||t.changeDecorationOptions(w,k.isFinalTabstop?e._decor.inactiveFinal:e._decor.inactive)}}catch(m){b.e(m)}finally{b.f()}return a}));return _?this.move(t):null!==v&&void 0!==v?v:[]}},{key:"_hasPlaceholderBeenCollapsed",value:function(e){for(var t=e;t;){if(t instanceof m.Vm){var i=this._placeholderDecorations.get(t);if(this._editor.getModel().getDecorationRange(i).isEmpty()&&t.toString().length>0)return!0}t=t.parent}return!1}},{key:"isAtFirstPlaceholder",get:function(){return this._placeholderGroupsIdx<=0||0===this._placeholderGroups.length}},{key:"isAtLastPlaceholder",get:function(){return this._placeholderGroupsIdx===this._placeholderGroups.length-1}},{key:"hasPlaceholder",get:function(){return this._snippet.placeholders.length>0}},{key:"isTrivialSnippet",get:function(){if(0===this._snippet.placeholders.length)return!0;if(1===this._snippet.placeholders.length){var e=(0,n.Z)(this._snippet.placeholders,1)[0];if(e.isFinalTabstop&&this._snippet.rightMostDescendant===e)return!0}return!1}},{key:"computePossibleSelections",value:function(){var e,t=new Map,i=(0,o.Z)(this._placeholderGroups);try{for(i.s();!(e=i.n()).done;){var n,r=e.value,s=void 0,a=(0,o.Z)(r);try{for(a.s();!(n=a.n()).done;){var l=n.value;if(l.isFinalTabstop)break;s||(s=[],t.set(l.index,s));var c=this._placeholderDecorations.get(l),d=this._editor.getModel().getDecorationRange(c);if(!d){t.delete(l.index);break}s.push(d)}}catch(u){a.e(u)}finally{a.f()}}}catch(u){i.e(u)}finally{i.f()}return t}},{key:"activeChoice",get:function(){if(this._placeholderDecorations){var e=this._placeholderGroups[this._placeholderGroupsIdx][0];if(null===e||void 0===e?void 0:e.choice){var t=this._placeholderDecorations.get(e);if(t){var i=this._editor.getModel().getDecorationRange(t);if(i)return{range:i,choice:e.choice}}}}}},{key:"hasChoice",get:function(){var e=!1;return this._snippet.walk((function(t){return!(e=t instanceof m.Lv)})),e}},{key:"merge",value:function(t){var i=this,n=this._editor.getModel();this._nestingLevel*=10,this._editor.changeDecorations((function(r){var s,a=(0,o.Z)(i._placeholderGroups[i._placeholderGroupsIdx]);try{for(a.s();!(s=a.n()).done;){var c=s.value,d=t.shift();console.assert(-1!==d._offset),console.assert(!d._placeholderDecorations);var u,g=d._snippet.placeholderInfo.last.index,p=(0,o.Z)(d._snippet.placeholderInfo.all);try{for(p.s();!(u=p.n()).done;){var f=u.value;f.isFinalTabstop?f.index=c.index+(g+1)/i._nestingLevel:f.index=c.index+f.index/i._nestingLevel}}catch(x){p.e(x)}finally{p.f()}i._snippet.replace(c,d._snippet.children);var _=i._placeholderDecorations.get(c);r.removeDecoration(_),i._placeholderDecorations.delete(c);var v,y=(0,o.Z)(d._snippet.placeholders);try{for(y.s();!(v=y.n()).done;){var b=v.value,S=d._snippet.offset(b),k=d._snippet.fullLen(b),w=h.e.fromPositions(n.getPositionAt(d._offset+S),n.getPositionAt(d._offset+S+k)),C=r.addDecoration(w,e._decor.inactive);i._placeholderDecorations.set(b,C)}}catch(x){y.e(x)}finally{y.f()}}}catch(x){a.e(x)}finally{a.f()}i._placeholderGroups=(0,l.vM)(i._snippet.placeholders,m.Vm.compareByIndex)}))}}]),e}();Z._decor={active:f.qx.register({description:"snippet-placeholder-1",stickiness:0,className:"snippet-placeholder"}),inactive:f.qx.register({description:"snippet-placeholder-2",stickiness:1,className:"snippet-placeholder"}),activeFinal:f.qx.register({description:"snippet-placeholder-3",stickiness:1,className:"finish-snippet-placeholder"}),inactiveFinal:f.qx.register({description:"snippet-placeholder-4",stickiness:1,className:"finish-snippet-placeholder"})};var F={overwriteBefore:0,overwriteAfter:0,adjustWhitespace:!0,clipboardText:void 0,overtypingCapturer:void 0},A=function(){function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:F,o=arguments.length>3?arguments[3]:void 0;(0,s.Z)(this,e),this._editor=t,this._template=i,this._options=n,this._languageConfigurationService=o,this._templateMerges=[],this._snippets=[]}return(0,a.Z)(e,[{key:"dispose",value:function(){(0,c.B9)(this._snippets)}},{key:"_logInfo",value:function(){return'template="'.concat(this._template,'", merged_templates="').concat(this._templateMerges.join(" -> "),'"')}},{key:"insert",value:function(){var t=this;if(this._editor.hasModel()){var i="string"===typeof this._template?e.createEditsAndSnippetsFromSelections(this._editor,this._template,this._options.overwriteBefore,this._options.overwriteAfter,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService):e.createEditsAndSnippetsFromEdits(this._editor,this._template,!1,this._options.adjustWhitespace,this._options.clipboardText,this._options.overtypingCapturer,this._languageConfigurationService),n=i.edits,o=i.snippets;this._snippets=o,this._editor.executeEdits("snippet",n,(function(e){for(var i=e.filter((function(e){return!!e.identifier})),n=0;n<o.length;n++)o[n].initialize(i[n].textChange);return t._snippets[0].hasPlaceholder?t._move(!0):i.map((function(e){return g.Y.fromPositions(e.range.getEndPosition())}))})),this._editor.revealRange(this._editor.getSelections()[0])}}},{key:"merge",value:function(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F;if(this._editor.hasModel()){this._templateMerges.push([this._snippets[0]._nestingLevel,this._snippets[0]._placeholderGroupsIdx,t]);var r=e.createEditsAndSnippetsFromSelections(this._editor,t,n.overwriteBefore,n.overwriteAfter,!0,n.adjustWhitespace,n.clipboardText,n.overtypingCapturer,this._languageConfigurationService),s=r.edits,a=r.snippets;this._editor.executeEdits("snippet",s,(function(e){for(var t=e.filter((function(e){return!!e.identifier})),n=0;n<a.length;n++)a[n].initialize(t[n].textChange);var r=a[0].isTrivialSnippet;if(!r){var s,l=(0,o.Z)(i._snippets);try{for(l.s();!(s=l.n()).done;){s.value.merge(a)}}catch(c){l.e(c)}finally{l.f()}console.assert(0===a.length)}return i._snippets[0].hasPlaceholder&&!r?i._move(void 0):t.map((function(e){return g.Y.fromPositions(e.range.getEndPosition())}))}))}}},{key:"next",value:function(){var e=this._move(!0);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}},{key:"prev",value:function(){var e=this._move(!1);this._editor.setSelections(e),this._editor.revealPositionInCenterIfOutsideViewport(e[0].getPosition())}},{key:"_move",value:function(e){var t,i=[],n=(0,o.Z)(this._snippets);try{for(n.s();!(t=n.n()).done;){var s=t.value.move(e);i.push.apply(i,(0,r.Z)(s))}}catch(a){n.e(a)}finally{n.f()}return i}},{key:"isAtFirstPlaceholder",get:function(){return this._snippets[0].isAtFirstPlaceholder}},{key:"isAtLastPlaceholder",get:function(){return this._snippets[0].isAtLastPlaceholder}},{key:"hasPlaceholder",get:function(){return this._snippets[0].hasPlaceholder}},{key:"hasChoice",get:function(){return this._snippets[0].hasChoice}},{key:"activeChoice",get:function(){return this._snippets[0].activeChoice}},{key:"isSelectionWithinPlaceholders",value:function(){if(!this.hasPlaceholder)return!1;var e=this._editor.getSelections();if(e.length<this._snippets.length)return!1;var t,i=new Map,s=(0,o.Z)(this._snippets);try{var a=function(){var s=t.value.computePossibleSelections();if(0===i.size){var a,l=(0,o.Z)(s);try{for(l.s();!(a=l.n()).done;){var c=(0,n.Z)(a.value,2),d=c[0],u=c[1];u.sort(h.e.compareRangesUsingStarts);var g,p=(0,o.Z)(e);try{for(p.s();!(g=p.n()).done;){var f=g.value;if(u[0].containsRange(f)){i.set(d,[]);break}}}catch(_){p.e(_)}finally{p.f()}}}catch(_){l.e(_)}finally{l.f()}}if(0===i.size)return{v:!1};i.forEach((function(e,t){e.push.apply(e,(0,r.Z)(s.get(t)))}))};for(s.s();!(t=s.n()).done;){var l=a();if("object"===typeof l)return l.v}}catch(_){s.e(_)}finally{s.f()}e.sort(h.e.compareRangesUsingStarts);var c,d=(0,o.Z)(i);try{for(d.s();!(c=d.n()).done;){var u=(0,n.Z)(c.value,2),g=u[0],p=u[1];if(p.length===e.length){p.sort(h.e.compareRangesUsingStarts);for(var f=0;f<p.length;f++)p[f].containsRange(e[f])||i.delete(g)}else i.delete(g)}}catch(_){d.e(_)}finally{d.f()}return i.size>0}}],[{key:"adjustWhitespace",value:function(e,t,i,n,o){var r,s=e.getLineContent(t.lineNumber),a=(0,d.V8)(s,0,t.column-1);return n.walk((function(t){if(!(t instanceof m.xv)||t.parent instanceof m.Lv)return!0;if(o&&!o.has(t))return!0;var s=t.value.split(/\r\n|\r|\n/);if(i){var l=n.offset(t);if(0===l)s[0]=e.normalizeIndentation(s[0]);else{var c=(r=null!==r&&void 0!==r?r:n.toString()).charCodeAt(l-1);10!==c&&13!==c||(s[0]=e.normalizeIndentation(a+s[0]))}for(var d=1;d<s.length;d++)s[d]=e.normalizeIndentation(a+s[d])}var u=s.join(e.getEOL());return u!==t.value&&(t.parent.replace(t,[new m.xv(u)]),r=void 0),!0})),a}},{key:"adjustSelection",value:function(e,t,i,n){if(0!==i||0!==n){var o=t,r=o.positionLineNumber,s=o.positionColumn,a=s-i,l=s+n,c=e.validateRange({startLineNumber:r,startColumn:a,endLineNumber:r,endColumn:l});t=g.Y.createWithDirection(c.startLineNumber,c.startColumn,c.endLineNumber,c.endColumn,t.getDirection())}return t}},{key:"createEditsAndSnippetsFromSelections",value:function(t,i,n,r,s,a,l,c,d){var g=[],p=[];if(!t.hasModel())return{edits:g,snippets:p};var f,y=t.getModel(),b=t.invokeWithinContext((function(e){return e.get(v.ec)})),S=t.invokeWithinContext((function(e){return new L(e.get(_.e),y)})),k=function(){return l},w=y.getValueInRange(e.adjustSelection(y,t.getSelection(),n,0)),C=y.getValueInRange(e.adjustSelection(y,t.getSelection(),0,r)),x=y.getLineFirstNonWhitespaceColumn(t.getSelection().positionLineNumber),O=t.getSelections().map((function(e,t){return{selection:e,idx:t}})).sort((function(e,t){return h.e.compareRangesUsingStarts(e.selection,t.selection)})),E=(0,o.Z)(O);try{for(E.s();!(f=E.n()).done;){var F=f.value,A=F.selection,z=F.idx,W=e.adjustSelection(y,A,n,0),V=e.adjustSelection(y,A,0,r);w!==y.getValueInRange(W)&&(W=A),C!==y.getValueInRange(V)&&(V=A);var H=A.setStartPosition(W.startLineNumber,W.startColumn).setEndPosition(V.endLineNumber,V.endColumn),B=(new m.Yj).parse(i,!0,s),G=H.getStartPosition(),j=e.adjustWhitespace(y,G,a||z>0&&x!==y.getLineFirstNonWhitespaceColumn(A.positionLineNumber),B);B.resolveVariables(new N([S,new T(k,z,O.length,"spread"===t.getOption(75)),new D(y,A,z,c),new R(y,A,d),new I,new P(b),new M])),g[z]=u.h.replace(H,B.toString()),g[z].identifier={major:z,minor:0},g[z]._isTracked=!0,p[z]=new Z(t,B,j)}}catch(U){E.e(U)}finally{E.f()}return{edits:g,snippets:p}}},{key:"createEditsAndSnippetsFromEdits",value:function(t,i,n,o,r,s,a){if(!t.hasModel()||0===i.length)return{edits:[],snippets:[]};var l=[],c=t.getModel(),d=new m.Yj,g=new m.y1,p=new N([t.invokeWithinContext((function(e){return new L(e.get(_.e),c)})),new T((function(){return r}),0,t.getSelections().length,"spread"===t.getOption(75)),new D(c,t.getSelection(),0,s),new R(c,t.getSelection(),a),new I,new P(t.invokeWithinContext((function(e){return e.get(v.ec)}))),new M]);i=i.sort((function(e,t){return h.e.compareRangesUsingStarts(e.range,t.range)}));for(var f=0,y=0;y<i.length;y++){var b=i[y],S=b.range,k=b.template;if(y>0){var w=i[y-1].range,C=h.e.fromPositions(w.getEndPosition(),S.getStartPosition()),x=new m.xv(c.getValueInRange(C));g.appendChild(x),f+=x.value.length}var O=d.parseFragment(k,g);e.adjustWhitespace(c,S.getStartPosition(),!0,g,new Set(O)),g.resolveVariables(p);var E=g.toString(),F=E.slice(f);f=E.length;var A=u.h.replace(S,F);A.identifier={major:y,minor:0},A._isTracked=!0,l.push(A)}return d.ensureFinalTabstop(g,n,!0),{edits:l,snippets:[new Z(t,g,"")]}}}]),e}();A=O([E(3,p.c_)],A)},9730:function(e,t,i){var n,o=i(39177),r=i(74165),s=i(15671),a=i(43144),l=i(60136),c=i(27277),d=i(96531),u=i(77548),h=i(54998),g=i(57348),p=i(90306),f=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},_=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,s.Z)(this,i),t.call(this,{id:"editor.action.toggleStickyScroll",title:{value:(0,d.NC)("toggleStickyScroll","Toggle Sticky Scroll"),mnemonicTitle:(0,d.NC)({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Sticky Scroll"),original:"Toggle Sticky Scroll"},category:u.R.View,toggled:{condition:p.Ao.equals("config.editor.stickyScroll.enabled",!0),title:(0,d.NC)("stickyScroll","Sticky Scroll"),mnemonicTitle:(0,d.NC)({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:h.eH.CommandPalette},{id:h.eH.MenubarViewMenu,group:"5_editor",order:2},{id:h.eH.StickyScrollContext}]})}return(0,a.Z)(i,[{key:"run",value:function(e){return f(this,void 0,void 0,(0,r.Z)().mark((function t(){var i,n;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.get(g.Ui),n=!i.getValue("editor.stickyScroll.enabled"),t.abrupt("return",i.updateValue("editor.stickyScroll.enabled",n));case 3:case"end":return t.stop()}}),t)})))}}]),i}(h.Ke),v=i(37762),m=i(97326),y=i(11752),b=i(61120),S=i(82927),k=i(69561),w=i(29439),C=i(39165),x=i(17282),N=i(66008),D=i(40207),L=i(39912),T=i(96019),R=i(49223),I=i(63082),P=i(20893),M=i(24404),O=i(851),E=i(26596),Z=i(88424),F=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},A=function(e,t){return function(i,n){t(i,n,e)}},z=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},W=(0,a.Z)((function e(t,i){(0,s.Z)(this,e),this.lineNumbers=t,this.lastLineRelativePosition=i})),V=null===(n=window.trustedTypes)||void 0===n?void 0:n.createPolicy("stickyScrollViewLayer",{createHTML:function(e){return e}}),H=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(e,n,o){var r;return(0,s.Z)(this,i),(r=t.call(this))._editor=e,r._languageFeatureService=n,r._instaService=o,r._rootDomNode=document.createElement("div"),r._disposableStore=r._register(new S.SL),r._lineNumbers=[],r._lastLineRelativePosition=0,r._hoverOnLine=-1,r._hoverOnColumn=-1,r._candidateDefinitionsLength=-1,r._layoutInfo=r._editor.getLayoutInfo(),r._rootDomNode=document.createElement("div"),r._rootDomNode.className="sticky-widget",r._rootDomNode.classList.toggle("peek",e instanceof Z.H),r._rootDomNode.style.width="".concat(r._layoutInfo.width-r._layoutInfo.minimap.minimapCanvasOuterWidth-r._layoutInfo.verticalScrollbarWidth,"px"),r._register(r._updateLinkGesture()),r}return(0,a.Z)(i,[{key:"_updateLinkGesture",value:function(){var e=this,t=new S.SL,i=new S.SL;t.add(i);var n=new T.yN(this._editor,!0);return t.add(n),t.add(n.onMouseMoveOrRelevantKeyDown((function(t){var n=(0,w.Z)(t,2),o=n[0];n[1];if(e._editor.hasModel()&&o.hasTriggerModifier){var r=o.target;if(r.detail===e.getId()&&r.element.innerText===r.element.innerHTML){var s=r.element.innerText;if(-1===e._hoverOnColumn)return;var a=e._hoverOnLine,l=e._hoverOnColumn,c=new O.e(a,l,a,l+s.length);if(c.equalsRange(e._stickyRangeProjectedOnEditor)){if("underline"===r.element.style.textDecoration)return}else e._stickyRangeProjectedOnEditor=c,i.clear();var d,u=new M.A;i.add((0,S.OF)((function(){return u.dispose(!0)}))),(0,R.nD)(e._languageFeatureService.definitionProvider,e._editor.getModel(),new L.L(a,l+1),u.token).then((function(t){if(!u.token.isCancellationRequested)if(0!==t.length){e._candidateDefinitionsLength=t.length;var n=r.element;d!==n?(i.clear(),(d=n).style.textDecoration="underline",i.add((0,S.OF)((function(){d.style.textDecoration="none"})))):d||((d=n).style.textDecoration="underline",i.add((0,S.OF)((function(){d.style.textDecoration="none"}))))}else i.clear()}))}else i.clear()}else i.clear()}))),t.add(n.onCancel((function(){i.clear()}))),t.add(n.onExecute((function(t){return z(e,void 0,void 0,(0,r.Z)().mark((function e(){var i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.detail===this.getId()){e.next=2;break}return e.abrupt("return");case 2:t.hasTriggerModifier?(this._candidateDefinitionsLength>1&&this._editor.revealPosition({lineNumber:this._hoverOnLine,column:1}),this._instaService.invokeFunction(I.K,t,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})):t.isRightClick||(i={lineNumber:this._hoverOnLine,column:this._hoverOnColumn},this._editor.revealPosition(i),this._editor.setSelection(O.e.fromPositions(i)),this._editor.focus());case 3:case"end":return e.stop()}}),e,this)})))}))),t}},{key:"getCurrentLines",value:function(){return this._lineNumbers}},{key:"setState",value:function(e){this._disposableStore.clear(),this._lineNumbers.length=0,C.clearNode(this._rootDomNode),this._lastLineRelativePosition=e.lastLineRelativePosition,this._lineNumbers=e.lineNumbers,this._renderRootNode()}},{key:"_renderChildNode",value:function(e,t){var i,n=this,o=document.createElement("div"),r=this._editor._getViewModel(),s=r.coordinatesConverter.convertModelPositionToViewPosition(new L.L(t,1)).lineNumber,a=r.getViewLineRenderingData(s),l=this._editor.getLayoutInfo(),c=l.width-l.minimap.minimapCanvasOuterWidth-l.verticalScrollbarWidth,d=this._editor.getOption(69).side,u=this._editor.getOption(63),h=this._editor.getOption(64);try{i=D.Kp.filter(a.inlineDecorations,s,a.minColumn,a.maxColumn)}catch(y){i=[]}var g,p=new N.IJ(!0,!0,a.content,a.continuesWithWrappedLine,a.isBasicASCII,a.containsRTL,0,a.tokens,i,a.tabSize,a.startVisibleColumn,1,1,1,500,"none",!0,!0,null),f=new x.HT(2e3);(0,N.d1)(p,f),g=V?V.createHTML(f.build()):f.build();var _=document.createElement("span");_.className="sticky-line",_.classList.add("stickyLine".concat(t)),_.style.lineHeight="".concat(u,"px"),_.innerHTML=g;var v=document.createElement("span");v.className="sticky-line",v.style.lineHeight="".concat(u,"px"),"left"===d?v.style.width="".concat(l.contentLeft-l.minimap.minimapCanvasOuterWidth,"px"):"right"===d&&(v.style.width="".concat(l.contentLeft,"px"));var m=document.createElement("span");return 1===h.renderType||3===h.renderType&&t%10===0?m.innerText=t.toString():2===h.renderType&&(m.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),m.className="sticky-line-number",m.style.lineHeight="".concat(u,"px"),m.style.width="".concat(l.lineNumbersWidth,"px"),"left"===d?m.style.paddingLeft="".concat(l.lineNumbersLeft-l.minimap.minimapCanvasOuterWidth,"px"):"right"===d&&(m.style.paddingLeft="".concat(l.lineNumbersLeft,"px")),v.appendChild(m),this._editor.applyFontInfo(_),this._editor.applyFontInfo(m),o.appendChild(v),o.appendChild(_),o.className="sticky-line-root",o.style.lineHeight="".concat(u,"px"),o.style.width="".concat(c,"px"),o.style.height="".concat(u,"px"),o.style.zIndex="0",e===this._lineNumbers.length-1&&(o.style.position="relative",o.style.zIndex="-1",o.style.top=this._lastLineRelativePosition+"px"),this._disposableStore.add(C.addDisposableListener(o,"mouseover",(function(e){if(n._editor.hasModel()){var i=new E.n(e).target.innerText;n._hoverOnLine=t,n._hoverOnColumn=n._editor.getModel().getLineContent(t).indexOf(i)+1||-1}}))),o}},{key:"_renderRootNode",value:function(){if(this._editor._getViewModel()){var e,t=(0,v.Z)(this._lineNumbers.entries());try{for(t.s();!(e=t.n()).done;){var i=(0,w.Z)(e.value,2),n=i[0],o=i[1];this._rootDomNode.appendChild(this._renderChildNode(n,o))}}catch(a){t.e(a)}finally{t.f()}var r=this._editor.getOption(63),s=this._lineNumbers.length*r+this._lastLineRelativePosition;this._rootDomNode.style.display=s>0?"block":"none",this._rootDomNode.style.height=s.toString()+"px","left"===this._editor.getOption(69).side&&(this._rootDomNode.style.marginLeft=this._editor.getLayoutInfo().minimap.minimapCanvasOuterWidth+"px")}}},{key:"getId",value:function(){return"editor.contrib.stickyScrollWidget"}},{key:"getDomNode",value:function(){return this._rootDomNode}},{key:"getPosition",value:function(){return{preference:null}}}]),i}(S.JT);H=F([A(1,k.p),A(2,P.TG)],H);var B=i(32260),G=i(1670),j=i(3318),U=i(85509),K=i(79620),q=i(73557),$=i(87558),X=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Y=function(e,t){return function(i,n){t(i,n,e)}},J=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},Q=(0,a.Z)((function e(t,i){(0,s.Z)(this,e),this.startLineNumber=t,this.endLineNumber=i})),ee=(0,a.Z)((function e(t,i,n){(0,s.Z)(this,e),this.startLineNumber=t,this.endLineNumber=i,this.nestingDepth=n})),te=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(e,n){var o;return(0,s.Z)(this,i),(o=t.call(this))._onDidChangeStickyScroll=o._store.add(new j.Q5),o.onDidChangeStickyScroll=o._onDidChangeStickyScroll.event,o._sessionStore=new S.SL,o._editor=e,o._languageFeaturesService=n,o._updateSoon=o._register(new G.pY((function(){return o.update()}),50)),o._register(o._editor.onDidChangeConfiguration((function(e){e.hasChanged(109)&&o.readConfiguration()}))),o.readConfiguration(),o}return(0,a.Z)(i,[{key:"dispose",value:function(){(0,y.Z)((0,b.Z)(i.prototype),"dispose",this).call(this),this._sessionStore.dispose()}},{key:"readConfiguration",value:function(){var e=this;!1!==this._editor.getOption(109).enabled?(this._sessionStore.add(this._editor.onDidChangeModel((function(){e.update()}))),this._sessionStore.add(this._editor.onDidChangeHiddenAreas((function(){return e.update()}))),this._sessionStore.add(this._editor.onDidChangeModelContent((function(){return e._updateSoon.schedule()}))),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((function(){e.update()}))),this.update()):this._sessionStore.clear()}},{key:"getVersionId",value:function(){var e;return null===(e=this._model)||void 0===e?void 0:e.version}},{key:"update",value:function(){var e;return J(this,void 0,void 0,(0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(e=this._cts)||void 0===e||e.dispose(!0),this._cts=new M.A,t.next=4,this.updateOutlineModel(this._cts.token);case 4:this._onDidChangeStickyScroll.fire();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"updateOutlineModel",value:function(e){var t;return J(this,void 0,void 0,(0,r.Z)().mark((function i(){var n,o,s,a,l,c,d,u,h,g,p,f=this;return(0,r.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this._editor.hasModel()){i.next=2;break}return i.abrupt("return");case 2:return n=this._editor.getModel(),o=n.getVersionId(),s=!!this._model&&!(0,$.Xy)(this._model.uri,n.uri),a=s?setTimeout((function(){e.isCancellationRequested||(f._model=new ne(n.uri,n.getVersionId(),void 0,void 0),f._onDidChangeStickyScroll.fire())}),75):void 0,i.next=8,B.C3.create(this._languageFeaturesService.documentSymbolProvider,n,e);case 8:if(l=i.sent,!e.isCancellationRequested){i.next=11;break}return i.abrupt("return");case 11:if(0===l.children.size){i.next=16;break}c=ie.fromOutlineModel(l,null===(t=this._model)||void 0===t?void 0:t.outlineProviderId),d=c.stickyOutlineElement,u=c.providerID,this._model=new ne(n.uri,o,d,u),i.next=23;break;case 16:return h=q.f.get(this._editor),i.next=19,null===h||void 0===h?void 0:h.getFoldingModel();case 19:if(g=i.sent,!e.isCancellationRequested){i.next=22;break}return i.abrupt("return");case 22:g&&0!==g.regions.length?(p=ie.fromFoldingModel(g),this._model=new ne(n.uri,o,p,void 0)):this._model=void 0;case 23:clearTimeout(a);case 24:case"end":return i.stop()}}),i,this)})))}},{key:"updateIndex",value:function(e){return-1===e?e=0:e<0&&(e=-e-2),e}},{key:"getCandidateStickyLinesIntersectingFromOutline",value:function(e,t,i,n,o){if(0!==t.children.length){for(var r=o,s=[],a=0;a<t.children.length;a++){var l=t.children[a];l.range&&s.push(l.range.startLineNumber)}for(var c=this.updateIndex((0,U.ry)(s,e.startLineNumber,(function(e,t){return e-t}))),d=this.updateIndex((0,U.ry)(s,e.startLineNumber+n,(function(e,t){return e-t}))),u=c;u<=d;u++){var h=t.children[u];if(!h)return;if(h.range){var g=h.range.startLineNumber,p=h.range.endLineNumber;e.startLineNumber<=p+1&&g-1<=e.endLineNumber&&g!==r&&(r=g,i.push(new ee(g,p-1,n+1)),this.getCandidateStickyLinesIntersectingFromOutline(e,h,i,n+1,g))}else this.getCandidateStickyLinesIntersectingFromOutline(e,h,i,n,o)}}}},{key:"getCandidateStickyLinesIntersecting",value:function(e){var t,i;if(!(null===(t=this._model)||void 0===t?void 0:t.element))return[];var n=[];this.getCandidateStickyLinesIntersectingFromOutline(e,this._model.element,n,0,-1);var o=null===(i=this._editor._getViewModel())||void 0===i?void 0:i.getHiddenAreas();if(o){var r,s=(0,v.Z)(o);try{var a=function(){var e=r.value;n=n.filter((function(t){return!(t.startLineNumber>=e.startLineNumber&&t.endLineNumber<=e.endLineNumber+1)}))};for(s.s();!(r=s.n()).done;)a()}catch(l){s.e(l)}finally{s.f()}}return n}}]),i}(S.JT);te=X([Y(1,k.p)],te);var ie=function(){function e(t,i,n){(0,s.Z)(this,e),this.range=t,this.children=i,this.parent=n}return(0,a.Z)(e,null,[{key:"comparator",value:function(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}},{key:"fromOutlineElement",value:function(t,i){var n,o=this,r=[],s=(0,v.Z)(t.children.values());try{for(s.s();!(n=s.n()).done;){var a=n.value;if(a.symbol.selectionRange.startLineNumber!==a.symbol.range.endLineNumber)if(a.symbol.selectionRange.startLineNumber!==i)r.push(e.fromOutlineElement(a,a.symbol.selectionRange.startLineNumber));else{var l,c=(0,v.Z)(a.children.values());try{for(c.s();!(l=c.n()).done;){var d=l.value;r.push(e.fromOutlineElement(d,a.symbol.selectionRange.startLineNumber))}}catch(u){c.e(u)}finally{c.f()}}}}catch(u){s.e(u)}finally{s.f()}return r.sort((function(e,t){return o.comparator(e.range,t.range)})),new e(new Q(t.symbol.selectionRange.startLineNumber,t.symbol.range.endLineNumber),r,void 0)}},{key:"fromOutlineModel",value:function(t,i){var n,o=this;if(K.$.first(t.children.values())instanceof B.H3){var r=K.$.find(t.children.values(),(function(e){return e.id===i}));if(r)n=r.children;else{var s,a="",l=-1,c=void 0,d=(0,v.Z)(t.children.entries());try{for(d.s();!(s=d.n()).done;){var u=(0,w.Z)(s.value,2),h=(u[0],u[1]),g=e.findSumOfRangesOfGroup(h);g>l&&(c=h,l=g,a=h.id)}}catch(b){d.e(b)}finally{d.f()}i=a,n=c.children}}else n=t.children;var p,f=[],_=Array.from(n.values()).sort((function(e,t){var i=new Q(e.symbol.range.startLineNumber,e.symbol.range.endLineNumber),n=new Q(t.symbol.range.startLineNumber,t.symbol.range.endLineNumber);return o.comparator(i,n)})),m=(0,v.Z)(_);try{for(m.s();!(p=m.n()).done;){var y=p.value;f.push(e.fromOutlineElement(y,y.symbol.selectionRange.startLineNumber))}}catch(b){m.e(b)}finally{m.f()}return{stickyOutlineElement:new e(void 0,f,void 0),providerID:i}}},{key:"findSumOfRangesOfGroup",value:function(e){var t,i=0,n=(0,v.Z)(e.children.values());try{for(n.s();!(t=n.n()).done;){var o=t.value;i+=this.findSumOfRangesOfGroup(o)}}catch(r){n.e(r)}finally{n.f()}return e instanceof B.sT?i+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:i}},{key:"fromFoldingModel",value:function(t){for(var i,n=t.regions,o=n.length,r=[],s=new e(void 0,[],void 0),a=s,l=0;l<o;l++){for(i=new Q(n.getStartLineNumber(l),n.getEndLineNumber(l)+1);0!==r.length&&(i.startLineNumber<r[r.length-1].startLineNumber||i.endLineNumber>r[r.length-1].endLineNumber);)r.pop(),void 0!==a.parent&&(a=a.parent);var c=new e(i,[],a);a.children.push(c),a=c,r.push(i)}return s}}]),e}(),ne=(0,a.Z)((function e(t,i,n,o){(0,s.Z)(this,e),this.uri=t,this.version=i,this.element=n,this.outlineProviderId=o})),oe=i(99292),re=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},se=function(e,t){return function(i,n){t(i,n,e)}},ae=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},le=function(e){(0,l.Z)(i,e);var t=(0,c.Z)(i);function i(e,n,o,a){var l;return(0,s.Z)(this,i),(l=t.call(this))._editor=e,l._contextMenuService=n,l._sessionStore=new S.SL,l._maxStickyLines=Number.MAX_SAFE_INTEGER,l._stickyScrollWidget=new H(l._editor,o,a),l._stickyLineCandidateProvider=new te(l._editor,o),l._widgetState=new W([],0),l._register(l._stickyScrollWidget),l._register(l._stickyLineCandidateProvider),l._register(l._editor.onDidChangeConfiguration((function(e){e.hasChanged(109)&&l._readConfiguration()}))),l._readConfiguration(),l._register(C.addDisposableListener(l._stickyScrollWidget.getDomNode(),C.EventType.CONTEXT_MENU,(function(e){return ae((0,m.Z)(l),void 0,void 0,(0,r.Z)().mark((function t(){return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._onContextMenu(e);case 1:case"end":return t.stop()}}),t,this)})))}))),l}return(0,a.Z)(i,[{key:"_onContextMenu",value:function(e){this._contextMenuService.showContextMenu({menuId:h.eH.StickyScrollContext,getAnchor:function(){return e}})}},{key:"_readConfiguration",value:function(){var e=this;if(!1===this._editor.getOption(109).enabled)return this._editor.removeOverlayWidget(this._stickyScrollWidget),void this._sessionStore.clear();this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange((function(){return e._renderStickyScroll()}))),this._sessionStore.add(this._editor.onDidLayoutChange((function(){return e._onDidResize()}))),this._sessionStore.add(this._editor.onDidChangeModelTokens((function(t){return e._onTokensChange(t)}))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll((function(){return e._renderStickyScroll()}))),2===this._editor.getOption(64).renderType&&this._sessionStore.add(this._editor.onDidChangeCursorPosition((function(){return e._renderStickyScroll()})))}},{key:"_needsUpdate",value:function(e){var t,i=this._stickyScrollWidget.getCurrentLines(),n=(0,v.Z)(i);try{for(n.s();!(t=n.n()).done;){var o,r=t.value,s=(0,v.Z)(e.ranges);try{for(s.s();!(o=s.n()).done;){var a=o.value;if(r>=a.fromLineNumber&&r<=a.toLineNumber)return!0}}catch(l){s.e(l)}finally{s.f()}}}catch(l){n.e(l)}finally{n.f()}return!1}},{key:"_onTokensChange",value:function(e){this._needsUpdate(e)&&this._renderStickyScroll()}},{key:"_onDidResize",value:function(){var e=this._editor.getLayoutInfo(),t=e.width-e.minimap.minimapCanvasOuterWidth-e.verticalScrollbarWidth;this._stickyScrollWidget.getDomNode().style.width="".concat(t,"px");var i=e.height/this._editor.getOption(63);this._maxStickyLines=Math.round(.25*i)}},{key:"_renderStickyScroll",value:function(){if(this._editor.hasModel()){var e=this._editor.getModel(),t=this._stickyLineCandidateProvider.getVersionId();void 0!==t&&t!==e.getVersionId()||(this._widgetState=this.getScrollWidgetState(),this._stickyScrollWidget.setState(this._widgetState))}}},{key:"getScrollWidgetState",value:function(){var e=this._editor.getOption(63),t=Math.min(this._maxStickyLines,this._editor.getOption(109).maxLineCount),i=this._editor.getScrollTop(),n=0,o=[],r=this._editor.getVisibleRanges();if(0!==r.length){var s,a=new Q(r[0].startLineNumber,r[r.length-1].endLineNumber),l=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(a),c=(0,v.Z)(l);try{for(c.s();!(s=c.n()).done;){var d=s.value,u=d.startLineNumber,h=d.endLineNumber,g=d.nestingDepth;if(h-u>0){var p=(g-1)*e,f=g*e,_=this._editor.getBottomForLineNumber(u)-i,m=this._editor.getTopForLineNumber(h)-i,y=this._editor.getBottomForLineNumber(h)-i;if(p>m&&p<=y){o.push(u),n=y-f;break}if(f>_&&f<=y&&o.push(u),o.length===t)break}}}catch(b){c.e(b)}finally{c.f()}}return new W(o,n)}},{key:"dispose",value:function(){(0,y.Z)((0,b.Z)(i.prototype),"dispose",this).call(this),this._sessionStore.dispose()}}]),i}(S.JT);le.ID="store.contrib.stickyScrollController",le=re([se(1,oe.i),se(2,k.p),se(3,P.TG)],le),(0,o._K)(le.ID,le,1),(0,h.r1)(_)},30810:function(e,t,i){i.d(t,{_:function(){return u},t:function(){return d}});var n=i(29439),o=i(37762),r=i(43144),s=i(15671),a=i(85509),l=i(96823),c=i(62428),d=(0,r.Z)((function e(t,i){(0,s.Z)(this,e),this.leadingLineContent=t,this.characterCountDelta=i})),u=function(){function e(t,i,n,o,r,a){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l.mX.default,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;(0,s.Z)(this,e),this.clipboardText=d,this._snippetCompareFn=e._compareCompletionItems,this._items=t,this._column=i,this._wordDistance=o,this._options=r,this._refilterKind=1,this._lineContext=n,this._fuzzyScoreOptions=c,"top"===a?this._snippetCompareFn=e._compareCompletionItemsSnippetsUp:"bottom"===a&&(this._snippetCompareFn=e._compareCompletionItemsSnippetsDown)}return(0,r.Z)(e,[{key:"lineContext",get:function(){return this._lineContext},set:function(e){this._lineContext.leadingLineContent===e.leadingLineContent&&this._lineContext.characterCountDelta===e.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}},{key:"items",get:function(){return this._ensureCachedState(),this._filteredItems}},{key:"getItemsByProvider",value:function(){return this._ensureCachedState(),this._itemsByProvider}},{key:"getIncompleteProvider",value:function(){this._ensureCachedState();var e,t=new Set,i=(0,o.Z)(this.getItemsByProvider());try{for(i.s();!(e=i.n()).done;){var r=(0,n.Z)(e.value,2),s=r[0],a=r[1];a.length>0&&a[0].container.incomplete&&t.add(s)}}catch(l){i.e(l)}finally{i.f()}return t}},{key:"stats",get:function(){return this._ensureCachedState(),this._stats}},{key:"_ensureCachedState",value:function(){0!==this._refilterKind&&this._createCachedState()}},{key:"_createCachedState",value:function(){this._itemsByProvider=new Map;for(var e=[],t=this._lineContext,i=t.leadingLineContent,n=t.characterCountDelta,o="",r="",s=1===this._refilterKind?this._items:this._filteredItems,d=[],u=!this._options.filterGraceful||s.length>2e3?l.EW:l.l7,h=0;h<s.length;h++){var g=s[h];if(!g.isInvalid){var p=this._itemsByProvider.get(g.provider);p?p.push(g):this._itemsByProvider.set(g.provider,[g]);var f=g.position.column-g.editStart.column,_=f+n-(g.position.column-this._column);if(o.length!==_&&(r=(o=0===_?"":i.slice(-_)).toLowerCase()),g.word=o,0===_)g.score=l.CL.Default;else{for(var v=0;v<f;){var m=o.charCodeAt(v);if(32!==m&&9!==m)break;v+=1}if(v>=_)g.score=l.CL.Default;else if("string"===typeof g.completion.filterText){var y=u(o,r,v,g.completion.filterText,g.filterTextLow,0,this._fuzzyScoreOptions);if(!y)continue;0===(0,c.zY)(g.completion.filterText,g.textLabel)?g.score=y:(g.score=(0,l.jB)(o,r,v,g.textLabel,g.labelLow,0),g.score[0]=y[0])}else{var b=u(o,r,v,g.textLabel,g.labelLow,0,this._fuzzyScoreOptions);if(!b)continue;g.score=b}}g.idx=h,g.distance=this._wordDistance.distance(g.position,g.completion),d.push(g),e.push(g.textLabel.length)}}this._filteredItems=d.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?(0,a.HW)(e.length-.85,e,(function(e,t){return e-t})):0}}}],[{key:"_compareCompletionItems",value:function(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}},{key:"_compareCompletionItemsSnippetsDown",value:function(t,i){if(t.completion.kind!==i.completion.kind){if(27===t.completion.kind)return 1;if(27===i.completion.kind)return-1}return e._compareCompletionItems(t,i)}},{key:"_compareCompletionItemsSnippetsUp",value:function(t,i){if(t.completion.kind!==i.completion.kind){if(27===t.completion.kind)return-1;if(27===i.completion.kind)return 1}return e._compareCompletionItems(t,i)}}]),e}()},29084:function(e,t,i){i.d(t,{A9:function(){return T},GI:function(){return D},ZJ:function(){return R},_y:function(){return N},i5:function(){return E},kL:function(){return P},tG:function(){return Z}});var n,o=i(37762),r=i(74165),s=i(15671),a=i(43144),l=i(24404),c=i(61002),d=i(96823),u=i(82927),h=i(61597),g=i(91189),p=i(97638),f=i(39912),_=i(851),v=i(42832),m=i(15165),y=i(96531),b=i(54998),S=i(13134),k=i(90306),w=i(69561),C=i(42687),x=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},N={Visible:C.iX,HasFocusedSuggestion:new k.uy("suggestWidgetHasFocusedSuggestion",!1,(0,y.NC)("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new k.uy("suggestWidgetDetailsVisible",!1,(0,y.NC)("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new k.uy("suggestWidgetMultipleSuggestions",!1,(0,y.NC)("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new k.uy("suggestionMakesTextEdit",!0,(0,y.NC)("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new k.uy("acceptSuggestionOnEnter",!0,(0,y.NC)("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new k.uy("suggestionHasInsertAndReplaceRange",!1,(0,y.NC)("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new k.uy("suggestionInsertMode",void 0,{type:"string",description:(0,y.NC)("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new k.uy("suggestionCanResolve",!1,(0,y.NC)("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},D=new b.eH("suggestWidgetStatusBar"),L=function(){function e(t,i,n,o){(0,s.Z)(this,e),this.position=t,this.completion=i,this.container=n,this.provider=o,this.isInvalid=!1,this.score=d.CL.Default,this.distance=0,this.textLabel="string"===typeof i.label?i.label:i.label.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=i.sortText&&i.sortText.toLowerCase(),this.filterTextLow=i.filterText&&i.filterText.toLowerCase(),this.extensionId=i.extensionId,_.e.isIRange(i.range)?(this.editStart=new f.L(i.range.startLineNumber,i.range.startColumn),this.editInsertEnd=new f.L(i.range.endLineNumber,i.range.endColumn),this.editReplaceEnd=new f.L(i.range.endLineNumber,i.range.endColumn),this.isInvalid=this.isInvalid||_.e.spansMultipleLines(i.range)||i.range.startLineNumber!==t.lineNumber):(this.editStart=new f.L(i.range.insert.startLineNumber,i.range.insert.startColumn),this.editInsertEnd=new f.L(i.range.insert.endLineNumber,i.range.insert.endColumn),this.editReplaceEnd=new f.L(i.range.replace.endLineNumber,i.range.replace.endColumn),this.isInvalid=this.isInvalid||_.e.spansMultipleLines(i.range.insert)||_.e.spansMultipleLines(i.range.replace)||i.range.insert.startLineNumber!==t.lineNumber||i.range.replace.startLineNumber!==t.lineNumber||i.range.insert.startColumn!==i.range.replace.startColumn),"function"!==typeof o.resolveCompletionItem&&(this._resolveCache=Promise.resolve(),this._isResolved=!0)}return(0,a.Z)(e,[{key:"isResolved",get:function(){return!!this._isResolved}},{key:"resolve",value:function(e){return x(this,void 0,void 0,(0,r.Z)().mark((function t(){var i,n=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._resolveCache||(i=e.onCancellationRequested((function(){n._resolveCache=void 0,n._isResolved=!1})),this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then((function(e){Object.assign(n.completion,e),n._isResolved=!0,i.dispose()}),(function(e){(0,c.n2)(e)&&(n._resolveCache=void 0,n._isResolved=!1)}))),t.abrupt("return",this._resolveCache);case 2:case"end":return t.stop()}}),t,this)})))}}]),e}(),T=(0,a.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(0,s.Z)(this,e),this.snippetSortOrder=t,this.kindFilter=i,this.providerFilter=n,this.providerItemsToReuse=o,this.showDeprecated=r}));function R(){return n}T.default=new T;var I=(0,a.Z)((function e(t,i,n,o){(0,s.Z)(this,e),this.items=t,this.needsClipboard=i,this.durations=n,this.disposable=o}));function P(e,t,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:T.default,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{triggerKind:0},d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.T.None;return x(this,void 0,void 0,(0,r.Z)().mark((function l(){var g,p,f,v,y,b,S,k,w,C,N,D,T,R=this;return(0,r.Z)().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:g=new h.G(!0),i=i.clone(),p=t.getWordAtPosition(i),f=p?new _.e(i.lineNumber,p.startColumn,i.lineNumber,p.endColumn):_.e.fromPositions(i),v={replace:f,insert:f.setEndPosition(i.lineNumber,i.column)},y=[],b=new u.SL,S=[],k=!1,w=function(e,t,n){var r,a,l,c=!1;if(!t)return c;var d,h=(0,o.Z)(t.suggestions);try{for(h.s();!(d=h.n()).done;){var g=d.value;if(!s.kindFilter.has(g.kind)){if(!s.showDeprecated&&(null===(r=null===g||void 0===g?void 0:g.tags)||void 0===r?void 0:r.includes(1)))continue;g.range||(g.range=v),g.sortText||(g.sortText="string"===typeof g.label?g.label:g.label.label),!k&&g.insertTextRules&&4&g.insertTextRules&&(k=m.Yj.guessNeedsClipboard(g.insertText)),y.push(new L(i,g,t,e)),c=!0}}}catch(p){h.e(p)}finally{h.f()}return(0,u.Wf)(t)&&b.add(t),S.push({providerName:null!==(a=e._debugDisplayName)&&void 0!==a?a:"unknown_provider",elapsedProvider:null!==(l=t.duration)&&void 0!==l?l:-1,elapsedOverall:n.elapsed()}),c},C=x(R,void 0,void 0,(0,r.Z)().mark((function e(){var o,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&!s.kindFilter.has(27)){e.next=2;break}return e.abrupt("return");case 2:if(!(o=s.providerItemsToReuse.get(n))){e.next=6;break}return o.forEach((function(e){return y.push(e)})),e.abrupt("return");case 6:if(!(s.providerFilter.size>0)||s.providerFilter.has(n)){e.next=8;break}return e.abrupt("return");case 8:return l=new h.G(!0),e.next=11,n.provideCompletionItems(t,i,a,d);case 11:c=e.sent,w(n,c,l);case 13:case"end":return e.stop()}}),e)}))),N=(0,o.Z)(e.orderedGroups(t)),l.prev=12,T=(0,r.Z)().mark((function e(){var n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=D.value,o=!1,e.next=4,Promise.all(n.map((function(e){return x(R,void 0,void 0,(0,r.Z)().mark((function n(){var l,u,g;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!s.providerItemsToReuse.has(e)){n.next=5;break}return(l=s.providerItemsToReuse.get(e)).forEach((function(e){return y.push(e)})),o=o||l.length>0,n.abrupt("return");case 5:if(!(s.providerFilter.size>0)||s.providerFilter.has(e)){n.next=7;break}return n.abrupt("return");case 7:return n.prev=7,u=new h.G(!0),n.next=11,e.provideCompletionItems(t,i,a,d);case 11:g=n.sent,o=w(e,g,u)||o,n.next=18;break;case 15:n.prev=15,n.t0=n.catch(7),(0,c.Cp)(n.t0);case 18:case"end":return n.stop()}}),n,null,[[7,15]])})))})));case 4:if(!o&&!d.isCancellationRequested){e.next=6;break}return e.abrupt("return","break");case 6:case"end":return e.stop()}}),e)})),N.s();case 15:if((D=N.n()).done){l.next=22;break}return l.delegateYield(T(),"t0",17);case 17:if("break"!==l.t0){l.next=20;break}return l.abrupt("break",22);case 20:l.next=15;break;case 22:l.next=27;break;case 24:l.prev=24,l.t1=l.catch(12),N.e(l.t1);case 27:return l.prev=27,N.f(),l.finish(27);case 30:return l.next=32,C;case 32:if(!d.isCancellationRequested){l.next=35;break}return b.dispose(),l.abrupt("return",Promise.reject(new c.FU));case 35:return l.abrupt("return",new I(y.sort((P=s.snippetSortOrder,O.get(P))),k,{entries:S,elapsed:g.elapsed()},b));case 36:case"end":return l.stop()}var P}),l,null,[[12,24,27,30]])})))}function M(e,t){if(e.sortTextLow&&t.sortTextLow){if(e.sortTextLow<t.sortTextLow)return-1;if(e.sortTextLow>t.sortTextLow)return 1}return e.textLabel<t.textLabel?-1:e.textLabel>t.textLabel?1:e.completion.kind-t.completion.kind}var O=new Map;function E(e,t){var i;null===(i=e.getContribution("editor.contrib.suggestController"))||void 0===i||i.triggerSuggest((new Set).add(t),void 0,!0)}O.set(0,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return-1;if(27===t.completion.kind)return 1}return M(e,t)})),O.set(2,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return 1;if(27===t.completion.kind)return-1}return M(e,t)})),O.set(1,M),S.P.registerCommand("_executeCompletionItemProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return x(void 0,void 0,void 0,(0,r.Z)().mark((function t(){var n,s,a,c,d,u,h,_,m,y,b,S,k;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i[0],s=i[1],a=i[2],c=i[3],(0,g.p_)(p.o.isUri(n)),(0,g.p_)(f.L.isIPosition(s)),(0,g.p_)("string"===typeof a||!a),(0,g.p_)("number"===typeof c||!c),d=e.get(w.p),u=d.completionProvider,t.next=8,e.get(v.S).createModelReference(n);case 8:return h=t.sent,t.prev=9,_={incomplete:!1,suggestions:[]},m=[],t.next=14,P(u,h.object.textEditorModel,f.L.lift(s),void 0,{triggerCharacter:null!==a&&void 0!==a?a:void 0,triggerKind:a?1:0});case 14:y=t.sent,b=(0,o.Z)(y.items);try{for(b.s();!(S=b.n()).done;)k=S.value,m.length<(null!==c&&void 0!==c?c:0)&&m.push(k.resolve(l.T.None)),_.incomplete=_.incomplete||k.container.incomplete,_.suggestions.push(k.completion)}catch(r){b.e(r)}finally{b.f()}return t.prev=17,t.next=20,Promise.all(m);case 20:return t.abrupt("return",_);case 21:return t.prev=21,setTimeout((function(){return y.disposable.dispose()}),100),t.finish(21);case 24:return t.prev=24,h.dispose(),t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[9,,24,27],[17,,21,24]])})))}));var Z=function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,null,[{key:"isAllOff",value:function(e){return"off"===e.other&&"off"===e.comments&&"off"===e.strings}},{key:"isAllOn",value:function(e){return"on"===e.other&&"on"===e.comments&&"on"===e.strings}},{key:"valueFor",value:function(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}]),e}()},47169:function(e,t,i){i.d(t,{n:function(){return dt}});var n=i(60136),o=i(27277),r=i(93433),s=i(37762),a=i(15671),l=i(43144),c=i(10202),d=i(85509),u=i(1670),h=i(24404),g=i(61002),p=i(3318),f=i(71994),_=i(82927),v=i(37858),m=i(61597),y=i(91189),b=i(9538),S=i(39177),k=i(72196),w=i(39912),C=i(851),x=i(78656),N=i(790),D=i(15165),L=i(79106),T=i(90306),R=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},I=function(e,t){return function(i,n){t(i,n,e)}},P=function(){function e(t,i){var n=this;(0,a.Z)(this,e),this._editor=t,this._enabled=!1,this._ckAtEnd=e.AtEnd.bindTo(i),this._configListener=this._editor.onDidChangeConfiguration((function(e){return e.hasChanged(117)&&n._update()})),this._update()}return(0,l.Z)(e,[{key:"dispose",value:function(){var e;this._configListener.dispose(),null===(e=this._selectionListener)||void 0===e||e.dispose(),this._ckAtEnd.reset()}},{key:"_update",value:function(){var e=this,t="on"===this._editor.getOption(117);if(this._enabled!==t)if(this._enabled=t,this._enabled){var i=function(){if(e._editor.hasModel()){var t=e._editor.getModel(),i=e._editor.getSelection(),n=t.getWordAtPosition(i.getStartPosition());n?e._ckAtEnd.set(n.endColumn===i.getStartPosition().column):e._ckAtEnd.set(!1)}else e._ckAtEnd.set(!1)};this._selectionListener=this._editor.onDidChangeCursorSelection(i),i()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}}]),e}();P.AtEnd=new T.uy("atEndOfWord",!1),P=R([I(1,T.i6)],P);var M=i(96531),O=i(13134),E=i(20893),Z=i(58312),F=i(29084),A=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},z=function(e,t){return function(i,n){t(i,n,e)}},W=function(){function e(t,i){(0,a.Z)(this,e),this._editor=t,this._index=0,this._ckOtherSuggestions=e.OtherSuggestions.bindTo(i)}return(0,l.Z)(e,[{key:"dispose",value:function(){this.reset()}},{key:"reset",value:function(){var e;this._ckOtherSuggestions.reset(),null===(e=this._listener)||void 0===e||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}},{key:"set",value:function(t,i){var n=this,o=t.model,r=t.index;0!==o.items.length?e._moveIndex(!0,o,r)!==r?(this._acceptNext=i,this._model=o,this._index=r,this._listener=this._editor.onDidChangeCursorPosition((function(){n._ignore||n.reset()})),this._ckOtherSuggestions.set(!0)):this.reset():this.reset()}},{key:"next",value:function(){this._move(!0)}},{key:"prev",value:function(){this._move(!1)}},{key:"_move",value:function(t){if(this._model)try{this._ignore=!0,this._index=e._moveIndex(t,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}}],[{key:"_moveIndex",value:function(e,t,i){for(var n=i;(n=(n+t.items.length+(e?1:-1))%t.items.length)!==i&&t.items[n].completion.additionalTextEdits;);return n}}]),e}();W.OtherSuggestions=new T.uy("hasOtherSuggestions",!1),W=A([z(1,T.i6)],W);var V=i(50886),H=function(){function e(t,i,n,o){var r=this;(0,a.Z)(this,e),this._disposables=new _.SL,this._disposables.add(n.onDidSuggest((function(e){0===e.completionModel.items.length&&r.reset()}))),this._disposables.add(n.onDidCancel((function(e){r.reset()}))),this._disposables.add(i.onDidShow((function(){return r._onItem(i.getFocusedItem())}))),this._disposables.add(i.onDidFocus(this._onItem,this)),this._disposables.add(i.onDidHide(this.reset,this)),this._disposables.add(t.onWillType((function(e){if(r._active&&!i.isFrozen()&&0!==n.state){var s=e.charCodeAt(e.length-1);r._active.acceptCharacters.has(s)&&t.getOption(0)&&o(r._active.item)}})))}return(0,l.Z)(e,[{key:"_onItem",value:function(e){if(e&&(0,d.Of)(e.item.completion.commitCharacters)){if(!this._active||this._active.item.item!==e.item){var t,i=new V.q,n=(0,s.Z)(e.item.completion.commitCharacters);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.length>0&&i.add(o.charCodeAt(0))}}catch(r){n.e(r)}finally{n.f()}this._active={acceptCharacters:i,item:e}}}else this.reset()}},{key:"reset",value:function(){this._active=void 0}},{key:"dispose",value:function(){this._disposables.dispose()}}]),e}(),B=i(74165),G=i(29439),j=i(62428),U=i(21864),K=i(42109),q=i(50280),$=i(55351),X=i(57348),Y=i(14629),J=i(30810),Q=i(69561),ee=i(96823),te=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ie=function(e,t){return function(i,n){t(i,n,e)}},ne=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},oe=function(){function e(t,i,n){(0,a.Z)(this,e),this.leadingLineContent=t.getLineContent(i.lineNumber).substr(0,i.column-1),this.leadingWord=t.getWordUntilPosition(i),this.lineNumber=i.lineNumber,this.column=i.column,this.triggerOptions=n}return(0,l.Z)(e,null,[{key:"shouldAutoTrigger",value:function(e){if(!e.hasModel())return!1;var t=e.getModel(),i=e.getPosition();t.tokenization.tokenizeIfCheap(i.lineNumber);var n=t.getWordAtPosition(i);return!!n&&(n.endColumn===i.column&&!!isNaN(Number(n.word)))}}]),e}();var re=function(){function e(t,i,n,o,r,s,l,c){var d=this;(0,a.Z)(this,e),this._editor=t,this._editorWorkerService=i,this._clipboardService=n,this._telemetryService=o,this._logService=r,this._contextKeyService=s,this._configurationService=l,this._languageFeaturesService=c,this._toDispose=new _.SL,this._triggerCharacterListener=new _.SL,this._triggerQuickSuggest=new u._F,this._triggerState=void 0,this._completionDisposables=new _.SL,this._onDidCancel=new p.Q5,this._onDidTrigger=new p.Q5,this._onDidSuggest=new p.Q5,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new U.Y(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel((function(){d._updateTriggerCharacters(),d.cancel()}))),this._toDispose.add(this._editor.onDidChangeModelLanguage((function(){d._updateTriggerCharacters(),d.cancel()}))),this._toDispose.add(this._editor.onDidChangeConfiguration((function(){d._updateTriggerCharacters()}))),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange((function(){d._updateTriggerCharacters(),d._updateActiveSuggestSession()})));var h=!1;this._toDispose.add(this._editor.onDidCompositionStart((function(){h=!0}))),this._toDispose.add(this._editor.onDidCompositionEnd((function(){h=!1,d._onCompositionEnd()}))),this._toDispose.add(this._editor.onDidChangeCursorSelection((function(e){h||d._onCursorChange(e)}))),this._toDispose.add(this._editor.onDidChangeModelContent((function(){h||void 0===d._triggerState||d._refilterCompletionItems()}))),this._updateTriggerCharacters()}return(0,l.Z)(e,[{key:"dispose",value:function(){(0,_.B9)(this._triggerCharacterListener),(0,_.B9)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}},{key:"_updateTriggerCharacters",value:function(){var e=this;if(this._triggerCharacterListener.clear(),!this._editor.getOption(86)&&this._editor.hasModel()&&this._editor.getOption(115)){var t,i=new Map,n=(0,s.Z)(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));try{for(n.s();!(t=n.n()).done;){var o,r=t.value,a=(0,s.Z)(r.triggerCharacters||[]);try{for(a.s();!(o=a.n()).done;){var l=o.value,c=i.get(l);c||((c=new Set).add((0,F.ZJ)()),i.set(l,c)),c.add(r)}}catch(u){a.e(u)}finally{a.f()}}}catch(u){n.e(u)}finally{n.f()}var d=function(t){var n;if(function(e,t,i){var n,o;if(!Boolean(t.getContextKeyValue("inlineSuggestionVisible")))return!0;var r=i.getValue("editor.inlineSuggest.allowSuggestOnTriggerCharacters",{overrideIdentifier:null===(n=e.getModel())||void 0===n?void 0:n.getLanguageId(),resource:null===(o=e.getModel())||void 0===o?void 0:o.uri});return void 0!==r&&Boolean(r)}(e._editor,e._contextKeyService,e._configurationService)&&!oe.shouldAutoTrigger(e._editor)){if(!t){var o=e._editor.getPosition();t=e._editor.getModel().getLineContent(o.lineNumber).substr(0,o.column-1)}var r="";(0,j.YK)(t.charCodeAt(t.length-1))?(0,j.ZG)(t.charCodeAt(t.length-2))&&(r=t.substr(t.length-2)):r=t.charAt(t.length-1);var a=i.get(r);if(a){var l=new Map;if(e._completionModel){var c,d=(0,s.Z)(e._completionModel.getItemsByProvider());try{for(d.s();!(c=d.n()).done;){var h=(0,G.Z)(c.value,2),g=h[0],p=h[1];a.has(g)||l.set(g,p)}}catch(u){d.e(u)}finally{d.f()}}e.trigger({auto:!0,triggerKind:1,triggerCharacter:r,retrigger:Boolean(e._completionModel),clipboardText:null===(n=e._completionModel)||void 0===n?void 0:n.clipboardText,completionOptions:{providerFilter:a,providerItemsToReuse:l}})}}};this._triggerCharacterListener.add(this._editor.onDidType(d)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd((function(){return d()})))}}},{key:"state",get:function(){return this._triggerState?this._triggerState.auto?2:1:0}},{key:"cancel",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];void 0!==this._triggerState&&(this._triggerQuickSuggest.cancel(),null===(e=this._requestToken)||void 0===e||e.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:t}))}},{key:"clear",value:function(){this._completionDisposables.clear()}},{key:"_updateActiveSuggestSession",value:function(){void 0!==this._triggerState&&(this._editor.hasModel()&&this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.trigger({auto:this._triggerState.auto,retrigger:!0}):this.cancel())}},{key:"_onCursorChange",value:function(e){if(this._editor.hasModel()){var t=this._currentSelection;this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||0!==e.reason&&3!==e.reason||"keyboard"!==e.source&&"deleteLeft"!==e.source?this.cancel():void 0===this._triggerState&&0===e.reason?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():void 0!==this._triggerState&&3===e.reason&&this._refilterCompletionItems()}}},{key:"_onCompositionEnd",value:function(){void 0===this._triggerState?this._doTriggerQuickSuggest():this._refilterCompletionItems()}},{key:"_doTriggerQuickSuggest",value:function(){var e=this;F.tG.isAllOff(this._editor.getOption(84))||(this.cancel(),this._triggerQuickSuggest.cancelAndSet((function(){if(void 0===e._triggerState&&oe.shouldAutoTrigger(e._editor)&&e._editor.hasModel()&&e._editor.hasWidgetFocus()){var t=e._editor.getModel(),i=e._editor.getPosition(),n=e._editor.getOption(84);if(!F.tG.isAllOff(n)){if(!F.tG.isAllOn(n)){t.tokenization.tokenizeIfCheap(i.lineNumber);var o=t.tokenization.getLineTokens(i.lineNumber),r=o.getStandardTokenType(o.findTokenIndexAtOffset(Math.max(i.column-1-1,0)));if("on"!==F.tG.valueFor(n,r))return}(function(e,t,i){var n,o;if(!Boolean(t.getContextKeyValue("inlineSuggestionVisible")))return!0;var r=i.getValue("editor.inlineSuggest.allowQuickSuggestions",{overrideIdentifier:null===(n=e.getModel())||void 0===n?void 0:n.getLanguageId(),resource:null===(o=e.getModel())||void 0===o?void 0:o.uri});return void 0!==r&&Boolean(r)})(e._editor,e._contextKeyService,e._configurationService)&&e._languageFeaturesService.completionProvider.has(t)&&e.trigger({auto:!0})}}}),this._editor.getOption(85)))}},{key:"_refilterCompletionItems",value:function(){(0,y.p_)(this._editor.hasModel()),(0,y.p_)(void 0!==this._triggerState);var e=this._editor.getModel(),t=this._editor.getPosition(),i=new oe(e,t,Object.assign(Object.assign({},this._triggerState),{refilter:!0}));this._onNewContext(i)}},{key:"trigger",value:function(t){var i,n,o,r,s,a,l=this;if(this._editor.hasModel()){var c=this._editor.getModel(),d=new oe(c,this._editor.getPosition(),t);this.cancel(t.retrigger),this._triggerState=t,this._onDidTrigger.fire({auto:t.auto,shy:null!==(i=t.shy)&&void 0!==i&&i,position:this._editor.getPosition()}),this._context=d;var u={triggerKind:null!==(n=t.triggerKind)&&void 0!==n?n:0};t.triggerCharacter&&(u={triggerKind:1,triggerCharacter:t.triggerCharacter}),this._requestToken=new h.A;var p=1;switch(this._editor.getOption(106)){case"top":p=0;break;case"bottom":p=2}var f=e._createSuggestFilter(this._editor),_=f.itemKind,v=f.showDeprecated,m=new F.A9(p,null!==(r=null===(o=t.completionOptions)||void 0===o?void 0:o.kindFilter)&&void 0!==r?r:_,null===(s=t.completionOptions)||void 0===s?void 0:s.providerFilter,null===(a=t.completionOptions)||void 0===a?void 0:a.providerItemsToReuse,v),y=q.K.create(this._editorWorkerService,this._editor),b=(0,F.kL)(this._languageFeaturesService.completionProvider,c,this._editor.getPosition(),m,u,this._requestToken.token);Promise.all([b,y]).then((function(e){var i=(0,G.Z)(e,2),n=i[0],o=i[1];return ne(l,void 0,void 0,(0,B.Z)().mark((function e(){var i,r,s,a,l;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(i=this._requestToken)||void 0===i||i.dispose(),this._editor.hasModel()){e.next=3;break}return e.abrupt("return");case 3:if((r=null===t||void 0===t?void 0:t.clipboardText)||!n.needsClipboard){e.next=8;break}return e.next=7,this._clipboardService.readText();case 7:r=e.sent;case 8:if(void 0!==this._triggerState){e.next=10;break}return e.abrupt("return");case 10:s=this._editor.getModel(),a=new oe(s,this._editor.getPosition(),t),l=Object.assign(Object.assign({},ee.mX.default),{firstMatchCanBeWeak:!this._editor.getOption(112).matchOnWordStartOnly}),this._completionModel=new J._(n.items,this._context.column,{leadingLineContent:a.leadingLineContent,characterCountDelta:a.column-this._context.column},o,this._editor.getOption(112),this._editor.getOption(106),l,r),this._completionDisposables.add(n.disposable),this._onNewContext(a),this._reportDurationsTelemetry(n.durations);case 17:case"end":return e.stop()}}),e,this)})))})).catch(g.dL)}}},{key:"_reportDurationsTelemetry",value:function(e){var t=this;this._telemetryGate++%230===0&&setTimeout((function(){t._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),t._logService.debug("suggest.durations.json",e)}))}},{key:"_onNewContext",value:function(e){if(this._context)if(e.lineNumber===this._context.lineNumber)if((0,j.V8)(e.leadingLineContent)===(0,j.V8)(this._context.leadingLineContent)){if(e.column<this._context.column)e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();else if(this._completionModel)if(0!==e.leadingWord.word.length&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(oe.shouldAutoTrigger(this._editor)&&this._context){var t=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:t}})}}else if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&0!==e.leadingWord.word.length){var i,n=new Map,o=new Set,r=(0,s.Z)(this._completionModel.getItemsByProvider());try{for(r.s();!(i=r.n()).done;){var a=(0,G.Z)(i.value,2),l=a[0],c=a[1];c.length>0&&c[0].container.incomplete?o.add(l):n.set(l,c)}}catch(g){r.e(g)}finally{r.f()}this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:o,providerItemsToReuse:n}})}else{var d=this._completionModel.lineContext,u=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},0===this._completionModel.items.length){var h=oe.shouldAutoTrigger(this._editor);if(!this._context)return void this.cancel();if(h&&this._context.leadingWord.endColumn<e.leadingWord.startColumn)return void this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});if(this._context.triggerOptions.auto)return void this.cancel();if(this._completionModel.lineContext=d,(u=this._completionModel.items.length>0)&&0===e.leadingWord.word.length)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:u})}}else this.cancel();else this.cancel()}}],[{key:"_createSuggestFilter",value:function(e){var t=new Set;"none"===e.getOption(106)&&t.add(27);var i=e.getOption(112);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}}]),e}();re=te([ie(1,K.p),ie(2,$.p),ie(3,Y.b),ie(4,Z.VZ),ie(5,T.i6),ie(6,X.Ui),ie(7,Q.p)],re);var se=function(){function e(t,i){var n=this;(0,a.Z)(this,e),this._disposables=new _.SL,this._lastOvertyped=[],this._locked=!1,this._disposables.add(t.onWillType((function(){if(!n._locked&&t.hasModel()){for(var i=t.getSelections(),o=i.length,r=!1,s=0;s<o;s++)if(!i[s].isEmpty()){r=!0;break}if(r){n._lastOvertyped=[];for(var a=t.getModel(),l=0;l<o;l++){var c=i[l];if(a.getValueLengthInRange(c)>e._maxSelectionLength)return;n._lastOvertyped[l]={value:a.getValueInRange(c),multiline:c.startLineNumber!==c.endLineNumber}}}else 0!==n._lastOvertyped.length&&(n._lastOvertyped.length=0)}}))),this._disposables.add(i.onDidTrigger((function(e){n._locked=!0}))),this._disposables.add(i.onDidCancel((function(e){n._locked=!1})))}return(0,l.Z)(e,[{key:"getLastOvertypedInfo",value:function(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}},{key:"dispose",value:function(){this._disposables.dispose()}}]),e}();se._maxSelectionLength=51200;var ae=i(39165),le=(i(69468),i(12830)),ce=i(46679),de=i(88424),ue=i(11752),he=i(61120),ge=i(73694),pe=i(71586),fe=i(54998),_e=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ve=function(e,t){return function(i,n){t(i,n,e)}},me=function(e){(0,n.Z)(i,e);var t=(0,o.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,l.Z)(i,[{key:"updateLabel",value:function(){var e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return(0,ue.Z)((0,he.Z)(i.prototype),"updateLabel",this).call(this);this.label&&(this.label.textContent=(0,M.NC)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,i.symbolPrintEnter(e)))}}],[{key:"symbolPrintEnter",value:function(e){var t;return null===(t=e.getLabel())||void 0===t?void 0:t.replace(/\benter\b/gi,"\u23ce")}}]),i}(pe.Mm),ye=function(){function e(t,i,n,o,r){(0,a.Z)(this,e),this._menuId=i,this._menuService=o,this._contextKeyService=r,this._menuDisposables=new _.SL,this.element=ae.append(t,ae.$(".suggest-status-bar"));var s=function(e){return e instanceof fe.U8?n.createInstance(me,e,void 0):void 0};this._leftActions=new ge.o(this.element,{actionViewItemProvider:s}),this._rightActions=new ge.o(this.element,{actionViewItemProvider:s}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}return(0,l.Z)(e,[{key:"dispose",value:function(){this._menuDisposables.dispose(),this.element.remove()}},{key:"show",value:function(){var e=this,t=this._menuService.createMenu(this._menuId,this._contextKeyService);this._menuDisposables.add(t.onDidChange((function(){return function(){var i,n=[],o=[],a=(0,s.Z)(t.getActions());try{for(a.s();!(i=a.n()).done;){var l=(0,G.Z)(i.value,2),c=l[0],d=l[1];"left"===c?n.push.apply(n,(0,r.Z)(d)):o.push.apply(o,(0,r.Z)(d))}}catch(u){a.e(u)}finally{a.f()}e._leftActions.clear(),e._leftActions.push(n),e._rightActions.clear(),e._rightActions.push(o)}()}))),this._menuDisposables.add(t)}},{key:"hide",value:function(){this._menuDisposables.clear()}}]),e}();ye=_e([ve(2,E.TG),ve(3,fe.co),ve(4,T.i6)],ye);i(56458);var be=i(87327),Se=i(35673),ke=i(71009),we=i(76634),Ce=i(69753),xe=i(19285),Ne=i(34922),De=i(95696),Le=i(31022),Te=i(49719),Re=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ie=function(e,t){return function(i,n){t(i,n,e)}};function Pe(e){return!!e&&Boolean(e.completion.documentation||e.completion.detail&&e.completion.detail!==e.completion.label)}var Me=function(){function e(t,i){var n=this;(0,a.Z)(this,e),this._editor=t,this._onDidClose=new p.Q5,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new p.Q5,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new _.SL,this._renderDisposeable=new _.SL,this._borderWidth=1,this._size=new ae.Dimension(330,0),this.domNode=ae.$(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=i.createInstance(Te.$,{editor:t}),this._body=ae.$(".body"),this._scrollbar=new xe.s$(this._body,{alwaysConsumeMouseWheel:!0}),ae.append(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=ae.append(this._body,ae.$(".header")),this._close=ae.append(this._header,ae.$("span"+De.k.asCSSSelector(Ne.l.close))),this._close.title=M.NC("details.close","Close"),this._type=ae.append(this._header,ae.$("p.type")),this._docs=ae.append(this._body,ae.$("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration((function(e){e.hasChanged(47)&&n._configureFont()})))}return(0,l.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._renderDisposeable.dispose()}},{key:"_configureFont",value:function(){var e=this._editor.getOptions(),t=e.get(47),i=t.getMassagedFontFamily(),n=e.get(113)||t.fontSize,o=e.get(114)||t.lineHeight,r=t.fontWeight,s="".concat(n,"px"),a="".concat(o,"px");this.domNode.style.fontSize=s,this.domNode.style.lineHeight="".concat(o/n),this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=a,this._close.style.width=a}},{key:"getLayoutInfo",value:function(){var e=this._editor.getOption(114)||this._editor.getOption(47).lineHeight,t=this._borderWidth;return{lineHeight:e,borderWidth:t,borderHeight:2*t,verticalPadding:22,horizontalPadding:14}}},{key:"renderLoading",value:function(){this._type.textContent=M.NC("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,2*this.getLayoutInfo().lineHeight),this._onDidChangeContents.fire(this)}},{key:"renderItem",value:function(e,t){var i,n,o=this;this._renderDisposeable.clear();var r=e.completion,s=r.detail,a=r.documentation;if(t){var l="";l+="score: ".concat(e.score[0],"\n"),l+="prefix: ".concat(null!==(i=e.word)&&void 0!==i?i:"(no prefix)","\n"),l+="word: ".concat(e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel,"\n"),l+="distance: ".concat(e.distance," (localityBonus-setting)\n"),l+="index: ".concat(e.idx,", based on ").concat(e.completion.sortText&&'sortText: "'.concat(e.completion.sortText,'"')||"label","\n"),l+="commit_chars: ".concat(null===(n=e.completion.commitCharacters)||void 0===n?void 0:n.join(""),"\n"),a=(new Le.W5).appendCodeblock("empty",l),s="Provider: ".concat(e.provider._debugDisplayName)}if(t||Pe(e)){if(this.domNode.classList.remove("no-docs","no-type"),s){var c=s.length>1e5?"".concat(s.substr(0,1e5),"\u2026"):s;this._type.textContent=c,this._type.title=c,ae.show(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gim.test(c))}else ae.clearNode(this._type),this._type.title="",ae.hide(this._type),this.domNode.classList.add("no-type");if(ae.clearNode(this._docs),"string"===typeof a)this._docs.classList.remove("markdown-docs"),this._docs.textContent=a;else if(a){this._docs.classList.add("markdown-docs"),ae.clearNode(this._docs);var d=this._markdownRenderer.render(a);this._docs.appendChild(d.element),this._renderDisposeable.add(d),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync((function(){o.layout(o._size.width,o._type.clientHeight+o._docs.clientHeight),o._onDidChangeContents.fire(o)})))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=function(e){e.preventDefault(),e.stopPropagation()},this._close.onclick=function(e){e.preventDefault(),e.stopPropagation(),o._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}else this.clearContents()}},{key:"clearContents",value:function(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}},{key:"size",get:function(){return this._size}},{key:"layout",value:function(e,t){var i=new ae.Dimension(e,t);ae.Dimension.equals(i,this._size)||(this._size=i,ae.size(this.domNode,e,t)),this._scrollbar.scanDomNode()}},{key:"scrollDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;this._body.scrollTop+=e}},{key:"scrollUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;this._body.scrollTop-=e}},{key:"scrollTop",value:function(){this._body.scrollTop=0}},{key:"scrollBottom",value:function(){this._body.scrollTop=this._body.scrollHeight}},{key:"pageDown",value:function(){this.scrollDown(80)}},{key:"pageUp",value:function(){this.scrollUp(80)}},{key:"borderWidth",get:function(){return this._borderWidth},set:function(e){this._borderWidth=e}}]),e}();Me=Re([Ie(1,E.TG)],Me);var Oe,Ee=function(){function e(t,i){var n,o,r=this;(0,a.Z)(this,e),this.widget=t,this._editor=i,this._disposables=new _.SL,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new Ce.f,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(t.domNode),this._resizable.enableSashes(!1,!0,!0,!1);var s=0,l=0;this._disposables.add(this._resizable.onDidWillResize((function(){n=r._topLeft,o=r._resizable.size}))),this._disposables.add(this._resizable.onDidResize((function(e){if(n&&o){r.widget.layout(e.dimension.width,e.dimension.height);var t=!1;e.west&&(l=o.width-e.dimension.width,t=!0),e.north&&(s=o.height-e.dimension.height,t=!0),t&&r._applyTopLeft({top:n.top+s,left:n.left+l})}e.done&&(n=void 0,o=void 0,s=0,l=0,r._userSize=e.dimension)}))),this._disposables.add(this.widget.onDidChangeContents((function(){var e;r._anchorBox&&r._placeAtAnchor(r._anchorBox,null!==(e=r._userSize)&&void 0!==e?e:r.widget.size,r._preferAlignAtTop)})))}return(0,l.Z)(e,[{key:"dispose",value:function(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}},{key:"getId",value:function(){return"suggest.details"}},{key:"getDomNode",value:function(){return this._resizable.domNode}},{key:"getPosition",value:function(){return null}},{key:"show",value:function(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}},{key:"placeAtAnchor",value:function(e,t){var i,n=e.getBoundingClientRect();this._anchorBox=n,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,null!==(i=this._userSize)&&void 0!==i?i:this.widget.size,t)}},{key:"_placeAtAnchor",value:function(e,t,i){var n,o,r,s=ae.getClientArea(document.body),a=this.widget.getLayoutInfo(),l=new ae.Dimension(220,2*a.lineHeight),c=e.top,d=function(){var i=s.width-(e.left+e.width+a.borderWidth+a.horizontalPadding),n=-a.borderWidth+e.left+e.width,o=new ae.Dimension(i,s.height-e.top-a.borderHeight-a.verticalPadding),r=o.with(void 0,e.top+e.height-a.borderHeight-a.verticalPadding);return{top:c,left:n,fit:i-t.width,maxSizeTop:o,maxSizeBottom:r,minSize:l.with(Math.min(i,l.width))}}(),u=[d,function(){var i=e.left-a.borderWidth-a.horizontalPadding,n=Math.max(a.horizontalPadding,e.left-t.width-a.borderWidth),o=new ae.Dimension(i,s.height-e.top-a.borderHeight-a.verticalPadding),r=o.with(void 0,e.top+e.height-a.borderHeight-a.verticalPadding);return{top:c,left:n,fit:i-t.width,maxSizeTop:o,maxSizeBottom:r,minSize:l.with(Math.min(i,l.width))}}(),function(){var i=e.left,n=-a.borderWidth+e.top+e.height,o=new ae.Dimension(e.width-a.borderHeight,s.height-e.top-e.height-a.verticalPadding);return{top:n,left:i,fit:o.height-t.height,maxSizeBottom:o,maxSizeTop:o,minSize:l.with(o.width)}}()],h=null!==(n=u.find((function(e){return e.fit>=0})))&&void 0!==n?n:u.sort((function(e,t){return t.fit-e.fit}))[0],g=e.top+e.height-a.borderHeight,p=t.height,f=Math.max(h.maxSizeTop.height,h.maxSizeBottom.height);p>f&&(p=f),i?p<=h.maxSizeTop.height?(o=!0,r=h.maxSizeTop):(o=!1,r=h.maxSizeBottom):p<=h.maxSizeBottom.height?(o=!1,r=h.maxSizeBottom):(o=!0,r=h.maxSizeTop),this._applyTopLeft({left:h.left,top:o?h.top:g-p}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!o,h===d,o,h!==d),this._resizable.minSize=h.minSize,this._resizable.maxSize=r,this._resizable.layout(p,Math.min(r.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}},{key:"_applyTopLeft",value:function(e){this._topLeft=e,this.getDomNode().style.left="".concat(this._topLeft.left,"px"),this.getDomNode().style.top="".concat(this._topLeft.top,"px")}}]),e}(),Ze=i(45885),Fe=i(97638),Ae=i(33752),ze=i(35228),We=i(19920),Ve=i(43954),He=i(6103),Be=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ge=function(e,t){return function(i,n){t(i,n,e)}};function je(e){return"suggest-aria-id:".concat(e)}var Ue=(0,i(47825).q5)("suggest-more-info",Ne.l.chevronRight,M.NC("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),Ke=new((Oe=function(){function e(){(0,a.Z)(this,e)}return(0,l.Z)(e,[{key:"extract",value:function(t,i){if(t.textLabel.match(e._regexStrict))return i[0]=t.textLabel,!0;if(t.completion.detail&&t.completion.detail.match(e._regexStrict))return i[0]=t.completion.detail,!0;if("string"===typeof t.completion.documentation){var n=e._regexRelaxed.exec(t.completion.documentation);if(n&&(0===n.index||n.index+n[0].length===t.completion.documentation.length))return i[0]=n[0],!0}return!1}}]),e}())._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,Oe._regexStrict=new RegExp("^".concat(Oe._regexRelaxed.source,"$"),"i"),Oe),qe=function(){function e(t,i,n,o){(0,a.Z)(this,e),this._editor=t,this._modelService=i,this._languageService=n,this._themeService=o,this._onDidToggleDetails=new p.Q5,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}return(0,l.Z)(e,[{key:"dispose",value:function(){this._onDidToggleDetails.dispose()}},{key:"renderTemplate",value:function(e){var t=this,i=new _.SL,n=e;n.classList.add("show-file-icons");var o=(0,ae.append)(e,(0,ae.$)(".icon")),r=(0,ae.append)(o,(0,ae.$)("span.colorspan")),s=(0,ae.append)(e,(0,ae.$)(".contents")),a=(0,ae.append)(s,(0,ae.$)(".main")),l=(0,ae.append)(a,(0,ae.$)(".icon-label.codicon")),c=(0,ae.append)(a,(0,ae.$)("span.left")),d=(0,ae.append)(a,(0,ae.$)("span.right")),u=new Ze.g(c,{supportHighlights:!0,supportIcons:!0});i.add(u);var h=(0,ae.append)(c,(0,ae.$)("span.signature-label")),g=(0,ae.append)(c,(0,ae.$)("span.qualifier-label")),p=(0,ae.append)(d,(0,ae.$)("span.details-label")),f=(0,ae.append)(d,(0,ae.$)("span.readMore"+De.k.asCSSSelector(Ue)));f.title=M.NC("readMore","Read More");var v=function(){var e=t._editor.getOptions(),i=e.get(47),r=i.getMassagedFontFamily(),s=i.fontFeatureSettings,l=e.get(113)||i.fontSize,c=e.get(114)||i.lineHeight,d=i.fontWeight,u=i.letterSpacing,h="".concat(l,"px"),g="".concat(c,"px"),p="".concat(u,"px");n.style.fontSize=h,n.style.fontWeight=d,n.style.letterSpacing=p,a.style.fontFamily=r,a.style.fontFeatureSettings=s,a.style.lineHeight=g,o.style.height=g,o.style.width=g,f.style.height=g,f.style.width=g};return v(),i.add(this._editor.onDidChangeConfiguration((function(e){(e.hasChanged(47)||e.hasChanged(113)||e.hasChanged(114))&&v()}))),{root:n,left:c,right:d,icon:o,colorspan:r,iconLabel:u,iconContainer:l,parametersLabel:h,qualifierLabel:g,detailsLabel:p,readMore:f,disposables:i}}},{key:"renderElement",value:function(e,t,i){var n=this,o=e.completion;i.root.id=je(t),i.colorspan.style.backgroundColor="";var s={labelEscapeNewLines:!0,matches:(0,ee.mB)(e.score)},a=[];if(19===o.kind&&Ke.extract(e,a))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=a[0];else if(20===o.kind&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";var l=(0,ze.r)(this._modelService,this._languageService,Fe.o.from({scheme:"fake",path:e.textLabel}),He.R.FILE),c=(0,ze.r)(this._modelService,this._languageService,Fe.o.from({scheme:"fake",path:o.detail}),He.R.FILE);s.extraClasses=l.length>c.length?l:c}else if(23===o.kind&&this._themeService.getFileIconTheme().hasFolderIcons)i.icon.className="icon hide",i.iconContainer.className="icon hide",s.extraClasses=[(0,ze.r)(this._modelService,this._languageService,Fe.o.from({scheme:"fake",path:e.textLabel}),He.R.FOLDER),(0,ze.r)(this._modelService,this._languageService,Fe.o.from({scheme:"fake",path:o.detail}),He.R.FOLDER)].flat();else{var d;i.icon.className="icon hide",i.iconContainer.className="",(d=i.iconContainer.classList).add.apply(d,["suggest-icon"].concat((0,r.Z)(De.k.asClassNameArray(Ae.gX.toIcon(o.kind)))))}o.tags&&o.tags.indexOf(1)>=0&&(s.extraClasses=(s.extraClasses||[]).concat(["deprecated"]),s.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,s),"string"===typeof o.label?(i.parametersLabel.textContent="",i.detailsLabel.textContent=$e(o.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=$e(o.label.detail||""),i.detailsLabel.textContent=$e(o.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(112).showInlineDetails?(0,ae.show)(i.detailsLabel):(0,ae.hide)(i.detailsLabel),Pe(e)?(i.right.classList.add("can-expand-details"),(0,ae.show)(i.readMore),i.readMore.onmousedown=function(e){e.stopPropagation(),e.preventDefault()},i.readMore.onclick=function(e){e.stopPropagation(),e.preventDefault(),n._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),(0,ae.hide)(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}},{key:"disposeTemplate",value:function(e){e.disposables.dispose()}}]),e}();function $e(e){return e.replace(/\r\n|\r|\n/g,"")}qe=Be([Ge(1,We.q),Ge(2,Ve.O),Ge(3,we.XE)],qe);var Xe=i(76512),Ye=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Je=function(e,t){return function(i,n){t(i,n,e)}},Qe=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};(0,Se.P6G)("editorSuggestWidget.background",{dark:Se.D0T,light:Se.D0T,hcDark:Se.D0T,hcLight:Se.D0T},M.NC("editorSuggestWidgetBackground","Background color of the suggest widget.")),(0,Se.P6G)("editorSuggestWidget.border",{dark:Se.D1_,light:Se.D1_,hcDark:Se.D1_,hcLight:Se.D1_},M.NC("editorSuggestWidgetBorder","Border color of the suggest widget."));var et=(0,Se.P6G)("editorSuggestWidget.foreground",{dark:Se.NOs,light:Se.NOs,hcDark:Se.NOs,hcLight:Se.NOs},M.NC("editorSuggestWidgetForeground","Foreground color of the suggest widget."));(0,Se.P6G)("editorSuggestWidget.selectedForeground",{dark:Se.NPS,light:Se.NPS,hcDark:Se.NPS,hcLight:Se.NPS},M.NC("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),(0,Se.P6G)("editorSuggestWidget.selectedIconForeground",{dark:Se.cbQ,light:Se.cbQ,hcDark:Se.cbQ,hcLight:Se.cbQ},M.NC("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));var tt=(0,Se.P6G)("editorSuggestWidget.selectedBackground",{dark:Se.Vqd,light:Se.Vqd,hcDark:Se.Vqd,hcLight:Se.Vqd},M.NC("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));(0,Se.P6G)("editorSuggestWidget.highlightForeground",{dark:Se.Gwp,light:Se.Gwp,hcDark:Se.Gwp,hcLight:Se.Gwp},M.NC("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),(0,Se.P6G)("editorSuggestWidget.focusHighlightForeground",{dark:Se.PX0,light:Se.PX0,hcDark:Se.PX0,hcLight:Se.PX0},M.NC("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused.")),(0,Se.P6G)("editorSuggestWidgetStatus.foreground",{dark:(0,Se.ZnX)(et,.5),light:(0,Se.ZnX)(et,.5),hcDark:(0,Se.ZnX)(et,.5),hcLight:(0,Se.ZnX)(et,.5)},M.NC("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));var it=function(){function e(t,i){(0,a.Z)(this,e),this._service=t,this._key="suggestWidget.size/".concat(i.getEditorType(),"/").concat(i instanceof de.H)}return(0,l.Z)(e,[{key:"restore",value:function(){var e,t=null!==(e=this._service.get(this._key,0))&&void 0!==e?e:"";try{var i=JSON.parse(t);if(ae.Dimension.is(i))return ae.Dimension.lift(i)}catch(n){}}},{key:"store",value:function(e){this._service.store(this._key,JSON.stringify(e),0,1)}},{key:"reset",value:function(){this._service.remove(this._key,0)}}]),e}(),nt=function(){function e(t,i,n,o,r){var s=this;(0,a.Z)(this,e),this.editor=t,this._storageService=i,this._state=0,this._isAuto=!1,this._pendingLayout=new _.XK,this._pendingShowDetails=new _.XK,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new u._F,this._disposables=new _.SL,this._onDidSelect=new p.K3,this._onDidFocus=new p.K3,this._onDidHide=new p.Q5,this._onDidShow=new p.Q5,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new p.Q5,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new Ce.f,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new ot(this,t),this._persistedSize=new it(i,t);var c,d=(0,l.Z)((function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,a.Z)(this,e),this.persistedSize=t,this.currentSize=i,this.persistHeight=n,this.persistWidth=o}));this._disposables.add(this.element.onDidWillResize((function(){s._contentWidget.lockPreference(),c=new d(s._persistedSize.restore(),s.element.size)}))),this._disposables.add(this.element.onDidResize((function(e){var t,i,n,o;if(s._resize(e.dimension.width,e.dimension.height),c&&(c.persistHeight=c.persistHeight||!!e.north||!!e.south,c.persistWidth=c.persistWidth||!!e.east||!!e.west),e.done){if(c){var r=s.getLayoutInfo(),a=r.itemHeight,l=r.defaultSize,d=Math.round(a/2),u=s.element.size,h=u.width,g=u.height;(!c.persistHeight||Math.abs(c.currentSize.height-g)<=d)&&(g=null!==(i=null===(t=c.persistedSize)||void 0===t?void 0:t.height)&&void 0!==i?i:l.height),(!c.persistWidth||Math.abs(c.currentSize.width-h)<=d)&&(h=null!==(o=null===(n=c.persistedSize)||void 0===n?void 0:n.width)&&void 0!==o?o:l.width),s._persistedSize.store(new ae.Dimension(h,g))}s._contentWidget.unlockPreference(),c=void 0}}))),this._messageElement=ae.append(this.element.domNode,ae.$(".message")),this._listElement=ae.append(this.element.domNode,ae.$(".tree"));var h=r.createInstance(Me,this.editor);h.onDidClose(this.toggleDetails,this,this._disposables),this._details=new Ee(h,this.editor);var g=function(){return s.element.domNode.classList.toggle("no-icons",!s.editor.getOption(112).showIcons)};g();var f=r.createInstance(qe,this.editor);this._disposables.add(f),this._disposables.add(f.onDidToggleDetails((function(){return s.toggleDetails()}))),this._list=new le.aV("SuggestWidget",this._listElement,{getHeight:function(e){return s.getLayoutInfo().itemHeight},getTemplateId:function(e){return"suggestion"}},[f],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:function(){return"option"},getWidgetAriaLabel:function(){return M.NC("suggest","Suggest")},getWidgetRole:function(){return"listbox"},getAriaLabel:function(e){var t=e.textLabel;if("string"!==typeof e.completion.label){var i=e.completion.label,n=i.detail,o=i.description;n&&o?t=M.NC("label.full","{0}{1}, {2}",t,n,o):n?t=M.NC("label.detail","{0}{1}",t,n):o&&(t=M.NC("label.desc","{0}, {1}",t,o))}if(!e.isResolved||!s._isDetailsVisible())return t;var r=e.completion,a=r.documentation,l=r.detail,c=j.WU("{0}{1}",l||"",a?"string"===typeof a?a:a.value:"");return M.NC("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",t,c)}}}),this._list.style((0,Xe.TU)({listInactiveFocusBackground:tt,listInactiveFocusOutline:Se.xL1})),this._status=r.createInstance(ye,this.element.domNode,F.GI);var v=function(){return s.element.domNode.classList.toggle("with-status-bar",s.editor.getOption(112).showStatusBar)};v(),this._disposables.add(o.onDidColorThemeChange((function(e){return s._onThemeChange(e)}))),this._onThemeChange(o.getColorTheme()),this._disposables.add(this._list.onMouseDown((function(e){return s._onListMouseDownOrTap(e)}))),this._disposables.add(this._list.onTap((function(e){return s._onListMouseDownOrTap(e)}))),this._disposables.add(this._list.onDidChangeSelection((function(e){return s._onListSelection(e)}))),this._disposables.add(this._list.onDidChangeFocus((function(e){return s._onListFocus(e)}))),this._disposables.add(this.editor.onDidChangeCursorSelection((function(){return s._onCursorSelectionChanged()}))),this._disposables.add(this.editor.onDidChangeConfiguration((function(e){e.hasChanged(112)&&(v(),g())}))),this._ctxSuggestWidgetVisible=F._y.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=F._y.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=F._y.MultipleSuggestions.bindTo(n),this._ctxSuggestWidgetHasFocusedSuggestion=F._y.HasFocusedSuggestion.bindTo(n),this._disposables.add(ae.addStandardDisposableListener(this._details.widget.domNode,"keydown",(function(e){s._onDetailsKeydown.fire(e)}))),this._disposables.add(this.editor.onMouseDown((function(e){return s._onEditorMouseDown(e)})))}return(0,l.Z)(e,[{key:"dispose",value:function(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}},{key:"_onEditorMouseDown",value:function(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}},{key:"_onCursorSelectionChanged",value:function(){0!==this._state&&this._contentWidget.layout()}},{key:"_onListMouseDownOrTap",value:function(e){"undefined"!==typeof e.element&&"undefined"!==typeof e.index&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}},{key:"_onListSelection",value:function(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}},{key:"_select",value:function(e,t){var i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}},{key:"_onThemeChange",value:function(e){this._details.widget.borderWidth=(0,ke.c3)(e.type)?2:1}},{key:"_onListFocus",value:function(e){var t,i=this;if(!this._ignoreFocusEvents){if(!e.elements.length)return this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),void this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);if(this._completionModel){this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);var n=e.elements[0],o=e.indexes[0];n!==this._focusedItem&&(null===(t=this._currentSuggestionDetails)||void 0===t||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(o),this._currentSuggestionDetails=(0,u.PG)((function(e){return Qe(i,void 0,void 0,(0,B.Z)().mark((function t(){var i,o,r,s=this;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=(0,u.Vg)((function(){s._isDetailsVisible()&&s.showDetails(!0)}),250),o=e.onCancellationRequested((function(){return i.dispose()})),t.next=4,n.resolve(e);case 4:return r=t.sent,i.dispose(),o.dispose(),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})))})),this._currentSuggestionDetails.then((function(){o>=i._list.length||n!==i._list.element(o)||(i._ignoreFocusEvents=!0,i._list.splice(o,1,[n]),i._list.setFocus([o]),i._ignoreFocusEvents=!1,i._isDetailsVisible()?i.showDetails(!1):i.element.domNode.classList.remove("docs-side"),i.editor.setAriaOptions({activeDescendant:je(o)}))})).catch(g.dL)),this._onDidFocus.fire({item:n,index:o,model:this._completionModel})}}}},{key:"_setState",value:function(t){if(this._state!==t)switch(this._state=t,this.element.domNode.classList.toggle("frozen",4===t),this.element.domNode.classList.remove("message"),t){case 0:ae.hide(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=e.LOADING_MESSAGE,ae.hide(this._listElement,this._status.element),ae.show(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=e.NO_SUGGESTIONS_MESSAGE,ae.hide(this._listElement,this._status.element),ae.show(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:case 4:ae.hide(this._messageElement),ae.show(this._listElement,this._status.element),this._show();break;case 5:ae.hide(this._messageElement),ae.show(this._listElement,this._status.element),this._details.show(),this._show()}}},{key:"_show",value:function(){var e=this;this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet((function(){e.element.domNode.classList.add("visible"),e._onDidShow.fire(e)}),100)}},{key:"showTriggered",value:function(e,t){var i=this;0===this._state&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=(0,u.Vg)((function(){return i._setState(1)}),t)))}},{key:"showSuggestions",value:function(e,t,i,n,o){var r,s,a=this;if(this._contentWidget.setPosition(this.editor.getPosition()),null===(r=this._loadingTimeout)||void 0===r||r.dispose(),null===(s=this._currentSuggestionDetails)||void 0===s||s.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&2!==this._state&&0!==this._state)this._setState(4);else{var l=this._completionModel.items.length,c=0===l;if(this._ctxSuggestWidgetMultipleSuggestions.set(l>1),c)return this._setState(n?0:2),void(this._completionModel=void 0);this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus(o?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=ae.runAtThisOrScheduleAtNextAnimationFrame((function(){a._pendingLayout.clear(),a._layout(a.element.size),a._details.widget.domNode.classList.remove("focused")}))}}},{key:"focusSelected",value:function(){this._list.length>0&&this._list.setFocus([0])}},{key:"selectNextPage",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}},{key:"selectNext",value:function(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}},{key:"selectLast",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}},{key:"selectPreviousPage",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}},{key:"selectPrevious",value:function(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}},{key:"selectFirst",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}},{key:"getFocusedItem",value:function(){if(0!==this._state&&2!==this._state&&1!==this._state&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}},{key:"toggleDetailsFocus",value:function(){5===this._state?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):3===this._state&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}},{key:"toggleDetails",value:function(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):!Pe(this._list.getFocusedElements()[0])&&!this._explainMode||3!==this._state&&5!==this._state&&4!==this._state||(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}},{key:"showDetails",value:function(e){var t=this;this._pendingShowDetails.value=ae.runAtThisOrScheduleAtNextAnimationFrame((function(){t._pendingShowDetails.clear(),t._details.show(),e?t._details.widget.renderLoading():t._details.widget.renderItem(t._list.getFocusedElements()[0],t._explainMode),t._positionDetails(),t.editor.focus(),t.element.domNode.classList.add("shows-details")}))}},{key:"toggleExplainMode",value:function(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}},{key:"resetPersistedSize",value:function(){this._persistedSize.reset()}},{key:"hideWidget",value:function(){var e;this._pendingLayout.clear(),this._pendingShowDetails.clear(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();var t=this._persistedSize.restore(),i=Math.ceil(4.3*this.getLayoutInfo().itemHeight);t&&t.height<i&&this._persistedSize.store(t.with(void 0,i))}},{key:"isFrozen",value:function(){return 4===this._state}},{key:"_afterRender",value:function(e){null!==e?2!==this._state&&1!==this._state&&(this._isDetailsVisible()&&this._details.show(),this._positionDetails()):this._isDetailsVisible()&&this._details.hide()}},{key:"_layout",value:function(e){var t,i,n;if(this.editor.hasModel()&&this.editor.getDomNode()){var o=ae.getClientArea(document.body),r=this.getLayoutInfo();e||(e=r.defaultSize);var s=e.height,a=e.width;if(this._status.element.style.height="".concat(r.itemHeight,"px"),2===this._state||1===this._state)s=r.itemHeight+r.borderHeight,a=r.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new ae.Dimension(a,s),this._contentWidget.setPreference(2);else{var l=o.width-r.borderHeight-2*r.horizontalPadding;a>l&&(a=l);var c=this._completionModel?this._completionModel.stats.pLabelLen*r.typicalHalfwidthCharacterWidth:a,d=r.statusBarHeight+this._list.contentHeight+r.borderHeight,u=r.itemHeight+r.statusBarHeight,h=ae.getDomNodePagePosition(this.editor.getDomNode()),g=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),p=h.top+g.top+g.height,f=Math.min(o.height-p-r.verticalPadding,d),_=h.top+g.top-r.verticalPadding,v=Math.min(_,d),m=Math.min(Math.max(v,f)+r.borderHeight,d);s===(null===(t=this._cappedHeight)||void 0===t?void 0:t.capped)&&(s=this._cappedHeight.wanted),s<u&&(s=u),s>m&&(s=m);s>f||this._forceRenderingAbove&&_>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),m=v):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),m=f),this.element.preferredSize=new ae.Dimension(c,r.defaultSize.height),this.element.maxSize=new ae.Dimension(l,m),this.element.minSize=new ae.Dimension(220,u),this._cappedHeight=s===d?{wanted:null!==(n=null===(i=this._cappedHeight)||void 0===i?void 0:i.wanted)&&void 0!==n?n:e.height,capped:s}:void 0}this._resize(a,s)}}},{key:"_resize",value:function(e,t){var i=this.element.maxSize,n=i.width,o=i.height;e=Math.min(n,e),t=Math.min(o,t);var r=this.getLayoutInfo().statusBarHeight;this._list.layout(t-r,e),this._listElement.style.height="".concat(t-r,"px"),this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}},{key:"_positionDetails",value:function(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,2===(null===(e=this._contentWidget.getPosition())||void 0===e?void 0:e.preference[0]))}},{key:"getLayoutInfo",value:function(){var e=this.editor.getOption(47),t=(0,ce.uZ)(this.editor.getOption(114)||e.lineHeight,8,1e3),i=this.editor.getOption(112).showStatusBar&&2!==this._state&&1!==this._state?t:0,n=this._details.widget.borderWidth,o=2*n;return{itemHeight:t,statusBarHeight:i,borderWidth:n,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new ae.Dimension(430,i+12*t+o)}}},{key:"_isDetailsVisible",value:function(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}},{key:"_setDetailsVisible",value:function(e){this._storageService.store("expandSuggestionDocs",e,0,0)}},{key:"forceRenderingAbove",value:function(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}},{key:"stopForceRenderingAbove",value:function(){this._forceRenderingAbove=!1}}]),e}();nt.LOADING_MESSAGE=M.NC("suggestWidget.loading","Loading..."),nt.NO_SUGGESTIONS_MESSAGE=M.NC("suggestWidget.noSuggestions","No suggestions."),nt=Ye([Je(1,be.Uy),Je(2,T.i6),Je(3,we.XE),Je(4,E.TG)],nt);var ot=function(){function e(t,i){(0,a.Z)(this,e),this._widget=t,this._editor=i,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}return(0,l.Z)(e,[{key:"dispose",value:function(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}},{key:"getId",value:function(){return"editor.widget.suggestWidget"}},{key:"getDomNode",value:function(){return this._widget.element.domNode}},{key:"show",value:function(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}},{key:"hide",value:function(){this._hidden||(this._hidden=!0,this.layout())}},{key:"layout",value:function(){this._editor.layoutContentWidget(this)}},{key:"getPosition",value:function(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null}},{key:"beforeRender",value:function(){var e=this._widget.element.size,t=e.height,i=e.width,n=this._widget.getLayoutInfo(),o=n.borderWidth,r=n.horizontalPadding;return new ae.Dimension(i+2*o+r,t+2*o)}},{key:"afterRender",value:function(e){this._widget._afterRender(e)}},{key:"setPreference",value:function(e){this._preferenceLocked||(this._preference=e)}},{key:"lockPreference",value:function(){this._preferenceLocked=!0}},{key:"unlockPreference",value:function(){this._preferenceLocked=!1}},{key:"setPosition",value:function(e){this._position=e}}]),e}(),rt=i(87558),st=i(87328),at=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},lt=function(e,t){return function(i,n){t(i,n,e)}},ct=function(){function e(t,i){if((0,a.Z)(this,e),this._model=t,this._position=i,t.getLineMaxColumn(i.lineNumber)!==i.column){var n=t.getOffsetAt(i),o=t.getPositionAt(n+1);this._marker=t.deltaDecorations([],[{range:C.e.fromPositions(i,o),options:{description:"suggest-line-suffix",stickiness:1}}])}}return(0,l.Z)(e,[{key:"dispose",value:function(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}},{key:"delta",value:function(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){var t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}return this._model.getLineMaxColumn(e.lineNumber)-e.column}}]),e}(),dt=function(){function e(t,i,n,o,r,l,c){var d=this;(0,a.Z)(this,e),this._memoryService=i,this._commandService=n,this._contextKeyService=o,this._instantiationService=r,this._logService=l,this._telemetryService=c,this._lineSuffix=new _.XK,this._toDispose=new _.SL,this._selectors=new ut((function(e){return e.priority})),this._telemetryGate=0,this.editor=t,this.model=r.createInstance(re,this.editor),this._selectors.register({priority:0,select:function(e,t,i){return d._memoryService.select(e,t,i)}});var h=F._y.InsertMode.bindTo(o);h.set(t.getOption(112).insertMode),this.model.onDidTrigger((function(){return h.set(t.getOption(112).insertMode)})),this.widget=this._toDispose.add(new u.Ue((function(){var e=d._instantiationService.createInstance(nt,d.editor);d._toDispose.add(e),d._toDispose.add(e.onDidSelect((function(e){return d._insertSuggestion(e,0)}),d));var t=new H(d.editor,e,d.model,(function(e){return d._insertSuggestion(e,2)}));d._toDispose.add(t);var i=F._y.MakesTextEdit.bindTo(d._contextKeyService),n=F._y.HasInsertAndReplaceRange.bindTo(d._contextKeyService),o=F._y.CanResolve.bindTo(d._contextKeyService);return d._toDispose.add((0,_.OF)((function(){i.reset(),n.reset(),o.reset()}))),d._toDispose.add(e.onDidFocus((function(e){var t=e.item,r=d.editor.getPosition(),s=t.editStart.column,a=r.column,l=!0;"smart"!==d.editor.getOption(1)||2!==d.model.state||t.completion.additionalTextEdits||4&t.completion.insertTextRules||a-s!==t.completion.insertText.length||(l=d.editor.getModel().getValueInRange({startLineNumber:r.lineNumber,startColumn:s,endLineNumber:r.lineNumber,endColumn:a})!==t.completion.insertText);i.set(l),n.set(!w.L.equals(t.editInsertEnd,t.editReplaceEnd)),o.set(Boolean(t.provider.resolveCompletionItem)||Boolean(t.completion.documentation)||t.completion.detail!==t.completion.label)}))),d._toDispose.add(e.onDetailsKeyDown((function(e){e.toKeyCodeChord().equals(new f.$M(!0,!1,!1,!1,33))||v.dz&&e.toKeyCodeChord().equals(new f.$M(!1,!1,!1,!0,33))?e.stopPropagation():e.toKeyCodeChord().isModifierKey()||d.editor.focus()}))),e}))),this._overtypingCapturer=this._toDispose.add(new u.Ue((function(){return d._toDispose.add(new se(d.editor,d.model))}))),this._alternatives=this._toDispose.add(new u.Ue((function(){return d._toDispose.add(new W(d.editor,d._contextKeyService))}))),this._toDispose.add(r.createInstance(P,t)),this._toDispose.add(this.model.onDidTrigger((function(e){d.widget.value.showTriggered(e.auto,e.shy?250:50),d._lineSuffix.value=new ct(d.editor.getModel(),e.position)}))),this._toDispose.add(this.model.onDidSuggest((function(e){var t;if(!e.triggerOptions.shy){var i,n=-1,o=(0,s.Z)(d._selectors.itemsOrderedByPriorityDesc);try{for(o.s();!(i=o.n()).done;){if(-1!==(n=i.value.select(d.editor.getModel(),d.editor.getPosition(),e.completionModel.items)))break}}catch(l){o.e(l)}finally{o.f()}-1===n&&(n=0);var r=!1;if(e.triggerOptions.auto){var a=d.editor.getOption(112);a.snippetsPreventQuickSuggestions&&(null===(t=N.f.get(d.editor))||void 0===t?void 0:t.isInSnippet())?r=!0:"never"===a.selectionMode||"always"===a.selectionMode?r="never"===a.selectionMode:"whenTriggerCharacter"===a.selectionMode?r=1!==e.triggerOptions.triggerKind:"whenQuickSuggestion"===a.selectionMode&&(r=1===e.triggerOptions.triggerKind&&!e.triggerOptions.refilter)}d.widget.value.showSuggestions(e.completionModel,n,e.isFrozen,e.triggerOptions.auto,r)}}))),this._toDispose.add(this.model.onDidCancel((function(e){e.retrigger||d.widget.value.hideWidget()}))),this._toDispose.add(this.editor.onDidBlurEditorWidget((function(){d.model.cancel(),d.model.clear()})));var g=F._y.AcceptSuggestionsOnEnter.bindTo(o),p=function(){var e=d.editor.getOption(1);g.set("on"===e||"smart"===e)};this._toDispose.add(this.editor.onDidChangeConfiguration((function(){return p()}))),p()}return(0,l.Z)(e,[{key:"dispose",value:function(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}},{key:"_insertSuggestion",value:function(e,t){var i=this;if(!e||!e.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(this.editor.hasModel()){var n=N.f.get(this.editor);if(n){var o=this.editor.getModel(),a=o.getAlternativeVersionId(),l=e.item,c=[],d=new h.A;1&t||this.editor.pushUndoStop();var u=this.getOverwriteInfo(l,Boolean(8&t));if(this._memoryService.memorize(o,this.editor.getPosition(),l),Array.isArray(l.completion.additionalTextEdits)){var p=b.Z.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",l.completion.additionalTextEdits.map((function(e){return k.h.replaceMove(C.e.lift(e.range),e.text)}))),p.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!l.isResolved){var f,_=new m.G(!0),v=o.onDidChangeContent((function(e){if(e.isFlush)return d.cancel(),void v.dispose();var t,i=(0,s.Z)(e.changes);try{for(i.s();!(t=i.n()).done;){var n=t.value,o=C.e.getEndPosition(n.range);f&&!w.L.isBefore(o,f)||(f=o)}}catch(r){i.e(r)}finally{i.f()}})),y=t;t|=2;var S=!1,x=this.editor.onWillType((function(){x.dispose(),S=!0,2&y||i.editor.pushUndoStop()}));c.push(l.resolve(d.token).then((function(){if(!l.completion.additionalTextEdits||d.token.isCancellationRequested)return!1;if(f&&l.completion.additionalTextEdits.some((function(e){return w.L.isBefore(f,C.e.getStartPosition(e.range))})))return!1;S&&i.editor.pushUndoStop();var e=b.Z.capture(i.editor);return i.editor.executeEdits("suggestController.additionalTextEdits.async",l.completion.additionalTextEdits.map((function(e){return k.h.replaceMove(C.e.lift(e.range),e.text)}))),e.restoreRelativeVerticalPositionOfCursor(i.editor),!S&&2&y||i.editor.pushUndoStop(),!0})).then((function(e){i._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",_.elapsed(),e),v.dispose(),x.dispose()})))}var L,T=l.completion.insertText;if(4&l.completion.insertTextRules||(T=D.Yj.escape(T)),this.model.cancel(),n.insert(T,{overwriteBefore:u.overwriteBefore,overwriteAfter:u.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&l.completion.insertTextRules),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&t||this.editor.pushUndoStop(),l.completion.command)if(l.completion.command.id===ht.id)this.model.trigger({auto:!0,retrigger:!0});else c.push((L=this._commandService).executeCommand.apply(L,[l.completion.command.id].concat((0,r.Z)(l.completion.command.arguments?(0,r.Z)(l.completion.command.arguments):[]))).catch(g.dL));4&t&&this._alternatives.value.set(e,(function(e){for(d.cancel();o.canUndo();){a!==o.getAlternativeVersionId()&&o.undo(),i._insertSuggestion(e,3|(8&t?8:0));break}})),this._alertCompletionItem(l),Promise.all(c).finally((function(){i._reportSuggestionAcceptedTelemetry(l,o,e),i.model.clear(),d.dispose()}))}}}},{key:"_reportSuggestionAcceptedTelemetry",value:function(e,t,i){var n;if(this._telemetryGate++%100===0){var o=e.extensionId?e.extensionId.value:(null!==(n=i.item.provider._debugDisplayName)&&void 0!==n?n:"unknown").split("(",1)[0].toLowerCase();this._telemetryService.publicLog2("suggest.acceptedSuggestion",{providerId:o,kind:e.completion.kind,basenameHash:(0,st.vp)((0,rt.EZ)(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:(0,rt.DZ)(t.uri)})}}},{key:"getOverwriteInfo",value:function(e,t){(0,y.p_)(this.editor.hasModel());var i="replace"===this.editor.getOption(112).insertMode;t&&(i=!i);var n=e.position.column-e.editStart.column,o=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column;return{overwriteBefore:n+(this.editor.getPosition().column-e.position.column),overwriteAfter:o+(this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0)}}},{key:"_alertCompletionItem",value:function(e){if((0,d.Of)(e.completion.additionalTextEdits)){var t=M.NC("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);(0,c.Z9)(t)}}},{key:"triggerSuggest",value:function(e,t,i){this.editor.hasModel()&&(this.model.trigger({auto:null!==t&&void 0!==t&&t,completionOptions:{providerFilter:e,kindFilter:i?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}},{key:"triggerSuggestAndAcceptBest",value:function(e){var t=this;if(this.editor.hasModel()){var i=this.editor.getPosition(),n=function(){i.equals(t.editor.getPosition())&&t._commandService.executeCommand(e.fallback)};p.ju.once(this.model.onDidTrigger)((function(e){var i=[];p.ju.any(t.model.onDidTrigger,t.model.onDidCancel)((function(){(0,_.B9)(i),n()}),void 0,i),t.model.onDidSuggest((function(e){var o=e.completionModel;if((0,_.B9)(i),0!==o.items.length){var r=t._memoryService.select(t.editor.getModel(),t.editor.getPosition(),o.items),s=o.items[r];!function(e){if(4&e.completion.insertTextRules||e.completion.additionalTextEdits)return!0;var i=t.editor.getPosition(),n=e.editStart.column,o=i.column;return o-n!==e.completion.insertText.length||t.editor.getModel().getValueInRange({startLineNumber:i.lineNumber,startColumn:n,endLineNumber:i.lineNumber,endColumn:o})!==e.completion.insertText}(s)?n():(t.editor.pushUndoStop(),t._insertSuggestion({index:r,item:s,model:o},7))}else n()}),void 0,i)})),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(i,0),this.editor.focus()}}},{key:"acceptSelectedSuggestion",value:function(e,t){var i=this.widget.value.getFocusedItem(),n=0;e&&(n|=4),t&&(n|=8),this._insertSuggestion(i,n)}},{key:"acceptNextSuggestion",value:function(){this._alternatives.value.next()}},{key:"acceptPrevSuggestion",value:function(){this._alternatives.value.prev()}},{key:"cancelSuggestWidget",value:function(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}},{key:"focusSuggestion",value:function(){this.widget.value.focusSelected()}},{key:"selectNextSuggestion",value:function(){this.widget.value.selectNext()}},{key:"selectNextPageSuggestion",value:function(){this.widget.value.selectNextPage()}},{key:"selectLastSuggestion",value:function(){this.widget.value.selectLast()}},{key:"selectPrevSuggestion",value:function(){this.widget.value.selectPrevious()}},{key:"selectPrevPageSuggestion",value:function(){this.widget.value.selectPreviousPage()}},{key:"selectFirstSuggestion",value:function(){this.widget.value.selectFirst()}},{key:"toggleSuggestionDetails",value:function(){this.widget.value.toggleDetails()}},{key:"toggleExplainMode",value:function(){this.widget.value.toggleExplainMode()}},{key:"toggleSuggestionFocus",value:function(){this.widget.value.toggleDetailsFocus()}},{key:"resetWidgetSize",value:function(){this.widget.value.resetPersistedSize()}},{key:"forceRenderingAbove",value:function(){this.widget.value.forceRenderingAbove()}},{key:"stopForceRenderingAbove",value:function(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}},{key:"registerSelector",value:function(e){return this._selectors.register(e)}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();dt.ID="editor.contrib.suggestController",dt=at([lt(1,L.Fh),lt(2,O.H),lt(3,T.i6),lt(4,E.TG),lt(5,Z.VZ),lt(6,Y.b)],dt);var ut=function(){function e(t){(0,a.Z)(this,e),this.prioritySelector=t,this._items=new Array}return(0,l.Z)(e,[{key:"register",value:function(e){var t=this;if(-1!==this._items.indexOf(e))throw new Error("Value is already registered");return this._items.push(e),this._items.sort((function(e,i){return t.prioritySelector(i)-t.prioritySelector(e)})),{dispose:function(){var i=t._items.indexOf(e);i>=0&&t._items.splice(i,1)}}}},{key:"itemsOrderedByPriorityDesc",get:function(){return this._items}}]),e}(),ht=function(e){(0,n.Z)(i,e);var t=(0,o.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,{id:i.id,label:M.NC("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:T.Ao.and(x.u.writable,x.u.hasCompletionItemProvider,F._y.Visible.toNegated()),kbOpts:{kbExpr:x.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}return(0,l.Z)(i,[{key:"run",value:function(e,t,i){var n,o=dt.get(t);o&&(i&&"object"===typeof i&&!0===i.auto&&(n=!0),o.triggerSuggest(void 0,n,void 0))}}]),i}(S.R6);ht.id="editor.action.triggerSuggest",(0,S._K)(dt.ID,dt,2),(0,S.Qr)(ht);var gt=190,pt=S._l.bindToContribution(dt.get);(0,S.fK)(new pt({id:"acceptSelectedSuggestion",precondition:T.Ao.and(F._y.Visible,F._y.HasFocusedSuggestion),handler:function(e){e.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:T.Ao.and(F._y.Visible,x.u.textInputFocus),weight:gt},{primary:3,kbExpr:T.Ao.and(F._y.Visible,x.u.textInputFocus,F._y.AcceptSuggestionsOnEnter,F._y.MakesTextEdit),weight:gt}],menuOpts:[{menuId:F.GI,title:M.NC("accept.insert","Insert"),group:"left",order:1,when:F._y.HasInsertAndReplaceRange.toNegated()},{menuId:F.GI,title:M.NC("accept.insert","Insert"),group:"left",order:1,when:T.Ao.and(F._y.HasInsertAndReplaceRange,F._y.InsertMode.isEqualTo("insert"))},{menuId:F.GI,title:M.NC("accept.replace","Replace"),group:"left",order:1,when:T.Ao.and(F._y.HasInsertAndReplaceRange,F._y.InsertMode.isEqualTo("replace"))}]})),(0,S.fK)(new pt({id:"acceptAlternativeSelectedSuggestion",precondition:T.Ao.and(F._y.Visible,x.u.textInputFocus,F._y.HasFocusedSuggestion),kbOpts:{weight:gt,kbExpr:x.u.textInputFocus,primary:1027,secondary:[1026]},handler:function(e){e.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:F.GI,group:"left",order:2,when:T.Ao.and(F._y.HasInsertAndReplaceRange,F._y.InsertMode.isEqualTo("insert")),title:M.NC("accept.replace","Replace")},{menuId:F.GI,group:"left",order:2,when:T.Ao.and(F._y.HasInsertAndReplaceRange,F._y.InsertMode.isEqualTo("replace")),title:M.NC("accept.insert","Insert")}]})),O.P.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,S.fK)(new pt({id:"hideSuggestWidget",precondition:F._y.Visible,handler:function(e){return e.cancelSuggestWidget()},kbOpts:{weight:gt,kbExpr:x.u.textInputFocus,primary:9,secondary:[1033]}})),(0,S.fK)(new pt({id:"selectNextSuggestion",precondition:T.Ao.and(F._y.Visible,F._y.MultipleSuggestions),handler:function(e){return e.selectNextSuggestion()},kbOpts:{weight:gt,kbExpr:x.u.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),(0,S.fK)(new pt({id:"selectNextPageSuggestion",precondition:T.Ao.and(F._y.Visible,F._y.MultipleSuggestions),handler:function(e){return e.selectNextPageSuggestion()},kbOpts:{weight:gt,kbExpr:x.u.textInputFocus,primary:12,secondary:[2060]}})),(0,S.fK)(new pt({id:"selectLastSuggestion",precondition:T.Ao.and(F._y.Visible,F._y.MultipleSuggestions),handler:function(e){return e.selectLastSuggestion()}})),(0,S.fK)(new pt({id:"selectPrevSuggestion",precondition:T.Ao.and(F._y.Visible,F._y.MultipleSuggestions),handler:function(e){return e.selectPrevSuggestion()},kbOpts:{weight:gt,kbExpr:x.u.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),(0,S.fK)(new pt({id:"selectPrevPageSuggestion",precondition:T.Ao.and(F._y.Visible,F._y.MultipleSuggestions),handler:function(e){return e.selectPrevPageSuggestion()},kbOpts:{weight:gt,kbExpr:x.u.textInputFocus,primary:11,secondary:[2059]}})),(0,S.fK)(new pt({id:"selectFirstSuggestion",precondition:T.Ao.and(F._y.Visible,F._y.MultipleSuggestions),handler:function(e){return e.selectFirstSuggestion()}})),(0,S.fK)(new pt({id:"focusSuggestion",precondition:T.Ao.and(F._y.Visible,F._y.HasFocusedSuggestion.negate()),handler:function(e){return e.focusSuggestion()},kbOpts:{weight:gt,kbExpr:x.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}})),(0,S.fK)(new pt({id:"focusAndAcceptSuggestion",precondition:T.Ao.and(F._y.Visible,F._y.HasFocusedSuggestion.negate()),handler:function(e){e.focusSuggestion(),e.acceptSelectedSuggestion(!0,!1)}})),(0,S.fK)(new pt({id:"toggleSuggestionDetails",precondition:T.Ao.and(F._y.Visible,F._y.HasFocusedSuggestion),handler:function(e){return e.toggleSuggestionDetails()},kbOpts:{weight:gt,kbExpr:x.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:F.GI,group:"right",order:1,when:T.Ao.and(F._y.DetailsVisible,F._y.CanResolve),title:M.NC("detail.more","show less")},{menuId:F.GI,group:"right",order:1,when:T.Ao.and(F._y.DetailsVisible.toNegated(),F._y.CanResolve),title:M.NC("detail.less","show more")}]})),(0,S.fK)(new pt({id:"toggleExplainMode",precondition:F._y.Visible,handler:function(e){return e.toggleExplainMode()},kbOpts:{weight:100,primary:2133}})),(0,S.fK)(new pt({id:"toggleSuggestionFocus",precondition:F._y.Visible,handler:function(e){return e.toggleSuggestionFocus()},kbOpts:{weight:gt,kbExpr:x.u.textInputFocus,primary:2570,mac:{primary:778}}})),(0,S.fK)(new pt({id:"insertBestCompletion",precondition:T.Ao.and(x.u.textInputFocus,T.Ao.equals("config.editor.tabCompletion","on"),P.AtEnd,F._y.Visible.toNegated(),W.OtherSuggestions.toNegated(),N.f.InSnippetMode.toNegated()),handler:function(e,t){e.triggerSuggestAndAcceptBest((0,y.Kn)(t)?Object.assign({fallback:"tab"},t):{fallback:"tab"})},kbOpts:{weight:gt,primary:2}})),(0,S.fK)(new pt({id:"insertNextSuggestion",precondition:T.Ao.and(x.u.textInputFocus,T.Ao.equals("config.editor.tabCompletion","on"),W.OtherSuggestions,F._y.Visible.toNegated(),N.f.InSnippetMode.toNegated()),handler:function(e){return e.acceptNextSuggestion()},kbOpts:{weight:gt,kbExpr:x.u.textInputFocus,primary:2}})),(0,S.fK)(new pt({id:"insertPrevSuggestion",precondition:T.Ao.and(x.u.textInputFocus,T.Ao.equals("config.editor.tabCompletion","on"),W.OtherSuggestions,F._y.Visible.toNegated(),N.f.InSnippetMode.toNegated()),handler:function(e){return e.acceptPrevSuggestion()},kbOpts:{weight:gt,kbExpr:x.u.textInputFocus,primary:1026}})),(0,S.Qr)(function(e){(0,n.Z)(i,e);var t=(0,o.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,{id:"editor.action.resetSuggestSize",label:M.NC("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}return(0,l.Z)(i,[{key:"run",value:function(e,t){var i;null===(i=dt.get(t))||void 0===i||i.resetWidgetSize()}}]),i}(S.R6))},75779:function(e,t,i){var n=i(74165),o=i(37762),r=i(60136),s=i(27277),a=i(43144),l=i(15671),c=i(24404),d=i(96823),u=i(79620),h=i(82927),g=i(39177),p=i(47454),f=i(851),_=i(69561),v=i(7509),m=i(30810),y=i(29084),b=i(79106),S=i(50280),k=i(55351),w=i(20893),C=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},x=function(e,t){return function(i,n){t(i,n,e)}},N=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},D=(0,a.Z)((function e(t,i,n,o,r,s){(0,l.Z)(this,e),this.range=t,this.insertText=i,this.filterText=n,this.additionalTextEdits=o,this.command=r,this.completion=s})),L=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(e,n,o,r,s,a){var c;return(0,l.Z)(this,i),(c=t.call(this,s.disposable)).model=e,c.line=n,c.word=o,c.completionModel=r,c._suggestMemoryService=a,c}return(0,a.Z)(i,[{key:"canBeReused",value:function(e,t,i){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===i.startColumn&&this.word.endColumn<i.endColumn&&0===this.completionModel.getIncompleteProvider().size}},{key:"items",get:function(){var e,t,i=[],n=this.completionModel.items,r=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},n),s=u.$.slice(n,r),a=u.$.slice(n,0,r),l=5,h=(0,o.Z)(u.$.concat(s,a));try{for(h.s();!(t=h.n()).done;){var g=t.value;if(g.score!==d.CL.Default){var p=new f.e(g.editStart.lineNumber,g.editStart.column,g.editInsertEnd.lineNumber,g.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),_=g.completion.insertTextRules&&g.completion.insertTextRules&v.a7.InsertAsSnippet?{snippet:g.completion.insertText}:g.completion.insertText;i.push(new D(p,_,null!==(e=g.filterTextLow)&&void 0!==e?e:g.labelLow,g.completion.additionalTextEdits,g.completion.command,g)),l-- >=0&&g.resolve(c.T.None)}}}catch(m){h.e(m)}finally{h.f()}return i}}]),i}(h.L6);L=C([x(5,b.Fh)],L);var T=function(){function e(t,i,n,o){(0,l.Z)(this,e),this._getEditorOption=t,this._languageFeatureService=i,this._clipboardService=n,this._suggestMemoryService=o}return(0,a.Z)(e,[{key:"provideInlineCompletions",value:function(e,t,i,o){var r;return N(this,void 0,void 0,(0,n.Z)().mark((function s(){var a,l,c,d,u,h,g,p,_,v,b;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i.selectedSuggestionInfo){n.next=2;break}return n.abrupt("return");case 2:if(a=this._getEditorOption(84,e),!y.tG.isAllOff(a)){n.next=5;break}return n.abrupt("return");case 5:if(e.tokenization.tokenizeIfCheap(t.lineNumber),l=e.tokenization.getLineTokens(t.lineNumber),c=l.getStandardTokenType(l.findTokenIndexAtOffset(Math.max(t.column-1-1,0))),"inline"===y.tG.valueFor(a,c)){n.next=10;break}return n.abrupt("return",void 0);case 10:if((null===(d=e.getWordAtPosition(t))||void 0===d?void 0:d.word)||(u=this._getTriggerCharacterInfo(e,t)),(null===d||void 0===d?void 0:d.word)||u){n.next=14;break}return n.abrupt("return");case 14:if(d||(d=e.getWordUntilPosition(t)),d.endColumn===t.column){n.next=17;break}return n.abrupt("return");case 17:if(g=e.getValueInRange(new f.e(t.lineNumber,1,t.lineNumber,t.column)),u||!(null===(r=this._lastResult)||void 0===r?void 0:r.canBeReused(e,t.lineNumber,d))){n.next=25;break}p=new m.t(g,t.column-this._lastResult.word.endColumn),this._lastResult.completionModel.lineContext=p,this._lastResult.acquire(),h=this._lastResult,n.next=34;break;case 25:return n.next=27,(0,y.kL)(this._languageFeatureService.completionProvider,e,t,new y.A9(void 0,void 0,null===u||void 0===u?void 0:u.providers),u&&{triggerKind:1,triggerCharacter:u.ch},o);case 27:if(!(_=n.sent).needsClipboard){n.next=32;break}return n.next=31,this._clipboardService.readText();case 31:v=n.sent;case 32:b=new m._(_.items,t.column,new m.t(g,0),S.K.None,this._getEditorOption(112,e),this._getEditorOption(106,e),{boostFullMatch:!1,firstMatchCanBeWeak:!1},v),h=new L(e,t.lineNumber,d,b,_,this._suggestMemoryService);case 34:return this._lastResult=h,n.abrupt("return",h);case 36:case"end":return n.stop()}}),s,this)})))}},{key:"handleItemDidShow",value:function(e,t){t.completion.resolve(c.T.None)}},{key:"freeInlineCompletions",value:function(e){e.release()}},{key:"_getTriggerCharacterInfo",value:function(e,t){var i,n,r=e.getValueInRange(f.e.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),s=new Set,a=(0,o.Z)(this._languageFeatureService.completionProvider.all(e));try{for(a.s();!(n=a.n()).done;){var l=n.value;(null===(i=l.triggerCharacters)||void 0===i?void 0:i.includes(r))&&s.add(l)}}catch(c){a.e(c)}finally{a.f()}if(0!==s.size)return{providers:s,ch:r}}}]),e}();T=C([x(1,_.p),x(2,k.p),x(3,b.Fh)],T);var R=function(){function e(t,i,n,o){if((0,l.Z)(this,e),1===++e._counter){var r=o.createInstance(T,(function(e,i){var o;return(null!==(o=n.listCodeEditors().find((function(e){return e.getModel()===i})))&&void 0!==o?o:t).getOption(e)}));e._disposable=i.inlineCompletionsProvider.register("*",r)}}return(0,a.Z)(e,[{key:"dispose",value:function(){var t;0===--e._counter&&(null===(t=e._disposable)||void 0===t||t.dispose(),e._disposable=void 0)}}]),e}();R._counter=0,R=C([x(1,_.p),x(2,p.$),x(3,w.TG)],R),(0,g._K)("suggest.inlineCompletionsProvider",R,0)},79106:function(e,t,i){i.d(t,{Fh:function(){return D}});var n=i(29439),o=i(37762),r=i(11752),s=i(61120),a=i(60136),l=i(27277),c=i(15671),d=i(43144),u=i(1670),h=i(82927),g=i(82861),p=i(48085),f=i(33752),_=i(57348),v=i(41043),m=i(20893),y=i(87327),b=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},S=function(e,t){return function(i,n){t(i,n,e)}},k=function(){function e(t){(0,c.Z)(this,e),this.name=t}return(0,d.Z)(e,[{key:"select",value:function(e,t,i){if(0===i.length)return 0;for(var n=i[0].score[0],o=0;o<i.length;o++){var r=i[o],s=r.score,a=r.completion;if(s[0]!==n)break;if(a.preselect)return o}return 0}}]),e}(),w=function(e){(0,a.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,c.Z)(this,i),t.call(this,"first")}return(0,d.Z)(i,[{key:"memorize",value:function(e,t,i){}},{key:"toJSON",value:function(){}},{key:"fromJSON",value:function(){}}]),i}(k),C=function(e){(0,a.Z)(i,e);var t=(0,l.Z)(i);function i(){var e;return(0,c.Z)(this,i),(e=t.call(this,"recentlyUsed"))._cache=new g.z6(300,.66),e._seq=0,e}return(0,d.Z)(i,[{key:"memorize",value:function(e,t,i){var n="".concat(e.getLanguageId(),"/").concat(i.textLabel);this._cache.set(n,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}},{key:"select",value:function(e,t,n){if(0===n.length)return 0;var o=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(o))return(0,r.Z)((0,s.Z)(i.prototype),"select",this).call(this,e,t,n);for(var a=n[0].score[0],l=-1,c=-1,d=-1,u=0;u<n.length&&n[u].score[0]===a;u++){var h="".concat(e.getLanguageId(),"/").concat(n[u].textLabel),g=this._cache.peek(h);if(g&&g.touch>d&&g.type===n[u].completion.kind&&g.insertText===n[u].completion.insertText&&(d=g.touch,c=u),n[u].completion.preselect&&-1===l)return u}return-1!==c?c:-1!==l?l:0}},{key:"toJSON",value:function(){return this._cache.toJSON()}},{key:"fromJSON",value:function(e){this._cache.clear();var t,i=(0,o.Z)(e);try{for(i.s();!(t=i.n()).done;){var r=(0,n.Z)(t.value,2),s=r[0],a=r[1];a.touch=0,a.type="number"===typeof a.type?a.type:f.gX.fromString(a.type),this._cache.set(s,a)}}catch(l){i.e(l)}finally{i.f()}this._seq=this._cache.size}}]),i}(k),x=function(e){(0,a.Z)(i,e);var t=(0,l.Z)(i);function i(){var e;return(0,c.Z)(this,i),(e=t.call(this,"recentlyUsedByPrefix"))._trie=p.Id.forStrings(),e._seq=0,e}return(0,d.Z)(i,[{key:"memorize",value:function(e,t,i){var n=e.getWordUntilPosition(t).word,o="".concat(e.getLanguageId(),"/").concat(n);this._trie.set(o,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}},{key:"select",value:function(e,t,n){var o=e.getWordUntilPosition(t).word;if(!o)return(0,r.Z)((0,s.Z)(i.prototype),"select",this).call(this,e,t,n);var a="".concat(e.getLanguageId(),"/").concat(o),l=this._trie.get(a);if(l||(l=this._trie.findSubstr(a)),l)for(var c=0;c<n.length;c++){var d=n[c].completion,u=d.kind,h=d.insertText;if(u===l.type&&h===l.insertText)return c}return(0,r.Z)((0,s.Z)(i.prototype),"select",this).call(this,e,t,n)}},{key:"toJSON",value:function(){var e=[];return this._trie.forEach((function(t,i){return e.push([i,t])})),e.sort((function(e,t){return-(e[1].touch-t[1].touch)})).forEach((function(e,t){return e[1].touch=t})),e.slice(0,200)}},{key:"fromJSON",value:function(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;var t,i=(0,o.Z)(e);try{for(i.s();!(t=i.n()).done;){var r=(0,n.Z)(t.value,2),s=r[0],a=r[1];a.type="number"===typeof a.type?a.type:f.gX.fromString(a.type),this._trie.set(s,a)}}catch(l){i.e(l)}finally{i.f()}}}}]),i}(k),N=function(){function e(t,i){var n=this;(0,c.Z)(this,e),this._storageService=t,this._configService=i,this._disposables=new h.SL,this._persistSoon=new u.pY((function(){return n._saveState()}),500),this._disposables.add(t.onWillSaveState((function(e){e.reason===y.fk.SHUTDOWN&&n._saveState()})))}return(0,d.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._persistSoon.dispose()}},{key:"memorize",value:function(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}},{key:"select",value:function(e,t,i){return this._withStrategy(e,t).select(e,t,i)}},{key:"_withStrategy",value:function(t,i){var n,o=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:t.getLanguageIdAtPosition(i.lineNumber,i.column),resource:t.uri});if((null===(n=this._strategy)||void 0===n?void 0:n.name)!==o){this._saveState();var r=e._strategyCtors.get(o)||w;this._strategy=new r;try{var s=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,a=this._storageService.get("".concat(e._storagePrefix,"/").concat(o),s);a&&this._strategy.fromJSON(JSON.parse(a))}catch(l){}}return this._strategy}},{key:"_saveState",value:function(){if(this._strategy){var t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store("".concat(e._storagePrefix,"/").concat(this._strategy.name),i,t,1)}}}]),e}();N._strategyCtors=new Map([["recentlyUsedByPrefix",x],["recentlyUsed",C],["first",w]]),N._storagePrefix="suggest/memories",N=b([S(0,y.Uy),S(1,_.Ui)],N);var D=(0,m.yh)("ISuggestMemories");(0,v.z)(D,N,1)},50280:function(e,t,i){i.d(t,{K:function(){return p}});var n=i(74165),o=i(37762),r=i(60136),s=i(27277),a=i(29439),l=i(15671),c=i(43144),d=i(85509),u=i(851),h=i(19408),g=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},p=function(){function e(){(0,l.Z)(this,e)}return(0,c.Z)(e,null,[{key:"create",value:function(t,i){return g(this,void 0,void 0,(0,n.Z)().mark((function g(){var p,f,_,v,m,y,b;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.getOption(112).localityBonus){n.next=2;break}return n.abrupt("return",e.None);case 2:if(i.hasModel()){n.next=4;break}return n.abrupt("return",e.None);case 4:if(p=i.getModel(),f=i.getPosition(),t.canComputeWordRanges(p.uri)){n.next=8;break}return n.abrupt("return",e.None);case 8:return n.next=10,(new h.x).provideSelectionRanges(p,[f]);case 10:if(_=n.sent,v=(0,a.Z)(_,1),0!==(m=v[0]).length){n.next=15;break}return n.abrupt("return",e.None);case 15:return n.next=17,t.computeWordRanges(p.uri,m[0].range);case 17:if(y=n.sent){n.next=20;break}return n.abrupt("return",e.None);case 20:return b=p.getWordUntilPosition(f),delete y[b.word],n.abrupt("return",new(function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"distance",value:function(e,t){if(!f.equals(i.getPosition()))return 0;if(17===t.kind)return 2<<20;var n="string"===typeof t.label?t.label:t.label.label,r=y[n];if((0,d.XY)(r))return 2<<20;var s,a=(0,d.ry)(r,u.e.fromPositions(e),u.e.compareRangesUsingStarts),l=a>=0?r[a]:r[Math.max(0,~a-1)],c=m.length,h=(0,o.Z)(m);try{for(h.s();!(s=h.n()).done;){var g=s.value;if(!u.e.containsRange(g.range,l))break;c-=1}}catch(p){h.e(p)}finally{h.f()}return c}}]),n}(e)));case 23:case"end":return n.stop()}}),g)})))}}]),e}();p.None=new(function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,l.Z)(this,i),t.apply(this,arguments)}return(0,c.Z)(i,[{key:"distance",value:function(){return 0}}]),i}(p))},56458:function(e,t,i){var n=i(96531),o=i(35673);(0,o.P6G)("symbolIcon.arrayForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.booleanForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,n.NC)("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.colorForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.constantForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,n.NC)("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,n.NC)("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,n.NC)("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,n.NC)("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,n.NC)("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.fileForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.folderForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,n.NC)("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,n.NC)("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.keyForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.keywordForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,n.NC)("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.moduleForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.namespaceForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.nullForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.numberForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.objectForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.operatorForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.packageForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.propertyForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.referenceForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.snippetForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.stringForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.structForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.textForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.typeParameterForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.unitForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,n.NC)("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."))}}]);
//# sourceMappingURL=monaco-editor-vendor.86f2f8d8.f29efe37.js.map