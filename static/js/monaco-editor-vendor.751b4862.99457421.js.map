{"version":3,"file":"static/js/monaco-editor-vendor.751b4862.99457421.js","mappings":"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","sources":["../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/config/domFontInfo.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/config/migrateOptions.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/config/editorConfiguration.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/config/elementSizeObserver.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/config/charWidthReader.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/config/fontMeasurements.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/config/tabFocus.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/controller/mouseTarget.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/controller/mouseHandler.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/controller/pointerHandler.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/controller/textAreaHandler.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/controller/textAreaInput.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/controller/textAreaState.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/coreCommands.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { FastDomNode } from '../../../base/browser/fastDomNode.js';\nexport function applyFontInfo(domNode, fontInfo) {\n    if (domNode instanceof FastDomNode) {\n        domNode.setFontFamily(fontInfo.getMassagedFontFamily());\n        domNode.setFontWeight(fontInfo.fontWeight);\n        domNode.setFontSize(fontInfo.fontSize);\n        domNode.setFontFeatureSettings(fontInfo.fontFeatureSettings);\n        domNode.setFontVariationSettings(fontInfo.fontVariationSettings);\n        domNode.setLineHeight(fontInfo.lineHeight);\n        domNode.setLetterSpacing(fontInfo.letterSpacing);\n    }\n    else {\n        domNode.style.fontFamily = fontInfo.getMassagedFontFamily();\n        domNode.style.fontWeight = fontInfo.fontWeight;\n        domNode.style.fontSize = fontInfo.fontSize + 'px';\n        domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        domNode.style.fontVariationSettings = fontInfo.fontVariationSettings;\n        domNode.style.lineHeight = fontInfo.lineHeight + 'px';\n        domNode.style.letterSpacing = fontInfo.letterSpacing + 'px';\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nclass EditorSettingMigration {\n    constructor(key, migrate) {\n        this.key = key;\n        this.migrate = migrate;\n    }\n    apply(options) {\n        const value = EditorSettingMigration._read(options, this.key);\n        const read = (key) => EditorSettingMigration._read(options, key);\n        const write = (key, value) => EditorSettingMigration._write(options, key, value);\n        this.migrate(value, read, write);\n    }\n    static _read(source, key) {\n        if (typeof source === 'undefined') {\n            return undefined;\n        }\n        const firstDotIndex = key.indexOf('.');\n        if (firstDotIndex >= 0) {\n            const firstSegment = key.substring(0, firstDotIndex);\n            return this._read(source[firstSegment], key.substring(firstDotIndex + 1));\n        }\n        return source[key];\n    }\n    static _write(target, key, value) {\n        const firstDotIndex = key.indexOf('.');\n        if (firstDotIndex >= 0) {\n            const firstSegment = key.substring(0, firstDotIndex);\n            target[firstSegment] = target[firstSegment] || {};\n            this._write(target[firstSegment], key.substring(firstDotIndex + 1), value);\n            return;\n        }\n        target[key] = value;\n    }\n}\nEditorSettingMigration.items = [];\nexport { EditorSettingMigration };\nfunction registerEditorSettingMigration(key, migrate) {\n    EditorSettingMigration.items.push(new EditorSettingMigration(key, migrate));\n}\nfunction registerSimpleEditorSettingMigration(key, values) {\n    registerEditorSettingMigration(key, (value, read, write) => {\n        if (typeof value !== 'undefined') {\n            for (const [oldValue, newValue] of values) {\n                if (value === oldValue) {\n                    write(key, newValue);\n                    return;\n                }\n            }\n        }\n    });\n}\n/**\n * Compatibility with old options\n */\nexport function migrateOptions(options) {\n    EditorSettingMigration.items.forEach(migration => migration.apply(options));\n}\nregisterSimpleEditorSettingMigration('wordWrap', [[true, 'on'], [false, 'off']]);\nregisterSimpleEditorSettingMigration('lineNumbers', [[true, 'on'], [false, 'off']]);\nregisterSimpleEditorSettingMigration('cursorBlinking', [['visible', 'solid']]);\nregisterSimpleEditorSettingMigration('renderWhitespace', [[true, 'boundary'], [false, 'none']]);\nregisterSimpleEditorSettingMigration('renderLineHighlight', [[true, 'line'], [false, 'none']]);\nregisterSimpleEditorSettingMigration('acceptSuggestionOnEnter', [[true, 'on'], [false, 'off']]);\nregisterSimpleEditorSettingMigration('tabCompletion', [[false, 'off'], [true, 'onlySnippets']]);\nregisterSimpleEditorSettingMigration('hover', [[true, { enabled: true }], [false, { enabled: false }]]);\nregisterSimpleEditorSettingMigration('parameterHints', [[true, { enabled: true }], [false, { enabled: false }]]);\nregisterSimpleEditorSettingMigration('autoIndent', [[false, 'advanced'], [true, 'full']]);\nregisterSimpleEditorSettingMigration('matchBrackets', [[true, 'always'], [false, 'never']]);\nregisterSimpleEditorSettingMigration('renderFinalNewline', [[true, 'on'], [false, 'off']]);\nregisterSimpleEditorSettingMigration('cursorSmoothCaretAnimation', [[true, 'on'], [false, 'off']]);\nregisterEditorSettingMigration('autoClosingBrackets', (value, read, write) => {\n    if (value === false) {\n        write('autoClosingBrackets', 'never');\n        if (typeof read('autoClosingQuotes') === 'undefined') {\n            write('autoClosingQuotes', 'never');\n        }\n        if (typeof read('autoSurround') === 'undefined') {\n            write('autoSurround', 'never');\n        }\n    }\n});\nregisterEditorSettingMigration('renderIndentGuides', (value, read, write) => {\n    if (typeof value !== 'undefined') {\n        write('renderIndentGuides', undefined);\n        if (typeof read('guides.indentation') === 'undefined') {\n            write('guides.indentation', !!value);\n        }\n    }\n});\nregisterEditorSettingMigration('highlightActiveIndentGuide', (value, read, write) => {\n    if (typeof value !== 'undefined') {\n        write('highlightActiveIndentGuide', undefined);\n        if (typeof read('guides.highlightActiveIndentation') === 'undefined') {\n            write('guides.highlightActiveIndentation', !!value);\n        }\n    }\n});\nconst suggestFilteredTypesMapping = {\n    method: 'showMethods',\n    function: 'showFunctions',\n    constructor: 'showConstructors',\n    deprecated: 'showDeprecated',\n    field: 'showFields',\n    variable: 'showVariables',\n    class: 'showClasses',\n    struct: 'showStructs',\n    interface: 'showInterfaces',\n    module: 'showModules',\n    property: 'showProperties',\n    event: 'showEvents',\n    operator: 'showOperators',\n    unit: 'showUnits',\n    value: 'showValues',\n    constant: 'showConstants',\n    enum: 'showEnums',\n    enumMember: 'showEnumMembers',\n    keyword: 'showKeywords',\n    text: 'showWords',\n    color: 'showColors',\n    file: 'showFiles',\n    reference: 'showReferences',\n    folder: 'showFolders',\n    typeParameter: 'showTypeParameters',\n    snippet: 'showSnippets',\n};\nregisterEditorSettingMigration('suggest.filteredTypes', (value, read, write) => {\n    if (value && typeof value === 'object') {\n        for (const entry of Object.entries(suggestFilteredTypesMapping)) {\n            const v = value[entry[0]];\n            if (v === false) {\n                if (typeof read(`suggest.${entry[1]}`) === 'undefined') {\n                    write(`suggest.${entry[1]}`, false);\n                }\n            }\n        }\n        write('suggest.filteredTypes', undefined);\n    }\n});\nregisterEditorSettingMigration('quickSuggestions', (input, read, write) => {\n    if (typeof input === 'boolean') {\n        const value = input ? 'on' : 'off';\n        const newValue = { comments: value, strings: value, other: value };\n        write('quickSuggestions', newValue);\n    }\n});\n// Sticky Scroll\nregisterEditorSettingMigration('experimental.stickyScroll.enabled', (value, read, write) => {\n    if (typeof value === 'boolean') {\n        write('experimental.stickyScroll.enabled', undefined);\n        if (typeof read('stickyScroll.enabled') === 'undefined') {\n            write('stickyScroll.enabled', value);\n        }\n    }\n});\nregisterEditorSettingMigration('experimental.stickyScroll.maxLineCount', (value, read, write) => {\n    if (typeof value === 'number') {\n        write('experimental.stickyScroll.maxLineCount', undefined);\n        if (typeof read('stickyScroll.maxLineCount') === 'undefined') {\n            write('stickyScroll.maxLineCount', value);\n        }\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as browser from '../../../base/browser/browser.js';\nimport * as arrays from '../../../base/common/arrays.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as objects from '../../../base/common/objects.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { ElementSizeObserver } from './elementSizeObserver.js';\nimport { FontMeasurements } from './fontMeasurements.js';\nimport { migrateOptions } from './migrateOptions.js';\nimport { TabFocus } from './tabFocus.js';\nimport { ComputeOptionsMemory, ConfigurationChangedEvent, editorOptionsRegistry } from '../../common/config/editorOptions.js';\nimport { EditorZoom } from '../../common/config/editorZoom.js';\nimport { BareFontInfo } from '../../common/config/fontInfo.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nlet EditorConfiguration = class EditorConfiguration extends Disposable {\n    constructor(isSimpleWidget, options, container, _accessibilityService) {\n        super();\n        this._accessibilityService = _accessibilityService;\n        this._onDidChange = this._register(new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        this._onDidChangeFast = this._register(new Emitter());\n        this.onDidChangeFast = this._onDidChangeFast.event;\n        this._isDominatedByLongLines = false;\n        this._viewLineCount = 1;\n        this._lineNumbersDigitCount = 1;\n        this._reservedHeight = 0;\n        this._computeOptionsMemory = new ComputeOptionsMemory();\n        this.isSimpleWidget = isSimpleWidget;\n        this._containerObserver = this._register(new ElementSizeObserver(container, options.dimension));\n        this._rawOptions = deepCloneAndMigrateOptions(options);\n        this._validatedOptions = EditorOptionsUtil.validateOptions(this._rawOptions);\n        this.options = this._computeOptions();\n        if (this.options.get(10 /* EditorOption.automaticLayout */)) {\n            this._containerObserver.startObserving();\n        }\n        this._register(EditorZoom.onDidChangeZoomLevel(() => this._recomputeOptions()));\n        this._register(TabFocus.onDidChangeTabFocus(() => this._recomputeOptions()));\n        this._register(this._containerObserver.onDidChange(() => this._recomputeOptions()));\n        this._register(FontMeasurements.onDidChange(() => this._recomputeOptions()));\n        this._register(browser.PixelRatio.onDidChange(() => this._recomputeOptions()));\n        this._register(this._accessibilityService.onDidChangeScreenReaderOptimized(() => this._recomputeOptions()));\n    }\n    _recomputeOptions() {\n        const newOptions = this._computeOptions();\n        const changeEvent = EditorOptionsUtil.checkEquals(this.options, newOptions);\n        if (changeEvent === null) {\n            // nothing changed!\n            return;\n        }\n        this.options = newOptions;\n        this._onDidChangeFast.fire(changeEvent);\n        this._onDidChange.fire(changeEvent);\n    }\n    _computeOptions() {\n        const partialEnv = this._readEnvConfiguration();\n        const bareFontInfo = BareFontInfo.createFromValidatedSettings(this._validatedOptions, partialEnv.pixelRatio, this.isSimpleWidget);\n        const fontInfo = this._readFontInfo(bareFontInfo);\n        const env = {\n            memory: this._computeOptionsMemory,\n            outerWidth: partialEnv.outerWidth,\n            outerHeight: partialEnv.outerHeight - this._reservedHeight,\n            fontInfo: fontInfo,\n            extraEditorClassName: partialEnv.extraEditorClassName,\n            isDominatedByLongLines: this._isDominatedByLongLines,\n            viewLineCount: this._viewLineCount,\n            lineNumbersDigitCount: this._lineNumbersDigitCount,\n            emptySelectionClipboard: partialEnv.emptySelectionClipboard,\n            pixelRatio: partialEnv.pixelRatio,\n            tabFocusMode: TabFocus.getTabFocusMode(\"editorFocus\" /* TabFocusContext.Editor */),\n            accessibilitySupport: partialEnv.accessibilitySupport\n        };\n        return EditorOptionsUtil.computeOptions(this._validatedOptions, env);\n    }\n    _readEnvConfiguration() {\n        return {\n            extraEditorClassName: getExtraEditorClassName(),\n            outerWidth: this._containerObserver.getWidth(),\n            outerHeight: this._containerObserver.getHeight(),\n            emptySelectionClipboard: browser.isWebKit || browser.isFirefox,\n            pixelRatio: browser.PixelRatio.value,\n            accessibilitySupport: (this._accessibilityService.isScreenReaderOptimized()\n                ? 2 /* AccessibilitySupport.Enabled */\n                : this._accessibilityService.getAccessibilitySupport())\n        };\n    }\n    _readFontInfo(bareFontInfo) {\n        return FontMeasurements.readFontInfo(bareFontInfo);\n    }\n    getRawOptions() {\n        return this._rawOptions;\n    }\n    updateOptions(_newOptions) {\n        const newOptions = deepCloneAndMigrateOptions(_newOptions);\n        const didChange = EditorOptionsUtil.applyUpdate(this._rawOptions, newOptions);\n        if (!didChange) {\n            return;\n        }\n        this._validatedOptions = EditorOptionsUtil.validateOptions(this._rawOptions);\n        this._recomputeOptions();\n    }\n    observeContainer(dimension) {\n        this._containerObserver.observe(dimension);\n    }\n    setIsDominatedByLongLines(isDominatedByLongLines) {\n        if (this._isDominatedByLongLines === isDominatedByLongLines) {\n            return;\n        }\n        this._isDominatedByLongLines = isDominatedByLongLines;\n        this._recomputeOptions();\n    }\n    setModelLineCount(modelLineCount) {\n        const lineNumbersDigitCount = digitCount(modelLineCount);\n        if (this._lineNumbersDigitCount === lineNumbersDigitCount) {\n            return;\n        }\n        this._lineNumbersDigitCount = lineNumbersDigitCount;\n        this._recomputeOptions();\n    }\n    setViewLineCount(viewLineCount) {\n        if (this._viewLineCount === viewLineCount) {\n            return;\n        }\n        this._viewLineCount = viewLineCount;\n        this._recomputeOptions();\n    }\n    setReservedHeight(reservedHeight) {\n        if (this._reservedHeight === reservedHeight) {\n            return;\n        }\n        this._reservedHeight = reservedHeight;\n        this._recomputeOptions();\n    }\n};\nEditorConfiguration = __decorate([\n    __param(3, IAccessibilityService)\n], EditorConfiguration);\nexport { EditorConfiguration };\nfunction digitCount(n) {\n    let r = 0;\n    while (n) {\n        n = Math.floor(n / 10);\n        r++;\n    }\n    return r ? r : 1;\n}\nfunction getExtraEditorClassName() {\n    let extra = '';\n    if (!browser.isSafari && !browser.isWebkitWebView) {\n        // Use user-select: none in all browsers except Safari and native macOS WebView\n        extra += 'no-user-select ';\n    }\n    if (browser.isSafari) {\n        // See https://github.com/microsoft/vscode/issues/108822\n        extra += 'no-minimap-shadow ';\n        extra += 'enable-user-select ';\n    }\n    if (platform.isMacintosh) {\n        extra += 'mac ';\n    }\n    return extra;\n}\nclass ValidatedEditorOptions {\n    constructor() {\n        this._values = [];\n    }\n    _read(option) {\n        return this._values[option];\n    }\n    get(id) {\n        return this._values[id];\n    }\n    _write(option, value) {\n        this._values[option] = value;\n    }\n}\nexport class ComputedEditorOptions {\n    constructor() {\n        this._values = [];\n    }\n    _read(id) {\n        if (id >= this._values.length) {\n            throw new Error('Cannot read uninitialized value');\n        }\n        return this._values[id];\n    }\n    get(id) {\n        return this._read(id);\n    }\n    _write(id, value) {\n        this._values[id] = value;\n    }\n}\nclass EditorOptionsUtil {\n    static validateOptions(options) {\n        const result = new ValidatedEditorOptions();\n        for (const editorOption of editorOptionsRegistry) {\n            const value = (editorOption.name === '_never_' ? undefined : options[editorOption.name]);\n            result._write(editorOption.id, editorOption.validate(value));\n        }\n        return result;\n    }\n    static computeOptions(options, env) {\n        const result = new ComputedEditorOptions();\n        for (const editorOption of editorOptionsRegistry) {\n            result._write(editorOption.id, editorOption.compute(env, result, options._read(editorOption.id)));\n        }\n        return result;\n    }\n    static _deepEquals(a, b) {\n        if (typeof a !== 'object' || typeof b !== 'object' || !a || !b) {\n            return a === b;\n        }\n        if (Array.isArray(a) || Array.isArray(b)) {\n            return (Array.isArray(a) && Array.isArray(b) ? arrays.equals(a, b) : false);\n        }\n        if (Object.keys(a).length !== Object.keys(b).length) {\n            return false;\n        }\n        for (const key in a) {\n            if (!EditorOptionsUtil._deepEquals(a[key], b[key])) {\n                return false;\n            }\n        }\n        return true;\n    }\n    static checkEquals(a, b) {\n        const result = [];\n        let somethingChanged = false;\n        for (const editorOption of editorOptionsRegistry) {\n            const changed = !EditorOptionsUtil._deepEquals(a._read(editorOption.id), b._read(editorOption.id));\n            result[editorOption.id] = changed;\n            if (changed) {\n                somethingChanged = true;\n            }\n        }\n        return (somethingChanged ? new ConfigurationChangedEvent(result) : null);\n    }\n    /**\n     * Returns true if something changed.\n     * Modifies `options`.\n    */\n    static applyUpdate(options, update) {\n        let changed = false;\n        for (const editorOption of editorOptionsRegistry) {\n            if (update.hasOwnProperty(editorOption.name)) {\n                const result = editorOption.applyUpdate(options[editorOption.name], update[editorOption.name]);\n                options[editorOption.name] = result.newValue;\n                changed = changed || result.didChange;\n            }\n        }\n        return changed;\n    }\n}\nfunction deepCloneAndMigrateOptions(_options) {\n    const options = objects.deepClone(_options);\n    migrateOptions(options);\n    return options;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { Emitter } from '../../../base/common/event.js';\nexport class ElementSizeObserver extends Disposable {\n    constructor(referenceDomElement, dimension) {\n        super();\n        this._onDidChange = this._register(new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        this._referenceDomElement = referenceDomElement;\n        this._width = -1;\n        this._height = -1;\n        this._resizeObserver = null;\n        this.measureReferenceDomElement(false, dimension);\n    }\n    dispose() {\n        this.stopObserving();\n        super.dispose();\n    }\n    getWidth() {\n        return this._width;\n    }\n    getHeight() {\n        return this._height;\n    }\n    startObserving() {\n        if (!this._resizeObserver && this._referenceDomElement) {\n            this._resizeObserver = new ResizeObserver((entries) => {\n                if (entries && entries[0] && entries[0].contentRect) {\n                    this.observe({ width: entries[0].contentRect.width, height: entries[0].contentRect.height });\n                }\n                else {\n                    this.observe();\n                }\n            });\n            this._resizeObserver.observe(this._referenceDomElement);\n        }\n    }\n    stopObserving() {\n        if (this._resizeObserver) {\n            this._resizeObserver.disconnect();\n            this._resizeObserver = null;\n        }\n    }\n    observe(dimension) {\n        this.measureReferenceDomElement(true, dimension);\n    }\n    measureReferenceDomElement(emitEvent, dimension) {\n        let observedWidth = 0;\n        let observedHeight = 0;\n        if (dimension) {\n            observedWidth = dimension.width;\n            observedHeight = dimension.height;\n        }\n        else if (this._referenceDomElement) {\n            observedWidth = this._referenceDomElement.clientWidth;\n            observedHeight = this._referenceDomElement.clientHeight;\n        }\n        observedWidth = Math.max(5, observedWidth);\n        observedHeight = Math.max(5, observedHeight);\n        if (this._width !== observedWidth || this._height !== observedHeight) {\n            this._width = observedWidth;\n            this._height = observedHeight;\n            if (emitEvent) {\n                this._onDidChange.fire();\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { applyFontInfo } from './domFontInfo.js';\nexport class CharWidthRequest {\n    constructor(chr, type) {\n        this.chr = chr;\n        this.type = type;\n        this.width = 0;\n    }\n    fulfill(width) {\n        this.width = width;\n    }\n}\nclass DomCharWidthReader {\n    constructor(bareFontInfo, requests) {\n        this._bareFontInfo = bareFontInfo;\n        this._requests = requests;\n        this._container = null;\n        this._testElements = null;\n    }\n    read() {\n        // Create a test container with all these test elements\n        this._createDomElements();\n        // Add the container to the DOM\n        document.body.appendChild(this._container);\n        // Read character widths\n        this._readFromDomElements();\n        // Remove the container from the DOM\n        document.body.removeChild(this._container);\n        this._container = null;\n        this._testElements = null;\n    }\n    _createDomElements() {\n        const container = document.createElement('div');\n        container.style.position = 'absolute';\n        container.style.top = '-50000px';\n        container.style.width = '50000px';\n        const regularDomNode = document.createElement('div');\n        applyFontInfo(regularDomNode, this._bareFontInfo);\n        container.appendChild(regularDomNode);\n        const boldDomNode = document.createElement('div');\n        applyFontInfo(boldDomNode, this._bareFontInfo);\n        boldDomNode.style.fontWeight = 'bold';\n        container.appendChild(boldDomNode);\n        const italicDomNode = document.createElement('div');\n        applyFontInfo(italicDomNode, this._bareFontInfo);\n        italicDomNode.style.fontStyle = 'italic';\n        container.appendChild(italicDomNode);\n        const testElements = [];\n        for (const request of this._requests) {\n            let parent;\n            if (request.type === 0 /* CharWidthRequestType.Regular */) {\n                parent = regularDomNode;\n            }\n            if (request.type === 2 /* CharWidthRequestType.Bold */) {\n                parent = boldDomNode;\n            }\n            if (request.type === 1 /* CharWidthRequestType.Italic */) {\n                parent = italicDomNode;\n            }\n            parent.appendChild(document.createElement('br'));\n            const testElement = document.createElement('span');\n            DomCharWidthReader._render(testElement, request);\n            parent.appendChild(testElement);\n            testElements.push(testElement);\n        }\n        this._container = container;\n        this._testElements = testElements;\n    }\n    static _render(testElement, request) {\n        if (request.chr === ' ') {\n            let htmlString = '\\u00a0';\n            // Repeat character 256 (2^8) times\n            for (let i = 0; i < 8; i++) {\n                htmlString += htmlString;\n            }\n            testElement.innerText = htmlString;\n        }\n        else {\n            let testString = request.chr;\n            // Repeat character 256 (2^8) times\n            for (let i = 0; i < 8; i++) {\n                testString += testString;\n            }\n            testElement.textContent = testString;\n        }\n    }\n    _readFromDomElements() {\n        for (let i = 0, len = this._requests.length; i < len; i++) {\n            const request = this._requests[i];\n            const testElement = this._testElements[i];\n            request.fulfill(testElement.offsetWidth / 256);\n        }\n    }\n}\nexport function readCharWidths(bareFontInfo, requests) {\n    const reader = new DomCharWidthReader(bareFontInfo, requests);\n    reader.read();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from '../../../base/browser/browser.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { CharWidthRequest, readCharWidths } from './charWidthReader.js';\nimport { EditorFontLigatures } from '../../common/config/editorOptions.js';\nimport { FontInfo } from '../../common/config/fontInfo.js';\nexport class FontMeasurementsImpl extends Disposable {\n    constructor() {\n        super();\n        this._onDidChange = this._register(new Emitter());\n        this.onDidChange = this._onDidChange.event;\n        this._cache = new FontMeasurementsCache();\n        this._evictUntrustedReadingsTimeout = -1;\n    }\n    dispose() {\n        if (this._evictUntrustedReadingsTimeout !== -1) {\n            window.clearTimeout(this._evictUntrustedReadingsTimeout);\n            this._evictUntrustedReadingsTimeout = -1;\n        }\n        super.dispose();\n    }\n    /**\n     * Clear all cached font information and trigger a change event.\n     */\n    clearAllFontInfos() {\n        this._cache = new FontMeasurementsCache();\n        this._onDidChange.fire();\n    }\n    _writeToCache(item, value) {\n        this._cache.put(item, value);\n        if (!value.isTrusted && this._evictUntrustedReadingsTimeout === -1) {\n            // Try reading again after some time\n            this._evictUntrustedReadingsTimeout = window.setTimeout(() => {\n                this._evictUntrustedReadingsTimeout = -1;\n                this._evictUntrustedReadings();\n            }, 5000);\n        }\n    }\n    _evictUntrustedReadings() {\n        const values = this._cache.getValues();\n        let somethingRemoved = false;\n        for (const item of values) {\n            if (!item.isTrusted) {\n                somethingRemoved = true;\n                this._cache.remove(item);\n            }\n        }\n        if (somethingRemoved) {\n            this._onDidChange.fire();\n        }\n    }\n    /**\n     * Read font information.\n     */\n    readFontInfo(bareFontInfo) {\n        if (!this._cache.has(bareFontInfo)) {\n            let readConfig = this._actualReadFontInfo(bareFontInfo);\n            if (readConfig.typicalHalfwidthCharacterWidth <= 2 || readConfig.typicalFullwidthCharacterWidth <= 2 || readConfig.spaceWidth <= 2 || readConfig.maxDigitWidth <= 2) {\n                // Hey, it's Bug 14341 ... we couldn't read\n                readConfig = new FontInfo({\n                    pixelRatio: browser.PixelRatio.value,\n                    fontFamily: readConfig.fontFamily,\n                    fontWeight: readConfig.fontWeight,\n                    fontSize: readConfig.fontSize,\n                    fontFeatureSettings: readConfig.fontFeatureSettings,\n                    fontVariationSettings: readConfig.fontVariationSettings,\n                    lineHeight: readConfig.lineHeight,\n                    letterSpacing: readConfig.letterSpacing,\n                    isMonospace: readConfig.isMonospace,\n                    typicalHalfwidthCharacterWidth: Math.max(readConfig.typicalHalfwidthCharacterWidth, 5),\n                    typicalFullwidthCharacterWidth: Math.max(readConfig.typicalFullwidthCharacterWidth, 5),\n                    canUseHalfwidthRightwardsArrow: readConfig.canUseHalfwidthRightwardsArrow,\n                    spaceWidth: Math.max(readConfig.spaceWidth, 5),\n                    middotWidth: Math.max(readConfig.middotWidth, 5),\n                    wsmiddotWidth: Math.max(readConfig.wsmiddotWidth, 5),\n                    maxDigitWidth: Math.max(readConfig.maxDigitWidth, 5),\n                }, false);\n            }\n            this._writeToCache(bareFontInfo, readConfig);\n        }\n        return this._cache.get(bareFontInfo);\n    }\n    _createRequest(chr, type, all, monospace) {\n        const result = new CharWidthRequest(chr, type);\n        all.push(result);\n        monospace === null || monospace === void 0 ? void 0 : monospace.push(result);\n        return result;\n    }\n    _actualReadFontInfo(bareFontInfo) {\n        const all = [];\n        const monospace = [];\n        const typicalHalfwidthCharacter = this._createRequest('n', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const typicalFullwidthCharacter = this._createRequest('\\uff4d', 0 /* CharWidthRequestType.Regular */, all, null);\n        const space = this._createRequest(' ', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit0 = this._createRequest('0', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit1 = this._createRequest('1', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit2 = this._createRequest('2', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit3 = this._createRequest('3', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit4 = this._createRequest('4', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit5 = this._createRequest('5', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit6 = this._createRequest('6', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit7 = this._createRequest('7', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit8 = this._createRequest('8', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const digit9 = this._createRequest('9', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        // monospace test: used for whitespace rendering\n        const rightwardsArrow = this._createRequest('', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        const halfwidthRightwardsArrow = this._createRequest('', 0 /* CharWidthRequestType.Regular */, all, null);\n        // U+00B7 - MIDDLE DOT\n        const middot = this._createRequest('', 0 /* CharWidthRequestType.Regular */, all, monospace);\n        // U+2E31 - WORD SEPARATOR MIDDLE DOT\n        const wsmiddotWidth = this._createRequest(String.fromCharCode(0x2E31), 0 /* CharWidthRequestType.Regular */, all, null);\n        // monospace test: some characters\n        const monospaceTestChars = '|/-_ilm%';\n        for (let i = 0, len = monospaceTestChars.length; i < len; i++) {\n            this._createRequest(monospaceTestChars.charAt(i), 0 /* CharWidthRequestType.Regular */, all, monospace);\n            this._createRequest(monospaceTestChars.charAt(i), 1 /* CharWidthRequestType.Italic */, all, monospace);\n            this._createRequest(monospaceTestChars.charAt(i), 2 /* CharWidthRequestType.Bold */, all, monospace);\n        }\n        readCharWidths(bareFontInfo, all);\n        const maxDigitWidth = Math.max(digit0.width, digit1.width, digit2.width, digit3.width, digit4.width, digit5.width, digit6.width, digit7.width, digit8.width, digit9.width);\n        let isMonospace = (bareFontInfo.fontFeatureSettings === EditorFontLigatures.OFF);\n        const referenceWidth = monospace[0].width;\n        for (let i = 1, len = monospace.length; isMonospace && i < len; i++) {\n            const diff = referenceWidth - monospace[i].width;\n            if (diff < -0.001 || diff > 0.001) {\n                isMonospace = false;\n                break;\n            }\n        }\n        let canUseHalfwidthRightwardsArrow = true;\n        if (isMonospace && halfwidthRightwardsArrow.width !== referenceWidth) {\n            // using a halfwidth rightwards arrow would break monospace...\n            canUseHalfwidthRightwardsArrow = false;\n        }\n        if (halfwidthRightwardsArrow.width > rightwardsArrow.width) {\n            // using a halfwidth rightwards arrow would paint a larger arrow than a regular rightwards arrow\n            canUseHalfwidthRightwardsArrow = false;\n        }\n        return new FontInfo({\n            pixelRatio: browser.PixelRatio.value,\n            fontFamily: bareFontInfo.fontFamily,\n            fontWeight: bareFontInfo.fontWeight,\n            fontSize: bareFontInfo.fontSize,\n            fontFeatureSettings: bareFontInfo.fontFeatureSettings,\n            fontVariationSettings: bareFontInfo.fontVariationSettings,\n            lineHeight: bareFontInfo.lineHeight,\n            letterSpacing: bareFontInfo.letterSpacing,\n            isMonospace: isMonospace,\n            typicalHalfwidthCharacterWidth: typicalHalfwidthCharacter.width,\n            typicalFullwidthCharacterWidth: typicalFullwidthCharacter.width,\n            canUseHalfwidthRightwardsArrow: canUseHalfwidthRightwardsArrow,\n            spaceWidth: space.width,\n            middotWidth: middot.width,\n            wsmiddotWidth: wsmiddotWidth.width,\n            maxDigitWidth: maxDigitWidth\n        }, true);\n    }\n}\nclass FontMeasurementsCache {\n    constructor() {\n        this._keys = Object.create(null);\n        this._values = Object.create(null);\n    }\n    has(item) {\n        const itemId = item.getId();\n        return !!this._values[itemId];\n    }\n    get(item) {\n        const itemId = item.getId();\n        return this._values[itemId];\n    }\n    put(item, value) {\n        const itemId = item.getId();\n        this._keys[itemId] = item;\n        this._values[itemId] = value;\n    }\n    remove(item) {\n        const itemId = item.getId();\n        delete this._keys[itemId];\n        delete this._values[itemId];\n    }\n    getValues() {\n        return Object.keys(this._keys).map(id => this._values[id]);\n    }\n}\nexport const FontMeasurements = new FontMeasurementsImpl();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nclass TabFocusImpl {\n    constructor() {\n        this._tabFocusTerminal = false;\n        this._tabFocusEditor = false;\n        this._onDidChangeTabFocus = new Emitter();\n        this.onDidChangeTabFocus = this._onDidChangeTabFocus.event;\n    }\n    getTabFocusMode(context) {\n        return context === \"terminalFocus\" /* TabFocusContext.Terminal */ ? this._tabFocusTerminal : this._tabFocusEditor;\n    }\n    setTabFocusMode(tabFocusMode, context) {\n        if (context === \"terminalFocus\" /* TabFocusContext.Terminal */) {\n            this._tabFocusTerminal = tabFocusMode;\n        }\n        else {\n            this._tabFocusEditor = tabFocusMode;\n        }\n        this._onDidChangeTabFocus.fire();\n    }\n}\n/**\n * Control what pressing Tab does.\n * If it is false, pressing Tab or Shift-Tab will be handled by the editor.\n * If it is true, pressing Tab or Shift-Tab will move the browser focus.\n * Defaults to false.\n */\nexport const TabFocus = new TabFocusImpl();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PageCoordinates } from '../editorDom.js';\nimport { PartFingerprints } from '../view/viewPart.js';\nimport { ViewLine } from '../viewParts/lines/viewLine.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range as EditorRange } from '../../common/core/range.js';\nimport { CursorColumns } from '../../common/core/cursorColumns.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { AtomicTabMoveOperations } from '../../common/cursor/cursorAtomicMoveOperations.js';\nclass UnknownHitTestResult {\n    constructor(hitTarget = null) {\n        this.hitTarget = hitTarget;\n        this.type = 0 /* HitTestResultType.Unknown */;\n    }\n}\nclass ContentHitTestResult {\n    constructor(position, spanNode, injectedText) {\n        this.position = position;\n        this.spanNode = spanNode;\n        this.injectedText = injectedText;\n        this.type = 1 /* HitTestResultType.Content */;\n    }\n}\nvar HitTestResult;\n(function (HitTestResult) {\n    function createFromDOMInfo(ctx, spanNode, offset) {\n        const position = ctx.getPositionFromDOMInfo(spanNode, offset);\n        if (position) {\n            return new ContentHitTestResult(position, spanNode, null);\n        }\n        return new UnknownHitTestResult(spanNode);\n    }\n    HitTestResult.createFromDOMInfo = createFromDOMInfo;\n})(HitTestResult || (HitTestResult = {}));\nexport class PointerHandlerLastRenderData {\n    constructor(lastViewCursorsRenderData, lastTextareaPosition) {\n        this.lastViewCursorsRenderData = lastViewCursorsRenderData;\n        this.lastTextareaPosition = lastTextareaPosition;\n    }\n}\nexport class MouseTarget {\n    static _deduceRage(position, range = null) {\n        if (!range && position) {\n            return new EditorRange(position.lineNumber, position.column, position.lineNumber, position.column);\n        }\n        return range !== null && range !== void 0 ? range : null;\n    }\n    static createUnknown(element, mouseColumn, position) {\n        return { type: 0 /* MouseTargetType.UNKNOWN */, element, mouseColumn, position, range: this._deduceRage(position) };\n    }\n    static createTextarea(element, mouseColumn) {\n        return { type: 1 /* MouseTargetType.TEXTAREA */, element, mouseColumn, position: null, range: null };\n    }\n    static createMargin(type, element, mouseColumn, position, range, detail) {\n        return { type, element, mouseColumn, position, range, detail };\n    }\n    static createViewZone(type, element, mouseColumn, position, detail) {\n        return { type, element, mouseColumn, position, range: this._deduceRage(position), detail };\n    }\n    static createContentText(element, mouseColumn, position, range, detail) {\n        return { type: 6 /* MouseTargetType.CONTENT_TEXT */, element, mouseColumn, position, range: this._deduceRage(position, range), detail };\n    }\n    static createContentEmpty(element, mouseColumn, position, detail) {\n        return { type: 7 /* MouseTargetType.CONTENT_EMPTY */, element, mouseColumn, position, range: this._deduceRage(position), detail };\n    }\n    static createContentWidget(element, mouseColumn, detail) {\n        return { type: 9 /* MouseTargetType.CONTENT_WIDGET */, element, mouseColumn, position: null, range: null, detail };\n    }\n    static createScrollbar(element, mouseColumn, position) {\n        return { type: 11 /* MouseTargetType.SCROLLBAR */, element, mouseColumn, position, range: this._deduceRage(position) };\n    }\n    static createOverlayWidget(element, mouseColumn, detail) {\n        return { type: 12 /* MouseTargetType.OVERLAY_WIDGET */, element, mouseColumn, position: null, range: null, detail };\n    }\n    static createOutsideEditor(mouseColumn, position, outsidePosition, outsideDistance) {\n        return { type: 13 /* MouseTargetType.OUTSIDE_EDITOR */, element: null, mouseColumn, position, range: this._deduceRage(position), outsidePosition, outsideDistance };\n    }\n    static _typeToString(type) {\n        if (type === 1 /* MouseTargetType.TEXTAREA */) {\n            return 'TEXTAREA';\n        }\n        if (type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */) {\n            return 'GUTTER_GLYPH_MARGIN';\n        }\n        if (type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */) {\n            return 'GUTTER_LINE_NUMBERS';\n        }\n        if (type === 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */) {\n            return 'GUTTER_LINE_DECORATIONS';\n        }\n        if (type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n            return 'GUTTER_VIEW_ZONE';\n        }\n        if (type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return 'CONTENT_TEXT';\n        }\n        if (type === 7 /* MouseTargetType.CONTENT_EMPTY */) {\n            return 'CONTENT_EMPTY';\n        }\n        if (type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */) {\n            return 'CONTENT_VIEW_ZONE';\n        }\n        if (type === 9 /* MouseTargetType.CONTENT_WIDGET */) {\n            return 'CONTENT_WIDGET';\n        }\n        if (type === 10 /* MouseTargetType.OVERVIEW_RULER */) {\n            return 'OVERVIEW_RULER';\n        }\n        if (type === 11 /* MouseTargetType.SCROLLBAR */) {\n            return 'SCROLLBAR';\n        }\n        if (type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            return 'OVERLAY_WIDGET';\n        }\n        return 'UNKNOWN';\n    }\n    static toString(target) {\n        return this._typeToString(target.type) + ': ' + target.position + ' - ' + target.range + ' - ' + JSON.stringify(target.detail);\n    }\n}\nclass ElementPath {\n    static isTextArea(path) {\n        return (path.length === 2\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[1] === 6 /* PartFingerprint.TextArea */);\n    }\n    static isChildOfViewLines(path) {\n        return (path.length >= 4\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[3] === 7 /* PartFingerprint.ViewLines */);\n    }\n    static isStrictChildOfViewLines(path) {\n        return (path.length > 4\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[3] === 7 /* PartFingerprint.ViewLines */);\n    }\n    static isChildOfScrollableElement(path) {\n        return (path.length >= 2\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[1] === 5 /* PartFingerprint.ScrollableElement */);\n    }\n    static isChildOfMinimap(path) {\n        return (path.length >= 2\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[1] === 8 /* PartFingerprint.Minimap */);\n    }\n    static isChildOfContentWidgets(path) {\n        return (path.length >= 4\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[3] === 1 /* PartFingerprint.ContentWidgets */);\n    }\n    static isChildOfOverflowingContentWidgets(path) {\n        return (path.length >= 1\n            && path[0] === 2 /* PartFingerprint.OverflowingContentWidgets */);\n    }\n    static isChildOfOverlayWidgets(path) {\n        return (path.length >= 2\n            && path[0] === 3 /* PartFingerprint.OverflowGuard */\n            && path[1] === 4 /* PartFingerprint.OverlayWidgets */);\n    }\n}\nexport class HitTestContext {\n    constructor(context, viewHelper, lastRenderData) {\n        this.viewModel = context.viewModel;\n        const options = context.configuration.options;\n        this.layoutInfo = options.get(138 /* EditorOption.layoutInfo */);\n        this.viewDomNode = viewHelper.viewDomNode;\n        this.lineHeight = options.get(63 /* EditorOption.lineHeight */);\n        this.stickyTabStops = options.get(110 /* EditorOption.stickyTabStops */);\n        this.typicalHalfwidthCharacterWidth = options.get(47 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth;\n        this.lastRenderData = lastRenderData;\n        this._context = context;\n        this._viewHelper = viewHelper;\n    }\n    getZoneAtCoord(mouseVerticalOffset) {\n        return HitTestContext.getZoneAtCoord(this._context, mouseVerticalOffset);\n    }\n    static getZoneAtCoord(context, mouseVerticalOffset) {\n        // The target is either a view zone or the empty space after the last view-line\n        const viewZoneWhitespace = context.viewLayout.getWhitespaceAtVerticalOffset(mouseVerticalOffset);\n        if (viewZoneWhitespace) {\n            const viewZoneMiddle = viewZoneWhitespace.verticalOffset + viewZoneWhitespace.height / 2;\n            const lineCount = context.viewModel.getLineCount();\n            let positionBefore = null;\n            let position;\n            let positionAfter = null;\n            if (viewZoneWhitespace.afterLineNumber !== lineCount) {\n                // There are more lines after this view zone\n                positionAfter = new Position(viewZoneWhitespace.afterLineNumber + 1, 1);\n            }\n            if (viewZoneWhitespace.afterLineNumber > 0) {\n                // There are more lines above this view zone\n                positionBefore = new Position(viewZoneWhitespace.afterLineNumber, context.viewModel.getLineMaxColumn(viewZoneWhitespace.afterLineNumber));\n            }\n            if (positionAfter === null) {\n                position = positionBefore;\n            }\n            else if (positionBefore === null) {\n                position = positionAfter;\n            }\n            else if (mouseVerticalOffset < viewZoneMiddle) {\n                position = positionBefore;\n            }\n            else {\n                position = positionAfter;\n            }\n            return {\n                viewZoneId: viewZoneWhitespace.id,\n                afterLineNumber: viewZoneWhitespace.afterLineNumber,\n                positionBefore: positionBefore,\n                positionAfter: positionAfter,\n                position: position\n            };\n        }\n        return null;\n    }\n    getFullLineRangeAtCoord(mouseVerticalOffset) {\n        if (this._context.viewLayout.isAfterLines(mouseVerticalOffset)) {\n            // Below the last line\n            const lineNumber = this._context.viewModel.getLineCount();\n            const maxLineColumn = this._context.viewModel.getLineMaxColumn(lineNumber);\n            return {\n                range: new EditorRange(lineNumber, maxLineColumn, lineNumber, maxLineColumn),\n                isAfterLines: true\n            };\n        }\n        const lineNumber = this._context.viewLayout.getLineNumberAtVerticalOffset(mouseVerticalOffset);\n        const maxLineColumn = this._context.viewModel.getLineMaxColumn(lineNumber);\n        return {\n            range: new EditorRange(lineNumber, 1, lineNumber, maxLineColumn),\n            isAfterLines: false\n        };\n    }\n    getLineNumberAtVerticalOffset(mouseVerticalOffset) {\n        return this._context.viewLayout.getLineNumberAtVerticalOffset(mouseVerticalOffset);\n    }\n    isAfterLines(mouseVerticalOffset) {\n        return this._context.viewLayout.isAfterLines(mouseVerticalOffset);\n    }\n    isInTopPadding(mouseVerticalOffset) {\n        return this._context.viewLayout.isInTopPadding(mouseVerticalOffset);\n    }\n    isInBottomPadding(mouseVerticalOffset) {\n        return this._context.viewLayout.isInBottomPadding(mouseVerticalOffset);\n    }\n    getVerticalOffsetForLineNumber(lineNumber) {\n        return this._context.viewLayout.getVerticalOffsetForLineNumber(lineNumber);\n    }\n    findAttribute(element, attr) {\n        return HitTestContext._findAttribute(element, attr, this._viewHelper.viewDomNode);\n    }\n    static _findAttribute(element, attr, stopAt) {\n        while (element && element !== document.body) {\n            if (element.hasAttribute && element.hasAttribute(attr)) {\n                return element.getAttribute(attr);\n            }\n            if (element === stopAt) {\n                return null;\n            }\n            element = element.parentNode;\n        }\n        return null;\n    }\n    getLineWidth(lineNumber) {\n        return this._viewHelper.getLineWidth(lineNumber);\n    }\n    visibleRangeForPosition(lineNumber, column) {\n        return this._viewHelper.visibleRangeForPosition(lineNumber, column);\n    }\n    getPositionFromDOMInfo(spanNode, offset) {\n        return this._viewHelper.getPositionFromDOMInfo(spanNode, offset);\n    }\n    getCurrentScrollTop() {\n        return this._context.viewLayout.getCurrentScrollTop();\n    }\n    getCurrentScrollLeft() {\n        return this._context.viewLayout.getCurrentScrollLeft();\n    }\n}\nclass BareHitTestRequest {\n    constructor(ctx, editorPos, pos, relativePos) {\n        this.editorPos = editorPos;\n        this.pos = pos;\n        this.relativePos = relativePos;\n        this.mouseVerticalOffset = Math.max(0, ctx.getCurrentScrollTop() + this.relativePos.y);\n        this.mouseContentHorizontalOffset = ctx.getCurrentScrollLeft() + this.relativePos.x - ctx.layoutInfo.contentLeft;\n        this.isInMarginArea = (this.relativePos.x < ctx.layoutInfo.contentLeft && this.relativePos.x >= ctx.layoutInfo.glyphMarginLeft);\n        this.isInContentArea = !this.isInMarginArea;\n        this.mouseColumn = Math.max(0, MouseTargetFactory._getMouseColumn(this.mouseContentHorizontalOffset, ctx.typicalHalfwidthCharacterWidth));\n    }\n}\nclass HitTestRequest extends BareHitTestRequest {\n    constructor(ctx, editorPos, pos, relativePos, target) {\n        super(ctx, editorPos, pos, relativePos);\n        this._ctx = ctx;\n        if (target) {\n            this.target = target;\n            this.targetPath = PartFingerprints.collect(target, ctx.viewDomNode);\n        }\n        else {\n            this.target = null;\n            this.targetPath = new Uint8Array(0);\n        }\n    }\n    toString() {\n        return `pos(${this.pos.x},${this.pos.y}), editorPos(${this.editorPos.x},${this.editorPos.y}), relativePos(${this.relativePos.x},${this.relativePos.y}), mouseVerticalOffset: ${this.mouseVerticalOffset}, mouseContentHorizontalOffset: ${this.mouseContentHorizontalOffset}\\n\\ttarget: ${this.target ? this.target.outerHTML : null}`;\n    }\n    _getMouseColumn(position = null) {\n        if (position && position.column < this._ctx.viewModel.getLineMaxColumn(position.lineNumber)) {\n            // Most likely, the line contains foreign decorations...\n            return CursorColumns.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(position.lineNumber), position.column, this._ctx.viewModel.model.getOptions().tabSize) + 1;\n        }\n        return this.mouseColumn;\n    }\n    fulfillUnknown(position = null) {\n        return MouseTarget.createUnknown(this.target, this._getMouseColumn(position), position);\n    }\n    fulfillTextarea() {\n        return MouseTarget.createTextarea(this.target, this._getMouseColumn());\n    }\n    fulfillMargin(type, position, range, detail) {\n        return MouseTarget.createMargin(type, this.target, this._getMouseColumn(position), position, range, detail);\n    }\n    fulfillViewZone(type, position, detail) {\n        return MouseTarget.createViewZone(type, this.target, this._getMouseColumn(position), position, detail);\n    }\n    fulfillContentText(position, range, detail) {\n        return MouseTarget.createContentText(this.target, this._getMouseColumn(position), position, range, detail);\n    }\n    fulfillContentEmpty(position, detail) {\n        return MouseTarget.createContentEmpty(this.target, this._getMouseColumn(position), position, detail);\n    }\n    fulfillContentWidget(detail) {\n        return MouseTarget.createContentWidget(this.target, this._getMouseColumn(), detail);\n    }\n    fulfillScrollbar(position) {\n        return MouseTarget.createScrollbar(this.target, this._getMouseColumn(position), position);\n    }\n    fulfillOverlayWidget(detail) {\n        return MouseTarget.createOverlayWidget(this.target, this._getMouseColumn(), detail);\n    }\n    withTarget(target) {\n        return new HitTestRequest(this._ctx, this.editorPos, this.pos, this.relativePos, target);\n    }\n}\nconst EMPTY_CONTENT_AFTER_LINES = { isAfterLines: true };\nfunction createEmptyContentDataInLines(horizontalDistanceToText) {\n    return {\n        isAfterLines: false,\n        horizontalDistanceToText: horizontalDistanceToText\n    };\n}\nexport class MouseTargetFactory {\n    constructor(context, viewHelper) {\n        this._context = context;\n        this._viewHelper = viewHelper;\n    }\n    mouseTargetIsWidget(e) {\n        const t = e.target;\n        const path = PartFingerprints.collect(t, this._viewHelper.viewDomNode);\n        // Is it a content widget?\n        if (ElementPath.isChildOfContentWidgets(path) || ElementPath.isChildOfOverflowingContentWidgets(path)) {\n            return true;\n        }\n        // Is it an overlay widget?\n        if (ElementPath.isChildOfOverlayWidgets(path)) {\n            return true;\n        }\n        return false;\n    }\n    createMouseTarget(lastRenderData, editorPos, pos, relativePos, target) {\n        const ctx = new HitTestContext(this._context, this._viewHelper, lastRenderData);\n        const request = new HitTestRequest(ctx, editorPos, pos, relativePos, target);\n        try {\n            const r = MouseTargetFactory._createMouseTarget(ctx, request, false);\n            if (r.type === 6 /* MouseTargetType.CONTENT_TEXT */) {\n                // Snap to the nearest soft tab boundary if atomic soft tabs are enabled.\n                if (ctx.stickyTabStops && r.position !== null) {\n                    const position = MouseTargetFactory._snapToSoftTabBoundary(r.position, ctx.viewModel);\n                    const range = EditorRange.fromPositions(position, position).plusRange(r.range);\n                    return request.fulfillContentText(position, range, r.detail);\n                }\n            }\n            // console.log(MouseTarget.toString(r));\n            return r;\n        }\n        catch (err) {\n            // console.log(err);\n            return request.fulfillUnknown();\n        }\n    }\n    static _createMouseTarget(ctx, request, domHitTestExecuted) {\n        // console.log(`${domHitTestExecuted ? '=>' : ''}CAME IN REQUEST: ${request}`);\n        // First ensure the request has a target\n        if (request.target === null) {\n            if (domHitTestExecuted) {\n                // Still no target... and we have already executed hit test...\n                return request.fulfillUnknown();\n            }\n            const hitTestResult = MouseTargetFactory._doHitTest(ctx, request);\n            if (hitTestResult.type === 1 /* HitTestResultType.Content */) {\n                return MouseTargetFactory.createMouseTargetFromHitTestPosition(ctx, request, hitTestResult.spanNode, hitTestResult.position, hitTestResult.injectedText);\n            }\n            return this._createMouseTarget(ctx, request.withTarget(hitTestResult.hitTarget), true);\n        }\n        // we know for a fact that request.target is not null\n        const resolvedRequest = request;\n        let result = null;\n        result = result || MouseTargetFactory._hitTestContentWidget(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestOverlayWidget(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestMinimap(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestScrollbarSlider(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestViewZone(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestMargin(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestViewCursor(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestTextArea(ctx, resolvedRequest);\n        result = result || MouseTargetFactory._hitTestViewLines(ctx, resolvedRequest, domHitTestExecuted);\n        result = result || MouseTargetFactory._hitTestScrollbar(ctx, resolvedRequest);\n        return (result || request.fulfillUnknown());\n    }\n    static _hitTestContentWidget(ctx, request) {\n        // Is it a content widget?\n        if (ElementPath.isChildOfContentWidgets(request.targetPath) || ElementPath.isChildOfOverflowingContentWidgets(request.targetPath)) {\n            const widgetId = ctx.findAttribute(request.target, 'widgetId');\n            if (widgetId) {\n                return request.fulfillContentWidget(widgetId);\n            }\n            else {\n                return request.fulfillUnknown();\n            }\n        }\n        return null;\n    }\n    static _hitTestOverlayWidget(ctx, request) {\n        // Is it an overlay widget?\n        if (ElementPath.isChildOfOverlayWidgets(request.targetPath)) {\n            const widgetId = ctx.findAttribute(request.target, 'widgetId');\n            if (widgetId) {\n                return request.fulfillOverlayWidget(widgetId);\n            }\n            else {\n                return request.fulfillUnknown();\n            }\n        }\n        return null;\n    }\n    static _hitTestViewCursor(ctx, request) {\n        if (request.target) {\n            // Check if we've hit a painted cursor\n            const lastViewCursorsRenderData = ctx.lastRenderData.lastViewCursorsRenderData;\n            for (const d of lastViewCursorsRenderData) {\n                if (request.target === d.domNode) {\n                    return request.fulfillContentText(d.position, null, { mightBeForeignElement: false, injectedText: null });\n                }\n            }\n        }\n        if (request.isInContentArea) {\n            // Edge has a bug when hit-testing the exact position of a cursor,\n            // instead of returning the correct dom node, it returns the\n            // first or last rendered view line dom node, therefore help it out\n            // and first check if we are on top of a cursor\n            const lastViewCursorsRenderData = ctx.lastRenderData.lastViewCursorsRenderData;\n            const mouseContentHorizontalOffset = request.mouseContentHorizontalOffset;\n            const mouseVerticalOffset = request.mouseVerticalOffset;\n            for (const d of lastViewCursorsRenderData) {\n                if (mouseContentHorizontalOffset < d.contentLeft) {\n                    // mouse position is to the left of the cursor\n                    continue;\n                }\n                if (mouseContentHorizontalOffset > d.contentLeft + d.width) {\n                    // mouse position is to the right of the cursor\n                    continue;\n                }\n                const cursorVerticalOffset = ctx.getVerticalOffsetForLineNumber(d.position.lineNumber);\n                if (cursorVerticalOffset <= mouseVerticalOffset\n                    && mouseVerticalOffset <= cursorVerticalOffset + d.height) {\n                    return request.fulfillContentText(d.position, null, { mightBeForeignElement: false, injectedText: null });\n                }\n            }\n        }\n        return null;\n    }\n    static _hitTestViewZone(ctx, request) {\n        const viewZoneData = ctx.getZoneAtCoord(request.mouseVerticalOffset);\n        if (viewZoneData) {\n            const mouseTargetType = (request.isInContentArea ? 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ : 5 /* MouseTargetType.GUTTER_VIEW_ZONE */);\n            return request.fulfillViewZone(mouseTargetType, viewZoneData.position, viewZoneData);\n        }\n        return null;\n    }\n    static _hitTestTextArea(ctx, request) {\n        // Is it the textarea?\n        if (ElementPath.isTextArea(request.targetPath)) {\n            if (ctx.lastRenderData.lastTextareaPosition) {\n                return request.fulfillContentText(ctx.lastRenderData.lastTextareaPosition, null, { mightBeForeignElement: false, injectedText: null });\n            }\n            return request.fulfillTextarea();\n        }\n        return null;\n    }\n    static _hitTestMargin(ctx, request) {\n        if (request.isInMarginArea) {\n            const res = ctx.getFullLineRangeAtCoord(request.mouseVerticalOffset);\n            const pos = res.range.getStartPosition();\n            let offset = Math.abs(request.relativePos.x);\n            const detail = {\n                isAfterLines: res.isAfterLines,\n                glyphMarginLeft: ctx.layoutInfo.glyphMarginLeft,\n                glyphMarginWidth: ctx.layoutInfo.glyphMarginWidth,\n                lineNumbersWidth: ctx.layoutInfo.lineNumbersWidth,\n                offsetX: offset\n            };\n            offset -= ctx.layoutInfo.glyphMarginLeft;\n            if (offset <= ctx.layoutInfo.glyphMarginWidth) {\n                // On the glyph margin\n                return request.fulfillMargin(2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */, pos, res.range, detail);\n            }\n            offset -= ctx.layoutInfo.glyphMarginWidth;\n            if (offset <= ctx.layoutInfo.lineNumbersWidth) {\n                // On the line numbers\n                return request.fulfillMargin(3 /* MouseTargetType.GUTTER_LINE_NUMBERS */, pos, res.range, detail);\n            }\n            offset -= ctx.layoutInfo.lineNumbersWidth;\n            // On the line decorations\n            return request.fulfillMargin(4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */, pos, res.range, detail);\n        }\n        return null;\n    }\n    static _hitTestViewLines(ctx, request, domHitTestExecuted) {\n        if (!ElementPath.isChildOfViewLines(request.targetPath)) {\n            return null;\n        }\n        if (ctx.isInTopPadding(request.mouseVerticalOffset)) {\n            return request.fulfillContentEmpty(new Position(1, 1), EMPTY_CONTENT_AFTER_LINES);\n        }\n        // Check if it is below any lines and any view zones\n        if (ctx.isAfterLines(request.mouseVerticalOffset) || ctx.isInBottomPadding(request.mouseVerticalOffset)) {\n            // This most likely indicates it happened after the last view-line\n            const lineCount = ctx.viewModel.getLineCount();\n            const maxLineColumn = ctx.viewModel.getLineMaxColumn(lineCount);\n            return request.fulfillContentEmpty(new Position(lineCount, maxLineColumn), EMPTY_CONTENT_AFTER_LINES);\n        }\n        if (domHitTestExecuted) {\n            // Check if we are hitting a view-line (can happen in the case of inline decorations on empty lines)\n            // See https://github.com/microsoft/vscode/issues/46942\n            if (ElementPath.isStrictChildOfViewLines(request.targetPath)) {\n                const lineNumber = ctx.getLineNumberAtVerticalOffset(request.mouseVerticalOffset);\n                if (ctx.viewModel.getLineLength(lineNumber) === 0) {\n                    const lineWidth = ctx.getLineWidth(lineNumber);\n                    const detail = createEmptyContentDataInLines(request.mouseContentHorizontalOffset - lineWidth);\n                    return request.fulfillContentEmpty(new Position(lineNumber, 1), detail);\n                }\n                const lineWidth = ctx.getLineWidth(lineNumber);\n                if (request.mouseContentHorizontalOffset >= lineWidth) {\n                    const detail = createEmptyContentDataInLines(request.mouseContentHorizontalOffset - lineWidth);\n                    const pos = new Position(lineNumber, ctx.viewModel.getLineMaxColumn(lineNumber));\n                    return request.fulfillContentEmpty(pos, detail);\n                }\n            }\n            // We have already executed hit test...\n            return request.fulfillUnknown();\n        }\n        const hitTestResult = MouseTargetFactory._doHitTest(ctx, request);\n        if (hitTestResult.type === 1 /* HitTestResultType.Content */) {\n            return MouseTargetFactory.createMouseTargetFromHitTestPosition(ctx, request, hitTestResult.spanNode, hitTestResult.position, hitTestResult.injectedText);\n        }\n        return this._createMouseTarget(ctx, request.withTarget(hitTestResult.hitTarget), true);\n    }\n    static _hitTestMinimap(ctx, request) {\n        if (ElementPath.isChildOfMinimap(request.targetPath)) {\n            const possibleLineNumber = ctx.getLineNumberAtVerticalOffset(request.mouseVerticalOffset);\n            const maxColumn = ctx.viewModel.getLineMaxColumn(possibleLineNumber);\n            return request.fulfillScrollbar(new Position(possibleLineNumber, maxColumn));\n        }\n        return null;\n    }\n    static _hitTestScrollbarSlider(ctx, request) {\n        if (ElementPath.isChildOfScrollableElement(request.targetPath)) {\n            if (request.target && request.target.nodeType === 1) {\n                const className = request.target.className;\n                if (className && /\\b(slider|scrollbar)\\b/.test(className)) {\n                    const possibleLineNumber = ctx.getLineNumberAtVerticalOffset(request.mouseVerticalOffset);\n                    const maxColumn = ctx.viewModel.getLineMaxColumn(possibleLineNumber);\n                    return request.fulfillScrollbar(new Position(possibleLineNumber, maxColumn));\n                }\n            }\n        }\n        return null;\n    }\n    static _hitTestScrollbar(ctx, request) {\n        // Is it the overview ruler?\n        // Is it a child of the scrollable element?\n        if (ElementPath.isChildOfScrollableElement(request.targetPath)) {\n            const possibleLineNumber = ctx.getLineNumberAtVerticalOffset(request.mouseVerticalOffset);\n            const maxColumn = ctx.viewModel.getLineMaxColumn(possibleLineNumber);\n            return request.fulfillScrollbar(new Position(possibleLineNumber, maxColumn));\n        }\n        return null;\n    }\n    getMouseColumn(relativePos) {\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(138 /* EditorOption.layoutInfo */);\n        const mouseContentHorizontalOffset = this._context.viewLayout.getCurrentScrollLeft() + relativePos.x - layoutInfo.contentLeft;\n        return MouseTargetFactory._getMouseColumn(mouseContentHorizontalOffset, options.get(47 /* EditorOption.fontInfo */).typicalHalfwidthCharacterWidth);\n    }\n    static _getMouseColumn(mouseContentHorizontalOffset, typicalHalfwidthCharacterWidth) {\n        if (mouseContentHorizontalOffset < 0) {\n            return 1;\n        }\n        const chars = Math.round(mouseContentHorizontalOffset / typicalHalfwidthCharacterWidth);\n        return (chars + 1);\n    }\n    static createMouseTargetFromHitTestPosition(ctx, request, spanNode, pos, injectedText) {\n        const lineNumber = pos.lineNumber;\n        const column = pos.column;\n        const lineWidth = ctx.getLineWidth(lineNumber);\n        if (request.mouseContentHorizontalOffset > lineWidth) {\n            const detail = createEmptyContentDataInLines(request.mouseContentHorizontalOffset - lineWidth);\n            return request.fulfillContentEmpty(pos, detail);\n        }\n        const visibleRange = ctx.visibleRangeForPosition(lineNumber, column);\n        if (!visibleRange) {\n            return request.fulfillUnknown(pos);\n        }\n        const columnHorizontalOffset = visibleRange.left;\n        if (Math.abs(request.mouseContentHorizontalOffset - columnHorizontalOffset) < 1) {\n            return request.fulfillContentText(pos, null, { mightBeForeignElement: !!injectedText, injectedText });\n        }\n        const points = [];\n        points.push({ offset: visibleRange.left, column: column });\n        if (column > 1) {\n            const visibleRange = ctx.visibleRangeForPosition(lineNumber, column - 1);\n            if (visibleRange) {\n                points.push({ offset: visibleRange.left, column: column - 1 });\n            }\n        }\n        const lineMaxColumn = ctx.viewModel.getLineMaxColumn(lineNumber);\n        if (column < lineMaxColumn) {\n            const visibleRange = ctx.visibleRangeForPosition(lineNumber, column + 1);\n            if (visibleRange) {\n                points.push({ offset: visibleRange.left, column: column + 1 });\n            }\n        }\n        points.sort((a, b) => a.offset - b.offset);\n        const mouseCoordinates = request.pos.toClientCoordinates();\n        const spanNodeClientRect = spanNode.getBoundingClientRect();\n        const mouseIsOverSpanNode = (spanNodeClientRect.left <= mouseCoordinates.clientX && mouseCoordinates.clientX <= spanNodeClientRect.right);\n        let rng = null;\n        for (let i = 1; i < points.length; i++) {\n            const prev = points[i - 1];\n            const curr = points[i];\n            if (prev.offset <= request.mouseContentHorizontalOffset && request.mouseContentHorizontalOffset <= curr.offset) {\n                rng = new EditorRange(lineNumber, prev.column, lineNumber, curr.column);\n                // See https://github.com/microsoft/vscode/issues/152819\n                // Due to the use of zwj, the browser's hit test result is skewed towards the left\n                // Here we try to correct that if the mouse horizontal offset is closer to the right than the left\n                const prevDelta = Math.abs(prev.offset - request.mouseContentHorizontalOffset);\n                const nextDelta = Math.abs(curr.offset - request.mouseContentHorizontalOffset);\n                pos = (prevDelta < nextDelta\n                    ? new Position(lineNumber, prev.column)\n                    : new Position(lineNumber, curr.column));\n                break;\n            }\n        }\n        return request.fulfillContentText(pos, rng, { mightBeForeignElement: !mouseIsOverSpanNode || !!injectedText, injectedText });\n    }\n    /**\n     * Most probably WebKit browsers and Edge\n     */\n    static _doHitTestWithCaretRangeFromPoint(ctx, request) {\n        // In Chrome, especially on Linux it is possible to click between lines,\n        // so try to adjust the `hity` below so that it lands in the center of a line\n        const lineNumber = ctx.getLineNumberAtVerticalOffset(request.mouseVerticalOffset);\n        const lineStartVerticalOffset = ctx.getVerticalOffsetForLineNumber(lineNumber);\n        const lineEndVerticalOffset = lineStartVerticalOffset + ctx.lineHeight;\n        const isBelowLastLine = (lineNumber === ctx.viewModel.getLineCount()\n            && request.mouseVerticalOffset > lineEndVerticalOffset);\n        if (!isBelowLastLine) {\n            const lineCenteredVerticalOffset = Math.floor((lineStartVerticalOffset + lineEndVerticalOffset) / 2);\n            let adjustedPageY = request.pos.y + (lineCenteredVerticalOffset - request.mouseVerticalOffset);\n            if (adjustedPageY <= request.editorPos.y) {\n                adjustedPageY = request.editorPos.y + 1;\n            }\n            if (adjustedPageY >= request.editorPos.y + request.editorPos.height) {\n                adjustedPageY = request.editorPos.y + request.editorPos.height - 1;\n            }\n            const adjustedPage = new PageCoordinates(request.pos.x, adjustedPageY);\n            const r = this._actualDoHitTestWithCaretRangeFromPoint(ctx, adjustedPage.toClientCoordinates());\n            if (r.type === 1 /* HitTestResultType.Content */) {\n                return r;\n            }\n        }\n        // Also try to hit test without the adjustment (for the edge cases that we are near the top or bottom)\n        return this._actualDoHitTestWithCaretRangeFromPoint(ctx, request.pos.toClientCoordinates());\n    }\n    static _actualDoHitTestWithCaretRangeFromPoint(ctx, coords) {\n        const shadowRoot = dom.getShadowRoot(ctx.viewDomNode);\n        let range;\n        if (shadowRoot) {\n            if (typeof shadowRoot.caretRangeFromPoint === 'undefined') {\n                range = shadowCaretRangeFromPoint(shadowRoot, coords.clientX, coords.clientY);\n            }\n            else {\n                range = shadowRoot.caretRangeFromPoint(coords.clientX, coords.clientY);\n            }\n        }\n        else {\n            range = document.caretRangeFromPoint(coords.clientX, coords.clientY);\n        }\n        if (!range || !range.startContainer) {\n            return new UnknownHitTestResult();\n        }\n        // Chrome always hits a TEXT_NODE, while Edge sometimes hits a token span\n        const startContainer = range.startContainer;\n        if (startContainer.nodeType === startContainer.TEXT_NODE) {\n            // startContainer is expected to be the token text\n            const parent1 = startContainer.parentNode; // expected to be the token span\n            const parent2 = parent1 ? parent1.parentNode : null; // expected to be the view line container span\n            const parent3 = parent2 ? parent2.parentNode : null; // expected to be the view line div\n            const parent3ClassName = parent3 && parent3.nodeType === parent3.ELEMENT_NODE ? parent3.className : null;\n            if (parent3ClassName === ViewLine.CLASS_NAME) {\n                return HitTestResult.createFromDOMInfo(ctx, parent1, range.startOffset);\n            }\n            else {\n                return new UnknownHitTestResult(startContainer.parentNode);\n            }\n        }\n        else if (startContainer.nodeType === startContainer.ELEMENT_NODE) {\n            // startContainer is expected to be the token span\n            const parent1 = startContainer.parentNode; // expected to be the view line container span\n            const parent2 = parent1 ? parent1.parentNode : null; // expected to be the view line div\n            const parent2ClassName = parent2 && parent2.nodeType === parent2.ELEMENT_NODE ? parent2.className : null;\n            if (parent2ClassName === ViewLine.CLASS_NAME) {\n                return HitTestResult.createFromDOMInfo(ctx, startContainer, startContainer.textContent.length);\n            }\n            else {\n                return new UnknownHitTestResult(startContainer);\n            }\n        }\n        return new UnknownHitTestResult();\n    }\n    /**\n     * Most probably Gecko\n     */\n    static _doHitTestWithCaretPositionFromPoint(ctx, coords) {\n        const hitResult = document.caretPositionFromPoint(coords.clientX, coords.clientY);\n        if (hitResult.offsetNode.nodeType === hitResult.offsetNode.TEXT_NODE) {\n            // offsetNode is expected to be the token text\n            const parent1 = hitResult.offsetNode.parentNode; // expected to be the token span\n            const parent2 = parent1 ? parent1.parentNode : null; // expected to be the view line container span\n            const parent3 = parent2 ? parent2.parentNode : null; // expected to be the view line div\n            const parent3ClassName = parent3 && parent3.nodeType === parent3.ELEMENT_NODE ? parent3.className : null;\n            if (parent3ClassName === ViewLine.CLASS_NAME) {\n                return HitTestResult.createFromDOMInfo(ctx, hitResult.offsetNode.parentNode, hitResult.offset);\n            }\n            else {\n                return new UnknownHitTestResult(hitResult.offsetNode.parentNode);\n            }\n        }\n        // For inline decorations, Gecko sometimes returns the `<span>` of the line and the offset is the `<span>` with the inline decoration\n        // Some other times, it returns the `<span>` with the inline decoration\n        if (hitResult.offsetNode.nodeType === hitResult.offsetNode.ELEMENT_NODE) {\n            const parent1 = hitResult.offsetNode.parentNode;\n            const parent1ClassName = parent1 && parent1.nodeType === parent1.ELEMENT_NODE ? parent1.className : null;\n            const parent2 = parent1 ? parent1.parentNode : null;\n            const parent2ClassName = parent2 && parent2.nodeType === parent2.ELEMENT_NODE ? parent2.className : null;\n            if (parent1ClassName === ViewLine.CLASS_NAME) {\n                // it returned the `<span>` of the line and the offset is the `<span>` with the inline decoration\n                const tokenSpan = hitResult.offsetNode.childNodes[Math.min(hitResult.offset, hitResult.offsetNode.childNodes.length - 1)];\n                if (tokenSpan) {\n                    return HitTestResult.createFromDOMInfo(ctx, tokenSpan, 0);\n                }\n            }\n            else if (parent2ClassName === ViewLine.CLASS_NAME) {\n                // it returned the `<span>` with the inline decoration\n                return HitTestResult.createFromDOMInfo(ctx, hitResult.offsetNode, 0);\n            }\n        }\n        return new UnknownHitTestResult(hitResult.offsetNode);\n    }\n    static _snapToSoftTabBoundary(position, viewModel) {\n        const lineContent = viewModel.getLineContent(position.lineNumber);\n        const { tabSize } = viewModel.model.getOptions();\n        const newPosition = AtomicTabMoveOperations.atomicPosition(lineContent, position.column - 1, tabSize, 2 /* Direction.Nearest */);\n        if (newPosition !== -1) {\n            return new Position(position.lineNumber, newPosition + 1);\n        }\n        return position;\n    }\n    static _doHitTest(ctx, request) {\n        let result = new UnknownHitTestResult();\n        if (typeof document.caretRangeFromPoint === 'function') {\n            result = this._doHitTestWithCaretRangeFromPoint(ctx, request);\n        }\n        else if (document.caretPositionFromPoint) {\n            result = this._doHitTestWithCaretPositionFromPoint(ctx, request.pos.toClientCoordinates());\n        }\n        if (result.type === 1 /* HitTestResultType.Content */) {\n            const injectedText = ctx.viewModel.getInjectedTextAt(result.position);\n            const normalizedPosition = ctx.viewModel.normalizePosition(result.position, 2 /* PositionAffinity.None */);\n            if (injectedText || !normalizedPosition.equals(result.position)) {\n                result = new ContentHitTestResult(normalizedPosition, result.spanNode, injectedText);\n            }\n        }\n        return result;\n    }\n}\nfunction shadowCaretRangeFromPoint(shadowRoot, x, y) {\n    const range = document.createRange();\n    // Get the element under the point\n    let el = shadowRoot.elementFromPoint(x, y);\n    if (el !== null) {\n        // Get the last child of the element until its firstChild is a text node\n        // This assumes that the pointer is on the right of the line, out of the tokens\n        // and that we want to get the offset of the last token of the line\n        while (el && el.firstChild && el.firstChild.nodeType !== el.firstChild.TEXT_NODE && el.lastChild && el.lastChild.firstChild) {\n            el = el.lastChild;\n        }\n        // Grab its rect\n        const rect = el.getBoundingClientRect();\n        // And its font\n        const font = window.getComputedStyle(el, null).getPropertyValue('font');\n        // And also its txt content\n        const text = el.innerText;\n        // Position the pixel cursor at the left of the element\n        let pixelCursor = rect.left;\n        let offset = 0;\n        let step;\n        // If the point is on the right of the box put the cursor after the last character\n        if (x > rect.left + rect.width) {\n            offset = text.length;\n        }\n        else {\n            const charWidthReader = CharWidthReader.getInstance();\n            // Goes through all the characters of the innerText, and checks if the x of the point\n            // belongs to the character.\n            for (let i = 0; i < text.length + 1; i++) {\n                // The step is half the width of the character\n                step = charWidthReader.getCharWidth(text.charAt(i), font) / 2;\n                // Move to the center of the character\n                pixelCursor += step;\n                // If the x of the point is smaller that the position of the cursor, the point is over that character\n                if (x < pixelCursor) {\n                    offset = i;\n                    break;\n                }\n                // Move between the current character and the next\n                pixelCursor += step;\n            }\n        }\n        // Creates a range with the text node of the element and set the offset found\n        range.setStart(el.firstChild, offset);\n        range.setEnd(el.firstChild, offset);\n    }\n    return range;\n}\nclass CharWidthReader {\n    static getInstance() {\n        if (!CharWidthReader._INSTANCE) {\n            CharWidthReader._INSTANCE = new CharWidthReader();\n        }\n        return CharWidthReader._INSTANCE;\n    }\n    constructor() {\n        this._cache = {};\n        this._canvas = document.createElement('canvas');\n    }\n    getCharWidth(char, font) {\n        const cacheKey = char + font;\n        if (this._cache[cacheKey]) {\n            return this._cache[cacheKey];\n        }\n        const context = this._canvas.getContext('2d');\n        context.font = font;\n        const metrics = context.measureText(char);\n        const width = metrics.width;\n        this._cache[cacheKey] = width;\n        return width;\n    }\n}\nCharWidthReader._INSTANCE = null;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardWheelEvent } from '../../../base/browser/mouseEvent.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { HitTestContext, MouseTarget, MouseTargetFactory } from './mouseTarget.js';\nimport { ClientCoordinates, EditorMouseEvent, EditorMouseEventFactory, GlobalEditorPointerMoveMonitor, createEditorPagePosition, createCoordinatesRelativeToEditor, PageCoordinates } from '../editorDom.js';\nimport { EditorZoom } from '../../common/config/editorZoom.js';\nimport { Position } from '../../common/core/position.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { ViewEventHandler } from '../../common/viewEventHandler.js';\nimport { MouseWheelClassifier } from '../../../base/browser/ui/scrollbar/scrollableElement.js';\nexport class MouseHandler extends ViewEventHandler {\n    constructor(context, viewController, viewHelper) {\n        super();\n        this._mouseLeaveMonitor = null;\n        this._context = context;\n        this.viewController = viewController;\n        this.viewHelper = viewHelper;\n        this.mouseTargetFactory = new MouseTargetFactory(this._context, viewHelper);\n        this._mouseDownOperation = this._register(new MouseDownOperation(this._context, this.viewController, this.viewHelper, this.mouseTargetFactory, (e, testEventTarget) => this._createMouseTarget(e, testEventTarget), (e) => this._getMouseColumn(e)));\n        this.lastMouseLeaveTime = -1;\n        this._height = this._context.configuration.options.get(138 /* EditorOption.layoutInfo */).height;\n        const mouseEvents = new EditorMouseEventFactory(this.viewHelper.viewDomNode);\n        this._register(mouseEvents.onContextMenu(this.viewHelper.viewDomNode, (e) => this._onContextMenu(e, true)));\n        this._register(mouseEvents.onMouseMove(this.viewHelper.viewDomNode, (e) => {\n            this._onMouseMove(e);\n            // See https://github.com/microsoft/vscode/issues/138789\n            // When moving the mouse really quickly, the browser sometimes forgets to\n            // send us a `mouseleave` or `mouseout` event. We therefore install here\n            // a global `mousemove` listener to manually recover if the mouse goes outside\n            // the editor. As soon as the mouse leaves outside of the editor, we\n            // remove this listener\n            if (!this._mouseLeaveMonitor) {\n                this._mouseLeaveMonitor = dom.addDisposableListener(document, 'mousemove', (e) => {\n                    if (!this.viewHelper.viewDomNode.contains(e.target)) {\n                        // went outside the editor!\n                        this._onMouseLeave(new EditorMouseEvent(e, false, this.viewHelper.viewDomNode));\n                    }\n                });\n            }\n        }));\n        this._register(mouseEvents.onMouseUp(this.viewHelper.viewDomNode, (e) => this._onMouseUp(e)));\n        this._register(mouseEvents.onMouseLeave(this.viewHelper.viewDomNode, (e) => this._onMouseLeave(e)));\n        // `pointerdown` events can't be used to determine if there's a double click, or triple click\n        // because their `e.detail` is always 0.\n        // We will therefore save the pointer id for the mouse and then reuse it in the `mousedown` event\n        // for `element.setPointerCapture`.\n        let capturePointerId = 0;\n        this._register(mouseEvents.onPointerDown(this.viewHelper.viewDomNode, (e, pointerId) => {\n            capturePointerId = pointerId;\n        }));\n        // The `pointerup` listener registered by `GlobalEditorPointerMoveMonitor` does not get invoked 100% of the times.\n        // I speculate that this is because the `pointerup` listener is only registered during the `mousedown` event, and perhaps\n        // the `pointerup` event is already queued for dispatching, which makes it that the new listener doesn't get fired.\n        // See https://github.com/microsoft/vscode/issues/146486 for repro steps.\n        // To compensate for that, we simply register here a `pointerup` listener and just communicate it.\n        this._register(dom.addDisposableListener(this.viewHelper.viewDomNode, dom.EventType.POINTER_UP, (e) => {\n            this._mouseDownOperation.onPointerUp();\n        }));\n        this._register(mouseEvents.onMouseDown(this.viewHelper.viewDomNode, (e) => this._onMouseDown(e, capturePointerId)));\n        this._setupMouseWheelZoomListener();\n        this._context.addEventHandler(this);\n    }\n    _setupMouseWheelZoomListener() {\n        const classifier = MouseWheelClassifier.INSTANCE;\n        let prevMouseWheelTime = 0;\n        let gestureStartZoomLevel = EditorZoom.getZoomLevel();\n        let gestureHasZoomModifiers = false;\n        let gestureAccumulatedDelta = 0;\n        const onMouseWheel = (browserEvent) => {\n            this.viewController.emitMouseWheel(browserEvent);\n            if (!this._context.configuration.options.get(72 /* EditorOption.mouseWheelZoom */)) {\n                return;\n            }\n            const e = new StandardWheelEvent(browserEvent);\n            classifier.acceptStandardWheelEvent(e);\n            if (classifier.isPhysicalMouseWheel()) {\n                if (hasMouseWheelZoomModifiers(browserEvent)) {\n                    const zoomLevel = EditorZoom.getZoomLevel();\n                    const delta = e.deltaY > 0 ? 1 : -1;\n                    EditorZoom.setZoomLevel(zoomLevel + delta);\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            }\n            else {\n                // we consider mousewheel events that occur within 50ms of each other to be part of the same gesture\n                // we don't want to consider mouse wheel events where ctrl/cmd is pressed during the inertia phase\n                // we also want to accumulate deltaY values from the same gesture and use that to set the zoom level\n                if (Date.now() - prevMouseWheelTime > 50) {\n                    // reset if more than 50ms have passed\n                    gestureStartZoomLevel = EditorZoom.getZoomLevel();\n                    gestureHasZoomModifiers = hasMouseWheelZoomModifiers(browserEvent);\n                    gestureAccumulatedDelta = 0;\n                }\n                prevMouseWheelTime = Date.now();\n                gestureAccumulatedDelta += e.deltaY;\n                if (gestureHasZoomModifiers) {\n                    EditorZoom.setZoomLevel(gestureStartZoomLevel + gestureAccumulatedDelta / 5);\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n            }\n        };\n        this._register(dom.addDisposableListener(this.viewHelper.viewDomNode, dom.EventType.MOUSE_WHEEL, onMouseWheel, { capture: true, passive: false }));\n        function hasMouseWheelZoomModifiers(browserEvent) {\n            return (platform.isMacintosh\n                // on macOS we support cmd + two fingers scroll (`metaKey` set)\n                // and also the two fingers pinch gesture (`ctrKey` set)\n                ? ((browserEvent.metaKey || browserEvent.ctrlKey) && !browserEvent.shiftKey && !browserEvent.altKey)\n                : (browserEvent.ctrlKey && !browserEvent.metaKey && !browserEvent.shiftKey && !browserEvent.altKey));\n        }\n    }\n    dispose() {\n        this._context.removeEventHandler(this);\n        if (this._mouseLeaveMonitor) {\n            this._mouseLeaveMonitor.dispose();\n            this._mouseLeaveMonitor = null;\n        }\n        super.dispose();\n    }\n    // --- begin event handlers\n    onConfigurationChanged(e) {\n        if (e.hasChanged(138 /* EditorOption.layoutInfo */)) {\n            // layout change\n            const height = this._context.configuration.options.get(138 /* EditorOption.layoutInfo */).height;\n            if (this._height !== height) {\n                this._height = height;\n                this._mouseDownOperation.onHeightChanged();\n            }\n        }\n        return false;\n    }\n    onCursorStateChanged(e) {\n        this._mouseDownOperation.onCursorStateChanged(e);\n        return false;\n    }\n    onFocusChanged(e) {\n        return false;\n    }\n    // --- end event handlers\n    getTargetAtClientPoint(clientX, clientY) {\n        const clientPos = new ClientCoordinates(clientX, clientY);\n        const pos = clientPos.toPageCoordinates();\n        const editorPos = createEditorPagePosition(this.viewHelper.viewDomNode);\n        if (pos.y < editorPos.y || pos.y > editorPos.y + editorPos.height || pos.x < editorPos.x || pos.x > editorPos.x + editorPos.width) {\n            return null;\n        }\n        const relativePos = createCoordinatesRelativeToEditor(this.viewHelper.viewDomNode, editorPos, pos);\n        return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(), editorPos, pos, relativePos, null);\n    }\n    _createMouseTarget(e, testEventTarget) {\n        let target = e.target;\n        if (!this.viewHelper.viewDomNode.contains(target)) {\n            const shadowRoot = dom.getShadowRoot(this.viewHelper.viewDomNode);\n            if (shadowRoot) {\n                target = shadowRoot.elementsFromPoint(e.posx, e.posy).find((el) => this.viewHelper.viewDomNode.contains(el));\n            }\n        }\n        return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(), e.editorPos, e.pos, e.relativePos, testEventTarget ? target : null);\n    }\n    _getMouseColumn(e) {\n        return this.mouseTargetFactory.getMouseColumn(e.relativePos);\n    }\n    _onContextMenu(e, testEventTarget) {\n        this.viewController.emitContextMenu({\n            event: e,\n            target: this._createMouseTarget(e, testEventTarget)\n        });\n    }\n    _onMouseMove(e) {\n        const targetIsWidget = this.mouseTargetFactory.mouseTargetIsWidget(e);\n        if (!targetIsWidget) {\n            e.preventDefault();\n        }\n        if (this._mouseDownOperation.isActive()) {\n            // In selection/drag operation\n            return;\n        }\n        const actualMouseMoveTime = e.timestamp;\n        if (actualMouseMoveTime < this.lastMouseLeaveTime) {\n            // Due to throttling, this event occurred before the mouse left the editor, therefore ignore it.\n            return;\n        }\n        this.viewController.emitMouseMove({\n            event: e,\n            target: this._createMouseTarget(e, true)\n        });\n    }\n    _onMouseLeave(e) {\n        if (this._mouseLeaveMonitor) {\n            this._mouseLeaveMonitor.dispose();\n            this._mouseLeaveMonitor = null;\n        }\n        this.lastMouseLeaveTime = (new Date()).getTime();\n        this.viewController.emitMouseLeave({\n            event: e,\n            target: null\n        });\n    }\n    _onMouseUp(e) {\n        this.viewController.emitMouseUp({\n            event: e,\n            target: this._createMouseTarget(e, true)\n        });\n    }\n    _onMouseDown(e, pointerId) {\n        const t = this._createMouseTarget(e, true);\n        const targetIsContent = (t.type === 6 /* MouseTargetType.CONTENT_TEXT */ || t.type === 7 /* MouseTargetType.CONTENT_EMPTY */);\n        const targetIsGutter = (t.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ || t.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */ || t.type === 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */);\n        const targetIsLineNumbers = (t.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */);\n        const selectOnLineNumbers = this._context.configuration.options.get(103 /* EditorOption.selectOnLineNumbers */);\n        const targetIsViewZone = (t.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || t.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */);\n        const targetIsWidget = (t.type === 9 /* MouseTargetType.CONTENT_WIDGET */);\n        let shouldHandle = e.leftButton || e.middleButton;\n        if (platform.isMacintosh && e.leftButton && e.ctrlKey) {\n            shouldHandle = false;\n        }\n        const focus = () => {\n            e.preventDefault();\n            this.viewHelper.focusTextArea();\n        };\n        if (shouldHandle && (targetIsContent || (targetIsLineNumbers && selectOnLineNumbers))) {\n            focus();\n            this._mouseDownOperation.start(t.type, e, pointerId);\n        }\n        else if (targetIsGutter) {\n            // Do not steal focus\n            e.preventDefault();\n        }\n        else if (targetIsViewZone) {\n            const viewZoneData = t.detail;\n            if (shouldHandle && this.viewHelper.shouldSuppressMouseDownOnViewZone(viewZoneData.viewZoneId)) {\n                focus();\n                this._mouseDownOperation.start(t.type, e, pointerId);\n                e.preventDefault();\n            }\n        }\n        else if (targetIsWidget && this.viewHelper.shouldSuppressMouseDownOnWidget(t.detail)) {\n            focus();\n            e.preventDefault();\n        }\n        this.viewController.emitMouseDown({\n            event: e,\n            target: t\n        });\n    }\n}\nclass MouseDownOperation extends Disposable {\n    constructor(_context, _viewController, _viewHelper, _mouseTargetFactory, createMouseTarget, getMouseColumn) {\n        super();\n        this._context = _context;\n        this._viewController = _viewController;\n        this._viewHelper = _viewHelper;\n        this._mouseTargetFactory = _mouseTargetFactory;\n        this._createMouseTarget = createMouseTarget;\n        this._getMouseColumn = getMouseColumn;\n        this._mouseMoveMonitor = this._register(new GlobalEditorPointerMoveMonitor(this._viewHelper.viewDomNode));\n        this._topBottomDragScrolling = this._register(new TopBottomDragScrolling(this._context, this._viewHelper, this._mouseTargetFactory, (position, inSelectionMode, revealType) => this._dispatchMouse(position, inSelectionMode, revealType)));\n        this._mouseState = new MouseDownState();\n        this._currentSelection = new Selection(1, 1, 1, 1);\n        this._isActive = false;\n        this._lastMouseEvent = null;\n    }\n    dispose() {\n        super.dispose();\n    }\n    isActive() {\n        return this._isActive;\n    }\n    _onMouseDownThenMove(e) {\n        this._lastMouseEvent = e;\n        this._mouseState.setModifiers(e);\n        const position = this._findMousePosition(e, false);\n        if (!position) {\n            // Ignoring because position is unknown\n            return;\n        }\n        if (this._mouseState.isDragAndDrop) {\n            this._viewController.emitMouseDrag({\n                event: e,\n                target: position\n            });\n        }\n        else {\n            if (position.type === 13 /* MouseTargetType.OUTSIDE_EDITOR */ && (position.outsidePosition === 'above' || position.outsidePosition === 'below')) {\n                this._topBottomDragScrolling.start(position, e);\n            }\n            else {\n                this._topBottomDragScrolling.stop();\n                this._dispatchMouse(position, true, 1 /* NavigationCommandRevealType.Minimal */);\n            }\n        }\n    }\n    start(targetType, e, pointerId) {\n        this._lastMouseEvent = e;\n        this._mouseState.setStartedOnLineNumbers(targetType === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */);\n        this._mouseState.setStartButtons(e);\n        this._mouseState.setModifiers(e);\n        const position = this._findMousePosition(e, true);\n        if (!position || !position.position) {\n            // Ignoring because position is unknown\n            return;\n        }\n        this._mouseState.trySetCount(e.detail, position.position);\n        // Overwrite the detail of the MouseEvent, as it will be sent out in an event and contributions might rely on it.\n        e.detail = this._mouseState.count;\n        const options = this._context.configuration.options;\n        if (!options.get(86 /* EditorOption.readOnly */)\n            && options.get(32 /* EditorOption.dragAndDrop */)\n            && !options.get(19 /* EditorOption.columnSelection */)\n            && !this._mouseState.altKey // we don't support multiple mouse\n            && e.detail < 2 // only single click on a selection can work\n            && !this._isActive // the mouse is not down yet\n            && !this._currentSelection.isEmpty() // we don't drag single cursor\n            && (position.type === 6 /* MouseTargetType.CONTENT_TEXT */) // single click on text\n            && position.position && this._currentSelection.containsPosition(position.position) // single click on a selection\n        ) {\n            this._mouseState.isDragAndDrop = true;\n            this._isActive = true;\n            this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode, pointerId, e.buttons, (e) => this._onMouseDownThenMove(e), (browserEvent) => {\n                const position = this._findMousePosition(this._lastMouseEvent, false);\n                if (browserEvent && browserEvent instanceof KeyboardEvent) {\n                    // cancel\n                    this._viewController.emitMouseDropCanceled();\n                }\n                else {\n                    this._viewController.emitMouseDrop({\n                        event: this._lastMouseEvent,\n                        target: (position ? this._createMouseTarget(this._lastMouseEvent, true) : null) // Ignoring because position is unknown, e.g., Content View Zone\n                    });\n                }\n                this._stop();\n            });\n            return;\n        }\n        this._mouseState.isDragAndDrop = false;\n        this._dispatchMouse(position, e.shiftKey, 1 /* NavigationCommandRevealType.Minimal */);\n        if (!this._isActive) {\n            this._isActive = true;\n            this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode, pointerId, e.buttons, (e) => this._onMouseDownThenMove(e), () => this._stop());\n        }\n    }\n    _stop() {\n        this._isActive = false;\n        this._topBottomDragScrolling.stop();\n    }\n    onHeightChanged() {\n        this._mouseMoveMonitor.stopMonitoring();\n    }\n    onPointerUp() {\n        this._mouseMoveMonitor.stopMonitoring();\n    }\n    onCursorStateChanged(e) {\n        this._currentSelection = e.selections[0];\n    }\n    _getPositionOutsideEditor(e) {\n        const editorContent = e.editorPos;\n        const model = this._context.viewModel;\n        const viewLayout = this._context.viewLayout;\n        const mouseColumn = this._getMouseColumn(e);\n        if (e.posy < editorContent.y) {\n            const outsideDistance = editorContent.y - e.posy;\n            const verticalOffset = Math.max(viewLayout.getCurrentScrollTop() - outsideDistance, 0);\n            const viewZoneData = HitTestContext.getZoneAtCoord(this._context, verticalOffset);\n            if (viewZoneData) {\n                const newPosition = this._helpPositionJumpOverViewZone(viewZoneData);\n                if (newPosition) {\n                    return MouseTarget.createOutsideEditor(mouseColumn, newPosition, 'above', outsideDistance);\n                }\n            }\n            const aboveLineNumber = viewLayout.getLineNumberAtVerticalOffset(verticalOffset);\n            return MouseTarget.createOutsideEditor(mouseColumn, new Position(aboveLineNumber, 1), 'above', outsideDistance);\n        }\n        if (e.posy > editorContent.y + editorContent.height) {\n            const outsideDistance = e.posy - editorContent.y - editorContent.height;\n            const verticalOffset = viewLayout.getCurrentScrollTop() + e.relativePos.y;\n            const viewZoneData = HitTestContext.getZoneAtCoord(this._context, verticalOffset);\n            if (viewZoneData) {\n                const newPosition = this._helpPositionJumpOverViewZone(viewZoneData);\n                if (newPosition) {\n                    return MouseTarget.createOutsideEditor(mouseColumn, newPosition, 'below', outsideDistance);\n                }\n            }\n            const belowLineNumber = viewLayout.getLineNumberAtVerticalOffset(verticalOffset);\n            return MouseTarget.createOutsideEditor(mouseColumn, new Position(belowLineNumber, model.getLineMaxColumn(belowLineNumber)), 'below', outsideDistance);\n        }\n        const possibleLineNumber = viewLayout.getLineNumberAtVerticalOffset(viewLayout.getCurrentScrollTop() + e.relativePos.y);\n        if (e.posx < editorContent.x) {\n            const outsideDistance = editorContent.x - e.posx;\n            return MouseTarget.createOutsideEditor(mouseColumn, new Position(possibleLineNumber, 1), 'left', outsideDistance);\n        }\n        if (e.posx > editorContent.x + editorContent.width) {\n            const outsideDistance = e.posx - editorContent.x - editorContent.width;\n            return MouseTarget.createOutsideEditor(mouseColumn, new Position(possibleLineNumber, model.getLineMaxColumn(possibleLineNumber)), 'right', outsideDistance);\n        }\n        return null;\n    }\n    _findMousePosition(e, testEventTarget) {\n        const positionOutsideEditor = this._getPositionOutsideEditor(e);\n        if (positionOutsideEditor) {\n            return positionOutsideEditor;\n        }\n        const t = this._createMouseTarget(e, testEventTarget);\n        const hintedPosition = t.position;\n        if (!hintedPosition) {\n            return null;\n        }\n        if (t.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || t.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n            const newPosition = this._helpPositionJumpOverViewZone(t.detail);\n            if (newPosition) {\n                return MouseTarget.createViewZone(t.type, t.element, t.mouseColumn, newPosition, t.detail);\n            }\n        }\n        return t;\n    }\n    _helpPositionJumpOverViewZone(viewZoneData) {\n        // Force position on view zones to go above or below depending on where selection started from\n        const selectionStart = new Position(this._currentSelection.selectionStartLineNumber, this._currentSelection.selectionStartColumn);\n        const positionBefore = viewZoneData.positionBefore;\n        const positionAfter = viewZoneData.positionAfter;\n        if (positionBefore && positionAfter) {\n            if (positionBefore.isBefore(selectionStart)) {\n                return positionBefore;\n            }\n            else {\n                return positionAfter;\n            }\n        }\n        return null;\n    }\n    _dispatchMouse(position, inSelectionMode, revealType) {\n        if (!position.position) {\n            return;\n        }\n        this._viewController.dispatchMouse({\n            position: position.position,\n            mouseColumn: position.mouseColumn,\n            startedOnLineNumbers: this._mouseState.startedOnLineNumbers,\n            revealType,\n            inSelectionMode: inSelectionMode,\n            mouseDownCount: this._mouseState.count,\n            altKey: this._mouseState.altKey,\n            ctrlKey: this._mouseState.ctrlKey,\n            metaKey: this._mouseState.metaKey,\n            shiftKey: this._mouseState.shiftKey,\n            leftButton: this._mouseState.leftButton,\n            middleButton: this._mouseState.middleButton,\n            onInjectedText: position.type === 6 /* MouseTargetType.CONTENT_TEXT */ && position.detail.injectedText !== null\n        });\n    }\n}\nclass TopBottomDragScrolling extends Disposable {\n    constructor(_context, _viewHelper, _mouseTargetFactory, _dispatchMouse) {\n        super();\n        this._context = _context;\n        this._viewHelper = _viewHelper;\n        this._mouseTargetFactory = _mouseTargetFactory;\n        this._dispatchMouse = _dispatchMouse;\n        this._operation = null;\n    }\n    dispose() {\n        super.dispose();\n        this.stop();\n    }\n    start(position, mouseEvent) {\n        if (this._operation) {\n            this._operation.setPosition(position, mouseEvent);\n        }\n        else {\n            this._operation = new TopBottomDragScrollingOperation(this._context, this._viewHelper, this._mouseTargetFactory, this._dispatchMouse, position, mouseEvent);\n        }\n    }\n    stop() {\n        if (this._operation) {\n            this._operation.dispose();\n            this._operation = null;\n        }\n    }\n}\nclass TopBottomDragScrollingOperation extends Disposable {\n    constructor(_context, _viewHelper, _mouseTargetFactory, _dispatchMouse, position, mouseEvent) {\n        super();\n        this._context = _context;\n        this._viewHelper = _viewHelper;\n        this._mouseTargetFactory = _mouseTargetFactory;\n        this._dispatchMouse = _dispatchMouse;\n        this._position = position;\n        this._mouseEvent = mouseEvent;\n        this._lastTime = Date.now();\n        this._animationFrameDisposable = dom.scheduleAtNextAnimationFrame(() => this._execute());\n    }\n    dispose() {\n        this._animationFrameDisposable.dispose();\n    }\n    setPosition(position, mouseEvent) {\n        this._position = position;\n        this._mouseEvent = mouseEvent;\n    }\n    /**\n     * update internal state and return elapsed ms since last time\n     */\n    _tick() {\n        const now = Date.now();\n        const elapsed = now - this._lastTime;\n        this._lastTime = now;\n        return elapsed;\n    }\n    /**\n     * get the number of lines per second to auto-scroll\n     */\n    _getScrollSpeed() {\n        const lineHeight = this._context.configuration.options.get(63 /* EditorOption.lineHeight */);\n        const viewportInLines = this._context.configuration.options.get(138 /* EditorOption.layoutInfo */).height / lineHeight;\n        const outsideDistanceInLines = this._position.outsideDistance / lineHeight;\n        if (outsideDistanceInLines <= 1.5) {\n            return Math.max(30, viewportInLines * (1 + outsideDistanceInLines));\n        }\n        if (outsideDistanceInLines <= 3) {\n            return Math.max(60, viewportInLines * (2 + outsideDistanceInLines));\n        }\n        return Math.max(200, viewportInLines * (7 + outsideDistanceInLines));\n    }\n    _execute() {\n        const lineHeight = this._context.configuration.options.get(63 /* EditorOption.lineHeight */);\n        const scrollSpeedInLines = this._getScrollSpeed();\n        const elapsed = this._tick();\n        const scrollInPixels = scrollSpeedInLines * (elapsed / 1000) * lineHeight;\n        const scrollValue = (this._position.outsidePosition === 'above' ? -scrollInPixels : scrollInPixels);\n        this._context.viewModel.viewLayout.deltaScrollNow(0, scrollValue);\n        this._viewHelper.renderNow();\n        const viewportData = this._context.viewLayout.getLinesViewportData();\n        const edgeLineNumber = (this._position.outsidePosition === 'above' ? viewportData.startLineNumber : viewportData.endLineNumber);\n        // First, try to find a position that matches the horizontal position of the mouse\n        let mouseTarget;\n        {\n            const editorPos = createEditorPagePosition(this._viewHelper.viewDomNode);\n            const horizontalScrollbarHeight = this._context.configuration.options.get(138 /* EditorOption.layoutInfo */).horizontalScrollbarHeight;\n            const pos = new PageCoordinates(this._mouseEvent.pos.x, editorPos.y + editorPos.height - horizontalScrollbarHeight - 0.1);\n            const relativePos = createCoordinatesRelativeToEditor(this._viewHelper.viewDomNode, editorPos, pos);\n            mouseTarget = this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(), editorPos, pos, relativePos, null);\n        }\n        if (!mouseTarget.position || mouseTarget.position.lineNumber !== edgeLineNumber) {\n            if (this._position.outsidePosition === 'above') {\n                mouseTarget = MouseTarget.createOutsideEditor(this._position.mouseColumn, new Position(edgeLineNumber, 1), 'above', this._position.outsideDistance);\n            }\n            else {\n                mouseTarget = MouseTarget.createOutsideEditor(this._position.mouseColumn, new Position(edgeLineNumber, this._context.viewModel.getLineMaxColumn(edgeLineNumber)), 'below', this._position.outsideDistance);\n            }\n        }\n        this._dispatchMouse(mouseTarget, true, 2 /* NavigationCommandRevealType.None */);\n        this._animationFrameDisposable = dom.scheduleAtNextAnimationFrame(() => this._execute());\n    }\n}\nclass MouseDownState {\n    get altKey() { return this._altKey; }\n    get ctrlKey() { return this._ctrlKey; }\n    get metaKey() { return this._metaKey; }\n    get shiftKey() { return this._shiftKey; }\n    get leftButton() { return this._leftButton; }\n    get middleButton() { return this._middleButton; }\n    get startedOnLineNumbers() { return this._startedOnLineNumbers; }\n    constructor() {\n        this._altKey = false;\n        this._ctrlKey = false;\n        this._metaKey = false;\n        this._shiftKey = false;\n        this._leftButton = false;\n        this._middleButton = false;\n        this._startedOnLineNumbers = false;\n        this._lastMouseDownPosition = null;\n        this._lastMouseDownPositionEqualCount = 0;\n        this._lastMouseDownCount = 0;\n        this._lastSetMouseDownCountTime = 0;\n        this.isDragAndDrop = false;\n    }\n    get count() {\n        return this._lastMouseDownCount;\n    }\n    setModifiers(source) {\n        this._altKey = source.altKey;\n        this._ctrlKey = source.ctrlKey;\n        this._metaKey = source.metaKey;\n        this._shiftKey = source.shiftKey;\n    }\n    setStartButtons(source) {\n        this._leftButton = source.leftButton;\n        this._middleButton = source.middleButton;\n    }\n    setStartedOnLineNumbers(startedOnLineNumbers) {\n        this._startedOnLineNumbers = startedOnLineNumbers;\n    }\n    trySetCount(setMouseDownCount, newMouseDownPosition) {\n        // a. Invalidate multiple clicking if too much time has passed (will be hit by IE because the detail field of mouse events contains garbage in IE10)\n        const currentTime = (new Date()).getTime();\n        if (currentTime - this._lastSetMouseDownCountTime > MouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME) {\n            setMouseDownCount = 1;\n        }\n        this._lastSetMouseDownCountTime = currentTime;\n        // b. Ensure that we don't jump from single click to triple click in one go (will be hit by IE because the detail field of mouse events contains garbage in IE10)\n        if (setMouseDownCount > this._lastMouseDownCount + 1) {\n            setMouseDownCount = this._lastMouseDownCount + 1;\n        }\n        // c. Invalidate multiple clicking if the logical position is different\n        if (this._lastMouseDownPosition && this._lastMouseDownPosition.equals(newMouseDownPosition)) {\n            this._lastMouseDownPositionEqualCount++;\n        }\n        else {\n            this._lastMouseDownPositionEqualCount = 1;\n        }\n        this._lastMouseDownPosition = newMouseDownPosition;\n        // Finally set the lastMouseDownCount\n        this._lastMouseDownCount = Math.min(setMouseDownCount, this._lastMouseDownPositionEqualCount);\n    }\n}\nMouseDownState.CLEAR_MOUSE_DOWN_COUNT_TIME = 400; // ms\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport * as platform from '../../../base/common/platform.js';\nimport { EventType, Gesture } from '../../../base/browser/touch.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { MouseHandler } from './mouseHandler.js';\nimport { EditorMouseEvent, EditorPointerEventFactory } from '../editorDom.js';\nimport { BrowserFeatures } from '../../../base/browser/canIUse.js';\nimport { TextAreaSyntethicEvents } from './textAreaInput.js';\n/**\n * Currently only tested on iOS 13/ iPadOS.\n */\nexport class PointerEventHandler extends MouseHandler {\n    constructor(context, viewController, viewHelper) {\n        super(context, viewController, viewHelper);\n        this._register(Gesture.addTarget(this.viewHelper.linesContentDomNode));\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, EventType.Tap, (e) => this.onTap(e)));\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, EventType.Change, (e) => this.onChange(e)));\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, EventType.Contextmenu, (e) => this._onContextMenu(new EditorMouseEvent(e, false, this.viewHelper.viewDomNode), false)));\n        this._lastPointerType = 'mouse';\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, 'pointerdown', (e) => {\n            const pointerType = e.pointerType;\n            if (pointerType === 'mouse') {\n                this._lastPointerType = 'mouse';\n                return;\n            }\n            else if (pointerType === 'touch') {\n                this._lastPointerType = 'touch';\n            }\n            else {\n                this._lastPointerType = 'pen';\n            }\n        }));\n        // PonterEvents\n        const pointerEvents = new EditorPointerEventFactory(this.viewHelper.viewDomNode);\n        this._register(pointerEvents.onPointerMove(this.viewHelper.viewDomNode, (e) => this._onMouseMove(e)));\n        this._register(pointerEvents.onPointerUp(this.viewHelper.viewDomNode, (e) => this._onMouseUp(e)));\n        this._register(pointerEvents.onPointerLeave(this.viewHelper.viewDomNode, (e) => this._onMouseLeave(e)));\n        this._register(pointerEvents.onPointerDown(this.viewHelper.viewDomNode, (e, pointerId) => this._onMouseDown(e, pointerId)));\n    }\n    onTap(event) {\n        if (!event.initialTarget || !this.viewHelper.linesContentDomNode.contains(event.initialTarget)) {\n            return;\n        }\n        event.preventDefault();\n        this.viewHelper.focusTextArea();\n        const target = this._createMouseTarget(new EditorMouseEvent(event, false, this.viewHelper.viewDomNode), false);\n        if (target.position) {\n            // this.viewController.moveTo(target.position);\n            this.viewController.dispatchMouse({\n                position: target.position,\n                mouseColumn: target.position.column,\n                startedOnLineNumbers: false,\n                revealType: 1 /* NavigationCommandRevealType.Minimal */,\n                mouseDownCount: event.tapCount,\n                inSelectionMode: false,\n                altKey: false,\n                ctrlKey: false,\n                metaKey: false,\n                shiftKey: false,\n                leftButton: false,\n                middleButton: false,\n                onInjectedText: target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && target.detail.injectedText !== null\n            });\n        }\n    }\n    onChange(e) {\n        if (this._lastPointerType === 'touch') {\n            this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX, -e.translationY);\n        }\n    }\n    _onMouseDown(e, pointerId) {\n        if (e.browserEvent.pointerType === 'touch') {\n            return;\n        }\n        super._onMouseDown(e, pointerId);\n    }\n}\nclass TouchHandler extends MouseHandler {\n    constructor(context, viewController, viewHelper) {\n        super(context, viewController, viewHelper);\n        this._register(Gesture.addTarget(this.viewHelper.linesContentDomNode));\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, EventType.Tap, (e) => this.onTap(e)));\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, EventType.Change, (e) => this.onChange(e)));\n        this._register(dom.addDisposableListener(this.viewHelper.linesContentDomNode, EventType.Contextmenu, (e) => this._onContextMenu(new EditorMouseEvent(e, false, this.viewHelper.viewDomNode), false)));\n    }\n    onTap(event) {\n        event.preventDefault();\n        this.viewHelper.focusTextArea();\n        const target = this._createMouseTarget(new EditorMouseEvent(event, false, this.viewHelper.viewDomNode), false);\n        if (target.position) {\n            // Send the tap event also to the <textarea> (for input purposes)\n            const event = document.createEvent('CustomEvent');\n            event.initEvent(TextAreaSyntethicEvents.Tap, false, true);\n            this.viewHelper.dispatchTextAreaEvent(event);\n            this.viewController.moveTo(target.position, 1 /* NavigationCommandRevealType.Minimal */);\n        }\n    }\n    onChange(e) {\n        this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX, -e.translationY);\n    }\n}\nexport class PointerHandler extends Disposable {\n    constructor(context, viewController, viewHelper) {\n        super();\n        if ((platform.isIOS && BrowserFeatures.pointerEvents)) {\n            this.handler = this._register(new PointerEventHandler(context, viewController, viewHelper));\n        }\n        else if (window.TouchEvent) {\n            this.handler = this._register(new TouchHandler(context, viewController, viewHelper));\n        }\n        else {\n            this.handler = this._register(new MouseHandler(context, viewController, viewHelper));\n        }\n    }\n    getTargetAtClientPoint(clientX, clientY) {\n        return this.handler.getTargetAtClientPoint(clientX, clientY);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './textAreaHandler.css';\nimport * as nls from '../../../nls.js';\nimport * as browser from '../../../base/browser/browser.js';\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport * as platform from '../../../base/common/platform.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { CopyOptions, TextAreaInput, TextAreaWrapper } from './textAreaInput.js';\nimport { PagedScreenReaderStrategy, TextAreaState, _debugComposition } from './textAreaState.js';\nimport { PartFingerprints, ViewPart } from '../view/viewPart.js';\nimport { LineNumbersOverlay } from '../viewParts/lineNumbers/lineNumbers.js';\nimport { Margin } from '../viewParts/margin/margin.js';\nimport { EditorOptions } from '../../common/config/editorOptions.js';\nimport { getMapForWordSeparators } from '../../common/core/wordCharacterClassifier.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { MOUSE_CURSOR_TEXT_CSS_CLASS_NAME } from '../../../base/browser/ui/mouseCursor/mouseCursor.js';\nimport { TokenizationRegistry } from '../../common/languages.js';\nimport { Color } from '../../../base/common/color.js';\nimport { IME } from '../../../base/common/ime.js';\nclass VisibleTextAreaData {\n    constructor(_context, modelLineNumber, distanceToModelLineStart, widthOfHiddenLineTextBefore, distanceToModelLineEnd) {\n        this._context = _context;\n        this.modelLineNumber = modelLineNumber;\n        this.distanceToModelLineStart = distanceToModelLineStart;\n        this.widthOfHiddenLineTextBefore = widthOfHiddenLineTextBefore;\n        this.distanceToModelLineEnd = distanceToModelLineEnd;\n        this._visibleTextAreaBrand = undefined;\n        this.startPosition = null;\n        this.endPosition = null;\n        this.visibleTextareaStart = null;\n        this.visibleTextareaEnd = null;\n        /**\n         * When doing composition, the currently composed text might be split up into\n         * multiple tokens, then merged again into a single token, etc. Here we attempt\n         * to keep the presentation of the <textarea> stable by using the previous used\n         * style if multiple tokens come into play. This avoids flickering.\n         */\n        this._previousPresentation = null;\n    }\n    prepareRender(visibleRangeProvider) {\n        const startModelPosition = new Position(this.modelLineNumber, this.distanceToModelLineStart + 1);\n        const endModelPosition = new Position(this.modelLineNumber, this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber) - this.distanceToModelLineEnd);\n        this.startPosition = this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(startModelPosition);\n        this.endPosition = this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(endModelPosition);\n        if (this.startPosition.lineNumber === this.endPosition.lineNumber) {\n            this.visibleTextareaStart = visibleRangeProvider.visibleRangeForPosition(this.startPosition);\n            this.visibleTextareaEnd = visibleRangeProvider.visibleRangeForPosition(this.endPosition);\n        }\n        else {\n            // TODO: what if the view positions are not on the same line?\n            this.visibleTextareaStart = null;\n            this.visibleTextareaEnd = null;\n        }\n    }\n    definePresentation(tokenPresentation) {\n        if (!this._previousPresentation) {\n            // To avoid flickering, once set, always reuse a presentation throughout the entire IME session\n            if (tokenPresentation) {\n                this._previousPresentation = tokenPresentation;\n            }\n            else {\n                this._previousPresentation = {\n                    foreground: 1 /* ColorId.DefaultForeground */,\n                    italic: false,\n                    bold: false,\n                    underline: false,\n                    strikethrough: false,\n                };\n            }\n        }\n        return this._previousPresentation;\n    }\n}\nconst canUseZeroSizeTextarea = (browser.isFirefox);\nexport class TextAreaHandler extends ViewPart {\n    constructor(context, viewController, visibleRangeProvider) {\n        super(context);\n        this._primaryCursorPosition = new Position(1, 1);\n        this._primaryCursorVisibleRange = null;\n        this._viewController = viewController;\n        this._visibleRangeProvider = visibleRangeProvider;\n        this._scrollLeft = 0;\n        this._scrollTop = 0;\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(138 /* EditorOption.layoutInfo */);\n        this._setAccessibilityOptions(options);\n        this._contentLeft = layoutInfo.contentLeft;\n        this._contentWidth = layoutInfo.contentWidth;\n        this._contentHeight = layoutInfo.height;\n        this._fontInfo = options.get(47 /* EditorOption.fontInfo */);\n        this._lineHeight = options.get(63 /* EditorOption.lineHeight */);\n        this._emptySelectionClipboard = options.get(34 /* EditorOption.emptySelectionClipboard */);\n        this._copyWithSyntaxHighlighting = options.get(22 /* EditorOption.copyWithSyntaxHighlighting */);\n        this._visibleTextArea = null;\n        this._selections = [new Selection(1, 1, 1, 1)];\n        this._modelSelections = [new Selection(1, 1, 1, 1)];\n        this._lastRenderPosition = null;\n        // Text Area (The focus will always be in the textarea when the cursor is blinking)\n        this.textArea = createFastDomNode(document.createElement('textarea'));\n        PartFingerprints.write(this.textArea, 6 /* PartFingerprint.TextArea */);\n        this.textArea.setClassName(`inputarea ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`);\n        this.textArea.setAttribute('wrap', this._textAreaWrapping && !this._visibleTextArea ? 'on' : 'off');\n        const { tabSize } = this._context.viewModel.model.getOptions();\n        this.textArea.domNode.style.tabSize = `${tabSize * this._fontInfo.spaceWidth}px`;\n        this.textArea.setAttribute('autocorrect', 'off');\n        this.textArea.setAttribute('autocapitalize', 'off');\n        this.textArea.setAttribute('autocomplete', 'off');\n        this.textArea.setAttribute('spellcheck', 'false');\n        this.textArea.setAttribute('aria-label', this._getAriaLabel(options));\n        this.textArea.setAttribute('tabindex', String(options.get(118 /* EditorOption.tabIndex */)));\n        this.textArea.setAttribute('role', 'textbox');\n        this.textArea.setAttribute('aria-roledescription', nls.localize('editor', \"editor\"));\n        this.textArea.setAttribute('aria-multiline', 'true');\n        this.textArea.setAttribute('aria-haspopup', 'false');\n        this.textArea.setAttribute('aria-autocomplete', 'both');\n        this._ensureReadOnlyAttribute();\n        this.textAreaCover = createFastDomNode(document.createElement('div'));\n        this.textAreaCover.setPosition('absolute');\n        const simpleModel = {\n            getLineCount: () => {\n                return this._context.viewModel.getLineCount();\n            },\n            getLineMaxColumn: (lineNumber) => {\n                return this._context.viewModel.getLineMaxColumn(lineNumber);\n            },\n            getValueInRange: (range, eol) => {\n                return this._context.viewModel.getValueInRange(range, eol);\n            },\n            getValueLengthInRange: (range, eol) => {\n                return this._context.viewModel.getValueLengthInRange(range, eol);\n            },\n            modifyPosition: (position, offset) => {\n                return this._context.viewModel.modifyPosition(position, offset);\n            }\n        };\n        const textAreaInputHost = {\n            getDataToCopy: () => {\n                const rawTextToCopy = this._context.viewModel.getPlainTextToCopy(this._modelSelections, this._emptySelectionClipboard, platform.isWindows);\n                const newLineCharacter = this._context.viewModel.model.getEOL();\n                const isFromEmptySelection = (this._emptySelectionClipboard && this._modelSelections.length === 1 && this._modelSelections[0].isEmpty());\n                const multicursorText = (Array.isArray(rawTextToCopy) ? rawTextToCopy : null);\n                const text = (Array.isArray(rawTextToCopy) ? rawTextToCopy.join(newLineCharacter) : rawTextToCopy);\n                let html = undefined;\n                let mode = null;\n                if (CopyOptions.forceCopyWithSyntaxHighlighting || (this._copyWithSyntaxHighlighting && text.length < 65536)) {\n                    const richText = this._context.viewModel.getRichTextToCopy(this._modelSelections, this._emptySelectionClipboard);\n                    if (richText) {\n                        html = richText.html;\n                        mode = richText.mode;\n                    }\n                }\n                return {\n                    isFromEmptySelection,\n                    multicursorText,\n                    text,\n                    html,\n                    mode\n                };\n            },\n            getScreenReaderContent: () => {\n                if (this._accessibilitySupport === 1 /* AccessibilitySupport.Disabled */) {\n                    // We know for a fact that a screen reader is not attached\n                    // On OSX, we write the character before the cursor to allow for \"long-press\" composition\n                    // Also on OSX, we write the word before the cursor to allow for the Accessibility Keyboard to give good hints\n                    const selection = this._selections[0];\n                    if (platform.isMacintosh && selection.isEmpty()) {\n                        const position = selection.getStartPosition();\n                        let textBefore = this._getWordBeforePosition(position);\n                        if (textBefore.length === 0) {\n                            textBefore = this._getCharacterBeforePosition(position);\n                        }\n                        if (textBefore.length > 0) {\n                            return new TextAreaState(textBefore, textBefore.length, textBefore.length, Range.fromPositions(position), 0);\n                        }\n                    }\n                    // on macOS, write current selection into textarea will allow system text services pick selected text,\n                    // but we still want to limit the amount of text given Chromium handles very poorly text even of a few\n                    // thousand chars\n                    // (https://github.com/microsoft/vscode/issues/27799)\n                    const LIMIT_CHARS = 500;\n                    if (platform.isMacintosh && !selection.isEmpty() && simpleModel.getValueLengthInRange(selection, 0 /* EndOfLinePreference.TextDefined */) < LIMIT_CHARS) {\n                        const text = simpleModel.getValueInRange(selection, 0 /* EndOfLinePreference.TextDefined */);\n                        return new TextAreaState(text, 0, text.length, selection, 0);\n                    }\n                    // on Safari, document.execCommand('cut') and document.execCommand('copy') will just not work\n                    // if the textarea has no content selected. So if there is an editor selection, ensure something\n                    // is selected in the textarea.\n                    if (browser.isSafari && !selection.isEmpty()) {\n                        const placeholderText = 'vscode-placeholder';\n                        return new TextAreaState(placeholderText, 0, placeholderText.length, null, undefined);\n                    }\n                    return TextAreaState.EMPTY;\n                }\n                if (browser.isAndroid) {\n                    // when tapping in the editor on a word, Android enters composition mode.\n                    // in the `compositionstart` event we cannot clear the textarea, because\n                    // it then forgets to ever send a `compositionend`.\n                    // we therefore only write the current word in the textarea\n                    const selection = this._selections[0];\n                    if (selection.isEmpty()) {\n                        const position = selection.getStartPosition();\n                        const [wordAtPosition, positionOffsetInWord] = this._getAndroidWordAtPosition(position);\n                        if (wordAtPosition.length > 0) {\n                            return new TextAreaState(wordAtPosition, positionOffsetInWord, positionOffsetInWord, Range.fromPositions(position), 0);\n                        }\n                    }\n                    return TextAreaState.EMPTY;\n                }\n                return PagedScreenReaderStrategy.fromEditorSelection(simpleModel, this._selections[0], this._accessibilityPageSize, this._accessibilitySupport === 0 /* AccessibilitySupport.Unknown */);\n            },\n            deduceModelPosition: (viewAnchorPosition, deltaOffset, lineFeedCnt) => {\n                return this._context.viewModel.deduceModelPositionRelativeToViewPosition(viewAnchorPosition, deltaOffset, lineFeedCnt);\n            }\n        };\n        const textAreaWrapper = this._register(new TextAreaWrapper(this.textArea.domNode));\n        this._textAreaInput = this._register(new TextAreaInput(textAreaInputHost, textAreaWrapper, platform.OS, browser));\n        this._register(this._textAreaInput.onKeyDown((e) => {\n            this._viewController.emitKeyDown(e);\n        }));\n        this._register(this._textAreaInput.onKeyUp((e) => {\n            this._viewController.emitKeyUp(e);\n        }));\n        this._register(this._textAreaInput.onPaste((e) => {\n            let pasteOnNewLine = false;\n            let multicursorText = null;\n            let mode = null;\n            if (e.metadata) {\n                pasteOnNewLine = (this._emptySelectionClipboard && !!e.metadata.isFromEmptySelection);\n                multicursorText = (typeof e.metadata.multicursorText !== 'undefined' ? e.metadata.multicursorText : null);\n                mode = e.metadata.mode;\n            }\n            this._viewController.paste(e.text, pasteOnNewLine, multicursorText, mode);\n        }));\n        this._register(this._textAreaInput.onCut(() => {\n            this._viewController.cut();\n        }));\n        this._register(this._textAreaInput.onType((e) => {\n            if (e.replacePrevCharCnt || e.replaceNextCharCnt || e.positionDelta) {\n                // must be handled through the new command\n                if (_debugComposition) {\n                    console.log(` => compositionType: <<${e.text}>>, ${e.replacePrevCharCnt}, ${e.replaceNextCharCnt}, ${e.positionDelta}`);\n                }\n                this._viewController.compositionType(e.text, e.replacePrevCharCnt, e.replaceNextCharCnt, e.positionDelta);\n            }\n            else {\n                if (_debugComposition) {\n                    console.log(` => type: <<${e.text}>>`);\n                }\n                this._viewController.type(e.text);\n            }\n        }));\n        this._register(this._textAreaInput.onSelectionChangeRequest((modelSelection) => {\n            this._viewController.setSelection(modelSelection);\n        }));\n        this._register(this._textAreaInput.onCompositionStart((e) => {\n            // The textarea might contain some content when composition starts.\n            //\n            // When we make the textarea visible, it always has a height of 1 line,\n            // so we don't need to worry too much about content on lines above or below\n            // the selection.\n            //\n            // However, the text on the current line needs to be made visible because\n            // some IME methods allow to move to other glyphs on the current line\n            // (by pressing arrow keys).\n            //\n            // (1) The textarea might contain only some parts of the current line,\n            // like the word before the selection. Also, the content inside the textarea\n            // can grow or shrink as composition occurs. We therefore anchor the textarea\n            // in terms of distance to a certain line start and line end.\n            //\n            // (2) Also, we should not make \\t characters visible, because their rendering\n            // inside the <textarea> will not align nicely with our rendering. We therefore\n            // will hide (if necessary) some of the leading text on the current line.\n            const ta = this.textArea.domNode;\n            const modelSelection = this._modelSelections[0];\n            const { distanceToModelLineStart, widthOfHiddenTextBefore } = (() => {\n                // Find the text that is on the current line before the selection\n                const textBeforeSelection = ta.value.substring(0, Math.min(ta.selectionStart, ta.selectionEnd));\n                const lineFeedOffset1 = textBeforeSelection.lastIndexOf('\\n');\n                const lineTextBeforeSelection = textBeforeSelection.substring(lineFeedOffset1 + 1);\n                // We now search to see if we should hide some part of it (if it contains \\t)\n                const tabOffset1 = lineTextBeforeSelection.lastIndexOf('\\t');\n                const desiredVisibleBeforeCharCount = lineTextBeforeSelection.length - tabOffset1 - 1;\n                const startModelPosition = modelSelection.getStartPosition();\n                const visibleBeforeCharCount = Math.min(startModelPosition.column - 1, desiredVisibleBeforeCharCount);\n                const distanceToModelLineStart = startModelPosition.column - 1 - visibleBeforeCharCount;\n                const hiddenLineTextBefore = lineTextBeforeSelection.substring(0, lineTextBeforeSelection.length - visibleBeforeCharCount);\n                const { tabSize } = this._context.viewModel.model.getOptions();\n                const widthOfHiddenTextBefore = measureText(hiddenLineTextBefore, this._fontInfo, tabSize);\n                return { distanceToModelLineStart, widthOfHiddenTextBefore };\n            })();\n            const { distanceToModelLineEnd } = (() => {\n                // Find the text that is on the current line after the selection\n                const textAfterSelection = ta.value.substring(Math.max(ta.selectionStart, ta.selectionEnd));\n                const lineFeedOffset2 = textAfterSelection.indexOf('\\n');\n                const lineTextAfterSelection = lineFeedOffset2 === -1 ? textAfterSelection : textAfterSelection.substring(0, lineFeedOffset2);\n                const tabOffset2 = lineTextAfterSelection.indexOf('\\t');\n                const desiredVisibleAfterCharCount = (tabOffset2 === -1 ? lineTextAfterSelection.length : lineTextAfterSelection.length - tabOffset2 - 1);\n                const endModelPosition = modelSelection.getEndPosition();\n                const visibleAfterCharCount = Math.min(this._context.viewModel.model.getLineMaxColumn(endModelPosition.lineNumber) - endModelPosition.column, desiredVisibleAfterCharCount);\n                const distanceToModelLineEnd = this._context.viewModel.model.getLineMaxColumn(endModelPosition.lineNumber) - endModelPosition.column - visibleAfterCharCount;\n                return { distanceToModelLineEnd };\n            })();\n            // Scroll to reveal the location in the editor where composition occurs\n            this._context.viewModel.revealRange('keyboard', true, Range.fromPositions(this._selections[0].getStartPosition()), 0 /* viewEvents.VerticalRevealType.Simple */, 1 /* ScrollType.Immediate */);\n            this._visibleTextArea = new VisibleTextAreaData(this._context, modelSelection.startLineNumber, distanceToModelLineStart, widthOfHiddenTextBefore, distanceToModelLineEnd);\n            // We turn off wrapping if the <textarea> becomes visible for composition\n            this.textArea.setAttribute('wrap', this._textAreaWrapping && !this._visibleTextArea ? 'on' : 'off');\n            this._visibleTextArea.prepareRender(this._visibleRangeProvider);\n            this._render();\n            // Show the textarea\n            this.textArea.setClassName(`inputarea ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME} ime-input`);\n            this._viewController.compositionStart();\n            this._context.viewModel.onCompositionStart();\n        }));\n        this._register(this._textAreaInput.onCompositionUpdate((e) => {\n            if (!this._visibleTextArea) {\n                return;\n            }\n            this._visibleTextArea.prepareRender(this._visibleRangeProvider);\n            this._render();\n        }));\n        this._register(this._textAreaInput.onCompositionEnd(() => {\n            this._visibleTextArea = null;\n            // We turn on wrapping as necessary if the <textarea> hides after composition\n            this.textArea.setAttribute('wrap', this._textAreaWrapping && !this._visibleTextArea ? 'on' : 'off');\n            this._render();\n            this.textArea.setClassName(`inputarea ${MOUSE_CURSOR_TEXT_CSS_CLASS_NAME}`);\n            this._viewController.compositionEnd();\n            this._context.viewModel.onCompositionEnd();\n        }));\n        this._register(this._textAreaInput.onFocus(() => {\n            this._context.viewModel.setHasFocus(true);\n        }));\n        this._register(this._textAreaInput.onBlur(() => {\n            this._context.viewModel.setHasFocus(false);\n        }));\n        this._register(IME.onDidChange(() => {\n            this._ensureReadOnlyAttribute();\n        }));\n    }\n    writeScreenReaderContent(reason) {\n        this._textAreaInput.writeScreenReaderContent(reason);\n    }\n    dispose() {\n        super.dispose();\n    }\n    _getAndroidWordAtPosition(position) {\n        const ANDROID_WORD_SEPARATORS = '`~!@#$%^&*()-=+[{]}\\\\|;:\",.<>/?';\n        const lineContent = this._context.viewModel.getLineContent(position.lineNumber);\n        const wordSeparators = getMapForWordSeparators(ANDROID_WORD_SEPARATORS);\n        let goingLeft = true;\n        let startColumn = position.column;\n        let goingRight = true;\n        let endColumn = position.column;\n        let distance = 0;\n        while (distance < 50 && (goingLeft || goingRight)) {\n            if (goingLeft && startColumn <= 1) {\n                goingLeft = false;\n            }\n            if (goingLeft) {\n                const charCode = lineContent.charCodeAt(startColumn - 2);\n                const charClass = wordSeparators.get(charCode);\n                if (charClass !== 0 /* WordCharacterClass.Regular */) {\n                    goingLeft = false;\n                }\n                else {\n                    startColumn--;\n                }\n            }\n            if (goingRight && endColumn > lineContent.length) {\n                goingRight = false;\n            }\n            if (goingRight) {\n                const charCode = lineContent.charCodeAt(endColumn - 1);\n                const charClass = wordSeparators.get(charCode);\n                if (charClass !== 0 /* WordCharacterClass.Regular */) {\n                    goingRight = false;\n                }\n                else {\n                    endColumn++;\n                }\n            }\n            distance++;\n        }\n        return [lineContent.substring(startColumn - 1, endColumn - 1), position.column - startColumn];\n    }\n    _getWordBeforePosition(position) {\n        const lineContent = this._context.viewModel.getLineContent(position.lineNumber);\n        const wordSeparators = getMapForWordSeparators(this._context.configuration.options.get(124 /* EditorOption.wordSeparators */));\n        let column = position.column;\n        let distance = 0;\n        while (column > 1) {\n            const charCode = lineContent.charCodeAt(column - 2);\n            const charClass = wordSeparators.get(charCode);\n            if (charClass !== 0 /* WordCharacterClass.Regular */ || distance > 50) {\n                return lineContent.substring(column - 1, position.column - 1);\n            }\n            distance++;\n            column--;\n        }\n        return lineContent.substring(0, position.column - 1);\n    }\n    _getCharacterBeforePosition(position) {\n        if (position.column > 1) {\n            const lineContent = this._context.viewModel.getLineContent(position.lineNumber);\n            const charBefore = lineContent.charAt(position.column - 2);\n            if (!strings.isHighSurrogate(charBefore.charCodeAt(0))) {\n                return charBefore;\n            }\n        }\n        return '';\n    }\n    _getAriaLabel(options) {\n        const accessibilitySupport = options.get(2 /* EditorOption.accessibilitySupport */);\n        if (accessibilitySupport === 1 /* AccessibilitySupport.Disabled */) {\n            return nls.localize('accessibilityOffAriaLabel', \"The editor is not accessible at this time. Press {0} for options.\", platform.isLinux ? 'Shift+Alt+F1' : 'Alt+F1');\n        }\n        return options.get(4 /* EditorOption.ariaLabel */);\n    }\n    _setAccessibilityOptions(options) {\n        this._accessibilitySupport = options.get(2 /* EditorOption.accessibilitySupport */);\n        const accessibilityPageSize = options.get(3 /* EditorOption.accessibilityPageSize */);\n        if (this._accessibilitySupport === 2 /* AccessibilitySupport.Enabled */ && accessibilityPageSize === EditorOptions.accessibilityPageSize.defaultValue) {\n            // If a screen reader is attached and the default value is not set we should automatically increase the page size to 500 for a better experience\n            this._accessibilityPageSize = 500;\n        }\n        else {\n            this._accessibilityPageSize = accessibilityPageSize;\n        }\n        // When wrapping is enabled and a screen reader might be attached,\n        // we will size the textarea to match the width used for wrapping points computation (see `domLineBreaksComputer.ts`).\n        // This is because screen readers will read the text in the textarea and we'd like that the\n        // wrapping points in the textarea match the wrapping points in the editor.\n        const layoutInfo = options.get(138 /* EditorOption.layoutInfo */);\n        const wrappingColumn = layoutInfo.wrappingColumn;\n        if (wrappingColumn !== -1 && this._accessibilitySupport !== 1 /* AccessibilitySupport.Disabled */) {\n            const fontInfo = options.get(47 /* EditorOption.fontInfo */);\n            this._textAreaWrapping = true;\n            this._textAreaWidth = Math.round(wrappingColumn * fontInfo.typicalHalfwidthCharacterWidth);\n        }\n        else {\n            this._textAreaWrapping = false;\n            this._textAreaWidth = (canUseZeroSizeTextarea ? 0 : 1);\n        }\n    }\n    // --- begin event handlers\n    onConfigurationChanged(e) {\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(138 /* EditorOption.layoutInfo */);\n        this._setAccessibilityOptions(options);\n        this._contentLeft = layoutInfo.contentLeft;\n        this._contentWidth = layoutInfo.contentWidth;\n        this._contentHeight = layoutInfo.height;\n        this._fontInfo = options.get(47 /* EditorOption.fontInfo */);\n        this._lineHeight = options.get(63 /* EditorOption.lineHeight */);\n        this._emptySelectionClipboard = options.get(34 /* EditorOption.emptySelectionClipboard */);\n        this._copyWithSyntaxHighlighting = options.get(22 /* EditorOption.copyWithSyntaxHighlighting */);\n        this.textArea.setAttribute('wrap', this._textAreaWrapping && !this._visibleTextArea ? 'on' : 'off');\n        const { tabSize } = this._context.viewModel.model.getOptions();\n        this.textArea.domNode.style.tabSize = `${tabSize * this._fontInfo.spaceWidth}px`;\n        this.textArea.setAttribute('aria-label', this._getAriaLabel(options));\n        this.textArea.setAttribute('tabindex', String(options.get(118 /* EditorOption.tabIndex */)));\n        if (e.hasChanged(31 /* EditorOption.domReadOnly */) || e.hasChanged(86 /* EditorOption.readOnly */)) {\n            this._ensureReadOnlyAttribute();\n        }\n        if (e.hasChanged(2 /* EditorOption.accessibilitySupport */)) {\n            this._textAreaInput.writeScreenReaderContent('strategy changed');\n        }\n        return true;\n    }\n    onCursorStateChanged(e) {\n        this._selections = e.selections.slice(0);\n        this._modelSelections = e.modelSelections.slice(0);\n        // We must update the <textarea> synchronously, otherwise long press IME on macos breaks.\n        // See https://github.com/microsoft/vscode/issues/165821\n        this._textAreaInput.writeScreenReaderContent('selection changed');\n        return true;\n    }\n    onDecorationsChanged(e) {\n        // true for inline decorations that can end up relayouting text\n        return true;\n    }\n    onFlushed(e) {\n        return true;\n    }\n    onLinesChanged(e) {\n        return true;\n    }\n    onLinesDeleted(e) {\n        return true;\n    }\n    onLinesInserted(e) {\n        return true;\n    }\n    onScrollChanged(e) {\n        this._scrollLeft = e.scrollLeft;\n        this._scrollTop = e.scrollTop;\n        return true;\n    }\n    onZonesChanged(e) {\n        return true;\n    }\n    // --- end event handlers\n    // --- begin view API\n    isFocused() {\n        return this._textAreaInput.isFocused();\n    }\n    focusTextArea() {\n        this._textAreaInput.focusTextArea();\n    }\n    getLastRenderData() {\n        return this._lastRenderPosition;\n    }\n    setAriaOptions(options) {\n        if (options.activeDescendant) {\n            this.textArea.setAttribute('aria-haspopup', 'true');\n            this.textArea.setAttribute('aria-autocomplete', 'list');\n            this.textArea.setAttribute('aria-activedescendant', options.activeDescendant);\n        }\n        else {\n            this.textArea.setAttribute('aria-haspopup', 'false');\n            this.textArea.setAttribute('aria-autocomplete', 'both');\n            this.textArea.removeAttribute('aria-activedescendant');\n        }\n        if (options.role) {\n            this.textArea.setAttribute('role', options.role);\n        }\n    }\n    // --- end view API\n    _ensureReadOnlyAttribute() {\n        const options = this._context.configuration.options;\n        // When someone requests to disable IME, we set the \"readonly\" attribute on the <textarea>.\n        // This will prevent composition.\n        const useReadOnly = !IME.enabled || (options.get(31 /* EditorOption.domReadOnly */) && options.get(86 /* EditorOption.readOnly */));\n        if (useReadOnly) {\n            this.textArea.setAttribute('readonly', 'true');\n        }\n        else {\n            this.textArea.removeAttribute('readonly');\n        }\n    }\n    prepareRender(ctx) {\n        var _a;\n        this._primaryCursorPosition = new Position(this._selections[0].positionLineNumber, this._selections[0].positionColumn);\n        this._primaryCursorVisibleRange = ctx.visibleRangeForPosition(this._primaryCursorPosition);\n        (_a = this._visibleTextArea) === null || _a === void 0 ? void 0 : _a.prepareRender(ctx);\n    }\n    render(ctx) {\n        this._textAreaInput.writeScreenReaderContent('render');\n        this._render();\n    }\n    _render() {\n        var _a;\n        if (this._visibleTextArea) {\n            // The text area is visible for composition reasons\n            const visibleStart = this._visibleTextArea.visibleTextareaStart;\n            const visibleEnd = this._visibleTextArea.visibleTextareaEnd;\n            const startPosition = this._visibleTextArea.startPosition;\n            const endPosition = this._visibleTextArea.endPosition;\n            if (startPosition && endPosition && visibleStart && visibleEnd && visibleEnd.left >= this._scrollLeft && visibleStart.left <= this._scrollLeft + this._contentWidth) {\n                const top = (this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber) - this._scrollTop);\n                const lineCount = this._newlinecount(this.textArea.domNode.value.substr(0, this.textArea.domNode.selectionStart));\n                let scrollLeft = this._visibleTextArea.widthOfHiddenLineTextBefore;\n                let left = (this._contentLeft + visibleStart.left - this._scrollLeft);\n                // See https://github.com/microsoft/vscode/issues/141725#issuecomment-1050670841\n                // Here we are adding +1 to avoid flickering that might be caused by having a width that is too small.\n                // This could be caused by rounding errors that might only show up with certain font families.\n                // In other words, a pixel might be lost when doing something like\n                //      `Math.round(end) - Math.round(start)`\n                // vs\n                //      `Math.round(end - start)`\n                let width = visibleEnd.left - visibleStart.left + 1;\n                if (left < this._contentLeft) {\n                    // the textarea would be rendered on top of the margin,\n                    // so reduce its width. We use the same technique as\n                    // for hiding text before\n                    const delta = (this._contentLeft - left);\n                    left += delta;\n                    scrollLeft += delta;\n                    width -= delta;\n                }\n                if (width > this._contentWidth) {\n                    // the textarea would be wider than the content width,\n                    // so reduce its width.\n                    width = this._contentWidth;\n                }\n                // Try to render the textarea with the color/font style to match the text under it\n                const viewLineData = this._context.viewModel.getViewLineData(startPosition.lineNumber);\n                const startTokenIndex = viewLineData.tokens.findTokenIndexAtOffset(startPosition.column - 1);\n                const endTokenIndex = viewLineData.tokens.findTokenIndexAtOffset(endPosition.column - 1);\n                const textareaSpansSingleToken = (startTokenIndex === endTokenIndex);\n                const presentation = this._visibleTextArea.definePresentation((textareaSpansSingleToken ? viewLineData.tokens.getPresentation(startTokenIndex) : null));\n                this.textArea.domNode.scrollTop = lineCount * this._lineHeight;\n                this.textArea.domNode.scrollLeft = scrollLeft;\n                this._doRender({\n                    lastRenderPosition: null,\n                    top: top,\n                    left: left,\n                    width: width,\n                    height: this._lineHeight,\n                    useCover: false,\n                    color: (TokenizationRegistry.getColorMap() || [])[presentation.foreground],\n                    italic: presentation.italic,\n                    bold: presentation.bold,\n                    underline: presentation.underline,\n                    strikethrough: presentation.strikethrough\n                });\n            }\n            return;\n        }\n        if (!this._primaryCursorVisibleRange) {\n            // The primary cursor is outside the viewport => place textarea to the top left\n            this._renderAtTopLeft();\n            return;\n        }\n        const left = this._contentLeft + this._primaryCursorVisibleRange.left - this._scrollLeft;\n        if (left < this._contentLeft || left > this._contentLeft + this._contentWidth) {\n            // cursor is outside the viewport\n            this._renderAtTopLeft();\n            return;\n        }\n        const top = this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber) - this._scrollTop;\n        if (top < 0 || top > this._contentHeight) {\n            // cursor is outside the viewport\n            this._renderAtTopLeft();\n            return;\n        }\n        // The primary cursor is in the viewport (at least vertically) => place textarea on the cursor\n        if (platform.isMacintosh) {\n            // For the popup emoji input, we will make the text area as high as the line height\n            // We will also make the fontSize and lineHeight the correct dimensions to help with the placement of these pickers\n            this._doRender({\n                lastRenderPosition: this._primaryCursorPosition,\n                top,\n                left: this._textAreaWrapping ? this._contentLeft : left,\n                width: this._textAreaWidth,\n                height: this._lineHeight,\n                useCover: false\n            });\n            // In case the textarea contains a word, we're going to try to align the textarea's cursor\n            // with our cursor by scrolling the textarea as much as possible\n            this.textArea.domNode.scrollLeft = this._primaryCursorVisibleRange.left;\n            const lineCount = (_a = this._textAreaInput.textAreaState.newlineCountBeforeSelection) !== null && _a !== void 0 ? _a : this._newlinecount(this.textArea.domNode.value.substr(0, this.textArea.domNode.selectionStart));\n            this.textArea.domNode.scrollTop = lineCount * this._lineHeight;\n            return;\n        }\n        this._doRender({\n            lastRenderPosition: this._primaryCursorPosition,\n            top: top,\n            left: this._textAreaWrapping ? this._contentLeft : left,\n            width: this._textAreaWidth,\n            height: (canUseZeroSizeTextarea ? 0 : 1),\n            useCover: false\n        });\n    }\n    _newlinecount(text) {\n        let result = 0;\n        let startIndex = -1;\n        do {\n            startIndex = text.indexOf('\\n', startIndex + 1);\n            if (startIndex === -1) {\n                break;\n            }\n            result++;\n        } while (true);\n        return result;\n    }\n    _renderAtTopLeft() {\n        // (in WebKit the textarea is 1px by 1px because it cannot handle input to a 0x0 textarea)\n        // specifically, when doing Korean IME, setting the textarea to 0x0 breaks IME badly.\n        this._doRender({\n            lastRenderPosition: null,\n            top: 0,\n            left: 0,\n            width: this._textAreaWidth,\n            height: (canUseZeroSizeTextarea ? 0 : 1),\n            useCover: true\n        });\n    }\n    _doRender(renderData) {\n        this._lastRenderPosition = renderData.lastRenderPosition;\n        const ta = this.textArea;\n        const tac = this.textAreaCover;\n        applyFontInfo(ta, this._fontInfo);\n        ta.setTop(renderData.top);\n        ta.setLeft(renderData.left);\n        ta.setWidth(renderData.width);\n        ta.setHeight(renderData.height);\n        ta.setColor(renderData.color ? Color.Format.CSS.formatHex(renderData.color) : '');\n        ta.setFontStyle(renderData.italic ? 'italic' : '');\n        if (renderData.bold) {\n            // fontWeight is also set by `applyFontInfo`, so only overwrite it if necessary\n            ta.setFontWeight('bold');\n        }\n        ta.setTextDecoration(`${renderData.underline ? ' underline' : ''}${renderData.strikethrough ? ' line-through' : ''}`);\n        tac.setTop(renderData.useCover ? renderData.top : 0);\n        tac.setLeft(renderData.useCover ? renderData.left : 0);\n        tac.setWidth(renderData.useCover ? renderData.width : 0);\n        tac.setHeight(renderData.useCover ? renderData.height : 0);\n        const options = this._context.configuration.options;\n        if (options.get(54 /* EditorOption.glyphMargin */)) {\n            tac.setClassName('monaco-editor-background textAreaCover ' + Margin.OUTER_CLASS_NAME);\n        }\n        else {\n            if (options.get(64 /* EditorOption.lineNumbers */).renderType !== 0 /* RenderLineNumbersType.Off */) {\n                tac.setClassName('monaco-editor-background textAreaCover ' + LineNumbersOverlay.CLASS_NAME);\n            }\n            else {\n                tac.setClassName('monaco-editor-background textAreaCover');\n            }\n        }\n    }\n}\nfunction measureText(text, fontInfo, tabSize) {\n    if (text.length === 0) {\n        return 0;\n    }\n    const container = document.createElement('div');\n    container.style.position = 'absolute';\n    container.style.top = '-50000px';\n    container.style.width = '50000px';\n    const regularDomNode = document.createElement('span');\n    applyFontInfo(regularDomNode, fontInfo);\n    regularDomNode.style.whiteSpace = 'pre'; // just like the textarea\n    regularDomNode.style.tabSize = `${tabSize * fontInfo.spaceWidth}px`; // just like the textarea\n    regularDomNode.append(text);\n    container.appendChild(regularDomNode);\n    document.body.appendChild(container);\n    const res = regularDomNode.offsetWidth;\n    document.body.removeChild(container);\n    return res;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from '../../../base/browser/browser.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { DomEmitter } from '../../../base/browser/event.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { inputLatency } from '../../../base/browser/performance.js';\nimport { RunOnceScheduler } from '../../../base/common/async.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../base/common/mime.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { TextAreaState, _debugComposition } from './textAreaState.js';\nimport { Selection } from '../../common/core/selection.js';\nexport var TextAreaSyntethicEvents;\n(function (TextAreaSyntethicEvents) {\n    TextAreaSyntethicEvents.Tap = '-monaco-textarea-synthetic-tap';\n})(TextAreaSyntethicEvents || (TextAreaSyntethicEvents = {}));\nexport const CopyOptions = {\n    forceCopyWithSyntaxHighlighting: false\n};\n/**\n * Every time we write to the clipboard, we record a bit of extra metadata here.\n * Every time we read from the cipboard, if the text matches our last written text,\n * we can fetch the previous metadata.\n */\nclass InMemoryClipboardMetadataManager {\n    constructor() {\n        this._lastState = null;\n    }\n    set(lastCopiedValue, data) {\n        this._lastState = { lastCopiedValue, data };\n    }\n    get(pastedText) {\n        if (this._lastState && this._lastState.lastCopiedValue === pastedText) {\n            // match!\n            return this._lastState.data;\n        }\n        this._lastState = null;\n        return null;\n    }\n}\nInMemoryClipboardMetadataManager.INSTANCE = new InMemoryClipboardMetadataManager();\nexport { InMemoryClipboardMetadataManager };\nclass CompositionContext {\n    constructor() {\n        this._lastTypeTextLength = 0;\n    }\n    handleCompositionUpdate(text) {\n        text = text || '';\n        const typeInput = {\n            text: text,\n            replacePrevCharCnt: this._lastTypeTextLength,\n            replaceNextCharCnt: 0,\n            positionDelta: 0\n        };\n        this._lastTypeTextLength = text.length;\n        return typeInput;\n    }\n}\n/**\n * Writes screen reader content to the textarea and is able to analyze its input events to generate:\n *  - onCut\n *  - onPaste\n *  - onType\n *\n * Composition events are generated for presentation purposes (composition input is reflected in onType).\n */\nexport class TextAreaInput extends Disposable {\n    get textAreaState() {\n        return this._textAreaState;\n    }\n    constructor(_host, _textArea, _OS, _browser) {\n        super();\n        this._host = _host;\n        this._textArea = _textArea;\n        this._OS = _OS;\n        this._browser = _browser;\n        this._onFocus = this._register(new Emitter());\n        this.onFocus = this._onFocus.event;\n        this._onBlur = this._register(new Emitter());\n        this.onBlur = this._onBlur.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._onKeyUp = this._register(new Emitter());\n        this.onKeyUp = this._onKeyUp.event;\n        this._onCut = this._register(new Emitter());\n        this.onCut = this._onCut.event;\n        this._onPaste = this._register(new Emitter());\n        this.onPaste = this._onPaste.event;\n        this._onType = this._register(new Emitter());\n        this.onType = this._onType.event;\n        this._onCompositionStart = this._register(new Emitter());\n        this.onCompositionStart = this._onCompositionStart.event;\n        this._onCompositionUpdate = this._register(new Emitter());\n        this.onCompositionUpdate = this._onCompositionUpdate.event;\n        this._onCompositionEnd = this._register(new Emitter());\n        this.onCompositionEnd = this._onCompositionEnd.event;\n        this._onSelectionChangeRequest = this._register(new Emitter());\n        this.onSelectionChangeRequest = this._onSelectionChangeRequest.event;\n        this._asyncTriggerCut = this._register(new RunOnceScheduler(() => this._onCut.fire(), 0));\n        this._asyncFocusGainWriteScreenReaderContent = this._register(new RunOnceScheduler(() => this.writeScreenReaderContent('asyncFocusGain'), 0));\n        this._textAreaState = TextAreaState.EMPTY;\n        this._selectionChangeListener = null;\n        this.writeScreenReaderContent('ctor');\n        this._hasFocus = false;\n        this._currentComposition = null;\n        let lastKeyDown = null;\n        this._register(this._textArea.onKeyDown((_e) => {\n            const e = new StandardKeyboardEvent(_e);\n            if (e.keyCode === 109 /* KeyCode.KEY_IN_COMPOSITION */\n                || (this._currentComposition && e.keyCode === 1 /* KeyCode.Backspace */)) {\n                // Stop propagation for keyDown events if the IME is processing key input\n                e.stopPropagation();\n            }\n            if (e.equals(9 /* KeyCode.Escape */)) {\n                // Prevent default always for `Esc`, otherwise it will generate a keypress\n                // See https://msdn.microsoft.com/en-us/library/ie/ms536939(v=vs.85).aspx\n                e.preventDefault();\n            }\n            lastKeyDown = e;\n            this._onKeyDown.fire(e);\n        }));\n        this._register(this._textArea.onKeyUp((_e) => {\n            const e = new StandardKeyboardEvent(_e);\n            this._onKeyUp.fire(e);\n        }));\n        this._register(this._textArea.onCompositionStart((e) => {\n            if (_debugComposition) {\n                console.log(`[compositionstart]`, e);\n            }\n            const currentComposition = new CompositionContext();\n            if (this._currentComposition) {\n                // simply reset the composition context\n                this._currentComposition = currentComposition;\n                return;\n            }\n            this._currentComposition = currentComposition;\n            if (this._OS === 2 /* OperatingSystem.Macintosh */\n                && lastKeyDown\n                && lastKeyDown.equals(109 /* KeyCode.KEY_IN_COMPOSITION */)\n                && this._textAreaState.selectionStart === this._textAreaState.selectionEnd\n                && this._textAreaState.selectionStart > 0\n                && this._textAreaState.value.substr(this._textAreaState.selectionStart - 1, 1) === e.data\n                && (lastKeyDown.code === 'ArrowRight' || lastKeyDown.code === 'ArrowLeft')) {\n                // Handling long press case on Chromium/Safari macOS + arrow key => pretend the character was selected\n                if (_debugComposition) {\n                    console.log(`[compositionstart] Handling long press case on macOS + arrow key`, e);\n                }\n                // Pretend the previous character was composed (in order to get it removed by subsequent compositionupdate events)\n                currentComposition.handleCompositionUpdate('x');\n                this._onCompositionStart.fire({ data: e.data });\n                return;\n            }\n            if (this._browser.isAndroid) {\n                // when tapping on the editor, Android enters composition mode to edit the current word\n                // so we cannot clear the textarea on Android and we must pretend the current word was selected\n                this._onCompositionStart.fire({ data: e.data });\n                return;\n            }\n            this._onCompositionStart.fire({ data: e.data });\n        }));\n        this._register(this._textArea.onCompositionUpdate((e) => {\n            if (_debugComposition) {\n                console.log(`[compositionupdate]`, e);\n            }\n            const currentComposition = this._currentComposition;\n            if (!currentComposition) {\n                // should not be possible to receive a 'compositionupdate' without a 'compositionstart'\n                return;\n            }\n            if (this._browser.isAndroid) {\n                // On Android, the data sent with the composition update event is unusable.\n                // For example, if the cursor is in the middle of a word like Mic|osoft\n                // and Microsoft is chosen from the keyboard's suggestions, the e.data will contain \"Microsoft\".\n                // This is not really usable because it doesn't tell us where the edit began and where it ended.\n                const newState = TextAreaState.readFromTextArea(this._textArea, this._textAreaState);\n                const typeInput = TextAreaState.deduceAndroidCompositionInput(this._textAreaState, newState);\n                this._textAreaState = newState;\n                this._onType.fire(typeInput);\n                this._onCompositionUpdate.fire(e);\n                return;\n            }\n            const typeInput = currentComposition.handleCompositionUpdate(e.data);\n            this._textAreaState = TextAreaState.readFromTextArea(this._textArea, this._textAreaState);\n            this._onType.fire(typeInput);\n            this._onCompositionUpdate.fire(e);\n        }));\n        this._register(this._textArea.onCompositionEnd((e) => {\n            if (_debugComposition) {\n                console.log(`[compositionend]`, e);\n            }\n            const currentComposition = this._currentComposition;\n            if (!currentComposition) {\n                // https://github.com/microsoft/monaco-editor/issues/1663\n                // On iOS 13.2, Chinese system IME randomly trigger an additional compositionend event with empty data\n                return;\n            }\n            this._currentComposition = null;\n            if (this._browser.isAndroid) {\n                // On Android, the data sent with the composition update event is unusable.\n                // For example, if the cursor is in the middle of a word like Mic|osoft\n                // and Microsoft is chosen from the keyboard's suggestions, the e.data will contain \"Microsoft\".\n                // This is not really usable because it doesn't tell us where the edit began and where it ended.\n                const newState = TextAreaState.readFromTextArea(this._textArea, this._textAreaState);\n                const typeInput = TextAreaState.deduceAndroidCompositionInput(this._textAreaState, newState);\n                this._textAreaState = newState;\n                this._onType.fire(typeInput);\n                this._onCompositionEnd.fire();\n                return;\n            }\n            const typeInput = currentComposition.handleCompositionUpdate(e.data);\n            this._textAreaState = TextAreaState.readFromTextArea(this._textArea, this._textAreaState);\n            this._onType.fire(typeInput);\n            this._onCompositionEnd.fire();\n        }));\n        this._register(this._textArea.onInput((e) => {\n            if (_debugComposition) {\n                console.log(`[input]`, e);\n            }\n            // Pretend here we touched the text area, as the `input` event will most likely\n            // result in a `selectionchange` event which we want to ignore\n            this._textArea.setIgnoreSelectionChangeTime('received input event');\n            if (this._currentComposition) {\n                return;\n            }\n            const newState = TextAreaState.readFromTextArea(this._textArea, this._textAreaState);\n            const typeInput = TextAreaState.deduceInput(this._textAreaState, newState, /*couldBeEmojiInput*/ this._OS === 2 /* OperatingSystem.Macintosh */);\n            if (typeInput.replacePrevCharCnt === 0 && typeInput.text.length === 1) {\n                // one character was typed\n                if (strings.isHighSurrogate(typeInput.text.charCodeAt(0))\n                    || typeInput.text.charCodeAt(0) === 0x7f /* Delete */) {\n                    // Ignore invalid input but keep it around for next time\n                    return;\n                }\n            }\n            this._textAreaState = newState;\n            if (typeInput.text !== ''\n                || typeInput.replacePrevCharCnt !== 0\n                || typeInput.replaceNextCharCnt !== 0\n                || typeInput.positionDelta !== 0) {\n                this._onType.fire(typeInput);\n            }\n        }));\n        // --- Clipboard operations\n        this._register(this._textArea.onCut((e) => {\n            // Pretend here we touched the text area, as the `cut` event will most likely\n            // result in a `selectionchange` event which we want to ignore\n            this._textArea.setIgnoreSelectionChangeTime('received cut event');\n            this._ensureClipboardGetsEditorSelection(e);\n            this._asyncTriggerCut.schedule();\n        }));\n        this._register(this._textArea.onCopy((e) => {\n            this._ensureClipboardGetsEditorSelection(e);\n        }));\n        this._register(this._textArea.onPaste((e) => {\n            // Pretend here we touched the text area, as the `paste` event will most likely\n            // result in a `selectionchange` event which we want to ignore\n            this._textArea.setIgnoreSelectionChangeTime('received paste event');\n            e.preventDefault();\n            if (!e.clipboardData) {\n                return;\n            }\n            let [text, metadata] = ClipboardEventUtils.getTextData(e.clipboardData);\n            if (!text) {\n                return;\n            }\n            // try the in-memory store\n            metadata = metadata || InMemoryClipboardMetadataManager.INSTANCE.get(text);\n            this._onPaste.fire({\n                text: text,\n                metadata: metadata\n            });\n        }));\n        this._register(this._textArea.onFocus(() => {\n            const hadFocus = this._hasFocus;\n            this._setHasFocus(true);\n            if (this._browser.isSafari && !hadFocus && this._hasFocus) {\n                // When \"tabbing into\" the textarea, immediately after dispatching the 'focus' event,\n                // Safari will always move the selection at offset 0 in the textarea\n                this._asyncFocusGainWriteScreenReaderContent.schedule();\n            }\n        }));\n        this._register(this._textArea.onBlur(() => {\n            if (this._currentComposition) {\n                // See https://github.com/microsoft/vscode/issues/112621\n                // where compositionend is not triggered when the editor\n                // is taken off-dom during a composition\n                // Clear the flag to be able to write to the textarea\n                this._currentComposition = null;\n                // Clear the textarea to avoid an unwanted cursor type\n                this.writeScreenReaderContent('blurWithoutCompositionEnd');\n                // Fire artificial composition end\n                this._onCompositionEnd.fire();\n            }\n            this._setHasFocus(false);\n        }));\n        this._register(this._textArea.onSyntheticTap(() => {\n            if (this._browser.isAndroid && this._currentComposition) {\n                // on Android, tapping does not cancel the current composition, so the\n                // textarea is stuck showing the old composition\n                // Clear the flag to be able to write to the textarea\n                this._currentComposition = null;\n                // Clear the textarea to avoid an unwanted cursor type\n                this.writeScreenReaderContent('tapWithoutCompositionEnd');\n                // Fire artificial composition end\n                this._onCompositionEnd.fire();\n            }\n        }));\n    }\n    _installSelectionChangeListener() {\n        // See https://github.com/microsoft/vscode/issues/27216 and https://github.com/microsoft/vscode/issues/98256\n        // When using a Braille display, it is possible for users to reposition the\n        // system caret. This is reflected in Chrome as a `selectionchange` event.\n        //\n        // The `selectionchange` event appears to be emitted under numerous other circumstances,\n        // so it is quite a challenge to distinguish a `selectionchange` coming in from a user\n        // using a Braille display from all the other cases.\n        //\n        // The problems with the `selectionchange` event are:\n        //  * the event is emitted when the textarea is focused programmatically -- textarea.focus()\n        //  * the event is emitted when the selection is changed in the textarea programmatically -- textarea.setSelectionRange(...)\n        //  * the event is emitted when the value of the textarea is changed programmatically -- textarea.value = '...'\n        //  * the event is emitted when tabbing into the textarea\n        //  * the event is emitted asynchronously (sometimes with a delay as high as a few tens of ms)\n        //  * the event sometimes comes in bursts for a single logical textarea operation\n        // `selectionchange` events often come multiple times for a single logical change\n        // so throttle multiple `selectionchange` events that burst in a short period of time.\n        let previousSelectionChangeEventTime = 0;\n        return dom.addDisposableListener(document, 'selectionchange', (e) => {\n            inputLatency.onSelectionChange();\n            if (!this._hasFocus) {\n                return;\n            }\n            if (this._currentComposition) {\n                return;\n            }\n            if (!this._browser.isChrome) {\n                // Support only for Chrome until testing happens on other browsers\n                return;\n            }\n            const now = Date.now();\n            const delta1 = now - previousSelectionChangeEventTime;\n            previousSelectionChangeEventTime = now;\n            if (delta1 < 5) {\n                // received another `selectionchange` event within 5ms of the previous `selectionchange` event\n                // => ignore it\n                return;\n            }\n            const delta2 = now - this._textArea.getIgnoreSelectionChangeTime();\n            this._textArea.resetSelectionChangeTime();\n            if (delta2 < 100) {\n                // received a `selectionchange` event within 100ms since we touched the textarea\n                // => ignore it, since we caused it\n                return;\n            }\n            if (!this._textAreaState.selection) {\n                // Cannot correlate a position in the textarea with a position in the editor...\n                return;\n            }\n            const newValue = this._textArea.getValue();\n            if (this._textAreaState.value !== newValue) {\n                // Cannot correlate a position in the textarea with a position in the editor...\n                return;\n            }\n            const newSelectionStart = this._textArea.getSelectionStart();\n            const newSelectionEnd = this._textArea.getSelectionEnd();\n            if (this._textAreaState.selectionStart === newSelectionStart && this._textAreaState.selectionEnd === newSelectionEnd) {\n                // Nothing to do...\n                return;\n            }\n            const _newSelectionStartPosition = this._textAreaState.deduceEditorPosition(newSelectionStart);\n            const newSelectionStartPosition = this._host.deduceModelPosition(_newSelectionStartPosition[0], _newSelectionStartPosition[1], _newSelectionStartPosition[2]);\n            const _newSelectionEndPosition = this._textAreaState.deduceEditorPosition(newSelectionEnd);\n            const newSelectionEndPosition = this._host.deduceModelPosition(_newSelectionEndPosition[0], _newSelectionEndPosition[1], _newSelectionEndPosition[2]);\n            const newSelection = new Selection(newSelectionStartPosition.lineNumber, newSelectionStartPosition.column, newSelectionEndPosition.lineNumber, newSelectionEndPosition.column);\n            this._onSelectionChangeRequest.fire(newSelection);\n        });\n    }\n    dispose() {\n        super.dispose();\n        if (this._selectionChangeListener) {\n            this._selectionChangeListener.dispose();\n            this._selectionChangeListener = null;\n        }\n    }\n    focusTextArea() {\n        // Setting this._hasFocus and writing the screen reader content\n        // will result in a focus() and setSelectionRange() in the textarea\n        this._setHasFocus(true);\n        // If the editor is off DOM, focus cannot be really set, so let's double check that we have managed to set the focus\n        this.refreshFocusState();\n    }\n    isFocused() {\n        return this._hasFocus;\n    }\n    refreshFocusState() {\n        this._setHasFocus(this._textArea.hasFocus());\n    }\n    _setHasFocus(newHasFocus) {\n        if (this._hasFocus === newHasFocus) {\n            // no change\n            return;\n        }\n        this._hasFocus = newHasFocus;\n        if (this._selectionChangeListener) {\n            this._selectionChangeListener.dispose();\n            this._selectionChangeListener = null;\n        }\n        if (this._hasFocus) {\n            this._selectionChangeListener = this._installSelectionChangeListener();\n        }\n        if (this._hasFocus) {\n            this.writeScreenReaderContent('focusgain');\n        }\n        if (this._hasFocus) {\n            this._onFocus.fire();\n        }\n        else {\n            this._onBlur.fire();\n        }\n    }\n    _setAndWriteTextAreaState(reason, textAreaState) {\n        if (!this._hasFocus) {\n            textAreaState = textAreaState.collapseSelection();\n        }\n        textAreaState.writeToTextArea(reason, this._textArea, this._hasFocus);\n        this._textAreaState = textAreaState;\n    }\n    writeScreenReaderContent(reason) {\n        if (this._currentComposition) {\n            // Do not write to the text area when doing composition\n            return;\n        }\n        this._setAndWriteTextAreaState(reason, this._host.getScreenReaderContent());\n    }\n    _ensureClipboardGetsEditorSelection(e) {\n        const dataToCopy = this._host.getDataToCopy();\n        const storedMetadata = {\n            version: 1,\n            isFromEmptySelection: dataToCopy.isFromEmptySelection,\n            multicursorText: dataToCopy.multicursorText,\n            mode: dataToCopy.mode\n        };\n        InMemoryClipboardMetadataManager.INSTANCE.set(\n        // When writing \"LINE\\r\\n\" to the clipboard and then pasting,\n        // Firefox pastes \"LINE\\n\", so let's work around this quirk\n        (this._browser.isFirefox ? dataToCopy.text.replace(/\\r\\n/g, '\\n') : dataToCopy.text), storedMetadata);\n        e.preventDefault();\n        if (e.clipboardData) {\n            ClipboardEventUtils.setTextData(e.clipboardData, dataToCopy.text, dataToCopy.html, storedMetadata);\n        }\n    }\n}\nclass ClipboardEventUtils {\n    static getTextData(clipboardData) {\n        const text = clipboardData.getData(Mimes.text);\n        let metadata = null;\n        const rawmetadata = clipboardData.getData('vscode-editor-data');\n        if (typeof rawmetadata === 'string') {\n            try {\n                metadata = JSON.parse(rawmetadata);\n                if (metadata.version !== 1) {\n                    metadata = null;\n                }\n            }\n            catch (err) {\n                // no problem!\n            }\n        }\n        if (text.length === 0 && metadata === null && clipboardData.files.length > 0) {\n            // no textual data pasted, generate text from file names\n            const files = Array.prototype.slice.call(clipboardData.files, 0);\n            return [files.map(file => file.name).join('\\n'), null];\n        }\n        return [text, metadata];\n    }\n    static setTextData(clipboardData, text, html, metadata) {\n        clipboardData.setData(Mimes.text, text);\n        if (typeof html === 'string') {\n            clipboardData.setData('text/html', html);\n        }\n        clipboardData.setData('vscode-editor-data', JSON.stringify(metadata));\n    }\n}\nexport class TextAreaWrapper extends Disposable {\n    constructor(_actual) {\n        super();\n        this._actual = _actual;\n        this.onKeyDown = this._register(new DomEmitter(this._actual, 'keydown')).event;\n        this.onKeyUp = this._register(new DomEmitter(this._actual, 'keyup')).event;\n        this.onCompositionStart = this._register(new DomEmitter(this._actual, 'compositionstart')).event;\n        this.onCompositionUpdate = this._register(new DomEmitter(this._actual, 'compositionupdate')).event;\n        this.onCompositionEnd = this._register(new DomEmitter(this._actual, 'compositionend')).event;\n        this.onBeforeInput = this._register(new DomEmitter(this._actual, 'beforeinput')).event;\n        this.onInput = this._register(new DomEmitter(this._actual, 'input')).event;\n        this.onCut = this._register(new DomEmitter(this._actual, 'cut')).event;\n        this.onCopy = this._register(new DomEmitter(this._actual, 'copy')).event;\n        this.onPaste = this._register(new DomEmitter(this._actual, 'paste')).event;\n        this.onFocus = this._register(new DomEmitter(this._actual, 'focus')).event;\n        this.onBlur = this._register(new DomEmitter(this._actual, 'blur')).event;\n        this._onSyntheticTap = this._register(new Emitter());\n        this.onSyntheticTap = this._onSyntheticTap.event;\n        this._ignoreSelectionChangeTime = 0;\n        this._register(this.onKeyDown(() => inputLatency.onKeyDown()));\n        this._register(this.onBeforeInput(() => inputLatency.onBeforeInput()));\n        this._register(this.onInput(() => inputLatency.onInput()));\n        this._register(this.onKeyUp(() => inputLatency.onKeyUp()));\n        this._register(dom.addDisposableListener(this._actual, TextAreaSyntethicEvents.Tap, () => this._onSyntheticTap.fire()));\n    }\n    hasFocus() {\n        const shadowRoot = dom.getShadowRoot(this._actual);\n        if (shadowRoot) {\n            return shadowRoot.activeElement === this._actual;\n        }\n        else if (dom.isInDOM(this._actual)) {\n            return document.activeElement === this._actual;\n        }\n        else {\n            return false;\n        }\n    }\n    setIgnoreSelectionChangeTime(reason) {\n        this._ignoreSelectionChangeTime = Date.now();\n    }\n    getIgnoreSelectionChangeTime() {\n        return this._ignoreSelectionChangeTime;\n    }\n    resetSelectionChangeTime() {\n        this._ignoreSelectionChangeTime = 0;\n    }\n    getValue() {\n        // console.log('current value: ' + this._textArea.value);\n        return this._actual.value;\n    }\n    setValue(reason, value) {\n        const textArea = this._actual;\n        if (textArea.value === value) {\n            // No change\n            return;\n        }\n        // console.log('reason: ' + reason + ', current value: ' + textArea.value + ' => new value: ' + value);\n        this.setIgnoreSelectionChangeTime('setValue');\n        textArea.value = value;\n    }\n    getSelectionStart() {\n        return this._actual.selectionDirection === 'backward' ? this._actual.selectionEnd : this._actual.selectionStart;\n    }\n    getSelectionEnd() {\n        return this._actual.selectionDirection === 'backward' ? this._actual.selectionStart : this._actual.selectionEnd;\n    }\n    setSelectionRange(reason, selectionStart, selectionEnd) {\n        const textArea = this._actual;\n        let activeElement = null;\n        const shadowRoot = dom.getShadowRoot(textArea);\n        if (shadowRoot) {\n            activeElement = shadowRoot.activeElement;\n        }\n        else {\n            activeElement = document.activeElement;\n        }\n        const currentIsFocused = (activeElement === textArea);\n        const currentSelectionStart = textArea.selectionStart;\n        const currentSelectionEnd = textArea.selectionEnd;\n        if (currentIsFocused && currentSelectionStart === selectionStart && currentSelectionEnd === selectionEnd) {\n            // No change\n            // Firefox iframe bug https://github.com/microsoft/monaco-editor/issues/643#issuecomment-367871377\n            if (browser.isFirefox && window.parent !== window) {\n                textArea.focus();\n            }\n            return;\n        }\n        // console.log('reason: ' + reason + ', setSelectionRange: ' + selectionStart + ' -> ' + selectionEnd);\n        if (currentIsFocused) {\n            // No need to focus, only need to change the selection range\n            this.setIgnoreSelectionChangeTime('setSelectionRange');\n            textArea.setSelectionRange(selectionStart, selectionEnd);\n            if (browser.isFirefox && window.parent !== window) {\n                textArea.focus();\n            }\n            return;\n        }\n        // If the focus is outside the textarea, browsers will try really hard to reveal the textarea.\n        // Here, we try to undo the browser's desperate reveal.\n        try {\n            const scrollState = dom.saveParentsScrollTop(textArea);\n            this.setIgnoreSelectionChangeTime('setSelectionRange');\n            textArea.focus();\n            textArea.setSelectionRange(selectionStart, selectionEnd);\n            dom.restoreParentsScrollTop(textArea, scrollState);\n        }\n        catch (e) {\n            // Sometimes IE throws when setting selection (e.g. textarea is off-DOM)\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../base/common/strings.js';\nimport { Range } from '../../common/core/range.js';\nexport const _debugComposition = false;\nclass TextAreaState {\n    constructor(value, \n    /** the offset where selection starts inside `value` */\n    selectionStart, \n    /** the offset where selection ends inside `value` */\n    selectionEnd, \n    /** the editor range in the view coordinate system that matches the selection inside `value` */\n    selection, \n    /** the visible line count (wrapped, not necessarily matching \\n characters) for the text in `value` before `selectionStart` */\n    newlineCountBeforeSelection) {\n        this.value = value;\n        this.selectionStart = selectionStart;\n        this.selectionEnd = selectionEnd;\n        this.selection = selection;\n        this.newlineCountBeforeSelection = newlineCountBeforeSelection;\n    }\n    toString() {\n        return `[ <${this.value}>, selectionStart: ${this.selectionStart}, selectionEnd: ${this.selectionEnd}]`;\n    }\n    static readFromTextArea(textArea, previousState) {\n        const value = textArea.getValue();\n        const selectionStart = textArea.getSelectionStart();\n        const selectionEnd = textArea.getSelectionEnd();\n        let newlineCountBeforeSelection = undefined;\n        if (previousState) {\n            const valueBeforeSelectionStart = value.substring(0, selectionStart);\n            const previousValueBeforeSelectionStart = previousState.value.substring(0, previousState.selectionStart);\n            if (valueBeforeSelectionStart === previousValueBeforeSelectionStart) {\n                newlineCountBeforeSelection = previousState.newlineCountBeforeSelection;\n            }\n        }\n        return new TextAreaState(value, selectionStart, selectionEnd, null, newlineCountBeforeSelection);\n    }\n    collapseSelection() {\n        if (this.selectionStart === this.value.length) {\n            return this;\n        }\n        return new TextAreaState(this.value, this.value.length, this.value.length, null, undefined);\n    }\n    writeToTextArea(reason, textArea, select) {\n        if (_debugComposition) {\n            console.log(`writeToTextArea ${reason}: ${this.toString()}`);\n        }\n        textArea.setValue(reason, this.value);\n        if (select) {\n            textArea.setSelectionRange(reason, this.selectionStart, this.selectionEnd);\n        }\n    }\n    deduceEditorPosition(offset) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        if (offset <= this.selectionStart) {\n            const str = this.value.substring(offset, this.selectionStart);\n            return this._finishDeduceEditorPosition((_b = (_a = this.selection) === null || _a === void 0 ? void 0 : _a.getStartPosition()) !== null && _b !== void 0 ? _b : null, str, -1);\n        }\n        if (offset >= this.selectionEnd) {\n            const str = this.value.substring(this.selectionEnd, offset);\n            return this._finishDeduceEditorPosition((_d = (_c = this.selection) === null || _c === void 0 ? void 0 : _c.getEndPosition()) !== null && _d !== void 0 ? _d : null, str, 1);\n        }\n        const str1 = this.value.substring(this.selectionStart, offset);\n        if (str1.indexOf(String.fromCharCode(8230)) === -1) {\n            return this._finishDeduceEditorPosition((_f = (_e = this.selection) === null || _e === void 0 ? void 0 : _e.getStartPosition()) !== null && _f !== void 0 ? _f : null, str1, 1);\n        }\n        const str2 = this.value.substring(offset, this.selectionEnd);\n        return this._finishDeduceEditorPosition((_h = (_g = this.selection) === null || _g === void 0 ? void 0 : _g.getEndPosition()) !== null && _h !== void 0 ? _h : null, str2, -1);\n    }\n    _finishDeduceEditorPosition(anchor, deltaText, signum) {\n        let lineFeedCnt = 0;\n        let lastLineFeedIndex = -1;\n        while ((lastLineFeedIndex = deltaText.indexOf('\\n', lastLineFeedIndex + 1)) !== -1) {\n            lineFeedCnt++;\n        }\n        return [anchor, signum * deltaText.length, lineFeedCnt];\n    }\n    static deduceInput(previousState, currentState, couldBeEmojiInput) {\n        if (!previousState) {\n            // This is the EMPTY state\n            return {\n                text: '',\n                replacePrevCharCnt: 0,\n                replaceNextCharCnt: 0,\n                positionDelta: 0\n            };\n        }\n        if (_debugComposition) {\n            console.log('------------------------deduceInput');\n            console.log(`PREVIOUS STATE: ${previousState.toString()}`);\n            console.log(`CURRENT STATE: ${currentState.toString()}`);\n        }\n        const prefixLength = Math.min(strings.commonPrefixLength(previousState.value, currentState.value), previousState.selectionStart, currentState.selectionStart);\n        const suffixLength = Math.min(strings.commonSuffixLength(previousState.value, currentState.value), previousState.value.length - previousState.selectionEnd, currentState.value.length - currentState.selectionEnd);\n        const previousValue = previousState.value.substring(prefixLength, previousState.value.length - suffixLength);\n        const currentValue = currentState.value.substring(prefixLength, currentState.value.length - suffixLength);\n        const previousSelectionStart = previousState.selectionStart - prefixLength;\n        const previousSelectionEnd = previousState.selectionEnd - prefixLength;\n        const currentSelectionStart = currentState.selectionStart - prefixLength;\n        const currentSelectionEnd = currentState.selectionEnd - prefixLength;\n        if (_debugComposition) {\n            console.log(`AFTER DIFFING PREVIOUS STATE: <${previousValue}>, selectionStart: ${previousSelectionStart}, selectionEnd: ${previousSelectionEnd}`);\n            console.log(`AFTER DIFFING CURRENT STATE: <${currentValue}>, selectionStart: ${currentSelectionStart}, selectionEnd: ${currentSelectionEnd}`);\n        }\n        if (currentSelectionStart === currentSelectionEnd) {\n            // no current selection\n            const replacePreviousCharacters = (previousState.selectionStart - prefixLength);\n            if (_debugComposition) {\n                console.log(`REMOVE PREVIOUS: ${replacePreviousCharacters} chars`);\n            }\n            return {\n                text: currentValue,\n                replacePrevCharCnt: replacePreviousCharacters,\n                replaceNextCharCnt: 0,\n                positionDelta: 0\n            };\n        }\n        // there is a current selection => composition case\n        const replacePreviousCharacters = previousSelectionEnd - previousSelectionStart;\n        return {\n            text: currentValue,\n            replacePrevCharCnt: replacePreviousCharacters,\n            replaceNextCharCnt: 0,\n            positionDelta: 0\n        };\n    }\n    static deduceAndroidCompositionInput(previousState, currentState) {\n        if (!previousState) {\n            // This is the EMPTY state\n            return {\n                text: '',\n                replacePrevCharCnt: 0,\n                replaceNextCharCnt: 0,\n                positionDelta: 0\n            };\n        }\n        if (_debugComposition) {\n            console.log('------------------------deduceAndroidCompositionInput');\n            console.log(`PREVIOUS STATE: ${previousState.toString()}`);\n            console.log(`CURRENT STATE: ${currentState.toString()}`);\n        }\n        if (previousState.value === currentState.value) {\n            return {\n                text: '',\n                replacePrevCharCnt: 0,\n                replaceNextCharCnt: 0,\n                positionDelta: currentState.selectionEnd - previousState.selectionEnd\n            };\n        }\n        const prefixLength = Math.min(strings.commonPrefixLength(previousState.value, currentState.value), previousState.selectionEnd);\n        const suffixLength = Math.min(strings.commonSuffixLength(previousState.value, currentState.value), previousState.value.length - previousState.selectionEnd);\n        const previousValue = previousState.value.substring(prefixLength, previousState.value.length - suffixLength);\n        const currentValue = currentState.value.substring(prefixLength, currentState.value.length - suffixLength);\n        const previousSelectionStart = previousState.selectionStart - prefixLength;\n        const previousSelectionEnd = previousState.selectionEnd - prefixLength;\n        const currentSelectionStart = currentState.selectionStart - prefixLength;\n        const currentSelectionEnd = currentState.selectionEnd - prefixLength;\n        if (_debugComposition) {\n            console.log(`AFTER DIFFING PREVIOUS STATE: <${previousValue}>, selectionStart: ${previousSelectionStart}, selectionEnd: ${previousSelectionEnd}`);\n            console.log(`AFTER DIFFING CURRENT STATE: <${currentValue}>, selectionStart: ${currentSelectionStart}, selectionEnd: ${currentSelectionEnd}`);\n        }\n        return {\n            text: currentValue,\n            replacePrevCharCnt: previousSelectionEnd,\n            replaceNextCharCnt: previousValue.length - previousSelectionEnd,\n            positionDelta: currentSelectionEnd - currentValue.length\n        };\n    }\n}\nTextAreaState.EMPTY = new TextAreaState('', 0, 0, null, undefined);\nexport { TextAreaState };\nexport class PagedScreenReaderStrategy {\n    static _getPageOfLine(lineNumber, linesPerPage) {\n        return Math.floor((lineNumber - 1) / linesPerPage);\n    }\n    static _getRangeForPage(page, linesPerPage) {\n        const offset = page * linesPerPage;\n        const startLineNumber = offset + 1;\n        const endLineNumber = offset + linesPerPage;\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    static fromEditorSelection(model, selection, linesPerPage, trimLongText) {\n        // Chromium handles very poorly text even of a few thousand chars\n        // Cut text to avoid stalling the entire UI\n        const LIMIT_CHARS = 500;\n        const selectionStartPage = PagedScreenReaderStrategy._getPageOfLine(selection.startLineNumber, linesPerPage);\n        const selectionStartPageRange = PagedScreenReaderStrategy._getRangeForPage(selectionStartPage, linesPerPage);\n        const selectionEndPage = PagedScreenReaderStrategy._getPageOfLine(selection.endLineNumber, linesPerPage);\n        const selectionEndPageRange = PagedScreenReaderStrategy._getRangeForPage(selectionEndPage, linesPerPage);\n        let pretextRange = selectionStartPageRange.intersectRanges(new Range(1, 1, selection.startLineNumber, selection.startColumn));\n        if (trimLongText && model.getValueLengthInRange(pretextRange, 1 /* EndOfLinePreference.LF */) > LIMIT_CHARS) {\n            const pretextStart = model.modifyPosition(pretextRange.getEndPosition(), -LIMIT_CHARS);\n            pretextRange = Range.fromPositions(pretextStart, pretextRange.getEndPosition());\n        }\n        const pretext = model.getValueInRange(pretextRange, 1 /* EndOfLinePreference.LF */);\n        const lastLine = model.getLineCount();\n        const lastLineMaxColumn = model.getLineMaxColumn(lastLine);\n        let posttextRange = selectionEndPageRange.intersectRanges(new Range(selection.endLineNumber, selection.endColumn, lastLine, lastLineMaxColumn));\n        if (trimLongText && model.getValueLengthInRange(posttextRange, 1 /* EndOfLinePreference.LF */) > LIMIT_CHARS) {\n            const posttextEnd = model.modifyPosition(posttextRange.getStartPosition(), LIMIT_CHARS);\n            posttextRange = Range.fromPositions(posttextRange.getStartPosition(), posttextEnd);\n        }\n        const posttext = model.getValueInRange(posttextRange, 1 /* EndOfLinePreference.LF */);\n        let text;\n        if (selectionStartPage === selectionEndPage || selectionStartPage + 1 === selectionEndPage) {\n            // take full selection\n            text = model.getValueInRange(selection, 1 /* EndOfLinePreference.LF */);\n        }\n        else {\n            const selectionRange1 = selectionStartPageRange.intersectRanges(selection);\n            const selectionRange2 = selectionEndPageRange.intersectRanges(selection);\n            text = (model.getValueInRange(selectionRange1, 1 /* EndOfLinePreference.LF */)\n                + String.fromCharCode(8230)\n                + model.getValueInRange(selectionRange2, 1 /* EndOfLinePreference.LF */));\n        }\n        if (trimLongText && text.length > 2 * LIMIT_CHARS) {\n            text = text.substring(0, LIMIT_CHARS) + String.fromCharCode(8230) + text.substring(text.length - LIMIT_CHARS, text.length);\n        }\n        return new TextAreaState(pretext + text + posttext, pretext.length, pretext.length + text.length, selection, pretextRange.endLineNumber - pretextRange.startLineNumber);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../nls.js';\nimport { isFirefox } from '../../base/browser/browser.js';\nimport * as types from '../../base/common/types.js';\nimport { status } from '../../base/browser/ui/aria/aria.js';\nimport { Command, EditorCommand, registerEditorCommand, UndoCommand, RedoCommand, SelectAllCommand } from './editorExtensions.js';\nimport { ICodeEditorService } from './services/codeEditorService.js';\nimport { ColumnSelection } from '../common/cursor/cursorColumnSelection.js';\nimport { CursorState } from '../common/cursorCommon.js';\nimport { DeleteOperations } from '../common/cursor/cursorDeleteOperations.js';\nimport { CursorMove as CursorMove_, CursorMoveCommands } from '../common/cursor/cursorMoveCommands.js';\nimport { TypeOperations } from '../common/cursor/cursorTypeOperations.js';\nimport { Position } from '../common/core/position.js';\nimport { Range } from '../common/core/range.js';\nimport { EditorContextKeys } from '../common/editorContextKeys.js';\nimport { ContextKeyExpr } from '../../platform/contextkey/common/contextkey.js';\nimport { KeybindingsRegistry } from '../../platform/keybinding/common/keybindingsRegistry.js';\nconst CORE_WEIGHT = 0 /* KeybindingWeight.EditorCore */;\nexport class CoreEditorCommand extends EditorCommand {\n    runEditorCommand(accessor, editor, args) {\n        const viewModel = editor._getViewModel();\n        if (!viewModel) {\n            // the editor has no view => has no cursors\n            return;\n        }\n        this.runCoreEditorCommand(viewModel, args || {});\n    }\n}\nexport var EditorScroll_;\n(function (EditorScroll_) {\n    const isEditorScrollArgs = function (arg) {\n        if (!types.isObject(arg)) {\n            return false;\n        }\n        const scrollArg = arg;\n        if (!types.isString(scrollArg.to)) {\n            return false;\n        }\n        if (!types.isUndefined(scrollArg.by) && !types.isString(scrollArg.by)) {\n            return false;\n        }\n        if (!types.isUndefined(scrollArg.value) && !types.isNumber(scrollArg.value)) {\n            return false;\n        }\n        if (!types.isUndefined(scrollArg.revealCursor) && !types.isBoolean(scrollArg.revealCursor)) {\n            return false;\n        }\n        return true;\n    };\n    EditorScroll_.description = {\n        description: 'Scroll editor in the given direction',\n        args: [\n            {\n                name: 'Editor scroll argument object',\n                description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t`,\n                constraint: isEditorScrollArgs,\n                schema: {\n                    'type': 'object',\n                    'required': ['to'],\n                    'properties': {\n                        'to': {\n                            'type': 'string',\n                            'enum': ['up', 'down']\n                        },\n                        'by': {\n                            'type': 'string',\n                            'enum': ['line', 'wrappedLine', 'page', 'halfPage', 'editor']\n                        },\n                        'value': {\n                            'type': 'number',\n                            'default': 1\n                        },\n                        'revealCursor': {\n                            'type': 'boolean',\n                        }\n                    }\n                }\n            }\n        ]\n    };\n    /**\n     * Directions in the view for editor scroll command.\n     */\n    EditorScroll_.RawDirection = {\n        Up: 'up',\n        Right: 'right',\n        Down: 'down',\n        Left: 'left'\n    };\n    /**\n     * Units for editor scroll 'by' argument\n     */\n    EditorScroll_.RawUnit = {\n        Line: 'line',\n        WrappedLine: 'wrappedLine',\n        Page: 'page',\n        HalfPage: 'halfPage',\n        Editor: 'editor',\n        Column: 'column'\n    };\n    function parse(args) {\n        let direction;\n        switch (args.to) {\n            case EditorScroll_.RawDirection.Up:\n                direction = 1 /* Direction.Up */;\n                break;\n            case EditorScroll_.RawDirection.Right:\n                direction = 2 /* Direction.Right */;\n                break;\n            case EditorScroll_.RawDirection.Down:\n                direction = 3 /* Direction.Down */;\n                break;\n            case EditorScroll_.RawDirection.Left:\n                direction = 4 /* Direction.Left */;\n                break;\n            default:\n                // Illegal arguments\n                return null;\n        }\n        let unit;\n        switch (args.by) {\n            case EditorScroll_.RawUnit.Line:\n                unit = 1 /* Unit.Line */;\n                break;\n            case EditorScroll_.RawUnit.WrappedLine:\n                unit = 2 /* Unit.WrappedLine */;\n                break;\n            case EditorScroll_.RawUnit.Page:\n                unit = 3 /* Unit.Page */;\n                break;\n            case EditorScroll_.RawUnit.HalfPage:\n                unit = 4 /* Unit.HalfPage */;\n                break;\n            case EditorScroll_.RawUnit.Editor:\n                unit = 5 /* Unit.Editor */;\n                break;\n            case EditorScroll_.RawUnit.Column:\n                unit = 6 /* Unit.Column */;\n                break;\n            default:\n                unit = 2 /* Unit.WrappedLine */;\n        }\n        const value = Math.floor(args.value || 1);\n        const revealCursor = !!args.revealCursor;\n        return {\n            direction: direction,\n            unit: unit,\n            value: value,\n            revealCursor: revealCursor,\n            select: (!!args.select)\n        };\n    }\n    EditorScroll_.parse = parse;\n})(EditorScroll_ || (EditorScroll_ = {}));\nexport var RevealLine_;\n(function (RevealLine_) {\n    const isRevealLineArgs = function (arg) {\n        if (!types.isObject(arg)) {\n            return false;\n        }\n        const reveaLineArg = arg;\n        if (!types.isNumber(reveaLineArg.lineNumber) && !types.isString(reveaLineArg.lineNumber)) {\n            return false;\n        }\n        if (!types.isUndefined(reveaLineArg.at) && !types.isString(reveaLineArg.at)) {\n            return false;\n        }\n        return true;\n    };\n    RevealLine_.description = {\n        description: 'Reveal the given line at the given logical position',\n        args: [\n            {\n                name: 'Reveal line argument object',\n                description: `Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t\\`\\`\\`\n\t\t\t\t`,\n                constraint: isRevealLineArgs,\n                schema: {\n                    'type': 'object',\n                    'required': ['lineNumber'],\n                    'properties': {\n                        'lineNumber': {\n                            'type': ['number', 'string'],\n                        },\n                        'at': {\n                            'type': 'string',\n                            'enum': ['top', 'center', 'bottom']\n                        }\n                    }\n                }\n            }\n        ]\n    };\n    /**\n     * Values for reveal line 'at' argument\n     */\n    RevealLine_.RawAtArgument = {\n        Top: 'top',\n        Center: 'center',\n        Bottom: 'bottom'\n    };\n})(RevealLine_ || (RevealLine_ = {}));\nclass EditorOrNativeTextInputCommand {\n    constructor(target) {\n        // 1. handle case when focus is in editor.\n        target.addImplementation(10000, 'code-editor', (accessor, args) => {\n            // Only if editor text focus (i.e. not if editor has widget focus).\n            const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n            if (focusedEditor && focusedEditor.hasTextFocus()) {\n                return this._runEditorCommand(accessor, focusedEditor, args);\n            }\n            return false;\n        });\n        // 2. handle case when focus is in some other `input` / `textarea`.\n        target.addImplementation(1000, 'generic-dom-input-textarea', (accessor, args) => {\n            // Only if focused on an element that allows for entering text\n            const activeElement = document.activeElement;\n            if (activeElement && ['input', 'textarea'].indexOf(activeElement.tagName.toLowerCase()) >= 0) {\n                this.runDOMCommand();\n                return true;\n            }\n            return false;\n        });\n        // 3. (default) handle case when focus is somewhere else.\n        target.addImplementation(0, 'generic-dom', (accessor, args) => {\n            // Redirecting to active editor\n            const activeEditor = accessor.get(ICodeEditorService).getActiveCodeEditor();\n            if (activeEditor) {\n                activeEditor.focus();\n                return this._runEditorCommand(accessor, activeEditor, args);\n            }\n            return false;\n        });\n    }\n    _runEditorCommand(accessor, editor, args) {\n        const result = this.runEditorCommand(accessor, editor, args);\n        if (result) {\n            return result;\n        }\n        return true;\n    }\n}\nexport var CoreNavigationCommands;\n(function (CoreNavigationCommands) {\n    class BaseMoveToCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            viewModel.model.pushStackElement();\n            const cursorStateChanged = viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, [\n                CursorMoveCommands.moveTo(viewModel, viewModel.getPrimaryCursorState(), this._inSelectionMode, args.position, args.viewPosition)\n            ]);\n            if (cursorStateChanged && args.revealType !== 2 /* NavigationCommandRevealType.None */) {\n                viewModel.revealPrimaryCursor(args.source, true, true);\n            }\n        }\n    }\n    CoreNavigationCommands.MoveTo = registerEditorCommand(new BaseMoveToCommand({\n        id: '_moveTo',\n        inSelectionMode: false,\n        precondition: undefined\n    }));\n    CoreNavigationCommands.MoveToSelect = registerEditorCommand(new BaseMoveToCommand({\n        id: '_moveToSelect',\n        inSelectionMode: true,\n        precondition: undefined\n    }));\n    class ColumnSelectCommand extends CoreEditorCommand {\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            const result = this._getColumnSelectResult(viewModel, viewModel.getPrimaryCursorState(), viewModel.getCursorColumnSelectData(), args);\n            if (result === null) {\n                // invalid arguments\n                return;\n            }\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, result.viewStates.map((viewState) => CursorState.fromViewState(viewState)));\n            viewModel.setCursorColumnSelectData({\n                isReal: true,\n                fromViewLineNumber: result.fromLineNumber,\n                fromViewVisualColumn: result.fromVisualColumn,\n                toViewLineNumber: result.toLineNumber,\n                toViewVisualColumn: result.toVisualColumn\n            });\n            if (result.reversed) {\n                viewModel.revealTopMostCursor(args.source);\n            }\n            else {\n                viewModel.revealBottomMostCursor(args.source);\n            }\n        }\n    }\n    CoreNavigationCommands.ColumnSelect = registerEditorCommand(new class extends ColumnSelectCommand {\n        constructor() {\n            super({\n                id: 'columnSelect',\n                precondition: undefined\n            });\n        }\n        _getColumnSelectResult(viewModel, primary, prevColumnSelectData, args) {\n            if (typeof args.position === 'undefined' || typeof args.viewPosition === 'undefined' || typeof args.mouseColumn === 'undefined') {\n                return null;\n            }\n            // validate `args`\n            const validatedPosition = viewModel.model.validatePosition(args.position);\n            const validatedViewPosition = viewModel.coordinatesConverter.validateViewPosition(new Position(args.viewPosition.lineNumber, args.viewPosition.column), validatedPosition);\n            const fromViewLineNumber = args.doColumnSelect ? prevColumnSelectData.fromViewLineNumber : validatedViewPosition.lineNumber;\n            const fromViewVisualColumn = args.doColumnSelect ? prevColumnSelectData.fromViewVisualColumn : args.mouseColumn - 1;\n            return ColumnSelection.columnSelect(viewModel.cursorConfig, viewModel, fromViewLineNumber, fromViewVisualColumn, validatedViewPosition.lineNumber, args.mouseColumn - 1);\n        }\n    });\n    CoreNavigationCommands.CursorColumnSelectLeft = registerEditorCommand(new class extends ColumnSelectCommand {\n        constructor() {\n            super({\n                id: 'cursorColumnSelectLeft',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\n                    linux: { primary: 0 }\n                }\n            });\n        }\n        _getColumnSelectResult(viewModel, primary, prevColumnSelectData, args) {\n            return ColumnSelection.columnSelectLeft(viewModel.cursorConfig, viewModel, prevColumnSelectData);\n        }\n    });\n    CoreNavigationCommands.CursorColumnSelectRight = registerEditorCommand(new class extends ColumnSelectCommand {\n        constructor() {\n            super({\n                id: 'cursorColumnSelectRight',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\n                    linux: { primary: 0 }\n                }\n            });\n        }\n        _getColumnSelectResult(viewModel, primary, prevColumnSelectData, args) {\n            return ColumnSelection.columnSelectRight(viewModel.cursorConfig, viewModel, prevColumnSelectData);\n        }\n    });\n    class ColumnSelectUpCommand extends ColumnSelectCommand {\n        constructor(opts) {\n            super(opts);\n            this._isPaged = opts.isPaged;\n        }\n        _getColumnSelectResult(viewModel, primary, prevColumnSelectData, args) {\n            return ColumnSelection.columnSelectUp(viewModel.cursorConfig, viewModel, prevColumnSelectData, this._isPaged);\n        }\n    }\n    CoreNavigationCommands.CursorColumnSelectUp = registerEditorCommand(new ColumnSelectUpCommand({\n        isPaged: false,\n        id: 'cursorColumnSelectUp',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n            linux: { primary: 0 }\n        }\n    }));\n    CoreNavigationCommands.CursorColumnSelectPageUp = registerEditorCommand(new ColumnSelectUpCommand({\n        isPaged: true,\n        id: 'cursorColumnSelectPageUp',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 11 /* KeyCode.PageUp */,\n            linux: { primary: 0 }\n        }\n    }));\n    class ColumnSelectDownCommand extends ColumnSelectCommand {\n        constructor(opts) {\n            super(opts);\n            this._isPaged = opts.isPaged;\n        }\n        _getColumnSelectResult(viewModel, primary, prevColumnSelectData, args) {\n            return ColumnSelection.columnSelectDown(viewModel.cursorConfig, viewModel, prevColumnSelectData, this._isPaged);\n        }\n    }\n    CoreNavigationCommands.CursorColumnSelectDown = registerEditorCommand(new ColumnSelectDownCommand({\n        isPaged: false,\n        id: 'cursorColumnSelectDown',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n            linux: { primary: 0 }\n        }\n    }));\n    CoreNavigationCommands.CursorColumnSelectPageDown = registerEditorCommand(new ColumnSelectDownCommand({\n        isPaged: true,\n        id: 'cursorColumnSelectPageDown',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 12 /* KeyCode.PageDown */,\n            linux: { primary: 0 }\n        }\n    }));\n    class CursorMoveImpl extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'cursorMove',\n                precondition: undefined,\n                description: CursorMove_.description\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            const parsed = CursorMove_.parse(args);\n            if (!parsed) {\n                // illegal arguments\n                return;\n            }\n            this._runCursorMove(viewModel, args.source, parsed);\n        }\n        _runCursorMove(viewModel, source, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(source, 3 /* CursorChangeReason.Explicit */, CursorMoveImpl._move(viewModel, viewModel.getCursorStates(), args));\n            viewModel.revealPrimaryCursor(source, true);\n        }\n        static _move(viewModel, cursors, args) {\n            const inSelectionMode = args.select;\n            const value = args.value;\n            switch (args.direction) {\n                case 0 /* CursorMove_.Direction.Left */:\n                case 1 /* CursorMove_.Direction.Right */:\n                case 2 /* CursorMove_.Direction.Up */:\n                case 3 /* CursorMove_.Direction.Down */:\n                case 4 /* CursorMove_.Direction.PrevBlankLine */:\n                case 5 /* CursorMove_.Direction.NextBlankLine */:\n                case 6 /* CursorMove_.Direction.WrappedLineStart */:\n                case 7 /* CursorMove_.Direction.WrappedLineFirstNonWhitespaceCharacter */:\n                case 8 /* CursorMove_.Direction.WrappedLineColumnCenter */:\n                case 9 /* CursorMove_.Direction.WrappedLineEnd */:\n                case 10 /* CursorMove_.Direction.WrappedLineLastNonWhitespaceCharacter */:\n                    return CursorMoveCommands.simpleMove(viewModel, cursors, args.direction, inSelectionMode, value, args.unit);\n                case 11 /* CursorMove_.Direction.ViewPortTop */:\n                case 13 /* CursorMove_.Direction.ViewPortBottom */:\n                case 12 /* CursorMove_.Direction.ViewPortCenter */:\n                case 14 /* CursorMove_.Direction.ViewPortIfOutside */:\n                    return CursorMoveCommands.viewportMove(viewModel, cursors, args.direction, inSelectionMode, value);\n                default:\n                    return null;\n            }\n        }\n    }\n    CoreNavigationCommands.CursorMoveImpl = CursorMoveImpl;\n    CoreNavigationCommands.CursorMove = registerEditorCommand(new CursorMoveImpl());\n    class CursorMoveBasedCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._staticArgs = opts.args;\n        }\n        runCoreEditorCommand(viewModel, dynamicArgs) {\n            let args = this._staticArgs;\n            if (this._staticArgs.value === -1 /* Constants.PAGE_SIZE_MARKER */) {\n                // -1 is a marker for page size\n                args = {\n                    direction: this._staticArgs.direction,\n                    unit: this._staticArgs.unit,\n                    select: this._staticArgs.select,\n                    value: dynamicArgs.pageSize || viewModel.cursorConfig.pageSize\n                };\n            }\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(dynamicArgs.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.simpleMove(viewModel, viewModel.getCursorStates(), args.direction, args.select, args.value, args.unit));\n            viewModel.revealPrimaryCursor(dynamicArgs.source, true);\n        }\n    }\n    CoreNavigationCommands.CursorLeft = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 0 /* CursorMove_.Direction.Left */,\n            unit: 0 /* CursorMove_.Unit.None */,\n            select: false,\n            value: 1\n        },\n        id: 'cursorLeft',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 15 /* KeyCode.LeftArrow */,\n            mac: { primary: 15 /* KeyCode.LeftArrow */, secondary: [256 /* KeyMod.WinCtrl */ | 32 /* KeyCode.KeyB */] }\n        }\n    }));\n    CoreNavigationCommands.CursorLeftSelect = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 0 /* CursorMove_.Direction.Left */,\n            unit: 0 /* CursorMove_.Unit.None */,\n            select: true,\n            value: 1\n        },\n        id: 'cursorLeftSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */\n        }\n    }));\n    CoreNavigationCommands.CursorRight = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 1 /* CursorMove_.Direction.Right */,\n            unit: 0 /* CursorMove_.Unit.None */,\n            select: false,\n            value: 1\n        },\n        id: 'cursorRight',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 17 /* KeyCode.RightArrow */,\n            mac: { primary: 17 /* KeyCode.RightArrow */, secondary: [256 /* KeyMod.WinCtrl */ | 36 /* KeyCode.KeyF */] }\n        }\n    }));\n    CoreNavigationCommands.CursorRightSelect = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 1 /* CursorMove_.Direction.Right */,\n            unit: 0 /* CursorMove_.Unit.None */,\n            select: true,\n            value: 1\n        },\n        id: 'cursorRightSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */\n        }\n    }));\n    CoreNavigationCommands.CursorUp = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 2 /* CursorMove_.Direction.Up */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: false,\n            value: 1\n        },\n        id: 'cursorUp',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 16 /* KeyCode.UpArrow */,\n            mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n        }\n    }));\n    CoreNavigationCommands.CursorUpSelect = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 2 /* CursorMove_.Direction.Up */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: true,\n            value: 1\n        },\n        id: 'cursorUpSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */,\n            secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */],\n            mac: { primary: 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */ },\n            linux: { primary: 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */ }\n        }\n    }));\n    CoreNavigationCommands.CursorPageUp = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 2 /* CursorMove_.Direction.Up */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: false,\n            value: -1 /* Constants.PAGE_SIZE_MARKER */\n        },\n        id: 'cursorPageUp',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 11 /* KeyCode.PageUp */\n        }\n    }));\n    CoreNavigationCommands.CursorPageUpSelect = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 2 /* CursorMove_.Direction.Up */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: true,\n            value: -1 /* Constants.PAGE_SIZE_MARKER */\n        },\n        id: 'cursorPageUpSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 11 /* KeyCode.PageUp */\n        }\n    }));\n    CoreNavigationCommands.CursorDown = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 3 /* CursorMove_.Direction.Down */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: false,\n            value: 1\n        },\n        id: 'cursorDown',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 18 /* KeyCode.DownArrow */,\n            mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n        }\n    }));\n    CoreNavigationCommands.CursorDownSelect = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 3 /* CursorMove_.Direction.Down */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: true,\n            value: 1\n        },\n        id: 'cursorDownSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */,\n            secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */],\n            mac: { primary: 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */ },\n            linux: { primary: 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */ }\n        }\n    }));\n    CoreNavigationCommands.CursorPageDown = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 3 /* CursorMove_.Direction.Down */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: false,\n            value: -1 /* Constants.PAGE_SIZE_MARKER */\n        },\n        id: 'cursorPageDown',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 12 /* KeyCode.PageDown */\n        }\n    }));\n    CoreNavigationCommands.CursorPageDownSelect = registerEditorCommand(new CursorMoveBasedCommand({\n        args: {\n            direction: 3 /* CursorMove_.Direction.Down */,\n            unit: 2 /* CursorMove_.Unit.WrappedLine */,\n            select: true,\n            value: -1 /* Constants.PAGE_SIZE_MARKER */\n        },\n        id: 'cursorPageDownSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 12 /* KeyCode.PageDown */\n        }\n    }));\n    CoreNavigationCommands.CreateCursor = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'createCursor',\n                precondition: undefined\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            let newState;\n            if (args.wholeLine) {\n                newState = CursorMoveCommands.line(viewModel, viewModel.getPrimaryCursorState(), false, args.position, args.viewPosition);\n            }\n            else {\n                newState = CursorMoveCommands.moveTo(viewModel, viewModel.getPrimaryCursorState(), false, args.position, args.viewPosition);\n            }\n            const states = viewModel.getCursorStates();\n            // Check if we should remove a cursor (sort of like a toggle)\n            if (states.length > 1) {\n                const newModelPosition = (newState.modelState ? newState.modelState.position : null);\n                const newViewPosition = (newState.viewState ? newState.viewState.position : null);\n                for (let i = 0, len = states.length; i < len; i++) {\n                    const state = states[i];\n                    if (newModelPosition && !state.modelState.selection.containsPosition(newModelPosition)) {\n                        continue;\n                    }\n                    if (newViewPosition && !state.viewState.selection.containsPosition(newViewPosition)) {\n                        continue;\n                    }\n                    // => Remove the cursor\n                    states.splice(i, 1);\n                    viewModel.model.pushStackElement();\n                    viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, states);\n                    return;\n                }\n            }\n            // => Add the new cursor\n            states.push(newState);\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, states);\n        }\n    });\n    CoreNavigationCommands.LastCursorMoveToSelect = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: '_lastCursorMoveToSelect',\n                precondition: undefined\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            const lastAddedCursorIndex = viewModel.getLastAddedCursorIndex();\n            const states = viewModel.getCursorStates();\n            const newStates = states.slice(0);\n            newStates[lastAddedCursorIndex] = CursorMoveCommands.moveTo(viewModel, states[lastAddedCursorIndex], true, args.position, args.viewPosition);\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, newStates);\n        }\n    });\n    class HomeCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.moveToBeginningOfLine(viewModel, viewModel.getCursorStates(), this._inSelectionMode));\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n    }\n    CoreNavigationCommands.CursorHome = registerEditorCommand(new HomeCommand({\n        inSelectionMode: false,\n        id: 'cursorHome',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 14 /* KeyCode.Home */,\n            mac: { primary: 14 /* KeyCode.Home */, secondary: [2048 /* KeyMod.CtrlCmd */ | 15 /* KeyCode.LeftArrow */] }\n        }\n    }));\n    CoreNavigationCommands.CursorHomeSelect = registerEditorCommand(new HomeCommand({\n        inSelectionMode: true,\n        id: 'cursorHomeSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 14 /* KeyCode.Home */,\n            mac: { primary: 1024 /* KeyMod.Shift */ | 14 /* KeyCode.Home */, secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */] }\n        }\n    }));\n    class LineStartCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, this._exec(viewModel.getCursorStates()));\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n        _exec(cursors) {\n            const result = [];\n            for (let i = 0, len = cursors.length; i < len; i++) {\n                const cursor = cursors[i];\n                const lineNumber = cursor.modelState.position.lineNumber;\n                result[i] = CursorState.fromModelState(cursor.modelState.move(this._inSelectionMode, lineNumber, 1, 0));\n            }\n            return result;\n        }\n    }\n    CoreNavigationCommands.CursorLineStart = registerEditorCommand(new LineStartCommand({\n        inSelectionMode: false,\n        id: 'cursorLineStart',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 0,\n            mac: { primary: 256 /* KeyMod.WinCtrl */ | 31 /* KeyCode.KeyA */ }\n        }\n    }));\n    CoreNavigationCommands.CursorLineStartSelect = registerEditorCommand(new LineStartCommand({\n        inSelectionMode: true,\n        id: 'cursorLineStartSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 0,\n            mac: { primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 31 /* KeyCode.KeyA */ }\n        }\n    }));\n    class EndCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.moveToEndOfLine(viewModel, viewModel.getCursorStates(), this._inSelectionMode, args.sticky || false));\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n    }\n    CoreNavigationCommands.CursorEnd = registerEditorCommand(new EndCommand({\n        inSelectionMode: false,\n        id: 'cursorEnd',\n        precondition: undefined,\n        kbOpts: {\n            args: { sticky: false },\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 13 /* KeyCode.End */,\n            mac: { primary: 13 /* KeyCode.End */, secondary: [2048 /* KeyMod.CtrlCmd */ | 17 /* KeyCode.RightArrow */] }\n        },\n        description: {\n            description: `Go to End`,\n            args: [{\n                    name: 'args',\n                    schema: {\n                        type: 'object',\n                        properties: {\n                            'sticky': {\n                                description: nls.localize('stickydesc', \"Stick to the end even when going to longer lines\"),\n                                type: 'boolean',\n                                default: false\n                            }\n                        }\n                    }\n                }]\n        }\n    }));\n    CoreNavigationCommands.CursorEndSelect = registerEditorCommand(new EndCommand({\n        inSelectionMode: true,\n        id: 'cursorEndSelect',\n        precondition: undefined,\n        kbOpts: {\n            args: { sticky: false },\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 1024 /* KeyMod.Shift */ | 13 /* KeyCode.End */,\n            mac: { primary: 1024 /* KeyMod.Shift */ | 13 /* KeyCode.End */, secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */] }\n        },\n        description: {\n            description: `Select to End`,\n            args: [{\n                    name: 'args',\n                    schema: {\n                        type: 'object',\n                        properties: {\n                            'sticky': {\n                                description: nls.localize('stickydesc', \"Stick to the end even when going to longer lines\"),\n                                type: 'boolean',\n                                default: false\n                            }\n                        }\n                    }\n                }]\n        }\n    }));\n    class LineEndCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, this._exec(viewModel, viewModel.getCursorStates()));\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n        _exec(viewModel, cursors) {\n            const result = [];\n            for (let i = 0, len = cursors.length; i < len; i++) {\n                const cursor = cursors[i];\n                const lineNumber = cursor.modelState.position.lineNumber;\n                const maxColumn = viewModel.model.getLineMaxColumn(lineNumber);\n                result[i] = CursorState.fromModelState(cursor.modelState.move(this._inSelectionMode, lineNumber, maxColumn, 0));\n            }\n            return result;\n        }\n    }\n    CoreNavigationCommands.CursorLineEnd = registerEditorCommand(new LineEndCommand({\n        inSelectionMode: false,\n        id: 'cursorLineEnd',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 0,\n            mac: { primary: 256 /* KeyMod.WinCtrl */ | 35 /* KeyCode.KeyE */ }\n        }\n    }));\n    CoreNavigationCommands.CursorLineEndSelect = registerEditorCommand(new LineEndCommand({\n        inSelectionMode: true,\n        id: 'cursorLineEndSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 0,\n            mac: { primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 35 /* KeyCode.KeyE */ }\n        }\n    }));\n    class TopCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.moveToBeginningOfBuffer(viewModel, viewModel.getCursorStates(), this._inSelectionMode));\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n    }\n    CoreNavigationCommands.CursorTop = registerEditorCommand(new TopCommand({\n        inSelectionMode: false,\n        id: 'cursorTop',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 14 /* KeyCode.Home */,\n            mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */ }\n        }\n    }));\n    CoreNavigationCommands.CursorTopSelect = registerEditorCommand(new TopCommand({\n        inSelectionMode: true,\n        id: 'cursorTopSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 14 /* KeyCode.Home */,\n            mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */ }\n        }\n    }));\n    class BottomCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.moveToEndOfBuffer(viewModel, viewModel.getCursorStates(), this._inSelectionMode));\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n    }\n    CoreNavigationCommands.CursorBottom = registerEditorCommand(new BottomCommand({\n        inSelectionMode: false,\n        id: 'cursorBottom',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 13 /* KeyCode.End */,\n            mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */ }\n        }\n    }));\n    CoreNavigationCommands.CursorBottomSelect = registerEditorCommand(new BottomCommand({\n        inSelectionMode: true,\n        id: 'cursorBottomSelect',\n        precondition: undefined,\n        kbOpts: {\n            weight: CORE_WEIGHT,\n            kbExpr: EditorContextKeys.textInputFocus,\n            primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 13 /* KeyCode.End */,\n            mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */ }\n        }\n    }));\n    class EditorScrollImpl extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'editorScroll',\n                precondition: undefined,\n                description: EditorScroll_.description\n            });\n        }\n        determineScrollMethod(args) {\n            const horizontalUnits = [6 /* EditorScroll_.Unit.Column */];\n            const verticalUnits = [\n                1 /* EditorScroll_.Unit.Line */,\n                2 /* EditorScroll_.Unit.WrappedLine */,\n                3 /* EditorScroll_.Unit.Page */,\n                4 /* EditorScroll_.Unit.HalfPage */,\n                5 /* EditorScroll_.Unit.Editor */,\n                6 /* EditorScroll_.Unit.Column */\n            ];\n            const horizontalDirections = [4 /* EditorScroll_.Direction.Left */, 2 /* EditorScroll_.Direction.Right */];\n            const verticalDirections = [1 /* EditorScroll_.Direction.Up */, 3 /* EditorScroll_.Direction.Down */];\n            if (horizontalUnits.includes(args.unit) && horizontalDirections.includes(args.direction)) {\n                return this._runHorizontalEditorScroll.bind(this);\n            }\n            if (verticalUnits.includes(args.unit) && verticalDirections.includes(args.direction)) {\n                return this._runVerticalEditorScroll.bind(this);\n            }\n            return null;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            const parsed = EditorScroll_.parse(args);\n            if (!parsed) {\n                // illegal arguments\n                return;\n            }\n            const runEditorScroll = this.determineScrollMethod(parsed);\n            if (!runEditorScroll) {\n                // Incompatible unit and direction\n                return;\n            }\n            runEditorScroll(viewModel, args.source, parsed);\n        }\n        _runVerticalEditorScroll(viewModel, source, args) {\n            const desiredScrollTop = this._computeDesiredScrollTop(viewModel, args);\n            if (args.revealCursor) {\n                // must ensure cursor is in new visible range\n                const desiredVisibleViewRange = viewModel.getCompletelyVisibleViewRangeAtScrollTop(desiredScrollTop);\n                viewModel.setCursorStates(source, 3 /* CursorChangeReason.Explicit */, [\n                    CursorMoveCommands.findPositionInViewportIfOutside(viewModel, viewModel.getPrimaryCursorState(), desiredVisibleViewRange, args.select)\n                ]);\n            }\n            viewModel.viewLayout.setScrollPosition({ scrollTop: desiredScrollTop }, 0 /* ScrollType.Smooth */);\n        }\n        _computeDesiredScrollTop(viewModel, args) {\n            if (args.unit === 1 /* EditorScroll_.Unit.Line */) {\n                // scrolling by model lines\n                const futureViewport = viewModel.viewLayout.getFutureViewport();\n                const visibleViewRange = viewModel.getCompletelyVisibleViewRangeAtScrollTop(futureViewport.top);\n                const visibleModelRange = viewModel.coordinatesConverter.convertViewRangeToModelRange(visibleViewRange);\n                let desiredTopModelLineNumber;\n                if (args.direction === 1 /* EditorScroll_.Direction.Up */) {\n                    // must go x model lines up\n                    desiredTopModelLineNumber = Math.max(1, visibleModelRange.startLineNumber - args.value);\n                }\n                else {\n                    // must go x model lines down\n                    desiredTopModelLineNumber = Math.min(viewModel.model.getLineCount(), visibleModelRange.startLineNumber + args.value);\n                }\n                const viewPosition = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(desiredTopModelLineNumber, 1));\n                return viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber);\n            }\n            if (args.unit === 5 /* EditorScroll_.Unit.Editor */) {\n                let desiredTopModelLineNumber = 0;\n                if (args.direction === 3 /* EditorScroll_.Direction.Down */) {\n                    desiredTopModelLineNumber = viewModel.model.getLineCount() - viewModel.cursorConfig.pageSize;\n                }\n                return viewModel.viewLayout.getVerticalOffsetForLineNumber(desiredTopModelLineNumber);\n            }\n            let noOfLines;\n            if (args.unit === 3 /* EditorScroll_.Unit.Page */) {\n                noOfLines = viewModel.cursorConfig.pageSize * args.value;\n            }\n            else if (args.unit === 4 /* EditorScroll_.Unit.HalfPage */) {\n                noOfLines = Math.round(viewModel.cursorConfig.pageSize / 2) * args.value;\n            }\n            else {\n                noOfLines = args.value;\n            }\n            const deltaLines = (args.direction === 1 /* EditorScroll_.Direction.Up */ ? -1 : 1) * noOfLines;\n            return viewModel.viewLayout.getCurrentScrollTop() + deltaLines * viewModel.cursorConfig.lineHeight;\n        }\n        _runHorizontalEditorScroll(viewModel, source, args) {\n            const desiredScrollLeft = this._computeDesiredScrollLeft(viewModel, args);\n            viewModel.viewLayout.setScrollPosition({ scrollLeft: desiredScrollLeft }, 0 /* ScrollType.Smooth */);\n        }\n        _computeDesiredScrollLeft(viewModel, args) {\n            const deltaColumns = (args.direction === 4 /* EditorScroll_.Direction.Left */ ? -1 : 1) * args.value;\n            return viewModel.viewLayout.getCurrentScrollLeft() + deltaColumns * viewModel.cursorConfig.typicalHalfwidthCharacterWidth;\n        }\n    }\n    CoreNavigationCommands.EditorScrollImpl = EditorScrollImpl;\n    CoreNavigationCommands.EditorScroll = registerEditorCommand(new EditorScrollImpl());\n    CoreNavigationCommands.ScrollLineUp = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollLineUp',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */,\n                    mac: { primary: 256 /* KeyMod.WinCtrl */ | 11 /* KeyCode.PageUp */ }\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Up,\n                by: EditorScroll_.RawUnit.WrappedLine,\n                value: 1,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollPageUp = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollPageUp',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 11 /* KeyCode.PageUp */,\n                    win: { primary: 512 /* KeyMod.Alt */ | 11 /* KeyCode.PageUp */ },\n                    linux: { primary: 512 /* KeyMod.Alt */ | 11 /* KeyCode.PageUp */ }\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Up,\n                by: EditorScroll_.RawUnit.Page,\n                value: 1,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollEditorTop = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollEditorTop',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Up,\n                by: EditorScroll_.RawUnit.Editor,\n                value: 1,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollLineDown = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollLineDown',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */,\n                    mac: { primary: 256 /* KeyMod.WinCtrl */ | 12 /* KeyCode.PageDown */ }\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Down,\n                by: EditorScroll_.RawUnit.WrappedLine,\n                value: 1,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollPageDown = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollPageDown',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 12 /* KeyCode.PageDown */,\n                    win: { primary: 512 /* KeyMod.Alt */ | 12 /* KeyCode.PageDown */ },\n                    linux: { primary: 512 /* KeyMod.Alt */ | 12 /* KeyCode.PageDown */ }\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Down,\n                by: EditorScroll_.RawUnit.Page,\n                value: 1,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollEditorBottom = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollEditorBottom',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Down,\n                by: EditorScroll_.RawUnit.Editor,\n                value: 1,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollLeft = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollLeft',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Left,\n                by: EditorScroll_.RawUnit.Column,\n                value: 2,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    CoreNavigationCommands.ScrollRight = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'scrollRight',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            CoreNavigationCommands.EditorScroll.runCoreEditorCommand(viewModel, {\n                to: EditorScroll_.RawDirection.Right,\n                by: EditorScroll_.RawUnit.Column,\n                value: 2,\n                revealCursor: false,\n                select: false,\n                source: args.source\n            });\n        }\n    });\n    class WordCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, [\n                CursorMoveCommands.word(viewModel, viewModel.getPrimaryCursorState(), this._inSelectionMode, args.position)\n            ]);\n            if (args.revealType !== 2 /* NavigationCommandRevealType.None */) {\n                viewModel.revealPrimaryCursor(args.source, true, true);\n            }\n        }\n    }\n    CoreNavigationCommands.WordSelect = registerEditorCommand(new WordCommand({\n        inSelectionMode: false,\n        id: '_wordSelect',\n        precondition: undefined\n    }));\n    CoreNavigationCommands.WordSelectDrag = registerEditorCommand(new WordCommand({\n        inSelectionMode: true,\n        id: '_wordSelectDrag',\n        precondition: undefined\n    }));\n    CoreNavigationCommands.LastCursorWordSelect = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'lastCursorWordSelect',\n                precondition: undefined\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            const lastAddedCursorIndex = viewModel.getLastAddedCursorIndex();\n            const states = viewModel.getCursorStates();\n            const newStates = states.slice(0);\n            const lastAddedState = states[lastAddedCursorIndex];\n            newStates[lastAddedCursorIndex] = CursorMoveCommands.word(viewModel, lastAddedState, lastAddedState.modelState.hasSelection(), args.position);\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, newStates);\n        }\n    });\n    class LineCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, [\n                CursorMoveCommands.line(viewModel, viewModel.getPrimaryCursorState(), this._inSelectionMode, args.position, args.viewPosition)\n            ]);\n            if (args.revealType !== 2 /* NavigationCommandRevealType.None */) {\n                viewModel.revealPrimaryCursor(args.source, false, true);\n            }\n        }\n    }\n    CoreNavigationCommands.LineSelect = registerEditorCommand(new LineCommand({\n        inSelectionMode: false,\n        id: '_lineSelect',\n        precondition: undefined\n    }));\n    CoreNavigationCommands.LineSelectDrag = registerEditorCommand(new LineCommand({\n        inSelectionMode: true,\n        id: '_lineSelectDrag',\n        precondition: undefined\n    }));\n    class LastCursorLineCommand extends CoreEditorCommand {\n        constructor(opts) {\n            super(opts);\n            this._inSelectionMode = opts.inSelectionMode;\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.position) {\n                return;\n            }\n            const lastAddedCursorIndex = viewModel.getLastAddedCursorIndex();\n            const states = viewModel.getCursorStates();\n            const newStates = states.slice(0);\n            newStates[lastAddedCursorIndex] = CursorMoveCommands.line(viewModel, states[lastAddedCursorIndex], this._inSelectionMode, args.position, args.viewPosition);\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, newStates);\n        }\n    }\n    CoreNavigationCommands.LastCursorLineSelect = registerEditorCommand(new LastCursorLineCommand({\n        inSelectionMode: false,\n        id: 'lastCursorLineSelect',\n        precondition: undefined\n    }));\n    CoreNavigationCommands.LastCursorLineSelectDrag = registerEditorCommand(new LastCursorLineCommand({\n        inSelectionMode: true,\n        id: 'lastCursorLineSelectDrag',\n        precondition: undefined\n    }));\n    CoreNavigationCommands.CancelSelection = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'cancelSelection',\n                precondition: EditorContextKeys.hasNonEmptySelection,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 9 /* KeyCode.Escape */,\n                    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, [\n                CursorMoveCommands.cancelSelection(viewModel, viewModel.getPrimaryCursorState())\n            ]);\n            viewModel.revealPrimaryCursor(args.source, true);\n        }\n    });\n    CoreNavigationCommands.RemoveSecondaryCursors = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'removeSecondaryCursors',\n                precondition: EditorContextKeys.hasMultipleSelections,\n                kbOpts: {\n                    weight: CORE_WEIGHT + 1,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 9 /* KeyCode.Escape */,\n                    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n                }\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, [\n                viewModel.getPrimaryCursorState()\n            ]);\n            viewModel.revealPrimaryCursor(args.source, true);\n            status(nls.localize('removedCursor', \"Removed secondary cursors\"));\n        }\n    });\n    CoreNavigationCommands.RevealLine = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'revealLine',\n                precondition: undefined,\n                description: RevealLine_.description\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            const revealLineArg = args;\n            const lineNumberArg = revealLineArg.lineNumber || 0;\n            let lineNumber = typeof lineNumberArg === 'number' ? (lineNumberArg + 1) : (parseInt(lineNumberArg) + 1);\n            if (lineNumber < 1) {\n                lineNumber = 1;\n            }\n            const lineCount = viewModel.model.getLineCount();\n            if (lineNumber > lineCount) {\n                lineNumber = lineCount;\n            }\n            const range = new Range(lineNumber, 1, lineNumber, viewModel.model.getLineMaxColumn(lineNumber));\n            let revealAt = 0 /* VerticalRevealType.Simple */;\n            if (revealLineArg.at) {\n                switch (revealLineArg.at) {\n                    case RevealLine_.RawAtArgument.Top:\n                        revealAt = 3 /* VerticalRevealType.Top */;\n                        break;\n                    case RevealLine_.RawAtArgument.Center:\n                        revealAt = 1 /* VerticalRevealType.Center */;\n                        break;\n                    case RevealLine_.RawAtArgument.Bottom:\n                        revealAt = 4 /* VerticalRevealType.Bottom */;\n                        break;\n                    default:\n                        break;\n                }\n            }\n            const viewRange = viewModel.coordinatesConverter.convertModelRangeToViewRange(range);\n            viewModel.revealRange(args.source, false, viewRange, revealAt, 0 /* ScrollType.Smooth */);\n        }\n    });\n    CoreNavigationCommands.SelectAll = new class extends EditorOrNativeTextInputCommand {\n        constructor() {\n            super(SelectAllCommand);\n        }\n        runDOMCommand() {\n            if (isFirefox) {\n                document.activeElement.focus();\n                document.activeElement.select();\n            }\n            document.execCommand('selectAll');\n        }\n        runEditorCommand(accessor, editor, args) {\n            const viewModel = editor._getViewModel();\n            if (!viewModel) {\n                // the editor has no view => has no cursors\n                return;\n            }\n            this.runCoreEditorCommand(viewModel, args);\n        }\n        runCoreEditorCommand(viewModel, args) {\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates('keyboard', 3 /* CursorChangeReason.Explicit */, [\n                CursorMoveCommands.selectAll(viewModel, viewModel.getPrimaryCursorState())\n            ]);\n        }\n    }();\n    CoreNavigationCommands.SetSelection = registerEditorCommand(new class extends CoreEditorCommand {\n        constructor() {\n            super({\n                id: 'setSelection',\n                precondition: undefined\n            });\n        }\n        runCoreEditorCommand(viewModel, args) {\n            if (!args.selection) {\n                return;\n            }\n            viewModel.model.pushStackElement();\n            viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, [\n                CursorState.fromModelSelection(args.selection)\n            ]);\n        }\n    });\n})(CoreNavigationCommands || (CoreNavigationCommands = {}));\nconst columnSelectionCondition = ContextKeyExpr.and(EditorContextKeys.textInputFocus, EditorContextKeys.columnSelection);\nfunction registerColumnSelection(id, keybinding) {\n    KeybindingsRegistry.registerKeybindingRule({\n        id: id,\n        primary: keybinding,\n        when: columnSelectionCondition,\n        weight: CORE_WEIGHT + 1\n    });\n}\nregisterColumnSelection(CoreNavigationCommands.CursorColumnSelectLeft.id, 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */);\nregisterColumnSelection(CoreNavigationCommands.CursorColumnSelectRight.id, 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */);\nregisterColumnSelection(CoreNavigationCommands.CursorColumnSelectUp.id, 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */);\nregisterColumnSelection(CoreNavigationCommands.CursorColumnSelectPageUp.id, 1024 /* KeyMod.Shift */ | 11 /* KeyCode.PageUp */);\nregisterColumnSelection(CoreNavigationCommands.CursorColumnSelectDown.id, 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */);\nregisterColumnSelection(CoreNavigationCommands.CursorColumnSelectPageDown.id, 1024 /* KeyMod.Shift */ | 12 /* KeyCode.PageDown */);\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport var CoreEditingCommands;\n(function (CoreEditingCommands) {\n    class CoreEditingCommand extends EditorCommand {\n        runEditorCommand(accessor, editor, args) {\n            const viewModel = editor._getViewModel();\n            if (!viewModel) {\n                // the editor has no view => has no cursors\n                return;\n            }\n            this.runCoreEditingCommand(editor, viewModel, args || {});\n        }\n    }\n    CoreEditingCommands.CoreEditingCommand = CoreEditingCommand;\n    CoreEditingCommands.LineBreakInsert = registerEditorCommand(new class extends CoreEditingCommand {\n        constructor() {\n            super({\n                id: 'lineBreakInsert',\n                precondition: EditorContextKeys.writable,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 0,\n                    mac: { primary: 256 /* KeyMod.WinCtrl */ | 45 /* KeyCode.KeyO */ }\n                }\n            });\n        }\n        runCoreEditingCommand(editor, viewModel, args) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, TypeOperations.lineBreakInsert(viewModel.cursorConfig, viewModel.model, viewModel.getCursorStates().map(s => s.modelState.selection)));\n        }\n    });\n    CoreEditingCommands.Outdent = registerEditorCommand(new class extends CoreEditingCommand {\n        constructor() {\n            super({\n                id: 'outdent',\n                precondition: EditorContextKeys.writable,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, EditorContextKeys.tabDoesNotMoveFocus),\n                    primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n                }\n            });\n        }\n        runCoreEditingCommand(editor, viewModel, args) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, TypeOperations.outdent(viewModel.cursorConfig, viewModel.model, viewModel.getCursorStates().map(s => s.modelState.selection)));\n            editor.pushUndoStop();\n        }\n    });\n    CoreEditingCommands.Tab = registerEditorCommand(new class extends CoreEditingCommand {\n        constructor() {\n            super({\n                id: 'tab',\n                precondition: EditorContextKeys.writable,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, EditorContextKeys.tabDoesNotMoveFocus),\n                    primary: 2 /* KeyCode.Tab */\n                }\n            });\n        }\n        runCoreEditingCommand(editor, viewModel, args) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, TypeOperations.tab(viewModel.cursorConfig, viewModel.model, viewModel.getCursorStates().map(s => s.modelState.selection)));\n            editor.pushUndoStop();\n        }\n    });\n    CoreEditingCommands.DeleteLeft = registerEditorCommand(new class extends CoreEditingCommand {\n        constructor() {\n            super({\n                id: 'deleteLeft',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 1 /* KeyCode.Backspace */,\n                    secondary: [1024 /* KeyMod.Shift */ | 1 /* KeyCode.Backspace */],\n                    mac: { primary: 1 /* KeyCode.Backspace */, secondary: [1024 /* KeyMod.Shift */ | 1 /* KeyCode.Backspace */, 256 /* KeyMod.WinCtrl */ | 38 /* KeyCode.KeyH */, 256 /* KeyMod.WinCtrl */ | 1 /* KeyCode.Backspace */] }\n                }\n            });\n        }\n        runCoreEditingCommand(editor, viewModel, args) {\n            const [shouldPushStackElementBefore, commands] = DeleteOperations.deleteLeft(viewModel.getPrevEditOperationType(), viewModel.cursorConfig, viewModel.model, viewModel.getCursorStates().map(s => s.modelState.selection), viewModel.getCursorAutoClosedCharacters());\n            if (shouldPushStackElementBefore) {\n                editor.pushUndoStop();\n            }\n            editor.executeCommands(this.id, commands);\n            viewModel.setPrevEditOperationType(2 /* EditOperationType.DeletingLeft */);\n        }\n    });\n    CoreEditingCommands.DeleteRight = registerEditorCommand(new class extends CoreEditingCommand {\n        constructor() {\n            super({\n                id: 'deleteRight',\n                precondition: undefined,\n                kbOpts: {\n                    weight: CORE_WEIGHT,\n                    kbExpr: EditorContextKeys.textInputFocus,\n                    primary: 20 /* KeyCode.Delete */,\n                    mac: { primary: 20 /* KeyCode.Delete */, secondary: [256 /* KeyMod.WinCtrl */ | 34 /* KeyCode.KeyD */, 256 /* KeyMod.WinCtrl */ | 20 /* KeyCode.Delete */] }\n                }\n            });\n        }\n        runCoreEditingCommand(editor, viewModel, args) {\n            const [shouldPushStackElementBefore, commands] = DeleteOperations.deleteRight(viewModel.getPrevEditOperationType(), viewModel.cursorConfig, viewModel.model, viewModel.getCursorStates().map(s => s.modelState.selection));\n            if (shouldPushStackElementBefore) {\n                editor.pushUndoStop();\n            }\n            editor.executeCommands(this.id, commands);\n            viewModel.setPrevEditOperationType(3 /* EditOperationType.DeletingRight */);\n        }\n    });\n    CoreEditingCommands.Undo = new class extends EditorOrNativeTextInputCommand {\n        constructor() {\n            super(UndoCommand);\n        }\n        runDOMCommand() {\n            document.execCommand('undo');\n        }\n        runEditorCommand(accessor, editor, args) {\n            if (!editor.hasModel() || editor.getOption(86 /* EditorOption.readOnly */) === true) {\n                return;\n            }\n            return editor.getModel().undo();\n        }\n    }();\n    CoreEditingCommands.Redo = new class extends EditorOrNativeTextInputCommand {\n        constructor() {\n            super(RedoCommand);\n        }\n        runDOMCommand() {\n            document.execCommand('redo');\n        }\n        runEditorCommand(accessor, editor, args) {\n            if (!editor.hasModel() || editor.getOption(86 /* EditorOption.readOnly */) === true) {\n                return;\n            }\n            return editor.getModel().redo();\n        }\n    }();\n})(CoreEditingCommands || (CoreEditingCommands = {}));\n/**\n * A command that will invoke a command on the focused editor.\n */\nclass EditorHandlerCommand extends Command {\n    constructor(id, handlerId, description) {\n        super({\n            id: id,\n            precondition: undefined,\n            description: description\n        });\n        this._handlerId = handlerId;\n    }\n    runCommand(accessor, args) {\n        const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (!editor) {\n            return;\n        }\n        editor.trigger('keyboard', this._handlerId, args);\n    }\n}\nfunction registerOverwritableCommand(handlerId, description) {\n    registerCommand(new EditorHandlerCommand('default:' + handlerId, handlerId));\n    registerCommand(new EditorHandlerCommand(handlerId, handlerId, description));\n}\nregisterOverwritableCommand(\"type\" /* Handler.Type */, {\n    description: `Type`,\n    args: [{\n            name: 'args',\n            schema: {\n                'type': 'object',\n                'required': ['text'],\n                'properties': {\n                    'text': {\n                        'type': 'string'\n                    }\n                },\n            }\n        }]\n});\nregisterOverwritableCommand(\"replacePreviousChar\" /* Handler.ReplacePreviousChar */);\nregisterOverwritableCommand(\"compositionType\" /* Handler.CompositionType */);\nregisterOverwritableCommand(\"compositionStart\" /* Handler.CompositionStart */);\nregisterOverwritableCommand(\"compositionEnd\" /* Handler.CompositionEnd */);\nregisterOverwritableCommand(\"paste\" /* Handler.Paste */);\nregisterOverwritableCommand(\"cut\" /* Handler.Cut */);\n"],"names":["applyFontInfo","domNode","fontInfo","FastDomNode","setFontFamily","getMassagedFontFamily","setFontWeight","fontWeight","setFontSize","fontSize","setFontFeatureSettings","fontFeatureSettings","setFontVariationSettings","fontVariationSettings","setLineHeight","lineHeight","setLetterSpacing","letterSpacing","style","fontFamily","EditorSettingMigration","key","migrate","_classCallCheck","this","_createClass","value","options","_read","_write","source","firstDotIndex","indexOf","firstSegment","substring","target","registerEditorSettingMigration","items","push","registerSimpleEditorSettingMigration","values","read","write","_step","_iterator","_createForOfIteratorHelper","s","n","done","_step$value","_slicedToArray","oldValue","newValue","err","e","f","enabled","undefined","suggestFilteredTypesMapping","method","function","constructor","deprecated","field","variable","class","struct","interface","module","property","event","operator","unit","constant","enum","enumMember","keyword","text","color","file","reference","folder","typeParameter","snippet","_i","_Object$entries","Object","entries","length","entry","concat","input","comments","strings","other","__decorate","decorators","desc","d","c","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","EditorConfiguration","_Disposable","_inherits","_super","_createSuper","isSimpleWidget","container","_accessibilityService","_this","call","_onDidChange","_register","Emitter","onDidChange","_onDidChangeFast","onDidChangeFast","_isDominatedByLongLines","_viewLineCount","_lineNumbersDigitCount","_reservedHeight","_computeOptionsMemory","ComputeOptionsMemory","_containerObserver","ElementSizeObserver","dimension","_rawOptions","deepCloneAndMigrateOptions","_validatedOptions","EditorOptionsUtil","validateOptions","_computeOptions","get","startObserving","EditorZoom","onDidChangeZoomLevel","_recomputeOptions","TabFocus","onDidChangeTabFocus","FontMeasurements","browser","PixelRatio","onDidChangeScreenReaderOptimized","newOptions","changeEvent","checkEquals","fire","partialEnv","_readEnvConfiguration","bareFontInfo","BareFontInfo","createFromValidatedSettings","pixelRatio","_readFontInfo","env","memory","outerWidth","outerHeight","extraEditorClassName","isDominatedByLongLines","viewLineCount","lineNumbersDigitCount","emptySelectionClipboard","tabFocusMode","getTabFocusMode","accessibilitySupport","computeOptions","getExtraEditorClassName","getWidth","getHeight","isWebKit","isFirefox","isScreenReaderOptimized","getAccessibilitySupport","readFontInfo","_newOptions","applyUpdate","observe","modelLineCount","Math","floor","digitCount","reservedHeight","Disposable","extra","isSafari","isWebkitWebView","platform","IAccessibilityService","ValidatedEditorOptions","_values","option","id","ComputedEditorOptions","Error","result","editorOptionsRegistry","editorOption","name","validate","_step2","_iterator2","compute","a","b","Array","isArray","arrays","keys","_deepEquals","_step3","somethingChanged","_iterator3","changed","ConfigurationChangedEvent","update","_step4","_iterator4","hasOwnProperty","didChange","_options","objects","forEach","migration","apply","migrateOptions","referenceDomElement","_referenceDomElement","_width","_height","_resizeObserver","measureReferenceDomElement","stopObserving","_get","_getPrototypeOf","prototype","_this2","ResizeObserver","contentRect","width","height","disconnect","emitEvent","observedWidth","observedHeight","clientWidth","clientHeight","max","CharWidthRequest","chr","type","DomCharWidthReader","requests","_bareFontInfo","_requests","_container","_testElements","_createDomElements","document","body","appendChild","_readFromDomElements","removeChild","createElement","position","top","regularDomNode","boldDomNode","italicDomNode","fontStyle","testElements","request","parent","testElement","_render","len","fulfill","offsetWidth","htmlString","innerText","testString","textContent","FontMeasurementsImpl","_cache","FontMeasurementsCache","_evictUntrustedReadingsTimeout","window","clearTimeout","item","put","isTrusted","setTimeout","_evictUntrustedReadings","getValues","somethingRemoved","remove","has","readConfig","_actualReadFontInfo","typicalHalfwidthCharacterWidth","typicalFullwidthCharacterWidth","spaceWidth","maxDigitWidth","FontInfo","isMonospace","canUseHalfwidthRightwardsArrow","middotWidth","wsmiddotWidth","_writeToCache","all","monospace","typicalHalfwidthCharacter","_createRequest","typicalFullwidthCharacter","space","digit0","digit1","digit2","digit3","digit4","digit5","digit6","digit7","digit8","digit9","rightwardsArrow","halfwidthRightwardsArrow","middot","String","fromCharCode","monospaceTestChars","charAt","readCharWidths","EditorFontLigatures","OFF","referenceWidth","diff","_keys","create","itemId","getId","_this3","map","TabFocusImpl","_tabFocusTerminal","_tabFocusEditor","_onDidChangeTabFocus","context","HitTestResult","UnknownHitTestResult","hitTarget","ContentHitTestResult","spanNode","injectedText","createFromDOMInfo","ctx","offset","getPositionFromDOMInfo","PointerHandlerLastRenderData","lastViewCursorsRenderData","lastTextareaPosition","MouseTarget","range","EditorRange","lineNumber","column","element","mouseColumn","_deduceRage","detail","outsidePosition","outsideDistance","_typeToString","JSON","stringify","ElementPath","path","HitTestContext","viewHelper","lastRenderData","viewModel","configuration","layoutInfo","viewDomNode","stickyTabStops","_context","_viewHelper","mouseVerticalOffset","getZoneAtCoord","viewLayout","isAfterLines","getLineCount","maxLineColumn","getLineMaxColumn","getLineNumberAtVerticalOffset","isInTopPadding","isInBottomPadding","getVerticalOffsetForLineNumber","attr","_findAttribute","getLineWidth","visibleRangeForPosition","getCurrentScrollTop","getCurrentScrollLeft","viewZoneWhitespace","getWhitespaceAtVerticalOffset","viewZoneMiddle","verticalOffset","lineCount","positionBefore","positionAfter","afterLineNumber","Position","viewZoneId","stopAt","hasAttribute","getAttribute","parentNode","HitTestRequest","_BareHitTestRequest","editorPos","pos","relativePos","_ctx","targetPath","PartFingerprints","collect","Uint8Array","x","y","mouseContentHorizontalOffset","outerHTML","CursorColumns","visibleColumnFromColumn","getLineContent","model","getOptions","tabSize","createUnknown","_getMouseColumn","createTextarea","createMargin","createViewZone","createContentText","createContentEmpty","createContentWidget","createScrollbar","createOverlayWidget","BareHitTestRequest","contentLeft","isInMarginArea","glyphMarginLeft","isInContentArea","MouseTargetFactory","EMPTY_CONTENT_AFTER_LINES","createEmptyContentDataInLines","horizontalDistanceToText","t","isChildOfContentWidgets","isChildOfOverflowingContentWidgets","isChildOfOverlayWidgets","_createMouseTarget","_snapToSoftTabBoundary","fromPositions","plusRange","fulfillContentText","fulfillUnknown","domHitTestExecuted","hitTestResult","_doHitTest","createMouseTargetFromHitTestPosition","withTarget","resolvedRequest","_hitTestContentWidget","_hitTestOverlayWidget","_hitTestMinimap","_hitTestScrollbarSlider","_hitTestViewZone","_hitTestMargin","_hitTestViewCursor","_hitTestTextArea","_hitTestViewLines","_hitTestScrollbar","widgetId","findAttribute","fulfillContentWidget","fulfillOverlayWidget","mightBeForeignElement","cursorVerticalOffset","viewZoneData","mouseTargetType","fulfillViewZone","isTextArea","fulfillTextarea","res","getFullLineRangeAtCoord","getStartPosition","abs","glyphMarginWidth","lineNumbersWidth","offsetX","fulfillMargin","isChildOfViewLines","fulfillContentEmpty","isStrictChildOfViewLines","getLineLength","lineWidth","isChildOfMinimap","possibleLineNumber","maxColumn","fulfillScrollbar","isChildOfScrollableElement","nodeType","className","test","round","visibleRange","columnHorizontalOffset","left","points","sort","mouseCoordinates","toClientCoordinates","spanNodeClientRect","getBoundingClientRect","mouseIsOverSpanNode","clientX","right","rng","prev","curr","lineStartVerticalOffset","lineEndVerticalOffset","lineCenteredVerticalOffset","adjustedPageY","adjustedPage","PageCoordinates","_actualDoHitTestWithCaretRangeFromPoint","coords","shadowRoot","dom","caretRangeFromPoint","createRange","el","elementFromPoint","firstChild","TEXT_NODE","lastChild","step","rect","font","getComputedStyle","getPropertyValue","pixelCursor","charWidthReader","CharWidthReader","getInstance","getCharWidth","setStart","setEnd","shadowCaretRangeFromPoint","clientY","startContainer","parent1","parent2","parent3","ELEMENT_NODE","ViewLine","CLASS_NAME","startOffset","hitResult","caretPositionFromPoint","offsetNode","parent1ClassName","parent2ClassName","tokenSpan","childNodes","min","lineContent","newPosition","AtomicTabMoveOperations","atomicPosition","_doHitTestWithCaretRangeFromPoint","_doHitTestWithCaretPositionFromPoint","getInjectedTextAt","normalizedPosition","normalizePosition","equals","_canvas","char","cacheKey","getContext","measureText","_INSTANCE","MouseHandler","_ViewEventHandler","viewController","_mouseLeaveMonitor","mouseTargetFactory","_mouseDownOperation","MouseDownOperation","testEventTarget","lastMouseLeaveTime","mouseEvents","EditorMouseEventFactory","onContextMenu","_onContextMenu","onMouseMove","_onMouseMove","addDisposableListener","contains","_onMouseLeave","EditorMouseEvent","onMouseUp","_onMouseUp","onMouseLeave","capturePointerId","onPointerDown","pointerId","EventType","POINTER_UP","onPointerUp","onMouseDown","_onMouseDown","_setupMouseWheelZoomListener","addEventHandler","_assertThisInitialized","classifier","MouseWheelClassifier","INSTANCE","prevMouseWheelTime","gestureStartZoomLevel","getZoomLevel","gestureHasZoomModifiers","gestureAccumulatedDelta","hasMouseWheelZoomModifiers","browserEvent","metaKey","ctrlKey","shiftKey","altKey","MOUSE_WHEEL","emitMouseWheel","StandardWheelEvent","acceptStandardWheelEvent","isPhysicalMouseWheel","zoomLevel","delta","deltaY","setZoomLevel","preventDefault","stopPropagation","Date","now","capture","passive","removeEventHandler","dispose","hasChanged","onHeightChanged","onCursorStateChanged","ClientCoordinates","toPageCoordinates","createEditorPagePosition","createCoordinatesRelativeToEditor","createMouseTarget","getLastRenderData","getShadowRoot","elementsFromPoint","posx","posy","find","getMouseColumn","emitContextMenu","mouseTargetIsWidget","isActive","timestamp","emitMouseMove","getTime","emitMouseLeave","emitMouseUp","_this4","targetIsContent","targetIsGutter","targetIsLineNumbers","selectOnLineNumbers","targetIsViewZone","targetIsWidget","shouldHandle","leftButton","middleButton","focus","focusTextArea","start","shouldSuppressMouseDownOnViewZone","shouldSuppressMouseDownOnWidget","emitMouseDown","ViewEventHandler","_super2","_viewController","_mouseTargetFactory","_this5","_mouseMoveMonitor","GlobalEditorPointerMoveMonitor","_topBottomDragScrolling","TopBottomDragScrolling","inSelectionMode","revealType","_dispatchMouse","_mouseState","MouseDownState","_currentSelection","Selection","_isActive","_lastMouseEvent","setModifiers","_findMousePosition","isDragAndDrop","emitMouseDrag","stop","targetType","_this6","setStartedOnLineNumbers","setStartButtons","trySetCount","count","isEmpty","containsPosition","startMonitoring","viewLinesDomNode","buttons","_onMouseDownThenMove","KeyboardEvent","emitMouseDropCanceled","emitMouseDrop","_stop","stopMonitoring","selections","editorContent","_helpPositionJumpOverViewZone","createOutsideEditor","aboveLineNumber","belowLineNumber","positionOutsideEditor","_getPositionOutsideEditor","selectionStart","selectionStartLineNumber","selectionStartColumn","isBefore","dispatchMouse","startedOnLineNumbers","mouseDownCount","onInjectedText","_Disposable2","_super3","_this7","_operation","mouseEvent","setPosition","TopBottomDragScrollingOperation","_Disposable3","_super4","_this8","_position","_mouseEvent","_lastTime","_animationFrameDisposable","scheduleAtNextAnimationFrame","_execute","elapsed","viewportInLines","outsideDistanceInLines","_this9","scrollInPixels","_getScrollSpeed","_tick","scrollValue","deltaScrollNow","renderNow","mouseTarget","viewportData","getLinesViewportData","edgeLineNumber","startLineNumber","endLineNumber","horizontalScrollbarHeight","_altKey","_ctrlKey","_metaKey","_shiftKey","_leftButton","_middleButton","_startedOnLineNumbers","_lastMouseDownPosition","_lastMouseDownPositionEqualCount","_lastMouseDownCount","_lastSetMouseDownCountTime","setMouseDownCount","newMouseDownPosition","currentTime","CLEAR_MOUSE_DOWN_COUNT_TIME","PointerEventHandler","_MouseHandler","Gesture","addTarget","linesContentDomNode","Tap","onTap","Change","onChange","Contextmenu","_lastPointerType","pointerType","pointerEvents","EditorPointerEventFactory","onPointerMove","onPointerLeave","initialTarget","tapCount","translationX","translationY","TouchHandler","_MouseHandler2","createEvent","initEvent","TextAreaSyntethicEvents","dispatchTextAreaEvent","moveTo","PointerHandler","BrowserFeatures","handler","TouchEvent","getTargetAtClientPoint","VisibleTextAreaData","modelLineNumber","distanceToModelLineStart","widthOfHiddenLineTextBefore","distanceToModelLineEnd","_visibleTextAreaBrand","startPosition","endPosition","visibleTextareaStart","visibleTextareaEnd","_previousPresentation","visibleRangeProvider","startModelPosition","endModelPosition","coordinatesConverter","convertModelPositionToViewPosition","tokenPresentation","foreground","italic","bold","underline","strikethrough","canUseZeroSizeTextarea","TextAreaHandler","_ViewPart","_primaryCursorPosition","_primaryCursorVisibleRange","_visibleRangeProvider","_scrollLeft","_scrollTop","_setAccessibilityOptions","_contentLeft","_contentWidth","contentWidth","_contentHeight","_fontInfo","_lineHeight","_emptySelectionClipboard","_copyWithSyntaxHighlighting","_visibleTextArea","_selections","_modelSelections","_lastRenderPosition","textArea","createFastDomNode","setClassName","MOUSE_CURSOR_TEXT_CSS_CLASS_NAME","setAttribute","_textAreaWrapping","_getAriaLabel","nls","_ensureReadOnlyAttribute","textAreaCover","simpleModel","getValueInRange","eol","getValueLengthInRange","modifyPosition","textAreaInputHost","getDataToCopy","rawTextToCopy","getPlainTextToCopy","newLineCharacter","getEOL","isFromEmptySelection","multicursorText","join","html","mode","CopyOptions","forceCopyWithSyntaxHighlighting","richText","getRichTextToCopy","getScreenReaderContent","_accessibilitySupport","selection","textBefore","_getWordBeforePosition","_getCharacterBeforePosition","TextAreaState","Range","placeholderText","EMPTY","isAndroid","_this$_getAndroidWord","_getAndroidWordAtPosition","_this$_getAndroidWord2","wordAtPosition","positionOffsetInWord","PagedScreenReaderStrategy","fromEditorSelection","_accessibilityPageSize","deduceModelPosition","viewAnchorPosition","deltaOffset","lineFeedCnt","deduceModelPositionRelativeToViewPosition","textAreaWrapper","TextAreaWrapper","_textAreaInput","TextAreaInput","OS","onKeyDown","emitKeyDown","onKeyUp","emitKeyUp","onPaste","pasteOnNewLine","metadata","paste","onCut","cut","onType","replacePrevCharCnt","replaceNextCharCnt","positionDelta","_debugComposition","console","log","compositionType","onSelectionChangeRequest","modelSelection","setSelection","onCompositionStart","ta","_ref","textBeforeSelection","selectionEnd","lineFeedOffset1","lastIndexOf","lineTextBeforeSelection","tabOffset1","desiredVisibleBeforeCharCount","visibleBeforeCharCount","hiddenLineTextBefore","widthOfHiddenTextBefore","whiteSpace","append","textAfterSelection","lineFeedOffset2","lineTextAfterSelection","tabOffset2","desiredVisibleAfterCharCount","getEndPosition","visibleAfterCharCount","revealRange","prepareRender","compositionStart","onCompositionUpdate","onCompositionEnd","compositionEnd","onFocus","setHasFocus","onBlur","IME","reason","writeScreenReaderContent","wordSeparators","getMapForWordSeparators","goingLeft","startColumn","goingRight","endColumn","distance","charCode","charCodeAt","charBefore","accessibilityPageSize","EditorOptions","defaultValue","wrappingColumn","_textAreaWidth","slice","modelSelections","scrollLeft","scrollTop","isFocused","activeDescendant","removeAttribute","role","_a","positionLineNumber","positionColumn","visibleStart","visibleEnd","_newlinecount","substr","viewLineData","getViewLineData","startTokenIndex","tokens","findTokenIndexAtOffset","textareaSpansSingleToken","presentation","definePresentation","getPresentation","_doRender","lastRenderPosition","useCover","TokenizationRegistry","getColorMap","_renderAtTopLeft","textAreaState","newlineCountBeforeSelection","startIndex","renderData","tac","setTop","setLeft","setWidth","setHeight","setColor","Color","Format","CSS","formatHex","setFontStyle","setTextDecoration","Margin","OUTER_CLASS_NAME","renderType","LineNumbersOverlay","ViewPart","InMemoryClipboardMetadataManager","_lastState","lastCopiedValue","data","pastedText","CompositionContext","_lastTypeTextLength","typeInput","_host","_textArea","_OS","_browser","_onFocus","_onBlur","_onKeyDown","_onKeyUp","_onCut","_onPaste","_onType","_onCompositionStart","_onCompositionUpdate","_onCompositionEnd","_onSelectionChangeRequest","_asyncTriggerCut","RunOnceScheduler","_asyncFocusGainWriteScreenReaderContent","_textAreaState","_selectionChangeListener","_hasFocus","_currentComposition","lastKeyDown","_e","StandardKeyboardEvent","keyCode","currentComposition","code","handleCompositionUpdate","newState","readFromTextArea","deduceAndroidCompositionInput","onInput","setIgnoreSelectionChangeTime","deduceInput","_ensureClipboardGetsEditorSelection","schedule","onCopy","clipboardData","_ClipboardEventUtils$","ClipboardEventUtils","getTextData","_ClipboardEventUtils$2","hadFocus","_setHasFocus","onSyntheticTap","previousSelectionChangeEventTime","inputLatency","onSelectionChange","isChrome","delta1","delta2","getIgnoreSelectionChangeTime","resetSelectionChangeTime","getValue","newSelectionStart","getSelectionStart","newSelectionEnd","getSelectionEnd","_newSelectionStartPosition","deduceEditorPosition","newSelectionStartPosition","_newSelectionEndPosition","newSelectionEndPosition","newSelection","refreshFocusState","hasFocus","newHasFocus","_installSelectionChangeListener","collapseSelection","writeToTextArea","_setAndWriteTextAreaState","dataToCopy","storedMetadata","version","set","replace","setTextData","getData","Mimes","rawmetadata","parse","files","setData","_actual","DomEmitter","onBeforeInput","_onSyntheticTap","_ignoreSelectionChangeTime","activeElement","selectionDirection","currentIsFocused","currentSelectionStart","currentSelectionEnd","setSelectionRange","scrollState","select","toString","setValue","_b","_c","_d","_f","_g","_h","str","_finishDeduceEditorPosition","str1","str2","anchor","deltaText","signum","lastLineFeedIndex","previousState","currentState","couldBeEmojiInput","prefixLength","suffixLength","previousValue","currentValue","previousSelectionStart","previousSelectionEnd","replacePreviousCharacters","linesPerPage","page","trimLongText","LIMIT_CHARS","selectionStartPage","_getPageOfLine","selectionStartPageRange","_getRangeForPage","selectionEndPage","selectionEndPageRange","pretextRange","intersectRanges","pretextStart","pretext","lastLine","lastLineMaxColumn","posttextRange","posttextEnd","posttext","selectionRange1","selectionRange2","EditorScroll_","RevealLine_","CoreEditorCommand","_EditorCommand","accessor","editor","args","_getViewModel","runCoreEditorCommand","EditorCommand","description","constraint","arg","types","scrollArg","to","by","revealCursor","schema","RawDirection","Up","Right","Down","Left","RawUnit","Line","WrappedLine","Page","HalfPage","Editor","Column","direction","reveaLineArg","at","RawAtArgument","Top","Center","Bottom","CoreNavigationCommands","EditorOrNativeTextInputCommand","addImplementation","focusedEditor","ICodeEditorService","getFocusedCodeEditor","hasTextFocus","_runEditorCommand","tagName","toLowerCase","runDOMCommand","activeEditor","getActiveCodeEditor","runEditorCommand","BaseMoveToCommand","_CoreEditorCommand","opts","_inSelectionMode","pushStackElement","setCursorStates","CursorMoveCommands","getPrimaryCursorState","viewPosition","revealPrimaryCursor","MoveTo","registerEditorCommand","precondition","MoveToSelect","ColumnSelectCommand","_CoreEditorCommand2","_getColumnSelectResult","getCursorColumnSelectData","viewStates","viewState","CursorState","fromViewState","setCursorColumnSelectData","isReal","fromViewLineNumber","fromLineNumber","fromViewVisualColumn","fromVisualColumn","toViewLineNumber","toLineNumber","toViewVisualColumn","toVisualColumn","reversed","revealTopMostCursor","revealBottomMostCursor","ColumnSelect","_ColumnSelectCommand","_class","primary","prevColumnSelectData","validatedPosition","validatePosition","validatedViewPosition","validateViewPosition","doColumnSelect","ColumnSelection","columnSelect","cursorConfig","CursorColumnSelectLeft","_ColumnSelectCommand2","_class2","_super5","kbOpts","weight","kbExpr","EditorContextKeys","textInputFocus","linux","columnSelectLeft","CursorColumnSelectRight","_ColumnSelectCommand3","_class3","_super6","columnSelectRight","ColumnSelectUpCommand","_ColumnSelectCommand4","_super7","_isPaged","isPaged","columnSelectUp","CursorColumnSelectUp","CursorColumnSelectPageUp","ColumnSelectDownCommand","_ColumnSelectCommand5","_super8","columnSelectDown","CursorColumnSelectDown","CursorColumnSelectPageDown","CursorMoveImpl","_CoreEditorCommand3","_super9","CursorMove_","parsed","_runCursorMove","_move","getCursorStates","cursors","simpleMove","viewportMove","CursorMove","CursorMoveBasedCommand","_CoreEditorCommand4","_super10","_staticArgs","dynamicArgs","pageSize","CursorLeft","mac","secondary","CursorLeftSelect","CursorRight","CursorRightSelect","CursorUp","CursorUpSelect","CursorPageUp","CursorPageUpSelect","CursorDown","CursorDownSelect","CursorPageDown","CursorPageDownSelect","CreateCursor","_CoreEditorCommand5","_class4","_super11","wholeLine","line","states","newModelPosition","modelState","newViewPosition","state","splice","LastCursorMoveToSelect","_CoreEditorCommand6","_class5","_super12","lastAddedCursorIndex","getLastAddedCursorIndex","newStates","HomeCommand","_CoreEditorCommand7","_super13","moveToBeginningOfLine","CursorHome","CursorHomeSelect","LineStartCommand","_CoreEditorCommand8","_super14","_exec","cursor","fromModelState","move","CursorLineStart","CursorLineStartSelect","EndCommand","_CoreEditorCommand9","_super15","moveToEndOfLine","sticky","CursorEnd","properties","default","CursorEndSelect","LineEndCommand","_CoreEditorCommand10","_super16","CursorLineEnd","CursorLineEndSelect","TopCommand","_CoreEditorCommand11","_super17","_this10","moveToBeginningOfBuffer","CursorTop","CursorTopSelect","BottomCommand","_CoreEditorCommand12","_super18","_this11","moveToEndOfBuffer","CursorBottom","CursorBottomSelect","EditorScrollImpl","_CoreEditorCommand13","_super19","includes","_runHorizontalEditorScroll","bind","_runVerticalEditorScroll","runEditorScroll","determineScrollMethod","desiredScrollTop","_computeDesiredScrollTop","desiredVisibleViewRange","getCompletelyVisibleViewRangeAtScrollTop","findPositionInViewportIfOutside","setScrollPosition","desiredTopModelLineNumber","futureViewport","getFutureViewport","visibleViewRange","visibleModelRange","convertViewRangeToModelRange","noOfLines","deltaLines","desiredScrollLeft","_computeDesiredScrollLeft","deltaColumns","EditorScroll","ScrollLineUp","_CoreEditorCommand14","_class6","_super20","ScrollPageUp","_CoreEditorCommand15","_class7","_super21","win","ScrollEditorTop","_CoreEditorCommand16","_class8","_super22","ScrollLineDown","_CoreEditorCommand17","_class9","_super23","ScrollPageDown","_CoreEditorCommand18","_class10","_super24","ScrollEditorBottom","_CoreEditorCommand19","_class11","_super25","ScrollLeft","_CoreEditorCommand20","_class12","_super26","ScrollRight","_CoreEditorCommand21","_class13","_super27","WordCommand","_CoreEditorCommand22","_super28","_this12","word","WordSelect","WordSelectDrag","LastCursorWordSelect","_CoreEditorCommand23","_class14","_super29","lastAddedState","hasSelection","LineCommand","_CoreEditorCommand24","_super30","_this13","LineSelect","LineSelectDrag","LastCursorLineCommand","_CoreEditorCommand25","_super31","_this14","LastCursorLineSelect","LastCursorLineSelectDrag","CancelSelection","_CoreEditorCommand26","_class15","_super32","hasNonEmptySelection","cancelSelection","RemoveSecondaryCursors","_CoreEditorCommand27","_class16","_super33","hasMultipleSelections","CORE_WEIGHT","status","RevealLine","_CoreEditorCommand28","_class17","_super34","revealLineArg","lineNumberArg","parseInt","revealAt","viewRange","convertModelRangeToViewRange","SelectAll","_EditorOrNativeTextIn","_class18","_super35","SelectAllCommand","execCommand","selectAll","SetSelection","_CoreEditorCommand29","_class19","_super36","fromModelSelection","CoreEditingCommands","columnSelectionCondition","ContextKeyExpr","and","columnSelection","registerColumnSelection","keybinding","KeybindingsRegistry","registerKeybindingRule","when","registerCommand","command","register","CoreEditingCommand","_EditorCommand2","_super37","runCoreEditingCommand","LineBreakInsert","_CoreEditingCommand","_class20","_super38","writable","pushUndoStop","executeCommands","TypeOperations","lineBreakInsert","Outdent","_CoreEditingCommand2","_class21","_super39","editorTextFocus","tabDoesNotMoveFocus","outdent","Tab","_CoreEditingCommand3","_class22","_super40","tab","DeleteLeft","_CoreEditingCommand4","_class23","_super41","_DeleteOperations$del","DeleteOperations","deleteLeft","getPrevEditOperationType","getCursorAutoClosedCharacters","_DeleteOperations$del2","shouldPushStackElementBefore","commands","setPrevEditOperationType","DeleteRight","_CoreEditingCommand5","_class24","_super42","_DeleteOperations$del3","deleteRight","_DeleteOperations$del4","Undo","_EditorOrNativeTextIn2","_class25","_super43","UndoCommand","hasModel","getOption","getModel","undo","Redo","_EditorOrNativeTextIn3","_class26","_super44","RedoCommand","redo","EditorHandlerCommand","_Command","_super45","handlerId","_this15","_handlerId","trigger","Command","registerOverwritableCommand"],"sourceRoot":""}