{"version":3,"file":"static/js/monaco-editor-vendor.5e1b5ac3.67c9dbb2.js","mappings":"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","sources":["../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/commandsQuickAccess.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/editorNavigationQuickAccess.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoLineQuickAccess.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/readOnlyMessage/browser/contribution.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/renameInputField.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/rename.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/semanticTokens/browser/documentSemanticTokens.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/semanticTokens/browser/viewportSemanticTokens.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/semanticTokens/common/getSemanticTokens.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/semanticTokens/common/semanticTokensConfig.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { stripIcons } from '../../../../base/common/iconLabels.js';\nimport { AbstractCommandsQuickAccessProvider } from '../../../../platform/quickinput/browser/commandsQuickAccess.js';\nexport class AbstractEditorCommandsQuickAccessProvider extends AbstractCommandsQuickAccessProvider {\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n        super(options, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n    }\n    getCodeEditorCommandPicks() {\n        const activeTextEditorControl = this.activeTextEditorControl;\n        if (!activeTextEditorControl) {\n            return [];\n        }\n        const editorCommandPicks = [];\n        for (const editorAction of activeTextEditorControl.getSupportedActions()) {\n            editorCommandPicks.push({\n                commandId: editorAction.id,\n                commandAlias: editorAction.alias,\n                label: stripIcons(editorAction.label) || editorAction.id,\n            });\n        }\n        return editorCommandPicks;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { once } from '../../../../base/common/functional.js';\nimport { DisposableStore, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { getCodeEditor, isDiffEditor } from '../../../browser/editorBrowser.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\n/**\n * A reusable quick access provider for the editor with support\n * for adding decorations for navigating in the currently active file\n * (for example \"Go to line\", \"Go to symbol\").\n */\nexport class AbstractEditorNavigationQuickAccessProvider {\n    constructor(options) {\n        this.options = options;\n        //#endregion\n        //#region Decorations Utils\n        this.rangeHighlightDecorationId = undefined;\n    }\n    //#region Provider methods\n    provide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // Apply options if any\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\n        // Disable filtering & sorting, we control the results\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n        // Provide based on current active editor\n        const pickerDisposable = disposables.add(new MutableDisposable());\n        pickerDisposable.value = this.doProvide(picker, token);\n        // Re-create whenever the active editor changes\n        disposables.add(this.onDidActiveTextEditorControlChange(() => {\n            // Clear old\n            pickerDisposable.value = undefined;\n            // Add new\n            pickerDisposable.value = this.doProvide(picker, token);\n        }));\n        return disposables;\n    }\n    doProvide(picker, token) {\n        const disposables = new DisposableStore();\n        // With text control\n        const editor = this.activeTextEditorControl;\n        if (editor && this.canProvideWithTextEditor(editor)) {\n            const context = { editor };\n            // Restore any view state if this picker was closed\n            // without actually going to a line\n            const codeEditor = getCodeEditor(editor);\n            if (codeEditor) {\n                // Remember view state and update it when the cursor position\n                // changes even later because it could be that the user has\n                // configured quick access to remain open when focus is lost and\n                // we always want to restore the current location.\n                let lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                disposables.add(codeEditor.onDidChangeCursorPosition(() => {\n                    lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                }));\n                context.restoreViewState = () => {\n                    if (lastKnownEditorViewState && editor === this.activeTextEditorControl) {\n                        editor.restoreViewState(lastKnownEditorViewState);\n                    }\n                };\n                disposables.add(once(token.onCancellationRequested)(() => { var _a; return (_a = context.restoreViewState) === null || _a === void 0 ? void 0 : _a.call(context); }));\n            }\n            // Clean up decorations on dispose\n            disposables.add(toDisposable(() => this.clearDecorations(editor)));\n            // Ask subclass for entries\n            disposables.add(this.provideWithTextEditor(context, picker, token));\n        }\n        // Without text control\n        else {\n            disposables.add(this.provideWithoutTextEditor(picker, token));\n        }\n        return disposables;\n    }\n    /**\n     * Subclasses to implement if they can operate on the text editor.\n     */\n    canProvideWithTextEditor(editor) {\n        return true;\n    }\n    gotoLocation({ editor }, options) {\n        editor.setSelection(options.range);\n        editor.revealRangeInCenter(options.range, 0 /* ScrollType.Smooth */);\n        if (!options.preserveFocus) {\n            editor.focus();\n        }\n    }\n    getModel(editor) {\n        var _a;\n        return isDiffEditor(editor) ?\n            (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.modified :\n            editor.getModel();\n    }\n    addDecorations(editor, range) {\n        editor.changeDecorations(changeAccessor => {\n            // Reset old decorations if any\n            const deleteDecorations = [];\n            if (this.rangeHighlightDecorationId) {\n                deleteDecorations.push(this.rangeHighlightDecorationId.overviewRulerDecorationId);\n                deleteDecorations.push(this.rangeHighlightDecorationId.rangeHighlightId);\n                this.rangeHighlightDecorationId = undefined;\n            }\n            // Add new decorations for the range\n            const newDecorations = [\n                // highlight the entire line on the range\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight',\n                        className: 'rangeHighlight',\n                        isWholeLine: true\n                    }\n                },\n                // also add overview ruler highlight\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight-overview',\n                        overviewRuler: {\n                            color: themeColorFromId(overviewRulerRangeHighlight),\n                            position: OverviewRulerLane.Full\n                        }\n                    }\n                }\n            ];\n            const [rangeHighlightId, overviewRulerDecorationId] = changeAccessor.deltaDecorations(deleteDecorations, newDecorations);\n            this.rangeHighlightDecorationId = { rangeHighlightId, overviewRulerDecorationId };\n        });\n    }\n    clearDecorations(editor) {\n        const rangeHighlightDecorationId = this.rangeHighlightDecorationId;\n        if (rangeHighlightDecorationId) {\n            editor.changeDecorations(changeAccessor => {\n                changeAccessor.deltaDecorations([\n                    rangeHighlightDecorationId.overviewRulerDecorationId,\n                    rangeHighlightDecorationId.rangeHighlightId\n                ], []);\n            });\n            this.rangeHighlightDecorationId = undefined;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { getCodeEditor } from '../../../browser/editorBrowser.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nclass AbstractGotoLineQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor() {\n        super({ canAcceptInBackground: true });\n    }\n    provideWithoutTextEditor(picker) {\n        const label = localize('cannotRunGotoLine', \"Open a text editor first to go to a line.\");\n        picker.items = [{ label }];\n        picker.ariaLabel = label;\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto line once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item) {\n                if (!this.isValidLineNumber(editor, item.lineNumber)) {\n                    return;\n                }\n                this.gotoLocation(context, { range: this.toRange(item.lineNumber, item.column), keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // React to picker changes\n        const updatePickerAndEditor = () => {\n            const position = this.parsePosition(editor, picker.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length));\n            const label = this.getPickLabel(editor, position.lineNumber, position.column);\n            // Picker\n            picker.items = [{\n                    lineNumber: position.lineNumber,\n                    column: position.column,\n                    label\n                }];\n            // ARIA Label\n            picker.ariaLabel = label;\n            // Clear decorations for invalid range\n            if (!this.isValidLineNumber(editor, position.lineNumber)) {\n                this.clearDecorations(editor);\n                return;\n            }\n            // Reveal\n            const range = this.toRange(position.lineNumber, position.column);\n            editor.revealRangeInCenter(range, 0 /* ScrollType.Smooth */);\n            // Decorate\n            this.addDecorations(editor, range);\n        };\n        updatePickerAndEditor();\n        disposables.add(picker.onDidChangeValue(() => updatePickerAndEditor()));\n        // Adjust line number visibility as needed\n        const codeEditor = getCodeEditor(editor);\n        if (codeEditor) {\n            const options = codeEditor.getOptions();\n            const lineNumbers = options.get(64 /* EditorOption.lineNumbers */);\n            if (lineNumbers.renderType === 2 /* RenderLineNumbersType.Relative */) {\n                codeEditor.updateOptions({ lineNumbers: 'on' });\n                disposables.add(toDisposable(() => codeEditor.updateOptions({ lineNumbers: 'relative' })));\n            }\n        }\n        return disposables;\n    }\n    toRange(lineNumber = 1, column = 1) {\n        return {\n            startLineNumber: lineNumber,\n            startColumn: column,\n            endLineNumber: lineNumber,\n            endColumn: column\n        };\n    }\n    parsePosition(editor, value) {\n        // Support line-col formats of `line,col`, `line:col`, `line#col`\n        const numbers = value.split(/,|:|#/).map(part => parseInt(part, 10)).filter(part => !isNaN(part));\n        const endLine = this.lineCount(editor) + 1;\n        return {\n            lineNumber: numbers[0] > 0 ? numbers[0] : endLine + numbers[0],\n            column: numbers[1]\n        };\n    }\n    getPickLabel(editor, lineNumber, column) {\n        // Location valid: indicate this as picker label\n        if (this.isValidLineNumber(editor, lineNumber)) {\n            if (this.isValidColumn(editor, lineNumber, column)) {\n                return localize('gotoLineColumnLabel', \"Go to line {0} and character {1}.\", lineNumber, column);\n            }\n            return localize('gotoLineLabel', \"Go to line {0}.\", lineNumber);\n        }\n        // Location invalid: show generic label\n        const position = editor.getPosition() || { lineNumber: 1, column: 1 };\n        const lineCount = this.lineCount(editor);\n        if (lineCount > 1) {\n            return localize('gotoLineLabelEmptyWithLimit', \"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.\", position.lineNumber, position.column, lineCount);\n        }\n        return localize('gotoLineLabelEmpty', \"Current Line: {0}, Character: {1}. Type a line number to navigate to.\", position.lineNumber, position.column);\n    }\n    isValidLineNumber(editor, lineNumber) {\n        if (!lineNumber || typeof lineNumber !== 'number') {\n            return false;\n        }\n        return lineNumber > 0 && lineNumber <= this.lineCount(editor);\n    }\n    isValidColumn(editor, lineNumber, column) {\n        if (!column || typeof column !== 'number') {\n            return false;\n        }\n        const model = this.getModel(editor);\n        if (!model) {\n            return false;\n        }\n        const positionCandidate = { lineNumber, column };\n        return model.validatePosition(positionCandidate).equals(positionCandidate);\n    }\n    lineCount(editor) {\n        var _a, _b;\n        return (_b = (_a = this.getModel(editor)) === null || _a === void 0 ? void 0 : _a.getLineCount()) !== null && _b !== void 0 ? _b : 0;\n    }\n}\nAbstractGotoLineQuickAccessProvider.PREFIX = ':';\nexport { AbstractGotoLineQuickAccessProvider };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { pieceToQuery, prepareQuery, scoreFuzzy2 } from '../../../../base/common/fuzzyScorer.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { format, trim } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SymbolKinds } from '../../../common/languages.js';\nimport { IOutlineModelService } from '../../documentSymbols/browser/outlineModel.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { findLast } from '../../../../base/common/arrays.js';\nlet AbstractGotoSymbolQuickAccessProvider = class AbstractGotoSymbolQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor(_languageFeaturesService, _outlineModelService, options = Object.create(null)) {\n        super(options);\n        this._languageFeaturesService = _languageFeaturesService;\n        this._outlineModelService = _outlineModelService;\n        this.options = options;\n        this.options.canAcceptInBackground = true;\n    }\n    provideWithoutTextEditor(picker) {\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutEditor', \"To go to a symbol, first open a text editor with symbol information.\"));\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const model = this.getModel(editor);\n        if (!model) {\n            return Disposable.None;\n        }\n        // Provide symbols from model if available in registry\n        if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n            return this.doProvideWithEditorSymbols(context, model, picker, token);\n        }\n        // Otherwise show an entry for a model without registry\n        // But give a chance to resolve the symbols at a later\n        // point if possible\n        return this.doProvideWithoutEditorSymbols(context, model, picker, token);\n    }\n    doProvideWithoutEditorSymbols(context, model, picker, token) {\n        const disposables = new DisposableStore();\n        // Generic pick for not having any symbol information\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutSymbolProvider', \"The active text editor does not provide symbol information.\"));\n        // Wait for changes to the registry and see if eventually\n        // we do get symbols. This can happen if the picker is opened\n        // very early after the model has loaded but before the\n        // language registry is ready.\n        // https://github.com/microsoft/vscode/issues/70607\n        (() => __awaiter(this, void 0, void 0, function* () {\n            const result = yield this.waitForLanguageSymbolRegistry(model, disposables);\n            if (!result || token.isCancellationRequested) {\n                return;\n            }\n            disposables.add(this.doProvideWithEditorSymbols(context, model, picker, token));\n        }))();\n        return disposables;\n    }\n    provideLabelPick(picker, label) {\n        picker.items = [{ label, index: 0, kind: 14 /* SymbolKind.String */ }];\n        picker.ariaLabel = label;\n    }\n    waitForLanguageSymbolRegistry(model, disposables) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                return true;\n            }\n            const symbolProviderRegistryPromise = new DeferredPromise();\n            // Resolve promise when registry knows model\n            const symbolProviderListener = disposables.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => {\n                if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                    symbolProviderListener.dispose();\n                    symbolProviderRegistryPromise.complete(true);\n                }\n            }));\n            // Resolve promise when we get disposed too\n            disposables.add(toDisposable(() => symbolProviderRegistryPromise.complete(false)));\n            return symbolProviderRegistryPromise.p;\n        });\n    }\n    doProvideWithEditorSymbols(context, model, picker, token) {\n        var _a;\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto symbol once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // Goto symbol side by side if enabled\n        disposables.add(picker.onDidTriggerItemButton(({ item }) => {\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, forceSideBySide: true });\n                picker.hide();\n            }\n        }));\n        // Resolve symbols from document once and reuse this\n        // request for all filtering and typing then on\n        const symbolsPromise = this.getDocumentSymbols(model, token);\n        // Set initial picks and update on type\n        let picksCts = undefined;\n        const updatePickerItems = (positionToEnclose) => __awaiter(this, void 0, void 0, function* () {\n            // Cancel any previous ask for picks and busy\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\n            picker.busy = false;\n            // Create new cancellation source for this run\n            picksCts = new CancellationTokenSource(token);\n            // Collect symbol picks\n            picker.busy = true;\n            try {\n                const query = prepareQuery(picker.value.substr(AbstractGotoSymbolQuickAccessProvider.PREFIX.length).trim());\n                const items = yield this.doGetSymbolPicks(symbolsPromise, query, undefined, picksCts.token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (items.length > 0) {\n                    picker.items = items;\n                    if (positionToEnclose && query.original.length === 0) {\n                        const candidate = findLast(items, item => Boolean(item.type !== 'separator' && item.range && Range.containsPosition(item.range.decoration, positionToEnclose)));\n                        if (candidate) {\n                            picker.activeItems = [candidate];\n                        }\n                    }\n                }\n                else {\n                    if (query.original.length > 0) {\n                        this.provideLabelPick(picker, localize('noMatchingSymbolResults', \"No matching editor symbols\"));\n                    }\n                    else {\n                        this.provideLabelPick(picker, localize('noSymbolResults', \"No editor symbols\"));\n                    }\n                }\n            }\n            finally {\n                if (!token.isCancellationRequested) {\n                    picker.busy = false;\n                }\n            }\n        });\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems(undefined)));\n        updatePickerItems((_a = editor.getSelection()) === null || _a === void 0 ? void 0 : _a.getPosition());\n        // Reveal and decorate when active item changes\n        disposables.add(picker.onDidChangeActive(() => {\n            const [item] = picker.activeItems;\n            if (item && item.range) {\n                // Reveal\n                editor.revealRangeInCenter(item.range.selection, 0 /* ScrollType.Smooth */);\n                // Decorate\n                this.addDecorations(editor, item.range.decoration);\n            }\n        }));\n        return disposables;\n    }\n    doGetSymbolPicks(symbolsPromise, query, options, token) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const symbols = yield symbolsPromise;\n            if (token.isCancellationRequested) {\n                return [];\n            }\n            const filterBySymbolKind = query.original.indexOf(AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX) === 0;\n            const filterPos = filterBySymbolKind ? 1 : 0;\n            // Split between symbol and container query\n            let symbolQuery;\n            let containerQuery;\n            if (query.values && query.values.length > 1) {\n                symbolQuery = pieceToQuery(query.values[0]); // symbol: only match on first part\n                containerQuery = pieceToQuery(query.values.slice(1)); // container: match on all but first parts\n            }\n            else {\n                symbolQuery = query;\n            }\n            // Convert to symbol picks and apply filtering\n            let buttons;\n            const openSideBySideDirection = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.openSideBySideDirection) === null || _b === void 0 ? void 0 : _b.call(_a);\n            if (openSideBySideDirection) {\n                buttons = [{\n                        iconClass: openSideBySideDirection === 'right' ? ThemeIcon.asClassName(Codicon.splitHorizontal) : ThemeIcon.asClassName(Codicon.splitVertical),\n                        tooltip: openSideBySideDirection === 'right' ? localize('openToSide', \"Open to the Side\") : localize('openToBottom', \"Open to the Bottom\")\n                    }];\n            }\n            const filteredSymbolPicks = [];\n            for (let index = 0; index < symbols.length; index++) {\n                const symbol = symbols[index];\n                const symbolLabel = trim(symbol.name);\n                const symbolLabelWithIcon = `$(${SymbolKinds.toIcon(symbol.kind).id}) ${symbolLabel}`;\n                const symbolLabelIconOffset = symbolLabelWithIcon.length - symbolLabel.length;\n                let containerLabel = symbol.containerName;\n                if (options === null || options === void 0 ? void 0 : options.extraContainerLabel) {\n                    if (containerLabel) {\n                        containerLabel = `${options.extraContainerLabel} • ${containerLabel}`;\n                    }\n                    else {\n                        containerLabel = options.extraContainerLabel;\n                    }\n                }\n                let symbolScore = undefined;\n                let symbolMatches = undefined;\n                let containerScore = undefined;\n                let containerMatches = undefined;\n                if (query.original.length > filterPos) {\n                    // First: try to score on the entire query, it is possible that\n                    // the symbol matches perfectly (e.g. searching for \"change log\"\n                    // can be a match on a markdown symbol \"change log\"). In that\n                    // case we want to skip the container query altogether.\n                    let skipContainerQuery = false;\n                    if (symbolQuery !== query) {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, Object.assign(Object.assign({}, query), { values: undefined /* disable multi-query support */ }), filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore === 'number') {\n                            skipContainerQuery = true; // since we consumed the query, skip any container matching\n                        }\n                    }\n                    // Otherwise: score on the symbol query and match on the container later\n                    if (typeof symbolScore !== 'number') {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, symbolQuery, filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore !== 'number') {\n                            continue;\n                        }\n                    }\n                    // Score by container if specified\n                    if (!skipContainerQuery && containerQuery) {\n                        if (containerLabel && containerQuery.original.length > 0) {\n                            [containerScore, containerMatches] = scoreFuzzy2(containerLabel, containerQuery);\n                        }\n                        if (typeof containerScore !== 'number') {\n                            continue;\n                        }\n                        if (typeof symbolScore === 'number') {\n                            symbolScore += containerScore; // boost symbolScore by containerScore\n                        }\n                    }\n                }\n                const deprecated = symbol.tags && symbol.tags.indexOf(1 /* SymbolTag.Deprecated */) >= 0;\n                filteredSymbolPicks.push({\n                    index,\n                    kind: symbol.kind,\n                    score: symbolScore,\n                    label: symbolLabelWithIcon,\n                    ariaLabel: symbolLabel,\n                    description: containerLabel,\n                    highlights: deprecated ? undefined : {\n                        label: symbolMatches,\n                        description: containerMatches\n                    },\n                    range: {\n                        selection: Range.collapseToStart(symbol.selectionRange),\n                        decoration: symbol.range\n                    },\n                    strikethrough: deprecated,\n                    buttons\n                });\n            }\n            // Sort by score\n            const sortedFilteredSymbolPicks = filteredSymbolPicks.sort((symbolA, symbolB) => filterBySymbolKind ?\n                this.compareByKindAndScore(symbolA, symbolB) :\n                this.compareByScore(symbolA, symbolB));\n            // Add separator for types\n            // - @  only total number of symbols\n            // - @: grouped by symbol kind\n            let symbolPicks = [];\n            if (filterBySymbolKind) {\n                let lastSymbolKind = undefined;\n                let lastSeparator = undefined;\n                let lastSymbolKindCounter = 0;\n                function updateLastSeparatorLabel() {\n                    if (lastSeparator && typeof lastSymbolKind === 'number' && lastSymbolKindCounter > 0) {\n                        lastSeparator.label = format(NLS_SYMBOL_KIND_CACHE[lastSymbolKind] || FALLBACK_NLS_SYMBOL_KIND, lastSymbolKindCounter);\n                    }\n                }\n                for (const symbolPick of sortedFilteredSymbolPicks) {\n                    // Found new kind\n                    if (lastSymbolKind !== symbolPick.kind) {\n                        // Update last separator with number of symbols we found for kind\n                        updateLastSeparatorLabel();\n                        lastSymbolKind = symbolPick.kind;\n                        lastSymbolKindCounter = 1;\n                        // Add new separator for new kind\n                        lastSeparator = { type: 'separator' };\n                        symbolPicks.push(lastSeparator);\n                    }\n                    // Existing kind, keep counting\n                    else {\n                        lastSymbolKindCounter++;\n                    }\n                    // Add to final result\n                    symbolPicks.push(symbolPick);\n                }\n                // Update last separator with number of symbols we found for kind\n                updateLastSeparatorLabel();\n            }\n            else if (sortedFilteredSymbolPicks.length > 0) {\n                symbolPicks = [\n                    { label: localize('symbols', \"symbols ({0})\", filteredSymbolPicks.length), type: 'separator' },\n                    ...sortedFilteredSymbolPicks\n                ];\n            }\n            return symbolPicks;\n        });\n    }\n    compareByScore(symbolA, symbolB) {\n        if (typeof symbolA.score !== 'number' && typeof symbolB.score === 'number') {\n            return 1;\n        }\n        else if (typeof symbolA.score === 'number' && typeof symbolB.score !== 'number') {\n            return -1;\n        }\n        if (typeof symbolA.score === 'number' && typeof symbolB.score === 'number') {\n            if (symbolA.score > symbolB.score) {\n                return -1;\n            }\n            else if (symbolA.score < symbolB.score) {\n                return 1;\n            }\n        }\n        if (symbolA.index < symbolB.index) {\n            return -1;\n        }\n        else if (symbolA.index > symbolB.index) {\n            return 1;\n        }\n        return 0;\n    }\n    compareByKindAndScore(symbolA, symbolB) {\n        const kindA = NLS_SYMBOL_KIND_CACHE[symbolA.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        const kindB = NLS_SYMBOL_KIND_CACHE[symbolB.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        // Sort by type first if scoped search\n        const result = kindA.localeCompare(kindB);\n        if (result === 0) {\n            return this.compareByScore(symbolA, symbolB);\n        }\n        return result;\n    }\n    getDocumentSymbols(document, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = yield this._outlineModelService.getOrCreate(document, token);\n            return token.isCancellationRequested ? [] : model.asListOfDocumentSymbols();\n        });\n    }\n};\nAbstractGotoSymbolQuickAccessProvider.PREFIX = '@';\nAbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX = ':';\nAbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY = `${AbstractGotoSymbolQuickAccessProvider.PREFIX}${AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX}`;\nAbstractGotoSymbolQuickAccessProvider = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, IOutlineModelService)\n], AbstractGotoSymbolQuickAccessProvider);\nexport { AbstractGotoSymbolQuickAccessProvider };\n// #region NLS Helpers\nconst FALLBACK_NLS_SYMBOL_KIND = localize('property', \"properties ({0})\");\nconst NLS_SYMBOL_KIND_CACHE = {\n    [5 /* SymbolKind.Method */]: localize('method', \"methods ({0})\"),\n    [11 /* SymbolKind.Function */]: localize('function', \"functions ({0})\"),\n    [8 /* SymbolKind.Constructor */]: localize('_constructor', \"constructors ({0})\"),\n    [12 /* SymbolKind.Variable */]: localize('variable', \"variables ({0})\"),\n    [4 /* SymbolKind.Class */]: localize('class', \"classes ({0})\"),\n    [22 /* SymbolKind.Struct */]: localize('struct', \"structs ({0})\"),\n    [23 /* SymbolKind.Event */]: localize('event', \"events ({0})\"),\n    [24 /* SymbolKind.Operator */]: localize('operator', \"operators ({0})\"),\n    [10 /* SymbolKind.Interface */]: localize('interface', \"interfaces ({0})\"),\n    [2 /* SymbolKind.Namespace */]: localize('namespace', \"namespaces ({0})\"),\n    [3 /* SymbolKind.Package */]: localize('package', \"packages ({0})\"),\n    [25 /* SymbolKind.TypeParameter */]: localize('typeParameter', \"type parameters ({0})\"),\n    [1 /* SymbolKind.Module */]: localize('modules', \"modules ({0})\"),\n    [6 /* SymbolKind.Property */]: localize('property', \"properties ({0})\"),\n    [9 /* SymbolKind.Enum */]: localize('enum', \"enumerations ({0})\"),\n    [21 /* SymbolKind.EnumMember */]: localize('enumMember', \"enumeration members ({0})\"),\n    [14 /* SymbolKind.String */]: localize('string', \"strings ({0})\"),\n    [0 /* SymbolKind.File */]: localize('file', \"files ({0})\"),\n    [17 /* SymbolKind.Array */]: localize('array', \"arrays ({0})\"),\n    [15 /* SymbolKind.Number */]: localize('number', \"numbers ({0})\"),\n    [16 /* SymbolKind.Boolean */]: localize('boolean', \"booleans ({0})\"),\n    [18 /* SymbolKind.Object */]: localize('object', \"objects ({0})\"),\n    [19 /* SymbolKind.Key */]: localize('key', \"keys ({0})\"),\n    [7 /* SymbolKind.Field */]: localize('field', \"fields ({0})\"),\n    [13 /* SymbolKind.Constant */]: localize('constant', \"constants ({0})\")\n};\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nclass ReadOnlyMessageController extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._register(this.editor.onDidAttemptReadOnlyEdit(() => this._onDidAttemptReadOnlyEdit()));\n    }\n    _onDidAttemptReadOnlyEdit() {\n        const messageController = MessageController.get(this.editor);\n        if (messageController && this.editor.hasModel()) {\n            if (this.editor.isSimpleWidget) {\n                messageController.showMessage(nls.localize('editor.simple.readonly', \"Cannot edit in read-only input\"), this.editor.getPosition());\n            }\n            else {\n                messageController.showMessage(nls.localize('editor.readonly', \"Cannot edit in read-only editor\"), this.editor.getPosition());\n            }\n        }\n    }\n}\nReadOnlyMessageController.ID = 'editor.contrib.readOnlyMessageController';\nexport { ReadOnlyMessageController };\nregisterEditorContribution(ReadOnlyMessageController.ID, ReadOnlyMessageController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './renameInputField.css';\nimport { Position } from '../../../common/core/position.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nlet RenameInputField = class RenameInputField {\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService) {\n        this._editor = _editor;\n        this._acceptKeybindings = _acceptKeybindings;\n        this._themeService = _themeService;\n        this._keybindingService = _keybindingService;\n        this._disposables = new DisposableStore();\n        this.allowEditorOverflow = true;\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._editor.addContentWidget(this);\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(47 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return '__renameInputWidget';\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'monaco-editor rename-box';\n            this._input = document.createElement('input');\n            this._input.className = 'rename-input';\n            this._input.type = 'text';\n            this._input.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n            this._domNode.appendChild(this._input);\n            this._label = document.createElement('div');\n            this._label.className = 'rename-label';\n            this._domNode.appendChild(this._label);\n            const updateLabel = () => {\n                var _a, _b;\n                const [accept, preview] = this._acceptKeybindings;\n                this._keybindingService.lookupKeybinding(accept);\n                this._label.innerText = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", (_a = this._keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this._keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n            };\n            updateLabel();\n            this._disposables.add(this._keybindingService.onDidUpdateKeybindings(updateLabel));\n            this._updateFont();\n            this._updateStyles(this._themeService.getColorTheme());\n        }\n        return this._domNode;\n    }\n    _updateStyles(theme) {\n        var _a, _b, _c, _d;\n        if (!this._input || !this._domNode) {\n            return;\n        }\n        const widgetShadowColor = theme.getColor(widgetShadow);\n        const widgetBorderColor = theme.getColor(widgetBorder);\n        this._domNode.style.backgroundColor = String((_a = theme.getColor(editorWidgetBackground)) !== null && _a !== void 0 ? _a : '');\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n        this._domNode.style.border = widgetBorderColor ? `1px solid ${widgetBorderColor}` : '';\n        this._domNode.style.color = String((_b = theme.getColor(inputForeground)) !== null && _b !== void 0 ? _b : '');\n        this._input.style.backgroundColor = String((_c = theme.getColor(inputBackground)) !== null && _c !== void 0 ? _c : '');\n        // this._input.style.color = String(theme.getColor(inputForeground) ?? '');\n        const border = theme.getColor(inputBorder);\n        this._input.style.borderWidth = border ? '1px' : '0px';\n        this._input.style.borderStyle = border ? 'solid' : 'none';\n        this._input.style.borderColor = (_d = border === null || border === void 0 ? void 0 : border.toString()) !== null && _d !== void 0 ? _d : 'none';\n    }\n    _updateFont() {\n        if (!this._input || !this._label) {\n            return;\n        }\n        const fontInfo = this._editor.getOption(47 /* EditorOption.fontInfo */);\n        this._input.style.fontFamily = fontInfo.fontFamily;\n        this._input.style.fontWeight = fontInfo.fontWeight;\n        this._input.style.fontSize = `${fontInfo.fontSize}px`;\n        this._label.style.fontSize = `${fontInfo.fontSize * 0.8}px`;\n    }\n    getPosition() {\n        if (!this._visible) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    afterRender(position) {\n        if (!position) {\n            // cancel rename when input widget isn't rendered anymore\n            this.cancelInput(true);\n        }\n    }\n    acceptInput(wantsPreview) {\n        var _a;\n        (_a = this._currentAcceptInput) === null || _a === void 0 ? void 0 : _a.call(this, wantsPreview);\n    }\n    cancelInput(focusEditor) {\n        var _a;\n        (_a = this._currentCancelInput) === null || _a === void 0 ? void 0 : _a.call(this, focusEditor);\n    }\n    getInput(where, value, selectionStart, selectionEnd, supportPreview, token) {\n        this._domNode.classList.toggle('preview', supportPreview);\n        this._position = new Position(where.startLineNumber, where.startColumn);\n        this._input.value = value;\n        this._input.setAttribute('selectionStart', selectionStart.toString());\n        this._input.setAttribute('selectionEnd', selectionEnd.toString());\n        this._input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20);\n        const disposeOnDone = new DisposableStore();\n        return new Promise(resolve => {\n            this._currentCancelInput = (focusEditor) => {\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve(focusEditor);\n                return true;\n            };\n            this._currentAcceptInput = (wantsPreview) => {\n                if (this._input.value.trim().length === 0 || this._input.value === value) {\n                    // empty or whitespace only or not changed\n                    this.cancelInput(true);\n                    return;\n                }\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve({\n                    newName: this._input.value,\n                    wantsPreview: supportPreview && wantsPreview\n                });\n            };\n            disposeOnDone.add(token.onCancellationRequested(() => this.cancelInput(true)));\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => this.cancelInput(!document.hasFocus())));\n            this._show();\n        }).finally(() => {\n            disposeOnDone.dispose();\n            this._hide();\n        });\n    }\n    _show() {\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\n        this._visible = true;\n        this._visibleContextKey.set(true);\n        this._editor.layoutContentWidget(this);\n        setTimeout(() => {\n            this._input.focus();\n            this._input.setSelectionRange(parseInt(this._input.getAttribute('selectionStart')), parseInt(this._input.getAttribute('selectionEnd')));\n        }, 100);\n    }\n    _hide() {\n        this._visible = false;\n        this._visibleContextKey.reset();\n        this._editor.layoutContentWidget(this);\n    }\n};\nRenameInputField = __decorate([\n    __param(2, IThemeService),\n    __param(3, IKeybindingService),\n    __param(4, IContextKeyService)\n], RenameInputField);\nexport { RenameInputField };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ITextResourceConfigurationService } from '../../../common/services/textResourceConfiguration.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameInputField } from './renameInputField.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nclass RenameSkeleton {\n    constructor(model, position, registry) {\n        this.model = model;\n        this.position = position;\n        this._providerRenameIdx = 0;\n        this._providers = registry.ordered(model);\n    }\n    hasProvider() {\n        return this._providers.length > 0;\n    }\n    resolveRenameLocation(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const rejects = [];\n            for (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n                const provider = this._providers[this._providerRenameIdx];\n                if (!provider.resolveRenameLocation) {\n                    break;\n                }\n                const res = yield provider.resolveRenameLocation(this.model, this.position, token);\n                if (!res) {\n                    continue;\n                }\n                if (res.rejectReason) {\n                    rejects.push(res.rejectReason);\n                    continue;\n                }\n                return res;\n            }\n            const word = this.model.getWordAtPosition(this.position);\n            if (!word) {\n                return {\n                    range: Range.fromPositions(this.position),\n                    text: '',\n                    rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n                };\n            }\n            return {\n                range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n                text: word.word,\n                rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n            };\n        });\n    }\n    provideRenameEdits(newName, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n        });\n    }\n    _provideRenameEdits(newName, i, rejects, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const provider = this._providers[i];\n            if (!provider) {\n                return {\n                    edits: [],\n                    rejectReason: rejects.join('\\n')\n                };\n            }\n            const result = yield provider.provideRenameEdits(this.model, this.position, newName, token);\n            if (!result) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n            }\n            else if (result.rejectReason) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n            }\n            return result;\n        });\n    }\n}\nexport function rename(registry, model, position, newName) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const skeleton = new RenameSkeleton(model, position, registry);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            return { edits: [], rejectReason: loc.rejectReason };\n        }\n        return skeleton.provideRenameEdits(newName, CancellationToken.None);\n    });\n}\n// ---  register actions and commands\nlet RenameController = class RenameController {\n    static get(editor) {\n        return editor.getContribution(RenameController.ID);\n    }\n    constructor(editor, _instaService, _notificationService, _bulkEditService, _progressService, _logService, _configService, _languageFeaturesService) {\n        this.editor = editor;\n        this._instaService = _instaService;\n        this._notificationService = _notificationService;\n        this._bulkEditService = _bulkEditService;\n        this._progressService = _progressService;\n        this._logService = _logService;\n        this._configService = _configService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._disposableStore = new DisposableStore();\n        this._cts = new CancellationTokenSource();\n        this._renameInputField = this._disposableStore.add(this._instaService.createInstance(RenameInputField, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']));\n    }\n    dispose() {\n        this._disposableStore.dispose();\n        this._cts.dispose(true);\n    }\n    run() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            this._cts.dispose(true);\n            if (!this.editor.hasModel()) {\n                return undefined;\n            }\n            const position = this.editor.getPosition();\n            const skeleton = new RenameSkeleton(this.editor.getModel(), position, this._languageFeaturesService.renameProvider);\n            if (!skeleton.hasProvider()) {\n                return undefined;\n            }\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */);\n            // resolve rename location\n            let loc;\n            try {\n                const resolveLocationOperation = skeleton.resolveRenameLocation(this._cts.token);\n                this._progressService.showWhile(resolveLocationOperation, 250);\n                loc = yield resolveLocationOperation;\n            }\n            catch (e) {\n                (_a = MessageController.get(this.editor)) === null || _a === void 0 ? void 0 : _a.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n                return undefined;\n            }\n            if (!loc) {\n                return undefined;\n            }\n            if (loc.rejectReason) {\n                (_b = MessageController.get(this.editor)) === null || _b === void 0 ? void 0 : _b.showMessage(loc.rejectReason, position);\n                return undefined;\n            }\n            if (this._cts.token.isCancellationRequested) {\n                return undefined;\n            }\n            this._cts.dispose();\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, loc.range);\n            // do rename at location\n            const selection = this.editor.getSelection();\n            let selectionStart = 0;\n            let selectionEnd = loc.text.length;\n            if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(loc.range, selection)) {\n                selectionStart = Math.max(0, selection.startColumn - loc.range.startColumn);\n                selectionEnd = Math.min(loc.range.endColumn, selection.endColumn) - loc.range.startColumn;\n            }\n            const supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue(this.editor.getModel().uri, 'editor.rename.enablePreview');\n            const inputFieldResult = yield this._renameInputField.getInput(loc.range, loc.text, selectionStart, selectionEnd, supportPreview, this._cts.token);\n            // no result, only hint to focus the editor or not\n            if (typeof inputFieldResult === 'boolean') {\n                if (inputFieldResult) {\n                    this.editor.focus();\n                }\n                return undefined;\n            }\n            this.editor.focus();\n            const renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, this._cts.token), this._cts.token).then((renameResult) => __awaiter(this, void 0, void 0, function* () {\n                if (!renameResult || !this.editor.hasModel()) {\n                    return;\n                }\n                if (renameResult.rejectReason) {\n                    this._notificationService.info(renameResult.rejectReason);\n                    return;\n                }\n                // collapse selection to active end\n                this.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\n                this._bulkEditService.apply(renameResult, {\n                    editor: this.editor,\n                    showPreview: inputFieldResult.wantsPreview,\n                    label: nls.localize('label', \"Renaming '{0}' to '{1}'\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                    code: 'undoredo.rename',\n                    quotableLabel: nls.localize('quotableLabel', \"Renaming {0} to {1}\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                    respectAutoSaveConfig: true\n                }).then(result => {\n                    if (result.ariaSummary) {\n                        alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, inputFieldResult.newName, result.ariaSummary));\n                    }\n                }).catch(err => {\n                    this._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n                    this._logService.error(err);\n                });\n            }), err => {\n                this._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n                this._logService.error(err);\n            });\n            this._progressService.showWhile(renameOperation, 250);\n            return renameOperation;\n        });\n    }\n    acceptRenameInput(wantsPreview) {\n        this._renameInputField.acceptInput(wantsPreview);\n    }\n    cancelRenameInput() {\n        this._renameInputField.cancelInput(true);\n    }\n};\nRenameController.ID = 'editor.contrib.renameController';\nRenameController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, INotificationService),\n    __param(3, IBulkEditService),\n    __param(4, IEditorProgressService),\n    __param(5, ILogService),\n    __param(6, ITextResourceConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], RenameController);\n// ---- action implementation\nexport class RenameAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.rename',\n            label: nls.localize('rename.label', \"Rename Symbol\"),\n            alias: 'Rename Symbol',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.1\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(accessor, editor) {\n        const controller = RenameController.get(editor);\n        if (controller) {\n            return controller.run();\n        }\n        return Promise.resolve();\n    }\n}\nregisterEditorContribution(RenameController.ID, RenameController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(RenameAction);\nconst RenameCommand = EditorCommand.bindToContribution(RenameController.get);\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.acceptRenameInput(false),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInputWithPreview',\n    precondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n    handler: x => x.acceptRenameInput(true),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024 /* KeyMod.Shift */ + 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'cancelRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.cancelRenameInput(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n// ---- api bridge command\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (accessor, model, position, ...args) {\n    const [newName] = args;\n    assertType(typeof newName === 'string');\n    const { renameProvider } = accessor.get(ILanguageFeaturesService);\n    return rename(renameProvider, model, position, newName);\n});\nregisterModelAndPositionCommand('_executePrepareRename', function (accessor, model, position) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { renameProvider } = accessor.get(ILanguageFeaturesService);\n        const skeleton = new RenameSkeleton(model, position, renameProvider);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            throw new Error(loc.rejectReason);\n        }\n        return loc;\n    });\n});\n//todo@jrieken use editor options world\nRegistry.as(Extensions.Configuration).registerConfiguration({\n    id: 'editor',\n    properties: {\n        'editor.rename.enablePreview': {\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n            default: true,\n            type: 'boolean'\n        }\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Disposable, dispose } from '../../../../base/common/lifecycle.js';\nimport * as errors from '../../../../base/common/errors.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { getDocumentSemanticTokens, hasDocumentSemanticTokensProvider, isSemanticTokens, isSemanticTokensEdits } from '../common/getSemanticTokens.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ISemanticTokensStylingService } from '../../../common/services/semanticTokensStyling.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nimport { SEMANTIC_HIGHLIGHTING_SETTING_ID, isSemanticColoringEnabled } from '../common/semanticTokensConfig.js';\nlet DocumentSemanticTokensFeature = class DocumentSemanticTokensFeature extends Disposable {\n    constructor(semanticTokensStylingService, modelService, themeService, configurationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._watchers = Object.create(null);\n        const register = (model) => {\n            this._watchers[model.uri.toString()] = new ModelSemanticColoring(model, semanticTokensStylingService, themeService, languageFeatureDebounceService, languageFeaturesService);\n        };\n        const deregister = (model, modelSemanticColoring) => {\n            modelSemanticColoring.dispose();\n            delete this._watchers[model.uri.toString()];\n        };\n        const handleSettingOrThemeChange = () => {\n            for (const model of modelService.getModels()) {\n                const curr = this._watchers[model.uri.toString()];\n                if (isSemanticColoringEnabled(model, themeService, configurationService)) {\n                    if (!curr) {\n                        register(model);\n                    }\n                }\n                else {\n                    if (curr) {\n                        deregister(model, curr);\n                    }\n                }\n            }\n        };\n        this._register(modelService.onModelAdded((model) => {\n            if (isSemanticColoringEnabled(model, themeService, configurationService)) {\n                register(model);\n            }\n        }));\n        this._register(modelService.onModelRemoved((model) => {\n            const curr = this._watchers[model.uri.toString()];\n            if (curr) {\n                deregister(model, curr);\n            }\n        }));\n        this._register(configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n                handleSettingOrThemeChange();\n            }\n        }));\n        this._register(themeService.onDidColorThemeChange(handleSettingOrThemeChange));\n    }\n    dispose() {\n        // Dispose all watchers\n        for (const watcher of Object.values(this._watchers)) {\n            watcher.dispose();\n        }\n        super.dispose();\n    }\n};\nDocumentSemanticTokensFeature = __decorate([\n    __param(0, ISemanticTokensStylingService),\n    __param(1, IModelService),\n    __param(2, IThemeService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], DocumentSemanticTokensFeature);\nexport { DocumentSemanticTokensFeature };\nlet ModelSemanticColoring = class ModelSemanticColoring extends Disposable {\n    constructor(model, _semanticTokensStylingService, themeService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._semanticTokensStylingService = _semanticTokensStylingService;\n        this._isDisposed = false;\n        this._model = model;\n        this._provider = languageFeaturesService.documentSemanticTokensProvider;\n        this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentSemanticTokens', { min: ModelSemanticColoring.REQUEST_MIN_DELAY, max: ModelSemanticColoring.REQUEST_MAX_DELAY });\n        this._fetchDocumentSemanticTokens = this._register(new RunOnceScheduler(() => this._fetchDocumentSemanticTokensNow(), ModelSemanticColoring.REQUEST_MIN_DELAY));\n        this._currentDocumentResponse = null;\n        this._currentDocumentRequestCancellationTokenSource = null;\n        this._documentProvidersChangeListeners = [];\n        this._providersChangedDuringRequest = false;\n        this._register(this._model.onDidChangeContent(() => {\n            if (!this._fetchDocumentSemanticTokens.isScheduled()) {\n                this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n            }\n        }));\n        this._register(this._model.onDidChangeLanguage(() => {\n            // clear any outstanding state\n            if (this._currentDocumentResponse) {\n                this._currentDocumentResponse.dispose();\n                this._currentDocumentResponse = null;\n            }\n            if (this._currentDocumentRequestCancellationTokenSource) {\n                this._currentDocumentRequestCancellationTokenSource.cancel();\n                this._currentDocumentRequestCancellationTokenSource = null;\n            }\n            this._setDocumentSemanticTokens(null, null, null, []);\n            this._fetchDocumentSemanticTokens.schedule(0);\n        }));\n        const bindDocumentChangeListeners = () => {\n            dispose(this._documentProvidersChangeListeners);\n            this._documentProvidersChangeListeners = [];\n            for (const provider of this._provider.all(model)) {\n                if (typeof provider.onDidChange === 'function') {\n                    this._documentProvidersChangeListeners.push(provider.onDidChange(() => {\n                        if (this._currentDocumentRequestCancellationTokenSource) {\n                            // there is already a request running,\n                            this._providersChangedDuringRequest = true;\n                            return;\n                        }\n                        this._fetchDocumentSemanticTokens.schedule(0);\n                    }));\n                }\n            }\n        };\n        bindDocumentChangeListeners();\n        this._register(this._provider.onDidChange(() => {\n            bindDocumentChangeListeners();\n            this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n        }));\n        this._register(themeService.onDidColorThemeChange(_ => {\n            // clear out existing tokens\n            this._setDocumentSemanticTokens(null, null, null, []);\n            this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n        }));\n        this._fetchDocumentSemanticTokens.schedule(0);\n    }\n    dispose() {\n        if (this._currentDocumentResponse) {\n            this._currentDocumentResponse.dispose();\n            this._currentDocumentResponse = null;\n        }\n        if (this._currentDocumentRequestCancellationTokenSource) {\n            this._currentDocumentRequestCancellationTokenSource.cancel();\n            this._currentDocumentRequestCancellationTokenSource = null;\n        }\n        this._setDocumentSemanticTokens(null, null, null, []);\n        this._isDisposed = true;\n        super.dispose();\n    }\n    _fetchDocumentSemanticTokensNow() {\n        if (this._currentDocumentRequestCancellationTokenSource) {\n            // there is already a request running, let it finish...\n            return;\n        }\n        if (!hasDocumentSemanticTokensProvider(this._provider, this._model)) {\n            // there is no provider\n            if (this._currentDocumentResponse) {\n                // there are semantic tokens set\n                this._model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        const cancellationTokenSource = new CancellationTokenSource();\n        const lastProvider = this._currentDocumentResponse ? this._currentDocumentResponse.provider : null;\n        const lastResultId = this._currentDocumentResponse ? this._currentDocumentResponse.resultId || null : null;\n        const request = getDocumentSemanticTokens(this._provider, this._model, lastProvider, lastResultId, cancellationTokenSource.token);\n        this._currentDocumentRequestCancellationTokenSource = cancellationTokenSource;\n        this._providersChangedDuringRequest = false;\n        const pendingChanges = [];\n        const contentChangeListener = this._model.onDidChangeContent((e) => {\n            pendingChanges.push(e);\n        });\n        const sw = new StopWatch(false);\n        request.then((res) => {\n            this._debounceInformation.update(this._model, sw.elapsed());\n            this._currentDocumentRequestCancellationTokenSource = null;\n            contentChangeListener.dispose();\n            if (!res) {\n                this._setDocumentSemanticTokens(null, null, null, pendingChanges);\n            }\n            else {\n                const { provider, tokens } = res;\n                const styling = this._semanticTokensStylingService.getStyling(provider);\n                this._setDocumentSemanticTokens(provider, tokens || null, styling, pendingChanges);\n            }\n        }, (err) => {\n            const isExpectedError = err && (errors.isCancellationError(err) || (typeof err.message === 'string' && err.message.indexOf('busy') !== -1));\n            if (!isExpectedError) {\n                errors.onUnexpectedError(err);\n            }\n            // Semantic tokens eats up all errors and considers errors to mean that the result is temporarily not available\n            // The API does not have a special error kind to express this...\n            this._currentDocumentRequestCancellationTokenSource = null;\n            contentChangeListener.dispose();\n            if (pendingChanges.length > 0 || this._providersChangedDuringRequest) {\n                // More changes occurred while the request was running\n                if (!this._fetchDocumentSemanticTokens.isScheduled()) {\n                    this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n                }\n            }\n        });\n    }\n    static _copy(src, srcOffset, dest, destOffset, length) {\n        // protect against overflows\n        length = Math.min(length, dest.length - destOffset, src.length - srcOffset);\n        for (let i = 0; i < length; i++) {\n            dest[destOffset + i] = src[srcOffset + i];\n        }\n    }\n    _setDocumentSemanticTokens(provider, tokens, styling, pendingChanges) {\n        const currentResponse = this._currentDocumentResponse;\n        const rescheduleIfNeeded = () => {\n            if ((pendingChanges.length > 0 || this._providersChangedDuringRequest) && !this._fetchDocumentSemanticTokens.isScheduled()) {\n                this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n            }\n        };\n        if (this._currentDocumentResponse) {\n            this._currentDocumentResponse.dispose();\n            this._currentDocumentResponse = null;\n        }\n        if (this._isDisposed) {\n            // disposed!\n            if (provider && tokens) {\n                provider.releaseDocumentSemanticTokens(tokens.resultId);\n            }\n            return;\n        }\n        if (!provider || !styling) {\n            this._model.tokenization.setSemanticTokens(null, false);\n            return;\n        }\n        if (!tokens) {\n            this._model.tokenization.setSemanticTokens(null, true);\n            rescheduleIfNeeded();\n            return;\n        }\n        if (isSemanticTokensEdits(tokens)) {\n            if (!currentResponse) {\n                // not possible!\n                this._model.tokenization.setSemanticTokens(null, true);\n                return;\n            }\n            if (tokens.edits.length === 0) {\n                // nothing to do!\n                tokens = {\n                    resultId: tokens.resultId,\n                    data: currentResponse.data\n                };\n            }\n            else {\n                let deltaLength = 0;\n                for (const edit of tokens.edits) {\n                    deltaLength += (edit.data ? edit.data.length : 0) - edit.deleteCount;\n                }\n                const srcData = currentResponse.data;\n                const destData = new Uint32Array(srcData.length + deltaLength);\n                let srcLastStart = srcData.length;\n                let destLastStart = destData.length;\n                for (let i = tokens.edits.length - 1; i >= 0; i--) {\n                    const edit = tokens.edits[i];\n                    if (edit.start > srcData.length) {\n                        styling.warnInvalidEditStart(currentResponse.resultId, tokens.resultId, i, edit.start, srcData.length);\n                        // The edits are invalid and there's no way to recover\n                        this._model.tokenization.setSemanticTokens(null, true);\n                        return;\n                    }\n                    const copyCount = srcLastStart - (edit.start + edit.deleteCount);\n                    if (copyCount > 0) {\n                        ModelSemanticColoring._copy(srcData, srcLastStart - copyCount, destData, destLastStart - copyCount, copyCount);\n                        destLastStart -= copyCount;\n                    }\n                    if (edit.data) {\n                        ModelSemanticColoring._copy(edit.data, 0, destData, destLastStart - edit.data.length, edit.data.length);\n                        destLastStart -= edit.data.length;\n                    }\n                    srcLastStart = edit.start;\n                }\n                if (srcLastStart > 0) {\n                    ModelSemanticColoring._copy(srcData, 0, destData, 0, srcLastStart);\n                }\n                tokens = {\n                    resultId: tokens.resultId,\n                    data: destData\n                };\n            }\n        }\n        if (isSemanticTokens(tokens)) {\n            this._currentDocumentResponse = new SemanticTokensResponse(provider, tokens.resultId, tokens.data);\n            const result = toMultilineTokens2(tokens, styling, this._model.getLanguageId());\n            // Adjust incoming semantic tokens\n            if (pendingChanges.length > 0) {\n                // More changes occurred while the request was running\n                // We need to:\n                // 1. Adjust incoming semantic tokens\n                // 2. Request them again\n                for (const change of pendingChanges) {\n                    for (const area of result) {\n                        for (const singleChange of change.changes) {\n                            area.applyEdit(singleChange.range, singleChange.text);\n                        }\n                    }\n                }\n            }\n            this._model.tokenization.setSemanticTokens(result, true);\n        }\n        else {\n            this._model.tokenization.setSemanticTokens(null, true);\n        }\n        rescheduleIfNeeded();\n    }\n};\nModelSemanticColoring.REQUEST_MIN_DELAY = 300;\nModelSemanticColoring.REQUEST_MAX_DELAY = 2000;\nModelSemanticColoring = __decorate([\n    __param(1, ISemanticTokensStylingService),\n    __param(2, IThemeService),\n    __param(3, ILanguageFeatureDebounceService),\n    __param(4, ILanguageFeaturesService)\n], ModelSemanticColoring);\nclass SemanticTokensResponse {\n    constructor(provider, resultId, data) {\n        this.provider = provider;\n        this.resultId = resultId;\n        this.data = data;\n    }\n    dispose() {\n        this.provider.releaseDocumentSemanticTokens(this.resultId);\n    }\n}\nregisterEditorFeature(DocumentSemanticTokensFeature);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { getDocumentRangeSemanticTokens, hasDocumentRangeSemanticTokensProvider } from '../common/getSemanticTokens.js';\nimport { isSemanticColoringEnabled, SEMANTIC_HIGHLIGHTING_SETTING_ID } from '../common/semanticTokensConfig.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ISemanticTokensStylingService } from '../../../common/services/semanticTokensStyling.js';\nlet ViewportSemanticTokensContribution = class ViewportSemanticTokensContribution extends Disposable {\n    constructor(editor, _semanticTokensStylingService, _themeService, _configurationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._semanticTokensStylingService = _semanticTokensStylingService;\n        this._themeService = _themeService;\n        this._configurationService = _configurationService;\n        this._editor = editor;\n        this._provider = languageFeaturesService.documentRangeSemanticTokensProvider;\n        this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentRangeSemanticTokens', { min: 100, max: 500 });\n        this._tokenizeViewport = this._register(new RunOnceScheduler(() => this._tokenizeViewportNow(), 100));\n        this._outstandingRequests = [];\n        const scheduleTokenizeViewport = () => {\n            if (this._editor.hasModel()) {\n                this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()));\n            }\n        };\n        this._register(this._editor.onDidScrollChange(() => {\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._provider.onDidChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n                this._cancelAll();\n                scheduleTokenizeViewport();\n            }\n        }));\n        this._register(this._themeService.onDidColorThemeChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        scheduleTokenizeViewport();\n    }\n    _cancelAll() {\n        for (const request of this._outstandingRequests) {\n            request.cancel();\n        }\n        this._outstandingRequests = [];\n    }\n    _removeOutstandingRequest(req) {\n        for (let i = 0, len = this._outstandingRequests.length; i < len; i++) {\n            if (this._outstandingRequests[i] === req) {\n                this._outstandingRequests.splice(i, 1);\n                return;\n            }\n        }\n    }\n    _tokenizeViewportNow() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (model.tokenization.hasCompleteSemanticTokens()) {\n            return;\n        }\n        if (!isSemanticColoringEnabled(model, this._themeService, this._configurationService)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        if (!hasDocumentRangeSemanticTokensProvider(this._provider, model)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n        this._outstandingRequests = this._outstandingRequests.concat(visibleRanges.map(range => this._requestRange(model, range)));\n    }\n    _requestRange(model, range) {\n        const requestVersionId = model.getVersionId();\n        const request = createCancelablePromise(token => Promise.resolve(getDocumentRangeSemanticTokens(this._provider, model, range, token)));\n        const sw = new StopWatch(false);\n        request.then((r) => {\n            this._debounceInformation.update(model, sw.elapsed());\n            if (!r || !r.tokens || model.isDisposed() || model.getVersionId() !== requestVersionId) {\n                return;\n            }\n            const { provider, tokens: result } = r;\n            const styling = this._semanticTokensStylingService.getStyling(provider);\n            model.tokenization.setPartialSemanticTokens(range, toMultilineTokens2(result, styling, model.getLanguageId()));\n        }).then(() => this._removeOutstandingRequest(request), () => this._removeOutstandingRequest(request));\n        return request;\n    }\n};\nViewportSemanticTokensContribution.ID = 'editor.contrib.viewportSemanticTokens';\nViewportSemanticTokensContribution = __decorate([\n    __param(1, ISemanticTokensStylingService),\n    __param(2, IThemeService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], ViewportSemanticTokensContribution);\nregisterEditorContribution(ViewportSemanticTokensContribution.ID, ViewportSemanticTokensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { encodeSemanticTokensDto } from '../../../common/services/semanticTokensDto.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function isSemanticTokens(v) {\n    return v && !!(v.data);\n}\nexport function isSemanticTokensEdits(v) {\n    return v && Array.isArray(v.edits);\n}\nexport class DocumentSemanticTokensResult {\n    constructor(provider, tokens, error) {\n        this.provider = provider;\n        this.tokens = tokens;\n        this.error = error;\n    }\n}\nexport function hasDocumentSemanticTokensProvider(registry, model) {\n    return registry.has(model);\n}\nfunction getDocumentSemanticTokensProviders(registry, model) {\n    const groups = registry.orderedGroups(model);\n    return (groups.length > 0 ? groups[0] : []);\n}\nexport function getDocumentSemanticTokens(registry, model, lastProvider, lastResultId, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = getDocumentSemanticTokensProviders(registry, model);\n        // Get tokens from all providers at the same time.\n        const results = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            let result;\n            let error = null;\n            try {\n                result = yield provider.provideDocumentSemanticTokens(model, (provider === lastProvider ? lastResultId : null), token);\n            }\n            catch (err) {\n                error = err;\n                result = null;\n            }\n            if (!result || (!isSemanticTokens(result) && !isSemanticTokensEdits(result))) {\n                result = null;\n            }\n            return new DocumentSemanticTokensResult(provider, result, error);\n        })));\n        // Try to return the first result with actual tokens or\n        // the first result which threw an error (!!)\n        for (const result of results) {\n            if (result.error) {\n                throw result.error;\n            }\n            if (result.tokens) {\n                return result;\n            }\n        }\n        // Return the first result, even if it doesn't have tokens\n        if (results.length > 0) {\n            return results[0];\n        }\n        return null;\n    });\n}\nfunction _getDocumentSemanticTokensProviderHighestGroup(registry, model) {\n    const result = registry.orderedGroups(model);\n    return (result.length > 0 ? result[0] : null);\n}\nclass DocumentRangeSemanticTokensResult {\n    constructor(provider, tokens) {\n        this.provider = provider;\n        this.tokens = tokens;\n    }\n}\nexport function hasDocumentRangeSemanticTokensProvider(providers, model) {\n    return providers.has(model);\n}\nfunction getDocumentRangeSemanticTokensProviders(providers, model) {\n    const groups = providers.orderedGroups(model);\n    return (groups.length > 0 ? groups[0] : []);\n}\nexport function getDocumentRangeSemanticTokens(registry, model, range, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = getDocumentRangeSemanticTokensProviders(registry, model);\n        // Get tokens from all providers at the same time.\n        const results = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            let result;\n            try {\n                result = yield provider.provideDocumentRangeSemanticTokens(model, range, token);\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n                result = null;\n            }\n            if (!result || !isSemanticTokens(result)) {\n                result = null;\n            }\n            return new DocumentRangeSemanticTokensResult(provider, result);\n        })));\n        // Try to return the first result with actual tokens\n        for (const result of results) {\n            if (result.tokens) {\n                return result;\n            }\n        }\n        // Return the first result, even if it doesn't have tokens\n        if (results.length > 0) {\n            return results[0];\n        }\n        return null;\n    });\n}\nCommandsRegistry.registerCommand('_provideDocumentSemanticTokensLegend', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri] = args;\n    assertType(uri instanceof URI);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return undefined;\n    }\n    const { documentSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\n    const providers = _getDocumentSemanticTokensProviderHighestGroup(documentSemanticTokensProvider, model);\n    if (!providers) {\n        // there is no provider => fall back to a document range semantic tokens provider\n        return accessor.get(ICommandService).executeCommand('_provideDocumentRangeSemanticTokensLegend', uri);\n    }\n    return providers[0].getLegend();\n}));\nCommandsRegistry.registerCommand('_provideDocumentSemanticTokens', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri] = args;\n    assertType(uri instanceof URI);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return undefined;\n    }\n    const { documentSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\n    if (!hasDocumentSemanticTokensProvider(documentSemanticTokensProvider, model)) {\n        // there is no provider => fall back to a document range semantic tokens provider\n        return accessor.get(ICommandService).executeCommand('_provideDocumentRangeSemanticTokens', uri, model.getFullModelRange());\n    }\n    const r = yield getDocumentSemanticTokens(documentSemanticTokensProvider, model, null, null, CancellationToken.None);\n    if (!r) {\n        return undefined;\n    }\n    const { provider, tokens } = r;\n    if (!tokens || !isSemanticTokens(tokens)) {\n        return undefined;\n    }\n    const buff = encodeSemanticTokensDto({\n        id: 0,\n        type: 'full',\n        data: tokens.data\n    });\n    if (tokens.resultId) {\n        provider.releaseDocumentSemanticTokens(tokens.resultId);\n    }\n    return buff;\n}));\nCommandsRegistry.registerCommand('_provideDocumentRangeSemanticTokensLegend', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, range] = args;\n    assertType(uri instanceof URI);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return undefined;\n    }\n    const { documentRangeSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\n    const providers = getDocumentRangeSemanticTokensProviders(documentRangeSemanticTokensProvider, model);\n    if (providers.length === 0) {\n        // no providers\n        return undefined;\n    }\n    if (providers.length === 1) {\n        // straight forward case, just a single provider\n        return providers[0].getLegend();\n    }\n    if (!range || !Range.isIRange(range)) {\n        // if no range is provided, we cannot support multiple providers\n        // as we cannot fall back to the one which would give results\n        // => return the first legend for backwards compatibility and print a warning\n        console.warn(`provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in`);\n        return providers[0].getLegend();\n    }\n    const result = yield getDocumentRangeSemanticTokens(documentRangeSemanticTokensProvider, model, Range.lift(range), CancellationToken.None);\n    if (!result) {\n        return undefined;\n    }\n    return result.provider.getLegend();\n}));\nCommandsRegistry.registerCommand('_provideDocumentRangeSemanticTokens', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, range] = args;\n    assertType(uri instanceof URI);\n    assertType(Range.isIRange(range));\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return undefined;\n    }\n    const { documentRangeSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\n    const result = yield getDocumentRangeSemanticTokens(documentRangeSemanticTokensProvider, model, Range.lift(range), CancellationToken.None);\n    if (!result || !result.tokens) {\n        // there is no provider or it didn't return tokens\n        return undefined;\n    }\n    return encodeSemanticTokensDto({\n        id: 0,\n        type: 'full',\n        data: result.tokens.data\n    });\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const SEMANTIC_HIGHLIGHTING_SETTING_ID = 'editor.semanticHighlighting';\nexport function isSemanticColoringEnabled(model, themeService, configurationService) {\n    var _a;\n    const setting = (_a = configurationService.getValue(SEMANTIC_HIGHLIGHTING_SETTING_ID, { overrideIdentifier: model.getLanguageId(), resource: model.uri })) === null || _a === void 0 ? void 0 : _a.enabled;\n    if (typeof setting === 'boolean') {\n        return setting;\n    }\n    return themeService.getColorTheme().semanticHighlighting;\n}\n"],"names":["AbstractEditorCommandsQuickAccessProvider","_AbstractCommandsQuic","_inherits","_super","_createSuper","options","instantiationService","keybindingService","commandService","telemetryService","dialogService","_classCallCheck","call","_createClass","key","value","activeTextEditorControl","this","_step","editorCommandPicks","_iterator","_createForOfIteratorHelper","getSupportedActions","s","n","done","editorAction","push","commandId","id","commandAlias","alias","label","stripIcons","err","e","f","AbstractCommandsQuickAccessProvider","AbstractEditorNavigationQuickAccessProvider","rangeHighlightDecorationId","undefined","picker","token","_a","_this","disposables","DisposableStore","canAcceptInBackground","matchOnLabel","matchOnDescription","matchOnDetail","sortByLabel","pickerDisposable","add","MutableDisposable","doProvide","onDidActiveTextEditorControlChange","_this2","editor","canProvideWithTextEditor","context","codeEditor","getCodeEditor","lastKnownEditorViewState","withNullAsUndefined","saveViewState","onDidChangeCursorPosition","restoreViewState","once","onCancellationRequested","toDisposable","clearDecorations","provideWithTextEditor","provideWithoutTextEditor","_ref","setSelection","range","revealRangeInCenter","preserveFocus","focus","isDiffEditor","getModel","modified","_this3","changeDecorations","changeAccessor","deleteDecorations","overviewRulerDecorationId","rangeHighlightId","newDecorations","description","className","isWholeLine","overviewRuler","color","themeColorFromId","overviewRulerRangeHighlight","position","OverviewRulerLane","Full","_changeAccessor$delta","deltaDecorations","_changeAccessor$delta2","_slicedToArray","AbstractGotoLineQuickAccessProvider","_AbstractEditorNaviga","localize","items","ariaLabel","Disposable","None","onDidAccept","event","item","selectedItems","isValidLineNumber","lineNumber","gotoLocation","toRange","column","keyMods","inBackground","hide","updatePickerAndEditor","parsePosition","trim","substr","PREFIX","length","getPickLabel","addDecorations","onDidChangeValue","getOptions","get","renderType","updateOptions","lineNumbers","arguments","startLineNumber","startColumn","endLineNumber","endColumn","numbers","split","map","part","parseInt","filter","isNaN","endLine","lineCount","isValidColumn","getPosition","model","positionCandidate","validatePosition","equals","_b","getLineCount","__decorate","decorators","target","desc","d","c","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","then","apply","AbstractGotoSymbolQuickAccessProvider","_languageFeaturesService","_outlineModelService","create","provideLabelPick","documentSymbolProvider","has","doProvideWithEditorSymbols","doProvideWithoutEditorSymbols","_regeneratorRuntime","mark","_callee","wrap","_context","prev","waitForLanguageSymbolRegistry","sent","isCancellationRequested","abrupt","stop","index","kind","_callee2","symbolProviderRegistryPromise","symbolProviderListener","_context2","DeferredPromise","onDidChange","dispose","complete","p","_this4","selection","onDidTriggerItemButton","forceSideBySide","symbolsPromise","getDocumentSymbols","picksCts","updatePickerItems","positionToEnclose","_callee3","query","candidate","_context3","busy","CancellationTokenSource","prepareQuery","doGetSymbolPicks","original","findLast","Boolean","type","Range","containsPosition","decoration","activeItems","finish","getSelection","onDidChangeActive","_callee4","symbols","filterBySymbolKind","filterPos","symbolQuery","containerQuery","buttons","openSideBySideDirection","filteredSymbolPicks","symbol","symbolLabel","symbolLabelWithIcon","symbolLabelIconOffset","containerLabel","symbolScore","symbolMatches","containerScore","containerMatches","skipContainerQuery","_scoreFuzzy","_scoreFuzzy2","_scoreFuzzy3","_scoreFuzzy4","_scoreFuzzy5","_scoreFuzzy6","deprecated","sortedFilteredSymbolPicks","symbolPicks","updateLastSeparatorLabel","lastSymbolKind","lastSeparator","lastSymbolKindCounter","symbolPick","_this5","_context4","indexOf","SCOPE_PREFIX","values","pieceToQuery","slice","iconClass","ThemeIcon","asClassName","Codicon","splitHorizontal","splitVertical","tooltip","name","concat","SymbolKinds","toIcon","containerName","extraContainerLabel","scoreFuzzy2","assign","tags","score","highlights","collapseToStart","selectionRange","strikethrough","sort","symbolA","symbolB","compareByKindAndScore","compareByScore","format","NLS_SYMBOL_KIND_CACHE","FALLBACK_NLS_SYMBOL_KIND","_toConsumableArray","kindA","kindB","localeCompare","document","_callee5","_context5","getOrCreate","asListOfDocumentSymbols","PREFIX_BY_CATEGORY","ILanguageFeaturesService","IOutlineModelService","_NLS_SYMBOL_KIND_CACH","_defineProperty","ReadOnlyMessageController","_Disposable","_register","onDidAttemptReadOnlyEdit","_onDidAttemptReadOnlyEdit","messageController","MessageController","hasModel","isSimpleWidget","showMessage","nls","ID","registerEditorContribution","CONTEXT_RENAME_INPUT_VISIBLE","RawContextKey","RenameInputField","_editor","_acceptKeybindings","_themeService","_keybindingService","contextKeyService","_disposables","allowEditorOverflow","_visibleContextKey","bindTo","addContentWidget","onDidChangeConfiguration","hasChanged","_updateFont","onDidColorThemeChange","_updateStyles","removeContentWidget","_domNode","createElement","_input","setAttribute","appendChild","_label","updateLabel","_this2$_acceptKeybind","accept","preview","lookupKeybinding","innerText","comment","getLabel","onDidUpdateKeybindings","getColorTheme","theme","_c","_d","widgetShadowColor","getColor","widgetShadow","widgetBorderColor","widgetBorder","style","backgroundColor","String","editorWidgetBackground","boxShadow","border","inputForeground","inputBackground","inputBorder","borderWidth","borderStyle","borderColor","toString","fontInfo","getOption","fontFamily","fontWeight","fontSize","_visible","_position","preference","cancelInput","wantsPreview","_currentAcceptInput","focusEditor","_currentCancelInput","where","selectionStart","selectionEnd","supportPreview","classList","toggle","Position","size","Math","max","disposeOnDone","newName","onDidBlurEditorWidget","hasFocus","_show","finally","_hide","revealLineInCenterIfOutsideViewport","set","layoutContentWidget","setTimeout","setSelectionRange","getAttribute","reset","IThemeService","IKeybindingService","IContextKeyService","RenameSkeleton","registry","_providerRenameIdx","_providers","ordered","rejects","provider","res","word","resolveRenameLocation","rejectReason","getWordAtPosition","fromPositions","text","join","_provideRenameEdits","edits","provideRenameEdits","RenameController","_instaService","_notificationService","_bulkEditService","_progressService","_logService","_configService","_disposableStore","_cts","_renameInputField","createInstance","_callee6","skeleton","loc","resolveLocationOperation","inputFieldResult","renameOperation","_context6","renameProvider","hasProvider","EditorStateCancellationTokenSource","showWhile","t0","isEmpty","spansMultipleLines","containsRange","min","hasPreviewHandler","getValue","uri","getInput","raceCancellation","renameResult","info","showPreview","code","quotableLabel","respectAutoSaveConfig","ariaSummary","alert","catch","error","acceptInput","getContribution","IInstantiationService","INotificationService","IBulkEditService","IEditorProgressService","ILogService","ITextResourceConfigurationService","RenameAction","_EditorAction","precondition","ContextKeyExpr","and","EditorContextKeys","writable","hasRenameProvider","kbOpts","kbExpr","editorTextFocus","primary","weight","contextMenuOpts","group","order","accessor","args","editorService","ICodeEditorService","Array","isArray","_ref2","pos","URI","isUri","isIPosition","openCodeEditor","resource","getActiveCodeEditor","setPosition","invokeWithinContext","reportTelemetry","run","onUnexpectedError","_get","_getPrototypeOf","prototype","controller","EditorAction","registerEditorAction","RenameCommand","EditorCommand","bindToContribution","registerEditorCommand","handler","x","acceptRenameInput","cancelRenameInput","secondary","registerModelAndPositionCommand","_len","_key","assertType","CancellationToken","rename","_callee7","_accessor$get2","_context7","Error","Registry","as","Extensions","Configuration","registerConfiguration","properties","scope","default","DocumentSemanticTokensFeature","semanticTokensStylingService","modelService","themeService","configurationService","languageFeatureDebounceService","languageFeaturesService","_watchers","register","ModelSemanticColoring","deregister","modelSemanticColoring","handleSettingOrThemeChange","getModels","curr","isSemanticColoringEnabled","onModelAdded","onModelRemoved","affectsConfiguration","SEMANTIC_HIGHLIGHTING_SETTING_ID","_i","_Object$values","ISemanticTokensStylingService","IModelService","IConfigurationService","ILanguageFeatureDebounceService","_Disposable2","_super2","_semanticTokensStylingService","_isDisposed","_model","_provider","documentSemanticTokensProvider","_debounceInformation","for","REQUEST_MIN_DELAY","REQUEST_MAX_DELAY","_fetchDocumentSemanticTokens","RunOnceScheduler","_fetchDocumentSemanticTokensNow","_currentDocumentResponse","_currentDocumentRequestCancellationTokenSource","_documentProvidersChangeListeners","_providersChangedDuringRequest","onDidChangeContent","isScheduled","schedule","onDidChangeLanguage","cancel","_setDocumentSemanticTokens","bindDocumentChangeListeners","_step2","_iterator2","all","_","hasDocumentSemanticTokensProvider","cancellationTokenSource","lastProvider","lastResultId","resultId","request","getDocumentSemanticTokens","pendingChanges","contentChangeListener","sw","StopWatch","update","elapsed","tokens","styling","getStyling","errors","message","tokenization","setSemanticTokens","currentResponse","rescheduleIfNeeded","releaseDocumentSemanticTokens","isSemanticTokensEdits","data","_step3","deltaLength","_iterator3","edit","deleteCount","srcData","destData","Uint32Array","srcLastStart","destLastStart","start","warnInvalidEditStart","copyCount","_copy","isSemanticTokens","SemanticTokensResponse","toMultilineTokens2","getLanguageId","_step4","_iterator4","_step5","change","_iterator5","_step6","area","_iterator6","changes","singleChange","applyEdit","src","srcOffset","dest","destOffset","registerEditorFeature","ViewportSemanticTokensContribution","_configurationService","documentRangeSemanticTokensProvider","_tokenizeViewport","_tokenizeViewportNow","_outstandingRequests","scheduleTokenizeViewport","onDidScrollChange","onDidChangeModel","_cancelAll","onDidChangeModelContent","req","len","splice","hasCompleteSemanticTokens","hasDocumentRangeSemanticTokensProvider","visibleRanges","getVisibleRangesPlusViewportAboveBelow","_requestRange","hasSomeSemanticTokens","requestVersionId","getVersionId","createCancelablePromise","getDocumentRangeSemanticTokens","isDisposed","setPartialSemanticTokens","_removeOutstandingRequest","v","DocumentSemanticTokensResult","getDocumentSemanticTokensProviders","groups","orderedGroups","providers","results","provideDocumentSemanticTokens","_getDocumentSemanticTokensProviderHighestGroup","DocumentRangeSemanticTokensResult","getDocumentRangeSemanticTokensProviders","provideDocumentRangeSemanticTokens","onUnexpectedExternalError","CommandsRegistry","registerCommand","_accessor$get","ICommandService","executeCommand","getLegend","_len2","_key2","buff","getFullModelRange","encodeSemanticTokensDto","_len3","_key3","_accessor$get3","isIRange","console","warn","lift","_len4","_key4","_callee8","_accessor$get4","_context8","setting","overrideIdentifier","enabled","semanticHighlighting"],"sourceRoot":""}