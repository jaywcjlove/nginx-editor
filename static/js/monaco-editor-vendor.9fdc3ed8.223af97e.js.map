{"version":3,"file":"static/js/monaco-editor-vendor.9fdc3ed8.223af97e.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/anchorSelect/browser/anchorSelect.js","../node_modules/monaco-editor/esm/vs/editor/contrib/bracketMatching/browser/bracketMatching.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/moveCaretCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/caretOperations.js","../node_modules/monaco-editor/esm/vs/editor/contrib/caretOperations/browser/transpose.js","../node_modules/monaco-editor/esm/vs/editor/contrib/clipboard/browser/clipboard.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeAction.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionMenu.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/lightBulbWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionUi.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionCommands.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionWidgetContribution.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/codeActionContributions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codeAction/browser/types.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelens.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codeLensCache.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/codelens/browser/codelensController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/color.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorDetector.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorPickerWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorHoverParticipant.js","../node_modules/monaco-editor/esm/vs/editor/contrib/colorPicker/browser/colorContributions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/blockCommentCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/lineCommentCommand.js","../node_modules/monaco-editor/esm/vs/editor/contrib/comment/browser/comment.js","../node_modules/monaco-editor/esm/vs/editor/contrib/contextmenu/browser/contextmenu.js","../node_modules/monaco-editor/esm/vs/editor/contrib/copyPaste/browser/copyPasteController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/copyPaste/browser/copyPasteContribution.js","../node_modules/monaco-editor/esm/vs/editor/contrib/cursorUndo/browser/cursorUndo.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport './anchorSelect.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const SelectionAnchorSet = new RawContextKey('selectionAnchorSet', false);\nlet SelectionAnchorController = class SelectionAnchorController {\n    constructor(editor, contextKeyService) {\n        this.editor = editor;\n        this.selectionAnchorSetContextKey = SelectionAnchorSet.bindTo(contextKeyService);\n        this.modelChangeListener = editor.onDidChangeModel(() => this.selectionAnchorSetContextKey.reset());\n    }\n    static get(editor) {\n        return editor.getContribution(SelectionAnchorController.ID);\n    }\n    setSelectionAnchor() {\n        if (this.editor.hasModel()) {\n            const position = this.editor.getPosition();\n            this.editor.changeDecorations((accessor) => {\n                if (this.decorationId) {\n                    accessor.removeDecoration(this.decorationId);\n                }\n                this.decorationId = accessor.addDecoration(Selection.fromPositions(position, position), {\n                    description: 'selection-anchor',\n                    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                    hoverMessage: new MarkdownString().appendText(localize('selectionAnchor', \"Selection Anchor\")),\n                    className: 'selection-anchor'\n                });\n            });\n            this.selectionAnchorSetContextKey.set(!!this.decorationId);\n            alert(localize('anchorSet', \"Anchor set at {0}:{1}\", position.lineNumber, position.column));\n        }\n    }\n    goToSelectionAnchor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const anchorPosition = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (anchorPosition) {\n                this.editor.setPosition(anchorPosition.getStartPosition());\n            }\n        }\n    }\n    selectFromAnchorToCursor() {\n        if (this.editor.hasModel() && this.decorationId) {\n            const start = this.editor.getModel().getDecorationRange(this.decorationId);\n            if (start) {\n                const end = this.editor.getPosition();\n                this.editor.setSelection(Selection.fromPositions(start.getStartPosition(), end));\n                this.cancelSelectionAnchor();\n            }\n        }\n    }\n    cancelSelectionAnchor() {\n        if (this.decorationId) {\n            const decorationId = this.decorationId;\n            this.editor.changeDecorations((accessor) => {\n                accessor.removeDecoration(decorationId);\n                this.decorationId = undefined;\n            });\n            this.selectionAnchorSetContextKey.set(false);\n        }\n    }\n    dispose() {\n        this.cancelSelectionAnchor();\n        this.modelChangeListener.dispose();\n    }\n};\nSelectionAnchorController.ID = 'editor.contrib.selectionAnchorController';\nSelectionAnchorController = __decorate([\n    __param(1, IContextKeyService)\n], SelectionAnchorController);\nclass SetSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.setSelectionAnchor',\n            label: localize('setSelectionAnchor', \"Set Selection Anchor\"),\n            alias: 'Set Selection Anchor',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 32 /* KeyCode.KeyB */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.setSelectionAnchor();\n        });\n    }\n}\nclass GoToSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.goToSelectionAnchor',\n            label: localize('goToSelectionAnchor', \"Go to Selection Anchor\"),\n            alias: 'Go to Selection Anchor',\n            precondition: SelectionAnchorSet,\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToSelectionAnchor();\n        });\n    }\n}\nclass SelectFromAnchorToCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectFromAnchorToCursor',\n            label: localize('selectFromAnchorToCursor', \"Select from Anchor to Cursor\"),\n            alias: 'Select from Anchor to Cursor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectFromAnchorToCursor();\n        });\n    }\n}\nclass CancelSelectionAnchor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.cancelSelectionAnchor',\n            label: localize('cancelSelectionAnchor', \"Cancel Selection Anchor\"),\n            alias: 'Cancel Selection Anchor',\n            precondition: SelectionAnchorSet,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 9 /* KeyCode.Escape */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = SelectionAnchorController.get(editor)) === null || _a === void 0 ? void 0 : _a.cancelSelectionAnchor();\n        });\n    }\n}\nregisterEditorContribution(SelectionAnchorController.ID, SelectionAnchorController);\nregisterEditorAction(SetSelectionAnchor);\nregisterEditorAction(GoToSelectionAnchor);\nregisterEditorAction(SelectFromAnchorToCursor);\nregisterEditorAction(CancelSelectionAnchor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './bracketMatching.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { editorBracketMatchBackground, editorBracketMatchBorder } from '../../../common/core/editorColorRegistry.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst overviewRulerBracketMatchForeground = registerColor('editorOverviewRuler.bracketMatchForeground', { dark: '#A0A0A0', light: '#A0A0A0', hcDark: '#A0A0A0', hcLight: '#A0A0A0' }, nls.localize('overviewRulerBracketMatchForeground', 'Overview ruler marker color for matching brackets.'));\nclass JumpToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.jumpToBracket',\n            label: nls.localize('smartSelect.jumpBracket', \"Go to Bracket\"),\n            alias: 'Go to Bracket',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 88 /* KeyCode.Backslash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.jumpToBracket();\n    }\n}\nclass SelectToBracketAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectToBracket',\n            label: nls.localize('smartSelect.selectToBracket', \"Select to Bracket\"),\n            alias: 'Select to Bracket',\n            precondition: undefined,\n            description: {\n                description: `Select to Bracket`,\n                args: [{\n                        name: 'args',\n                        schema: {\n                            type: 'object',\n                            properties: {\n                                'selectBrackets': {\n                                    type: 'boolean',\n                                    default: true\n                                }\n                            },\n                        }\n                    }]\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        let selectBrackets = true;\n        if (args && args.selectBrackets === false) {\n            selectBrackets = false;\n        }\n        (_a = BracketMatchingController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectToBracket(selectBrackets);\n    }\n}\nclass BracketsData {\n    constructor(position, brackets, options) {\n        this.position = position;\n        this.brackets = brackets;\n        this.options = options;\n    }\n}\nexport class BracketMatchingController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._lastBracketsData = [];\n        this._lastVersionId = 0;\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateBracketsSoon = this._register(new RunOnceScheduler(() => this._updateBrackets(), 50));\n        this._matchBrackets = this._editor.getOption(66 /* EditorOption.matchBrackets */);\n        this._updateBracketsSoon.schedule();\n        this._register(editor.onDidChangeCursorPosition((e) => {\n            if (this._matchBrackets === 'never') {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeModelLanguageConfiguration((e) => {\n            this._lastBracketsData = [];\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(66 /* EditorOption.matchBrackets */)) {\n                this._matchBrackets = this._editor.getOption(66 /* EditorOption.matchBrackets */);\n                this._decorations.clear();\n                this._lastBracketsData = [];\n                this._lastVersionId = 0;\n                this._updateBracketsSoon.schedule();\n            }\n        }));\n        this._register(editor.onDidBlurEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n        this._register(editor.onDidFocusEditorWidget(() => {\n            this._updateBracketsSoon.schedule();\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(BracketMatchingController.ID);\n    }\n    jumpToBracket() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = this._editor.getSelections().map(selection => {\n            const position = selection.getStartPosition();\n            // find matching brackets if position is on a bracket\n            const brackets = model.bracketPairs.matchBracket(position);\n            let newCursorPosition = null;\n            if (brackets) {\n                if (brackets[0].containsPosition(position) && !brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[1].getStartPosition();\n                }\n                else if (brackets[1].containsPosition(position)) {\n                    newCursorPosition = brackets[0].getStartPosition();\n                }\n            }\n            else {\n                // find the enclosing brackets if the position isn't on a matching bracket\n                const enclosingBrackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (enclosingBrackets) {\n                    newCursorPosition = enclosingBrackets[1].getStartPosition();\n                }\n                else {\n                    // no enclosing brackets, try the very first next bracket\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        newCursorPosition = nextBracket.range.getStartPosition();\n                    }\n                }\n            }\n            if (newCursorPosition) {\n                return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n            }\n            return new Selection(position.lineNumber, position.column, position.lineNumber, position.column);\n        });\n        this._editor.setSelections(newSelections);\n        this._editor.revealRange(newSelections[0]);\n    }\n    selectToBracket(selectBrackets) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const newSelections = [];\n        this._editor.getSelections().forEach(selection => {\n            const position = selection.getStartPosition();\n            let brackets = model.bracketPairs.matchBracket(position);\n            if (!brackets) {\n                brackets = model.bracketPairs.findEnclosingBrackets(position);\n                if (!brackets) {\n                    const nextBracket = model.bracketPairs.findNextBracket(position);\n                    if (nextBracket && nextBracket.range) {\n                        brackets = model.bracketPairs.matchBracket(nextBracket.range.getStartPosition());\n                    }\n                }\n            }\n            let selectFrom = null;\n            let selectTo = null;\n            if (brackets) {\n                brackets.sort(Range.compareRangesUsingStarts);\n                const [open, close] = brackets;\n                selectFrom = selectBrackets ? open.getStartPosition() : open.getEndPosition();\n                selectTo = selectBrackets ? close.getEndPosition() : close.getStartPosition();\n                if (close.containsPosition(position)) {\n                    // select backwards if the cursor was on the closing bracket\n                    const tmp = selectFrom;\n                    selectFrom = selectTo;\n                    selectTo = tmp;\n                }\n            }\n            if (selectFrom && selectTo) {\n                newSelections.push(new Selection(selectFrom.lineNumber, selectFrom.column, selectTo.lineNumber, selectTo.column));\n            }\n        });\n        if (newSelections.length > 0) {\n            this._editor.setSelections(newSelections);\n            this._editor.revealRange(newSelections[0]);\n        }\n    }\n    _updateBrackets() {\n        if (this._matchBrackets === 'never') {\n            return;\n        }\n        this._recomputeBrackets();\n        const newDecorations = [];\n        let newDecorationsLen = 0;\n        for (const bracketData of this._lastBracketsData) {\n            const brackets = bracketData.brackets;\n            if (brackets) {\n                newDecorations[newDecorationsLen++] = { range: brackets[0], options: bracketData.options };\n                newDecorations[newDecorationsLen++] = { range: brackets[1], options: bracketData.options };\n            }\n        }\n        this._decorations.set(newDecorations);\n    }\n    _recomputeBrackets() {\n        if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n            // no model or no focus => no brackets!\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length > 100) {\n            // no bracket matching for high numbers of selections\n            this._lastBracketsData = [];\n            this._lastVersionId = 0;\n            return;\n        }\n        const model = this._editor.getModel();\n        const versionId = model.getVersionId();\n        let previousData = [];\n        if (this._lastVersionId === versionId) {\n            // use the previous data only if the model is at the same version id\n            previousData = this._lastBracketsData;\n        }\n        const positions = [];\n        let positionsLen = 0;\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const selection = selections[i];\n            if (selection.isEmpty()) {\n                // will bracket match a cursor only if the selection is collapsed\n                positions[positionsLen++] = selection.getStartPosition();\n            }\n        }\n        // sort positions for `previousData` cache hits\n        if (positions.length > 1) {\n            positions.sort(Position.compare);\n        }\n        const newData = [];\n        let newDataLen = 0;\n        let previousIndex = 0;\n        const previousLen = previousData.length;\n        for (let i = 0, len = positions.length; i < len; i++) {\n            const position = positions[i];\n            while (previousIndex < previousLen && previousData[previousIndex].position.isBefore(position)) {\n                previousIndex++;\n            }\n            if (previousIndex < previousLen && previousData[previousIndex].position.equals(position)) {\n                newData[newDataLen++] = previousData[previousIndex];\n            }\n            else {\n                let brackets = model.bracketPairs.matchBracket(position, 20 /* give at most 20ms to compute */);\n                let options = BracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;\n                if (!brackets && this._matchBrackets === 'always') {\n                    brackets = model.bracketPairs.findEnclosingBrackets(position, 20 /* give at most 20ms to compute */);\n                    options = BracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER;\n                }\n                newData[newDataLen++] = new BracketsData(position, brackets, options);\n            }\n        }\n        this._lastBracketsData = newData;\n        this._lastVersionId = versionId;\n    }\n}\nBracketMatchingController.ID = 'editor.contrib.bracketMatchingController';\nBracketMatchingController._DECORATION_OPTIONS_WITH_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match',\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerBracketMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nBracketMatchingController._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER = ModelDecorationOptions.register({\n    description: 'bracket-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'bracket-match'\n});\nregisterEditorContribution(BracketMatchingController.ID, BracketMatchingController);\nregisterEditorAction(SelectToBracketAction);\nregisterEditorAction(JumpToBracketAction);\nregisterThemingParticipant((theme, collector) => {\n    const bracketMatchBackground = theme.getColor(editorBracketMatchBackground);\n    if (bracketMatchBackground) {\n        collector.addRule(`.monaco-editor .bracket-match { background-color: ${bracketMatchBackground}; }`);\n    }\n    const bracketMatchBorder = theme.getColor(editorBracketMatchBorder);\n    if (bracketMatchBorder) {\n        collector.addRule(`.monaco-editor .bracket-match { border: 1px solid ${bracketMatchBorder}; }`);\n    }\n});\n// Go to menu\nMenuRegistry.appendMenuItem(MenuId.MenubarGoMenu, {\n    group: '5_infile_nav',\n    command: {\n        id: 'editor.action.jumpToBracket',\n        title: nls.localize({ key: 'miGoToBracket', comment: ['&& denotes a mnemonic'] }, \"Go to &&Bracket\")\n    },\n    order: 2\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class MoveCaretCommand {\n    constructor(selection, isMovingLeft) {\n        this._selection = selection;\n        this._isMovingLeft = isMovingLeft;\n    }\n    getEditOperations(model, builder) {\n        if (this._selection.startLineNumber !== this._selection.endLineNumber || this._selection.isEmpty()) {\n            return;\n        }\n        const lineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        const endColumn = this._selection.endColumn;\n        if (this._isMovingLeft && startColumn === 1) {\n            return;\n        }\n        if (!this._isMovingLeft && endColumn === model.getLineMaxColumn(lineNumber)) {\n            return;\n        }\n        if (this._isMovingLeft) {\n            const rangeBefore = new Range(lineNumber, startColumn - 1, lineNumber, startColumn);\n            const charBefore = model.getValueInRange(rangeBefore);\n            builder.addEditOperation(rangeBefore, null);\n            builder.addEditOperation(new Range(lineNumber, endColumn, lineNumber, endColumn), charBefore);\n        }\n        else {\n            const rangeAfter = new Range(lineNumber, endColumn, lineNumber, endColumn + 1);\n            const charAfter = model.getValueInRange(rangeAfter);\n            builder.addEditOperation(rangeAfter, null);\n            builder.addEditOperation(new Range(lineNumber, startColumn, lineNumber, startColumn), charAfter);\n        }\n    }\n    computeCursorState(model, helper) {\n        if (this._isMovingLeft) {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn - 1, this._selection.endLineNumber, this._selection.endColumn - 1);\n        }\n        else {\n            return new Selection(this._selection.startLineNumber, this._selection.startColumn + 1, this._selection.endLineNumber, this._selection.endColumn + 1);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { MoveCaretCommand } from './moveCaretCommand.js';\nimport * as nls from '../../../../nls.js';\nclass MoveCaretAction extends EditorAction {\n    constructor(left, opts) {\n        super(opts);\n        this.left = left;\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new MoveCaretCommand(selection, this.left));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass MoveCaretLeftAction extends MoveCaretAction {\n    constructor() {\n        super(true, {\n            id: 'editor.action.moveCarretLeftAction',\n            label: nls.localize('caret.moveLeft', \"Move Selected Text Left\"),\n            alias: 'Move Selected Text Left',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nclass MoveCaretRightAction extends MoveCaretAction {\n    constructor() {\n        super(false, {\n            id: 'editor.action.moveCarretRightAction',\n            label: nls.localize('caret.moveRight', \"Move Selected Text Right\"),\n            alias: 'Move Selected Text Right',\n            precondition: EditorContextKeys.writable\n        });\n    }\n}\nregisterEditorAction(MoveCaretLeftAction);\nregisterEditorAction(MoveCaretRightAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ReplaceCommand } from '../../../common/commands/replaceCommand.js';\nimport { MoveOperations } from '../../../common/cursor/cursorMoveOperations.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass TransposeLettersAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.transposeLetters',\n            label: nls.localize('transposeLetters.label', \"Transpose Letters\"),\n            alias: 'Transpose Letters',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 50 /* KeyCode.KeyT */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            if (!selection.isEmpty()) {\n                continue;\n            }\n            const lineNumber = selection.startLineNumber;\n            const column = selection.startColumn;\n            const lastColumn = model.getLineMaxColumn(lineNumber);\n            if (lineNumber === 1 && (column === 1 || (column === 2 && lastColumn === 2))) {\n                // at beginning of file, nothing to do\n                continue;\n            }\n            // handle special case: when at end of line, transpose left two chars\n            // otherwise, transpose left and right chars\n            const endPosition = (column === lastColumn) ?\n                selection.getPosition() :\n                MoveOperations.rightPosition(model, selection.getPosition().lineNumber, selection.getPosition().column);\n            const middlePosition = MoveOperations.leftPosition(model, endPosition);\n            const beginPosition = MoveOperations.leftPosition(model, middlePosition);\n            const leftChar = model.getValueInRange(Range.fromPositions(beginPosition, middlePosition));\n            const rightChar = model.getValueInRange(Range.fromPositions(middlePosition, endPosition));\n            const replaceRange = Range.fromPositions(beginPosition, endPosition);\n            commands.push(new ReplaceCommand(replaceRange, rightChar + leftChar));\n        }\n        if (commands.length > 0) {\n            editor.pushUndoStop();\n            editor.executeCommands(this.id, commands);\n            editor.pushUndoStop();\n        }\n    }\n}\nregisterEditorAction(TransposeLettersAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as browser from '../../../../base/browser/browser.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { CopyOptions, InMemoryClipboardMetadataManager } from '../../../browser/controller/textAreaInput.js';\nimport { EditorAction, MultiCommand, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nconst CLIPBOARD_CONTEXT_MENU_GROUP = '9_cutcopypaste';\nconst supportsCut = (platform.isNative || document.queryCommandSupported('cut'));\nconst supportsCopy = (platform.isNative || document.queryCommandSupported('copy'));\n// Firefox only supports navigator.clipboard.readText() in browser extensions.\n// See https://developer.mozilla.org/en-US/docs/Web/API/Clipboard/readText#Browser_compatibility\n// When loading over http, navigator.clipboard can be undefined. See https://github.com/microsoft/monaco-editor/issues/2313\nconst supportsPaste = (typeof navigator.clipboard === 'undefined' || browser.isFirefox) ? document.queryCommandSupported('paste') : true;\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const CutAction = supportsCut ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCutAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind cut keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 54 /* KeyCode.KeyX */, secondary: [1024 /* KeyMod.Shift */ | 20 /* KeyCode.Delete */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCut', comment: ['&& denotes a mnemonic'] }, \"Cu&&t\"),\n            order: 1\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.cutLabel', \"Cut\"),\n            when: EditorContextKeys.writable,\n            order: 1,\n        }]\n})) : undefined;\nexport const CopyAction = supportsCopy ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardCopyAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind copy keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */, secondary: [2048 /* KeyMod.CtrlCmd */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miCopy', comment: ['&& denotes a mnemonic'] }, \"&&Copy\"),\n            order: 2\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.copyLabel', \"Copy\"),\n            order: 2,\n        }]\n})) : undefined;\nMenuRegistry.appendMenuItem(MenuId.MenubarEditMenu, { submenu: MenuId.MenubarCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: '2_ccp', order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextCopy, title: { value: nls.localize('copy as', \"Copy As\"), original: 'Copy As', }, group: CLIPBOARD_CONTEXT_MENU_GROUP, order: 3 });\nMenuRegistry.appendMenuItem(MenuId.EditorContext, { submenu: MenuId.EditorContextShare, title: { value: nls.localize('share', \"Share\"), original: 'Share', }, group: '11_share', order: -1 });\nexport const PasteAction = supportsPaste ? registerCommand(new MultiCommand({\n    id: 'editor.action.clipboardPasteAction',\n    precondition: undefined,\n    kbOpts: (\n    // Do not bind paste keybindings in the browser,\n    // since browsers do that for us and it avoids security prompts\n    platform.isNative ? {\n        primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */,\n        win: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 52 /* KeyCode.KeyV */, secondary: [1024 /* KeyMod.Shift */ | 19 /* KeyCode.Insert */] },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    } : undefined),\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '2_ccp',\n            title: nls.localize({ key: 'miPaste', comment: ['&& denotes a mnemonic'] }, \"&&Paste\"),\n            order: 4\n        }, {\n            menuId: MenuId.EditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            order: 1\n        }, {\n            menuId: MenuId.SimpleEditorContext,\n            group: CLIPBOARD_CONTEXT_MENU_GROUP,\n            title: nls.localize('actions.clipboard.pasteLabel', \"Paste\"),\n            when: EditorContextKeys.writable,\n            order: 4,\n        }]\n})) : undefined;\nclass ExecCommandCopyWithSyntaxHighlightingAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.clipboardCopyWithSyntaxHighlightingAction',\n            label: nls.localize('actions.clipboard.copyWithSyntaxHighlightingLabel', \"Copy With Syntax Highlighting\"),\n            alias: 'Copy With Syntax Highlighting',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const emptySelectionClipboard = editor.getOption(33 /* EditorOption.emptySelectionClipboard */);\n        if (!emptySelectionClipboard && editor.getSelection().isEmpty()) {\n            return;\n        }\n        CopyOptions.forceCopyWithSyntaxHighlighting = true;\n        editor.focus();\n        document.execCommand('copy');\n        CopyOptions.forceCopyWithSyntaxHighlighting = false;\n    }\n}\nfunction registerExecCommandImpl(target, browserCommand) {\n    if (!target) {\n        return;\n    }\n    // 1. handle case when focus is in editor.\n    target.addImplementation(10000, 'code-editor', (accessor, args) => {\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            // Do not execute if there is no selection and empty selection clipboard is off\n            const emptySelectionClipboard = focusedEditor.getOption(33 /* EditorOption.emptySelectionClipboard */);\n            const selection = focusedEditor.getSelection();\n            if (selection && selection.isEmpty() && !emptySelectionClipboard) {\n                return true;\n            }\n            document.execCommand(browserCommand);\n            return true;\n        }\n        return false;\n    });\n    // 2. (default) handle case when focus is somewhere else.\n    target.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand(browserCommand);\n        return true;\n    });\n}\nregisterExecCommandImpl(CutAction, 'cut');\nregisterExecCommandImpl(CopyAction, 'copy');\nif (PasteAction) {\n    // 1. Paste: handle case when focus is in editor.\n    PasteAction.addImplementation(10000, 'code-editor', (accessor, args) => {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const clipboardService = accessor.get(IClipboardService);\n        // Only if editor text focus (i.e. not if editor has widget focus).\n        const focusedEditor = codeEditorService.getFocusedCodeEditor();\n        if (focusedEditor && focusedEditor.hasTextFocus()) {\n            const result = document.execCommand('paste');\n            // Use the clipboard service if document.execCommand('paste') was not successful\n            if (!result && platform.isWeb) {\n                return (() => __awaiter(void 0, void 0, void 0, function* () {\n                    const clipboardText = yield clipboardService.readText();\n                    if (clipboardText !== '') {\n                        const metadata = InMemoryClipboardMetadataManager.INSTANCE.get(clipboardText);\n                        let pasteOnNewLine = false;\n                        let multicursorText = null;\n                        let mode = null;\n                        if (metadata) {\n                            pasteOnNewLine = (focusedEditor.getOption(33 /* EditorOption.emptySelectionClipboard */) && !!metadata.isFromEmptySelection);\n                            multicursorText = (typeof metadata.multicursorText !== 'undefined' ? metadata.multicursorText : null);\n                            mode = metadata.mode;\n                        }\n                        focusedEditor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                            text: clipboardText,\n                            pasteOnNewLine,\n                            multicursorText,\n                            mode\n                        });\n                    }\n                }))();\n            }\n            return true;\n        }\n        return false;\n    });\n    // 2. Paste: (default) handle case when focus is somewhere else.\n    PasteAction.addImplementation(0, 'generic-dom', (accessor, args) => {\n        document.execCommand('paste');\n        return true;\n    });\n}\nif (supportsCopy) {\n    registerEditorAction(ExecCommandCopyWithSyntaxHighlightingAction);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce, equals, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { CodeActionKind, CodeActionTriggerSource, filtersAction, mayIncludeActionsOfKind } from './types.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport const codeActionCommandId = 'editor.action.codeAction';\nexport const refactorCommandId = 'editor.action.refactor';\nexport const refactorPreviewCommandId = 'editor.action.refactor.preview';\nexport const sourceActionCommandId = 'editor.action.sourceAction';\nexport const organizeImportsCommandId = 'editor.action.organizeImports';\nexport const fixAllCommandId = 'editor.action.fixAll';\nexport class CodeActionItem {\n    constructor(action, provider) {\n        this.action = action;\n        this.provider = provider;\n    }\n    resolve(token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (((_a = this.provider) === null || _a === void 0 ? void 0 : _a.resolveCodeAction) && !this.action.edit) {\n                let action;\n                try {\n                    action = yield this.provider.resolveCodeAction(this.action, token);\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n                if (action) {\n                    this.action.edit = action.edit;\n                }\n            }\n            return this;\n        });\n    }\n}\nclass ManagedCodeActionSet extends Disposable {\n    constructor(actions, documentation, disposables) {\n        super();\n        this.documentation = documentation;\n        this._register(disposables);\n        this.allActions = [...actions].sort(ManagedCodeActionSet.codeActionsComparator);\n        this.validActions = this.allActions.filter(({ action }) => !action.disabled);\n    }\n    static codeActionsComparator({ action: a }, { action: b }) {\n        if (a.isPreferred && !b.isPreferred) {\n            return -1;\n        }\n        else if (!a.isPreferred && b.isPreferred) {\n            return 1;\n        }\n        if (isNonEmptyArray(a.diagnostics)) {\n            if (isNonEmptyArray(b.diagnostics)) {\n                return a.diagnostics[0].message.localeCompare(b.diagnostics[0].message);\n            }\n            else {\n                return -1;\n            }\n        }\n        else if (isNonEmptyArray(b.diagnostics)) {\n            return 1;\n        }\n        else {\n            return 0; // both have no diagnostics\n        }\n    }\n    get hasAutoFix() {\n        return this.validActions.some(({ action: fix }) => !!fix.kind && CodeActionKind.QuickFix.contains(new CodeActionKind(fix.kind)) && !!fix.isPreferred);\n    }\n}\nconst emptyCodeActionsResponse = { actions: [], documentation: undefined };\nexport function getCodeActions(registry, model, rangeOrSelection, trigger, progress, token) {\n    var _a;\n    const filter = trigger.filter || {};\n    const codeActionContext = {\n        only: (_a = filter.include) === null || _a === void 0 ? void 0 : _a.value,\n        trigger: trigger.type,\n    };\n    const cts = new TextModelCancellationTokenSource(model, token);\n    const providers = getCodeActionProviders(registry, model, filter);\n    const disposables = new DisposableStore();\n    const promises = providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n        try {\n            progress.report(provider);\n            const providedCodeActions = yield provider.provideCodeActions(model, rangeOrSelection, codeActionContext, cts.token);\n            if (providedCodeActions) {\n                disposables.add(providedCodeActions);\n            }\n            if (cts.token.isCancellationRequested) {\n                return emptyCodeActionsResponse;\n            }\n            const filteredActions = ((providedCodeActions === null || providedCodeActions === void 0 ? void 0 : providedCodeActions.actions) || []).filter(action => action && filtersAction(filter, action));\n            const documentation = getDocumentation(provider, filteredActions, filter.include);\n            return {\n                actions: filteredActions.map(action => new CodeActionItem(action, provider)),\n                documentation\n            };\n        }\n        catch (err) {\n            if (isCancellationError(err)) {\n                throw err;\n            }\n            onUnexpectedExternalError(err);\n            return emptyCodeActionsResponse;\n        }\n    }));\n    const listener = registry.onDidChange(() => {\n        const newProviders = registry.all(model);\n        if (!equals(newProviders, providers)) {\n            cts.cancel();\n        }\n    });\n    return Promise.all(promises).then(actions => {\n        const allActions = actions.map(x => x.actions).flat();\n        const allDocumentation = coalesce(actions.map(x => x.documentation));\n        return new ManagedCodeActionSet(allActions, allDocumentation, disposables);\n    })\n        .finally(() => {\n        listener.dispose();\n        cts.dispose();\n    });\n}\nfunction getCodeActionProviders(registry, model, filter) {\n    return registry.all(model)\n        // Don't include providers that we know will not return code actions of interest\n        .filter(provider => {\n        if (!provider.providedCodeActionKinds) {\n            // We don't know what type of actions this provider will return.\n            return true;\n        }\n        return provider.providedCodeActionKinds.some(kind => mayIncludeActionsOfKind(filter, new CodeActionKind(kind)));\n    });\n}\nfunction getDocumentation(provider, providedCodeActions, only) {\n    if (!provider.documentation) {\n        return undefined;\n    }\n    const documentation = provider.documentation.map(entry => ({ kind: new CodeActionKind(entry.kind), command: entry.command }));\n    if (only) {\n        let currentBest;\n        for (const entry of documentation) {\n            if (entry.kind.contains(only)) {\n                if (!currentBest) {\n                    currentBest = entry;\n                }\n                else {\n                    // Take best match\n                    if (currentBest.kind.contains(entry.kind)) {\n                        currentBest = entry;\n                    }\n                }\n            }\n        }\n        if (currentBest) {\n            return currentBest === null || currentBest === void 0 ? void 0 : currentBest.command;\n        }\n    }\n    // Otherwise, check to see if any of the provided actions match.\n    for (const action of providedCodeActions) {\n        if (!action.kind) {\n            continue;\n        }\n        for (const entry of documentation) {\n            if (entry.kind.contains(new CodeActionKind(action.kind))) {\n                return entry.command;\n            }\n        }\n    }\n    return undefined;\n}\nCommandsRegistry.registerCommand('_executeCodeActionProvider', function (accessor, resource, rangeOrSelection, kind, itemResolveCount) {\n    return __awaiter(this, void 0, void 0, function* () {\n        if (!(resource instanceof URI)) {\n            throw illegalArgument();\n        }\n        const { codeActionProvider } = accessor.get(ILanguageFeaturesService);\n        const model = accessor.get(IModelService).getModel(resource);\n        if (!model) {\n            throw illegalArgument();\n        }\n        const validatedRangeOrSelection = Selection.isISelection(rangeOrSelection)\n            ? Selection.liftSelection(rangeOrSelection)\n            : Range.isIRange(rangeOrSelection)\n                ? model.validateRange(rangeOrSelection)\n                : undefined;\n        if (!validatedRangeOrSelection) {\n            throw illegalArgument();\n        }\n        const include = typeof kind === 'string' ? new CodeActionKind(kind) : undefined;\n        const codeActionSet = yield getCodeActions(codeActionProvider, model, validatedRangeOrSelection, { type: 1 /* languages.CodeActionTriggerType.Invoke */, triggerAction: CodeActionTriggerSource.Default, filter: { includeSourceActions: true, include } }, Progress.None, CancellationToken.None);\n        const resolving = [];\n        const resolveCount = Math.min(codeActionSet.validActions.length, typeof itemResolveCount === 'number' ? itemResolveCount : 0);\n        for (let i = 0; i < resolveCount; i++) {\n            resolving.push(codeActionSet.validActions[i].resolve(CancellationToken.None));\n        }\n        try {\n            yield Promise.all(resolving);\n            return codeActionSet.validActions.map(item => item.action);\n        }\n        finally {\n            setTimeout(() => codeActionSet.dispose(), 100);\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { Action, Separator } from '../../../../base/common/actions.js';\nimport { canceled } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, dispose, MutableDisposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './media/action.css';\nimport { Position } from '../../../common/core/position.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { codeActionCommandId, CodeActionItem, fixAllCommandId, organizeImportsCommandId, refactorCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from './types.js';\nimport { localize } from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport const Context = {\n    Visible: new RawContextKey('CodeActionMenuVisible', false, localize('CodeActionMenuVisible', \"Whether the code action list widget is visible\"))\n};\nclass CodeActionAction extends Action {\n    constructor(action, callback) {\n        super(action.command ? action.command.id : action.title, stripNewlines(action.title), undefined, !action.disabled, callback);\n        this.action = action;\n    }\n}\nfunction stripNewlines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, ' ');\n}\nconst TEMPLATE_ID = 'codeActionWidget';\nconst codeActionLineHeight = 26;\nlet CodeMenuRenderer = class CodeMenuRenderer {\n    constructor(acceptKeybindings, keybindingService) {\n        this.acceptKeybindings = acceptKeybindings;\n        this.keybindingService = keybindingService;\n    }\n    get templateId() { return TEMPLATE_ID; }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.disposables = [];\n        data.root = container;\n        data.text = document.createElement('span');\n        // data.detail = document.createElement('');\n        container.append(data.text);\n        // container.append(data.detail);\n        return data;\n    }\n    renderElement(element, index, templateData) {\n        const data = templateData;\n        const text = element.title;\n        // const detail = element.detail;\n        const isEnabled = element.isEnabled;\n        const isSeparator = element.isSeparator;\n        const isDocumentation = element.isDocumentation;\n        data.text.textContent = text;\n        // data.detail.textContent = detail;\n        if (!isEnabled) {\n            data.root.classList.add('option-disabled');\n            data.root.style.backgroundColor = 'transparent !important';\n        }\n        else {\n            data.root.classList.remove('option-disabled');\n        }\n        if (isSeparator) {\n            data.root.classList.add('separator');\n            data.root.style.height = '10px';\n        }\n        if (!isDocumentation) {\n            const updateLabel = () => {\n                var _a, _b;\n                const [accept, preview] = this.acceptKeybindings;\n                data.root.title = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Refactor, Shift+F2 to Preview\"'] }, \"{0} to Refactor, {1} to Preview\", (_a = this.keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this.keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n                // data.root.title = this.keybindingService.lookupKeybinding(accept)?.getLabel() + ' to Refactor, ' + this.keybindingService.lookupKeybinding(preview)?.getLabel() + ' to Preview';\n            };\n            updateLabel();\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables = dispose(templateData.disposables);\n    }\n};\nCodeMenuRenderer = __decorate([\n    __param(1, IKeybindingService)\n], CodeMenuRenderer);\nlet CodeActionMenu = class CodeActionMenu extends Disposable {\n    constructor(_editor, _delegate, _contextMenuService, keybindingService, _languageFeaturesService, _telemetryService, _themeService, _configurationService, _contextViewService, _contextKeyService) {\n        super();\n        this._editor = _editor;\n        this._delegate = _delegate;\n        this._contextMenuService = _contextMenuService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._telemetryService = _telemetryService;\n        this._configurationService = _configurationService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._showingActions = this._register(new MutableDisposable());\n        this.codeActionList = this._register(new MutableDisposable());\n        this.options = [];\n        this._visible = false;\n        this.viewItems = [];\n        this.hasSeperator = false;\n        this._keybindingResolver = new CodeActionKeybindingResolver({\n            getKeybindings: () => keybindingService.getKeybindings()\n        });\n        this._ctxMenuWidgetVisible = Context.Visible.bindTo(this._contextKeyService);\n        this.listRenderer = new CodeMenuRenderer([`onEnterSelectCodeAction`, `onEnterSelectCodeActionWithPreview`], keybindingService);\n    }\n    get isVisible() {\n        return this._visible;\n    }\n    isCodeActionWidgetEnabled(model) {\n        return this._configurationService.getValue('editor.experimental.useCustomCodeActionMenu', {\n            resource: model.uri\n        });\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            e.elements.forEach(element => {\n                if (element.isEnabled) {\n                    element.action.run();\n                    this.hideCodeActionWidget();\n                }\n            });\n        }\n    }\n    _onListHover(e) {\n        var _a, _b, _c, _d;\n        if (!e.element) {\n            this.currSelectedItem = undefined;\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setFocus([]);\n        }\n        else {\n            if ((_b = e.element) === null || _b === void 0 ? void 0 : _b.isEnabled) {\n                (_c = this.codeActionList.value) === null || _c === void 0 ? void 0 : _c.setFocus([e.element.index]);\n                this.focusedEnabledItem = this.viewItems.indexOf(e.element);\n                this.currSelectedItem = e.element.index;\n            }\n            else {\n                this.currSelectedItem = undefined;\n                (_d = this.codeActionList.value) === null || _d === void 0 ? void 0 : _d.setFocus([e.element.index]);\n            }\n        }\n    }\n    renderCodeActionMenuList(element, inputArray) {\n        var _a;\n        const renderDisposables = new DisposableStore();\n        const renderMenu = document.createElement('div');\n        // Render invisible div to block mouse interaction in the rest of the UI\n        const menuBlock = document.createElement('div');\n        this.block = element.appendChild(menuBlock);\n        this.block.classList.add('context-view-block');\n        this.block.style.position = 'fixed';\n        this.block.style.cursor = 'initial';\n        this.block.style.left = '0';\n        this.block.style.top = '0';\n        this.block.style.width = '100%';\n        this.block.style.height = '100%';\n        this.block.style.zIndex = '-1';\n        renderDisposables.add(dom.addDisposableListener(this.block, dom.EventType.MOUSE_DOWN, e => e.stopPropagation()));\n        renderMenu.id = 'codeActionMenuWidget';\n        renderMenu.classList.add('codeActionMenuWidget');\n        element.appendChild(renderMenu);\n        this.codeActionList.value = new List('codeActionWidget', renderMenu, {\n            getHeight(element) {\n                if (element.isSeparator) {\n                    return 10;\n                }\n                return codeActionLineHeight;\n            },\n            getTemplateId(element) {\n                return 'codeActionWidget';\n            }\n        }, [this.listRenderer], { keyboardSupport: false });\n        renderDisposables.add(this.codeActionList.value.onMouseOver(e => this._onListHover(e)));\n        renderDisposables.add(this.codeActionList.value.onDidChangeFocus(e => { var _a; return (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.domFocus(); }));\n        renderDisposables.add(this.codeActionList.value.onDidChangeSelection(e => this._onListSelection(e)));\n        renderDisposables.add(this._editor.onDidLayoutChange(e => this.hideCodeActionWidget()));\n        // Populating the list widget and tracking enabled options.\n        inputArray.forEach((item, index) => {\n            const currIsSeparator = item.class === 'separator';\n            let isDocumentation = false;\n            if (item instanceof CodeActionAction) {\n                isDocumentation = item.action.kind === CodeActionMenu.documentationID;\n            }\n            if (currIsSeparator) {\n                // set to true forever\n                this.hasSeperator = true;\n            }\n            const menuItem = { title: item.label, detail: item.tooltip, action: inputArray[index], isEnabled: item.enabled, isSeparator: currIsSeparator, index, isDocumentation };\n            if (item.enabled) {\n                this.viewItems.push(menuItem);\n            }\n            this.options.push(menuItem);\n        });\n        this.codeActionList.value.splice(0, this.codeActionList.value.length, this.options);\n        const height = this.hasSeperator ? (inputArray.length - 1) * codeActionLineHeight + 10 : inputArray.length * codeActionLineHeight;\n        renderMenu.style.height = String(height) + 'px';\n        this.codeActionList.value.layout(height);\n        // For finding width dynamically (not using resize observer)\n        const arr = [];\n        this.options.forEach((item, index) => {\n            var _a, _b;\n            if (!this.codeActionList.value) {\n                return;\n            }\n            const element = (_b = document.getElementById((_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.getElementID(index))) === null || _b === void 0 ? void 0 : _b.getElementsByTagName('span')[0].offsetWidth;\n            arr.push(Number(element));\n        });\n        // resize observer - can be used in the future since list widget supports dynamic height but not width\n        const maxWidth = Math.max(...arr);\n        // 40 is the additional padding for the list widget (20 left, 20 right)\n        renderMenu.style.width = maxWidth + 52 + 'px';\n        (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.layout(height, maxWidth);\n        // List selection\n        if (this.viewItems.length < 1 || this.viewItems.every(item => item.isDocumentation)) {\n            this.currSelectedItem = undefined;\n        }\n        else {\n            this.focusedEnabledItem = 0;\n            this.currSelectedItem = this.viewItems[0].index;\n            this.codeActionList.value.setFocus([this.currSelectedItem]);\n        }\n        // List Focus\n        this.codeActionList.value.domFocus();\n        const focusTracker = dom.trackFocus(element);\n        const blurListener = focusTracker.onDidBlur(() => {\n            this.hideCodeActionWidget();\n            // this._contextViewService.hideContextView({ source: this });\n        });\n        renderDisposables.add(blurListener);\n        renderDisposables.add(focusTracker);\n        this._ctxMenuWidgetVisible.set(true);\n        return renderDisposables;\n    }\n    focusPrevious() {\n        var _a;\n        if (typeof this.focusedEnabledItem === 'undefined') {\n            this.focusedEnabledItem = this.viewItems[0].index;\n        }\n        else if (this.viewItems.length < 1) {\n            return false;\n        }\n        const startIndex = this.focusedEnabledItem;\n        let item;\n        do {\n            this.focusedEnabledItem = this.focusedEnabledItem - 1;\n            if (this.focusedEnabledItem < 0) {\n                this.focusedEnabledItem = this.viewItems.length - 1;\n            }\n            item = this.viewItems[this.focusedEnabledItem];\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setFocus([item.index]);\n            this.currSelectedItem = item.index;\n        } while (this.focusedEnabledItem !== startIndex && ((!item.isEnabled) || item.action.id === Separator.ID));\n        return true;\n    }\n    focusNext() {\n        var _a;\n        if (typeof this.focusedEnabledItem === 'undefined') {\n            this.focusedEnabledItem = this.viewItems.length - 1;\n        }\n        else if (this.viewItems.length < 1) {\n            return false;\n        }\n        const startIndex = this.focusedEnabledItem;\n        let item;\n        do {\n            this.focusedEnabledItem = (this.focusedEnabledItem + 1) % this.viewItems.length;\n            item = this.viewItems[this.focusedEnabledItem];\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setFocus([item.index]);\n            this.currSelectedItem = item.index;\n        } while (this.focusedEnabledItem !== startIndex && ((!item.isEnabled) || item.action.id === Separator.ID));\n        return true;\n    }\n    navigateListWithKeysUp() {\n        this.focusPrevious();\n    }\n    navigateListWithKeysDown() {\n        this.focusNext();\n    }\n    onEnterSet() {\n        var _a;\n        if (typeof this.currSelectedItem === 'number') {\n            (_a = this.codeActionList.value) === null || _a === void 0 ? void 0 : _a.setSelection([this.currSelectedItem]);\n        }\n    }\n    dispose() {\n        super.dispose();\n    }\n    hideCodeActionWidget() {\n        this._ctxMenuWidgetVisible.reset();\n        this.options = [];\n        this.viewItems = [];\n        this.focusedEnabledItem = 0;\n        this.currSelectedItem = undefined;\n        this.hasSeperator = false;\n        this._contextViewService.hideContextView({ source: this });\n    }\n    codeActionTelemetry(openedFromString, didCancel, CodeActions) {\n        this._telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionFrom: openedFromString,\n            validCodeActions: CodeActions.validActions.length,\n            cancelled: didCancel,\n        });\n    }\n    show(trigger, codeActions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model) {\n                return;\n            }\n            const actionsToShow = options.includeDisabledActions ? codeActions.allActions : codeActions.validActions;\n            if (!actionsToShow.length) {\n                this._visible = false;\n                return;\n            }\n            if (!this._editor.getDomNode()) {\n                // cancel when editor went off-dom\n                this._visible = false;\n                throw canceled();\n            }\n            this._visible = true;\n            this._showingActions.value = codeActions;\n            const menuActions = this.getMenuActions(trigger, actionsToShow, codeActions.documentation);\n            const anchor = Position.isIPosition(at) ? this._toCoords(at) : at || { x: 0, y: 0 };\n            const resolver = this._keybindingResolver.getResolver();\n            const useShadowDOM = this._editor.getOption(117 /* EditorOption.useShadowDOM */);\n            if (this.isCodeActionWidgetEnabled(model)) {\n                this._contextViewService.showContextView({\n                    getAnchor: () => anchor,\n                    render: (container) => this.renderCodeActionMenuList(container, menuActions),\n                    onHide: (didCancel) => {\n                        const openedFromString = (options.fromLightbulb) ? CodeActionTriggerSource.Lightbulb : trigger.triggerAction;\n                        this.codeActionTelemetry(openedFromString, didCancel, codeActions);\n                        this._visible = false;\n                        this._editor.focus();\n                    },\n                }, this._editor.getDomNode(), false);\n            }\n            else {\n                this._contextMenuService.showContextMenu({\n                    domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n                    getAnchor: () => anchor,\n                    getActions: () => menuActions,\n                    onHide: (didCancel) => {\n                        const openedFromString = (options.fromLightbulb) ? CodeActionTriggerSource.Lightbulb : trigger.triggerAction;\n                        this.codeActionTelemetry(openedFromString, didCancel, codeActions);\n                        this._visible = false;\n                        this._editor.focus();\n                    },\n                    autoSelectFirstItem: true,\n                    getKeyBinding: action => action instanceof CodeActionAction ? resolver(action.action) : undefined,\n                });\n            }\n        });\n    }\n    getMenuActions(trigger, actionsToShow, documentation) {\n        var _a, _b;\n        const toCodeActionAction = (item) => new CodeActionAction(item.action, () => this._delegate.onSelectCodeAction(item, trigger));\n        const result = actionsToShow\n            .map(toCodeActionAction);\n        const allDocumentation = [...documentation];\n        const model = this._editor.getModel();\n        if (model && result.length) {\n            for (const provider of this._languageFeaturesService.codeActionProvider.all(model)) {\n                if (provider._getAdditionalMenuItems) {\n                    allDocumentation.push(...provider._getAdditionalMenuItems({ trigger: trigger.type, only: (_b = (_a = trigger.filter) === null || _a === void 0 ? void 0 : _a.include) === null || _b === void 0 ? void 0 : _b.value }, actionsToShow.map(item => item.action)));\n                }\n            }\n        }\n        if (allDocumentation.length) {\n            result.push(new Separator(), ...allDocumentation.map(command => toCodeActionAction(new CodeActionItem({\n                title: command.title,\n                command: command,\n                kind: CodeActionMenu.documentationID\n            }, undefined))));\n        }\n        return result;\n    }\n    _toCoords(position) {\n        if (!this._editor.hasModel()) {\n            return { x: 0, y: 0 };\n        }\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n        this._editor.render();\n        // Translate to absolute editor position\n        const cursorCoords = this._editor.getScrolledVisiblePosition(position);\n        const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n        const x = editorCoords.left + cursorCoords.left;\n        const y = editorCoords.top + cursorCoords.top + cursorCoords.height;\n        return { x, y };\n    }\n};\nCodeActionMenu.documentationID = '_documentation';\nCodeActionMenu = __decorate([\n    __param(2, IContextMenuService),\n    __param(3, IKeybindingService),\n    __param(4, ILanguageFeaturesService),\n    __param(5, ITelemetryService),\n    __param(6, IThemeService),\n    __param(7, IConfigurationService),\n    __param(8, IContextViewService),\n    __param(9, IContextKeyService)\n], CodeActionMenu);\nexport { CodeActionMenu };\nexport class CodeActionKeybindingResolver {\n    constructor(_keybindingProvider) {\n        this._keybindingProvider = _keybindingProvider;\n    }\n    getResolver() {\n        // Lazy since we may not actually ever read the value\n        const allCodeActionBindings = new Lazy(() => this._keybindingProvider.getKeybindings()\n            .filter(item => CodeActionKeybindingResolver.codeActionCommands.indexOf(item.command) >= 0)\n            .filter(item => item.resolvedKeybinding)\n            .map((item) => {\n            // Special case these commands since they come built-in with VS Code and don't use 'commandArgs'\n            let commandArgs = item.commandArgs;\n            if (item.command === organizeImportsCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceOrganizeImports.value };\n            }\n            else if (item.command === fixAllCommandId) {\n                commandArgs = { kind: CodeActionKind.SourceFixAll.value };\n            }\n            return Object.assign({ resolvedKeybinding: item.resolvedKeybinding }, CodeActionCommandArgs.fromUser(commandArgs, {\n                kind: CodeActionKind.None,\n                apply: \"never\" /* CodeActionAutoApply.Never */\n            }));\n        }));\n        return (action) => {\n            if (action.kind) {\n                const binding = this.bestKeybindingForCodeAction(action, allCodeActionBindings.getValue());\n                return binding === null || binding === void 0 ? void 0 : binding.resolvedKeybinding;\n            }\n            return undefined;\n        };\n    }\n    bestKeybindingForCodeAction(action, candidates) {\n        if (!action.kind) {\n            return undefined;\n        }\n        const kind = new CodeActionKind(action.kind);\n        return candidates\n            .filter(candidate => candidate.kind.contains(kind))\n            .filter(candidate => {\n            if (candidate.preferred) {\n                // If the candidate keybinding only applies to preferred actions, the this action must also be preferred\n                return action.isPreferred;\n            }\n            return true;\n        })\n            .reduceRight((currentBest, candidate) => {\n            if (!currentBest) {\n                return candidate;\n            }\n            // Select the more specific binding\n            return currentBest.kind.contains(candidate.kind) ? candidate : currentBest;\n        }, undefined);\n    }\n}\nCodeActionKeybindingResolver.codeActionCommands = [\n    refactorCommandId,\n    codeActionCommandId,\n    sourceActionCommandId,\n    organizeImportsCommandId,\n    fixAllCommandId\n];\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Gesture } from '../../../../base/browser/touch.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './lightBulbWidget.css';\nimport { computeIndentLevel } from '../../../common/model/utils.js';\nimport * as nls from '../../../../nls.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorBackground, editorLightBulbAutoFixForeground, editorLightBulbForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nvar LightBulbState;\n(function (LightBulbState) {\n    LightBulbState.Hidden = { type: 0 /* Type.Hidden */ };\n    class Showing {\n        constructor(actions, trigger, editorPosition, widgetPosition) {\n            this.actions = actions;\n            this.trigger = trigger;\n            this.editorPosition = editorPosition;\n            this.widgetPosition = widgetPosition;\n            this.type = 1 /* Type.Showing */;\n        }\n    }\n    LightBulbState.Showing = Showing;\n})(LightBulbState || (LightBulbState = {}));\nlet LightBulbWidget = class LightBulbWidget extends Disposable {\n    constructor(_editor, _quickFixActionId, _preferredFixActionId, _keybindingService) {\n        super();\n        this._editor = _editor;\n        this._quickFixActionId = _quickFixActionId;\n        this._preferredFixActionId = _preferredFixActionId;\n        this._keybindingService = _keybindingService;\n        this._onClick = this._register(new Emitter());\n        this.onClick = this._onClick.event;\n        this._state = LightBulbState.Hidden;\n        this._domNode = document.createElement('div');\n        this._domNode.className = Codicon.lightBulb.classNames;\n        this._editor.addContentWidget(this);\n        this._register(this._editor.onDidChangeModelContent(_ => {\n            // cancel when the line in question has been removed\n            const editorModel = this._editor.getModel();\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */ || !editorModel || this.state.editorPosition.lineNumber >= editorModel.getLineCount()) {\n                this.hide();\n            }\n        }));\n        Gesture.ignoreTarget(this._domNode);\n        this._register(dom.addStandardDisposableGenericMouseDownListener(this._domNode, e => {\n            if (this.state.type !== 1 /* LightBulbState.Type.Showing */) {\n                return;\n            }\n            // Make sure that focus / cursor location is not lost when clicking widget icon\n            this._editor.focus();\n            e.preventDefault();\n            // a bit of extra work to make sure the menu\n            // doesn't cover the line-text\n            const { top, height } = dom.getDomNodePagePosition(this._domNode);\n            const lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */);\n            let pad = Math.floor(lineHeight / 3);\n            if (this.state.widgetPosition.position !== null && this.state.widgetPosition.position.lineNumber < this.state.editorPosition.lineNumber) {\n                pad += lineHeight;\n            }\n            this._onClick.fire({\n                x: e.posx,\n                y: top + height + pad,\n                actions: this.state.actions,\n                trigger: this.state.trigger,\n            });\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseenter', (e) => {\n            if ((e.buttons & 1) !== 1) {\n                return;\n            }\n            // mouse enters lightbulb while the primary/left button\n            // is being pressed -> hide the lightbulb\n            this.hide();\n        }));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            // hide when told to do so\n            if (e.hasChanged(59 /* EditorOption.lightbulb */) && !this._editor.getOption(59 /* EditorOption.lightbulb */).enabled) {\n                this.hide();\n            }\n        }));\n        this._updateLightBulbTitleAndIcon();\n        this._register(this._keybindingService.onDidUpdateKeybindings(this._updateLightBulbTitleAndIcon, this));\n    }\n    dispose() {\n        super.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'LightBulbWidget';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return this._state.type === 1 /* LightBulbState.Type.Showing */ ? this._state.widgetPosition : null;\n    }\n    update(actions, trigger, atPosition) {\n        if (actions.validActions.length <= 0) {\n            return this.hide();\n        }\n        const options = this._editor.getOptions();\n        if (!options.get(59 /* EditorOption.lightbulb */).enabled) {\n            return this.hide();\n        }\n        const model = this._editor.getModel();\n        if (!model) {\n            return this.hide();\n        }\n        const { lineNumber, column } = model.validatePosition(atPosition);\n        const tabSize = model.getOptions().tabSize;\n        const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n        const lineContent = model.getLineContent(lineNumber);\n        const indent = computeIndentLevel(lineContent, tabSize);\n        const lineHasSpace = fontInfo.spaceWidth * indent > 22;\n        const isFolded = (lineNumber) => {\n            return lineNumber > 2 && this._editor.getTopForLineNumber(lineNumber) === this._editor.getTopForLineNumber(lineNumber - 1);\n        };\n        let effectiveLineNumber = lineNumber;\n        if (!lineHasSpace) {\n            if (lineNumber > 1 && !isFolded(lineNumber - 1)) {\n                effectiveLineNumber -= 1;\n            }\n            else if (!isFolded(lineNumber + 1)) {\n                effectiveLineNumber += 1;\n            }\n            else if (column * fontInfo.spaceWidth < 22) {\n                // cannot show lightbulb above/below and showing\n                // it inline would overlay the cursor...\n                return this.hide();\n            }\n        }\n        this.state = new LightBulbState.Showing(actions, trigger, atPosition, {\n            position: { lineNumber: effectiveLineNumber, column: 1 },\n            preference: LightBulbWidget._posPref\n        });\n        this._editor.layoutContentWidget(this);\n    }\n    hide() {\n        this.state = LightBulbState.Hidden;\n        this._editor.layoutContentWidget(this);\n    }\n    get state() { return this._state; }\n    set state(value) {\n        this._state = value;\n        this._updateLightBulbTitleAndIcon();\n    }\n    _updateLightBulbTitleAndIcon() {\n        if (this.state.type === 1 /* LightBulbState.Type.Showing */ && this.state.actions.hasAutoFix) {\n            // update icon\n            this._domNode.classList.remove(...Codicon.lightBulb.classNamesArray);\n            this._domNode.classList.add(...Codicon.lightbulbAutofix.classNamesArray);\n            const preferredKb = this._keybindingService.lookupKeybinding(this._preferredFixActionId);\n            if (preferredKb) {\n                this.title = nls.localize('preferredcodeActionWithKb', \"Show Code Actions. Preferred Quick Fix Available ({0})\", preferredKb.getLabel());\n                return;\n            }\n        }\n        // update icon\n        this._domNode.classList.remove(...Codicon.lightbulbAutofix.classNamesArray);\n        this._domNode.classList.add(...Codicon.lightBulb.classNamesArray);\n        const kb = this._keybindingService.lookupKeybinding(this._quickFixActionId);\n        if (kb) {\n            this.title = nls.localize('codeActionWithKb', \"Show Code Actions ({0})\", kb.getLabel());\n        }\n        else {\n            this.title = nls.localize('codeAction', \"Show Code Actions\");\n        }\n    }\n    set title(value) {\n        this._domNode.title = value;\n    }\n};\nLightBulbWidget._posPref = [0 /* ContentWidgetPositionPreference.EXACT */];\nLightBulbWidget = __decorate([\n    __param(3, IKeybindingService)\n], LightBulbWidget);\nexport { LightBulbWidget };\nregisterThemingParticipant((theme, collector) => {\n    var _a;\n    const editorBackgroundColor = (_a = theme.getColor(editorBackground)) === null || _a === void 0 ? void 0 : _a.transparent(0.7);\n    // Lightbulb Icon\n    const editorLightBulbForegroundColor = theme.getColor(editorLightBulbForeground);\n    if (editorLightBulbForegroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${Codicon.lightBulb.cssSelector} {\n\t\t\tcolor: ${editorLightBulbForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`);\n    }\n    // Lightbulb Auto Fix Icon\n    const editorLightBulbAutoFixForegroundColor = theme.getColor(editorLightBulbAutoFixForeground);\n    if (editorLightBulbAutoFixForegroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .contentWidgets ${Codicon.lightbulbAutofix.cssSelector} {\n\t\t\tcolor: ${editorLightBulbAutoFixForegroundColor};\n\t\t\tbackground-color: ${editorBackgroundColor};\n\t\t}`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar _CodeActionUi_disposed;\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { CodeActionMenu } from './codeActionMenu.js';\nimport { LightBulbWidget } from './lightBulbWidget.js';\nlet CodeActionUi = class CodeActionUi extends Disposable {\n    constructor(_editor, quickFixActionId, preferredFixActionId, delegate, instantiationService) {\n        super();\n        this._editor = _editor;\n        this.delegate = delegate;\n        this._activeCodeActions = this._register(new MutableDisposable());\n        this.previewOn = false;\n        _CodeActionUi_disposed.set(this, false);\n        this._codeActionWidget = new Lazy(() => {\n            return this._register(instantiationService.createInstance(CodeActionMenu, this._editor, {\n                onSelectCodeAction: (action, trigger) => __awaiter(this, void 0, void 0, function* () {\n                    if (this.previewOn) {\n                        this.delegate.applyCodeAction(action, /* retrigger */ true, Boolean(this.previewOn));\n                    }\n                    else {\n                        this.delegate.applyCodeAction(action, /* retrigger */ true, Boolean(trigger.preview));\n                    }\n                    this.previewOn = false;\n                })\n            }));\n        });\n        this._lightBulbWidget = new Lazy(() => {\n            const widget = this._register(instantiationService.createInstance(LightBulbWidget, this._editor, quickFixActionId, preferredFixActionId));\n            this._register(widget.onClick(e => this.showCodeActionList(e.trigger, e.actions, e, { includeDisabledActions: false, fromLightbulb: true })));\n            return widget;\n        });\n    }\n    dispose() {\n        __classPrivateFieldSet(this, _CodeActionUi_disposed, true, \"f\");\n        super.dispose();\n    }\n    hideCodeActionWidget() {\n        if (this._codeActionWidget.hasValue()) {\n            this._codeActionWidget.getValue().hideCodeActionWidget();\n        }\n    }\n    onEnter() {\n        if (this._codeActionWidget.hasValue()) {\n            this._codeActionWidget.getValue().onEnterSet();\n        }\n    }\n    onPreviewEnter() {\n        this.previewOn = true;\n        this.onEnter();\n    }\n    navigateList(navUp) {\n        if (this._codeActionWidget.hasValue()) {\n            if (navUp) {\n                this._codeActionWidget.getValue().navigateListWithKeysUp();\n            }\n            else {\n                this._codeActionWidget.getValue().navigateListWithKeysDown();\n            }\n        }\n    }\n    update(newState) {\n        var _a, _b, _c, _d, _e;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (newState.type !== 1 /* CodeActionsState.Type.Triggered */) {\n                (_a = this._lightBulbWidget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\n                return;\n            }\n            let actions;\n            try {\n                actions = yield newState.actions;\n            }\n            catch (e) {\n                onUnexpectedError(e);\n                return;\n            }\n            if (__classPrivateFieldGet(this, _CodeActionUi_disposed, \"f\")) {\n                return;\n            }\n            this._lightBulbWidget.getValue().update(actions, newState.trigger, newState.position);\n            if (newState.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                if ((_b = newState.trigger.filter) === null || _b === void 0 ? void 0 : _b.include) { // Triggered for specific scope\n                    // Check to see if we want to auto apply.\n                    const validActionToApply = this.tryGetValidActionToApply(newState.trigger, actions);\n                    if (validActionToApply) {\n                        try {\n                            this._lightBulbWidget.getValue().hide();\n                            yield this.delegate.applyCodeAction(validActionToApply, false, false);\n                        }\n                        finally {\n                            actions.dispose();\n                        }\n                        return;\n                    }\n                    // Check to see if there is an action that we would have applied were it not invalid\n                    if (newState.trigger.context) {\n                        const invalidAction = this.getInvalidActionThatWouldHaveBeenApplied(newState.trigger, actions);\n                        if (invalidAction && invalidAction.action.disabled) {\n                            (_c = MessageController.get(this._editor)) === null || _c === void 0 ? void 0 : _c.showMessage(invalidAction.action.disabled, newState.trigger.context.position);\n                            actions.dispose();\n                            return;\n                        }\n                    }\n                }\n                const includeDisabledActions = !!((_d = newState.trigger.filter) === null || _d === void 0 ? void 0 : _d.include);\n                if (newState.trigger.context) {\n                    if (!actions.allActions.length || !includeDisabledActions && !actions.validActions.length) {\n                        (_e = MessageController.get(this._editor)) === null || _e === void 0 ? void 0 : _e.showMessage(newState.trigger.context.notAvailableMessage, newState.trigger.context.position);\n                        this._activeCodeActions.value = actions;\n                        actions.dispose();\n                        return;\n                    }\n                }\n                this._activeCodeActions.value = actions;\n                this._codeActionWidget.getValue().show(newState.trigger, actions, newState.position, { includeDisabledActions, fromLightbulb: false });\n            }\n            else {\n                // auto magically triggered\n                if (this._codeActionWidget.getValue().isVisible) {\n                    // TODO: Figure out if we should update the showing menu?\n                    actions.dispose();\n                }\n                else {\n                    this._activeCodeActions.value = actions;\n                }\n            }\n        });\n    }\n    getInvalidActionThatWouldHaveBeenApplied(trigger, actions) {\n        if (!actions.allActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length === 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.allActions.length === 1)) {\n            return actions.allActions.find(({ action }) => action.disabled);\n        }\n        return undefined;\n    }\n    tryGetValidActionToApply(trigger, actions) {\n        if (!actions.validActions.length) {\n            return undefined;\n        }\n        if ((trigger.autoApply === \"first\" /* CodeActionAutoApply.First */ && actions.validActions.length > 0)\n            || (trigger.autoApply === \"ifSingle\" /* CodeActionAutoApply.IfSingle */ && actions.validActions.length === 1)) {\n            return actions.validActions[0];\n        }\n        return undefined;\n    }\n    showCodeActionList(trigger, actions, at, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._codeActionWidget.getValue().show(trigger, actions, at, options);\n        });\n    }\n};\n_CodeActionUi_disposed = new WeakMap();\nCodeActionUi = __decorate([\n    __param(4, IInstantiationService)\n], CodeActionUi);\nexport { CodeActionUi };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __classPrivateFieldGet = (this && this.__classPrivateFieldGet) || function (receiver, state, kind, f) {\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n    return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n};\nvar __classPrivateFieldSet = (this && this.__classPrivateFieldSet) || function (receiver, state, value, kind, f) {\n    if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n    if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n    if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n    return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n};\nvar _CodeActionModel_isDisposed;\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { isCancellationError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { Range } from '../../../common/core/range.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { Progress } from '../../../../platform/progress/common/progress.js';\nimport { getCodeActions } from './codeAction.js';\nimport { CodeActionTriggerSource } from './types.js';\nexport const SUPPORTED_CODE_ACTIONS = new RawContextKey('supportedCodeAction', '');\nclass CodeActionOracle extends Disposable {\n    constructor(_editor, _markerService, _signalChange, _delay = 250) {\n        super();\n        this._editor = _editor;\n        this._markerService = _markerService;\n        this._signalChange = _signalChange;\n        this._delay = _delay;\n        this._autoTriggerTimer = this._register(new TimeoutTimer());\n        this._register(this._markerService.onMarkerChanged(e => this._onMarkerChanges(e)));\n        this._register(this._editor.onDidChangeCursorPosition(() => this._onCursorChange()));\n    }\n    trigger(trigger) {\n        const selection = this._getRangeOfSelectionUnlessWhitespaceEnclosed(trigger);\n        return this._createEventAndSignalChange(trigger, selection);\n    }\n    _onMarkerChanges(resources) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (resources.some(resource => isEqual(resource, model.uri))) {\n            this._autoTriggerTimer.cancelAndSet(() => {\n                this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n            }, this._delay);\n        }\n    }\n    _onCursorChange() {\n        this._autoTriggerTimer.cancelAndSet(() => {\n            this.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }, this._delay);\n    }\n    _getRangeOfMarker(selection) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return undefined;\n        }\n        for (const marker of this._markerService.read({ resource: model.uri })) {\n            const markerRange = model.validateRange(marker);\n            if (Range.intersectRanges(markerRange, selection)) {\n                return Range.lift(markerRange);\n            }\n        }\n        return undefined;\n    }\n    _getRangeOfSelectionUnlessWhitespaceEnclosed(trigger) {\n        if (!this._editor.hasModel()) {\n            return undefined;\n        }\n        const model = this._editor.getModel();\n        const selection = this._editor.getSelection();\n        if (selection.isEmpty() && trigger.type === 2 /* CodeActionTriggerType.Auto */) {\n            const { lineNumber, column } = selection.getPosition();\n            const line = model.getLineContent(lineNumber);\n            if (line.length === 0) {\n                // empty line\n                return undefined;\n            }\n            else if (column === 1) {\n                // look only right\n                if (/\\s/.test(line[0])) {\n                    return undefined;\n                }\n            }\n            else if (column === model.getLineMaxColumn(lineNumber)) {\n                // look only left\n                if (/\\s/.test(line[line.length - 1])) {\n                    return undefined;\n                }\n            }\n            else {\n                // look left and right\n                if (/\\s/.test(line[column - 2]) && /\\s/.test(line[column - 1])) {\n                    return undefined;\n                }\n            }\n        }\n        return selection;\n    }\n    _createEventAndSignalChange(trigger, selection) {\n        const model = this._editor.getModel();\n        if (!selection || !model) {\n            // cancel\n            this._signalChange(undefined);\n            return undefined;\n        }\n        const markerRange = this._getRangeOfMarker(selection);\n        const position = markerRange ? markerRange.getStartPosition() : selection.getStartPosition();\n        const e = {\n            trigger,\n            selection,\n            position\n        };\n        this._signalChange(e);\n        return e;\n    }\n}\nexport var CodeActionsState;\n(function (CodeActionsState) {\n    CodeActionsState.Empty = { type: 0 /* Type.Empty */ };\n    class Triggered {\n        constructor(trigger, rangeOrSelection, position, _cancellablePromise) {\n            this.trigger = trigger;\n            this.rangeOrSelection = rangeOrSelection;\n            this.position = position;\n            this._cancellablePromise = _cancellablePromise;\n            this.type = 1 /* Type.Triggered */;\n            this.actions = _cancellablePromise.catch((e) => {\n                if (isCancellationError(e)) {\n                    return emptyCodeActionSet;\n                }\n                throw e;\n            });\n        }\n        cancel() {\n            this._cancellablePromise.cancel();\n        }\n    }\n    CodeActionsState.Triggered = Triggered;\n})(CodeActionsState || (CodeActionsState = {}));\nconst emptyCodeActionSet = {\n    allActions: [],\n    validActions: [],\n    dispose: () => { },\n    documentation: [],\n    hasAutoFix: false\n};\nexport class CodeActionModel extends Disposable {\n    constructor(_editor, _registry, _markerService, contextKeyService, _progressService) {\n        super();\n        this._editor = _editor;\n        this._registry = _registry;\n        this._markerService = _markerService;\n        this._progressService = _progressService;\n        this._codeActionOracle = this._register(new MutableDisposable());\n        this._state = CodeActionsState.Empty;\n        this._onDidChangeState = this._register(new Emitter());\n        this.onDidChangeState = this._onDidChangeState.event;\n        _CodeActionModel_isDisposed.set(this, false);\n        this._supportedCodeActions = SUPPORTED_CODE_ACTIONS.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeModel(() => this._update()));\n        this._register(this._editor.onDidChangeModelLanguage(() => this._update()));\n        this._register(this._registry.onDidChange(() => this._update()));\n        this._update();\n    }\n    dispose() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        __classPrivateFieldSet(this, _CodeActionModel_isDisposed, true, \"f\");\n        super.dispose();\n        this.setState(CodeActionsState.Empty, true);\n    }\n    _update() {\n        if (__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            return;\n        }\n        this._codeActionOracle.value = undefined;\n        this.setState(CodeActionsState.Empty);\n        const model = this._editor.getModel();\n        if (model\n            && this._registry.has(model)\n            && !this._editor.getOption(83 /* EditorOption.readOnly */)) {\n            const supportedActions = [];\n            for (const provider of this._registry.all(model)) {\n                if (Array.isArray(provider.providedCodeActionKinds)) {\n                    supportedActions.push(...provider.providedCodeActionKinds);\n                }\n            }\n            this._supportedCodeActions.set(supportedActions.join(' '));\n            this._codeActionOracle.value = new CodeActionOracle(this._editor, this._markerService, trigger => {\n                var _a;\n                if (!trigger) {\n                    this.setState(CodeActionsState.Empty);\n                    return;\n                }\n                const actions = createCancelablePromise(token => getCodeActions(this._registry, model, trigger.selection, trigger.trigger, Progress.None, token));\n                if (trigger.trigger.type === 1 /* CodeActionTriggerType.Invoke */) {\n                    (_a = this._progressService) === null || _a === void 0 ? void 0 : _a.showWhile(actions, 250);\n                }\n                this.setState(new CodeActionsState.Triggered(trigger.trigger, trigger.selection, trigger.position, actions));\n            }, undefined);\n            this._codeActionOracle.value.trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.Default });\n        }\n        else {\n            this._supportedCodeActions.reset();\n        }\n    }\n    trigger(trigger) {\n        var _a;\n        (_a = this._codeActionOracle.value) === null || _a === void 0 ? void 0 : _a.trigger(trigger);\n    }\n    setState(newState, skipNotify) {\n        if (newState === this._state) {\n            return;\n        }\n        // Cancel old request\n        if (this._state.type === 1 /* CodeActionsState.Type.Triggered */) {\n            this._state.cancel();\n        }\n        this._state = newState;\n        if (!skipNotify && !__classPrivateFieldGet(this, _CodeActionModel_isDisposed, \"f\")) {\n            this._onDidChangeState.fire(newState);\n        }\n    }\n}\n_CodeActionModel_isDisposed = new WeakMap();\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { codeActionCommandId, fixAllCommandId, organizeImportsCommandId, refactorCommandId, refactorPreviewCommandId, sourceActionCommandId } from './codeAction.js';\nimport { CodeActionUi } from './codeActionUi.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService } from '../../../../platform/markers/common/markers.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CodeActionModel, SUPPORTED_CODE_ACTIONS } from './codeActionModel.js';\nimport { CodeActionCommandArgs, CodeActionKind, CodeActionTriggerSource } from './types.js';\nimport { Context } from './codeActionMenu.js';\nfunction contextKeyForSupportedActions(kind) {\n    return ContextKeyExpr.regex(SUPPORTED_CODE_ACTIONS.keys()[0], new RegExp('(\\\\s|^)' + escapeRegExpCharacters(kind.value) + '\\\\b'));\n}\nfunction refactorTrigger(editor, userArgs, preview, codeActionFrom) {\n    const args = CodeActionCommandArgs.fromUser(userArgs, {\n        kind: CodeActionKind.Refactor,\n        apply: \"never\" /* CodeActionAutoApply.Never */\n    });\n    return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n        ? args.preferred\n            ? nls.localize('editor.action.refactor.noneMessage.preferred.kind', \"No preferred refactorings for '{0}' available\", userArgs.kind)\n            : nls.localize('editor.action.refactor.noneMessage.kind', \"No refactorings for '{0}' available\", userArgs.kind)\n        : args.preferred\n            ? nls.localize('editor.action.refactor.noneMessage.preferred', \"No preferred refactorings available\")\n            : nls.localize('editor.action.refactor.noneMessage', \"No refactorings available\"), {\n        include: CodeActionKind.Refactor.contains(args.kind) ? args.kind : CodeActionKind.None,\n        onlyIncludePreferredActions: args.preferred\n    }, args.apply, preview, codeActionFrom);\n}\nconst argsSchema = {\n    type: 'object',\n    defaultSnippets: [{ body: { kind: '' } }],\n    properties: {\n        'kind': {\n            type: 'string',\n            description: nls.localize('args.schema.kind', \"Kind of the code action to run.\"),\n        },\n        'apply': {\n            type: 'string',\n            description: nls.localize('args.schema.apply', \"Controls when the returned actions are applied.\"),\n            default: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n            enum: [\"first\" /* CodeActionAutoApply.First */, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, \"never\" /* CodeActionAutoApply.Never */],\n            enumDescriptions: [\n                nls.localize('args.schema.apply.first', \"Always apply the first returned code action.\"),\n                nls.localize('args.schema.apply.ifSingle', \"Apply the first returned code action if it is the only one.\"),\n                nls.localize('args.schema.apply.never', \"Do not apply the returned code actions.\"),\n            ]\n        },\n        'preferred': {\n            type: 'boolean',\n            default: false,\n            description: nls.localize('args.schema.preferred', \"Controls if only preferred code actions should be returned.\"),\n        }\n    }\n};\nlet QuickFixController = class QuickFixController extends Disposable {\n    constructor(editor, markerService, contextKeyService, progressService, _instantiationService, languageFeaturesService) {\n        super();\n        this._instantiationService = _instantiationService;\n        this._editor = editor;\n        this._model = this._register(new CodeActionModel(this._editor, languageFeaturesService.codeActionProvider, markerService, contextKeyService, progressService));\n        this._register(this._model.onDidChangeState(newState => this.update(newState)));\n        this._ui = new Lazy(() => this._register(new CodeActionUi(editor, QuickFixAction.Id, AutoFixAction.Id, {\n            applyCodeAction: (action, retrigger, preview) => __awaiter(this, void 0, void 0, function* () {\n                try {\n                    yield this._applyCodeAction(action, preview);\n                }\n                finally {\n                    if (retrigger) {\n                        this._trigger({ type: 2 /* CodeActionTriggerType.Auto */, triggerAction: CodeActionTriggerSource.QuickFix, filter: {} });\n                    }\n                }\n            })\n        }, this._instantiationService)));\n    }\n    static get(editor) {\n        return editor.getContribution(QuickFixController.ID);\n    }\n    update(newState) {\n        this._ui.getValue().update(newState);\n    }\n    hideCodeActionMenu() {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().hideCodeActionWidget();\n        }\n    }\n    navigateCodeActionList(navUp) {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().navigateList(navUp);\n        }\n    }\n    selectedOption() {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().onEnter();\n        }\n    }\n    selectedOptionWithPreview() {\n        if (this._ui.hasValue()) {\n            this._ui.getValue().onPreviewEnter();\n        }\n    }\n    showCodeActions(trigger, actions, at) {\n        return this._ui.getValue().showCodeActionList(trigger, actions, at, { includeDisabledActions: false, fromLightbulb: false });\n    }\n    manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply, preview) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        (_a = MessageController.get(this._editor)) === null || _a === void 0 ? void 0 : _a.closeMessage();\n        const triggerPosition = this._editor.getPosition();\n        this._trigger({ type: 1 /* CodeActionTriggerType.Invoke */, triggerAction, filter, autoApply, context: { notAvailableMessage, position: triggerPosition }, preview });\n    }\n    _trigger(trigger) {\n        return this._model.trigger(trigger);\n    }\n    _applyCodeAction(action, preview) {\n        return this._instantiationService.invokeFunction(applyCodeAction, action, ApplyCodeActionReason.FromCodeActions, { preview, editor: this._editor });\n    }\n};\nQuickFixController.ID = 'editor.contrib.quickFixController';\nQuickFixController = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IContextKeyService),\n    __param(3, IEditorProgressService),\n    __param(4, IInstantiationService),\n    __param(5, ILanguageFeaturesService)\n], QuickFixController);\nexport { QuickFixController };\nexport var ApplyCodeActionReason;\n(function (ApplyCodeActionReason) {\n    ApplyCodeActionReason[\"OnSave\"] = \"onSave\";\n    ApplyCodeActionReason[\"FromProblemsView\"] = \"fromProblemsView\";\n    ApplyCodeActionReason[\"FromCodeActions\"] = \"fromCodeActions\";\n})(ApplyCodeActionReason || (ApplyCodeActionReason = {}));\nexport function applyCodeAction(accessor, item, codeActionReason, options) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const bulkEditService = accessor.get(IBulkEditService);\n        const commandService = accessor.get(ICommandService);\n        const telemetryService = accessor.get(ITelemetryService);\n        const notificationService = accessor.get(INotificationService);\n        telemetryService.publicLog2('codeAction.applyCodeAction', {\n            codeActionTitle: item.action.title,\n            codeActionKind: item.action.kind,\n            codeActionIsPreferred: !!item.action.isPreferred,\n            reason: codeActionReason,\n        });\n        yield item.resolve(CancellationToken.None);\n        if (item.action.edit) {\n            yield bulkEditService.apply(ResourceEdit.convert(item.action.edit), {\n                editor: options === null || options === void 0 ? void 0 : options.editor,\n                label: item.action.title,\n                quotableLabel: item.action.title,\n                code: 'undoredo.codeAction',\n                respectAutoSaveConfig: true,\n                showPreview: options === null || options === void 0 ? void 0 : options.preview,\n            });\n        }\n        if (item.action.command) {\n            try {\n                yield commandService.executeCommand(item.action.command.id, ...(item.action.command.arguments || []));\n            }\n            catch (err) {\n                const message = asMessage(err);\n                notificationService.error(typeof message === 'string'\n                    ? message\n                    : nls.localize('applyCodeActionFailed', \"An unknown error occurred while applying the code action\"));\n            }\n        }\n    });\n}\nfunction asMessage(err) {\n    if (typeof err === 'string') {\n        return err;\n    }\n    else if (err instanceof Error && typeof err.message === 'string') {\n        return err.message;\n    }\n    else {\n        return undefined;\n    }\n}\nfunction triggerCodeActionsForEditorSelection(editor, notAvailableMessage, filter, autoApply, preview = false, triggerAction = CodeActionTriggerSource.Default) {\n    if (editor.hasModel()) {\n        const controller = QuickFixController.get(editor);\n        controller === null || controller === void 0 ? void 0 : controller.manualTriggerAtCurrentPosition(notAvailableMessage, triggerAction, filter, autoApply, preview);\n    }\n}\nexport class QuickFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: QuickFixAction.Id,\n            label: nls.localize('quickfix.trigger.label', \"Quick Fix...\"),\n            alias: 'Quick Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 84 /* KeyCode.Period */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.quickFix.noneMessage', \"No code actions available\"), undefined, undefined, false, CodeActionTriggerSource.QuickFix);\n    }\n}\nQuickFixAction.Id = 'editor.action.quickFix';\nexport class CodeActionCommand extends EditorCommand {\n    constructor() {\n        super({\n            id: codeActionCommandId,\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Trigger a code action',\n                args: [{ name: 'args', schema: argsSchema, }]\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Empty,\n            apply: \"ifSingle\" /* CodeActionAutoApply.IfSingle */,\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred.kind', \"No preferred code actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.codeAction.noneMessage.kind', \"No code actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.codeAction.noneMessage.preferred', \"No preferred code actions available\")\n                : nls.localize('editor.action.codeAction.noneMessage', \"No code actions available\"), {\n            include: args.kind,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply);\n    }\n}\nexport class RefactorAction extends EditorAction {\n    constructor() {\n        super({\n            id: refactorCommandId,\n            label: nls.localize('refactor.label', \"Refactor...\"),\n            alias: 'Refactor...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */,\n                mac: {\n                    primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 48 /* KeyCode.KeyR */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Refactor)),\n            },\n            description: {\n                description: 'Refactor...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        return refactorTrigger(editor, userArgs, false, CodeActionTriggerSource.Refactor);\n    }\n}\nexport class RefactorPreview extends EditorAction {\n    constructor() {\n        super({\n            id: refactorPreviewCommandId,\n            label: nls.localize('refactor.preview.label', \"Refactor with Preview...\"),\n            alias: 'Refactor Preview...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            description: {\n                description: 'Refactor Preview...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        return refactorTrigger(editor, userArgs, true, CodeActionTriggerSource.RefactorPreview);\n    }\n}\nexport class SourceAction extends EditorAction {\n    constructor() {\n        super({\n            id: sourceActionCommandId,\n            label: nls.localize('source.label', \"Source Action...\"),\n            alias: 'Source Action...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCodeActionsProvider),\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 2.1,\n                when: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.Source)),\n            },\n            description: {\n                description: 'Source Action...',\n                args: [{ name: 'args', schema: argsSchema }]\n            }\n        });\n    }\n    run(_accessor, editor, userArgs) {\n        const args = CodeActionCommandArgs.fromUser(userArgs, {\n            kind: CodeActionKind.Source,\n            apply: \"never\" /* CodeActionAutoApply.Never */\n        });\n        return triggerCodeActionsForEditorSelection(editor, typeof (userArgs === null || userArgs === void 0 ? void 0 : userArgs.kind) === 'string'\n            ? args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred.kind', \"No preferred source actions for '{0}' available\", userArgs.kind)\n                : nls.localize('editor.action.source.noneMessage.kind', \"No source actions for '{0}' available\", userArgs.kind)\n            : args.preferred\n                ? nls.localize('editor.action.source.noneMessage.preferred', \"No preferred source actions available\")\n                : nls.localize('editor.action.source.noneMessage', \"No source actions available\"), {\n            include: CodeActionKind.Source.contains(args.kind) ? args.kind : CodeActionKind.None,\n            includeSourceActions: true,\n            onlyIncludePreferredActions: args.preferred,\n        }, args.apply, undefined, CodeActionTriggerSource.SourceAction);\n    }\n}\nexport class OrganizeImportsAction extends EditorAction {\n    constructor() {\n        super({\n            id: organizeImportsCommandId,\n            label: nls.localize('organizeImports.label', \"Organize Imports\"),\n            alias: 'Organize Imports',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceOrganizeImports)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.organize.noneMessage', \"No organize imports action available\"), { include: CodeActionKind.SourceOrganizeImports, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.OrganizeImports);\n    }\n}\nexport class FixAllAction extends EditorAction {\n    constructor() {\n        super({\n            id: fixAllCommandId,\n            label: nls.localize('fixAll.label', \"Fix All\"),\n            alias: 'Fix All',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.SourceFixAll))\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('fixAll.noneMessage', \"No fix all action available\"), { include: CodeActionKind.SourceFixAll, includeSourceActions: true }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.FixAll);\n    }\n}\nexport class AutoFixAction extends EditorAction {\n    constructor() {\n        super({\n            id: AutoFixAction.Id,\n            label: nls.localize('autoFix.label', \"Auto Fix...\"),\n            alias: 'Auto Fix...',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, contextKeyForSupportedActions(CodeActionKind.QuickFix)),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 512 /* KeyMod.Alt */ | 1024 /* KeyMod.Shift */ | 84 /* KeyCode.Period */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 84 /* KeyCode.Period */\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor) {\n        return triggerCodeActionsForEditorSelection(editor, nls.localize('editor.action.autoFix.noneMessage', \"No auto fixes available\"), {\n            include: CodeActionKind.QuickFix,\n            onlyIncludePreferredActions: true\n        }, \"ifSingle\" /* CodeActionAutoApply.IfSingle */, undefined, CodeActionTriggerSource.AutoFix);\n    }\n}\nAutoFixAction.Id = 'editor.action.autoFix';\nconst CodeActionContribution = EditorCommand.bindToContribution(QuickFixController.get);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nregisterEditorCommand(new CodeActionContribution({\n    id: 'hideCodeActionMenuWidget',\n    precondition: Context.Visible,\n    handler(x) {\n        x.hideCodeActionMenu();\n    },\n    kbOpts: {\n        weight: weight,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'focusPreviousCodeAction',\n    precondition: Context.Visible,\n    handler(x) {\n        x.navigateCodeActionList(true);\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'focusNextCodeAction',\n    precondition: Context.Visible,\n    handler(x) {\n        x.navigateCodeActionList(false);\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'onEnterSelectCodeAction',\n    precondition: Context.Visible,\n    handler(x) {\n        x.selectedOption();\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 3 /* KeyCode.Enter */,\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\n    }\n}));\nregisterEditorCommand(new CodeActionContribution({\n    id: 'onEnterSelectCodeActionWithPreview',\n    precondition: Context.Visible,\n    handler(x) {\n        x.selectedOptionWithPreview();\n    },\n    kbOpts: {\n        weight: weight + 100000,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.experimental.useCustomCodeActionMenu': {\n            type: 'boolean',\n            tags: ['experimental'],\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('codeActionWidget', \"Enabling this adjusts how the code action menu is rendered.\"),\n            default: false,\n        },\n    } }));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { AutoFixAction, CodeActionCommand, FixAllAction, OrganizeImportsAction, QuickFixAction, QuickFixController, RefactorAction, RefactorPreview, SourceAction } from './codeActionCommands.js';\nimport './codeActionWidgetContribution.js';\nregisterEditorContribution(QuickFixController.ID, QuickFixController);\nregisterEditorAction(QuickFixAction);\nregisterEditorAction(RefactorAction);\nregisterEditorAction(RefactorPreview);\nregisterEditorAction(SourceAction);\nregisterEditorAction(OrganizeImportsAction);\nregisterEditorAction(AutoFixAction);\nregisterEditorAction(FixAllAction);\nregisterEditorCommand(new CodeActionCommand());\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class CodeActionKind {\n    constructor(value) {\n        this.value = value;\n    }\n    equals(other) {\n        return this.value === other.value;\n    }\n    contains(other) {\n        return this.equals(other) || this.value === '' || other.value.startsWith(this.value + CodeActionKind.sep);\n    }\n    intersects(other) {\n        return this.contains(other) || other.contains(this);\n    }\n    append(part) {\n        return new CodeActionKind(this.value + CodeActionKind.sep + part);\n    }\n}\nCodeActionKind.sep = '.';\nCodeActionKind.None = new CodeActionKind('@@none@@'); // Special code action that contains nothing\nCodeActionKind.Empty = new CodeActionKind('');\nCodeActionKind.QuickFix = new CodeActionKind('quickfix');\nCodeActionKind.Refactor = new CodeActionKind('refactor');\nCodeActionKind.Source = new CodeActionKind('source');\nCodeActionKind.SourceOrganizeImports = CodeActionKind.Source.append('organizeImports');\nCodeActionKind.SourceFixAll = CodeActionKind.Source.append('fixAll');\nexport var CodeActionTriggerSource;\n(function (CodeActionTriggerSource) {\n    CodeActionTriggerSource[\"Refactor\"] = \"refactor\";\n    CodeActionTriggerSource[\"RefactorPreview\"] = \"refactor preview\";\n    CodeActionTriggerSource[\"Lightbulb\"] = \"lightbulb\";\n    CodeActionTriggerSource[\"Default\"] = \"other (default)\";\n    CodeActionTriggerSource[\"SourceAction\"] = \"source action\";\n    CodeActionTriggerSource[\"QuickFix\"] = \"quick fix action\";\n    CodeActionTriggerSource[\"FixAll\"] = \"fix all\";\n    CodeActionTriggerSource[\"OrganizeImports\"] = \"organize imports\";\n    CodeActionTriggerSource[\"AutoFix\"] = \"auto fix\";\n    CodeActionTriggerSource[\"QuickFixHover\"] = \"quick fix hover window\";\n    CodeActionTriggerSource[\"OnSave\"] = \"save participants\";\n    CodeActionTriggerSource[\"ProblemsView\"] = \"problems view\";\n})(CodeActionTriggerSource || (CodeActionTriggerSource = {}));\nexport function mayIncludeActionsOfKind(filter, providedKind) {\n    // A provided kind may be a subset or superset of our filtered kind.\n    if (filter.include && !filter.include.intersects(providedKind)) {\n        return false;\n    }\n    if (filter.excludes) {\n        if (filter.excludes.some(exclude => excludesAction(providedKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions && CodeActionKind.Source.contains(providedKind)) {\n        return false;\n    }\n    return true;\n}\nexport function filtersAction(filter, action) {\n    const actionKind = action.kind ? new CodeActionKind(action.kind) : undefined;\n    // Filter out actions by kind\n    if (filter.include) {\n        if (!actionKind || !filter.include.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.excludes) {\n        if (actionKind && filter.excludes.some(exclude => excludesAction(actionKind, exclude, filter.include))) {\n            return false;\n        }\n    }\n    // Don't return source actions unless they are explicitly requested\n    if (!filter.includeSourceActions) {\n        if (actionKind && CodeActionKind.Source.contains(actionKind)) {\n            return false;\n        }\n    }\n    if (filter.onlyIncludePreferredActions) {\n        if (!action.isPreferred) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction excludesAction(providedKind, exclude, include) {\n    if (!exclude.contains(providedKind)) {\n        return false;\n    }\n    if (include && exclude.contains(include)) {\n        // The include is more specific, don't filter out\n        return false;\n    }\n    return true;\n}\nexport class CodeActionCommandArgs {\n    constructor(kind, apply, preferred) {\n        this.kind = kind;\n        this.apply = apply;\n        this.preferred = preferred;\n    }\n    static fromUser(arg, defaults) {\n        if (!arg || typeof arg !== 'object') {\n            return new CodeActionCommandArgs(defaults.kind, defaults.apply, false);\n        }\n        return new CodeActionCommandArgs(CodeActionCommandArgs.getKindFromUser(arg, defaults.kind), CodeActionCommandArgs.getApplyFromUser(arg, defaults.apply), CodeActionCommandArgs.getPreferredUser(arg));\n    }\n    static getApplyFromUser(arg, defaultAutoApply) {\n        switch (typeof arg.apply === 'string' ? arg.apply.toLowerCase() : '') {\n            case 'first': return \"first\" /* CodeActionAutoApply.First */;\n            case 'never': return \"never\" /* CodeActionAutoApply.Never */;\n            case 'ifsingle': return \"ifSingle\" /* CodeActionAutoApply.IfSingle */;\n            default: return defaultAutoApply;\n        }\n    }\n    static getKindFromUser(arg, defaultKind) {\n        return typeof arg.kind === 'string'\n            ? new CodeActionKind(arg.kind)\n            : defaultKind;\n    }\n    static getPreferredUser(arg) {\n        return typeof arg.preferred === 'boolean'\n            ? arg.preferred\n            : false;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class CodeLensModel {\n    constructor() {\n        this.lenses = [];\n        this._disposables = new DisposableStore();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    get isDisposed() {\n        return this._disposables.isDisposed;\n    }\n    add(list, provider) {\n        this._disposables.add(list);\n        for (const symbol of list.lenses) {\n            this.lenses.push({ symbol, provider });\n        }\n    }\n}\nexport function getCodeLensModel(registry, model, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        const providerRanks = new Map();\n        const result = new CodeLensModel();\n        const promises = provider.map((provider, i) => __awaiter(this, void 0, void 0, function* () {\n            providerRanks.set(provider, i);\n            try {\n                const list = yield Promise.resolve(provider.provideCodeLenses(model, token));\n                if (list) {\n                    result.add(list, provider);\n                }\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n            }\n        }));\n        yield Promise.all(promises);\n        result.lenses = result.lenses.sort((a, b) => {\n            // sort by lineNumber, provider-rank, and column\n            if (a.symbol.range.startLineNumber < b.symbol.range.startLineNumber) {\n                return -1;\n            }\n            else if (a.symbol.range.startLineNumber > b.symbol.range.startLineNumber) {\n                return 1;\n            }\n            else if ((providerRanks.get(a.provider)) < (providerRanks.get(b.provider))) {\n                return -1;\n            }\n            else if ((providerRanks.get(a.provider)) > (providerRanks.get(b.provider))) {\n                return 1;\n            }\n            else if (a.symbol.range.startColumn < b.symbol.range.startColumn) {\n                return -1;\n            }\n            else if (a.symbol.range.startColumn > b.symbol.range.startColumn) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        });\n        return result;\n    });\n}\nCommandsRegistry.registerCommand('_executeCodeLensProvider', function (accessor, ...args) {\n    let [uri, itemResolveCount] = args;\n    assertType(URI.isUri(uri));\n    assertType(typeof itemResolveCount === 'number' || !itemResolveCount);\n    const { codeLensProvider } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const result = [];\n    const disposables = new DisposableStore();\n    return getCodeLensModel(codeLensProvider, model, CancellationToken.None).then(value => {\n        disposables.add(value);\n        const resolve = [];\n        for (const item of value.lenses) {\n            if (itemResolveCount === undefined || itemResolveCount === null || Boolean(item.symbol.command)) {\n                result.push(item.symbol);\n            }\n            else if (itemResolveCount-- > 0 && item.provider.resolveCodeLens) {\n                resolve.push(Promise.resolve(item.provider.resolveCodeLens(model, item.symbol, CancellationToken.None)).then(symbol => result.push(symbol || item.symbol)));\n            }\n        }\n        return Promise.all(resolve);\n    }).then(() => {\n        return result;\n    }).finally(() => {\n        // make sure to return results, then (on next tick)\n        // dispose the results\n        setTimeout(() => disposables.dispose(), 100);\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { runWhenIdle } from '../../../../base/common/async.js';\nimport { once } from '../../../../base/common/functional.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CodeLensModel } from './codelens.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport const ICodeLensCache = createDecorator('ICodeLensCache');\nclass CacheItem {\n    constructor(lineCount, data) {\n        this.lineCount = lineCount;\n        this.data = data;\n    }\n}\nlet CodeLensCache = class CodeLensCache {\n    constructor(storageService) {\n        this._fakeProvider = new class {\n            provideCodeLenses() {\n                throw new Error('not supported');\n            }\n        };\n        this._cache = new LRUCache(20, 0.75);\n        // remove old data\n        const oldkey = 'codelens/cache';\n        runWhenIdle(() => storageService.remove(oldkey, 1 /* StorageScope.WORKSPACE */));\n        // restore lens data on start\n        const key = 'codelens/cache2';\n        const raw = storageService.get(key, 1 /* StorageScope.WORKSPACE */, '{}');\n        this._deserialize(raw);\n        // store lens data on shutdown\n        once(storageService.onWillSaveState)(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                storageService.store(key, this._serialize(), 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n            }\n        });\n    }\n    put(model, data) {\n        // create a copy of the model that is without command-ids\n        // but with comand-labels\n        const copyItems = data.lenses.map(item => {\n            var _a;\n            return {\n                range: item.symbol.range,\n                command: item.symbol.command && { id: '', title: (_a = item.symbol.command) === null || _a === void 0 ? void 0 : _a.title },\n            };\n        });\n        const copyModel = new CodeLensModel();\n        copyModel.add({ lenses: copyItems, dispose: () => { } }, this._fakeProvider);\n        const item = new CacheItem(model.getLineCount(), copyModel);\n        this._cache.set(model.uri.toString(), item);\n    }\n    get(model) {\n        const item = this._cache.get(model.uri.toString());\n        return item && item.lineCount === model.getLineCount() ? item.data : undefined;\n    }\n    delete(model) {\n        this._cache.delete(model.uri.toString());\n    }\n    // --- persistence\n    _serialize() {\n        const data = Object.create(null);\n        for (const [key, value] of this._cache) {\n            const lines = new Set();\n            for (const d of value.data.lenses) {\n                lines.add(d.symbol.range.startLineNumber);\n            }\n            data[key] = {\n                lineCount: value.lineCount,\n                lines: [...lines.values()]\n            };\n        }\n        return JSON.stringify(data);\n    }\n    _deserialize(raw) {\n        try {\n            const data = JSON.parse(raw);\n            for (const key in data) {\n                const element = data[key];\n                const lenses = [];\n                for (const line of element.lines) {\n                    lenses.push({ range: new Range(line, 1, line, 11) });\n                }\n                const model = new CodeLensModel();\n                model.add({ lenses, dispose() { } }, this._fakeProvider);\n                this._cache.set(key, new CacheItem(element.lineCount, model));\n            }\n        }\n        catch (_a) {\n            // ignore...\n        }\n    }\n};\nCodeLensCache = __decorate([\n    __param(0, IStorageService)\n], CodeLensCache);\nexport { CodeLensCache };\nregisterSingleton(ICodeLensCache, CodeLensCache);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport './codelensWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nclass CodeLensViewZone {\n    constructor(afterLineNumber, heightInPx, onHeight) {\n        /**\n         * We want that this view zone, which reserves space for a code lens appears\n         * as close as possible to the next line, so we use a very large value here.\n         */\n        this.afterColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = heightInPx;\n        this._onHeight = onHeight;\n        this.suppressMouseDown = true;\n        this.domNode = document.createElement('div');\n    }\n    onComputedHeight(height) {\n        if (this._lastHeight === undefined) {\n            this._lastHeight = height;\n        }\n        else if (this._lastHeight !== height) {\n            this._lastHeight = height;\n            this._onHeight();\n        }\n    }\n    isVisible() {\n        return this._lastHeight !== 0\n            && this.domNode.hasAttribute('monaco-visible-view-zone');\n    }\n}\nclass CodeLensContentWidget {\n    constructor(editor, className, line) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = false;\n        this.suppressMouseDown = true;\n        this._commands = new Map();\n        this._isEmpty = true;\n        this._editor = editor;\n        this._id = `codelens.widget-${(CodeLensContentWidget._idPool++)}`;\n        this.updatePosition(line);\n        this._domNode = document.createElement('span');\n        this._domNode.className = `codelens-decoration ${className}`;\n    }\n    withCommands(lenses, animate) {\n        this._commands.clear();\n        const children = [];\n        let hasSymbol = false;\n        for (let i = 0; i < lenses.length; i++) {\n            const lens = lenses[i];\n            if (!lens) {\n                continue;\n            }\n            hasSymbol = true;\n            if (lens.command) {\n                const title = renderLabelWithIcons(lens.command.title.trim());\n                if (lens.command.id) {\n                    children.push(dom.$('a', { id: String(i), title: lens.command.tooltip, role: 'button' }, ...title));\n                    this._commands.set(String(i), lens.command);\n                }\n                else {\n                    children.push(dom.$('span', { title: lens.command.tooltip }, ...title));\n                }\n                if (i + 1 < lenses.length) {\n                    children.push(dom.$('span', undefined, '\\u00a0|\\u00a0'));\n                }\n            }\n        }\n        if (!hasSymbol) {\n            // symbols but no commands\n            dom.reset(this._domNode, dom.$('span', undefined, 'no commands'));\n        }\n        else {\n            // symbols and commands\n            dom.reset(this._domNode, ...children);\n            if (this._isEmpty && animate) {\n                this._domNode.classList.add('fadein');\n            }\n            this._isEmpty = false;\n        }\n    }\n    getCommand(link) {\n        return link.parentElement === this._domNode\n            ? this._commands.get(link.id)\n            : undefined;\n    }\n    getId() {\n        return this._id;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    updatePosition(line) {\n        const column = this._editor.getModel().getLineFirstNonWhitespaceColumn(line);\n        this._widgetPosition = {\n            position: { lineNumber: line, column: column },\n            preference: [1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    getPosition() {\n        return this._widgetPosition || null;\n    }\n}\nCodeLensContentWidget._idPool = 0;\nexport class CodeLensHelper {\n    constructor() {\n        this._removeDecorations = [];\n        this._addDecorations = [];\n        this._addDecorationsCallbacks = [];\n    }\n    addDecoration(decoration, callback) {\n        this._addDecorations.push(decoration);\n        this._addDecorationsCallbacks.push(callback);\n    }\n    removeDecoration(decorationId) {\n        this._removeDecorations.push(decorationId);\n    }\n    commit(changeAccessor) {\n        const resultingDecorations = changeAccessor.deltaDecorations(this._removeDecorations, this._addDecorations);\n        for (let i = 0, len = resultingDecorations.length; i < len; i++) {\n            this._addDecorationsCallbacks[i](resultingDecorations[i]);\n        }\n    }\n}\nexport class CodeLensWidget {\n    constructor(data, editor, className, helper, viewZoneChangeAccessor, heightInPx, updateCallback) {\n        this._isDisposed = false;\n        this._editor = editor;\n        this._className = className;\n        this._data = data;\n        // create combined range, track all ranges with decorations,\n        // check if there is already something to render\n        this._decorationIds = [];\n        let range;\n        const lenses = [];\n        this._data.forEach((codeLensData, i) => {\n            if (codeLensData.symbol.command) {\n                lenses.push(codeLensData.symbol);\n            }\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: ModelDecorationOptions.EMPTY\n            }, id => this._decorationIds[i] = id);\n            // the range contains all lenses on this line\n            if (!range) {\n                range = Range.lift(codeLensData.symbol.range);\n            }\n            else {\n                range = Range.plusRange(range, codeLensData.symbol.range);\n            }\n        });\n        this._viewZone = new CodeLensViewZone(range.startLineNumber - 1, heightInPx, updateCallback);\n        this._viewZoneId = viewZoneChangeAccessor.addZone(this._viewZone);\n        if (lenses.length > 0) {\n            this._createContentWidgetIfNecessary();\n            this._contentWidget.withCommands(lenses, false);\n        }\n    }\n    _createContentWidgetIfNecessary() {\n        if (!this._contentWidget) {\n            this._contentWidget = new CodeLensContentWidget(this._editor, this._className, this._viewZone.afterLineNumber + 1);\n            this._editor.addContentWidget(this._contentWidget);\n        }\n        else {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    dispose(helper, viewZoneChangeAccessor) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        viewZoneChangeAccessor === null || viewZoneChangeAccessor === void 0 ? void 0 : viewZoneChangeAccessor.removeZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.removeContentWidget(this._contentWidget);\n            this._contentWidget = undefined;\n        }\n        this._isDisposed = true;\n    }\n    isDisposed() {\n        return this._isDisposed;\n    }\n    isValid() {\n        return this._decorationIds.some((id, i) => {\n            const range = this._editor.getModel().getDecorationRange(id);\n            const symbol = this._data[i].symbol;\n            return !!(range && Range.isEmpty(symbol.range) === range.isEmpty());\n        });\n    }\n    updateCodeLensSymbols(data, helper) {\n        this._decorationIds.forEach(helper.removeDecoration, helper);\n        this._decorationIds = [];\n        this._data = data;\n        this._data.forEach((codeLensData, i) => {\n            helper.addDecoration({\n                range: codeLensData.symbol.range,\n                options: ModelDecorationOptions.EMPTY\n            }, id => this._decorationIds[i] = id);\n        });\n    }\n    updateHeight(height, viewZoneChangeAccessor) {\n        this._viewZone.heightInPx = height;\n        viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n        if (this._contentWidget) {\n            this._editor.layoutContentWidget(this._contentWidget);\n        }\n    }\n    computeIfNecessary(model) {\n        if (!this._viewZone.isVisible()) {\n            return null;\n        }\n        // Read editor current state\n        for (let i = 0; i < this._decorationIds.length; i++) {\n            const range = model.getDecorationRange(this._decorationIds[i]);\n            if (range) {\n                this._data[i].symbol.range = range;\n            }\n        }\n        return this._data;\n    }\n    updateCommands(symbols) {\n        this._createContentWidgetIfNecessary();\n        this._contentWidget.withCommands(symbols, true);\n        for (let i = 0; i < this._data.length; i++) {\n            const resolved = symbols[i];\n            if (resolved) {\n                const { symbol } = this._data[i];\n                symbol.command = resolved.command || symbol.command;\n            }\n        }\n    }\n    getCommand(link) {\n        var _a;\n        return (_a = this._contentWidget) === null || _a === void 0 ? void 0 : _a.getCommand(link);\n    }\n    getLineNumber() {\n        const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n        if (range) {\n            return range.startLineNumber;\n        }\n        return -1;\n    }\n    update(viewZoneChangeAccessor) {\n        if (this.isValid()) {\n            const range = this._editor.getModel().getDecorationRange(this._decorationIds[0]);\n            if (range) {\n                this._viewZone.afterLineNumber = range.startLineNumber - 1;\n                viewZoneChangeAccessor.layoutZone(this._viewZoneId);\n                if (this._contentWidget) {\n                    this._contentWidget.updatePosition(range.startLineNumber);\n                    this._editor.layoutContentWidget(this._contentWidget);\n                }\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createCancelablePromise, disposableTimeout, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { hash } from '../../../../base/common/hash.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { getCodeLensModel } from './codelens.js';\nimport { ICodeLensCache } from './codeLensCache.js';\nimport { CodeLensHelper, CodeLensWidget } from './codelensWidget.js';\nimport { localize } from '../../../../nls.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet CodeLensContribution = class CodeLensContribution {\n    constructor(_editor, _languageFeaturesService, debounceService, _commandService, _notificationService, _codeLensCache) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._commandService = _commandService;\n        this._notificationService = _notificationService;\n        this._codeLensCache = _codeLensCache;\n        this._disposables = new DisposableStore();\n        this._localToDispose = new DisposableStore();\n        this._lenses = [];\n        this._oldCodeLensModels = new DisposableStore();\n        this._provideCodeLensDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensProvide', { min: 250 });\n        this._resolveCodeLensesDebounce = debounceService.for(_languageFeaturesService.codeLensProvider, 'CodeLensResolve', { min: 250, salt: 'resolve' });\n        this._resolveCodeLensesScheduler = new RunOnceScheduler(() => this._resolveCodeLensesInViewport(), this._resolveCodeLensesDebounce.default());\n        this._disposables.add(this._editor.onDidChangeModel(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => this._onModelChange()));\n        this._disposables.add(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */) || e.hasChanged(16 /* EditorOption.codeLensFontSize */) || e.hasChanged(15 /* EditorOption.codeLensFontFamily */)) {\n                this._updateLensStyle();\n            }\n            if (e.hasChanged(14 /* EditorOption.codeLens */)) {\n                this._onModelChange();\n            }\n        }));\n        this._disposables.add(_languageFeaturesService.codeLensProvider.onDidChange(this._onModelChange, this));\n        this._onModelChange();\n        this._styleClassName = '_' + hash(this._editor.getId()).toString(16);\n        this._styleElement = dom.createStyleSheet(dom.isInShadowDOM(this._editor.getContainerDomNode())\n            ? this._editor.getContainerDomNode()\n            : undefined);\n        this._updateLensStyle();\n    }\n    dispose() {\n        var _a;\n        this._localDispose();\n        this._disposables.dispose();\n        this._oldCodeLensModels.dispose();\n        (_a = this._currentCodeLensModel) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._styleElement.remove();\n    }\n    _getLayoutInfo() {\n        const lineHeightFactor = Math.max(1.3, this._editor.getOption(61 /* EditorOption.lineHeight */) / this._editor.getOption(48 /* EditorOption.fontSize */));\n        let fontSize = this._editor.getOption(16 /* EditorOption.codeLensFontSize */);\n        if (!fontSize || fontSize < 5) {\n            fontSize = (this._editor.getOption(48 /* EditorOption.fontSize */) * .9) | 0;\n        }\n        return {\n            fontSize,\n            codeLensHeight: (fontSize * lineHeightFactor) | 0,\n        };\n    }\n    _updateLensStyle() {\n        const { codeLensHeight, fontSize } = this._getLayoutInfo();\n        const fontFamily = this._editor.getOption(15 /* EditorOption.codeLensFontFamily */);\n        const editorFontInfo = this._editor.getOption(46 /* EditorOption.fontInfo */);\n        const fontFamilyVar = `--codelens-font-family${this._styleClassName}`;\n        const fontFeaturesVar = `--codelens-font-features${this._styleClassName}`;\n        let newStyle = `\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; padding-right: ${Math.round(fontSize * 0.5)}px; font-feature-settings: var(${fontFeaturesVar}) }\n\t\t.monaco-editor .codelens-decoration.${this._styleClassName} span.codicon { line-height: ${codeLensHeight}px; font-size: ${fontSize}px; }\n\t\t`;\n        if (fontFamily) {\n            newStyle += `.monaco-editor .codelens-decoration.${this._styleClassName} { font-family: var(${fontFamilyVar}), ${EDITOR_FONT_DEFAULTS.fontFamily}}`;\n        }\n        this._styleElement.textContent = newStyle;\n        this._editor.getContainerDomNode().style.setProperty(fontFamilyVar, fontFamily !== null && fontFamily !== void 0 ? fontFamily : 'inherit');\n        this._editor.getContainerDomNode().style.setProperty(fontFeaturesVar, editorFontInfo.fontFeatureSettings);\n        //\n        this._editor.changeViewZones(accessor => {\n            for (const lens of this._lenses) {\n                lens.updateHeight(codeLensHeight, accessor);\n            }\n        });\n    }\n    _localDispose() {\n        var _a, _b, _c;\n        (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._getCodeLensModelPromise = undefined;\n        (_b = this._resolveCodeLensesPromise) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        this._localToDispose.clear();\n        this._oldCodeLensModels.clear();\n        (_c = this._currentCodeLensModel) === null || _c === void 0 ? void 0 : _c.dispose();\n    }\n    _onModelChange() {\n        this._localDispose();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        if (!this._editor.getOption(14 /* EditorOption.codeLens */)) {\n            return;\n        }\n        const cachedLenses = this._codeLensCache.get(model);\n        if (cachedLenses) {\n            this._renderCodeLensSymbols(cachedLenses);\n        }\n        if (!this._languageFeaturesService.codeLensProvider.has(model)) {\n            // no provider -> return but check with\n            // cached lenses. they expire after 30 seconds\n            if (cachedLenses) {\n                this._localToDispose.add(disposableTimeout(() => {\n                    const cachedLensesNow = this._codeLensCache.get(model);\n                    if (cachedLenses === cachedLensesNow) {\n                        this._codeLensCache.delete(model);\n                        this._onModelChange();\n                    }\n                }, 30 * 1000));\n            }\n            return;\n        }\n        for (const provider of this._languageFeaturesService.codeLensProvider.all(model)) {\n            if (typeof provider.onDidChange === 'function') {\n                const registration = provider.onDidChange(() => scheduler.schedule());\n                this._localToDispose.add(registration);\n            }\n        }\n        const scheduler = new RunOnceScheduler(() => {\n            var _a;\n            const t1 = Date.now();\n            (_a = this._getCodeLensModelPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._getCodeLensModelPromise = createCancelablePromise(token => getCodeLensModel(this._languageFeaturesService.codeLensProvider, model, token));\n            this._getCodeLensModelPromise.then(result => {\n                if (this._currentCodeLensModel) {\n                    this._oldCodeLensModels.add(this._currentCodeLensModel);\n                }\n                this._currentCodeLensModel = result;\n                // cache model to reduce flicker\n                this._codeLensCache.put(model, result);\n                // update moving average\n                const newDelay = this._provideCodeLensDebounce.update(model, Date.now() - t1);\n                scheduler.delay = newDelay;\n                // render lenses\n                this._renderCodeLensSymbols(result);\n                // dom.scheduleAtNextAnimationFrame(() => this._resolveCodeLensesInViewport());\n                this._resolveCodeLensesInViewportSoon();\n            }, onUnexpectedError);\n        }, this._provideCodeLensDebounce.get(model));\n        this._localToDispose.add(scheduler);\n        this._localToDispose.add(toDisposable(() => this._resolveCodeLensesScheduler.cancel()));\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            this._editor.changeDecorations(decorationsAccessor => {\n                this._editor.changeViewZones(viewZonesAccessor => {\n                    const toDispose = [];\n                    let lastLensLineNumber = -1;\n                    this._lenses.forEach((lens) => {\n                        if (!lens.isValid() || lastLensLineNumber === lens.getLineNumber()) {\n                            // invalid -> lens collapsed, attach range doesn't exist anymore\n                            // line_number -> lenses should never be on the same line\n                            toDispose.push(lens);\n                        }\n                        else {\n                            lens.update(viewZonesAccessor);\n                            lastLensLineNumber = lens.getLineNumber();\n                        }\n                    });\n                    const helper = new CodeLensHelper();\n                    toDispose.forEach((l) => {\n                        l.dispose(helper, viewZonesAccessor);\n                        this._lenses.splice(this._lenses.indexOf(l), 1);\n                    });\n                    helper.commit(decorationsAccessor);\n                });\n            });\n            // Ask for all references again\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidFocusEditorWidget(() => {\n            scheduler.schedule();\n        }));\n        this._localToDispose.add(this._editor.onDidScrollChange(e => {\n            if (e.scrollTopChanged && this._lenses.length > 0) {\n                this._resolveCodeLensesInViewportSoon();\n            }\n        }));\n        this._localToDispose.add(this._editor.onDidLayoutChange(() => {\n            this._resolveCodeLensesInViewportSoon();\n        }));\n        this._localToDispose.add(toDisposable(() => {\n            if (this._editor.getModel()) {\n                const scrollState = StableEditorScrollState.capture(this._editor);\n                this._editor.changeDecorations(decorationsAccessor => {\n                    this._editor.changeViewZones(viewZonesAccessor => {\n                        this._disposeAllLenses(decorationsAccessor, viewZonesAccessor);\n                    });\n                });\n                scrollState.restore(this._editor);\n            }\n            else {\n                // No accessors available\n                this._disposeAllLenses(undefined, undefined);\n            }\n        }));\n        this._localToDispose.add(this._editor.onMouseDown(e => {\n            if (e.target.type !== 9 /* MouseTargetType.CONTENT_WIDGET */) {\n                return;\n            }\n            let target = e.target.element;\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'SPAN') {\n                target = target.parentElement;\n            }\n            if ((target === null || target === void 0 ? void 0 : target.tagName) === 'A') {\n                for (const lens of this._lenses) {\n                    const command = lens.getCommand(target);\n                    if (command) {\n                        this._commandService.executeCommand(command.id, ...(command.arguments || [])).catch(err => this._notificationService.error(err));\n                        break;\n                    }\n                }\n            }\n        }));\n        scheduler.schedule();\n    }\n    _disposeAllLenses(decChangeAccessor, viewZoneChangeAccessor) {\n        const helper = new CodeLensHelper();\n        for (const lens of this._lenses) {\n            lens.dispose(helper, viewZoneChangeAccessor);\n        }\n        if (decChangeAccessor) {\n            helper.commit(decChangeAccessor);\n        }\n        this._lenses.length = 0;\n    }\n    _renderCodeLensSymbols(symbols) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const maxLineNumber = this._editor.getModel().getLineCount();\n        const groups = [];\n        let lastGroup;\n        for (const symbol of symbols.lenses) {\n            const line = symbol.symbol.range.startLineNumber;\n            if (line < 1 || line > maxLineNumber) {\n                // invalid code lens\n                continue;\n            }\n            else if (lastGroup && lastGroup[lastGroup.length - 1].symbol.range.startLineNumber === line) {\n                // on same line as previous\n                lastGroup.push(symbol);\n            }\n            else {\n                // on later line as previous\n                lastGroup = [symbol];\n                groups.push(lastGroup);\n            }\n        }\n        const scrollState = StableEditorScrollState.capture(this._editor);\n        const layoutInfo = this._getLayoutInfo();\n        this._editor.changeDecorations(decorationsAccessor => {\n            this._editor.changeViewZones(viewZoneAccessor => {\n                const helper = new CodeLensHelper();\n                let codeLensIndex = 0;\n                let groupsIndex = 0;\n                while (groupsIndex < groups.length && codeLensIndex < this._lenses.length) {\n                    const symbolsLineNumber = groups[groupsIndex][0].symbol.range.startLineNumber;\n                    const codeLensLineNumber = this._lenses[codeLensIndex].getLineNumber();\n                    if (codeLensLineNumber < symbolsLineNumber) {\n                        this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                        this._lenses.splice(codeLensIndex, 1);\n                    }\n                    else if (codeLensLineNumber === symbolsLineNumber) {\n                        this._lenses[codeLensIndex].updateCodeLensSymbols(groups[groupsIndex], helper);\n                        groupsIndex++;\n                        codeLensIndex++;\n                    }\n                    else {\n                        this._lenses.splice(codeLensIndex, 0, new CodeLensWidget(groups[groupsIndex], this._editor, this._styleClassName, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                        codeLensIndex++;\n                        groupsIndex++;\n                    }\n                }\n                // Delete extra code lenses\n                while (codeLensIndex < this._lenses.length) {\n                    this._lenses[codeLensIndex].dispose(helper, viewZoneAccessor);\n                    this._lenses.splice(codeLensIndex, 1);\n                }\n                // Create extra symbols\n                while (groupsIndex < groups.length) {\n                    this._lenses.push(new CodeLensWidget(groups[groupsIndex], this._editor, this._styleClassName, helper, viewZoneAccessor, layoutInfo.codeLensHeight, () => this._resolveCodeLensesInViewportSoon()));\n                    groupsIndex++;\n                }\n                helper.commit(decorationsAccessor);\n            });\n        });\n        scrollState.restore(this._editor);\n    }\n    _resolveCodeLensesInViewportSoon() {\n        const model = this._editor.getModel();\n        if (model) {\n            this._resolveCodeLensesScheduler.schedule();\n        }\n    }\n    _resolveCodeLensesInViewport() {\n        var _a;\n        (_a = this._resolveCodeLensesPromise) === null || _a === void 0 ? void 0 : _a.cancel();\n        this._resolveCodeLensesPromise = undefined;\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        const toResolve = [];\n        const lenses = [];\n        this._lenses.forEach((lens) => {\n            const request = lens.computeIfNecessary(model);\n            if (request) {\n                toResolve.push(request);\n                lenses.push(lens);\n            }\n        });\n        if (toResolve.length === 0) {\n            return;\n        }\n        const t1 = Date.now();\n        const resolvePromise = createCancelablePromise(token => {\n            const promises = toResolve.map((request, i) => {\n                const resolvedSymbols = new Array(request.length);\n                const promises = request.map((request, i) => {\n                    if (!request.symbol.command && typeof request.provider.resolveCodeLens === 'function') {\n                        return Promise.resolve(request.provider.resolveCodeLens(model, request.symbol, token)).then(symbol => {\n                            resolvedSymbols[i] = symbol;\n                        }, onUnexpectedExternalError);\n                    }\n                    else {\n                        resolvedSymbols[i] = request.symbol;\n                        return Promise.resolve(undefined);\n                    }\n                });\n                return Promise.all(promises).then(() => {\n                    if (!token.isCancellationRequested && !lenses[i].isDisposed()) {\n                        lenses[i].updateCommands(resolvedSymbols);\n                    }\n                });\n            });\n            return Promise.all(promises);\n        });\n        this._resolveCodeLensesPromise = resolvePromise;\n        this._resolveCodeLensesPromise.then(() => {\n            // update moving average\n            const newDelay = this._resolveCodeLensesDebounce.update(model, Date.now() - t1);\n            this._resolveCodeLensesScheduler.delay = newDelay;\n            if (this._currentCodeLensModel) { // update the cached state with new resolved items\n                this._codeLensCache.put(model, this._currentCodeLensModel);\n            }\n            this._oldCodeLensModels.clear(); // dispose old models once we have updated the UI with the current model\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        }, err => {\n            onUnexpectedError(err); // can also be cancellation!\n            if (resolvePromise === this._resolveCodeLensesPromise) {\n                this._resolveCodeLensesPromise = undefined;\n            }\n        });\n    }\n    getModel() {\n        return this._currentCodeLensModel;\n    }\n};\nCodeLensContribution.ID = 'css.editor.codeLens';\nCodeLensContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageFeatureDebounceService),\n    __param(3, ICommandService),\n    __param(4, INotificationService),\n    __param(5, ICodeLensCache)\n], CodeLensContribution);\nexport { CodeLensContribution };\nregisterEditorContribution(CodeLensContribution.ID, CodeLensContribution);\nregisterEditorAction(class ShowLensesInCurrentLine extends EditorAction {\n    constructor() {\n        super({\n            id: 'codelens.showLensesInCurrentLine',\n            precondition: EditorContextKeys.hasCodeLensProvider,\n            label: localize('showLensOnLine', \"Show CodeLens Commands For Current Line\"),\n            alias: 'Show CodeLens Commands For Current Line',\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const quickInputService = accessor.get(IQuickInputService);\n            const commandService = accessor.get(ICommandService);\n            const notificationService = accessor.get(INotificationService);\n            const lineNumber = editor.getSelection().positionLineNumber;\n            const codelensController = editor.getContribution(CodeLensContribution.ID);\n            if (!codelensController) {\n                return;\n            }\n            const model = codelensController.getModel();\n            if (!model) {\n                // nothing\n                return;\n            }\n            const items = [];\n            for (const lens of model.lenses) {\n                if (lens.symbol.command && lens.symbol.range.startLineNumber === lineNumber) {\n                    items.push({\n                        label: lens.symbol.command.title,\n                        command: lens.symbol.command\n                    });\n                }\n            }\n            if (items.length === 0) {\n                // We dont want an empty picker\n                return;\n            }\n            const item = yield quickInputService.pick(items, { canPickMany: false });\n            if (!item) {\n                // Nothing picked\n                return;\n            }\n            if (model.isDisposed) {\n                // retry whenever the model has been disposed\n                return yield commandService.executeCommand(this.id);\n            }\n            try {\n                yield commandService.executeCommand(item.command.id, ...(item.command.arguments || []));\n            }\n            catch (err) {\n                notificationService.error(err);\n            }\n        });\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { illegalArgument } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function getColors(registry, model, token) {\n    const colors = [];\n    const providers = registry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, token)).then(result => {\n        if (Array.isArray(result)) {\n            for (const colorInfo of result) {\n                colors.push({ colorInfo, provider });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => colors);\n}\nexport function getColorPresentations(model, colorInfo, provider, token) {\n    return Promise.resolve(provider.provideColorPresentations(model, colorInfo, token));\n}\nCommandsRegistry.registerCommand('_executeDocumentColorProvider', function (accessor, ...args) {\n    const [resource] = args;\n    if (!(resource instanceof URI)) {\n        throw illegalArgument();\n    }\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(resource);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const rawCIs = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideDocumentColors(model, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            for (const ci of result) {\n                rawCIs.push({ range: ci.range, color: [ci.color.red, ci.color.green, ci.color.blue, ci.color.alpha] });\n            }\n        }\n    }));\n    return Promise.all(promises).then(() => rawCIs);\n});\nCommandsRegistry.registerCommand('_executeColorPresentationProvider', function (accessor, ...args) {\n    const [color, context] = args;\n    const { uri, range } = context;\n    if (!(uri instanceof URI) || !Array.isArray(color) || color.length !== 4 || !Range.isIRange(range)) {\n        throw illegalArgument();\n    }\n    const [red, green, blue, alpha] = color;\n    const { colorProvider: colorProviderRegistry } = accessor.get(ILanguageFeaturesService);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        throw illegalArgument();\n    }\n    const colorInfo = {\n        range,\n        color: { red, green, blue, alpha }\n    };\n    const presentations = [];\n    const providers = colorProviderRegistry.ordered(model).reverse();\n    const promises = providers.map(provider => Promise.resolve(provider.provideColorPresentations(model, colorInfo, CancellationToken.None)).then(result => {\n        if (Array.isArray(result)) {\n            presentations.push(...result);\n        }\n    }));\n    return Promise.all(promises).then(() => presentations);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createCancelablePromise, TimeoutTimer } from '../../../../base/common/async.js';\nimport { RGBA } from '../../../../base/common/color.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { noBreakWhitespace } from '../../../../base/common/strings.js';\nimport { DynamicCssRules } from '../../../browser/editorDom.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getColors } from './color.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport const ColorDecorationInjectedTextMarker = Object.create({});\nconst MAX_DECORATORS = 500;\nlet ColorDetector = class ColorDetector extends Disposable {\n    constructor(_editor, _configurationService, _languageFeaturesService, languageFeatureDebounceService) {\n        super();\n        this._editor = _editor;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._localToDispose = this._register(new DisposableStore());\n        this._decorationsIds = [];\n        this._colorDatas = new Map();\n        this._colorDecoratorIds = this._editor.createDecorationsCollection();\n        this._ruleFactory = new DynamicCssRules(this._editor);\n        this._colorDecorationClassRefs = this._register(new DisposableStore());\n        this._debounceInformation = languageFeatureDebounceService.for(_languageFeaturesService.colorProvider, 'Document Colors', { min: ColorDetector.RECOMPUTE_TIME });\n        this._register(_editor.onDidChangeModel(() => {\n            this._isEnabled = this.isEnabled();\n            this.onModelChanged();\n        }));\n        this._register(_editor.onDidChangeModelLanguage(() => this.onModelChanged()));\n        this._register(_languageFeaturesService.colorProvider.onDidChange(() => this.onModelChanged()));\n        this._register(_editor.onDidChangeConfiguration(() => {\n            const prevIsEnabled = this._isEnabled;\n            this._isEnabled = this.isEnabled();\n            if (prevIsEnabled !== this._isEnabled) {\n                if (this._isEnabled) {\n                    this.onModelChanged();\n                }\n                else {\n                    this.removeAllDecorations();\n                }\n            }\n        }));\n        this._timeoutTimer = null;\n        this._computePromise = null;\n        this._isEnabled = this.isEnabled();\n        this.onModelChanged();\n    }\n    isEnabled() {\n        const model = this._editor.getModel();\n        if (!model) {\n            return false;\n        }\n        const languageId = model.getLanguageId();\n        // handle deprecated settings. [languageId].colorDecorators.enable\n        const deprecatedConfig = this._configurationService.getValue(languageId);\n        if (deprecatedConfig && typeof deprecatedConfig === 'object') {\n            const colorDecorators = deprecatedConfig['colorDecorators']; // deprecatedConfig.valueOf('.colorDecorators.enable');\n            if (colorDecorators && colorDecorators['enable'] !== undefined && !colorDecorators['enable']) {\n                return colorDecorators['enable'];\n            }\n        }\n        return this._editor.getOption(17 /* EditorOption.colorDecorators */);\n    }\n    static get(editor) {\n        return editor.getContribution(this.ID);\n    }\n    dispose() {\n        this.stop();\n        this.removeAllDecorations();\n        super.dispose();\n    }\n    onModelChanged() {\n        this.stop();\n        if (!this._isEnabled) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (!model || !this._languageFeaturesService.colorProvider.has(model)) {\n            return;\n        }\n        this._localToDispose.add(this._editor.onDidChangeModelContent(() => {\n            if (!this._timeoutTimer) {\n                this._timeoutTimer = new TimeoutTimer();\n                this._timeoutTimer.cancelAndSet(() => {\n                    this._timeoutTimer = null;\n                    this.beginCompute();\n                }, this._debounceInformation.get(model));\n            }\n        }));\n        this.beginCompute();\n    }\n    beginCompute() {\n        this._computePromise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const model = this._editor.getModel();\n            if (!model) {\n                return Promise.resolve([]);\n            }\n            const sw = new StopWatch(false);\n            const colors = yield getColors(this._languageFeaturesService.colorProvider, model, token);\n            this._debounceInformation.update(model, sw.elapsed());\n            return colors;\n        }));\n        this._computePromise.then((colorInfos) => {\n            this.updateDecorations(colorInfos);\n            this.updateColorDecorators(colorInfos);\n            this._computePromise = null;\n        }, onUnexpectedError);\n    }\n    stop() {\n        if (this._timeoutTimer) {\n            this._timeoutTimer.cancel();\n            this._timeoutTimer = null;\n        }\n        if (this._computePromise) {\n            this._computePromise.cancel();\n            this._computePromise = null;\n        }\n        this._localToDispose.clear();\n    }\n    updateDecorations(colorDatas) {\n        const decorations = colorDatas.map(c => ({\n            range: {\n                startLineNumber: c.colorInfo.range.startLineNumber,\n                startColumn: c.colorInfo.range.startColumn,\n                endLineNumber: c.colorInfo.range.endLineNumber,\n                endColumn: c.colorInfo.range.endColumn\n            },\n            options: ModelDecorationOptions.EMPTY\n        }));\n        this._editor.changeDecorations((changeAccessor) => {\n            this._decorationsIds = changeAccessor.deltaDecorations(this._decorationsIds, decorations);\n            this._colorDatas = new Map();\n            this._decorationsIds.forEach((id, i) => this._colorDatas.set(id, colorDatas[i]));\n        });\n    }\n    updateColorDecorators(colorData) {\n        this._colorDecorationClassRefs.clear();\n        const decorations = [];\n        for (let i = 0; i < colorData.length && decorations.length < MAX_DECORATORS; i++) {\n            const { red, green, blue, alpha } = colorData[i].colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = `rgba(${rgba.r}, ${rgba.g}, ${rgba.b}, ${rgba.a})`;\n            const ref = this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({\n                backgroundColor: color\n            }));\n            decorations.push({\n                range: {\n                    startLineNumber: colorData[i].colorInfo.range.startLineNumber,\n                    startColumn: colorData[i].colorInfo.range.startColumn,\n                    endLineNumber: colorData[i].colorInfo.range.endLineNumber,\n                    endColumn: colorData[i].colorInfo.range.endColumn\n                },\n                options: {\n                    description: 'colorDetector',\n                    before: {\n                        content: noBreakWhitespace,\n                        inlineClassName: `${ref.className} colorpicker-color-decoration`,\n                        inlineClassNameAffectsLetterSpacing: true,\n                        attachedData: ColorDecorationInjectedTextMarker\n                    }\n                }\n            });\n        }\n        this._colorDecoratorIds.set(decorations);\n    }\n    removeAllDecorations() {\n        this._editor.removeDecorations(this._decorationsIds);\n        this._decorationsIds = [];\n        this._colorDecoratorIds.clear();\n        this._colorDecorationClassRefs.clear();\n    }\n    getColorData(position) {\n        const model = this._editor.getModel();\n        if (!model) {\n            return null;\n        }\n        const decorations = model\n            .getDecorationsInRange(Range.fromPositions(position, position))\n            .filter(d => this._colorDatas.has(d.id));\n        if (decorations.length === 0) {\n            return null;\n        }\n        return this._colorDatas.get(decorations[0].id);\n    }\n    isColorDecoration(decoration) {\n        return this._colorDecoratorIds.has(decoration);\n    }\n};\nColorDetector.ID = 'editor.contrib.colorDetector';\nColorDetector.RECOMPUTE_TIME = 1000; // ms\nColorDetector = __decorate([\n    __param(1, IConfigurationService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, ILanguageFeatureDebounceService)\n], ColorDetector);\nexport { ColorDetector };\nregisterEditorContribution(ColorDetector.ID, ColorDetector);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nexport class ColorPickerModel {\n    constructor(color, availableColorPresentations, presentationIndex) {\n        this.presentationIndex = presentationIndex;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this._onDidChangeColor = new Emitter();\n        this.onDidChangeColor = this._onDidChangeColor.event;\n        this._onDidChangePresentation = new Emitter();\n        this.onDidChangePresentation = this._onDidChangePresentation.event;\n        this.originalColor = color;\n        this._color = color;\n        this._colorPresentations = availableColorPresentations;\n    }\n    get color() {\n        return this._color;\n    }\n    set color(color) {\n        if (this._color.equals(color)) {\n            return;\n        }\n        this._color = color;\n        this._onDidChangeColor.fire(color);\n    }\n    get presentation() { return this.colorPresentations[this.presentationIndex]; }\n    get colorPresentations() {\n        return this._colorPresentations;\n    }\n    set colorPresentations(colorPresentations) {\n        this._colorPresentations = colorPresentations;\n        if (this.presentationIndex > colorPresentations.length - 1) {\n            this.presentationIndex = 0;\n        }\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    selectNextColorPresentation() {\n        this.presentationIndex = (this.presentationIndex + 1) % this.colorPresentations.length;\n        this.flushColor();\n        this._onDidChangePresentation.fire(this.presentation);\n    }\n    guessColorPresentation(color, originalText) {\n        for (let i = 0; i < this.colorPresentations.length; i++) {\n            if (originalText.toLowerCase() === this.colorPresentations[i].label) {\n                this.presentationIndex = i;\n                this._onDidChangePresentation.fire(this.presentation);\n                break;\n            }\n        }\n    }\n    flushColor() {\n        this._onColorFlushed.fire(this._color);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { PixelRatio } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../../../base/browser/globalPointerMoveMonitor.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Color, HSVA, RGBA } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport './colorPicker.css';\nimport { localize } from '../../../../nls.js';\nimport { editorHoverBackground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nconst $ = dom.$;\nexport class ColorPickerHeader extends Disposable {\n    constructor(container, model, themeService) {\n        super();\n        this.model = model;\n        this.domNode = $('.colorpicker-header');\n        dom.append(container, this.domNode);\n        this.pickedColorNode = dom.append(this.domNode, $('.picked-color'));\n        const tooltip = localize('clickToToggleColorOptions', \"Click to toggle color options (rgb/hsl/hex)\");\n        this.pickedColorNode.setAttribute('title', tooltip);\n        const colorBox = dom.append(this.domNode, $('.original-color'));\n        colorBox.style.backgroundColor = Color.Format.CSS.format(this.model.originalColor) || '';\n        this.backgroundColor = themeService.getColorTheme().getColor(editorHoverBackground) || Color.white;\n        this._register(registerThemingParticipant((theme, collector) => {\n            this.backgroundColor = theme.getColor(editorHoverBackground) || Color.white;\n        }));\n        this._register(dom.addDisposableListener(this.pickedColorNode, dom.EventType.CLICK, () => this.model.selectNextColorPresentation()));\n        this._register(dom.addDisposableListener(colorBox, dom.EventType.CLICK, () => {\n            this.model.color = this.model.originalColor;\n            this.model.flushColor();\n        }));\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this._register(model.onDidChangePresentation(this.onDidChangePresentation, this));\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(model.color) || '';\n        this.pickedColorNode.classList.toggle('light', model.color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : model.color.isLighter());\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        this.pickedColorNode.style.backgroundColor = Color.Format.CSS.format(color) || '';\n        this.pickedColorNode.classList.toggle('light', color.rgba.a < 0.5 ? this.backgroundColor.isLighter() : color.isLighter());\n        this.onDidChangePresentation();\n    }\n    onDidChangePresentation() {\n        this.pickedColorNode.textContent = this.model.presentation ? this.model.presentation.label : '';\n        this.pickedColorNode.prepend($('.codicon.codicon-color-mode'));\n    }\n}\nexport class ColorPickerBody extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this.domNode = $('.colorpicker-body');\n        dom.append(container, this.domNode);\n        this.saturationBox = new SaturationBox(this.domNode, this.model, this.pixelRatio);\n        this._register(this.saturationBox);\n        this._register(this.saturationBox.onDidChange(this.onDidSaturationValueChange, this));\n        this._register(this.saturationBox.onColorFlushed(this.flushColor, this));\n        this.opacityStrip = new OpacityStrip(this.domNode, this.model);\n        this._register(this.opacityStrip);\n        this._register(this.opacityStrip.onDidChange(this.onDidOpacityChange, this));\n        this._register(this.opacityStrip.onColorFlushed(this.flushColor, this));\n        this.hueStrip = new HueStrip(this.domNode, this.model);\n        this._register(this.hueStrip);\n        this._register(this.hueStrip.onDidChange(this.onDidHueChange, this));\n        this._register(this.hueStrip.onColorFlushed(this.flushColor, this));\n    }\n    flushColor() {\n        this.model.flushColor();\n    }\n    onDidSaturationValueChange({ s, v }) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, s, v, hsva.a));\n    }\n    onDidOpacityChange(a) {\n        const hsva = this.model.color.hsva;\n        this.model.color = new Color(new HSVA(hsva.h, hsva.s, hsva.v, a));\n    }\n    onDidHueChange(value) {\n        const hsva = this.model.color.hsva;\n        const h = (1 - value) * 360;\n        this.model.color = new Color(new HSVA(h === 360 ? 0 : h, hsva.s, hsva.v, hsva.a));\n    }\n    layout() {\n        this.saturationBox.layout();\n        this.opacityStrip.layout();\n        this.hueStrip.layout();\n    }\n}\nclass SaturationBox extends Disposable {\n    constructor(container, model, pixelRatio) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = $('.saturation-wrap');\n        dom.append(container, this.domNode);\n        // Create canvas, draw selected color\n        this.canvas = document.createElement('canvas');\n        this.canvas.className = 'saturation-box';\n        dom.append(this.domNode, this.canvas);\n        // Add selection circle\n        this.selection = $('.saturation-selection');\n        dom.append(this.domNode, this.selection);\n        this.layout();\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this._register(this.model.onDidChangeColor(this.onDidChangeColor, this));\n        this.monitor = null;\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        this.monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        if (e.target !== this.selection) {\n            this.onDidChangePosition(e.offsetX, e.offsetY);\n        }\n        this.monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangePosition(event.pageX - origin.left, event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            if (this.monitor) {\n                this.monitor.stopMonitoring(true);\n                this.monitor = null;\n            }\n        }, true);\n    }\n    onDidChangePosition(left, top) {\n        const s = Math.max(0, Math.min(1, left / this.width));\n        const v = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.paintSelection(s, v);\n        this._onDidChange.fire({ s, v });\n    }\n    layout() {\n        this.width = this.domNode.offsetWidth;\n        this.height = this.domNode.offsetHeight;\n        this.canvas.width = this.width * this.pixelRatio;\n        this.canvas.height = this.height * this.pixelRatio;\n        this.paint();\n        const hsva = this.model.color.hsva;\n        this.paintSelection(hsva.s, hsva.v);\n    }\n    paint() {\n        const hsva = this.model.color.hsva;\n        const saturatedColor = new Color(new HSVA(hsva.h, 1, 1, 1));\n        const ctx = this.canvas.getContext('2d');\n        const whiteGradient = ctx.createLinearGradient(0, 0, this.canvas.width, 0);\n        whiteGradient.addColorStop(0, 'rgba(255, 255, 255, 1)');\n        whiteGradient.addColorStop(0.5, 'rgba(255, 255, 255, 0.5)');\n        whiteGradient.addColorStop(1, 'rgba(255, 255, 255, 0)');\n        const blackGradient = ctx.createLinearGradient(0, 0, 0, this.canvas.height);\n        blackGradient.addColorStop(0, 'rgba(0, 0, 0, 0)');\n        blackGradient.addColorStop(1, 'rgba(0, 0, 0, 1)');\n        ctx.rect(0, 0, this.canvas.width, this.canvas.height);\n        ctx.fillStyle = Color.Format.CSS.format(saturatedColor);\n        ctx.fill();\n        ctx.fillStyle = whiteGradient;\n        ctx.fill();\n        ctx.fillStyle = blackGradient;\n        ctx.fill();\n    }\n    paintSelection(s, v) {\n        this.selection.style.left = `${s * this.width}px`;\n        this.selection.style.top = `${this.height - v * this.height}px`;\n    }\n    onDidChangeColor() {\n        if (this.monitor && this.monitor.isMonitoring()) {\n            return;\n        }\n        this.paint();\n    }\n}\nclass Strip extends Disposable {\n    constructor(container, model) {\n        super();\n        this.model = model;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._onColorFlushed = new Emitter();\n        this.onColorFlushed = this._onColorFlushed.event;\n        this.domNode = dom.append(container, $('.strip'));\n        this.overlay = dom.append(this.domNode, $('.overlay'));\n        this.slider = dom.append(this.domNode, $('.slider'));\n        this.slider.style.top = `0px`;\n        this._register(dom.addDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, e => this.onPointerDown(e)));\n        this.layout();\n    }\n    layout() {\n        this.height = this.domNode.offsetHeight - this.slider.offsetHeight;\n        const value = this.getValue(this.model.color);\n        this.updateSliderPosition(value);\n    }\n    onPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const monitor = this._register(new GlobalPointerMoveMonitor());\n        const origin = dom.getDomNodePagePosition(this.domNode);\n        this.domNode.classList.add('grabbing');\n        if (e.target !== this.slider) {\n            this.onDidChangeTop(e.offsetY);\n        }\n        monitor.startMonitoring(e.target, e.pointerId, e.buttons, event => this.onDidChangeTop(event.pageY - origin.top), () => null);\n        const pointerUpListener = dom.addDisposableListener(document, dom.EventType.POINTER_UP, () => {\n            this._onColorFlushed.fire();\n            pointerUpListener.dispose();\n            monitor.stopMonitoring(true);\n            this.domNode.classList.remove('grabbing');\n        }, true);\n    }\n    onDidChangeTop(top) {\n        const value = Math.max(0, Math.min(1, 1 - (top / this.height)));\n        this.updateSliderPosition(value);\n        this._onDidChange.fire(value);\n    }\n    updateSliderPosition(value) {\n        this.slider.style.top = `${(1 - value) * this.height}px`;\n    }\n}\nclass OpacityStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('opacity-strip');\n        this._register(model.onDidChangeColor(this.onDidChangeColor, this));\n        this.onDidChangeColor(this.model.color);\n    }\n    onDidChangeColor(color) {\n        const { r, g, b } = color.rgba;\n        const opaque = new Color(new RGBA(r, g, b, 1));\n        const transparent = new Color(new RGBA(r, g, b, 0));\n        this.overlay.style.background = `linear-gradient(to bottom, ${opaque} 0%, ${transparent} 100%)`;\n    }\n    getValue(color) {\n        return color.hsva.a;\n    }\n}\nclass HueStrip extends Strip {\n    constructor(container, model) {\n        super(container, model);\n        this.domNode.classList.add('hue-strip');\n    }\n    getValue(color) {\n        return 1 - (color.hsva.h / 360);\n    }\n}\nexport class ColorPickerWidget extends Widget {\n    constructor(container, model, pixelRatio, themeService) {\n        super();\n        this.model = model;\n        this.pixelRatio = pixelRatio;\n        this._register(PixelRatio.onDidChange(() => this.layout()));\n        const element = $('.colorpicker-widget');\n        container.appendChild(element);\n        const header = new ColorPickerHeader(element, this.model, themeService);\n        this.body = new ColorPickerBody(element, this.model, this.pixelRatio);\n        this._register(header);\n        this._register(this.body);\n    }\n    layout() {\n        this.body.layout();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { AsyncIterableObject } from '../../../../base/common/async.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { Color, RGBA } from '../../../../base/common/color.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getColorPresentations } from './color.js';\nimport { ColorDetector } from './colorDetector.js';\nimport { ColorPickerModel } from './colorPickerModel.js';\nimport { ColorPickerWidget } from './colorPickerWidget.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport class ColorHover {\n    constructor(owner, range, model, provider) {\n        this.owner = owner;\n        this.range = range;\n        this.model = model;\n        this.provider = provider;\n        /**\n         * Force the hover to always be rendered at this specific range,\n         * even in the case of multiple hover parts.\n         */\n        this.forceShowAtRange = true;\n    }\n    isValidForHoverAnchor(anchor) {\n        return (anchor.type === 1 /* HoverAnchorType.Range */\n            && this.range.startColumn <= anchor.range.startColumn\n            && this.range.endColumn >= anchor.range.endColumn);\n    }\n}\nlet ColorHoverParticipant = class ColorHoverParticipant {\n    constructor(_editor, _themeService) {\n        this._editor = _editor;\n        this._themeService = _themeService;\n        this.hoverOrdinal = 1;\n    }\n    computeSync(anchor, lineDecorations) {\n        return [];\n    }\n    computeAsync(anchor, lineDecorations, token) {\n        return AsyncIterableObject.fromPromise(this._computeAsync(anchor, lineDecorations, token));\n    }\n    _computeAsync(anchor, lineDecorations, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return [];\n            }\n            const colorDetector = ColorDetector.get(this._editor);\n            if (!colorDetector) {\n                return [];\n            }\n            for (const d of lineDecorations) {\n                if (!colorDetector.isColorDecoration(d)) {\n                    continue;\n                }\n                const colorData = colorDetector.getColorData(d.range.getStartPosition());\n                if (colorData) {\n                    const colorHover = yield this._createColorHover(this._editor.getModel(), colorData.colorInfo, colorData.provider);\n                    return [colorHover];\n                }\n            }\n            return [];\n        });\n    }\n    _createColorHover(editorModel, colorInfo, provider) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const originalText = editorModel.getValueInRange(colorInfo.range);\n            const { red, green, blue, alpha } = colorInfo.color;\n            const rgba = new RGBA(Math.round(red * 255), Math.round(green * 255), Math.round(blue * 255), alpha);\n            const color = new Color(rgba);\n            const colorPresentations = yield getColorPresentations(editorModel, colorInfo, provider, CancellationToken.None);\n            const model = new ColorPickerModel(color, [], 0);\n            model.colorPresentations = colorPresentations || [];\n            model.guessColorPresentation(color, originalText);\n            return new ColorHover(this, Range.lift(colorInfo.range), model, provider);\n        });\n    }\n    renderHoverParts(context, hoverParts) {\n        if (hoverParts.length === 0 || !this._editor.hasModel()) {\n            return Disposable.None;\n        }\n        const disposables = new DisposableStore();\n        const colorHover = hoverParts[0];\n        const editorModel = this._editor.getModel();\n        const model = colorHover.model;\n        const widget = disposables.add(new ColorPickerWidget(context.fragment, model, this._editor.getOption(131 /* EditorOption.pixelRatio */), this._themeService));\n        context.setColorPicker(widget);\n        let range = new Range(colorHover.range.startLineNumber, colorHover.range.startColumn, colorHover.range.endLineNumber, colorHover.range.endColumn);\n        const updateEditorModel = () => {\n            let textEdits;\n            let newRange;\n            if (model.presentation.textEdit) {\n                textEdits = [model.presentation.textEdit];\n                newRange = new Range(model.presentation.textEdit.range.startLineNumber, model.presentation.textEdit.range.startColumn, model.presentation.textEdit.range.endLineNumber, model.presentation.textEdit.range.endColumn);\n                const trackedRange = this._editor.getModel()._setTrackedRange(null, newRange, 3 /* TrackedRangeStickiness.GrowsOnlyWhenTypingAfter */);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n                newRange = this._editor.getModel()._getTrackedRange(trackedRange) || newRange;\n            }\n            else {\n                textEdits = [{ range, text: model.presentation.label, forceMoveMarkers: false }];\n                newRange = range.setEndPosition(range.endLineNumber, range.startColumn + model.presentation.label.length);\n                this._editor.pushUndoStop();\n                this._editor.executeEdits('colorpicker', textEdits);\n            }\n            if (model.presentation.additionalTextEdits) {\n                textEdits = [...model.presentation.additionalTextEdits];\n                this._editor.executeEdits('colorpicker', textEdits);\n                context.hide();\n            }\n            this._editor.pushUndoStop();\n            range = newRange;\n        };\n        const updateColorPresentations = (color) => {\n            return getColorPresentations(editorModel, {\n                range: range,\n                color: {\n                    red: color.rgba.r / 255,\n                    green: color.rgba.g / 255,\n                    blue: color.rgba.b / 255,\n                    alpha: color.rgba.a\n                }\n            }, colorHover.provider, CancellationToken.None).then((colorPresentations) => {\n                model.colorPresentations = colorPresentations || [];\n            });\n        };\n        disposables.add(model.onColorFlushed((color) => {\n            updateColorPresentations(color).then(updateEditorModel);\n        }));\n        disposables.add(model.onDidChangeColor(updateColorPresentations));\n        return disposables;\n    }\n};\nColorHoverParticipant = __decorate([\n    __param(1, IThemeService)\n], ColorHoverParticipant);\nexport { ColorHoverParticipant };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ColorDecorationInjectedTextMarker } from './colorDetector.js';\nimport { ColorHoverParticipant } from './colorHoverParticipant.js';\nimport { ModesHoverController } from '../../hover/browser/hover.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nexport class ColorContribution extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(_editor.onMouseDown((e) => this.onMouseDown(e)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    onMouseDown(mouseEvent) {\n        const target = mouseEvent.target;\n        if (target.type !== 6 /* MouseTargetType.CONTENT_TEXT */) {\n            return;\n        }\n        if (!target.detail.injectedText) {\n            return;\n        }\n        if (target.detail.injectedText.options.attachedData !== ColorDecorationInjectedTextMarker) {\n            return;\n        }\n        if (!target.range) {\n            return;\n        }\n        const hoverController = this._editor.getContribution(ModesHoverController.ID);\n        if (!hoverController) {\n            return;\n        }\n        if (!hoverController.isColorPickerVisible()) {\n            const range = new Range(target.range.startLineNumber, target.range.startColumn + 1, target.range.endLineNumber, target.range.endColumn + 1);\n            hoverController.showContentHover(range, 1 /* HoverStartMode.Immediate */, false);\n        }\n    }\n}\nColorContribution.ID = 'editor.contrib.colorContribution'; // ms\nregisterEditorContribution(ColorContribution.ID, ColorContribution);\nHoverParticipantRegistry.register(ColorHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class BlockCommentCommand {\n    constructor(selection, insertSpace, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._insertSpace = insertSpace;\n        this._usedEndToken = null;\n    }\n    static _haystackHasNeedleAtOffset(haystack, needle, offset) {\n        if (offset < 0) {\n            return false;\n        }\n        const needleLength = needle.length;\n        const haystackLength = haystack.length;\n        if (offset + needleLength > haystackLength) {\n            return false;\n        }\n        for (let i = 0; i < needleLength; i++) {\n            const codeA = haystack.charCodeAt(offset + i);\n            const codeB = needle.charCodeAt(i);\n            if (codeA === codeB) {\n                continue;\n            }\n            if (codeA >= 65 /* CharCode.A */ && codeA <= 90 /* CharCode.Z */ && codeA + 32 === codeB) {\n                // codeA is upper-case variant of codeB\n                continue;\n            }\n            if (codeB >= 65 /* CharCode.A */ && codeB <= 90 /* CharCode.Z */ && codeB + 32 === codeA) {\n                // codeB is upper-case variant of codeA\n                continue;\n            }\n            return false;\n        }\n        return true;\n    }\n    _createOperationsForBlockComment(selection, startToken, endToken, insertSpace, model, builder) {\n        const startLineNumber = selection.startLineNumber;\n        const startColumn = selection.startColumn;\n        const endLineNumber = selection.endLineNumber;\n        const endColumn = selection.endColumn;\n        const startLineText = model.getLineContent(startLineNumber);\n        const endLineText = model.getLineContent(endLineNumber);\n        let startTokenIndex = startLineText.lastIndexOf(startToken, startColumn - 1 + startToken.length);\n        let endTokenIndex = endLineText.indexOf(endToken, endColumn - 1 - endToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            if (startLineNumber === endLineNumber) {\n                const lineBetweenTokens = startLineText.substring(startTokenIndex + startToken.length, endTokenIndex);\n                if (lineBetweenTokens.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n            else {\n                const startLineAfterStartToken = startLineText.substring(startTokenIndex + startToken.length);\n                const endLineBeforeEndToken = endLineText.substring(0, endTokenIndex);\n                if (startLineAfterStartToken.indexOf(endToken) >= 0 || endLineBeforeEndToken.indexOf(endToken) >= 0) {\n                    // force to add a block comment\n                    startTokenIndex = -1;\n                    endTokenIndex = -1;\n                }\n            }\n        }\n        let ops;\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            // Consider spaces as part of the comment tokens\n            if (insertSpace && startTokenIndex + startToken.length < startLineText.length && startLineText.charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n                // Pretend the start token contains a trailing space\n                startToken = startToken + ' ';\n            }\n            if (insertSpace && endTokenIndex > 0 && endLineText.charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n                // Pretend the end token contains a leading space\n                endToken = ' ' + endToken;\n                endTokenIndex -= 1;\n            }\n            ops = BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        else {\n            ops = BlockCommentCommand._createAddBlockCommentOperations(selection, startToken, endToken, this._insertSpace);\n            this._usedEndToken = ops.length === 1 ? endToken : null;\n        }\n        for (const op of ops) {\n            builder.addTrackedEditOperation(op.range, op.text);\n        }\n    }\n    static _createRemoveBlockCommentOperations(r, startToken, endToken) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Remove block comment start\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.startLineNumber, r.startColumn)));\n            // Remove block comment end\n            res.push(EditOperation.delete(new Range(r.endLineNumber, r.endColumn, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        else {\n            // Remove both continuously\n            res.push(EditOperation.delete(new Range(r.startLineNumber, r.startColumn - startToken.length, r.endLineNumber, r.endColumn + endToken.length)));\n        }\n        return res;\n    }\n    static _createAddBlockCommentOperations(r, startToken, endToken, insertSpace) {\n        const res = [];\n        if (!Range.isEmpty(r)) {\n            // Insert block comment start\n            res.push(EditOperation.insert(new Position(r.startLineNumber, r.startColumn), startToken + (insertSpace ? ' ' : '')));\n            // Insert block comment end\n            res.push(EditOperation.insert(new Position(r.endLineNumber, r.endColumn), (insertSpace ? ' ' : '') + endToken));\n        }\n        else {\n            // Insert both continuously\n            res.push(EditOperation.replace(new Range(r.startLineNumber, r.startColumn, r.endLineNumber, r.endColumn), startToken + '  ' + endToken));\n        }\n        return res;\n    }\n    getEditOperations(model, builder) {\n        const startLineNumber = this._selection.startLineNumber;\n        const startColumn = this._selection.startColumn;\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, startColumn);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        this._createOperationsForBlockComment(this._selection, config.blockCommentStartToken, config.blockCommentEndToken, this._insertSpace, model, builder);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        if (inverseEditOperations.length === 2) {\n            const startTokenEditOperation = inverseEditOperations[0];\n            const endTokenEditOperation = inverseEditOperations[1];\n            return new Selection(startTokenEditOperation.range.endLineNumber, startTokenEditOperation.range.endColumn, endTokenEditOperation.range.startLineNumber, endTokenEditOperation.range.startColumn);\n        }\n        else {\n            const srcRange = inverseEditOperations[0].range;\n            const deltaColumn = this._usedEndToken ? -this._usedEndToken.length - 1 : 0; // minus 1 space before endToken\n            return new Selection(srcRange.endLineNumber, srcRange.endColumn + deltaColumn, srcRange.endLineNumber, srcRange.endColumn + deltaColumn);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nexport class LineCommentCommand {\n    constructor(languageConfigurationService, selection, tabSize, type, insertSpace, ignoreEmptyLines, ignoreFirstLine) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._selection = selection;\n        this._tabSize = tabSize;\n        this._type = type;\n        this._insertSpace = insertSpace;\n        this._selectionId = null;\n        this._deltaColumn = 0;\n        this._moveEndPositionDown = false;\n        this._ignoreEmptyLines = ignoreEmptyLines;\n        this._ignoreFirstLine = ignoreFirstLine || false;\n    }\n    /**\n     * Do an initial pass over the lines and gather info about the line comment string.\n     * Returns null if any of the lines doesn't support a line comment string.\n     */\n    static _gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService) {\n        model.tokenization.tokenizeIfCheap(startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(startLineNumber, 1);\n        const config = languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        const commentStr = (config ? config.lineCommentToken : null);\n        if (!commentStr) {\n            // Mode does not support line comments\n            return null;\n        }\n        const lines = [];\n        for (let i = 0, lineCount = endLineNumber - startLineNumber + 1; i < lineCount; i++) {\n            lines[i] = {\n                ignore: false,\n                commentStr: commentStr,\n                commentStrOffset: 0,\n                commentStrLength: commentStr.length\n            };\n        }\n        return lines;\n    }\n    /**\n     * Analyze lines and decide which lines are relevant and what the toggle should do.\n     * Also, build up several offsets and lengths useful in the generation of editor operations.\n     */\n    static _analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        let onlyWhitespaceLines = true;\n        let shouldRemoveComments;\n        if (type === 0 /* Type.Toggle */) {\n            shouldRemoveComments = true;\n        }\n        else if (type === 1 /* Type.ForceAdd */) {\n            shouldRemoveComments = false;\n        }\n        else {\n            shouldRemoveComments = true;\n        }\n        for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n            const lineData = lines[i];\n            const lineNumber = startLineNumber + i;\n            if (lineNumber === startLineNumber && ignoreFirstLine) {\n                // first line ignored\n                lineData.ignore = true;\n                continue;\n            }\n            const lineContent = model.getLineContent(lineNumber);\n            const lineContentStartOffset = strings.firstNonWhitespaceIndex(lineContent);\n            if (lineContentStartOffset === -1) {\n                // Empty or whitespace only line\n                lineData.ignore = ignoreEmptyLines;\n                lineData.commentStrOffset = lineContent.length;\n                continue;\n            }\n            onlyWhitespaceLines = false;\n            lineData.ignore = false;\n            lineData.commentStrOffset = lineContentStartOffset;\n            if (shouldRemoveComments && !BlockCommentCommand._haystackHasNeedleAtOffset(lineContent, lineData.commentStr, lineContentStartOffset)) {\n                if (type === 0 /* Type.Toggle */) {\n                    // Every line so far has been a line comment, but this one is not\n                    shouldRemoveComments = false;\n                }\n                else if (type === 1 /* Type.ForceAdd */) {\n                    // Will not happen\n                }\n                else {\n                    lineData.ignore = true;\n                }\n            }\n            if (shouldRemoveComments && insertSpace) {\n                // Remove a following space if present\n                const commentStrEndOffset = lineContentStartOffset + lineData.commentStrLength;\n                if (commentStrEndOffset < lineContent.length && lineContent.charCodeAt(commentStrEndOffset) === 32 /* CharCode.Space */) {\n                    lineData.commentStrLength += 1;\n                }\n            }\n        }\n        if (type === 0 /* Type.Toggle */ && onlyWhitespaceLines) {\n            // For only whitespace lines, we insert comments\n            shouldRemoveComments = false;\n            // Also, no longer ignore them\n            for (let i = 0, lineCount = lines.length; i < lineCount; i++) {\n                lines[i].ignore = false;\n            }\n        }\n        return {\n            supported: true,\n            shouldRemoveComments: shouldRemoveComments,\n            lines: lines\n        };\n    }\n    /**\n     * Analyze all lines and decide exactly what to do => not supported | insert line comments | remove line comments\n     */\n    static _gatherPreflightData(type, insertSpace, model, startLineNumber, endLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService) {\n        const lines = LineCommentCommand._gatherPreflightCommentStrings(model, startLineNumber, endLineNumber, languageConfigurationService);\n        if (lines === null) {\n            return {\n                supported: false\n            };\n        }\n        return LineCommentCommand._analyzeLines(type, insertSpace, model, lines, startLineNumber, ignoreEmptyLines, ignoreFirstLine, languageConfigurationService);\n    }\n    /**\n     * Given a successful analysis, execute either insert line comments, either remove line comments\n     */\n    _executeLineComments(model, builder, data, s) {\n        let ops;\n        if (data.shouldRemoveComments) {\n            ops = LineCommentCommand._createRemoveLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        else {\n            LineCommentCommand._normalizeInsertionPoint(model, data.lines, s.startLineNumber, this._tabSize);\n            ops = this._createAddLineCommentsOperations(data.lines, s.startLineNumber);\n        }\n        const cursorPosition = new Position(s.positionLineNumber, s.positionColumn);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            builder.addEditOperation(ops[i].range, ops[i].text);\n            if (Range.isEmpty(ops[i].range) && Range.getStartPosition(ops[i].range).equals(cursorPosition)) {\n                const lineContent = model.getLineContent(cursorPosition.lineNumber);\n                if (lineContent.length + 1 === cursorPosition.column) {\n                    this._deltaColumn = (ops[i].text || '').length;\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n    }\n    _attemptRemoveBlockComment(model, s, startToken, endToken) {\n        let startLineNumber = s.startLineNumber;\n        let endLineNumber = s.endLineNumber;\n        const startTokenAllowedBeforeColumn = endToken.length + Math.max(model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.startColumn);\n        let startTokenIndex = model.getLineContent(startLineNumber).lastIndexOf(startToken, startTokenAllowedBeforeColumn - 1);\n        let endTokenIndex = model.getLineContent(endLineNumber).indexOf(endToken, s.endColumn - 1 - startToken.length);\n        if (startTokenIndex !== -1 && endTokenIndex === -1) {\n            endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            endLineNumber = startLineNumber;\n        }\n        if (startTokenIndex === -1 && endTokenIndex !== -1) {\n            startTokenIndex = model.getLineContent(endLineNumber).lastIndexOf(startToken, endTokenIndex);\n            startLineNumber = endLineNumber;\n        }\n        if (s.isEmpty() && (startTokenIndex === -1 || endTokenIndex === -1)) {\n            startTokenIndex = model.getLineContent(startLineNumber).indexOf(startToken);\n            if (startTokenIndex !== -1) {\n                endTokenIndex = model.getLineContent(startLineNumber).indexOf(endToken, startTokenIndex + startToken.length);\n            }\n        }\n        // We have to adjust to possible inner white space.\n        // For Space after startToken, add Space to startToken - range math will work out.\n        if (startTokenIndex !== -1 && model.getLineContent(startLineNumber).charCodeAt(startTokenIndex + startToken.length) === 32 /* CharCode.Space */) {\n            startToken += ' ';\n        }\n        // For Space before endToken, add Space before endToken and shift index one left.\n        if (endTokenIndex !== -1 && model.getLineContent(endLineNumber).charCodeAt(endTokenIndex - 1) === 32 /* CharCode.Space */) {\n            endToken = ' ' + endToken;\n            endTokenIndex -= 1;\n        }\n        if (startTokenIndex !== -1 && endTokenIndex !== -1) {\n            return BlockCommentCommand._createRemoveBlockCommentOperations(new Range(startLineNumber, startTokenIndex + startToken.length + 1, endLineNumber, endTokenIndex + 1), startToken, endToken);\n        }\n        return null;\n    }\n    /**\n     * Given an unsuccessful analysis, delegate to the block comment command\n     */\n    _executeBlockComment(model, builder, s) {\n        model.tokenization.tokenizeIfCheap(s.startLineNumber);\n        const languageId = model.getLanguageIdAtPosition(s.startLineNumber, 1);\n        const config = this.languageConfigurationService.getLanguageConfiguration(languageId).comments;\n        if (!config || !config.blockCommentStartToken || !config.blockCommentEndToken) {\n            // Mode does not support block comments\n            return;\n        }\n        const startToken = config.blockCommentStartToken;\n        const endToken = config.blockCommentEndToken;\n        let ops = this._attemptRemoveBlockComment(model, s, startToken, endToken);\n        if (!ops) {\n            if (s.isEmpty()) {\n                const lineContent = model.getLineContent(s.startLineNumber);\n                let firstNonWhitespaceIndex = strings.firstNonWhitespaceIndex(lineContent);\n                if (firstNonWhitespaceIndex === -1) {\n                    // Line is empty or contains only whitespace\n                    firstNonWhitespaceIndex = lineContent.length;\n                }\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, firstNonWhitespaceIndex + 1, s.startLineNumber, lineContent.length + 1), startToken, endToken, this._insertSpace);\n            }\n            else {\n                ops = BlockCommentCommand._createAddBlockCommentOperations(new Range(s.startLineNumber, model.getLineFirstNonWhitespaceColumn(s.startLineNumber), s.endLineNumber, model.getLineMaxColumn(s.endLineNumber)), startToken, endToken, this._insertSpace);\n            }\n            if (ops.length === 1) {\n                // Leave cursor after token and Space\n                this._deltaColumn = startToken.length + 1;\n            }\n        }\n        this._selectionId = builder.trackSelection(s);\n        for (const op of ops) {\n            builder.addEditOperation(op.range, op.text);\n        }\n    }\n    getEditOperations(model, builder) {\n        let s = this._selection;\n        this._moveEndPositionDown = false;\n        if (s.startLineNumber === s.endLineNumber && this._ignoreFirstLine) {\n            builder.addEditOperation(new Range(s.startLineNumber, model.getLineMaxColumn(s.startLineNumber), s.startLineNumber + 1, 1), s.startLineNumber === model.getLineCount() ? '' : '\\n');\n            this._selectionId = builder.trackSelection(s);\n            return;\n        }\n        if (s.startLineNumber < s.endLineNumber && s.endColumn === 1) {\n            this._moveEndPositionDown = true;\n            s = s.setEndPosition(s.endLineNumber - 1, model.getLineMaxColumn(s.endLineNumber - 1));\n        }\n        const data = LineCommentCommand._gatherPreflightData(this._type, this._insertSpace, model, s.startLineNumber, s.endLineNumber, this._ignoreEmptyLines, this._ignoreFirstLine, this.languageConfigurationService);\n        if (data.supported) {\n            return this._executeLineComments(model, builder, data, s);\n        }\n        return this._executeBlockComment(model, builder, s);\n    }\n    computeCursorState(model, helper) {\n        let result = helper.getTrackedSelection(this._selectionId);\n        if (this._moveEndPositionDown) {\n            result = result.setEndPosition(result.endLineNumber + 1, 1);\n        }\n        return new Selection(result.selectionStartLineNumber, result.selectionStartColumn + this._deltaColumn, result.positionLineNumber, result.positionColumn + this._deltaColumn);\n    }\n    /**\n     * Generate edit operations in the remove line comment case\n     */\n    static _createRemoveLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.delete(new Range(startLineNumber + i, lineData.commentStrOffset + 1, startLineNumber + i, lineData.commentStrOffset + lineData.commentStrLength + 1)));\n        }\n        return res;\n    }\n    /**\n     * Generate edit operations in the add line comment case\n     */\n    _createAddLineCommentsOperations(lines, startLineNumber) {\n        const res = [];\n        const afterCommentStr = this._insertSpace ? ' ' : '';\n        for (let i = 0, len = lines.length; i < len; i++) {\n            const lineData = lines[i];\n            if (lineData.ignore) {\n                continue;\n            }\n            res.push(EditOperation.insert(new Position(startLineNumber + i, lineData.commentStrOffset + 1), lineData.commentStr + afterCommentStr));\n        }\n        return res;\n    }\n    static nextVisibleColumn(currentVisibleColumn, tabSize, isTab, columnSize) {\n        if (isTab) {\n            return currentVisibleColumn + (tabSize - (currentVisibleColumn % tabSize));\n        }\n        return currentVisibleColumn + columnSize;\n    }\n    /**\n     * Adjust insertion points to have them vertically aligned in the add line comment case\n     */\n    static _normalizeInsertionPoint(model, lines, startLineNumber, tabSize) {\n        let minVisibleColumn = 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */;\n        let j;\n        let lenJ;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (let j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn < minVisibleColumn) {\n                minVisibleColumn = currentVisibleColumn;\n            }\n        }\n        minVisibleColumn = Math.floor(minVisibleColumn / tabSize) * tabSize;\n        for (let i = 0, len = lines.length; i < len; i++) {\n            if (lines[i].ignore) {\n                continue;\n            }\n            const lineContent = model.getLineContent(startLineNumber + i);\n            let currentVisibleColumn = 0;\n            for (j = 0, lenJ = lines[i].commentStrOffset; currentVisibleColumn < minVisibleColumn && j < lenJ; j++) {\n                currentVisibleColumn = LineCommentCommand.nextVisibleColumn(currentVisibleColumn, tabSize, lineContent.charCodeAt(j) === 9 /* CharCode.Tab */, 1);\n            }\n            if (currentVisibleColumn > minVisibleColumn) {\n                lines[i].commentStrOffset = j - 1;\n            }\n            else {\n                lines[i].commentStrOffset = j;\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { BlockCommentCommand } from './blockCommentCommand.js';\nimport { LineCommentCommand } from './lineCommentCommand.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nclass CommentLineAction extends EditorAction {\n    constructor(type, opts) {\n        super(opts);\n        this._type = type;\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const commands = [];\n        const modelOptions = model.getOptions();\n        const commentsOptions = editor.getOption(19 /* EditorOption.comments */);\n        const selections = editor.getSelections().map((selection, index) => ({ selection, index, ignoreFirstLine: false }));\n        selections.sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        // Remove selections that would result in copying the same line\n        let prev = selections[0];\n        for (let i = 1; i < selections.length; i++) {\n            const curr = selections[i];\n            if (prev.selection.endLineNumber === curr.selection.startLineNumber) {\n                // these two selections would copy the same line\n                if (prev.index < curr.index) {\n                    // prev wins\n                    curr.ignoreFirstLine = true;\n                }\n                else {\n                    // curr wins\n                    prev.ignoreFirstLine = true;\n                    prev = curr;\n                }\n            }\n        }\n        for (const selection of selections) {\n            commands.push(new LineCommentCommand(languageConfigurationService, selection.selection, modelOptions.tabSize, this._type, commentsOptions.insertSpace, commentsOptions.ignoreEmptyLines, selection.ignoreFirstLine));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nclass ToggleCommentLineAction extends CommentLineAction {\n    constructor() {\n        super(0 /* Type.Toggle */, {\n            id: 'editor.action.commentLine',\n            label: nls.localize('comment.line', \"Toggle Line Comment\"),\n            alias: 'Toggle Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleLineComment', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Line Comment\"),\n                order: 1\n            }\n        });\n    }\n}\nclass AddLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(1 /* Type.ForceAdd */, {\n            id: 'editor.action.addCommentLine',\n            label: nls.localize('comment.line.add', \"Add Line Comment\"),\n            alias: 'Add Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 33 /* KeyCode.KeyC */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass RemoveLineCommentAction extends CommentLineAction {\n    constructor() {\n        super(2 /* Type.ForceRemove */, {\n            id: 'editor.action.removeCommentLine',\n            label: nls.localize('comment.line.remove', \"Remove Line Comment\"),\n            alias: 'Remove Line Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n}\nclass BlockCommentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.blockComment',\n            label: nls.localize('comment.block', \"Toggle Block Comment\"),\n            alias: 'Toggle Block Comment',\n            precondition: EditorContextKeys.writable,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 31 /* KeyCode.KeyA */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 31 /* KeyCode.KeyA */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarEditMenu,\n                group: '5_insert',\n                title: nls.localize({ key: 'miToggleBlockComment', comment: ['&& denotes a mnemonic'] }, \"Toggle &&Block Comment\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor) {\n        const languageConfigurationService = accessor.get(ILanguageConfigurationService);\n        if (!editor.hasModel()) {\n            return;\n        }\n        const commentsOptions = editor.getOption(19 /* EditorOption.comments */);\n        const commands = [];\n        const selections = editor.getSelections();\n        for (const selection of selections) {\n            commands.push(new BlockCommentCommand(selection, commentsOptions.insertSpace, languageConfigurationService));\n        }\n        editor.pushUndoStop();\n        editor.executeCommands(this.id, commands);\n        editor.pushUndoStop();\n    }\n}\nregisterEditorAction(ToggleCommentLineAction);\nregisterEditorAction(AddLineCommentAction);\nregisterEditorAction(RemoveLineCommentAction);\nregisterEditorAction(BlockCommentAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionViewItem } from '../../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { Separator, SubmenuAction } from '../../../../base/common/actions.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nimport { IMenuService, MenuId, SubmenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nlet ContextMenuController = class ContextMenuController {\n    constructor(editor, _contextMenuService, _contextViewService, _contextKeyService, _keybindingService, _menuService, _configurationService) {\n        this._contextMenuService = _contextMenuService;\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._keybindingService = _keybindingService;\n        this._menuService = _menuService;\n        this._configurationService = _configurationService;\n        this._toDispose = new DisposableStore();\n        this._contextMenuIsBeingShownCount = 0;\n        this._editor = editor;\n        this._toDispose.add(this._editor.onContextMenu((e) => this._onContextMenu(e)));\n        this._toDispose.add(this._editor.onMouseWheel((e) => {\n            if (this._contextMenuIsBeingShownCount > 0) {\n                const view = this._contextViewService.getContextViewElement();\n                const target = e.srcElement;\n                // Event triggers on shadow root host first\n                // Check if the context view is under this host before hiding it #103169\n                if (!(target.shadowRoot && dom.getShadowRoot(view) === target.shadowRoot)) {\n                    this._contextViewService.hideContextView();\n                }\n            }\n        }));\n        this._toDispose.add(this._editor.onKeyDown((e) => {\n            if (!this._editor.getOption(20 /* EditorOption.contextmenu */)) {\n                return; // Context menu is turned off through configuration\n            }\n            if (e.keyCode === 58 /* KeyCode.ContextMenu */) {\n                // Chrome is funny like that\n                e.preventDefault();\n                e.stopPropagation();\n                this.showContextMenu();\n            }\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(ContextMenuController.ID);\n    }\n    _onContextMenu(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._editor.getOption(20 /* EditorOption.contextmenu */)) {\n            this._editor.focus();\n            // Ensure the cursor is at the position of the mouse click\n            if (e.target.position && !this._editor.getSelection().containsPosition(e.target.position)) {\n                this._editor.setPosition(e.target.position);\n            }\n            return; // Context menu is turned off through configuration\n        }\n        if (e.target.type === 12 /* MouseTargetType.OVERLAY_WIDGET */) {\n            return; // allow native menu on widgets to support right click on input field for example in find\n        }\n        if (e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.detail.injectedText) {\n            return; // allow native menu on injected text\n        }\n        e.event.preventDefault();\n        e.event.stopPropagation();\n        if (e.target.type === 11 /* MouseTargetType.SCROLLBAR */) {\n            return this._showScrollbarContextMenu({ x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 });\n        }\n        if (e.target.type !== 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.type !== 7 /* MouseTargetType.CONTENT_EMPTY */ && e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            return; // only support mouse click into text or native context menu key for now\n        }\n        // Ensure the editor gets focus if it hasn't, so the right events are being sent to other contributions\n        this._editor.focus();\n        // Ensure the cursor is at the position of the mouse click\n        if (e.target.position) {\n            let hasSelectionAtPosition = false;\n            for (const selection of this._editor.getSelections()) {\n                if (selection.containsPosition(e.target.position)) {\n                    hasSelectionAtPosition = true;\n                    break;\n                }\n            }\n            if (!hasSelectionAtPosition) {\n                this._editor.setPosition(e.target.position);\n            }\n        }\n        // Unless the user triggerd the context menu through Shift+F10, use the mouse position as menu position\n        let anchor = null;\n        if (e.target.type !== 1 /* MouseTargetType.TEXTAREA */) {\n            anchor = { x: e.event.posx - 1, width: 2, y: e.event.posy - 1, height: 2 };\n        }\n        // Show the context menu\n        this.showContextMenu(anchor);\n    }\n    showContextMenu(anchor) {\n        if (!this._editor.getOption(20 /* EditorOption.contextmenu */)) {\n            return; // Context menu is turned off through configuration\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Find actions available for menu\n        const menuActions = this._getMenuActions(this._editor.getModel(), this._editor.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext);\n        // Show menu if we have actions to show\n        if (menuActions.length > 0) {\n            this._doShowContextMenu(menuActions, anchor);\n        }\n    }\n    _getMenuActions(model, menuId) {\n        const result = [];\n        // get menu groups\n        const menu = this._menuService.createMenu(menuId, this._contextKeyService);\n        const groups = menu.getActions({ arg: model.uri });\n        menu.dispose();\n        // translate them into other actions\n        for (const group of groups) {\n            const [, actions] = group;\n            let addedItems = 0;\n            for (const action of actions) {\n                if (action instanceof SubmenuItemAction) {\n                    const subActions = this._getMenuActions(model, action.item.submenu);\n                    if (subActions.length > 0) {\n                        result.push(new SubmenuAction(action.id, action.label, subActions));\n                        addedItems++;\n                    }\n                }\n                else {\n                    result.push(action);\n                    addedItems++;\n                }\n            }\n            if (addedItems) {\n                result.push(new Separator());\n            }\n        }\n        if (result.length) {\n            result.pop(); // remove last separator\n        }\n        return result;\n    }\n    _doShowContextMenu(actions, anchor = null) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // Disable hover\n        const oldHoverSetting = this._editor.getOption(55 /* EditorOption.hover */);\n        this._editor.updateOptions({\n            hover: {\n                enabled: false\n            }\n        });\n        if (!anchor) {\n            // Ensure selection is visible\n            this._editor.revealPosition(this._editor.getPosition(), 1 /* ScrollType.Immediate */);\n            this._editor.render();\n            const cursorCoords = this._editor.getScrolledVisiblePosition(this._editor.getPosition());\n            // Translate to absolute editor position\n            const editorCoords = dom.getDomNodePagePosition(this._editor.getDomNode());\n            const posx = editorCoords.left + cursorCoords.left;\n            const posy = editorCoords.top + cursorCoords.top + cursorCoords.height;\n            anchor = { x: posx, y: posy };\n        }\n        const useShadowDOM = this._editor.getOption(117 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        // Show menu\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            getActionViewItem: (action) => {\n                const keybinding = this._keybindingFor(action);\n                if (keybinding) {\n                    return new ActionViewItem(action, action, { label: true, keybinding: keybinding.getLabel(), isMenu: true });\n                }\n                const customActionViewItem = action;\n                if (typeof customActionViewItem.getActionViewItem === 'function') {\n                    return customActionViewItem.getActionViewItem();\n                }\n                return new ActionViewItem(action, action, { icon: true, label: true, isMenu: true });\n            },\n            getKeyBinding: (action) => {\n                return this._keybindingFor(action);\n            },\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n                this._editor.updateOptions({\n                    hover: oldHoverSetting\n                });\n            }\n        });\n    }\n    _showScrollbarContextMenu(anchor) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const minimapOptions = this._editor.getOption(67 /* EditorOption.minimap */);\n        let lastId = 0;\n        const createAction = (opts) => {\n            return {\n                id: `menu-action-${++lastId}`,\n                label: opts.label,\n                tooltip: '',\n                class: undefined,\n                enabled: (typeof opts.enabled === 'undefined' ? true : opts.enabled),\n                checked: opts.checked,\n                run: opts.run,\n                dispose: () => null\n            };\n        };\n        const createSubmenuAction = (label, actions) => {\n            return new SubmenuAction(`menu-action-${++lastId}`, label, actions, undefined);\n        };\n        const createEnumAction = (label, enabled, configName, configuredValue, options) => {\n            if (!enabled) {\n                return createAction({ label, enabled, run: () => { } });\n            }\n            const createRunner = (value) => {\n                return () => {\n                    this._configurationService.updateValue(configName, value);\n                };\n            };\n            const actions = [];\n            for (const option of options) {\n                actions.push(createAction({\n                    label: option.label,\n                    checked: configuredValue === option.value,\n                    run: createRunner(option.value)\n                }));\n            }\n            return createSubmenuAction(label, actions);\n        };\n        const actions = [];\n        actions.push(createAction({\n            label: nls.localize('context.minimap.minimap', \"Minimap\"),\n            checked: minimapOptions.enabled,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.enabled`, !minimapOptions.enabled);\n            }\n        }));\n        actions.push(new Separator());\n        actions.push(createAction({\n            label: nls.localize('context.minimap.renderCharacters', \"Render Characters\"),\n            enabled: minimapOptions.enabled,\n            checked: minimapOptions.renderCharacters,\n            run: () => {\n                this._configurationService.updateValue(`editor.minimap.renderCharacters`, !minimapOptions.renderCharacters);\n            }\n        }));\n        actions.push(createEnumAction(nls.localize('context.minimap.size', \"Vertical size\"), minimapOptions.enabled, 'editor.minimap.size', minimapOptions.size, [{\n                label: nls.localize('context.minimap.size.proportional', \"Proportional\"),\n                value: 'proportional'\n            }, {\n                label: nls.localize('context.minimap.size.fill', \"Fill\"),\n                value: 'fill'\n            }, {\n                label: nls.localize('context.minimap.size.fit', \"Fit\"),\n                value: 'fit'\n            }]));\n        actions.push(createEnumAction(nls.localize('context.minimap.slider', \"Slider\"), minimapOptions.enabled, 'editor.minimap.showSlider', minimapOptions.showSlider, [{\n                label: nls.localize('context.minimap.slider.mouseover', \"Mouse Over\"),\n                value: 'mouseover'\n            }, {\n                label: nls.localize('context.minimap.slider.always', \"Always\"),\n                value: 'always'\n            }]));\n        const useShadowDOM = this._editor.getOption(117 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        this._contextMenuIsBeingShownCount++;\n        this._contextMenuService.showContextMenu({\n            domForShadowRoot: useShadowDOM ? this._editor.getDomNode() : undefined,\n            getAnchor: () => anchor,\n            getActions: () => actions,\n            onHide: (wasCancelled) => {\n                this._contextMenuIsBeingShownCount--;\n                this._editor.focus();\n            }\n        });\n    }\n    _keybindingFor(action) {\n        return this._keybindingService.lookupKeybinding(action.id);\n    }\n    dispose() {\n        if (this._contextMenuIsBeingShownCount > 0) {\n            this._contextViewService.hideContextView();\n        }\n        this._toDispose.dispose();\n    }\n};\nContextMenuController.ID = 'editor.contrib.contextmenu';\nContextMenuController = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, IContextViewService),\n    __param(3, IContextKeyService),\n    __param(4, IKeybindingService),\n    __param(5, IMenuService),\n    __param(6, IConfigurationService)\n], ContextMenuController);\nexport { ContextMenuController };\nclass ShowContextMenu extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.showContextMenu',\n            label: nls.localize('action.showContextMenu.label', \"Show Editor Context Menu\"),\n            alias: 'Show Editor Context Menu',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        var _a;\n        (_a = ContextMenuController.get(editor)) === null || _a === void 0 ? void 0 : _a.showContextMenu();\n    }\n}\nregisterEditorContribution(ContextMenuController.ID, ContextMenuController);\nregisterEditorAction(ShowContextMenu);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../../../base/browser/dnd.js';\nimport { addDisposableListener } from '../../../../base/browser/dom.js';\nimport { createCancelablePromise } from '../../../../base/common/async.js';\nimport { createStringDataTransferItem } from '../../../../base/common/dataTransfer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { toVSDataTransfer, UriList } from '../../../browser/dnd.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { performSnippetEdit } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nconst vscodeClipboardMime = 'application/vnd.code.copyMetadata';\nlet CopyPasteController = class CopyPasteController extends Disposable {\n    constructor(editor, _bulkEditService, _clipboardService, _configurationService, _languageFeaturesService) {\n        super();\n        this._bulkEditService = _bulkEditService;\n        this._clipboardService = _clipboardService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._editor = editor;\n        const container = editor.getContainerDomNode();\n        this._register(addDisposableListener(container, 'copy', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'cut', e => this.handleCopy(e)));\n        this._register(addDisposableListener(container, 'paste', e => this.handlePaste(e), true));\n    }\n    arePasteActionsEnabled(model) {\n        return this._configurationService.getValue('editor.experimental.pasteActions.enabled', {\n            resource: model.uri\n        });\n    }\n    handleCopy(e) {\n        var _a;\n        if (!e.clipboardData || !this._editor.hasTextFocus()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const selections = this._editor.getSelections();\n        if (!model || !(selections === null || selections === void 0 ? void 0 : selections.length)) {\n            return;\n        }\n        if (!this.arePasteActionsEnabled(model)) {\n            return;\n        }\n        const ranges = [...selections];\n        const primarySelection = selections[0];\n        const wasFromEmptySelection = primarySelection.isEmpty();\n        if (wasFromEmptySelection) {\n            if (!this._editor.getOption(33 /* EditorOption.emptySelectionClipboard */)) {\n                return;\n            }\n            ranges[0] = new Range(primarySelection.startLineNumber, 0, primarySelection.startLineNumber, model.getLineLength(primarySelection.startLineNumber));\n        }\n        const providers = this._languageFeaturesService.documentPasteEditProvider.ordered(model).filter(x => !!x.prepareDocumentPaste);\n        if (!providers.length) {\n            this.setCopyMetadata(e.clipboardData, { wasFromEmptySelection });\n            return;\n        }\n        const dataTransfer = toVSDataTransfer(e.clipboardData);\n        // Save off a handle pointing to data that VS Code maintains.\n        const handle = generateUuid();\n        this.setCopyMetadata(e.clipboardData, {\n            id: handle,\n            wasFromEmptySelection,\n        });\n        const promise = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n            const results = yield Promise.all(providers.map(provider => {\n                return provider.prepareDocumentPaste(model, ranges, dataTransfer, token);\n            }));\n            for (const result of results) {\n                result === null || result === void 0 ? void 0 : result.forEach((value, key) => {\n                    dataTransfer.replace(key, value);\n                });\n            }\n            return dataTransfer;\n        }));\n        (_a = this._currentClipboardItem) === null || _a === void 0 ? void 0 : _a.dataTransferPromise.cancel();\n        this._currentClipboardItem = { handle: handle, dataTransferPromise: promise };\n    }\n    setCopyMetadata(dataTransfer, metadata) {\n        dataTransfer.setData(vscodeClipboardMime, JSON.stringify(metadata));\n    }\n    handlePaste(e) {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!e.clipboardData || !this._editor.hasTextFocus()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            if (!(selections === null || selections === void 0 ? void 0 : selections.length) || !this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            if (!this.arePasteActionsEnabled(model)) {\n                return;\n            }\n            let metadata;\n            const rawMetadata = (_a = e.clipboardData) === null || _a === void 0 ? void 0 : _a.getData(vscodeClipboardMime);\n            if (rawMetadata && typeof rawMetadata === 'string') {\n                metadata = JSON.parse(rawMetadata);\n            }\n            const providers = this._languageFeaturesService.documentPasteEditProvider.ordered(model);\n            if (!providers.length) {\n                return;\n            }\n            e.preventDefault();\n            e.stopImmediatePropagation();\n            const originalDocVersion = model.getVersionId();\n            const tokenSource = new EditorStateCancellationTokenSource(this._editor, 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */);\n            try {\n                const dataTransfer = toVSDataTransfer(e.clipboardData);\n                if ((metadata === null || metadata === void 0 ? void 0 : metadata.id) && ((_b = this._currentClipboardItem) === null || _b === void 0 ? void 0 : _b.handle) === metadata.id) {\n                    const toMergeDataTransfer = yield this._currentClipboardItem.dataTransferPromise;\n                    toMergeDataTransfer.forEach((value, key) => {\n                        dataTransfer.replace(key, value);\n                    });\n                }\n                if (!dataTransfer.has(Mimes.uriList)) {\n                    const resources = yield this._clipboardService.readResources();\n                    if (resources.length) {\n                        dataTransfer.append(Mimes.uriList, createStringDataTransferItem(UriList.create(resources)));\n                    }\n                }\n                dataTransfer.delete(vscodeClipboardMime);\n                for (const provider of providers) {\n                    if (!provider.pasteMimeTypes.some(type => {\n                        if (type.toLowerCase() === DataTransfers.FILES.toLowerCase()) {\n                            return [...dataTransfer.values()].some(item => item.asFile());\n                        }\n                        return dataTransfer.has(type);\n                    })) {\n                        continue;\n                    }\n                    const edit = yield provider.provideDocumentPasteEdits(model, selections, dataTransfer, tokenSource.token);\n                    if (originalDocVersion !== model.getVersionId()) {\n                        return;\n                    }\n                    if (edit) {\n                        performSnippetEdit(this._editor, typeof edit.insertText === 'string' ? SnippetParser.escape(edit.insertText) : edit.insertText.snippet, selections);\n                        if (edit.additionalEdit) {\n                            yield this._bulkEditService.apply(ResourceEdit.convert(edit.additionalEdit), { editor: this._editor });\n                        }\n                        return;\n                    }\n                }\n                // Default handler\n                const textDataTransfer = (_c = dataTransfer.get(Mimes.text)) !== null && _c !== void 0 ? _c : dataTransfer.get('text');\n                if (!textDataTransfer) {\n                    return;\n                }\n                const text = yield textDataTransfer.asString();\n                if (originalDocVersion !== model.getVersionId()) {\n                    return;\n                }\n                this._editor.trigger('keyboard', \"paste\" /* Handler.Paste */, {\n                    text: text,\n                    pasteOnNewLine: metadata === null || metadata === void 0 ? void 0 : metadata.wasFromEmptySelection,\n                    multicursorText: null\n                });\n            }\n            finally {\n                tokenSource.dispose();\n            }\n        });\n    }\n};\nCopyPasteController.ID = 'editor.contrib.copyPasteActionController';\nCopyPasteController = __decorate([\n    __param(1, IBulkEditService),\n    __param(2, IClipboardService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], CopyPasteController);\nexport { CopyPasteController };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { editorConfigurationBaseNode } from '../../../common/config/editorConfigurationSchema.js';\nimport { CopyPasteController } from './copyPasteController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nregisterEditorContribution(CopyPasteController.ID, CopyPasteController);\nRegistry.as(Extensions.Configuration).registerConfiguration(Object.assign(Object.assign({}, editorConfigurationBaseNode), { properties: {\n        'editor.experimental.pasteActions.enabled': {\n            type: 'boolean',\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('pasteActions', \"Enable/disable running edits from extensions on paste.\"),\n            default: false,\n        },\n    } }));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as nls from '../../../../nls.js';\nclass CursorState {\n    constructor(selections) {\n        this.selections = selections;\n    }\n    equals(other) {\n        const thisLen = this.selections.length;\n        const otherLen = other.selections.length;\n        if (thisLen !== otherLen) {\n            return false;\n        }\n        for (let i = 0; i < thisLen; i++) {\n            if (!this.selections[i].equalsSelection(other.selections[i])) {\n                return false;\n            }\n        }\n        return true;\n    }\n}\nclass StackElement {\n    constructor(cursorState, scrollTop, scrollLeft) {\n        this.cursorState = cursorState;\n        this.scrollTop = scrollTop;\n        this.scrollLeft = scrollLeft;\n    }\n}\nexport class CursorUndoRedoController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._isCursorUndoRedo = false;\n        this._undoStack = [];\n        this._redoStack = [];\n        this._register(editor.onDidChangeModel((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            this._undoStack = [];\n            this._redoStack = [];\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (this._isCursorUndoRedo) {\n                return;\n            }\n            if (!e.oldSelections) {\n                return;\n            }\n            if (e.oldModelVersionId !== e.modelVersionId) {\n                return;\n            }\n            const prevState = new CursorState(e.oldSelections);\n            const isEqualToLastUndoStack = (this._undoStack.length > 0 && this._undoStack[this._undoStack.length - 1].cursorState.equals(prevState));\n            if (!isEqualToLastUndoStack) {\n                this._undoStack.push(new StackElement(prevState, editor.getScrollTop(), editor.getScrollLeft()));\n                this._redoStack = [];\n                if (this._undoStack.length > 50) {\n                    // keep the cursor undo stack bounded\n                    this._undoStack.shift();\n                }\n            }\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(CursorUndoRedoController.ID);\n    }\n    cursorUndo() {\n        if (!this._editor.hasModel() || this._undoStack.length === 0) {\n            return;\n        }\n        this._redoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._undoStack.pop());\n    }\n    cursorRedo() {\n        if (!this._editor.hasModel() || this._redoStack.length === 0) {\n            return;\n        }\n        this._undoStack.push(new StackElement(new CursorState(this._editor.getSelections()), this._editor.getScrollTop(), this._editor.getScrollLeft()));\n        this._applyState(this._redoStack.pop());\n    }\n    _applyState(stackElement) {\n        this._isCursorUndoRedo = true;\n        this._editor.setSelections(stackElement.cursorState.selections);\n        this._editor.setScrollPosition({\n            scrollTop: stackElement.scrollTop,\n            scrollLeft: stackElement.scrollLeft\n        });\n        this._isCursorUndoRedo = false;\n    }\n}\nCursorUndoRedoController.ID = 'editor.contrib.cursorUndoRedoController';\nexport class CursorUndo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorUndo',\n            label: nls.localize('cursor.undo', \"Cursor Undo\"),\n            alias: 'Cursor Undo',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 51 /* KeyCode.KeyU */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorUndo();\n    }\n}\nexport class CursorRedo extends EditorAction {\n    constructor() {\n        super({\n            id: 'cursorRedo',\n            label: nls.localize('cursor.redo', \"Cursor Redo\"),\n            alias: 'Cursor Redo',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        var _a;\n        (_a = CursorUndoRedoController.get(editor)) === null || _a === void 0 ? void 0 : _a.cursorRedo();\n    }\n}\nregisterEditorContribution(CursorUndoRedoController.ID, CursorUndoRedoController);\nregisterEditorAction(CursorUndo);\nregisterEditorAction(CursorRedo);\n"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","SelectionAnchorSet","RawContextKey","SelectionAnchorController","editor","contextKeyService","this","selectionAnchorSetContextKey","bindTo","modelChangeListener","onDidChangeModel","reset","hasModel","position","getPosition","changeDecorations","accessor","decorationId","removeDecoration","addDecoration","Selection","description","stickiness","hoverMessage","MarkdownString","appendText","localize","className","set","alert","lineNumber","column","anchorPosition","getModel","getDecorationRange","setPosition","getStartPosition","start","end","setSelection","cancelSelectionAnchor","undefined","dispose","getContribution","ID","IContextKeyService","SetSelectionAnchor","id","label","alias","precondition","kbOpts","kbExpr","EditorContextKeys","primary","KeyChord","weight","_accessor","_a","get","setSelectionAnchor","EditorAction","GoToSelectionAnchor","goToSelectionAnchor","SelectFromAnchorToCursor","selectFromAnchorToCursor","CancelSelectionAnchor","registerEditorContribution","registerEditorAction","overviewRulerBracketMatchForeground","registerColor","dark","light","hcDark","hcLight","nls","JumpToBracketAction","BracketMatchingController","jumpToBracket","SelectToBracketAction","args","name","schema","type","properties","default","selectBrackets","selectToBracket","BracketsData","brackets","options","_editor","_lastBracketsData","_lastVersionId","_decorations","createDecorationsCollection","_updateBracketsSoon","_register","RunOnceScheduler","_updateBrackets","_matchBrackets","getOption","schedule","onDidChangeCursorPosition","onDidChangeModelContent","onDidChangeModelLanguageConfiguration","onDidChangeConfiguration","hasChanged","clear","onDidBlurEditorWidget","onDidFocusEditorWidget","model","newSelections","getSelections","map","selection","bracketPairs","matchBracket","newCursorPosition","containsPosition","enclosingBrackets","findEnclosingBrackets","nextBracket","findNextBracket","range","setSelections","revealRange","forEach","selectFrom","selectTo","sort","Range","open","close","getEndPosition","tmp","push","_recomputeBrackets","newDecorations","newDecorationsLen","bracketData","hasWidgetFocus","selections","versionId","getVersionId","previousData","positions","positionsLen","len","isEmpty","Position","newData","newDataLen","previousIndex","previousLen","isBefore","equals","_DECORATION_OPTIONS_WITH_OVERVIEW_RULER","_DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER","Disposable","ModelDecorationOptions","overviewRuler","color","themeColorFromId","OverviewRulerLane","registerThemingParticipant","theme","collector","bracketMatchBackground","getColor","editorBracketMatchBackground","addRule","bracketMatchBorder","editorBracketMatchBorder","MenuRegistry","MenuId","group","command","title","comment","order","MoveCaretCommand","isMovingLeft","_selection","_isMovingLeft","builder","startLineNumber","endLineNumber","startColumn","endColumn","getLineMaxColumn","rangeBefore","charBefore","getValueInRange","addEditOperation","rangeAfter","charAfter","helper","MoveCaretAction","left","opts","commands","pushUndoStop","executeCommands","MoveCaretLeftAction","MoveCaretRightAction","TransposeLettersAction","mac","lastColumn","endPosition","MoveOperations","middlePosition","beginPosition","leftChar","rightChar","replaceRange","ReplaceCommand","CLIPBOARD_CONTEXT_MENU_GROUP","supportsCut","platform","document","queryCommandSupported","supportsCopy","supportsPaste","navigator","clipboard","browser","registerCommand","register","CutAction","MultiCommand","win","secondary","menuOpts","menuId","when","CopyAction","submenu","original","PasteAction","linux","ExecCommandCopyWithSyntaxHighlightingAction","getSelection","CopyOptions","focus","execCommand","registerExecCommandImpl","browserCommand","addImplementation","focusedEditor","ICodeEditorService","getFocusedCodeEditor","hasTextFocus","emptySelectionClipboard","codeEditorService","clipboardService","IClipboardService","readText","clipboardText","metadata","InMemoryClipboardMetadataManager","pasteOnNewLine","multicursorText","mode","isFromEmptySelection","trigger","text","codeActionCommandId","refactorCommandId","refactorPreviewCommandId","sourceActionCommandId","organizeImportsCommandId","fixAllCommandId","CodeActionItem","action","provider","token","resolveCodeAction","edit","onUnexpectedExternalError","ManagedCodeActionSet","actions","documentation","disposables","allActions","codeActionsComparator","validActions","filter","disabled","some","fix","kind","CodeActionKind","isPreferred","a","b","isNonEmptyArray","diagnostics","message","localeCompare","emptyCodeActionsResponse","getCodeActions","registry","rangeOrSelection","progress","codeActionContext","only","include","cts","TextModelCancellationTokenSource","providers","all","providedCodeActionKinds","mayIncludeActionsOfKind","getCodeActionProviders","DisposableStore","promises","report","provideCodeActions","providedCodeActions","add","isCancellationRequested","filteredActions","filtersAction","getDocumentation","isCancellationError","listener","onDidChange","newProviders","cancel","x","flat","allDocumentation","coalesce","finally","entry","currentBest","contains","CommandsRegistry","resource","itemResolveCount","URI","illegalArgument","ILanguageFeaturesService","codeActionProvider","IModelService","validatedRangeOrSelection","validateRange","triggerAction","CodeActionTriggerSource","includeSourceActions","Progress","CancellationToken","codeActionSet","resolving","resolveCount","Math","min","item","setTimeout","Context","Visible","CodeActionAction","callback","replace","Action","CodeMenuRenderer","acceptKeybindings","keybindingService","container","data","create","root","createElement","append","element","index","templateData","isEnabled","isSeparator","isDocumentation","textContent","classList","remove","style","backgroundColor","height","_b","accept","preview","lookupKeybinding","getLabel","updateLabel","IKeybindingService","CodeActionMenu","_delegate","_contextMenuService","_languageFeaturesService","_telemetryService","_themeService","_configurationService","_contextViewService","_contextKeyService","_showingActions","MutableDisposable","codeActionList","_visible","viewItems","hasSeperator","_keybindingResolver","CodeActionKeybindingResolver","getKeybindings","_ctxMenuWidgetVisible","listRenderer","getValue","uri","elements","run","hideCodeActionWidget","_c","_d","setFocus","focusedEnabledItem","indexOf","currSelectedItem","inputArray","renderDisposables","renderMenu","menuBlock","block","appendChild","cursor","top","width","zIndex","dom","addDisposableListener","EventType","MOUSE_DOWN","stopPropagation","List","getHeight","getTemplateId","keyboardSupport","onMouseOver","_onListHover","onDidChangeFocus","domFocus","onDidChangeSelection","_onListSelection","onDidLayoutChange","currIsSeparator","class","documentationID","menuItem","detail","tooltip","enabled","splice","String","layout","arr","getElementById","getElementID","getElementsByTagName","offsetWidth","Number","maxWidth","max","every","focusTracker","trackFocus","blurListener","onDidBlur","startIndex","Separator","focusPrevious","focusNext","hideContextView","source","openedFromString","didCancel","CodeActions","publicLog2","codeActionFrom","validCodeActions","cancelled","codeActions","at","actionsToShow","includeDisabledActions","getDomNode","canceled","menuActions","getMenuActions","anchor","_toCoords","y","resolver","getResolver","useShadowDOM","isCodeActionWidgetEnabled","showContextView","getAnchor","render","renderCodeActionMenuList","onHide","fromLightbulb","codeActionTelemetry","showContextMenu","domForShadowRoot","getActions","autoSelectFirstItem","getKeyBinding","toCodeActionAction","onSelectCodeAction","_getAdditionalMenuItems","revealPosition","cursorCoords","getScrolledVisiblePosition","editorCoords","getDomNodePagePosition","IContextMenuService","ITelemetryService","IThemeService","IConfigurationService","IContextViewService","_keybindingProvider","allCodeActionBindings","Lazy","codeActionCommands","resolvedKeybinding","commandArgs","assign","CodeActionCommandArgs","binding","bestKeybindingForCodeAction","candidates","candidate","preferred","reduceRight","LightBulbState","Hidden","Showing","editorPosition","widgetPosition","LightBulbWidget","_quickFixActionId","_preferredFixActionId","_keybindingService","_onClick","Emitter","onClick","event","_state","_domNode","Codicon","addContentWidget","_","editorModel","state","getLineCount","hide","Gesture","addStandardDisposableGenericMouseDownListener","preventDefault","lineHeight","pad","floor","fire","posx","buttons","_updateLightBulbTitleAndIcon","onDidUpdateKeybindings","removeContentWidget","atPosition","getOptions","validatePosition","tabSize","fontInfo","lineContent","getLineContent","indent","computeIndentLevel","isFolded","getTopForLineNumber","effectiveLineNumber","spaceWidth","preference","_posPref","layoutContentWidget","hasAutoFix","preferredKb","kb","editorBackgroundColor","editorBackground","transparent","editorLightBulbForegroundColor","editorLightBulbForeground","editorLightBulbAutoFixForegroundColor","editorLightBulbAutoFixForeground","_CodeActionUi_disposed","__classPrivateFieldSet","receiver","f","TypeError","has","call","__classPrivateFieldGet","CodeActionUi","quickFixActionId","preferredFixActionId","delegate","instantiationService","_activeCodeActions","previewOn","_codeActionWidget","createInstance","applyCodeAction","Boolean","_lightBulbWidget","widget","showCodeActionList","hasValue","onEnterSet","onEnter","navUp","navigateListWithKeysUp","navigateListWithKeysDown","newState","_e","rawValue","onUnexpectedError","update","validActionToApply","tryGetValidActionToApply","context","invalidAction","getInvalidActionThatWouldHaveBeenApplied","MessageController","showMessage","notAvailableMessage","show","isVisible","autoApply","find","WeakMap","IInstantiationService","_CodeActionModel_isDisposed","CodeActionsState","SUPPORTED_CODE_ACTIONS","CodeActionOracle","_markerService","_signalChange","_delay","_autoTriggerTimer","TimeoutTimer","onMarkerChanged","_onMarkerChanges","_onCursorChange","_getRangeOfSelectionUnlessWhitespaceEnclosed","_createEventAndSignalChange","resources","isEqual","cancelAndSet","read","marker","markerRange","line","test","_getRangeOfMarker","Empty","Triggered","_cancellablePromise","catch","emptyCodeActionSet","CodeActionModel","_registry","_progressService","_codeActionOracle","_onDidChangeState","onDidChangeState","_supportedCodeActions","_update","onDidChangeModelLanguage","setState","supportedActions","Array","isArray","join","createCancelablePromise","showWhile","skipNotify","contextKeyForSupportedActions","ContextKeyExpr","keys","RegExp","escapeRegExpCharacters","refactorTrigger","userArgs","triggerCodeActionsForEditorSelection","onlyIncludePreferredActions","ApplyCodeActionReason","argsSchema","defaultSnippets","body","enum","enumDescriptions","QuickFixController","markerService","progressService","_instantiationService","languageFeaturesService","_model","_ui","QuickFixAction","Id","AutoFixAction","retrigger","_applyCodeAction","_trigger","navigateList","onPreviewEnter","closeMessage","triggerPosition","invokeFunction","FromCodeActions","codeActionReason","bulkEditService","IBulkEditService","commandService","ICommandService","telemetryService","notificationService","INotificationService","codeActionTitle","codeActionKind","codeActionIsPreferred","reason","ResourceEdit","quotableLabel","code","respectAutoSaveConfig","showPreview","executeCommand","asMessage","error","err","Error","controller","manualTriggerAtCurrentPosition","IMarkerService","IEditorProgressService","CodeActionCommand","EditorCommand","RefactorAction","contextMenuOpts","RefactorPreview","SourceAction","OrganizeImportsAction","FixAllAction","CodeActionContribution","registerEditorCommand","handler","hideCodeActionMenu","navigateCodeActionList","selectedOption","selectedOptionWithPreview","Registry","Extensions","registerConfiguration","editorConfigurationBaseNode","tags","scope","other","startsWith","sep","part","providedKind","intersects","excludes","exclude","excludesAction","Source","actionKind","None","QuickFix","Refactor","SourceOrganizeImports","SourceFixAll","arg","defaults","getKindFromUser","getApplyFromUser","getPreferredUser","defaultAutoApply","toLowerCase","defaultKind","CodeLensModel","lenses","_disposables","isDisposed","list","symbol","getCodeLensModel","ordered","providerRanks","Map","provideCodeLenses","assertType","codeLensProvider","resolveCodeLens","ICodeLensCache","createDecorator","CacheItem","lineCount","CodeLensCache","storageService","_fakeProvider","_cache","LRUCache","runWhenIdle","raw","_deserialize","once","onWillSaveState","WillSaveStateReason","store","_serialize","copyItems","copyModel","toString","delete","lines","Set","values","JSON","stringify","parse","IStorageService","registerSingleton","CodeLensViewZone","afterLineNumber","heightInPx","onHeight","afterColumn","_onHeight","suppressMouseDown","domNode","_lastHeight","hasAttribute","CodeLensContentWidget","allowEditorOverflow","_commands","_isEmpty","_id","_idPool","updatePosition","animate","children","hasSymbol","lens","renderLabelWithIcons","trim","$","role","link","parentElement","getLineFirstNonWhitespaceColumn","_widgetPosition","CodeLensHelper","_removeDecorations","_addDecorations","_addDecorationsCallbacks","decoration","changeAccessor","resultingDecorations","deltaDecorations","CodeLensWidget","viewZoneChangeAccessor","updateCallback","_isDisposed","_className","_data","_decorationIds","codeLensData","_viewZone","_viewZoneId","addZone","_createContentWidgetIfNecessary","_contentWidget","withCommands","removeZone","layoutZone","symbols","resolved","getCommand","isValid","CodeLensContribution","debounceService","_commandService","_notificationService","_codeLensCache","_localToDispose","_lenses","_oldCodeLensModels","_provideCodeLensDebounce","for","_resolveCodeLensesDebounce","salt","_resolveCodeLensesScheduler","_resolveCodeLensesInViewport","_onModelChange","_updateLensStyle","_styleClassName","hash","getId","_styleElement","createStyleSheet","isInShadowDOM","getContainerDomNode","_localDispose","_currentCodeLensModel","lineHeightFactor","fontSize","codeLensHeight","_getLayoutInfo","fontFamily","editorFontInfo","fontFamilyVar","fontFeaturesVar","newStyle","round","EDITOR_FONT_DEFAULTS","setProperty","fontFeatureSettings","changeViewZones","updateHeight","_getCodeLensModelPromise","_resolveCodeLensesPromise","cachedLenses","_renderCodeLensSymbols","registration","scheduler","t1","Date","now","put","newDelay","delay","_resolveCodeLensesInViewportSoon","toDisposable","decorationsAccessor","viewZonesAccessor","toDispose","lastLensLineNumber","getLineNumber","l","commit","onDidScrollChange","scrollTopChanged","scrollState","StableEditorScrollState","_disposeAllLenses","restore","onMouseDown","tagName","disposableTimeout","cachedLensesNow","decChangeAccessor","lastGroup","maxLineNumber","groups","layoutInfo","viewZoneAccessor","codeLensIndex","groupsIndex","symbolsLineNumber","codeLensLineNumber","updateCodeLensSymbols","toResolve","request","computeIfNecessary","resolvePromise","resolvedSymbols","updateCommands","ILanguageFeatureDebounceService","quickInputService","IQuickInputService","positionLineNumber","codelensController","items","pick","canPickMany","getColors","colors","reverse","provideDocumentColors","colorInfo","getColorPresentations","provideColorPresentations","colorProviderRegistry","colorProvider","rawCIs","ci","red","green","blue","alpha","presentations","ColorDecorationInjectedTextMarker","ColorDetector","languageFeatureDebounceService","_decorationsIds","_colorDatas","_colorDecoratorIds","_ruleFactory","DynamicCssRules","_colorDecorationClassRefs","_debounceInformation","RECOMPUTE_TIME","_isEnabled","onModelChanged","prevIsEnabled","removeAllDecorations","_timeoutTimer","_computePromise","languageId","getLanguageId","deprecatedConfig","colorDecorators","stop","beginCompute","sw","StopWatch","elapsed","colorInfos","updateDecorations","updateColorDecorators","colorDatas","decorations","colorData","rgba","RGBA","g","ref","createClassNameRef","before","content","noBreakWhitespace","inlineClassName","inlineClassNameAffectsLetterSpacing","attachedData","removeDecorations","getDecorationsInRange","ColorPickerModel","availableColorPresentations","presentationIndex","_onColorFlushed","onColorFlushed","_onDidChangeColor","onDidChangeColor","_onDidChangePresentation","onDidChangePresentation","originalColor","_color","_colorPresentations","colorPresentations","presentation","flushColor","originalText","ColorPickerHeader","themeService","pickedColorNode","setAttribute","colorBox","Color","getColorTheme","editorHoverBackground","CLICK","selectNextColorPresentation","toggle","isLighter","prepend","ColorPickerBody","pixelRatio","saturationBox","SaturationBox","onDidSaturationValueChange","opacityStrip","OpacityStrip","onDidOpacityChange","hueStrip","HueStrip","onDidHueChange","s","v","hsva","HSVA","h","_onDidChange","canvas","POINTER_DOWN","onPointerDown","monitor","Element","GlobalPointerMoveMonitor","origin","onDidChangePosition","offsetX","offsetY","startMonitoring","pointerId","pageX","pageY","pointerUpListener","POINTER_UP","stopMonitoring","paintSelection","offsetHeight","paint","saturatedColor","ctx","getContext","whiteGradient","createLinearGradient","addColorStop","blackGradient","rect","fillStyle","fill","isMonitoring","Strip","overlay","slider","updateSliderPosition","onDidChangeTop","opaque","background","ColorPickerWidget","PixelRatio","header","Widget","ColorHover","owner","forceShowAtRange","ColorHoverParticipant","hoverOrdinal","lineDecorations","AsyncIterableObject","_computeAsync","colorDetector","isColorDecoration","getColorData","_createColorHover","colorHover","guessColorPresentation","hoverParts","fragment","setColorPicker","updateEditorModel","textEdits","newRange","textEdit","trackedRange","_setTrackedRange","executeEdits","_getTrackedRange","forceMoveMarkers","setEndPosition","additionalTextEdits","updateColorPresentations","ColorContribution","mouseEvent","injectedText","hoverController","ModesHoverController","isColorPickerVisible","showContentHover","HoverParticipantRegistry","BlockCommentCommand","insertSpace","languageConfigurationService","_insertSpace","_usedEndToken","startToken","endToken","ops","startLineText","endLineText","startTokenIndex","lastIndexOf","endTokenIndex","substring","startLineAfterStartToken","endLineBeforeEndToken","charCodeAt","_createRemoveBlockCommentOperations","_createAddBlockCommentOperations","op","addTrackedEditOperation","tokenization","tokenizeIfCheap","getLanguageIdAtPosition","config","getLanguageConfiguration","comments","blockCommentStartToken","blockCommentEndToken","_createOperationsForBlockComment","inverseEditOperations","getInverseEditOperations","startTokenEditOperation","endTokenEditOperation","srcRange","deltaColumn","haystack","needle","offset","needleLength","codeA","codeB","res","EditOperation","LineCommentCommand","ignoreEmptyLines","ignoreFirstLine","_tabSize","_type","_selectionId","_deltaColumn","_moveEndPositionDown","_ignoreEmptyLines","_ignoreFirstLine","shouldRemoveComments","_createRemoveLineCommentsOperations","_normalizeInsertionPoint","_createAddLineCommentsOperations","cursorPosition","positionColumn","trackSelection","startTokenAllowedBeforeColumn","_attemptRemoveBlockComment","firstNonWhitespaceIndex","strings","_gatherPreflightData","supported","_executeLineComments","_executeBlockComment","getTrackedSelection","selectionStartLineNumber","selectionStartColumn","afterCommentStr","lineData","ignore","commentStrOffset","commentStr","lineCommentToken","commentStrLength","onlyWhitespaceLines","lineContentStartOffset","_haystackHasNeedleAtOffset","commentStrEndOffset","_gatherPreflightCommentStrings","_analyzeLines","currentVisibleColumn","isTab","columnSize","j","lenJ","minVisibleColumn","nextVisibleColumn","CommentLineAction","ILanguageConfigurationService","modelOptions","commentsOptions","prev","curr","ToggleCommentLineAction","AddLineCommentAction","RemoveLineCommentAction","BlockCommentAction","ContextMenuController","_menuService","_toDispose","_contextMenuIsBeingShownCount","onContextMenu","_onContextMenu","onMouseWheel","view","getContextViewElement","srcElement","shadowRoot","onKeyDown","keyCode","_showScrollbarContextMenu","posy","hasSelectionAtPosition","_getMenuActions","isSimpleWidget","_doShowContextMenu","menu","createMenu","addedItems","SubmenuItemAction","subActions","SubmenuAction","pop","oldHoverSetting","updateOptions","hover","isIOS","getActionViewItem","keybinding","_keybindingFor","ActionViewItem","isMenu","customActionViewItem","icon","wasCancelled","minimapOptions","lastId","createAction","checked","createEnumAction","configName","configuredValue","createRunner","updateValue","option","createSubmenuAction","renderCharacters","size","showSlider","IMenuService","ShowContextMenu","vscodeClipboardMime","CopyPasteController","_bulkEditService","_clipboardService","handleCopy","handlePaste","clipboardData","arePasteActionsEnabled","ranges","primarySelection","wasFromEmptySelection","getLineLength","documentPasteEditProvider","prepareDocumentPaste","dataTransfer","toVSDataTransfer","handle","generateUuid","setCopyMetadata","promise","results","_currentClipboardItem","dataTransferPromise","setData","rawMetadata","getData","stopImmediatePropagation","originalDocVersion","tokenSource","EditorStateCancellationTokenSource","Mimes","readResources","createStringDataTransferItem","UriList","pasteMimeTypes","DataTransfers","asFile","provideDocumentPasteEdits","performSnippetEdit","insertText","SnippetParser","snippet","additionalEdit","textDataTransfer","asString","CursorState","thisLen","equalsSelection","StackElement","cursorState","scrollTop","scrollLeft","CursorUndoRedoController","_isCursorUndoRedo","_undoStack","_redoStack","onDidChangeCursorSelection","oldSelections","oldModelVersionId","modelVersionId","prevState","getScrollTop","getScrollLeft","shift","_applyState","stackElement","setScrollPosition","CursorUndo","cursorUndo","CursorRedo","cursorRedo"],"sourceRoot":""}