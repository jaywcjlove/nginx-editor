{"version":3,"file":"static/js/monaco-editor-vendor.e8a66816.dd78d113.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/commandsQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/editorNavigationQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoLineQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/renameInputField.js","../node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/rename.js","../node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/bracketSelections.js","../node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/wordSelections.js","../node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/smartSelect.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetController2.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetParser.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetVariables.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetSession.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/resizable.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { stripIcons } from '../../../../base/common/iconLabels.js';\nimport { AbstractCommandsQuickAccessProvider } from '../../../../platform/quickinput/browser/commandsQuickAccess.js';\nexport class AbstractEditorCommandsQuickAccessProvider extends AbstractCommandsQuickAccessProvider {\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n        super(options, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n    }\n    getCodeEditorCommandPicks() {\n        const activeTextEditorControl = this.activeTextEditorControl;\n        if (!activeTextEditorControl) {\n            return [];\n        }\n        const editorCommandPicks = [];\n        for (const editorAction of activeTextEditorControl.getSupportedActions()) {\n            editorCommandPicks.push({\n                commandId: editorAction.id,\n                commandAlias: editorAction.alias,\n                label: stripIcons(editorAction.label) || editorAction.id,\n            });\n        }\n        return editorCommandPicks;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { once } from '../../../../base/common/functional.js';\nimport { DisposableStore, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { getCodeEditor, isDiffEditor } from '../../../browser/editorBrowser.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\n/**\n * A reusable quick access provider for the editor with support\n * for adding decorations for navigating in the currently active file\n * (for example \"Go to line\", \"Go to symbol\").\n */\nexport class AbstractEditorNavigationQuickAccessProvider {\n    constructor(options) {\n        this.options = options;\n        //#endregion\n        //#region Decorations Utils\n        this.rangeHighlightDecorationId = undefined;\n    }\n    //#region Provider methods\n    provide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // Apply options if any\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\n        // Disable filtering & sorting, we control the results\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n        // Provide based on current active editor\n        const pickerDisposable = disposables.add(new MutableDisposable());\n        pickerDisposable.value = this.doProvide(picker, token);\n        // Re-create whenever the active editor changes\n        disposables.add(this.onDidActiveTextEditorControlChange(() => {\n            // Clear old\n            pickerDisposable.value = undefined;\n            // Add new\n            pickerDisposable.value = this.doProvide(picker, token);\n        }));\n        return disposables;\n    }\n    doProvide(picker, token) {\n        const disposables = new DisposableStore();\n        // With text control\n        const editor = this.activeTextEditorControl;\n        if (editor && this.canProvideWithTextEditor(editor)) {\n            const context = { editor };\n            // Restore any view state if this picker was closed\n            // without actually going to a line\n            const codeEditor = getCodeEditor(editor);\n            if (codeEditor) {\n                // Remember view state and update it when the cursor position\n                // changes even later because it could be that the user has\n                // configured quick access to remain open when focus is lost and\n                // we always want to restore the current location.\n                let lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                disposables.add(codeEditor.onDidChangeCursorPosition(() => {\n                    lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                }));\n                context.restoreViewState = () => {\n                    if (lastKnownEditorViewState && editor === this.activeTextEditorControl) {\n                        editor.restoreViewState(lastKnownEditorViewState);\n                    }\n                };\n                disposables.add(once(token.onCancellationRequested)(() => { var _a; return (_a = context.restoreViewState) === null || _a === void 0 ? void 0 : _a.call(context); }));\n            }\n            // Clean up decorations on dispose\n            disposables.add(toDisposable(() => this.clearDecorations(editor)));\n            // Ask subclass for entries\n            disposables.add(this.provideWithTextEditor(context, picker, token));\n        }\n        // Without text control\n        else {\n            disposables.add(this.provideWithoutTextEditor(picker, token));\n        }\n        return disposables;\n    }\n    /**\n     * Subclasses to implement if they can operate on the text editor.\n     */\n    canProvideWithTextEditor(editor) {\n        return true;\n    }\n    gotoLocation({ editor }, options) {\n        editor.setSelection(options.range);\n        editor.revealRangeInCenter(options.range, 0 /* Smooth */);\n        if (!options.preserveFocus) {\n            editor.focus();\n        }\n    }\n    getModel(editor) {\n        var _a;\n        return isDiffEditor(editor) ?\n            (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.modified :\n            editor.getModel();\n    }\n    addDecorations(editor, range) {\n        editor.changeDecorations(changeAccessor => {\n            // Reset old decorations if any\n            const deleteDecorations = [];\n            if (this.rangeHighlightDecorationId) {\n                deleteDecorations.push(this.rangeHighlightDecorationId.overviewRulerDecorationId);\n                deleteDecorations.push(this.rangeHighlightDecorationId.rangeHighlightId);\n                this.rangeHighlightDecorationId = undefined;\n            }\n            // Add new decorations for the range\n            const newDecorations = [\n                // highlight the entire line on the range\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight',\n                        className: 'rangeHighlight',\n                        isWholeLine: true\n                    }\n                },\n                // also add overview ruler highlight\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight-overview',\n                        overviewRuler: {\n                            color: themeColorFromId(overviewRulerRangeHighlight),\n                            position: OverviewRulerLane.Full\n                        }\n                    }\n                }\n            ];\n            const [rangeHighlightId, overviewRulerDecorationId] = changeAccessor.deltaDecorations(deleteDecorations, newDecorations);\n            this.rangeHighlightDecorationId = { rangeHighlightId, overviewRulerDecorationId };\n        });\n    }\n    clearDecorations(editor) {\n        const rangeHighlightDecorationId = this.rangeHighlightDecorationId;\n        if (rangeHighlightDecorationId) {\n            editor.changeDecorations(changeAccessor => {\n                changeAccessor.deltaDecorations([\n                    rangeHighlightDecorationId.overviewRulerDecorationId,\n                    rangeHighlightDecorationId.rangeHighlightId\n                ], []);\n            });\n            this.rangeHighlightDecorationId = undefined;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { getCodeEditor } from '../../../browser/editorBrowser.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nexport class AbstractGotoLineQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor() {\n        super({ canAcceptInBackground: true });\n    }\n    provideWithoutTextEditor(picker) {\n        const label = localize('cannotRunGotoLine', \"Open a text editor first to go to a line.\");\n        picker.items = [{ label }];\n        picker.ariaLabel = label;\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto line once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item) {\n                if (!this.isValidLineNumber(editor, item.lineNumber)) {\n                    return;\n                }\n                this.gotoLocation(context, { range: this.toRange(item.lineNumber, item.column), keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // React to picker changes\n        const updatePickerAndEditor = () => {\n            const position = this.parsePosition(editor, picker.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length));\n            const label = this.getPickLabel(editor, position.lineNumber, position.column);\n            // Picker\n            picker.items = [{\n                    lineNumber: position.lineNumber,\n                    column: position.column,\n                    label\n                }];\n            // ARIA Label\n            picker.ariaLabel = label;\n            // Clear decorations for invalid range\n            if (!this.isValidLineNumber(editor, position.lineNumber)) {\n                this.clearDecorations(editor);\n                return;\n            }\n            // Reveal\n            const range = this.toRange(position.lineNumber, position.column);\n            editor.revealRangeInCenter(range, 0 /* Smooth */);\n            // Decorate\n            this.addDecorations(editor, range);\n        };\n        updatePickerAndEditor();\n        disposables.add(picker.onDidChangeValue(() => updatePickerAndEditor()));\n        // Adjust line number visibility as needed\n        const codeEditor = getCodeEditor(editor);\n        if (codeEditor) {\n            const options = codeEditor.getOptions();\n            const lineNumbers = options.get(60 /* lineNumbers */);\n            if (lineNumbers.renderType === 2 /* Relative */) {\n                codeEditor.updateOptions({ lineNumbers: 'on' });\n                disposables.add(toDisposable(() => codeEditor.updateOptions({ lineNumbers: 'relative' })));\n            }\n        }\n        return disposables;\n    }\n    toRange(lineNumber = 1, column = 1) {\n        return {\n            startLineNumber: lineNumber,\n            startColumn: column,\n            endLineNumber: lineNumber,\n            endColumn: column\n        };\n    }\n    parsePosition(editor, value) {\n        // Support line-col formats of `line,col`, `line:col`, `line#col`\n        const numbers = value.split(/,|:|#/).map(part => parseInt(part, 10)).filter(part => !isNaN(part));\n        const endLine = this.lineCount(editor) + 1;\n        return {\n            lineNumber: numbers[0] > 0 ? numbers[0] : endLine + numbers[0],\n            column: numbers[1]\n        };\n    }\n    getPickLabel(editor, lineNumber, column) {\n        // Location valid: indicate this as picker label\n        if (this.isValidLineNumber(editor, lineNumber)) {\n            if (this.isValidColumn(editor, lineNumber, column)) {\n                return localize('gotoLineColumnLabel', \"Go to line {0} and character {1}.\", lineNumber, column);\n            }\n            return localize('gotoLineLabel', \"Go to line {0}.\", lineNumber);\n        }\n        // Location invalid: show generic label\n        const position = editor.getPosition() || { lineNumber: 1, column: 1 };\n        const lineCount = this.lineCount(editor);\n        if (lineCount > 1) {\n            return localize('gotoLineLabelEmptyWithLimit', \"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.\", position.lineNumber, position.column, lineCount);\n        }\n        return localize('gotoLineLabelEmpty', \"Current Line: {0}, Character: {1}. Type a line number to navigate to.\", position.lineNumber, position.column);\n    }\n    isValidLineNumber(editor, lineNumber) {\n        if (!lineNumber || typeof lineNumber !== 'number') {\n            return false;\n        }\n        return lineNumber > 0 && lineNumber <= this.lineCount(editor);\n    }\n    isValidColumn(editor, lineNumber, column) {\n        if (!column || typeof column !== 'number') {\n            return false;\n        }\n        const model = this.getModel(editor);\n        if (!model) {\n            return false;\n        }\n        const positionCandidate = { lineNumber, column };\n        return model.validatePosition(positionCandidate).equals(positionCandidate);\n    }\n    lineCount(editor) {\n        var _a, _b;\n        return (_b = (_a = this.getModel(editor)) === null || _a === void 0 ? void 0 : _a.getLineCount()) !== null && _b !== void 0 ? _b : 0;\n    }\n}\nAbstractGotoLineQuickAccessProvider.PREFIX = ':';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { pieceToQuery, prepareQuery, scoreFuzzy2 } from '../../../../base/common/fuzzyScorer.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { format, trim } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SymbolKinds } from '../../../common/languages.js';\nimport { IOutlineModelService } from '../../documentSymbols/browser/outlineModel.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet AbstractGotoSymbolQuickAccessProvider = class AbstractGotoSymbolQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor(_languageFeaturesService, _outlineModelService, options = Object.create(null)) {\n        super(options);\n        this._languageFeaturesService = _languageFeaturesService;\n        this._outlineModelService = _outlineModelService;\n        this.options = options;\n        this.options.canAcceptInBackground = true;\n    }\n    provideWithoutTextEditor(picker) {\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutEditor', \"To go to a symbol, first open a text editor with symbol information.\"));\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const model = this.getModel(editor);\n        if (!model) {\n            return Disposable.None;\n        }\n        // Provide symbols from model if available in registry\n        if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n            return this.doProvideWithEditorSymbols(context, model, picker, token);\n        }\n        // Otherwise show an entry for a model without registry\n        // But give a chance to resolve the symbols at a later\n        // point if possible\n        return this.doProvideWithoutEditorSymbols(context, model, picker, token);\n    }\n    doProvideWithoutEditorSymbols(context, model, picker, token) {\n        const disposables = new DisposableStore();\n        // Generic pick for not having any symbol information\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutSymbolProvider', \"The active text editor does not provide symbol information.\"));\n        // Wait for changes to the registry and see if eventually\n        // we do get symbols. This can happen if the picker is opened\n        // very early after the model has loaded but before the\n        // language registry is ready.\n        // https://github.com/microsoft/vscode/issues/70607\n        (() => __awaiter(this, void 0, void 0, function* () {\n            const result = yield this.waitForLanguageSymbolRegistry(model, disposables);\n            if (!result || token.isCancellationRequested) {\n                return;\n            }\n            disposables.add(this.doProvideWithEditorSymbols(context, model, picker, token));\n        }))();\n        return disposables;\n    }\n    provideLabelPick(picker, label) {\n        picker.items = [{ label, index: 0, kind: 14 /* String */ }];\n        picker.ariaLabel = label;\n    }\n    waitForLanguageSymbolRegistry(model, disposables) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                return true;\n            }\n            const symbolProviderRegistryPromise = new DeferredPromise();\n            // Resolve promise when registry knows model\n            const symbolProviderListener = disposables.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => {\n                if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                    symbolProviderListener.dispose();\n                    symbolProviderRegistryPromise.complete(true);\n                }\n            }));\n            // Resolve promise when we get disposed too\n            disposables.add(toDisposable(() => symbolProviderRegistryPromise.complete(false)));\n            return symbolProviderRegistryPromise.p;\n        });\n    }\n    doProvideWithEditorSymbols(context, model, picker, token) {\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto symbol once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // Goto symbol side by side if enabled\n        disposables.add(picker.onDidTriggerItemButton(({ item }) => {\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, forceSideBySide: true });\n                picker.hide();\n            }\n        }));\n        // Resolve symbols from document once and reuse this\n        // request for all filtering and typing then on\n        const symbolsPromise = this.getDocumentSymbols(model, token);\n        // Set initial picks and update on type\n        let picksCts = undefined;\n        const updatePickerItems = () => __awaiter(this, void 0, void 0, function* () {\n            // Cancel any previous ask for picks and busy\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\n            picker.busy = false;\n            // Create new cancellation source for this run\n            picksCts = new CancellationTokenSource(token);\n            // Collect symbol picks\n            picker.busy = true;\n            try {\n                const query = prepareQuery(picker.value.substr(AbstractGotoSymbolQuickAccessProvider.PREFIX.length).trim());\n                const items = yield this.doGetSymbolPicks(symbolsPromise, query, undefined, picksCts.token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (items.length > 0) {\n                    picker.items = items;\n                }\n                else {\n                    if (query.original.length > 0) {\n                        this.provideLabelPick(picker, localize('noMatchingSymbolResults', \"No matching editor symbols\"));\n                    }\n                    else {\n                        this.provideLabelPick(picker, localize('noSymbolResults', \"No editor symbols\"));\n                    }\n                }\n            }\n            finally {\n                if (!token.isCancellationRequested) {\n                    picker.busy = false;\n                }\n            }\n        });\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems()));\n        updatePickerItems();\n        // Reveal and decorate when active item changes\n        // However, ignore the very first event so that\n        // opening the picker is not immediately revealing\n        // and decorating the first entry.\n        let ignoreFirstActiveEvent = true;\n        disposables.add(picker.onDidChangeActive(() => {\n            const [item] = picker.activeItems;\n            if (item && item.range) {\n                if (ignoreFirstActiveEvent) {\n                    ignoreFirstActiveEvent = false;\n                    return;\n                }\n                // Reveal\n                editor.revealRangeInCenter(item.range.selection, 0 /* Smooth */);\n                // Decorate\n                this.addDecorations(editor, item.range.decoration);\n            }\n        }));\n        return disposables;\n    }\n    doGetSymbolPicks(symbolsPromise, query, options, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const symbols = yield symbolsPromise;\n            if (token.isCancellationRequested) {\n                return [];\n            }\n            const filterBySymbolKind = query.original.indexOf(AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX) === 0;\n            const filterPos = filterBySymbolKind ? 1 : 0;\n            // Split between symbol and container query\n            let symbolQuery;\n            let containerQuery;\n            if (query.values && query.values.length > 1) {\n                symbolQuery = pieceToQuery(query.values[0]); // symbol: only match on first part\n                containerQuery = pieceToQuery(query.values.slice(1)); // container: match on all but first parts\n            }\n            else {\n                symbolQuery = query;\n            }\n            // Convert to symbol picks and apply filtering\n            const filteredSymbolPicks = [];\n            for (let index = 0; index < symbols.length; index++) {\n                const symbol = symbols[index];\n                const symbolLabel = trim(symbol.name);\n                const symbolLabelWithIcon = `$(${SymbolKinds.toIcon(symbol.kind).id}) ${symbolLabel}`;\n                const symbolLabelIconOffset = symbolLabelWithIcon.length - symbolLabel.length;\n                let containerLabel = symbol.containerName;\n                if (options === null || options === void 0 ? void 0 : options.extraContainerLabel) {\n                    if (containerLabel) {\n                        containerLabel = `${options.extraContainerLabel} • ${containerLabel}`;\n                    }\n                    else {\n                        containerLabel = options.extraContainerLabel;\n                    }\n                }\n                let symbolScore = undefined;\n                let symbolMatches = undefined;\n                let containerScore = undefined;\n                let containerMatches = undefined;\n                if (query.original.length > filterPos) {\n                    // First: try to score on the entire query, it is possible that\n                    // the symbol matches perfectly (e.g. searching for \"change log\"\n                    // can be a match on a markdown symbol \"change log\"). In that\n                    // case we want to skip the container query altogether.\n                    let skipContainerQuery = false;\n                    if (symbolQuery !== query) {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, Object.assign(Object.assign({}, query), { values: undefined /* disable multi-query support */ }), filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore === 'number') {\n                            skipContainerQuery = true; // since we consumed the query, skip any container matching\n                        }\n                    }\n                    // Otherwise: score on the symbol query and match on the container later\n                    if (typeof symbolScore !== 'number') {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, symbolQuery, filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore !== 'number') {\n                            continue;\n                        }\n                    }\n                    // Score by container if specified\n                    if (!skipContainerQuery && containerQuery) {\n                        if (containerLabel && containerQuery.original.length > 0) {\n                            [containerScore, containerMatches] = scoreFuzzy2(containerLabel, containerQuery);\n                        }\n                        if (typeof containerScore !== 'number') {\n                            continue;\n                        }\n                        if (typeof symbolScore === 'number') {\n                            symbolScore += containerScore; // boost symbolScore by containerScore\n                        }\n                    }\n                }\n                const deprecated = symbol.tags && symbol.tags.indexOf(1 /* Deprecated */) >= 0;\n                filteredSymbolPicks.push({\n                    index,\n                    kind: symbol.kind,\n                    score: symbolScore,\n                    label: symbolLabelWithIcon,\n                    ariaLabel: symbolLabel,\n                    description: containerLabel,\n                    highlights: deprecated ? undefined : {\n                        label: symbolMatches,\n                        description: containerMatches\n                    },\n                    range: {\n                        selection: Range.collapseToStart(symbol.selectionRange),\n                        decoration: symbol.range\n                    },\n                    strikethrough: deprecated,\n                    buttons: (() => {\n                        var _a, _b;\n                        const openSideBySideDirection = ((_a = this.options) === null || _a === void 0 ? void 0 : _a.openSideBySideDirection) ? (_b = this.options) === null || _b === void 0 ? void 0 : _b.openSideBySideDirection() : undefined;\n                        if (!openSideBySideDirection) {\n                            return undefined;\n                        }\n                        return [\n                            {\n                                iconClass: openSideBySideDirection === 'right' ? Codicon.splitHorizontal.classNames : Codicon.splitVertical.classNames,\n                                tooltip: openSideBySideDirection === 'right' ? localize('openToSide', \"Open to the Side\") : localize('openToBottom', \"Open to the Bottom\")\n                            }\n                        ];\n                    })()\n                });\n            }\n            // Sort by score\n            const sortedFilteredSymbolPicks = filteredSymbolPicks.sort((symbolA, symbolB) => filterBySymbolKind ?\n                this.compareByKindAndScore(symbolA, symbolB) :\n                this.compareByScore(symbolA, symbolB));\n            // Add separator for types\n            // - @  only total number of symbols\n            // - @: grouped by symbol kind\n            let symbolPicks = [];\n            if (filterBySymbolKind) {\n                let lastSymbolKind = undefined;\n                let lastSeparator = undefined;\n                let lastSymbolKindCounter = 0;\n                function updateLastSeparatorLabel() {\n                    if (lastSeparator && typeof lastSymbolKind === 'number' && lastSymbolKindCounter > 0) {\n                        lastSeparator.label = format(NLS_SYMBOL_KIND_CACHE[lastSymbolKind] || FALLBACK_NLS_SYMBOL_KIND, lastSymbolKindCounter);\n                    }\n                }\n                for (const symbolPick of sortedFilteredSymbolPicks) {\n                    // Found new kind\n                    if (lastSymbolKind !== symbolPick.kind) {\n                        // Update last separator with number of symbols we found for kind\n                        updateLastSeparatorLabel();\n                        lastSymbolKind = symbolPick.kind;\n                        lastSymbolKindCounter = 1;\n                        // Add new separator for new kind\n                        lastSeparator = { type: 'separator' };\n                        symbolPicks.push(lastSeparator);\n                    }\n                    // Existing kind, keep counting\n                    else {\n                        lastSymbolKindCounter++;\n                    }\n                    // Add to final result\n                    symbolPicks.push(symbolPick);\n                }\n                // Update last separator with number of symbols we found for kind\n                updateLastSeparatorLabel();\n            }\n            else if (sortedFilteredSymbolPicks.length > 0) {\n                symbolPicks = [\n                    { label: localize('symbols', \"symbols ({0})\", filteredSymbolPicks.length), type: 'separator' },\n                    ...sortedFilteredSymbolPicks\n                ];\n            }\n            return symbolPicks;\n        });\n    }\n    compareByScore(symbolA, symbolB) {\n        if (typeof symbolA.score !== 'number' && typeof symbolB.score === 'number') {\n            return 1;\n        }\n        else if (typeof symbolA.score === 'number' && typeof symbolB.score !== 'number') {\n            return -1;\n        }\n        if (typeof symbolA.score === 'number' && typeof symbolB.score === 'number') {\n            if (symbolA.score > symbolB.score) {\n                return -1;\n            }\n            else if (symbolA.score < symbolB.score) {\n                return 1;\n            }\n        }\n        if (symbolA.index < symbolB.index) {\n            return -1;\n        }\n        else if (symbolA.index > symbolB.index) {\n            return 1;\n        }\n        return 0;\n    }\n    compareByKindAndScore(symbolA, symbolB) {\n        const kindA = NLS_SYMBOL_KIND_CACHE[symbolA.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        const kindB = NLS_SYMBOL_KIND_CACHE[symbolB.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        // Sort by type first if scoped search\n        const result = kindA.localeCompare(kindB);\n        if (result === 0) {\n            return this.compareByScore(symbolA, symbolB);\n        }\n        return result;\n    }\n    getDocumentSymbols(document, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = yield this._outlineModelService.getOrCreate(document, token);\n            return token.isCancellationRequested ? [] : model.asListOfDocumentSymbols();\n        });\n    }\n};\nAbstractGotoSymbolQuickAccessProvider.PREFIX = '@';\nAbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX = ':';\nAbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY = `${AbstractGotoSymbolQuickAccessProvider.PREFIX}${AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX}`;\nAbstractGotoSymbolQuickAccessProvider = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, IOutlineModelService)\n], AbstractGotoSymbolQuickAccessProvider);\nexport { AbstractGotoSymbolQuickAccessProvider };\n// #region NLS Helpers\nconst FALLBACK_NLS_SYMBOL_KIND = localize('property', \"properties ({0})\");\nconst NLS_SYMBOL_KIND_CACHE = {\n    [5 /* Method */]: localize('method', \"methods ({0})\"),\n    [11 /* Function */]: localize('function', \"functions ({0})\"),\n    [8 /* Constructor */]: localize('_constructor', \"constructors ({0})\"),\n    [12 /* Variable */]: localize('variable', \"variables ({0})\"),\n    [4 /* Class */]: localize('class', \"classes ({0})\"),\n    [22 /* Struct */]: localize('struct', \"structs ({0})\"),\n    [23 /* Event */]: localize('event', \"events ({0})\"),\n    [24 /* Operator */]: localize('operator', \"operators ({0})\"),\n    [10 /* Interface */]: localize('interface', \"interfaces ({0})\"),\n    [2 /* Namespace */]: localize('namespace', \"namespaces ({0})\"),\n    [3 /* Package */]: localize('package', \"packages ({0})\"),\n    [25 /* TypeParameter */]: localize('typeParameter', \"type parameters ({0})\"),\n    [1 /* Module */]: localize('modules', \"modules ({0})\"),\n    [6 /* Property */]: localize('property', \"properties ({0})\"),\n    [9 /* Enum */]: localize('enum', \"enumerations ({0})\"),\n    [21 /* EnumMember */]: localize('enumMember', \"enumeration members ({0})\"),\n    [14 /* String */]: localize('string', \"strings ({0})\"),\n    [0 /* File */]: localize('file', \"files ({0})\"),\n    [17 /* Array */]: localize('array', \"arrays ({0})\"),\n    [15 /* Number */]: localize('number', \"numbers ({0})\"),\n    [16 /* Boolean */]: localize('boolean', \"booleans ({0})\"),\n    [18 /* Object */]: localize('object', \"objects ({0})\"),\n    [19 /* Key */]: localize('key', \"keys ({0})\"),\n    [7 /* Field */]: localize('field', \"fields ({0})\"),\n    [13 /* Constant */]: localize('constant', \"constants ({0})\")\n};\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './renameInputField.css';\nimport { Position } from '../../../common/core/position.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nlet RenameInputField = class RenameInputField {\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService) {\n        this._editor = _editor;\n        this._acceptKeybindings = _acceptKeybindings;\n        this._themeService = _themeService;\n        this._keybindingService = _keybindingService;\n        this._disposables = new DisposableStore();\n        this.allowEditorOverflow = true;\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._editor.addContentWidget(this);\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(44 /* fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return '__renameInputWidget';\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'monaco-editor rename-box';\n            this._input = document.createElement('input');\n            this._input.className = 'rename-input';\n            this._input.type = 'text';\n            this._input.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n            this._domNode.appendChild(this._input);\n            this._label = document.createElement('div');\n            this._label.className = 'rename-label';\n            this._domNode.appendChild(this._label);\n            const updateLabel = () => {\n                var _a, _b;\n                const [accept, preview] = this._acceptKeybindings;\n                this._keybindingService.lookupKeybinding(accept);\n                this._label.innerText = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", (_a = this._keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this._keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n            };\n            updateLabel();\n            this._disposables.add(this._keybindingService.onDidUpdateKeybindings(updateLabel));\n            this._updateFont();\n            this._updateStyles(this._themeService.getColorTheme());\n        }\n        return this._domNode;\n    }\n    _updateStyles(theme) {\n        var _a, _b, _c, _d;\n        if (!this._input || !this._domNode) {\n            return;\n        }\n        const widgetShadowColor = theme.getColor(widgetShadow);\n        this._domNode.style.backgroundColor = String((_a = theme.getColor(editorWidgetBackground)) !== null && _a !== void 0 ? _a : '');\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n        this._domNode.style.color = String((_b = theme.getColor(inputForeground)) !== null && _b !== void 0 ? _b : '');\n        this._input.style.backgroundColor = String((_c = theme.getColor(inputBackground)) !== null && _c !== void 0 ? _c : '');\n        // this._input.style.color = String(theme.getColor(inputForeground) ?? '');\n        const border = theme.getColor(inputBorder);\n        this._input.style.borderWidth = border ? '1px' : '0px';\n        this._input.style.borderStyle = border ? 'solid' : 'none';\n        this._input.style.borderColor = (_d = border === null || border === void 0 ? void 0 : border.toString()) !== null && _d !== void 0 ? _d : 'none';\n    }\n    _updateFont() {\n        if (!this._input || !this._label) {\n            return;\n        }\n        const fontInfo = this._editor.getOption(44 /* fontInfo */);\n        this._input.style.fontFamily = fontInfo.fontFamily;\n        this._input.style.fontWeight = fontInfo.fontWeight;\n        this._input.style.fontSize = `${fontInfo.fontSize}px`;\n        this._label.style.fontSize = `${fontInfo.fontSize * 0.8}px`;\n    }\n    getPosition() {\n        if (!this._visible) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [2 /* BELOW */, 1 /* ABOVE */]\n        };\n    }\n    afterRender(position) {\n        if (!position) {\n            // cancel rename when input widget isn't rendered anymore\n            this.cancelInput(true);\n        }\n    }\n    acceptInput(wantsPreview) {\n        if (this._currentAcceptInput) {\n            this._currentAcceptInput(wantsPreview);\n        }\n    }\n    cancelInput(focusEditor) {\n        if (this._currentCancelInput) {\n            this._currentCancelInput(focusEditor);\n        }\n    }\n    getInput(where, value, selectionStart, selectionEnd, supportPreview, token) {\n        this._domNode.classList.toggle('preview', supportPreview);\n        this._position = new Position(where.startLineNumber, where.startColumn);\n        this._input.value = value;\n        this._input.setAttribute('selectionStart', selectionStart.toString());\n        this._input.setAttribute('selectionEnd', selectionEnd.toString());\n        this._input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20);\n        const disposeOnDone = new DisposableStore();\n        return new Promise(resolve => {\n            this._currentCancelInput = (focusEditor) => {\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve(focusEditor);\n                return true;\n            };\n            this._currentAcceptInput = (wantsPreview) => {\n                if (this._input.value.trim().length === 0 || this._input.value === value) {\n                    // empty or whitespace only or not changed\n                    this.cancelInput(true);\n                    return;\n                }\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve({\n                    newName: this._input.value,\n                    wantsPreview: supportPreview && wantsPreview\n                });\n            };\n            disposeOnDone.add(token.onCancellationRequested(() => this.cancelInput(true)));\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => this.cancelInput(false)));\n            this._show();\n        }).finally(() => {\n            disposeOnDone.dispose();\n            this._hide();\n        });\n    }\n    _show() {\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* Smooth */);\n        this._visible = true;\n        this._visibleContextKey.set(true);\n        this._editor.layoutContentWidget(this);\n        setTimeout(() => {\n            this._input.focus();\n            this._input.setSelectionRange(parseInt(this._input.getAttribute('selectionStart')), parseInt(this._input.getAttribute('selectionEnd')));\n        }, 100);\n    }\n    _hide() {\n        this._visible = false;\n        this._visibleContextKey.reset();\n        this._editor.layoutContentWidget(this);\n    }\n};\nRenameInputField = __decorate([\n    __param(2, IThemeService),\n    __param(3, IKeybindingService),\n    __param(4, IContextKeyService)\n], RenameInputField);\nexport { RenameInputField };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { IdleValue, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ITextResourceConfigurationService } from '../../../common/services/textResourceConfiguration.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameInputField } from './renameInputField.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nclass RenameSkeleton {\n    constructor(model, position, registry) {\n        this.model = model;\n        this.position = position;\n        this._providerRenameIdx = 0;\n        this._providers = registry.ordered(model);\n    }\n    hasProvider() {\n        return this._providers.length > 0;\n    }\n    resolveRenameLocation(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const rejects = [];\n            for (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n                const provider = this._providers[this._providerRenameIdx];\n                if (!provider.resolveRenameLocation) {\n                    break;\n                }\n                let res = yield provider.resolveRenameLocation(this.model, this.position, token);\n                if (!res) {\n                    continue;\n                }\n                if (res.rejectReason) {\n                    rejects.push(res.rejectReason);\n                    continue;\n                }\n                return res;\n            }\n            const word = this.model.getWordAtPosition(this.position);\n            if (!word) {\n                return {\n                    range: Range.fromPositions(this.position),\n                    text: '',\n                    rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n                };\n            }\n            return {\n                range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n                text: word.word,\n                rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n            };\n        });\n    }\n    provideRenameEdits(newName, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n        });\n    }\n    _provideRenameEdits(newName, i, rejects, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const provider = this._providers[i];\n            if (!provider) {\n                return {\n                    edits: [],\n                    rejectReason: rejects.join('\\n')\n                };\n            }\n            const result = yield provider.provideRenameEdits(this.model, this.position, newName, token);\n            if (!result) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n            }\n            else if (result.rejectReason) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n            }\n            return result;\n        });\n    }\n}\nexport function rename(registry, model, position, newName) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const skeleton = new RenameSkeleton(model, position, registry);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            return { edits: [], rejectReason: loc.rejectReason };\n        }\n        return skeleton.provideRenameEdits(newName, CancellationToken.None);\n    });\n}\n// ---  register actions and commands\nlet RenameController = class RenameController {\n    constructor(editor, _instaService, _notificationService, _bulkEditService, _progressService, _logService, _configService, _languageFeaturesService) {\n        this.editor = editor;\n        this._instaService = _instaService;\n        this._notificationService = _notificationService;\n        this._bulkEditService = _bulkEditService;\n        this._progressService = _progressService;\n        this._logService = _logService;\n        this._configService = _configService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._dispoableStore = new DisposableStore();\n        this._cts = new CancellationTokenSource();\n        this._renameInputField = this._dispoableStore.add(new IdleValue(() => this._dispoableStore.add(this._instaService.createInstance(RenameInputField, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']))));\n    }\n    static get(editor) {\n        return editor.getContribution(RenameController.ID);\n    }\n    dispose() {\n        this._dispoableStore.dispose();\n        this._cts.dispose(true);\n    }\n    run() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            this._cts.dispose(true);\n            if (!this.editor.hasModel()) {\n                return undefined;\n            }\n            const position = this.editor.getPosition();\n            const skeleton = new RenameSkeleton(this.editor.getModel(), position, this._languageFeaturesService.renameProvider);\n            if (!skeleton.hasProvider()) {\n                return undefined;\n            }\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* Position */ | 1 /* Value */);\n            // resolve rename location\n            let loc;\n            try {\n                const resolveLocationOperation = skeleton.resolveRenameLocation(this._cts.token);\n                this._progressService.showWhile(resolveLocationOperation, 250);\n                loc = yield resolveLocationOperation;\n            }\n            catch (e) {\n                (_a = MessageController.get(this.editor)) === null || _a === void 0 ? void 0 : _a.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n                return undefined;\n            }\n            if (!loc) {\n                return undefined;\n            }\n            if (loc.rejectReason) {\n                (_b = MessageController.get(this.editor)) === null || _b === void 0 ? void 0 : _b.showMessage(loc.rejectReason, position);\n                return undefined;\n            }\n            if (this._cts.token.isCancellationRequested) {\n                return undefined;\n            }\n            this._cts.dispose();\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* Position */ | 1 /* Value */, loc.range);\n            // do rename at location\n            let selection = this.editor.getSelection();\n            let selectionStart = 0;\n            let selectionEnd = loc.text.length;\n            if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(loc.range, selection)) {\n                selectionStart = Math.max(0, selection.startColumn - loc.range.startColumn);\n                selectionEnd = Math.min(loc.range.endColumn, selection.endColumn) - loc.range.startColumn;\n            }\n            const supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue(this.editor.getModel().uri, 'editor.rename.enablePreview');\n            const inputFieldResult = yield this._renameInputField.value.getInput(loc.range, loc.text, selectionStart, selectionEnd, supportPreview, this._cts.token);\n            // no result, only hint to focus the editor or not\n            if (typeof inputFieldResult === 'boolean') {\n                if (inputFieldResult) {\n                    this.editor.focus();\n                }\n                return undefined;\n            }\n            this.editor.focus();\n            const renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, this._cts.token), this._cts.token).then((renameResult) => __awaiter(this, void 0, void 0, function* () {\n                if (!renameResult || !this.editor.hasModel()) {\n                    return;\n                }\n                if (renameResult.rejectReason) {\n                    this._notificationService.info(renameResult.rejectReason);\n                    return;\n                }\n                // collapse selection to active end\n                this.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\n                this._bulkEditService.apply(ResourceEdit.convert(renameResult), {\n                    editor: this.editor,\n                    showPreview: inputFieldResult.wantsPreview,\n                    label: nls.localize('label', \"Renaming '{0}'\", loc === null || loc === void 0 ? void 0 : loc.text),\n                    quotableLabel: nls.localize('quotableLabel', \"Renaming {0}\", loc === null || loc === void 0 ? void 0 : loc.text),\n                }).then(result => {\n                    if (result.ariaSummary) {\n                        alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, inputFieldResult.newName, result.ariaSummary));\n                    }\n                }).catch(err => {\n                    this._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n                    this._logService.error(err);\n                });\n            }), err => {\n                this._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n                this._logService.error(err);\n            });\n            this._progressService.showWhile(renameOperation, 250);\n            return renameOperation;\n        });\n    }\n    acceptRenameInput(wantsPreview) {\n        this._renameInputField.value.acceptInput(wantsPreview);\n    }\n    cancelRenameInput() {\n        this._renameInputField.value.cancelInput(true);\n    }\n};\nRenameController.ID = 'editor.contrib.renameController';\nRenameController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, INotificationService),\n    __param(3, IBulkEditService),\n    __param(4, IEditorProgressService),\n    __param(5, ILogService),\n    __param(6, ITextResourceConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], RenameController);\n// ---- action implementation\nexport class RenameAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.rename',\n            label: nls.localize('rename.label', \"Rename Symbol\"),\n            alias: 'Rename Symbol',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 60 /* F2 */,\n                weight: 100 /* EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.1\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(accessor, editor) {\n        const controller = RenameController.get(editor);\n        if (controller) {\n            return controller.run();\n        }\n        return Promise.resolve();\n    }\n}\nregisterEditorContribution(RenameController.ID, RenameController);\nregisterEditorAction(RenameAction);\nconst RenameCommand = EditorCommand.bindToContribution(RenameController.get);\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.acceptRenameInput(false),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 3 /* Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInputWithPreview',\n    precondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n    handler: x => x.acceptRenameInput(true),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024 /* Shift */ + 3 /* Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'cancelRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.cancelRenameInput(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\n// ---- api bridge command\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (accessor, model, position, ...args) {\n    const [newName] = args;\n    assertType(typeof newName === 'string');\n    const { renameProvider } = accessor.get(ILanguageFeaturesService);\n    return rename(renameProvider, model, position, newName);\n});\nregisterModelAndPositionCommand('_executePrepareRename', function (accessor, model, position) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { renameProvider } = accessor.get(ILanguageFeaturesService);\n        const skeleton = new RenameSkeleton(model, position, renameProvider);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            throw new Error(loc.rejectReason);\n        }\n        return loc;\n    });\n});\n//todo@jrieken use editor options world\nRegistry.as(Extensions.Configuration).registerConfiguration({\n    id: 'editor',\n    properties: {\n        'editor.rename.enablePreview': {\n            scope: 5 /* LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n            default: true,\n            type: 'boolean'\n        }\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport class BracketSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = [];\n            for (const position of positions) {\n                const bucket = [];\n                result.push(bucket);\n                const ranges = new Map();\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsRightYield(resolve, 0, model, position, ranges));\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsLeftYield(resolve, 0, model, position, ranges, bucket));\n            }\n            return result;\n        });\n    }\n    static _bracketsRightYield(resolve, round, model, pos, ranges) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            let bracket = model.bracketPairs.findNextBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            let d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsRightYield(resolve, round + 1, model, pos, ranges));\n                break;\n            }\n            const key = bracket.close[0];\n            if (bracket.isOpen) {\n                // wait for closing\n                let val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                // process closing\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    let list = ranges.get(key);\n                    if (!list) {\n                        list = new LinkedList();\n                        ranges.set(key, list);\n                    }\n                    list.push(bracket.range);\n                }\n            }\n            pos = bracket.range.getEndPosition();\n        }\n    }\n    static _bracketsLeftYield(resolve, round, model, pos, ranges, bucket) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds && ranges.size === 0) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            let bracket = model.bracketPairs.findPrevBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            let d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsLeftYield(resolve, round + 1, model, pos, ranges, bucket));\n                break;\n            }\n            const key = bracket.close[0];\n            if (!bracket.isOpen) {\n                // wait for opening\n                let val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                // opening\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    let list = ranges.get(key);\n                    if (list) {\n                        let closing = list.shift();\n                        if (list.size === 0) {\n                            ranges.delete(key);\n                        }\n                        const innerBracket = Range.fromPositions(bracket.range.getEndPosition(), closing.getStartPosition());\n                        const outerBracket = Range.fromPositions(bracket.range.getStartPosition(), closing.getEndPosition());\n                        bucket.push({ range: innerBracket });\n                        bucket.push({ range: outerBracket });\n                        BracketSelectionRangeProvider._addBracketLeading(model, outerBracket, bucket);\n                    }\n                }\n            }\n            pos = bracket.range.getStartPosition();\n        }\n    }\n    static _addBracketLeading(model, bracket, bucket) {\n        if (bracket.startLineNumber === bracket.endLineNumber) {\n            return;\n        }\n        // xxxxxxxx {\n        //\n        // }\n        const startLine = bracket.startLineNumber;\n        const column = model.getLineFirstNonWhitespaceColumn(startLine);\n        if (column !== 0 && column !== bracket.startColumn) {\n            bucket.push({ range: Range.fromPositions(new Position(startLine, column), bracket.getEndPosition()) });\n            bucket.push({ range: Range.fromPositions(new Position(startLine, 1), bracket.getEndPosition()) });\n        }\n        // xxxxxxxx\n        // {\n        //\n        // }\n        const aboveLine = startLine - 1;\n        if (aboveLine > 0) {\n            const column = model.getLineFirstNonWhitespaceColumn(aboveLine);\n            if (column === bracket.startColumn && column !== model.getLineLastNonWhitespaceColumn(aboveLine)) {\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, column), bracket.getEndPosition()) });\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, 1), bracket.getEndPosition()) });\n            }\n        }\n    }\n}\nBracketSelectionRangeProvider._maxDuration = 30;\nBracketSelectionRangeProvider._maxRounds = 2;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isLowerAsciiLetter, isUpperAsciiLetter } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nexport class WordSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        const result = [];\n        for (const position of positions) {\n            const bucket = [];\n            result.push(bucket);\n            this._addInWordRanges(bucket, model, position);\n            this._addWordRanges(bucket, model, position);\n            this._addWhitespaceLine(bucket, model, position);\n            bucket.push({ range: model.getFullModelRange() });\n        }\n        return result;\n    }\n    _addInWordRanges(bucket, model, pos) {\n        const obj = model.getWordAtPosition(pos);\n        if (!obj) {\n            return;\n        }\n        let { word, startColumn } = obj;\n        let offset = pos.column - startColumn;\n        let start = offset;\n        let end = offset;\n        let lastCh = 0;\n        // LEFT anchor (start)\n        for (; start >= 0; start--) {\n            let ch = word.charCodeAt(start);\n            if ((start !== offset) && (ch === 95 /* Underline */ || ch === 45 /* Dash */)) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            lastCh = ch;\n        }\n        start += 1;\n        // RIGHT anchor (end)\n        for (; end < word.length; end++) {\n            let ch = word.charCodeAt(end);\n            if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            else if (ch === 95 /* Underline */ || ch === 45 /* Dash */) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            lastCh = ch;\n        }\n        if (start < end) {\n            bucket.push({ range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end) });\n        }\n    }\n    _addWordRanges(bucket, model, pos) {\n        const word = model.getWordAtPosition(pos);\n        if (word) {\n            bucket.push({ range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn) });\n        }\n    }\n    _addWhitespaceLine(bucket, model, pos) {\n        if (model.getLineLength(pos.lineNumber) > 0\n            && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0\n            && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\n            bucket.push({ range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber)) });\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nclass SelectionRanges {\n    constructor(index, ranges) {\n        this.index = index;\n        this.ranges = ranges;\n    }\n    mov(fwd) {\n        let index = this.index + (fwd ? 1 : -1);\n        if (index < 0 || index >= this.ranges.length) {\n            return this;\n        }\n        const res = new SelectionRanges(index, this.ranges);\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n            // next range equals this range, retry with next-next\n            return res.mov(fwd);\n        }\n        return res;\n    }\n}\nlet SmartSelectController = class SmartSelectController {\n    constructor(_editor, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._ignoreSelection = false;\n    }\n    static get(editor) {\n        return editor.getContribution(SmartSelectController.ID);\n    }\n    dispose() {\n        var _a;\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    run(forward) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            const model = this._editor.getModel();\n            if (!this._state) {\n                yield provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(s => s.getPosition()), this._editor.getOption(102 /* smartSelect */), CancellationToken.None).then(ranges => {\n                    var _a;\n                    if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n                        // invalid result\n                        return;\n                    }\n                    if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\n                        // invalid editor state\n                        return;\n                    }\n                    for (let i = 0; i < ranges.length; i++) {\n                        ranges[i] = ranges[i].filter(range => {\n                            // filter ranges inside the selection\n                            return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n                        });\n                        // prepend current selection\n                        ranges[i].unshift(selections[i]);\n                    }\n                    this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\n                    // listen to caret move and forget about state\n                    (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                    this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\n                        var _a;\n                        if (!this._ignoreSelection) {\n                            (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                            this._state = undefined;\n                        }\n                    });\n                });\n            }\n            if (!this._state) {\n                // no state\n                return;\n            }\n            this._state = this._state.map(state => state.mov(forward));\n            const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\n            this._ignoreSelection = true;\n            try {\n                this._editor.setSelections(newSelections);\n            }\n            finally {\n                this._ignoreSelection = false;\n            }\n        });\n    }\n};\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\nSmartSelectController = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SmartSelectController);\nclass AbstractSmartSelect extends EditorAction {\n    constructor(forward, opts) {\n        super(opts);\n        this._forward = forward;\n    }\n    run(_accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let controller = SmartSelectController.get(editor);\n            if (controller) {\n                yield controller.run(this._forward);\n            }\n        });\n    }\n}\nclass GrowSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(true, {\n            id: 'editor.action.smartSelect.expand',\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n            alias: 'Expand Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 17 /* RightArrow */,\n                mac: {\n                    primary: 2048 /* CtrlCmd */ | 256 /* WinCtrl */ | 1024 /* Shift */ | 17 /* RightArrow */,\n                    secondary: [256 /* WinCtrl */ | 1024 /* Shift */ | 17 /* RightArrow */],\n                },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\n                order: 2\n            }\n        });\n    }\n}\n// renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nclass ShrinkSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(false, {\n            id: 'editor.action.smartSelect.shrink',\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n            alias: 'Shrink Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 15 /* LeftArrow */,\n                mac: {\n                    primary: 2048 /* CtrlCmd */ | 256 /* WinCtrl */ | 1024 /* Shift */ | 15 /* LeftArrow */,\n                    secondary: [256 /* WinCtrl */ | 1024 /* Shift */ | 15 /* LeftArrow */],\n                },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\n                order: 3\n            }\n        });\n    }\n}\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\nexport function provideSelectionRanges(registry, model, positions, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = registry.all(model)\n            .concat(new WordSelectionRangeProvider()); // ALWAYS have word based selection range\n        if (providers.length === 1) {\n            // add word selection and bracket selection when no provider exists\n            providers.unshift(new BracketSelectionRangeProvider());\n        }\n        let work = [];\n        let allRawRanges = [];\n        for (const provider of providers) {\n            work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\n                if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n                    for (let i = 0; i < positions.length; i++) {\n                        if (!allRawRanges[i]) {\n                            allRawRanges[i] = [];\n                        }\n                        for (const oneProviderRanges of allProviderRanges[i]) {\n                            if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n                                allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n                            }\n                        }\n                    }\n                }\n            }, onUnexpectedExternalError));\n        }\n        yield Promise.all(work);\n        return allRawRanges.map(oneRawRanges => {\n            if (oneRawRanges.length === 0) {\n                return [];\n            }\n            // sort all by start/end position\n            oneRawRanges.sort((a, b) => {\n                if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n                    return 1;\n                }\n                else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n                    return 1;\n                }\n                else {\n                    return 0;\n                }\n            });\n            // remove ranges that don't contain the former range or that are equal to the\n            // former range\n            let oneRanges = [];\n            let last;\n            for (const range of oneRawRanges) {\n                if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\n                    oneRanges.push(range);\n                    last = range;\n                }\n            }\n            if (!options.selectLeadingAndTrailingWhitespace) {\n                return oneRanges;\n            }\n            // add ranges that expand trivia at line starts and ends whenever a range\n            // wraps onto the a new line\n            let oneRangesWithTrivia = [oneRanges[0]];\n            for (let i = 1; i < oneRanges.length; i++) {\n                const prev = oneRanges[i - 1];\n                const cur = oneRanges[i];\n                if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n                    // add line/block range without leading/failing whitespace\n                    const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n                    if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n                        oneRangesWithTrivia.push(rangeNoWhitespace);\n                    }\n                    // add line/block range\n                    const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n                    if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n                        oneRangesWithTrivia.push(rangeFull);\n                    }\n                }\n                oneRangesWithTrivia.push(cur);\n            }\n            return oneRangesWithTrivia;\n        });\n    });\n}\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, positions] = args;\n        assertType(URI.isUri(resource));\n        const registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\n        const reference = yield accessor.get(ITextModelService).createModelReference(resource);\n        try {\n            return provideSelectionRanges(registry, reference.object.textEditorModel, positions, { selectLeadingAndTrailingWhitespace: true }, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { showSimpleSuggestions } from '../../suggest/browser/suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { SnippetSession } from './snippetSession.js';\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    undoStopBefore: true,\n    undoStopAfter: true,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nlet SnippetController2 = class SnippetController2 {\n    constructor(_editor, _instantiationService, _logService, contextKeyService) {\n        this._editor = _editor;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._snippetListener = new DisposableStore();\n        this._modelVersionId = -1;\n        this._inSnippet = SnippetController2.InSnippetMode.bindTo(contextKeyService);\n        this._hasNextTabstop = SnippetController2.HasNextTabstop.bindTo(contextKeyService);\n        this._hasPrevTabstop = SnippetController2.HasPrevTabstop.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(SnippetController2.ID);\n    }\n    dispose() {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._snippetListener.dispose();\n    }\n    insert(template, opts) {\n        // this is here to find out more about the yet-not-understood\n        // error that sometimes happens when we fail to inserted a nested\n        // snippet\n        try {\n            this._doInsert(template, typeof opts === 'undefined' ? _defaultOptions : Object.assign(Object.assign({}, _defaultOptions), opts));\n        }\n        catch (e) {\n            this.cancel();\n            this._logService.error(e);\n            this._logService.error('snippet_error');\n            this._logService.error('insert_template=', template);\n            this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\n        }\n    }\n    _doInsert(template, opts) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // don't listen while inserting the snippet\n        // as that is the inflight state causing cancelation\n        this._snippetListener.clear();\n        if (opts.undoStopBefore) {\n            this._editor.getModel().pushStackElement();\n        }\n        if (!this._session) {\n            this._modelVersionId = this._editor.getModel().getAlternativeVersionId();\n            this._session = new SnippetSession(this._editor, template, opts);\n            this._session.insert();\n        }\n        else {\n            this._session.merge(template, opts);\n        }\n        if (opts.undoStopAfter) {\n            this._editor.getModel().pushStackElement();\n        }\n        this._updateState();\n        this._snippetListener.add(this._editor.onDidChangeModelContent(e => e.isFlush && this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeModel(() => this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeCursorSelection(() => this._updateState()));\n    }\n    _updateState() {\n        if (!this._session || !this._editor.hasModel()) {\n            // canceled in the meanwhile\n            return;\n        }\n        if (this._modelVersionId === this._editor.getModel().getAlternativeVersionId()) {\n            // undo until the 'before' state happened\n            // and makes use cancel snippet mode\n            return this.cancel();\n        }\n        if (!this._session.hasPlaceholder) {\n            // don't listen for selection changes and don't\n            // update context keys when the snippet is plain text\n            return this.cancel();\n        }\n        if (this._session.isAtLastPlaceholder || !this._session.isSelectionWithinPlaceholders()) {\n            this._editor.getModel().pushStackElement();\n            return this.cancel();\n        }\n        this._inSnippet.set(true);\n        this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder);\n        this._hasNextTabstop.set(!this._session.isAtLastPlaceholder);\n        this._handleChoice();\n    }\n    _handleChoice() {\n        if (!this._session || !this._editor.hasModel()) {\n            this._currentChoice = undefined;\n            return;\n        }\n        const { choice } = this._session;\n        if (!choice) {\n            this._currentChoice = undefined;\n            return;\n        }\n        if (this._currentChoice !== choice) {\n            this._currentChoice = choice;\n            this._editor.setSelections(this._editor.getSelections()\n                .map(s => Selection.fromPositions(s.getStartPosition())));\n            const [first] = choice.options;\n            this._instantiationService.invokeFunction(showSimpleSuggestions, this._editor, choice.options.map((option, i) => {\n                // let before = choice.options.slice(0, i);\n                // let after = choice.options.slice(i);\n                return {\n                    kind: 13 /* Value */,\n                    label: option.value,\n                    insertText: option.value,\n                    // insertText: `\\${1|${after.concat(before).join(',')}|}$0`,\n                    // snippetType: 'textmate',\n                    sortText: 'a'.repeat(i + 1),\n                    range: Range.fromPositions(this._editor.getPosition(), this._editor.getPosition().delta(0, first.value.length))\n                };\n            }));\n        }\n    }\n    finish() {\n        while (this._inSnippet.get()) {\n            this.next();\n        }\n    }\n    cancel(resetSelection = false) {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        this._snippetListener.clear();\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._session = undefined;\n        this._modelVersionId = -1;\n        if (resetSelection) {\n            // reset selection to the primary cursor when being asked\n            // for. this happens when explicitly cancelling snippet mode,\n            // e.g. when pressing ESC\n            this._editor.setSelections([this._editor.getSelection()]);\n        }\n    }\n    prev() {\n        if (this._session) {\n            this._session.prev();\n        }\n        this._updateState();\n    }\n    next() {\n        if (this._session) {\n            this._session.next();\n        }\n        this._updateState();\n    }\n    isInSnippet() {\n        return Boolean(this._inSnippet.get());\n    }\n};\nSnippetController2.ID = 'snippetController2';\nSnippetController2.InSnippetMode = new RawContextKey('inSnippetMode', false, localize('inSnippetMode', \"Whether the editor in current in snippet mode\"));\nSnippetController2.HasNextTabstop = new RawContextKey('hasNextTabstop', false, localize('hasNextTabstop', \"Whether there is a next tab stop when in snippet mode\"));\nSnippetController2.HasPrevTabstop = new RawContextKey('hasPrevTabstop', false, localize('hasPrevTabstop', \"Whether there is a previous tab stop when in snippet mode\"));\nSnippetController2 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, ILogService),\n    __param(3, IContextKeyService)\n], SnippetController2);\nexport { SnippetController2 };\nregisterEditorContribution(SnippetController2.ID, SnippetController2);\nconst CommandCtor = EditorCommand.bindToContribution(SnippetController2.get);\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToNextSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasNextTabstop),\n    handler: ctrl => ctrl.next(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2 /* Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToPrevSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasPrevTabstop),\n    handler: ctrl => ctrl.prev(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* Shift */ | 2 /* Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'leaveSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.cancel(true),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'acceptSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.finish(),\n    // kbOpts: {\n    // \tweight: KeybindingWeight.EditorContrib + 30,\n    // \tkbExpr: EditorContextKeys.textFocus,\n    // \tprimary: KeyCode.Enter,\n    // }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class Scanner {\n    constructor() {\n        this.value = '';\n        this.pos = 0;\n    }\n    static isDigitCharacter(ch) {\n        return ch >= 48 /* Digit0 */ && ch <= 57 /* Digit9 */;\n    }\n    static isVariableCharacter(ch) {\n        return ch === 95 /* Underline */\n            || (ch >= 97 /* a */ && ch <= 122 /* z */)\n            || (ch >= 65 /* A */ && ch <= 90 /* Z */);\n    }\n    text(value) {\n        this.value = value;\n        this.pos = 0;\n    }\n    tokenText(token) {\n        return this.value.substr(token.pos, token.len);\n    }\n    next() {\n        if (this.pos >= this.value.length) {\n            return { type: 14 /* EOF */, pos: this.pos, len: 0 };\n        }\n        let pos = this.pos;\n        let len = 0;\n        let ch = this.value.charCodeAt(pos);\n        let type;\n        // static types\n        type = Scanner._table[ch];\n        if (typeof type === 'number') {\n            this.pos += 1;\n            return { type, pos, len: 1 };\n        }\n        // number\n        if (Scanner.isDigitCharacter(ch)) {\n            type = 8 /* Int */;\n            do {\n                len += 1;\n                ch = this.value.charCodeAt(pos + len);\n            } while (Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // variable name\n        if (Scanner.isVariableCharacter(ch)) {\n            type = 9 /* VariableName */;\n            do {\n                ch = this.value.charCodeAt(pos + (++len));\n            } while (Scanner.isVariableCharacter(ch) || Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // format\n        type = 10 /* Format */;\n        do {\n            len += 1;\n            ch = this.value.charCodeAt(pos + len);\n        } while (!isNaN(ch)\n            && typeof Scanner._table[ch] === 'undefined' // not static token\n            && !Scanner.isDigitCharacter(ch) // not number\n            && !Scanner.isVariableCharacter(ch) // not variable\n        );\n        this.pos += len;\n        return { type, pos, len };\n    }\n}\nScanner._table = {\n    [36 /* DollarSign */]: 0 /* Dollar */,\n    [58 /* Colon */]: 1 /* Colon */,\n    [44 /* Comma */]: 2 /* Comma */,\n    [123 /* OpenCurlyBrace */]: 3 /* CurlyOpen */,\n    [125 /* CloseCurlyBrace */]: 4 /* CurlyClose */,\n    [92 /* Backslash */]: 5 /* Backslash */,\n    [47 /* Slash */]: 6 /* Forwardslash */,\n    [124 /* Pipe */]: 7 /* Pipe */,\n    [43 /* Plus */]: 11 /* Plus */,\n    [45 /* Dash */]: 12 /* Dash */,\n    [63 /* QuestionMark */]: 13 /* QuestionMark */,\n};\nexport class Marker {\n    constructor() {\n        this._children = [];\n    }\n    appendChild(child) {\n        if (child instanceof Text && this._children[this._children.length - 1] instanceof Text) {\n            // this and previous child are text -> merge them\n            this._children[this._children.length - 1].value += child.value;\n        }\n        else {\n            // normal adoption of child\n            child.parent = this;\n            this._children.push(child);\n        }\n        return this;\n    }\n    replace(child, others) {\n        const { parent } = child;\n        const idx = parent.children.indexOf(child);\n        const newChildren = parent.children.slice(0);\n        newChildren.splice(idx, 1, ...others);\n        parent._children = newChildren;\n        (function _fixParent(children, parent) {\n            for (const child of children) {\n                child.parent = parent;\n                _fixParent(child.children, child);\n            }\n        })(others, parent);\n    }\n    get children() {\n        return this._children;\n    }\n    get snippet() {\n        let candidate = this;\n        while (true) {\n            if (!candidate) {\n                return undefined;\n            }\n            if (candidate instanceof TextmateSnippet) {\n                return candidate;\n            }\n            candidate = candidate.parent;\n        }\n    }\n    toString() {\n        return this.children.reduce((prev, cur) => prev + cur.toString(), '');\n    }\n    len() {\n        return 0;\n    }\n}\nexport class Text extends Marker {\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    len() {\n        return this.value.length;\n    }\n    clone() {\n        return new Text(this.value);\n    }\n}\nexport class TransformableMarker extends Marker {\n}\nexport class Placeholder extends TransformableMarker {\n    constructor(index) {\n        super();\n        this.index = index;\n    }\n    static compareByIndex(a, b) {\n        if (a.index === b.index) {\n            return 0;\n        }\n        else if (a.isFinalTabstop) {\n            return 1;\n        }\n        else if (b.isFinalTabstop) {\n            return -1;\n        }\n        else if (a.index < b.index) {\n            return -1;\n        }\n        else if (a.index > b.index) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    get isFinalTabstop() {\n        return this.index === 0;\n    }\n    get choice() {\n        return this._children.length === 1 && this._children[0] instanceof Choice\n            ? this._children[0]\n            : undefined;\n    }\n    clone() {\n        let ret = new Placeholder(this.index);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class Choice extends Marker {\n    constructor() {\n        super(...arguments);\n        this.options = [];\n    }\n    appendChild(marker) {\n        if (marker instanceof Text) {\n            marker.parent = this;\n            this.options.push(marker);\n        }\n        return this;\n    }\n    toString() {\n        return this.options[0].value;\n    }\n    len() {\n        return this.options[0].len();\n    }\n    clone() {\n        let ret = new Choice();\n        this.options.forEach(ret.appendChild, ret);\n        return ret;\n    }\n}\nexport class Transform extends Marker {\n    constructor() {\n        super(...arguments);\n        this.regexp = new RegExp('');\n    }\n    resolve(value) {\n        const _this = this;\n        let didMatch = false;\n        let ret = value.replace(this.regexp, function () {\n            didMatch = true;\n            return _this._replace(Array.prototype.slice.call(arguments, 0, -2));\n        });\n        // when the regex didn't match and when the transform has\n        // else branches, then run those\n        if (!didMatch && this._children.some(child => child instanceof FormatString && Boolean(child.elseValue))) {\n            ret = this._replace([]);\n        }\n        return ret;\n    }\n    _replace(groups) {\n        let ret = '';\n        for (const marker of this._children) {\n            if (marker instanceof FormatString) {\n                let value = groups[marker.index] || '';\n                value = marker.resolve(value);\n                ret += value;\n            }\n            else {\n                ret += marker.toString();\n            }\n        }\n        return ret;\n    }\n    toString() {\n        return '';\n    }\n    clone() {\n        let ret = new Transform();\n        ret.regexp = new RegExp(this.regexp.source, '' + (this.regexp.ignoreCase ? 'i' : '') + (this.regexp.global ? 'g' : ''));\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class FormatString extends Marker {\n    constructor(index, shorthandName, ifValue, elseValue) {\n        super();\n        this.index = index;\n        this.shorthandName = shorthandName;\n        this.ifValue = ifValue;\n        this.elseValue = elseValue;\n    }\n    resolve(value) {\n        if (this.shorthandName === 'upcase') {\n            return !value ? '' : value.toLocaleUpperCase();\n        }\n        else if (this.shorthandName === 'downcase') {\n            return !value ? '' : value.toLocaleLowerCase();\n        }\n        else if (this.shorthandName === 'capitalize') {\n            return !value ? '' : (value[0].toLocaleUpperCase() + value.substr(1));\n        }\n        else if (this.shorthandName === 'pascalcase') {\n            return !value ? '' : this._toPascalCase(value);\n        }\n        else if (this.shorthandName === 'camelcase') {\n            return !value ? '' : this._toCamelCase(value);\n        }\n        else if (Boolean(value) && typeof this.ifValue === 'string') {\n            return this.ifValue;\n        }\n        else if (!Boolean(value) && typeof this.elseValue === 'string') {\n            return this.elseValue;\n        }\n        else {\n            return value || '';\n        }\n    }\n    _toPascalCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map(word => {\n            return word.charAt(0).toUpperCase()\n                + word.substr(1).toLowerCase();\n        })\n            .join('');\n    }\n    _toCamelCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map((word, index) => {\n            if (index === 0) {\n                return word.toLowerCase();\n            }\n            else {\n                return word.charAt(0).toUpperCase()\n                    + word.substr(1).toLowerCase();\n            }\n        })\n            .join('');\n    }\n    clone() {\n        let ret = new FormatString(this.index, this.shorthandName, this.ifValue, this.elseValue);\n        return ret;\n    }\n}\nexport class Variable extends TransformableMarker {\n    constructor(name) {\n        super();\n        this.name = name;\n    }\n    resolve(resolver) {\n        let value = resolver.resolve(this);\n        if (this.transform) {\n            value = this.transform.resolve(value || '');\n        }\n        if (value !== undefined) {\n            this._children = [new Text(value)];\n            return true;\n        }\n        return false;\n    }\n    clone() {\n        const ret = new Variable(this.name);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nfunction walk(marker, visitor) {\n    const stack = [...marker];\n    while (stack.length > 0) {\n        const marker = stack.shift();\n        const recurse = visitor(marker);\n        if (!recurse) {\n            break;\n        }\n        stack.unshift(...marker.children);\n    }\n}\nexport class TextmateSnippet extends Marker {\n    get placeholderInfo() {\n        if (!this._placeholders) {\n            // fill in placeholders\n            let all = [];\n            let last;\n            this.walk(function (candidate) {\n                if (candidate instanceof Placeholder) {\n                    all.push(candidate);\n                    last = !last || last.index < candidate.index ? candidate : last;\n                }\n                return true;\n            });\n            this._placeholders = { all, last };\n        }\n        return this._placeholders;\n    }\n    get placeholders() {\n        const { all } = this.placeholderInfo;\n        return all;\n    }\n    offset(marker) {\n        let pos = 0;\n        let found = false;\n        this.walk(candidate => {\n            if (candidate === marker) {\n                found = true;\n                return false;\n            }\n            pos += candidate.len();\n            return true;\n        });\n        if (!found) {\n            return -1;\n        }\n        return pos;\n    }\n    fullLen(marker) {\n        let ret = 0;\n        walk([marker], marker => {\n            ret += marker.len();\n            return true;\n        });\n        return ret;\n    }\n    enclosingPlaceholders(placeholder) {\n        let ret = [];\n        let { parent } = placeholder;\n        while (parent) {\n            if (parent instanceof Placeholder) {\n                ret.push(parent);\n            }\n            parent = parent.parent;\n        }\n        return ret;\n    }\n    resolveVariables(resolver) {\n        this.walk(candidate => {\n            if (candidate instanceof Variable) {\n                if (candidate.resolve(resolver)) {\n                    this._placeholders = undefined;\n                }\n            }\n            return true;\n        });\n        return this;\n    }\n    appendChild(child) {\n        this._placeholders = undefined;\n        return super.appendChild(child);\n    }\n    replace(child, others) {\n        this._placeholders = undefined;\n        return super.replace(child, others);\n    }\n    clone() {\n        let ret = new TextmateSnippet();\n        this._children = this.children.map(child => child.clone());\n        return ret;\n    }\n    walk(visitor) {\n        walk(this.children, visitor);\n    }\n}\nexport class SnippetParser {\n    constructor() {\n        this._scanner = new Scanner();\n        this._token = { type: 14 /* EOF */, pos: 0, len: 0 };\n    }\n    static escape(value) {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n    static guessNeedsClipboard(template) {\n        return /\\${?CLIPBOARD/.test(template);\n    }\n    parse(value, insertFinalTabstop, enforceFinalTabstop) {\n        this._scanner.text(value);\n        this._token = this._scanner.next();\n        const snippet = new TextmateSnippet();\n        while (this._parse(snippet)) {\n            // nothing\n        }\n        // fill in values for placeholders. the first placeholder of an index\n        // that has a value defines the value for all placeholders with that index\n        const placeholderDefaultValues = new Map();\n        const incompletePlaceholders = [];\n        let placeholderCount = 0;\n        snippet.walk(marker => {\n            if (marker instanceof Placeholder) {\n                placeholderCount += 1;\n                if (marker.isFinalTabstop) {\n                    placeholderDefaultValues.set(0, undefined);\n                }\n                else if (!placeholderDefaultValues.has(marker.index) && marker.children.length > 0) {\n                    placeholderDefaultValues.set(marker.index, marker.children);\n                }\n                else {\n                    incompletePlaceholders.push(marker);\n                }\n            }\n            return true;\n        });\n        for (const placeholder of incompletePlaceholders) {\n            const defaultValues = placeholderDefaultValues.get(placeholder.index);\n            if (defaultValues) {\n                const clone = new Placeholder(placeholder.index);\n                clone.transform = placeholder.transform;\n                for (const child of defaultValues) {\n                    clone.appendChild(child.clone());\n                }\n                snippet.replace(placeholder, [clone]);\n            }\n        }\n        if (!enforceFinalTabstop) {\n            enforceFinalTabstop = placeholderCount > 0 && insertFinalTabstop;\n        }\n        if (!placeholderDefaultValues.has(0) && enforceFinalTabstop) {\n            // the snippet uses placeholders but has no\n            // final tabstop defined -> insert at the end\n            snippet.appendChild(new Placeholder(0));\n        }\n        return snippet;\n    }\n    _accept(type, value) {\n        if (type === undefined || this._token.type === type) {\n            let ret = !value ? true : this._scanner.tokenText(this._token);\n            this._token = this._scanner.next();\n            return ret;\n        }\n        return false;\n    }\n    _backTo(token) {\n        this._scanner.pos = token.pos + token.len;\n        this._token = token;\n        return false;\n    }\n    _until(type) {\n        const start = this._token;\n        while (this._token.type !== type) {\n            if (this._token.type === 14 /* EOF */) {\n                return false;\n            }\n            else if (this._token.type === 5 /* Backslash */) {\n                const nextToken = this._scanner.next();\n                if (nextToken.type !== 0 /* Dollar */\n                    && nextToken.type !== 4 /* CurlyClose */\n                    && nextToken.type !== 5 /* Backslash */) {\n                    return false;\n                }\n            }\n            this._token = this._scanner.next();\n        }\n        const value = this._scanner.value.substring(start.pos, this._token.pos).replace(/\\\\(\\$|}|\\\\)/g, '$1');\n        this._token = this._scanner.next();\n        return value;\n    }\n    _parse(marker) {\n        return this._parseEscaped(marker)\n            || this._parseTabstopOrVariableName(marker)\n            || this._parseComplexPlaceholder(marker)\n            || this._parseComplexVariable(marker)\n            || this._parseAnything(marker);\n    }\n    // \\$, \\\\, \\} -> just text\n    _parseEscaped(marker) {\n        let value;\n        if (value = this._accept(5 /* Backslash */, true)) {\n            // saw a backslash, append escaped token or that backslash\n            value = this._accept(0 /* Dollar */, true)\n                || this._accept(4 /* CurlyClose */, true)\n                || this._accept(5 /* Backslash */, true)\n                || value;\n            marker.appendChild(new Text(value));\n            return true;\n        }\n        return false;\n    }\n    // $foo -> variable, $1 -> tabstop\n    _parseTabstopOrVariableName(parent) {\n        let value;\n        const token = this._token;\n        const match = this._accept(0 /* Dollar */)\n            && (value = this._accept(9 /* VariableName */, true) || this._accept(8 /* Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        parent.appendChild(/^\\d+$/.test(value)\n            ? new Placeholder(Number(value))\n            : new Variable(value));\n        return true;\n    }\n    // ${1:<children>}, ${1} -> placeholder\n    _parseComplexPlaceholder(parent) {\n        let index;\n        const token = this._token;\n        const match = this._accept(0 /* Dollar */)\n            && this._accept(3 /* CurlyOpen */)\n            && (index = this._accept(8 /* Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const placeholder = new Placeholder(Number(index));\n        if (this._accept(1 /* Colon */)) {\n            // ${1:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* CurlyClose */)) {\n                    parent.appendChild(placeholder);\n                    return true;\n                }\n                if (this._parse(placeholder)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + index + ':'));\n                placeholder.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (placeholder.index > 0 && this._accept(7 /* Pipe */)) {\n            // ${1|one,two,three|}\n            const choice = new Choice();\n            while (true) {\n                if (this._parseChoiceElement(choice)) {\n                    if (this._accept(2 /* Comma */)) {\n                        // opt, -> more\n                        continue;\n                    }\n                    if (this._accept(7 /* Pipe */)) {\n                        placeholder.appendChild(choice);\n                        if (this._accept(4 /* CurlyClose */)) {\n                            // ..|} -> done\n                            parent.appendChild(placeholder);\n                            return true;\n                        }\n                    }\n                }\n                this._backTo(token);\n                return false;\n            }\n        }\n        else if (this._accept(6 /* Forwardslash */)) {\n            // ${1/<regex>/<format>/<options>}\n            if (this._parseTransform(placeholder)) {\n                parent.appendChild(placeholder);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* CurlyClose */)) {\n            // ${1}\n            parent.appendChild(placeholder);\n            return true;\n        }\n        else {\n            // ${1 <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseChoiceElement(parent) {\n        const token = this._token;\n        const values = [];\n        while (true) {\n            if (this._token.type === 2 /* Comma */ || this._token.type === 7 /* Pipe */) {\n                break;\n            }\n            let value;\n            if (value = this._accept(5 /* Backslash */, true)) {\n                // \\, \\|, or \\\\\n                value = this._accept(2 /* Comma */, true)\n                    || this._accept(7 /* Pipe */, true)\n                    || this._accept(5 /* Backslash */, true)\n                    || value;\n            }\n            else {\n                value = this._accept(undefined, true);\n            }\n            if (!value) {\n                // EOF\n                this._backTo(token);\n                return false;\n            }\n            values.push(value);\n        }\n        if (values.length === 0) {\n            this._backTo(token);\n            return false;\n        }\n        parent.appendChild(new Text(values.join('')));\n        return true;\n    }\n    // ${foo:<children>}, ${foo} -> variable\n    _parseComplexVariable(parent) {\n        let name;\n        const token = this._token;\n        const match = this._accept(0 /* Dollar */)\n            && this._accept(3 /* CurlyOpen */)\n            && (name = this._accept(9 /* VariableName */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const variable = new Variable(name);\n        if (this._accept(1 /* Colon */)) {\n            // ${foo:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* CurlyClose */)) {\n                    parent.appendChild(variable);\n                    return true;\n                }\n                if (this._parse(variable)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + name + ':'));\n                variable.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (this._accept(6 /* Forwardslash */)) {\n            // ${foo/<regex>/<format>/<options>}\n            if (this._parseTransform(variable)) {\n                parent.appendChild(variable);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* CurlyClose */)) {\n            // ${foo}\n            parent.appendChild(variable);\n            return true;\n        }\n        else {\n            // ${foo <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseTransform(parent) {\n        // ...<regex>/<format>/<options>}\n        let transform = new Transform();\n        let regexValue = '';\n        let regexOptions = '';\n        // (1) /regex\n        while (true) {\n            if (this._accept(6 /* Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* Backslash */, true)) {\n                escaped = this._accept(6 /* Forwardslash */, true) || escaped;\n                regexValue += escaped;\n                continue;\n            }\n            if (this._token.type !== 14 /* EOF */) {\n                regexValue += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        // (2) /format\n        while (true) {\n            if (this._accept(6 /* Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* Backslash */, true)) {\n                escaped = this._accept(5 /* Backslash */, true) || this._accept(6 /* Forwardslash */, true) || escaped;\n                transform.appendChild(new Text(escaped));\n                continue;\n            }\n            if (this._parseFormatString(transform) || this._parseAnything(transform)) {\n                continue;\n            }\n            return false;\n        }\n        // (3) /option\n        while (true) {\n            if (this._accept(4 /* CurlyClose */)) {\n                break;\n            }\n            if (this._token.type !== 14 /* EOF */) {\n                regexOptions += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        try {\n            transform.regexp = new RegExp(regexValue, regexOptions);\n        }\n        catch (e) {\n            // invalid regexp\n            return false;\n        }\n        parent.transform = transform;\n        return true;\n    }\n    _parseFormatString(parent) {\n        const token = this._token;\n        if (!this._accept(0 /* Dollar */)) {\n            return false;\n        }\n        let complex = false;\n        if (this._accept(3 /* CurlyOpen */)) {\n            complex = true;\n        }\n        let index = this._accept(8 /* Int */, true);\n        if (!index) {\n            this._backTo(token);\n            return false;\n        }\n        else if (!complex) {\n            // $1\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (this._accept(4 /* CurlyClose */)) {\n            // ${1}\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (!this._accept(1 /* Colon */)) {\n            this._backTo(token);\n            return false;\n        }\n        if (this._accept(6 /* Forwardslash */)) {\n            // ${1:/upcase}\n            let shorthand = this._accept(9 /* VariableName */, true);\n            if (!shorthand || !this._accept(4 /* CurlyClose */)) {\n                this._backTo(token);\n                return false;\n            }\n            else {\n                parent.appendChild(new FormatString(Number(index), shorthand));\n                return true;\n            }\n        }\n        else if (this._accept(11 /* Plus */)) {\n            // ${1:+<if>}\n            let ifValue = this._until(4 /* CurlyClose */);\n            if (ifValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, ifValue, undefined));\n                return true;\n            }\n        }\n        else if (this._accept(12 /* Dash */)) {\n            // ${2:-<else>}\n            let elseValue = this._until(4 /* CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        else if (this._accept(13 /* QuestionMark */)) {\n            // ${2:?<if>:<else>}\n            let ifValue = this._until(1 /* Colon */);\n            if (ifValue) {\n                let elseValue = this._until(4 /* CurlyClose */);\n                if (elseValue) {\n                    parent.appendChild(new FormatString(Number(index), undefined, ifValue, elseValue));\n                    return true;\n                }\n            }\n        }\n        else {\n            // ${1:<else>}\n            let elseValue = this._until(4 /* CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        this._backTo(token);\n        return false;\n    }\n    _parseAnything(marker) {\n        if (this._token.type !== 14 /* EOF */) {\n            marker.appendChild(new Text(this._scanner.tokenText(this._token)));\n            this._accept(undefined);\n            return true;\n        }\n        return false;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { normalizeDriveLetter } from '../../../../base/common/labels.js';\nimport * as path from '../../../../base/common/path.js';\nimport { dirname } from '../../../../base/common/resources.js';\nimport { commonPrefixLength, getLeadingWhitespace, isFalsyOrWhitespace, splitLines } from '../../../../base/common/strings.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { LanguageConfigurationRegistry } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { Text } from './snippetParser.js';\nimport * as nls from '../../../../nls.js';\nimport { WORKSPACE_EXTENSION, isSingleFolderWorkspaceIdentifier, toWorkspaceIdentifier } from '../../../../platform/workspace/common/workspace.js';\nexport const KnownSnippetVariableNames = Object.freeze({\n    'CURRENT_YEAR': true,\n    'CURRENT_YEAR_SHORT': true,\n    'CURRENT_MONTH': true,\n    'CURRENT_DATE': true,\n    'CURRENT_HOUR': true,\n    'CURRENT_MINUTE': true,\n    'CURRENT_SECOND': true,\n    'CURRENT_DAY_NAME': true,\n    'CURRENT_DAY_NAME_SHORT': true,\n    'CURRENT_MONTH_NAME': true,\n    'CURRENT_MONTH_NAME_SHORT': true,\n    'CURRENT_SECONDS_UNIX': true,\n    'SELECTION': true,\n    'CLIPBOARD': true,\n    'TM_SELECTED_TEXT': true,\n    'TM_CURRENT_LINE': true,\n    'TM_CURRENT_WORD': true,\n    'TM_LINE_INDEX': true,\n    'TM_LINE_NUMBER': true,\n    'TM_FILENAME': true,\n    'TM_FILENAME_BASE': true,\n    'TM_DIRECTORY': true,\n    'TM_FILEPATH': true,\n    'RELATIVE_FILEPATH': true,\n    'BLOCK_COMMENT_START': true,\n    'BLOCK_COMMENT_END': true,\n    'LINE_COMMENT': true,\n    'WORKSPACE_NAME': true,\n    'WORKSPACE_FOLDER': true,\n    'RANDOM': true,\n    'RANDOM_HEX': true,\n    'UUID': true\n});\nexport class CompositeSnippetVariableResolver {\n    constructor(_delegates) {\n        this._delegates = _delegates;\n        //\n    }\n    resolve(variable) {\n        for (const delegate of this._delegates) {\n            let value = delegate.resolve(variable);\n            if (value !== undefined) {\n                return value;\n            }\n        }\n        return undefined;\n    }\n}\nexport class SelectionBasedVariableResolver {\n    constructor(_model, _selection, _selectionIdx, _overtypingCapturer) {\n        this._model = _model;\n        this._selection = _selection;\n        this._selectionIdx = _selectionIdx;\n        this._overtypingCapturer = _overtypingCapturer;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'SELECTION' || name === 'TM_SELECTED_TEXT') {\n            let value = this._model.getValueInRange(this._selection) || undefined;\n            let isMultiline = this._selection.startLineNumber !== this._selection.endLineNumber;\n            // If there was no selected text, try to get last overtyped text\n            if (!value && this._overtypingCapturer) {\n                const info = this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);\n                if (info) {\n                    value = info.value;\n                    isMultiline = info.multiline;\n                }\n            }\n            if (value && isMultiline && variable.snippet) {\n                // Selection is a multiline string which we indentation we now\n                // need to adjust. We compare the indentation of this variable\n                // with the indentation at the editor position and add potential\n                // extra indentation to the value\n                const line = this._model.getLineContent(this._selection.startLineNumber);\n                const lineLeadingWhitespace = getLeadingWhitespace(line, 0, this._selection.startColumn - 1);\n                let varLeadingWhitespace = lineLeadingWhitespace;\n                variable.snippet.walk(marker => {\n                    if (marker === variable) {\n                        return false;\n                    }\n                    if (marker instanceof Text) {\n                        varLeadingWhitespace = getLeadingWhitespace(splitLines(marker.value).pop());\n                    }\n                    return true;\n                });\n                const whitespaceCommonLength = commonPrefixLength(varLeadingWhitespace, lineLeadingWhitespace);\n                value = value.replace(/(\\r\\n|\\r|\\n)(.*)/g, (m, newline, rest) => `${newline}${varLeadingWhitespace.substr(whitespaceCommonLength)}${rest}`);\n            }\n            return value;\n        }\n        else if (name === 'TM_CURRENT_LINE') {\n            return this._model.getLineContent(this._selection.positionLineNumber);\n        }\n        else if (name === 'TM_CURRENT_WORD') {\n            const info = this._model.getWordAtPosition({\n                lineNumber: this._selection.positionLineNumber,\n                column: this._selection.positionColumn\n            });\n            return info && info.word || undefined;\n        }\n        else if (name === 'TM_LINE_INDEX') {\n            return String(this._selection.positionLineNumber - 1);\n        }\n        else if (name === 'TM_LINE_NUMBER') {\n            return String(this._selection.positionLineNumber);\n        }\n        return undefined;\n    }\n}\nexport class ModelBasedVariableResolver {\n    constructor(_labelService, _model) {\n        this._labelService = _labelService;\n        this._model = _model;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'TM_FILENAME') {\n            return path.basename(this._model.uri.fsPath);\n        }\n        else if (name === 'TM_FILENAME_BASE') {\n            const name = path.basename(this._model.uri.fsPath);\n            const idx = name.lastIndexOf('.');\n            if (idx <= 0) {\n                return name;\n            }\n            else {\n                return name.slice(0, idx);\n            }\n        }\n        else if (name === 'TM_DIRECTORY') {\n            if (path.dirname(this._model.uri.fsPath) === '.') {\n                return '';\n            }\n            return this._labelService.getUriLabel(dirname(this._model.uri));\n        }\n        else if (name === 'TM_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri);\n        }\n        else if (name === 'RELATIVE_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri, { relative: true, noPrefix: true });\n        }\n        return undefined;\n    }\n}\nexport class ClipboardBasedVariableResolver {\n    constructor(_readClipboardText, _selectionIdx, _selectionCount, _spread) {\n        this._readClipboardText = _readClipboardText;\n        this._selectionIdx = _selectionIdx;\n        this._selectionCount = _selectionCount;\n        this._spread = _spread;\n        //\n    }\n    resolve(variable) {\n        if (variable.name !== 'CLIPBOARD') {\n            return undefined;\n        }\n        const clipboardText = this._readClipboardText();\n        if (!clipboardText) {\n            return undefined;\n        }\n        // `spread` is assigning each cursor a line of the clipboard\n        // text whenever there the line count equals the cursor count\n        // and when enabled\n        if (this._spread) {\n            const lines = clipboardText.split(/\\r\\n|\\n|\\r/).filter(s => !isFalsyOrWhitespace(s));\n            if (lines.length === this._selectionCount) {\n                return lines[this._selectionIdx];\n            }\n        }\n        return clipboardText;\n    }\n}\nexport class CommentBasedVariableResolver {\n    constructor(_model, _selection) {\n        this._model = _model;\n        this._selection = _selection;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        const langId = this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber, this._selection.selectionStartColumn);\n        const config = LanguageConfigurationRegistry.getComments(langId);\n        if (!config) {\n            return undefined;\n        }\n        if (name === 'LINE_COMMENT') {\n            return config.lineCommentToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_START') {\n            return config.blockCommentStartToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_END') {\n            return config.blockCommentEndToken || undefined;\n        }\n        return undefined;\n    }\n}\nexport class TimeBasedVariableResolver {\n    constructor() {\n        this._date = new Date();\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'CURRENT_YEAR') {\n            return String(this._date.getFullYear());\n        }\n        else if (name === 'CURRENT_YEAR_SHORT') {\n            return String(this._date.getFullYear()).slice(-2);\n        }\n        else if (name === 'CURRENT_MONTH') {\n            return String(this._date.getMonth().valueOf() + 1).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DATE') {\n            return String(this._date.getDate().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_HOUR') {\n            return String(this._date.getHours().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_MINUTE') {\n            return String(this._date.getMinutes().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_SECOND') {\n            return String(this._date.getSeconds().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DAY_NAME') {\n            return TimeBasedVariableResolver.dayNames[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_DAY_NAME_SHORT') {\n            return TimeBasedVariableResolver.dayNamesShort[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME') {\n            return TimeBasedVariableResolver.monthNames[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME_SHORT') {\n            return TimeBasedVariableResolver.monthNamesShort[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_SECONDS_UNIX') {\n            return String(Math.floor(this._date.getTime() / 1000));\n        }\n        return undefined;\n    }\n}\nTimeBasedVariableResolver.dayNames = [nls.localize('Sunday', \"Sunday\"), nls.localize('Monday', \"Monday\"), nls.localize('Tuesday', \"Tuesday\"), nls.localize('Wednesday', \"Wednesday\"), nls.localize('Thursday', \"Thursday\"), nls.localize('Friday', \"Friday\"), nls.localize('Saturday', \"Saturday\")];\nTimeBasedVariableResolver.dayNamesShort = [nls.localize('SundayShort', \"Sun\"), nls.localize('MondayShort', \"Mon\"), nls.localize('TuesdayShort', \"Tue\"), nls.localize('WednesdayShort', \"Wed\"), nls.localize('ThursdayShort', \"Thu\"), nls.localize('FridayShort', \"Fri\"), nls.localize('SaturdayShort', \"Sat\")];\nTimeBasedVariableResolver.monthNames = [nls.localize('January', \"January\"), nls.localize('February', \"February\"), nls.localize('March', \"March\"), nls.localize('April', \"April\"), nls.localize('May', \"May\"), nls.localize('June', \"June\"), nls.localize('July', \"July\"), nls.localize('August', \"August\"), nls.localize('September', \"September\"), nls.localize('October', \"October\"), nls.localize('November', \"November\"), nls.localize('December', \"December\")];\nTimeBasedVariableResolver.monthNamesShort = [nls.localize('JanuaryShort', \"Jan\"), nls.localize('FebruaryShort', \"Feb\"), nls.localize('MarchShort', \"Mar\"), nls.localize('AprilShort', \"Apr\"), nls.localize('MayShort', \"May\"), nls.localize('JuneShort', \"Jun\"), nls.localize('JulyShort', \"Jul\"), nls.localize('AugustShort', \"Aug\"), nls.localize('SeptemberShort', \"Sep\"), nls.localize('OctoberShort', \"Oct\"), nls.localize('NovemberShort', \"Nov\"), nls.localize('DecemberShort', \"Dec\")];\nexport class WorkspaceBasedVariableResolver {\n    constructor(_workspaceService) {\n        this._workspaceService = _workspaceService;\n        //\n    }\n    resolve(variable) {\n        if (!this._workspaceService) {\n            return undefined;\n        }\n        const workspaceIdentifier = toWorkspaceIdentifier(this._workspaceService.getWorkspace());\n        if (!workspaceIdentifier) {\n            return undefined;\n        }\n        if (variable.name === 'WORKSPACE_NAME') {\n            return this._resolveWorkspaceName(workspaceIdentifier);\n        }\n        else if (variable.name === 'WORKSPACE_FOLDER') {\n            return this._resoveWorkspacePath(workspaceIdentifier);\n        }\n        return undefined;\n    }\n    _resolveWorkspaceName(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return path.basename(workspaceIdentifier.uri.path);\n        }\n        let filename = path.basename(workspaceIdentifier.configPath.path);\n        if (filename.endsWith(WORKSPACE_EXTENSION)) {\n            filename = filename.substr(0, filename.length - WORKSPACE_EXTENSION.length - 1);\n        }\n        return filename;\n    }\n    _resoveWorkspacePath(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return normalizeDriveLetter(workspaceIdentifier.uri.fsPath);\n        }\n        let filename = path.basename(workspaceIdentifier.configPath.path);\n        let folderpath = workspaceIdentifier.configPath.fsPath;\n        if (folderpath.endsWith(filename)) {\n            folderpath = folderpath.substr(0, folderpath.length - filename.length - 1);\n        }\n        return (folderpath ? normalizeDriveLetter(folderpath) : '/');\n    }\n}\nexport class RandomBasedVariableResolver {\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'RANDOM') {\n            return Math.random().toString().slice(-6);\n        }\n        else if (name === 'RANDOM_HEX') {\n            return Math.random().toString(16).slice(-6);\n        }\n        else if (name === 'UUID') {\n            return generateUuid();\n        }\n        return undefined;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { groupBy } from '../../../../base/common/arrays.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace } from '../../../../base/common/strings.js';\nimport './snippetSession.css';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { Choice, Placeholder, SnippetParser, Text } from './snippetParser.js';\nimport { ClipboardBasedVariableResolver, CommentBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, RandomBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, WorkspaceBasedVariableResolver } from './snippetVariables.js';\nexport class OneSnippet {\n    constructor(_editor, _snippet, _offset, _snippetLineLeadingWhitespace) {\n        this._editor = _editor;\n        this._snippet = _snippet;\n        this._offset = _offset;\n        this._snippetLineLeadingWhitespace = _snippetLineLeadingWhitespace;\n        this._nestingLevel = 1;\n        this._placeholderGroups = groupBy(_snippet.placeholders, Placeholder.compareByIndex);\n        this._placeholderGroupsIdx = -1;\n    }\n    dispose() {\n        if (this._placeholderDecorations) {\n            this._editor.deltaDecorations([...this._placeholderDecorations.values()], []);\n        }\n        this._placeholderGroups.length = 0;\n    }\n    _initDecorations() {\n        if (this._placeholderDecorations) {\n            // already initialized\n            return;\n        }\n        this._placeholderDecorations = new Map();\n        const model = this._editor.getModel();\n        this._editor.changeDecorations(accessor => {\n            // create a decoration for each placeholder\n            for (const placeholder of this._snippet.placeholders) {\n                const placeholderOffset = this._snippet.offset(placeholder);\n                const placeholderLen = this._snippet.fullLen(placeholder);\n                const range = Range.fromPositions(model.getPositionAt(this._offset + placeholderOffset), model.getPositionAt(this._offset + placeholderOffset + placeholderLen));\n                const options = placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive;\n                const handle = accessor.addDecoration(range, options);\n                this._placeholderDecorations.set(placeholder, handle);\n            }\n        });\n    }\n    move(fwd) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this._initDecorations();\n        // Transform placeholder text if necessary\n        if (this._placeholderGroupsIdx >= 0) {\n            let operations = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                // Check if the placeholder has a transformation\n                if (placeholder.transform) {\n                    const id = this._placeholderDecorations.get(placeholder);\n                    const range = this._editor.getModel().getDecorationRange(id);\n                    const currentValue = this._editor.getModel().getValueInRange(range);\n                    const transformedValueLines = placeholder.transform.resolve(currentValue).split(/\\r\\n|\\r|\\n/);\n                    // fix indentation for transformed lines\n                    for (let i = 1; i < transformedValueLines.length; i++) {\n                        transformedValueLines[i] = this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace + transformedValueLines[i]);\n                    }\n                    operations.push(EditOperation.replace(range, transformedValueLines.join(this._editor.getModel().getEOL())));\n                }\n            }\n            if (operations.length > 0) {\n                this._editor.executeEdits('snippet.placeholderTransform', operations);\n            }\n        }\n        let couldSkipThisPlaceholder = false;\n        if (fwd === true && this._placeholderGroupsIdx < this._placeholderGroups.length - 1) {\n            this._placeholderGroupsIdx += 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else if (fwd === false && this._placeholderGroupsIdx > 0) {\n            this._placeholderGroupsIdx -= 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else {\n            // the selection of the current placeholder might\n            // not acurate any more -> simply restore it\n        }\n        const newSelections = this._editor.getModel().changeDecorations(accessor => {\n            const activePlaceholders = new Set();\n            // change stickiness to always grow when typing at its edges\n            // because these decorations represent the currently active\n            // tabstop.\n            // Special case #1: reaching the final tabstop\n            // Special case #2: placeholders enclosing active placeholders\n            const selections = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                selections.push(new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn));\n                // consider to skip this placeholder index when the decoration\n                // range is empty but when the placeholder wasn't. that's a strong\n                // hint that the placeholder has been deleted. (all placeholder must match this)\n                couldSkipThisPlaceholder = couldSkipThisPlaceholder && this._hasPlaceholderBeenCollapsed(placeholder);\n                accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                activePlaceholders.add(placeholder);\n                for (const enclosingPlaceholder of this._snippet.enclosingPlaceholders(placeholder)) {\n                    const id = this._placeholderDecorations.get(enclosingPlaceholder);\n                    accessor.changeDecorationOptions(id, enclosingPlaceholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                    activePlaceholders.add(enclosingPlaceholder);\n                }\n            }\n            // change stickness to never grow when typing at its edges\n            // so that in-active tabstops never grow\n            for (const [placeholder, id] of this._placeholderDecorations) {\n                if (!activePlaceholders.has(placeholder)) {\n                    accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive);\n                }\n            }\n            return selections;\n        });\n        return !couldSkipThisPlaceholder ? newSelections !== null && newSelections !== void 0 ? newSelections : [] : this.move(fwd);\n    }\n    _hasPlaceholderBeenCollapsed(placeholder) {\n        // A placeholder is empty when it wasn't empty when authored but\n        // when its tracking decoration is empty. This also applies to all\n        // potential parent placeholders\n        let marker = placeholder;\n        while (marker) {\n            if (marker instanceof Placeholder) {\n                const id = this._placeholderDecorations.get(marker);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (range.isEmpty() && marker.toString().length > 0) {\n                    return true;\n                }\n            }\n            marker = marker.parent;\n        }\n        return false;\n    }\n    get isAtFirstPlaceholder() {\n        return this._placeholderGroupsIdx <= 0 || this._placeholderGroups.length === 0;\n    }\n    get isAtLastPlaceholder() {\n        return this._placeholderGroupsIdx === this._placeholderGroups.length - 1;\n    }\n    get hasPlaceholder() {\n        return this._snippet.placeholders.length > 0;\n    }\n    computePossibleSelections() {\n        const result = new Map();\n        for (const placeholdersWithEqualIndex of this._placeholderGroups) {\n            let ranges;\n            for (const placeholder of placeholdersWithEqualIndex) {\n                if (placeholder.isFinalTabstop) {\n                    // ignore those\n                    break;\n                }\n                if (!ranges) {\n                    ranges = [];\n                    result.set(placeholder.index, ranges);\n                }\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (!range) {\n                    // one of the placeholder lost its decoration and\n                    // therefore we bail out and pretend the placeholder\n                    // (with its mirrors) doesn't exist anymore.\n                    result.delete(placeholder.index);\n                    break;\n                }\n                ranges.push(range);\n            }\n        }\n        return result;\n    }\n    get choice() {\n        return this._placeholderGroups[this._placeholderGroupsIdx][0].choice;\n    }\n    merge(others) {\n        const model = this._editor.getModel();\n        this._nestingLevel *= 10;\n        this._editor.changeDecorations(accessor => {\n            // For each active placeholder take one snippet and merge it\n            // in that the placeholder (can be many for `$1foo$1foo`). Because\n            // everything is sorted by editor selection we can simply remove\n            // elements from the beginning of the array\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const nested = others.shift();\n                console.assert(!nested._placeholderDecorations);\n                // Massage placeholder-indicies of the nested snippet to be\n                // sorted right after the insertion point. This ensures we move\n                // through the placeholders in the correct order\n                const indexLastPlaceholder = nested._snippet.placeholderInfo.last.index;\n                for (const nestedPlaceholder of nested._snippet.placeholderInfo.all) {\n                    if (nestedPlaceholder.isFinalTabstop) {\n                        nestedPlaceholder.index = placeholder.index + ((indexLastPlaceholder + 1) / this._nestingLevel);\n                    }\n                    else {\n                        nestedPlaceholder.index = placeholder.index + (nestedPlaceholder.index / this._nestingLevel);\n                    }\n                }\n                this._snippet.replace(placeholder, nested._snippet.children);\n                // Remove the placeholder at which position are inserting\n                // the snippet and also remove its decoration.\n                const id = this._placeholderDecorations.get(placeholder);\n                accessor.removeDecoration(id);\n                this._placeholderDecorations.delete(placeholder);\n                // For each *new* placeholder we create decoration to monitor\n                // how and if it grows/shrinks.\n                for (const placeholder of nested._snippet.placeholders) {\n                    const placeholderOffset = nested._snippet.offset(placeholder);\n                    const placeholderLen = nested._snippet.fullLen(placeholder);\n                    const range = Range.fromPositions(model.getPositionAt(nested._offset + placeholderOffset), model.getPositionAt(nested._offset + placeholderOffset + placeholderLen));\n                    const handle = accessor.addDecoration(range, OneSnippet._decor.inactive);\n                    this._placeholderDecorations.set(placeholder, handle);\n                }\n            }\n            // Last, re-create the placeholder groups by sorting placeholders by their index.\n            this._placeholderGroups = groupBy(this._snippet.placeholders, Placeholder.compareByIndex);\n        });\n    }\n}\nOneSnippet._decor = {\n    active: ModelDecorationOptions.register({ description: 'snippet-placeholder-1', stickiness: 0 /* AlwaysGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    inactive: ModelDecorationOptions.register({ description: 'snippet-placeholder-2', stickiness: 1 /* NeverGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    activeFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-3', stickiness: 1 /* NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n    inactiveFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-4', stickiness: 1 /* NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n};\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nexport class SnippetSession {\n    constructor(editor, template, options = _defaultOptions) {\n        this._templateMerges = [];\n        this._snippets = [];\n        this._editor = editor;\n        this._template = template;\n        this._options = options;\n    }\n    static adjustWhitespace(model, position, snippet, adjustIndentation, adjustNewlines) {\n        const line = model.getLineContent(position.lineNumber);\n        const lineLeadingWhitespace = getLeadingWhitespace(line, 0, position.column - 1);\n        // the snippet as inserted\n        let snippetTextString;\n        snippet.walk(marker => {\n            // all text elements that are not inside choice\n            if (!(marker instanceof Text) || marker.parent instanceof Choice) {\n                return true;\n            }\n            const lines = marker.value.split(/\\r\\n|\\r|\\n/);\n            if (adjustIndentation) {\n                // adjust indentation of snippet test\n                // -the snippet-start doesn't get extra-indented (lineLeadingWhitespace), only normalized\n                // -all N+1 lines get extra-indented and normalized\n                // -the text start get extra-indented and normalized when following a linebreak\n                const offset = snippet.offset(marker);\n                if (offset === 0) {\n                    // snippet start\n                    lines[0] = model.normalizeIndentation(lines[0]);\n                }\n                else {\n                    // check if text start is after a linebreak\n                    snippetTextString = snippetTextString !== null && snippetTextString !== void 0 ? snippetTextString : snippet.toString();\n                    let prevChar = snippetTextString.charCodeAt(offset - 1);\n                    if (prevChar === 10 /* LineFeed */ || prevChar === 13 /* CarriageReturn */) {\n                        lines[0] = model.normalizeIndentation(lineLeadingWhitespace + lines[0]);\n                    }\n                }\n                for (let i = 1; i < lines.length; i++) {\n                    lines[i] = model.normalizeIndentation(lineLeadingWhitespace + lines[i]);\n                }\n            }\n            const newValue = lines.join(model.getEOL());\n            if (newValue !== marker.value) {\n                marker.parent.replace(marker, [new Text(newValue)]);\n                snippetTextString = undefined;\n            }\n            return true;\n        });\n        return lineLeadingWhitespace;\n    }\n    static adjustSelection(model, selection, overwriteBefore, overwriteAfter) {\n        if (overwriteBefore !== 0 || overwriteAfter !== 0) {\n            // overwrite[Before|After] is compute using the position, not the whole\n            // selection. therefore we adjust the selection around that position\n            const { positionLineNumber, positionColumn } = selection;\n            const positionColumnBefore = positionColumn - overwriteBefore;\n            const positionColumnAfter = positionColumn + overwriteAfter;\n            const range = model.validateRange({\n                startLineNumber: positionLineNumber,\n                startColumn: positionColumnBefore,\n                endLineNumber: positionLineNumber,\n                endColumn: positionColumnAfter\n            });\n            selection = Selection.createWithDirection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn, selection.getDirection());\n        }\n        return selection;\n    }\n    static createEditsAndSnippets(editor, template, overwriteBefore, overwriteAfter, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer) {\n        const edits = [];\n        const snippets = [];\n        if (!editor.hasModel()) {\n            return { edits, snippets };\n        }\n        const model = editor.getModel();\n        const workspaceService = editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService));\n        const modelBasedVariableResolver = editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model));\n        const readClipboardText = () => clipboardText;\n        let delta = 0;\n        // know what text the overwrite[Before|After] extensions\n        // of the primary curser have selected because only when\n        // secondary selections extend to the same text we can grow them\n        let firstBeforeText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), overwriteBefore, 0));\n        let firstAfterText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), 0, overwriteAfter));\n        // remember the first non-whitespace column to decide if\n        // `keepWhitespace` should be overruled for secondary selections\n        let firstLineFirstNonWhitespace = model.getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber);\n        // sort selections by their start position but remeber\n        // the original index. that allows you to create correct\n        // offset-based selection logic without changing the\n        // primary selection\n        const indexedSelections = editor.getSelections()\n            .map((selection, idx) => ({ selection, idx }))\n            .sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        for (const { selection, idx } of indexedSelections) {\n            // extend selection with the `overwriteBefore` and `overwriteAfter` and then\n            // compare if this matches the extensions of the primary selection\n            let extensionBefore = SnippetSession.adjustSelection(model, selection, overwriteBefore, 0);\n            let extensionAfter = SnippetSession.adjustSelection(model, selection, 0, overwriteAfter);\n            if (firstBeforeText !== model.getValueInRange(extensionBefore)) {\n                extensionBefore = selection;\n            }\n            if (firstAfterText !== model.getValueInRange(extensionAfter)) {\n                extensionAfter = selection;\n            }\n            // merge the before and after selection into one\n            const snippetSelection = selection\n                .setStartPosition(extensionBefore.startLineNumber, extensionBefore.startColumn)\n                .setEndPosition(extensionAfter.endLineNumber, extensionAfter.endColumn);\n            const snippet = new SnippetParser().parse(template, true, enforceFinalTabstop);\n            // adjust the template string to match the indentation and\n            // whitespace rules of this insert location (can be different for each cursor)\n            // happens when being asked for (default) or when this is a secondary\n            // cursor and the leading whitespace is different\n            const start = snippetSelection.getStartPosition();\n            const snippetLineLeadingWhitespace = SnippetSession.adjustWhitespace(model, start, snippet, adjustWhitespace || (idx > 0 && firstLineFirstNonWhitespace !== model.getLineFirstNonWhitespaceColumn(selection.positionLineNumber)), true);\n            snippet.resolveVariables(new CompositeSnippetVariableResolver([\n                modelBasedVariableResolver,\n                new ClipboardBasedVariableResolver(readClipboardText, idx, indexedSelections.length, editor.getOption(71 /* multiCursorPaste */) === 'spread'),\n                new SelectionBasedVariableResolver(model, selection, idx, overtypingCapturer),\n                new CommentBasedVariableResolver(model, selection),\n                new TimeBasedVariableResolver,\n                new WorkspaceBasedVariableResolver(workspaceService),\n                new RandomBasedVariableResolver,\n            ]));\n            const offset = model.getOffsetAt(start) + delta;\n            delta += snippet.toString().length - model.getValueLengthInRange(snippetSelection);\n            // store snippets with the index of their originating selection.\n            // that ensures the primiary cursor stays primary despite not being\n            // the one with lowest start position\n            edits[idx] = EditOperation.replace(snippetSelection, snippet.toString());\n            edits[idx].identifier = { major: idx, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\n            snippets[idx] = new OneSnippet(editor, snippet, offset, snippetLineLeadingWhitespace);\n        }\n        return { edits, snippets };\n    }\n    dispose() {\n        dispose(this._snippets);\n    }\n    _logInfo() {\n        return `template=\"${this._template}\", merged_templates=\"${this._templateMerges.join(' -> ')}\"`;\n    }\n    insert() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // make insert edit and start with first selections\n        const { edits, snippets } = SnippetSession.createEditsAndSnippets(this._editor, this._template, this._options.overwriteBefore, this._options.overwriteAfter, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer);\n        this._snippets = snippets;\n        this._editor.executeEdits('snippet', edits, undoEdits => {\n            if (this._snippets[0].hasPlaceholder) {\n                return this._move(true);\n            }\n            else {\n                return undoEdits\n                    .filter(edit => !!edit.identifier) // only use our undo edits\n                    .map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n            }\n        });\n        this._editor.revealRange(this._editor.getSelections()[0]);\n    }\n    merge(template, options = _defaultOptions) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._templateMerges.push([this._snippets[0]._nestingLevel, this._snippets[0]._placeholderGroupsIdx, template]);\n        const { edits, snippets } = SnippetSession.createEditsAndSnippets(this._editor, template, options.overwriteBefore, options.overwriteAfter, true, options.adjustWhitespace, options.clipboardText, options.overtypingCapturer);\n        this._editor.executeEdits('snippet', edits, undoEdits => {\n            for (const snippet of this._snippets) {\n                snippet.merge(snippets);\n            }\n            console.assert(snippets.length === 0);\n            if (this._snippets[0].hasPlaceholder) {\n                return this._move(undefined);\n            }\n            else {\n                return (undoEdits\n                    .filter(edit => !!edit.identifier) // only use our undo edits\n                    .map(edit => Selection.fromPositions(edit.range.getEndPosition())));\n            }\n        });\n    }\n    next() {\n        const newSelections = this._move(true);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    prev() {\n        const newSelections = this._move(false);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    _move(fwd) {\n        const selections = [];\n        for (const snippet of this._snippets) {\n            const oneSelection = snippet.move(fwd);\n            selections.push(...oneSelection);\n        }\n        return selections;\n    }\n    get isAtFirstPlaceholder() {\n        return this._snippets[0].isAtFirstPlaceholder;\n    }\n    get isAtLastPlaceholder() {\n        return this._snippets[0].isAtLastPlaceholder;\n    }\n    get hasPlaceholder() {\n        return this._snippets[0].hasPlaceholder;\n    }\n    get choice() {\n        return this._snippets[0].choice;\n    }\n    isSelectionWithinPlaceholders() {\n        if (!this.hasPlaceholder) {\n            return false;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length < this._snippets.length) {\n            // this means we started snippet mode with N\n            // selections and have M (N > M) selections.\n            // So one snippet is without selection -> cancel\n            return false;\n        }\n        let allPossibleSelections = new Map();\n        for (const snippet of this._snippets) {\n            const possibleSelections = snippet.computePossibleSelections();\n            // for the first snippet find the placeholder (and its ranges)\n            // that contain at least one selection. for all remaining snippets\n            // the same placeholder (and their ranges) must be used.\n            if (allPossibleSelections.size === 0) {\n                for (const [index, ranges] of possibleSelections) {\n                    ranges.sort(Range.compareRangesUsingStarts);\n                    for (const selection of selections) {\n                        if (ranges[0].containsRange(selection)) {\n                            allPossibleSelections.set(index, []);\n                            break;\n                        }\n                    }\n                }\n            }\n            if (allPossibleSelections.size === 0) {\n                // return false if we couldn't associate a selection to\n                // this (the first) snippet\n                return false;\n            }\n            // add selections from 'this' snippet so that we know all\n            // selections for this placeholder\n            allPossibleSelections.forEach((array, index) => {\n                array.push(...possibleSelections.get(index));\n            });\n        }\n        // sort selections (and later placeholder-ranges). then walk both\n        // arrays and make sure the placeholder-ranges contain the corresponding\n        // selection\n        selections.sort(Range.compareRangesUsingStarts);\n        for (let [index, ranges] of allPossibleSelections) {\n            if (ranges.length !== selections.length) {\n                allPossibleSelections.delete(index);\n                continue;\n            }\n            ranges.sort(Range.compareRangesUsingStarts);\n            for (let i = 0; i < ranges.length; i++) {\n                if (!ranges[i].containsRange(selections[i])) {\n                    allPossibleSelections.delete(index);\n                    continue;\n                }\n            }\n        }\n        // from all possible selections we have deleted those\n        // that don't match with the current selection. if we don't\n        // have any left, we don't have a selection anymore\n        return allPossibleSelections.size > 0;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { canceled, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { historyNavigationVisible } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nexport const Context = {\n    Visible: historyNavigationVisible,\n    DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\n    HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\n    InsertMode: new RawContextKey('suggestionInsertMode', undefined, { type: 'string', description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\") }),\n    CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\")),\n};\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\nexport class CompletionItem {\n    constructor(position, completion, container, provider) {\n        this.position = position;\n        this.completion = completion;\n        this.container = container;\n        this.provider = provider;\n        // validation\n        this.isInvalid = false;\n        // sorting, filtering\n        this.score = FuzzyScore.Default;\n        this.distance = 0;\n        this.textLabel = typeof completion.label === 'string'\n            ? completion.label\n            : completion.label.label;\n        // ensure lower-variants (perf)\n        this.labelLow = this.textLabel.toLowerCase();\n        // validate label\n        this.isInvalid = !this.textLabel;\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\n        // normalize ranges\n        if (Range.isIRange(completion.range)) {\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            // validate range\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\n        }\n        else {\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\n            // validate ranges\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace)\n                || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber\n                || completion.range.insert.startColumn !== completion.range.replace.startColumn;\n        }\n        // create the suggestion resolver\n        if (typeof provider.resolveCompletionItem !== 'function') {\n            this._resolveCache = Promise.resolve();\n            this._isResolved = true;\n        }\n    }\n    // ---- resolving\n    get isResolved() {\n        return !!this._isResolved;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._resolveCache) {\n                const sub = token.onCancellationRequested(() => {\n                    this._resolveCache = undefined;\n                    this._isResolved = false;\n                });\n                this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\n                    Object.assign(this.completion, value);\n                    this._isResolved = true;\n                    sub.dispose();\n                }, err => {\n                    if (isCancellationError(err)) {\n                        // the IPC queue will reject the request with the\n                        // cancellation error -> reset cached\n                        this._resolveCache = undefined;\n                        this._isResolved = false;\n                    }\n                });\n            }\n            return this._resolveCache;\n        });\n    }\n}\nexport class CompletionOptions {\n    constructor(snippetSortOrder = 2 /* Bottom */, kindFilter = new Set(), providerFilter = new Set(), showDeprecated = true) {\n        this.snippetSortOrder = snippetSortOrder;\n        this.kindFilter = kindFilter;\n        this.providerFilter = providerFilter;\n        this.showDeprecated = showDeprecated;\n    }\n}\nCompletionOptions.default = new CompletionOptions();\nlet _snippetSuggestSupport;\nexport function getSnippetSuggestSupport() {\n    return _snippetSuggestSupport;\n}\nexport class CompletionItemModel {\n    constructor(items, needsClipboard, durations, disposable) {\n        this.items = items;\n        this.needsClipboard = needsClipboard;\n        this.durations = durations;\n        this.disposable = disposable;\n    }\n}\nexport function provideSuggestionItems(registry, model, position, options = CompletionOptions.default, context = { triggerKind: 0 /* Invoke */ }, token = CancellationToken.None) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sw = new StopWatch(true);\n        position = position.clone();\n        const word = model.getWordAtPosition(position);\n        const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\n        const defaultRange = { replace: defaultReplaceRange, insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column) };\n        const result = [];\n        const disposables = new DisposableStore();\n        const durations = [];\n        let needsClipboard = false;\n        const onCompletionList = (provider, container, sw) => {\n            var _a, _b, _c;\n            let didAddResult = false;\n            if (!container) {\n                return didAddResult;\n            }\n            for (let suggestion of container.suggestions) {\n                if (!options.kindFilter.has(suggestion.kind)) {\n                    // skip if not showing deprecated suggestions\n                    if (!options.showDeprecated && ((_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.tags) === null || _a === void 0 ? void 0 : _a.includes(1 /* Deprecated */))) {\n                        continue;\n                    }\n                    // fill in default range when missing\n                    if (!suggestion.range) {\n                        suggestion.range = defaultRange;\n                    }\n                    // fill in default sortText when missing\n                    if (!suggestion.sortText) {\n                        suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\n                    }\n                    if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* InsertAsSnippet */) {\n                        needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\n                    }\n                    result.push(new CompletionItem(position, suggestion, container, provider));\n                    didAddResult = true;\n                }\n            }\n            if (isDisposable(container)) {\n                disposables.add(container);\n            }\n            durations.push({\n                providerName: (_b = provider._debugDisplayName) !== null && _b !== void 0 ? _b : 'unknown_provider', elapsedProvider: (_c = container.duration) !== null && _c !== void 0 ? _c : -1, elapsedOverall: sw.elapsed()\n            });\n            return didAddResult;\n        };\n        // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\n        // do so - no snippet filter, no special-providers-only request\n        const snippetCompletions = (() => __awaiter(this, void 0, void 0, function* () {\n            if (!_snippetSuggestSupport || options.kindFilter.has(27 /* Snippet */)) {\n                return;\n            }\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\n                return;\n            }\n            const sw = new StopWatch(true);\n            const list = yield _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\n            onCompletionList(_snippetSuggestSupport, list, sw);\n        }))();\n        // add suggestions from contributed providers - providers are ordered in groups of\n        // equal score and once a group produces a result the process stops\n        // get provider groups, always add snippet suggestion provider\n        for (let providerGroup of registry.orderedGroups(model)) {\n            // for each support in the group ask for suggestions\n            let didAddResult = false;\n            yield Promise.all(providerGroup.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n                    return;\n                }\n                try {\n                    const sw = new StopWatch(true);\n                    const list = yield provider.provideCompletionItems(model, position, context, token);\n                    didAddResult = onCompletionList(provider, list, sw) || didAddResult;\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            if (didAddResult || token.isCancellationRequested) {\n                break;\n            }\n        }\n        yield snippetCompletions;\n        if (token.isCancellationRequested) {\n            disposables.dispose();\n            return Promise.reject(canceled());\n        }\n        return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, { entries: durations, elapsed: sw.elapsed() }, disposables);\n    });\n}\nfunction defaultComparator(a, b) {\n    // check with 'sortText'\n    if (a.sortTextLow && b.sortTextLow) {\n        if (a.sortTextLow < b.sortTextLow) {\n            return -1;\n        }\n        else if (a.sortTextLow > b.sortTextLow) {\n            return 1;\n        }\n    }\n    // check with 'label'\n    if (a.completion.label < b.completion.label) {\n        return -1;\n    }\n    else if (a.completion.label > b.completion.label) {\n        return 1;\n    }\n    // check with 'type'\n    return a.completion.kind - b.completion.kind;\n}\nfunction snippetUpComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* Snippet */) {\n            return -1;\n        }\n        else if (b.completion.kind === 27 /* Snippet */) {\n            return 1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nfunction snippetDownComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* Snippet */) {\n            return 1;\n        }\n        else if (b.completion.kind === 27 /* Snippet */) {\n            return -1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nconst _snippetComparators = new Map();\n_snippetComparators.set(0 /* Top */, snippetUpComparator);\n_snippetComparators.set(2 /* Bottom */, snippetDownComparator);\n_snippetComparators.set(1 /* Inline */, defaultComparator);\nexport function getSuggestionComparator(snippetConfig) {\n    return _snippetComparators.get(snippetConfig);\n}\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter, maxItemsToResolve] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = {\n            incomplete: false,\n            suggestions: []\n        };\n        const resolving = [];\n        const completions = yield provideSuggestionItems(completionProvider, ref.object.textEditorModel, Position.lift(position), undefined, { triggerCharacter, triggerKind: triggerCharacter ? 1 /* TriggerCharacter */ : 0 /* Invoke */ });\n        for (const item of completions.items) {\n            if (resolving.length < (maxItemsToResolve !== null && maxItemsToResolve !== void 0 ? maxItemsToResolve : 0)) {\n                resolving.push(item.resolve(CancellationToken.None));\n            }\n            result.incomplete = result.incomplete || item.container.incomplete;\n            result.suggestions.push(item.completion);\n        }\n        try {\n            yield Promise.all(resolving);\n            return result;\n        }\n        finally {\n            setTimeout(() => completions.disposable.dispose(), 100);\n        }\n    }\n    finally {\n        ref.dispose();\n    }\n}));\nlet _onlyOnceProvider;\nlet _onlyOnceSuggestions = [];\nexport function showSimpleSuggestions(accessor, editor, suggestions) {\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\n    if (!_onlyOnceProvider) {\n        _onlyOnceProvider = new class {\n            provideCompletionItems() {\n                let suggestions = _onlyOnceSuggestions.slice(0);\n                let result = { suggestions };\n                _onlyOnceSuggestions.length = 0;\n                return result;\n            }\n        };\n        completionProvider.register('*', _onlyOnceProvider);\n    }\n    setTimeout(() => {\n        var _a;\n        _onlyOnceSuggestions.push(...suggestions);\n        (_a = editor.getContribution('editor.contrib.suggestController')) === null || _a === void 0 ? void 0 : _a.triggerSuggest(new Set().add(_onlyOnceProvider));\n    }, 0);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LRUCache, TernarySearchTree } from '../../../../base/common/map.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport class Memory {\n    constructor(name) {\n        this.name = name;\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        let topScore = items[0].score[0];\n        for (let i = 0; i < items.length; i++) {\n            const { score, completion: suggestion } = items[i];\n            if (score[0] !== topScore) {\n                // stop when leaving the group of top matches\n                break;\n            }\n            if (suggestion.preselect) {\n                // stop when seeing an auto-select-item\n                return i;\n            }\n        }\n        return 0;\n    }\n}\nexport class NoMemory extends Memory {\n    constructor() {\n        super('first');\n    }\n    memorize(model, pos, item) {\n        // no-op\n    }\n    toJSON() {\n        return undefined;\n    }\n    fromJSON() {\n        //\n    }\n}\nexport class LRUMemory extends Memory {\n    constructor() {\n        super('recentlyUsed');\n        this._cache = new LRUCache(300, 0.66);\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const key = `${model.getLanguageId()}/${item.textLabel}`;\n        this._cache.set(key, {\n            touch: this._seq++,\n            type: item.completion.kind,\n            insertText: item.completion.insertText\n        });\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\n        if (/\\s$/.test(lineSuffix)) {\n            return super.select(model, pos, items);\n        }\n        let topScore = items[0].score[0];\n        let indexPreselect = -1;\n        let indexRecency = -1;\n        let seq = -1;\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].score[0] !== topScore) {\n                // consider only top items\n                break;\n            }\n            const key = `${model.getLanguageId()}/${items[i].textLabel}`;\n            const item = this._cache.peek(key);\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\n                seq = item.touch;\n                indexRecency = i;\n            }\n            if (items[i].completion.preselect && indexPreselect === -1) {\n                // stop when seeing an auto-select-item\n                return indexPreselect = i;\n            }\n        }\n        if (indexRecency !== -1) {\n            return indexRecency;\n        }\n        else if (indexPreselect !== -1) {\n            return indexPreselect;\n        }\n        else {\n            return 0;\n        }\n    }\n    toJSON() {\n        return this._cache.toJSON();\n    }\n    fromJSON(data) {\n        this._cache.clear();\n        let seq = 0;\n        for (const [key, value] of data) {\n            value.touch = seq;\n            value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n            this._cache.set(key, value);\n        }\n        this._seq = this._cache.size;\n    }\n}\nexport class PrefixMemory extends Memory {\n    constructor() {\n        super('recentlyUsedByPrefix');\n        this._trie = TernarySearchTree.forStrings();\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const { word } = model.getWordUntilPosition(pos);\n        const key = `${model.getLanguageId()}/${word}`;\n        this._trie.set(key, {\n            type: item.completion.kind,\n            insertText: item.completion.insertText,\n            touch: this._seq++\n        });\n    }\n    select(model, pos, items) {\n        let { word } = model.getWordUntilPosition(pos);\n        if (!word) {\n            return super.select(model, pos, items);\n        }\n        let key = `${model.getLanguageId()}/${word}`;\n        let item = this._trie.get(key);\n        if (!item) {\n            item = this._trie.findSubstr(key);\n        }\n        if (item) {\n            for (let i = 0; i < items.length; i++) {\n                let { kind, insertText } = items[i].completion;\n                if (kind === item.type && insertText === item.insertText) {\n                    return i;\n                }\n            }\n        }\n        return super.select(model, pos, items);\n    }\n    toJSON() {\n        let entries = [];\n        this._trie.forEach((value, key) => entries.push([key, value]));\n        // sort by last recently used (touch), then\n        // take the top 200 item and normalize their\n        // touch\n        entries\n            .sort((a, b) => -(a[1].touch - b[1].touch))\n            .forEach((value, i) => value[1].touch = i);\n        return entries.slice(0, 200);\n    }\n    fromJSON(data) {\n        this._trie.clear();\n        if (data.length > 0) {\n            this._seq = data[0][1].touch + 1;\n            for (const [key, value] of data) {\n                value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n                this._trie.set(key, value);\n            }\n        }\n    }\n}\nlet SuggestMemoryService = class SuggestMemoryService {\n    constructor(_storageService, _configService) {\n        this._storageService = _storageService;\n        this._configService = _configService;\n        this._disposables = new DisposableStore();\n        this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\n        this._disposables.add(_storageService.onWillSaveState(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                this._saveState();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._persistSoon.dispose();\n    }\n    memorize(model, pos, item) {\n        this._withStrategy(model, pos).memorize(model, pos, item);\n        this._persistSoon.schedule();\n    }\n    select(model, pos, items) {\n        return this._withStrategy(model, pos).select(model, pos, items);\n    }\n    _withStrategy(model, pos) {\n        var _a;\n        const mode = this._configService.getValue('editor.suggestSelection', {\n            overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\n            resource: model.uri\n        });\n        if (((_a = this._strategy) === null || _a === void 0 ? void 0 : _a.name) !== mode) {\n            this._saveState();\n            const ctor = SuggestMemoryService._strategyCtors.get(mode) || NoMemory;\n            this._strategy = new ctor();\n            try {\n                const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n                const scope = share ? 0 /* GLOBAL */ : 1 /* WORKSPACE */;\n                const raw = this._storageService.get(`${SuggestMemoryService._storagePrefix}/${mode}`, scope);\n                if (raw) {\n                    this._strategy.fromJSON(JSON.parse(raw));\n                }\n            }\n            catch (e) {\n                // things can go wrong with JSON...\n            }\n        }\n        return this._strategy;\n    }\n    _saveState() {\n        if (this._strategy) {\n            const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n            const scope = share ? 0 /* GLOBAL */ : 1 /* WORKSPACE */;\n            const raw = JSON.stringify(this._strategy);\n            this._storageService.store(`${SuggestMemoryService._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* MACHINE */);\n        }\n    }\n};\nSuggestMemoryService._strategyCtors = new Map([\n    ['recentlyUsedByPrefix', PrefixMemory],\n    ['recentlyUsed', LRUMemory],\n    ['first', NoMemory]\n]);\nSuggestMemoryService._storagePrefix = 'suggest/memories';\nSuggestMemoryService = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], SuggestMemoryService);\nexport { SuggestMemoryService };\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, true);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet WordContextKey = class WordContextKey {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._enabled = false;\n        this._ckAtEnd = WordContextKey.AtEnd.bindTo(contextKeyService);\n        this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(111 /* tabCompletion */) && this._update());\n        this._update();\n    }\n    dispose() {\n        var _a;\n        this._configListener.dispose();\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._ckAtEnd.reset();\n    }\n    _update() {\n        // only update this when tab completions are enabled\n        const enabled = this._editor.getOption(111 /* tabCompletion */) === 'on';\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        if (this._enabled) {\n            const checkForWordEnd = () => {\n                if (!this._editor.hasModel()) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                const model = this._editor.getModel();\n                const selection = this._editor.getSelection();\n                const word = model.getWordAtPosition(selection.getStartPosition());\n                if (!word) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n            };\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n            checkForWordEnd();\n        }\n        else if (this._selectionListener) {\n            this._ckAtEnd.reset();\n            this._selectionListener.dispose();\n            this._selectionListener = undefined;\n        }\n    }\n};\nWordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\nWordContextKey = __decorate([\n    __param(1, IContextKeyService)\n], WordContextKey);\nexport { WordContextKey };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet SuggestAlternatives = class SuggestAlternatives {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._index = 0;\n        this._ckOtherSuggestions = SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService);\n    }\n    dispose() {\n        this.reset();\n    }\n    reset() {\n        var _a;\n        this._ckOtherSuggestions.reset();\n        (_a = this._listener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._model = undefined;\n        this._acceptNext = undefined;\n        this._ignore = false;\n    }\n    set({ model, index }, acceptNext) {\n        // no suggestions -> nothing to do\n        if (model.items.length === 0) {\n            this.reset();\n            return;\n        }\n        // no alternative suggestions -> nothing to do\n        let nextIndex = SuggestAlternatives._moveIndex(true, model, index);\n        if (nextIndex === index) {\n            this.reset();\n            return;\n        }\n        this._acceptNext = acceptNext;\n        this._model = model;\n        this._index = index;\n        this._listener = this._editor.onDidChangeCursorPosition(() => {\n            if (!this._ignore) {\n                this.reset();\n            }\n        });\n        this._ckOtherSuggestions.set(true);\n    }\n    static _moveIndex(fwd, model, index) {\n        let newIndex = index;\n        while (true) {\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n            if (newIndex === index) {\n                break;\n            }\n            if (!model.items[newIndex].completion.additionalTextEdits) {\n                break;\n            }\n        }\n        return newIndex;\n    }\n    next() {\n        this._move(true);\n    }\n    prev() {\n        this._move(false);\n    }\n    _move(fwd) {\n        if (!this._model) {\n            // nothing to reason about\n            return;\n        }\n        try {\n            this._ignore = true;\n            this._index = SuggestAlternatives._moveIndex(fwd, this._model, this._index);\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\n        }\n        finally {\n            this._ignore = false;\n        }\n    }\n};\nSuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\nSuggestAlternatives = __decorate([\n    __param(1, IContextKeyService)\n], SuggestAlternatives);\nexport { SuggestAlternatives };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nexport class CommitCharacterController {\n    constructor(editor, widget, accept) {\n        this._disposables = new DisposableStore();\n        this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\n        this._disposables.add(widget.onDidHide(this.reset, this));\n        this._disposables.add(editor.onWillType(text => {\n            if (this._active && !widget.isFrozen()) {\n                const ch = text.charCodeAt(text.length - 1);\n                if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* acceptSuggestionOnCommitCharacter */)) {\n                    accept(this._active.item);\n                }\n            }\n        }));\n    }\n    _onItem(selected) {\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n            // no item or no commit characters\n            this.reset();\n            return;\n        }\n        if (this._active && this._active.item.item === selected.item) {\n            // still the same item\n            return;\n        }\n        // keep item and its commit characters\n        const acceptCharacters = new CharacterSet();\n        for (const ch of selected.item.completion.commitCharacters) {\n            if (ch.length > 0) {\n                acceptCharacters.add(ch.charCodeAt(0));\n            }\n        }\n        this._active = { acceptCharacters, item: selected };\n    }\n    reset() {\n        this._active = undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { Range } from '../../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\nexport class WordDistance {\n    static create(service, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.getOption(106 /* suggest */).localityBonus) {\n                return WordDistance.None;\n            }\n            if (!editor.hasModel()) {\n                return WordDistance.None;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!service.canComputeWordRanges(model.uri)) {\n                return WordDistance.None;\n            }\n            const [ranges] = yield new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n            if (ranges.length === 0) {\n                return WordDistance.None;\n            }\n            const wordRanges = yield service.computeWordRanges(model.uri, ranges[0].range);\n            if (!wordRanges) {\n                return WordDistance.None;\n            }\n            // remove current word\n            const wordUntilPos = model.getWordUntilPosition(position);\n            delete wordRanges[wordUntilPos.word];\n            return new class extends WordDistance {\n                distance(anchor, item) {\n                    if (!position.equals(editor.getPosition())) {\n                        return 0;\n                    }\n                    if (item.kind === 17 /* Keyword */) {\n                        return 2 << 20;\n                    }\n                    let word = typeof item.label === 'string' ? item.label : item.label.label;\n                    let wordLines = wordRanges[word];\n                    if (isFalsyOrEmpty(wordLines)) {\n                        return 2 << 20;\n                    }\n                    let idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n                    let bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n                    let blockDistance = ranges.length;\n                    for (const range of ranges) {\n                        if (!Range.containsRange(range.range, bestWordRange)) {\n                            break;\n                        }\n                        blockDistance -= 1;\n                    }\n                    return blockDistance;\n                }\n            };\n        });\n    }\n}\nWordDistance.None = new class extends WordDistance {\n    distance() { return 0; }\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { quickSelect } from '../../../../base/common/arrays.js';\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive } from '../../../../base/common/filters.js';\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\nexport class LineContext {\n    constructor(leadingLineContent, characterCountDelta) {\n        this.leadingLineContent = leadingLineContent;\n        this.characterCountDelta = characterCountDelta;\n    }\n}\n/**\n * Sorted, filtered completion view model\n * */\nexport class CompletionModel {\n    constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, clipboardText) {\n        this.clipboardText = clipboardText;\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\n        this._items = items;\n        this._column = column;\n        this._wordDistance = wordDistance;\n        this._options = options;\n        this._refilterKind = 1 /* All */;\n        this._lineContext = lineContext;\n        if (snippetSuggestions === 'top') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n        }\n        else if (snippetSuggestions === 'bottom') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n        }\n    }\n    get lineContext() {\n        return this._lineContext;\n    }\n    set lineContext(value) {\n        if (this._lineContext.leadingLineContent !== value.leadingLineContent\n            || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n            this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Incr */ : 1 /* All */;\n            this._lineContext = value;\n        }\n    }\n    get items() {\n        this._ensureCachedState();\n        return this._filteredItems;\n    }\n    get allProvider() {\n        this._ensureCachedState();\n        return this._providerInfo.keys();\n    }\n    get incomplete() {\n        this._ensureCachedState();\n        const result = new Set();\n        for (let [provider, incomplete] of this._providerInfo) {\n            if (incomplete) {\n                result.add(provider);\n            }\n        }\n        return result;\n    }\n    adopt(except) {\n        let res = [];\n        for (let i = 0; i < this._items.length;) {\n            if (!except.has(this._items[i].provider)) {\n                res.push(this._items[i]);\n                // unordered removed\n                this._items[i] = this._items[this._items.length - 1];\n                this._items.pop();\n            }\n            else {\n                // continue with next item\n                i++;\n            }\n        }\n        this._refilterKind = 1 /* All */;\n        return res;\n    }\n    get stats() {\n        this._ensureCachedState();\n        return this._stats;\n    }\n    _ensureCachedState() {\n        if (this._refilterKind !== 0 /* Nothing */) {\n            this._createCachedState();\n        }\n    }\n    _createCachedState() {\n        this._providerInfo = new Map();\n        const labelLengths = [];\n        const { leadingLineContent, characterCountDelta } = this._lineContext;\n        let word = '';\n        let wordLow = '';\n        // incrementally filter less\n        const source = this._refilterKind === 1 /* All */ ? this._items : this._filteredItems;\n        const target = [];\n        // picks a score function based on the number of\n        // items that we have to score/filter and based on the\n        // user-configuration\n        const scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\n        for (let i = 0; i < source.length; i++) {\n            const item = source[i];\n            if (item.isInvalid) {\n                continue; // SKIP invalid items\n            }\n            // collect all support, know if their result is incomplete\n            this._providerInfo.set(item.provider, Boolean(item.container.incomplete));\n            // 'word' is that remainder of the current line that we\n            // filter and score against. In theory each suggestion uses a\n            // different word, but in practice not - that's why we cache\n            const overwriteBefore = item.position.column - item.editStart.column;\n            const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n            if (word.length !== wordLen) {\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n                wordLow = word.toLowerCase();\n            }\n            // remember the word against which this item was\n            // scored\n            item.word = word;\n            if (wordLen === 0) {\n                // when there is nothing to score against, don't\n                // event try to do. Use a const rank and rely on\n                // the fallback-sort using the initial sort order.\n                // use a score of `-100` because that is out of the\n                // bound of values `fuzzyScore` will return\n                item.score = FuzzyScore.Default;\n            }\n            else {\n                // skip word characters that are whitespace until\n                // we have hit the replace range (overwriteBefore)\n                let wordPos = 0;\n                while (wordPos < overwriteBefore) {\n                    const ch = word.charCodeAt(wordPos);\n                    if (ch === 32 /* Space */ || ch === 9 /* Tab */) {\n                        wordPos += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (wordPos >= wordLen) {\n                    // the wordPos at which scoring starts is the whole word\n                    // and therefore the same rules as not having a word apply\n                    item.score = FuzzyScore.Default;\n                }\n                else if (typeof item.completion.filterText === 'string') {\n                    // when there is a `filterText` it must match the `word`.\n                    // if it matches we check with the label to compute highlights\n                    // and if that doesn't yield a result we have no highlights,\n                    // despite having the match\n                    let match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, false);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\n                        // filterText and label are actually the same -> use good highlights\n                        item.score = match;\n                    }\n                    else {\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\n                        // of the filterText-match\n                        item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\n                        item.score[0] = match[0]; // use score from filterText\n                    }\n                }\n                else {\n                    // by default match `word` against the `label`\n                    let match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, false);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    item.score = match;\n                }\n            }\n            item.idx = i;\n            item.distance = this._wordDistance.distance(item.position, item.completion);\n            target.push(item);\n            // update stats\n            labelLengths.push(item.textLabel.length);\n        }\n        this._filteredItems = target.sort(this._snippetCompareFn);\n        this._refilterKind = 0 /* Nothing */;\n        this._stats = {\n            pLabelLen: labelLengths.length ?\n                quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b)\n                : 0\n        };\n    }\n    static _compareCompletionItems(a, b) {\n        if (a.score[0] > b.score[0]) {\n            return -1;\n        }\n        else if (a.score[0] < b.score[0]) {\n            return 1;\n        }\n        else if (a.distance < b.distance) {\n            return -1;\n        }\n        else if (a.distance > b.distance) {\n            return 1;\n        }\n        else if (a.idx < b.idx) {\n            return -1;\n        }\n        else if (a.idx > b.idx) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static _compareCompletionItemsSnippetsDown(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* Snippet */) {\n                return 1;\n            }\n            else if (b.completion.kind === 27 /* Snippet */) {\n                return -1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n    static _compareCompletionItemsSnippetsUp(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* Snippet */) {\n                return -1;\n            }\n            else if (b.completion.kind === 27 /* Snippet */) {\n                return 1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CompletionModel } from './completionModel.js';\nimport { CompletionOptions, getSnippetSuggestSupport, getSuggestionComparator, provideSuggestionItems } from './suggest.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class LineContext {\n    constructor(model, position, auto, shy) {\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n        this.leadingWord = model.getWordUntilPosition(position);\n        this.lineNumber = position.lineNumber;\n        this.column = position.column;\n        this.auto = auto;\n        this.shy = shy;\n    }\n    static shouldAutoTrigger(editor) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const pos = editor.getPosition();\n        model.tokenizeIfCheap(pos.lineNumber);\n        const word = model.getWordAtPosition(pos);\n        if (!word) {\n            return false;\n        }\n        if (word.endColumn !== pos.column) {\n            return false;\n        }\n        if (!isNaN(Number(word.word))) {\n            return false;\n        }\n        return true;\n    }\n}\nfunction isSuggestPreviewEnabled(editor) {\n    return editor.getOption(106 /* suggest */).preview;\n}\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowQuickSuggestions');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowSuggestOnTriggerCharacters');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nlet SuggestModel = class SuggestModel {\n    constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._clipboardService = _clipboardService;\n        this._telemetryService = _telemetryService;\n        this._logService = _logService;\n        this._contextKeyService = _contextKeyService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._toDispose = new DisposableStore();\n        this._quickSuggestDelay = 10;\n        this._triggerCharacterListener = new DisposableStore();\n        this._triggerQuickSuggest = new TimeoutTimer();\n        this._state = 0 /* Idle */;\n        this._completionDisposables = new DisposableStore();\n        this._onDidCancel = new Emitter();\n        this._onDidTrigger = new Emitter();\n        this._onDidSuggest = new Emitter();\n        this.onDidCancel = this._onDidCancel.event;\n        this.onDidTrigger = this._onDidTrigger.event;\n        this.onDidSuggest = this._onDidSuggest.event;\n        this._telemetryGate = 0;\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\n        // wire up various listeners\n        this._toDispose.add(this._editor.onDidChangeModel(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\n            this._updateTriggerCharacters();\n            this._updateQuickSuggest();\n        }));\n        this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(() => {\n            this._updateTriggerCharacters();\n            this._updateActiveSuggestSession();\n        }));\n        let editorIsComposing = false;\n        this._toDispose.add(this._editor.onDidCompositionStart(() => {\n            editorIsComposing = true;\n        }));\n        this._toDispose.add(this._editor.onDidCompositionEnd(() => {\n            editorIsComposing = false;\n            this._onCompositionEnd();\n        }));\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\n            // only trigger suggest when the editor isn't composing a character\n            if (!editorIsComposing) {\n                this._onCursorChange(e);\n            }\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelContent(() => {\n            // only filter completions when the editor isn't composing a character\n            // allow-any-unicode-next-line\n            // e.g. ¨ + u makes ü but just ¨ cannot be used for filtering\n            if (!editorIsComposing) {\n                this._refilterCompletionItems();\n            }\n        }));\n        this._updateTriggerCharacters();\n        this._updateQuickSuggest();\n    }\n    dispose() {\n        dispose(this._triggerCharacterListener);\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\n        this._toDispose.dispose();\n        this._completionDisposables.dispose();\n        this.cancel();\n    }\n    // --- handle configuration & precondition changes\n    _updateQuickSuggest() {\n        this._quickSuggestDelay = this._editor.getOption(80 /* quickSuggestionsDelay */);\n        if (isNaN(this._quickSuggestDelay) || (!this._quickSuggestDelay && this._quickSuggestDelay !== 0) || this._quickSuggestDelay < 0) {\n            this._quickSuggestDelay = 10;\n        }\n    }\n    _updateTriggerCharacters() {\n        this._triggerCharacterListener.clear();\n        if (this._editor.getOption(81 /* readOnly */)\n            || !this._editor.hasModel()\n            || !this._editor.getOption(109 /* suggestOnTriggerCharacters */)) {\n            return;\n        }\n        const supportsByTriggerCharacter = new Map();\n        for (const support of this._languageFeaturesService.completionProvider.all(this._editor.getModel())) {\n            for (const ch of support.triggerCharacters || []) {\n                let set = supportsByTriggerCharacter.get(ch);\n                if (!set) {\n                    set = new Set();\n                    set.add(getSnippetSuggestSupport());\n                    supportsByTriggerCharacter.set(ch, set);\n                }\n                set.add(support);\n            }\n        }\n        const checkTriggerCharacter = (text) => {\n            if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\n                return;\n            }\n            if (LineContext.shouldAutoTrigger(this._editor)) {\n                // don't trigger by trigger characters when this is a case for quick suggest\n                return;\n            }\n            if (!text) {\n                // came here from the compositionEnd-event\n                const position = this._editor.getPosition();\n                const model = this._editor.getModel();\n                text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n            }\n            let lastChar = '';\n            if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\n                if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\n                    lastChar = text.substr(text.length - 2);\n                }\n            }\n            else {\n                lastChar = text.charAt(text.length - 1);\n            }\n            const supports = supportsByTriggerCharacter.get(lastChar);\n            if (supports) {\n                // keep existing items that where not computed by the\n                // supports/providers that want to trigger now\n                const existing = this._completionModel\n                    ? { items: this._completionModel.adopt(supports), clipboardText: this._completionModel.clipboardText }\n                    : undefined;\n                this.trigger({ auto: true, shy: false, triggerCharacter: lastChar }, Boolean(this._completionModel), supports, existing);\n            }\n        };\n        this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\n        this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\n    }\n    // --- trigger/retrigger/cancel suggest\n    get state() {\n        return this._state;\n    }\n    cancel(retrigger = false) {\n        var _a;\n        if (this._state !== 0 /* Idle */) {\n            this._triggerQuickSuggest.cancel();\n            (_a = this._requestToken) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._requestToken = undefined;\n            this._state = 0 /* Idle */;\n            this._completionModel = undefined;\n            this._context = undefined;\n            this._onDidCancel.fire({ retrigger });\n        }\n    }\n    clear() {\n        this._completionDisposables.clear();\n    }\n    _updateActiveSuggestSession() {\n        if (this._state !== 0 /* Idle */) {\n            if (!this._editor.hasModel() || !this._languageFeaturesService.completionProvider.has(this._editor.getModel())) {\n                this.cancel();\n            }\n            else {\n                this.trigger({ auto: this._state === 2 /* Auto */, shy: false }, true);\n            }\n        }\n    }\n    _onCursorChange(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const prevSelection = this._currentSelection;\n        this._currentSelection = this._editor.getSelection();\n        if (!e.selection.isEmpty()\n            || (e.reason !== 0 /* NotSet */ && e.reason !== 3 /* Explicit */)\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\n            // Early exit if nothing needs to be done!\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n            this.cancel();\n            return;\n        }\n        if (this._state === 0 /* Idle */ && e.reason === 0 /* NotSet */) {\n            if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n                // cursor did move RIGHT due to typing -> trigger quick suggest\n                this._doTriggerQuickSuggest();\n            }\n        }\n        else if (this._state !== 0 /* Idle */ && e.reason === 3 /* Explicit */) {\n            // suggest is active and something like cursor keys are used to move\n            // the cursor. this means we can refilter at the new position\n            this._refilterCompletionItems();\n        }\n    }\n    _onCompositionEnd() {\n        // trigger or refilter when composition ends\n        if (this._state === 0 /* Idle */) {\n            this._doTriggerQuickSuggest();\n        }\n        else {\n            this._refilterCompletionItems();\n        }\n    }\n    _doTriggerQuickSuggest() {\n        var _a;\n        if (this._editor.getOption(79 /* quickSuggestions */) === false) {\n            // not enabled\n            return;\n        }\n        if (this._editor.getOption(106 /* suggest */).snippetsPreventQuickSuggestions && ((_a = SnippetController2.get(this._editor)) === null || _a === void 0 ? void 0 : _a.isInSnippet())) {\n            // no quick suggestion when in snippet mode\n            return;\n        }\n        this.cancel();\n        this._triggerQuickSuggest.cancelAndSet(() => {\n            if (this._state !== 0 /* Idle */) {\n                return;\n            }\n            if (!LineContext.shouldAutoTrigger(this._editor)) {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const pos = this._editor.getPosition();\n            // validate enabled now\n            const quickSuggestions = this._editor.getOption(79 /* quickSuggestions */);\n            if (quickSuggestions === false) {\n                return;\n            }\n            else if (quickSuggestions === true) {\n                // all good\n            }\n            else {\n                // Check the type of the token that triggered this\n                model.tokenizeIfCheap(pos.lineNumber);\n                const lineTokens = model.getLineTokens(pos.lineNumber);\n                const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n                const inValidScope = quickSuggestions.other && tokenType === 0 /* Other */\n                    || quickSuggestions.comments && tokenType === 1 /* Comment */\n                    || quickSuggestions.strings && tokenType === 2 /* String */;\n                if (!inValidScope) {\n                    return;\n                }\n            }\n            if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\n                // do not trigger quick suggestions if inline suggestions are shown\n                return;\n            }\n            if (!this._languageFeaturesService.completionProvider.has(model)) {\n                return;\n            }\n            // we made it till here -> trigger now\n            this.trigger({ auto: true, shy: false });\n        }, this._quickSuggestDelay);\n    }\n    _refilterCompletionItems() {\n        // Re-filter suggestions. This MUST run async because filtering/scoring\n        // uses the model content AND the cursor position. The latter is NOT\n        // updated when the document has changed (the event which drives this method)\n        // and therefore a little pause (next mirco task) is needed. See:\n        // https://stackoverflow.com/questions/25915634/difference-between-microtask-and-macrotask-within-an-event-loop-context#25933985\n        Promise.resolve().then(() => {\n            if (this._state === 0 /* Idle */) {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const position = this._editor.getPosition();\n            const ctx = new LineContext(model, position, this._state === 2 /* Auto */, false);\n            this._onNewContext(ctx);\n        });\n    }\n    trigger(context, retrigger = false, onlyFrom, existing) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const auto = context.auto;\n        const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy);\n        // Cancel previous requests, change state & update UI\n        this.cancel(retrigger);\n        this._state = auto ? 2 /* Auto */ : 1 /* Manual */;\n        this._onDidTrigger.fire({ auto, shy: context.shy, position: this._editor.getPosition() });\n        // Capture context when request was sent\n        this._context = ctx;\n        // Build context for request\n        let suggestCtx = { triggerKind: (_a = context.triggerKind) !== null && _a !== void 0 ? _a : 0 /* Invoke */ };\n        if (context.triggerCharacter) {\n            suggestCtx = {\n                triggerKind: 1 /* TriggerCharacter */,\n                triggerCharacter: context.triggerCharacter\n            };\n        }\n        this._requestToken = new CancellationTokenSource();\n        // kind filter and snippet sort rules\n        const snippetSuggestions = this._editor.getOption(101 /* snippetSuggestions */);\n        let snippetSortOrder = 1 /* Inline */;\n        switch (snippetSuggestions) {\n            case 'top':\n                snippetSortOrder = 0 /* Top */;\n                break;\n            // \t↓ that's the default anyways...\n            // case 'inline':\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\n            // \tbreak;\n            case 'bottom':\n                snippetSortOrder = 2 /* Bottom */;\n                break;\n        }\n        const { itemKind: itemKindFilter, showDeprecated } = SuggestModel._createSuggestFilter(this._editor);\n        const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\n        const completions = provideSuggestionItems(this._languageFeaturesService.completionProvider, model, this._editor.getPosition(), new CompletionOptions(snippetSortOrder, itemKindFilter, onlyFrom, showDeprecated), suggestCtx, this._requestToken.token);\n        Promise.all([completions, wordDistance]).then(([completions, wordDistance]) => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            (_b = this._requestToken) === null || _b === void 0 ? void 0 : _b.dispose();\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            let clipboardText = existing === null || existing === void 0 ? void 0 : existing.clipboardText;\n            if (!clipboardText && completions.needsClipboard) {\n                clipboardText = yield this._clipboardService.readText();\n            }\n            if (this._state === 0 /* Idle */) {\n                return;\n            }\n            const model = this._editor.getModel();\n            let items = completions.items;\n            if (existing) {\n                const cmpFn = getSuggestionComparator(snippetSortOrder);\n                items = items.concat(existing.items).sort(cmpFn);\n            }\n            const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy);\n            this._completionModel = new CompletionModel(items, this._context.column, {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            }, wordDistance, this._editor.getOption(106 /* suggest */), this._editor.getOption(101 /* snippetSuggestions */), clipboardText);\n            // store containers so that they can be disposed later\n            this._completionDisposables.add(completions.disposable);\n            this._onNewContext(ctx);\n            // finally report telemetry about durations\n            this._reportDurationsTelemetry(completions.durations);\n        })).catch(onUnexpectedError);\n    }\n    _reportDurationsTelemetry(durations) {\n        if (this._telemetryGate++ % 230 !== 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._telemetryService.publicLog2('suggest.durations.json', { data: JSON.stringify(durations) });\n            this._logService.debug('suggest.durations.json', durations);\n        });\n    }\n    static _createSuggestFilter(editor) {\n        // kind filter and snippet sort rules\n        const result = new Set();\n        // snippet setting\n        const snippetSuggestions = editor.getOption(101 /* snippetSuggestions */);\n        if (snippetSuggestions === 'none') {\n            result.add(27 /* Snippet */);\n        }\n        // type setting\n        const suggestOptions = editor.getOption(106 /* suggest */);\n        if (!suggestOptions.showMethods) {\n            result.add(0 /* Method */);\n        }\n        if (!suggestOptions.showFunctions) {\n            result.add(1 /* Function */);\n        }\n        if (!suggestOptions.showConstructors) {\n            result.add(2 /* Constructor */);\n        }\n        if (!suggestOptions.showFields) {\n            result.add(3 /* Field */);\n        }\n        if (!suggestOptions.showVariables) {\n            result.add(4 /* Variable */);\n        }\n        if (!suggestOptions.showClasses) {\n            result.add(5 /* Class */);\n        }\n        if (!suggestOptions.showStructs) {\n            result.add(6 /* Struct */);\n        }\n        if (!suggestOptions.showInterfaces) {\n            result.add(7 /* Interface */);\n        }\n        if (!suggestOptions.showModules) {\n            result.add(8 /* Module */);\n        }\n        if (!suggestOptions.showProperties) {\n            result.add(9 /* Property */);\n        }\n        if (!suggestOptions.showEvents) {\n            result.add(10 /* Event */);\n        }\n        if (!suggestOptions.showOperators) {\n            result.add(11 /* Operator */);\n        }\n        if (!suggestOptions.showUnits) {\n            result.add(12 /* Unit */);\n        }\n        if (!suggestOptions.showValues) {\n            result.add(13 /* Value */);\n        }\n        if (!suggestOptions.showConstants) {\n            result.add(14 /* Constant */);\n        }\n        if (!suggestOptions.showEnums) {\n            result.add(15 /* Enum */);\n        }\n        if (!suggestOptions.showEnumMembers) {\n            result.add(16 /* EnumMember */);\n        }\n        if (!suggestOptions.showKeywords) {\n            result.add(17 /* Keyword */);\n        }\n        if (!suggestOptions.showWords) {\n            result.add(18 /* Text */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(19 /* Color */);\n        }\n        if (!suggestOptions.showFiles) {\n            result.add(20 /* File */);\n        }\n        if (!suggestOptions.showReferences) {\n            result.add(21 /* Reference */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(22 /* Customcolor */);\n        }\n        if (!suggestOptions.showFolders) {\n            result.add(23 /* Folder */);\n        }\n        if (!suggestOptions.showTypeParameters) {\n            result.add(24 /* TypeParameter */);\n        }\n        if (!suggestOptions.showSnippets) {\n            result.add(27 /* Snippet */);\n        }\n        if (!suggestOptions.showUsers) {\n            result.add(25 /* User */);\n        }\n        if (!suggestOptions.showIssues) {\n            result.add(26 /* Issue */);\n        }\n        return { itemKind: result, showDeprecated: suggestOptions.showDeprecated };\n    }\n    _onNewContext(ctx) {\n        if (!this._context) {\n            // happens when 24x7 IntelliSense is enabled and still in its delay\n            return;\n        }\n        if (ctx.lineNumber !== this._context.lineNumber) {\n            // e.g. happens when pressing Enter while IntelliSense is computed\n            this.cancel();\n            return;\n        }\n        if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\n            // cancel IntelliSense when line start changes\n            // happens when the current word gets outdented\n            this.cancel();\n            return;\n        }\n        if (ctx.column < this._context.column) {\n            // typed -> moved cursor LEFT -> retrigger if still on a word\n            if (ctx.leadingWord.word) {\n                this.trigger({ auto: this._context.auto, shy: false }, true);\n            }\n            else {\n                this.cancel();\n            }\n            return;\n        }\n        if (!this._completionModel) {\n            // happens when IntelliSense is not yet computed\n            return;\n        }\n        if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\n            // started a new word while IntelliSense shows -> retrigger\n            // Select those providers have not contributed to this completion model and re-trigger completions for\n            // them. Also adopt the existing items and merge them into the new completion model\n            const inactiveProvider = new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));\n            for (let provider of this._completionModel.allProvider) {\n                inactiveProvider.delete(provider);\n            }\n            const items = this._completionModel.adopt(new Set());\n            this.trigger({ auto: this._context.auto, shy: false }, true, inactiveProvider, { items, clipboardText: this._completionModel.clipboardText });\n            return;\n        }\n        if (ctx.column > this._context.column && this._completionModel.incomplete.size > 0 && ctx.leadingWord.word.length !== 0) {\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n            const { incomplete } = this._completionModel;\n            const items = this._completionModel.adopt(incomplete);\n            this.trigger({ auto: this._state === 2 /* Auto */, shy: false, triggerKind: 2 /* TriggerForIncompleteCompletions */ }, true, incomplete, { items, clipboardText: this._completionModel.clipboardText });\n        }\n        else {\n            // typed -> moved cursor RIGHT -> update UI\n            let oldLineContext = this._completionModel.lineContext;\n            let isFrozen = false;\n            this._completionModel.lineContext = {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            };\n            if (this._completionModel.items.length === 0) {\n                if (LineContext.shouldAutoTrigger(this._editor) && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n                    // retrigger when heading into a new word\n                    this.trigger({ auto: this._context.auto, shy: false }, true);\n                    return;\n                }\n                if (!this._context.auto) {\n                    // freeze when IntelliSense was manually requested\n                    this._completionModel.lineContext = oldLineContext;\n                    isFrozen = this._completionModel.items.length > 0;\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\n                        // there were results before but now there aren't\n                        // and also we are not on a word anymore -> cancel\n                        this.cancel();\n                        return;\n                    }\n                }\n                else {\n                    // nothing left\n                    this.cancel();\n                    return;\n                }\n            }\n            this._onDidSuggest.fire({\n                completionModel: this._completionModel,\n                auto: this._context.auto,\n                shy: this._context.shy,\n                isFrozen,\n            });\n        }\n    }\n};\nSuggestModel = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IClipboardService),\n    __param(3, ITelemetryService),\n    __param(4, ILogService),\n    __param(5, IContextKeyService),\n    __param(6, IConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], SuggestModel);\nexport { SuggestModel };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class OvertypingCapturer {\n    constructor(editor, suggestModel) {\n        this._disposables = new DisposableStore();\n        this._lastOvertyped = [];\n        this._empty = true;\n        this._disposables.add(editor.onWillType(() => {\n            if (!this._empty) {\n                return;\n            }\n            if (!editor.hasModel()) {\n                return;\n            }\n            const selections = editor.getSelections();\n            const selectionsLength = selections.length;\n            // Check if it will overtype any selections\n            let willOvertype = false;\n            for (let i = 0; i < selectionsLength; i++) {\n                if (!selections[i].isEmpty()) {\n                    willOvertype = true;\n                    break;\n                }\n            }\n            if (!willOvertype) {\n                return;\n            }\n            this._lastOvertyped = [];\n            const model = editor.getModel();\n            for (let i = 0; i < selectionsLength; i++) {\n                const selection = selections[i];\n                // Check for overtyping capturer restrictions\n                if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\n                    return;\n                }\n                this._lastOvertyped[i] = { value: model.getValueInRange(selection), multiline: selection.startLineNumber !== selection.endLineNumber };\n            }\n            this._empty = false;\n        }));\n        this._disposables.add(suggestModel.onDidCancel(e => {\n            if (!this._empty && !e.retrigger) {\n                this._empty = true;\n            }\n        }));\n    }\n    getLastOvertypedInfo(idx) {\n        if (!this._empty && idx >= 0 && idx < this._lastOvertyped.length) {\n            return this._lastOvertyped[idx];\n        }\n        return undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nOvertypingCapturer._maxSelectionLength = 51200;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { suggestWidgetStatusbarMenu } from './suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            this.label.textContent = localize('ddd', '{0} ({1})', this._action.label, StatusBarViewItem.symbolPrintEnter(kb));\n        }\n    }\n    static symbolPrintEnter(kb) {\n        var _a;\n        return (_a = kb.getLabel()) === null || _a === void 0 ? void 0 : _a.replace(/\\benter\\b/gi, '\\u23CE');\n    }\n}\nlet SuggestWidgetStatus = class SuggestWidgetStatus {\n    constructor(container, instantiationService, _menuService, _contextKeyService) {\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._menuDisposables = new DisposableStore();\n        this.element = dom.append(container, dom.$('.suggest-status-bar'));\n        const actionViewItemProvider = (action => {\n            return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\n        });\n        this._leftActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._rightActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._leftActions.domNode.classList.add('left');\n        this._rightActions.domNode.classList.add('right');\n    }\n    dispose() {\n        this._menuDisposables.dispose();\n        this.element.remove();\n    }\n    show() {\n        const menu = this._menuService.createMenu(suggestWidgetStatusbarMenu, this._contextKeyService);\n        const renderMenu = () => {\n            const left = [];\n            const right = [];\n            for (let [group, actions] of menu.getActions()) {\n                if (group === 'left') {\n                    left.push(...actions);\n                }\n                else {\n                    right.push(...actions);\n                }\n            }\n            this._leftActions.clear();\n            this._leftActions.push(left);\n            this._rightActions.clear();\n            this._rightActions.push(right);\n        };\n        this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\n        this._menuDisposables.add(menu);\n    }\n    hide() {\n        this._menuDisposables.clear();\n    }\n};\nSuggestWidgetStatus = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IMenuService),\n    __param(3, IContextKeyService)\n], SuggestWidgetStatus);\nexport { SuggestWidgetStatus };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Dimension } from '../../../../base/browser/dom.js';\nimport { OrthogonalEdge, Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class ResizableHTMLElement {\n    constructor() {\n        this._onDidWillResize = new Emitter();\n        this.onDidWillResize = this._onDidWillResize.event;\n        this._onDidResize = new Emitter();\n        this.onDidResize = this._onDidResize.event;\n        this._sashListener = new DisposableStore();\n        this._size = new Dimension(0, 0);\n        this._minSize = new Dimension(0, 0);\n        this._maxSize = new Dimension(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n        this.domNode = document.createElement('div');\n        this._eastSash = new Sash(this.domNode, { getVerticalSashLeft: () => this._size.width }, { orientation: 0 /* VERTICAL */ });\n        this._westSash = new Sash(this.domNode, { getVerticalSashLeft: () => 0 }, { orientation: 0 /* VERTICAL */ });\n        this._northSash = new Sash(this.domNode, { getHorizontalSashTop: () => 0 }, { orientation: 1 /* HORIZONTAL */, orthogonalEdge: OrthogonalEdge.North });\n        this._southSash = new Sash(this.domNode, { getHorizontalSashTop: () => this._size.height }, { orientation: 1 /* HORIZONTAL */, orthogonalEdge: OrthogonalEdge.South });\n        this._northSash.orthogonalStartSash = this._westSash;\n        this._northSash.orthogonalEndSash = this._eastSash;\n        this._southSash.orthogonalStartSash = this._westSash;\n        this._southSash.orthogonalEndSash = this._eastSash;\n        let currentSize;\n        let deltaY = 0;\n        let deltaX = 0;\n        this._sashListener.add(Event.any(this._northSash.onDidStart, this._eastSash.onDidStart, this._southSash.onDidStart, this._westSash.onDidStart)(() => {\n            if (currentSize === undefined) {\n                this._onDidWillResize.fire();\n                currentSize = this._size;\n                deltaY = 0;\n                deltaX = 0;\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidEnd, this._eastSash.onDidEnd, this._southSash.onDidEnd, this._westSash.onDidEnd)(() => {\n            if (currentSize !== undefined) {\n                currentSize = undefined;\n                deltaY = 0;\n                deltaX = 0;\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(this._eastSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = e.currentX - e.startX;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, east: true });\n            }\n        }));\n        this._sashListener.add(this._westSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = -(e.currentX - e.startX);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, west: true });\n            }\n        }));\n        this._sashListener.add(this._northSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = -(e.currentY - e.startY);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, north: true });\n            }\n        }));\n        this._sashListener.add(this._southSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = e.currentY - e.startY;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, south: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._eastSash.onDidReset, this._westSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._size.height, this._preferredSize.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidReset, this._southSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._preferredSize.height, this._size.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n    }\n    dispose() {\n        this._northSash.dispose();\n        this._southSash.dispose();\n        this._eastSash.dispose();\n        this._westSash.dispose();\n        this._sashListener.dispose();\n        this._onDidResize.dispose();\n        this._onDidWillResize.dispose();\n        this.domNode.remove();\n    }\n    enableSashes(north, east, south, west) {\n        this._northSash.state = north ? 3 /* Enabled */ : 0 /* Disabled */;\n        this._eastSash.state = east ? 3 /* Enabled */ : 0 /* Disabled */;\n        this._southSash.state = south ? 3 /* Enabled */ : 0 /* Disabled */;\n        this._westSash.state = west ? 3 /* Enabled */ : 0 /* Disabled */;\n    }\n    layout(height = this.size.height, width = this.size.width) {\n        const { height: minHeight, width: minWidth } = this._minSize;\n        const { height: maxHeight, width: maxWidth } = this._maxSize;\n        height = Math.max(minHeight, Math.min(maxHeight, height));\n        width = Math.max(minWidth, Math.min(maxWidth, width));\n        const newSize = new Dimension(width, height);\n        if (!Dimension.equals(newSize, this._size)) {\n            this.domNode.style.height = height + 'px';\n            this.domNode.style.width = width + 'px';\n            this._size = newSize;\n            this._northSash.layout();\n            this._eastSash.layout();\n            this._southSash.layout();\n            this._westSash.layout();\n        }\n    }\n    clearSashHoverState() {\n        this._eastSash.clearSashHoverState();\n        this._westSash.clearSashHoverState();\n        this._northSash.clearSashHoverState();\n        this._southSash.clearSashHoverState();\n    }\n    get size() {\n        return this._size;\n    }\n    set maxSize(value) {\n        this._maxSize = value;\n    }\n    get maxSize() {\n        return this._maxSize;\n    }\n    set minSize(value) {\n        this._minSize = value;\n    }\n    get minSize() {\n        return this._minSize;\n    }\n    set preferredSize(value) {\n        this._preferredSize = value;\n    }\n    get preferredSize() {\n        return this._preferredSize;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { isSafari } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { ResizableHTMLElement } from './resizable.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function canExpandCompletionItem(item) {\n    return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\n}\nlet SuggestDetailsWidget = class SuggestDetailsWidget {\n    constructor(_editor, instaService) {\n        this._editor = _editor;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        this._onDidChangeContents = new Emitter();\n        this.onDidChangeContents = this._onDidChangeContents.event;\n        this._disposables = new DisposableStore();\n        this._renderDisposeable = new DisposableStore();\n        this._borderWidth = 1;\n        this._size = new dom.Dimension(330, 0);\n        this.domNode = dom.$('.suggest-details');\n        this.domNode.classList.add('no-docs');\n        this._markdownRenderer = instaService.createInstance(MarkdownRenderer, { editor: _editor });\n        this._body = dom.$('.body');\n        this._scrollbar = new DomScrollableElement(this._body, {});\n        dom.append(this.domNode, this._scrollbar.getDomNode());\n        this._disposables.add(this._scrollbar);\n        this._header = dom.append(this._body, dom.$('.header'));\n        this._close = dom.append(this._header, dom.$('span' + Codicon.close.cssSelector));\n        this._close.title = nls.localize('details.close', \"Close\");\n        this._type = dom.append(this._header, dom.$('p.type'));\n        this._docs = dom.append(this._body, dom.$('p.docs'));\n        this._configureFont();\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(44 /* fontInfo */)) {\n                this._configureFont();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._renderDisposeable.dispose();\n    }\n    _configureFont() {\n        const options = this._editor.getOptions();\n        const fontInfo = options.get(44 /* fontInfo */);\n        const fontFamily = fontInfo.getMassagedFontFamily(isSafari ? EDITOR_FONT_DEFAULTS.fontFamily : null);\n        const fontSize = options.get(107 /* suggestFontSize */) || fontInfo.fontSize;\n        const lineHeight = options.get(108 /* suggestLineHeight */) || fontInfo.lineHeight;\n        const fontWeight = fontInfo.fontWeight;\n        const fontSizePx = `${fontSize}px`;\n        const lineHeightPx = `${lineHeight}px`;\n        this.domNode.style.fontSize = fontSizePx;\n        this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this.domNode.style.fontWeight = fontWeight;\n        this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        this._type.style.fontFamily = fontFamily;\n        this._close.style.height = lineHeightPx;\n        this._close.style.width = lineHeightPx;\n    }\n    getLayoutInfo() {\n        const lineHeight = this._editor.getOption(108 /* suggestLineHeight */) || this._editor.getOption(44 /* fontInfo */).lineHeight;\n        const borderWidth = this._borderWidth;\n        const borderHeight = borderWidth * 2;\n        return {\n            lineHeight,\n            borderWidth,\n            borderHeight,\n            verticalPadding: 22,\n            horizontalPadding: 14\n        };\n    }\n    renderLoading() {\n        this._type.textContent = nls.localize('loading', \"Loading...\");\n        this._docs.textContent = '';\n        this.domNode.classList.remove('no-docs', 'no-type');\n        this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n        this._onDidChangeContents.fire(this);\n    }\n    renderItem(item, explainMode) {\n        var _a, _b;\n        this._renderDisposeable.clear();\n        let { detail, documentation } = item.completion;\n        if (explainMode) {\n            let md = '';\n            md += `score: ${item.score[0]}\\n`;\n            md += `prefix: ${(_a = item.word) !== null && _a !== void 0 ? _a : '(no prefix)'}\\n`;\n            md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\n            md += `distance: ${item.distance} (localityBonus-setting)\\n`;\n            md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\n            md += `commit_chars: ${(_b = item.completion.commitCharacters) === null || _b === void 0 ? void 0 : _b.join('')}\\n`;\n            documentation = new MarkdownString().appendCodeblock('empty', md);\n            detail = `Provider: ${item.provider._debugDisplayName}`;\n        }\n        if (!explainMode && !canExpandCompletionItem(item)) {\n            this.clearContents();\n            return;\n        }\n        this.domNode.classList.remove('no-docs', 'no-type');\n        // --- details\n        if (detail) {\n            const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}…` : detail;\n            this._type.textContent = cappedDetail;\n            this._type.title = cappedDetail;\n            dom.show(this._type);\n            this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\n        }\n        else {\n            dom.clearNode(this._type);\n            this._type.title = '';\n            dom.hide(this._type);\n            this.domNode.classList.add('no-type');\n        }\n        // --- documentation\n        dom.clearNode(this._docs);\n        if (typeof documentation === 'string') {\n            this._docs.classList.remove('markdown-docs');\n            this._docs.textContent = documentation;\n        }\n        else if (documentation) {\n            this._docs.classList.add('markdown-docs');\n            dom.clearNode(this._docs);\n            const renderedContents = this._markdownRenderer.render(documentation);\n            this._docs.appendChild(renderedContents.element);\n            this._renderDisposeable.add(renderedContents);\n            this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\n                this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n                this._onDidChangeContents.fire(this);\n            }));\n        }\n        this.domNode.style.userSelect = 'text';\n        this.domNode.tabIndex = -1;\n        this._close.onmousedown = e => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n        this._close.onclick = e => {\n            e.preventDefault();\n            e.stopPropagation();\n            this._onDidClose.fire();\n        };\n        this._body.scrollTop = 0;\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n        this._onDidChangeContents.fire(this);\n    }\n    clearContents() {\n        this.domNode.classList.add('no-docs');\n        this._type.textContent = '';\n        this._docs.textContent = '';\n    }\n    get size() {\n        return this._size;\n    }\n    layout(width, height) {\n        const newSize = new dom.Dimension(width, height);\n        if (!dom.Dimension.equals(newSize, this._size)) {\n            this._size = newSize;\n            dom.size(this.domNode, width, height);\n        }\n        this._scrollbar.scanDomNode();\n    }\n    scrollDown(much = 8) {\n        this._body.scrollTop += much;\n    }\n    scrollUp(much = 8) {\n        this._body.scrollTop -= much;\n    }\n    scrollTop() {\n        this._body.scrollTop = 0;\n    }\n    scrollBottom() {\n        this._body.scrollTop = this._body.scrollHeight;\n    }\n    pageDown() {\n        this.scrollDown(80);\n    }\n    pageUp() {\n        this.scrollUp(80);\n    }\n    set borderWidth(width) {\n        this._borderWidth = width;\n    }\n    get borderWidth() {\n        return this._borderWidth;\n    }\n};\nSuggestDetailsWidget = __decorate([\n    __param(1, IInstantiationService)\n], SuggestDetailsWidget);\nexport { SuggestDetailsWidget };\nexport class SuggestDetailsOverlay {\n    constructor(widget, _editor) {\n        this.widget = widget;\n        this._editor = _editor;\n        this._disposables = new DisposableStore();\n        this._added = false;\n        this._preferAlignAtTop = true;\n        this._resizable = new ResizableHTMLElement();\n        this._resizable.domNode.classList.add('suggest-details-container');\n        this._resizable.domNode.appendChild(widget.domNode);\n        this._resizable.enableSashes(false, true, true, false);\n        let topLeftNow;\n        let sizeNow;\n        let deltaTop = 0;\n        let deltaLeft = 0;\n        this._disposables.add(this._resizable.onDidWillResize(() => {\n            topLeftNow = this._topLeft;\n            sizeNow = this._resizable.size;\n        }));\n        this._disposables.add(this._resizable.onDidResize(e => {\n            if (topLeftNow && sizeNow) {\n                this.widget.layout(e.dimension.width, e.dimension.height);\n                let updateTopLeft = false;\n                if (e.west) {\n                    deltaLeft = sizeNow.width - e.dimension.width;\n                    updateTopLeft = true;\n                }\n                if (e.north) {\n                    deltaTop = sizeNow.height - e.dimension.height;\n                    updateTopLeft = true;\n                }\n                if (updateTopLeft) {\n                    this._applyTopLeft({\n                        top: topLeftNow.top + deltaTop,\n                        left: topLeftNow.left + deltaLeft,\n                    });\n                }\n            }\n            if (e.done) {\n                topLeftNow = undefined;\n                sizeNow = undefined;\n                deltaTop = 0;\n                deltaLeft = 0;\n                this._userSize = e.dimension;\n            }\n        }));\n        this._disposables.add(this.widget.onDidChangeContents(() => {\n            var _a;\n            if (this._anchorBox) {\n                this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, this._preferAlignAtTop);\n            }\n        }));\n    }\n    dispose() {\n        this._resizable.dispose();\n        this._disposables.dispose();\n        this.hide();\n    }\n    getId() {\n        return 'suggest.details';\n    }\n    getDomNode() {\n        return this._resizable.domNode;\n    }\n    getPosition() {\n        return null;\n    }\n    show() {\n        if (!this._added) {\n            this._editor.addOverlayWidget(this);\n            this.getDomNode().style.position = 'fixed';\n            this._added = true;\n        }\n    }\n    hide(sessionEnded = false) {\n        this._resizable.clearSashHoverState();\n        if (this._added) {\n            this._editor.removeOverlayWidget(this);\n            this._added = false;\n            this._anchorBox = undefined;\n            this._topLeft = undefined;\n        }\n        if (sessionEnded) {\n            this._userSize = undefined;\n            this.widget.clearContents();\n        }\n    }\n    placeAtAnchor(anchor, preferAlignAtTop) {\n        var _a;\n        const anchorBox = anchor.getBoundingClientRect();\n        this._anchorBox = anchorBox;\n        this._preferAlignAtTop = preferAlignAtTop;\n        this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, preferAlignAtTop);\n    }\n    _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\n        var _a;\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.widget.getLayoutInfo();\n        const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n        const defaultTop = anchorBox.top;\n        // EAST\n        const eastPlacement = (function () {\n            const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\n            const left = -info.borderWidth + anchorBox.left + anchorBox.width;\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // WEST\n        const westPlacement = (function () {\n            const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\n            const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // SOUTH\n        const southPacement = (function () {\n            const left = anchorBox.left;\n            const top = -info.borderWidth + anchorBox.top + anchorBox.height;\n            const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\n            return { top, left, fit: maxSizeBottom.height - size.height, maxSizeBottom, maxSizeTop: maxSizeBottom, minSize: defaultMinSize.with(maxSizeBottom.width) };\n        })();\n        // take first placement that fits or the first with \"least bad\" fit\n        const placements = [eastPlacement, westPlacement, southPacement];\n        const placement = (_a = placements.find(p => p.fit >= 0)) !== null && _a !== void 0 ? _a : placements.sort((a, b) => b.fit - a.fit)[0];\n        // top/bottom placement\n        const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n        let alignAtTop;\n        let height = size.height;\n        const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\n        if (height > maxHeight) {\n            height = maxHeight;\n        }\n        let maxSize;\n        if (preferAlignAtTop) {\n            if (height <= placement.maxSizeTop.height) {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n            else {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n        }\n        else {\n            if (height <= placement.maxSizeBottom.height) {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n            else {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n        }\n        this._applyTopLeft({ left: placement.left, top: alignAtTop ? placement.top : bottom - height });\n        this.getDomNode().style.position = 'fixed';\n        this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\n        this._resizable.minSize = placement.minSize;\n        this._resizable.maxSize = maxSize;\n        this._resizable.layout(height, Math.min(maxSize.width, size.width));\n        this.widget.layout(this._resizable.size.width, this._resizable.size.height);\n    }\n    _applyTopLeft(topLeft) {\n        this._topLeft = topLeft;\n        this.getDomNode().style.left = `${this._topLeft.left}px`;\n        this.getDomNode().style.top = `${this._topLeft.top}px`;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport { isSafari } from '../../../../base/browser/browser.js';\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { flatten } from '../../../../base/common/arrays.js';\nimport { Codicon, CSSIcon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { createMatches } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport * as nls from '../../../../nls.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\nexport function getAriaId(index) {\n    return `suggest-aria-id:${index}`;\n}\nexport const suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\nconst _completionItemColor = new (_a = class ColorExtractor {\n        extract(item, out) {\n            if (item.textLabel.match(ColorExtractor._regexStrict)) {\n                out[0] = item.textLabel;\n                return true;\n            }\n            if (item.completion.detail && item.completion.detail.match(ColorExtractor._regexStrict)) {\n                out[0] = item.completion.detail;\n                return true;\n            }\n            if (typeof item.completion.documentation === 'string') {\n                const match = ColorExtractor._regexRelaxed.exec(item.completion.documentation);\n                if (match && (match.index === 0 || match.index + match[0].length === item.completion.documentation.length)) {\n                    out[0] = match[0];\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n    _a._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/,\n    _a._regexStrict = new RegExp(`^${_a._regexRelaxed.source}$`, 'i'),\n    _a);\nlet ItemRenderer = class ItemRenderer {\n    constructor(_editor, _modelService, _languageService, _themeService) {\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._languageService = _languageService;\n        this._themeService = _themeService;\n        this._onDidToggleDetails = new Emitter();\n        this.onDidToggleDetails = this._onDidToggleDetails.event;\n        this.templateId = 'suggestion';\n    }\n    dispose() {\n        this._onDidToggleDetails.dispose();\n    }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.disposables = new DisposableStore();\n        data.root = container;\n        data.root.classList.add('show-file-icons');\n        data.icon = append(container, $('.icon'));\n        data.colorspan = append(data.icon, $('span.colorspan'));\n        const text = append(container, $('.contents'));\n        const main = append(text, $('.main'));\n        data.iconContainer = append(main, $('.icon-label.codicon'));\n        data.left = append(main, $('span.left'));\n        data.right = append(main, $('span.right'));\n        data.iconLabel = new IconLabel(data.left, { supportHighlights: true, supportIcons: true });\n        data.disposables.add(data.iconLabel);\n        data.parametersLabel = append(data.left, $('span.signature-label'));\n        data.qualifierLabel = append(data.left, $('span.qualifier-label'));\n        data.detailsLabel = append(data.right, $('span.details-label'));\n        data.readMore = append(data.right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\n        data.readMore.title = nls.localize('readMore', \"Read More\");\n        const configureFont = () => {\n            const options = this._editor.getOptions();\n            const fontInfo = options.get(44 /* fontInfo */);\n            const fontFamily = fontInfo.getMassagedFontFamily(isSafari ? EDITOR_FONT_DEFAULTS.fontFamily : null);\n            const fontFeatureSettings = fontInfo.fontFeatureSettings;\n            const fontSize = options.get(107 /* suggestFontSize */) || fontInfo.fontSize;\n            const lineHeight = options.get(108 /* suggestLineHeight */) || fontInfo.lineHeight;\n            const fontWeight = fontInfo.fontWeight;\n            const fontSizePx = `${fontSize}px`;\n            const lineHeightPx = `${lineHeight}px`;\n            data.root.style.fontSize = fontSizePx;\n            data.root.style.fontWeight = fontWeight;\n            main.style.fontFamily = fontFamily;\n            main.style.fontFeatureSettings = fontFeatureSettings;\n            main.style.lineHeight = lineHeightPx;\n            data.icon.style.height = lineHeightPx;\n            data.icon.style.width = lineHeightPx;\n            data.readMore.style.height = lineHeightPx;\n            data.readMore.style.width = lineHeightPx;\n        };\n        configureFont();\n        data.disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(44 /* fontInfo */) || e.hasChanged(107 /* suggestFontSize */) || e.hasChanged(108 /* suggestLineHeight */)) {\n                configureFont();\n            }\n        }));\n        return data;\n    }\n    renderElement(element, index, data) {\n        const { completion } = element;\n        data.root.id = getAriaId(index);\n        data.colorspan.style.backgroundColor = '';\n        const labelOptions = {\n            labelEscapeNewLines: true,\n            matches: createMatches(element.score)\n        };\n        let color = [];\n        if (completion.kind === 19 /* Color */ && _completionItemColor.extract(element, color)) {\n            // special logic for 'color' completion items\n            data.icon.className = 'icon customcolor';\n            data.iconContainer.className = 'icon hide';\n            data.colorspan.style.backgroundColor = color[0];\n        }\n        else if (completion.kind === 20 /* File */ && this._themeService.getFileIconTheme().hasFileIcons) {\n            // special logic for 'file' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FILE);\n            const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FILE);\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n        }\n        else if (completion.kind === 23 /* Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\n            // special logic for 'folder' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            labelOptions.extraClasses = flatten([\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FOLDER),\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FOLDER)\n            ]);\n        }\n        else {\n            // normal icon\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = '';\n            data.iconContainer.classList.add('suggest-icon', ...CSSIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\n        }\n        if (completion.tags && completion.tags.indexOf(1 /* Deprecated */) >= 0) {\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n            labelOptions.matches = [];\n        }\n        data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\n        if (typeof completion.label === 'string') {\n            data.parametersLabel.textContent = '';\n            data.detailsLabel.textContent = stripNewLines(completion.detail || '');\n            data.root.classList.add('string-label');\n        }\n        else {\n            data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\n            data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\n            data.root.classList.remove('string-label');\n        }\n        if (this._editor.getOption(106 /* suggest */).showInlineDetails) {\n            show(data.detailsLabel);\n        }\n        else {\n            hide(data.detailsLabel);\n        }\n        if (canExpandCompletionItem(element)) {\n            data.right.classList.add('can-expand-details');\n            show(data.readMore);\n            data.readMore.onmousedown = e => {\n                e.stopPropagation();\n                e.preventDefault();\n            };\n            data.readMore.onclick = e => {\n                e.stopPropagation();\n                e.preventDefault();\n                this._onDidToggleDetails.fire();\n            };\n        }\n        else {\n            data.right.classList.remove('can-expand-details');\n            hide(data.readMore);\n            data.readMore.onmousedown = null;\n            data.readMore.onclick = null;\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n};\nItemRenderer = __decorate([\n    __param(1, IModelService),\n    __param(2, ILanguageService),\n    __param(3, IThemeService)\n], ItemRenderer);\nexport { ItemRenderer };\nfunction stripNewLines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { attachListStyler } from '../../../../platform/theme/common/styler.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResizableHTMLElement } from './resizable.js';\nimport { Context as SuggestContext } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\n/**\n * Suggest widget colors\n */\nexport const editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hc: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nexport const editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hc: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nexport const editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hc: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nexport const editorSuggestWidgetSelectedForeground = registerColor('editorSuggestWidget.selectedForeground', { dark: quickInputListFocusForeground, light: quickInputListFocusForeground, hc: quickInputListFocusForeground }, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedIconForeground = registerColor('editorSuggestWidget.selectedIconForeground', { dark: quickInputListFocusIconForeground, light: quickInputListFocusIconForeground, hc: quickInputListFocusIconForeground }, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: quickInputListFocusBackground, light: quickInputListFocusBackground, hc: quickInputListFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hc: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nexport const editorSuggestWidgetHighlightFocusForeground = registerColor('editorSuggestWidget.focusHighlightForeground', { dark: listFocusHighlightForeground, light: listFocusHighlightForeground, hc: listFocusHighlightForeground }, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nexport const editorSuggestWidgetStatusForeground = registerColor('editorSuggestWidgetStatus.foreground', { dark: transparent(editorSuggestWidgetForeground, .5), light: transparent(editorSuggestWidgetForeground, .5), hc: transparent(editorSuggestWidgetForeground, .5) }, nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\nclass PersistedWidgetSize {\n    constructor(_service, editor) {\n        this._service = _service;\n        this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n    }\n    restore() {\n        var _a;\n        const raw = (_a = this._service.get(this._key, 0 /* GLOBAL */)) !== null && _a !== void 0 ? _a : '';\n        try {\n            const obj = JSON.parse(raw);\n            if (dom.Dimension.is(obj)) {\n                return dom.Dimension.lift(obj);\n            }\n        }\n        catch (_b) {\n            // ignore\n        }\n        return undefined;\n    }\n    store(size) {\n        this._service.store(this._key, JSON.stringify(size), 0 /* GLOBAL */, 1 /* MACHINE */);\n    }\n    reset() {\n        this._service.remove(this._key, 0 /* GLOBAL */);\n    }\n}\nlet SuggestWidget = class SuggestWidget {\n    constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\n        this.editor = editor;\n        this._storageService = _storageService;\n        this._state = 0 /* Hidden */;\n        this._isAuto = false;\n        this._ignoreFocusEvents = false;\n        this._forceRenderingAbove = false;\n        this._explainMode = false;\n        this._showTimeout = new TimeoutTimer();\n        this._disposables = new DisposableStore();\n        this._onDidSelect = new Emitter();\n        this._onDidFocus = new Emitter();\n        this._onDidHide = new Emitter();\n        this._onDidShow = new Emitter();\n        this.onDidSelect = this._onDidSelect.event;\n        this.onDidFocus = this._onDidFocus.event;\n        this.onDidHide = this._onDidHide.event;\n        this.onDidShow = this._onDidShow.event;\n        this._onDetailsKeydown = new Emitter();\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\n        this.element = new ResizableHTMLElement();\n        this.element.domNode.classList.add('editor-widget', 'suggest-widget');\n        this._contentWidget = new SuggestContentWidget(this, editor);\n        this._persistedSize = new PersistedWidgetSize(_storageService, editor);\n        class ResizeState {\n            constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\n                this.persistedSize = persistedSize;\n                this.currentSize = currentSize;\n                this.persistHeight = persistHeight;\n                this.persistWidth = persistWidth;\n            }\n        }\n        let state;\n        this._disposables.add(this.element.onDidWillResize(() => {\n            this._contentWidget.lockPreference();\n            state = new ResizeState(this._persistedSize.restore(), this.element.size);\n        }));\n        this._disposables.add(this.element.onDidResize(e => {\n            var _a, _b, _c, _d;\n            this._resize(e.dimension.width, e.dimension.height);\n            if (state) {\n                state.persistHeight = state.persistHeight || !!e.north || !!e.south;\n                state.persistWidth = state.persistWidth || !!e.east || !!e.west;\n            }\n            if (!e.done) {\n                return;\n            }\n            if (state) {\n                // only store width or height value that have changed and also\n                // only store changes that are above a certain threshold\n                const { itemHeight, defaultSize } = this.getLayoutInfo();\n                const threshold = Math.round(itemHeight / 2);\n                let { width, height } = this.element.size;\n                if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n                    height = (_b = (_a = state.persistedSize) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : defaultSize.height;\n                }\n                if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n                    width = (_d = (_c = state.persistedSize) === null || _c === void 0 ? void 0 : _c.width) !== null && _d !== void 0 ? _d : defaultSize.width;\n                }\n                this._persistedSize.store(new dom.Dimension(width, height));\n            }\n            // reset working state\n            this._contentWidget.unlockPreference();\n            state = undefined;\n        }));\n        this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n        this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n        const details = instantiationService.createInstance(SuggestDetailsWidget, this.editor);\n        details.onDidClose(this.toggleDetails, this, this._disposables);\n        this._details = new SuggestDetailsOverlay(details, this.editor);\n        const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(106 /* suggest */).showIcons);\n        applyIconStyle();\n        const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n        this._disposables.add(renderer);\n        this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n        this._list = new List('SuggestWidget', this._listElement, {\n            getHeight: (_element) => this.getLayoutInfo().itemHeight,\n            getTemplateId: (_element) => 'suggestion'\n        }, [renderer], {\n            alwaysConsumeMouseWheel: true,\n            useShadows: false,\n            mouseSupport: false,\n            accessibilityProvider: {\n                getRole: () => 'option',\n                getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n                getWidgetRole: () => 'listbox',\n                getAriaLabel: (item) => {\n                    let label = item.textLabel;\n                    if (typeof item.completion.label !== 'string') {\n                        const { detail, description } = item.completion.label;\n                        if (detail && description) {\n                            label = nls.localize('label.full', '{0}{1}, {2}', label, detail, description);\n                        }\n                        else if (detail) {\n                            label = nls.localize('label.detail', '{0}{1}', label, detail);\n                        }\n                        else if (description) {\n                            label = nls.localize('label.desc', '{0}, {1}', label, description);\n                        }\n                    }\n                    if (!item.isResolved || !this._isDetailsVisible()) {\n                        return label;\n                    }\n                    const { documentation, detail } = item.completion;\n                    const docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\n                    return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n                },\n            }\n        });\n        this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode);\n        const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(106 /* suggest */).showStatusBar);\n        applyStatusBarStyle();\n        this._disposables.add(attachListStyler(this._list, _themeService, {\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n            listInactiveFocusOutline: activeContrastBorder\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n        this._onThemeChange(_themeService.getColorTheme());\n        this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n        this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n        this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n        this._disposables.add(this.editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(106 /* suggest */)) {\n                applyStatusBarStyle();\n                applyIconStyle();\n            }\n        }));\n        this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n        this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n            this._onDetailsKeydown.fire(e);\n        }));\n        this._disposables.add(this.editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n    }\n    dispose() {\n        var _a;\n        this._details.widget.dispose();\n        this._details.dispose();\n        this._list.dispose();\n        this._status.dispose();\n        this._disposables.dispose();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._showTimeout.dispose();\n        this._contentWidget.dispose();\n        this.element.dispose();\n    }\n    _onEditorMouseDown(mouseEvent) {\n        if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n            // Clicking inside details\n            this._details.widget.domNode.focus();\n        }\n        else {\n            // Clicking outside details and inside suggest\n            if (this.element.domNode.contains(mouseEvent.target.element)) {\n                this.editor.focus();\n            }\n        }\n    }\n    _onCursorSelectionChanged() {\n        if (this._state !== 0 /* Hidden */) {\n            this._contentWidget.layout();\n        }\n    }\n    _onListMouseDownOrTap(e) {\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n            return;\n        }\n        // prevent stealing browser focus from the editor\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n        this._select(e.element, e.index);\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            this._select(e.elements[0], e.indexes[0]);\n        }\n    }\n    _select(item, index) {\n        const completionModel = this._completionModel;\n        if (completionModel) {\n            this._onDidSelect.fire({ item, index, model: completionModel });\n            this.editor.focus();\n        }\n    }\n    _onThemeChange(theme) {\n        this._details.widget.borderWidth = theme.type === 'hc' ? 2 : 1;\n    }\n    _onListFocus(e) {\n        var _a;\n        if (this._ignoreFocusEvents) {\n            return;\n        }\n        if (!e.elements.length) {\n            if (this._currentSuggestionDetails) {\n                this._currentSuggestionDetails.cancel();\n                this._currentSuggestionDetails = undefined;\n                this._focusedItem = undefined;\n            }\n            this.editor.setAriaOptions({ activeDescendant: undefined });\n            return;\n        }\n        if (!this._completionModel) {\n            return;\n        }\n        const item = e.elements[0];\n        const index = e.indexes[0];\n        if (item !== this._focusedItem) {\n            (_a = this._currentSuggestionDetails) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._currentSuggestionDetails = undefined;\n            this._focusedItem = item;\n            this._list.reveal(index);\n            this._currentSuggestionDetails = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const loading = disposableTimeout(() => {\n                    if (this._isDetailsVisible()) {\n                        this.showDetails(true);\n                    }\n                }, 250);\n                const sub = token.onCancellationRequested(() => loading.dispose());\n                const result = yield item.resolve(token);\n                loading.dispose();\n                sub.dispose();\n                return result;\n            }));\n            this._currentSuggestionDetails.then(() => {\n                if (index >= this._list.length || item !== this._list.element(index)) {\n                    return;\n                }\n                // item can have extra information, so re-render\n                this._ignoreFocusEvents = true;\n                this._list.splice(index, 1, [item]);\n                this._list.setFocus([index]);\n                this._ignoreFocusEvents = false;\n                if (this._isDetailsVisible()) {\n                    this.showDetails(false);\n                }\n                else {\n                    this.element.domNode.classList.remove('docs-side');\n                }\n                this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\n            }).catch(onUnexpectedError);\n        }\n        // emit an event\n        this._onDidFocus.fire({ item, index, model: this._completionModel });\n    }\n    _setState(state) {\n        if (this._state === state) {\n            return;\n        }\n        this._state = state;\n        this.element.domNode.classList.toggle('frozen', state === 4 /* Frozen */);\n        this.element.domNode.classList.remove('message');\n        switch (state) {\n            case 0 /* Hidden */:\n                dom.hide(this._messageElement, this._listElement, this._status.element);\n                this._details.hide(true);\n                this._status.hide();\n                this._contentWidget.hide();\n                this._ctxSuggestWidgetVisible.reset();\n                this._ctxSuggestWidgetMultipleSuggestions.reset();\n                this._showTimeout.cancel();\n                this.element.domNode.classList.remove('visible');\n                this._list.splice(0, this._list.length);\n                this._focusedItem = undefined;\n                this._cappedHeight = undefined;\n                this._explainMode = false;\n                break;\n            case 1 /* Loading */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 2 /* Empty */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 3 /* Open */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 4 /* Frozen */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 5 /* Details */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._details.show();\n                this._show();\n                break;\n        }\n    }\n    _show() {\n        this._status.show();\n        this._contentWidget.show();\n        this._layout(this._persistedSize.restore());\n        this._ctxSuggestWidgetVisible.set(true);\n        this._showTimeout.cancelAndSet(() => {\n            this.element.domNode.classList.add('visible');\n            this._onDidShow.fire(this);\n        }, 100);\n    }\n    showTriggered(auto, delay) {\n        if (this._state !== 0 /* Hidden */) {\n            return;\n        }\n        this._contentWidget.setPosition(this.editor.getPosition());\n        this._isAuto = !!auto;\n        if (!this._isAuto) {\n            this._loadingTimeout = disposableTimeout(() => this._setState(1 /* Loading */), delay);\n        }\n    }\n    showSuggestions(completionModel, selectionIndex, isFrozen, isAuto) {\n        var _a, _b;\n        this._contentWidget.setPosition(this.editor.getPosition());\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentSuggestionDetails) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._currentSuggestionDetails = undefined;\n        if (this._completionModel !== completionModel) {\n            this._completionModel = completionModel;\n        }\n        if (isFrozen && this._state !== 2 /* Empty */ && this._state !== 0 /* Hidden */) {\n            this._setState(4 /* Frozen */);\n            return;\n        }\n        const visibleCount = this._completionModel.items.length;\n        const isEmpty = visibleCount === 0;\n        this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n        if (isEmpty) {\n            this._setState(isAuto ? 0 /* Hidden */ : 2 /* Empty */);\n            this._completionModel = undefined;\n            return;\n        }\n        this._focusedItem = undefined;\n        this._list.splice(0, this._list.length, this._completionModel.items);\n        this._setState(isFrozen ? 4 /* Frozen */ : 3 /* Open */);\n        this._list.reveal(selectionIndex, 0);\n        this._list.setFocus([selectionIndex]);\n        this._layout(this.element.size);\n        // Reset focus border\n        this._details.widget.domNode.classList.remove('focused');\n    }\n    selectNextPage() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 5 /* Details */:\n                this._details.widget.pageDown();\n                return true;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNextPage();\n                return true;\n        }\n    }\n    selectNext() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNext(1, true);\n                return true;\n        }\n    }\n    selectLast() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 5 /* Details */:\n                this._details.widget.scrollBottom();\n                return true;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusLast();\n                return true;\n        }\n    }\n    selectPreviousPage() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 5 /* Details */:\n                this._details.widget.pageUp();\n                return true;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPreviousPage();\n                return true;\n        }\n    }\n    selectPrevious() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPrevious(1, true);\n                return false;\n        }\n    }\n    selectFirst() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 5 /* Details */:\n                this._details.widget.scrollTop();\n                return true;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusFirst();\n                return true;\n        }\n    }\n    getFocusedItem() {\n        if (this._state !== 0 /* Hidden */\n            && this._state !== 2 /* Empty */\n            && this._state !== 1 /* Loading */\n            && this._completionModel) {\n            return {\n                item: this._list.getFocusedElements()[0],\n                index: this._list.getFocus()[0],\n                model: this._completionModel\n            };\n        }\n        return undefined;\n    }\n    toggleDetailsFocus() {\n        if (this._state === 5 /* Details */) {\n            this._setState(3 /* Open */);\n            this._details.widget.domNode.classList.remove('focused');\n        }\n        else if (this._state === 3 /* Open */ && this._isDetailsVisible()) {\n            this._setState(5 /* Details */);\n            this._details.widget.domNode.classList.add('focused');\n        }\n    }\n    toggleDetails() {\n        if (this._isDetailsVisible()) {\n            // hide details widget\n            this._ctxSuggestWidgetDetailsVisible.set(false);\n            this._setDetailsVisible(false);\n            this._details.hide();\n            this.element.domNode.classList.remove('shows-details');\n        }\n        else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* Open */ || this._state === 5 /* Details */ || this._state === 4 /* Frozen */)) {\n            // show details widget (iff possible)\n            this._ctxSuggestWidgetDetailsVisible.set(true);\n            this._setDetailsVisible(true);\n            this.showDetails(false);\n        }\n    }\n    showDetails(loading) {\n        this._details.show();\n        if (loading) {\n            this._details.widget.renderLoading();\n        }\n        else {\n            this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n        }\n        this._positionDetails();\n        this.editor.focus();\n        this.element.domNode.classList.add('shows-details');\n    }\n    toggleExplainMode() {\n        if (this._list.getFocusedElements()[0]) {\n            this._explainMode = !this._explainMode;\n            if (!this._isDetailsVisible()) {\n                this.toggleDetails();\n            }\n            else {\n                this.showDetails(false);\n            }\n        }\n    }\n    resetPersistedSize() {\n        this._persistedSize.reset();\n    }\n    hideWidget() {\n        var _a;\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._setState(0 /* Hidden */);\n        this._onDidHide.fire(this);\n        this.element.clearSashHoverState();\n        // ensure that a reasonable widget height is persisted so that\n        // accidential \"resize-to-single-items\" cases aren't happening\n        const dim = this._persistedSize.restore();\n        const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n        if (dim && dim.height < minPersistedHeight) {\n            this._persistedSize.store(dim.with(undefined, minPersistedHeight));\n        }\n    }\n    isFrozen() {\n        return this._state === 4 /* Frozen */;\n    }\n    _afterRender(position) {\n        if (position === null) {\n            if (this._isDetailsVisible()) {\n                this._details.hide(); //todo@jrieken soft-hide\n            }\n            return;\n        }\n        if (this._state === 2 /* Empty */ || this._state === 1 /* Loading */) {\n            // no special positioning when widget isn't showing list\n            return;\n        }\n        if (this._isDetailsVisible()) {\n            this._details.show();\n        }\n        this._positionDetails();\n    }\n    _layout(size) {\n        var _a, _b, _c;\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (!this.editor.getDomNode()) {\n            // happens when running tests\n            return;\n        }\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.getLayoutInfo();\n        if (!size) {\n            size = info.defaultSize;\n        }\n        let height = size.height;\n        let width = size.width;\n        // status bar\n        this._status.element.style.lineHeight = `${info.itemHeight}px`;\n        if (this._state === 2 /* Empty */ || this._state === 1 /* Loading */) {\n            // showing a message only\n            height = info.itemHeight + info.borderHeight;\n            width = info.defaultSize.width / 2;\n            this.element.enableSashes(false, false, false, false);\n            this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n            this._contentWidget.setPreference(2 /* BELOW */);\n        }\n        else {\n            // showing items\n            // width math\n            const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n            if (width > maxWidth) {\n                width = maxWidth;\n            }\n            const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n            // height math\n            const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n            const minHeight = info.itemHeight + info.statusBarHeight;\n            const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n            const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n            const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n            const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n            const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n            const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n            let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n            if (height === ((_a = this._cappedHeight) === null || _a === void 0 ? void 0 : _a.capped)) {\n                // Restore the old (wanted) height when the current\n                // height is capped to fit\n                height = this._cappedHeight.wanted;\n            }\n            if (height < minHeight) {\n                height = minHeight;\n            }\n            if (height > maxHeight) {\n                height = maxHeight;\n            }\n            const forceRenderingAboveRequiredSpace = 150;\n            if (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\n                this._contentWidget.setPreference(1 /* ABOVE */);\n                this.element.enableSashes(true, true, false, false);\n                maxHeight = maxHeightAbove;\n            }\n            else {\n                this._contentWidget.setPreference(2 /* BELOW */);\n                this.element.enableSashes(false, true, true, false);\n                maxHeight = maxHeightBelow;\n            }\n            this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n            this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n            this.element.minSize = new dom.Dimension(220, minHeight);\n            // Know when the height was capped to fit and remember\n            // the wanted height for later. This is required when going\n            // left to widen suggestions.\n            this._cappedHeight = height === fullHeight\n                ? { wanted: (_c = (_b = this._cappedHeight) === null || _b === void 0 ? void 0 : _b.wanted) !== null && _c !== void 0 ? _c : size.height, capped: height }\n                : undefined;\n        }\n        this._resize(width, height);\n    }\n    _resize(width, height) {\n        const { width: maxWidth, height: maxHeight } = this.element.maxSize;\n        width = Math.min(maxWidth, width);\n        height = Math.min(maxHeight, height);\n        const { statusBarHeight } = this.getLayoutInfo();\n        this._list.layout(height - statusBarHeight, width);\n        this._listElement.style.height = `${height - statusBarHeight}px`;\n        this.element.layout(height, width);\n        this._contentWidget.layout();\n        this._positionDetails();\n    }\n    _positionDetails() {\n        var _a;\n        if (this._isDetailsVisible()) {\n            this._details.placeAtAnchor(this.element.domNode, ((_a = this._contentWidget.getPosition()) === null || _a === void 0 ? void 0 : _a.preference[0]) === 2 /* BELOW */);\n        }\n    }\n    getLayoutInfo() {\n        const fontInfo = this.editor.getOption(44 /* fontInfo */);\n        const itemHeight = clamp(this.editor.getOption(108 /* suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\n        const statusBarHeight = !this.editor.getOption(106 /* suggest */).showStatusBar || this._state === 2 /* Empty */ || this._state === 1 /* Loading */ ? 0 : itemHeight;\n        const borderWidth = this._details.widget.borderWidth;\n        const borderHeight = 2 * borderWidth;\n        return {\n            itemHeight,\n            statusBarHeight,\n            borderWidth,\n            borderHeight,\n            typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n            verticalPadding: 22,\n            horizontalPadding: 14,\n            defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n        };\n    }\n    _isDetailsVisible() {\n        return this._storageService.getBoolean('expandSuggestionDocs', 0 /* GLOBAL */, false);\n    }\n    _setDetailsVisible(value) {\n        this._storageService.store('expandSuggestionDocs', value, 0 /* GLOBAL */, 0 /* USER */);\n    }\n    forceRenderingAbove() {\n        if (!this._forceRenderingAbove) {\n            this._forceRenderingAbove = true;\n            this._layout(this._persistedSize.restore());\n        }\n    }\n    stopForceRenderingAbove() {\n        this._forceRenderingAbove = false;\n    }\n};\nSuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\nSuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\nSuggestWidget = __decorate([\n    __param(1, IStorageService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, IInstantiationService)\n], SuggestWidget);\nexport { SuggestWidget };\nexport class SuggestContentWidget {\n    constructor(_widget, _editor) {\n        this._widget = _widget;\n        this._editor = _editor;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._preferenceLocked = false;\n        this._added = false;\n        this._hidden = false;\n    }\n    dispose() {\n        if (this._added) {\n            this._added = false;\n            this._editor.removeContentWidget(this);\n        }\n    }\n    getId() {\n        return 'editor.widget.suggestWidget';\n    }\n    getDomNode() {\n        return this._widget.element.domNode;\n    }\n    show() {\n        this._hidden = false;\n        if (!this._added) {\n            this._added = true;\n            this._editor.addContentWidget(this);\n        }\n    }\n    hide() {\n        if (!this._hidden) {\n            this._hidden = true;\n            this.layout();\n        }\n    }\n    layout() {\n        this._editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this._hidden || !this._position || !this._preference) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [this._preference]\n        };\n    }\n    beforeRender() {\n        const { height, width } = this._widget.element.size;\n        const { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\n        return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n    }\n    afterRender(position) {\n        this._widget._afterRender(position);\n    }\n    setPreference(preference) {\n        if (!this._preferenceLocked) {\n            this._preference = preference;\n        }\n    }\n    lockPreference() {\n        this._preferenceLocked = true;\n    }\n    unlockPreference() {\n        this._preferenceLocked = false;\n    }\n    setPosition(position) {\n        this._position = position;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IdleValue } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { SimpleKeybinding } from '../../../../base/common/keybindings.js';\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isObject } from '../../../../base/common/types.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { hash } from '../../../../base/common/hash.js';\n// sticky suggest widget which doesn't disappear on focus out and such\nlet _sticky = false;\n// _sticky = Boolean(\"true\"); // done \"weirdly\" so that a lint warning prevents you from pushing this\nclass LineSuffix {\n    constructor(_model, _position) {\n        this._model = _model;\n        this._position = _position;\n        // spy on what's happening right of the cursor. two cases:\n        // 1. end of line -> check that it's still end of line\n        // 2. mid of line -> add a marker and compute the delta\n        const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n        if (maxColumn !== _position.column) {\n            const offset = _model.getOffsetAt(_position);\n            const end = _model.getPositionAt(offset + 1);\n            this._marker = _model.deltaDecorations([], [{\n                    range: Range.fromPositions(_position, end),\n                    options: { description: 'suggest-line-suffix', stickiness: 1 /* NeverGrowsWhenTypingAtEdges */ }\n                }]);\n        }\n    }\n    dispose() {\n        if (this._marker && !this._model.isDisposed()) {\n            this._model.deltaDecorations(this._marker, []);\n        }\n    }\n    delta(position) {\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n            // bail out early if things seems fishy\n            return 0;\n        }\n        // read the marker (in case suggest was triggered at line end) or compare\n        // the cursor to the line end.\n        if (this._marker) {\n            const range = this._model.getDecorationRange(this._marker[0]);\n            const end = this._model.getOffsetAt(range.getStartPosition());\n            return end - this._model.getOffsetAt(position);\n        }\n        else {\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n        }\n    }\n}\nlet SuggestController = class SuggestController {\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\n        this._memoryService = _memoryService;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._telemetryService = _telemetryService;\n        this._lineSuffix = new MutableDisposable();\n        this._toDispose = new DisposableStore();\n        this._selectors = new PriorityRegistry(s => s.priority);\n        this._telemetryGate = 0;\n        this.editor = editor;\n        this.model = _instantiationService.createInstance(SuggestModel, this.editor);\n        // context key: update insert/replace mode\n        const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\n        ctxInsertMode.set(editor.getOption(106 /* suggest */).insertMode);\n        this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(106 /* suggest */).insertMode));\n        this.widget = this._toDispose.add(new IdleValue(() => {\n            const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\n            this._toDispose.add(widget);\n            this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0), this));\n            // Wire up logic to accept a suggestion on certain characters\n            const commitCharacterController = new CommitCharacterController(this.editor, widget, item => this._insertSuggestion(item, 2 /* NoAfterUndoStop */));\n            this._toDispose.add(commitCharacterController);\n            this._toDispose.add(this.model.onDidSuggest(e => {\n                if (e.completionModel.items.length === 0) {\n                    commitCharacterController.reset();\n                }\n            }));\n            // Wire up makes text edit context key\n            const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\n            const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\n            const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\n            this._toDispose.add(toDisposable(() => {\n                ctxMakesTextEdit.reset();\n                ctxHasInsertAndReplace.reset();\n                ctxCanResolve.reset();\n            }));\n            this._toDispose.add(widget.onDidFocus(({ item }) => {\n                // (ctx: makesTextEdit)\n                const position = this.editor.getPosition();\n                const startColumn = item.editStart.column;\n                const endColumn = position.column;\n                let value = true;\n                if (this.editor.getOption(1 /* acceptSuggestionOnEnter */) === 'smart'\n                    && this.model.state === 2 /* Auto */\n                    && !item.completion.additionalTextEdits\n                    && !(item.completion.insertTextRules & 4 /* InsertAsSnippet */)\n                    && endColumn - startColumn === item.completion.insertText.length) {\n                    const oldText = this.editor.getModel().getValueInRange({\n                        startLineNumber: position.lineNumber,\n                        startColumn,\n                        endLineNumber: position.lineNumber,\n                        endColumn\n                    });\n                    value = oldText !== item.completion.insertText;\n                }\n                ctxMakesTextEdit.set(value);\n                // (ctx: hasInsertAndReplaceRange)\n                ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\n                // (ctx: canResolve)\n                ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\n            }));\n            this._toDispose.add(widget.onDetailsKeyDown(e => {\n                // cmd + c on macOS, ctrl + c on Win / Linux\n                if (e.toKeybinding().equals(new SimpleKeybinding(true, false, false, false, 33 /* KeyC */)) ||\n                    (platform.isMacintosh && e.toKeybinding().equals(new SimpleKeybinding(false, false, false, true, 33 /* KeyC */)))) {\n                    e.stopPropagation();\n                    return;\n                }\n                if (!e.toKeybinding().isModifierKey()) {\n                    this.editor.focus();\n                }\n            }));\n            return widget;\n        }));\n        // Wire up text overtyping capture\n        this._overtypingCapturer = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\n        }));\n        this._alternatives = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\n        }));\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n        this._toDispose.add(this.model.onDidTrigger(e => {\n            this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\n            this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\n        }));\n        this._toDispose.add(this.model.onDidSuggest(e => {\n            if (!e.shy) {\n                let index = -1;\n                for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\n                    index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                    if (index !== -1) {\n                        break;\n                    }\n                }\n                if (index === -1) {\n                    index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                }\n                this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.auto);\n            }\n        }));\n        this._toDispose.add(this.model.onDidCancel(e => {\n            if (!e.retrigger) {\n                this.widget.value.hideWidget();\n            }\n        }));\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\n            if (!_sticky) {\n                this.model.cancel();\n                this.model.clear();\n            }\n        }));\n        // Manage the acceptSuggestionsOnEnter context key\n        let acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n        let updateFromConfig = () => {\n            const acceptSuggestionOnEnter = this.editor.getOption(1 /* acceptSuggestionOnEnter */);\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n        };\n        this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\n        updateFromConfig();\n    }\n    static get(editor) {\n        return editor.getContribution(SuggestController.ID);\n    }\n    dispose() {\n        this._alternatives.dispose();\n        this._toDispose.dispose();\n        this.widget.dispose();\n        this.model.dispose();\n        this._lineSuffix.dispose();\n    }\n    _insertSuggestion(event, flags) {\n        if (!event || !event.item) {\n            this._alternatives.value.reset();\n            this.model.cancel();\n            this.model.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const snippetController = SnippetController2.get(this.editor);\n        if (!snippetController) {\n            return;\n        }\n        const model = this.editor.getModel();\n        const modelVersionNow = model.getAlternativeVersionId();\n        const { item } = event;\n        //\n        const tasks = [];\n        const cts = new CancellationTokenSource();\n        // pushing undo stops *before* additional text edits and\n        // *after* the main edit\n        if (!(flags & 1 /* NoBeforeUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\n        const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* AlternativeOverwriteConfig */));\n        // keep item in memory\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\n        if (Array.isArray(item.completion.additionalTextEdits)) {\n            // sync additional edits\n            const scrollState = StableEditorScrollState.capture(this.editor);\n            this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text)));\n            scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n        }\n        else if (!item.isResolved) {\n            // async additional edits\n            const sw = new StopWatch(true);\n            let position;\n            const docListener = model.onDidChangeContent(e => {\n                if (e.isFlush) {\n                    cts.cancel();\n                    docListener.dispose();\n                    return;\n                }\n                for (let change of e.changes) {\n                    const thisPosition = Range.getEndPosition(change.range);\n                    if (!position || Position.isBefore(thisPosition, position)) {\n                        position = thisPosition;\n                    }\n                }\n            });\n            let oldFlags = flags;\n            flags |= 2 /* NoAfterUndoStop */;\n            let didType = false;\n            let typeListener = this.editor.onWillType(() => {\n                typeListener.dispose();\n                didType = true;\n                if (!(oldFlags & 2 /* NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n            });\n            tasks.push(item.resolve(cts.token).then(() => {\n                if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\n                    return false;\n                }\n                if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\n                    return false;\n                }\n                if (didType) {\n                    this.editor.pushUndoStop();\n                }\n                const scrollState = StableEditorScrollState.capture(this.editor);\n                this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text)));\n                scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n                if (didType || !(oldFlags & 2 /* NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n                return true;\n            }).then(applied => {\n                this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\n                docListener.dispose();\n                typeListener.dispose();\n            }));\n        }\n        let { insertText } = item.completion;\n        if (!(item.completion.insertTextRules & 4 /* InsertAsSnippet */)) {\n            insertText = SnippetParser.escape(insertText);\n        }\n        snippetController.insert(insertText, {\n            overwriteBefore: info.overwriteBefore,\n            overwriteAfter: info.overwriteAfter,\n            undoStopBefore: false,\n            undoStopAfter: false,\n            adjustWhitespace: !(item.completion.insertTextRules & 1 /* KeepWhitespace */),\n            clipboardText: event.model.clipboardText,\n            overtypingCapturer: this._overtypingCapturer.value\n        });\n        if (!(flags & 2 /* NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        if (!item.completion.command) {\n            // done\n            this.model.cancel();\n        }\n        else if (item.completion.command.id === TriggerSuggestAction.id) {\n            // retigger\n            this.model.trigger({ auto: true, shy: false }, true);\n        }\n        else {\n            // exec command, done\n            tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(onUnexpectedError));\n            this.model.cancel();\n        }\n        if (flags & 4 /* KeepAlternativeSuggestions */) {\n            this._alternatives.value.set(event, next => {\n                // cancel resolving of additional edits\n                cts.cancel();\n                // this is not so pretty. when inserting the 'next'\n                // suggestion we undo until we are at the state at\n                // which we were before inserting the previous suggestion...\n                while (model.canUndo()) {\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\n                        model.undo();\n                    }\n                    this._insertSuggestion(next, 1 /* NoBeforeUndoStop */ | 2 /* NoAfterUndoStop */ | (flags & 8 /* AlternativeOverwriteConfig */ ? 8 /* AlternativeOverwriteConfig */ : 0));\n                    break;\n                }\n            });\n        }\n        this._alertCompletionItem(item);\n        // clear only now - after all tasks are done\n        Promise.all(tasks).finally(() => {\n            this._reportSuggestionAcceptedTelemetry(model, event);\n            this.model.clear();\n            cts.dispose();\n        });\n    }\n    _reportSuggestionAcceptedTelemetry(model, acceptedSuggestion) {\n        var _a;\n        if (this._telemetryGate++ % 100 !== 0) {\n            return;\n        }\n        // _debugDisplayName looks like `vscode.css-language-features(/-:)`, where the last bit is the trigger chars\n        // normalize it to just the extension ID and lowercase\n        const providerId = ((_a = acceptedSuggestion.item.provider._debugDisplayName) !== null && _a !== void 0 ? _a : 'unknown').split('(', 1)[0].toLowerCase();\n        this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\n            providerId,\n            basenameHash: hash(basename(model.uri)).toString(16),\n            languageId: model.getLanguageId(),\n            fileExtension: extname(model.uri),\n        });\n    }\n    getOverwriteInfo(item, toggleMode) {\n        assertType(this.editor.hasModel());\n        let replace = this.editor.getOption(106 /* suggest */).insertMode === 'replace';\n        if (toggleMode) {\n            replace = !replace;\n        }\n        const overwriteBefore = item.position.column - item.editStart.column;\n        const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n        const columnDelta = this.editor.getPosition().column - item.position.column;\n        const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n        return {\n            overwriteBefore: overwriteBefore + columnDelta,\n            overwriteAfter: overwriteAfter + suffixDelta\n        };\n    }\n    _alertCompletionItem(item) {\n        if (isNonEmptyArray(item.completion.additionalTextEdits)) {\n            let msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\n            alert(msg);\n        }\n    }\n    triggerSuggest(onlyFrom, auto) {\n        if (this.editor.hasModel()) {\n            this.model.trigger({ auto: auto !== null && auto !== void 0 ? auto : false, shy: false }, false, onlyFrom);\n            this.editor.revealPosition(this.editor.getPosition(), 0 /* Smooth */);\n            this.editor.focus();\n        }\n    }\n    triggerSuggestAndAcceptBest(arg) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const positionNow = this.editor.getPosition();\n        const fallback = () => {\n            if (positionNow.equals(this.editor.getPosition())) {\n                this._commandService.executeCommand(arg.fallback);\n            }\n        };\n        const makesTextEdit = (item) => {\n            if (item.completion.insertTextRules & 4 /* InsertAsSnippet */ || item.completion.additionalTextEdits) {\n                // snippet, other editor -> makes edit\n                return true;\n            }\n            const position = this.editor.getPosition();\n            const startColumn = item.editStart.column;\n            const endColumn = position.column;\n            if (endColumn - startColumn !== item.completion.insertText.length) {\n                // unequal lengths -> makes edit\n                return true;\n            }\n            const textNow = this.editor.getModel().getValueInRange({\n                startLineNumber: position.lineNumber,\n                startColumn,\n                endLineNumber: position.lineNumber,\n                endColumn\n            });\n            // unequal text -> makes edit\n            return textNow !== item.completion.insertText;\n        };\n        Event.once(this.model.onDidTrigger)(_ => {\n            // wait for trigger because only then the cancel-event is trustworthy\n            let listener = [];\n            Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\n                // retrigger or cancel -> try to type default text\n                dispose(listener);\n                fallback();\n            }, undefined, listener);\n            this.model.onDidSuggest(({ completionModel }) => {\n                dispose(listener);\n                if (completionModel.items.length === 0) {\n                    fallback();\n                    return;\n                }\n                const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\n                const item = completionModel.items[index];\n                if (!makesTextEdit(item)) {\n                    fallback();\n                    return;\n                }\n                this.editor.pushUndoStop();\n                this._insertSuggestion({ index, item, model: completionModel }, 4 /* KeepAlternativeSuggestions */ | 1 /* NoBeforeUndoStop */ | 2 /* NoAfterUndoStop */);\n            }, undefined, listener);\n        });\n        this.model.trigger({ auto: false, shy: true });\n        this.editor.revealPosition(positionNow, 0 /* Smooth */);\n        this.editor.focus();\n    }\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\n        const item = this.widget.value.getFocusedItem();\n        let flags = 0;\n        if (keepAlternativeSuggestions) {\n            flags |= 4 /* KeepAlternativeSuggestions */;\n        }\n        if (alternativeOverwriteConfig) {\n            flags |= 8 /* AlternativeOverwriteConfig */;\n        }\n        this._insertSuggestion(item, flags);\n    }\n    acceptNextSuggestion() {\n        this._alternatives.value.next();\n    }\n    acceptPrevSuggestion() {\n        this._alternatives.value.prev();\n    }\n    cancelSuggestWidget() {\n        this.model.cancel();\n        this.model.clear();\n        this.widget.value.hideWidget();\n    }\n    selectNextSuggestion() {\n        this.widget.value.selectNext();\n    }\n    selectNextPageSuggestion() {\n        this.widget.value.selectNextPage();\n    }\n    selectLastSuggestion() {\n        this.widget.value.selectLast();\n    }\n    selectPrevSuggestion() {\n        this.widget.value.selectPrevious();\n    }\n    selectPrevPageSuggestion() {\n        this.widget.value.selectPreviousPage();\n    }\n    selectFirstSuggestion() {\n        this.widget.value.selectFirst();\n    }\n    toggleSuggestionDetails() {\n        this.widget.value.toggleDetails();\n    }\n    toggleExplainMode() {\n        this.widget.value.toggleExplainMode();\n    }\n    toggleSuggestionFocus() {\n        this.widget.value.toggleDetailsFocus();\n    }\n    resetWidgetSize() {\n        this.widget.value.resetPersistedSize();\n    }\n    forceRenderingAbove() {\n        this.widget.value.forceRenderingAbove();\n    }\n    stopForceRenderingAbove() {\n        if (!this.widget.isInitialized) {\n            // This method has no effect if the widget is not initialized yet.\n            return;\n        }\n        this.widget.value.stopForceRenderingAbove();\n    }\n    registerSelector(selector) {\n        return this._selectors.register(selector);\n    }\n};\nSuggestController.ID = 'editor.contrib.suggestController';\nSuggestController = __decorate([\n    __param(1, ISuggestMemoryService),\n    __param(2, ICommandService),\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ILogService),\n    __param(6, ITelemetryService)\n], SuggestController);\nexport { SuggestController };\nclass PriorityRegistry {\n    constructor(prioritySelector) {\n        this.prioritySelector = prioritySelector;\n        this._items = new Array();\n    }\n    register(value) {\n        if (this._items.indexOf(value) !== -1) {\n            throw new Error('Value is already registered');\n        }\n        this._items.push(value);\n        this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\n        return {\n            dispose: () => {\n                const idx = this._items.indexOf(value);\n                if (idx >= 0) {\n                    this._items.splice(idx, 1);\n                }\n            }\n        };\n    }\n    get itemsOrderedByPriorityDesc() {\n        return this._items;\n    }\n}\nexport class TriggerSuggestAction extends EditorAction {\n    constructor() {\n        super({\n            id: TriggerSuggestAction.id,\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n            alias: 'Trigger Suggest',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* CtrlCmd */ | 10 /* Space */,\n                secondary: [2048 /* CtrlCmd */ | 39 /* KeyI */],\n                mac: { primary: 256 /* WinCtrl */ | 10 /* Space */, secondary: [512 /* Alt */ | 9 /* Escape */, 2048 /* CtrlCmd */ | 39 /* KeyI */] },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        const controller = SuggestController.get(editor);\n        if (!controller) {\n            return;\n        }\n        let auto;\n        if (args && typeof args === 'object') {\n            if (args.auto === true) {\n                auto = true;\n            }\n        }\n        controller.triggerSuggest(undefined, auto);\n    }\n}\nTriggerSuggestAction.id = 'editor.action.triggerSuggest';\nregisterEditorContribution(SuggestController.ID, SuggestController);\nregisterEditorAction(TriggerSuggestAction);\nconst weight = 100 /* EditorContrib */ + 90;\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptSelectedSuggestion',\n    precondition: SuggestContext.Visible,\n    handler(x) {\n        x.acceptSelectedSuggestion(true, false);\n    }\n}));\n// normal tab\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'acceptSelectedSuggestion',\n    when: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n    primary: 2 /* Tab */,\n    weight\n});\n// accept on enter has special rules\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'acceptSelectedSuggestion',\n    when: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n    primary: 3 /* Enter */,\n    weight,\n});\nMenuRegistry.appendMenuItem(suggestWidgetStatusbarMenu, {\n    command: { id: 'acceptSelectedSuggestion', title: nls.localize('accept.insert', \"Insert\") },\n    group: 'left',\n    order: 1,\n    when: SuggestContext.HasInsertAndReplaceRange.toNegated()\n});\nMenuRegistry.appendMenuItem(suggestWidgetStatusbarMenu, {\n    command: { id: 'acceptSelectedSuggestion', title: nls.localize('accept.insert', \"Insert\") },\n    group: 'left',\n    order: 1,\n    when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\n});\nMenuRegistry.appendMenuItem(suggestWidgetStatusbarMenu, {\n    command: { id: 'acceptSelectedSuggestion', title: nls.localize('accept.replace', \"Replace\") },\n    group: 'left',\n    order: 1,\n    when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\n});\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptAlternativeSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* Shift */ | 3 /* Enter */,\n        secondary: [1024 /* Shift */ | 2 /* Tab */],\n    },\n    handler(x) {\n        x.acceptSelectedSuggestion(false, true);\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\n            title: nls.localize('accept.replace', \"Replace\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\n            title: nls.localize('accept.insert', \"Insert\")\n        }]\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n    id: 'hideSuggestWidget',\n    precondition: SuggestContext.Visible,\n    handler: x => x.cancelSuggestWidget(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 18 /* DownArrow */,\n        secondary: [2048 /* CtrlCmd */ | 18 /* DownArrow */],\n        mac: { primary: 18 /* DownArrow */, secondary: [2048 /* CtrlCmd */ | 18 /* DownArrow */, 256 /* WinCtrl */ | 44 /* KeyN */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 12 /* PageDown */,\n        secondary: [2048 /* CtrlCmd */ | 12 /* PageDown */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectLastSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectLastSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 16 /* UpArrow */,\n        secondary: [2048 /* CtrlCmd */ | 16 /* UpArrow */],\n        mac: { primary: 16 /* UpArrow */, secondary: [2048 /* CtrlCmd */ | 16 /* UpArrow */, 256 /* WinCtrl */ | 46 /* KeyP */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 11 /* PageUp */,\n        secondary: [2048 /* CtrlCmd */ | 11 /* PageUp */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectFirstSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectFirstSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionDetails',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionDetails(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* CtrlCmd */ | 10 /* Space */,\n        secondary: [2048 /* CtrlCmd */ | 39 /* KeyI */],\n        mac: { primary: 256 /* WinCtrl */ | 10 /* Space */, secondary: [2048 /* CtrlCmd */ | 39 /* KeyI */] }\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\n            title: nls.localize('detail.more', \"show less\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\n            title: nls.localize('detail.less', \"show more\")\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleExplainMode',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleExplainMode(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */,\n        primary: 2048 /* CtrlCmd */ | 85 /* Slash */,\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionFocus',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionFocus(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 10 /* Space */,\n        mac: { primary: 256 /* WinCtrl */ | 512 /* Alt */ | 10 /* Space */ }\n    }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertBestCompletion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: (x, arg) => {\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? Object.assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\n    },\n    kbOpts: {\n        weight,\n        primary: 2 /* Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertNextSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2 /* Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertPrevSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* Shift */ | 2 /* Tab */\n    }\n}));\nregisterEditorAction(class extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.resetSuggestSize',\n            label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\n            alias: 'Reset Suggest Widget Size',\n            precondition: undefined\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = SuggestController.get(editor)) === null || _a === void 0 ? void 0 : _a.resetWidgetSize();\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { localize } from '../../../../nls.js';\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hc: '#EE9D28'\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hc: '#B180D7'\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hc: '#EE9D28'\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hc: '#75BEFF'\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hc: '#EE9D28'\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hc: '#75BEFF'\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hc: '#B180D7'\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hc: '#75BEFF'\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hc: '#B180D7'\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hc: '#75BEFF'\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nregisterThemingParticipant((theme, collector) => {\n    const symbolIconArrayColor = theme.getColor(SYMBOL_ICON_ARRAY_FOREGROUND);\n    if (symbolIconArrayColor) {\n        collector.addRule(`${Codicon.symbolArray.cssSelector} { color: ${symbolIconArrayColor}; }`);\n    }\n    const symbolIconBooleanColor = theme.getColor(SYMBOL_ICON_BOOLEAN_FOREGROUND);\n    if (symbolIconBooleanColor) {\n        collector.addRule(`${Codicon.symbolBoolean.cssSelector} { color: ${symbolIconBooleanColor}; }`);\n    }\n    const symbolIconClassColor = theme.getColor(SYMBOL_ICON_CLASS_FOREGROUND);\n    if (symbolIconClassColor) {\n        collector.addRule(`${Codicon.symbolClass.cssSelector} { color: ${symbolIconClassColor}; }`);\n    }\n    const symbolIconMethodColor = theme.getColor(SYMBOL_ICON_METHOD_FOREGROUND);\n    if (symbolIconMethodColor) {\n        collector.addRule(`${Codicon.symbolMethod.cssSelector} { color: ${symbolIconMethodColor}; }`);\n    }\n    const symbolIconColorColor = theme.getColor(SYMBOL_ICON_COLOR_FOREGROUND);\n    if (symbolIconColorColor) {\n        collector.addRule(`${Codicon.symbolColor.cssSelector} { color: ${symbolIconColorColor}; }`);\n    }\n    const symbolIconConstantColor = theme.getColor(SYMBOL_ICON_CONSTANT_FOREGROUND);\n    if (symbolIconConstantColor) {\n        collector.addRule(`${Codicon.symbolConstant.cssSelector} { color: ${symbolIconConstantColor}; }`);\n    }\n    const symbolIconConstructorColor = theme.getColor(SYMBOL_ICON_CONSTRUCTOR_FOREGROUND);\n    if (symbolIconConstructorColor) {\n        collector.addRule(`${Codicon.symbolConstructor.cssSelector} { color: ${symbolIconConstructorColor}; }`);\n    }\n    const symbolIconEnumeratorColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_FOREGROUND);\n    if (symbolIconEnumeratorColor) {\n        collector.addRule(`\n\t\t\t${Codicon.symbolValue.cssSelector},${Codicon.symbolEnum.cssSelector} { color: ${symbolIconEnumeratorColor}; }`);\n    }\n    const symbolIconEnumeratorMemberColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND);\n    if (symbolIconEnumeratorMemberColor) {\n        collector.addRule(`${Codicon.symbolEnumMember.cssSelector} { color: ${symbolIconEnumeratorMemberColor}; }`);\n    }\n    const symbolIconEventColor = theme.getColor(SYMBOL_ICON_EVENT_FOREGROUND);\n    if (symbolIconEventColor) {\n        collector.addRule(`${Codicon.symbolEvent.cssSelector} { color: ${symbolIconEventColor}; }`);\n    }\n    const symbolIconFieldColor = theme.getColor(SYMBOL_ICON_FIELD_FOREGROUND);\n    if (symbolIconFieldColor) {\n        collector.addRule(`${Codicon.symbolField.cssSelector} { color: ${symbolIconFieldColor}; }`);\n    }\n    const symbolIconFileColor = theme.getColor(SYMBOL_ICON_FILE_FOREGROUND);\n    if (symbolIconFileColor) {\n        collector.addRule(`${Codicon.symbolFile.cssSelector} { color: ${symbolIconFileColor}; }`);\n    }\n    const symbolIconFolderColor = theme.getColor(SYMBOL_ICON_FOLDER_FOREGROUND);\n    if (symbolIconFolderColor) {\n        collector.addRule(`${Codicon.symbolFolder.cssSelector} { color: ${symbolIconFolderColor}; }`);\n    }\n    const symbolIconFunctionColor = theme.getColor(SYMBOL_ICON_FUNCTION_FOREGROUND);\n    if (symbolIconFunctionColor) {\n        collector.addRule(`${Codicon.symbolFunction.cssSelector} { color: ${symbolIconFunctionColor}; }`);\n    }\n    const symbolIconInterfaceColor = theme.getColor(SYMBOL_ICON_INTERFACE_FOREGROUND);\n    if (symbolIconInterfaceColor) {\n        collector.addRule(`${Codicon.symbolInterface.cssSelector} { color: ${symbolIconInterfaceColor}; }`);\n    }\n    const symbolIconKeyColor = theme.getColor(SYMBOL_ICON_KEY_FOREGROUND);\n    if (symbolIconKeyColor) {\n        collector.addRule(`${Codicon.symbolKey.cssSelector} { color: ${symbolIconKeyColor}; }`);\n    }\n    const symbolIconKeywordColor = theme.getColor(SYMBOL_ICON_KEYWORD_FOREGROUND);\n    if (symbolIconKeywordColor) {\n        collector.addRule(`${Codicon.symbolKeyword.cssSelector} { color: ${symbolIconKeywordColor}; }`);\n    }\n    const symbolIconModuleColor = theme.getColor(SYMBOL_ICON_MODULE_FOREGROUND);\n    if (symbolIconModuleColor) {\n        collector.addRule(`${Codicon.symbolModule.cssSelector} { color: ${symbolIconModuleColor}; }`);\n    }\n    const outlineNamespaceColor = theme.getColor(SYMBOL_ICON_NAMESPACE_FOREGROUND);\n    if (outlineNamespaceColor) {\n        collector.addRule(`${Codicon.symbolNamespace.cssSelector} { color: ${outlineNamespaceColor}; }`);\n    }\n    const symbolIconNullColor = theme.getColor(SYMBOL_ICON_NULL_FOREGROUND);\n    if (symbolIconNullColor) {\n        collector.addRule(`${Codicon.symbolNull.cssSelector} { color: ${symbolIconNullColor}; }`);\n    }\n    const symbolIconNumberColor = theme.getColor(SYMBOL_ICON_NUMBER_FOREGROUND);\n    if (symbolIconNumberColor) {\n        collector.addRule(`${Codicon.symbolNumber.cssSelector} { color: ${symbolIconNumberColor}; }`);\n    }\n    const symbolIconObjectColor = theme.getColor(SYMBOL_ICON_OBJECT_FOREGROUND);\n    if (symbolIconObjectColor) {\n        collector.addRule(`${Codicon.symbolObject.cssSelector} { color: ${symbolIconObjectColor}; }`);\n    }\n    const symbolIconOperatorColor = theme.getColor(SYMBOL_ICON_OPERATOR_FOREGROUND);\n    if (symbolIconOperatorColor) {\n        collector.addRule(`${Codicon.symbolOperator.cssSelector} { color: ${symbolIconOperatorColor}; }`);\n    }\n    const symbolIconPackageColor = theme.getColor(SYMBOL_ICON_PACKAGE_FOREGROUND);\n    if (symbolIconPackageColor) {\n        collector.addRule(`${Codicon.symbolPackage.cssSelector} { color: ${symbolIconPackageColor}; }`);\n    }\n    const symbolIconPropertyColor = theme.getColor(SYMBOL_ICON_PROPERTY_FOREGROUND);\n    if (symbolIconPropertyColor) {\n        collector.addRule(`${Codicon.symbolProperty.cssSelector} { color: ${symbolIconPropertyColor}; }`);\n    }\n    const symbolIconReferenceColor = theme.getColor(SYMBOL_ICON_REFERENCE_FOREGROUND);\n    if (symbolIconReferenceColor) {\n        collector.addRule(`${Codicon.symbolReference.cssSelector} { color: ${symbolIconReferenceColor}; }`);\n    }\n    const symbolIconSnippetColor = theme.getColor(SYMBOL_ICON_SNIPPET_FOREGROUND);\n    if (symbolIconSnippetColor) {\n        collector.addRule(`${Codicon.symbolSnippet.cssSelector} { color: ${symbolIconSnippetColor}; }`);\n    }\n    const symbolIconStringColor = theme.getColor(SYMBOL_ICON_STRING_FOREGROUND);\n    if (symbolIconStringColor) {\n        collector.addRule(`${Codicon.symbolString.cssSelector} { color: ${symbolIconStringColor}; }`);\n    }\n    const symbolIconStructColor = theme.getColor(SYMBOL_ICON_STRUCT_FOREGROUND);\n    if (symbolIconStructColor) {\n        collector.addRule(`${Codicon.symbolStruct.cssSelector} { color: ${symbolIconStructColor}; }`);\n    }\n    const symbolIconTextColor = theme.getColor(SYMBOL_ICON_TEXT_FOREGROUND);\n    if (symbolIconTextColor) {\n        collector.addRule(`${Codicon.symbolText.cssSelector} { color: ${symbolIconTextColor}; }`);\n    }\n    const symbolIconTypeParameterColor = theme.getColor(SYMBOL_ICON_TYPEPARAMETER_FOREGROUND);\n    if (symbolIconTypeParameterColor) {\n        collector.addRule(`${Codicon.symbolTypeParameter.cssSelector} { color: ${symbolIconTypeParameterColor}; }`);\n    }\n    const symbolIconUnitColor = theme.getColor(SYMBOL_ICON_UNIT_FOREGROUND);\n    if (symbolIconUnitColor) {\n        collector.addRule(`${Codicon.symbolUnit.cssSelector} { color: ${symbolIconUnitColor}; }`);\n    }\n    const symbolIconVariableColor = theme.getColor(SYMBOL_ICON_VARIABLE_FOREGROUND);\n    if (symbolIconVariableColor) {\n        collector.addRule(`${Codicon.symbolVariable.cssSelector} { color: ${symbolIconVariableColor}; }`);\n    }\n});\n"],"names":["AbstractEditorCommandsQuickAccessProvider","options","instantiationService","keybindingService","commandService","telemetryService","dialogService","activeTextEditorControl","this","editorCommandPicks","getSupportedActions","editorAction","push","commandId","id","commandAlias","alias","label","stripIcons","AbstractCommandsQuickAccessProvider","AbstractEditorNavigationQuickAccessProvider","rangeHighlightDecorationId","undefined","picker","token","_a","disposables","DisposableStore","canAcceptInBackground","matchOnLabel","matchOnDescription","matchOnDetail","sortByLabel","pickerDisposable","add","MutableDisposable","value","doProvide","onDidActiveTextEditorControlChange","editor","canProvideWithTextEditor","context","codeEditor","getCodeEditor","lastKnownEditorViewState","withNullAsUndefined","saveViewState","onDidChangeCursorPosition","restoreViewState","once","onCancellationRequested","call","toDisposable","clearDecorations","provideWithTextEditor","provideWithoutTextEditor","setSelection","range","revealRangeInCenter","preserveFocus","focus","isDiffEditor","getModel","modified","changeDecorations","changeAccessor","deleteDecorations","overviewRulerDecorationId","rangeHighlightId","newDecorations","description","className","isWholeLine","overviewRuler","color","themeColorFromId","overviewRulerRangeHighlight","position","OverviewRulerLane","deltaDecorations","AbstractGotoLineQuickAccessProvider","localize","items","ariaLabel","Disposable","onDidAccept","event","item","selectedItems","isValidLineNumber","lineNumber","gotoLocation","toRange","column","keyMods","inBackground","hide","updatePickerAndEditor","parsePosition","trim","substr","PREFIX","length","getPickLabel","addDecorations","onDidChangeValue","getOptions","get","renderType","updateOptions","lineNumbers","startLineNumber","startColumn","endLineNumber","endColumn","numbers","split","map","part","parseInt","filter","isNaN","endLine","lineCount","isValidColumn","getPosition","model","positionCandidate","validatePosition","equals","_b","getLineCount","__decorate","decorators","target","key","desc","d","c","arguments","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","AbstractGotoSymbolQuickAccessProvider","_languageFeaturesService","_outlineModelService","create","provideLabelPick","documentSymbolProvider","has","doProvideWithEditorSymbols","doProvideWithoutEditorSymbols","waitForLanguageSymbolRegistry","isCancellationRequested","index","kind","symbolProviderRegistryPromise","DeferredPromise","symbolProviderListener","onDidChange","dispose","complete","p","selection","onDidTriggerItemButton","forceSideBySide","symbolsPromise","getDocumentSymbols","picksCts","updatePickerItems","busy","CancellationTokenSource","query","prepareQuery","doGetSymbolPicks","original","ignoreFirstActiveEvent","onDidChangeActive","activeItems","decoration","symbols","filterBySymbolKind","indexOf","SCOPE_PREFIX","filterPos","values","symbolQuery","pieceToQuery","containerQuery","slice","filteredSymbolPicks","symbol","symbolLabel","name","symbolLabelWithIcon","SymbolKinds","symbolLabelIconOffset","containerLabel","containerName","extraContainerLabel","symbolScore","symbolMatches","containerScore","containerMatches","skipContainerQuery","scoreFuzzy2","assign","deprecated","tags","score","highlights","Range","selectionRange","strikethrough","buttons","openSideBySideDirection","iconClass","Codicon","tooltip","sortedFilteredSymbolPicks","sort","symbolA","symbolB","compareByKindAndScore","compareByScore","symbolPicks","updateLastSeparatorLabel","lastSeparator","lastSymbolKind","lastSymbolKindCounter","format","NLS_SYMBOL_KIND_CACHE","FALLBACK_NLS_SYMBOL_KIND","symbolPick","type","kindA","kindB","localeCompare","document","getOrCreate","asListOfDocumentSymbols","PREFIX_BY_CATEGORY","ILanguageFeaturesService","IOutlineModelService","CONTEXT_RENAME_INPUT_VISIBLE","RawContextKey","RenameInputField","_editor","_acceptKeybindings","_themeService","_keybindingService","contextKeyService","_disposables","allowEditorOverflow","_visibleContextKey","bindTo","addContentWidget","onDidChangeConfiguration","hasChanged","_updateFont","onDidColorThemeChange","_updateStyles","removeContentWidget","_domNode","createElement","_input","setAttribute","appendChild","_label","updateLabel","accept","preview","lookupKeybinding","innerText","comment","getLabel","onDidUpdateKeybindings","getColorTheme","theme","_c","_d","widgetShadowColor","getColor","widgetShadow","style","backgroundColor","String","editorWidgetBackground","boxShadow","inputForeground","inputBackground","border","inputBorder","borderWidth","borderStyle","borderColor","toString","fontInfo","getOption","fontFamily","fontWeight","fontSize","_visible","_position","preference","cancelInput","wantsPreview","_currentAcceptInput","focusEditor","_currentCancelInput","where","selectionStart","selectionEnd","supportPreview","classList","toggle","Position","size","Math","max","disposeOnDone","newName","onDidBlurEditorWidget","_show","finally","_hide","revealLineInCenterIfOutsideViewport","set","layoutContentWidget","setTimeout","setSelectionRange","getAttribute","reset","IThemeService","IKeybindingService","IContextKeyService","RenameSkeleton","registry","_providerRenameIdx","_providers","ordered","rejects","provider","resolveRenameLocation","res","rejectReason","word","getWordAtPosition","text","join","_provideRenameEdits","edits","provideRenameEdits","concat","nls","rename","skeleton","CancellationToken","loc","RenameController","_instaService","_notificationService","_bulkEditService","_progressService","_logService","_configService","_dispoableStore","_cts","_renameInputField","IdleValue","createInstance","hasModel","renameProvider","hasProvider","EditorStateCancellationTokenSource","resolveLocationOperation","showWhile","MessageController","showMessage","getSelection","min","hasPreviewHandler","getValue","uri","getInput","inputFieldResult","renameOperation","raceCancellation","renameResult","info","ResourceEdit","showPreview","quotableLabel","ariaSummary","alert","catch","err","error","acceptInput","getContribution","ID","IInstantiationService","INotificationService","IBulkEditService","IEditorProgressService","ILogService","ITextResourceConfigurationService","RenameAction","precondition","ContextKeyExpr","EditorContextKeys","kbOpts","kbExpr","primary","weight","contextMenuOpts","group","order","accessor","args","editorService","ICodeEditorService","Array","isArray","pos","URI","openCodeEditor","resource","getActiveCodeEditor","setPosition","invokeWithinContext","reportTelemetry","run","onUnexpectedError","controller","EditorAction","registerEditorContribution","registerEditorAction","RenameCommand","EditorCommand","registerEditorCommand","handler","x","acceptRenameInput","cancelRenameInput","secondary","registerModelAndPositionCommand","assertType","Error","Registry","Extensions","registerConfiguration","properties","scope","default","BracketSelectionRangeProvider","positions","bucket","ranges","Map","_bracketsRightYield","_bracketsLeftYield","f","round","counts","t1","Date","now","_maxRounds","bracket","bracketPairs","findNextBracket","_maxDuration","close","isOpen","val","list","LinkedList","getEndPosition","findPrevBracket","closing","shift","delete","innerBracket","getStartPosition","outerBracket","_addBracketLeading","startLine","getLineFirstNonWhitespaceColumn","aboveLine","getLineLastNonWhitespaceColumn","WordSelectionRangeProvider","_addInWordRanges","_addWordRanges","_addWhitespaceLine","getFullModelRange","obj","offset","start","end","lastCh","ch","charCodeAt","isLowerAsciiLetter","isUpperAsciiLetter","getLineLength","getLineMaxColumn","SelectionRanges","fwd","equalsRange","mov","SmartSelectController","_ignoreSelection","_selectionListener","forward","selections","getSelections","_state","provideSelectionRanges","selectionRangeProvider","s","arrays","a","b","equalsSelection","containsPosition","unshift","state","newSelections","Selection","setSelections","AbstractSmartSelect","opts","_forward","_accessor","GrowSelectionAction","mac","menuOpts","menuId","MenuId","title","CommandsRegistry","ShrinkSelectionAction","providers","all","work","allRawRanges","allProviderRanges","oneProviderRanges","onUnexpectedExternalError","oneRawRanges","last","oneRanges","selectLeadingAndTrailingWhitespace","oneRangesWithTrivia","prev","cur","rangeNoWhitespace","containsRange","rangeFull","ITextModelService","createModelReference","reference","object","textEditorModel","_defaultOptions","overwriteBefore","overwriteAfter","undoStopBefore","undoStopAfter","adjustWhitespace","clipboardText","overtypingCapturer","SnippetController2","_instantiationService","_snippetListener","_modelVersionId","_inSnippet","InSnippetMode","_hasNextTabstop","HasNextTabstop","_hasPrevTabstop","HasPrevTabstop","_session","template","_doInsert","cancel","_logInfo","clear","pushStackElement","merge","getAlternativeVersionId","SnippetSession","insert","_updateState","onDidChangeModelContent","isFlush","onDidChangeModel","onDidChangeCursorSelection","hasPlaceholder","isAtLastPlaceholder","isSelectionWithinPlaceholders","isAtFirstPlaceholder","_handleChoice","choice","_currentChoice","first","invokeFunction","showSimpleSuggestions","option","insertText","sortText","repeat","delta","resetSelection","Boolean","CommandCtor","ctrl","finish","Scanner","len","_table","isDigitCharacter","isVariableCharacter","Marker","_children","child","Text","parent","others","idx","children","newChildren","splice","_fixParent","candidate","TextmateSnippet","reduce","TransformableMarker","Placeholder","Choice","ret","transform","clone","isFinalTabstop","marker","forEach","Transform","regexp","RegExp","_this","didMatch","replace","_replace","prototype","some","FormatString","elseValue","groups","source","ignoreCase","global","shorthandName","ifValue","toLocaleUpperCase","toLocaleLowerCase","_toPascalCase","_toCamelCase","match","charAt","toUpperCase","toLowerCase","Variable","resolver","walk","visitor","stack","_placeholders","placeholderInfo","found","placeholder","SnippetParser","_scanner","_token","insertFinalTabstop","enforceFinalTabstop","snippet","_parse","placeholderDefaultValues","incompletePlaceholders","placeholderCount","defaultValues","tokenText","nextToken","substring","_parseEscaped","_parseTabstopOrVariableName","_parseComplexPlaceholder","_parseComplexVariable","_parseAnything","_accept","test","Number","_backTo","_parseTransform","_parseChoiceElement","variable","regexValue","regexOptions","escaped","_parseFormatString","complex","shorthand","_until","CompositeSnippetVariableResolver","freeze","_delegates","SelectionBasedVariableResolver","_model","_selection","_selectionIdx","_overtypingCapturer","getValueInRange","isMultiline","getLastOvertypedInfo","multiline","line","getLineContent","lineLeadingWhitespace","getLeadingWhitespace","varLeadingWhitespace","splitLines","pop","whitespaceCommonLength","commonPrefixLength","m","newline","rest","positionLineNumber","positionColumn","ModelBasedVariableResolver","_labelService","path","fsPath","lastIndexOf","getUriLabel","dirname","relative","noPrefix","ClipboardBasedVariableResolver","_readClipboardText","_selectionCount","_spread","lines","isFalsyOrWhitespace","CommentBasedVariableResolver","langId","getLanguageIdAtPosition","selectionStartLineNumber","selectionStartColumn","config","LanguageConfigurationRegistry","lineCommentToken","blockCommentStartToken","blockCommentEndToken","TimeBasedVariableResolver","_date","getFullYear","getMonth","valueOf","padStart","getDate","getHours","getMinutes","getSeconds","dayNames","getDay","dayNamesShort","monthNames","monthNamesShort","floor","getTime","WorkspaceBasedVariableResolver","_workspaceService","workspaceIdentifier","toWorkspaceIdentifier","getWorkspace","_resolveWorkspaceName","_resoveWorkspacePath","isSingleFolderWorkspaceIdentifier","filename","configPath","endsWith","WORKSPACE_EXTENSION","normalizeDriveLetter","folderpath","RandomBasedVariableResolver","random","generateUuid","OneSnippet","_snippet","_offset","_snippetLineLeadingWhitespace","_nestingLevel","_placeholderGroups","groupBy","placeholders","_placeholderGroupsIdx","_placeholderDecorations","placeholderOffset","placeholderLen","fullLen","getPositionAt","_decor","inactiveFinal","inactive","handle","addDecoration","_initDecorations","operations","getDecorationRange","currentValue","transformedValueLines","normalizeIndentation","EditOperation","getEOL","executeEdits","couldSkipThisPlaceholder","activePlaceholders","Set","_hasPlaceholderBeenCollapsed","changeDecorationOptions","activeFinal","active","enclosingPlaceholders","enclosingPlaceholder","move","isEmpty","placeholdersWithEqualIndex","nested","console","assert","indexLastPlaceholder","nestedPlaceholder","removeDecoration","ModelDecorationOptions","stickiness","_templateMerges","_snippets","_template","_options","createEditsAndSnippets","snippets","undoEdits","_move","edit","identifier","revealRange","revealPositionInCenterIfOutsideViewport","oneSelection","allPossibleSelections","possibleSelections","computePossibleSelections","array","adjustIndentation","adjustNewlines","snippetTextString","prevChar","newValue","positionColumnBefore","positionColumnAfter","validateRange","getDirection","workspaceService","IWorkspaceContextService","modelBasedVariableResolver","ILabelService","readClipboardText","firstBeforeText","adjustSelection","firstAfterText","firstLineFirstNonWhitespace","indexedSelections","extensionBefore","extensionAfter","snippetSelection","setStartPosition","setEndPosition","parse","snippetLineLeadingWhitespace","resolveVariables","getOffsetAt","getValueLengthInRange","major","minor","_snippetSuggestSupport","Context","Visible","historyNavigationVisible","DetailsVisible","MultipleSuggestions","MakesTextEdit","AcceptSuggestionsOnEnter","HasInsertAndReplaceRange","InsertMode","CanResolve","suggestWidgetStatusbarMenu","CompletionItem","completion","container","isInvalid","FuzzyScore","distance","textLabel","labelLow","sortTextLow","filterTextLow","filterText","editStart","editInsertEnd","editReplaceEnd","resolveCompletionItem","_resolveCache","_isResolved","sub","isCancellationError","CompletionOptions","snippetSortOrder","kindFilter","providerFilter","showDeprecated","getSnippetSuggestSupport","CompletionItemModel","needsClipboard","durations","disposable","provideSuggestionItems","triggerKind","sw","StopWatch","defaultReplaceRange","defaultRange","onCompletionList","didAddResult","suggestions","suggestion","includes","insertTextRules","isDisposable","providerName","_debugDisplayName","elapsedProvider","duration","elapsedOverall","elapsed","snippetCompletions","provideCompletionItems","orderedGroups","providerGroup","canceled","getSuggestionComparator","entries","defaultComparator","_onlyOnceProvider","_snippetComparators","snippetConfig","triggerCharacter","maxItemsToResolve","completionProvider","ref","incomplete","resolving","completions","_onlyOnceSuggestions","register","triggerSuggest","Memory","topScore","preselect","NoMemory","LRUMemory","_cache","LRUCache","_seq","getLanguageId","touch","lineSuffix","indexPreselect","indexRecency","seq","peek","toJSON","data","CompletionItemKinds","PrefixMemory","_trie","TernarySearchTree","getWordUntilPosition","findSubstr","SuggestMemoryService","_storageService","_persistSoon","RunOnceScheduler","_saveState","onWillSaveState","reason","WillSaveStateReason","_withStrategy","memorize","schedule","select","mode","overrideIdentifier","_strategy","ctor","_strategyCtors","raw","_storagePrefix","fromJSON","JSON","stringify","store","IStorageService","IConfigurationService","ISuggestMemoryService","createDecorator","registerSingleton","WordContextKey","_enabled","_ckAtEnd","AtEnd","_configListener","_update","enabled","checkForWordEnd","SuggestAlternatives","_index","_ckOtherSuggestions","OtherSuggestions","_listener","_acceptNext","_ignore","acceptNext","_moveIndex","newIndex","additionalTextEdits","CommitCharacterController","widget","onDidShow","_onItem","getFocusedItem","onDidFocus","onDidHide","onWillType","_active","isFrozen","acceptCharacters","selected","isNonEmptyArray","commitCharacters","CharacterSet","WordDistance","service","localityBonus","None","canComputeWordRanges","computeWordRanges","wordRanges","wordUntilPos","anchor","wordLines","isFalsyOrEmpty","binarySearch","bestWordRange","blockDistance","CompletionModel","lineContext","wordDistance","snippetSuggestions","_snippetCompareFn","_compareCompletionItems","_items","_column","_wordDistance","_refilterKind","_lineContext","_compareCompletionItemsSnippetsUp","_compareCompletionItemsSnippetsDown","leadingLineContent","characterCountDelta","_filteredItems","_ensureCachedState","_providerInfo","keys","except","_stats","_createCachedState","labelLengths","wordLow","scoreFn","filterGraceful","fuzzyScore","fuzzyScoreGracefulAggressive","wordLen","wordPos","compareIgnoreCase","anyScore","pLabelLen","quickSelect","LineContext","auto","shy","leadingWord","tokenizeIfCheap","SuggestModel","_editorWorkerService","_clipboardService","_telemetryService","_contextKeyService","_configurationService","_toDispose","_quickSuggestDelay","_triggerCharacterListener","_triggerQuickSuggest","TimeoutTimer","_completionDisposables","_onDidCancel","Emitter","_onDidTrigger","_onDidSuggest","onDidCancel","onDidTrigger","onDidSuggest","_telemetryGate","_currentSelection","_updateTriggerCharacters","onDidChangeModelLanguage","_updateQuickSuggest","_updateActiveSuggestSession","editorIsComposing","onDidCompositionStart","onDidCompositionEnd","_onCompositionEnd","_onCursorChange","_refilterCompletionItems","supportsByTriggerCharacter","support","triggerCharacters","checkTriggerCharacter","configurationService","getContextKeyValue","allowQuickSuggestions","canShowSuggestOnTriggerCharacters","shouldAutoTrigger","lastChar","isLowSurrogate","isHighSurrogate","supports","existing","_completionModel","adopt","trigger","onDidType","retrigger","_requestToken","_context","fire","prevSelection","isBeforeOrEqual","_doTriggerQuickSuggest","snippetsPreventQuickSuggestions","isInSnippet","cancelAndSet","quickSuggestions","lineTokens","getLineTokens","tokenType","getStandardTokenType","findTokenIndexAtOffset","other","comments","strings","canShowQuickSuggest","ctx","_onNewContext","onlyFrom","suggestCtx","_createSuggestFilter","itemKindFilter","itemKind","readText","cmpFn","_reportDurationsTelemetry","publicLog2","debug","inactiveProvider","allProvider","oldLineContext","completionModel","suggestOptions","showMethods","showFunctions","showConstructors","showFields","showVariables","showClasses","showStructs","showInterfaces","showModules","showProperties","showEvents","showOperators","showUnits","showValues","showConstants","showEnums","showEnumMembers","showKeywords","showWords","showColors","showFiles","showReferences","showFolders","showTypeParameters","showSnippets","showUsers","showIssues","IEditorWorkerService","IClipboardService","ITelemetryService","OvertypingCapturer","suggestModel","_lastOvertyped","_empty","selectionsLength","willOvertype","_maxSelectionLength","StatusBarViewItem","kb","_action","textContent","symbolPrintEnter","MenuEntryActionViewItem","SuggestWidgetStatus","_menuService","_menuDisposables","element","dom","append","$","actionViewItemProvider","action","MenuItemAction","_leftActions","ActionBar","_rightActions","domNode","remove","menu","createMenu","left","right","getActions","actions","renderMenu","IMenuService","ResizableHTMLElement","currentSize","_onDidWillResize","onDidWillResize","_onDidResize","onDidResize","_sashListener","_size","Dimension","_minSize","_maxSize","MAX_SAFE_INTEGER","_eastSash","Sash","getVerticalSashLeft","width","orientation","_westSash","_northSash","getHorizontalSashTop","orthogonalEdge","OrthogonalEdge","_southSash","height","orthogonalStartSash","orthogonalEndSash","deltaY","deltaX","Event","onDidStart","onDidEnd","dimension","currentX","startX","layout","east","west","currentY","startY","north","south","onDidReset","_preferredSize","minHeight","minWidth","maxHeight","maxWidth","newSize","clearSashHoverState","canExpandCompletionItem","documentation","detail","SuggestDetailsWidget","instaService","_onDidClose","onDidClose","_onDidChangeContents","onDidChangeContents","_renderDisposeable","_borderWidth","_markdownRenderer","MarkdownRenderer","_body","_scrollbar","DomScrollableElement","getDomNode","_header","_close","_type","_docs","_configureFont","getMassagedFontFamily","isSafari","EDITOR_FONT_DEFAULTS","lineHeight","fontSizePx","lineHeightPx","fontFeatureSettings","borderHeight","verticalPadding","horizontalPadding","getLayoutInfo","explainMode","md","MarkdownString","appendCodeblock","cappedDetail","show","clearNode","renderedContents","render","onDidRenderAsync","clientHeight","userSelect","tabIndex","onmousedown","preventDefault","stopPropagation","onclick","scrollTop","clearContents","scanDomNode","much","scrollHeight","scrollDown","scrollUp","SuggestDetailsOverlay","topLeftNow","sizeNow","_added","_preferAlignAtTop","_resizable","enableSashes","deltaTop","deltaLeft","_topLeft","updateTopLeft","_applyTopLeft","top","_userSize","_anchorBox","_placeAtAnchor","addOverlayWidget","sessionEnded","removeOverlayWidget","preferAlignAtTop","anchorBox","getBoundingClientRect","alignAtTop","maxSize","bodyBox","getClientArea","body","defaultMinSize","defaultTop","eastPlacement","maxSizeTop","maxSizeBottom","with","fit","minSize","placements","placement","find","bottom","topLeft","getAriaId","suggestMoreInfoIcon","registerIcon","_completionItemColor","out","ColorExtractor","_regexStrict","_regexRelaxed","exec","ItemRenderer","_modelService","_languageService","_onDidToggleDetails","onDidToggleDetails","templateId","root","icon","colorspan","main","iconContainer","iconLabel","IconLabel","supportHighlights","supportIcons","parametersLabel","qualifierLabel","detailsLabel","readMore","ThemeIcon","configureFont","labelOptions","labelEscapeNewLines","matches","createMatches","extract","getFileIconTheme","hasFileIcons","labelClasses","getIconClasses","scheme","FileKind","detailClasses","extraClasses","hasFolderIcons","flatten","CSSIcon","setLabel","stripNewLines","showInlineDetails","templateData","str","IModelService","ILanguageService","editorSuggestWidgetForeground","registerColor","dark","light","hc","editorWidgetBorder","editorForeground","editorSuggestWidgetSelectedBackground","quickInputListFocusForeground","quickInputListFocusIconForeground","quickInputListFocusBackground","PersistedWidgetSize","listHighlightForeground","listFocusHighlightForeground","transparent","_service","_key","getEditorType","EmbeddedCodeEditorWidget","is","lift","SuggestWidget","_isAuto","_ignoreFocusEvents","_forceRenderingAbove","_explainMode","_showTimeout","_onDidSelect","_onDidFocus","_onDidHide","_onDidShow","onDidSelect","_onDetailsKeydown","onDetailsKeyDown","_contentWidget","SuggestContentWidget","_persistedSize","ResizeState","persistedSize","persistHeight","persistWidth","lockPreference","restore","_resize","itemHeight","defaultSize","threshold","abs","unlockPreference","_messageElement","_listElement","details","toggleDetails","_details","applyIconStyle","showIcons","renderer","_list","List","getHeight","_element","getTemplateId","alwaysConsumeMouseWheel","useShadows","mouseSupport","accessibilityProvider","getRole","getWidgetAriaLabel","getWidgetRole","getAriaLabel","isResolved","_isDetailsVisible","docs","_status","applyStatusBarStyle","showStatusBar","attachListStyler","listInactiveFocusBackground","listInactiveFocusOutline","activeContrastBorder","t","_onThemeChange","onMouseDown","_onListMouseDownOrTap","onTap","onDidChangeSelection","_onListSelection","onDidChangeFocus","_onListFocus","_onCursorSelectionChanged","_ctxSuggestWidgetVisible","SuggestContext","_ctxSuggestWidgetDetailsVisible","_ctxSuggestWidgetMultipleSuggestions","addStandardDisposableListener","_onEditorMouseDown","_loadingTimeout","mouseEvent","contains","browserEvent","_select","elements","indexes","_currentSuggestionDetails","_focusedItem","setAriaOptions","activeDescendant","reveal","createCancelablePromise","loading","disposableTimeout","showDetails","setFocus","_cappedHeight","LOADING_MESSAGE","NO_SUGGESTIONS_MESSAGE","_layout","delay","_setState","selectionIndex","isAuto","visibleCount","pageDown","focusNextPage","focusNext","scrollBottom","focusLast","pageUp","focusPreviousPage","focusPrevious","focusFirst","getFocusedElements","getFocus","_setDetailsVisible","renderLoading","renderItem","_positionDetails","dim","minPersistedHeight","ceil","setPreference","preferredWidth","stats","typicalHalfwidthCharacterWidth","fullHeight","statusBarHeight","contentHeight","editorBox","getDomNodePagePosition","cursorBox","getScrolledVisiblePosition","cursorBottom","maxHeightBelow","availableSpaceAbove","maxHeightAbove","capped","wanted","preferredSize","placeAtAnchor","clamp","getBoolean","_widget","suppressMouseDown","_preferenceLocked","_hidden","_preference","_afterRender","LineSuffix","_marker","isDisposed","SuggestController","_memoryService","_commandService","_lineSuffix","_selectors","PriorityRegistry","priority","ctxInsertMode","insertMode","_insertSuggestion","commitCharacterController","ctxMakesTextEdit","ctxHasInsertAndReplace","ctxCanResolve","toKeybinding","SimpleKeybinding","platform","isModifierKey","_alternatives","showTriggered","itemsOrderedByPriorityDesc","showSuggestions","hideWidget","acceptSuggestionsOnEnter","updateFromConfig","acceptSuggestionOnEnter","flags","snippetController","modelVersionNow","tasks","cts","pushUndoStop","getOverwriteInfo","scrollState","StableEditorScrollState","restoreRelativeVerticalPositionOfCursor","docListener","onDidChangeContent","changes","change","thisPosition","oldFlags","didType","typeListener","applied","trace","command","TriggerSuggestAction","executeCommand","canUndo","undo","_alertCompletionItem","_reportSuggestionAcceptedTelemetry","acceptedSuggestion","providerId","basenameHash","hash","basename","languageId","fileExtension","extname","toggleMode","msg","revealPosition","arg","positionNow","fallback","_","listener","makesTextEdit","keepAlternativeSuggestions","alternativeOverwriteConfig","selectNext","selectNextPage","selectLast","selectPrevious","selectPreviousPage","selectFirst","toggleExplainMode","toggleDetailsFocus","resetPersistedSize","forceRenderingAbove","isInitialized","stopForceRenderingAbove","selector","ICommandService","prioritySelector","s1","s2","SuggestCommand","acceptSelectedSuggestion","KeybindingsRegistry","when","MenuRegistry","cancelSuggestWidget","selectNextSuggestion","selectNextPageSuggestion","selectLastSuggestion","selectPrevSuggestion","selectPrevPageSuggestion","selectFirstSuggestion","toggleSuggestionDetails","toggleSuggestionFocus","toNegated","triggerSuggestAndAcceptBest","isObject","acceptNextSuggestion","acceptPrevSuggestion","resetWidgetSize","SYMBOL_ICON_ARRAY_FOREGROUND","foreground","SYMBOL_ICON_BOOLEAN_FOREGROUND","SYMBOL_ICON_CLASS_FOREGROUND","SYMBOL_ICON_COLOR_FOREGROUND","SYMBOL_ICON_CONSTANT_FOREGROUND","SYMBOL_ICON_CONSTRUCTOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND","SYMBOL_ICON_EVENT_FOREGROUND","SYMBOL_ICON_FIELD_FOREGROUND","SYMBOL_ICON_FILE_FOREGROUND","SYMBOL_ICON_FOLDER_FOREGROUND","SYMBOL_ICON_FUNCTION_FOREGROUND","SYMBOL_ICON_INTERFACE_FOREGROUND","SYMBOL_ICON_KEY_FOREGROUND","SYMBOL_ICON_KEYWORD_FOREGROUND","SYMBOL_ICON_METHOD_FOREGROUND","SYMBOL_ICON_MODULE_FOREGROUND","SYMBOL_ICON_NAMESPACE_FOREGROUND","SYMBOL_ICON_NULL_FOREGROUND","SYMBOL_ICON_NUMBER_FOREGROUND","SYMBOL_ICON_OBJECT_FOREGROUND","SYMBOL_ICON_OPERATOR_FOREGROUND","SYMBOL_ICON_PACKAGE_FOREGROUND","SYMBOL_ICON_PROPERTY_FOREGROUND","SYMBOL_ICON_REFERENCE_FOREGROUND","SYMBOL_ICON_SNIPPET_FOREGROUND","SYMBOL_ICON_STRING_FOREGROUND","SYMBOL_ICON_STRUCT_FOREGROUND","SYMBOL_ICON_TEXT_FOREGROUND","SYMBOL_ICON_TYPEPARAMETER_FOREGROUND","SYMBOL_ICON_UNIT_FOREGROUND","SYMBOL_ICON_VARIABLE_FOREGROUND","registerThemingParticipant","collector","symbolIconArrayColor","addRule","symbolIconBooleanColor","symbolIconClassColor","symbolIconMethodColor","symbolIconColorColor","symbolIconConstantColor","symbolIconConstructorColor","symbolIconEnumeratorColor","symbolIconEnumeratorMemberColor","symbolIconEventColor","symbolIconFieldColor","symbolIconFileColor","symbolIconFolderColor","symbolIconFunctionColor","symbolIconInterfaceColor","symbolIconKeyColor","symbolIconKeywordColor","symbolIconModuleColor","outlineNamespaceColor","symbolIconNullColor","symbolIconNumberColor","symbolIconObjectColor","symbolIconOperatorColor","symbolIconPackageColor","symbolIconPropertyColor","symbolIconReferenceColor","symbolIconSnippetColor","symbolIconStringColor","symbolIconStructColor","symbolIconTextColor","symbolIconTypeParameterColor","symbolIconUnitColor","symbolIconVariableColor"],"sourceRoot":""}