{"version":3,"file":"static/js/monaco-editor-vendor.d262a4b1.1bfd3d4b.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/nls.js","../node_modules/monaco-editor/esm/vs/platform/accessibility/browser/accessibilityService.js","../node_modules/monaco-editor/esm/vs/platform/accessibility/common/accessibility.js","../node_modules/monaco-editor/esm/vs/platform/action/common/actionCommonCategories.js","../node_modules/monaco-editor/esm/vs/platform/actionWidget/browser/actionList.js","../node_modules/monaco-editor/esm/vs/platform/actionWidget/browser/actionWidget.js","../node_modules/monaco-editor/esm/vs/platform/actions/browser/menuEntryActionViewItem.js","../node_modules/monaco-editor/esm/vs/platform/action/common/action.js","../node_modules/monaco-editor/esm/vs/platform/actions/browser/toolbar.js","../node_modules/monaco-editor/esm/vs/platform/actions/common/actions.js","../node_modules/monaco-editor/esm/vs/platform/actions/common/menuService.js","../node_modules/monaco-editor/esm/vs/platform/audioCues/browser/audioCueService.js","../node_modules/monaco-editor/esm/vs/platform/clipboard/browser/clipboardService.js","../node_modules/monaco-editor/esm/vs/platform/clipboard/common/clipboardService.js","../node_modules/monaco-editor/esm/vs/platform/commands/common/commands.js","../node_modules/monaco-editor/esm/vs/platform/configuration/common/configuration.js","../node_modules/monaco-editor/esm/vs/platform/configuration/common/configurationModels.js","../node_modules/monaco-editor/esm/vs/platform/configuration/common/configurationRegistry.js","../node_modules/monaco-editor/esm/vs/platform/configuration/common/configurations.js","../node_modules/monaco-editor/esm/vs/platform/contextkey/browser/contextKeyService.js","../node_modules/monaco-editor/esm/vs/platform/contextkey/common/scanner.js","../node_modules/monaco-editor/esm/vs/platform/contextkey/common/contextkey.js","../node_modules/monaco-editor/esm/vs/platform/contextkey/common/contextkeys.js","../node_modules/monaco-editor/esm/vs/platform/contextview/browser/contextMenuService.js","../node_modules/monaco-editor/esm/vs/platform/contextview/browser/contextMenuHandler.js","../node_modules/monaco-editor/esm/vs/platform/contextview/browser/contextView.js","../node_modules/monaco-editor/esm/vs/platform/contextview/browser/contextViewService.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nlet isPseudo = (typeof document !== 'undefined' && document.location && document.location.hash.indexOf('pseudo=true') >= 0);\nconst DEFAULT_TAG = 'i-default';\nfunction _format(message, args) {\n    let result;\n    if (args.length === 0) {\n        result = message;\n    }\n    else {\n        result = message.replace(/\\{(\\d+)\\}/g, (match, rest) => {\n            const index = rest[0];\n            const arg = args[index];\n            let result = match;\n            if (typeof arg === 'string') {\n                result = arg;\n            }\n            else if (typeof arg === 'number' || typeof arg === 'boolean' || arg === void 0 || arg === null) {\n                result = String(arg);\n            }\n            return result;\n        });\n    }\n    if (isPseudo) {\n        // FF3B and FF3D is the Unicode zenkaku representation for [ and ]\n        result = '\\uFF3B' + result.replace(/[aouei]/g, '$&$&') + '\\uFF3D';\n    }\n    return result;\n}\nfunction findLanguageForModule(config, name) {\n    let result = config[name];\n    if (result) {\n        return result;\n    }\n    result = config['*'];\n    if (result) {\n        return result;\n    }\n    return null;\n}\nfunction endWithSlash(path) {\n    if (path.charAt(path.length - 1) === '/') {\n        return path;\n    }\n    return path + '/';\n}\nfunction getMessagesFromTranslationsService(translationServiceUrl, language, name) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const url = endWithSlash(translationServiceUrl) + endWithSlash(language) + 'vscode/' + endWithSlash(name);\n        const res = yield fetch(url);\n        if (res.ok) {\n            const messages = yield res.json();\n            return messages;\n        }\n        throw new Error(`${res.status} - ${res.statusText}`);\n    });\n}\nfunction createScopedLocalize(scope) {\n    return function (idx, defaultValue) {\n        const restArgs = Array.prototype.slice.call(arguments, 2);\n        return _format(scope[idx], restArgs);\n    };\n}\n/**\n * @skipMangle\n */\nexport function localize(data, message, ...args) {\n    return _format(message, args);\n}\n/**\n * @skipMangle\n */\nexport function getConfiguredDefaultLocale(_) {\n    // This returns undefined because this implementation isn't used and is overwritten by the loader\n    // when loaded.\n    return undefined;\n}\n/**\n * @skipMangle\n */\nexport function setPseudoTranslation(value) {\n    isPseudo = value;\n}\n/**\n * Invoked in a built product at run-time\n * @skipMangle\n */\nexport function create(key, data) {\n    var _a;\n    return {\n        localize: createScopedLocalize(data[key]),\n        getConfiguredDefaultLocale: (_a = data.getConfiguredDefaultLocale) !== null && _a !== void 0 ? _a : ((_) => undefined)\n    };\n}\n/**\n * Invoked by the loader at run-time\n * @skipMangle\n */\nexport function load(name, req, load, config) {\n    var _a;\n    const pluginConfig = (_a = config['vs/nls']) !== null && _a !== void 0 ? _a : {};\n    if (!name || name.length === 0) {\n        // TODO: We need to give back the mangled names here\n        return load({\n            localize: localize,\n            getConfiguredDefaultLocale: () => { var _a; return (_a = pluginConfig.availableLanguages) === null || _a === void 0 ? void 0 : _a['*']; }\n        });\n    }\n    const language = pluginConfig.availableLanguages ? findLanguageForModule(pluginConfig.availableLanguages, name) : null;\n    const useDefaultLanguage = language === null || language === DEFAULT_TAG;\n    let suffix = '.nls';\n    if (!useDefaultLanguage) {\n        suffix = suffix + '.' + language;\n    }\n    const messagesLoaded = (messages) => {\n        if (Array.isArray(messages)) {\n            messages.localize = createScopedLocalize(messages);\n        }\n        else {\n            messages.localize = createScopedLocalize(messages[name]);\n        }\n        messages.getConfiguredDefaultLocale = () => { var _a; return (_a = pluginConfig.availableLanguages) === null || _a === void 0 ? void 0 : _a['*']; };\n        load(messages);\n    };\n    if (typeof pluginConfig.loadBundle === 'function') {\n        pluginConfig.loadBundle(name, language, (err, messages) => {\n            // We have an error. Load the English default strings to not fail\n            if (err) {\n                req([name + '.nls'], messagesLoaded);\n            }\n            else {\n                messagesLoaded(messages);\n            }\n        });\n    }\n    else if (pluginConfig.translationServiceUrl && !useDefaultLanguage) {\n        (() => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            try {\n                const messages = yield getMessagesFromTranslationsService(pluginConfig.translationServiceUrl, language, name);\n                return messagesLoaded(messages);\n            }\n            catch (err) {\n                // Language is already as generic as it gets, so require default messages\n                if (!language.includes('-')) {\n                    console.error(err);\n                    return req([name + '.nls'], messagesLoaded);\n                }\n                try {\n                    // Since there is a dash, the language configured is a specific sub-language of the same generic language.\n                    // Since we were unable to load the specific language, try to load the generic language. Ex. we failed to find a\n                    // Swiss German (de-CH), so try to load the generic German (de) messages instead.\n                    const genericLanguage = language.split('-')[0];\n                    const messages = yield getMessagesFromTranslationsService(pluginConfig.translationServiceUrl, genericLanguage, name);\n                    // We got some messages, so we configure the configuration to use the generic language for this session.\n                    (_b = pluginConfig.availableLanguages) !== null && _b !== void 0 ? _b : (pluginConfig.availableLanguages = {});\n                    pluginConfig.availableLanguages['*'] = genericLanguage;\n                    return messagesLoaded(messages);\n                }\n                catch (err) {\n                    console.error(err);\n                    return req([name + '.nls'], messagesLoaded);\n                }\n            }\n        }))();\n    }\n    else {\n        req([name + suffix], messagesLoaded, (err) => {\n            if (suffix === '.nls') {\n                console.error('Failed trying to load default language strings', err);\n                return;\n            }\n            console.error(`Failed to load message bundle for language ${language}. Falling back to the default language:`, err);\n            req([name + '.nls'], messagesLoaded);\n        });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { addDisposableListener } from '../../../base/browser/dom.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { CONTEXT_ACCESSIBILITY_MODE_ENABLED } from '../common/accessibility.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\nlet AccessibilityService = class AccessibilityService extends Disposable {\n    constructor(_contextKeyService, _layoutService, _configurationService) {\n        super();\n        this._contextKeyService = _contextKeyService;\n        this._layoutService = _layoutService;\n        this._configurationService = _configurationService;\n        this._accessibilitySupport = 0 /* AccessibilitySupport.Unknown */;\n        this._onDidChangeScreenReaderOptimized = new Emitter();\n        this._onDidChangeReducedMotion = new Emitter();\n        this._accessibilityModeEnabledContext = CONTEXT_ACCESSIBILITY_MODE_ENABLED.bindTo(this._contextKeyService);\n        const updateContextKey = () => this._accessibilityModeEnabledContext.set(this.isScreenReaderOptimized());\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('editor.accessibilitySupport')) {\n                updateContextKey();\n                this._onDidChangeScreenReaderOptimized.fire();\n            }\n            if (e.affectsConfiguration('workbench.reduceMotion')) {\n                this._configMotionReduced = this._configurationService.getValue('workbench.reduceMotion');\n                this._onDidChangeReducedMotion.fire();\n            }\n        }));\n        updateContextKey();\n        this._register(this.onDidChangeScreenReaderOptimized(() => updateContextKey()));\n        const reduceMotionMatcher = window.matchMedia(`(prefers-reduced-motion: reduce)`);\n        this._systemMotionReduced = reduceMotionMatcher.matches;\n        this._configMotionReduced = this._configurationService.getValue('workbench.reduceMotion');\n        this.initReducedMotionListeners(reduceMotionMatcher);\n    }\n    initReducedMotionListeners(reduceMotionMatcher) {\n        if (!this._layoutService.hasContainer) {\n            // we can't use `ILayoutService.container` because the application\n            // doesn't have a single container\n            return;\n        }\n        this._register(addDisposableListener(reduceMotionMatcher, 'change', () => {\n            this._systemMotionReduced = reduceMotionMatcher.matches;\n            if (this._configMotionReduced === 'auto') {\n                this._onDidChangeReducedMotion.fire();\n            }\n        }));\n        const updateRootClasses = () => {\n            const reduce = this.isMotionReduced();\n            this._layoutService.container.classList.toggle('reduce-motion', reduce);\n            this._layoutService.container.classList.toggle('enable-motion', !reduce);\n        };\n        updateRootClasses();\n        this._register(this.onDidChangeReducedMotion(() => updateRootClasses()));\n    }\n    get onDidChangeScreenReaderOptimized() {\n        return this._onDidChangeScreenReaderOptimized.event;\n    }\n    isScreenReaderOptimized() {\n        const config = this._configurationService.getValue('editor.accessibilitySupport');\n        return config === 'on' || (config === 'auto' && this._accessibilitySupport === 2 /* AccessibilitySupport.Enabled */);\n    }\n    get onDidChangeReducedMotion() {\n        return this._onDidChangeReducedMotion.event;\n    }\n    isMotionReduced() {\n        const config = this._configMotionReduced;\n        return config === 'on' || (config === 'auto' && this._systemMotionReduced);\n    }\n    getAccessibilitySupport() {\n        return this._accessibilitySupport;\n    }\n};\nAccessibilityService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ILayoutService),\n    __param(2, IConfigurationService)\n], AccessibilityService);\nexport { AccessibilityService };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { RawContextKey } from '../../contextkey/common/contextkey.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const IAccessibilityService = createDecorator('accessibilityService');\nexport const CONTEXT_ACCESSIBILITY_MODE_ENABLED = new RawContextKey('accessibilityModeEnabled', false);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { localize } from '../../../nls.js';\nexport const Categories = Object.freeze({\n    View: { value: localize('view', \"View\"), original: 'View' },\n    Help: { value: localize('help', \"Help\"), original: 'Help' },\n    Test: { value: localize('test', \"Test\"), original: 'Test' },\n    File: { value: localize('file', \"File\"), original: 'File' },\n    Preferences: { value: localize('preferences', \"Preferences\"), original: 'Preferences' },\n    Developer: { value: localize({ key: 'developer', comment: ['A developer on Code itself or someone diagnosing issues in Code'] }, \"Developer\"), original: 'Developer' }\n});\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { KeybindingLabel } from '../../../base/browser/ui/keybindingLabel/keybindingLabel.js';\nimport { List } from '../../../base/browser/ui/list/listWidget.js';\nimport { CancellationTokenSource } from '../../../base/common/cancellation.js';\nimport { Codicon } from '../../../base/common/codicons.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { OS } from '../../../base/common/platform.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport './actionWidget.css';\nimport { localize } from '../../../nls.js';\nimport { IContextViewService } from '../../contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { defaultListStyles } from '../../theme/browser/defaultStyles.js';\nimport { asCssVariable } from '../../theme/common/colorRegistry.js';\nexport const acceptSelectedActionCommand = 'acceptSelectedCodeAction';\nexport const previewSelectedActionCommand = 'previewSelectedCodeAction';\nclass HeaderRenderer {\n    get templateId() { return \"header\" /* ActionListItemKind.Header */; }\n    renderTemplate(container) {\n        container.classList.add('group-header');\n        const text = document.createElement('span');\n        container.append(text);\n        return { container, text };\n    }\n    renderElement(element, _index, templateData) {\n        var _a, _b;\n        templateData.text.textContent = (_b = (_a = element.group) === null || _a === void 0 ? void 0 : _a.title) !== null && _b !== void 0 ? _b : '';\n    }\n    disposeTemplate(_templateData) {\n        // noop\n    }\n}\nlet ActionItemRenderer = class ActionItemRenderer {\n    get templateId() { return \"action\" /* ActionListItemKind.Action */; }\n    constructor(_supportsPreview, _keybindingService) {\n        this._supportsPreview = _supportsPreview;\n        this._keybindingService = _keybindingService;\n    }\n    renderTemplate(container) {\n        container.classList.add(this.templateId);\n        const icon = document.createElement('div');\n        icon.className = 'icon';\n        container.append(icon);\n        const text = document.createElement('span');\n        text.className = 'title';\n        container.append(text);\n        const keybinding = new KeybindingLabel(container, OS);\n        return { container, icon, text, keybinding };\n    }\n    renderElement(element, _index, data) {\n        var _a, _b, _c;\n        if ((_a = element.group) === null || _a === void 0 ? void 0 : _a.icon) {\n            data.icon.className = ThemeIcon.asClassName(element.group.icon);\n            if (element.group.icon.color) {\n                data.icon.style.color = asCssVariable(element.group.icon.color.id);\n            }\n        }\n        else {\n            data.icon.className = ThemeIcon.asClassName(Codicon.lightBulb);\n            data.icon.style.color = 'var(--vscode-editorLightBulb-foreground)';\n        }\n        if (!element.item || !element.label) {\n            return;\n        }\n        data.text.textContent = stripNewlines(element.label);\n        data.keybinding.set(element.keybinding);\n        dom.setVisibility(!!element.keybinding, data.keybinding.element);\n        const actionTitle = (_b = this._keybindingService.lookupKeybinding(acceptSelectedActionCommand)) === null || _b === void 0 ? void 0 : _b.getLabel();\n        const previewTitle = (_c = this._keybindingService.lookupKeybinding(previewSelectedActionCommand)) === null || _c === void 0 ? void 0 : _c.getLabel();\n        data.container.classList.toggle('option-disabled', element.disabled);\n        if (element.disabled) {\n            data.container.title = element.label;\n        }\n        else if (actionTitle && previewTitle) {\n            if (this._supportsPreview && element.canPreview) {\n                data.container.title = localize({ key: 'label-preview', comment: ['placeholders are keybindings, e.g \"F2 to apply, Shift+F2 to preview\"'] }, \"{0} to apply, {1} to preview\", actionTitle, previewTitle);\n            }\n            else {\n                data.container.title = localize({ key: 'label', comment: ['placeholder is a keybinding, e.g \"F2 to apply\"'] }, \"{0} to apply\", actionTitle);\n            }\n        }\n        else {\n            data.container.title = '';\n        }\n    }\n    disposeTemplate(_templateData) {\n        // noop\n    }\n};\nActionItemRenderer = __decorate([\n    __param(1, IKeybindingService)\n], ActionItemRenderer);\nclass AcceptSelectedEvent extends UIEvent {\n    constructor() { super('acceptSelectedAction'); }\n}\nclass PreviewSelectedEvent extends UIEvent {\n    constructor() { super('previewSelectedAction'); }\n}\nfunction getKeyboardNavigationLabel(item) {\n    // Filter out header vs. action\n    if (item.kind === 'action') {\n        return item.label;\n    }\n    return undefined;\n}\nlet ActionList = class ActionList extends Disposable {\n    constructor(user, preview, items, _delegate, _contextViewService, _keybindingService) {\n        super();\n        this._delegate = _delegate;\n        this._contextViewService = _contextViewService;\n        this._keybindingService = _keybindingService;\n        this._actionLineHeight = 24;\n        this._headerLineHeight = 26;\n        this.cts = this._register(new CancellationTokenSource());\n        this.domNode = document.createElement('div');\n        this.domNode.classList.add('actionList');\n        const virtualDelegate = {\n            getHeight: element => element.kind === \"header\" /* ActionListItemKind.Header */ ? this._headerLineHeight : this._actionLineHeight,\n            getTemplateId: element => element.kind\n        };\n        this._list = this._register(new List(user, this.domNode, virtualDelegate, [\n            new ActionItemRenderer(preview, this._keybindingService),\n            new HeaderRenderer(),\n        ], {\n            keyboardSupport: false,\n            typeNavigationEnabled: true,\n            keyboardNavigationLabelProvider: { getKeyboardNavigationLabel },\n            accessibilityProvider: {\n                getAriaLabel: element => {\n                    if (element.kind === \"action\" /* ActionListItemKind.Action */) {\n                        let label = element.label ? stripNewlines(element === null || element === void 0 ? void 0 : element.label) : '';\n                        if (element.disabled) {\n                            label = localize({ key: 'customQuickFixWidget.labels', comment: [`Action widget labels for accessibility.`] }, \"{0}, Disabled Reason: {1}\", label, element.disabled);\n                        }\n                        return label;\n                    }\n                    return null;\n                },\n                getWidgetAriaLabel: () => localize({ key: 'customQuickFixWidget', comment: [`An action widget option`] }, \"Action Widget\"),\n                getRole: (e) => e.kind === \"action\" /* ActionListItemKind.Action */ ? 'option' : 'separator',\n                getWidgetRole: () => 'listbox',\n            },\n        }));\n        this._list.style(defaultListStyles);\n        this._register(this._list.onMouseClick(e => this.onListClick(e)));\n        this._register(this._list.onMouseOver(e => this.onListHover(e)));\n        this._register(this._list.onDidChangeFocus(() => this.onFocus()));\n        this._register(this._list.onDidChangeSelection(e => this.onListSelection(e)));\n        this._allMenuItems = items;\n        this._list.splice(0, this._list.length, this._allMenuItems);\n        if (this._list.length) {\n            this.focusNext();\n        }\n    }\n    focusCondition(element) {\n        return !element.disabled && element.kind === \"action\" /* ActionListItemKind.Action */;\n    }\n    hide(didCancel) {\n        this._delegate.onHide(didCancel);\n        this.cts.cancel();\n        this._contextViewService.hideContextView();\n    }\n    layout(minWidth) {\n        // Updating list height, depending on how many separators and headers there are.\n        const numHeaders = this._allMenuItems.filter(item => item.kind === 'header').length;\n        const itemsHeight = this._allMenuItems.length * this._actionLineHeight;\n        const heightWithHeaders = itemsHeight + numHeaders * this._headerLineHeight - numHeaders * this._actionLineHeight;\n        this._list.layout(heightWithHeaders);\n        // For finding width dynamically (not using resize observer)\n        const itemWidths = this._allMenuItems.map((_, index) => {\n            const element = document.getElementById(this._list.getElementID(index));\n            if (element) {\n                element.style.width = 'auto';\n                const width = element.getBoundingClientRect().width;\n                element.style.width = '';\n                return width;\n            }\n            return 0;\n        });\n        // resize observer - can be used in the future since list widget supports dynamic height but not width\n        const width = Math.max(...itemWidths, minWidth);\n        const maxVhPrecentage = 0.7;\n        const height = Math.min(heightWithHeaders, document.body.clientHeight * maxVhPrecentage);\n        this._list.layout(height, width);\n        this.domNode.style.height = `${height}px`;\n        this._list.domFocus();\n        return width;\n    }\n    focusPrevious() {\n        this._list.focusPrevious(1, true, undefined, this.focusCondition);\n    }\n    focusNext() {\n        this._list.focusNext(1, true, undefined, this.focusCondition);\n    }\n    acceptSelected(preview) {\n        const focused = this._list.getFocus();\n        if (focused.length === 0) {\n            return;\n        }\n        const focusIndex = focused[0];\n        const element = this._list.element(focusIndex);\n        if (!this.focusCondition(element)) {\n            return;\n        }\n        const event = preview ? new PreviewSelectedEvent() : new AcceptSelectedEvent();\n        this._list.setSelection([focusIndex], event);\n    }\n    onListSelection(e) {\n        if (!e.elements.length) {\n            return;\n        }\n        const element = e.elements[0];\n        if (element.item && this.focusCondition(element)) {\n            this._delegate.onSelect(element.item, e.browserEvent instanceof PreviewSelectedEvent);\n        }\n        else {\n            this._list.setSelection([]);\n        }\n    }\n    onFocus() {\n        var _a, _b;\n        this._list.domFocus();\n        const focused = this._list.getFocus();\n        if (focused.length === 0) {\n            return;\n        }\n        const focusIndex = focused[0];\n        const element = this._list.element(focusIndex);\n        (_b = (_a = this._delegate).onFocus) === null || _b === void 0 ? void 0 : _b.call(_a, element.item);\n    }\n    onListHover(e) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const element = e.element;\n            if (element && element.item && this.focusCondition(element)) {\n                if (this._delegate.onHover && !element.disabled && element.kind === \"action\" /* ActionListItemKind.Action */) {\n                    const result = yield this._delegate.onHover(element.item, this.cts.token);\n                    element.canPreview = result ? result.canPreview : undefined;\n                }\n                if (e.index) {\n                    this._list.splice(e.index, 1, [element]);\n                }\n            }\n            this._list.setFocus(typeof e.index === 'number' ? [e.index] : []);\n        });\n    }\n    onListClick(e) {\n        if (e.element && this.focusCondition(e.element)) {\n            this._list.setFocus([]);\n        }\n    }\n};\nActionList = __decorate([\n    __param(4, IContextViewService),\n    __param(5, IKeybindingService)\n], ActionList);\nexport { ActionList };\nfunction stripNewlines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, ' ');\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { ActionBar } from '../../../base/browser/ui/actionbar/actionbar.js';\nimport { Disposable, DisposableStore, MutableDisposable } from '../../../base/common/lifecycle.js';\nimport './actionWidget.css';\nimport { localize } from '../../../nls.js';\nimport { acceptSelectedActionCommand, ActionList, previewSelectedActionCommand } from './actionList.js';\nimport { Action2, registerAction2 } from '../../actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../contextkey/common/contextkey.js';\nimport { IContextViewService } from '../../contextview/browser/contextView.js';\nimport { registerSingleton } from '../../instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { inputActiveOptionBackground, registerColor } from '../../theme/common/colorRegistry.js';\nregisterColor('actionBar.toggledBackground', { dark: inputActiveOptionBackground, light: inputActiveOptionBackground, hcDark: inputActiveOptionBackground, hcLight: inputActiveOptionBackground, }, localize('actionBar.toggledBackground', 'Background color for toggled action items in action bar.'));\nconst ActionWidgetContextKeys = {\n    Visible: new RawContextKey('codeActionMenuVisible', false, localize('codeActionMenuVisible', \"Whether the action widget list is visible\"))\n};\nexport const IActionWidgetService = createDecorator('actionWidgetService');\nlet ActionWidgetService = class ActionWidgetService extends Disposable {\n    get isVisible() {\n        return ActionWidgetContextKeys.Visible.getValue(this._contextKeyService) || false;\n    }\n    constructor(_contextViewService, _contextKeyService, _instantiationService) {\n        super();\n        this._contextViewService = _contextViewService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._list = this._register(new MutableDisposable());\n    }\n    show(user, supportsPreview, items, delegate, anchor, container, actionBarActions) {\n        const visibleContext = ActionWidgetContextKeys.Visible.bindTo(this._contextKeyService);\n        const list = this._instantiationService.createInstance(ActionList, user, supportsPreview, items, delegate);\n        this._contextViewService.showContextView({\n            getAnchor: () => anchor,\n            render: (container) => {\n                visibleContext.set(true);\n                return this._renderWidget(container, list, actionBarActions !== null && actionBarActions !== void 0 ? actionBarActions : []);\n            },\n            onHide: (didCancel) => {\n                visibleContext.reset();\n                this._onWidgetClosed(didCancel);\n            },\n        }, container, false);\n    }\n    acceptSelected(preview) {\n        var _a;\n        (_a = this._list.value) === null || _a === void 0 ? void 0 : _a.acceptSelected(preview);\n    }\n    focusPrevious() {\n        var _a, _b;\n        (_b = (_a = this._list) === null || _a === void 0 ? void 0 : _a.value) === null || _b === void 0 ? void 0 : _b.focusPrevious();\n    }\n    focusNext() {\n        var _a, _b;\n        (_b = (_a = this._list) === null || _a === void 0 ? void 0 : _a.value) === null || _b === void 0 ? void 0 : _b.focusNext();\n    }\n    hide() {\n        var _a;\n        (_a = this._list.value) === null || _a === void 0 ? void 0 : _a.hide();\n        this._list.clear();\n    }\n    _renderWidget(element, list, actionBarActions) {\n        var _a;\n        const widget = document.createElement('div');\n        widget.classList.add('action-widget');\n        element.appendChild(widget);\n        this._list.value = list;\n        if (this._list.value) {\n            widget.appendChild(this._list.value.domNode);\n        }\n        else {\n            throw new Error('List has no value');\n        }\n        const renderDisposables = new DisposableStore();\n        // Invisible div to block mouse interaction in the rest of the UI\n        const menuBlock = document.createElement('div');\n        const block = element.appendChild(menuBlock);\n        block.classList.add('context-view-block');\n        renderDisposables.add(dom.addDisposableListener(block, dom.EventType.MOUSE_DOWN, e => e.stopPropagation()));\n        // Invisible div to block mouse interaction with the menu\n        const pointerBlockDiv = document.createElement('div');\n        const pointerBlock = element.appendChild(pointerBlockDiv);\n        pointerBlock.classList.add('context-view-pointerBlock');\n        // Removes block on click INSIDE widget or ANY mouse movement\n        renderDisposables.add(dom.addDisposableListener(pointerBlock, dom.EventType.POINTER_MOVE, () => pointerBlock.remove()));\n        renderDisposables.add(dom.addDisposableListener(pointerBlock, dom.EventType.MOUSE_DOWN, () => pointerBlock.remove()));\n        // Action bar\n        let actionBarWidth = 0;\n        if (actionBarActions.length) {\n            const actionBar = this._createActionBar('.action-widget-action-bar', actionBarActions);\n            if (actionBar) {\n                widget.appendChild(actionBar.getContainer().parentElement);\n                renderDisposables.add(actionBar);\n                actionBarWidth = actionBar.getContainer().offsetWidth;\n            }\n        }\n        const width = (_a = this._list.value) === null || _a === void 0 ? void 0 : _a.layout(actionBarWidth);\n        widget.style.width = `${width}px`;\n        const focusTracker = renderDisposables.add(dom.trackFocus(element));\n        renderDisposables.add(focusTracker.onDidBlur(() => this.hide()));\n        return renderDisposables;\n    }\n    _createActionBar(className, actions) {\n        if (!actions.length) {\n            return undefined;\n        }\n        const container = dom.$(className);\n        const actionBar = new ActionBar(container);\n        actionBar.push(actions, { icon: false, label: true });\n        return actionBar;\n    }\n    _onWidgetClosed(didCancel) {\n        var _a;\n        (_a = this._list.value) === null || _a === void 0 ? void 0 : _a.hide(didCancel);\n    }\n};\nActionWidgetService = __decorate([\n    __param(0, IContextViewService),\n    __param(1, IContextKeyService),\n    __param(2, IInstantiationService)\n], ActionWidgetService);\nregisterSingleton(IActionWidgetService, ActionWidgetService, 1 /* InstantiationType.Delayed */);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 1000;\nregisterAction2(class extends Action2 {\n    constructor() {\n        super({\n            id: 'hideCodeActionWidget',\n            title: {\n                value: localize('hideCodeActionWidget.title', \"Hide action widget\"),\n                original: 'Hide action widget'\n            },\n            precondition: ActionWidgetContextKeys.Visible,\n            keybinding: {\n                weight,\n                primary: 9 /* KeyCode.Escape */,\n                secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n            },\n        });\n    }\n    run(accessor) {\n        accessor.get(IActionWidgetService).hide();\n    }\n});\nregisterAction2(class extends Action2 {\n    constructor() {\n        super({\n            id: 'selectPrevCodeAction',\n            title: {\n                value: localize('selectPrevCodeAction.title', \"Select previous action\"),\n                original: 'Select previous action'\n            },\n            precondition: ActionWidgetContextKeys.Visible,\n            keybinding: {\n                weight,\n                primary: 16 /* KeyCode.UpArrow */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n                mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] },\n            }\n        });\n    }\n    run(accessor) {\n        const widgetService = accessor.get(IActionWidgetService);\n        if (widgetService instanceof ActionWidgetService) {\n            widgetService.focusPrevious();\n        }\n    }\n});\nregisterAction2(class extends Action2 {\n    constructor() {\n        super({\n            id: 'selectNextCodeAction',\n            title: {\n                value: localize('selectNextCodeAction.title', \"Select next action\"),\n                original: 'Select next action'\n            },\n            precondition: ActionWidgetContextKeys.Visible,\n            keybinding: {\n                weight,\n                primary: 18 /* KeyCode.DownArrow */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n                mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n            }\n        });\n    }\n    run(accessor) {\n        const widgetService = accessor.get(IActionWidgetService);\n        if (widgetService instanceof ActionWidgetService) {\n            widgetService.focusNext();\n        }\n    }\n});\nregisterAction2(class extends Action2 {\n    constructor() {\n        super({\n            id: acceptSelectedActionCommand,\n            title: {\n                value: localize('acceptSelected.title', \"Accept selected action\"),\n                original: 'Accept selected action'\n            },\n            precondition: ActionWidgetContextKeys.Visible,\n            keybinding: {\n                weight,\n                primary: 3 /* KeyCode.Enter */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 89 /* KeyCode.Period */],\n            }\n        });\n    }\n    run(accessor) {\n        const widgetService = accessor.get(IActionWidgetService);\n        if (widgetService instanceof ActionWidgetService) {\n            widgetService.acceptSelected();\n        }\n    }\n});\nregisterAction2(class extends Action2 {\n    constructor() {\n        super({\n            id: previewSelectedActionCommand,\n            title: {\n                value: localize('previewSelected.title', \"Preview selected action\"),\n                original: 'Preview selected action'\n            },\n            precondition: ActionWidgetContextKeys.Visible,\n            keybinding: {\n                weight,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n            }\n        });\n    }\n    run(accessor) {\n        const widgetService = accessor.get(IActionWidgetService);\n        if (widgetService instanceof ActionWidgetService) {\n            widgetService.acceptSelected(true);\n        }\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { $, addDisposableListener, append, asCSSUrl, EventType, ModifierKeyEmitter, prepend, reset } from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { ActionViewItem, BaseActionViewItem, SelectActionViewItem } from '../../../base/browser/ui/actionbar/actionViewItems.js';\nimport { DropdownMenuActionViewItem } from '../../../base/browser/ui/dropdown/dropdownActionViewItem.js';\nimport { ActionRunner, Separator, SubmenuAction } from '../../../base/common/actions.js';\nimport { UILabelProvider } from '../../../base/common/keybindingLabels.js';\nimport { combinedDisposable, MutableDisposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { isLinux, isWindows, OS } from '../../../base/common/platform.js';\nimport './menuEntryActionViewItem.css';\nimport { localize } from '../../../nls.js';\nimport { IMenuService, MenuItemAction, SubmenuItemAction } from '../common/actions.js';\nimport { isICommandActionToggleInfo } from '../../action/common/action.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { IContextMenuService, IContextViewService } from '../../contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { INotificationService } from '../../notification/common/notification.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { IThemeService } from '../../theme/common/themeService.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport { isDark } from '../../theme/common/theme.js';\nimport { assertType } from '../../../base/common/types.js';\nimport { asCssVariable, selectBorder } from '../../theme/common/colorRegistry.js';\nimport { defaultSelectBoxStyles } from '../../theme/browser/defaultStyles.js';\nimport { IAccessibilityService } from '../../accessibility/common/accessibility.js';\nexport function createAndFillInContextMenuActions(menu, options, target, primaryGroup) {\n    const groups = menu.getActions(options);\n    const modifierKeyEmitter = ModifierKeyEmitter.getInstance();\n    const useAlternativeActions = modifierKeyEmitter.keyStatus.altKey || ((isWindows || isLinux) && modifierKeyEmitter.keyStatus.shiftKey);\n    fillInActions(groups, target, useAlternativeActions, primaryGroup ? actionGroup => actionGroup === primaryGroup : actionGroup => actionGroup === 'navigation');\n}\nexport function createAndFillInActionBarActions(menu, options, target, primaryGroup, shouldInlineSubmenu, useSeparatorsInPrimaryActions) {\n    const groups = menu.getActions(options);\n    const isPrimaryAction = typeof primaryGroup === 'string' ? (actionGroup) => actionGroup === primaryGroup : primaryGroup;\n    // Action bars handle alternative actions on their own so the alternative actions should be ignored\n    fillInActions(groups, target, false, isPrimaryAction, shouldInlineSubmenu, useSeparatorsInPrimaryActions);\n}\nfunction fillInActions(groups, target, useAlternativeActions, isPrimaryAction = actionGroup => actionGroup === 'navigation', shouldInlineSubmenu = () => false, useSeparatorsInPrimaryActions = false) {\n    let primaryBucket;\n    let secondaryBucket;\n    if (Array.isArray(target)) {\n        primaryBucket = target;\n        secondaryBucket = target;\n    }\n    else {\n        primaryBucket = target.primary;\n        secondaryBucket = target.secondary;\n    }\n    const submenuInfo = new Set();\n    for (const [group, actions] of groups) {\n        let target;\n        if (isPrimaryAction(group)) {\n            target = primaryBucket;\n            if (target.length > 0 && useSeparatorsInPrimaryActions) {\n                target.push(new Separator());\n            }\n        }\n        else {\n            target = secondaryBucket;\n            if (target.length > 0) {\n                target.push(new Separator());\n            }\n        }\n        for (let action of actions) {\n            if (useAlternativeActions) {\n                action = action instanceof MenuItemAction && action.alt ? action.alt : action;\n            }\n            const newLen = target.push(action);\n            // keep submenu info for later inlining\n            if (action instanceof SubmenuAction) {\n                submenuInfo.add({ group, action, index: newLen - 1 });\n            }\n        }\n    }\n    // ask the outside if submenu should be inlined or not. only ask when\n    // there would be enough space\n    for (const { group, action, index } of submenuInfo) {\n        const target = isPrimaryAction(group) ? primaryBucket : secondaryBucket;\n        // inlining submenus with length 0 or 1 is easy,\n        // larger submenus need to be checked with the overall limit\n        const submenuActions = action.actions;\n        if (shouldInlineSubmenu(action, group, target.length)) {\n            target.splice(index, 1, ...submenuActions);\n        }\n    }\n}\nlet MenuEntryActionViewItem = class MenuEntryActionViewItem extends ActionViewItem {\n    constructor(action, options, _keybindingService, _notificationService, _contextKeyService, _themeService, _contextMenuService, _accessibilityService) {\n        super(undefined, action, { icon: !!(action.class || action.item.icon), label: !action.class && !action.item.icon, draggable: options === null || options === void 0 ? void 0 : options.draggable, keybinding: options === null || options === void 0 ? void 0 : options.keybinding, hoverDelegate: options === null || options === void 0 ? void 0 : options.hoverDelegate });\n        this._keybindingService = _keybindingService;\n        this._notificationService = _notificationService;\n        this._contextKeyService = _contextKeyService;\n        this._themeService = _themeService;\n        this._contextMenuService = _contextMenuService;\n        this._accessibilityService = _accessibilityService;\n        this._wantsAltCommand = false;\n        this._itemClassDispose = this._register(new MutableDisposable());\n        this._altKey = ModifierKeyEmitter.getInstance();\n    }\n    get _menuItemAction() {\n        return this._action;\n    }\n    get _commandAction() {\n        return this._wantsAltCommand && this._menuItemAction.alt || this._menuItemAction;\n    }\n    onClick(event) {\n        return __awaiter(this, void 0, void 0, function* () {\n            event.preventDefault();\n            event.stopPropagation();\n            try {\n                yield this.actionRunner.run(this._commandAction, this._context);\n            }\n            catch (err) {\n                this._notificationService.error(err);\n            }\n        });\n    }\n    render(container) {\n        super.render(container);\n        container.classList.add('menu-entry');\n        if (this.options.icon) {\n            this._updateItemClass(this._menuItemAction.item);\n        }\n        if (this._menuItemAction.alt) {\n            let isMouseOver = false;\n            const updateAltState = () => {\n                var _a;\n                const wantsAltCommand = !!((_a = this._menuItemAction.alt) === null || _a === void 0 ? void 0 : _a.enabled) &&\n                    (!this._accessibilityService.isMotionReduced() || isMouseOver) && (this._altKey.keyStatus.altKey ||\n                    (this._altKey.keyStatus.shiftKey && isMouseOver));\n                if (wantsAltCommand !== this._wantsAltCommand) {\n                    this._wantsAltCommand = wantsAltCommand;\n                    this.updateLabel();\n                    this.updateTooltip();\n                    this.updateClass();\n                }\n            };\n            this._register(this._altKey.event(updateAltState));\n            this._register(addDisposableListener(container, 'mouseleave', _ => {\n                isMouseOver = false;\n                updateAltState();\n            }));\n            this._register(addDisposableListener(container, 'mouseenter', _ => {\n                isMouseOver = true;\n                updateAltState();\n            }));\n            updateAltState();\n        }\n    }\n    updateLabel() {\n        if (this.options.label && this.label) {\n            this.label.textContent = this._commandAction.label;\n        }\n    }\n    getTooltip() {\n        var _a;\n        const keybinding = this._keybindingService.lookupKeybinding(this._commandAction.id, this._contextKeyService);\n        const keybindingLabel = keybinding && keybinding.getLabel();\n        const tooltip = this._commandAction.tooltip || this._commandAction.label;\n        let title = keybindingLabel\n            ? localize('titleAndKb', \"{0} ({1})\", tooltip, keybindingLabel)\n            : tooltip;\n        if (!this._wantsAltCommand && ((_a = this._menuItemAction.alt) === null || _a === void 0 ? void 0 : _a.enabled)) {\n            const altTooltip = this._menuItemAction.alt.tooltip || this._menuItemAction.alt.label;\n            const altKeybinding = this._keybindingService.lookupKeybinding(this._menuItemAction.alt.id, this._contextKeyService);\n            const altKeybindingLabel = altKeybinding && altKeybinding.getLabel();\n            const altTitleSection = altKeybindingLabel\n                ? localize('titleAndKb', \"{0} ({1})\", altTooltip, altKeybindingLabel)\n                : altTooltip;\n            title = localize('titleAndKbAndAlt', \"{0}\\n[{1}] {2}\", title, UILabelProvider.modifierLabels[OS].altKey, altTitleSection);\n        }\n        return title;\n    }\n    updateClass() {\n        if (this.options.icon) {\n            if (this._commandAction !== this._menuItemAction) {\n                if (this._menuItemAction.alt) {\n                    this._updateItemClass(this._menuItemAction.alt.item);\n                }\n            }\n            else {\n                this._updateItemClass(this._menuItemAction.item);\n            }\n        }\n    }\n    _updateItemClass(item) {\n        this._itemClassDispose.value = undefined;\n        const { element, label } = this;\n        if (!element || !label) {\n            return;\n        }\n        const icon = this._commandAction.checked && isICommandActionToggleInfo(item.toggled) && item.toggled.icon ? item.toggled.icon : item.icon;\n        if (!icon) {\n            return;\n        }\n        if (ThemeIcon.isThemeIcon(icon)) {\n            // theme icons\n            const iconClasses = ThemeIcon.asClassNameArray(icon);\n            label.classList.add(...iconClasses);\n            this._itemClassDispose.value = toDisposable(() => {\n                label.classList.remove(...iconClasses);\n            });\n        }\n        else {\n            // icon path/url - add special element with SVG-mask and icon color background\n            const svgUrl = isDark(this._themeService.getColorTheme().type)\n                ? asCSSUrl(icon.dark)\n                : asCSSUrl(icon.light);\n            const svgIcon = $('span');\n            svgIcon.style.webkitMask = svgIcon.style.mask = `${svgUrl} no-repeat 50% 50%`;\n            svgIcon.style.background = 'var(--vscode-icon-foreground)';\n            svgIcon.style.display = 'inline-block';\n            svgIcon.style.width = '100%';\n            svgIcon.style.height = '100%';\n            label.appendChild(svgIcon);\n            label.classList.add('icon');\n            this._itemClassDispose.value = combinedDisposable(toDisposable(() => {\n                label.classList.remove('icon');\n                reset(label);\n            }), this._themeService.onDidColorThemeChange(() => {\n                // refresh when the theme changes in case we go between dark <-> light\n                this.updateClass();\n            }));\n        }\n    }\n};\nMenuEntryActionViewItem = __decorate([\n    __param(2, IKeybindingService),\n    __param(3, INotificationService),\n    __param(4, IContextKeyService),\n    __param(5, IThemeService),\n    __param(6, IContextMenuService),\n    __param(7, IAccessibilityService)\n], MenuEntryActionViewItem);\nexport { MenuEntryActionViewItem };\nlet SubmenuEntryActionViewItem = class SubmenuEntryActionViewItem extends DropdownMenuActionViewItem {\n    constructor(action, options, _keybindingService, _contextMenuService, _themeService) {\n        var _a, _b, _c;\n        const dropdownOptions = Object.assign(Object.assign({}, options), { menuAsChild: (_a = options === null || options === void 0 ? void 0 : options.menuAsChild) !== null && _a !== void 0 ? _a : false, classNames: (_b = options === null || options === void 0 ? void 0 : options.classNames) !== null && _b !== void 0 ? _b : (ThemeIcon.isThemeIcon(action.item.icon) ? ThemeIcon.asClassName(action.item.icon) : undefined), keybindingProvider: (_c = options === null || options === void 0 ? void 0 : options.keybindingProvider) !== null && _c !== void 0 ? _c : (action => _keybindingService.lookupKeybinding(action.id)) });\n        super(action, { getActions: () => action.actions }, _contextMenuService, dropdownOptions);\n        this._keybindingService = _keybindingService;\n        this._contextMenuService = _contextMenuService;\n        this._themeService = _themeService;\n    }\n    render(container) {\n        super.render(container);\n        assertType(this.element);\n        container.classList.add('menu-entry');\n        const action = this._action;\n        const { icon } = action.item;\n        if (icon && !ThemeIcon.isThemeIcon(icon)) {\n            this.element.classList.add('icon');\n            const setBackgroundImage = () => {\n                if (this.element) {\n                    this.element.style.backgroundImage = (isDark(this._themeService.getColorTheme().type)\n                        ? asCSSUrl(icon.dark)\n                        : asCSSUrl(icon.light));\n                }\n            };\n            setBackgroundImage();\n            this._register(this._themeService.onDidColorThemeChange(() => {\n                // refresh when the theme changes in case we go between dark <-> light\n                setBackgroundImage();\n            }));\n        }\n    }\n};\nSubmenuEntryActionViewItem = __decorate([\n    __param(2, IKeybindingService),\n    __param(3, IContextMenuService),\n    __param(4, IThemeService)\n], SubmenuEntryActionViewItem);\nexport { SubmenuEntryActionViewItem };\nlet DropdownWithDefaultActionViewItem = class DropdownWithDefaultActionViewItem extends BaseActionViewItem {\n    constructor(submenuAction, options, _keybindingService, _notificationService, _contextMenuService, _menuService, _instaService, _storageService) {\n        var _a, _b, _c;\n        super(null, submenuAction);\n        this._keybindingService = _keybindingService;\n        this._notificationService = _notificationService;\n        this._contextMenuService = _contextMenuService;\n        this._menuService = _menuService;\n        this._instaService = _instaService;\n        this._storageService = _storageService;\n        this._container = null;\n        this._options = options;\n        this._storageKey = `${submenuAction.item.submenu.id}_lastActionId`;\n        // determine default action\n        let defaultAction;\n        const defaultActionId = (options === null || options === void 0 ? void 0 : options.persistLastActionId) ? _storageService.get(this._storageKey, 1 /* StorageScope.WORKSPACE */) : undefined;\n        if (defaultActionId) {\n            defaultAction = submenuAction.actions.find(a => defaultActionId === a.id);\n        }\n        if (!defaultAction) {\n            defaultAction = submenuAction.actions[0];\n        }\n        this._defaultAction = this._instaService.createInstance(MenuEntryActionViewItem, defaultAction, { keybinding: this._getDefaultActionKeybindingLabel(defaultAction) });\n        const dropdownOptions = Object.assign(Object.assign({ keybindingProvider: action => this._keybindingService.lookupKeybinding(action.id) }, options), { menuAsChild: (_a = options === null || options === void 0 ? void 0 : options.menuAsChild) !== null && _a !== void 0 ? _a : true, classNames: (_b = options === null || options === void 0 ? void 0 : options.classNames) !== null && _b !== void 0 ? _b : ['codicon', 'codicon-chevron-down'], actionRunner: (_c = options === null || options === void 0 ? void 0 : options.actionRunner) !== null && _c !== void 0 ? _c : new ActionRunner() });\n        this._dropdown = new DropdownMenuActionViewItem(submenuAction, submenuAction.actions, this._contextMenuService, dropdownOptions);\n        this._dropdown.actionRunner.onDidRun((e) => {\n            if (e.action instanceof MenuItemAction) {\n                this.update(e.action);\n            }\n        });\n    }\n    update(lastAction) {\n        var _a;\n        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.persistLastActionId) {\n            this._storageService.store(this._storageKey, lastAction.id, 1 /* StorageScope.WORKSPACE */, 1 /* StorageTarget.MACHINE */);\n        }\n        this._defaultAction.dispose();\n        this._defaultAction = this._instaService.createInstance(MenuEntryActionViewItem, lastAction, { keybinding: this._getDefaultActionKeybindingLabel(lastAction) });\n        this._defaultAction.actionRunner = new class extends ActionRunner {\n            runAction(action, context) {\n                return __awaiter(this, void 0, void 0, function* () {\n                    yield action.run(undefined);\n                });\n            }\n        }();\n        if (this._container) {\n            this._defaultAction.render(prepend(this._container, $('.action-container')));\n        }\n    }\n    _getDefaultActionKeybindingLabel(defaultAction) {\n        var _a;\n        let defaultActionKeybinding;\n        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.renderKeybindingWithDefaultActionLabel) {\n            const kb = this._keybindingService.lookupKeybinding(defaultAction.id);\n            if (kb) {\n                defaultActionKeybinding = `(${kb.getLabel()})`;\n            }\n        }\n        return defaultActionKeybinding;\n    }\n    setActionContext(newContext) {\n        super.setActionContext(newContext);\n        this._defaultAction.setActionContext(newContext);\n        this._dropdown.setActionContext(newContext);\n    }\n    render(container) {\n        this._container = container;\n        super.render(this._container);\n        this._container.classList.add('monaco-dropdown-with-default');\n        const primaryContainer = $('.action-container');\n        this._defaultAction.render(append(this._container, primaryContainer));\n        this._register(addDisposableListener(primaryContainer, EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(17 /* KeyCode.RightArrow */)) {\n                this._defaultAction.element.tabIndex = -1;\n                this._dropdown.focus();\n                event.stopPropagation();\n            }\n        }));\n        const dropdownContainer = $('.dropdown-action-container');\n        this._dropdown.render(append(this._container, dropdownContainer));\n        this._register(addDisposableListener(dropdownContainer, EventType.KEY_DOWN, (e) => {\n            var _a;\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                this._defaultAction.element.tabIndex = 0;\n                this._dropdown.setFocusable(false);\n                (_a = this._defaultAction.element) === null || _a === void 0 ? void 0 : _a.focus();\n                event.stopPropagation();\n            }\n        }));\n    }\n    focus(fromRight) {\n        if (fromRight) {\n            this._dropdown.focus();\n        }\n        else {\n            this._defaultAction.element.tabIndex = 0;\n            this._defaultAction.element.focus();\n        }\n    }\n    blur() {\n        this._defaultAction.element.tabIndex = -1;\n        this._dropdown.blur();\n        this._container.blur();\n    }\n    setFocusable(focusable) {\n        if (focusable) {\n            this._defaultAction.element.tabIndex = 0;\n        }\n        else {\n            this._defaultAction.element.tabIndex = -1;\n            this._dropdown.setFocusable(false);\n        }\n    }\n    dispose() {\n        this._defaultAction.dispose();\n        this._dropdown.dispose();\n        super.dispose();\n    }\n};\nDropdownWithDefaultActionViewItem = __decorate([\n    __param(2, IKeybindingService),\n    __param(3, INotificationService),\n    __param(4, IContextMenuService),\n    __param(5, IMenuService),\n    __param(6, IInstantiationService),\n    __param(7, IStorageService)\n], DropdownWithDefaultActionViewItem);\nexport { DropdownWithDefaultActionViewItem };\nlet SubmenuEntrySelectActionViewItem = class SubmenuEntrySelectActionViewItem extends SelectActionViewItem {\n    constructor(action, contextViewService) {\n        super(null, action, action.actions.map(a => ({\n            text: a.id === Separator.ID ? '\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500\\u2500' : a.label,\n            isDisabled: !a.enabled,\n        })), 0, contextViewService, defaultSelectBoxStyles, { ariaLabel: action.tooltip, optionsAsChildren: true });\n        this.select(Math.max(0, action.actions.findIndex(a => a.checked)));\n    }\n    render(container) {\n        super.render(container);\n        container.style.borderColor = asCssVariable(selectBorder);\n    }\n    runAction(option, index) {\n        const action = this.action.actions[index];\n        if (action) {\n            this.actionRunner.run(action);\n        }\n    }\n};\nSubmenuEntrySelectActionViewItem = __decorate([\n    __param(1, IContextViewService)\n], SubmenuEntrySelectActionViewItem);\n/**\n * Creates action view items for menu actions or submenu actions.\n */\nexport function createActionViewItem(instaService, action, options) {\n    if (action instanceof MenuItemAction) {\n        return instaService.createInstance(MenuEntryActionViewItem, action, options);\n    }\n    else if (action instanceof SubmenuItemAction) {\n        if (action.item.isSelection) {\n            return instaService.createInstance(SubmenuEntrySelectActionViewItem, action);\n        }\n        else {\n            if (action.item.rememberDefaultAction) {\n                return instaService.createInstance(DropdownWithDefaultActionViewItem, action, Object.assign(Object.assign({}, options), { persistLastActionId: true }));\n            }\n            else {\n                return instaService.createInstance(SubmenuEntryActionViewItem, action, options);\n            }\n        }\n    }\n    else {\n        return undefined;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function isICommandActionToggleInfo(thing) {\n    return thing ? thing.condition !== undefined : false;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { addDisposableListener } from '../../../base/browser/dom.js';\nimport { StandardMouseEvent } from '../../../base/browser/mouseEvent.js';\nimport { ToolBar } from '../../../base/browser/ui/toolbar/toolbar.js';\nimport { Separator, toAction } from '../../../base/common/actions.js';\nimport { coalesceInPlace } from '../../../base/common/arrays.js';\nimport { intersection } from '../../../base/common/collections.js';\nimport { Iterable } from '../../../base/common/iterator.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { localize } from '../../../nls.js';\nimport { IMenuService, MenuItemAction, SubmenuItemAction } from '../common/actions.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { ITelemetryService } from '../../telemetry/common/telemetry.js';\n/**\n * The `WorkbenchToolBar` does\n * - support hiding of menu items\n * - lookup keybindings for each actions automatically\n * - send `workbenchActionExecuted`-events for each action\n *\n * See {@link MenuWorkbenchToolBar} for a toolbar that is backed by a menu.\n */\nlet WorkbenchToolBar = class WorkbenchToolBar extends ToolBar {\n    constructor(container, _options, _menuService, _contextKeyService, _contextMenuService, keybindingService, telemetryService) {\n        super(container, _contextMenuService, Object.assign(Object.assign({ \n            // defaults\n            getKeyBinding: (action) => { var _a; return (_a = keybindingService.lookupKeybinding(action.id)) !== null && _a !== void 0 ? _a : undefined; } }, _options), { \n            // mandatory (overide options)\n            allowContextMenu: true, skipTelemetry: typeof (_options === null || _options === void 0 ? void 0 : _options.telemetrySource) === 'string' }));\n        this._options = _options;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._contextMenuService = _contextMenuService;\n        this._sessionDisposables = this._store.add(new DisposableStore());\n        // telemetry logic\n        const telemetrySource = _options === null || _options === void 0 ? void 0 : _options.telemetrySource;\n        if (telemetrySource) {\n            this._store.add(this.actionBar.onDidRun(e => telemetryService.publicLog2('workbenchActionExecuted', { id: e.action.id, from: telemetrySource })));\n        }\n    }\n    setActions(_primary, _secondary = [], menuIds) {\n        var _a, _b, _c;\n        this._sessionDisposables.clear();\n        const primary = _primary.slice(); // for hiding and overflow we set some items to undefined\n        const secondary = _secondary.slice();\n        const toggleActions = [];\n        let toggleActionsCheckedCount = 0;\n        const extraSecondary = [];\n        let someAreHidden = false;\n        // unless disabled, move all hidden items to secondary group or ignore them\n        if (((_a = this._options) === null || _a === void 0 ? void 0 : _a.hiddenItemStrategy) !== -1 /* HiddenItemStrategy.NoHide */) {\n            for (let i = 0; i < primary.length; i++) {\n                const action = primary[i];\n                if (!(action instanceof MenuItemAction) && !(action instanceof SubmenuItemAction)) {\n                    // console.warn(`Action ${action.id}/${action.label} is not a MenuItemAction`);\n                    continue;\n                }\n                if (!action.hideActions) {\n                    continue;\n                }\n                // collect all toggle actions\n                toggleActions.push(action.hideActions.toggle);\n                if (action.hideActions.toggle.checked) {\n                    toggleActionsCheckedCount++;\n                }\n                // hidden items move into overflow or ignore\n                if (action.hideActions.isHidden) {\n                    someAreHidden = true;\n                    primary[i] = undefined;\n                    if (((_b = this._options) === null || _b === void 0 ? void 0 : _b.hiddenItemStrategy) !== 0 /* HiddenItemStrategy.Ignore */) {\n                        extraSecondary[i] = action;\n                    }\n                }\n            }\n        }\n        // count for max\n        if (((_c = this._options) === null || _c === void 0 ? void 0 : _c.overflowBehavior) !== undefined) {\n            const exemptedIds = intersection(new Set(this._options.overflowBehavior.exempted), Iterable.map(primary, a => a === null || a === void 0 ? void 0 : a.id));\n            const maxItems = this._options.overflowBehavior.maxItems - exemptedIds.size;\n            let count = 0;\n            for (let i = 0; i < primary.length; i++) {\n                const action = primary[i];\n                if (!action) {\n                    continue;\n                }\n                count++;\n                if (exemptedIds.has(action.id)) {\n                    continue;\n                }\n                if (count >= maxItems) {\n                    primary[i] = undefined;\n                    extraSecondary[i] = action;\n                }\n            }\n        }\n        // coalesce turns Array<IAction|undefined> into IAction[]\n        coalesceInPlace(primary);\n        coalesceInPlace(extraSecondary);\n        super.setActions(primary, Separator.join(extraSecondary, secondary));\n        // add context menu for toggle actions\n        if (toggleActions.length > 0) {\n            this._sessionDisposables.add(addDisposableListener(this.getElement(), 'contextmenu', e => {\n                var _a, _b, _c, _d, _e;\n                const event = new StandardMouseEvent(e);\n                const action = this.getItemAction(event.target);\n                if (!(action)) {\n                    return;\n                }\n                event.preventDefault();\n                event.stopPropagation();\n                let noHide = false;\n                // last item cannot be hidden when using ignore strategy\n                if (toggleActionsCheckedCount === 1 && ((_a = this._options) === null || _a === void 0 ? void 0 : _a.hiddenItemStrategy) === 0 /* HiddenItemStrategy.Ignore */) {\n                    noHide = true;\n                    for (let i = 0; i < toggleActions.length; i++) {\n                        if (toggleActions[i].checked) {\n                            toggleActions[i] = toAction({\n                                id: action.id,\n                                label: action.label,\n                                checked: true,\n                                enabled: false,\n                                run() { }\n                            });\n                            break; // there is only one\n                        }\n                    }\n                }\n                // add \"hide foo\" actions\n                let hideAction;\n                if (!noHide && (action instanceof MenuItemAction || action instanceof SubmenuItemAction)) {\n                    if (!action.hideActions) {\n                        // no context menu for MenuItemAction instances that support no hiding\n                        // those are fake actions and need to be cleaned up\n                        return;\n                    }\n                    hideAction = action.hideActions.hide;\n                }\n                else {\n                    hideAction = toAction({\n                        id: 'label',\n                        label: localize('hide', \"Hide\"),\n                        enabled: false,\n                        run() { }\n                    });\n                }\n                const actions = Separator.join([hideAction], toggleActions);\n                // add \"Reset Menu\" action\n                if (((_b = this._options) === null || _b === void 0 ? void 0 : _b.resetMenu) && !menuIds) {\n                    menuIds = [this._options.resetMenu];\n                }\n                if (someAreHidden && menuIds) {\n                    actions.push(new Separator());\n                    actions.push(toAction({\n                        id: 'resetThisMenu',\n                        label: localize('resetThisMenu', \"Reset Menu\"),\n                        run: () => this._menuService.resetHiddenStates(menuIds)\n                    }));\n                }\n                this._contextMenuService.showContextMenu({\n                    getAnchor: () => event,\n                    getActions: () => actions,\n                    // add context menu actions (iff appicable)\n                    menuId: (_c = this._options) === null || _c === void 0 ? void 0 : _c.contextMenu,\n                    menuActionOptions: Object.assign({ renderShortTitle: true }, (_d = this._options) === null || _d === void 0 ? void 0 : _d.menuOptions),\n                    skipTelemetry: typeof ((_e = this._options) === null || _e === void 0 ? void 0 : _e.telemetrySource) === 'string',\n                    contextKeyService: this._contextKeyService,\n                });\n            }));\n        }\n    }\n};\nWorkbenchToolBar = __decorate([\n    __param(2, IMenuService),\n    __param(3, IContextKeyService),\n    __param(4, IContextMenuService),\n    __param(5, IKeybindingService),\n    __param(6, ITelemetryService)\n], WorkbenchToolBar);\nexport { WorkbenchToolBar };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __rest = (this && this.__rest) || function (s, e) {\n    var t = {};\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n        t[p] = s[p];\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                t[p[i]] = s[p[i]];\n        }\n    return t;\n};\nvar MenuItemAction_1;\nimport { SubmenuAction } from '../../../base/common/actions.js';\nimport { ThemeIcon } from '../../../base/common/themables.js';\nimport { MicrotaskEmitter } from '../../../base/common/event.js';\nimport { DisposableStore, toDisposable } from '../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { CommandsRegistry, ICommandService } from '../../commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../keybinding/common/keybindingsRegistry.js';\nexport function isIMenuItem(item) {\n    return item.command !== undefined;\n}\nexport function isISubmenuItem(item) {\n    return item.submenu !== undefined;\n}\nexport class MenuId {\n    /**\n     * Create a new `MenuId` with the unique identifier. Will throw if a menu\n     * with the identifier already exists, use `MenuId.for(ident)` or a unique\n     * identifier\n     */\n    constructor(identifier) {\n        if (MenuId._instances.has(identifier)) {\n            throw new TypeError(`MenuId with identifier '${identifier}' already exists. Use MenuId.for(ident) or a unique identifier`);\n        }\n        MenuId._instances.set(identifier, this);\n        this.id = identifier;\n    }\n}\nMenuId._instances = new Map();\nMenuId.CommandPalette = new MenuId('CommandPalette');\nMenuId.DebugBreakpointsContext = new MenuId('DebugBreakpointsContext');\nMenuId.DebugCallStackContext = new MenuId('DebugCallStackContext');\nMenuId.DebugConsoleContext = new MenuId('DebugConsoleContext');\nMenuId.DebugVariablesContext = new MenuId('DebugVariablesContext');\nMenuId.DebugWatchContext = new MenuId('DebugWatchContext');\nMenuId.DebugToolBar = new MenuId('DebugToolBar');\nMenuId.DebugToolBarStop = new MenuId('DebugToolBarStop');\nMenuId.EditorContext = new MenuId('EditorContext');\nMenuId.SimpleEditorContext = new MenuId('SimpleEditorContext');\nMenuId.EditorContent = new MenuId('EditorContent');\nMenuId.EditorLineNumberContext = new MenuId('EditorLineNumberContext');\nMenuId.EditorContextCopy = new MenuId('EditorContextCopy');\nMenuId.EditorContextPeek = new MenuId('EditorContextPeek');\nMenuId.EditorContextShare = new MenuId('EditorContextShare');\nMenuId.EditorTitle = new MenuId('EditorTitle');\nMenuId.EditorTitleRun = new MenuId('EditorTitleRun');\nMenuId.EditorTitleContext = new MenuId('EditorTitleContext');\nMenuId.EditorTitleContextShare = new MenuId('EditorTitleContextShare');\nMenuId.EmptyEditorGroup = new MenuId('EmptyEditorGroup');\nMenuId.EmptyEditorGroupContext = new MenuId('EmptyEditorGroupContext');\nMenuId.EditorTabsBarContext = new MenuId('EditorTabsBarContext');\nMenuId.ExplorerContext = new MenuId('ExplorerContext');\nMenuId.ExplorerContextShare = new MenuId('ExplorerContextShare');\nMenuId.ExtensionContext = new MenuId('ExtensionContext');\nMenuId.GlobalActivity = new MenuId('GlobalActivity');\nMenuId.CommandCenter = new MenuId('CommandCenter');\nMenuId.CommandCenterCenter = new MenuId('CommandCenterCenter');\nMenuId.LayoutControlMenuSubmenu = new MenuId('LayoutControlMenuSubmenu');\nMenuId.LayoutControlMenu = new MenuId('LayoutControlMenu');\nMenuId.MenubarMainMenu = new MenuId('MenubarMainMenu');\nMenuId.MenubarAppearanceMenu = new MenuId('MenubarAppearanceMenu');\nMenuId.MenubarDebugMenu = new MenuId('MenubarDebugMenu');\nMenuId.MenubarEditMenu = new MenuId('MenubarEditMenu');\nMenuId.MenubarCopy = new MenuId('MenubarCopy');\nMenuId.MenubarFileMenu = new MenuId('MenubarFileMenu');\nMenuId.MenubarGoMenu = new MenuId('MenubarGoMenu');\nMenuId.MenubarHelpMenu = new MenuId('MenubarHelpMenu');\nMenuId.MenubarLayoutMenu = new MenuId('MenubarLayoutMenu');\nMenuId.MenubarNewBreakpointMenu = new MenuId('MenubarNewBreakpointMenu');\nMenuId.PanelAlignmentMenu = new MenuId('PanelAlignmentMenu');\nMenuId.PanelPositionMenu = new MenuId('PanelPositionMenu');\nMenuId.MenubarPreferencesMenu = new MenuId('MenubarPreferencesMenu');\nMenuId.MenubarRecentMenu = new MenuId('MenubarRecentMenu');\nMenuId.MenubarSelectionMenu = new MenuId('MenubarSelectionMenu');\nMenuId.MenubarShare = new MenuId('MenubarShare');\nMenuId.MenubarSwitchEditorMenu = new MenuId('MenubarSwitchEditorMenu');\nMenuId.MenubarSwitchGroupMenu = new MenuId('MenubarSwitchGroupMenu');\nMenuId.MenubarTerminalMenu = new MenuId('MenubarTerminalMenu');\nMenuId.MenubarViewMenu = new MenuId('MenubarViewMenu');\nMenuId.MenubarHomeMenu = new MenuId('MenubarHomeMenu');\nMenuId.OpenEditorsContext = new MenuId('OpenEditorsContext');\nMenuId.OpenEditorsContextShare = new MenuId('OpenEditorsContextShare');\nMenuId.ProblemsPanelContext = new MenuId('ProblemsPanelContext');\nMenuId.SCMChangeContext = new MenuId('SCMChangeContext');\nMenuId.SCMResourceContext = new MenuId('SCMResourceContext');\nMenuId.SCMResourceContextShare = new MenuId('SCMResourceContextShare');\nMenuId.SCMResourceFolderContext = new MenuId('SCMResourceFolderContext');\nMenuId.SCMResourceGroupContext = new MenuId('SCMResourceGroupContext');\nMenuId.SCMSourceControl = new MenuId('SCMSourceControl');\nMenuId.SCMTitle = new MenuId('SCMTitle');\nMenuId.SearchContext = new MenuId('SearchContext');\nMenuId.SearchActionMenu = new MenuId('SearchActionContext');\nMenuId.StatusBarWindowIndicatorMenu = new MenuId('StatusBarWindowIndicatorMenu');\nMenuId.StatusBarRemoteIndicatorMenu = new MenuId('StatusBarRemoteIndicatorMenu');\nMenuId.StickyScrollContext = new MenuId('StickyScrollContext');\nMenuId.TestItem = new MenuId('TestItem');\nMenuId.TestItemGutter = new MenuId('TestItemGutter');\nMenuId.TestMessageContext = new MenuId('TestMessageContext');\nMenuId.TestMessageContent = new MenuId('TestMessageContent');\nMenuId.TestPeekElement = new MenuId('TestPeekElement');\nMenuId.TestPeekTitle = new MenuId('TestPeekTitle');\nMenuId.TouchBarContext = new MenuId('TouchBarContext');\nMenuId.TitleBarContext = new MenuId('TitleBarContext');\nMenuId.TitleBarTitleContext = new MenuId('TitleBarTitleContext');\nMenuId.TunnelContext = new MenuId('TunnelContext');\nMenuId.TunnelPrivacy = new MenuId('TunnelPrivacy');\nMenuId.TunnelProtocol = new MenuId('TunnelProtocol');\nMenuId.TunnelPortInline = new MenuId('TunnelInline');\nMenuId.TunnelTitle = new MenuId('TunnelTitle');\nMenuId.TunnelLocalAddressInline = new MenuId('TunnelLocalAddressInline');\nMenuId.TunnelOriginInline = new MenuId('TunnelOriginInline');\nMenuId.ViewItemContext = new MenuId('ViewItemContext');\nMenuId.ViewContainerTitle = new MenuId('ViewContainerTitle');\nMenuId.ViewContainerTitleContext = new MenuId('ViewContainerTitleContext');\nMenuId.ViewTitle = new MenuId('ViewTitle');\nMenuId.ViewTitleContext = new MenuId('ViewTitleContext');\nMenuId.CommentEditorActions = new MenuId('CommentEditorActions');\nMenuId.CommentThreadTitle = new MenuId('CommentThreadTitle');\nMenuId.CommentThreadActions = new MenuId('CommentThreadActions');\nMenuId.CommentThreadAdditionalActions = new MenuId('CommentThreadAdditionalActions');\nMenuId.CommentThreadTitleContext = new MenuId('CommentThreadTitleContext');\nMenuId.CommentThreadCommentContext = new MenuId('CommentThreadCommentContext');\nMenuId.CommentTitle = new MenuId('CommentTitle');\nMenuId.CommentActions = new MenuId('CommentActions');\nMenuId.InteractiveToolbar = new MenuId('InteractiveToolbar');\nMenuId.InteractiveCellTitle = new MenuId('InteractiveCellTitle');\nMenuId.InteractiveCellDelete = new MenuId('InteractiveCellDelete');\nMenuId.InteractiveCellExecute = new MenuId('InteractiveCellExecute');\nMenuId.InteractiveInputExecute = new MenuId('InteractiveInputExecute');\nMenuId.NotebookToolbar = new MenuId('NotebookToolbar');\nMenuId.NotebookStickyScrollContext = new MenuId('NotebookStickyScrollContext');\nMenuId.NotebookCellTitle = new MenuId('NotebookCellTitle');\nMenuId.NotebookCellDelete = new MenuId('NotebookCellDelete');\nMenuId.NotebookCellInsert = new MenuId('NotebookCellInsert');\nMenuId.NotebookCellBetween = new MenuId('NotebookCellBetween');\nMenuId.NotebookCellListTop = new MenuId('NotebookCellTop');\nMenuId.NotebookCellExecute = new MenuId('NotebookCellExecute');\nMenuId.NotebookCellExecutePrimary = new MenuId('NotebookCellExecutePrimary');\nMenuId.NotebookDiffCellInputTitle = new MenuId('NotebookDiffCellInputTitle');\nMenuId.NotebookDiffCellMetadataTitle = new MenuId('NotebookDiffCellMetadataTitle');\nMenuId.NotebookDiffCellOutputsTitle = new MenuId('NotebookDiffCellOutputsTitle');\nMenuId.NotebookOutputToolbar = new MenuId('NotebookOutputToolbar');\nMenuId.NotebookEditorLayoutConfigure = new MenuId('NotebookEditorLayoutConfigure');\nMenuId.NotebookKernelSource = new MenuId('NotebookKernelSource');\nMenuId.BulkEditTitle = new MenuId('BulkEditTitle');\nMenuId.BulkEditContext = new MenuId('BulkEditContext');\nMenuId.TimelineItemContext = new MenuId('TimelineItemContext');\nMenuId.TimelineTitle = new MenuId('TimelineTitle');\nMenuId.TimelineTitleContext = new MenuId('TimelineTitleContext');\nMenuId.TimelineFilterSubMenu = new MenuId('TimelineFilterSubMenu');\nMenuId.AccountsContext = new MenuId('AccountsContext');\nMenuId.PanelTitle = new MenuId('PanelTitle');\nMenuId.AuxiliaryBarTitle = new MenuId('AuxiliaryBarTitle');\nMenuId.TerminalInstanceContext = new MenuId('TerminalInstanceContext');\nMenuId.TerminalEditorInstanceContext = new MenuId('TerminalEditorInstanceContext');\nMenuId.TerminalNewDropdownContext = new MenuId('TerminalNewDropdownContext');\nMenuId.TerminalTabContext = new MenuId('TerminalTabContext');\nMenuId.TerminalTabEmptyAreaContext = new MenuId('TerminalTabEmptyAreaContext');\nMenuId.WebviewContext = new MenuId('WebviewContext');\nMenuId.InlineCompletionsActions = new MenuId('InlineCompletionsActions');\nMenuId.NewFile = new MenuId('NewFile');\nMenuId.MergeInput1Toolbar = new MenuId('MergeToolbar1Toolbar');\nMenuId.MergeInput2Toolbar = new MenuId('MergeToolbar2Toolbar');\nMenuId.MergeBaseToolbar = new MenuId('MergeBaseToolbar');\nMenuId.MergeInputResultToolbar = new MenuId('MergeToolbarResultToolbar');\nMenuId.InlineSuggestionToolbar = new MenuId('InlineSuggestionToolbar');\nMenuId.ChatContext = new MenuId('ChatContext');\nMenuId.ChatCodeBlock = new MenuId('ChatCodeblock');\nMenuId.ChatMessageTitle = new MenuId('ChatMessageTitle');\nMenuId.ChatExecute = new MenuId('ChatExecute');\nMenuId.ChatInputSide = new MenuId('ChatInputSide');\nMenuId.AccessibleView = new MenuId('AccessibleView');\nexport const IMenuService = createDecorator('menuService');\nclass MenuRegistryChangeEvent {\n    static for(id) {\n        let value = this._all.get(id);\n        if (!value) {\n            value = new MenuRegistryChangeEvent(id);\n            this._all.set(id, value);\n        }\n        return value;\n    }\n    static merge(events) {\n        const ids = new Set();\n        for (const item of events) {\n            if (item instanceof MenuRegistryChangeEvent) {\n                ids.add(item.id);\n            }\n        }\n        return ids;\n    }\n    constructor(id) {\n        this.id = id;\n        this.has = candidate => candidate === id;\n    }\n}\nMenuRegistryChangeEvent._all = new Map();\nexport const MenuRegistry = new class {\n    constructor() {\n        this._commands = new Map();\n        this._menuItems = new Map();\n        this._onDidChangeMenu = new MicrotaskEmitter({\n            merge: MenuRegistryChangeEvent.merge\n        });\n        this.onDidChangeMenu = this._onDidChangeMenu.event;\n    }\n    addCommand(command) {\n        this._commands.set(command.id, command);\n        this._onDidChangeMenu.fire(MenuRegistryChangeEvent.for(MenuId.CommandPalette));\n        return toDisposable(() => {\n            if (this._commands.delete(command.id)) {\n                this._onDidChangeMenu.fire(MenuRegistryChangeEvent.for(MenuId.CommandPalette));\n            }\n        });\n    }\n    getCommand(id) {\n        return this._commands.get(id);\n    }\n    getCommands() {\n        const map = new Map();\n        this._commands.forEach((value, key) => map.set(key, value));\n        return map;\n    }\n    appendMenuItem(id, item) {\n        let list = this._menuItems.get(id);\n        if (!list) {\n            list = new LinkedList();\n            this._menuItems.set(id, list);\n        }\n        const rm = list.push(item);\n        this._onDidChangeMenu.fire(MenuRegistryChangeEvent.for(id));\n        return toDisposable(() => {\n            rm();\n            this._onDidChangeMenu.fire(MenuRegistryChangeEvent.for(id));\n        });\n    }\n    appendMenuItems(items) {\n        const result = new DisposableStore();\n        for (const { id, item } of items) {\n            result.add(this.appendMenuItem(id, item));\n        }\n        return result;\n    }\n    getMenuItems(id) {\n        let result;\n        if (this._menuItems.has(id)) {\n            result = [...this._menuItems.get(id)];\n        }\n        else {\n            result = [];\n        }\n        if (id === MenuId.CommandPalette) {\n            // CommandPalette is special because it shows\n            // all commands by default\n            this._appendImplicitItems(result);\n        }\n        return result;\n    }\n    _appendImplicitItems(result) {\n        const set = new Set();\n        for (const item of result) {\n            if (isIMenuItem(item)) {\n                set.add(item.command.id);\n                if (item.alt) {\n                    set.add(item.alt.id);\n                }\n            }\n        }\n        this._commands.forEach((command, id) => {\n            if (!set.has(id)) {\n                result.push({ command });\n            }\n        });\n    }\n};\nexport class SubmenuItemAction extends SubmenuAction {\n    constructor(item, hideActions, actions) {\n        super(`submenuitem.${item.submenu.id}`, typeof item.title === 'string' ? item.title : item.title.value, actions, 'submenu');\n        this.item = item;\n        this.hideActions = hideActions;\n    }\n}\n// implements IAction, does NOT extend Action, so that no one\n// subscribes to events of Action or modified properties\nlet MenuItemAction = MenuItemAction_1 = class MenuItemAction {\n    static label(action, options) {\n        return (options === null || options === void 0 ? void 0 : options.renderShortTitle) && action.shortTitle\n            ? (typeof action.shortTitle === 'string' ? action.shortTitle : action.shortTitle.value)\n            : (typeof action.title === 'string' ? action.title : action.title.value);\n    }\n    constructor(item, alt, options, hideActions, contextKeyService, _commandService) {\n        var _a, _b;\n        this.hideActions = hideActions;\n        this._commandService = _commandService;\n        this.id = item.id;\n        this.label = MenuItemAction_1.label(item, options);\n        this.tooltip = (_b = (typeof item.tooltip === 'string' ? item.tooltip : (_a = item.tooltip) === null || _a === void 0 ? void 0 : _a.value)) !== null && _b !== void 0 ? _b : '';\n        this.enabled = !item.precondition || contextKeyService.contextMatchesRules(item.precondition);\n        this.checked = undefined;\n        let icon;\n        if (item.toggled) {\n            const toggled = (item.toggled.condition ? item.toggled : { condition: item.toggled });\n            this.checked = contextKeyService.contextMatchesRules(toggled.condition);\n            if (this.checked && toggled.tooltip) {\n                this.tooltip = typeof toggled.tooltip === 'string' ? toggled.tooltip : toggled.tooltip.value;\n            }\n            if (this.checked && ThemeIcon.isThemeIcon(toggled.icon)) {\n                icon = toggled.icon;\n            }\n            if (this.checked && toggled.title) {\n                this.label = typeof toggled.title === 'string' ? toggled.title : toggled.title.value;\n            }\n        }\n        if (!icon) {\n            icon = ThemeIcon.isThemeIcon(item.icon) ? item.icon : undefined;\n        }\n        this.item = item;\n        this.alt = alt ? new MenuItemAction_1(alt, undefined, options, hideActions, contextKeyService, _commandService) : undefined;\n        this._options = options;\n        this.class = icon && ThemeIcon.asClassName(icon);\n    }\n    run(...args) {\n        var _a, _b;\n        let runArgs = [];\n        if ((_a = this._options) === null || _a === void 0 ? void 0 : _a.arg) {\n            runArgs = [...runArgs, this._options.arg];\n        }\n        if ((_b = this._options) === null || _b === void 0 ? void 0 : _b.shouldForwardArgs) {\n            runArgs = [...runArgs, ...args];\n        }\n        return this._commandService.executeCommand(this.id, ...runArgs);\n    }\n};\nMenuItemAction = MenuItemAction_1 = __decorate([\n    __param(4, IContextKeyService),\n    __param(5, ICommandService)\n], MenuItemAction);\nexport { MenuItemAction };\nexport class Action2 {\n    constructor(desc) {\n        this.desc = desc;\n    }\n}\nexport function registerAction2(ctor) {\n    const disposables = new DisposableStore();\n    const action = new ctor();\n    const _a = action.desc, { f1, menu, keybinding, description } = _a, command = __rest(_a, [\"f1\", \"menu\", \"keybinding\", \"description\"]);\n    // command\n    disposables.add(CommandsRegistry.registerCommand({\n        id: command.id,\n        handler: (accessor, ...args) => action.run(accessor, ...args),\n        description: description,\n    }));\n    // menu\n    if (Array.isArray(menu)) {\n        for (const item of menu) {\n            disposables.add(MenuRegistry.appendMenuItem(item.id, Object.assign({ command: Object.assign(Object.assign({}, command), { precondition: item.precondition === null ? undefined : command.precondition }) }, item)));\n        }\n    }\n    else if (menu) {\n        disposables.add(MenuRegistry.appendMenuItem(menu.id, Object.assign({ command: Object.assign(Object.assign({}, command), { precondition: menu.precondition === null ? undefined : command.precondition }) }, menu)));\n    }\n    if (f1) {\n        disposables.add(MenuRegistry.appendMenuItem(MenuId.CommandPalette, { command, when: command.precondition }));\n        disposables.add(MenuRegistry.addCommand(command));\n    }\n    // keybinding\n    if (Array.isArray(keybinding)) {\n        for (const item of keybinding) {\n            disposables.add(KeybindingsRegistry.registerKeybindingRule(Object.assign(Object.assign({}, item), { id: command.id, when: command.precondition ? ContextKeyExpr.and(command.precondition, item.when) : item.when })));\n        }\n    }\n    else if (keybinding) {\n        disposables.add(KeybindingsRegistry.registerKeybindingRule(Object.assign(Object.assign({}, keybinding), { id: command.id, when: command.precondition ? ContextKeyExpr.and(command.precondition, keybinding.when) : keybinding.when })));\n    }\n    return disposables;\n}\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar PersistedMenuHideState_1, MenuInfo_1;\nimport { RunOnceScheduler } from '../../../base/common/async.js';\nimport { DebounceEmitter, Emitter } from '../../../base/common/event.js';\nimport { DisposableStore } from '../../../base/common/lifecycle.js';\nimport { isIMenuItem, isISubmenuItem, MenuItemAction, MenuRegistry, SubmenuItemAction } from './actions.js';\nimport { ICommandService } from '../../commands/common/commands.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { Separator, toAction } from '../../../base/common/actions.js';\nimport { IStorageService } from '../../storage/common/storage.js';\nimport { removeFastWithoutKeepingOrder } from '../../../base/common/arrays.js';\nimport { localize } from '../../../nls.js';\nlet MenuService = class MenuService {\n    constructor(_commandService, storageService) {\n        this._commandService = _commandService;\n        this._hiddenStates = new PersistedMenuHideState(storageService);\n    }\n    createMenu(id, contextKeyService, options) {\n        return new MenuImpl(id, this._hiddenStates, Object.assign({ emitEventsForSubmenuChanges: false, eventDebounceDelay: 50 }, options), this._commandService, contextKeyService);\n    }\n    resetHiddenStates(ids) {\n        this._hiddenStates.reset(ids);\n    }\n};\nMenuService = __decorate([\n    __param(0, ICommandService),\n    __param(1, IStorageService)\n], MenuService);\nexport { MenuService };\nlet PersistedMenuHideState = PersistedMenuHideState_1 = class PersistedMenuHideState {\n    constructor(_storageService) {\n        this._storageService = _storageService;\n        this._disposables = new DisposableStore();\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._ignoreChangeEvent = false;\n        this._hiddenByDefaultCache = new Map();\n        try {\n            const raw = _storageService.get(PersistedMenuHideState_1._key, 0 /* StorageScope.PROFILE */, '{}');\n            this._data = JSON.parse(raw);\n        }\n        catch (err) {\n            this._data = Object.create(null);\n        }\n        this._disposables.add(_storageService.onDidChangeValue(0 /* StorageScope.PROFILE */, PersistedMenuHideState_1._key, this._disposables)(() => {\n            if (!this._ignoreChangeEvent) {\n                try {\n                    const raw = _storageService.get(PersistedMenuHideState_1._key, 0 /* StorageScope.PROFILE */, '{}');\n                    this._data = JSON.parse(raw);\n                }\n                catch (err) {\n                    console.log('FAILED to read storage after UPDATE', err);\n                }\n            }\n            this._onDidChange.fire();\n        }));\n    }\n    dispose() {\n        this._onDidChange.dispose();\n        this._disposables.dispose();\n    }\n    _isHiddenByDefault(menu, commandId) {\n        var _a;\n        return (_a = this._hiddenByDefaultCache.get(`${menu.id}/${commandId}`)) !== null && _a !== void 0 ? _a : false;\n    }\n    setDefaultState(menu, commandId, hidden) {\n        this._hiddenByDefaultCache.set(`${menu.id}/${commandId}`, hidden);\n    }\n    isHidden(menu, commandId) {\n        var _a, _b;\n        const hiddenByDefault = this._isHiddenByDefault(menu, commandId);\n        const state = (_b = (_a = this._data[menu.id]) === null || _a === void 0 ? void 0 : _a.includes(commandId)) !== null && _b !== void 0 ? _b : false;\n        return hiddenByDefault ? !state : state;\n    }\n    updateHidden(menu, commandId, hidden) {\n        const hiddenByDefault = this._isHiddenByDefault(menu, commandId);\n        if (hiddenByDefault) {\n            hidden = !hidden;\n        }\n        const entries = this._data[menu.id];\n        if (!hidden) {\n            // remove and cleanup\n            if (entries) {\n                const idx = entries.indexOf(commandId);\n                if (idx >= 0) {\n                    removeFastWithoutKeepingOrder(entries, idx);\n                }\n                if (entries.length === 0) {\n                    delete this._data[menu.id];\n                }\n            }\n        }\n        else {\n            // add unless already added\n            if (!entries) {\n                this._data[menu.id] = [commandId];\n            }\n            else {\n                const idx = entries.indexOf(commandId);\n                if (idx < 0) {\n                    entries.push(commandId);\n                }\n            }\n        }\n        this._persist();\n    }\n    reset(menus) {\n        if (menus === undefined) {\n            // reset all\n            this._data = Object.create(null);\n            this._persist();\n        }\n        else {\n            // reset only for a specific menu\n            for (const { id } of menus) {\n                if (this._data[id]) {\n                    delete this._data[id];\n                }\n            }\n            this._persist();\n        }\n    }\n    _persist() {\n        try {\n            this._ignoreChangeEvent = true;\n            const raw = JSON.stringify(this._data);\n            this._storageService.store(PersistedMenuHideState_1._key, raw, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n        }\n        finally {\n            this._ignoreChangeEvent = false;\n        }\n    }\n};\nPersistedMenuHideState._key = 'menu.hiddenCommands';\nPersistedMenuHideState = PersistedMenuHideState_1 = __decorate([\n    __param(0, IStorageService)\n], PersistedMenuHideState);\nlet MenuInfo = MenuInfo_1 = class MenuInfo {\n    constructor(_id, _hiddenStates, _collectContextKeysForSubmenus, _commandService, _contextKeyService) {\n        this._id = _id;\n        this._hiddenStates = _hiddenStates;\n        this._collectContextKeysForSubmenus = _collectContextKeysForSubmenus;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._menuGroups = [];\n        this._structureContextKeys = new Set();\n        this._preconditionContextKeys = new Set();\n        this._toggledContextKeys = new Set();\n        this.refresh();\n    }\n    get structureContextKeys() {\n        return this._structureContextKeys;\n    }\n    get preconditionContextKeys() {\n        return this._preconditionContextKeys;\n    }\n    get toggledContextKeys() {\n        return this._toggledContextKeys;\n    }\n    refresh() {\n        // reset\n        this._menuGroups.length = 0;\n        this._structureContextKeys.clear();\n        this._preconditionContextKeys.clear();\n        this._toggledContextKeys.clear();\n        const menuItems = MenuRegistry.getMenuItems(this._id);\n        let group;\n        menuItems.sort(MenuInfo_1._compareMenuItems);\n        for (const item of menuItems) {\n            // group by groupId\n            const groupName = item.group || '';\n            if (!group || group[0] !== groupName) {\n                group = [groupName, []];\n                this._menuGroups.push(group);\n            }\n            group[1].push(item);\n            // keep keys for eventing\n            this._collectContextKeys(item);\n        }\n    }\n    _collectContextKeys(item) {\n        MenuInfo_1._fillInKbExprKeys(item.when, this._structureContextKeys);\n        if (isIMenuItem(item)) {\n            // keep precondition keys for event if applicable\n            if (item.command.precondition) {\n                MenuInfo_1._fillInKbExprKeys(item.command.precondition, this._preconditionContextKeys);\n            }\n            // keep toggled keys for event if applicable\n            if (item.command.toggled) {\n                const toggledExpression = item.command.toggled.condition || item.command.toggled;\n                MenuInfo_1._fillInKbExprKeys(toggledExpression, this._toggledContextKeys);\n            }\n        }\n        else if (this._collectContextKeysForSubmenus) {\n            // recursively collect context keys from submenus so that this\n            // menu fires events when context key changes affect submenus\n            MenuRegistry.getMenuItems(item.submenu).forEach(this._collectContextKeys, this);\n        }\n    }\n    createActionGroups(options) {\n        const result = [];\n        for (const group of this._menuGroups) {\n            const [id, items] = group;\n            const activeActions = [];\n            for (const item of items) {\n                if (this._contextKeyService.contextMatchesRules(item.when)) {\n                    const isMenuItem = isIMenuItem(item);\n                    if (isMenuItem) {\n                        this._hiddenStates.setDefaultState(this._id, item.command.id, !!item.isHiddenByDefault);\n                    }\n                    const menuHide = createMenuHide(this._id, isMenuItem ? item.command : item, this._hiddenStates);\n                    if (isMenuItem) {\n                        // MenuItemAction\n                        activeActions.push(new MenuItemAction(item.command, item.alt, options, menuHide, this._contextKeyService, this._commandService));\n                    }\n                    else {\n                        // SubmenuItemAction\n                        const groups = new MenuInfo_1(item.submenu, this._hiddenStates, this._collectContextKeysForSubmenus, this._commandService, this._contextKeyService).createActionGroups(options);\n                        const submenuActions = Separator.join(...groups.map(g => g[1]));\n                        if (submenuActions.length > 0) {\n                            activeActions.push(new SubmenuItemAction(item, menuHide, submenuActions));\n                        }\n                    }\n                }\n            }\n            if (activeActions.length > 0) {\n                result.push([id, activeActions]);\n            }\n        }\n        return result;\n    }\n    static _fillInKbExprKeys(exp, set) {\n        if (exp) {\n            for (const key of exp.keys()) {\n                set.add(key);\n            }\n        }\n    }\n    static _compareMenuItems(a, b) {\n        const aGroup = a.group;\n        const bGroup = b.group;\n        if (aGroup !== bGroup) {\n            // Falsy groups come last\n            if (!aGroup) {\n                return 1;\n            }\n            else if (!bGroup) {\n                return -1;\n            }\n            // 'navigation' group comes first\n            if (aGroup === 'navigation') {\n                return -1;\n            }\n            else if (bGroup === 'navigation') {\n                return 1;\n            }\n            // lexical sort for groups\n            const value = aGroup.localeCompare(bGroup);\n            if (value !== 0) {\n                return value;\n            }\n        }\n        // sort on priority - default is 0\n        const aPrio = a.order || 0;\n        const bPrio = b.order || 0;\n        if (aPrio < bPrio) {\n            return -1;\n        }\n        else if (aPrio > bPrio) {\n            return 1;\n        }\n        // sort on titles\n        return MenuInfo_1._compareTitles(isIMenuItem(a) ? a.command.title : a.title, isIMenuItem(b) ? b.command.title : b.title);\n    }\n    static _compareTitles(a, b) {\n        const aStr = typeof a === 'string' ? a : a.original;\n        const bStr = typeof b === 'string' ? b : b.original;\n        return aStr.localeCompare(bStr);\n    }\n};\nMenuInfo = MenuInfo_1 = __decorate([\n    __param(3, ICommandService),\n    __param(4, IContextKeyService)\n], MenuInfo);\nlet MenuImpl = class MenuImpl {\n    constructor(id, hiddenStates, options, commandService, contextKeyService) {\n        this._disposables = new DisposableStore();\n        this._menuInfo = new MenuInfo(id, hiddenStates, options.emitEventsForSubmenuChanges, commandService, contextKeyService);\n        // Rebuild this menu whenever the menu registry reports an event for this MenuId.\n        // This usually happen while code and extensions are loaded and affects the over\n        // structure of the menu\n        const rebuildMenuSoon = new RunOnceScheduler(() => {\n            this._menuInfo.refresh();\n            this._onDidChange.fire({ menu: this, isStructuralChange: true, isEnablementChange: true, isToggleChange: true });\n        }, options.eventDebounceDelay);\n        this._disposables.add(rebuildMenuSoon);\n        this._disposables.add(MenuRegistry.onDidChangeMenu(e => {\n            if (e.has(id)) {\n                rebuildMenuSoon.schedule();\n            }\n        }));\n        // When context keys or storage state changes we need to check if the menu also has changed. However,\n        // we only do that when someone listens on this menu because (1) these events are\n        // firing often and (2) menu are often leaked\n        const lazyListener = this._disposables.add(new DisposableStore());\n        const merge = (events) => {\n            let isStructuralChange = false;\n            let isEnablementChange = false;\n            let isToggleChange = false;\n            for (const item of events) {\n                isStructuralChange = isStructuralChange || item.isStructuralChange;\n                isEnablementChange = isEnablementChange || item.isEnablementChange;\n                isToggleChange = isToggleChange || item.isToggleChange;\n                if (isStructuralChange && isEnablementChange && isToggleChange) {\n                    // everything is TRUE, no need to continue iterating\n                    break;\n                }\n            }\n            return { menu: this, isStructuralChange, isEnablementChange, isToggleChange };\n        };\n        const startLazyListener = () => {\n            lazyListener.add(contextKeyService.onDidChangeContext(e => {\n                const isStructuralChange = e.affectsSome(this._menuInfo.structureContextKeys);\n                const isEnablementChange = e.affectsSome(this._menuInfo.preconditionContextKeys);\n                const isToggleChange = e.affectsSome(this._menuInfo.toggledContextKeys);\n                if (isStructuralChange || isEnablementChange || isToggleChange) {\n                    this._onDidChange.fire({ menu: this, isStructuralChange, isEnablementChange, isToggleChange });\n                }\n            }));\n            lazyListener.add(hiddenStates.onDidChange(e => {\n                this._onDidChange.fire({ menu: this, isStructuralChange: true, isEnablementChange: false, isToggleChange: false });\n            }));\n        };\n        this._onDidChange = new DebounceEmitter({\n            // start/stop context key listener\n            onWillAddFirstListener: startLazyListener,\n            onDidRemoveLastListener: lazyListener.clear.bind(lazyListener),\n            delay: options.eventDebounceDelay,\n            merge\n        });\n        this.onDidChange = this._onDidChange.event;\n    }\n    getActions(options) {\n        return this._menuInfo.createActionGroups(options);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._onDidChange.dispose();\n    }\n};\nMenuImpl = __decorate([\n    __param(3, ICommandService),\n    __param(4, IContextKeyService)\n], MenuImpl);\nfunction createMenuHide(menu, command, states) {\n    const id = isISubmenuItem(command) ? command.submenu.id : command.id;\n    const title = typeof command.title === 'string' ? command.title : command.title.value;\n    const hide = toAction({\n        id: `hide/${menu.id}/${id}`,\n        label: localize('hide.label', 'Hide \\'{0}\\'', title),\n        run() { states.updateHidden(menu, id, true); }\n    });\n    const toggle = toAction({\n        id: `toggle/${menu.id}/${id}`,\n        label: title,\n        get checked() { return !states.isHidden(menu, id); },\n        run() { states.updateHidden(menu, id, !!this.checked); }\n    });\n    return {\n        hide,\n        toggle,\n        get isHidden() { return !toggle.checked; },\n    };\n}\n","import { createDecorator } from '../../instantiation/common/instantiation.js';\nimport { localize } from '../../../nls.js';\nexport const IAudioCueService = createDecorator('audioCue');\n/**\n * Corresponds to the audio files in ./media.\n*/\nexport class Sound {\n    static register(options) {\n        const sound = new Sound(options.fileName);\n        return sound;\n    }\n    constructor(fileName) {\n        this.fileName = fileName;\n    }\n}\nSound.error = Sound.register({ fileName: 'error.mp3' });\nSound.warning = Sound.register({ fileName: 'warning.mp3' });\nSound.foldedArea = Sound.register({ fileName: 'foldedAreas.mp3' });\nSound.break = Sound.register({ fileName: 'break.mp3' });\nSound.quickFixes = Sound.register({ fileName: 'quickFixes.mp3' });\nSound.taskCompleted = Sound.register({ fileName: 'taskCompleted.mp3' });\nSound.taskFailed = Sound.register({ fileName: 'taskFailed.mp3' });\nSound.terminalBell = Sound.register({ fileName: 'terminalBell.mp3' });\nSound.diffLineInserted = Sound.register({ fileName: 'diffLineInserted.mp3' });\nSound.diffLineDeleted = Sound.register({ fileName: 'diffLineDeleted.mp3' });\nSound.diffLineModified = Sound.register({ fileName: 'diffLineModified.mp3' });\nSound.chatRequestSent = Sound.register({ fileName: 'chatRequestSent.mp3' });\nSound.chatResponsePending = Sound.register({ fileName: 'chatResponsePending.mp3' });\nSound.chatResponseReceived1 = Sound.register({ fileName: 'chatResponseReceived1.mp3' });\nSound.chatResponseReceived2 = Sound.register({ fileName: 'chatResponseReceived2.mp3' });\nSound.chatResponseReceived3 = Sound.register({ fileName: 'chatResponseReceived3.mp3' });\nSound.chatResponseReceived4 = Sound.register({ fileName: 'chatResponseReceived4.mp3' });\nexport class SoundSource {\n    constructor(randomOneOf) {\n        this.randomOneOf = randomOneOf;\n    }\n}\nexport class AudioCue {\n    static register(options) {\n        const soundSource = new SoundSource('randomOneOf' in options.sound ? options.sound.randomOneOf : [options.sound]);\n        const audioCue = new AudioCue(soundSource, options.name, options.settingsKey);\n        AudioCue._audioCues.add(audioCue);\n        return audioCue;\n    }\n    constructor(sound, name, settingsKey) {\n        this.sound = sound;\n        this.name = name;\n        this.settingsKey = settingsKey;\n    }\n}\nAudioCue._audioCues = new Set();\nAudioCue.error = AudioCue.register({\n    name: localize('audioCues.lineHasError.name', 'Error on Line'),\n    sound: Sound.error,\n    settingsKey: 'audioCues.lineHasError',\n});\nAudioCue.warning = AudioCue.register({\n    name: localize('audioCues.lineHasWarning.name', 'Warning on Line'),\n    sound: Sound.warning,\n    settingsKey: 'audioCues.lineHasWarning',\n});\nAudioCue.foldedArea = AudioCue.register({\n    name: localize('audioCues.lineHasFoldedArea.name', 'Folded Area on Line'),\n    sound: Sound.foldedArea,\n    settingsKey: 'audioCues.lineHasFoldedArea',\n});\nAudioCue.break = AudioCue.register({\n    name: localize('audioCues.lineHasBreakpoint.name', 'Breakpoint on Line'),\n    sound: Sound.break,\n    settingsKey: 'audioCues.lineHasBreakpoint',\n});\nAudioCue.inlineSuggestion = AudioCue.register({\n    name: localize('audioCues.lineHasInlineSuggestion.name', 'Inline Suggestion on Line'),\n    sound: Sound.quickFixes,\n    settingsKey: 'audioCues.lineHasInlineSuggestion',\n});\nAudioCue.terminalQuickFix = AudioCue.register({\n    name: localize('audioCues.terminalQuickFix.name', 'Terminal Quick Fix'),\n    sound: Sound.quickFixes,\n    settingsKey: 'audioCues.terminalQuickFix',\n});\nAudioCue.onDebugBreak = AudioCue.register({\n    name: localize('audioCues.onDebugBreak.name', 'Debugger Stopped on Breakpoint'),\n    sound: Sound.break,\n    settingsKey: 'audioCues.onDebugBreak',\n});\nAudioCue.noInlayHints = AudioCue.register({\n    name: localize('audioCues.noInlayHints', 'No Inlay Hints on Line'),\n    sound: Sound.error,\n    settingsKey: 'audioCues.noInlayHints'\n});\nAudioCue.taskCompleted = AudioCue.register({\n    name: localize('audioCues.taskCompleted', 'Task Completed'),\n    sound: Sound.taskCompleted,\n    settingsKey: 'audioCues.taskCompleted'\n});\nAudioCue.taskFailed = AudioCue.register({\n    name: localize('audioCues.taskFailed', 'Task Failed'),\n    sound: Sound.taskFailed,\n    settingsKey: 'audioCues.taskFailed'\n});\nAudioCue.terminalCommandFailed = AudioCue.register({\n    name: localize('audioCues.terminalCommandFailed', 'Terminal Command Failed'),\n    sound: Sound.error,\n    settingsKey: 'audioCues.terminalCommandFailed'\n});\nAudioCue.terminalBell = AudioCue.register({\n    name: localize('audioCues.terminalBell', 'Terminal Bell'),\n    sound: Sound.terminalBell,\n    settingsKey: 'audioCues.terminalBell'\n});\nAudioCue.notebookCellCompleted = AudioCue.register({\n    name: localize('audioCues.notebookCellCompleted', 'Notebook Cell Completed'),\n    sound: Sound.taskCompleted,\n    settingsKey: 'audioCues.notebookCellCompleted'\n});\nAudioCue.notebookCellFailed = AudioCue.register({\n    name: localize('audioCues.notebookCellFailed', 'Notebook Cell Failed'),\n    sound: Sound.taskFailed,\n    settingsKey: 'audioCues.notebookCellFailed'\n});\nAudioCue.diffLineInserted = AudioCue.register({\n    name: localize('audioCues.diffLineInserted', 'Diff Line Inserted'),\n    sound: Sound.diffLineInserted,\n    settingsKey: 'audioCues.diffLineInserted'\n});\nAudioCue.diffLineDeleted = AudioCue.register({\n    name: localize('audioCues.diffLineDeleted', 'Diff Line Deleted'),\n    sound: Sound.diffLineDeleted,\n    settingsKey: 'audioCues.diffLineDeleted'\n});\nAudioCue.diffLineModified = AudioCue.register({\n    name: localize('audioCues.diffLineModified', 'Diff Line Modified'),\n    sound: Sound.diffLineModified,\n    settingsKey: 'audioCues.diffLineModified'\n});\nAudioCue.chatRequestSent = AudioCue.register({\n    name: localize('audioCues.chatRequestSent', 'Chat Request Sent'),\n    sound: Sound.chatRequestSent,\n    settingsKey: 'audioCues.chatRequestSent'\n});\nAudioCue.chatResponseReceived = AudioCue.register({\n    name: localize('audioCues.chatResponseReceived', 'Chat Response Received'),\n    settingsKey: 'audioCues.chatResponseReceived',\n    sound: {\n        randomOneOf: [\n            Sound.chatResponseReceived1,\n            Sound.chatResponseReceived2,\n            Sound.chatResponseReceived3,\n            Sound.chatResponseReceived4\n        ]\n    }\n});\nAudioCue.chatResponsePending = AudioCue.register({\n    name: localize('audioCues.chatResponsePending', 'Chat Response Pending'),\n    sound: Sound.chatResponsePending,\n    settingsKey: 'audioCues.chatResponsePending'\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isSafari, isWebkitWebView } from '../../../base/browser/browser.js';\nimport { $, addDisposableListener } from '../../../base/browser/dom.js';\nimport { DeferredPromise } from '../../../base/common/async.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\nimport { ILogService } from '../../log/common/log.js';\nlet BrowserClipboardService = class BrowserClipboardService extends Disposable {\n    constructor(layoutService, logService) {\n        super();\n        this.layoutService = layoutService;\n        this.logService = logService;\n        this.mapTextToType = new Map(); // unsupported in web (only in-memory)\n        this.findText = ''; // unsupported in web (only in-memory)\n        this.resources = []; // unsupported in web (only in-memory)\n        if (isSafari || isWebkitWebView) {\n            this.installWebKitWriteTextWorkaround();\n        }\n    }\n    // In Safari, it has the following note:\n    //\n    // \"The request to write to the clipboard must be triggered during a user gesture.\n    // A call to clipboard.write or clipboard.writeText outside the scope of a user\n    // gesture(such as \"click\" or \"touch\" event handlers) will result in the immediate\n    // rejection of the promise returned by the API call.\"\n    // From: https://webkit.org/blog/10855/async-clipboard-api/\n    //\n    // Since extensions run in a web worker, and handle gestures in an asynchronous way,\n    // they are not classified by Safari as \"in response to a user gesture\" and will reject.\n    //\n    // This function sets up some handlers to work around that behavior.\n    installWebKitWriteTextWorkaround() {\n        const handler = () => {\n            const currentWritePromise = new DeferredPromise();\n            // Cancel the previous promise since we just created a new one in response to this new event\n            if (this.webKitPendingClipboardWritePromise && !this.webKitPendingClipboardWritePromise.isSettled) {\n                this.webKitPendingClipboardWritePromise.cancel();\n            }\n            this.webKitPendingClipboardWritePromise = currentWritePromise;\n            // The ctor of ClipboardItem allows you to pass in a promise that will resolve to a string.\n            // This allows us to pass in a Promise that will either be cancelled by another event or\n            // resolved with the contents of the first call to this.writeText.\n            // see https://developer.mozilla.org/en-US/docs/Web/API/ClipboardItem/ClipboardItem#parameters\n            navigator.clipboard.write([new ClipboardItem({\n                    'text/plain': currentWritePromise.p,\n                })]).catch((err) => __awaiter(this, void 0, void 0, function* () {\n                if (!(err instanceof Error) || err.name !== 'NotAllowedError' || !currentWritePromise.isRejected) {\n                    this.logService.error(err);\n                }\n            }));\n        };\n        if (this.layoutService.hasContainer) {\n            this._register(addDisposableListener(this.layoutService.container, 'click', handler));\n            this._register(addDisposableListener(this.layoutService.container, 'keydown', handler));\n        }\n    }\n    writeText(text, type) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // With type: only in-memory is supported\n            if (type) {\n                this.mapTextToType.set(type, text);\n                return;\n            }\n            if (this.webKitPendingClipboardWritePromise) {\n                // For Safari, we complete this Promise which allows the call to `navigator.clipboard.write()`\n                // above to resolve and successfully copy to the clipboard. If we let this continue, Safari\n                // would throw an error because this call stack doesn't appear to originate from a user gesture.\n                return this.webKitPendingClipboardWritePromise.complete(text);\n            }\n            // Guard access to navigator.clipboard with try/catch\n            // as we have seen DOMExceptions in certain browsers\n            // due to security policies.\n            try {\n                return yield navigator.clipboard.writeText(text);\n            }\n            catch (error) {\n                console.error(error);\n            }\n            // Fallback to textarea and execCommand solution\n            const activeElement = document.activeElement;\n            const textArea = document.body.appendChild($('textarea', { 'aria-hidden': true }));\n            textArea.style.height = '1px';\n            textArea.style.width = '1px';\n            textArea.style.position = 'absolute';\n            textArea.value = text;\n            textArea.focus();\n            textArea.select();\n            document.execCommand('copy');\n            if (activeElement instanceof HTMLElement) {\n                activeElement.focus();\n            }\n            document.body.removeChild(textArea);\n            return;\n        });\n    }\n    readText(type) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // With type: only in-memory is supported\n            if (type) {\n                return this.mapTextToType.get(type) || '';\n            }\n            // Guard access to navigator.clipboard with try/catch\n            // as we have seen DOMExceptions in certain browsers\n            // due to security policies.\n            try {\n                return yield navigator.clipboard.readText();\n            }\n            catch (error) {\n                console.error(error);\n                return '';\n            }\n        });\n    }\n    readFindText() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.findText;\n        });\n    }\n    writeFindText(text) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.findText = text;\n        });\n    }\n    writeResources(resources) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.resources = resources;\n        });\n    }\n    readResources() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.resources;\n        });\n    }\n};\nBrowserClipboardService = __decorate([\n    __param(0, ILayoutService),\n    __param(1, ILogService)\n], BrowserClipboardService);\nexport { BrowserClipboardService };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const IClipboardService = createDecorator('clipboardService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../base/common/event.js';\nimport { Iterable } from '../../../base/common/iterator.js';\nimport { toDisposable } from '../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { validateConstraints } from '../../../base/common/types.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const ICommandService = createDecorator('commandService');\nexport const CommandsRegistry = new class {\n    constructor() {\n        this._commands = new Map();\n        this._onDidRegisterCommand = new Emitter();\n        this.onDidRegisterCommand = this._onDidRegisterCommand.event;\n    }\n    registerCommand(idOrCommand, handler) {\n        if (!idOrCommand) {\n            throw new Error(`invalid command`);\n        }\n        if (typeof idOrCommand === 'string') {\n            if (!handler) {\n                throw new Error(`invalid command`);\n            }\n            return this.registerCommand({ id: idOrCommand, handler });\n        }\n        // add argument validation if rich command metadata is provided\n        if (idOrCommand.description) {\n            const constraints = [];\n            for (const arg of idOrCommand.description.args) {\n                constraints.push(arg.constraint);\n            }\n            const actualHandler = idOrCommand.handler;\n            idOrCommand.handler = function (accessor, ...args) {\n                validateConstraints(args, constraints);\n                return actualHandler(accessor, ...args);\n            };\n        }\n        // find a place to store the command\n        const { id } = idOrCommand;\n        let commands = this._commands.get(id);\n        if (!commands) {\n            commands = new LinkedList();\n            this._commands.set(id, commands);\n        }\n        const removeFn = commands.unshift(idOrCommand);\n        const ret = toDisposable(() => {\n            removeFn();\n            const command = this._commands.get(id);\n            if (command === null || command === void 0 ? void 0 : command.isEmpty()) {\n                this._commands.delete(id);\n            }\n        });\n        // tell the world about this command\n        this._onDidRegisterCommand.fire(id);\n        return ret;\n    }\n    registerCommandAlias(oldId, newId) {\n        return CommandsRegistry.registerCommand(oldId, (accessor, ...args) => accessor.get(ICommandService).executeCommand(newId, ...args));\n    }\n    getCommand(id) {\n        const list = this._commands.get(id);\n        if (!list || list.isEmpty()) {\n            return undefined;\n        }\n        return Iterable.first(list);\n    }\n    getCommands() {\n        const result = new Map();\n        for (const key of this._commands.keys()) {\n            const command = this.getCommand(key);\n            if (command) {\n                result.set(key, command);\n            }\n        }\n        return result;\n    }\n};\nCommandsRegistry.registerCommand('noop', () => { });\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const IConfigurationService = createDecorator('configurationService');\nexport function toValuesTree(properties, conflictReporter) {\n    const root = Object.create(null);\n    for (const key in properties) {\n        addToValueTree(root, key, properties[key], conflictReporter);\n    }\n    return root;\n}\nexport function addToValueTree(settingsTreeRoot, key, value, conflictReporter) {\n    const segments = key.split('.');\n    const last = segments.pop();\n    let curr = settingsTreeRoot;\n    for (let i = 0; i < segments.length; i++) {\n        const s = segments[i];\n        let obj = curr[s];\n        switch (typeof obj) {\n            case 'undefined':\n                obj = curr[s] = Object.create(null);\n                break;\n            case 'object':\n                break;\n            default:\n                conflictReporter(`Ignoring ${key} as ${segments.slice(0, i + 1).join('.')} is ${JSON.stringify(obj)}`);\n                return;\n        }\n        curr = obj;\n    }\n    if (typeof curr === 'object' && curr !== null) {\n        try {\n            curr[last] = value; // workaround https://github.com/microsoft/vscode/issues/13606\n        }\n        catch (e) {\n            conflictReporter(`Ignoring ${key} as ${segments.join('.')} is ${JSON.stringify(curr)}`);\n        }\n    }\n    else {\n        conflictReporter(`Ignoring ${key} as ${segments.join('.')} is ${JSON.stringify(curr)}`);\n    }\n}\nexport function removeFromValueTree(valueTree, key) {\n    const segments = key.split('.');\n    doRemoveFromValueTree(valueTree, segments);\n}\nfunction doRemoveFromValueTree(valueTree, segments) {\n    const first = segments.shift();\n    if (segments.length === 0) {\n        // Reached last segment\n        delete valueTree[first];\n        return;\n    }\n    if (Object.keys(valueTree).indexOf(first) !== -1) {\n        const value = valueTree[first];\n        if (typeof value === 'object' && !Array.isArray(value)) {\n            doRemoveFromValueTree(value, segments);\n            if (Object.keys(value).length === 0) {\n                delete valueTree[first];\n            }\n        }\n    }\n}\n/**\n * A helper function to get the configuration value with a specific settings path (e.g. config.some.setting)\n */\nexport function getConfigurationValue(config, settingPath, defaultValue) {\n    function accessSetting(config, path) {\n        let current = config;\n        for (const component of path) {\n            if (typeof current !== 'object' || current === null) {\n                return undefined;\n            }\n            current = current[component];\n        }\n        return current;\n    }\n    const path = settingPath.split('.');\n    const result = accessSetting(config, path);\n    return typeof result === 'undefined' ? defaultValue : result;\n}\nexport function getLanguageTagSettingPlainKey(settingKey) {\n    return settingKey.replace(/[\\[\\]]/g, '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as arrays from '../../../base/common/arrays.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport * as objects from '../../../base/common/objects.js';\nimport * as types from '../../../base/common/types.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { addToValueTree, getConfigurationValue, removeFromValueTree, toValuesTree } from './configuration.js';\nimport { Extensions, overrideIdentifiersFromKey, OVERRIDE_PROPERTY_REGEX } from './configurationRegistry.js';\nimport { Registry } from '../../registry/common/platform.js';\nfunction freeze(data) {\n    return Object.isFrozen(data) ? data : objects.deepFreeze(data);\n}\nexport class ConfigurationModel {\n    constructor(_contents = {}, _keys = [], _overrides = [], raw) {\n        this._contents = _contents;\n        this._keys = _keys;\n        this._overrides = _overrides;\n        this.raw = raw;\n        this.overrideConfigurations = new Map();\n    }\n    get rawConfiguration() {\n        var _a;\n        if (!this._rawConfiguration) {\n            if ((_a = this.raw) === null || _a === void 0 ? void 0 : _a.length) {\n                const rawConfigurationModels = this.raw.map(raw => {\n                    if (raw instanceof ConfigurationModel) {\n                        return raw;\n                    }\n                    const parser = new ConfigurationModelParser('');\n                    parser.parseRaw(raw);\n                    return parser.configurationModel;\n                });\n                this._rawConfiguration = rawConfigurationModels.reduce((previous, current) => current === previous ? current : previous.merge(current), rawConfigurationModels[0]);\n            }\n            else {\n                // raw is same as current\n                this._rawConfiguration = this;\n            }\n        }\n        return this._rawConfiguration;\n    }\n    get contents() {\n        return this._contents;\n    }\n    get overrides() {\n        return this._overrides;\n    }\n    get keys() {\n        return this._keys;\n    }\n    isEmpty() {\n        return this._keys.length === 0 && Object.keys(this._contents).length === 0 && this._overrides.length === 0;\n    }\n    getValue(section) {\n        return section ? getConfigurationValue(this.contents, section) : this.contents;\n    }\n    inspect(section, overrideIdentifier) {\n        const value = this.rawConfiguration.getValue(section);\n        const override = overrideIdentifier ? this.rawConfiguration.getOverrideValue(section, overrideIdentifier) : undefined;\n        const merged = overrideIdentifier ? this.rawConfiguration.override(overrideIdentifier).getValue(section) : value;\n        return { value, override, merged };\n    }\n    getOverrideValue(section, overrideIdentifier) {\n        const overrideContents = this.getContentsForOverrideIdentifer(overrideIdentifier);\n        return overrideContents\n            ? section ? getConfigurationValue(overrideContents, section) : overrideContents\n            : undefined;\n    }\n    override(identifier) {\n        let overrideConfigurationModel = this.overrideConfigurations.get(identifier);\n        if (!overrideConfigurationModel) {\n            overrideConfigurationModel = this.createOverrideConfigurationModel(identifier);\n            this.overrideConfigurations.set(identifier, overrideConfigurationModel);\n        }\n        return overrideConfigurationModel;\n    }\n    merge(...others) {\n        var _a, _b;\n        const contents = objects.deepClone(this.contents);\n        const overrides = objects.deepClone(this.overrides);\n        const keys = [...this.keys];\n        const raws = ((_a = this.raw) === null || _a === void 0 ? void 0 : _a.length) ? [...this.raw] : [this];\n        for (const other of others) {\n            raws.push(...(((_b = other.raw) === null || _b === void 0 ? void 0 : _b.length) ? other.raw : [other]));\n            if (other.isEmpty()) {\n                continue;\n            }\n            this.mergeContents(contents, other.contents);\n            for (const otherOverride of other.overrides) {\n                const [override] = overrides.filter(o => arrays.equals(o.identifiers, otherOverride.identifiers));\n                if (override) {\n                    this.mergeContents(override.contents, otherOverride.contents);\n                    override.keys.push(...otherOverride.keys);\n                    override.keys = arrays.distinct(override.keys);\n                }\n                else {\n                    overrides.push(objects.deepClone(otherOverride));\n                }\n            }\n            for (const key of other.keys) {\n                if (keys.indexOf(key) === -1) {\n                    keys.push(key);\n                }\n            }\n        }\n        return new ConfigurationModel(contents, keys, overrides, raws.every(raw => raw instanceof ConfigurationModel) ? undefined : raws);\n    }\n    createOverrideConfigurationModel(identifier) {\n        const overrideContents = this.getContentsForOverrideIdentifer(identifier);\n        if (!overrideContents || typeof overrideContents !== 'object' || !Object.keys(overrideContents).length) {\n            // If there are no valid overrides, return self\n            return this;\n        }\n        const contents = {};\n        for (const key of arrays.distinct([...Object.keys(this.contents), ...Object.keys(overrideContents)])) {\n            let contentsForKey = this.contents[key];\n            const overrideContentsForKey = overrideContents[key];\n            // If there are override contents for the key, clone and merge otherwise use base contents\n            if (overrideContentsForKey) {\n                // Clone and merge only if base contents and override contents are of type object otherwise just override\n                if (typeof contentsForKey === 'object' && typeof overrideContentsForKey === 'object') {\n                    contentsForKey = objects.deepClone(contentsForKey);\n                    this.mergeContents(contentsForKey, overrideContentsForKey);\n                }\n                else {\n                    contentsForKey = overrideContentsForKey;\n                }\n            }\n            contents[key] = contentsForKey;\n        }\n        return new ConfigurationModel(contents, this.keys, this.overrides);\n    }\n    mergeContents(source, target) {\n        for (const key of Object.keys(target)) {\n            if (key in source) {\n                if (types.isObject(source[key]) && types.isObject(target[key])) {\n                    this.mergeContents(source[key], target[key]);\n                    continue;\n                }\n            }\n            source[key] = objects.deepClone(target[key]);\n        }\n    }\n    getContentsForOverrideIdentifer(identifier) {\n        let contentsForIdentifierOnly = null;\n        let contents = null;\n        const mergeContents = (contentsToMerge) => {\n            if (contentsToMerge) {\n                if (contents) {\n                    this.mergeContents(contents, contentsToMerge);\n                }\n                else {\n                    contents = objects.deepClone(contentsToMerge);\n                }\n            }\n        };\n        for (const override of this.overrides) {\n            if (override.identifiers.length === 1 && override.identifiers[0] === identifier) {\n                contentsForIdentifierOnly = override.contents;\n            }\n            else if (override.identifiers.includes(identifier)) {\n                mergeContents(override.contents);\n            }\n        }\n        // Merge contents of the identifier only at the end to take precedence.\n        mergeContents(contentsForIdentifierOnly);\n        return contents;\n    }\n    toJSON() {\n        return {\n            contents: this.contents,\n            overrides: this.overrides,\n            keys: this.keys\n        };\n    }\n    // Update methods\n    addValue(key, value) {\n        this.updateValue(key, value, true);\n    }\n    setValue(key, value) {\n        this.updateValue(key, value, false);\n    }\n    removeValue(key) {\n        const index = this.keys.indexOf(key);\n        if (index === -1) {\n            return;\n        }\n        this.keys.splice(index, 1);\n        removeFromValueTree(this.contents, key);\n        if (OVERRIDE_PROPERTY_REGEX.test(key)) {\n            this.overrides.splice(this.overrides.findIndex(o => arrays.equals(o.identifiers, overrideIdentifiersFromKey(key))), 1);\n        }\n    }\n    updateValue(key, value, add) {\n        addToValueTree(this.contents, key, value, e => console.error(e));\n        add = add || this.keys.indexOf(key) === -1;\n        if (add) {\n            this.keys.push(key);\n        }\n        if (OVERRIDE_PROPERTY_REGEX.test(key)) {\n            this.overrides.push({\n                identifiers: overrideIdentifiersFromKey(key),\n                keys: Object.keys(this.contents[key]),\n                contents: toValuesTree(this.contents[key], message => console.error(message)),\n            });\n        }\n    }\n}\nexport class ConfigurationModelParser {\n    constructor(_name) {\n        this._name = _name;\n        this._raw = null;\n        this._configurationModel = null;\n        this._restrictedConfigurations = [];\n    }\n    get configurationModel() {\n        return this._configurationModel || new ConfigurationModel();\n    }\n    parseRaw(raw, options) {\n        this._raw = raw;\n        const { contents, keys, overrides, restricted, hasExcludedProperties } = this.doParseRaw(raw, options);\n        this._configurationModel = new ConfigurationModel(contents, keys, overrides, hasExcludedProperties ? [raw] : undefined /* raw has not changed */);\n        this._restrictedConfigurations = restricted || [];\n    }\n    doParseRaw(raw, options) {\n        const configurationProperties = Registry.as(Extensions.Configuration).getConfigurationProperties();\n        const filtered = this.filter(raw, configurationProperties, true, options);\n        raw = filtered.raw;\n        const contents = toValuesTree(raw, message => console.error(`Conflict in settings file ${this._name}: ${message}`));\n        const keys = Object.keys(raw);\n        const overrides = this.toOverrides(raw, message => console.error(`Conflict in settings file ${this._name}: ${message}`));\n        return { contents, keys, overrides, restricted: filtered.restricted, hasExcludedProperties: filtered.hasExcludedProperties };\n    }\n    filter(properties, configurationProperties, filterOverriddenProperties, options) {\n        var _a, _b, _c;\n        let hasExcludedProperties = false;\n        if (!(options === null || options === void 0 ? void 0 : options.scopes) && !(options === null || options === void 0 ? void 0 : options.skipRestricted) && !((_a = options === null || options === void 0 ? void 0 : options.exclude) === null || _a === void 0 ? void 0 : _a.length)) {\n            return { raw: properties, restricted: [], hasExcludedProperties };\n        }\n        const raw = {};\n        const restricted = [];\n        for (const key in properties) {\n            if (OVERRIDE_PROPERTY_REGEX.test(key) && filterOverriddenProperties) {\n                const result = this.filter(properties[key], configurationProperties, false, options);\n                raw[key] = result.raw;\n                hasExcludedProperties = hasExcludedProperties || result.hasExcludedProperties;\n                restricted.push(...result.restricted);\n            }\n            else {\n                const propertySchema = configurationProperties[key];\n                const scope = propertySchema ? typeof propertySchema.scope !== 'undefined' ? propertySchema.scope : 3 /* ConfigurationScope.WINDOW */ : undefined;\n                if (propertySchema === null || propertySchema === void 0 ? void 0 : propertySchema.restricted) {\n                    restricted.push(key);\n                }\n                if (!((_b = options.exclude) === null || _b === void 0 ? void 0 : _b.includes(key)) /* Check exclude */\n                    && (((_c = options.include) === null || _c === void 0 ? void 0 : _c.includes(key) /* Check include */)\n                        || ((scope === undefined || options.scopes === undefined || options.scopes.includes(scope)) /* Check scopes */\n                            && !(options.skipRestricted && (propertySchema === null || propertySchema === void 0 ? void 0 : propertySchema.restricted))))) /* Check restricted */ {\n                    raw[key] = properties[key];\n                }\n                else {\n                    hasExcludedProperties = true;\n                }\n            }\n        }\n        return { raw, restricted, hasExcludedProperties };\n    }\n    toOverrides(raw, conflictReporter) {\n        const overrides = [];\n        for (const key of Object.keys(raw)) {\n            if (OVERRIDE_PROPERTY_REGEX.test(key)) {\n                const overrideRaw = {};\n                for (const keyInOverrideRaw in raw[key]) {\n                    overrideRaw[keyInOverrideRaw] = raw[key][keyInOverrideRaw];\n                }\n                overrides.push({\n                    identifiers: overrideIdentifiersFromKey(key),\n                    keys: Object.keys(overrideRaw),\n                    contents: toValuesTree(overrideRaw, conflictReporter)\n                });\n            }\n        }\n        return overrides;\n    }\n}\nclass ConfigurationInspectValue {\n    constructor(key, overrides, _value, overrideIdentifiers, defaultConfiguration, policyConfiguration, applicationConfiguration, userConfiguration, localUserConfiguration, remoteUserConfiguration, workspaceConfiguration, folderConfigurationModel, memoryConfigurationModel) {\n        this.key = key;\n        this.overrides = overrides;\n        this._value = _value;\n        this.overrideIdentifiers = overrideIdentifiers;\n        this.defaultConfiguration = defaultConfiguration;\n        this.policyConfiguration = policyConfiguration;\n        this.applicationConfiguration = applicationConfiguration;\n        this.userConfiguration = userConfiguration;\n        this.localUserConfiguration = localUserConfiguration;\n        this.remoteUserConfiguration = remoteUserConfiguration;\n        this.workspaceConfiguration = workspaceConfiguration;\n        this.folderConfigurationModel = folderConfigurationModel;\n        this.memoryConfigurationModel = memoryConfigurationModel;\n    }\n    inspect(model, section, overrideIdentifier) {\n        const inspectValue = model.inspect(section, overrideIdentifier);\n        return {\n            get value() { return freeze(inspectValue.value); },\n            get override() { return freeze(inspectValue.override); },\n            get merged() { return freeze(inspectValue.merged); }\n        };\n    }\n    get userInspectValue() {\n        if (!this._userInspectValue) {\n            this._userInspectValue = this.inspect(this.userConfiguration, this.key, this.overrides.overrideIdentifier);\n        }\n        return this._userInspectValue;\n    }\n    get user() {\n        return this.userInspectValue.value !== undefined || this.userInspectValue.override !== undefined ? { value: this.userInspectValue.value, override: this.userInspectValue.override } : undefined;\n    }\n}\nexport class Configuration {\n    constructor(_defaultConfiguration, _policyConfiguration, _applicationConfiguration, _localUserConfiguration, _remoteUserConfiguration = new ConfigurationModel(), _workspaceConfiguration = new ConfigurationModel(), _folderConfigurations = new ResourceMap(), _memoryConfiguration = new ConfigurationModel(), _memoryConfigurationByResource = new ResourceMap()) {\n        this._defaultConfiguration = _defaultConfiguration;\n        this._policyConfiguration = _policyConfiguration;\n        this._applicationConfiguration = _applicationConfiguration;\n        this._localUserConfiguration = _localUserConfiguration;\n        this._remoteUserConfiguration = _remoteUserConfiguration;\n        this._workspaceConfiguration = _workspaceConfiguration;\n        this._folderConfigurations = _folderConfigurations;\n        this._memoryConfiguration = _memoryConfiguration;\n        this._memoryConfigurationByResource = _memoryConfigurationByResource;\n        this._workspaceConsolidatedConfiguration = null;\n        this._foldersConsolidatedConfigurations = new ResourceMap();\n        this._userConfiguration = null;\n    }\n    getValue(section, overrides, workspace) {\n        const consolidateConfigurationModel = this.getConsolidatedConfigurationModel(section, overrides, workspace);\n        return consolidateConfigurationModel.getValue(section);\n    }\n    updateValue(key, value, overrides = {}) {\n        let memoryConfiguration;\n        if (overrides.resource) {\n            memoryConfiguration = this._memoryConfigurationByResource.get(overrides.resource);\n            if (!memoryConfiguration) {\n                memoryConfiguration = new ConfigurationModel();\n                this._memoryConfigurationByResource.set(overrides.resource, memoryConfiguration);\n            }\n        }\n        else {\n            memoryConfiguration = this._memoryConfiguration;\n        }\n        if (value === undefined) {\n            memoryConfiguration.removeValue(key);\n        }\n        else {\n            memoryConfiguration.setValue(key, value);\n        }\n        if (!overrides.resource) {\n            this._workspaceConsolidatedConfiguration = null;\n        }\n    }\n    inspect(key, overrides, workspace) {\n        const consolidateConfigurationModel = this.getConsolidatedConfigurationModel(key, overrides, workspace);\n        const folderConfigurationModel = this.getFolderConfigurationModelForResource(overrides.resource, workspace);\n        const memoryConfigurationModel = overrides.resource ? this._memoryConfigurationByResource.get(overrides.resource) || this._memoryConfiguration : this._memoryConfiguration;\n        const overrideIdentifiers = new Set();\n        for (const override of consolidateConfigurationModel.overrides) {\n            for (const overrideIdentifier of override.identifiers) {\n                if (consolidateConfigurationModel.getOverrideValue(key, overrideIdentifier) !== undefined) {\n                    overrideIdentifiers.add(overrideIdentifier);\n                }\n            }\n        }\n        return new ConfigurationInspectValue(key, overrides, consolidateConfigurationModel.getValue(key), overrideIdentifiers.size ? [...overrideIdentifiers] : undefined, this._defaultConfiguration, this._policyConfiguration.isEmpty() ? undefined : this._policyConfiguration, this.applicationConfiguration.isEmpty() ? undefined : this.applicationConfiguration, this.userConfiguration, this.localUserConfiguration, this.remoteUserConfiguration, workspace ? this._workspaceConfiguration : undefined, folderConfigurationModel ? folderConfigurationModel : undefined, memoryConfigurationModel);\n    }\n    get applicationConfiguration() {\n        return this._applicationConfiguration;\n    }\n    get userConfiguration() {\n        if (!this._userConfiguration) {\n            this._userConfiguration = this._remoteUserConfiguration.isEmpty() ? this._localUserConfiguration : this._localUserConfiguration.merge(this._remoteUserConfiguration);\n        }\n        return this._userConfiguration;\n    }\n    get localUserConfiguration() {\n        return this._localUserConfiguration;\n    }\n    get remoteUserConfiguration() {\n        return this._remoteUserConfiguration;\n    }\n    getConsolidatedConfigurationModel(section, overrides, workspace) {\n        let configurationModel = this.getConsolidatedConfigurationModelForResource(overrides, workspace);\n        if (overrides.overrideIdentifier) {\n            configurationModel = configurationModel.override(overrides.overrideIdentifier);\n        }\n        if (!this._policyConfiguration.isEmpty() && this._policyConfiguration.getValue(section) !== undefined) {\n            configurationModel = configurationModel.merge(this._policyConfiguration);\n        }\n        return configurationModel;\n    }\n    getConsolidatedConfigurationModelForResource({ resource }, workspace) {\n        let consolidateConfiguration = this.getWorkspaceConsolidatedConfiguration();\n        if (workspace && resource) {\n            const root = workspace.getFolder(resource);\n            if (root) {\n                consolidateConfiguration = this.getFolderConsolidatedConfiguration(root.uri) || consolidateConfiguration;\n            }\n            const memoryConfigurationForResource = this._memoryConfigurationByResource.get(resource);\n            if (memoryConfigurationForResource) {\n                consolidateConfiguration = consolidateConfiguration.merge(memoryConfigurationForResource);\n            }\n        }\n        return consolidateConfiguration;\n    }\n    getWorkspaceConsolidatedConfiguration() {\n        if (!this._workspaceConsolidatedConfiguration) {\n            this._workspaceConsolidatedConfiguration = this._defaultConfiguration.merge(this.applicationConfiguration, this.userConfiguration, this._workspaceConfiguration, this._memoryConfiguration);\n        }\n        return this._workspaceConsolidatedConfiguration;\n    }\n    getFolderConsolidatedConfiguration(folder) {\n        let folderConsolidatedConfiguration = this._foldersConsolidatedConfigurations.get(folder);\n        if (!folderConsolidatedConfiguration) {\n            const workspaceConsolidateConfiguration = this.getWorkspaceConsolidatedConfiguration();\n            const folderConfiguration = this._folderConfigurations.get(folder);\n            if (folderConfiguration) {\n                folderConsolidatedConfiguration = workspaceConsolidateConfiguration.merge(folderConfiguration);\n                this._foldersConsolidatedConfigurations.set(folder, folderConsolidatedConfiguration);\n            }\n            else {\n                folderConsolidatedConfiguration = workspaceConsolidateConfiguration;\n            }\n        }\n        return folderConsolidatedConfiguration;\n    }\n    getFolderConfigurationModelForResource(resource, workspace) {\n        if (workspace && resource) {\n            const root = workspace.getFolder(resource);\n            if (root) {\n                return this._folderConfigurations.get(root.uri);\n            }\n        }\n        return undefined;\n    }\n    toData() {\n        return {\n            defaults: {\n                contents: this._defaultConfiguration.contents,\n                overrides: this._defaultConfiguration.overrides,\n                keys: this._defaultConfiguration.keys\n            },\n            policy: {\n                contents: this._policyConfiguration.contents,\n                overrides: this._policyConfiguration.overrides,\n                keys: this._policyConfiguration.keys\n            },\n            application: {\n                contents: this.applicationConfiguration.contents,\n                overrides: this.applicationConfiguration.overrides,\n                keys: this.applicationConfiguration.keys\n            },\n            user: {\n                contents: this.userConfiguration.contents,\n                overrides: this.userConfiguration.overrides,\n                keys: this.userConfiguration.keys\n            },\n            workspace: {\n                contents: this._workspaceConfiguration.contents,\n                overrides: this._workspaceConfiguration.overrides,\n                keys: this._workspaceConfiguration.keys\n            },\n            folders: [...this._folderConfigurations.keys()].reduce((result, folder) => {\n                const { contents, overrides, keys } = this._folderConfigurations.get(folder);\n                result.push([folder, { contents, overrides, keys }]);\n                return result;\n            }, [])\n        };\n    }\n    static parse(data) {\n        const defaultConfiguration = this.parseConfigurationModel(data.defaults);\n        const policyConfiguration = this.parseConfigurationModel(data.policy);\n        const applicationConfiguration = this.parseConfigurationModel(data.application);\n        const userConfiguration = this.parseConfigurationModel(data.user);\n        const workspaceConfiguration = this.parseConfigurationModel(data.workspace);\n        const folders = data.folders.reduce((result, value) => {\n            result.set(URI.revive(value[0]), this.parseConfigurationModel(value[1]));\n            return result;\n        }, new ResourceMap());\n        return new Configuration(defaultConfiguration, policyConfiguration, applicationConfiguration, userConfiguration, new ConfigurationModel(), workspaceConfiguration, folders, new ConfigurationModel(), new ResourceMap());\n    }\n    static parseConfigurationModel(model) {\n        return new ConfigurationModel(model.contents, model.keys, model.overrides);\n    }\n}\nexport class ConfigurationChangeEvent {\n    constructor(change, previous, currentConfiguraiton, currentWorkspace) {\n        this.change = change;\n        this.previous = previous;\n        this.currentConfiguraiton = currentConfiguraiton;\n        this.currentWorkspace = currentWorkspace;\n        this._marker = '\\n';\n        this._markerCode1 = this._marker.charCodeAt(0);\n        this._markerCode2 = '.'.charCodeAt(0);\n        this.affectedKeys = new Set();\n        this._previousConfiguration = undefined;\n        for (const key of change.keys) {\n            this.affectedKeys.add(key);\n        }\n        for (const [, keys] of change.overrides) {\n            for (const key of keys) {\n                this.affectedKeys.add(key);\n            }\n        }\n        // Example: '\\nfoo.bar\\nabc.def\\n'\n        this._affectsConfigStr = this._marker;\n        for (const key of this.affectedKeys) {\n            this._affectsConfigStr += key + this._marker;\n        }\n    }\n    get previousConfiguration() {\n        if (!this._previousConfiguration && this.previous) {\n            this._previousConfiguration = Configuration.parse(this.previous.data);\n        }\n        return this._previousConfiguration;\n    }\n    affectsConfiguration(section, overrides) {\n        var _a;\n        // we have one large string with all keys that have changed. we pad (marker) the section\n        // and check that either find it padded or before a segment character\n        const needle = this._marker + section;\n        const idx = this._affectsConfigStr.indexOf(needle);\n        if (idx < 0) {\n            // NOT: (marker + section)\n            return false;\n        }\n        const pos = idx + needle.length;\n        if (pos >= this._affectsConfigStr.length) {\n            return false;\n        }\n        const code = this._affectsConfigStr.charCodeAt(pos);\n        if (code !== this._markerCode1 && code !== this._markerCode2) {\n            // NOT: section + (marker | segment)\n            return false;\n        }\n        if (overrides) {\n            const value1 = this.previousConfiguration ? this.previousConfiguration.getValue(section, overrides, (_a = this.previous) === null || _a === void 0 ? void 0 : _a.workspace) : undefined;\n            const value2 = this.currentConfiguraiton.getValue(section, overrides, this.currentWorkspace);\n            return !objects.equals(value1, value2);\n        }\n        return true;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { distinct } from '../../../base/common/arrays.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport * as types from '../../../base/common/types.js';\nimport * as nls from '../../../nls.js';\nimport { getLanguageTagSettingPlainKey } from './configuration.js';\nimport { Extensions as JSONExtensions } from '../../jsonschemas/common/jsonContributionRegistry.js';\nimport { Registry } from '../../registry/common/platform.js';\nexport const Extensions = {\n    Configuration: 'base.contributions.configuration'\n};\nexport const allSettings = { properties: {}, patternProperties: {} };\nexport const applicationSettings = { properties: {}, patternProperties: {} };\nexport const machineSettings = { properties: {}, patternProperties: {} };\nexport const machineOverridableSettings = { properties: {}, patternProperties: {} };\nexport const windowSettings = { properties: {}, patternProperties: {} };\nexport const resourceSettings = { properties: {}, patternProperties: {} };\nexport const resourceLanguageSettingsSchemaId = 'vscode://schemas/settings/resourceLanguage';\nconst contributionRegistry = Registry.as(JSONExtensions.JSONContribution);\nclass ConfigurationRegistry {\n    constructor() {\n        this.overrideIdentifiers = new Set();\n        this._onDidSchemaChange = new Emitter();\n        this._onDidUpdateConfiguration = new Emitter();\n        this.configurationDefaultsOverrides = new Map();\n        this.defaultLanguageConfigurationOverridesNode = {\n            id: 'defaultOverrides',\n            title: nls.localize('defaultLanguageConfigurationOverrides.title', \"Default Language Configuration Overrides\"),\n            properties: {}\n        };\n        this.configurationContributors = [this.defaultLanguageConfigurationOverridesNode];\n        this.resourceLanguageSettingsSchema = {\n            properties: {},\n            patternProperties: {},\n            additionalProperties: true,\n            allowTrailingCommas: true,\n            allowComments: true\n        };\n        this.configurationProperties = {};\n        this.policyConfigurations = new Map();\n        this.excludedConfigurationProperties = {};\n        contributionRegistry.registerSchema(resourceLanguageSettingsSchemaId, this.resourceLanguageSettingsSchema);\n        this.registerOverridePropertyPatternKey();\n    }\n    registerConfiguration(configuration, validate = true) {\n        this.registerConfigurations([configuration], validate);\n    }\n    registerConfigurations(configurations, validate = true) {\n        const properties = new Set();\n        this.doRegisterConfigurations(configurations, validate, properties);\n        contributionRegistry.registerSchema(resourceLanguageSettingsSchemaId, this.resourceLanguageSettingsSchema);\n        this._onDidSchemaChange.fire();\n        this._onDidUpdateConfiguration.fire({ properties });\n    }\n    registerDefaultConfigurations(configurationDefaults) {\n        const properties = new Set();\n        this.doRegisterDefaultConfigurations(configurationDefaults, properties);\n        this._onDidSchemaChange.fire();\n        this._onDidUpdateConfiguration.fire({ properties, defaultsOverrides: true });\n    }\n    doRegisterDefaultConfigurations(configurationDefaults, bucket) {\n        var _a;\n        const overrideIdentifiers = [];\n        for (const { overrides, source } of configurationDefaults) {\n            for (const key in overrides) {\n                bucket.add(key);\n                if (OVERRIDE_PROPERTY_REGEX.test(key)) {\n                    const configurationDefaultOverride = this.configurationDefaultsOverrides.get(key);\n                    const valuesSources = (_a = configurationDefaultOverride === null || configurationDefaultOverride === void 0 ? void 0 : configurationDefaultOverride.valuesSources) !== null && _a !== void 0 ? _a : new Map();\n                    if (source) {\n                        for (const configuration of Object.keys(overrides[key])) {\n                            valuesSources.set(configuration, source);\n                        }\n                    }\n                    const defaultValue = Object.assign(Object.assign({}, ((configurationDefaultOverride === null || configurationDefaultOverride === void 0 ? void 0 : configurationDefaultOverride.value) || {})), overrides[key]);\n                    this.configurationDefaultsOverrides.set(key, { source, value: defaultValue, valuesSources });\n                    const plainKey = getLanguageTagSettingPlainKey(key);\n                    const property = {\n                        type: 'object',\n                        default: defaultValue,\n                        description: nls.localize('defaultLanguageConfiguration.description', \"Configure settings to be overridden for the {0} language.\", plainKey),\n                        $ref: resourceLanguageSettingsSchemaId,\n                        defaultDefaultValue: defaultValue,\n                        source: types.isString(source) ? undefined : source,\n                        defaultValueSource: source\n                    };\n                    overrideIdentifiers.push(...overrideIdentifiersFromKey(key));\n                    this.configurationProperties[key] = property;\n                    this.defaultLanguageConfigurationOverridesNode.properties[key] = property;\n                }\n                else {\n                    this.configurationDefaultsOverrides.set(key, { value: overrides[key], source });\n                    const property = this.configurationProperties[key];\n                    if (property) {\n                        this.updatePropertyDefaultValue(key, property);\n                        this.updateSchema(key, property);\n                    }\n                }\n            }\n        }\n        this.doRegisterOverrideIdentifiers(overrideIdentifiers);\n    }\n    registerOverrideIdentifiers(overrideIdentifiers) {\n        this.doRegisterOverrideIdentifiers(overrideIdentifiers);\n        this._onDidSchemaChange.fire();\n    }\n    doRegisterOverrideIdentifiers(overrideIdentifiers) {\n        for (const overrideIdentifier of overrideIdentifiers) {\n            this.overrideIdentifiers.add(overrideIdentifier);\n        }\n        this.updateOverridePropertyPatternKey();\n    }\n    doRegisterConfigurations(configurations, validate, bucket) {\n        configurations.forEach(configuration => {\n            this.validateAndRegisterProperties(configuration, validate, configuration.extensionInfo, configuration.restrictedProperties, undefined, bucket);\n            this.configurationContributors.push(configuration);\n            this.registerJSONConfiguration(configuration);\n        });\n    }\n    validateAndRegisterProperties(configuration, validate = true, extensionInfo, restrictedProperties, scope = 3 /* ConfigurationScope.WINDOW */, bucket) {\n        var _a;\n        scope = types.isUndefinedOrNull(configuration.scope) ? scope : configuration.scope;\n        const properties = configuration.properties;\n        if (properties) {\n            for (const key in properties) {\n                const property = properties[key];\n                if (validate && validateProperty(key, property)) {\n                    delete properties[key];\n                    continue;\n                }\n                property.source = extensionInfo;\n                // update default value\n                property.defaultDefaultValue = properties[key].default;\n                this.updatePropertyDefaultValue(key, property);\n                // update scope\n                if (OVERRIDE_PROPERTY_REGEX.test(key)) {\n                    property.scope = undefined; // No scope for overridable properties `[${identifier}]`\n                }\n                else {\n                    property.scope = types.isUndefinedOrNull(property.scope) ? scope : property.scope;\n                    property.restricted = types.isUndefinedOrNull(property.restricted) ? !!(restrictedProperties === null || restrictedProperties === void 0 ? void 0 : restrictedProperties.includes(key)) : property.restricted;\n                }\n                // Add to properties maps\n                // Property is included by default if 'included' is unspecified\n                if (properties[key].hasOwnProperty('included') && !properties[key].included) {\n                    this.excludedConfigurationProperties[key] = properties[key];\n                    delete properties[key];\n                    continue;\n                }\n                else {\n                    this.configurationProperties[key] = properties[key];\n                    if ((_a = properties[key].policy) === null || _a === void 0 ? void 0 : _a.name) {\n                        this.policyConfigurations.set(properties[key].policy.name, key);\n                    }\n                }\n                if (!properties[key].deprecationMessage && properties[key].markdownDeprecationMessage) {\n                    // If not set, default deprecationMessage to the markdown source\n                    properties[key].deprecationMessage = properties[key].markdownDeprecationMessage;\n                }\n                bucket.add(key);\n            }\n        }\n        const subNodes = configuration.allOf;\n        if (subNodes) {\n            for (const node of subNodes) {\n                this.validateAndRegisterProperties(node, validate, extensionInfo, restrictedProperties, scope, bucket);\n            }\n        }\n    }\n    getConfigurationProperties() {\n        return this.configurationProperties;\n    }\n    getPolicyConfigurations() {\n        return this.policyConfigurations;\n    }\n    registerJSONConfiguration(configuration) {\n        const register = (configuration) => {\n            const properties = configuration.properties;\n            if (properties) {\n                for (const key in properties) {\n                    this.updateSchema(key, properties[key]);\n                }\n            }\n            const subNodes = configuration.allOf;\n            subNodes === null || subNodes === void 0 ? void 0 : subNodes.forEach(register);\n        };\n        register(configuration);\n    }\n    updateSchema(key, property) {\n        allSettings.properties[key] = property;\n        switch (property.scope) {\n            case 1 /* ConfigurationScope.APPLICATION */:\n                applicationSettings.properties[key] = property;\n                break;\n            case 2 /* ConfigurationScope.MACHINE */:\n                machineSettings.properties[key] = property;\n                break;\n            case 6 /* ConfigurationScope.MACHINE_OVERRIDABLE */:\n                machineOverridableSettings.properties[key] = property;\n                break;\n            case 3 /* ConfigurationScope.WINDOW */:\n                windowSettings.properties[key] = property;\n                break;\n            case 4 /* ConfigurationScope.RESOURCE */:\n                resourceSettings.properties[key] = property;\n                break;\n            case 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */:\n                resourceSettings.properties[key] = property;\n                this.resourceLanguageSettingsSchema.properties[key] = property;\n                break;\n        }\n    }\n    updateOverridePropertyPatternKey() {\n        for (const overrideIdentifier of this.overrideIdentifiers.values()) {\n            const overrideIdentifierProperty = `[${overrideIdentifier}]`;\n            const resourceLanguagePropertiesSchema = {\n                type: 'object',\n                description: nls.localize('overrideSettings.defaultDescription', \"Configure editor settings to be overridden for a language.\"),\n                errorMessage: nls.localize('overrideSettings.errorMessage', \"This setting does not support per-language configuration.\"),\n                $ref: resourceLanguageSettingsSchemaId,\n            };\n            this.updatePropertyDefaultValue(overrideIdentifierProperty, resourceLanguagePropertiesSchema);\n            allSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n            applicationSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n            machineSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n            machineOverridableSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n            windowSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n            resourceSettings.properties[overrideIdentifierProperty] = resourceLanguagePropertiesSchema;\n        }\n    }\n    registerOverridePropertyPatternKey() {\n        const resourceLanguagePropertiesSchema = {\n            type: 'object',\n            description: nls.localize('overrideSettings.defaultDescription', \"Configure editor settings to be overridden for a language.\"),\n            errorMessage: nls.localize('overrideSettings.errorMessage', \"This setting does not support per-language configuration.\"),\n            $ref: resourceLanguageSettingsSchemaId,\n        };\n        allSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n        applicationSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n        machineSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n        machineOverridableSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n        windowSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n        resourceSettings.patternProperties[OVERRIDE_PROPERTY_PATTERN] = resourceLanguagePropertiesSchema;\n        this._onDidSchemaChange.fire();\n    }\n    updatePropertyDefaultValue(key, property) {\n        const configurationdefaultOverride = this.configurationDefaultsOverrides.get(key);\n        let defaultValue = configurationdefaultOverride === null || configurationdefaultOverride === void 0 ? void 0 : configurationdefaultOverride.value;\n        let defaultSource = configurationdefaultOverride === null || configurationdefaultOverride === void 0 ? void 0 : configurationdefaultOverride.source;\n        if (types.isUndefined(defaultValue)) {\n            defaultValue = property.defaultDefaultValue;\n            defaultSource = undefined;\n        }\n        if (types.isUndefined(defaultValue)) {\n            defaultValue = getDefaultValue(property.type);\n        }\n        property.default = defaultValue;\n        property.defaultValueSource = defaultSource;\n    }\n}\nconst OVERRIDE_IDENTIFIER_PATTERN = `\\\\[([^\\\\]]+)\\\\]`;\nconst OVERRIDE_IDENTIFIER_REGEX = new RegExp(OVERRIDE_IDENTIFIER_PATTERN, 'g');\nexport const OVERRIDE_PROPERTY_PATTERN = `^(${OVERRIDE_IDENTIFIER_PATTERN})+$`;\nexport const OVERRIDE_PROPERTY_REGEX = new RegExp(OVERRIDE_PROPERTY_PATTERN);\nexport function overrideIdentifiersFromKey(key) {\n    const identifiers = [];\n    if (OVERRIDE_PROPERTY_REGEX.test(key)) {\n        let matches = OVERRIDE_IDENTIFIER_REGEX.exec(key);\n        while (matches === null || matches === void 0 ? void 0 : matches.length) {\n            const identifier = matches[1].trim();\n            if (identifier) {\n                identifiers.push(identifier);\n            }\n            matches = OVERRIDE_IDENTIFIER_REGEX.exec(key);\n        }\n    }\n    return distinct(identifiers);\n}\nexport function getDefaultValue(type) {\n    const t = Array.isArray(type) ? type[0] : type;\n    switch (t) {\n        case 'boolean':\n            return false;\n        case 'integer':\n        case 'number':\n            return 0;\n        case 'string':\n            return '';\n        case 'array':\n            return [];\n        case 'object':\n            return {};\n        default:\n            return null;\n    }\n}\nconst configurationRegistry = new ConfigurationRegistry();\nRegistry.add(Extensions.Configuration, configurationRegistry);\nexport function validateProperty(property, schema) {\n    var _a, _b, _c, _d;\n    if (!property.trim()) {\n        return nls.localize('config.property.empty', \"Cannot register an empty property\");\n    }\n    if (OVERRIDE_PROPERTY_REGEX.test(property)) {\n        return nls.localize('config.property.languageDefault', \"Cannot register '{0}'. This matches property pattern '\\\\\\\\[.*\\\\\\\\]$' for describing language specific editor settings. Use 'configurationDefaults' contribution.\", property);\n    }\n    if (configurationRegistry.getConfigurationProperties()[property] !== undefined) {\n        return nls.localize('config.property.duplicate', \"Cannot register '{0}'. This property is already registered.\", property);\n    }\n    if (((_a = schema.policy) === null || _a === void 0 ? void 0 : _a.name) && configurationRegistry.getPolicyConfigurations().get((_b = schema.policy) === null || _b === void 0 ? void 0 : _b.name) !== undefined) {\n        return nls.localize('config.policy.duplicate', \"Cannot register '{0}'. The associated policy {1} is already registered with {2}.\", property, (_c = schema.policy) === null || _c === void 0 ? void 0 : _c.name, configurationRegistry.getPolicyConfigurations().get((_d = schema.policy) === null || _d === void 0 ? void 0 : _d.name));\n    }\n    return null;\n}\n","import { Disposable } from '../../../base/common/lifecycle.js';\nimport { ConfigurationModel } from './configurationModels.js';\nimport { Extensions } from './configurationRegistry.js';\nimport { Registry } from '../../registry/common/platform.js';\nexport class DefaultConfiguration extends Disposable {\n    constructor() {\n        super(...arguments);\n        this._configurationModel = new ConfigurationModel();\n    }\n    get configurationModel() {\n        return this._configurationModel;\n    }\n    reload() {\n        this.resetConfigurationModel();\n        return this.configurationModel;\n    }\n    getConfigurationDefaultOverrides() {\n        return {};\n    }\n    resetConfigurationModel() {\n        this._configurationModel = new ConfigurationModel();\n        const properties = Registry.as(Extensions.Configuration).getConfigurationProperties();\n        this.updateConfigurationModel(Object.keys(properties), properties);\n    }\n    updateConfigurationModel(properties, configurationProperties) {\n        const configurationDefaultsOverrides = this.getConfigurationDefaultOverrides();\n        for (const key of properties) {\n            const defaultOverrideValue = configurationDefaultsOverrides[key];\n            const propertySchema = configurationProperties[key];\n            if (defaultOverrideValue !== undefined) {\n                this._configurationModel.addValue(key, defaultOverrideValue);\n            }\n            else if (propertySchema) {\n                this._configurationModel.addValue(key, propertySchema.default);\n            }\n            else {\n                this._configurationModel.removeValue(key);\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { PauseableEmitter } from '../../../base/common/event.js';\nimport { Iterable } from '../../../base/common/iterator.js';\nimport { Disposable, MutableDisposable } from '../../../base/common/lifecycle.js';\nimport { cloneAndChange } from '../../../base/common/objects.js';\nimport { TernarySearchTree } from '../../../base/common/ternarySearchTree.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { localize } from '../../../nls.js';\nimport { CommandsRegistry } from '../../commands/common/commands.js';\nimport { IConfigurationService } from '../../configuration/common/configuration.js';\nimport { IContextKeyService, RawContextKey } from '../common/contextkey.js';\nconst KEYBINDING_CONTEXT_ATTR = 'data-keybinding-context';\nexport class Context {\n    constructor(id, parent) {\n        this._id = id;\n        this._parent = parent;\n        this._value = Object.create(null);\n        this._value['_contextId'] = id;\n    }\n    get value() {\n        return Object.assign({}, this._value);\n    }\n    setValue(key, value) {\n        // console.log('SET ' + key + ' = ' + value + ' ON ' + this._id);\n        if (this._value[key] !== value) {\n            this._value[key] = value;\n            return true;\n        }\n        return false;\n    }\n    removeValue(key) {\n        // console.log('REMOVE ' + key + ' FROM ' + this._id);\n        if (key in this._value) {\n            delete this._value[key];\n            return true;\n        }\n        return false;\n    }\n    getValue(key) {\n        const ret = this._value[key];\n        if (typeof ret === 'undefined' && this._parent) {\n            return this._parent.getValue(key);\n        }\n        return ret;\n    }\n}\nclass NullContext extends Context {\n    constructor() {\n        super(-1, null);\n    }\n    setValue(key, value) {\n        return false;\n    }\n    removeValue(key) {\n        return false;\n    }\n    getValue(key) {\n        return undefined;\n    }\n}\nNullContext.INSTANCE = new NullContext();\nclass ConfigAwareContextValuesContainer extends Context {\n    constructor(id, _configurationService, emitter) {\n        super(id, null);\n        this._configurationService = _configurationService;\n        this._values = TernarySearchTree.forConfigKeys();\n        this._listener = this._configurationService.onDidChangeConfiguration(event => {\n            if (event.source === 7 /* ConfigurationTarget.DEFAULT */) {\n                // new setting, reset everything\n                const allKeys = Array.from(this._values, ([k]) => k);\n                this._values.clear();\n                emitter.fire(new ArrayContextKeyChangeEvent(allKeys));\n            }\n            else {\n                const changedKeys = [];\n                for (const configKey of event.affectedKeys) {\n                    const contextKey = `config.${configKey}`;\n                    const cachedItems = this._values.findSuperstr(contextKey);\n                    if (cachedItems !== undefined) {\n                        changedKeys.push(...Iterable.map(cachedItems, ([key]) => key));\n                        this._values.deleteSuperstr(contextKey);\n                    }\n                    if (this._values.has(contextKey)) {\n                        changedKeys.push(contextKey);\n                        this._values.delete(contextKey);\n                    }\n                }\n                emitter.fire(new ArrayContextKeyChangeEvent(changedKeys));\n            }\n        });\n    }\n    dispose() {\n        this._listener.dispose();\n    }\n    getValue(key) {\n        if (key.indexOf(ConfigAwareContextValuesContainer._keyPrefix) !== 0) {\n            return super.getValue(key);\n        }\n        if (this._values.has(key)) {\n            return this._values.get(key);\n        }\n        const configKey = key.substr(ConfigAwareContextValuesContainer._keyPrefix.length);\n        const configValue = this._configurationService.getValue(configKey);\n        let value = undefined;\n        switch (typeof configValue) {\n            case 'number':\n            case 'boolean':\n            case 'string':\n                value = configValue;\n                break;\n            default:\n                if (Array.isArray(configValue)) {\n                    value = JSON.stringify(configValue);\n                }\n                else {\n                    value = configValue;\n                }\n        }\n        this._values.set(key, value);\n        return value;\n    }\n    setValue(key, value) {\n        return super.setValue(key, value);\n    }\n    removeValue(key) {\n        return super.removeValue(key);\n    }\n}\nConfigAwareContextValuesContainer._keyPrefix = 'config.';\nclass ContextKey {\n    constructor(service, key, defaultValue) {\n        this._service = service;\n        this._key = key;\n        this._defaultValue = defaultValue;\n        this.reset();\n    }\n    set(value) {\n        this._service.setContext(this._key, value);\n    }\n    reset() {\n        if (typeof this._defaultValue === 'undefined') {\n            this._service.removeContext(this._key);\n        }\n        else {\n            this._service.setContext(this._key, this._defaultValue);\n        }\n    }\n    get() {\n        return this._service.getContextKeyValue(this._key);\n    }\n}\nclass SimpleContextKeyChangeEvent {\n    constructor(key) {\n        this.key = key;\n    }\n    affectsSome(keys) {\n        return keys.has(this.key);\n    }\n    allKeysContainedIn(keys) {\n        return this.affectsSome(keys);\n    }\n}\nclass ArrayContextKeyChangeEvent {\n    constructor(keys) {\n        this.keys = keys;\n    }\n    affectsSome(keys) {\n        for (const key of this.keys) {\n            if (keys.has(key)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    allKeysContainedIn(keys) {\n        return this.keys.every(key => keys.has(key));\n    }\n}\nclass CompositeContextKeyChangeEvent {\n    constructor(events) {\n        this.events = events;\n    }\n    affectsSome(keys) {\n        for (const e of this.events) {\n            if (e.affectsSome(keys)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    allKeysContainedIn(keys) {\n        return this.events.every(evt => evt.allKeysContainedIn(keys));\n    }\n}\nfunction allEventKeysInContext(event, context) {\n    return event.allKeysContainedIn(new Set(Object.keys(context)));\n}\nexport class AbstractContextKeyService extends Disposable {\n    constructor(myContextId) {\n        super();\n        this._onDidChangeContext = this._register(new PauseableEmitter({ merge: input => new CompositeContextKeyChangeEvent(input) }));\n        this.onDidChangeContext = this._onDidChangeContext.event;\n        this._isDisposed = false;\n        this._myContextId = myContextId;\n    }\n    createKey(key, defaultValue) {\n        if (this._isDisposed) {\n            throw new Error(`AbstractContextKeyService has been disposed`);\n        }\n        return new ContextKey(this, key, defaultValue);\n    }\n    bufferChangeEvents(callback) {\n        this._onDidChangeContext.pause();\n        try {\n            callback();\n        }\n        finally {\n            this._onDidChangeContext.resume();\n        }\n    }\n    createScoped(domNode) {\n        if (this._isDisposed) {\n            throw new Error(`AbstractContextKeyService has been disposed`);\n        }\n        return new ScopedContextKeyService(this, domNode);\n    }\n    contextMatchesRules(rules) {\n        if (this._isDisposed) {\n            throw new Error(`AbstractContextKeyService has been disposed`);\n        }\n        const context = this.getContextValuesContainer(this._myContextId);\n        const result = (rules ? rules.evaluate(context) : true);\n        // console.group(rules.serialize() + ' -> ' + result);\n        // rules.keys().forEach(key => { console.log(key, ctx[key]); });\n        // console.groupEnd();\n        return result;\n    }\n    getContextKeyValue(key) {\n        if (this._isDisposed) {\n            return undefined;\n        }\n        return this.getContextValuesContainer(this._myContextId).getValue(key);\n    }\n    setContext(key, value) {\n        if (this._isDisposed) {\n            return;\n        }\n        const myContext = this.getContextValuesContainer(this._myContextId);\n        if (!myContext) {\n            return;\n        }\n        if (myContext.setValue(key, value)) {\n            this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));\n        }\n    }\n    removeContext(key) {\n        if (this._isDisposed) {\n            return;\n        }\n        if (this.getContextValuesContainer(this._myContextId).removeValue(key)) {\n            this._onDidChangeContext.fire(new SimpleContextKeyChangeEvent(key));\n        }\n    }\n    getContext(target) {\n        if (this._isDisposed) {\n            return NullContext.INSTANCE;\n        }\n        return this.getContextValuesContainer(findContextAttr(target));\n    }\n    dispose() {\n        super.dispose();\n        this._isDisposed = true;\n    }\n}\nlet ContextKeyService = class ContextKeyService extends AbstractContextKeyService {\n    constructor(configurationService) {\n        super(0);\n        this._contexts = new Map();\n        this._lastContextId = 0;\n        const myContext = this._register(new ConfigAwareContextValuesContainer(this._myContextId, configurationService, this._onDidChangeContext));\n        this._contexts.set(this._myContextId, myContext);\n        // Uncomment this to see the contexts continuously logged\n        // let lastLoggedValue: string | null = null;\n        // setInterval(() => {\n        // \tlet values = Object.keys(this._contexts).map((key) => this._contexts[key]);\n        // \tlet logValue = values.map(v => JSON.stringify(v._value, null, '\\t')).join('\\n');\n        // \tif (lastLoggedValue !== logValue) {\n        // \t\tlastLoggedValue = logValue;\n        // \t\tconsole.log(lastLoggedValue);\n        // \t}\n        // }, 2000);\n    }\n    getContextValuesContainer(contextId) {\n        if (this._isDisposed) {\n            return NullContext.INSTANCE;\n        }\n        return this._contexts.get(contextId) || NullContext.INSTANCE;\n    }\n    createChildContext(parentContextId = this._myContextId) {\n        if (this._isDisposed) {\n            throw new Error(`ContextKeyService has been disposed`);\n        }\n        const id = (++this._lastContextId);\n        this._contexts.set(id, new Context(id, this.getContextValuesContainer(parentContextId)));\n        return id;\n    }\n    disposeContext(contextId) {\n        if (!this._isDisposed) {\n            this._contexts.delete(contextId);\n        }\n    }\n};\nContextKeyService = __decorate([\n    __param(0, IConfigurationService)\n], ContextKeyService);\nexport { ContextKeyService };\nclass ScopedContextKeyService extends AbstractContextKeyService {\n    constructor(parent, domNode) {\n        super(parent.createChildContext());\n        this._parentChangeListener = this._register(new MutableDisposable());\n        this._parent = parent;\n        this._updateParentChangeListener();\n        this._domNode = domNode;\n        if (this._domNode.hasAttribute(KEYBINDING_CONTEXT_ATTR)) {\n            let extraInfo = '';\n            if (this._domNode.classList) {\n                extraInfo = Array.from(this._domNode.classList.values()).join(', ');\n            }\n            console.error(`Element already has context attribute${extraInfo ? ': ' + extraInfo : ''}`);\n        }\n        this._domNode.setAttribute(KEYBINDING_CONTEXT_ATTR, String(this._myContextId));\n    }\n    _updateParentChangeListener() {\n        // Forward parent events to this listener. Parent will change.\n        this._parentChangeListener.value = this._parent.onDidChangeContext(e => {\n            const thisContainer = this._parent.getContextValuesContainer(this._myContextId);\n            const thisContextValues = thisContainer.value;\n            if (!allEventKeysInContext(e, thisContextValues)) {\n                this._onDidChangeContext.fire(e);\n            }\n        });\n    }\n    dispose() {\n        if (this._isDisposed) {\n            return;\n        }\n        this._parent.disposeContext(this._myContextId);\n        this._domNode.removeAttribute(KEYBINDING_CONTEXT_ATTR);\n        super.dispose();\n    }\n    getContextValuesContainer(contextId) {\n        if (this._isDisposed) {\n            return NullContext.INSTANCE;\n        }\n        return this._parent.getContextValuesContainer(contextId);\n    }\n    createChildContext(parentContextId = this._myContextId) {\n        if (this._isDisposed) {\n            throw new Error(`ScopedContextKeyService has been disposed`);\n        }\n        return this._parent.createChildContext(parentContextId);\n    }\n    disposeContext(contextId) {\n        if (this._isDisposed) {\n            return;\n        }\n        this._parent.disposeContext(contextId);\n    }\n}\nfunction findContextAttr(domNode) {\n    while (domNode) {\n        if (domNode.hasAttribute(KEYBINDING_CONTEXT_ATTR)) {\n            const attr = domNode.getAttribute(KEYBINDING_CONTEXT_ATTR);\n            if (attr) {\n                return parseInt(attr, 10);\n            }\n            return NaN;\n        }\n        domNode = domNode.parentElement;\n    }\n    return 0;\n}\nexport function setContext(accessor, contextKey, contextValue) {\n    const contextKeyService = accessor.get(IContextKeyService);\n    contextKeyService.createKey(String(contextKey), stringifyURIs(contextValue));\n}\nfunction stringifyURIs(contextValue) {\n    return cloneAndChange(contextValue, (obj) => {\n        if (typeof obj === 'object' && obj.$mid === 1 /* MarshalledId.Uri */) {\n            return URI.revive(obj).toString();\n        }\n        if (obj instanceof URI) {\n            return obj.toString();\n        }\n        return undefined;\n    });\n}\nCommandsRegistry.registerCommand('_setContext', setContext);\nCommandsRegistry.registerCommand({\n    id: 'getContextKeyInfo',\n    handler() {\n        return [...RawContextKey.all()].sort((a, b) => a.key.localeCompare(b.key));\n    },\n    description: {\n        description: localize('getContextKeyInfo', \"A command that returns information about context keys\"),\n        args: []\n    }\n});\nCommandsRegistry.registerCommand('_generateContextKeyInfo', function () {\n    const result = [];\n    const seen = new Set();\n    for (const info of RawContextKey.all()) {\n        if (!seen.has(info.key)) {\n            seen.add(info.key);\n            result.push(info);\n        }\n    }\n    result.sort((a, b) => a.key.localeCompare(b.key));\n    console.log(JSON.stringify(result, undefined, 2));\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { illegalState } from '../../../base/common/errors.js';\nimport { localize } from '../../../nls.js';\nfunction hintDidYouMean(...meant) {\n    switch (meant.length) {\n        case 1:\n            return localize('contextkey.scanner.hint.didYouMean1', \"Did you mean {0}?\", meant[0]);\n        case 2:\n            return localize('contextkey.scanner.hint.didYouMean2', \"Did you mean {0} or {1}?\", meant[0], meant[1]);\n        case 3:\n            return localize('contextkey.scanner.hint.didYouMean3', \"Did you mean {0}, {1} or {2}?\", meant[0], meant[1], meant[2]);\n        default: // we just don't expect that many\n            return undefined;\n    }\n}\nconst hintDidYouForgetToOpenOrCloseQuote = localize('contextkey.scanner.hint.didYouForgetToOpenOrCloseQuote', \"Did you forget to open or close the quote?\");\nconst hintDidYouForgetToEscapeSlash = localize('contextkey.scanner.hint.didYouForgetToEscapeSlash', \"Did you forget to escape the '/' (slash) character? Put two backslashes before it to escape, e.g., '\\\\\\\\/\\'.\");\n/**\n * A simple scanner for context keys.\n *\n * Example:\n *\n * ```ts\n * const scanner = new Scanner().reset('resourceFileName =~ /docker/ && !config.docker.enabled');\n * const tokens = [...scanner];\n * if (scanner.errorTokens.length > 0) {\n *     scanner.errorTokens.forEach(err => console.error(`Unexpected token at ${err.offset}: ${err.lexeme}\\nHint: ${err.additional}`));\n * } else {\n *     // process tokens\n * }\n * ```\n */\nexport class Scanner {\n    constructor() {\n        this._input = '';\n        this._start = 0;\n        this._current = 0;\n        this._tokens = [];\n        this._errors = [];\n        // u - unicode, y - sticky // TODO@ulugbekna: we accept double quotes as part of the string rather than as a delimiter (to preserve old parser's behavior)\n        this.stringRe = /[a-zA-Z0-9_<>\\-\\./\\\\:\\*\\?\\+\\[\\]\\^,#@;\"%\\$\\p{L}-]+/uy;\n    }\n    static getLexeme(token) {\n        switch (token.type) {\n            case 0 /* TokenType.LParen */:\n                return '(';\n            case 1 /* TokenType.RParen */:\n                return ')';\n            case 2 /* TokenType.Neg */:\n                return '!';\n            case 3 /* TokenType.Eq */:\n                return token.isTripleEq ? '===' : '==';\n            case 4 /* TokenType.NotEq */:\n                return token.isTripleEq ? '!==' : '!=';\n            case 5 /* TokenType.Lt */:\n                return '<';\n            case 6 /* TokenType.LtEq */:\n                return '<=';\n            case 7 /* TokenType.Gt */:\n                return '>=';\n            case 8 /* TokenType.GtEq */:\n                return '>=';\n            case 9 /* TokenType.RegexOp */:\n                return '=~';\n            case 10 /* TokenType.RegexStr */:\n                return token.lexeme;\n            case 11 /* TokenType.True */:\n                return 'true';\n            case 12 /* TokenType.False */:\n                return 'false';\n            case 13 /* TokenType.In */:\n                return 'in';\n            case 14 /* TokenType.Not */:\n                return 'not';\n            case 15 /* TokenType.And */:\n                return '&&';\n            case 16 /* TokenType.Or */:\n                return '||';\n            case 17 /* TokenType.Str */:\n                return token.lexeme;\n            case 18 /* TokenType.QuotedStr */:\n                return token.lexeme;\n            case 19 /* TokenType.Error */:\n                return token.lexeme;\n            case 20 /* TokenType.EOF */:\n                return 'EOF';\n            default:\n                throw illegalState(`unhandled token type: ${JSON.stringify(token)}; have you forgotten to add a case?`);\n        }\n    }\n    reset(value) {\n        this._input = value;\n        this._start = 0;\n        this._current = 0;\n        this._tokens = [];\n        this._errors = [];\n        return this;\n    }\n    scan() {\n        while (!this._isAtEnd()) {\n            this._start = this._current;\n            const ch = this._advance();\n            switch (ch) {\n                case 40 /* CharCode.OpenParen */:\n                    this._addToken(0 /* TokenType.LParen */);\n                    break;\n                case 41 /* CharCode.CloseParen */:\n                    this._addToken(1 /* TokenType.RParen */);\n                    break;\n                case 33 /* CharCode.ExclamationMark */:\n                    if (this._match(61 /* CharCode.Equals */)) {\n                        const isTripleEq = this._match(61 /* CharCode.Equals */); // eat last `=` if `!==`\n                        this._tokens.push({ type: 4 /* TokenType.NotEq */, offset: this._start, isTripleEq });\n                    }\n                    else {\n                        this._addToken(2 /* TokenType.Neg */);\n                    }\n                    break;\n                case 39 /* CharCode.SingleQuote */:\n                    this._quotedString();\n                    break;\n                case 47 /* CharCode.Slash */:\n                    this._regex();\n                    break;\n                case 61 /* CharCode.Equals */:\n                    if (this._match(61 /* CharCode.Equals */)) { // support `==`\n                        const isTripleEq = this._match(61 /* CharCode.Equals */); // eat last `=` if `===`\n                        this._tokens.push({ type: 3 /* TokenType.Eq */, offset: this._start, isTripleEq });\n                    }\n                    else if (this._match(126 /* CharCode.Tilde */)) {\n                        this._addToken(9 /* TokenType.RegexOp */);\n                    }\n                    else {\n                        this._error(hintDidYouMean('==', '=~'));\n                    }\n                    break;\n                case 60 /* CharCode.LessThan */:\n                    this._addToken(this._match(61 /* CharCode.Equals */) ? 6 /* TokenType.LtEq */ : 5 /* TokenType.Lt */);\n                    break;\n                case 62 /* CharCode.GreaterThan */:\n                    this._addToken(this._match(61 /* CharCode.Equals */) ? 8 /* TokenType.GtEq */ : 7 /* TokenType.Gt */);\n                    break;\n                case 38 /* CharCode.Ampersand */:\n                    if (this._match(38 /* CharCode.Ampersand */)) {\n                        this._addToken(15 /* TokenType.And */);\n                    }\n                    else {\n                        this._error(hintDidYouMean('&&'));\n                    }\n                    break;\n                case 124 /* CharCode.Pipe */:\n                    if (this._match(124 /* CharCode.Pipe */)) {\n                        this._addToken(16 /* TokenType.Or */);\n                    }\n                    else {\n                        this._error(hintDidYouMean('||'));\n                    }\n                    break;\n                // TODO@ulugbekna: 1) rewrite using a regex 2) reconsider what characters are considered whitespace, including unicode, nbsp, etc.\n                case 32 /* CharCode.Space */:\n                case 13 /* CharCode.CarriageReturn */:\n                case 9 /* CharCode.Tab */:\n                case 10 /* CharCode.LineFeed */:\n                case 160 /* CharCode.NoBreakSpace */: // &nbsp\n                    break;\n                default:\n                    this._string();\n            }\n        }\n        this._start = this._current;\n        this._addToken(20 /* TokenType.EOF */);\n        return Array.from(this._tokens);\n    }\n    _match(expected) {\n        if (this._isAtEnd()) {\n            return false;\n        }\n        if (this._input.charCodeAt(this._current) !== expected) {\n            return false;\n        }\n        this._current++;\n        return true;\n    }\n    _advance() {\n        return this._input.charCodeAt(this._current++);\n    }\n    _peek() {\n        return this._isAtEnd() ? 0 /* CharCode.Null */ : this._input.charCodeAt(this._current);\n    }\n    _addToken(type) {\n        this._tokens.push({ type, offset: this._start });\n    }\n    _error(additional) {\n        const offset = this._start;\n        const lexeme = this._input.substring(this._start, this._current);\n        const errToken = { type: 19 /* TokenType.Error */, offset: this._start, lexeme };\n        this._errors.push({ offset, lexeme, additionalInfo: additional });\n        this._tokens.push(errToken);\n    }\n    _string() {\n        this.stringRe.lastIndex = this._start;\n        const match = this.stringRe.exec(this._input);\n        if (match) {\n            this._current = this._start + match[0].length;\n            const lexeme = this._input.substring(this._start, this._current);\n            const keyword = Scanner._keywords.get(lexeme);\n            if (keyword) {\n                this._addToken(keyword);\n            }\n            else {\n                this._tokens.push({ type: 17 /* TokenType.Str */, lexeme, offset: this._start });\n            }\n        }\n    }\n    // captures the lexeme without the leading and trailing '\n    _quotedString() {\n        while (this._peek() !== 39 /* CharCode.SingleQuote */ && !this._isAtEnd()) { // TODO@ulugbekna: add support for escaping ' ?\n            this._advance();\n        }\n        if (this._isAtEnd()) {\n            this._error(hintDidYouForgetToOpenOrCloseQuote);\n            return;\n        }\n        // consume the closing '\n        this._advance();\n        this._tokens.push({ type: 18 /* TokenType.QuotedStr */, lexeme: this._input.substring(this._start + 1, this._current - 1), offset: this._start + 1 });\n    }\n    /*\n     * Lexing a regex expression: /.../[igsmyu]*\n     * Based on https://github.com/microsoft/TypeScript/blob/9247ef115e617805983740ba795d7a8164babf89/src/compiler/scanner.ts#L2129-L2181\n     *\n     * Note that we want slashes within a regex to be escaped, e.g., /file:\\\\/\\\\/\\\\// should match `file:///`\n     */\n    _regex() {\n        let p = this._current;\n        let inEscape = false;\n        let inCharacterClass = false;\n        while (true) {\n            if (p >= this._input.length) {\n                this._current = p;\n                this._error(hintDidYouForgetToEscapeSlash);\n                return;\n            }\n            const ch = this._input.charCodeAt(p);\n            if (inEscape) { // parsing an escape character\n                inEscape = false;\n            }\n            else if (ch === 47 /* CharCode.Slash */ && !inCharacterClass) { // end of regex\n                p++;\n                break;\n            }\n            else if (ch === 91 /* CharCode.OpenSquareBracket */) {\n                inCharacterClass = true;\n            }\n            else if (ch === 92 /* CharCode.Backslash */) {\n                inEscape = true;\n            }\n            else if (ch === 93 /* CharCode.CloseSquareBracket */) {\n                inCharacterClass = false;\n            }\n            p++;\n        }\n        // Consume flags // TODO@ulugbekna: use regex instead\n        while (p < this._input.length && Scanner._regexFlags.has(this._input.charCodeAt(p))) {\n            p++;\n        }\n        this._current = p;\n        const lexeme = this._input.substring(this._start, this._current);\n        this._tokens.push({ type: 10 /* TokenType.RegexStr */, lexeme, offset: this._start });\n    }\n    _isAtEnd() {\n        return this._current >= this._input.length;\n    }\n}\nScanner._regexFlags = new Set(['i', 'g', 's', 'm', 'y', 'u'].map(ch => ch.charCodeAt(0)));\nScanner._keywords = new Map([\n    ['not', 14 /* TokenType.Not */],\n    ['in', 13 /* TokenType.In */],\n    ['false', 12 /* TokenType.False */],\n    ['true', 11 /* TokenType.True */],\n]);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isChrome, isEdge, isFirefox, isLinux, isMacintosh, isSafari, isWeb, isWindows } from '../../../base/common/platform.js';\nimport { isFalsyOrWhitespace } from '../../../base/common/strings.js';\nimport { Scanner } from './scanner.js';\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nimport { localize } from '../../../nls.js';\nconst CONSTANT_VALUES = new Map();\nCONSTANT_VALUES.set('false', false);\nCONSTANT_VALUES.set('true', true);\nCONSTANT_VALUES.set('isMac', isMacintosh);\nCONSTANT_VALUES.set('isLinux', isLinux);\nCONSTANT_VALUES.set('isWindows', isWindows);\nCONSTANT_VALUES.set('isWeb', isWeb);\nCONSTANT_VALUES.set('isMacNative', isMacintosh && !isWeb);\nCONSTANT_VALUES.set('isEdge', isEdge);\nCONSTANT_VALUES.set('isFirefox', isFirefox);\nCONSTANT_VALUES.set('isChrome', isChrome);\nCONSTANT_VALUES.set('isSafari', isSafari);\nconst hasOwnProperty = Object.prototype.hasOwnProperty;\nconst defaultConfig = {\n    regexParsingWithErrorRecovery: true\n};\nconst errorEmptyString = localize('contextkey.parser.error.emptyString', \"Empty context key expression\");\nconst hintEmptyString = localize('contextkey.parser.error.emptyString.hint', \"Did you forget to write an expression? You can also put 'false' or 'true' to always evaluate to false or true, respectively.\");\nconst errorNoInAfterNot = localize('contextkey.parser.error.noInAfterNot', \"'in' after 'not'.\");\nconst errorClosingParenthesis = localize('contextkey.parser.error.closingParenthesis', \"closing parenthesis ')'\");\nconst errorUnexpectedToken = localize('contextkey.parser.error.unexpectedToken', \"Unexpected token\");\nconst hintUnexpectedToken = localize('contextkey.parser.error.unexpectedToken.hint', \"Did you forget to put && or || before the token?\");\nconst errorUnexpectedEOF = localize('contextkey.parser.error.unexpectedEOF', \"Unexpected end of expression\");\nconst hintUnexpectedEOF = localize('contextkey.parser.error.unexpectedEOF.hint', \"Did you forget to put a context key?\");\n/**\n * A parser for context key expressions.\n *\n * Example:\n * ```ts\n * const parser = new Parser();\n * const expr = parser.parse('foo == \"bar\" && baz == true');\n *\n * if (expr === undefined) {\n * \t// there were lexing or parsing errors\n * \t// process lexing errors with `parser.lexingErrors`\n *  // process parsing errors with `parser.parsingErrors`\n * } else {\n * \t// expr is a valid expression\n * }\n * ```\n */\nexport class Parser {\n    constructor(_config = defaultConfig) {\n        this._config = _config;\n        // lifetime note: `_scanner` lives as long as the parser does, i.e., is not reset between calls to `parse`\n        this._scanner = new Scanner();\n        // lifetime note: `_tokens`, `_current`, and `_parsingErrors` must be reset between calls to `parse`\n        this._tokens = [];\n        this._current = 0; // invariant: 0 <= this._current < this._tokens.length ; any incrementation of this value must first call `_isAtEnd`\n        this._parsingErrors = [];\n        this._flagsGYRe = /g|y/g;\n    }\n    /**\n     * Parse a context key expression.\n     *\n     * @param input the expression to parse\n     * @returns the parsed expression or `undefined` if there's an error - call `lexingErrors` and `parsingErrors` to see the errors\n     */\n    parse(input) {\n        if (input === '') {\n            this._parsingErrors.push({ message: errorEmptyString, offset: 0, lexeme: '', additionalInfo: hintEmptyString });\n            return undefined;\n        }\n        this._tokens = this._scanner.reset(input).scan();\n        // @ulugbekna: we do not stop parsing if there are lexing errors to be able to reconstruct regexes with unescaped slashes; TODO@ulugbekna: make this respect config option for recovery\n        this._current = 0;\n        this._parsingErrors = [];\n        try {\n            const expr = this._expr();\n            if (!this._isAtEnd()) {\n                const peek = this._peek();\n                const additionalInfo = peek.type === 17 /* TokenType.Str */ ? hintUnexpectedToken : undefined;\n                this._parsingErrors.push({ message: errorUnexpectedToken, offset: peek.offset, lexeme: Scanner.getLexeme(peek), additionalInfo });\n                throw Parser._parseError;\n            }\n            return expr;\n        }\n        catch (e) {\n            if (!(e === Parser._parseError)) {\n                throw e;\n            }\n            return undefined;\n        }\n    }\n    _expr() {\n        return this._or();\n    }\n    _or() {\n        const expr = [this._and()];\n        while (this._matchOne(16 /* TokenType.Or */)) {\n            const right = this._and();\n            expr.push(right);\n        }\n        return expr.length === 1 ? expr[0] : ContextKeyExpr.or(...expr);\n    }\n    _and() {\n        const expr = [this._term()];\n        while (this._matchOne(15 /* TokenType.And */)) {\n            const right = this._term();\n            expr.push(right);\n        }\n        return expr.length === 1 ? expr[0] : ContextKeyExpr.and(...expr);\n    }\n    _term() {\n        if (this._matchOne(2 /* TokenType.Neg */)) {\n            const peek = this._peek();\n            switch (peek.type) {\n                case 11 /* TokenType.True */:\n                    this._advance();\n                    return ContextKeyFalseExpr.INSTANCE;\n                case 12 /* TokenType.False */:\n                    this._advance();\n                    return ContextKeyTrueExpr.INSTANCE;\n                case 0 /* TokenType.LParen */: {\n                    this._advance();\n                    const expr = this._expr();\n                    this._consume(1 /* TokenType.RParen */, errorClosingParenthesis);\n                    return expr === null || expr === void 0 ? void 0 : expr.negate();\n                }\n                case 17 /* TokenType.Str */:\n                    this._advance();\n                    return ContextKeyNotExpr.create(peek.lexeme);\n                default:\n                    throw this._errExpectedButGot(`KEY | true | false | '(' expression ')'`, peek);\n            }\n        }\n        return this._primary();\n    }\n    _primary() {\n        const peek = this._peek();\n        switch (peek.type) {\n            case 11 /* TokenType.True */:\n                this._advance();\n                return ContextKeyExpr.true();\n            case 12 /* TokenType.False */:\n                this._advance();\n                return ContextKeyExpr.false();\n            case 0 /* TokenType.LParen */: {\n                this._advance();\n                const expr = this._expr();\n                this._consume(1 /* TokenType.RParen */, errorClosingParenthesis);\n                return expr;\n            }\n            case 17 /* TokenType.Str */: {\n                // KEY\n                const key = peek.lexeme;\n                this._advance();\n                // =~ regex\n                if (this._matchOne(9 /* TokenType.RegexOp */)) {\n                    // @ulugbekna: we need to reconstruct the regex from the tokens because some extensions use unescaped slashes in regexes\n                    const expr = this._peek();\n                    if (!this._config.regexParsingWithErrorRecovery) {\n                        this._advance();\n                        if (expr.type !== 10 /* TokenType.RegexStr */) {\n                            throw this._errExpectedButGot(`REGEX`, expr);\n                        }\n                        const regexLexeme = expr.lexeme;\n                        const closingSlashIndex = regexLexeme.lastIndexOf('/');\n                        const flags = closingSlashIndex === regexLexeme.length - 1 ? undefined : this._removeFlagsGY(regexLexeme.substring(closingSlashIndex + 1));\n                        let regexp;\n                        try {\n                            regexp = new RegExp(regexLexeme.substring(1, closingSlashIndex), flags);\n                        }\n                        catch (e) {\n                            throw this._errExpectedButGot(`REGEX`, expr);\n                        }\n                        return ContextKeyRegexExpr.create(key, regexp);\n                    }\n                    switch (expr.type) {\n                        case 10 /* TokenType.RegexStr */:\n                        case 19 /* TokenType.Error */: { // also handle an ErrorToken in case of smth such as /(/file)/\n                            const lexemeReconstruction = [expr.lexeme]; // /REGEX/ or /REGEX/FLAGS\n                            this._advance();\n                            let followingToken = this._peek();\n                            let parenBalance = 0;\n                            for (let i = 0; i < expr.lexeme.length; i++) {\n                                if (expr.lexeme.charCodeAt(i) === 40 /* CharCode.OpenParen */) {\n                                    parenBalance++;\n                                }\n                                else if (expr.lexeme.charCodeAt(i) === 41 /* CharCode.CloseParen */) {\n                                    parenBalance--;\n                                }\n                            }\n                            while (!this._isAtEnd() && followingToken.type !== 15 /* TokenType.And */ && followingToken.type !== 16 /* TokenType.Or */) {\n                                switch (followingToken.type) {\n                                    case 0 /* TokenType.LParen */:\n                                        parenBalance++;\n                                        break;\n                                    case 1 /* TokenType.RParen */:\n                                        parenBalance--;\n                                        break;\n                                    case 10 /* TokenType.RegexStr */:\n                                    case 18 /* TokenType.QuotedStr */:\n                                        for (let i = 0; i < followingToken.lexeme.length; i++) {\n                                            if (followingToken.lexeme.charCodeAt(i) === 40 /* CharCode.OpenParen */) {\n                                                parenBalance++;\n                                            }\n                                            else if (expr.lexeme.charCodeAt(i) === 41 /* CharCode.CloseParen */) {\n                                                parenBalance--;\n                                            }\n                                        }\n                                }\n                                if (parenBalance < 0) {\n                                    break;\n                                }\n                                lexemeReconstruction.push(Scanner.getLexeme(followingToken));\n                                this._advance();\n                                followingToken = this._peek();\n                            }\n                            const regexLexeme = lexemeReconstruction.join('');\n                            const closingSlashIndex = regexLexeme.lastIndexOf('/');\n                            const flags = closingSlashIndex === regexLexeme.length - 1 ? undefined : this._removeFlagsGY(regexLexeme.substring(closingSlashIndex + 1));\n                            let regexp;\n                            try {\n                                regexp = new RegExp(regexLexeme.substring(1, closingSlashIndex), flags);\n                            }\n                            catch (e) {\n                                throw this._errExpectedButGot(`REGEX`, expr);\n                            }\n                            return ContextKeyExpr.regex(key, regexp);\n                        }\n                        case 18 /* TokenType.QuotedStr */: {\n                            const serializedValue = expr.lexeme;\n                            this._advance();\n                            // replicate old regex parsing behavior\n                            let regex = null;\n                            if (!isFalsyOrWhitespace(serializedValue)) {\n                                const start = serializedValue.indexOf('/');\n                                const end = serializedValue.lastIndexOf('/');\n                                if (start !== end && start >= 0) {\n                                    const value = serializedValue.slice(start + 1, end);\n                                    const caseIgnoreFlag = serializedValue[end + 1] === 'i' ? 'i' : '';\n                                    try {\n                                        regex = new RegExp(value, caseIgnoreFlag);\n                                    }\n                                    catch (_e) {\n                                        throw this._errExpectedButGot(`REGEX`, expr);\n                                    }\n                                }\n                            }\n                            if (regex === null) {\n                                throw this._errExpectedButGot('REGEX', expr);\n                            }\n                            return ContextKeyRegexExpr.create(key, regex);\n                        }\n                        default:\n                            throw this._errExpectedButGot('REGEX', this._peek());\n                    }\n                }\n                // [ 'not' 'in' value ]\n                if (this._matchOne(14 /* TokenType.Not */)) {\n                    this._consume(13 /* TokenType.In */, errorNoInAfterNot);\n                    const right = this._value();\n                    return ContextKeyExpr.notIn(key, right);\n                }\n                // [ ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in') value ]\n                const maybeOp = this._peek().type;\n                switch (maybeOp) {\n                    case 3 /* TokenType.Eq */: {\n                        this._advance();\n                        const right = this._value();\n                        if (this._previous().type === 18 /* TokenType.QuotedStr */) { // to preserve old parser behavior: \"foo == 'true'\" is preserved as \"foo == 'true'\", but \"foo == true\" is optimized as \"foo\"\n                            return ContextKeyExpr.equals(key, right);\n                        }\n                        switch (right) {\n                            case 'true':\n                                return ContextKeyExpr.has(key);\n                            case 'false':\n                                return ContextKeyExpr.not(key);\n                            default:\n                                return ContextKeyExpr.equals(key, right);\n                        }\n                    }\n                    case 4 /* TokenType.NotEq */: {\n                        this._advance();\n                        const right = this._value();\n                        if (this._previous().type === 18 /* TokenType.QuotedStr */) { // same as above with \"foo != 'true'\"\n                            return ContextKeyExpr.notEquals(key, right);\n                        }\n                        switch (right) {\n                            case 'true':\n                                return ContextKeyExpr.not(key);\n                            case 'false':\n                                return ContextKeyExpr.has(key);\n                            default:\n                                return ContextKeyExpr.notEquals(key, right);\n                        }\n                    }\n                    // TODO: ContextKeyExpr.smaller(key, right) accepts only `number` as `right` AND during eval of this node, we just eval to `false` if `right` is not a number\n                    // consequently, package.json linter should _warn_ the user if they're passing undesired things to ops\n                    case 5 /* TokenType.Lt */:\n                        this._advance();\n                        return ContextKeySmallerExpr.create(key, this._value());\n                    case 6 /* TokenType.LtEq */:\n                        this._advance();\n                        return ContextKeySmallerEqualsExpr.create(key, this._value());\n                    case 7 /* TokenType.Gt */:\n                        this._advance();\n                        return ContextKeyGreaterExpr.create(key, this._value());\n                    case 8 /* TokenType.GtEq */:\n                        this._advance();\n                        return ContextKeyGreaterEqualsExpr.create(key, this._value());\n                    case 13 /* TokenType.In */:\n                        this._advance();\n                        return ContextKeyExpr.in(key, this._value());\n                    default:\n                        return ContextKeyExpr.has(key);\n                }\n            }\n            case 20 /* TokenType.EOF */:\n                this._parsingErrors.push({ message: errorUnexpectedEOF, offset: peek.offset, lexeme: '', additionalInfo: hintUnexpectedEOF });\n                throw Parser._parseError;\n            default:\n                throw this._errExpectedButGot(`true | false | KEY \\n\\t| KEY '=~' REGEX \\n\\t| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`, this._peek());\n        }\n    }\n    _value() {\n        const token = this._peek();\n        switch (token.type) {\n            case 17 /* TokenType.Str */:\n            case 18 /* TokenType.QuotedStr */:\n                this._advance();\n                return token.lexeme;\n            case 11 /* TokenType.True */:\n                this._advance();\n                return 'true';\n            case 12 /* TokenType.False */:\n                this._advance();\n                return 'false';\n            case 13 /* TokenType.In */: // we support `in` as a value, e.g., \"when\": \"languageId == in\" - exists in existing extensions\n                this._advance();\n                return 'in';\n            default:\n                // this allows \"when\": \"foo == \" which's used by existing extensions\n                // we do not call `_advance` on purpose - we don't want to eat unintended tokens\n                return '';\n        }\n    }\n    _removeFlagsGY(flags) {\n        return flags.replaceAll(this._flagsGYRe, '');\n    }\n    // careful: this can throw if current token is the initial one (ie index = 0)\n    _previous() {\n        return this._tokens[this._current - 1];\n    }\n    _matchOne(token) {\n        if (this._check(token)) {\n            this._advance();\n            return true;\n        }\n        return false;\n    }\n    _advance() {\n        if (!this._isAtEnd()) {\n            this._current++;\n        }\n        return this._previous();\n    }\n    _consume(type, message) {\n        if (this._check(type)) {\n            return this._advance();\n        }\n        throw this._errExpectedButGot(message, this._peek());\n    }\n    _errExpectedButGot(expected, got, additionalInfo) {\n        const message = localize('contextkey.parser.error.expectedButGot', \"Expected: {0}\\nReceived: '{1}'.\", expected, Scanner.getLexeme(got));\n        const offset = got.offset;\n        const lexeme = Scanner.getLexeme(got);\n        this._parsingErrors.push({ message, offset, lexeme, additionalInfo });\n        return Parser._parseError;\n    }\n    _check(type) {\n        return this._peek().type === type;\n    }\n    _peek() {\n        return this._tokens[this._current];\n    }\n    _isAtEnd() {\n        return this._peek().type === 20 /* TokenType.EOF */;\n    }\n}\n// Note: this doesn't produce an exact syntax tree but a normalized one\n// ContextKeyExpression's that we use as AST nodes do not expose constructors that do not normalize\nParser._parseError = new Error();\nexport class ContextKeyExpr {\n    static false() {\n        return ContextKeyFalseExpr.INSTANCE;\n    }\n    static true() {\n        return ContextKeyTrueExpr.INSTANCE;\n    }\n    static has(key) {\n        return ContextKeyDefinedExpr.create(key);\n    }\n    static equals(key, value) {\n        return ContextKeyEqualsExpr.create(key, value);\n    }\n    static notEquals(key, value) {\n        return ContextKeyNotEqualsExpr.create(key, value);\n    }\n    static regex(key, value) {\n        return ContextKeyRegexExpr.create(key, value);\n    }\n    static in(key, value) {\n        return ContextKeyInExpr.create(key, value);\n    }\n    static notIn(key, value) {\n        return ContextKeyNotInExpr.create(key, value);\n    }\n    static not(key) {\n        return ContextKeyNotExpr.create(key);\n    }\n    static and(...expr) {\n        return ContextKeyAndExpr.create(expr, null, true);\n    }\n    static or(...expr) {\n        return ContextKeyOrExpr.create(expr, null, true);\n    }\n    static deserialize(serialized) {\n        if (serialized === undefined || serialized === null) { // an empty string needs to be handled by the parser to get a corresponding parsing error reported\n            return undefined;\n        }\n        const expr = this._parser.parse(serialized);\n        return expr;\n    }\n}\nContextKeyExpr._parser = new Parser({ regexParsingWithErrorRecovery: false });\nexport function expressionsAreEqualWithConstantSubstitution(a, b) {\n    const aExpr = a ? a.substituteConstants() : undefined;\n    const bExpr = b ? b.substituteConstants() : undefined;\n    if (!aExpr && !bExpr) {\n        return true;\n    }\n    if (!aExpr || !bExpr) {\n        return false;\n    }\n    return aExpr.equals(bExpr);\n}\nfunction cmp(a, b) {\n    return a.cmp(b);\n}\nexport class ContextKeyFalseExpr {\n    constructor() {\n        this.type = 0 /* ContextKeyExprType.False */;\n    }\n    cmp(other) {\n        return this.type - other.type;\n    }\n    equals(other) {\n        return (other.type === this.type);\n    }\n    substituteConstants() {\n        return this;\n    }\n    evaluate(context) {\n        return false;\n    }\n    serialize() {\n        return 'false';\n    }\n    keys() {\n        return [];\n    }\n    negate() {\n        return ContextKeyTrueExpr.INSTANCE;\n    }\n}\nContextKeyFalseExpr.INSTANCE = new ContextKeyFalseExpr();\nexport class ContextKeyTrueExpr {\n    constructor() {\n        this.type = 1 /* ContextKeyExprType.True */;\n    }\n    cmp(other) {\n        return this.type - other.type;\n    }\n    equals(other) {\n        return (other.type === this.type);\n    }\n    substituteConstants() {\n        return this;\n    }\n    evaluate(context) {\n        return true;\n    }\n    serialize() {\n        return 'true';\n    }\n    keys() {\n        return [];\n    }\n    negate() {\n        return ContextKeyFalseExpr.INSTANCE;\n    }\n}\nContextKeyTrueExpr.INSTANCE = new ContextKeyTrueExpr();\nexport class ContextKeyDefinedExpr {\n    static create(key, negated = null) {\n        const constantValue = CONSTANT_VALUES.get(key);\n        if (typeof constantValue === 'boolean') {\n            return constantValue ? ContextKeyTrueExpr.INSTANCE : ContextKeyFalseExpr.INSTANCE;\n        }\n        return new ContextKeyDefinedExpr(key, negated);\n    }\n    constructor(key, negated) {\n        this.key = key;\n        this.negated = negated;\n        this.type = 2 /* ContextKeyExprType.Defined */;\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        return cmp1(this.key, other.key);\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            return (this.key === other.key);\n        }\n        return false;\n    }\n    substituteConstants() {\n        const constantValue = CONSTANT_VALUES.get(this.key);\n        if (typeof constantValue === 'boolean') {\n            return constantValue ? ContextKeyTrueExpr.INSTANCE : ContextKeyFalseExpr.INSTANCE;\n        }\n        return this;\n    }\n    evaluate(context) {\n        return (!!context.getValue(this.key));\n    }\n    serialize() {\n        return this.key;\n    }\n    keys() {\n        return [this.key];\n    }\n    negate() {\n        if (!this.negated) {\n            this.negated = ContextKeyNotExpr.create(this.key, this);\n        }\n        return this.negated;\n    }\n}\nexport class ContextKeyEqualsExpr {\n    static create(key, value, negated = null) {\n        if (typeof value === 'boolean') {\n            return (value ? ContextKeyDefinedExpr.create(key, negated) : ContextKeyNotExpr.create(key, negated));\n        }\n        const constantValue = CONSTANT_VALUES.get(key);\n        if (typeof constantValue === 'boolean') {\n            const trueValue = constantValue ? 'true' : 'false';\n            return (value === trueValue ? ContextKeyTrueExpr.INSTANCE : ContextKeyFalseExpr.INSTANCE);\n        }\n        return new ContextKeyEqualsExpr(key, value, negated);\n    }\n    constructor(key, value, negated) {\n        this.key = key;\n        this.value = value;\n        this.negated = negated;\n        this.type = 4 /* ContextKeyExprType.Equals */;\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        return cmp2(this.key, this.value, other.key, other.value);\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            return (this.key === other.key && this.value === other.value);\n        }\n        return false;\n    }\n    substituteConstants() {\n        const constantValue = CONSTANT_VALUES.get(this.key);\n        if (typeof constantValue === 'boolean') {\n            const trueValue = constantValue ? 'true' : 'false';\n            return (this.value === trueValue ? ContextKeyTrueExpr.INSTANCE : ContextKeyFalseExpr.INSTANCE);\n        }\n        return this;\n    }\n    evaluate(context) {\n        // Intentional ==\n        // eslint-disable-next-line eqeqeq\n        return (context.getValue(this.key) == this.value);\n    }\n    serialize() {\n        return `${this.key} == '${this.value}'`;\n    }\n    keys() {\n        return [this.key];\n    }\n    negate() {\n        if (!this.negated) {\n            this.negated = ContextKeyNotEqualsExpr.create(this.key, this.value, this);\n        }\n        return this.negated;\n    }\n}\nexport class ContextKeyInExpr {\n    static create(key, valueKey) {\n        return new ContextKeyInExpr(key, valueKey);\n    }\n    constructor(key, valueKey) {\n        this.key = key;\n        this.valueKey = valueKey;\n        this.type = 10 /* ContextKeyExprType.In */;\n        this.negated = null;\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        return cmp2(this.key, this.valueKey, other.key, other.valueKey);\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            return (this.key === other.key && this.valueKey === other.valueKey);\n        }\n        return false;\n    }\n    substituteConstants() {\n        return this;\n    }\n    evaluate(context) {\n        const source = context.getValue(this.valueKey);\n        const item = context.getValue(this.key);\n        if (Array.isArray(source)) {\n            return source.includes(item);\n        }\n        if (typeof item === 'string' && typeof source === 'object' && source !== null) {\n            return hasOwnProperty.call(source, item);\n        }\n        return false;\n    }\n    serialize() {\n        return `${this.key} in '${this.valueKey}'`;\n    }\n    keys() {\n        return [this.key, this.valueKey];\n    }\n    negate() {\n        if (!this.negated) {\n            this.negated = ContextKeyNotInExpr.create(this.key, this.valueKey);\n        }\n        return this.negated;\n    }\n}\nexport class ContextKeyNotInExpr {\n    static create(key, valueKey) {\n        return new ContextKeyNotInExpr(key, valueKey);\n    }\n    constructor(key, valueKey) {\n        this.key = key;\n        this.valueKey = valueKey;\n        this.type = 11 /* ContextKeyExprType.NotIn */;\n        this._negated = ContextKeyInExpr.create(key, valueKey);\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        return this._negated.cmp(other._negated);\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            return this._negated.equals(other._negated);\n        }\n        return false;\n    }\n    substituteConstants() {\n        return this;\n    }\n    evaluate(context) {\n        return !this._negated.evaluate(context);\n    }\n    serialize() {\n        return `${this.key} not in '${this.valueKey}'`;\n    }\n    keys() {\n        return this._negated.keys();\n    }\n    negate() {\n        return this._negated;\n    }\n}\nexport class ContextKeyNotEqualsExpr {\n    static create(key, value, negated = null) {\n        if (typeof value === 'boolean') {\n            if (value) {\n                return ContextKeyNotExpr.create(key, negated);\n            }\n            return ContextKeyDefinedExpr.create(key, negated);\n        }\n        const constantValue = CONSTANT_VALUES.get(key);\n        if (typeof constantValue === 'boolean') {\n            const falseValue = constantValue ? 'true' : 'false';\n            return (value === falseValue ? ContextKeyFalseExpr.INSTANCE : ContextKeyTrueExpr.INSTANCE);\n        }\n        return new ContextKeyNotEqualsExpr(key, value, negated);\n    }\n    constructor(key, value, negated) {\n        this.key = key;\n        this.value = value;\n        this.negated = negated;\n        this.type = 5 /* ContextKeyExprType.NotEquals */;\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        return cmp2(this.key, this.value, other.key, other.value);\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            return (this.key === other.key && this.value === other.value);\n        }\n        return false;\n    }\n    substituteConstants() {\n        const constantValue = CONSTANT_VALUES.get(this.key);\n        if (typeof constantValue === 'boolean') {\n            const falseValue = constantValue ? 'true' : 'false';\n            return (this.value === falseValue ? ContextKeyFalseExpr.INSTANCE : ContextKeyTrueExpr.INSTANCE);\n        }\n        return this;\n    }\n    evaluate(context) {\n        // Intentional !=\n        // eslint-disable-next-line eqeqeq\n        return (context.getValue(this.key) != this.value);\n    }\n    serialize() {\n        return `${this.key} != '${this.value}'`;\n    }\n    keys() {\n        return [this.key];\n    }\n    negate() {\n        if (!this.negated) {\n            this.negated = ContextKeyEqualsExpr.create(this.key, this.value, this);\n        }\n        return this.negated;\n    }\n}\nexport class ContextKeyNotExpr {\n    static create(key, negated = null) {\n        const constantValue = CONSTANT_VALUES.get(key);\n        if (typeof constantValue === 'boolean') {\n            return (constantValue ? ContextKeyFalseExpr.INSTANCE : ContextKeyTrueExpr.INSTANCE);\n        }\n        return new ContextKeyNotExpr(key, negated);\n    }\n    constructor(key, negated) {\n        this.key = key;\n        this.negated = negated;\n        this.type = 3 /* ContextKeyExprType.Not */;\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        return cmp1(this.key, other.key);\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            return (this.key === other.key);\n        }\n        return false;\n    }\n    substituteConstants() {\n        const constantValue = CONSTANT_VALUES.get(this.key);\n        if (typeof constantValue === 'boolean') {\n            return (constantValue ? ContextKeyFalseExpr.INSTANCE : ContextKeyTrueExpr.INSTANCE);\n        }\n        return this;\n    }\n    evaluate(context) {\n        return (!context.getValue(this.key));\n    }\n    serialize() {\n        return `!${this.key}`;\n    }\n    keys() {\n        return [this.key];\n    }\n    negate() {\n        if (!this.negated) {\n            this.negated = ContextKeyDefinedExpr.create(this.key, this);\n        }\n        return this.negated;\n    }\n}\nfunction withFloatOrStr(value, callback) {\n    if (typeof value === 'string') {\n        const n = parseFloat(value);\n        if (!isNaN(n)) {\n            value = n;\n        }\n    }\n    if (typeof value === 'string' || typeof value === 'number') {\n        return callback(value);\n    }\n    return ContextKeyFalseExpr.INSTANCE;\n}\nexport class ContextKeyGreaterExpr {\n    static create(key, _value, negated = null) {\n        return withFloatOrStr(_value, (value) => new ContextKeyGreaterExpr(key, value, negated));\n    }\n    constructor(key, value, negated) {\n        this.key = key;\n        this.value = value;\n        this.negated = negated;\n        this.type = 12 /* ContextKeyExprType.Greater */;\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        return cmp2(this.key, this.value, other.key, other.value);\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            return (this.key === other.key && this.value === other.value);\n        }\n        return false;\n    }\n    substituteConstants() {\n        return this;\n    }\n    evaluate(context) {\n        if (typeof this.value === 'string') {\n            return false;\n        }\n        return (parseFloat(context.getValue(this.key)) > this.value);\n    }\n    serialize() {\n        return `${this.key} > ${this.value}`;\n    }\n    keys() {\n        return [this.key];\n    }\n    negate() {\n        if (!this.negated) {\n            this.negated = ContextKeySmallerEqualsExpr.create(this.key, this.value, this);\n        }\n        return this.negated;\n    }\n}\nexport class ContextKeyGreaterEqualsExpr {\n    static create(key, _value, negated = null) {\n        return withFloatOrStr(_value, (value) => new ContextKeyGreaterEqualsExpr(key, value, negated));\n    }\n    constructor(key, value, negated) {\n        this.key = key;\n        this.value = value;\n        this.negated = negated;\n        this.type = 13 /* ContextKeyExprType.GreaterEquals */;\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        return cmp2(this.key, this.value, other.key, other.value);\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            return (this.key === other.key && this.value === other.value);\n        }\n        return false;\n    }\n    substituteConstants() {\n        return this;\n    }\n    evaluate(context) {\n        if (typeof this.value === 'string') {\n            return false;\n        }\n        return (parseFloat(context.getValue(this.key)) >= this.value);\n    }\n    serialize() {\n        return `${this.key} >= ${this.value}`;\n    }\n    keys() {\n        return [this.key];\n    }\n    negate() {\n        if (!this.negated) {\n            this.negated = ContextKeySmallerExpr.create(this.key, this.value, this);\n        }\n        return this.negated;\n    }\n}\nexport class ContextKeySmallerExpr {\n    static create(key, _value, negated = null) {\n        return withFloatOrStr(_value, (value) => new ContextKeySmallerExpr(key, value, negated));\n    }\n    constructor(key, value, negated) {\n        this.key = key;\n        this.value = value;\n        this.negated = negated;\n        this.type = 14 /* ContextKeyExprType.Smaller */;\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        return cmp2(this.key, this.value, other.key, other.value);\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            return (this.key === other.key && this.value === other.value);\n        }\n        return false;\n    }\n    substituteConstants() {\n        return this;\n    }\n    evaluate(context) {\n        if (typeof this.value === 'string') {\n            return false;\n        }\n        return (parseFloat(context.getValue(this.key)) < this.value);\n    }\n    serialize() {\n        return `${this.key} < ${this.value}`;\n    }\n    keys() {\n        return [this.key];\n    }\n    negate() {\n        if (!this.negated) {\n            this.negated = ContextKeyGreaterEqualsExpr.create(this.key, this.value, this);\n        }\n        return this.negated;\n    }\n}\nexport class ContextKeySmallerEqualsExpr {\n    static create(key, _value, negated = null) {\n        return withFloatOrStr(_value, (value) => new ContextKeySmallerEqualsExpr(key, value, negated));\n    }\n    constructor(key, value, negated) {\n        this.key = key;\n        this.value = value;\n        this.negated = negated;\n        this.type = 15 /* ContextKeyExprType.SmallerEquals */;\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        return cmp2(this.key, this.value, other.key, other.value);\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            return (this.key === other.key && this.value === other.value);\n        }\n        return false;\n    }\n    substituteConstants() {\n        return this;\n    }\n    evaluate(context) {\n        if (typeof this.value === 'string') {\n            return false;\n        }\n        return (parseFloat(context.getValue(this.key)) <= this.value);\n    }\n    serialize() {\n        return `${this.key} <= ${this.value}`;\n    }\n    keys() {\n        return [this.key];\n    }\n    negate() {\n        if (!this.negated) {\n            this.negated = ContextKeyGreaterExpr.create(this.key, this.value, this);\n        }\n        return this.negated;\n    }\n}\nexport class ContextKeyRegexExpr {\n    static create(key, regexp) {\n        return new ContextKeyRegexExpr(key, regexp);\n    }\n    constructor(key, regexp) {\n        this.key = key;\n        this.regexp = regexp;\n        this.type = 7 /* ContextKeyExprType.Regex */;\n        this.negated = null;\n        //\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        if (this.key < other.key) {\n            return -1;\n        }\n        if (this.key > other.key) {\n            return 1;\n        }\n        const thisSource = this.regexp ? this.regexp.source : '';\n        const otherSource = other.regexp ? other.regexp.source : '';\n        if (thisSource < otherSource) {\n            return -1;\n        }\n        if (thisSource > otherSource) {\n            return 1;\n        }\n        return 0;\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            const thisSource = this.regexp ? this.regexp.source : '';\n            const otherSource = other.regexp ? other.regexp.source : '';\n            return (this.key === other.key && thisSource === otherSource);\n        }\n        return false;\n    }\n    substituteConstants() {\n        return this;\n    }\n    evaluate(context) {\n        const value = context.getValue(this.key);\n        return this.regexp ? this.regexp.test(value) : false;\n    }\n    serialize() {\n        const value = this.regexp\n            ? `/${this.regexp.source}/${this.regexp.flags}`\n            : '/invalid/';\n        return `${this.key} =~ ${value}`;\n    }\n    keys() {\n        return [this.key];\n    }\n    negate() {\n        if (!this.negated) {\n            this.negated = ContextKeyNotRegexExpr.create(this);\n        }\n        return this.negated;\n    }\n}\nexport class ContextKeyNotRegexExpr {\n    static create(actual) {\n        return new ContextKeyNotRegexExpr(actual);\n    }\n    constructor(_actual) {\n        this._actual = _actual;\n        this.type = 8 /* ContextKeyExprType.NotRegex */;\n        //\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        return this._actual.cmp(other._actual);\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            return this._actual.equals(other._actual);\n        }\n        return false;\n    }\n    substituteConstants() {\n        return this;\n    }\n    evaluate(context) {\n        return !this._actual.evaluate(context);\n    }\n    serialize() {\n        return `!(${this._actual.serialize()})`;\n    }\n    keys() {\n        return this._actual.keys();\n    }\n    negate() {\n        return this._actual;\n    }\n}\n/**\n * @returns the same instance if nothing changed.\n */\nfunction eliminateConstantsInArray(arr) {\n    // Allocate array only if there is a difference\n    let newArr = null;\n    for (let i = 0, len = arr.length; i < len; i++) {\n        const newExpr = arr[i].substituteConstants();\n        if (arr[i] !== newExpr) {\n            // something has changed!\n            // allocate array on first difference\n            if (newArr === null) {\n                newArr = [];\n                for (let j = 0; j < i; j++) {\n                    newArr[j] = arr[j];\n                }\n            }\n        }\n        if (newArr !== null) {\n            newArr[i] = newExpr;\n        }\n    }\n    if (newArr === null) {\n        return arr;\n    }\n    return newArr;\n}\nexport class ContextKeyAndExpr {\n    static create(_expr, negated, extraRedundantCheck) {\n        return ContextKeyAndExpr._normalizeArr(_expr, negated, extraRedundantCheck);\n    }\n    constructor(expr, negated) {\n        this.expr = expr;\n        this.negated = negated;\n        this.type = 6 /* ContextKeyExprType.And */;\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        if (this.expr.length < other.expr.length) {\n            return -1;\n        }\n        if (this.expr.length > other.expr.length) {\n            return 1;\n        }\n        for (let i = 0, len = this.expr.length; i < len; i++) {\n            const r = cmp(this.expr[i], other.expr[i]);\n            if (r !== 0) {\n                return r;\n            }\n        }\n        return 0;\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            if (this.expr.length !== other.expr.length) {\n                return false;\n            }\n            for (let i = 0, len = this.expr.length; i < len; i++) {\n                if (!this.expr[i].equals(other.expr[i])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    substituteConstants() {\n        const exprArr = eliminateConstantsInArray(this.expr);\n        if (exprArr === this.expr) {\n            // no change\n            return this;\n        }\n        return ContextKeyAndExpr.create(exprArr, this.negated, false);\n    }\n    evaluate(context) {\n        for (let i = 0, len = this.expr.length; i < len; i++) {\n            if (!this.expr[i].evaluate(context)) {\n                return false;\n            }\n        }\n        return true;\n    }\n    static _normalizeArr(arr, negated, extraRedundantCheck) {\n        const expr = [];\n        let hasTrue = false;\n        for (const e of arr) {\n            if (!e) {\n                continue;\n            }\n            if (e.type === 1 /* ContextKeyExprType.True */) {\n                // anything && true ==> anything\n                hasTrue = true;\n                continue;\n            }\n            if (e.type === 0 /* ContextKeyExprType.False */) {\n                // anything && false ==> false\n                return ContextKeyFalseExpr.INSTANCE;\n            }\n            if (e.type === 6 /* ContextKeyExprType.And */) {\n                expr.push(...e.expr);\n                continue;\n            }\n            expr.push(e);\n        }\n        if (expr.length === 0 && hasTrue) {\n            return ContextKeyTrueExpr.INSTANCE;\n        }\n        if (expr.length === 0) {\n            return undefined;\n        }\n        if (expr.length === 1) {\n            return expr[0];\n        }\n        expr.sort(cmp);\n        // eliminate duplicate terms\n        for (let i = 1; i < expr.length; i++) {\n            if (expr[i - 1].equals(expr[i])) {\n                expr.splice(i, 1);\n                i--;\n            }\n        }\n        if (expr.length === 1) {\n            return expr[0];\n        }\n        // We must distribute any OR expression because we don't support parens\n        // OR extensions will be at the end (due to sorting rules)\n        while (expr.length > 1) {\n            const lastElement = expr[expr.length - 1];\n            if (lastElement.type !== 9 /* ContextKeyExprType.Or */) {\n                break;\n            }\n            // pop the last element\n            expr.pop();\n            // pop the second to last element\n            const secondToLastElement = expr.pop();\n            const isFinished = (expr.length === 0);\n            // distribute `lastElement` over `secondToLastElement`\n            const resultElement = ContextKeyOrExpr.create(lastElement.expr.map(el => ContextKeyAndExpr.create([el, secondToLastElement], null, extraRedundantCheck)), null, isFinished);\n            if (resultElement) {\n                expr.push(resultElement);\n                expr.sort(cmp);\n            }\n        }\n        if (expr.length === 1) {\n            return expr[0];\n        }\n        // resolve false AND expressions\n        if (extraRedundantCheck) {\n            for (let i = 0; i < expr.length; i++) {\n                for (let j = i + 1; j < expr.length; j++) {\n                    if (expr[i].negate().equals(expr[j])) {\n                        // A && !A case\n                        return ContextKeyFalseExpr.INSTANCE;\n                    }\n                }\n            }\n            if (expr.length === 1) {\n                return expr[0];\n            }\n        }\n        return new ContextKeyAndExpr(expr, negated);\n    }\n    serialize() {\n        return this.expr.map(e => e.serialize()).join(' && ');\n    }\n    keys() {\n        const result = [];\n        for (const expr of this.expr) {\n            result.push(...expr.keys());\n        }\n        return result;\n    }\n    negate() {\n        if (!this.negated) {\n            const result = [];\n            for (const expr of this.expr) {\n                result.push(expr.negate());\n            }\n            this.negated = ContextKeyOrExpr.create(result, this, true);\n        }\n        return this.negated;\n    }\n}\nexport class ContextKeyOrExpr {\n    static create(_expr, negated, extraRedundantCheck) {\n        return ContextKeyOrExpr._normalizeArr(_expr, negated, extraRedundantCheck);\n    }\n    constructor(expr, negated) {\n        this.expr = expr;\n        this.negated = negated;\n        this.type = 9 /* ContextKeyExprType.Or */;\n    }\n    cmp(other) {\n        if (other.type !== this.type) {\n            return this.type - other.type;\n        }\n        if (this.expr.length < other.expr.length) {\n            return -1;\n        }\n        if (this.expr.length > other.expr.length) {\n            return 1;\n        }\n        for (let i = 0, len = this.expr.length; i < len; i++) {\n            const r = cmp(this.expr[i], other.expr[i]);\n            if (r !== 0) {\n                return r;\n            }\n        }\n        return 0;\n    }\n    equals(other) {\n        if (other.type === this.type) {\n            if (this.expr.length !== other.expr.length) {\n                return false;\n            }\n            for (let i = 0, len = this.expr.length; i < len; i++) {\n                if (!this.expr[i].equals(other.expr[i])) {\n                    return false;\n                }\n            }\n            return true;\n        }\n        return false;\n    }\n    substituteConstants() {\n        const exprArr = eliminateConstantsInArray(this.expr);\n        if (exprArr === this.expr) {\n            // no change\n            return this;\n        }\n        return ContextKeyOrExpr.create(exprArr, this.negated, false);\n    }\n    evaluate(context) {\n        for (let i = 0, len = this.expr.length; i < len; i++) {\n            if (this.expr[i].evaluate(context)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    static _normalizeArr(arr, negated, extraRedundantCheck) {\n        let expr = [];\n        let hasFalse = false;\n        if (arr) {\n            for (let i = 0, len = arr.length; i < len; i++) {\n                const e = arr[i];\n                if (!e) {\n                    continue;\n                }\n                if (e.type === 0 /* ContextKeyExprType.False */) {\n                    // anything || false ==> anything\n                    hasFalse = true;\n                    continue;\n                }\n                if (e.type === 1 /* ContextKeyExprType.True */) {\n                    // anything || true ==> true\n                    return ContextKeyTrueExpr.INSTANCE;\n                }\n                if (e.type === 9 /* ContextKeyExprType.Or */) {\n                    expr = expr.concat(e.expr);\n                    continue;\n                }\n                expr.push(e);\n            }\n            if (expr.length === 0 && hasFalse) {\n                return ContextKeyFalseExpr.INSTANCE;\n            }\n            expr.sort(cmp);\n        }\n        if (expr.length === 0) {\n            return undefined;\n        }\n        if (expr.length === 1) {\n            return expr[0];\n        }\n        // eliminate duplicate terms\n        for (let i = 1; i < expr.length; i++) {\n            if (expr[i - 1].equals(expr[i])) {\n                expr.splice(i, 1);\n                i--;\n            }\n        }\n        if (expr.length === 1) {\n            return expr[0];\n        }\n        // resolve true OR expressions\n        if (extraRedundantCheck) {\n            for (let i = 0; i < expr.length; i++) {\n                for (let j = i + 1; j < expr.length; j++) {\n                    if (expr[i].negate().equals(expr[j])) {\n                        // A || !A case\n                        return ContextKeyTrueExpr.INSTANCE;\n                    }\n                }\n            }\n            if (expr.length === 1) {\n                return expr[0];\n            }\n        }\n        return new ContextKeyOrExpr(expr, negated);\n    }\n    serialize() {\n        return this.expr.map(e => e.serialize()).join(' || ');\n    }\n    keys() {\n        const result = [];\n        for (const expr of this.expr) {\n            result.push(...expr.keys());\n        }\n        return result;\n    }\n    negate() {\n        if (!this.negated) {\n            const result = [];\n            for (const expr of this.expr) {\n                result.push(expr.negate());\n            }\n            // We don't support parens, so here we distribute the AND over the OR terminals\n            // We always take the first 2 AND pairs and distribute them\n            while (result.length > 1) {\n                const LEFT = result.shift();\n                const RIGHT = result.shift();\n                const all = [];\n                for (const left of getTerminals(LEFT)) {\n                    for (const right of getTerminals(RIGHT)) {\n                        all.push(ContextKeyAndExpr.create([left, right], null, false));\n                    }\n                }\n                result.unshift(ContextKeyOrExpr.create(all, null, false));\n            }\n            this.negated = ContextKeyOrExpr.create(result, this, true);\n        }\n        return this.negated;\n    }\n}\nexport class RawContextKey extends ContextKeyDefinedExpr {\n    static all() {\n        return RawContextKey._info.values();\n    }\n    constructor(key, defaultValue, metaOrHide) {\n        super(key, null);\n        this._defaultValue = defaultValue;\n        // collect all context keys into a central place\n        if (typeof metaOrHide === 'object') {\n            RawContextKey._info.push(Object.assign(Object.assign({}, metaOrHide), { key }));\n        }\n        else if (metaOrHide !== true) {\n            RawContextKey._info.push({ key, description: metaOrHide, type: defaultValue !== null && defaultValue !== undefined ? typeof defaultValue : undefined });\n        }\n    }\n    bindTo(target) {\n        return target.createKey(this.key, this._defaultValue);\n    }\n    getValue(target) {\n        return target.getContextKeyValue(this.key);\n    }\n    toNegated() {\n        return this.negate();\n    }\n    isEqualTo(value) {\n        return ContextKeyEqualsExpr.create(this.key, value);\n    }\n}\nRawContextKey._info = [];\nexport const IContextKeyService = createDecorator('contextKeyService');\nfunction cmp1(key1, key2) {\n    if (key1 < key2) {\n        return -1;\n    }\n    if (key1 > key2) {\n        return 1;\n    }\n    return 0;\n}\nfunction cmp2(key1, value1, key2, value2) {\n    if (key1 < key2) {\n        return -1;\n    }\n    if (key1 > key2) {\n        return 1;\n    }\n    if (value1 < value2) {\n        return -1;\n    }\n    if (value1 > value2) {\n        return 1;\n    }\n    return 0;\n}\n/**\n * Returns true if it is provable `p` implies `q`.\n */\nexport function implies(p, q) {\n    if (p.type === 0 /* ContextKeyExprType.False */ || q.type === 1 /* ContextKeyExprType.True */) {\n        // false implies anything\n        // anything implies true\n        return true;\n    }\n    if (p.type === 9 /* ContextKeyExprType.Or */) {\n        if (q.type === 9 /* ContextKeyExprType.Or */) {\n            // `a || b || c` can only imply something like `a || b || c || d`\n            return allElementsIncluded(p.expr, q.expr);\n        }\n        return false;\n    }\n    if (q.type === 9 /* ContextKeyExprType.Or */) {\n        for (const element of q.expr) {\n            if (implies(p, element)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    if (p.type === 6 /* ContextKeyExprType.And */) {\n        if (q.type === 6 /* ContextKeyExprType.And */) {\n            // `a && b && c` implies `a && c`\n            return allElementsIncluded(q.expr, p.expr);\n        }\n        for (const element of p.expr) {\n            if (implies(element, q)) {\n                return true;\n            }\n        }\n        return false;\n    }\n    return p.equals(q);\n}\n/**\n * Returns true if all elements in `p` are also present in `q`.\n * The two arrays are assumed to be sorted\n */\nfunction allElementsIncluded(p, q) {\n    let pIndex = 0;\n    let qIndex = 0;\n    while (pIndex < p.length && qIndex < q.length) {\n        const cmp = p[pIndex].cmp(q[qIndex]);\n        if (cmp < 0) {\n            // an element from `p` is missing from `q`\n            return false;\n        }\n        else if (cmp === 0) {\n            pIndex++;\n            qIndex++;\n        }\n        else {\n            qIndex++;\n        }\n    }\n    return (pIndex === p.length);\n}\nfunction getTerminals(node) {\n    if (node.type === 9 /* ContextKeyExprType.Or */) {\n        return node.expr;\n    }\n    return [node];\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isIOS, isLinux, isMacintosh, isMobile, isWeb, isWindows } from '../../../base/common/platform.js';\nimport { localize } from '../../../nls.js';\nimport { RawContextKey } from './contextkey.js';\nexport const IsMacContext = new RawContextKey('isMac', isMacintosh, localize('isMac', \"Whether the operating system is macOS\"));\nexport const IsLinuxContext = new RawContextKey('isLinux', isLinux, localize('isLinux', \"Whether the operating system is Linux\"));\nexport const IsWindowsContext = new RawContextKey('isWindows', isWindows, localize('isWindows', \"Whether the operating system is Windows\"));\nexport const IsWebContext = new RawContextKey('isWeb', isWeb, localize('isWeb', \"Whether the platform is a web browser\"));\nexport const IsMacNativeContext = new RawContextKey('isMacNative', isMacintosh && !isWeb, localize('isMacNative', \"Whether the operating system is macOS on a non-browser platform\"));\nexport const IsIOSContext = new RawContextKey('isIOS', isIOS, localize('isIOS', \"Whether the operating system is iOS\"));\nexport const IsMobileContext = new RawContextKey('isMobile', isMobile, localize('isMobile', \"Whether the platform is a mobile web browser\"));\nexport const IsDevelopmentContext = new RawContextKey('isDevelopment', false, true);\nexport const ProductQualityContext = new RawContextKey('productQualityType', '', localize('productQualityType', \"Quality type of VS Code\"));\nexport const InputFocusedContextKey = 'inputFocus';\nexport const InputFocusedContext = new RawContextKey(InputFocusedContextKey, false, localize('inputFocus', \"Whether keyboard focus is inside an input box\"));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { ModifierKeyEmitter } from '../../../base/browser/dom.js';\nimport { Separator } from '../../../base/common/actions.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { createAndFillInContextMenuActions } from '../../actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../actions/common/actions.js';\nimport { IContextKeyService } from '../../contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../keybinding/common/keybinding.js';\nimport { INotificationService } from '../../notification/common/notification.js';\nimport { ITelemetryService } from '../../telemetry/common/telemetry.js';\nimport { ContextMenuHandler } from './contextMenuHandler.js';\nimport { IContextViewService } from './contextView.js';\nlet ContextMenuService = class ContextMenuService extends Disposable {\n    get contextMenuHandler() {\n        if (!this._contextMenuHandler) {\n            this._contextMenuHandler = new ContextMenuHandler(this.contextViewService, this.telemetryService, this.notificationService, this.keybindingService);\n        }\n        return this._contextMenuHandler;\n    }\n    constructor(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService) {\n        super();\n        this.telemetryService = telemetryService;\n        this.notificationService = notificationService;\n        this.contextViewService = contextViewService;\n        this.keybindingService = keybindingService;\n        this.menuService = menuService;\n        this.contextKeyService = contextKeyService;\n        this._contextMenuHandler = undefined;\n        this._onDidShowContextMenu = this._store.add(new Emitter());\n        this._onDidHideContextMenu = this._store.add(new Emitter());\n    }\n    configure(options) {\n        this.contextMenuHandler.configure(options);\n    }\n    // ContextMenu\n    showContextMenu(delegate) {\n        delegate = ContextMenuMenuDelegate.transform(delegate, this.menuService, this.contextKeyService);\n        this.contextMenuHandler.showContextMenu(Object.assign(Object.assign({}, delegate), { onHide: (didCancel) => {\n                var _a;\n                (_a = delegate.onHide) === null || _a === void 0 ? void 0 : _a.call(delegate, didCancel);\n                this._onDidHideContextMenu.fire();\n            } }));\n        ModifierKeyEmitter.getInstance().resetKeyStatus();\n        this._onDidShowContextMenu.fire();\n    }\n};\nContextMenuService = __decorate([\n    __param(0, ITelemetryService),\n    __param(1, INotificationService),\n    __param(2, IContextViewService),\n    __param(3, IKeybindingService),\n    __param(4, IMenuService),\n    __param(5, IContextKeyService)\n], ContextMenuService);\nexport { ContextMenuService };\nexport var ContextMenuMenuDelegate;\n(function (ContextMenuMenuDelegate) {\n    function is(thing) {\n        return thing && thing.menuId instanceof MenuId;\n    }\n    function transform(delegate, menuService, globalContextKeyService) {\n        if (!is(delegate)) {\n            return delegate;\n        }\n        const { menuId, menuActionOptions, contextKeyService } = delegate;\n        return Object.assign(Object.assign({}, delegate), { getActions: () => {\n                const target = [];\n                if (menuId) {\n                    const menu = menuService.createMenu(menuId, contextKeyService !== null && contextKeyService !== void 0 ? contextKeyService : globalContextKeyService);\n                    createAndFillInContextMenuActions(menu, menuActionOptions, target);\n                    menu.dispose();\n                }\n                if (!delegate.getActions) {\n                    return target;\n                }\n                else {\n                    return Separator.join(delegate.getActions(), target);\n                }\n            } });\n    }\n    ContextMenuMenuDelegate.transform = transform;\n})(ContextMenuMenuDelegate || (ContextMenuMenuDelegate = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, EventType, getActiveElement, isAncestor, isHTMLElement } from '../../../base/browser/dom.js';\nimport { StandardMouseEvent } from '../../../base/browser/mouseEvent.js';\nimport { Menu } from '../../../base/browser/ui/menu/menu.js';\nimport { ActionRunner } from '../../../base/common/actions.js';\nimport { isCancellationError } from '../../../base/common/errors.js';\nimport { combinedDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { defaultMenuStyles } from '../../theme/browser/defaultStyles.js';\nexport class ContextMenuHandler {\n    constructor(contextViewService, telemetryService, notificationService, keybindingService) {\n        this.contextViewService = contextViewService;\n        this.telemetryService = telemetryService;\n        this.notificationService = notificationService;\n        this.keybindingService = keybindingService;\n        this.focusToReturn = null;\n        this.lastContainer = null;\n        this.block = null;\n        this.blockDisposable = null;\n        this.options = { blockMouse: true };\n    }\n    configure(options) {\n        this.options = options;\n    }\n    showContextMenu(delegate) {\n        const actions = delegate.getActions();\n        if (!actions.length) {\n            return; // Don't render an empty context menu\n        }\n        this.focusToReturn = document.activeElement;\n        let menu;\n        const shadowRootElement = isHTMLElement(delegate.domForShadowRoot) ? delegate.domForShadowRoot : undefined;\n        this.contextViewService.showContextView({\n            getAnchor: () => delegate.getAnchor(),\n            canRelayout: false,\n            anchorAlignment: delegate.anchorAlignment,\n            anchorAxisAlignment: delegate.anchorAxisAlignment,\n            render: (container) => {\n                var _a;\n                this.lastContainer = container;\n                const className = delegate.getMenuClassName ? delegate.getMenuClassName() : '';\n                if (className) {\n                    container.className += ' ' + className;\n                }\n                // Render invisible div to block mouse interaction in the rest of the UI\n                if (this.options.blockMouse) {\n                    this.block = container.appendChild($('.context-view-block'));\n                    this.block.style.position = 'fixed';\n                    this.block.style.cursor = 'initial';\n                    this.block.style.left = '0';\n                    this.block.style.top = '0';\n                    this.block.style.width = '100%';\n                    this.block.style.height = '100%';\n                    this.block.style.zIndex = '-1';\n                    (_a = this.blockDisposable) === null || _a === void 0 ? void 0 : _a.dispose();\n                    this.blockDisposable = addDisposableListener(this.block, EventType.MOUSE_DOWN, e => e.stopPropagation());\n                }\n                const menuDisposables = new DisposableStore();\n                const actionRunner = delegate.actionRunner || new ActionRunner();\n                actionRunner.onWillRun(evt => this.onActionRun(evt, !delegate.skipTelemetry), this, menuDisposables);\n                actionRunner.onDidRun(this.onDidActionRun, this, menuDisposables);\n                menu = new Menu(container, actions, {\n                    actionViewItemProvider: delegate.getActionViewItem,\n                    context: delegate.getActionsContext ? delegate.getActionsContext() : null,\n                    actionRunner,\n                    getKeyBinding: delegate.getKeyBinding ? delegate.getKeyBinding : action => this.keybindingService.lookupKeybinding(action.id)\n                }, defaultMenuStyles);\n                menu.onDidCancel(() => this.contextViewService.hideContextView(true), null, menuDisposables);\n                menu.onDidBlur(() => this.contextViewService.hideContextView(true), null, menuDisposables);\n                menuDisposables.add(addDisposableListener(window, EventType.BLUR, () => this.contextViewService.hideContextView(true)));\n                menuDisposables.add(addDisposableListener(window, EventType.MOUSE_DOWN, (e) => {\n                    if (e.defaultPrevented) {\n                        return;\n                    }\n                    const event = new StandardMouseEvent(e);\n                    let element = event.target;\n                    // Don't do anything as we are likely creating a context menu\n                    if (event.rightButton) {\n                        return;\n                    }\n                    while (element) {\n                        if (element === container) {\n                            return;\n                        }\n                        element = element.parentElement;\n                    }\n                    this.contextViewService.hideContextView(true);\n                }));\n                return combinedDisposable(menuDisposables, menu);\n            },\n            focus: () => {\n                menu === null || menu === void 0 ? void 0 : menu.focus(!!delegate.autoSelectFirstItem);\n            },\n            onHide: (didCancel) => {\n                var _a, _b, _c;\n                (_a = delegate.onHide) === null || _a === void 0 ? void 0 : _a.call(delegate, !!didCancel);\n                if (this.block) {\n                    this.block.remove();\n                    this.block = null;\n                }\n                (_b = this.blockDisposable) === null || _b === void 0 ? void 0 : _b.dispose();\n                this.blockDisposable = null;\n                if (!!this.lastContainer && (getActiveElement() === this.lastContainer || isAncestor(getActiveElement(), this.lastContainer))) {\n                    (_c = this.focusToReturn) === null || _c === void 0 ? void 0 : _c.focus();\n                }\n                this.lastContainer = null;\n            }\n        }, shadowRootElement, !!shadowRootElement);\n    }\n    onActionRun(e, logTelemetry) {\n        if (logTelemetry) {\n            this.telemetryService.publicLog2('workbenchActionExecuted', { id: e.action.id, from: 'contextMenu' });\n        }\n        this.contextViewService.hideContextView(false);\n    }\n    onDidActionRun(e) {\n        if (e.error && !isCancellationError(e.error)) {\n            this.notificationService.error(e.error);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../instantiation/common/instantiation.js';\nexport const IContextViewService = createDecorator('contextViewService');\nexport const IContextMenuService = createDecorator('contextMenuService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { ContextView } from '../../../base/browser/ui/contextview/contextview.js';\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { ILayoutService } from '../../layout/browser/layoutService.js';\nlet ContextViewService = class ContextViewService extends Disposable {\n    constructor(layoutService) {\n        super();\n        this.layoutService = layoutService;\n        this.currentViewDisposable = Disposable.None;\n        this.container = layoutService.hasContainer ? layoutService.container : null;\n        this.contextView = this._register(new ContextView(this.container, 1 /* ContextViewDOMPosition.ABSOLUTE */));\n        this.layout();\n        this._register(layoutService.onDidLayout(() => this.layout()));\n    }\n    // ContextView\n    setContainer(container, domPosition) {\n        this.contextView.setContainer(container, domPosition || 1 /* ContextViewDOMPosition.ABSOLUTE */);\n    }\n    showContextView(delegate, container, shadowRoot) {\n        if (container) {\n            if (container !== this.container || this.shadowRoot !== shadowRoot) {\n                this.container = container;\n                this.setContainer(container, shadowRoot ? 3 /* ContextViewDOMPosition.FIXED_SHADOW */ : 2 /* ContextViewDOMPosition.FIXED */);\n            }\n        }\n        else {\n            if (this.layoutService.hasContainer && this.container !== this.layoutService.container) {\n                this.container = this.layoutService.container;\n                this.setContainer(this.container, 1 /* ContextViewDOMPosition.ABSOLUTE */);\n            }\n        }\n        this.shadowRoot = shadowRoot;\n        this.contextView.show(delegate);\n        const disposable = toDisposable(() => {\n            if (this.currentViewDisposable === disposable) {\n                this.hideContextView();\n            }\n        });\n        this.currentViewDisposable = disposable;\n        return disposable;\n    }\n    getContextViewElement() {\n        return this.contextView.getViewElement();\n    }\n    layout() {\n        this.contextView.layout();\n    }\n    hideContextView(data) {\n        this.contextView.hide(data);\n    }\n};\nContextViewService = __decorate([\n    __param(0, ILayoutService)\n], ContextViewService);\nexport { ContextViewService };\n"],"names":["isPseudo","document","location","hash","indexOf","_format","message","args","result","length","replace","match","rest","index","arg","String","localize","data","_len","arguments","Array","_key","getConfiguredDefaultLocale","_","__decorate","decorators","target","key","desc","d","c","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","AccessibilityService","_Disposable","_inherits","_super","_createSuper","_contextKeyService","_layoutService","_configurationService","_this","_classCallCheck","call","_accessibilitySupport","_onDidChangeScreenReaderOptimized","Emitter","_onDidChangeReducedMotion","_accessibilityModeEnabledContext","CONTEXT_ACCESSIBILITY_MODE_ENABLED","bindTo","updateContextKey","set","isScreenReaderOptimized","_register","onDidChangeConfiguration","e","affectsConfiguration","fire","_configMotionReduced","getValue","onDidChangeScreenReaderOptimized","reduceMotionMatcher","window","matchMedia","_systemMotionReduced","matches","initReducedMotionListeners","_createClass","value","_this2","this","hasContainer","addDisposableListener","updateRootClasses","reduce","isMotionReduced","container","classList","toggle","onDidChangeReducedMotion","get","event","config","Disposable","IContextKeyService","ILayoutService","IConfigurationService","IAccessibilityService","createDecorator","RawContextKey","Categories","freeze","View","original","Help","Test","File","Preferences","Developer","comment","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","then","apply","acceptSelectedActionCommand","previewSelectedActionCommand","HeaderRenderer","add","text","createElement","append","element","_index","templateData","_a","_b","textContent","group","title","_templateData","ActionItemRenderer","_supportsPreview","_keybindingService","templateId","icon","className","keybinding","KeybindingLabel","OS","_c","ThemeIcon","asClassName","color","style","asCssVariable","id","Codicon","lightBulb","item","label","stripNewlines","dom","setVisibility","actionTitle","lookupKeybinding","getLabel","previewTitle","disabled","canPreview","IKeybindingService","AcceptSelectedEvent","_UIEvent","_wrapNativeSuper","UIEvent","PreviewSelectedEvent","_UIEvent2","_super2","getKeyboardNavigationLabel","kind","ActionList","_super3","user","preview","items","_delegate","_contextViewService","_actionLineHeight","_headerLineHeight","cts","CancellationTokenSource","domNode","virtualDelegate","getHeight","getTemplateId","_list","List","keyboardSupport","typeNavigationEnabled","keyboardNavigationLabelProvider","accessibilityProvider","getAriaLabel","getWidgetAriaLabel","getRole","getWidgetRole","defaultListStyles","onMouseClick","onListClick","onMouseOver","onListHover","onDidChangeFocus","onFocus","onDidChangeSelection","onListSelection","_allMenuItems","splice","focusNext","didCancel","onHide","cancel","hideContextView","minWidth","numHeaders","filter","heightWithHeaders","layout","itemWidths","map","getElementById","getElementID","width","getBoundingClientRect","Math","max","_toConsumableArray","concat","height","min","body","clientHeight","domFocus","focusPrevious","undefined","focusCondition","focused","getFocus","focusIndex","setSelection","elements","onSelect","browserEvent","_regeneratorRuntime","mark","_callee","wrap","_context","prev","onHover","token","sent","setFocus","stop","str","IContextViewService","registerColor","dark","inputActiveOptionBackground","light","hcDark","hcLight","ActionWidgetContextKeys","Visible","IActionWidgetService","ActionWidgetService","_instantiationService","MutableDisposable","supportsPreview","delegate","anchor","actionBarActions","visibleContext","list","createInstance","showContextView","getAnchor","render","_renderWidget","reset","_onWidgetClosed","acceptSelected","hide","clear","_this3","widget","appendChild","Error","renderDisposables","DisposableStore","menuBlock","block","EventType","MOUSE_DOWN","stopPropagation","pointerBlockDiv","pointerBlock","POINTER_MOVE","remove","actionBarWidth","actionBar","_createActionBar","getContainer","parentElement","offsetWidth","focusTracker","trackFocus","onDidBlur","actions","$","ActionBar","push","IInstantiationService","registerSingleton","weight","registerAction2","_Action","_class","precondition","primary","secondary","accessor","Action2","_Action2","_class2","mac","widgetService","_Action3","_class3","_super4","_Action4","_class4","_super5","_Action5","_class5","_super6","createAndFillInContextMenuActions","menu","options","primaryGroup","groups","getActions","modifierKeyEmitter","ModifierKeyEmitter","getInstance","fillInActions","keyStatus","altKey","isWindows","isLinux","shiftKey","actionGroup","createAndFillInActionBarActions","shouldInlineSubmenu","useSeparatorsInPrimaryActions","useAlternativeActions","primaryBucket","secondaryBucket","isPrimaryAction","isArray","_step","submenuInfo","Set","_iterator","_createForOfIteratorHelper","s","n","_step$value","_slicedToArray","Separator","_step3","_iterator3","action","MenuItemAction","alt","newLen","SubmenuAction","err","f","_step2","_iterator2","_step2$value","submenuActions","MenuEntryActionViewItem","_ActionViewItem","_notificationService","_themeService","_contextMenuService","_accessibilityService","class","draggable","hoverDelegate","_wantsAltCommand","_itemClassDispose","_altKey","_action","_menuItemAction","preventDefault","actionRunner","run","_commandAction","t0","error","_get","_getPrototypeOf","prototype","_updateItemClass","isMouseOver","updateAltState","wantsAltCommand","enabled","updateLabel","updateTooltip","updateClass","keybindingLabel","tooltip","altTooltip","altKeybinding","altKeybindingLabel","altTitleSection","UILabelProvider","modifierLabels","thing","checked","toggled","condition","isThemeIcon","_label$classList","iconClasses","asClassNameArray","toDisposable","_label$classList2","svgUrl","isDark","getColorTheme","type","asCSSUrl","svgIcon","webkitMask","mask","background","display","combinedDisposable","onDidColorThemeChange","ActionViewItem","INotificationService","IThemeService","IContextMenuService","SubmenuEntryActionViewItem","_DropdownMenuActionVi","_this4","dropdownOptions","assign","menuAsChild","classNames","keybindingProvider","_this5","assertType","setBackgroundImage","backgroundImage","DropdownMenuActionViewItem","DropdownWithDefaultActionViewItem","_BaseActionViewItem","submenuAction","_menuService","_instaService","_storageService","_this6","defaultAction","_container","_options","_storageKey","submenu","defaultActionId","persistLastActionId","find","a","_defaultAction","_getDefaultActionKeybindingLabel","ActionRunner","_dropdown","onDidRun","update","lastAction","store","dispose","_ActionRunner","context","_callee2","_context2","prepend","defaultActionKeybinding","renderKeybindingWithDefaultActionLabel","kb","newContext","setActionContext","_this7","primaryContainer","KEY_DOWN","StandardKeyboardEvent","equals","tabIndex","focus","dropdownContainer","setFocusable","fromRight","blur","focusable","BaseActionViewItem","IMenuService","IStorageService","SubmenuEntrySelectActionViewItem","_SelectActionViewItem","contextViewService","_this8","ID","isDisabled","defaultSelectBoxStyles","ariaLabel","optionsAsChildren","select","findIndex","borderColor","selectBorder","option","SelectActionViewItem","createActionViewItem","instaService","SubmenuItemAction","isSelection","rememberDefaultAction","WorkbenchToolBar","_ToolBar","keybindingService","telemetryService","getKeyBinding","allowContextMenu","skipTelemetry","telemetrySource","_sessionDisposables","_store","publicLog2","from","_primary","_secondary","menuIds","slice","toggleActions","toggleActionsCheckedCount","extraSecondary","someAreHidden","hiddenItemStrategy","hideActions","isHidden","overflowBehavior","exemptedIds","intersection","exempted","Iterable","maxItems","size","count","has","coalesceInPlace","join","getElement","_d","_e","StandardMouseEvent","getItemAction","hideAction","noHide","toAction","resetMenu","resetHiddenStates","showContextMenu","menuId","contextMenu","menuActionOptions","renderShortTitle","menuOptions","contextKeyService","ToolBar","ITelemetryService","MenuItemAction_1","__rest","t","p","hasOwnProperty","getOwnPropertySymbols","propertyIsEnumerable","isIMenuItem","command","isISubmenuItem","MenuId","identifier","_instances","TypeError","Map","CommandPalette","DebugBreakpointsContext","DebugCallStackContext","DebugConsoleContext","DebugVariablesContext","DebugWatchContext","DebugToolBar","DebugToolBarStop","EditorContext","SimpleEditorContext","EditorContent","EditorLineNumberContext","EditorContextCopy","EditorContextPeek","EditorContextShare","EditorTitle","EditorTitleRun","EditorTitleContext","EditorTitleContextShare","EmptyEditorGroup","EmptyEditorGroupContext","EditorTabsBarContext","ExplorerContext","ExplorerContextShare","ExtensionContext","GlobalActivity","CommandCenter","CommandCenterCenter","LayoutControlMenuSubmenu","LayoutControlMenu","MenubarMainMenu","MenubarAppearanceMenu","MenubarDebugMenu","MenubarEditMenu","MenubarCopy","MenubarFileMenu","MenubarGoMenu","MenubarHelpMenu","MenubarLayoutMenu","MenubarNewBreakpointMenu","PanelAlignmentMenu","PanelPositionMenu","MenubarPreferencesMenu","MenubarRecentMenu","MenubarSelectionMenu","MenubarShare","MenubarSwitchEditorMenu","MenubarSwitchGroupMenu","MenubarTerminalMenu","MenubarViewMenu","MenubarHomeMenu","OpenEditorsContext","OpenEditorsContextShare","ProblemsPanelContext","SCMChangeContext","SCMResourceContext","SCMResourceContextShare","SCMResourceFolderContext","SCMResourceGroupContext","SCMSourceControl","SCMTitle","SearchContext","SearchActionMenu","StatusBarWindowIndicatorMenu","StatusBarRemoteIndicatorMenu","StickyScrollContext","TestItem","TestItemGutter","TestMessageContext","TestMessageContent","TestPeekElement","TestPeekTitle","TouchBarContext","TitleBarContext","TitleBarTitleContext","TunnelContext","TunnelPrivacy","TunnelProtocol","TunnelPortInline","TunnelTitle","TunnelLocalAddressInline","TunnelOriginInline","ViewItemContext","ViewContainerTitle","ViewContainerTitleContext","ViewTitle","ViewTitleContext","CommentEditorActions","CommentThreadTitle","CommentThreadActions","CommentThreadAdditionalActions","CommentThreadTitleContext","CommentThreadCommentContext","CommentTitle","CommentActions","InteractiveToolbar","InteractiveCellTitle","InteractiveCellDelete","InteractiveCellExecute","InteractiveInputExecute","NotebookToolbar","NotebookStickyScrollContext","NotebookCellTitle","NotebookCellDelete","NotebookCellInsert","NotebookCellBetween","NotebookCellListTop","NotebookCellExecute","NotebookCellExecutePrimary","NotebookDiffCellInputTitle","NotebookDiffCellMetadataTitle","NotebookDiffCellOutputsTitle","NotebookOutputToolbar","NotebookEditorLayoutConfigure","NotebookKernelSource","BulkEditTitle","BulkEditContext","TimelineItemContext","TimelineTitle","TimelineTitleContext","TimelineFilterSubMenu","AccountsContext","PanelTitle","AuxiliaryBarTitle","TerminalInstanceContext","TerminalEditorInstanceContext","TerminalNewDropdownContext","TerminalTabContext","TerminalTabEmptyAreaContext","WebviewContext","InlineCompletionsActions","NewFile","MergeInput1Toolbar","MergeInput2Toolbar","MergeBaseToolbar","MergeInputResultToolbar","InlineSuggestionToolbar","ChatContext","ChatCodeBlock","ChatMessageTitle","ChatExecute","ChatInputSide","AccessibleView","MenuRegistryChangeEvent","candidate","_all","events","ids","MenuRegistry","_commands","_menuItems","_onDidChangeMenu","MicrotaskEmitter","merge","onDidChangeMenu","for","delete","forEach","LinkedList","rm","appendMenuItem","_appendImplicitItems","_SubmenuAction","_commandService","contextMatchesRules","_this$_commandService","runArgs","shouldForwardArgs","executeCommand","shortTitle","ICommandService","ctor","disposables","f1","description","CommandsRegistry","registerCommand","handler","_len2","_key2","_step4","_iterator4","when","addCommand","_step5","_iterator5","KeybindingsRegistry","registerKeybindingRule","ContextKeyExpr","and","PersistedMenuHideState_1","MenuInfo_1","MenuService","storageService","_hiddenStates","PersistedMenuHideState","MenuImpl","emitEventsForSubmenuChanges","eventDebounceDelay","_disposables","_onDidChange","onDidChange","_ignoreChangeEvent","_hiddenByDefaultCache","raw","_data","JSON","parse","create","onDidChangeValue","console","log","commandId","hidden","hiddenByDefault","_isHiddenByDefault","state","includes","entries","idx","removeFastWithoutKeepingOrder","_persist","menus","stringify","MenuInfo","_id","_collectContextKeysForSubmenus","_menuGroups","_structureContextKeys","_preconditionContextKeys","_toggledContextKeys","refresh","menuItems","getMenuItems","sort","_compareMenuItems","groupName","_collectContextKeys","_fillInKbExprKeys","toggledExpression","_group","activeActions","isMenuItem","setDefaultState","isHiddenByDefault","menuHide","createMenuHide","createActionGroups","g","exp","keys","b","aGroup","bGroup","localeCompare","aPrio","order","bPrio","_compareTitles","aStr","bStr","hiddenStates","commandService","_menuInfo","rebuildMenuSoon","RunOnceScheduler","isStructuralChange","isEnablementChange","isToggleChange","schedule","lazyListener","DebounceEmitter","onWillAddFirstListener","onDidChangeContext","affectsSome","structureContextKeys","preconditionContextKeys","toggledContextKeys","onDidRemoveLastListener","bind","delay","_step6","_iterator6","states","updateHidden","IAudioCueService","Sound","fileName","register","warning","foldedArea","break","quickFixes","taskCompleted","taskFailed","terminalBell","diffLineInserted","diffLineDeleted","diffLineModified","chatRequestSent","chatResponsePending","chatResponseReceived1","chatResponseReceived2","chatResponseReceived3","chatResponseReceived4","SoundSource","randomOneOf","AudioCue","sound","name","settingsKey","audioCue","_audioCues","inlineSuggestion","terminalQuickFix","onDebugBreak","noInlayHints","terminalCommandFailed","notebookCellCompleted","notebookCellFailed","chatResponseReceived","BrowserClipboardService","layoutService","logService","mapTextToType","findText","resources","isSafari","isWebkitWebView","installWebKitWriteTextWorkaround","currentWritePromise","DeferredPromise","webKitPendingClipboardWritePromise","isSettled","navigator","clipboard","write","ClipboardItem","catch","isRejected","activeElement","textArea","abrupt","complete","writeText","position","execCommand","HTMLElement","removeChild","_callee3","_context3","readText","_callee4","_context4","_callee5","_context5","_callee6","_context6","_callee7","_context7","ILogService","IClipboardService","_onDidRegisterCommand","onDidRegisterCommand","idOrCommand","constraints","constraint","actualHandler","validateConstraints","commands","removeFn","unshift","ret","isEmpty","oldId","newId","_accessor$get","first","getCommand","toValuesTree","properties","conflictReporter","root","addToValueTree","settingsTreeRoot","segments","split","last","pop","curr","obj","removeFromValueTree","valueTree","doRemoveFromValueTree","shift","getConfigurationValue","settingPath","defaultValue","path","current","component","accessSetting","getLanguageTagSettingPlainKey","settingKey","isFrozen","objects","ConfigurationModel","_contents","_keys","_overrides","overrideConfigurations","_rawConfiguration","rawConfigurationModels","parser","ConfigurationModelParser","parseRaw","configurationModel","previous","section","contents","overrideIdentifier","rawConfiguration","override","getOverrideValue","merged","overrideContents","getContentsForOverrideIdentifer","overrideConfigurationModel","createOverrideConfigurationModel","overrides","raws","others","_i","_others","other","mergeContents","_loop","_override$keys","otherOverride","_overrides$filter","o","arrays","identifiers","every","contentsForKey","overrideContentsForKey","source","_i2","_Object$keys","types","contentsForIdentifierOnly","contentsToMerge","updateValue","OVERRIDE_PROPERTY_REGEX","test","overrideIdentifiersFromKey","_name","_raw","_configurationModel","_restrictedConfigurations","_this$doParseRaw","doParseRaw","restricted","hasExcludedProperties","configurationProperties","Registry","as","Extensions","Configuration","getConfigurationProperties","filtered","toOverrides","filterOverriddenProperties","scopes","skipRestricted","exclude","propertySchema","scope","include","_i3","_Object$keys2","overrideRaw","keyInOverrideRaw","ConfigurationInspectValue","_value","overrideIdentifiers","defaultConfiguration","policyConfiguration","applicationConfiguration","userConfiguration","localUserConfiguration","remoteUserConfiguration","workspaceConfiguration","folderConfigurationModel","memoryConfigurationModel","model","inspectValue","inspect","_userInspectValue","userInspectValue","_defaultConfiguration","_policyConfiguration","_applicationConfiguration","_localUserConfiguration","_remoteUserConfiguration","_workspaceConfiguration","_folderConfigurations","ResourceMap","_memoryConfiguration","_memoryConfigurationByResource","_workspaceConsolidatedConfiguration","_foldersConsolidatedConfigurations","_userConfiguration","workspace","getConsolidatedConfigurationModel","memoryConfiguration","resource","removeValue","setValue","consolidateConfigurationModel","getFolderConfigurationModelForResource","getConsolidatedConfigurationModelForResource","_ref","consolidateConfiguration","getWorkspaceConsolidatedConfiguration","getFolder","getFolderConsolidatedConfiguration","uri","memoryConfigurationForResource","folder","folderConsolidatedConfiguration","workspaceConsolidateConfiguration","folderConfiguration","defaults","policy","application","folders","_this4$_folderConfigu","parseConfigurationModel","URI","revive","ConfigurationChangeEvent","change","currentConfiguraiton","currentWorkspace","_marker","_markerCode1","charCodeAt","_markerCode2","affectedKeys","_previousConfiguration","_step7","_iterator7","_step8","_iterator8","_step10","_iterator10","_affectsConfigStr","_step9","_iterator9","needle","pos","code","value1","previousConfiguration","value2","allSettings","patternProperties","applicationSettings","machineSettings","machineOverridableSettings","windowSettings","resourceSettings","resourceLanguageSettingsSchemaId","contributionRegistry","JSONExtensions","JSONContribution","ConfigurationRegistry","_onDidSchemaChange","_onDidUpdateConfiguration","configurationDefaultsOverrides","defaultLanguageConfigurationOverridesNode","nls","configurationContributors","resourceLanguageSettingsSchema","additionalProperties","allowTrailingCommas","allowComments","policyConfigurations","excludedConfigurationProperties","registerSchema","registerOverridePropertyPatternKey","configuration","validate","registerConfigurations","configurations","doRegisterConfigurations","configurationDefaults","doRegisterDefaultConfigurations","defaultsOverrides","bucket","configurationDefaultOverride","valuesSources","plainKey","property","default","$ref","defaultDefaultValue","defaultValueSource","updatePropertyDefaultValue","updateSchema","doRegisterOverrideIdentifiers","updateOverridePropertyPatternKey","validateAndRegisterProperties","extensionInfo","restrictedProperties","registerJSONConfiguration","validateProperty","included","deprecationMessage","markdownDeprecationMessage","subNodes","allOf","node","values","overrideIdentifierProperty","resourceLanguagePropertiesSchema","errorMessage","OVERRIDE_PROPERTY_PATTERN","configurationdefaultOverride","defaultSource","getDefaultValue","OVERRIDE_IDENTIFIER_PATTERN","OVERRIDE_IDENTIFIER_REGEX","RegExp","exec","trim","distinct","configurationRegistry","schema","getPolicyConfigurations","DefaultConfiguration","resetConfigurationModel","updateConfigurationModel","getConfigurationDefaultOverrides","defaultOverrideValue","addValue","KEYBINDING_CONTEXT_ATTR","Context","parent","_parent","NullContext","_Context","INSTANCE","ConfigAwareContextValuesContainer","_Context2","emitter","_values","TernarySearchTree","forConfigKeys","_listener","allKeys","ArrayContextKeyChangeEvent","changedKeys","configKey","contextKey","cachedItems","findSuperstr","_ref3","deleteSuperstr","_keyPrefix","substr","configValue","ContextKey","service","_service","_defaultValue","setContext","removeContext","getContextKeyValue","SimpleContextKeyChangeEvent","CompositeContextKeyChangeEvent","evt","allKeysContainedIn","AbstractContextKeyService","myContextId","_onDidChangeContext","PauseableEmitter","input","_isDisposed","_myContextId","callback","pause","resume","ScopedContextKeyService","rules","getContextValuesContainer","evaluate","myContext","hasAttribute","attr","getAttribute","parseInt","NaN","findContextAttr","ContextKeyService","_AbstractContextKeySe","configurationService","_contexts","_lastContextId","contextId","parentContextId","_AbstractContextKeySe2","createChildContext","_parentChangeListener","_updateParentChangeListener","_domNode","extraInfo","setAttribute","thisContextValues","disposeContext","removeAttribute","contextValue","createKey","cloneAndChange","$mid","toString","stringifyURIs","all","seen","info","hintDidYouMean","hintDidYouForgetToOpenOrCloseQuote","hintDidYouForgetToEscapeSlash","Scanner","_input","_start","_current","_tokens","_errors","stringRe","_isAtEnd","_advance","_addToken","_match","isTripleEq","offset","_quotedString","_regex","_error","_string","expected","additional","lexeme","substring","errToken","additionalInfo","lastIndex","keyword","_keywords","_peek","inEscape","inCharacterClass","ch","_regexFlags","illegalState","CONSTANT_VALUES","isMacintosh","isWeb","isEdge","isFirefox","isChrome","defaultConfig","regexParsingWithErrorRecovery","errorEmptyString","hintEmptyString","errorNoInAfterNot","errorClosingParenthesis","errorUnexpectedToken","hintUnexpectedToken","errorUnexpectedEOF","hintUnexpectedEOF","Parser","_config","_scanner","_parsingErrors","_flagsGYRe","scan","expr","_expr","peek","getLexeme","_parseError","_or","_and","_matchOne","right","or","_term","ContextKeyFalseExpr","ContextKeyTrueExpr","_consume","negate","ContextKeyNotExpr","_errExpectedButGot","true","false","regexp","regexLexeme","closingSlashIndex","lastIndexOf","flags","_removeFlagsGY","ContextKeyRegexExpr","lexemeReconstruction","followingToken","parenBalance","regex","serializedValue","isFalsyOrWhitespace","start","end","caseIgnoreFlag","notIn","_previous","not","notEquals","ContextKeySmallerExpr","ContextKeySmallerEqualsExpr","ContextKeyGreaterExpr","ContextKeyGreaterEqualsExpr","in","replaceAll","_check","got","ContextKeyDefinedExpr","ContextKeyEqualsExpr","ContextKeyNotEqualsExpr","ContextKeyInExpr","ContextKeyNotInExpr","ContextKeyAndExpr","ContextKeyOrExpr","serialized","_parser","expressionsAreEqualWithConstantSubstitution","aExpr","substituteConstants","bExpr","cmp","negated","cmp1","constantValue","cmp2","trueValue","valueKey","_negated","falseValue","withFloatOrStr","parseFloat","isNaN","thisSource","otherSource","ContextKeyNotRegexExpr","_actual","serialize","actual","eliminateConstantsInArray","arr","newArr","len","newExpr","j","exprArr","extraRedundantCheck","_normalizeArr","hasTrue","lastElement","secondToLastElement","isFinished","resultElement","el","LEFT","RIGHT","getTerminals","left","hasFalse","_ContextKeyDefinedExp","metaOrHide","_info","key1","key2","implies","q","allElementsIncluded","pIndex","qIndex","IsWindowsContext","IsWebContext","InputFocusedContextKey","isIOS","isMobile","ContextMenuMenuDelegate","ContextMenuHandler","notificationService","focusToReturn","lastContainer","blockDisposable","blockMouse","shadowRootElement","isHTMLElement","domForShadowRoot","canRelayout","anchorAlignment","anchorAxisAlignment","getMenuClassName","cursor","top","zIndex","menuDisposables","onWillRun","onActionRun","onDidActionRun","Menu","actionViewItemProvider","getActionViewItem","getActionsContext","defaultMenuStyles","onDidCancel","BLUR","defaultPrevented","rightButton","autoSelectFirstItem","getActiveElement","isAncestor","logTelemetry","isCancellationError","ContextMenuService","menuService","_contextMenuHandler","_onDidShowContextMenu","_onDidHideContextMenu","contextMenuHandler","configure","transform","resetKeyStatus","globalContextKeyService","createMenu","ContextViewService","currentViewDisposable","None","contextView","ContextView","onDidLayout","domPosition","setContainer","shadowRoot","show","disposable","getViewElement"],"sourceRoot":""}