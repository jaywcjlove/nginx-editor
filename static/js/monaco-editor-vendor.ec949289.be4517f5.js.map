{"version":3,"file":"static/js/monaco-editor-vendor.ec949289.be4517f5.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/standalone/browser/iPadShowKeyboard/iPadShowKeyboard.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/inspectTokens/inspectTokens.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneCommandsQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoLineQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneGotoSymbolQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickAccess/standaloneHelpQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/referenceSearch/standaloneReferenceSearch.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditorService.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/colorizer.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditor.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneEditor.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCompile.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneLanguages.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneLayoutService.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/quickInput/standaloneQuickInputService.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneServices.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/themes.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneThemeService.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/toggleHighContrast/toggleHighContrast.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCommon.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/monarch/monarchLexer.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/standaloneTheme.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './iPadShowKeyboard.css';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nexport class IPadShowKeyboard extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this.widget = null;\n        if (isIOS) {\n            this._register(editor.onDidChangeConfiguration(() => this.update()));\n            this.update();\n        }\n    }\n    update() {\n        const shouldHaveWidget = (!this.editor.getOption(90 /* EditorOption.readOnly */));\n        if (!this.widget && shouldHaveWidget) {\n            this.widget = new ShowKeyboardWidget(this.editor);\n        }\n        else if (this.widget && !shouldHaveWidget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n    dispose() {\n        super.dispose();\n        if (this.widget) {\n            this.widget.dispose();\n            this.widget = null;\n        }\n    }\n}\nIPadShowKeyboard.ID = 'editor.contrib.iPadShowKeyboard';\nclass ShowKeyboardWidget extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._domNode = document.createElement('textarea');\n        this._domNode.className = 'iPadShowKeyboard';\n        this._register(dom.addDisposableListener(this._domNode, 'touchstart', (e) => {\n            this.editor.focus();\n        }));\n        this._register(dom.addDisposableListener(this._domNode, 'focus', (e) => {\n            this.editor.focus();\n        }));\n        this.editor.addOverlayWidget(this);\n    }\n    dispose() {\n        this.editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return ShowKeyboardWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 1 /* OverlayWidgetPositionPreference.BOTTOM_RIGHT_CORNER */\n        };\n    }\n}\nShowKeyboardWidget.ID = 'editor.contrib.ShowKeyboardWidget';\nregisterEditorContribution(IPadShowKeyboard.ID, IPadShowKeyboard, 3 /* EditorContributionInstantiation.Eventually */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar InspectTokensController_1;\nimport './inspectTokens.css';\nimport { $, append, reset } from '../../../../base/browser/dom.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { TokenizationRegistry } from '../../../common/languages.js';\nimport { TokenMetadata } from '../../../common/encodedTokenAttributes.js';\nimport { NullState, nullTokenize, nullTokenizeEncoded } from '../../../common/languages/nullTokenize.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { InspectTokensNLS } from '../../../common/standaloneStrings.js';\nlet InspectTokensController = InspectTokensController_1 = class InspectTokensController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(InspectTokensController_1.ID);\n    }\n    constructor(editor, standaloneColorService, languageService) {\n        super();\n        this._editor = editor;\n        this._languageService = languageService;\n        this._widget = null;\n        this._register(this._editor.onDidChangeModel((e) => this.stop()));\n        this._register(this._editor.onDidChangeModelLanguage((e) => this.stop()));\n        this._register(TokenizationRegistry.onDidChange((e) => this.stop()));\n        this._register(this._editor.onKeyUp((e) => e.keyCode === 9 /* KeyCode.Escape */ && this.stop()));\n    }\n    dispose() {\n        this.stop();\n        super.dispose();\n    }\n    launch() {\n        if (this._widget) {\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._widget = new InspectTokensWidget(this._editor, this._languageService);\n    }\n    stop() {\n        if (this._widget) {\n            this._widget.dispose();\n            this._widget = null;\n        }\n    }\n};\nInspectTokensController.ID = 'editor.contrib.inspectTokens';\nInspectTokensController = InspectTokensController_1 = __decorate([\n    __param(1, IStandaloneThemeService),\n    __param(2, ILanguageService)\n], InspectTokensController);\nclass InspectTokens extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.inspectTokens',\n            label: InspectTokensNLS.inspectTokensAction,\n            alias: 'Developer: Inspect Tokens',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        const controller = InspectTokensController.get(editor);\n        controller === null || controller === void 0 ? void 0 : controller.launch();\n    }\n}\nfunction renderTokenText(tokenText) {\n    let result = '';\n    for (let charIndex = 0, len = tokenText.length; charIndex < len; charIndex++) {\n        const charCode = tokenText.charCodeAt(charIndex);\n        switch (charCode) {\n            case 9 /* CharCode.Tab */:\n                result += '\\u2192'; // &rarr;\n                break;\n            case 32 /* CharCode.Space */:\n                result += '\\u00B7'; // &middot;\n                break;\n            default:\n                result += String.fromCharCode(charCode);\n        }\n    }\n    return result;\n}\nfunction getSafeTokenizationSupport(languageIdCodec, languageId) {\n    const tokenizationSupport = TokenizationRegistry.get(languageId);\n    if (tokenizationSupport) {\n        return tokenizationSupport;\n    }\n    const encodedLanguageId = languageIdCodec.encodeLanguageId(languageId);\n    return {\n        getInitialState: () => NullState,\n        tokenize: (line, hasEOL, state) => nullTokenize(languageId, state),\n        tokenizeEncoded: (line, hasEOL, state) => nullTokenizeEncoded(encodedLanguageId, state)\n    };\n}\nclass InspectTokensWidget extends Disposable {\n    constructor(editor, languageService) {\n        super();\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this._editor = editor;\n        this._languageService = languageService;\n        this._model = this._editor.getModel();\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'tokens-inspect-widget';\n        this._tokenizationSupport = getSafeTokenizationSupport(this._languageService.languageIdCodec, this._model.getLanguageId());\n        this._compute(this._editor.getPosition());\n        this._register(this._editor.onDidChangeCursorPosition((e) => this._compute(this._editor.getPosition())));\n        this._editor.addContentWidget(this);\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n        super.dispose();\n    }\n    getId() {\n        return InspectTokensWidget._ID;\n    }\n    _compute(position) {\n        const data = this._getTokensAtLine(position.lineNumber);\n        let token1Index = 0;\n        for (let i = data.tokens1.length - 1; i >= 0; i--) {\n            const t = data.tokens1[i];\n            if (position.column - 1 >= t.offset) {\n                token1Index = i;\n                break;\n            }\n        }\n        let token2Index = 0;\n        for (let i = (data.tokens2.length >>> 1); i >= 0; i--) {\n            if (position.column - 1 >= data.tokens2[(i << 1)]) {\n                token2Index = i;\n                break;\n            }\n        }\n        const lineContent = this._model.getLineContent(position.lineNumber);\n        let tokenText = '';\n        if (token1Index < data.tokens1.length) {\n            const tokenStartIndex = data.tokens1[token1Index].offset;\n            const tokenEndIndex = token1Index + 1 < data.tokens1.length ? data.tokens1[token1Index + 1].offset : lineContent.length;\n            tokenText = lineContent.substring(tokenStartIndex, tokenEndIndex);\n        }\n        reset(this._domNode, $('h2.tm-token', undefined, renderTokenText(tokenText), $('span.tm-token-length', undefined, `${tokenText.length} ${tokenText.length === 1 ? 'char' : 'chars'}`)));\n        append(this._domNode, $('hr.tokens-inspect-separator', { 'style': 'clear:both' }));\n        const metadata = (token2Index << 1) + 1 < data.tokens2.length ? this._decodeMetadata(data.tokens2[(token2Index << 1) + 1]) : null;\n        append(this._domNode, $('table.tm-metadata-table', undefined, $('tbody', undefined, $('tr', undefined, $('td.tm-metadata-key', undefined, 'language'), $('td.tm-metadata-value', undefined, `${metadata ? metadata.languageId : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'token type'), $('td.tm-metadata-value', undefined, `${metadata ? this._tokenTypeToString(metadata.tokenType) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'font style'), $('td.tm-metadata-value', undefined, `${metadata ? this._fontStyleToString(metadata.fontStyle) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'foreground'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.foreground) : '-?-'}`)), $('tr', undefined, $('td.tm-metadata-key', undefined, 'background'), $('td.tm-metadata-value', undefined, `${metadata ? Color.Format.CSS.formatHex(metadata.background) : '-?-'}`)))));\n        append(this._domNode, $('hr.tokens-inspect-separator'));\n        if (token1Index < data.tokens1.length) {\n            append(this._domNode, $('span.tm-token-type', undefined, data.tokens1[token1Index].type));\n        }\n        this._editor.layoutContentWidget(this);\n    }\n    _decodeMetadata(metadata) {\n        const colorMap = TokenizationRegistry.getColorMap();\n        const languageId = TokenMetadata.getLanguageId(metadata);\n        const tokenType = TokenMetadata.getTokenType(metadata);\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\n        const foreground = TokenMetadata.getForeground(metadata);\n        const background = TokenMetadata.getBackground(metadata);\n        return {\n            languageId: this._languageService.languageIdCodec.decodeLanguageId(languageId),\n            tokenType: tokenType,\n            fontStyle: fontStyle,\n            foreground: colorMap[foreground],\n            background: colorMap[background]\n        };\n    }\n    _tokenTypeToString(tokenType) {\n        switch (tokenType) {\n            case 0 /* StandardTokenType.Other */: return 'Other';\n            case 1 /* StandardTokenType.Comment */: return 'Comment';\n            case 2 /* StandardTokenType.String */: return 'String';\n            case 3 /* StandardTokenType.RegEx */: return 'RegEx';\n            default: return '??';\n        }\n    }\n    _fontStyleToString(fontStyle) {\n        let r = '';\n        if (fontStyle & 1 /* FontStyle.Italic */) {\n            r += 'italic ';\n        }\n        if (fontStyle & 2 /* FontStyle.Bold */) {\n            r += 'bold ';\n        }\n        if (fontStyle & 4 /* FontStyle.Underline */) {\n            r += 'underline ';\n        }\n        if (fontStyle & 8 /* FontStyle.Strikethrough */) {\n            r += 'strikethrough ';\n        }\n        if (r.length === 0) {\n            r = '---';\n        }\n        return r;\n    }\n    _getTokensAtLine(lineNumber) {\n        const stateBeforeLine = this._getStateBeforeLine(lineNumber);\n        const tokenizationResult1 = this._tokenizationSupport.tokenize(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        const tokenizationResult2 = this._tokenizationSupport.tokenizeEncoded(this._model.getLineContent(lineNumber), true, stateBeforeLine);\n        return {\n            startState: stateBeforeLine,\n            tokens1: tokenizationResult1.tokens,\n            tokens2: tokenizationResult2.tokens,\n            endState: tokenizationResult1.endState\n        };\n    }\n    _getStateBeforeLine(lineNumber) {\n        let state = this._tokenizationSupport.getInitialState();\n        for (let i = 1; i < lineNumber; i++) {\n            const tokenizationResult = this._tokenizationSupport.tokenize(this._model.getLineContent(i), true, state);\n            state = tokenizationResult.endState;\n        }\n        return state;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            position: this._editor.getPosition(),\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n}\nInspectTokensWidget._ID = 'editor.contrib.inspectTokensWidget';\nregisterEditorContribution(InspectTokensController.ID, InspectTokensController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(InspectTokens);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickCommandNLS } from '../../../common/standaloneStrings.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { AbstractEditorCommandsQuickAccessProvider } from '../../../contrib/quickAccess/browser/commandsQuickAccess.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneCommandsQuickAccessProvider = class StandaloneCommandsQuickAccessProvider extends AbstractEditorCommandsQuickAccessProvider {\n    get activeTextEditorControl() { var _a; return (_a = this.codeEditorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : undefined; }\n    constructor(instantiationService, codeEditorService, keybindingService, commandService, telemetryService, dialogService) {\n        super({ showAlias: false }, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n        this.codeEditorService = codeEditorService;\n    }\n    getCommandPicks() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.getCodeEditorCommandPicks();\n        });\n    }\n    hasAdditionalCommandPicks() {\n        return false;\n    }\n    getAdditionalCommandPicks() {\n        return __awaiter(this, void 0, void 0, function* () {\n            return [];\n        });\n    }\n};\nStandaloneCommandsQuickAccessProvider = __decorate([\n    __param(0, IInstantiationService),\n    __param(1, ICodeEditorService),\n    __param(2, IKeybindingService),\n    __param(3, ICommandService),\n    __param(4, ITelemetryService),\n    __param(5, IDialogService)\n], StandaloneCommandsQuickAccessProvider);\nexport { StandaloneCommandsQuickAccessProvider };\nexport class GotoLineAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoLineAction.ID,\n            label: QuickCommandNLS.quickCommandActionLabel,\n            alias: 'Command Palette',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 59 /* KeyCode.F1 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'z_commands',\n                order: 1\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneCommandsQuickAccessProvider.PREFIX);\n    }\n}\nGotoLineAction.ID = 'editor.action.quickCommand';\nregisterEditorAction(GotoLineAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneCommandsQuickAccessProvider,\n    prefix: StandaloneCommandsQuickAccessProvider.PREFIX,\n    helpEntries: [{ description: QuickCommandNLS.quickCommandHelp, commandId: GotoLineAction.ID }]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { AbstractGotoLineQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoLineQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { GoToLineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nlet StandaloneGotoLineQuickAccessProvider = class StandaloneGotoLineQuickAccessProvider extends AbstractGotoLineQuickAccessProvider {\n    constructor(editorService) {\n        super();\n        this.editorService = editorService;\n        this.onDidActiveTextEditorControlChange = Event.None;\n    }\n    get activeTextEditorControl() {\n        var _a;\n        return (_a = this.editorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : undefined;\n    }\n};\nStandaloneGotoLineQuickAccessProvider = __decorate([\n    __param(0, ICodeEditorService)\n], StandaloneGotoLineQuickAccessProvider);\nexport { StandaloneGotoLineQuickAccessProvider };\nexport class GotoLineAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoLineAction.ID,\n            label: GoToLineNLS.gotoLineActionLabel,\n            alias: 'Go to Line/Column...',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 37 /* KeyCode.KeyG */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(StandaloneGotoLineQuickAccessProvider.PREFIX);\n    }\n}\nGotoLineAction.ID = 'editor.action.gotoLine';\nregisterEditorAction(GotoLineAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneGotoLineQuickAccessProvider,\n    prefix: StandaloneGotoLineQuickAccessProvider.PREFIX,\n    helpEntries: [{ description: GoToLineNLS.gotoLineActionLabel, commandId: GotoLineAction.ID }]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport '../../../contrib/symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport { AbstractGotoSymbolQuickAccessProvider } from '../../../contrib/quickAccess/browser/gotoSymbolQuickAccess.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { QuickOutlineNLS } from '../../../common/standaloneStrings.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IQuickInputService, ItemActivation } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IOutlineModelService } from '../../../contrib/documentSymbols/browser/outlineModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nlet StandaloneGotoSymbolQuickAccessProvider = class StandaloneGotoSymbolQuickAccessProvider extends AbstractGotoSymbolQuickAccessProvider {\n    constructor(editorService, languageFeaturesService, outlineModelService) {\n        super(languageFeaturesService, outlineModelService);\n        this.editorService = editorService;\n        this.onDidActiveTextEditorControlChange = Event.None;\n    }\n    get activeTextEditorControl() {\n        var _a;\n        return (_a = this.editorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : undefined;\n    }\n};\nStandaloneGotoSymbolQuickAccessProvider = __decorate([\n    __param(0, ICodeEditorService),\n    __param(1, ILanguageFeaturesService),\n    __param(2, IOutlineModelService)\n], StandaloneGotoSymbolQuickAccessProvider);\nexport { StandaloneGotoSymbolQuickAccessProvider };\nexport class GotoSymbolAction extends EditorAction {\n    constructor() {\n        super({\n            id: GotoSymbolAction.ID,\n            label: QuickOutlineNLS.quickOutlineActionLabel,\n            alias: 'Go to Symbol...',\n            precondition: EditorContextKeys.hasDocumentSymbolProvider,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 45 /* KeyCode.KeyO */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: 'navigation',\n                order: 3\n            }\n        });\n    }\n    run(accessor) {\n        accessor.get(IQuickInputService).quickAccess.show(AbstractGotoSymbolQuickAccessProvider.PREFIX, { itemActivation: ItemActivation.NONE });\n    }\n}\nGotoSymbolAction.ID = 'editor.action.quickOutline';\nregisterEditorAction(GotoSymbolAction);\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: StandaloneGotoSymbolQuickAccessProvider,\n    prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX,\n    helpEntries: [\n        { description: QuickOutlineNLS.quickOutlineActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX, commandId: GotoSymbolAction.ID },\n        { description: QuickOutlineNLS.quickOutlineByCategoryActionLabel, prefix: AbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY }\n    ]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { Extensions } from '../../../../platform/quickinput/common/quickAccess.js';\nimport { QuickHelpNLS } from '../../../common/standaloneStrings.js';\nimport { HelpQuickAccessProvider } from '../../../../platform/quickinput/browser/helpQuickAccess.js';\nRegistry.as(Extensions.Quickaccess).registerQuickAccessProvider({\n    ctor: HelpQuickAccessProvider,\n    prefix: '',\n    helpEntries: [{ description: QuickHelpNLS.helpQuickAccessActionLabel }]\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { ReferencesController } from '../../../contrib/gotoSymbol/browser/peek/referencesController.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nlet StandaloneReferencesController = class StandaloneReferencesController extends ReferencesController {\n    constructor(editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService) {\n        super(true, editor, contextKeyService, editorService, notificationService, instantiationService, storageService, configurationService);\n    }\n};\nStandaloneReferencesController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, ICodeEditorService),\n    __param(3, INotificationService),\n    __param(4, IInstantiationService),\n    __param(5, IStorageService),\n    __param(6, IConfigurationService)\n], StandaloneReferencesController);\nexport { StandaloneReferencesController };\nregisterEditorContribution(ReferencesController.ID, StandaloneReferencesController, 4 /* EditorContributionInstantiation.Lazy */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { windowOpenNoOpener } from '../../../base/browser/dom.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { AbstractCodeEditorService } from '../../browser/services/abstractCodeEditorService.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet StandaloneCodeEditorService = class StandaloneCodeEditorService extends AbstractCodeEditorService {\n    constructor(contextKeyService, themeService) {\n        super(themeService);\n        this._register(this.onCodeEditorAdd(() => this._checkContextKey()));\n        this._register(this.onCodeEditorRemove(() => this._checkContextKey()));\n        this._editorIsOpen = contextKeyService.createKey('editorIsOpen', false);\n        this._activeCodeEditor = null;\n        this._register(this.registerCodeEditorOpenHandler((input, source, sideBySide) => __awaiter(this, void 0, void 0, function* () {\n            if (!source) {\n                return null;\n            }\n            return this.doOpenEditor(source, input);\n        })));\n    }\n    _checkContextKey() {\n        let hasCodeEditor = false;\n        for (const editor of this.listCodeEditors()) {\n            if (!editor.isSimpleWidget) {\n                hasCodeEditor = true;\n                break;\n            }\n        }\n        this._editorIsOpen.set(hasCodeEditor);\n    }\n    setActiveCodeEditor(activeCodeEditor) {\n        this._activeCodeEditor = activeCodeEditor;\n    }\n    getActiveCodeEditor() {\n        return this._activeCodeEditor;\n    }\n    doOpenEditor(editor, input) {\n        const model = this.findModel(editor, input.resource);\n        if (!model) {\n            if (input.resource) {\n                const schema = input.resource.scheme;\n                if (schema === Schemas.http || schema === Schemas.https) {\n                    // This is a fully qualified http or https URL\n                    windowOpenNoOpener(input.resource.toString());\n                    return editor;\n                }\n            }\n            return null;\n        }\n        const selection = (input.options ? input.options.selection : null);\n        if (selection) {\n            if (typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\n                editor.setSelection(selection);\n                editor.revealRangeInCenter(selection, 1 /* ScrollType.Immediate */);\n            }\n            else {\n                const pos = {\n                    lineNumber: selection.startLineNumber,\n                    column: selection.startColumn\n                };\n                editor.setPosition(pos);\n                editor.revealPositionInCenter(pos, 1 /* ScrollType.Immediate */);\n            }\n        }\n        return editor;\n    }\n    findModel(editor, resource) {\n        const model = editor.getModel();\n        if (model && model.uri.toString() !== resource.toString()) {\n            return null;\n        }\n        return model;\n    }\n};\nStandaloneCodeEditorService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, IThemeService)\n], StandaloneCodeEditorService);\nexport { StandaloneCodeEditorService };\nregisterSingleton(ICodeEditorService, StandaloneCodeEditorService, 0 /* InstantiationType.Eager */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { createTrustedTypesPolicy } from '../../../base/browser/trustedTypes.js';\nimport * as strings from '../../../base/common/strings.js';\nimport { TokenizationRegistry } from '../../common/languages.js';\nimport { LineTokens } from '../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 as renderViewLine } from '../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../common/viewModel.js';\nimport { MonarchTokenizer } from '../common/monarch/monarchLexer.js';\nconst ttPolicy = createTrustedTypesPolicy('standaloneColorizer', { createHTML: value => value });\nexport class Colorizer {\n    static colorizeElement(themeService, languageService, domNode, options) {\n        options = options || {};\n        const theme = options.theme || 'vs';\n        const mimeType = options.mimeType || domNode.getAttribute('lang') || domNode.getAttribute('data-lang');\n        if (!mimeType) {\n            console.error('Mode not detected');\n            return Promise.resolve();\n        }\n        const languageId = languageService.getLanguageIdByMimeType(mimeType) || mimeType;\n        themeService.setTheme(theme);\n        const text = domNode.firstChild ? domNode.firstChild.nodeValue : '';\n        domNode.className += ' ' + theme;\n        const render = (str) => {\n            var _a;\n            const trustedhtml = (_a = ttPolicy === null || ttPolicy === void 0 ? void 0 : ttPolicy.createHTML(str)) !== null && _a !== void 0 ? _a : str;\n            domNode.innerHTML = trustedhtml;\n        };\n        return this.colorize(languageService, text || '', languageId, options).then(render, (err) => console.error(err));\n    }\n    static colorize(languageService, text, languageId, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const languageIdCodec = languageService.languageIdCodec;\n            let tabSize = 4;\n            if (options && typeof options.tabSize === 'number') {\n                tabSize = options.tabSize;\n            }\n            if (strings.startsWithUTF8BOM(text)) {\n                text = text.substr(1);\n            }\n            const lines = strings.splitLines(text);\n            if (!languageService.isRegisteredLanguageId(languageId)) {\n                return _fakeColorize(lines, tabSize, languageIdCodec);\n            }\n            const tokenizationSupport = yield TokenizationRegistry.getOrCreate(languageId);\n            if (tokenizationSupport) {\n                return _colorize(lines, tabSize, tokenizationSupport, languageIdCodec);\n            }\n            return _fakeColorize(lines, tabSize, languageIdCodec);\n        });\n    }\n    static colorizeLine(line, mightContainNonBasicASCII, mightContainRTL, tokens, tabSize = 4) {\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, mightContainNonBasicASCII);\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, mightContainRTL);\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, tokens, [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\n        return renderResult.html;\n    }\n    static colorizeModelLine(model, lineNumber, tabSize = 4) {\n        const content = model.getLineContent(lineNumber);\n        model.tokenization.forceTokenization(lineNumber);\n        const tokens = model.tokenization.getLineTokens(lineNumber);\n        const inflatedTokens = tokens.inflate();\n        return this.colorizeLine(content, model.mightContainNonBasicASCII(), model.mightContainRTL(), inflatedTokens, tabSize);\n    }\n}\nfunction _colorize(lines, tabSize, tokenizationSupport, languageIdCodec) {\n    return new Promise((c, e) => {\n        const execute = () => {\n            const result = _actualColorize(lines, tabSize, tokenizationSupport, languageIdCodec);\n            if (tokenizationSupport instanceof MonarchTokenizer) {\n                const status = tokenizationSupport.getLoadStatus();\n                if (status.loaded === false) {\n                    status.promise.then(execute, e);\n                    return;\n                }\n            }\n            c(result);\n        };\n        execute();\n    });\n}\nfunction _fakeColorize(lines, tabSize, languageIdCodec) {\n    let html = [];\n    const defaultMetadata = ((0 /* FontStyle.None */ << 11 /* MetadataConsts.FONT_STYLE_OFFSET */)\n        | (1 /* ColorId.DefaultForeground */ << 15 /* MetadataConsts.FOREGROUND_OFFSET */)\n        | (2 /* ColorId.DefaultBackground */ << 24 /* MetadataConsts.BACKGROUND_OFFSET */)) >>> 0;\n    const tokens = new Uint32Array(2);\n    tokens[0] = 0;\n    tokens[1] = defaultMetadata;\n    for (let i = 0, length = lines.length; i < length; i++) {\n        const line = lines[i];\n        tokens[0] = line.length;\n        const lineTokens = new LineTokens(tokens, line, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\n        html = html.concat(renderResult.html);\n        html.push('<br/>');\n    }\n    return html.join('');\n}\nfunction _actualColorize(lines, tabSize, tokenizationSupport, languageIdCodec) {\n    let html = [];\n    let state = tokenizationSupport.getInitialState();\n    for (let i = 0, length = lines.length; i < length; i++) {\n        const line = lines[i];\n        const tokenizeResult = tokenizationSupport.tokenizeEncoded(line, true, state);\n        LineTokens.convertToEndOffset(tokenizeResult.tokens, line.length);\n        const lineTokens = new LineTokens(tokenizeResult.tokens, line, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(line, /* check for basic ASCII */ true);\n        const containsRTL = ViewLineRenderingData.containsRTL(line, isBasicASCII, /* check for RTL */ true);\n        const renderResult = renderViewLine(new RenderLineInput(false, true, line, false, isBasicASCII, containsRTL, 0, lineTokens.inflate(), [], tabSize, 0, 0, 0, 0, -1, 'none', false, false, null));\n        html = html.concat(renderResult.html);\n        html.push('<br/>');\n        state = tokenizeResult.endState;\n    }\n    return html.join('');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\nimport { Disposable, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { CodeEditorWidget } from '../../browser/widget/codeEditorWidget.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport { StandaloneKeybindingService, updateConfigurationService } from './standaloneServices.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { MenuId, MenuRegistry } from '../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { StandaloneCodeEditorNLS } from '../../common/standaloneStrings.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { StandaloneCodeEditorService } from './standaloneCodeEditorService.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../common/languages/modesRegistry.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { DiffEditorWidget } from '../../browser/widget/diffEditor/diffEditorWidget.js';\nimport { IAudioCueService } from '../../../platform/audioCues/browser/audioCueService.js';\nlet LAST_GENERATED_COMMAND_ID = 0;\nlet ariaDomNodeCreated = false;\n/**\n * Create ARIA dom node inside parent,\n * or only for the first editor instantiation inside document.body.\n * @param parent container element for ARIA dom node\n */\nfunction createAriaDomNode(parent) {\n    if (!parent) {\n        if (ariaDomNodeCreated) {\n            return;\n        }\n        ariaDomNodeCreated = true;\n    }\n    aria.setARIAContainer(parent || document.body);\n}\n/**\n * A code editor to be used both by the standalone editor and the standalone diff editor.\n */\nlet StandaloneCodeEditor = class StandaloneCodeEditor extends CodeEditorWidget {\n    constructor(domElement, _options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        const options = Object.assign({}, _options);\n        options.ariaLabel = options.ariaLabel || StandaloneCodeEditorNLS.editorViewAccessibleLabel;\n        options.ariaLabel = options.ariaLabel + ';' + (StandaloneCodeEditorNLS.accessibilityHelpMessage);\n        super(domElement, options, {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        if (keybindingService instanceof StandaloneKeybindingService) {\n            this._standaloneKeybindingService = keybindingService;\n        }\n        else {\n            this._standaloneKeybindingService = null;\n        }\n        createAriaDomNode(options.ariaContainerElement);\n    }\n    addCommand(keybinding, handler, context) {\n        if (!this._standaloneKeybindingService) {\n            console.warn('Cannot add command because the editor is configured with an unrecognized KeybindingService');\n            return null;\n        }\n        const commandId = 'DYNAMIC_' + (++LAST_GENERATED_COMMAND_ID);\n        const whenExpression = ContextKeyExpr.deserialize(context);\n        this._standaloneKeybindingService.addDynamicKeybinding(commandId, keybinding, handler, whenExpression);\n        return commandId;\n    }\n    createContextKey(key, defaultValue) {\n        return this._contextKeyService.createKey(key, defaultValue);\n    }\n    addAction(_descriptor) {\n        if ((typeof _descriptor.id !== 'string') || (typeof _descriptor.label !== 'string') || (typeof _descriptor.run !== 'function')) {\n            throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\n        }\n        if (!this._standaloneKeybindingService) {\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n            return Disposable.None;\n        }\n        // Read descriptor options\n        const id = _descriptor.id;\n        const label = _descriptor.label;\n        const precondition = ContextKeyExpr.and(ContextKeyExpr.equals('editorId', this.getId()), ContextKeyExpr.deserialize(_descriptor.precondition));\n        const keybindings = _descriptor.keybindings;\n        const keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(_descriptor.keybindingContext));\n        const contextMenuGroupId = _descriptor.contextMenuGroupId || null;\n        const contextMenuOrder = _descriptor.contextMenuOrder || 0;\n        const run = (_accessor, ...args) => {\n            return Promise.resolve(_descriptor.run(this, ...args));\n        };\n        const toDispose = new DisposableStore();\n        // Generate a unique id to allow the same descriptor.id across multiple editor instances\n        const uniqueId = this.getId() + ':' + id;\n        // Register the command\n        toDispose.add(CommandsRegistry.registerCommand(uniqueId, run));\n        // Register the context menu item\n        if (contextMenuGroupId) {\n            const menuItem = {\n                command: {\n                    id: uniqueId,\n                    title: label\n                },\n                when: precondition,\n                group: contextMenuGroupId,\n                order: contextMenuOrder\n            };\n            toDispose.add(MenuRegistry.appendMenuItem(MenuId.EditorContext, menuItem));\n        }\n        // Register the keybindings\n        if (Array.isArray(keybindings)) {\n            for (const kb of keybindings) {\n                toDispose.add(this._standaloneKeybindingService.addDynamicKeybinding(uniqueId, kb, run, keybindingsWhen));\n            }\n        }\n        // Finally, register an internal editor action\n        const internalAction = new InternalEditorAction(uniqueId, label, label, precondition, (...args) => Promise.resolve(_descriptor.run(this, ...args)), this._contextKeyService);\n        // Store it under the original id, such that trigger with the original id will work\n        this._actions.set(id, internalAction);\n        toDispose.add(toDisposable(() => {\n            this._actions.delete(id);\n        }));\n        return toDispose;\n    }\n    _triggerCommand(handlerId, payload) {\n        if (this._codeEditorService instanceof StandaloneCodeEditorService) {\n            // Help commands find this editor as the active editor\n            try {\n                this._codeEditorService.setActiveCodeEditor(this);\n                super._triggerCommand(handlerId, payload);\n            }\n            finally {\n                this._codeEditorService.setActiveCodeEditor(null);\n            }\n        }\n        else {\n            super._triggerCommand(handlerId, payload);\n        }\n    }\n};\nStandaloneCodeEditor = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, ICodeEditorService),\n    __param(4, ICommandService),\n    __param(5, IContextKeyService),\n    __param(6, IKeybindingService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService),\n    __param(11, ILanguageFeaturesService)\n], StandaloneCodeEditor);\nexport { StandaloneCodeEditor };\nlet StandaloneEditor = class StandaloneEditor extends StandaloneCodeEditor {\n    constructor(domElement, _options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, configurationService, accessibilityService, modelService, languageService, languageConfigurationService, languageFeaturesService) {\n        const options = Object.assign({}, _options);\n        updateConfigurationService(configurationService, options, false);\n        const themeDomRegistration = themeService.registerEditorContainer(domElement);\n        if (typeof options.theme === 'string') {\n            themeService.setTheme(options.theme);\n        }\n        if (typeof options.autoDetectHighContrast !== 'undefined') {\n            themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\n        }\n        const _model = options.model;\n        delete options.model;\n        super(domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        this._configurationService = configurationService;\n        this._standaloneThemeService = themeService;\n        this._register(themeDomRegistration);\n        let model;\n        if (typeof _model === 'undefined') {\n            const languageId = languageService.getLanguageIdByMimeType(options.language) || options.language || PLAINTEXT_LANGUAGE_ID;\n            model = createTextModel(modelService, languageService, options.value || '', languageId, undefined);\n            this._ownsModel = true;\n        }\n        else {\n            model = _model;\n            this._ownsModel = false;\n        }\n        this._attachModel(model);\n        if (model) {\n            const e = {\n                oldModelUrl: null,\n                newModelUrl: model.uri\n            };\n            this._onDidChangeModel.fire(e);\n        }\n    }\n    dispose() {\n        super.dispose();\n    }\n    updateOptions(newOptions) {\n        updateConfigurationService(this._configurationService, newOptions, false);\n        if (typeof newOptions.theme === 'string') {\n            this._standaloneThemeService.setTheme(newOptions.theme);\n        }\n        if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\n            this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\n        }\n        super.updateOptions(newOptions);\n    }\n    _postDetachModelCleanup(detachedModel) {\n        super._postDetachModelCleanup(detachedModel);\n        if (detachedModel && this._ownsModel) {\n            detachedModel.dispose();\n            this._ownsModel = false;\n        }\n    }\n};\nStandaloneEditor = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, ICodeEditorService),\n    __param(4, ICommandService),\n    __param(5, IContextKeyService),\n    __param(6, IKeybindingService),\n    __param(7, IStandaloneThemeService),\n    __param(8, INotificationService),\n    __param(9, IConfigurationService),\n    __param(10, IAccessibilityService),\n    __param(11, IModelService),\n    __param(12, ILanguageService),\n    __param(13, ILanguageConfigurationService),\n    __param(14, ILanguageFeaturesService)\n], StandaloneEditor);\nexport { StandaloneEditor };\nlet StandaloneDiffEditor2 = class StandaloneDiffEditor2 extends DiffEditorWidget {\n    constructor(domElement, _options, instantiationService, contextKeyService, codeEditorService, themeService, notificationService, configurationService, contextMenuService, editorProgressService, clipboardService, audioCueService) {\n        const options = Object.assign({}, _options);\n        updateConfigurationService(configurationService, options, true);\n        const themeDomRegistration = themeService.registerEditorContainer(domElement);\n        if (typeof options.theme === 'string') {\n            themeService.setTheme(options.theme);\n        }\n        if (typeof options.autoDetectHighContrast !== 'undefined') {\n            themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\n        }\n        super(domElement, options, {}, contextKeyService, instantiationService, codeEditorService, audioCueService, editorProgressService);\n        this._configurationService = configurationService;\n        this._standaloneThemeService = themeService;\n        this._register(themeDomRegistration);\n    }\n    dispose() {\n        super.dispose();\n    }\n    updateOptions(newOptions) {\n        updateConfigurationService(this._configurationService, newOptions, true);\n        if (typeof newOptions.theme === 'string') {\n            this._standaloneThemeService.setTheme(newOptions.theme);\n        }\n        if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\n            this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\n        }\n        super.updateOptions(newOptions);\n    }\n    _createInnerEditor(instantiationService, container, options) {\n        return instantiationService.createInstance(StandaloneCodeEditor, container, options);\n    }\n    getOriginalEditor() {\n        return super.getOriginalEditor();\n    }\n    getModifiedEditor() {\n        return super.getModifiedEditor();\n    }\n    addCommand(keybinding, handler, context) {\n        return this.getModifiedEditor().addCommand(keybinding, handler, context);\n    }\n    createContextKey(key, defaultValue) {\n        return this.getModifiedEditor().createContextKey(key, defaultValue);\n    }\n    addAction(descriptor) {\n        return this.getModifiedEditor().addAction(descriptor);\n    }\n};\nStandaloneDiffEditor2 = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, IContextKeyService),\n    __param(4, ICodeEditorService),\n    __param(5, IStandaloneThemeService),\n    __param(6, INotificationService),\n    __param(7, IConfigurationService),\n    __param(8, IContextMenuService),\n    __param(9, IEditorProgressService),\n    __param(10, IClipboardService),\n    __param(11, IAudioCueService)\n], StandaloneDiffEditor2);\nexport { StandaloneDiffEditor2 };\n/**\n * @internal\n */\nexport function createTextModel(modelService, languageService, value, languageId, uri) {\n    value = value || '';\n    if (!languageId) {\n        const firstLF = value.indexOf('\\n');\n        let firstLine = value;\n        if (firstLF !== -1) {\n            firstLine = value.substring(0, firstLF);\n        }\n        return doCreateModel(modelService, value, languageService.createByFilepathOrFirstLine(uri || null, firstLine), uri);\n    }\n    return doCreateModel(modelService, value, languageService.createById(languageId), uri);\n}\n/**\n * @internal\n */\nfunction doCreateModel(modelService, value, languageSelection, uri) {\n    return modelService.createModel(value, languageSelection, uri);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { splitLines } from '../../../base/common/strings.js';\nimport { URI } from '../../../base/common/uri.js';\nimport './standalone-tokens.css';\nimport { FontMeasurements } from '../../browser/config/fontMeasurements.js';\nimport { EditorCommand } from '../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { createWebWorker as actualCreateWebWorker } from '../../browser/services/webWorker.js';\nimport { ApplyUpdateResult, ConfigurationChangedEvent, EditorOptions } from '../../common/config/editorOptions.js';\nimport { EditorZoom } from '../../common/config/editorZoom.js';\nimport { BareFontInfo, FontInfo } from '../../common/config/fontInfo.js';\nimport { EditorType } from '../../common/editorCommon.js';\nimport * as languages from '../../common/languages.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../common/languages/modesRegistry.js';\nimport { NullState, nullTokenize } from '../../common/languages/nullTokenize.js';\nimport { FindMatch, TextModelResolvedOptions } from '../../common/model.js';\nimport { IModelService } from '../../common/services/model.js';\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\nimport { Colorizer } from './colorizer.js';\nimport { StandaloneDiffEditor2, StandaloneEditor, createTextModel } from './standaloneCodeEditor.js';\nimport { StandaloneKeybindingService, StandaloneServices } from './standaloneServices.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { MenuId, MenuRegistry } from '../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\n/**\n * Create a new editor under `domElement`.\n * `domElement` should be empty (not contain other dom nodes).\n * The editor will read the size of `domElement`.\n */\nexport function create(domElement, options, override) {\n    const instantiationService = StandaloneServices.initialize(override || {});\n    return instantiationService.createInstance(StandaloneEditor, domElement, options);\n}\n/**\n * Emitted when an editor is created.\n * Creating a diff editor might cause this listener to be invoked with the two editors.\n * @event\n */\nexport function onDidCreateEditor(listener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.onCodeEditorAdd((editor) => {\n        listener(editor);\n    });\n}\n/**\n * Emitted when an diff editor is created.\n * @event\n */\nexport function onDidCreateDiffEditor(listener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.onDiffEditorAdd((editor) => {\n        listener(editor);\n    });\n}\n/**\n * Get all the created editors.\n */\nexport function getEditors() {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.listCodeEditors();\n}\n/**\n * Get all the created diff editors.\n */\nexport function getDiffEditors() {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.listDiffEditors();\n}\n/**\n * Create a new diff editor under `domElement`.\n * `domElement` should be empty (not contain other dom nodes).\n * The editor will read the size of `domElement`.\n */\nexport function createDiffEditor(domElement, options, override) {\n    const instantiationService = StandaloneServices.initialize(override || {});\n    return instantiationService.createInstance(StandaloneDiffEditor2, domElement, options);\n}\n/**\n * Add a command.\n */\nexport function addCommand(descriptor) {\n    if ((typeof descriptor.id !== 'string') || (typeof descriptor.run !== 'function')) {\n        throw new Error('Invalid command descriptor, `id` and `run` are required properties!');\n    }\n    return CommandsRegistry.registerCommand(descriptor.id, descriptor.run);\n}\n/**\n * Add an action to all editors.\n */\nexport function addEditorAction(descriptor) {\n    if ((typeof descriptor.id !== 'string') || (typeof descriptor.label !== 'string') || (typeof descriptor.run !== 'function')) {\n        throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\n    }\n    const precondition = ContextKeyExpr.deserialize(descriptor.precondition);\n    const run = (accessor, ...args) => {\n        return EditorCommand.runEditorCommand(accessor, args, precondition, (accessor, editor, args) => Promise.resolve(descriptor.run(editor, ...args)));\n    };\n    const toDispose = new DisposableStore();\n    // Register the command\n    toDispose.add(CommandsRegistry.registerCommand(descriptor.id, run));\n    // Register the context menu item\n    if (descriptor.contextMenuGroupId) {\n        const menuItem = {\n            command: {\n                id: descriptor.id,\n                title: descriptor.label\n            },\n            when: precondition,\n            group: descriptor.contextMenuGroupId,\n            order: descriptor.contextMenuOrder || 0\n        };\n        toDispose.add(MenuRegistry.appendMenuItem(MenuId.EditorContext, menuItem));\n    }\n    // Register the keybindings\n    if (Array.isArray(descriptor.keybindings)) {\n        const keybindingService = StandaloneServices.get(IKeybindingService);\n        if (!(keybindingService instanceof StandaloneKeybindingService)) {\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n        }\n        else {\n            const keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(descriptor.keybindingContext));\n            toDispose.add(keybindingService.addDynamicKeybindings(descriptor.keybindings.map((keybinding) => {\n                return {\n                    keybinding,\n                    command: descriptor.id,\n                    when: keybindingsWhen\n                };\n            })));\n        }\n    }\n    return toDispose;\n}\n/**\n * Add a keybinding rule.\n */\nexport function addKeybindingRule(rule) {\n    return addKeybindingRules([rule]);\n}\n/**\n * Add keybinding rules.\n */\nexport function addKeybindingRules(rules) {\n    const keybindingService = StandaloneServices.get(IKeybindingService);\n    if (!(keybindingService instanceof StandaloneKeybindingService)) {\n        console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n        return Disposable.None;\n    }\n    return keybindingService.addDynamicKeybindings(rules.map((rule) => {\n        return {\n            keybinding: rule.keybinding,\n            command: rule.command,\n            commandArgs: rule.commandArgs,\n            when: ContextKeyExpr.deserialize(rule.when),\n        };\n    }));\n}\n/**\n * Create a new editor model.\n * You can specify the language that should be set for this model or let the language be inferred from the `uri`.\n */\nexport function createModel(value, language, uri) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const languageId = languageService.getLanguageIdByMimeType(language) || language;\n    return createTextModel(StandaloneServices.get(IModelService), languageService, value, languageId, uri);\n}\n/**\n * Change the language for a model.\n */\nexport function setModelLanguage(model, mimeTypeOrLanguageId) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const languageId = languageService.getLanguageIdByMimeType(mimeTypeOrLanguageId) || mimeTypeOrLanguageId || PLAINTEXT_LANGUAGE_ID;\n    model.setLanguage(languageService.createById(languageId));\n}\n/**\n * Set the markers for a model.\n */\nexport function setModelMarkers(model, owner, markers) {\n    if (model) {\n        const markerService = StandaloneServices.get(IMarkerService);\n        markerService.changeOne(owner, model.uri, markers);\n    }\n}\n/**\n * Remove all markers of an owner.\n */\nexport function removeAllMarkers(owner) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    markerService.changeAll(owner, []);\n}\n/**\n * Get markers for owner and/or resource\n *\n * @returns list of markers\n */\nexport function getModelMarkers(filter) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    return markerService.read(filter);\n}\n/**\n * Emitted when markers change for a model.\n * @event\n */\nexport function onDidChangeMarkers(listener) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    return markerService.onMarkerChanged(listener);\n}\n/**\n * Get the model that has `uri` if it exists.\n */\nexport function getModel(uri) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.getModel(uri);\n}\n/**\n * Get all the created models.\n */\nexport function getModels() {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.getModels();\n}\n/**\n * Emitted when a model is created.\n * @event\n */\nexport function onDidCreateModel(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelAdded(listener);\n}\n/**\n * Emitted right before a model is disposed.\n * @event\n */\nexport function onWillDisposeModel(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelRemoved(listener);\n}\n/**\n * Emitted when a different language is set to a model.\n * @event\n */\nexport function onDidChangeModelLanguage(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelLanguageChanged((e) => {\n        listener({\n            model: e.model,\n            oldLanguage: e.oldLanguageId\n        });\n    });\n}\n/**\n * Create a new web worker that has model syncing capabilities built in.\n * Specify an AMD module to load that will `create` an object that will be proxied.\n */\nexport function createWebWorker(opts) {\n    return actualCreateWebWorker(StandaloneServices.get(IModelService), StandaloneServices.get(ILanguageConfigurationService), opts);\n}\n/**\n * Colorize the contents of `domNode` using attribute `data-lang`.\n */\nexport function colorizeElement(domNode, options) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    return Colorizer.colorizeElement(themeService, languageService, domNode, options).then(() => {\n        themeService.registerEditorContainer(domNode);\n    });\n}\n/**\n * Colorize `text` using language `languageId`.\n */\nexport function colorize(text, languageId, options) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    themeService.registerEditorContainer(document.body);\n    return Colorizer.colorize(languageService, text, languageId, options);\n}\n/**\n * Colorize a line in a model.\n */\nexport function colorizeModelLine(model, lineNumber, tabSize = 4) {\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    themeService.registerEditorContainer(document.body);\n    return Colorizer.colorizeModelLine(model, lineNumber, tabSize);\n}\n/**\n * @internal\n */\nfunction getSafeTokenizationSupport(language) {\n    const tokenizationSupport = languages.TokenizationRegistry.get(language);\n    if (tokenizationSupport) {\n        return tokenizationSupport;\n    }\n    return {\n        getInitialState: () => NullState,\n        tokenize: (line, hasEOL, state) => nullTokenize(language, state)\n    };\n}\n/**\n * Tokenize `text` using language `languageId`\n */\nexport function tokenize(text, languageId) {\n    // Needed in order to get the mode registered for subsequent look-ups\n    languages.TokenizationRegistry.getOrCreate(languageId);\n    const tokenizationSupport = getSafeTokenizationSupport(languageId);\n    const lines = splitLines(text);\n    const result = [];\n    let state = tokenizationSupport.getInitialState();\n    for (let i = 0, len = lines.length; i < len; i++) {\n        const line = lines[i];\n        const tokenizationResult = tokenizationSupport.tokenize(line, true, state);\n        result[i] = tokenizationResult.tokens;\n        state = tokenizationResult.endState;\n    }\n    return result;\n}\n/**\n * Define a new theme or update an existing theme.\n */\nexport function defineTheme(themeName, themeData) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    standaloneThemeService.defineTheme(themeName, themeData);\n}\n/**\n * Switches to a theme.\n */\nexport function setTheme(themeName) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    standaloneThemeService.setTheme(themeName);\n}\n/**\n * Clears all cached font measurements and triggers re-measurement.\n */\nexport function remeasureFonts() {\n    FontMeasurements.clearAllFontInfos();\n}\n/**\n * Register a command.\n */\nexport function registerCommand(id, handler) {\n    return CommandsRegistry.registerCommand({ id, handler });\n}\n/**\n * Registers a handler that is called when a link is opened in any editor. The handler callback should return `true` if the link was handled and `false` otherwise.\n * The handler that was registered last will be called first when a link is opened.\n *\n * Returns a disposable that can unregister the opener again.\n */\nexport function registerLinkOpener(opener) {\n    const openerService = StandaloneServices.get(IOpenerService);\n    return openerService.registerOpener({\n        open(resource) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (typeof resource === 'string') {\n                    resource = URI.parse(resource);\n                }\n                return opener.open(resource);\n            });\n        }\n    });\n}\n/**\n * Registers a handler that is called when a resource other than the current model should be opened in the editor (e.g. \"go to definition\").\n * The handler callback should return `true` if the request was handled and `false` otherwise.\n *\n * Returns a disposable that can unregister the opener again.\n *\n * If no handler is registered the default behavior is to do nothing for models other than the currently attached one.\n */\nexport function registerEditorOpener(opener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.registerCodeEditorOpenHandler((input, source, sideBySide) => __awaiter(this, void 0, void 0, function* () {\n        var _a;\n        if (!source) {\n            return null;\n        }\n        const selection = (_a = input.options) === null || _a === void 0 ? void 0 : _a.selection;\n        let selectionOrPosition;\n        if (selection && typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\n            selectionOrPosition = selection;\n        }\n        else if (selection) {\n            selectionOrPosition = { lineNumber: selection.startLineNumber, column: selection.startColumn };\n        }\n        if (yield opener.openCodeEditor(source, input.resource, selectionOrPosition)) {\n            return source; // return source editor to indicate that this handler has successfully handled the opening\n        }\n        return null; // fallback to other registered handlers\n    }));\n}\n/**\n * @internal\n */\nexport function createMonacoEditorAPI() {\n    return {\n        // methods\n        create: create,\n        getEditors: getEditors,\n        getDiffEditors: getDiffEditors,\n        onDidCreateEditor: onDidCreateEditor,\n        onDidCreateDiffEditor: onDidCreateDiffEditor,\n        createDiffEditor: createDiffEditor,\n        addCommand: addCommand,\n        addEditorAction: addEditorAction,\n        addKeybindingRule: addKeybindingRule,\n        addKeybindingRules: addKeybindingRules,\n        createModel: createModel,\n        setModelLanguage: setModelLanguage,\n        setModelMarkers: setModelMarkers,\n        getModelMarkers: getModelMarkers,\n        removeAllMarkers: removeAllMarkers,\n        onDidChangeMarkers: onDidChangeMarkers,\n        getModels: getModels,\n        getModel: getModel,\n        onDidCreateModel: onDidCreateModel,\n        onWillDisposeModel: onWillDisposeModel,\n        onDidChangeModelLanguage: onDidChangeModelLanguage,\n        createWebWorker: createWebWorker,\n        colorizeElement: colorizeElement,\n        colorize: colorize,\n        colorizeModelLine: colorizeModelLine,\n        tokenize: tokenize,\n        defineTheme: defineTheme,\n        setTheme: setTheme,\n        remeasureFonts: remeasureFonts,\n        registerCommand: registerCommand,\n        registerLinkOpener: registerLinkOpener,\n        registerEditorOpener: registerEditorOpener,\n        // enums\n        AccessibilitySupport: standaloneEnums.AccessibilitySupport,\n        ContentWidgetPositionPreference: standaloneEnums.ContentWidgetPositionPreference,\n        CursorChangeReason: standaloneEnums.CursorChangeReason,\n        DefaultEndOfLine: standaloneEnums.DefaultEndOfLine,\n        EditorAutoIndentStrategy: standaloneEnums.EditorAutoIndentStrategy,\n        EditorOption: standaloneEnums.EditorOption,\n        EndOfLinePreference: standaloneEnums.EndOfLinePreference,\n        EndOfLineSequence: standaloneEnums.EndOfLineSequence,\n        MinimapPosition: standaloneEnums.MinimapPosition,\n        MouseTargetType: standaloneEnums.MouseTargetType,\n        OverlayWidgetPositionPreference: standaloneEnums.OverlayWidgetPositionPreference,\n        OverviewRulerLane: standaloneEnums.OverviewRulerLane,\n        GlyphMarginLane: standaloneEnums.GlyphMarginLane,\n        RenderLineNumbersType: standaloneEnums.RenderLineNumbersType,\n        RenderMinimap: standaloneEnums.RenderMinimap,\n        ScrollbarVisibility: standaloneEnums.ScrollbarVisibility,\n        ScrollType: standaloneEnums.ScrollType,\n        TextEditorCursorBlinkingStyle: standaloneEnums.TextEditorCursorBlinkingStyle,\n        TextEditorCursorStyle: standaloneEnums.TextEditorCursorStyle,\n        TrackedRangeStickiness: standaloneEnums.TrackedRangeStickiness,\n        WrappingIndent: standaloneEnums.WrappingIndent,\n        InjectedTextCursorStops: standaloneEnums.InjectedTextCursorStops,\n        PositionAffinity: standaloneEnums.PositionAffinity,\n        // classes\n        ConfigurationChangedEvent: ConfigurationChangedEvent,\n        BareFontInfo: BareFontInfo,\n        FontInfo: FontInfo,\n        TextModelResolvedOptions: TextModelResolvedOptions,\n        FindMatch: FindMatch,\n        ApplyUpdateResult: ApplyUpdateResult,\n        EditorZoom: EditorZoom,\n        // vars\n        EditorType: EditorType,\n        EditorOptions: EditorOptions\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/*\n * This module only exports 'compile' which compiles a JSON language definition\n * into a typed and checked ILexer definition.\n */\nimport * as monarchCommon from './monarchCommon.js';\n/*\n * Type helpers\n *\n * Note: this is just for sanity checks on the JSON description which is\n * helpful for the programmer. No checks are done anymore once the lexer is\n * already 'compiled and checked'.\n *\n */\nfunction isArrayOf(elemType, obj) {\n    if (!obj) {\n        return false;\n    }\n    if (!(Array.isArray(obj))) {\n        return false;\n    }\n    for (const el of obj) {\n        if (!(elemType(el))) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction bool(prop, defValue) {\n    if (typeof prop === 'boolean') {\n        return prop;\n    }\n    return defValue;\n}\nfunction string(prop, defValue) {\n    if (typeof (prop) === 'string') {\n        return prop;\n    }\n    return defValue;\n}\nfunction arrayToHash(array) {\n    const result = {};\n    for (const e of array) {\n        result[e] = true;\n    }\n    return result;\n}\nfunction createKeywordMatcher(arr, caseInsensitive = false) {\n    if (caseInsensitive) {\n        arr = arr.map(function (x) { return x.toLowerCase(); });\n    }\n    const hash = arrayToHash(arr);\n    if (caseInsensitive) {\n        return function (word) {\n            return hash[word.toLowerCase()] !== undefined && hash.hasOwnProperty(word.toLowerCase());\n        };\n    }\n    else {\n        return function (word) {\n            return hash[word] !== undefined && hash.hasOwnProperty(word);\n        };\n    }\n}\n// Lexer helpers\n/**\n * Compiles a regular expression string, adding the 'i' flag if 'ignoreCase' is set, and the 'u' flag if 'unicode' is set.\n * Also replaces @\\w+ or sequences with the content of the specified attribute\n * @\\w+ replacement can be avoided by escaping `@` signs with another `@` sign.\n * @example /@attr/ will be replaced with the value of lexer[attr]\n * @example /@@text/ will not be replaced and will become /@text/.\n */\nfunction compileRegExp(lexer, str) {\n    // @@ must be interpreted as a literal @, so we replace all occurences of @@ with a placeholder character\n    str = str.replace(/@@/g, `\\x01`);\n    let n = 0;\n    let hadExpansion;\n    do {\n        hadExpansion = false;\n        str = str.replace(/@(\\w+)/g, function (s, attr) {\n            hadExpansion = true;\n            let sub = '';\n            if (typeof (lexer[attr]) === 'string') {\n                sub = lexer[attr];\n            }\n            else if (lexer[attr] && lexer[attr] instanceof RegExp) {\n                sub = lexer[attr].source;\n            }\n            else {\n                if (lexer[attr] === undefined) {\n                    throw monarchCommon.createError(lexer, 'language definition does not contain attribute \\'' + attr + '\\', used at: ' + str);\n                }\n                else {\n                    throw monarchCommon.createError(lexer, 'attribute reference \\'' + attr + '\\' must be a string, used at: ' + str);\n                }\n            }\n            return (monarchCommon.empty(sub) ? '' : '(?:' + sub + ')');\n        });\n        n++;\n    } while (hadExpansion && n < 5);\n    // handle escaped @@\n    str = str.replace(/\\x01/g, '@');\n    const flags = (lexer.ignoreCase ? 'i' : '') + (lexer.unicode ? 'u' : '');\n    return new RegExp(str, flags);\n}\n/**\n * Compiles guard functions for case matches.\n * This compiles 'cases' attributes into efficient match functions.\n *\n */\nfunction selectScrutinee(id, matches, state, num) {\n    if (num < 0) {\n        return id;\n    }\n    if (num < matches.length) {\n        return matches[num];\n    }\n    if (num >= 100) {\n        num = num - 100;\n        const parts = state.split('.');\n        parts.unshift(state);\n        if (num < parts.length) {\n            return parts[num];\n        }\n    }\n    return null;\n}\nfunction createGuard(lexer, ruleName, tkey, val) {\n    // get the scrutinee and pattern\n    let scrut = -1; // -1: $!, 0-99: $n, 100+n: $Sn\n    let oppat = tkey;\n    let matches = tkey.match(/^\\$(([sS]?)(\\d\\d?)|#)(.*)$/);\n    if (matches) {\n        if (matches[3]) { // if digits\n            scrut = parseInt(matches[3]);\n            if (matches[2]) {\n                scrut = scrut + 100; // if [sS] present\n            }\n        }\n        oppat = matches[4];\n    }\n    // get operator\n    let op = '~';\n    let pat = oppat;\n    if (!oppat || oppat.length === 0) {\n        op = '!=';\n        pat = '';\n    }\n    else if (/^\\w*$/.test(pat)) { // just a word\n        op = '==';\n    }\n    else {\n        matches = oppat.match(/^(@|!@|~|!~|==|!=)(.*)$/);\n        if (matches) {\n            op = matches[1];\n            pat = matches[2];\n        }\n    }\n    // set the tester function\n    let tester;\n    // special case a regexp that matches just words\n    if ((op === '~' || op === '!~') && /^(\\w|\\|)*$/.test(pat)) {\n        const inWords = createKeywordMatcher(pat.split('|'), lexer.ignoreCase);\n        tester = function (s) { return (op === '~' ? inWords(s) : !inWords(s)); };\n    }\n    else if (op === '@' || op === '!@') {\n        const words = lexer[pat];\n        if (!words) {\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' is not defined, in rule: ' + ruleName);\n        }\n        if (!(isArrayOf(function (elem) { return (typeof (elem) === 'string'); }, words))) {\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' must be an array of strings, in rule: ' + ruleName);\n        }\n        const inWords = createKeywordMatcher(words, lexer.ignoreCase);\n        tester = function (s) { return (op === '@' ? inWords(s) : !inWords(s)); };\n    }\n    else if (op === '~' || op === '!~') {\n        if (pat.indexOf('$') < 0) {\n            // precompile regular expression\n            const re = compileRegExp(lexer, '^' + pat + '$');\n            tester = function (s) { return (op === '~' ? re.test(s) : !re.test(s)); };\n        }\n        else {\n            tester = function (s, id, matches, state) {\n                const re = compileRegExp(lexer, '^' + monarchCommon.substituteMatches(lexer, pat, id, matches, state) + '$');\n                return re.test(s);\n            };\n        }\n    }\n    else { // if (op==='==' || op==='!=') {\n        if (pat.indexOf('$') < 0) {\n            const patx = monarchCommon.fixCase(lexer, pat);\n            tester = function (s) { return (op === '==' ? s === patx : s !== patx); };\n        }\n        else {\n            const patx = monarchCommon.fixCase(lexer, pat);\n            tester = function (s, id, matches, state, eos) {\n                const patexp = monarchCommon.substituteMatches(lexer, patx, id, matches, state);\n                return (op === '==' ? s === patexp : s !== patexp);\n            };\n        }\n    }\n    // return the branch object\n    if (scrut === -1) {\n        return {\n            name: tkey, value: val, test: function (id, matches, state, eos) {\n                return tester(id, id, matches, state, eos);\n            }\n        };\n    }\n    else {\n        return {\n            name: tkey, value: val, test: function (id, matches, state, eos) {\n                const scrutinee = selectScrutinee(id, matches, state, scrut);\n                return tester(!scrutinee ? '' : scrutinee, id, matches, state, eos);\n            }\n        };\n    }\n}\n/**\n * Compiles an action: i.e. optimize regular expressions and case matches\n * and do many sanity checks.\n *\n * This is called only during compilation but if the lexer definition\n * contains user functions as actions (which is usually not allowed), then this\n * may be called during lexing. It is important therefore to compile common cases efficiently\n */\nfunction compileAction(lexer, ruleName, action) {\n    if (!action) {\n        return { token: '' };\n    }\n    else if (typeof (action) === 'string') {\n        return action; // { token: action };\n    }\n    else if (action.token || action.token === '') {\n        if (typeof (action.token) !== 'string') {\n            throw monarchCommon.createError(lexer, 'a \\'token\\' attribute must be of type string, in rule: ' + ruleName);\n        }\n        else {\n            // only copy specific typed fields (only happens once during compile Lexer)\n            const newAction = { token: action.token };\n            if (action.token.indexOf('$') >= 0) {\n                newAction.tokenSubst = true;\n            }\n            if (typeof (action.bracket) === 'string') {\n                if (action.bracket === '@open') {\n                    newAction.bracket = 1 /* monarchCommon.MonarchBracket.Open */;\n                }\n                else if (action.bracket === '@close') {\n                    newAction.bracket = -1 /* monarchCommon.MonarchBracket.Close */;\n                }\n                else {\n                    throw monarchCommon.createError(lexer, 'a \\'bracket\\' attribute must be either \\'@open\\' or \\'@close\\', in rule: ' + ruleName);\n                }\n            }\n            if (action.next) {\n                if (typeof (action.next) !== 'string') {\n                    throw monarchCommon.createError(lexer, 'the next state must be a string value in rule: ' + ruleName);\n                }\n                else {\n                    let next = action.next;\n                    if (!/^(@pop|@push|@popall)$/.test(next)) {\n                        if (next[0] === '@') {\n                            next = next.substr(1); // peel off starting @ sign\n                        }\n                        if (next.indexOf('$') < 0) { // no dollar substitution, we can check if the state exists\n                            if (!monarchCommon.stateExists(lexer, monarchCommon.substituteMatches(lexer, next, '', [], ''))) {\n                                throw monarchCommon.createError(lexer, 'the next state \\'' + action.next + '\\' is not defined in rule: ' + ruleName);\n                            }\n                        }\n                    }\n                    newAction.next = next;\n                }\n            }\n            if (typeof (action.goBack) === 'number') {\n                newAction.goBack = action.goBack;\n            }\n            if (typeof (action.switchTo) === 'string') {\n                newAction.switchTo = action.switchTo;\n            }\n            if (typeof (action.log) === 'string') {\n                newAction.log = action.log;\n            }\n            if (typeof (action.nextEmbedded) === 'string') {\n                newAction.nextEmbedded = action.nextEmbedded;\n                lexer.usesEmbedded = true;\n            }\n            return newAction;\n        }\n    }\n    else if (Array.isArray(action)) {\n        const results = [];\n        for (let i = 0, len = action.length; i < len; i++) {\n            results[i] = compileAction(lexer, ruleName, action[i]);\n        }\n        return { group: results };\n    }\n    else if (action.cases) {\n        // build an array of test cases\n        const cases = [];\n        // for each case, push a test function and result value\n        for (const tkey in action.cases) {\n            if (action.cases.hasOwnProperty(tkey)) {\n                const val = compileAction(lexer, ruleName, action.cases[tkey]);\n                // what kind of case\n                if (tkey === '@default' || tkey === '@' || tkey === '') {\n                    cases.push({ test: undefined, value: val, name: tkey });\n                }\n                else if (tkey === '@eos') {\n                    cases.push({ test: function (id, matches, state, eos) { return eos; }, value: val, name: tkey });\n                }\n                else {\n                    cases.push(createGuard(lexer, ruleName, tkey, val)); // call separate function to avoid local variable capture\n                }\n            }\n        }\n        // create a matching function\n        const def = lexer.defaultToken;\n        return {\n            test: function (id, matches, state, eos) {\n                for (const _case of cases) {\n                    const didmatch = (!_case.test || _case.test(id, matches, state, eos));\n                    if (didmatch) {\n                        return _case.value;\n                    }\n                }\n                return def;\n            }\n        };\n    }\n    else {\n        throw monarchCommon.createError(lexer, 'an action must be a string, an object with a \\'token\\' or \\'cases\\' attribute, or an array of actions; in rule: ' + ruleName);\n    }\n}\n/**\n * Helper class for creating matching rules\n */\nclass Rule {\n    constructor(name) {\n        this.regex = new RegExp('');\n        this.action = { token: '' };\n        this.matchOnlyAtLineStart = false;\n        this.name = '';\n        this.name = name;\n    }\n    setRegex(lexer, re) {\n        let sregex;\n        if (typeof (re) === 'string') {\n            sregex = re;\n        }\n        else if (re instanceof RegExp) {\n            sregex = re.source;\n        }\n        else {\n            throw monarchCommon.createError(lexer, 'rules must start with a match string or regular expression: ' + this.name);\n        }\n        this.matchOnlyAtLineStart = (sregex.length > 0 && sregex[0] === '^');\n        this.name = this.name + ': ' + sregex;\n        this.regex = compileRegExp(lexer, '^(?:' + (this.matchOnlyAtLineStart ? sregex.substr(1) : sregex) + ')');\n    }\n    setAction(lexer, act) {\n        this.action = compileAction(lexer, this.name, act);\n    }\n}\n/**\n * Compiles a json description function into json where all regular expressions,\n * case matches etc, are compiled and all include rules are expanded.\n * We also compile the bracket definitions, supply defaults, and do many sanity checks.\n * If the 'jsonStrict' parameter is 'false', we allow at certain locations\n * regular expression objects and functions that get called during lexing.\n * (Currently we have no samples that need this so perhaps we should always have\n * jsonStrict to true).\n */\nexport function compile(languageId, json) {\n    if (!json || typeof (json) !== 'object') {\n        throw new Error('Monarch: expecting a language definition object');\n    }\n    // Create our lexer\n    const lexer = {};\n    lexer.languageId = languageId;\n    lexer.includeLF = bool(json.includeLF, false);\n    lexer.noThrow = false; // raise exceptions during compilation\n    lexer.maxStack = 100;\n    // Set standard fields: be defensive about types\n    lexer.start = (typeof json.start === 'string' ? json.start : null);\n    lexer.ignoreCase = bool(json.ignoreCase, false);\n    lexer.unicode = bool(json.unicode, false);\n    lexer.tokenPostfix = string(json.tokenPostfix, '.' + lexer.languageId);\n    lexer.defaultToken = string(json.defaultToken, 'source');\n    lexer.usesEmbedded = false; // becomes true if we find a nextEmbedded action\n    // For calling compileAction later on\n    const lexerMin = json;\n    lexerMin.languageId = languageId;\n    lexerMin.includeLF = lexer.includeLF;\n    lexerMin.ignoreCase = lexer.ignoreCase;\n    lexerMin.unicode = lexer.unicode;\n    lexerMin.noThrow = lexer.noThrow;\n    lexerMin.usesEmbedded = lexer.usesEmbedded;\n    lexerMin.stateNames = json.tokenizer;\n    lexerMin.defaultToken = lexer.defaultToken;\n    // Compile an array of rules into newrules where RegExp objects are created.\n    function addRules(state, newrules, rules) {\n        for (const rule of rules) {\n            let include = rule.include;\n            if (include) {\n                if (typeof (include) !== 'string') {\n                    throw monarchCommon.createError(lexer, 'an \\'include\\' attribute must be a string at: ' + state);\n                }\n                if (include[0] === '@') {\n                    include = include.substr(1); // peel off starting @\n                }\n                if (!json.tokenizer[include]) {\n                    throw monarchCommon.createError(lexer, 'include target \\'' + include + '\\' is not defined at: ' + state);\n                }\n                addRules(state + '.' + include, newrules, json.tokenizer[include]);\n            }\n            else {\n                const newrule = new Rule(state);\n                // Set up new rule attributes\n                if (Array.isArray(rule) && rule.length >= 1 && rule.length <= 3) {\n                    newrule.setRegex(lexerMin, rule[0]);\n                    if (rule.length >= 3) {\n                        if (typeof (rule[1]) === 'string') {\n                            newrule.setAction(lexerMin, { token: rule[1], next: rule[2] });\n                        }\n                        else if (typeof (rule[1]) === 'object') {\n                            const rule1 = rule[1];\n                            rule1.next = rule[2];\n                            newrule.setAction(lexerMin, rule1);\n                        }\n                        else {\n                            throw monarchCommon.createError(lexer, 'a next state as the last element of a rule can only be given if the action is either an object or a string, at: ' + state);\n                        }\n                    }\n                    else {\n                        newrule.setAction(lexerMin, rule[1]);\n                    }\n                }\n                else {\n                    if (!rule.regex) {\n                        throw monarchCommon.createError(lexer, 'a rule must either be an array, or an object with a \\'regex\\' or \\'include\\' field at: ' + state);\n                    }\n                    if (rule.name) {\n                        if (typeof rule.name === 'string') {\n                            newrule.name = rule.name;\n                        }\n                    }\n                    if (rule.matchOnlyAtStart) {\n                        newrule.matchOnlyAtLineStart = bool(rule.matchOnlyAtLineStart, false);\n                    }\n                    newrule.setRegex(lexerMin, rule.regex);\n                    newrule.setAction(lexerMin, rule.action);\n                }\n                newrules.push(newrule);\n            }\n        }\n    }\n    // compile the tokenizer rules\n    if (!json.tokenizer || typeof (json.tokenizer) !== 'object') {\n        throw monarchCommon.createError(lexer, 'a language definition must define the \\'tokenizer\\' attribute as an object');\n    }\n    lexer.tokenizer = [];\n    for (const key in json.tokenizer) {\n        if (json.tokenizer.hasOwnProperty(key)) {\n            if (!lexer.start) {\n                lexer.start = key;\n            }\n            const rules = json.tokenizer[key];\n            lexer.tokenizer[key] = new Array();\n            addRules('tokenizer.' + key, lexer.tokenizer[key], rules);\n        }\n    }\n    lexer.usesEmbedded = lexerMin.usesEmbedded; // can be set during compileAction\n    // Set simple brackets\n    if (json.brackets) {\n        if (!(Array.isArray(json.brackets))) {\n            throw monarchCommon.createError(lexer, 'the \\'brackets\\' attribute must be defined as an array');\n        }\n    }\n    else {\n        json.brackets = [\n            { open: '{', close: '}', token: 'delimiter.curly' },\n            { open: '[', close: ']', token: 'delimiter.square' },\n            { open: '(', close: ')', token: 'delimiter.parenthesis' },\n            { open: '<', close: '>', token: 'delimiter.angle' }\n        ];\n    }\n    const brackets = [];\n    for (const el of json.brackets) {\n        let desc = el;\n        if (desc && Array.isArray(desc) && desc.length === 3) {\n            desc = { token: desc[2], open: desc[0], close: desc[1] };\n        }\n        if (desc.open === desc.close) {\n            throw monarchCommon.createError(lexer, 'open and close brackets in a \\'brackets\\' attribute must be different: ' + desc.open +\n                '\\n hint: use the \\'bracket\\' attribute if matching on equal brackets is required.');\n        }\n        if (typeof desc.open === 'string' && typeof desc.token === 'string' && typeof desc.close === 'string') {\n            brackets.push({\n                token: desc.token + lexer.tokenPostfix,\n                open: monarchCommon.fixCase(lexer, desc.open),\n                close: monarchCommon.fixCase(lexer, desc.close)\n            });\n        }\n        else {\n            throw monarchCommon.createError(lexer, 'every element in the \\'brackets\\' array must be a \\'{open,close,token}\\' object or array');\n        }\n    }\n    lexer.brackets = brackets;\n    // Disable throw so the syntax highlighter goes, no matter what\n    lexer.noThrow = true;\n    return lexer;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Color } from '../../../base/common/color.js';\nimport { Range } from '../../common/core/range.js';\nimport * as languages from '../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ModesRegistry } from '../../common/languages/modesRegistry.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\nimport { StandaloneServices } from './standaloneServices.js';\nimport { compile } from '../common/monarch/monarchCompile.js';\nimport { MonarchTokenizer } from '../common/monarch/monarchLexer.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\n/**\n * Register information about a new language.\n */\nexport function register(language) {\n    // Intentionally using the `ModesRegistry` here to avoid\n    // instantiating services too quickly in the standalone editor.\n    ModesRegistry.registerLanguage(language);\n}\n/**\n * Get the information of all the registered languages.\n */\nexport function getLanguages() {\n    let result = [];\n    result = result.concat(ModesRegistry.getLanguages());\n    return result;\n}\nexport function getEncodedLanguageId(languageId) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    return languageService.languageIdCodec.encodeLanguageId(languageId);\n}\n/**\n * An event emitted when a language is associated for the first time with a text model.\n * @event\n */\nexport function onLanguage(languageId, callback) {\n    return StandaloneServices.withServices(() => {\n        const languageService = StandaloneServices.get(ILanguageService);\n        const disposable = languageService.onDidRequestRichLanguageFeatures((encounteredLanguageId) => {\n            if (encounteredLanguageId === languageId) {\n                // stop listening\n                disposable.dispose();\n                // invoke actual listener\n                callback();\n            }\n        });\n        return disposable;\n    });\n}\n/**\n * An event emitted when a language is associated for the first time with a text model or\n * when a language is encountered during the tokenization of another language.\n * @event\n */\nexport function onLanguageEncountered(languageId, callback) {\n    return StandaloneServices.withServices(() => {\n        const languageService = StandaloneServices.get(ILanguageService);\n        const disposable = languageService.onDidRequestBasicLanguageFeatures((encounteredLanguageId) => {\n            if (encounteredLanguageId === languageId) {\n                // stop listening\n                disposable.dispose();\n                // invoke actual listener\n                callback();\n            }\n        });\n        return disposable;\n    });\n}\n/**\n * Set the editing configuration for a language.\n */\nexport function setLanguageConfiguration(languageId, configuration) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    if (!languageService.isRegisteredLanguageId(languageId)) {\n        throw new Error(`Cannot set configuration for unknown language ${languageId}`);\n    }\n    const languageConfigurationService = StandaloneServices.get(ILanguageConfigurationService);\n    return languageConfigurationService.register(languageId, configuration, 100);\n}\n/**\n * @internal\n */\nexport class EncodedTokenizationSupportAdapter {\n    constructor(languageId, actual) {\n        this._languageId = languageId;\n        this._actual = actual;\n    }\n    dispose() {\n        // NOOP\n    }\n    getInitialState() {\n        return this._actual.getInitialState();\n    }\n    tokenize(line, hasEOL, state) {\n        if (typeof this._actual.tokenize === 'function') {\n            return TokenizationSupportAdapter.adaptTokenize(this._languageId, this._actual, line, state);\n        }\n        throw new Error('Not supported!');\n    }\n    tokenizeEncoded(line, hasEOL, state) {\n        const result = this._actual.tokenizeEncoded(line, state);\n        return new languages.EncodedTokenizationResult(result.tokens, result.endState);\n    }\n}\n/**\n * @internal\n */\nexport class TokenizationSupportAdapter {\n    constructor(_languageId, _actual, _languageService, _standaloneThemeService) {\n        this._languageId = _languageId;\n        this._actual = _actual;\n        this._languageService = _languageService;\n        this._standaloneThemeService = _standaloneThemeService;\n    }\n    dispose() {\n        // NOOP\n    }\n    getInitialState() {\n        return this._actual.getInitialState();\n    }\n    static _toClassicTokens(tokens, language) {\n        const result = [];\n        let previousStartIndex = 0;\n        for (let i = 0, len = tokens.length; i < len; i++) {\n            const t = tokens[i];\n            let startIndex = t.startIndex;\n            // Prevent issues stemming from a buggy external tokenizer.\n            if (i === 0) {\n                // Force first token to start at first index!\n                startIndex = 0;\n            }\n            else if (startIndex < previousStartIndex) {\n                // Force tokens to be after one another!\n                startIndex = previousStartIndex;\n            }\n            result[i] = new languages.Token(startIndex, t.scopes, language);\n            previousStartIndex = startIndex;\n        }\n        return result;\n    }\n    static adaptTokenize(language, actual, line, state) {\n        const actualResult = actual.tokenize(line, state);\n        const tokens = TokenizationSupportAdapter._toClassicTokens(actualResult.tokens, language);\n        let endState;\n        // try to save an object if possible\n        if (actualResult.endState.equals(state)) {\n            endState = state;\n        }\n        else {\n            endState = actualResult.endState;\n        }\n        return new languages.TokenizationResult(tokens, endState);\n    }\n    tokenize(line, hasEOL, state) {\n        return TokenizationSupportAdapter.adaptTokenize(this._languageId, this._actual, line, state);\n    }\n    _toBinaryTokens(languageIdCodec, tokens) {\n        const languageId = languageIdCodec.encodeLanguageId(this._languageId);\n        const tokenTheme = this._standaloneThemeService.getColorTheme().tokenTheme;\n        const result = [];\n        let resultLen = 0;\n        let previousStartIndex = 0;\n        for (let i = 0, len = tokens.length; i < len; i++) {\n            const t = tokens[i];\n            const metadata = tokenTheme.match(languageId, t.scopes) | 1024 /* MetadataConsts.BALANCED_BRACKETS_MASK */;\n            if (resultLen > 0 && result[resultLen - 1] === metadata) {\n                // same metadata\n                continue;\n            }\n            let startIndex = t.startIndex;\n            // Prevent issues stemming from a buggy external tokenizer.\n            if (i === 0) {\n                // Force first token to start at first index!\n                startIndex = 0;\n            }\n            else if (startIndex < previousStartIndex) {\n                // Force tokens to be after one another!\n                startIndex = previousStartIndex;\n            }\n            result[resultLen++] = startIndex;\n            result[resultLen++] = metadata;\n            previousStartIndex = startIndex;\n        }\n        const actualResult = new Uint32Array(resultLen);\n        for (let i = 0; i < resultLen; i++) {\n            actualResult[i] = result[i];\n        }\n        return actualResult;\n    }\n    tokenizeEncoded(line, hasEOL, state) {\n        const actualResult = this._actual.tokenize(line, state);\n        const tokens = this._toBinaryTokens(this._languageService.languageIdCodec, actualResult.tokens);\n        let endState;\n        // try to save an object if possible\n        if (actualResult.endState.equals(state)) {\n            endState = state;\n        }\n        else {\n            endState = actualResult.endState;\n        }\n        return new languages.EncodedTokenizationResult(tokens, endState);\n    }\n}\nfunction isATokensProvider(provider) {\n    return (typeof provider.getInitialState === 'function');\n}\nfunction isEncodedTokensProvider(provider) {\n    return 'tokenizeEncoded' in provider;\n}\nfunction isThenable(obj) {\n    return obj && typeof obj.then === 'function';\n}\n/**\n * Change the color map that is used for token colors.\n * Supported formats (hex): #RRGGBB, $RRGGBBAA, #RGB, #RGBA\n */\nexport function setColorMap(colorMap) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    if (colorMap) {\n        const result = [null];\n        for (let i = 1, len = colorMap.length; i < len; i++) {\n            result[i] = Color.fromHex(colorMap[i]);\n        }\n        standaloneThemeService.setColorMapOverride(result);\n    }\n    else {\n        standaloneThemeService.setColorMapOverride(null);\n    }\n}\n/**\n * @internal\n */\nfunction createTokenizationSupportAdapter(languageId, provider) {\n    if (isEncodedTokensProvider(provider)) {\n        return new EncodedTokenizationSupportAdapter(languageId, provider);\n    }\n    else {\n        return new TokenizationSupportAdapter(languageId, provider, StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService));\n    }\n}\n/**\n * Register a tokens provider factory for a language. This tokenizer will be exclusive with a tokenizer\n * set using `setTokensProvider` or one created using `setMonarchTokensProvider`, but will work together\n * with a tokens provider set using `registerDocumentSemanticTokensProvider` or `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function registerTokensProviderFactory(languageId, factory) {\n    const adaptedFactory = new languages.LazyTokenizationSupport(() => __awaiter(this, void 0, void 0, function* () {\n        const result = yield Promise.resolve(factory.create());\n        if (!result) {\n            return null;\n        }\n        if (isATokensProvider(result)) {\n            return createTokenizationSupportAdapter(languageId, result);\n        }\n        return new MonarchTokenizer(StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService), languageId, compile(languageId, result), StandaloneServices.get(IConfigurationService));\n    }));\n    return languages.TokenizationRegistry.registerFactory(languageId, adaptedFactory);\n}\n/**\n * Set the tokens provider for a language (manual implementation). This tokenizer will be exclusive\n * with a tokenizer created using `setMonarchTokensProvider`, or with `registerTokensProviderFactory`,\n * but will work together with a tokens provider set using `registerDocumentSemanticTokensProvider`\n * or `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function setTokensProvider(languageId, provider) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    if (!languageService.isRegisteredLanguageId(languageId)) {\n        throw new Error(`Cannot set tokens provider for unknown language ${languageId}`);\n    }\n    if (isThenable(provider)) {\n        return registerTokensProviderFactory(languageId, { create: () => provider });\n    }\n    return languages.TokenizationRegistry.register(languageId, createTokenizationSupportAdapter(languageId, provider));\n}\n/**\n * Set the tokens provider for a language (monarch implementation). This tokenizer will be exclusive\n * with a tokenizer set using `setTokensProvider`, or with `registerTokensProviderFactory`, but will\n * work together with a tokens provider set using `registerDocumentSemanticTokensProvider` or\n * `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function setMonarchTokensProvider(languageId, languageDef) {\n    const create = (languageDef) => {\n        return new MonarchTokenizer(StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService), languageId, compile(languageId, languageDef), StandaloneServices.get(IConfigurationService));\n    };\n    if (isThenable(languageDef)) {\n        return registerTokensProviderFactory(languageId, { create: () => languageDef });\n    }\n    return languages.TokenizationRegistry.register(languageId, create(languageDef));\n}\n/**\n * Register a reference provider (used by e.g. reference search).\n */\nexport function registerReferenceProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.referenceProvider.register(languageSelector, provider);\n}\n/**\n * Register a rename provider (used by e.g. rename symbol).\n */\nexport function registerRenameProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.renameProvider.register(languageSelector, provider);\n}\n/**\n * Register a signature help provider (used by e.g. parameter hints).\n */\nexport function registerSignatureHelpProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.signatureHelpProvider.register(languageSelector, provider);\n}\n/**\n * Register a hover provider (used by e.g. editor hover).\n */\nexport function registerHoverProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.hoverProvider.register(languageSelector, {\n        provideHover: (model, position, token) => {\n            const word = model.getWordAtPosition(position);\n            return Promise.resolve(provider.provideHover(model, position, token)).then((value) => {\n                if (!value) {\n                    return undefined;\n                }\n                if (!value.range && word) {\n                    value.range = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n                }\n                if (!value.range) {\n                    value.range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n                }\n                return value;\n            });\n        }\n    });\n}\n/**\n * Register a document symbol provider (used by e.g. outline).\n */\nexport function registerDocumentSymbolProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentSymbolProvider.register(languageSelector, provider);\n}\n/**\n * Register a document highlight provider (used by e.g. highlight occurrences).\n */\nexport function registerDocumentHighlightProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentHighlightProvider.register(languageSelector, provider);\n}\n/**\n * Register an linked editing range provider.\n */\nexport function registerLinkedEditingRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.linkedEditingRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a definition provider (used by e.g. go to definition).\n */\nexport function registerDefinitionProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.definitionProvider.register(languageSelector, provider);\n}\n/**\n * Register a implementation provider (used by e.g. go to implementation).\n */\nexport function registerImplementationProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.implementationProvider.register(languageSelector, provider);\n}\n/**\n * Register a type definition provider (used by e.g. go to type definition).\n */\nexport function registerTypeDefinitionProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.typeDefinitionProvider.register(languageSelector, provider);\n}\n/**\n * Register a code lens provider (used by e.g. inline code lenses).\n */\nexport function registerCodeLensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.codeLensProvider.register(languageSelector, provider);\n}\n/**\n * Register a code action provider (used by e.g. quick fix).\n */\nexport function registerCodeActionProvider(languageSelector, provider, metadata) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.codeActionProvider.register(languageSelector, {\n        providedCodeActionKinds: metadata === null || metadata === void 0 ? void 0 : metadata.providedCodeActionKinds,\n        documentation: metadata === null || metadata === void 0 ? void 0 : metadata.documentation,\n        provideCodeActions: (model, range, context, token) => {\n            const markerService = StandaloneServices.get(IMarkerService);\n            const markers = markerService.read({ resource: model.uri }).filter(m => {\n                return Range.areIntersectingOrTouching(m, range);\n            });\n            return provider.provideCodeActions(model, range, { markers, only: context.only, trigger: context.trigger }, token);\n        },\n        resolveCodeAction: provider.resolveCodeAction\n    });\n}\n/**\n * Register a formatter that can handle only entire models.\n */\nexport function registerDocumentFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a formatter that can handle a range inside a model.\n */\nexport function registerDocumentRangeFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentRangeFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a formatter than can do formatting as the user types.\n */\nexport function registerOnTypeFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.onTypeFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a link provider that can find links in text.\n */\nexport function registerLinkProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.linkProvider.register(languageSelector, provider);\n}\n/**\n * Register a completion item provider (use by e.g. suggestions).\n */\nexport function registerCompletionItemProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.completionProvider.register(languageSelector, provider);\n}\n/**\n * Register a document color provider (used by Color Picker, Color Decorator).\n */\nexport function registerColorProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.colorProvider.register(languageSelector, provider);\n}\n/**\n * Register a folding range provider\n */\nexport function registerFoldingRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.foldingRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a declaration provider\n */\nexport function registerDeclarationProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.declarationProvider.register(languageSelector, provider);\n}\n/**\n * Register a selection range provider\n */\nexport function registerSelectionRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.selectionRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a document semantic tokens provider. A semantic tokens provider will complement and enhance a\n * simple top-down tokenizer. Simple top-down tokenizers can be set either via `setMonarchTokensProvider`\n * or `setTokensProvider`.\n *\n * For the best user experience, register both a semantic tokens provider and a top-down tokenizer.\n */\nexport function registerDocumentSemanticTokensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentSemanticTokensProvider.register(languageSelector, provider);\n}\n/**\n * Register a document range semantic tokens provider. A semantic tokens provider will complement and enhance a\n * simple top-down tokenizer. Simple top-down tokenizers can be set either via `setMonarchTokensProvider`\n * or `setTokensProvider`.\n *\n * For the best user experience, register both a semantic tokens provider and a top-down tokenizer.\n */\nexport function registerDocumentRangeSemanticTokensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentRangeSemanticTokensProvider.register(languageSelector, provider);\n}\n/**\n * Register an inline completions provider.\n */\nexport function registerInlineCompletionsProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.inlineCompletionsProvider.register(languageSelector, provider);\n}\n/**\n * Register an inlay hints provider.\n */\nexport function registerInlayHintsProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.inlayHintsProvider.register(languageSelector, provider);\n}\n/**\n * @internal\n */\nexport function createMonacoLanguagesAPI() {\n    return {\n        register: register,\n        getLanguages: getLanguages,\n        onLanguage: onLanguage,\n        onLanguageEncountered: onLanguageEncountered,\n        getEncodedLanguageId: getEncodedLanguageId,\n        // provider methods\n        setLanguageConfiguration: setLanguageConfiguration,\n        setColorMap: setColorMap,\n        registerTokensProviderFactory: registerTokensProviderFactory,\n        setTokensProvider: setTokensProvider,\n        setMonarchTokensProvider: setMonarchTokensProvider,\n        registerReferenceProvider: registerReferenceProvider,\n        registerRenameProvider: registerRenameProvider,\n        registerCompletionItemProvider: registerCompletionItemProvider,\n        registerSignatureHelpProvider: registerSignatureHelpProvider,\n        registerHoverProvider: registerHoverProvider,\n        registerDocumentSymbolProvider: registerDocumentSymbolProvider,\n        registerDocumentHighlightProvider: registerDocumentHighlightProvider,\n        registerLinkedEditingRangeProvider: registerLinkedEditingRangeProvider,\n        registerDefinitionProvider: registerDefinitionProvider,\n        registerImplementationProvider: registerImplementationProvider,\n        registerTypeDefinitionProvider: registerTypeDefinitionProvider,\n        registerCodeLensProvider: registerCodeLensProvider,\n        registerCodeActionProvider: registerCodeActionProvider,\n        registerDocumentFormattingEditProvider: registerDocumentFormattingEditProvider,\n        registerDocumentRangeFormattingEditProvider: registerDocumentRangeFormattingEditProvider,\n        registerOnTypeFormattingEditProvider: registerOnTypeFormattingEditProvider,\n        registerLinkProvider: registerLinkProvider,\n        registerColorProvider: registerColorProvider,\n        registerFoldingRangeProvider: registerFoldingRangeProvider,\n        registerDeclarationProvider: registerDeclarationProvider,\n        registerSelectionRangeProvider: registerSelectionRangeProvider,\n        registerDocumentSemanticTokensProvider: registerDocumentSemanticTokensProvider,\n        registerDocumentRangeSemanticTokensProvider: registerDocumentRangeSemanticTokensProvider,\n        registerInlineCompletionsProvider: registerInlineCompletionsProvider,\n        registerInlayHintsProvider: registerInlayHintsProvider,\n        // enums\n        DocumentHighlightKind: standaloneEnums.DocumentHighlightKind,\n        CompletionItemKind: standaloneEnums.CompletionItemKind,\n        CompletionItemTag: standaloneEnums.CompletionItemTag,\n        CompletionItemInsertTextRule: standaloneEnums.CompletionItemInsertTextRule,\n        SymbolKind: standaloneEnums.SymbolKind,\n        SymbolTag: standaloneEnums.SymbolTag,\n        IndentAction: standaloneEnums.IndentAction,\n        CompletionTriggerKind: standaloneEnums.CompletionTriggerKind,\n        SignatureHelpTriggerKind: standaloneEnums.SignatureHelpTriggerKind,\n        InlayHintKind: standaloneEnums.InlayHintKind,\n        InlineCompletionTriggerKind: standaloneEnums.InlineCompletionTriggerKind,\n        CodeActionTriggerType: standaloneEnums.CodeActionTriggerType,\n        // classes\n        FoldingRangeKind: languages.FoldingRangeKind,\n        SelectedSuggestionInfo: languages.SelectedSuggestionInfo,\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { Event } from '../../../base/common/event.js';\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nlet StandaloneLayoutService = class StandaloneLayoutService {\n    get dimension() {\n        if (!this._dimension) {\n            this._dimension = dom.getClientArea(window.document.body);\n        }\n        return this._dimension;\n    }\n    get hasContainer() {\n        return false;\n    }\n    get container() {\n        // On a page, multiple editors can be created. Therefore, there are multiple containers, not\n        // just a single one. Please use `ICodeEditorService` to get the current focused code editor\n        // and use its container if necessary. You can also instantiate `EditorScopedLayoutService`\n        // which implements `ILayoutService` but is not a part of the service collection because\n        // it is code editor instance specific.\n        throw new Error(`ILayoutService.container is not available in the standalone editor!`);\n    }\n    focus() {\n        var _a;\n        (_a = this._codeEditorService.getFocusedCodeEditor()) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    constructor(_codeEditorService) {\n        this._codeEditorService = _codeEditorService;\n        this.onDidLayout = Event.None;\n        this.offset = { top: 0, quickPickTop: 0 };\n    }\n};\nStandaloneLayoutService = __decorate([\n    __param(0, ICodeEditorService)\n], StandaloneLayoutService);\nlet EditorScopedLayoutService = class EditorScopedLayoutService extends StandaloneLayoutService {\n    get hasContainer() {\n        return false;\n    }\n    get container() {\n        return this._container;\n    }\n    constructor(_container, codeEditorService) {\n        super(codeEditorService);\n        this._container = _container;\n    }\n};\nEditorScopedLayoutService = __decorate([\n    __param(1, ICodeEditorService)\n], EditorScopedLayoutService);\nexport { EditorScopedLayoutService };\nregisterSingleton(ILayoutService, StandaloneLayoutService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './standaloneQuickInput.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorScopedLayoutService } from '../standaloneLayoutService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { QuickInputService } from '../../../../platform/quickinput/browser/quickInputService.js';\nimport { createSingleCallFunction } from '../../../../base/common/functional.js';\nlet EditorScopedQuickInputService = class EditorScopedQuickInputService extends QuickInputService {\n    constructor(editor, instantiationService, contextKeyService, themeService, codeEditorService) {\n        super(instantiationService, contextKeyService, themeService, new EditorScopedLayoutService(editor.getContainerDomNode(), codeEditorService));\n        this.host = undefined;\n        // Use the passed in code editor as host for the quick input widget\n        const contribution = QuickInputEditorContribution.get(editor);\n        if (contribution) {\n            const widget = contribution.widget;\n            this.host = {\n                _serviceBrand: undefined,\n                get hasContainer() { return true; },\n                get container() { return widget.getDomNode(); },\n                get dimension() { return editor.getLayoutInfo(); },\n                get onDidLayout() { return editor.onDidLayoutChange; },\n                focus: () => editor.focus(),\n                offset: { top: 0, quickPickTop: 0 }\n            };\n        }\n        else {\n            this.host = undefined;\n        }\n    }\n    createController() {\n        return super.createController(this.host);\n    }\n};\nEditorScopedQuickInputService = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, ICodeEditorService)\n], EditorScopedQuickInputService);\nlet StandaloneQuickInputService = class StandaloneQuickInputService {\n    get activeService() {\n        const editor = this.codeEditorService.getFocusedCodeEditor();\n        if (!editor) {\n            throw new Error('Quick input service needs a focused editor to work.');\n        }\n        // Find the quick input implementation for the focused\n        // editor or create it lazily if not yet created\n        let quickInputService = this.mapEditorToService.get(editor);\n        if (!quickInputService) {\n            const newQuickInputService = quickInputService = this.instantiationService.createInstance(EditorScopedQuickInputService, editor);\n            this.mapEditorToService.set(editor, quickInputService);\n            createSingleCallFunction(editor.onDidDispose)(() => {\n                newQuickInputService.dispose();\n                this.mapEditorToService.delete(editor);\n            });\n        }\n        return quickInputService;\n    }\n    get quickAccess() { return this.activeService.quickAccess; }\n    constructor(instantiationService, codeEditorService) {\n        this.instantiationService = instantiationService;\n        this.codeEditorService = codeEditorService;\n        this.mapEditorToService = new Map();\n    }\n    pick(picks, options = {}, token = CancellationToken.None) {\n        return this.activeService /* TS fail */.pick(picks, options, token);\n    }\n    createQuickPick() {\n        return this.activeService.createQuickPick();\n    }\n    createInputBox() {\n        return this.activeService.createInputBox();\n    }\n};\nStandaloneQuickInputService = __decorate([\n    __param(0, IInstantiationService),\n    __param(1, ICodeEditorService)\n], StandaloneQuickInputService);\nexport { StandaloneQuickInputService };\nexport class QuickInputEditorContribution {\n    static get(editor) {\n        return editor.getContribution(QuickInputEditorContribution.ID);\n    }\n    constructor(editor) {\n        this.editor = editor;\n        this.widget = new QuickInputEditorWidget(this.editor);\n    }\n    dispose() {\n        this.widget.dispose();\n    }\n}\nQuickInputEditorContribution.ID = 'editor.controller.quickInput';\nexport class QuickInputEditorWidget {\n    constructor(codeEditor) {\n        this.codeEditor = codeEditor;\n        this.domNode = document.createElement('div');\n        this.codeEditor.addOverlayWidget(this);\n    }\n    getId() {\n        return QuickInputEditorWidget.ID;\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    getPosition() {\n        return { preference: 2 /* OverlayWidgetPositionPreference.TOP_CENTER */ };\n    }\n    dispose() {\n        this.codeEditor.removeOverlayWidget(this);\n    }\n}\nQuickInputEditorWidget.ID = 'editor.contrib.quickInputWidget';\nregisterEditorContribution(QuickInputEditorContribution.ID, QuickInputEditorContribution, 4 /* EditorContributionInstantiation.Lazy */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport '../../common/languages/languageConfigurationRegistry.js';\nimport './standaloneCodeEditorService.js';\nimport './standaloneLayoutService.js';\nimport '../../../platform/undoRedo/common/undoRedoService.js';\nimport '../../common/services/languageFeatureDebounce.js';\nimport '../../common/services/semanticTokensStylingService.js';\nimport '../../common/services/languageFeaturesService.js';\nimport * as strings from '../../../base/common/strings.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { KeyCodeChord, decodeKeybinding } from '../../../base/common/keybindings.js';\nimport { ImmortalReference, toDisposable, DisposableStore, Disposable, combinedDisposable } from '../../../base/common/lifecycle.js';\nimport { OS, isLinux, isMacintosh } from '../../../base/common/platform.js';\nimport Severity from '../../../base/common/severity.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IBulkEditService, ResourceEdit, ResourceTextEdit } from '../../browser/services/bulkEditService.js';\nimport { isDiffEditorConfigurationKey, isEditorConfigurationKey } from '../../common/config/editorConfigurationSchema.js';\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Position as Pos } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextModelService } from '../../common/services/resolverService.js';\nimport { ITextResourceConfigurationService, ITextResourcePropertiesService } from '../../common/services/textResourceConfiguration.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { Configuration, ConfigurationModel, ConfigurationChangeEvent } from '../../../platform/configuration/common/configurationModels.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../platform/dialogs/common/dialogs.js';\nimport { createDecorator, IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { AbstractKeybindingService } from '../../../platform/keybinding/common/abstractKeybindingService.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingResolver } from '../../../platform/keybinding/common/keybindingResolver.js';\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ResolvedKeybindingItem } from '../../../platform/keybinding/common/resolvedKeybindingItem.js';\nimport { USLayoutResolvedKeybinding } from '../../../platform/keybinding/common/usLayoutResolvedKeybinding.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { INotificationService, NoOpNotification } from '../../../platform/notification/common/notification.js';\nimport { IEditorProgressService, IProgressService } from '../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { IWorkspaceContextService, WorkspaceFolder, STANDALONE_EDITOR_WORKSPACE_ID } from '../../../platform/workspace/common/workspace.js';\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\nimport { StandaloneServicesNLS } from '../../common/standaloneStrings.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { ConsoleLogger, ILogService } from '../../../platform/log/common/log.js';\nimport { IWorkspaceTrustManagementService } from '../../../platform/workspace/common/workspaceTrust.js';\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\nimport { ContextViewService } from '../../../platform/contextview/browser/contextViewService.js';\nimport { LanguageService } from '../../common/services/languageService.js';\nimport { ContextMenuService } from '../../../platform/contextview/browser/contextMenuService.js';\nimport { getSingletonServiceDescriptors, registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { OpenerService } from '../../browser/services/openerService.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorker.js';\nimport { EditorWorkerService } from '../../browser/services/editorWorkerService.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { MarkerDecorationsService } from '../../common/services/markerDecorationsService.js';\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\nimport { ModelService } from '../../common/services/modelService.js';\nimport { StandaloneQuickInputService } from './quickInput/standaloneQuickInputService.js';\nimport { StandaloneThemeService } from './standaloneThemeService.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { AccessibilityService } from '../../../platform/accessibility/browser/accessibilityService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { IMenuService } from '../../../platform/actions/common/actions.js';\nimport { MenuService } from '../../../platform/actions/common/menuService.js';\nimport { BrowserClipboardService } from '../../../platform/clipboard/browser/clipboardService.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyService } from '../../../platform/contextkey/browser/contextKeyService.js';\nimport { SyncDescriptor } from '../../../platform/instantiation/common/descriptors.js';\nimport { InstantiationService } from '../../../platform/instantiation/common/instantiationService.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { IListService, ListService } from '../../../platform/list/browser/listService.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { MarkerService } from '../../../platform/markers/common/markerService.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService, InMemoryStorageService } from '../../../platform/storage/common/storage.js';\nimport { DefaultConfiguration } from '../../../platform/configuration/common/configurations.js';\nimport { IAudioCueService } from '../../../platform/audioCues/browser/audioCueService.js';\nimport { LogService } from '../../../platform/log/common/logService.js';\nimport { getEditorFeatures } from '../../common/editorFeatures.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\nclass SimpleModel {\n    constructor(model) {\n        this.disposed = false;\n        this.model = model;\n        this._onWillDispose = new Emitter();\n    }\n    get textEditorModel() {\n        return this.model;\n    }\n    dispose() {\n        this.disposed = true;\n        this._onWillDispose.fire();\n    }\n}\nlet StandaloneTextModelService = class StandaloneTextModelService {\n    constructor(modelService) {\n        this.modelService = modelService;\n    }\n    createModelReference(resource) {\n        const model = this.modelService.getModel(resource);\n        if (!model) {\n            return Promise.reject(new Error(`Model not found`));\n        }\n        return Promise.resolve(new ImmortalReference(new SimpleModel(model)));\n    }\n};\nStandaloneTextModelService = __decorate([\n    __param(0, IModelService)\n], StandaloneTextModelService);\nclass StandaloneEditorProgressService {\n    show() {\n        return StandaloneEditorProgressService.NULL_PROGRESS_RUNNER;\n    }\n    showWhile(promise, delay) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield promise;\n        });\n    }\n}\nStandaloneEditorProgressService.NULL_PROGRESS_RUNNER = {\n    done: () => { },\n    total: () => { },\n    worked: () => { }\n};\nclass StandaloneProgressService {\n    withProgress(_options, task, onDidCancel) {\n        return task({\n            report: () => { },\n        });\n    }\n}\nclass StandaloneEnvironmentService {\n    constructor() {\n        this.isExtensionDevelopment = false;\n        this.isBuilt = false;\n    }\n}\nclass StandaloneDialogService {\n    confirm(confirmation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const confirmed = this.doConfirm(confirmation.message, confirmation.detail);\n            return {\n                confirmed,\n                checkboxChecked: false // unsupported\n            };\n        });\n    }\n    doConfirm(message, detail) {\n        let messageText = message;\n        if (detail) {\n            messageText = messageText + '\\n\\n' + detail;\n        }\n        return window.confirm(messageText);\n    }\n    prompt(prompt) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            let result = undefined;\n            const confirmed = this.doConfirm(prompt.message, prompt.detail);\n            if (confirmed) {\n                const promptButtons = [...((_a = prompt.buttons) !== null && _a !== void 0 ? _a : [])];\n                if (prompt.cancelButton && typeof prompt.cancelButton !== 'string' && typeof prompt.cancelButton !== 'boolean') {\n                    promptButtons.push(prompt.cancelButton);\n                }\n                result = yield ((_b = promptButtons[0]) === null || _b === void 0 ? void 0 : _b.run({ checkboxChecked: false }));\n            }\n            return { result };\n        });\n    }\n    error(message, detail) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.prompt({ type: Severity.Error, message, detail });\n        });\n    }\n}\nexport class StandaloneNotificationService {\n    info(message) {\n        return this.notify({ severity: Severity.Info, message });\n    }\n    warn(message) {\n        return this.notify({ severity: Severity.Warning, message });\n    }\n    error(error) {\n        return this.notify({ severity: Severity.Error, message: error });\n    }\n    notify(notification) {\n        switch (notification.severity) {\n            case Severity.Error:\n                console.error(notification.message);\n                break;\n            case Severity.Warning:\n                console.warn(notification.message);\n                break;\n            default:\n                console.log(notification.message);\n                break;\n        }\n        return StandaloneNotificationService.NO_OP;\n    }\n    prompt(severity, message, choices, options) {\n        return StandaloneNotificationService.NO_OP;\n    }\n    status(message, options) {\n        return Disposable.None;\n    }\n}\nStandaloneNotificationService.NO_OP = new NoOpNotification();\nlet StandaloneCommandService = class StandaloneCommandService {\n    constructor(instantiationService) {\n        this._onWillExecuteCommand = new Emitter();\n        this._onDidExecuteCommand = new Emitter();\n        this.onDidExecuteCommand = this._onDidExecuteCommand.event;\n        this._instantiationService = instantiationService;\n    }\n    executeCommand(id, ...args) {\n        const command = CommandsRegistry.getCommand(id);\n        if (!command) {\n            return Promise.reject(new Error(`command '${id}' not found`));\n        }\n        try {\n            this._onWillExecuteCommand.fire({ commandId: id, args });\n            const result = this._instantiationService.invokeFunction.apply(this._instantiationService, [command.handler, ...args]);\n            this._onDidExecuteCommand.fire({ commandId: id, args });\n            return Promise.resolve(result);\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n    }\n};\nStandaloneCommandService = __decorate([\n    __param(0, IInstantiationService)\n], StandaloneCommandService);\nexport { StandaloneCommandService };\nlet StandaloneKeybindingService = class StandaloneKeybindingService extends AbstractKeybindingService {\n    constructor(contextKeyService, commandService, telemetryService, notificationService, logService, codeEditorService) {\n        super(contextKeyService, commandService, telemetryService, notificationService, logService);\n        this._cachedResolver = null;\n        this._dynamicKeybindings = [];\n        this._domNodeListeners = [];\n        const addContainer = (domNode) => {\n            const disposables = new DisposableStore();\n            // for standard keybindings\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                const shouldPreventDefault = this._dispatch(keyEvent, keyEvent.target);\n                if (shouldPreventDefault) {\n                    keyEvent.preventDefault();\n                    keyEvent.stopPropagation();\n                }\n            }));\n            // for single modifier chord keybindings (e.g. shift shift)\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                const shouldPreventDefault = this._singleModifierDispatch(keyEvent, keyEvent.target);\n                if (shouldPreventDefault) {\n                    keyEvent.preventDefault();\n                }\n            }));\n            this._domNodeListeners.push(new DomNodeListeners(domNode, disposables));\n        };\n        const removeContainer = (domNode) => {\n            for (let i = 0; i < this._domNodeListeners.length; i++) {\n                const domNodeListeners = this._domNodeListeners[i];\n                if (domNodeListeners.domNode === domNode) {\n                    this._domNodeListeners.splice(i, 1);\n                    domNodeListeners.dispose();\n                }\n            }\n        };\n        const addCodeEditor = (codeEditor) => {\n            if (codeEditor.getOption(61 /* EditorOption.inDiffEditor */)) {\n                return;\n            }\n            addContainer(codeEditor.getContainerDomNode());\n        };\n        const removeCodeEditor = (codeEditor) => {\n            if (codeEditor.getOption(61 /* EditorOption.inDiffEditor */)) {\n                return;\n            }\n            removeContainer(codeEditor.getContainerDomNode());\n        };\n        this._register(codeEditorService.onCodeEditorAdd(addCodeEditor));\n        this._register(codeEditorService.onCodeEditorRemove(removeCodeEditor));\n        codeEditorService.listCodeEditors().forEach(addCodeEditor);\n        const addDiffEditor = (diffEditor) => {\n            addContainer(diffEditor.getContainerDomNode());\n        };\n        const removeDiffEditor = (diffEditor) => {\n            removeContainer(diffEditor.getContainerDomNode());\n        };\n        this._register(codeEditorService.onDiffEditorAdd(addDiffEditor));\n        this._register(codeEditorService.onDiffEditorRemove(removeDiffEditor));\n        codeEditorService.listDiffEditors().forEach(addDiffEditor);\n    }\n    addDynamicKeybinding(command, keybinding, handler, when) {\n        return combinedDisposable(CommandsRegistry.registerCommand(command, handler), this.addDynamicKeybindings([{\n                keybinding,\n                command,\n                when\n            }]));\n    }\n    addDynamicKeybindings(rules) {\n        const entries = rules.map((rule) => {\n            var _a;\n            const keybinding = decodeKeybinding(rule.keybinding, OS);\n            return {\n                keybinding,\n                command: (_a = rule.command) !== null && _a !== void 0 ? _a : null,\n                commandArgs: rule.commandArgs,\n                when: rule.when,\n                weight1: 1000,\n                weight2: 0,\n                extensionId: null,\n                isBuiltinExtension: false\n            };\n        });\n        this._dynamicKeybindings = this._dynamicKeybindings.concat(entries);\n        this.updateResolver();\n        return toDisposable(() => {\n            // Search the first entry and remove them all since they will be contiguous\n            for (let i = 0; i < this._dynamicKeybindings.length; i++) {\n                if (this._dynamicKeybindings[i] === entries[0]) {\n                    this._dynamicKeybindings.splice(i, entries.length);\n                    this.updateResolver();\n                    return;\n                }\n            }\n        });\n    }\n    updateResolver() {\n        this._cachedResolver = null;\n        this._onDidUpdateKeybindings.fire();\n    }\n    _getResolver() {\n        if (!this._cachedResolver) {\n            const defaults = this._toNormalizedKeybindingItems(KeybindingsRegistry.getDefaultKeybindings(), true);\n            const overrides = this._toNormalizedKeybindingItems(this._dynamicKeybindings, false);\n            this._cachedResolver = new KeybindingResolver(defaults, overrides, (str) => this._log(str));\n        }\n        return this._cachedResolver;\n    }\n    _documentHasFocus() {\n        return document.hasFocus();\n    }\n    _toNormalizedKeybindingItems(items, isDefault) {\n        const result = [];\n        let resultLen = 0;\n        for (const item of items) {\n            const when = item.when || undefined;\n            const keybinding = item.keybinding;\n            if (!keybinding) {\n                // This might be a removal keybinding item in user settings => accept it\n                result[resultLen++] = new ResolvedKeybindingItem(undefined, item.command, item.commandArgs, when, isDefault, null, false);\n            }\n            else {\n                const resolvedKeybindings = USLayoutResolvedKeybinding.resolveKeybinding(keybinding, OS);\n                for (const resolvedKeybinding of resolvedKeybindings) {\n                    result[resultLen++] = new ResolvedKeybindingItem(resolvedKeybinding, item.command, item.commandArgs, when, isDefault, null, false);\n                }\n            }\n        }\n        return result;\n    }\n    resolveKeyboardEvent(keyboardEvent) {\n        const chord = new KeyCodeChord(keyboardEvent.ctrlKey, keyboardEvent.shiftKey, keyboardEvent.altKey, keyboardEvent.metaKey, keyboardEvent.keyCode);\n        return new USLayoutResolvedKeybinding([chord], OS);\n    }\n};\nStandaloneKeybindingService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICommandService),\n    __param(2, ITelemetryService),\n    __param(3, INotificationService),\n    __param(4, ILogService),\n    __param(5, ICodeEditorService)\n], StandaloneKeybindingService);\nexport { StandaloneKeybindingService };\nclass DomNodeListeners extends Disposable {\n    constructor(domNode, disposables) {\n        super();\n        this.domNode = domNode;\n        this._register(disposables);\n    }\n}\nfunction isConfigurationOverrides(thing) {\n    return thing\n        && typeof thing === 'object'\n        && (!thing.overrideIdentifier || typeof thing.overrideIdentifier === 'string')\n        && (!thing.resource || thing.resource instanceof URI);\n}\nexport class StandaloneConfigurationService {\n    constructor() {\n        this._onDidChangeConfiguration = new Emitter();\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n        const defaultConfiguration = new DefaultConfiguration();\n        this._configuration = new Configuration(defaultConfiguration.reload(), new ConfigurationModel(), new ConfigurationModel(), new ConfigurationModel());\n        defaultConfiguration.dispose();\n    }\n    getValue(arg1, arg2) {\n        const section = typeof arg1 === 'string' ? arg1 : undefined;\n        const overrides = isConfigurationOverrides(arg1) ? arg1 : isConfigurationOverrides(arg2) ? arg2 : {};\n        return this._configuration.getValue(section, overrides, undefined);\n    }\n    updateValues(values) {\n        const previous = { data: this._configuration.toData() };\n        const changedKeys = [];\n        for (const entry of values) {\n            const [key, value] = entry;\n            if (this.getValue(key) === value) {\n                continue;\n            }\n            this._configuration.updateValue(key, value);\n            changedKeys.push(key);\n        }\n        if (changedKeys.length > 0) {\n            const configurationChangeEvent = new ConfigurationChangeEvent({ keys: changedKeys, overrides: [] }, previous, this._configuration);\n            configurationChangeEvent.source = 8 /* ConfigurationTarget.MEMORY */;\n            configurationChangeEvent.sourceConfig = null;\n            this._onDidChangeConfiguration.fire(configurationChangeEvent);\n        }\n        return Promise.resolve();\n    }\n    updateValue(key, value, arg3, arg4) {\n        return this.updateValues([[key, value]]);\n    }\n    inspect(key, options = {}) {\n        return this._configuration.inspect(key, options, undefined);\n    }\n}\nlet StandaloneResourceConfigurationService = class StandaloneResourceConfigurationService {\n    constructor(configurationService, modelService, languageService) {\n        this.configurationService = configurationService;\n        this.modelService = modelService;\n        this.languageService = languageService;\n        this._onDidChangeConfiguration = new Emitter();\n        this.configurationService.onDidChangeConfiguration((e) => {\n            this._onDidChangeConfiguration.fire({ affectedKeys: e.affectedKeys, affectsConfiguration: (resource, configuration) => e.affectsConfiguration(configuration) });\n        });\n    }\n    getValue(resource, arg2, arg3) {\n        const position = Pos.isIPosition(arg2) ? arg2 : null;\n        const section = position ? (typeof arg3 === 'string' ? arg3 : undefined) : (typeof arg2 === 'string' ? arg2 : undefined);\n        const language = resource ? this.getLanguage(resource, position) : undefined;\n        if (typeof section === 'undefined') {\n            return this.configurationService.getValue({\n                resource,\n                overrideIdentifier: language\n            });\n        }\n        return this.configurationService.getValue(section, {\n            resource,\n            overrideIdentifier: language\n        });\n    }\n    getLanguage(resource, position) {\n        const model = this.modelService.getModel(resource);\n        if (model) {\n            return position ? model.getLanguageIdAtPosition(position.lineNumber, position.column) : model.getLanguageId();\n        }\n        return this.languageService.guessLanguageIdByFilepathOrFirstLine(resource);\n    }\n};\nStandaloneResourceConfigurationService = __decorate([\n    __param(0, IConfigurationService),\n    __param(1, IModelService),\n    __param(2, ILanguageService)\n], StandaloneResourceConfigurationService);\nlet StandaloneResourcePropertiesService = class StandaloneResourcePropertiesService {\n    constructor(configurationService) {\n        this.configurationService = configurationService;\n    }\n    getEOL(resource, language) {\n        const eol = this.configurationService.getValue('files.eol', { overrideIdentifier: language, resource });\n        if (eol && typeof eol === 'string' && eol !== 'auto') {\n            return eol;\n        }\n        return (isLinux || isMacintosh) ? '\\n' : '\\r\\n';\n    }\n};\nStandaloneResourcePropertiesService = __decorate([\n    __param(0, IConfigurationService)\n], StandaloneResourcePropertiesService);\nclass StandaloneTelemetryService {\n    publicLog2() { }\n}\nclass StandaloneWorkspaceContextService {\n    constructor() {\n        const resource = URI.from({ scheme: StandaloneWorkspaceContextService.SCHEME, authority: 'model', path: '/' });\n        this.workspace = { id: STANDALONE_EDITOR_WORKSPACE_ID, folders: [new WorkspaceFolder({ uri: resource, name: '', index: 0 })] };\n    }\n    getWorkspace() {\n        return this.workspace;\n    }\n    getWorkspaceFolder(resource) {\n        return resource && resource.scheme === StandaloneWorkspaceContextService.SCHEME ? this.workspace.folders[0] : null;\n    }\n}\nStandaloneWorkspaceContextService.SCHEME = 'inmemory';\nexport function updateConfigurationService(configurationService, source, isDiffEditor) {\n    if (!source) {\n        return;\n    }\n    if (!(configurationService instanceof StandaloneConfigurationService)) {\n        return;\n    }\n    const toUpdate = [];\n    Object.keys(source).forEach((key) => {\n        if (isEditorConfigurationKey(key)) {\n            toUpdate.push([`editor.${key}`, source[key]]);\n        }\n        if (isDiffEditor && isDiffEditorConfigurationKey(key)) {\n            toUpdate.push([`diffEditor.${key}`, source[key]]);\n        }\n    });\n    if (toUpdate.length > 0) {\n        configurationService.updateValues(toUpdate);\n    }\n}\nlet StandaloneBulkEditService = class StandaloneBulkEditService {\n    constructor(_modelService) {\n        this._modelService = _modelService;\n        //\n    }\n    hasPreviewHandler() {\n        return false;\n    }\n    apply(editsIn, _options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const edits = Array.isArray(editsIn) ? editsIn : ResourceEdit.convert(editsIn);\n            const textEdits = new Map();\n            for (const edit of edits) {\n                if (!(edit instanceof ResourceTextEdit)) {\n                    throw new Error('bad edit - only text edits are supported');\n                }\n                const model = this._modelService.getModel(edit.resource);\n                if (!model) {\n                    throw new Error('bad edit - model not found');\n                }\n                if (typeof edit.versionId === 'number' && model.getVersionId() !== edit.versionId) {\n                    throw new Error('bad state - model changed in the meantime');\n                }\n                let array = textEdits.get(model);\n                if (!array) {\n                    array = [];\n                    textEdits.set(model, array);\n                }\n                array.push(EditOperation.replaceMove(Range.lift(edit.textEdit.range), edit.textEdit.text));\n            }\n            let totalEdits = 0;\n            let totalFiles = 0;\n            for (const [model, edits] of textEdits) {\n                model.pushStackElement();\n                model.pushEditOperations([], edits, () => []);\n                model.pushStackElement();\n                totalFiles += 1;\n                totalEdits += edits.length;\n            }\n            return {\n                ariaSummary: strings.format(StandaloneServicesNLS.bulkEditServiceSummary, totalEdits, totalFiles),\n                isApplied: totalEdits > 0\n            };\n        });\n    }\n};\nStandaloneBulkEditService = __decorate([\n    __param(0, IModelService)\n], StandaloneBulkEditService);\nclass StandaloneUriLabelService {\n    getUriLabel(resource, options) {\n        if (resource.scheme === 'file') {\n            return resource.fsPath;\n        }\n        return resource.path;\n    }\n    getUriBasenameLabel(resource) {\n        return basename(resource);\n    }\n}\nlet StandaloneContextViewService = class StandaloneContextViewService extends ContextViewService {\n    constructor(layoutService, _codeEditorService) {\n        super(layoutService);\n        this._codeEditorService = _codeEditorService;\n    }\n    showContextView(delegate, container, shadowRoot) {\n        if (!container) {\n            const codeEditor = this._codeEditorService.getFocusedCodeEditor() || this._codeEditorService.getActiveCodeEditor();\n            if (codeEditor) {\n                container = codeEditor.getContainerDomNode();\n            }\n        }\n        return super.showContextView(delegate, container, shadowRoot);\n    }\n};\nStandaloneContextViewService = __decorate([\n    __param(0, ILayoutService),\n    __param(1, ICodeEditorService)\n], StandaloneContextViewService);\nclass StandaloneWorkspaceTrustManagementService {\n    constructor() {\n        this._neverEmitter = new Emitter();\n        this.onDidChangeTrust = this._neverEmitter.event;\n    }\n    isWorkspaceTrusted() {\n        return true;\n    }\n}\nclass StandaloneLanguageService extends LanguageService {\n    constructor() {\n        super();\n    }\n}\nclass StandaloneLogService extends LogService {\n    constructor() {\n        super(new ConsoleLogger());\n    }\n}\nlet StandaloneContextMenuService = class StandaloneContextMenuService extends ContextMenuService {\n    constructor(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService) {\n        super(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService);\n        this.configure({ blockMouse: false }); // we do not want that in the standalone editor\n    }\n};\nStandaloneContextMenuService = __decorate([\n    __param(0, ITelemetryService),\n    __param(1, INotificationService),\n    __param(2, IContextViewService),\n    __param(3, IKeybindingService),\n    __param(4, IMenuService),\n    __param(5, IContextKeyService)\n], StandaloneContextMenuService);\nclass StandaloneAudioService {\n    playAudioCue(cue, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n        });\n    }\n}\nregisterSingleton(IConfigurationService, StandaloneConfigurationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextResourceConfigurationService, StandaloneResourceConfigurationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextResourcePropertiesService, StandaloneResourcePropertiesService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IWorkspaceContextService, StandaloneWorkspaceContextService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ILabelService, StandaloneUriLabelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITelemetryService, StandaloneTelemetryService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IDialogService, StandaloneDialogService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEnvironmentService, StandaloneEnvironmentService, 0 /* InstantiationType.Eager */);\nregisterSingleton(INotificationService, StandaloneNotificationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMarkerService, MarkerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ILanguageService, StandaloneLanguageService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IStandaloneThemeService, StandaloneThemeService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ILogService, StandaloneLogService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IModelService, ModelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMarkerDecorationsService, MarkerDecorationsService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextKeyService, ContextKeyService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IProgressService, StandaloneProgressService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEditorProgressService, StandaloneEditorProgressService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IStorageService, InMemoryStorageService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEditorWorkerService, EditorWorkerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IBulkEditService, StandaloneBulkEditService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IWorkspaceTrustManagementService, StandaloneWorkspaceTrustManagementService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextModelService, StandaloneTextModelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IAccessibilityService, AccessibilityService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IListService, ListService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ICommandService, StandaloneCommandService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IKeybindingService, StandaloneKeybindingService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IQuickInputService, StandaloneQuickInputService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextViewService, StandaloneContextViewService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IOpenerService, OpenerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IClipboardService, BrowserClipboardService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextMenuService, StandaloneContextMenuService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMenuService, MenuService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IAudioCueService, StandaloneAudioService, 0 /* InstantiationType.Eager */);\n/**\n * We don't want to eagerly instantiate services because embedders get a one time chance\n * to override services when they create the first editor.\n */\nexport var StandaloneServices;\n(function (StandaloneServices) {\n    const serviceCollection = new ServiceCollection();\n    for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n        serviceCollection.set(id, descriptor);\n    }\n    const instantiationService = new InstantiationService(serviceCollection, true);\n    serviceCollection.set(IInstantiationService, instantiationService);\n    function get(serviceId) {\n        if (!initialized) {\n            initialize({});\n        }\n        const r = serviceCollection.get(serviceId);\n        if (!r) {\n            throw new Error('Missing service ' + serviceId);\n        }\n        if (r instanceof SyncDescriptor) {\n            return instantiationService.invokeFunction((accessor) => accessor.get(serviceId));\n        }\n        else {\n            return r;\n        }\n    }\n    StandaloneServices.get = get;\n    let initialized = false;\n    const onDidInitialize = new Emitter();\n    function initialize(overrides) {\n        if (initialized) {\n            return instantiationService;\n        }\n        initialized = true;\n        // Add singletons that were registered after this module loaded\n        for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n            if (!serviceCollection.get(id)) {\n                serviceCollection.set(id, descriptor);\n            }\n        }\n        // Initialize the service collection with the overrides, but only if the\n        // service was not instantiated in the meantime.\n        for (const serviceId in overrides) {\n            if (overrides.hasOwnProperty(serviceId)) {\n                const serviceIdentifier = createDecorator(serviceId);\n                const r = serviceCollection.get(serviceIdentifier);\n                if (r instanceof SyncDescriptor) {\n                    serviceCollection.set(serviceIdentifier, overrides[serviceId]);\n                }\n            }\n        }\n        // Instantiate all editor features\n        const editorFeatures = getEditorFeatures();\n        for (const feature of editorFeatures) {\n            try {\n                instantiationService.createInstance(feature);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n        onDidInitialize.fire();\n        return instantiationService;\n    }\n    StandaloneServices.initialize = initialize;\n    /**\n     * Executes callback once services are initialized.\n     */\n    function withServices(callback) {\n        if (initialized) {\n            return callback();\n        }\n        const disposable = new DisposableStore();\n        const listener = disposable.add(onDidInitialize.event(() => {\n            listener.dispose();\n            disposable.add(callback());\n        }));\n        return disposable;\n    }\n    StandaloneServices.withServices = withServices;\n})(StandaloneServices || (StandaloneServices = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { editorActiveIndentGuide1, editorIndentGuide1 } from '../../common/core/editorColorRegistry.js';\nimport { editorBackground, editorForeground, editorInactiveSelection, editorSelectionHighlight } from '../../../platform/theme/common/colorRegistry.js';\n/* -------------------------------- Begin vs theme -------------------------------- */\nexport const vs = {\n    base: 'vs',\n    inherit: false,\n    rules: [\n        { token: '', foreground: '000000', background: 'fffffe' },\n        { token: 'invalid', foreground: 'cd3131' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '001188' },\n        { token: 'variable.predefined', foreground: '4864AA' },\n        { token: 'constant', foreground: 'dd0000' },\n        { token: 'comment', foreground: '008000' },\n        { token: 'number', foreground: '098658' },\n        { token: 'number.hex', foreground: '3030c0' },\n        { token: 'regexp', foreground: '800000' },\n        { token: 'annotation', foreground: '808080' },\n        { token: 'type', foreground: '008080' },\n        { token: 'delimiter', foreground: '000000' },\n        { token: 'delimiter.html', foreground: '383838' },\n        { token: 'delimiter.xml', foreground: '0000FF' },\n        { token: 'tag', foreground: '800000' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta.scss', foreground: '800000' },\n        { token: 'metatag', foreground: 'e00000' },\n        { token: 'metatag.content.html', foreground: 'FF0000' },\n        { token: 'metatag.html', foreground: '808080' },\n        { token: 'metatag.xml', foreground: '808080' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '863B00' },\n        { token: 'string.key.json', foreground: 'A31515' },\n        { token: 'string.value.json', foreground: '0451A5' },\n        { token: 'attribute.name', foreground: 'FF0000' },\n        { token: 'attribute.value', foreground: '0451A5' },\n        { token: 'attribute.value.number', foreground: '098658' },\n        { token: 'attribute.value.unit', foreground: '098658' },\n        { token: 'attribute.value.html', foreground: '0000FF' },\n        { token: 'attribute.value.xml', foreground: '0000FF' },\n        { token: 'string', foreground: 'A31515' },\n        { token: 'string.html', foreground: '0000FF' },\n        { token: 'string.sql', foreground: 'FF0000' },\n        { token: 'string.yaml', foreground: '0451A5' },\n        { token: 'keyword', foreground: '0000FF' },\n        { token: 'keyword.json', foreground: '0451A5' },\n        { token: 'keyword.flow', foreground: 'AF00DB' },\n        { token: 'keyword.flow.scss', foreground: '0000FF' },\n        { token: 'operator.scss', foreground: '666666' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '666666' },\n        { token: 'predefined.sql', foreground: 'C700C7' },\n    ],\n    colors: {\n        [editorBackground]: '#FFFFFE',\n        [editorForeground]: '#000000',\n        [editorInactiveSelection]: '#E5EBF1',\n        [editorIndentGuide1]: '#D3D3D3',\n        [editorActiveIndentGuide1]: '#939393',\n        [editorSelectionHighlight]: '#ADD6FF4D'\n    }\n};\n/* -------------------------------- End vs theme -------------------------------- */\n/* -------------------------------- Begin vs-dark theme -------------------------------- */\nexport const vs_dark = {\n    base: 'vs-dark',\n    inherit: false,\n    rules: [\n        { token: '', foreground: 'D4D4D4', background: '1E1E1E' },\n        { token: 'invalid', foreground: 'f44747' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '74B0DF' },\n        { token: 'variable.predefined', foreground: '4864AA' },\n        { token: 'variable.parameter', foreground: '9CDCFE' },\n        { token: 'constant', foreground: '569CD6' },\n        { token: 'comment', foreground: '608B4E' },\n        { token: 'number', foreground: 'B5CEA8' },\n        { token: 'number.hex', foreground: '5BB498' },\n        { token: 'regexp', foreground: 'B46695' },\n        { token: 'annotation', foreground: 'cc6666' },\n        { token: 'type', foreground: '3DC9B0' },\n        { token: 'delimiter', foreground: 'DCDCDC' },\n        { token: 'delimiter.html', foreground: '808080' },\n        { token: 'delimiter.xml', foreground: '808080' },\n        { token: 'tag', foreground: '569CD6' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta.scss', foreground: 'A79873' },\n        { token: 'meta.tag', foreground: 'CE9178' },\n        { token: 'metatag', foreground: 'DD6A6F' },\n        { token: 'metatag.content.html', foreground: '9CDCFE' },\n        { token: 'metatag.html', foreground: '569CD6' },\n        { token: 'metatag.xml', foreground: '569CD6' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '9CDCFE' },\n        { token: 'string.key.json', foreground: '9CDCFE' },\n        { token: 'string.value.json', foreground: 'CE9178' },\n        { token: 'attribute.name', foreground: '9CDCFE' },\n        { token: 'attribute.value', foreground: 'CE9178' },\n        { token: 'attribute.value.number.css', foreground: 'B5CEA8' },\n        { token: 'attribute.value.unit.css', foreground: 'B5CEA8' },\n        { token: 'attribute.value.hex.css', foreground: 'D4D4D4' },\n        { token: 'string', foreground: 'CE9178' },\n        { token: 'string.sql', foreground: 'FF0000' },\n        { token: 'keyword', foreground: '569CD6' },\n        { token: 'keyword.flow', foreground: 'C586C0' },\n        { token: 'keyword.json', foreground: 'CE9178' },\n        { token: 'keyword.flow.scss', foreground: '569CD6' },\n        { token: 'operator.scss', foreground: '909090' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '909090' },\n        { token: 'predefined.sql', foreground: 'FF00FF' },\n    ],\n    colors: {\n        [editorBackground]: '#1E1E1E',\n        [editorForeground]: '#D4D4D4',\n        [editorInactiveSelection]: '#3A3D41',\n        [editorIndentGuide1]: '#404040',\n        [editorActiveIndentGuide1]: '#707070',\n        [editorSelectionHighlight]: '#ADD6FF26'\n    }\n};\n/* -------------------------------- End vs-dark theme -------------------------------- */\n/* -------------------------------- Begin hc-black theme -------------------------------- */\nexport const hc_black = {\n    base: 'hc-black',\n    inherit: false,\n    rules: [\n        { token: '', foreground: 'FFFFFF', background: '000000' },\n        { token: 'invalid', foreground: 'f44747' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '1AEBFF' },\n        { token: 'variable.parameter', foreground: '9CDCFE' },\n        { token: 'constant', foreground: '569CD6' },\n        { token: 'comment', foreground: '608B4E' },\n        { token: 'number', foreground: 'FFFFFF' },\n        { token: 'regexp', foreground: 'C0C0C0' },\n        { token: 'annotation', foreground: '569CD6' },\n        { token: 'type', foreground: '3DC9B0' },\n        { token: 'delimiter', foreground: 'FFFF00' },\n        { token: 'delimiter.html', foreground: 'FFFF00' },\n        { token: 'tag', foreground: '569CD6' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta', foreground: 'D4D4D4' },\n        { token: 'meta.tag', foreground: 'CE9178' },\n        { token: 'metatag', foreground: '569CD6' },\n        { token: 'metatag.content.html', foreground: '1AEBFF' },\n        { token: 'metatag.html', foreground: '569CD6' },\n        { token: 'metatag.xml', foreground: '569CD6' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '9CDCFE' },\n        { token: 'string.key', foreground: '9CDCFE' },\n        { token: 'string.value', foreground: 'CE9178' },\n        { token: 'attribute.name', foreground: '569CD6' },\n        { token: 'attribute.value', foreground: '3FF23F' },\n        { token: 'string', foreground: 'CE9178' },\n        { token: 'string.sql', foreground: 'FF0000' },\n        { token: 'keyword', foreground: '569CD6' },\n        { token: 'keyword.flow', foreground: 'C586C0' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '909090' },\n        { token: 'predefined.sql', foreground: 'FF00FF' },\n    ],\n    colors: {\n        [editorBackground]: '#000000',\n        [editorForeground]: '#FFFFFF',\n        [editorIndentGuide1]: '#FFFFFF',\n        [editorActiveIndentGuide1]: '#FFFFFF',\n    }\n};\n/* -------------------------------- End hc-black theme -------------------------------- */\n/* -------------------------------- Begin hc-light theme -------------------------------- */\nexport const hc_light = {\n    base: 'hc-light',\n    inherit: false,\n    rules: [\n        { token: '', foreground: '292929', background: 'FFFFFF' },\n        { token: 'invalid', foreground: 'B5200D' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '264F70' },\n        { token: 'variable.predefined', foreground: '4864AA' },\n        { token: 'constant', foreground: 'dd0000' },\n        { token: 'comment', foreground: '008000' },\n        { token: 'number', foreground: '098658' },\n        { token: 'number.hex', foreground: '3030c0' },\n        { token: 'regexp', foreground: '800000' },\n        { token: 'annotation', foreground: '808080' },\n        { token: 'type', foreground: '008080' },\n        { token: 'delimiter', foreground: '000000' },\n        { token: 'delimiter.html', foreground: '383838' },\n        { token: 'tag', foreground: '800000' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta.scss', foreground: '800000' },\n        { token: 'metatag', foreground: 'e00000' },\n        { token: 'metatag.content.html', foreground: 'B5200D' },\n        { token: 'metatag.html', foreground: '808080' },\n        { token: 'metatag.xml', foreground: '808080' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '863B00' },\n        { token: 'string.key.json', foreground: 'A31515' },\n        { token: 'string.value.json', foreground: '0451A5' },\n        { token: 'attribute.name', foreground: '264F78' },\n        { token: 'attribute.value', foreground: '0451A5' },\n        { token: 'string', foreground: 'A31515' },\n        { token: 'string.sql', foreground: 'B5200D' },\n        { token: 'keyword', foreground: '0000FF' },\n        { token: 'keyword.flow', foreground: 'AF00DB' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '666666' },\n        { token: 'predefined.sql', foreground: 'C700C7' },\n    ],\n    colors: {\n        [editorBackground]: '#FFFFFF',\n        [editorForeground]: '#292929',\n        [editorIndentGuide1]: '#292929',\n        [editorActiveIndentGuide1]: '#292929',\n    }\n};\n/* -------------------------------- End hc-light theme -------------------------------- */\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { addMatchMediaChangeListener } from '../../../base/browser/browser.js';\nimport { Color } from '../../../base/common/color.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { TokenizationRegistry } from '../../common/languages.js';\nimport { TokenMetadata } from '../../common/encodedTokenAttributes.js';\nimport { TokenTheme, generateTokensCSSForColorMap } from '../../common/languages/supports/tokenization.js';\nimport { hc_black, hc_light, vs, vs_dark } from '../common/themes.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nimport { asCssVariableName, Extensions } from '../../../platform/theme/common/colorRegistry.js';\nimport { Extensions as ThemingExtensions } from '../../../platform/theme/common/themeService.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ColorScheme, isDark, isHighContrast } from '../../../platform/theme/common/theme.js';\nimport { getIconsStyleSheet, UnthemedProductIconTheme } from '../../../platform/theme/browser/iconsStyleSheet.js';\nexport const VS_LIGHT_THEME_NAME = 'vs';\nexport const VS_DARK_THEME_NAME = 'vs-dark';\nexport const HC_BLACK_THEME_NAME = 'hc-black';\nexport const HC_LIGHT_THEME_NAME = 'hc-light';\nconst colorRegistry = Registry.as(Extensions.ColorContribution);\nconst themingRegistry = Registry.as(ThemingExtensions.ThemingContribution);\nclass StandaloneTheme {\n    constructor(name, standaloneThemeData) {\n        this.semanticHighlighting = false;\n        this.themeData = standaloneThemeData;\n        const base = standaloneThemeData.base;\n        if (name.length > 0) {\n            if (isBuiltinTheme(name)) {\n                this.id = name;\n            }\n            else {\n                this.id = base + ' ' + name;\n            }\n            this.themeName = name;\n        }\n        else {\n            this.id = base;\n            this.themeName = base;\n        }\n        this.colors = null;\n        this.defaultColors = Object.create(null);\n        this._tokenTheme = null;\n    }\n    get base() {\n        return this.themeData.base;\n    }\n    notifyBaseUpdated() {\n        if (this.themeData.inherit) {\n            this.colors = null;\n            this._tokenTheme = null;\n        }\n    }\n    getColors() {\n        if (!this.colors) {\n            const colors = new Map();\n            for (const id in this.themeData.colors) {\n                colors.set(id, Color.fromHex(this.themeData.colors[id]));\n            }\n            if (this.themeData.inherit) {\n                const baseData = getBuiltinRules(this.themeData.base);\n                for (const id in baseData.colors) {\n                    if (!colors.has(id)) {\n                        colors.set(id, Color.fromHex(baseData.colors[id]));\n                    }\n                }\n            }\n            this.colors = colors;\n        }\n        return this.colors;\n    }\n    getColor(colorId, useDefault) {\n        const color = this.getColors().get(colorId);\n        if (color) {\n            return color;\n        }\n        if (useDefault !== false) {\n            return this.getDefault(colorId);\n        }\n        return undefined;\n    }\n    getDefault(colorId) {\n        let color = this.defaultColors[colorId];\n        if (color) {\n            return color;\n        }\n        color = colorRegistry.resolveDefaultColor(colorId, this);\n        this.defaultColors[colorId] = color;\n        return color;\n    }\n    defines(colorId) {\n        return this.getColors().has(colorId);\n    }\n    get type() {\n        switch (this.base) {\n            case VS_LIGHT_THEME_NAME: return ColorScheme.LIGHT;\n            case HC_BLACK_THEME_NAME: return ColorScheme.HIGH_CONTRAST_DARK;\n            case HC_LIGHT_THEME_NAME: return ColorScheme.HIGH_CONTRAST_LIGHT;\n            default: return ColorScheme.DARK;\n        }\n    }\n    get tokenTheme() {\n        if (!this._tokenTheme) {\n            let rules = [];\n            let encodedTokensColors = [];\n            if (this.themeData.inherit) {\n                const baseData = getBuiltinRules(this.themeData.base);\n                rules = baseData.rules;\n                if (baseData.encodedTokensColors) {\n                    encodedTokensColors = baseData.encodedTokensColors;\n                }\n            }\n            // Pick up default colors from `editor.foreground` and `editor.background` if available\n            const editorForeground = this.themeData.colors['editor.foreground'];\n            const editorBackground = this.themeData.colors['editor.background'];\n            if (editorForeground || editorBackground) {\n                const rule = { token: '' };\n                if (editorForeground) {\n                    rule.foreground = editorForeground;\n                }\n                if (editorBackground) {\n                    rule.background = editorBackground;\n                }\n                rules.push(rule);\n            }\n            rules = rules.concat(this.themeData.rules);\n            if (this.themeData.encodedTokensColors) {\n                encodedTokensColors = this.themeData.encodedTokensColors;\n            }\n            this._tokenTheme = TokenTheme.createFromRawTokenTheme(rules, encodedTokensColors);\n        }\n        return this._tokenTheme;\n    }\n    getTokenStyleMetadata(type, modifiers, modelLanguage) {\n        // use theme rules match\n        const style = this.tokenTheme._match([type].concat(modifiers).join('.'));\n        const metadata = style.metadata;\n        const foreground = TokenMetadata.getForeground(metadata);\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\n        return {\n            foreground: foreground,\n            italic: Boolean(fontStyle & 1 /* FontStyle.Italic */),\n            bold: Boolean(fontStyle & 2 /* FontStyle.Bold */),\n            underline: Boolean(fontStyle & 4 /* FontStyle.Underline */),\n            strikethrough: Boolean(fontStyle & 8 /* FontStyle.Strikethrough */)\n        };\n    }\n}\nfunction isBuiltinTheme(themeName) {\n    return (themeName === VS_LIGHT_THEME_NAME\n        || themeName === VS_DARK_THEME_NAME\n        || themeName === HC_BLACK_THEME_NAME\n        || themeName === HC_LIGHT_THEME_NAME);\n}\nfunction getBuiltinRules(builtinTheme) {\n    switch (builtinTheme) {\n        case VS_LIGHT_THEME_NAME:\n            return vs;\n        case VS_DARK_THEME_NAME:\n            return vs_dark;\n        case HC_BLACK_THEME_NAME:\n            return hc_black;\n        case HC_LIGHT_THEME_NAME:\n            return hc_light;\n    }\n}\nfunction newBuiltInTheme(builtinTheme) {\n    const themeData = getBuiltinRules(builtinTheme);\n    return new StandaloneTheme(builtinTheme, themeData);\n}\nexport class StandaloneThemeService extends Disposable {\n    constructor() {\n        super();\n        this._onColorThemeChange = this._register(new Emitter());\n        this.onDidColorThemeChange = this._onColorThemeChange.event;\n        this._onProductIconThemeChange = this._register(new Emitter());\n        this.onDidProductIconThemeChange = this._onProductIconThemeChange.event;\n        this._environment = Object.create(null);\n        this._builtInProductIconTheme = new UnthemedProductIconTheme();\n        this._autoDetectHighContrast = true;\n        this._knownThemes = new Map();\n        this._knownThemes.set(VS_LIGHT_THEME_NAME, newBuiltInTheme(VS_LIGHT_THEME_NAME));\n        this._knownThemes.set(VS_DARK_THEME_NAME, newBuiltInTheme(VS_DARK_THEME_NAME));\n        this._knownThemes.set(HC_BLACK_THEME_NAME, newBuiltInTheme(HC_BLACK_THEME_NAME));\n        this._knownThemes.set(HC_LIGHT_THEME_NAME, newBuiltInTheme(HC_LIGHT_THEME_NAME));\n        const iconsStyleSheet = this._register(getIconsStyleSheet(this));\n        this._codiconCSS = iconsStyleSheet.getCSS();\n        this._themeCSS = '';\n        this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n        this._globalStyleElement = null;\n        this._styleElements = [];\n        this._colorMapOverride = null;\n        this.setTheme(VS_LIGHT_THEME_NAME);\n        this._onOSSchemeChanged();\n        this._register(iconsStyleSheet.onDidChange(() => {\n            this._codiconCSS = iconsStyleSheet.getCSS();\n            this._updateCSS();\n        }));\n        addMatchMediaChangeListener('(forced-colors: active)', () => {\n            this._onOSSchemeChanged();\n        });\n    }\n    registerEditorContainer(domNode) {\n        if (dom.isInShadowDOM(domNode)) {\n            return this._registerShadowDomContainer(domNode);\n        }\n        return this._registerRegularEditorContainer();\n    }\n    _registerRegularEditorContainer() {\n        if (!this._globalStyleElement) {\n            this._globalStyleElement = dom.createStyleSheet(undefined, style => {\n                style.className = 'monaco-colors';\n                style.textContent = this._allCSS;\n            });\n            this._styleElements.push(this._globalStyleElement);\n        }\n        return Disposable.None;\n    }\n    _registerShadowDomContainer(domNode) {\n        const styleElement = dom.createStyleSheet(domNode, style => {\n            style.className = 'monaco-colors';\n            style.textContent = this._allCSS;\n        });\n        this._styleElements.push(styleElement);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._styleElements.length; i++) {\n                    if (this._styleElements[i] === styleElement) {\n                        this._styleElements.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    defineTheme(themeName, themeData) {\n        if (!/^[a-z0-9\\-]+$/i.test(themeName)) {\n            throw new Error('Illegal theme name!');\n        }\n        if (!isBuiltinTheme(themeData.base) && !isBuiltinTheme(themeName)) {\n            throw new Error('Illegal theme base!');\n        }\n        // set or replace theme\n        this._knownThemes.set(themeName, new StandaloneTheme(themeName, themeData));\n        if (isBuiltinTheme(themeName)) {\n            this._knownThemes.forEach(theme => {\n                if (theme.base === themeName) {\n                    theme.notifyBaseUpdated();\n                }\n            });\n        }\n        if (this._theme.themeName === themeName) {\n            this.setTheme(themeName); // refresh theme\n        }\n    }\n    getColorTheme() {\n        return this._theme;\n    }\n    setColorMapOverride(colorMapOverride) {\n        this._colorMapOverride = colorMapOverride;\n        this._updateThemeOrColorMap();\n    }\n    setTheme(themeName) {\n        let theme;\n        if (this._knownThemes.has(themeName)) {\n            theme = this._knownThemes.get(themeName);\n        }\n        else {\n            theme = this._knownThemes.get(VS_LIGHT_THEME_NAME);\n        }\n        this._updateActualTheme(theme);\n    }\n    _updateActualTheme(desiredTheme) {\n        if (!desiredTheme || this._theme === desiredTheme) {\n            // Nothing to do\n            return;\n        }\n        this._theme = desiredTheme;\n        this._updateThemeOrColorMap();\n    }\n    _onOSSchemeChanged() {\n        if (this._autoDetectHighContrast) {\n            const wantsHighContrast = window.matchMedia(`(forced-colors: active)`).matches;\n            if (wantsHighContrast !== isHighContrast(this._theme.type)) {\n                // switch to high contrast or non-high contrast but stick to dark or light\n                let newThemeName;\n                if (isDark(this._theme.type)) {\n                    newThemeName = wantsHighContrast ? HC_BLACK_THEME_NAME : VS_DARK_THEME_NAME;\n                }\n                else {\n                    newThemeName = wantsHighContrast ? HC_LIGHT_THEME_NAME : VS_LIGHT_THEME_NAME;\n                }\n                this._updateActualTheme(this._knownThemes.get(newThemeName));\n            }\n        }\n    }\n    setAutoDetectHighContrast(autoDetectHighContrast) {\n        this._autoDetectHighContrast = autoDetectHighContrast;\n        this._onOSSchemeChanged();\n    }\n    _updateThemeOrColorMap() {\n        const cssRules = [];\n        const hasRule = {};\n        const ruleCollector = {\n            addRule: (rule) => {\n                if (!hasRule[rule]) {\n                    cssRules.push(rule);\n                    hasRule[rule] = true;\n                }\n            }\n        };\n        themingRegistry.getThemingParticipants().forEach(p => p(this._theme, ruleCollector, this._environment));\n        const colorVariables = [];\n        for (const item of colorRegistry.getColors()) {\n            const color = this._theme.getColor(item.id, true);\n            if (color) {\n                colorVariables.push(`${asCssVariableName(item.id)}: ${color.toString()};`);\n            }\n        }\n        ruleCollector.addRule(`.monaco-editor, .monaco-diff-editor { ${colorVariables.join('\\n')} }`);\n        const colorMap = this._colorMapOverride || this._theme.tokenTheme.getColorMap();\n        ruleCollector.addRule(generateTokensCSSForColorMap(colorMap));\n        this._themeCSS = cssRules.join('\\n');\n        this._updateCSS();\n        TokenizationRegistry.setColorMap(colorMap);\n        this._onColorThemeChange.fire(this._theme);\n    }\n    _updateCSS() {\n        this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n        this._styleElements.forEach(styleElement => styleElement.textContent = this._allCSS);\n    }\n    getFileIconTheme() {\n        return {\n            hasFileIcons: false,\n            hasFolderIcons: false,\n            hidesExplorerArrows: false\n        };\n    }\n    getProductIconTheme() {\n        return this._builtInProductIconTheme;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { ToggleHighContrastNLS } from '../../../common/standaloneStrings.js';\nimport { isDark, isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { HC_BLACK_THEME_NAME, HC_LIGHT_THEME_NAME, VS_DARK_THEME_NAME, VS_LIGHT_THEME_NAME } from '../standaloneThemeService.js';\nclass ToggleHighContrast extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.toggleHighContrast',\n            label: ToggleHighContrastNLS.toggleHighContrast,\n            alias: 'Toggle High Contrast Theme',\n            precondition: undefined\n        });\n        this._originalThemeName = null;\n    }\n    run(accessor, editor) {\n        const standaloneThemeService = accessor.get(IStandaloneThemeService);\n        const currentTheme = standaloneThemeService.getColorTheme();\n        if (isHighContrast(currentTheme.type)) {\n            // We must toggle back to the integrator's theme\n            standaloneThemeService.setTheme(this._originalThemeName || (isDark(currentTheme.type) ? VS_DARK_THEME_NAME : VS_LIGHT_THEME_NAME));\n            this._originalThemeName = null;\n        }\n        else {\n            standaloneThemeService.setTheme(isDark(currentTheme.type) ? HC_BLACK_THEME_NAME : HC_LIGHT_THEME_NAME);\n            this._originalThemeName = currentTheme.themeName;\n        }\n    }\n}\nregisterEditorAction(ToggleHighContrast);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function isFuzzyActionArr(what) {\n    return (Array.isArray(what));\n}\nexport function isFuzzyAction(what) {\n    return !isFuzzyActionArr(what);\n}\nexport function isString(what) {\n    return (typeof what === 'string');\n}\nexport function isIAction(what) {\n    return !isString(what);\n}\n// Small helper functions\n/**\n * Is a string null, undefined, or empty?\n */\nexport function empty(s) {\n    return (s ? false : true);\n}\n/**\n * Puts a string to lower case if 'ignoreCase' is set.\n */\nexport function fixCase(lexer, str) {\n    return (lexer.ignoreCase && str ? str.toLowerCase() : str);\n}\n/**\n * Ensures there are no bad characters in a CSS token class.\n */\nexport function sanitize(s) {\n    return s.replace(/[&<>'\"_]/g, '-'); // used on all output token CSS classes\n}\n// Logging\n/**\n * Logs a message.\n */\nexport function log(lexer, msg) {\n    console.log(`${lexer.languageId}: ${msg}`);\n}\n// Throwing errors\nexport function createError(lexer, msg) {\n    return new Error(`${lexer.languageId}: ${msg}`);\n}\n// Helper functions for rule finding and substitution\n/**\n * substituteMatches is used on lexer strings and can substitutes predefined patterns:\n * \t\t$$  => $\n * \t\t$#  => id\n * \t\t$n  => matched entry n\n * \t\t@attr => contents of lexer[attr]\n *\n * See documentation for more info\n */\nexport function substituteMatches(lexer, str, id, matches, state) {\n    const re = /\\$((\\$)|(#)|(\\d\\d?)|[sS](\\d\\d?)|@(\\w+))/g;\n    let stateMatches = null;\n    return str.replace(re, function (full, sub, dollar, hash, n, s, attr, ofs, total) {\n        if (!empty(dollar)) {\n            return '$'; // $$\n        }\n        if (!empty(hash)) {\n            return fixCase(lexer, id); // default $#\n        }\n        if (!empty(n) && n < matches.length) {\n            return fixCase(lexer, matches[n]); // $n\n        }\n        if (!empty(attr) && lexer && typeof (lexer[attr]) === 'string') {\n            return lexer[attr]; //@attribute\n        }\n        if (stateMatches === null) { // split state on demand\n            stateMatches = state.split('.');\n            stateMatches.unshift(state);\n        }\n        if (!empty(s) && s < stateMatches.length) {\n            return fixCase(lexer, stateMatches[s]); //$Sn\n        }\n        return '';\n    });\n}\n/**\n * Find the tokenizer rules for a specific state (i.e. next action)\n */\nexport function findRules(lexer, inState) {\n    let state = inState;\n    while (state && state.length > 0) {\n        const rules = lexer.tokenizer[state];\n        if (rules) {\n            return rules;\n        }\n        const idx = state.lastIndexOf('.');\n        if (idx < 0) {\n            state = null; // no further parent\n        }\n        else {\n            state = state.substr(0, idx);\n        }\n    }\n    return null;\n}\n/**\n * Is a certain state defined? In contrast to 'findRules' this works on a ILexerMin.\n * This is used during compilation where we may know the defined states\n * but not yet whether the corresponding rules are correct.\n */\nexport function stateExists(lexer, inState) {\n    let state = inState;\n    while (state && state.length > 0) {\n        const exist = lexer.stateNames[state];\n        if (exist) {\n            return true;\n        }\n        const idx = state.lastIndexOf('.');\n        if (idx < 0) {\n            state = null; // no further parent\n        }\n        else {\n            state = state.substr(0, idx);\n        }\n    }\n    return false;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar MonarchTokenizer_1;\n/**\n * Create a syntax highighter with a fully declarative JSON style lexer description\n * using regular expressions.\n */\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as languages from '../../../common/languages.js';\nimport { NullState, nullTokenizeEncoded, nullTokenize } from '../../../common/languages/nullTokenize.js';\nimport * as monarchCommon from './monarchCommon.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nconst CACHE_STACK_DEPTH = 5;\n/**\n * Reuse the same stack elements up to a certain depth.\n */\nclass MonarchStackElementFactory {\n    static create(parent, state) {\n        return this._INSTANCE.create(parent, state);\n    }\n    constructor(maxCacheDepth) {\n        this._maxCacheDepth = maxCacheDepth;\n        this._entries = Object.create(null);\n    }\n    create(parent, state) {\n        if (parent !== null && parent.depth >= this._maxCacheDepth) {\n            // no caching above a certain depth\n            return new MonarchStackElement(parent, state);\n        }\n        let stackElementId = MonarchStackElement.getStackElementId(parent);\n        if (stackElementId.length > 0) {\n            stackElementId += '|';\n        }\n        stackElementId += state;\n        let result = this._entries[stackElementId];\n        if (result) {\n            return result;\n        }\n        result = new MonarchStackElement(parent, state);\n        this._entries[stackElementId] = result;\n        return result;\n    }\n}\nMonarchStackElementFactory._INSTANCE = new MonarchStackElementFactory(CACHE_STACK_DEPTH);\nclass MonarchStackElement {\n    constructor(parent, state) {\n        this.parent = parent;\n        this.state = state;\n        this.depth = (this.parent ? this.parent.depth : 0) + 1;\n    }\n    static getStackElementId(element) {\n        let result = '';\n        while (element !== null) {\n            if (result.length > 0) {\n                result += '|';\n            }\n            result += element.state;\n            element = element.parent;\n        }\n        return result;\n    }\n    static _equals(a, b) {\n        while (a !== null && b !== null) {\n            if (a === b) {\n                return true;\n            }\n            if (a.state !== b.state) {\n                return false;\n            }\n            a = a.parent;\n            b = b.parent;\n        }\n        if (a === null && b === null) {\n            return true;\n        }\n        return false;\n    }\n    equals(other) {\n        return MonarchStackElement._equals(this, other);\n    }\n    push(state) {\n        return MonarchStackElementFactory.create(this, state);\n    }\n    pop() {\n        return this.parent;\n    }\n    popall() {\n        let result = this;\n        while (result.parent) {\n            result = result.parent;\n        }\n        return result;\n    }\n    switchTo(state) {\n        return MonarchStackElementFactory.create(this.parent, state);\n    }\n}\nclass EmbeddedLanguageData {\n    constructor(languageId, state) {\n        this.languageId = languageId;\n        this.state = state;\n    }\n    equals(other) {\n        return (this.languageId === other.languageId\n            && this.state.equals(other.state));\n    }\n    clone() {\n        const stateClone = this.state.clone();\n        // save an object\n        if (stateClone === this.state) {\n            return this;\n        }\n        return new EmbeddedLanguageData(this.languageId, this.state);\n    }\n}\n/**\n * Reuse the same line states up to a certain depth.\n */\nclass MonarchLineStateFactory {\n    static create(stack, embeddedLanguageData) {\n        return this._INSTANCE.create(stack, embeddedLanguageData);\n    }\n    constructor(maxCacheDepth) {\n        this._maxCacheDepth = maxCacheDepth;\n        this._entries = Object.create(null);\n    }\n    create(stack, embeddedLanguageData) {\n        if (embeddedLanguageData !== null) {\n            // no caching when embedding\n            return new MonarchLineState(stack, embeddedLanguageData);\n        }\n        if (stack !== null && stack.depth >= this._maxCacheDepth) {\n            // no caching above a certain depth\n            return new MonarchLineState(stack, embeddedLanguageData);\n        }\n        const stackElementId = MonarchStackElement.getStackElementId(stack);\n        let result = this._entries[stackElementId];\n        if (result) {\n            return result;\n        }\n        result = new MonarchLineState(stack, null);\n        this._entries[stackElementId] = result;\n        return result;\n    }\n}\nMonarchLineStateFactory._INSTANCE = new MonarchLineStateFactory(CACHE_STACK_DEPTH);\nclass MonarchLineState {\n    constructor(stack, embeddedLanguageData) {\n        this.stack = stack;\n        this.embeddedLanguageData = embeddedLanguageData;\n    }\n    clone() {\n        const embeddedlanguageDataClone = this.embeddedLanguageData ? this.embeddedLanguageData.clone() : null;\n        // save an object\n        if (embeddedlanguageDataClone === this.embeddedLanguageData) {\n            return this;\n        }\n        return MonarchLineStateFactory.create(this.stack, this.embeddedLanguageData);\n    }\n    equals(other) {\n        if (!(other instanceof MonarchLineState)) {\n            return false;\n        }\n        if (!this.stack.equals(other.stack)) {\n            return false;\n        }\n        if (this.embeddedLanguageData === null && other.embeddedLanguageData === null) {\n            return true;\n        }\n        if (this.embeddedLanguageData === null || other.embeddedLanguageData === null) {\n            return false;\n        }\n        return this.embeddedLanguageData.equals(other.embeddedLanguageData);\n    }\n}\nclass MonarchClassicTokensCollector {\n    constructor() {\n        this._tokens = [];\n        this._languageId = null;\n        this._lastTokenType = null;\n        this._lastTokenLanguage = null;\n    }\n    enterLanguage(languageId) {\n        this._languageId = languageId;\n    }\n    emit(startOffset, type) {\n        if (this._lastTokenType === type && this._lastTokenLanguage === this._languageId) {\n            return;\n        }\n        this._lastTokenType = type;\n        this._lastTokenLanguage = this._languageId;\n        this._tokens.push(new languages.Token(startOffset, type, this._languageId));\n    }\n    nestedLanguageTokenize(embeddedLanguageLine, hasEOL, embeddedLanguageData, offsetDelta) {\n        const nestedLanguageId = embeddedLanguageData.languageId;\n        const embeddedModeState = embeddedLanguageData.state;\n        const nestedLanguageTokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n        if (!nestedLanguageTokenizationSupport) {\n            this.enterLanguage(nestedLanguageId);\n            this.emit(offsetDelta, '');\n            return embeddedModeState;\n        }\n        const nestedResult = nestedLanguageTokenizationSupport.tokenize(embeddedLanguageLine, hasEOL, embeddedModeState);\n        if (offsetDelta !== 0) {\n            for (const token of nestedResult.tokens) {\n                this._tokens.push(new languages.Token(token.offset + offsetDelta, token.type, token.language));\n            }\n        }\n        else {\n            this._tokens = this._tokens.concat(nestedResult.tokens);\n        }\n        this._lastTokenType = null;\n        this._lastTokenLanguage = null;\n        this._languageId = null;\n        return nestedResult.endState;\n    }\n    finalize(endState) {\n        return new languages.TokenizationResult(this._tokens, endState);\n    }\n}\nclass MonarchModernTokensCollector {\n    constructor(languageService, theme) {\n        this._languageService = languageService;\n        this._theme = theme;\n        this._prependTokens = null;\n        this._tokens = [];\n        this._currentLanguageId = 0 /* LanguageId.Null */;\n        this._lastTokenMetadata = 0;\n    }\n    enterLanguage(languageId) {\n        this._currentLanguageId = this._languageService.languageIdCodec.encodeLanguageId(languageId);\n    }\n    emit(startOffset, type) {\n        const metadata = this._theme.match(this._currentLanguageId, type) | 1024 /* MetadataConsts.BALANCED_BRACKETS_MASK */;\n        if (this._lastTokenMetadata === metadata) {\n            return;\n        }\n        this._lastTokenMetadata = metadata;\n        this._tokens.push(startOffset);\n        this._tokens.push(metadata);\n    }\n    static _merge(a, b, c) {\n        const aLen = (a !== null ? a.length : 0);\n        const bLen = b.length;\n        const cLen = (c !== null ? c.length : 0);\n        if (aLen === 0 && bLen === 0 && cLen === 0) {\n            return new Uint32Array(0);\n        }\n        if (aLen === 0 && bLen === 0) {\n            return c;\n        }\n        if (bLen === 0 && cLen === 0) {\n            return a;\n        }\n        const result = new Uint32Array(aLen + bLen + cLen);\n        if (a !== null) {\n            result.set(a);\n        }\n        for (let i = 0; i < bLen; i++) {\n            result[aLen + i] = b[i];\n        }\n        if (c !== null) {\n            result.set(c, aLen + bLen);\n        }\n        return result;\n    }\n    nestedLanguageTokenize(embeddedLanguageLine, hasEOL, embeddedLanguageData, offsetDelta) {\n        const nestedLanguageId = embeddedLanguageData.languageId;\n        const embeddedModeState = embeddedLanguageData.state;\n        const nestedLanguageTokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n        if (!nestedLanguageTokenizationSupport) {\n            this.enterLanguage(nestedLanguageId);\n            this.emit(offsetDelta, '');\n            return embeddedModeState;\n        }\n        const nestedResult = nestedLanguageTokenizationSupport.tokenizeEncoded(embeddedLanguageLine, hasEOL, embeddedModeState);\n        if (offsetDelta !== 0) {\n            for (let i = 0, len = nestedResult.tokens.length; i < len; i += 2) {\n                nestedResult.tokens[i] += offsetDelta;\n            }\n        }\n        this._prependTokens = MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, nestedResult.tokens);\n        this._tokens = [];\n        this._currentLanguageId = 0;\n        this._lastTokenMetadata = 0;\n        return nestedResult.endState;\n    }\n    finalize(endState) {\n        return new languages.EncodedTokenizationResult(MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, null), endState);\n    }\n}\nlet MonarchTokenizer = MonarchTokenizer_1 = class MonarchTokenizer extends Disposable {\n    constructor(languageService, standaloneThemeService, languageId, lexer, _configurationService) {\n        super();\n        this._configurationService = _configurationService;\n        this._languageService = languageService;\n        this._standaloneThemeService = standaloneThemeService;\n        this._languageId = languageId;\n        this._lexer = lexer;\n        this._embeddedLanguages = Object.create(null);\n        this.embeddedLoaded = Promise.resolve(undefined);\n        // Set up listening for embedded modes\n        let emitting = false;\n        this._register(languages.TokenizationRegistry.onDidChange((e) => {\n            if (emitting) {\n                return;\n            }\n            let isOneOfMyEmbeddedModes = false;\n            for (let i = 0, len = e.changedLanguages.length; i < len; i++) {\n                const language = e.changedLanguages[i];\n                if (this._embeddedLanguages[language]) {\n                    isOneOfMyEmbeddedModes = true;\n                    break;\n                }\n            }\n            if (isOneOfMyEmbeddedModes) {\n                emitting = true;\n                languages.TokenizationRegistry.handleChange([this._languageId]);\n                emitting = false;\n            }\n        }));\n        this._maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n            overrideIdentifier: this._languageId\n        });\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('editor.maxTokenizationLineLength')) {\n                this._maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n                    overrideIdentifier: this._languageId\n                });\n            }\n        }));\n    }\n    getLoadStatus() {\n        const promises = [];\n        for (const nestedLanguageId in this._embeddedLanguages) {\n            const tokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n            if (tokenizationSupport) {\n                // The nested language is already loaded\n                if (tokenizationSupport instanceof MonarchTokenizer_1) {\n                    const nestedModeStatus = tokenizationSupport.getLoadStatus();\n                    if (nestedModeStatus.loaded === false) {\n                        promises.push(nestedModeStatus.promise);\n                    }\n                }\n                continue;\n            }\n            if (!languages.TokenizationRegistry.isResolved(nestedLanguageId)) {\n                // The nested language is in the process of being loaded\n                promises.push(languages.TokenizationRegistry.getOrCreate(nestedLanguageId));\n            }\n        }\n        if (promises.length === 0) {\n            return {\n                loaded: true\n            };\n        }\n        return {\n            loaded: false,\n            promise: Promise.all(promises).then(_ => undefined)\n        };\n    }\n    getInitialState() {\n        const rootState = MonarchStackElementFactory.create(null, this._lexer.start);\n        return MonarchLineStateFactory.create(rootState, null);\n    }\n    tokenize(line, hasEOL, lineState) {\n        if (line.length >= this._maxTokenizationLineLength) {\n            return nullTokenize(this._languageId, lineState);\n        }\n        const tokensCollector = new MonarchClassicTokensCollector();\n        const endLineState = this._tokenize(line, hasEOL, lineState, tokensCollector);\n        return tokensCollector.finalize(endLineState);\n    }\n    tokenizeEncoded(line, hasEOL, lineState) {\n        if (line.length >= this._maxTokenizationLineLength) {\n            return nullTokenizeEncoded(this._languageService.languageIdCodec.encodeLanguageId(this._languageId), lineState);\n        }\n        const tokensCollector = new MonarchModernTokensCollector(this._languageService, this._standaloneThemeService.getColorTheme().tokenTheme);\n        const endLineState = this._tokenize(line, hasEOL, lineState, tokensCollector);\n        return tokensCollector.finalize(endLineState);\n    }\n    _tokenize(line, hasEOL, lineState, collector) {\n        if (lineState.embeddedLanguageData) {\n            return this._nestedTokenize(line, hasEOL, lineState, 0, collector);\n        }\n        else {\n            return this._myTokenize(line, hasEOL, lineState, 0, collector);\n        }\n    }\n    _findLeavingNestedLanguageOffset(line, state) {\n        let rules = this._lexer.tokenizer[state.stack.state];\n        if (!rules) {\n            rules = monarchCommon.findRules(this._lexer, state.stack.state); // do parent matching\n            if (!rules) {\n                throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state.stack.state);\n            }\n        }\n        let popOffset = -1;\n        let hasEmbeddedPopRule = false;\n        for (const rule of rules) {\n            if (!monarchCommon.isIAction(rule.action) || rule.action.nextEmbedded !== '@pop') {\n                continue;\n            }\n            hasEmbeddedPopRule = true;\n            let regex = rule.regex;\n            const regexSource = rule.regex.source;\n            if (regexSource.substr(0, 4) === '^(?:' && regexSource.substr(regexSource.length - 1, 1) === ')') {\n                const flags = (regex.ignoreCase ? 'i' : '') + (regex.unicode ? 'u' : '');\n                regex = new RegExp(regexSource.substr(4, regexSource.length - 5), flags);\n            }\n            const result = line.search(regex);\n            if (result === -1 || (result !== 0 && rule.matchOnlyAtLineStart)) {\n                continue;\n            }\n            if (popOffset === -1 || result < popOffset) {\n                popOffset = result;\n            }\n        }\n        if (!hasEmbeddedPopRule) {\n            throw monarchCommon.createError(this._lexer, 'no rule containing nextEmbedded: \"@pop\" in tokenizer embedded state: ' + state.stack.state);\n        }\n        return popOffset;\n    }\n    _nestedTokenize(line, hasEOL, lineState, offsetDelta, tokensCollector) {\n        const popOffset = this._findLeavingNestedLanguageOffset(line, lineState);\n        if (popOffset === -1) {\n            // tokenization will not leave nested language\n            const nestedEndState = tokensCollector.nestedLanguageTokenize(line, hasEOL, lineState.embeddedLanguageData, offsetDelta);\n            return MonarchLineStateFactory.create(lineState.stack, new EmbeddedLanguageData(lineState.embeddedLanguageData.languageId, nestedEndState));\n        }\n        const nestedLanguageLine = line.substring(0, popOffset);\n        if (nestedLanguageLine.length > 0) {\n            // tokenize with the nested language\n            tokensCollector.nestedLanguageTokenize(nestedLanguageLine, false, lineState.embeddedLanguageData, offsetDelta);\n        }\n        const restOfTheLine = line.substring(popOffset);\n        return this._myTokenize(restOfTheLine, hasEOL, lineState, offsetDelta + popOffset, tokensCollector);\n    }\n    _safeRuleName(rule) {\n        if (rule) {\n            return rule.name;\n        }\n        return '(unknown)';\n    }\n    _myTokenize(lineWithoutLF, hasEOL, lineState, offsetDelta, tokensCollector) {\n        tokensCollector.enterLanguage(this._languageId);\n        const lineWithoutLFLength = lineWithoutLF.length;\n        const line = (hasEOL && this._lexer.includeLF ? lineWithoutLF + '\\n' : lineWithoutLF);\n        const lineLength = line.length;\n        let embeddedLanguageData = lineState.embeddedLanguageData;\n        let stack = lineState.stack;\n        let pos = 0;\n        let groupMatching = null;\n        // See https://github.com/microsoft/monaco-editor/issues/1235\n        // Evaluate rules at least once for an empty line\n        let forceEvaluation = true;\n        while (forceEvaluation || pos < lineLength) {\n            const pos0 = pos;\n            const stackLen0 = stack.depth;\n            const groupLen0 = groupMatching ? groupMatching.groups.length : 0;\n            const state = stack.state;\n            let matches = null;\n            let matched = null;\n            let action = null;\n            let rule = null;\n            let enteringEmbeddedLanguage = null;\n            // check if we need to process group matches first\n            if (groupMatching) {\n                matches = groupMatching.matches;\n                const groupEntry = groupMatching.groups.shift();\n                matched = groupEntry.matched;\n                action = groupEntry.action;\n                rule = groupMatching.rule;\n                // cleanup if necessary\n                if (groupMatching.groups.length === 0) {\n                    groupMatching = null;\n                }\n            }\n            else {\n                // otherwise we match on the token stream\n                if (!forceEvaluation && pos >= lineLength) {\n                    // nothing to do\n                    break;\n                }\n                forceEvaluation = false;\n                // get the rules for this state\n                let rules = this._lexer.tokenizer[state];\n                if (!rules) {\n                    rules = monarchCommon.findRules(this._lexer, state); // do parent matching\n                    if (!rules) {\n                        throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state);\n                    }\n                }\n                // try each rule until we match\n                const restOfLine = line.substr(pos);\n                for (const rule of rules) {\n                    if (pos === 0 || !rule.matchOnlyAtLineStart) {\n                        matches = restOfLine.match(rule.regex);\n                        if (matches) {\n                            matched = matches[0];\n                            action = rule.action;\n                            break;\n                        }\n                    }\n                }\n            }\n            // We matched 'rule' with 'matches' and 'action'\n            if (!matches) {\n                matches = [''];\n                matched = '';\n            }\n            if (!action) {\n                // bad: we didn't match anything, and there is no action to take\n                // we need to advance the stream or we get progress trouble\n                if (pos < lineLength) {\n                    matches = [line.charAt(pos)];\n                    matched = matches[0];\n                }\n                action = this._lexer.defaultToken;\n            }\n            if (matched === null) {\n                // should never happen, needed for strict null checking\n                break;\n            }\n            // advance stream\n            pos += matched.length;\n            // maybe call action function (used for 'cases')\n            while (monarchCommon.isFuzzyAction(action) && monarchCommon.isIAction(action) && action.test) {\n                action = action.test(matched, matches, state, pos === lineLength);\n            }\n            let result = null;\n            // set the result: either a string or an array of actions\n            if (typeof action === 'string' || Array.isArray(action)) {\n                result = action;\n            }\n            else if (action.group) {\n                result = action.group;\n            }\n            else if (action.token !== null && action.token !== undefined) {\n                // do $n replacements?\n                if (action.tokenSubst) {\n                    result = monarchCommon.substituteMatches(this._lexer, action.token, matched, matches, state);\n                }\n                else {\n                    result = action.token;\n                }\n                // enter embedded language?\n                if (action.nextEmbedded) {\n                    if (action.nextEmbedded === '@pop') {\n                        if (!embeddedLanguageData) {\n                            throw monarchCommon.createError(this._lexer, 'cannot pop embedded language if not inside one');\n                        }\n                        embeddedLanguageData = null;\n                    }\n                    else if (embeddedLanguageData) {\n                        throw monarchCommon.createError(this._lexer, 'cannot enter embedded language from within an embedded language');\n                    }\n                    else {\n                        enteringEmbeddedLanguage = monarchCommon.substituteMatches(this._lexer, action.nextEmbedded, matched, matches, state);\n                    }\n                }\n                // state transformations\n                if (action.goBack) { // back up the stream..\n                    pos = Math.max(0, pos - action.goBack);\n                }\n                if (action.switchTo && typeof action.switchTo === 'string') {\n                    let nextState = monarchCommon.substituteMatches(this._lexer, action.switchTo, matched, matches, state); // switch state without a push...\n                    if (nextState[0] === '@') {\n                        nextState = nextState.substr(1); // peel off starting '@'\n                    }\n                    if (!monarchCommon.findRules(this._lexer, nextState)) {\n                        throw monarchCommon.createError(this._lexer, 'trying to switch to a state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\n                    }\n                    else {\n                        stack = stack.switchTo(nextState);\n                    }\n                }\n                else if (action.transform && typeof action.transform === 'function') {\n                    throw monarchCommon.createError(this._lexer, 'action.transform not supported');\n                }\n                else if (action.next) {\n                    if (action.next === '@push') {\n                        if (stack.depth >= this._lexer.maxStack) {\n                            throw monarchCommon.createError(this._lexer, 'maximum tokenizer stack size reached: [' +\n                                stack.state + ',' + stack.parent.state + ',...]');\n                        }\n                        else {\n                            stack = stack.push(state);\n                        }\n                    }\n                    else if (action.next === '@pop') {\n                        if (stack.depth <= 1) {\n                            throw monarchCommon.createError(this._lexer, 'trying to pop an empty stack in rule: ' + this._safeRuleName(rule));\n                        }\n                        else {\n                            stack = stack.pop();\n                        }\n                    }\n                    else if (action.next === '@popall') {\n                        stack = stack.popall();\n                    }\n                    else {\n                        let nextState = monarchCommon.substituteMatches(this._lexer, action.next, matched, matches, state);\n                        if (nextState[0] === '@') {\n                            nextState = nextState.substr(1); // peel off starting '@'\n                        }\n                        if (!monarchCommon.findRules(this._lexer, nextState)) {\n                            throw monarchCommon.createError(this._lexer, 'trying to set a next state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\n                        }\n                        else {\n                            stack = stack.push(nextState);\n                        }\n                    }\n                }\n                if (action.log && typeof (action.log) === 'string') {\n                    monarchCommon.log(this._lexer, this._lexer.languageId + ': ' + monarchCommon.substituteMatches(this._lexer, action.log, matched, matches, state));\n                }\n            }\n            // check result\n            if (result === null) {\n                throw monarchCommon.createError(this._lexer, 'lexer rule has no well-defined action in rule: ' + this._safeRuleName(rule));\n            }\n            const computeNewStateForEmbeddedLanguage = (enteringEmbeddedLanguage) => {\n                // support language names, mime types, and language ids\n                const languageId = (this._languageService.getLanguageIdByLanguageName(enteringEmbeddedLanguage)\n                    || this._languageService.getLanguageIdByMimeType(enteringEmbeddedLanguage)\n                    || enteringEmbeddedLanguage);\n                const embeddedLanguageData = this._getNestedEmbeddedLanguageData(languageId);\n                if (pos < lineLength) {\n                    // there is content from the embedded language on this line\n                    const restOfLine = lineWithoutLF.substr(pos);\n                    return this._nestedTokenize(restOfLine, hasEOL, MonarchLineStateFactory.create(stack, embeddedLanguageData), offsetDelta + pos, tokensCollector);\n                }\n                else {\n                    return MonarchLineStateFactory.create(stack, embeddedLanguageData);\n                }\n            };\n            // is the result a group match?\n            if (Array.isArray(result)) {\n                if (groupMatching && groupMatching.groups.length > 0) {\n                    throw monarchCommon.createError(this._lexer, 'groups cannot be nested: ' + this._safeRuleName(rule));\n                }\n                if (matches.length !== result.length + 1) {\n                    throw monarchCommon.createError(this._lexer, 'matched number of groups does not match the number of actions in rule: ' + this._safeRuleName(rule));\n                }\n                let totalLen = 0;\n                for (let i = 1; i < matches.length; i++) {\n                    totalLen += matches[i].length;\n                }\n                if (totalLen !== matched.length) {\n                    throw monarchCommon.createError(this._lexer, 'with groups, all characters should be matched in consecutive groups in rule: ' + this._safeRuleName(rule));\n                }\n                groupMatching = {\n                    rule: rule,\n                    matches: matches,\n                    groups: []\n                };\n                for (let i = 0; i < result.length; i++) {\n                    groupMatching.groups[i] = {\n                        action: result[i],\n                        matched: matches[i + 1]\n                    };\n                }\n                pos -= matched.length;\n                // call recursively to initiate first result match\n                continue;\n            }\n            else {\n                // regular result\n                // check for '@rematch'\n                if (result === '@rematch') {\n                    pos -= matched.length;\n                    matched = ''; // better set the next state too..\n                    matches = null;\n                    result = '';\n                    // Even though `@rematch` was specified, if `nextEmbedded` also specified,\n                    // a state transition should occur.\n                    if (enteringEmbeddedLanguage !== null) {\n                        return computeNewStateForEmbeddedLanguage(enteringEmbeddedLanguage);\n                    }\n                }\n                // check progress\n                if (matched.length === 0) {\n                    if (lineLength === 0 || stackLen0 !== stack.depth || state !== stack.state || (!groupMatching ? 0 : groupMatching.groups.length) !== groupLen0) {\n                        continue;\n                    }\n                    else {\n                        throw monarchCommon.createError(this._lexer, 'no progress in tokenizer in rule: ' + this._safeRuleName(rule));\n                    }\n                }\n                // return the result (and check for brace matching)\n                // todo: for efficiency we could pre-sanitize tokenPostfix and substitutions\n                let tokenType = null;\n                if (monarchCommon.isString(result) && result.indexOf('@brackets') === 0) {\n                    const rest = result.substr('@brackets'.length);\n                    const bracket = findBracket(this._lexer, matched);\n                    if (!bracket) {\n                        throw monarchCommon.createError(this._lexer, '@brackets token returned but no bracket defined as: ' + matched);\n                    }\n                    tokenType = monarchCommon.sanitize(bracket.token + rest);\n                }\n                else {\n                    const token = (result === '' ? '' : result + this._lexer.tokenPostfix);\n                    tokenType = monarchCommon.sanitize(token);\n                }\n                if (pos0 < lineWithoutLFLength) {\n                    tokensCollector.emit(pos0 + offsetDelta, tokenType);\n                }\n            }\n            if (enteringEmbeddedLanguage !== null) {\n                return computeNewStateForEmbeddedLanguage(enteringEmbeddedLanguage);\n            }\n        }\n        return MonarchLineStateFactory.create(stack, embeddedLanguageData);\n    }\n    _getNestedEmbeddedLanguageData(languageId) {\n        if (!this._languageService.isRegisteredLanguageId(languageId)) {\n            return new EmbeddedLanguageData(languageId, NullState);\n        }\n        if (languageId !== this._languageId) {\n            // Fire language loading event\n            this._languageService.requestBasicLanguageFeatures(languageId);\n            languages.TokenizationRegistry.getOrCreate(languageId);\n            this._embeddedLanguages[languageId] = true;\n        }\n        const tokenizationSupport = languages.TokenizationRegistry.get(languageId);\n        if (tokenizationSupport) {\n            return new EmbeddedLanguageData(languageId, tokenizationSupport.getInitialState());\n        }\n        return new EmbeddedLanguageData(languageId, NullState);\n    }\n};\nMonarchTokenizer = MonarchTokenizer_1 = __decorate([\n    __param(4, IConfigurationService)\n], MonarchTokenizer);\nexport { MonarchTokenizer };\n/**\n * Searches for a bracket in the 'brackets' attribute that matches the input.\n */\nfunction findBracket(lexer, matched) {\n    if (!matched) {\n        return null;\n    }\n    matched = monarchCommon.fixCase(lexer, matched);\n    const brackets = lexer.brackets;\n    for (const bracket of brackets) {\n        if (bracket.open === matched) {\n            return { token: bracket.token, bracketType: 1 /* monarchCommon.MonarchBracket.Open */ };\n        }\n        else if (bracket.close === matched) {\n            return { token: bracket.token, bracketType: -1 /* monarchCommon.MonarchBracket.Close */ };\n        }\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const IStandaloneThemeService = createDecorator('themeService');\n"],"names":["IPadShowKeyboard","Disposable","constructor","editor","super","this","widget","isIOS","_register","onDidChangeConfiguration","update","shouldHaveWidget","getOption","ShowKeyboardWidget","dispose","ID","_domNode","document","createElement","className","dom","e","focus","addOverlayWidget","removeOverlayWidget","getId","getDomNode","getPosition","preference","registerEditorContribution","InspectTokensController_1","__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","InspectTokensController","get","getContribution","standaloneColorService","languageService","_editor","_languageService","_widget","onDidChangeModel","stop","onDidChangeModelLanguage","TokenizationRegistry","onDidChange","onKeyUp","keyCode","launch","hasModel","InspectTokensWidget","IStandaloneThemeService","ILanguageService","InspectTokens","EditorAction","id","label","InspectTokensNLS","inspectTokensAction","alias","precondition","undefined","run","accessor","controller","allowEditorOverflow","_model","getModel","_tokenizationSupport","languageIdCodec","languageId","tokenizationSupport","encodedLanguageId","encodeLanguageId","getInitialState","NullState","tokenize","line","hasEOL","state","nullTokenize","tokenizeEncoded","nullTokenizeEncoded","getSafeTokenizationSupport","getLanguageId","_compute","onDidChangeCursorPosition","addContentWidget","removeContentWidget","_ID","position","data","_getTokensAtLine","lineNumber","token1Index","tokens1","t","column","offset","token2Index","tokens2","lineContent","getLineContent","tokenText","tokenStartIndex","tokenEndIndex","substring","reset","$","result","charIndex","len","charCode","charCodeAt","String","fromCharCode","renderTokenText","concat","append","metadata","_decodeMetadata","_tokenTypeToString","tokenType","_fontStyleToString","fontStyle","Color","Format","CSS","formatHex","foreground","background","type","layoutContentWidget","colorMap","getColorMap","TokenMetadata","getTokenType","getFontStyle","getForeground","getBackground","decodeLanguageId","stateBeforeLine","_getStateBeforeLine","tokenizationResult1","tokenizationResult2","startState","tokens","endState","registerEditorAction","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","rejected","done","then","apply","StandaloneCommandsQuickAccessProvider","AbstractEditorCommandsQuickAccessProvider","activeTextEditorControl","_a","codeEditorService","getFocusedCodeEditor","instantiationService","keybindingService","commandService","telemetryService","dialogService","showAlias","getCommandPicks","getCodeEditorCommandPicks","hasAdditionalCommandPicks","getAdditionalCommandPicks","IInstantiationService","ICodeEditorService","IKeybindingService","ICommandService","ITelemetryService","IDialogService","GotoLineAction","QuickCommandNLS","quickCommandActionLabel","kbOpts","kbExpr","EditorContextKeys","primary","weight","contextMenuOpts","group","order","IQuickInputService","quickAccess","show","PREFIX","Registry","as","Extensions","Quickaccess","registerQuickAccessProvider","ctor","prefix","helpEntries","description","quickCommandHelp","commandId","StandaloneGotoLineQuickAccessProvider","AbstractGotoLineQuickAccessProvider","editorService","onDidActiveTextEditorControlChange","Event","None","GoToLineNLS","gotoLineActionLabel","mac","StandaloneGotoSymbolQuickAccessProvider","AbstractGotoSymbolQuickAccessProvider","languageFeaturesService","outlineModelService","ILanguageFeaturesService","IOutlineModelService","GotoSymbolAction","QuickOutlineNLS","quickOutlineActionLabel","hasDocumentSymbolProvider","itemActivation","ItemActivation","NONE","quickOutlineByCategoryActionLabel","PREFIX_BY_CATEGORY","HelpQuickAccessProvider","QuickHelpNLS","helpQuickAccessActionLabel","StandaloneReferencesController","ReferencesController","contextKeyService","notificationService","storageService","configurationService","IContextKeyService","INotificationService","IStorageService","IConfigurationService","StandaloneCodeEditorService","AbstractCodeEditorService","themeService","onCodeEditorAdd","_checkContextKey","onCodeEditorRemove","_editorIsOpen","createKey","_activeCodeEditor","registerCodeEditorOpenHandler","input","source","sideBySide","doOpenEditor","hasCodeEditor","listCodeEditors","isSimpleWidget","set","setActiveCodeEditor","activeCodeEditor","getActiveCodeEditor","findModel","resource","schema","scheme","Schemas","http","https","windowOpenNoOpener","toString","selection","options","endLineNumber","endColumn","setSelection","revealRangeInCenter","pos","startLineNumber","startColumn","setPosition","revealPositionInCenter","model","uri","IThemeService","registerSingleton","ttPolicy","createTrustedTypesPolicy","createHTML","Colorizer","colorizeElement","domNode","theme","mimeType","getAttribute","console","error","getLanguageIdByMimeType","setTheme","text","firstChild","nodeValue","colorize","str","trustedhtml","innerHTML","err","tabSize","strings","substr","lines","isRegisteredLanguageId","_fakeColorize","getOrCreate","execute","html","tokenizeResult","LineTokens","convertToEndOffset","lineTokens","isBasicASCII","ViewLineRenderingData","containsRTL","renderResult","renderViewLine","RenderLineInput","inflate","push","join","_actualColorize","MonarchTokenizer","status","getLoadStatus","loaded","promise","_colorize","colorizeLine","mightContainNonBasicASCII","mightContainRTL","colorizeModelLine","content","tokenization","forceTokenization","inflatedTokens","getLineTokens","Uint32Array","LAST_GENERATED_COMMAND_ID","ariaDomNodeCreated","StandaloneCodeEditor","CodeEditorWidget","domElement","_options","accessibilityService","languageConfigurationService","assign","ariaLabel","StandaloneCodeEditorNLS","editorViewAccessibleLabel","accessibilityHelpMessage","StandaloneKeybindingService","_standaloneKeybindingService","parent","aria","body","createAriaDomNode","ariaContainerElement","addCommand","keybinding","handler","context","warn","whenExpression","ContextKeyExpr","deserialize","addDynamicKeybinding","createContextKey","defaultValue","_contextKeyService","addAction","_descriptor","_this","Error","and","equals","keybindings","keybindingsWhen","keybindingContext","contextMenuGroupId","contextMenuOrder","_accessor","_len","args","Array","_key","toDispose","DisposableStore","uniqueId","add","CommandsRegistry","registerCommand","menuItem","command","title","when","MenuRegistry","appendMenuItem","MenuId","EditorContext","isArray","kb","internalAction","InternalEditorAction","_len2","_key2","_actions","toDisposable","delete","_triggerCommand","handlerId","payload","_codeEditorService","IAccessibilityService","ILanguageConfigurationService","StandaloneEditor","modelService","updateConfigurationService","themeDomRegistration","registerEditorContainer","autoDetectHighContrast","setAutoDetectHighContrast","Boolean","_configurationService","_standaloneThemeService","language","PLAINTEXT_LANGUAGE_ID","createTextModel","_ownsModel","_attachModel","oldModelUrl","newModelUrl","_onDidChangeModel","fire","updateOptions","newOptions","_postDetachModelCleanup","detachedModel","IModelService","StandaloneDiffEditor2","DiffEditorWidget","contextMenuService","editorProgressService","clipboardService","audioCueService","_createInnerEditor","container","createInstance","getOriginalEditor","getModifiedEditor","descriptor","firstLF","indexOf","firstLine","doCreateModel","createByFilepathOrFirstLine","createById","languageSelection","createModel","IContextMenuService","IEditorProgressService","IClipboardService","IAudioCueService","create","override","StandaloneServices","initialize","onDidCreateEditor","listener","onDidCreateDiffEditor","onDiffEditorAdd","getEditors","getDiffEditors","listDiffEditors","createDiffEditor","addEditorAction","EditorCommand","runEditorCommand","addDynamicKeybindings","map","addKeybindingRule","rule","addKeybindingRules","rules","commandArgs","setModelLanguage","mimeTypeOrLanguageId","setLanguage","setModelMarkers","owner","markers","IMarkerService","changeOne","removeAllMarkers","changeAll","getModelMarkers","filter","read","onDidChangeMarkers","onMarkerChanged","getModels","onDidCreateModel","onModelAdded","onWillDisposeModel","onModelRemoved","onModelLanguageChanged","oldLanguage","oldLanguageId","createWebWorker","opts","actualCreateWebWorker","languages","splitLines","tokenizationResult","defineTheme","themeName","themeData","remeasureFonts","FontMeasurements","clearAllFontInfos","registerLinkOpener","opener","IOpenerService","registerOpener","open","URI","parse","registerEditorOpener","selectionOrPosition","openCodeEditor","createMonacoEditorAPI","AccessibilitySupport","standaloneEnums","ContentWidgetPositionPreference","CursorChangeReason","DefaultEndOfLine","EditorAutoIndentStrategy","EditorOption","EndOfLinePreference","EndOfLineSequence","MinimapPosition","MouseTargetType","OverlayWidgetPositionPreference","OverviewRulerLane","GlyphMarginLane","RenderLineNumbersType","RenderMinimap","ScrollbarVisibility","ScrollType","TextEditorCursorBlinkingStyle","TextEditorCursorStyle","TrackedRangeStickiness","WrappingIndent","InjectedTextCursorStops","PositionAffinity","ConfigurationChangedEvent","BareFontInfo","FontInfo","TextModelResolvedOptions","FindMatch","ApplyUpdateResult","EditorZoom","EditorType","EditorOptions","bool","prop","defValue","string","createKeywordMatcher","arr","caseInsensitive","x","toLowerCase","hash","array","arrayToHash","word","hasOwnProperty","compileRegExp","lexer","replace","hadExpansion","n","s","attr","sub","RegExp","monarchCommon","flags","ignoreCase","unicode","createGuard","ruleName","tkey","val","scrut","oppat","matches","match","parseInt","tester","op","pat","test","words","elemType","obj","el","isArrayOf","elem","inWords","re","patx","eos","patexp","split","name","scrutinee","num","parts","unshift","selectScrutinee","compileAction","action","token","newAction","tokenSubst","bracket","goBack","switchTo","log","nextEmbedded","usesEmbedded","results","cases","def","defaultToken","_case","Rule","regex","matchOnlyAtLineStart","setRegex","sregex","setAction","act","compile","json","includeLF","noThrow","maxStack","start","tokenPostfix","lexerMin","addRules","newrules","include","tokenizer","newrule","rule1","matchOnlyAtStart","stateNames","brackets","close","register","ModesRegistry","registerLanguage","getLanguages","getEncodedLanguageId","onLanguage","callback","withServices","disposable","onDidRequestRichLanguageFeatures","encounteredLanguageId","onLanguageEncountered","onDidRequestBasicLanguageFeatures","setLanguageConfiguration","configuration","EncodedTokenizationSupportAdapter","actual","_languageId","_actual","TokenizationSupportAdapter","adaptTokenize","_toClassicTokens","previousStartIndex","startIndex","scopes","actualResult","_toBinaryTokens","tokenTheme","getColorTheme","resultLen","isThenable","setColorMap","standaloneThemeService","fromHex","setColorMapOverride","createTokenizationSupportAdapter","provider","isEncodedTokensProvider","registerTokensProviderFactory","factory","adaptedFactory","registerFactory","setTokensProvider","setMonarchTokensProvider","languageDef","registerReferenceProvider","languageSelector","referenceProvider","registerRenameProvider","renameProvider","registerSignatureHelpProvider","signatureHelpProvider","registerHoverProvider","hoverProvider","provideHover","getWordAtPosition","range","Range","registerDocumentSymbolProvider","documentSymbolProvider","registerDocumentHighlightProvider","documentHighlightProvider","registerLinkedEditingRangeProvider","linkedEditingRangeProvider","registerDefinitionProvider","definitionProvider","registerImplementationProvider","implementationProvider","registerTypeDefinitionProvider","typeDefinitionProvider","registerCodeLensProvider","codeLensProvider","registerCodeActionProvider","codeActionProvider","providedCodeActionKinds","documentation","provideCodeActions","m","areIntersectingOrTouching","only","trigger","resolveCodeAction","registerDocumentFormattingEditProvider","documentFormattingEditProvider","registerDocumentRangeFormattingEditProvider","documentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider","onTypeFormattingEditProvider","registerLinkProvider","linkProvider","registerCompletionItemProvider","completionProvider","registerColorProvider","colorProvider","registerFoldingRangeProvider","foldingRangeProvider","registerDeclarationProvider","declarationProvider","registerSelectionRangeProvider","selectionRangeProvider","registerDocumentSemanticTokensProvider","documentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","documentRangeSemanticTokensProvider","registerInlineCompletionsProvider","inlineCompletionsProvider","registerInlayHintsProvider","inlayHintsProvider","createMonacoLanguagesAPI","DocumentHighlightKind","CompletionItemKind","CompletionItemTag","CompletionItemInsertTextRule","SymbolKind","SymbolTag","IndentAction","CompletionTriggerKind","SignatureHelpTriggerKind","InlayHintKind","InlineCompletionTriggerKind","CodeActionTriggerType","FoldingRangeKind","SelectedSuggestionInfo","StandaloneLayoutService","dimension","_dimension","window","hasContainer","onDidLayout","top","quickPickTop","EditorScopedLayoutService","_container","ILayoutService","EditorScopedQuickInputService","QuickInputService","getContainerDomNode","host","contribution","QuickInputEditorContribution","_serviceBrand","getLayoutInfo","onDidLayoutChange","createController","StandaloneQuickInputService","activeService","quickInputService","mapEditorToService","newQuickInputService","createSingleCallFunction","onDidDispose","Map","pick","picks","CancellationToken","createQuickPick","createInputBox","QuickInputEditorWidget","codeEditor","SimpleModel","disposed","_onWillDispose","Emitter","textEditorModel","StandaloneTextModelService","createModelReference","ImmortalReference","StandaloneEditorProgressService","NULL_PROGRESS_RUNNER","showWhile","delay","total","worked","StandaloneNotificationService","info","message","notify","severity","Severity","Info","Warning","notification","NO_OP","prompt","choices","NoOpNotification","StandaloneCommandService","_onWillExecuteCommand","_onDidExecuteCommand","onDidExecuteCommand","event","_instantiationService","executeCommand","getCommand","invokeFunction","AbstractKeybindingService","logService","_cachedResolver","_dynamicKeybindings","_domNodeListeners","addContainer","disposables","KEY_DOWN","keyEvent","StandardKeyboardEvent","_dispatch","preventDefault","stopPropagation","KEY_UP","_singleModifierDispatch","DomNodeListeners","removeContainer","domNodeListeners","splice","addCodeEditor","forEach","addDiffEditor","diffEditor","onDiffEditorRemove","combinedDisposable","entries","decodeKeybinding","OS","weight1","weight2","extensionId","isBuiltinExtension","updateResolver","_onDidUpdateKeybindings","_getResolver","defaults","_toNormalizedKeybindingItems","KeybindingsRegistry","getDefaultKeybindings","overrides","KeybindingResolver","_log","_documentHasFocus","hasFocus","items","isDefault","item","resolvedKeybindings","USLayoutResolvedKeybinding","resolveKeybinding","resolvedKeybinding","ResolvedKeybindingItem","resolveKeyboardEvent","keyboardEvent","chord","KeyCodeChord","ctrlKey","shiftKey","altKey","metaKey","ILogService","isConfigurationOverrides","thing","overrideIdentifier","StandaloneConfigurationService","_onDidChangeConfiguration","defaultConfiguration","DefaultConfiguration","_configuration","Configuration","reload","ConfigurationModel","getValue","arg1","arg2","section","updateValues","values","previous","toData","changedKeys","entry","updateValue","configurationChangeEvent","ConfigurationChangeEvent","keys","sourceConfig","arg3","arg4","inspect","StandaloneResourceConfigurationService","affectedKeys","affectsConfiguration","Pos","isIPosition","getLanguage","getLanguageIdAtPosition","guessLanguageIdByFilepathOrFirstLine","StandaloneResourcePropertiesService","getEOL","eol","isLinux","isMacintosh","StandaloneWorkspaceContextService","from","SCHEME","authority","path","workspace","STANDALONE_EDITOR_WORKSPACE_ID","folders","WorkspaceFolder","index","getWorkspace","getWorkspaceFolder","isDiffEditor","toUpdate","isEditorConfigurationKey","isDiffEditorConfigurationKey","StandaloneBulkEditService","_modelService","hasPreviewHandler","editsIn","edits","ResourceEdit","convert","textEdits","edit","ResourceTextEdit","versionId","getVersionId","EditOperation","replaceMove","lift","textEdit","totalEdits","totalFiles","pushStackElement","pushEditOperations","ariaSummary","StandaloneServicesNLS","bulkEditServiceSummary","isApplied","StandaloneContextViewService","ContextViewService","layoutService","showContextView","delegate","shadowRoot","StandaloneLanguageService","LanguageService","StandaloneLogService","LogService","ConsoleLogger","StandaloneContextMenuService","ContextMenuService","contextViewService","menuService","configure","blockMouse","IContextViewService","IMenuService","ITextResourceConfigurationService","ITextResourcePropertiesService","IWorkspaceContextService","ILabelService","getUriLabel","fsPath","getUriBasenameLabel","basename","publicLog2","confirm","confirmation","confirmed","doConfirm","detail","checkboxChecked","messageText","_b","promptButtons","buttons","cancelButton","IEnvironmentService","isExtensionDevelopment","isBuilt","MarkerService","StandaloneThemeService","ModelService","IMarkerDecorationsService","MarkerDecorationsService","ContextKeyService","IProgressService","withProgress","task","onDidCancel","report","InMemoryStorageService","IEditorWorkerService","EditorWorkerService","IBulkEditService","IWorkspaceTrustManagementService","_neverEmitter","onDidChangeTrust","isWorkspaceTrusted","ITextModelService","AccessibilityService","IListService","ListService","OpenerService","BrowserClipboardService","MenuService","playAudioCue","cue","serviceCollection","ServiceCollection","getSingletonServiceDescriptors","InstantiationService","serviceId","initialized","SyncDescriptor","onDidInitialize","serviceIdentifier","createDecorator","editorFeatures","getEditorFeatures","feature","onUnexpectedError","vs","base","inherit","colors","editorBackground","editorForeground","editorInactiveSelection","editorIndentGuide1","editorActiveIndentGuide1","editorSelectionHighlight","vs_dark","hc_black","hc_light","VS_LIGHT_THEME_NAME","VS_DARK_THEME_NAME","HC_BLACK_THEME_NAME","HC_LIGHT_THEME_NAME","colorRegistry","ColorContribution","themingRegistry","ThemingExtensions","ThemingContribution","StandaloneTheme","standaloneThemeData","semanticHighlighting","isBuiltinTheme","defaultColors","_tokenTheme","notifyBaseUpdated","getColors","baseData","getBuiltinRules","has","getColor","colorId","useDefault","color","getDefault","resolveDefaultColor","defines","ColorScheme","LIGHT","HIGH_CONTRAST_DARK","HIGH_CONTRAST_LIGHT","DARK","encodedTokensColors","TokenTheme","createFromRawTokenTheme","getTokenStyleMetadata","modifiers","modelLanguage","_match","italic","bold","underline","strikethrough","builtinTheme","newBuiltInTheme","_onColorThemeChange","onDidColorThemeChange","_onProductIconThemeChange","onDidProductIconThemeChange","_environment","_builtInProductIconTheme","UnthemedProductIconTheme","_autoDetectHighContrast","_knownThemes","iconsStyleSheet","getIconsStyleSheet","_codiconCSS","getCSS","_themeCSS","_allCSS","_globalStyleElement","_styleElements","_colorMapOverride","_onOSSchemeChanged","_updateCSS","addMatchMediaChangeListener","_registerShadowDomContainer","_registerRegularEditorContainer","style","textContent","styleElement","_theme","colorMapOverride","_updateThemeOrColorMap","_updateActualTheme","desiredTheme","wantsHighContrast","matchMedia","isHighContrast","newThemeName","isDark","cssRules","hasRule","ruleCollector","addRule","getThemingParticipants","p","colorVariables","asCssVariableName","generateTokensCSSForColorMap","getFileIconTheme","hasFileIcons","hasFolderIcons","hidesExplorerArrows","getProductIconTheme","ToggleHighContrast","ToggleHighContrastNLS","toggleHighContrast","_originalThemeName","currentTheme","isFuzzyAction","what","isFuzzyActionArr","isString","isIAction","empty","fixCase","sanitize","msg","createError","substituteMatches","stateMatches","full","dollar","ofs","findRules","inState","idx","lastIndexOf","stateExists","MonarchTokenizer_1","MonarchStackElementFactory","_INSTANCE","maxCacheDepth","_maxCacheDepth","_entries","depth","MonarchStackElement","stackElementId","getStackElementId","element","_equals","a","b","other","pop","popall","EmbeddedLanguageData","clone","MonarchLineStateFactory","stack","embeddedLanguageData","MonarchLineState","MonarchClassicTokensCollector","_tokens","_lastTokenType","_lastTokenLanguage","enterLanguage","emit","startOffset","nestedLanguageTokenize","embeddedLanguageLine","offsetDelta","nestedLanguageId","embeddedModeState","nestedLanguageTokenizationSupport","nestedResult","finalize","MonarchModernTokensCollector","_prependTokens","_currentLanguageId","_lastTokenMetadata","_merge","aLen","bLen","cLen","_lexer","_embeddedLanguages","embeddedLoaded","emitting","isOneOfMyEmbeddedModes","changedLanguages","handleChange","_maxTokenizationLineLength","promises","nestedModeStatus","isResolved","all","_","rootState","lineState","tokensCollector","endLineState","_tokenize","collector","_nestedTokenize","_myTokenize","_findLeavingNestedLanguageOffset","popOffset","hasEmbeddedPopRule","regexSource","search","nestedEndState","nestedLanguageLine","restOfTheLine","_safeRuleName","lineWithoutLF","lineWithoutLFLength","lineLength","groupMatching","forceEvaluation","pos0","stackLen0","groupLen0","groups","matched","enteringEmbeddedLanguage","groupEntry","shift","restOfLine","charAt","Math","max","nextState","transform","computeNewStateForEmbeddedLanguage","getLanguageIdByLanguageName","_getNestedEmbeddedLanguageData","totalLen","rest","findBracket","requestBasicLanguageFeatures","bracketType"],"sourceRoot":""}