{"version":3,"file":"static/js/monaco-editor-vendor.55a95165.2d91d13c.js","mappings":"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","sources":["../../node_modules/monaco-editor/esm/vs/editor/browser/view/renderingContext.js","../../node_modules/monaco-editor/esm/vs/editor/browser/view/viewController.js","../../node_modules/monaco-editor/esm/vs/editor/browser/view/viewLayer.js","../../node_modules/monaco-editor/esm/vs/editor/browser/view/viewOverlays.js","../../node_modules/monaco-editor/esm/vs/editor/browser/view/viewPart.js","../../node_modules/monaco-editor/esm/vs/editor/browser/view/viewUserInputEvents.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditor/codeEditorContributions.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditor/codeEditorWidget.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditor/embeddedCodeEditorWidget.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/commands.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditor.contribution.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/accessibleDiffViewer.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/movedBlocksLinesFeature.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorDecorations.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorSash.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffProviderFactoryService.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorViewModel.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/inlineDiffDeletedCodeMargin.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/renderLines.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorViewZones/diffEditorViewZones.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/utils/editorGutter.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/gutterFeature.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/overviewRulerFeature.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/revertButtonsFeature.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/components/diffEditorEditors.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/delegatingEditorImpl.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorOptions.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorWidget.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/features/hideUnchangedRegionsFeature.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/registrations.contribution.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/utils.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/markdownRenderer/browser/markdownRenderer.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/diffEditorItemTemplate.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/objectPool.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/multiDiffEditorWidgetImpl.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/colors.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/multiDiffEditorWidget.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/multiDiffEditor/utils.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class RestrictedRenderingContext {\n    constructor(viewLayout, viewportData) {\n        this._restrictedRenderingContextBrand = undefined;\n        this._viewLayout = viewLayout;\n        this.viewportData = viewportData;\n        this.scrollWidth = this._viewLayout.getScrollWidth();\n        this.scrollHeight = this._viewLayout.getScrollHeight();\n        this.visibleRange = this.viewportData.visibleRange;\n        this.bigNumbersDelta = this.viewportData.bigNumbersDelta;\n        const vInfo = this._viewLayout.getCurrentViewport();\n        this.scrollTop = vInfo.top;\n        this.scrollLeft = vInfo.left;\n        this.viewportWidth = vInfo.width;\n        this.viewportHeight = vInfo.height;\n    }\n    getScrolledTopFromAbsoluteTop(absoluteTop) {\n        return absoluteTop - this.scrollTop;\n    }\n    getVerticalOffsetForLineNumber(lineNumber, includeViewZones) {\n        return this._viewLayout.getVerticalOffsetForLineNumber(lineNumber, includeViewZones);\n    }\n    getVerticalOffsetAfterLineNumber(lineNumber, includeViewZones) {\n        return this._viewLayout.getVerticalOffsetAfterLineNumber(lineNumber, includeViewZones);\n    }\n    getDecorationsInViewport() {\n        return this.viewportData.getDecorationsInViewport();\n    }\n}\nexport class RenderingContext extends RestrictedRenderingContext {\n    constructor(viewLayout, viewportData, viewLines) {\n        super(viewLayout, viewportData);\n        this._renderingContextBrand = undefined;\n        this._viewLines = viewLines;\n    }\n    linesVisibleRangesForRange(range, includeNewLines) {\n        return this._viewLines.linesVisibleRangesForRange(range, includeNewLines);\n    }\n    visibleRangeForPosition(position) {\n        return this._viewLines.visibleRangeForPosition(position);\n    }\n}\nexport class LineVisibleRanges {\n    constructor(outsideRenderedLine, lineNumber, ranges, \n    /**\n     * Indicates if the requested range does not end in this line, but continues on the next line.\n     */\n    continuesOnNextLine) {\n        this.outsideRenderedLine = outsideRenderedLine;\n        this.lineNumber = lineNumber;\n        this.ranges = ranges;\n        this.continuesOnNextLine = continuesOnNextLine;\n    }\n}\nexport class HorizontalRange {\n    static from(ranges) {\n        const result = new Array(ranges.length);\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            const range = ranges[i];\n            result[i] = new HorizontalRange(range.left, range.width);\n        }\n        return result;\n    }\n    constructor(left, width) {\n        this._horizontalRangeBrand = undefined;\n        this.left = Math.round(left);\n        this.width = Math.round(width);\n    }\n    toString() {\n        return `[${this.left},${this.width}]`;\n    }\n}\nexport class FloatHorizontalRange {\n    constructor(left, width) {\n        this._floatHorizontalRangeBrand = undefined;\n        this.left = left;\n        this.width = width;\n    }\n    toString() {\n        return `[${this.left},${this.width}]`;\n    }\n    static compare(a, b) {\n        return a.left - b.left;\n    }\n}\nexport class HorizontalPosition {\n    constructor(outsideRenderedLine, left) {\n        this.outsideRenderedLine = outsideRenderedLine;\n        this.originalLeft = left;\n        this.left = Math.round(this.originalLeft);\n    }\n}\nexport class VisibleRanges {\n    constructor(outsideRenderedLine, ranges) {\n        this.outsideRenderedLine = outsideRenderedLine;\n        this.ranges = ranges;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CoreNavigationCommands } from '../coreCommands.js';\nimport { Position } from '../../common/core/position.js';\nimport * as platform from '../../../base/common/platform.js';\nexport class ViewController {\n    constructor(configuration, viewModel, userInputEvents, commandDelegate) {\n        this.configuration = configuration;\n        this.viewModel = viewModel;\n        this.userInputEvents = userInputEvents;\n        this.commandDelegate = commandDelegate;\n    }\n    paste(text, pasteOnNewLine, multicursorText, mode) {\n        this.commandDelegate.paste(text, pasteOnNewLine, multicursorText, mode);\n    }\n    type(text) {\n        this.commandDelegate.type(text);\n    }\n    compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) {\n        this.commandDelegate.compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta);\n    }\n    compositionStart() {\n        this.commandDelegate.startComposition();\n    }\n    compositionEnd() {\n        this.commandDelegate.endComposition();\n    }\n    cut() {\n        this.commandDelegate.cut();\n    }\n    setSelection(modelSelection) {\n        CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel, {\n            source: 'keyboard',\n            selection: modelSelection\n        });\n    }\n    _validateViewColumn(viewPosition) {\n        const minColumn = this.viewModel.getLineMinColumn(viewPosition.lineNumber);\n        if (viewPosition.column < minColumn) {\n            return new Position(viewPosition.lineNumber, minColumn);\n        }\n        return viewPosition;\n    }\n    _hasMulticursorModifier(data) {\n        switch (this.configuration.options.get(78 /* EditorOption.multiCursorModifier */)) {\n            case 'altKey':\n                return data.altKey;\n            case 'ctrlKey':\n                return data.ctrlKey;\n            case 'metaKey':\n                return data.metaKey;\n            default:\n                return false;\n        }\n    }\n    _hasNonMulticursorModifier(data) {\n        switch (this.configuration.options.get(78 /* EditorOption.multiCursorModifier */)) {\n            case 'altKey':\n                return data.ctrlKey || data.metaKey;\n            case 'ctrlKey':\n                return data.altKey || data.metaKey;\n            case 'metaKey':\n                return data.ctrlKey || data.altKey;\n            default:\n                return false;\n        }\n    }\n    dispatchMouse(data) {\n        const options = this.configuration.options;\n        const selectionClipboardIsOn = (platform.isLinux && options.get(107 /* EditorOption.selectionClipboard */));\n        const columnSelection = options.get(22 /* EditorOption.columnSelection */);\n        if (data.middleButton && !selectionClipboardIsOn) {\n            this._columnSelect(data.position, data.mouseColumn, data.inSelectionMode);\n        }\n        else if (data.startedOnLineNumbers) {\n            // If the dragging started on the gutter, then have operations work on the entire line\n            if (this._hasMulticursorModifier(data)) {\n                if (data.inSelectionMode) {\n                    this._lastCursorLineSelect(data.position, data.revealType);\n                }\n                else {\n                    this._createCursor(data.position, true);\n                }\n            }\n            else {\n                if (data.inSelectionMode) {\n                    this._lineSelectDrag(data.position, data.revealType);\n                }\n                else {\n                    this._lineSelect(data.position, data.revealType);\n                }\n            }\n        }\n        else if (data.mouseDownCount >= 4) {\n            this._selectAll();\n        }\n        else if (data.mouseDownCount === 3) {\n            if (this._hasMulticursorModifier(data)) {\n                if (data.inSelectionMode) {\n                    this._lastCursorLineSelectDrag(data.position, data.revealType);\n                }\n                else {\n                    this._lastCursorLineSelect(data.position, data.revealType);\n                }\n            }\n            else {\n                if (data.inSelectionMode) {\n                    this._lineSelectDrag(data.position, data.revealType);\n                }\n                else {\n                    this._lineSelect(data.position, data.revealType);\n                }\n            }\n        }\n        else if (data.mouseDownCount === 2) {\n            if (!data.onInjectedText) {\n                if (this._hasMulticursorModifier(data)) {\n                    this._lastCursorWordSelect(data.position, data.revealType);\n                }\n                else {\n                    if (data.inSelectionMode) {\n                        this._wordSelectDrag(data.position, data.revealType);\n                    }\n                    else {\n                        this._wordSelect(data.position, data.revealType);\n                    }\n                }\n            }\n        }\n        else {\n            if (this._hasMulticursorModifier(data)) {\n                if (!this._hasNonMulticursorModifier(data)) {\n                    if (data.shiftKey) {\n                        this._columnSelect(data.position, data.mouseColumn, true);\n                    }\n                    else {\n                        // Do multi-cursor operations only when purely alt is pressed\n                        if (data.inSelectionMode) {\n                            this._lastCursorMoveToSelect(data.position, data.revealType);\n                        }\n                        else {\n                            this._createCursor(data.position, false);\n                        }\n                    }\n                }\n            }\n            else {\n                if (data.inSelectionMode) {\n                    if (data.altKey) {\n                        this._columnSelect(data.position, data.mouseColumn, true);\n                    }\n                    else {\n                        if (columnSelection) {\n                            this._columnSelect(data.position, data.mouseColumn, true);\n                        }\n                        else {\n                            this._moveToSelect(data.position, data.revealType);\n                        }\n                    }\n                }\n                else {\n                    this.moveTo(data.position, data.revealType);\n                }\n            }\n        }\n    }\n    _usualArgs(viewPosition, revealType) {\n        viewPosition = this._validateViewColumn(viewPosition);\n        return {\n            source: 'mouse',\n            position: this._convertViewToModelPosition(viewPosition),\n            viewPosition,\n            revealType\n        };\n    }\n    moveTo(viewPosition, revealType) {\n        CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _moveToSelect(viewPosition, revealType) {\n        CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _columnSelect(viewPosition, mouseColumn, doColumnSelect) {\n        viewPosition = this._validateViewColumn(viewPosition);\n        CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel, {\n            source: 'mouse',\n            position: this._convertViewToModelPosition(viewPosition),\n            viewPosition: viewPosition,\n            mouseColumn: mouseColumn,\n            doColumnSelect: doColumnSelect\n        });\n    }\n    _createCursor(viewPosition, wholeLine) {\n        viewPosition = this._validateViewColumn(viewPosition);\n        CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel, {\n            source: 'mouse',\n            position: this._convertViewToModelPosition(viewPosition),\n            viewPosition: viewPosition,\n            wholeLine: wholeLine\n        });\n    }\n    _lastCursorMoveToSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _wordSelect(viewPosition, revealType) {\n        CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _wordSelectDrag(viewPosition, revealType) {\n        CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lastCursorWordSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lineSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lineSelectDrag(viewPosition, revealType) {\n        CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lastCursorLineSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lastCursorLineSelectDrag(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _selectAll() {\n        CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel, { source: 'mouse' });\n    }\n    // ----------------------\n    _convertViewToModelPosition(viewPosition) {\n        return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(viewPosition);\n    }\n    emitKeyDown(e) {\n        this.userInputEvents.emitKeyDown(e);\n    }\n    emitKeyUp(e) {\n        this.userInputEvents.emitKeyUp(e);\n    }\n    emitContextMenu(e) {\n        this.userInputEvents.emitContextMenu(e);\n    }\n    emitMouseMove(e) {\n        this.userInputEvents.emitMouseMove(e);\n    }\n    emitMouseLeave(e) {\n        this.userInputEvents.emitMouseLeave(e);\n    }\n    emitMouseUp(e) {\n        this.userInputEvents.emitMouseUp(e);\n    }\n    emitMouseDown(e) {\n        this.userInputEvents.emitMouseDown(e);\n    }\n    emitMouseDrag(e) {\n        this.userInputEvents.emitMouseDrag(e);\n    }\n    emitMouseDrop(e) {\n        this.userInputEvents.emitMouseDrop(e);\n    }\n    emitMouseDropCanceled() {\n        this.userInputEvents.emitMouseDropCanceled();\n    }\n    emitMouseWheel(e) {\n        this.userInputEvents.emitMouseWheel(e);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { createTrustedTypesPolicy } from '../../../base/browser/trustedTypes.js';\nimport { BugIndicatingError } from '../../../base/common/errors.js';\nimport { StringBuilder } from '../../common/core/stringBuilder.js';\nexport class RenderedLinesCollection {\n    constructor(createLine) {\n        this._createLine = createLine;\n        this._set(1, []);\n    }\n    flush() {\n        this._set(1, []);\n    }\n    _set(rendLineNumberStart, lines) {\n        this._lines = lines;\n        this._rendLineNumberStart = rendLineNumberStart;\n    }\n    _get() {\n        return {\n            rendLineNumberStart: this._rendLineNumberStart,\n            lines: this._lines\n        };\n    }\n    /**\n     * @returns Inclusive line number that is inside this collection\n     */\n    getStartLineNumber() {\n        return this._rendLineNumberStart;\n    }\n    /**\n     * @returns Inclusive line number that is inside this collection\n     */\n    getEndLineNumber() {\n        return this._rendLineNumberStart + this._lines.length - 1;\n    }\n    getCount() {\n        return this._lines.length;\n    }\n    getLine(lineNumber) {\n        const lineIndex = lineNumber - this._rendLineNumberStart;\n        if (lineIndex < 0 || lineIndex >= this._lines.length) {\n            throw new BugIndicatingError('Illegal value for lineNumber');\n        }\n        return this._lines[lineIndex];\n    }\n    /**\n     * @returns Lines that were removed from this collection\n     */\n    onLinesDeleted(deleteFromLineNumber, deleteToLineNumber) {\n        if (this.getCount() === 0) {\n            // no lines\n            return null;\n        }\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        if (deleteToLineNumber < startLineNumber) {\n            // deleting above the viewport\n            const deleteCnt = deleteToLineNumber - deleteFromLineNumber + 1;\n            this._rendLineNumberStart -= deleteCnt;\n            return null;\n        }\n        if (deleteFromLineNumber > endLineNumber) {\n            // deleted below the viewport\n            return null;\n        }\n        // Record what needs to be deleted\n        let deleteStartIndex = 0;\n        let deleteCount = 0;\n        for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n            const lineIndex = lineNumber - this._rendLineNumberStart;\n            if (deleteFromLineNumber <= lineNumber && lineNumber <= deleteToLineNumber) {\n                // this is a line to be deleted\n                if (deleteCount === 0) {\n                    // this is the first line to be deleted\n                    deleteStartIndex = lineIndex;\n                    deleteCount = 1;\n                }\n                else {\n                    deleteCount++;\n                }\n            }\n        }\n        // Adjust this._rendLineNumberStart for lines deleted above\n        if (deleteFromLineNumber < startLineNumber) {\n            // Something was deleted above\n            let deleteAboveCount = 0;\n            if (deleteToLineNumber < startLineNumber) {\n                // the entire deleted lines are above\n                deleteAboveCount = deleteToLineNumber - deleteFromLineNumber + 1;\n            }\n            else {\n                deleteAboveCount = startLineNumber - deleteFromLineNumber;\n            }\n            this._rendLineNumberStart -= deleteAboveCount;\n        }\n        const deleted = this._lines.splice(deleteStartIndex, deleteCount);\n        return deleted;\n    }\n    onLinesChanged(changeFromLineNumber, changeCount) {\n        const changeToLineNumber = changeFromLineNumber + changeCount - 1;\n        if (this.getCount() === 0) {\n            // no lines\n            return false;\n        }\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        let someoneNotified = false;\n        for (let changedLineNumber = changeFromLineNumber; changedLineNumber <= changeToLineNumber; changedLineNumber++) {\n            if (changedLineNumber >= startLineNumber && changedLineNumber <= endLineNumber) {\n                // Notify the line\n                this._lines[changedLineNumber - this._rendLineNumberStart].onContentChanged();\n                someoneNotified = true;\n            }\n        }\n        return someoneNotified;\n    }\n    onLinesInserted(insertFromLineNumber, insertToLineNumber) {\n        if (this.getCount() === 0) {\n            // no lines\n            return null;\n        }\n        const insertCnt = insertToLineNumber - insertFromLineNumber + 1;\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        if (insertFromLineNumber <= startLineNumber) {\n            // inserting above the viewport\n            this._rendLineNumberStart += insertCnt;\n            return null;\n        }\n        if (insertFromLineNumber > endLineNumber) {\n            // inserting below the viewport\n            return null;\n        }\n        if (insertCnt + insertFromLineNumber > endLineNumber) {\n            // insert inside the viewport in such a way that all remaining lines are pushed outside\n            const deleted = this._lines.splice(insertFromLineNumber - this._rendLineNumberStart, endLineNumber - insertFromLineNumber + 1);\n            return deleted;\n        }\n        // insert inside the viewport, push out some lines, but not all remaining lines\n        const newLines = [];\n        for (let i = 0; i < insertCnt; i++) {\n            newLines[i] = this._createLine();\n        }\n        const insertIndex = insertFromLineNumber - this._rendLineNumberStart;\n        const beforeLines = this._lines.slice(0, insertIndex);\n        const afterLines = this._lines.slice(insertIndex, this._lines.length - insertCnt);\n        const deletedLines = this._lines.slice(this._lines.length - insertCnt, this._lines.length);\n        this._lines = beforeLines.concat(newLines).concat(afterLines);\n        return deletedLines;\n    }\n    onTokensChanged(ranges) {\n        if (this.getCount() === 0) {\n            // no lines\n            return false;\n        }\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        let notifiedSomeone = false;\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            const rng = ranges[i];\n            if (rng.toLineNumber < startLineNumber || rng.fromLineNumber > endLineNumber) {\n                // range outside viewport\n                continue;\n            }\n            const from = Math.max(startLineNumber, rng.fromLineNumber);\n            const to = Math.min(endLineNumber, rng.toLineNumber);\n            for (let lineNumber = from; lineNumber <= to; lineNumber++) {\n                const lineIndex = lineNumber - this._rendLineNumberStart;\n                this._lines[lineIndex].onTokensChanged();\n                notifiedSomeone = true;\n            }\n        }\n        return notifiedSomeone;\n    }\n}\nexport class VisibleLinesCollection {\n    constructor(host) {\n        this._host = host;\n        this.domNode = this._createDomNode();\n        this._linesCollection = new RenderedLinesCollection(() => this._host.createVisibleLine());\n    }\n    _createDomNode() {\n        const domNode = createFastDomNode(document.createElement('div'));\n        domNode.setClassName('view-layer');\n        domNode.setPosition('absolute');\n        domNode.domNode.setAttribute('role', 'presentation');\n        domNode.domNode.setAttribute('aria-hidden', 'true');\n        return domNode;\n    }\n    // ---- begin view event handlers\n    onConfigurationChanged(e) {\n        if (e.hasChanged(145 /* EditorOption.layoutInfo */)) {\n            return true;\n        }\n        return false;\n    }\n    onFlushed(e) {\n        this._linesCollection.flush();\n        // No need to clear the dom node because a full .innerHTML will occur in ViewLayerRenderer._render\n        return true;\n    }\n    onLinesChanged(e) {\n        return this._linesCollection.onLinesChanged(e.fromLineNumber, e.count);\n    }\n    onLinesDeleted(e) {\n        const deleted = this._linesCollection.onLinesDeleted(e.fromLineNumber, e.toLineNumber);\n        if (deleted) {\n            // Remove from DOM\n            for (let i = 0, len = deleted.length; i < len; i++) {\n                const lineDomNode = deleted[i].getDomNode();\n                if (lineDomNode) {\n                    this.domNode.domNode.removeChild(lineDomNode);\n                }\n            }\n        }\n        return true;\n    }\n    onLinesInserted(e) {\n        const deleted = this._linesCollection.onLinesInserted(e.fromLineNumber, e.toLineNumber);\n        if (deleted) {\n            // Remove from DOM\n            for (let i = 0, len = deleted.length; i < len; i++) {\n                const lineDomNode = deleted[i].getDomNode();\n                if (lineDomNode) {\n                    this.domNode.domNode.removeChild(lineDomNode);\n                }\n            }\n        }\n        return true;\n    }\n    onScrollChanged(e) {\n        return e.scrollTopChanged;\n    }\n    onTokensChanged(e) {\n        return this._linesCollection.onTokensChanged(e.ranges);\n    }\n    onZonesChanged(e) {\n        return true;\n    }\n    // ---- end view event handlers\n    getStartLineNumber() {\n        return this._linesCollection.getStartLineNumber();\n    }\n    getEndLineNumber() {\n        return this._linesCollection.getEndLineNumber();\n    }\n    getVisibleLine(lineNumber) {\n        return this._linesCollection.getLine(lineNumber);\n    }\n    renderLines(viewportData) {\n        const inp = this._linesCollection._get();\n        const renderer = new ViewLayerRenderer(this.domNode.domNode, this._host, viewportData);\n        const ctx = {\n            rendLineNumberStart: inp.rendLineNumberStart,\n            lines: inp.lines,\n            linesLength: inp.lines.length\n        };\n        // Decide if this render will do a single update (single large .innerHTML) or many updates (inserting/removing dom nodes)\n        const resCtx = renderer.render(ctx, viewportData.startLineNumber, viewportData.endLineNumber, viewportData.relativeVerticalOffset);\n        this._linesCollection._set(resCtx.rendLineNumberStart, resCtx.lines);\n    }\n}\nclass ViewLayerRenderer {\n    constructor(domNode, host, viewportData) {\n        this.domNode = domNode;\n        this.host = host;\n        this.viewportData = viewportData;\n    }\n    render(inContext, startLineNumber, stopLineNumber, deltaTop) {\n        const ctx = {\n            rendLineNumberStart: inContext.rendLineNumberStart,\n            lines: inContext.lines.slice(0),\n            linesLength: inContext.linesLength\n        };\n        if ((ctx.rendLineNumberStart + ctx.linesLength - 1 < startLineNumber) || (stopLineNumber < ctx.rendLineNumberStart)) {\n            // There is no overlap whatsoever\n            ctx.rendLineNumberStart = startLineNumber;\n            ctx.linesLength = stopLineNumber - startLineNumber + 1;\n            ctx.lines = [];\n            for (let x = startLineNumber; x <= stopLineNumber; x++) {\n                ctx.lines[x - startLineNumber] = this.host.createVisibleLine();\n            }\n            this._finishRendering(ctx, true, deltaTop);\n            return ctx;\n        }\n        // Update lines which will remain untouched\n        this._renderUntouchedLines(ctx, Math.max(startLineNumber - ctx.rendLineNumberStart, 0), Math.min(stopLineNumber - ctx.rendLineNumberStart, ctx.linesLength - 1), deltaTop, startLineNumber);\n        if (ctx.rendLineNumberStart > startLineNumber) {\n            // Insert lines before\n            const fromLineNumber = startLineNumber;\n            const toLineNumber = Math.min(stopLineNumber, ctx.rendLineNumberStart - 1);\n            if (fromLineNumber <= toLineNumber) {\n                this._insertLinesBefore(ctx, fromLineNumber, toLineNumber, deltaTop, startLineNumber);\n                ctx.linesLength += toLineNumber - fromLineNumber + 1;\n            }\n        }\n        else if (ctx.rendLineNumberStart < startLineNumber) {\n            // Remove lines before\n            const removeCnt = Math.min(ctx.linesLength, startLineNumber - ctx.rendLineNumberStart);\n            if (removeCnt > 0) {\n                this._removeLinesBefore(ctx, removeCnt);\n                ctx.linesLength -= removeCnt;\n            }\n        }\n        ctx.rendLineNumberStart = startLineNumber;\n        if (ctx.rendLineNumberStart + ctx.linesLength - 1 < stopLineNumber) {\n            // Insert lines after\n            const fromLineNumber = ctx.rendLineNumberStart + ctx.linesLength;\n            const toLineNumber = stopLineNumber;\n            if (fromLineNumber <= toLineNumber) {\n                this._insertLinesAfter(ctx, fromLineNumber, toLineNumber, deltaTop, startLineNumber);\n                ctx.linesLength += toLineNumber - fromLineNumber + 1;\n            }\n        }\n        else if (ctx.rendLineNumberStart + ctx.linesLength - 1 > stopLineNumber) {\n            // Remove lines after\n            const fromLineNumber = Math.max(0, stopLineNumber - ctx.rendLineNumberStart + 1);\n            const toLineNumber = ctx.linesLength - 1;\n            const removeCnt = toLineNumber - fromLineNumber + 1;\n            if (removeCnt > 0) {\n                this._removeLinesAfter(ctx, removeCnt);\n                ctx.linesLength -= removeCnt;\n            }\n        }\n        this._finishRendering(ctx, false, deltaTop);\n        return ctx;\n    }\n    _renderUntouchedLines(ctx, startIndex, endIndex, deltaTop, deltaLN) {\n        const rendLineNumberStart = ctx.rendLineNumberStart;\n        const lines = ctx.lines;\n        for (let i = startIndex; i <= endIndex; i++) {\n            const lineNumber = rendLineNumberStart + i;\n            lines[i].layoutLine(lineNumber, deltaTop[lineNumber - deltaLN], this.viewportData.lineHeight);\n        }\n    }\n    _insertLinesBefore(ctx, fromLineNumber, toLineNumber, deltaTop, deltaLN) {\n        const newLines = [];\n        let newLinesLen = 0;\n        for (let lineNumber = fromLineNumber; lineNumber <= toLineNumber; lineNumber++) {\n            newLines[newLinesLen++] = this.host.createVisibleLine();\n        }\n        ctx.lines = newLines.concat(ctx.lines);\n    }\n    _removeLinesBefore(ctx, removeCount) {\n        for (let i = 0; i < removeCount; i++) {\n            const lineDomNode = ctx.lines[i].getDomNode();\n            if (lineDomNode) {\n                this.domNode.removeChild(lineDomNode);\n            }\n        }\n        ctx.lines.splice(0, removeCount);\n    }\n    _insertLinesAfter(ctx, fromLineNumber, toLineNumber, deltaTop, deltaLN) {\n        const newLines = [];\n        let newLinesLen = 0;\n        for (let lineNumber = fromLineNumber; lineNumber <= toLineNumber; lineNumber++) {\n            newLines[newLinesLen++] = this.host.createVisibleLine();\n        }\n        ctx.lines = ctx.lines.concat(newLines);\n    }\n    _removeLinesAfter(ctx, removeCount) {\n        const removeIndex = ctx.linesLength - removeCount;\n        for (let i = 0; i < removeCount; i++) {\n            const lineDomNode = ctx.lines[removeIndex + i].getDomNode();\n            if (lineDomNode) {\n                this.domNode.removeChild(lineDomNode);\n            }\n        }\n        ctx.lines.splice(removeIndex, removeCount);\n    }\n    _finishRenderingNewLines(ctx, domNodeIsEmpty, newLinesHTML, wasNew) {\n        if (ViewLayerRenderer._ttPolicy) {\n            newLinesHTML = ViewLayerRenderer._ttPolicy.createHTML(newLinesHTML);\n        }\n        const lastChild = this.domNode.lastChild;\n        if (domNodeIsEmpty || !lastChild) {\n            this.domNode.innerHTML = newLinesHTML; // explains the ugly casts -> https://github.com/microsoft/vscode/issues/106396#issuecomment-692625393;\n        }\n        else {\n            lastChild.insertAdjacentHTML('afterend', newLinesHTML);\n        }\n        let currChild = this.domNode.lastChild;\n        for (let i = ctx.linesLength - 1; i >= 0; i--) {\n            const line = ctx.lines[i];\n            if (wasNew[i]) {\n                line.setDomNode(currChild);\n                currChild = currChild.previousSibling;\n            }\n        }\n    }\n    _finishRenderingInvalidLines(ctx, invalidLinesHTML, wasInvalid) {\n        const hugeDomNode = document.createElement('div');\n        if (ViewLayerRenderer._ttPolicy) {\n            invalidLinesHTML = ViewLayerRenderer._ttPolicy.createHTML(invalidLinesHTML);\n        }\n        hugeDomNode.innerHTML = invalidLinesHTML;\n        for (let i = 0; i < ctx.linesLength; i++) {\n            const line = ctx.lines[i];\n            if (wasInvalid[i]) {\n                const source = hugeDomNode.firstChild;\n                const lineDomNode = line.getDomNode();\n                lineDomNode.parentNode.replaceChild(source, lineDomNode);\n                line.setDomNode(source);\n            }\n        }\n    }\n    _finishRendering(ctx, domNodeIsEmpty, deltaTop) {\n        const sb = ViewLayerRenderer._sb;\n        const linesLength = ctx.linesLength;\n        const lines = ctx.lines;\n        const rendLineNumberStart = ctx.rendLineNumberStart;\n        const wasNew = [];\n        {\n            sb.reset();\n            let hadNewLine = false;\n            for (let i = 0; i < linesLength; i++) {\n                const line = lines[i];\n                wasNew[i] = false;\n                const lineDomNode = line.getDomNode();\n                if (lineDomNode) {\n                    // line is not new\n                    continue;\n                }\n                const renderResult = line.renderLine(i + rendLineNumberStart, deltaTop[i], this.viewportData.lineHeight, this.viewportData, sb);\n                if (!renderResult) {\n                    // line does not need rendering\n                    continue;\n                }\n                wasNew[i] = true;\n                hadNewLine = true;\n            }\n            if (hadNewLine) {\n                this._finishRenderingNewLines(ctx, domNodeIsEmpty, sb.build(), wasNew);\n            }\n        }\n        {\n            sb.reset();\n            let hadInvalidLine = false;\n            const wasInvalid = [];\n            for (let i = 0; i < linesLength; i++) {\n                const line = lines[i];\n                wasInvalid[i] = false;\n                if (wasNew[i]) {\n                    // line was new\n                    continue;\n                }\n                const renderResult = line.renderLine(i + rendLineNumberStart, deltaTop[i], this.viewportData.lineHeight, this.viewportData, sb);\n                if (!renderResult) {\n                    // line does not need rendering\n                    continue;\n                }\n                wasInvalid[i] = true;\n                hadInvalidLine = true;\n            }\n            if (hadInvalidLine) {\n                this._finishRenderingInvalidLines(ctx, sb.build(), wasInvalid);\n            }\n        }\n    }\n}\nViewLayerRenderer._ttPolicy = createTrustedTypesPolicy('editorViewLayer', { createHTML: value => value });\nViewLayerRenderer._sb = new StringBuilder(100000);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { VisibleLinesCollection } from './viewLayer.js';\nimport { ViewPart } from './viewPart.js';\nexport class ViewOverlays extends ViewPart {\n    constructor(context) {\n        super(context);\n        this._visibleLines = new VisibleLinesCollection(this);\n        this.domNode = this._visibleLines.domNode;\n        const options = this._context.configuration.options;\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        applyFontInfo(this.domNode, fontInfo);\n        this._dynamicOverlays = [];\n        this._isFocused = false;\n        this.domNode.setClassName('view-overlays');\n    }\n    shouldRender() {\n        if (super.shouldRender()) {\n            return true;\n        }\n        for (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n            const dynamicOverlay = this._dynamicOverlays[i];\n            if (dynamicOverlay.shouldRender()) {\n                return true;\n            }\n        }\n        return false;\n    }\n    dispose() {\n        super.dispose();\n        for (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n            const dynamicOverlay = this._dynamicOverlays[i];\n            dynamicOverlay.dispose();\n        }\n        this._dynamicOverlays = [];\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    // ---- begin IVisibleLinesHost\n    createVisibleLine() {\n        return new ViewOverlayLine(this._dynamicOverlays);\n    }\n    // ---- end IVisibleLinesHost\n    addDynamicOverlay(overlay) {\n        this._dynamicOverlays.push(overlay);\n    }\n    // ----- event handlers\n    onConfigurationChanged(e) {\n        this._visibleLines.onConfigurationChanged(e);\n        const options = this._context.configuration.options;\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        applyFontInfo(this.domNode, fontInfo);\n        return true;\n    }\n    onFlushed(e) {\n        return this._visibleLines.onFlushed(e);\n    }\n    onFocusChanged(e) {\n        this._isFocused = e.isFocused;\n        return true;\n    }\n    onLinesChanged(e) {\n        return this._visibleLines.onLinesChanged(e);\n    }\n    onLinesDeleted(e) {\n        return this._visibleLines.onLinesDeleted(e);\n    }\n    onLinesInserted(e) {\n        return this._visibleLines.onLinesInserted(e);\n    }\n    onScrollChanged(e) {\n        return this._visibleLines.onScrollChanged(e) || true;\n    }\n    onTokensChanged(e) {\n        return this._visibleLines.onTokensChanged(e);\n    }\n    onZonesChanged(e) {\n        return this._visibleLines.onZonesChanged(e);\n    }\n    // ----- end event handlers\n    prepareRender(ctx) {\n        const toRender = this._dynamicOverlays.filter(overlay => overlay.shouldRender());\n        for (let i = 0, len = toRender.length; i < len; i++) {\n            const dynamicOverlay = toRender[i];\n            dynamicOverlay.prepareRender(ctx);\n            dynamicOverlay.onDidRender();\n        }\n    }\n    render(ctx) {\n        // Overwriting to bypass `shouldRender` flag\n        this._viewOverlaysRender(ctx);\n        this.domNode.toggleClassName('focused', this._isFocused);\n    }\n    _viewOverlaysRender(ctx) {\n        this._visibleLines.renderLines(ctx.viewportData);\n    }\n}\nexport class ViewOverlayLine {\n    constructor(dynamicOverlays) {\n        this._dynamicOverlays = dynamicOverlays;\n        this._domNode = null;\n        this._renderedContent = null;\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            return null;\n        }\n        return this._domNode.domNode;\n    }\n    setDomNode(domNode) {\n        this._domNode = createFastDomNode(domNode);\n    }\n    onContentChanged() {\n        // Nothing\n    }\n    onTokensChanged() {\n        // Nothing\n    }\n    renderLine(lineNumber, deltaTop, lineHeight, viewportData, sb) {\n        let result = '';\n        for (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n            const dynamicOverlay = this._dynamicOverlays[i];\n            result += dynamicOverlay.render(viewportData.startLineNumber, lineNumber);\n        }\n        if (this._renderedContent === result) {\n            // No rendering needed\n            return false;\n        }\n        this._renderedContent = result;\n        sb.appendString('<div style=\"top:');\n        sb.appendString(String(deltaTop));\n        sb.appendString('px;height:');\n        sb.appendString(String(lineHeight));\n        sb.appendString('px;\">');\n        sb.appendString(result);\n        sb.appendString('</div>');\n        return true;\n    }\n    layoutLine(lineNumber, deltaTop, lineHeight) {\n        if (this._domNode) {\n            this._domNode.setTop(deltaTop);\n            this._domNode.setHeight(lineHeight);\n        }\n    }\n}\nexport class ContentViewOverlays extends ViewOverlays {\n    constructor(context) {\n        super(context);\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(145 /* EditorOption.layoutInfo */);\n        this._contentWidth = layoutInfo.contentWidth;\n        this.domNode.setHeight(0);\n    }\n    // --- begin event handlers\n    onConfigurationChanged(e) {\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(145 /* EditorOption.layoutInfo */);\n        this._contentWidth = layoutInfo.contentWidth;\n        return super.onConfigurationChanged(e) || true;\n    }\n    onScrollChanged(e) {\n        return super.onScrollChanged(e) || e.scrollWidthChanged;\n    }\n    // --- end event handlers\n    _viewOverlaysRender(ctx) {\n        super._viewOverlaysRender(ctx);\n        this.domNode.setWidth(Math.max(ctx.scrollWidth, this._contentWidth));\n    }\n}\nexport class MarginViewOverlays extends ViewOverlays {\n    constructor(context) {\n        super(context);\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(145 /* EditorOption.layoutInfo */);\n        this._contentLeft = layoutInfo.contentLeft;\n        this.domNode.setClassName('margin-view-overlays');\n        this.domNode.setWidth(1);\n        applyFontInfo(this.domNode, options.get(50 /* EditorOption.fontInfo */));\n    }\n    onConfigurationChanged(e) {\n        const options = this._context.configuration.options;\n        applyFontInfo(this.domNode, options.get(50 /* EditorOption.fontInfo */));\n        const layoutInfo = options.get(145 /* EditorOption.layoutInfo */);\n        this._contentLeft = layoutInfo.contentLeft;\n        return super.onConfigurationChanged(e) || true;\n    }\n    onScrollChanged(e) {\n        return super.onScrollChanged(e) || e.scrollHeightChanged;\n    }\n    _viewOverlaysRender(ctx) {\n        super._viewOverlaysRender(ctx);\n        const height = Math.min(ctx.scrollHeight, 1000000);\n        this.domNode.setHeight(height);\n        this.domNode.setWidth(this._contentLeft);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ViewEventHandler } from '../../common/viewEventHandler.js';\nexport class ViewPart extends ViewEventHandler {\n    constructor(context) {\n        super();\n        this._context = context;\n        this._context.addEventHandler(this);\n    }\n    dispose() {\n        this._context.removeEventHandler(this);\n        super.dispose();\n    }\n}\nexport class PartFingerprints {\n    static write(target, partId) {\n        target.setAttribute('data-mprt', String(partId));\n    }\n    static read(target) {\n        const r = target.getAttribute('data-mprt');\n        if (r === null) {\n            return 0 /* PartFingerprint.None */;\n        }\n        return parseInt(r, 10);\n    }\n    static collect(child, stopAt) {\n        const result = [];\n        let resultLen = 0;\n        while (child && child !== child.ownerDocument.body) {\n            if (child === stopAt) {\n                break;\n            }\n            if (child.nodeType === child.ELEMENT_NODE) {\n                result[resultLen++] = this.read(child);\n            }\n            child = child.parentElement;\n        }\n        const r = new Uint8Array(resultLen);\n        for (let i = 0; i < resultLen; i++) {\n            r[i] = result[resultLen - i - 1];\n        }\n        return r;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Position } from '../../common/core/position.js';\nexport class ViewUserInputEvents {\n    constructor(coordinatesConverter) {\n        this.onKeyDown = null;\n        this.onKeyUp = null;\n        this.onContextMenu = null;\n        this.onMouseMove = null;\n        this.onMouseLeave = null;\n        this.onMouseDown = null;\n        this.onMouseUp = null;\n        this.onMouseDrag = null;\n        this.onMouseDrop = null;\n        this.onMouseDropCanceled = null;\n        this.onMouseWheel = null;\n        this._coordinatesConverter = coordinatesConverter;\n    }\n    emitKeyDown(e) {\n        var _a;\n        (_a = this.onKeyDown) === null || _a === void 0 ? void 0 : _a.call(this, e);\n    }\n    emitKeyUp(e) {\n        var _a;\n        (_a = this.onKeyUp) === null || _a === void 0 ? void 0 : _a.call(this, e);\n    }\n    emitContextMenu(e) {\n        var _a;\n        (_a = this.onContextMenu) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseMove(e) {\n        var _a;\n        (_a = this.onMouseMove) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseLeave(e) {\n        var _a;\n        (_a = this.onMouseLeave) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDown(e) {\n        var _a;\n        (_a = this.onMouseDown) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseUp(e) {\n        var _a;\n        (_a = this.onMouseUp) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDrag(e) {\n        var _a;\n        (_a = this.onMouseDrag) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDrop(e) {\n        var _a;\n        (_a = this.onMouseDrop) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDropCanceled() {\n        var _a;\n        (_a = this.onMouseDropCanceled) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n    emitMouseWheel(e) {\n        var _a;\n        (_a = this.onMouseWheel) === null || _a === void 0 ? void 0 : _a.call(this, e);\n    }\n    _convertViewToModelMouseEvent(e) {\n        if (e.target) {\n            return {\n                event: e.event,\n                target: this._convertViewToModelMouseTarget(e.target)\n            };\n        }\n        return e;\n    }\n    _convertViewToModelMouseTarget(target) {\n        return ViewUserInputEvents.convertViewToModelMouseTarget(target, this._coordinatesConverter);\n    }\n    static convertViewToModelMouseTarget(target, coordinatesConverter) {\n        const result = { ...target };\n        if (result.position) {\n            result.position = coordinatesConverter.convertViewPositionToModelPosition(result.position);\n        }\n        if (result.range) {\n            result.range = coordinatesConverter.convertViewRangeToModelRange(result.range);\n        }\n        if (result.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */ || result.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */) {\n            result.detail = this.convertViewToModelViewZoneData(result.detail, coordinatesConverter);\n        }\n        return result;\n    }\n    static convertViewToModelViewZoneData(data, coordinatesConverter) {\n        return {\n            viewZoneId: data.viewZoneId,\n            positionBefore: data.positionBefore ? coordinatesConverter.convertViewPositionToModelPosition(data.positionBefore) : data.positionBefore,\n            positionAfter: data.positionAfter ? coordinatesConverter.convertViewPositionToModelPosition(data.positionAfter) : data.positionAfter,\n            position: coordinatesConverter.convertViewPositionToModelPosition(data.position),\n            afterLineNumber: coordinatesConverter.convertViewPositionToModelPosition(new Position(data.afterLineNumber, 1)).lineNumber,\n        };\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getWindow, runWhenWindowIdle } from '../../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Disposable, DisposableMap } from '../../../../base/common/lifecycle.js';\nexport class CodeEditorContributions extends Disposable {\n    constructor() {\n        super();\n        this._editor = null;\n        this._instantiationService = null;\n        /**\n         * Contains all instantiated contributions.\n         */\n        this._instances = this._register(new DisposableMap());\n        /**\n         * Contains contributions which are not yet instantiated.\n         */\n        this._pending = new Map();\n        /**\n         * Tracks which instantiation kinds are still left in `_pending`.\n         */\n        this._finishedInstantiation = [];\n        this._finishedInstantiation[0 /* EditorContributionInstantiation.Eager */] = false;\n        this._finishedInstantiation[1 /* EditorContributionInstantiation.AfterFirstRender */] = false;\n        this._finishedInstantiation[2 /* EditorContributionInstantiation.BeforeFirstInteraction */] = false;\n        this._finishedInstantiation[3 /* EditorContributionInstantiation.Eventually */] = false;\n    }\n    initialize(editor, contributions, instantiationService) {\n        this._editor = editor;\n        this._instantiationService = instantiationService;\n        for (const desc of contributions) {\n            if (this._pending.has(desc.id)) {\n                onUnexpectedError(new Error(`Cannot have two contributions with the same id ${desc.id}`));\n                continue;\n            }\n            this._pending.set(desc.id, desc);\n        }\n        this._instantiateSome(0 /* EditorContributionInstantiation.Eager */);\n        // AfterFirstRender\n        // - these extensions will be instantiated at the latest 50ms after the first render.\n        // - but if there is idle time, we will instantiate them sooner.\n        this._register(runWhenWindowIdle(getWindow(this._editor.getDomNode()), () => {\n            this._instantiateSome(1 /* EditorContributionInstantiation.AfterFirstRender */);\n        }));\n        // BeforeFirstInteraction\n        // - these extensions will be instantiated at the latest before a mouse or a keyboard event.\n        // - but if there is idle time, we will instantiate them sooner.\n        this._register(runWhenWindowIdle(getWindow(this._editor.getDomNode()), () => {\n            this._instantiateSome(2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n        }));\n        // Eventually\n        // - these extensions will only be instantiated when there is idle time.\n        // - since there is no guarantee that there will ever be idle time, we set a timeout of 5s here.\n        this._register(runWhenWindowIdle(getWindow(this._editor.getDomNode()), () => {\n            this._instantiateSome(3 /* EditorContributionInstantiation.Eventually */);\n        }, 5000));\n    }\n    saveViewState() {\n        const contributionsState = {};\n        for (const [id, contribution] of this._instances) {\n            if (typeof contribution.saveViewState === 'function') {\n                contributionsState[id] = contribution.saveViewState();\n            }\n        }\n        return contributionsState;\n    }\n    restoreViewState(contributionsState) {\n        for (const [id, contribution] of this._instances) {\n            if (typeof contribution.restoreViewState === 'function') {\n                contribution.restoreViewState(contributionsState[id]);\n            }\n        }\n    }\n    get(id) {\n        this._instantiateById(id);\n        return this._instances.get(id) || null;\n    }\n    onBeforeInteractionEvent() {\n        // this method is called very often by the editor!\n        this._instantiateSome(2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n    }\n    onAfterModelAttached() {\n        var _a;\n        return runWhenWindowIdle(getWindow((_a = this._editor) === null || _a === void 0 ? void 0 : _a.getDomNode()), () => {\n            this._instantiateSome(1 /* EditorContributionInstantiation.AfterFirstRender */);\n        }, 50);\n    }\n    _instantiateSome(instantiation) {\n        if (this._finishedInstantiation[instantiation]) {\n            // already done with this instantiation!\n            return;\n        }\n        this._finishedInstantiation[instantiation] = true;\n        const contribs = this._findPendingContributionsByInstantiation(instantiation);\n        for (const contrib of contribs) {\n            this._instantiateById(contrib.id);\n        }\n    }\n    _findPendingContributionsByInstantiation(instantiation) {\n        const result = [];\n        for (const [, desc] of this._pending) {\n            if (desc.instantiation === instantiation) {\n                result.push(desc);\n            }\n        }\n        return result;\n    }\n    _instantiateById(id) {\n        const desc = this._pending.get(id);\n        if (!desc) {\n            return;\n        }\n        this._pending.delete(id);\n        if (!this._instantiationService || !this._editor) {\n            throw new Error(`Cannot instantiate contributions before being initialized!`);\n        }\n        try {\n            const instance = this._instantiationService.createInstance(desc.ctor, this._editor);\n            this._instances.set(desc.id, instance);\n            if (typeof instance.restoreViewState === 'function' && desc.instantiation !== 0 /* EditorContributionInstantiation.Eager */) {\n                console.warn(`Editor contribution '${desc.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`);\n            }\n        }\n        catch (err) {\n            onUnexpectedError(err);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar CodeEditorWidget_1;\nimport '../../services/markerDecorations.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter, createEventDeliveryQueue } from '../../../../base/common/event.js';\nimport { Disposable, dispose } from '../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../base/common/network.js';\nimport './editor.css';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { EditorConfiguration } from '../../config/editorConfiguration.js';\nimport { TabFocus } from '../../config/tabFocus.js';\nimport { EditorExtensionsRegistry } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { View } from '../../view.js';\nimport { DOMLineBreaksComputerFactory } from '../../view/domLineBreaksComputer.js';\nimport { ViewUserInputEvents } from '../../view/viewUserInputEvents.js';\nimport { CodeEditorContributions } from './codeEditorContributions.js';\nimport { filterValidationDecorations } from '../../../common/config/editorOptions.js';\nimport { CursorColumns } from '../../../common/core/cursorColumns.js';\nimport { editorUnnecessaryCodeOpacity } from '../../../common/core/editorColorRegistry.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { WordOperations } from '../../../common/cursor/cursorWordOperations.js';\nimport { InternalEditorAction } from '../../../common/editorAction.js';\nimport * as editorCommon from '../../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { MonospaceLineBreaksComputerFactory } from '../../../common/viewModel/monospaceLineBreaksComputer.js';\nimport { ViewModel } from '../../../common/viewModel/viewModelImpl.js';\nimport * as nls from '../../../../nls.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { INotificationService, Severity } from '../../../../platform/notification/common/notification.js';\nimport { editorErrorForeground, editorHintForeground, editorInfoForeground, editorWarningForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService, registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nlet CodeEditorWidget = CodeEditorWidget_1 = class CodeEditorWidget extends Disposable {\n    //#endregion\n    get isSimpleWidget() {\n        return this._configuration.isSimpleWidget;\n    }\n    get contextMenuId() {\n        return this._configuration.contextMenuId;\n    }\n    constructor(domElement, _options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        var _a, _b;\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        //#region Eventing\n        this._deliveryQueue = createEventDeliveryQueue();\n        this._contributions = this._register(new CodeEditorContributions());\n        this._onDidDispose = this._register(new Emitter());\n        this.onDidDispose = this._onDidDispose.event;\n        this._onDidChangeModelContent = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelContent = this._onDidChangeModelContent.event;\n        this._onDidChangeModelLanguage = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelLanguage = this._onDidChangeModelLanguage.event;\n        this._onDidChangeModelLanguageConfiguration = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelLanguageConfiguration = this._onDidChangeModelLanguageConfiguration.event;\n        this._onDidChangeModelOptions = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelOptions = this._onDidChangeModelOptions.event;\n        this._onDidChangeModelDecorations = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelDecorations = this._onDidChangeModelDecorations.event;\n        this._onDidChangeModelTokens = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelTokens = this._onDidChangeModelTokens.event;\n        this._onDidChangeConfiguration = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n        this._onWillChangeModel = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onWillChangeModel = this._onWillChangeModel.event;\n        this._onDidChangeModel = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModel = this._onDidChangeModel.event;\n        this._onDidChangeCursorPosition = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeCursorPosition = this._onDidChangeCursorPosition.event;\n        this._onDidChangeCursorSelection = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeCursorSelection = this._onDidChangeCursorSelection.event;\n        this._onDidAttemptReadOnlyEdit = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidAttemptReadOnlyEdit = this._onDidAttemptReadOnlyEdit.event;\n        this._onDidLayoutChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidLayoutChange = this._onDidLayoutChange.event;\n        this._editorTextFocus = this._register(new BooleanEventEmitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidFocusEditorText = this._editorTextFocus.onDidChangeToTrue;\n        this.onDidBlurEditorText = this._editorTextFocus.onDidChangeToFalse;\n        this._editorWidgetFocus = this._register(new BooleanEventEmitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidFocusEditorWidget = this._editorWidgetFocus.onDidChangeToTrue;\n        this.onDidBlurEditorWidget = this._editorWidgetFocus.onDidChangeToFalse;\n        this._onWillType = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onWillType = this._onWillType.event;\n        this._onDidType = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidType = this._onDidType.event;\n        this._onDidCompositionStart = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidCompositionStart = this._onDidCompositionStart.event;\n        this._onDidCompositionEnd = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidCompositionEnd = this._onDidCompositionEnd.event;\n        this._onDidPaste = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidPaste = this._onDidPaste.event;\n        this._onMouseUp = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseUp = this._onMouseUp.event;\n        this._onMouseDown = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDown = this._onMouseDown.event;\n        this._onMouseDrag = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDrag = this._onMouseDrag.event;\n        this._onMouseDrop = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDrop = this._onMouseDrop.event;\n        this._onMouseDropCanceled = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDropCanceled = this._onMouseDropCanceled.event;\n        this._onDropIntoEditor = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDropIntoEditor = this._onDropIntoEditor.event;\n        this._onContextMenu = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onContextMenu = this._onContextMenu.event;\n        this._onMouseMove = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseMove = this._onMouseMove.event;\n        this._onMouseLeave = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseLeave = this._onMouseLeave.event;\n        this._onMouseWheel = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseWheel = this._onMouseWheel.event;\n        this._onKeyUp = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onKeyUp = this._onKeyUp.event;\n        this._onKeyDown = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onKeyDown = this._onKeyDown.event;\n        this._onDidContentSizeChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidContentSizeChange = this._onDidContentSizeChange.event;\n        this._onDidScrollChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidScrollChange = this._onDidScrollChange.event;\n        this._onDidChangeViewZones = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeViewZones = this._onDidChangeViewZones.event;\n        this._onDidChangeHiddenAreas = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeHiddenAreas = this._onDidChangeHiddenAreas.event;\n        this._actions = new Map();\n        this._bannerDomNode = null;\n        this._dropIntoEditorDecorations = this.createDecorationsCollection();\n        codeEditorService.willCreateCodeEditor();\n        const options = { ..._options };\n        this._domElement = domElement;\n        this._overflowWidgetsDomNode = options.overflowWidgetsDomNode;\n        delete options.overflowWidgetsDomNode;\n        this._id = (++EDITOR_ID);\n        this._decorationTypeKeysToIds = {};\n        this._decorationTypeSubtypes = {};\n        this._telemetryData = codeEditorWidgetOptions.telemetryData;\n        this._configuration = this._register(this._createConfiguration(codeEditorWidgetOptions.isSimpleWidget || false, (_a = codeEditorWidgetOptions.contextMenuId) !== null && _a !== void 0 ? _a : (codeEditorWidgetOptions.isSimpleWidget ? MenuId.SimpleEditorContext : MenuId.EditorContext), options, accessibilityService));\n        this._register(this._configuration.onDidChange((e) => {\n            this._onDidChangeConfiguration.fire(e);\n            const options = this._configuration.options;\n            if (e.hasChanged(145 /* EditorOption.layoutInfo */)) {\n                const layoutInfo = options.get(145 /* EditorOption.layoutInfo */);\n                this._onDidLayoutChange.fire(layoutInfo);\n            }\n        }));\n        this._contextKeyService = this._register(contextKeyService.createScoped(this._domElement));\n        this._notificationService = notificationService;\n        this._codeEditorService = codeEditorService;\n        this._commandService = commandService;\n        this._themeService = themeService;\n        this._register(new EditorContextKeysManager(this, this._contextKeyService));\n        this._register(new EditorModeContext(this, this._contextKeyService, languageFeaturesService));\n        this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._modelData = null;\n        this._focusTracker = new CodeEditorWidgetFocusTracker(domElement, this._overflowWidgetsDomNode);\n        this._register(this._focusTracker.onChange(() => {\n            this._editorWidgetFocus.setValue(this._focusTracker.hasFocus());\n        }));\n        this._contentWidgets = {};\n        this._overlayWidgets = {};\n        this._glyphMarginWidgets = {};\n        let contributions;\n        if (Array.isArray(codeEditorWidgetOptions.contributions)) {\n            contributions = codeEditorWidgetOptions.contributions;\n        }\n        else {\n            contributions = EditorExtensionsRegistry.getEditorContributions();\n        }\n        this._contributions.initialize(this, contributions, this._instantiationService);\n        for (const action of EditorExtensionsRegistry.getEditorActions()) {\n            if (this._actions.has(action.id)) {\n                onUnexpectedError(new Error(`Cannot have two actions with the same id ${action.id}`));\n                continue;\n            }\n            const internalAction = new InternalEditorAction(action.id, action.label, action.alias, action.metadata, (_b = action.precondition) !== null && _b !== void 0 ? _b : undefined, (args) => {\n                return this._instantiationService.invokeFunction((accessor) => {\n                    return Promise.resolve(action.runEditorCommand(accessor, this, args));\n                });\n            }, this._contextKeyService);\n            this._actions.set(internalAction.id, internalAction);\n        }\n        const isDropIntoEnabled = () => {\n            return !this._configuration.options.get(91 /* EditorOption.readOnly */)\n                && this._configuration.options.get(36 /* EditorOption.dropIntoEditor */).enabled;\n        };\n        this._register(new dom.DragAndDropObserver(this._domElement, {\n            onDragOver: e => {\n                if (!isDropIntoEnabled()) {\n                    return;\n                }\n                const target = this.getTargetAtClientPoint(e.clientX, e.clientY);\n                if (target === null || target === void 0 ? void 0 : target.position) {\n                    this.showDropIndicatorAt(target.position);\n                }\n            },\n            onDrop: async (e) => {\n                if (!isDropIntoEnabled()) {\n                    return;\n                }\n                this.removeDropIndicator();\n                if (!e.dataTransfer) {\n                    return;\n                }\n                const target = this.getTargetAtClientPoint(e.clientX, e.clientY);\n                if (target === null || target === void 0 ? void 0 : target.position) {\n                    this._onDropIntoEditor.fire({ position: target.position, event: e });\n                }\n            },\n            onDragLeave: () => {\n                this.removeDropIndicator();\n            },\n            onDragEnd: () => {\n                this.removeDropIndicator();\n            },\n        }));\n        this._codeEditorService.addCodeEditor(this);\n    }\n    writeScreenReaderContent(reason) {\n        var _a;\n        (_a = this._modelData) === null || _a === void 0 ? void 0 : _a.view.writeScreenReaderContent(reason);\n    }\n    _createConfiguration(isSimpleWidget, contextMenuId, options, accessibilityService) {\n        return new EditorConfiguration(isSimpleWidget, contextMenuId, options, this._domElement, accessibilityService);\n    }\n    getId() {\n        return this.getEditorType() + ':' + this._id;\n    }\n    getEditorType() {\n        return editorCommon.EditorType.ICodeEditor;\n    }\n    dispose() {\n        this._codeEditorService.removeCodeEditor(this);\n        this._focusTracker.dispose();\n        this._actions.clear();\n        this._contentWidgets = {};\n        this._overlayWidgets = {};\n        this._removeDecorationTypes();\n        this._postDetachModelCleanup(this._detachModel());\n        this._onDidDispose.fire();\n        super.dispose();\n    }\n    invokeWithinContext(fn) {\n        return this._instantiationService.invokeFunction(fn);\n    }\n    updateOptions(newOptions) {\n        this._configuration.updateOptions(newOptions || {});\n    }\n    getOptions() {\n        return this._configuration.options;\n    }\n    getOption(id) {\n        return this._configuration.options.get(id);\n    }\n    getRawOptions() {\n        return this._configuration.getRawOptions();\n    }\n    getOverflowWidgetsDomNode() {\n        return this._overflowWidgetsDomNode;\n    }\n    getConfiguredWordAtPosition(position) {\n        if (!this._modelData) {\n            return null;\n        }\n        return WordOperations.getWordAtPosition(this._modelData.model, this._configuration.options.get(131 /* EditorOption.wordSeparators */), this._configuration.options.get(130 /* EditorOption.wordSegmenterLocales */), position);\n    }\n    getValue(options = null) {\n        if (!this._modelData) {\n            return '';\n        }\n        const preserveBOM = (options && options.preserveBOM) ? true : false;\n        let eolPreference = 0 /* EndOfLinePreference.TextDefined */;\n        if (options && options.lineEnding && options.lineEnding === '\\n') {\n            eolPreference = 1 /* EndOfLinePreference.LF */;\n        }\n        else if (options && options.lineEnding && options.lineEnding === '\\r\\n') {\n            eolPreference = 2 /* EndOfLinePreference.CRLF */;\n        }\n        return this._modelData.model.getValue(eolPreference, preserveBOM);\n    }\n    setValue(newValue) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.model.setValue(newValue);\n    }\n    getModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model;\n    }\n    setModel(_model = null) {\n        var _a;\n        const model = _model;\n        if (this._modelData === null && model === null) {\n            // Current model is the new model\n            return;\n        }\n        if (this._modelData && this._modelData.model === model) {\n            // Current model is the new model\n            return;\n        }\n        const e = {\n            oldModelUrl: ((_a = this._modelData) === null || _a === void 0 ? void 0 : _a.model.uri) || null,\n            newModelUrl: (model === null || model === void 0 ? void 0 : model.uri) || null\n        };\n        this._onWillChangeModel.fire(e);\n        const hasTextFocus = this.hasTextFocus();\n        const detachedModel = this._detachModel();\n        this._attachModel(model);\n        if (hasTextFocus && this.hasModel()) {\n            this.focus();\n        }\n        this._removeDecorationTypes();\n        this._onDidChangeModel.fire(e);\n        this._postDetachModelCleanup(detachedModel);\n        this._contributionsDisposable = this._contributions.onAfterModelAttached();\n    }\n    _removeDecorationTypes() {\n        this._decorationTypeKeysToIds = {};\n        if (this._decorationTypeSubtypes) {\n            for (const decorationType in this._decorationTypeSubtypes) {\n                const subTypes = this._decorationTypeSubtypes[decorationType];\n                for (const subType in subTypes) {\n                    this._removeDecorationType(decorationType + '-' + subType);\n                }\n            }\n            this._decorationTypeSubtypes = {};\n        }\n    }\n    getVisibleRanges() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.getVisibleRanges();\n    }\n    getVisibleRangesPlusViewportAboveBelow() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow();\n    }\n    getWhitespaces() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.viewLayout.getWhitespaces();\n    }\n    static _getVerticalOffsetAfterPosition(modelData, modelLineNumber, modelColumn, includeViewZones) {\n        const modelPosition = modelData.model.validatePosition({\n            lineNumber: modelLineNumber,\n            column: modelColumn\n        });\n        const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n        return modelData.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(viewPosition.lineNumber, includeViewZones);\n    }\n    getTopForLineNumber(lineNumber, includeViewZones = false) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget_1._getVerticalOffsetForPosition(this._modelData, lineNumber, 1, includeViewZones);\n    }\n    getTopForPosition(lineNumber, column) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget_1._getVerticalOffsetForPosition(this._modelData, lineNumber, column, false);\n    }\n    static _getVerticalOffsetForPosition(modelData, modelLineNumber, modelColumn, includeViewZones = false) {\n        const modelPosition = modelData.model.validatePosition({\n            lineNumber: modelLineNumber,\n            column: modelColumn\n        });\n        const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n        return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber, includeViewZones);\n    }\n    getBottomForLineNumber(lineNumber, includeViewZones = false) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget_1._getVerticalOffsetAfterPosition(this._modelData, lineNumber, 1, includeViewZones);\n    }\n    setHiddenAreas(ranges, source) {\n        var _a;\n        (_a = this._modelData) === null || _a === void 0 ? void 0 : _a.viewModel.setHiddenAreas(ranges.map(r => Range.lift(r)), source);\n    }\n    getVisibleColumnFromPosition(rawPosition) {\n        if (!this._modelData) {\n            return rawPosition.column;\n        }\n        const position = this._modelData.model.validatePosition(rawPosition);\n        const tabSize = this._modelData.model.getOptions().tabSize;\n        return CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber), position.column, tabSize) + 1;\n    }\n    getPosition() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getPosition();\n    }\n    setPosition(position, source = 'api') {\n        if (!this._modelData) {\n            return;\n        }\n        if (!Position.isIPosition(position)) {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.setSelections(source, [{\n                selectionStartLineNumber: position.lineNumber,\n                selectionStartColumn: position.column,\n                positionLineNumber: position.lineNumber,\n                positionColumn: position.column\n            }]);\n    }\n    _sendRevealRange(modelRange, verticalType, revealHorizontal, scrollType) {\n        if (!this._modelData) {\n            return;\n        }\n        if (!Range.isIRange(modelRange)) {\n            throw new Error('Invalid arguments');\n        }\n        const validatedModelRange = this._modelData.model.validateRange(modelRange);\n        const viewRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);\n        this._modelData.viewModel.revealRange('api', revealHorizontal, viewRange, verticalType, scrollType);\n    }\n    revealLine(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 0 /* VerticalRevealType.Simple */, scrollType);\n    }\n    revealLineInCenter(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 1 /* VerticalRevealType.Center */, scrollType);\n    }\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 2 /* VerticalRevealType.CenterIfOutsideViewport */, scrollType);\n    }\n    revealLineNearTop(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 5 /* VerticalRevealType.NearTop */, scrollType);\n    }\n    _revealLine(lineNumber, revealType, scrollType) {\n        if (typeof lineNumber !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(lineNumber, 1, lineNumber, 1), revealType, false, scrollType);\n    }\n    revealPosition(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 0 /* VerticalRevealType.Simple */, true, scrollType);\n    }\n    revealPositionInCenter(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 1 /* VerticalRevealType.Center */, true, scrollType);\n    }\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 2 /* VerticalRevealType.CenterIfOutsideViewport */, true, scrollType);\n    }\n    revealPositionNearTop(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 5 /* VerticalRevealType.NearTop */, true, scrollType);\n    }\n    _revealPosition(position, verticalType, revealHorizontal, scrollType) {\n        if (!Position.isIPosition(position)) {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(position.lineNumber, position.column, position.lineNumber, position.column), verticalType, revealHorizontal, scrollType);\n    }\n    getSelection() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getSelection();\n    }\n    getSelections() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getSelections();\n    }\n    setSelection(something, source = 'api') {\n        const isSelection = Selection.isISelection(something);\n        const isRange = Range.isIRange(something);\n        if (!isSelection && !isRange) {\n            throw new Error('Invalid arguments');\n        }\n        if (isSelection) {\n            this._setSelectionImpl(something, source);\n        }\n        else if (isRange) {\n            // act as if it was an IRange\n            const selection = {\n                selectionStartLineNumber: something.startLineNumber,\n                selectionStartColumn: something.startColumn,\n                positionLineNumber: something.endLineNumber,\n                positionColumn: something.endColumn\n            };\n            this._setSelectionImpl(selection, source);\n        }\n    }\n    _setSelectionImpl(sel, source) {\n        if (!this._modelData) {\n            return;\n        }\n        const selection = new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\n        this._modelData.viewModel.setSelections(source, [selection]);\n    }\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 0 /* VerticalRevealType.Simple */, scrollType);\n    }\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 1 /* VerticalRevealType.Center */, scrollType);\n    }\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 2 /* VerticalRevealType.CenterIfOutsideViewport */, scrollType);\n    }\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 5 /* VerticalRevealType.NearTop */, scrollType);\n    }\n    _revealLines(startLineNumber, endLineNumber, verticalType, scrollType) {\n        if (typeof startLineNumber !== 'number' || typeof endLineNumber !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(startLineNumber, 1, endLineNumber, 1), verticalType, false, scrollType);\n    }\n    revealRange(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\n        this._revealRange(range, revealVerticalInCenter ? 1 /* VerticalRevealType.Center */ : 0 /* VerticalRevealType.Simple */, revealHorizontal, scrollType);\n    }\n    revealRangeInCenter(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 1 /* VerticalRevealType.Center */, true, scrollType);\n    }\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 2 /* VerticalRevealType.CenterIfOutsideViewport */, true, scrollType);\n    }\n    revealRangeNearTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 5 /* VerticalRevealType.NearTop */, true, scrollType);\n    }\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 6 /* VerticalRevealType.NearTopIfOutsideViewport */, true, scrollType);\n    }\n    revealRangeAtTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 3 /* VerticalRevealType.Top */, true, scrollType);\n    }\n    _revealRange(range, verticalType, revealHorizontal, scrollType) {\n        if (!Range.isIRange(range)) {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(Range.lift(range), verticalType, revealHorizontal, scrollType);\n    }\n    setSelections(ranges, source = 'api', reason = 0 /* CursorChangeReason.NotSet */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (!ranges || ranges.length === 0) {\n            throw new Error('Invalid arguments');\n        }\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            if (!Selection.isISelection(ranges[i])) {\n                throw new Error('Invalid arguments');\n            }\n        }\n        this._modelData.viewModel.setSelections(source, ranges, reason);\n    }\n    getContentWidth() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getContentWidth();\n    }\n    getScrollWidth() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getScrollWidth();\n    }\n    getScrollLeft() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getCurrentScrollLeft();\n    }\n    getContentHeight() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getContentHeight();\n    }\n    getScrollHeight() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getScrollHeight();\n    }\n    getScrollTop() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getCurrentScrollTop();\n    }\n    setScrollLeft(newScrollLeft, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (typeof newScrollLeft !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition({\n            scrollLeft: newScrollLeft\n        }, scrollType);\n    }\n    setScrollTop(newScrollTop, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (typeof newScrollTop !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition({\n            scrollTop: newScrollTop\n        }, scrollType);\n    }\n    setScrollPosition(position, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition(position, scrollType);\n    }\n    hasPendingScrollAnimation() {\n        if (!this._modelData) {\n            return false;\n        }\n        return this._modelData.viewModel.viewLayout.hasPendingScrollAnimation();\n    }\n    saveViewState() {\n        if (!this._modelData) {\n            return null;\n        }\n        const contributionsState = this._contributions.saveViewState();\n        const cursorState = this._modelData.viewModel.saveCursorState();\n        const viewState = this._modelData.viewModel.saveState();\n        return {\n            cursorState: cursorState,\n            viewState: viewState,\n            contributionsState: contributionsState\n        };\n    }\n    restoreViewState(s) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        const codeEditorState = s;\n        if (codeEditorState && codeEditorState.cursorState && codeEditorState.viewState) {\n            const cursorState = codeEditorState.cursorState;\n            if (Array.isArray(cursorState)) {\n                if (cursorState.length > 0) {\n                    this._modelData.viewModel.restoreCursorState(cursorState);\n                }\n            }\n            else {\n                // Backwards compatibility\n                this._modelData.viewModel.restoreCursorState([cursorState]);\n            }\n            this._contributions.restoreViewState(codeEditorState.contributionsState || {});\n            const reducedState = this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);\n            this._modelData.view.restoreState(reducedState);\n        }\n    }\n    handleInitialized() {\n        var _a;\n        (_a = this._getViewModel()) === null || _a === void 0 ? void 0 : _a.visibleLinesStabilized();\n    }\n    getContribution(id) {\n        return this._contributions.get(id);\n    }\n    getActions() {\n        return Array.from(this._actions.values());\n    }\n    getSupportedActions() {\n        let result = this.getActions();\n        result = result.filter(action => action.isSupported());\n        return result;\n    }\n    getAction(id) {\n        return this._actions.get(id) || null;\n    }\n    trigger(source, handlerId, payload) {\n        payload = payload || {};\n        switch (handlerId) {\n            case \"compositionStart\" /* editorCommon.Handler.CompositionStart */:\n                this._startComposition();\n                return;\n            case \"compositionEnd\" /* editorCommon.Handler.CompositionEnd */:\n                this._endComposition(source);\n                return;\n            case \"type\" /* editorCommon.Handler.Type */: {\n                const args = payload;\n                this._type(source, args.text || '');\n                return;\n            }\n            case \"replacePreviousChar\" /* editorCommon.Handler.ReplacePreviousChar */: {\n                const args = payload;\n                this._compositionType(source, args.text || '', args.replaceCharCnt || 0, 0, 0);\n                return;\n            }\n            case \"compositionType\" /* editorCommon.Handler.CompositionType */: {\n                const args = payload;\n                this._compositionType(source, args.text || '', args.replacePrevCharCnt || 0, args.replaceNextCharCnt || 0, args.positionDelta || 0);\n                return;\n            }\n            case \"paste\" /* editorCommon.Handler.Paste */: {\n                const args = payload;\n                this._paste(source, args.text || '', args.pasteOnNewLine || false, args.multicursorText || null, args.mode || null, args.clipboardEvent);\n                return;\n            }\n            case \"cut\" /* editorCommon.Handler.Cut */:\n                this._cut(source);\n                return;\n        }\n        const action = this.getAction(handlerId);\n        if (action) {\n            Promise.resolve(action.run(payload)).then(undefined, onUnexpectedError);\n            return;\n        }\n        if (!this._modelData) {\n            return;\n        }\n        if (this._triggerEditorCommand(source, handlerId, payload)) {\n            return;\n        }\n        this._triggerCommand(handlerId, payload);\n    }\n    _triggerCommand(handlerId, payload) {\n        this._commandService.executeCommand(handlerId, payload);\n    }\n    _startComposition() {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.startComposition();\n        this._onDidCompositionStart.fire();\n    }\n    _endComposition(source) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.endComposition(source);\n        this._onDidCompositionEnd.fire();\n    }\n    _type(source, text) {\n        if (!this._modelData || text.length === 0) {\n            return;\n        }\n        if (source === 'keyboard') {\n            this._onWillType.fire(text);\n        }\n        this._modelData.viewModel.type(text, source);\n        if (source === 'keyboard') {\n            this._onDidType.fire(text);\n        }\n    }\n    _compositionType(source, text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta, source);\n    }\n    _paste(source, text, pasteOnNewLine, multicursorText, mode, clipboardEvent) {\n        if (!this._modelData) {\n            return;\n        }\n        const viewModel = this._modelData.viewModel;\n        const startPosition = viewModel.getSelection().getStartPosition();\n        viewModel.paste(text, pasteOnNewLine, multicursorText, source);\n        const endPosition = viewModel.getSelection().getStartPosition();\n        if (source === 'keyboard') {\n            this._onDidPaste.fire({\n                clipboardEvent,\n                range: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n                languageId: mode\n            });\n        }\n    }\n    _cut(source) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.cut(source);\n    }\n    _triggerEditorCommand(source, handlerId, payload) {\n        const command = EditorExtensionsRegistry.getEditorCommand(handlerId);\n        if (command) {\n            payload = payload || {};\n            payload.source = source;\n            this._instantiationService.invokeFunction((accessor) => {\n                Promise.resolve(command.runEditorCommand(accessor, this, payload)).then(undefined, onUnexpectedError);\n            });\n            return true;\n        }\n        return false;\n    }\n    _getViewModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel;\n    }\n    pushUndoStop() {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(91 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        this._modelData.model.pushStackElement();\n        return true;\n    }\n    popUndoStop() {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(91 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        this._modelData.model.popStackElement();\n        return true;\n    }\n    executeEdits(source, edits, endCursorState) {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(91 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        let cursorStateComputer;\n        if (!endCursorState) {\n            cursorStateComputer = () => null;\n        }\n        else if (Array.isArray(endCursorState)) {\n            cursorStateComputer = () => endCursorState;\n        }\n        else {\n            cursorStateComputer = endCursorState;\n        }\n        this._modelData.viewModel.executeEdits(source, edits, cursorStateComputer);\n        return true;\n    }\n    executeCommand(source, command) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.executeCommand(command, source);\n    }\n    executeCommands(source, commands) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.executeCommands(commands, source);\n    }\n    createDecorationsCollection(decorations) {\n        return new EditorDecorationsCollection(this, decorations);\n    }\n    changeDecorations(callback) {\n        if (!this._modelData) {\n            // callback will not be called\n            return null;\n        }\n        return this._modelData.model.changeDecorations(callback, this._id);\n    }\n    getLineDecorations(lineNumber) {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model.getLineDecorations(lineNumber, this._id, filterValidationDecorations(this._configuration.options));\n    }\n    getDecorationsInRange(range) {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model.getDecorationsInRange(range, this._id, filterValidationDecorations(this._configuration.options));\n    }\n    /**\n     * @deprecated\n     */\n    deltaDecorations(oldDecorations, newDecorations) {\n        if (!this._modelData) {\n            return [];\n        }\n        if (oldDecorations.length === 0 && newDecorations.length === 0) {\n            return oldDecorations;\n        }\n        return this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id);\n    }\n    removeDecorations(decorationIds) {\n        if (!this._modelData || decorationIds.length === 0) {\n            return;\n        }\n        this._modelData.model.changeDecorations((changeAccessor) => {\n            changeAccessor.deltaDecorations(decorationIds, []);\n        });\n    }\n    removeDecorationsByType(decorationTypeKey) {\n        // remove decorations for type and sub type\n        const oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];\n        if (oldDecorationsIds) {\n            this.changeDecorations(accessor => accessor.deltaDecorations(oldDecorationsIds, []));\n        }\n        if (this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)) {\n            delete this._decorationTypeKeysToIds[decorationTypeKey];\n        }\n        if (this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)) {\n            delete this._decorationTypeSubtypes[decorationTypeKey];\n        }\n    }\n    getLayoutInfo() {\n        const options = this._configuration.options;\n        const layoutInfo = options.get(145 /* EditorOption.layoutInfo */);\n        return layoutInfo;\n    }\n    createOverviewRuler(cssClassName) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.createOverviewRuler(cssClassName);\n    }\n    getContainerDomNode() {\n        return this._domElement;\n    }\n    getDomNode() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.domNode.domNode;\n    }\n    delegateVerticalScrollbarPointerDown(browserEvent) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.delegateVerticalScrollbarPointerDown(browserEvent);\n    }\n    delegateScrollFromMouseWheelEvent(browserEvent) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.delegateScrollFromMouseWheelEvent(browserEvent);\n    }\n    layout(dimension, postponeRendering = false) {\n        this._configuration.observeContainer(dimension);\n        if (!postponeRendering) {\n            this.render();\n        }\n    }\n    focus() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.focus();\n    }\n    hasTextFocus() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return false;\n        }\n        return this._modelData.view.isFocused();\n    }\n    hasWidgetFocus() {\n        return this._focusTracker && this._focusTracker.hasFocus();\n    }\n    addContentWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._contentWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting a content widget with the same id:' + widget.getId());\n        }\n        this._contentWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addContentWidget(widgetData);\n        }\n    }\n    layoutContentWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._contentWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutContentWidget(widgetData);\n            }\n        }\n    }\n    removeContentWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._contentWidgets[widgetId];\n            delete this._contentWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeContentWidget(widgetData);\n            }\n        }\n    }\n    addOverlayWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._overlayWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting an overlay widget with the same id.');\n        }\n        this._overlayWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addOverlayWidget(widgetData);\n        }\n    }\n    layoutOverlayWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._overlayWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutOverlayWidget(widgetData);\n            }\n        }\n    }\n    removeOverlayWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._overlayWidgets[widgetId];\n            delete this._overlayWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeOverlayWidget(widgetData);\n            }\n        }\n    }\n    addGlyphMarginWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._glyphMarginWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting a glyph margin widget with the same id.');\n        }\n        this._glyphMarginWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addGlyphMarginWidget(widgetData);\n        }\n    }\n    layoutGlyphMarginWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._glyphMarginWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._glyphMarginWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutGlyphMarginWidget(widgetData);\n            }\n        }\n    }\n    removeGlyphMarginWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._glyphMarginWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._glyphMarginWidgets[widgetId];\n            delete this._glyphMarginWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeGlyphMarginWidget(widgetData);\n            }\n        }\n    }\n    changeViewZones(callback) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.change(callback);\n    }\n    getTargetAtClientPoint(clientX, clientY) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.getTargetAtClientPoint(clientX, clientY);\n    }\n    getScrolledVisiblePosition(rawPosition) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        const position = this._modelData.model.validatePosition(rawPosition);\n        const options = this._configuration.options;\n        const layoutInfo = options.get(145 /* EditorOption.layoutInfo */);\n        const top = CodeEditorWidget_1._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();\n        const left = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();\n        return {\n            top: top,\n            left: left,\n            height: options.get(67 /* EditorOption.lineHeight */)\n        };\n    }\n    getOffsetForColumn(lineNumber, column) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return -1;\n        }\n        return this._modelData.view.getOffsetForColumn(lineNumber, column);\n    }\n    render(forceRedraw = false) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.viewModel.batchEvents(() => {\n            this._modelData.view.render(true, forceRedraw);\n        });\n    }\n    setAriaOptions(options) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.setAriaOptions(options);\n    }\n    applyFontInfo(target) {\n        applyFontInfo(target, this._configuration.options.get(50 /* EditorOption.fontInfo */));\n    }\n    setBanner(domNode, domNodeHeight) {\n        if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n            this._domElement.removeChild(this._bannerDomNode);\n        }\n        this._bannerDomNode = domNode;\n        this._configuration.setReservedHeight(domNode ? domNodeHeight : 0);\n        if (this._bannerDomNode) {\n            this._domElement.prepend(this._bannerDomNode);\n        }\n    }\n    _attachModel(model) {\n        if (!model) {\n            this._modelData = null;\n            return;\n        }\n        const listenersToRemove = [];\n        this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n        this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());\n        this._configuration.setModelLineCount(model.getLineCount());\n        const attachedView = model.onBeforeAttached();\n        const viewModel = new ViewModel(this._id, this._configuration, model, DOMLineBreaksComputerFactory.create(dom.getWindow(this._domElement)), MonospaceLineBreaksComputerFactory.create(this._configuration.options), (callback) => dom.scheduleAtNextAnimationFrame(dom.getWindow(this._domElement), callback), this.languageConfigurationService, this._themeService, attachedView);\n        // Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model\n        listenersToRemove.push(model.onWillDispose(() => this.setModel(null)));\n        listenersToRemove.push(viewModel.onEvent((e) => {\n            switch (e.kind) {\n                case 0 /* OutgoingViewModelEventKind.ContentSizeChanged */:\n                    this._onDidContentSizeChange.fire(e);\n                    break;\n                case 1 /* OutgoingViewModelEventKind.FocusChanged */:\n                    this._editorTextFocus.setValue(e.hasFocus);\n                    break;\n                case 2 /* OutgoingViewModelEventKind.ScrollChanged */:\n                    this._onDidScrollChange.fire(e);\n                    break;\n                case 3 /* OutgoingViewModelEventKind.ViewZonesChanged */:\n                    this._onDidChangeViewZones.fire();\n                    break;\n                case 4 /* OutgoingViewModelEventKind.HiddenAreasChanged */:\n                    this._onDidChangeHiddenAreas.fire();\n                    break;\n                case 5 /* OutgoingViewModelEventKind.ReadOnlyEditAttempt */:\n                    this._onDidAttemptReadOnlyEdit.fire();\n                    break;\n                case 6 /* OutgoingViewModelEventKind.CursorStateChanged */: {\n                    if (e.reachedMaxCursorCount) {\n                        const multiCursorLimit = this.getOption(80 /* EditorOption.multiCursorLimit */);\n                        const message = nls.localize('cursors.maximum', \"The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.\", multiCursorLimit);\n                        this._notificationService.prompt(Severity.Warning, message, [\n                            {\n                                label: 'Find and Replace',\n                                run: () => {\n                                    this._commandService.executeCommand('editor.action.startFindReplaceAction');\n                                }\n                            },\n                            {\n                                label: nls.localize('goToSetting', 'Increase Multi Cursor Limit'),\n                                run: () => {\n                                    this._commandService.executeCommand('workbench.action.openSettings2', {\n                                        query: 'editor.multiCursorLimit'\n                                    });\n                                }\n                            }\n                        ]);\n                    }\n                    const positions = [];\n                    for (let i = 0, len = e.selections.length; i < len; i++) {\n                        positions[i] = e.selections[i].getPosition();\n                    }\n                    const e1 = {\n                        position: positions[0],\n                        secondaryPositions: positions.slice(1),\n                        reason: e.reason,\n                        source: e.source\n                    };\n                    this._onDidChangeCursorPosition.fire(e1);\n                    const e2 = {\n                        selection: e.selections[0],\n                        secondarySelections: e.selections.slice(1),\n                        modelVersionId: e.modelVersionId,\n                        oldSelections: e.oldSelections,\n                        oldModelVersionId: e.oldModelVersionId,\n                        source: e.source,\n                        reason: e.reason\n                    };\n                    this._onDidChangeCursorSelection.fire(e2);\n                    break;\n                }\n                case 7 /* OutgoingViewModelEventKind.ModelDecorationsChanged */:\n                    this._onDidChangeModelDecorations.fire(e.event);\n                    break;\n                case 8 /* OutgoingViewModelEventKind.ModelLanguageChanged */:\n                    this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n                    this._onDidChangeModelLanguage.fire(e.event);\n                    break;\n                case 9 /* OutgoingViewModelEventKind.ModelLanguageConfigurationChanged */:\n                    this._onDidChangeModelLanguageConfiguration.fire(e.event);\n                    break;\n                case 10 /* OutgoingViewModelEventKind.ModelContentChanged */:\n                    this._onDidChangeModelContent.fire(e.event);\n                    break;\n                case 11 /* OutgoingViewModelEventKind.ModelOptionsChanged */:\n                    this._onDidChangeModelOptions.fire(e.event);\n                    break;\n                case 12 /* OutgoingViewModelEventKind.ModelTokensChanged */:\n                    this._onDidChangeModelTokens.fire(e.event);\n                    break;\n            }\n        }));\n        const [view, hasRealView] = this._createView(viewModel);\n        if (hasRealView) {\n            this._domElement.appendChild(view.domNode.domNode);\n            let keys = Object.keys(this._contentWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addContentWidget(this._contentWidgets[widgetId]);\n            }\n            keys = Object.keys(this._overlayWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addOverlayWidget(this._overlayWidgets[widgetId]);\n            }\n            keys = Object.keys(this._glyphMarginWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addGlyphMarginWidget(this._glyphMarginWidgets[widgetId]);\n            }\n            view.render(false, true);\n            view.domNode.domNode.setAttribute('data-uri', model.uri.toString());\n        }\n        this._modelData = new ModelData(model, viewModel, view, hasRealView, listenersToRemove, attachedView);\n    }\n    _createView(viewModel) {\n        let commandDelegate;\n        if (this.isSimpleWidget) {\n            commandDelegate = {\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\n                    this._paste('keyboard', text, pasteOnNewLine, multicursorText, mode);\n                },\n                type: (text) => {\n                    this._type('keyboard', text);\n                },\n                compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n                    this._compositionType('keyboard', text, replacePrevCharCnt, replaceNextCharCnt, positionDelta);\n                },\n                startComposition: () => {\n                    this._startComposition();\n                },\n                endComposition: () => {\n                    this._endComposition('keyboard');\n                },\n                cut: () => {\n                    this._cut('keyboard');\n                }\n            };\n        }\n        else {\n            commandDelegate = {\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\n                    const payload = { text, pasteOnNewLine, multicursorText, mode };\n                    this._commandService.executeCommand(\"paste\" /* editorCommon.Handler.Paste */, payload);\n                },\n                type: (text) => {\n                    const payload = { text };\n                    this._commandService.executeCommand(\"type\" /* editorCommon.Handler.Type */, payload);\n                },\n                compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n                    // Try if possible to go through the existing `replacePreviousChar` command\n                    if (replaceNextCharCnt || positionDelta) {\n                        // must be handled through the new command\n                        const payload = { text, replacePrevCharCnt, replaceNextCharCnt, positionDelta };\n                        this._commandService.executeCommand(\"compositionType\" /* editorCommon.Handler.CompositionType */, payload);\n                    }\n                    else {\n                        const payload = { text, replaceCharCnt: replacePrevCharCnt };\n                        this._commandService.executeCommand(\"replacePreviousChar\" /* editorCommon.Handler.ReplacePreviousChar */, payload);\n                    }\n                },\n                startComposition: () => {\n                    this._commandService.executeCommand(\"compositionStart\" /* editorCommon.Handler.CompositionStart */, {});\n                },\n                endComposition: () => {\n                    this._commandService.executeCommand(\"compositionEnd\" /* editorCommon.Handler.CompositionEnd */, {});\n                },\n                cut: () => {\n                    this._commandService.executeCommand(\"cut\" /* editorCommon.Handler.Cut */, {});\n                }\n            };\n        }\n        const viewUserInputEvents = new ViewUserInputEvents(viewModel.coordinatesConverter);\n        viewUserInputEvents.onKeyDown = (e) => this._onKeyDown.fire(e);\n        viewUserInputEvents.onKeyUp = (e) => this._onKeyUp.fire(e);\n        viewUserInputEvents.onContextMenu = (e) => this._onContextMenu.fire(e);\n        viewUserInputEvents.onMouseMove = (e) => this._onMouseMove.fire(e);\n        viewUserInputEvents.onMouseLeave = (e) => this._onMouseLeave.fire(e);\n        viewUserInputEvents.onMouseDown = (e) => this._onMouseDown.fire(e);\n        viewUserInputEvents.onMouseUp = (e) => this._onMouseUp.fire(e);\n        viewUserInputEvents.onMouseDrag = (e) => this._onMouseDrag.fire(e);\n        viewUserInputEvents.onMouseDrop = (e) => this._onMouseDrop.fire(e);\n        viewUserInputEvents.onMouseDropCanceled = (e) => this._onMouseDropCanceled.fire(e);\n        viewUserInputEvents.onMouseWheel = (e) => this._onMouseWheel.fire(e);\n        const view = new View(commandDelegate, this._configuration, this._themeService.getColorTheme(), viewModel, viewUserInputEvents, this._overflowWidgetsDomNode, this._instantiationService);\n        return [view, true];\n    }\n    _postDetachModelCleanup(detachedModel) {\n        detachedModel === null || detachedModel === void 0 ? void 0 : detachedModel.removeAllDecorationsWithOwnerId(this._id);\n    }\n    _detachModel() {\n        var _a;\n        (_a = this._contributionsDisposable) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._contributionsDisposable = undefined;\n        if (!this._modelData) {\n            return null;\n        }\n        const model = this._modelData.model;\n        const removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;\n        this._modelData.dispose();\n        this._modelData = null;\n        this._domElement.removeAttribute('data-mode-id');\n        if (removeDomNode && this._domElement.contains(removeDomNode)) {\n            this._domElement.removeChild(removeDomNode);\n        }\n        if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n            this._domElement.removeChild(this._bannerDomNode);\n        }\n        return model;\n    }\n    _removeDecorationType(key) {\n        this._codeEditorService.removeDecorationType(key);\n    }\n    hasModel() {\n        return (this._modelData !== null);\n    }\n    showDropIndicatorAt(position) {\n        const newDecorations = [{\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n                options: CodeEditorWidget_1.dropIntoEditorDecorationOptions\n            }];\n        this._dropIntoEditorDecorations.set(newDecorations);\n        this.revealPosition(position, 1 /* editorCommon.ScrollType.Immediate */);\n    }\n    removeDropIndicator() {\n        this._dropIntoEditorDecorations.clear();\n    }\n    setContextValue(key, value) {\n        this._contextKeyService.createKey(key, value);\n    }\n};\nCodeEditorWidget.dropIntoEditorDecorationOptions = ModelDecorationOptions.register({\n    description: 'workbench-dnd-target',\n    className: 'dnd-target'\n});\nCodeEditorWidget = CodeEditorWidget_1 = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, ICodeEditorService),\n    __param(5, ICommandService),\n    __param(6, IContextKeyService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService),\n    __param(11, ILanguageFeaturesService)\n], CodeEditorWidget);\nexport { CodeEditorWidget };\nlet EDITOR_ID = 0;\nclass ModelData {\n    constructor(model, viewModel, view, hasRealView, listenersToRemove, attachedView) {\n        this.model = model;\n        this.viewModel = viewModel;\n        this.view = view;\n        this.hasRealView = hasRealView;\n        this.listenersToRemove = listenersToRemove;\n        this.attachedView = attachedView;\n    }\n    dispose() {\n        dispose(this.listenersToRemove);\n        this.model.onBeforeDetached(this.attachedView);\n        if (this.hasRealView) {\n            this.view.dispose();\n        }\n        this.viewModel.dispose();\n    }\n}\nexport class BooleanEventEmitter extends Disposable {\n    constructor(_emitterOptions) {\n        super();\n        this._emitterOptions = _emitterOptions;\n        this._onDidChangeToTrue = this._register(new Emitter(this._emitterOptions));\n        this.onDidChangeToTrue = this._onDidChangeToTrue.event;\n        this._onDidChangeToFalse = this._register(new Emitter(this._emitterOptions));\n        this.onDidChangeToFalse = this._onDidChangeToFalse.event;\n        this._value = 0 /* BooleanEventValue.NotSet */;\n    }\n    setValue(_value) {\n        const value = (_value ? 2 /* BooleanEventValue.True */ : 1 /* BooleanEventValue.False */);\n        if (this._value === value) {\n            return;\n        }\n        this._value = value;\n        if (this._value === 2 /* BooleanEventValue.True */) {\n            this._onDidChangeToTrue.fire();\n        }\n        else if (this._value === 1 /* BooleanEventValue.False */) {\n            this._onDidChangeToFalse.fire();\n        }\n    }\n}\n/**\n * A regular event emitter that also makes sure contributions are instantiated if necessary\n */\nclass InteractionEmitter extends Emitter {\n    constructor(_contributions, deliveryQueue) {\n        super({ deliveryQueue });\n        this._contributions = _contributions;\n    }\n    fire(event) {\n        this._contributions.onBeforeInteractionEvent();\n        super.fire(event);\n    }\n}\nclass EditorContextKeysManager extends Disposable {\n    constructor(editor, contextKeyService) {\n        super();\n        this._editor = editor;\n        contextKeyService.createKey('editorId', editor.getId());\n        this._editorSimpleInput = EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);\n        this._editorFocus = EditorContextKeys.focus.bindTo(contextKeyService);\n        this._textInputFocus = EditorContextKeys.textInputFocus.bindTo(contextKeyService);\n        this._editorTextFocus = EditorContextKeys.editorTextFocus.bindTo(contextKeyService);\n        this._tabMovesFocus = EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);\n        this._editorReadonly = EditorContextKeys.readOnly.bindTo(contextKeyService);\n        this._inDiffEditor = EditorContextKeys.inDiffEditor.bindTo(contextKeyService);\n        this._editorColumnSelection = EditorContextKeys.columnSelection.bindTo(contextKeyService);\n        this._hasMultipleSelections = EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);\n        this._hasNonEmptySelection = EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);\n        this._canUndo = EditorContextKeys.canUndo.bindTo(contextKeyService);\n        this._canRedo = EditorContextKeys.canRedo.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromConfig()));\n        this._register(this._editor.onDidChangeCursorSelection(() => this._updateFromSelection()));\n        this._register(this._editor.onDidFocusEditorWidget(() => this._updateFromFocus()));\n        this._register(this._editor.onDidBlurEditorWidget(() => this._updateFromFocus()));\n        this._register(this._editor.onDidFocusEditorText(() => this._updateFromFocus()));\n        this._register(this._editor.onDidBlurEditorText(() => this._updateFromFocus()));\n        this._register(this._editor.onDidChangeModel(() => this._updateFromModel()));\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromModel()));\n        this._register(TabFocus.onDidChangeTabFocus((tabFocusMode) => this._tabMovesFocus.set(tabFocusMode)));\n        this._updateFromConfig();\n        this._updateFromSelection();\n        this._updateFromFocus();\n        this._updateFromModel();\n        this._editorSimpleInput.set(this._editor.isSimpleWidget);\n    }\n    _updateFromConfig() {\n        const options = this._editor.getOptions();\n        this._tabMovesFocus.set(TabFocus.getTabFocusMode());\n        this._editorReadonly.set(options.get(91 /* EditorOption.readOnly */));\n        this._inDiffEditor.set(options.get(61 /* EditorOption.inDiffEditor */));\n        this._editorColumnSelection.set(options.get(22 /* EditorOption.columnSelection */));\n    }\n    _updateFromSelection() {\n        const selections = this._editor.getSelections();\n        if (!selections) {\n            this._hasMultipleSelections.reset();\n            this._hasNonEmptySelection.reset();\n        }\n        else {\n            this._hasMultipleSelections.set(selections.length > 1);\n            this._hasNonEmptySelection.set(selections.some(s => !s.isEmpty()));\n        }\n    }\n    _updateFromFocus() {\n        this._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);\n        this._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);\n        this._textInputFocus.set(this._editor.hasTextFocus());\n    }\n    _updateFromModel() {\n        const model = this._editor.getModel();\n        this._canUndo.set(Boolean(model && model.canUndo()));\n        this._canRedo.set(Boolean(model && model.canRedo()));\n    }\n}\nexport class EditorModeContext extends Disposable {\n    constructor(_editor, _contextKeyService, _languageFeaturesService) {\n        super();\n        this._editor = _editor;\n        this._contextKeyService = _contextKeyService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._langId = EditorContextKeys.languageId.bindTo(_contextKeyService);\n        this._hasCompletionItemProvider = EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);\n        this._hasCodeActionsProvider = EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);\n        this._hasCodeLensProvider = EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);\n        this._hasDefinitionProvider = EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);\n        this._hasDeclarationProvider = EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);\n        this._hasImplementationProvider = EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);\n        this._hasTypeDefinitionProvider = EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);\n        this._hasHoverProvider = EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);\n        this._hasDocumentHighlightProvider = EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);\n        this._hasDocumentSymbolProvider = EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);\n        this._hasReferenceProvider = EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);\n        this._hasRenameProvider = EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);\n        this._hasSignatureHelpProvider = EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);\n        this._hasInlayHintsProvider = EditorContextKeys.hasInlayHintsProvider.bindTo(_contextKeyService);\n        this._hasDocumentFormattingProvider = EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);\n        this._hasDocumentSelectionFormattingProvider = EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n        this._hasMultipleDocumentFormattingProvider = EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);\n        this._hasMultipleDocumentSelectionFormattingProvider = EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n        this._isInEmbeddedEditor = EditorContextKeys.isInEmbeddedEditor.bindTo(_contextKeyService);\n        const update = () => this._update();\n        // update when model/mode changes\n        this._register(_editor.onDidChangeModel(update));\n        this._register(_editor.onDidChangeModelLanguage(update));\n        // update when registries change\n        this._register(_languageFeaturesService.completionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.codeActionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.codeLensProvider.onDidChange(update));\n        this._register(_languageFeaturesService.definitionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.declarationProvider.onDidChange(update));\n        this._register(_languageFeaturesService.implementationProvider.onDidChange(update));\n        this._register(_languageFeaturesService.typeDefinitionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.hoverProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentHighlightProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentSymbolProvider.onDidChange(update));\n        this._register(_languageFeaturesService.referenceProvider.onDidChange(update));\n        this._register(_languageFeaturesService.renameProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentFormattingEditProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(update));\n        this._register(_languageFeaturesService.signatureHelpProvider.onDidChange(update));\n        this._register(_languageFeaturesService.inlayHintsProvider.onDidChange(update));\n        update();\n    }\n    dispose() {\n        super.dispose();\n    }\n    reset() {\n        this._contextKeyService.bufferChangeEvents(() => {\n            this._langId.reset();\n            this._hasCompletionItemProvider.reset();\n            this._hasCodeActionsProvider.reset();\n            this._hasCodeLensProvider.reset();\n            this._hasDefinitionProvider.reset();\n            this._hasDeclarationProvider.reset();\n            this._hasImplementationProvider.reset();\n            this._hasTypeDefinitionProvider.reset();\n            this._hasHoverProvider.reset();\n            this._hasDocumentHighlightProvider.reset();\n            this._hasDocumentSymbolProvider.reset();\n            this._hasReferenceProvider.reset();\n            this._hasRenameProvider.reset();\n            this._hasDocumentFormattingProvider.reset();\n            this._hasDocumentSelectionFormattingProvider.reset();\n            this._hasSignatureHelpProvider.reset();\n            this._isInEmbeddedEditor.reset();\n        });\n    }\n    _update() {\n        const model = this._editor.getModel();\n        if (!model) {\n            this.reset();\n            return;\n        }\n        this._contextKeyService.bufferChangeEvents(() => {\n            this._langId.set(model.getLanguageId());\n            this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(model));\n            this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(model));\n            this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(model));\n            this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(model));\n            this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(model));\n            this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(model));\n            this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(model));\n            this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(model));\n            this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(model));\n            this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(model));\n            this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(model));\n            this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(model));\n            this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(model));\n            this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(model));\n            this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(model) || this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));\n            this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));\n            this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(model).length + this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);\n            this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);\n            this._isInEmbeddedEditor.set(model.uri.scheme === Schemas.walkThroughSnippet || model.uri.scheme === Schemas.vscodeChatCodeBlock);\n        });\n    }\n}\nclass CodeEditorWidgetFocusTracker extends Disposable {\n    constructor(domElement, overflowWidgetsDomNode) {\n        super();\n        this._onChange = this._register(new Emitter());\n        this.onChange = this._onChange.event;\n        this._hadFocus = undefined;\n        this._hasDomElementFocus = false;\n        this._domFocusTracker = this._register(dom.trackFocus(domElement));\n        this._overflowWidgetsDomNodeHasFocus = false;\n        this._register(this._domFocusTracker.onDidFocus(() => {\n            this._hasDomElementFocus = true;\n            this._update();\n        }));\n        this._register(this._domFocusTracker.onDidBlur(() => {\n            this._hasDomElementFocus = false;\n            this._update();\n        }));\n        if (overflowWidgetsDomNode) {\n            this._overflowWidgetsDomNode = this._register(dom.trackFocus(overflowWidgetsDomNode));\n            this._register(this._overflowWidgetsDomNode.onDidFocus(() => {\n                this._overflowWidgetsDomNodeHasFocus = true;\n                this._update();\n            }));\n            this._register(this._overflowWidgetsDomNode.onDidBlur(() => {\n                this._overflowWidgetsDomNodeHasFocus = false;\n                this._update();\n            }));\n        }\n    }\n    _update() {\n        const focused = this._hasDomElementFocus || this._overflowWidgetsDomNodeHasFocus;\n        if (this._hadFocus !== focused) {\n            this._hadFocus = focused;\n            this._onChange.fire(undefined);\n        }\n    }\n    hasFocus() {\n        var _a;\n        return (_a = this._hadFocus) !== null && _a !== void 0 ? _a : false;\n    }\n}\nclass EditorDecorationsCollection {\n    get length() {\n        return this._decorationIds.length;\n    }\n    constructor(_editor, decorations) {\n        this._editor = _editor;\n        this._decorationIds = [];\n        this._isChangingDecorations = false;\n        if (Array.isArray(decorations) && decorations.length > 0) {\n            this.set(decorations);\n        }\n    }\n    onDidChange(listener, thisArgs, disposables) {\n        return this._editor.onDidChangeModelDecorations((e) => {\n            if (this._isChangingDecorations) {\n                return;\n            }\n            listener.call(thisArgs, e);\n        }, disposables);\n    }\n    getRange(index) {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (index >= this._decorationIds.length) {\n            return null;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorationIds[index]);\n    }\n    getRanges() {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const result = [];\n        for (const decorationId of this._decorationIds) {\n            const range = model.getDecorationRange(decorationId);\n            if (range) {\n                result.push(range);\n            }\n        }\n        return result;\n    }\n    has(decoration) {\n        return this._decorationIds.includes(decoration.id);\n    }\n    clear() {\n        if (this._decorationIds.length === 0) {\n            // nothing to do\n            return;\n        }\n        this.set([]);\n    }\n    set(newDecorations) {\n        try {\n            this._isChangingDecorations = true;\n            this._editor.changeDecorations((accessor) => {\n                this._decorationIds = accessor.deltaDecorations(this._decorationIds, newDecorations);\n            });\n        }\n        finally {\n            this._isChangingDecorations = false;\n        }\n        return this._decorationIds;\n    }\n    append(newDecorations) {\n        let newDecorationIds = [];\n        try {\n            this._isChangingDecorations = true;\n            this._editor.changeDecorations((accessor) => {\n                newDecorationIds = accessor.deltaDecorations([], newDecorations);\n                this._decorationIds = this._decorationIds.concat(newDecorationIds);\n            });\n        }\n        finally {\n            this._isChangingDecorations = false;\n        }\n        return newDecorationIds;\n    }\n}\nconst squigglyStart = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='`);\nconst squigglyEnd = encodeURIComponent(`'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>`);\nfunction getSquigglySVGData(color) {\n    return squigglyStart + encodeURIComponent(color.toString()) + squigglyEnd;\n}\nconst dotdotdotStart = encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"3\" width=\"12\"><g fill=\"`);\nconst dotdotdotEnd = encodeURIComponent(`\"><circle cx=\"1\" cy=\"1\" r=\"1\"/><circle cx=\"5\" cy=\"1\" r=\"1\"/><circle cx=\"9\" cy=\"1\" r=\"1\"/></g></svg>`);\nfunction getDotDotDotSVGData(color) {\n    return dotdotdotStart + encodeURIComponent(color.toString()) + dotdotdotEnd;\n}\nregisterThemingParticipant((theme, collector) => {\n    const errorForeground = theme.getColor(editorErrorForeground);\n    if (errorForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-error\" /* ClassName.EditorErrorDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(errorForeground)}\") repeat-x bottom left; }`);\n    }\n    const warningForeground = theme.getColor(editorWarningForeground);\n    if (warningForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-warning\" /* ClassName.EditorWarningDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(warningForeground)}\") repeat-x bottom left; }`);\n    }\n    const infoForeground = theme.getColor(editorInfoForeground);\n    if (infoForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-info\" /* ClassName.EditorInfoDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(infoForeground)}\") repeat-x bottom left; }`);\n    }\n    const hintForeground = theme.getColor(editorHintForeground);\n    if (hintForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-hint\" /* ClassName.EditorHintDecoration */} { background: url(\"data:image/svg+xml,${getDotDotDotSVGData(hintForeground)}\") no-repeat bottom left; }`);\n    }\n    const unnecessaryForeground = theme.getColor(editorUnnecessaryCodeOpacity);\n    if (unnecessaryForeground) {\n        collector.addRule(`.monaco-editor.showUnused .${\"squiggly-inline-unnecessary\" /* ClassName.EditorUnnecessaryInlineDecoration */} { opacity: ${unnecessaryForeground.rgba.a}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as objects from '../../../../base/common/objects.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nlet EmbeddedCodeEditorWidget = class EmbeddedCodeEditorWidget extends CodeEditorWidget {\n    constructor(domElement, options, codeEditorWidgetOptions, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        super(domElement, { ...parentEditor.getRawOptions(), overflowWidgetsDomNode: parentEditor.getOverflowWidgetsDomNode() }, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        this._parentEditor = parentEditor;\n        this._overwriteOptions = options;\n        // Overwrite parent's options\n        super.updateOptions(this._overwriteOptions);\n        this._register(parentEditor.onDidChangeConfiguration((e) => this._onParentConfigurationChanged(e)));\n    }\n    getParentEditor() {\n        return this._parentEditor;\n    }\n    _onParentConfigurationChanged(e) {\n        super.updateOptions(this._parentEditor.getRawOptions());\n        super.updateOptions(this._overwriteOptions);\n    }\n    updateOptions(newOptions) {\n        objects.mixin(this._overwriteOptions, newOptions, true);\n        super.updateOptions(this._overwriteOptions);\n    }\n};\nEmbeddedCodeEditorWidget = __decorate([\n    __param(4, IInstantiationService),\n    __param(5, ICodeEditorService),\n    __param(6, ICommandService),\n    __param(7, IContextKeyService),\n    __param(8, IThemeService),\n    __param(9, INotificationService),\n    __param(10, IAccessibilityService),\n    __param(11, ILanguageConfigurationService),\n    __param(12, ILanguageFeaturesService)\n], EmbeddedCodeEditorWidget);\nexport { EmbeddedCodeEditorWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getActiveElement } from '../../../../base/browser/dom.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { EditorAction2 } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { DiffEditorWidget } from './diffEditorWidget.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize2 } from '../../../../nls.js';\nimport { Action2, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport './registrations.contribution.js';\nexport class ToggleCollapseUnchangedRegions extends Action2 {\n    constructor() {\n        super({\n            id: 'diffEditor.toggleCollapseUnchangedRegions',\n            title: localize2('toggleCollapseUnchangedRegions', 'Toggle Collapse Unchanged Regions'),\n            icon: Codicon.map,\n            toggled: ContextKeyExpr.has('config.diffEditor.hideUnchangedRegions.enabled'),\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            menu: {\n                when: ContextKeyExpr.has('isInDiffEditor'),\n                id: MenuId.EditorTitle,\n                order: 22,\n                group: 'navigation',\n            },\n        });\n    }\n    run(accessor, ...args) {\n        const configurationService = accessor.get(IConfigurationService);\n        const newValue = !configurationService.getValue('diffEditor.hideUnchangedRegions.enabled');\n        configurationService.updateValue('diffEditor.hideUnchangedRegions.enabled', newValue);\n    }\n}\nexport class ToggleShowMovedCodeBlocks extends Action2 {\n    constructor() {\n        super({\n            id: 'diffEditor.toggleShowMovedCodeBlocks',\n            title: localize2('toggleShowMovedCodeBlocks', 'Toggle Show Moved Code Blocks'),\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n        });\n    }\n    run(accessor, ...args) {\n        const configurationService = accessor.get(IConfigurationService);\n        const newValue = !configurationService.getValue('diffEditor.experimental.showMoves');\n        configurationService.updateValue('diffEditor.experimental.showMoves', newValue);\n    }\n}\nexport class ToggleUseInlineViewWhenSpaceIsLimited extends Action2 {\n    constructor() {\n        super({\n            id: 'diffEditor.toggleUseInlineViewWhenSpaceIsLimited',\n            title: localize2('toggleUseInlineViewWhenSpaceIsLimited', 'Toggle Use Inline View When Space Is Limited'),\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n        });\n    }\n    run(accessor, ...args) {\n        const configurationService = accessor.get(IConfigurationService);\n        const newValue = !configurationService.getValue('diffEditor.useInlineViewWhenSpaceIsLimited');\n        configurationService.updateValue('diffEditor.useInlineViewWhenSpaceIsLimited', newValue);\n    }\n}\nconst diffEditorCategory = localize2('diffEditor', \"Diff Editor\");\nexport class SwitchSide extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'diffEditor.switchSide',\n            title: localize2('switchSide', 'Switch Side'),\n            icon: Codicon.arrowSwap,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            f1: true,\n            category: diffEditorCategory,\n        });\n    }\n    runEditorCommand(accessor, editor, arg) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        if (diffEditor instanceof DiffEditorWidget) {\n            if (arg && arg.dryRun) {\n                return { destinationSelection: diffEditor.mapToOtherSide().destinationSelection };\n            }\n            else {\n                diffEditor.switchSide();\n            }\n        }\n        return undefined;\n    }\n}\nexport class ExitCompareMove extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'diffEditor.exitCompareMove',\n            title: localize2('exitCompareMove', 'Exit Compare Move'),\n            icon: Codicon.close,\n            precondition: EditorContextKeys.comparingMovedCode,\n            f1: false,\n            category: diffEditorCategory,\n            keybinding: {\n                weight: 10000,\n                primary: 9 /* KeyCode.Escape */,\n            }\n        });\n    }\n    runEditorCommand(accessor, editor, ...args) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        if (diffEditor instanceof DiffEditorWidget) {\n            diffEditor.exitCompareMove();\n        }\n    }\n}\nexport class CollapseAllUnchangedRegions extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'diffEditor.collapseAllUnchangedRegions',\n            title: localize2('collapseAllUnchangedRegions', 'Collapse All Unchanged Regions'),\n            icon: Codicon.fold,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            f1: true,\n            category: diffEditorCategory,\n        });\n    }\n    runEditorCommand(accessor, editor, ...args) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        if (diffEditor instanceof DiffEditorWidget) {\n            diffEditor.collapseAllUnchangedRegions();\n        }\n    }\n}\nexport class ShowAllUnchangedRegions extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'diffEditor.showAllUnchangedRegions',\n            title: localize2('showAllUnchangedRegions', 'Show All Unchanged Regions'),\n            icon: Codicon.unfold,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            f1: true,\n            category: diffEditorCategory,\n        });\n    }\n    runEditorCommand(accessor, editor, ...args) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        if (diffEditor instanceof DiffEditorWidget) {\n            diffEditor.showAllUnchangedRegions();\n        }\n    }\n}\nexport class RevertHunkOrSelection extends Action2 {\n    constructor() {\n        super({\n            id: 'diffEditor.revert',\n            title: localize2('revert', 'Revert'),\n            f1: false,\n            category: diffEditorCategory,\n        });\n    }\n    run(accessor, arg) {\n        var _a;\n        const diffEditor = findDiffEditor(accessor, arg.originalUri, arg.modifiedUri);\n        if (diffEditor instanceof DiffEditorWidget) {\n            diffEditor.revertRangeMappings((_a = arg.mapping.innerChanges) !== null && _a !== void 0 ? _a : []);\n        }\n        return undefined;\n    }\n}\nconst accessibleDiffViewerCategory = localize2('accessibleDiffViewer', \"Accessible Diff Viewer\");\nexport class AccessibleDiffViewerNext extends Action2 {\n    constructor() {\n        super({\n            id: AccessibleDiffViewerNext.id,\n            title: localize2('editor.action.accessibleDiffViewer.next', 'Go to Next Difference'),\n            category: accessibleDiffViewerCategory,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            keybinding: {\n                primary: 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            f1: true,\n        });\n    }\n    run(accessor) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerNext();\n    }\n}\nAccessibleDiffViewerNext.id = 'editor.action.accessibleDiffViewer.next';\nexport class AccessibleDiffViewerPrev extends Action2 {\n    constructor() {\n        super({\n            id: AccessibleDiffViewerPrev.id,\n            title: localize2('editor.action.accessibleDiffViewer.prev', 'Go to Previous Difference'),\n            category: accessibleDiffViewerCategory,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            keybinding: {\n                primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            f1: true,\n        });\n    }\n    run(accessor) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerPrev();\n    }\n}\nAccessibleDiffViewerPrev.id = 'editor.action.accessibleDiffViewer.prev';\nexport function findDiffEditor(accessor, originalUri, modifiedUri) {\n    const codeEditorService = accessor.get(ICodeEditorService);\n    const diffEditors = codeEditorService.listDiffEditors();\n    return diffEditors.find(diffEditor => {\n        var _a, _b;\n        const modified = diffEditor.getModifiedEditor();\n        const original = diffEditor.getOriginalEditor();\n        return modified && ((_a = modified.getModel()) === null || _a === void 0 ? void 0 : _a.uri.toString()) === modifiedUri.toString()\n            && original && ((_b = original.getModel()) === null || _b === void 0 ? void 0 : _b.uri.toString()) === originalUri.toString();\n    }) || null;\n}\nexport function findFocusedDiffEditor(accessor) {\n    const codeEditorService = accessor.get(ICodeEditorService);\n    const diffEditors = codeEditorService.listDiffEditors();\n    const activeElement = getActiveElement();\n    if (activeElement) {\n        for (const d of diffEditors) {\n            const container = d.getContainerDomNode();\n            if (isElementOrParentOf(container, activeElement)) {\n                return d;\n            }\n        }\n    }\n    return null;\n}\nfunction isElementOrParentOf(elementOrParent, element) {\n    let e = element;\n    while (e) {\n        if (e === elementOrParent) {\n            return true;\n        }\n        e = e.parentElement;\n    }\n    return false;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { AccessibleDiffViewerNext, AccessibleDiffViewerPrev, CollapseAllUnchangedRegions, ExitCompareMove, RevertHunkOrSelection, ShowAllUnchangedRegions, SwitchSide, ToggleCollapseUnchangedRegions, ToggleShowMovedCodeBlocks, ToggleUseInlineViewWhenSpaceIsLimited } from './commands.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyEqualsExpr, ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport './registrations.contribution.js';\nregisterAction2(ToggleCollapseUnchangedRegions);\nregisterAction2(ToggleShowMovedCodeBlocks);\nregisterAction2(ToggleUseInlineViewWhenSpaceIsLimited);\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n    command: {\n        id: new ToggleUseInlineViewWhenSpaceIsLimited().desc.id,\n        title: localize('useInlineViewWhenSpaceIsLimited', \"Use Inline View When Space Is Limited\"),\n        toggled: ContextKeyExpr.has('config.diffEditor.useInlineViewWhenSpaceIsLimited'),\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\n    },\n    order: 11,\n    group: '1_diff',\n    when: ContextKeyExpr.and(EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached, ContextKeyExpr.has('isInDiffEditor')),\n});\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n    command: {\n        id: new ToggleShowMovedCodeBlocks().desc.id,\n        title: localize('showMoves', \"Show Moved Code Blocks\"),\n        icon: Codicon.move,\n        toggled: ContextKeyEqualsExpr.create('config.diffEditor.experimental.showMoves', true),\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\n    },\n    order: 10,\n    group: '1_diff',\n    when: ContextKeyExpr.has('isInDiffEditor'),\n});\nregisterAction2(RevertHunkOrSelection);\nfor (const ctx of [\n    { icon: Codicon.arrowRight, key: EditorContextKeys.diffEditorInlineMode.toNegated() },\n    { icon: Codicon.discard, key: EditorContextKeys.diffEditorInlineMode }\n]) {\n    MenuRegistry.appendMenuItem(MenuId.DiffEditorHunkToolbar, {\n        command: {\n            id: new RevertHunkOrSelection().desc.id,\n            title: localize('revertHunk', \"Revert Block\"),\n            icon: ctx.icon,\n        },\n        when: ContextKeyExpr.and(EditorContextKeys.diffEditorModifiedWritable, ctx.key),\n        order: 5,\n        group: 'primary',\n    });\n    MenuRegistry.appendMenuItem(MenuId.DiffEditorSelectionToolbar, {\n        command: {\n            id: new RevertHunkOrSelection().desc.id,\n            title: localize('revertSelection', \"Revert Selection\"),\n            icon: ctx.icon,\n        },\n        when: ContextKeyExpr.and(EditorContextKeys.diffEditorModifiedWritable, ctx.key),\n        order: 5,\n        group: 'primary',\n    });\n}\nregisterAction2(SwitchSide);\nregisterAction2(ExitCompareMove);\nregisterAction2(CollapseAllUnchangedRegions);\nregisterAction2(ShowAllUnchangedRegions);\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n    command: {\n        id: AccessibleDiffViewerNext.id,\n        title: localize('Open Accessible Diff Viewer', \"Open Accessible Diff Viewer\"),\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\n    },\n    order: 10,\n    group: '2_diff',\n    when: ContextKeyExpr.and(EditorContextKeys.accessibleDiffViewerVisible.negate(), ContextKeyExpr.has('isInDiffEditor')),\n});\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.next', AccessibleDiffViewerNext.id);\nregisterAction2(AccessibleDiffViewerNext);\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.prev', AccessibleDiffViewerPrev.id);\nregisterAction2(AccessibleDiffViewerPrev);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { addDisposableListener, addStandardDisposableListener, reset } from '../../../../../base/browser/dom.js';\nimport { createTrustedTypesPolicy } from '../../../../../base/browser/trustedTypes.js';\nimport { ActionBar } from '../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action } from '../../../../../base/common/actions.js';\nimport { forEachAdjacent, groupAdjacentBy } from '../../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, observableValue, subtransaction, transaction } from '../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { applyFontInfo } from '../../../config/domFontInfo.js';\nimport { applyStyle } from '../utils.js';\nimport { EditorFontLigatures } from '../../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../../common/core/lineRange.js';\nimport { OffsetRange } from '../../../../common/core/offsetRange.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { LineRangeMapping } from '../../../../common/diff/rangeMapping.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { LineTokens } from '../../../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 } from '../../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../../common/viewModel.js';\nimport { localize } from '../../../../../nls.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../../platform/theme/common/iconRegistry.js';\nimport './accessibleDiffViewer.css';\nconst accessibleDiffViewerInsertIcon = registerIcon('diff-review-insert', Codicon.add, localize('accessibleDiffViewerInsertIcon', 'Icon for \\'Insert\\' in accessible diff viewer.'));\nconst accessibleDiffViewerRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, localize('accessibleDiffViewerRemoveIcon', 'Icon for \\'Remove\\' in accessible diff viewer.'));\nconst accessibleDiffViewerCloseIcon = registerIcon('diff-review-close', Codicon.close, localize('accessibleDiffViewerCloseIcon', 'Icon for \\'Close\\' in accessible diff viewer.'));\nlet AccessibleDiffViewer = class AccessibleDiffViewer extends Disposable {\n    constructor(_parentNode, _visible, _setVisible, _canClose, _width, _height, _diffs, _models, _instantiationService) {\n        super();\n        this._parentNode = _parentNode;\n        this._visible = _visible;\n        this._setVisible = _setVisible;\n        this._canClose = _canClose;\n        this._width = _width;\n        this._height = _height;\n        this._diffs = _diffs;\n        this._models = _models;\n        this._instantiationService = _instantiationService;\n        this._state = derivedWithStore(this, (reader, store) => {\n            const visible = this._visible.read(reader);\n            this._parentNode.style.visibility = visible ? 'visible' : 'hidden';\n            if (!visible) {\n                return null;\n            }\n            const model = store.add(this._instantiationService.createInstance(ViewModel, this._diffs, this._models, this._setVisible, this._canClose));\n            const view = store.add(this._instantiationService.createInstance(View, this._parentNode, model, this._width, this._height, this._models));\n            return { model, view, };\n        }).recomputeInitiallyAndOnChange(this._store);\n    }\n    next() {\n        transaction(tx => {\n            const isVisible = this._visible.get();\n            this._setVisible(true, tx);\n            if (isVisible) {\n                this._state.get().model.nextGroup(tx);\n            }\n        });\n    }\n    prev() {\n        transaction(tx => {\n            this._setVisible(true, tx);\n            this._state.get().model.previousGroup(tx);\n        });\n    }\n    close() {\n        transaction(tx => {\n            this._setVisible(false, tx);\n        });\n    }\n};\nAccessibleDiffViewer._ttPolicy = createTrustedTypesPolicy('diffReview', { createHTML: value => value });\nAccessibleDiffViewer = __decorate([\n    __param(8, IInstantiationService)\n], AccessibleDiffViewer);\nexport { AccessibleDiffViewer };\nlet ViewModel = class ViewModel extends Disposable {\n    constructor(_diffs, _models, _setVisible, canClose, _accessibilitySignalService) {\n        super();\n        this._diffs = _diffs;\n        this._models = _models;\n        this._setVisible = _setVisible;\n        this.canClose = canClose;\n        this._accessibilitySignalService = _accessibilitySignalService;\n        this._groups = observableValue(this, []);\n        this._currentGroupIdx = observableValue(this, 0);\n        this._currentElementIdx = observableValue(this, 0);\n        this.groups = this._groups;\n        this.currentGroup = this._currentGroupIdx.map((idx, r) => this._groups.read(r)[idx]);\n        this.currentGroupIndex = this._currentGroupIdx;\n        this.currentElement = this._currentElementIdx.map((idx, r) => { var _a; return (_a = this.currentGroup.read(r)) === null || _a === void 0 ? void 0 : _a.lines[idx]; });\n        this._register(autorun(reader => {\n            /** @description update groups */\n            const diffs = this._diffs.read(reader);\n            if (!diffs) {\n                this._groups.set([], undefined);\n                return;\n            }\n            const groups = computeViewElementGroups(diffs, this._models.getOriginalModel().getLineCount(), this._models.getModifiedModel().getLineCount());\n            transaction(tx => {\n                const p = this._models.getModifiedPosition();\n                if (p) {\n                    const nextGroup = groups.findIndex(g => (p === null || p === void 0 ? void 0 : p.lineNumber) < g.range.modified.endLineNumberExclusive);\n                    if (nextGroup !== -1) {\n                        this._currentGroupIdx.set(nextGroup, tx);\n                    }\n                }\n                this._groups.set(groups, tx);\n            });\n        }));\n        this._register(autorun(reader => {\n            /** @description play audio-cue for diff */\n            const currentViewItem = this.currentElement.read(reader);\n            if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Deleted) {\n                this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, { source: 'accessibleDiffViewer.currentElementChanged' });\n            }\n            else if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Added) {\n                this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, { source: 'accessibleDiffViewer.currentElementChanged' });\n            }\n        }));\n        this._register(autorun(reader => {\n            var _a;\n            /** @description select lines in editor */\n            // This ensures editor commands (like revert/stage) work\n            const currentViewItem = this.currentElement.read(reader);\n            if (currentViewItem && currentViewItem.type !== LineType.Header) {\n                const lineNumber = (_a = currentViewItem.modifiedLineNumber) !== null && _a !== void 0 ? _a : currentViewItem.diff.modified.startLineNumber;\n                this._models.modifiedSetSelection(Range.fromPositions(new Position(lineNumber, 1)));\n            }\n        }));\n    }\n    _goToGroupDelta(delta, tx) {\n        const groups = this.groups.get();\n        if (!groups || groups.length <= 1) {\n            return;\n        }\n        subtransaction(tx, tx => {\n            this._currentGroupIdx.set(OffsetRange.ofLength(groups.length).clipCyclic(this._currentGroupIdx.get() + delta), tx);\n            this._currentElementIdx.set(0, tx);\n        });\n    }\n    nextGroup(tx) { this._goToGroupDelta(1, tx); }\n    previousGroup(tx) { this._goToGroupDelta(-1, tx); }\n    _goToLineDelta(delta) {\n        const group = this.currentGroup.get();\n        if (!group || group.lines.length <= 1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(OffsetRange.ofLength(group.lines.length).clip(this._currentElementIdx.get() + delta), tx);\n        });\n    }\n    goToNextLine() { this._goToLineDelta(1); }\n    goToPreviousLine() { this._goToLineDelta(-1); }\n    goToLine(line) {\n        const group = this.currentGroup.get();\n        if (!group) {\n            return;\n        }\n        const idx = group.lines.indexOf(line);\n        if (idx === -1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(idx, tx);\n        });\n    }\n    revealCurrentElementInEditor() {\n        if (!this.canClose.get()) {\n            return;\n        }\n        this._setVisible(false, undefined);\n        const curElem = this.currentElement.get();\n        if (curElem) {\n            if (curElem.type === LineType.Deleted) {\n                this._models.originalReveal(Range.fromPositions(new Position(curElem.originalLineNumber, 1)));\n            }\n            else {\n                this._models.modifiedReveal(curElem.type !== LineType.Header\n                    ? Range.fromPositions(new Position(curElem.modifiedLineNumber, 1))\n                    : undefined);\n            }\n        }\n    }\n    close() {\n        if (!this.canClose.get()) {\n            return;\n        }\n        this._setVisible(false, undefined);\n        this._models.modifiedFocus();\n    }\n};\nViewModel = __decorate([\n    __param(4, IAccessibilitySignalService)\n], ViewModel);\nconst viewElementGroupLineMargin = 3;\nfunction computeViewElementGroups(diffs, originalLineCount, modifiedLineCount) {\n    const result = [];\n    for (const g of groupAdjacentBy(diffs, (a, b) => (b.modified.startLineNumber - a.modified.endLineNumberExclusive < 2 * viewElementGroupLineMargin))) {\n        const viewElements = [];\n        viewElements.push(new HeaderViewElement());\n        const origFullRange = new LineRange(Math.max(1, g[0].original.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].original.endLineNumberExclusive + viewElementGroupLineMargin, originalLineCount + 1));\n        const modifiedFullRange = new LineRange(Math.max(1, g[0].modified.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].modified.endLineNumberExclusive + viewElementGroupLineMargin, modifiedLineCount + 1));\n        forEachAdjacent(g, (a, b) => {\n            const origRange = new LineRange(a ? a.original.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.original.startLineNumber : origFullRange.endLineNumberExclusive);\n            const modifiedRange = new LineRange(a ? a.modified.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modified.startLineNumber : modifiedFullRange.endLineNumberExclusive);\n            origRange.forEach(origLineNumber => {\n                viewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));\n            });\n            if (b) {\n                b.original.forEach(origLineNumber => {\n                    viewElements.push(new DeletedLineViewElement(b, origLineNumber));\n                });\n                b.modified.forEach(modifiedLineNumber => {\n                    viewElements.push(new AddedLineViewElement(b, modifiedLineNumber));\n                });\n            }\n        });\n        const modifiedRange = g[0].modified.join(g[g.length - 1].modified);\n        const originalRange = g[0].original.join(g[g.length - 1].original);\n        result.push(new ViewElementGroup(new LineRangeMapping(modifiedRange, originalRange), viewElements));\n    }\n    return result;\n}\nvar LineType;\n(function (LineType) {\n    LineType[LineType[\"Header\"] = 0] = \"Header\";\n    LineType[LineType[\"Unchanged\"] = 1] = \"Unchanged\";\n    LineType[LineType[\"Deleted\"] = 2] = \"Deleted\";\n    LineType[LineType[\"Added\"] = 3] = \"Added\";\n})(LineType || (LineType = {}));\nclass ViewElementGroup {\n    constructor(range, lines) {\n        this.range = range;\n        this.lines = lines;\n    }\n}\nclass HeaderViewElement {\n    constructor() {\n        this.type = LineType.Header;\n    }\n}\nclass DeletedLineViewElement {\n    constructor(diff, originalLineNumber) {\n        this.diff = diff;\n        this.originalLineNumber = originalLineNumber;\n        this.type = LineType.Deleted;\n        this.modifiedLineNumber = undefined;\n    }\n}\nclass AddedLineViewElement {\n    constructor(diff, modifiedLineNumber) {\n        this.diff = diff;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Added;\n        this.originalLineNumber = undefined;\n    }\n}\nclass UnchangedLineViewElement {\n    constructor(originalLineNumber, modifiedLineNumber) {\n        this.originalLineNumber = originalLineNumber;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Unchanged;\n    }\n}\nlet View = class View extends Disposable {\n    constructor(_element, _model, _width, _height, _models, _languageService) {\n        super();\n        this._element = _element;\n        this._model = _model;\n        this._width = _width;\n        this._height = _height;\n        this._models = _models;\n        this._languageService = _languageService;\n        this.domNode = this._element;\n        this.domNode.className = 'monaco-component diff-review monaco-editor-background';\n        const actionBarContainer = document.createElement('div');\n        actionBarContainer.className = 'diff-review-actions';\n        this._actionBar = this._register(new ActionBar(actionBarContainer));\n        this._register(autorun(reader => {\n            /** @description update actions */\n            this._actionBar.clear();\n            if (this._model.canClose.read(reader)) {\n                this._actionBar.push(new Action('diffreview.close', localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(accessibleDiffViewerCloseIcon), true, async () => _model.close()), { label: false, icon: true });\n            }\n        }));\n        this._content = document.createElement('div');\n        this._content.className = 'diff-review-content';\n        this._content.setAttribute('role', 'code');\n        this._scrollbar = this._register(new DomScrollableElement(this._content, {}));\n        reset(this.domNode, this._scrollbar.getDomNode(), actionBarContainer);\n        this._register(autorun(r => {\n            this._height.read(r);\n            this._width.read(r);\n            this._scrollbar.scanDomNode();\n        }));\n        this._register(toDisposable(() => { reset(this.domNode); }));\n        this._register(applyStyle(this.domNode, { width: this._width, height: this._height }));\n        this._register(applyStyle(this._content, { width: this._width, height: this._height }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description render */\n            this._model.currentGroup.read(reader);\n            this._render(store);\n        }));\n        // TODO@hediet use commands\n        this._register(addStandardDisposableListener(this.domNode, 'keydown', (e) => {\n            if (e.equals(18 /* KeyCode.DownArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                this._model.goToNextLine();\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                this._model.goToPreviousLine();\n            }\n            if (e.equals(9 /* KeyCode.Escape */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */)\n                || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */)\n                || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)) {\n                e.preventDefault();\n                this._model.close();\n            }\n            if (e.equals(10 /* KeyCode.Space */)\n                || e.equals(3 /* KeyCode.Enter */)) {\n                e.preventDefault();\n                this._model.revealCurrentElementInEditor();\n            }\n        }));\n    }\n    _render(store) {\n        const originalOptions = this._models.getOriginalOptions();\n        const modifiedOptions = this._models.getModifiedOptions();\n        const container = document.createElement('div');\n        container.className = 'diff-review-table';\n        container.setAttribute('role', 'list');\n        container.setAttribute('aria-label', localize('ariaLabel', 'Accessible Diff Viewer. Use arrow up and down to navigate.'));\n        applyFontInfo(container, modifiedOptions.get(50 /* EditorOption.fontInfo */));\n        reset(this._content, container);\n        const originalModel = this._models.getOriginalModel();\n        const modifiedModel = this._models.getModifiedModel();\n        if (!originalModel || !modifiedModel) {\n            return;\n        }\n        const originalModelOpts = originalModel.getOptions();\n        const modifiedModelOpts = modifiedModel.getOptions();\n        const lineHeight = modifiedOptions.get(67 /* EditorOption.lineHeight */);\n        const group = this._model.currentGroup.get();\n        for (const viewItem of (group === null || group === void 0 ? void 0 : group.lines) || []) {\n            if (!group) {\n                break;\n            }\n            let row;\n            if (viewItem.type === LineType.Header) {\n                const header = document.createElement('div');\n                header.className = 'diff-review-row';\n                header.setAttribute('role', 'listitem');\n                const r = group.range;\n                const diffIndex = this._model.currentGroupIndex.get();\n                const diffsLength = this._model.groups.get().length;\n                const getAriaLines = (lines) => lines === 0 ? localize('no_lines_changed', \"no lines changed\")\n                    : lines === 1 ? localize('one_line_changed', \"1 line changed\")\n                        : localize('more_lines_changed', \"{0} lines changed\", lines);\n                const originalChangedLinesCntAria = getAriaLines(r.original.length);\n                const modifiedChangedLinesCntAria = getAriaLines(r.modified.length);\n                header.setAttribute('aria-label', localize({\n                    key: 'header',\n                    comment: [\n                        'This is the ARIA label for a git diff header.',\n                        'A git diff header looks like this: @@ -154,12 +159,39 @@.',\n                        'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\n                        'Variables 0 and 1 refer to the diff index out of total number of diffs.',\n                        'Variables 2 and 4 will be numbers (a line number).',\n                        'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.'\n                    ]\n                }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", (diffIndex + 1), diffsLength, r.original.startLineNumber, originalChangedLinesCntAria, r.modified.startLineNumber, modifiedChangedLinesCntAria));\n                const cell = document.createElement('div');\n                cell.className = 'diff-review-cell diff-review-summary';\n                // e.g.: `1/10: @@ -504,7 +517,7 @@`\n                cell.appendChild(document.createTextNode(`${diffIndex + 1}/${diffsLength}: @@ -${r.original.startLineNumber},${r.original.length} +${r.modified.startLineNumber},${r.modified.length} @@`));\n                header.appendChild(cell);\n                row = header;\n            }\n            else {\n                row = this._createRow(viewItem, lineHeight, this._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\n            }\n            container.appendChild(row);\n            const isSelectedObs = derived(reader => /** @description isSelected */ this._model.currentElement.read(reader) === viewItem);\n            store.add(autorun(reader => {\n                /** @description update tab index */\n                const isSelected = isSelectedObs.read(reader);\n                row.tabIndex = isSelected ? 0 : -1;\n                if (isSelected) {\n                    row.focus();\n                }\n            }));\n            store.add(addDisposableListener(row, 'focus', () => {\n                this._model.goToLine(viewItem);\n            }));\n        }\n        this._scrollbar.scanDomNode();\n    }\n    _createRow(item, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\n        const originalLayoutInfo = originalOptions.get(145 /* EditorOption.layoutInfo */);\n        const originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n        const modifiedLayoutInfo = modifiedOptions.get(145 /* EditorOption.layoutInfo */);\n        const modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n        let rowClassName = 'diff-review-row';\n        let lineNumbersExtraClassName = '';\n        const spacerClassName = 'diff-review-spacer';\n        let spacerIcon = null;\n        switch (item.type) {\n            case LineType.Added:\n                rowClassName = 'diff-review-row line-insert';\n                lineNumbersExtraClassName = ' char-insert';\n                spacerIcon = accessibleDiffViewerInsertIcon;\n                break;\n            case LineType.Deleted:\n                rowClassName = 'diff-review-row line-delete';\n                lineNumbersExtraClassName = ' char-delete';\n                spacerIcon = accessibleDiffViewerRemoveIcon;\n                break;\n        }\n        const row = document.createElement('div');\n        row.style.minWidth = width + 'px';\n        row.className = rowClassName;\n        row.setAttribute('role', 'listitem');\n        row.ariaLevel = '';\n        const cell = document.createElement('div');\n        cell.className = 'diff-review-cell';\n        cell.style.height = `${lineHeight}px`;\n        row.appendChild(cell);\n        const originalLineNumber = document.createElement('span');\n        originalLineNumber.style.width = (originalLineNumbersWidth + 'px');\n        originalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\n        originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.originalLineNumber !== undefined) {\n            originalLineNumber.appendChild(document.createTextNode(String(item.originalLineNumber)));\n        }\n        else {\n            originalLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(originalLineNumber);\n        const modifiedLineNumber = document.createElement('span');\n        modifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.paddingRight = '10px';\n        modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.modifiedLineNumber !== undefined) {\n            modifiedLineNumber.appendChild(document.createTextNode(String(item.modifiedLineNumber)));\n        }\n        else {\n            modifiedLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(modifiedLineNumber);\n        const spacer = document.createElement('span');\n        spacer.className = spacerClassName;\n        if (spacerIcon) {\n            const spacerCodicon = document.createElement('span');\n            spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n            spacerCodicon.innerText = '\\u00a0\\u00a0';\n            spacer.appendChild(spacerCodicon);\n        }\n        else {\n            spacer.innerText = '\\u00a0\\u00a0';\n        }\n        cell.appendChild(spacer);\n        let lineContent;\n        if (item.modifiedLineNumber !== undefined) {\n            let html = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec);\n            if (AccessibleDiffViewer._ttPolicy) {\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = modifiedModel.getLineContent(item.modifiedLineNumber);\n        }\n        else {\n            let html = this._getLineHtml(originalModel, originalOptions, originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec);\n            if (AccessibleDiffViewer._ttPolicy) {\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = originalModel.getLineContent(item.originalLineNumber);\n        }\n        if (lineContent.length === 0) {\n            lineContent = localize('blankLine', \"blank\");\n        }\n        let ariaLabel = '';\n        switch (item.type) {\n            case LineType.Unchanged:\n                if (item.originalLineNumber === item.modifiedLineNumber) {\n                    ariaLabel = localize({ key: 'unchangedLine', comment: ['The placeholders are contents of the line and should not be translated.'] }, \"{0} unchanged line {1}\", lineContent, item.originalLineNumber);\n                }\n                else {\n                    ariaLabel = localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, item.originalLineNumber, item.modifiedLineNumber);\n                }\n                break;\n            case LineType.Added:\n                ariaLabel = localize('insertLine', \"+ {0} modified line {1}\", lineContent, item.modifiedLineNumber);\n                break;\n            case LineType.Deleted:\n                ariaLabel = localize('deleteLine', \"- {0} original line {1}\", lineContent, item.originalLineNumber);\n                break;\n        }\n        row.setAttribute('aria-label', ariaLabel);\n        return row;\n    }\n    _getLineHtml(model, options, tabSize, lineNumber, languageIdCodec) {\n        const lineContent = model.getLineContent(lineNumber);\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        const lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n        const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n        const r = renderViewLine2(new RenderLineInput((fontInfo.isMonospace && !options.get(33 /* EditorOption.disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(117 /* EditorOption.stopRenderingLineAfter */), options.get(99 /* EditorOption.renderWhitespace */), options.get(94 /* EditorOption.renderControlCharacters */), options.get(51 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\n        return r.html;\n    }\n};\nView = __decorate([\n    __param(5, ILanguageService)\n], View);\nexport class AccessibleDiffViewerModelFromEditors {\n    constructor(editors) {\n        this.editors = editors;\n    }\n    getOriginalModel() {\n        return this.editors.original.getModel();\n    }\n    getOriginalOptions() {\n        return this.editors.original.getOptions();\n    }\n    originalReveal(range) {\n        this.editors.original.revealRange(range);\n        this.editors.original.setSelection(range);\n        this.editors.original.focus();\n    }\n    getModifiedModel() {\n        return this.editors.modified.getModel();\n    }\n    getModifiedOptions() {\n        return this.editors.modified.getOptions();\n    }\n    modifiedReveal(range) {\n        if (range) {\n            this.editors.modified.revealRange(range);\n            this.editors.modified.setSelection(range);\n        }\n        this.editors.modified.focus();\n    }\n    modifiedSetSelection(range) {\n        this.editors.modified.setSelection(range);\n    }\n    modifiedFocus() {\n        this.editors.modified.focus();\n    }\n    getModifiedPosition() {\n        var _a;\n        return (_a = this.editors.modified.getPosition()) !== null && _a !== void 0 ? _a : undefined;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { h } from '../../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../../base/common/actions.js';\nimport { booleanComparator, compareBy, numberComparator, tieBreakComparators } from '../../../../../base/common/arrays.js';\nimport { findMaxIdx } from '../../../../../base/common/arraysFind.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, autorunHandleChanges, autorunWithStore, constObservable, derived, derivedWithStore, observableFromEvent, observableSignalFromEvent, observableValue, recomputeInitiallyAndOnChange } from '../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { PlaceholderViewZone, ViewZoneOverlayWidget, applyStyle, applyViewZones } from '../utils.js';\nimport { OffsetRange, OffsetRangeSet } from '../../../../common/core/offsetRange.js';\nimport { localize } from '../../../../../nls.js';\nexport class MovedBlocksLinesFeature extends Disposable {\n    constructor(_rootElement, _diffModel, _originalEditorLayoutInfo, _modifiedEditorLayoutInfo, _editors) {\n        super();\n        this._rootElement = _rootElement;\n        this._diffModel = _diffModel;\n        this._originalEditorLayoutInfo = _originalEditorLayoutInfo;\n        this._modifiedEditorLayoutInfo = _modifiedEditorLayoutInfo;\n        this._editors = _editors;\n        this._originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => this._editors.original.getScrollTop());\n        this._modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\n        this._viewZonesChanged = observableSignalFromEvent('onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\n        this.width = observableValue(this, 0);\n        this._modifiedViewZonesChangedSignal = observableSignalFromEvent('modified.onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\n        this._originalViewZonesChangedSignal = observableSignalFromEvent('original.onDidChangeViewZones', this._editors.original.onDidChangeViewZones);\n        this._state = derivedWithStore(this, (reader, store) => {\n            /** @description state */\n            var _a;\n            this._element.replaceChildren();\n            const model = this._diffModel.read(reader);\n            const moves = (_a = model === null || model === void 0 ? void 0 : model.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTexts;\n            if (!moves || moves.length === 0) {\n                this.width.set(0, undefined);\n                return;\n            }\n            this._viewZonesChanged.read(reader);\n            const infoOrig = this._originalEditorLayoutInfo.read(reader);\n            const infoMod = this._modifiedEditorLayoutInfo.read(reader);\n            if (!infoOrig || !infoMod) {\n                this.width.set(0, undefined);\n                return;\n            }\n            this._modifiedViewZonesChangedSignal.read(reader);\n            this._originalViewZonesChangedSignal.read(reader);\n            const lines = moves.map((move) => {\n                function computeLineStart(range, editor) {\n                    const t1 = editor.getTopForLineNumber(range.startLineNumber, true);\n                    const t2 = editor.getTopForLineNumber(range.endLineNumberExclusive, true);\n                    return (t1 + t2) / 2;\n                }\n                const start = computeLineStart(move.lineRangeMapping.original, this._editors.original);\n                const startOffset = this._originalScrollTop.read(reader);\n                const end = computeLineStart(move.lineRangeMapping.modified, this._editors.modified);\n                const endOffset = this._modifiedScrollTop.read(reader);\n                const from = start - startOffset;\n                const to = end - endOffset;\n                const top = Math.min(start, end);\n                const bottom = Math.max(start, end);\n                return { range: new OffsetRange(top, bottom), from, to, fromWithoutScroll: start, toWithoutScroll: end, move };\n            });\n            lines.sort(tieBreakComparators(compareBy(l => l.fromWithoutScroll > l.toWithoutScroll, booleanComparator), compareBy(l => l.fromWithoutScroll > l.toWithoutScroll ? l.fromWithoutScroll : -l.toWithoutScroll, numberComparator)));\n            const layout = LinesLayout.compute(lines.map(l => l.range));\n            const padding = 10;\n            const lineAreaLeft = infoOrig.verticalScrollbarWidth;\n            const lineAreaWidth = (layout.getTrackCount() - 1) * 10 + padding * 2;\n            const width = lineAreaLeft + lineAreaWidth + (infoMod.contentLeft - MovedBlocksLinesFeature.movedCodeBlockPadding);\n            let idx = 0;\n            for (const line of lines) {\n                const track = layout.getTrack(idx);\n                const verticalY = lineAreaLeft + padding + track * 10;\n                const arrowHeight = 15;\n                const arrowWidth = 15;\n                const right = width;\n                const rectWidth = infoMod.glyphMarginWidth + infoMod.lineNumbersWidth;\n                const rectHeight = 18;\n                const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n                rect.classList.add('arrow-rectangle');\n                rect.setAttribute('x', `${right - rectWidth}`);\n                rect.setAttribute('y', `${line.to - rectHeight / 2}`);\n                rect.setAttribute('width', `${rectWidth}`);\n                rect.setAttribute('height', `${rectHeight}`);\n                this._element.appendChild(rect);\n                const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n                path.setAttribute('d', `M ${0} ${line.from} L ${verticalY} ${line.from} L ${verticalY} ${line.to} L ${right - arrowWidth} ${line.to}`);\n                path.setAttribute('fill', 'none');\n                g.appendChild(path);\n                const arrowRight = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n                arrowRight.classList.add('arrow');\n                store.add(autorun(reader => {\n                    path.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\n                    arrowRight.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\n                }));\n                arrowRight.setAttribute('points', `${right - arrowWidth},${line.to - arrowHeight / 2} ${right},${line.to} ${right - arrowWidth},${line.to + arrowHeight / 2}`);\n                g.appendChild(arrowRight);\n                this._element.appendChild(g);\n                /*\n                TODO@hediet\n                path.addEventListener('mouseenter', () => {\n                    model.setHoveredMovedText(line.move);\n                });\n                path.addEventListener('mouseleave', () => {\n                    model.setHoveredMovedText(undefined);\n                });*/\n                idx++;\n            }\n            this.width.set(lineAreaWidth, undefined);\n        });\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        this._element.setAttribute('class', 'moved-blocks-lines');\n        this._rootElement.appendChild(this._element);\n        this._register(toDisposable(() => this._element.remove()));\n        this._register(autorun(reader => {\n            /** @description update moved blocks lines positioning */\n            const info = this._originalEditorLayoutInfo.read(reader);\n            const info2 = this._modifiedEditorLayoutInfo.read(reader);\n            if (!info || !info2) {\n                return;\n            }\n            this._element.style.left = `${info.width - info.verticalScrollbarWidth}px`;\n            this._element.style.height = `${info.height}px`;\n            this._element.style.width = `${info.verticalScrollbarWidth + info.contentLeft - MovedBlocksLinesFeature.movedCodeBlockPadding + this.width.read(reader)}px`;\n        }));\n        this._register(recomputeInitiallyAndOnChange(this._state));\n        const movedBlockViewZones = derived(reader => {\n            const model = this._diffModel.read(reader);\n            const d = model === null || model === void 0 ? void 0 : model.diff.read(reader);\n            if (!d) {\n                return [];\n            }\n            return d.movedTexts.map(move => ({\n                move,\n                original: new PlaceholderViewZone(constObservable(move.lineRangeMapping.original.startLineNumber - 1), 18),\n                modified: new PlaceholderViewZone(constObservable(move.lineRangeMapping.modified.startLineNumber - 1), 18),\n            }));\n        });\n        this._register(applyViewZones(this._editors.original, movedBlockViewZones.map(zones => /** @description movedBlockViewZones.original */ zones.map(z => z.original))));\n        this._register(applyViewZones(this._editors.modified, movedBlockViewZones.map(zones => /** @description movedBlockViewZones.modified */ zones.map(z => z.modified))));\n        this._register(autorunWithStore((reader, store) => {\n            const blocks = movedBlockViewZones.read(reader);\n            for (const b of blocks) {\n                store.add(new MovedBlockOverlayWidget(this._editors.original, b.original, b.move, 'original', this._diffModel.get()));\n                store.add(new MovedBlockOverlayWidget(this._editors.modified, b.modified, b.move, 'modified', this._diffModel.get()));\n            }\n        }));\n        const originalHasFocus = observableSignalFromEvent('original.onDidFocusEditorWidget', e => this._editors.original.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0)));\n        const modifiedHasFocus = observableSignalFromEvent('modified.onDidFocusEditorWidget', e => this._editors.modified.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0)));\n        let lastChangedEditor = 'modified';\n        this._register(autorunHandleChanges({\n            createEmptyChangeSummary: () => undefined,\n            handleChange: (ctx, summary) => {\n                if (ctx.didChange(originalHasFocus)) {\n                    lastChangedEditor = 'original';\n                }\n                if (ctx.didChange(modifiedHasFocus)) {\n                    lastChangedEditor = 'modified';\n                }\n                return true;\n            }\n        }, reader => {\n            /** @description MovedBlocksLines.setActiveMovedTextFromCursor */\n            originalHasFocus.read(reader);\n            modifiedHasFocus.read(reader);\n            const m = this._diffModel.read(reader);\n            if (!m) {\n                return;\n            }\n            const diff = m.diff.read(reader);\n            let movedText = undefined;\n            if (diff && lastChangedEditor === 'original') {\n                const originalPos = this._editors.originalCursor.read(reader);\n                if (originalPos) {\n                    movedText = diff.movedTexts.find(m => m.lineRangeMapping.original.contains(originalPos.lineNumber));\n                }\n            }\n            if (diff && lastChangedEditor === 'modified') {\n                const modifiedPos = this._editors.modifiedCursor.read(reader);\n                if (modifiedPos) {\n                    movedText = diff.movedTexts.find(m => m.lineRangeMapping.modified.contains(modifiedPos.lineNumber));\n                }\n            }\n            if (movedText !== m.movedTextToCompare.get()) {\n                m.movedTextToCompare.set(undefined, undefined);\n            }\n            m.setActiveMovedText(movedText);\n        }));\n    }\n}\nMovedBlocksLinesFeature.movedCodeBlockPadding = 4;\nclass LinesLayout {\n    static compute(lines) {\n        const setsPerTrack = [];\n        const trackPerLineIdx = [];\n        for (const line of lines) {\n            let trackIdx = setsPerTrack.findIndex(set => !set.intersectsStrict(line));\n            if (trackIdx === -1) {\n                const maxTrackCount = 6;\n                if (setsPerTrack.length >= maxTrackCount) {\n                    trackIdx = findMaxIdx(setsPerTrack, compareBy(set => set.intersectWithRangeLength(line), numberComparator));\n                }\n                else {\n                    trackIdx = setsPerTrack.length;\n                    setsPerTrack.push(new OffsetRangeSet());\n                }\n            }\n            setsPerTrack[trackIdx].addRange(line);\n            trackPerLineIdx.push(trackIdx);\n        }\n        return new LinesLayout(setsPerTrack.length, trackPerLineIdx);\n    }\n    constructor(_trackCount, trackPerLineIdx) {\n        this._trackCount = _trackCount;\n        this.trackPerLineIdx = trackPerLineIdx;\n    }\n    getTrack(lineIdx) {\n        return this.trackPerLineIdx[lineIdx];\n    }\n    getTrackCount() {\n        return this._trackCount;\n    }\n}\nclass MovedBlockOverlayWidget extends ViewZoneOverlayWidget {\n    constructor(_editor, _viewZone, _move, _kind, _diffModel) {\n        const root = h('div.diff-hidden-lines-widget');\n        super(_editor, _viewZone, root.root);\n        this._editor = _editor;\n        this._move = _move;\n        this._kind = _kind;\n        this._diffModel = _diffModel;\n        this._nodes = h('div.diff-moved-code-block', { style: { marginRight: '4px' } }, [\n            h('div.text-content@textContent'),\n            h('div.action-bar@actionBar'),\n        ]);\n        root.root.appendChild(this._nodes.root);\n        const editorLayout = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\n        this._register(applyStyle(this._nodes.root, {\n            paddingRight: editorLayout.map(l => l.verticalScrollbarWidth)\n        }));\n        let text;\n        if (_move.changes.length > 0) {\n            text = this._kind === 'original' ? localize('codeMovedToWithChanges', 'Code moved with changes to line {0}-{1}', this._move.lineRangeMapping.modified.startLineNumber, this._move.lineRangeMapping.modified.endLineNumberExclusive - 1) : localize('codeMovedFromWithChanges', 'Code moved with changes from line {0}-{1}', this._move.lineRangeMapping.original.startLineNumber, this._move.lineRangeMapping.original.endLineNumberExclusive - 1);\n        }\n        else {\n            text = this._kind === 'original' ? localize('codeMovedTo', 'Code moved to line {0}-{1}', this._move.lineRangeMapping.modified.startLineNumber, this._move.lineRangeMapping.modified.endLineNumberExclusive - 1) : localize('codeMovedFrom', 'Code moved from line {0}-{1}', this._move.lineRangeMapping.original.startLineNumber, this._move.lineRangeMapping.original.endLineNumberExclusive - 1);\n        }\n        const actionBar = this._register(new ActionBar(this._nodes.actionBar, {\n            highlightToggledItems: true,\n        }));\n        const caption = new Action('', text, '', false);\n        actionBar.push(caption, { icon: false, label: true });\n        const actionCompare = new Action('', 'Compare', ThemeIcon.asClassName(Codicon.compareChanges), true, () => {\n            this._editor.focus();\n            this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get() === _move ? undefined : this._move, undefined);\n        });\n        this._register(autorun(reader => {\n            const isActive = this._diffModel.movedTextToCompare.read(reader) === _move;\n            actionCompare.checked = isActive;\n        }));\n        actionBar.push(actionCompare, { icon: false, label: true });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { derived } from '../../../../../base/common/observable.js';\nimport { MovedBlocksLinesFeature } from '../features/movedBlocksLinesFeature.js';\nimport { diffAddDecoration, diffAddDecorationEmpty, diffDeleteDecoration, diffDeleteDecorationEmpty, diffLineAddDecorationBackground, diffLineAddDecorationBackgroundWithIndicator, diffLineDeleteDecorationBackground, diffLineDeleteDecorationBackgroundWithIndicator, diffWholeLineAddDecoration, diffWholeLineDeleteDecoration } from '../registrations.contribution.js';\nimport { applyObservableDecorations } from '../utils.js';\nexport class DiffEditorDecorations extends Disposable {\n    constructor(_editors, _diffModel, _options, widget) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._decorations = derived(this, (reader) => {\n            var _a;\n            const diff = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader);\n            if (!diff) {\n                return null;\n            }\n            const movedTextToCompare = this._diffModel.read(reader).movedTextToCompare.read(reader);\n            const renderIndicators = this._options.renderIndicators.read(reader);\n            const showEmptyDecorations = this._options.showEmptyDecorations.read(reader);\n            const originalDecorations = [];\n            const modifiedDecorations = [];\n            if (!movedTextToCompare) {\n                for (const m of diff.mappings) {\n                    if (!m.lineRangeMapping.original.isEmpty) {\n                        originalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange(), options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n                    }\n                    if (!m.lineRangeMapping.modified.isEmpty) {\n                        modifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange(), options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n                    }\n                    if (m.lineRangeMapping.modified.isEmpty || m.lineRangeMapping.original.isEmpty) {\n                        if (!m.lineRangeMapping.original.isEmpty) {\n                            originalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange(), options: diffWholeLineDeleteDecoration });\n                        }\n                        if (!m.lineRangeMapping.modified.isEmpty) {\n                            modifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange(), options: diffWholeLineAddDecoration });\n                        }\n                    }\n                    else {\n                        for (const i of m.lineRangeMapping.innerChanges || []) {\n                            // Don't show empty markers outside the line range\n                            if (m.lineRangeMapping.original.contains(i.originalRange.startLineNumber)) {\n                                originalDecorations.push({ range: i.originalRange, options: (i.originalRange.isEmpty() && showEmptyDecorations) ? diffDeleteDecorationEmpty : diffDeleteDecoration });\n                            }\n                            if (m.lineRangeMapping.modified.contains(i.modifiedRange.startLineNumber)) {\n                                modifiedDecorations.push({ range: i.modifiedRange, options: (i.modifiedRange.isEmpty() && showEmptyDecorations) ? diffAddDecorationEmpty : diffAddDecoration });\n                            }\n                        }\n                    }\n                }\n            }\n            if (movedTextToCompare) {\n                for (const m of movedTextToCompare.changes) {\n                    const fullRangeOriginal = m.original.toInclusiveRange();\n                    if (fullRangeOriginal) {\n                        originalDecorations.push({ range: fullRangeOriginal, options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n                    }\n                    const fullRangeModified = m.modified.toInclusiveRange();\n                    if (fullRangeModified) {\n                        modifiedDecorations.push({ range: fullRangeModified, options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n                    }\n                    for (const i of m.innerChanges || []) {\n                        originalDecorations.push({ range: i.originalRange, options: diffDeleteDecoration });\n                        modifiedDecorations.push({ range: i.modifiedRange, options: diffAddDecoration });\n                    }\n                }\n            }\n            const activeMovedText = this._diffModel.read(reader).activeMovedText.read(reader);\n            for (const m of diff.movedTexts) {\n                originalDecorations.push({\n                    range: m.lineRangeMapping.original.toInclusiveRange(), options: {\n                        description: 'moved',\n                        blockClassName: 'movedOriginal' + (m === activeMovedText ? ' currentMove' : ''),\n                        blockPadding: [MovedBlocksLinesFeature.movedCodeBlockPadding, 0, MovedBlocksLinesFeature.movedCodeBlockPadding, MovedBlocksLinesFeature.movedCodeBlockPadding],\n                    }\n                });\n                modifiedDecorations.push({\n                    range: m.lineRangeMapping.modified.toInclusiveRange(), options: {\n                        description: 'moved',\n                        blockClassName: 'movedModified' + (m === activeMovedText ? ' currentMove' : ''),\n                        blockPadding: [4, 0, 4, 4],\n                    }\n                });\n            }\n            return { originalDecorations, modifiedDecorations };\n        });\n        this._register(applyObservableDecorations(this._editors.original, this._decorations.map(d => (d === null || d === void 0 ? void 0 : d.originalDecorations) || [])));\n        this._register(applyObservableDecorations(this._editors.modified, this._decorations.map(d => (d === null || d === void 0 ? void 0 : d.modifiedDecorations) || [])));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Sash } from '../../../../../base/browser/ui/sash/sash.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableValue } from '../../../../../base/common/observable.js';\nexport class DiffEditorSash extends Disposable {\n    constructor(_options, _domNode, _dimensions, _sashes) {\n        super();\n        this._options = _options;\n        this._domNode = _domNode;\n        this._dimensions = _dimensions;\n        this._sashes = _sashes;\n        this._sashRatio = observableValue(this, undefined);\n        this.sashLeft = derived(this, reader => {\n            var _a;\n            const ratio = (_a = this._sashRatio.read(reader)) !== null && _a !== void 0 ? _a : this._options.splitViewDefaultRatio.read(reader);\n            return this._computeSashLeft(ratio, reader);\n        });\n        this._sash = this._register(new Sash(this._domNode, {\n            getVerticalSashTop: (_sash) => 0,\n            getVerticalSashLeft: (_sash) => this.sashLeft.get(),\n            getVerticalSashHeight: (_sash) => this._dimensions.height.get(),\n        }, { orientation: 0 /* Orientation.VERTICAL */ }));\n        this._startSashPosition = undefined;\n        this._register(this._sash.onDidStart(() => {\n            this._startSashPosition = this.sashLeft.get();\n        }));\n        this._register(this._sash.onDidChange((e) => {\n            const contentWidth = this._dimensions.width.get();\n            const sashPosition = this._computeSashLeft((this._startSashPosition + (e.currentX - e.startX)) / contentWidth, undefined);\n            this._sashRatio.set(sashPosition / contentWidth, undefined);\n        }));\n        this._register(this._sash.onDidEnd(() => this._sash.layout()));\n        this._register(this._sash.onDidReset(() => this._sashRatio.set(undefined, undefined)));\n        this._register(autorun(reader => {\n            const sashes = this._sashes.read(reader);\n            if (sashes) {\n                this._sash.orthogonalEndSash = sashes.bottom;\n            }\n        }));\n        this._register(autorun(reader => {\n            /** @description DiffEditorSash.layoutSash */\n            const enabled = this._options.enableSplitViewResizing.read(reader);\n            this._sash.state = enabled ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n            this.sashLeft.read(reader);\n            this._dimensions.height.read(reader);\n            this._sash.layout();\n        }));\n    }\n    /** @pure */\n    _computeSashLeft(desiredRatio, reader) {\n        const contentWidth = this._dimensions.width.read(reader);\n        const midPoint = Math.floor(this._options.splitViewDefaultRatio.read(reader) * contentWidth);\n        const sashLeft = this._options.enableSplitViewResizing.read(reader) ? Math.floor(desiredRatio * contentWidth) : midPoint;\n        const MINIMUM_EDITOR_WIDTH = 100;\n        if (contentWidth <= MINIMUM_EDITOR_WIDTH * 2) {\n            return midPoint;\n        }\n        if (sashLeft < MINIMUM_EDITOR_WIDTH) {\n            return MINIMUM_EDITOR_WIDTH;\n        }\n        if (sashLeft > contentWidth - MINIMUM_EDITOR_WIDTH) {\n            return contentWidth - MINIMUM_EDITOR_WIDTH;\n        }\n        return sashLeft;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar WorkerBasedDocumentDiffProvider_1;\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IInstantiationService, createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { DetailedLineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nexport const IDiffProviderFactoryService = createDecorator('diffProviderFactoryService');\nlet WorkerBasedDiffProviderFactoryService = class WorkerBasedDiffProviderFactoryService {\n    constructor(instantiationService) {\n        this.instantiationService = instantiationService;\n    }\n    createDiffProvider(options) {\n        return this.instantiationService.createInstance(WorkerBasedDocumentDiffProvider, options);\n    }\n};\nWorkerBasedDiffProviderFactoryService = __decorate([\n    __param(0, IInstantiationService)\n], WorkerBasedDiffProviderFactoryService);\nexport { WorkerBasedDiffProviderFactoryService };\nregisterSingleton(IDiffProviderFactoryService, WorkerBasedDiffProviderFactoryService, 1 /* InstantiationType.Delayed */);\nlet WorkerBasedDocumentDiffProvider = WorkerBasedDocumentDiffProvider_1 = class WorkerBasedDocumentDiffProvider {\n    constructor(options, editorWorkerService, telemetryService) {\n        this.editorWorkerService = editorWorkerService;\n        this.telemetryService = telemetryService;\n        this.onDidChangeEventEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEventEmitter.event;\n        this.diffAlgorithm = 'advanced';\n        this.diffAlgorithmOnDidChangeSubscription = undefined;\n        this.setOptions(options);\n    }\n    dispose() {\n        var _a;\n        (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    async computeDiff(original, modified, options, cancellationToken) {\n        var _a, _b;\n        if (typeof this.diffAlgorithm !== 'string') {\n            return this.diffAlgorithm.computeDiff(original, modified, options, cancellationToken);\n        }\n        if (original.isDisposed() || modified.isDisposed()) {\n            // TODO@hediet\n            return {\n                changes: [],\n                identical: true,\n                quitEarly: false,\n                moves: [],\n            };\n        }\n        // This significantly speeds up the case when the original file is empty\n        if (original.getLineCount() === 1 && original.getLineMaxColumn(1) === 1) {\n            if (modified.getLineCount() === 1 && modified.getLineMaxColumn(1) === 1) {\n                return {\n                    changes: [],\n                    identical: true,\n                    quitEarly: false,\n                    moves: [],\n                };\n            }\n            return {\n                changes: [\n                    new DetailedLineRangeMapping(new LineRange(1, 2), new LineRange(1, modified.getLineCount() + 1), [\n                        new RangeMapping(original.getFullModelRange(), modified.getFullModelRange())\n                    ])\n                ],\n                identical: false,\n                quitEarly: false,\n                moves: [],\n            };\n        }\n        const uriKey = JSON.stringify([original.uri.toString(), modified.uri.toString()]);\n        const context = JSON.stringify([original.id, modified.id, original.getAlternativeVersionId(), modified.getAlternativeVersionId(), JSON.stringify(options)]);\n        const c = WorkerBasedDocumentDiffProvider_1.diffCache.get(uriKey);\n        if (c && c.context === context) {\n            return c.result;\n        }\n        const sw = StopWatch.create();\n        const result = await this.editorWorkerService.computeDiff(original.uri, modified.uri, options, this.diffAlgorithm);\n        const timeMs = sw.elapsed();\n        this.telemetryService.publicLog2('diffEditor.computeDiff', {\n            timeMs,\n            timedOut: (_a = result === null || result === void 0 ? void 0 : result.quitEarly) !== null && _a !== void 0 ? _a : true,\n            detectedMoves: options.computeMoves ? ((_b = result === null || result === void 0 ? void 0 : result.moves.length) !== null && _b !== void 0 ? _b : 0) : -1,\n        });\n        if (cancellationToken.isCancellationRequested) {\n            // Text models might be disposed!\n            return {\n                changes: [],\n                identical: false,\n                quitEarly: true,\n                moves: [],\n            };\n        }\n        if (!result) {\n            throw new Error('no diff result available');\n        }\n        // max 10 items in cache\n        if (WorkerBasedDocumentDiffProvider_1.diffCache.size > 10) {\n            WorkerBasedDocumentDiffProvider_1.diffCache.delete(WorkerBasedDocumentDiffProvider_1.diffCache.keys().next().value);\n        }\n        WorkerBasedDocumentDiffProvider_1.diffCache.set(uriKey, { result, context });\n        return result;\n    }\n    setOptions(newOptions) {\n        var _a;\n        let didChange = false;\n        if (newOptions.diffAlgorithm) {\n            if (this.diffAlgorithm !== newOptions.diffAlgorithm) {\n                (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\n                this.diffAlgorithmOnDidChangeSubscription = undefined;\n                this.diffAlgorithm = newOptions.diffAlgorithm;\n                if (typeof newOptions.diffAlgorithm !== 'string') {\n                    this.diffAlgorithmOnDidChangeSubscription = newOptions.diffAlgorithm.onDidChange(() => this.onDidChangeEventEmitter.fire());\n                }\n                didChange = true;\n            }\n        }\n        if (didChange) {\n            this.onDidChangeEventEmitter.fire();\n        }\n    }\n};\nWorkerBasedDocumentDiffProvider.diffCache = new Map();\nWorkerBasedDocumentDiffProvider = WorkerBasedDocumentDiffProvider_1 = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, ITelemetryService)\n], WorkerBasedDocumentDiffProvider);\nexport { WorkerBasedDocumentDiffProvider };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableSignal, observableSignalFromEvent, observableValue, transaction, waitForState } from '../../../../base/common/observable.js';\nimport { IDiffProviderFactoryService } from './diffProviderFactoryService.js';\nimport { filterWithPrevious, readHotReloadableExport } from './utils.js';\nimport { LineRange, LineRangeSet } from '../../../common/core/lineRange.js';\nimport { DefaultLinesDiffComputer } from '../../../common/diff/defaultLinesDiffComputer/defaultLinesDiffComputer.js';\nimport { DetailedLineRangeMapping, LineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { TextEditInfo } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/beforeEditPositionMapper.js';\nimport { combineTextEditInfos } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/combineTextEditInfos.js';\nimport { optimizeSequenceDiffs } from '../../../common/diff/defaultLinesDiffComputer/heuristicSequenceOptimizations.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { groupAdjacentBy } from '../../../../base/common/arrays.js';\nimport { softAssert } from '../../../../base/common/assert.js';\nlet DiffEditorViewModel = class DiffEditorViewModel extends Disposable {\n    setActiveMovedText(movedText) {\n        this._activeMovedText.set(movedText, undefined);\n    }\n    constructor(model, _options, _diffProviderFactoryService) {\n        super();\n        this.model = model;\n        this._options = _options;\n        this._diffProviderFactoryService = _diffProviderFactoryService;\n        this._isDiffUpToDate = observableValue(this, false);\n        this.isDiffUpToDate = this._isDiffUpToDate;\n        this._diff = observableValue(this, undefined);\n        this.diff = this._diff;\n        this._unchangedRegions = observableValue(this, undefined);\n        this.unchangedRegions = derived(this, r => {\n            var _a, _b;\n            if (this._options.hideUnchangedRegions.read(r)) {\n                return (_b = (_a = this._unchangedRegions.read(r)) === null || _a === void 0 ? void 0 : _a.regions) !== null && _b !== void 0 ? _b : [];\n            }\n            else {\n                // Reset state\n                transaction(tx => {\n                    var _a;\n                    for (const r of ((_a = this._unchangedRegions.get()) === null || _a === void 0 ? void 0 : _a.regions) || []) {\n                        r.collapseAll(tx);\n                    }\n                });\n                return [];\n            }\n        });\n        this.movedTextToCompare = observableValue(this, undefined);\n        this._activeMovedText = observableValue(this, undefined);\n        this._hoveredMovedText = observableValue(this, undefined);\n        this.activeMovedText = derived(this, r => { var _a, _b; return (_b = (_a = this.movedTextToCompare.read(r)) !== null && _a !== void 0 ? _a : this._hoveredMovedText.read(r)) !== null && _b !== void 0 ? _b : this._activeMovedText.read(r); });\n        this._cancellationTokenSource = new CancellationTokenSource();\n        this._diffProvider = derived(this, reader => {\n            const diffProvider = this._diffProviderFactoryService.createDiffProvider({\n                diffAlgorithm: this._options.diffAlgorithm.read(reader)\n            });\n            const onChangeSignal = observableSignalFromEvent('onDidChange', diffProvider.onDidChange);\n            return {\n                diffProvider,\n                onChangeSignal,\n            };\n        });\n        this._register(toDisposable(() => this._cancellationTokenSource.cancel()));\n        const contentChangedSignal = observableSignal('contentChangedSignal');\n        const debouncer = this._register(new RunOnceScheduler(() => contentChangedSignal.trigger(undefined), 200));\n        this._register(autorun(reader => {\n            /** @description collapse touching unchanged ranges */\n            const lastUnchangedRegions = this._unchangedRegions.read(reader);\n            if (!lastUnchangedRegions || lastUnchangedRegions.regions.some(r => r.isDragged.read(reader))) {\n                return;\n            }\n            const lastUnchangedRegionsOrigRanges = lastUnchangedRegions.originalDecorationIds\n                .map(id => model.original.getDecorationRange(id))\n                .map(r => r ? LineRange.fromRangeInclusive(r) : undefined);\n            const lastUnchangedRegionsModRanges = lastUnchangedRegions.modifiedDecorationIds\n                .map(id => model.modified.getDecorationRange(id))\n                .map(r => r ? LineRange.fromRangeInclusive(r) : undefined);\n            const updatedLastUnchangedRegions = lastUnchangedRegions.regions.map((r, idx) => (!lastUnchangedRegionsOrigRanges[idx] || !lastUnchangedRegionsModRanges[idx]) ? undefined :\n                new UnchangedRegion(lastUnchangedRegionsOrigRanges[idx].startLineNumber, lastUnchangedRegionsModRanges[idx].startLineNumber, lastUnchangedRegionsOrigRanges[idx].length, r.visibleLineCountTop.read(reader), r.visibleLineCountBottom.read(reader))).filter(isDefined);\n            const newRanges = [];\n            let didChange = false;\n            for (const touching of groupAdjacentBy(updatedLastUnchangedRegions, (a, b) => a.getHiddenModifiedRange(reader).endLineNumberExclusive === b.getHiddenModifiedRange(reader).startLineNumber)) {\n                if (touching.length > 1) {\n                    didChange = true;\n                    const sumLineCount = touching.reduce((sum, r) => sum + r.lineCount, 0);\n                    const r = new UnchangedRegion(touching[0].originalLineNumber, touching[0].modifiedLineNumber, sumLineCount, touching[0].visibleLineCountTop.get(), touching[touching.length - 1].visibleLineCountBottom.get());\n                    newRanges.push(r);\n                }\n                else {\n                    newRanges.push(touching[0]);\n                }\n            }\n            if (didChange) {\n                const originalDecorationIds = model.original.deltaDecorations(lastUnchangedRegions.originalDecorationIds, newRanges.map(r => ({ range: r.originalUnchangedRange.toInclusiveRange(), options: { description: 'unchanged' } })));\n                const modifiedDecorationIds = model.modified.deltaDecorations(lastUnchangedRegions.modifiedDecorationIds, newRanges.map(r => ({ range: r.modifiedUnchangedRange.toInclusiveRange(), options: { description: 'unchanged' } })));\n                transaction(tx => {\n                    this._unchangedRegions.set({\n                        regions: newRanges,\n                        originalDecorationIds,\n                        modifiedDecorationIds\n                    }, tx);\n                });\n            }\n        }));\n        const updateUnchangedRegions = (result, tx, reader) => {\n            const newUnchangedRegions = UnchangedRegion.fromDiffs(result.changes, model.original.getLineCount(), model.modified.getLineCount(), this._options.hideUnchangedRegionsMinimumLineCount.read(reader), this._options.hideUnchangedRegionsContextLineCount.read(reader));\n            // Transfer state from cur state\n            let visibleRegions = undefined;\n            const lastUnchangedRegions = this._unchangedRegions.get();\n            if (lastUnchangedRegions) {\n                const lastUnchangedRegionsOrigRanges = lastUnchangedRegions.originalDecorationIds\n                    .map(id => model.original.getDecorationRange(id))\n                    .map(r => r ? LineRange.fromRangeInclusive(r) : undefined);\n                const lastUnchangedRegionsModRanges = lastUnchangedRegions.modifiedDecorationIds\n                    .map(id => model.modified.getDecorationRange(id))\n                    .map(r => r ? LineRange.fromRangeInclusive(r) : undefined);\n                const updatedLastUnchangedRegions = filterWithPrevious(lastUnchangedRegions.regions\n                    .map((r, idx) => {\n                    if (!lastUnchangedRegionsOrigRanges[idx] || !lastUnchangedRegionsModRanges[idx]) {\n                        return undefined;\n                    }\n                    const length = lastUnchangedRegionsOrigRanges[idx].length;\n                    return new UnchangedRegion(lastUnchangedRegionsOrigRanges[idx].startLineNumber, lastUnchangedRegionsModRanges[idx].startLineNumber, length, \n                    // The visible area can shrink by edits -> we have to account for this\n                    Math.min(r.visibleLineCountTop.get(), length), Math.min(r.visibleLineCountBottom.get(), length - r.visibleLineCountTop.get()));\n                }).filter(isDefined), (cur, prev) => !prev || (cur.modifiedLineNumber >= prev.modifiedLineNumber + prev.lineCount && cur.originalLineNumber >= prev.originalLineNumber + prev.lineCount));\n                let hiddenRegions = updatedLastUnchangedRegions.map(r => new LineRangeMapping(r.getHiddenOriginalRange(reader), r.getHiddenModifiedRange(reader)));\n                hiddenRegions = LineRangeMapping.clip(hiddenRegions, LineRange.ofLength(1, model.original.getLineCount()), LineRange.ofLength(1, model.modified.getLineCount()));\n                visibleRegions = LineRangeMapping.inverse(hiddenRegions, model.original.getLineCount(), model.modified.getLineCount());\n            }\n            const newUnchangedRegions2 = [];\n            if (visibleRegions) {\n                for (const r of newUnchangedRegions) {\n                    const intersecting = visibleRegions.filter(f => f.original.intersectsStrict(r.originalUnchangedRange) && f.modified.intersectsStrict(r.modifiedUnchangedRange));\n                    newUnchangedRegions2.push(...r.setVisibleRanges(intersecting, tx));\n                }\n            }\n            else {\n                newUnchangedRegions2.push(...newUnchangedRegions);\n            }\n            const originalDecorationIds = model.original.deltaDecorations((lastUnchangedRegions === null || lastUnchangedRegions === void 0 ? void 0 : lastUnchangedRegions.originalDecorationIds) || [], newUnchangedRegions2.map(r => ({ range: r.originalUnchangedRange.toInclusiveRange(), options: { description: 'unchanged' } })));\n            const modifiedDecorationIds = model.modified.deltaDecorations((lastUnchangedRegions === null || lastUnchangedRegions === void 0 ? void 0 : lastUnchangedRegions.modifiedDecorationIds) || [], newUnchangedRegions2.map(r => ({ range: r.modifiedUnchangedRange.toInclusiveRange(), options: { description: 'unchanged' } })));\n            this._unchangedRegions.set({\n                regions: newUnchangedRegions2,\n                originalDecorationIds,\n                modifiedDecorationIds\n            }, tx);\n        };\n        this._register(model.modified.onDidChangeContent((e) => {\n            const diff = this._diff.get();\n            if (diff) {\n                const textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n                const result = applyModifiedEdits(this._lastDiff, textEdits, model.original, model.modified);\n                if (result) {\n                    this._lastDiff = result;\n                    transaction(tx => {\n                        this._diff.set(DiffState.fromDiffResult(this._lastDiff), tx);\n                        updateUnchangedRegions(result, tx);\n                        const currentSyncedMovedText = this.movedTextToCompare.get();\n                        this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n                    });\n                }\n            }\n            this._isDiffUpToDate.set(false, undefined);\n            debouncer.schedule();\n        }));\n        this._register(model.original.onDidChangeContent((e) => {\n            const diff = this._diff.get();\n            if (diff) {\n                const textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n                const result = applyOriginalEdits(this._lastDiff, textEdits, model.original, model.modified);\n                if (result) {\n                    this._lastDiff = result;\n                    transaction(tx => {\n                        this._diff.set(DiffState.fromDiffResult(this._lastDiff), tx);\n                        updateUnchangedRegions(result, tx);\n                        const currentSyncedMovedText = this.movedTextToCompare.get();\n                        this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n                    });\n                }\n            }\n            this._isDiffUpToDate.set(false, undefined);\n            debouncer.schedule();\n        }));\n        this._register(autorunWithStore(async (reader, store) => {\n            /** @description compute diff */\n            var _a, _b;\n            // So that they get recomputed when these settings change\n            this._options.hideUnchangedRegionsMinimumLineCount.read(reader);\n            this._options.hideUnchangedRegionsContextLineCount.read(reader);\n            debouncer.cancel();\n            contentChangedSignal.read(reader);\n            const documentDiffProvider = this._diffProvider.read(reader);\n            documentDiffProvider.onChangeSignal.read(reader);\n            readHotReloadableExport(DefaultLinesDiffComputer, reader);\n            readHotReloadableExport(optimizeSequenceDiffs, reader);\n            this._isDiffUpToDate.set(false, undefined);\n            let originalTextEditInfos = [];\n            store.add(model.original.onDidChangeContent((e) => {\n                const edits = TextEditInfo.fromModelContentChanges(e.changes);\n                originalTextEditInfos = combineTextEditInfos(originalTextEditInfos, edits);\n            }));\n            let modifiedTextEditInfos = [];\n            store.add(model.modified.onDidChangeContent((e) => {\n                const edits = TextEditInfo.fromModelContentChanges(e.changes);\n                modifiedTextEditInfos = combineTextEditInfos(modifiedTextEditInfos, edits);\n            }));\n            let result = await documentDiffProvider.diffProvider.computeDiff(model.original, model.modified, {\n                ignoreTrimWhitespace: this._options.ignoreTrimWhitespace.read(reader),\n                maxComputationTimeMs: this._options.maxComputationTimeMs.read(reader),\n                computeMoves: this._options.showMoves.read(reader),\n            }, this._cancellationTokenSource.token);\n            if (this._cancellationTokenSource.token.isCancellationRequested) {\n                return;\n            }\n            if (model.original.isDisposed() || model.modified.isDisposed()) {\n                // TODO@hediet fishy?\n                return;\n            }\n            result = normalizeDocumentDiff(result, model.original, model.modified);\n            result = (_a = applyOriginalEdits(result, originalTextEditInfos, model.original, model.modified)) !== null && _a !== void 0 ? _a : result;\n            result = (_b = applyModifiedEdits(result, modifiedTextEditInfos, model.original, model.modified)) !== null && _b !== void 0 ? _b : result;\n            transaction(tx => {\n                /** @description write diff result */\n                updateUnchangedRegions(result, tx);\n                this._lastDiff = result;\n                const state = DiffState.fromDiffResult(result);\n                this._diff.set(state, tx);\n                this._isDiffUpToDate.set(true, tx);\n                const currentSyncedMovedText = this.movedTextToCompare.get();\n                this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n            });\n        }));\n    }\n    ensureModifiedLineIsVisible(lineNumber, preference, tx) {\n        var _a, _b;\n        if (((_a = this.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0) {\n            return;\n        }\n        const unchangedRegions = ((_b = this._unchangedRegions.get()) === null || _b === void 0 ? void 0 : _b.regions) || [];\n        for (const r of unchangedRegions) {\n            if (r.getHiddenModifiedRange(undefined).contains(lineNumber)) {\n                r.showModifiedLine(lineNumber, preference, tx);\n                return;\n            }\n        }\n    }\n    ensureOriginalLineIsVisible(lineNumber, preference, tx) {\n        var _a, _b;\n        if (((_a = this.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0) {\n            return;\n        }\n        const unchangedRegions = ((_b = this._unchangedRegions.get()) === null || _b === void 0 ? void 0 : _b.regions) || [];\n        for (const r of unchangedRegions) {\n            if (r.getHiddenOriginalRange(undefined).contains(lineNumber)) {\n                r.showOriginalLine(lineNumber, preference, tx);\n                return;\n            }\n        }\n    }\n    async waitForDiff() {\n        await waitForState(this.isDiffUpToDate, s => s);\n    }\n    serializeState() {\n        const regions = this._unchangedRegions.get();\n        return {\n            collapsedRegions: regions === null || regions === void 0 ? void 0 : regions.regions.map(r => ({ range: r.getHiddenModifiedRange(undefined).serialize() }))\n        };\n    }\n    restoreSerializedState(state) {\n        var _a;\n        const ranges = (_a = state.collapsedRegions) === null || _a === void 0 ? void 0 : _a.map(r => LineRange.deserialize(r.range));\n        const regions = this._unchangedRegions.get();\n        if (!regions || !ranges) {\n            return;\n        }\n        transaction(tx => {\n            for (const r of regions.regions) {\n                for (const range of ranges) {\n                    if (r.modifiedUnchangedRange.intersect(range)) {\n                        r.setHiddenModifiedRange(range, tx);\n                        break;\n                    }\n                }\n            }\n        });\n    }\n};\nDiffEditorViewModel = __decorate([\n    __param(2, IDiffProviderFactoryService)\n], DiffEditorViewModel);\nexport { DiffEditorViewModel };\nfunction normalizeDocumentDiff(diff, original, modified) {\n    return {\n        changes: diff.changes.map(c => new DetailedLineRangeMapping(c.original, c.modified, c.innerChanges ? c.innerChanges.map(i => normalizeRangeMapping(i, original, modified)) : undefined)),\n        moves: diff.moves,\n        identical: diff.identical,\n        quitEarly: diff.quitEarly,\n    };\n}\nfunction normalizeRangeMapping(rangeMapping, original, modified) {\n    let originalRange = rangeMapping.originalRange;\n    let modifiedRange = rangeMapping.modifiedRange;\n    if ((originalRange.endColumn !== 1 || modifiedRange.endColumn !== 1) &&\n        originalRange.endColumn === original.getLineMaxColumn(originalRange.endLineNumber)\n        && modifiedRange.endColumn === modified.getLineMaxColumn(modifiedRange.endLineNumber)\n        && originalRange.endLineNumber < original.getLineCount()\n        && modifiedRange.endLineNumber < modified.getLineCount()) {\n        originalRange = originalRange.setEndPosition(originalRange.endLineNumber + 1, 1);\n        modifiedRange = modifiedRange.setEndPosition(modifiedRange.endLineNumber + 1, 1);\n    }\n    return new RangeMapping(originalRange, modifiedRange);\n}\nexport class DiffState {\n    static fromDiffResult(result) {\n        return new DiffState(result.changes.map(c => new DiffMapping(c)), result.moves || [], result.identical, result.quitEarly);\n    }\n    constructor(mappings, movedTexts, identical, quitEarly) {\n        this.mappings = mappings;\n        this.movedTexts = movedTexts;\n        this.identical = identical;\n        this.quitEarly = quitEarly;\n    }\n}\nexport class DiffMapping {\n    constructor(lineRangeMapping) {\n        this.lineRangeMapping = lineRangeMapping;\n        /*\n        readonly movedTo: MovedText | undefined,\n        readonly movedFrom: MovedText | undefined,\n\n        if (movedTo) {\n            assertFn(() =>\n                movedTo.lineRangeMapping.modifiedRange.equals(lineRangeMapping.modifiedRange)\n                && lineRangeMapping.originalRange.isEmpty\n                && !movedFrom\n            );\n        } else if (movedFrom) {\n            assertFn(() =>\n                movedFrom.lineRangeMapping.originalRange.equals(lineRangeMapping.originalRange)\n                && lineRangeMapping.modifiedRange.isEmpty\n                && !movedTo\n            );\n        }\n        */\n    }\n}\nexport class UnchangedRegion {\n    static fromDiffs(changes, originalLineCount, modifiedLineCount, minHiddenLineCount, minContext) {\n        const inversedMappings = DetailedLineRangeMapping.inverse(changes, originalLineCount, modifiedLineCount);\n        const result = [];\n        for (const mapping of inversedMappings) {\n            let origStart = mapping.original.startLineNumber;\n            let modStart = mapping.modified.startLineNumber;\n            let length = mapping.original.length;\n            const atStart = origStart === 1 && modStart === 1;\n            const atEnd = origStart + length === originalLineCount + 1 && modStart + length === modifiedLineCount + 1;\n            if ((atStart || atEnd) && length >= minContext + minHiddenLineCount) {\n                if (atStart && !atEnd) {\n                    length -= minContext;\n                }\n                if (atEnd && !atStart) {\n                    origStart += minContext;\n                    modStart += minContext;\n                    length -= minContext;\n                }\n                result.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n            }\n            else if (length >= minContext * 2 + minHiddenLineCount) {\n                origStart += minContext;\n                modStart += minContext;\n                length -= minContext * 2;\n                result.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n            }\n        }\n        return result;\n    }\n    get originalUnchangedRange() {\n        return LineRange.ofLength(this.originalLineNumber, this.lineCount);\n    }\n    get modifiedUnchangedRange() {\n        return LineRange.ofLength(this.modifiedLineNumber, this.lineCount);\n    }\n    constructor(originalLineNumber, modifiedLineNumber, lineCount, visibleLineCountTop, visibleLineCountBottom) {\n        this.originalLineNumber = originalLineNumber;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.lineCount = lineCount;\n        this._visibleLineCountTop = observableValue(this, 0);\n        this.visibleLineCountTop = this._visibleLineCountTop;\n        this._visibleLineCountBottom = observableValue(this, 0);\n        this.visibleLineCountBottom = this._visibleLineCountBottom;\n        this._shouldHideControls = derived(this, reader => /** @description isVisible */ this.visibleLineCountTop.read(reader) + this.visibleLineCountBottom.read(reader) === this.lineCount && !this.isDragged.read(reader));\n        this.isDragged = observableValue(this, undefined);\n        const visibleLineCountTop2 = Math.max(Math.min(visibleLineCountTop, this.lineCount), 0);\n        const visibleLineCountBottom2 = Math.max(Math.min(visibleLineCountBottom, this.lineCount - visibleLineCountTop), 0);\n        softAssert(visibleLineCountTop === visibleLineCountTop2);\n        softAssert(visibleLineCountBottom === visibleLineCountBottom2);\n        this._visibleLineCountTop.set(visibleLineCountTop2, undefined);\n        this._visibleLineCountBottom.set(visibleLineCountBottom2, undefined);\n    }\n    setVisibleRanges(visibleRanges, tx) {\n        const result = [];\n        const hiddenModified = new LineRangeSet(visibleRanges.map(r => r.modified)).subtractFrom(this.modifiedUnchangedRange);\n        let originalStartLineNumber = this.originalLineNumber;\n        let modifiedStartLineNumber = this.modifiedLineNumber;\n        const modifiedEndLineNumberEx = this.modifiedLineNumber + this.lineCount;\n        if (hiddenModified.ranges.length === 0) {\n            this.showAll(tx);\n            result.push(this);\n        }\n        else {\n            let i = 0;\n            for (const r of hiddenModified.ranges) {\n                const isLast = i === hiddenModified.ranges.length - 1;\n                i++;\n                const length = (isLast ? modifiedEndLineNumberEx : r.endLineNumberExclusive) - modifiedStartLineNumber;\n                const newR = new UnchangedRegion(originalStartLineNumber, modifiedStartLineNumber, length, 0, 0);\n                newR.setHiddenModifiedRange(r, tx);\n                result.push(newR);\n                originalStartLineNumber = newR.originalUnchangedRange.endLineNumberExclusive;\n                modifiedStartLineNumber = newR.modifiedUnchangedRange.endLineNumberExclusive;\n            }\n        }\n        return result;\n    }\n    shouldHideControls(reader) {\n        return this._shouldHideControls.read(reader);\n    }\n    getHiddenOriginalRange(reader) {\n        return LineRange.ofLength(this.originalLineNumber + this._visibleLineCountTop.read(reader), this.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader));\n    }\n    getHiddenModifiedRange(reader) {\n        return LineRange.ofLength(this.modifiedLineNumber + this._visibleLineCountTop.read(reader), this.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader));\n    }\n    setHiddenModifiedRange(range, tx) {\n        const visibleLineCountTop = range.startLineNumber - this.modifiedLineNumber;\n        const visibleLineCountBottom = (this.modifiedLineNumber + this.lineCount) - range.endLineNumberExclusive;\n        this.setState(visibleLineCountTop, visibleLineCountBottom, tx);\n    }\n    getMaxVisibleLineCountTop() {\n        return this.lineCount - this._visibleLineCountBottom.get();\n    }\n    getMaxVisibleLineCountBottom() {\n        return this.lineCount - this._visibleLineCountTop.get();\n    }\n    showMoreAbove(count = 10, tx) {\n        const maxVisibleLineCountTop = this.getMaxVisibleLineCountTop();\n        this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + count, maxVisibleLineCountTop), tx);\n    }\n    showMoreBelow(count = 10, tx) {\n        const maxVisibleLineCountBottom = this.lineCount - this._visibleLineCountTop.get();\n        this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + count, maxVisibleLineCountBottom), tx);\n    }\n    showAll(tx) {\n        this._visibleLineCountBottom.set(this.lineCount - this._visibleLineCountTop.get(), tx);\n    }\n    showModifiedLine(lineNumber, preference, tx) {\n        const top = lineNumber + 1 - (this.modifiedLineNumber + this._visibleLineCountTop.get());\n        const bottom = (this.modifiedLineNumber - this._visibleLineCountBottom.get() + this.lineCount) - lineNumber;\n        if (preference === 0 /* RevealPreference.FromCloserSide */ && top < bottom || preference === 1 /* RevealPreference.FromTop */) {\n            this._visibleLineCountTop.set(this._visibleLineCountTop.get() + top, tx);\n        }\n        else {\n            this._visibleLineCountBottom.set(this._visibleLineCountBottom.get() + bottom, tx);\n        }\n    }\n    showOriginalLine(lineNumber, preference, tx) {\n        const top = lineNumber - this.originalLineNumber;\n        const bottom = (this.originalLineNumber + this.lineCount) - lineNumber;\n        if (preference === 0 /* RevealPreference.FromCloserSide */ && top < bottom || preference === 1 /* RevealPreference.FromTop */) {\n            this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + bottom - top, this.getMaxVisibleLineCountTop()), tx);\n        }\n        else {\n            this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + top - bottom, this.getMaxVisibleLineCountBottom()), tx);\n        }\n    }\n    collapseAll(tx) {\n        this._visibleLineCountTop.set(0, tx);\n        this._visibleLineCountBottom.set(0, tx);\n    }\n    setState(visibleLineCountTop, visibleLineCountBottom, tx) {\n        visibleLineCountTop = Math.max(Math.min(visibleLineCountTop, this.lineCount), 0);\n        visibleLineCountBottom = Math.max(Math.min(visibleLineCountBottom, this.lineCount - visibleLineCountTop), 0);\n        this._visibleLineCountTop.set(visibleLineCountTop, tx);\n        this._visibleLineCountBottom.set(visibleLineCountBottom, tx);\n    }\n}\nfunction applyOriginalEdits(diff, textEdits, originalTextModel, modifiedTextModel) {\n    return undefined;\n    /*\n    TODO@hediet\n    if (textEdits.length === 0) {\n        return diff;\n    }\n\n    const diff2 = flip(diff);\n    const diff3 = applyModifiedEdits(diff2, textEdits, modifiedTextModel, originalTextModel);\n    if (!diff3) {\n        return undefined;\n    }\n    return flip(diff3);*/\n}\n/*\nfunction flip(diff: IDocumentDiff): IDocumentDiff {\n    return {\n        changes: diff.changes.map(c => c.flip()),\n        moves: diff.moves.map(m => m.flip()),\n        identical: diff.identical,\n        quitEarly: diff.quitEarly,\n    };\n}\n*/\nfunction applyModifiedEdits(diff, textEdits, originalTextModel, modifiedTextModel) {\n    return undefined;\n    /*\n    TODO@hediet\n    if (textEdits.length === 0) {\n        return diff;\n    }\n    if (diff.changes.some(c => !c.innerChanges) || diff.moves.length > 0) {\n        // TODO support these cases\n        return undefined;\n    }\n\n    const changes = applyModifiedEditsToLineRangeMappings(diff.changes, textEdits, originalTextModel, modifiedTextModel);\n\n    const moves = diff.moves.map(m => {\n        const newModifiedRange = applyEditToLineRange(m.lineRangeMapping.modified, textEdits);\n        return newModifiedRange ? new MovedText(\n            new SimpleLineRangeMapping(m.lineRangeMapping.original, newModifiedRange),\n            applyModifiedEditsToLineRangeMappings(m.changes, textEdits, originalTextModel, modifiedTextModel),\n        ) : undefined;\n    }).filter(isDefined);\n\n    return {\n        identical: false,\n        quitEarly: false,\n        changes,\n        moves,\n    };*/\n}\n/*\nfunction applyEditToLineRange(range: LineRange, textEdits: TextEditInfo[]): LineRange | undefined {\n    let rangeStartLineNumber = range.startLineNumber;\n    let rangeEndLineNumberEx = range.endLineNumberExclusive;\n\n    for (let i = textEdits.length - 1; i >= 0; i--) {\n        const textEdit = textEdits[i];\n        const textEditStartLineNumber = lengthGetLineCount(textEdit.startOffset) + 1;\n        const textEditEndLineNumber = lengthGetLineCount(textEdit.endOffset) + 1;\n        const newLengthLineCount = lengthGetLineCount(textEdit.newLength);\n        const delta = newLengthLineCount - (textEditEndLineNumber - textEditStartLineNumber);\n\n        if (textEditEndLineNumber < rangeStartLineNumber) {\n            // the text edit is before us\n            rangeStartLineNumber += delta;\n            rangeEndLineNumberEx += delta;\n        } else if (textEditStartLineNumber > rangeEndLineNumberEx) {\n            // the text edit is after us\n            // NOOP\n        } else if (textEditStartLineNumber < rangeStartLineNumber && rangeEndLineNumberEx < textEditEndLineNumber) {\n            // the range is fully contained in the text edit\n            return undefined;\n        } else if (textEditStartLineNumber < rangeStartLineNumber && textEditEndLineNumber <= rangeEndLineNumberEx) {\n            // the text edit ends inside our range\n            rangeStartLineNumber = textEditEndLineNumber + 1;\n            rangeStartLineNumber += delta;\n            rangeEndLineNumberEx += delta;\n        } else if (rangeStartLineNumber <= textEditStartLineNumber && textEditEndLineNumber < rangeStartLineNumber) {\n            // the text edit starts inside our range\n            rangeEndLineNumberEx = textEditStartLineNumber;\n        } else {\n            rangeEndLineNumberEx += delta;\n        }\n    }\n\n    return new LineRange(rangeStartLineNumber, rangeEndLineNumberEx);\n}\n\nfunction applyModifiedEditsToLineRangeMappings(changes: readonly LineRangeMapping[], textEdits: TextEditInfo[], originalTextModel: ITextModel, modifiedTextModel: ITextModel): LineRangeMapping[] {\n    const diffTextEdits = changes.flatMap(c => c.innerChanges!.map(c => new TextEditInfo(\n        positionToLength(c.originalRange.getStartPosition()),\n        positionToLength(c.originalRange.getEndPosition()),\n        lengthOfRange(c.modifiedRange).toLength(),\n    )));\n\n    const combined = combineTextEditInfos(diffTextEdits, textEdits);\n\n    let lastOriginalEndOffset = lengthZero;\n    let lastModifiedEndOffset = lengthZero;\n    const rangeMappings = combined.map(c => {\n        const modifiedStartOffset = lengthAdd(lastModifiedEndOffset, lengthDiffNonNegative(lastOriginalEndOffset, c.startOffset));\n        lastOriginalEndOffset = c.endOffset;\n        lastModifiedEndOffset = lengthAdd(modifiedStartOffset, c.newLength);\n\n        return new RangeMapping(\n            Range.fromPositions(lengthToPosition(c.startOffset), lengthToPosition(c.endOffset)),\n            Range.fromPositions(lengthToPosition(modifiedStartOffset), lengthToPosition(lastModifiedEndOffset)),\n        );\n    });\n\n    const newChanges = lineRangeMappingFromRangeMappings(\n        rangeMappings,\n        originalTextModel.getLinesContent(),\n        modifiedTextModel.getLinesContent(),\n    );\n    return newChanges;\n}\n*/\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { addStandardDisposableListener, getDomNodePagePosition } from '../../../../../../base/browser/dom.js';\nimport { Action } from '../../../../../../base/common/actions.js';\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { Disposable } from '../../../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../../../base/common/platform.js';\nimport { ThemeIcon } from '../../../../../../base/common/themables.js';\nimport { localize } from '../../../../../../nls.js';\nexport class InlineDiffDeletedCodeMargin extends Disposable {\n    get visibility() {\n        return this._visibility;\n    }\n    set visibility(_visibility) {\n        if (this._visibility !== _visibility) {\n            this._visibility = _visibility;\n            this._diffActions.style.visibility = _visibility ? 'visible' : 'hidden';\n        }\n    }\n    constructor(_getViewZoneId, _marginDomNode, _modifiedEditor, _diff, _editor, _viewLineCounts, _originalTextModel, _contextMenuService, _clipboardService) {\n        super();\n        this._getViewZoneId = _getViewZoneId;\n        this._marginDomNode = _marginDomNode;\n        this._modifiedEditor = _modifiedEditor;\n        this._diff = _diff;\n        this._editor = _editor;\n        this._viewLineCounts = _viewLineCounts;\n        this._originalTextModel = _originalTextModel;\n        this._contextMenuService = _contextMenuService;\n        this._clipboardService = _clipboardService;\n        this._visibility = false;\n        // make sure the diff margin shows above overlay.\n        this._marginDomNode.style.zIndex = '10';\n        this._diffActions = document.createElement('div');\n        this._diffActions.className = ThemeIcon.asClassName(Codicon.lightBulb) + ' lightbulb-glyph';\n        this._diffActions.style.position = 'absolute';\n        const lineHeight = this._modifiedEditor.getOption(67 /* EditorOption.lineHeight */);\n        this._diffActions.style.right = '0px';\n        this._diffActions.style.visibility = 'hidden';\n        this._diffActions.style.height = `${lineHeight}px`;\n        this._diffActions.style.lineHeight = `${lineHeight}px`;\n        this._marginDomNode.appendChild(this._diffActions);\n        let currentLineNumberOffset = 0;\n        const useShadowDOM = _modifiedEditor.getOption(127 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        const showContextMenu = (x, y) => {\n            var _a;\n            this._contextMenuService.showContextMenu({\n                domForShadowRoot: useShadowDOM ? (_a = _modifiedEditor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n                getAnchor: () => ({ x, y }),\n                getActions: () => {\n                    const actions = [];\n                    const isDeletion = _diff.modified.isEmpty;\n                    // default action\n                    actions.push(new Action('diff.clipboard.copyDeletedContent', isDeletion\n                        ? (_diff.original.length > 1\n                            ? localize('diff.clipboard.copyDeletedLinesContent.label', \"Copy deleted lines\")\n                            : localize('diff.clipboard.copyDeletedLinesContent.single.label', \"Copy deleted line\"))\n                        : (_diff.original.length > 1\n                            ? localize('diff.clipboard.copyChangedLinesContent.label', \"Copy changed lines\")\n                            : localize('diff.clipboard.copyChangedLinesContent.single.label', \"Copy changed line\")), undefined, true, async () => {\n                        const originalText = this._originalTextModel.getValueInRange(_diff.original.toExclusiveRange());\n                        await this._clipboardService.writeText(originalText);\n                    }));\n                    if (_diff.original.length > 1) {\n                        actions.push(new Action('diff.clipboard.copyDeletedLineContent', isDeletion\n                            ? localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", _diff.original.startLineNumber + currentLineNumberOffset)\n                            : localize('diff.clipboard.copyChangedLineContent.label', \"Copy changed line ({0})\", _diff.original.startLineNumber + currentLineNumberOffset), undefined, true, async () => {\n                            let lineContent = this._originalTextModel.getLineContent(_diff.original.startLineNumber + currentLineNumberOffset);\n                            if (lineContent === '') {\n                                // empty line -> new line\n                                const eof = this._originalTextModel.getEndOfLineSequence();\n                                lineContent = eof === 0 /* EndOfLineSequence.LF */ ? '\\n' : '\\r\\n';\n                            }\n                            await this._clipboardService.writeText(lineContent);\n                        }));\n                    }\n                    const readOnly = _modifiedEditor.getOption(91 /* EditorOption.readOnly */);\n                    if (!readOnly) {\n                        actions.push(new Action('diff.inline.revertChange', localize('diff.inline.revertChange.label', \"Revert this change\"), undefined, true, async () => {\n                            this._editor.revert(this._diff);\n                        }));\n                    }\n                    return actions;\n                },\n                autoSelectFirstItem: true\n            });\n        };\n        this._register(addStandardDisposableListener(this._diffActions, 'mousedown', e => {\n            if (!e.leftButton) {\n                return;\n            }\n            const { top, height } = getDomNodePagePosition(this._diffActions);\n            const pad = Math.floor(lineHeight / 3);\n            e.preventDefault();\n            showContextMenu(e.posx, top + height + pad);\n        }));\n        this._register(_modifiedEditor.onMouseMove((e) => {\n            if ((e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) && e.target.detail.viewZoneId === this._getViewZoneId()) {\n                currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                this.visibility = true;\n            }\n            else {\n                this.visibility = false;\n            }\n        }));\n        this._register(_modifiedEditor.onMouseDown((e) => {\n            if (!e.event.leftButton) {\n                return;\n            }\n            if (e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n                const viewZoneId = e.target.detail.viewZoneId;\n                if (viewZoneId === this._getViewZoneId()) {\n                    e.event.preventDefault();\n                    currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                    showContextMenu(e.event.posx, e.event.posy + lineHeight);\n                }\n            }\n        }));\n    }\n    _updateLightBulbPosition(marginDomNode, y, lineHeight) {\n        const { top } = getDomNodePagePosition(marginDomNode);\n        const offset = y - top;\n        const lineNumberOffset = Math.floor(offset / lineHeight);\n        const newTop = lineNumberOffset * lineHeight;\n        this._diffActions.style.top = `${newTop}px`;\n        if (this._viewLineCounts) {\n            let acc = 0;\n            for (let i = 0; i < this._viewLineCounts.length; i++) {\n                acc += this._viewLineCounts[i];\n                if (lineNumberOffset < acc) {\n                    return i;\n                }\n            }\n        }\n        return lineNumberOffset;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createTrustedTypesPolicy } from '../../../../../../base/browser/trustedTypes.js';\nimport { applyFontInfo } from '../../../../config/domFontInfo.js';\nimport { EditorFontLigatures } from '../../../../../common/config/editorOptions.js';\nimport { StringBuilder } from '../../../../../common/core/stringBuilder.js';\nimport { LineDecoration } from '../../../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../../../common/viewModel.js';\nconst ttPolicy = createTrustedTypesPolicy('diffEditorWidget', { createHTML: value => value });\nexport function renderLines(source, options, decorations, domNode) {\n    applyFontInfo(domNode, options.fontInfo);\n    const hasCharChanges = (decorations.length > 0);\n    const sb = new StringBuilder(10000);\n    let maxCharsPerLine = 0;\n    let renderedLineCount = 0;\n    const viewLineCounts = [];\n    for (let lineIndex = 0; lineIndex < source.lineTokens.length; lineIndex++) {\n        const lineNumber = lineIndex + 1;\n        const lineTokens = source.lineTokens[lineIndex];\n        const lineBreakData = source.lineBreakData[lineIndex];\n        const actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, Number.MAX_SAFE_INTEGER);\n        if (lineBreakData) {\n            let lastBreakOffset = 0;\n            for (const breakOffset of lineBreakData.breakOffsets) {\n                const viewLineTokens = lineTokens.sliceAndInflate(lastBreakOffset, breakOffset, 0);\n                maxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(renderedLineCount, viewLineTokens, LineDecoration.extractWrapped(actualDecorations, lastBreakOffset, breakOffset), hasCharChanges, source.mightContainNonBasicASCII, source.mightContainRTL, options, sb));\n                renderedLineCount++;\n                lastBreakOffset = breakOffset;\n            }\n            viewLineCounts.push(lineBreakData.breakOffsets.length);\n        }\n        else {\n            viewLineCounts.push(1);\n            maxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(renderedLineCount, lineTokens, actualDecorations, hasCharChanges, source.mightContainNonBasicASCII, source.mightContainRTL, options, sb));\n            renderedLineCount++;\n        }\n    }\n    maxCharsPerLine += options.scrollBeyondLastColumn;\n    const html = sb.build();\n    const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n    domNode.innerHTML = trustedhtml;\n    const minWidthInPx = (maxCharsPerLine * options.typicalHalfwidthCharacterWidth);\n    return {\n        heightInLines: renderedLineCount,\n        minWidthInPx,\n        viewLineCounts,\n    };\n}\nexport class LineSource {\n    constructor(lineTokens, lineBreakData, mightContainNonBasicASCII, mightContainRTL) {\n        this.lineTokens = lineTokens;\n        this.lineBreakData = lineBreakData;\n        this.mightContainNonBasicASCII = mightContainNonBasicASCII;\n        this.mightContainRTL = mightContainRTL;\n    }\n}\nexport class RenderOptions {\n    static fromEditor(editor) {\n        var _a;\n        const modifiedEditorOptions = editor.getOptions();\n        const fontInfo = modifiedEditorOptions.get(50 /* EditorOption.fontInfo */);\n        const layoutInfo = modifiedEditorOptions.get(145 /* EditorOption.layoutInfo */);\n        return new RenderOptions(((_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.getOptions().tabSize) || 0, fontInfo, modifiedEditorOptions.get(33 /* EditorOption.disableMonospaceOptimizations */), fontInfo.typicalHalfwidthCharacterWidth, modifiedEditorOptions.get(104 /* EditorOption.scrollBeyondLastColumn */), modifiedEditorOptions.get(67 /* EditorOption.lineHeight */), layoutInfo.decorationsWidth, modifiedEditorOptions.get(117 /* EditorOption.stopRenderingLineAfter */), modifiedEditorOptions.get(99 /* EditorOption.renderWhitespace */), modifiedEditorOptions.get(94 /* EditorOption.renderControlCharacters */), modifiedEditorOptions.get(51 /* EditorOption.fontLigatures */));\n    }\n    constructor(tabSize, fontInfo, disableMonospaceOptimizations, typicalHalfwidthCharacterWidth, scrollBeyondLastColumn, lineHeight, lineDecorationsWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures) {\n        this.tabSize = tabSize;\n        this.fontInfo = fontInfo;\n        this.disableMonospaceOptimizations = disableMonospaceOptimizations;\n        this.typicalHalfwidthCharacterWidth = typicalHalfwidthCharacterWidth;\n        this.scrollBeyondLastColumn = scrollBeyondLastColumn;\n        this.lineHeight = lineHeight;\n        this.lineDecorationsWidth = lineDecorationsWidth;\n        this.stopRenderingLineAfter = stopRenderingLineAfter;\n        this.renderWhitespace = renderWhitespace;\n        this.renderControlCharacters = renderControlCharacters;\n        this.fontLigatures = fontLigatures;\n    }\n}\nfunction renderOriginalLine(viewLineIdx, lineTokens, decorations, hasCharChanges, mightContainNonBasicASCII, mightContainRTL, options, sb) {\n    sb.appendString('<div class=\"view-line');\n    if (!hasCharChanges) {\n        // No char changes\n        sb.appendString(' char-delete');\n    }\n    sb.appendString('\" style=\"top:');\n    sb.appendString(String(viewLineIdx * options.lineHeight));\n    sb.appendString('px;width:1000000px;\">');\n    const lineContent = lineTokens.getLineContent();\n    const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, mightContainNonBasicASCII);\n    const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, mightContainRTL);\n    const output = renderViewLine(new RenderLineInput((options.fontInfo.isMonospace && !options.disableMonospaceOptimizations), options.fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, decorations, options.tabSize, 0, options.fontInfo.spaceWidth, options.fontInfo.middotWidth, options.fontInfo.wsmiddotWidth, options.stopRenderingLineAfter, options.renderWhitespace, options.renderControlCharacters, options.fontLigatures !== EditorFontLigatures.OFF, null // Send no selections, original line cannot be selected\n    ), sb);\n    sb.appendString('</div>');\n    return output.characterMapping.getHorizontalOffset(output.characterMapping.length);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { $, addDisposableListener } from '../../../../../../base/browser/dom.js';\nimport { ArrayQueue } from '../../../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../../../base/common/async.js';\nimport { Codicon } from '../../../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore } from '../../../../../../base/common/lifecycle.js';\nimport { autorun, derived, derivedWithStore, observableFromEvent, observableValue } from '../../../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../../../base/common/themables.js';\nimport { assertIsDefined } from '../../../../../../base/common/types.js';\nimport { applyFontInfo } from '../../../../config/domFontInfo.js';\nimport { diffDeleteDecoration, diffRemoveIcon } from '../../registrations.contribution.js';\nimport { DiffMapping } from '../../diffEditorViewModel.js';\nimport { InlineDiffDeletedCodeMargin } from './inlineDiffDeletedCodeMargin.js';\nimport { LineSource, RenderOptions, renderLines } from './renderLines.js';\nimport { animatedObservable, joinCombine } from '../../utils.js';\nimport { LineRange } from '../../../../../common/core/lineRange.js';\nimport { Position } from '../../../../../common/core/position.js';\nimport { InlineDecoration } from '../../../../../common/viewModel.js';\nimport { IClipboardService } from '../../../../../../platform/clipboard/common/clipboardService.js';\nimport { IContextMenuService } from '../../../../../../platform/contextview/browser/contextView.js';\n/**\n * Ensures both editors have the same height by aligning unchanged lines.\n * In inline view mode, inserts viewzones to show deleted code from the original text model in the modified code editor.\n * Synchronizes scrolling.\n *\n * Make sure to add the view zones!\n */\nlet DiffEditorViewZones = class DiffEditorViewZones extends Disposable {\n    constructor(_targetWindow, _editors, _diffModel, _options, _diffEditorWidget, _canIgnoreViewZoneUpdateEvent, _origViewZonesToIgnore, _modViewZonesToIgnore, _clipboardService, _contextMenuService) {\n        super();\n        this._targetWindow = _targetWindow;\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._diffEditorWidget = _diffEditorWidget;\n        this._canIgnoreViewZoneUpdateEvent = _canIgnoreViewZoneUpdateEvent;\n        this._origViewZonesToIgnore = _origViewZonesToIgnore;\n        this._modViewZonesToIgnore = _modViewZonesToIgnore;\n        this._clipboardService = _clipboardService;\n        this._contextMenuService = _contextMenuService;\n        this._originalTopPadding = observableValue(this, 0);\n        this._originalScrollOffset = observableValue(this, 0);\n        this._originalScrollOffsetAnimated = animatedObservable(this._targetWindow, this._originalScrollOffset, this._store);\n        this._modifiedTopPadding = observableValue(this, 0);\n        this._modifiedScrollOffset = observableValue(this, 0);\n        this._modifiedScrollOffsetAnimated = animatedObservable(this._targetWindow, this._modifiedScrollOffset, this._store);\n        const state = observableValue('invalidateAlignmentsState', 0);\n        const updateImmediately = this._register(new RunOnceScheduler(() => {\n            state.set(state.get() + 1, undefined);\n        }, 0));\n        this._register(this._editors.original.onDidChangeViewZones((_args) => { if (!this._canIgnoreViewZoneUpdateEvent()) {\n            updateImmediately.schedule();\n        } }));\n        this._register(this._editors.modified.onDidChangeViewZones((_args) => { if (!this._canIgnoreViewZoneUpdateEvent()) {\n            updateImmediately.schedule();\n        } }));\n        this._register(this._editors.original.onDidChangeConfiguration((args) => {\n            if (args.hasChanged(146 /* EditorOption.wrappingInfo */) || args.hasChanged(67 /* EditorOption.lineHeight */)) {\n                updateImmediately.schedule();\n            }\n        }));\n        this._register(this._editors.modified.onDidChangeConfiguration((args) => {\n            if (args.hasChanged(146 /* EditorOption.wrappingInfo */) || args.hasChanged(67 /* EditorOption.lineHeight */)) {\n                updateImmediately.schedule();\n            }\n        }));\n        const originalModelTokenizationCompleted = this._diffModel.map(m => m ? observableFromEvent(m.model.original.onDidChangeTokens, () => m.model.original.tokenization.backgroundTokenizationState === 2 /* BackgroundTokenizationState.Completed */) : undefined).map((m, reader) => m === null || m === void 0 ? void 0 : m.read(reader));\n        const alignments = derived((reader) => {\n            /** @description alignments */\n            const diffModel = this._diffModel.read(reader);\n            const diff = diffModel === null || diffModel === void 0 ? void 0 : diffModel.diff.read(reader);\n            if (!diffModel || !diff) {\n                return null;\n            }\n            state.read(reader);\n            const renderSideBySide = this._options.renderSideBySide.read(reader);\n            const innerHunkAlignment = renderSideBySide;\n            return computeRangeAlignment(this._editors.original, this._editors.modified, diff.mappings, this._origViewZonesToIgnore, this._modViewZonesToIgnore, innerHunkAlignment);\n        });\n        const alignmentsSyncedMovedText = derived((reader) => {\n            var _a;\n            /** @description alignmentsSyncedMovedText */\n            const syncedMovedText = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader);\n            if (!syncedMovedText) {\n                return null;\n            }\n            state.read(reader);\n            const mappings = syncedMovedText.changes.map(c => new DiffMapping(c));\n            // TODO dont include alignments outside syncedMovedText\n            return computeRangeAlignment(this._editors.original, this._editors.modified, mappings, this._origViewZonesToIgnore, this._modViewZonesToIgnore, true);\n        });\n        function createFakeLinesDiv() {\n            const r = document.createElement('div');\n            r.className = 'diagonal-fill';\n            return r;\n        }\n        const alignmentViewZonesDisposables = this._register(new DisposableStore());\n        this.viewZones = derivedWithStore(this, (reader, store) => {\n            var _a, _b, _c, _d, _e, _f, _g, _h;\n            alignmentViewZonesDisposables.clear();\n            const alignmentsVal = alignments.read(reader) || [];\n            const origViewZones = [];\n            const modViewZones = [];\n            const modifiedTopPaddingVal = this._modifiedTopPadding.read(reader);\n            if (modifiedTopPaddingVal > 0) {\n                modViewZones.push({\n                    afterLineNumber: 0,\n                    domNode: document.createElement('div'),\n                    heightInPx: modifiedTopPaddingVal,\n                    showInHiddenAreas: true,\n                    suppressMouseDown: true,\n                });\n            }\n            const originalTopPaddingVal = this._originalTopPadding.read(reader);\n            if (originalTopPaddingVal > 0) {\n                origViewZones.push({\n                    afterLineNumber: 0,\n                    domNode: document.createElement('div'),\n                    heightInPx: originalTopPaddingVal,\n                    showInHiddenAreas: true,\n                    suppressMouseDown: true,\n                });\n            }\n            const renderSideBySide = this._options.renderSideBySide.read(reader);\n            const deletedCodeLineBreaksComputer = !renderSideBySide ? (_a = this._editors.modified._getViewModel()) === null || _a === void 0 ? void 0 : _a.createLineBreaksComputer() : undefined;\n            if (deletedCodeLineBreaksComputer) {\n                const originalModel = this._editors.original.getModel();\n                for (const a of alignmentsVal) {\n                    if (a.diff) {\n                        for (let i = a.originalRange.startLineNumber; i < a.originalRange.endLineNumberExclusive; i++) {\n                            // `i` can be out of bound when the diff has not been updated yet.\n                            // In this case, we do an early return.\n                            // TODO@hediet: Fix this by applying the edit directly to the diff model, so that the diff is always valid.\n                            if (i > originalModel.getLineCount()) {\n                                return { orig: origViewZones, mod: modViewZones };\n                            }\n                            deletedCodeLineBreaksComputer === null || deletedCodeLineBreaksComputer === void 0 ? void 0 : deletedCodeLineBreaksComputer.addRequest(originalModel.getLineContent(i), null, null);\n                        }\n                    }\n                }\n            }\n            const lineBreakData = (_b = deletedCodeLineBreaksComputer === null || deletedCodeLineBreaksComputer === void 0 ? void 0 : deletedCodeLineBreaksComputer.finalize()) !== null && _b !== void 0 ? _b : [];\n            let lineBreakDataIdx = 0;\n            const modLineHeight = this._editors.modified.getOption(67 /* EditorOption.lineHeight */);\n            const syncedMovedText = (_c = this._diffModel.read(reader)) === null || _c === void 0 ? void 0 : _c.movedTextToCompare.read(reader);\n            const mightContainNonBasicASCII = (_e = (_d = this._editors.original.getModel()) === null || _d === void 0 ? void 0 : _d.mightContainNonBasicASCII()) !== null && _e !== void 0 ? _e : false;\n            const mightContainRTL = (_g = (_f = this._editors.original.getModel()) === null || _f === void 0 ? void 0 : _f.mightContainRTL()) !== null && _g !== void 0 ? _g : false;\n            const renderOptions = RenderOptions.fromEditor(this._editors.modified);\n            for (const a of alignmentsVal) {\n                if (a.diff && !renderSideBySide) {\n                    if (!a.originalRange.isEmpty) {\n                        originalModelTokenizationCompleted.read(reader); // Update view-zones once tokenization completes\n                        const deletedCodeDomNode = document.createElement('div');\n                        deletedCodeDomNode.classList.add('view-lines', 'line-delete', 'monaco-mouse-cursor-text');\n                        const originalModel = this._editors.original.getModel();\n                        // `a.originalRange` can be out of bound when the diff has not been updated yet.\n                        // In this case, we do an early return.\n                        // TODO@hediet: Fix this by applying the edit directly to the diff model, so that the diff is always valid.\n                        if (a.originalRange.endLineNumberExclusive - 1 > originalModel.getLineCount()) {\n                            return { orig: origViewZones, mod: modViewZones };\n                        }\n                        const source = new LineSource(a.originalRange.mapToLineArray(l => originalModel.tokenization.getLineTokens(l)), a.originalRange.mapToLineArray(_ => lineBreakData[lineBreakDataIdx++]), mightContainNonBasicASCII, mightContainRTL);\n                        const decorations = [];\n                        for (const i of a.diff.innerChanges || []) {\n                            decorations.push(new InlineDecoration(i.originalRange.delta(-(a.diff.original.startLineNumber - 1)), diffDeleteDecoration.className, 0 /* InlineDecorationType.Regular */));\n                        }\n                        const result = renderLines(source, renderOptions, decorations, deletedCodeDomNode);\n                        const marginDomNode = document.createElement('div');\n                        marginDomNode.className = 'inline-deleted-margin-view-zone';\n                        applyFontInfo(marginDomNode, renderOptions.fontInfo);\n                        if (this._options.renderIndicators.read(reader)) {\n                            for (let i = 0; i < result.heightInLines; i++) {\n                                const marginElement = document.createElement('div');\n                                marginElement.className = `delete-sign ${ThemeIcon.asClassName(diffRemoveIcon)}`;\n                                marginElement.setAttribute('style', `position:absolute;top:${i * modLineHeight}px;width:${renderOptions.lineDecorationsWidth}px;height:${modLineHeight}px;right:0;`);\n                                marginDomNode.appendChild(marginElement);\n                            }\n                        }\n                        let zoneId = undefined;\n                        alignmentViewZonesDisposables.add(new InlineDiffDeletedCodeMargin(() => assertIsDefined(zoneId), marginDomNode, this._editors.modified, a.diff, this._diffEditorWidget, result.viewLineCounts, this._editors.original.getModel(), this._contextMenuService, this._clipboardService));\n                        for (let i = 0; i < result.viewLineCounts.length; i++) {\n                            const count = result.viewLineCounts[i];\n                            // Account for wrapped lines in the (collapsed) original editor (which doesn't wrap lines).\n                            if (count > 1) {\n                                origViewZones.push({\n                                    afterLineNumber: a.originalRange.startLineNumber + i,\n                                    domNode: createFakeLinesDiv(),\n                                    heightInPx: (count - 1) * modLineHeight,\n                                    showInHiddenAreas: true,\n                                    suppressMouseDown: true,\n                                });\n                            }\n                        }\n                        modViewZones.push({\n                            afterLineNumber: a.modifiedRange.startLineNumber - 1,\n                            domNode: deletedCodeDomNode,\n                            heightInPx: result.heightInLines * modLineHeight,\n                            minWidthInPx: result.minWidthInPx,\n                            marginDomNode,\n                            setZoneId(id) { zoneId = id; },\n                            showInHiddenAreas: true,\n                            suppressMouseDown: true,\n                        });\n                    }\n                    const marginDomNode = document.createElement('div');\n                    marginDomNode.className = 'gutter-delete';\n                    origViewZones.push({\n                        afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: a.modifiedHeightInPx,\n                        marginDomNode,\n                        showInHiddenAreas: true,\n                        suppressMouseDown: true,\n                    });\n                }\n                else {\n                    const delta = a.modifiedHeightInPx - a.originalHeightInPx;\n                    if (delta > 0) {\n                        if (syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.original.delta(-1).deltaLength(2).contains(a.originalRange.endLineNumberExclusive - 1)) {\n                            continue;\n                        }\n                        origViewZones.push({\n                            afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                            domNode: createFakeLinesDiv(),\n                            heightInPx: delta,\n                            showInHiddenAreas: true,\n                            suppressMouseDown: true,\n                        });\n                    }\n                    else {\n                        if (syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(a.modifiedRange.endLineNumberExclusive - 1)) {\n                            continue;\n                        }\n                        function createViewZoneMarginArrow() {\n                            const arrow = document.createElement('div');\n                            arrow.className = 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight);\n                            store.add(addDisposableListener(arrow, 'mousedown', e => e.stopPropagation()));\n                            store.add(addDisposableListener(arrow, 'click', e => {\n                                e.stopPropagation();\n                                _diffEditorWidget.revert(a.diff);\n                            }));\n                            return $('div', {}, arrow);\n                        }\n                        let marginDomNode = undefined;\n                        if (a.diff && a.diff.modified.isEmpty && this._options.shouldRenderOldRevertArrows.read(reader)) {\n                            marginDomNode = createViewZoneMarginArrow();\n                        }\n                        modViewZones.push({\n                            afterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n                            domNode: createFakeLinesDiv(),\n                            heightInPx: -delta,\n                            marginDomNode,\n                            showInHiddenAreas: true,\n                            suppressMouseDown: true,\n                        });\n                    }\n                }\n            }\n            for (const a of (_h = alignmentsSyncedMovedText.read(reader)) !== null && _h !== void 0 ? _h : []) {\n                if (!(syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.original.intersect(a.originalRange))\n                    || !(syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.modified.intersect(a.modifiedRange))) {\n                    // ignore unrelated alignments outside the synced moved text\n                    continue;\n                }\n                const delta = a.modifiedHeightInPx - a.originalHeightInPx;\n                if (delta > 0) {\n                    origViewZones.push({\n                        afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: delta,\n                        showInHiddenAreas: true,\n                        suppressMouseDown: true,\n                    });\n                }\n                else {\n                    modViewZones.push({\n                        afterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: -delta,\n                        showInHiddenAreas: true,\n                        suppressMouseDown: true,\n                    });\n                }\n            }\n            return { orig: origViewZones, mod: modViewZones };\n        });\n        let ignoreChange = false;\n        this._register(this._editors.original.onDidScrollChange(e => {\n            if (e.scrollLeftChanged && !ignoreChange) {\n                ignoreChange = true;\n                this._editors.modified.setScrollLeft(e.scrollLeft);\n                ignoreChange = false;\n            }\n        }));\n        this._register(this._editors.modified.onDidScrollChange(e => {\n            if (e.scrollLeftChanged && !ignoreChange) {\n                ignoreChange = true;\n                this._editors.original.setScrollLeft(e.scrollLeft);\n                ignoreChange = false;\n            }\n        }));\n        this._originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => /** @description original.getScrollTop */ this._editors.original.getScrollTop());\n        this._modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => /** @description modified.getScrollTop */ this._editors.modified.getScrollTop());\n        // origExtraHeight + origOffset - origScrollTop = modExtraHeight + modOffset - modScrollTop\n        // origScrollTop = origExtraHeight + origOffset - modExtraHeight - modOffset + modScrollTop\n        // modScrollTop = modExtraHeight + modOffset - origExtraHeight - origOffset + origScrollTop\n        // origOffset - modOffset = heightOfLines(1..Y) - heightOfLines(1..X)\n        // origScrollTop >= 0, modScrollTop >= 0\n        this._register(autorun(reader => {\n            /** @description update scroll modified */\n            const newScrollTopModified = this._originalScrollTop.read(reader)\n                - (this._originalScrollOffsetAnimated.get() - this._modifiedScrollOffsetAnimated.read(reader))\n                - (this._originalTopPadding.get() - this._modifiedTopPadding.read(reader));\n            if (newScrollTopModified !== this._editors.modified.getScrollTop()) {\n                this._editors.modified.setScrollTop(newScrollTopModified, 1 /* ScrollType.Immediate */);\n            }\n        }));\n        this._register(autorun(reader => {\n            /** @description update scroll original */\n            const newScrollTopOriginal = this._modifiedScrollTop.read(reader)\n                - (this._modifiedScrollOffsetAnimated.get() - this._originalScrollOffsetAnimated.read(reader))\n                - (this._modifiedTopPadding.get() - this._originalTopPadding.read(reader));\n            if (newScrollTopOriginal !== this._editors.original.getScrollTop()) {\n                this._editors.original.setScrollTop(newScrollTopOriginal, 1 /* ScrollType.Immediate */);\n            }\n        }));\n        this._register(autorun(reader => {\n            var _a;\n            /** @description update editor top offsets */\n            const m = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader);\n            let deltaOrigToMod = 0;\n            if (m) {\n                const trueTopOriginal = this._editors.original.getTopForLineNumber(m.lineRangeMapping.original.startLineNumber, true) - this._originalTopPadding.get();\n                const trueTopModified = this._editors.modified.getTopForLineNumber(m.lineRangeMapping.modified.startLineNumber, true) - this._modifiedTopPadding.get();\n                deltaOrigToMod = trueTopModified - trueTopOriginal;\n            }\n            if (deltaOrigToMod > 0) {\n                this._modifiedTopPadding.set(0, undefined);\n                this._originalTopPadding.set(deltaOrigToMod, undefined);\n            }\n            else if (deltaOrigToMod < 0) {\n                this._modifiedTopPadding.set(-deltaOrigToMod, undefined);\n                this._originalTopPadding.set(0, undefined);\n            }\n            else {\n                setTimeout(() => {\n                    this._modifiedTopPadding.set(0, undefined);\n                    this._originalTopPadding.set(0, undefined);\n                }, 400);\n            }\n            if (this._editors.modified.hasTextFocus()) {\n                this._originalScrollOffset.set(this._modifiedScrollOffset.get() - deltaOrigToMod, undefined, true);\n            }\n            else {\n                this._modifiedScrollOffset.set(this._originalScrollOffset.get() + deltaOrigToMod, undefined, true);\n            }\n        }));\n    }\n};\nDiffEditorViewZones = __decorate([\n    __param(8, IClipboardService),\n    __param(9, IContextMenuService)\n], DiffEditorViewZones);\nexport { DiffEditorViewZones };\nfunction computeRangeAlignment(originalEditor, modifiedEditor, diffs, originalEditorAlignmentViewZones, modifiedEditorAlignmentViewZones, innerHunkAlignment) {\n    const originalLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(originalEditor, originalEditorAlignmentViewZones));\n    const modifiedLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(modifiedEditor, modifiedEditorAlignmentViewZones));\n    const origLineHeight = originalEditor.getOption(67 /* EditorOption.lineHeight */);\n    const modLineHeight = modifiedEditor.getOption(67 /* EditorOption.lineHeight */);\n    const result = [];\n    let lastOriginalLineNumber = 0;\n    let lastModifiedLineNumber = 0;\n    function handleAlignmentsOutsideOfDiffs(untilOriginalLineNumberExclusive, untilModifiedLineNumberExclusive) {\n        while (true) {\n            let origNext = originalLineHeightOverrides.peek();\n            let modNext = modifiedLineHeightOverrides.peek();\n            if (origNext && origNext.lineNumber >= untilOriginalLineNumberExclusive) {\n                origNext = undefined;\n            }\n            if (modNext && modNext.lineNumber >= untilModifiedLineNumberExclusive) {\n                modNext = undefined;\n            }\n            if (!origNext && !modNext) {\n                break;\n            }\n            const distOrig = origNext ? origNext.lineNumber - lastOriginalLineNumber : Number.MAX_VALUE;\n            const distNext = modNext ? modNext.lineNumber - lastModifiedLineNumber : Number.MAX_VALUE;\n            if (distOrig < distNext) {\n                originalLineHeightOverrides.dequeue();\n                modNext = {\n                    lineNumber: origNext.lineNumber - lastOriginalLineNumber + lastModifiedLineNumber,\n                    heightInPx: 0,\n                };\n            }\n            else if (distOrig > distNext) {\n                modifiedLineHeightOverrides.dequeue();\n                origNext = {\n                    lineNumber: modNext.lineNumber - lastModifiedLineNumber + lastOriginalLineNumber,\n                    heightInPx: 0,\n                };\n            }\n            else {\n                originalLineHeightOverrides.dequeue();\n                modifiedLineHeightOverrides.dequeue();\n            }\n            result.push({\n                originalRange: LineRange.ofLength(origNext.lineNumber, 1),\n                modifiedRange: LineRange.ofLength(modNext.lineNumber, 1),\n                originalHeightInPx: origLineHeight + origNext.heightInPx,\n                modifiedHeightInPx: modLineHeight + modNext.heightInPx,\n                diff: undefined,\n            });\n        }\n    }\n    for (const m of diffs) {\n        const c = m.lineRangeMapping;\n        handleAlignmentsOutsideOfDiffs(c.original.startLineNumber, c.modified.startLineNumber);\n        let first = true;\n        let lastModLineNumber = c.modified.startLineNumber;\n        let lastOrigLineNumber = c.original.startLineNumber;\n        function emitAlignment(origLineNumberExclusive, modLineNumberExclusive) {\n            var _a, _b, _c, _d;\n            if (origLineNumberExclusive < lastOrigLineNumber || modLineNumberExclusive < lastModLineNumber) {\n                return;\n            }\n            if (first) {\n                first = false;\n            }\n            else if (origLineNumberExclusive === lastOrigLineNumber || modLineNumberExclusive === lastModLineNumber) {\n                return;\n            }\n            const originalRange = new LineRange(lastOrigLineNumber, origLineNumberExclusive);\n            const modifiedRange = new LineRange(lastModLineNumber, modLineNumberExclusive);\n            if (originalRange.isEmpty && modifiedRange.isEmpty) {\n                return;\n            }\n            const originalAdditionalHeight = (_b = (_a = originalLineHeightOverrides\n                .takeWhile(v => v.lineNumber < origLineNumberExclusive)) === null || _a === void 0 ? void 0 : _a.reduce((p, c) => p + c.heightInPx, 0)) !== null && _b !== void 0 ? _b : 0;\n            const modifiedAdditionalHeight = (_d = (_c = modifiedLineHeightOverrides\n                .takeWhile(v => v.lineNumber < modLineNumberExclusive)) === null || _c === void 0 ? void 0 : _c.reduce((p, c) => p + c.heightInPx, 0)) !== null && _d !== void 0 ? _d : 0;\n            result.push({\n                originalRange,\n                modifiedRange,\n                originalHeightInPx: originalRange.length * origLineHeight + originalAdditionalHeight,\n                modifiedHeightInPx: modifiedRange.length * modLineHeight + modifiedAdditionalHeight,\n                diff: m.lineRangeMapping,\n            });\n            lastOrigLineNumber = origLineNumberExclusive;\n            lastModLineNumber = modLineNumberExclusive;\n        }\n        if (innerHunkAlignment) {\n            for (const i of c.innerChanges || []) {\n                if (i.originalRange.startColumn > 1 && i.modifiedRange.startColumn > 1) {\n                    // There is some unmodified text on this line before the diff\n                    emitAlignment(i.originalRange.startLineNumber, i.modifiedRange.startLineNumber);\n                }\n                const originalModel = originalEditor.getModel();\n                // When the diff is invalid, the ranges might be out of bounds (this should be fixed in the diff model by applying edits directly).\n                const maxColumn = i.originalRange.endLineNumber <= originalModel.getLineCount() ? originalModel.getLineMaxColumn(i.originalRange.endLineNumber) : Number.MAX_SAFE_INTEGER;\n                if (i.originalRange.endColumn < maxColumn) {\n                    // // There is some unmodified text on this line after the diff\n                    emitAlignment(i.originalRange.endLineNumber, i.modifiedRange.endLineNumber);\n                }\n            }\n        }\n        emitAlignment(c.original.endLineNumberExclusive, c.modified.endLineNumberExclusive);\n        lastOriginalLineNumber = c.original.endLineNumberExclusive;\n        lastModifiedLineNumber = c.modified.endLineNumberExclusive;\n    }\n    handleAlignmentsOutsideOfDiffs(Number.MAX_VALUE, Number.MAX_VALUE);\n    return result;\n}\nfunction getAdditionalLineHeights(editor, viewZonesToIgnore) {\n    const viewZoneHeights = [];\n    const wrappingZoneHeights = [];\n    const hasWrapping = editor.getOption(146 /* EditorOption.wrappingInfo */).wrappingColumn !== -1;\n    const coordinatesConverter = editor._getViewModel().coordinatesConverter;\n    const editorLineHeight = editor.getOption(67 /* EditorOption.lineHeight */);\n    if (hasWrapping) {\n        for (let i = 1; i <= editor.getModel().getLineCount(); i++) {\n            const lineCount = coordinatesConverter.getModelLineViewLineCount(i);\n            if (lineCount > 1) {\n                wrappingZoneHeights.push({ lineNumber: i, heightInPx: editorLineHeight * (lineCount - 1) });\n            }\n        }\n    }\n    for (const w of editor.getWhitespaces()) {\n        if (viewZonesToIgnore.has(w.id)) {\n            continue;\n        }\n        const modelLineNumber = w.afterLineNumber === 0 ? 0 : coordinatesConverter.convertViewPositionToModelPosition(new Position(w.afterLineNumber, 1)).lineNumber;\n        viewZoneHeights.push({ lineNumber: modelLineNumber, heightInPx: w.height });\n    }\n    const result = joinCombine(viewZoneHeights, wrappingZoneHeights, v => v.lineNumber, (v1, v2) => ({ lineNumber: v1.lineNumber, heightInPx: v1.heightInPx + v2.heightInPx }));\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { h, reset } from '../../../../../base/browser/dom.js';\nimport { Disposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, observableFromEvent, observableSignal, observableSignalFromEvent, observableValue, transaction } from '../../../../../base/common/observable.js';\nimport { LineRange } from '../../../../common/core/lineRange.js';\nimport { OffsetRange } from '../../../../common/core/offsetRange.js';\nexport class EditorGutter extends Disposable {\n    constructor(_editor, _domNode, itemProvider) {\n        super();\n        this._editor = _editor;\n        this._domNode = _domNode;\n        this.itemProvider = itemProvider;\n        this.scrollTop = observableFromEvent(this._editor.onDidScrollChange, (e) => /** @description editor.onDidScrollChange */ this._editor.getScrollTop());\n        this.isScrollTopZero = this.scrollTop.map((scrollTop) => /** @description isScrollTopZero */ scrollTop === 0);\n        this.modelAttached = observableFromEvent(this._editor.onDidChangeModel, (e) => /** @description editor.onDidChangeModel */ this._editor.hasModel());\n        this.editorOnDidChangeViewZones = observableSignalFromEvent('onDidChangeViewZones', this._editor.onDidChangeViewZones);\n        this.editorOnDidContentSizeChange = observableSignalFromEvent('onDidContentSizeChange', this._editor.onDidContentSizeChange);\n        this.domNodeSizeChanged = observableSignal('domNodeSizeChanged');\n        this.views = new Map();\n        this._domNode.className = 'gutter monaco-editor';\n        const scrollDecoration = this._domNode.appendChild(h('div.scroll-decoration', { role: 'presentation', ariaHidden: 'true', style: { width: '100%' } })\n            .root);\n        const o = new ResizeObserver(() => {\n            transaction(tx => {\n                /** @description ResizeObserver: size changed */\n                this.domNodeSizeChanged.trigger(tx);\n            });\n        });\n        o.observe(this._domNode);\n        this._register(toDisposable(() => o.disconnect()));\n        this._register(autorun(reader => {\n            /** @description update scroll decoration */\n            scrollDecoration.className = this.isScrollTopZero.read(reader) ? '' : 'scroll-decoration';\n        }));\n        this._register(autorun(reader => /** @description EditorGutter.Render */ this.render(reader)));\n    }\n    dispose() {\n        super.dispose();\n        reset(this._domNode);\n    }\n    render(reader) {\n        if (!this.modelAttached.read(reader)) {\n            return;\n        }\n        this.domNodeSizeChanged.read(reader);\n        this.editorOnDidChangeViewZones.read(reader);\n        this.editorOnDidContentSizeChange.read(reader);\n        const scrollTop = this.scrollTop.read(reader);\n        const visibleRanges = this._editor.getVisibleRanges();\n        const unusedIds = new Set(this.views.keys());\n        const viewRange = OffsetRange.ofStartAndLength(0, this._domNode.clientHeight);\n        if (!viewRange.isEmpty) {\n            for (const visibleRange of visibleRanges) {\n                const visibleRange2 = new LineRange(visibleRange.startLineNumber, visibleRange.endLineNumber + 1);\n                const gutterItems = this.itemProvider.getIntersectingGutterItems(visibleRange2, reader);\n                transaction(tx => {\n                    /** EditorGutter.render */\n                    for (const gutterItem of gutterItems) {\n                        if (!gutterItem.range.intersect(visibleRange2)) {\n                            continue;\n                        }\n                        unusedIds.delete(gutterItem.id);\n                        let view = this.views.get(gutterItem.id);\n                        if (!view) {\n                            const viewDomNode = document.createElement('div');\n                            this._domNode.appendChild(viewDomNode);\n                            const gutterItemObs = observableValue('item', gutterItem);\n                            const itemView = this.itemProvider.createView(gutterItemObs, viewDomNode);\n                            view = new ManagedGutterItemView(gutterItemObs, itemView, viewDomNode);\n                            this.views.set(gutterItem.id, view);\n                        }\n                        else {\n                            view.item.set(gutterItem, tx);\n                        }\n                        const top = gutterItem.range.startLineNumber <= this._editor.getModel().getLineCount()\n                            ? this._editor.getTopForLineNumber(gutterItem.range.startLineNumber, true) - scrollTop\n                            : this._editor.getBottomForLineNumber(gutterItem.range.startLineNumber - 1, false) - scrollTop;\n                        const bottom = gutterItem.range.isEmpty\n                            // Don't trust that `getBottomForLineNumber` for the previous line equals `getTopForLineNumber` for the current one.\n                            ? top\n                            : (this._editor.getBottomForLineNumber(gutterItem.range.endLineNumberExclusive - 1, true) - scrollTop);\n                        const height = bottom - top;\n                        view.domNode.style.top = `${top}px`;\n                        view.domNode.style.height = `${height}px`;\n                        view.gutterItemView.layout(OffsetRange.ofStartAndLength(top, height), viewRange);\n                    }\n                });\n            }\n        }\n        for (const id of unusedIds) {\n            const view = this.views.get(id);\n            view.gutterItemView.dispose();\n            this._domNode.removeChild(view.domNode);\n            this.views.delete(id);\n        }\n    }\n}\nclass ManagedGutterItemView {\n    constructor(item, gutterItemView, domNode) {\n        this.item = item;\n        this.gutterItemView = gutterItemView;\n        this.domNode = domNode;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { EventType, addDisposableListener, h } from '../../../../../base/browser/dom.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableFromEvent, observableValue } from '../../../../../base/common/observable.js';\nimport { appendRemoveOnDispose, applyStyle, prependRemoveOnDispose } from '../utils.js';\nimport { EditorGutter } from '../utils/editorGutter.js';\nimport { ActionRunnerWithContext } from '../../multiDiffEditor/utils.js';\nimport { LineRange, LineRangeSet } from '../../../../common/core/lineRange.js';\nimport { OffsetRange } from '../../../../common/core/offsetRange.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { TextEdit } from '../../../../common/core/textEdit.js';\nimport { DetailedLineRangeMapping } from '../../../../common/diff/rangeMapping.js';\nimport { TextModelText } from '../../../../common/model/textModelText.js';\nimport { MenuWorkbenchToolBar } from '../../../../../platform/actions/browser/toolbar.js';\nimport { IMenuService, MenuId } from '../../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { WorkbenchHoverDelegate } from '../../../../../platform/hover/browser/hover.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nconst emptyArr = [];\nconst width = 35;\nlet DiffEditorGutter = class DiffEditorGutter extends Disposable {\n    constructor(diffEditorRoot, _diffModel, _editors, _instantiationService, _contextKeyService, _menuService) {\n        super();\n        this._diffModel = _diffModel;\n        this._editors = _editors;\n        this._instantiationService = _instantiationService;\n        this._contextKeyService = _contextKeyService;\n        this._menuService = _menuService;\n        this._menu = this._register(this._menuService.createMenu(MenuId.DiffEditorHunkToolbar, this._contextKeyService));\n        this._actions = observableFromEvent(this._menu.onDidChange, () => this._menu.getActions());\n        this._hasActions = this._actions.map(a => a.length > 0);\n        this.width = derived(this, reader => this._hasActions.read(reader) ? width : 0);\n        this.elements = h('div.gutter@gutter', { style: { position: 'absolute', height: '100%', width: width + 'px' } }, []);\n        this._currentDiff = derived(this, (reader) => {\n            var _a;\n            const model = this._diffModel.read(reader);\n            if (!model) {\n                return undefined;\n            }\n            const mappings = (_a = model.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings;\n            const cursorPosition = this._editors.modifiedCursor.read(reader);\n            if (!cursorPosition) {\n                return undefined;\n            }\n            return mappings === null || mappings === void 0 ? void 0 : mappings.find(m => m.lineRangeMapping.modified.contains(cursorPosition.lineNumber));\n        });\n        this._selectedDiffs = derived(this, (reader) => {\n            /** @description selectedDiffs */\n            const model = this._diffModel.read(reader);\n            const diff = model === null || model === void 0 ? void 0 : model.diff.read(reader);\n            // Return `emptyArr` because it is a constant. [] is always a new array and would trigger a change.\n            if (!diff) {\n                return emptyArr;\n            }\n            const selections = this._editors.modifiedSelections.read(reader);\n            if (selections.every(s => s.isEmpty())) {\n                return emptyArr;\n            }\n            const selectedLineNumbers = new LineRangeSet(selections.map(s => LineRange.fromRangeInclusive(s)));\n            const selectedMappings = diff.mappings.filter(m => m.lineRangeMapping.innerChanges && selectedLineNumbers.intersects(m.lineRangeMapping.modified));\n            const result = selectedMappings.map(mapping => ({\n                mapping,\n                rangeMappings: mapping.lineRangeMapping.innerChanges.filter(c => selections.some(s => Range.areIntersecting(c.modifiedRange, s)))\n            }));\n            if (result.length === 0 || result.every(r => r.rangeMappings.length === 0)) {\n                return emptyArr;\n            }\n            return result;\n        });\n        this._register(prependRemoveOnDispose(diffEditorRoot, this.elements.root));\n        this._register(addDisposableListener(this.elements.root, 'click', () => {\n            this._editors.modified.focus();\n        }));\n        this._register(applyStyle(this.elements.root, { display: this._hasActions.map(a => a ? 'block' : 'none') }));\n        this._register(new EditorGutter(this._editors.modified, this.elements.root, {\n            getIntersectingGutterItems: (range, reader) => {\n                const model = this._diffModel.read(reader);\n                if (!model) {\n                    return [];\n                }\n                const diffs = model.diff.read(reader);\n                if (!diffs) {\n                    return [];\n                }\n                const selection = this._selectedDiffs.read(reader);\n                if (selection.length > 0) {\n                    const m = DetailedLineRangeMapping.fromRangeMappings(selection.flatMap(s => s.rangeMappings));\n                    return [\n                        new DiffGutterItem(m, true, MenuId.DiffEditorSelectionToolbar, undefined, model.model.original.uri, model.model.modified.uri)\n                    ];\n                }\n                const currentDiff = this._currentDiff.read(reader);\n                return diffs.mappings.map(m => new DiffGutterItem(m.lineRangeMapping.withInnerChangesFromLineRanges(), m.lineRangeMapping === (currentDiff === null || currentDiff === void 0 ? void 0 : currentDiff.lineRangeMapping), MenuId.DiffEditorHunkToolbar, undefined, model.model.original.uri, model.model.modified.uri));\n            },\n            createView: (item, target) => {\n                return this._instantiationService.createInstance(DiffToolBar, item, target, this);\n            },\n        }));\n        this._register(addDisposableListener(this.elements.gutter, EventType.MOUSE_WHEEL, (e) => {\n            if (this._editors.modified.getOption(103 /* EditorOption.scrollbar */).handleMouseWheel) {\n                this._editors.modified.delegateScrollFromMouseWheelEvent(e);\n            }\n        }, { passive: false }));\n    }\n    computeStagedValue(mapping) {\n        var _a;\n        const c = (_a = mapping.innerChanges) !== null && _a !== void 0 ? _a : [];\n        const modified = new TextModelText(this._editors.modifiedModel.get());\n        const original = new TextModelText(this._editors.original.getModel());\n        const edit = new TextEdit(c.map(c => c.toTextEdit(modified)));\n        const value = edit.apply(original);\n        return value;\n    }\n    layout(left) {\n        this.elements.gutter.style.left = left + 'px';\n    }\n};\nDiffEditorGutter = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, IContextKeyService),\n    __param(5, IMenuService)\n], DiffEditorGutter);\nexport { DiffEditorGutter };\nclass DiffGutterItem {\n    constructor(mapping, showAlways, menuId, rangeOverride, originalUri, modifiedUri) {\n        this.mapping = mapping;\n        this.showAlways = showAlways;\n        this.menuId = menuId;\n        this.rangeOverride = rangeOverride;\n        this.originalUri = originalUri;\n        this.modifiedUri = modifiedUri;\n    }\n    get id() { return this.mapping.modified.toString(); }\n    get range() { var _a; return (_a = this.rangeOverride) !== null && _a !== void 0 ? _a : this.mapping.modified; }\n}\nlet DiffToolBar = class DiffToolBar extends Disposable {\n    constructor(_item, target, gutter, instantiationService) {\n        super();\n        this._item = _item;\n        this._elements = h('div.gutterItem', { style: { height: '20px', width: '34px' } }, [\n            h('div.background@background', {}, []),\n            h('div.buttons@buttons', {}, []),\n        ]);\n        this._showAlways = this._item.map(this, item => item.showAlways);\n        this._menuId = this._item.map(this, item => item.menuId);\n        this._isSmall = observableValue(this, false);\n        this._lastItemRange = undefined;\n        this._lastViewRange = undefined;\n        const hoverDelegate = this._register(instantiationService.createInstance(WorkbenchHoverDelegate, 'element', true, { position: { hoverPosition: 1 /* HoverPosition.RIGHT */ } }));\n        this._register(appendRemoveOnDispose(target, this._elements.root));\n        this._register(autorun(reader => {\n            /** @description update showAlways */\n            const showAlways = this._showAlways.read(reader);\n            this._elements.root.classList.toggle('noTransition', true);\n            this._elements.root.classList.toggle('showAlways', showAlways);\n            setTimeout(() => {\n                this._elements.root.classList.toggle('noTransition', false);\n            }, 0);\n        }));\n        this._register(autorunWithStore((reader, store) => {\n            this._elements.buttons.replaceChildren();\n            const i = store.add(instantiationService.createInstance(MenuWorkbenchToolBar, this._elements.buttons, this._menuId.read(reader), {\n                orientation: 1 /* ActionsOrientation.VERTICAL */,\n                hoverDelegate,\n                toolbarOptions: {\n                    primaryGroup: g => g.startsWith('primary'),\n                },\n                overflowBehavior: { maxItems: this._isSmall.read(reader) ? 1 : 3 },\n                hiddenItemStrategy: 0 /* HiddenItemStrategy.Ignore */,\n                actionRunner: new ActionRunnerWithContext(() => {\n                    const item = this._item.get();\n                    const mapping = item.mapping;\n                    return {\n                        mapping,\n                        originalWithModifiedChanges: gutter.computeStagedValue(mapping),\n                        originalUri: item.originalUri,\n                        modifiedUri: item.modifiedUri,\n                    };\n                }),\n                menuOptions: {\n                    shouldForwardArgs: true,\n                },\n            }));\n            store.add(i.onDidChangeMenuItems(() => {\n                if (this._lastItemRange) {\n                    this.layout(this._lastItemRange, this._lastViewRange);\n                }\n            }));\n        }));\n    }\n    layout(itemRange, viewRange) {\n        this._lastItemRange = itemRange;\n        this._lastViewRange = viewRange;\n        let itemHeight = this._elements.buttons.clientHeight;\n        this._isSmall.set(this._item.get().mapping.original.startLineNumber === 1 && itemRange.length < 30, undefined);\n        // Item might have changed\n        itemHeight = this._elements.buttons.clientHeight;\n        this._elements.root.style.top = itemRange.start + 'px';\n        this._elements.root.style.height = itemRange.length + 'px';\n        const middleHeight = itemRange.length / 2 - itemHeight / 2;\n        const margin = itemHeight;\n        let effectiveCheckboxTop = itemRange.start + middleHeight;\n        const preferredViewPortRange = OffsetRange.tryCreate(margin, viewRange.endExclusive - margin - itemHeight);\n        const preferredParentRange = OffsetRange.tryCreate(itemRange.start + margin, itemRange.endExclusive - itemHeight - margin);\n        if (preferredParentRange && preferredViewPortRange && preferredParentRange.start < preferredParentRange.endExclusive) {\n            effectiveCheckboxTop = preferredViewPortRange.clip(effectiveCheckboxTop);\n            effectiveCheckboxTop = preferredParentRange.clip(effectiveCheckboxTop);\n        }\n        this._elements.buttons.style.top = `${effectiveCheckboxTop - itemRange.start}px`;\n    }\n};\nDiffToolBar = __decorate([\n    __param(3, IInstantiationService)\n], DiffToolBar);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar OverviewRulerFeature_1;\nimport { EventType, addDisposableListener, addStandardDisposableListener, h } from '../../../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../../../base/browser/fastDomNode.js';\nimport { ScrollbarState } from '../../../../../base/browser/ui/scrollbar/scrollbarState.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableFromEvent, observableSignalFromEvent } from '../../../../../base/common/observable.js';\nimport { appendRemoveOnDispose } from '../utils.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { OverviewRulerZone } from '../../../../common/viewModel/overviewZoneManager.js';\nimport { defaultInsertColor, defaultRemoveColor, diffInserted, diffOverviewRulerInserted, diffOverviewRulerRemoved, diffRemoved } from '../../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nlet OverviewRulerFeature = OverviewRulerFeature_1 = class OverviewRulerFeature extends Disposable {\n    constructor(_editors, _rootElement, _diffModel, _rootWidth, _rootHeight, _modifiedEditorLayoutInfo, _themeService) {\n        super();\n        this._editors = _editors;\n        this._rootElement = _rootElement;\n        this._diffModel = _diffModel;\n        this._rootWidth = _rootWidth;\n        this._rootHeight = _rootHeight;\n        this._modifiedEditorLayoutInfo = _modifiedEditorLayoutInfo;\n        this._themeService = _themeService;\n        this.width = OverviewRulerFeature_1.ENTIRE_DIFF_OVERVIEW_WIDTH;\n        const currentColorTheme = observableFromEvent(this._themeService.onDidColorThemeChange, () => this._themeService.getColorTheme());\n        const currentColors = derived(reader => {\n            /** @description colors */\n            const theme = currentColorTheme.read(reader);\n            const insertColor = theme.getColor(diffOverviewRulerInserted) || (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\n            const removeColor = theme.getColor(diffOverviewRulerRemoved) || (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\n            return { insertColor, removeColor };\n        });\n        const viewportDomElement = createFastDomNode(document.createElement('div'));\n        viewportDomElement.setClassName('diffViewport');\n        viewportDomElement.setPosition('absolute');\n        const diffOverviewRoot = h('div.diffOverview', {\n            style: { position: 'absolute', top: '0px', width: OverviewRulerFeature_1.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px' }\n        }).root;\n        this._register(appendRemoveOnDispose(diffOverviewRoot, viewportDomElement.domNode));\n        this._register(addStandardDisposableListener(diffOverviewRoot, EventType.POINTER_DOWN, (e) => {\n            this._editors.modified.delegateVerticalScrollbarPointerDown(e);\n        }));\n        this._register(addDisposableListener(diffOverviewRoot, EventType.MOUSE_WHEEL, (e) => {\n            this._editors.modified.delegateScrollFromMouseWheelEvent(e);\n        }, { passive: false }));\n        this._register(appendRemoveOnDispose(this._rootElement, diffOverviewRoot));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description recreate overview rules when model changes */\n            const m = this._diffModel.read(reader);\n            const originalOverviewRuler = this._editors.original.createOverviewRuler('original diffOverviewRuler');\n            if (originalOverviewRuler) {\n                store.add(originalOverviewRuler);\n                store.add(appendRemoveOnDispose(diffOverviewRoot, originalOverviewRuler.getDomNode()));\n            }\n            const modifiedOverviewRuler = this._editors.modified.createOverviewRuler('modified diffOverviewRuler');\n            if (modifiedOverviewRuler) {\n                store.add(modifiedOverviewRuler);\n                store.add(appendRemoveOnDispose(diffOverviewRoot, modifiedOverviewRuler.getDomNode()));\n            }\n            if (!originalOverviewRuler || !modifiedOverviewRuler) {\n                // probably no model\n                return;\n            }\n            const origViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.original.onDidChangeViewZones);\n            const modViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.modified.onDidChangeViewZones);\n            const origHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.original.onDidChangeHiddenAreas);\n            const modHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.modified.onDidChangeHiddenAreas);\n            store.add(autorun(reader => {\n                var _a;\n                /** @description set overview ruler zones */\n                origViewZonesChanged.read(reader);\n                modViewZonesChanged.read(reader);\n                origHiddenRangesChanged.read(reader);\n                modHiddenRangesChanged.read(reader);\n                const colors = currentColors.read(reader);\n                const diff = (_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings;\n                function createZones(ranges, color, editor) {\n                    const vm = editor._getViewModel();\n                    if (!vm) {\n                        return [];\n                    }\n                    return ranges\n                        .filter(d => d.length > 0)\n                        .map(r => {\n                        const start = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.startLineNumber, 1));\n                        const end = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.endLineNumberExclusive, 1));\n                        // By computing the lineCount, we won't ask the view model later for the bottom vertical position.\n                        // (The view model will take into account the alignment viewzones, which will give\n                        // modifications and deletetions always the same height.)\n                        const lineCount = end.lineNumber - start.lineNumber;\n                        return new OverviewRulerZone(start.lineNumber, end.lineNumber, lineCount, color.toString());\n                    });\n                }\n                const originalZones = createZones((diff || []).map(d => d.lineRangeMapping.original), colors.removeColor, this._editors.original);\n                const modifiedZones = createZones((diff || []).map(d => d.lineRangeMapping.modified), colors.insertColor, this._editors.modified);\n                originalOverviewRuler === null || originalOverviewRuler === void 0 ? void 0 : originalOverviewRuler.setZones(originalZones);\n                modifiedOverviewRuler === null || modifiedOverviewRuler === void 0 ? void 0 : modifiedOverviewRuler.setZones(modifiedZones);\n            }));\n            store.add(autorun(reader => {\n                /** @description layout overview ruler */\n                const height = this._rootHeight.read(reader);\n                const width = this._rootWidth.read(reader);\n                const layoutInfo = this._modifiedEditorLayoutInfo.read(reader);\n                if (layoutInfo) {\n                    const freeSpace = OverviewRulerFeature_1.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * OverviewRulerFeature_1.ONE_OVERVIEW_WIDTH;\n                    originalOverviewRuler.setLayout({\n                        top: 0,\n                        height: height,\n                        right: freeSpace + OverviewRulerFeature_1.ONE_OVERVIEW_WIDTH,\n                        width: OverviewRulerFeature_1.ONE_OVERVIEW_WIDTH,\n                    });\n                    modifiedOverviewRuler.setLayout({\n                        top: 0,\n                        height: height,\n                        right: 0,\n                        width: OverviewRulerFeature_1.ONE_OVERVIEW_WIDTH,\n                    });\n                    const scrollTop = this._editors.modifiedScrollTop.read(reader);\n                    const scrollHeight = this._editors.modifiedScrollHeight.read(reader);\n                    const scrollBarOptions = this._editors.modified.getOption(103 /* EditorOption.scrollbar */);\n                    const state = new ScrollbarState(scrollBarOptions.verticalHasArrows ? scrollBarOptions.arrowSize : 0, scrollBarOptions.verticalScrollbarSize, 0, layoutInfo.height, scrollHeight, scrollTop);\n                    viewportDomElement.setTop(state.getSliderPosition());\n                    viewportDomElement.setHeight(state.getSliderSize());\n                }\n                else {\n                    viewportDomElement.setTop(0);\n                    viewportDomElement.setHeight(0);\n                }\n                diffOverviewRoot.style.height = height + 'px';\n                diffOverviewRoot.style.left = (width - OverviewRulerFeature_1.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\n                viewportDomElement.setWidth(OverviewRulerFeature_1.ENTIRE_DIFF_OVERVIEW_WIDTH);\n            }));\n        }));\n    }\n};\nOverviewRulerFeature.ONE_OVERVIEW_WIDTH = 15;\nOverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH = OverviewRulerFeature_1.ONE_OVERVIEW_WIDTH * 2;\nOverviewRulerFeature = OverviewRulerFeature_1 = __decorate([\n    __param(6, IThemeService)\n], OverviewRulerFeature);\nexport { OverviewRulerFeature };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { addDisposableListener, h, EventType } from '../../../../../base/browser/dom.js';\nimport { renderIcon } from '../../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../../base/common/lifecycle.js';\nimport { autorunWithStore, derived } from '../../../../../base/common/observable.js';\nimport { LineRange, LineRangeSet } from '../../../../common/core/lineRange.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { LineRangeMapping } from '../../../../common/diff/rangeMapping.js';\nimport { GlyphMarginLane } from '../../../../common/model.js';\nimport { localize } from '../../../../../nls.js';\nconst emptyArr = [];\nexport class RevertButtonsFeature extends Disposable {\n    constructor(_editors, _diffModel, _options, _widget) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._widget = _widget;\n        this._selectedDiffs = derived(this, (reader) => {\n            /** @description selectedDiffs */\n            const model = this._diffModel.read(reader);\n            const diff = model === null || model === void 0 ? void 0 : model.diff.read(reader);\n            // Return `emptyArr` because it is a constant. [] is always a new array and would trigger a change.\n            if (!diff) {\n                return emptyArr;\n            }\n            const selections = this._editors.modifiedSelections.read(reader);\n            if (selections.every(s => s.isEmpty())) {\n                return emptyArr;\n            }\n            const selectedLineNumbers = new LineRangeSet(selections.map(s => LineRange.fromRangeInclusive(s)));\n            const selectedMappings = diff.mappings.filter(m => m.lineRangeMapping.innerChanges && selectedLineNumbers.intersects(m.lineRangeMapping.modified));\n            const result = selectedMappings.map(mapping => ({\n                mapping,\n                rangeMappings: mapping.lineRangeMapping.innerChanges.filter(c => selections.some(s => Range.areIntersecting(c.modifiedRange, s)))\n            }));\n            if (result.length === 0 || result.every(r => r.rangeMappings.length === 0)) {\n                return emptyArr;\n            }\n            return result;\n        });\n        this._register(autorunWithStore((reader, store) => {\n            if (!this._options.shouldRenderOldRevertArrows.read(reader)) {\n                return;\n            }\n            const model = this._diffModel.read(reader);\n            const diff = model === null || model === void 0 ? void 0 : model.diff.read(reader);\n            if (!model || !diff) {\n                return;\n            }\n            if (model.movedTextToCompare.read(reader)) {\n                return;\n            }\n            const glyphWidgetsModified = [];\n            const selectedDiffs = this._selectedDiffs.read(reader);\n            const selectedDiffsSet = new Set(selectedDiffs.map(d => d.mapping));\n            if (selectedDiffs.length > 0) {\n                // The button to revert the selection\n                const selections = this._editors.modifiedSelections.read(reader);\n                const btn = store.add(new RevertButton(selections[selections.length - 1].positionLineNumber, this._widget, selectedDiffs.flatMap(d => d.rangeMappings), true));\n                this._editors.modified.addGlyphMarginWidget(btn);\n                glyphWidgetsModified.push(btn);\n            }\n            for (const m of diff.mappings) {\n                if (selectedDiffsSet.has(m)) {\n                    continue;\n                }\n                if (!m.lineRangeMapping.modified.isEmpty && m.lineRangeMapping.innerChanges) {\n                    const btn = store.add(new RevertButton(m.lineRangeMapping.modified.startLineNumber, this._widget, m.lineRangeMapping, false));\n                    this._editors.modified.addGlyphMarginWidget(btn);\n                    glyphWidgetsModified.push(btn);\n                }\n            }\n            store.add(toDisposable(() => {\n                for (const w of glyphWidgetsModified) {\n                    this._editors.modified.removeGlyphMarginWidget(w);\n                }\n            }));\n        }));\n    }\n}\nexport class RevertButton extends Disposable {\n    getId() { return this._id; }\n    constructor(_lineNumber, _widget, _diffs, _revertSelection) {\n        super();\n        this._lineNumber = _lineNumber;\n        this._widget = _widget;\n        this._diffs = _diffs;\n        this._revertSelection = _revertSelection;\n        this._id = `revertButton${RevertButton.counter++}`;\n        this._domNode = h('div.revertButton', {\n            title: this._revertSelection\n                ? localize('revertSelectedChanges', 'Revert Selected Changes')\n                : localize('revertChange', 'Revert Change')\n        }, [renderIcon(Codicon.arrowRight)]).root;\n        this._register(addDisposableListener(this._domNode, EventType.MOUSE_DOWN, e => {\n            // don't prevent context menu from showing up\n            if (e.button !== 2) {\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        }));\n        this._register(addDisposableListener(this._domNode, EventType.MOUSE_UP, e => {\n            e.stopPropagation();\n            e.preventDefault();\n        }));\n        this._register(addDisposableListener(this._domNode, EventType.CLICK, (e) => {\n            if (this._diffs instanceof LineRangeMapping) {\n                this._widget.revert(this._diffs);\n            }\n            else {\n                this._widget.revertRangeMappings(this._diffs);\n            }\n            e.stopPropagation();\n            e.preventDefault();\n        }));\n    }\n    /**\n     * Get the dom node of the glyph widget.\n     */\n    getDomNode() {\n        return this._domNode;\n    }\n    /**\n     * Get the placement of the glyph widget.\n     */\n    getPosition() {\n        return {\n            lane: GlyphMarginLane.Right,\n            range: {\n                startColumn: 1,\n                startLineNumber: this._lineNumber,\n                endColumn: 1,\n                endLineNumber: this._lineNumber,\n            },\n            zIndex: 10001,\n        };\n    }\n}\nRevertButton.counter = 0;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { autorunHandleChanges, derivedOpts, observableFromEvent } from '../../../../../base/common/observable.js';\nimport { obsCodeEditor } from '../../../observableUtilities.js';\nimport { OverviewRulerFeature } from '../features/overviewRulerFeature.js';\nimport { EditorOptions } from '../../../../common/config/editorOptions.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nlet DiffEditorEditors = class DiffEditorEditors extends Disposable {\n    get onDidContentSizeChange() { return this._onDidContentSizeChange.event; }\n    constructor(originalEditorElement, modifiedEditorElement, _options, _argCodeEditorWidgetOptions, _createInnerEditor, _instantiationService, _keybindingService) {\n        super();\n        this.originalEditorElement = originalEditorElement;\n        this.modifiedEditorElement = modifiedEditorElement;\n        this._options = _options;\n        this._argCodeEditorWidgetOptions = _argCodeEditorWidgetOptions;\n        this._createInnerEditor = _createInnerEditor;\n        this._instantiationService = _instantiationService;\n        this._keybindingService = _keybindingService;\n        this.original = this._register(this._createLeftHandSideEditor(this._options.editorOptions.get(), this._argCodeEditorWidgetOptions.originalEditor || {}));\n        this.modified = this._register(this._createRightHandSideEditor(this._options.editorOptions.get(), this._argCodeEditorWidgetOptions.modifiedEditor || {}));\n        this._onDidContentSizeChange = this._register(new Emitter());\n        this.modifiedScrollTop = observableFromEvent(this.modified.onDidScrollChange, () => /** @description modified.getScrollTop */ this.modified.getScrollTop());\n        this.modifiedScrollHeight = observableFromEvent(this.modified.onDidScrollChange, () => /** @description modified.getScrollHeight */ this.modified.getScrollHeight());\n        this.modifiedModel = obsCodeEditor(this.modified).model;\n        this.modifiedSelections = observableFromEvent(this.modified.onDidChangeCursorSelection, () => { var _a; return (_a = this.modified.getSelections()) !== null && _a !== void 0 ? _a : []; });\n        this.modifiedCursor = derivedOpts({ owner: this, equalsFn: Position.equals }, reader => { var _a, _b; return (_b = (_a = this.modifiedSelections.read(reader)[0]) === null || _a === void 0 ? void 0 : _a.getPosition()) !== null && _b !== void 0 ? _b : new Position(1, 1); });\n        this.originalCursor = observableFromEvent(this.original.onDidChangeCursorPosition, () => { var _a; return (_a = this.original.getPosition()) !== null && _a !== void 0 ? _a : new Position(1, 1); });\n        this._argCodeEditorWidgetOptions = null;\n        this._register(autorunHandleChanges({\n            createEmptyChangeSummary: () => ({}),\n            handleChange: (ctx, changeSummary) => {\n                if (ctx.didChange(_options.editorOptions)) {\n                    Object.assign(changeSummary, ctx.change.changedOptions);\n                }\n                return true;\n            }\n        }, (reader, changeSummary) => {\n            /** @description update editor options */\n            _options.editorOptions.read(reader);\n            this._options.renderSideBySide.read(reader);\n            this.modified.updateOptions(this._adjustOptionsForRightHandSide(reader, changeSummary));\n            this.original.updateOptions(this._adjustOptionsForLeftHandSide(reader, changeSummary));\n        }));\n    }\n    _createLeftHandSideEditor(options, codeEditorWidgetOptions) {\n        const leftHandSideOptions = this._adjustOptionsForLeftHandSide(undefined, options);\n        const editor = this._constructInnerEditor(this._instantiationService, this.originalEditorElement, leftHandSideOptions, codeEditorWidgetOptions);\n        editor.setContextValue('isInDiffLeftEditor', true);\n        return editor;\n    }\n    _createRightHandSideEditor(options, codeEditorWidgetOptions) {\n        const rightHandSideOptions = this._adjustOptionsForRightHandSide(undefined, options);\n        const editor = this._constructInnerEditor(this._instantiationService, this.modifiedEditorElement, rightHandSideOptions, codeEditorWidgetOptions);\n        editor.setContextValue('isInDiffRightEditor', true);\n        return editor;\n    }\n    _constructInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n        const editor = this._createInnerEditor(instantiationService, container, options, editorWidgetOptions);\n        this._register(editor.onDidContentSizeChange(e => {\n            const width = this.original.getContentWidth() + this.modified.getContentWidth() + OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH;\n            const height = Math.max(this.modified.getContentHeight(), this.original.getContentHeight());\n            this._onDidContentSizeChange.fire({\n                contentHeight: height,\n                contentWidth: width,\n                contentHeightChanged: e.contentHeightChanged,\n                contentWidthChanged: e.contentWidthChanged\n            });\n        }));\n        return editor;\n    }\n    _adjustOptionsForLeftHandSide(_reader, changedOptions) {\n        const result = this._adjustOptionsForSubEditor(changedOptions);\n        if (!this._options.renderSideBySide.get()) {\n            // never wrap hidden editor\n            result.wordWrapOverride1 = 'off';\n            result.wordWrapOverride2 = 'off';\n            result.stickyScroll = { enabled: false };\n            // Disable unicode highlighting for the original side in inline mode, as they are not shown anyway.\n            result.unicodeHighlight = { nonBasicASCII: false, ambiguousCharacters: false, invisibleCharacters: false };\n        }\n        else {\n            result.unicodeHighlight = this._options.editorOptions.get().unicodeHighlight || {};\n            result.wordWrapOverride1 = this._options.diffWordWrap.get();\n        }\n        result.glyphMargin = this._options.renderSideBySide.get();\n        if (changedOptions.originalAriaLabel) {\n            result.ariaLabel = changedOptions.originalAriaLabel;\n        }\n        result.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n        result.readOnly = !this._options.originalEditable.get();\n        result.dropIntoEditor = { enabled: !result.readOnly };\n        result.extraEditorClassName = 'original-in-monaco-diff-editor';\n        return result;\n    }\n    _adjustOptionsForRightHandSide(reader, changedOptions) {\n        const result = this._adjustOptionsForSubEditor(changedOptions);\n        if (changedOptions.modifiedAriaLabel) {\n            result.ariaLabel = changedOptions.modifiedAriaLabel;\n        }\n        result.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n        result.wordWrapOverride1 = this._options.diffWordWrap.get();\n        result.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + OverviewRulerFeature.ENTIRE_DIFF_OVERVIEW_WIDTH;\n        result.scrollbar.verticalHasArrows = false;\n        result.extraEditorClassName = 'modified-in-monaco-diff-editor';\n        return result;\n    }\n    _adjustOptionsForSubEditor(options) {\n        const clonedOptions = {\n            ...options,\n            dimension: {\n                height: 0,\n                width: 0\n            },\n        };\n        clonedOptions.inDiffEditor = true;\n        clonedOptions.automaticLayout = false;\n        // Clone scrollbar options before changing them\n        clonedOptions.scrollbar = { ...(clonedOptions.scrollbar || {}) };\n        clonedOptions.folding = false;\n        clonedOptions.codeLens = this._options.diffCodeLens.get();\n        clonedOptions.fixedOverflowWidgets = true;\n        // Clone minimap options before changing them\n        clonedOptions.minimap = { ...(clonedOptions.minimap || {}) };\n        clonedOptions.minimap.enabled = false;\n        if (this._options.hideUnchangedRegions.get()) {\n            clonedOptions.stickyScroll = { enabled: false };\n        }\n        else {\n            clonedOptions.stickyScroll = this._options.editorOptions.get().stickyScroll;\n        }\n        return clonedOptions;\n    }\n    _updateAriaLabel(ariaLabel) {\n        var _a;\n        if (!ariaLabel) {\n            ariaLabel = '';\n        }\n        const ariaNavigationTip = localize('diff-aria-navigation-tip', ' use {0} to open the accessibility help.', (_a = this._keybindingService.lookupKeybinding('editor.action.accessibilityHelp')) === null || _a === void 0 ? void 0 : _a.getAriaLabel());\n        if (this._options.accessibilityVerbose.get()) {\n            return ariaLabel + ariaNavigationTip;\n        }\n        else if (ariaLabel) {\n            return ariaLabel.replaceAll(ariaNavigationTip, '');\n        }\n        return '';\n    }\n};\nDiffEditorEditors = __decorate([\n    __param(5, IInstantiationService),\n    __param(6, IKeybindingService)\n], DiffEditorEditors);\nexport { DiffEditorEditors };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nexport class DelegatingEditor extends Disposable {\n    constructor() {\n        super(...arguments);\n        this._id = ++DelegatingEditor.idCounter;\n        this._onDidDispose = this._register(new Emitter());\n        this.onDidDispose = this._onDidDispose.event;\n        // #endregion\n    }\n    getId() { return this.getEditorType() + ':v2:' + this._id; }\n    // #region editorBrowser.IDiffEditor: Delegating to modified Editor\n    getVisibleColumnFromPosition(position) {\n        return this._targetEditor.getVisibleColumnFromPosition(position);\n    }\n    getPosition() {\n        return this._targetEditor.getPosition();\n    }\n    setPosition(position, source = 'api') {\n        this._targetEditor.setPosition(position, source);\n    }\n    revealLine(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLine(lineNumber, scrollType);\n    }\n    revealLineInCenter(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineInCenter(lineNumber, scrollType);\n    }\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\n    }\n    revealLineNearTop(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineNearTop(lineNumber, scrollType);\n    }\n    revealPosition(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPosition(position, scrollType);\n    }\n    revealPositionInCenter(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionInCenter(position, scrollType);\n    }\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\n    }\n    revealPositionNearTop(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionNearTop(position, scrollType);\n    }\n    getSelection() {\n        return this._targetEditor.getSelection();\n    }\n    getSelections() {\n        return this._targetEditor.getSelections();\n    }\n    setSelection(something, source = 'api') {\n        this._targetEditor.setSelection(something, source);\n    }\n    setSelections(ranges, source = 'api') {\n        this._targetEditor.setSelections(ranges, source);\n    }\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLines(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesNearTop(startLineNumber, endLineNumber, scrollType);\n    }\n    revealRange(range, scrollType = 0 /* ScrollType.Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\n        this._targetEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\n    }\n    revealRangeInCenter(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeInCenter(range, scrollType);\n    }\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\n    }\n    revealRangeNearTop(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeNearTop(range, scrollType);\n    }\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeNearTopIfOutsideViewport(range, scrollType);\n    }\n    revealRangeAtTop(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeAtTop(range, scrollType);\n    }\n    getSupportedActions() {\n        return this._targetEditor.getSupportedActions();\n    }\n    focus() {\n        this._targetEditor.focus();\n    }\n    trigger(source, handlerId, payload) {\n        this._targetEditor.trigger(source, handlerId, payload);\n    }\n    createDecorationsCollection(decorations) {\n        return this._targetEditor.createDecorationsCollection(decorations);\n    }\n    changeDecorations(callback) {\n        return this._targetEditor.changeDecorations(callback);\n    }\n}\nDelegatingEditor.idCounter = 0;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { derived, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport { diffEditorDefaultOptions } from '../../../common/config/diffEditor.js';\nimport { clampedFloat, clampedInt, boolean as validateBooleanOption, stringSet as validateStringSetOption } from '../../../common/config/editorOptions.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nlet DiffEditorOptions = class DiffEditorOptions {\n    get editorOptions() { return this._options; }\n    constructor(options, _accessibilityService) {\n        this._accessibilityService = _accessibilityService;\n        this._diffEditorWidth = observableValue(this, 0);\n        this._screenReaderMode = observableFromEvent(this._accessibilityService.onDidChangeScreenReaderOptimized, () => this._accessibilityService.isScreenReaderOptimized());\n        this.couldShowInlineViewBecauseOfSize = derived(this, reader => this._options.read(reader).renderSideBySide && this._diffEditorWidth.read(reader) <= this._options.read(reader).renderSideBySideInlineBreakpoint);\n        this.renderOverviewRuler = derived(this, reader => this._options.read(reader).renderOverviewRuler);\n        this.renderSideBySide = derived(this, reader => this._options.read(reader).renderSideBySide\n            && !(this._options.read(reader).useInlineViewWhenSpaceIsLimited && this.couldShowInlineViewBecauseOfSize.read(reader) && !this._screenReaderMode.read(reader)));\n        this.readOnly = derived(this, reader => this._options.read(reader).readOnly);\n        this.shouldRenderOldRevertArrows = derived(this, reader => {\n            if (!this._options.read(reader).renderMarginRevertIcon) {\n                return false;\n            }\n            if (!this.renderSideBySide.read(reader)) {\n                return false;\n            }\n            if (this.readOnly.read(reader)) {\n                return false;\n            }\n            if (this.shouldRenderGutterMenu.read(reader)) {\n                return false;\n            }\n            return true;\n        });\n        this.shouldRenderGutterMenu = derived(this, reader => this._options.read(reader).renderGutterMenu);\n        this.renderIndicators = derived(this, reader => this._options.read(reader).renderIndicators);\n        this.enableSplitViewResizing = derived(this, reader => this._options.read(reader).enableSplitViewResizing);\n        this.splitViewDefaultRatio = derived(this, reader => this._options.read(reader).splitViewDefaultRatio);\n        this.ignoreTrimWhitespace = derived(this, reader => this._options.read(reader).ignoreTrimWhitespace);\n        this.maxComputationTimeMs = derived(this, reader => this._options.read(reader).maxComputationTime);\n        this.showMoves = derived(this, reader => this._options.read(reader).experimental.showMoves && this.renderSideBySide.read(reader));\n        this.isInEmbeddedEditor = derived(this, reader => this._options.read(reader).isInEmbeddedEditor);\n        this.diffWordWrap = derived(this, reader => this._options.read(reader).diffWordWrap);\n        this.originalEditable = derived(this, reader => this._options.read(reader).originalEditable);\n        this.diffCodeLens = derived(this, reader => this._options.read(reader).diffCodeLens);\n        this.accessibilityVerbose = derived(this, reader => this._options.read(reader).accessibilityVerbose);\n        this.diffAlgorithm = derived(this, reader => this._options.read(reader).diffAlgorithm);\n        this.showEmptyDecorations = derived(this, reader => this._options.read(reader).experimental.showEmptyDecorations);\n        this.onlyShowAccessibleDiffViewer = derived(this, reader => this._options.read(reader).onlyShowAccessibleDiffViewer);\n        this.hideUnchangedRegions = derived(this, reader => this._options.read(reader).hideUnchangedRegions.enabled);\n        this.hideUnchangedRegionsRevealLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.revealLineCount);\n        this.hideUnchangedRegionsContextLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.contextLineCount);\n        this.hideUnchangedRegionsMinimumLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.minimumLineCount);\n        const optionsCopy = { ...options, ...validateDiffEditorOptions(options, diffEditorDefaultOptions) };\n        this._options = observableValue(this, optionsCopy);\n    }\n    updateOptions(changedOptions) {\n        const newDiffEditorOptions = validateDiffEditorOptions(changedOptions, this._options.get());\n        const newOptions = { ...this._options.get(), ...changedOptions, ...newDiffEditorOptions };\n        this._options.set(newOptions, undefined, { changedOptions: changedOptions });\n    }\n    setWidth(width) {\n        this._diffEditorWidth.set(width, undefined);\n    }\n};\nDiffEditorOptions = __decorate([\n    __param(1, IAccessibilityService)\n], DiffEditorOptions);\nexport { DiffEditorOptions };\nfunction validateDiffEditorOptions(options, defaults) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    return {\n        enableSplitViewResizing: validateBooleanOption(options.enableSplitViewResizing, defaults.enableSplitViewResizing),\n        splitViewDefaultRatio: clampedFloat(options.splitViewDefaultRatio, 0.5, 0.1, 0.9),\n        renderSideBySide: validateBooleanOption(options.renderSideBySide, defaults.renderSideBySide),\n        renderMarginRevertIcon: validateBooleanOption(options.renderMarginRevertIcon, defaults.renderMarginRevertIcon),\n        maxComputationTime: clampedInt(options.maxComputationTime, defaults.maxComputationTime, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        maxFileSize: clampedInt(options.maxFileSize, defaults.maxFileSize, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        ignoreTrimWhitespace: validateBooleanOption(options.ignoreTrimWhitespace, defaults.ignoreTrimWhitespace),\n        renderIndicators: validateBooleanOption(options.renderIndicators, defaults.renderIndicators),\n        originalEditable: validateBooleanOption(options.originalEditable, defaults.originalEditable),\n        diffCodeLens: validateBooleanOption(options.diffCodeLens, defaults.diffCodeLens),\n        renderOverviewRuler: validateBooleanOption(options.renderOverviewRuler, defaults.renderOverviewRuler),\n        diffWordWrap: validateStringSetOption(options.diffWordWrap, defaults.diffWordWrap, ['off', 'on', 'inherit']),\n        diffAlgorithm: validateStringSetOption(options.diffAlgorithm, defaults.diffAlgorithm, ['legacy', 'advanced'], { 'smart': 'legacy', 'experimental': 'advanced' }),\n        accessibilityVerbose: validateBooleanOption(options.accessibilityVerbose, defaults.accessibilityVerbose),\n        experimental: {\n            showMoves: validateBooleanOption((_a = options.experimental) === null || _a === void 0 ? void 0 : _a.showMoves, defaults.experimental.showMoves),\n            showEmptyDecorations: validateBooleanOption((_b = options.experimental) === null || _b === void 0 ? void 0 : _b.showEmptyDecorations, defaults.experimental.showEmptyDecorations),\n        },\n        hideUnchangedRegions: {\n            enabled: validateBooleanOption((_d = (_c = options.hideUnchangedRegions) === null || _c === void 0 ? void 0 : _c.enabled) !== null && _d !== void 0 ? _d : (_e = options.experimental) === null || _e === void 0 ? void 0 : _e.collapseUnchangedRegions, defaults.hideUnchangedRegions.enabled),\n            contextLineCount: clampedInt((_f = options.hideUnchangedRegions) === null || _f === void 0 ? void 0 : _f.contextLineCount, defaults.hideUnchangedRegions.contextLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n            minimumLineCount: clampedInt((_g = options.hideUnchangedRegions) === null || _g === void 0 ? void 0 : _g.minimumLineCount, defaults.hideUnchangedRegions.minimumLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n            revealLineCount: clampedInt((_h = options.hideUnchangedRegions) === null || _h === void 0 ? void 0 : _h.revealLineCount, defaults.hideUnchangedRegions.revealLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        },\n        isInEmbeddedEditor: validateBooleanOption(options.isInEmbeddedEditor, defaults.isInEmbeddedEditor),\n        onlyShowAccessibleDiffViewer: validateBooleanOption(options.onlyShowAccessibleDiffViewer, defaults.onlyShowAccessibleDiffViewer),\n        renderSideBySideInlineBreakpoint: clampedInt(options.renderSideBySideInlineBreakpoint, defaults.renderSideBySideInlineBreakpoint, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        useInlineViewWhenSpaceIsLimited: validateBooleanOption(options.useInlineViewWhenSpaceIsLimited, defaults.useInlineViewWhenSpaceIsLimited),\n        renderGutterMenu: validateBooleanOption(options.renderGutterMenu, defaults.renderGutterMenu),\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getWindow, h } from '../../../../base/browser/dom.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableFromEvent, observableValue, recomputeInitiallyAndOnChange, subtransaction, transaction } from '../../../../base/common/observable.js';\nimport { derivedDisposable } from '../../../../base/common/observableInternal/derived.js';\nimport './style.css';\nimport { EditorExtensionsRegistry } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { StableEditorScrollState } from '../../stableEditorScroll.js';\nimport { CodeEditorWidget } from '../codeEditor/codeEditorWidget.js';\nimport { AccessibleDiffViewer, AccessibleDiffViewerModelFromEditors } from './components/accessibleDiffViewer.js';\nimport { DiffEditorDecorations } from './components/diffEditorDecorations.js';\nimport { DiffEditorSash } from './components/diffEditorSash.js';\nimport { DiffEditorViewZones } from './components/diffEditorViewZones/diffEditorViewZones.js';\nimport { DiffEditorGutter } from './features/gutterFeature.js';\nimport { HideUnchangedRegionsFeature } from './features/hideUnchangedRegionsFeature.js';\nimport { MovedBlocksLinesFeature } from './features/movedBlocksLinesFeature.js';\nimport { OverviewRulerFeature } from './features/overviewRulerFeature.js';\nimport { RevertButtonsFeature } from './features/revertButtonsFeature.js';\nimport { ObservableElementSizeObserver, applyStyle, applyViewZones, bindContextKey, readHotReloadableExport, translatePosition } from './utils.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorType } from '../../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { AccessibilitySignal, IAccessibilitySignalService } from '../../../../platform/accessibilitySignal/browser/accessibilitySignalService.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { DiffEditorEditors } from './components/diffEditorEditors.js';\nimport { DelegatingEditor } from './delegatingEditorImpl.js';\nimport { DiffEditorOptions } from './diffEditorOptions.js';\nimport { DiffEditorViewModel } from './diffEditorViewModel.js';\nlet DiffEditorWidget = class DiffEditorWidget extends DelegatingEditor {\n    get onDidContentSizeChange() { return this._editors.onDidContentSizeChange; }\n    constructor(_domElement, options, codeEditorWidgetOptions, _parentContextKeyService, _parentInstantiationService, codeEditorService, _accessibilitySignalService, _editorProgressService) {\n        var _a;\n        super();\n        this._domElement = _domElement;\n        this._parentContextKeyService = _parentContextKeyService;\n        this._parentInstantiationService = _parentInstantiationService;\n        this._accessibilitySignalService = _accessibilitySignalService;\n        this._editorProgressService = _editorProgressService;\n        this.elements = h('div.monaco-diff-editor.side-by-side', { style: { position: 'relative', height: '100%' } }, [\n            h('div.editor.original@original', { style: { position: 'absolute', height: '100%', } }),\n            h('div.editor.modified@modified', { style: { position: 'absolute', height: '100%', } }),\n            h('div.accessibleDiffViewer@accessibleDiffViewer', { style: { position: 'absolute', height: '100%' } }),\n        ]);\n        this._diffModel = observableValue(this, undefined);\n        this._shouldDisposeDiffModel = false;\n        this.onDidChangeModel = Event.fromObservableLight(this._diffModel);\n        this._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._domElement));\n        this._instantiationService = this._parentInstantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._boundarySashes = observableValue(this, undefined);\n        this._accessibleDiffViewerShouldBeVisible = observableValue(this, false);\n        this._accessibleDiffViewerVisible = derived(this, reader => this._options.onlyShowAccessibleDiffViewer.read(reader)\n            ? true\n            : this._accessibleDiffViewerShouldBeVisible.read(reader));\n        this._movedBlocksLinesPart = observableValue(this, undefined);\n        this._layoutInfo = derived(this, reader => {\n            var _a, _b, _c, _d, _e;\n            const fullWidth = this._rootSizeObserver.width.read(reader);\n            const fullHeight = this._rootSizeObserver.height.read(reader);\n            const sash = this._sash.read(reader);\n            const gutter = this._gutter.read(reader);\n            const gutterWidth = (_a = gutter === null || gutter === void 0 ? void 0 : gutter.width.read(reader)) !== null && _a !== void 0 ? _a : 0;\n            const overviewRulerPartWidth = (_c = (_b = this._overviewRulerPart.read(reader)) === null || _b === void 0 ? void 0 : _b.width) !== null && _c !== void 0 ? _c : 0;\n            let originalLeft, originalWidth, modifiedLeft, modifiedWidth, gutterLeft;\n            const sideBySide = !!sash;\n            if (sideBySide) {\n                const sashLeft = sash.sashLeft.read(reader);\n                const movedBlocksLinesWidth = (_e = (_d = this._movedBlocksLinesPart.read(reader)) === null || _d === void 0 ? void 0 : _d.width.read(reader)) !== null && _e !== void 0 ? _e : 0;\n                originalLeft = 0;\n                originalWidth = sashLeft - gutterWidth - movedBlocksLinesWidth;\n                gutterLeft = sashLeft - gutterWidth;\n                modifiedLeft = sashLeft;\n                modifiedWidth = fullWidth - modifiedLeft - overviewRulerPartWidth;\n            }\n            else {\n                gutterLeft = 0;\n                originalLeft = gutterWidth;\n                originalWidth = Math.max(5, this._editors.original.getLayoutInfo().decorationsLeft);\n                modifiedLeft = gutterWidth + originalWidth;\n                modifiedWidth = fullWidth - modifiedLeft - overviewRulerPartWidth;\n            }\n            this.elements.original.style.left = originalLeft + 'px';\n            this.elements.original.style.width = originalWidth + 'px';\n            this._editors.original.layout({ width: originalWidth, height: fullHeight }, true);\n            gutter === null || gutter === void 0 ? void 0 : gutter.layout(gutterLeft);\n            this.elements.modified.style.left = modifiedLeft + 'px';\n            this.elements.modified.style.width = modifiedWidth + 'px';\n            this._editors.modified.layout({ width: modifiedWidth, height: fullHeight }, true);\n            return {\n                modifiedEditor: this._editors.modified.getLayoutInfo(),\n                originalEditor: this._editors.original.getLayoutInfo(),\n            };\n        });\n        this._diffValue = this._diffModel.map((m, r) => m === null || m === void 0 ? void 0 : m.diff.read(r));\n        this.onDidUpdateDiff = Event.fromObservableLight(this._diffValue);\n        codeEditorService.willCreateDiffEditor();\n        this._contextKeyService.createKey('isInDiffEditor', true);\n        this._domElement.appendChild(this.elements.root);\n        this._register(toDisposable(() => this._domElement.removeChild(this.elements.root)));\n        this._rootSizeObserver = this._register(new ObservableElementSizeObserver(this.elements.root, options.dimension));\n        this._rootSizeObserver.setAutomaticLayout((_a = options.automaticLayout) !== null && _a !== void 0 ? _a : false);\n        this._options = this._instantiationService.createInstance(DiffEditorOptions, options);\n        this._register(autorun(reader => {\n            this._options.setWidth(this._rootSizeObserver.width.read(reader));\n        }));\n        this._contextKeyService.createKey(EditorContextKeys.isEmbeddedDiffEditor.key, false);\n        this._register(bindContextKey(EditorContextKeys.isEmbeddedDiffEditor, this._contextKeyService, reader => this._options.isInEmbeddedEditor.read(reader)));\n        this._register(bindContextKey(EditorContextKeys.comparingMovedCode, this._contextKeyService, reader => { var _a; return !!((_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader)); }));\n        this._register(bindContextKey(EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached, this._contextKeyService, reader => this._options.couldShowInlineViewBecauseOfSize.read(reader)));\n        this._register(bindContextKey(EditorContextKeys.diffEditorInlineMode, this._contextKeyService, reader => !this._options.renderSideBySide.read(reader)));\n        this._register(bindContextKey(EditorContextKeys.hasChanges, this._contextKeyService, reader => { var _a, _b, _c; return ((_c = (_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader)) === null || _b === void 0 ? void 0 : _b.mappings.length) !== null && _c !== void 0 ? _c : 0) > 0; }));\n        this._editors = this._register(this._instantiationService.createInstance(DiffEditorEditors, this.elements.original, this.elements.modified, this._options, codeEditorWidgetOptions, (i, c, o, o2) => this._createInnerEditor(i, c, o, o2)));\n        this._register(bindContextKey(EditorContextKeys.diffEditorOriginalWritable, this._contextKeyService, reader => this._options.originalEditable.read(reader)));\n        this._register(bindContextKey(EditorContextKeys.diffEditorModifiedWritable, this._contextKeyService, reader => !this._options.readOnly.read(reader)));\n        this._register(bindContextKey(EditorContextKeys.diffEditorOriginalUri, this._contextKeyService, reader => { var _a, _b; return (_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.model.original.uri.toString()) !== null && _b !== void 0 ? _b : ''; }));\n        this._register(bindContextKey(EditorContextKeys.diffEditorModifiedUri, this._contextKeyService, reader => { var _a, _b; return (_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.model.modified.uri.toString()) !== null && _b !== void 0 ? _b : ''; }));\n        this._overviewRulerPart = derivedDisposable(this, reader => !this._options.renderOverviewRuler.read(reader)\n            ? undefined\n            : this._instantiationService.createInstance(readHotReloadableExport(OverviewRulerFeature, reader), this._editors, this.elements.root, this._diffModel, this._rootSizeObserver.width, this._rootSizeObserver.height, this._layoutInfo.map(i => i.modifiedEditor))).recomputeInitiallyAndOnChange(this._store);\n        this._sash = derivedDisposable(this, reader => {\n            const showSash = this._options.renderSideBySide.read(reader);\n            this.elements.root.classList.toggle('side-by-side', showSash);\n            return !showSash ? undefined : new DiffEditorSash(this._options, this.elements.root, {\n                height: this._rootSizeObserver.height,\n                width: this._rootSizeObserver.width.map((w, reader) => { var _a, _b; return w - ((_b = (_a = this._overviewRulerPart.read(reader)) === null || _a === void 0 ? void 0 : _a.width) !== null && _b !== void 0 ? _b : 0); }),\n            }, this._boundarySashes);\n        }).recomputeInitiallyAndOnChange(this._store);\n        const unchangedRangesFeature = derivedDisposable(this, reader => /** @description UnchangedRangesFeature */ this._instantiationService.createInstance(readHotReloadableExport(HideUnchangedRegionsFeature, reader), this._editors, this._diffModel, this._options)).recomputeInitiallyAndOnChange(this._store);\n        derivedDisposable(this, reader => /** @description DiffEditorDecorations */ this._instantiationService.createInstance(readHotReloadableExport(DiffEditorDecorations, reader), this._editors, this._diffModel, this._options, this)).recomputeInitiallyAndOnChange(this._store);\n        const origViewZoneIdsToIgnore = new Set();\n        const modViewZoneIdsToIgnore = new Set();\n        let isUpdatingViewZones = false;\n        const viewZoneManager = derivedDisposable(this, reader => /** @description ViewZoneManager */ this._instantiationService.createInstance(readHotReloadableExport(DiffEditorViewZones, reader), getWindow(this._domElement), this._editors, this._diffModel, this._options, this, () => isUpdatingViewZones || unchangedRangesFeature.get().isUpdatingHiddenAreas, origViewZoneIdsToIgnore, modViewZoneIdsToIgnore)).recomputeInitiallyAndOnChange(this._store);\n        const originalViewZones = derived(this, (reader) => {\n            const orig = viewZoneManager.read(reader).viewZones.read(reader).orig;\n            const orig2 = unchangedRangesFeature.read(reader).viewZones.read(reader).origViewZones;\n            return orig.concat(orig2);\n        });\n        const modifiedViewZones = derived(this, (reader) => {\n            const mod = viewZoneManager.read(reader).viewZones.read(reader).mod;\n            const mod2 = unchangedRangesFeature.read(reader).viewZones.read(reader).modViewZones;\n            return mod.concat(mod2);\n        });\n        this._register(applyViewZones(this._editors.original, originalViewZones, isUpdatingOrigViewZones => {\n            isUpdatingViewZones = isUpdatingOrigViewZones;\n        }, origViewZoneIdsToIgnore));\n        let scrollState;\n        this._register(applyViewZones(this._editors.modified, modifiedViewZones, isUpdatingModViewZones => {\n            isUpdatingViewZones = isUpdatingModViewZones;\n            if (isUpdatingViewZones) {\n                scrollState = StableEditorScrollState.capture(this._editors.modified);\n            }\n            else {\n                scrollState === null || scrollState === void 0 ? void 0 : scrollState.restore(this._editors.modified);\n                scrollState = undefined;\n            }\n        }, modViewZoneIdsToIgnore));\n        this._accessibleDiffViewer = derivedDisposable(this, reader => this._instantiationService.createInstance(readHotReloadableExport(AccessibleDiffViewer, reader), this.elements.accessibleDiffViewer, this._accessibleDiffViewerVisible, (visible, tx) => this._accessibleDiffViewerShouldBeVisible.set(visible, tx), this._options.onlyShowAccessibleDiffViewer.map(v => !v), this._rootSizeObserver.width, this._rootSizeObserver.height, this._diffModel.map((m, r) => { var _a; return (_a = m === null || m === void 0 ? void 0 : m.diff.read(r)) === null || _a === void 0 ? void 0 : _a.mappings.map(m => m.lineRangeMapping); }), new AccessibleDiffViewerModelFromEditors(this._editors))).recomputeInitiallyAndOnChange(this._store);\n        const visibility = this._accessibleDiffViewerVisible.map(v => v ? 'hidden' : 'visible');\n        this._register(applyStyle(this.elements.modified, { visibility }));\n        this._register(applyStyle(this.elements.original, { visibility }));\n        this._createDiffEditorContributions();\n        codeEditorService.addDiffEditor(this);\n        this._gutter = derivedDisposable(this, reader => {\n            return this._options.shouldRenderGutterMenu.read(reader)\n                ? this._instantiationService.createInstance(readHotReloadableExport(DiffEditorGutter, reader), this.elements.root, this._diffModel, this._editors)\n                : undefined;\n        });\n        this._register(recomputeInitiallyAndOnChange(this._layoutInfo));\n        derivedDisposable(this, reader => /** @description MovedBlocksLinesPart */ new (readHotReloadableExport(MovedBlocksLinesFeature, reader))(this.elements.root, this._diffModel, this._layoutInfo.map(i => i.originalEditor), this._layoutInfo.map(i => i.modifiedEditor), this._editors)).recomputeInitiallyAndOnChange(this._store, value => {\n            // This is to break the layout info <-> moved blocks lines part dependency cycle.\n            this._movedBlocksLinesPart.set(value, undefined);\n        });\n        this._register(Event.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition, e => this._handleCursorPositionChange(e, true)));\n        this._register(Event.runAndSubscribe(this._editors.original.onDidChangeCursorPosition, e => this._handleCursorPositionChange(e, false)));\n        const isInitializingDiff = this._diffModel.map(this, (m, reader) => {\n            /** @isInitializingDiff isDiffUpToDate */\n            if (!m) {\n                return undefined;\n            }\n            return m.diff.read(reader) === undefined && !m.isDiffUpToDate.read(reader);\n        });\n        this._register(autorunWithStore((reader, store) => {\n            /** @description DiffEditorWidgetHelper.ShowProgress */\n            if (isInitializingDiff.read(reader) === true) {\n                const r = this._editorProgressService.show(true, 1000);\n                store.add(toDisposable(() => r.done()));\n            }\n        }));\n        this._register(toDisposable(() => {\n            var _a;\n            if (this._shouldDisposeDiffModel) {\n                (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.dispose();\n            }\n        }));\n        this._register(autorunWithStore((reader, store) => {\n            store.add(new (readHotReloadableExport(RevertButtonsFeature, reader))(this._editors, this._diffModel, this._options, this));\n        }));\n    }\n    _createInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n        const editor = instantiationService.createInstance(CodeEditorWidget, container, options, editorWidgetOptions);\n        return editor;\n    }\n    _createDiffEditorContributions() {\n        const contributions = EditorExtensionsRegistry.getDiffEditorContributions();\n        for (const desc of contributions) {\n            try {\n                this._register(this._instantiationService.createInstance(desc.ctor, this));\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n    }\n    get _targetEditor() { return this._editors.modified; }\n    getEditorType() { return EditorType.IDiffEditor; }\n    layout(dimension) {\n        this._rootSizeObserver.observe(dimension);\n    }\n    hasTextFocus() { return this._editors.original.hasTextFocus() || this._editors.modified.hasTextFocus(); }\n    saveViewState() {\n        var _a;\n        const originalViewState = this._editors.original.saveViewState();\n        const modifiedViewState = this._editors.modified.saveViewState();\n        return {\n            original: originalViewState,\n            modified: modifiedViewState,\n            modelState: (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.serializeState(),\n        };\n    }\n    restoreViewState(s) {\n        var _a;\n        if (s && s.original && s.modified) {\n            const diffEditorState = s;\n            this._editors.original.restoreViewState(diffEditorState.original);\n            this._editors.modified.restoreViewState(diffEditorState.modified);\n            if (diffEditorState.modelState) {\n                (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.restoreSerializedState(diffEditorState.modelState);\n            }\n        }\n    }\n    handleInitialized() {\n        this._editors.original.handleInitialized();\n        this._editors.modified.handleInitialized();\n    }\n    createViewModel(model) {\n        return this._instantiationService.createInstance(DiffEditorViewModel, model, this._options);\n    }\n    getModel() { var _a, _b; return (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.model) !== null && _b !== void 0 ? _b : null; }\n    setModel(model, tx) {\n        if (!model && this._diffModel.get()) {\n            // Transitioning from a model to no-model\n            this._accessibleDiffViewer.get().close();\n        }\n        const vm = model ? ('model' in model) ? { model, shouldDispose: false } : { model: this.createViewModel(model), shouldDispose: true } : undefined;\n        if (this._diffModel.get() !== (vm === null || vm === void 0 ? void 0 : vm.model)) {\n            subtransaction(tx, tx => {\n                var _a;\n                /** @description DiffEditorWidget.setModel */\n                observableFromEvent.batchEventsGlobally(tx, () => {\n                    this._editors.original.setModel(vm ? vm.model.model.original : null);\n                    this._editors.modified.setModel(vm ? vm.model.model.modified : null);\n                });\n                const prevValue = this._diffModel.get();\n                const shouldDispose = this._shouldDisposeDiffModel;\n                this._shouldDisposeDiffModel = (_a = vm === null || vm === void 0 ? void 0 : vm.shouldDispose) !== null && _a !== void 0 ? _a : false;\n                this._diffModel.set(vm === null || vm === void 0 ? void 0 : vm.model, tx);\n                if (shouldDispose) {\n                    prevValue === null || prevValue === void 0 ? void 0 : prevValue.dispose();\n                }\n            });\n        }\n    }\n    /**\n     * @param changedOptions Only has values for top-level options that have actually changed.\n     */\n    updateOptions(changedOptions) {\n        this._options.updateOptions(changedOptions);\n    }\n    getContainerDomNode() { return this._domElement; }\n    getOriginalEditor() { return this._editors.original; }\n    getModifiedEditor() { return this._editors.modified; }\n    /**\n     * @deprecated Use `this.getDiffComputationResult().changes2` instead.\n     */\n    getLineChanges() {\n        var _a;\n        const diffState = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get();\n        if (!diffState) {\n            return null;\n        }\n        return toLineChanges(diffState);\n    }\n    revert(diff) {\n        const model = this._diffModel.get();\n        if (!model || !model.isDiffUpToDate.get()) {\n            return;\n        }\n        this._editors.modified.executeEdits('diffEditor', [\n            {\n                range: diff.modified.toExclusiveRange(),\n                text: model.model.original.getValueInRange(diff.original.toExclusiveRange())\n            }\n        ]);\n    }\n    revertRangeMappings(diffs) {\n        const model = this._diffModel.get();\n        if (!model || !model.isDiffUpToDate.get()) {\n            return;\n        }\n        const changes = diffs.map(c => ({\n            range: c.modifiedRange,\n            text: model.model.original.getValueInRange(c.originalRange)\n        }));\n        this._editors.modified.executeEdits('diffEditor', changes);\n    }\n    _goTo(diff) {\n        this._editors.modified.setPosition(new Position(diff.lineRangeMapping.modified.startLineNumber, 1));\n        this._editors.modified.revealRangeInCenter(diff.lineRangeMapping.modified.toExclusiveRange());\n    }\n    goToDiff(target) {\n        var _a, _b, _c, _d;\n        const diffs = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings;\n        if (!diffs || diffs.length === 0) {\n            return;\n        }\n        const curLineNumber = this._editors.modified.getPosition().lineNumber;\n        let diff;\n        if (target === 'next') {\n            diff = (_c = diffs.find(d => d.lineRangeMapping.modified.startLineNumber > curLineNumber)) !== null && _c !== void 0 ? _c : diffs[0];\n        }\n        else {\n            diff = (_d = findLast(diffs, d => d.lineRangeMapping.modified.startLineNumber < curLineNumber)) !== null && _d !== void 0 ? _d : diffs[diffs.length - 1];\n        }\n        this._goTo(diff);\n        if (diff.lineRangeMapping.modified.isEmpty) {\n            this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, { source: 'diffEditor.goToDiff' });\n        }\n        else if (diff.lineRangeMapping.original.isEmpty) {\n            this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, { source: 'diffEditor.goToDiff' });\n        }\n        else if (diff) {\n            this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineModified, { source: 'diffEditor.goToDiff' });\n        }\n    }\n    revealFirstDiff() {\n        const diffModel = this._diffModel.get();\n        if (!diffModel) {\n            return;\n        }\n        // wait for the diff computation to finish\n        this.waitForDiff().then(() => {\n            var _a;\n            const diffs = (_a = diffModel.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings;\n            if (!diffs || diffs.length === 0) {\n                return;\n            }\n            this._goTo(diffs[0]);\n        });\n    }\n    accessibleDiffViewerNext() { this._accessibleDiffViewer.get().next(); }\n    accessibleDiffViewerPrev() { this._accessibleDiffViewer.get().prev(); }\n    async waitForDiff() {\n        const diffModel = this._diffModel.get();\n        if (!diffModel) {\n            return;\n        }\n        await diffModel.waitForDiff();\n    }\n    mapToOtherSide() {\n        var _a, _b;\n        const isModifiedFocus = this._editors.modified.hasWidgetFocus();\n        const source = isModifiedFocus ? this._editors.modified : this._editors.original;\n        const destination = isModifiedFocus ? this._editors.original : this._editors.modified;\n        let destinationSelection;\n        const sourceSelection = source.getSelection();\n        if (sourceSelection) {\n            const mappings = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.map(m => isModifiedFocus ? m.lineRangeMapping.flip() : m.lineRangeMapping);\n            if (mappings) {\n                const newRange1 = translatePosition(sourceSelection.getStartPosition(), mappings);\n                const newRange2 = translatePosition(sourceSelection.getEndPosition(), mappings);\n                destinationSelection = Range.plusRange(newRange1, newRange2);\n            }\n        }\n        return { destination, destinationSelection };\n    }\n    switchSide() {\n        const { destination, destinationSelection } = this.mapToOtherSide();\n        destination.focus();\n        if (destinationSelection) {\n            destination.setSelection(destinationSelection);\n        }\n    }\n    exitCompareMove() {\n        const model = this._diffModel.get();\n        if (!model) {\n            return;\n        }\n        model.movedTextToCompare.set(undefined, undefined);\n    }\n    collapseAllUnchangedRegions() {\n        var _a;\n        const unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\n        if (!unchangedRegions) {\n            return;\n        }\n        transaction(tx => {\n            for (const region of unchangedRegions) {\n                region.collapseAll(tx);\n            }\n        });\n    }\n    showAllUnchangedRegions() {\n        var _a;\n        const unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\n        if (!unchangedRegions) {\n            return;\n        }\n        transaction(tx => {\n            for (const region of unchangedRegions) {\n                region.showAll(tx);\n            }\n        });\n    }\n    _handleCursorPositionChange(e, isModifiedEditor) {\n        var _a, _b;\n        if ((e === null || e === void 0 ? void 0 : e.reason) === 3 /* CursorChangeReason.Explicit */) {\n            const diff = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.find(m => isModifiedEditor ? m.lineRangeMapping.modified.contains(e.position.lineNumber) : m.lineRangeMapping.original.contains(e.position.lineNumber));\n            if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.modified.isEmpty) {\n                this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineDeleted, { source: 'diffEditor.cursorPositionChanged' });\n            }\n            else if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.original.isEmpty) {\n                this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineInserted, { source: 'diffEditor.cursorPositionChanged' });\n            }\n            else if (diff) {\n                this._accessibilitySignalService.playSignal(AccessibilitySignal.diffLineModified, { source: 'diffEditor.cursorPositionChanged' });\n            }\n        }\n    }\n};\nDiffEditorWidget = __decorate([\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ICodeEditorService),\n    __param(6, IAccessibilitySignalService),\n    __param(7, IEditorProgressService)\n], DiffEditorWidget);\nexport { DiffEditorWidget };\nfunction toLineChanges(state) {\n    return state.mappings.map(x => {\n        const m = x.lineRangeMapping;\n        let originalStartLineNumber;\n        let originalEndLineNumber;\n        let modifiedStartLineNumber;\n        let modifiedEndLineNumber;\n        let innerChanges = m.innerChanges;\n        if (m.original.isEmpty) {\n            // Insertion\n            originalStartLineNumber = m.original.startLineNumber - 1;\n            originalEndLineNumber = 0;\n            innerChanges = undefined;\n        }\n        else {\n            originalStartLineNumber = m.original.startLineNumber;\n            originalEndLineNumber = m.original.endLineNumberExclusive - 1;\n        }\n        if (m.modified.isEmpty) {\n            // Deletion\n            modifiedStartLineNumber = m.modified.startLineNumber - 1;\n            modifiedEndLineNumber = 0;\n            innerChanges = undefined;\n        }\n        else {\n            modifiedStartLineNumber = m.modified.startLineNumber;\n            modifiedEndLineNumber = m.modified.endLineNumberExclusive - 1;\n        }\n        return {\n            originalStartLineNumber,\n            originalEndLineNumber,\n            modifiedStartLineNumber,\n            modifiedEndLineNumber,\n            charChanges: innerChanges === null || innerChanges === void 0 ? void 0 : innerChanges.map(m => ({\n                originalStartLineNumber: m.originalRange.startLineNumber,\n                originalStartColumn: m.originalRange.startColumn,\n                originalEndLineNumber: m.originalRange.endLineNumber,\n                originalEndColumn: m.originalRange.endColumn,\n                modifiedStartLineNumber: m.modifiedRange.startLineNumber,\n                modifiedStartColumn: m.modifiedRange.startColumn,\n                modifiedEndLineNumber: m.modifiedRange.endLineNumber,\n                modifiedEndColumn: m.modifiedRange.endColumn,\n            }))\n        };\n    });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar HideUnchangedRegionsFeature_1;\nimport { $, addDisposableListener, getWindow, h, reset } from '../../../../../base/browser/dom.js';\nimport { renderIcon, renderLabelWithIcons } from '../../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { Codicon } from '../../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { autorun, derived, derivedWithStore, observableFromEvent, observableValue, transaction } from '../../../../../base/common/observable.js';\nimport { derivedDisposable } from '../../../../../base/common/observableInternal/derived.js';\nimport { ThemeIcon } from '../../../../../base/common/themables.js';\nimport { isDefined } from '../../../../../base/common/types.js';\nimport { PlaceholderViewZone, ViewZoneOverlayWidget, applyObservableDecorations, applyStyle } from '../utils.js';\nimport { LineRange } from '../../../../common/core/lineRange.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { SymbolKinds } from '../../../../common/languages.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\n/**\n * Make sure to add the view zones to the editor!\n */\nlet HideUnchangedRegionsFeature = HideUnchangedRegionsFeature_1 = class HideUnchangedRegionsFeature extends Disposable {\n    static setBreadcrumbsSourceFactory(factory) {\n        this._breadcrumbsSourceFactory.set(factory, undefined);\n    }\n    get isUpdatingHiddenAreas() { return this._isUpdatingHiddenAreas; }\n    constructor(_editors, _diffModel, _options, _instantiationService) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._instantiationService = _instantiationService;\n        this._modifiedOutlineSource = derivedDisposable(this, (reader) => {\n            const m = this._editors.modifiedModel.read(reader);\n            const factory = HideUnchangedRegionsFeature_1._breadcrumbsSourceFactory.read(reader);\n            return (!m || !factory) ? undefined : factory(m, this._instantiationService);\n        });\n        this._isUpdatingHiddenAreas = false;\n        this._register(this._editors.original.onDidChangeCursorPosition(e => {\n            if (e.reason === 1 /* CursorChangeReason.ContentFlush */) {\n                return;\n            }\n            const m = this._diffModel.get();\n            transaction(tx => {\n                for (const s of this._editors.original.getSelections() || []) {\n                    m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getStartPosition().lineNumber, 0 /* RevealPreference.FromCloserSide */, tx);\n                    m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getEndPosition().lineNumber, 0 /* RevealPreference.FromCloserSide */, tx);\n                }\n            });\n        }));\n        this._register(this._editors.modified.onDidChangeCursorPosition(e => {\n            if (e.reason === 1 /* CursorChangeReason.ContentFlush */) {\n                return;\n            }\n            const m = this._diffModel.get();\n            transaction(tx => {\n                for (const s of this._editors.modified.getSelections() || []) {\n                    m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getStartPosition().lineNumber, 0 /* RevealPreference.FromCloserSide */, tx);\n                    m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getEndPosition().lineNumber, 0 /* RevealPreference.FromCloserSide */, tx);\n                }\n            });\n        }));\n        const unchangedRegions = this._diffModel.map((m, reader) => {\n            var _a, _b;\n            const regions = (_a = m === null || m === void 0 ? void 0 : m.unchangedRegions.read(reader)) !== null && _a !== void 0 ? _a : [];\n            if (regions.length === 1 && regions[0].modifiedLineNumber === 1 && regions[0].lineCount === ((_b = this._editors.modifiedModel.read(reader)) === null || _b === void 0 ? void 0 : _b.getLineCount())) {\n                return [];\n            }\n            return regions;\n        });\n        this.viewZones = derivedWithStore(this, (reader, store) => {\n            /** @description view Zones */\n            const modifiedOutlineSource = this._modifiedOutlineSource.read(reader);\n            if (!modifiedOutlineSource) {\n                return { origViewZones: [], modViewZones: [] };\n            }\n            const origViewZones = [];\n            const modViewZones = [];\n            const sideBySide = this._options.renderSideBySide.read(reader);\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    continue;\n                }\n                {\n                    const d = derived(this, reader => /** @description hiddenOriginalRangeStart */ r.getHiddenOriginalRange(reader).startLineNumber - 1);\n                    const origVz = new PlaceholderViewZone(d, 24);\n                    origViewZones.push(origVz);\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.original, origVz, r, r.originalUnchangedRange, !sideBySide, modifiedOutlineSource, l => this._diffModel.get().ensureModifiedLineIsVisible(l, 2 /* RevealPreference.FromBottom */, undefined), this._options));\n                }\n                {\n                    const d = derived(this, reader => /** @description hiddenModifiedRangeStart */ r.getHiddenModifiedRange(reader).startLineNumber - 1);\n                    const modViewZone = new PlaceholderViewZone(d, 24);\n                    modViewZones.push(modViewZone);\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.modified, modViewZone, r, r.modifiedUnchangedRange, false, modifiedOutlineSource, l => this._diffModel.get().ensureModifiedLineIsVisible(l, 2 /* RevealPreference.FromBottom */, undefined), this._options));\n                }\n            }\n            return { origViewZones, modViewZones, };\n        });\n        const unchangedLinesDecoration = {\n            description: 'unchanged lines',\n            className: 'diff-unchanged-lines',\n            isWholeLine: true,\n        };\n        const unchangedLinesDecorationShow = {\n            description: 'Fold Unchanged',\n            glyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true })\n                .appendMarkdown(localize('foldUnchanged', 'Fold Unchanged Region')),\n            glyphMarginClassName: 'fold-unchanged ' + ThemeIcon.asClassName(Codicon.fold),\n            zIndex: 10001,\n        };\n        this._register(applyObservableDecorations(this._editors.original, derived(this, reader => {\n            /** @description decorations */\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            const result = curUnchangedRegions.map(r => ({\n                range: r.originalUnchangedRange.toInclusiveRange(),\n                options: unchangedLinesDecoration,\n            }));\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    result.push({\n                        range: Range.fromPositions(new Position(r.originalLineNumber, 1)),\n                        options: unchangedLinesDecorationShow,\n                    });\n                }\n            }\n            return result;\n        })));\n        this._register(applyObservableDecorations(this._editors.modified, derived(this, reader => {\n            /** @description decorations */\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            const result = curUnchangedRegions.map(r => ({\n                range: r.modifiedUnchangedRange.toInclusiveRange(),\n                options: unchangedLinesDecoration,\n            }));\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    result.push({\n                        range: LineRange.ofLength(r.modifiedLineNumber, 1).toInclusiveRange(),\n                        options: unchangedLinesDecorationShow,\n                    });\n                }\n            }\n            return result;\n        })));\n        this._register(autorun((reader) => {\n            /** @description update folded unchanged regions */\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            this._isUpdatingHiddenAreas = true;\n            try {\n                this._editors.original.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenOriginalRange(reader).toInclusiveRange()).filter(isDefined));\n                this._editors.modified.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenModifiedRange(reader).toInclusiveRange()).filter(isDefined));\n            }\n            finally {\n                this._isUpdatingHiddenAreas = false;\n            }\n        }));\n        this._register(this._editors.modified.onMouseUp(event => {\n            var _a;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const region = model.unchangedRegions.get().find(r => r.modifiedUnchangedRange.includes(lineNumber));\n                if (!region) {\n                    return;\n                }\n                region.collapseAll(undefined);\n                event.event.stopPropagation();\n                event.event.preventDefault();\n            }\n        }));\n        this._register(this._editors.original.onMouseUp(event => {\n            var _a;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const region = model.unchangedRegions.get().find(r => r.originalUnchangedRange.includes(lineNumber));\n                if (!region) {\n                    return;\n                }\n                region.collapseAll(undefined);\n                event.event.stopPropagation();\n                event.event.preventDefault();\n            }\n        }));\n    }\n};\nHideUnchangedRegionsFeature._breadcrumbsSourceFactory = observableValue('breadcrumbsSourceFactory', undefined);\nHideUnchangedRegionsFeature = HideUnchangedRegionsFeature_1 = __decorate([\n    __param(3, IInstantiationService)\n], HideUnchangedRegionsFeature);\nexport { HideUnchangedRegionsFeature };\nclass CollapsedCodeOverlayWidget extends ViewZoneOverlayWidget {\n    constructor(_editor, _viewZone, _unchangedRegion, _unchangedRegionRange, _hide, _modifiedOutlineSource, _revealModifiedHiddenLine, _options) {\n        const root = h('div.diff-hidden-lines-widget');\n        super(_editor, _viewZone, root.root);\n        this._editor = _editor;\n        this._unchangedRegion = _unchangedRegion;\n        this._unchangedRegionRange = _unchangedRegionRange;\n        this._hide = _hide;\n        this._modifiedOutlineSource = _modifiedOutlineSource;\n        this._revealModifiedHiddenLine = _revealModifiedHiddenLine;\n        this._options = _options;\n        this._nodes = h('div.diff-hidden-lines', [\n            h('div.top@top', { title: localize('diff.hiddenLines.top', 'Click or drag to show more above') }),\n            h('div.center@content', { style: { display: 'flex' } }, [\n                h('div@first', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center', flexShrink: '0' } }, [$('a', { title: localize('showUnchangedRegion', 'Show Unchanged Region'), role: 'button', onclick: () => { this._unchangedRegion.showAll(undefined); } }, ...renderLabelWithIcons('$(unfold)'))]),\n                h('div@others', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center' } }),\n            ]),\n            h('div.bottom@bottom', { title: localize('diff.bottom', 'Click or drag to show more below'), role: 'button' }),\n        ]);\n        root.root.appendChild(this._nodes.root);\n        const layoutInfo = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\n        if (!this._hide) {\n            this._register(applyStyle(this._nodes.first, { width: layoutInfo.map((l) => l.contentLeft) }));\n        }\n        else {\n            reset(this._nodes.first);\n        }\n        this._register(autorun(reader => {\n            /** @description Update CollapsedCodeOverlayWidget canMove* css classes */\n            const isFullyRevealed = this._unchangedRegion.visibleLineCountTop.read(reader) + this._unchangedRegion.visibleLineCountBottom.read(reader) === this._unchangedRegion.lineCount;\n            this._nodes.bottom.classList.toggle('canMoveTop', !isFullyRevealed);\n            this._nodes.bottom.classList.toggle('canMoveBottom', this._unchangedRegion.visibleLineCountBottom.read(reader) > 0);\n            this._nodes.top.classList.toggle('canMoveTop', this._unchangedRegion.visibleLineCountTop.read(reader) > 0);\n            this._nodes.top.classList.toggle('canMoveBottom', !isFullyRevealed);\n            const isDragged = this._unchangedRegion.isDragged.read(reader);\n            const domNode = this._editor.getDomNode();\n            if (domNode) {\n                domNode.classList.toggle('draggingUnchangedRegion', !!isDragged);\n                if (isDragged === 'top') {\n                    domNode.classList.toggle('canMoveTop', this._unchangedRegion.visibleLineCountTop.read(reader) > 0);\n                    domNode.classList.toggle('canMoveBottom', !isFullyRevealed);\n                }\n                else if (isDragged === 'bottom') {\n                    domNode.classList.toggle('canMoveTop', !isFullyRevealed);\n                    domNode.classList.toggle('canMoveBottom', this._unchangedRegion.visibleLineCountBottom.read(reader) > 0);\n                }\n                else {\n                    domNode.classList.toggle('canMoveTop', false);\n                    domNode.classList.toggle('canMoveBottom', false);\n                }\n            }\n        }));\n        const editor = this._editor;\n        this._register(addDisposableListener(this._nodes.top, 'mousedown', e => {\n            if (e.button !== 0) {\n                return;\n            }\n            this._nodes.top.classList.toggle('dragging', true);\n            this._nodes.root.classList.toggle('dragging', true);\n            e.preventDefault();\n            const startTop = e.clientY;\n            let didMove = false;\n            const cur = this._unchangedRegion.visibleLineCountTop.get();\n            this._unchangedRegion.isDragged.set('top', undefined);\n            const window = getWindow(this._nodes.top);\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n                const currentTop = e.clientY;\n                const delta = currentTop - startTop;\n                didMove = didMove || Math.abs(delta) > 2;\n                const lineDelta = Math.round(delta / editor.getOption(67 /* EditorOption.lineHeight */));\n                const newVal = Math.max(0, Math.min(cur + lineDelta, this._unchangedRegion.getMaxVisibleLineCountTop()));\n                this._unchangedRegion.visibleLineCountTop.set(newVal, undefined);\n            });\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n                if (!didMove) {\n                    this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\n                }\n                this._nodes.top.classList.toggle('dragging', false);\n                this._nodes.root.classList.toggle('dragging', false);\n                this._unchangedRegion.isDragged.set(undefined, undefined);\n                mouseMoveListener.dispose();\n                mouseUpListener.dispose();\n            });\n        }));\n        this._register(addDisposableListener(this._nodes.bottom, 'mousedown', e => {\n            if (e.button !== 0) {\n                return;\n            }\n            this._nodes.bottom.classList.toggle('dragging', true);\n            this._nodes.root.classList.toggle('dragging', true);\n            e.preventDefault();\n            const startTop = e.clientY;\n            let didMove = false;\n            const cur = this._unchangedRegion.visibleLineCountBottom.get();\n            this._unchangedRegion.isDragged.set('bottom', undefined);\n            const window = getWindow(this._nodes.bottom);\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n                const currentTop = e.clientY;\n                const delta = currentTop - startTop;\n                didMove = didMove || Math.abs(delta) > 2;\n                const lineDelta = Math.round(delta / editor.getOption(67 /* EditorOption.lineHeight */));\n                const newVal = Math.max(0, Math.min(cur - lineDelta, this._unchangedRegion.getMaxVisibleLineCountBottom()));\n                const top = this._unchangedRegionRange.endLineNumberExclusive > editor.getModel().getLineCount()\n                    ? editor.getContentHeight()\n                    : editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                this._unchangedRegion.visibleLineCountBottom.set(newVal, undefined);\n                const top2 = this._unchangedRegionRange.endLineNumberExclusive > editor.getModel().getLineCount()\n                    ? editor.getContentHeight()\n                    : editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n            });\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n                this._unchangedRegion.isDragged.set(undefined, undefined);\n                if (!didMove) {\n                    const top = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                    this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\n                    const top2 = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                    editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n                }\n                this._nodes.bottom.classList.toggle('dragging', false);\n                this._nodes.root.classList.toggle('dragging', false);\n                mouseMoveListener.dispose();\n                mouseUpListener.dispose();\n            });\n        }));\n        this._register(autorun(reader => {\n            /** @description update labels */\n            const children = [];\n            if (!this._hide) {\n                const lineCount = _unchangedRegion.getHiddenModifiedRange(reader).length;\n                const linesHiddenText = localize('hiddenLines', '{0} hidden lines', lineCount);\n                const span = $('span', { title: localize('diff.hiddenLines.expandAll', 'Double click to unfold') }, linesHiddenText);\n                span.addEventListener('dblclick', e => {\n                    if (e.button !== 0) {\n                        return;\n                    }\n                    e.preventDefault();\n                    this._unchangedRegion.showAll(undefined);\n                });\n                children.push(span);\n                const range = this._unchangedRegion.getHiddenModifiedRange(reader);\n                const items = this._modifiedOutlineSource.getBreadcrumbItems(range, reader);\n                if (items.length > 0) {\n                    children.push($('span', undefined, '\\u00a0\\u00a0|\\u00a0\\u00a0'));\n                    for (let i = 0; i < items.length; i++) {\n                        const item = items[i];\n                        const icon = SymbolKinds.toIcon(item.kind);\n                        const divItem = h('div.breadcrumb-item', {\n                            style: { display: 'flex', alignItems: 'center' },\n                        }, [\n                            renderIcon(icon),\n                            '\\u00a0',\n                            item.name,\n                            ...(i === items.length - 1\n                                ? []\n                                : [renderIcon(Codicon.chevronRight)])\n                        ]).root;\n                        children.push(divItem);\n                        divItem.onclick = () => {\n                            this._revealModifiedHiddenLine(item.startLineNumber);\n                        };\n                    }\n                }\n            }\n            reset(this._nodes.others, ...children);\n        }));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { localize } from '../../../../nls.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nexport const diffMoveBorder = registerColor('diffEditor.move.border', { dark: '#8b8b8b9c', light: '#8b8b8b9c', hcDark: '#8b8b8b9c', hcLight: '#8b8b8b9c', }, localize('diffEditor.move.border', 'The border color for text that got moved in the diff editor.'));\nexport const diffMoveBorderActive = registerColor('diffEditor.moveActive.border', { dark: '#FFA500', light: '#FFA500', hcDark: '#FFA500', hcLight: '#FFA500', }, localize('diffEditor.moveActive.border', 'The active border color for text that got moved in the diff editor.'));\nexport const diffEditorUnchangedRegionShadow = registerColor('diffEditor.unchangedRegionShadow', { dark: '#000000', light: '#737373BF', hcDark: '#000000', hcLight: '#737373BF', }, localize('diffEditor.unchangedRegionShadow', 'The color of the shadow around unchanged region widgets.'));\nexport const diffInsertIcon = registerIcon('diff-insert', Codicon.add, localize('diffInsertIcon', 'Line decoration for inserts in the diff editor.'));\nexport const diffRemoveIcon = registerIcon('diff-remove', Codicon.remove, localize('diffRemoveIcon', 'Line decoration for removals in the diff editor.'));\nexport const diffLineAddDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\n    className: 'line-insert',\n    description: 'line-insert',\n    isWholeLine: true,\n    linesDecorationsClassName: 'insert-sign ' + ThemeIcon.asClassName(diffInsertIcon),\n    marginClassName: 'gutter-insert',\n});\nexport const diffLineDeleteDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\n    className: 'line-delete',\n    description: 'line-delete',\n    isWholeLine: true,\n    linesDecorationsClassName: 'delete-sign ' + ThemeIcon.asClassName(diffRemoveIcon),\n    marginClassName: 'gutter-delete',\n});\nexport const diffLineAddDecorationBackground = ModelDecorationOptions.register({\n    className: 'line-insert',\n    description: 'line-insert',\n    isWholeLine: true,\n    marginClassName: 'gutter-insert',\n});\nexport const diffLineDeleteDecorationBackground = ModelDecorationOptions.register({\n    className: 'line-delete',\n    description: 'line-delete',\n    isWholeLine: true,\n    marginClassName: 'gutter-delete',\n});\nexport const diffAddDecoration = ModelDecorationOptions.register({\n    className: 'char-insert',\n    description: 'char-insert',\n    shouldFillLineOnLineBreak: true,\n});\nexport const diffWholeLineAddDecoration = ModelDecorationOptions.register({\n    className: 'char-insert',\n    description: 'char-insert',\n    isWholeLine: true,\n});\nexport const diffAddDecorationEmpty = ModelDecorationOptions.register({\n    className: 'char-insert diff-range-empty',\n    description: 'char-insert diff-range-empty',\n});\nexport const diffDeleteDecoration = ModelDecorationOptions.register({\n    className: 'char-delete',\n    description: 'char-delete',\n    shouldFillLineOnLineBreak: true,\n});\nexport const diffWholeLineDeleteDecoration = ModelDecorationOptions.register({\n    className: 'char-delete',\n    description: 'char-delete',\n    isWholeLine: true,\n});\nexport const diffDeleteDecorationEmpty = ModelDecorationOptions.register({\n    className: 'char-delete diff-range-empty',\n    description: 'char-delete diff-range-empty',\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { isHotReloadEnabled, registerHotReloadHandler } from '../../../../base/common/hotReload.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunHandleChanges, autorunOpts, autorunWithStore, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { ElementSizeObserver } from '../../config/elementSizeObserver.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { TextLength } from '../../../common/core/textLength.js';\nexport function joinCombine(arr1, arr2, keySelector, combine) {\n    if (arr1.length === 0) {\n        return arr2;\n    }\n    if (arr2.length === 0) {\n        return arr1;\n    }\n    const result = [];\n    let i = 0;\n    let j = 0;\n    while (i < arr1.length && j < arr2.length) {\n        const val1 = arr1[i];\n        const val2 = arr2[j];\n        const key1 = keySelector(val1);\n        const key2 = keySelector(val2);\n        if (key1 < key2) {\n            result.push(val1);\n            i++;\n        }\n        else if (key1 > key2) {\n            result.push(val2);\n            j++;\n        }\n        else {\n            result.push(combine(val1, val2));\n            i++;\n            j++;\n        }\n    }\n    while (i < arr1.length) {\n        result.push(arr1[i]);\n        i++;\n    }\n    while (j < arr2.length) {\n        result.push(arr2[j]);\n        j++;\n    }\n    return result;\n}\n// TODO make utility\nexport function applyObservableDecorations(editor, decorations) {\n    const d = new DisposableStore();\n    const decorationsCollection = editor.createDecorationsCollection();\n    d.add(autorunOpts({ debugName: () => `Apply decorations from ${decorations.debugName}` }, reader => {\n        const d = decorations.read(reader);\n        decorationsCollection.set(d);\n    }));\n    d.add({\n        dispose: () => {\n            decorationsCollection.clear();\n        }\n    });\n    return d;\n}\nexport function appendRemoveOnDispose(parent, child) {\n    parent.appendChild(child);\n    return toDisposable(() => {\n        parent.removeChild(child);\n    });\n}\nexport function prependRemoveOnDispose(parent, child) {\n    parent.prepend(child);\n    return toDisposable(() => {\n        parent.removeChild(child);\n    });\n}\nexport class ObservableElementSizeObserver extends Disposable {\n    get width() { return this._width; }\n    get height() { return this._height; }\n    constructor(element, dimension) {\n        super();\n        this.elementSizeObserver = this._register(new ElementSizeObserver(element, dimension));\n        this._width = observableValue(this, this.elementSizeObserver.getWidth());\n        this._height = observableValue(this, this.elementSizeObserver.getHeight());\n        this._register(this.elementSizeObserver.onDidChange(e => transaction(tx => {\n            /** @description Set width/height from elementSizeObserver */\n            this._width.set(this.elementSizeObserver.getWidth(), tx);\n            this._height.set(this.elementSizeObserver.getHeight(), tx);\n        })));\n    }\n    observe(dimension) {\n        this.elementSizeObserver.observe(dimension);\n    }\n    setAutomaticLayout(automaticLayout) {\n        if (automaticLayout) {\n            this.elementSizeObserver.startObserving();\n        }\n        else {\n            this.elementSizeObserver.stopObserving();\n        }\n    }\n}\nexport function animatedObservable(targetWindow, base, store) {\n    let targetVal = base.get();\n    let startVal = targetVal;\n    let curVal = targetVal;\n    const result = observableValue('animatedValue', targetVal);\n    let animationStartMs = -1;\n    const durationMs = 300;\n    let animationFrame = undefined;\n    store.add(autorunHandleChanges({\n        createEmptyChangeSummary: () => ({ animate: false }),\n        handleChange: (ctx, s) => {\n            if (ctx.didChange(base)) {\n                s.animate = s.animate || ctx.change;\n            }\n            return true;\n        }\n    }, (reader, s) => {\n        /** @description update value */\n        if (animationFrame !== undefined) {\n            targetWindow.cancelAnimationFrame(animationFrame);\n            animationFrame = undefined;\n        }\n        startVal = curVal;\n        targetVal = base.read(reader);\n        animationStartMs = Date.now() - (s.animate ? 0 : durationMs);\n        update();\n    }));\n    function update() {\n        const passedMs = Date.now() - animationStartMs;\n        curVal = Math.floor(easeOutExpo(passedMs, startVal, targetVal - startVal, durationMs));\n        if (passedMs < durationMs) {\n            animationFrame = targetWindow.requestAnimationFrame(update);\n        }\n        else {\n            curVal = targetVal;\n        }\n        result.set(curVal, undefined);\n    }\n    return result;\n}\nfunction easeOutExpo(t, b, c, d) {\n    return t === d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\nexport class ViewZoneOverlayWidget extends Disposable {\n    constructor(editor, viewZone, htmlElement) {\n        super();\n        this._register(new ManagedOverlayWidget(editor, htmlElement));\n        this._register(applyStyle(htmlElement, {\n            height: viewZone.actualHeight,\n            top: viewZone.actualTop,\n        }));\n    }\n}\nexport class PlaceholderViewZone {\n    get afterLineNumber() { return this._afterLineNumber.get(); }\n    constructor(_afterLineNumber, heightInPx) {\n        this._afterLineNumber = _afterLineNumber;\n        this.heightInPx = heightInPx;\n        this.domNode = document.createElement('div');\n        this._actualTop = observableValue(this, undefined);\n        this._actualHeight = observableValue(this, undefined);\n        this.actualTop = this._actualTop;\n        this.actualHeight = this._actualHeight;\n        this.showInHiddenAreas = true;\n        this.onChange = this._afterLineNumber;\n        this.onDomNodeTop = (top) => {\n            this._actualTop.set(top, undefined);\n        };\n        this.onComputedHeight = (height) => {\n            this._actualHeight.set(height, undefined);\n        };\n    }\n}\nexport class ManagedOverlayWidget {\n    constructor(_editor, _domElement) {\n        this._editor = _editor;\n        this._domElement = _domElement;\n        this._overlayWidgetId = `managedOverlayWidget-${ManagedOverlayWidget._counter++}`;\n        this._overlayWidget = {\n            getId: () => this._overlayWidgetId,\n            getDomNode: () => this._domElement,\n            getPosition: () => null\n        };\n        this._editor.addOverlayWidget(this._overlayWidget);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this._overlayWidget);\n    }\n}\nManagedOverlayWidget._counter = 0;\nexport function applyStyle(domNode, style) {\n    return autorun(reader => {\n        /** @description applyStyle */\n        for (let [key, val] of Object.entries(style)) {\n            if (val && typeof val === 'object' && 'read' in val) {\n                val = val.read(reader);\n            }\n            if (typeof val === 'number') {\n                val = `${val}px`;\n            }\n            key = key.replace(/[A-Z]/g, m => '-' + m.toLowerCase());\n            domNode.style[key] = val;\n        }\n    });\n}\nexport function readHotReloadableExport(value, reader) {\n    observeHotReloadableExports([value], reader);\n    return value;\n}\nexport function observeHotReloadableExports(values, reader) {\n    if (isHotReloadEnabled()) {\n        const o = observableSignalFromEvent('reload', event => registerHotReloadHandler(({ oldExports }) => {\n            if (![...Object.values(oldExports)].some(v => values.includes(v))) {\n                return undefined;\n            }\n            return (_newExports) => {\n                event(undefined);\n                return true;\n            };\n        }));\n        o.read(reader);\n    }\n}\nexport function applyViewZones(editor, viewZones, setIsUpdating, zoneIds) {\n    const store = new DisposableStore();\n    const lastViewZoneIds = [];\n    store.add(autorunWithStore((reader, store) => {\n        /** @description applyViewZones */\n        const curViewZones = viewZones.read(reader);\n        const viewZonIdsPerViewZone = new Map();\n        const viewZoneIdPerOnChangeObservable = new Map();\n        // Add/remove view zones\n        if (setIsUpdating) {\n            setIsUpdating(true);\n        }\n        editor.changeViewZones(a => {\n            for (const id of lastViewZoneIds) {\n                a.removeZone(id);\n                zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.delete(id);\n            }\n            lastViewZoneIds.length = 0;\n            for (const z of curViewZones) {\n                const id = a.addZone(z);\n                if (z.setZoneId) {\n                    z.setZoneId(id);\n                }\n                lastViewZoneIds.push(id);\n                zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.add(id);\n                viewZonIdsPerViewZone.set(z, id);\n            }\n        });\n        if (setIsUpdating) {\n            setIsUpdating(false);\n        }\n        // Layout zone on change\n        store.add(autorunHandleChanges({\n            createEmptyChangeSummary() {\n                return { zoneIds: [] };\n            },\n            handleChange(context, changeSummary) {\n                const id = viewZoneIdPerOnChangeObservable.get(context.changedObservable);\n                if (id !== undefined) {\n                    changeSummary.zoneIds.push(id);\n                }\n                return true;\n            },\n        }, (reader, changeSummary) => {\n            /** @description layoutZone on change */\n            for (const vz of curViewZones) {\n                if (vz.onChange) {\n                    viewZoneIdPerOnChangeObservable.set(vz.onChange, viewZonIdsPerViewZone.get(vz));\n                    vz.onChange.read(reader);\n                }\n            }\n            if (setIsUpdating) {\n                setIsUpdating(true);\n            }\n            editor.changeViewZones(a => { for (const id of changeSummary.zoneIds) {\n                a.layoutZone(id);\n            } });\n            if (setIsUpdating) {\n                setIsUpdating(false);\n            }\n        }));\n    }));\n    store.add({\n        dispose() {\n            if (setIsUpdating) {\n                setIsUpdating(true);\n            }\n            editor.changeViewZones(a => { for (const id of lastViewZoneIds) {\n                a.removeZone(id);\n            } });\n            zoneIds === null || zoneIds === void 0 ? void 0 : zoneIds.clear();\n            if (setIsUpdating) {\n                setIsUpdating(false);\n            }\n        }\n    });\n    return store;\n}\nexport class DisposableCancellationTokenSource extends CancellationTokenSource {\n    dispose() {\n        super.dispose(true);\n    }\n}\nexport function translatePosition(posInOriginal, mappings) {\n    const mapping = findLast(mappings, m => m.original.startLineNumber <= posInOriginal.lineNumber);\n    if (!mapping) {\n        // No changes before the position\n        return Range.fromPositions(posInOriginal);\n    }\n    if (mapping.original.endLineNumberExclusive <= posInOriginal.lineNumber) {\n        const newLineNumber = posInOriginal.lineNumber - mapping.original.endLineNumberExclusive + mapping.modified.endLineNumberExclusive;\n        return Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n    }\n    if (!mapping.innerChanges) {\n        // Only for legacy algorithm\n        return Range.fromPositions(new Position(mapping.modified.startLineNumber, 1));\n    }\n    const innerMapping = findLast(mapping.innerChanges, m => m.originalRange.getStartPosition().isBeforeOrEqual(posInOriginal));\n    if (!innerMapping) {\n        const newLineNumber = posInOriginal.lineNumber - mapping.original.startLineNumber + mapping.modified.startLineNumber;\n        return Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n    }\n    if (innerMapping.originalRange.containsPosition(posInOriginal)) {\n        return innerMapping.modifiedRange;\n    }\n    else {\n        const l = lengthBetweenPositions(innerMapping.originalRange.getEndPosition(), posInOriginal);\n        return Range.fromPositions(l.addToPosition(innerMapping.modifiedRange.getEndPosition()));\n    }\n}\nfunction lengthBetweenPositions(position1, position2) {\n    if (position1.lineNumber === position2.lineNumber) {\n        return new TextLength(0, position2.column - position1.column);\n    }\n    else {\n        return new TextLength(position2.lineNumber - position1.lineNumber, position2.column - 1);\n    }\n}\nexport function bindContextKey(key, service, computeValue) {\n    const boundKey = key.bindTo(service);\n    return autorunOpts({ debugName: () => `Set Context Key \"${key.key}\"` }, reader => {\n        boundKey.set(computeValue(reader));\n    });\n}\nexport function filterWithPrevious(arr, filter) {\n    let prev;\n    return arr.filter(cur => {\n        const result = filter(cur, prev);\n        prev = cur;\n        return result;\n    });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar MarkdownRenderer_1;\nimport { renderMarkdown } from '../../../../../base/browser/markdownRenderer.js';\nimport { createTrustedTypesPolicy } from '../../../../../base/browser/trustedTypes.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport './renderedMarkdown.css';\nimport { applyFontInfo } from '../../../config/domFontInfo.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { tokenizeToString } from '../../../../common/languages/textToHtmlTokenizer.js';\nimport { IOpenerService } from '../../../../../platform/opener/common/opener.js';\n/**\n * Markdown renderer that can render codeblocks with the editor mechanics. This\n * renderer should always be preferred.\n */\nlet MarkdownRenderer = MarkdownRenderer_1 = class MarkdownRenderer {\n    constructor(_options, _languageService, _openerService) {\n        this._options = _options;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this._onDidRenderAsync = new Emitter();\n        this.onDidRenderAsync = this._onDidRenderAsync.event;\n    }\n    dispose() {\n        this._onDidRenderAsync.dispose();\n    }\n    render(markdown, options, markedOptions) {\n        if (!markdown) {\n            const element = document.createElement('span');\n            return { element, dispose: () => { } };\n        }\n        const disposables = new DisposableStore();\n        const rendered = disposables.add(renderMarkdown(markdown, { ...this._getRenderOptions(markdown, disposables), ...options }, markedOptions));\n        rendered.element.classList.add('rendered-markdown');\n        return {\n            element: rendered.element,\n            dispose: () => disposables.dispose()\n        };\n    }\n    _getRenderOptions(markdown, disposables) {\n        return {\n            codeBlockRenderer: async (languageAlias, value) => {\n                var _a, _b, _c;\n                // In markdown,\n                // it is possible that we stumble upon language aliases (e.g.js instead of javascript)\n                // it is possible no alias is given in which case we fall back to the current editor lang\n                let languageId;\n                if (languageAlias) {\n                    languageId = this._languageService.getLanguageIdByLanguageName(languageAlias);\n                }\n                else if (this._options.editor) {\n                    languageId = (_a = this._options.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getLanguageId();\n                }\n                if (!languageId) {\n                    languageId = PLAINTEXT_LANGUAGE_ID;\n                }\n                const html = await tokenizeToString(this._languageService, value, languageId);\n                const element = document.createElement('span');\n                element.innerHTML = ((_c = (_b = MarkdownRenderer_1._ttpTokenizer) === null || _b === void 0 ? void 0 : _b.createHTML(html)) !== null && _c !== void 0 ? _c : html);\n                // use \"good\" font\n                if (this._options.editor) {\n                    const fontInfo = this._options.editor.getOption(50 /* EditorOption.fontInfo */);\n                    applyFontInfo(element, fontInfo);\n                }\n                else if (this._options.codeBlockFontFamily) {\n                    element.style.fontFamily = this._options.codeBlockFontFamily;\n                }\n                if (this._options.codeBlockFontSize !== undefined) {\n                    element.style.fontSize = this._options.codeBlockFontSize;\n                }\n                return element;\n            },\n            asyncRenderCallback: () => this._onDidRenderAsync.fire(),\n            actionHandler: {\n                callback: (link) => openLinkFromMarkdown(this._openerService, link, markdown.isTrusted),\n                disposables: disposables\n            }\n        };\n    }\n};\nMarkdownRenderer._ttpTokenizer = createTrustedTypesPolicy('tokenizeToString', {\n    createHTML(html) {\n        return html;\n    }\n});\nMarkdownRenderer = MarkdownRenderer_1 = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService)\n], MarkdownRenderer);\nexport { MarkdownRenderer };\nexport async function openLinkFromMarkdown(openerService, link, isTrusted) {\n    try {\n        return await openerService.open(link, {\n            fromUserGesture: true,\n            allowContributedOpeners: true,\n            allowCommands: toAllowCommandsOption(isTrusted),\n        });\n    }\n    catch (e) {\n        onUnexpectedError(e);\n        return false;\n    }\n}\nfunction toAllowCommandsOption(isTrusted) {\n    if (isTrusted === true) {\n        return true; // Allow all commands\n    }\n    if (isTrusted && Array.isArray(isTrusted.enabledCommands)) {\n        return isTrusted.enabledCommands; // Allow subset of commands\n    }\n    return false; // Block commands\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { h } from '../../../../base/browser/dom.js';\nimport { Button } from '../../../../base/browser/ui/button/button.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableFromEvent } from '../../../../base/common/observable.js';\nimport { globalTransaction, observableValue } from '../../../../base/common/observableInternal/base.js';\nimport { DiffEditorWidget } from '../diffEditor/diffEditorWidget.js';\nimport { MenuWorkbenchToolBar } from '../../../../platform/actions/browser/toolbar.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ActionRunnerWithContext } from './utils.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nexport class TemplateData {\n    constructor(viewModel, deltaScrollVertical) {\n        this.viewModel = viewModel;\n        this.deltaScrollVertical = deltaScrollVertical;\n    }\n    getId() {\n        return this.viewModel;\n    }\n}\nlet DiffEditorItemTemplate = class DiffEditorItemTemplate extends Disposable {\n    constructor(_container, _overflowWidgetsDomNode, _workbenchUIElementFactory, _instantiationService) {\n        super();\n        this._container = _container;\n        this._overflowWidgetsDomNode = _overflowWidgetsDomNode;\n        this._workbenchUIElementFactory = _workbenchUIElementFactory;\n        this._instantiationService = _instantiationService;\n        this._viewModel = observableValue(this, undefined);\n        this._collapsed = derived(this, reader => { var _a; return (_a = this._viewModel.read(reader)) === null || _a === void 0 ? void 0 : _a.collapsed.read(reader); });\n        this._editorContentHeight = observableValue(this, 500);\n        this.contentHeight = derived(this, reader => {\n            const h = this._collapsed.read(reader) ? 0 : this._editorContentHeight.read(reader);\n            return h + this._outerEditorHeight;\n        });\n        this._modifiedContentWidth = observableValue(this, 0);\n        this._modifiedWidth = observableValue(this, 0);\n        this._originalContentWidth = observableValue(this, 0);\n        this._originalWidth = observableValue(this, 0);\n        this.maxScroll = derived(this, reader => {\n            const scroll1 = this._modifiedContentWidth.read(reader) - this._modifiedWidth.read(reader);\n            const scroll2 = this._originalContentWidth.read(reader) - this._originalWidth.read(reader);\n            if (scroll1 > scroll2) {\n                return { maxScroll: scroll1, width: this._modifiedWidth.read(reader) };\n            }\n            else {\n                return { maxScroll: scroll2, width: this._originalWidth.read(reader) };\n            }\n        });\n        this._elements = h('div.multiDiffEntry', [\n            h('div.header@header', [\n                h('div.header-content', [\n                    h('div.collapse-button@collapseButton'),\n                    h('div.file-path', [\n                        h('div.title.modified.show-file-icons@primaryPath', []),\n                        h('div.status.deleted@status', ['R']),\n                        h('div.title.original.show-file-icons@secondaryPath', []),\n                    ]),\n                    h('div.actions@actions'),\n                ]),\n            ]),\n            h('div.editorParent', [\n                h('div.editorContainer@editor'),\n            ])\n        ]);\n        this.editor = this._register(this._instantiationService.createInstance(DiffEditorWidget, this._elements.editor, {\n            overflowWidgetsDomNode: this._overflowWidgetsDomNode,\n        }, {}));\n        this.isModifedFocused = isFocused(this.editor.getModifiedEditor());\n        this.isOriginalFocused = isFocused(this.editor.getOriginalEditor());\n        this.isFocused = derived(this, reader => this.isModifedFocused.read(reader) || this.isOriginalFocused.read(reader));\n        this._resourceLabel = this._workbenchUIElementFactory.createResourceLabel\n            ? this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.primaryPath))\n            : undefined;\n        this._resourceLabel2 = this._workbenchUIElementFactory.createResourceLabel\n            ? this._register(this._workbenchUIElementFactory.createResourceLabel(this._elements.secondaryPath))\n            : undefined;\n        this._dataStore = new DisposableStore();\n        this._headerHeight = 40;\n        this._lastScrollTop = -1;\n        this._isSettingScrollTop = false;\n        const btn = new Button(this._elements.collapseButton, {});\n        this._register(autorun(reader => {\n            btn.element.className = '';\n            btn.icon = this._collapsed.read(reader) ? Codicon.chevronRight : Codicon.chevronDown;\n        }));\n        this._register(btn.onDidClick(() => {\n            var _a;\n            (_a = this._viewModel.get()) === null || _a === void 0 ? void 0 : _a.collapsed.set(!this._collapsed.get(), undefined);\n        }));\n        this._register(autorun(reader => {\n            this._elements.editor.style.display = this._collapsed.read(reader) ? 'none' : 'block';\n        }));\n        this._register(this.editor.getModifiedEditor().onDidLayoutChange(e => {\n            const width = this.editor.getModifiedEditor().getLayoutInfo().contentWidth;\n            this._modifiedWidth.set(width, undefined);\n        }));\n        this._register(this.editor.getOriginalEditor().onDidLayoutChange(e => {\n            const width = this.editor.getOriginalEditor().getLayoutInfo().contentWidth;\n            this._originalWidth.set(width, undefined);\n        }));\n        this._register(this.editor.onDidContentSizeChange(e => {\n            globalTransaction(tx => {\n                this._editorContentHeight.set(e.contentHeight, tx);\n                this._modifiedContentWidth.set(this.editor.getModifiedEditor().getContentWidth(), tx);\n                this._originalContentWidth.set(this.editor.getOriginalEditor().getContentWidth(), tx);\n            });\n        }));\n        this._register(this.editor.getOriginalEditor().onDidScrollChange(e => {\n            if (this._isSettingScrollTop) {\n                return;\n            }\n            if (!e.scrollTopChanged || !this._data) {\n                return;\n            }\n            const delta = e.scrollTop - this._lastScrollTop;\n            this._data.deltaScrollVertical(delta);\n        }));\n        this._register(autorun(reader => {\n            var _a;\n            const isActive = (_a = this._viewModel.read(reader)) === null || _a === void 0 ? void 0 : _a.isActive.read(reader);\n            this._elements.root.classList.toggle('active', isActive);\n        }));\n        this._container.appendChild(this._elements.root);\n        this._outerEditorHeight = this._headerHeight;\n        this._register(this._instantiationService.createInstance(MenuWorkbenchToolBar, this._elements.actions, MenuId.MultiDiffEditorFileToolbar, {\n            actionRunner: this._register(new ActionRunnerWithContext(() => { var _a; return ((_a = this._viewModel.get()) === null || _a === void 0 ? void 0 : _a.modifiedUri); })),\n            menuOptions: {\n                shouldForwardArgs: true,\n            },\n            toolbarOptions: { primaryGroup: g => g.startsWith('navigation') },\n            actionViewItemProvider: (action, options) => createActionViewItem(_instantiationService, action, options),\n        }));\n    }\n    setScrollLeft(left) {\n        if (this._modifiedContentWidth.get() - this._modifiedWidth.get() > this._originalContentWidth.get() - this._originalWidth.get()) {\n            this.editor.getModifiedEditor().setScrollLeft(left);\n        }\n        else {\n            this.editor.getOriginalEditor().setScrollLeft(left);\n        }\n    }\n    setData(data) {\n        this._data = data;\n        function updateOptions(options) {\n            return {\n                ...options,\n                scrollBeyondLastLine: false,\n                hideUnchangedRegions: {\n                    enabled: true,\n                },\n                scrollbar: {\n                    vertical: 'hidden',\n                    horizontal: 'hidden',\n                    handleMouseWheel: false,\n                    useShadows: false,\n                },\n                renderOverviewRuler: false,\n                fixedOverflowWidgets: true,\n                overviewRulerBorder: false,\n            };\n        }\n        const value = data.viewModel.entry.value; // TODO\n        if (value.onOptionsDidChange) {\n            this._dataStore.add(value.onOptionsDidChange(() => {\n                var _a;\n                this.editor.updateOptions(updateOptions((_a = value.options) !== null && _a !== void 0 ? _a : {}));\n            }));\n        }\n        globalTransaction(tx => {\n            var _a, _b, _c, _d;\n            (_a = this._resourceLabel) === null || _a === void 0 ? void 0 : _a.setUri((_b = data.viewModel.modifiedUri) !== null && _b !== void 0 ? _b : data.viewModel.originalUri, { strikethrough: data.viewModel.modifiedUri === undefined });\n            let isRenamed = false;\n            let isDeleted = false;\n            let isAdded = false;\n            let flag = '';\n            if (data.viewModel.modifiedUri && data.viewModel.originalUri && data.viewModel.modifiedUri.path !== data.viewModel.originalUri.path) {\n                flag = 'R';\n                isRenamed = true;\n            }\n            else if (!data.viewModel.modifiedUri) {\n                flag = 'D';\n                isDeleted = true;\n            }\n            else if (!data.viewModel.originalUri) {\n                flag = 'A';\n                isAdded = true;\n            }\n            this._elements.status.classList.toggle('renamed', isRenamed);\n            this._elements.status.classList.toggle('deleted', isDeleted);\n            this._elements.status.classList.toggle('added', isAdded);\n            this._elements.status.innerText = flag;\n            (_c = this._resourceLabel2) === null || _c === void 0 ? void 0 : _c.setUri(isRenamed ? data.viewModel.originalUri : undefined, { strikethrough: true });\n            this._dataStore.clear();\n            this._viewModel.set(data.viewModel, tx);\n            this.editor.setModel(data.viewModel.diffEditorViewModel, tx);\n            this.editor.updateOptions(updateOptions((_d = value.options) !== null && _d !== void 0 ? _d : {}));\n        });\n    }\n    render(verticalRange, width, editorScroll, viewPort) {\n        this._elements.root.style.visibility = 'visible';\n        this._elements.root.style.top = `${verticalRange.start}px`;\n        this._elements.root.style.height = `${verticalRange.length}px`;\n        this._elements.root.style.width = `${width}px`;\n        this._elements.root.style.position = 'absolute';\n        // For sticky scroll\n        const maxDelta = verticalRange.length - this._headerHeight;\n        const delta = Math.max(0, Math.min(viewPort.start - verticalRange.start, maxDelta));\n        this._elements.header.style.transform = `translateY(${delta}px)`;\n        globalTransaction(tx => {\n            this.editor.layout({\n                width: width - 2 * 8 - 2 * 1,\n                height: verticalRange.length - this._outerEditorHeight,\n            });\n        });\n        try {\n            this._isSettingScrollTop = true;\n            this._lastScrollTop = editorScroll;\n            this.editor.getOriginalEditor().setScrollTop(editorScroll);\n        }\n        finally {\n            this._isSettingScrollTop = false;\n        }\n        this._elements.header.classList.toggle('shadow', delta > 0 || editorScroll > 0);\n        this._elements.header.classList.toggle('collapsed', delta === maxDelta);\n    }\n    hide() {\n        this._elements.root.style.top = `-100000px`;\n        this._elements.root.style.visibility = 'hidden'; // Some editor parts are still visible\n    }\n};\nDiffEditorItemTemplate = __decorate([\n    __param(3, IInstantiationService)\n], DiffEditorItemTemplate);\nexport { DiffEditorItemTemplate };\nfunction isFocused(editor) {\n    return observableFromEvent(h => {\n        const store = new DisposableStore();\n        store.add(editor.onDidFocusEditorWidget(() => h(true)));\n        store.add(editor.onDidBlurEditorWidget(() => h(false)));\n        return store;\n    }, () => editor.hasTextFocus());\n}\n","export class ObjectPool {\n    constructor(_create) {\n        this._create = _create;\n        this._unused = new Set();\n        this._used = new Set();\n        this._itemData = new Map();\n    }\n    getUnusedObj(data) {\n        var _a;\n        let obj;\n        if (this._unused.size === 0) {\n            obj = this._create(data);\n            this._itemData.set(obj, data);\n        }\n        else {\n            const values = [...this._unused.values()];\n            obj = (_a = values.find(obj => this._itemData.get(obj).getId() === data.getId())) !== null && _a !== void 0 ? _a : values[0];\n            this._unused.delete(obj);\n            this._itemData.set(obj, data);\n            obj.setData(data);\n        }\n        this._used.add(obj);\n        return {\n            object: obj,\n            dispose: () => {\n                this._used.delete(obj);\n                if (this._unused.size > 5) {\n                    obj.dispose();\n                }\n                else {\n                    this._unused.add(obj);\n                }\n            }\n        };\n    }\n    dispose() {\n        for (const obj of this._used) {\n            obj.dispose();\n        }\n        for (const obj of this._unused) {\n            obj.dispose();\n        }\n        this._used.clear();\n        this._unused.clear();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { getWindow, h, scheduleAtNextAnimationFrame } from '../../../../base/browser/dom.js';\nimport { SmoothScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { compareBy, numberComparator } from '../../../../base/common/arrays.js';\nimport { findFirstMax } from '../../../../base/common/arraysFind.js';\nimport { BugIndicatingError } from '../../../../base/common/errors.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport { disposableObservableValue, globalTransaction, transaction } from '../../../../base/common/observableInternal/base.js';\nimport { Scrollable } from '../../../../base/common/scrollable.js';\nimport './style.css';\nimport { ObservableElementSizeObserver } from '../diffEditor/utils.js';\nimport { OffsetRange } from '../../../common/core/offsetRange.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { DiffEditorItemTemplate, TemplateData } from './diffEditorItemTemplate.js';\nimport { ObjectPool } from './objectPool.js';\nlet MultiDiffEditorWidgetImpl = class MultiDiffEditorWidgetImpl extends Disposable {\n    constructor(_element, _dimension, _viewModel, _workbenchUIElementFactory, _parentContextKeyService, _parentInstantiationService) {\n        super();\n        this._element = _element;\n        this._dimension = _dimension;\n        this._viewModel = _viewModel;\n        this._workbenchUIElementFactory = _workbenchUIElementFactory;\n        this._parentContextKeyService = _parentContextKeyService;\n        this._parentInstantiationService = _parentInstantiationService;\n        this._elements = h('div.monaco-component.multiDiffEditor', [\n            h('div@content', {\n                style: {\n                    overflow: 'hidden',\n                }\n            }),\n            h('div.monaco-editor@overflowWidgetsDomNode', {}),\n        ]);\n        this._sizeObserver = this._register(new ObservableElementSizeObserver(this._element, undefined));\n        this._objectPool = this._register(new ObjectPool((data) => {\n            const template = this._instantiationService.createInstance(DiffEditorItemTemplate, this._elements.content, this._elements.overflowWidgetsDomNode, this._workbenchUIElementFactory);\n            template.setData(data);\n            return template;\n        }));\n        this._scrollable = this._register(new Scrollable({\n            forceIntegerValues: false,\n            scheduleAtNextAnimationFrame: (cb) => scheduleAtNextAnimationFrame(getWindow(this._element), cb),\n            smoothScrollDuration: 100,\n        }));\n        this._scrollableElement = this._register(new SmoothScrollableElement(this._elements.root, {\n            vertical: 1 /* ScrollbarVisibility.Auto */,\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            useShadows: false,\n        }, this._scrollable));\n        this.scrollTop = observableFromEvent(this._scrollableElement.onScroll, () => /** @description scrollTop */ this._scrollableElement.getScrollPosition().scrollTop);\n        this.scrollLeft = observableFromEvent(this._scrollableElement.onScroll, () => /** @description scrollLeft */ this._scrollableElement.getScrollPosition().scrollLeft);\n        this._viewItemsInfo = derivedWithStore(this, (reader, store) => {\n            const vm = this._viewModel.read(reader);\n            if (!vm) {\n                return { items: [], getItem: _d => { throw new BugIndicatingError(); } };\n            }\n            const viewModels = vm.items.read(reader);\n            const map = new Map();\n            const items = viewModels.map(d => {\n                var _a;\n                const item = store.add(new VirtualizedViewItem(d, this._objectPool, this.scrollLeft, delta => {\n                    this._scrollableElement.setScrollPosition({ scrollTop: this._scrollableElement.getScrollPosition().scrollTop + delta });\n                }));\n                const data = (_a = this._lastDocStates) === null || _a === void 0 ? void 0 : _a[item.getKey()];\n                if (data) {\n                    transaction(tx => {\n                        item.setViewState(data, tx);\n                    });\n                }\n                map.set(d, item);\n                return item;\n            });\n            return { items, getItem: d => map.get(d) };\n        });\n        this._viewItems = this._viewItemsInfo.map(this, items => items.items);\n        this._spaceBetweenPx = 0;\n        this._totalHeight = this._viewItems.map(this, (items, reader) => items.reduce((r, i) => r + i.contentHeight.read(reader) + this._spaceBetweenPx, 0));\n        this._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._element));\n        this._instantiationService = this._parentInstantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        /** This accounts for documents that are not loaded yet. */\n        this._lastDocStates = {};\n        this._contextKeyService.createKey(EditorContextKeys.inMultiDiffEditor.key, true);\n        this._register(autorunWithStore((reader, store) => {\n            const viewModel = this._viewModel.read(reader);\n            if (viewModel && viewModel.contextKeys) {\n                for (const [key, value] of Object.entries(viewModel.contextKeys)) {\n                    const contextKey = this._contextKeyService.createKey(key, undefined);\n                    contextKey.set(value);\n                    store.add(toDisposable(() => contextKey.reset()));\n                }\n            }\n        }));\n        const ctxAllCollapsed = this._parentContextKeyService.createKey(EditorContextKeys.multiDiffEditorAllCollapsed.key, false);\n        this._register(autorun((reader) => {\n            const viewModel = this._viewModel.read(reader);\n            if (viewModel) {\n                const allCollapsed = viewModel.items.read(reader).every(item => item.collapsed.read(reader));\n                ctxAllCollapsed.set(allCollapsed);\n            }\n        }));\n        this._register(autorun((reader) => {\n            /** @description Update widget dimension */\n            const dimension = this._dimension.read(reader);\n            this._sizeObserver.observe(dimension);\n        }));\n        this._elements.content.style.position = 'relative';\n        this._register(autorun((reader) => {\n            /** @description Update scroll dimensions */\n            const height = this._sizeObserver.height.read(reader);\n            this._elements.root.style.height = `${height}px`;\n            const totalHeight = this._totalHeight.read(reader);\n            this._elements.content.style.height = `${totalHeight}px`;\n            const width = this._sizeObserver.width.read(reader);\n            let scrollWidth = width;\n            const viewItems = this._viewItems.read(reader);\n            const max = findFirstMax(viewItems, compareBy(i => i.maxScroll.read(reader).maxScroll, numberComparator));\n            if (max) {\n                const maxScroll = max.maxScroll.read(reader);\n                scrollWidth = width + maxScroll.maxScroll;\n            }\n            this._scrollableElement.setScrollDimensions({\n                width: width,\n                height: height,\n                scrollHeight: totalHeight,\n                scrollWidth,\n            });\n        }));\n        _element.replaceChildren(this._scrollableElement.getDomNode());\n        this._register(toDisposable(() => {\n            _element.replaceChildren();\n        }));\n        this._register(this._register(autorun(reader => {\n            /** @description Render all */\n            globalTransaction(tx => {\n                this.render(reader);\n            });\n        })));\n    }\n    render(reader) {\n        const scrollTop = this.scrollTop.read(reader);\n        let contentScrollOffsetToScrollOffset = 0;\n        let itemHeightSumBefore = 0;\n        let itemContentHeightSumBefore = 0;\n        const viewPortHeight = this._sizeObserver.height.read(reader);\n        const contentViewPort = OffsetRange.ofStartAndLength(scrollTop, viewPortHeight);\n        const width = this._sizeObserver.width.read(reader);\n        for (const v of this._viewItems.read(reader)) {\n            const itemContentHeight = v.contentHeight.read(reader);\n            const itemHeight = Math.min(itemContentHeight, viewPortHeight);\n            const itemRange = OffsetRange.ofStartAndLength(itemHeightSumBefore, itemHeight);\n            const itemContentRange = OffsetRange.ofStartAndLength(itemContentHeightSumBefore, itemContentHeight);\n            if (itemContentRange.isBefore(contentViewPort)) {\n                contentScrollOffsetToScrollOffset -= itemContentHeight - itemHeight;\n                v.hide();\n            }\n            else if (itemContentRange.isAfter(contentViewPort)) {\n                v.hide();\n            }\n            else {\n                const scroll = Math.max(0, Math.min(contentViewPort.start - itemContentRange.start, itemContentHeight - itemHeight));\n                contentScrollOffsetToScrollOffset -= scroll;\n                const viewPort = OffsetRange.ofStartAndLength(scrollTop + contentScrollOffsetToScrollOffset, viewPortHeight);\n                v.render(itemRange, scroll, width, viewPort);\n            }\n            itemHeightSumBefore += itemHeight + this._spaceBetweenPx;\n            itemContentHeightSumBefore += itemContentHeight + this._spaceBetweenPx;\n        }\n        this._elements.content.style.transform = `translateY(${-(scrollTop + contentScrollOffsetToScrollOffset)}px)`;\n    }\n};\nMultiDiffEditorWidgetImpl = __decorate([\n    __param(4, IContextKeyService),\n    __param(5, IInstantiationService)\n], MultiDiffEditorWidgetImpl);\nexport { MultiDiffEditorWidgetImpl };\nclass VirtualizedViewItem extends Disposable {\n    constructor(viewModel, _objectPool, _scrollLeft, _deltaScrollVertical) {\n        super();\n        this.viewModel = viewModel;\n        this._objectPool = _objectPool;\n        this._scrollLeft = _scrollLeft;\n        this._deltaScrollVertical = _deltaScrollVertical;\n        this._templateRef = this._register(disposableObservableValue(this, undefined));\n        this.contentHeight = derived(this, reader => { var _a, _b, _c; return (_c = (_b = (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.contentHeight) === null || _b === void 0 ? void 0 : _b.read(reader)) !== null && _c !== void 0 ? _c : this.viewModel.lastTemplateData.read(reader).contentHeight; });\n        this.maxScroll = derived(this, reader => { var _a, _b; return (_b = (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.maxScroll.read(reader)) !== null && _b !== void 0 ? _b : { maxScroll: 0, scrollWidth: 0 }; });\n        this.template = derived(this, reader => { var _a; return (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object; });\n        this._isHidden = observableValue(this, false);\n        this._isFocused = derived(this, reader => { var _a, _b; return (_b = (_a = this.template.read(reader)) === null || _a === void 0 ? void 0 : _a.isFocused.read(reader)) !== null && _b !== void 0 ? _b : false; });\n        this.viewModel.setIsFocused(this._isFocused, undefined);\n        this._register(autorun((reader) => {\n            var _a;\n            const scrollLeft = this._scrollLeft.read(reader);\n            (_a = this._templateRef.read(reader)) === null || _a === void 0 ? void 0 : _a.object.setScrollLeft(scrollLeft);\n        }));\n        this._register(autorun(reader => {\n            const ref = this._templateRef.read(reader);\n            if (!ref) {\n                return;\n            }\n            const isHidden = this._isHidden.read(reader);\n            if (!isHidden) {\n                return;\n            }\n            const isFocused = ref.object.isFocused.read(reader);\n            if (isFocused) {\n                return;\n            }\n            this._clear();\n        }));\n    }\n    dispose() {\n        this._clear();\n        super.dispose();\n    }\n    toString() {\n        var _a;\n        return `VirtualViewItem(${(_a = this.viewModel.entry.value.modified) === null || _a === void 0 ? void 0 : _a.uri.toString()})`;\n    }\n    getKey() {\n        return this.viewModel.getKey();\n    }\n    setViewState(viewState, tx) {\n        var _a;\n        this.viewModel.collapsed.set(viewState.collapsed, tx);\n        this._updateTemplateData(tx);\n        const data = this.viewModel.lastTemplateData.get();\n        const selections = (_a = viewState.selections) === null || _a === void 0 ? void 0 : _a.map(Selection.liftSelection);\n        this.viewModel.lastTemplateData.set({\n            ...data,\n            selections,\n        }, tx);\n        const ref = this._templateRef.get();\n        if (ref) {\n            if (selections) {\n                ref.object.editor.setSelections(selections);\n            }\n        }\n    }\n    _updateTemplateData(tx) {\n        var _a;\n        const ref = this._templateRef.get();\n        if (!ref) {\n            return;\n        }\n        this.viewModel.lastTemplateData.set({\n            contentHeight: ref.object.contentHeight.get(),\n            selections: (_a = ref.object.editor.getSelections()) !== null && _a !== void 0 ? _a : undefined,\n        }, tx);\n    }\n    _clear() {\n        const ref = this._templateRef.get();\n        if (!ref) {\n            return;\n        }\n        transaction(tx => {\n            this._updateTemplateData(tx);\n            ref.object.hide();\n            this._templateRef.set(undefined, tx);\n        });\n    }\n    hide() {\n        this._isHidden.set(true, undefined);\n    }\n    render(verticalSpace, offset, width, viewPort) {\n        this._isHidden.set(false, undefined);\n        let ref = this._templateRef.get();\n        if (!ref) {\n            ref = this._objectPool.getUnusedObj(new TemplateData(this.viewModel, this._deltaScrollVertical));\n            this._templateRef.set(ref, undefined);\n            const selections = this.viewModel.lastTemplateData.get().selections;\n            if (selections) {\n                ref.object.editor.setSelections(selections);\n            }\n        }\n        ref.object.render(verticalSpace, width, offset, viewPort);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { localize } from '../../../../nls.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nexport const multiDiffEditorHeaderBackground = registerColor('multiDiffEditor.headerBackground', { dark: '#262626', light: 'tab.inactiveBackground', hcDark: 'tab.inactiveBackground', hcLight: 'tab.inactiveBackground', }, localize('multiDiffEditor.headerBackground', 'The background color of the diff editor\\'s header'));\nexport const multiDiffEditorBackground = registerColor('multiDiffEditor.background', { dark: 'editorBackground', light: 'editorBackground', hcDark: 'editorBackground', hcLight: 'editorBackground', }, localize('multiDiffEditor.background', 'The background color of the multi file diff editor'));\nexport const multiDiffEditorBorder = registerColor('multiDiffEditor.border', { dark: 'sideBarSectionHeader.border', light: '#cccccc', hcDark: 'sideBarSectionHeader.border', hcLight: '#cccccc', }, localize('multiDiffEditor.border', 'The border color of the multi file diff editor'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { derivedWithStore, observableValue, recomputeInitiallyAndOnChange } from '../../../../base/common/observable.js';\nimport { readHotReloadableExport } from '../diffEditor/utils.js';\nimport { MultiDiffEditorWidgetImpl } from './multiDiffEditorWidgetImpl.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport './colors.js';\nimport { DiffEditorItemTemplate } from './diffEditorItemTemplate.js';\nlet MultiDiffEditorWidget = class MultiDiffEditorWidget extends Disposable {\n    constructor(_element, _workbenchUIElementFactory, _instantiationService) {\n        super();\n        this._element = _element;\n        this._workbenchUIElementFactory = _workbenchUIElementFactory;\n        this._instantiationService = _instantiationService;\n        this._dimension = observableValue(this, undefined);\n        this._viewModel = observableValue(this, undefined);\n        this._widgetImpl = derivedWithStore(this, (reader, store) => {\n            readHotReloadableExport(DiffEditorItemTemplate, reader);\n            return store.add(this._instantiationService.createInstance((readHotReloadableExport(MultiDiffEditorWidgetImpl, reader)), this._element, this._dimension, this._viewModel, this._workbenchUIElementFactory));\n        });\n        this._register(recomputeInitiallyAndOnChange(this._widgetImpl));\n    }\n};\nMultiDiffEditorWidget = __decorate([\n    __param(2, IInstantiationService)\n], MultiDiffEditorWidget);\nexport { MultiDiffEditorWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ActionRunner } from '../../../../base/common/actions.js';\nexport class ActionRunnerWithContext extends ActionRunner {\n    constructor(_getContext) {\n        super();\n        this._getContext = _getContext;\n    }\n    runAction(action, _context) {\n        const ctx = this._getContext();\n        return super.runAction(action, ctx);\n    }\n}\n"],"names":["RestrictedRenderingContext","constructor","viewLayout","viewportData","this","_restrictedRenderingContextBrand","undefined","_viewLayout","scrollWidth","getScrollWidth","scrollHeight","getScrollHeight","visibleRange","bigNumbersDelta","vInfo","getCurrentViewport","scrollTop","top","scrollLeft","left","viewportWidth","width","viewportHeight","height","getScrolledTopFromAbsoluteTop","absoluteTop","getVerticalOffsetForLineNumber","lineNumber","includeViewZones","getVerticalOffsetAfterLineNumber","getDecorationsInViewport","RenderingContext","viewLines","super","_renderingContextBrand","_viewLines","linesVisibleRangesForRange","range","includeNewLines","visibleRangeForPosition","position","LineVisibleRanges","outsideRenderedLine","ranges","continuesOnNextLine","HorizontalRange","from","result","Array","length","i","len","_horizontalRangeBrand","Math","round","toString","concat","FloatHorizontalRange","_floatHorizontalRangeBrand","compare","a","b","HorizontalPosition","originalLeft","VisibleRanges","ViewController","configuration","viewModel","userInputEvents","commandDelegate","paste","text","pasteOnNewLine","multicursorText","mode","type","compositionType","replacePrevCharCnt","replaceNextCharCnt","positionDelta","compositionStart","startComposition","compositionEnd","endComposition","cut","setSelection","modelSelection","CoreNavigationCommands","SetSelection","runCoreEditorCommand","source","selection","_validateViewColumn","viewPosition","minColumn","getLineMinColumn","column","Position","_hasMulticursorModifier","data","options","get","altKey","ctrlKey","metaKey","_hasNonMulticursorModifier","dispatchMouse","selectionClipboardIsOn","platform","columnSelection","middleButton","_columnSelect","mouseColumn","inSelectionMode","startedOnLineNumbers","_lastCursorLineSelect","revealType","_createCursor","_lineSelectDrag","_lineSelect","mouseDownCount","_selectAll","_lastCursorLineSelectDrag","onInjectedText","_lastCursorWordSelect","_wordSelectDrag","_wordSelect","shiftKey","_lastCursorMoveToSelect","_moveToSelect","moveTo","_usualArgs","_convertViewToModelPosition","MoveTo","MoveToSelect","doColumnSelect","ColumnSelect","wholeLine","CreateCursor","LastCursorMoveToSelect","WordSelect","WordSelectDrag","LastCursorWordSelect","LineSelect","LineSelectDrag","LastCursorLineSelect","LastCursorLineSelectDrag","SelectAll","coordinatesConverter","convertViewPositionToModelPosition","emitKeyDown","e","emitKeyUp","emitContextMenu","emitMouseMove","emitMouseLeave","emitMouseUp","emitMouseDown","emitMouseDrag","emitMouseDrop","emitMouseDropCanceled","emitMouseWheel","RenderedLinesCollection","createLine","_createLine","_set","flush","rendLineNumberStart","lines","_lines","_rendLineNumberStart","_get","getStartLineNumber","getEndLineNumber","getCount","getLine","lineIndex","BugIndicatingError","onLinesDeleted","deleteFromLineNumber","deleteToLineNumber","startLineNumber","endLineNumber","deleteCnt","deleteStartIndex","deleteCount","deleteAboveCount","splice","onLinesChanged","changeFromLineNumber","changeCount","changeToLineNumber","someoneNotified","changedLineNumber","onContentChanged","onLinesInserted","insertFromLineNumber","insertToLineNumber","insertCnt","newLines","insertIndex","beforeLines","slice","afterLines","deletedLines","onTokensChanged","notifiedSomeone","rng","toLineNumber","fromLineNumber","max","to","min","VisibleLinesCollection","host","_host","domNode","_createDomNode","_linesCollection","createVisibleLine","createFastDomNode","document","createElement","setClassName","setPosition","setAttribute","onConfigurationChanged","hasChanged","onFlushed","count","deleted","lineDomNode","getDomNode","removeChild","onScrollChanged","scrollTopChanged","onZonesChanged","getVisibleLine","renderLines","inp","renderer","ViewLayerRenderer","ctx","linesLength","resCtx","render","relativeVerticalOffset","inContext","stopLineNumber","deltaTop","x","_finishRendering","_renderUntouchedLines","_insertLinesBefore","removeCnt","_removeLinesBefore","_insertLinesAfter","_removeLinesAfter","startIndex","endIndex","deltaLN","layoutLine","lineHeight","newLinesLen","removeCount","removeIndex","_finishRenderingNewLines","domNodeIsEmpty","newLinesHTML","wasNew","_ttPolicy","createHTML","lastChild","innerHTML","insertAdjacentHTML","currChild","line","setDomNode","previousSibling","_finishRenderingInvalidLines","invalidLinesHTML","wasInvalid","hugeDomNode","firstChild","parentNode","replaceChild","sb","_sb","reset","hadNewLine","renderLine","build","hadInvalidLine","createTrustedTypesPolicy","value","StringBuilder","ViewOverlays","ViewPart","context","_visibleLines","fontInfo","_context","applyFontInfo","_dynamicOverlays","_isFocused","shouldRender","dispose","ViewOverlayLine","addDynamicOverlay","overlay","push","onFocusChanged","isFocused","prepareRender","toRender","filter","dynamicOverlay","onDidRender","_viewOverlaysRender","toggleClassName","dynamicOverlays","_domNode","_renderedContent","appendString","String","setTop","setHeight","ContentViewOverlays","layoutInfo","_contentWidth","contentWidth","scrollWidthChanged","setWidth","MarginViewOverlays","_contentLeft","contentLeft","scrollHeightChanged","ViewEventHandler","addEventHandler","removeEventHandler","PartFingerprints","write","target","partId","read","r","getAttribute","parseInt","collect","child","stopAt","resultLen","ownerDocument","body","nodeType","ELEMENT_NODE","parentElement","Uint8Array","ViewUserInputEvents","onKeyDown","onKeyUp","onContextMenu","onMouseMove","onMouseLeave","onMouseDown","onMouseUp","onMouseDrag","onMouseDrop","onMouseDropCanceled","onMouseWheel","_coordinatesConverter","_a","call","_convertViewToModelMouseEvent","event","_convertViewToModelMouseTarget","convertViewToModelMouseTarget","convertViewRangeToModelRange","detail","convertViewToModelViewZoneData","viewZoneId","positionBefore","positionAfter","afterLineNumber","CodeEditorContributions","Disposable","_editor","_instantiationService","_instances","_register","DisposableMap","_pending","Map","_finishedInstantiation","initialize","editor","contributions","instantiationService","desc","has","id","onUnexpectedError","Error","set","_instantiateSome","runWhenWindowIdle","getWindow","saveViewState","contributionsState","contribution","restoreViewState","_instantiateById","onBeforeInteractionEvent","onAfterModelAttached","instantiation","contribs","_findPendingContributionsByInstantiation","contrib","delete","instance","createInstance","ctor","console","warn","err","CodeEditorWidget_1","__decorate","decorators","key","d","c","arguments","Object","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","CodeEditorWidget","isSimpleWidget","_configuration","contextMenuId","domElement","_options","codeEditorWidgetOptions","codeEditorService","commandService","contextKeyService","themeService","notificationService","accessibilityService","languageConfigurationService","languageFeaturesService","_b","_deliveryQueue","createEventDeliveryQueue","_contributions","_onDidDispose","Emitter","onDidDispose","_onDidChangeModelContent","deliveryQueue","onDidChangeModelContent","_onDidChangeModelLanguage","onDidChangeModelLanguage","_onDidChangeModelLanguageConfiguration","onDidChangeModelLanguageConfiguration","_onDidChangeModelOptions","onDidChangeModelOptions","_onDidChangeModelDecorations","onDidChangeModelDecorations","_onDidChangeModelTokens","onDidChangeModelTokens","_onDidChangeConfiguration","onDidChangeConfiguration","_onWillChangeModel","onWillChangeModel","_onDidChangeModel","onDidChangeModel","_onDidChangeCursorPosition","onDidChangeCursorPosition","_onDidChangeCursorSelection","onDidChangeCursorSelection","_onDidAttemptReadOnlyEdit","InteractionEmitter","onDidAttemptReadOnlyEdit","_onDidLayoutChange","onDidLayoutChange","_editorTextFocus","BooleanEventEmitter","onDidFocusEditorText","onDidChangeToTrue","onDidBlurEditorText","onDidChangeToFalse","_editorWidgetFocus","onDidFocusEditorWidget","onDidBlurEditorWidget","_onWillType","onWillType","_onDidType","onDidType","_onDidCompositionStart","onDidCompositionStart","_onDidCompositionEnd","onDidCompositionEnd","_onDidPaste","onDidPaste","_onMouseUp","_onMouseDown","_onMouseDrag","_onMouseDrop","_onMouseDropCanceled","_onDropIntoEditor","onDropIntoEditor","_onContextMenu","_onMouseMove","_onMouseLeave","_onMouseWheel","_onKeyUp","_onKeyDown","_onDidContentSizeChange","onDidContentSizeChange","_onDidScrollChange","onDidScrollChange","_onDidChangeViewZones","onDidChangeViewZones","_onDidChangeHiddenAreas","onDidChangeHiddenAreas","_actions","_bannerDomNode","_dropIntoEditorDecorations","createDecorationsCollection","willCreateCodeEditor","_domElement","_overflowWidgetsDomNode","overflowWidgetsDomNode","_id","EDITOR_ID","_decorationTypeKeysToIds","_decorationTypeSubtypes","_telemetryData","telemetryData","_createConfiguration","MenuId","SimpleEditorContext","EditorContext","onDidChange","fire","_contextKeyService","createScoped","_notificationService","_codeEditorService","_commandService","_themeService","EditorContextKeysManager","EditorModeContext","createChild","ServiceCollection","IContextKeyService","_modelData","_focusTracker","CodeEditorWidgetFocusTracker","onChange","setValue","hasFocus","_contentWidgets","_overlayWidgets","_glyphMarginWidgets","isArray","EditorExtensionsRegistry","getEditorContributions","action","getEditorActions","internalAction","InternalEditorAction","label","alias","metadata","precondition","args","invokeFunction","accessor","Promise","resolve","runEditorCommand","isDropIntoEnabled","enabled","dom","onDragOver","getTargetAtClientPoint","clientX","clientY","showDropIndicatorAt","onDrop","async","removeDropIndicator","dataTransfer","onDragLeave","onDragEnd","addCodeEditor","writeScreenReaderContent","reason","view","EditorConfiguration","getId","getEditorType","editorCommon","ICodeEditor","removeCodeEditor","clear","_removeDecorationTypes","_postDetachModelCleanup","_detachModel","invokeWithinContext","fn","updateOptions","newOptions","getOptions","getOption","getRawOptions","getOverflowWidgetsDomNode","getConfiguredWordAtPosition","WordOperations","getWordAtPosition","model","getValue","preserveBOM","eolPreference","lineEnding","newValue","getModel","setModel","oldModelUrl","uri","newModelUrl","hasTextFocus","detachedModel","_attachModel","hasModel","focus","_contributionsDisposable","decorationType","subTypes","subType","_removeDecorationType","getVisibleRanges","getVisibleRangesPlusViewportAboveBelow","getWhitespaces","_getVerticalOffsetAfterPosition","modelData","modelLineNumber","modelColumn","modelPosition","validatePosition","convertModelPositionToViewPosition","getTopForLineNumber","_getVerticalOffsetForPosition","getTopForPosition","getBottomForLineNumber","setHiddenAreas","map","Range","lift","getVisibleColumnFromPosition","rawPosition","tabSize","CursorColumns","visibleColumnFromColumn","getLineContent","getPosition","isIPosition","setSelections","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","_sendRevealRange","modelRange","verticalType","revealHorizontal","scrollType","isIRange","validatedModelRange","validateRange","viewRange","convertModelRangeToViewRange","revealRange","revealLine","_revealLine","revealLineInCenter","revealLineInCenterIfOutsideViewport","revealLineNearTop","revealPosition","_revealPosition","revealPositionInCenter","revealPositionInCenterIfOutsideViewport","revealPositionNearTop","getSelection","getSelections","something","isSelection","Selection","isISelection","isRange","_setSelectionImpl","startColumn","endColumn","sel","revealLines","_revealLines","revealLinesInCenter","revealLinesInCenterIfOutsideViewport","revealLinesNearTop","revealVerticalInCenter","_revealRange","revealRangeInCenter","revealRangeInCenterIfOutsideViewport","revealRangeNearTop","revealRangeNearTopIfOutsideViewport","revealRangeAtTop","getContentWidth","getScrollLeft","getCurrentScrollLeft","getContentHeight","getScrollTop","getCurrentScrollTop","setScrollLeft","newScrollLeft","setScrollPosition","setScrollTop","newScrollTop","hasPendingScrollAnimation","cursorState","saveCursorState","viewState","saveState","s","hasRealView","codeEditorState","restoreCursorState","reducedState","reduceRestoreState","restoreState","handleInitialized","_getViewModel","visibleLinesStabilized","getContribution","getActions","values","getSupportedActions","isSupported","getAction","trigger","handlerId","payload","_startComposition","_endComposition","_type","_compositionType","replaceCharCnt","_paste","clipboardEvent","_cut","run","then","_triggerEditorCommand","_triggerCommand","executeCommand","startPosition","getStartPosition","endPosition","languageId","command","getEditorCommand","pushUndoStop","pushStackElement","popUndoStop","popStackElement","executeEdits","edits","endCursorState","cursorStateComputer","executeCommands","commands","decorations","EditorDecorationsCollection","changeDecorations","callback","getLineDecorations","filterValidationDecorations","getDecorationsInRange","deltaDecorations","oldDecorations","newDecorations","removeDecorations","decorationIds","changeAccessor","removeDecorationsByType","decorationTypeKey","oldDecorationsIds","hasOwnProperty","getLayoutInfo","createOverviewRuler","cssClassName","getContainerDomNode","delegateVerticalScrollbarPointerDown","browserEvent","delegateScrollFromMouseWheelEvent","layout","dimension","postponeRendering","observeContainer","hasWidgetFocus","addContentWidget","widget","widgetData","layoutContentWidget","widgetId","removeContentWidget","addOverlayWidget","layoutOverlayWidget","removeOverlayWidget","addGlyphMarginWidget","layoutGlyphMarginWidget","removeGlyphMarginWidget","changeViewZones","change","getScrolledVisiblePosition","getOffsetForColumn","glyphMarginWidth","lineNumbersWidth","decorationsWidth","forceRedraw","batchEvents","setAriaOptions","setBanner","domNodeHeight","contains","setReservedHeight","prepend","listenersToRemove","getLanguageId","setIsDominatedByLongLines","isDominatedByLongLines","setModelLineCount","getLineCount","attachedView","onBeforeAttached","ViewModel","DOMLineBreaksComputerFactory","create","MonospaceLineBreaksComputerFactory","onWillDispose","onEvent","kind","reachedMaxCursorCount","multiCursorLimit","message","nls","prompt","Severity","Warning","query","positions","selections","e1","secondaryPositions","e2","secondarySelections","modelVersionId","oldSelections","oldModelVersionId","_createView","appendChild","keys","ModelData","viewUserInputEvents","View","getColorTheme","removeAllDecorationsWithOwnerId","removeDomNode","removeAttribute","removeDecorationType","dropIntoEditorDecorationOptions","setContextValue","createKey","ModelDecorationOptions","register","description","className","IInstantiationService","ICodeEditorService","ICommandService","IThemeService","INotificationService","IAccessibilityService","ILanguageConfigurationService","ILanguageFeaturesService","onBeforeDetached","_emitterOptions","_onDidChangeToTrue","_onDidChangeToFalse","_value","_editorSimpleInput","EditorContextKeys","editorSimpleInput","bindTo","_editorFocus","_textInputFocus","textInputFocus","editorTextFocus","_tabMovesFocus","tabMovesFocus","_editorReadonly","readOnly","_inDiffEditor","inDiffEditor","_editorColumnSelection","_hasMultipleSelections","hasMultipleSelections","_hasNonEmptySelection","hasNonEmptySelection","_canUndo","canUndo","_canRedo","canRedo","_updateFromConfig","_updateFromSelection","_updateFromFocus","_updateFromModel","TabFocus","onDidChangeTabFocus","tabFocusMode","getTabFocusMode","some","isEmpty","Boolean","_languageFeaturesService","_langId","_hasCompletionItemProvider","hasCompletionItemProvider","_hasCodeActionsProvider","hasCodeActionsProvider","_hasCodeLensProvider","hasCodeLensProvider","_hasDefinitionProvider","hasDefinitionProvider","_hasDeclarationProvider","hasDeclarationProvider","_hasImplementationProvider","hasImplementationProvider","_hasTypeDefinitionProvider","hasTypeDefinitionProvider","_hasHoverProvider","hasHoverProvider","_hasDocumentHighlightProvider","hasDocumentHighlightProvider","_hasDocumentSymbolProvider","hasDocumentSymbolProvider","_hasReferenceProvider","hasReferenceProvider","_hasRenameProvider","hasRenameProvider","_hasSignatureHelpProvider","hasSignatureHelpProvider","_hasInlayHintsProvider","hasInlayHintsProvider","_hasDocumentFormattingProvider","hasDocumentFormattingProvider","_hasDocumentSelectionFormattingProvider","hasDocumentSelectionFormattingProvider","_hasMultipleDocumentFormattingProvider","hasMultipleDocumentFormattingProvider","_hasMultipleDocumentSelectionFormattingProvider","hasMultipleDocumentSelectionFormattingProvider","_isInEmbeddedEditor","isInEmbeddedEditor","update","_update","completionProvider","codeActionProvider","codeLensProvider","definitionProvider","declarationProvider","implementationProvider","typeDefinitionProvider","hoverProvider","documentHighlightProvider","documentSymbolProvider","referenceProvider","renameProvider","documentFormattingEditProvider","documentRangeFormattingEditProvider","signatureHelpProvider","inlayHintsProvider","bufferChangeEvents","all","scheme","Schemas","walkThroughSnippet","vscodeChatCodeBlock","_onChange","_hadFocus","_hasDomElementFocus","_domFocusTracker","_overflowWidgetsDomNodeHasFocus","onDidFocus","onDidBlur","focused","_decorationIds","_isChangingDecorations","listener","thisArgs","disposables","getRange","index","getDecorationRange","getRanges","decorationId","decoration","includes","append","newDecorationIds","squigglyStart","encodeURIComponent","squigglyEnd","getSquigglySVGData","color","dotdotdotStart","dotdotdotEnd","registerThemingParticipant","theme","collector","errorForeground","getColor","editorErrorForeground","addRule","warningForeground","editorWarningForeground","infoForeground","editorInfoForeground","hintForeground","editorHintForeground","unnecessaryForeground","editorUnnecessaryCodeOpacity","rgba","EmbeddedCodeEditorWidget","parentEditor","_parentEditor","_overwriteOptions","_onParentConfigurationChanged","getParentEditor","objects","ToggleCollapseUnchangedRegions","Action2","title","localize2","icon","Codicon","toggled","ContextKeyExpr","menu","when","EditorTitle","order","group","configurationService","IConfigurationService","updateValue","ToggleShowMovedCodeBlocks","ToggleUseInlineViewWhenSpaceIsLimited","diffEditorCategory","SwitchSide","EditorAction2","arrowSwap","f1","category","arg","diffEditor","findFocusedDiffEditor","DiffEditorWidget","dryRun","destinationSelection","mapToOtherSide","switchSide","ExitCompareMove","close","comparingMovedCode","keybinding","weight","primary","exitCompareMove","CollapseAllUnchangedRegions","fold","collapseAllUnchangedRegions","ShowAllUnchangedRegions","unfold","showAllUnchangedRegions","RevertHunkOrSelection","originalUri","modifiedUri","listDiffEditors","find","modified","getModifiedEditor","original","getOriginalEditor","findDiffEditor","revertRangeMappings","mapping","innerChanges","accessibleDiffViewerCategory","AccessibleDiffViewerNext","accessibleDiffViewerNext","AccessibleDiffViewerPrev","accessibleDiffViewerPrev","diffEditors","activeElement","getActiveElement","isElementOrParentOf","elementOrParent","element","registerAction2","MenuRegistry","appendMenuItem","localize","and","diffEditorRenderSideBySideInlineBreakpointReached","move","ContextKeyEqualsExpr","arrowRight","diffEditorInlineMode","toNegated","discard","DiffEditorHunkToolbar","diffEditorModifiedWritable","DiffEditorSelectionToolbar","accessibleDiffViewerVisible","negate","CommandsRegistry","registerCommandAlias","accessibleDiffViewerInsertIcon","registerIcon","add","accessibleDiffViewerRemoveIcon","remove","accessibleDiffViewerCloseIcon","AccessibleDiffViewer","_parentNode","_visible","_setVisible","_canClose","_width","_height","_diffs","_models","_state","derivedWithStore","reader","store","visible","style","visibility","recomputeInitiallyAndOnChange","_store","next","transaction","tx","isVisible","nextGroup","prev","previousGroup","canClose","_accessibilitySignalService","_groups","observableValue","_currentGroupIdx","_currentElementIdx","groups","currentGroup","idx","currentGroupIndex","currentElement","autorun","diffs","originalLineCount","modifiedLineCount","g","groupAdjacentBy","endLineNumberExclusive","viewElementGroupLineMargin","viewElements","HeaderViewElement","origFullRange","LineRange","modifiedFullRange","forEachAdjacent","origRange","modifiedRange","forEach","origLineNumber","UnchangedLineViewElement","DeletedLineViewElement","modifiedLineNumber","AddedLineViewElement","join","originalRange","ViewElementGroup","LineRangeMapping","computeViewElementGroups","getOriginalModel","getModifiedModel","p","getModifiedPosition","findIndex","currentViewItem","LineType","Deleted","playSignal","AccessibilitySignal","diffLineDeleted","Added","diffLineInserted","Header","diff","modifiedSetSelection","fromPositions","_goToGroupDelta","delta","subtransaction","OffsetRange","ofLength","clipCyclic","_goToLineDelta","clip","goToNextLine","goToPreviousLine","goToLine","indexOf","revealCurrentElementInEditor","curElem","originalReveal","originalLineNumber","modifiedReveal","modifiedFocus","IAccessibilitySignalService","Unchanged","_element","_model","_languageService","actionBarContainer","_actionBar","ActionBar","Action","ThemeIcon","asClassName","_content","_scrollbar","DomScrollableElement","scanDomNode","toDisposable","applyStyle","autorunWithStore","_render","addStandardDisposableListener","equals","preventDefault","originalOptions","getOriginalOptions","modifiedOptions","getModifiedOptions","container","originalModel","modifiedModel","originalModelOpts","modifiedModelOpts","viewItem","row","header","diffIndex","diffsLength","getAriaLines","originalChangedLinesCntAria","modifiedChangedLinesCntAria","comment","cell","createTextNode","_createRow","isSelectedObs","derived","isSelected","tabIndex","addDisposableListener","item","originalLayoutInfo","originalLineNumbersWidth","modifiedLayoutInfo","modifiedLineNumbersWidth","rowClassName","lineNumbersExtraClassName","spacerIcon","minWidth","ariaLevel","innerText","paddingRight","spacer","spacerCodicon","lineContent","html","_getLineHtml","languageIdCodec","ariaLabel","lineTokens","LineTokens","createEmpty","isBasicASCII","ViewLineRenderingData","mightContainNonBasicASCII","containsRTL","mightContainRTL","renderViewLine2","RenderLineInput","isMonospace","canUseHalfwidthRightwardsArrow","spaceWidth","middotWidth","wsmiddotWidth","EditorFontLigatures","OFF","ILanguageService","AccessibleDiffViewerModelFromEditors","editors","MovedBlocksLinesFeature","_rootElement","_diffModel","_originalEditorLayoutInfo","_modifiedEditorLayoutInfo","_editors","_originalScrollTop","observableFromEvent","_modifiedScrollTop","_viewZonesChanged","observableSignalFromEvent","_modifiedViewZonesChangedSignal","_originalViewZonesChangedSignal","replaceChildren","moves","movedTexts","infoOrig","infoMod","computeLineStart","start","lineRangeMapping","startOffset","end","bottom","fromWithoutScroll","toWithoutScroll","sort","tieBreakComparators","compareBy","l","booleanComparator","numberComparator","LinesLayout","compute","lineAreaLeft","verticalScrollbarWidth","lineAreaWidth","getTrackCount","padding","movedCodeBlockPadding","verticalY","getTrack","arrowHeight","arrowWidth","right","rectWidth","rectHeight","rect","createElementNS","classList","path","toggle","activeMovedText","info","info2","movedBlockViewZones","PlaceholderViewZone","constObservable","applyViewZones","zones","z","blocks","MovedBlockOverlayWidget","originalHasFocus","setTimeout","modifiedHasFocus","lastChangedEditor","autorunHandleChanges","createEmptyChangeSummary","handleChange","summary","didChange","m","movedText","originalPos","originalCursor","modifiedPos","modifiedCursor","movedTextToCompare","setActiveMovedText","setsPerTrack","trackPerLineIdx","trackIdx","intersectsStrict","maxTrackCount","findMaxIdx","intersectWithRangeLength","OffsetRangeSet","addRange","_trackCount","lineIdx","ViewZoneOverlayWidget","_viewZone","_move","_kind","root","h","_nodes","marginRight","editorLayout","changes","actionBar","highlightToggledItems","caption","actionCompare","compareChanges","isActive","checked","DiffEditorDecorations","_decorations","renderIndicators","showEmptyDecorations","originalDecorations","modifiedDecorations","mappings","toInclusiveRange","diffLineDeleteDecorationBackgroundWithIndicator","diffLineDeleteDecorationBackground","diffLineAddDecorationBackgroundWithIndicator","diffLineAddDecorationBackground","diffWholeLineDeleteDecoration","diffWholeLineAddDecoration","diffDeleteDecorationEmpty","diffDeleteDecoration","diffAddDecorationEmpty","diffAddDecoration","fullRangeOriginal","fullRangeModified","blockClassName","blockPadding","applyObservableDecorations","DiffEditorSash","_dimensions","_sashes","_sashRatio","sashLeft","ratio","splitViewDefaultRatio","_computeSashLeft","_sash","Sash","getVerticalSashTop","getVerticalSashLeft","getVerticalSashHeight","orientation","_startSashPosition","onDidStart","sashPosition","currentX","startX","onDidEnd","onDidReset","sashes","orthogonalEndSash","enableSplitViewResizing","state","desiredRatio","midPoint","floor","MINIMUM_EDITOR_WIDTH","WorkerBasedDocumentDiffProvider_1","IDiffProviderFactoryService","createDecorator","WorkerBasedDiffProviderFactoryService","createDiffProvider","WorkerBasedDocumentDiffProvider","registerSingleton","editorWorkerService","telemetryService","onDidChangeEventEmitter","diffAlgorithm","diffAlgorithmOnDidChangeSubscription","setOptions","computeDiff","cancellationToken","isDisposed","identical","quitEarly","getLineMaxColumn","DetailedLineRangeMapping","RangeMapping","getFullModelRange","uriKey","JSON","stringify","getAlternativeVersionId","diffCache","sw","StopWatch","timeMs","elapsed","publicLog2","timedOut","detectedMoves","computeMoves","isCancellationRequested","size","IEditorWorkerService","ITelemetryService","DiffEditorViewModel","_activeMovedText","_diffProviderFactoryService","_isDiffUpToDate","isDiffUpToDate","_diff","_unchangedRegions","unchangedRegions","hideUnchangedRegions","regions","collapseAll","_hoveredMovedText","_cancellationTokenSource","CancellationTokenSource","_diffProvider","diffProvider","onChangeSignal","cancel","contentChangedSignal","observableSignal","debouncer","RunOnceScheduler","lastUnchangedRegions","isDragged","lastUnchangedRegionsOrigRanges","originalDecorationIds","fromRangeInclusive","lastUnchangedRegionsModRanges","modifiedDecorationIds","updatedLastUnchangedRegions","UnchangedRegion","visibleLineCountTop","visibleLineCountBottom","isDefined","newRanges","touching","getHiddenModifiedRange","sumLineCount","reduce","sum","lineCount","originalUnchangedRange","modifiedUnchangedRange","updateUnchangedRegions","newUnchangedRegions","fromDiffs","hideUnchangedRegionsMinimumLineCount","hideUnchangedRegionsContextLineCount","visibleRegions","hiddenRegions","filterWithPrevious","cur","getHiddenOriginalRange","inverse","newUnchangedRegions2","intersecting","f","setVisibleRanges","onDidChangeContent","textEdits","TextEditInfo","fromModelContentChanges","applyModifiedEdits","_lastDiff","DiffState","fromDiffResult","currentSyncedMovedText","intersect","schedule","applyOriginalEdits","documentDiffProvider","readHotReloadableExport","DefaultLinesDiffComputer","optimizeSequenceDiffs","originalTextEditInfos","combineTextEditInfos","modifiedTextEditInfos","ignoreTrimWhitespace","maxComputationTimeMs","showMoves","token","rangeMapping","setEndPosition","normalizeRangeMapping","ensureModifiedLineIsVisible","preference","showModifiedLine","ensureOriginalLineIsVisible","showOriginalLine","waitForDiff","waitForState","serializeState","collapsedRegions","serialize","restoreSerializedState","deserialize","setHiddenModifiedRange","DiffMapping","minHiddenLineCount","minContext","inversedMappings","origStart","modStart","atStart","atEnd","_visibleLineCountTop","_visibleLineCountBottom","_shouldHideControls","visibleLineCountTop2","visibleLineCountBottom2","softAssert","visibleRanges","hiddenModified","LineRangeSet","subtractFrom","originalStartLineNumber","modifiedStartLineNumber","modifiedEndLineNumberEx","showAll","isLast","newR","shouldHideControls","setState","getMaxVisibleLineCountTop","getMaxVisibleLineCountBottom","showMoreAbove","maxVisibleLineCountTop","showMoreBelow","maxVisibleLineCountBottom","originalTextModel","modifiedTextModel","InlineDiffDeletedCodeMargin","_visibility","_diffActions","_getViewZoneId","_marginDomNode","_modifiedEditor","_viewLineCounts","_originalTextModel","_contextMenuService","_clipboardService","zIndex","lightBulb","currentLineNumberOffset","useShadowDOM","isIOS","showContextMenu","y","domForShadowRoot","getAnchor","actions","isDeletion","originalText","getValueInRange","toExclusiveRange","writeText","getEndOfLineSequence","revert","autoSelectFirstItem","leftButton","getDomNodePagePosition","pad","posx","_updateLightBulbPosition","posy","marginDomNode","offset","lineNumberOffset","newTop","acc","ttPolicy","hasCharChanges","maxCharsPerLine","renderedLineCount","viewLineCounts","lineBreakData","actualDecorations","LineDecoration","Number","MAX_SAFE_INTEGER","lastBreakOffset","breakOffset","breakOffsets","viewLineTokens","sliceAndInflate","renderOriginalLine","extractWrapped","scrollBeyondLastColumn","trustedhtml","heightInLines","minWidthInPx","typicalHalfwidthCharacterWidth","LineSource","RenderOptions","fromEditor","modifiedEditorOptions","disableMonospaceOptimizations","lineDecorationsWidth","stopRenderingLineAfter","renderWhitespace","renderControlCharacters","fontLigatures","viewLineIdx","output","renderViewLine","characterMapping","getHorizontalOffset","DiffEditorViewZones","_targetWindow","_diffEditorWidget","_canIgnoreViewZoneUpdateEvent","_origViewZonesToIgnore","_modViewZonesToIgnore","_originalTopPadding","_originalScrollOffset","_originalScrollOffsetAnimated","animatedObservable","_modifiedTopPadding","_modifiedScrollOffset","_modifiedScrollOffsetAnimated","updateImmediately","_args","originalModelTokenizationCompleted","onDidChangeTokens","tokenization","backgroundTokenizationState","alignments","diffModel","innerHunkAlignment","renderSideBySide","computeRangeAlignment","alignmentsSyncedMovedText","syncedMovedText","createFakeLinesDiv","alignmentViewZonesDisposables","DisposableStore","viewZones","_c","_d","_e","_f","_g","_h","alignmentsVal","origViewZones","modViewZones","modifiedTopPaddingVal","heightInPx","showInHiddenAreas","suppressMouseDown","originalTopPaddingVal","deletedCodeLineBreaksComputer","createLineBreaksComputer","orig","mod","addRequest","finalize","lineBreakDataIdx","modLineHeight","renderOptions","deletedCodeDomNode","mapToLineArray","getLineTokens","_","InlineDecoration","marginElement","diffRemoveIcon","zoneId","assertIsDefined","setZoneId","modifiedHeightInPx","originalHeightInPx","deltaLength","createViewZoneMarginArrow","arrow","stopPropagation","$","shouldRenderOldRevertArrows","ignoreChange","scrollLeftChanged","newScrollTopModified","newScrollTopOriginal","deltaOrigToMod","trueTopOriginal","originalEditor","modifiedEditor","originalEditorAlignmentViewZones","modifiedEditorAlignmentViewZones","originalLineHeightOverrides","ArrayQueue","getAdditionalLineHeights","modifiedLineHeightOverrides","origLineHeight","lastOriginalLineNumber","lastModifiedLineNumber","handleAlignmentsOutsideOfDiffs","untilOriginalLineNumberExclusive","untilModifiedLineNumberExclusive","origNext","peek","modNext","distOrig","MAX_VALUE","distNext","dequeue","first","lastModLineNumber","lastOrigLineNumber","emitAlignment","origLineNumberExclusive","modLineNumberExclusive","originalAdditionalHeight","takeWhile","v","modifiedAdditionalHeight","maxColumn","viewZonesToIgnore","viewZoneHeights","wrappingZoneHeights","hasWrapping","wrappingColumn","editorLineHeight","getModelLineViewLineCount","w","joinCombine","v1","v2","IClipboardService","IContextMenuService","EditorGutter","itemProvider","isScrollTopZero","modelAttached","editorOnDidChangeViewZones","editorOnDidContentSizeChange","domNodeSizeChanged","views","scrollDecoration","role","ariaHidden","o","ResizeObserver","observe","disconnect","unusedIds","Set","ofStartAndLength","clientHeight","visibleRange2","gutterItems","getIntersectingGutterItems","gutterItem","viewDomNode","gutterItemObs","itemView","createView","ManagedGutterItemView","gutterItemView","emptyArr","DiffEditorGutter","diffEditorRoot","_menuService","_menu","createMenu","_hasActions","elements","_currentDiff","cursorPosition","_selectedDiffs","modifiedSelections","every","selectedLineNumbers","intersects","rangeMappings","areIntersecting","prependRemoveOnDispose","display","fromRangeMappings","flatMap","DiffGutterItem","currentDiff","withInnerChangesFromLineRanges","DiffToolBar","gutter","EventType","MOUSE_WHEEL","handleMouseWheel","passive","computeStagedValue","TextModelText","edit","TextEdit","toTextEdit","apply","IMenuService","showAlways","menuId","rangeOverride","_item","_elements","_showAlways","_menuId","_isSmall","_lastItemRange","_lastViewRange","hoverDelegate","WorkbenchHoverDelegate","hoverPosition","appendRemoveOnDispose","buttons","MenuWorkbenchToolBar","toolbarOptions","primaryGroup","startsWith","overflowBehavior","maxItems","hiddenItemStrategy","actionRunner","ActionRunnerWithContext","originalWithModifiedChanges","menuOptions","shouldForwardArgs","onDidChangeMenuItems","itemRange","itemHeight","middleHeight","margin","effectiveCheckboxTop","preferredViewPortRange","tryCreate","endExclusive","preferredParentRange","OverviewRulerFeature_1","OverviewRulerFeature","_rootWidth","_rootHeight","ENTIRE_DIFF_OVERVIEW_WIDTH","currentColorTheme","onDidColorThemeChange","currentColors","insertColor","diffOverviewRulerInserted","diffInserted","defaultInsertColor","transparent","removeColor","diffOverviewRulerRemoved","diffRemoved","defaultRemoveColor","viewportDomElement","diffOverviewRoot","POINTER_DOWN","originalOverviewRuler","modifiedOverviewRuler","origViewZonesChanged","modViewZonesChanged","origHiddenRangesChanged","modHiddenRangesChanged","colors","createZones","vm","OverviewRulerZone","originalZones","modifiedZones","setZones","freeSpace","ONE_OVERVIEW_WIDTH","setLayout","modifiedScrollTop","modifiedScrollHeight","scrollBarOptions","ScrollbarState","verticalHasArrows","arrowSize","verticalScrollbarSize","getSliderPosition","getSliderSize","RevertButtonsFeature","_widget","glyphWidgetsModified","selectedDiffs","selectedDiffsSet","btn","RevertButton","_lineNumber","_revertSelection","counter","renderIcon","MOUSE_DOWN","button","MOUSE_UP","CLICK","lane","GlyphMarginLane","Right","DiffEditorEditors","originalEditorElement","modifiedEditorElement","_argCodeEditorWidgetOptions","_createInnerEditor","_keybindingService","_createLeftHandSideEditor","editorOptions","_createRightHandSideEditor","obsCodeEditor","derivedOpts","owner","equalsFn","changeSummary","assign","changedOptions","_adjustOptionsForRightHandSide","_adjustOptionsForLeftHandSide","leftHandSideOptions","_constructInnerEditor","rightHandSideOptions","editorWidgetOptions","contentHeight","contentHeightChanged","contentWidthChanged","_reader","_adjustOptionsForSubEditor","unicodeHighlight","wordWrapOverride1","diffWordWrap","wordWrapOverride2","stickyScroll","nonBasicASCII","ambiguousCharacters","invisibleCharacters","glyphMargin","originalAriaLabel","_updateAriaLabel","originalEditable","dropIntoEditor","extraEditorClassName","modifiedAriaLabel","revealHorizontalRightPadding","EditorOptions","defaultValue","scrollbar","clonedOptions","automaticLayout","folding","codeLens","diffCodeLens","fixedOverflowWidgets","minimap","ariaNavigationTip","lookupKeybinding","getAriaLabel","accessibilityVerbose","replaceAll","IKeybindingService","DelegatingEditor","idCounter","_targetEditor","DiffEditorOptions","_accessibilityService","_diffEditorWidth","_screenReaderMode","onDidChangeScreenReaderOptimized","isScreenReaderOptimized","couldShowInlineViewBecauseOfSize","renderSideBySideInlineBreakpoint","renderOverviewRuler","useInlineViewWhenSpaceIsLimited","renderMarginRevertIcon","shouldRenderGutterMenu","renderGutterMenu","maxComputationTime","experimental","onlyShowAccessibleDiffViewer","hideUnchangedRegionsRevealLineCount","revealLineCount","contextLineCount","minimumLineCount","optionsCopy","validateDiffEditorOptions","diffEditorDefaultOptions","newDiffEditorOptions","defaults","validateBooleanOption","clampedFloat","clampedInt","maxFileSize","validateStringSetOption","collapseUnchangedRegions","_parentContextKeyService","_parentInstantiationService","_editorProgressService","_shouldDisposeDiffModel","Event","fromObservableLight","_boundarySashes","_accessibleDiffViewerShouldBeVisible","_accessibleDiffViewerVisible","_movedBlocksLinesPart","_layoutInfo","fullWidth","_rootSizeObserver","fullHeight","sash","_gutter","gutterWidth","overviewRulerPartWidth","_overviewRulerPart","originalWidth","modifiedLeft","modifiedWidth","gutterLeft","decorationsLeft","_diffValue","onDidUpdateDiff","willCreateDiffEditor","ObservableElementSizeObserver","setAutomaticLayout","isEmbeddedDiffEditor","bindContextKey","hasChanges","o2","diffEditorOriginalWritable","diffEditorOriginalUri","diffEditorModifiedUri","derivedDisposable","showSash","unchangedRangesFeature","HideUnchangedRegionsFeature","origViewZoneIdsToIgnore","modViewZoneIdsToIgnore","isUpdatingViewZones","viewZoneManager","isUpdatingHiddenAreas","originalViewZones","orig2","modifiedViewZones","mod2","scrollState","isUpdatingOrigViewZones","isUpdatingModViewZones","StableEditorScrollState","capture","restore","_accessibleDiffViewer","accessibleDiffViewer","_createDiffEditorContributions","addDiffEditor","runAndSubscribe","_handleCursorPositionChange","isInitializingDiff","show","done","getDiffEditorContributions","EditorType","IDiffEditor","modelState","diffEditorState","createViewModel","shouldDispose","batchEventsGlobally","prevValue","getLineChanges","diffState","originalEndLineNumber","modifiedEndLineNumber","charChanges","originalStartColumn","originalEndColumn","modifiedStartColumn","modifiedEndColumn","_goTo","goToDiff","curLineNumber","findLast","diffLineModified","revealFirstDiff","isModifiedFocus","destination","sourceSelection","flip","newRange1","translatePosition","newRange2","getEndPosition","plusRange","region","isModifiedEditor","IEditorProgressService","HideUnchangedRegionsFeature_1","setBreadcrumbsSourceFactory","factory","_breadcrumbsSourceFactory","_isUpdatingHiddenAreas","_modifiedOutlineSource","modifiedOutlineSource","sideBySide","curUnchangedRegions","origVz","CollapsedCodeOverlayWidget","modViewZone","unchangedLinesDecoration","isWholeLine","unchangedLinesDecorationShow","glyphMarginHoverMessage","MarkdownString","isTrusted","supportThemeIcons","appendMarkdown","glyphMarginClassName","rightButton","_unchangedRegion","_unchangedRegionRange","_hide","_revealModifiedHiddenLine","justifyContent","alignItems","flexShrink","onclick","renderLabelWithIcons","isFullyRevealed","startTop","didMove","window","mouseMoveListener","abs","lineDelta","newVal","mouseUpListener","top2","children","linesHiddenText","span","addEventListener","items","getBreadcrumbItems","SymbolKinds","toIcon","divItem","name","chevronRight","others","registerColor","dark","light","hcDark","hcLight","diffInsertIcon","linesDecorationsClassName","marginClassName","shouldFillLineOnLineBreak","arr1","arr2","keySelector","combine","j","val1","val2","key1","key2","decorationsCollection","autorunOpts","debugName","parent","elementSizeObserver","ElementSizeObserver","getWidth","getHeight","startObserving","stopObserving","targetWindow","base","targetVal","startVal","curVal","animationStartMs","animationFrame","passedMs","Date","now","t","pow","requestAnimationFrame","animate","cancelAnimationFrame","viewZone","htmlElement","ManagedOverlayWidget","actualHeight","actualTop","_afterLineNumber","_actualTop","_actualHeight","onDomNodeTop","onComputedHeight","_overlayWidgetId","_counter","_overlayWidget","val","entries","replace","toLowerCase","isHotReloadEnabled","registerHotReloadHandler","_ref","oldExports","_newExports","observeHotReloadableExports","setIsUpdating","zoneIds","lastViewZoneIds","curViewZones","viewZonIdsPerViewZone","viewZoneIdPerOnChangeObservable","removeZone","addZone","changedObservable","vz","layoutZone","DisposableCancellationTokenSource","posInOriginal","newLineNumber","innerMapping","isBeforeOrEqual","containsPosition","position1","position2","TextLength","addToPosition","service","computeValue","boundKey","arr","MarkdownRenderer_1","MarkdownRenderer","_openerService","_onDidRenderAsync","onDidRenderAsync","markdown","markedOptions","rendered","renderMarkdown","_getRenderOptions","codeBlockRenderer","languageAlias","getLanguageIdByLanguageName","PLAINTEXT_LANGUAGE_ID","tokenizeToString","_ttpTokenizer","codeBlockFontFamily","fontFamily","codeBlockFontSize","fontSize","asyncRenderCallback","actionHandler","link","openLinkFromMarkdown","openerService","open","fromUserGesture","allowContributedOpeners","allowCommands","toAllowCommandsOption","enabledCommands","IOpenerService","TemplateData","deltaScrollVertical","DiffEditorItemTemplate","_container","_workbenchUIElementFactory","_viewModel","_collapsed","collapsed","_editorContentHeight","_outerEditorHeight","_modifiedContentWidth","_modifiedWidth","_originalContentWidth","_originalWidth","maxScroll","scroll1","scroll2","isModifedFocused","isOriginalFocused","_resourceLabel","createResourceLabel","primaryPath","_resourceLabel2","secondaryPath","_dataStore","_headerHeight","_lastScrollTop","_isSettingScrollTop","Button","collapseButton","chevronDown","onDidClick","globalTransaction","_data","MultiDiffEditorFileToolbar","actionViewItemProvider","createActionViewItem","setData","scrollBeyondLastLine","vertical","horizontal","useShadows","overviewRulerBorder","entry","onOptionsDidChange","setUri","strikethrough","isRenamed","isDeleted","isAdded","flag","status","diffEditorViewModel","verticalRange","editorScroll","viewPort","maxDelta","transform","hide","ObjectPool","_create","_unused","_used","_itemData","getUnusedObj","obj","object","MultiDiffEditorWidgetImpl","_dimension","overflow","_sizeObserver","_objectPool","template","content","_scrollable","Scrollable","forceIntegerValues","scheduleAtNextAnimationFrame","cb","smoothScrollDuration","_scrollableElement","SmoothScrollableElement","onScroll","getScrollPosition","_viewItemsInfo","getItem","viewModels","VirtualizedViewItem","_lastDocStates","getKey","setViewState","_viewItems","_spaceBetweenPx","_totalHeight","inMultiDiffEditor","contextKeys","contextKey","ctxAllCollapsed","multiDiffEditorAllCollapsed","allCollapsed","totalHeight","viewItems","findFirstMax","setScrollDimensions","contentScrollOffsetToScrollOffset","itemHeightSumBefore","itemContentHeightSumBefore","viewPortHeight","contentViewPort","itemContentHeight","itemContentRange","isBefore","isAfter","scroll","_scrollLeft","_deltaScrollVertical","_templateRef","disposableObservableValue","lastTemplateData","_isHidden","setIsFocused","ref","_clear","_updateTemplateData","liftSelection","verticalSpace","MultiDiffEditorWidget","_widgetImpl","ActionRunner","_getContext","runAction"],"sourceRoot":""}