"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[5227],{27645:(e,t,n)=>{n.d(t,{jY:()=>i,yU:()=>o});class i{constructor(e,t,n,i){this.range=e,this.nestingLevel=t,this.nestingLevelOfEqualBracketType=n,this.isInvalid=i}}class s{constructor(e,t,n,i,s,o){this.range=e,this.openingBracketRange=t,this.closingBracketRange=n,this.nestingLevel=i,this.nestingLevelOfEqualBracketType=s,this.bracketPairNode=o}get openingBracketInfo(){return this.bracketPairNode.openingBracket.bracketInfo}}class o extends s{constructor(e,t,n,i,s,o,r){super(e,t,n,i,s,o),this.minVisibleColumnIndentation=r}}},80709:(e,t,n)=>{n.d(t,{E$:()=>r,HP:()=>h,Ic:()=>u,U0:()=>o,Wn:()=>i,bg:()=>a,mS:()=>l,uK:()=>s,vn:()=>c});class i{constructor(){this.changeType=1}}class s{static applyInjectedText(e,t){if(!t||0===t.length)return e;let n="",i=0;for(const s of t)n+=e.substring(i,s.column-1),i=s.column-1,n+=s.options.content;return n+=e.substring(i),n}static fromDecorations(e){const t=[];for(const n of e)n.options.before&&n.options.before.content.length>0&&t.push(new s(n.ownerId,n.range.startLineNumber,n.range.startColumn,n.options.before,0)),n.options.after&&n.options.after.content.length>0&&t.push(new s(n.ownerId,n.range.endLineNumber,n.range.endColumn,n.options.after,1));return t.sort(((e,t)=>e.lineNumber===t.lineNumber?e.column===t.column?e.order-t.order:e.column-t.column:e.lineNumber-t.lineNumber)),t}constructor(e,t,n,i,s){this.ownerId=e,this.lineNumber=t,this.column=n,this.options=i,this.order=s}}class o{constructor(e,t,n){this.changeType=2,this.lineNumber=e,this.detail=t,this.injectedText=n}}class r{constructor(e,t){this.changeType=3,this.fromLineNumber=e,this.toLineNumber=t}}class a{constructor(e,t,n,i){this.changeType=4,this.injectedTexts=i,this.fromLineNumber=e,this.toLineNumber=t,this.detail=n}}class l{constructor(){this.changeType=5}}class h{constructor(e,t,n,i){this.changes=e,this.versionId=t,this.isUndoing=n,this.isRedoing=i,this.resultingSelection=null}containsEvent(e){for(let t=0,n=this.changes.length;t<n;t++){if(this.changes[t].changeType===e)return!0}return!1}static merge(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.versionId,s=e.isUndoing||t.isUndoing,o=e.isRedoing||t.isRedoing;return new h(n,i,s,o)}}class c{constructor(e){this.changes=e}}class u{constructor(e,t){this.rawContentChangedEvent=e,this.contentChangedEvent=t}merge(e){const t=h.merge(this.rawContentChangedEvent,e.rawContentChangedEvent),n=u._mergeChangeEvents(this.contentChangedEvent,e.contentChangedEvent);return new u(t,n)}static _mergeChangeEvents(e,t){const n=[].concat(e.changes).concat(t.changes),i=t.eol,s=t.versionId,o=e.isUndoing||t.isUndoing,r=e.isRedoing||t.isRedoing,a=e.isFlush||t.isFlush;return{changes:n,eol:i,isEolChange:e.isEolChange&&t.isEolChange,versionId:s,isUndoing:o,isRedoing:r,isFlush:a}}}},47213:(e,t,n)=>{var i;n.d(t,{N6:()=>i,TH:()=>s,pv:()=>o}),function(e){e[e.Disabled=0]="Disabled",e[e.EnabledForActive=1]="EnabledForActive",e[e.Enabled=2]="Enabled"}(i||(i={}));class s{constructor(e,t,n,i,s,o){if(this.visibleColumn=e,this.column=t,this.className=n,this.horizontalLine=i,this.forWrappedLinesAfterColumn=s,this.forWrappedLinesBeforeOrAtColumn=o,-1!==e===(-1!==t))throw new Error}}class o{constructor(e,t){this.top=e,this.endColumn=t}}},41014:(e,t,n)=>{n.d(t,{d:()=>o});var i=n(4640),s=n(60704);class o{constructor(){this._tokenizationSupports=new Map,this._factories=new Map,this._onDidChange=new i.vl,this.onDidChange=this._onDidChange.event,this._colorMap=null}handleChange(e){this._onDidChange.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this._tokenizationSupports.set(e,t),this.handleChange([e]),(0,s.s)((()=>{this._tokenizationSupports.get(e)===t&&(this._tokenizationSupports.delete(e),this.handleChange([e]))}))}get(e){return this._tokenizationSupports.get(e)||null}registerFactory(e,t){var n;null===(n=this._factories.get(e))||void 0===n||n.dispose();const i=new r(this,e,t);return this._factories.set(e,i),(0,s.s)((()=>{const t=this._factories.get(e);t&&t===i&&(this._factories.delete(e),t.dispose())}))}async getOrCreate(e){const t=this.get(e);if(t)return t;const n=this._factories.get(e);return!n||n.isResolved?null:(await n.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const t=this._factories.get(e);return!(t&&!t.isResolved)}setColorMap(e){this._colorMap=e,this._onDidChange.fire({changedLanguages:Array.from(this._tokenizationSupports.keys()),changedColorMap:!0})}getColorMap(){return this._colorMap}getDefaultBackground(){return this._colorMap&&this._colorMap.length>2?this._colorMap[2]:null}}class r extends s.jG{get isResolved(){return this._isResolved}constructor(e,t,n){super(),this._registry=e,this._languageId=t,this._factory=n,this._isDisposed=!1,this._resolvePromise=null,this._isResolved=!1}dispose(){this._isDisposed=!0,super.dispose()}async resolve(){return this._resolvePromise||(this._resolvePromise=this._create()),this._resolvePromise}async _create(){const e=await this._factory.tokenizationSupport;this._isResolved=!0,e&&!this._isDisposed&&this._register(this._registry.register(this._languageId,e))}}},31868:(e,t,n)=>{n.d(t,{Z:()=>s});class i{get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._startLineNumber+this._tokens.length-1}constructor(e,t){this._startLineNumber=e,this._tokens=t}getLineTokens(e){return this._tokens[e-this._startLineNumber]}appendLineTokens(e){this._tokens.push(e)}}class s{constructor(){this._tokens=[]}add(e,t){if(this._tokens.length>0){const n=this._tokens[this._tokens.length-1];if(n.endLineNumber+1===e)return void n.appendLineTokens(t)}this._tokens.push(new i(e,[t]))}finalize(){return this._tokens}}},43270:(e,t,n)=>{n.d(t,{y:()=>c});var i=n(55648),s=n(20603),o=n(21707);const r=new Uint32Array(0).buffer;class a{static deleteBeginning(e,t){return null===e||e===r?e:a.delete(e,0,t)}static deleteEnding(e,t){if(null===e||e===r)return e;const n=l(e),i=n[n.length-2];return a.delete(e,t,i)}static delete(e,t,n){if(null===e||e===r||t===n)return e;const i=l(e),s=i.length>>>1;if(0===t&&i[i.length-2]===n)return r;const a=o.f.findIndexInTokensArray(i,t),h=a>0?i[a-1<<1]:0;if(n<i[a<<1]){const o=n-t;for(let e=a;e<s;e++)i[e<<1]-=o;return e}let c,u;h!==t?(i[a<<1]=t,c=a+1<<1,u=t):(c=a<<1,u=h);const d=n-t;for(let o=a+1;o<s;o++){const e=i[o<<1]-d;e>u&&(i[c++]=e,i[c++]=i[1+(o<<1)],u=e)}if(c===i.length)return e;const g=new Uint32Array(c);return g.set(i.subarray(0,c),0),g.buffer}static append(e,t){if(t===r)return e;if(e===r)return t;if(null===e)return e;if(null===t)return null;const n=l(e),i=l(t),s=i.length>>>1,o=new Uint32Array(n.length+i.length);o.set(n,0);let a=n.length;const h=n[n.length-2];for(let r=0;r<s;r++)o[a++]=i[r<<1]+h,o[a++]=i[1+(r<<1)];return o.buffer}static insert(e,t,n){if(null===e||e===r)return e;const i=l(e),s=i.length>>>1;let a=o.f.findIndexInTokensArray(i,t);if(a>0){i[a-1<<1]===t&&a--}for(let o=a;o<s;o++)i[o<<1]+=n;return e}}function l(e){return e instanceof Uint32Array?e:new Uint32Array(e)}var h=n(91484);class c{constructor(e){this._lineTokens=[],this._len=0,this._languageIdCodec=e}flush(){this._lineTokens=[],this._len=0}get hasTokens(){return this._lineTokens.length>0}getTokens(e,t,n){let i=null;if(t<this._len&&(i=this._lineTokens[t]),null!==i&&i!==r)return new o.f(l(i),n,this._languageIdCodec);const s=new Uint32Array(2);return s[0]=n.length,s[1]=u(this._languageIdCodec.encodeLanguageId(e)),new o.f(s,n,this._languageIdCodec)}static _massageTokens(e,t,n){const i=n?l(n):null;if(0===t){let t=!1;if(i&&i.length>1&&(t=h.x.getLanguageId(i[1])!==e),!t)return r}if(!i||0===i.length){const n=new Uint32Array(2);return n[0]=t,n[1]=u(e),n.buffer}return i[i.length-2]=t,0===i.byteOffset&&i.byteLength===i.buffer.byteLength?i.buffer:i}_ensureLine(e){for(;e>=this._len;)this._lineTokens[this._len]=null,this._len++}_deleteLines(e,t){0!==t&&(e+t>this._len&&(t=this._len-e),this._lineTokens.splice(e,t),this._len-=t)}_insertLines(e,t){if(0===t)return;const n=[];for(let i=0;i<t;i++)n[i]=null;this._lineTokens=i.nK(this._lineTokens,e,n),this._len+=t}setTokens(e,t,n,i,s){const o=c._massageTokens(this._languageIdCodec.encodeLanguageId(e),n,i);this._ensureLine(t);const r=this._lineTokens[t];return this._lineTokens[t]=o,!!s&&!c._equals(r,o)}static _equals(e,t){if(!e||!t)return!e&&!t;const n=l(e),i=l(t);if(n.length!==i.length)return!1;for(let s=0,o=n.length;s<o;s++)if(n[s]!==i[s])return!1;return!0}acceptEdit(e,t,n){this._acceptDeleteRange(e),this._acceptInsertText(new s.y(e.startLineNumber,e.startColumn),t,n)}_acceptDeleteRange(e){const t=e.startLineNumber-1;if(t>=this._len)return;if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;return void(this._lineTokens[t]=a.delete(this._lineTokens[t],e.startColumn-1,e.endColumn-1))}this._lineTokens[t]=a.deleteEnding(this._lineTokens[t],e.startColumn-1);const n=e.endLineNumber-1;let i=null;n<this._len&&(i=a.deleteBeginning(this._lineTokens[n],e.endColumn-1)),this._lineTokens[t]=a.append(this._lineTokens[t],i),this._deleteLines(e.startLineNumber,e.endLineNumber-e.startLineNumber)}_acceptInsertText(e,t,n){if(0===t&&0===n)return;const i=e.lineNumber-1;i>=this._len||(0!==t?(this._lineTokens[i]=a.deleteEnding(this._lineTokens[i],e.column-1),this._lineTokens[i]=a.insert(this._lineTokens[i],e.column-1,n),this._insertLines(e.lineNumber,t)):this._lineTokens[i]=a.insert(this._lineTokens[i],e.column-1,n))}setMultilineTokens(e,t){if(0===e.length)return{changes:[]};const n=[];for(let i=0,s=e.length;i<s;i++){const s=e[i];let o=0,r=0,a=!1;for(let e=s.startLineNumber;e<=s.endLineNumber;e++)if(a)this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),s.getLineTokens(e),!1),r=e;else{this.setTokens(t.getLanguageId(),e-1,t.getLineLength(e),s.getLineTokens(e),!0)&&(a=!0,o=e,r=e)}a&&n.push({fromLineNumber:o,toLineNumber:r})}return{changes:n}}}function u(e){return(32768|e|2<<24|1024)>>>0}},21707:(e,t,n)=>{n.d(t,{f:()=>s});var i=n(91484);class s{static createEmpty(e,t){const n=s.defaultTokenMetadata,i=new Uint32Array(2);return i[0]=e.length,i[1]=n,new s(i,e,t)}constructor(e,t,n){this._lineTokensBrand=void 0,this._tokens=e,this._tokensCount=this._tokens.length>>>1,this._text=t,this._languageIdCodec=n}equals(e){return e instanceof s&&this.slicedEquals(e,0,this._tokensCount)}slicedEquals(e,t,n){if(this._text!==e._text)return!1;if(this._tokensCount!==e._tokensCount)return!1;const i=t<<1,s=i+(n<<1);for(let o=i;o<s;o++)if(this._tokens[o]!==e._tokens[o])return!1;return!0}getLineContent(){return this._text}getCount(){return this._tokensCount}getStartOffset(e){return e>0?this._tokens[e-1<<1]:0}getMetadata(e){return this._tokens[1+(e<<1)]}getLanguageId(e){const t=this._tokens[1+(e<<1)],n=i.x.getLanguageId(t);return this._languageIdCodec.decodeLanguageId(n)}getStandardTokenType(e){const t=this._tokens[1+(e<<1)];return i.x.getTokenType(t)}getForeground(e){const t=this._tokens[1+(e<<1)];return i.x.getForeground(t)}getClassName(e){const t=this._tokens[1+(e<<1)];return i.x.getClassNameFromMetadata(t)}getInlineStyle(e,t){const n=this._tokens[1+(e<<1)];return i.x.getInlineStyleFromMetadata(n,t)}getPresentation(e){const t=this._tokens[1+(e<<1)];return i.x.getPresentationFromMetadata(t)}getEndOffset(e){return this._tokens[e<<1]}findTokenIndexAtOffset(e){return s.findIndexInTokensArray(this._tokens,e)}inflate(){return this}sliceAndInflate(e,t,n){return new o(this,e,t,n)}static convertToEndOffset(e,t){const n=(e.length>>>1)-1;for(let i=0;i<n;i++)e[i<<1]=e[i+1<<1];e[n<<1]=t}static findIndexInTokensArray(e,t){if(e.length<=2)return 0;let n=0,i=(e.length>>>1)-1;for(;n<i;){const s=n+Math.floor((i-n)/2),o=e[s<<1];if(o===t)return s+1;o<t?n=s+1:o>t&&(i=s)}return n}withInserted(e){if(0===e.length)return this;let t=0,n=0,i="";const o=new Array;let r=0;for(;;){const s=t<this._tokensCount?this._tokens[t<<1]:-1,a=n<e.length?e[n]:null;if(-1!==s&&(null===a||s<=a.offset)){i+=this._text.substring(r,s);const e=this._tokens[1+(t<<1)];o.push(i.length,e),t++,r=s}else{if(!a)break;if(a.offset>r){i+=this._text.substring(r,a.offset);const e=this._tokens[1+(t<<1)];o.push(i.length,e),r=a.offset}i+=a.text,o.push(i.length,a.tokenMetadata),n++}}return new s(new Uint32Array(o),i,this._languageIdCodec)}}s.defaultTokenMetadata=33587200;class o{constructor(e,t,n,i){this._source=e,this._startOffset=t,this._endOffset=n,this._deltaOffset=i,this._firstTokenIndex=e.findTokenIndexAtOffset(t),this._tokensCount=0;for(let s=this._firstTokenIndex,o=e.getCount();s<o;s++){if(e.getStartOffset(s)>=n)break;this._tokensCount++}}getMetadata(e){return this._source.getMetadata(this._firstTokenIndex+e)}getLanguageId(e){return this._source.getLanguageId(this._firstTokenIndex+e)}getLineContent(){return this._source.getLineContent().substring(this._startOffset,this._endOffset)}equals(e){return e instanceof o&&(this._startOffset===e._startOffset&&this._endOffset===e._endOffset&&this._deltaOffset===e._deltaOffset&&this._source.slicedEquals(e._source,this._firstTokenIndex,this._tokensCount))}getCount(){return this._tokensCount}getForeground(e){return this._source.getForeground(this._firstTokenIndex+e)}getEndOffset(e){const t=this._source.getEndOffset(this._firstTokenIndex+e);return Math.min(this._endOffset,t)-this._startOffset+this._deltaOffset}getClassName(e){return this._source.getClassName(this._firstTokenIndex+e)}getInlineStyle(e,t){return this._source.getInlineStyle(this._firstTokenIndex+e,t)}getPresentation(e){return this._source.getPresentation(this._firstTokenIndex+e)}findTokenIndexAtOffset(e){return this._source.findTokenIndexAtOffset(e+this._startOffset-this._deltaOffset)-this._firstTokenIndex}}},41278:(e,t,n)=>{n.d(t,{K:()=>r});var i=n(20603),s=n(38499),o=n(65080);class r{static create(e,t){return new r(e,new a(t))}get startLineNumber(){return this._startLineNumber}get endLineNumber(){return this._endLineNumber}constructor(e,t){this._startLineNumber=e,this._tokens=t,this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}toString(){return this._tokens.toString(this._startLineNumber)}_updateEndLineNumber(){this._endLineNumber=this._startLineNumber+this._tokens.getMaxDeltaLine()}isEmpty(){return this._tokens.isEmpty()}getLineTokens(e){return this._startLineNumber<=e&&e<=this._endLineNumber?this._tokens.getLineTokens(e-this._startLineNumber):null}getRange(){const e=this._tokens.getRange();return e?new s.Q(this._startLineNumber+e.startLineNumber,e.startColumn,this._startLineNumber+e.endLineNumber,e.endColumn):e}removeTokens(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;this._startLineNumber+=this._tokens.removeTokens(t,e.startColumn-1,n,e.endColumn-1),this._updateEndLineNumber()}split(e){const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber,[i,s,o]=this._tokens.split(t,e.startColumn-1,n,e.endColumn-1);return[new r(this._startLineNumber,i),new r(this._startLineNumber+o,s)]}applyEdit(e,t){const[n,i,s]=(0,o.W)(t);this.acceptEdit(e,n,i,s,t.length>0?t.charCodeAt(0):0)}acceptEdit(e,t,n,s,o){this._acceptDeleteRange(e),this._acceptInsertText(new i.y(e.startLineNumber,e.startColumn),t,n,s,o),this._updateEndLineNumber()}_acceptDeleteRange(e){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return;const t=e.startLineNumber-this._startLineNumber,n=e.endLineNumber-this._startLineNumber;if(n<0){const e=n-t;return void(this._startLineNumber-=e)}const i=this._tokens.getMaxDeltaLine();if(!(t>=i+1)){if(t<0&&n>=i+1)return this._startLineNumber=0,void this._tokens.clear();if(t<0){const i=-t;this._startLineNumber-=i,this._tokens.acceptDeleteRange(e.startColumn-1,0,0,n,e.endColumn-1)}else this._tokens.acceptDeleteRange(0,t,e.startColumn-1,n,e.endColumn-1)}}_acceptInsertText(e,t,n,i,s){if(0===t&&0===n)return;const o=e.lineNumber-this._startLineNumber;if(o<0)return void(this._startLineNumber+=t);o>=this._tokens.getMaxDeltaLine()+1||this._tokens.acceptInsertText(o,e.column-1,t,n,i,s)}}class a{constructor(e){this._tokens=e,this._tokenCount=e.length/4}toString(e){const t=[];for(let n=0;n<this._tokenCount;n++)t.push("(".concat(this._getDeltaLine(n)+e,",").concat(this._getStartCharacter(n),"-").concat(this._getEndCharacter(n),")"));return"[".concat(t.join(","),"]")}getMaxDeltaLine(){const e=this._getTokenCount();return 0===e?-1:this._getDeltaLine(e-1)}getRange(){const e=this._getTokenCount();if(0===e)return null;const t=this._getStartCharacter(0),n=this._getDeltaLine(e-1),i=this._getEndCharacter(e-1);return new s.Q(0,t+1,n,i+1)}_getTokenCount(){return this._tokenCount}_getDeltaLine(e){return this._tokens[4*e]}_getStartCharacter(e){return this._tokens[4*e+1]}_getEndCharacter(e){return this._tokens[4*e+2]}isEmpty(){return 0===this._getTokenCount()}getLineTokens(e){let t=0,n=this._getTokenCount()-1;for(;t<n;){const i=t+Math.floor((n-t)/2),s=this._getDeltaLine(i);if(s<e)t=i+1;else{if(!(s>e)){let s=i;for(;s>t&&this._getDeltaLine(s-1)===e;)s--;let o=i;for(;o<n&&this._getDeltaLine(o+1)===e;)o++;return new l(this._tokens.subarray(4*s,4*o+4))}n=i-1}}return this._getDeltaLine(t)===e?new l(this._tokens.subarray(4*t,4*t+4)):null}clear(){this._tokenCount=0}removeTokens(e,t,n,i){const s=this._tokens,o=this._tokenCount;let r=0,a=!1,l=0;for(let h=0;h<o;h++){const o=4*h,c=s[o],u=s[o+1],d=s[o+2],g=s[o+3];if((c>e||c===e&&d>=t)&&(c<n||c===n&&u<=i))a=!0;else{if(0===r&&(l=c),a){const e=4*r;s[e]=c-l,s[e+1]=u,s[e+2]=d,s[e+3]=g}r++}}return this._tokenCount=r,l}split(e,t,n,i){const s=this._tokens,o=this._tokenCount,r=[],l=[];let h=r,c=0,u=0;for(let a=0;a<o;a++){const o=4*a,r=s[o],d=s[o+1],g=s[o+2],m=s[o+3];if(r>e||r===e&&g>=t){if(r<n||r===n&&d<=i)continue;h!==l&&(h=l,c=0,u=r)}h[c++]=r-u,h[c++]=d,h[c++]=g,h[c++]=m}return[new a(new Uint32Array(r)),new a(new Uint32Array(l)),u]}acceptDeleteRange(e,t,n,i,s){const o=this._tokens,r=this._tokenCount,a=i-t;let l=0,h=!1;for(let c=0;c<r;c++){const u=4*c;let d=o[u],g=o[u+1],m=o[u+2];const f=o[u+3];if(d<t||d===t&&m<=n){l++;continue}if(d===t&&g<n)d===i&&m>s?m-=s-n:m=n;else if(d===t&&g===n){if(!(d===i&&m>s)){h=!0;continue}m-=s-n}else if(d<i||d===i&&g<s){if(!(d===i&&m>s)){h=!0;continue}d=t,g=n,m=g+(m-s)}else if(d>i){if(0===a&&!h){l=r;break}d-=a}else{if(!(d===i&&g>=s))throw new Error("Not possible!");e&&0===d&&(g+=e,m+=e),d-=a,g-=s-n,m-=s-n}const p=4*l;o[p]=d,o[p+1]=g,o[p+2]=m,o[p+3]=f,l++}this._tokenCount=l}acceptInsertText(e,t,n,i,s,o){const r=0===n&&1===i&&(o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122),a=this._tokens,l=this._tokenCount;for(let h=0;h<l;h++){const o=4*h;let l=a[o],c=a[o+1],u=a[o+2];if(!(l<e||l===e&&u<t)){if(l===e&&u===t){if(!r)continue;u+=1}else if(l===e&&c<t&&t<u)0===n?u+=i:u=t;else{if(l===e&&c===t&&r)continue;if(l===e)if(l+=n,0===n)c+=i,u+=i;else{const e=u-c;c=s+(c-t),u=c+e}else l+=n}a[o]=l,a[o+1]=c,a[o+2]=u}}}}class l{constructor(e){this._tokens=e}getCount(){return this._tokens.length/4}getStartCharacter(e){return this._tokens[4*e+1]}getEndCharacter(e){return this._tokens[4*e+2]}getMetadata(e){return this._tokens[4*e+3]}}},77144:(e,t,n)=>{n.d(t,{s:()=>o});var i=n(55648),s=n(21707);class o{constructor(e){this._pieces=[],this._isComplete=!1,this._languageIdCodec=e}flush(){this._pieces=[],this._isComplete=!1}isEmpty(){return 0===this._pieces.length}set(e,t){this._pieces=e||[],this._isComplete=t}setPartial(e,t){let n=e;if(t.length>0){const i=t[0].getRange(),s=t[t.length-1].getRange();if(!i||!s)return e;n=e.plusRange(i).plusRange(s)}let s=null;for(let i=0,o=this._pieces.length;i<o;i++){const e=this._pieces[i];if(e.endLineNumber<n.startLineNumber)continue;if(e.startLineNumber>n.endLineNumber){s=s||{index:i};break}if(e.removeTokens(n),e.isEmpty()){this._pieces.splice(i,1),i--,o--;continue}if(e.endLineNumber<n.startLineNumber)continue;if(e.startLineNumber>n.endLineNumber){s=s||{index:i};continue}const[t,r]=e.split(n);t.isEmpty()?s=s||{index:i}:r.isEmpty()||(this._pieces.splice(i,1,t,r),i++,o++,s=s||{index:i})}return s=s||{index:this._pieces.length},t.length>0&&(this._pieces=i.nK(this._pieces,s.index,t)),n}isComplete(){return this._isComplete}addSparseTokens(e,t){if(0===t.getLineContent().length)return t;const n=this._pieces;if(0===n.length)return t;const i=n[o._findFirstPieceWithLine(n,e)].getLineTokens(e);if(!i)return t;const r=t.getCount(),a=i.getCount();let l=0;const h=[];let c=0,u=0;const d=(e,t)=>{e!==u&&(u=e,h[c++]=e,h[c++]=t)};for(let s=0;s<a;s++){const e=i.getStartCharacter(s),n=i.getEndCharacter(s),o=i.getMetadata(s),a=((1&o?2048:0)|(2&o?4096:0)|(4&o?8192:0)|(8&o?16384:0)|(16&o?16744448:0)|(32&o?4278190080:0))>>>0,h=~a>>>0;for(;l<r&&t.getEndOffset(l)<=e;)d(t.getEndOffset(l),t.getMetadata(l)),l++;for(l<r&&t.getStartOffset(l)<e&&d(e,t.getMetadata(l));l<r&&t.getEndOffset(l)<n;)d(t.getEndOffset(l),t.getMetadata(l)&h|o&a),l++;if(l<r)d(n,t.getMetadata(l)&h|o&a),t.getEndOffset(l)===n&&l++;else{const e=Math.min(Math.max(0,l-1),r-1);d(n,t.getMetadata(e)&h|o&a)}}for(;l<r;)d(t.getEndOffset(l),t.getMetadata(l)),l++;return new s.f(new Uint32Array(h),t.getLineContent(),this._languageIdCodec)}static _findFirstPieceWithLine(e,t){let n=0,i=e.length-1;for(;n<i;){let s=n+Math.floor((i-n)/2);if(e[s].endLineNumber<t)n=s+1;else{if(!(e[s].startLineNumber>t)){for(;s>n&&e[s-1].startLineNumber<=t&&t<=e[s-1].endLineNumber;)s--;return s}i=s-1}}return n}acceptEdit(e,t,n,i,s){for(const o of this._pieces)o.acceptEdit(e,t,n,i,s)}}},7679:(e,t,n)=>{n.d(t,{i:()=>s});var i=n(60704);class s extends i.jG{constructor(){super(),this._shouldRender=!0}shouldRender(){return this._shouldRender}forceShouldRender(){this._shouldRender=!0}setShouldRender(){this._shouldRender=!0}onDidRender(){this._shouldRender=!1}onCompositionStart(e){return!1}onCompositionEnd(e){return!1}onConfigurationChanged(e){return!1}onCursorStateChanged(e){return!1}onDecorationsChanged(e){return!1}onFlushed(e){return!1}onFocusChanged(e){return!1}onLanguageConfigurationChanged(e){return!1}onLineMappingChanged(e){return!1}onLinesChanged(e){return!1}onLinesDeleted(e){return!1}onLinesInserted(e){return!1}onRevealRangeRequest(e){return!1}onScrollChanged(e){return!1}onThemeChanged(e){return!1}onTokensChanged(e){return!1}onTokensColorsChanged(e){return!1}onZonesChanged(e){return!1}handleEvents(e){let t=!1;for(let n=0,i=e.length;n<i;n++){const i=e[n];switch(i.type){case 0:this.onCompositionStart(i)&&(t=!0);break;case 1:this.onCompositionEnd(i)&&(t=!0);break;case 2:this.onConfigurationChanged(i)&&(t=!0);break;case 3:this.onCursorStateChanged(i)&&(t=!0);break;case 4:this.onDecorationsChanged(i)&&(t=!0);break;case 5:this.onFlushed(i)&&(t=!0);break;case 6:this.onFocusChanged(i)&&(t=!0);break;case 7:this.onLanguageConfigurationChanged(i)&&(t=!0);break;case 8:this.onLineMappingChanged(i)&&(t=!0);break;case 9:this.onLinesChanged(i)&&(t=!0);break;case 10:this.onLinesDeleted(i)&&(t=!0);break;case 11:this.onLinesInserted(i)&&(t=!0);break;case 12:this.onRevealRangeRequest(i)&&(t=!0);break;case 13:this.onScrollChanged(i)&&(t=!0);break;case 15:this.onTokensChanged(i)&&(t=!0);break;case 14:this.onThemeChanged(i)&&(t=!0);break;case 16:this.onTokensColorsChanged(i)&&(t=!0);break;case 17:this.onZonesChanged(i)&&(t=!0);break;default:console.info("View received unknown event: "),console.info(i)}}t&&(this._shouldRender=!0)}}},50590:(e,t,n)=>{n.d(t,{E5:()=>h,Ey:()=>o,GL:()=>L,Hf:()=>f,Kb:()=>i,M7:()=>u,U:()=>C,Uf:()=>g,bu:()=>d,dQ:()=>s,fu:()=>w,h9:()=>a,lg:()=>p,qK:()=>c,rZ:()=>m,rg:()=>r,tO:()=>_,zv:()=>l});class i{constructor(){this.type=0}}class s{constructor(){this.type=1}}class o{constructor(e){this.type=2,this._source=e}hasChanged(e){return this._source.hasChanged(e)}}class r{constructor(e,t,n){this.selections=e,this.modelSelections=t,this.reason=n,this.type=3}}class a{constructor(e){this.type=4,e?(this.affectsMinimap=e.affectsMinimap,this.affectsOverviewRuler=e.affectsOverviewRuler,this.affectsGlyphMargin=e.affectsGlyphMargin,this.affectsLineNumber=e.affectsLineNumber):(this.affectsMinimap=!0,this.affectsOverviewRuler=!0,this.affectsGlyphMargin=!0,this.affectsLineNumber=!0)}}class l{constructor(){this.type=5}}class h{constructor(e){this.type=6,this.isFocused=e}}class c{constructor(){this.type=7}}class u{constructor(){this.type=8}}class d{constructor(e,t){this.fromLineNumber=e,this.count=t,this.type=9}}class g{constructor(e,t){this.type=10,this.fromLineNumber=e,this.toLineNumber=t}}class m{constructor(e,t){this.type=11,this.fromLineNumber=e,this.toLineNumber=t}}class f{constructor(e,t,n,i,s,o,r){this.source=e,this.minimalReveal=t,this.range=n,this.selections=i,this.verticalType=s,this.revealHorizontal=o,this.scrollType=r,this.type=12}}class p{constructor(e){this.type=13,this.scrollWidth=e.scrollWidth,this.scrollLeft=e.scrollLeft,this.scrollHeight=e.scrollHeight,this.scrollTop=e.scrollTop,this.scrollWidthChanged=e.scrollWidthChanged,this.scrollLeftChanged=e.scrollLeftChanged,this.scrollHeightChanged=e.scrollHeightChanged,this.scrollTopChanged=e.scrollTopChanged}}class _{constructor(e){this.theme=e,this.type=14}}class L{constructor(e){this.type=15,this.ranges=e}}class C{constructor(){this.type=16}}class w{constructor(){this.type=17}}},5551:(e,t,n)=>{n.d(t,{Bs:()=>a,d:()=>s});var i=n(24606);class s{constructor(e,t,n,i){this.startColumn=e,this.endColumn=t,this.className=n,this.type=i,this._lineDecorationBrand=void 0}static _equals(e,t){return e.startColumn===t.startColumn&&e.endColumn===t.endColumn&&e.className===t.className&&e.type===t.type}static equalsArr(e,t){const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(!s._equals(e[i],t[i]))return!1;return!0}static extractWrapped(e,t,n){if(0===e.length)return e;const i=t+1,o=n+1,r=n-t,a=[];let l=0;for(const h of e)h.endColumn<=i||h.startColumn>=o||(a[l++]=new s(Math.max(1,h.startColumn-i+1),Math.min(r+1,h.endColumn-i+1),h.className,h.type));return a}static filter(e,t,n,i){if(0===e.length)return[];const o=[];let r=0;for(let a=0,l=e.length;a<l;a++){const l=e[a],h=l.range;if(h.endLineNumber<t||h.startLineNumber>t)continue;if(h.isEmpty()&&(0===l.type||3===l.type))continue;const c=h.startLineNumber===t?h.startColumn:n,u=h.endLineNumber===t?h.endColumn:i;o[r++]=new s(c,u,l.inlineClassName,l.type)}return o}static _typeCompare(e,t){const n=[2,0,1,3];return n[e]-n[t]}static compare(e,t){if(e.startColumn!==t.startColumn)return e.startColumn-t.startColumn;if(e.endColumn!==t.endColumn)return e.endColumn-t.endColumn;const n=s._typeCompare(e.type,t.type);return 0!==n?n:e.className!==t.className?e.className<t.className?-1:1:0}}class o{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.className=n,this.metadata=i}}class r{constructor(){this.stopOffsets=[],this.classNames=[],this.metadata=[],this.count=0}static _metadata(e){let t=0;for(let n=0,i=e.length;n<i;n++)t|=e[n];return t}consumeLowerThan(e,t,n){for(;this.count>0&&this.stopOffsets[0]<e;){let e=0;for(;e+1<this.count&&this.stopOffsets[e]===this.stopOffsets[e+1];)e++;n.push(new o(t,this.stopOffsets[e],this.classNames.join(" "),r._metadata(this.metadata))),t=this.stopOffsets[e]+1,this.stopOffsets.splice(0,e+1),this.classNames.splice(0,e+1),this.metadata.splice(0,e+1),this.count-=e+1}return this.count>0&&t<e&&(n.push(new o(t,e-1,this.classNames.join(" "),r._metadata(this.metadata))),t=e),t}insert(e,t,n){if(0===this.count||this.stopOffsets[this.count-1]<=e)this.stopOffsets.push(e),this.classNames.push(t),this.metadata.push(n);else for(let i=0;i<this.count;i++)if(this.stopOffsets[i]>=e){this.stopOffsets.splice(i,0,e),this.classNames.splice(i,0,t),this.metadata.splice(i,0,n);break}this.count++}}class a{static normalize(e,t){if(0===t.length)return[];const n=[],s=new r;let o=0;for(let r=0,a=t.length;r<a;r++){const a=t[r];let l=a.startColumn,h=a.endColumn;const c=a.className,u=1===a.type?2:2===a.type?4:0;if(l>1){const t=e.charCodeAt(l-2);i.pc(t)&&l--}if(h>1){const t=e.charCodeAt(h-2);i.pc(t)&&h--}const d=l-1,g=h-2;o=s.consumeLowerThan(d,o,n),0===s.count&&(o=d),s.insert(g,c,u)}return s.consumeLowerThan(1073741824,o,n),n}}},63783:(e,t,n)=>{n.d(t,{wZ:()=>c,MT:()=>l,zL:()=>h,UW:()=>g,Md:()=>f});var i=n(17483),s=n(24606),o=n(1566),r=n(5551);class a{constructor(e,t,n,i){this.endIndex=e,this.type=t,this.metadata=n,this.containsRTL=i,this._linePartBrand=void 0}isWhitespace(){return!!(1&this.metadata)}isPseudoAfter(){return!!(4&this.metadata)}}class l{constructor(e,t){this.startOffset=e,this.endOffset=t}equals(e){return this.startOffset===e.startOffset&&this.endOffset===e.endOffset}}class h{constructor(e,t,n,i,s,o,a,l,h,c,u,d,g,m,f,p,_,L,C){this.useMonospaceOptimizations=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.continuesWithWrappedLine=i,this.isBasicASCII=s,this.containsRTL=o,this.fauxIndentLength=a,this.lineTokens=l,this.lineDecorations=h.sort(r.d.compare),this.tabSize=c,this.startVisibleColumn=u,this.spaceWidth=d,this.stopRenderingLineAfter=f,this.renderWhitespace="all"===p?4:"boundary"===p?1:"selection"===p?2:"trailing"===p?3:0,this.renderControlCharacters=_,this.fontLigatures=L,this.selectionsOnLine=C&&C.sort(((e,t)=>e.startOffset<t.startOffset?-1:1));Math.abs(m-d)<Math.abs(g-d)?(this.renderSpaceWidth=m,this.renderSpaceCharCode=11825):(this.renderSpaceWidth=g,this.renderSpaceCharCode=183)}sameSelection(e){if(null===this.selectionsOnLine)return null===e;if(null===e)return!1;if(e.length!==this.selectionsOnLine.length)return!1;for(let t=0;t<this.selectionsOnLine.length;t++)if(!this.selectionsOnLine[t].equals(e[t]))return!1;return!0}equals(e){return this.useMonospaceOptimizations===e.useMonospaceOptimizations&&this.canUseHalfwidthRightwardsArrow===e.canUseHalfwidthRightwardsArrow&&this.lineContent===e.lineContent&&this.continuesWithWrappedLine===e.continuesWithWrappedLine&&this.isBasicASCII===e.isBasicASCII&&this.containsRTL===e.containsRTL&&this.fauxIndentLength===e.fauxIndentLength&&this.tabSize===e.tabSize&&this.startVisibleColumn===e.startVisibleColumn&&this.spaceWidth===e.spaceWidth&&this.renderSpaceWidth===e.renderSpaceWidth&&this.renderSpaceCharCode===e.renderSpaceCharCode&&this.stopRenderingLineAfter===e.stopRenderingLineAfter&&this.renderWhitespace===e.renderWhitespace&&this.renderControlCharacters===e.renderControlCharacters&&this.fontLigatures===e.fontLigatures&&r.d.equalsArr(this.lineDecorations,e.lineDecorations)&&this.lineTokens.equals(e.lineTokens)&&this.sameSelection(e.selectionsOnLine)}}class c{constructor(e,t){this.partIndex=e,this.charIndex=t}}class u{static getPartIndex(e){return(4294901760&e)>>>16}static getCharIndex(e){return(65535&e)>>>0}constructor(e,t){this.length=e,this._data=new Uint32Array(this.length),this._horizontalOffset=new Uint32Array(this.length)}setColumnInfo(e,t,n,i){const s=(t<<16|n)>>>0;this._data[e-1]=s,this._horizontalOffset[e-1]=i}getHorizontalOffset(e){return 0===this._horizontalOffset.length?0:this._horizontalOffset[e-1]}charOffsetToPartData(e){return 0===this.length?0:e<0?this._data[0]:e>=this.length?this._data[this.length-1]:this._data[e]}getDomPosition(e){const t=this.charOffsetToPartData(e-1),n=u.getPartIndex(t),i=u.getCharIndex(t);return new c(n,i)}getColumn(e,t){return this.partDataToCharOffset(e.partIndex,t,e.charIndex)+1}partDataToCharOffset(e,t,n){if(0===this.length)return 0;const i=(e<<16|n)>>>0;let s=0,o=this.length-1;for(;s+1<o;){const e=s+o>>>1,t=this._data[e];if(t===i)return e;t>i?o=e:s=e}if(s===o)return s;const r=this._data[s],a=this._data[o];if(r===i)return s;if(a===i)return o;const l=u.getPartIndex(r),h=u.getCharIndex(r);let c;c=l!==u.getPartIndex(a)?t:u.getCharIndex(a);return n-h<=c-n?s:o}}class d{constructor(e,t,n){this._renderLineOutputBrand=void 0,this.characterMapping=e,this.containsRTL=t,this.containsForeignElements=n}}function g(e,t){if(0===e.lineContent.length){if(e.lineDecorations.length>0){t.appendString("<span>");let n=0,i=0,s=0;for(const r of e.lineDecorations)1!==r.type&&2!==r.type||(t.appendString('<span class="'),t.appendString(r.className),t.appendString('"></span>'),1===r.type&&(s|=1,n++),2===r.type&&(s|=2,i++));t.appendString("</span>");const o=new u(1,n+i);return o.setColumnInfo(1,n,0,0),new d(o,!1,s)}return t.appendString("<span><span></span></span>"),new d(new u(0,0),!1,0)}return function(e,t){const n=e.fontIsMonospace,o=e.canUseHalfwidthRightwardsArrow,r=e.containsForeignElements,a=e.lineContent,l=e.len,h=e.isOverflowing,c=e.overflowingCharCount,g=e.parts,m=e.fauxIndentLength,f=e.tabSize,p=e.startVisibleColumn,C=e.containsRTL,w=e.spaceWidth,b=e.renderSpaceCharCode,v=e.renderWhitespace,V=e.renderControlCharacters,N=new u(l+1,g.length);let I=!1,M=0,k=p,S=0,P=0,T=0;C?t.appendString('<span dir="ltr">'):t.appendString("<span>");for(let i=0,u=g.length;i<u;i++){const e=g[i],h=e.endIndex,c=e.type,u=e.containsRTL,d=0!==v&&e.isWhitespace(),p=d&&!n&&("mtkw"===c||!r),C=M===h&&e.isPseudoAfter();if(S=0,t.appendString("<span "),u&&t.appendString('style="unicode-bidi:isolate" '),t.appendString('class="'),t.appendString(p?"mtkz":c),t.appendASCIICharCode(34),d){let e=0;{let t=M,n=k;for(;t<h;t++){const i=0|(9===a.charCodeAt(t)?f-n%f:1);e+=i,t>=m&&(n+=i)}}for(p&&(t.appendString(' style="width:'),t.appendString(String(w*e)),t.appendString('px"')),t.appendASCIICharCode(62);M<h;M++){N.setColumnInfo(M+1,i-T,S,P),T=0;let e,n;if(9===a.charCodeAt(M)){e=f-k%f|0,n=e,!o||n>1?t.appendCharCode(8594):t.appendCharCode(65515);for(let e=2;e<=n;e++)t.appendCharCode(160)}else e=2,n=1,t.appendCharCode(b),t.appendCharCode(8204);S+=e,P+=n,M>=m&&(k+=n)}}else for(t.appendASCIICharCode(62);M<h;M++){N.setColumnInfo(M+1,i-T,S,P),T=0;const e=a.charCodeAt(M);let n=1,o=1;switch(e){case 9:n=f-k%f,o=n;for(let e=1;e<=n;e++)t.appendCharCode(160);break;case 32:t.appendCharCode(160);break;case 60:t.appendString("&lt;");break;case 62:t.appendString("&gt;");break;case 38:t.appendString("&amp;");break;case 0:V?t.appendCharCode(9216):t.appendString("&#00;");break;case 65279:case 8232:case 8233:case 133:t.appendCharCode(65533);break;default:s.ne(e)&&o++,V&&e<32?t.appendCharCode(9216+e):V&&127===e?t.appendCharCode(9249):V&&_(e)?(t.appendString("[U+"),t.appendString(L(e)),t.appendString("]"),n=8,o=n):t.appendCharCode(e)}S+=n,P+=o,M>=m&&(k+=o)}C?T++:T=0,M>=l&&!I&&e.isPseudoAfter()&&(I=!0,N.setColumnInfo(M+1,i,S,P)),t.appendString("</span>")}I||N.setColumnInfo(l+1,g.length-1,S,P);h&&(t.appendString('<span class="mtkoverflow">'),t.appendString(i.kg("showMore","Show more ({0})",function(e){if(e<1024)return i.kg("overflow.chars","{0} chars",e);if(e<1048576)return"".concat((e/1024).toFixed(1)," KB");return"".concat((e/1024/1024).toFixed(1)," MB")}(c))),t.appendString("</span>"));return t.appendString("</span>"),new d(N,C,r)}(function(e){const t=e.lineContent;let n,i,o;-1!==e.stopRenderingLineAfter&&e.stopRenderingLineAfter<t.length?(n=!0,i=t.length-e.stopRenderingLineAfter,o=e.stopRenderingLineAfter):(n=!1,i=0,o=t.length);let l=function(e,t,n,i,o){const r=[];let l=0;i>0&&(r[l++]=new a(i,"",0,!1));let h=i;for(let c=0,u=n.getCount();c<u;c++){const u=n.getEndOffset(c);if(u<=i)continue;const d=n.getClassName(c);if(u>=o){const n=!!t&&s.E_(e.substring(h,o));r[l++]=new a(o,d,0,n);break}const g=!!t&&s.E_(e.substring(h,u));r[l++]=new a(u,d,0,g),h=u}return r}(t,e.containsRTL,e.lineTokens,e.fauxIndentLength,o);e.renderControlCharacters&&!e.isBasicASCII&&(l=function(e,t){const n=[];let i=new a(0,"",0,!1),s=0;for(const o of t){const t=o.endIndex;for(;s<t;s++){_(e.charCodeAt(s))&&(s>i.endIndex&&(i=new a(s,o.type,o.metadata,o.containsRTL),n.push(i)),i=new a(s+1,"mtkcontrol",o.metadata,!1),n.push(i))}s>i.endIndex&&(i=new a(t,o.type,o.metadata,o.containsRTL),n.push(i))}return n}(t,l));(4===e.renderWhitespace||1===e.renderWhitespace||2===e.renderWhitespace&&e.selectionsOnLine||3===e.renderWhitespace&&!e.continuesWithWrappedLine)&&(l=function(e,t,n,i){const o=e.continuesWithWrappedLine,r=e.fauxIndentLength,l=e.tabSize,h=e.startVisibleColumn,c=e.useMonospaceOptimizations,u=e.selectionsOnLine,d=1===e.renderWhitespace,g=3===e.renderWhitespace,m=e.renderSpaceWidth!==e.spaceWidth,f=[];let p=0,_=0,L=i[_].type,C=i[_].containsRTL,w=i[_].endIndex;const b=i.length;let v,V=!1,N=s.HG(t);-1===N?(V=!0,N=n,v=n):v=s.lT(t);let I=!1,M=0,k=u&&u[M],S=h%l;for(let T=r;T<n;T++){const e=t.charCodeAt(T);let o;if(k&&T>=k.endOffset&&(M++,k=u&&u[M]),T<N||T>v)o=!0;else if(9===e)o=!0;else if(32===e)if(d)if(I)o=!0;else{const e=T+1<n?t.charCodeAt(T+1):0;o=32===e||9===e}else o=!0;else o=!1;if(o&&u&&(o=!!k&&k.startOffset<=T&&k.endOffset>T),o&&g&&(o=V||T>v),o&&C&&T>=N&&T<=v&&(o=!1),I){if(!o||!c&&S>=l){if(m){for(let e=(p>0?f[p-1].endIndex:r)+1;e<=T;e++)f[p++]=new a(e,"mtkw",1,!1)}else f[p++]=new a(T,"mtkw",1,!1);S%=l}}else(T===w||o&&T>r)&&(f[p++]=new a(T,L,0,C),S%=l);for(9===e?S=l:s.ne(e)?S+=2:S++,I=o;T===w&&(_++,_<b);)L=i[_].type,C=i[_].containsRTL,w=i[_].endIndex}let P=!1;if(I)if(o&&d){const e=n>0?t.charCodeAt(n-1):0,i=n>1?t.charCodeAt(n-2):0;32===e&&32!==i&&9!==i||(P=!0)}else P=!0;if(P)if(m){for(let e=(p>0?f[p-1].endIndex:r)+1;e<=n;e++)f[p++]=new a(e,"mtkw",1,!1)}else f[p++]=new a(n,"mtkw",1,!1);else f[p++]=new a(n,L,0,C);return f}(e,t,o,l));let h=0;if(e.lineDecorations.length>0){for(let t=0,n=e.lineDecorations.length;t<n;t++){const n=e.lineDecorations[t];3===n.type||1===n.type?h|=1:2===n.type&&(h|=2)}l=function(e,t,n,i){i.sort(r.d.compare);const s=r.Bs.normalize(e,i),o=s.length;let l=0;const h=[];let c=0,u=0;for(let r=0,g=n.length;r<g;r++){const e=n[r],t=e.endIndex,i=e.type,d=e.metadata,g=e.containsRTL;for(;l<o&&s[l].startOffset<t;){const e=s[l];if(e.startOffset>u&&(u=e.startOffset,h[c++]=new a(u,i,d,g)),!(e.endOffset+1<=t)){u=t,h[c++]=new a(u,i+" "+e.className,d|e.metadata,g);break}u=e.endOffset+1,h[c++]=new a(u,i+" "+e.className,d|e.metadata,g),l++}t>u&&(u=t,h[c++]=new a(u,i,d,g))}const d=n[n.length-1].endIndex;if(l<o&&s[l].startOffset===d)for(;l<o&&s[l].startOffset===d;){const e=s[l];h[c++]=new a(u,e.className,e.metadata,!1),l++}return h}(t,0,l,e.lineDecorations)}e.containsRTL||(l=function(e,t,n){let i=0;const s=[];let o=0;if(n)for(let r=0,l=t.length;r<l;r++){const n=t[r],l=n.endIndex;if(i+50<l){const t=n.type,r=n.metadata,h=n.containsRTL;let c=-1,u=i;for(let n=i;n<l;n++)32===e.charCodeAt(n)&&(c=n),-1!==c&&n-u>=50&&(s[o++]=new a(c+1,t,r,h),u=c+1,c=-1);u!==l&&(s[o++]=new a(l,t,r,h))}else s[o++]=n;i=l}else for(let r=0,l=t.length;r<l;r++){const e=t[r],n=e.endIndex,l=n-i;if(l>50){const t=e.type,r=e.metadata,h=e.containsRTL,c=Math.ceil(l/50);for(let e=1;e<c;e++){const n=i+50*e;s[o++]=new a(n,t,r,h)}s[o++]=new a(n,t,r,h)}else s[o++]=e;i=n}return s}(t,l,!e.isBasicASCII||e.fontLigatures));return new p(e.useMonospaceOptimizations,e.canUseHalfwidthRightwardsArrow,t,o,n,i,l,h,e.fauxIndentLength,e.tabSize,e.startVisibleColumn,e.containsRTL,e.spaceWidth,e.renderSpaceCharCode,e.renderWhitespace,e.renderControlCharacters)}(e),t)}class m{constructor(e,t,n,i){this.characterMapping=e,this.html=t,this.containsRTL=n,this.containsForeignElements=i}}function f(e){const t=new o.fe(1e4),n=g(e,t);return new m(n.characterMapping,t.build(),n.containsRTL,n.containsForeignElements)}class p{constructor(e,t,n,i,s,o,r,a,l,h,c,u,d,g,m,f){this.fontIsMonospace=e,this.canUseHalfwidthRightwardsArrow=t,this.lineContent=n,this.len=i,this.isOverflowing=s,this.overflowingCharCount=o,this.parts=r,this.containsForeignElements=a,this.fauxIndentLength=l,this.tabSize=h,this.startVisibleColumn=c,this.containsRTL=u,this.spaceWidth=d,this.renderSpaceCharCode=g,this.renderWhitespace=m,this.renderControlCharacters=f}}function _(e){return e<32?9!==e:127===e||(e>=8234&&e<=8238||e>=8294&&e<=8297||e>=8206&&e<=8207||1564===e)}function L(e){return e.toString(16).toUpperCase().padStart(4,"0")}},41076:(e,t,n)=>{n.d(t,{P:()=>s});var i=n(38499);class s{constructor(e,t,n,s){this.selections=e,this.startLineNumber=0|t.startLineNumber,this.endLineNumber=0|t.endLineNumber,this.relativeVerticalOffset=t.relativeVerticalOffset,this.bigNumbersDelta=0|t.bigNumbersDelta,this.lineHeight=0|t.lineHeight,this.whitespaceViewportData=n,this._model=s,this.visibleRange=new i.Q(t.startLineNumber,this._model.getLineMinColumn(t.startLineNumber),t.endLineNumber,this._model.getLineMaxColumn(t.endLineNumber))}getViewLineRenderingData(e){return this._model.getViewportViewLineRenderingData(this.visibleRange,e)}getDecorationsInViewport(){return this._model.getDecorationsInViewport(this.visibleRange)}}},77570:(e,t,n)=>{n.d(t,{GP:()=>l,LM:()=>r,Uv:()=>g,kI:()=>c,nt:()=>a,or:()=>u,qL:()=>h,vo:()=>d});var i=n(55648),s=n(24606),o=n(38499);class r{constructor(e,t,n,i){this._viewportBrand=void 0,this.top=0|e,this.left=0|t,this.width=0|n,this.height=0|i}}class a{constructor(e,t){this.tabSize=e,this.data=t}}class l{constructor(e,t,n,i,s,o,r){this._viewLineDataBrand=void 0,this.content=e,this.continuesWithWrappedLine=t,this.minColumn=n,this.maxColumn=i,this.startVisibleColumn=s,this.tokens=o,this.inlineDecorations=r}}class h{constructor(e,t,n,i,s,o,r,a,l,c){this.minColumn=e,this.maxColumn=t,this.content=n,this.continuesWithWrappedLine=i,this.isBasicASCII=h.isBasicASCII(n,o),this.containsRTL=h.containsRTL(n,this.isBasicASCII,s),this.tokens=r,this.inlineDecorations=a,this.tabSize=l,this.startVisibleColumn=c}static isBasicASCII(e,t){return!t||s.aC(e)}static containsRTL(e,t,n){return!(t||!n)&&s.E_(e)}}class c{constructor(e,t,n){this.range=e,this.inlineClassName=t,this.type=n}}class u{constructor(e,t,n,i){this.startOffset=e,this.endOffset=t,this.inlineClassName=n,this.inlineClassNameAffectsLetterSpacing=i}toInlineDecoration(e){return new c(new o.Q(e,this.startOffset+1,e,this.endOffset+1),this.inlineClassName,this.inlineClassNameAffectsLetterSpacing?3:0)}}class d{constructor(e,t){this._viewModelDecorationBrand=void 0,this.range=e,this.options=t}}class g{constructor(e,t,n){this.color=e,this.zIndex=t,this.data=n}static compareByRenderingProps(e,t){return e.zIndex===t.zIndex?e.color<t.color?-1:e.color>t.color?1:0:e.zIndex-t.zIndex}static equals(e,t){return e.color===t.color&&e.zIndex===t.zIndex&&i.aI(e.data,t.data)}static equalsArr(e,t){return i.aI(e,t,g.equals)}}},37289:(e,t,n)=>{n.d(t,{v:()=>a});var i=n(4640),s=n(60704),o=n(29766),r=n(83011);class a extends s.jG{static getInstance(){return this._INSTANCE||(this._INSTANCE=(0,s.lC)(new a)),this._INSTANCE}constructor(){super(),this._onDidChange=new i.vl,this.onDidChange=this._onDidChange.event,this._updateColorMap(),this._register(r.dG.onDidChange((e=>{e.changedColorMap&&this._updateColorMap()})))}_updateColorMap(){const e=r.dG.getColorMap();if(!e)return this._colors=[o.D.Empty],void(this._backgroundIsLight=!0);this._colors=[o.D.Empty];for(let n=1;n<e.length;n++){const t=e[n].rgba;this._colors[n]=new o.D(t.r,t.g,t.b,Math.round(255*t.a))}const t=e[2].getRelativeLuminance();this._backgroundIsLight=t>=.5,this._onDidChange.fire(void 0)}getColor(e){return(e<1||e>=this._colors.length)&&(e=2),this._colors[e]}backgroundIsLight(){return this._backgroundIsLight}}a._INSTANCE=null},8749:(e,t,n)=>{n.d(t,{J:()=>a});var i=n(24606),s=n(60548),o=n(80709),r=n(70706);class a{static create(e){return new a(e.get(134),e.get(133))}constructor(e,t){this.classifier=new l(e,t)}createLineBreaksComputer(e,t,n,i,s){const o=[],r=[],a=[];return{addRequest:(e,t,n)=>{o.push(e),r.push(t),a.push(n)},finalize:()=>{const l=e.typicalFullwidthCharacterWidth/e.typicalHalfwidthCharacterWidth,g=[];for(let e=0,h=o.length;e<h;e++){const h=r[e],c=a[e];!c||c.injectionOptions||h?g[e]=d(this.classifier,o[e],h,t,n,l,i,s):g[e]=u(this.classifier,c,o[e],t,n,l,i,s)}return h.length=0,c.length=0,g}}}}class l extends s.V{constructor(e,t){super(0);for(let n=0;n<e.length;n++)this.set(e.charCodeAt(n),1);for(let n=0;n<t.length;n++)this.set(t.charCodeAt(n),2)}get(e){return e>=0&&e<256?this._asciiMap[e]:e>=12352&&e<=12543||e>=13312&&e<=19903||e>=19968&&e<=40959?3:this._map.get(e)||this._defaultValue}}let h=[],c=[];function u(e,t,n,s,o,r,a,l){if(-1===o)return null;const u=n.length;if(u<=1)return null;const d="keepAll"===l,m=t.breakOffsets,_=t.breakOffsetsVisibleColumn,L=p(n,s,o,r,a),C=o-L,w=h,b=c;let v=0,V=0,N=0,I=o;const M=m.length;let k=0;if(k>=0){let e=Math.abs(_[k]-I);for(;k+1<M;){const t=Math.abs(_[k+1]-I);if(t>=e)break;e=t,k++}}for(;k<M;){let t=k<0?0:m[k],o=k<0?0:_[k];V>t&&(t=V,o=N);let a=0,l=0,h=0,c=0;if(o<=I){let p=o,L=0===t?0:n.charCodeAt(t-1),N=0===t?0:e.get(L),M=!0;for(let o=t;o<u;o++){const t=o,u=n.charCodeAt(o);let m,_;if(i.pc(u)?(o++,m=0,_=2):(m=e.get(u),_=g(u,p,s,r)),t>V&&f(L,N,u,m,d)&&(a=t,l=p),p+=_,p>I){t>V?(h=t,c=p-_):(h=o+1,c=p),p-l>C&&(a=0),M=!1;break}L=u,N=m}if(M){v>0&&(w[v]=m[m.length-1],b[v]=_[m.length-1],v++);break}}if(0===a){let u=o,m=n.charCodeAt(t),p=e.get(m),_=!1;for(let s=t-1;s>=V;s--){const t=s+1,o=n.charCodeAt(s);if(9===o){_=!0;break}let g,L;if(i.LJ(o)?(s--,g=0,L=2):(g=e.get(o),L=i.ne(o)?r:1),u<=I){if(0===h&&(h=t,c=u),u<=I-C)break;if(f(o,g,m,p,d)){a=t,l=u;break}}u-=L,m=o,p=g}if(0!==a){const e=C-(c-l);if(e<=s){const t=n.charCodeAt(h);let o;o=i.pc(t)?2:g(t,c,s,r),e-o<0&&(a=0)}}if(_){k--;continue}}if(0===a&&(a=h,l=c),a<=V){const e=n.charCodeAt(V);i.pc(e)?(a=V+2,l=N+2):(a=V+1,l=N+g(e,N,s,r))}for(V=a,w[v]=a,N=l,b[v]=l,v++,I=l+C;k<0||k<M&&_[k]<l;)k++;let p=Math.abs(_[k]-I);for(;k+1<M;){const e=Math.abs(_[k+1]-I);if(e>=p)break;p=e,k++}}return 0===v?null:(w.length=v,b.length=v,h=t.breakOffsets,c=t.breakOffsetsVisibleColumn,t.breakOffsets=w,t.breakOffsetsVisibleColumn=b,t.wrappedTextIndentLength=L,t)}function d(e,t,n,s,a,l,h,c){const u=o.uK.applyInjectedText(t,n);let d,m;if(n&&n.length>0?(d=n.map((e=>e.options)),m=n.map((e=>e.column-1))):(d=null,m=null),-1===a)return d?new r.R_(m,d,[u.length],[],0):null;const _=u.length;if(_<=1)return d?new r.R_(m,d,[u.length],[],0):null;const L="keepAll"===c,C=p(u,s,a,l,h),w=a-C,b=[],v=[];let V=0,N=0,I=0,M=a,k=u.charCodeAt(0),S=e.get(k),P=g(k,0,s,l),T=1;i.pc(k)&&(P+=1,k=u.charCodeAt(1),S=e.get(k),T++);for(let o=T;o<_;o++){const t=o,n=u.charCodeAt(o);let r,a;i.pc(n)?(o++,r=0,a=2):(r=e.get(n),a=g(n,P,s,l)),f(k,S,n,r,L)&&(N=t,I=P),P+=a,P>M&&((0===N||P-I>w)&&(N=t,I=P-a),b[V]=N,v[V]=I,V++,M=I+w,N=0),k=n,S=r}return 0!==V||n&&0!==n.length?(b[V]=_,v[V]=P,new r.R_(m,d,b,v,C)):null}function g(e,t,n,s){return 9===e?n-t%n:i.ne(e)||e<32?s:1}function m(e,t){return t-e%t}function f(e,t,n,i,s){return 32!==n&&(2===t&&2!==i||1!==t&&1===i||!s&&3===t&&2!==i||!s&&3===i&&1!==t)}function p(e,t,n,s,o){let r=0;if(0!==o){const a=i.HG(e);if(-1!==a){for(let n=0;n<a;n++){r+=9===e.charCodeAt(n)?m(r,t):1}const i=3===o?2:2===o?1:0;for(let e=0;e<i;e++){r+=m(r,t)}r+s>n&&(r=0)}}return r}},58861:(e,t,n)=>{n.d(t,{iE:()=>s,rW:()=>o});class i{constructor(e,t,n){this._colorZoneBrand=void 0,this.from=0|e,this.to=0|t,this.colorId=0|n}static compare(e,t){return e.colorId===t.colorId?e.from===t.from?e.to-t.to:e.from-t.from:e.colorId-t.colorId}}class s{constructor(e,t,n,i){this._overviewRulerZoneBrand=void 0,this.startLineNumber=e,this.endLineNumber=t,this.heightInLines=n,this.color=i,this._colorZone=null}static compare(e,t){return e.color===t.color?e.startLineNumber===t.startLineNumber?e.heightInLines===t.heightInLines?e.endLineNumber-t.endLineNumber:e.heightInLines-t.heightInLines:e.startLineNumber-t.startLineNumber:e.color<t.color?-1:1}setColorZone(e){this._colorZone=e}getColorZones(){return this._colorZone}}class o{constructor(e){this._getVerticalOffsetForLine=e,this._zones=[],this._colorZonesInvalid=!1,this._lineHeight=0,this._domWidth=0,this._domHeight=0,this._outerHeight=0,this._pixelRatio=1,this._lastAssignedId=0,this._color2Id=Object.create(null),this._id2Color=[]}getId2Color(){return this._id2Color}setZones(e){this._zones=e,this._zones.sort(s.compare)}setLineHeight(e){return this._lineHeight!==e&&(this._lineHeight=e,this._colorZonesInvalid=!0,!0)}setPixelRatio(e){this._pixelRatio=e,this._colorZonesInvalid=!0}getDOMWidth(){return this._domWidth}getCanvasWidth(){return this._domWidth*this._pixelRatio}setDOMWidth(e){return this._domWidth!==e&&(this._domWidth=e,this._colorZonesInvalid=!0,!0)}getDOMHeight(){return this._domHeight}getCanvasHeight(){return this._domHeight*this._pixelRatio}setDOMHeight(e){return this._domHeight!==e&&(this._domHeight=e,this._colorZonesInvalid=!0,!0)}getOuterHeight(){return this._outerHeight}setOuterHeight(e){return this._outerHeight!==e&&(this._outerHeight=e,this._colorZonesInvalid=!0,!0)}resolveColorZones(){const e=this._colorZonesInvalid,t=Math.floor(this._lineHeight),n=Math.floor(this.getCanvasHeight()),s=n/Math.floor(this._outerHeight),o=Math.floor(4*this._pixelRatio/2),r=[];for(let a=0,l=this._zones.length;a<l;a++){const l=this._zones[a];if(!e){const e=l.getColorZones();if(e){r.push(e);continue}}const h=this._getVerticalOffsetForLine(l.startLineNumber),c=0===l.heightInLines?this._getVerticalOffsetForLine(l.endLineNumber)+t:h+l.heightInLines*t,u=Math.floor(s*h),d=Math.floor(s*c);let g=Math.floor((u+d)/2),m=d-g;m<o&&(m=o),g-m<0&&(g=m),g+m>n&&(g=n-m);const f=l.color;let p=this._color2Id[f];p||(p=++this._lastAssignedId,this._color2Id[f]=p,this._id2Color[p]=f);const _=new i(g-m,g+m,p);l.setColorZone(_),r.push(_)}return this._colorZonesInvalid=!1,r.sort(i.compare),r}}},57837:(e,t,n)=>{n.d(t,{r:()=>s});var i=n(52778);class s{constructor(e,t,n){this.configuration=e,this.theme=new i.v(t),this.viewModel=n,this.viewLayout=n.viewLayout}addEventHandler(e){this.viewModel.addViewEventHandler(e)}removeEventHandler(e){this.viewModel.removeViewEventHandler(e)}}},23628:(e,t,n)=>{n.d(t,{GN:()=>l,UB:()=>a,a6:()=>h,wc:()=>c});var i=n(20603),s=n(38499),o=n(77570),r=n(60542);class a{constructor(e,t,n,i,s){this.editorId=e,this.model=t,this.configuration=n,this._linesCollection=i,this._coordinatesConverter=s,this._decorationsCache=Object.create(null),this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}_clearCachedModelDecorationsResolver(){this._cachedModelDecorationsResolver=null,this._cachedModelDecorationsResolverViewRange=null}dispose(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}reset(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onModelDecorationsChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}onLineMappingChanged(){this._decorationsCache=Object.create(null),this._clearCachedModelDecorationsResolver()}_getOrCreateViewModelDecoration(e){const t=e.id;let n=this._decorationsCache[t];if(!n){const r=e.range,a=e.options;let l;if(a.isWholeLine){const e=this._coordinatesConverter.convertModelPositionToViewPosition(new i.y(r.startLineNumber,1),0,!1,!0),t=this._coordinatesConverter.convertModelPositionToViewPosition(new i.y(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber)),1);l=new s.Q(e.lineNumber,e.column,t.lineNumber,t.column)}else l=this._coordinatesConverter.convertModelRangeToViewRange(r,1);n=new o.vo(l,a),this._decorationsCache[t]=n}return n}getMinimapDecorationsInRange(e){return this._getDecorationsInRange(e,!0,!1).decorations}getDecorationsViewportData(e){let t=null!==this._cachedModelDecorationsResolver;return t=t&&e.equalsRange(this._cachedModelDecorationsResolverViewRange),t||(this._cachedModelDecorationsResolver=this._getDecorationsInRange(e,!1,!1),this._cachedModelDecorationsResolverViewRange=e),this._cachedModelDecorationsResolver}getInlineDecorationsOnLine(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const i=new s.Q(e,this._linesCollection.getViewLineMinColumn(e),e,this._linesCollection.getViewLineMaxColumn(e));return this._getDecorationsInRange(i,t,n).inlineDecorations[0]}_getDecorationsInRange(e,t,n){const i=this._linesCollection.getDecorationsInRange(e,this.editorId,(0,r.$C)(this.configuration.options),t,n),a=e.startLineNumber,h=e.endLineNumber,c=[];let u=0;const d=[];for(let s=a;s<=h;s++)d[s-a]=[];for(let r=0,g=i.length;r<g;r++){const e=i[r],t=e.options;if(!l(this.model,e))continue;const n=this._getOrCreateViewModelDecoration(e),g=n.range;if(c[u++]=n,t.inlineClassName){const e=new o.kI(g,t.inlineClassName,t.inlineClassNameAffectsLetterSpacing?3:0),n=Math.max(a,g.startLineNumber),i=Math.min(h,g.endLineNumber);for(let t=n;t<=i;t++)d[t-a].push(e)}if(t.beforeContentClassName&&a<=g.startLineNumber&&g.startLineNumber<=h){const e=new o.kI(new s.Q(g.startLineNumber,g.startColumn,g.startLineNumber,g.startColumn),t.beforeContentClassName,1);d[g.startLineNumber-a].push(e)}if(t.afterContentClassName&&a<=g.endLineNumber&&g.endLineNumber<=h){const e=new o.kI(new s.Q(g.endLineNumber,g.endColumn,g.endLineNumber,g.endColumn),t.afterContentClassName,2);d[g.endLineNumber-a].push(e)}}return{decorations:c,inlineDecorations:d}}}function l(e,t){return(!t.options.hideInCommentTokens||!h(e,t))&&(!t.options.hideInStringTokens||!c(e,t))}function h(e,t){return u(e,t.range,(e=>1===e))}function c(e,t){return u(e,t.range,(e=>2===e))}function u(e,t,n){for(let i=t.startLineNumber;i<=t.endLineNumber;i++){const s=e.tokenization.getLineTokens(i),o=i===t.startLineNumber,r=i===t.endLineNumber;let a=o?s.findTokenIndexAtOffset(t.startColumn-1):0;for(;a<s.getCount();){if(r){if(s.getStartOffset(a)>t.endColumn-1)break}if(!n(s.getStandardTokenType(a)))return!1;a++}}return!0}},60240:(e,t,n)=>{n.d(t,{J:()=>J});var i=n(55648),s=n(78112),o=n(5803),r=n(60704),a=n(22057),l=n(24606),h=n(60542),c=n(57936),u=n(85021),d=n(20603),g=n(38499),m=n(80709),f=n(83011),p=n(32487),_=n(82868),L=n(50590),C=n(4640),w=n(79103);class b{constructor(){this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[]}insert(e){this._hasPending=!0,this._inserts.push(e)}change(e){this._hasPending=!0,this._changes.push(e)}remove(e){this._hasPending=!0,this._removes.push(e)}mustCommit(){return this._hasPending}commit(e){if(!this._hasPending)return;const t=this._inserts,n=this._changes,i=this._removes;this._hasPending=!1,this._inserts=[],this._changes=[],this._removes=[],e._commitPendingChanges(t,n,i)}}class v{constructor(e,t,n,i,s){this.id=e,this.afterLineNumber=t,this.ordinal=n,this.height=i,this.minWidth=s,this.prefixSum=0}}class V{constructor(e,t,n,i){this._instanceId=l.tk(++V.INSTANCE_COUNT),this._pendingChanges=new b,this._lastWhitespaceId=0,this._arr=[],this._prefixSumValidIndex=-1,this._minWidth=-1,this._lineCount=e,this._lineHeight=t,this._paddingTop=n,this._paddingBottom=i}static findInsertionIndex(e,t,n){let i=0,s=e.length;for(;i<s;){const o=i+s>>>1;t===e[o].afterLineNumber?n<e[o].ordinal?s=o:i=o+1:t<e[o].afterLineNumber?s=o:i=o+1}return i}setLineHeight(e){this._checkPendingChanges(),this._lineHeight=e}setPadding(e,t){this._paddingTop=e,this._paddingBottom=t}onFlushed(e){this._checkPendingChanges(),this._lineCount=e}changeWhitespace(e){let t=!1;try{e({insertWhitespace:(e,n,i,s)=>{t=!0,e|=0,n|=0,i|=0,s|=0;const o=this._instanceId+ ++this._lastWhitespaceId;return this._pendingChanges.insert(new v(o,e,n,i,s)),o},changeOneWhitespace:(e,n,i)=>{t=!0,n|=0,i|=0,this._pendingChanges.change({id:e,newAfterLineNumber:n,newHeight:i})},removeWhitespace:e=>{t=!0,this._pendingChanges.remove({id:e})}})}finally{this._pendingChanges.commit(this)}return t}_commitPendingChanges(e,t,n){if((e.length>0||n.length>0)&&(this._minWidth=-1),e.length+t.length+n.length<=1){for(const t of e)this._insertWhitespace(t);for(const e of t)this._changeOneWhitespace(e.id,e.newAfterLineNumber,e.newHeight);for(const e of n){const t=this._findWhitespaceIndex(e.id);-1!==t&&this._removeWhitespace(t)}return}const i=new Set;for(const a of n)i.add(a.id);const s=new Map;for(const a of t)s.set(a.id,a);const o=e=>{const t=[];for(const n of e)if(!i.has(n.id)){if(s.has(n.id)){const e=s.get(n.id);n.afterLineNumber=e.newAfterLineNumber,n.height=e.newHeight}t.push(n)}return t},r=o(this._arr).concat(o(e));r.sort(((e,t)=>e.afterLineNumber===t.afterLineNumber?e.ordinal-t.ordinal:e.afterLineNumber-t.afterLineNumber)),this._arr=r,this._prefixSumValidIndex=-1}_checkPendingChanges(){this._pendingChanges.mustCommit()&&this._pendingChanges.commit(this)}_insertWhitespace(e){const t=V.findInsertionIndex(this._arr,e.afterLineNumber,e.ordinal);this._arr.splice(t,0,e),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,t-1)}_findWhitespaceIndex(e){const t=this._arr;for(let n=0,i=t.length;n<i;n++)if(t[n].id===e)return n;return-1}_changeOneWhitespace(e,t,n){const i=this._findWhitespaceIndex(e);if(-1!==i&&(this._arr[i].height!==n&&(this._arr[i].height=n,this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,i-1)),this._arr[i].afterLineNumber!==t)){const e=this._arr[i];this._removeWhitespace(i),e.afterLineNumber=t,this._insertWhitespace(e)}}_removeWhitespace(e){this._arr.splice(e,1),this._prefixSumValidIndex=Math.min(this._prefixSumValidIndex,e-1)}onLinesDeleted(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount-=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){const i=this._arr[n].afterLineNumber;e<=i&&i<=t?this._arr[n].afterLineNumber=e-1:i>t&&(this._arr[n].afterLineNumber-=t-e+1)}}onLinesInserted(e,t){this._checkPendingChanges(),e|=0,t|=0,this._lineCount+=t-e+1;for(let n=0,i=this._arr.length;n<i;n++){e<=this._arr[n].afterLineNumber&&(this._arr[n].afterLineNumber+=t-e+1)}}getWhitespacesTotalHeight(){return this._checkPendingChanges(),0===this._arr.length?0:this.getWhitespacesAccumulatedHeight(this._arr.length-1)}getWhitespacesAccumulatedHeight(e){this._checkPendingChanges(),e|=0;let t=Math.max(0,this._prefixSumValidIndex+1);0===t&&(this._arr[0].prefixSum=this._arr[0].height,t++);for(let n=t;n<=e;n++)this._arr[n].prefixSum=this._arr[n-1].prefixSum+this._arr[n].height;return this._prefixSumValidIndex=Math.max(this._prefixSumValidIndex,e),this._arr[e].prefixSum}getLinesTotalHeight(){this._checkPendingChanges();return this._lineHeight*this._lineCount+this.getWhitespacesTotalHeight()+this._paddingTop+this._paddingBottom}getWhitespaceAccumulatedHeightBeforeLineNumber(e){this._checkPendingChanges(),e|=0;const t=this._findLastWhitespaceBeforeLineNumber(e);return-1===t?0:this.getWhitespacesAccumulatedHeight(t)}_findLastWhitespaceBeforeLineNumber(e){e|=0;const t=this._arr;let n=0,i=t.length-1;for(;n<=i;){const s=n+((i-n|0)/2|0)|0;if(t[s].afterLineNumber<e){if(s+1>=t.length||t[s+1].afterLineNumber>=e)return s;n=s+1|0}else i=s-1|0}return-1}_findFirstWhitespaceAfterLineNumber(e){e|=0;const t=this._findLastWhitespaceBeforeLineNumber(e)+1;return t<this._arr.length?t:-1}getFirstWhitespaceIndexAfterLineNumber(e){return this._checkPendingChanges(),e|=0,this._findFirstWhitespaceAfterLineNumber(e)}getVerticalOffsetForLineNumber(e){let t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._checkPendingChanges(),t=(e|=0)>1?this._lineHeight*(e-1):0;return t+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e-(n?1:0))+this._paddingTop}getVerticalOffsetAfterLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._checkPendingChanges(),e|=0;return this._lineHeight*e+this.getWhitespaceAccumulatedHeightBeforeLineNumber(e+(t?1:0))+this._paddingTop}getWhitespaceMinWidth(){if(this._checkPendingChanges(),-1===this._minWidth){let e=0;for(let t=0,n=this._arr.length;t<n;t++)e=Math.max(e,this._arr[t].minWidth);this._minWidth=e}return this._minWidth}isAfterLines(e){this._checkPendingChanges();return e>this.getLinesTotalHeight()}isInTopPadding(e){return 0!==this._paddingTop&&(this._checkPendingChanges(),e<this._paddingTop)}isInBottomPadding(e){if(0===this._paddingBottom)return!1;this._checkPendingChanges();return e>=this.getLinesTotalHeight()-this._paddingBottom}getLineNumberAtOrAfterVerticalOffset(e){if(this._checkPendingChanges(),(e|=0)<0)return 1;const t=0|this._lineCount,n=this._lineHeight;let i=1,s=t;for(;i<s;){const t=(i+s)/2|0,o=0|this.getVerticalOffsetForLineNumber(t);if(e>=o+n)i=t+1;else{if(e>=o)return t;s=t}}return i>t?t:i}getLinesViewportData(e,t){this._checkPendingChanges(),e|=0,t|=0;const n=this._lineHeight,i=0|this.getLineNumberAtOrAfterVerticalOffset(e),s=0|this.getVerticalOffsetForLineNumber(i);let o=0|this._lineCount,r=0|this.getFirstWhitespaceIndexAfterLineNumber(i);const a=0|this.getWhitespacesCount();let l,h;-1===r?(r=a,h=o+1,l=0):(h=0|this.getAfterLineNumberForWhitespaceIndex(r),l=0|this.getHeightForWhitespaceIndex(r));let c=s,u=c;const d=5e5;let g=0;s>=d&&(g=Math.floor(s/d)*d,g=Math.floor(g/n)*n,u-=g);const m=[],f=e+(t-e)/2;let p=-1;for(let w=i;w<=o;w++){if(-1===p){(c<=f&&f<c+n||c>f)&&(p=w)}for(c+=n,m[w-i]=u,u+=n;h===w;)u+=l,c+=l,r++,r>=a?h=o+1:(h=0|this.getAfterLineNumberForWhitespaceIndex(r),l=0|this.getHeightForWhitespaceIndex(r));if(c>=t){o=w;break}}-1===p&&(p=o);const _=0|this.getVerticalOffsetForLineNumber(o);let L=i,C=o;return L<C&&s<e&&L++,L<C&&_+n>t&&C--,{bigNumbersDelta:g,startLineNumber:i,endLineNumber:o,relativeVerticalOffset:m,centeredLineNumber:p,completelyVisibleStartLineNumber:L,completelyVisibleEndLineNumber:C,lineHeight:this._lineHeight}}getVerticalOffsetForWhitespaceIndex(e){this._checkPendingChanges(),e|=0;const t=this.getAfterLineNumberForWhitespaceIndex(e);let n,i;return n=t>=1?this._lineHeight*t:0,i=e>0?this.getWhitespacesAccumulatedHeight(e-1):0,n+i+this._paddingTop}getWhitespaceIndexAtOrAfterVerticallOffset(e){this._checkPendingChanges(),e|=0;let t=0,n=this.getWhitespacesCount()-1;if(n<0)return-1;if(e>=this.getVerticalOffsetForWhitespaceIndex(n)+this.getHeightForWhitespaceIndex(n))return-1;for(;t<n;){const i=Math.floor((t+n)/2),s=this.getVerticalOffsetForWhitespaceIndex(i);if(e>=s+this.getHeightForWhitespaceIndex(i))t=i+1;else{if(e>=s)return i;n=i}}return t}getWhitespaceAtVerticalOffset(e){this._checkPendingChanges(),e|=0;const t=this.getWhitespaceIndexAtOrAfterVerticallOffset(e);if(t<0)return null;if(t>=this.getWhitespacesCount())return null;const n=this.getVerticalOffsetForWhitespaceIndex(t);if(n>e)return null;const i=this.getHeightForWhitespaceIndex(t);return{id:this.getIdForWhitespaceIndex(t),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(t),verticalOffset:n,height:i}}getWhitespaceViewportData(e,t){this._checkPendingChanges(),e|=0,t|=0;const n=this.getWhitespaceIndexAtOrAfterVerticallOffset(e),i=this.getWhitespacesCount()-1;if(n<0)return[];const s=[];for(let o=n;o<=i;o++){const e=this.getVerticalOffsetForWhitespaceIndex(o),n=this.getHeightForWhitespaceIndex(o);if(e>=t)break;s.push({id:this.getIdForWhitespaceIndex(o),afterLineNumber:this.getAfterLineNumberForWhitespaceIndex(o),verticalOffset:e,height:n})}return s}getWhitespaces(){return this._checkPendingChanges(),this._arr.slice(0)}getWhitespacesCount(){return this._checkPendingChanges(),this._arr.length}getIdForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].id}getAfterLineNumberForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].afterLineNumber}getHeightForWhitespaceIndex(e){return this._checkPendingChanges(),e|=0,this._arr[e].height}}V.INSTANCE_COUNT=0;var N=n(77570),I=n(41037);class M{constructor(e,t,n,i){(e|=0)<0&&(e=0),(t|=0)<0&&(t=0),(n|=0)<0&&(n=0),(i|=0)<0&&(i=0),this.width=e,this.contentWidth=t,this.scrollWidth=Math.max(e,t),this.height=n,this.contentHeight=i,this.scrollHeight=Math.max(n,i)}equals(e){return this.width===e.width&&this.contentWidth===e.contentWidth&&this.height===e.height&&this.contentHeight===e.contentHeight}}class k extends r.jG{constructor(e,t){super(),this._onDidContentSizeChange=this._register(new C.vl),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._dimensions=new M(0,0,0,0),this._scrollable=this._register(new w.yE({forceIntegerValues:!0,smoothScrollDuration:e,scheduleAtNextAnimationFrame:t})),this.onDidScroll=this._scrollable.onScroll}getScrollable(){return this._scrollable}setSmoothScrollDuration(e){this._scrollable.setSmoothScrollDuration(e)}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}getScrollDimensions(){return this._dimensions}setScrollDimensions(e){if(this._dimensions.equals(e))return;const t=this._dimensions;this._dimensions=e,this._scrollable.setScrollDimensions({width:e.width,scrollWidth:e.scrollWidth,height:e.height,scrollHeight:e.scrollHeight},!0);const n=t.contentWidth!==e.contentWidth,i=t.contentHeight!==e.contentHeight;(n||i)&&this._onDidContentSizeChange.fire(new I.H(t.contentWidth,t.contentHeight,e.contentWidth,e.contentHeight))}getFutureScrollPosition(){return this._scrollable.getFutureScrollPosition()}getCurrentScrollPosition(){return this._scrollable.getCurrentScrollPosition()}setScrollPositionNow(e){this._scrollable.setScrollPositionNow(e)}setScrollPositionSmooth(e){this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}}class S extends r.jG{constructor(e,t,n){super(),this._configuration=e;const i=this._configuration.options,s=i.get(145),o=i.get(84);this._linesLayout=new V(t,i.get(67),o.top,o.bottom),this._maxLineWidth=0,this._overlayWidgetsMinWidth=0,this._scrollable=this._register(new k(0,n)),this._configureSmoothScrollDuration(),this._scrollable.setScrollDimensions(new M(s.contentWidth,0,s.height,0)),this.onDidScroll=this._scrollable.onDidScroll,this.onDidContentSizeChange=this._scrollable.onDidContentSizeChange,this._updateHeight()}dispose(){super.dispose()}getScrollable(){return this._scrollable.getScrollable()}onHeightMaybeChanged(){this._updateHeight()}_configureSmoothScrollDuration(){this._scrollable.setSmoothScrollDuration(this._configuration.options.get(114)?125:0)}onConfigurationChanged(e){const t=this._configuration.options;if(e.hasChanged(67)&&this._linesLayout.setLineHeight(t.get(67)),e.hasChanged(84)){const e=t.get(84);this._linesLayout.setPadding(e.top,e.bottom)}if(e.hasChanged(145)){const e=t.get(145),n=e.contentWidth,i=e.height,s=this._scrollable.getScrollDimensions(),o=s.contentWidth;this._scrollable.setScrollDimensions(new M(n,s.contentWidth,i,this._getContentHeight(n,i,o)))}else this._updateHeight();e.hasChanged(114)&&this._configureSmoothScrollDuration()}onFlushed(e){this._linesLayout.onFlushed(e)}onLinesDeleted(e,t){this._linesLayout.onLinesDeleted(e,t)}onLinesInserted(e,t){this._linesLayout.onLinesInserted(e,t)}_getHorizontalScrollbarHeight(e,t){const n=this._configuration.options.get(103);return 2===n.horizontal||e>=t?0:n.horizontalScrollbarSize}_getContentHeight(e,t,n){const i=this._configuration.options;let s=this._linesLayout.getLinesTotalHeight();return i.get(105)?s+=Math.max(0,t-i.get(67)-i.get(84).bottom):i.get(103).ignoreHorizontalScrollbarInContentHeight||(s+=this._getHorizontalScrollbarHeight(e,n)),s}_updateHeight(){const e=this._scrollable.getScrollDimensions(),t=e.width,n=e.height,i=e.contentWidth;this._scrollable.setScrollDimensions(new M(t,e.contentWidth,n,this._getContentHeight(t,n,i)))}getCurrentViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getCurrentScrollPosition();return new N.LM(t.scrollTop,t.scrollLeft,e.width,e.height)}getFutureViewport(){const e=this._scrollable.getScrollDimensions(),t=this._scrollable.getFutureScrollPosition();return new N.LM(t.scrollTop,t.scrollLeft,e.width,e.height)}_computeContentWidth(){const e=this._configuration.options,t=this._maxLineWidth,n=e.get(146),i=e.get(50),s=e.get(145);if(n.isViewportWrapping){const n=e.get(73);return t>s.contentWidth+i.typicalHalfwidthCharacterWidth&&n.enabled&&"right"===n.side?t+s.verticalScrollbarWidth:t}{const n=e.get(104)*i.typicalHalfwidthCharacterWidth,o=this._linesLayout.getWhitespaceMinWidth();return Math.max(t+n+s.verticalScrollbarWidth,o,this._overlayWidgetsMinWidth)}}setMaxLineWidth(e){this._maxLineWidth=e,this._updateContentWidth()}setOverlayWidgetsMinWidth(e){this._overlayWidgetsMinWidth=e,this._updateContentWidth()}_updateContentWidth(){const e=this._scrollable.getScrollDimensions();this._scrollable.setScrollDimensions(new M(e.width,this._computeContentWidth(),e.height,e.contentHeight)),this._updateHeight()}saveState(){const e=this._scrollable.getFutureScrollPosition(),t=e.scrollTop,n=this._linesLayout.getLineNumberAtOrAfterVerticalOffset(t);return{scrollTop:t,scrollTopWithoutViewZones:t-this._linesLayout.getWhitespaceAccumulatedHeightBeforeLineNumber(n),scrollLeft:e.scrollLeft}}changeWhitespace(e){const t=this._linesLayout.changeWhitespace(e);return t&&this.onHeightMaybeChanged(),t}getVerticalOffsetForLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._linesLayout.getVerticalOffsetForLineNumber(e,t)}getVerticalOffsetAfterLineNumber(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._linesLayout.getVerticalOffsetAfterLineNumber(e,t)}isAfterLines(e){return this._linesLayout.isAfterLines(e)}isInTopPadding(e){return this._linesLayout.isInTopPadding(e)}isInBottomPadding(e){return this._linesLayout.isInBottomPadding(e)}getLineNumberAtVerticalOffset(e){return this._linesLayout.getLineNumberAtOrAfterVerticalOffset(e)}getWhitespaceAtVerticalOffset(e){return this._linesLayout.getWhitespaceAtVerticalOffset(e)}getLinesViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getLinesViewportData(e.top,e.top+e.height)}getLinesViewportDataAtScrollTop(e){const t=this._scrollable.getScrollDimensions();return e+t.height>t.scrollHeight&&(e=t.scrollHeight-t.height),e<0&&(e=0),this._linesLayout.getLinesViewportData(e,e+t.height)}getWhitespaceViewportData(){const e=this.getCurrentViewport();return this._linesLayout.getWhitespaceViewportData(e.top,e.top+e.height)}getWhitespaces(){return this._linesLayout.getWhitespaces()}getContentWidth(){return this._scrollable.getScrollDimensions().contentWidth}getScrollWidth(){return this._scrollable.getScrollDimensions().scrollWidth}getContentHeight(){return this._scrollable.getScrollDimensions().contentHeight}getScrollHeight(){return this._scrollable.getScrollDimensions().scrollHeight}getCurrentScrollLeft(){return this._scrollable.getCurrentScrollPosition().scrollLeft}getCurrentScrollTop(){return this._scrollable.getCurrentScrollPosition().scrollTop}validateScrollPosition(e){return this._scrollable.validateScrollPosition(e)}setScrollPosition(e,t){1===t?this._scrollable.setScrollPositionNow(e):this._scrollable.setScrollPositionSmooth(e)}hasPendingScrollAnimation(){return this._scrollable.hasPendingScrollAnimation()}deltaScrollNow(e,t){const n=this._scrollable.getCurrentScrollPosition();this._scrollable.setScrollPositionNow({scrollLeft:n.scrollLeft+e,scrollTop:n.scrollTop+t})}}var P=n(37289),T=n(23628),x=n(47213),D=n(98605),y=n(21707);function O(e,t){return null===e?t?W.INSTANCE:R.INSTANCE:new E(e,t)}class E{constructor(e,t){this._projectionData=e,this._isVisible=t}isVisible(){return this._isVisible}setVisible(e){return this._isVisible=e,this}getProjectionData(){return this._projectionData}getViewLineCount(){return this._isVisible?this._projectionData.getOutputLineCount():0}getViewLineContent(e,t,n){this._assertVisible();const i=n>0?this._projectionData.breakOffsets[n-1]:0,s=this._projectionData.breakOffsets[n];let o;if(null!==this._projectionData.injectionOffsets){const n=this._projectionData.injectionOffsets.map(((e,t)=>new m.uK(0,0,e+1,this._projectionData.injectionOptions[t],0)));o=m.uK.applyInjectedText(e.getLineContent(t),n).substring(i,s)}else o=e.getValueInRange({startLineNumber:t,startColumn:i+1,endLineNumber:t,endColumn:s+1});return n>0&&(o=H(this._projectionData.wrappedTextIndentLength)+o),o}getViewLineLength(e,t,n){return this._assertVisible(),this._projectionData.getLineLength(n)}getViewLineMinColumn(e,t,n){return this._assertVisible(),this._projectionData.getMinOutputOffset(n)+1}getViewLineMaxColumn(e,t,n){return this._assertVisible(),this._projectionData.getMaxOutputOffset(n)+1}getViewLineData(e,t,n){const i=new Array;return this.getViewLinesData(e,t,n,1,0,[!0],i),i[0]}getViewLinesData(e,t,n,i,s,o,r){this._assertVisible();const a=this._projectionData,l=a.injectionOffsets,h=a.injectionOptions;let c,u=null;if(l){u=[];let e=0,t=0;for(let n=0;n<a.getOutputLineCount();n++){const i=new Array;u[n]=i;const s=n>0?a.breakOffsets[n-1]:0,o=a.breakOffsets[n];for(;t<l.length;){const r=h[t].content.length,c=l[t]+e,u=c+r;if(c>o)break;if(s<u){const e=h[t];if(e.inlineClassName){const t=n>0?a.wrappedTextIndentLength:0,r=t+Math.max(c-s,0),l=t+Math.min(u-s,o-s);r!==l&&i.push(new N.or(r,l,e.inlineClassName,e.inlineClassNameAffectsLetterSpacing))}}if(!(u<=o))break;e+=r,t++}}}c=l?e.tokenization.getLineTokens(t).withInserted(l.map(((e,t)=>({offset:e,text:h[t].content,tokenMetadata:y.f.defaultTokenMetadata})))):e.tokenization.getLineTokens(t);for(let d=n;d<n+i;d++){const e=s+d-n;o[e]?r[e]=this._getViewLineData(c,u?u[d]:null,d):r[e]=null}}_getViewLineData(e,t,n){this._assertVisible();const i=this._projectionData,s=n>0?i.wrappedTextIndentLength:0,o=n>0?i.breakOffsets[n-1]:0,r=i.breakOffsets[n],a=e.sliceAndInflate(o,r,s);let l=a.getLineContent();n>0&&(l=H(i.wrappedTextIndentLength)+l);const h=this._projectionData.getMinOutputOffset(n)+1,c=l.length+1,u=n+1<this.getViewLineCount(),d=0===n?0:i.breakOffsetsVisibleColumn[n-1];return new N.GP(l,u,h,c,d,a,t)}getModelColumnOfViewPosition(e,t){return this._assertVisible(),this._projectionData.translateToInputOffset(e,t-1)+1}getViewPositionOfModelPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;this._assertVisible();return this._projectionData.translateToOutputPosition(t-1,n).toPosition(e)}getViewLineNumberOfModelPosition(e,t){this._assertVisible();return e+this._projectionData.translateToOutputPosition(t-1).outputLineIndex}normalizePosition(e,t,n){const i=t.lineNumber-e;return this._projectionData.normalizeOutputPosition(e,t.column-1,n).toPosition(i)}getInjectedTextAt(e,t){return this._projectionData.getInjectedText(e,t-1)}_assertVisible(){if(!this._isVisible)throw new Error("Not supported")}}class W{constructor(){}isVisible(){return!0}setVisible(e){return e?this:R.INSTANCE}getProjectionData(){return null}getViewLineCount(){return 1}getViewLineContent(e,t,n){return e.getLineContent(t)}getViewLineLength(e,t,n){return e.getLineLength(t)}getViewLineMinColumn(e,t,n){return e.getLineMinColumn(t)}getViewLineMaxColumn(e,t,n){return e.getLineMaxColumn(t)}getViewLineData(e,t,n){const i=e.tokenization.getLineTokens(t),s=i.getLineContent();return new N.GP(s,!1,1,s.length+1,0,i.inflate(),null)}getViewLinesData(e,t,n,i,s,o,r){o[s]?r[s]=this.getViewLineData(e,t,0):r[s]=null}getModelColumnOfViewPosition(e,t){return t}getViewPositionOfModelPosition(e,t){return new d.y(e,t)}getViewLineNumberOfModelPosition(e,t){return e}normalizePosition(e,t,n){return t}getInjectedTextAt(e,t){return null}}W.INSTANCE=new W;class R{constructor(){}isVisible(){return!1}setVisible(e){return e?W.INSTANCE:this}getProjectionData(){return null}getViewLineCount(){return 0}getViewLineContent(e,t,n){throw new Error("Not supported")}getViewLineLength(e,t,n){throw new Error("Not supported")}getViewLineMinColumn(e,t,n){throw new Error("Not supported")}getViewLineMaxColumn(e,t,n){throw new Error("Not supported")}getViewLineData(e,t,n){throw new Error("Not supported")}getViewLinesData(e,t,n,i,s,o,r){throw new Error("Not supported")}getModelColumnOfViewPosition(e,t){throw new Error("Not supported")}getViewPositionOfModelPosition(e,t){throw new Error("Not supported")}getViewLineNumberOfModelPosition(e,t){throw new Error("Not supported")}normalizePosition(e,t,n){throw new Error("Not supported")}getInjectedTextAt(e,t){throw new Error("Not supported")}}R.INSTANCE=new R;const A=[""];function H(e){if(e>=A.length)for(let t=1;t<=e;t++)A[t]=j(t);return A[e]}function j(e){return new Array(e+1).join(" ")}var F=n(41292);class z{constructor(e,t,n,i,s,o,r,a,l,h){this._editorId=e,this.model=t,this._validModelVersionId=-1,this._domLineBreaksComputerFactory=n,this._monospaceLineBreaksComputerFactory=i,this.fontInfo=s,this.tabSize=o,this.wrappingStrategy=r,this.wrappingColumn=a,this.wrappingIndent=l,this.wordBreak=h,this._constructLines(!0,null)}dispose(){this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[])}createCoordinatesConverter(){return new U(this)}_constructLines(e,t){this.modelLineProjections=[],e&&(this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,[]));const n=this.model.getLinesContent(),s=this.model.getInjectedTextDecorations(this._editorId),o=n.length,r=this.createLineBreaksComputer(),a=new i.j3(m.uK.fromDecorations(s));for(let i=0;i<o;i++){const e=a.takeWhile((e=>e.lineNumber===i+1));r.addRequest(n[i],e,t?t[i]:null)}const l=r.finalize(),h=[],c=this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e))).sort(g.Q.compareRangesUsingStarts);let u=1,d=0,f=-1,p=f+1<c.length?d+1:o+2;for(let i=0;i<o;i++){const e=i+1;e===p&&(f++,u=c[f].startLineNumber,d=c[f].endLineNumber,p=f+1<c.length?d+1:o+2);const t=e>=u&&e<=d,n=O(l[i],!t);h[i]=n.getViewLineCount(),this.modelLineProjections[i]=n}this._validModelVersionId=this.model.getVersionId(),this.projectedModelLineLineCounts=new F.c2(h)}getHiddenAreas(){return this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e)))}setHiddenAreas(e){const t=function(e){if(0===e.length)return[];const t=e.slice();t.sort(g.Q.compareRangesUsingStarts);const n=[];let i=t[0].startLineNumber,s=t[0].endLineNumber;for(let o=1,r=t.length;o<r;o++){const e=t[o];e.startLineNumber>s+1?(n.push(new g.Q(i,1,s,1)),i=e.startLineNumber,s=e.endLineNumber):e.endLineNumber>s&&(s=e.endLineNumber)}return n.push(new g.Q(i,1,s,1)),n}(e.map((e=>this.model.validateRange(e)))),n=this.hiddenAreasDecorationIds.map((e=>this.model.getDecorationRange(e))).sort(g.Q.compareRangesUsingStarts);if(t.length===n.length){let e=!1;for(let i=0;i<t.length;i++)if(!t[i].equalsRange(n[i])){e=!0;break}if(!e)return!1}const i=t.map((e=>({range:e,options:D.kI.EMPTY})));this.hiddenAreasDecorationIds=this.model.deltaDecorations(this.hiddenAreasDecorationIds,i);const s=t;let o=1,r=0,a=-1,l=a+1<s.length?r+1:this.modelLineProjections.length+2,h=!1;for(let c=0;c<this.modelLineProjections.length;c++){const e=c+1;e===l&&(a++,o=s[a].startLineNumber,r=s[a].endLineNumber,l=a+1<s.length?r+1:this.modelLineProjections.length+2);let t=!1;if(e>=o&&e<=r?this.modelLineProjections[c].isVisible()&&(this.modelLineProjections[c]=this.modelLineProjections[c].setVisible(!1),t=!0):(h=!0,this.modelLineProjections[c].isVisible()||(this.modelLineProjections[c]=this.modelLineProjections[c].setVisible(!0),t=!0)),t){const e=this.modelLineProjections[c].getViewLineCount();this.projectedModelLineLineCounts.setValue(c,e)}}return h||this.setHiddenAreas([]),!0}modelPositionIsVisible(e,t){return!(e<1||e>this.modelLineProjections.length)&&this.modelLineProjections[e-1].isVisible()}getModelLineViewLineCount(e){return e<1||e>this.modelLineProjections.length?1:this.modelLineProjections[e-1].getViewLineCount()}setTabSize(e){return this.tabSize!==e&&(this.tabSize=e,this._constructLines(!1,null),!0)}setWrappingSettings(e,t,n,i,s){const o=this.fontInfo.equals(e),r=this.wrappingStrategy===t,a=this.wrappingColumn===n,l=this.wrappingIndent===i,h=this.wordBreak===s;if(o&&r&&a&&l&&h)return!1;const c=o&&r&&!a&&l&&h;this.fontInfo=e,this.wrappingStrategy=t,this.wrappingColumn=n,this.wrappingIndent=i,this.wordBreak=s;let u=null;if(c){u=[];for(let e=0,t=this.modelLineProjections.length;e<t;e++)u[e]=this.modelLineProjections[e].getProjectionData()}return this._constructLines(!1,u),!0}createLineBreaksComputer(){return("advanced"===this.wrappingStrategy?this._domLineBreaksComputerFactory:this._monospaceLineBreaksComputerFactory).createLineBreaksComputer(this.fontInfo,this.tabSize,this.wrappingColumn,this.wrappingIndent,this.wordBreak)}onModelFlushed(){this._constructLines(!0,null)}onModelLinesDeleted(e,t,n){if(!e||e<=this._validModelVersionId)return null;const i=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,s=this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections.splice(t-1,n-t+1),this.projectedModelLineLineCounts.removeValues(t-1,n-t+1),new L.Uf(i,s)}onModelLinesInserted(e,t,n,i){if(!e||e<=this._validModelVersionId)return null;const s=t>2&&!this.modelLineProjections[t-2].isVisible(),o=1===t?1:this.projectedModelLineLineCounts.getPrefixSum(t-1)+1;let r=0;const a=[],l=[];for(let h=0,c=i.length;h<c;h++){const e=O(i[h],!s);a.push(e);const t=e.getViewLineCount();r+=t,l[h]=t}return this.modelLineProjections=this.modelLineProjections.slice(0,t-1).concat(a).concat(this.modelLineProjections.slice(t-1)),this.projectedModelLineLineCounts.insertValues(t-1,l),new L.rZ(o,o+r-1)}onModelLineChanged(e,t,n){if(null!==e&&e<=this._validModelVersionId)return[!1,null,null,null];const i=t-1,s=this.modelLineProjections[i].getViewLineCount(),o=O(n,this.modelLineProjections[i].isVisible());this.modelLineProjections[i]=o;const r=this.modelLineProjections[i].getViewLineCount();let a=!1,l=0,h=-1,c=0,u=-1,d=0,g=-1;s>r?(l=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=l+r-1,d=h+1,g=d+(s-r)-1,a=!0):s<r?(l=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=l+s-1,c=h+1,u=c+(r-s)-1,a=!0):(l=this.projectedModelLineLineCounts.getPrefixSum(t-1)+1,h=l+r-1),this.projectedModelLineLineCounts.setValue(i,r);return[a,l<=h?new L.bu(l,h-l+1):null,c<=u?new L.rZ(c,u):null,d<=g?new L.Uf(d,g):null]}acceptVersionId(e){this._validModelVersionId=e,1!==this.modelLineProjections.length||this.modelLineProjections[0].isVisible()||this.setHiddenAreas([])}getViewLineCount(){return this.projectedModelLineLineCounts.getTotalSum()}_toValidViewLineNumber(e){if(e<1)return 1;const t=this.getViewLineCount();return e>t?t:0|e}getActiveIndentGuide(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t),n=this._toValidViewLineNumber(n);const i=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),s=this.convertViewPositionToModelPosition(t,this.getViewLineMinColumn(t)),o=this.convertViewPositionToModelPosition(n,this.getViewLineMinColumn(n)),r=this.model.guides.getActiveIndentGuide(i.lineNumber,s.lineNumber,o.lineNumber),a=this.convertModelPositionToViewPosition(r.startLineNumber,1),l=this.convertModelPositionToViewPosition(r.endLineNumber,this.model.getLineMaxColumn(r.endLineNumber));return{startLineNumber:a.lineNumber,endLineNumber:l.lineNumber,indent:r.indent}}getViewLineInfo(e){e=this._toValidViewLineNumber(e);const t=this.projectedModelLineLineCounts.getIndexOf(e-1),n=t.index,i=t.remainder;return new B(n+1,i)}getMinColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getMaxColumnOfViewLine(e){return this.modelLineProjections[e.modelLineNumber-1].getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx)}getModelStartPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMinColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new d.y(e.modelLineNumber,i)}getModelEndPositionOfViewLine(e){const t=this.modelLineProjections[e.modelLineNumber-1],n=t.getViewLineMaxColumn(this.model,e.modelLineNumber,e.modelLineWrappedLineIdx),i=t.getModelColumnOfViewPosition(e.modelLineWrappedLineIdx,n);return new d.y(e.modelLineNumber,i)}getViewLineInfosGroupedByModelRanges(e,t){const n=this.getViewLineInfo(e),i=this.getViewLineInfo(t),s=new Array;let o=this.getModelStartPositionOfViewLine(n),r=new Array;for(let a=n.modelLineNumber;a<=i.modelLineNumber;a++){const e=this.modelLineProjections[a-1];if(e.isVisible()){const t=a===n.modelLineNumber?n.modelLineWrappedLineIdx:0,s=a===i.modelLineNumber?i.modelLineWrappedLineIdx+1:e.getViewLineCount();for(let e=t;e<s;e++)r.push(new B(a,e))}if(!e.isVisible()&&o){const e=new d.y(a-1,this.model.getLineMaxColumn(a-1)+1),t=g.Q.fromPositions(o,e);s.push(new Q(t,r)),r=[],o=null}else e.isVisible()&&!o&&(o=new d.y(a,1))}if(o){const e=g.Q.fromPositions(o,this.getModelEndPositionOfViewLine(i));s.push(new Q(e,r))}return s}getViewLinesBracketGuides(e,t,n,i){const s=n?this.convertViewPositionToModelPosition(n.lineNumber,n.column):null,o=[];for(const r of this.getViewLineInfosGroupedByModelRanges(e,t)){const e=r.modelRange.startLineNumber,t=this.model.guides.getLinesBracketGuides(e,r.modelRange.endLineNumber,s,i);for(const n of r.viewLines){const i=t[n.modelLineNumber-e].map((e=>{if(-1!==e.forWrappedLinesAfterColumn){if(this.modelLineProjections[n.modelLineNumber-1].getViewPositionOfModelPosition(0,e.forWrappedLinesAfterColumn).lineNumber>=n.modelLineWrappedLineIdx)return}if(-1!==e.forWrappedLinesBeforeOrAtColumn){if(this.modelLineProjections[n.modelLineNumber-1].getViewPositionOfModelPosition(0,e.forWrappedLinesBeforeOrAtColumn).lineNumber<n.modelLineWrappedLineIdx)return}if(!e.horizontalLine)return e;let t=-1;if(-1!==e.column){const i=this.modelLineProjections[n.modelLineNumber-1].getViewPositionOfModelPosition(0,e.column);if(i.lineNumber===n.modelLineWrappedLineIdx)t=i.column;else if(i.lineNumber<n.modelLineWrappedLineIdx)t=this.getMinColumnOfViewLine(n);else if(i.lineNumber>n.modelLineWrappedLineIdx)return}const i=this.convertModelPositionToViewPosition(n.modelLineNumber,e.horizontalLine.endColumn),s=this.modelLineProjections[n.modelLineNumber-1].getViewPositionOfModelPosition(0,e.horizontalLine.endColumn);return s.lineNumber===n.modelLineWrappedLineIdx?new x.TH(e.visibleColumn,t,e.className,new x.pv(e.horizontalLine.top,i.column),-1,-1):s.lineNumber<n.modelLineWrappedLineIdx||-1!==e.visibleColumn?void 0:new x.TH(e.visibleColumn,t,e.className,new x.pv(e.horizontalLine.top,this.getMaxColumnOfViewLine(n)),-1,-1)}));o.push(i.filter((e=>!!e)))}}return o}getViewLinesIndentGuides(e,t){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const n=this.convertViewPositionToModelPosition(e,this.getViewLineMinColumn(e)),i=this.convertViewPositionToModelPosition(t,this.getViewLineMaxColumn(t));let s=[];const o=[],r=[],a=n.lineNumber-1,l=i.lineNumber-1;let h=null;for(let m=a;m<=l;m++){const e=this.modelLineProjections[m];if(e.isVisible()){const t=e.getViewLineNumberOfModelPosition(0,m===a?n.column:1),i=e.getViewLineNumberOfModelPosition(0,this.model.getLineMaxColumn(m+1)),s=i-t+1;let l=0;s>1&&1===e.getViewLineMinColumn(this.model,m+1,i)&&(l=0===t?1:2),o.push(s),r.push(l),null===h&&(h=new d.y(m+1,0))}else null!==h&&(s=s.concat(this.model.guides.getLinesIndentGuides(h.lineNumber,m)),h=null)}null!==h&&(s=s.concat(this.model.guides.getLinesIndentGuides(h.lineNumber,i.lineNumber)),h=null);const c=t-e+1,u=new Array(c);let g=0;for(let d=0,m=s.length;d<m;d++){let e=s[d];const t=Math.min(c-g,o[d]),n=r[d];let i;i=2===n?0:1===n?1:t;for(let s=0;s<t;s++)s===i&&(e=0),u[g++]=e}return u}getViewLineContent(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineContent(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineLength(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineLength(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMinColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMinColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineMaxColumn(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineMaxColumn(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLineData(e){const t=this.getViewLineInfo(e);return this.modelLineProjections[t.modelLineNumber-1].getViewLineData(this.model,t.modelLineNumber,t.modelLineWrappedLineIdx)}getViewLinesData(e,t,n){e=this._toValidViewLineNumber(e),t=this._toValidViewLineNumber(t);const i=this.projectedModelLineLineCounts.getIndexOf(e-1);let s=e;const o=i.index,r=i.remainder,a=[];for(let l=o,h=this.model.getLineCount();l<h;l++){const i=this.modelLineProjections[l];if(!i.isVisible())continue;const h=l===o?r:0;let c=i.getViewLineCount()-h,u=!1;if(s+c>t&&(u=!0,c=t-s+1),i.getViewLinesData(this.model,l+1,h,c,s-e,n,a),s+=c,u)break}return a}validateViewPosition(e,t,n){e=this._toValidViewLineNumber(e);const i=this.projectedModelLineLineCounts.getIndexOf(e-1),s=i.index,o=i.remainder,r=this.modelLineProjections[s],a=r.getViewLineMinColumn(this.model,s+1,o),l=r.getViewLineMaxColumn(this.model,s+1,o);t<a&&(t=a),t>l&&(t=l);const h=r.getModelColumnOfViewPosition(o,t);return this.model.validatePosition(new d.y(s+1,h)).equals(n)?new d.y(e,t):this.convertModelPositionToViewPosition(n.lineNumber,n.column)}validateViewRange(e,t){const n=this.validateViewPosition(e.startLineNumber,e.startColumn,t.getStartPosition()),i=this.validateViewPosition(e.endLineNumber,e.endColumn,t.getEndPosition());return new g.Q(n.lineNumber,n.column,i.lineNumber,i.column)}convertViewPositionToModelPosition(e,t){const n=this.getViewLineInfo(e),i=this.modelLineProjections[n.modelLineNumber-1].getModelColumnOfViewPosition(n.modelLineWrappedLineIdx,t);return this.model.validatePosition(new d.y(n.modelLineNumber,i))}convertViewRangeToModelRange(e){const t=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),n=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);return new g.Q(t.lineNumber,t.column,n.lineNumber,n.column)}convertModelPositionToViewPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const o=this.model.validatePosition(new d.y(e,t)),r=o.lineNumber,a=o.column;let l=r-1,h=!1;if(s)for(;l<this.modelLineProjections.length&&!this.modelLineProjections[l].isVisible();)l++,h=!0;else for(;l>0&&!this.modelLineProjections[l].isVisible();)l--,h=!0;if(0===l&&!this.modelLineProjections[l].isVisible())return new d.y(i?0:1,1);const c=1+this.projectedModelLineLineCounts.getPrefixSum(l);let u;return u=h?s?this.modelLineProjections[l].getViewPositionOfModelPosition(c,1,n):this.modelLineProjections[l].getViewPositionOfModelPosition(c,this.model.getLineMaxColumn(l+1),n):this.modelLineProjections[r-1].getViewPositionOfModelPosition(c,a,n),u}convertModelRangeToViewRange(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(e.isEmpty()){const n=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,t);return g.Q.fromPositions(n)}{const t=this.convertModelPositionToViewPosition(e.startLineNumber,e.startColumn,1),n=this.convertModelPositionToViewPosition(e.endLineNumber,e.endColumn,0);return new g.Q(t.lineNumber,t.column,n.lineNumber,n.column)}}getViewLineNumberOfModelPosition(e,t){let n=e-1;if(this.modelLineProjections[n].isVisible()){const e=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(e,t)}for(;n>0&&!this.modelLineProjections[n].isVisible();)n--;if(0===n&&!this.modelLineProjections[n].isVisible())return 1;const i=1+this.projectedModelLineLineCounts.getPrefixSum(n);return this.modelLineProjections[n].getViewLineNumberOfModelPosition(i,this.model.getLineMaxColumn(n+1))}getDecorationsInRange(e,t,n,i,s){const o=this.convertViewPositionToModelPosition(e.startLineNumber,e.startColumn),r=this.convertViewPositionToModelPosition(e.endLineNumber,e.endColumn);if(r.lineNumber-o.lineNumber<=e.endLineNumber-e.startLineNumber)return this.model.getDecorationsInRange(new g.Q(o.lineNumber,1,r.lineNumber,r.column),t,n,i,s);let a=[];const l=o.lineNumber-1,h=r.lineNumber-1;let c=null;for(let p=l;p<=h;p++){if(this.modelLineProjections[p].isVisible())null===c&&(c=new d.y(p+1,p===l?o.column:1));else if(null!==c){const e=this.model.getLineMaxColumn(p);a=a.concat(this.model.getDecorationsInRange(new g.Q(c.lineNumber,c.column,p,e),t,n,i)),c=null}}null!==c&&(a=a.concat(this.model.getDecorationsInRange(new g.Q(c.lineNumber,c.column,r.lineNumber,r.column),t,n,i)),c=null),a.sort(((e,t)=>{const n=g.Q.compareRangesUsingStarts(e.range,t.range);return 0===n?e.id<t.id?-1:e.id>t.id?1:0:n}));const u=[];let m=0,f=null;for(const d of a){const e=d.id;f!==e&&(f=e,u[m++]=d)}return u}getInjectedTextAt(e){const t=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[t.modelLineNumber-1].getInjectedTextAt(t.modelLineWrappedLineIdx,e.column)}normalizePosition(e,t){const n=this.getViewLineInfo(e.lineNumber);return this.modelLineProjections[n.modelLineNumber-1].normalizePosition(n.modelLineWrappedLineIdx,e,t)}getLineIndentColumn(e){const t=this.getViewLineInfo(e);return 0===t.modelLineWrappedLineIdx?this.model.getLineIndentColumn(t.modelLineNumber):0}}class B{constructor(e,t){this.modelLineNumber=e,this.modelLineWrappedLineIdx=t}}class Q{constructor(e,t){this.modelRange=e,this.viewLines=t}}class U{constructor(e){this._lines=e}convertViewPositionToModelPosition(e){return this._lines.convertViewPositionToModelPosition(e.lineNumber,e.column)}convertViewRangeToModelRange(e){return this._lines.convertViewRangeToModelRange(e)}validateViewPosition(e,t){return this._lines.validateViewPosition(e.lineNumber,e.column,t)}validateViewRange(e,t){return this._lines.validateViewRange(e,t)}convertModelPositionToViewPosition(e,t,n,i){return this._lines.convertModelPositionToViewPosition(e.lineNumber,e.column,t,n,i)}convertModelRangeToViewRange(e,t){return this._lines.convertModelRangeToViewRange(e,t)}modelPositionIsVisible(e){return this._lines.modelPositionIsVisible(e.lineNumber,e.column)}getModelLineViewLineCount(e){return this._lines.getModelLineViewLineCount(e)}getViewLineNumberOfModelPosition(e,t){return this._lines.getViewLineNumberOfModelPosition(e,t)}}class q{constructor(e){this.model=e}dispose(){}createCoordinatesConverter(){return new G(this)}getHiddenAreas(){return[]}setHiddenAreas(e){return!1}setTabSize(e){return!1}setWrappingSettings(e,t,n,i){return!1}createLineBreaksComputer(){const e=[];return{addRequest:(t,n,i)=>{e.push(null)},finalize:()=>e}}onModelFlushed(){}onModelLinesDeleted(e,t,n){return new L.Uf(t,n)}onModelLinesInserted(e,t,n,i){return new L.rZ(t,n)}onModelLineChanged(e,t,n){return[!1,new L.bu(t,1),null,null]}acceptVersionId(e){}getViewLineCount(){return this.model.getLineCount()}getActiveIndentGuide(e,t,n){return{startLineNumber:e,endLineNumber:e,indent:0}}getViewLinesBracketGuides(e,t,n){return new Array(t-e+1).fill([])}getViewLinesIndentGuides(e,t){const n=t-e+1,i=new Array(n);for(let s=0;s<n;s++)i[s]=0;return i}getViewLineContent(e){return this.model.getLineContent(e)}getViewLineLength(e){return this.model.getLineLength(e)}getViewLineMinColumn(e){return this.model.getLineMinColumn(e)}getViewLineMaxColumn(e){return this.model.getLineMaxColumn(e)}getViewLineData(e){const t=this.model.tokenization.getLineTokens(e),n=t.getLineContent();return new N.GP(n,!1,1,n.length+1,0,t.inflate(),null)}getViewLinesData(e,t,n){const i=this.model.getLineCount();e=Math.min(Math.max(1,e),i),t=Math.min(Math.max(1,t),i);const s=[];for(let o=e;o<=t;o++){const t=o-e;s[t]=n[t]?this.getViewLineData(o):null}return s}getDecorationsInRange(e,t,n,i,s){return this.model.getDecorationsInRange(e,t,n,i,s)}normalizePosition(e,t){return this.model.normalizePosition(e,t)}getLineIndentColumn(e){return this.model.getLineIndentColumn(e)}getInjectedTextAt(e){return null}}class G{constructor(e){this._lines=e}_validPosition(e){return this._lines.model.validatePosition(e)}_validRange(e){return this._lines.model.validateRange(e)}convertViewPositionToModelPosition(e){return this._validPosition(e)}convertViewRangeToModelRange(e){return this._validRange(e)}validateViewPosition(e,t){return this._validPosition(t)}validateViewRange(e,t){return this._validRange(t)}convertModelPositionToViewPosition(e){return this._validPosition(e)}convertModelRangeToViewRange(e){return this._validRange(e)}modelPositionIsVisible(e){const t=this._lines.model.getLineCount();return!(e.lineNumber<1||e.lineNumber>t)}getModelLineViewLineCount(e){return 1}getViewLineNumberOfModelPosition(e,t){return e}}var Z=n(17913);const K=Z.ZS.Right;class ${constructor(e){this.persist=0,this._requiredLanes=1,this.lanes=new Uint8Array(Math.ceil((e+1)*K/8))}reset(e){const t=Math.ceil((e+1)*K/8);this.lanes.length<t?this.lanes=new Uint8Array(t):this.lanes.fill(0),this._requiredLanes=1}get requiredLanes(){return this._requiredLanes}push(e,t,n){n&&(this.persist|=1<<e-1);for(let i=t.startLineNumber;i<=t.endLineNumber;i++){const t=K*i+(e-1);this.lanes[t>>>3]|=1<<t%8,this._requiredLanes=Math.max(this._requiredLanes,this.countAtLine(i))}}getLanesAtLine(e){const t=[];let n=K*e;for(let i=0;i<K;i++)(this.persist&1<<i||this.lanes[n>>>3]&1<<n%8)&&t.push(i+1),n++;return t.length?t:[Z.ZS.Center]}countAtLine(e){let t=K*e,n=0;for(let i=0;i<K;i++)(this.persist&1<<i||this.lanes[t>>>3]&1<<t%8)&&n++,t++;return n}}class J extends r.jG{constructor(e,t,n,i,o,r,a,l,h){if(super(),this.languageConfigurationService=a,this._themeService=l,this._attachedView=h,this.hiddenAreasModel=new ee,this.previousHiddenAreas=[],this._editorId=e,this._configuration=t,this.model=n,this._eventDispatcher=new I.ql,this.onEvent=this._eventDispatcher.onEvent,this.cursorConfig=new u.d$(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._updateConfigurationViewLineCount=this._register(new s.uC((()=>this._updateConfigurationViewLineCountNow()),0)),this._hasFocus=!1,this._viewportStart=Y.create(this.model),this.glyphLanes=new $(0),this.model.isTooLargeForTokenization())this._lines=new q(this.model);else{const e=this._configuration.options,t=e.get(50),n=e.get(139),s=e.get(146),r=e.get(138),a=e.get(129);this._lines=new z(this._editorId,this.model,i,o,t,this.model.getOptions().tabSize,n,s.wrappingColumn,r,a)}this.coordinatesConverter=this._lines.createCoordinatesConverter(),this._cursor=this._register(new c._(n,this,this.coordinatesConverter,this.cursorConfig)),this.viewLayout=this._register(new S(this._configuration,this.getLineCount(),r)),this._register(this.viewLayout.onDidScroll((e=>{e.scrollTopChanged&&this._handleVisibleLinesChanged(),e.scrollTopChanged&&this._viewportStart.invalidate(),this._eventDispatcher.emitSingleViewEvent(new L.lg(e)),this._eventDispatcher.emitOutgoingEvent(new I.s1(e.oldScrollWidth,e.oldScrollLeft,e.oldScrollHeight,e.oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop))}))),this._register(this.viewLayout.onDidContentSizeChange((e=>{this._eventDispatcher.emitOutgoingEvent(e)}))),this._decorations=new T.UB(this._editorId,this.model,this._configuration,this._lines,this.coordinatesConverter),this._registerModelEvents(),this._register(this._configuration.onDidChangeFast((e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();this._onConfigurationChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}}))),this._register(P.v.getInstance().onDidChange((()=>{this._eventDispatcher.emitSingleViewEvent(new L.U)}))),this._register(this._themeService.onDidColorThemeChange((e=>{this._invalidateDecorationsColorCache(),this._eventDispatcher.emitSingleViewEvent(new L.tO(e))}))),this._updateConfigurationViewLineCountNow()}dispose(){super.dispose(),this._decorations.dispose(),this._lines.dispose(),this._viewportStart.dispose(),this._eventDispatcher.dispose()}createLineBreaksComputer(){return this._lines.createLineBreaksComputer()}addViewEventHandler(e){this._eventDispatcher.addViewEventHandler(e)}removeViewEventHandler(e){this._eventDispatcher.removeViewEventHandler(e)}_updateConfigurationViewLineCountNow(){this._configuration.setViewLineCount(this._lines.getViewLineCount())}getModelVisibleRanges(){const e=this.viewLayout.getLinesViewportData(),t=new g.Q(e.startLineNumber,this.getLineMinColumn(e.startLineNumber),e.endLineNumber,this.getLineMaxColumn(e.endLineNumber));return this._toModelVisibleRanges(t)}visibleLinesStabilized(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!0)}_handleVisibleLinesChanged(){const e=this.getModelVisibleRanges();this._attachedView.setVisibleLines(e,!1)}setHasFocus(e){this._hasFocus=e,this._cursor.setHasFocus(e),this._eventDispatcher.emitSingleViewEvent(new L.E5(e)),this._eventDispatcher.emitOutgoingEvent(new I.TA(!e,e))}onCompositionStart(){this._eventDispatcher.emitSingleViewEvent(new L.Kb)}onCompositionEnd(){this._eventDispatcher.emitSingleViewEvent(new L.dQ)}_captureStableViewport(){if(this._viewportStart.isValid&&this.viewLayout.getCurrentScrollTop()>0){const e=new d.y(this._viewportStart.viewLineNumber,this.getLineMinColumn(this._viewportStart.viewLineNumber)),t=this.coordinatesConverter.convertViewPositionToModelPosition(e);return new ne(t,this._viewportStart.startLineDelta)}return new ne(null,0)}_onConfigurationChanged(e,t){const n=this._captureStableViewport(),i=this._configuration.options,s=i.get(50),o=i.get(139),r=i.get(146),a=i.get(138),l=i.get(129);this._lines.setWrappingSettings(s,o,r.wrappingColumn,a,l)&&(e.emitViewEvent(new L.zv),e.emitViewEvent(new L.M7),e.emitViewEvent(new L.h9(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this._updateConfigurationViewLineCount.schedule()),t.hasChanged(91)&&(this._decorations.reset(),e.emitViewEvent(new L.h9(null))),t.hasChanged(98)&&(this._decorations.reset(),e.emitViewEvent(new L.h9(null))),e.emitViewEvent(new L.Ey(t)),this.viewLayout.onConfigurationChanged(t),n.recoverViewportStart(this.coordinatesConverter,this.viewLayout),u.d$.shouldRecreate(t)&&(this.cursorConfig=new u.d$(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig))}_registerModelEvents(){this._register(this.model.onDidChangeContentOrInjectedText((e=>{try{const t=this._eventDispatcher.beginEmitViewEvents();let n=!1,s=!1;const o=e instanceof m.Ic?e.rawContentChangedEvent.changes:e.changes,r=e instanceof m.Ic?e.rawContentChangedEvent.versionId:null,a=this._lines.createLineBreaksComputer();for(const e of o)switch(e.changeType){case 4:for(let t=0;t<e.detail.length;t++){const n=e.detail[t];let i=e.injectedTexts[t];i&&(i=i.filter((e=>!e.ownerId||e.ownerId===this._editorId))),a.addRequest(n,i,null)}break;case 2:{let t=null;e.injectedText&&(t=e.injectedText.filter((e=>!e.ownerId||e.ownerId===this._editorId))),a.addRequest(e.detail,t,null);break}}const l=a.finalize(),h=new i.j3(l);for(const e of o)switch(e.changeType){case 1:this._lines.onModelFlushed(),t.emitViewEvent(new L.zv),this._decorations.reset(),this.viewLayout.onFlushed(this.getLineCount()),n=!0;break;case 3:{const i=this._lines.onModelLinesDeleted(r,e.fromLineNumber,e.toLineNumber);null!==i&&(t.emitViewEvent(i),this.viewLayout.onLinesDeleted(i.fromLineNumber,i.toLineNumber)),n=!0;break}case 4:{const i=h.takeCount(e.detail.length),s=this._lines.onModelLinesInserted(r,e.fromLineNumber,e.toLineNumber,i);null!==s&&(t.emitViewEvent(s),this.viewLayout.onLinesInserted(s.fromLineNumber,s.toLineNumber)),n=!0;break}case 2:{const n=h.dequeue(),[i,o,a,l]=this._lines.onModelLineChanged(r,e.lineNumber,n);s=i,o&&t.emitViewEvent(o),a&&(t.emitViewEvent(a),this.viewLayout.onLinesInserted(a.fromLineNumber,a.toLineNumber)),l&&(t.emitViewEvent(l),this.viewLayout.onLinesDeleted(l.fromLineNumber,l.toLineNumber));break}}null!==r&&this._lines.acceptVersionId(r),this.viewLayout.onHeightMaybeChanged(),!n&&s&&(t.emitViewEvent(new L.M7),t.emitViewEvent(new L.h9(null)),this._cursor.onLineMappingChanged(t),this._decorations.onLineMappingChanged())}finally{this._eventDispatcher.endEmitViewEvents()}const t=this._viewportStart.isValid;if(this._viewportStart.invalidate(),this._configuration.setModelLineCount(this.model.getLineCount()),this._updateConfigurationViewLineCountNow(),!this._hasFocus&&this.model.getAttachedEditorCount()>=2&&t){const e=this.model._getTrackedRange(this._viewportStart.modelTrackedRange);if(e){const t=this.coordinatesConverter.convertModelPositionToViewPosition(e.getStartPosition()),n=this.viewLayout.getVerticalOffsetForLineNumber(t.lineNumber);this.viewLayout.setScrollPosition({scrollTop:n+this._viewportStart.startLineDelta},1)}}try{const t=this._eventDispatcher.beginEmitViewEvents();e instanceof m.Ic&&t.emitOutgoingEvent(new I.VN(e.contentChangedEvent)),this._cursor.onModelContentChanged(t,e)}finally{this._eventDispatcher.endEmitViewEvents()}this._handleVisibleLinesChanged()}))),this._register(this.model.onDidChangeTokens((e=>{const t=[];for(let n=0,i=e.ranges.length;n<i;n++){const i=e.ranges[n],s=this.coordinatesConverter.convertModelPositionToViewPosition(new d.y(i.fromLineNumber,1)).lineNumber,o=this.coordinatesConverter.convertModelPositionToViewPosition(new d.y(i.toLineNumber,this.model.getLineMaxColumn(i.toLineNumber))).lineNumber;t[n]={fromLineNumber:s,toLineNumber:o}}this._eventDispatcher.emitSingleViewEvent(new L.GL(t)),this._eventDispatcher.emitOutgoingEvent(new I.Md(e))}))),this._register(this.model.onDidChangeLanguageConfiguration((e=>{this._eventDispatcher.emitSingleViewEvent(new L.qK),this.cursorConfig=new u.d$(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new I.Qo(e))}))),this._register(this.model.onDidChangeLanguage((e=>{this.cursorConfig=new u.d$(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new I.qI(e))}))),this._register(this.model.onDidChangeOptions((e=>{if(this._lines.setTabSize(this.model.getOptions().tabSize)){try{const e=this._eventDispatcher.beginEmitViewEvents();e.emitViewEvent(new L.zv),e.emitViewEvent(new L.M7),e.emitViewEvent(new L.h9(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount())}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule()}this.cursorConfig=new u.d$(this.model.getLanguageId(),this.model.getOptions(),this._configuration,this.languageConfigurationService),this._cursor.updateConfiguration(this.cursorConfig),this._eventDispatcher.emitOutgoingEvent(new I.eM(e))}))),this._register(this.model.onDidChangeDecorations((e=>{this._decorations.onModelDecorationsChanged(),this._eventDispatcher.emitSingleViewEvent(new L.h9(e)),this._eventDispatcher.emitOutgoingEvent(new I.FU(e))})))}setHiddenAreas(e,t){var n;this.hiddenAreasModel.setHiddenAreas(t,e);const i=this.hiddenAreasModel.getMergedRanges();if(i===this.previousHiddenAreas)return;this.previousHiddenAreas=i;const s=this._captureStableViewport();let o=!1;try{const e=this._eventDispatcher.beginEmitViewEvents();o=this._lines.setHiddenAreas(i),o&&(e.emitViewEvent(new L.zv),e.emitViewEvent(new L.M7),e.emitViewEvent(new L.h9(null)),this._cursor.onLineMappingChanged(e),this._decorations.onLineMappingChanged(),this.viewLayout.onFlushed(this.getLineCount()),this.viewLayout.onHeightMaybeChanged());const t=null===(n=s.viewportStartModelPosition)||void 0===n?void 0:n.lineNumber;t&&i.some((e=>e.startLineNumber<=t&&t<=e.endLineNumber))||s.recoverViewportStart(this.coordinatesConverter,this.viewLayout)}finally{this._eventDispatcher.endEmitViewEvents()}this._updateConfigurationViewLineCount.schedule(),o&&this._eventDispatcher.emitOutgoingEvent(new I.x0)}getVisibleRangesPlusViewportAboveBelow(){const e=this._configuration.options.get(145),t=this._configuration.options.get(67),n=Math.max(20,Math.round(e.height/t)),i=this.viewLayout.getLinesViewportData(),s=Math.max(1,i.completelyVisibleStartLineNumber-n),o=Math.min(this.getLineCount(),i.completelyVisibleEndLineNumber+n);return this._toModelVisibleRanges(new g.Q(s,this.getLineMinColumn(s),o,this.getLineMaxColumn(o)))}getVisibleRanges(){const e=this.getCompletelyVisibleViewRange();return this._toModelVisibleRanges(e)}getHiddenAreas(){return this._lines.getHiddenAreas()}_toModelVisibleRanges(e){const t=this.coordinatesConverter.convertViewRangeToModelRange(e),n=this._lines.getHiddenAreas();if(0===n.length)return[t];const i=[];let s=0,o=t.startLineNumber,r=t.startColumn;const a=t.endLineNumber,l=t.endColumn;for(let h=0,c=n.length;h<c;h++){const e=n[h].startLineNumber,t=n[h].endLineNumber;t<o||(e>a||(o<e&&(i[s++]=new g.Q(o,r,e-1,this.model.getLineMaxColumn(e-1))),o=t+1,r=1))}return(o<a||o===a&&r<l)&&(i[s++]=new g.Q(o,r,a,l)),i}getCompletelyVisibleViewRange(){const e=this.viewLayout.getLinesViewportData(),t=e.completelyVisibleStartLineNumber,n=e.completelyVisibleEndLineNumber;return new g.Q(t,this.getLineMinColumn(t),n,this.getLineMaxColumn(n))}getCompletelyVisibleViewRangeAtScrollTop(e){const t=this.viewLayout.getLinesViewportDataAtScrollTop(e),n=t.completelyVisibleStartLineNumber,i=t.completelyVisibleEndLineNumber;return new g.Q(n,this.getLineMinColumn(n),i,this.getLineMaxColumn(i))}saveState(){const e=this.viewLayout.saveState(),t=e.scrollTop,n=this.viewLayout.getLineNumberAtVerticalOffset(t),i=this.coordinatesConverter.convertViewPositionToModelPosition(new d.y(n,this.getLineMinColumn(n))),s=this.viewLayout.getVerticalOffsetForLineNumber(n)-t;return{scrollLeft:e.scrollLeft,firstPosition:i,firstPositionDeltaTop:s}}reduceRestoreState(e){if("undefined"===typeof e.firstPosition)return this._reduceRestoreStateCompatibility(e);const t=this.model.validatePosition(e.firstPosition),n=this.coordinatesConverter.convertModelPositionToViewPosition(t),i=this.viewLayout.getVerticalOffsetForLineNumber(n.lineNumber)-e.firstPositionDeltaTop;return{scrollLeft:e.scrollLeft,scrollTop:i}}_reduceRestoreStateCompatibility(e){return{scrollLeft:e.scrollLeft,scrollTop:e.scrollTopWithoutViewZones}}getTabSize(){return this.model.getOptions().tabSize}getLineCount(){return this._lines.getViewLineCount()}setViewport(e,t,n){this._viewportStart.update(this,e)}getActiveIndentGuide(e,t,n){return this._lines.getActiveIndentGuide(e,t,n)}getLinesIndentGuides(e,t){return this._lines.getViewLinesIndentGuides(e,t)}getBracketGuidesInRangeByLine(e,t,n,i){return this._lines.getViewLinesBracketGuides(e,t,n,i)}getLineContent(e){return this._lines.getViewLineContent(e)}getLineLength(e){return this._lines.getViewLineLength(e)}getLineMinColumn(e){return this._lines.getViewLineMinColumn(e)}getLineMaxColumn(e){return this._lines.getViewLineMaxColumn(e)}getLineFirstNonWhitespaceColumn(e){const t=l.HG(this.getLineContent(e));return-1===t?0:t+1}getLineLastNonWhitespaceColumn(e){const t=l.lT(this.getLineContent(e));return-1===t?0:t+2}getMinimapDecorationsInRange(e){return this._decorations.getMinimapDecorationsInRange(e)}getDecorationsInViewport(e){return this._decorations.getDecorationsViewportData(e).decorations}getInjectedTextAt(e){return this._lines.getInjectedTextAt(e)}getViewportViewLineRenderingData(e,t){const n=this._decorations.getDecorationsViewportData(e).inlineDecorations[t-e.startLineNumber];return this._getViewLineRenderingData(t,n)}getViewLineRenderingData(e){const t=this._decorations.getInlineDecorationsOnLine(e);return this._getViewLineRenderingData(e,t)}_getViewLineRenderingData(e,t){const n=this.model.mightContainRTL(),i=this.model.mightContainNonBasicASCII(),s=this.getTabSize(),o=this._lines.getViewLineData(e);return o.inlineDecorations&&(t=[...t,...o.inlineDecorations.map((t=>t.toInlineDecoration(e)))]),new N.qL(o.minColumn,o.maxColumn,o.content,o.continuesWithWrappedLine,n,i,o.tokens,t,s,o.startVisibleColumn)}getViewLineData(e){return this._lines.getViewLineData(e)}getMinimapLinesRenderingData(e,t,n){const i=this._lines.getViewLinesData(e,t,n);return new N.nt(this.getTabSize(),i)}getAllOverviewRulerDecorations(e){const t=this.model.getOverviewRulerDecorations(this._editorId,(0,h.$C)(this._configuration.options)),n=new X;for(const i of t){const t=i.options,s=t.overviewRuler;if(!s)continue;const o=s.position;if(0===o)continue;const r=s.getColor(e.value),a=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.startLineNumber,i.range.startColumn),l=this.coordinatesConverter.getViewLineNumberOfModelPosition(i.range.endLineNumber,i.range.endColumn);n.accept(r,t.zIndex,a,l,o)}return n.asArray}_invalidateDecorationsColorCache(){const e=this.model.getOverviewRulerDecorations();for(const t of e){const e=t.options.overviewRuler;null===e||void 0===e||e.invalidateCachedColor();const n=t.options.minimap;null===n||void 0===n||n.invalidateCachedColor()}}getValueInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueInRange(n,t)}getValueLengthInRange(e,t){const n=this.coordinatesConverter.convertViewRangeToModelRange(e);return this.model.getValueLengthInRange(n,t)}modifyPosition(e,t){const n=this.coordinatesConverter.convertViewPositionToModelPosition(e),i=this.model.modifyPosition(n,t);return this.coordinatesConverter.convertModelPositionToViewPosition(i)}deduceModelPositionRelativeToViewPosition(e,t,n){const i=this.coordinatesConverter.convertViewPositionToModelPosition(e);2===this.model.getEOL().length&&(t<0?t-=n:t+=n);const s=this.model.getOffsetAt(i)+t;return this.model.getPositionAt(s)}getPlainTextToCopy(e,t,n){const i=n?"\r\n":this.model.getEOL();(e=e.slice(0)).sort(g.Q.compareRangesUsingStarts);let s=!1,o=!1;for(const a of e)a.isEmpty()?s=!0:o=!0;if(!o){if(!t)return"";const n=e.map((e=>e.startLineNumber));let s="";for(let e=0;e<n.length;e++)e>0&&n[e-1]===n[e]||(s+=this.model.getLineContent(n[e])+i);return s}if(s&&t){const t=[];let i=0;for(const s of e){const e=s.startLineNumber;s.isEmpty()?e!==i&&t.push(this.model.getLineContent(e)):t.push(this.model.getValueInRange(s,n?2:0)),i=e}return 1===t.length?t[0]:t}const r=[];for(const a of e)a.isEmpty()||r.push(this.model.getValueInRange(a,n?2:0));return 1===r.length?r[0]:r}getRichTextToCopy(e,t){const n=this.model.getLanguageId();if(n===p.vH)return null;if(1!==e.length)return null;let i=e[0];if(i.isEmpty()){if(!t)return null;const e=i.startLineNumber;i=new g.Q(e,this.model.getLineMinColumn(e),e,this.model.getLineMaxColumn(e))}const s=this._configuration.options.get(50),o=this._getColorMap();let r;if(/[:;\\\/<>]/.test(s.fontFamily)||s.fontFamily===h.jU.fontFamily)r=h.jU.fontFamily;else{r=s.fontFamily,r=r.replace(/"/g,"'");if(!/[,']/.test(r)){/[+ ]/.test(r)&&(r="'".concat(r,"'"))}r="".concat(r,", ").concat(h.jU.fontFamily)}return{mode:n,html:'<div style="'+"color: ".concat(o[1],";")+"background-color: ".concat(o[2],";")+"font-family: ".concat(r,";")+"font-weight: ".concat(s.fontWeight,";")+"font-size: ".concat(s.fontSize,"px;")+"line-height: ".concat(s.lineHeight,"px;")+'white-space: pre;">'+this._getHTMLToCopy(i,o)+"</div>"}}_getHTMLToCopy(e,t){const n=e.startLineNumber,i=e.startColumn,s=e.endLineNumber,o=e.endColumn,r=this.getTabSize();let l="";for(let h=n;h<=s;h++){const e=this.model.tokenization.getLineTokens(h),c=e.getLineContent(),u=h===n?i-1:0,d=h===s?o-1:c.length;l+=""===c?"<br>":(0,_.s0)(c,e.inflate(),t,u,d,r,a.uF)}return l}_getColorMap(){const e=f.dG.getColorMap(),t=["#000000"];if(e)for(let n=1,i=e.length;n<i;n++)t[n]=o.Q1.Format.CSS.formatHex(e[n]);return t}getPrimaryCursorState(){return this._cursor.getPrimaryCursorState()}getLastAddedCursorIndex(){return this._cursor.getLastAddedCursorIndex()}getCursorStates(){return this._cursor.getCursorStates()}setCursorStates(e,t,n){return this._withViewEventsCollector((i=>this._cursor.setStates(i,e,t,n)))}getCursorColumnSelectData(){return this._cursor.getCursorColumnSelectData()}getCursorAutoClosedCharacters(){return this._cursor.getAutoClosedCharacters()}setCursorColumnSelectData(e){this._cursor.setCursorColumnSelectData(e)}getPrevEditOperationType(){return this._cursor.getPrevEditOperationType()}setPrevEditOperationType(e){this._cursor.setPrevEditOperationType(e)}getSelection(){return this._cursor.getSelection()}getSelections(){return this._cursor.getSelections()}getPosition(){return this._cursor.getPrimaryCursorState().modelState.position}setSelections(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._withViewEventsCollector((i=>this._cursor.setSelections(i,e,t,n)))}saveCursorState(){return this._cursor.saveState()}restoreCursorState(e){this._withViewEventsCollector((t=>this._cursor.restoreState(t,e)))}_executeCursorEdit(e){this._cursor.context.cursorConfig.readOnly?this._eventDispatcher.emitOutgoingEvent(new I.cT):this._withViewEventsCollector(e)}executeEdits(e,t,n){this._executeCursorEdit((i=>this._cursor.executeEdits(i,e,t,n)))}startComposition(){this._executeCursorEdit((e=>this._cursor.startComposition(e)))}endComposition(e){this._executeCursorEdit((t=>this._cursor.endComposition(t,e)))}type(e,t){this._executeCursorEdit((n=>this._cursor.type(n,e,t)))}compositionType(e,t,n,i,s){this._executeCursorEdit((o=>this._cursor.compositionType(o,e,t,n,i,s)))}paste(e,t,n,i){this._executeCursorEdit((s=>this._cursor.paste(s,e,t,n,i)))}cut(e){this._executeCursorEdit((t=>this._cursor.cut(t,e)))}executeCommand(e,t){this._executeCursorEdit((n=>this._cursor.executeCommand(n,e,t)))}executeCommands(e,t){this._executeCursorEdit((n=>this._cursor.executeCommands(n,e,t)))}revealAllCursors(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._withViewEventsCollector((i=>this._cursor.revealAll(i,e,n,0,t,0)))}revealPrimaryCursor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._withViewEventsCollector((i=>this._cursor.revealPrimary(i,e,n,0,t,0)))}revealTopMostCursor(e){const t=this._cursor.getTopMostViewPosition(),n=new g.Q(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((t=>t.emitViewEvent(new L.Hf(e,!1,n,null,0,!0,0))))}revealBottomMostCursor(e){const t=this._cursor.getBottomMostViewPosition(),n=new g.Q(t.lineNumber,t.column,t.lineNumber,t.column);this._withViewEventsCollector((t=>t.emitViewEvent(new L.Hf(e,!1,n,null,0,!0,0))))}revealRange(e,t,n,i,s){this._withViewEventsCollector((o=>o.emitViewEvent(new L.Hf(e,!1,n,null,i,t,s))))}changeWhitespace(e){this.viewLayout.changeWhitespace(e)&&(this._eventDispatcher.emitSingleViewEvent(new L.fu),this._eventDispatcher.emitOutgoingEvent(new I.fu))}_withViewEventsCollector(e){try{return e(this._eventDispatcher.beginEmitViewEvents())}finally{this._eventDispatcher.endEmitViewEvents()}}batchEvents(e){this._withViewEventsCollector((()=>{e()}))}normalizePosition(e,t){return this._lines.normalizePosition(e,t)}getLineIndentColumn(e){return this._lines.getLineIndentColumn(e)}}class Y{static create(e){const t=e._setTrackedRange(null,new g.Q(1,1,1,1),1);return new Y(e,1,!1,t,0)}get viewLineNumber(){return this._viewLineNumber}get isValid(){return this._isValid}get modelTrackedRange(){return this._modelTrackedRange}get startLineDelta(){return this._startLineDelta}constructor(e,t,n,i,s){this._model=e,this._viewLineNumber=t,this._isValid=n,this._modelTrackedRange=i,this._startLineDelta=s}dispose(){this._model._setTrackedRange(this._modelTrackedRange,null,1)}update(e,t){const n=e.coordinatesConverter.convertViewPositionToModelPosition(new d.y(t,e.getLineMinColumn(t))),i=e.model._setTrackedRange(this._modelTrackedRange,new g.Q(n.lineNumber,n.column,n.lineNumber,n.column),1),s=e.viewLayout.getVerticalOffsetForLineNumber(t),o=e.viewLayout.getCurrentScrollTop();this._viewLineNumber=t,this._isValid=!0,this._modelTrackedRange=i,this._startLineDelta=o-s}invalidate(){this._isValid=!1}}class X{constructor(){this._asMap=Object.create(null),this.asArray=[]}accept(e,t,n,i,s){const o=this._asMap[e];if(o){const e=o.data,t=e[e.length-3],r=e[e.length-1];if(t===s&&r+1>=n)return void(i>r&&(e[e.length-1]=i));e.push(s,n,i)}else{const o=new N.Uv(e,t,[s,n,i]);this._asMap[e]=o,this.asArray.push(o)}}}class ee{constructor(){this.hiddenAreas=new Map,this.shouldRecompute=!1,this.ranges=[]}setHiddenAreas(e,t){const n=this.hiddenAreas.get(e);n&&te(n,t)||(this.hiddenAreas.set(e,t),this.shouldRecompute=!0)}getMergedRanges(){if(!this.shouldRecompute)return this.ranges;this.shouldRecompute=!1;const e=Array.from(this.hiddenAreas.values()).reduce(((e,t)=>function(e,t){const n=[];let i=0,s=0;for(;i<e.length&&s<t.length;){const o=e[i],r=t[s];if(o.endLineNumber<r.startLineNumber-1)n.push(e[i++]);else if(r.endLineNumber<o.startLineNumber-1)n.push(t[s++]);else{const e=Math.min(o.startLineNumber,r.startLineNumber),t=Math.max(o.endLineNumber,r.endLineNumber);n.push(new g.Q(e,1,t,1)),i++,s++}}for(;i<e.length;)n.push(e[i++]);for(;s<t.length;)n.push(t[s++]);return n}(e,t)),[]);return te(this.ranges,e)||(this.ranges=e),this.ranges}}function te(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].equalsRange(t[n]))return!1;return!0}class ne{constructor(e,t){this.viewportStartModelPosition=e,this.startLineDelta=t}recoverViewportStart(e,t){if(!this.viewportStartModelPosition)return;const n=e.convertModelPositionToViewPosition(this.viewportStartModelPosition),i=t.getVerticalOffsetForLineNumber(n.lineNumber);t.setScrollPosition({scrollTop:i+this.startLineDelta},1)}}},41037:(e,t,n)=>{n.d(t,{FU:()=>m,H:()=>a,Md:()=>C,Qo:()=>p,S8:()=>d,TA:()=>l,VN:()=>_,cT:()=>g,eM:()=>L,fu:()=>c,qI:()=>f,ql:()=>o,s1:()=>h,x0:()=>u});var i=n(4640),s=n(60704);class o extends s.jG{constructor(){super(),this._onEvent=this._register(new i.vl),this.onEvent=this._onEvent.event,this._eventHandlers=[],this._viewEventQueue=null,this._isConsumingViewEventQueue=!1,this._collector=null,this._collectorCnt=0,this._outgoingEvents=[]}emitOutgoingEvent(e){this._addOutgoingEvent(e),this._emitOutgoingEvents()}_addOutgoingEvent(e){for(let t=0,n=this._outgoingEvents.length;t<n;t++){const n=this._outgoingEvents[t].kind===e.kind?this._outgoingEvents[t].attemptToMerge(e):null;if(n)return void(this._outgoingEvents[t]=n)}this._outgoingEvents.push(e)}_emitOutgoingEvents(){for(;this._outgoingEvents.length>0;){if(this._collector||this._isConsumingViewEventQueue)return;const e=this._outgoingEvents.shift();e.isNoOp()||this._onEvent.fire(e)}}addViewEventHandler(e){for(let t=0,n=this._eventHandlers.length;t<n;t++)this._eventHandlers[t]===e&&console.warn("Detected duplicate listener in ViewEventDispatcher",e);this._eventHandlers.push(e)}removeViewEventHandler(e){for(let t=0;t<this._eventHandlers.length;t++)if(this._eventHandlers[t]===e){this._eventHandlers.splice(t,1);break}}beginEmitViewEvents(){return this._collectorCnt++,1===this._collectorCnt&&(this._collector=new r),this._collector}endEmitViewEvents(){if(this._collectorCnt--,0===this._collectorCnt){const e=this._collector.outgoingEvents,t=this._collector.viewEvents;this._collector=null;for(const n of e)this._addOutgoingEvent(n);t.length>0&&this._emitMany(t)}this._emitOutgoingEvents()}emitSingleViewEvent(e){try{this.beginEmitViewEvents().emitViewEvent(e)}finally{this.endEmitViewEvents()}}_emitMany(e){this._viewEventQueue?this._viewEventQueue=this._viewEventQueue.concat(e):this._viewEventQueue=e,this._isConsumingViewEventQueue||this._consumeViewEventQueue()}_consumeViewEventQueue(){try{this._isConsumingViewEventQueue=!0,this._doConsumeQueue()}finally{this._isConsumingViewEventQueue=!1}}_doConsumeQueue(){for(;this._viewEventQueue;){const e=this._viewEventQueue;this._viewEventQueue=null;const t=this._eventHandlers.slice(0);for(const n of t)n.handleEvents(e)}}}class r{constructor(){this.viewEvents=[],this.outgoingEvents=[]}emitViewEvent(e){this.viewEvents.push(e)}emitOutgoingEvent(e){this.outgoingEvents.push(e)}}class a{constructor(e,t,n,i){this.kind=0,this._oldContentWidth=e,this._oldContentHeight=t,this.contentWidth=n,this.contentHeight=i,this.contentWidthChanged=this._oldContentWidth!==this.contentWidth,this.contentHeightChanged=this._oldContentHeight!==this.contentHeight}isNoOp(){return!this.contentWidthChanged&&!this.contentHeightChanged}attemptToMerge(e){return e.kind!==this.kind?null:new a(this._oldContentWidth,this._oldContentHeight,e.contentWidth,e.contentHeight)}}class l{constructor(e,t){this.kind=1,this.oldHasFocus=e,this.hasFocus=t}isNoOp(){return this.oldHasFocus===this.hasFocus}attemptToMerge(e){return e.kind!==this.kind?null:new l(this.oldHasFocus,e.hasFocus)}}class h{constructor(e,t,n,i,s,o,r,a){this.kind=2,this._oldScrollWidth=e,this._oldScrollLeft=t,this._oldScrollHeight=n,this._oldScrollTop=i,this.scrollWidth=s,this.scrollLeft=o,this.scrollHeight=r,this.scrollTop=a,this.scrollWidthChanged=this._oldScrollWidth!==this.scrollWidth,this.scrollLeftChanged=this._oldScrollLeft!==this.scrollLeft,this.scrollHeightChanged=this._oldScrollHeight!==this.scrollHeight,this.scrollTopChanged=this._oldScrollTop!==this.scrollTop}isNoOp(){return!this.scrollWidthChanged&&!this.scrollLeftChanged&&!this.scrollHeightChanged&&!this.scrollTopChanged}attemptToMerge(e){return e.kind!==this.kind?null:new h(this._oldScrollWidth,this._oldScrollLeft,this._oldScrollHeight,this._oldScrollTop,e.scrollWidth,e.scrollLeft,e.scrollHeight,e.scrollTop)}}class c{constructor(){this.kind=3}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class u{constructor(){this.kind=4}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class d{constructor(e,t,n,i,s,o,r){this.kind=6,this.oldSelections=e,this.selections=t,this.oldModelVersionId=n,this.modelVersionId=i,this.source=s,this.reason=o,this.reachedMaxCursorCount=r}static _selectionsAreEqual(e,t){if(!e&&!t)return!0;if(!e||!t)return!1;const n=e.length;if(n!==t.length)return!1;for(let i=0;i<n;i++)if(!e[i].equalsSelection(t[i]))return!1;return!0}isNoOp(){return d._selectionsAreEqual(this.oldSelections,this.selections)&&this.oldModelVersionId===this.modelVersionId}attemptToMerge(e){return e.kind!==this.kind?null:new d(this.oldSelections,e.selections,this.oldModelVersionId,e.modelVersionId,e.source,e.reason,this.reachedMaxCursorCount||e.reachedMaxCursorCount)}}class g{constructor(){this.kind=5}isNoOp(){return!1}attemptToMerge(e){return e.kind!==this.kind?null:this}}class m{constructor(e){this.event=e,this.kind=7}isNoOp(){return!1}attemptToMerge(e){return null}}class f{constructor(e){this.event=e,this.kind=8}isNoOp(){return!1}attemptToMerge(e){return null}}class p{constructor(e){this.event=e,this.kind=9}isNoOp(){return!1}attemptToMerge(e){return null}}class _{constructor(e){this.event=e,this.kind=10}isNoOp(){return!1}attemptToMerge(e){return null}}class L{constructor(e){this.event=e,this.kind=11}isNoOp(){return!1}attemptToMerge(e){return null}}class C{constructor(e){this.event=e,this.kind=12}isNoOp(){return!1}attemptToMerge(e){return null}}}}]);
//# sourceMappingURL=monaco-editor-vendor.192dbdcc.fbefa1cb.js.map