"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[596],{42861:function(e,t,i){i.r(t),i.d(t,{DragAndDropController:function(){return m}});var n=i(15671),o=i(43144),r=i(11752),s=i(61120),a=i(60136),c=i(43668),l=i(10526),d=i(4827),h=i(98351),u=i(10849),g=i(30788),p=i(52091),_=i(27959),f=function(){function e(t,i,o){(0,n.Z)(this,e),this.selection=t,this.targetPosition=i,this.copy=o,this.targetSelection=null}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,t){var i=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new g.e(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new p.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new p.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new p.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new p.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new p.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}},{key:"computeCursorState",value:function(e,t){return this.targetSelection}}]),e}();function v(e){return d.dz?e.altKey:e.ctrlKey}var m=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e){var o;return(0,n.Z)(this,i),(o=t.call(this))._editor=e,o._register(o._editor.onMouseDown((function(e){return o._onEditorMouseDown(e)}))),o._register(o._editor.onMouseUp((function(e){return o._onEditorMouseUp(e)}))),o._register(o._editor.onMouseDrag((function(e){return o._onEditorMouseDrag(e)}))),o._register(o._editor.onMouseDrop((function(e){return o._onEditorMouseDrop(e)}))),o._register(o._editor.onMouseDropCanceled((function(){return o._onEditorMouseDropCanceled()}))),o._register(o._editor.onKeyDown((function(e){return o.onEditorKeyDown(e)}))),o._register(o._editor.onKeyUp((function(e){return o.onEditorKeyUp(e)}))),o._register(o._editor.onDidBlurEditorWidget((function(){return o.onEditorBlur()}))),o._register(o._editor.onDidBlurEditorText((function(){return o.onEditorBlur()}))),o._dndDecorationIds=[],o._mouseDown=!1,o._modifierPressed=!1,o._dragSelection=null,o}return(0,o.Z)(i,[{key:"onEditorBlur",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}},{key:"onEditorKeyDown",value:function(e){this._editor.getOption(31)&&!this._editor.getOption(18)&&(v(e)&&(this._modifierPressed=!0),this._mouseDown&&v(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}},{key:"onEditorKeyUp",value:function(e){this._editor.getOption(31)&&!this._editor.getOption(18)&&(v(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===i.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}},{key:"_onEditorMouseDown",value:function(e){this._mouseDown=!0}},{key:"_onEditorMouseUp",value:function(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}},{key:"_onEditorMouseDrag",value:function(e){var t=e.target;if(null===this._dragSelection){var i=(this._editor.getSelections()||[]).filter((function(e){return t.position&&e.containsPosition(t.position)}));if(1!==i.length)return;this._dragSelection=i[0]}v(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}},{key:"_onEditorMouseDropCanceled",value:function(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"_onEditorMouseDrop",value:function(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){var t=new u.L(e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){var n=null;if(e.event.shiftKey){var o=this._editor.getSelection();if(o){var r=o.selectionStartLineNumber,s=o.selectionStartColumn;n=[new p.Y(r,s,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map((function(e){return e.containsPosition(t)?new p.Y(t.lineNumber,t.column,t.lineNumber,t.column):e}));this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(v(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(i.ID,new f(this._dragSelection,t,v(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"showAt",value:function(e){var t=[{range:new g.e(e.lineNumber,e.column,e.lineNumber,e.column),options:i._DECORATION_OPTIONS}];this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,t),this._editor.revealPosition(e,1)}},{key:"_removeDecoration",value:function(){this._dndDecorationIds=this._editor.deltaDecorations(this._dndDecorationIds,[])}},{key:"_hitContent",value:function(e){return 6===e.type||7===e.type}},{key:"_hitMargin",value:function(e){return 2===e.type||3===e.type||4===e.type}},{key:"dispose",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,(0,r.Z)((0,s.Z)(i.prototype),"dispose",this).call(this)}}]),i}(l.JT);m.ID="editor.contrib.dragAndDrop",m.TRIGGER_KEY_VALUE=d.dz?6:5,m._DECORATION_OPTIONS=_.qx.register({description:"dnd-target",className:"dnd-target"}),(0,h._K)(m.ID,m)},21992:function(e,t,i){i.r(t);var n=i(87757),o=i.n(n),r=i(32124),s=i(64272),a=i(50605),c=i(26777),l=i(54280),d=i(89850),h=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{c(n.next(e))}catch(t){r(t)}}function a(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};d.P0.registerCommand("_executeDocumentSymbolProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return h(this,void 0,void 0,o().mark((function t(){var n,d,h,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i[0],(0,s.p_)(a.o.isUri(n)),d=e.get(l.Je),h=e.get(c.S),t.next=6,h.createModelReference(n);case 6:return u=t.sent,t.prev=7,t.next=10,d.getOrCreate(u.object.textEditorModel,r.T.None);case 10:return t.abrupt("return",t.sent.getTopLevelSymbols());case 11:return t.prev=11,u.dispose(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[7,,11,14]])})))}))},54280:function(e,t,i){i.d(t,{Je:function(){return D}});var n=i(93433),o=i(29439),r=i(37762),s=i(60136),a=i(43668),c=i(15671),l=i(43144),d=i(87757),h=i.n(d),u=i(71881),g=i(32124),p=i(68552),_=i(25138),f=i(49584),v=i(10849),m=i(30788),S=i(22847),y=i(8850),b=i(11280),C=i(74463),k=i(10526),w=i(45161),N=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},R=function(e,t){return function(i,n){t(i,n,e)}},x=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{c(n.next(e))}catch(t){r(t)}}function a(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},I=function(){function e(){(0,c.Z)(this,e)}return(0,l.Z)(e,[{key:"remove",value:function(){this.parent&&this.parent.children.delete(this.id)}}],[{key:"findId",value:function(e,t){var i;"string"===typeof e?i="".concat(t.id,"/").concat(e):(i="".concat(t.id,"/").concat(e.name),void 0!==t.children.get(i)&&(i="".concat(t.id,"/").concat(e.name,"_").concat(e.range.startLineNumber,"_").concat(e.range.startColumn)));for(var n=i,o=0;void 0!==t.children.get(n);o++)n="".concat(i,"_").concat(o);return n}},{key:"empty",value:function(e){return 0===e.children.size}}]),e}(),F=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(e,n,o){var r;return(0,c.Z)(this,i),(r=t.call(this)).id=e,r.parent=n,r.symbol=o,r.children=new Map,r}return(0,l.Z)(i)}(I),O=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(e,n,o,r){var s;return(0,c.Z)(this,i),(s=t.call(this)).id=e,s.parent=n,s.label=o,s.order=r,s.children=new Map,s}return(0,l.Z)(i)}(I),E=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(e){var n;return(0,c.Z)(this,i),(n=t.call(this)).uri=e,n.id="root",n.parent=void 0,n._groups=new Map,n.children=new Map,n.id="root",n.parent=void 0,n}return(0,l.Z)(i,[{key:"_compact",value:function(){var e,t=0,i=(0,r.Z)(this._groups);try{for(i.s();!(e=i.n()).done;){var n=(0,o.Z)(e.value,2),s=n[0];0===n[1].children.size?this._groups.delete(s):t+=1}}catch(h){i.e(h)}finally{i.f()}if(1!==t)this.children=this._groups;else{var a,c=_.$.first(this._groups.values()),l=(0,r.Z)(c.children);try{for(l.s();!(a=l.n()).done;){var d=(0,o.Z)(a.value,2)[1];d.parent=this,this.children.set(d.id,d)}}catch(h){l.e(h)}finally{l.f()}}return this}},{key:"getTopLevelSymbols",value:function(){var e,t=[],i=(0,r.Z)(this.children.values());try{for(i.s();!(e=i.n()).done;){var o=e.value;o instanceof F?t.push(o.symbol):t.push.apply(t,(0,n.Z)(_.$.map(o.children.values(),(function(e){return e.symbol}))))}}catch(s){i.e(s)}finally{i.f()}return t.sort((function(e,t){return m.e.compareRangesUsingStarts(e.range,t.range)}))}},{key:"asListOfDocumentSymbols",value:function(){var e=this.getTopLevelSymbols(),t=[];return i._flattenDocumentSymbols(t,e,""),t.sort((function(e,t){return v.L.compare(m.e.getStartPosition(e.range),m.e.getStartPosition(t.range))||v.L.compare(m.e.getEndPosition(t.range),m.e.getEndPosition(e.range))}))}}],[{key:"create",value:function(e,t,n){var o=new g.A(n),s=new i(t.uri),a=e.ordered(t),c=a.map((function(e,n){var a,c=I.findId("provider_".concat(n),s),l=new O(c,s,null!==(a=e.displayName)&&void 0!==a?a:"Unknown Outline Provider",n);return Promise.resolve(e.provideDocumentSymbols(t,o.token)).then((function(e){var t,n=(0,r.Z)(e||[]);try{for(n.s();!(t=n.n()).done;){var o=t.value;i._makeOutlineElement(o,l)}}catch(s){n.e(s)}finally{n.f()}return l}),(function(e){return(0,p.Cp)(e),l})).then((function(e){I.empty(e)?e.remove():s._groups.set(c,e)}))})),l=e.onDidChange((function(){var i=e.ordered(t);(0,u.fS)(i,a)||o.cancel()}));return Promise.all(c).then((function(){return o.token.isCancellationRequested&&!n.isCancellationRequested?i.create(e,t,n):s._compact()})).finally((function(){l.dispose()}))}},{key:"_makeOutlineElement",value:function(e,t){var n=I.findId(e,t),o=new F(n,t,e);if(e.children){var s,a=(0,r.Z)(e.children);try{for(a.s();!(s=a.n()).done;){var c=s.value;i._makeOutlineElement(c,o)}}catch(l){a.e(l)}finally{a.f()}}t.children.set(o.id,o)}},{key:"_flattenDocumentSymbols",value:function(e,t,n){var o,s=(0,r.Z)(t);try{for(s.s();!(o=s.n()).done;){var a=o.value;e.push({kind:a.kind,tags:a.tags,name:a.name,detail:a.detail,containerName:a.containerName||n,range:a.range,selectionRange:a.selectionRange,children:void 0}),a.children&&i._flattenDocumentSymbols(e,a.children,a.name)}}catch(c){s.e(c)}finally{s.f()}}}]),i}(I),D=(0,y.yh)("IOutlineModelService"),M=function(){function e(t,i,n){var o=this;(0,c.Z)(this,e),this._languageFeaturesService=t,this._disposables=new k.SL,this._cache=new f.z6(10,.7),this._debounceInformation=i.for(t.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(n.onModelRemoved((function(e){o._cache.delete(e.id)})))}return(0,l.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose()}},{key:"getOrCreate",value:function(e,t){return x(this,void 0,void 0,h().mark((function i(){var n,o,r,s,a,c,l=this;return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n=this._languageFeaturesService.documentSymbolProvider,o=n.ordered(e),(r=this._cache.get(e.id))&&r.versionId===e.getVersionId()&&(0,u.fS)(r.provider,o)||(s=new g.A,r={versionId:e.getVersionId(),provider:o,promiseCnt:0,source:s,promise:E.create(n,e,s.token),model:void 0},this._cache.set(e.id,r),a=Date.now(),r.promise.then((function(t){r.model=t,l._debounceInformation.update(e,Date.now()-a)})).catch((function(t){l._cache.delete(e.id)}))),!r.model){i.next=6;break}return i.abrupt("return",r.model);case 6:return r.promiseCnt+=1,c=t.onCancellationRequested((function(){0===--r.promiseCnt&&(r.source.cancel(),l._cache.delete(e.id))})),i.prev=8,i.next=11,r.promise;case 11:return i.abrupt("return",i.sent);case 12:return i.prev=12,c.dispose(),i.finish(12);case 15:case"end":return i.stop()}}),i,this,[[8,,12,15]])})))}}]),e}();M=N([R(0,w.p),R(1,S.A),R(2,C.q)],M),(0,b.z)(D,M,!0)},50004:function(e,t,i){i.d(t,{yy:function(){return k},Dl:function(){return w},YQ:function(){return N}});var n=i(11752),o=i(61120),r=i(60136),s=i(43668),a=i(15671),c=i(43144),l=i(26684),d=i(30788),h=i(32124),u=i(10526),g=i(97326),p=i(98351),_=i(49525),f=i(49511),v=i(8850),m=i(11280),S=i(87697),y=(0,v.yh)("IEditorCancelService"),b=new _.uy("cancellableOperation",!1,(0,S.N)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,m.z)(y,function(){function e(){(0,a.Z)(this,e),this._tokens=new WeakMap}return(0,c.Z)(e,[{key:"add",value:function(e,t){var i,n=this._tokens.get(e);return n||(n=e.invokeWithinContext((function(e){return{key:b.bindTo(e.get(_.i6)),tokens:new f.S}})),this._tokens.set(e,n)),n.key.set(!0),i=n.tokens.push(t),function(){i&&(i(),n.key.set(!n.tokens.isEmpty()),i=void 0)}}},{key:"cancel",value:function(e){var t=this._tokens.get(e);if(t){var i=t.tokens.pop();i&&(i.cancel(),t.key.set(!t.tokens.isEmpty()))}}}]),e}(),!0);var C=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(e,n){var o;return(0,a.Z)(this,i),(o=t.call(this,n)).editor=e,o._unregister=e.invokeWithinContext((function(t){return t.get(y).add(e,(0,g.Z)(o))})),o}return(0,c.Z)(i,[{key:"dispose",value:function(){this._unregister(),(0,n.Z)((0,o.Z)(i.prototype),"dispose",this).call(this)}}]),i}(h.A);(0,p.fK)(new(function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,{id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:b})}return(0,c.Z)(i,[{key:"runEditorCommand",value:function(e,t){e.get(y).cancel(t)}}]),i}(p._l)));var k=function(){function e(t,i){if((0,a.Z)(this,e),this.flags=i,0!==(1&this.flags)){var n=t.getModel();this.modelVersionId=n?l.WU("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;0!==(4&this.flags)?this.position=t.getPosition():this.position=null,0!==(2&this.flags)?this.selection=t.getSelection():this.selection=null,0!==(8&this.flags)?(this.scrollLeft=t.getScrollLeft(),this.scrollTop=t.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}return(0,c.Z)(e,[{key:"_equals",value:function(t){if(!(t instanceof e))return!1;var i=t;return this.modelVersionId===i.modelVersionId&&(this.scrollLeft===i.scrollLeft&&this.scrollTop===i.scrollTop&&(!(!this.position&&i.position||this.position&&!i.position||this.position&&i.position&&!this.position.equals(i.position))&&!(!this.selection&&i.selection||this.selection&&!i.selection||this.selection&&i.selection&&!this.selection.equalsRange(i.selection))))}},{key:"validate",value:function(t){return this._equals(new e(t,this.flags))}}]),e}(),w=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(e,n,o,r){var s;return(0,a.Z)(this,i),(s=t.call(this,e,r))._listener=new u.SL,4&n&&s._listener.add(e.onDidChangeCursorPosition((function(e){o&&d.e.containsPosition(o,e.position)||s.cancel()}))),2&n&&s._listener.add(e.onDidChangeCursorSelection((function(e){o&&d.e.containsRange(o,e.selection)||s.cancel()}))),8&n&&s._listener.add(e.onDidScrollChange((function(e){return s.cancel()}))),1&n&&(s._listener.add(e.onDidChangeModel((function(e){return s.cancel()}))),s._listener.add(e.onDidChangeModelContent((function(e){return s.cancel()})))),s}return(0,c.Z)(i,[{key:"dispose",value:function(){this._listener.dispose(),(0,n.Z)((0,o.Z)(i.prototype),"dispose",this).call(this)}}]),i}(C),N=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(e,n){var o;return(0,a.Z)(this,i),(o=t.call(this,n))._listener=e.onDidChangeContent((function(){return o.cancel()})),o}return(0,c.Z)(i,[{key:"dispose",value:function(){this._listener.dispose(),(0,n.Z)((0,o.Z)(i.prototype),"dispose",this).call(this)}}]),i}(h.A)},94879:function(e,t,i){i.r(t),i.d(t,{CommonFindController:function(){return ft},FindController:function(){return vt},MatchFindAction:function(){return Ct},NextMatchFindAction:function(){return kt},NextSelectionMatchFindAction:function(){return Rt},PreviousMatchFindAction:function(){return wt},PreviousSelectionMatchFindAction:function(){return xt},SelectionMatchFindAction:function(){return Nt},StartFindAction:function(){return mt},StartFindReplaceAction:function(){return It},StartFindWithArgsAction:function(){return yt},StartFindWithSelectionAction:function(){return bt},getSelectionSearchString:function(){return _t}});var n=i(15671),o=i(43144),r=i(11752),s=i(61120),a=i(60136),c=i(43668),l=i(87757),d=i.n(l),h=i(32590),u=i(10526),g=i(26684),p=i(98351),_=i(44474),f=i(71881),v=i(11922),m=i(10849),S=i(30788),y=i(52091),b=i(37926),C=i(93433),k=i(37762),w=i(36158),N=i(27959),R=i(6574),x=i(3553),I=function(){function e(t){(0,n.Z)(this,e),this._editor=t,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}return(0,o.Z)(e,[{key:"dispose",value:function(){this._editor.deltaDecorations(this._allDecorations(),[]),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}},{key:"reset",value:function(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}},{key:"getCount",value:function(){return this._decorations.length}},{key:"getFindScope",value:function(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}},{key:"getFindScopes",value:function(){var e=this;if(this._findScopeDecorationIds.length){var t=this._findScopeDecorationIds.map((function(t){return e._editor.getModel().getDecorationRange(t)})).filter((function(e){return!!e}));if(t.length)return t}return null}},{key:"getStartPosition",value:function(){return this._startPosition}},{key:"setStartPosition",value:function(e){this._startPosition=e,this.setCurrentFindMatch(null)}},{key:"_getDecorationIndex",value:function(e){var t=this._decorations.indexOf(e);return t>=0?t+1:1}},{key:"getCurrentMatchesPosition",value:function(t){var i,n=this._editor.getModel().getDecorationsInRange(t),o=(0,k.Z)(n);try{for(o.s();!(i=o.n()).done;){var r=i.value,s=r.options;if(s===e._FIND_MATCH_DECORATION||s===e._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(r.id)}}catch(a){o.e(a)}finally{o.f()}return 0}},{key:"setCurrentFindMatch",value:function(t){var i=this,n=null,o=0;if(t)for(var r=0,s=this._decorations.length;r<s;r++){var a=this._editor.getModel().getDecorationRange(this._decorations[r]);if(t.equalsRange(a)){n=this._decorations[r],o=r+1;break}}return null===this._highlightedDecorationId&&null===n||this._editor.changeDecorations((function(t){if(null!==i._highlightedDecorationId&&(t.changeDecorationOptions(i._highlightedDecorationId,e._FIND_MATCH_DECORATION),i._highlightedDecorationId=null),null!==n&&(i._highlightedDecorationId=n,t.changeDecorationOptions(i._highlightedDecorationId,e._CURRENT_FIND_MATCH_DECORATION)),null!==i._rangeHighlightDecorationId&&(t.removeDecoration(i._rangeHighlightDecorationId),i._rangeHighlightDecorationId=null),null!==n){var o=i._editor.getModel().getDecorationRange(n);if(o.startLineNumber!==o.endLineNumber&&1===o.endColumn){var r=o.endLineNumber-1,s=i._editor.getModel().getLineMaxColumn(r);o=new S.e(o.startLineNumber,o.startColumn,r,s)}i._rangeHighlightDecorationId=t.addDecoration(o,e._RANGE_HIGHLIGHT_DECORATION)}})),o}},{key:"set",value:function(t,i){var n=this;this._editor.changeDecorations((function(o){var r=e._FIND_MATCH_DECORATION,s=[];if(t.length>1e3){r=e._FIND_MATCH_NO_OVERVIEW_DECORATION;for(var a=n._editor.getModel().getLineCount(),c=n._editor.getLayoutInfo().height/a,l=Math.max(2,Math.ceil(3/c)),d=t[0].range.startLineNumber,h=t[0].range.endLineNumber,u=1,g=t.length;u<g;u++){var p=t[u].range;h+l>=p.startLineNumber?p.endLineNumber>h&&(h=p.endLineNumber):(s.push({range:new S.e(d,1,h,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),d=p.startLineNumber,h=p.endLineNumber)}s.push({range:new S.e(d,1,h,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}for(var _=new Array(t.length),f=0,v=t.length;f<v;f++)_[f]={range:t[f].range,options:r};n._decorations=o.deltaDecorations(n._decorations,_),n._overviewRulerApproximateDecorations=o.deltaDecorations(n._overviewRulerApproximateDecorations,s),n._rangeHighlightDecorationId&&(o.removeDecoration(n._rangeHighlightDecorationId),n._rangeHighlightDecorationId=null),n._findScopeDecorationIds.length&&(n._findScopeDecorationIds.forEach((function(e){return o.removeDecoration(e)})),n._findScopeDecorationIds=[]),(null===i||void 0===i?void 0:i.length)&&(n._findScopeDecorationIds=i.map((function(t){return o.addDecoration(t,e._FIND_SCOPE_DECORATION)})))}))}},{key:"matchBeforePosition",value:function(e){if(0===this._decorations.length)return null;for(var t=this._decorations.length-1;t>=0;t--){var i=this._decorations[t],n=this._editor.getModel().getDecorationRange(i);if(n&&!(n.endLineNumber>e.lineNumber)){if(n.endLineNumber<e.lineNumber)return n;if(!(n.endColumn>e.column))return n}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}},{key:"matchAfterPosition",value:function(e){if(0===this._decorations.length)return null;for(var t=0,i=this._decorations.length;t<i;t++){var n=this._decorations[t],o=this._editor.getModel().getDecorationRange(n);if(o&&!(o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}},{key:"_allDecorations",value:function(){var e,t=[];(t=(t=t.concat(this._decorations)).concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length)&&(e=t).push.apply(e,(0,C.Z)(this._findScopeDecorationIds));return this._rangeHighlightDecorationId&&t.push(this._rangeHighlightDecorationId),t}}]),e}();I._CURRENT_FIND_MATCH_DECORATION=N.qx.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:(0,x.EN)(R.Fm_),position:w.sh.Center},minimap:{color:(0,x.EN)(R.SUY),position:w.F5.Inline}}),I._FIND_MATCH_DECORATION=N.qx.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:(0,x.EN)(R.Fm_),position:w.sh.Center},minimap:{color:(0,x.EN)(R.SUY),position:w.F5.Inline}}),I._FIND_MATCH_NO_OVERVIEW_DECORATION=N.qx.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),I._FIND_MATCH_ONLY_OVERVIEW_DECORATION=N.qx.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,x.EN)(R.Fm_),position:w.sh.Center}}),I._RANGE_HIGHLIGHT_DECORATION=N.qx.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),I._FIND_SCOPE_DECORATION=N.qx.register({description:"find-scope",className:"findScope",isWholeLine:!0});var F=function(){function e(t,i,o){(0,n.Z)(this,e),this._editorSelection=t,this._ranges=i,this._replaceStrings=o,this._trackedEditorSelectionId=null}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,t){if(this._ranges.length>0){for(var i=[],n=0;n<this._ranges.length;n++)i.push({range:this._ranges[n],text:this._replaceStrings[n]});i.sort((function(e,t){return S.e.compareRangesUsingStarts(e.range,t.range)}));for(var o=[],r=i[0],s=1;s<i.length;s++)r.range.endLineNumber===i[s].range.startLineNumber&&r.range.endColumn===i[s].range.startColumn?(r.range=r.range.plusRange(i[s].range),r.text=r.text+i[s].text):(o.push(r),r=i[s]);o.push(r);for(var a=0,c=o;a<c.length;a++){var l=c[a];t.addEditOperation(l.range,l.text)}}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}]),e}(),O=i(41218),E=(0,o.Z)((function e(t){(0,n.Z)(this,e),this.staticValue=t,this.kind=0})),D=(0,o.Z)((function e(t){(0,n.Z)(this,e),this.pieces=t,this.kind=1})),M=function(){function e(t){(0,n.Z)(this,e),t&&0!==t.length?1===t.length&&null!==t[0].staticValue?this._state=new E(t[0].staticValue):this._state=new D(t):this._state=new E("")}return(0,o.Z)(e,[{key:"hasReplacementPatterns",get:function(){return 1===this._state.kind}},{key:"buildReplaceString",value:function(t,i){if(0===this._state.kind)return i?(0,O.o)(t,this._state.staticValue):this._state.staticValue;for(var n="",o=0,r=this._state.pieces.length;o<r;o++){var s=this._state.pieces[o];if(null===s.staticValue){var a=e._substitute(s.matchIndex,t);if(null!==s.caseOps&&s.caseOps.length>0){for(var c=[],l=s.caseOps.length,d=0,h=0,u=a.length;h<u;h++){if(d>=l){c.push(a.slice(h));break}switch(s.caseOps[d]){case"U":c.push(a[h].toUpperCase());break;case"u":c.push(a[h].toUpperCase()),d++;break;case"L":c.push(a[h].toLowerCase());break;case"l":c.push(a[h].toLowerCase()),d++;break;default:c.push(a[h])}}a=c.join("")}n+=a}else n+=s.staticValue}return n}}],[{key:"fromStaticValue",value:function(t){return new e([P.staticValue(t)])}},{key:"_substitute",value:function(e,t){if(null===t)return"";if(0===e)return t[0];for(var i="";e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}]),e}(),P=function(){function e(t,i,o){(0,n.Z)(this,e),this.staticValue=t,this.matchIndex=i,o&&0!==o.length?this.caseOps=o.slice(0):this.caseOps=null}return(0,o.Z)(e,null,[{key:"staticValue",value:function(t){return new e(t,-1,null)}},{key:"caseOps",value:function(t,i){return new e(null,t,i)}}]),e}(),Z=function(){function e(t){(0,n.Z)(this,e),this._source=t,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}return(0,o.Z)(e,[{key:"emitUnchanged",value:function(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}},{key:"emitStatic",value:function(e,t){this._emitStatic(e),this._lastCharIndex=t}},{key:"_emitStatic",value:function(e){0!==e.length&&(this._currentStaticPiece+=e)}},{key:"emitMatchIndex",value:function(e,t,i){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=P.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=P.caseOps(e,i),this._lastCharIndex=t}},{key:"finalize",value:function(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=P.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new M(this._result)}}]),e}();var L=i(49525),A=new L.uy("findWidgetVisible",!1),T=(A.toNegated(),new L.uy("findInputFocussed",!1)),W=new L.uy("replaceInputFocussed",!1),V={primary:545,mac:{primary:2593}},B={primary:565,mac:{primary:2613}},H={primary:560,mac:{primary:2608}},q={primary:554,mac:{primary:2602}},U={primary:558,mac:{primary:2606}},K="actions.find",z="actions.findWithSelection",G="editor.actions.findWithArgs",Y="editor.action.nextMatchFindAction",j="editor.action.previousMatchFindAction",Q="editor.action.nextSelectionMatchFindAction",$="editor.action.previousSelectionMatchFindAction",J="editor.action.startFindReplaceAction",X="closeFindWidget",ee="toggleFindCaseSensitive",te="toggleFindWholeWord",ie="toggleFindRegex",ne="toggleFindInSelection",oe="togglePreserveCase",re="editor.action.replaceOne",se="editor.action.replaceAll",ae="editor.action.selectAllMatches",ce=19999,le=function(){function e(t,i){var o=this;(0,n.Z)(this,e),this._toDispose=new u.SL,this._editor=t,this._state=i,this._isDisposed=!1,this._startSearchingTimer=new h._F,this._decorations=new I(t),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new h.pY((function(){return o.research(!1)}),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition((function(e){3!==e.reason&&5!==e.reason&&6!==e.reason||o._decorations.setStartPosition(o._editor.getPosition())}))),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent((function(e){o._ignoreModelContentChanged||(e.isFlush&&o._decorations.reset(),o._decorations.setStartPosition(o._editor.getPosition()),o._updateDecorationsScheduler.schedule())}))),this._toDispose.add(this._state.onFindReplaceStateChange((function(e){return o._onStateChanged(e)}))),this.research(!1,this._state.searchScope)}return(0,o.Z)(e,[{key:"dispose",value:function(){this._isDisposed=!0,(0,u.B9)(this._startSearchingTimer),this._toDispose.dispose()}},{key:"_onStateChanged",value:function(e){var t=this;this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet((function(){e.searchScope?t.research(e.moveCursor,t._state.searchScope):t.research(e.moveCursor)}),240)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}},{key:"research",value:function(e,t){var i=this,n=null;"undefined"!==typeof t?null!==t&&(n=Array.isArray(t)?t:[t]):n=this._decorations.getFindScopes(),null!==n&&(n=n.map((function(e){if(e.startLineNumber!==e.endLineNumber){var t=e.endLineNumber;return 1===e.endColumn&&(t-=1),new S.e(e.startLineNumber,1,t,i._editor.getModel().getLineMaxColumn(t))}return e})));var o=this._findMatches(n,!1,ce);this._decorations.set(o,n);var r=this._editor.getSelection(),s=this._decorations.getCurrentMatchesPosition(r);if(0===s&&o.length>0){var a=(0,f.lG)(o.map((function(e){return e.range})),(function(e){return S.e.compareRangesUsingStarts(e,r)>=0}));s=a>0?a-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),e&&this._editor.getOption(35).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}},{key:"_hasMatches",value:function(){return this._state.matchesCount>0}},{key:"_cannotFind",value:function(){if(!this._hasMatches()){var e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}},{key:"_setCurrentFindMatch",value:function(e){var t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}},{key:"_prevSearchPosition",value:function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),i=e.lineNumber,n=e.column,o=this._editor.getModel();return t||1===n?(1===i?i=o.getLineCount():i--,n=o.getLineMaxColumn(i)):n--,new m.L(i,n)}},{key:"_moveToPrevMatch",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._state.canNavigateBack()){if(this._decorations.getCount()<ce){var n=this._decorations.matchBeforePosition(t);return n&&n.isEmpty()&&n.getStartPosition().equals(t)&&(t=this._prevSearchPosition(t),n=this._decorations.matchBeforePosition(t)),void(n&&this._setCurrentFindMatch(n))}if(!this._cannotFind()){var o=this._decorations.getFindScope(),r=e._getSearchRange(this._editor.getModel(),o);r.getEndPosition().isBefore(t)&&(t=r.getEndPosition()),t.isBefore(r.getStartPosition())&&(t=r.getEndPosition());var s=t,a=s.lineNumber,c=s.column,l=this._editor.getModel(),d=new m.L(a,c),h=l.findPreviousMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,!1);if(h&&h.range.isEmpty()&&h.range.getStartPosition().equals(d)&&(d=this._prevSearchPosition(d),h=l.findPreviousMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,!1)),h)return i||r.containsRange(h.range)?void this._setCurrentFindMatch(h.range):this._moveToPrevMatch(h.range.getStartPosition(),!0)}}else{var u=this._decorations.matchAfterPosition(t);u&&this._setCurrentFindMatch(u)}}},{key:"moveToPrevMatch",value:function(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}},{key:"_nextSearchPosition",value:function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),i=e.lineNumber,n=e.column,o=this._editor.getModel();return t||n===o.getLineMaxColumn(i)?(i===o.getLineCount()?i=1:i++,n=1):n++,new m.L(i,n)}},{key:"_moveToNextMatch",value:function(e){if(this._state.canNavigateForward()){if(this._decorations.getCount()<ce){var t=this._decorations.matchAfterPosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),void(t&&this._setCurrentFindMatch(t))}var i=this._getNextMatch(e,!1,!0);i&&this._setCurrentFindMatch(i.range)}else{var n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n)}}},{key:"_getNextMatch",value:function(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._cannotFind())return null;var r=this._decorations.getFindScope(),s=e._getSearchRange(this._editor.getModel(),r);s.getEndPosition().isBefore(t)&&(t=s.getStartPosition()),t.isBefore(s.getStartPosition())&&(t=s.getStartPosition());var a=t,c=a.lineNumber,l=a.column,d=this._editor.getModel(),h=new m.L(c,l),u=d.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,i);return n&&u&&u.range.isEmpty()&&u.range.getStartPosition().equals(h)&&(h=this._nextSearchPosition(h),u=d.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,i)),u?o||s.containsRange(u.range)?u:this._getNextMatch(u.range.getEndPosition(),i,n,!0):null}},{key:"moveToNextMatch",value:function(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}},{key:"_getReplacePattern",value:function(){return this._state.isRegex?function(e){if(!e||0===e.length)return new M(null);for(var t=[],i=new Z(e),n=0,o=e.length;n<o;n++){var r=e.charCodeAt(n);if(92!==r){if(36===r){if(++n>=o)break;var s=e.charCodeAt(n);if(36===s){i.emitUnchanged(n-1),i.emitStatic("$",n+1);continue}if(48===s||38===s){i.emitUnchanged(n-1),i.emitMatchIndex(0,n+1,t),t.length=0;continue}if(49<=s&&s<=57){var a=s-48;if(n+1<o){var c=e.charCodeAt(n+1);if(48<=c&&c<=57){n++,a=10*a+(c-48),i.emitUnchanged(n-2),i.emitMatchIndex(a,n+1,t),t.length=0;continue}}i.emitUnchanged(n-1),i.emitMatchIndex(a,n+1,t),t.length=0;continue}}}else{if(++n>=o)break;var l=e.charCodeAt(n);switch(l){case 92:i.emitUnchanged(n-1),i.emitStatic("\\",n+1);break;case 110:i.emitUnchanged(n-1),i.emitStatic("\n",n+1);break;case 116:i.emitUnchanged(n-1),i.emitStatic("\t",n+1);break;case 117:case 85:case 108:case 76:i.emitUnchanged(n-1),i.emitStatic("",n+1),t.push(String.fromCharCode(l))}}}return i.finalize()}(this._state.replaceString):M.fromStaticValue(this._state.replaceString)}},{key:"replace",value:function(){if(this._hasMatches()){var e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){var n=e.buildReplaceString(i.matches,this._state.preserveCase),o=new v.T4(t,n);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new m.L(t.startLineNumber,t.startColumn+n.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}}},{key:"_findMatches",value:function(t,i,n){var o=this,r=(t||[null]).map((function(t){return e._getSearchRange(o._editor.getModel(),t)}));return this._editor.getModel().findMatches(this._state.searchString,r,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null,i,n)}},{key:"replaceAll",value:function(){if(this._hasMatches()){var e=this._decorations.getFindScopes();null===e&&this._state.matchesCount>=ce?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}}},{key:"_largeReplaceAll",value:function(){var e=new b.bc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(117):null).parseSearchRequest();if(e){var t=e.regex;if(!t.multiline){var i="mu";t.ignoreCase&&(i+="i"),t.global&&(i+="g"),t=new RegExp(t.source,i)}var n,o=this._editor.getModel(),r=o.getValue(1),s=o.getFullModelRange(),a=this._getReplacePattern(),c=this._state.preserveCase;n=a.hasReplacementPatterns||c?r.replace(t,(function(){return a.buildReplaceString(arguments,c)})):r.replace(t,a.buildReplaceString(null,c));var l=new v.hP(s,n,this._editor.getSelection());this._executeEditorCommand("replaceAll",l)}}},{key:"_regularReplaceAll",value:function(e){for(var t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),n=[],o=0,r=i.length;o<r;o++)n[o]=t.buildReplaceString(i[o].matches,this._state.preserveCase);var s=new F(this._editor.getSelection(),i.map((function(e){return e.range})),n);this._executeEditorCommand("replaceAll",s)}},{key:"selectAllMatches",value:function(){if(this._hasMatches()){for(var e=this._decorations.getFindScopes(),t=this._findMatches(e,!1,1073741824).map((function(e){return new y.Y(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)})),i=this._editor.getSelection(),n=0,o=t.length;n<o;n++){if(t[n].equalsRange(i)){t=[i].concat(t.slice(0,n)).concat(t.slice(n+1));break}}this._editor.setSelections(t)}}},{key:"_executeEditorCommand",value:function(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}],[{key:"_getSearchRange",value:function(e,t){return t||e.getFullModelRange()}}]),e}(),de=i(97326),he=i(53210),ue=i(20300),ge=i(86457),pe=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e,o,r,s){var a;(0,n.Z)(this,i),(a=t.call(this))._hideSoon=a._register(new h.pY((function(){return a._hide()}),2e3)),a._isVisible=!1,a._editor=e,a._state=o,a._keybindingService=r,a._domNode=document.createElement("div"),a._domNode.className="findOptionsWidget",a._domNode.style.display="none",a._domNode.style.top="10px",a._domNode.setAttribute("role","presentation"),a._domNode.setAttribute("aria-hidden","true");var c=s.getColorTheme().getColor(R.PRb),l=s.getColorTheme().getColor(R.Pvw),d=s.getColorTheme().getColor(R.XEs);return a.caseSensitive=a._register(new ue.vk({appendTitle:a._keybindingLabelFor(ee),isChecked:a._state.matchCase,inputActiveOptionBorder:c,inputActiveOptionForeground:l,inputActiveOptionBackground:d})),a._domNode.appendChild(a.caseSensitive.domNode),a._register(a.caseSensitive.onChange((function(){a._state.change({matchCase:a.caseSensitive.checked},!1)}))),a.wholeWords=a._register(new ue.n3({appendTitle:a._keybindingLabelFor(te),isChecked:a._state.wholeWord,inputActiveOptionBorder:c,inputActiveOptionForeground:l,inputActiveOptionBackground:d})),a._domNode.appendChild(a.wholeWords.domNode),a._register(a.wholeWords.onChange((function(){a._state.change({wholeWord:a.wholeWords.checked},!1)}))),a.regex=a._register(new ue.am({appendTitle:a._keybindingLabelFor(ie),isChecked:a._state.isRegex,inputActiveOptionBorder:c,inputActiveOptionForeground:l,inputActiveOptionBackground:d})),a._domNode.appendChild(a.regex.domNode),a._register(a.regex.onChange((function(){a._state.change({isRegex:a.regex.checked},!1)}))),a._editor.addOverlayWidget((0,de.Z)(a)),a._register(a._state.onFindReplaceStateChange((function(e){var t=!1;e.isRegex&&(a.regex.checked=a._state.isRegex,t=!0),e.wholeWord&&(a.wholeWords.checked=a._state.wholeWord,t=!0),e.matchCase&&(a.caseSensitive.checked=a._state.matchCase,t=!0),!a._state.isRevealed&&t&&a._revealTemporarily()}))),a._register(he.addDisposableNonBubblingMouseOutListener(a._domNode,(function(e){return a._onMouseOut()}))),a._register(he.addDisposableListener(a._domNode,"mouseover",(function(e){return a._onMouseOver()}))),a._applyTheme(s.getColorTheme()),a._register(s.onDidColorThemeChange(a._applyTheme.bind((0,de.Z)(a)))),a}return(0,o.Z)(i,[{key:"_keybindingLabelFor",value:function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}},{key:"dispose",value:function(){this._editor.removeOverlayWidget(this),(0,r.Z)((0,s.Z)(i.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return i.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return{preference:0}}},{key:"highlightFindOptions",value:function(){this._revealTemporarily()}},{key:"_revealTemporarily",value:function(){this._show(),this._hideSoon.schedule()}},{key:"_onMouseOut",value:function(){this._hideSoon.schedule()}},{key:"_onMouseOver",value:function(){this._hideSoon.cancel()}},{key:"_show",value:function(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}},{key:"_hide",value:function(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}},{key:"_applyTheme",value:function(e){var t={inputActiveOptionBorder:e.getColor(R.PRb),inputActiveOptionForeground:e.getColor(R.Pvw),inputActiveOptionBackground:e.getColor(R.XEs)};this.caseSensitive.style(t),this.wholeWords.style(t),this.regex.style(t)}}]),i}(ge.$);pe.ID="editor.contrib.findOptionsWidget",(0,x.Ic)((function(e,t){var i=e.getColor(R.D0T);i&&t.addRule(".monaco-editor .findOptionsWidget { background-color: ".concat(i,"; }"));var n=e.getColor(R.Hfx);n&&t.addRule(".monaco-editor .findOptionsWidget { color: ".concat(n,"; }"));var o=e.getColor(R.rh);o&&t.addRule(".monaco-editor .findOptionsWidget { box-shadow: 0 0 8px 2px ".concat(o,"; }"));var r=e.getColor(R.lRK);r&&t.addRule(".monaco-editor .findOptionsWidget { border: 2px solid ".concat(r,"; }"))}));var _e=i(28941);function fe(e,t){return 1===e||2!==e&&t}var ve=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(){var e;return(0,n.Z)(this,i),(e=t.call(this))._onFindReplaceStateChange=e._register(new _e.Q5),e.onFindReplaceStateChange=e._onFindReplaceStateChange.event,e._searchString="",e._replaceString="",e._isRevealed=!1,e._isReplaceRevealed=!1,e._isRegex=!1,e._isRegexOverride=0,e._wholeWord=!1,e._wholeWordOverride=0,e._matchCase=!1,e._matchCaseOverride=0,e._preserveCase=!1,e._preserveCaseOverride=0,e._searchScope=null,e._matchesPosition=0,e._matchesCount=0,e._currentMatch=null,e._loop=!0,e._isSearching=!1,e._filters=null,e}return(0,o.Z)(i,[{key:"searchString",get:function(){return this._searchString}},{key:"replaceString",get:function(){return this._replaceString}},{key:"isRevealed",get:function(){return this._isRevealed}},{key:"isReplaceRevealed",get:function(){return this._isReplaceRevealed}},{key:"isRegex",get:function(){return fe(this._isRegexOverride,this._isRegex)}},{key:"wholeWord",get:function(){return fe(this._wholeWordOverride,this._wholeWord)}},{key:"matchCase",get:function(){return fe(this._matchCaseOverride,this._matchCase)}},{key:"preserveCase",get:function(){return fe(this._preserveCaseOverride,this._preserveCase)}},{key:"actualIsRegex",get:function(){return this._isRegex}},{key:"actualWholeWord",get:function(){return this._wholeWord}},{key:"actualMatchCase",get:function(){return this._matchCase}},{key:"actualPreserveCase",get:function(){return this._preserveCase}},{key:"searchScope",get:function(){return this._searchScope}},{key:"matchesPosition",get:function(){return this._matchesPosition}},{key:"matchesCount",get:function(){return this._matchesCount}},{key:"currentMatch",get:function(){return this._currentMatch}},{key:"changeMatchInfo",value:function(e,t,i){var n={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},o=!1;0===t&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,n.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,n.matchesCount=!0,o=!0),"undefined"!==typeof i&&(S.e.equalsRange(this._currentMatch,i)||(this._currentMatch=i,n.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(n)}},{key:"change",value:function(e,t){var i,n=this,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r={moveCursor:t,updateHistory:o,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},s=!1,a=this.isRegex,c=this.wholeWord,l=this.matchCase,d=this.preserveCase;"undefined"!==typeof e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,r.searchString=!0,s=!0),"undefined"!==typeof e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,r.replaceString=!0,s=!0),"undefined"!==typeof e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,r.isRevealed=!0,s=!0),"undefined"!==typeof e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,r.isReplaceRevealed=!0,s=!0),"undefined"!==typeof e.isRegex&&(this._isRegex=e.isRegex),"undefined"!==typeof e.wholeWord&&(this._wholeWord=e.wholeWord),"undefined"!==typeof e.matchCase&&(this._matchCase=e.matchCase),"undefined"!==typeof e.preserveCase&&(this._preserveCase=e.preserveCase),"undefined"!==typeof e.searchScope&&((null===(i=e.searchScope)||void 0===i?void 0:i.every((function(e){var t;return null===(t=n._searchScope)||void 0===t?void 0:t.some((function(t){return!S.e.equalsRange(t,e)}))})))||(this._searchScope=e.searchScope,r.searchScope=!0,s=!0)),"undefined"!==typeof e.loop&&this._loop!==e.loop&&(this._loop=e.loop,r.loop=!0,s=!0),"undefined"!==typeof e.isSearching&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,r.isSearching=!0,s=!0),"undefined"!==typeof e.filters&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,r.filters=!0,s=!0),this._isRegexOverride="undefined"!==typeof e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride="undefined"!==typeof e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride="undefined"!==typeof e.matchCaseOverride?e.matchCaseOverride:0,this._preserveCaseOverride="undefined"!==typeof e.preserveCaseOverride?e.preserveCaseOverride:0,a!==this.isRegex&&(s=!0,r.isRegex=!0),c!==this.wholeWord&&(s=!0,r.wholeWord=!0),l!==this.matchCase&&(s=!0,r.matchCase=!0),d!==this.preserveCase&&(s=!0,r.preserveCase=!0),s&&this._onFindReplaceStateChange.fire(r)}},{key:"canNavigateBack",value:function(){return this.canNavigateInLoop()||1!==this.matchesPosition}},{key:"canNavigateForward",value:function(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}},{key:"canNavigateInLoop",value:function(){return this._loop||this.matchesCount>=ce}}]),i}(u.JT),me=i(58340),Se=i(44883),ye=i(98883),be=i(7579),Ce=i(68552),ke=i(4827),we=i(87697),Ne=i(61776),Re=i(20034),xe=i(18191),Ie=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{c(n.next(e))}catch(t){r(t)}}function a(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},Fe=(0,xe.q5)("find-selection",be.lA.selection,we.N("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Oe=(0,xe.q5)("find-collapsed",be.lA.chevronRight,we.N("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Ee=(0,xe.q5)("find-expanded",be.lA.chevronDown,we.N("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),De=(0,xe.q5)("find-replace",be.lA.replace,we.N("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Me=(0,xe.q5)("find-replace-all",be.lA.replaceAll,we.N("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),Pe=(0,xe.q5)("find-previous-match",be.lA.arrowUp,we.N("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),Ze=(0,xe.q5)("find-next-match",be.lA.arrowDown,we.N("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Le=we.N("label.find","Find"),Ae=we.N("placeholder.find","Find"),Te=we.N("label.previousMatchButton","Previous Match"),We=we.N("label.nextMatchButton","Next Match"),Ve=we.N("label.toggleSelectionFind","Find in Selection"),Be=we.N("label.closeButton","Close"),He=we.N("label.replace","Replace"),qe=we.N("placeholder.replace","Replace"),Ue=we.N("label.replaceButton","Replace"),Ke=we.N("label.replaceAllButton","Replace All"),ze=we.N("label.toggleReplaceButton","Toggle Replace"),Ge=we.N("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",ce),Ye=we.N("label.matchesLocation","{0} of {1}"),je=we.N("label.noResults","No results"),Qe=419,$e=69,Je="ctrlEnterReplaceAll.windows.donotask",Xe=ke.dz?256:2048,et=(0,o.Z)((function e(t){(0,n.Z)(this,e),this.afterLineNumber=t,this.heightInPx=33,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}));function tt(e,t,i){var n=!!t.match(/\n/);i&&n&&i.selectionStart>0&&e.stopPropagation()}function it(e,t,i){var n=!!t.match(/\n/);i&&n&&i.selectionEnd<i.value.length&&e.stopPropagation()}var nt=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e,o,r,s,a,c,l,g,p){var _;return(0,n.Z)(this,i),(_=t.call(this))._cachedHeight=null,_._revealTimeouts=[],_._codeEditor=e,_._controller=o,_._state=r,_._contextViewProvider=s,_._keybindingService=a,_._contextKeyService=c,_._storageService=g,_._notificationService=p,_._ctrlEnterReplaceAllWarningPrompted=!!g.getBoolean(Je,0),_._isVisible=!1,_._isReplaceVisible=!1,_._ignoreChangeEvent=!1,_._updateHistoryDelayer=new h.vp(500),_._register((0,u.OF)((function(){return _._updateHistoryDelayer.cancel()}))),_._register(_._state.onFindReplaceStateChange((function(e){return _._onStateChanged(e)}))),_._buildDomNode(),_._updateButtons(),_._tryUpdateWidgetWidth(),_._findInput.inputBox.layout(),_._register(_._codeEditor.onDidChangeConfiguration((function(e){if(e.hasChanged(81)&&(_._codeEditor.getOption(81)&&_._state.change({isReplaceRevealed:!1},!1),_._updateButtons()),e.hasChanged(131)&&_._tryUpdateWidgetWidth(),e.hasChanged(2)&&_.updateAccessibilitySupport(),e.hasChanged(35)){var t=_._codeEditor.getOption(35).addExtraSpaceOnTop;t&&!_._viewZone&&(_._viewZone=new et(0),_._showViewZone()),!t&&_._viewZone&&_._removeViewZone()}}))),_.updateAccessibilitySupport(),_._register(_._codeEditor.onDidChangeCursorSelection((function(){_._isVisible&&_._updateToggleSelectionFindButton()}))),_._register(_._codeEditor.onDidFocusEditorWidget((function(){return Ie((0,de.Z)(_),void 0,void 0,d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isVisible){e.next=5;break}return e.next=3,this._controller.getGlobalBufferTerm();case 3:(t=e.sent)&&t!==this._state.searchString&&(this._state.change({searchString:t},!1),this._findInput.select());case 5:case"end":return e.stop()}}),e,this)})))}))),_._findInputFocused=T.bindTo(c),_._findFocusTracker=_._register(he.trackFocus(_._findInput.inputBox.inputElement)),_._register(_._findFocusTracker.onDidFocus((function(){_._findInputFocused.set(!0),_._updateSearchScope()}))),_._register(_._findFocusTracker.onDidBlur((function(){_._findInputFocused.set(!1)}))),_._replaceInputFocused=W.bindTo(c),_._replaceFocusTracker=_._register(he.trackFocus(_._replaceInput.inputBox.inputElement)),_._register(_._replaceFocusTracker.onDidFocus((function(){_._replaceInputFocused.set(!0),_._updateSearchScope()}))),_._register(_._replaceFocusTracker.onDidBlur((function(){_._replaceInputFocused.set(!1)}))),_._codeEditor.addOverlayWidget((0,de.Z)(_)),_._codeEditor.getOption(35).addExtraSpaceOnTop&&(_._viewZone=new et(0)),_._applyTheme(l.getColorTheme()),_._register(l.onDidColorThemeChange(_._applyTheme.bind((0,de.Z)(_)))),_._register(_._codeEditor.onDidChangeModel((function(){_._isVisible&&(_._viewZoneId=void 0)}))),_._register(_._codeEditor.onDidScrollChange((function(e){e.scrollTopChanged?_._layoutViewZone():setTimeout((function(){_._layoutViewZone()}),0)}))),_}return(0,o.Z)(i,[{key:"getId",value:function(){return i.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return this._isVisible?{preference:0}:null}},{key:"_onStateChanged",value:function(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(81)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=he.getTotalWidth(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){var t=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}},{key:"_delayedUpdateHistory",value:function(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,Ce.dL)}},{key:"_updateHistory",value:function(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}},{key:"_updateMatchesCount",value:function(){var e;if(this._matchesCount.style.minWidth=$e+"px",this._state.matchesCount>=ce?this._matchesCount.title=Ge:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){var t=String(this._state.matchesCount);this._state.matchesCount>=ce&&(t+="+");var i=String(this._state.matchesPosition);"0"===i&&(i="?"),e=g.WU(Ye,i,t)}else e=je;this._matchesCount.appendChild(document.createTextNode(e)),(0,me.Z9)(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),$e=Math.max($e,this._matchesCount.clientWidth)}},{key:"_getAriaLabel",value:function(e,t,i){if(e===je)return""===i?we.N("ariaSearchNoResultEmpty","{0} found",e):we.N("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){var n=we.N("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();if(o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1){var r=o.getLineContent(t.startLineNumber);return"".concat(r,", ").concat(n)}return n}return we.N("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}},{key:"_updateToggleSelectionFindButton",value:function(){var e=this._codeEditor.getSelection(),t=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}},{key:"_updateButtons",value:function(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);var e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);var i=!this._codeEditor.getOption(81);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}},{key:"_reveal",value:function(){var e=this;if(this._revealTimeouts.forEach((function(e){clearTimeout(e)})),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;var t=this._codeEditor.getSelection();switch(this._codeEditor.getOption(35).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":var i=!!t&&t.startLineNumber!==t.endLineNumber;this._toggleSelectionFind.checked=i}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout((function(){e._domNode.classList.add("visible"),e._domNode.setAttribute("aria-hidden","false")}),0)),this._revealTimeouts.push(setTimeout((function(){e._findInput.validate()}),200)),this._codeEditor.layoutOverlayWidget(this);var n=!0;if(this._codeEditor.getOption(35).seedSearchStringFromSelection&&t){var o=this._codeEditor.getDomNode();if(o){var r=he.getDomNodePagePosition(o),s=this._codeEditor.getScrolledVisiblePosition(t.getStartPosition()),a=r.left+(s?s.left:0),c=s?s.top:0;if(this._viewZone&&c<this._viewZone.heightInPx){t.endLineNumber>t.startLineNumber&&(n=!1);var l=he.getTopLeftOffset(this._domNode).left;a>l&&(n=!1);var d=this._codeEditor.getScrolledVisiblePosition(t.getEndPosition());r.left+(d?d.left:0)>l&&(n=!1)}}}this._showViewZone(n)}}},{key:"_hide",value:function(e){this._revealTimeouts.forEach((function(e){clearTimeout(e)})),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}},{key:"_layoutViewZone",value:function(e){var t=this;if(this._codeEditor.getOption(35).addExtraSpaceOnTop){if(this._isVisible){var i=this._viewZone;void 0===this._viewZoneId&&i&&this._codeEditor.changeViewZones((function(n){i.heightInPx=t._getHeight(),t._viewZoneId=n.addZone(i),t._codeEditor.setScrollTop(e||t._codeEditor.getScrollTop()+i.heightInPx)}))}}else this._removeViewZone()}},{key:"_showViewZone",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._isVisible){var i=this._codeEditor.getOption(35).addExtraSpaceOnTop;if(i){void 0===this._viewZone&&(this._viewZone=new et(0));var n=this._viewZone;this._codeEditor.changeViewZones((function(i){if(void 0!==e._viewZoneId){var o=e._getHeight();if(o===n.heightInPx)return;var r=o-n.heightInPx;return n.heightInPx=o,i.layoutZone(e._viewZoneId),void(t&&e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()+r))}var s=e._getHeight();(s-=e._codeEditor.getOption(75).top)<=0||(n.heightInPx=s,e._viewZoneId=i.addZone(n),t&&e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()+s))}))}}}},{key:"_removeViewZone",value:function(){var e=this;this._codeEditor.changeViewZones((function(t){void 0!==e._viewZoneId&&(t.removeZone(e._viewZoneId),e._viewZoneId=void 0,e._viewZone&&(e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()-e._viewZone.heightInPx),e._viewZone=void 0))}))}},{key:"_applyTheme",value:function(e){var t={inputActiveOptionBorder:e.getColor(R.PRb),inputActiveOptionBackground:e.getColor(R.XEs),inputActiveOptionForeground:e.getColor(R.Pvw),inputBackground:e.getColor(R.sEe),inputForeground:e.getColor(R.zJb),inputBorder:e.getColor(R.dt_),inputValidationInfoBackground:e.getColor(R._lC),inputValidationInfoForeground:e.getColor(R.YI3),inputValidationInfoBorder:e.getColor(R.EPQ),inputValidationWarningBackground:e.getColor(R.RV_),inputValidationWarningForeground:e.getColor(R.SUG),inputValidationWarningBorder:e.getColor(R.C3g),inputValidationErrorBackground:e.getColor(R.paE),inputValidationErrorForeground:e.getColor(R._t9),inputValidationErrorBorder:e.getColor(R.OZR)};this._findInput.style(t),this._replaceInput.style(t),this._toggleSelectionFind.style(t)}},{key:"_tryUpdateWidgetWidth",value:function(){if(this._isVisible&&he.isInDOM(this._domNode)){var e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0)this._domNode.classList.add("hiddenEditor");else{this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");var t=e.width,i=e.minimap.minimapWidth,n=!1,o=!1,r=!1;if(this._resized)if(he.getTotalWidth(this._domNode)>Qe)return this._domNode.style.maxWidth="".concat(t-28-i-15,"px"),void(this._replaceInput.width=he.getTotalWidth(this._findInput.domNode));if(447+i>=t&&(o=!0),447+i-$e>=t&&(r=!0),447+i-$e>=t+50&&(n=!0),this._domNode.classList.toggle("collapsed-find-widget",n),this._domNode.classList.toggle("narrow-find-widget",r),this._domNode.classList.toggle("reduced-find-widget",o),r||n||(this._domNode.style.maxWidth="".concat(t-28-i-15,"px")),this._resized){this._findInput.inputBox.layout();var s=this._findInput.inputBox.element.clientWidth;s>0&&(this._replaceInput.width=s)}else this._isReplaceVisible&&(this._replaceInput.width=he.getTotalWidth(this._findInput.domNode))}}}},{key:"_getHeight",value:function(){var e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4}},{key:"_tryUpdateHeight",value:function(){var e=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==e)&&(this._cachedHeight=e,this._domNode.style.height="".concat(e,"px"),!0)}},{key:"focusFindInput",value:function(){this._findInput.select(),this._findInput.focus()}},{key:"focusReplaceInput",value:function(){this._replaceInput.select(),this._replaceInput.focus()}},{key:"highlightFindOptions",value:function(){this._findInput.highlightFindOptions()}},{key:"_updateSearchScope",value:function(){var e=this;if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){var t=this._codeEditor.getSelections();t.map((function(t){1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));var i=e._state.currentMatch;return t.startLineNumber===t.endLineNumber||S.e.equalsRange(t,i)?null:t})).filter((function(e){return!!e})),t.length&&this._state.change({searchScope:t},!0)}}},{key:"_onFindInputMouseDown",value:function(e){e.middleButton&&e.stopPropagation()}},{key:"_onFindInputKeyDown",value:function(e){return e.equals(3|Xe)?(this._keybindingService.dispatchEvent(e,e.target)||this._findInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?tt(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18)?it(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}},{key:"_onReplaceInputKeyDown",value:function(e){return e.equals(3|Xe)?(this._keybindingService.dispatchEvent(e,e.target)||(ke.ED&&ke.tY&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(we.N("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(Je,!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n")),void e.preventDefault()):e.equals(2)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?tt(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18)?it(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}},{key:"getVerticalSashLeft",value:function(e){return 0}},{key:"_keybindingLabelFor",value:function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}},{key:"_buildDomNode",value:function(){var e=this;this._findInput=this._register(new Ne.Yb(null,this._contextViewProvider,{width:221,label:Le,placeholder:Ae,appendCaseSensitiveLabel:this._keybindingLabelFor(ee),appendWholeWordsLabel:this._keybindingLabelFor(te),appendRegexLabel:this._keybindingLabelFor(ie),validation:function(t){if(0===t.length||!e._findInput.getRegex())return null;try{return new RegExp(t,"gu"),null}catch(i){return{content:i.message}}},flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118,showHistoryHint:function(){return(0,Re.u)(e._keybindingService)}},this._contextKeyService,!0)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown((function(t){return e._onFindInputKeyDown(t)}))),this._register(this._findInput.inputBox.onDidChange((function(){e._ignoreChangeEvent||e._state.change({searchString:e._findInput.getValue()},!0)}))),this._register(this._findInput.onDidOptionChange((function(){e._state.change({isRegex:e._findInput.getRegex(),wholeWord:e._findInput.getWholeWords(),matchCase:e._findInput.getCaseSensitive()},!0)}))),this._register(this._findInput.onCaseSensitiveKeyDown((function(t){t.equals(1026)&&e._isReplaceVisible&&(e._replaceInput.focus(),t.preventDefault())}))),this._register(this._findInput.onRegexKeyDown((function(t){t.equals(2)&&e._isReplaceVisible&&(e._replaceInput.focusOnPreserve(),t.preventDefault())}))),this._register(this._findInput.inputBox.onDidHeightChange((function(t){e._tryUpdateHeight()&&e._showViewZone()}))),ke.IJ&&this._register(this._findInput.onMouseDown((function(t){return e._onFindInputMouseDown(t)}))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new ot({label:Te+this._keybindingLabelFor(j),icon:Pe,onTrigger:function(){e._codeEditor.getAction(j).run().then(void 0,Ce.dL)}})),this._nextBtn=this._register(new ot({label:We+this._keybindingLabelFor(Y),icon:Ze,onTrigger:function(){e._codeEditor.getAction(Y).run().then(void 0,Ce.dL)}}));var t=document.createElement("div");t.className="find-part",t.appendChild(this._findInput.domNode);var i=document.createElement("div");i.className="find-actions",t.appendChild(i),i.appendChild(this._matchesCount),i.appendChild(this._prevBtn.domNode),i.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new Se.X({icon:Fe,title:Ve+this._keybindingLabelFor(ne),isChecked:!1})),this._register(this._toggleSelectionFind.onChange((function(){if(e._toggleSelectionFind.checked){if(e._codeEditor.hasModel()){var t=e._codeEditor.getSelections();t.map((function(t){return 1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t})).filter((function(e){return!!e})),t.length&&e._state.change({searchScope:t},!0)}}else e._state.change({searchScope:null},!0)}))),i.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new ot({label:Be+this._keybindingLabelFor(X),icon:xe.s_,onTrigger:function(){e._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:function(t){t.equals(2)&&e._isReplaceVisible&&(e._replaceBtn.isEnabled()?e._replaceBtn.focus():e._codeEditor.focus(),t.preventDefault())}})),i.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new Ne.Nq(null,void 0,{label:He,placeholder:qe,appendPreserveCaseLabel:this._keybindingLabelFor(oe),history:[],flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118,showHistoryHint:function(){return(0,Re.u)(e._keybindingService)}},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown((function(t){return e._onReplaceInputKeyDown(t)}))),this._register(this._replaceInput.inputBox.onDidChange((function(){e._state.change({replaceString:e._replaceInput.inputBox.value},!1)}))),this._register(this._replaceInput.inputBox.onDidHeightChange((function(t){e._isReplaceVisible&&e._tryUpdateHeight()&&e._showViewZone()}))),this._register(this._replaceInput.onDidOptionChange((function(){e._state.change({preserveCase:e._replaceInput.getPreserveCase()},!0)}))),this._register(this._replaceInput.onPreserveCaseKeyDown((function(t){t.equals(2)&&(e._prevBtn.isEnabled()?e._prevBtn.focus():e._nextBtn.isEnabled()?e._nextBtn.focus():e._toggleSelectionFind.enabled?e._toggleSelectionFind.focus():e._closeBtn.isEnabled()&&e._closeBtn.focus(),t.preventDefault())}))),this._replaceBtn=this._register(new ot({label:Ue+this._keybindingLabelFor(re),icon:De,onTrigger:function(){e._controller.replace()},onKeyDown:function(t){t.equals(1026)&&(e._closeBtn.focus(),t.preventDefault())}})),this._replaceAllBtn=this._register(new ot({label:Ke+this._keybindingLabelFor(se),icon:Me,onTrigger:function(){e._controller.replaceAll()}}));var n=document.createElement("div");n.className="replace-part",n.appendChild(this._replaceInput.domNode);var o=document.createElement("div");o.className="replace-actions",n.appendChild(o),o.appendChild(this._replaceBtn.domNode),o.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new ot({label:ze,className:"codicon toggle left",onTrigger:function(){e._state.change({isReplaceRevealed:!e._isReplaceVisible},!1),e._isReplaceVisible&&(e._replaceInput.width=he.getTotalWidth(e._findInput.domNode),e._replaceInput.inputBox.layout()),e._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width="".concat(Qe,"px"),this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(t),this._domNode.appendChild(n),this._resizeSash=new ye.g(this._domNode,this,{orientation:0,size:2}),this._resized=!1;var r=Qe;this._register(this._resizeSash.onDidStart((function(){r=he.getTotalWidth(e._domNode)}))),this._register(this._resizeSash.onDidChange((function(t){e._resized=!0;var i=r+t.startX-t.currentX;i<Qe||(i>(parseFloat(he.getComputedStyle(e._domNode).maxWidth)||0)||(e._domNode.style.width="".concat(i,"px"),e._isReplaceVisible&&(e._replaceInput.width=he.getTotalWidth(e._findInput.domNode)),e._findInput.inputBox.layout(),e._tryUpdateHeight()))}))),this._register(this._resizeSash.onDidReset((function(){var t=he.getTotalWidth(e._domNode);if(!(t<Qe)){var i=Qe;if(!e._resized||t===Qe){var n=e._codeEditor.getLayoutInfo();i=n.width-28-n.minimap.minimapWidth-15,e._resized=!0}e._domNode.style.width="".concat(i,"px"),e._isReplaceVisible&&(e._replaceInput.width=he.getTotalWidth(e._findInput.domNode)),e._findInput.inputBox.layout()}})))}},{key:"updateAccessibilitySupport",value:function(){var e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(2!==e)}}]),i}(ge.$);nt.ID="editor.contrib.findWidget";var ot=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e){var o;(0,n.Z)(this,i),(o=t.call(this))._opts=e;var r="button";return o._opts.className&&(r=r+" "+o._opts.className),o._opts.icon&&(r=r+" "+x.kS.asClassName(o._opts.icon)),o._domNode=document.createElement("div"),o._domNode.title=o._opts.label,o._domNode.tabIndex=0,o._domNode.className=r,o._domNode.setAttribute("role","button"),o._domNode.setAttribute("aria-label",o._opts.label),o.onclick(o._domNode,(function(e){o._opts.onTrigger(),e.preventDefault()})),o.onkeydown(o._domNode,(function(e){if(e.equals(10)||e.equals(3))return o._opts.onTrigger(),void e.preventDefault();o._opts.onKeyDown&&o._opts.onKeyDown(e)})),o}return(0,o.Z)(i,[{key:"domNode",get:function(){return this._domNode}},{key:"isEnabled",value:function(){return this._domNode.tabIndex>=0}},{key:"focus",value:function(){this._domNode.focus()}},{key:"setEnabled",value:function(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}},{key:"setExpanded",value:function(e){var t,i,n,o;(this._domNode.setAttribute("aria-expanded",String(!!e)),e)?((t=this._domNode.classList).remove.apply(t,(0,C.Z)(x.kS.asClassNameArray(Oe))),(i=this._domNode.classList).add.apply(i,(0,C.Z)(x.kS.asClassNameArray(Ee)))):((n=this._domNode.classList).remove.apply(n,(0,C.Z)(x.kS.asClassNameArray(Ee))),(o=this._domNode.classList).add.apply(o,(0,C.Z)(x.kS.asClassNameArray(Oe))))}}]),i}(ge.$);(0,x.Ic)((function(e,t){var i=function(e,i){i&&t.addRule(".monaco-editor ".concat(e," { background-color: ").concat(i,"; }"))};i(".findMatch",e.getColor(R.MUv)),i(".currentFindMatch",e.getColor(R.nyM)),i(".findScope",e.getColor(R.jUe)),i(".find-widget",e.getColor(R.D0T));var n=e.getColor(R.rh);n&&t.addRule(".monaco-editor .find-widget { box-shadow: 0 0 8px 2px ".concat(n,"; }"));var o=e.getColor(R.EiJ);o&&t.addRule(".monaco-editor .findMatch { border: 1px ".concat("hc"===e.type?"dotted":"solid"," ").concat(o,"; box-sizing: border-box; }"));var r=e.getColor(R.pnM);r&&t.addRule(".monaco-editor .currentFindMatch { border: 2px solid ".concat(r,"; padding: 1px; box-sizing: border-box; }"));var s=e.getColor(R.gkn);s&&t.addRule(".monaco-editor .findScope { border: 1px ".concat("hc"===e.type?"dashed":"solid"," ").concat(s,"; }"));var a=e.getColor(R.lRK);a&&t.addRule(".monaco-editor .find-widget { border: 1px solid ".concat(a,"; }"));var c=e.getColor(R.Hfx);c&&t.addRule(".monaco-editor .find-widget { color: ".concat(c,"; }"));var l=e.getColor(R.Ido);l&&t.addRule(".monaco-editor .find-widget.no-results .matchesCount { color: ".concat(l,"; }"));var d=e.getColor(R.Ng6);if(d)t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: ".concat(d,"; }"));else{var h=e.getColor(R.D1_);h&&t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: ".concat(h,"; }"))}var u=e.getColor(R.lUq);u&&t.addRule("\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ".concat(u," !important;\n\t\t}\n\t"));var g=e.getColor(R.R80);g&&t.addRule(".monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ".concat(g,"; }"))}));var rt=i(23911),st=i(88532),at=i(30291),ct=i(45753),lt=i(13023),dt=i(63019),ht=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ut=function(e,t){return function(i,n){t(i,n,e)}},gt=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{c(n.next(e))}catch(t){r(t)}}function a(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},pt=524288;function _t(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.hasModel())return null;var n=e.getSelection();if("single"===t&&n.startLineNumber===n.endLineNumber||"multiple"===t)if(n.isEmpty()){var o=e.getConfiguredWordAtPosition(n.getStartPosition());if(o&&!1===i)return o.word}else if(e.getModel().getValueLengthInRange(n)<pt)return e.getModel().getValueInRange(n);return null}var ft=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e,o,r,s){var a;return(0,n.Z)(this,i),(a=t.call(this))._editor=e,a._findWidgetVisible=A.bindTo(o),a._contextKeyService=o,a._storageService=r,a._clipboardService=s,a._updateHistoryDelayer=new h.vp(500),a._state=a._register(new ve),a.loadQueryState(),a._register(a._state.onFindReplaceStateChange((function(e){return a._onStateChanged(e)}))),a._model=null,a._register(a._editor.onDidChangeModel((function(){var e=a._editor.getModel()&&a._state.isRevealed;a.disposeModel(),a._state.change({searchScope:null,matchCase:a._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:a._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:a._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:a._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&a._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:a._editor.getOption(35).loop})}))),a}return(0,o.Z)(i,[{key:"editor",get:function(){return this._editor}},{key:"dispose",value:function(){this.disposeModel(),(0,r.Z)((0,s.Z)(i.prototype),"dispose",this).call(this)}},{key:"disposeModel",value:function(){this._model&&(this._model.dispose(),this._model=null)}},{key:"_onStateChanged",value:function(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}},{key:"saveQueryState",value:function(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}},{key:"loadQueryState",value:function(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}},{key:"isFindInputFocused",value:function(){return!!T.getValue(this._contextKeyService)}},{key:"getState",value:function(){return this._state}},{key:"closeFindWidget",value:function(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}},{key:"toggleCaseSensitive",value:function(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleWholeWords",value:function(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleRegex",value:function(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"togglePreserveCase",value:function(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleSearchScope",value:function(){var e=this;if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){var t=this._editor.getSelections();t.map((function(t){return 1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t})).filter((function(e){return!!e})),t.length&&this._state.change({searchScope:t},!0)}}},{key:"setSearchString",value:function(e){this._state.isRegex&&(e=g.ec(e)),this._state.change({searchString:e},!1)}},{key:"highlightFindOptions",value:function(){}},{key:"_start",value:function(e,t){return gt(this,void 0,void 0,d().mark((function i(){var n,o,r,s,a;return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.disposeModel(),this._editor.hasModel()){i.next=3;break}return i.abrupt("return");case 3:if(n=Object.assign(Object.assign({},t),{isRevealed:!0}),"single"===e.seedSearchStringFromSelection?(o=_t(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection))&&(this._state.isRegex?n.searchString=g.ec(o):n.searchString=o):"multiple"!==e.seedSearchStringFromSelection||e.updateSearchScope||(r=_t(this._editor,e.seedSearchStringFromSelection))&&(n.searchString=r),n.searchString||!e.seedSearchStringFromGlobalClipboard){i.next=12;break}return i.next=8,this.getGlobalBufferTerm();case 8:if(s=i.sent,this._editor.hasModel()){i.next=11;break}return i.abrupt("return");case 11:s&&(n.searchString=s);case 12:e.forceRevealReplace||n.isReplaceRevealed?n.isReplaceRevealed=!0:this._findWidgetVisible.get()||(n.isReplaceRevealed=!1),e.updateSearchScope&&(a=this._editor.getSelections()).some((function(e){return!e.isEmpty()}))&&(n.searchScope=a),n.loop=e.loop,this._state.change(n,!1),this._model||(this._model=new le(this._editor,this._state));case 17:case"end":return i.stop()}}),i,this)})))}},{key:"start",value:function(e,t){return this._start(e,t)}},{key:"moveToNextMatch",value:function(){return!!this._model&&(this._model.moveToNextMatch(),!0)}},{key:"moveToPrevMatch",value:function(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}},{key:"replace",value:function(){return!!this._model&&(this._model.replace(),!0)}},{key:"replaceAll",value:function(){return!!this._model&&(this._model.replaceAll(),!0)}},{key:"selectAllMatches",value:function(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}},{key:"getGlobalBufferTerm",value:function(){return gt(this,void 0,void 0,d().mark((function e(){return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._editor.getOption(35).globalFindClipboard||!this._editor.hasModel()||this._editor.getModel().isTooLargeForSyncing()){e.next=2;break}return e.abrupt("return",this._clipboardService.readFindText());case 2:return e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})))}},{key:"setGlobalBufferTerm",value:function(e){this._editor.getOption(35).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}}],[{key:"get",value:function(e){return e.getContribution(i.ID)}}]),i}(u.JT);ft.ID="editor.contrib.findController";var vt=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e,o,r,s,a,c,l,d){var h;return(0,n.Z)(this,i),(h=t.call(this,e,r,l,d))._contextViewService=o,h._keybindingService=s,h._themeService=a,h._notificationService=c,h._widget=null,h._findOptionsWidget=null,h}return(0,o.Z)(i,[{key:"_start",value:function(e,t){var n=this,o=Object.create(null,{_start:{get:function(){return(0,r.Z)((0,s.Z)(i.prototype),"_start",n)}}});return gt(this,void 0,void 0,d().mark((function i(){var n,r,s;return d().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:this._widget||this._createFindWidget(),n=this._editor.getSelection(),r=!1,i.t0=this._editor.getOption(35).autoFindInSelection,i.next="always"===i.t0?6:"never"===i.t0?8:"multiline"===i.t0?10:13;break;case 6:return r=!0,i.abrupt("break",14);case 8:return r=!1,i.abrupt("break",14);case 10:return s=!!n&&n.startLineNumber!==n.endLineNumber,r=s,i.abrupt("break",14);case 13:return i.abrupt("break",14);case 14:return e.updateSearchScope=e.updateSearchScope||r,i.next=17,o._start.call(this,e,t);case 17:this._widget&&(2===e.shouldFocus?this._widget.focusReplaceInput():1===e.shouldFocus&&this._widget.focusFindInput());case 18:case"end":return i.stop()}}),i,this)})))}},{key:"highlightFindOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}},{key:"_createFindWidget",value:function(){this._widget=this._register(new nt(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new pe(this._editor,this._state,this._keybindingService,this._themeService))}}]),i}(ft=ht([ut(1,L.i6),ut(2,dt.Uy),ut(3,st.p)],ft));vt=ht([ut(1,at.u),ut(2,L.i6),ut(3,ct.d),ut(4,x.XE),ut(5,lt.lT),ut(6,dt.Uy),ut(7,st.p)],vt);var mt=(0,p.rn)(new p.jY({id:K,label:we.N("startFindAction","Find"),alias:"Find",precondition:L.Ao.or(_.u.focus,L.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:rt.eH.MenubarEditMenu,group:"3_find",title:we.N({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));mt.addImplementation(0,(function(e,t,i){var n=ft.get(t);return!!n&&n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getOption(35).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop})}));var St={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:we.N("actions.find.isRegexOverride",'Overrides "Use Regular Expression" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:we.N("actions.find.wholeWordOverride",'Overrides "Match Whole Word" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:we.N("actions.find.matchCaseOverride",'Overrides "Math Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:we.N("actions.find.preserveCaseOverride",'Overrides "Preserve Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},findInSelection:{type:"boolean"}}}}]},yt=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,n.Z)(this,i),t.call(this,{id:G,label:we.N("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:St})}return(0,o.Z)(i,[{key:"run",value:function(e,t,i){return gt(this,void 0,void 0,d().mark((function e(){var n,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=ft.get(t))){e.next=6;break}return o=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:void 0!==i.replaceString,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{},e.next=5,n.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===n.getState().searchString.length&&"never"!==t.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(null===i||void 0===i?void 0:i.findInSelection)||!1,loop:t.getOption(35).loop},o);case 5:n.setGlobalBufferTerm(n.getState().searchString);case 6:case"end":return e.stop()}}),e)})))}}]),i}(p.R6),bt=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,n.Z)(this,i),t.call(this,{id:z,label:we.N("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}return(0,o.Z)(i,[{key:"run",value:function(e,t){return gt(this,void 0,void 0,d().mark((function e(){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=ft.get(t))){e.next=5;break}return e.next=4,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop});case 4:i.setGlobalBufferTerm(i.getState().searchString);case 5:case"end":return e.stop()}}),e)})))}}]),i}(p.R6),Ct=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,n.Z)(this,i),t.apply(this,arguments)}return(0,o.Z)(i,[{key:"run",value:function(e,t){return gt(this,void 0,void 0,d().mark((function e(){var i;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=ft.get(t))||this._run(i)){e.next=5;break}return e.next=4,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===i.getState().searchString.length&&"never"!==t.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop});case 4:this._run(i);case 5:case"end":return e.stop()}}),e,this)})))}}]),i}(p.R6),kt=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,n.Z)(this,i),t.call(this,{id:Y,label:we.N("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:_.u.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:L.Ao.and(_.u.focus,T),primary:3,weight:100}]})}return(0,o.Z)(i,[{key:"_run",value:function(e){return!!e.moveToNextMatch()&&(e.editor.pushUndoStop(),!0)}}]),i}(Ct),wt=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,n.Z)(this,i),t.call(this,{id:j,label:we.N("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:_.u.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:L.Ao.and(_.u.focus,T),primary:1027,weight:100}]})}return(0,o.Z)(i,[{key:"_run",value:function(e){return e.moveToPrevMatch()}}]),i}(Ct),Nt=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,n.Z)(this,i),t.apply(this,arguments)}return(0,o.Z)(i,[{key:"run",value:function(e,t){return gt(this,void 0,void 0,d().mark((function e(){var i,n,o;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=ft.get(t)){e.next=3;break}return e.abrupt("return");case 3:if(n="selection"===t.getOption(35).seedSearchStringFromSelection,o=null,"never"!==t.getOption(35).seedSearchStringFromSelection&&(o=_t(t,"single",n)),o&&i.setSearchString(o),this._run(i)){e.next=11;break}return e.next=10,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(35).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:n,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop});case 10:this._run(i);case 11:case"end":return e.stop()}}),e,this)})))}}]),i}(p.R6),Rt=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,n.Z)(this,i),t.call(this,{id:Q,label:we.N("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:_.u.focus,primary:2109,weight:100}})}return(0,o.Z)(i,[{key:"_run",value:function(e){return e.moveToNextMatch()}}]),i}(Nt),xt=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(){return(0,n.Z)(this,i),t.call(this,{id:$,label:we.N("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:_.u.focus,primary:3133,weight:100}})}return(0,o.Z)(i,[{key:"_run",value:function(e){return e.moveToPrevMatch()}}]),i}(Nt),It=(0,p.rn)(new p.jY({id:J,label:we.N("startReplace","Replace"),alias:"Replace",precondition:L.Ao.or(_.u.focus,L.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:rt.eH.MenubarEditMenu,group:"3_find",title:we.N({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));It.addImplementation(0,(function(e,t,i){if(!t.hasModel()||t.getOption(81))return!1;var n=ft.get(t);if(!n)return!1;var o=t.getSelection(),r=n.isFindInputFocused(),s=!o.isEmpty()&&o.startLineNumber===o.endLineNumber&&"never"!==t.getOption(35).seedSearchStringFromSelection&&!r,a=r||s?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(35).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==t.getOption(35).seedSearchStringFromSelection,shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(35).loop})})),(0,p._K)(ft.ID,vt),(0,p.Qr)(yt),(0,p.Qr)(bt),(0,p.Qr)(kt),(0,p.Qr)(wt),(0,p.Qr)(Rt),(0,p.Qr)(xt);var Ft=p._l.bindToContribution(ft.get);(0,p.fK)(new Ft({id:X,precondition:A,handler:function(e){return e.closeFindWidget()},kbOpts:{weight:105,kbExpr:L.Ao.and(_.u.focus,L.Ao.not("isComposing")),primary:9,secondary:[1033]}})),(0,p.fK)(new Ft({id:ee,precondition:void 0,handler:function(e){return e.toggleCaseSensitive()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:V.primary,mac:V.mac,win:V.win,linux:V.linux}})),(0,p.fK)(new Ft({id:te,precondition:void 0,handler:function(e){return e.toggleWholeWords()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:B.primary,mac:B.mac,win:B.win,linux:B.linux}})),(0,p.fK)(new Ft({id:ie,precondition:void 0,handler:function(e){return e.toggleRegex()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:H.primary,mac:H.mac,win:H.win,linux:H.linux}})),(0,p.fK)(new Ft({id:ne,precondition:void 0,handler:function(e){return e.toggleSearchScope()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:q.primary,mac:q.mac,win:q.win,linux:q.linux}})),(0,p.fK)(new Ft({id:oe,precondition:void 0,handler:function(e){return e.togglePreserveCase()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:U.primary,mac:U.mac,win:U.win,linux:U.linux}})),(0,p.fK)(new Ft({id:re,precondition:A,handler:function(e){return e.replace()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:3094}})),(0,p.fK)(new Ft({id:re,precondition:A,handler:function(e){return e.replace()},kbOpts:{weight:105,kbExpr:L.Ao.and(_.u.focus,W),primary:3}})),(0,p.fK)(new Ft({id:se,precondition:A,handler:function(e){return e.replaceAll()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:2563}})),(0,p.fK)(new Ft({id:se,precondition:A,handler:function(e){return e.replaceAll()},kbOpts:{weight:105,kbExpr:L.Ao.and(_.u.focus,W),primary:void 0,mac:{primary:2051}}})),(0,p.fK)(new Ft({id:ae,precondition:A,handler:function(e){return e.selectAllMatches()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:515}}))}}]);
//# sourceMappingURL=monaco-editor-vendor.b74e11c3.ce578274.js.map