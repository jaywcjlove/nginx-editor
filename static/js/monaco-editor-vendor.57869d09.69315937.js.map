{"version":3,"file":"static/js/monaco-editor-vendor.57869d09.69315937.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/browser/view/renderingContext.js","../node_modules/monaco-editor/esm/vs/editor/browser/view/viewController.js","../node_modules/monaco-editor/esm/vs/editor/browser/view/viewLayer.js","../node_modules/monaco-editor/esm/vs/editor/browser/view/viewOverlays.js","../node_modules/monaco-editor/esm/vs/editor/browser/view/viewPart.js","../node_modules/monaco-editor/esm/vs/editor/browser/view/viewUserInputEvents.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorWidget.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorContributions.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditor.contribution.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/utils.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/accessibleDiffViewer.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/decorations.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/movedBlocksLines.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorDecorations.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorSash.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/outlineModel.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/hideUnchangedRegionsFeature.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/workerBasedDocumentDiffProvider.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffProviderFactoryService.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorViewModel.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/inlineDiffDeletedCodeMargin.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/renderLines.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/lineAlignment.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/overviewRulerPart.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/delegatingEditorImpl.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/colors.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorEditors.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorOptions.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorWidget.js","../node_modules/monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js","../node_modules/monaco-editor/esm/vs/editor/common/commands/replaceCommand.js","../node_modules/monaco-editor/esm/vs/editor/common/commands/shiftCommand.js","../node_modules/monaco-editor/esm/vs/editor/common/commands/surroundSelectionCommand.js","../node_modules/monaco-editor/esm/vs/editor/common/commands/trimTrailingWhitespaceCommand.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class RestrictedRenderingContext {\n    constructor(viewLayout, viewportData) {\n        this._restrictedRenderingContextBrand = undefined;\n        this._viewLayout = viewLayout;\n        this.viewportData = viewportData;\n        this.scrollWidth = this._viewLayout.getScrollWidth();\n        this.scrollHeight = this._viewLayout.getScrollHeight();\n        this.visibleRange = this.viewportData.visibleRange;\n        this.bigNumbersDelta = this.viewportData.bigNumbersDelta;\n        const vInfo = this._viewLayout.getCurrentViewport();\n        this.scrollTop = vInfo.top;\n        this.scrollLeft = vInfo.left;\n        this.viewportWidth = vInfo.width;\n        this.viewportHeight = vInfo.height;\n    }\n    getScrolledTopFromAbsoluteTop(absoluteTop) {\n        return absoluteTop - this.scrollTop;\n    }\n    getVerticalOffsetForLineNumber(lineNumber, includeViewZones) {\n        return this._viewLayout.getVerticalOffsetForLineNumber(lineNumber, includeViewZones);\n    }\n    getVerticalOffsetAfterLineNumber(lineNumber, includeViewZones) {\n        return this._viewLayout.getVerticalOffsetAfterLineNumber(lineNumber, includeViewZones);\n    }\n    getDecorationsInViewport() {\n        return this.viewportData.getDecorationsInViewport();\n    }\n}\nexport class RenderingContext extends RestrictedRenderingContext {\n    constructor(viewLayout, viewportData, viewLines) {\n        super(viewLayout, viewportData);\n        this._renderingContextBrand = undefined;\n        this._viewLines = viewLines;\n    }\n    linesVisibleRangesForRange(range, includeNewLines) {\n        return this._viewLines.linesVisibleRangesForRange(range, includeNewLines);\n    }\n    visibleRangeForPosition(position) {\n        return this._viewLines.visibleRangeForPosition(position);\n    }\n}\nexport class LineVisibleRanges {\n    constructor(outsideRenderedLine, lineNumber, ranges, \n    /**\n     * Indicates if the requested range does not end in this line, but continues on the next line.\n     */\n    continuesOnNextLine) {\n        this.outsideRenderedLine = outsideRenderedLine;\n        this.lineNumber = lineNumber;\n        this.ranges = ranges;\n        this.continuesOnNextLine = continuesOnNextLine;\n    }\n}\nexport class HorizontalRange {\n    static from(ranges) {\n        const result = new Array(ranges.length);\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            const range = ranges[i];\n            result[i] = new HorizontalRange(range.left, range.width);\n        }\n        return result;\n    }\n    constructor(left, width) {\n        this._horizontalRangeBrand = undefined;\n        this.left = Math.round(left);\n        this.width = Math.round(width);\n    }\n    toString() {\n        return `[${this.left},${this.width}]`;\n    }\n}\nexport class FloatHorizontalRange {\n    constructor(left, width) {\n        this._floatHorizontalRangeBrand = undefined;\n        this.left = left;\n        this.width = width;\n    }\n    toString() {\n        return `[${this.left},${this.width}]`;\n    }\n    static compare(a, b) {\n        return a.left - b.left;\n    }\n}\nexport class HorizontalPosition {\n    constructor(outsideRenderedLine, left) {\n        this.outsideRenderedLine = outsideRenderedLine;\n        this.originalLeft = left;\n        this.left = Math.round(this.originalLeft);\n    }\n}\nexport class VisibleRanges {\n    constructor(outsideRenderedLine, ranges) {\n        this.outsideRenderedLine = outsideRenderedLine;\n        this.ranges = ranges;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CoreNavigationCommands } from '../coreCommands.js';\nimport { Position } from '../../common/core/position.js';\nimport * as platform from '../../../base/common/platform.js';\nexport class ViewController {\n    constructor(configuration, viewModel, userInputEvents, commandDelegate) {\n        this.configuration = configuration;\n        this.viewModel = viewModel;\n        this.userInputEvents = userInputEvents;\n        this.commandDelegate = commandDelegate;\n    }\n    paste(text, pasteOnNewLine, multicursorText, mode) {\n        this.commandDelegate.paste(text, pasteOnNewLine, multicursorText, mode);\n    }\n    type(text) {\n        this.commandDelegate.type(text);\n    }\n    compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) {\n        this.commandDelegate.compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta);\n    }\n    compositionStart() {\n        this.commandDelegate.startComposition();\n    }\n    compositionEnd() {\n        this.commandDelegate.endComposition();\n    }\n    cut() {\n        this.commandDelegate.cut();\n    }\n    setSelection(modelSelection) {\n        CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel, {\n            source: 'keyboard',\n            selection: modelSelection\n        });\n    }\n    _validateViewColumn(viewPosition) {\n        const minColumn = this.viewModel.getLineMinColumn(viewPosition.lineNumber);\n        if (viewPosition.column < minColumn) {\n            return new Position(viewPosition.lineNumber, minColumn);\n        }\n        return viewPosition;\n    }\n    _hasMulticursorModifier(data) {\n        switch (this.configuration.options.get(77 /* EditorOption.multiCursorModifier */)) {\n            case 'altKey':\n                return data.altKey;\n            case 'ctrlKey':\n                return data.ctrlKey;\n            case 'metaKey':\n                return data.metaKey;\n            default:\n                return false;\n        }\n    }\n    _hasNonMulticursorModifier(data) {\n        switch (this.configuration.options.get(77 /* EditorOption.multiCursorModifier */)) {\n            case 'altKey':\n                return data.ctrlKey || data.metaKey;\n            case 'ctrlKey':\n                return data.altKey || data.metaKey;\n            case 'metaKey':\n                return data.ctrlKey || data.altKey;\n            default:\n                return false;\n        }\n    }\n    dispatchMouse(data) {\n        const options = this.configuration.options;\n        const selectionClipboardIsOn = (platform.isLinux && options.get(106 /* EditorOption.selectionClipboard */));\n        const columnSelection = options.get(22 /* EditorOption.columnSelection */);\n        if (data.middleButton && !selectionClipboardIsOn) {\n            this._columnSelect(data.position, data.mouseColumn, data.inSelectionMode);\n        }\n        else if (data.startedOnLineNumbers) {\n            // If the dragging started on the gutter, then have operations work on the entire line\n            if (this._hasMulticursorModifier(data)) {\n                if (data.inSelectionMode) {\n                    this._lastCursorLineSelect(data.position, data.revealType);\n                }\n                else {\n                    this._createCursor(data.position, true);\n                }\n            }\n            else {\n                if (data.inSelectionMode) {\n                    this._lineSelectDrag(data.position, data.revealType);\n                }\n                else {\n                    this._lineSelect(data.position, data.revealType);\n                }\n            }\n        }\n        else if (data.mouseDownCount >= 4) {\n            this._selectAll();\n        }\n        else if (data.mouseDownCount === 3) {\n            if (this._hasMulticursorModifier(data)) {\n                if (data.inSelectionMode) {\n                    this._lastCursorLineSelectDrag(data.position, data.revealType);\n                }\n                else {\n                    this._lastCursorLineSelect(data.position, data.revealType);\n                }\n            }\n            else {\n                if (data.inSelectionMode) {\n                    this._lineSelectDrag(data.position, data.revealType);\n                }\n                else {\n                    this._lineSelect(data.position, data.revealType);\n                }\n            }\n        }\n        else if (data.mouseDownCount === 2) {\n            if (!data.onInjectedText) {\n                if (this._hasMulticursorModifier(data)) {\n                    this._lastCursorWordSelect(data.position, data.revealType);\n                }\n                else {\n                    if (data.inSelectionMode) {\n                        this._wordSelectDrag(data.position, data.revealType);\n                    }\n                    else {\n                        this._wordSelect(data.position, data.revealType);\n                    }\n                }\n            }\n        }\n        else {\n            if (this._hasMulticursorModifier(data)) {\n                if (!this._hasNonMulticursorModifier(data)) {\n                    if (data.shiftKey) {\n                        this._columnSelect(data.position, data.mouseColumn, true);\n                    }\n                    else {\n                        // Do multi-cursor operations only when purely alt is pressed\n                        if (data.inSelectionMode) {\n                            this._lastCursorMoveToSelect(data.position, data.revealType);\n                        }\n                        else {\n                            this._createCursor(data.position, false);\n                        }\n                    }\n                }\n            }\n            else {\n                if (data.inSelectionMode) {\n                    if (data.altKey) {\n                        this._columnSelect(data.position, data.mouseColumn, true);\n                    }\n                    else {\n                        if (columnSelection) {\n                            this._columnSelect(data.position, data.mouseColumn, true);\n                        }\n                        else {\n                            this._moveToSelect(data.position, data.revealType);\n                        }\n                    }\n                }\n                else {\n                    this.moveTo(data.position, data.revealType);\n                }\n            }\n        }\n    }\n    _usualArgs(viewPosition, revealType) {\n        viewPosition = this._validateViewColumn(viewPosition);\n        return {\n            source: 'mouse',\n            position: this._convertViewToModelPosition(viewPosition),\n            viewPosition,\n            revealType\n        };\n    }\n    moveTo(viewPosition, revealType) {\n        CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _moveToSelect(viewPosition, revealType) {\n        CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _columnSelect(viewPosition, mouseColumn, doColumnSelect) {\n        viewPosition = this._validateViewColumn(viewPosition);\n        CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel, {\n            source: 'mouse',\n            position: this._convertViewToModelPosition(viewPosition),\n            viewPosition: viewPosition,\n            mouseColumn: mouseColumn,\n            doColumnSelect: doColumnSelect\n        });\n    }\n    _createCursor(viewPosition, wholeLine) {\n        viewPosition = this._validateViewColumn(viewPosition);\n        CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel, {\n            source: 'mouse',\n            position: this._convertViewToModelPosition(viewPosition),\n            viewPosition: viewPosition,\n            wholeLine: wholeLine\n        });\n    }\n    _lastCursorMoveToSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _wordSelect(viewPosition, revealType) {\n        CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _wordSelectDrag(viewPosition, revealType) {\n        CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lastCursorWordSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lineSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lineSelectDrag(viewPosition, revealType) {\n        CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lastCursorLineSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lastCursorLineSelectDrag(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _selectAll() {\n        CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel, { source: 'mouse' });\n    }\n    // ----------------------\n    _convertViewToModelPosition(viewPosition) {\n        return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(viewPosition);\n    }\n    emitKeyDown(e) {\n        this.userInputEvents.emitKeyDown(e);\n    }\n    emitKeyUp(e) {\n        this.userInputEvents.emitKeyUp(e);\n    }\n    emitContextMenu(e) {\n        this.userInputEvents.emitContextMenu(e);\n    }\n    emitMouseMove(e) {\n        this.userInputEvents.emitMouseMove(e);\n    }\n    emitMouseLeave(e) {\n        this.userInputEvents.emitMouseLeave(e);\n    }\n    emitMouseUp(e) {\n        this.userInputEvents.emitMouseUp(e);\n    }\n    emitMouseDown(e) {\n        this.userInputEvents.emitMouseDown(e);\n    }\n    emitMouseDrag(e) {\n        this.userInputEvents.emitMouseDrag(e);\n    }\n    emitMouseDrop(e) {\n        this.userInputEvents.emitMouseDrop(e);\n    }\n    emitMouseDropCanceled() {\n        this.userInputEvents.emitMouseDropCanceled();\n    }\n    emitMouseWheel(e) {\n        this.userInputEvents.emitMouseWheel(e);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { createTrustedTypesPolicy } from '../../../base/browser/trustedTypes.js';\nimport { BugIndicatingError } from '../../../base/common/errors.js';\nimport { StringBuilder } from '../../common/core/stringBuilder.js';\nexport class RenderedLinesCollection {\n    constructor(createLine) {\n        this._createLine = createLine;\n        this._set(1, []);\n    }\n    flush() {\n        this._set(1, []);\n    }\n    _set(rendLineNumberStart, lines) {\n        this._lines = lines;\n        this._rendLineNumberStart = rendLineNumberStart;\n    }\n    _get() {\n        return {\n            rendLineNumberStart: this._rendLineNumberStart,\n            lines: this._lines\n        };\n    }\n    /**\n     * @returns Inclusive line number that is inside this collection\n     */\n    getStartLineNumber() {\n        return this._rendLineNumberStart;\n    }\n    /**\n     * @returns Inclusive line number that is inside this collection\n     */\n    getEndLineNumber() {\n        return this._rendLineNumberStart + this._lines.length - 1;\n    }\n    getCount() {\n        return this._lines.length;\n    }\n    getLine(lineNumber) {\n        const lineIndex = lineNumber - this._rendLineNumberStart;\n        if (lineIndex < 0 || lineIndex >= this._lines.length) {\n            throw new BugIndicatingError('Illegal value for lineNumber');\n        }\n        return this._lines[lineIndex];\n    }\n    /**\n     * @returns Lines that were removed from this collection\n     */\n    onLinesDeleted(deleteFromLineNumber, deleteToLineNumber) {\n        if (this.getCount() === 0) {\n            // no lines\n            return null;\n        }\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        if (deleteToLineNumber < startLineNumber) {\n            // deleting above the viewport\n            const deleteCnt = deleteToLineNumber - deleteFromLineNumber + 1;\n            this._rendLineNumberStart -= deleteCnt;\n            return null;\n        }\n        if (deleteFromLineNumber > endLineNumber) {\n            // deleted below the viewport\n            return null;\n        }\n        // Record what needs to be deleted\n        let deleteStartIndex = 0;\n        let deleteCount = 0;\n        for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n            const lineIndex = lineNumber - this._rendLineNumberStart;\n            if (deleteFromLineNumber <= lineNumber && lineNumber <= deleteToLineNumber) {\n                // this is a line to be deleted\n                if (deleteCount === 0) {\n                    // this is the first line to be deleted\n                    deleteStartIndex = lineIndex;\n                    deleteCount = 1;\n                }\n                else {\n                    deleteCount++;\n                }\n            }\n        }\n        // Adjust this._rendLineNumberStart for lines deleted above\n        if (deleteFromLineNumber < startLineNumber) {\n            // Something was deleted above\n            let deleteAboveCount = 0;\n            if (deleteToLineNumber < startLineNumber) {\n                // the entire deleted lines are above\n                deleteAboveCount = deleteToLineNumber - deleteFromLineNumber + 1;\n            }\n            else {\n                deleteAboveCount = startLineNumber - deleteFromLineNumber;\n            }\n            this._rendLineNumberStart -= deleteAboveCount;\n        }\n        const deleted = this._lines.splice(deleteStartIndex, deleteCount);\n        return deleted;\n    }\n    onLinesChanged(changeFromLineNumber, changeCount) {\n        const changeToLineNumber = changeFromLineNumber + changeCount - 1;\n        if (this.getCount() === 0) {\n            // no lines\n            return false;\n        }\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        let someoneNotified = false;\n        for (let changedLineNumber = changeFromLineNumber; changedLineNumber <= changeToLineNumber; changedLineNumber++) {\n            if (changedLineNumber >= startLineNumber && changedLineNumber <= endLineNumber) {\n                // Notify the line\n                this._lines[changedLineNumber - this._rendLineNumberStart].onContentChanged();\n                someoneNotified = true;\n            }\n        }\n        return someoneNotified;\n    }\n    onLinesInserted(insertFromLineNumber, insertToLineNumber) {\n        if (this.getCount() === 0) {\n            // no lines\n            return null;\n        }\n        const insertCnt = insertToLineNumber - insertFromLineNumber + 1;\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        if (insertFromLineNumber <= startLineNumber) {\n            // inserting above the viewport\n            this._rendLineNumberStart += insertCnt;\n            return null;\n        }\n        if (insertFromLineNumber > endLineNumber) {\n            // inserting below the viewport\n            return null;\n        }\n        if (insertCnt + insertFromLineNumber > endLineNumber) {\n            // insert inside the viewport in such a way that all remaining lines are pushed outside\n            const deleted = this._lines.splice(insertFromLineNumber - this._rendLineNumberStart, endLineNumber - insertFromLineNumber + 1);\n            return deleted;\n        }\n        // insert inside the viewport, push out some lines, but not all remaining lines\n        const newLines = [];\n        for (let i = 0; i < insertCnt; i++) {\n            newLines[i] = this._createLine();\n        }\n        const insertIndex = insertFromLineNumber - this._rendLineNumberStart;\n        const beforeLines = this._lines.slice(0, insertIndex);\n        const afterLines = this._lines.slice(insertIndex, this._lines.length - insertCnt);\n        const deletedLines = this._lines.slice(this._lines.length - insertCnt, this._lines.length);\n        this._lines = beforeLines.concat(newLines).concat(afterLines);\n        return deletedLines;\n    }\n    onTokensChanged(ranges) {\n        if (this.getCount() === 0) {\n            // no lines\n            return false;\n        }\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        let notifiedSomeone = false;\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            const rng = ranges[i];\n            if (rng.toLineNumber < startLineNumber || rng.fromLineNumber > endLineNumber) {\n                // range outside viewport\n                continue;\n            }\n            const from = Math.max(startLineNumber, rng.fromLineNumber);\n            const to = Math.min(endLineNumber, rng.toLineNumber);\n            for (let lineNumber = from; lineNumber <= to; lineNumber++) {\n                const lineIndex = lineNumber - this._rendLineNumberStart;\n                this._lines[lineIndex].onTokensChanged();\n                notifiedSomeone = true;\n            }\n        }\n        return notifiedSomeone;\n    }\n}\nexport class VisibleLinesCollection {\n    constructor(host) {\n        this._host = host;\n        this.domNode = this._createDomNode();\n        this._linesCollection = new RenderedLinesCollection(() => this._host.createVisibleLine());\n    }\n    _createDomNode() {\n        const domNode = createFastDomNode(document.createElement('div'));\n        domNode.setClassName('view-layer');\n        domNode.setPosition('absolute');\n        domNode.domNode.setAttribute('role', 'presentation');\n        domNode.domNode.setAttribute('aria-hidden', 'true');\n        return domNode;\n    }\n    // ---- begin view event handlers\n    onConfigurationChanged(e) {\n        if (e.hasChanged(143 /* EditorOption.layoutInfo */)) {\n            return true;\n        }\n        return false;\n    }\n    onFlushed(e) {\n        this._linesCollection.flush();\n        // No need to clear the dom node because a full .innerHTML will occur in ViewLayerRenderer._render\n        return true;\n    }\n    onLinesChanged(e) {\n        return this._linesCollection.onLinesChanged(e.fromLineNumber, e.count);\n    }\n    onLinesDeleted(e) {\n        const deleted = this._linesCollection.onLinesDeleted(e.fromLineNumber, e.toLineNumber);\n        if (deleted) {\n            // Remove from DOM\n            for (let i = 0, len = deleted.length; i < len; i++) {\n                const lineDomNode = deleted[i].getDomNode();\n                if (lineDomNode) {\n                    this.domNode.domNode.removeChild(lineDomNode);\n                }\n            }\n        }\n        return true;\n    }\n    onLinesInserted(e) {\n        const deleted = this._linesCollection.onLinesInserted(e.fromLineNumber, e.toLineNumber);\n        if (deleted) {\n            // Remove from DOM\n            for (let i = 0, len = deleted.length; i < len; i++) {\n                const lineDomNode = deleted[i].getDomNode();\n                if (lineDomNode) {\n                    this.domNode.domNode.removeChild(lineDomNode);\n                }\n            }\n        }\n        return true;\n    }\n    onScrollChanged(e) {\n        return e.scrollTopChanged;\n    }\n    onTokensChanged(e) {\n        return this._linesCollection.onTokensChanged(e.ranges);\n    }\n    onZonesChanged(e) {\n        return true;\n    }\n    // ---- end view event handlers\n    getStartLineNumber() {\n        return this._linesCollection.getStartLineNumber();\n    }\n    getEndLineNumber() {\n        return this._linesCollection.getEndLineNumber();\n    }\n    getVisibleLine(lineNumber) {\n        return this._linesCollection.getLine(lineNumber);\n    }\n    renderLines(viewportData) {\n        const inp = this._linesCollection._get();\n        const renderer = new ViewLayerRenderer(this.domNode.domNode, this._host, viewportData);\n        const ctx = {\n            rendLineNumberStart: inp.rendLineNumberStart,\n            lines: inp.lines,\n            linesLength: inp.lines.length\n        };\n        // Decide if this render will do a single update (single large .innerHTML) or many updates (inserting/removing dom nodes)\n        const resCtx = renderer.render(ctx, viewportData.startLineNumber, viewportData.endLineNumber, viewportData.relativeVerticalOffset);\n        this._linesCollection._set(resCtx.rendLineNumberStart, resCtx.lines);\n    }\n}\nclass ViewLayerRenderer {\n    constructor(domNode, host, viewportData) {\n        this.domNode = domNode;\n        this.host = host;\n        this.viewportData = viewportData;\n    }\n    render(inContext, startLineNumber, stopLineNumber, deltaTop) {\n        const ctx = {\n            rendLineNumberStart: inContext.rendLineNumberStart,\n            lines: inContext.lines.slice(0),\n            linesLength: inContext.linesLength\n        };\n        if ((ctx.rendLineNumberStart + ctx.linesLength - 1 < startLineNumber) || (stopLineNumber < ctx.rendLineNumberStart)) {\n            // There is no overlap whatsoever\n            ctx.rendLineNumberStart = startLineNumber;\n            ctx.linesLength = stopLineNumber - startLineNumber + 1;\n            ctx.lines = [];\n            for (let x = startLineNumber; x <= stopLineNumber; x++) {\n                ctx.lines[x - startLineNumber] = this.host.createVisibleLine();\n            }\n            this._finishRendering(ctx, true, deltaTop);\n            return ctx;\n        }\n        // Update lines which will remain untouched\n        this._renderUntouchedLines(ctx, Math.max(startLineNumber - ctx.rendLineNumberStart, 0), Math.min(stopLineNumber - ctx.rendLineNumberStart, ctx.linesLength - 1), deltaTop, startLineNumber);\n        if (ctx.rendLineNumberStart > startLineNumber) {\n            // Insert lines before\n            const fromLineNumber = startLineNumber;\n            const toLineNumber = Math.min(stopLineNumber, ctx.rendLineNumberStart - 1);\n            if (fromLineNumber <= toLineNumber) {\n                this._insertLinesBefore(ctx, fromLineNumber, toLineNumber, deltaTop, startLineNumber);\n                ctx.linesLength += toLineNumber - fromLineNumber + 1;\n            }\n        }\n        else if (ctx.rendLineNumberStart < startLineNumber) {\n            // Remove lines before\n            const removeCnt = Math.min(ctx.linesLength, startLineNumber - ctx.rendLineNumberStart);\n            if (removeCnt > 0) {\n                this._removeLinesBefore(ctx, removeCnt);\n                ctx.linesLength -= removeCnt;\n            }\n        }\n        ctx.rendLineNumberStart = startLineNumber;\n        if (ctx.rendLineNumberStart + ctx.linesLength - 1 < stopLineNumber) {\n            // Insert lines after\n            const fromLineNumber = ctx.rendLineNumberStart + ctx.linesLength;\n            const toLineNumber = stopLineNumber;\n            if (fromLineNumber <= toLineNumber) {\n                this._insertLinesAfter(ctx, fromLineNumber, toLineNumber, deltaTop, startLineNumber);\n                ctx.linesLength += toLineNumber - fromLineNumber + 1;\n            }\n        }\n        else if (ctx.rendLineNumberStart + ctx.linesLength - 1 > stopLineNumber) {\n            // Remove lines after\n            const fromLineNumber = Math.max(0, stopLineNumber - ctx.rendLineNumberStart + 1);\n            const toLineNumber = ctx.linesLength - 1;\n            const removeCnt = toLineNumber - fromLineNumber + 1;\n            if (removeCnt > 0) {\n                this._removeLinesAfter(ctx, removeCnt);\n                ctx.linesLength -= removeCnt;\n            }\n        }\n        this._finishRendering(ctx, false, deltaTop);\n        return ctx;\n    }\n    _renderUntouchedLines(ctx, startIndex, endIndex, deltaTop, deltaLN) {\n        const rendLineNumberStart = ctx.rendLineNumberStart;\n        const lines = ctx.lines;\n        for (let i = startIndex; i <= endIndex; i++) {\n            const lineNumber = rendLineNumberStart + i;\n            lines[i].layoutLine(lineNumber, deltaTop[lineNumber - deltaLN]);\n        }\n    }\n    _insertLinesBefore(ctx, fromLineNumber, toLineNumber, deltaTop, deltaLN) {\n        const newLines = [];\n        let newLinesLen = 0;\n        for (let lineNumber = fromLineNumber; lineNumber <= toLineNumber; lineNumber++) {\n            newLines[newLinesLen++] = this.host.createVisibleLine();\n        }\n        ctx.lines = newLines.concat(ctx.lines);\n    }\n    _removeLinesBefore(ctx, removeCount) {\n        for (let i = 0; i < removeCount; i++) {\n            const lineDomNode = ctx.lines[i].getDomNode();\n            if (lineDomNode) {\n                this.domNode.removeChild(lineDomNode);\n            }\n        }\n        ctx.lines.splice(0, removeCount);\n    }\n    _insertLinesAfter(ctx, fromLineNumber, toLineNumber, deltaTop, deltaLN) {\n        const newLines = [];\n        let newLinesLen = 0;\n        for (let lineNumber = fromLineNumber; lineNumber <= toLineNumber; lineNumber++) {\n            newLines[newLinesLen++] = this.host.createVisibleLine();\n        }\n        ctx.lines = ctx.lines.concat(newLines);\n    }\n    _removeLinesAfter(ctx, removeCount) {\n        const removeIndex = ctx.linesLength - removeCount;\n        for (let i = 0; i < removeCount; i++) {\n            const lineDomNode = ctx.lines[removeIndex + i].getDomNode();\n            if (lineDomNode) {\n                this.domNode.removeChild(lineDomNode);\n            }\n        }\n        ctx.lines.splice(removeIndex, removeCount);\n    }\n    _finishRenderingNewLines(ctx, domNodeIsEmpty, newLinesHTML, wasNew) {\n        if (ViewLayerRenderer._ttPolicy) {\n            newLinesHTML = ViewLayerRenderer._ttPolicy.createHTML(newLinesHTML);\n        }\n        const lastChild = this.domNode.lastChild;\n        if (domNodeIsEmpty || !lastChild) {\n            this.domNode.innerHTML = newLinesHTML; // explains the ugly casts -> https://github.com/microsoft/vscode/issues/106396#issuecomment-692625393;\n        }\n        else {\n            lastChild.insertAdjacentHTML('afterend', newLinesHTML);\n        }\n        let currChild = this.domNode.lastChild;\n        for (let i = ctx.linesLength - 1; i >= 0; i--) {\n            const line = ctx.lines[i];\n            if (wasNew[i]) {\n                line.setDomNode(currChild);\n                currChild = currChild.previousSibling;\n            }\n        }\n    }\n    _finishRenderingInvalidLines(ctx, invalidLinesHTML, wasInvalid) {\n        const hugeDomNode = document.createElement('div');\n        if (ViewLayerRenderer._ttPolicy) {\n            invalidLinesHTML = ViewLayerRenderer._ttPolicy.createHTML(invalidLinesHTML);\n        }\n        hugeDomNode.innerHTML = invalidLinesHTML;\n        for (let i = 0; i < ctx.linesLength; i++) {\n            const line = ctx.lines[i];\n            if (wasInvalid[i]) {\n                const source = hugeDomNode.firstChild;\n                const lineDomNode = line.getDomNode();\n                lineDomNode.parentNode.replaceChild(source, lineDomNode);\n                line.setDomNode(source);\n            }\n        }\n    }\n    _finishRendering(ctx, domNodeIsEmpty, deltaTop) {\n        const sb = ViewLayerRenderer._sb;\n        const linesLength = ctx.linesLength;\n        const lines = ctx.lines;\n        const rendLineNumberStart = ctx.rendLineNumberStart;\n        const wasNew = [];\n        {\n            sb.reset();\n            let hadNewLine = false;\n            for (let i = 0; i < linesLength; i++) {\n                const line = lines[i];\n                wasNew[i] = false;\n                const lineDomNode = line.getDomNode();\n                if (lineDomNode) {\n                    // line is not new\n                    continue;\n                }\n                const renderResult = line.renderLine(i + rendLineNumberStart, deltaTop[i], this.viewportData, sb);\n                if (!renderResult) {\n                    // line does not need rendering\n                    continue;\n                }\n                wasNew[i] = true;\n                hadNewLine = true;\n            }\n            if (hadNewLine) {\n                this._finishRenderingNewLines(ctx, domNodeIsEmpty, sb.build(), wasNew);\n            }\n        }\n        {\n            sb.reset();\n            let hadInvalidLine = false;\n            const wasInvalid = [];\n            for (let i = 0; i < linesLength; i++) {\n                const line = lines[i];\n                wasInvalid[i] = false;\n                if (wasNew[i]) {\n                    // line was new\n                    continue;\n                }\n                const renderResult = line.renderLine(i + rendLineNumberStart, deltaTop[i], this.viewportData, sb);\n                if (!renderResult) {\n                    // line does not need rendering\n                    continue;\n                }\n                wasInvalid[i] = true;\n                hadInvalidLine = true;\n            }\n            if (hadInvalidLine) {\n                this._finishRenderingInvalidLines(ctx, sb.build(), wasInvalid);\n            }\n        }\n    }\n}\nViewLayerRenderer._ttPolicy = createTrustedTypesPolicy('editorViewLayer', { createHTML: value => value });\nViewLayerRenderer._sb = new StringBuilder(100000);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { VisibleLinesCollection } from './viewLayer.js';\nimport { ViewPart } from './viewPart.js';\nexport class ViewOverlays extends ViewPart {\n    constructor(context) {\n        super(context);\n        this._visibleLines = new VisibleLinesCollection(this);\n        this.domNode = this._visibleLines.domNode;\n        const options = this._context.configuration.options;\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        applyFontInfo(this.domNode, fontInfo);\n        this._dynamicOverlays = [];\n        this._isFocused = false;\n        this.domNode.setClassName('view-overlays');\n    }\n    shouldRender() {\n        if (super.shouldRender()) {\n            return true;\n        }\n        for (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n            const dynamicOverlay = this._dynamicOverlays[i];\n            if (dynamicOverlay.shouldRender()) {\n                return true;\n            }\n        }\n        return false;\n    }\n    dispose() {\n        super.dispose();\n        for (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n            const dynamicOverlay = this._dynamicOverlays[i];\n            dynamicOverlay.dispose();\n        }\n        this._dynamicOverlays = [];\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    // ---- begin IVisibleLinesHost\n    createVisibleLine() {\n        return new ViewOverlayLine(this._context.configuration, this._dynamicOverlays);\n    }\n    // ---- end IVisibleLinesHost\n    addDynamicOverlay(overlay) {\n        this._dynamicOverlays.push(overlay);\n    }\n    // ----- event handlers\n    onConfigurationChanged(e) {\n        this._visibleLines.onConfigurationChanged(e);\n        const startLineNumber = this._visibleLines.getStartLineNumber();\n        const endLineNumber = this._visibleLines.getEndLineNumber();\n        for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n            const line = this._visibleLines.getVisibleLine(lineNumber);\n            line.onConfigurationChanged(e);\n        }\n        const options = this._context.configuration.options;\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        applyFontInfo(this.domNode, fontInfo);\n        return true;\n    }\n    onFlushed(e) {\n        return this._visibleLines.onFlushed(e);\n    }\n    onFocusChanged(e) {\n        this._isFocused = e.isFocused;\n        return true;\n    }\n    onLinesChanged(e) {\n        return this._visibleLines.onLinesChanged(e);\n    }\n    onLinesDeleted(e) {\n        return this._visibleLines.onLinesDeleted(e);\n    }\n    onLinesInserted(e) {\n        return this._visibleLines.onLinesInserted(e);\n    }\n    onScrollChanged(e) {\n        return this._visibleLines.onScrollChanged(e) || true;\n    }\n    onTokensChanged(e) {\n        return this._visibleLines.onTokensChanged(e);\n    }\n    onZonesChanged(e) {\n        return this._visibleLines.onZonesChanged(e);\n    }\n    // ----- end event handlers\n    prepareRender(ctx) {\n        const toRender = this._dynamicOverlays.filter(overlay => overlay.shouldRender());\n        for (let i = 0, len = toRender.length; i < len; i++) {\n            const dynamicOverlay = toRender[i];\n            dynamicOverlay.prepareRender(ctx);\n            dynamicOverlay.onDidRender();\n        }\n    }\n    render(ctx) {\n        // Overwriting to bypass `shouldRender` flag\n        this._viewOverlaysRender(ctx);\n        this.domNode.toggleClassName('focused', this._isFocused);\n    }\n    _viewOverlaysRender(ctx) {\n        this._visibleLines.renderLines(ctx.viewportData);\n    }\n}\nexport class ViewOverlayLine {\n    constructor(configuration, dynamicOverlays) {\n        this._configuration = configuration;\n        this._lineHeight = this._configuration.options.get(66 /* EditorOption.lineHeight */);\n        this._dynamicOverlays = dynamicOverlays;\n        this._domNode = null;\n        this._renderedContent = null;\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            return null;\n        }\n        return this._domNode.domNode;\n    }\n    setDomNode(domNode) {\n        this._domNode = createFastDomNode(domNode);\n    }\n    onContentChanged() {\n        // Nothing\n    }\n    onTokensChanged() {\n        // Nothing\n    }\n    onConfigurationChanged(e) {\n        this._lineHeight = this._configuration.options.get(66 /* EditorOption.lineHeight */);\n    }\n    renderLine(lineNumber, deltaTop, viewportData, sb) {\n        let result = '';\n        for (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n            const dynamicOverlay = this._dynamicOverlays[i];\n            result += dynamicOverlay.render(viewportData.startLineNumber, lineNumber);\n        }\n        if (this._renderedContent === result) {\n            // No rendering needed\n            return false;\n        }\n        this._renderedContent = result;\n        sb.appendString('<div style=\"position:absolute;top:');\n        sb.appendString(String(deltaTop));\n        sb.appendString('px;width:100%;height:');\n        sb.appendString(String(this._lineHeight));\n        sb.appendString('px;\">');\n        sb.appendString(result);\n        sb.appendString('</div>');\n        return true;\n    }\n    layoutLine(lineNumber, deltaTop) {\n        if (this._domNode) {\n            this._domNode.setTop(deltaTop);\n            this._domNode.setHeight(this._lineHeight);\n        }\n    }\n}\nexport class ContentViewOverlays extends ViewOverlays {\n    constructor(context) {\n        super(context);\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n        this._contentWidth = layoutInfo.contentWidth;\n        this.domNode.setHeight(0);\n    }\n    // --- begin event handlers\n    onConfigurationChanged(e) {\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n        this._contentWidth = layoutInfo.contentWidth;\n        return super.onConfigurationChanged(e) || true;\n    }\n    onScrollChanged(e) {\n        return super.onScrollChanged(e) || e.scrollWidthChanged;\n    }\n    // --- end event handlers\n    _viewOverlaysRender(ctx) {\n        super._viewOverlaysRender(ctx);\n        this.domNode.setWidth(Math.max(ctx.scrollWidth, this._contentWidth));\n    }\n}\nexport class MarginViewOverlays extends ViewOverlays {\n    constructor(context) {\n        super(context);\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n        this._contentLeft = layoutInfo.contentLeft;\n        this.domNode.setClassName('margin-view-overlays');\n        this.domNode.setWidth(1);\n        applyFontInfo(this.domNode, options.get(50 /* EditorOption.fontInfo */));\n    }\n    onConfigurationChanged(e) {\n        const options = this._context.configuration.options;\n        applyFontInfo(this.domNode, options.get(50 /* EditorOption.fontInfo */));\n        const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n        this._contentLeft = layoutInfo.contentLeft;\n        return super.onConfigurationChanged(e) || true;\n    }\n    onScrollChanged(e) {\n        return super.onScrollChanged(e) || e.scrollHeightChanged;\n    }\n    _viewOverlaysRender(ctx) {\n        super._viewOverlaysRender(ctx);\n        const height = Math.min(ctx.scrollHeight, 1000000);\n        this.domNode.setHeight(height);\n        this.domNode.setWidth(this._contentLeft);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ViewEventHandler } from '../../common/viewEventHandler.js';\nexport class ViewPart extends ViewEventHandler {\n    constructor(context) {\n        super();\n        this._context = context;\n        this._context.addEventHandler(this);\n    }\n    dispose() {\n        this._context.removeEventHandler(this);\n        super.dispose();\n    }\n}\nexport class PartFingerprints {\n    static write(target, partId) {\n        target.setAttribute('data-mprt', String(partId));\n    }\n    static read(target) {\n        const r = target.getAttribute('data-mprt');\n        if (r === null) {\n            return 0 /* PartFingerprint.None */;\n        }\n        return parseInt(r, 10);\n    }\n    static collect(child, stopAt) {\n        const result = [];\n        let resultLen = 0;\n        while (child && child !== child.ownerDocument.body) {\n            if (child === stopAt) {\n                break;\n            }\n            if (child.nodeType === child.ELEMENT_NODE) {\n                result[resultLen++] = this.read(child);\n            }\n            child = child.parentElement;\n        }\n        const r = new Uint8Array(resultLen);\n        for (let i = 0; i < resultLen; i++) {\n            r[i] = result[resultLen - i - 1];\n        }\n        return r;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Position } from '../../common/core/position.js';\nexport class ViewUserInputEvents {\n    constructor(coordinatesConverter) {\n        this.onKeyDown = null;\n        this.onKeyUp = null;\n        this.onContextMenu = null;\n        this.onMouseMove = null;\n        this.onMouseLeave = null;\n        this.onMouseDown = null;\n        this.onMouseUp = null;\n        this.onMouseDrag = null;\n        this.onMouseDrop = null;\n        this.onMouseDropCanceled = null;\n        this.onMouseWheel = null;\n        this._coordinatesConverter = coordinatesConverter;\n    }\n    emitKeyDown(e) {\n        var _a;\n        (_a = this.onKeyDown) === null || _a === void 0 ? void 0 : _a.call(this, e);\n    }\n    emitKeyUp(e) {\n        var _a;\n        (_a = this.onKeyUp) === null || _a === void 0 ? void 0 : _a.call(this, e);\n    }\n    emitContextMenu(e) {\n        var _a;\n        (_a = this.onContextMenu) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseMove(e) {\n        var _a;\n        (_a = this.onMouseMove) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseLeave(e) {\n        var _a;\n        (_a = this.onMouseLeave) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDown(e) {\n        var _a;\n        (_a = this.onMouseDown) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseUp(e) {\n        var _a;\n        (_a = this.onMouseUp) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDrag(e) {\n        var _a;\n        (_a = this.onMouseDrag) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDrop(e) {\n        var _a;\n        (_a = this.onMouseDrop) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDropCanceled() {\n        var _a;\n        (_a = this.onMouseDropCanceled) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n    emitMouseWheel(e) {\n        var _a;\n        (_a = this.onMouseWheel) === null || _a === void 0 ? void 0 : _a.call(this, e);\n    }\n    _convertViewToModelMouseEvent(e) {\n        if (e.target) {\n            return {\n                event: e.event,\n                target: this._convertViewToModelMouseTarget(e.target)\n            };\n        }\n        return e;\n    }\n    _convertViewToModelMouseTarget(target) {\n        return ViewUserInputEvents.convertViewToModelMouseTarget(target, this._coordinatesConverter);\n    }\n    static convertViewToModelMouseTarget(target, coordinatesConverter) {\n        const result = Object.assign({}, target);\n        if (result.position) {\n            result.position = coordinatesConverter.convertViewPositionToModelPosition(result.position);\n        }\n        if (result.range) {\n            result.range = coordinatesConverter.convertViewRangeToModelRange(result.range);\n        }\n        if (result.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */ || result.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */) {\n            result.detail = this.convertViewToModelViewZoneData(result.detail, coordinatesConverter);\n        }\n        return result;\n    }\n    static convertViewToModelViewZoneData(data, coordinatesConverter) {\n        return {\n            viewZoneId: data.viewZoneId,\n            positionBefore: data.positionBefore ? coordinatesConverter.convertViewPositionToModelPosition(data.positionBefore) : data.positionBefore,\n            positionAfter: data.positionAfter ? coordinatesConverter.convertViewPositionToModelPosition(data.positionAfter) : data.positionAfter,\n            position: coordinatesConverter.convertViewPositionToModelPosition(data.position),\n            afterLineNumber: coordinatesConverter.convertViewPositionToModelPosition(new Position(data.afterLineNumber, 1)).lineNumber,\n        };\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar CodeEditorWidget_1;\nimport '../services/markerDecorations.js';\nimport './media/editor.css';\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Emitter, createEventDeliveryQueue } from '../../../base/common/event.js';\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { EditorConfiguration } from '../config/editorConfiguration.js';\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { View } from '../view.js';\nimport { ViewUserInputEvents } from '../view/viewUserInputEvents.js';\nimport { filterValidationDecorations } from '../../common/config/editorOptions.js';\nimport { CursorColumns } from '../../common/core/cursorColumns.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport * as editorCommon from '../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { editorUnnecessaryCodeOpacity } from '../../common/core/editorColorRegistry.js';\nimport { editorErrorForeground, editorHintForeground, editorInfoForeground, editorWarningForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { ViewModel } from '../../common/viewModel/viewModelImpl.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { INotificationService, Severity } from '../../../platform/notification/common/notification.js';\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { MonospaceLineBreaksComputerFactory } from '../../common/viewModel/monospaceLineBreaksComputer.js';\nimport { DOMLineBreaksComputerFactory } from '../view/domLineBreaksComputer.js';\nimport { WordOperations } from '../../common/cursor/cursorWordOperations.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { CodeEditorContributions } from './codeEditorContributions.js';\nimport { TabFocus } from '../config/tabFocus.js';\nlet EDITOR_ID = 0;\nclass ModelData {\n    constructor(model, viewModel, view, hasRealView, listenersToRemove, attachedView) {\n        this.model = model;\n        this.viewModel = viewModel;\n        this.view = view;\n        this.hasRealView = hasRealView;\n        this.listenersToRemove = listenersToRemove;\n        this.attachedView = attachedView;\n    }\n    dispose() {\n        dispose(this.listenersToRemove);\n        this.model.onBeforeDetached(this.attachedView);\n        if (this.hasRealView) {\n            this.view.dispose();\n        }\n        this.viewModel.dispose();\n    }\n}\nlet CodeEditorWidget = CodeEditorWidget_1 = class CodeEditorWidget extends Disposable {\n    //#endregion\n    get isSimpleWidget() {\n        return this._configuration.isSimpleWidget;\n    }\n    constructor(domElement, _options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        var _a;\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        //#region Eventing\n        this._deliveryQueue = createEventDeliveryQueue();\n        this._contributions = this._register(new CodeEditorContributions());\n        this._onDidDispose = this._register(new Emitter());\n        this.onDidDispose = this._onDidDispose.event;\n        this._onDidChangeModelContent = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelContent = this._onDidChangeModelContent.event;\n        this._onDidChangeModelLanguage = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelLanguage = this._onDidChangeModelLanguage.event;\n        this._onDidChangeModelLanguageConfiguration = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelLanguageConfiguration = this._onDidChangeModelLanguageConfiguration.event;\n        this._onDidChangeModelOptions = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelOptions = this._onDidChangeModelOptions.event;\n        this._onDidChangeModelDecorations = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelDecorations = this._onDidChangeModelDecorations.event;\n        this._onDidChangeModelTokens = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelTokens = this._onDidChangeModelTokens.event;\n        this._onDidChangeConfiguration = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n        this._onDidChangeModel = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModel = this._onDidChangeModel.event;\n        this._onDidChangeCursorPosition = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeCursorPosition = this._onDidChangeCursorPosition.event;\n        this._onDidChangeCursorSelection = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeCursorSelection = this._onDidChangeCursorSelection.event;\n        this._onDidAttemptReadOnlyEdit = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidAttemptReadOnlyEdit = this._onDidAttemptReadOnlyEdit.event;\n        this._onDidLayoutChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidLayoutChange = this._onDidLayoutChange.event;\n        this._editorTextFocus = this._register(new BooleanEventEmitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidFocusEditorText = this._editorTextFocus.onDidChangeToTrue;\n        this.onDidBlurEditorText = this._editorTextFocus.onDidChangeToFalse;\n        this._editorWidgetFocus = this._register(new BooleanEventEmitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidFocusEditorWidget = this._editorWidgetFocus.onDidChangeToTrue;\n        this.onDidBlurEditorWidget = this._editorWidgetFocus.onDidChangeToFalse;\n        this._onWillType = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onWillType = this._onWillType.event;\n        this._onDidType = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidType = this._onDidType.event;\n        this._onDidCompositionStart = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidCompositionStart = this._onDidCompositionStart.event;\n        this._onDidCompositionEnd = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidCompositionEnd = this._onDidCompositionEnd.event;\n        this._onDidPaste = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidPaste = this._onDidPaste.event;\n        this._onMouseUp = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseUp = this._onMouseUp.event;\n        this._onMouseDown = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDown = this._onMouseDown.event;\n        this._onMouseDrag = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDrag = this._onMouseDrag.event;\n        this._onMouseDrop = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDrop = this._onMouseDrop.event;\n        this._onMouseDropCanceled = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDropCanceled = this._onMouseDropCanceled.event;\n        this._onDropIntoEditor = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDropIntoEditor = this._onDropIntoEditor.event;\n        this._onContextMenu = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onContextMenu = this._onContextMenu.event;\n        this._onMouseMove = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseMove = this._onMouseMove.event;\n        this._onMouseLeave = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseLeave = this._onMouseLeave.event;\n        this._onMouseWheel = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseWheel = this._onMouseWheel.event;\n        this._onKeyUp = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onKeyUp = this._onKeyUp.event;\n        this._onKeyDown = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onKeyDown = this._onKeyDown.event;\n        this._onDidContentSizeChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidContentSizeChange = this._onDidContentSizeChange.event;\n        this._onDidScrollChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidScrollChange = this._onDidScrollChange.event;\n        this._onDidChangeViewZones = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeViewZones = this._onDidChangeViewZones.event;\n        this._onDidChangeHiddenAreas = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeHiddenAreas = this._onDidChangeHiddenAreas.event;\n        this._actions = new Map();\n        this._bannerDomNode = null;\n        this._dropIntoEditorDecorations = this.createDecorationsCollection();\n        codeEditorService.willCreateCodeEditor();\n        const options = Object.assign({}, _options);\n        this._domElement = domElement;\n        this._overflowWidgetsDomNode = options.overflowWidgetsDomNode;\n        delete options.overflowWidgetsDomNode;\n        this._id = (++EDITOR_ID);\n        this._decorationTypeKeysToIds = {};\n        this._decorationTypeSubtypes = {};\n        this._telemetryData = codeEditorWidgetOptions.telemetryData;\n        this._configuration = this._register(this._createConfiguration(codeEditorWidgetOptions.isSimpleWidget || false, options, accessibilityService));\n        this._register(this._configuration.onDidChange((e) => {\n            this._onDidChangeConfiguration.fire(e);\n            const options = this._configuration.options;\n            if (e.hasChanged(143 /* EditorOption.layoutInfo */)) {\n                const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n                this._onDidLayoutChange.fire(layoutInfo);\n            }\n        }));\n        this._contextKeyService = this._register(contextKeyService.createScoped(this._domElement));\n        this._notificationService = notificationService;\n        this._codeEditorService = codeEditorService;\n        this._commandService = commandService;\n        this._themeService = themeService;\n        this._register(new EditorContextKeysManager(this, this._contextKeyService));\n        this._register(new EditorModeContext(this, this._contextKeyService, languageFeaturesService));\n        this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._modelData = null;\n        this._focusTracker = new CodeEditorWidgetFocusTracker(domElement);\n        this._register(this._focusTracker.onChange(() => {\n            this._editorWidgetFocus.setValue(this._focusTracker.hasFocus());\n        }));\n        this._contentWidgets = {};\n        this._overlayWidgets = {};\n        this._glyphMarginWidgets = {};\n        let contributions;\n        if (Array.isArray(codeEditorWidgetOptions.contributions)) {\n            contributions = codeEditorWidgetOptions.contributions;\n        }\n        else {\n            contributions = EditorExtensionsRegistry.getEditorContributions();\n        }\n        this._contributions.initialize(this, contributions, this._instantiationService);\n        for (const action of EditorExtensionsRegistry.getEditorActions()) {\n            if (this._actions.has(action.id)) {\n                onUnexpectedError(new Error(`Cannot have two actions with the same id ${action.id}`));\n                continue;\n            }\n            const internalAction = new InternalEditorAction(action.id, action.label, action.alias, (_a = action.precondition) !== null && _a !== void 0 ? _a : undefined, () => {\n                return this._instantiationService.invokeFunction((accessor) => {\n                    return Promise.resolve(action.runEditorCommand(accessor, this, null));\n                });\n            }, this._contextKeyService);\n            this._actions.set(internalAction.id, internalAction);\n        }\n        const isDropIntoEnabled = () => {\n            return !this._configuration.options.get(90 /* EditorOption.readOnly */)\n                && this._configuration.options.get(36 /* EditorOption.dropIntoEditor */).enabled;\n        };\n        this._register(new dom.DragAndDropObserver(this._domElement, {\n            onDragEnter: () => undefined,\n            onDragOver: e => {\n                if (!isDropIntoEnabled()) {\n                    return;\n                }\n                const target = this.getTargetAtClientPoint(e.clientX, e.clientY);\n                if (target === null || target === void 0 ? void 0 : target.position) {\n                    this.showDropIndicatorAt(target.position);\n                }\n            },\n            onDrop: (e) => __awaiter(this, void 0, void 0, function* () {\n                if (!isDropIntoEnabled()) {\n                    return;\n                }\n                this.removeDropIndicator();\n                if (!e.dataTransfer) {\n                    return;\n                }\n                const target = this.getTargetAtClientPoint(e.clientX, e.clientY);\n                if (target === null || target === void 0 ? void 0 : target.position) {\n                    this._onDropIntoEditor.fire({ position: target.position, event: e });\n                }\n            }),\n            onDragLeave: () => {\n                this.removeDropIndicator();\n            },\n            onDragEnd: () => {\n                this.removeDropIndicator();\n            },\n        }));\n        this._codeEditorService.addCodeEditor(this);\n    }\n    writeScreenReaderContent(reason) {\n        var _a;\n        (_a = this._modelData) === null || _a === void 0 ? void 0 : _a.view.writeScreenReaderContent(reason);\n    }\n    _createConfiguration(isSimpleWidget, options, accessibilityService) {\n        return new EditorConfiguration(isSimpleWidget, options, this._domElement, accessibilityService);\n    }\n    getId() {\n        return this.getEditorType() + ':' + this._id;\n    }\n    getEditorType() {\n        return editorCommon.EditorType.ICodeEditor;\n    }\n    dispose() {\n        this._codeEditorService.removeCodeEditor(this);\n        this._focusTracker.dispose();\n        this._actions.clear();\n        this._contentWidgets = {};\n        this._overlayWidgets = {};\n        this._removeDecorationTypes();\n        this._postDetachModelCleanup(this._detachModel());\n        this._onDidDispose.fire();\n        super.dispose();\n    }\n    invokeWithinContext(fn) {\n        return this._instantiationService.invokeFunction(fn);\n    }\n    updateOptions(newOptions) {\n        this._configuration.updateOptions(newOptions || {});\n    }\n    getOptions() {\n        return this._configuration.options;\n    }\n    getOption(id) {\n        return this._configuration.options.get(id);\n    }\n    getRawOptions() {\n        return this._configuration.getRawOptions();\n    }\n    getOverflowWidgetsDomNode() {\n        return this._overflowWidgetsDomNode;\n    }\n    getConfiguredWordAtPosition(position) {\n        if (!this._modelData) {\n            return null;\n        }\n        return WordOperations.getWordAtPosition(this._modelData.model, this._configuration.options.get(129 /* EditorOption.wordSeparators */), position);\n    }\n    getValue(options = null) {\n        if (!this._modelData) {\n            return '';\n        }\n        const preserveBOM = (options && options.preserveBOM) ? true : false;\n        let eolPreference = 0 /* EndOfLinePreference.TextDefined */;\n        if (options && options.lineEnding && options.lineEnding === '\\n') {\n            eolPreference = 1 /* EndOfLinePreference.LF */;\n        }\n        else if (options && options.lineEnding && options.lineEnding === '\\r\\n') {\n            eolPreference = 2 /* EndOfLinePreference.CRLF */;\n        }\n        return this._modelData.model.getValue(eolPreference, preserveBOM);\n    }\n    setValue(newValue) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.model.setValue(newValue);\n    }\n    getModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model;\n    }\n    setModel(_model = null) {\n        const model = _model;\n        if (this._modelData === null && model === null) {\n            // Current model is the new model\n            return;\n        }\n        if (this._modelData && this._modelData.model === model) {\n            // Current model is the new model\n            return;\n        }\n        const hasTextFocus = this.hasTextFocus();\n        const detachedModel = this._detachModel();\n        this._attachModel(model);\n        if (hasTextFocus && this.hasModel()) {\n            this.focus();\n        }\n        const e = {\n            oldModelUrl: detachedModel ? detachedModel.uri : null,\n            newModelUrl: model ? model.uri : null\n        };\n        this._removeDecorationTypes();\n        this._onDidChangeModel.fire(e);\n        this._postDetachModelCleanup(detachedModel);\n        this._contributions.onAfterModelAttached();\n    }\n    _removeDecorationTypes() {\n        this._decorationTypeKeysToIds = {};\n        if (this._decorationTypeSubtypes) {\n            for (const decorationType in this._decorationTypeSubtypes) {\n                const subTypes = this._decorationTypeSubtypes[decorationType];\n                for (const subType in subTypes) {\n                    this._removeDecorationType(decorationType + '-' + subType);\n                }\n            }\n            this._decorationTypeSubtypes = {};\n        }\n    }\n    getVisibleRanges() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.getVisibleRanges();\n    }\n    getVisibleRangesPlusViewportAboveBelow() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow();\n    }\n    getWhitespaces() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.viewLayout.getWhitespaces();\n    }\n    static _getVerticalOffsetAfterPosition(modelData, modelLineNumber, modelColumn, includeViewZones) {\n        const modelPosition = modelData.model.validatePosition({\n            lineNumber: modelLineNumber,\n            column: modelColumn\n        });\n        const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n        return modelData.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(viewPosition.lineNumber, includeViewZones);\n    }\n    getTopForLineNumber(lineNumber, includeViewZones = false) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget_1._getVerticalOffsetForPosition(this._modelData, lineNumber, 1, includeViewZones);\n    }\n    getTopForPosition(lineNumber, column) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget_1._getVerticalOffsetForPosition(this._modelData, lineNumber, column, false);\n    }\n    static _getVerticalOffsetForPosition(modelData, modelLineNumber, modelColumn, includeViewZones = false) {\n        const modelPosition = modelData.model.validatePosition({\n            lineNumber: modelLineNumber,\n            column: modelColumn\n        });\n        const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n        return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber, includeViewZones);\n    }\n    getBottomForLineNumber(lineNumber, includeViewZones = false) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget_1._getVerticalOffsetAfterPosition(this._modelData, lineNumber, 1, includeViewZones);\n    }\n    setHiddenAreas(ranges, source) {\n        var _a;\n        (_a = this._modelData) === null || _a === void 0 ? void 0 : _a.viewModel.setHiddenAreas(ranges.map(r => Range.lift(r)), source);\n    }\n    getVisibleColumnFromPosition(rawPosition) {\n        if (!this._modelData) {\n            return rawPosition.column;\n        }\n        const position = this._modelData.model.validatePosition(rawPosition);\n        const tabSize = this._modelData.model.getOptions().tabSize;\n        return CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber), position.column, tabSize) + 1;\n    }\n    getPosition() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getPosition();\n    }\n    setPosition(position, source = 'api') {\n        if (!this._modelData) {\n            return;\n        }\n        if (!Position.isIPosition(position)) {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.setSelections(source, [{\n                selectionStartLineNumber: position.lineNumber,\n                selectionStartColumn: position.column,\n                positionLineNumber: position.lineNumber,\n                positionColumn: position.column\n            }]);\n    }\n    _sendRevealRange(modelRange, verticalType, revealHorizontal, scrollType) {\n        if (!this._modelData) {\n            return;\n        }\n        if (!Range.isIRange(modelRange)) {\n            throw new Error('Invalid arguments');\n        }\n        const validatedModelRange = this._modelData.model.validateRange(modelRange);\n        const viewRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);\n        this._modelData.viewModel.revealRange('api', revealHorizontal, viewRange, verticalType, scrollType);\n    }\n    revealLine(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 0 /* VerticalRevealType.Simple */, scrollType);\n    }\n    revealLineInCenter(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 1 /* VerticalRevealType.Center */, scrollType);\n    }\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 2 /* VerticalRevealType.CenterIfOutsideViewport */, scrollType);\n    }\n    revealLineNearTop(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 5 /* VerticalRevealType.NearTop */, scrollType);\n    }\n    _revealLine(lineNumber, revealType, scrollType) {\n        if (typeof lineNumber !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(lineNumber, 1, lineNumber, 1), revealType, false, scrollType);\n    }\n    revealPosition(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 0 /* VerticalRevealType.Simple */, true, scrollType);\n    }\n    revealPositionInCenter(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 1 /* VerticalRevealType.Center */, true, scrollType);\n    }\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 2 /* VerticalRevealType.CenterIfOutsideViewport */, true, scrollType);\n    }\n    revealPositionNearTop(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 5 /* VerticalRevealType.NearTop */, true, scrollType);\n    }\n    _revealPosition(position, verticalType, revealHorizontal, scrollType) {\n        if (!Position.isIPosition(position)) {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(position.lineNumber, position.column, position.lineNumber, position.column), verticalType, revealHorizontal, scrollType);\n    }\n    getSelection() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getSelection();\n    }\n    getSelections() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getSelections();\n    }\n    setSelection(something, source = 'api') {\n        const isSelection = Selection.isISelection(something);\n        const isRange = Range.isIRange(something);\n        if (!isSelection && !isRange) {\n            throw new Error('Invalid arguments');\n        }\n        if (isSelection) {\n            this._setSelectionImpl(something, source);\n        }\n        else if (isRange) {\n            // act as if it was an IRange\n            const selection = {\n                selectionStartLineNumber: something.startLineNumber,\n                selectionStartColumn: something.startColumn,\n                positionLineNumber: something.endLineNumber,\n                positionColumn: something.endColumn\n            };\n            this._setSelectionImpl(selection, source);\n        }\n    }\n    _setSelectionImpl(sel, source) {\n        if (!this._modelData) {\n            return;\n        }\n        const selection = new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\n        this._modelData.viewModel.setSelections(source, [selection]);\n    }\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 0 /* VerticalRevealType.Simple */, scrollType);\n    }\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 1 /* VerticalRevealType.Center */, scrollType);\n    }\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 2 /* VerticalRevealType.CenterIfOutsideViewport */, scrollType);\n    }\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 5 /* VerticalRevealType.NearTop */, scrollType);\n    }\n    _revealLines(startLineNumber, endLineNumber, verticalType, scrollType) {\n        if (typeof startLineNumber !== 'number' || typeof endLineNumber !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(startLineNumber, 1, endLineNumber, 1), verticalType, false, scrollType);\n    }\n    revealRange(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\n        this._revealRange(range, revealVerticalInCenter ? 1 /* VerticalRevealType.Center */ : 0 /* VerticalRevealType.Simple */, revealHorizontal, scrollType);\n    }\n    revealRangeInCenter(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 1 /* VerticalRevealType.Center */, true, scrollType);\n    }\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 2 /* VerticalRevealType.CenterIfOutsideViewport */, true, scrollType);\n    }\n    revealRangeNearTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 5 /* VerticalRevealType.NearTop */, true, scrollType);\n    }\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 6 /* VerticalRevealType.NearTopIfOutsideViewport */, true, scrollType);\n    }\n    revealRangeAtTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 3 /* VerticalRevealType.Top */, true, scrollType);\n    }\n    _revealRange(range, verticalType, revealHorizontal, scrollType) {\n        if (!Range.isIRange(range)) {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(Range.lift(range), verticalType, revealHorizontal, scrollType);\n    }\n    setSelections(ranges, source = 'api', reason = 0 /* CursorChangeReason.NotSet */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (!ranges || ranges.length === 0) {\n            throw new Error('Invalid arguments');\n        }\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            if (!Selection.isISelection(ranges[i])) {\n                throw new Error('Invalid arguments');\n            }\n        }\n        this._modelData.viewModel.setSelections(source, ranges, reason);\n    }\n    getContentWidth() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getContentWidth();\n    }\n    getScrollWidth() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getScrollWidth();\n    }\n    getScrollLeft() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getCurrentScrollLeft();\n    }\n    getContentHeight() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getContentHeight();\n    }\n    getScrollHeight() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getScrollHeight();\n    }\n    getScrollTop() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getCurrentScrollTop();\n    }\n    setScrollLeft(newScrollLeft, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (typeof newScrollLeft !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition({\n            scrollLeft: newScrollLeft\n        }, scrollType);\n    }\n    setScrollTop(newScrollTop, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (typeof newScrollTop !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition({\n            scrollTop: newScrollTop\n        }, scrollType);\n    }\n    setScrollPosition(position, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition(position, scrollType);\n    }\n    hasPendingScrollAnimation() {\n        if (!this._modelData) {\n            return false;\n        }\n        return this._modelData.viewModel.viewLayout.hasPendingScrollAnimation();\n    }\n    saveViewState() {\n        if (!this._modelData) {\n            return null;\n        }\n        const contributionsState = this._contributions.saveViewState();\n        const cursorState = this._modelData.viewModel.saveCursorState();\n        const viewState = this._modelData.viewModel.saveState();\n        return {\n            cursorState: cursorState,\n            viewState: viewState,\n            contributionsState: contributionsState\n        };\n    }\n    restoreViewState(s) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        const codeEditorState = s;\n        if (codeEditorState && codeEditorState.cursorState && codeEditorState.viewState) {\n            const cursorState = codeEditorState.cursorState;\n            if (Array.isArray(cursorState)) {\n                if (cursorState.length > 0) {\n                    this._modelData.viewModel.restoreCursorState(cursorState);\n                }\n            }\n            else {\n                // Backwards compatibility\n                this._modelData.viewModel.restoreCursorState([cursorState]);\n            }\n            this._contributions.restoreViewState(codeEditorState.contributionsState || {});\n            const reducedState = this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);\n            this._modelData.view.restoreState(reducedState);\n        }\n    }\n    handleInitialized() {\n        var _a;\n        (_a = this._getViewModel()) === null || _a === void 0 ? void 0 : _a.visibleLinesStabilized();\n    }\n    getContribution(id) {\n        return this._contributions.get(id);\n    }\n    getActions() {\n        return Array.from(this._actions.values());\n    }\n    getSupportedActions() {\n        let result = this.getActions();\n        result = result.filter(action => action.isSupported());\n        return result;\n    }\n    getAction(id) {\n        return this._actions.get(id) || null;\n    }\n    trigger(source, handlerId, payload) {\n        payload = payload || {};\n        switch (handlerId) {\n            case \"compositionStart\" /* editorCommon.Handler.CompositionStart */:\n                this._startComposition();\n                return;\n            case \"compositionEnd\" /* editorCommon.Handler.CompositionEnd */:\n                this._endComposition(source);\n                return;\n            case \"type\" /* editorCommon.Handler.Type */: {\n                const args = payload;\n                this._type(source, args.text || '');\n                return;\n            }\n            case \"replacePreviousChar\" /* editorCommon.Handler.ReplacePreviousChar */: {\n                const args = payload;\n                this._compositionType(source, args.text || '', args.replaceCharCnt || 0, 0, 0);\n                return;\n            }\n            case \"compositionType\" /* editorCommon.Handler.CompositionType */: {\n                const args = payload;\n                this._compositionType(source, args.text || '', args.replacePrevCharCnt || 0, args.replaceNextCharCnt || 0, args.positionDelta || 0);\n                return;\n            }\n            case \"paste\" /* editorCommon.Handler.Paste */: {\n                const args = payload;\n                this._paste(source, args.text || '', args.pasteOnNewLine || false, args.multicursorText || null, args.mode || null);\n                return;\n            }\n            case \"cut\" /* editorCommon.Handler.Cut */:\n                this._cut(source);\n                return;\n        }\n        const action = this.getAction(handlerId);\n        if (action) {\n            Promise.resolve(action.run(payload)).then(undefined, onUnexpectedError);\n            return;\n        }\n        if (!this._modelData) {\n            return;\n        }\n        if (this._triggerEditorCommand(source, handlerId, payload)) {\n            return;\n        }\n        this._triggerCommand(handlerId, payload);\n    }\n    _triggerCommand(handlerId, payload) {\n        this._commandService.executeCommand(handlerId, payload);\n    }\n    _startComposition() {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.startComposition();\n        this._onDidCompositionStart.fire();\n    }\n    _endComposition(source) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.endComposition(source);\n        this._onDidCompositionEnd.fire();\n    }\n    _type(source, text) {\n        if (!this._modelData || text.length === 0) {\n            return;\n        }\n        if (source === 'keyboard') {\n            this._onWillType.fire(text);\n        }\n        this._modelData.viewModel.type(text, source);\n        if (source === 'keyboard') {\n            this._onDidType.fire(text);\n        }\n    }\n    _compositionType(source, text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta, source);\n    }\n    _paste(source, text, pasteOnNewLine, multicursorText, mode) {\n        if (!this._modelData || text.length === 0) {\n            return;\n        }\n        const viewModel = this._modelData.viewModel;\n        const startPosition = viewModel.getSelection().getStartPosition();\n        viewModel.paste(text, pasteOnNewLine, multicursorText, source);\n        const endPosition = viewModel.getSelection().getStartPosition();\n        if (source === 'keyboard') {\n            this._onDidPaste.fire({\n                range: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n                languageId: mode\n            });\n        }\n    }\n    _cut(source) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.cut(source);\n    }\n    _triggerEditorCommand(source, handlerId, payload) {\n        const command = EditorExtensionsRegistry.getEditorCommand(handlerId);\n        if (command) {\n            payload = payload || {};\n            payload.source = source;\n            this._instantiationService.invokeFunction((accessor) => {\n                Promise.resolve(command.runEditorCommand(accessor, this, payload)).then(undefined, onUnexpectedError);\n            });\n            return true;\n        }\n        return false;\n    }\n    _getViewModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel;\n    }\n    pushUndoStop() {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(90 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        this._modelData.model.pushStackElement();\n        return true;\n    }\n    popUndoStop() {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(90 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        this._modelData.model.popStackElement();\n        return true;\n    }\n    executeEdits(source, edits, endCursorState) {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(90 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        let cursorStateComputer;\n        if (!endCursorState) {\n            cursorStateComputer = () => null;\n        }\n        else if (Array.isArray(endCursorState)) {\n            cursorStateComputer = () => endCursorState;\n        }\n        else {\n            cursorStateComputer = endCursorState;\n        }\n        this._modelData.viewModel.executeEdits(source, edits, cursorStateComputer);\n        return true;\n    }\n    executeCommand(source, command) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.executeCommand(command, source);\n    }\n    executeCommands(source, commands) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.executeCommands(commands, source);\n    }\n    createDecorationsCollection(decorations) {\n        return new EditorDecorationsCollection(this, decorations);\n    }\n    changeDecorations(callback) {\n        if (!this._modelData) {\n            // callback will not be called\n            return null;\n        }\n        return this._modelData.model.changeDecorations(callback, this._id);\n    }\n    getLineDecorations(lineNumber) {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model.getLineDecorations(lineNumber, this._id, filterValidationDecorations(this._configuration.options));\n    }\n    getDecorationsInRange(range) {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model.getDecorationsInRange(range, this._id, filterValidationDecorations(this._configuration.options));\n    }\n    /**\n     * @deprecated\n     */\n    deltaDecorations(oldDecorations, newDecorations) {\n        if (!this._modelData) {\n            return [];\n        }\n        if (oldDecorations.length === 0 && newDecorations.length === 0) {\n            return oldDecorations;\n        }\n        return this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id);\n    }\n    removeDecorations(decorationIds) {\n        if (!this._modelData || decorationIds.length === 0) {\n            return;\n        }\n        this._modelData.model.changeDecorations((changeAccessor) => {\n            changeAccessor.deltaDecorations(decorationIds, []);\n        });\n    }\n    removeDecorationsByType(decorationTypeKey) {\n        // remove decorations for type and sub type\n        const oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];\n        if (oldDecorationsIds) {\n            this.deltaDecorations(oldDecorationsIds, []);\n        }\n        if (this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)) {\n            delete this._decorationTypeKeysToIds[decorationTypeKey];\n        }\n        if (this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)) {\n            delete this._decorationTypeSubtypes[decorationTypeKey];\n        }\n    }\n    getLayoutInfo() {\n        const options = this._configuration.options;\n        const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n        return layoutInfo;\n    }\n    createOverviewRuler(cssClassName) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.createOverviewRuler(cssClassName);\n    }\n    getContainerDomNode() {\n        return this._domElement;\n    }\n    getDomNode() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.domNode.domNode;\n    }\n    delegateVerticalScrollbarPointerDown(browserEvent) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.delegateVerticalScrollbarPointerDown(browserEvent);\n    }\n    delegateScrollFromMouseWheelEvent(browserEvent) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.delegateScrollFromMouseWheelEvent(browserEvent);\n    }\n    layout(dimension) {\n        this._configuration.observeContainer(dimension);\n        this.render();\n    }\n    focus() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.focus();\n    }\n    hasTextFocus() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return false;\n        }\n        return this._modelData.view.isFocused();\n    }\n    hasWidgetFocus() {\n        return this._focusTracker && this._focusTracker.hasFocus();\n    }\n    addContentWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._contentWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting a content widget with the same id.');\n        }\n        this._contentWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addContentWidget(widgetData);\n        }\n    }\n    layoutContentWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._contentWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutContentWidget(widgetData);\n            }\n        }\n    }\n    removeContentWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._contentWidgets[widgetId];\n            delete this._contentWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeContentWidget(widgetData);\n            }\n        }\n    }\n    addOverlayWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._overlayWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting an overlay widget with the same id.');\n        }\n        this._overlayWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addOverlayWidget(widgetData);\n        }\n    }\n    layoutOverlayWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._overlayWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutOverlayWidget(widgetData);\n            }\n        }\n    }\n    removeOverlayWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._overlayWidgets[widgetId];\n            delete this._overlayWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeOverlayWidget(widgetData);\n            }\n        }\n    }\n    addGlyphMarginWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._glyphMarginWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting a glyph margin widget with the same id.');\n        }\n        this._glyphMarginWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addGlyphMarginWidget(widgetData);\n        }\n    }\n    layoutGlyphMarginWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._glyphMarginWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._glyphMarginWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutGlyphMarginWidget(widgetData);\n            }\n        }\n    }\n    removeGlyphMarginWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._glyphMarginWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._glyphMarginWidgets[widgetId];\n            delete this._glyphMarginWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeGlyphMarginWidget(widgetData);\n            }\n        }\n    }\n    changeViewZones(callback) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.change(callback);\n    }\n    getTargetAtClientPoint(clientX, clientY) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.getTargetAtClientPoint(clientX, clientY);\n    }\n    getScrolledVisiblePosition(rawPosition) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        const position = this._modelData.model.validatePosition(rawPosition);\n        const options = this._configuration.options;\n        const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n        const top = CodeEditorWidget_1._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();\n        const left = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();\n        return {\n            top: top,\n            left: left,\n            height: options.get(66 /* EditorOption.lineHeight */)\n        };\n    }\n    getOffsetForColumn(lineNumber, column) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return -1;\n        }\n        return this._modelData.view.getOffsetForColumn(lineNumber, column);\n    }\n    render(forceRedraw = false) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.render(true, forceRedraw);\n    }\n    setAriaOptions(options) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.setAriaOptions(options);\n    }\n    applyFontInfo(target) {\n        applyFontInfo(target, this._configuration.options.get(50 /* EditorOption.fontInfo */));\n    }\n    setBanner(domNode, domNodeHeight) {\n        if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n            this._domElement.removeChild(this._bannerDomNode);\n        }\n        this._bannerDomNode = domNode;\n        this._configuration.setReservedHeight(domNode ? domNodeHeight : 0);\n        if (this._bannerDomNode) {\n            this._domElement.prepend(this._bannerDomNode);\n        }\n    }\n    _attachModel(model) {\n        if (!model) {\n            this._modelData = null;\n            return;\n        }\n        const listenersToRemove = [];\n        this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n        this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());\n        this._configuration.setModelLineCount(model.getLineCount());\n        const attachedView = model.onBeforeAttached();\n        const viewModel = new ViewModel(this._id, this._configuration, model, DOMLineBreaksComputerFactory.create(), MonospaceLineBreaksComputerFactory.create(this._configuration.options), (callback) => dom.scheduleAtNextAnimationFrame(callback), this.languageConfigurationService, this._themeService, attachedView);\n        // Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model\n        listenersToRemove.push(model.onWillDispose(() => this.setModel(null)));\n        listenersToRemove.push(viewModel.onEvent((e) => {\n            switch (e.kind) {\n                case 0 /* OutgoingViewModelEventKind.ContentSizeChanged */:\n                    this._onDidContentSizeChange.fire(e);\n                    break;\n                case 1 /* OutgoingViewModelEventKind.FocusChanged */:\n                    this._editorTextFocus.setValue(e.hasFocus);\n                    break;\n                case 2 /* OutgoingViewModelEventKind.ScrollChanged */:\n                    this._onDidScrollChange.fire(e);\n                    break;\n                case 3 /* OutgoingViewModelEventKind.ViewZonesChanged */:\n                    this._onDidChangeViewZones.fire();\n                    break;\n                case 4 /* OutgoingViewModelEventKind.HiddenAreasChanged */:\n                    this._onDidChangeHiddenAreas.fire();\n                    break;\n                case 5 /* OutgoingViewModelEventKind.ReadOnlyEditAttempt */:\n                    this._onDidAttemptReadOnlyEdit.fire();\n                    break;\n                case 6 /* OutgoingViewModelEventKind.CursorStateChanged */: {\n                    if (e.reachedMaxCursorCount) {\n                        const multiCursorLimit = this.getOption(79 /* EditorOption.multiCursorLimit */);\n                        const message = nls.localize('cursors.maximum', \"The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.\", multiCursorLimit);\n                        this._notificationService.prompt(Severity.Warning, message, [\n                            {\n                                label: 'Find and Replace',\n                                run: () => {\n                                    this._commandService.executeCommand('editor.action.startFindReplaceAction');\n                                }\n                            },\n                            {\n                                label: nls.localize('goToSetting', 'Increase Multi Cursor Limit'),\n                                run: () => {\n                                    this._commandService.executeCommand('workbench.action.openSettings2', {\n                                        query: 'editor.multiCursorLimit'\n                                    });\n                                }\n                            }\n                        ]);\n                    }\n                    const positions = [];\n                    for (let i = 0, len = e.selections.length; i < len; i++) {\n                        positions[i] = e.selections[i].getPosition();\n                    }\n                    const e1 = {\n                        position: positions[0],\n                        secondaryPositions: positions.slice(1),\n                        reason: e.reason,\n                        source: e.source\n                    };\n                    this._onDidChangeCursorPosition.fire(e1);\n                    const e2 = {\n                        selection: e.selections[0],\n                        secondarySelections: e.selections.slice(1),\n                        modelVersionId: e.modelVersionId,\n                        oldSelections: e.oldSelections,\n                        oldModelVersionId: e.oldModelVersionId,\n                        source: e.source,\n                        reason: e.reason\n                    };\n                    this._onDidChangeCursorSelection.fire(e2);\n                    break;\n                }\n                case 7 /* OutgoingViewModelEventKind.ModelDecorationsChanged */:\n                    this._onDidChangeModelDecorations.fire(e.event);\n                    break;\n                case 8 /* OutgoingViewModelEventKind.ModelLanguageChanged */:\n                    this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n                    this._onDidChangeModelLanguage.fire(e.event);\n                    break;\n                case 9 /* OutgoingViewModelEventKind.ModelLanguageConfigurationChanged */:\n                    this._onDidChangeModelLanguageConfiguration.fire(e.event);\n                    break;\n                case 10 /* OutgoingViewModelEventKind.ModelContentChanged */:\n                    this._onDidChangeModelContent.fire(e.event);\n                    break;\n                case 11 /* OutgoingViewModelEventKind.ModelOptionsChanged */:\n                    this._onDidChangeModelOptions.fire(e.event);\n                    break;\n                case 12 /* OutgoingViewModelEventKind.ModelTokensChanged */:\n                    this._onDidChangeModelTokens.fire(e.event);\n                    break;\n            }\n        }));\n        const [view, hasRealView] = this._createView(viewModel);\n        if (hasRealView) {\n            this._domElement.appendChild(view.domNode.domNode);\n            let keys = Object.keys(this._contentWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addContentWidget(this._contentWidgets[widgetId]);\n            }\n            keys = Object.keys(this._overlayWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addOverlayWidget(this._overlayWidgets[widgetId]);\n            }\n            keys = Object.keys(this._glyphMarginWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addGlyphMarginWidget(this._glyphMarginWidgets[widgetId]);\n            }\n            view.render(false, true);\n            view.domNode.domNode.setAttribute('data-uri', model.uri.toString());\n        }\n        this._modelData = new ModelData(model, viewModel, view, hasRealView, listenersToRemove, attachedView);\n    }\n    _createView(viewModel) {\n        let commandDelegate;\n        if (this.isSimpleWidget) {\n            commandDelegate = {\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\n                    this._paste('keyboard', text, pasteOnNewLine, multicursorText, mode);\n                },\n                type: (text) => {\n                    this._type('keyboard', text);\n                },\n                compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n                    this._compositionType('keyboard', text, replacePrevCharCnt, replaceNextCharCnt, positionDelta);\n                },\n                startComposition: () => {\n                    this._startComposition();\n                },\n                endComposition: () => {\n                    this._endComposition('keyboard');\n                },\n                cut: () => {\n                    this._cut('keyboard');\n                }\n            };\n        }\n        else {\n            commandDelegate = {\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\n                    const payload = { text, pasteOnNewLine, multicursorText, mode };\n                    this._commandService.executeCommand(\"paste\" /* editorCommon.Handler.Paste */, payload);\n                },\n                type: (text) => {\n                    const payload = { text };\n                    this._commandService.executeCommand(\"type\" /* editorCommon.Handler.Type */, payload);\n                },\n                compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n                    // Try if possible to go through the existing `replacePreviousChar` command\n                    if (replaceNextCharCnt || positionDelta) {\n                        // must be handled through the new command\n                        const payload = { text, replacePrevCharCnt, replaceNextCharCnt, positionDelta };\n                        this._commandService.executeCommand(\"compositionType\" /* editorCommon.Handler.CompositionType */, payload);\n                    }\n                    else {\n                        const payload = { text, replaceCharCnt: replacePrevCharCnt };\n                        this._commandService.executeCommand(\"replacePreviousChar\" /* editorCommon.Handler.ReplacePreviousChar */, payload);\n                    }\n                },\n                startComposition: () => {\n                    this._commandService.executeCommand(\"compositionStart\" /* editorCommon.Handler.CompositionStart */, {});\n                },\n                endComposition: () => {\n                    this._commandService.executeCommand(\"compositionEnd\" /* editorCommon.Handler.CompositionEnd */, {});\n                },\n                cut: () => {\n                    this._commandService.executeCommand(\"cut\" /* editorCommon.Handler.Cut */, {});\n                }\n            };\n        }\n        const viewUserInputEvents = new ViewUserInputEvents(viewModel.coordinatesConverter);\n        viewUserInputEvents.onKeyDown = (e) => this._onKeyDown.fire(e);\n        viewUserInputEvents.onKeyUp = (e) => this._onKeyUp.fire(e);\n        viewUserInputEvents.onContextMenu = (e) => this._onContextMenu.fire(e);\n        viewUserInputEvents.onMouseMove = (e) => this._onMouseMove.fire(e);\n        viewUserInputEvents.onMouseLeave = (e) => this._onMouseLeave.fire(e);\n        viewUserInputEvents.onMouseDown = (e) => this._onMouseDown.fire(e);\n        viewUserInputEvents.onMouseUp = (e) => this._onMouseUp.fire(e);\n        viewUserInputEvents.onMouseDrag = (e) => this._onMouseDrag.fire(e);\n        viewUserInputEvents.onMouseDrop = (e) => this._onMouseDrop.fire(e);\n        viewUserInputEvents.onMouseDropCanceled = (e) => this._onMouseDropCanceled.fire(e);\n        viewUserInputEvents.onMouseWheel = (e) => this._onMouseWheel.fire(e);\n        const view = new View(commandDelegate, this._configuration, this._themeService.getColorTheme(), viewModel, viewUserInputEvents, this._overflowWidgetsDomNode, this._instantiationService);\n        return [view, true];\n    }\n    _postDetachModelCleanup(detachedModel) {\n        detachedModel === null || detachedModel === void 0 ? void 0 : detachedModel.removeAllDecorationsWithOwnerId(this._id);\n    }\n    _detachModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        const model = this._modelData.model;\n        const removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;\n        this._modelData.dispose();\n        this._modelData = null;\n        this._domElement.removeAttribute('data-mode-id');\n        if (removeDomNode && this._domElement.contains(removeDomNode)) {\n            this._domElement.removeChild(removeDomNode);\n        }\n        if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n            this._domElement.removeChild(this._bannerDomNode);\n        }\n        return model;\n    }\n    _removeDecorationType(key) {\n        this._codeEditorService.removeDecorationType(key);\n    }\n    hasModel() {\n        return (this._modelData !== null);\n    }\n    showDropIndicatorAt(position) {\n        const newDecorations = [{\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n                options: CodeEditorWidget_1.dropIntoEditorDecorationOptions\n            }];\n        this._dropIntoEditorDecorations.set(newDecorations);\n        this.revealPosition(position, 1 /* editorCommon.ScrollType.Immediate */);\n    }\n    removeDropIndicator() {\n        this._dropIntoEditorDecorations.clear();\n    }\n    setContextValue(key, value) {\n        this._contextKeyService.createKey(key, value);\n    }\n};\nCodeEditorWidget.dropIntoEditorDecorationOptions = ModelDecorationOptions.register({\n    description: 'workbench-dnd-target',\n    className: 'dnd-target'\n});\nCodeEditorWidget = CodeEditorWidget_1 = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, ICodeEditorService),\n    __param(5, ICommandService),\n    __param(6, IContextKeyService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService),\n    __param(11, ILanguageFeaturesService)\n], CodeEditorWidget);\nexport { CodeEditorWidget };\nexport class BooleanEventEmitter extends Disposable {\n    constructor(_emitterOptions) {\n        super();\n        this._emitterOptions = _emitterOptions;\n        this._onDidChangeToTrue = this._register(new Emitter(this._emitterOptions));\n        this.onDidChangeToTrue = this._onDidChangeToTrue.event;\n        this._onDidChangeToFalse = this._register(new Emitter(this._emitterOptions));\n        this.onDidChangeToFalse = this._onDidChangeToFalse.event;\n        this._value = 0 /* BooleanEventValue.NotSet */;\n    }\n    setValue(_value) {\n        const value = (_value ? 2 /* BooleanEventValue.True */ : 1 /* BooleanEventValue.False */);\n        if (this._value === value) {\n            return;\n        }\n        this._value = value;\n        if (this._value === 2 /* BooleanEventValue.True */) {\n            this._onDidChangeToTrue.fire();\n        }\n        else if (this._value === 1 /* BooleanEventValue.False */) {\n            this._onDidChangeToFalse.fire();\n        }\n    }\n}\n/**\n * A regular event emitter that also makes sure contributions are instantiated if necessary\n */\nclass InteractionEmitter extends Emitter {\n    constructor(_contributions, deliveryQueue) {\n        super({ deliveryQueue });\n        this._contributions = _contributions;\n    }\n    fire(event) {\n        this._contributions.onBeforeInteractionEvent();\n        super.fire(event);\n    }\n}\nclass EditorContextKeysManager extends Disposable {\n    constructor(editor, contextKeyService) {\n        super();\n        this._editor = editor;\n        contextKeyService.createKey('editorId', editor.getId());\n        this._editorSimpleInput = EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);\n        this._editorFocus = EditorContextKeys.focus.bindTo(contextKeyService);\n        this._textInputFocus = EditorContextKeys.textInputFocus.bindTo(contextKeyService);\n        this._editorTextFocus = EditorContextKeys.editorTextFocus.bindTo(contextKeyService);\n        this._tabMovesFocus = EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);\n        this._editorReadonly = EditorContextKeys.readOnly.bindTo(contextKeyService);\n        this._inDiffEditor = EditorContextKeys.inDiffEditor.bindTo(contextKeyService);\n        this._editorColumnSelection = EditorContextKeys.columnSelection.bindTo(contextKeyService);\n        this._hasMultipleSelections = EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);\n        this._hasNonEmptySelection = EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);\n        this._canUndo = EditorContextKeys.canUndo.bindTo(contextKeyService);\n        this._canRedo = EditorContextKeys.canRedo.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromConfig()));\n        this._register(this._editor.onDidChangeCursorSelection(() => this._updateFromSelection()));\n        this._register(this._editor.onDidFocusEditorWidget(() => this._updateFromFocus()));\n        this._register(this._editor.onDidBlurEditorWidget(() => this._updateFromFocus()));\n        this._register(this._editor.onDidFocusEditorText(() => this._updateFromFocus()));\n        this._register(this._editor.onDidBlurEditorText(() => this._updateFromFocus()));\n        this._register(this._editor.onDidChangeModel(() => this._updateFromModel()));\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromModel()));\n        this._register(TabFocus.onDidChangeTabFocus((tabFocusMode) => this._tabMovesFocus.set(tabFocusMode)));\n        this._updateFromConfig();\n        this._updateFromSelection();\n        this._updateFromFocus();\n        this._updateFromModel();\n        this._editorSimpleInput.set(this._editor.isSimpleWidget);\n    }\n    _updateFromConfig() {\n        const options = this._editor.getOptions();\n        this._tabMovesFocus.set(TabFocus.getTabFocusMode());\n        this._editorReadonly.set(options.get(90 /* EditorOption.readOnly */));\n        this._inDiffEditor.set(options.get(61 /* EditorOption.inDiffEditor */));\n        this._editorColumnSelection.set(options.get(22 /* EditorOption.columnSelection */));\n    }\n    _updateFromSelection() {\n        const selections = this._editor.getSelections();\n        if (!selections) {\n            this._hasMultipleSelections.reset();\n            this._hasNonEmptySelection.reset();\n        }\n        else {\n            this._hasMultipleSelections.set(selections.length > 1);\n            this._hasNonEmptySelection.set(selections.some(s => !s.isEmpty()));\n        }\n    }\n    _updateFromFocus() {\n        this._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);\n        this._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);\n        this._textInputFocus.set(this._editor.hasTextFocus());\n    }\n    _updateFromModel() {\n        const model = this._editor.getModel();\n        this._canUndo.set(Boolean(model && model.canUndo()));\n        this._canRedo.set(Boolean(model && model.canRedo()));\n    }\n}\nexport class EditorModeContext extends Disposable {\n    constructor(_editor, _contextKeyService, _languageFeaturesService) {\n        super();\n        this._editor = _editor;\n        this._contextKeyService = _contextKeyService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._langId = EditorContextKeys.languageId.bindTo(_contextKeyService);\n        this._hasCompletionItemProvider = EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);\n        this._hasCodeActionsProvider = EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);\n        this._hasCodeLensProvider = EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);\n        this._hasDefinitionProvider = EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);\n        this._hasDeclarationProvider = EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);\n        this._hasImplementationProvider = EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);\n        this._hasTypeDefinitionProvider = EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);\n        this._hasHoverProvider = EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);\n        this._hasDocumentHighlightProvider = EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);\n        this._hasDocumentSymbolProvider = EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);\n        this._hasReferenceProvider = EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);\n        this._hasRenameProvider = EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);\n        this._hasSignatureHelpProvider = EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);\n        this._hasInlayHintsProvider = EditorContextKeys.hasInlayHintsProvider.bindTo(_contextKeyService);\n        this._hasDocumentFormattingProvider = EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);\n        this._hasDocumentSelectionFormattingProvider = EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n        this._hasMultipleDocumentFormattingProvider = EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);\n        this._hasMultipleDocumentSelectionFormattingProvider = EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n        this._isInWalkThrough = EditorContextKeys.isInWalkThroughSnippet.bindTo(_contextKeyService);\n        const update = () => this._update();\n        // update when model/mode changes\n        this._register(_editor.onDidChangeModel(update));\n        this._register(_editor.onDidChangeModelLanguage(update));\n        // update when registries change\n        this._register(_languageFeaturesService.completionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.codeActionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.codeLensProvider.onDidChange(update));\n        this._register(_languageFeaturesService.definitionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.declarationProvider.onDidChange(update));\n        this._register(_languageFeaturesService.implementationProvider.onDidChange(update));\n        this._register(_languageFeaturesService.typeDefinitionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.hoverProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentHighlightProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentSymbolProvider.onDidChange(update));\n        this._register(_languageFeaturesService.referenceProvider.onDidChange(update));\n        this._register(_languageFeaturesService.renameProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentFormattingEditProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(update));\n        this._register(_languageFeaturesService.signatureHelpProvider.onDidChange(update));\n        this._register(_languageFeaturesService.inlayHintsProvider.onDidChange(update));\n        update();\n    }\n    dispose() {\n        super.dispose();\n    }\n    reset() {\n        this._contextKeyService.bufferChangeEvents(() => {\n            this._langId.reset();\n            this._hasCompletionItemProvider.reset();\n            this._hasCodeActionsProvider.reset();\n            this._hasCodeLensProvider.reset();\n            this._hasDefinitionProvider.reset();\n            this._hasDeclarationProvider.reset();\n            this._hasImplementationProvider.reset();\n            this._hasTypeDefinitionProvider.reset();\n            this._hasHoverProvider.reset();\n            this._hasDocumentHighlightProvider.reset();\n            this._hasDocumentSymbolProvider.reset();\n            this._hasReferenceProvider.reset();\n            this._hasRenameProvider.reset();\n            this._hasDocumentFormattingProvider.reset();\n            this._hasDocumentSelectionFormattingProvider.reset();\n            this._hasSignatureHelpProvider.reset();\n            this._isInWalkThrough.reset();\n        });\n    }\n    _update() {\n        const model = this._editor.getModel();\n        if (!model) {\n            this.reset();\n            return;\n        }\n        this._contextKeyService.bufferChangeEvents(() => {\n            this._langId.set(model.getLanguageId());\n            this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(model));\n            this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(model));\n            this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(model));\n            this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(model));\n            this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(model));\n            this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(model));\n            this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(model));\n            this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(model));\n            this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(model));\n            this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(model));\n            this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(model));\n            this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(model));\n            this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(model));\n            this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(model));\n            this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(model) || this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));\n            this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));\n            this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(model).length + this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);\n            this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);\n            this._isInWalkThrough.set(model.uri.scheme === Schemas.walkThroughSnippet);\n        });\n    }\n}\nclass CodeEditorWidgetFocusTracker extends Disposable {\n    constructor(domElement) {\n        super();\n        this._onChange = this._register(new Emitter());\n        this.onChange = this._onChange.event;\n        this._hasFocus = false;\n        this._domFocusTracker = this._register(dom.trackFocus(domElement));\n        this._register(this._domFocusTracker.onDidFocus(() => {\n            this._hasFocus = true;\n            this._onChange.fire(undefined);\n        }));\n        this._register(this._domFocusTracker.onDidBlur(() => {\n            this._hasFocus = false;\n            this._onChange.fire(undefined);\n        }));\n    }\n    hasFocus() {\n        return this._hasFocus;\n    }\n}\nclass EditorDecorationsCollection {\n    get length() {\n        return this._decorationIds.length;\n    }\n    constructor(_editor, decorations) {\n        this._editor = _editor;\n        this._decorationIds = [];\n        this._isChangingDecorations = false;\n        if (Array.isArray(decorations) && decorations.length > 0) {\n            this.set(decorations);\n        }\n    }\n    onDidChange(listener, thisArgs, disposables) {\n        return this._editor.onDidChangeModelDecorations((e) => {\n            if (this._isChangingDecorations) {\n                return;\n            }\n            listener.call(thisArgs, e);\n        }, disposables);\n    }\n    getRange(index) {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (index >= this._decorationIds.length) {\n            return null;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorationIds[index]);\n    }\n    getRanges() {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const result = [];\n        for (const decorationId of this._decorationIds) {\n            const range = model.getDecorationRange(decorationId);\n            if (range) {\n                result.push(range);\n            }\n        }\n        return result;\n    }\n    has(decoration) {\n        return this._decorationIds.includes(decoration.id);\n    }\n    clear() {\n        if (this._decorationIds.length === 0) {\n            // nothing to do\n            return;\n        }\n        this.set([]);\n    }\n    set(newDecorations) {\n        try {\n            this._isChangingDecorations = true;\n            this._editor.changeDecorations((accessor) => {\n                this._decorationIds = accessor.deltaDecorations(this._decorationIds, newDecorations);\n            });\n        }\n        finally {\n            this._isChangingDecorations = false;\n        }\n        return this._decorationIds;\n    }\n}\nconst squigglyStart = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='`);\nconst squigglyEnd = encodeURIComponent(`'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>`);\nfunction getSquigglySVGData(color) {\n    return squigglyStart + encodeURIComponent(color.toString()) + squigglyEnd;\n}\nconst dotdotdotStart = encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"3\" width=\"12\"><g fill=\"`);\nconst dotdotdotEnd = encodeURIComponent(`\"><circle cx=\"1\" cy=\"1\" r=\"1\"/><circle cx=\"5\" cy=\"1\" r=\"1\"/><circle cx=\"9\" cy=\"1\" r=\"1\"/></g></svg>`);\nfunction getDotDotDotSVGData(color) {\n    return dotdotdotStart + encodeURIComponent(color.toString()) + dotdotdotEnd;\n}\nregisterThemingParticipant((theme, collector) => {\n    const errorForeground = theme.getColor(editorErrorForeground);\n    if (errorForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-error\" /* ClassName.EditorErrorDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(errorForeground)}\") repeat-x bottom left; }`);\n    }\n    const warningForeground = theme.getColor(editorWarningForeground);\n    if (warningForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-warning\" /* ClassName.EditorWarningDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(warningForeground)}\") repeat-x bottom left; }`);\n    }\n    const infoForeground = theme.getColor(editorInfoForeground);\n    if (infoForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-info\" /* ClassName.EditorInfoDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(infoForeground)}\") repeat-x bottom left; }`);\n    }\n    const hintForeground = theme.getColor(editorHintForeground);\n    if (hintForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-hint\" /* ClassName.EditorHintDecoration */} { background: url(\"data:image/svg+xml,${getDotDotDotSVGData(hintForeground)}\") no-repeat bottom left; }`);\n    }\n    const unnecessaryForeground = theme.getColor(editorUnnecessaryCodeOpacity);\n    if (unnecessaryForeground) {\n        collector.addRule(`.monaco-editor.showUnused .${\"squiggly-inline-unnecessary\" /* ClassName.EditorUnnecessaryInlineDecoration */} { opacity: ${unnecessaryForeground.rgba.a}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { runWhenIdle } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Disposable, DisposableMap } from '../../../base/common/lifecycle.js';\nexport class CodeEditorContributions extends Disposable {\n    constructor() {\n        super();\n        this._editor = null;\n        this._instantiationService = null;\n        /**\n         * Contains all instantiated contributions.\n         */\n        this._instances = this._register(new DisposableMap());\n        /**\n         * Contains contributions which are not yet instantiated.\n         */\n        this._pending = new Map();\n        /**\n         * Tracks which instantiation kinds are still left in `_pending`.\n         */\n        this._finishedInstantiation = [];\n        this._finishedInstantiation[0 /* EditorContributionInstantiation.Eager */] = false;\n        this._finishedInstantiation[1 /* EditorContributionInstantiation.AfterFirstRender */] = false;\n        this._finishedInstantiation[2 /* EditorContributionInstantiation.BeforeFirstInteraction */] = false;\n        this._finishedInstantiation[3 /* EditorContributionInstantiation.Eventually */] = false;\n    }\n    initialize(editor, contributions, instantiationService) {\n        this._editor = editor;\n        this._instantiationService = instantiationService;\n        for (const desc of contributions) {\n            if (this._pending.has(desc.id)) {\n                onUnexpectedError(new Error(`Cannot have two contributions with the same id ${desc.id}`));\n                continue;\n            }\n            this._pending.set(desc.id, desc);\n        }\n        this._instantiateSome(0 /* EditorContributionInstantiation.Eager */);\n        // AfterFirstRender\n        // - these extensions will be instantiated at the latest 50ms after the first render.\n        // - but if there is idle time, we will instantiate them sooner.\n        this._register(runWhenIdle(() => {\n            this._instantiateSome(1 /* EditorContributionInstantiation.AfterFirstRender */);\n        }));\n        // BeforeFirstInteraction\n        // - these extensions will be instantiated at the latest before a mouse or a keyboard event.\n        // - but if there is idle time, we will instantiate them sooner.\n        this._register(runWhenIdle(() => {\n            this._instantiateSome(2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n        }));\n        // Eventually\n        // - these extensions will only be instantiated when there is idle time.\n        // - since there is no guarantee that there will ever be idle time, we set a timeout of 5s here.\n        this._register(runWhenIdle(() => {\n            this._instantiateSome(3 /* EditorContributionInstantiation.Eventually */);\n        }, 5000));\n    }\n    saveViewState() {\n        const contributionsState = {};\n        for (const [id, contribution] of this._instances) {\n            if (typeof contribution.saveViewState === 'function') {\n                contributionsState[id] = contribution.saveViewState();\n            }\n        }\n        return contributionsState;\n    }\n    restoreViewState(contributionsState) {\n        for (const [id, contribution] of this._instances) {\n            if (typeof contribution.restoreViewState === 'function') {\n                contribution.restoreViewState(contributionsState[id]);\n            }\n        }\n    }\n    get(id) {\n        this._instantiateById(id);\n        return this._instances.get(id) || null;\n    }\n    onBeforeInteractionEvent() {\n        // this method is called very often by the editor!\n        this._instantiateSome(2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n    }\n    onAfterModelAttached() {\n        this._register(runWhenIdle(() => {\n            this._instantiateSome(1 /* EditorContributionInstantiation.AfterFirstRender */);\n        }, 50));\n    }\n    _instantiateSome(instantiation) {\n        if (this._finishedInstantiation[instantiation]) {\n            // already done with this instantiation!\n            return;\n        }\n        this._finishedInstantiation[instantiation] = true;\n        const contribs = this._findPendingContributionsByInstantiation(instantiation);\n        for (const contrib of contribs) {\n            this._instantiateById(contrib.id);\n        }\n    }\n    _findPendingContributionsByInstantiation(instantiation) {\n        const result = [];\n        for (const [, desc] of this._pending) {\n            if (desc.instantiation === instantiation) {\n                result.push(desc);\n            }\n        }\n        return result;\n    }\n    _instantiateById(id) {\n        const desc = this._pending.get(id);\n        if (!desc) {\n            return;\n        }\n        this._pending.delete(id);\n        if (!this._instantiationService || !this._editor) {\n            throw new Error(`Cannot instantiate contributions before being initialized!`);\n        }\n        try {\n            const instance = this._instantiationService.createInstance(desc.ctor, this._editor);\n            this._instances.set(desc.id, instance);\n            if (typeof instance.restoreViewState === 'function' && desc.instantiation !== 0 /* EditorContributionInstantiation.Eager */) {\n                console.warn(`Editor contribution '${desc.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`);\n            }\n        }\n        catch (err) {\n            onUnexpectedError(err);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getActiveElement } from '../../../../base/browser/dom.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { EditorAction2 } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { DiffEditorWidget } from './diffEditorWidget.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { Action2, MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyEqualsExpr, ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nexport class ToggleCollapseUnchangedRegions extends Action2 {\n    constructor() {\n        super({\n            id: 'diffEditor.toggleCollapseUnchangedRegions',\n            title: { value: localize('toggleCollapseUnchangedRegions', \"Toggle Collapse Unchanged Regions\"), original: 'Toggle Collapse Unchanged Regions' },\n            icon: Codicon.map,\n            toggled: ContextKeyExpr.has('config.diffEditor.hideUnchangedRegions.enabled'),\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            menu: {\n                when: ContextKeyExpr.has('isInDiffEditor'),\n                id: MenuId.EditorTitle,\n                order: 22,\n                group: 'navigation',\n            },\n        });\n    }\n    run(accessor, ...args) {\n        const configurationService = accessor.get(IConfigurationService);\n        const newValue = !configurationService.getValue('diffEditor.hideUnchangedRegions.enabled');\n        configurationService.updateValue('diffEditor.hideUnchangedRegions.enabled', newValue);\n    }\n}\nregisterAction2(ToggleCollapseUnchangedRegions);\nexport class ToggleShowMovedCodeBlocks extends Action2 {\n    constructor() {\n        super({\n            id: 'diffEditor.toggleShowMovedCodeBlocks',\n            title: { value: localize('toggleShowMovedCodeBlocks', \"Toggle Show Moved Code Blocks\"), original: 'Toggle Show Moved Code Blocks' },\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n        });\n    }\n    run(accessor, ...args) {\n        const configurationService = accessor.get(IConfigurationService);\n        const newValue = !configurationService.getValue('diffEditor.experimental.showMoves');\n        configurationService.updateValue('diffEditor.experimental.showMoves', newValue);\n    }\n}\nregisterAction2(ToggleShowMovedCodeBlocks);\nexport class ToggleUseInlineViewWhenSpaceIsLimited extends Action2 {\n    constructor() {\n        super({\n            id: 'diffEditor.toggleUseInlineViewWhenSpaceIsLimited',\n            title: { value: localize('toggleUseInlineViewWhenSpaceIsLimited', \"Toggle Use Inline View When Space Is Limited\"), original: 'Toggle Use Inline View When Space Is Limited' },\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n        });\n    }\n    run(accessor, ...args) {\n        const configurationService = accessor.get(IConfigurationService);\n        const newValue = !configurationService.getValue('diffEditor.useInlineViewWhenSpaceIsLimited');\n        configurationService.updateValue('diffEditor.useInlineViewWhenSpaceIsLimited', newValue);\n    }\n}\nregisterAction2(ToggleUseInlineViewWhenSpaceIsLimited);\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n    command: {\n        id: new ToggleUseInlineViewWhenSpaceIsLimited().desc.id,\n        title: localize('useInlineViewWhenSpaceIsLimited', \"Use Inline View When Space Is Limited\"),\n        toggled: ContextKeyExpr.has('config.diffEditor.useInlineViewWhenSpaceIsLimited'),\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\n    },\n    order: 11,\n    group: '1_diff',\n    when: ContextKeyExpr.and(EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached, ContextKeyExpr.has('isInDiffEditor')),\n});\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n    command: {\n        id: new ToggleShowMovedCodeBlocks().desc.id,\n        title: localize('showMoves', \"Show Moved Code Blocks\"),\n        icon: Codicon.move,\n        toggled: ContextKeyEqualsExpr.create('config.diffEditor.experimental.showMoves', true),\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\n    },\n    order: 10,\n    group: '1_diff',\n    when: ContextKeyExpr.has('isInDiffEditor'),\n});\nconst diffEditorCategory = {\n    value: localize('diffEditor', 'Diff Editor'),\n    original: 'Diff Editor',\n};\nexport class SwitchSide extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'diffEditor.switchSide',\n            title: { value: localize('switchSide', \"Switch Side\"), original: 'Switch Side' },\n            icon: Codicon.arrowSwap,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            f1: true,\n            category: diffEditorCategory,\n        });\n    }\n    runEditorCommand(accessor, editor, arg) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        if (diffEditor instanceof DiffEditorWidget) {\n            if (arg && arg.dryRun) {\n                return { destinationSelection: diffEditor.mapToOtherSide().destinationSelection };\n            }\n            else {\n                diffEditor.switchSide();\n            }\n        }\n        return undefined;\n    }\n}\nregisterAction2(SwitchSide);\nexport class ExitCompareMove extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'diffEditor.exitCompareMove',\n            title: { value: localize('exitCompareMove', \"Exit Compare Move\"), original: 'Exit Compare Move' },\n            icon: Codicon.close,\n            precondition: EditorContextKeys.comparingMovedCode,\n            f1: false,\n            category: diffEditorCategory,\n            keybinding: {\n                weight: 10000,\n                primary: 9 /* KeyCode.Escape */,\n            }\n        });\n    }\n    runEditorCommand(accessor, editor, ...args) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        if (diffEditor instanceof DiffEditorWidget) {\n            diffEditor.exitCompareMove();\n        }\n    }\n}\nregisterAction2(ExitCompareMove);\nexport class CollapseAllUnchangedRegions extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'diffEditor.collapseAllUnchangedRegions',\n            title: { value: localize('collapseAllUnchangedRegions', \"Collapse All Unchanged Regions\"), original: 'Collapse All Unchanged Regions' },\n            icon: Codicon.fold,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            f1: true,\n            category: diffEditorCategory,\n        });\n    }\n    runEditorCommand(accessor, editor, ...args) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        if (diffEditor instanceof DiffEditorWidget) {\n            diffEditor.collapseAllUnchangedRegions();\n        }\n    }\n}\nregisterAction2(CollapseAllUnchangedRegions);\nexport class ShowAllUnchangedRegions extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'diffEditor.showAllUnchangedRegions',\n            title: { value: localize('showAllUnchangedRegions', \"Show All Unchanged Regions\"), original: 'Show All Unchanged Regions' },\n            icon: Codicon.unfold,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            f1: true,\n            category: diffEditorCategory,\n        });\n    }\n    runEditorCommand(accessor, editor, ...args) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        if (diffEditor instanceof DiffEditorWidget) {\n            diffEditor.showAllUnchangedRegions();\n        }\n    }\n}\nregisterAction2(ShowAllUnchangedRegions);\nconst accessibleDiffViewerCategory = {\n    value: localize('accessibleDiffViewer', 'Accessible Diff Viewer'),\n    original: 'Accessible Diff Viewer',\n};\nexport class AccessibleDiffViewerNext extends Action2 {\n    constructor() {\n        super({\n            id: AccessibleDiffViewerNext.id,\n            title: { value: localize('editor.action.accessibleDiffViewer.next', \"Go to Next Difference\"), original: 'Go to Next Difference' },\n            category: accessibleDiffViewerCategory,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            keybinding: {\n                primary: 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            f1: true,\n        });\n    }\n    run(accessor) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerNext();\n    }\n}\nAccessibleDiffViewerNext.id = 'editor.action.accessibleDiffViewer.next';\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n    command: {\n        id: AccessibleDiffViewerNext.id,\n        title: localize('Open Accessible Diff Viewer', \"Open Accessible Diff Viewer\"),\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\n    },\n    order: 10,\n    group: '2_diff',\n    when: ContextKeyExpr.and(EditorContextKeys.accessibleDiffViewerVisible.negate(), ContextKeyExpr.has('isInDiffEditor')),\n});\nexport class AccessibleDiffViewerPrev extends Action2 {\n    constructor() {\n        super({\n            id: AccessibleDiffViewerPrev.id,\n            title: { value: localize('editor.action.accessibleDiffViewer.prev', \"Go to Previous Difference\"), original: 'Go to Previous Difference' },\n            category: accessibleDiffViewerCategory,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            keybinding: {\n                primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            f1: true,\n        });\n    }\n    run(accessor) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerPrev();\n    }\n}\nAccessibleDiffViewerPrev.id = 'editor.action.accessibleDiffViewer.prev';\nexport function findFocusedDiffEditor(accessor) {\n    var _a;\n    const codeEditorService = accessor.get(ICodeEditorService);\n    const diffEditors = codeEditorService.listDiffEditors();\n    const activeCodeEditor = (_a = codeEditorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : codeEditorService.getActiveCodeEditor();\n    if (!activeCodeEditor) {\n        return null;\n    }\n    for (let i = 0, len = diffEditors.length; i < len; i++) {\n        const diffEditor = diffEditors[i];\n        if (diffEditor.getModifiedEditor().getId() === activeCodeEditor.getId() || diffEditor.getOriginalEditor().getId() === activeCodeEditor.getId()) {\n            return diffEditor;\n        }\n    }\n    const activeElement = getActiveElement();\n    if (activeElement) {\n        for (const d of diffEditors) {\n            const container = d.getContainerDomNode();\n            if (isElementOrParentOf(container, activeElement)) {\n                return d;\n            }\n        }\n    }\n    return null;\n}\nfunction isElementOrParentOf(elementOrParent, element) {\n    let e = element;\n    while (e) {\n        if (e === elementOrParent) {\n            return true;\n        }\n        e = e.parentElement;\n    }\n    return false;\n}\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.next', AccessibleDiffViewerNext.id);\nregisterAction2(AccessibleDiffViewerNext);\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.prev', AccessibleDiffViewerPrev.id);\nregisterAction2(AccessibleDiffViewerPrev);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { isHotReloadEnabled, registerHotReloadHandler } from '../../../../base/common/hotReload.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunHandleChanges, autorunOpts, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { ElementSizeObserver } from '../../config/elementSizeObserver.js';\nexport function joinCombine(arr1, arr2, keySelector, combine) {\n    if (arr1.length === 0) {\n        return arr2;\n    }\n    if (arr2.length === 0) {\n        return arr1;\n    }\n    const result = [];\n    let i = 0;\n    let j = 0;\n    while (i < arr1.length && j < arr2.length) {\n        const val1 = arr1[i];\n        const val2 = arr2[j];\n        const key1 = keySelector(val1);\n        const key2 = keySelector(val2);\n        if (key1 < key2) {\n            result.push(val1);\n            i++;\n        }\n        else if (key1 > key2) {\n            result.push(val2);\n            j++;\n        }\n        else {\n            result.push(combine(val1, val2));\n            i++;\n            j++;\n        }\n    }\n    while (i < arr1.length) {\n        result.push(arr1[i]);\n        i++;\n    }\n    while (j < arr2.length) {\n        result.push(arr2[j]);\n        j++;\n    }\n    return result;\n}\n// TODO make utility\nexport function applyObservableDecorations(editor, decorations) {\n    const d = new DisposableStore();\n    const decorationsCollection = editor.createDecorationsCollection();\n    d.add(autorunOpts({ debugName: () => `Apply decorations from ${decorations.debugName}` }, reader => {\n        const d = decorations.read(reader);\n        decorationsCollection.set(d);\n    }));\n    d.add({\n        dispose: () => {\n            decorationsCollection.clear();\n        }\n    });\n    return d;\n}\nexport function appendRemoveOnDispose(parent, child) {\n    parent.appendChild(child);\n    return toDisposable(() => {\n        parent.removeChild(child);\n    });\n}\nexport class ObservableElementSizeObserver extends Disposable {\n    get width() { return this._width; }\n    get height() { return this._height; }\n    constructor(element, dimension) {\n        super();\n        this.elementSizeObserver = this._register(new ElementSizeObserver(element, dimension));\n        this._width = observableValue(this, this.elementSizeObserver.getWidth());\n        this._height = observableValue(this, this.elementSizeObserver.getHeight());\n        this._register(this.elementSizeObserver.onDidChange(e => transaction(tx => {\n            /** @description Set width/height from elementSizeObserver */\n            this._width.set(this.elementSizeObserver.getWidth(), tx);\n            this._height.set(this.elementSizeObserver.getHeight(), tx);\n        })));\n    }\n    observe(dimension) {\n        this.elementSizeObserver.observe(dimension);\n    }\n    setAutomaticLayout(automaticLayout) {\n        if (automaticLayout) {\n            this.elementSizeObserver.startObserving();\n        }\n        else {\n            this.elementSizeObserver.stopObserving();\n        }\n    }\n}\nexport function animatedObservable(base, store) {\n    let targetVal = base.get();\n    let startVal = targetVal;\n    let curVal = targetVal;\n    const result = observableValue('animatedValue', targetVal);\n    let animationStartMs = -1;\n    const durationMs = 300;\n    let animationFrame = undefined;\n    store.add(autorunHandleChanges({\n        createEmptyChangeSummary: () => ({ animate: false }),\n        handleChange: (ctx, s) => {\n            if (ctx.didChange(base)) {\n                s.animate = s.animate || ctx.change;\n            }\n            return true;\n        }\n    }, (reader, s) => {\n        /** @description update value */\n        if (animationFrame !== undefined) {\n            cancelAnimationFrame(animationFrame);\n            animationFrame = undefined;\n        }\n        startVal = curVal;\n        targetVal = base.read(reader);\n        animationStartMs = Date.now() - (s.animate ? 0 : durationMs);\n        update();\n    }));\n    function update() {\n        const passedMs = Date.now() - animationStartMs;\n        curVal = Math.floor(easeOutExpo(passedMs, startVal, targetVal - startVal, durationMs));\n        if (passedMs < durationMs) {\n            animationFrame = requestAnimationFrame(update);\n        }\n        else {\n            curVal = targetVal;\n        }\n        result.set(curVal, undefined);\n    }\n    return result;\n}\nfunction easeOutExpo(t, b, c, d) {\n    return t === d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\nexport class ViewZoneOverlayWidget extends Disposable {\n    constructor(editor, viewZone, htmlElement) {\n        super();\n        this._register(new ManagedOverlayWidget(editor, htmlElement));\n        this._register(applyStyle(htmlElement, {\n            height: viewZone.actualHeight,\n            top: viewZone.actualTop,\n        }));\n    }\n}\nexport class PlaceholderViewZone {\n    get afterLineNumber() { return this._afterLineNumber.get(); }\n    constructor(_afterLineNumber, heightInPx) {\n        this._afterLineNumber = _afterLineNumber;\n        this.heightInPx = heightInPx;\n        this.domNode = document.createElement('div');\n        this._actualTop = observableValue(this, undefined);\n        this._actualHeight = observableValue(this, undefined);\n        this.actualTop = this._actualTop;\n        this.actualHeight = this._actualHeight;\n        this.showInHiddenAreas = true;\n        this.onChange = this._afterLineNumber;\n        this.onDomNodeTop = (top) => {\n            this._actualTop.set(top, undefined);\n        };\n        this.onComputedHeight = (height) => {\n            this._actualHeight.set(height, undefined);\n        };\n    }\n}\nexport class ManagedOverlayWidget {\n    constructor(_editor, _domElement) {\n        this._editor = _editor;\n        this._domElement = _domElement;\n        this._overlayWidgetId = `managedOverlayWidget-${ManagedOverlayWidget._counter++}`;\n        this._overlayWidget = {\n            getId: () => this._overlayWidgetId,\n            getDomNode: () => this._domElement,\n            getPosition: () => null\n        };\n        this._editor.addOverlayWidget(this._overlayWidget);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this._overlayWidget);\n    }\n}\nManagedOverlayWidget._counter = 0;\nexport function applyStyle(domNode, style) {\n    return autorun(reader => {\n        /** @description applyStyle */\n        for (let [key, val] of Object.entries(style)) {\n            if (val && typeof val === 'object' && 'read' in val) {\n                val = val.read(reader);\n            }\n            if (typeof val === 'number') {\n                val = `${val}px`;\n            }\n            key = key.replace(/[A-Z]/g, m => '-' + m.toLowerCase());\n            domNode.style[key] = val;\n        }\n    });\n}\nexport function readHotReloadableExport(value, reader) {\n    observeHotReloadableExports([value], reader);\n    return value;\n}\nexport function observeHotReloadableExports(values, reader) {\n    if (isHotReloadEnabled()) {\n        const o = observableSignalFromEvent('reload', event => registerHotReloadHandler(oldExports => {\n            if (![...Object.values(oldExports)].some(v => values.includes(v))) {\n                return undefined;\n            }\n            return (_newExports) => {\n                event(undefined);\n                return true;\n            };\n        }));\n        o.read(reader);\n    }\n}\nexport function applyViewZones(editor, viewZones, setIsUpdating) {\n    const store = new DisposableStore();\n    const lastViewZoneIds = [];\n    store.add(autorun(reader => {\n        /** @description applyViewZones */\n        const curViewZones = viewZones.read(reader);\n        const viewZonIdsPerViewZone = new Map();\n        const viewZoneIdPerOnChangeObservable = new Map();\n        if (setIsUpdating) {\n            setIsUpdating(true);\n        }\n        editor.changeViewZones(a => {\n            for (const id of lastViewZoneIds) {\n                a.removeZone(id);\n            }\n            lastViewZoneIds.length = 0;\n            for (const z of curViewZones) {\n                const id = a.addZone(z);\n                lastViewZoneIds.push(id);\n                viewZonIdsPerViewZone.set(z, id);\n            }\n        });\n        if (setIsUpdating) {\n            setIsUpdating(false);\n        }\n        store.add(autorunHandleChanges({\n            createEmptyChangeSummary() {\n                return [];\n            },\n            handleChange(context, changeSummary) {\n                const id = viewZoneIdPerOnChangeObservable.get(context.changedObservable);\n                if (id !== undefined) {\n                    changeSummary.push(id);\n                }\n                return true;\n            },\n        }, (reader, changeSummary) => {\n            /** @description layoutZone on change */\n            for (const vz of curViewZones) {\n                if (vz.onChange) {\n                    viewZoneIdPerOnChangeObservable.set(vz.onChange, viewZonIdsPerViewZone.get(vz));\n                    vz.onChange.read(reader);\n                }\n            }\n            if (setIsUpdating) {\n                setIsUpdating(true);\n            }\n            editor.changeViewZones(a => { for (const id of changeSummary) {\n                a.layoutZone(id);\n            } });\n            if (setIsUpdating) {\n                setIsUpdating(false);\n            }\n        }));\n    }));\n    store.add({\n        dispose() {\n            if (setIsUpdating) {\n                setIsUpdating(true);\n            }\n            editor.changeViewZones(a => { for (const id of lastViewZoneIds) {\n                a.removeZone(id);\n            } });\n            if (setIsUpdating) {\n                setIsUpdating(false);\n            }\n        }\n    });\n    return store;\n}\nexport class DisposableCancellationTokenSource extends CancellationTokenSource {\n    dispose() {\n        super.dispose(true);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { addDisposableListener, addStandardDisposableListener, reset } from '../../../../base/browser/dom.js';\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { forEachAdjacent, groupAdjacentBy } from '../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, recomputeInitiallyAndOnChange, observableValue, subtransaction, transaction } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { applyStyle } from './utils.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { OffsetRange } from '../../../common/core/offsetRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { LineRangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../common/viewModel.js';\nimport { localize } from '../../../../nls.js';\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport './accessibleDiffViewer.css';\nconst accessibleDiffViewerInsertIcon = registerIcon('diff-review-insert', Codicon.add, localize('accessibleDiffViewerInsertIcon', 'Icon for \\'Insert\\' in accessible diff viewer.'));\nconst accessibleDiffViewerRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, localize('accessibleDiffViewerRemoveIcon', 'Icon for \\'Remove\\' in accessible diff viewer.'));\nconst accessibleDiffViewerCloseIcon = registerIcon('diff-review-close', Codicon.close, localize('accessibleDiffViewerCloseIcon', 'Icon for \\'Close\\' in accessible diff viewer.'));\nlet AccessibleDiffViewer = class AccessibleDiffViewer extends Disposable {\n    constructor(_parentNode, _visible, _setVisible, _canClose, _width, _height, _diffs, _editors, _instantiationService) {\n        super();\n        this._parentNode = _parentNode;\n        this._visible = _visible;\n        this._setVisible = _setVisible;\n        this._canClose = _canClose;\n        this._width = _width;\n        this._height = _height;\n        this._diffs = _diffs;\n        this._editors = _editors;\n        this._instantiationService = _instantiationService;\n        this.model = derivedWithStore(this, (reader, store) => {\n            const visible = this._visible.read(reader);\n            this._parentNode.style.visibility = visible ? 'visible' : 'hidden';\n            if (!visible) {\n                return null;\n            }\n            const model = store.add(this._instantiationService.createInstance(ViewModel, this._diffs, this._editors, this._setVisible, this._canClose));\n            const view = store.add(this._instantiationService.createInstance(View, this._parentNode, model, this._width, this._height, this._editors));\n            return {\n                model,\n                view\n            };\n        });\n        this._register(recomputeInitiallyAndOnChange(this.model));\n    }\n    next() {\n        transaction(tx => {\n            const isVisible = this._visible.get();\n            this._setVisible(true, tx);\n            if (isVisible) {\n                this.model.get().model.nextGroup(tx);\n            }\n        });\n    }\n    prev() {\n        transaction(tx => {\n            this._setVisible(true, tx);\n            this.model.get().model.previousGroup(tx);\n        });\n    }\n    close() {\n        transaction(tx => {\n            this._setVisible(false, tx);\n        });\n    }\n};\nAccessibleDiffViewer._ttPolicy = createTrustedTypesPolicy('diffReview', { createHTML: value => value });\nAccessibleDiffViewer = __decorate([\n    __param(8, IInstantiationService)\n], AccessibleDiffViewer);\nexport { AccessibleDiffViewer };\nlet ViewModel = class ViewModel extends Disposable {\n    constructor(_diffs, _editors, _setVisible, canClose, _audioCueService) {\n        super();\n        this._diffs = _diffs;\n        this._editors = _editors;\n        this._setVisible = _setVisible;\n        this.canClose = canClose;\n        this._audioCueService = _audioCueService;\n        this._groups = observableValue(this, []);\n        this._currentGroupIdx = observableValue(this, 0);\n        this._currentElementIdx = observableValue(this, 0);\n        this.groups = this._groups;\n        this.currentGroup = this._currentGroupIdx.map((idx, r) => this._groups.read(r)[idx]);\n        this.currentGroupIndex = this._currentGroupIdx;\n        this.currentElement = this._currentElementIdx.map((idx, r) => { var _a; return (_a = this.currentGroup.read(r)) === null || _a === void 0 ? void 0 : _a.lines[idx]; });\n        this._register(autorun(reader => {\n            /** @description update groups */\n            const diffs = this._diffs.read(reader);\n            if (!diffs) {\n                this._groups.set([], undefined);\n                return;\n            }\n            const groups = computeViewElementGroups(diffs, this._editors.original.getModel().getLineCount(), this._editors.modified.getModel().getLineCount());\n            transaction(tx => {\n                const p = this._editors.modified.getPosition();\n                if (p) {\n                    const nextGroup = groups.findIndex(g => (p === null || p === void 0 ? void 0 : p.lineNumber) < g.range.modified.endLineNumberExclusive);\n                    if (nextGroup !== -1) {\n                        this._currentGroupIdx.set(nextGroup, tx);\n                    }\n                }\n                this._groups.set(groups, tx);\n            });\n        }));\n        this._register(autorun(reader => {\n            /** @description play audio-cue for diff */\n            const currentViewItem = this.currentElement.read(reader);\n            if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Deleted) {\n                this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, { source: 'accessibleDiffViewer.currentElementChanged' });\n            }\n            else if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Added) {\n                this._audioCueService.playAudioCue(AudioCue.diffLineInserted, { source: 'accessibleDiffViewer.currentElementChanged' });\n            }\n        }));\n        this._register(autorun(reader => {\n            var _a;\n            /** @description select lines in editor */\n            // This ensures editor commands (like revert/stage) work\n            const currentViewItem = this.currentElement.read(reader);\n            if (currentViewItem && currentViewItem.type !== LineType.Header) {\n                const lineNumber = (_a = currentViewItem.modifiedLineNumber) !== null && _a !== void 0 ? _a : currentViewItem.diff.modified.startLineNumber;\n                this._editors.modified.setSelection(Range.fromPositions(new Position(lineNumber, 1)));\n            }\n        }));\n    }\n    _goToGroupDelta(delta, tx) {\n        const groups = this.groups.get();\n        if (!groups || groups.length <= 1) {\n            return;\n        }\n        subtransaction(tx, tx => {\n            this._currentGroupIdx.set(OffsetRange.ofLength(groups.length).clipCyclic(this._currentGroupIdx.get() + delta), tx);\n            this._currentElementIdx.set(0, tx);\n        });\n    }\n    nextGroup(tx) { this._goToGroupDelta(1, tx); }\n    previousGroup(tx) { this._goToGroupDelta(-1, tx); }\n    _goToLineDelta(delta) {\n        const group = this.currentGroup.get();\n        if (!group || group.lines.length <= 1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(OffsetRange.ofLength(group.lines.length).clip(this._currentElementIdx.get() + delta), tx);\n        });\n    }\n    goToNextLine() { this._goToLineDelta(1); }\n    goToPreviousLine() { this._goToLineDelta(-1); }\n    goToLine(line) {\n        const group = this.currentGroup.get();\n        if (!group) {\n            return;\n        }\n        const idx = group.lines.indexOf(line);\n        if (idx === -1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(idx, tx);\n        });\n    }\n    revealCurrentElementInEditor() {\n        this._setVisible(false, undefined);\n        const curElem = this.currentElement.get();\n        if (curElem) {\n            if (curElem.type === LineType.Deleted) {\n                this._editors.original.setSelection(Range.fromPositions(new Position(curElem.originalLineNumber, 1)));\n                this._editors.original.revealLine(curElem.originalLineNumber);\n                this._editors.original.focus();\n            }\n            else {\n                if (curElem.type !== LineType.Header) {\n                    this._editors.modified.setSelection(Range.fromPositions(new Position(curElem.modifiedLineNumber, 1)));\n                    this._editors.modified.revealLine(curElem.modifiedLineNumber);\n                }\n                this._editors.modified.focus();\n            }\n        }\n    }\n    close() {\n        this._setVisible(false, undefined);\n        this._editors.modified.focus();\n    }\n};\nViewModel = __decorate([\n    __param(4, IAudioCueService)\n], ViewModel);\nconst viewElementGroupLineMargin = 3;\nfunction computeViewElementGroups(diffs, originalLineCount, modifiedLineCount) {\n    const result = [];\n    for (const g of groupAdjacentBy(diffs, (a, b) => (b.modified.startLineNumber - a.modified.endLineNumberExclusive < 2 * viewElementGroupLineMargin))) {\n        const viewElements = [];\n        viewElements.push(new HeaderViewElement());\n        const origFullRange = new LineRange(Math.max(1, g[0].original.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].original.endLineNumberExclusive + viewElementGroupLineMargin, originalLineCount + 1));\n        const modifiedFullRange = new LineRange(Math.max(1, g[0].modified.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].modified.endLineNumberExclusive + viewElementGroupLineMargin, modifiedLineCount + 1));\n        forEachAdjacent(g, (a, b) => {\n            const origRange = new LineRange(a ? a.original.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.original.startLineNumber : origFullRange.endLineNumberExclusive);\n            const modifiedRange = new LineRange(a ? a.modified.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modified.startLineNumber : modifiedFullRange.endLineNumberExclusive);\n            origRange.forEach(origLineNumber => {\n                viewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));\n            });\n            if (b) {\n                b.original.forEach(origLineNumber => {\n                    viewElements.push(new DeletedLineViewElement(b, origLineNumber));\n                });\n                b.modified.forEach(modifiedLineNumber => {\n                    viewElements.push(new AddedLineViewElement(b, modifiedLineNumber));\n                });\n            }\n        });\n        const modifiedRange = g[0].modified.join(g[g.length - 1].modified);\n        const originalRange = g[0].original.join(g[g.length - 1].original);\n        result.push(new ViewElementGroup(new LineRangeMapping(modifiedRange, originalRange), viewElements));\n    }\n    return result;\n}\nvar LineType;\n(function (LineType) {\n    LineType[LineType[\"Header\"] = 0] = \"Header\";\n    LineType[LineType[\"Unchanged\"] = 1] = \"Unchanged\";\n    LineType[LineType[\"Deleted\"] = 2] = \"Deleted\";\n    LineType[LineType[\"Added\"] = 3] = \"Added\";\n})(LineType || (LineType = {}));\nclass ViewElementGroup {\n    constructor(range, lines) {\n        this.range = range;\n        this.lines = lines;\n    }\n}\nclass HeaderViewElement {\n    constructor() {\n        this.type = LineType.Header;\n    }\n}\nclass DeletedLineViewElement {\n    constructor(diff, originalLineNumber) {\n        this.diff = diff;\n        this.originalLineNumber = originalLineNumber;\n        this.type = LineType.Deleted;\n        this.modifiedLineNumber = undefined;\n    }\n}\nclass AddedLineViewElement {\n    constructor(diff, modifiedLineNumber) {\n        this.diff = diff;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Added;\n        this.originalLineNumber = undefined;\n    }\n}\nclass UnchangedLineViewElement {\n    constructor(originalLineNumber, modifiedLineNumber) {\n        this.originalLineNumber = originalLineNumber;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Unchanged;\n    }\n}\nlet View = class View extends Disposable {\n    constructor(_element, _model, _width, _height, _editors, _languageService) {\n        super();\n        this._element = _element;\n        this._model = _model;\n        this._width = _width;\n        this._height = _height;\n        this._editors = _editors;\n        this._languageService = _languageService;\n        this.domNode = this._element;\n        this.domNode.className = 'diff-review monaco-editor-background';\n        const actionBarContainer = document.createElement('div');\n        actionBarContainer.className = 'diff-review-actions';\n        this._actionBar = this._register(new ActionBar(actionBarContainer));\n        this._register(autorun(reader => {\n            /** @description update actions */\n            this._actionBar.clear();\n            if (this._model.canClose.read(reader)) {\n                this._actionBar.push(new Action('diffreview.close', localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(accessibleDiffViewerCloseIcon), true, () => __awaiter(this, void 0, void 0, function* () { return _model.close(); })), { label: false, icon: true });\n            }\n        }));\n        this._content = document.createElement('div');\n        this._content.className = 'diff-review-content';\n        this._content.setAttribute('role', 'code');\n        this._scrollbar = this._register(new DomScrollableElement(this._content, {}));\n        reset(this.domNode, this._scrollbar.getDomNode(), actionBarContainer);\n        this._register(toDisposable(() => { reset(this.domNode); }));\n        this._register(applyStyle(this.domNode, { width: this._width, height: this._height }));\n        this._register(applyStyle(this._content, { width: this._width, height: this._height }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description render */\n            this._model.currentGroup.read(reader);\n            this._render(store);\n        }));\n        // TODO@hediet use commands\n        this._register(addStandardDisposableListener(this.domNode, 'keydown', (e) => {\n            if (e.equals(18 /* KeyCode.DownArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                this._model.goToNextLine();\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                this._model.goToPreviousLine();\n            }\n            if (e.equals(9 /* KeyCode.Escape */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */)\n                || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */)\n                || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)) {\n                e.preventDefault();\n                this._model.close();\n            }\n            if (e.equals(10 /* KeyCode.Space */)\n                || e.equals(3 /* KeyCode.Enter */)) {\n                e.preventDefault();\n                this._model.revealCurrentElementInEditor();\n            }\n        }));\n    }\n    _render(store) {\n        const originalOptions = this._editors.original.getOptions();\n        const modifiedOptions = this._editors.modified.getOptions();\n        const container = document.createElement('div');\n        container.className = 'diff-review-table';\n        container.setAttribute('role', 'list');\n        container.setAttribute('aria-label', localize('ariaLabel', 'Accessible Diff Viewer. Use arrow up and down to navigate.'));\n        applyFontInfo(container, modifiedOptions.get(50 /* EditorOption.fontInfo */));\n        reset(this._content, container);\n        const originalModel = this._editors.original.getModel();\n        const modifiedModel = this._editors.modified.getModel();\n        if (!originalModel || !modifiedModel) {\n            return;\n        }\n        const originalModelOpts = originalModel.getOptions();\n        const modifiedModelOpts = modifiedModel.getOptions();\n        const lineHeight = modifiedOptions.get(66 /* EditorOption.lineHeight */);\n        const group = this._model.currentGroup.get();\n        for (const viewItem of (group === null || group === void 0 ? void 0 : group.lines) || []) {\n            if (!group) {\n                break;\n            }\n            let row;\n            if (viewItem.type === LineType.Header) {\n                const header = document.createElement('div');\n                header.className = 'diff-review-row';\n                header.setAttribute('role', 'listitem');\n                const r = group.range;\n                const diffIndex = this._model.currentGroupIndex.get();\n                const diffsLength = this._model.groups.get().length;\n                const getAriaLines = (lines) => lines === 0 ? localize('no_lines_changed', \"no lines changed\")\n                    : lines === 1 ? localize('one_line_changed', \"1 line changed\")\n                        : localize('more_lines_changed', \"{0} lines changed\", lines);\n                const originalChangedLinesCntAria = getAriaLines(r.original.length);\n                const modifiedChangedLinesCntAria = getAriaLines(r.modified.length);\n                header.setAttribute('aria-label', localize({\n                    key: 'header',\n                    comment: [\n                        'This is the ARIA label for a git diff header.',\n                        'A git diff header looks like this: @@ -154,12 +159,39 @@.',\n                        'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\n                        'Variables 0 and 1 refer to the diff index out of total number of diffs.',\n                        'Variables 2 and 4 will be numbers (a line number).',\n                        'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.'\n                    ]\n                }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", (diffIndex + 1), diffsLength, r.original.startLineNumber, originalChangedLinesCntAria, r.modified.startLineNumber, modifiedChangedLinesCntAria));\n                const cell = document.createElement('div');\n                cell.className = 'diff-review-cell diff-review-summary';\n                // e.g.: `1/10: @@ -504,7 +517,7 @@`\n                cell.appendChild(document.createTextNode(`${diffIndex + 1}/${diffsLength}: @@ -${r.original.startLineNumber},${r.original.length} +${r.modified.startLineNumber},${r.modified.length} @@`));\n                header.appendChild(cell);\n                row = header;\n            }\n            else {\n                row = this._createRow(viewItem, lineHeight, this._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\n            }\n            container.appendChild(row);\n            const isSelectedObs = derived(reader => /** @description isSelected */ this._model.currentElement.read(reader) === viewItem);\n            store.add(autorun(reader => {\n                /** @description update tab index */\n                const isSelected = isSelectedObs.read(reader);\n                row.tabIndex = isSelected ? 0 : -1;\n                if (isSelected) {\n                    row.focus();\n                }\n            }));\n            store.add(addDisposableListener(row, 'focus', () => {\n                this._model.goToLine(viewItem);\n            }));\n        }\n        this._scrollbar.scanDomNode();\n    }\n    _createRow(item, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\n        const originalLayoutInfo = originalOptions.get(143 /* EditorOption.layoutInfo */);\n        const originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n        const modifiedLayoutInfo = modifiedOptions.get(143 /* EditorOption.layoutInfo */);\n        const modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n        let rowClassName = 'diff-review-row';\n        let lineNumbersExtraClassName = '';\n        const spacerClassName = 'diff-review-spacer';\n        let spacerIcon = null;\n        switch (item.type) {\n            case LineType.Added:\n                rowClassName = 'diff-review-row line-insert';\n                lineNumbersExtraClassName = ' char-insert';\n                spacerIcon = accessibleDiffViewerInsertIcon;\n                break;\n            case LineType.Deleted:\n                rowClassName = 'diff-review-row line-delete';\n                lineNumbersExtraClassName = ' char-delete';\n                spacerIcon = accessibleDiffViewerRemoveIcon;\n                break;\n        }\n        const row = document.createElement('div');\n        row.style.minWidth = width + 'px';\n        row.className = rowClassName;\n        row.setAttribute('role', 'listitem');\n        row.ariaLevel = '';\n        const cell = document.createElement('div');\n        cell.className = 'diff-review-cell';\n        cell.style.height = `${lineHeight}px`;\n        row.appendChild(cell);\n        const originalLineNumber = document.createElement('span');\n        originalLineNumber.style.width = (originalLineNumbersWidth + 'px');\n        originalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\n        originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.originalLineNumber !== undefined) {\n            originalLineNumber.appendChild(document.createTextNode(String(item.originalLineNumber)));\n        }\n        else {\n            originalLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(originalLineNumber);\n        const modifiedLineNumber = document.createElement('span');\n        modifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.paddingRight = '10px';\n        modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.modifiedLineNumber !== undefined) {\n            modifiedLineNumber.appendChild(document.createTextNode(String(item.modifiedLineNumber)));\n        }\n        else {\n            modifiedLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(modifiedLineNumber);\n        const spacer = document.createElement('span');\n        spacer.className = spacerClassName;\n        if (spacerIcon) {\n            const spacerCodicon = document.createElement('span');\n            spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n            spacerCodicon.innerText = '\\u00a0\\u00a0';\n            spacer.appendChild(spacerCodicon);\n        }\n        else {\n            spacer.innerText = '\\u00a0\\u00a0';\n        }\n        cell.appendChild(spacer);\n        let lineContent;\n        if (item.modifiedLineNumber !== undefined) {\n            let html = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec);\n            if (AccessibleDiffViewer._ttPolicy) {\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = modifiedModel.getLineContent(item.modifiedLineNumber);\n        }\n        else {\n            let html = this._getLineHtml(originalModel, originalOptions, originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec);\n            if (AccessibleDiffViewer._ttPolicy) {\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = originalModel.getLineContent(item.originalLineNumber);\n        }\n        if (lineContent.length === 0) {\n            lineContent = localize('blankLine', \"blank\");\n        }\n        let ariaLabel = '';\n        switch (item.type) {\n            case LineType.Unchanged:\n                if (item.originalLineNumber === item.modifiedLineNumber) {\n                    ariaLabel = localize({ key: 'unchangedLine', comment: ['The placeholders are contents of the line and should not be translated.'] }, \"{0} unchanged line {1}\", lineContent, item.originalLineNumber);\n                }\n                else {\n                    ariaLabel = localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, item.originalLineNumber, item.modifiedLineNumber);\n                }\n                break;\n            case LineType.Added:\n                ariaLabel = localize('insertLine', \"+ {0} modified line {1}\", lineContent, item.modifiedLineNumber);\n                break;\n            case LineType.Deleted:\n                ariaLabel = localize('deleteLine', \"- {0} original line {1}\", lineContent, item.originalLineNumber);\n                break;\n        }\n        row.setAttribute('aria-label', ariaLabel);\n        return row;\n    }\n    _getLineHtml(model, options, tabSize, lineNumber, languageIdCodec) {\n        const lineContent = model.getLineContent(lineNumber);\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        const lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n        const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n        const r = renderViewLine2(new RenderLineInput((fontInfo.isMonospace && !options.get(33 /* EditorOption.disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(116 /* EditorOption.stopRenderingLineAfter */), options.get(98 /* EditorOption.renderWhitespace */), options.get(93 /* EditorOption.renderControlCharacters */), options.get(51 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\n        return r.html;\n    }\n};\nView = __decorate([\n    __param(5, ILanguageService)\n], View);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { localize } from '../../../../nls.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nexport const diffInsertIcon = registerIcon('diff-insert', Codicon.add, localize('diffInsertIcon', 'Line decoration for inserts in the diff editor.'));\nexport const diffRemoveIcon = registerIcon('diff-remove', Codicon.remove, localize('diffRemoveIcon', 'Line decoration for removals in the diff editor.'));\nexport const diffLineAddDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\n    className: 'line-insert',\n    description: 'line-insert',\n    isWholeLine: true,\n    linesDecorationsClassName: 'insert-sign ' + ThemeIcon.asClassName(diffInsertIcon),\n    marginClassName: 'gutter-insert',\n});\nexport const diffLineDeleteDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\n    className: 'line-delete',\n    description: 'line-delete',\n    isWholeLine: true,\n    linesDecorationsClassName: 'delete-sign ' + ThemeIcon.asClassName(diffRemoveIcon),\n    marginClassName: 'gutter-delete',\n});\nexport const diffLineAddDecorationBackground = ModelDecorationOptions.register({\n    className: 'line-insert',\n    description: 'line-insert',\n    isWholeLine: true,\n    marginClassName: 'gutter-insert',\n});\nexport const diffLineDeleteDecorationBackground = ModelDecorationOptions.register({\n    className: 'line-delete',\n    description: 'line-delete',\n    isWholeLine: true,\n    marginClassName: 'gutter-delete',\n});\nexport const diffAddDecoration = ModelDecorationOptions.register({\n    className: 'char-insert',\n    description: 'char-insert',\n    shouldFillLineOnLineBreak: true,\n});\nexport const diffWholeLineAddDecoration = ModelDecorationOptions.register({\n    className: 'char-insert',\n    description: 'char-insert',\n    isWholeLine: true,\n});\nexport const diffAddDecorationEmpty = ModelDecorationOptions.register({\n    className: 'char-insert diff-range-empty',\n    description: 'char-insert diff-range-empty',\n});\nexport const diffDeleteDecoration = ModelDecorationOptions.register({\n    className: 'char-delete',\n    description: 'char-delete',\n    shouldFillLineOnLineBreak: true,\n});\nexport const diffWholeLineDeleteDecoration = ModelDecorationOptions.register({\n    className: 'char-delete',\n    description: 'char-delete',\n    isWholeLine: true,\n});\nexport const diffDeleteDecorationEmpty = ModelDecorationOptions.register({\n    className: 'char-delete diff-range-empty',\n    description: 'char-delete diff-range-empty',\n});\nexport const arrowRevertChange = ModelDecorationOptions.register({\n    description: 'diff-editor-arrow-revert-change',\n    glyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true })\n        .appendMarkdown(localize('revertChangeHoverMessage', 'Click to revert change')),\n    glyphMarginClassName: 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight),\n    zIndex: 10001,\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { h } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { booleanComparator, compareBy, numberComparator, tieBreakComparators } from '../../../../base/common/arrays.js';\nimport { findMaxIdxBy } from '../../../../base/common/arraysFind.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunHandleChanges, autorunWithStore, constObservable, derived, derivedWithStore, observableFromEvent, observableSignalFromEvent, observableValue, recomputeInitiallyAndOnChange } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { PlaceholderViewZone, ViewZoneOverlayWidget, applyStyle, applyViewZones } from './utils.js';\nimport { OffsetRange, OffsetRangeSet } from '../../../common/core/offsetRange.js';\nimport { localize } from '../../../../nls.js';\nexport class MovedBlocksLinesPart extends Disposable {\n    constructor(_rootElement, _diffModel, _originalEditorLayoutInfo, _modifiedEditorLayoutInfo, _editors) {\n        super();\n        this._rootElement = _rootElement;\n        this._diffModel = _diffModel;\n        this._originalEditorLayoutInfo = _originalEditorLayoutInfo;\n        this._modifiedEditorLayoutInfo = _modifiedEditorLayoutInfo;\n        this._editors = _editors;\n        this._originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => this._editors.original.getScrollTop());\n        this._modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\n        this._viewZonesChanged = observableSignalFromEvent('onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\n        this.width = observableValue(this, 0);\n        this._modifiedViewZonesChangedSignal = observableSignalFromEvent('modified.onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\n        this._originalViewZonesChangedSignal = observableSignalFromEvent('original.onDidChangeViewZones', this._editors.original.onDidChangeViewZones);\n        this._state = derivedWithStore((reader, store) => {\n            /** @description state */\n            var _a;\n            this._element.replaceChildren();\n            const model = this._diffModel.read(reader);\n            const moves = (_a = model === null || model === void 0 ? void 0 : model.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTexts;\n            if (!moves || moves.length === 0) {\n                this.width.set(0, undefined);\n                return;\n            }\n            this._viewZonesChanged.read(reader);\n            const infoOrig = this._originalEditorLayoutInfo.read(reader);\n            const infoMod = this._modifiedEditorLayoutInfo.read(reader);\n            if (!infoOrig || !infoMod) {\n                this.width.set(0, undefined);\n                return;\n            }\n            this._modifiedViewZonesChangedSignal.read(reader);\n            this._originalViewZonesChangedSignal.read(reader);\n            const lines = moves.map((move) => {\n                function computeLineStart(range, editor) {\n                    const t1 = editor.getTopForLineNumber(range.startLineNumber, true);\n                    const t2 = editor.getTopForLineNumber(range.endLineNumberExclusive, true);\n                    return (t1 + t2) / 2;\n                }\n                const start = computeLineStart(move.lineRangeMapping.original, this._editors.original);\n                const startOffset = this._originalScrollTop.read(reader);\n                const end = computeLineStart(move.lineRangeMapping.modified, this._editors.modified);\n                const endOffset = this._modifiedScrollTop.read(reader);\n                const from = start - startOffset;\n                const to = end - endOffset;\n                const top = Math.min(start, end);\n                const bottom = Math.max(start, end);\n                return { range: new OffsetRange(top, bottom), from, to, fromWithoutScroll: start, toWithoutScroll: end, move };\n            });\n            lines.sort(tieBreakComparators(compareBy(l => l.fromWithoutScroll > l.toWithoutScroll, booleanComparator), compareBy(l => l.fromWithoutScroll > l.toWithoutScroll ? l.fromWithoutScroll : -l.toWithoutScroll, numberComparator)));\n            const layout = LinesLayout.compute(lines.map(l => l.range));\n            const padding = 10;\n            const lineAreaLeft = infoOrig.verticalScrollbarWidth;\n            const lineAreaWidth = (layout.getTrackCount() - 1) * 10 + padding * 2;\n            const width = lineAreaLeft + lineAreaWidth + (infoMod.contentLeft - MovedBlocksLinesPart.movedCodeBlockPadding);\n            let idx = 0;\n            for (const line of lines) {\n                const track = layout.getTrack(idx);\n                const verticalY = lineAreaLeft + padding + track * 10;\n                const arrowHeight = 15;\n                const arrowWidth = 15;\n                const right = width;\n                const rectWidth = infoMod.glyphMarginWidth + infoMod.lineNumbersWidth;\n                const rectHeight = 18;\n                const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n                rect.classList.add('arrow-rectangle');\n                rect.setAttribute('x', `${right - rectWidth}`);\n                rect.setAttribute('y', `${line.to - rectHeight / 2}`);\n                rect.setAttribute('width', `${rectWidth}`);\n                rect.setAttribute('height', `${rectHeight}`);\n                this._element.appendChild(rect);\n                const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n                path.setAttribute('d', `M ${0} ${line.from} L ${verticalY} ${line.from} L ${verticalY} ${line.to} L ${right - arrowWidth} ${line.to}`);\n                path.setAttribute('fill', 'none');\n                g.appendChild(path);\n                const arrowRight = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n                arrowRight.classList.add('arrow');\n                store.add(autorun(reader => {\n                    path.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\n                    arrowRight.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\n                }));\n                arrowRight.setAttribute('points', `${right - arrowWidth},${line.to - arrowHeight / 2} ${right},${line.to} ${right - arrowWidth},${line.to + arrowHeight / 2}`);\n                g.appendChild(arrowRight);\n                this._element.appendChild(g);\n                /*\n                TODO@hediet\n                path.addEventListener('mouseenter', () => {\n                    model.setHoveredMovedText(line.move);\n                });\n                path.addEventListener('mouseleave', () => {\n                    model.setHoveredMovedText(undefined);\n                });*/\n                idx++;\n            }\n            this.width.set(lineAreaWidth, undefined);\n        });\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        this._element.setAttribute('class', 'moved-blocks-lines');\n        this._rootElement.appendChild(this._element);\n        this._register(toDisposable(() => this._element.remove()));\n        this._register(autorun(reader => {\n            /** @description update moved blocks lines positioning */\n            const info = this._originalEditorLayoutInfo.read(reader);\n            const info2 = this._modifiedEditorLayoutInfo.read(reader);\n            if (!info || !info2) {\n                return;\n            }\n            this._element.style.left = `${info.width - info.verticalScrollbarWidth}px`;\n            this._element.style.height = `${info.height}px`;\n            this._element.style.width = `${info.verticalScrollbarWidth + info.contentLeft - MovedBlocksLinesPart.movedCodeBlockPadding + this.width.read(reader)}px`;\n        }));\n        this._register(recomputeInitiallyAndOnChange(this._state));\n        const movedBlockViewZones = derived(reader => {\n            const model = this._diffModel.read(reader);\n            const d = model === null || model === void 0 ? void 0 : model.diff.read(reader);\n            if (!d) {\n                return [];\n            }\n            return d.movedTexts.map(move => ({\n                move,\n                original: new PlaceholderViewZone(constObservable(move.lineRangeMapping.original.startLineNumber - 1), 18),\n                modified: new PlaceholderViewZone(constObservable(move.lineRangeMapping.modified.startLineNumber - 1), 18),\n            }));\n        });\n        this._register(applyViewZones(this._editors.original, movedBlockViewZones.map(zones => zones.map(z => z.original))));\n        this._register(applyViewZones(this._editors.modified, movedBlockViewZones.map(zones => zones.map(z => z.modified))));\n        this._register(autorunWithStore((reader, store) => {\n            const blocks = movedBlockViewZones.read(reader);\n            for (const b of blocks) {\n                store.add(new MovedBlockOverlayWidget(this._editors.original, b.original, b.move, 'original', this._diffModel.get()));\n                store.add(new MovedBlockOverlayWidget(this._editors.modified, b.modified, b.move, 'modified', this._diffModel.get()));\n            }\n        }));\n        const originalCursorPosition = observableFromEvent(this._editors.original.onDidChangeCursorPosition, () => this._editors.original.getPosition());\n        const modifiedCursorPosition = observableFromEvent(this._editors.modified.onDidChangeCursorPosition, () => this._editors.modified.getPosition());\n        const originalHasFocus = observableSignalFromEvent('original.onDidFocusEditorWidget', e => this._editors.original.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0)));\n        const modifiedHasFocus = observableSignalFromEvent('modified.onDidFocusEditorWidget', e => this._editors.modified.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0)));\n        let lastChangedEditor = 'modified';\n        this._register(autorunHandleChanges({\n            createEmptyChangeSummary: () => undefined,\n            handleChange: (ctx, summary) => {\n                if (ctx.didChange(originalHasFocus)) {\n                    lastChangedEditor = 'original';\n                }\n                if (ctx.didChange(modifiedHasFocus)) {\n                    lastChangedEditor = 'modified';\n                }\n                return true;\n            }\n        }, reader => {\n            originalHasFocus.read(reader);\n            modifiedHasFocus.read(reader);\n            const m = this._diffModel.read(reader);\n            if (!m) {\n                return;\n            }\n            const diff = m.diff.read(reader);\n            let movedText = undefined;\n            if (diff && lastChangedEditor === 'original') {\n                const originalPos = originalCursorPosition.read(reader);\n                if (originalPos) {\n                    movedText = diff.movedTexts.find(m => m.lineRangeMapping.original.contains(originalPos.lineNumber));\n                }\n            }\n            if (diff && lastChangedEditor === 'modified') {\n                const modifiedPos = modifiedCursorPosition.read(reader);\n                if (modifiedPos) {\n                    movedText = diff.movedTexts.find(m => m.lineRangeMapping.modified.contains(modifiedPos.lineNumber));\n                }\n            }\n            if (movedText !== m.movedTextToCompare.get()) {\n                m.movedTextToCompare.set(undefined, undefined);\n            }\n            m.setActiveMovedText(movedText);\n        }));\n    }\n}\nMovedBlocksLinesPart.movedCodeBlockPadding = 4;\nclass LinesLayout {\n    static compute(lines) {\n        const setsPerTrack = [];\n        const trackPerLineIdx = [];\n        for (const line of lines) {\n            let trackIdx = setsPerTrack.findIndex(set => !set.intersectsStrict(line));\n            if (trackIdx === -1) {\n                const maxTrackCount = 6;\n                if (setsPerTrack.length >= maxTrackCount) {\n                    trackIdx = findMaxIdxBy(setsPerTrack, compareBy(set => set.intersectWithRangeLength(line), numberComparator));\n                }\n                else {\n                    trackIdx = setsPerTrack.length;\n                    setsPerTrack.push(new OffsetRangeSet());\n                }\n            }\n            setsPerTrack[trackIdx].addRange(line);\n            trackPerLineIdx.push(trackIdx);\n        }\n        return new LinesLayout(setsPerTrack.length, trackPerLineIdx);\n    }\n    constructor(_trackCount, trackPerLineIdx) {\n        this._trackCount = _trackCount;\n        this.trackPerLineIdx = trackPerLineIdx;\n    }\n    getTrack(lineIdx) {\n        return this.trackPerLineIdx[lineIdx];\n    }\n    getTrackCount() {\n        return this._trackCount;\n    }\n}\nclass MovedBlockOverlayWidget extends ViewZoneOverlayWidget {\n    constructor(_editor, _viewZone, _move, _kind, _diffModel) {\n        const root = h('div.diff-hidden-lines-widget');\n        super(_editor, _viewZone, root.root);\n        this._editor = _editor;\n        this._move = _move;\n        this._kind = _kind;\n        this._diffModel = _diffModel;\n        this._nodes = h('div.diff-moved-code-block', { style: { marginRight: '4px' } }, [\n            h('div.text-content@textContent'),\n            h('div.action-bar@actionBar'),\n        ]);\n        root.root.appendChild(this._nodes.root);\n        const editorLayout = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\n        this._register(applyStyle(this._nodes.root, {\n            paddingRight: editorLayout.map(l => l.verticalScrollbarWidth)\n        }));\n        let text;\n        if (_move.changes.length > 0) {\n            text = this._kind === 'original' ? localize('codeMovedToWithChanges', 'Code moved with changes to line {0}-{1}', this._move.lineRangeMapping.modified.startLineNumber, this._move.lineRangeMapping.modified.endLineNumberExclusive - 1) : localize('codeMovedFromWithChanges', 'Code moved with changes from line {0}-{1}', this._move.lineRangeMapping.original.startLineNumber, this._move.lineRangeMapping.original.endLineNumberExclusive - 1);\n        }\n        else {\n            text = this._kind === 'original' ? localize('codeMovedTo', 'Code moved to line {0}-{1}', this._move.lineRangeMapping.modified.startLineNumber, this._move.lineRangeMapping.modified.endLineNumberExclusive - 1) : localize('codeMovedFrom', 'Code moved from line {0}-{1}', this._move.lineRangeMapping.original.startLineNumber, this._move.lineRangeMapping.original.endLineNumberExclusive - 1);\n        }\n        const actionBar = this._register(new ActionBar(this._nodes.actionBar, {\n            highlightToggledItems: true,\n        }));\n        const caption = new Action('', text, '', false);\n        actionBar.push(caption, { icon: false, label: true });\n        const actionCompare = new Action('', 'Compare', ThemeIcon.asClassName(Codicon.compareChanges), true, () => {\n            this._editor.focus();\n            this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get() === _move ? undefined : this._move, undefined);\n        });\n        this._register(autorun(reader => {\n            const isActive = this._diffModel.movedTextToCompare.read(reader) === _move;\n            actionCompare.checked = isActive;\n        }));\n        actionBar.push(actionCompare, { icon: false, label: true });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { derived } from '../../../../base/common/observable.js';\nimport { arrowRevertChange, diffAddDecoration, diffAddDecorationEmpty, diffDeleteDecoration, diffDeleteDecorationEmpty, diffLineAddDecorationBackground, diffLineAddDecorationBackgroundWithIndicator, diffLineDeleteDecorationBackground, diffLineDeleteDecorationBackgroundWithIndicator, diffWholeLineAddDecoration, diffWholeLineDeleteDecoration } from './decorations.js';\nimport { MovedBlocksLinesPart } from './movedBlocksLines.js';\nimport { applyObservableDecorations } from './utils.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport class DiffEditorDecorations extends Disposable {\n    constructor(_editors, _diffModel, _options) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._decorations = derived(this, (reader) => {\n            var _a;\n            const diff = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader);\n            if (!diff) {\n                return null;\n            }\n            const movedTextToCompare = this._diffModel.read(reader).movedTextToCompare.read(reader);\n            const renderIndicators = this._options.renderIndicators.read(reader);\n            const showEmptyDecorations = this._options.showEmptyDecorations.read(reader);\n            const originalDecorations = [];\n            const modifiedDecorations = [];\n            if (!movedTextToCompare) {\n                for (const m of diff.mappings) {\n                    if (!m.lineRangeMapping.original.isEmpty) {\n                        originalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange(), options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n                    }\n                    if (!m.lineRangeMapping.modified.isEmpty) {\n                        modifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange(), options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n                    }\n                    if (m.lineRangeMapping.modified.isEmpty || m.lineRangeMapping.original.isEmpty) {\n                        if (!m.lineRangeMapping.original.isEmpty) {\n                            originalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange(), options: diffWholeLineDeleteDecoration });\n                        }\n                        if (!m.lineRangeMapping.modified.isEmpty) {\n                            modifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange(), options: diffWholeLineAddDecoration });\n                        }\n                    }\n                    else {\n                        for (const i of m.lineRangeMapping.innerChanges || []) {\n                            // Don't show empty markers outside the line range\n                            if (m.lineRangeMapping.original.contains(i.originalRange.startLineNumber)) {\n                                originalDecorations.push({ range: i.originalRange, options: (i.originalRange.isEmpty() && showEmptyDecorations) ? diffDeleteDecorationEmpty : diffDeleteDecoration });\n                            }\n                            if (m.lineRangeMapping.modified.contains(i.modifiedRange.startLineNumber)) {\n                                modifiedDecorations.push({ range: i.modifiedRange, options: (i.modifiedRange.isEmpty() && showEmptyDecorations) ? diffAddDecorationEmpty : diffAddDecoration });\n                            }\n                        }\n                    }\n                    if (!m.lineRangeMapping.modified.isEmpty && this._options.shouldRenderRevertArrows.read(reader) && !movedTextToCompare) {\n                        modifiedDecorations.push({ range: Range.fromPositions(new Position(m.lineRangeMapping.modified.startLineNumber, 1)), options: arrowRevertChange });\n                    }\n                }\n            }\n            if (movedTextToCompare) {\n                for (const m of movedTextToCompare.changes) {\n                    const fullRangeOriginal = m.original.toInclusiveRange();\n                    if (fullRangeOriginal) {\n                        originalDecorations.push({ range: fullRangeOriginal, options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n                    }\n                    const fullRangeModified = m.modified.toInclusiveRange();\n                    if (fullRangeModified) {\n                        modifiedDecorations.push({ range: fullRangeModified, options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n                    }\n                    for (const i of m.innerChanges || []) {\n                        originalDecorations.push({ range: i.originalRange, options: diffDeleteDecoration });\n                        modifiedDecorations.push({ range: i.modifiedRange, options: diffAddDecoration });\n                    }\n                }\n            }\n            const activeMovedText = this._diffModel.read(reader).activeMovedText.read(reader);\n            for (const m of diff.movedTexts) {\n                originalDecorations.push({\n                    range: m.lineRangeMapping.original.toInclusiveRange(), options: {\n                        description: 'moved',\n                        blockClassName: 'movedOriginal' + (m === activeMovedText ? ' currentMove' : ''),\n                        blockPadding: [MovedBlocksLinesPart.movedCodeBlockPadding, 0, MovedBlocksLinesPart.movedCodeBlockPadding, MovedBlocksLinesPart.movedCodeBlockPadding],\n                    }\n                });\n                modifiedDecorations.push({\n                    range: m.lineRangeMapping.modified.toInclusiveRange(), options: {\n                        description: 'moved',\n                        blockClassName: 'movedModified' + (m === activeMovedText ? ' currentMove' : ''),\n                        blockPadding: [4, 0, 4, 4],\n                    }\n                });\n            }\n            return { originalDecorations, modifiedDecorations };\n        });\n        this._register(applyObservableDecorations(this._editors.original, this._decorations.map(d => (d === null || d === void 0 ? void 0 : d.originalDecorations) || [])));\n        this._register(applyObservableDecorations(this._editors.modified, this._decorations.map(d => (d === null || d === void 0 ? void 0 : d.modifiedDecorations) || [])));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableValue } from '../../../../base/common/observable.js';\nexport class DiffEditorSash extends Disposable {\n    constructor(_options, _domNode, _dimensions) {\n        super();\n        this._options = _options;\n        this._domNode = _domNode;\n        this._dimensions = _dimensions;\n        this._sashRatio = observableValue(this, undefined);\n        this.sashLeft = derived(this, reader => {\n            var _a;\n            const ratio = (_a = this._sashRatio.read(reader)) !== null && _a !== void 0 ? _a : this._options.splitViewDefaultRatio.read(reader);\n            return this._computeSashLeft(ratio, reader);\n        });\n        this._sash = this._register(new Sash(this._domNode, {\n            getVerticalSashTop: (_sash) => 0,\n            getVerticalSashLeft: (_sash) => this.sashLeft.get(),\n            getVerticalSashHeight: (_sash) => this._dimensions.height.get(),\n        }, { orientation: 0 /* Orientation.VERTICAL */ }));\n        this._startSashPosition = undefined;\n        this._register(this._sash.onDidStart(() => {\n            this._startSashPosition = this.sashLeft.get();\n        }));\n        this._register(this._sash.onDidChange((e) => {\n            const contentWidth = this._dimensions.width.get();\n            const sashPosition = this._computeSashLeft((this._startSashPosition + (e.currentX - e.startX)) / contentWidth, undefined);\n            this._sashRatio.set(sashPosition / contentWidth, undefined);\n        }));\n        this._register(this._sash.onDidEnd(() => this._sash.layout()));\n        this._register(this._sash.onDidReset(() => this._sashRatio.set(undefined, undefined)));\n        this._register(autorun(reader => {\n            /** @description update sash layout */\n            const enabled = this._options.enableSplitViewResizing.read(reader);\n            this._sash.state = enabled ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n            this.sashLeft.read(reader);\n            this._dimensions.height.read(reader);\n            this._sash.layout();\n        }));\n    }\n    setBoundarySashes(sashes) {\n        this._sash.orthogonalEndSash = sashes.bottom;\n    }\n    /** @pure */\n    _computeSashLeft(desiredRatio, reader) {\n        const contentWidth = this._dimensions.width.read(reader);\n        const midPoint = Math.floor(this._options.splitViewDefaultRatio.read(reader) * contentWidth);\n        const sashLeft = this._options.enableSplitViewResizing.read(reader) ? Math.floor(desiredRatio * contentWidth) : midPoint;\n        const MINIMUM_EDITOR_WIDTH = 100;\n        if (contentWidth <= MINIMUM_EDITOR_WIDTH * 2) {\n            return midPoint;\n        }\n        if (sashLeft < MINIMUM_EDITOR_WIDTH) {\n            return MINIMUM_EDITOR_WIDTH;\n        }\n        if (sashLeft > contentWidth - MINIMUM_EDITOR_WIDTH) {\n            return contentWidth - MINIMUM_EDITOR_WIDTH;\n        }\n        return sashLeft;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { equals } from '../../../../base/common/arrays.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\n// TODO@hediet: These classes are copied from outlineModel.ts because of layering issues.\n// Because these classes just depend on the DocumentSymbolProvider (which is in the core editor),\n// they should be moved to the core editor as well.\nexport class TreeElement {\n    remove() {\n        var _a;\n        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.children.delete(this.id);\n    }\n    static findId(candidate, container) {\n        // complex id-computation which contains the origin/extension,\n        // the parent path, and some dedupe logic when names collide\n        let candidateId;\n        if (typeof candidate === 'string') {\n            candidateId = `${container.id}/${candidate}`;\n        }\n        else {\n            candidateId = `${container.id}/${candidate.name}`;\n            if (container.children.get(candidateId) !== undefined) {\n                candidateId = `${container.id}/${candidate.name}_${candidate.range.startLineNumber}_${candidate.range.startColumn}`;\n            }\n        }\n        let id = candidateId;\n        for (let i = 0; container.children.get(id) !== undefined; i++) {\n            id = `${candidateId}_${i}`;\n        }\n        return id;\n    }\n    static empty(element) {\n        return element.children.size === 0;\n    }\n}\nexport class OutlineElement extends TreeElement {\n    constructor(id, parent, symbol) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.symbol = symbol;\n        this.children = new Map();\n    }\n}\nexport class OutlineGroup extends TreeElement {\n    constructor(id, parent, label, order) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.label = label;\n        this.order = order;\n        this.children = new Map();\n    }\n}\nexport class OutlineModel extends TreeElement {\n    static create(registry, textModel, token) {\n        const cts = new CancellationTokenSource(token);\n        const result = new OutlineModel(textModel.uri);\n        const provider = registry.ordered(textModel);\n        const promises = provider.map((provider, index) => {\n            var _a;\n            const id = TreeElement.findId(`provider_${index}`, result);\n            const group = new OutlineGroup(id, result, (_a = provider.displayName) !== null && _a !== void 0 ? _a : 'Unknown Outline Provider', index);\n            return Promise.resolve(provider.provideDocumentSymbols(textModel, cts.token)).then(result => {\n                for (const info of result || []) {\n                    OutlineModel._makeOutlineElement(info, group);\n                }\n                return group;\n            }, err => {\n                onUnexpectedExternalError(err);\n                return group;\n            }).then(group => {\n                if (!TreeElement.empty(group)) {\n                    result._groups.set(id, group);\n                }\n                else {\n                    group.remove();\n                }\n            });\n        });\n        const listener = registry.onDidChange(() => {\n            const newProvider = registry.ordered(textModel);\n            if (!equals(newProvider, provider)) {\n                cts.cancel();\n            }\n        });\n        return Promise.all(promises).then(() => {\n            if (cts.token.isCancellationRequested && !token.isCancellationRequested) {\n                return OutlineModel.create(registry, textModel, token);\n            }\n            else {\n                return result._compact();\n            }\n        }).finally(() => {\n            cts.dispose();\n            listener.dispose();\n        });\n    }\n    static _makeOutlineElement(info, container) {\n        const id = TreeElement.findId(info, container);\n        const res = new OutlineElement(id, container, info);\n        if (info.children) {\n            for (const childInfo of info.children) {\n                OutlineModel._makeOutlineElement(childInfo, res);\n            }\n        }\n        container.children.set(res.id, res);\n    }\n    constructor(uri) {\n        super();\n        this.uri = uri;\n        this.id = 'root';\n        this.parent = undefined;\n        this._groups = new Map();\n        this.children = new Map();\n        this.id = 'root';\n        this.parent = undefined;\n    }\n    _compact() {\n        let count = 0;\n        for (const [key, group] of this._groups) {\n            if (group.children.size === 0) { // empty\n                this._groups.delete(key);\n            }\n            else {\n                count += 1;\n            }\n        }\n        if (count !== 1) {\n            //\n            this.children = this._groups;\n        }\n        else {\n            // adopt all elements of the first group\n            const group = Iterable.first(this._groups.values());\n            for (const [, child] of group.children) {\n                child.parent = this;\n                this.children.set(child.id, child);\n            }\n        }\n        return this;\n    }\n    getTopLevelSymbols() {\n        const roots = [];\n        for (const child of this.children.values()) {\n            if (child instanceof OutlineElement) {\n                roots.push(child.symbol);\n            }\n            else {\n                roots.push(...Iterable.map(child.children.values(), child => child.symbol));\n            }\n        }\n        return roots.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n    }\n    asListOfDocumentSymbols() {\n        const roots = this.getTopLevelSymbols();\n        const bucket = [];\n        OutlineModel._flattenDocumentSymbols(bucket, roots, '');\n        return bucket.sort((a, b) => Position.compare(Range.getStartPosition(a.range), Range.getStartPosition(b.range)) || Position.compare(Range.getEndPosition(b.range), Range.getEndPosition(a.range)));\n    }\n    static _flattenDocumentSymbols(bucket, entries, overrideContainerLabel) {\n        for (const entry of entries) {\n            bucket.push({\n                kind: entry.kind,\n                tags: entry.tags,\n                name: entry.name,\n                detail: entry.detail,\n                containerName: entry.containerName || overrideContainerLabel,\n                range: entry.range,\n                selectionRange: entry.selectionRange,\n                children: undefined, // we flatten it...\n            });\n            // Recurse over children\n            if (entry.children) {\n                OutlineModel._flattenDocumentSymbols(bucket, entry.children, entry.name);\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { $, addDisposableListener, h, reset } from '../../../../base/browser/dom.js';\nimport { renderIcon, renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { compareBy, numberComparator, reverseOrder } from '../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, observableFromEvent, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { OutlineModel } from './outlineModel.js';\nimport { DisposableCancellationTokenSource, PlaceholderViewZone, ViewZoneOverlayWidget, applyObservableDecorations, applyStyle, applyViewZones } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SymbolKinds } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { localize } from '../../../../nls.js';\nlet HideUnchangedRegionsFeature = class HideUnchangedRegionsFeature extends Disposable {\n    get isUpdatingViewZones() { return this._isUpdatingViewZones; }\n    constructor(_editors, _diffModel, _options, _languageFeaturesService) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._isUpdatingViewZones = false;\n        this._modifiedOutlineSource = derivedWithStore(this, (reader, store) => {\n            const m = this._editors.modifiedModel.read(reader);\n            if (!m) {\n                return undefined;\n            }\n            return store.add(new OutlineSource(this._languageFeaturesService, m));\n        });\n        this._register(this._editors.original.onDidChangeCursorPosition(e => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                const m = this._diffModel.get();\n                transaction(tx => {\n                    for (const s of this._editors.original.getSelections() || []) {\n                        m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getStartPosition().lineNumber, tx);\n                        m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getEndPosition().lineNumber, tx);\n                    }\n                });\n            }\n        }));\n        this._register(this._editors.modified.onDidChangeCursorPosition(e => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                const m = this._diffModel.get();\n                transaction(tx => {\n                    for (const s of this._editors.modified.getSelections() || []) {\n                        m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getStartPosition().lineNumber, tx);\n                        m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getEndPosition().lineNumber, tx);\n                    }\n                });\n            }\n        }));\n        const unchangedRegions = this._diffModel.map((m, reader) => { var _a, _b; return ((_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0 ? [] : (_b = m === null || m === void 0 ? void 0 : m.unchangedRegions.read(reader)) !== null && _b !== void 0 ? _b : []; });\n        const viewZones = derivedWithStore(this, (reader, store) => {\n            /** @description view Zones */\n            const modifiedOutlineSource = this._modifiedOutlineSource.read(reader);\n            if (!modifiedOutlineSource) {\n                return { origViewZones: [], modViewZones: [] };\n            }\n            const origViewZones = [];\n            const modViewZones = [];\n            const sideBySide = this._options.renderSideBySide.read(reader);\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    continue;\n                }\n                {\n                    const d = derived(reader => /** @description hiddenOriginalRangeStart */ r.getHiddenOriginalRange(reader).startLineNumber - 1);\n                    const origVz = new PlaceholderViewZone(d, 24);\n                    origViewZones.push(origVz);\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.original, origVz, r, r.originalUnchangedRange, !sideBySide, modifiedOutlineSource, l => this._diffModel.get().ensureModifiedLineIsVisible(l, undefined), this._options));\n                }\n                {\n                    const d = derived(reader => /** @description hiddenModifiedRangeStart */ r.getHiddenModifiedRange(reader).startLineNumber - 1);\n                    const modViewZone = new PlaceholderViewZone(d, 24);\n                    modViewZones.push(modViewZone);\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.modified, modViewZone, r, r.modifiedUnchangedRange, false, modifiedOutlineSource, l => this._diffModel.get().ensureModifiedLineIsVisible(l, undefined), this._options));\n                }\n            }\n            return { origViewZones, modViewZones, };\n        });\n        const unchangedLinesDecoration = {\n            description: 'unchanged lines',\n            className: 'diff-unchanged-lines',\n            isWholeLine: true,\n        };\n        const unchangedLinesDecorationShow = {\n            description: 'Fold Unchanged',\n            glyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true })\n                .appendMarkdown(localize('foldUnchanged', 'Fold Unchanged Region')),\n            glyphMarginClassName: 'fold-unchanged ' + ThemeIcon.asClassName(Codicon.fold),\n            zIndex: 10001,\n        };\n        this._register(applyObservableDecorations(this._editors.original, derived(reader => {\n            /** @description decorations */\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            const result = curUnchangedRegions.map(r => ({\n                range: r.originalUnchangedRange.toInclusiveRange(),\n                options: unchangedLinesDecoration,\n            }));\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    result.push({\n                        range: Range.fromPositions(new Position(r.originalLineNumber, 1)),\n                        options: unchangedLinesDecorationShow,\n                    });\n                }\n            }\n            return result;\n        })));\n        this._register(applyObservableDecorations(this._editors.modified, derived(reader => {\n            /** @description decorations */\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            const result = curUnchangedRegions.map(r => ({\n                range: r.modifiedUnchangedRange.toInclusiveRange(),\n                options: unchangedLinesDecoration,\n            }));\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    result.push({\n                        range: LineRange.ofLength(r.modifiedLineNumber, 1).toInclusiveRange(),\n                        options: unchangedLinesDecorationShow,\n                    });\n                }\n            }\n            return result;\n        })));\n        this._register(applyViewZones(this._editors.original, viewZones.map(v => v.origViewZones), v => this._isUpdatingViewZones = v));\n        this._register(applyViewZones(this._editors.modified, viewZones.map(v => v.modViewZones), v => this._isUpdatingViewZones = v));\n        this._register(autorun((reader) => {\n            /** @description update folded unchanged regions */\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            this._editors.original.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenOriginalRange(reader).toInclusiveRange()).filter(isDefined));\n            this._editors.modified.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenModifiedRange(reader).toInclusiveRange()).filter(isDefined));\n        }));\n        this._register(this._editors.modified.onMouseUp(event => {\n            var _a;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const region = model.unchangedRegions.get().find(r => r.modifiedUnchangedRange.includes(lineNumber));\n                if (!region) {\n                    return;\n                }\n                region.collapseAll(undefined);\n                event.event.stopPropagation();\n                event.event.preventDefault();\n            }\n        }));\n        this._register(this._editors.original.onMouseUp(event => {\n            var _a;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const region = model.unchangedRegions.get().find(r => r.originalUnchangedRange.includes(lineNumber));\n                if (!region) {\n                    return;\n                }\n                region.collapseAll(undefined);\n                event.event.stopPropagation();\n                event.event.preventDefault();\n            }\n        }));\n    }\n};\nHideUnchangedRegionsFeature = __decorate([\n    __param(3, ILanguageFeaturesService)\n], HideUnchangedRegionsFeature);\nexport { HideUnchangedRegionsFeature };\nlet OutlineSource = class OutlineSource extends Disposable {\n    constructor(_languageFeaturesService, _textModel) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this._textModel = _textModel;\n        this._currentModel = observableValue(this, undefined);\n        const documentSymbolProviderChanged = observableSignalFromEvent('documentSymbolProvider.onDidChange', this._languageFeaturesService.documentSymbolProvider.onDidChange);\n        const textModelChanged = observableSignalFromEvent('_textModel.onDidChangeContent', Event.debounce(e => this._textModel.onDidChangeContent(e), () => undefined, 100));\n        this._register(autorunWithStore((reader, store) => __awaiter(this, void 0, void 0, function* () {\n            documentSymbolProviderChanged.read(reader);\n            textModelChanged.read(reader);\n            const src = store.add(new DisposableCancellationTokenSource());\n            const model = yield OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, this._textModel, src.token);\n            if (store.isDisposed) {\n                return;\n            }\n            this._currentModel.set(model, undefined);\n        })));\n    }\n    getBreadcrumbItems(startRange, reader) {\n        const m = this._currentModel.read(reader);\n        if (!m) {\n            return [];\n        }\n        const symbols = m.asListOfDocumentSymbols()\n            .filter(s => startRange.contains(s.range.startLineNumber) && !startRange.contains(s.range.endLineNumber));\n        symbols.sort(reverseOrder(compareBy(s => s.range.endLineNumber - s.range.startLineNumber, numberComparator)));\n        return symbols.map(s => ({ name: s.name, kind: s.kind, startLineNumber: s.range.startLineNumber }));\n    }\n};\nOutlineSource = __decorate([\n    __param(0, ILanguageFeaturesService)\n], OutlineSource);\nclass CollapsedCodeOverlayWidget extends ViewZoneOverlayWidget {\n    constructor(_editor, _viewZone, _unchangedRegion, _unchangedRegionRange, hide, _modifiedOutlineSource, _revealModifiedHiddenLine, _options) {\n        const root = h('div.diff-hidden-lines-widget');\n        super(_editor, _viewZone, root.root);\n        this._editor = _editor;\n        this._unchangedRegion = _unchangedRegion;\n        this._unchangedRegionRange = _unchangedRegionRange;\n        this.hide = hide;\n        this._modifiedOutlineSource = _modifiedOutlineSource;\n        this._revealModifiedHiddenLine = _revealModifiedHiddenLine;\n        this._options = _options;\n        this._nodes = h('div.diff-hidden-lines', [\n            h('div.top@top', { title: localize('diff.hiddenLines.top', 'Click or drag to show more above') }),\n            h('div.center@content', { style: { display: 'flex' } }, [\n                h('div@first', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center', flexShrink: '0' } }, [$('a', { title: localize('showAll', 'Show all'), role: 'button', onclick: () => { this._unchangedRegion.showAll(undefined); } }, ...renderLabelWithIcons('$(unfold)'))]),\n                h('div@others', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center' } }),\n            ]),\n            h('div.bottom@bottom', { title: localize('diff.bottom', 'Click or drag to show more below'), role: 'button' }),\n        ]);\n        root.root.appendChild(this._nodes.root);\n        const layoutInfo = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\n        if (!this.hide) {\n            this._register(applyStyle(this._nodes.first, { width: layoutInfo.map((l) => l.contentLeft) }));\n        }\n        else {\n            reset(this._nodes.first);\n        }\n        const editor = this._editor;\n        this._register(addDisposableListener(this._nodes.top, 'mousedown', e => {\n            if (e.button !== 0) {\n                return;\n            }\n            this._nodes.top.classList.toggle('dragging', true);\n            this._nodes.root.classList.toggle('dragging', true);\n            e.preventDefault();\n            const startTop = e.clientY;\n            let didMove = false;\n            const cur = this._unchangedRegion.visibleLineCountTop.get();\n            this._unchangedRegion.isDragged.set(true, undefined);\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n                const currentTop = e.clientY;\n                const delta = currentTop - startTop;\n                didMove = didMove || Math.abs(delta) > 2;\n                const lineDelta = Math.round(delta / editor.getOption(66 /* EditorOption.lineHeight */));\n                const newVal = Math.max(0, Math.min(cur + lineDelta, this._unchangedRegion.getMaxVisibleLineCountTop()));\n                this._unchangedRegion.visibleLineCountTop.set(newVal, undefined);\n            });\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n                if (!didMove) {\n                    this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\n                }\n                this._nodes.top.classList.toggle('dragging', false);\n                this._nodes.root.classList.toggle('dragging', false);\n                this._unchangedRegion.isDragged.set(false, undefined);\n                mouseMoveListener.dispose();\n                mouseUpListener.dispose();\n            });\n        }));\n        this._register(addDisposableListener(this._nodes.bottom, 'mousedown', e => {\n            if (e.button !== 0) {\n                return;\n            }\n            this._nodes.bottom.classList.toggle('dragging', true);\n            this._nodes.root.classList.toggle('dragging', true);\n            e.preventDefault();\n            const startTop = e.clientY;\n            let didMove = false;\n            const cur = this._unchangedRegion.visibleLineCountBottom.get();\n            this._unchangedRegion.isDragged.set(true, undefined);\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n                const currentTop = e.clientY;\n                const delta = currentTop - startTop;\n                didMove = didMove || Math.abs(delta) > 2;\n                const lineDelta = Math.round(delta / editor.getOption(66 /* EditorOption.lineHeight */));\n                const newVal = Math.max(0, Math.min(cur - lineDelta, this._unchangedRegion.getMaxVisibleLineCountBottom()));\n                const top = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                this._unchangedRegion.visibleLineCountBottom.set(newVal, undefined);\n                const top2 = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n            });\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n                this._unchangedRegion.isDragged.set(false, undefined);\n                if (!didMove) {\n                    const top = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                    this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\n                    const top2 = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                    editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n                }\n                this._nodes.bottom.classList.toggle('dragging', false);\n                this._nodes.root.classList.toggle('dragging', false);\n                mouseMoveListener.dispose();\n                mouseUpListener.dispose();\n            });\n        }));\n        this._register(autorun(reader => {\n            /** @description update labels */\n            const children = [];\n            if (!this.hide) {\n                const lineCount = _unchangedRegion.getHiddenModifiedRange(reader).length;\n                const linesHiddenText = localize('hiddenLines', '{0} hidden lines', lineCount);\n                const span = $('span', { title: localize('diff.hiddenLines.expandAll', 'Double click to unfold') }, linesHiddenText);\n                span.addEventListener('dblclick', e => {\n                    if (e.button !== 0) {\n                        return;\n                    }\n                    e.preventDefault();\n                    this._unchangedRegion.showAll(undefined);\n                });\n                children.push(span);\n                const range = this._unchangedRegion.getHiddenModifiedRange(reader);\n                const items = this._modifiedOutlineSource.getBreadcrumbItems(range, reader);\n                if (items.length > 0) {\n                    children.push($('span', undefined, '\\u00a0\\u00a0|\\u00a0\\u00a0'));\n                    for (let i = 0; i < items.length; i++) {\n                        const item = items[i];\n                        const icon = SymbolKinds.toIcon(item.kind);\n                        const divItem = h('div.breadcrumb-item', {\n                            style: { display: 'flex', alignItems: 'center' },\n                        }, [\n                            renderIcon(icon),\n                            '\\u00a0',\n                            item.name,\n                            ...(i === items.length - 1\n                                ? []\n                                : [renderIcon(Codicon.chevronRight)])\n                        ]).root;\n                        children.push(divItem);\n                        divItem.onclick = () => {\n                            this._revealModifiedHiddenLine(item.startLineNumber);\n                        };\n                    }\n                }\n            }\n            reset(this._nodes.others, ...children);\n        }));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar WorkerBasedDocumentDiffProvider_1;\nimport { Emitter } from '../../../../base/common/event.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { DetailedLineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nlet WorkerBasedDocumentDiffProvider = WorkerBasedDocumentDiffProvider_1 = class WorkerBasedDocumentDiffProvider {\n    constructor(options, editorWorkerService, telemetryService) {\n        this.editorWorkerService = editorWorkerService;\n        this.telemetryService = telemetryService;\n        this.onDidChangeEventEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEventEmitter.event;\n        this.diffAlgorithm = 'advanced';\n        this.diffAlgorithmOnDidChangeSubscription = undefined;\n        this.setOptions(options);\n    }\n    dispose() {\n        var _a;\n        (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    computeDiff(original, modified, options, cancellationToken) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.diffAlgorithm !== 'string') {\n                return this.diffAlgorithm.computeDiff(original, modified, options, cancellationToken);\n            }\n            // This significantly speeds up the case when the original file is empty\n            if (original.getLineCount() === 1 && original.getLineMaxColumn(1) === 1) {\n                if (modified.getLineCount() === 1 && modified.getLineMaxColumn(1) === 1) {\n                    return {\n                        changes: [],\n                        identical: true,\n                        quitEarly: false,\n                        moves: [],\n                    };\n                }\n                return {\n                    changes: [\n                        new DetailedLineRangeMapping(new LineRange(1, 2), new LineRange(1, modified.getLineCount() + 1), [\n                            new RangeMapping(original.getFullModelRange(), modified.getFullModelRange())\n                        ])\n                    ],\n                    identical: false,\n                    quitEarly: false,\n                    moves: [],\n                };\n            }\n            const uriKey = JSON.stringify([original.uri.toString(), modified.uri.toString()]);\n            const context = JSON.stringify([original.id, modified.id, original.getAlternativeVersionId(), modified.getAlternativeVersionId(), JSON.stringify(options)]);\n            const c = WorkerBasedDocumentDiffProvider_1.diffCache.get(uriKey);\n            if (c && c.context === context) {\n                return c.result;\n            }\n            const sw = StopWatch.create();\n            const result = yield this.editorWorkerService.computeDiff(original.uri, modified.uri, options, this.diffAlgorithm);\n            const timeMs = sw.elapsed();\n            this.telemetryService.publicLog2('diffEditor.computeDiff', {\n                timeMs,\n                timedOut: (_a = result === null || result === void 0 ? void 0 : result.quitEarly) !== null && _a !== void 0 ? _a : true,\n                detectedMoves: options.computeMoves ? ((_b = result === null || result === void 0 ? void 0 : result.moves.length) !== null && _b !== void 0 ? _b : 0) : -1,\n            });\n            if (cancellationToken.isCancellationRequested) {\n                // Text models might be disposed!\n                return {\n                    changes: [],\n                    identical: false,\n                    quitEarly: true,\n                    moves: [],\n                };\n            }\n            if (!result) {\n                throw new Error('no diff result available');\n            }\n            // max 10 items in cache\n            if (WorkerBasedDocumentDiffProvider_1.diffCache.size > 10) {\n                WorkerBasedDocumentDiffProvider_1.diffCache.delete(WorkerBasedDocumentDiffProvider_1.diffCache.keys().next().value);\n            }\n            WorkerBasedDocumentDiffProvider_1.diffCache.set(uriKey, { result, context });\n            return result;\n        });\n    }\n    setOptions(newOptions) {\n        var _a;\n        let didChange = false;\n        if (newOptions.diffAlgorithm) {\n            if (this.diffAlgorithm !== newOptions.diffAlgorithm) {\n                (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\n                this.diffAlgorithmOnDidChangeSubscription = undefined;\n                this.diffAlgorithm = newOptions.diffAlgorithm;\n                if (typeof newOptions.diffAlgorithm !== 'string') {\n                    this.diffAlgorithmOnDidChangeSubscription = newOptions.diffAlgorithm.onDidChange(() => this.onDidChangeEventEmitter.fire());\n                }\n                didChange = true;\n            }\n        }\n        if (didChange) {\n            this.onDidChangeEventEmitter.fire();\n        }\n    }\n};\nWorkerBasedDocumentDiffProvider.diffCache = new Map();\nWorkerBasedDocumentDiffProvider = WorkerBasedDocumentDiffProvider_1 = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, ITelemetryService)\n], WorkerBasedDocumentDiffProvider);\nexport { WorkerBasedDocumentDiffProvider };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { WorkerBasedDocumentDiffProvider } from './workerBasedDocumentDiffProvider.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IInstantiationService, createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nexport const IDiffProviderFactoryService = createDecorator('diffProviderFactoryService');\nlet DiffProviderFactoryService = class DiffProviderFactoryService {\n    constructor(instantiationService) {\n        this.instantiationService = instantiationService;\n    }\n    createDiffProvider(editor, options) {\n        return this.instantiationService.createInstance(WorkerBasedDocumentDiffProvider, options);\n    }\n};\nDiffProviderFactoryService = __decorate([\n    __param(0, IInstantiationService)\n], DiffProviderFactoryService);\nexport { DiffProviderFactoryService };\nregisterSingleton(IDiffProviderFactoryService, DiffProviderFactoryService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorunWithStore, derived, observableSignal, observableSignalFromEvent, observableValue, transaction, waitForState } from '../../../../base/common/observable.js';\nimport { IDiffProviderFactoryService } from './diffProviderFactoryService.js';\nimport { readHotReloadableExport } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { DefaultLinesDiffComputer } from '../../../common/diff/defaultLinesDiffComputer/defaultLinesDiffComputer.js';\nimport { DetailedLineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { TextEditInfo } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/beforeEditPositionMapper.js';\nimport { combineTextEditInfos } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/combineTextEditInfos.js';\nimport { optimizeSequenceDiffs } from '../../../common/diff/defaultLinesDiffComputer/heuristicSequenceOptimizations.js';\nlet DiffEditorViewModel = class DiffEditorViewModel extends Disposable {\n    setActiveMovedText(movedText) {\n        this._activeMovedText.set(movedText, undefined);\n    }\n    constructor(model, _options, _editor, _diffProviderFactoryService) {\n        super();\n        this.model = model;\n        this._options = _options;\n        this._editor = _editor;\n        this._diffProviderFactoryService = _diffProviderFactoryService;\n        this._isDiffUpToDate = observableValue(this, false);\n        this.isDiffUpToDate = this._isDiffUpToDate;\n        this._diff = observableValue(this, undefined);\n        this.diff = this._diff;\n        this._unchangedRegions = observableValue(this, { regions: [], originalDecorationIds: [], modifiedDecorationIds: [] });\n        this.unchangedRegions = derived(this, r => {\n            if (this._options.hideUnchangedRegions.read(r)) {\n                return this._unchangedRegions.read(r).regions;\n            }\n            else {\n                // Reset state\n                transaction(tx => {\n                    for (const r of this._unchangedRegions.get().regions) {\n                        r.collapseAll(tx);\n                    }\n                });\n                return [];\n            }\n        });\n        this.movedTextToCompare = observableValue(this, undefined);\n        this._activeMovedText = observableValue(this, undefined);\n        this._hoveredMovedText = observableValue(this, undefined);\n        this.activeMovedText = derived(this, r => { var _a, _b; return (_b = (_a = this.movedTextToCompare.read(r)) !== null && _a !== void 0 ? _a : this._hoveredMovedText.read(r)) !== null && _b !== void 0 ? _b : this._activeMovedText.read(r); });\n        this._cancellationTokenSource = new CancellationTokenSource();\n        this._diffProvider = derived(this, reader => {\n            const diffProvider = this._diffProviderFactoryService.createDiffProvider(this._editor, {\n                diffAlgorithm: this._options.diffAlgorithm.read(reader)\n            });\n            const onChangeSignal = observableSignalFromEvent('onDidChange', diffProvider.onDidChange);\n            return {\n                diffProvider,\n                onChangeSignal,\n            };\n        });\n        this._register(toDisposable(() => this._cancellationTokenSource.cancel()));\n        const contentChangedSignal = observableSignal('contentChangedSignal');\n        const debouncer = this._register(new RunOnceScheduler(() => contentChangedSignal.trigger(undefined), 200));\n        const updateUnchangedRegions = (result, tx, reader) => {\n            const newUnchangedRegions = UnchangedRegion.fromDiffs(result.changes, model.original.getLineCount(), model.modified.getLineCount(), this._options.hideUnchangedRegionsMinimumLineCount.read(reader), this._options.hideUnchangedRegionsContextLineCount.read(reader));\n            // Transfer state from cur state\n            const lastUnchangedRegions = this._unchangedRegions.get();\n            const lastUnchangedRegionsOrigRanges = lastUnchangedRegions.originalDecorationIds\n                .map(id => model.original.getDecorationRange(id))\n                .filter(r => !!r)\n                .map(r => LineRange.fromRange(r));\n            const lastUnchangedRegionsModRanges = lastUnchangedRegions.modifiedDecorationIds\n                .map(id => model.modified.getDecorationRange(id))\n                .filter(r => !!r)\n                .map(r => LineRange.fromRange(r));\n            const originalDecorationIds = model.original.deltaDecorations(lastUnchangedRegions.originalDecorationIds, newUnchangedRegions.map(r => ({ range: r.originalUnchangedRange.toInclusiveRange(), options: { description: 'unchanged' } })));\n            const modifiedDecorationIds = model.modified.deltaDecorations(lastUnchangedRegions.modifiedDecorationIds, newUnchangedRegions.map(r => ({ range: r.modifiedUnchangedRange.toInclusiveRange(), options: { description: 'unchanged' } })));\n            for (const r of newUnchangedRegions) {\n                for (let i = 0; i < lastUnchangedRegions.regions.length; i++) {\n                    if (r.originalUnchangedRange.intersectsStrict(lastUnchangedRegionsOrigRanges[i])\n                        && r.modifiedUnchangedRange.intersectsStrict(lastUnchangedRegionsModRanges[i])) {\n                        r.setHiddenModifiedRange(lastUnchangedRegions.regions[i].getHiddenModifiedRange(undefined), tx);\n                        break;\n                    }\n                }\n            }\n            this._unchangedRegions.set({\n                regions: newUnchangedRegions,\n                originalDecorationIds,\n                modifiedDecorationIds\n            }, tx);\n        };\n        this._register(model.modified.onDidChangeContent((e) => {\n            const diff = this._diff.get();\n            if (diff) {\n                const textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n                const result = applyModifiedEdits(this._lastDiff, textEdits, model.original, model.modified);\n                if (result) {\n                    this._lastDiff = result;\n                    transaction(tx => {\n                        this._diff.set(DiffState.fromDiffResult(this._lastDiff), tx);\n                        updateUnchangedRegions(result, tx);\n                        const currentSyncedMovedText = this.movedTextToCompare.get();\n                        this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n                    });\n                }\n            }\n            debouncer.schedule();\n        }));\n        this._register(model.original.onDidChangeContent((e) => {\n            const diff = this._diff.get();\n            if (diff) {\n                const textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n                const result = applyOriginalEdits(this._lastDiff, textEdits, model.original, model.modified);\n                if (result) {\n                    this._lastDiff = result;\n                    transaction(tx => {\n                        this._diff.set(DiffState.fromDiffResult(this._lastDiff), tx);\n                        updateUnchangedRegions(result, tx);\n                        const currentSyncedMovedText = this.movedTextToCompare.get();\n                        this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n                    });\n                }\n            }\n            debouncer.schedule();\n        }));\n        this._register(autorunWithStore((reader, store) => __awaiter(this, void 0, void 0, function* () {\n            /** @description compute diff */\n            var _a, _b;\n            // So that they get recomputed when these settings change\n            this._options.hideUnchangedRegionsMinimumLineCount.read(reader);\n            this._options.hideUnchangedRegionsContextLineCount.read(reader);\n            debouncer.cancel();\n            contentChangedSignal.read(reader);\n            const documentDiffProvider = this._diffProvider.read(reader);\n            documentDiffProvider.onChangeSignal.read(reader);\n            readHotReloadableExport(DefaultLinesDiffComputer, reader);\n            readHotReloadableExport(optimizeSequenceDiffs, reader);\n            this._isDiffUpToDate.set(false, undefined);\n            let originalTextEditInfos = [];\n            store.add(model.original.onDidChangeContent((e) => {\n                const edits = TextEditInfo.fromModelContentChanges(e.changes);\n                originalTextEditInfos = combineTextEditInfos(originalTextEditInfos, edits);\n            }));\n            let modifiedTextEditInfos = [];\n            store.add(model.modified.onDidChangeContent((e) => {\n                const edits = TextEditInfo.fromModelContentChanges(e.changes);\n                modifiedTextEditInfos = combineTextEditInfos(modifiedTextEditInfos, edits);\n            }));\n            let result = yield documentDiffProvider.diffProvider.computeDiff(model.original, model.modified, {\n                ignoreTrimWhitespace: this._options.ignoreTrimWhitespace.read(reader),\n                maxComputationTimeMs: this._options.maxComputationTimeMs.read(reader),\n                computeMoves: this._options.showMoves.read(reader),\n            }, this._cancellationTokenSource.token);\n            if (this._cancellationTokenSource.token.isCancellationRequested) {\n                return;\n            }\n            result = normalizeDocumentDiff(result, model.original, model.modified);\n            result = (_a = applyOriginalEdits(result, originalTextEditInfos, model.original, model.modified)) !== null && _a !== void 0 ? _a : result;\n            result = (_b = applyModifiedEdits(result, modifiedTextEditInfos, model.original, model.modified)) !== null && _b !== void 0 ? _b : result;\n            transaction(tx => {\n                updateUnchangedRegions(result, tx);\n                this._lastDiff = result;\n                const state = DiffState.fromDiffResult(result);\n                this._diff.set(state, tx);\n                this._isDiffUpToDate.set(true, tx);\n                const currentSyncedMovedText = this.movedTextToCompare.get();\n                this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n            });\n        })));\n    }\n    ensureModifiedLineIsVisible(lineNumber, tx) {\n        var _a;\n        if (((_a = this.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0) {\n            return;\n        }\n        const unchangedRegions = this._unchangedRegions.get().regions;\n        for (const r of unchangedRegions) {\n            if (r.getHiddenModifiedRange(undefined).contains(lineNumber)) {\n                r.showModifiedLine(lineNumber, tx);\n                return;\n            }\n        }\n    }\n    ensureOriginalLineIsVisible(lineNumber, tx) {\n        var _a;\n        if (((_a = this.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0) {\n            return;\n        }\n        const unchangedRegions = this._unchangedRegions.get().regions;\n        for (const r of unchangedRegions) {\n            if (r.getHiddenOriginalRange(undefined).contains(lineNumber)) {\n                r.showOriginalLine(lineNumber, tx);\n                return;\n            }\n        }\n    }\n    waitForDiff() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield waitForState(this.isDiffUpToDate, s => s);\n        });\n    }\n    serializeState() {\n        const regions = this._unchangedRegions.get();\n        return {\n            collapsedRegions: regions.regions.map(r => ({ range: r.getHiddenModifiedRange(undefined).serialize() }))\n        };\n    }\n    restoreSerializedState(state) {\n        const ranges = state.collapsedRegions.map(r => LineRange.deserialize(r.range));\n        const regions = this._unchangedRegions.get();\n        transaction(tx => {\n            for (const r of regions.regions) {\n                for (const range of ranges) {\n                    if (r.modifiedUnchangedRange.intersect(range)) {\n                        r.setHiddenModifiedRange(range, tx);\n                        break;\n                    }\n                }\n            }\n        });\n    }\n};\nDiffEditorViewModel = __decorate([\n    __param(3, IDiffProviderFactoryService)\n], DiffEditorViewModel);\nexport { DiffEditorViewModel };\nfunction normalizeDocumentDiff(diff, original, modified) {\n    return {\n        changes: diff.changes.map(c => new DetailedLineRangeMapping(c.original, c.modified, c.innerChanges ? c.innerChanges.map(i => normalizeRangeMapping(i, original, modified)) : undefined)),\n        moves: diff.moves,\n        identical: diff.identical,\n        quitEarly: diff.quitEarly,\n    };\n}\nfunction normalizeRangeMapping(rangeMapping, original, modified) {\n    let originalRange = rangeMapping.originalRange;\n    let modifiedRange = rangeMapping.modifiedRange;\n    if ((originalRange.endColumn !== 1 || modifiedRange.endColumn !== 1) &&\n        originalRange.endColumn === original.getLineMaxColumn(originalRange.endLineNumber)\n        && modifiedRange.endColumn === modified.getLineMaxColumn(modifiedRange.endLineNumber)\n        && originalRange.endLineNumber < original.getLineCount()\n        && modifiedRange.endLineNumber < modified.getLineCount()) {\n        originalRange = originalRange.setEndPosition(originalRange.endLineNumber + 1, 1);\n        modifiedRange = modifiedRange.setEndPosition(modifiedRange.endLineNumber + 1, 1);\n    }\n    return new RangeMapping(originalRange, modifiedRange);\n}\nexport class DiffState {\n    static fromDiffResult(result) {\n        return new DiffState(result.changes.map(c => new DiffMapping(c)), result.moves || [], result.identical, result.quitEarly);\n    }\n    constructor(mappings, movedTexts, identical, quitEarly) {\n        this.mappings = mappings;\n        this.movedTexts = movedTexts;\n        this.identical = identical;\n        this.quitEarly = quitEarly;\n    }\n}\nexport class DiffMapping {\n    constructor(lineRangeMapping) {\n        this.lineRangeMapping = lineRangeMapping;\n        /*\n        readonly movedTo: MovedText | undefined,\n        readonly movedFrom: MovedText | undefined,\n\n        if (movedTo) {\n            assertFn(() =>\n                movedTo.lineRangeMapping.modifiedRange.equals(lineRangeMapping.modifiedRange)\n                && lineRangeMapping.originalRange.isEmpty\n                && !movedFrom\n            );\n        } else if (movedFrom) {\n            assertFn(() =>\n                movedFrom.lineRangeMapping.originalRange.equals(lineRangeMapping.originalRange)\n                && lineRangeMapping.modifiedRange.isEmpty\n                && !movedTo\n            );\n        }\n        */\n    }\n}\nexport class UnchangedRegion {\n    static fromDiffs(changes, originalLineCount, modifiedLineCount, minHiddenLineCount, minContext) {\n        const inversedMappings = DetailedLineRangeMapping.inverse(changes, originalLineCount, modifiedLineCount);\n        const result = [];\n        for (const mapping of inversedMappings) {\n            let origStart = mapping.original.startLineNumber;\n            let modStart = mapping.modified.startLineNumber;\n            let length = mapping.original.length;\n            const atStart = origStart === 1 && modStart === 1;\n            const atEnd = origStart + length === originalLineCount + 1 && modStart + length === modifiedLineCount + 1;\n            if ((atStart || atEnd) && length >= minContext + minHiddenLineCount) {\n                if (atStart && !atEnd) {\n                    length -= minContext;\n                }\n                if (atEnd && !atStart) {\n                    origStart += minContext;\n                    modStart += minContext;\n                    length -= minContext;\n                }\n                result.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n            }\n            else if (length >= minContext * 2 + minHiddenLineCount) {\n                origStart += minContext;\n                modStart += minContext;\n                length -= minContext * 2;\n                result.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n            }\n        }\n        return result;\n    }\n    get originalUnchangedRange() {\n        return LineRange.ofLength(this.originalLineNumber, this.lineCount);\n    }\n    get modifiedUnchangedRange() {\n        return LineRange.ofLength(this.modifiedLineNumber, this.lineCount);\n    }\n    constructor(originalLineNumber, modifiedLineNumber, lineCount, visibleLineCountTop, visibleLineCountBottom) {\n        this.originalLineNumber = originalLineNumber;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.lineCount = lineCount;\n        this._visibleLineCountTop = observableValue(this, 0);\n        this.visibleLineCountTop = this._visibleLineCountTop;\n        this._visibleLineCountBottom = observableValue(this, 0);\n        this.visibleLineCountBottom = this._visibleLineCountBottom;\n        this._shouldHideControls = derived(this, reader => /** @description isVisible */ this.visibleLineCountTop.read(reader) + this.visibleLineCountBottom.read(reader) === this.lineCount && !this.isDragged.read(reader));\n        this.isDragged = observableValue(this, false);\n        this._visibleLineCountTop.set(visibleLineCountTop, undefined);\n        this._visibleLineCountBottom.set(visibleLineCountBottom, undefined);\n    }\n    shouldHideControls(reader) {\n        return this._shouldHideControls.read(reader);\n    }\n    getHiddenOriginalRange(reader) {\n        return LineRange.ofLength(this.originalLineNumber + this._visibleLineCountTop.read(reader), this.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader));\n    }\n    getHiddenModifiedRange(reader) {\n        return LineRange.ofLength(this.modifiedLineNumber + this._visibleLineCountTop.read(reader), this.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader));\n    }\n    setHiddenModifiedRange(range, tx) {\n        const visibleLineCountTop = range.startLineNumber - this.modifiedLineNumber;\n        const visibleLineCountBottom = (this.modifiedLineNumber + this.lineCount) - range.endLineNumberExclusive;\n        this.setState(visibleLineCountTop, visibleLineCountBottom, tx);\n    }\n    getMaxVisibleLineCountTop() {\n        return this.lineCount - this._visibleLineCountBottom.get();\n    }\n    getMaxVisibleLineCountBottom() {\n        return this.lineCount - this._visibleLineCountTop.get();\n    }\n    showMoreAbove(count = 10, tx) {\n        const maxVisibleLineCountTop = this.getMaxVisibleLineCountTop();\n        this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + count, maxVisibleLineCountTop), tx);\n    }\n    showMoreBelow(count = 10, tx) {\n        const maxVisibleLineCountBottom = this.lineCount - this._visibleLineCountTop.get();\n        this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + count, maxVisibleLineCountBottom), tx);\n    }\n    showAll(tx) {\n        this._visibleLineCountBottom.set(this.lineCount - this._visibleLineCountTop.get(), tx);\n    }\n    showModifiedLine(lineNumber, tx) {\n        const top = lineNumber + 1 - (this.modifiedLineNumber + this._visibleLineCountTop.get());\n        const bottom = (this.modifiedLineNumber - this._visibleLineCountBottom.get() + this.lineCount) - lineNumber;\n        if (top < bottom) {\n            this._visibleLineCountTop.set(this._visibleLineCountTop.get() + top, tx);\n        }\n        else {\n            this._visibleLineCountBottom.set(this._visibleLineCountBottom.get() + bottom, tx);\n        }\n    }\n    showOriginalLine(lineNumber, tx) {\n        const top = lineNumber - this.originalLineNumber;\n        const bottom = (this.originalLineNumber + this.lineCount) - lineNumber;\n        if (top < bottom) {\n            this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + bottom - top, this.getMaxVisibleLineCountTop()), tx);\n        }\n        else {\n            this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + top - bottom, this.getMaxVisibleLineCountBottom()), tx);\n        }\n    }\n    collapseAll(tx) {\n        this._visibleLineCountTop.set(0, tx);\n        this._visibleLineCountBottom.set(0, tx);\n    }\n    setState(visibleLineCountTop, visibleLineCountBottom, tx) {\n        visibleLineCountTop = Math.max(Math.min(visibleLineCountTop, this.lineCount), 0);\n        visibleLineCountBottom = Math.max(Math.min(visibleLineCountBottom, this.lineCount - visibleLineCountTop), 0);\n        this._visibleLineCountTop.set(visibleLineCountTop, tx);\n        this._visibleLineCountBottom.set(visibleLineCountBottom, tx);\n    }\n}\nfunction applyOriginalEdits(diff, textEdits, originalTextModel, modifiedTextModel) {\n    return undefined;\n    /*\n    TODO@hediet\n    if (textEdits.length === 0) {\n        return diff;\n    }\n\n    const diff2 = flip(diff);\n    const diff3 = applyModifiedEdits(diff2, textEdits, modifiedTextModel, originalTextModel);\n    if (!diff3) {\n        return undefined;\n    }\n    return flip(diff3);*/\n}\n/*\nfunction flip(diff: IDocumentDiff): IDocumentDiff {\n    return {\n        changes: diff.changes.map(c => c.flip()),\n        moves: diff.moves.map(m => m.flip()),\n        identical: diff.identical,\n        quitEarly: diff.quitEarly,\n    };\n}\n*/\nfunction applyModifiedEdits(diff, textEdits, originalTextModel, modifiedTextModel) {\n    return undefined;\n    /*\n    TODO@hediet\n    if (textEdits.length === 0) {\n        return diff;\n    }\n    if (diff.changes.some(c => !c.innerChanges) || diff.moves.length > 0) {\n        // TODO support these cases\n        return undefined;\n    }\n\n    const changes = applyModifiedEditsToLineRangeMappings(diff.changes, textEdits, originalTextModel, modifiedTextModel);\n\n    const moves = diff.moves.map(m => {\n        const newModifiedRange = applyEditToLineRange(m.lineRangeMapping.modified, textEdits);\n        return newModifiedRange ? new MovedText(\n            new SimpleLineRangeMapping(m.lineRangeMapping.original, newModifiedRange),\n            applyModifiedEditsToLineRangeMappings(m.changes, textEdits, originalTextModel, modifiedTextModel),\n        ) : undefined;\n    }).filter(isDefined);\n\n    return {\n        identical: false,\n        quitEarly: false,\n        changes,\n        moves,\n    };*/\n}\n/*\nfunction applyEditToLineRange(range: LineRange, textEdits: TextEditInfo[]): LineRange | undefined {\n    let rangeStartLineNumber = range.startLineNumber;\n    let rangeEndLineNumberEx = range.endLineNumberExclusive;\n\n    for (let i = textEdits.length - 1; i >= 0; i--) {\n        const textEdit = textEdits[i];\n        const textEditStartLineNumber = lengthGetLineCount(textEdit.startOffset) + 1;\n        const textEditEndLineNumber = lengthGetLineCount(textEdit.endOffset) + 1;\n        const newLengthLineCount = lengthGetLineCount(textEdit.newLength);\n        const delta = newLengthLineCount - (textEditEndLineNumber - textEditStartLineNumber);\n\n        if (textEditEndLineNumber < rangeStartLineNumber) {\n            // the text edit is before us\n            rangeStartLineNumber += delta;\n            rangeEndLineNumberEx += delta;\n        } else if (textEditStartLineNumber > rangeEndLineNumberEx) {\n            // the text edit is after us\n            // NOOP\n        } else if (textEditStartLineNumber < rangeStartLineNumber && rangeEndLineNumberEx < textEditEndLineNumber) {\n            // the range is fully contained in the text edit\n            return undefined;\n        } else if (textEditStartLineNumber < rangeStartLineNumber && textEditEndLineNumber <= rangeEndLineNumberEx) {\n            // the text edit ends inside our range\n            rangeStartLineNumber = textEditEndLineNumber + 1;\n            rangeStartLineNumber += delta;\n            rangeEndLineNumberEx += delta;\n        } else if (rangeStartLineNumber <= textEditStartLineNumber && textEditEndLineNumber < rangeStartLineNumber) {\n            // the text edit starts inside our range\n            rangeEndLineNumberEx = textEditStartLineNumber;\n        } else {\n            rangeEndLineNumberEx += delta;\n        }\n    }\n\n    return new LineRange(rangeStartLineNumber, rangeEndLineNumberEx);\n}\n\nfunction applyModifiedEditsToLineRangeMappings(changes: readonly LineRangeMapping[], textEdits: TextEditInfo[], originalTextModel: ITextModel, modifiedTextModel: ITextModel): LineRangeMapping[] {\n    const diffTextEdits = changes.flatMap(c => c.innerChanges!.map(c => new TextEditInfo(\n        positionToLength(c.originalRange.getStartPosition()),\n        positionToLength(c.originalRange.getEndPosition()),\n        lengthOfRange(c.modifiedRange).toLength(),\n    )));\n\n    const combined = combineTextEditInfos(diffTextEdits, textEdits);\n\n    let lastOriginalEndOffset = lengthZero;\n    let lastModifiedEndOffset = lengthZero;\n    const rangeMappings = combined.map(c => {\n        const modifiedStartOffset = lengthAdd(lastModifiedEndOffset, lengthDiffNonNegative(lastOriginalEndOffset, c.startOffset));\n        lastOriginalEndOffset = c.endOffset;\n        lastModifiedEndOffset = lengthAdd(modifiedStartOffset, c.newLength);\n\n        return new RangeMapping(\n            Range.fromPositions(lengthToPosition(c.startOffset), lengthToPosition(c.endOffset)),\n            Range.fromPositions(lengthToPosition(modifiedStartOffset), lengthToPosition(lastModifiedEndOffset)),\n        );\n    });\n\n    const newChanges = lineRangeMappingFromRangeMappings(\n        rangeMappings,\n        originalTextModel.getLinesContent(),\n        modifiedTextModel.getLinesContent(),\n    );\n    return newChanges;\n}\n*/\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { addStandardDisposableListener, getDomNodePagePosition } from '../../../../base/browser/dom.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { localize } from '../../../../nls.js';\nexport class InlineDiffDeletedCodeMargin extends Disposable {\n    get visibility() {\n        return this._visibility;\n    }\n    set visibility(_visibility) {\n        if (this._visibility !== _visibility) {\n            this._visibility = _visibility;\n            this._diffActions.style.visibility = _visibility ? 'visible' : 'hidden';\n        }\n    }\n    constructor(_getViewZoneId, _marginDomNode, _modifiedEditor, _diff, _editor, _viewLineCounts, _originalTextModel, _contextMenuService, _clipboardService) {\n        super();\n        this._getViewZoneId = _getViewZoneId;\n        this._marginDomNode = _marginDomNode;\n        this._modifiedEditor = _modifiedEditor;\n        this._diff = _diff;\n        this._editor = _editor;\n        this._viewLineCounts = _viewLineCounts;\n        this._originalTextModel = _originalTextModel;\n        this._contextMenuService = _contextMenuService;\n        this._clipboardService = _clipboardService;\n        this._visibility = false;\n        // make sure the diff margin shows above overlay.\n        this._marginDomNode.style.zIndex = '10';\n        this._diffActions = document.createElement('div');\n        this._diffActions.className = ThemeIcon.asClassName(Codicon.lightBulb) + ' lightbulb-glyph';\n        this._diffActions.style.position = 'absolute';\n        const lineHeight = this._modifiedEditor.getOption(66 /* EditorOption.lineHeight */);\n        this._diffActions.style.right = '0px';\n        this._diffActions.style.visibility = 'hidden';\n        this._diffActions.style.height = `${lineHeight}px`;\n        this._diffActions.style.lineHeight = `${lineHeight}px`;\n        this._marginDomNode.appendChild(this._diffActions);\n        let currentLineNumberOffset = 0;\n        const useShadowDOM = _modifiedEditor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        const showContextMenu = (x, y) => {\n            var _a;\n            this._contextMenuService.showContextMenu({\n                domForShadowRoot: useShadowDOM ? (_a = _modifiedEditor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n                getAnchor: () => ({ x, y }),\n                getActions: () => {\n                    const actions = [];\n                    const isDeletion = _diff.modified.isEmpty;\n                    // default action\n                    actions.push(new Action('diff.clipboard.copyDeletedContent', isDeletion\n                        ? (_diff.original.length > 1\n                            ? localize('diff.clipboard.copyDeletedLinesContent.label', \"Copy deleted lines\")\n                            : localize('diff.clipboard.copyDeletedLinesContent.single.label', \"Copy deleted line\"))\n                        : (_diff.original.length > 1\n                            ? localize('diff.clipboard.copyChangedLinesContent.label', \"Copy changed lines\")\n                            : localize('diff.clipboard.copyChangedLinesContent.single.label', \"Copy changed line\")), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                        const originalText = this._originalTextModel.getValueInRange(_diff.original.toExclusiveRange());\n                        yield this._clipboardService.writeText(originalText);\n                    })));\n                    if (_diff.original.length > 1) {\n                        actions.push(new Action('diff.clipboard.copyDeletedLineContent', isDeletion\n                            ? localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", _diff.original.startLineNumber + currentLineNumberOffset)\n                            : localize('diff.clipboard.copyChangedLineContent.label', \"Copy changed line ({0})\", _diff.original.startLineNumber + currentLineNumberOffset), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                            let lineContent = this._originalTextModel.getLineContent(_diff.original.startLineNumber + currentLineNumberOffset);\n                            if (lineContent === '') {\n                                // empty line -> new line\n                                const eof = this._originalTextModel.getEndOfLineSequence();\n                                lineContent = eof === 0 /* EndOfLineSequence.LF */ ? '\\n' : '\\r\\n';\n                            }\n                            yield this._clipboardService.writeText(lineContent);\n                        })));\n                    }\n                    const readOnly = _modifiedEditor.getOption(90 /* EditorOption.readOnly */);\n                    if (!readOnly) {\n                        actions.push(new Action('diff.inline.revertChange', localize('diff.inline.revertChange.label', \"Revert this change\"), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                            this._editor.revert(this._diff);\n                        })));\n                    }\n                    return actions;\n                },\n                autoSelectFirstItem: true\n            });\n        };\n        this._register(addStandardDisposableListener(this._diffActions, 'mousedown', e => {\n            const { top, height } = getDomNodePagePosition(this._diffActions);\n            const pad = Math.floor(lineHeight / 3);\n            e.preventDefault();\n            showContextMenu(e.posx, top + height + pad);\n        }));\n        this._register(_modifiedEditor.onMouseMove((e) => {\n            if ((e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) && e.target.detail.viewZoneId === this._getViewZoneId()) {\n                currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                this.visibility = true;\n            }\n            else {\n                this.visibility = false;\n            }\n        }));\n        this._register(_modifiedEditor.onMouseDown((e) => {\n            if (!e.event.rightButton) {\n                return;\n            }\n            if (e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n                const viewZoneId = e.target.detail.viewZoneId;\n                if (viewZoneId === this._getViewZoneId()) {\n                    e.event.preventDefault();\n                    currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                    showContextMenu(e.event.posx, e.event.posy + lineHeight);\n                }\n            }\n        }));\n    }\n    _updateLightBulbPosition(marginDomNode, y, lineHeight) {\n        const { top } = getDomNodePagePosition(marginDomNode);\n        const offset = y - top;\n        const lineNumberOffset = Math.floor(offset / lineHeight);\n        const newTop = lineNumberOffset * lineHeight;\n        this._diffActions.style.top = `${newTop}px`;\n        if (this._viewLineCounts) {\n            let acc = 0;\n            for (let i = 0; i < this._viewLineCounts.length; i++) {\n                acc += this._viewLineCounts[i];\n                if (lineNumberOffset < acc) {\n                    return i;\n                }\n            }\n        }\n        return lineNumberOffset;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../common/viewModel.js';\nconst ttPolicy = createTrustedTypesPolicy('diffEditorWidget', { createHTML: value => value });\nexport function renderLines(source, options, decorations, domNode) {\n    applyFontInfo(domNode, options.fontInfo);\n    const hasCharChanges = (decorations.length > 0);\n    const sb = new StringBuilder(10000);\n    let maxCharsPerLine = 0;\n    let renderedLineCount = 0;\n    const viewLineCounts = [];\n    for (let lineIndex = 0; lineIndex < source.lineTokens.length; lineIndex++) {\n        const lineNumber = lineIndex + 1;\n        const lineTokens = source.lineTokens[lineIndex];\n        const lineBreakData = source.lineBreakData[lineIndex];\n        const actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, Number.MAX_SAFE_INTEGER);\n        if (lineBreakData) {\n            let lastBreakOffset = 0;\n            for (const breakOffset of lineBreakData.breakOffsets) {\n                const viewLineTokens = lineTokens.sliceAndInflate(lastBreakOffset, breakOffset, 0);\n                maxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(renderedLineCount, viewLineTokens, LineDecoration.extractWrapped(actualDecorations, lastBreakOffset, breakOffset), hasCharChanges, source.mightContainNonBasicASCII, source.mightContainRTL, options, sb));\n                renderedLineCount++;\n                lastBreakOffset = breakOffset;\n            }\n            viewLineCounts.push(lineBreakData.breakOffsets.length);\n        }\n        else {\n            viewLineCounts.push(1);\n            maxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(renderedLineCount, lineTokens, actualDecorations, hasCharChanges, source.mightContainNonBasicASCII, source.mightContainRTL, options, sb));\n            renderedLineCount++;\n        }\n    }\n    maxCharsPerLine += options.scrollBeyondLastColumn;\n    const html = sb.build();\n    const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n    domNode.innerHTML = trustedhtml;\n    const minWidthInPx = (maxCharsPerLine * options.typicalHalfwidthCharacterWidth);\n    return {\n        heightInLines: renderedLineCount,\n        minWidthInPx,\n        viewLineCounts,\n    };\n}\nexport class LineSource {\n    constructor(lineTokens, lineBreakData, mightContainNonBasicASCII, mightContainRTL) {\n        this.lineTokens = lineTokens;\n        this.lineBreakData = lineBreakData;\n        this.mightContainNonBasicASCII = mightContainNonBasicASCII;\n        this.mightContainRTL = mightContainRTL;\n    }\n}\nexport class RenderOptions {\n    static fromEditor(editor) {\n        var _a;\n        const modifiedEditorOptions = editor.getOptions();\n        const fontInfo = modifiedEditorOptions.get(50 /* EditorOption.fontInfo */);\n        const layoutInfo = modifiedEditorOptions.get(143 /* EditorOption.layoutInfo */);\n        return new RenderOptions(((_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.getOptions().tabSize) || 0, fontInfo, modifiedEditorOptions.get(33 /* EditorOption.disableMonospaceOptimizations */), fontInfo.typicalHalfwidthCharacterWidth, modifiedEditorOptions.get(103 /* EditorOption.scrollBeyondLastColumn */), modifiedEditorOptions.get(66 /* EditorOption.lineHeight */), layoutInfo.decorationsWidth, modifiedEditorOptions.get(116 /* EditorOption.stopRenderingLineAfter */), modifiedEditorOptions.get(98 /* EditorOption.renderWhitespace */), modifiedEditorOptions.get(93 /* EditorOption.renderControlCharacters */), modifiedEditorOptions.get(51 /* EditorOption.fontLigatures */));\n    }\n    constructor(tabSize, fontInfo, disableMonospaceOptimizations, typicalHalfwidthCharacterWidth, scrollBeyondLastColumn, lineHeight, lineDecorationsWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures) {\n        this.tabSize = tabSize;\n        this.fontInfo = fontInfo;\n        this.disableMonospaceOptimizations = disableMonospaceOptimizations;\n        this.typicalHalfwidthCharacterWidth = typicalHalfwidthCharacterWidth;\n        this.scrollBeyondLastColumn = scrollBeyondLastColumn;\n        this.lineHeight = lineHeight;\n        this.lineDecorationsWidth = lineDecorationsWidth;\n        this.stopRenderingLineAfter = stopRenderingLineAfter;\n        this.renderWhitespace = renderWhitespace;\n        this.renderControlCharacters = renderControlCharacters;\n        this.fontLigatures = fontLigatures;\n    }\n}\nfunction renderOriginalLine(viewLineIdx, lineTokens, decorations, hasCharChanges, mightContainNonBasicASCII, mightContainRTL, options, sb) {\n    sb.appendString('<div class=\"view-line');\n    if (!hasCharChanges) {\n        // No char changes\n        sb.appendString(' char-delete');\n    }\n    sb.appendString('\" style=\"top:');\n    sb.appendString(String(viewLineIdx * options.lineHeight));\n    sb.appendString('px;width:1000000px;\">');\n    const lineContent = lineTokens.getLineContent();\n    const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, mightContainNonBasicASCII);\n    const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, mightContainRTL);\n    const output = renderViewLine(new RenderLineInput((options.fontInfo.isMonospace && !options.disableMonospaceOptimizations), options.fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, decorations, options.tabSize, 0, options.fontInfo.spaceWidth, options.fontInfo.middotWidth, options.fontInfo.wsmiddotWidth, options.stopRenderingLineAfter, options.renderWhitespace, options.renderControlCharacters, options.fontLigatures !== EditorFontLigatures.OFF, null // Send no selections, original line cannot be selected\n    ), sb);\n    sb.appendString('</div>');\n    return output.characterMapping.getHorizontalOffset(output.characterMapping.length);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { $ } from '../../../../base/browser/dom.js';\nimport { ArrayQueue } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { StableEditorScrollState } from '../../stableEditorScroll.js';\nimport { diffDeleteDecoration, diffRemoveIcon } from './decorations.js';\nimport { DiffMapping } from './diffEditorViewModel.js';\nimport { InlineDiffDeletedCodeMargin } from './inlineDiffDeletedCodeMargin.js';\nimport { LineSource, RenderOptions, renderLines } from './renderLines.js';\nimport { animatedObservable, joinCombine } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { InlineDecoration } from '../../../common/viewModel.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\n/**\n * Ensures both editors have the same height by aligning unchanged lines.\n * In inline view mode, inserts viewzones to show deleted code from the original text model in the modified code editor.\n * Synchronizes scrolling.\n */\nlet ViewZoneManager = class ViewZoneManager extends Disposable {\n    constructor(_editors, _diffModel, _options, _diffEditorWidget, _canIgnoreViewZoneUpdateEvent, _clipboardService, _contextMenuService) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._diffEditorWidget = _diffEditorWidget;\n        this._canIgnoreViewZoneUpdateEvent = _canIgnoreViewZoneUpdateEvent;\n        this._clipboardService = _clipboardService;\n        this._contextMenuService = _contextMenuService;\n        this._originalTopPadding = observableValue(this, 0);\n        this._originalScrollOffset = observableValue(this, 0);\n        this._originalScrollOffsetAnimated = animatedObservable(this._originalScrollOffset, this._store);\n        this._modifiedTopPadding = observableValue(this, 0);\n        this._modifiedScrollOffset = observableValue(this, 0);\n        this._modifiedScrollOffsetAnimated = animatedObservable(this._modifiedScrollOffset, this._store);\n        let isChangingViewZones = false;\n        const state = observableValue('state', 0);\n        const updateImmediately = this._register(new RunOnceScheduler(() => {\n            state.set(state.get() + 1, undefined);\n        }, 0));\n        this._register(this._editors.original.onDidChangeViewZones((_args) => { if (!isChangingViewZones && !this._canIgnoreViewZoneUpdateEvent()) {\n            updateImmediately.schedule();\n        } }));\n        this._register(this._editors.modified.onDidChangeViewZones((_args) => { if (!isChangingViewZones && !this._canIgnoreViewZoneUpdateEvent()) {\n            updateImmediately.schedule();\n        } }));\n        this._register(this._editors.original.onDidChangeConfiguration((args) => {\n            if (args.hasChanged(144 /* EditorOption.wrappingInfo */) || args.hasChanged(66 /* EditorOption.lineHeight */)) {\n                updateImmediately.schedule();\n            }\n        }));\n        this._register(this._editors.modified.onDidChangeConfiguration((args) => {\n            if (args.hasChanged(144 /* EditorOption.wrappingInfo */) || args.hasChanged(66 /* EditorOption.lineHeight */)) {\n                updateImmediately.schedule();\n            }\n        }));\n        const originalModelTokenizationCompleted = this._diffModel.map(m => m ? observableFromEvent(m.model.original.onDidChangeTokens, () => m.model.original.tokenization.backgroundTokenizationState === 2 /* BackgroundTokenizationState.Completed */) : undefined).map((m, reader) => m === null || m === void 0 ? void 0 : m.read(reader));\n        const alignmentViewZoneIdsOrig = new Set();\n        const alignmentViewZoneIdsMod = new Set();\n        const alignments = derived((reader) => {\n            /** @description alignments */\n            const diffModel = this._diffModel.read(reader);\n            const diff = diffModel === null || diffModel === void 0 ? void 0 : diffModel.diff.read(reader);\n            if (!diffModel || !diff) {\n                return null;\n            }\n            state.read(reader);\n            const renderSideBySide = this._options.renderSideBySide.read(reader);\n            const innerHunkAlignment = renderSideBySide;\n            return computeRangeAlignment(this._editors.original, this._editors.modified, diff.mappings, alignmentViewZoneIdsOrig, alignmentViewZoneIdsMod, innerHunkAlignment);\n        });\n        const alignmentsSyncedMovedText = derived((reader) => {\n            var _a;\n            /** @description alignments */\n            const syncedMovedText = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader);\n            if (!syncedMovedText) {\n                return null;\n            }\n            state.read(reader);\n            const mappings = syncedMovedText.changes.map(c => new DiffMapping(c));\n            // TODO dont include alignments outside syncedMovedText\n            return computeRangeAlignment(this._editors.original, this._editors.modified, mappings, alignmentViewZoneIdsOrig, alignmentViewZoneIdsMod, true);\n        });\n        function createFakeLinesDiv() {\n            const r = document.createElement('div');\n            r.className = 'diagonal-fill';\n            return r;\n        }\n        const alignmentViewZonesDisposables = this._register(new DisposableStore());\n        const alignmentViewZones = derived((reader) => {\n            var _a, _b, _c, _d, _e, _f, _g, _h;\n            /** @description alignment viewzones */\n            alignmentViewZonesDisposables.clear();\n            const alignmentsVal = alignments.read(reader) || [];\n            const origViewZones = [];\n            const modViewZones = [];\n            const modifiedTopPaddingVal = this._modifiedTopPadding.read(reader);\n            if (modifiedTopPaddingVal > 0) {\n                modViewZones.push({\n                    afterLineNumber: 0,\n                    domNode: document.createElement('div'),\n                    heightInPx: modifiedTopPaddingVal,\n                    showInHiddenAreas: true,\n                    suppressMouseDown: true,\n                });\n            }\n            const originalTopPaddingVal = this._originalTopPadding.read(reader);\n            if (originalTopPaddingVal > 0) {\n                origViewZones.push({\n                    afterLineNumber: 0,\n                    domNode: document.createElement('div'),\n                    heightInPx: originalTopPaddingVal,\n                    showInHiddenAreas: true,\n                    suppressMouseDown: true,\n                });\n            }\n            const renderSideBySide = this._options.renderSideBySide.read(reader);\n            const deletedCodeLineBreaksComputer = !renderSideBySide ? (_a = this._editors.modified._getViewModel()) === null || _a === void 0 ? void 0 : _a.createLineBreaksComputer() : undefined;\n            if (deletedCodeLineBreaksComputer) {\n                for (const a of alignmentsVal) {\n                    if (a.diff) {\n                        for (let i = a.originalRange.startLineNumber; i < a.originalRange.endLineNumberExclusive; i++) {\n                            deletedCodeLineBreaksComputer === null || deletedCodeLineBreaksComputer === void 0 ? void 0 : deletedCodeLineBreaksComputer.addRequest(this._editors.original.getModel().getLineContent(i), null, null);\n                        }\n                    }\n                }\n            }\n            const lineBreakData = (_b = deletedCodeLineBreaksComputer === null || deletedCodeLineBreaksComputer === void 0 ? void 0 : deletedCodeLineBreaksComputer.finalize()) !== null && _b !== void 0 ? _b : [];\n            let lineBreakDataIdx = 0;\n            const modLineHeight = this._editors.modified.getOption(66 /* EditorOption.lineHeight */);\n            const syncedMovedText = (_c = this._diffModel.read(reader)) === null || _c === void 0 ? void 0 : _c.movedTextToCompare.read(reader);\n            const mightContainNonBasicASCII = (_e = (_d = this._editors.original.getModel()) === null || _d === void 0 ? void 0 : _d.mightContainNonBasicASCII()) !== null && _e !== void 0 ? _e : false;\n            const mightContainRTL = (_g = (_f = this._editors.original.getModel()) === null || _f === void 0 ? void 0 : _f.mightContainRTL()) !== null && _g !== void 0 ? _g : false;\n            const renderOptions = RenderOptions.fromEditor(this._editors.modified);\n            for (const a of alignmentsVal) {\n                if (a.diff && !renderSideBySide) {\n                    if (!a.originalRange.isEmpty) {\n                        originalModelTokenizationCompleted.read(reader); // Update view-zones once tokenization completes\n                        const deletedCodeDomNode = document.createElement('div');\n                        deletedCodeDomNode.classList.add('view-lines', 'line-delete', 'monaco-mouse-cursor-text');\n                        const source = new LineSource(a.originalRange.mapToLineArray(l => this._editors.original.getModel().tokenization.getLineTokens(l)), a.originalRange.mapToLineArray(_ => lineBreakData[lineBreakDataIdx++]), mightContainNonBasicASCII, mightContainRTL);\n                        const decorations = [];\n                        for (const i of a.diff.innerChanges || []) {\n                            decorations.push(new InlineDecoration(i.originalRange.delta(-(a.diff.original.startLineNumber - 1)), diffDeleteDecoration.className, 0 /* InlineDecorationType.Regular */));\n                        }\n                        const result = renderLines(source, renderOptions, decorations, deletedCodeDomNode);\n                        const marginDomNode = document.createElement('div');\n                        marginDomNode.className = 'inline-deleted-margin-view-zone';\n                        applyFontInfo(marginDomNode, renderOptions.fontInfo);\n                        if (this._options.renderIndicators.read(reader)) {\n                            for (let i = 0; i < result.heightInLines; i++) {\n                                const marginElement = document.createElement('div');\n                                marginElement.className = `delete-sign ${ThemeIcon.asClassName(diffRemoveIcon)}`;\n                                marginElement.setAttribute('style', `position:absolute;top:${i * modLineHeight}px;width:${renderOptions.lineDecorationsWidth}px;height:${modLineHeight}px;right:0;`);\n                                marginDomNode.appendChild(marginElement);\n                            }\n                        }\n                        let zoneId = undefined;\n                        alignmentViewZonesDisposables.add(new InlineDiffDeletedCodeMargin(() => assertIsDefined(zoneId), marginDomNode, this._editors.modified, a.diff, this._diffEditorWidget, result.viewLineCounts, this._editors.original.getModel(), this._contextMenuService, this._clipboardService));\n                        for (let i = 0; i < result.viewLineCounts.length; i++) {\n                            const count = result.viewLineCounts[i];\n                            // Account for wrapped lines in the (collapsed) original editor (which doesn't wrap lines).\n                            if (count > 1) {\n                                origViewZones.push({\n                                    afterLineNumber: a.originalRange.startLineNumber + i,\n                                    domNode: createFakeLinesDiv(),\n                                    heightInPx: (count - 1) * modLineHeight,\n                                    showInHiddenAreas: true,\n                                    suppressMouseDown: true,\n                                });\n                            }\n                        }\n                        modViewZones.push({\n                            afterLineNumber: a.modifiedRange.startLineNumber - 1,\n                            domNode: deletedCodeDomNode,\n                            heightInPx: result.heightInLines * modLineHeight,\n                            minWidthInPx: result.minWidthInPx,\n                            marginDomNode,\n                            setZoneId(id) { zoneId = id; },\n                            showInHiddenAreas: true,\n                            suppressMouseDown: true,\n                        });\n                    }\n                    const marginDomNode = document.createElement('div');\n                    marginDomNode.className = 'gutter-delete';\n                    origViewZones.push({\n                        afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: a.modifiedHeightInPx,\n                        marginDomNode,\n                        showInHiddenAreas: true,\n                        suppressMouseDown: true,\n                    });\n                }\n                else {\n                    const delta = a.modifiedHeightInPx - a.originalHeightInPx;\n                    if (delta > 0) {\n                        if (syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.original.delta(-1).deltaLength(2).contains(a.originalRange.endLineNumberExclusive - 1)) {\n                            continue;\n                        }\n                        origViewZones.push({\n                            afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                            domNode: createFakeLinesDiv(),\n                            heightInPx: delta,\n                            showInHiddenAreas: true,\n                            suppressMouseDown: true,\n                        });\n                    }\n                    else {\n                        if (syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(a.modifiedRange.endLineNumberExclusive - 1)) {\n                            continue;\n                        }\n                        function createViewZoneMarginArrow() {\n                            const arrow = document.createElement('div');\n                            arrow.className = 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight);\n                            return $('div', {}, arrow);\n                        }\n                        let marginDomNode = undefined;\n                        if (a.diff && a.diff.modified.isEmpty && this._options.shouldRenderRevertArrows.read(reader)) {\n                            marginDomNode = createViewZoneMarginArrow();\n                        }\n                        modViewZones.push({\n                            afterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n                            domNode: createFakeLinesDiv(),\n                            heightInPx: -delta,\n                            marginDomNode,\n                            showInHiddenAreas: true,\n                            suppressMouseDown: true,\n                        });\n                    }\n                }\n            }\n            for (const a of (_h = alignmentsSyncedMovedText.read(reader)) !== null && _h !== void 0 ? _h : []) {\n                if (!(syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.original.intersect(a.originalRange))\n                    || !(syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.modified.intersect(a.modifiedRange))) {\n                    // ignore unrelated alignments outside the synced moved text\n                    continue;\n                }\n                const delta = a.modifiedHeightInPx - a.originalHeightInPx;\n                if (delta > 0) {\n                    origViewZones.push({\n                        afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: delta,\n                        showInHiddenAreas: true,\n                        suppressMouseDown: true,\n                    });\n                }\n                else {\n                    modViewZones.push({\n                        afterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: -delta,\n                        showInHiddenAreas: true,\n                        suppressMouseDown: true,\n                    });\n                }\n            }\n            return { orig: origViewZones, mod: modViewZones };\n        });\n        this._register(autorunWithStore((reader) => {\n            /** @description alignment viewzones */\n            const scrollState = StableEditorScrollState.capture(this._editors.modified);\n            const alignmentViewZones_ = alignmentViewZones.read(reader);\n            isChangingViewZones = true;\n            this._editors.original.changeViewZones((aOrig) => {\n                for (const id of alignmentViewZoneIdsOrig) {\n                    aOrig.removeZone(id);\n                }\n                alignmentViewZoneIdsOrig.clear();\n                for (const z of alignmentViewZones_.orig) {\n                    const id = aOrig.addZone(z);\n                    if (z.setZoneId) {\n                        z.setZoneId(id);\n                    }\n                    alignmentViewZoneIdsOrig.add(id);\n                }\n            });\n            this._editors.modified.changeViewZones(aMod => {\n                for (const id of alignmentViewZoneIdsMod) {\n                    aMod.removeZone(id);\n                }\n                alignmentViewZoneIdsMod.clear();\n                for (const z of alignmentViewZones_.mod) {\n                    const id = aMod.addZone(z);\n                    if (z.setZoneId) {\n                        z.setZoneId(id);\n                    }\n                    alignmentViewZoneIdsMod.add(id);\n                }\n            });\n            isChangingViewZones = false;\n            scrollState.restore(this._editors.modified);\n        }));\n        this._register(toDisposable(() => {\n            this._editors.original.changeViewZones((a) => {\n                for (const id of alignmentViewZoneIdsOrig) {\n                    a.removeZone(id);\n                }\n                alignmentViewZoneIdsOrig.clear();\n            });\n            this._editors.modified.changeViewZones((a) => {\n                for (const id of alignmentViewZoneIdsMod) {\n                    a.removeZone(id);\n                }\n                alignmentViewZoneIdsMod.clear();\n            });\n        }));\n        let ignoreChange = false;\n        this._register(this._editors.original.onDidScrollChange(e => {\n            if (e.scrollLeftChanged && !ignoreChange) {\n                ignoreChange = true;\n                this._editors.modified.setScrollLeft(e.scrollLeft);\n                ignoreChange = false;\n            }\n        }));\n        this._register(this._editors.modified.onDidScrollChange(e => {\n            if (e.scrollLeftChanged && !ignoreChange) {\n                ignoreChange = true;\n                this._editors.original.setScrollLeft(e.scrollLeft);\n                ignoreChange = false;\n            }\n        }));\n        this._originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => this._editors.original.getScrollTop());\n        this._modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\n        // origExtraHeight + origOffset - origScrollTop = modExtraHeight + modOffset - modScrollTop\n        // origScrollTop = origExtraHeight + origOffset - modExtraHeight - modOffset + modScrollTop\n        // modScrollTop = modExtraHeight + modOffset - origExtraHeight - origOffset + origScrollTop\n        // origOffset - modOffset = heightOfLines(1..Y) - heightOfLines(1..X)\n        // origScrollTop >= 0, modScrollTop >= 0\n        this._register(autorun(reader => {\n            /** @description update scroll modified */\n            const newScrollTopModified = this._originalScrollTop.read(reader)\n                - (this._originalScrollOffsetAnimated.get() - this._modifiedScrollOffsetAnimated.read(reader))\n                - (this._originalTopPadding.get() - this._modifiedTopPadding.read(reader));\n            if (newScrollTopModified !== this._editors.modified.getScrollTop()) {\n                this._editors.modified.setScrollTop(newScrollTopModified, 1 /* ScrollType.Immediate */);\n            }\n        }));\n        this._register(autorun(reader => {\n            /** @description update scroll original */\n            const newScrollTopOriginal = this._modifiedScrollTop.read(reader)\n                - (this._modifiedScrollOffsetAnimated.get() - this._originalScrollOffsetAnimated.read(reader))\n                - (this._modifiedTopPadding.get() - this._originalTopPadding.read(reader));\n            if (newScrollTopOriginal !== this._editors.original.getScrollTop()) {\n                this._editors.original.setScrollTop(newScrollTopOriginal, 1 /* ScrollType.Immediate */);\n            }\n        }));\n        this._register(autorun(reader => {\n            var _a;\n            /** @description update editor top offsets */\n            const m = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader);\n            let deltaOrigToMod = 0;\n            if (m) {\n                const trueTopOriginal = this._editors.original.getTopForLineNumber(m.lineRangeMapping.original.startLineNumber, true) - this._originalTopPadding.get();\n                const trueTopModified = this._editors.modified.getTopForLineNumber(m.lineRangeMapping.modified.startLineNumber, true) - this._modifiedTopPadding.get();\n                deltaOrigToMod = trueTopModified - trueTopOriginal;\n            }\n            if (deltaOrigToMod > 0) {\n                this._modifiedTopPadding.set(0, undefined);\n                this._originalTopPadding.set(deltaOrigToMod, undefined);\n            }\n            else if (deltaOrigToMod < 0) {\n                this._modifiedTopPadding.set(-deltaOrigToMod, undefined);\n                this._originalTopPadding.set(0, undefined);\n            }\n            else {\n                setTimeout(() => {\n                    this._modifiedTopPadding.set(0, undefined);\n                    this._originalTopPadding.set(0, undefined);\n                }, 400);\n            }\n            if (this._editors.modified.hasTextFocus()) {\n                this._originalScrollOffset.set(this._modifiedScrollOffset.get() - deltaOrigToMod, undefined, true);\n            }\n            else {\n                this._modifiedScrollOffset.set(this._originalScrollOffset.get() + deltaOrigToMod, undefined, true);\n            }\n        }));\n    }\n};\nViewZoneManager = __decorate([\n    __param(5, IClipboardService),\n    __param(6, IContextMenuService)\n], ViewZoneManager);\nexport { ViewZoneManager };\nfunction computeRangeAlignment(originalEditor, modifiedEditor, diffs, originalEditorAlignmentViewZones, modifiedEditorAlignmentViewZones, innerHunkAlignment) {\n    const originalLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(originalEditor, originalEditorAlignmentViewZones));\n    const modifiedLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(modifiedEditor, modifiedEditorAlignmentViewZones));\n    const origLineHeight = originalEditor.getOption(66 /* EditorOption.lineHeight */);\n    const modLineHeight = modifiedEditor.getOption(66 /* EditorOption.lineHeight */);\n    const result = [];\n    let lastOriginalLineNumber = 0;\n    let lastModifiedLineNumber = 0;\n    function handleAlignmentsOutsideOfDiffs(untilOriginalLineNumberExclusive, untilModifiedLineNumberExclusive) {\n        while (true) {\n            let origNext = originalLineHeightOverrides.peek();\n            let modNext = modifiedLineHeightOverrides.peek();\n            if (origNext && origNext.lineNumber >= untilOriginalLineNumberExclusive) {\n                origNext = undefined;\n            }\n            if (modNext && modNext.lineNumber >= untilModifiedLineNumberExclusive) {\n                modNext = undefined;\n            }\n            if (!origNext && !modNext) {\n                break;\n            }\n            const distOrig = origNext ? origNext.lineNumber - lastOriginalLineNumber : Number.MAX_VALUE;\n            const distNext = modNext ? modNext.lineNumber - lastModifiedLineNumber : Number.MAX_VALUE;\n            if (distOrig < distNext) {\n                originalLineHeightOverrides.dequeue();\n                modNext = {\n                    lineNumber: origNext.lineNumber - lastOriginalLineNumber + lastModifiedLineNumber,\n                    heightInPx: 0,\n                };\n            }\n            else if (distOrig > distNext) {\n                modifiedLineHeightOverrides.dequeue();\n                origNext = {\n                    lineNumber: modNext.lineNumber - lastModifiedLineNumber + lastOriginalLineNumber,\n                    heightInPx: 0,\n                };\n            }\n            else {\n                originalLineHeightOverrides.dequeue();\n                modifiedLineHeightOverrides.dequeue();\n            }\n            result.push({\n                originalRange: LineRange.ofLength(origNext.lineNumber, 1),\n                modifiedRange: LineRange.ofLength(modNext.lineNumber, 1),\n                originalHeightInPx: origLineHeight + origNext.heightInPx,\n                modifiedHeightInPx: modLineHeight + modNext.heightInPx,\n                diff: undefined,\n            });\n        }\n    }\n    for (const m of diffs) {\n        const c = m.lineRangeMapping;\n        handleAlignmentsOutsideOfDiffs(c.original.startLineNumber, c.modified.startLineNumber);\n        let first = true;\n        let lastModLineNumber = c.modified.startLineNumber;\n        let lastOrigLineNumber = c.original.startLineNumber;\n        function emitAlignment(origLineNumberExclusive, modLineNumberExclusive) {\n            var _a, _b, _c, _d;\n            if (origLineNumberExclusive < lastOrigLineNumber || modLineNumberExclusive < lastModLineNumber) {\n                return;\n            }\n            if (first) {\n                first = false;\n            }\n            else if (origLineNumberExclusive === lastOrigLineNumber || modLineNumberExclusive === lastModLineNumber) {\n                return;\n            }\n            const originalRange = new LineRange(lastOrigLineNumber, origLineNumberExclusive);\n            const modifiedRange = new LineRange(lastModLineNumber, modLineNumberExclusive);\n            if (originalRange.isEmpty && modifiedRange.isEmpty) {\n                return;\n            }\n            const originalAdditionalHeight = (_b = (_a = originalLineHeightOverrides\n                .takeWhile(v => v.lineNumber < origLineNumberExclusive)) === null || _a === void 0 ? void 0 : _a.reduce((p, c) => p + c.heightInPx, 0)) !== null && _b !== void 0 ? _b : 0;\n            const modifiedAdditionalHeight = (_d = (_c = modifiedLineHeightOverrides\n                .takeWhile(v => v.lineNumber < modLineNumberExclusive)) === null || _c === void 0 ? void 0 : _c.reduce((p, c) => p + c.heightInPx, 0)) !== null && _d !== void 0 ? _d : 0;\n            result.push({\n                originalRange,\n                modifiedRange,\n                originalHeightInPx: originalRange.length * origLineHeight + originalAdditionalHeight,\n                modifiedHeightInPx: modifiedRange.length * modLineHeight + modifiedAdditionalHeight,\n                diff: m.lineRangeMapping,\n            });\n            lastOrigLineNumber = origLineNumberExclusive;\n            lastModLineNumber = modLineNumberExclusive;\n        }\n        if (innerHunkAlignment) {\n            for (const i of c.innerChanges || []) {\n                if (i.originalRange.startColumn > 1 && i.modifiedRange.startColumn > 1) {\n                    // There is some unmodified text on this line before the diff\n                    emitAlignment(i.originalRange.startLineNumber, i.modifiedRange.startLineNumber);\n                }\n                if (i.originalRange.endColumn < originalEditor.getModel().getLineMaxColumn(i.originalRange.endLineNumber)) {\n                    // // There is some unmodified text on this line after the diff\n                    emitAlignment(i.originalRange.endLineNumber, i.modifiedRange.endLineNumber);\n                }\n            }\n        }\n        emitAlignment(c.original.endLineNumberExclusive, c.modified.endLineNumberExclusive);\n        lastOriginalLineNumber = c.original.endLineNumberExclusive;\n        lastModifiedLineNumber = c.modified.endLineNumberExclusive;\n    }\n    handleAlignmentsOutsideOfDiffs(Number.MAX_VALUE, Number.MAX_VALUE);\n    return result;\n}\nfunction getAdditionalLineHeights(editor, viewZonesToIgnore) {\n    const viewZoneHeights = [];\n    const wrappingZoneHeights = [];\n    const hasWrapping = editor.getOption(144 /* EditorOption.wrappingInfo */).wrappingColumn !== -1;\n    const coordinatesConverter = editor._getViewModel().coordinatesConverter;\n    const editorLineHeight = editor.getOption(66 /* EditorOption.lineHeight */);\n    if (hasWrapping) {\n        for (let i = 1; i <= editor.getModel().getLineCount(); i++) {\n            const lineCount = coordinatesConverter.getModelLineViewLineCount(i);\n            if (lineCount > 1) {\n                wrappingZoneHeights.push({ lineNumber: i, heightInPx: editorLineHeight * (lineCount - 1) });\n            }\n        }\n    }\n    for (const w of editor.getWhitespaces()) {\n        if (viewZonesToIgnore.has(w.id)) {\n            continue;\n        }\n        const modelLineNumber = w.afterLineNumber === 0 ? 0 : coordinatesConverter.convertViewPositionToModelPosition(new Position(w.afterLineNumber, 1)).lineNumber;\n        viewZoneHeights.push({ lineNumber: modelLineNumber, heightInPx: w.height });\n    }\n    const result = joinCombine(viewZoneHeights, wrappingZoneHeights, v => v.lineNumber, (v1, v2) => ({ lineNumber: v1.lineNumber, heightInPx: v1.heightInPx + v2.heightInPx }));\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar OverviewRulerPart_1;\nimport { EventType, addDisposableListener, addStandardDisposableListener, h } from '../../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { ScrollbarState } from '../../../../base/browser/ui/scrollbar/scrollbarState.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableFromEvent, observableSignalFromEvent } from '../../../../base/common/observable.js';\nimport { appendRemoveOnDispose } from './utils.js';\nimport { Position } from '../../../common/core/position.js';\nimport { OverviewRulerZone } from '../../../common/viewModel/overviewZoneManager.js';\nimport { defaultInsertColor, defaultRemoveColor, diffInserted, diffOverviewRulerInserted, diffOverviewRulerRemoved, diffRemoved } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nlet OverviewRulerPart = OverviewRulerPart_1 = class OverviewRulerPart extends Disposable {\n    constructor(_editors, _rootElement, _diffModel, _rootWidth, _rootHeight, _modifiedEditorLayoutInfo, _options, _themeService) {\n        super();\n        this._editors = _editors;\n        this._rootElement = _rootElement;\n        this._diffModel = _diffModel;\n        this._rootWidth = _rootWidth;\n        this._rootHeight = _rootHeight;\n        this._modifiedEditorLayoutInfo = _modifiedEditorLayoutInfo;\n        this._options = _options;\n        this._themeService = _themeService;\n        const currentColorTheme = observableFromEvent(this._themeService.onDidColorThemeChange, () => this._themeService.getColorTheme());\n        const currentColors = derived(reader => {\n            /** @description colors */\n            const theme = currentColorTheme.read(reader);\n            const insertColor = theme.getColor(diffOverviewRulerInserted) || (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\n            const removeColor = theme.getColor(diffOverviewRulerRemoved) || (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\n            return { insertColor, removeColor };\n        });\n        const scrollTopObservable = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\n        const scrollHeightObservable = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollHeight());\n        this._register(autorunWithStore((reader, store) => {\n            /** @description create diff editor overview ruler if enabled */\n            if (!this._options.renderOverviewRuler.read(reader)) {\n                return;\n            }\n            const viewportDomElement = createFastDomNode(document.createElement('div'));\n            viewportDomElement.setClassName('diffViewport');\n            viewportDomElement.setPosition('absolute');\n            const diffOverviewRoot = h('div.diffOverview', {\n                style: { position: 'absolute', top: '0px', width: OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px' }\n            }).root;\n            store.add(appendRemoveOnDispose(diffOverviewRoot, viewportDomElement.domNode));\n            store.add(addStandardDisposableListener(diffOverviewRoot, EventType.POINTER_DOWN, (e) => {\n                this._editors.modified.delegateVerticalScrollbarPointerDown(e);\n            }));\n            store.add(addDisposableListener(diffOverviewRoot, EventType.MOUSE_WHEEL, (e) => {\n                this._editors.modified.delegateScrollFromMouseWheelEvent(e);\n            }, { passive: false }));\n            store.add(appendRemoveOnDispose(this._rootElement, diffOverviewRoot));\n            store.add(autorunWithStore((reader, store) => {\n                /** @description recreate overview rules when model changes */\n                const m = this._diffModel.read(reader);\n                const originalOverviewRuler = this._editors.original.createOverviewRuler('original diffOverviewRuler');\n                if (originalOverviewRuler) {\n                    store.add(originalOverviewRuler);\n                    store.add(appendRemoveOnDispose(diffOverviewRoot, originalOverviewRuler.getDomNode()));\n                }\n                const modifiedOverviewRuler = this._editors.modified.createOverviewRuler('modified diffOverviewRuler');\n                if (modifiedOverviewRuler) {\n                    store.add(modifiedOverviewRuler);\n                    store.add(appendRemoveOnDispose(diffOverviewRoot, modifiedOverviewRuler.getDomNode()));\n                }\n                if (!originalOverviewRuler || !modifiedOverviewRuler) {\n                    // probably no model\n                    return;\n                }\n                const origViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.original.onDidChangeViewZones);\n                const modViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.modified.onDidChangeViewZones);\n                const origHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.original.onDidChangeHiddenAreas);\n                const modHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.modified.onDidChangeHiddenAreas);\n                store.add(autorun(reader => {\n                    var _a;\n                    /** @description set overview ruler zones */\n                    origViewZonesChanged.read(reader);\n                    modViewZonesChanged.read(reader);\n                    origHiddenRangesChanged.read(reader);\n                    modHiddenRangesChanged.read(reader);\n                    const colors = currentColors.read(reader);\n                    const diff = (_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings;\n                    function createZones(ranges, color, editor) {\n                        const vm = editor._getViewModel();\n                        if (!vm) {\n                            return [];\n                        }\n                        return ranges\n                            .filter(d => d.length > 0)\n                            .map(r => {\n                            const start = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.startLineNumber, 1));\n                            const end = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.endLineNumberExclusive, 1));\n                            // By computing the lineCount, we won't ask the view model later for the bottom vertical position.\n                            // (The view model will take into account the alignment viewzones, which will give\n                            // modifications and deletetions always the same height.)\n                            const lineCount = end.lineNumber - start.lineNumber;\n                            return new OverviewRulerZone(start.lineNumber, end.lineNumber, lineCount, color.toString());\n                        });\n                    }\n                    const originalZones = createZones((diff || []).map(d => d.lineRangeMapping.original), colors.removeColor, this._editors.original);\n                    const modifiedZones = createZones((diff || []).map(d => d.lineRangeMapping.modified), colors.insertColor, this._editors.modified);\n                    originalOverviewRuler === null || originalOverviewRuler === void 0 ? void 0 : originalOverviewRuler.setZones(originalZones);\n                    modifiedOverviewRuler === null || modifiedOverviewRuler === void 0 ? void 0 : modifiedOverviewRuler.setZones(modifiedZones);\n                }));\n                store.add(autorun(reader => {\n                    /** @description layout overview ruler */\n                    const height = this._rootHeight.read(reader);\n                    const width = this._rootWidth.read(reader);\n                    const layoutInfo = this._modifiedEditorLayoutInfo.read(reader);\n                    if (layoutInfo) {\n                        const freeSpace = OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * OverviewRulerPart_1.ONE_OVERVIEW_WIDTH;\n                        originalOverviewRuler.setLayout({\n                            top: 0,\n                            height: height,\n                            right: freeSpace + OverviewRulerPart_1.ONE_OVERVIEW_WIDTH,\n                            width: OverviewRulerPart_1.ONE_OVERVIEW_WIDTH,\n                        });\n                        modifiedOverviewRuler.setLayout({\n                            top: 0,\n                            height: height,\n                            right: 0,\n                            width: OverviewRulerPart_1.ONE_OVERVIEW_WIDTH,\n                        });\n                        const scrollTop = scrollTopObservable.read(reader);\n                        const scrollHeight = scrollHeightObservable.read(reader);\n                        const scrollBarOptions = this._editors.modified.getOption(102 /* EditorOption.scrollbar */);\n                        const state = new ScrollbarState(scrollBarOptions.verticalHasArrows ? scrollBarOptions.arrowSize : 0, scrollBarOptions.verticalScrollbarSize, 0, layoutInfo.height, scrollHeight, scrollTop);\n                        viewportDomElement.setTop(state.getSliderPosition());\n                        viewportDomElement.setHeight(state.getSliderSize());\n                    }\n                    else {\n                        viewportDomElement.setTop(0);\n                        viewportDomElement.setHeight(0);\n                    }\n                    diffOverviewRoot.style.height = height + 'px';\n                    diffOverviewRoot.style.left = (width - OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\n                    viewportDomElement.setWidth(OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH);\n                }));\n            }));\n        }));\n    }\n};\nOverviewRulerPart.ONE_OVERVIEW_WIDTH = 15;\nOverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH = OverviewRulerPart_1.ONE_OVERVIEW_WIDTH * 2;\nOverviewRulerPart = OverviewRulerPart_1 = __decorate([\n    __param(7, IThemeService)\n], OverviewRulerPart);\nexport { OverviewRulerPart };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nexport class DelegatingEditor extends Disposable {\n    constructor() {\n        super(...arguments);\n        this._id = ++DelegatingEditor.idCounter;\n        this._onDidDispose = this._register(new Emitter());\n        this.onDidDispose = this._onDidDispose.event;\n        // #endregion\n    }\n    getId() { return this.getEditorType() + ':v2:' + this._id; }\n    // #region editorBrowser.IDiffEditor: Delegating to modified Editor\n    getVisibleColumnFromPosition(position) {\n        return this._targetEditor.getVisibleColumnFromPosition(position);\n    }\n    getPosition() {\n        return this._targetEditor.getPosition();\n    }\n    setPosition(position, source = 'api') {\n        this._targetEditor.setPosition(position, source);\n    }\n    revealLine(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLine(lineNumber, scrollType);\n    }\n    revealLineInCenter(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineInCenter(lineNumber, scrollType);\n    }\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\n    }\n    revealLineNearTop(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineNearTop(lineNumber, scrollType);\n    }\n    revealPosition(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPosition(position, scrollType);\n    }\n    revealPositionInCenter(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionInCenter(position, scrollType);\n    }\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\n    }\n    revealPositionNearTop(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionNearTop(position, scrollType);\n    }\n    getSelection() {\n        return this._targetEditor.getSelection();\n    }\n    getSelections() {\n        return this._targetEditor.getSelections();\n    }\n    setSelection(something, source = 'api') {\n        this._targetEditor.setSelection(something, source);\n    }\n    setSelections(ranges, source = 'api') {\n        this._targetEditor.setSelections(ranges, source);\n    }\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLines(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesNearTop(startLineNumber, endLineNumber, scrollType);\n    }\n    revealRange(range, scrollType = 0 /* ScrollType.Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\n        this._targetEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\n    }\n    revealRangeInCenter(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeInCenter(range, scrollType);\n    }\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\n    }\n    revealRangeNearTop(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeNearTop(range, scrollType);\n    }\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeNearTopIfOutsideViewport(range, scrollType);\n    }\n    revealRangeAtTop(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeAtTop(range, scrollType);\n    }\n    getSupportedActions() {\n        return this._targetEditor.getSupportedActions();\n    }\n    focus() {\n        this._targetEditor.focus();\n    }\n    trigger(source, handlerId, payload) {\n        this._targetEditor.trigger(source, handlerId, payload);\n    }\n    createDecorationsCollection(decorations) {\n        return this._targetEditor.createDecorationsCollection(decorations);\n    }\n    changeDecorations(callback) {\n        return this._targetEditor.changeDecorations(callback);\n    }\n}\nDelegatingEditor.idCounter = 0;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { localize } from '../../../../nls.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nexport const diffMoveBorder = registerColor('diffEditor.move.border', { dark: '#8b8b8b9c', light: '#8b8b8b9c', hcDark: '#8b8b8b9c', hcLight: '#8b8b8b9c', }, localize('diffEditor.move.border', 'The border color for text that got moved in the diff editor.'));\nexport const diffMoveBorderActive = registerColor('diffEditor.moveActive.border', { dark: '#FFA500', light: '#FFA500', hcDark: '#FFA500', hcLight: '#FFA500', }, localize('diffEditor.moveActive.border', 'The active border color for text that got moved in the diff editor.'));\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorunHandleChanges, observableFromEvent } from '../../../../base/common/observable.js';\nimport { OverviewRulerPart } from './overviewRulerPart.js';\nimport { EditorOptions } from '../../../common/config/editorOptions.js';\nimport { localize } from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nlet DiffEditorEditors = class DiffEditorEditors extends Disposable {\n    constructor(originalEditorElement, modifiedEditorElement, _options, codeEditorWidgetOptions, _createInnerEditor, _instantiationService, _keybindingService) {\n        super();\n        this.originalEditorElement = originalEditorElement;\n        this.modifiedEditorElement = modifiedEditorElement;\n        this._options = _options;\n        this._createInnerEditor = _createInnerEditor;\n        this._instantiationService = _instantiationService;\n        this._keybindingService = _keybindingService;\n        this._onDidContentSizeChange = this._register(new Emitter());\n        this.original = this._register(this._createLeftHandSideEditor(_options.editorOptions.get(), codeEditorWidgetOptions.originalEditor || {}));\n        this.modified = this._register(this._createRightHandSideEditor(_options.editorOptions.get(), codeEditorWidgetOptions.modifiedEditor || {}));\n        this.modifiedModel = observableFromEvent(this.modified.onDidChangeModel, () => this.modified.getModel());\n        this._register(autorunHandleChanges({\n            createEmptyChangeSummary: () => ({}),\n            handleChange: (ctx, changeSummary) => {\n                if (ctx.didChange(_options.editorOptions)) {\n                    Object.assign(changeSummary, ctx.change.changedOptions);\n                }\n                return true;\n            }\n        }, (reader, changeSummary) => {\n            /** @description update editor options */\n            _options.editorOptions.read(reader);\n            this._options.renderSideBySide.read(reader);\n            this.modified.updateOptions(this._adjustOptionsForRightHandSide(reader, changeSummary));\n            this.original.updateOptions(this._adjustOptionsForLeftHandSide(reader, changeSummary));\n        }));\n    }\n    _createLeftHandSideEditor(options, codeEditorWidgetOptions) {\n        const leftHandSideOptions = this._adjustOptionsForLeftHandSide(undefined, options);\n        const editor = this._constructInnerEditor(this._instantiationService, this.originalEditorElement, leftHandSideOptions, codeEditorWidgetOptions);\n        editor.setContextValue('isInDiffLeftEditor', true);\n        return editor;\n    }\n    _createRightHandSideEditor(options, codeEditorWidgetOptions) {\n        const rightHandSideOptions = this._adjustOptionsForRightHandSide(undefined, options);\n        const editor = this._constructInnerEditor(this._instantiationService, this.modifiedEditorElement, rightHandSideOptions, codeEditorWidgetOptions);\n        editor.setContextValue('isInDiffRightEditor', true);\n        return editor;\n    }\n    _constructInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n        const editor = this._createInnerEditor(instantiationService, container, options, editorWidgetOptions);\n        this._register(editor.onDidContentSizeChange(e => {\n            const width = this.original.getContentWidth() + this.modified.getContentWidth() + OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH;\n            const height = Math.max(this.modified.getContentHeight(), this.original.getContentHeight());\n            this._onDidContentSizeChange.fire({\n                contentHeight: height,\n                contentWidth: width,\n                contentHeightChanged: e.contentHeightChanged,\n                contentWidthChanged: e.contentWidthChanged\n            });\n        }));\n        return editor;\n    }\n    _adjustOptionsForLeftHandSide(_reader, changedOptions) {\n        const result = this._adjustOptionsForSubEditor(changedOptions);\n        if (!this._options.renderSideBySide.get()) {\n            // never wrap hidden editor\n            result.wordWrapOverride1 = 'off';\n            result.wordWrapOverride2 = 'off';\n            result.stickyScroll = { enabled: false };\n            // Disable unicode highlighting for the original side in inline mode, as they are not shown anyway.\n            result.unicodeHighlight = { nonBasicASCII: false, ambiguousCharacters: false, invisibleCharacters: false };\n        }\n        else {\n            result.unicodeHighlight = this._options.editorOptions.get().unicodeHighlight || {};\n            result.wordWrapOverride1 = this._options.diffWordWrap.get();\n        }\n        if (changedOptions.originalAriaLabel) {\n            result.ariaLabel = changedOptions.originalAriaLabel;\n        }\n        result.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n        result.readOnly = !this._options.originalEditable.get();\n        result.dropIntoEditor = { enabled: !result.readOnly };\n        result.extraEditorClassName = 'original-in-monaco-diff-editor';\n        return result;\n    }\n    _adjustOptionsForRightHandSide(reader, changedOptions) {\n        const result = this._adjustOptionsForSubEditor(changedOptions);\n        if (changedOptions.modifiedAriaLabel) {\n            result.ariaLabel = changedOptions.modifiedAriaLabel;\n        }\n        result.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n        result.wordWrapOverride1 = this._options.diffWordWrap.get();\n        result.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH;\n        result.scrollbar.verticalHasArrows = false;\n        result.extraEditorClassName = 'modified-in-monaco-diff-editor';\n        return result;\n    }\n    _adjustOptionsForSubEditor(options) {\n        const clonedOptions = Object.assign(Object.assign({}, options), { dimension: {\n                height: 0,\n                width: 0\n            } });\n        clonedOptions.inDiffEditor = true;\n        clonedOptions.automaticLayout = false;\n        // Clone scrollbar options before changing them\n        clonedOptions.scrollbar = Object.assign({}, (clonedOptions.scrollbar || {}));\n        clonedOptions.scrollbar.vertical = 'visible';\n        clonedOptions.folding = false;\n        clonedOptions.codeLens = this._options.diffCodeLens.get();\n        clonedOptions.fixedOverflowWidgets = true;\n        // Clone minimap options before changing them\n        clonedOptions.minimap = Object.assign({}, (clonedOptions.minimap || {}));\n        clonedOptions.minimap.enabled = false;\n        if (this._options.hideUnchangedRegions.get()) {\n            clonedOptions.stickyScroll = { enabled: false };\n        }\n        else {\n            clonedOptions.stickyScroll = this._options.editorOptions.get().stickyScroll;\n        }\n        return clonedOptions;\n    }\n    _updateAriaLabel(ariaLabel) {\n        var _a;\n        if (!ariaLabel) {\n            ariaLabel = '';\n        }\n        const ariaNavigationTip = localize('diff-aria-navigation-tip', ' use {0} to open the accessibility help.', (_a = this._keybindingService.lookupKeybinding('editor.action.accessibilityHelp')) === null || _a === void 0 ? void 0 : _a.getAriaLabel());\n        if (this._options.accessibilityVerbose.get()) {\n            return ariaLabel + ariaNavigationTip;\n        }\n        else if (ariaLabel) {\n            return ariaLabel.replaceAll(ariaNavigationTip, '');\n        }\n        return '';\n    }\n};\nDiffEditorEditors = __decorate([\n    __param(5, IInstantiationService),\n    __param(6, IKeybindingService)\n], DiffEditorEditors);\nexport { DiffEditorEditors };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { derived, observableValue } from '../../../../base/common/observable.js';\nimport { diffEditorDefaultOptions } from '../../../common/config/diffEditor.js';\nimport { clampedFloat, clampedInt, boolean as validateBooleanOption, stringSet as validateStringSetOption } from '../../../common/config/editorOptions.js';\nexport class DiffEditorOptions {\n    get editorOptions() { return this._options; }\n    constructor(options, diffEditorWidth) {\n        this.diffEditorWidth = diffEditorWidth;\n        this.couldShowInlineViewBecauseOfSize = derived(this, reader => this._options.read(reader).renderSideBySide && this.diffEditorWidth.read(reader) <= this._options.read(reader).renderSideBySideInlineBreakpoint);\n        this.renderOverviewRuler = derived(this, reader => this._options.read(reader).renderOverviewRuler);\n        this.renderSideBySide = derived(this, reader => this._options.read(reader).renderSideBySide\n            && !(this._options.read(reader).useInlineViewWhenSpaceIsLimited && this.couldShowInlineViewBecauseOfSize.read(reader)));\n        this.readOnly = derived(this, reader => this._options.read(reader).readOnly);\n        this.shouldRenderRevertArrows = derived(this, reader => {\n            if (!this._options.read(reader).renderMarginRevertIcon) {\n                return false;\n            }\n            if (!this.renderSideBySide.read(reader)) {\n                return false;\n            }\n            if (this.readOnly.read(reader)) {\n                return false;\n            }\n            return true;\n        });\n        this.renderIndicators = derived(this, reader => this._options.read(reader).renderIndicators);\n        this.enableSplitViewResizing = derived(this, reader => this._options.read(reader).enableSplitViewResizing);\n        this.splitViewDefaultRatio = derived(this, reader => this._options.read(reader).splitViewDefaultRatio);\n        this.ignoreTrimWhitespace = derived(this, reader => this._options.read(reader).ignoreTrimWhitespace);\n        this.maxComputationTimeMs = derived(this, reader => this._options.read(reader).maxComputationTime);\n        this.showMoves = derived(this, reader => this._options.read(reader).experimental.showMoves && this.renderSideBySide.read(reader));\n        this.isInEmbeddedEditor = derived(this, reader => this._options.read(reader).isInEmbeddedEditor);\n        this.diffWordWrap = derived(this, reader => this._options.read(reader).diffWordWrap);\n        this.originalEditable = derived(this, reader => this._options.read(reader).originalEditable);\n        this.diffCodeLens = derived(this, reader => this._options.read(reader).diffCodeLens);\n        this.accessibilityVerbose = derived(this, reader => this._options.read(reader).accessibilityVerbose);\n        this.diffAlgorithm = derived(this, reader => this._options.read(reader).diffAlgorithm);\n        this.showEmptyDecorations = derived(this, reader => this._options.read(reader).experimental.showEmptyDecorations);\n        this.onlyShowAccessibleDiffViewer = derived(this, reader => this._options.read(reader).onlyShowAccessibleDiffViewer);\n        this.hideUnchangedRegions = derived(this, reader => this._options.read(reader).hideUnchangedRegions.enabled);\n        this.hideUnchangedRegionsRevealLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.revealLineCount);\n        this.hideUnchangedRegionsContextLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.contextLineCount);\n        this.hideUnchangedRegionsMinimumLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.minimumLineCount);\n        const optionsCopy = Object.assign(Object.assign({}, options), validateDiffEditorOptions(options, diffEditorDefaultOptions));\n        this._options = observableValue(this, optionsCopy);\n    }\n    updateOptions(changedOptions) {\n        const newDiffEditorOptions = validateDiffEditorOptions(changedOptions, this._options.get());\n        const newOptions = Object.assign(Object.assign(Object.assign({}, this._options.get()), changedOptions), newDiffEditorOptions);\n        this._options.set(newOptions, undefined, { changedOptions: changedOptions });\n    }\n}\nfunction validateDiffEditorOptions(options, defaults) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    return {\n        enableSplitViewResizing: validateBooleanOption(options.enableSplitViewResizing, defaults.enableSplitViewResizing),\n        splitViewDefaultRatio: clampedFloat(options.splitViewDefaultRatio, 0.5, 0.1, 0.9),\n        renderSideBySide: validateBooleanOption(options.renderSideBySide, defaults.renderSideBySide),\n        renderMarginRevertIcon: validateBooleanOption(options.renderMarginRevertIcon, defaults.renderMarginRevertIcon),\n        maxComputationTime: clampedInt(options.maxComputationTime, defaults.maxComputationTime, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        maxFileSize: clampedInt(options.maxFileSize, defaults.maxFileSize, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        ignoreTrimWhitespace: validateBooleanOption(options.ignoreTrimWhitespace, defaults.ignoreTrimWhitespace),\n        renderIndicators: validateBooleanOption(options.renderIndicators, defaults.renderIndicators),\n        originalEditable: validateBooleanOption(options.originalEditable, defaults.originalEditable),\n        diffCodeLens: validateBooleanOption(options.diffCodeLens, defaults.diffCodeLens),\n        renderOverviewRuler: validateBooleanOption(options.renderOverviewRuler, defaults.renderOverviewRuler),\n        diffWordWrap: validateStringSetOption(options.diffWordWrap, defaults.diffWordWrap, ['off', 'on', 'inherit']),\n        diffAlgorithm: validateStringSetOption(options.diffAlgorithm, defaults.diffAlgorithm, ['legacy', 'advanced'], { 'smart': 'legacy', 'experimental': 'advanced' }),\n        accessibilityVerbose: validateBooleanOption(options.accessibilityVerbose, defaults.accessibilityVerbose),\n        experimental: {\n            showMoves: validateBooleanOption((_a = options.experimental) === null || _a === void 0 ? void 0 : _a.showMoves, defaults.experimental.showMoves),\n            showEmptyDecorations: validateBooleanOption((_b = options.experimental) === null || _b === void 0 ? void 0 : _b.showEmptyDecorations, defaults.experimental.showEmptyDecorations),\n        },\n        hideUnchangedRegions: {\n            enabled: validateBooleanOption((_d = (_c = options.hideUnchangedRegions) === null || _c === void 0 ? void 0 : _c.enabled) !== null && _d !== void 0 ? _d : (_e = options.experimental) === null || _e === void 0 ? void 0 : _e.collapseUnchangedRegions, defaults.hideUnchangedRegions.enabled),\n            contextLineCount: clampedInt((_f = options.hideUnchangedRegions) === null || _f === void 0 ? void 0 : _f.contextLineCount, defaults.hideUnchangedRegions.contextLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n            minimumLineCount: clampedInt((_g = options.hideUnchangedRegions) === null || _g === void 0 ? void 0 : _g.minimumLineCount, defaults.hideUnchangedRegions.minimumLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n            revealLineCount: clampedInt((_h = options.hideUnchangedRegions) === null || _h === void 0 ? void 0 : _h.revealLineCount, defaults.hideUnchangedRegions.revealLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        },\n        isInEmbeddedEditor: validateBooleanOption(options.isInEmbeddedEditor, defaults.isInEmbeddedEditor),\n        onlyShowAccessibleDiffViewer: validateBooleanOption(options.onlyShowAccessibleDiffViewer, defaults.onlyShowAccessibleDiffViewer),\n        renderSideBySideInlineBreakpoint: clampedInt(options.renderSideBySideInlineBreakpoint, defaults.renderSideBySideInlineBreakpoint, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        useInlineViewWhenSpaceIsLimited: validateBooleanOption(options.useInlineViewWhenSpaceIsLimited, defaults.useInlineViewWhenSpaceIsLimited),\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, h } from '../../../../base/browser/dom.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, disposableObservableValue, recomputeInitiallyAndOnChange, observableValue, transaction } from '../../../../base/common/observable.js';\nimport './style.css';\nimport { EditorExtensionsRegistry } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { CodeEditorWidget } from '../codeEditorWidget.js';\nimport { AccessibleDiffViewer } from './accessibleDiffViewer.js';\nimport { DiffEditorDecorations } from './diffEditorDecorations.js';\nimport { DiffEditorSash } from './diffEditorSash.js';\nimport { HideUnchangedRegionsFeature } from './hideUnchangedRegionsFeature.js';\nimport { ViewZoneManager } from './lineAlignment.js';\nimport { MovedBlocksLinesPart } from './movedBlocksLines.js';\nimport { OverviewRulerPart } from './overviewRulerPart.js';\nimport { ObservableElementSizeObserver, applyStyle, readHotReloadableExport } from './utils.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorType } from '../../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { LengthObj } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/length.js';\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport './colors.js';\nimport { DelegatingEditor } from './delegatingEditorImpl.js';\nimport { DiffEditorEditors } from './diffEditorEditors.js';\nimport { DiffEditorOptions } from './diffEditorOptions.js';\nimport { DiffEditorViewModel } from './diffEditorViewModel.js';\nlet DiffEditorWidget = class DiffEditorWidget extends DelegatingEditor {\n    constructor(_domElement, options, codeEditorWidgetOptions, _parentContextKeyService, _parentInstantiationService, codeEditorService, _audioCueService, _editorProgressService) {\n        var _a;\n        super();\n        this._domElement = _domElement;\n        this._parentContextKeyService = _parentContextKeyService;\n        this._parentInstantiationService = _parentInstantiationService;\n        this._audioCueService = _audioCueService;\n        this._editorProgressService = _editorProgressService;\n        this.elements = h('div.monaco-diff-editor.side-by-side', { style: { position: 'relative', height: '100%' } }, [\n            h('div.noModificationsOverlay@overlay', { style: { position: 'absolute', height: '100%', visibility: 'hidden', } }, [$('span', {}, 'No Changes')]),\n            h('div.editor.original@original', { style: { position: 'absolute', height: '100%' } }),\n            h('div.editor.modified@modified', { style: { position: 'absolute', height: '100%' } }),\n            h('div.accessibleDiffViewer@accessibleDiffViewer', { style: { position: 'absolute', height: '100%' } }),\n        ]);\n        this._diffModel = this._register(disposableObservableValue('diffModel', undefined));\n        this.onDidChangeModel = Event.fromObservableLight(this._diffModel);\n        this._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._domElement));\n        this._instantiationService = this._parentInstantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._boundarySashes = observableValue(this, undefined);\n        this._accessibleDiffViewerShouldBeVisible = observableValue(this, false);\n        this._accessibleDiffViewerVisible = derived(this, reader => this._options.onlyShowAccessibleDiffViewer.read(reader)\n            ? true\n            : this._accessibleDiffViewerShouldBeVisible.read(reader));\n        this.movedBlocksLinesPart = observableValue(this, undefined);\n        this._layoutInfo = derived(this, reader => {\n            var _a, _b, _c;\n            const width = this._rootSizeObserver.width.read(reader);\n            const height = this._rootSizeObserver.height.read(reader);\n            const sashLeft = (_a = this._sash.read(reader)) === null || _a === void 0 ? void 0 : _a.sashLeft.read(reader);\n            const originalWidth = sashLeft !== null && sashLeft !== void 0 ? sashLeft : Math.max(5, this._editors.original.getLayoutInfo().decorationsLeft);\n            const modifiedWidth = width - originalWidth - (this._options.renderOverviewRuler.read(reader) ? OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH : 0);\n            const movedBlocksLinesWidth = (_c = (_b = this.movedBlocksLinesPart.read(reader)) === null || _b === void 0 ? void 0 : _b.width.read(reader)) !== null && _c !== void 0 ? _c : 0;\n            const originalWidthWithoutMovedBlockLines = originalWidth - movedBlocksLinesWidth;\n            this.elements.original.style.width = originalWidthWithoutMovedBlockLines + 'px';\n            this.elements.original.style.left = '0px';\n            this.elements.modified.style.width = modifiedWidth + 'px';\n            this.elements.modified.style.left = originalWidth + 'px';\n            this._editors.original.layout({ width: originalWidthWithoutMovedBlockLines, height });\n            this._editors.modified.layout({ width: modifiedWidth, height });\n            return {\n                modifiedEditor: this._editors.modified.getLayoutInfo(),\n                originalEditor: this._editors.original.getLayoutInfo(),\n            };\n        });\n        this._diffValue = this._diffModel.map((m, r) => m === null || m === void 0 ? void 0 : m.diff.read(r));\n        this.onDidUpdateDiff = Event.fromObservableLight(this._diffValue);\n        codeEditorService.willCreateDiffEditor();\n        this._contextKeyService.createKey('isInDiffEditor', true);\n        this._domElement.appendChild(this.elements.root);\n        this._register(toDisposable(() => this._domElement.removeChild(this.elements.root)));\n        this._rootSizeObserver = this._register(new ObservableElementSizeObserver(this.elements.root, options.dimension));\n        this._rootSizeObserver.setAutomaticLayout((_a = options.automaticLayout) !== null && _a !== void 0 ? _a : false);\n        this._options = new DiffEditorOptions(options, this._rootSizeObserver.width);\n        this._contextKeyService.createKey(EditorContextKeys.isEmbeddedDiffEditor.key, false);\n        const isEmbeddedDiffEditorKey = EditorContextKeys.isEmbeddedDiffEditor.bindTo(this._contextKeyService);\n        this._register(autorun(reader => {\n            /** @description update isEmbeddedDiffEditorKey */\n            isEmbeddedDiffEditorKey.set(this._options.isInEmbeddedEditor.read(reader));\n        }));\n        const comparingMovedCodeKey = EditorContextKeys.comparingMovedCode.bindTo(this._contextKeyService);\n        this._register(autorun(reader => {\n            var _a;\n            /** @description update comparingMovedCodeKey */\n            comparingMovedCodeKey.set(!!((_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader)));\n        }));\n        const diffEditorRenderSideBySideInlineBreakpointReachedContextKeyValue = EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached.bindTo(this._contextKeyService);\n        this._register(autorun(reader => {\n            /** @description update accessibleDiffViewerVisible context key */\n            diffEditorRenderSideBySideInlineBreakpointReachedContextKeyValue.set(this._options.couldShowInlineViewBecauseOfSize.read(reader));\n        }));\n        this._editors = this._register(this._instantiationService.createInstance(DiffEditorEditors, this.elements.original, this.elements.modified, this._options, codeEditorWidgetOptions, (i, c, o, o2) => this._createInnerEditor(i, c, o, o2)));\n        this._sash = derivedWithStore(this, (reader, store) => {\n            const showSash = this._options.renderSideBySide.read(reader);\n            this.elements.root.classList.toggle('side-by-side', showSash);\n            if (!showSash) {\n                return undefined;\n            }\n            const result = store.add(new DiffEditorSash(this._options, this.elements.root, {\n                height: this._rootSizeObserver.height,\n                width: this._rootSizeObserver.width.map((w, reader) => w - (this._options.renderOverviewRuler.read(reader) ? OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH : 0)),\n            }));\n            store.add(autorun(reader => {\n                /** @description setBoundarySashes */\n                const boundarySashes = this._boundarySashes.read(reader);\n                if (boundarySashes) {\n                    result.setBoundarySashes(boundarySashes);\n                }\n            }));\n            return result;\n        });\n        this._register(recomputeInitiallyAndOnChange(this._sash));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description UnchangedRangesFeature */\n            this.unchangedRangesFeature = store.add(this._instantiationService.createInstance(readHotReloadableExport(HideUnchangedRegionsFeature, reader), this._editors, this._diffModel, this._options));\n        }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description DiffEditorDecorations */\n            store.add(new (readHotReloadableExport(DiffEditorDecorations, reader))(this._editors, this._diffModel, this._options));\n        }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description ViewZoneManager */\n            store.add(this._instantiationService.createInstance(readHotReloadableExport(ViewZoneManager, reader), this._editors, this._diffModel, this._options, this, () => this.unchangedRangesFeature.isUpdatingViewZones));\n        }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description OverviewRulerPart */\n            store.add(this._instantiationService.createInstance(readHotReloadableExport(OverviewRulerPart, reader), this._editors, this.elements.root, this._diffModel, this._rootSizeObserver.width, this._rootSizeObserver.height, this._layoutInfo.map(i => i.modifiedEditor), this._options));\n        }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description _accessibleDiffViewer */\n            this._accessibleDiffViewer = store.add(this._register(this._instantiationService.createInstance(readHotReloadableExport(AccessibleDiffViewer, reader), this.elements.accessibleDiffViewer, this._accessibleDiffViewerVisible, (visible, tx) => this._accessibleDiffViewerShouldBeVisible.set(visible, tx), this._options.onlyShowAccessibleDiffViewer.map(v => !v), this._rootSizeObserver.width, this._rootSizeObserver.height, this._diffModel.map((m, r) => { var _a; return (_a = m === null || m === void 0 ? void 0 : m.diff.read(r)) === null || _a === void 0 ? void 0 : _a.mappings.map(m => m.lineRangeMapping); }), this._editors)));\n        }));\n        const visibility = this._accessibleDiffViewerVisible.map(v => v ? 'hidden' : 'visible');\n        this._register(applyStyle(this.elements.modified, { visibility }));\n        this._register(applyStyle(this.elements.original, { visibility }));\n        this._createDiffEditorContributions();\n        codeEditorService.addDiffEditor(this);\n        this._register(recomputeInitiallyAndOnChange(this._layoutInfo));\n        this._register(autorunWithStore((reader, store) => {\n            this.movedBlocksLinesPart.set(store.add(new (readHotReloadableExport(MovedBlocksLinesPart, reader))(this.elements.root, this._diffModel, this._layoutInfo.map(i => i.originalEditor), this._layoutInfo.map(i => i.modifiedEditor), this._editors)), undefined);\n        }));\n        this._register(applyStyle(this.elements.overlay, {\n            width: this._layoutInfo.map((i, r) => i.originalEditor.width + (this._options.renderSideBySide.read(r) ? 0 : i.modifiedEditor.width)),\n            visibility: derived(reader => /** @description visibility */ {\n                var _a, _b;\n                return (this._options.hideUnchangedRegions.read(reader) && ((_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader)) === null || _b === void 0 ? void 0 : _b.mappings.length) === 0)\n                    ? 'visible' : 'hidden';\n            }),\n        }));\n        // Revert change when an arrow is clicked.\n        this._register(this._editors.modified.onMouseDown(event => {\n            var _a, _b;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('arrow-revert-change'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const viewZone = event.target;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const diffs = (_b = model.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings;\n                if (!diffs) {\n                    return;\n                }\n                const diff = diffs.find(d => (viewZone === null || viewZone === void 0 ? void 0 : viewZone.detail.afterLineNumber) === d.lineRangeMapping.modified.startLineNumber - 1 ||\n                    d.lineRangeMapping.modified.startLineNumber === lineNumber);\n                if (!diff) {\n                    return;\n                }\n                this.revert(diff.lineRangeMapping);\n                event.event.stopPropagation();\n            }\n        }));\n        this._register(Event.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition, (e) => {\n            var _a, _b;\n            if ((e === null || e === void 0 ? void 0 : e.reason) === 3 /* CursorChangeReason.Explicit */) {\n                const diff = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.find(m => m.lineRangeMapping.modified.contains(e.position.lineNumber));\n                if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.modified.isEmpty) {\n                    this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, { source: 'diffEditor.cursorPositionChanged' });\n                }\n                else if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.original.isEmpty) {\n                    this._audioCueService.playAudioCue(AudioCue.diffLineInserted, { source: 'diffEditor.cursorPositionChanged' });\n                }\n                else if (diff) {\n                    this._audioCueService.playAudioCue(AudioCue.diffLineModified, { source: 'diffEditor.cursorPositionChanged' });\n                }\n            }\n        }));\n        const isDiffUpToDate = this._diffModel.map((m, reader) => m === null || m === void 0 ? void 0 : m.isDiffUpToDate.read(reader));\n        this._register(autorunWithStore((reader, store) => {\n            if (isDiffUpToDate.read(reader) === false) {\n                const r = this._editorProgressService.show(true, 1000);\n                store.add(toDisposable(() => r.done()));\n            }\n        }));\n    }\n    _createInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n        const editor = instantiationService.createInstance(CodeEditorWidget, container, options, editorWidgetOptions);\n        return editor;\n    }\n    _createDiffEditorContributions() {\n        const contributions = EditorExtensionsRegistry.getDiffEditorContributions();\n        for (const desc of contributions) {\n            try {\n                this._register(this._instantiationService.createInstance(desc.ctor, this));\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n    }\n    get _targetEditor() { return this._editors.modified; }\n    getEditorType() { return EditorType.IDiffEditor; }\n    layout(dimension) { this._rootSizeObserver.observe(dimension); }\n    hasTextFocus() { return this._editors.original.hasTextFocus() || this._editors.modified.hasTextFocus(); }\n    saveViewState() {\n        var _a;\n        const originalViewState = this._editors.original.saveViewState();\n        const modifiedViewState = this._editors.modified.saveViewState();\n        return {\n            original: originalViewState,\n            modified: modifiedViewState,\n            modelState: (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.serializeState(),\n        };\n    }\n    restoreViewState(s) {\n        var _a;\n        if (s && s.original && s.modified) {\n            const diffEditorState = s;\n            this._editors.original.restoreViewState(diffEditorState.original);\n            this._editors.modified.restoreViewState(diffEditorState.modified);\n            if (diffEditorState.modelState) {\n                (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.restoreSerializedState(diffEditorState.modelState);\n            }\n        }\n    }\n    createViewModel(model) {\n        return this._instantiationService.createInstance(DiffEditorViewModel, model, this._options, this);\n    }\n    getModel() { var _a, _b; return (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.model) !== null && _b !== void 0 ? _b : null; }\n    setModel(model) {\n        if (!model && this._diffModel.get()) {\n            // Transitioning from a model to no-model\n            this._accessibleDiffViewer.close();\n        }\n        const vm = model ? ('model' in model) ? model : this.createViewModel(model) : undefined;\n        this._editors.original.setModel(vm ? vm.model.original : null);\n        this._editors.modified.setModel(vm ? vm.model.modified : null);\n        transaction(tx => {\n            this._diffModel.set(vm, tx);\n        });\n    }\n    /**\n     * @param changedOptions Only has values for top-level options that have actually changed.\n     */\n    updateOptions(changedOptions) {\n        this._options.updateOptions(changedOptions);\n    }\n    getContainerDomNode() { return this._domElement; }\n    getOriginalEditor() { return this._editors.original; }\n    getModifiedEditor() { return this._editors.modified; }\n    /**\n     * @deprecated Use `this.getDiffComputationResult().changes2` instead.\n     */\n    getLineChanges() {\n        var _a;\n        const diffState = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get();\n        if (!diffState) {\n            return null;\n        }\n        return toLineChanges(diffState);\n    }\n    revert(diff) {\n        var _a;\n        const model = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.model;\n        if (!model) {\n            return;\n        }\n        const changes = diff.innerChanges\n            ? diff.innerChanges.map(c => ({\n                range: c.modifiedRange,\n                text: model.original.getValueInRange(c.originalRange)\n            }))\n            : [\n                {\n                    range: diff.modified.toExclusiveRange(),\n                    text: model.original.getValueInRange(diff.original.toExclusiveRange())\n                }\n            ];\n        this._editors.modified.executeEdits('diffEditor', changes);\n    }\n    accessibleDiffViewerNext() { this._accessibleDiffViewer.next(); }\n    accessibleDiffViewerPrev() { this._accessibleDiffViewer.prev(); }\n    mapToOtherSide() {\n        var _a, _b;\n        const isModifiedFocus = this._editors.modified.hasWidgetFocus();\n        const source = isModifiedFocus ? this._editors.modified : this._editors.original;\n        const destination = isModifiedFocus ? this._editors.original : this._editors.modified;\n        let destinationSelection;\n        const sourceSelection = source.getSelection();\n        if (sourceSelection) {\n            const mappings = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.map(m => isModifiedFocus ? m.lineRangeMapping.flip() : m.lineRangeMapping);\n            if (mappings) {\n                const newRange1 = translatePosition(sourceSelection.getStartPosition(), mappings);\n                const newRange2 = translatePosition(sourceSelection.getEndPosition(), mappings);\n                destinationSelection = Range.plusRange(newRange1, newRange2);\n            }\n        }\n        return { destination, destinationSelection };\n    }\n    switchSide() {\n        const { destination, destinationSelection } = this.mapToOtherSide();\n        destination.focus();\n        if (destinationSelection) {\n            destination.setSelection(destinationSelection);\n        }\n    }\n    exitCompareMove() {\n        const model = this._diffModel.get();\n        if (!model) {\n            return;\n        }\n        model.movedTextToCompare.set(undefined, undefined);\n    }\n    collapseAllUnchangedRegions() {\n        var _a;\n        const unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\n        if (!unchangedRegions) {\n            return;\n        }\n        transaction(tx => {\n            for (const region of unchangedRegions) {\n                region.collapseAll(tx);\n            }\n        });\n    }\n    showAllUnchangedRegions() {\n        var _a;\n        const unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\n        if (!unchangedRegions) {\n            return;\n        }\n        transaction(tx => {\n            for (const region of unchangedRegions) {\n                region.showAll(tx);\n            }\n        });\n    }\n};\nDiffEditorWidget = __decorate([\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ICodeEditorService),\n    __param(6, IAudioCueService),\n    __param(7, IEditorProgressService)\n], DiffEditorWidget);\nexport { DiffEditorWidget };\nfunction translatePosition(posInOriginal, mappings) {\n    const mapping = findLast(mappings, m => m.original.startLineNumber <= posInOriginal.lineNumber);\n    if (!mapping) {\n        // No changes before the position\n        return Range.fromPositions(posInOriginal);\n    }\n    if (mapping.original.endLineNumberExclusive <= posInOriginal.lineNumber) {\n        const newLineNumber = posInOriginal.lineNumber - mapping.original.endLineNumberExclusive + mapping.modified.endLineNumberExclusive;\n        return Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n    }\n    if (!mapping.innerChanges) {\n        // Only for legacy algorithm\n        return Range.fromPositions(new Position(mapping.modified.startLineNumber, 1));\n    }\n    const innerMapping = findLast(mapping.innerChanges, m => m.originalRange.getStartPosition().isBeforeOrEqual(posInOriginal));\n    if (!innerMapping) {\n        const newLineNumber = posInOriginal.lineNumber - mapping.original.startLineNumber + mapping.modified.startLineNumber;\n        return Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n    }\n    if (innerMapping.originalRange.containsPosition(posInOriginal)) {\n        return innerMapping.modifiedRange;\n    }\n    else {\n        const l = lengthBetweenPositions(innerMapping.originalRange.getEndPosition(), posInOriginal);\n        return Range.fromPositions(addLength(innerMapping.modifiedRange.getEndPosition(), l));\n    }\n}\nfunction lengthBetweenPositions(position1, position2) {\n    if (position1.lineNumber === position2.lineNumber) {\n        return new LengthObj(0, position2.column - position1.column);\n    }\n    else {\n        return new LengthObj(position2.lineNumber - position1.lineNumber, position2.column - 1);\n    }\n}\nfunction addLength(position, length) {\n    if (length.lineCount === 0) {\n        return new Position(position.lineNumber, position.column + length.columnCount);\n    }\n    else {\n        return new Position(position.lineNumber + length.lineCount, length.columnCount + 1);\n    }\n}\nfunction toLineChanges(state) {\n    return state.mappings.map(x => {\n        const m = x.lineRangeMapping;\n        let originalStartLineNumber;\n        let originalEndLineNumber;\n        let modifiedStartLineNumber;\n        let modifiedEndLineNumber;\n        let innerChanges = m.innerChanges;\n        if (m.original.isEmpty) {\n            // Insertion\n            originalStartLineNumber = m.original.startLineNumber - 1;\n            originalEndLineNumber = 0;\n            innerChanges = undefined;\n        }\n        else {\n            originalStartLineNumber = m.original.startLineNumber;\n            originalEndLineNumber = m.original.endLineNumberExclusive - 1;\n        }\n        if (m.modified.isEmpty) {\n            // Deletion\n            modifiedStartLineNumber = m.modified.startLineNumber - 1;\n            modifiedEndLineNumber = 0;\n            innerChanges = undefined;\n        }\n        else {\n            modifiedStartLineNumber = m.modified.startLineNumber;\n            modifiedEndLineNumber = m.modified.endLineNumberExclusive - 1;\n        }\n        return {\n            originalStartLineNumber,\n            originalEndLineNumber,\n            modifiedStartLineNumber,\n            modifiedEndLineNumber,\n            charChanges: innerChanges === null || innerChanges === void 0 ? void 0 : innerChanges.map(m => ({\n                originalStartLineNumber: m.originalRange.startLineNumber,\n                originalStartColumn: m.originalRange.startColumn,\n                originalEndLineNumber: m.originalRange.endLineNumber,\n                originalEndColumn: m.originalRange.endColumn,\n                modifiedStartLineNumber: m.modifiedRange.startLineNumber,\n                modifiedStartColumn: m.modifiedRange.startColumn,\n                modifiedEndLineNumber: m.modifiedRange.endLineNumber,\n                modifiedEndColumn: m.modifiedRange.endColumn,\n            }))\n        };\n    });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as objects from '../../../base/common/objects.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet EmbeddedCodeEditorWidget = class EmbeddedCodeEditorWidget extends CodeEditorWidget {\n    constructor(domElement, options, codeEditorWidgetOptions, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        super(domElement, Object.assign(Object.assign({}, parentEditor.getRawOptions()), { overflowWidgetsDomNode: parentEditor.getOverflowWidgetsDomNode() }), codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        this._parentEditor = parentEditor;\n        this._overwriteOptions = options;\n        // Overwrite parent's options\n        super.updateOptions(this._overwriteOptions);\n        this._register(parentEditor.onDidChangeConfiguration((e) => this._onParentConfigurationChanged(e)));\n    }\n    getParentEditor() {\n        return this._parentEditor;\n    }\n    _onParentConfigurationChanged(e) {\n        super.updateOptions(this._parentEditor.getRawOptions());\n        super.updateOptions(this._overwriteOptions);\n    }\n    updateOptions(newOptions) {\n        objects.mixin(this._overwriteOptions, newOptions, true);\n        super.updateOptions(this._overwriteOptions);\n    }\n};\nEmbeddedCodeEditorWidget = __decorate([\n    __param(4, IInstantiationService),\n    __param(5, ICodeEditorService),\n    __param(6, ICommandService),\n    __param(7, IContextKeyService),\n    __param(8, IThemeService),\n    __param(9, INotificationService),\n    __param(10, IAccessibilityService),\n    __param(11, ILanguageConfigurationService),\n    __param(12, ILanguageFeaturesService)\n], EmbeddedCodeEditorWidget);\nexport { EmbeddedCodeEditorWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Selection } from '../core/selection.js';\nexport class ReplaceCommand {\n    constructor(range, text, insertsAutoWhitespace = false) {\n        this._range = range;\n        this._text = text;\n        this.insertsAutoWhitespace = insertsAutoWhitespace;\n    }\n    getEditOperations(model, builder) {\n        builder.addTrackedEditOperation(this._range, this._text);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        const srcRange = inverseEditOperations[0].range;\n        return Selection.fromPositions(srcRange.getEndPosition());\n    }\n}\nexport class ReplaceCommandThatSelectsText {\n    constructor(range, text) {\n        this._range = range;\n        this._text = text;\n    }\n    getEditOperations(model, builder) {\n        builder.addTrackedEditOperation(this._range, this._text);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        const srcRange = inverseEditOperations[0].range;\n        return Selection.fromRange(srcRange, 0 /* SelectionDirection.LTR */);\n    }\n}\nexport class ReplaceCommandWithoutChangingPosition {\n    constructor(range, text, insertsAutoWhitespace = false) {\n        this._range = range;\n        this._text = text;\n        this.insertsAutoWhitespace = insertsAutoWhitespace;\n    }\n    getEditOperations(model, builder) {\n        builder.addTrackedEditOperation(this._range, this._text);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        const srcRange = inverseEditOperations[0].range;\n        return Selection.fromPositions(srcRange.getStartPosition());\n    }\n}\nexport class ReplaceCommandWithOffsetCursorState {\n    constructor(range, text, lineNumberDeltaOffset, columnDeltaOffset, insertsAutoWhitespace = false) {\n        this._range = range;\n        this._text = text;\n        this._columnDeltaOffset = columnDeltaOffset;\n        this._lineNumberDeltaOffset = lineNumberDeltaOffset;\n        this.insertsAutoWhitespace = insertsAutoWhitespace;\n    }\n    getEditOperations(model, builder) {\n        builder.addTrackedEditOperation(this._range, this._text);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        const srcRange = inverseEditOperations[0].range;\n        return Selection.fromPositions(srcRange.getEndPosition().delta(this._lineNumberDeltaOffset, this._columnDeltaOffset));\n    }\n}\nexport class ReplaceCommandThatPreservesSelection {\n    constructor(editRange, text, initialSelection, forceMoveMarkers = false) {\n        this._range = editRange;\n        this._text = text;\n        this._initialSelection = initialSelection;\n        this._forceMoveMarkers = forceMoveMarkers;\n        this._selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        builder.addTrackedEditOperation(this._range, this._text, this._forceMoveMarkers);\n        this._selectionId = builder.trackSelection(this._initialSelection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._selectionId);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ShiftCommand_1;\nimport * as strings from '../../../base/common/strings.js';\nimport { CursorColumns } from '../core/cursorColumns.js';\nimport { Range } from '../core/range.js';\nimport { Selection } from '../core/selection.js';\nimport { getEnterAction } from '../languages/enterAction.js';\nimport { ILanguageConfigurationService } from '../languages/languageConfigurationRegistry.js';\nconst repeatCache = Object.create(null);\nfunction cachedStringRepeat(str, count) {\n    if (count <= 0) {\n        return '';\n    }\n    if (!repeatCache[str]) {\n        repeatCache[str] = ['', str];\n    }\n    const cache = repeatCache[str];\n    for (let i = cache.length; i <= count; i++) {\n        cache[i] = cache[i - 1] + str;\n    }\n    return cache[count];\n}\nlet ShiftCommand = ShiftCommand_1 = class ShiftCommand {\n    static unshiftIndent(line, column, tabSize, indentSize, insertSpaces) {\n        // Determine the visible column where the content starts\n        const contentStartVisibleColumn = CursorColumns.visibleColumnFromColumn(line, column, tabSize);\n        if (insertSpaces) {\n            const indent = cachedStringRepeat(' ', indentSize);\n            const desiredTabStop = CursorColumns.prevIndentTabStop(contentStartVisibleColumn, indentSize);\n            const indentCount = desiredTabStop / indentSize; // will be an integer\n            return cachedStringRepeat(indent, indentCount);\n        }\n        else {\n            const indent = '\\t';\n            const desiredTabStop = CursorColumns.prevRenderTabStop(contentStartVisibleColumn, tabSize);\n            const indentCount = desiredTabStop / tabSize; // will be an integer\n            return cachedStringRepeat(indent, indentCount);\n        }\n    }\n    static shiftIndent(line, column, tabSize, indentSize, insertSpaces) {\n        // Determine the visible column where the content starts\n        const contentStartVisibleColumn = CursorColumns.visibleColumnFromColumn(line, column, tabSize);\n        if (insertSpaces) {\n            const indent = cachedStringRepeat(' ', indentSize);\n            const desiredTabStop = CursorColumns.nextIndentTabStop(contentStartVisibleColumn, indentSize);\n            const indentCount = desiredTabStop / indentSize; // will be an integer\n            return cachedStringRepeat(indent, indentCount);\n        }\n        else {\n            const indent = '\\t';\n            const desiredTabStop = CursorColumns.nextRenderTabStop(contentStartVisibleColumn, tabSize);\n            const indentCount = desiredTabStop / tabSize; // will be an integer\n            return cachedStringRepeat(indent, indentCount);\n        }\n    }\n    constructor(range, opts, _languageConfigurationService) {\n        this._languageConfigurationService = _languageConfigurationService;\n        this._opts = opts;\n        this._selection = range;\n        this._selectionId = null;\n        this._useLastEditRangeForCursorEndPosition = false;\n        this._selectionStartColumnStaysPut = false;\n    }\n    _addEditOperation(builder, range, text) {\n        if (this._useLastEditRangeForCursorEndPosition) {\n            builder.addTrackedEditOperation(range, text);\n        }\n        else {\n            builder.addEditOperation(range, text);\n        }\n    }\n    getEditOperations(model, builder) {\n        const startLine = this._selection.startLineNumber;\n        let endLine = this._selection.endLineNumber;\n        if (this._selection.endColumn === 1 && startLine !== endLine) {\n            endLine = endLine - 1;\n        }\n        const { tabSize, indentSize, insertSpaces } = this._opts;\n        const shouldIndentEmptyLines = (startLine === endLine);\n        if (this._opts.useTabStops) {\n            // if indenting or outdenting on a whitespace only line\n            if (this._selection.isEmpty()) {\n                if (/^\\s*$/.test(model.getLineContent(startLine))) {\n                    this._useLastEditRangeForCursorEndPosition = true;\n                }\n            }\n            // keep track of previous line's \"miss-alignment\"\n            let previousLineExtraSpaces = 0, extraSpaces = 0;\n            for (let lineNumber = startLine; lineNumber <= endLine; lineNumber++, previousLineExtraSpaces = extraSpaces) {\n                extraSpaces = 0;\n                const lineText = model.getLineContent(lineNumber);\n                let indentationEndIndex = strings.firstNonWhitespaceIndex(lineText);\n                if (this._opts.isUnshift && (lineText.length === 0 || indentationEndIndex === 0)) {\n                    // empty line or line with no leading whitespace => nothing to do\n                    continue;\n                }\n                if (!shouldIndentEmptyLines && !this._opts.isUnshift && lineText.length === 0) {\n                    // do not indent empty lines => nothing to do\n                    continue;\n                }\n                if (indentationEndIndex === -1) {\n                    // the entire line is whitespace\n                    indentationEndIndex = lineText.length;\n                }\n                if (lineNumber > 1) {\n                    const contentStartVisibleColumn = CursorColumns.visibleColumnFromColumn(lineText, indentationEndIndex + 1, tabSize);\n                    if (contentStartVisibleColumn % indentSize !== 0) {\n                        // The current line is \"miss-aligned\", so let's see if this is expected...\n                        // This can only happen when it has trailing commas in the indent\n                        if (model.tokenization.isCheapToTokenize(lineNumber - 1)) {\n                            const enterAction = getEnterAction(this._opts.autoIndent, model, new Range(lineNumber - 1, model.getLineMaxColumn(lineNumber - 1), lineNumber - 1, model.getLineMaxColumn(lineNumber - 1)), this._languageConfigurationService);\n                            if (enterAction) {\n                                extraSpaces = previousLineExtraSpaces;\n                                if (enterAction.appendText) {\n                                    for (let j = 0, lenJ = enterAction.appendText.length; j < lenJ && extraSpaces < indentSize; j++) {\n                                        if (enterAction.appendText.charCodeAt(j) === 32 /* CharCode.Space */) {\n                                            extraSpaces++;\n                                        }\n                                        else {\n                                            break;\n                                        }\n                                    }\n                                }\n                                if (enterAction.removeText) {\n                                    extraSpaces = Math.max(0, extraSpaces - enterAction.removeText);\n                                }\n                                // Act as if `prefixSpaces` is not part of the indentation\n                                for (let j = 0; j < extraSpaces; j++) {\n                                    if (indentationEndIndex === 0 || lineText.charCodeAt(indentationEndIndex - 1) !== 32 /* CharCode.Space */) {\n                                        break;\n                                    }\n                                    indentationEndIndex--;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (this._opts.isUnshift && indentationEndIndex === 0) {\n                    // line with no leading whitespace => nothing to do\n                    continue;\n                }\n                let desiredIndent;\n                if (this._opts.isUnshift) {\n                    desiredIndent = ShiftCommand_1.unshiftIndent(lineText, indentationEndIndex + 1, tabSize, indentSize, insertSpaces);\n                }\n                else {\n                    desiredIndent = ShiftCommand_1.shiftIndent(lineText, indentationEndIndex + 1, tabSize, indentSize, insertSpaces);\n                }\n                this._addEditOperation(builder, new Range(lineNumber, 1, lineNumber, indentationEndIndex + 1), desiredIndent);\n                if (lineNumber === startLine && !this._selection.isEmpty()) {\n                    // Force the startColumn to stay put because we're inserting after it\n                    this._selectionStartColumnStaysPut = (this._selection.startColumn <= indentationEndIndex + 1);\n                }\n            }\n        }\n        else {\n            // if indenting or outdenting on a whitespace only line\n            if (!this._opts.isUnshift && this._selection.isEmpty() && model.getLineLength(startLine) === 0) {\n                this._useLastEditRangeForCursorEndPosition = true;\n            }\n            const oneIndent = (insertSpaces ? cachedStringRepeat(' ', indentSize) : '\\t');\n            for (let lineNumber = startLine; lineNumber <= endLine; lineNumber++) {\n                const lineText = model.getLineContent(lineNumber);\n                let indentationEndIndex = strings.firstNonWhitespaceIndex(lineText);\n                if (this._opts.isUnshift && (lineText.length === 0 || indentationEndIndex === 0)) {\n                    // empty line or line with no leading whitespace => nothing to do\n                    continue;\n                }\n                if (!shouldIndentEmptyLines && !this._opts.isUnshift && lineText.length === 0) {\n                    // do not indent empty lines => nothing to do\n                    continue;\n                }\n                if (indentationEndIndex === -1) {\n                    // the entire line is whitespace\n                    indentationEndIndex = lineText.length;\n                }\n                if (this._opts.isUnshift && indentationEndIndex === 0) {\n                    // line with no leading whitespace => nothing to do\n                    continue;\n                }\n                if (this._opts.isUnshift) {\n                    indentationEndIndex = Math.min(indentationEndIndex, indentSize);\n                    for (let i = 0; i < indentationEndIndex; i++) {\n                        const chr = lineText.charCodeAt(i);\n                        if (chr === 9 /* CharCode.Tab */) {\n                            indentationEndIndex = i + 1;\n                            break;\n                        }\n                    }\n                    this._addEditOperation(builder, new Range(lineNumber, 1, lineNumber, indentationEndIndex + 1), '');\n                }\n                else {\n                    this._addEditOperation(builder, new Range(lineNumber, 1, lineNumber, 1), oneIndent);\n                    if (lineNumber === startLine && !this._selection.isEmpty()) {\n                        // Force the startColumn to stay put because we're inserting after it\n                        this._selectionStartColumnStaysPut = (this._selection.startColumn === 1);\n                    }\n                }\n            }\n        }\n        this._selectionId = builder.trackSelection(this._selection);\n    }\n    computeCursorState(model, helper) {\n        if (this._useLastEditRangeForCursorEndPosition) {\n            const lastOp = helper.getInverseEditOperations()[0];\n            return new Selection(lastOp.range.endLineNumber, lastOp.range.endColumn, lastOp.range.endLineNumber, lastOp.range.endColumn);\n        }\n        const result = helper.getTrackedSelection(this._selectionId);\n        if (this._selectionStartColumnStaysPut) {\n            // The selection start should not move\n            const initialStartColumn = this._selection.startColumn;\n            const resultStartColumn = result.startColumn;\n            if (resultStartColumn <= initialStartColumn) {\n                return result;\n            }\n            if (result.getDirection() === 0 /* SelectionDirection.LTR */) {\n                return new Selection(result.startLineNumber, initialStartColumn, result.endLineNumber, result.endColumn);\n            }\n            return new Selection(result.endLineNumber, result.endColumn, result.startLineNumber, initialStartColumn);\n        }\n        return result;\n    }\n};\nShiftCommand = ShiftCommand_1 = __decorate([\n    __param(2, ILanguageConfigurationService)\n], ShiftCommand);\nexport { ShiftCommand };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../core/range.js';\nimport { Selection } from '../core/selection.js';\nexport class SurroundSelectionCommand {\n    constructor(range, charBeforeSelection, charAfterSelection) {\n        this._range = range;\n        this._charBeforeSelection = charBeforeSelection;\n        this._charAfterSelection = charAfterSelection;\n    }\n    getEditOperations(model, builder) {\n        builder.addTrackedEditOperation(new Range(this._range.startLineNumber, this._range.startColumn, this._range.startLineNumber, this._range.startColumn), this._charBeforeSelection);\n        builder.addTrackedEditOperation(new Range(this._range.endLineNumber, this._range.endColumn, this._range.endLineNumber, this._range.endColumn), this._charAfterSelection);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        const firstOperationRange = inverseEditOperations[0].range;\n        const secondOperationRange = inverseEditOperations[1].range;\n        return new Selection(firstOperationRange.endLineNumber, firstOperationRange.endColumn, secondOperationRange.endLineNumber, secondOperationRange.endColumn - this._charAfterSelection.length);\n    }\n}\n/**\n * A surround selection command that runs after composition finished.\n */\nexport class CompositionSurroundSelectionCommand {\n    constructor(_position, _text, _charAfter) {\n        this._position = _position;\n        this._text = _text;\n        this._charAfter = _charAfter;\n    }\n    getEditOperations(model, builder) {\n        builder.addTrackedEditOperation(new Range(this._position.lineNumber, this._position.column, this._position.lineNumber, this._position.column), this._text + this._charAfter);\n    }\n    computeCursorState(model, helper) {\n        const inverseEditOperations = helper.getInverseEditOperations();\n        const opRange = inverseEditOperations[0].range;\n        return new Selection(opRange.endLineNumber, opRange.startColumn, opRange.endLineNumber, opRange.endColumn - this._charAfter.length);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../base/common/strings.js';\nimport { EditOperation } from '../core/editOperation.js';\nimport { Range } from '../core/range.js';\nexport class TrimTrailingWhitespaceCommand {\n    constructor(selection, cursors) {\n        this._selection = selection;\n        this._cursors = cursors;\n        this._selectionId = null;\n    }\n    getEditOperations(model, builder) {\n        const ops = trimTrailingWhitespace(model, this._cursors);\n        for (let i = 0, len = ops.length; i < len; i++) {\n            const op = ops[i];\n            builder.addEditOperation(op.range, op.text);\n        }\n        this._selectionId = builder.trackSelection(this._selection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._selectionId);\n    }\n}\n/**\n * Generate commands for trimming trailing whitespace on a model and ignore lines on which cursors are sitting.\n */\nexport function trimTrailingWhitespace(model, cursors) {\n    // Sort cursors ascending\n    cursors.sort((a, b) => {\n        if (a.lineNumber === b.lineNumber) {\n            return a.column - b.column;\n        }\n        return a.lineNumber - b.lineNumber;\n    });\n    // Reduce multiple cursors on the same line and only keep the last one on the line\n    for (let i = cursors.length - 2; i >= 0; i--) {\n        if (cursors[i].lineNumber === cursors[i + 1].lineNumber) {\n            // Remove cursor at `i`\n            cursors.splice(i, 1);\n        }\n    }\n    const r = [];\n    let rLen = 0;\n    let cursorIndex = 0;\n    const cursorLen = cursors.length;\n    for (let lineNumber = 1, lineCount = model.getLineCount(); lineNumber <= lineCount; lineNumber++) {\n        const lineContent = model.getLineContent(lineNumber);\n        const maxLineColumn = lineContent.length + 1;\n        let minEditColumn = 0;\n        if (cursorIndex < cursorLen && cursors[cursorIndex].lineNumber === lineNumber) {\n            minEditColumn = cursors[cursorIndex].column;\n            cursorIndex++;\n            if (minEditColumn === maxLineColumn) {\n                // The cursor is at the end of the line => no edits for sure on this line\n                continue;\n            }\n        }\n        if (lineContent.length === 0) {\n            continue;\n        }\n        const lastNonWhitespaceIndex = strings.lastNonWhitespaceIndex(lineContent);\n        let fromColumn = 0;\n        if (lastNonWhitespaceIndex === -1) {\n            // Entire line is whitespace\n            fromColumn = 1;\n        }\n        else if (lastNonWhitespaceIndex !== lineContent.length - 1) {\n            // There is trailing whitespace\n            fromColumn = lastNonWhitespaceIndex + 2;\n        }\n        else {\n            // There is no trailing whitespace\n            continue;\n        }\n        fromColumn = Math.max(minEditColumn, fromColumn);\n        r[rLen++] = EditOperation.delete(new Range(lineNumber, fromColumn, lineNumber, maxLineColumn));\n    }\n    return r;\n}\n"],"names":["RenderingContext","_RestrictedRenderingC","_inherits","_super","_createSuper","viewLayout","viewportData","viewLines","_this","_classCallCheck","call","_renderingContextBrand","undefined","_viewLines","_createClass","key","value","range","includeNewLines","this","linesVisibleRangesForRange","position","visibleRangeForPosition","RestrictedRenderingContext","_restrictedRenderingContextBrand","_viewLayout","scrollWidth","getScrollWidth","scrollHeight","getScrollHeight","visibleRange","bigNumbersDelta","vInfo","getCurrentViewport","scrollTop","top","scrollLeft","left","viewportWidth","width","viewportHeight","height","absoluteTop","lineNumber","includeViewZones","getVerticalOffsetForLineNumber","getVerticalOffsetAfterLineNumber","getDecorationsInViewport","LineVisibleRanges","outsideRenderedLine","ranges","continuesOnNextLine","HorizontalRange","_horizontalRangeBrand","Math","round","concat","result","Array","length","i","len","FloatHorizontalRange","_floatHorizontalRangeBrand","a","b","HorizontalPosition","originalLeft","VisibleRanges","ViewController","configuration","viewModel","userInputEvents","commandDelegate","text","pasteOnNewLine","multicursorText","mode","paste","type","replacePrevCharCnt","replaceNextCharCnt","positionDelta","compositionType","startComposition","endComposition","cut","modelSelection","CoreNavigationCommands","SetSelection","runCoreEditorCommand","source","selection","viewPosition","minColumn","getLineMinColumn","column","Position","data","options","get","altKey","ctrlKey","metaKey","selectionClipboardIsOn","platform","columnSelection","middleButton","_columnSelect","mouseColumn","inSelectionMode","startedOnLineNumbers","_hasMulticursorModifier","_lastCursorLineSelect","revealType","_createCursor","_lineSelectDrag","_lineSelect","mouseDownCount","_selectAll","_lastCursorLineSelectDrag","onInjectedText","_lastCursorWordSelect","_wordSelectDrag","_wordSelect","_hasNonMulticursorModifier","shiftKey","_lastCursorMoveToSelect","_moveToSelect","moveTo","_validateViewColumn","_convertViewToModelPosition","MoveTo","_usualArgs","MoveToSelect","doColumnSelect","ColumnSelect","wholeLine","CreateCursor","LastCursorMoveToSelect","WordSelect","WordSelectDrag","LastCursorWordSelect","LineSelect","LineSelectDrag","LastCursorLineSelect","LastCursorLineSelectDrag","SelectAll","coordinatesConverter","convertViewPositionToModelPosition","e","emitKeyDown","emitKeyUp","emitContextMenu","emitMouseMove","emitMouseLeave","emitMouseUp","emitMouseDown","emitMouseDrag","emitMouseDrop","emitMouseDropCanceled","emitMouseWheel","RenderedLinesCollection","createLine","_createLine","_set","rendLineNumberStart","lines","_lines","_rendLineNumberStart","lineIndex","BugIndicatingError","deleteFromLineNumber","deleteToLineNumber","getCount","startLineNumber","getStartLineNumber","endLineNumber","getEndLineNumber","deleteCnt","deleteStartIndex","deleteCount","deleteAboveCount","splice","changeFromLineNumber","changeCount","changeToLineNumber","someoneNotified","changedLineNumber","onContentChanged","insertFromLineNumber","insertToLineNumber","insertCnt","newLines","insertIndex","beforeLines","slice","afterLines","deletedLines","notifiedSomeone","rng","toLineNumber","fromLineNumber","from","max","to","min","onTokensChanged","VisibleLinesCollection","host","_host","domNode","_createDomNode","_linesCollection","createVisibleLine","createFastDomNode","document","createElement","setClassName","setPosition","setAttribute","hasChanged","flush","onLinesChanged","count","deleted","onLinesDeleted","lineDomNode","getDomNode","removeChild","onLinesInserted","scrollTopChanged","getLine","inp","_get","renderer","ViewLayerRenderer","ctx","linesLength","resCtx","render","relativeVerticalOffset","inContext","stopLineNumber","deltaTop","x","_finishRendering","_renderUntouchedLines","_insertLinesBefore","removeCnt","_removeLinesBefore","_insertLinesAfter","_removeLinesAfter","startIndex","endIndex","deltaLN","layoutLine","newLinesLen","removeCount","removeIndex","domNodeIsEmpty","newLinesHTML","wasNew","_ttPolicy","createHTML","lastChild","innerHTML","insertAdjacentHTML","currChild","line","setDomNode","previousSibling","invalidLinesHTML","wasInvalid","hugeDomNode","firstChild","parentNode","replaceChild","sb","_sb","reset","hadNewLine","renderLine","_finishRenderingNewLines","build","hadInvalidLine","_finishRenderingInvalidLines","createTrustedTypesPolicy","StringBuilder","ViewOverlays","_ViewPart","context","_visibleLines","_assertThisInitialized","fontInfo","_context","applyFontInfo","_dynamicOverlays","_isFocused","_getPrototypeOf","prototype","shouldRender","dispose","ViewOverlayLine","overlay","push","onConfigurationChanged","getVisibleLine","onFlushed","isFocused","onScrollChanged","onZonesChanged","toRender","filter","dynamicOverlay","prepareRender","onDidRender","_viewOverlaysRender","toggleClassName","renderLines","ViewPart","dynamicOverlays","_configuration","_lineHeight","_domNode","_renderedContent","appendString","String","setTop","setHeight","ContentViewOverlays","_ViewOverlays","_super2","_this2","layoutInfo","_contentWidth","contentWidth","scrollWidthChanged","setWidth","MarginViewOverlays","_ViewOverlays2","_super3","_this3","_contentLeft","contentLeft","scrollHeightChanged","_ViewEventHandler","addEventHandler","removeEventHandler","ViewEventHandler","PartFingerprints","target","partId","r","getAttribute","parseInt","child","stopAt","resultLen","ownerDocument","body","nodeType","ELEMENT_NODE","read","parentElement","Uint8Array","ViewUserInputEvents","onKeyDown","onKeyUp","onContextMenu","onMouseMove","onMouseLeave","onMouseDown","onMouseUp","onMouseDrag","onMouseDrop","onMouseDropCanceled","onMouseWheel","_coordinatesConverter","_a","_convertViewToModelMouseEvent","event","_convertViewToModelMouseTarget","convertViewToModelMouseTarget","Object","assign","convertViewRangeToModelRange","detail","convertViewToModelViewZoneData","viewZoneId","positionBefore","positionAfter","afterLineNumber","CodeEditorWidget_1","CodeEditorContributions","_Disposable","_editor","_instantiationService","_instances","_register","DisposableMap","_pending","Map","_finishedInstantiation","editor","contributions","instantiationService","_step","_iterator","_createForOfIteratorHelper","s","n","done","desc","has","id","onUnexpectedError","Error","set","err","f","_instantiateSome","runWhenIdle","_step2","contributionsState","_iterator2","_step2$value","_slicedToArray","contribution","saveViewState","_step3","_iterator3","_step3$value","restoreViewState","_instantiateById","instantiation","_step4","contribs","_findPendingContributionsByInstantiation","_iterator4","contrib","_step5","_iterator5","delete","instance","createInstance","ctor","console","warn","Disposable","__decorate","decorators","d","c","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","then","apply","EDITOR_ID","ModelData","model","view","hasRealView","listenersToRemove","attachedView","onBeforeDetached","CodeEditorWidget","domElement","_options","codeEditorWidgetOptions","codeEditorService","commandService","contextKeyService","themeService","notificationService","accessibilityService","languageConfigurationService","languageFeaturesService","_deliveryQueue","createEventDeliveryQueue","_contributions","_onDidDispose","Emitter","onDidDispose","_onDidChangeModelContent","deliveryQueue","onDidChangeModelContent","_onDidChangeModelLanguage","onDidChangeModelLanguage","_onDidChangeModelLanguageConfiguration","onDidChangeModelLanguageConfiguration","_onDidChangeModelOptions","onDidChangeModelOptions","_onDidChangeModelDecorations","onDidChangeModelDecorations","_onDidChangeModelTokens","onDidChangeModelTokens","_onDidChangeConfiguration","onDidChangeConfiguration","_onDidChangeModel","onDidChangeModel","_onDidChangeCursorPosition","onDidChangeCursorPosition","_onDidChangeCursorSelection","onDidChangeCursorSelection","_onDidAttemptReadOnlyEdit","InteractionEmitter","onDidAttemptReadOnlyEdit","_onDidLayoutChange","onDidLayoutChange","_editorTextFocus","BooleanEventEmitter","onDidFocusEditorText","onDidChangeToTrue","onDidBlurEditorText","onDidChangeToFalse","_editorWidgetFocus","onDidFocusEditorWidget","onDidBlurEditorWidget","_onWillType","onWillType","_onDidType","onDidType","_onDidCompositionStart","onDidCompositionStart","_onDidCompositionEnd","onDidCompositionEnd","_onDidPaste","onDidPaste","_onMouseUp","_onMouseDown","_onMouseDrag","_onMouseDrop","_onMouseDropCanceled","_onDropIntoEditor","onDropIntoEditor","_onContextMenu","_onMouseMove","_onMouseLeave","_onMouseWheel","_onKeyUp","_onKeyDown","_onDidContentSizeChange","onDidContentSizeChange","_onDidScrollChange","onDidScrollChange","_onDidChangeViewZones","onDidChangeViewZones","_onDidChangeHiddenAreas","onDidChangeHiddenAreas","_actions","_bannerDomNode","_dropIntoEditorDecorations","createDecorationsCollection","willCreateCodeEditor","_domElement","_overflowWidgetsDomNode","overflowWidgetsDomNode","_id","_decorationTypeKeysToIds","_decorationTypeSubtypes","_telemetryData","telemetryData","_createConfiguration","isSimpleWidget","onDidChange","fire","_contextKeyService","createScoped","_notificationService","_codeEditorService","_commandService","_themeService","EditorContextKeysManager","EditorModeContext","createChild","ServiceCollection","IContextKeyService","_modelData","_focusTracker","CodeEditorWidgetFocusTracker","onChange","setValue","hasFocus","_contentWidgets","_overlayWidgets","_glyphMarginWidgets","isArray","EditorExtensionsRegistry","getEditorContributions","initialize","getEditorActions","_loop","action","internalAction","InternalEditorAction","label","alias","precondition","invokeFunction","accessor","runEditorCommand","isDropIntoEnabled","enabled","dom","DragAndDropObserver","onDragEnter","onDragOver","getTargetAtClientPoint","clientX","clientY","showDropIndicatorAt","onDrop","_regeneratorRuntime","mark","_callee","wrap","prev","abrupt","removeDropIndicator","dataTransfer","stop","onDragLeave","onDragEnd","addCodeEditor","reason","writeScreenReaderContent","EditorConfiguration","getEditorType","editorCommon","ICodeEditor","removeCodeEditor","clear","_removeDecorationTypes","_postDetachModelCleanup","_detachModel","fn","newOptions","updateOptions","getRawOptions","WordOperations","getWordAtPosition","preserveBOM","eolPreference","lineEnding","getValue","newValue","hasTextFocus","detachedModel","_attachModel","hasModel","focus","oldModelUrl","uri","newModelUrl","onAfterModelAttached","decorationType","subTypes","subType","_removeDecorationType","getVisibleRanges","getVisibleRangesPlusViewportAboveBelow","getWhitespaces","_getVerticalOffsetForPosition","_getVerticalOffsetAfterPosition","setHiddenAreas","map","Range","lift","rawPosition","validatePosition","tabSize","getOptions","CursorColumns","visibleColumnFromColumn","getLineContent","getPosition","isIPosition","setSelections","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","modelRange","verticalType","revealHorizontal","scrollType","isIRange","validatedModelRange","validateRange","viewRange","convertModelRangeToViewRange","revealRange","_revealLine","_sendRevealRange","_revealPosition","getSelection","getSelections","something","isSelection","Selection","isISelection","isRange","_setSelectionImpl","startColumn","endColumn","sel","_revealLines","revealVerticalInCenter","_revealRange","getContentWidth","getCurrentScrollLeft","getContentHeight","getCurrentScrollTop","newScrollLeft","setScrollPosition","newScrollTop","hasPendingScrollAnimation","cursorState","saveCursorState","viewState","saveState","codeEditorState","restoreCursorState","reducedState","reduceRestoreState","restoreState","_getViewModel","visibleLinesStabilized","values","getActions","isSupported","handlerId","payload","_startComposition","_endComposition","args","_type","_compositionType","replaceCharCnt","_paste","_cut","getAction","run","_triggerEditorCommand","_triggerCommand","executeCommand","startPosition","getStartPosition","endPosition","languageId","command","getEditorCommand","pushStackElement","popStackElement","edits","endCursorState","cursorStateComputer","executeEdits","commands","executeCommands","decorations","EditorDecorationsCollection","callback","changeDecorations","getLineDecorations","filterValidationDecorations","getDecorationsInRange","oldDecorations","newDecorations","deltaDecorations","decorationIds","changeAccessor","decorationTypeKey","oldDecorationsIds","hasOwnProperty","cssClassName","createOverviewRuler","browserEvent","delegateVerticalScrollbarPointerDown","delegateScrollFromMouseWheelEvent","dimension","observeContainer","widget","widgetData","getId","addContentWidget","widgetId","layoutContentWidget","removeContentWidget","addOverlayWidget","layoutOverlayWidget","removeOverlayWidget","addGlyphMarginWidget","layoutGlyphMarginWidget","removeGlyphMarginWidget","change","getScrollTop","getOffsetForColumn","glyphMarginWidth","lineNumbersWidth","decorationsWidth","getScrollLeft","forceRedraw","setAriaOptions","domNodeHeight","contains","setReservedHeight","prepend","getLanguageId","setIsDominatedByLongLines","isDominatedByLongLines","setModelLineCount","getLineCount","onBeforeAttached","ViewModel","DOMLineBreaksComputerFactory","create","MonospaceLineBreaksComputerFactory","scheduleAtNextAnimationFrame","onWillDispose","setModel","onEvent","kind","reachedMaxCursorCount","multiCursorLimit","getOption","message","nls","prompt","Severity","Warning","query","positions","selections","e1","secondaryPositions","e2","secondarySelections","modelVersionId","oldSelections","oldModelVersionId","_this$_createView","_createView","_this$_createView2","appendChild","keys","toString","_this4","viewUserInputEvents","View","getColorTheme","removeAllDecorationsWithOwnerId","removeDomNode","removeAttribute","removeDecorationType","dropIntoEditorDecorationOptions","revealPosition","createKey","modelData","modelLineNumber","modelColumn","modelPosition","convertModelPositionToViewPosition","ModelDecorationOptions","register","description","className","IInstantiationService","ICodeEditorService","ICommandService","IThemeService","INotificationService","IAccessibilityService","ILanguageConfigurationService","ILanguageFeaturesService","_Disposable2","_emitterOptions","_this5","_onDidChangeToTrue","_onDidChangeToFalse","_value","_Emitter","_this6","onBeforeInteractionEvent","_Disposable3","_super4","_this7","_editorSimpleInput","EditorContextKeys","editorSimpleInput","bindTo","_editorFocus","_textInputFocus","textInputFocus","editorTextFocus","_tabMovesFocus","tabMovesFocus","_editorReadonly","readOnly","_inDiffEditor","inDiffEditor","_editorColumnSelection","_hasMultipleSelections","hasMultipleSelections","_hasNonEmptySelection","hasNonEmptySelection","_canUndo","canUndo","_canRedo","canRedo","_updateFromConfig","_updateFromSelection","_updateFromFocus","_updateFromModel","TabFocus","onDidChangeTabFocus","tabFocusMode","getTabFocusMode","some","isEmpty","hasWidgetFocus","getModel","Boolean","_Disposable4","_super5","_languageFeaturesService","_this8","_langId","_hasCompletionItemProvider","hasCompletionItemProvider","_hasCodeActionsProvider","hasCodeActionsProvider","_hasCodeLensProvider","hasCodeLensProvider","_hasDefinitionProvider","hasDefinitionProvider","_hasDeclarationProvider","hasDeclarationProvider","_hasImplementationProvider","hasImplementationProvider","_hasTypeDefinitionProvider","hasTypeDefinitionProvider","_hasHoverProvider","hasHoverProvider","_hasDocumentHighlightProvider","hasDocumentHighlightProvider","_hasDocumentSymbolProvider","hasDocumentSymbolProvider","_hasReferenceProvider","hasReferenceProvider","_hasRenameProvider","hasRenameProvider","_hasSignatureHelpProvider","hasSignatureHelpProvider","_hasInlayHintsProvider","hasInlayHintsProvider","_hasDocumentFormattingProvider","hasDocumentFormattingProvider","_hasDocumentSelectionFormattingProvider","hasDocumentSelectionFormattingProvider","_hasMultipleDocumentFormattingProvider","hasMultipleDocumentFormattingProvider","_hasMultipleDocumentSelectionFormattingProvider","hasMultipleDocumentSelectionFormattingProvider","_isInWalkThrough","isInWalkThroughSnippet","update","_update","completionProvider","codeActionProvider","codeLensProvider","definitionProvider","declarationProvider","implementationProvider","typeDefinitionProvider","hoverProvider","documentHighlightProvider","documentSymbolProvider","referenceProvider","renameProvider","documentFormattingEditProvider","documentRangeFormattingEditProvider","signatureHelpProvider","inlayHintsProvider","_this9","bufferChangeEvents","_this10","all","scheme","Schemas","walkThroughSnippet","_Disposable5","_super6","_this11","_onChange","_hasFocus","_domFocusTracker","trackFocus","onDidFocus","onDidBlur","_decorationIds","_isChangingDecorations","listener","thisArgs","disposables","_this12","index","getDecorationRange","decorationId","decoration","includes","_this13","squigglyStart","encodeURIComponent","squigglyEnd","getSquigglySVGData","color","dotdotdotStart","dotdotdotEnd","registerThemingParticipant","theme","collector","errorForeground","getColor","editorErrorForeground","addRule","warningForeground","editorWarningForeground","infoForeground","editorInfoForeground","hintForeground","editorHintForeground","unnecessaryForeground","editorUnnecessaryCodeOpacity","rgba","ToggleCollapseUnchangedRegions","_Action","title","localize","original","icon","Codicon","toggled","ContextKeyExpr","menu","when","MenuId","EditorTitle","order","group","configurationService","IConfigurationService","updateValue","Action2","registerAction2","ToggleShowMovedCodeBlocks","_Action2","ToggleUseInlineViewWhenSpaceIsLimited","_Action3","MenuRegistry","appendMenuItem","and","diffEditorRenderSideBySideInlineBreakpointReached","move","ContextKeyEqualsExpr","diffEditorCategory","SwitchSide","_EditorAction","arrowSwap","f1","category","arg","diffEditor","findFocusedDiffEditor","DiffEditorWidget","dryRun","destinationSelection","mapToOtherSide","switchSide","EditorAction2","ExitCompareMove","_EditorAction2","close","comparingMovedCode","keybinding","weight","primary","exitCompareMove","CollapseAllUnchangedRegions","_EditorAction3","fold","collapseAllUnchangedRegions","ShowAllUnchangedRegions","_EditorAction4","_super7","unfold","showAllUnchangedRegions","accessibleDiffViewerCategory","AccessibleDiffViewerNext","_Action4","_super8","accessibleDiffViewerNext","accessibleDiffViewerVisible","negate","AccessibleDiffViewerPrev","_Action5","_super9","accessibleDiffViewerPrev","diffEditors","listDiffEditors","activeCodeEditor","getFocusedCodeEditor","getActiveCodeEditor","getModifiedEditor","getOriginalEditor","activeElement","getActiveElement","isElementOrParentOf","getContainerDomNode","elementOrParent","element","CommandsRegistry","registerCommandAlias","applyObservableDecorations","DisposableStore","decorationsCollection","add","autorunOpts","debugName","reader","appendRemoveOnDispose","parent","toDisposable","ObservableElementSizeObserver","elementSizeObserver","ElementSizeObserver","_width","observableValue","getWidth","_height","getHeight","transaction","tx","observe","automaticLayout","startObserving","stopObserving","animatedObservable","base","store","targetVal","startVal","curVal","animationStartMs","animationFrame","t","passedMs","Date","now","floor","pow","requestAnimationFrame","autorunHandleChanges","createEmptyChangeSummary","animate","handleChange","didChange","cancelAnimationFrame","ViewZoneOverlayWidget","viewZone","htmlElement","ManagedOverlayWidget","applyStyle","actualHeight","actualTop","PlaceholderViewZone","_afterLineNumber","heightInPx","_actualTop","_actualHeight","showInHiddenAreas","onDomNodeTop","onComputedHeight","_overlayWidgetId","_counter","_overlayWidget","style","autorun","_i","_Object$entries","entries","_Object$entries$_i","val","replace","m","toLowerCase","readHotReloadableExport","isHotReloadEnabled","observableSignalFromEvent","registerHotReloadHandler","oldExports","_toConsumableArray","v","_newExports","observeHotReloadableExports","applyViewZones","viewZones","setIsUpdating","lastViewZoneIds","curViewZones","viewZonIdsPerViewZone","viewZoneIdPerOnChangeObservable","changeViewZones","_i2","_lastViewZoneIds","removeZone","z","addZone","changeSummary","changedObservable","vz","layoutZone","_i3","_lastViewZoneIds2","DisposableCancellationTokenSource","_CancellationTokenSou","CancellationTokenSource","accessibleDiffViewerInsertIcon","registerIcon","accessibleDiffViewerRemoveIcon","remove","accessibleDiffViewerCloseIcon","AccessibleDiffViewer","_parentNode","_visible","_setVisible","_canClose","_diffs","_editors","derivedWithStore","visible","visibility","recomputeInitiallyAndOnChange","isVisible","nextGroup","previousGroup","canClose","_audioCueService","_groups","_currentGroupIdx","_currentElementIdx","groups","currentGroup","idx","currentGroupIndex","currentElement","diffs","originalLineCount","modifiedLineCount","groupAdjacentBy","modified","endLineNumberExclusive","viewElementGroupLineMargin","g","viewElements","HeaderViewElement","origFullRange","LineRange","modifiedFullRange","forEachAdjacent","origRange","modifiedRange","forEach","origLineNumber","UnchangedLineViewElement","DeletedLineViewElement","modifiedLineNumber","AddedLineViewElement","join","originalRange","ViewElementGroup","LineRangeMapping","computeViewElementGroups","p","findIndex","currentViewItem","LineType","Deleted","playAudioCue","AudioCue","diffLineDeleted","Added","diffLineInserted","Header","diff","setSelection","fromPositions","delta","subtransaction","OffsetRange","ofLength","clipCyclic","_goToGroupDelta","clip","_goToLineDelta","indexOf","curElem","originalLineNumber","revealLine","IAudioCueService","Unchanged","_element","_model","_languageService","actionBarContainer","_actionBar","ActionBar","Action","ThemeIcon","asClassName","_content","_scrollbar","DomScrollableElement","autorunWithStore","_render","addStandardDisposableListener","equals","preventDefault","goToNextLine","goToPreviousLine","revealCurrentElementInEditor","originalOptions","modifiedOptions","container","originalModel","modifiedModel","originalModelOpts","modifiedModelOpts","lineHeight","_loop2","row","viewItem","header","diffIndex","diffsLength","getAriaLines","originalChangedLinesCntAria","modifiedChangedLinesCntAria","comment","cell","createTextNode","_createRow","isSelectedObs","derived","isSelected","tabIndex","addDisposableListener","goToLine","scanDomNode","item","originalLayoutInfo","originalLineNumbersWidth","modifiedLayoutInfo","modifiedLineNumbersWidth","rowClassName","lineNumbersExtraClassName","spacerIcon","minWidth","ariaLevel","innerText","paddingRight","lineContent","spacer","spacerCodicon","html","_getLineHtml","languageIdCodec","ariaLabel","lineTokens","LineTokens","createEmpty","isBasicASCII","ViewLineRenderingData","mightContainNonBasicASCII","containsRTL","mightContainRTL","renderViewLine2","RenderLineInput","isMonospace","canUseHalfwidthRightwardsArrow","spaceWidth","middotWidth","wsmiddotWidth","EditorFontLigatures","OFF","ILanguageService","diffInsertIcon","diffRemoveIcon","diffLineAddDecorationBackgroundWithIndicator","isWholeLine","linesDecorationsClassName","marginClassName","diffLineDeleteDecorationBackgroundWithIndicator","diffLineAddDecorationBackground","diffLineDeleteDecorationBackground","diffAddDecoration","shouldFillLineOnLineBreak","diffWholeLineAddDecoration","diffAddDecorationEmpty","diffDeleteDecoration","diffWholeLineDeleteDecoration","diffDeleteDecorationEmpty","arrowRevertChange","glyphMarginHoverMessage","MarkdownString","isTrusted","supportThemeIcons","appendMarkdown","glyphMarginClassName","arrowRight","zIndex","MovedBlocksLinesPart","_rootElement","_diffModel","_originalEditorLayoutInfo","_modifiedEditorLayoutInfo","_originalScrollTop","observableFromEvent","_modifiedScrollTop","_viewZonesChanged","_modifiedViewZonesChangedSignal","_originalViewZonesChangedSignal","_state","replaceChildren","moves","movedTexts","infoOrig","infoMod","computeLineStart","getTopForLineNumber","start","lineRangeMapping","startOffset","end","bottom","fromWithoutScroll","toWithoutScroll","sort","tieBreakComparators","compareBy","l","booleanComparator","numberComparator","layout","LinesLayout","compute","lineAreaLeft","verticalScrollbarWidth","lineAreaWidth","getTrackCount","padding","movedCodeBlockPadding","track","getTrack","verticalY","right","rectWidth","rect","createElementNS","classList","rectHeight","path","toggle","activeMovedText","arrowHeight","info","info2","movedBlockViewZones","constObservable","zones","blocks","MovedBlockOverlayWidget","originalCursorPosition","modifiedCursorPosition","originalHasFocus","setTimeout","modifiedHasFocus","lastChangedEditor","summary","movedText","originalPos","find","modifiedPos","movedTextToCompare","setActiveMovedText","_trackCount","trackPerLineIdx","lineIdx","setsPerTrack","trackIdx","intersectsStrict","findMaxIdxBy","intersectWithRangeLength","OffsetRangeSet","addRange","_ViewZoneOverlayWidge","_viewZone","_move","_kind","root","h","_nodes","marginRight","editorLayout","getLayoutInfo","changes","actionBar","highlightToggledItems","caption","actionCompare","compareChanges","isActive","checked","DiffEditorDecorations","_decorations","renderIndicators","showEmptyDecorations","originalDecorations","modifiedDecorations","mappings","toInclusiveRange","innerChanges","shouldRenderRevertArrows","fullRangeOriginal","fullRangeModified","blockClassName","blockPadding","DiffEditorSash","_dimensions","_sashRatio","sashLeft","ratio","splitViewDefaultRatio","_computeSashLeft","_sash","Sash","getVerticalSashTop","getVerticalSashLeft","getVerticalSashHeight","orientation","_startSashPosition","onDidStart","sashPosition","currentX","startX","onDidEnd","onDidReset","enableSplitViewResizing","state","sashes","orthogonalEndSash","desiredRatio","midPoint","MINIMUM_EDITOR_WIDTH","TreeElement","children","candidate","candidateId","name","size","OutlineElement","_TreeElement","symbol","OutlineGroup","_TreeElement2","OutlineModel","_TreeElement3","_step$value","Iterable","first","roots","compareRangesUsingStarts","getTopLevelSymbols","bucket","_flattenDocumentSymbols","compare","getEndPosition","registry","textModel","token","cts","provider","ordered","promises","findId","displayName","provideDocumentSymbols","_makeOutlineElement","onUnexpectedExternalError","empty","newProvider","cancel","isCancellationRequested","_compact","finally","res","childInfo","overrideContainerLabel","_step6","_iterator6","entry","tags","containerName","selectionRange","HideUnchangedRegionsFeature","_isUpdatingViewZones","_modifiedOutlineSource","OutlineSource","ensureOriginalLineIsVisible","ensureModifiedLineIsVisible","unchangedRegions","_b","modifiedOutlineSource","origViewZones","modViewZones","sideBySide","renderSideBySide","curUnchangedRegions","shouldHideControls","getHiddenOriginalRange","origVz","CollapsedCodeOverlayWidget","originalUnchangedRange","getHiddenModifiedRange","modViewZone","modifiedUnchangedRange","unchangedLinesDecoration","unchangedLinesDecorationShow","isDefined","rightButton","region","collapseAll","stopPropagation","_textModel","_currentModel","documentSymbolProviderChanged","textModelChanged","Event","debounce","onDidChangeContent","src","sent","isDisposed","startRange","symbols","asListOfDocumentSymbols","reverseOrder","WorkerBasedDocumentDiffProvider_1","_unchangedRegion","_unchangedRegionRange","hide","_revealModifiedHiddenLine","display","justifyContent","alignItems","flexShrink","$","role","onclick","showAll","renderLabelWithIcons","button","startTop","didMove","cur","visibleLineCountTop","isDragged","mouseMoveListener","window","abs","lineDelta","newVal","getMaxVisibleLineCountTop","mouseUpListener","showMoreAbove","hideUnchangedRegionsRevealLineCount","visibleLineCountBottom","getMaxVisibleLineCountBottom","top2","setScrollTop","showMoreBelow","lineCount","linesHiddenText","span","addEventListener","items","getBreadcrumbItems","SymbolKinds","toIcon","divItem","renderIcon","chevronRight","others","WorkerBasedDocumentDiffProvider","editorWorkerService","telemetryService","onDidChangeEventEmitter","diffAlgorithm","diffAlgorithmOnDidChangeSubscription","setOptions","cancellationToken","uriKey","sw","timeMs","computeDiff","getLineMaxColumn","identical","quitEarly","DetailedLineRangeMapping","RangeMapping","getFullModelRange","JSON","stringify","getAlternativeVersionId","diffCache","StopWatch","elapsed","publicLog2","timedOut","detectedMoves","computeMoves","IEditorWorkerService","ITelemetryService","IDiffProviderFactoryService","createDecorator","DiffProviderFactoryService","registerSingleton","DiffEditorViewModel","_diffProviderFactoryService","_isDiffUpToDate","isDiffUpToDate","_diff","_unchangedRegions","regions","originalDecorationIds","modifiedDecorationIds","hideUnchangedRegions","_activeMovedText","_hoveredMovedText","_cancellationTokenSource","_diffProvider","diffProvider","createDiffProvider","onChangeSignal","contentChangedSignal","observableSignal","debouncer","RunOnceScheduler","trigger","updateUnchangedRegions","newUnchangedRegions","UnchangedRegion","fromDiffs","hideUnchangedRegionsMinimumLineCount","hideUnchangedRegionsContextLineCount","lastUnchangedRegions","lastUnchangedRegionsOrigRanges","fromRange","lastUnchangedRegionsModRanges","setHiddenModifiedRange","textEdits","TextEditInfo","fromModelContentChanges","applyModifiedEdits","_lastDiff","DiffState","fromDiffResult","currentSyncedMovedText","intersect","schedule","applyOriginalEdits","documentDiffProvider","originalTextEditInfos","modifiedTextEditInfos","DefaultLinesDiffComputer","optimizeSequenceDiffs","combineTextEditInfos","ignoreTrimWhitespace","maxComputationTimeMs","showMoves","normalizeDocumentDiff","showModifiedLine","showOriginalLine","_callee2","_context2","waitForState","collapsedRegions","serialize","deserialize","rangeMapping","setEndPosition","normalizeRangeMapping","DiffMapping","_visibleLineCountTop","_visibleLineCountBottom","_shouldHideControls","setState","maxVisibleLineCountTop","maxVisibleLineCountBottom","minHiddenLineCount","minContext","_step7","inversedMappings","inverse","_iterator7","mapping","origStart","modStart","atStart","atEnd","originalTextModel","modifiedTextModel","InlineDiffDeletedCodeMargin","_getViewZoneId","_marginDomNode","_modifiedEditor","_viewLineCounts","_originalTextModel","_contextMenuService","_clipboardService","_visibility","_diffActions","lightBulb","currentLineNumberOffset","useShadowDOM","isIOS","showContextMenu","y","domForShadowRoot","getAnchor","actions","isDeletion","originalText","getValueInRange","toExclusiveRange","writeText","eof","getEndOfLineSequence","_callee3","_context3","revert","autoSelectFirstItem","_getDomNodePagePositi","getDomNodePagePosition","pad","posx","_updateLightBulbPosition","posy","marginDomNode","offset","lineNumberOffset","newTop","acc","ttPolicy","LineSource","lineBreakData","RenderOptions","disableMonospaceOptimizations","typicalHalfwidthCharacterWidth","scrollBeyondLastColumn","lineDecorationsWidth","stopRenderingLineAfter","renderWhitespace","renderControlCharacters","fontLigatures","modifiedEditorOptions","renderOriginalLine","viewLineIdx","hasCharChanges","output","renderViewLine","characterMapping","getHorizontalOffset","ViewZoneManager","_diffEditorWidget","_canIgnoreViewZoneUpdateEvent","_originalTopPadding","_originalScrollOffset","_originalScrollOffsetAnimated","_store","_modifiedTopPadding","_modifiedScrollOffset","_modifiedScrollOffsetAnimated","isChangingViewZones","updateImmediately","_args","originalModelTokenizationCompleted","onDidChangeTokens","tokenization","backgroundTokenizationState","alignmentViewZoneIdsOrig","Set","alignmentViewZoneIdsMod","alignments","diffModel","innerHunkAlignment","computeRangeAlignment","alignmentsSyncedMovedText","syncedMovedText","createFakeLinesDiv","alignmentViewZonesDisposables","alignmentViewZones","_c","_d","_e","_f","_g","_h","alignmentsVal","modifiedTopPaddingVal","suppressMouseDown","originalTopPaddingVal","deletedCodeLineBreaksComputer","createLineBreaksComputer","addRequest","finalize","lineBreakDataIdx","modLineHeight","renderOptions","fromEditor","deletedCodeDomNode","mapToLineArray","getLineTokens","_","InlineDecoration","maxCharsPerLine","renderedLineCount","viewLineCounts","actualDecorations","LineDecoration","Number","MAX_SAFE_INTEGER","lastBreakOffset","breakOffsets","breakOffset","viewLineTokens","sliceAndInflate","extractWrapped","trustedhtml","heightInLines","minWidthInPx","marginElement","zoneId","assertIsDefined","setZoneId","modifiedHeightInPx","originalHeightInPx","deltaLength","arrow","createViewZoneMarginArrow","orig","mod","scrollState","StableEditorScrollState","capture","alignmentViewZones_","aOrig","aMod","_step8","_iterator8","restore","_step9","_iterator9","_step10","_iterator10","ignoreChange","scrollLeftChanged","setScrollLeft","newScrollTopModified","newScrollTopOriginal","deltaOrigToMod","trueTopOriginal","originalEditor","modifiedEditor","originalEditorAlignmentViewZones","modifiedEditorAlignmentViewZones","originalLineHeightOverrides","ArrayQueue","getAdditionalLineHeights","modifiedLineHeightOverrides","origLineHeight","lastOriginalLineNumber","lastModifiedLineNumber","handleAlignmentsOutsideOfDiffs","untilOriginalLineNumberExclusive","untilModifiedLineNumberExclusive","origNext","peek","modNext","distOrig","MAX_VALUE","distNext","dequeue","_step11","_iterator11","lastModLineNumber","lastOrigLineNumber","emitAlignment","origLineNumberExclusive","modLineNumberExclusive","originalAdditionalHeight","takeWhile","reduce","modifiedAdditionalHeight","_step12","_iterator12","viewZonesToIgnore","viewZoneHeights","wrappingZoneHeights","hasWrapping","wrappingColumn","editorLineHeight","getModelLineViewLineCount","_step13","_iterator13","w","arr1","arr2","keySelector","combine","j","val1","val2","key1","key2","joinCombine","v1","v2","IClipboardService","IContextMenuService","OverviewRulerPart_1","OverviewRulerPart","_rootWidth","_rootHeight","currentColorTheme","onDidColorThemeChange","currentColors","insertColor","diffOverviewRulerInserted","diffInserted","defaultInsertColor","transparent","removeColor","diffOverviewRulerRemoved","diffRemoved","defaultRemoveColor","scrollTopObservable","scrollHeightObservable","renderOverviewRuler","viewportDomElement","diffOverviewRoot","ENTIRE_DIFF_OVERVIEW_WIDTH","EventType","POINTER_DOWN","MOUSE_WHEEL","passive","originalOverviewRuler","modifiedOverviewRuler","origViewZonesChanged","modViewZonesChanged","origHiddenRangesChanged","modHiddenRangesChanged","colors","createZones","vm","OverviewRulerZone","originalZones","modifiedZones","setZones","freeSpace","ONE_OVERVIEW_WIDTH","setLayout","scrollBarOptions","ScrollbarState","verticalHasArrows","arrowSize","verticalScrollbarSize","getSliderPosition","getSliderSize","DelegatingEditor","registerColor","dark","light","hcDark","hcLight","idCounter","_targetEditor","getVisibleColumnFromPosition","revealLineInCenter","revealLineInCenterIfOutsideViewport","revealLineNearTop","revealPositionInCenter","revealPositionInCenterIfOutsideViewport","revealPositionNearTop","revealLines","revealLinesInCenter","revealLinesInCenterIfOutsideViewport","revealLinesNearTop","revealRangeInCenter","revealRangeInCenterIfOutsideViewport","revealRangeNearTop","revealRangeNearTopIfOutsideViewport","revealRangeAtTop","getSupportedActions","DiffEditorEditors","originalEditorElement","modifiedEditorElement","_createInnerEditor","_keybindingService","_createLeftHandSideEditor","editorOptions","_createRightHandSideEditor","changedOptions","_adjustOptionsForRightHandSide","_adjustOptionsForLeftHandSide","leftHandSideOptions","_constructInnerEditor","setContextValue","rightHandSideOptions","editorWidgetOptions","contentHeight","contentHeightChanged","contentWidthChanged","_reader","_adjustOptionsForSubEditor","unicodeHighlight","wordWrapOverride1","diffWordWrap","wordWrapOverride2","stickyScroll","nonBasicASCII","ambiguousCharacters","invisibleCharacters","originalAriaLabel","_updateAriaLabel","originalEditable","dropIntoEditor","extraEditorClassName","modifiedAriaLabel","revealHorizontalRightPadding","EditorOptions","defaultValue","scrollbar","clonedOptions","vertical","folding","codeLens","diffCodeLens","fixedOverflowWidgets","minimap","ariaNavigationTip","lookupKeybinding","getAriaLabel","accessibilityVerbose","replaceAll","IKeybindingService","DiffEditorOptions","diffEditorWidth","couldShowInlineViewBecauseOfSize","renderSideBySideInlineBreakpoint","useInlineViewWhenSpaceIsLimited","renderMarginRevertIcon","maxComputationTime","experimental","isInEmbeddedEditor","onlyShowAccessibleDiffViewer","revealLineCount","contextLineCount","minimumLineCount","optionsCopy","validateDiffEditorOptions","diffEditorDefaultOptions","newDiffEditorOptions","defaults","validateBooleanOption","clampedFloat","clampedInt","maxFileSize","validateStringSetOption","collapseUnchangedRegions","_DelegatingEditor","_parentContextKeyService","_parentInstantiationService","_editorProgressService","elements","disposableObservableValue","fromObservableLight","_boundarySashes","_accessibleDiffViewerShouldBeVisible","_accessibleDiffViewerVisible","movedBlocksLinesPart","_layoutInfo","_rootSizeObserver","originalWidth","decorationsLeft","modifiedWidth","originalWidthWithoutMovedBlockLines","_diffValue","onDidUpdateDiff","willCreateDiffEditor","setAutomaticLayout","isEmbeddedDiffEditor","isEmbeddedDiffEditorKey","comparingMovedCodeKey","diffEditorRenderSideBySideInlineBreakpointReachedContextKeyValue","o","o2","showSash","boundarySashes","setBoundarySashes","unchangedRangesFeature","isUpdatingViewZones","_accessibleDiffViewer","accessibleDiffViewer","_createDiffEditorContributions","addDiffEditor","runAndSubscribe","diffLineModified","show","getDiffEditorContributions","EditorType","IDiffEditor","modelState","serializeState","diffEditorState","restoreSerializedState","createViewModel","diffState","originalStartLineNumber","originalEndLineNumber","modifiedStartLineNumber","modifiedEndLineNumber","charChanges","originalStartColumn","originalEndColumn","modifiedStartColumn","modifiedEndColumn","isModifiedFocus","destination","sourceSelection","flip","newRange1","translatePosition","newRange2","plusRange","_this$mapToOtherSide","posInOriginal","findLast","newLineNumber","innerMapping","isBeforeOrEqual","containsPosition","position1","position2","LengthObj","columnCount","IEditorProgressService","EmbeddedCodeEditorWidget","_CodeEditorWidget","parentEditor","_thisSuper","getOverflowWidgetsDomNode","_parentEditor","_overwriteOptions","_onParentConfigurationChanged","objects","ReplaceCommand","insertsAutoWhitespace","_range","_text","builder","addTrackedEditOperation","helper","srcRange","getInverseEditOperations","ReplaceCommandThatSelectsText","ReplaceCommandWithoutChangingPosition","ReplaceCommandWithOffsetCursorState","lineNumberDeltaOffset","columnDeltaOffset","_columnDeltaOffset","_lineNumberDeltaOffset","ReplaceCommandThatPreservesSelection","editRange","initialSelection","forceMoveMarkers","_initialSelection","_forceMoveMarkers","_selectionId","trackSelection","getTrackedSelection","ShiftCommand_1","repeatCache","cachedStringRepeat","str","cache","ShiftCommand","opts","_languageConfigurationService","_opts","_selection","_useLastEditRangeForCursorEndPosition","_selectionStartColumnStaysPut","addEditOperation","startLine","endLine","_this$_opts","indentSize","insertSpaces","shouldIndentEmptyLines","useTabStops","test","previousLineExtraSpaces","extraSpaces","lineText","indentationEndIndex","strings","isUnshift","isCheapToTokenize","enterAction","getEnterAction","autoIndent","appendText","lenJ","charCodeAt","removeText","desiredIndent","unshiftIndent","shiftIndent","_addEditOperation","getLineLength","oneIndent","lastOp","initialStartColumn","getDirection","contentStartVisibleColumn","indent","prevIndentTabStop","prevRenderTabStop","nextIndentTabStop","nextRenderTabStop","SurroundSelectionCommand","charBeforeSelection","charAfterSelection","_charBeforeSelection","_charAfterSelection","inverseEditOperations","firstOperationRange","secondOperationRange","CompositionSurroundSelectionCommand","_position","_charAfter","opRange","TrimTrailingWhitespaceCommand","cursors","_cursors","ops","rLen","cursorIndex","cursorLen","maxLineColumn","minEditColumn","lastNonWhitespaceIndex","fromColumn","EditOperation","trimTrailingWhitespace","op"],"sourceRoot":""}