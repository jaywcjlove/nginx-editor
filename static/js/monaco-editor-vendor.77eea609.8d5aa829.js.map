{"version":3,"file":"static/js/monaco-editor-vendor.77eea609.8d5aa829.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScroll.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestInlineCompletions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js","../node_modules/monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a;\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { OutlineModel, OutlineElement } from '../../documentSymbols/browser/outlineModel.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { createStringBuilder } from '../../../common/core/stringBuilder.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Position } from '../../../common/core/position.js';\nlet StickyScrollController = class StickyScrollController extends Disposable {\n    constructor(editor, _languageFeaturesService) {\n        super();\n        this._sessionStore = new DisposableStore();\n        this._ranges = [];\n        this._rangesVersionId = 0;\n        this._editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this.stickyScrollWidget = new StickyScrollWidget(this._editor);\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(34 /* EditorOption.experimental */)) {\n                this.onConfigurationChange();\n            }\n        }));\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(true), 50));\n        this.onConfigurationChange();\n    }\n    onConfigurationChange() {\n        const options = this._editor.getOption(34 /* EditorOption.experimental */);\n        if (options.stickyScroll.enabled === false) {\n            this.stickyScrollWidget.emptyRootNode();\n            this._editor.removeOverlayWidget(this.stickyScrollWidget);\n            this._sessionStore.clear();\n            return;\n        }\n        else {\n            this._editor.addOverlayWidget(this.stickyScrollWidget);\n            this._sessionStore.add(this._editor.onDidChangeModel(() => this._update(true)));\n            this._sessionStore.add(this._editor.onDidScrollChange(() => this._update(false)));\n            this._sessionStore.add(this._editor.onDidChangeHiddenAreas(() => this._update(true)));\n            this._sessionStore.add(this._editor.onDidChangeModelTokens((e) => this._onTokensChange(e)));\n            this._sessionStore.add(this._editor.onDidChangeModelContent(() => this._updateSoon.schedule()));\n            this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => this._update(true)));\n            this._update(true);\n        }\n    }\n    _needsUpdate(event) {\n        const stickyLineNumbers = this.stickyScrollWidget.getCurrentLines();\n        for (const stickyLineNumber of stickyLineNumbers) {\n            for (const range of event.ranges) {\n                if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    _onTokensChange(event) {\n        if (this._needsUpdate(event)) {\n            this._update(false);\n        }\n    }\n    _update(updateOutline = false) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (updateOutline) {\n                (_a = this._cts) === null || _a === void 0 ? void 0 : _a.dispose(true);\n                this._cts = new CancellationTokenSource();\n                yield this._updateOutlineModel(this._cts.token);\n            }\n            const hiddenRanges = (_b = this._editor._getViewModel()) === null || _b === void 0 ? void 0 : _b.getHiddenAreas();\n            if (hiddenRanges) {\n                for (const hiddenRange of hiddenRanges) {\n                    this._ranges = this._ranges.filter(range => { return !(range[0] >= hiddenRange.startLineNumber && range[1] <= hiddenRange.endLineNumber + 1); });\n                }\n            }\n            this._renderStickyScroll();\n        });\n    }\n    _findLineRanges(outlineElement, depth) {\n        if (outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.children.size) {\n            let didRecursion = false;\n            for (const outline of outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.children.values()) {\n                const kind = outline.symbol.kind;\n                if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                    didRecursion = true;\n                    this._findLineRanges(outline, depth + 1);\n                }\n            }\n            if (!didRecursion) {\n                this._addOutlineRanges(outlineElement, depth);\n            }\n        }\n        else {\n            this._addOutlineRanges(outlineElement, depth);\n        }\n    }\n    _addOutlineRanges(outlineElement, depth) {\n        let currentStartLine = 0;\n        let currentEndLine = 0;\n        while (outlineElement) {\n            const kind = outlineElement.symbol.kind;\n            if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                currentStartLine = outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.symbol.range.startLineNumber;\n                currentEndLine = outlineElement === null || outlineElement === void 0 ? void 0 : outlineElement.symbol.range.endLineNumber;\n                this._ranges.push([currentStartLine, currentEndLine, depth]);\n                depth--;\n            }\n            if (outlineElement.parent instanceof OutlineElement) {\n                outlineElement = outlineElement.parent;\n            }\n            else {\n                break;\n            }\n        }\n    }\n    _updateOutlineModel(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._editor.getModel();\n                const modelVersionId = model.getVersionId();\n                const outlineModel = yield OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, model, token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                this._ranges = [];\n                this._rangesVersionId = modelVersionId;\n                for (const outline of outlineModel.children.values()) {\n                    if (outline instanceof OutlineElement) {\n                        const kind = outline.symbol.kind;\n                        if (kind === 4 /* SymbolKind.Class */ || kind === 8 /* SymbolKind.Constructor */ || kind === 11 /* SymbolKind.Function */ || kind === 10 /* SymbolKind.Interface */ || kind === 5 /* SymbolKind.Method */ || kind === 1 /* SymbolKind.Module */) {\n                            this._findLineRanges(outline, 1);\n                        }\n                        else {\n                            this._findLineRanges(outline, 0);\n                        }\n                    }\n                    this._ranges = this._ranges.sort(function (a, b) {\n                        if (a[0] !== b[0]) {\n                            return a[0] - b[0];\n                        }\n                        else if (a[1] !== b[1]) {\n                            return b[1] - a[1];\n                        }\n                        else {\n                            return a[2] - b[2];\n                        }\n                    });\n                    let previous = [];\n                    for (const [index, arr] of this._ranges.entries()) {\n                        const [start, end, _depth] = arr;\n                        if (previous[0] === start && previous[1] === end) {\n                            this._ranges.splice(index, 1);\n                        }\n                        else {\n                            previous = arr;\n                        }\n                    }\n                }\n            }\n        });\n    }\n    _renderStickyScroll() {\n        if (!(this._editor.hasModel())) {\n            return;\n        }\n        const lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */);\n        const model = this._editor.getModel();\n        if (this._rangesVersionId !== model.getVersionId()) {\n            // Old _ranges not updated yet\n            return;\n        }\n        const scrollTop = this._editor.getScrollTop();\n        this.stickyScrollWidget.emptyRootNode();\n        const beginningLinesConsidered = new Set();\n        for (const [index, arr] of this._ranges.entries()) {\n            const [start, end, depth] = arr;\n            if (end - start > 0 && model.getLineContent(start) !== '') {\n                const topOfElementAtDepth = (depth - 1) * lineHeight;\n                const bottomOfElementAtDepth = depth * lineHeight;\n                const bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\n                const topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\n                const bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\n                if (!beginningLinesConsidered.has(start)) {\n                    if (topOfElementAtDepth >= topOfEndLine - 1 && topOfElementAtDepth < bottomOfEndLine - 2) {\n                        beginningLinesConsidered.add(start);\n                        this.stickyScrollWidget.pushCodeLine(new StickyScrollCodeLine(start, depth, this._editor, -1, bottomOfEndLine - bottomOfElementAtDepth));\n                        break;\n                    }\n                    else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth < bottomOfEndLine - 1) {\n                        beginningLinesConsidered.add(start);\n                        this.stickyScrollWidget.pushCodeLine(new StickyScrollCodeLine(start, depth, this._editor, 0, 0));\n                    }\n                }\n                else {\n                    this._ranges.splice(index, 1);\n                }\n            }\n        }\n        this.stickyScrollWidget.updateRootNode();\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n};\nStickyScrollController.ID = 'store.contrib.stickyScrollController';\nStickyScrollController = __decorate([\n    __param(1, ILanguageFeaturesService)\n], StickyScrollController);\nconst _ttPolicy = (_a = window.trustedTypes) === null || _a === void 0 ? void 0 : _a.createPolicy('stickyScrollViewLayer', { createHTML: value => value });\nclass StickyScrollCodeLine {\n    constructor(_lineNumber, _depth, _editor, _zIndex, _relativePosition) {\n        this._lineNumber = _lineNumber;\n        this._depth = _depth;\n        this._editor = _editor;\n        this._zIndex = _zIndex;\n        this._relativePosition = _relativePosition;\n        this.effectiveLineHeight = 0;\n        this.effectiveLineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */) + this._relativePosition;\n    }\n    get lineNumber() {\n        return this._lineNumber;\n    }\n    getDomNode() {\n        const root = document.createElement('div');\n        const viewModel = this._editor._getViewModel();\n        const viewLineNumber = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(this._lineNumber, 1)).lineNumber;\n        const lineRenderingData = viewModel.getViewLineRenderingData(viewLineNumber);\n        let actualInlineDecorations;\n        try {\n            actualInlineDecorations = LineDecoration.filter(lineRenderingData.inlineDecorations, viewLineNumber, lineRenderingData.minColumn, lineRenderingData.maxColumn);\n        }\n        catch (err) {\n            actualInlineDecorations = [];\n        }\n        const renderLineInput = new RenderLineInput(true, true, lineRenderingData.content, lineRenderingData.continuesWithWrappedLine, lineRenderingData.isBasicASCII, lineRenderingData.containsRTL, 0, lineRenderingData.tokens, actualInlineDecorations, lineRenderingData.tabSize, lineRenderingData.startVisibleColumn, 1, 1, 1, 100, 'none', true, true, null);\n        const sb = createStringBuilder(400);\n        renderViewLine(renderLineInput, sb);\n        let newLine;\n        if (_ttPolicy) {\n            newLine = _ttPolicy.createHTML(sb.build());\n        }\n        else {\n            newLine = sb.build();\n        }\n        const lineHTMLNode = document.createElement('span');\n        lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        lineHTMLNode.style.overflow = 'hidden';\n        lineHTMLNode.style.whiteSpace = 'nowrap';\n        lineHTMLNode.style.display = 'inline-block';\n        lineHTMLNode.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        lineHTMLNode.innerHTML = newLine;\n        const lineNumberHTMLNode = document.createElement('span');\n        lineNumberHTMLNode.style.width = this._editor.getLayoutInfo().contentLeft.toString() + 'px';\n        lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        lineNumberHTMLNode.style.color = 'var(--vscode-editorLineNumber-foreground)';\n        lineNumberHTMLNode.style.display = 'inline-block';\n        lineNumberHTMLNode.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        const innerLineNumberHTML = document.createElement('span');\n        innerLineNumberHTML.innerText = this._lineNumber.toString();\n        innerLineNumberHTML.style.paddingLeft = this._editor.getLayoutInfo().lineNumbersLeft.toString() + 'px';\n        innerLineNumberHTML.style.width = this._editor.getLayoutInfo().lineNumbersWidth.toString() + 'px';\n        innerLineNumberHTML.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        innerLineNumberHTML.style.textAlign = 'right';\n        innerLineNumberHTML.style.float = 'left';\n        innerLineNumberHTML.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        lineNumberHTMLNode.appendChild(innerLineNumberHTML);\n        root.onclick = e => {\n            e.stopPropagation();\n            e.preventDefault();\n            this._editor.revealPosition({ lineNumber: this._lineNumber - this._depth + 1, column: 1 });\n        };\n        root.onmouseover = e => {\n            innerLineNumberHTML.style.background = `var(--vscode-editorStickyScrollHover-background)`;\n            lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            root.style.backgroundColor = `var(--vscode-editorStickyScrollHover-background)`;\n            innerLineNumberHTML.style.cursor = `pointer`;\n            lineHTMLNode.style.cursor = `pointer`;\n            root.style.cursor = `pointer`;\n            lineNumberHTMLNode.style.cursor = `pointer`;\n        };\n        root.onmouseleave = e => {\n            innerLineNumberHTML.style.background = `var(--vscode-editorStickyScroll-background)`;\n            lineHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n            lineNumberHTMLNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n            root.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        };\n        this._editor.applyFontInfo(lineHTMLNode);\n        this._editor.applyFontInfo(innerLineNumberHTML);\n        root.appendChild(lineNumberHTMLNode);\n        root.appendChild(lineHTMLNode);\n        root.style.zIndex = this._zIndex.toString();\n        root.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        root.style.overflow = 'hidden';\n        root.style.whiteSpace = 'nowrap';\n        root.style.width = '100%';\n        root.style.lineHeight = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        root.style.height = this._editor.getOption(61 /* EditorOption.lineHeight */).toString() + 'px';\n        // Special case for last line of sticky scroll\n        if (this._relativePosition) {\n            root.style.position = 'relative';\n            root.style.top = this._relativePosition + 'px';\n            root.style.width = '100%';\n        }\n        return root;\n    }\n}\nclass StickyScrollWidget {\n    constructor(_editor) {\n        this._editor = _editor;\n        this.arrayOfCodeLines = [];\n        this.rootDomNode = document.createElement('div');\n        this.rootDomNode = document.createElement('div');\n        this.rootDomNode.style.width = '100%';\n        this.rootDomNode.style.boxShadow = `var(--vscode-scrollbar-shadow) 0 6px 6px -6px`;\n    }\n    getCurrentLines() {\n        const widgetLineRange = [];\n        for (const codeLine of this.arrayOfCodeLines) {\n            widgetLineRange.push(codeLine.lineNumber);\n        }\n        return widgetLineRange;\n    }\n    pushCodeLine(codeLine) {\n        this.arrayOfCodeLines.push(codeLine);\n    }\n    updateRootNode() {\n        let widgetHeight = 0;\n        for (const line of this.arrayOfCodeLines) {\n            widgetHeight += line.effectiveLineHeight;\n            this.rootDomNode.appendChild(line.getDomNode());\n        }\n        this.rootDomNode.style.height = widgetHeight.toString() + 'px';\n    }\n    emptyRootNode() {\n        this.arrayOfCodeLines.length = 0;\n        dom.clearNode(this.rootDomNode);\n    }\n    getId() {\n        return 'editor.contrib.stickyScrollWidget';\n    }\n    getDomNode() {\n        this.rootDomNode.style.zIndex = '2';\n        this.rootDomNode.style.backgroundColor = `var(--vscode-editorStickyScroll-background)`;\n        return this.rootDomNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n}\nregisterEditorContribution(StickyScrollController.ID, StickyScrollController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { quickSelect } from '../../../../base/common/arrays.js';\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive, FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\nexport class LineContext {\n    constructor(leadingLineContent, characterCountDelta) {\n        this.leadingLineContent = leadingLineContent;\n        this.characterCountDelta = characterCountDelta;\n    }\n}\n/**\n * Sorted, filtered completion view model\n * */\nexport class CompletionModel {\n    constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, fuzzyScoreOptions = FuzzyScoreOptions.default, clipboardText = undefined) {\n        this.clipboardText = clipboardText;\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\n        this._items = items;\n        this._column = column;\n        this._wordDistance = wordDistance;\n        this._options = options;\n        this._refilterKind = 1 /* Refilter.All */;\n        this._lineContext = lineContext;\n        this._fuzzyScoreOptions = fuzzyScoreOptions;\n        if (snippetSuggestions === 'top') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n        }\n        else if (snippetSuggestions === 'bottom') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n        }\n    }\n    get lineContext() {\n        return this._lineContext;\n    }\n    set lineContext(value) {\n        if (this._lineContext.leadingLineContent !== value.leadingLineContent\n            || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n            this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Refilter.Incr */ : 1 /* Refilter.All */;\n            this._lineContext = value;\n        }\n    }\n    get items() {\n        this._ensureCachedState();\n        return this._filteredItems;\n    }\n    get allProvider() {\n        this._ensureCachedState();\n        return this._providerInfo.keys();\n    }\n    get incomplete() {\n        this._ensureCachedState();\n        const result = new Set();\n        for (const [provider, incomplete] of this._providerInfo) {\n            if (incomplete) {\n                result.add(provider);\n            }\n        }\n        return result;\n    }\n    adopt(except) {\n        const res = [];\n        for (let i = 0; i < this._items.length;) {\n            if (!except.has(this._items[i].provider)) {\n                res.push(this._items[i]);\n                // unordered removed\n                this._items[i] = this._items[this._items.length - 1];\n                this._items.pop();\n            }\n            else {\n                // continue with next item\n                i++;\n            }\n        }\n        this._refilterKind = 1 /* Refilter.All */;\n        return res;\n    }\n    get stats() {\n        this._ensureCachedState();\n        return this._stats;\n    }\n    _ensureCachedState() {\n        if (this._refilterKind !== 0 /* Refilter.Nothing */) {\n            this._createCachedState();\n        }\n    }\n    _createCachedState() {\n        this._providerInfo = new Map();\n        const labelLengths = [];\n        const { leadingLineContent, characterCountDelta } = this._lineContext;\n        let word = '';\n        let wordLow = '';\n        // incrementally filter less\n        const source = this._refilterKind === 1 /* Refilter.All */ ? this._items : this._filteredItems;\n        const target = [];\n        // picks a score function based on the number of\n        // items that we have to score/filter and based on the\n        // user-configuration\n        const scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\n        for (let i = 0; i < source.length; i++) {\n            const item = source[i];\n            if (item.isInvalid) {\n                continue; // SKIP invalid items\n            }\n            // collect all support, know if their result is incomplete\n            this._providerInfo.set(item.provider, Boolean(item.container.incomplete));\n            // 'word' is that remainder of the current line that we\n            // filter and score against. In theory each suggestion uses a\n            // different word, but in practice not - that's why we cache\n            const overwriteBefore = item.position.column - item.editStart.column;\n            const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n            if (word.length !== wordLen) {\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n                wordLow = word.toLowerCase();\n            }\n            // remember the word against which this item was\n            // scored\n            item.word = word;\n            if (wordLen === 0) {\n                // when there is nothing to score against, don't\n                // event try to do. Use a const rank and rely on\n                // the fallback-sort using the initial sort order.\n                // use a score of `-100` because that is out of the\n                // bound of values `fuzzyScore` will return\n                item.score = FuzzyScore.Default;\n            }\n            else {\n                // skip word characters that are whitespace until\n                // we have hit the replace range (overwriteBefore)\n                let wordPos = 0;\n                while (wordPos < overwriteBefore) {\n                    const ch = word.charCodeAt(wordPos);\n                    if (ch === 32 /* CharCode.Space */ || ch === 9 /* CharCode.Tab */) {\n                        wordPos += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (wordPos >= wordLen) {\n                    // the wordPos at which scoring starts is the whole word\n                    // and therefore the same rules as not having a word apply\n                    item.score = FuzzyScore.Default;\n                }\n                else if (typeof item.completion.filterText === 'string') {\n                    // when there is a `filterText` it must match the `word`.\n                    // if it matches we check with the label to compute highlights\n                    // and if that doesn't yield a result we have no highlights,\n                    // despite having the match\n                    const match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\n                        // filterText and label are actually the same -> use good highlights\n                        item.score = match;\n                    }\n                    else {\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\n                        // of the filterText-match\n                        item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\n                        item.score[0] = match[0]; // use score from filterText\n                    }\n                }\n                else {\n                    // by default match `word` against the `label`\n                    const match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    item.score = match;\n                }\n            }\n            item.idx = i;\n            item.distance = this._wordDistance.distance(item.position, item.completion);\n            target.push(item);\n            // update stats\n            labelLengths.push(item.textLabel.length);\n        }\n        this._filteredItems = target.sort(this._snippetCompareFn);\n        this._refilterKind = 0 /* Refilter.Nothing */;\n        this._stats = {\n            pLabelLen: labelLengths.length ?\n                quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b)\n                : 0\n        };\n    }\n    static _compareCompletionItems(a, b) {\n        if (a.score[0] > b.score[0]) {\n            return -1;\n        }\n        else if (a.score[0] < b.score[0]) {\n            return 1;\n        }\n        else if (a.distance < b.distance) {\n            return -1;\n        }\n        else if (a.distance > b.distance) {\n            return 1;\n        }\n        else if (a.idx < b.idx) {\n            return -1;\n        }\n        else if (a.idx > b.idx) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static _compareCompletionItemsSnippetsDown(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n    static _compareCompletionItemsSnippetsUp(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { CancellationError, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { historyNavigationVisible } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nexport const Context = {\n    Visible: historyNavigationVisible,\n    HasFocusedSuggestion: new RawContextKey('suggestWidgetHasFocusedSuggestion', false, localize('suggestWidgetHasSelection', \"Whether any suggestion is focused\")),\n    DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\n    HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\n    InsertMode: new RawContextKey('suggestionInsertMode', undefined, { type: 'string', description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\") }),\n    CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\")),\n};\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\nexport class CompletionItem {\n    constructor(position, completion, container, provider) {\n        this.position = position;\n        this.completion = completion;\n        this.container = container;\n        this.provider = provider;\n        // validation\n        this.isInvalid = false;\n        // sorting, filtering\n        this.score = FuzzyScore.Default;\n        this.distance = 0;\n        this.textLabel = typeof completion.label === 'string'\n            ? completion.label\n            : completion.label.label;\n        // ensure lower-variants (perf)\n        this.labelLow = this.textLabel.toLowerCase();\n        // validate label\n        this.isInvalid = !this.textLabel;\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\n        this.extensionId = completion.extensionId;\n        // normalize ranges\n        if (Range.isIRange(completion.range)) {\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            // validate range\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\n        }\n        else {\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\n            // validate ranges\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace)\n                || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber\n                || completion.range.insert.startColumn !== completion.range.replace.startColumn;\n        }\n        // create the suggestion resolver\n        if (typeof provider.resolveCompletionItem !== 'function') {\n            this._resolveCache = Promise.resolve();\n            this._isResolved = true;\n        }\n    }\n    // ---- resolving\n    get isResolved() {\n        return !!this._isResolved;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._resolveCache) {\n                const sub = token.onCancellationRequested(() => {\n                    this._resolveCache = undefined;\n                    this._isResolved = false;\n                });\n                this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\n                    Object.assign(this.completion, value);\n                    this._isResolved = true;\n                    sub.dispose();\n                }, err => {\n                    if (isCancellationError(err)) {\n                        // the IPC queue will reject the request with the\n                        // cancellation error -> reset cached\n                        this._resolveCache = undefined;\n                        this._isResolved = false;\n                    }\n                });\n            }\n            return this._resolveCache;\n        });\n    }\n}\nexport class CompletionOptions {\n    constructor(snippetSortOrder = 2 /* SnippetSortOrder.Bottom */, kindFilter = new Set(), providerFilter = new Set(), showDeprecated = true) {\n        this.snippetSortOrder = snippetSortOrder;\n        this.kindFilter = kindFilter;\n        this.providerFilter = providerFilter;\n        this.showDeprecated = showDeprecated;\n    }\n}\nCompletionOptions.default = new CompletionOptions();\nlet _snippetSuggestSupport;\nexport function getSnippetSuggestSupport() {\n    return _snippetSuggestSupport;\n}\nexport class CompletionItemModel {\n    constructor(items, needsClipboard, durations, disposable) {\n        this.items = items;\n        this.needsClipboard = needsClipboard;\n        this.durations = durations;\n        this.disposable = disposable;\n    }\n}\nexport function provideSuggestionItems(registry, model, position, options = CompletionOptions.default, context = { triggerKind: 0 /* languages.CompletionTriggerKind.Invoke */ }, token = CancellationToken.None) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sw = new StopWatch(true);\n        position = position.clone();\n        const word = model.getWordAtPosition(position);\n        const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\n        const defaultRange = { replace: defaultReplaceRange, insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column) };\n        const result = [];\n        const disposables = new DisposableStore();\n        const durations = [];\n        let needsClipboard = false;\n        const onCompletionList = (provider, container, sw) => {\n            var _a, _b, _c;\n            let didAddResult = false;\n            if (!container) {\n                return didAddResult;\n            }\n            for (const suggestion of container.suggestions) {\n                if (!options.kindFilter.has(suggestion.kind)) {\n                    // skip if not showing deprecated suggestions\n                    if (!options.showDeprecated && ((_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.tags) === null || _a === void 0 ? void 0 : _a.includes(1 /* languages.CompletionItemTag.Deprecated */))) {\n                        continue;\n                    }\n                    // fill in default range when missing\n                    if (!suggestion.range) {\n                        suggestion.range = defaultRange;\n                    }\n                    // fill in default sortText when missing\n                    if (!suggestion.sortText) {\n                        suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\n                    }\n                    if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* languages.CompletionItemInsertTextRule.InsertAsSnippet */) {\n                        needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\n                    }\n                    result.push(new CompletionItem(position, suggestion, container, provider));\n                    didAddResult = true;\n                }\n            }\n            if (isDisposable(container)) {\n                disposables.add(container);\n            }\n            durations.push({\n                providerName: (_b = provider._debugDisplayName) !== null && _b !== void 0 ? _b : 'unknown_provider', elapsedProvider: (_c = container.duration) !== null && _c !== void 0 ? _c : -1, elapsedOverall: sw.elapsed()\n            });\n            return didAddResult;\n        };\n        // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\n        // do so - no snippet filter, no special-providers-only request\n        const snippetCompletions = (() => __awaiter(this, void 0, void 0, function* () {\n            if (!_snippetSuggestSupport || options.kindFilter.has(27 /* languages.CompletionItemKind.Snippet */)) {\n                return;\n            }\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\n                return;\n            }\n            const sw = new StopWatch(true);\n            const list = yield _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\n            onCompletionList(_snippetSuggestSupport, list, sw);\n        }))();\n        // add suggestions from contributed providers - providers are ordered in groups of\n        // equal score and once a group produces a result the process stops\n        // get provider groups, always add snippet suggestion provider\n        for (const providerGroup of registry.orderedGroups(model)) {\n            // for each support in the group ask for suggestions\n            let didAddResult = false;\n            yield Promise.all(providerGroup.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n                    return;\n                }\n                try {\n                    const sw = new StopWatch(true);\n                    const list = yield provider.provideCompletionItems(model, position, context, token);\n                    didAddResult = onCompletionList(provider, list, sw) || didAddResult;\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            if (didAddResult || token.isCancellationRequested) {\n                break;\n            }\n        }\n        yield snippetCompletions;\n        if (token.isCancellationRequested) {\n            disposables.dispose();\n            return Promise.reject(new CancellationError());\n        }\n        return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, { entries: durations, elapsed: sw.elapsed() }, disposables);\n    });\n}\nfunction defaultComparator(a, b) {\n    // check with 'sortText'\n    if (a.sortTextLow && b.sortTextLow) {\n        if (a.sortTextLow < b.sortTextLow) {\n            return -1;\n        }\n        else if (a.sortTextLow > b.sortTextLow) {\n            return 1;\n        }\n    }\n    // check with 'label'\n    if (a.textLabel < b.textLabel) {\n        return -1;\n    }\n    else if (a.textLabel > b.textLabel) {\n        return 1;\n    }\n    // check with 'type'\n    return a.completion.kind - b.completion.kind;\n}\nfunction snippetUpComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nfunction snippetDownComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nconst _snippetComparators = new Map();\n_snippetComparators.set(0 /* SnippetSortOrder.Top */, snippetUpComparator);\n_snippetComparators.set(2 /* SnippetSortOrder.Bottom */, snippetDownComparator);\n_snippetComparators.set(1 /* SnippetSortOrder.Inline */, defaultComparator);\nexport function getSuggestionComparator(snippetConfig) {\n    return _snippetComparators.get(snippetConfig);\n}\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter, maxItemsToResolve] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = {\n            incomplete: false,\n            suggestions: []\n        };\n        const resolving = [];\n        const completions = yield provideSuggestionItems(completionProvider, ref.object.textEditorModel, Position.lift(position), undefined, { triggerCharacter, triggerKind: triggerCharacter ? 1 /* languages.CompletionTriggerKind.TriggerCharacter */ : 0 /* languages.CompletionTriggerKind.Invoke */ });\n        for (const item of completions.items) {\n            if (resolving.length < (maxItemsToResolve !== null && maxItemsToResolve !== void 0 ? maxItemsToResolve : 0)) {\n                resolving.push(item.resolve(CancellationToken.None));\n            }\n            result.incomplete = result.incomplete || item.container.incomplete;\n            result.suggestions.push(item.completion);\n        }\n        try {\n            yield Promise.all(resolving);\n            return result;\n        }\n        finally {\n            setTimeout(() => completions.disposable.dispose(), 100);\n        }\n    }\n    finally {\n        ref.dispose();\n    }\n}));\nexport function showSimpleSuggestions(editor, provider) {\n    var _a;\n    (_a = editor.getContribution('editor.contrib.suggestController')) === null || _a === void 0 ? void 0 : _a.triggerSuggest(new Set().add(provider), undefined, true);\n}\nexport class QuickSuggestionsOptions {\n    static isAllOff(config) {\n        return config.other === 'off' && config.comments === 'off' && config.strings === 'off';\n    }\n    static isAllOn(config) {\n        return config.other === 'on' && config.comments === 'on' && config.strings === 'on';\n    }\n    static valueFor(config, tokenType) {\n        switch (tokenType) {\n            case 1 /* StandardTokenType.Comment */: return config.comments;\n            case 2 /* StandardTokenType.String */: return config.strings;\n            default: return config.other;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet WordContextKey = class WordContextKey {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._enabled = false;\n        this._ckAtEnd = WordContextKey.AtEnd.bindTo(contextKeyService);\n        this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(113 /* EditorOption.tabCompletion */) && this._update());\n        this._update();\n    }\n    dispose() {\n        var _a;\n        this._configListener.dispose();\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._ckAtEnd.reset();\n    }\n    _update() {\n        // only update this when tab completions are enabled\n        const enabled = this._editor.getOption(113 /* EditorOption.tabCompletion */) === 'on';\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        if (this._enabled) {\n            const checkForWordEnd = () => {\n                if (!this._editor.hasModel()) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                const model = this._editor.getModel();\n                const selection = this._editor.getSelection();\n                const word = model.getWordAtPosition(selection.getStartPosition());\n                if (!word) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n            };\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n            checkForWordEnd();\n        }\n        else if (this._selectionListener) {\n            this._ckAtEnd.reset();\n            this._selectionListener.dispose();\n            this._selectionListener = undefined;\n        }\n    }\n};\nWordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\nWordContextKey = __decorate([\n    __param(1, IContextKeyService)\n], WordContextKey);\nexport { WordContextKey };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet SuggestAlternatives = class SuggestAlternatives {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._index = 0;\n        this._ckOtherSuggestions = SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService);\n    }\n    dispose() {\n        this.reset();\n    }\n    reset() {\n        var _a;\n        this._ckOtherSuggestions.reset();\n        (_a = this._listener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._model = undefined;\n        this._acceptNext = undefined;\n        this._ignore = false;\n    }\n    set({ model, index }, acceptNext) {\n        // no suggestions -> nothing to do\n        if (model.items.length === 0) {\n            this.reset();\n            return;\n        }\n        // no alternative suggestions -> nothing to do\n        const nextIndex = SuggestAlternatives._moveIndex(true, model, index);\n        if (nextIndex === index) {\n            this.reset();\n            return;\n        }\n        this._acceptNext = acceptNext;\n        this._model = model;\n        this._index = index;\n        this._listener = this._editor.onDidChangeCursorPosition(() => {\n            if (!this._ignore) {\n                this.reset();\n            }\n        });\n        this._ckOtherSuggestions.set(true);\n    }\n    static _moveIndex(fwd, model, index) {\n        let newIndex = index;\n        while (true) {\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n            if (newIndex === index) {\n                break;\n            }\n            if (!model.items[newIndex].completion.additionalTextEdits) {\n                break;\n            }\n        }\n        return newIndex;\n    }\n    next() {\n        this._move(true);\n    }\n    prev() {\n        this._move(false);\n    }\n    _move(fwd) {\n        if (!this._model) {\n            // nothing to reason about\n            return;\n        }\n        try {\n            this._ignore = true;\n            this._index = SuggestAlternatives._moveIndex(fwd, this._model, this._index);\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\n        }\n        finally {\n            this._ignore = false;\n        }\n    }\n};\nSuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\nSuggestAlternatives = __decorate([\n    __param(1, IContextKeyService)\n], SuggestAlternatives);\nexport { SuggestAlternatives };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nexport class CommitCharacterController {\n    constructor(editor, widget, accept) {\n        this._disposables = new DisposableStore();\n        this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\n        this._disposables.add(widget.onDidHide(this.reset, this));\n        this._disposables.add(editor.onWillType(text => {\n            if (this._active && !widget.isFrozen()) {\n                const ch = text.charCodeAt(text.length - 1);\n                if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* EditorOption.acceptSuggestionOnCommitCharacter */)) {\n                    accept(this._active.item);\n                }\n            }\n        }));\n    }\n    _onItem(selected) {\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n            // no item or no commit characters\n            this.reset();\n            return;\n        }\n        if (this._active && this._active.item.item === selected.item) {\n            // still the same item\n            return;\n        }\n        // keep item and its commit characters\n        const acceptCharacters = new CharacterSet();\n        for (const ch of selected.item.completion.commitCharacters) {\n            if (ch.length > 0) {\n                acceptCharacters.add(ch.charCodeAt(0));\n            }\n        }\n        this._active = { acceptCharacters, item: selected };\n    }\n    reset() {\n        this._active = undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CompletionModel } from './completionModel.js';\nimport { CompletionOptions, getSnippetSuggestSupport, getSuggestionComparator, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class LineContext {\n    constructor(model, position, auto, shy, noSelect) {\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n        this.leadingWord = model.getWordUntilPosition(position);\n        this.lineNumber = position.lineNumber;\n        this.column = position.column;\n        this.auto = auto;\n        this.shy = shy;\n        this.noSelect = noSelect;\n    }\n    static shouldAutoTrigger(editor) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const pos = editor.getPosition();\n        model.tokenization.tokenizeIfCheap(pos.lineNumber);\n        const word = model.getWordAtPosition(pos);\n        if (!word) {\n            return false;\n        }\n        if (word.endColumn !== pos.column) {\n            return false;\n        }\n        if (!isNaN(Number(word.word))) {\n            return false;\n        }\n        return true;\n    }\n}\nfunction isSuggestPreviewEnabled(editor) {\n    return editor.getOption(108 /* EditorOption.suggest */).preview;\n}\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowQuickSuggestions');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowSuggestOnTriggerCharacters');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nlet SuggestModel = class SuggestModel {\n    constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._clipboardService = _clipboardService;\n        this._telemetryService = _telemetryService;\n        this._logService = _logService;\n        this._contextKeyService = _contextKeyService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._toDispose = new DisposableStore();\n        this._triggerCharacterListener = new DisposableStore();\n        this._triggerQuickSuggest = new TimeoutTimer();\n        this._state = 0 /* State.Idle */;\n        this._completionDisposables = new DisposableStore();\n        this._onDidCancel = new Emitter();\n        this._onDidTrigger = new Emitter();\n        this._onDidSuggest = new Emitter();\n        this.onDidCancel = this._onDidCancel.event;\n        this.onDidTrigger = this._onDidTrigger.event;\n        this.onDidSuggest = this._onDidSuggest.event;\n        this._telemetryGate = 0;\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\n        // wire up various listeners\n        this._toDispose.add(this._editor.onDidChangeModel(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\n            this._updateTriggerCharacters();\n        }));\n        this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(() => {\n            this._updateTriggerCharacters();\n            this._updateActiveSuggestSession();\n        }));\n        let editorIsComposing = false;\n        this._toDispose.add(this._editor.onDidCompositionStart(() => {\n            editorIsComposing = true;\n        }));\n        this._toDispose.add(this._editor.onDidCompositionEnd(() => {\n            editorIsComposing = false;\n            this._onCompositionEnd();\n        }));\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\n            // only trigger suggest when the editor isn't composing a character\n            if (!editorIsComposing) {\n                this._onCursorChange(e);\n            }\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelContent(() => {\n            // only filter completions when the editor isn't composing a character\n            // allow-any-unicode-next-line\n            // e.g. ¨ + u makes ü but just ¨ cannot be used for filtering\n            if (!editorIsComposing) {\n                this._refilterCompletionItems();\n            }\n        }));\n        this._updateTriggerCharacters();\n    }\n    dispose() {\n        dispose(this._triggerCharacterListener);\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\n        this._toDispose.dispose();\n        this._completionDisposables.dispose();\n        this.cancel();\n    }\n    _updateTriggerCharacters() {\n        this._triggerCharacterListener.clear();\n        if (this._editor.getOption(83 /* EditorOption.readOnly */)\n            || !this._editor.hasModel()\n            || !this._editor.getOption(111 /* EditorOption.suggestOnTriggerCharacters */)) {\n            return;\n        }\n        const supportsByTriggerCharacter = new Map();\n        for (const support of this._languageFeaturesService.completionProvider.all(this._editor.getModel())) {\n            for (const ch of support.triggerCharacters || []) {\n                let set = supportsByTriggerCharacter.get(ch);\n                if (!set) {\n                    set = new Set();\n                    set.add(getSnippetSuggestSupport());\n                    supportsByTriggerCharacter.set(ch, set);\n                }\n                set.add(support);\n            }\n        }\n        const checkTriggerCharacter = (text) => {\n            if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\n                return;\n            }\n            if (LineContext.shouldAutoTrigger(this._editor)) {\n                // don't trigger by trigger characters when this is a case for quick suggest\n                return;\n            }\n            if (!text) {\n                // came here from the compositionEnd-event\n                const position = this._editor.getPosition();\n                const model = this._editor.getModel();\n                text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n            }\n            let lastChar = '';\n            if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\n                if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\n                    lastChar = text.substr(text.length - 2);\n                }\n            }\n            else {\n                lastChar = text.charAt(text.length - 1);\n            }\n            const supports = supportsByTriggerCharacter.get(lastChar);\n            if (supports) {\n                // keep existing items that where not computed by the\n                // supports/providers that want to trigger now\n                const existing = this._completionModel\n                    ? { items: this._completionModel.adopt(supports), clipboardText: this._completionModel.clipboardText }\n                    : undefined;\n                this.trigger({ auto: true, shy: false, noSelect: false, triggerCharacter: lastChar }, Boolean(this._completionModel), supports, existing);\n            }\n        };\n        this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\n        this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\n    }\n    // --- trigger/retrigger/cancel suggest\n    get state() {\n        return this._state;\n    }\n    cancel(retrigger = false) {\n        var _a;\n        if (this._state !== 0 /* State.Idle */) {\n            this._triggerQuickSuggest.cancel();\n            (_a = this._requestToken) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._requestToken = undefined;\n            this._state = 0 /* State.Idle */;\n            this._completionModel = undefined;\n            this._context = undefined;\n            this._onDidCancel.fire({ retrigger });\n        }\n    }\n    clear() {\n        this._completionDisposables.clear();\n    }\n    _updateActiveSuggestSession() {\n        if (this._state !== 0 /* State.Idle */) {\n            if (!this._editor.hasModel() || !this._languageFeaturesService.completionProvider.has(this._editor.getModel())) {\n                this.cancel();\n            }\n            else {\n                this.trigger({ auto: this._state === 2 /* State.Auto */, shy: false, noSelect: false }, true);\n            }\n        }\n    }\n    _onCursorChange(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const prevSelection = this._currentSelection;\n        this._currentSelection = this._editor.getSelection();\n        if (!e.selection.isEmpty()\n            || (e.reason !== 0 /* CursorChangeReason.NotSet */ && e.reason !== 3 /* CursorChangeReason.Explicit */)\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\n            // Early exit if nothing needs to be done!\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n            this.cancel();\n            return;\n        }\n        if (this._state === 0 /* State.Idle */ && e.reason === 0 /* CursorChangeReason.NotSet */) {\n            if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n                // cursor did move RIGHT due to typing -> trigger quick suggest\n                this._doTriggerQuickSuggest();\n            }\n        }\n        else if (this._state !== 0 /* State.Idle */ && e.reason === 3 /* CursorChangeReason.Explicit */) {\n            // suggest is active and something like cursor keys are used to move\n            // the cursor. this means we can refilter at the new position\n            this._refilterCompletionItems();\n        }\n    }\n    _onCompositionEnd() {\n        // trigger or refilter when composition ends\n        if (this._state === 0 /* State.Idle */) {\n            this._doTriggerQuickSuggest();\n        }\n        else {\n            this._refilterCompletionItems();\n        }\n    }\n    _doTriggerQuickSuggest() {\n        var _a;\n        if (QuickSuggestionsOptions.isAllOff(this._editor.getOption(81 /* EditorOption.quickSuggestions */))) {\n            // not enabled\n            return;\n        }\n        if (this._editor.getOption(108 /* EditorOption.suggest */).snippetsPreventQuickSuggestions && ((_a = SnippetController2.get(this._editor)) === null || _a === void 0 ? void 0 : _a.isInSnippet())) {\n            // no quick suggestion when in snippet mode\n            return;\n        }\n        this.cancel();\n        this._triggerQuickSuggest.cancelAndSet(() => {\n            if (this._state !== 0 /* State.Idle */) {\n                return;\n            }\n            if (!LineContext.shouldAutoTrigger(this._editor)) {\n                return;\n            }\n            if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const pos = this._editor.getPosition();\n            // validate enabled now\n            const config = this._editor.getOption(81 /* EditorOption.quickSuggestions */);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                return;\n            }\n            if (!QuickSuggestionsOptions.isAllOn(config)) {\n                // Check the type of the token that triggered this\n                model.tokenization.tokenizeIfCheap(pos.lineNumber);\n                const lineTokens = model.tokenization.getLineTokens(pos.lineNumber);\n                const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n                if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'on') {\n                    return;\n                }\n            }\n            if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\n                // do not trigger quick suggestions if inline suggestions are shown\n                return;\n            }\n            if (!this._languageFeaturesService.completionProvider.has(model)) {\n                return;\n            }\n            // we made it till here -> trigger now\n            this.trigger({ auto: true, shy: false, noSelect: false });\n        }, this._editor.getOption(82 /* EditorOption.quickSuggestionsDelay */));\n    }\n    _refilterCompletionItems() {\n        // Re-filter suggestions. This MUST run async because filtering/scoring\n        // uses the model content AND the cursor position. The latter is NOT\n        // updated when the document has changed (the event which drives this method)\n        // and therefore a little pause (next mirco task) is needed. See:\n        // https://stackoverflow.com/questions/25915634/difference-between-microtask-and-macrotask-within-an-event-loop-context#25933985\n        Promise.resolve().then(() => {\n            if (this._state === 0 /* State.Idle */) {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const position = this._editor.getPosition();\n            const ctx = new LineContext(model, position, this._state === 2 /* State.Auto */, false, false);\n            this._onNewContext(ctx);\n        });\n    }\n    trigger(context, retrigger = false, onlyFrom, existing, noFilter) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const auto = context.auto;\n        const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy, context.noSelect);\n        // Cancel previous requests, change state & update UI\n        this.cancel(retrigger);\n        this._state = auto ? 2 /* State.Auto */ : 1 /* State.Manual */;\n        this._onDidTrigger.fire({ auto, shy: context.shy, position: this._editor.getPosition() });\n        // Capture context when request was sent\n        this._context = ctx;\n        // Build context for request\n        let suggestCtx = { triggerKind: (_a = context.triggerKind) !== null && _a !== void 0 ? _a : 0 /* CompletionTriggerKind.Invoke */ };\n        if (context.triggerCharacter) {\n            suggestCtx = {\n                triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n                triggerCharacter: context.triggerCharacter\n            };\n        }\n        this._requestToken = new CancellationTokenSource();\n        // kind filter and snippet sort rules\n        const snippetSuggestions = this._editor.getOption(103 /* EditorOption.snippetSuggestions */);\n        let snippetSortOrder = 1 /* SnippetSortOrder.Inline */;\n        switch (snippetSuggestions) {\n            case 'top':\n                snippetSortOrder = 0 /* SnippetSortOrder.Top */;\n                break;\n            // \t↓ that's the default anyways...\n            // case 'inline':\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\n            // \tbreak;\n            case 'bottom':\n                snippetSortOrder = 2 /* SnippetSortOrder.Bottom */;\n                break;\n        }\n        const { itemKind: itemKindFilter, showDeprecated } = SuggestModel._createSuggestFilter(this._editor);\n        const completionOptions = new CompletionOptions(snippetSortOrder, !noFilter ? itemKindFilter : new Set(), onlyFrom, showDeprecated);\n        const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\n        const completions = provideSuggestionItems(this._languageFeaturesService.completionProvider, model, this._editor.getPosition(), completionOptions, suggestCtx, this._requestToken.token);\n        Promise.all([completions, wordDistance]).then(([completions, wordDistance]) => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            (_b = this._requestToken) === null || _b === void 0 ? void 0 : _b.dispose();\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            let clipboardText = existing === null || existing === void 0 ? void 0 : existing.clipboardText;\n            if (!clipboardText && completions.needsClipboard) {\n                clipboardText = yield this._clipboardService.readText();\n            }\n            if (this._state === 0 /* State.Idle */) {\n                return;\n            }\n            const model = this._editor.getModel();\n            let items = completions.items;\n            if (existing) {\n                const cmpFn = getSuggestionComparator(snippetSortOrder);\n                items = items.concat(existing.items).sort(cmpFn);\n            }\n            const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy, context.noSelect);\n            this._completionModel = new CompletionModel(items, this._context.column, {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            }, wordDistance, this._editor.getOption(108 /* EditorOption.suggest */), this._editor.getOption(103 /* EditorOption.snippetSuggestions */), undefined, clipboardText);\n            // store containers so that they can be disposed later\n            this._completionDisposables.add(completions.disposable);\n            this._onNewContext(ctx);\n            // finally report telemetry about durations\n            this._reportDurationsTelemetry(completions.durations);\n        })).catch(onUnexpectedError);\n    }\n    _reportDurationsTelemetry(durations) {\n        if (this._telemetryGate++ % 230 !== 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._telemetryService.publicLog2('suggest.durations.json', { data: JSON.stringify(durations) });\n            this._logService.debug('suggest.durations.json', durations);\n        });\n    }\n    static _createSuggestFilter(editor) {\n        // kind filter and snippet sort rules\n        const result = new Set();\n        // snippet setting\n        const snippetSuggestions = editor.getOption(103 /* EditorOption.snippetSuggestions */);\n        if (snippetSuggestions === 'none') {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        // type setting\n        const suggestOptions = editor.getOption(108 /* EditorOption.suggest */);\n        if (!suggestOptions.showMethods) {\n            result.add(0 /* CompletionItemKind.Method */);\n        }\n        if (!suggestOptions.showFunctions) {\n            result.add(1 /* CompletionItemKind.Function */);\n        }\n        if (!suggestOptions.showConstructors) {\n            result.add(2 /* CompletionItemKind.Constructor */);\n        }\n        if (!suggestOptions.showFields) {\n            result.add(3 /* CompletionItemKind.Field */);\n        }\n        if (!suggestOptions.showVariables) {\n            result.add(4 /* CompletionItemKind.Variable */);\n        }\n        if (!suggestOptions.showClasses) {\n            result.add(5 /* CompletionItemKind.Class */);\n        }\n        if (!suggestOptions.showStructs) {\n            result.add(6 /* CompletionItemKind.Struct */);\n        }\n        if (!suggestOptions.showInterfaces) {\n            result.add(7 /* CompletionItemKind.Interface */);\n        }\n        if (!suggestOptions.showModules) {\n            result.add(8 /* CompletionItemKind.Module */);\n        }\n        if (!suggestOptions.showProperties) {\n            result.add(9 /* CompletionItemKind.Property */);\n        }\n        if (!suggestOptions.showEvents) {\n            result.add(10 /* CompletionItemKind.Event */);\n        }\n        if (!suggestOptions.showOperators) {\n            result.add(11 /* CompletionItemKind.Operator */);\n        }\n        if (!suggestOptions.showUnits) {\n            result.add(12 /* CompletionItemKind.Unit */);\n        }\n        if (!suggestOptions.showValues) {\n            result.add(13 /* CompletionItemKind.Value */);\n        }\n        if (!suggestOptions.showConstants) {\n            result.add(14 /* CompletionItemKind.Constant */);\n        }\n        if (!suggestOptions.showEnums) {\n            result.add(15 /* CompletionItemKind.Enum */);\n        }\n        if (!suggestOptions.showEnumMembers) {\n            result.add(16 /* CompletionItemKind.EnumMember */);\n        }\n        if (!suggestOptions.showKeywords) {\n            result.add(17 /* CompletionItemKind.Keyword */);\n        }\n        if (!suggestOptions.showWords) {\n            result.add(18 /* CompletionItemKind.Text */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(19 /* CompletionItemKind.Color */);\n        }\n        if (!suggestOptions.showFiles) {\n            result.add(20 /* CompletionItemKind.File */);\n        }\n        if (!suggestOptions.showReferences) {\n            result.add(21 /* CompletionItemKind.Reference */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(22 /* CompletionItemKind.Customcolor */);\n        }\n        if (!suggestOptions.showFolders) {\n            result.add(23 /* CompletionItemKind.Folder */);\n        }\n        if (!suggestOptions.showTypeParameters) {\n            result.add(24 /* CompletionItemKind.TypeParameter */);\n        }\n        if (!suggestOptions.showSnippets) {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        if (!suggestOptions.showUsers) {\n            result.add(25 /* CompletionItemKind.User */);\n        }\n        if (!suggestOptions.showIssues) {\n            result.add(26 /* CompletionItemKind.Issue */);\n        }\n        return { itemKind: result, showDeprecated: suggestOptions.showDeprecated };\n    }\n    _onNewContext(ctx) {\n        if (!this._context) {\n            // happens when 24x7 IntelliSense is enabled and still in its delay\n            return;\n        }\n        if (ctx.lineNumber !== this._context.lineNumber) {\n            // e.g. happens when pressing Enter while IntelliSense is computed\n            this.cancel();\n            return;\n        }\n        if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\n            // cancel IntelliSense when line start changes\n            // happens when the current word gets outdented\n            this.cancel();\n            return;\n        }\n        if (ctx.column < this._context.column) {\n            // typed -> moved cursor LEFT -> retrigger if still on a word\n            if (ctx.leadingWord.word) {\n                this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true);\n            }\n            else {\n                this.cancel();\n            }\n            return;\n        }\n        if (!this._completionModel) {\n            // happens when IntelliSense is not yet computed\n            return;\n        }\n        if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\n            // started a new word while IntelliSense shows -> retrigger\n            // Select those providers have not contributed to this completion model and re-trigger completions for\n            // them. Also adopt the existing items and merge them into the new completion model\n            const inactiveProvider = new Set(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));\n            for (const provider of this._completionModel.allProvider) {\n                inactiveProvider.delete(provider);\n            }\n            const items = this._completionModel.adopt(new Set());\n            this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true, inactiveProvider, { items, clipboardText: this._completionModel.clipboardText });\n            return;\n        }\n        if (ctx.column > this._context.column && this._completionModel.incomplete.size > 0 && ctx.leadingWord.word.length !== 0) {\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n            const { incomplete } = this._completionModel;\n            const items = this._completionModel.adopt(incomplete);\n            this.trigger({ auto: this._state === 2 /* State.Auto */, shy: false, noSelect: false, triggerKind: 2 /* CompletionTriggerKind.TriggerForIncompleteCompletions */ }, true, incomplete, { items, clipboardText: this._completionModel.clipboardText });\n        }\n        else {\n            // typed -> moved cursor RIGHT -> update UI\n            const oldLineContext = this._completionModel.lineContext;\n            let isFrozen = false;\n            this._completionModel.lineContext = {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            };\n            if (this._completionModel.items.length === 0) {\n                if (LineContext.shouldAutoTrigger(this._editor) && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n                    // retrigger when heading into a new word\n                    this.trigger({ auto: this._context.auto, shy: false, noSelect: false }, true);\n                    return;\n                }\n                if (!this._context.auto) {\n                    // freeze when IntelliSense was manually requested\n                    this._completionModel.lineContext = oldLineContext;\n                    isFrozen = this._completionModel.items.length > 0;\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\n                        // there were results before but now there aren't\n                        // and also we are not on a word anymore -> cancel\n                        this.cancel();\n                        return;\n                    }\n                }\n                else {\n                    // nothing left\n                    this.cancel();\n                    return;\n                }\n            }\n            this._onDidSuggest.fire({\n                completionModel: this._completionModel,\n                auto: this._context.auto,\n                shy: this._context.shy,\n                noSelect: this._context.noSelect,\n                isFrozen,\n            });\n        }\n    }\n};\nSuggestModel = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IClipboardService),\n    __param(3, ITelemetryService),\n    __param(4, ILogService),\n    __param(5, IContextKeyService),\n    __param(6, IConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], SuggestModel);\nexport { SuggestModel };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class OvertypingCapturer {\n    constructor(editor, suggestModel) {\n        this._disposables = new DisposableStore();\n        this._lastOvertyped = [];\n        this._empty = true;\n        this._disposables.add(editor.onWillType(() => {\n            if (!this._empty) {\n                return;\n            }\n            if (!editor.hasModel()) {\n                return;\n            }\n            const selections = editor.getSelections();\n            const selectionsLength = selections.length;\n            // Check if it will overtype any selections\n            let willOvertype = false;\n            for (let i = 0; i < selectionsLength; i++) {\n                if (!selections[i].isEmpty()) {\n                    willOvertype = true;\n                    break;\n                }\n            }\n            if (!willOvertype) {\n                return;\n            }\n            this._lastOvertyped = [];\n            const model = editor.getModel();\n            for (let i = 0; i < selectionsLength; i++) {\n                const selection = selections[i];\n                // Check for overtyping capturer restrictions\n                if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\n                    return;\n                }\n                this._lastOvertyped[i] = { value: model.getValueInRange(selection), multiline: selection.startLineNumber !== selection.endLineNumber };\n            }\n            this._empty = false;\n        }));\n        this._disposables.add(suggestModel.onDidCancel(e => {\n            if (!this._empty && !e.retrigger) {\n                this._empty = true;\n            }\n        }));\n    }\n    getLastOvertypedInfo(idx) {\n        if (!this._empty && idx >= 0 && idx < this._lastOvertyped.length) {\n            return this._lastOvertyped[idx];\n        }\n        return undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nOvertypingCapturer._maxSelectionLength = 51200;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { suggestWidgetStatusbarMenu } from './suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            this.label.textContent = localize('ddd', '{0} ({1})', this._action.label, StatusBarViewItem.symbolPrintEnter(kb));\n        }\n    }\n    static symbolPrintEnter(kb) {\n        var _a;\n        return (_a = kb.getLabel()) === null || _a === void 0 ? void 0 : _a.replace(/\\benter\\b/gi, '\\u23CE');\n    }\n}\nlet SuggestWidgetStatus = class SuggestWidgetStatus {\n    constructor(container, instantiationService, _menuService, _contextKeyService) {\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._menuDisposables = new DisposableStore();\n        this.element = dom.append(container, dom.$('.suggest-status-bar'));\n        const actionViewItemProvider = (action => {\n            return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\n        });\n        this._leftActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._rightActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._leftActions.domNode.classList.add('left');\n        this._rightActions.domNode.classList.add('right');\n    }\n    dispose() {\n        this._menuDisposables.dispose();\n        this.element.remove();\n    }\n    show() {\n        const menu = this._menuService.createMenu(suggestWidgetStatusbarMenu, this._contextKeyService);\n        const renderMenu = () => {\n            const left = [];\n            const right = [];\n            for (const [group, actions] of menu.getActions()) {\n                if (group === 'left') {\n                    left.push(...actions);\n                }\n                else {\n                    right.push(...actions);\n                }\n            }\n            this._leftActions.clear();\n            this._leftActions.push(left);\n            this._rightActions.clear();\n            this._rightActions.push(right);\n        };\n        this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\n        this._menuDisposables.add(menu);\n    }\n    hide() {\n        this._menuDisposables.clear();\n    }\n};\nSuggestWidgetStatus = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IMenuService),\n    __param(3, IContextKeyService)\n], SuggestWidgetStatus);\nexport { SuggestWidgetStatus };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function canExpandCompletionItem(item) {\n    return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\n}\nlet SuggestDetailsWidget = class SuggestDetailsWidget {\n    constructor(_editor, instaService) {\n        this._editor = _editor;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        this._onDidChangeContents = new Emitter();\n        this.onDidChangeContents = this._onDidChangeContents.event;\n        this._disposables = new DisposableStore();\n        this._renderDisposeable = new DisposableStore();\n        this._borderWidth = 1;\n        this._size = new dom.Dimension(330, 0);\n        this.domNode = dom.$('.suggest-details');\n        this.domNode.classList.add('no-docs');\n        this._markdownRenderer = instaService.createInstance(MarkdownRenderer, { editor: _editor });\n        this._body = dom.$('.body');\n        this._scrollbar = new DomScrollableElement(this._body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        dom.append(this.domNode, this._scrollbar.getDomNode());\n        this._disposables.add(this._scrollbar);\n        this._header = dom.append(this._body, dom.$('.header'));\n        this._close = dom.append(this._header, dom.$('span' + Codicon.close.cssSelector));\n        this._close.title = nls.localize('details.close', \"Close\");\n        this._type = dom.append(this._header, dom.$('p.type'));\n        this._docs = dom.append(this._body, dom.$('p.docs'));\n        this._configureFont();\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */)) {\n                this._configureFont();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._renderDisposeable.dispose();\n    }\n    _configureFont() {\n        const options = this._editor.getOptions();\n        const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n        const fontFamily = fontInfo.getMassagedFontFamily();\n        const fontSize = options.get(109 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n        const lineHeight = options.get(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n        const fontWeight = fontInfo.fontWeight;\n        const fontSizePx = `${fontSize}px`;\n        const lineHeightPx = `${lineHeight}px`;\n        this.domNode.style.fontSize = fontSizePx;\n        this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this.domNode.style.fontWeight = fontWeight;\n        this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        this._type.style.fontFamily = fontFamily;\n        this._close.style.height = lineHeightPx;\n        this._close.style.width = lineHeightPx;\n    }\n    getLayoutInfo() {\n        const lineHeight = this._editor.getOption(110 /* EditorOption.suggestLineHeight */) || this._editor.getOption(46 /* EditorOption.fontInfo */).lineHeight;\n        const borderWidth = this._borderWidth;\n        const borderHeight = borderWidth * 2;\n        return {\n            lineHeight,\n            borderWidth,\n            borderHeight,\n            verticalPadding: 22,\n            horizontalPadding: 14\n        };\n    }\n    renderLoading() {\n        this._type.textContent = nls.localize('loading', \"Loading...\");\n        this._docs.textContent = '';\n        this.domNode.classList.remove('no-docs', 'no-type');\n        this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n        this._onDidChangeContents.fire(this);\n    }\n    renderItem(item, explainMode) {\n        var _a, _b;\n        this._renderDisposeable.clear();\n        let { detail, documentation } = item.completion;\n        if (explainMode) {\n            let md = '';\n            md += `score: ${item.score[0]}\\n`;\n            md += `prefix: ${(_a = item.word) !== null && _a !== void 0 ? _a : '(no prefix)'}\\n`;\n            md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\n            md += `distance: ${item.distance} (localityBonus-setting)\\n`;\n            md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\n            md += `commit_chars: ${(_b = item.completion.commitCharacters) === null || _b === void 0 ? void 0 : _b.join('')}\\n`;\n            documentation = new MarkdownString().appendCodeblock('empty', md);\n            detail = `Provider: ${item.provider._debugDisplayName}`;\n        }\n        if (!explainMode && !canExpandCompletionItem(item)) {\n            this.clearContents();\n            return;\n        }\n        this.domNode.classList.remove('no-docs', 'no-type');\n        // --- details\n        if (detail) {\n            const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}…` : detail;\n            this._type.textContent = cappedDetail;\n            this._type.title = cappedDetail;\n            dom.show(this._type);\n            this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\n        }\n        else {\n            dom.clearNode(this._type);\n            this._type.title = '';\n            dom.hide(this._type);\n            this.domNode.classList.add('no-type');\n        }\n        // --- documentation\n        dom.clearNode(this._docs);\n        if (typeof documentation === 'string') {\n            this._docs.classList.remove('markdown-docs');\n            this._docs.textContent = documentation;\n        }\n        else if (documentation) {\n            this._docs.classList.add('markdown-docs');\n            dom.clearNode(this._docs);\n            const renderedContents = this._markdownRenderer.render(documentation);\n            this._docs.appendChild(renderedContents.element);\n            this._renderDisposeable.add(renderedContents);\n            this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\n                this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n                this._onDidChangeContents.fire(this);\n            }));\n        }\n        this.domNode.style.userSelect = 'text';\n        this.domNode.tabIndex = -1;\n        this._close.onmousedown = e => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n        this._close.onclick = e => {\n            e.preventDefault();\n            e.stopPropagation();\n            this._onDidClose.fire();\n        };\n        this._body.scrollTop = 0;\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n        this._onDidChangeContents.fire(this);\n    }\n    clearContents() {\n        this.domNode.classList.add('no-docs');\n        this._type.textContent = '';\n        this._docs.textContent = '';\n    }\n    get size() {\n        return this._size;\n    }\n    layout(width, height) {\n        const newSize = new dom.Dimension(width, height);\n        if (!dom.Dimension.equals(newSize, this._size)) {\n            this._size = newSize;\n            dom.size(this.domNode, width, height);\n        }\n        this._scrollbar.scanDomNode();\n    }\n    scrollDown(much = 8) {\n        this._body.scrollTop += much;\n    }\n    scrollUp(much = 8) {\n        this._body.scrollTop -= much;\n    }\n    scrollTop() {\n        this._body.scrollTop = 0;\n    }\n    scrollBottom() {\n        this._body.scrollTop = this._body.scrollHeight;\n    }\n    pageDown() {\n        this.scrollDown(80);\n    }\n    pageUp() {\n        this.scrollUp(80);\n    }\n    set borderWidth(width) {\n        this._borderWidth = width;\n    }\n    get borderWidth() {\n        return this._borderWidth;\n    }\n};\nSuggestDetailsWidget = __decorate([\n    __param(1, IInstantiationService)\n], SuggestDetailsWidget);\nexport { SuggestDetailsWidget };\nexport class SuggestDetailsOverlay {\n    constructor(widget, _editor) {\n        this.widget = widget;\n        this._editor = _editor;\n        this._disposables = new DisposableStore();\n        this._added = false;\n        this._preferAlignAtTop = true;\n        this._resizable = new ResizableHTMLElement();\n        this._resizable.domNode.classList.add('suggest-details-container');\n        this._resizable.domNode.appendChild(widget.domNode);\n        this._resizable.enableSashes(false, true, true, false);\n        let topLeftNow;\n        let sizeNow;\n        let deltaTop = 0;\n        let deltaLeft = 0;\n        this._disposables.add(this._resizable.onDidWillResize(() => {\n            topLeftNow = this._topLeft;\n            sizeNow = this._resizable.size;\n        }));\n        this._disposables.add(this._resizable.onDidResize(e => {\n            if (topLeftNow && sizeNow) {\n                this.widget.layout(e.dimension.width, e.dimension.height);\n                let updateTopLeft = false;\n                if (e.west) {\n                    deltaLeft = sizeNow.width - e.dimension.width;\n                    updateTopLeft = true;\n                }\n                if (e.north) {\n                    deltaTop = sizeNow.height - e.dimension.height;\n                    updateTopLeft = true;\n                }\n                if (updateTopLeft) {\n                    this._applyTopLeft({\n                        top: topLeftNow.top + deltaTop,\n                        left: topLeftNow.left + deltaLeft,\n                    });\n                }\n            }\n            if (e.done) {\n                topLeftNow = undefined;\n                sizeNow = undefined;\n                deltaTop = 0;\n                deltaLeft = 0;\n                this._userSize = e.dimension;\n            }\n        }));\n        this._disposables.add(this.widget.onDidChangeContents(() => {\n            var _a;\n            if (this._anchorBox) {\n                this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, this._preferAlignAtTop);\n            }\n        }));\n    }\n    dispose() {\n        this._resizable.dispose();\n        this._disposables.dispose();\n        this.hide();\n    }\n    getId() {\n        return 'suggest.details';\n    }\n    getDomNode() {\n        return this._resizable.domNode;\n    }\n    getPosition() {\n        return null;\n    }\n    show() {\n        if (!this._added) {\n            this._editor.addOverlayWidget(this);\n            this.getDomNode().style.position = 'fixed';\n            this._added = true;\n        }\n    }\n    hide(sessionEnded = false) {\n        this._resizable.clearSashHoverState();\n        if (this._added) {\n            this._editor.removeOverlayWidget(this);\n            this._added = false;\n            this._anchorBox = undefined;\n            this._topLeft = undefined;\n        }\n        if (sessionEnded) {\n            this._userSize = undefined;\n            this.widget.clearContents();\n        }\n    }\n    placeAtAnchor(anchor, preferAlignAtTop) {\n        var _a;\n        const anchorBox = anchor.getBoundingClientRect();\n        this._anchorBox = anchorBox;\n        this._preferAlignAtTop = preferAlignAtTop;\n        this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, preferAlignAtTop);\n    }\n    _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\n        var _a;\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.widget.getLayoutInfo();\n        const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n        const defaultTop = anchorBox.top;\n        // EAST\n        const eastPlacement = (function () {\n            const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\n            const left = -info.borderWidth + anchorBox.left + anchorBox.width;\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // WEST\n        const westPlacement = (function () {\n            const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\n            const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // SOUTH\n        const southPacement = (function () {\n            const left = anchorBox.left;\n            const top = -info.borderWidth + anchorBox.top + anchorBox.height;\n            const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\n            return { top, left, fit: maxSizeBottom.height - size.height, maxSizeBottom, maxSizeTop: maxSizeBottom, minSize: defaultMinSize.with(maxSizeBottom.width) };\n        })();\n        // take first placement that fits or the first with \"least bad\" fit\n        const placements = [eastPlacement, westPlacement, southPacement];\n        const placement = (_a = placements.find(p => p.fit >= 0)) !== null && _a !== void 0 ? _a : placements.sort((a, b) => b.fit - a.fit)[0];\n        // top/bottom placement\n        const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n        let alignAtTop;\n        let height = size.height;\n        const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\n        if (height > maxHeight) {\n            height = maxHeight;\n        }\n        let maxSize;\n        if (preferAlignAtTop) {\n            if (height <= placement.maxSizeTop.height) {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n            else {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n        }\n        else {\n            if (height <= placement.maxSizeBottom.height) {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n            else {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n        }\n        this._applyTopLeft({ left: placement.left, top: alignAtTop ? placement.top : bottom - height });\n        this.getDomNode().style.position = 'fixed';\n        this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\n        this._resizable.minSize = placement.minSize;\n        this._resizable.maxSize = maxSize;\n        this._resizable.layout(height, Math.min(maxSize.width, size.width));\n        this.widget.layout(this._resizable.size.width, this._resizable.size.height);\n    }\n    _applyTopLeft(topLeft) {\n        this._topLeft = topLeft;\n        this.getDomNode().style.left = `${this._topLeft.left}px`;\n        this.getDomNode().style.top = `${this._topLeft.top}px`;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { Codicon, CSSIcon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { createMatches } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport * as nls from '../../../../nls.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\nexport function getAriaId(index) {\n    return `suggest-aria-id:${index}`;\n}\nexport const suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\nconst _completionItemColor = new (_a = class ColorExtractor {\n        extract(item, out) {\n            if (item.textLabel.match(ColorExtractor._regexStrict)) {\n                out[0] = item.textLabel;\n                return true;\n            }\n            if (item.completion.detail && item.completion.detail.match(ColorExtractor._regexStrict)) {\n                out[0] = item.completion.detail;\n                return true;\n            }\n            if (typeof item.completion.documentation === 'string') {\n                const match = ColorExtractor._regexRelaxed.exec(item.completion.documentation);\n                if (match && (match.index === 0 || match.index + match[0].length === item.completion.documentation.length)) {\n                    out[0] = match[0];\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n    _a._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/,\n    _a._regexStrict = new RegExp(`^${_a._regexRelaxed.source}$`, 'i'),\n    _a);\nlet ItemRenderer = class ItemRenderer {\n    constructor(_editor, _modelService, _languageService, _themeService) {\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._languageService = _languageService;\n        this._themeService = _themeService;\n        this._onDidToggleDetails = new Emitter();\n        this.onDidToggleDetails = this._onDidToggleDetails.event;\n        this.templateId = 'suggestion';\n    }\n    dispose() {\n        this._onDidToggleDetails.dispose();\n    }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.disposables = new DisposableStore();\n        data.root = container;\n        data.root.classList.add('show-file-icons');\n        data.icon = append(container, $('.icon'));\n        data.colorspan = append(data.icon, $('span.colorspan'));\n        const text = append(container, $('.contents'));\n        const main = append(text, $('.main'));\n        data.iconContainer = append(main, $('.icon-label.codicon'));\n        data.left = append(main, $('span.left'));\n        data.right = append(main, $('span.right'));\n        data.iconLabel = new IconLabel(data.left, { supportHighlights: true, supportIcons: true });\n        data.disposables.add(data.iconLabel);\n        data.parametersLabel = append(data.left, $('span.signature-label'));\n        data.qualifierLabel = append(data.left, $('span.qualifier-label'));\n        data.detailsLabel = append(data.right, $('span.details-label'));\n        data.readMore = append(data.right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\n        data.readMore.title = nls.localize('readMore', \"Read More\");\n        const configureFont = () => {\n            const options = this._editor.getOptions();\n            const fontInfo = options.get(46 /* EditorOption.fontInfo */);\n            const fontFamily = fontInfo.getMassagedFontFamily();\n            const fontFeatureSettings = fontInfo.fontFeatureSettings;\n            const fontSize = options.get(109 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n            const lineHeight = options.get(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n            const fontWeight = fontInfo.fontWeight;\n            const letterSpacing = fontInfo.letterSpacing;\n            const fontSizePx = `${fontSize}px`;\n            const lineHeightPx = `${lineHeight}px`;\n            const letterSpacingPx = `${letterSpacing}px`;\n            data.root.style.fontSize = fontSizePx;\n            data.root.style.fontWeight = fontWeight;\n            data.root.style.letterSpacing = letterSpacingPx;\n            main.style.fontFamily = fontFamily;\n            main.style.fontFeatureSettings = fontFeatureSettings;\n            main.style.lineHeight = lineHeightPx;\n            data.icon.style.height = lineHeightPx;\n            data.icon.style.width = lineHeightPx;\n            data.readMore.style.height = lineHeightPx;\n            data.readMore.style.width = lineHeightPx;\n        };\n        configureFont();\n        data.disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(46 /* EditorOption.fontInfo */) || e.hasChanged(109 /* EditorOption.suggestFontSize */) || e.hasChanged(110 /* EditorOption.suggestLineHeight */)) {\n                configureFont();\n            }\n        }));\n        return data;\n    }\n    renderElement(element, index, data) {\n        const { completion } = element;\n        data.root.id = getAriaId(index);\n        data.colorspan.style.backgroundColor = '';\n        const labelOptions = {\n            labelEscapeNewLines: true,\n            matches: createMatches(element.score)\n        };\n        const color = [];\n        if (completion.kind === 19 /* CompletionItemKind.Color */ && _completionItemColor.extract(element, color)) {\n            // special logic for 'color' completion items\n            data.icon.className = 'icon customcolor';\n            data.iconContainer.className = 'icon hide';\n            data.colorspan.style.backgroundColor = color[0];\n        }\n        else if (completion.kind === 20 /* CompletionItemKind.File */ && this._themeService.getFileIconTheme().hasFileIcons) {\n            // special logic for 'file' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FILE);\n            const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FILE);\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n        }\n        else if (completion.kind === 23 /* CompletionItemKind.Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\n            // special logic for 'folder' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            labelOptions.extraClasses = [\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FOLDER),\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FOLDER)\n            ].flat();\n        }\n        else {\n            // normal icon\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = '';\n            data.iconContainer.classList.add('suggest-icon', ...CSSIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\n        }\n        if (completion.tags && completion.tags.indexOf(1 /* CompletionItemTag.Deprecated */) >= 0) {\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n            labelOptions.matches = [];\n        }\n        data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\n        if (typeof completion.label === 'string') {\n            data.parametersLabel.textContent = '';\n            data.detailsLabel.textContent = stripNewLines(completion.detail || '');\n            data.root.classList.add('string-label');\n        }\n        else {\n            data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\n            data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\n            data.root.classList.remove('string-label');\n        }\n        if (this._editor.getOption(108 /* EditorOption.suggest */).showInlineDetails) {\n            show(data.detailsLabel);\n        }\n        else {\n            hide(data.detailsLabel);\n        }\n        if (canExpandCompletionItem(element)) {\n            data.right.classList.add('can-expand-details');\n            show(data.readMore);\n            data.readMore.onmousedown = e => {\n                e.stopPropagation();\n                e.preventDefault();\n            };\n            data.readMore.onclick = e => {\n                e.stopPropagation();\n                e.preventDefault();\n                this._onDidToggleDetails.fire();\n            };\n        }\n        else {\n            data.right.classList.remove('can-expand-details');\n            hide(data.readMore);\n            data.readMore.onmousedown = null;\n            data.readMore.onclick = null;\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n};\nItemRenderer = __decorate([\n    __param(1, IModelService),\n    __param(2, ILanguageService),\n    __param(3, IThemeService)\n], ItemRenderer);\nexport { ItemRenderer };\nfunction stripNewLines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { attachListStyler } from '../../../../platform/theme/common/styler.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { Context as SuggestContext } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\n/**\n * Suggest widget colors\n */\nexport const editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hcDark: editorWidgetBackground, hcLight: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nexport const editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hcDark: editorWidgetBorder, hcLight: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nexport const editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hcDark: editorForeground, hcLight: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nexport const editorSuggestWidgetSelectedForeground = registerColor('editorSuggestWidget.selectedForeground', { dark: quickInputListFocusForeground, light: quickInputListFocusForeground, hcDark: quickInputListFocusForeground, hcLight: quickInputListFocusForeground }, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedIconForeground = registerColor('editorSuggestWidget.selectedIconForeground', { dark: quickInputListFocusIconForeground, light: quickInputListFocusIconForeground, hcDark: quickInputListFocusIconForeground, hcLight: quickInputListFocusIconForeground }, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: quickInputListFocusBackground, light: quickInputListFocusBackground, hcDark: quickInputListFocusBackground, hcLight: quickInputListFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nexport const editorSuggestWidgetHighlightFocusForeground = registerColor('editorSuggestWidget.focusHighlightForeground', { dark: listFocusHighlightForeground, light: listFocusHighlightForeground, hcDark: listFocusHighlightForeground, hcLight: listFocusHighlightForeground }, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nexport const editorSuggestWidgetStatusForeground = registerColor('editorSuggestWidgetStatus.foreground', { dark: transparent(editorSuggestWidgetForeground, .5), light: transparent(editorSuggestWidgetForeground, .5), hcDark: transparent(editorSuggestWidgetForeground, .5), hcLight: transparent(editorSuggestWidgetForeground, .5) }, nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\nclass PersistedWidgetSize {\n    constructor(_service, editor) {\n        this._service = _service;\n        this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n    }\n    restore() {\n        var _a;\n        const raw = (_a = this._service.get(this._key, 0 /* StorageScope.PROFILE */)) !== null && _a !== void 0 ? _a : '';\n        try {\n            const obj = JSON.parse(raw);\n            if (dom.Dimension.is(obj)) {\n                return dom.Dimension.lift(obj);\n            }\n        }\n        catch (_b) {\n            // ignore\n        }\n        return undefined;\n    }\n    store(size) {\n        this._service.store(this._key, JSON.stringify(size), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n    }\n    reset() {\n        this._service.remove(this._key, 0 /* StorageScope.PROFILE */);\n    }\n}\nlet SuggestWidget = class SuggestWidget {\n    constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\n        this.editor = editor;\n        this._storageService = _storageService;\n        this._state = 0 /* State.Hidden */;\n        this._isAuto = false;\n        this._ignoreFocusEvents = false;\n        this._forceRenderingAbove = false;\n        this._explainMode = false;\n        this._showTimeout = new TimeoutTimer();\n        this._disposables = new DisposableStore();\n        this._onDidSelect = new Emitter();\n        this._onDidFocus = new Emitter();\n        this._onDidHide = new Emitter();\n        this._onDidShow = new Emitter();\n        this.onDidSelect = this._onDidSelect.event;\n        this.onDidFocus = this._onDidFocus.event;\n        this.onDidHide = this._onDidHide.event;\n        this.onDidShow = this._onDidShow.event;\n        this._onDetailsKeydown = new Emitter();\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\n        this.element = new ResizableHTMLElement();\n        this.element.domNode.classList.add('editor-widget', 'suggest-widget');\n        this._contentWidget = new SuggestContentWidget(this, editor);\n        this._persistedSize = new PersistedWidgetSize(_storageService, editor);\n        class ResizeState {\n            constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\n                this.persistedSize = persistedSize;\n                this.currentSize = currentSize;\n                this.persistHeight = persistHeight;\n                this.persistWidth = persistWidth;\n            }\n        }\n        let state;\n        this._disposables.add(this.element.onDidWillResize(() => {\n            this._contentWidget.lockPreference();\n            state = new ResizeState(this._persistedSize.restore(), this.element.size);\n        }));\n        this._disposables.add(this.element.onDidResize(e => {\n            var _a, _b, _c, _d;\n            this._resize(e.dimension.width, e.dimension.height);\n            if (state) {\n                state.persistHeight = state.persistHeight || !!e.north || !!e.south;\n                state.persistWidth = state.persistWidth || !!e.east || !!e.west;\n            }\n            if (!e.done) {\n                return;\n            }\n            if (state) {\n                // only store width or height value that have changed and also\n                // only store changes that are above a certain threshold\n                const { itemHeight, defaultSize } = this.getLayoutInfo();\n                const threshold = Math.round(itemHeight / 2);\n                let { width, height } = this.element.size;\n                if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n                    height = (_b = (_a = state.persistedSize) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : defaultSize.height;\n                }\n                if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n                    width = (_d = (_c = state.persistedSize) === null || _c === void 0 ? void 0 : _c.width) !== null && _d !== void 0 ? _d : defaultSize.width;\n                }\n                this._persistedSize.store(new dom.Dimension(width, height));\n            }\n            // reset working state\n            this._contentWidget.unlockPreference();\n            state = undefined;\n        }));\n        this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n        this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n        const details = instantiationService.createInstance(SuggestDetailsWidget, this.editor);\n        details.onDidClose(this.toggleDetails, this, this._disposables);\n        this._details = new SuggestDetailsOverlay(details, this.editor);\n        const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(108 /* EditorOption.suggest */).showIcons);\n        applyIconStyle();\n        const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n        this._disposables.add(renderer);\n        this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n        this._list = new List('SuggestWidget', this._listElement, {\n            getHeight: (_element) => this.getLayoutInfo().itemHeight,\n            getTemplateId: (_element) => 'suggestion'\n        }, [renderer], {\n            alwaysConsumeMouseWheel: true,\n            useShadows: false,\n            mouseSupport: false,\n            multipleSelectionSupport: false,\n            accessibilityProvider: {\n                getRole: () => 'option',\n                getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n                getWidgetRole: () => 'listbox',\n                getAriaLabel: (item) => {\n                    let label = item.textLabel;\n                    if (typeof item.completion.label !== 'string') {\n                        const { detail, description } = item.completion.label;\n                        if (detail && description) {\n                            label = nls.localize('label.full', '{0}{1}, {2}', label, detail, description);\n                        }\n                        else if (detail) {\n                            label = nls.localize('label.detail', '{0}{1}', label, detail);\n                        }\n                        else if (description) {\n                            label = nls.localize('label.desc', '{0}, {1}', label, description);\n                        }\n                    }\n                    if (!item.isResolved || !this._isDetailsVisible()) {\n                        return label;\n                    }\n                    const { documentation, detail } = item.completion;\n                    const docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\n                    return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n                },\n            }\n        });\n        this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode);\n        const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(108 /* EditorOption.suggest */).showStatusBar);\n        applyStatusBarStyle();\n        this._disposables.add(attachListStyler(this._list, _themeService, {\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n            listInactiveFocusOutline: activeContrastBorder\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n        this._onThemeChange(_themeService.getColorTheme());\n        this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n        this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n        this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n        this._disposables.add(this.editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(108 /* EditorOption.suggest */)) {\n                applyStatusBarStyle();\n                applyIconStyle();\n            }\n        }));\n        this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetHasFocusedSuggestion = SuggestContext.HasFocusedSuggestion.bindTo(_contextKeyService);\n        this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n            this._onDetailsKeydown.fire(e);\n        }));\n        this._disposables.add(this.editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n    }\n    dispose() {\n        var _a;\n        this._details.widget.dispose();\n        this._details.dispose();\n        this._list.dispose();\n        this._status.dispose();\n        this._disposables.dispose();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._showTimeout.dispose();\n        this._contentWidget.dispose();\n        this.element.dispose();\n    }\n    _onEditorMouseDown(mouseEvent) {\n        if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n            // Clicking inside details\n            this._details.widget.domNode.focus();\n        }\n        else {\n            // Clicking outside details and inside suggest\n            if (this.element.domNode.contains(mouseEvent.target.element)) {\n                this.editor.focus();\n            }\n        }\n    }\n    _onCursorSelectionChanged() {\n        if (this._state !== 0 /* State.Hidden */) {\n            this._contentWidget.layout();\n        }\n    }\n    _onListMouseDownOrTap(e) {\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n            return;\n        }\n        // prevent stealing browser focus from the editor\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n        this._select(e.element, e.index);\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            this._select(e.elements[0], e.indexes[0]);\n        }\n    }\n    _select(item, index) {\n        const completionModel = this._completionModel;\n        if (completionModel) {\n            this._onDidSelect.fire({ item, index, model: completionModel });\n            this.editor.focus();\n        }\n    }\n    _onThemeChange(theme) {\n        this._details.widget.borderWidth = isHighContrast(theme.type) ? 2 : 1;\n    }\n    _onListFocus(e) {\n        var _a;\n        if (this._ignoreFocusEvents) {\n            return;\n        }\n        if (!e.elements.length) {\n            if (this._currentSuggestionDetails) {\n                this._currentSuggestionDetails.cancel();\n                this._currentSuggestionDetails = undefined;\n                this._focusedItem = undefined;\n            }\n            this.editor.setAriaOptions({ activeDescendant: undefined });\n            this._ctxSuggestWidgetHasFocusedSuggestion.set(false);\n            return;\n        }\n        if (!this._completionModel) {\n            return;\n        }\n        this._ctxSuggestWidgetHasFocusedSuggestion.set(true);\n        const item = e.elements[0];\n        const index = e.indexes[0];\n        if (item !== this._focusedItem) {\n            (_a = this._currentSuggestionDetails) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._currentSuggestionDetails = undefined;\n            this._focusedItem = item;\n            this._list.reveal(index);\n            this._currentSuggestionDetails = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const loading = disposableTimeout(() => {\n                    if (this._isDetailsVisible()) {\n                        this.showDetails(true);\n                    }\n                }, 250);\n                const sub = token.onCancellationRequested(() => loading.dispose());\n                const result = yield item.resolve(token);\n                loading.dispose();\n                sub.dispose();\n                return result;\n            }));\n            this._currentSuggestionDetails.then(() => {\n                if (index >= this._list.length || item !== this._list.element(index)) {\n                    return;\n                }\n                // item can have extra information, so re-render\n                this._ignoreFocusEvents = true;\n                this._list.splice(index, 1, [item]);\n                this._list.setFocus([index]);\n                this._ignoreFocusEvents = false;\n                if (this._isDetailsVisible()) {\n                    this.showDetails(false);\n                }\n                else {\n                    this.element.domNode.classList.remove('docs-side');\n                }\n                this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\n            }).catch(onUnexpectedError);\n        }\n        // emit an event\n        this._onDidFocus.fire({ item, index, model: this._completionModel });\n    }\n    _setState(state) {\n        if (this._state === state) {\n            return;\n        }\n        this._state = state;\n        this.element.domNode.classList.toggle('frozen', state === 4 /* State.Frozen */);\n        this.element.domNode.classList.remove('message');\n        switch (state) {\n            case 0 /* State.Hidden */:\n                dom.hide(this._messageElement, this._listElement, this._status.element);\n                this._details.hide(true);\n                this._status.hide();\n                this._contentWidget.hide();\n                this._ctxSuggestWidgetVisible.reset();\n                this._ctxSuggestWidgetMultipleSuggestions.reset();\n                this._ctxSuggestWidgetHasFocusedSuggestion.reset();\n                this._showTimeout.cancel();\n                this.element.domNode.classList.remove('visible');\n                this._list.splice(0, this._list.length);\n                this._focusedItem = undefined;\n                this._cappedHeight = undefined;\n                this._explainMode = false;\n                break;\n            case 1 /* State.Loading */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 2 /* State.Empty */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 3 /* State.Open */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 4 /* State.Frozen */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 5 /* State.Details */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._details.show();\n                this._show();\n                break;\n        }\n    }\n    _show() {\n        this._status.show();\n        this._contentWidget.show();\n        this._layout(this._persistedSize.restore());\n        this._ctxSuggestWidgetVisible.set(true);\n        this._showTimeout.cancelAndSet(() => {\n            this.element.domNode.classList.add('visible');\n            this._onDidShow.fire(this);\n        }, 100);\n    }\n    showTriggered(auto, delay) {\n        if (this._state !== 0 /* State.Hidden */) {\n            return;\n        }\n        this._contentWidget.setPosition(this.editor.getPosition());\n        this._isAuto = !!auto;\n        if (!this._isAuto) {\n            this._loadingTimeout = disposableTimeout(() => this._setState(1 /* State.Loading */), delay);\n        }\n    }\n    showSuggestions(completionModel, selectionIndex, isFrozen, isAuto) {\n        var _a, _b;\n        this._contentWidget.setPosition(this.editor.getPosition());\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentSuggestionDetails) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._currentSuggestionDetails = undefined;\n        if (this._completionModel !== completionModel) {\n            this._completionModel = completionModel;\n        }\n        if (isFrozen && this._state !== 2 /* State.Empty */ && this._state !== 0 /* State.Hidden */) {\n            this._setState(4 /* State.Frozen */);\n            return;\n        }\n        const visibleCount = this._completionModel.items.length;\n        const isEmpty = visibleCount === 0;\n        this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n        if (isEmpty) {\n            this._setState(isAuto ? 0 /* State.Hidden */ : 2 /* State.Empty */);\n            this._completionModel = undefined;\n            return;\n        }\n        this._focusedItem = undefined;\n        this._list.splice(0, this._list.length, this._completionModel.items);\n        this._setState(isFrozen ? 4 /* State.Frozen */ : 3 /* State.Open */);\n        if (selectionIndex >= 0) {\n            this._list.reveal(selectionIndex, 0);\n            this._list.setFocus([selectionIndex]);\n        }\n        this._layout(this.element.size);\n        // Reset focus border\n        this._details.widget.domNode.classList.remove('focused');\n    }\n    selectNextPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageDown();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNextPage();\n                return true;\n        }\n    }\n    selectNext() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNext(1, true);\n                return true;\n        }\n    }\n    selectLast() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollBottom();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusLast();\n                return true;\n        }\n    }\n    selectPreviousPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageUp();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPreviousPage();\n                return true;\n        }\n    }\n    selectPrevious() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPrevious(1, true);\n                return false;\n        }\n    }\n    selectFirst() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollTop();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusFirst();\n                return true;\n        }\n    }\n    getFocusedItem() {\n        if (this._state !== 0 /* State.Hidden */\n            && this._state !== 2 /* State.Empty */\n            && this._state !== 1 /* State.Loading */\n            && this._completionModel) {\n            return {\n                item: this._list.getFocusedElements()[0],\n                index: this._list.getFocus()[0],\n                model: this._completionModel\n            };\n        }\n        return undefined;\n    }\n    toggleDetailsFocus() {\n        if (this._state === 5 /* State.Details */) {\n            this._setState(3 /* State.Open */);\n            this._details.widget.domNode.classList.remove('focused');\n        }\n        else if (this._state === 3 /* State.Open */ && this._isDetailsVisible()) {\n            this._setState(5 /* State.Details */);\n            this._details.widget.domNode.classList.add('focused');\n        }\n    }\n    toggleDetails() {\n        if (this._isDetailsVisible()) {\n            // hide details widget\n            this._ctxSuggestWidgetDetailsVisible.set(false);\n            this._setDetailsVisible(false);\n            this._details.hide();\n            this.element.domNode.classList.remove('shows-details');\n        }\n        else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* State.Open */ || this._state === 5 /* State.Details */ || this._state === 4 /* State.Frozen */)) {\n            // show details widget (iff possible)\n            this._ctxSuggestWidgetDetailsVisible.set(true);\n            this._setDetailsVisible(true);\n            this.showDetails(false);\n        }\n    }\n    showDetails(loading) {\n        this._details.show();\n        if (loading) {\n            this._details.widget.renderLoading();\n        }\n        else {\n            this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n        }\n        this._positionDetails();\n        this.editor.focus();\n        this.element.domNode.classList.add('shows-details');\n    }\n    toggleExplainMode() {\n        if (this._list.getFocusedElements()[0]) {\n            this._explainMode = !this._explainMode;\n            if (!this._isDetailsVisible()) {\n                this.toggleDetails();\n            }\n            else {\n                this.showDetails(false);\n            }\n        }\n    }\n    resetPersistedSize() {\n        this._persistedSize.reset();\n    }\n    hideWidget() {\n        var _a;\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._setState(0 /* State.Hidden */);\n        this._onDidHide.fire(this);\n        this.element.clearSashHoverState();\n        // ensure that a reasonable widget height is persisted so that\n        // accidential \"resize-to-single-items\" cases aren't happening\n        const dim = this._persistedSize.restore();\n        const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n        if (dim && dim.height < minPersistedHeight) {\n            this._persistedSize.store(dim.with(undefined, minPersistedHeight));\n        }\n    }\n    isFrozen() {\n        return this._state === 4 /* State.Frozen */;\n    }\n    _afterRender(position) {\n        if (position === null) {\n            if (this._isDetailsVisible()) {\n                this._details.hide(); //todo@jrieken soft-hide\n            }\n            return;\n        }\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // no special positioning when widget isn't showing list\n            return;\n        }\n        if (this._isDetailsVisible()) {\n            this._details.show();\n        }\n        this._positionDetails();\n    }\n    _layout(size) {\n        var _a, _b, _c;\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (!this.editor.getDomNode()) {\n            // happens when running tests\n            return;\n        }\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.getLayoutInfo();\n        if (!size) {\n            size = info.defaultSize;\n        }\n        let height = size.height;\n        let width = size.width;\n        // status bar\n        this._status.element.style.lineHeight = `${info.itemHeight}px`;\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // showing a message only\n            height = info.itemHeight + info.borderHeight;\n            width = info.defaultSize.width / 2;\n            this.element.enableSashes(false, false, false, false);\n            this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n            this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n        else {\n            // showing items\n            // width math\n            const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n            if (width > maxWidth) {\n                width = maxWidth;\n            }\n            const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n            // height math\n            const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n            const minHeight = info.itemHeight + info.statusBarHeight;\n            const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n            const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n            const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n            const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n            const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n            const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n            let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n            if (height === ((_a = this._cappedHeight) === null || _a === void 0 ? void 0 : _a.capped)) {\n                // Restore the old (wanted) height when the current\n                // height is capped to fit\n                height = this._cappedHeight.wanted;\n            }\n            if (height < minHeight) {\n                height = minHeight;\n            }\n            if (height > maxHeight) {\n                height = maxHeight;\n            }\n            const forceRenderingAboveRequiredSpace = 150;\n            if (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\n                this._contentWidget.setPreference(1 /* ContentWidgetPositionPreference.ABOVE */);\n                this.element.enableSashes(true, true, false, false);\n                maxHeight = maxHeightAbove;\n            }\n            else {\n                this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n                this.element.enableSashes(false, true, true, false);\n                maxHeight = maxHeightBelow;\n            }\n            this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n            this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n            this.element.minSize = new dom.Dimension(220, minHeight);\n            // Know when the height was capped to fit and remember\n            // the wanted height for later. This is required when going\n            // left to widen suggestions.\n            this._cappedHeight = height === fullHeight\n                ? { wanted: (_c = (_b = this._cappedHeight) === null || _b === void 0 ? void 0 : _b.wanted) !== null && _c !== void 0 ? _c : size.height, capped: height }\n                : undefined;\n        }\n        this._resize(width, height);\n    }\n    _resize(width, height) {\n        const { width: maxWidth, height: maxHeight } = this.element.maxSize;\n        width = Math.min(maxWidth, width);\n        height = Math.min(maxHeight, height);\n        const { statusBarHeight } = this.getLayoutInfo();\n        this._list.layout(height - statusBarHeight, width);\n        this._listElement.style.height = `${height - statusBarHeight}px`;\n        this.element.layout(height, width);\n        this._contentWidget.layout();\n        this._positionDetails();\n    }\n    _positionDetails() {\n        var _a;\n        if (this._isDetailsVisible()) {\n            this._details.placeAtAnchor(this.element.domNode, ((_a = this._contentWidget.getPosition()) === null || _a === void 0 ? void 0 : _a.preference[0]) === 2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n    }\n    getLayoutInfo() {\n        const fontInfo = this.editor.getOption(46 /* EditorOption.fontInfo */);\n        const itemHeight = clamp(this.editor.getOption(110 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\n        const statusBarHeight = !this.editor.getOption(108 /* EditorOption.suggest */).showStatusBar || this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */ ? 0 : itemHeight;\n        const borderWidth = this._details.widget.borderWidth;\n        const borderHeight = 2 * borderWidth;\n        return {\n            itemHeight,\n            statusBarHeight,\n            borderWidth,\n            borderHeight,\n            typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n            verticalPadding: 22,\n            horizontalPadding: 14,\n            defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n        };\n    }\n    _isDetailsVisible() {\n        return this._storageService.getBoolean('expandSuggestionDocs', 0 /* StorageScope.PROFILE */, false);\n    }\n    _setDetailsVisible(value) {\n        this._storageService.store('expandSuggestionDocs', value, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n    }\n    forceRenderingAbove() {\n        if (!this._forceRenderingAbove) {\n            this._forceRenderingAbove = true;\n            this._layout(this._persistedSize.restore());\n        }\n    }\n    stopForceRenderingAbove() {\n        this._forceRenderingAbove = false;\n    }\n};\nSuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\nSuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\nSuggestWidget = __decorate([\n    __param(1, IStorageService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, IInstantiationService)\n], SuggestWidget);\nexport { SuggestWidget };\nexport class SuggestContentWidget {\n    constructor(_widget, _editor) {\n        this._widget = _widget;\n        this._editor = _editor;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._preferenceLocked = false;\n        this._added = false;\n        this._hidden = false;\n    }\n    dispose() {\n        if (this._added) {\n            this._added = false;\n            this._editor.removeContentWidget(this);\n        }\n    }\n    getId() {\n        return 'editor.widget.suggestWidget';\n    }\n    getDomNode() {\n        return this._widget.element.domNode;\n    }\n    show() {\n        this._hidden = false;\n        if (!this._added) {\n            this._added = true;\n            this._editor.addContentWidget(this);\n        }\n    }\n    hide() {\n        if (!this._hidden) {\n            this._hidden = true;\n            this.layout();\n        }\n    }\n    layout() {\n        this._editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this._hidden || !this._position || !this._preference) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [this._preference]\n        };\n    }\n    beforeRender() {\n        const { height, width } = this._widget.element.size;\n        const { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\n        return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n    }\n    afterRender(position) {\n        this._widget._afterRender(position);\n    }\n    setPreference(preference) {\n        if (!this._preferenceLocked) {\n            this._preference = preference;\n        }\n    }\n    lockPreference() {\n        this._preferenceLocked = true;\n    }\n    unlockPreference() {\n        this._preferenceLocked = false;\n    }\n    setPosition(position) {\n        this._position = position;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IdleValue } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { SimpleKeybinding } from '../../../../base/common/keybindings.js';\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isObject } from '../../../../base/common/types.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { hash } from '../../../../base/common/hash.js';\n// sticky suggest widget which doesn't disappear on focus out and such\nconst _sticky = false;\n// _sticky = Boolean(\"true\"); // done \"weirdly\" so that a lint warning prevents you from pushing this\nclass LineSuffix {\n    constructor(_model, _position) {\n        this._model = _model;\n        this._position = _position;\n        // spy on what's happening right of the cursor. two cases:\n        // 1. end of line -> check that it's still end of line\n        // 2. mid of line -> add a marker and compute the delta\n        const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n        if (maxColumn !== _position.column) {\n            const offset = _model.getOffsetAt(_position);\n            const end = _model.getPositionAt(offset + 1);\n            this._marker = _model.deltaDecorations([], [{\n                    range: Range.fromPositions(_position, end),\n                    options: { description: 'suggest-line-suffix', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */ }\n                }]);\n        }\n    }\n    dispose() {\n        if (this._marker && !this._model.isDisposed()) {\n            this._model.deltaDecorations(this._marker, []);\n        }\n    }\n    delta(position) {\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n            // bail out early if things seems fishy\n            return 0;\n        }\n        // read the marker (in case suggest was triggered at line end) or compare\n        // the cursor to the line end.\n        if (this._marker) {\n            const range = this._model.getDecorationRange(this._marker[0]);\n            const end = this._model.getOffsetAt(range.getStartPosition());\n            return end - this._model.getOffsetAt(position);\n        }\n        else {\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n        }\n    }\n}\nlet SuggestController = class SuggestController {\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\n        this._memoryService = _memoryService;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._telemetryService = _telemetryService;\n        this._lineSuffix = new MutableDisposable();\n        this._toDispose = new DisposableStore();\n        this._selectors = new PriorityRegistry(s => s.priority);\n        this._telemetryGate = 0;\n        this.editor = editor;\n        this.model = _instantiationService.createInstance(SuggestModel, this.editor);\n        // context key: update insert/replace mode\n        const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\n        ctxInsertMode.set(editor.getOption(108 /* EditorOption.suggest */).insertMode);\n        this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(108 /* EditorOption.suggest */).insertMode));\n        this.widget = this._toDispose.add(new IdleValue(() => {\n            const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\n            this._toDispose.add(widget);\n            this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0), this));\n            // Wire up logic to accept a suggestion on certain characters\n            const commitCharacterController = new CommitCharacterController(this.editor, widget, item => this._insertSuggestion(item, 2 /* InsertFlags.NoAfterUndoStop */));\n            this._toDispose.add(commitCharacterController);\n            this._toDispose.add(this.model.onDidSuggest(e => {\n                if (e.completionModel.items.length === 0) {\n                    commitCharacterController.reset();\n                }\n            }));\n            // Wire up makes text edit context key\n            const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\n            const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\n            const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\n            this._toDispose.add(toDisposable(() => {\n                ctxMakesTextEdit.reset();\n                ctxHasInsertAndReplace.reset();\n                ctxCanResolve.reset();\n            }));\n            this._toDispose.add(widget.onDidFocus(({ item }) => {\n                // (ctx: makesTextEdit)\n                const position = this.editor.getPosition();\n                const startColumn = item.editStart.column;\n                const endColumn = position.column;\n                let value = true;\n                if (this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */) === 'smart'\n                    && this.model.state === 2 /* State.Auto */\n                    && !item.completion.additionalTextEdits\n                    && !(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\n                    && endColumn - startColumn === item.completion.insertText.length) {\n                    const oldText = this.editor.getModel().getValueInRange({\n                        startLineNumber: position.lineNumber,\n                        startColumn,\n                        endLineNumber: position.lineNumber,\n                        endColumn\n                    });\n                    value = oldText !== item.completion.insertText;\n                }\n                ctxMakesTextEdit.set(value);\n                // (ctx: hasInsertAndReplaceRange)\n                ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\n                // (ctx: canResolve)\n                ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\n            }));\n            this._toDispose.add(widget.onDetailsKeyDown(e => {\n                // cmd + c on macOS, ctrl + c on Win / Linux\n                if (e.toKeybinding().equals(new SimpleKeybinding(true, false, false, false, 33 /* KeyCode.KeyC */)) ||\n                    (platform.isMacintosh && e.toKeybinding().equals(new SimpleKeybinding(false, false, false, true, 33 /* KeyCode.KeyC */)))) {\n                    e.stopPropagation();\n                    return;\n                }\n                if (!e.toKeybinding().isModifierKey()) {\n                    this.editor.focus();\n                }\n            }));\n            return widget;\n        }));\n        // Wire up text overtyping capture\n        this._overtypingCapturer = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\n        }));\n        this._alternatives = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\n        }));\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n        this._toDispose.add(this.model.onDidTrigger(e => {\n            this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\n            this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\n        }));\n        this._toDispose.add(this.model.onDidSuggest(e => {\n            if (e.shy) {\n                return;\n            }\n            let index = -1;\n            if (!e.noSelect) {\n                for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\n                    index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                    if (index !== -1) {\n                        break;\n                    }\n                }\n                if (index === -1) {\n                    index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                }\n            }\n            this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.auto);\n        }));\n        this._toDispose.add(this.model.onDidCancel(e => {\n            if (!e.retrigger) {\n                this.widget.value.hideWidget();\n            }\n        }));\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\n            if (!_sticky) {\n                this.model.cancel();\n                this.model.clear();\n            }\n        }));\n        // Manage the acceptSuggestionsOnEnter context key\n        const acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n        const updateFromConfig = () => {\n            const acceptSuggestionOnEnter = this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */);\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n        };\n        this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\n        updateFromConfig();\n    }\n    static get(editor) {\n        return editor.getContribution(SuggestController.ID);\n    }\n    dispose() {\n        this._alternatives.dispose();\n        this._toDispose.dispose();\n        this.widget.dispose();\n        this.model.dispose();\n        this._lineSuffix.dispose();\n    }\n    _insertSuggestion(event, flags) {\n        if (!event || !event.item) {\n            this._alternatives.value.reset();\n            this.model.cancel();\n            this.model.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const snippetController = SnippetController2.get(this.editor);\n        if (!snippetController) {\n            return;\n        }\n        const model = this.editor.getModel();\n        const modelVersionNow = model.getAlternativeVersionId();\n        const { item } = event;\n        //\n        const tasks = [];\n        const cts = new CancellationTokenSource();\n        // pushing undo stops *before* additional text edits and\n        // *after* the main edit\n        if (!(flags & 1 /* InsertFlags.NoBeforeUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\n        const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* InsertFlags.AlternativeOverwriteConfig */));\n        // keep item in memory\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\n        if (Array.isArray(item.completion.additionalTextEdits)) {\n            // sync additional edits\n            const scrollState = StableEditorScrollState.capture(this.editor);\n            this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n            scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n        }\n        else if (!item.isResolved) {\n            // async additional edits\n            const sw = new StopWatch(true);\n            let position;\n            const docListener = model.onDidChangeContent(e => {\n                if (e.isFlush) {\n                    cts.cancel();\n                    docListener.dispose();\n                    return;\n                }\n                for (const change of e.changes) {\n                    const thisPosition = Range.getEndPosition(change.range);\n                    if (!position || Position.isBefore(thisPosition, position)) {\n                        position = thisPosition;\n                    }\n                }\n            });\n            const oldFlags = flags;\n            flags |= 2 /* InsertFlags.NoAfterUndoStop */;\n            let didType = false;\n            const typeListener = this.editor.onWillType(() => {\n                typeListener.dispose();\n                didType = true;\n                if (!(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n            });\n            tasks.push(item.resolve(cts.token).then(() => {\n                if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\n                    return false;\n                }\n                if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\n                    return false;\n                }\n                if (didType) {\n                    this.editor.pushUndoStop();\n                }\n                const scrollState = StableEditorScrollState.capture(this.editor);\n                this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n                scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n                if (didType || !(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n                return true;\n            }).then(applied => {\n                this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\n                docListener.dispose();\n                typeListener.dispose();\n            }));\n        }\n        let { insertText } = item.completion;\n        if (!(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)) {\n            insertText = SnippetParser.escape(insertText);\n        }\n        snippetController.insert(insertText, {\n            overwriteBefore: info.overwriteBefore,\n            overwriteAfter: info.overwriteAfter,\n            undoStopBefore: false,\n            undoStopAfter: false,\n            adjustWhitespace: !(item.completion.insertTextRules & 1 /* CompletionItemInsertTextRule.KeepWhitespace */),\n            clipboardText: event.model.clipboardText,\n            overtypingCapturer: this._overtypingCapturer.value\n        });\n        if (!(flags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        if (!item.completion.command) {\n            // done\n            this.model.cancel();\n        }\n        else if (item.completion.command.id === TriggerSuggestAction.id) {\n            // retigger\n            this.model.trigger({ auto: true, shy: false, noSelect: false }, true);\n        }\n        else {\n            // exec command, done\n            tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(onUnexpectedError));\n            this.model.cancel();\n        }\n        if (flags & 4 /* InsertFlags.KeepAlternativeSuggestions */) {\n            this._alternatives.value.set(event, next => {\n                // cancel resolving of additional edits\n                cts.cancel();\n                // this is not so pretty. when inserting the 'next'\n                // suggestion we undo until we are at the state at\n                // which we were before inserting the previous suggestion...\n                while (model.canUndo()) {\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\n                        model.undo();\n                    }\n                    this._insertSuggestion(next, 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */ | (flags & 8 /* InsertFlags.AlternativeOverwriteConfig */ ? 8 /* InsertFlags.AlternativeOverwriteConfig */ : 0));\n                    break;\n                }\n            });\n        }\n        this._alertCompletionItem(item);\n        // clear only now - after all tasks are done\n        Promise.all(tasks).finally(() => {\n            this._reportSuggestionAcceptedTelemetry(item, model, event);\n            this.model.clear();\n            cts.dispose();\n        });\n    }\n    _reportSuggestionAcceptedTelemetry(item, model, acceptedSuggestion) {\n        var _a;\n        if (this._telemetryGate++ % 100 !== 0) {\n            return;\n        }\n        // _debugDisplayName looks like `vscode.css-language-features(/-:)`, where the last bit is the trigger chars\n        // normalize it to just the extension ID and lowercase\n        const providerId = item.extensionId ? item.extensionId.value : ((_a = acceptedSuggestion.item.provider._debugDisplayName) !== null && _a !== void 0 ? _a : 'unknown').split('(', 1)[0].toLowerCase();\n        this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\n            providerId,\n            kind: item.completion.kind,\n            basenameHash: hash(basename(model.uri)).toString(16),\n            languageId: model.getLanguageId(),\n            fileExtension: extname(model.uri),\n        });\n    }\n    getOverwriteInfo(item, toggleMode) {\n        assertType(this.editor.hasModel());\n        let replace = this.editor.getOption(108 /* EditorOption.suggest */).insertMode === 'replace';\n        if (toggleMode) {\n            replace = !replace;\n        }\n        const overwriteBefore = item.position.column - item.editStart.column;\n        const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n        const columnDelta = this.editor.getPosition().column - item.position.column;\n        const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n        return {\n            overwriteBefore: overwriteBefore + columnDelta,\n            overwriteAfter: overwriteAfter + suffixDelta\n        };\n    }\n    _alertCompletionItem(item) {\n        if (isNonEmptyArray(item.completion.additionalTextEdits)) {\n            const msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\n            alert(msg);\n        }\n    }\n    triggerSuggest(onlyFrom, auto, noFilter, noSelect) {\n        if (this.editor.hasModel()) {\n            this.model.trigger({ auto: auto !== null && auto !== void 0 ? auto : false, shy: false, noSelect: noSelect !== null && noSelect !== void 0 ? noSelect : false }, false, onlyFrom, undefined, noFilter);\n            this.editor.revealPosition(this.editor.getPosition(), 0 /* ScrollType.Smooth */);\n            this.editor.focus();\n        }\n    }\n    triggerSuggestAndAcceptBest(arg) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const positionNow = this.editor.getPosition();\n        const fallback = () => {\n            if (positionNow.equals(this.editor.getPosition())) {\n                this._commandService.executeCommand(arg.fallback);\n            }\n        };\n        const makesTextEdit = (item) => {\n            if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */ || item.completion.additionalTextEdits) {\n                // snippet, other editor -> makes edit\n                return true;\n            }\n            const position = this.editor.getPosition();\n            const startColumn = item.editStart.column;\n            const endColumn = position.column;\n            if (endColumn - startColumn !== item.completion.insertText.length) {\n                // unequal lengths -> makes edit\n                return true;\n            }\n            const textNow = this.editor.getModel().getValueInRange({\n                startLineNumber: position.lineNumber,\n                startColumn,\n                endLineNumber: position.lineNumber,\n                endColumn\n            });\n            // unequal text -> makes edit\n            return textNow !== item.completion.insertText;\n        };\n        Event.once(this.model.onDidTrigger)(_ => {\n            // wait for trigger because only then the cancel-event is trustworthy\n            const listener = [];\n            Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\n                // retrigger or cancel -> try to type default text\n                dispose(listener);\n                fallback();\n            }, undefined, listener);\n            this.model.onDidSuggest(({ completionModel }) => {\n                dispose(listener);\n                if (completionModel.items.length === 0) {\n                    fallback();\n                    return;\n                }\n                const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\n                const item = completionModel.items[index];\n                if (!makesTextEdit(item)) {\n                    fallback();\n                    return;\n                }\n                this.editor.pushUndoStop();\n                this._insertSuggestion({ index, item, model: completionModel }, 4 /* InsertFlags.KeepAlternativeSuggestions */ | 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */);\n            }, undefined, listener);\n        });\n        this.model.trigger({ auto: false, shy: true, noSelect: false });\n        this.editor.revealPosition(positionNow, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\n        const item = this.widget.value.getFocusedItem();\n        let flags = 0;\n        if (keepAlternativeSuggestions) {\n            flags |= 4 /* InsertFlags.KeepAlternativeSuggestions */;\n        }\n        if (alternativeOverwriteConfig) {\n            flags |= 8 /* InsertFlags.AlternativeOverwriteConfig */;\n        }\n        this._insertSuggestion(item, flags);\n    }\n    acceptNextSuggestion() {\n        this._alternatives.value.next();\n    }\n    acceptPrevSuggestion() {\n        this._alternatives.value.prev();\n    }\n    cancelSuggestWidget() {\n        this.model.cancel();\n        this.model.clear();\n        this.widget.value.hideWidget();\n    }\n    selectNextSuggestion() {\n        this.widget.value.selectNext();\n    }\n    selectNextPageSuggestion() {\n        this.widget.value.selectNextPage();\n    }\n    selectLastSuggestion() {\n        this.widget.value.selectLast();\n    }\n    selectPrevSuggestion() {\n        this.widget.value.selectPrevious();\n    }\n    selectPrevPageSuggestion() {\n        this.widget.value.selectPreviousPage();\n    }\n    selectFirstSuggestion() {\n        this.widget.value.selectFirst();\n    }\n    toggleSuggestionDetails() {\n        this.widget.value.toggleDetails();\n    }\n    toggleExplainMode() {\n        this.widget.value.toggleExplainMode();\n    }\n    toggleSuggestionFocus() {\n        this.widget.value.toggleDetailsFocus();\n    }\n    resetWidgetSize() {\n        this.widget.value.resetPersistedSize();\n    }\n    forceRenderingAbove() {\n        this.widget.value.forceRenderingAbove();\n    }\n    stopForceRenderingAbove() {\n        if (!this.widget.isInitialized) {\n            // This method has no effect if the widget is not initialized yet.\n            return;\n        }\n        this.widget.value.stopForceRenderingAbove();\n    }\n    registerSelector(selector) {\n        return this._selectors.register(selector);\n    }\n};\nSuggestController.ID = 'editor.contrib.suggestController';\nSuggestController = __decorate([\n    __param(1, ISuggestMemoryService),\n    __param(2, ICommandService),\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ILogService),\n    __param(6, ITelemetryService)\n], SuggestController);\nexport { SuggestController };\nclass PriorityRegistry {\n    constructor(prioritySelector) {\n        this.prioritySelector = prioritySelector;\n        this._items = new Array();\n    }\n    register(value) {\n        if (this._items.indexOf(value) !== -1) {\n            throw new Error('Value is already registered');\n        }\n        this._items.push(value);\n        this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\n        return {\n            dispose: () => {\n                const idx = this._items.indexOf(value);\n                if (idx >= 0) {\n                    this._items.splice(idx, 1);\n                }\n            }\n        };\n    }\n    get itemsOrderedByPriorityDesc() {\n        return this._items;\n    }\n}\nexport class TriggerSuggestAction extends EditorAction {\n    constructor() {\n        super({\n            id: TriggerSuggestAction.id,\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n            alias: 'Trigger Suggest',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        const controller = SuggestController.get(editor);\n        if (!controller) {\n            return;\n        }\n        let auto;\n        let noSelect;\n        if (args && typeof args === 'object') {\n            if (args.auto === true) {\n                auto = true;\n            }\n            if (args.noSelection === true) {\n                noSelect = true;\n            }\n        }\n        controller.triggerSuggest(undefined, auto, undefined, noSelect);\n    }\n}\nTriggerSuggestAction.id = 'editor.action.triggerSuggest';\nregisterEditorContribution(SuggestController.ID, SuggestController);\nregisterEditorAction(TriggerSuggestAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n    handler(x) {\n        x.acceptSelectedSuggestion(true, false);\n    },\n    kbOpts: [{\n            // normal tab\n            primary: 2 /* KeyCode.Tab */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n            weight,\n        }, {\n            // accept on enter has special rules\n            primary: 3 /* KeyCode.Enter */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n            weight,\n        }],\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: SuggestContext.HasInsertAndReplaceRange.toNegated()\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.replace', \"Replace\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptAlternativeSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.HasFocusedSuggestion),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\n    },\n    handler(x) {\n        x.acceptSelectedSuggestion(false, true);\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\n            title: nls.localize('accept.replace', \"Replace\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\n            title: nls.localize('accept.insert', \"Insert\")\n        }]\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n    id: 'hideSuggestWidget',\n    precondition: SuggestContext.Visible,\n    handler: x => x.cancelSuggestWidget(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 12 /* KeyCode.PageDown */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 12 /* KeyCode.PageDown */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectLastSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectLastSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 11 /* KeyCode.PageUp */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 11 /* KeyCode.PageUp */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectFirstSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectFirstSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionDetails',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionDetails(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\n            title: nls.localize('detail.more', \"show less\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\n            title: nls.localize('detail.less', \"show more\")\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleExplainMode',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleExplainMode(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 85 /* KeyCode.Slash */,\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionFocus',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionFocus(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */,\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */ }\n    }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertBestCompletion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: (x, arg) => {\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? Object.assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\n    },\n    kbOpts: {\n        weight,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertNextSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertPrevSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorAction(class extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.resetSuggestSize',\n            label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\n            alias: 'Reset Suggest Widget Size',\n            precondition: undefined\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = SuggestController.get(editor)) === null || _a === void 0 ? void 0 : _a.resetWidgetSize();\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { RefCountedDisposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CompletionItemInsertTextRule } from '../../../common/standalone/standaloneEnums.js';\nimport { CompletionModel, LineContext } from './completionModel.js';\nimport { CompletionOptions, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass SuggestInlineCompletion {\n    constructor(range, insertText, filterText, additionalTextEdits, command, completion) {\n        this.range = range;\n        this.insertText = insertText;\n        this.filterText = filterText;\n        this.additionalTextEdits = additionalTextEdits;\n        this.command = command;\n        this.completion = completion;\n    }\n}\nlet InlineCompletionResults = class InlineCompletionResults extends RefCountedDisposable {\n    constructor(model, line, word, completionModel, completions, _suggestMemoryService) {\n        super(completions.disposable);\n        this.model = model;\n        this.line = line;\n        this.word = word;\n        this.completionModel = completionModel;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    canBeReused(model, line, word) {\n        return this.model === model // same model\n            && this.line === line\n            && this.word.word.length > 0\n            && this.word.startColumn === word.startColumn && this.word.endColumn < word.endColumn // same word\n            && this.completionModel.incomplete.size === 0; // no incomplete results\n    }\n    get items() {\n        var _a;\n        const result = [];\n        // Split items by preselected index. This ensures the memory-selected item shows first and that better/worst\n        // ranked items are before/after\n        const { items } = this.completionModel;\n        const selectedIndex = this._suggestMemoryService.select(this.model, { lineNumber: this.line, column: this.word.endColumn + this.completionModel.lineContext.characterCountDelta }, items);\n        const first = Iterable.slice(items, selectedIndex);\n        const second = Iterable.slice(items, 0, selectedIndex);\n        let resolveCount = 5;\n        for (const item of Iterable.concat(first, second)) {\n            if (item.score === FuzzyScore.Default) {\n                // skip items that have no overlap\n                continue;\n            }\n            const range = new Range(item.editStart.lineNumber, item.editStart.column, item.editInsertEnd.lineNumber, item.editInsertEnd.column + this.completionModel.lineContext.characterCountDelta // end PLUS character delta\n            );\n            const insertText = item.completion.insertTextRules && (item.completion.insertTextRules & CompletionItemInsertTextRule.InsertAsSnippet)\n                ? { snippet: item.completion.insertText }\n                : item.completion.insertText;\n            result.push(new SuggestInlineCompletion(range, insertText, (_a = item.filterTextLow) !== null && _a !== void 0 ? _a : item.labelLow, item.completion.additionalTextEdits, item.completion.command, item));\n            // resolve the first N suggestions eagerly\n            if (resolveCount-- >= 0) {\n                item.resolve(CancellationToken.None);\n            }\n        }\n        return result;\n    }\n};\nInlineCompletionResults = __decorate([\n    __param(5, ISuggestMemoryService)\n], InlineCompletionResults);\nlet SuggestInlineCompletions = class SuggestInlineCompletions {\n    constructor(_getEditorOption, _languageFeatureService, _clipboardService, _suggestMemoryService) {\n        this._getEditorOption = _getEditorOption;\n        this._languageFeatureService = _languageFeatureService;\n        this._clipboardService = _clipboardService;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    provideInlineCompletions(model, position, context, token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (context.selectedSuggestionInfo) {\n                return;\n            }\n            const config = this._getEditorOption(81 /* EditorOption.quickSuggestions */, model);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                // quick suggest is off (for this model/language)\n                return;\n            }\n            model.tokenization.tokenizeIfCheap(position.lineNumber);\n            const lineTokens = model.tokenization.getLineTokens(position.lineNumber);\n            const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(position.column - 1 - 1, 0)));\n            if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'inline') {\n                // quick suggest is off (for this token)\n                return undefined;\n            }\n            // We consider non-empty leading words and trigger characters. The latter only\n            // when no word is being typed (word characters superseed trigger characters)\n            let wordInfo = model.getWordAtPosition(position);\n            let triggerCharacterInfo;\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word)) {\n                triggerCharacterInfo = this._getTriggerCharacterInfo(model, position);\n            }\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word) && !triggerCharacterInfo) {\n                // not at word, not a trigger character\n                return;\n            }\n            // ensure that we have word information and that we are at the end of a word\n            // otherwise we stop because we don't want to do quick suggestions inside words\n            if (!wordInfo) {\n                wordInfo = model.getWordUntilPosition(position);\n            }\n            if (wordInfo.endColumn !== position.column) {\n                return;\n            }\n            let result;\n            const leadingLineContents = model.getValueInRange(new Range(position.lineNumber, 1, position.lineNumber, position.column));\n            if (!triggerCharacterInfo && ((_a = this._lastResult) === null || _a === void 0 ? void 0 : _a.canBeReused(model, position.lineNumber, wordInfo))) {\n                // reuse a previous result iff possible, only a refilter is needed\n                // TODO@jrieken this can be improved further and only incomplete results can be updated\n                // console.log(`REUSE with ${wordInfo.word}`);\n                const newLineContext = new LineContext(leadingLineContents, position.column - this._lastResult.word.endColumn);\n                this._lastResult.completionModel.lineContext = newLineContext;\n                this._lastResult.acquire();\n                result = this._lastResult;\n            }\n            else {\n                // refesh model is required\n                const completions = yield provideSuggestionItems(this._languageFeatureService.completionProvider, model, position, new CompletionOptions(undefined, undefined, triggerCharacterInfo === null || triggerCharacterInfo === void 0 ? void 0 : triggerCharacterInfo.providers), triggerCharacterInfo && { triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */, triggerCharacter: triggerCharacterInfo.ch }, token);\n                let clipboardText;\n                if (completions.needsClipboard) {\n                    clipboardText = yield this._clipboardService.readText();\n                }\n                const completionModel = new CompletionModel(completions.items, position.column, new LineContext(leadingLineContents, 0), WordDistance.None, this._getEditorOption(108 /* EditorOption.suggest */, model), this._getEditorOption(103 /* EditorOption.snippetSuggestions */, model), { boostFullMatch: false, firstMatchCanBeWeak: false }, clipboardText);\n                result = new InlineCompletionResults(model, position.lineNumber, wordInfo, completionModel, completions, this._suggestMemoryService);\n            }\n            this._lastResult = result;\n            return result;\n        });\n    }\n    handleItemDidShow(_completions, item) {\n        item.completion.resolve(CancellationToken.None);\n    }\n    freeInlineCompletions(result) {\n        result.release();\n    }\n    _getTriggerCharacterInfo(model, position) {\n        var _a;\n        const ch = model.getValueInRange(Range.fromPositions({ lineNumber: position.lineNumber, column: position.column - 1 }, position));\n        const providers = new Set();\n        for (const provider of this._languageFeatureService.completionProvider.all(model)) {\n            if ((_a = provider.triggerCharacters) === null || _a === void 0 ? void 0 : _a.includes(ch)) {\n                providers.add(provider);\n            }\n        }\n        if (providers.size === 0) {\n            return undefined;\n        }\n        return { providers, ch };\n    }\n};\nSuggestInlineCompletions = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IClipboardService),\n    __param(3, ISuggestMemoryService)\n], SuggestInlineCompletions);\nexport { SuggestInlineCompletions };\nlet EditorContribution = class EditorContribution {\n    constructor(_editor, languageFeatureService, editorService, instaService) {\n        // HACK - way to contribute something only once\n        if (++EditorContribution._counter === 1) {\n            const provider = instaService.createInstance(SuggestInlineCompletions, (id, model) => {\n                var _a;\n                // HACK - reuse the editor options world outside from a \"normal\" contribution\n                const editor = (_a = editorService.listCodeEditors().find(editor => editor.getModel() === model)) !== null && _a !== void 0 ? _a : _editor;\n                return editor.getOption(id);\n            });\n            EditorContribution._disposable = languageFeatureService.inlineCompletionsProvider.register('*', provider);\n        }\n    }\n    dispose() {\n        var _a;\n        if (--EditorContribution._counter === 0) {\n            (_a = EditorContribution._disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n            EditorContribution._disposable = undefined;\n        }\n    }\n};\nEditorContribution._counter = 0;\nEditorContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ICodeEditorService),\n    __param(3, IInstantiationService)\n], EditorContribution);\nregisterEditorContribution('suggest.inlineCompletionsProvider', EditorContribution);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LRUCache, TernarySearchTree } from '../../../../base/common/map.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport class Memory {\n    constructor(name) {\n        this.name = name;\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const topScore = items[0].score[0];\n        for (let i = 0; i < items.length; i++) {\n            const { score, completion: suggestion } = items[i];\n            if (score[0] !== topScore) {\n                // stop when leaving the group of top matches\n                break;\n            }\n            if (suggestion.preselect) {\n                // stop when seeing an auto-select-item\n                return i;\n            }\n        }\n        return 0;\n    }\n}\nexport class NoMemory extends Memory {\n    constructor() {\n        super('first');\n    }\n    memorize(model, pos, item) {\n        // no-op\n    }\n    toJSON() {\n        return undefined;\n    }\n    fromJSON() {\n        //\n    }\n}\nexport class LRUMemory extends Memory {\n    constructor() {\n        super('recentlyUsed');\n        this._cache = new LRUCache(300, 0.66);\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const key = `${model.getLanguageId()}/${item.textLabel}`;\n        this._cache.set(key, {\n            touch: this._seq++,\n            type: item.completion.kind,\n            insertText: item.completion.insertText\n        });\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\n        if (/\\s$/.test(lineSuffix)) {\n            return super.select(model, pos, items);\n        }\n        const topScore = items[0].score[0];\n        let indexPreselect = -1;\n        let indexRecency = -1;\n        let seq = -1;\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].score[0] !== topScore) {\n                // consider only top items\n                break;\n            }\n            const key = `${model.getLanguageId()}/${items[i].textLabel}`;\n            const item = this._cache.peek(key);\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\n                seq = item.touch;\n                indexRecency = i;\n            }\n            if (items[i].completion.preselect && indexPreselect === -1) {\n                // stop when seeing an auto-select-item\n                return indexPreselect = i;\n            }\n        }\n        if (indexRecency !== -1) {\n            return indexRecency;\n        }\n        else if (indexPreselect !== -1) {\n            return indexPreselect;\n        }\n        else {\n            return 0;\n        }\n    }\n    toJSON() {\n        return this._cache.toJSON();\n    }\n    fromJSON(data) {\n        this._cache.clear();\n        const seq = 0;\n        for (const [key, value] of data) {\n            value.touch = seq;\n            value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n            this._cache.set(key, value);\n        }\n        this._seq = this._cache.size;\n    }\n}\nexport class PrefixMemory extends Memory {\n    constructor() {\n        super('recentlyUsedByPrefix');\n        this._trie = TernarySearchTree.forStrings();\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const { word } = model.getWordUntilPosition(pos);\n        const key = `${model.getLanguageId()}/${word}`;\n        this._trie.set(key, {\n            type: item.completion.kind,\n            insertText: item.completion.insertText,\n            touch: this._seq++\n        });\n    }\n    select(model, pos, items) {\n        const { word } = model.getWordUntilPosition(pos);\n        if (!word) {\n            return super.select(model, pos, items);\n        }\n        const key = `${model.getLanguageId()}/${word}`;\n        let item = this._trie.get(key);\n        if (!item) {\n            item = this._trie.findSubstr(key);\n        }\n        if (item) {\n            for (let i = 0; i < items.length; i++) {\n                const { kind, insertText } = items[i].completion;\n                if (kind === item.type && insertText === item.insertText) {\n                    return i;\n                }\n            }\n        }\n        return super.select(model, pos, items);\n    }\n    toJSON() {\n        const entries = [];\n        this._trie.forEach((value, key) => entries.push([key, value]));\n        // sort by last recently used (touch), then\n        // take the top 200 item and normalize their\n        // touch\n        entries\n            .sort((a, b) => -(a[1].touch - b[1].touch))\n            .forEach((value, i) => value[1].touch = i);\n        return entries.slice(0, 200);\n    }\n    fromJSON(data) {\n        this._trie.clear();\n        if (data.length > 0) {\n            this._seq = data[0][1].touch + 1;\n            for (const [key, value] of data) {\n                value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n                this._trie.set(key, value);\n            }\n        }\n    }\n}\nlet SuggestMemoryService = class SuggestMemoryService {\n    constructor(_storageService, _configService) {\n        this._storageService = _storageService;\n        this._configService = _configService;\n        this._disposables = new DisposableStore();\n        this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\n        this._disposables.add(_storageService.onWillSaveState(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                this._saveState();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._persistSoon.dispose();\n    }\n    memorize(model, pos, item) {\n        this._withStrategy(model, pos).memorize(model, pos, item);\n        this._persistSoon.schedule();\n    }\n    select(model, pos, items) {\n        return this._withStrategy(model, pos).select(model, pos, items);\n    }\n    _withStrategy(model, pos) {\n        var _a;\n        const mode = this._configService.getValue('editor.suggestSelection', {\n            overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\n            resource: model.uri\n        });\n        if (((_a = this._strategy) === null || _a === void 0 ? void 0 : _a.name) !== mode) {\n            this._saveState();\n            const ctor = SuggestMemoryService._strategyCtors.get(mode) || NoMemory;\n            this._strategy = new ctor();\n            try {\n                const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n                const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n                const raw = this._storageService.get(`${SuggestMemoryService._storagePrefix}/${mode}`, scope);\n                if (raw) {\n                    this._strategy.fromJSON(JSON.parse(raw));\n                }\n            }\n            catch (e) {\n                // things can go wrong with JSON...\n            }\n        }\n        return this._strategy;\n    }\n    _saveState() {\n        if (this._strategy) {\n            const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n            const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n            const raw = JSON.stringify(this._strategy);\n            this._storageService.store(`${SuggestMemoryService._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* StorageTarget.MACHINE */);\n        }\n    }\n};\nSuggestMemoryService._strategyCtors = new Map([\n    ['recentlyUsedByPrefix', PrefixMemory],\n    ['recentlyUsed', LRUMemory],\n    ['first', NoMemory]\n]);\nSuggestMemoryService._storagePrefix = 'suggest/memories';\nSuggestMemoryService = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], SuggestMemoryService);\nexport { SuggestMemoryService };\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, true);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { Range } from '../../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\nexport class WordDistance {\n    static create(service, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.getOption(108 /* EditorOption.suggest */).localityBonus) {\n                return WordDistance.None;\n            }\n            if (!editor.hasModel()) {\n                return WordDistance.None;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!service.canComputeWordRanges(model.uri)) {\n                return WordDistance.None;\n            }\n            const [ranges] = yield new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n            if (ranges.length === 0) {\n                return WordDistance.None;\n            }\n            const wordRanges = yield service.computeWordRanges(model.uri, ranges[0].range);\n            if (!wordRanges) {\n                return WordDistance.None;\n            }\n            // remove current word\n            const wordUntilPos = model.getWordUntilPosition(position);\n            delete wordRanges[wordUntilPos.word];\n            return new class extends WordDistance {\n                distance(anchor, item) {\n                    if (!position.equals(editor.getPosition())) {\n                        return 0;\n                    }\n                    if (item.kind === 17 /* CompletionItemKind.Keyword */) {\n                        return 2 << 20;\n                    }\n                    const word = typeof item.label === 'string' ? item.label : item.label.label;\n                    const wordLines = wordRanges[word];\n                    if (isFalsyOrEmpty(wordLines)) {\n                        return 2 << 20;\n                    }\n                    const idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n                    const bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n                    let blockDistance = ranges.length;\n                    for (const range of ranges) {\n                        if (!Range.containsRange(range.range, bestWordRange)) {\n                            break;\n                        }\n                        blockDistance -= 1;\n                    }\n                    return blockDistance;\n                }\n            };\n        });\n    }\n}\nWordDistance.None = new class extends WordDistance {\n    distance() { return 0; }\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { localize } from '../../../../nls.js';\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC',\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nregisterThemingParticipant((theme, collector) => {\n    const symbolIconArrayColor = theme.getColor(SYMBOL_ICON_ARRAY_FOREGROUND);\n    if (symbolIconArrayColor) {\n        collector.addRule(`${Codicon.symbolArray.cssSelector} { color: ${symbolIconArrayColor}; }`);\n    }\n    const symbolIconBooleanColor = theme.getColor(SYMBOL_ICON_BOOLEAN_FOREGROUND);\n    if (symbolIconBooleanColor) {\n        collector.addRule(`${Codicon.symbolBoolean.cssSelector} { color: ${symbolIconBooleanColor}; }`);\n    }\n    const symbolIconClassColor = theme.getColor(SYMBOL_ICON_CLASS_FOREGROUND);\n    if (symbolIconClassColor) {\n        collector.addRule(`${Codicon.symbolClass.cssSelector} { color: ${symbolIconClassColor}; }`);\n    }\n    const symbolIconMethodColor = theme.getColor(SYMBOL_ICON_METHOD_FOREGROUND);\n    if (symbolIconMethodColor) {\n        collector.addRule(`${Codicon.symbolMethod.cssSelector} { color: ${symbolIconMethodColor}; }`);\n    }\n    const symbolIconColorColor = theme.getColor(SYMBOL_ICON_COLOR_FOREGROUND);\n    if (symbolIconColorColor) {\n        collector.addRule(`${Codicon.symbolColor.cssSelector} { color: ${symbolIconColorColor}; }`);\n    }\n    const symbolIconConstantColor = theme.getColor(SYMBOL_ICON_CONSTANT_FOREGROUND);\n    if (symbolIconConstantColor) {\n        collector.addRule(`${Codicon.symbolConstant.cssSelector} { color: ${symbolIconConstantColor}; }`);\n    }\n    const symbolIconConstructorColor = theme.getColor(SYMBOL_ICON_CONSTRUCTOR_FOREGROUND);\n    if (symbolIconConstructorColor) {\n        collector.addRule(`${Codicon.symbolConstructor.cssSelector} { color: ${symbolIconConstructorColor}; }`);\n    }\n    const symbolIconEnumeratorColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_FOREGROUND);\n    if (symbolIconEnumeratorColor) {\n        collector.addRule(`\n\t\t\t${Codicon.symbolValue.cssSelector},${Codicon.symbolEnum.cssSelector} { color: ${symbolIconEnumeratorColor}; }`);\n    }\n    const symbolIconEnumeratorMemberColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND);\n    if (symbolIconEnumeratorMemberColor) {\n        collector.addRule(`${Codicon.symbolEnumMember.cssSelector} { color: ${symbolIconEnumeratorMemberColor}; }`);\n    }\n    const symbolIconEventColor = theme.getColor(SYMBOL_ICON_EVENT_FOREGROUND);\n    if (symbolIconEventColor) {\n        collector.addRule(`${Codicon.symbolEvent.cssSelector} { color: ${symbolIconEventColor}; }`);\n    }\n    const symbolIconFieldColor = theme.getColor(SYMBOL_ICON_FIELD_FOREGROUND);\n    if (symbolIconFieldColor) {\n        collector.addRule(`${Codicon.symbolField.cssSelector} { color: ${symbolIconFieldColor}; }`);\n    }\n    const symbolIconFileColor = theme.getColor(SYMBOL_ICON_FILE_FOREGROUND);\n    if (symbolIconFileColor) {\n        collector.addRule(`${Codicon.symbolFile.cssSelector} { color: ${symbolIconFileColor}; }`);\n    }\n    const symbolIconFolderColor = theme.getColor(SYMBOL_ICON_FOLDER_FOREGROUND);\n    if (symbolIconFolderColor) {\n        collector.addRule(`${Codicon.symbolFolder.cssSelector} { color: ${symbolIconFolderColor}; }`);\n    }\n    const symbolIconFunctionColor = theme.getColor(SYMBOL_ICON_FUNCTION_FOREGROUND);\n    if (symbolIconFunctionColor) {\n        collector.addRule(`${Codicon.symbolFunction.cssSelector} { color: ${symbolIconFunctionColor}; }`);\n    }\n    const symbolIconInterfaceColor = theme.getColor(SYMBOL_ICON_INTERFACE_FOREGROUND);\n    if (symbolIconInterfaceColor) {\n        collector.addRule(`${Codicon.symbolInterface.cssSelector} { color: ${symbolIconInterfaceColor}; }`);\n    }\n    const symbolIconKeyColor = theme.getColor(SYMBOL_ICON_KEY_FOREGROUND);\n    if (symbolIconKeyColor) {\n        collector.addRule(`${Codicon.symbolKey.cssSelector} { color: ${symbolIconKeyColor}; }`);\n    }\n    const symbolIconKeywordColor = theme.getColor(SYMBOL_ICON_KEYWORD_FOREGROUND);\n    if (symbolIconKeywordColor) {\n        collector.addRule(`${Codicon.symbolKeyword.cssSelector} { color: ${symbolIconKeywordColor}; }`);\n    }\n    const symbolIconModuleColor = theme.getColor(SYMBOL_ICON_MODULE_FOREGROUND);\n    if (symbolIconModuleColor) {\n        collector.addRule(`${Codicon.symbolModule.cssSelector} { color: ${symbolIconModuleColor}; }`);\n    }\n    const outlineNamespaceColor = theme.getColor(SYMBOL_ICON_NAMESPACE_FOREGROUND);\n    if (outlineNamespaceColor) {\n        collector.addRule(`${Codicon.symbolNamespace.cssSelector} { color: ${outlineNamespaceColor}; }`);\n    }\n    const symbolIconNullColor = theme.getColor(SYMBOL_ICON_NULL_FOREGROUND);\n    if (symbolIconNullColor) {\n        collector.addRule(`${Codicon.symbolNull.cssSelector} { color: ${symbolIconNullColor}; }`);\n    }\n    const symbolIconNumberColor = theme.getColor(SYMBOL_ICON_NUMBER_FOREGROUND);\n    if (symbolIconNumberColor) {\n        collector.addRule(`${Codicon.symbolNumber.cssSelector} { color: ${symbolIconNumberColor}; }`);\n    }\n    const symbolIconObjectColor = theme.getColor(SYMBOL_ICON_OBJECT_FOREGROUND);\n    if (symbolIconObjectColor) {\n        collector.addRule(`${Codicon.symbolObject.cssSelector} { color: ${symbolIconObjectColor}; }`);\n    }\n    const symbolIconOperatorColor = theme.getColor(SYMBOL_ICON_OPERATOR_FOREGROUND);\n    if (symbolIconOperatorColor) {\n        collector.addRule(`${Codicon.symbolOperator.cssSelector} { color: ${symbolIconOperatorColor}; }`);\n    }\n    const symbolIconPackageColor = theme.getColor(SYMBOL_ICON_PACKAGE_FOREGROUND);\n    if (symbolIconPackageColor) {\n        collector.addRule(`${Codicon.symbolPackage.cssSelector} { color: ${symbolIconPackageColor}; }`);\n    }\n    const symbolIconPropertyColor = theme.getColor(SYMBOL_ICON_PROPERTY_FOREGROUND);\n    if (symbolIconPropertyColor) {\n        collector.addRule(`${Codicon.symbolProperty.cssSelector} { color: ${symbolIconPropertyColor}; }`);\n    }\n    const symbolIconReferenceColor = theme.getColor(SYMBOL_ICON_REFERENCE_FOREGROUND);\n    if (symbolIconReferenceColor) {\n        collector.addRule(`${Codicon.symbolReference.cssSelector} { color: ${symbolIconReferenceColor}; }`);\n    }\n    const symbolIconSnippetColor = theme.getColor(SYMBOL_ICON_SNIPPET_FOREGROUND);\n    if (symbolIconSnippetColor) {\n        collector.addRule(`${Codicon.symbolSnippet.cssSelector} { color: ${symbolIconSnippetColor}; }`);\n    }\n    const symbolIconStringColor = theme.getColor(SYMBOL_ICON_STRING_FOREGROUND);\n    if (symbolIconStringColor) {\n        collector.addRule(`${Codicon.symbolString.cssSelector} { color: ${symbolIconStringColor}; }`);\n    }\n    const symbolIconStructColor = theme.getColor(SYMBOL_ICON_STRUCT_FOREGROUND);\n    if (symbolIconStructColor) {\n        collector.addRule(`${Codicon.symbolStruct.cssSelector} { color: ${symbolIconStructColor}; }`);\n    }\n    const symbolIconTextColor = theme.getColor(SYMBOL_ICON_TEXT_FOREGROUND);\n    if (symbolIconTextColor) {\n        collector.addRule(`${Codicon.symbolText.cssSelector} { color: ${symbolIconTextColor}; }`);\n    }\n    const symbolIconTypeParameterColor = theme.getColor(SYMBOL_ICON_TYPEPARAMETER_FOREGROUND);\n    if (symbolIconTypeParameterColor) {\n        collector.addRule(`${Codicon.symbolTypeParameter.cssSelector} { color: ${symbolIconTypeParameterColor}; }`);\n    }\n    const symbolIconUnitColor = theme.getColor(SYMBOL_ICON_UNIT_FOREGROUND);\n    if (symbolIconUnitColor) {\n        collector.addRule(`${Codicon.symbolUnit.cssSelector} { color: ${symbolIconUnitColor}; }`);\n    }\n    const symbolIconVariableColor = theme.getColor(SYMBOL_ICON_VARIABLE_FOREGROUND);\n    if (symbolIconVariableColor) {\n        collector.addRule(`${Codicon.symbolVariable.cssSelector} { color: ${symbolIconVariableColor}; }`);\n    }\n});\n"],"names":["_a","__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","StickyScrollController","editor","_languageFeaturesService","_sessionStore","DisposableStore","_ranges","_rangesVersionId","_editor","stickyScrollWidget","StickyScrollWidget","_register","onDidChangeConfiguration","hasChanged","onConfigurationChange","_updateSoon","RunOnceScheduler","_update","this","getOption","stickyScroll","enabled","emptyRootNode","removeOverlayWidget","clear","addOverlayWidget","add","onDidChangeModel","onDidScrollChange","onDidChangeHiddenAreas","onDidChangeModelTokens","_onTokensChange","onDidChangeModelContent","schedule","documentSymbolProvider","onDidChange","event","stickyLineNumbers","getCurrentLines","stickyLineNumber","ranges","range","fromLineNumber","toLineNumber","_needsUpdate","_b","updateOutline","_cts","dispose","CancellationTokenSource","_updateOutlineModel","token","hiddenRanges","_getViewModel","getHiddenAreas","hiddenRange","filter","startLineNumber","endLineNumber","_renderStickyScroll","outlineElement","depth","children","size","didRecursion","values","outline","kind","symbol","_findLineRanges","_addOutlineRanges","currentStartLine","currentEndLine","push","parent","OutlineElement","hasModel","model","getModel","modelVersionId","getVersionId","OutlineModel","outlineModel","isCancellationRequested","sort","a","b","previous","entries","index","arr","start","end","splice","lineHeight","scrollTop","getScrollTop","beginningLinesConsidered","Set","getLineContent","topOfElementAtDepth","bottomOfElementAtDepth","bottomOfBeginningLine","getBottomForLineNumber","topOfEndLine","getTopForLineNumber","bottomOfEndLine","has","pushCodeLine","StickyScrollCodeLine","updateRootNode","Disposable","ID","ILanguageFeaturesService","_ttPolicy","window","trustedTypes","createPolicy","createHTML","_lineNumber","_depth","_zIndex","_relativePosition","effectiveLineHeight","actualInlineDecorations","root","document","createElement","viewModel","viewLineNumber","coordinatesConverter","convertModelPositionToViewPosition","Position","lineNumber","lineRenderingData","getViewLineRenderingData","LineDecoration","inlineDecorations","minColumn","maxColumn","err","newLine","renderLineInput","RenderLineInput","content","continuesWithWrappedLine","isBasicASCII","containsRTL","tokens","tabSize","startVisibleColumn","sb","createStringBuilder","renderViewLine","build","lineHTMLNode","style","backgroundColor","overflow","whiteSpace","display","toString","innerHTML","lineNumberHTMLNode","width","getLayoutInfo","contentLeft","color","innerLineNumberHTML","innerText","paddingLeft","lineNumbersLeft","lineNumbersWidth","textAlign","float","appendChild","onclick","stopPropagation","preventDefault","revealPosition","column","onmouseover","background","cursor","onmouseleave","applyFontInfo","zIndex","height","position","top","arrayOfCodeLines","rootDomNode","boxShadow","widgetLineRange","codeLine","widgetHeight","line","getDomNode","dom","preference","registerEditorContribution","LineContext","leadingLineContent","characterCountDelta","CompletionModel","items","lineContext","wordDistance","options","snippetSuggestions","fuzzyScoreOptions","FuzzyScoreOptions","clipboardText","undefined","_snippetCompareFn","_compareCompletionItems","_items","_column","_wordDistance","_options","_refilterKind","_lineContext","_fuzzyScoreOptions","_compareCompletionItemsSnippetsUp","_compareCompletionItemsSnippetsDown","_filteredItems","_ensureCachedState","_providerInfo","keys","provider","except","res","pop","_stats","_createCachedState","Map","labelLengths","word","wordLow","source","scoreFn","filterGraceful","fuzzyScore","fuzzyScoreGracefulAggressive","item","isInvalid","set","Boolean","container","incomplete","overwriteBefore","editStart","wordLen","slice","toLowerCase","score","FuzzyScore","wordPos","ch","charCodeAt","completion","filterText","match","filterTextLow","compareIgnoreCase","textLabel","anyScore","labelLow","idx","distance","pLabelLen","quickSelect","_snippetSuggestSupport","Context","Visible","historyNavigationVisible","HasFocusedSuggestion","RawContextKey","localize","DetailsVisible","MultipleSuggestions","MakesTextEdit","AcceptSuggestionsOnEnter","HasInsertAndReplaceRange","InsertMode","type","description","CanResolve","suggestWidgetStatusbarMenu","MenuId","CompletionItem","label","sortTextLow","sortText","extensionId","Range","startColumn","editInsertEnd","endColumn","editReplaceEnd","insert","replace","resolveCompletionItem","_resolveCache","_isResolved","sub","onCancellationRequested","assign","isCancellationError","CompletionOptions","snippetSortOrder","kindFilter","providerFilter","showDeprecated","getSnippetSuggestSupport","default","CompletionItemModel","needsClipboard","durations","disposable","provideSuggestionItems","registry","context","triggerKind","CancellationToken","sw","StopWatch","clone","getWordAtPosition","defaultReplaceRange","defaultRange","setEndPosition","disposables","onCompletionList","_c","didAddResult","suggestions","suggestion","tags","includes","insertTextRules","SnippetParser","insertText","isDisposable","providerName","_debugDisplayName","elapsedProvider","duration","elapsedOverall","elapsed","snippetCompletions","provideCompletionItems","list","orderedGroups","providerGroup","all","map","onUnexpectedExternalError","CancellationError","getSuggestionComparator","defaultComparator","_snippetComparators","snippetConfig","get","showSimpleSuggestions","getContribution","triggerSuggest","CommandsRegistry","accessor","args","uri","triggerCharacter","maxItemsToResolve","assertType","URI","completionProvider","ITextModelService","createModelReference","ref","resolving","object","textEditorModel","completions","setTimeout","QuickSuggestionsOptions","config","other","comments","strings","tokenType","WordContextKey","contextKeyService","_enabled","_ckAtEnd","AtEnd","bindTo","_configListener","_selectionListener","reset","checkForWordEnd","selection","getSelection","getStartPosition","onDidChangeCursorSelection","IContextKeyService","SuggestAlternatives","_index","_ckOtherSuggestions","OtherSuggestions","_listener","_model","_acceptNext","_ignore","acceptNext","_moveIndex","onDidChangeCursorPosition","_move","fwd","newIndex","additionalTextEdits","CommitCharacterController","widget","accept","_disposables","onDidShow","_onItem","getFocusedItem","onDidFocus","onDidHide","onWillType","text","_active","isFrozen","acceptCharacters","selected","isNonEmptyArray","commitCharacters","CharacterSet","auto","shy","noSelect","substr","leadingWord","getWordUntilPosition","pos","getPosition","tokenization","tokenizeIfCheap","isNaN","Number","SuggestModel","_editorWorkerService","_clipboardService","_telemetryService","_logService","_contextKeyService","_configurationService","_toDispose","_triggerCharacterListener","_triggerQuickSuggest","TimeoutTimer","_state","_completionDisposables","_onDidCancel","Emitter","_onDidTrigger","_onDidSuggest","onDidCancel","onDidTrigger","onDidSuggest","_telemetryGate","_currentSelection","Selection","_updateTriggerCharacters","cancel","onDidChangeModelLanguage","_updateActiveSuggestSession","editorIsComposing","onDidCompositionStart","onDidCompositionEnd","_onCompositionEnd","_onCursorChange","_refilterCompletionItems","supportsByTriggerCharacter","support","triggerCharacters","checkTriggerCharacter","configurationService","getContextKeyValue","allowQuickSuggestions","getValue","canShowSuggestOnTriggerCharacters","shouldAutoTrigger","lastChar","isLowSurrogate","isHighSurrogate","charAt","supports","existing","_completionModel","adopt","trigger","onDidType","retrigger","_requestToken","_context","fire","prevSelection","isEmpty","reason","containsRange","getEndPosition","isBeforeOrEqual","_doTriggerQuickSuggest","snippetsPreventQuickSuggestions","SnippetController2","isInSnippet","cancelAndSet","hasWidgetFocus","lineTokens","getLineTokens","getStandardTokenType","findTokenIndexAtOffset","Math","max","canShowQuickSuggest","ctx","_onNewContext","onlyFrom","noFilter","suggestCtx","_createSuggestFilter","itemKindFilter","itemKind","completionOptions","WordDistance","readText","cmpFn","concat","_reportDurationsTelemetry","catch","onUnexpectedError","publicLog2","data","JSON","stringify","debug","getLeadingWhitespace","inactiveProvider","allProvider","delete","oldLineContext","completionModel","suggestOptions","showMethods","showFunctions","showConstructors","showFields","showVariables","showClasses","showStructs","showInterfaces","showModules","showProperties","showEvents","showOperators","showUnits","showValues","showConstants","showEnums","showEnumMembers","showKeywords","showWords","showColors","showFiles","showReferences","showFolders","showTypeParameters","showSnippets","showUsers","showIssues","IEditorWorkerService","IClipboardService","ITelemetryService","ILogService","IConfigurationService","OvertypingCapturer","suggestModel","_lastOvertyped","_empty","selections","getSelections","selectionsLength","willOvertype","getValueLengthInRange","_maxSelectionLength","getValueInRange","multiline","StatusBarViewItem","kb","_keybindingService","lookupKeybinding","_action","id","textContent","symbolPrintEnter","getLabel","MenuEntryActionViewItem","SuggestWidgetStatus","instantiationService","_menuService","_menuDisposables","element","append","$","actionViewItemProvider","action","MenuItemAction","createInstance","_leftActions","ActionBar","_rightActions","domNode","classList","remove","menu","createMenu","left","right","getActions","group","actions","renderMenu","IInstantiationService","IMenuService","canExpandCompletionItem","documentation","detail","SuggestDetailsWidget","instaService","_onDidClose","onDidClose","_onDidChangeContents","onDidChangeContents","_renderDisposeable","_borderWidth","_size","Dimension","_markdownRenderer","MarkdownRenderer","_body","_scrollbar","DomScrollableElement","alwaysConsumeMouseWheel","_header","_close","Codicon","title","nls","_type","_docs","_configureFont","getOptions","fontInfo","fontFamily","getMassagedFontFamily","fontSize","fontWeight","fontSizePx","lineHeightPx","fontFeatureSettings","borderWidth","borderHeight","verticalPadding","horizontalPadding","layout","explainMode","md","join","MarkdownString","appendCodeblock","cappedDetail","show","toggle","test","clearNode","hide","renderedContents","render","onDidRenderAsync","clientHeight","userSelect","tabIndex","onmousedown","clearContents","newSize","equals","scanDomNode","much","scrollHeight","scrollDown","scrollUp","SuggestDetailsOverlay","topLeftNow","sizeNow","_added","_preferAlignAtTop","_resizable","ResizableHTMLElement","enableSashes","deltaTop","deltaLeft","onDidWillResize","_topLeft","onDidResize","dimension","updateTopLeft","west","north","_applyTopLeft","_userSize","_anchorBox","_placeAtAnchor","sessionEnded","clearSashHoverState","anchor","preferAlignAtTop","anchorBox","getBoundingClientRect","alignAtTop","maxSize","bodyBox","getClientArea","body","info","defaultMinSize","defaultTop","eastPlacement","maxSizeTop","maxSizeBottom","with","fit","minSize","min","placements","placement","find","p","bottom","maxHeight","topLeft","getAriaId","suggestMoreInfoIcon","registerIcon","_completionItemColor","out","ColorExtractor","_regexStrict","_regexRelaxed","exec","RegExp","ItemRenderer","_modelService","_languageService","_themeService","_onDidToggleDetails","onDidToggleDetails","templateId","create","icon","colorspan","main","iconContainer","iconLabel","IconLabel","supportHighlights","supportIcons","parametersLabel","qualifierLabel","detailsLabel","readMore","ThemeIcon","configureFont","letterSpacing","letterSpacingPx","labelOptions","labelEscapeNewLines","matches","createMatches","extract","className","getFileIconTheme","hasFileIcons","labelClasses","getIconClasses","scheme","path","FileKind","detailClasses","extraClasses","hasFolderIcons","flat","CSSIcon","CompletionItemKinds","indexOf","setLabel","stripNewLines","showInlineDetails","templateData","str","IModelService","ILanguageService","IThemeService","editorSuggestWidgetForeground","registerColor","dark","editorWidgetBackground","light","hcDark","hcLight","editorWidgetBorder","editorForeground","editorSuggestWidgetSelectedBackground","quickInputListFocusForeground","quickInputListFocusIconForeground","quickInputListFocusBackground","PersistedWidgetSize","listHighlightForeground","listFocusHighlightForeground","transparent","_service","_key","getEditorType","EmbeddedCodeEditorWidget","raw","obj","parse","is","lift","store","SuggestWidget","_storageService","_isAuto","_ignoreFocusEvents","_forceRenderingAbove","_explainMode","_showTimeout","_onDidSelect","_onDidFocus","_onDidHide","_onDidShow","onDidSelect","_onDetailsKeydown","onDetailsKeyDown","_contentWidget","SuggestContentWidget","_persistedSize","state","ResizeState","persistedSize","currentSize","persistHeight","persistWidth","lockPreference","restore","_d","_resize","south","east","itemHeight","defaultSize","threshold","round","abs","unlockPreference","_messageElement","_listElement","details","toggleDetails","_details","applyIconStyle","showIcons","renderer","_list","List","getHeight","_element","getTemplateId","useShadows","mouseSupport","multipleSelectionSupport","accessibilityProvider","getRole","getWidgetAriaLabel","getWidgetRole","getAriaLabel","isResolved","_isDetailsVisible","docs","_status","applyStatusBarStyle","showStatusBar","attachListStyler","listInactiveFocusBackground","listInactiveFocusOutline","activeContrastBorder","onDidColorThemeChange","t","_onThemeChange","getColorTheme","onMouseDown","_onListMouseDownOrTap","onTap","onDidChangeSelection","_onListSelection","onDidChangeFocus","_onListFocus","_onCursorSelectionChanged","_ctxSuggestWidgetVisible","SuggestContext","_ctxSuggestWidgetDetailsVisible","_ctxSuggestWidgetMultipleSuggestions","_ctxSuggestWidgetHasFocusedSuggestion","addStandardDisposableListener","_onEditorMouseDown","_loadingTimeout","mouseEvent","contains","focus","browserEvent","_select","elements","indexes","theme","isHighContrast","_currentSuggestionDetails","_focusedItem","setAriaOptions","activeDescendant","reveal","createCancelablePromise","loading","disposableTimeout","showDetails","setFocus","_cappedHeight","LOADING_MESSAGE","_show","NO_SUGGESTIONS_MESSAGE","_layout","delay","setPosition","_setState","selectionIndex","isAuto","visibleCount","pageDown","focusNextPage","focusNext","scrollBottom","focusLast","pageUp","focusPreviousPage","focusPrevious","focusFirst","getFocusedElements","getFocus","_setDetailsVisible","renderLoading","renderItem","_positionDetails","dim","minPersistedHeight","ceil","setPreference","maxWidth","preferredWidth","stats","typicalHalfwidthCharacterWidth","fullHeight","statusBarHeight","contentHeight","minHeight","editorBox","getDomNodePagePosition","cursorBox","getScrolledVisiblePosition","cursorBottom","maxHeightBelow","availableSpaceAbove","maxHeightAbove","capped","wanted","preferredSize","placeAtAnchor","clamp","getBoolean","IStorageService","_widget","allowEditorOverflow","suppressMouseDown","_preferenceLocked","_hidden","removeContentWidget","addContentWidget","layoutContentWidget","_position","_preference","_afterRender","LineSuffix","getLineMaxColumn","offset","getOffsetAt","getPositionAt","_marker","deltaDecorations","stickiness","isDisposed","getDecorationRange","SuggestController","_memoryService","_commandService","_instantiationService","_lineSuffix","MutableDisposable","_selectors","PriorityRegistry","s","priority","ctxInsertMode","insertMode","IdleValue","_insertSuggestion","commitCharacterController","ctxMakesTextEdit","ctxHasInsertAndReplace","ctxCanResolve","toDisposable","toKeybinding","SimpleKeybinding","platform","isModifierKey","_overtypingCapturer","_alternatives","showTriggered","itemsOrderedByPriorityDesc","select","showSuggestions","hideWidget","onDidBlurEditorWidget","acceptSuggestionsOnEnter","updateFromConfig","acceptSuggestionOnEnter","flags","snippetController","modelVersionNow","getAlternativeVersionId","tasks","cts","pushUndoStop","getOverwriteInfo","memorize","Array","isArray","scrollState","StableEditorScrollState","executeEdits","edit","EditOperation","restoreRelativeVerticalPositionOfCursor","docListener","onDidChangeContent","isFlush","changes","change","thisPosition","oldFlags","didType","typeListener","some","applied","trace","overwriteAfter","undoStopBefore","undoStopAfter","adjustWhitespace","overtypingCapturer","command","TriggerSuggestAction","executeCommand","canUndo","undo","_alertCompletionItem","finally","_reportSuggestionAcceptedTelemetry","acceptedSuggestion","providerId","split","basenameHash","hash","basename","languageId","getLanguageId","fileExtension","extname","toggleMode","delta","msg","alert","arg","positionNow","fallback","Event","_","listener","makesTextEdit","keepAlternativeSuggestions","alternativeOverwriteConfig","prev","selectNext","selectNextPage","selectLast","selectPrevious","selectPreviousPage","selectFirst","toggleExplainMode","toggleDetailsFocus","resetPersistedSize","forceRenderingAbove","isInitialized","stopForceRenderingAbove","selector","register","ISuggestMemoryService","ICommandService","prioritySelector","Error","s1","s2","alias","precondition","ContextKeyExpr","EditorContextKeys","kbOpts","kbExpr","primary","secondary","mac","weight","_accessor","controller","noSelection","EditorAction","registerEditorAction","SuggestCommand","EditorCommand","registerEditorCommand","handler","x","acceptSelectedSuggestion","menuOpts","menuId","order","when","cancelSuggestWidget","selectNextSuggestion","selectNextPageSuggestion","selectLastSuggestion","selectPrevSuggestion","selectPrevPageSuggestion","selectFirstSuggestion","toggleSuggestionDetails","toggleSuggestionFocus","toNegated","triggerSuggestAndAcceptBest","isObject","acceptNextSuggestion","acceptPrevSuggestion","resetWidgetSize","SuggestInlineCompletion","InlineCompletionResults","_suggestMemoryService","selectedIndex","first","Iterable","second","resolveCount","CompletionItemInsertTextRule","snippet","RefCountedDisposable","SuggestInlineCompletions","_getEditorOption","_languageFeatureService","selectedSuggestionInfo","wordInfo","triggerCharacterInfo","_getTriggerCharacterInfo","leadingLineContents","_lastResult","canBeReused","newLineContext","acquire","providers","boostFullMatch","firstMatchCanBeWeak","_completions","release","EditorContribution","languageFeatureService","editorService","_counter","listCodeEditors","_disposable","inlineCompletionsProvider","ICodeEditorService","Memory","name","topScore","preselect","NoMemory","LRUMemory","_cache","LRUCache","_seq","touch","lineSuffix","indexPreselect","indexRecency","seq","peek","toJSON","PrefixMemory","_trie","TernarySearchTree","findSubstr","forEach","SuggestMemoryService","_configService","_persistSoon","_saveState","onWillSaveState","WillSaveStateReason","_withStrategy","mode","overrideIdentifier","getLanguageIdAtPosition","resource","_strategy","ctor","_strategyCtors","scope","_storagePrefix","fromJSON","createDecorator","registerSingleton","service","localityBonus","None","canComputeWordRanges","BracketSelectionRangeProvider","provideSelectionRanges","computeWordRanges","wordRanges","wordUntilPos","wordLines","isFalsyOrEmpty","binarySearch","bestWordRange","blockDistance","SYMBOL_ICON_ARRAY_FOREGROUND","foreground","SYMBOL_ICON_BOOLEAN_FOREGROUND","SYMBOL_ICON_CLASS_FOREGROUND","SYMBOL_ICON_COLOR_FOREGROUND","SYMBOL_ICON_CONSTANT_FOREGROUND","SYMBOL_ICON_CONSTRUCTOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND","SYMBOL_ICON_EVENT_FOREGROUND","SYMBOL_ICON_FIELD_FOREGROUND","SYMBOL_ICON_FILE_FOREGROUND","SYMBOL_ICON_FOLDER_FOREGROUND","SYMBOL_ICON_FUNCTION_FOREGROUND","SYMBOL_ICON_INTERFACE_FOREGROUND","SYMBOL_ICON_KEY_FOREGROUND","SYMBOL_ICON_KEYWORD_FOREGROUND","SYMBOL_ICON_METHOD_FOREGROUND","SYMBOL_ICON_MODULE_FOREGROUND","SYMBOL_ICON_NAMESPACE_FOREGROUND","SYMBOL_ICON_NULL_FOREGROUND","SYMBOL_ICON_NUMBER_FOREGROUND","SYMBOL_ICON_OBJECT_FOREGROUND","SYMBOL_ICON_OPERATOR_FOREGROUND","SYMBOL_ICON_PACKAGE_FOREGROUND","SYMBOL_ICON_PROPERTY_FOREGROUND","SYMBOL_ICON_REFERENCE_FOREGROUND","SYMBOL_ICON_SNIPPET_FOREGROUND","SYMBOL_ICON_STRING_FOREGROUND","SYMBOL_ICON_STRUCT_FOREGROUND","SYMBOL_ICON_TEXT_FOREGROUND","SYMBOL_ICON_TYPEPARAMETER_FOREGROUND","SYMBOL_ICON_UNIT_FOREGROUND","SYMBOL_ICON_VARIABLE_FOREGROUND","registerThemingParticipant","collector","symbolIconArrayColor","getColor","addRule","symbolIconBooleanColor","symbolIconClassColor","symbolIconMethodColor","symbolIconColorColor","symbolIconConstantColor","symbolIconConstructorColor","symbolIconEnumeratorColor","symbolIconEnumeratorMemberColor","symbolIconEventColor","symbolIconFieldColor","symbolIconFileColor","symbolIconFolderColor","symbolIconFunctionColor","symbolIconInterfaceColor","symbolIconKeyColor","symbolIconKeywordColor","symbolIconModuleColor","outlineNamespaceColor","symbolIconNullColor","symbolIconNumberColor","symbolIconObjectColor","symbolIconOperatorColor","symbolIconPackageColor","symbolIconPropertyColor","symbolIconReferenceColor","symbolIconSnippetColor","symbolIconStringColor","symbolIconStructColor","symbolIconTextColor","symbolIconTypeParameterColor","symbolIconUnitColor","symbolIconVariableColor"],"sourceRoot":""}