{"version":3,"file":"static/js/monaco-editor-vendor.a3a53265.18ac06c8.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/base/browser/fastDomNode.js","../node_modules/monaco-editor/esm/vs/base/browser/formattedTextRenderer.js","../node_modules/monaco-editor/esm/vs/base/browser/globalMouseMoveMonitor.js","../node_modules/monaco-editor/esm/vs/base/browser/iframe.js","../node_modules/monaco-editor/esm/vs/base/browser/keyboardEvent.js","../node_modules/monaco-editor/esm/vs/base/browser/markdownRenderer.js","../node_modules/monaco-editor/esm/vs/base/browser/mouseEvent.js","../node_modules/monaco-editor/esm/vs/base/browser/touch.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionViewItems.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/actionbar/actionbar.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/aria/aria.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/button/button.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class FastDomNode {\n    constructor(domNode) {\n        this.domNode = domNode;\n        this._maxWidth = -1;\n        this._width = -1;\n        this._height = -1;\n        this._top = -1;\n        this._left = -1;\n        this._bottom = -1;\n        this._right = -1;\n        this._fontFamily = '';\n        this._fontWeight = '';\n        this._fontSize = -1;\n        this._fontStyle = '';\n        this._fontFeatureSettings = '';\n        this._textDecoration = '';\n        this._lineHeight = -1;\n        this._letterSpacing = -100;\n        this._className = '';\n        this._display = '';\n        this._position = '';\n        this._visibility = '';\n        this._color = '';\n        this._backgroundColor = '';\n        this._layerHint = false;\n        this._contain = 'none';\n        this._boxShadow = '';\n    }\n    setMaxWidth(maxWidth) {\n        if (this._maxWidth === maxWidth) {\n            return;\n        }\n        this._maxWidth = maxWidth;\n        this.domNode.style.maxWidth = this._maxWidth + 'px';\n    }\n    setWidth(width) {\n        if (this._width === width) {\n            return;\n        }\n        this._width = width;\n        this.domNode.style.width = this._width + 'px';\n    }\n    setHeight(height) {\n        if (this._height === height) {\n            return;\n        }\n        this._height = height;\n        this.domNode.style.height = this._height + 'px';\n    }\n    setTop(top) {\n        if (this._top === top) {\n            return;\n        }\n        this._top = top;\n        this.domNode.style.top = this._top + 'px';\n    }\n    unsetTop() {\n        if (this._top === -1) {\n            return;\n        }\n        this._top = -1;\n        this.domNode.style.top = '';\n    }\n    setLeft(left) {\n        if (this._left === left) {\n            return;\n        }\n        this._left = left;\n        this.domNode.style.left = this._left + 'px';\n    }\n    setBottom(bottom) {\n        if (this._bottom === bottom) {\n            return;\n        }\n        this._bottom = bottom;\n        this.domNode.style.bottom = this._bottom + 'px';\n    }\n    setRight(right) {\n        if (this._right === right) {\n            return;\n        }\n        this._right = right;\n        this.domNode.style.right = this._right + 'px';\n    }\n    setFontFamily(fontFamily) {\n        if (this._fontFamily === fontFamily) {\n            return;\n        }\n        this._fontFamily = fontFamily;\n        this.domNode.style.fontFamily = this._fontFamily;\n    }\n    setFontWeight(fontWeight) {\n        if (this._fontWeight === fontWeight) {\n            return;\n        }\n        this._fontWeight = fontWeight;\n        this.domNode.style.fontWeight = this._fontWeight;\n    }\n    setFontSize(fontSize) {\n        if (this._fontSize === fontSize) {\n            return;\n        }\n        this._fontSize = fontSize;\n        this.domNode.style.fontSize = this._fontSize + 'px';\n    }\n    setFontStyle(fontStyle) {\n        if (this._fontStyle === fontStyle) {\n            return;\n        }\n        this._fontStyle = fontStyle;\n        this.domNode.style.fontStyle = this._fontStyle;\n    }\n    setFontFeatureSettings(fontFeatureSettings) {\n        if (this._fontFeatureSettings === fontFeatureSettings) {\n            return;\n        }\n        this._fontFeatureSettings = fontFeatureSettings;\n        this.domNode.style.fontFeatureSettings = this._fontFeatureSettings;\n    }\n    setTextDecoration(textDecoration) {\n        if (this._textDecoration === textDecoration) {\n            return;\n        }\n        this._textDecoration = textDecoration;\n        this.domNode.style.textDecoration = this._textDecoration;\n    }\n    setLineHeight(lineHeight) {\n        if (this._lineHeight === lineHeight) {\n            return;\n        }\n        this._lineHeight = lineHeight;\n        this.domNode.style.lineHeight = this._lineHeight + 'px';\n    }\n    setLetterSpacing(letterSpacing) {\n        if (this._letterSpacing === letterSpacing) {\n            return;\n        }\n        this._letterSpacing = letterSpacing;\n        this.domNode.style.letterSpacing = this._letterSpacing + 'px';\n    }\n    setClassName(className) {\n        if (this._className === className) {\n            return;\n        }\n        this._className = className;\n        this.domNode.className = this._className;\n    }\n    toggleClassName(className, shouldHaveIt) {\n        this.domNode.classList.toggle(className, shouldHaveIt);\n        this._className = this.domNode.className;\n    }\n    setDisplay(display) {\n        if (this._display === display) {\n            return;\n        }\n        this._display = display;\n        this.domNode.style.display = this._display;\n    }\n    setPosition(position) {\n        if (this._position === position) {\n            return;\n        }\n        this._position = position;\n        this.domNode.style.position = this._position;\n    }\n    setVisibility(visibility) {\n        if (this._visibility === visibility) {\n            return;\n        }\n        this._visibility = visibility;\n        this.domNode.style.visibility = this._visibility;\n    }\n    setColor(color) {\n        if (this._color === color) {\n            return;\n        }\n        this._color = color;\n        this.domNode.style.color = this._color;\n    }\n    setBackgroundColor(backgroundColor) {\n        if (this._backgroundColor === backgroundColor) {\n            return;\n        }\n        this._backgroundColor = backgroundColor;\n        this.domNode.style.backgroundColor = this._backgroundColor;\n    }\n    setLayerHinting(layerHint) {\n        if (this._layerHint === layerHint) {\n            return;\n        }\n        this._layerHint = layerHint;\n        this.domNode.style.transform = this._layerHint ? 'translate3d(0px, 0px, 0px)' : '';\n    }\n    setBoxShadow(boxShadow) {\n        if (this._boxShadow === boxShadow) {\n            return;\n        }\n        this._boxShadow = boxShadow;\n        this.domNode.style.boxShadow = boxShadow;\n    }\n    setContain(contain) {\n        if (this._contain === contain) {\n            return;\n        }\n        this._contain = contain;\n        this.domNode.style.contain = this._contain;\n    }\n    setAttribute(name, value) {\n        this.domNode.setAttribute(name, value);\n    }\n    removeAttribute(name) {\n        this.domNode.removeAttribute(name);\n    }\n    appendChild(child) {\n        this.domNode.appendChild(child.domNode);\n    }\n    removeChild(child) {\n        this.domNode.removeChild(child.domNode);\n    }\n}\nexport function createFastDomNode(domNode) {\n    return new FastDomNode(domNode);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from './dom.js';\nexport function renderText(text, options = {}) {\n    const element = createElement(options);\n    element.textContent = text;\n    return element;\n}\nexport function renderFormattedText(formattedText, options = {}) {\n    const element = createElement(options);\n    _renderFormattedText(element, parseFormattedText(formattedText, !!options.renderCodeSegments), options.actionHandler, options.renderCodeSegments);\n    return element;\n}\nexport function createElement(options) {\n    const tagName = options.inline ? 'span' : 'div';\n    const element = document.createElement(tagName);\n    if (options.className) {\n        element.className = options.className;\n    }\n    return element;\n}\nclass StringStream {\n    constructor(source) {\n        this.source = source;\n        this.index = 0;\n    }\n    eos() {\n        return this.index >= this.source.length;\n    }\n    next() {\n        const next = this.peek();\n        this.advance();\n        return next;\n    }\n    peek() {\n        return this.source[this.index];\n    }\n    advance() {\n        this.index++;\n    }\n}\nfunction _renderFormattedText(element, treeNode, actionHandler, renderCodeSegments) {\n    let child;\n    if (treeNode.type === 2 /* Text */) {\n        child = document.createTextNode(treeNode.content || '');\n    }\n    else if (treeNode.type === 3 /* Bold */) {\n        child = document.createElement('b');\n    }\n    else if (treeNode.type === 4 /* Italics */) {\n        child = document.createElement('i');\n    }\n    else if (treeNode.type === 7 /* Code */ && renderCodeSegments) {\n        child = document.createElement('code');\n    }\n    else if (treeNode.type === 5 /* Action */ && actionHandler) {\n        const a = document.createElement('a');\n        actionHandler.disposables.add(DOM.addStandardDisposableListener(a, 'click', (event) => {\n            actionHandler.callback(String(treeNode.index), event);\n        }));\n        child = a;\n    }\n    else if (treeNode.type === 8 /* NewLine */) {\n        child = document.createElement('br');\n    }\n    else if (treeNode.type === 1 /* Root */) {\n        child = element;\n    }\n    if (child && element !== child) {\n        element.appendChild(child);\n    }\n    if (child && Array.isArray(treeNode.children)) {\n        treeNode.children.forEach((nodeChild) => {\n            _renderFormattedText(child, nodeChild, actionHandler, renderCodeSegments);\n        });\n    }\n}\nfunction parseFormattedText(content, parseCodeSegments) {\n    const root = {\n        type: 1 /* Root */,\n        children: []\n    };\n    let actionViewItemIndex = 0;\n    let current = root;\n    const stack = [];\n    const stream = new StringStream(content);\n    while (!stream.eos()) {\n        let next = stream.next();\n        const isEscapedFormatType = (next === '\\\\' && formatTagType(stream.peek(), parseCodeSegments) !== 0 /* Invalid */);\n        if (isEscapedFormatType) {\n            next = stream.next(); // unread the backslash if it escapes a format tag type\n        }\n        if (!isEscapedFormatType && isFormatTag(next, parseCodeSegments) && next === stream.peek()) {\n            stream.advance();\n            if (current.type === 2 /* Text */) {\n                current = stack.pop();\n            }\n            const type = formatTagType(next, parseCodeSegments);\n            if (current.type === type || (current.type === 5 /* Action */ && type === 6 /* ActionClose */)) {\n                current = stack.pop();\n            }\n            else {\n                const newCurrent = {\n                    type: type,\n                    children: []\n                };\n                if (type === 5 /* Action */) {\n                    newCurrent.index = actionViewItemIndex;\n                    actionViewItemIndex++;\n                }\n                current.children.push(newCurrent);\n                stack.push(current);\n                current = newCurrent;\n            }\n        }\n        else if (next === '\\n') {\n            if (current.type === 2 /* Text */) {\n                current = stack.pop();\n            }\n            current.children.push({\n                type: 8 /* NewLine */\n            });\n        }\n        else {\n            if (current.type !== 2 /* Text */) {\n                const textCurrent = {\n                    type: 2 /* Text */,\n                    content: next\n                };\n                current.children.push(textCurrent);\n                stack.push(current);\n                current = textCurrent;\n            }\n            else {\n                current.content += next;\n            }\n        }\n    }\n    if (current.type === 2 /* Text */) {\n        current = stack.pop();\n    }\n    if (stack.length) {\n        // incorrectly formatted string literal\n    }\n    return root;\n}\nfunction isFormatTag(char, supportCodeSegments) {\n    return formatTagType(char, supportCodeSegments) !== 0 /* Invalid */;\n}\nfunction formatTagType(char, supportCodeSegments) {\n    switch (char) {\n        case '*':\n            return 3 /* Bold */;\n        case '_':\n            return 4 /* Italics */;\n        case '[':\n            return 5 /* Action */;\n        case ']':\n            return 6 /* ActionClose */;\n        case '`':\n            return supportCodeSegments ? 7 /* Code */ : 0 /* Invalid */;\n        default:\n            return 0 /* Invalid */;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from './dom.js';\nimport { IframeUtils } from './iframe.js';\nimport { StandardMouseEvent } from './mouseEvent.js';\nimport { DisposableStore } from '../common/lifecycle.js';\nimport { isIOS } from '../common/platform.js';\nexport function standardMouseMoveMerger(lastEvent, currentEvent) {\n    let ev = new StandardMouseEvent(currentEvent);\n    ev.preventDefault();\n    return {\n        leftButton: ev.leftButton,\n        buttons: ev.buttons,\n        posx: ev.posx,\n        posy: ev.posy\n    };\n}\nexport class GlobalMouseMoveMonitor {\n    constructor() {\n        this._hooks = new DisposableStore();\n        this._mouseMoveEventMerger = null;\n        this._mouseMoveCallback = null;\n        this._onStopCallback = null;\n    }\n    dispose() {\n        this.stopMonitoring(false);\n        this._hooks.dispose();\n    }\n    stopMonitoring(invokeStopCallback, browserEvent) {\n        if (!this.isMonitoring()) {\n            // Not monitoring\n            return;\n        }\n        // Unhook\n        this._hooks.clear();\n        this._mouseMoveEventMerger = null;\n        this._mouseMoveCallback = null;\n        const onStopCallback = this._onStopCallback;\n        this._onStopCallback = null;\n        if (invokeStopCallback && onStopCallback) {\n            onStopCallback(browserEvent);\n        }\n    }\n    isMonitoring() {\n        return !!this._mouseMoveEventMerger;\n    }\n    startMonitoring(initialElement, initialButtons, mouseMoveEventMerger, mouseMoveCallback, onStopCallback) {\n        if (this.isMonitoring()) {\n            // I am already hooked\n            return;\n        }\n        this._mouseMoveEventMerger = mouseMoveEventMerger;\n        this._mouseMoveCallback = mouseMoveCallback;\n        this._onStopCallback = onStopCallback;\n        const windowChain = IframeUtils.getSameOriginWindowChain();\n        const mouseMove = isIOS ? 'pointermove' : 'mousemove'; // Safari sends wrong event, workaround for #122653\n        const mouseUp = 'mouseup';\n        const listenTo = windowChain.map(element => element.window.document);\n        const shadowRoot = dom.getShadowRoot(initialElement);\n        if (shadowRoot) {\n            listenTo.unshift(shadowRoot);\n        }\n        for (const element of listenTo) {\n            this._hooks.add(dom.addDisposableThrottledListener(element, mouseMove, (data) => {\n                if (data.buttons !== initialButtons) {\n                    // Buttons state has changed in the meantime\n                    this.stopMonitoring(true);\n                    return;\n                }\n                this._mouseMoveCallback(data);\n            }, (lastEvent, currentEvent) => this._mouseMoveEventMerger(lastEvent, currentEvent)));\n            this._hooks.add(dom.addDisposableListener(element, mouseUp, (e) => this.stopMonitoring(true)));\n        }\n        if (IframeUtils.hasDifferentOriginAncestor()) {\n            let lastSameOriginAncestor = windowChain[windowChain.length - 1];\n            // We might miss a mouse up if it happens outside the iframe\n            // This one is for Chrome\n            this._hooks.add(dom.addDisposableListener(lastSameOriginAncestor.window.document, 'mouseout', (browserEvent) => {\n                let e = new StandardMouseEvent(browserEvent);\n                if (e.target.tagName.toLowerCase() === 'html') {\n                    this.stopMonitoring(true);\n                }\n            }));\n            // This one is for FF\n            this._hooks.add(dom.addDisposableListener(lastSameOriginAncestor.window.document, 'mouseover', (browserEvent) => {\n                let e = new StandardMouseEvent(browserEvent);\n                if (e.target.tagName.toLowerCase() === 'html') {\n                    this.stopMonitoring(true);\n                }\n            }));\n            // This one is for IE\n            this._hooks.add(dom.addDisposableListener(lastSameOriginAncestor.window.document.body, 'mouseleave', (browserEvent) => {\n                this.stopMonitoring(true);\n            }));\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nlet hasDifferentOriginAncestorFlag = false;\nlet sameOriginWindowChainCache = null;\nfunction getParentWindowIfSameOrigin(w) {\n    if (!w.parent || w.parent === w) {\n        return null;\n    }\n    // Cannot really tell if we have access to the parent window unless we try to access something in it\n    try {\n        let location = w.location;\n        let parentLocation = w.parent.location;\n        if (location.origin !== 'null' && parentLocation.origin !== 'null' && location.origin !== parentLocation.origin) {\n            hasDifferentOriginAncestorFlag = true;\n            return null;\n        }\n    }\n    catch (e) {\n        hasDifferentOriginAncestorFlag = true;\n        return null;\n    }\n    return w.parent;\n}\nexport class IframeUtils {\n    /**\n     * Returns a chain of embedded windows with the same origin (which can be accessed programmatically).\n     * Having a chain of length 1 might mean that the current execution environment is running outside of an iframe or inside an iframe embedded in a window with a different origin.\n     * To distinguish if at one point the current execution environment is running inside a window with a different origin, see hasDifferentOriginAncestor()\n     */\n    static getSameOriginWindowChain() {\n        if (!sameOriginWindowChainCache) {\n            sameOriginWindowChainCache = [];\n            let w = window;\n            let parent;\n            do {\n                parent = getParentWindowIfSameOrigin(w);\n                if (parent) {\n                    sameOriginWindowChainCache.push({\n                        window: w,\n                        iframeElement: w.frameElement || null\n                    });\n                }\n                else {\n                    sameOriginWindowChainCache.push({\n                        window: w,\n                        iframeElement: null\n                    });\n                }\n                w = parent;\n            } while (w);\n        }\n        return sameOriginWindowChainCache.slice(0);\n    }\n    /**\n     * Returns true if the current execution environment is chained in a list of iframes which at one point ends in a window with a different origin.\n     * Returns false if the current execution environment is not running inside an iframe or if the entire chain of iframes have the same origin.\n     */\n    static hasDifferentOriginAncestor() {\n        if (!sameOriginWindowChainCache) {\n            this.getSameOriginWindowChain();\n        }\n        return hasDifferentOriginAncestorFlag;\n    }\n    /**\n     * Returns the position of `childWindow` relative to `ancestorWindow`\n     */\n    static getPositionOfChildWindowRelativeToAncestorWindow(childWindow, ancestorWindow) {\n        if (!ancestorWindow || childWindow === ancestorWindow) {\n            return {\n                top: 0,\n                left: 0\n            };\n        }\n        let top = 0, left = 0;\n        let windowChain = this.getSameOriginWindowChain();\n        for (const windowChainEl of windowChain) {\n            top += windowChainEl.window.scrollY;\n            left += windowChainEl.window.scrollX;\n            if (windowChainEl.window === ancestorWindow) {\n                break;\n            }\n            if (!windowChainEl.iframeElement) {\n                break;\n            }\n            let boundingRect = windowChainEl.iframeElement.getBoundingClientRect();\n            top += boundingRect.top;\n            left += boundingRect.left;\n        }\n        return {\n            top: top,\n            left: left\n        };\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from './browser.js';\nimport { EVENT_KEY_CODE_MAP, KeyCodeUtils } from '../common/keyCodes.js';\nimport { SimpleKeybinding } from '../common/keybindings.js';\nimport * as platform from '../common/platform.js';\nfunction extractKeyCode(e) {\n    if (e.charCode) {\n        // \"keypress\" events mostly\n        let char = String.fromCharCode(e.charCode).toUpperCase();\n        return KeyCodeUtils.fromString(char);\n    }\n    const keyCode = e.keyCode;\n    // browser quirks\n    if (keyCode === 3) {\n        return 7 /* PauseBreak */;\n    }\n    else if (browser.isFirefox) {\n        if (keyCode === 59) {\n            return 80 /* Semicolon */;\n        }\n        else if (keyCode === 107) {\n            return 81 /* Equal */;\n        }\n        else if (keyCode === 109) {\n            return 83 /* Minus */;\n        }\n        else if (platform.isMacintosh && keyCode === 224) {\n            return 57 /* Meta */;\n        }\n    }\n    else if (browser.isWebKit) {\n        if (keyCode === 91) {\n            return 57 /* Meta */;\n        }\n        else if (platform.isMacintosh && keyCode === 93) {\n            // the two meta keys in the Mac have different key codes (91 and 93)\n            return 57 /* Meta */;\n        }\n        else if (!platform.isMacintosh && keyCode === 92) {\n            return 57 /* Meta */;\n        }\n    }\n    // cross browser keycodes:\n    return EVENT_KEY_CODE_MAP[keyCode] || 0 /* Unknown */;\n}\nconst ctrlKeyMod = (platform.isMacintosh ? 256 /* WinCtrl */ : 2048 /* CtrlCmd */);\nconst altKeyMod = 512 /* Alt */;\nconst shiftKeyMod = 1024 /* Shift */;\nconst metaKeyMod = (platform.isMacintosh ? 2048 /* CtrlCmd */ : 256 /* WinCtrl */);\nexport class StandardKeyboardEvent {\n    constructor(source) {\n        this._standardKeyboardEventBrand = true;\n        let e = source;\n        this.browserEvent = e;\n        this.target = e.target;\n        this.ctrlKey = e.ctrlKey;\n        this.shiftKey = e.shiftKey;\n        this.altKey = e.altKey;\n        this.metaKey = e.metaKey;\n        this.keyCode = extractKeyCode(e);\n        this.code = e.code;\n        // console.info(e.type + \": keyCode: \" + e.keyCode + \", which: \" + e.which + \", charCode: \" + e.charCode + \", detail: \" + e.detail + \" ====> \" + this.keyCode + ' -- ' + KeyCode[this.keyCode]);\n        this.ctrlKey = this.ctrlKey || this.keyCode === 5 /* Ctrl */;\n        this.altKey = this.altKey || this.keyCode === 6 /* Alt */;\n        this.shiftKey = this.shiftKey || this.keyCode === 4 /* Shift */;\n        this.metaKey = this.metaKey || this.keyCode === 57 /* Meta */;\n        this._asKeybinding = this._computeKeybinding();\n        this._asRuntimeKeybinding = this._computeRuntimeKeybinding();\n        // console.log(`code: ${e.code}, keyCode: ${e.keyCode}, key: ${e.key}`);\n    }\n    preventDefault() {\n        if (this.browserEvent && this.browserEvent.preventDefault) {\n            this.browserEvent.preventDefault();\n        }\n    }\n    stopPropagation() {\n        if (this.browserEvent && this.browserEvent.stopPropagation) {\n            this.browserEvent.stopPropagation();\n        }\n    }\n    toKeybinding() {\n        return this._asRuntimeKeybinding;\n    }\n    equals(other) {\n        return this._asKeybinding === other;\n    }\n    _computeKeybinding() {\n        let key = 0 /* Unknown */;\n        if (this.keyCode !== 5 /* Ctrl */ && this.keyCode !== 4 /* Shift */ && this.keyCode !== 6 /* Alt */ && this.keyCode !== 57 /* Meta */) {\n            key = this.keyCode;\n        }\n        let result = 0;\n        if (this.ctrlKey) {\n            result |= ctrlKeyMod;\n        }\n        if (this.altKey) {\n            result |= altKeyMod;\n        }\n        if (this.shiftKey) {\n            result |= shiftKeyMod;\n        }\n        if (this.metaKey) {\n            result |= metaKeyMod;\n        }\n        result |= key;\n        return result;\n    }\n    _computeRuntimeKeybinding() {\n        let key = 0 /* Unknown */;\n        if (this.keyCode !== 5 /* Ctrl */ && this.keyCode !== 4 /* Shift */ && this.keyCode !== 6 /* Alt */ && this.keyCode !== 57 /* Meta */) {\n            key = this.keyCode;\n        }\n        return new SimpleKeybinding(this.ctrlKey, this.shiftKey, this.altKey, this.metaKey, key);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as DOM from './dom.js';\nimport * as dompurify from './dompurify/dompurify.js';\nimport { DomEmitter } from './event.js';\nimport { createElement } from './formattedTextRenderer.js';\nimport { StandardMouseEvent } from './mouseEvent.js';\nimport { renderLabelWithIcons } from './ui/iconLabel/iconLabels.js';\nimport { raceCancellation } from '../common/async.js';\nimport { CancellationTokenSource } from '../common/cancellation.js';\nimport { onUnexpectedError } from '../common/errors.js';\nimport { Event } from '../common/event.js';\nimport { parseHrefAndDimensions, removeMarkdownEscapes } from '../common/htmlContent.js';\nimport { markdownEscapeEscapedIcons } from '../common/iconLabels.js';\nimport { defaultGenerator } from '../common/idGenerator.js';\nimport { DisposableStore } from '../common/lifecycle.js';\nimport { marked } from '../common/marked/marked.js';\nimport { parse } from '../common/marshalling.js';\nimport { FileAccess, Schemas } from '../common/network.js';\nimport { cloneAndChange } from '../common/objects.js';\nimport { dirname, resolvePath } from '../common/resources.js';\nimport { escape } from '../common/strings.js';\nimport { URI } from '../common/uri.js';\n/**\n * Low-level way create a html element from a markdown string.\n *\n * **Note** that for most cases you should be using [`MarkdownRenderer`](./src/vs/editor/browser/core/markdownRenderer.ts)\n * which comes with support for pretty code block rendering and which uses the default way of handling links.\n */\nexport function renderMarkdown(markdown, options = {}, markedOptions = {}) {\n    var _a;\n    const disposables = new DisposableStore();\n    let isDisposed = false;\n    const cts = disposables.add(new CancellationTokenSource());\n    const element = createElement(options);\n    const _uriMassage = function (part) {\n        let data;\n        try {\n            data = parse(decodeURIComponent(part));\n        }\n        catch (e) {\n            // ignore\n        }\n        if (!data) {\n            return part;\n        }\n        data = cloneAndChange(data, value => {\n            if (markdown.uris && markdown.uris[value]) {\n                return URI.revive(markdown.uris[value]);\n            }\n            else {\n                return undefined;\n            }\n        });\n        return encodeURIComponent(JSON.stringify(data));\n    };\n    const _href = function (href, isDomUri) {\n        const data = markdown.uris && markdown.uris[href];\n        let uri = URI.revive(data);\n        if (isDomUri) {\n            if (href.startsWith(Schemas.data + ':')) {\n                return href;\n            }\n            if (!uri) {\n                uri = URI.parse(href);\n            }\n            // this URI will end up as \"src\"-attribute of a dom node\n            // and because of that special rewriting needs to be done\n            // so that the URI uses a protocol that's understood by\n            // browsers (like http or https)\n            return FileAccess.asBrowserUri(uri).toString(true);\n        }\n        if (!uri) {\n            return href;\n        }\n        if (URI.parse(href).toString() === uri.toString()) {\n            return href; // no transformation performed\n        }\n        if (uri.query) {\n            uri = uri.with({ query: _uriMassage(uri.query) });\n        }\n        return uri.toString();\n    };\n    // signal to code-block render that the\n    // element has been created\n    let signalInnerHTML;\n    const withInnerHTML = new Promise(c => signalInnerHTML = c);\n    const renderer = new marked.Renderer();\n    renderer.image = (href, title, text) => {\n        let dimensions = [];\n        let attributes = [];\n        if (href) {\n            ({ href, dimensions } = parseHrefAndDimensions(href));\n            attributes.push(`src=\"${href}\"`);\n        }\n        if (text) {\n            attributes.push(`alt=\"${text}\"`);\n        }\n        if (title) {\n            attributes.push(`title=\"${title}\"`);\n        }\n        if (dimensions.length) {\n            attributes = attributes.concat(dimensions);\n        }\n        return '<img ' + attributes.join(' ') + '>';\n    };\n    renderer.link = (href, title, text) => {\n        if (typeof href !== 'string') {\n            return '';\n        }\n        // Remove markdown escapes. Workaround for https://github.com/chjj/marked/issues/829\n        if (href === text) { // raw link case\n            text = removeMarkdownEscapes(text);\n        }\n        href = _href(href, false);\n        if (markdown.baseUri) {\n            href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n        }\n        title = typeof title === 'string' ? removeMarkdownEscapes(title) : '';\n        href = removeMarkdownEscapes(href);\n        if (!href\n            || /^data:|javascript:/i.test(href)\n            || (/^command:/i.test(href) && !markdown.isTrusted)\n            || /^command:(\\/\\/\\/)?_workbench\\.downloadResource/i.test(href)) {\n            // drop the link\n            return text;\n        }\n        else {\n            // HTML Encode href\n            href = href.replace(/&/g, '&amp;')\n                .replace(/</g, '&lt;')\n                .replace(/>/g, '&gt;')\n                .replace(/\"/g, '&quot;')\n                .replace(/'/g, '&#39;');\n            return `<a data-href=\"${href}\" title=\"${title || href}\">${text}</a>`;\n        }\n    };\n    renderer.paragraph = (text) => {\n        return `<p>${text}</p>`;\n    };\n    if (options.codeBlockRenderer) {\n        renderer.code = (code, lang) => {\n            const value = options.codeBlockRenderer(lang !== null && lang !== void 0 ? lang : '', code);\n            // when code-block rendering is async we return sync\n            // but update the node with the real result later.\n            const id = defaultGenerator.nextId();\n            raceCancellation(Promise.all([value, withInnerHTML]), cts.token).then(values => {\n                var _a;\n                if (!isDisposed && values) {\n                    const span = element.querySelector(`div[data-code=\"${id}\"]`);\n                    if (span) {\n                        DOM.reset(span, values[0]);\n                    }\n                    (_a = options.asyncRenderCallback) === null || _a === void 0 ? void 0 : _a.call(options);\n                }\n            }).catch(() => {\n                // ignore\n            });\n            return `<div class=\"code\" data-code=\"${id}\">${escape(code)}</div>`;\n        };\n    }\n    if (options.actionHandler) {\n        const onClick = options.actionHandler.disposables.add(new DomEmitter(element, 'click'));\n        const onAuxClick = options.actionHandler.disposables.add(new DomEmitter(element, 'auxclick'));\n        options.actionHandler.disposables.add(Event.any(onClick.event, onAuxClick.event)(e => {\n            const mouseEvent = new StandardMouseEvent(e);\n            if (!mouseEvent.leftButton && !mouseEvent.middleButton) {\n                return;\n            }\n            let target = mouseEvent.target;\n            if (target.tagName !== 'A') {\n                target = target.parentElement;\n                if (!target || target.tagName !== 'A') {\n                    return;\n                }\n            }\n            try {\n                let href = target.dataset['href'];\n                if (href) {\n                    if (markdown.baseUri) {\n                        href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                    }\n                    options.actionHandler.callback(href, mouseEvent);\n                }\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n            finally {\n                mouseEvent.preventDefault();\n            }\n        }));\n    }\n    if (!markdown.supportHtml) {\n        // TODO: Can we deprecated this in favor of 'supportHtml'?\n        // Use our own sanitizer so that we can let through only spans.\n        // Otherwise, we'd be letting all html be rendered.\n        // If we want to allow markdown permitted tags, then we can delete sanitizer and sanitize.\n        // We always pass the output through dompurify after this so that we don't rely on\n        // marked for sanitization.\n        markedOptions.sanitizer = (html) => {\n            const match = markdown.isTrusted ? html.match(/^(<span[^>]+>)|(<\\/\\s*span>)$/) : undefined;\n            return match ? html : '';\n        };\n        markedOptions.sanitize = true;\n        markedOptions.silent = true;\n    }\n    markedOptions.renderer = renderer;\n    // values that are too long will freeze the UI\n    let value = (_a = markdown.value) !== null && _a !== void 0 ? _a : '';\n    if (value.length > 100000) {\n        value = `${value.substr(0, 100000)}…`;\n    }\n    // escape theme icons\n    if (markdown.supportThemeIcons) {\n        value = markdownEscapeEscapedIcons(value);\n    }\n    let renderedMarkdown = marked.parse(value, markedOptions);\n    // Rewrite theme icons\n    if (markdown.supportThemeIcons) {\n        const elements = renderLabelWithIcons(renderedMarkdown);\n        renderedMarkdown = elements.map(e => typeof e === 'string' ? e : e.outerHTML).join('');\n    }\n    const htmlParser = new DOMParser();\n    const markdownHtmlDoc = htmlParser.parseFromString(sanitizeRenderedMarkdown(markdown, renderedMarkdown), 'text/html');\n    markdownHtmlDoc.body.querySelectorAll('img')\n        .forEach(img => {\n        const src = img.getAttribute('src'); // Get the raw 'src' attribute value as text, not the resolved 'src'\n        if (src) {\n            let href = src;\n            try {\n                if (markdown.baseUri) { // absolute or relative local path, or file: uri\n                    href = resolveWithBaseUri(URI.from(markdown.baseUri), href);\n                }\n            }\n            catch (err) { }\n            img.src = _href(href, true);\n        }\n    });\n    element.innerHTML = sanitizeRenderedMarkdown(markdown, markdownHtmlDoc.body.innerHTML);\n    // signal that async code blocks can be now be inserted\n    signalInnerHTML();\n    // signal size changes for image tags\n    if (options.asyncRenderCallback) {\n        for (const img of element.getElementsByTagName('img')) {\n            const listener = disposables.add(DOM.addDisposableListener(img, 'load', () => {\n                listener.dispose();\n                options.asyncRenderCallback();\n            }));\n        }\n    }\n    return {\n        element,\n        dispose: () => {\n            isDisposed = true;\n            cts.cancel();\n            disposables.dispose();\n        }\n    };\n}\nfunction resolveWithBaseUri(baseUri, href) {\n    const hasScheme = /^\\w[\\w\\d+.-]*:/.test(href);\n    if (hasScheme) {\n        return href;\n    }\n    if (baseUri.path.endsWith('/')) {\n        return resolvePath(baseUri, href).toString();\n    }\n    else {\n        return resolvePath(dirname(baseUri), href).toString();\n    }\n}\nfunction sanitizeRenderedMarkdown(options, renderedMarkdown) {\n    const { config, allowedSchemes } = getSanitizerOptions(options);\n    dompurify.addHook('uponSanitizeAttribute', (element, e) => {\n        if (e.attrName === 'style' || e.attrName === 'class') {\n            if (element.tagName === 'SPAN') {\n                if (e.attrName === 'style') {\n                    e.keepAttr = /^(color\\:#[0-9a-fA-F]+;)?(background-color\\:#[0-9a-fA-F]+;)?$/.test(e.attrValue);\n                    return;\n                }\n                else if (e.attrName === 'class') {\n                    e.keepAttr = /^codicon codicon-[a-z\\-]+( codicon-modifier-[a-z\\-]+)?$/.test(e.attrValue);\n                    return;\n                }\n            }\n            e.keepAttr = false;\n            return;\n        }\n    });\n    // build an anchor to map URLs to\n    const anchor = document.createElement('a');\n    // https://github.com/cure53/DOMPurify/blob/main/demos/hooks-scheme-allowlist.html\n    dompurify.addHook('afterSanitizeAttributes', (node) => {\n        // check all href/src attributes for validity\n        for (const attr of ['href', 'src']) {\n            if (node.hasAttribute(attr)) {\n                anchor.href = node.getAttribute(attr);\n                if (!allowedSchemes.includes(anchor.protocol.replace(/:$/, ''))) {\n                    node.removeAttribute(attr);\n                }\n            }\n        }\n    });\n    try {\n        return dompurify.sanitize(renderedMarkdown, Object.assign(Object.assign({}, config), { RETURN_TRUSTED_TYPE: true }));\n    }\n    finally {\n        dompurify.removeHook('uponSanitizeAttribute');\n        dompurify.removeHook('afterSanitizeAttributes');\n    }\n}\nfunction getSanitizerOptions(options) {\n    const allowedSchemes = [\n        Schemas.http,\n        Schemas.https,\n        Schemas.mailto,\n        Schemas.data,\n        Schemas.file,\n        Schemas.vscodeFileResource,\n        Schemas.vscodeRemote,\n        Schemas.vscodeRemoteResource,\n    ];\n    if (options.isTrusted) {\n        allowedSchemes.push(Schemas.command);\n    }\n    return {\n        config: {\n            // allowedTags should included everything that markdown renders to.\n            // Since we have our own sanitize function for marked, it's possible we missed some tag so let dompurify make sure.\n            // HTML tags that can result from markdown are from reading https://spec.commonmark.org/0.29/\n            // HTML table tags that can result from markdown are from https://github.github.com/gfm/#tables-extension-\n            ALLOWED_TAGS: ['ul', 'li', 'p', 'b', 'i', 'code', 'blockquote', 'ol', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'hr', 'em', 'pre', 'table', 'thead', 'tbody', 'tr', 'th', 'td', 'div', 'del', 'a', 'strong', 'br', 'img', 'span'],\n            ALLOWED_ATTR: ['href', 'data-href', 'target', 'title', 'src', 'alt', 'class', 'style', 'data-code', 'width', 'height', 'align'],\n            ALLOW_UNKNOWN_PROTOCOLS: true,\n        },\n        allowedSchemes\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as browser from './browser.js';\nimport { IframeUtils } from './iframe.js';\nimport * as platform from '../common/platform.js';\nexport class StandardMouseEvent {\n    constructor(e) {\n        this.timestamp = Date.now();\n        this.browserEvent = e;\n        this.leftButton = e.button === 0;\n        this.middleButton = e.button === 1;\n        this.rightButton = e.button === 2;\n        this.buttons = e.buttons;\n        this.target = e.target;\n        this.detail = e.detail || 1;\n        if (e.type === 'dblclick') {\n            this.detail = 2;\n        }\n        this.ctrlKey = e.ctrlKey;\n        this.shiftKey = e.shiftKey;\n        this.altKey = e.altKey;\n        this.metaKey = e.metaKey;\n        if (typeof e.pageX === 'number') {\n            this.posx = e.pageX;\n            this.posy = e.pageY;\n        }\n        else {\n            // Probably hit by MSGestureEvent\n            this.posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;\n            this.posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;\n        }\n        // Find the position of the iframe this code is executing in relative to the iframe where the event was captured.\n        let iframeOffsets = IframeUtils.getPositionOfChildWindowRelativeToAncestorWindow(self, e.view);\n        this.posx -= iframeOffsets.left;\n        this.posy -= iframeOffsets.top;\n    }\n    preventDefault() {\n        this.browserEvent.preventDefault();\n    }\n    stopPropagation() {\n        this.browserEvent.stopPropagation();\n    }\n}\nexport class StandardWheelEvent {\n    constructor(e, deltaX = 0, deltaY = 0) {\n        this.browserEvent = e || null;\n        this.target = e ? (e.target || e.targetNode || e.srcElement) : null;\n        this.deltaY = deltaY;\n        this.deltaX = deltaX;\n        if (e) {\n            // Old (deprecated) wheel events\n            let e1 = e;\n            let e2 = e;\n            // vertical delta scroll\n            if (typeof e1.wheelDeltaY !== 'undefined') {\n                this.deltaY = e1.wheelDeltaY / 120;\n            }\n            else if (typeof e2.VERTICAL_AXIS !== 'undefined' && e2.axis === e2.VERTICAL_AXIS) {\n                this.deltaY = -e2.detail / 3;\n            }\n            else if (e.type === 'wheel') {\n                // Modern wheel event\n                // https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n                const ev = e;\n                if (ev.deltaMode === ev.DOM_DELTA_LINE) {\n                    // the deltas are expressed in lines\n                    if (browser.isFirefox && !platform.isMacintosh) {\n                        this.deltaY = -e.deltaY / 3;\n                    }\n                    else {\n                        this.deltaY = -e.deltaY;\n                    }\n                }\n                else {\n                    this.deltaY = -e.deltaY / 40;\n                }\n            }\n            // horizontal delta scroll\n            if (typeof e1.wheelDeltaX !== 'undefined') {\n                if (browser.isSafari && platform.isWindows) {\n                    this.deltaX = -(e1.wheelDeltaX / 120);\n                }\n                else {\n                    this.deltaX = e1.wheelDeltaX / 120;\n                }\n            }\n            else if (typeof e2.HORIZONTAL_AXIS !== 'undefined' && e2.axis === e2.HORIZONTAL_AXIS) {\n                this.deltaX = -e.detail / 3;\n            }\n            else if (e.type === 'wheel') {\n                // Modern wheel event\n                // https://developer.mozilla.org/en-US/docs/Web/API/WheelEvent\n                const ev = e;\n                if (ev.deltaMode === ev.DOM_DELTA_LINE) {\n                    // the deltas are expressed in lines\n                    if (browser.isFirefox && !platform.isMacintosh) {\n                        this.deltaX = -e.deltaX / 3;\n                    }\n                    else {\n                        this.deltaX = -e.deltaX;\n                    }\n                }\n                else {\n                    this.deltaX = -e.deltaX / 40;\n                }\n            }\n            // Assume a vertical scroll if nothing else worked\n            if (this.deltaY === 0 && this.deltaX === 0 && e.wheelDelta) {\n                this.deltaY = e.wheelDelta / 120;\n            }\n        }\n    }\n    preventDefault() {\n        if (this.browserEvent) {\n            this.browserEvent.preventDefault();\n        }\n    }\n    stopPropagation() {\n        if (this.browserEvent) {\n            this.browserEvent.stopPropagation();\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport * as DomUtils from './dom.js';\nimport * as arrays from '../common/arrays.js';\nimport { memoize } from '../common/decorators.js';\nimport { Disposable } from '../common/lifecycle.js';\nexport var EventType;\n(function (EventType) {\n    EventType.Tap = '-monaco-gesturetap';\n    EventType.Change = '-monaco-gesturechange';\n    EventType.Start = '-monaco-gesturestart';\n    EventType.End = '-monaco-gesturesend';\n    EventType.Contextmenu = '-monaco-gesturecontextmenu';\n})(EventType || (EventType = {}));\nexport class Gesture extends Disposable {\n    constructor() {\n        super();\n        this.dispatched = false;\n        this.activeTouches = {};\n        this.handle = null;\n        this.targets = [];\n        this.ignoreTargets = [];\n        this._lastSetTapCountTime = 0;\n        this._register(DomUtils.addDisposableListener(document, 'touchstart', (e) => this.onTouchStart(e), { passive: false }));\n        this._register(DomUtils.addDisposableListener(document, 'touchend', (e) => this.onTouchEnd(e)));\n        this._register(DomUtils.addDisposableListener(document, 'touchmove', (e) => this.onTouchMove(e), { passive: false }));\n    }\n    static addTarget(element) {\n        if (!Gesture.isTouchDevice()) {\n            return Disposable.None;\n        }\n        if (!Gesture.INSTANCE) {\n            Gesture.INSTANCE = new Gesture();\n        }\n        Gesture.INSTANCE.targets.push(element);\n        return {\n            dispose: () => {\n                Gesture.INSTANCE.targets = Gesture.INSTANCE.targets.filter(t => t !== element);\n            }\n        };\n    }\n    static ignoreTarget(element) {\n        if (!Gesture.isTouchDevice()) {\n            return Disposable.None;\n        }\n        if (!Gesture.INSTANCE) {\n            Gesture.INSTANCE = new Gesture();\n        }\n        Gesture.INSTANCE.ignoreTargets.push(element);\n        return {\n            dispose: () => {\n                Gesture.INSTANCE.ignoreTargets = Gesture.INSTANCE.ignoreTargets.filter(t => t !== element);\n            }\n        };\n    }\n    static isTouchDevice() {\n        // `'ontouchstart' in window` always evaluates to true with typescript's modern typings. This causes `window` to be\n        // `never` later in `window.navigator`. That's why we need the explicit `window as Window` cast\n        return 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n    }\n    dispose() {\n        if (this.handle) {\n            this.handle.dispose();\n            this.handle = null;\n        }\n        super.dispose();\n    }\n    onTouchStart(e) {\n        let timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        if (this.handle) {\n            this.handle.dispose();\n            this.handle = null;\n        }\n        for (let i = 0, len = e.targetTouches.length; i < len; i++) {\n            let touch = e.targetTouches.item(i);\n            this.activeTouches[touch.identifier] = {\n                id: touch.identifier,\n                initialTarget: touch.target,\n                initialTimeStamp: timestamp,\n                initialPageX: touch.pageX,\n                initialPageY: touch.pageY,\n                rollingTimestamps: [timestamp],\n                rollingPageX: [touch.pageX],\n                rollingPageY: [touch.pageY]\n            };\n            let evt = this.newGestureEvent(EventType.Start, touch.target);\n            evt.pageX = touch.pageX;\n            evt.pageY = touch.pageY;\n            this.dispatchEvent(evt);\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n    onTouchEnd(e) {\n        let timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        let activeTouchCount = Object.keys(this.activeTouches).length;\n        for (let i = 0, len = e.changedTouches.length; i < len; i++) {\n            let touch = e.changedTouches.item(i);\n            if (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {\n                console.warn('move of an UNKNOWN touch', touch);\n                continue;\n            }\n            let data = this.activeTouches[touch.identifier], holdTime = Date.now() - data.initialTimeStamp;\n            if (holdTime < Gesture.HOLD_DELAY\n                && Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30\n                && Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n                let evt = this.newGestureEvent(EventType.Tap, data.initialTarget);\n                evt.pageX = arrays.tail(data.rollingPageX);\n                evt.pageY = arrays.tail(data.rollingPageY);\n                this.dispatchEvent(evt);\n            }\n            else if (holdTime >= Gesture.HOLD_DELAY\n                && Math.abs(data.initialPageX - arrays.tail(data.rollingPageX)) < 30\n                && Math.abs(data.initialPageY - arrays.tail(data.rollingPageY)) < 30) {\n                let evt = this.newGestureEvent(EventType.Contextmenu, data.initialTarget);\n                evt.pageX = arrays.tail(data.rollingPageX);\n                evt.pageY = arrays.tail(data.rollingPageY);\n                this.dispatchEvent(evt);\n            }\n            else if (activeTouchCount === 1) {\n                let finalX = arrays.tail(data.rollingPageX);\n                let finalY = arrays.tail(data.rollingPageY);\n                let deltaT = arrays.tail(data.rollingTimestamps) - data.rollingTimestamps[0];\n                let deltaX = finalX - data.rollingPageX[0];\n                let deltaY = finalY - data.rollingPageY[0];\n                // We need to get all the dispatch targets on the start of the inertia event\n                const dispatchTo = this.targets.filter(t => data.initialTarget instanceof Node && t.contains(data.initialTarget));\n                this.inertia(dispatchTo, timestamp, // time now\n                Math.abs(deltaX) / deltaT, // speed\n                deltaX > 0 ? 1 : -1, // x direction\n                finalX, // x now\n                Math.abs(deltaY) / deltaT, // y speed\n                deltaY > 0 ? 1 : -1, // y direction\n                finalY // y now\n                );\n            }\n            this.dispatchEvent(this.newGestureEvent(EventType.End, data.initialTarget));\n            // forget about this touch\n            delete this.activeTouches[touch.identifier];\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n    newGestureEvent(type, initialTarget) {\n        let event = document.createEvent('CustomEvent');\n        event.initEvent(type, false, true);\n        event.initialTarget = initialTarget;\n        event.tapCount = 0;\n        return event;\n    }\n    dispatchEvent(event) {\n        if (event.type === EventType.Tap) {\n            const currentTime = (new Date()).getTime();\n            let setTapCount = 0;\n            if (currentTime - this._lastSetTapCountTime > Gesture.CLEAR_TAP_COUNT_TIME) {\n                setTapCount = 1;\n            }\n            else {\n                setTapCount = 2;\n            }\n            this._lastSetTapCountTime = currentTime;\n            event.tapCount = setTapCount;\n        }\n        else if (event.type === EventType.Change || event.type === EventType.Contextmenu) {\n            // tap is canceled by scrolling or context menu\n            this._lastSetTapCountTime = 0;\n        }\n        for (let i = 0; i < this.ignoreTargets.length; i++) {\n            if (event.initialTarget instanceof Node && this.ignoreTargets[i].contains(event.initialTarget)) {\n                return;\n            }\n        }\n        this.targets.forEach(target => {\n            if (event.initialTarget instanceof Node && target.contains(event.initialTarget)) {\n                target.dispatchEvent(event);\n                this.dispatched = true;\n            }\n        });\n    }\n    inertia(dispatchTo, t1, vX, dirX, x, vY, dirY, y) {\n        this.handle = DomUtils.scheduleAtNextAnimationFrame(() => {\n            let now = Date.now();\n            // velocity: old speed + accel_over_time\n            let deltaT = now - t1, delta_pos_x = 0, delta_pos_y = 0, stopped = true;\n            vX += Gesture.SCROLL_FRICTION * deltaT;\n            vY += Gesture.SCROLL_FRICTION * deltaT;\n            if (vX > 0) {\n                stopped = false;\n                delta_pos_x = dirX * vX * deltaT;\n            }\n            if (vY > 0) {\n                stopped = false;\n                delta_pos_y = dirY * vY * deltaT;\n            }\n            // dispatch translation event\n            let evt = this.newGestureEvent(EventType.Change);\n            evt.translationX = delta_pos_x;\n            evt.translationY = delta_pos_y;\n            dispatchTo.forEach(d => d.dispatchEvent(evt));\n            if (!stopped) {\n                this.inertia(dispatchTo, now, vX, dirX, x + delta_pos_x, vY, dirY, y + delta_pos_y);\n            }\n        });\n    }\n    onTouchMove(e) {\n        let timestamp = Date.now(); // use Date.now() because on FF e.timeStamp is not epoch based.\n        for (let i = 0, len = e.changedTouches.length; i < len; i++) {\n            let touch = e.changedTouches.item(i);\n            if (!this.activeTouches.hasOwnProperty(String(touch.identifier))) {\n                console.warn('end of an UNKNOWN touch', touch);\n                continue;\n            }\n            let data = this.activeTouches[touch.identifier];\n            let evt = this.newGestureEvent(EventType.Change, data.initialTarget);\n            evt.translationX = touch.pageX - arrays.tail(data.rollingPageX);\n            evt.translationY = touch.pageY - arrays.tail(data.rollingPageY);\n            evt.pageX = touch.pageX;\n            evt.pageY = touch.pageY;\n            this.dispatchEvent(evt);\n            // only keep a few data points, to average the final speed\n            if (data.rollingPageX.length > 3) {\n                data.rollingPageX.shift();\n                data.rollingPageY.shift();\n                data.rollingTimestamps.shift();\n            }\n            data.rollingPageX.push(touch.pageX);\n            data.rollingPageY.push(touch.pageY);\n            data.rollingTimestamps.push(timestamp);\n        }\n        if (this.dispatched) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.dispatched = false;\n        }\n    }\n}\nGesture.SCROLL_FRICTION = -0.005;\nGesture.HOLD_DELAY = 700;\nGesture.CLEAR_TAP_COUNT_TIME = 400; // ms\n__decorate([\n    memoize\n], Gesture, \"isTouchDevice\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { DataTransfers } from '../../dnd.js';\nimport { $, addDisposableListener, append, EventHelper, EventType } from '../../dom.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { Action, ActionRunner, Separator } from '../../../common/actions.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport * as types from '../../../common/types.js';\nimport './actionbar.css';\nimport * as nls from '../../../../nls.js';\nexport class BaseActionViewItem extends Disposable {\n    constructor(context, action, options = {}) {\n        super();\n        this.options = options;\n        this._context = context || this;\n        this._action = action;\n        if (action instanceof Action) {\n            this._register(action.onDidChange(event => {\n                if (!this.element) {\n                    // we have not been rendered yet, so there\n                    // is no point in updating the UI\n                    return;\n                }\n                this.handleActionChangeEvent(event);\n            }));\n        }\n    }\n    handleActionChangeEvent(event) {\n        if (event.enabled !== undefined) {\n            this.updateEnabled();\n        }\n        if (event.checked !== undefined) {\n            this.updateChecked();\n        }\n        if (event.class !== undefined) {\n            this.updateClass();\n        }\n        if (event.label !== undefined) {\n            this.updateLabel();\n            this.updateTooltip();\n        }\n        if (event.tooltip !== undefined) {\n            this.updateTooltip();\n        }\n    }\n    get actionRunner() {\n        if (!this._actionRunner) {\n            this._actionRunner = this._register(new ActionRunner());\n        }\n        return this._actionRunner;\n    }\n    set actionRunner(actionRunner) {\n        this._actionRunner = actionRunner;\n    }\n    getAction() {\n        return this._action;\n    }\n    isEnabled() {\n        return this._action.enabled;\n    }\n    setActionContext(newContext) {\n        this._context = newContext;\n    }\n    render(container) {\n        const element = this.element = container;\n        this._register(Gesture.addTarget(container));\n        const enableDragging = this.options && this.options.draggable;\n        if (enableDragging) {\n            container.draggable = true;\n            if (isFirefox) {\n                // Firefox: requires to set a text data transfer to get going\n                this._register(addDisposableListener(container, EventType.DRAG_START, e => { var _a; return (_a = e.dataTransfer) === null || _a === void 0 ? void 0 : _a.setData(DataTransfers.TEXT, this._action.label); }));\n            }\n        }\n        this._register(addDisposableListener(element, TouchEventType.Tap, e => this.onClick(e, true))); // Preserve focus on tap #125470\n        this._register(addDisposableListener(element, EventType.MOUSE_DOWN, e => {\n            if (!enableDragging) {\n                EventHelper.stop(e, true); // do not run when dragging is on because that would disable it\n            }\n            if (this._action.enabled && e.button === 0) {\n                element.classList.add('active');\n            }\n        }));\n        if (platform.isMacintosh) {\n            // macOS: allow to trigger the button when holding Ctrl+key and pressing the\n            // main mouse button. This is for scenarios where e.g. some interaction forces\n            // the Ctrl+key to be pressed and hold but the user still wants to interact\n            // with the actions (for example quick access in quick navigation mode).\n            this._register(addDisposableListener(element, EventType.CONTEXT_MENU, e => {\n                if (e.button === 0 && e.ctrlKey === true) {\n                    this.onClick(e);\n                }\n            }));\n        }\n        this._register(addDisposableListener(element, EventType.CLICK, e => {\n            EventHelper.stop(e, true);\n            // menus do not use the click event\n            if (!(this.options && this.options.isMenu)) {\n                this.onClick(e);\n            }\n        }));\n        this._register(addDisposableListener(element, EventType.DBLCLICK, e => {\n            EventHelper.stop(e, true);\n        }));\n        [EventType.MOUSE_UP, EventType.MOUSE_OUT].forEach(event => {\n            this._register(addDisposableListener(element, event, e => {\n                EventHelper.stop(e);\n                element.classList.remove('active');\n            }));\n        });\n    }\n    onClick(event, preserveFocus = false) {\n        var _a;\n        EventHelper.stop(event, true);\n        const context = types.isUndefinedOrNull(this._context) ? ((_a = this.options) === null || _a === void 0 ? void 0 : _a.useEventAsContext) ? event : { preserveFocus } : this._context;\n        this.actionRunner.run(this._action, context);\n    }\n    // Only set the tabIndex on the element once it is about to get focused\n    // That way this element wont be a tab stop when it is not needed #106441\n    focus() {\n        if (this.element) {\n            this.element.tabIndex = 0;\n            this.element.focus();\n            this.element.classList.add('focused');\n        }\n    }\n    blur() {\n        if (this.element) {\n            this.element.blur();\n            this.element.tabIndex = -1;\n            this.element.classList.remove('focused');\n        }\n    }\n    setFocusable(focusable) {\n        if (this.element) {\n            this.element.tabIndex = focusable ? 0 : -1;\n        }\n    }\n    get trapsArrowNavigation() {\n        return false;\n    }\n    updateEnabled() {\n        // implement in subclass\n    }\n    updateLabel() {\n        // implement in subclass\n    }\n    updateTooltip() {\n        // implement in subclass\n    }\n    updateClass() {\n        // implement in subclass\n    }\n    updateChecked() {\n        // implement in subclass\n    }\n    dispose() {\n        if (this.element) {\n            this.element.remove();\n            this.element = undefined;\n        }\n        super.dispose();\n    }\n}\nexport class ActionViewItem extends BaseActionViewItem {\n    constructor(context, action, options = {}) {\n        super(context, action, options);\n        this.options = options;\n        this.options.icon = options.icon !== undefined ? options.icon : false;\n        this.options.label = options.label !== undefined ? options.label : true;\n        this.cssClass = '';\n    }\n    render(container) {\n        super.render(container);\n        if (this.element) {\n            this.label = append(this.element, $('a.action-label'));\n        }\n        if (this.label) {\n            if (this._action.id === Separator.ID) {\n                this.label.setAttribute('role', 'presentation'); // A separator is a presentation item\n            }\n            else {\n                if (this.options.isMenu) {\n                    this.label.setAttribute('role', 'menuitem');\n                }\n                else {\n                    this.label.setAttribute('role', 'button');\n                }\n            }\n        }\n        if (this.options.label && this.options.keybinding && this.element) {\n            append(this.element, $('span.keybinding')).textContent = this.options.keybinding;\n        }\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n    }\n    // Only set the tabIndex on the element once it is about to get focused\n    // That way this element wont be a tab stop when it is not needed #106441\n    focus() {\n        if (this.label) {\n            this.label.tabIndex = 0;\n            this.label.focus();\n        }\n    }\n    blur() {\n        if (this.label) {\n            this.label.tabIndex = -1;\n        }\n    }\n    setFocusable(focusable) {\n        if (this.label) {\n            this.label.tabIndex = focusable ? 0 : -1;\n        }\n    }\n    updateLabel() {\n        if (this.options.label && this.label) {\n            this.label.textContent = this.getAction().label;\n        }\n    }\n    updateTooltip() {\n        let title = null;\n        if (this.getAction().tooltip) {\n            title = this.getAction().tooltip;\n        }\n        else if (!this.options.label && this.getAction().label && this.options.icon) {\n            title = this.getAction().label;\n            if (this.options.keybinding) {\n                title = nls.localize({ key: 'titleLabel', comment: ['action title', 'action keybinding'] }, \"{0} ({1})\", title, this.options.keybinding);\n            }\n        }\n        if (title && this.label) {\n            this.label.title = title;\n        }\n    }\n    updateClass() {\n        if (this.cssClass && this.label) {\n            this.label.classList.remove(...this.cssClass.split(' '));\n        }\n        if (this.options.icon) {\n            this.cssClass = this.getAction().class;\n            if (this.label) {\n                this.label.classList.add('codicon');\n                if (this.cssClass) {\n                    this.label.classList.add(...this.cssClass.split(' '));\n                }\n            }\n            this.updateEnabled();\n        }\n        else {\n            if (this.label) {\n                this.label.classList.remove('codicon');\n            }\n        }\n    }\n    updateEnabled() {\n        if (this.getAction().enabled) {\n            if (this.label) {\n                this.label.removeAttribute('aria-disabled');\n                this.label.classList.remove('disabled');\n            }\n            if (this.element) {\n                this.element.classList.remove('disabled');\n            }\n        }\n        else {\n            if (this.label) {\n                this.label.setAttribute('aria-disabled', 'true');\n                this.label.classList.add('disabled');\n            }\n            if (this.element) {\n                this.element.classList.add('disabled');\n            }\n        }\n    }\n    updateChecked() {\n        if (this.label) {\n            if (this.getAction().checked) {\n                this.label.classList.add('checked');\n            }\n            else {\n                this.label.classList.remove('checked');\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as DOM from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { ActionViewItem, BaseActionViewItem } from './actionViewItems.js';\nimport { ActionRunner } from '../../../common/actions.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable, dispose } from '../../../common/lifecycle.js';\nimport * as types from '../../../common/types.js';\nimport './actionbar.css';\nexport class ActionBar extends Disposable {\n    constructor(container, options = {}) {\n        var _a, _b, _c, _d, _e, _f;\n        super();\n        // Trigger Key Tracking\n        this.triggerKeyDown = false;\n        this.focusable = true;\n        this._onDidBlur = this._register(new Emitter());\n        this.onDidBlur = this._onDidBlur.event;\n        this._onDidCancel = this._register(new Emitter({ onFirstListenerAdd: () => this.cancelHasListener = true }));\n        this.onDidCancel = this._onDidCancel.event;\n        this.cancelHasListener = false;\n        this._onDidRun = this._register(new Emitter());\n        this.onDidRun = this._onDidRun.event;\n        this._onBeforeRun = this._register(new Emitter());\n        this.onBeforeRun = this._onBeforeRun.event;\n        this.options = options;\n        this._context = (_a = options.context) !== null && _a !== void 0 ? _a : null;\n        this._orientation = (_b = this.options.orientation) !== null && _b !== void 0 ? _b : 0 /* HORIZONTAL */;\n        this._triggerKeys = {\n            keyDown: (_d = (_c = this.options.triggerKeys) === null || _c === void 0 ? void 0 : _c.keyDown) !== null && _d !== void 0 ? _d : false,\n            keys: (_f = (_e = this.options.triggerKeys) === null || _e === void 0 ? void 0 : _e.keys) !== null && _f !== void 0 ? _f : [3 /* Enter */, 10 /* Space */]\n        };\n        if (this.options.actionRunner) {\n            this._actionRunner = this.options.actionRunner;\n        }\n        else {\n            this._actionRunner = new ActionRunner();\n            this._register(this._actionRunner);\n        }\n        this._register(this._actionRunner.onDidRun(e => this._onDidRun.fire(e)));\n        this._register(this._actionRunner.onBeforeRun(e => this._onBeforeRun.fire(e)));\n        this._actionIds = [];\n        this.viewItems = [];\n        this.focusedItem = undefined;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'monaco-action-bar';\n        if (options.animated !== false) {\n            this.domNode.classList.add('animated');\n        }\n        let previousKeys;\n        let nextKeys;\n        switch (this._orientation) {\n            case 0 /* HORIZONTAL */:\n                previousKeys = [15 /* LeftArrow */];\n                nextKeys = [17 /* RightArrow */];\n                break;\n            case 1 /* VERTICAL */:\n                previousKeys = [16 /* UpArrow */];\n                nextKeys = [18 /* DownArrow */];\n                this.domNode.className += ' vertical';\n                break;\n        }\n        this._register(DOM.addDisposableListener(this.domNode, DOM.EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            let eventHandled = true;\n            const focusedItem = typeof this.focusedItem === 'number' ? this.viewItems[this.focusedItem] : undefined;\n            if (previousKeys && (event.equals(previousKeys[0]) || event.equals(previousKeys[1]))) {\n                eventHandled = this.focusPrevious();\n            }\n            else if (nextKeys && (event.equals(nextKeys[0]) || event.equals(nextKeys[1]))) {\n                eventHandled = this.focusNext();\n            }\n            else if (event.equals(9 /* Escape */) && this.cancelHasListener) {\n                this._onDidCancel.fire();\n            }\n            else if (event.equals(14 /* Home */)) {\n                eventHandled = this.focusFirst();\n            }\n            else if (event.equals(13 /* End */)) {\n                eventHandled = this.focusLast();\n            }\n            else if (event.equals(2 /* Tab */) && focusedItem instanceof BaseActionViewItem && focusedItem.trapsArrowNavigation) {\n                eventHandled = this.focusNext();\n            }\n            else if (this.isTriggerKeyEvent(event)) {\n                // Staying out of the else branch even if not triggered\n                if (this._triggerKeys.keyDown) {\n                    this.doTrigger(event);\n                }\n                else {\n                    this.triggerKeyDown = true;\n                }\n            }\n            else {\n                eventHandled = false;\n            }\n            if (eventHandled) {\n                event.preventDefault();\n                event.stopPropagation();\n            }\n        }));\n        this._register(DOM.addDisposableListener(this.domNode, DOM.EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            // Run action on Enter/Space\n            if (this.isTriggerKeyEvent(event)) {\n                if (!this._triggerKeys.keyDown && this.triggerKeyDown) {\n                    this.triggerKeyDown = false;\n                    this.doTrigger(event);\n                }\n                event.preventDefault();\n                event.stopPropagation();\n            }\n            // Recompute focused item\n            else if (event.equals(2 /* Tab */) || event.equals(1024 /* Shift */ | 2 /* Tab */)) {\n                this.updateFocusedItem();\n            }\n        }));\n        this.focusTracker = this._register(DOM.trackFocus(this.domNode));\n        this._register(this.focusTracker.onDidBlur(() => {\n            if (DOM.getActiveElement() === this.domNode || !DOM.isAncestor(DOM.getActiveElement(), this.domNode)) {\n                this._onDidBlur.fire();\n                this.focusedItem = undefined;\n                this.previouslyFocusedItem = undefined;\n                this.triggerKeyDown = false;\n            }\n        }));\n        this._register(this.focusTracker.onDidFocus(() => this.updateFocusedItem()));\n        this.actionsList = document.createElement('ul');\n        this.actionsList.className = 'actions-container';\n        this.actionsList.setAttribute('role', 'toolbar');\n        if (this.options.ariaLabel) {\n            this.actionsList.setAttribute('aria-label', this.options.ariaLabel);\n        }\n        this.domNode.appendChild(this.actionsList);\n        container.appendChild(this.domNode);\n    }\n    refreshRole() {\n        if (this.length() >= 2) {\n            this.actionsList.setAttribute('role', 'toolbar');\n        }\n        else {\n            this.actionsList.setAttribute('role', 'presentation');\n        }\n    }\n    // Some action bars should not be focusable at times\n    // When an action bar is not focusable make sure to make all the elements inside it not focusable\n    // When an action bar is focusable again, make sure the first item can be focused\n    setFocusable(focusable) {\n        this.focusable = focusable;\n        if (this.focusable) {\n            const firstEnabled = this.viewItems.find(vi => vi instanceof BaseActionViewItem && vi.isEnabled());\n            if (firstEnabled instanceof BaseActionViewItem) {\n                firstEnabled.setFocusable(true);\n            }\n        }\n        else {\n            this.viewItems.forEach(vi => {\n                if (vi instanceof BaseActionViewItem) {\n                    vi.setFocusable(false);\n                }\n            });\n        }\n    }\n    isTriggerKeyEvent(event) {\n        let ret = false;\n        this._triggerKeys.keys.forEach(keyCode => {\n            ret = ret || event.equals(keyCode);\n        });\n        return ret;\n    }\n    updateFocusedItem() {\n        for (let i = 0; i < this.actionsList.children.length; i++) {\n            const elem = this.actionsList.children[i];\n            if (DOM.isAncestor(DOM.getActiveElement(), elem)) {\n                this.focusedItem = i;\n                break;\n            }\n        }\n    }\n    get context() {\n        return this._context;\n    }\n    set context(context) {\n        this._context = context;\n        this.viewItems.forEach(i => i.setActionContext(context));\n    }\n    get actionRunner() {\n        return this._actionRunner;\n    }\n    set actionRunner(actionRunner) {\n        if (actionRunner) {\n            this._actionRunner = actionRunner;\n            this.viewItems.forEach(item => item.actionRunner = actionRunner);\n        }\n    }\n    getContainer() {\n        return this.domNode;\n    }\n    push(arg, options = {}) {\n        const actions = Array.isArray(arg) ? arg : [arg];\n        let index = types.isNumber(options.index) ? options.index : null;\n        actions.forEach((action) => {\n            const actionViewItemElement = document.createElement('li');\n            actionViewItemElement.className = 'action-item';\n            actionViewItemElement.setAttribute('role', 'presentation');\n            // Prevent native context menu on actions\n            if (!this.options.allowContextMenu) {\n                this._register(DOM.addDisposableListener(actionViewItemElement, DOM.EventType.CONTEXT_MENU, (e) => {\n                    DOM.EventHelper.stop(e, true);\n                }));\n            }\n            let item;\n            if (this.options.actionViewItemProvider) {\n                item = this.options.actionViewItemProvider(action);\n            }\n            if (!item) {\n                item = new ActionViewItem(this.context, action, options);\n            }\n            item.actionRunner = this._actionRunner;\n            item.setActionContext(this.context);\n            item.render(actionViewItemElement);\n            if (this.focusable && item instanceof BaseActionViewItem && this.viewItems.length === 0) {\n                // We need to allow for the first enabled item to be focused on using tab navigation #106441\n                item.setFocusable(true);\n            }\n            if (index === null || index < 0 || index >= this.actionsList.children.length) {\n                this.actionsList.appendChild(actionViewItemElement);\n                this.viewItems.push(item);\n                this._actionIds.push(action.id);\n            }\n            else {\n                this.actionsList.insertBefore(actionViewItemElement, this.actionsList.children[index]);\n                this.viewItems.splice(index, 0, item);\n                this._actionIds.splice(index, 0, action.id);\n                index++;\n            }\n        });\n        if (typeof this.focusedItem === 'number') {\n            // After a clear actions might be re-added to simply toggle some actions. We should preserve focus #97128\n            this.focus(this.focusedItem);\n        }\n        this.refreshRole();\n    }\n    clear() {\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this._actionIds = [];\n        DOM.clearNode(this.actionsList);\n        this.refreshRole();\n    }\n    length() {\n        return this.viewItems.length;\n    }\n    focus(arg) {\n        let selectFirst = false;\n        let index = undefined;\n        if (arg === undefined) {\n            selectFirst = true;\n        }\n        else if (typeof arg === 'number') {\n            index = arg;\n        }\n        else if (typeof arg === 'boolean') {\n            selectFirst = arg;\n        }\n        if (selectFirst && typeof this.focusedItem === 'undefined') {\n            const firstEnabled = this.viewItems.findIndex(item => item.isEnabled());\n            // Focus the first enabled item\n            this.focusedItem = firstEnabled === -1 ? undefined : firstEnabled;\n            this.updateFocus(undefined, undefined, true);\n        }\n        else {\n            if (index !== undefined) {\n                this.focusedItem = index;\n            }\n            this.updateFocus(undefined, undefined, true);\n        }\n    }\n    focusFirst() {\n        this.focusedItem = this.length() - 1;\n        return this.focusNext(true);\n    }\n    focusLast() {\n        this.focusedItem = 0;\n        return this.focusPrevious(true);\n    }\n    focusNext(forceLoop) {\n        if (typeof this.focusedItem === 'undefined') {\n            this.focusedItem = this.viewItems.length - 1;\n        }\n        else if (this.viewItems.length <= 1) {\n            return false;\n        }\n        const startIndex = this.focusedItem;\n        let item;\n        do {\n            if (!forceLoop && this.options.preventLoopNavigation && this.focusedItem + 1 >= this.viewItems.length) {\n                this.focusedItem = startIndex;\n                return false;\n            }\n            this.focusedItem = (this.focusedItem + 1) % this.viewItems.length;\n            item = this.viewItems[this.focusedItem];\n        } while (this.focusedItem !== startIndex && this.options.focusOnlyEnabledItems && !item.isEnabled());\n        this.updateFocus();\n        return true;\n    }\n    focusPrevious(forceLoop) {\n        if (typeof this.focusedItem === 'undefined') {\n            this.focusedItem = 0;\n        }\n        else if (this.viewItems.length <= 1) {\n            return false;\n        }\n        const startIndex = this.focusedItem;\n        let item;\n        do {\n            this.focusedItem = this.focusedItem - 1;\n            if (this.focusedItem < 0) {\n                if (!forceLoop && this.options.preventLoopNavigation) {\n                    this.focusedItem = startIndex;\n                    return false;\n                }\n                this.focusedItem = this.viewItems.length - 1;\n            }\n            item = this.viewItems[this.focusedItem];\n        } while (this.focusedItem !== startIndex && this.options.focusOnlyEnabledItems && !item.isEnabled());\n        this.updateFocus(true);\n        return true;\n    }\n    updateFocus(fromRight, preventScroll, forceFocus = false) {\n        var _a;\n        if (typeof this.focusedItem === 'undefined') {\n            this.actionsList.focus({ preventScroll });\n        }\n        if (this.previouslyFocusedItem !== undefined && this.previouslyFocusedItem !== this.focusedItem) {\n            (_a = this.viewItems[this.previouslyFocusedItem]) === null || _a === void 0 ? void 0 : _a.blur();\n        }\n        const actionViewItem = this.focusedItem !== undefined && this.viewItems[this.focusedItem];\n        if (actionViewItem) {\n            let focusItem = true;\n            if (!types.isFunction(actionViewItem.focus)) {\n                focusItem = false;\n            }\n            if (this.options.focusOnlyEnabledItems && types.isFunction(actionViewItem.isEnabled) && !actionViewItem.isEnabled()) {\n                focusItem = false;\n            }\n            if (!focusItem) {\n                this.actionsList.focus({ preventScroll });\n                this.previouslyFocusedItem = undefined;\n            }\n            else if (forceFocus || this.previouslyFocusedItem !== this.focusedItem) {\n                actionViewItem.focus(fromRight);\n                this.previouslyFocusedItem = this.focusedItem;\n            }\n        }\n    }\n    doTrigger(event) {\n        if (typeof this.focusedItem === 'undefined') {\n            return; //nothing to focus\n        }\n        // trigger action\n        const actionViewItem = this.viewItems[this.focusedItem];\n        if (actionViewItem instanceof BaseActionViewItem) {\n            const context = (actionViewItem._context === null || actionViewItem._context === undefined) ? event : actionViewItem._context;\n            this.run(actionViewItem._action, context);\n        }\n    }\n    run(action, context) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._actionRunner.run(action, context);\n        });\n    }\n    dispose() {\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this._actionIds = [];\n        this.getContainer().remove();\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './aria.css';\n// Use a max length since we are inserting the whole msg in the DOM and that can cause browsers to freeze for long messages #94233\nconst MAX_MESSAGE_LENGTH = 20000;\nlet ariaContainer;\nlet alertContainer;\nlet alertContainer2;\nlet statusContainer;\nlet statusContainer2;\nexport function setARIAContainer(parent) {\n    ariaContainer = document.createElement('div');\n    ariaContainer.className = 'monaco-aria-container';\n    const createAlertContainer = () => {\n        const element = document.createElement('div');\n        element.className = 'monaco-alert';\n        element.setAttribute('role', 'alert');\n        element.setAttribute('aria-atomic', 'true');\n        ariaContainer.appendChild(element);\n        return element;\n    };\n    alertContainer = createAlertContainer();\n    alertContainer2 = createAlertContainer();\n    const createStatusContainer = () => {\n        const element = document.createElement('div');\n        element.className = 'monaco-status';\n        element.setAttribute('role', 'complementary');\n        element.setAttribute('aria-live', 'polite');\n        element.setAttribute('aria-atomic', 'true');\n        ariaContainer.appendChild(element);\n        return element;\n    };\n    statusContainer = createStatusContainer();\n    statusContainer2 = createStatusContainer();\n    parent.appendChild(ariaContainer);\n}\n/**\n * Given the provided message, will make sure that it is read as alert to screen readers.\n */\nexport function alert(msg) {\n    if (!ariaContainer) {\n        return;\n    }\n    // Use alternate containers such that duplicated messages get read out by screen readers #99466\n    if (alertContainer.textContent !== msg) {\n        dom.clearNode(alertContainer2);\n        insertMessage(alertContainer, msg);\n    }\n    else {\n        dom.clearNode(alertContainer);\n        insertMessage(alertContainer2, msg);\n    }\n}\n/**\n * Given the provided message, will make sure that it is read as status to screen readers.\n */\nexport function status(msg) {\n    if (!ariaContainer) {\n        return;\n    }\n    if (isMacintosh) {\n        alert(msg); // VoiceOver does not seem to support status role\n    }\n    else {\n        if (statusContainer.textContent !== msg) {\n            dom.clearNode(statusContainer2);\n            insertMessage(statusContainer, msg);\n        }\n        else {\n            dom.clearNode(statusContainer);\n            insertMessage(statusContainer2, msg);\n        }\n    }\n}\nfunction insertMessage(target, msg) {\n    dom.clearNode(target);\n    if (msg.length > MAX_MESSAGE_LENGTH) {\n        msg = msg.substr(0, MAX_MESSAGE_LENGTH);\n    }\n    target.textContent = msg;\n    // See https://www.paciellogroup.com/blog/2012/06/html5-accessibility-chops-aria-rolealert-browser-support/\n    target.style.visibility = 'hidden';\n    target.style.visibility = 'visible';\n}\n","import { addDisposableListener, EventHelper, EventType, reset, trackFocus } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { renderLabelWithIcons } from '../iconLabel/iconLabels.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { mixin } from '../../../common/objects.js';\nimport './button.css';\nconst defaultOptions = {\n    buttonBackground: Color.fromHex('#0E639C'),\n    buttonHoverBackground: Color.fromHex('#006BB3'),\n    buttonForeground: Color.white\n};\nexport class Button extends Disposable {\n    constructor(container, options) {\n        super();\n        this._onDidClick = this._register(new Emitter());\n        this.options = options || Object.create(null);\n        mixin(this.options, defaultOptions, false);\n        this.buttonForeground = this.options.buttonForeground;\n        this.buttonBackground = this.options.buttonBackground;\n        this.buttonHoverBackground = this.options.buttonHoverBackground;\n        this.buttonSecondaryForeground = this.options.buttonSecondaryForeground;\n        this.buttonSecondaryBackground = this.options.buttonSecondaryBackground;\n        this.buttonSecondaryHoverBackground = this.options.buttonSecondaryHoverBackground;\n        this.buttonBorder = this.options.buttonBorder;\n        this._element = document.createElement('a');\n        this._element.classList.add('monaco-button');\n        this._element.tabIndex = 0;\n        this._element.setAttribute('role', 'button');\n        container.appendChild(this._element);\n        this._register(Gesture.addTarget(this._element));\n        [EventType.CLICK, TouchEventType.Tap].forEach(eventType => {\n            this._register(addDisposableListener(this._element, eventType, e => {\n                if (!this.enabled) {\n                    EventHelper.stop(e);\n                    return;\n                }\n                this._onDidClick.fire(e);\n            }));\n        });\n        this._register(addDisposableListener(this._element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            let eventHandled = false;\n            if (this.enabled && (event.equals(3 /* Enter */) || event.equals(10 /* Space */))) {\n                this._onDidClick.fire(e);\n                eventHandled = true;\n            }\n            else if (event.equals(9 /* Escape */)) {\n                this._element.blur();\n                eventHandled = true;\n            }\n            if (eventHandled) {\n                EventHelper.stop(event, true);\n            }\n        }));\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OVER, e => {\n            if (!this._element.classList.contains('disabled')) {\n                this.setHoverBackground();\n            }\n        }));\n        this._register(addDisposableListener(this._element, EventType.MOUSE_OUT, e => {\n            this.applyStyles(); // restore standard styles\n        }));\n        // Also set hover background when button is focused for feedback\n        this.focusTracker = this._register(trackFocus(this._element));\n        this._register(this.focusTracker.onDidFocus(() => this.setHoverBackground()));\n        this._register(this.focusTracker.onDidBlur(() => this.applyStyles())); // restore standard styles\n        this.applyStyles();\n    }\n    get onDidClick() { return this._onDidClick.event; }\n    setHoverBackground() {\n        let hoverBackground;\n        if (this.options.secondary) {\n            hoverBackground = this.buttonSecondaryHoverBackground ? this.buttonSecondaryHoverBackground.toString() : null;\n        }\n        else {\n            hoverBackground = this.buttonHoverBackground ? this.buttonHoverBackground.toString() : null;\n        }\n        if (hoverBackground) {\n            this._element.style.backgroundColor = hoverBackground;\n        }\n    }\n    style(styles) {\n        this.buttonForeground = styles.buttonForeground;\n        this.buttonBackground = styles.buttonBackground;\n        this.buttonHoverBackground = styles.buttonHoverBackground;\n        this.buttonSecondaryForeground = styles.buttonSecondaryForeground;\n        this.buttonSecondaryBackground = styles.buttonSecondaryBackground;\n        this.buttonSecondaryHoverBackground = styles.buttonSecondaryHoverBackground;\n        this.buttonBorder = styles.buttonBorder;\n        this.applyStyles();\n    }\n    applyStyles() {\n        if (this._element) {\n            let background, foreground;\n            if (this.options.secondary) {\n                foreground = this.buttonSecondaryForeground ? this.buttonSecondaryForeground.toString() : '';\n                background = this.buttonSecondaryBackground ? this.buttonSecondaryBackground.toString() : '';\n            }\n            else {\n                foreground = this.buttonForeground ? this.buttonForeground.toString() : '';\n                background = this.buttonBackground ? this.buttonBackground.toString() : '';\n            }\n            const border = this.buttonBorder ? this.buttonBorder.toString() : '';\n            this._element.style.color = foreground;\n            this._element.style.backgroundColor = background;\n            this._element.style.borderWidth = border ? '1px' : '';\n            this._element.style.borderStyle = border ? 'solid' : '';\n            this._element.style.borderColor = border;\n        }\n    }\n    get element() {\n        return this._element;\n    }\n    set label(value) {\n        this._element.classList.add('monaco-text-button');\n        if (this.options.supportIcons) {\n            reset(this._element, ...renderLabelWithIcons(value));\n        }\n        else {\n            this._element.textContent = value;\n        }\n        if (typeof this.options.title === 'string') {\n            this._element.title = this.options.title;\n        }\n        else if (this.options.title) {\n            this._element.title = value;\n        }\n    }\n    set enabled(value) {\n        if (value) {\n            this._element.classList.remove('disabled');\n            this._element.setAttribute('aria-disabled', String(false));\n            this._element.tabIndex = 0;\n        }\n        else {\n            this._element.classList.add('disabled');\n            this._element.setAttribute('aria-disabled', String(true));\n        }\n    }\n    get enabled() {\n        return !this._element.classList.contains('disabled');\n    }\n}\n"],"names":["FastDomNode","domNode","this","_maxWidth","_width","_height","_top","_left","_bottom","_right","_fontFamily","_fontWeight","_fontSize","_fontStyle","_fontFeatureSettings","_textDecoration","_lineHeight","_letterSpacing","_className","_display","_position","_visibility","_color","_backgroundColor","_layerHint","_contain","_boxShadow","maxWidth","style","width","height","top","left","bottom","right","fontFamily","fontWeight","fontSize","fontStyle","fontFeatureSettings","textDecoration","lineHeight","letterSpacing","className","shouldHaveIt","classList","toggle","display","position","visibility","color","backgroundColor","layerHint","transform","boxShadow","contain","name","value","setAttribute","removeAttribute","child","appendChild","removeChild","createFastDomNode","renderText","text","options","element","createElement","textContent","renderFormattedText","formattedText","_renderFormattedText","parseFormattedText","renderCodeSegments","actionHandler","tagName","inline","document","StringStream","source","index","length","next","peek","advance","treeNode","type","createTextNode","content","a","disposables","add","DOM","event","callback","String","Array","isArray","children","forEach","nodeChild","parseCodeSegments","root","actionViewItemIndex","current","stack","stream","eos","isEscapedFormatType","formatTagType","pop","push","textCurrent","newCurrent","char","supportCodeSegments","standardMouseMoveMerger","lastEvent","currentEvent","ev","StandardMouseEvent","preventDefault","leftButton","buttons","posx","posy","GlobalMouseMoveMonitor","_hooks","DisposableStore","_mouseMoveEventMerger","_mouseMoveCallback","_onStopCallback","stopMonitoring","dispose","invokeStopCallback","browserEvent","isMonitoring","clear","onStopCallback","initialElement","initialButtons","mouseMoveEventMerger","mouseMoveCallback","windowChain","IframeUtils","mouseMove","isIOS","listenTo","map","window","shadowRoot","dom","unshift","data","e","lastSameOriginAncestor","target","toLowerCase","body","hasDifferentOriginAncestorFlag","sameOriginWindowChainCache","getParentWindowIfSameOrigin","w","parent","location","parentLocation","origin","iframeElement","frameElement","slice","getSameOriginWindowChain","childWindow","ancestorWindow","windowChainEl","scrollY","scrollX","boundingRect","getBoundingClientRect","ctrlKeyMod","platform","metaKeyMod","StandardKeyboardEvent","_standardKeyboardEventBrand","ctrlKey","shiftKey","altKey","metaKey","keyCode","charCode","fromCharCode","toUpperCase","KeyCodeUtils","browser","EVENT_KEY_CODE_MAP","extractKeyCode","code","_asKeybinding","_computeKeybinding","_asRuntimeKeybinding","_computeRuntimeKeybinding","stopPropagation","other","key","result","SimpleKeybinding","renderMarkdown","markdown","_a","signalInnerHTML","markedOptions","isDisposed","cts","CancellationTokenSource","_uriMassage","part","parse","decodeURIComponent","cloneAndChange","uris","URI","encodeURIComponent","JSON","stringify","_href","href","isDomUri","uri","startsWith","Schemas","FileAccess","toString","query","with","withInnerHTML","Promise","c","renderer","marked","image","title","dimensions","attributes","parseHrefAndDimensions","concat","join","link","removeMarkdownEscapes","baseUri","resolveWithBaseUri","test","isTrusted","replace","paragraph","codeBlockRenderer","lang","id","defaultGenerator","raceCancellation","all","token","then","values","span","querySelector","asyncRenderCallback","call","catch","escape","onClick","DomEmitter","onAuxClick","Event","mouseEvent","middleButton","parentElement","dataset","err","onUnexpectedError","supportHtml","sanitizer","html","match","undefined","sanitize","silent","substr","supportThemeIcons","markdownEscapeEscapedIcons","renderedMarkdown","elements","renderLabelWithIcons","outerHTML","htmlParser","DOMParser","markdownHtmlDoc","parseFromString","sanitizeRenderedMarkdown","querySelectorAll","img","src","getAttribute","innerHTML","getElementsByTagName","listener","cancel","path","endsWith","resolvePath","dirname","allowedSchemes","config","ALLOWED_TAGS","ALLOWED_ATTR","ALLOW_UNKNOWN_PROTOCOLS","getSanitizerOptions","dompurify","attrName","keepAttr","attrValue","anchor","node","attr","hasAttribute","includes","protocol","Object","assign","RETURN_TRUSTED_TYPE","timestamp","Date","now","button","rightButton","detail","pageX","pageY","clientX","scrollLeft","documentElement","clientY","scrollTop","iframeOffsets","self","view","StandardWheelEvent","deltaX","deltaY","targetNode","srcElement","e1","e2","wheelDeltaY","VERTICAL_AXIS","axis","deltaMode","DOM_DELTA_LINE","wheelDeltaX","HORIZONTAL_AXIS","wheelDelta","EventType","__decorate","decorators","desc","d","arguments","r","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","Tap","Change","Start","End","Contextmenu","Gesture","dispatched","activeTouches","handle","targets","ignoreTargets","_lastSetTapCountTime","_register","DomUtils","onTouchStart","passive","onTouchEnd","onTouchMove","len","targetTouches","touch","item","identifier","initialTarget","initialTimeStamp","initialPageX","initialPageY","rollingTimestamps","rollingPageX","rollingPageY","evt","newGestureEvent","dispatchEvent","activeTouchCount","keys","changedTouches","hasOwnProperty","console","warn","holdTime","HOLD_DELAY","Math","abs","arrays","finalX","finalY","deltaT","dispatchTo","filter","t","Node","contains","inertia","createEvent","initEvent","tapCount","currentTime","getTime","setTapCount","CLEAR_TAP_COUNT_TIME","t1","vX","dirX","x","vY","dirY","y","delta_pos_x","delta_pos_y","stopped","SCROLL_FRICTION","translationX","translationY","shift","isTouchDevice","INSTANCE","Disposable","navigator","maxTouchPoints","memoize","BaseActionViewItem","context","action","_context","_action","Action","onDidChange","handleActionChangeEvent","enabled","updateEnabled","checked","updateChecked","class","updateClass","label","updateLabel","updateTooltip","tooltip","_actionRunner","ActionRunner","actionRunner","newContext","container","enableDragging","draggable","isFirefox","addDisposableListener","dataTransfer","setData","DataTransfers","TouchEventType","EventHelper","isMenu","remove","preserveFocus","types","useEventAsContext","run","tabIndex","focus","blur","focusable","ActionViewItem","icon","cssClass","append","$","Separator","keybinding","getAction","nls","comment","split","__awaiter","thisArg","_arguments","P","generator","resolve","reject","fulfilled","step","rejected","done","apply","ActionBar","_b","_c","_d","_e","_f","previousKeys","nextKeys","triggerKeyDown","_onDidBlur","Emitter","onDidBlur","_onDidCancel","onFirstListenerAdd","cancelHasListener","onDidCancel","_onDidRun","onDidRun","_onBeforeRun","onBeforeRun","_orientation","orientation","_triggerKeys","keyDown","triggerKeys","fire","_actionIds","viewItems","focusedItem","animated","eventHandled","equals","focusPrevious","focusNext","focusFirst","focusLast","trapsArrowNavigation","isTriggerKeyEvent","doTrigger","updateFocusedItem","focusTracker","previouslyFocusedItem","onDidFocus","actionsList","ariaLabel","firstEnabled","find","vi","isEnabled","setFocusable","ret","elem","setActionContext","arg","actions","actionViewItemElement","allowContextMenu","actionViewItemProvider","render","insertBefore","splice","refreshRole","selectFirst","findIndex","updateFocus","forceLoop","startIndex","preventLoopNavigation","focusOnlyEnabledItems","fromRight","preventScroll","forceFocus","actionViewItem","focusItem","getContainer","ariaContainer","alertContainer","alertContainer2","statusContainer","statusContainer2","setARIAContainer","createAlertContainer","createStatusContainer","alert","msg","clearNode","insertMessage","status","isMacintosh","defaultOptions","buttonBackground","Color","buttonHoverBackground","buttonForeground","Button","_onDidClick","create","mixin","buttonSecondaryForeground","buttonSecondaryBackground","buttonSecondaryHoverBackground","buttonBorder","_element","eventType","setHoverBackground","applyStyles","trackFocus","hoverBackground","secondary","styles","background","foreground","border","borderWidth","borderStyle","borderColor","supportIcons","reset"],"sourceRoot":""}