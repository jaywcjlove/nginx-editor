{"version":3,"file":"static/js/monaco-editor-vendor.e8a66816.c1bd6347.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/commandsQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/editorNavigationQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoLineQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/renameInputField.js","../node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/rename.js","../node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/bracketSelections.js","../node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/wordSelections.js","../node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/smartSelect.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetController2.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetParser.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetVariables.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetSession.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/resizable.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { stripIcons } from '../../../../base/common/iconLabels.js';\nimport { AbstractCommandsQuickAccessProvider } from '../../../../platform/quickinput/browser/commandsQuickAccess.js';\nexport class AbstractEditorCommandsQuickAccessProvider extends AbstractCommandsQuickAccessProvider {\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n        super(options, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n    }\n    getCodeEditorCommandPicks() {\n        const activeTextEditorControl = this.activeTextEditorControl;\n        if (!activeTextEditorControl) {\n            return [];\n        }\n        const editorCommandPicks = [];\n        for (const editorAction of activeTextEditorControl.getSupportedActions()) {\n            editorCommandPicks.push({\n                commandId: editorAction.id,\n                commandAlias: editorAction.alias,\n                label: stripIcons(editorAction.label) || editorAction.id,\n            });\n        }\n        return editorCommandPicks;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { once } from '../../../../base/common/functional.js';\nimport { DisposableStore, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../../base/common/types.js';\nimport { getCodeEditor, isDiffEditor } from '../../../browser/editorBrowser.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\n/**\n * A reusable quick access provider for the editor with support\n * for adding decorations for navigating in the currently active file\n * (for example \"Go to line\", \"Go to symbol\").\n */\nexport class AbstractEditorNavigationQuickAccessProvider {\n    constructor(options) {\n        this.options = options;\n        //#endregion\n        //#region Decorations Utils\n        this.rangeHighlightDecorationId = undefined;\n    }\n    //#region Provider methods\n    provide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // Apply options if any\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\n        // Disable filtering & sorting, we control the results\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n        // Provide based on current active editor\n        const pickerDisposable = disposables.add(new MutableDisposable());\n        pickerDisposable.value = this.doProvide(picker, token);\n        // Re-create whenever the active editor changes\n        disposables.add(this.onDidActiveTextEditorControlChange(() => {\n            // Clear old\n            pickerDisposable.value = undefined;\n            // Add new\n            pickerDisposable.value = this.doProvide(picker, token);\n        }));\n        return disposables;\n    }\n    doProvide(picker, token) {\n        const disposables = new DisposableStore();\n        // With text control\n        const editor = this.activeTextEditorControl;\n        if (editor && this.canProvideWithTextEditor(editor)) {\n            const context = { editor };\n            // Restore any view state if this picker was closed\n            // without actually going to a line\n            const codeEditor = getCodeEditor(editor);\n            if (codeEditor) {\n                // Remember view state and update it when the cursor position\n                // changes even later because it could be that the user has\n                // configured quick access to remain open when focus is lost and\n                // we always want to restore the current location.\n                let lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                disposables.add(codeEditor.onDidChangeCursorPosition(() => {\n                    lastKnownEditorViewState = withNullAsUndefined(editor.saveViewState());\n                }));\n                context.restoreViewState = () => {\n                    if (lastKnownEditorViewState && editor === this.activeTextEditorControl) {\n                        editor.restoreViewState(lastKnownEditorViewState);\n                    }\n                };\n                disposables.add(once(token.onCancellationRequested)(() => { var _a; return (_a = context.restoreViewState) === null || _a === void 0 ? void 0 : _a.call(context); }));\n            }\n            // Clean up decorations on dispose\n            disposables.add(toDisposable(() => this.clearDecorations(editor)));\n            // Ask subclass for entries\n            disposables.add(this.provideWithTextEditor(context, picker, token));\n        }\n        // Without text control\n        else {\n            disposables.add(this.provideWithoutTextEditor(picker, token));\n        }\n        return disposables;\n    }\n    /**\n     * Subclasses to implement if they can operate on the text editor.\n     */\n    canProvideWithTextEditor(editor) {\n        return true;\n    }\n    gotoLocation({ editor }, options) {\n        editor.setSelection(options.range);\n        editor.revealRangeInCenter(options.range, 0 /* Smooth */);\n        if (!options.preserveFocus) {\n            editor.focus();\n        }\n    }\n    getModel(editor) {\n        var _a;\n        return isDiffEditor(editor) ?\n            (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.modified :\n            editor.getModel();\n    }\n    addDecorations(editor, range) {\n        editor.changeDecorations(changeAccessor => {\n            // Reset old decorations if any\n            const deleteDecorations = [];\n            if (this.rangeHighlightDecorationId) {\n                deleteDecorations.push(this.rangeHighlightDecorationId.overviewRulerDecorationId);\n                deleteDecorations.push(this.rangeHighlightDecorationId.rangeHighlightId);\n                this.rangeHighlightDecorationId = undefined;\n            }\n            // Add new decorations for the range\n            const newDecorations = [\n                // highlight the entire line on the range\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight',\n                        className: 'rangeHighlight',\n                        isWholeLine: true\n                    }\n                },\n                // also add overview ruler highlight\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight-overview',\n                        overviewRuler: {\n                            color: themeColorFromId(overviewRulerRangeHighlight),\n                            position: OverviewRulerLane.Full\n                        }\n                    }\n                }\n            ];\n            const [rangeHighlightId, overviewRulerDecorationId] = changeAccessor.deltaDecorations(deleteDecorations, newDecorations);\n            this.rangeHighlightDecorationId = { rangeHighlightId, overviewRulerDecorationId };\n        });\n    }\n    clearDecorations(editor) {\n        const rangeHighlightDecorationId = this.rangeHighlightDecorationId;\n        if (rangeHighlightDecorationId) {\n            editor.changeDecorations(changeAccessor => {\n                changeAccessor.deltaDecorations([\n                    rangeHighlightDecorationId.overviewRulerDecorationId,\n                    rangeHighlightDecorationId.rangeHighlightId\n                ], []);\n            });\n            this.rangeHighlightDecorationId = undefined;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { getCodeEditor } from '../../../browser/editorBrowser.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nexport class AbstractGotoLineQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor() {\n        super({ canAcceptInBackground: true });\n    }\n    provideWithoutTextEditor(picker) {\n        const label = localize('cannotRunGotoLine', \"Open a text editor first to go to a line.\");\n        picker.items = [{ label }];\n        picker.ariaLabel = label;\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto line once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item) {\n                if (!this.isValidLineNumber(editor, item.lineNumber)) {\n                    return;\n                }\n                this.gotoLocation(context, { range: this.toRange(item.lineNumber, item.column), keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // React to picker changes\n        const updatePickerAndEditor = () => {\n            const position = this.parsePosition(editor, picker.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length));\n            const label = this.getPickLabel(editor, position.lineNumber, position.column);\n            // Picker\n            picker.items = [{\n                    lineNumber: position.lineNumber,\n                    column: position.column,\n                    label\n                }];\n            // ARIA Label\n            picker.ariaLabel = label;\n            // Clear decorations for invalid range\n            if (!this.isValidLineNumber(editor, position.lineNumber)) {\n                this.clearDecorations(editor);\n                return;\n            }\n            // Reveal\n            const range = this.toRange(position.lineNumber, position.column);\n            editor.revealRangeInCenter(range, 0 /* Smooth */);\n            // Decorate\n            this.addDecorations(editor, range);\n        };\n        updatePickerAndEditor();\n        disposables.add(picker.onDidChangeValue(() => updatePickerAndEditor()));\n        // Adjust line number visibility as needed\n        const codeEditor = getCodeEditor(editor);\n        if (codeEditor) {\n            const options = codeEditor.getOptions();\n            const lineNumbers = options.get(60 /* lineNumbers */);\n            if (lineNumbers.renderType === 2 /* Relative */) {\n                codeEditor.updateOptions({ lineNumbers: 'on' });\n                disposables.add(toDisposable(() => codeEditor.updateOptions({ lineNumbers: 'relative' })));\n            }\n        }\n        return disposables;\n    }\n    toRange(lineNumber = 1, column = 1) {\n        return {\n            startLineNumber: lineNumber,\n            startColumn: column,\n            endLineNumber: lineNumber,\n            endColumn: column\n        };\n    }\n    parsePosition(editor, value) {\n        // Support line-col formats of `line,col`, `line:col`, `line#col`\n        const numbers = value.split(/,|:|#/).map(part => parseInt(part, 10)).filter(part => !isNaN(part));\n        const endLine = this.lineCount(editor) + 1;\n        return {\n            lineNumber: numbers[0] > 0 ? numbers[0] : endLine + numbers[0],\n            column: numbers[1]\n        };\n    }\n    getPickLabel(editor, lineNumber, column) {\n        // Location valid: indicate this as picker label\n        if (this.isValidLineNumber(editor, lineNumber)) {\n            if (this.isValidColumn(editor, lineNumber, column)) {\n                return localize('gotoLineColumnLabel', \"Go to line {0} and character {1}.\", lineNumber, column);\n            }\n            return localize('gotoLineLabel', \"Go to line {0}.\", lineNumber);\n        }\n        // Location invalid: show generic label\n        const position = editor.getPosition() || { lineNumber: 1, column: 1 };\n        const lineCount = this.lineCount(editor);\n        if (lineCount > 1) {\n            return localize('gotoLineLabelEmptyWithLimit', \"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.\", position.lineNumber, position.column, lineCount);\n        }\n        return localize('gotoLineLabelEmpty', \"Current Line: {0}, Character: {1}. Type a line number to navigate to.\", position.lineNumber, position.column);\n    }\n    isValidLineNumber(editor, lineNumber) {\n        if (!lineNumber || typeof lineNumber !== 'number') {\n            return false;\n        }\n        return lineNumber > 0 && lineNumber <= this.lineCount(editor);\n    }\n    isValidColumn(editor, lineNumber, column) {\n        if (!column || typeof column !== 'number') {\n            return false;\n        }\n        const model = this.getModel(editor);\n        if (!model) {\n            return false;\n        }\n        const positionCandidate = { lineNumber, column };\n        return model.validatePosition(positionCandidate).equals(positionCandidate);\n    }\n    lineCount(editor) {\n        var _a, _b;\n        return (_b = (_a = this.getModel(editor)) === null || _a === void 0 ? void 0 : _a.getLineCount()) !== null && _b !== void 0 ? _b : 0;\n    }\n}\nAbstractGotoLineQuickAccessProvider.PREFIX = ':';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { pieceToQuery, prepareQuery, scoreFuzzy2 } from '../../../../base/common/fuzzyScorer.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { format, trim } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { DocumentSymbolProviderRegistry, SymbolKinds } from '../../../common/languages.js';\nimport { IOutlineModelService } from '../../documentSymbols/browser/outlineModel.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nlet AbstractGotoSymbolQuickAccessProvider = class AbstractGotoSymbolQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor(_outlineModelService, options = Object.create(null)) {\n        super(options);\n        this._outlineModelService = _outlineModelService;\n        this.options = options;\n        this.options.canAcceptInBackground = true;\n    }\n    provideWithoutTextEditor(picker) {\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutEditor', \"To go to a symbol, first open a text editor with symbol information.\"));\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const model = this.getModel(editor);\n        if (!model) {\n            return Disposable.None;\n        }\n        // Provide symbols from model if available in registry\n        if (DocumentSymbolProviderRegistry.has(model)) {\n            return this.doProvideWithEditorSymbols(context, model, picker, token);\n        }\n        // Otherwise show an entry for a model without registry\n        // But give a chance to resolve the symbols at a later\n        // point if possible\n        return this.doProvideWithoutEditorSymbols(context, model, picker, token);\n    }\n    doProvideWithoutEditorSymbols(context, model, picker, token) {\n        const disposables = new DisposableStore();\n        // Generic pick for not having any symbol information\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutSymbolProvider', \"The active text editor does not provide symbol information.\"));\n        // Wait for changes to the registry and see if eventually\n        // we do get symbols. This can happen if the picker is opened\n        // very early after the model has loaded but before the\n        // language registry is ready.\n        // https://github.com/microsoft/vscode/issues/70607\n        (() => __awaiter(this, void 0, void 0, function* () {\n            const result = yield this.waitForLanguageSymbolRegistry(model, disposables);\n            if (!result || token.isCancellationRequested) {\n                return;\n            }\n            disposables.add(this.doProvideWithEditorSymbols(context, model, picker, token));\n        }))();\n        return disposables;\n    }\n    provideLabelPick(picker, label) {\n        picker.items = [{ label, index: 0, kind: 14 /* String */ }];\n        picker.ariaLabel = label;\n    }\n    waitForLanguageSymbolRegistry(model, disposables) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (DocumentSymbolProviderRegistry.has(model)) {\n                return true;\n            }\n            const symbolProviderRegistryPromise = new DeferredPromise();\n            // Resolve promise when registry knows model\n            const symbolProviderListener = disposables.add(DocumentSymbolProviderRegistry.onDidChange(() => {\n                if (DocumentSymbolProviderRegistry.has(model)) {\n                    symbolProviderListener.dispose();\n                    symbolProviderRegistryPromise.complete(true);\n                }\n            }));\n            // Resolve promise when we get disposed too\n            disposables.add(toDisposable(() => symbolProviderRegistryPromise.complete(false)));\n            return symbolProviderRegistryPromise.p;\n        });\n    }\n    doProvideWithEditorSymbols(context, model, picker, token) {\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto symbol once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // Goto symbol side by side if enabled\n        disposables.add(picker.onDidTriggerItemButton(({ item }) => {\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, forceSideBySide: true });\n                picker.hide();\n            }\n        }));\n        // Resolve symbols from document once and reuse this\n        // request for all filtering and typing then on\n        const symbolsPromise = this.getDocumentSymbols(model, token);\n        // Set initial picks and update on type\n        let picksCts = undefined;\n        const updatePickerItems = () => __awaiter(this, void 0, void 0, function* () {\n            // Cancel any previous ask for picks and busy\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\n            picker.busy = false;\n            // Create new cancellation source for this run\n            picksCts = new CancellationTokenSource(token);\n            // Collect symbol picks\n            picker.busy = true;\n            try {\n                const query = prepareQuery(picker.value.substr(AbstractGotoSymbolQuickAccessProvider.PREFIX.length).trim());\n                const items = yield this.doGetSymbolPicks(symbolsPromise, query, undefined, picksCts.token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (items.length > 0) {\n                    picker.items = items;\n                }\n                else {\n                    if (query.original.length > 0) {\n                        this.provideLabelPick(picker, localize('noMatchingSymbolResults', \"No matching editor symbols\"));\n                    }\n                    else {\n                        this.provideLabelPick(picker, localize('noSymbolResults', \"No editor symbols\"));\n                    }\n                }\n            }\n            finally {\n                if (!token.isCancellationRequested) {\n                    picker.busy = false;\n                }\n            }\n        });\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems()));\n        updatePickerItems();\n        // Reveal and decorate when active item changes\n        // However, ignore the very first event so that\n        // opening the picker is not immediately revealing\n        // and decorating the first entry.\n        let ignoreFirstActiveEvent = true;\n        disposables.add(picker.onDidChangeActive(() => {\n            const [item] = picker.activeItems;\n            if (item && item.range) {\n                if (ignoreFirstActiveEvent) {\n                    ignoreFirstActiveEvent = false;\n                    return;\n                }\n                // Reveal\n                editor.revealRangeInCenter(item.range.selection, 0 /* Smooth */);\n                // Decorate\n                this.addDecorations(editor, item.range.decoration);\n            }\n        }));\n        return disposables;\n    }\n    doGetSymbolPicks(symbolsPromise, query, options, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const symbols = yield symbolsPromise;\n            if (token.isCancellationRequested) {\n                return [];\n            }\n            const filterBySymbolKind = query.original.indexOf(AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX) === 0;\n            const filterPos = filterBySymbolKind ? 1 : 0;\n            // Split between symbol and container query\n            let symbolQuery;\n            let containerQuery;\n            if (query.values && query.values.length > 1) {\n                symbolQuery = pieceToQuery(query.values[0]); // symbol: only match on first part\n                containerQuery = pieceToQuery(query.values.slice(1)); // container: match on all but first parts\n            }\n            else {\n                symbolQuery = query;\n            }\n            // Convert to symbol picks and apply filtering\n            const filteredSymbolPicks = [];\n            for (let index = 0; index < symbols.length; index++) {\n                const symbol = symbols[index];\n                const symbolLabel = trim(symbol.name);\n                const symbolLabelWithIcon = `$(${SymbolKinds.toIcon(symbol.kind).id}) ${symbolLabel}`;\n                const symbolLabelIconOffset = symbolLabelWithIcon.length - symbolLabel.length;\n                let containerLabel = symbol.containerName;\n                if (options === null || options === void 0 ? void 0 : options.extraContainerLabel) {\n                    if (containerLabel) {\n                        containerLabel = `${options.extraContainerLabel} • ${containerLabel}`;\n                    }\n                    else {\n                        containerLabel = options.extraContainerLabel;\n                    }\n                }\n                let symbolScore = undefined;\n                let symbolMatches = undefined;\n                let containerScore = undefined;\n                let containerMatches = undefined;\n                if (query.original.length > filterPos) {\n                    // First: try to score on the entire query, it is possible that\n                    // the symbol matches perfectly (e.g. searching for \"change log\"\n                    // can be a match on a markdown symbol \"change log\"). In that\n                    // case we want to skip the container query altogether.\n                    let skipContainerQuery = false;\n                    if (symbolQuery !== query) {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, Object.assign(Object.assign({}, query), { values: undefined /* disable multi-query support */ }), filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore === 'number') {\n                            skipContainerQuery = true; // since we consumed the query, skip any container matching\n                        }\n                    }\n                    // Otherwise: score on the symbol query and match on the container later\n                    if (typeof symbolScore !== 'number') {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, symbolQuery, filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore !== 'number') {\n                            continue;\n                        }\n                    }\n                    // Score by container if specified\n                    if (!skipContainerQuery && containerQuery) {\n                        if (containerLabel && containerQuery.original.length > 0) {\n                            [containerScore, containerMatches] = scoreFuzzy2(containerLabel, containerQuery);\n                        }\n                        if (typeof containerScore !== 'number') {\n                            continue;\n                        }\n                        if (typeof symbolScore === 'number') {\n                            symbolScore += containerScore; // boost symbolScore by containerScore\n                        }\n                    }\n                }\n                const deprecated = symbol.tags && symbol.tags.indexOf(1 /* Deprecated */) >= 0;\n                filteredSymbolPicks.push({\n                    index,\n                    kind: symbol.kind,\n                    score: symbolScore,\n                    label: symbolLabelWithIcon,\n                    ariaLabel: symbolLabel,\n                    description: containerLabel,\n                    highlights: deprecated ? undefined : {\n                        label: symbolMatches,\n                        description: containerMatches\n                    },\n                    range: {\n                        selection: Range.collapseToStart(symbol.selectionRange),\n                        decoration: symbol.range\n                    },\n                    strikethrough: deprecated,\n                    buttons: (() => {\n                        var _a, _b;\n                        const openSideBySideDirection = ((_a = this.options) === null || _a === void 0 ? void 0 : _a.openSideBySideDirection) ? (_b = this.options) === null || _b === void 0 ? void 0 : _b.openSideBySideDirection() : undefined;\n                        if (!openSideBySideDirection) {\n                            return undefined;\n                        }\n                        return [\n                            {\n                                iconClass: openSideBySideDirection === 'right' ? Codicon.splitHorizontal.classNames : Codicon.splitVertical.classNames,\n                                tooltip: openSideBySideDirection === 'right' ? localize('openToSide', \"Open to the Side\") : localize('openToBottom', \"Open to the Bottom\")\n                            }\n                        ];\n                    })()\n                });\n            }\n            // Sort by score\n            const sortedFilteredSymbolPicks = filteredSymbolPicks.sort((symbolA, symbolB) => filterBySymbolKind ?\n                this.compareByKindAndScore(symbolA, symbolB) :\n                this.compareByScore(symbolA, symbolB));\n            // Add separator for types\n            // - @  only total number of symbols\n            // - @: grouped by symbol kind\n            let symbolPicks = [];\n            if (filterBySymbolKind) {\n                let lastSymbolKind = undefined;\n                let lastSeparator = undefined;\n                let lastSymbolKindCounter = 0;\n                function updateLastSeparatorLabel() {\n                    if (lastSeparator && typeof lastSymbolKind === 'number' && lastSymbolKindCounter > 0) {\n                        lastSeparator.label = format(NLS_SYMBOL_KIND_CACHE[lastSymbolKind] || FALLBACK_NLS_SYMBOL_KIND, lastSymbolKindCounter);\n                    }\n                }\n                for (const symbolPick of sortedFilteredSymbolPicks) {\n                    // Found new kind\n                    if (lastSymbolKind !== symbolPick.kind) {\n                        // Update last separator with number of symbols we found for kind\n                        updateLastSeparatorLabel();\n                        lastSymbolKind = symbolPick.kind;\n                        lastSymbolKindCounter = 1;\n                        // Add new separator for new kind\n                        lastSeparator = { type: 'separator' };\n                        symbolPicks.push(lastSeparator);\n                    }\n                    // Existing kind, keep counting\n                    else {\n                        lastSymbolKindCounter++;\n                    }\n                    // Add to final result\n                    symbolPicks.push(symbolPick);\n                }\n                // Update last separator with number of symbols we found for kind\n                updateLastSeparatorLabel();\n            }\n            else if (sortedFilteredSymbolPicks.length > 0) {\n                symbolPicks = [\n                    { label: localize('symbols', \"symbols ({0})\", filteredSymbolPicks.length), type: 'separator' },\n                    ...sortedFilteredSymbolPicks\n                ];\n            }\n            return symbolPicks;\n        });\n    }\n    compareByScore(symbolA, symbolB) {\n        if (typeof symbolA.score !== 'number' && typeof symbolB.score === 'number') {\n            return 1;\n        }\n        else if (typeof symbolA.score === 'number' && typeof symbolB.score !== 'number') {\n            return -1;\n        }\n        if (typeof symbolA.score === 'number' && typeof symbolB.score === 'number') {\n            if (symbolA.score > symbolB.score) {\n                return -1;\n            }\n            else if (symbolA.score < symbolB.score) {\n                return 1;\n            }\n        }\n        if (symbolA.index < symbolB.index) {\n            return -1;\n        }\n        else if (symbolA.index > symbolB.index) {\n            return 1;\n        }\n        return 0;\n    }\n    compareByKindAndScore(symbolA, symbolB) {\n        const kindA = NLS_SYMBOL_KIND_CACHE[symbolA.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        const kindB = NLS_SYMBOL_KIND_CACHE[symbolB.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        // Sort by type first if scoped search\n        const result = kindA.localeCompare(kindB);\n        if (result === 0) {\n            return this.compareByScore(symbolA, symbolB);\n        }\n        return result;\n    }\n    getDocumentSymbols(document, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = yield this._outlineModelService.getOrCreate(document, token);\n            return token.isCancellationRequested ? [] : model.asListOfDocumentSymbols();\n        });\n    }\n};\nAbstractGotoSymbolQuickAccessProvider.PREFIX = '@';\nAbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX = ':';\nAbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY = `${AbstractGotoSymbolQuickAccessProvider.PREFIX}${AbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX}`;\nAbstractGotoSymbolQuickAccessProvider = __decorate([\n    __param(0, IOutlineModelService)\n], AbstractGotoSymbolQuickAccessProvider);\nexport { AbstractGotoSymbolQuickAccessProvider };\n// #region NLS Helpers\nconst FALLBACK_NLS_SYMBOL_KIND = localize('property', \"properties ({0})\");\nconst NLS_SYMBOL_KIND_CACHE = {\n    [5 /* Method */]: localize('method', \"methods ({0})\"),\n    [11 /* Function */]: localize('function', \"functions ({0})\"),\n    [8 /* Constructor */]: localize('_constructor', \"constructors ({0})\"),\n    [12 /* Variable */]: localize('variable', \"variables ({0})\"),\n    [4 /* Class */]: localize('class', \"classes ({0})\"),\n    [22 /* Struct */]: localize('struct', \"structs ({0})\"),\n    [23 /* Event */]: localize('event', \"events ({0})\"),\n    [24 /* Operator */]: localize('operator', \"operators ({0})\"),\n    [10 /* Interface */]: localize('interface', \"interfaces ({0})\"),\n    [2 /* Namespace */]: localize('namespace', \"namespaces ({0})\"),\n    [3 /* Package */]: localize('package', \"packages ({0})\"),\n    [25 /* TypeParameter */]: localize('typeParameter', \"type parameters ({0})\"),\n    [1 /* Module */]: localize('modules', \"modules ({0})\"),\n    [6 /* Property */]: localize('property', \"properties ({0})\"),\n    [9 /* Enum */]: localize('enum', \"enumerations ({0})\"),\n    [21 /* EnumMember */]: localize('enumMember', \"enumeration members ({0})\"),\n    [14 /* String */]: localize('string', \"strings ({0})\"),\n    [0 /* File */]: localize('file', \"files ({0})\"),\n    [17 /* Array */]: localize('array', \"arrays ({0})\"),\n    [15 /* Number */]: localize('number', \"numbers ({0})\"),\n    [16 /* Boolean */]: localize('boolean', \"booleans ({0})\"),\n    [18 /* Object */]: localize('object', \"objects ({0})\"),\n    [19 /* Key */]: localize('key', \"keys ({0})\"),\n    [7 /* Field */]: localize('field', \"fields ({0})\"),\n    [13 /* Constant */]: localize('constant', \"constants ({0})\")\n};\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './renameInputField.css';\nimport { Position } from '../../../common/core/position.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nlet RenameInputField = class RenameInputField {\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService) {\n        this._editor = _editor;\n        this._acceptKeybindings = _acceptKeybindings;\n        this._themeService = _themeService;\n        this._keybindingService = _keybindingService;\n        this._disposables = new DisposableStore();\n        this.allowEditorOverflow = true;\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._editor.addContentWidget(this);\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(44 /* fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return '__renameInputWidget';\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'monaco-editor rename-box';\n            this._input = document.createElement('input');\n            this._input.className = 'rename-input';\n            this._input.type = 'text';\n            this._input.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n            this._domNode.appendChild(this._input);\n            this._label = document.createElement('div');\n            this._label.className = 'rename-label';\n            this._domNode.appendChild(this._label);\n            const updateLabel = () => {\n                var _a, _b;\n                const [accept, preview] = this._acceptKeybindings;\n                this._keybindingService.lookupKeybinding(accept);\n                this._label.innerText = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", (_a = this._keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this._keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n            };\n            updateLabel();\n            this._disposables.add(this._keybindingService.onDidUpdateKeybindings(updateLabel));\n            this._updateFont();\n            this._updateStyles(this._themeService.getColorTheme());\n        }\n        return this._domNode;\n    }\n    _updateStyles(theme) {\n        var _a, _b, _c, _d;\n        if (!this._input || !this._domNode) {\n            return;\n        }\n        const widgetShadowColor = theme.getColor(widgetShadow);\n        this._domNode.style.backgroundColor = String((_a = theme.getColor(editorWidgetBackground)) !== null && _a !== void 0 ? _a : '');\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n        this._domNode.style.color = String((_b = theme.getColor(inputForeground)) !== null && _b !== void 0 ? _b : '');\n        this._input.style.backgroundColor = String((_c = theme.getColor(inputBackground)) !== null && _c !== void 0 ? _c : '');\n        // this._input.style.color = String(theme.getColor(inputForeground) ?? '');\n        const border = theme.getColor(inputBorder);\n        this._input.style.borderWidth = border ? '1px' : '0px';\n        this._input.style.borderStyle = border ? 'solid' : 'none';\n        this._input.style.borderColor = (_d = border === null || border === void 0 ? void 0 : border.toString()) !== null && _d !== void 0 ? _d : 'none';\n    }\n    _updateFont() {\n        if (!this._input || !this._label) {\n            return;\n        }\n        const fontInfo = this._editor.getOption(44 /* fontInfo */);\n        this._input.style.fontFamily = fontInfo.fontFamily;\n        this._input.style.fontWeight = fontInfo.fontWeight;\n        this._input.style.fontSize = `${fontInfo.fontSize}px`;\n        this._label.style.fontSize = `${fontInfo.fontSize * 0.8}px`;\n    }\n    getPosition() {\n        if (!this._visible) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [2 /* BELOW */, 1 /* ABOVE */]\n        };\n    }\n    afterRender(position) {\n        if (!position) {\n            // cancel rename when input widget isn't rendered anymore\n            this.cancelInput(true);\n        }\n    }\n    acceptInput(wantsPreview) {\n        if (this._currentAcceptInput) {\n            this._currentAcceptInput(wantsPreview);\n        }\n    }\n    cancelInput(focusEditor) {\n        if (this._currentCancelInput) {\n            this._currentCancelInput(focusEditor);\n        }\n    }\n    getInput(where, value, selectionStart, selectionEnd, supportPreview, token) {\n        this._domNode.classList.toggle('preview', supportPreview);\n        this._position = new Position(where.startLineNumber, where.startColumn);\n        this._input.value = value;\n        this._input.setAttribute('selectionStart', selectionStart.toString());\n        this._input.setAttribute('selectionEnd', selectionEnd.toString());\n        this._input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20);\n        const disposeOnDone = new DisposableStore();\n        return new Promise(resolve => {\n            this._currentCancelInput = (focusEditor) => {\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve(focusEditor);\n                return true;\n            };\n            this._currentAcceptInput = (wantsPreview) => {\n                if (this._input.value.trim().length === 0 || this._input.value === value) {\n                    // empty or whitespace only or not changed\n                    this.cancelInput(true);\n                    return;\n                }\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve({\n                    newName: this._input.value,\n                    wantsPreview: supportPreview && wantsPreview\n                });\n            };\n            token.onCancellationRequested(() => this.cancelInput(true));\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => this.cancelInput(false)));\n            this._show();\n        }).finally(() => {\n            disposeOnDone.dispose();\n            this._hide();\n        });\n    }\n    _show() {\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* Smooth */);\n        this._visible = true;\n        this._visibleContextKey.set(true);\n        this._editor.layoutContentWidget(this);\n        setTimeout(() => {\n            this._input.focus();\n            this._input.setSelectionRange(parseInt(this._input.getAttribute('selectionStart')), parseInt(this._input.getAttribute('selectionEnd')));\n        }, 100);\n    }\n    _hide() {\n        this._visible = false;\n        this._visibleContextKey.reset();\n        this._editor.layoutContentWidget(this);\n    }\n};\nRenameInputField = __decorate([\n    __param(2, IThemeService),\n    __param(3, IKeybindingService),\n    __param(4, IContextKeyService)\n], RenameInputField);\nexport { RenameInputField };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { IdleValue, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceEdit } from '../../../browser/services/bulkEditService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { RenameProviderRegistry } from '../../../common/languages.js';\nimport { ITextResourceConfigurationService } from '../../../common/services/textResourceConfiguration.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameInputField } from './renameInputField.js';\nclass RenameSkeleton {\n    constructor(model, position) {\n        this.model = model;\n        this.position = position;\n        this._providerRenameIdx = 0;\n        this._providers = RenameProviderRegistry.ordered(model);\n    }\n    hasProvider() {\n        return this._providers.length > 0;\n    }\n    resolveRenameLocation(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const rejects = [];\n            for (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n                const provider = this._providers[this._providerRenameIdx];\n                if (!provider.resolveRenameLocation) {\n                    break;\n                }\n                let res = yield provider.resolveRenameLocation(this.model, this.position, token);\n                if (!res) {\n                    continue;\n                }\n                if (res.rejectReason) {\n                    rejects.push(res.rejectReason);\n                    continue;\n                }\n                return res;\n            }\n            const word = this.model.getWordAtPosition(this.position);\n            if (!word) {\n                return {\n                    range: Range.fromPositions(this.position),\n                    text: '',\n                    rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n                };\n            }\n            return {\n                range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n                text: word.word,\n                rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n            };\n        });\n    }\n    provideRenameEdits(newName, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n        });\n    }\n    _provideRenameEdits(newName, i, rejects, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const provider = this._providers[i];\n            if (!provider) {\n                return {\n                    edits: [],\n                    rejectReason: rejects.join('\\n')\n                };\n            }\n            const result = yield provider.provideRenameEdits(this.model, this.position, newName, token);\n            if (!result) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n            }\n            else if (result.rejectReason) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n            }\n            return result;\n        });\n    }\n}\nexport function rename(model, position, newName) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const skeleton = new RenameSkeleton(model, position);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            return { edits: [], rejectReason: loc.rejectReason };\n        }\n        return skeleton.provideRenameEdits(newName, CancellationToken.None);\n    });\n}\n// ---  register actions and commands\nlet RenameController = class RenameController {\n    constructor(editor, _instaService, _notificationService, _bulkEditService, _progressService, _logService, _configService) {\n        this.editor = editor;\n        this._instaService = _instaService;\n        this._notificationService = _notificationService;\n        this._bulkEditService = _bulkEditService;\n        this._progressService = _progressService;\n        this._logService = _logService;\n        this._configService = _configService;\n        this._dispoableStore = new DisposableStore();\n        this._cts = new CancellationTokenSource();\n        this._renameInputField = this._dispoableStore.add(new IdleValue(() => this._dispoableStore.add(this._instaService.createInstance(RenameInputField, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']))));\n    }\n    static get(editor) {\n        return editor.getContribution(RenameController.ID);\n    }\n    dispose() {\n        this._dispoableStore.dispose();\n        this._cts.dispose(true);\n    }\n    run() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            this._cts.dispose(true);\n            if (!this.editor.hasModel()) {\n                return undefined;\n            }\n            const position = this.editor.getPosition();\n            const skeleton = new RenameSkeleton(this.editor.getModel(), position);\n            if (!skeleton.hasProvider()) {\n                return undefined;\n            }\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* Position */ | 1 /* Value */);\n            // resolve rename location\n            let loc;\n            try {\n                const resolveLocationOperation = skeleton.resolveRenameLocation(this._cts.token);\n                this._progressService.showWhile(resolveLocationOperation, 250);\n                loc = yield resolveLocationOperation;\n            }\n            catch (e) {\n                (_a = MessageController.get(this.editor)) === null || _a === void 0 ? void 0 : _a.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n                return undefined;\n            }\n            if (!loc) {\n                return undefined;\n            }\n            if (loc.rejectReason) {\n                (_b = MessageController.get(this.editor)) === null || _b === void 0 ? void 0 : _b.showMessage(loc.rejectReason, position);\n                return undefined;\n            }\n            if (this._cts.token.isCancellationRequested) {\n                return undefined;\n            }\n            this._cts.dispose();\n            this._cts = new EditorStateCancellationTokenSource(this.editor, 4 /* Position */ | 1 /* Value */, loc.range);\n            // do rename at location\n            let selection = this.editor.getSelection();\n            let selectionStart = 0;\n            let selectionEnd = loc.text.length;\n            if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(loc.range, selection)) {\n                selectionStart = Math.max(0, selection.startColumn - loc.range.startColumn);\n                selectionEnd = Math.min(loc.range.endColumn, selection.endColumn) - loc.range.startColumn;\n            }\n            const supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue(this.editor.getModel().uri, 'editor.rename.enablePreview');\n            const inputFieldResult = yield this._renameInputField.value.getInput(loc.range, loc.text, selectionStart, selectionEnd, supportPreview, this._cts.token);\n            // no result, only hint to focus the editor or not\n            if (typeof inputFieldResult === 'boolean') {\n                if (inputFieldResult) {\n                    this.editor.focus();\n                }\n                return undefined;\n            }\n            this.editor.focus();\n            const renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, this._cts.token), this._cts.token).then((renameResult) => __awaiter(this, void 0, void 0, function* () {\n                if (!renameResult || !this.editor.hasModel()) {\n                    return;\n                }\n                if (renameResult.rejectReason) {\n                    this._notificationService.info(renameResult.rejectReason);\n                    return;\n                }\n                // collapse selection to active end\n                this.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\n                this._bulkEditService.apply(ResourceEdit.convert(renameResult), {\n                    editor: this.editor,\n                    showPreview: inputFieldResult.wantsPreview,\n                    label: nls.localize('label', \"Renaming '{0}'\", loc === null || loc === void 0 ? void 0 : loc.text),\n                    quotableLabel: nls.localize('quotableLabel', \"Renaming {0}\", loc === null || loc === void 0 ? void 0 : loc.text),\n                }).then(result => {\n                    if (result.ariaSummary) {\n                        alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, inputFieldResult.newName, result.ariaSummary));\n                    }\n                }).catch(err => {\n                    this._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n                    this._logService.error(err);\n                });\n            }), err => {\n                this._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n                this._logService.error(err);\n            });\n            this._progressService.showWhile(renameOperation, 250);\n            return renameOperation;\n        });\n    }\n    acceptRenameInput(wantsPreview) {\n        this._renameInputField.value.acceptInput(wantsPreview);\n    }\n    cancelRenameInput() {\n        this._renameInputField.value.cancelInput(true);\n    }\n};\nRenameController.ID = 'editor.contrib.renameController';\nRenameController = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, INotificationService),\n    __param(3, IBulkEditService),\n    __param(4, IEditorProgressService),\n    __param(5, ILogService),\n    __param(6, ITextResourceConfigurationService)\n], RenameController);\n// ---- action implementation\nexport class RenameAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.rename',\n            label: nls.localize('rename.label', \"Rename Symbol\"),\n            alias: 'Rename Symbol',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 60 /* F2 */,\n                weight: 100 /* EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.1\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(accessor, editor) {\n        const controller = RenameController.get(editor);\n        if (controller) {\n            return controller.run();\n        }\n        return Promise.resolve();\n    }\n}\nregisterEditorContribution(RenameController.ID, RenameController);\nregisterEditorAction(RenameAction);\nconst RenameCommand = EditorCommand.bindToContribution(RenameController.get);\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.acceptRenameInput(false),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 3 /* Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInputWithPreview',\n    precondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n    handler: x => x.acceptRenameInput(true),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 1024 /* Shift */ + 3 /* Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'cancelRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.cancelRenameInput(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\n// ---- api bridge command\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (model, position, ...args) {\n    const [newName] = args;\n    assertType(typeof newName === 'string');\n    return rename(model, position, newName);\n});\nregisterModelAndPositionCommand('_executePrepareRename', function (model, position) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const skeleton = new RenameSkeleton(model, position);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            throw new Error(loc.rejectReason);\n        }\n        return loc;\n    });\n});\n//todo@jrieken use editor options world\nRegistry.as(Extensions.Configuration).registerConfiguration({\n    id: 'editor',\n    properties: {\n        'editor.rename.enablePreview': {\n            scope: 5 /* LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n            default: true,\n            type: 'boolean'\n        }\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport class BracketSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = [];\n            for (const position of positions) {\n                const bucket = [];\n                result.push(bucket);\n                const ranges = new Map();\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsRightYield(resolve, 0, model, position, ranges));\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsLeftYield(resolve, 0, model, position, ranges, bucket));\n            }\n            return result;\n        });\n    }\n    static _bracketsRightYield(resolve, round, model, pos, ranges) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            let bracket = model.bracketPairs.findNextBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            let d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsRightYield(resolve, round + 1, model, pos, ranges));\n                break;\n            }\n            const key = bracket.close[0];\n            if (bracket.isOpen) {\n                // wait for closing\n                let val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                // process closing\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    let list = ranges.get(key);\n                    if (!list) {\n                        list = new LinkedList();\n                        ranges.set(key, list);\n                    }\n                    list.push(bracket.range);\n                }\n            }\n            pos = bracket.range.getEndPosition();\n        }\n    }\n    static _bracketsLeftYield(resolve, round, model, pos, ranges, bucket) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds && ranges.size === 0) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            let bracket = model.bracketPairs.findPrevBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            let d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsLeftYield(resolve, round + 1, model, pos, ranges, bucket));\n                break;\n            }\n            const key = bracket.close[0];\n            if (!bracket.isOpen) {\n                // wait for opening\n                let val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                // opening\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    let list = ranges.get(key);\n                    if (list) {\n                        let closing = list.shift();\n                        if (list.size === 0) {\n                            ranges.delete(key);\n                        }\n                        const innerBracket = Range.fromPositions(bracket.range.getEndPosition(), closing.getStartPosition());\n                        const outerBracket = Range.fromPositions(bracket.range.getStartPosition(), closing.getEndPosition());\n                        bucket.push({ range: innerBracket });\n                        bucket.push({ range: outerBracket });\n                        BracketSelectionRangeProvider._addBracketLeading(model, outerBracket, bucket);\n                    }\n                }\n            }\n            pos = bracket.range.getStartPosition();\n        }\n    }\n    static _addBracketLeading(model, bracket, bucket) {\n        if (bracket.startLineNumber === bracket.endLineNumber) {\n            return;\n        }\n        // xxxxxxxx {\n        //\n        // }\n        const startLine = bracket.startLineNumber;\n        const column = model.getLineFirstNonWhitespaceColumn(startLine);\n        if (column !== 0 && column !== bracket.startColumn) {\n            bucket.push({ range: Range.fromPositions(new Position(startLine, column), bracket.getEndPosition()) });\n            bucket.push({ range: Range.fromPositions(new Position(startLine, 1), bracket.getEndPosition()) });\n        }\n        // xxxxxxxx\n        // {\n        //\n        // }\n        const aboveLine = startLine - 1;\n        if (aboveLine > 0) {\n            const column = model.getLineFirstNonWhitespaceColumn(aboveLine);\n            if (column === bracket.startColumn && column !== model.getLineLastNonWhitespaceColumn(aboveLine)) {\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, column), bracket.getEndPosition()) });\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, 1), bracket.getEndPosition()) });\n            }\n        }\n    }\n}\nBracketSelectionRangeProvider._maxDuration = 30;\nBracketSelectionRangeProvider._maxRounds = 2;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isLowerAsciiLetter, isUpperAsciiLetter } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nexport class WordSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        const result = [];\n        for (const position of positions) {\n            const bucket = [];\n            result.push(bucket);\n            this._addInWordRanges(bucket, model, position);\n            this._addWordRanges(bucket, model, position);\n            this._addWhitespaceLine(bucket, model, position);\n            bucket.push({ range: model.getFullModelRange() });\n        }\n        return result;\n    }\n    _addInWordRanges(bucket, model, pos) {\n        const obj = model.getWordAtPosition(pos);\n        if (!obj) {\n            return;\n        }\n        let { word, startColumn } = obj;\n        let offset = pos.column - startColumn;\n        let start = offset;\n        let end = offset;\n        let lastCh = 0;\n        // LEFT anchor (start)\n        for (; start >= 0; start--) {\n            let ch = word.charCodeAt(start);\n            if ((start !== offset) && (ch === 95 /* Underline */ || ch === 45 /* Dash */)) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            lastCh = ch;\n        }\n        start += 1;\n        // RIGHT anchor (end)\n        for (; end < word.length; end++) {\n            let ch = word.charCodeAt(end);\n            if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            else if (ch === 95 /* Underline */ || ch === 45 /* Dash */) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            lastCh = ch;\n        }\n        if (start < end) {\n            bucket.push({ range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end) });\n        }\n    }\n    _addWordRanges(bucket, model, pos) {\n        const word = model.getWordAtPosition(pos);\n        if (word) {\n            bucket.push({ range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn) });\n        }\n    }\n    _addWhitespaceLine(bucket, model, pos) {\n        if (model.getLineLength(pos.lineNumber) > 0\n            && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0\n            && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\n            bucket.push({ range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber)) });\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution, registerModelCommand } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as modes from '../../../common/languages.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nclass SelectionRanges {\n    constructor(index, ranges) {\n        this.index = index;\n        this.ranges = ranges;\n    }\n    mov(fwd) {\n        let index = this.index + (fwd ? 1 : -1);\n        if (index < 0 || index >= this.ranges.length) {\n            return this;\n        }\n        const res = new SelectionRanges(index, this.ranges);\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n            // next range equals this range, retry with next-next\n            return res.mov(fwd);\n        }\n        return res;\n    }\n}\nclass SmartSelectController {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._ignoreSelection = false;\n    }\n    static get(editor) {\n        return editor.getContribution(SmartSelectController.ID);\n    }\n    dispose() {\n        var _a;\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    run(forward) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            const model = this._editor.getModel();\n            if (!modes.SelectionRangeRegistry.has(model)) {\n                return;\n            }\n            if (!this._state) {\n                yield provideSelectionRanges(model, selections.map(s => s.getPosition()), this._editor.getOption(102 /* smartSelect */), CancellationToken.None).then(ranges => {\n                    var _a;\n                    if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n                        // invalid result\n                        return;\n                    }\n                    if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\n                        // invalid editor state\n                        return;\n                    }\n                    for (let i = 0; i < ranges.length; i++) {\n                        ranges[i] = ranges[i].filter(range => {\n                            // filter ranges inside the selection\n                            return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n                        });\n                        // prepend current selection\n                        ranges[i].unshift(selections[i]);\n                    }\n                    this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\n                    // listen to caret move and forget about state\n                    (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                    this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\n                        var _a;\n                        if (!this._ignoreSelection) {\n                            (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                            this._state = undefined;\n                        }\n                    });\n                });\n            }\n            if (!this._state) {\n                // no state\n                return;\n            }\n            this._state = this._state.map(state => state.mov(forward));\n            const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\n            this._ignoreSelection = true;\n            try {\n                this._editor.setSelections(newSelections);\n            }\n            finally {\n                this._ignoreSelection = false;\n            }\n        });\n    }\n}\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\nclass AbstractSmartSelect extends EditorAction {\n    constructor(forward, opts) {\n        super(opts);\n        this._forward = forward;\n    }\n    run(_accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let controller = SmartSelectController.get(editor);\n            if (controller) {\n                yield controller.run(this._forward);\n            }\n        });\n    }\n}\nclass GrowSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(true, {\n            id: 'editor.action.smartSelect.expand',\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n            alias: 'Expand Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 17 /* RightArrow */,\n                mac: {\n                    primary: 2048 /* CtrlCmd */ | 256 /* WinCtrl */ | 1024 /* Shift */ | 17 /* RightArrow */,\n                    secondary: [256 /* WinCtrl */ | 1024 /* Shift */ | 17 /* RightArrow */],\n                },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\n                order: 2\n            }\n        });\n    }\n}\n// renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nclass ShrinkSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(false, {\n            id: 'editor.action.smartSelect.shrink',\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n            alias: 'Shrink Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* Shift */ | 512 /* Alt */ | 15 /* LeftArrow */,\n                mac: {\n                    primary: 2048 /* CtrlCmd */ | 256 /* WinCtrl */ | 1024 /* Shift */ | 15 /* LeftArrow */,\n                    secondary: [256 /* WinCtrl */ | 1024 /* Shift */ | 15 /* LeftArrow */],\n                },\n                weight: 100 /* EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\n                order: 3\n            }\n        });\n    }\n}\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\n// word selection\nmodes.SelectionRangeRegistry.register('*', new WordSelectionRangeProvider());\nexport function provideSelectionRanges(model, positions, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = modes.SelectionRangeRegistry.all(model);\n        if (providers.length === 1) {\n            // add word selection and bracket selection when no provider exists\n            providers.unshift(new BracketSelectionRangeProvider());\n        }\n        let work = [];\n        let allRawRanges = [];\n        for (const provider of providers) {\n            work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\n                if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n                    for (let i = 0; i < positions.length; i++) {\n                        if (!allRawRanges[i]) {\n                            allRawRanges[i] = [];\n                        }\n                        for (const oneProviderRanges of allProviderRanges[i]) {\n                            if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n                                allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n                            }\n                        }\n                    }\n                }\n            }, onUnexpectedExternalError));\n        }\n        yield Promise.all(work);\n        return allRawRanges.map(oneRawRanges => {\n            if (oneRawRanges.length === 0) {\n                return [];\n            }\n            // sort all by start/end position\n            oneRawRanges.sort((a, b) => {\n                if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n                    return 1;\n                }\n                else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n                    return 1;\n                }\n                else {\n                    return 0;\n                }\n            });\n            // remove ranges that don't contain the former range or that are equal to the\n            // former range\n            let oneRanges = [];\n            let last;\n            for (const range of oneRawRanges) {\n                if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\n                    oneRanges.push(range);\n                    last = range;\n                }\n            }\n            if (!options.selectLeadingAndTrailingWhitespace) {\n                return oneRanges;\n            }\n            // add ranges that expand trivia at line starts and ends whenever a range\n            // wraps onto the a new line\n            let oneRangesWithTrivia = [oneRanges[0]];\n            for (let i = 1; i < oneRanges.length; i++) {\n                const prev = oneRanges[i - 1];\n                const cur = oneRanges[i];\n                if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n                    // add line/block range without leading/failing whitespace\n                    const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n                    if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n                        oneRangesWithTrivia.push(rangeNoWhitespace);\n                    }\n                    // add line/block range\n                    const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n                    if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n                        oneRangesWithTrivia.push(rangeFull);\n                    }\n                }\n                oneRangesWithTrivia.push(cur);\n            }\n            return oneRangesWithTrivia;\n        });\n    });\n}\nregisterModelCommand('_executeSelectionRangeProvider', function (model, ...args) {\n    const [positions] = args;\n    return provideSelectionRanges(model, positions, { selectLeadingAndTrailingWhitespace: true }, CancellationToken.None);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { showSimpleSuggestions } from '../../suggest/browser/suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { SnippetSession } from './snippetSession.js';\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    undoStopBefore: true,\n    undoStopAfter: true,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nlet SnippetController2 = class SnippetController2 {\n    constructor(_editor, _logService, contextKeyService) {\n        this._editor = _editor;\n        this._logService = _logService;\n        this._snippetListener = new DisposableStore();\n        this._modelVersionId = -1;\n        this._inSnippet = SnippetController2.InSnippetMode.bindTo(contextKeyService);\n        this._hasNextTabstop = SnippetController2.HasNextTabstop.bindTo(contextKeyService);\n        this._hasPrevTabstop = SnippetController2.HasPrevTabstop.bindTo(contextKeyService);\n    }\n    static get(editor) {\n        return editor.getContribution(SnippetController2.ID);\n    }\n    dispose() {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._snippetListener.dispose();\n    }\n    insert(template, opts) {\n        // this is here to find out more about the yet-not-understood\n        // error that sometimes happens when we fail to inserted a nested\n        // snippet\n        try {\n            this._doInsert(template, typeof opts === 'undefined' ? _defaultOptions : Object.assign(Object.assign({}, _defaultOptions), opts));\n        }\n        catch (e) {\n            this.cancel();\n            this._logService.error(e);\n            this._logService.error('snippet_error');\n            this._logService.error('insert_template=', template);\n            this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\n        }\n    }\n    _doInsert(template, opts) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // don't listen while inserting the snippet\n        // as that is the inflight state causing cancelation\n        this._snippetListener.clear();\n        if (opts.undoStopBefore) {\n            this._editor.getModel().pushStackElement();\n        }\n        if (!this._session) {\n            this._modelVersionId = this._editor.getModel().getAlternativeVersionId();\n            this._session = new SnippetSession(this._editor, template, opts);\n            this._session.insert();\n        }\n        else {\n            this._session.merge(template, opts);\n        }\n        if (opts.undoStopAfter) {\n            this._editor.getModel().pushStackElement();\n        }\n        this._updateState();\n        this._snippetListener.add(this._editor.onDidChangeModelContent(e => e.isFlush && this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeModel(() => this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeCursorSelection(() => this._updateState()));\n    }\n    _updateState() {\n        if (!this._session || !this._editor.hasModel()) {\n            // canceled in the meanwhile\n            return;\n        }\n        if (this._modelVersionId === this._editor.getModel().getAlternativeVersionId()) {\n            // undo until the 'before' state happened\n            // and makes use cancel snippet mode\n            return this.cancel();\n        }\n        if (!this._session.hasPlaceholder) {\n            // don't listen for selection changes and don't\n            // update context keys when the snippet is plain text\n            return this.cancel();\n        }\n        if (this._session.isAtLastPlaceholder || !this._session.isSelectionWithinPlaceholders()) {\n            this._editor.getModel().pushStackElement();\n            return this.cancel();\n        }\n        this._inSnippet.set(true);\n        this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder);\n        this._hasNextTabstop.set(!this._session.isAtLastPlaceholder);\n        this._handleChoice();\n    }\n    _handleChoice() {\n        if (!this._session || !this._editor.hasModel()) {\n            this._currentChoice = undefined;\n            return;\n        }\n        const { choice } = this._session;\n        if (!choice) {\n            this._currentChoice = undefined;\n            return;\n        }\n        if (this._currentChoice !== choice) {\n            this._currentChoice = choice;\n            this._editor.setSelections(this._editor.getSelections()\n                .map(s => Selection.fromPositions(s.getStartPosition())));\n            const [first] = choice.options;\n            showSimpleSuggestions(this._editor, choice.options.map((option, i) => {\n                // let before = choice.options.slice(0, i);\n                // let after = choice.options.slice(i);\n                return {\n                    kind: 13 /* Value */,\n                    label: option.value,\n                    insertText: option.value,\n                    // insertText: `\\${1|${after.concat(before).join(',')}|}$0`,\n                    // snippetType: 'textmate',\n                    sortText: 'a'.repeat(i + 1),\n                    range: Range.fromPositions(this._editor.getPosition(), this._editor.getPosition().delta(0, first.value.length))\n                };\n            }));\n        }\n    }\n    finish() {\n        while (this._inSnippet.get()) {\n            this.next();\n        }\n    }\n    cancel(resetSelection = false) {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        this._snippetListener.clear();\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._session = undefined;\n        this._modelVersionId = -1;\n        if (resetSelection) {\n            // reset selection to the primary cursor when being asked\n            // for. this happens when explicitly cancelling snippet mode,\n            // e.g. when pressing ESC\n            this._editor.setSelections([this._editor.getSelection()]);\n        }\n    }\n    prev() {\n        if (this._session) {\n            this._session.prev();\n        }\n        this._updateState();\n    }\n    next() {\n        if (this._session) {\n            this._session.next();\n        }\n        this._updateState();\n    }\n    isInSnippet() {\n        return Boolean(this._inSnippet.get());\n    }\n};\nSnippetController2.ID = 'snippetController2';\nSnippetController2.InSnippetMode = new RawContextKey('inSnippetMode', false, localize('inSnippetMode', \"Whether the editor in current in snippet mode\"));\nSnippetController2.HasNextTabstop = new RawContextKey('hasNextTabstop', false, localize('hasNextTabstop', \"Whether there is a next tab stop when in snippet mode\"));\nSnippetController2.HasPrevTabstop = new RawContextKey('hasPrevTabstop', false, localize('hasPrevTabstop', \"Whether there is a previous tab stop when in snippet mode\"));\nSnippetController2 = __decorate([\n    __param(1, ILogService),\n    __param(2, IContextKeyService)\n], SnippetController2);\nexport { SnippetController2 };\nregisterEditorContribution(SnippetController2.ID, SnippetController2);\nconst CommandCtor = EditorCommand.bindToContribution(SnippetController2.get);\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToNextSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasNextTabstop),\n    handler: ctrl => ctrl.next(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2 /* Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToPrevSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasPrevTabstop),\n    handler: ctrl => ctrl.prev(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* Shift */ | 2 /* Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'leaveSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.cancel(true),\n    kbOpts: {\n        weight: 100 /* EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'acceptSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.finish(),\n    // kbOpts: {\n    // \tweight: KeybindingWeight.EditorContrib + 30,\n    // \tkbExpr: EditorContextKeys.textFocus,\n    // \tprimary: KeyCode.Enter,\n    // }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class Scanner {\n    constructor() {\n        this.value = '';\n        this.pos = 0;\n    }\n    static isDigitCharacter(ch) {\n        return ch >= 48 /* Digit0 */ && ch <= 57 /* Digit9 */;\n    }\n    static isVariableCharacter(ch) {\n        return ch === 95 /* Underline */\n            || (ch >= 97 /* a */ && ch <= 122 /* z */)\n            || (ch >= 65 /* A */ && ch <= 90 /* Z */);\n    }\n    text(value) {\n        this.value = value;\n        this.pos = 0;\n    }\n    tokenText(token) {\n        return this.value.substr(token.pos, token.len);\n    }\n    next() {\n        if (this.pos >= this.value.length) {\n            return { type: 14 /* EOF */, pos: this.pos, len: 0 };\n        }\n        let pos = this.pos;\n        let len = 0;\n        let ch = this.value.charCodeAt(pos);\n        let type;\n        // static types\n        type = Scanner._table[ch];\n        if (typeof type === 'number') {\n            this.pos += 1;\n            return { type, pos, len: 1 };\n        }\n        // number\n        if (Scanner.isDigitCharacter(ch)) {\n            type = 8 /* Int */;\n            do {\n                len += 1;\n                ch = this.value.charCodeAt(pos + len);\n            } while (Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // variable name\n        if (Scanner.isVariableCharacter(ch)) {\n            type = 9 /* VariableName */;\n            do {\n                ch = this.value.charCodeAt(pos + (++len));\n            } while (Scanner.isVariableCharacter(ch) || Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // format\n        type = 10 /* Format */;\n        do {\n            len += 1;\n            ch = this.value.charCodeAt(pos + len);\n        } while (!isNaN(ch)\n            && typeof Scanner._table[ch] === 'undefined' // not static token\n            && !Scanner.isDigitCharacter(ch) // not number\n            && !Scanner.isVariableCharacter(ch) // not variable\n        );\n        this.pos += len;\n        return { type, pos, len };\n    }\n}\nScanner._table = {\n    [36 /* DollarSign */]: 0 /* Dollar */,\n    [58 /* Colon */]: 1 /* Colon */,\n    [44 /* Comma */]: 2 /* Comma */,\n    [123 /* OpenCurlyBrace */]: 3 /* CurlyOpen */,\n    [125 /* CloseCurlyBrace */]: 4 /* CurlyClose */,\n    [92 /* Backslash */]: 5 /* Backslash */,\n    [47 /* Slash */]: 6 /* Forwardslash */,\n    [124 /* Pipe */]: 7 /* Pipe */,\n    [43 /* Plus */]: 11 /* Plus */,\n    [45 /* Dash */]: 12 /* Dash */,\n    [63 /* QuestionMark */]: 13 /* QuestionMark */,\n};\nexport class Marker {\n    constructor() {\n        this._children = [];\n    }\n    appendChild(child) {\n        if (child instanceof Text && this._children[this._children.length - 1] instanceof Text) {\n            // this and previous child are text -> merge them\n            this._children[this._children.length - 1].value += child.value;\n        }\n        else {\n            // normal adoption of child\n            child.parent = this;\n            this._children.push(child);\n        }\n        return this;\n    }\n    replace(child, others) {\n        const { parent } = child;\n        const idx = parent.children.indexOf(child);\n        const newChildren = parent.children.slice(0);\n        newChildren.splice(idx, 1, ...others);\n        parent._children = newChildren;\n        (function _fixParent(children, parent) {\n            for (const child of children) {\n                child.parent = parent;\n                _fixParent(child.children, child);\n            }\n        })(others, parent);\n    }\n    get children() {\n        return this._children;\n    }\n    get snippet() {\n        let candidate = this;\n        while (true) {\n            if (!candidate) {\n                return undefined;\n            }\n            if (candidate instanceof TextmateSnippet) {\n                return candidate;\n            }\n            candidate = candidate.parent;\n        }\n    }\n    toString() {\n        return this.children.reduce((prev, cur) => prev + cur.toString(), '');\n    }\n    len() {\n        return 0;\n    }\n}\nexport class Text extends Marker {\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    len() {\n        return this.value.length;\n    }\n    clone() {\n        return new Text(this.value);\n    }\n}\nexport class TransformableMarker extends Marker {\n}\nexport class Placeholder extends TransformableMarker {\n    constructor(index) {\n        super();\n        this.index = index;\n    }\n    static compareByIndex(a, b) {\n        if (a.index === b.index) {\n            return 0;\n        }\n        else if (a.isFinalTabstop) {\n            return 1;\n        }\n        else if (b.isFinalTabstop) {\n            return -1;\n        }\n        else if (a.index < b.index) {\n            return -1;\n        }\n        else if (a.index > b.index) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    get isFinalTabstop() {\n        return this.index === 0;\n    }\n    get choice() {\n        return this._children.length === 1 && this._children[0] instanceof Choice\n            ? this._children[0]\n            : undefined;\n    }\n    clone() {\n        let ret = new Placeholder(this.index);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class Choice extends Marker {\n    constructor() {\n        super(...arguments);\n        this.options = [];\n    }\n    appendChild(marker) {\n        if (marker instanceof Text) {\n            marker.parent = this;\n            this.options.push(marker);\n        }\n        return this;\n    }\n    toString() {\n        return this.options[0].value;\n    }\n    len() {\n        return this.options[0].len();\n    }\n    clone() {\n        let ret = new Choice();\n        this.options.forEach(ret.appendChild, ret);\n        return ret;\n    }\n}\nexport class Transform extends Marker {\n    constructor() {\n        super(...arguments);\n        this.regexp = new RegExp('');\n    }\n    resolve(value) {\n        const _this = this;\n        let didMatch = false;\n        let ret = value.replace(this.regexp, function () {\n            didMatch = true;\n            return _this._replace(Array.prototype.slice.call(arguments, 0, -2));\n        });\n        // when the regex didn't match and when the transform has\n        // else branches, then run those\n        if (!didMatch && this._children.some(child => child instanceof FormatString && Boolean(child.elseValue))) {\n            ret = this._replace([]);\n        }\n        return ret;\n    }\n    _replace(groups) {\n        let ret = '';\n        for (const marker of this._children) {\n            if (marker instanceof FormatString) {\n                let value = groups[marker.index] || '';\n                value = marker.resolve(value);\n                ret += value;\n            }\n            else {\n                ret += marker.toString();\n            }\n        }\n        return ret;\n    }\n    toString() {\n        return '';\n    }\n    clone() {\n        let ret = new Transform();\n        ret.regexp = new RegExp(this.regexp.source, '' + (this.regexp.ignoreCase ? 'i' : '') + (this.regexp.global ? 'g' : ''));\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class FormatString extends Marker {\n    constructor(index, shorthandName, ifValue, elseValue) {\n        super();\n        this.index = index;\n        this.shorthandName = shorthandName;\n        this.ifValue = ifValue;\n        this.elseValue = elseValue;\n    }\n    resolve(value) {\n        if (this.shorthandName === 'upcase') {\n            return !value ? '' : value.toLocaleUpperCase();\n        }\n        else if (this.shorthandName === 'downcase') {\n            return !value ? '' : value.toLocaleLowerCase();\n        }\n        else if (this.shorthandName === 'capitalize') {\n            return !value ? '' : (value[0].toLocaleUpperCase() + value.substr(1));\n        }\n        else if (this.shorthandName === 'pascalcase') {\n            return !value ? '' : this._toPascalCase(value);\n        }\n        else if (this.shorthandName === 'camelcase') {\n            return !value ? '' : this._toCamelCase(value);\n        }\n        else if (Boolean(value) && typeof this.ifValue === 'string') {\n            return this.ifValue;\n        }\n        else if (!Boolean(value) && typeof this.elseValue === 'string') {\n            return this.elseValue;\n        }\n        else {\n            return value || '';\n        }\n    }\n    _toPascalCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map(word => {\n            return word.charAt(0).toUpperCase()\n                + word.substr(1).toLowerCase();\n        })\n            .join('');\n    }\n    _toCamelCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map((word, index) => {\n            if (index === 0) {\n                return word.toLowerCase();\n            }\n            else {\n                return word.charAt(0).toUpperCase()\n                    + word.substr(1).toLowerCase();\n            }\n        })\n            .join('');\n    }\n    clone() {\n        let ret = new FormatString(this.index, this.shorthandName, this.ifValue, this.elseValue);\n        return ret;\n    }\n}\nexport class Variable extends TransformableMarker {\n    constructor(name) {\n        super();\n        this.name = name;\n    }\n    resolve(resolver) {\n        let value = resolver.resolve(this);\n        if (this.transform) {\n            value = this.transform.resolve(value || '');\n        }\n        if (value !== undefined) {\n            this._children = [new Text(value)];\n            return true;\n        }\n        return false;\n    }\n    clone() {\n        const ret = new Variable(this.name);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nfunction walk(marker, visitor) {\n    const stack = [...marker];\n    while (stack.length > 0) {\n        const marker = stack.shift();\n        const recurse = visitor(marker);\n        if (!recurse) {\n            break;\n        }\n        stack.unshift(...marker.children);\n    }\n}\nexport class TextmateSnippet extends Marker {\n    get placeholderInfo() {\n        if (!this._placeholders) {\n            // fill in placeholders\n            let all = [];\n            let last;\n            this.walk(function (candidate) {\n                if (candidate instanceof Placeholder) {\n                    all.push(candidate);\n                    last = !last || last.index < candidate.index ? candidate : last;\n                }\n                return true;\n            });\n            this._placeholders = { all, last };\n        }\n        return this._placeholders;\n    }\n    get placeholders() {\n        const { all } = this.placeholderInfo;\n        return all;\n    }\n    offset(marker) {\n        let pos = 0;\n        let found = false;\n        this.walk(candidate => {\n            if (candidate === marker) {\n                found = true;\n                return false;\n            }\n            pos += candidate.len();\n            return true;\n        });\n        if (!found) {\n            return -1;\n        }\n        return pos;\n    }\n    fullLen(marker) {\n        let ret = 0;\n        walk([marker], marker => {\n            ret += marker.len();\n            return true;\n        });\n        return ret;\n    }\n    enclosingPlaceholders(placeholder) {\n        let ret = [];\n        let { parent } = placeholder;\n        while (parent) {\n            if (parent instanceof Placeholder) {\n                ret.push(parent);\n            }\n            parent = parent.parent;\n        }\n        return ret;\n    }\n    resolveVariables(resolver) {\n        this.walk(candidate => {\n            if (candidate instanceof Variable) {\n                if (candidate.resolve(resolver)) {\n                    this._placeholders = undefined;\n                }\n            }\n            return true;\n        });\n        return this;\n    }\n    appendChild(child) {\n        this._placeholders = undefined;\n        return super.appendChild(child);\n    }\n    replace(child, others) {\n        this._placeholders = undefined;\n        return super.replace(child, others);\n    }\n    clone() {\n        let ret = new TextmateSnippet();\n        this._children = this.children.map(child => child.clone());\n        return ret;\n    }\n    walk(visitor) {\n        walk(this.children, visitor);\n    }\n}\nexport class SnippetParser {\n    constructor() {\n        this._scanner = new Scanner();\n        this._token = { type: 14 /* EOF */, pos: 0, len: 0 };\n    }\n    static escape(value) {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n    static guessNeedsClipboard(template) {\n        return /\\${?CLIPBOARD/.test(template);\n    }\n    parse(value, insertFinalTabstop, enforceFinalTabstop) {\n        this._scanner.text(value);\n        this._token = this._scanner.next();\n        const snippet = new TextmateSnippet();\n        while (this._parse(snippet)) {\n            // nothing\n        }\n        // fill in values for placeholders. the first placeholder of an index\n        // that has a value defines the value for all placeholders with that index\n        const placeholderDefaultValues = new Map();\n        const incompletePlaceholders = [];\n        let placeholderCount = 0;\n        snippet.walk(marker => {\n            if (marker instanceof Placeholder) {\n                placeholderCount += 1;\n                if (marker.isFinalTabstop) {\n                    placeholderDefaultValues.set(0, undefined);\n                }\n                else if (!placeholderDefaultValues.has(marker.index) && marker.children.length > 0) {\n                    placeholderDefaultValues.set(marker.index, marker.children);\n                }\n                else {\n                    incompletePlaceholders.push(marker);\n                }\n            }\n            return true;\n        });\n        for (const placeholder of incompletePlaceholders) {\n            const defaultValues = placeholderDefaultValues.get(placeholder.index);\n            if (defaultValues) {\n                const clone = new Placeholder(placeholder.index);\n                clone.transform = placeholder.transform;\n                for (const child of defaultValues) {\n                    clone.appendChild(child.clone());\n                }\n                snippet.replace(placeholder, [clone]);\n            }\n        }\n        if (!enforceFinalTabstop) {\n            enforceFinalTabstop = placeholderCount > 0 && insertFinalTabstop;\n        }\n        if (!placeholderDefaultValues.has(0) && enforceFinalTabstop) {\n            // the snippet uses placeholders but has no\n            // final tabstop defined -> insert at the end\n            snippet.appendChild(new Placeholder(0));\n        }\n        return snippet;\n    }\n    _accept(type, value) {\n        if (type === undefined || this._token.type === type) {\n            let ret = !value ? true : this._scanner.tokenText(this._token);\n            this._token = this._scanner.next();\n            return ret;\n        }\n        return false;\n    }\n    _backTo(token) {\n        this._scanner.pos = token.pos + token.len;\n        this._token = token;\n        return false;\n    }\n    _until(type) {\n        const start = this._token;\n        while (this._token.type !== type) {\n            if (this._token.type === 14 /* EOF */) {\n                return false;\n            }\n            else if (this._token.type === 5 /* Backslash */) {\n                const nextToken = this._scanner.next();\n                if (nextToken.type !== 0 /* Dollar */\n                    && nextToken.type !== 4 /* CurlyClose */\n                    && nextToken.type !== 5 /* Backslash */) {\n                    return false;\n                }\n            }\n            this._token = this._scanner.next();\n        }\n        const value = this._scanner.value.substring(start.pos, this._token.pos).replace(/\\\\(\\$|}|\\\\)/g, '$1');\n        this._token = this._scanner.next();\n        return value;\n    }\n    _parse(marker) {\n        return this._parseEscaped(marker)\n            || this._parseTabstopOrVariableName(marker)\n            || this._parseComplexPlaceholder(marker)\n            || this._parseComplexVariable(marker)\n            || this._parseAnything(marker);\n    }\n    // \\$, \\\\, \\} -> just text\n    _parseEscaped(marker) {\n        let value;\n        if (value = this._accept(5 /* Backslash */, true)) {\n            // saw a backslash, append escaped token or that backslash\n            value = this._accept(0 /* Dollar */, true)\n                || this._accept(4 /* CurlyClose */, true)\n                || this._accept(5 /* Backslash */, true)\n                || value;\n            marker.appendChild(new Text(value));\n            return true;\n        }\n        return false;\n    }\n    // $foo -> variable, $1 -> tabstop\n    _parseTabstopOrVariableName(parent) {\n        let value;\n        const token = this._token;\n        const match = this._accept(0 /* Dollar */)\n            && (value = this._accept(9 /* VariableName */, true) || this._accept(8 /* Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        parent.appendChild(/^\\d+$/.test(value)\n            ? new Placeholder(Number(value))\n            : new Variable(value));\n        return true;\n    }\n    // ${1:<children>}, ${1} -> placeholder\n    _parseComplexPlaceholder(parent) {\n        let index;\n        const token = this._token;\n        const match = this._accept(0 /* Dollar */)\n            && this._accept(3 /* CurlyOpen */)\n            && (index = this._accept(8 /* Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const placeholder = new Placeholder(Number(index));\n        if (this._accept(1 /* Colon */)) {\n            // ${1:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* CurlyClose */)) {\n                    parent.appendChild(placeholder);\n                    return true;\n                }\n                if (this._parse(placeholder)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + index + ':'));\n                placeholder.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (placeholder.index > 0 && this._accept(7 /* Pipe */)) {\n            // ${1|one,two,three|}\n            const choice = new Choice();\n            while (true) {\n                if (this._parseChoiceElement(choice)) {\n                    if (this._accept(2 /* Comma */)) {\n                        // opt, -> more\n                        continue;\n                    }\n                    if (this._accept(7 /* Pipe */)) {\n                        placeholder.appendChild(choice);\n                        if (this._accept(4 /* CurlyClose */)) {\n                            // ..|} -> done\n                            parent.appendChild(placeholder);\n                            return true;\n                        }\n                    }\n                }\n                this._backTo(token);\n                return false;\n            }\n        }\n        else if (this._accept(6 /* Forwardslash */)) {\n            // ${1/<regex>/<format>/<options>}\n            if (this._parseTransform(placeholder)) {\n                parent.appendChild(placeholder);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* CurlyClose */)) {\n            // ${1}\n            parent.appendChild(placeholder);\n            return true;\n        }\n        else {\n            // ${1 <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseChoiceElement(parent) {\n        const token = this._token;\n        const values = [];\n        while (true) {\n            if (this._token.type === 2 /* Comma */ || this._token.type === 7 /* Pipe */) {\n                break;\n            }\n            let value;\n            if (value = this._accept(5 /* Backslash */, true)) {\n                // \\, \\|, or \\\\\n                value = this._accept(2 /* Comma */, true)\n                    || this._accept(7 /* Pipe */, true)\n                    || this._accept(5 /* Backslash */, true)\n                    || value;\n            }\n            else {\n                value = this._accept(undefined, true);\n            }\n            if (!value) {\n                // EOF\n                this._backTo(token);\n                return false;\n            }\n            values.push(value);\n        }\n        if (values.length === 0) {\n            this._backTo(token);\n            return false;\n        }\n        parent.appendChild(new Text(values.join('')));\n        return true;\n    }\n    // ${foo:<children>}, ${foo} -> variable\n    _parseComplexVariable(parent) {\n        let name;\n        const token = this._token;\n        const match = this._accept(0 /* Dollar */)\n            && this._accept(3 /* CurlyOpen */)\n            && (name = this._accept(9 /* VariableName */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const variable = new Variable(name);\n        if (this._accept(1 /* Colon */)) {\n            // ${foo:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* CurlyClose */)) {\n                    parent.appendChild(variable);\n                    return true;\n                }\n                if (this._parse(variable)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + name + ':'));\n                variable.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (this._accept(6 /* Forwardslash */)) {\n            // ${foo/<regex>/<format>/<options>}\n            if (this._parseTransform(variable)) {\n                parent.appendChild(variable);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* CurlyClose */)) {\n            // ${foo}\n            parent.appendChild(variable);\n            return true;\n        }\n        else {\n            // ${foo <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseTransform(parent) {\n        // ...<regex>/<format>/<options>}\n        let transform = new Transform();\n        let regexValue = '';\n        let regexOptions = '';\n        // (1) /regex\n        while (true) {\n            if (this._accept(6 /* Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* Backslash */, true)) {\n                escaped = this._accept(6 /* Forwardslash */, true) || escaped;\n                regexValue += escaped;\n                continue;\n            }\n            if (this._token.type !== 14 /* EOF */) {\n                regexValue += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        // (2) /format\n        while (true) {\n            if (this._accept(6 /* Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* Backslash */, true)) {\n                escaped = this._accept(5 /* Backslash */, true) || this._accept(6 /* Forwardslash */, true) || escaped;\n                transform.appendChild(new Text(escaped));\n                continue;\n            }\n            if (this._parseFormatString(transform) || this._parseAnything(transform)) {\n                continue;\n            }\n            return false;\n        }\n        // (3) /option\n        while (true) {\n            if (this._accept(4 /* CurlyClose */)) {\n                break;\n            }\n            if (this._token.type !== 14 /* EOF */) {\n                regexOptions += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        try {\n            transform.regexp = new RegExp(regexValue, regexOptions);\n        }\n        catch (e) {\n            // invalid regexp\n            return false;\n        }\n        parent.transform = transform;\n        return true;\n    }\n    _parseFormatString(parent) {\n        const token = this._token;\n        if (!this._accept(0 /* Dollar */)) {\n            return false;\n        }\n        let complex = false;\n        if (this._accept(3 /* CurlyOpen */)) {\n            complex = true;\n        }\n        let index = this._accept(8 /* Int */, true);\n        if (!index) {\n            this._backTo(token);\n            return false;\n        }\n        else if (!complex) {\n            // $1\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (this._accept(4 /* CurlyClose */)) {\n            // ${1}\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (!this._accept(1 /* Colon */)) {\n            this._backTo(token);\n            return false;\n        }\n        if (this._accept(6 /* Forwardslash */)) {\n            // ${1:/upcase}\n            let shorthand = this._accept(9 /* VariableName */, true);\n            if (!shorthand || !this._accept(4 /* CurlyClose */)) {\n                this._backTo(token);\n                return false;\n            }\n            else {\n                parent.appendChild(new FormatString(Number(index), shorthand));\n                return true;\n            }\n        }\n        else if (this._accept(11 /* Plus */)) {\n            // ${1:+<if>}\n            let ifValue = this._until(4 /* CurlyClose */);\n            if (ifValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, ifValue, undefined));\n                return true;\n            }\n        }\n        else if (this._accept(12 /* Dash */)) {\n            // ${2:-<else>}\n            let elseValue = this._until(4 /* CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        else if (this._accept(13 /* QuestionMark */)) {\n            // ${2:?<if>:<else>}\n            let ifValue = this._until(1 /* Colon */);\n            if (ifValue) {\n                let elseValue = this._until(4 /* CurlyClose */);\n                if (elseValue) {\n                    parent.appendChild(new FormatString(Number(index), undefined, ifValue, elseValue));\n                    return true;\n                }\n            }\n        }\n        else {\n            // ${1:<else>}\n            let elseValue = this._until(4 /* CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        this._backTo(token);\n        return false;\n    }\n    _parseAnything(marker) {\n        if (this._token.type !== 14 /* EOF */) {\n            marker.appendChild(new Text(this._scanner.tokenText(this._token)));\n            this._accept(undefined);\n            return true;\n        }\n        return false;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { normalizeDriveLetter } from '../../../../base/common/labels.js';\nimport * as path from '../../../../base/common/path.js';\nimport { dirname } from '../../../../base/common/resources.js';\nimport { commonPrefixLength, getLeadingWhitespace, isFalsyOrWhitespace, splitLines } from '../../../../base/common/strings.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { LanguageConfigurationRegistry } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { Text } from './snippetParser.js';\nimport * as nls from '../../../../nls.js';\nimport { isSingleFolderWorkspaceIdentifier, toWorkspaceIdentifier, WORKSPACE_EXTENSION } from '../../../../platform/workspaces/common/workspaces.js';\nexport const KnownSnippetVariableNames = Object.freeze({\n    'CURRENT_YEAR': true,\n    'CURRENT_YEAR_SHORT': true,\n    'CURRENT_MONTH': true,\n    'CURRENT_DATE': true,\n    'CURRENT_HOUR': true,\n    'CURRENT_MINUTE': true,\n    'CURRENT_SECOND': true,\n    'CURRENT_DAY_NAME': true,\n    'CURRENT_DAY_NAME_SHORT': true,\n    'CURRENT_MONTH_NAME': true,\n    'CURRENT_MONTH_NAME_SHORT': true,\n    'CURRENT_SECONDS_UNIX': true,\n    'SELECTION': true,\n    'CLIPBOARD': true,\n    'TM_SELECTED_TEXT': true,\n    'TM_CURRENT_LINE': true,\n    'TM_CURRENT_WORD': true,\n    'TM_LINE_INDEX': true,\n    'TM_LINE_NUMBER': true,\n    'TM_FILENAME': true,\n    'TM_FILENAME_BASE': true,\n    'TM_DIRECTORY': true,\n    'TM_FILEPATH': true,\n    'RELATIVE_FILEPATH': true,\n    'BLOCK_COMMENT_START': true,\n    'BLOCK_COMMENT_END': true,\n    'LINE_COMMENT': true,\n    'WORKSPACE_NAME': true,\n    'WORKSPACE_FOLDER': true,\n    'RANDOM': true,\n    'RANDOM_HEX': true,\n    'UUID': true\n});\nexport class CompositeSnippetVariableResolver {\n    constructor(_delegates) {\n        this._delegates = _delegates;\n        //\n    }\n    resolve(variable) {\n        for (const delegate of this._delegates) {\n            let value = delegate.resolve(variable);\n            if (value !== undefined) {\n                return value;\n            }\n        }\n        return undefined;\n    }\n}\nexport class SelectionBasedVariableResolver {\n    constructor(_model, _selection, _selectionIdx, _overtypingCapturer) {\n        this._model = _model;\n        this._selection = _selection;\n        this._selectionIdx = _selectionIdx;\n        this._overtypingCapturer = _overtypingCapturer;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'SELECTION' || name === 'TM_SELECTED_TEXT') {\n            let value = this._model.getValueInRange(this._selection) || undefined;\n            let isMultiline = this._selection.startLineNumber !== this._selection.endLineNumber;\n            // If there was no selected text, try to get last overtyped text\n            if (!value && this._overtypingCapturer) {\n                const info = this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);\n                if (info) {\n                    value = info.value;\n                    isMultiline = info.multiline;\n                }\n            }\n            if (value && isMultiline && variable.snippet) {\n                // Selection is a multiline string which we indentation we now\n                // need to adjust. We compare the indentation of this variable\n                // with the indentation at the editor position and add potential\n                // extra indentation to the value\n                const line = this._model.getLineContent(this._selection.startLineNumber);\n                const lineLeadingWhitespace = getLeadingWhitespace(line, 0, this._selection.startColumn - 1);\n                let varLeadingWhitespace = lineLeadingWhitespace;\n                variable.snippet.walk(marker => {\n                    if (marker === variable) {\n                        return false;\n                    }\n                    if (marker instanceof Text) {\n                        varLeadingWhitespace = getLeadingWhitespace(splitLines(marker.value).pop());\n                    }\n                    return true;\n                });\n                const whitespaceCommonLength = commonPrefixLength(varLeadingWhitespace, lineLeadingWhitespace);\n                value = value.replace(/(\\r\\n|\\r|\\n)(.*)/g, (m, newline, rest) => `${newline}${varLeadingWhitespace.substr(whitespaceCommonLength)}${rest}`);\n            }\n            return value;\n        }\n        else if (name === 'TM_CURRENT_LINE') {\n            return this._model.getLineContent(this._selection.positionLineNumber);\n        }\n        else if (name === 'TM_CURRENT_WORD') {\n            const info = this._model.getWordAtPosition({\n                lineNumber: this._selection.positionLineNumber,\n                column: this._selection.positionColumn\n            });\n            return info && info.word || undefined;\n        }\n        else if (name === 'TM_LINE_INDEX') {\n            return String(this._selection.positionLineNumber - 1);\n        }\n        else if (name === 'TM_LINE_NUMBER') {\n            return String(this._selection.positionLineNumber);\n        }\n        return undefined;\n    }\n}\nexport class ModelBasedVariableResolver {\n    constructor(_labelService, _model) {\n        this._labelService = _labelService;\n        this._model = _model;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'TM_FILENAME') {\n            return path.basename(this._model.uri.fsPath);\n        }\n        else if (name === 'TM_FILENAME_BASE') {\n            const name = path.basename(this._model.uri.fsPath);\n            const idx = name.lastIndexOf('.');\n            if (idx <= 0) {\n                return name;\n            }\n            else {\n                return name.slice(0, idx);\n            }\n        }\n        else if (name === 'TM_DIRECTORY') {\n            if (path.dirname(this._model.uri.fsPath) === '.') {\n                return '';\n            }\n            return this._labelService.getUriLabel(dirname(this._model.uri));\n        }\n        else if (name === 'TM_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri);\n        }\n        else if (name === 'RELATIVE_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri, { relative: true, noPrefix: true });\n        }\n        return undefined;\n    }\n}\nexport class ClipboardBasedVariableResolver {\n    constructor(_readClipboardText, _selectionIdx, _selectionCount, _spread) {\n        this._readClipboardText = _readClipboardText;\n        this._selectionIdx = _selectionIdx;\n        this._selectionCount = _selectionCount;\n        this._spread = _spread;\n        //\n    }\n    resolve(variable) {\n        if (variable.name !== 'CLIPBOARD') {\n            return undefined;\n        }\n        const clipboardText = this._readClipboardText();\n        if (!clipboardText) {\n            return undefined;\n        }\n        // `spread` is assigning each cursor a line of the clipboard\n        // text whenever there the line count equals the cursor count\n        // and when enabled\n        if (this._spread) {\n            const lines = clipboardText.split(/\\r\\n|\\n|\\r/).filter(s => !isFalsyOrWhitespace(s));\n            if (lines.length === this._selectionCount) {\n                return lines[this._selectionIdx];\n            }\n        }\n        return clipboardText;\n    }\n}\nexport class CommentBasedVariableResolver {\n    constructor(_model, _selection) {\n        this._model = _model;\n        this._selection = _selection;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        const langId = this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber, this._selection.selectionStartColumn);\n        const config = LanguageConfigurationRegistry.getComments(langId);\n        if (!config) {\n            return undefined;\n        }\n        if (name === 'LINE_COMMENT') {\n            return config.lineCommentToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_START') {\n            return config.blockCommentStartToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_END') {\n            return config.blockCommentEndToken || undefined;\n        }\n        return undefined;\n    }\n}\nexport class TimeBasedVariableResolver {\n    constructor() {\n        this._date = new Date();\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'CURRENT_YEAR') {\n            return String(this._date.getFullYear());\n        }\n        else if (name === 'CURRENT_YEAR_SHORT') {\n            return String(this._date.getFullYear()).slice(-2);\n        }\n        else if (name === 'CURRENT_MONTH') {\n            return String(this._date.getMonth().valueOf() + 1).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DATE') {\n            return String(this._date.getDate().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_HOUR') {\n            return String(this._date.getHours().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_MINUTE') {\n            return String(this._date.getMinutes().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_SECOND') {\n            return String(this._date.getSeconds().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DAY_NAME') {\n            return TimeBasedVariableResolver.dayNames[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_DAY_NAME_SHORT') {\n            return TimeBasedVariableResolver.dayNamesShort[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME') {\n            return TimeBasedVariableResolver.monthNames[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME_SHORT') {\n            return TimeBasedVariableResolver.monthNamesShort[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_SECONDS_UNIX') {\n            return String(Math.floor(this._date.getTime() / 1000));\n        }\n        return undefined;\n    }\n}\nTimeBasedVariableResolver.dayNames = [nls.localize('Sunday', \"Sunday\"), nls.localize('Monday', \"Monday\"), nls.localize('Tuesday', \"Tuesday\"), nls.localize('Wednesday', \"Wednesday\"), nls.localize('Thursday', \"Thursday\"), nls.localize('Friday', \"Friday\"), nls.localize('Saturday', \"Saturday\")];\nTimeBasedVariableResolver.dayNamesShort = [nls.localize('SundayShort', \"Sun\"), nls.localize('MondayShort', \"Mon\"), nls.localize('TuesdayShort', \"Tue\"), nls.localize('WednesdayShort', \"Wed\"), nls.localize('ThursdayShort', \"Thu\"), nls.localize('FridayShort', \"Fri\"), nls.localize('SaturdayShort', \"Sat\")];\nTimeBasedVariableResolver.monthNames = [nls.localize('January', \"January\"), nls.localize('February', \"February\"), nls.localize('March', \"March\"), nls.localize('April', \"April\"), nls.localize('May', \"May\"), nls.localize('June', \"June\"), nls.localize('July', \"July\"), nls.localize('August', \"August\"), nls.localize('September', \"September\"), nls.localize('October', \"October\"), nls.localize('November', \"November\"), nls.localize('December', \"December\")];\nTimeBasedVariableResolver.monthNamesShort = [nls.localize('JanuaryShort', \"Jan\"), nls.localize('FebruaryShort', \"Feb\"), nls.localize('MarchShort', \"Mar\"), nls.localize('AprilShort', \"Apr\"), nls.localize('MayShort', \"May\"), nls.localize('JuneShort', \"Jun\"), nls.localize('JulyShort', \"Jul\"), nls.localize('AugustShort', \"Aug\"), nls.localize('SeptemberShort', \"Sep\"), nls.localize('OctoberShort', \"Oct\"), nls.localize('NovemberShort', \"Nov\"), nls.localize('DecemberShort', \"Dec\")];\nexport class WorkspaceBasedVariableResolver {\n    constructor(_workspaceService) {\n        this._workspaceService = _workspaceService;\n        //\n    }\n    resolve(variable) {\n        if (!this._workspaceService) {\n            return undefined;\n        }\n        const workspaceIdentifier = toWorkspaceIdentifier(this._workspaceService.getWorkspace());\n        if (!workspaceIdentifier) {\n            return undefined;\n        }\n        if (variable.name === 'WORKSPACE_NAME') {\n            return this._resolveWorkspaceName(workspaceIdentifier);\n        }\n        else if (variable.name === 'WORKSPACE_FOLDER') {\n            return this._resoveWorkspacePath(workspaceIdentifier);\n        }\n        return undefined;\n    }\n    _resolveWorkspaceName(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return path.basename(workspaceIdentifier.uri.path);\n        }\n        let filename = path.basename(workspaceIdentifier.configPath.path);\n        if (filename.endsWith(WORKSPACE_EXTENSION)) {\n            filename = filename.substr(0, filename.length - WORKSPACE_EXTENSION.length - 1);\n        }\n        return filename;\n    }\n    _resoveWorkspacePath(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return normalizeDriveLetter(workspaceIdentifier.uri.fsPath);\n        }\n        let filename = path.basename(workspaceIdentifier.configPath.path);\n        let folderpath = workspaceIdentifier.configPath.fsPath;\n        if (folderpath.endsWith(filename)) {\n            folderpath = folderpath.substr(0, folderpath.length - filename.length - 1);\n        }\n        return (folderpath ? normalizeDriveLetter(folderpath) : '/');\n    }\n}\nexport class RandomBasedVariableResolver {\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'RANDOM') {\n            return Math.random().toString().slice(-6);\n        }\n        else if (name === 'RANDOM_HEX') {\n            return Math.random().toString(16).slice(-6);\n        }\n        else if (name === 'UUID') {\n            return generateUuid();\n        }\n        return undefined;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { groupBy } from '../../../../base/common/arrays.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace } from '../../../../base/common/strings.js';\nimport './snippetSession.css';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { Choice, Placeholder, SnippetParser, Text } from './snippetParser.js';\nimport { ClipboardBasedVariableResolver, CommentBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, RandomBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, WorkspaceBasedVariableResolver } from './snippetVariables.js';\nexport class OneSnippet {\n    constructor(_editor, _snippet, _offset, _snippetLineLeadingWhitespace) {\n        this._editor = _editor;\n        this._snippet = _snippet;\n        this._offset = _offset;\n        this._snippetLineLeadingWhitespace = _snippetLineLeadingWhitespace;\n        this._nestingLevel = 1;\n        this._placeholderGroups = groupBy(_snippet.placeholders, Placeholder.compareByIndex);\n        this._placeholderGroupsIdx = -1;\n    }\n    dispose() {\n        if (this._placeholderDecorations) {\n            this._editor.deltaDecorations([...this._placeholderDecorations.values()], []);\n        }\n        this._placeholderGroups.length = 0;\n    }\n    _initDecorations() {\n        if (this._placeholderDecorations) {\n            // already initialized\n            return;\n        }\n        this._placeholderDecorations = new Map();\n        const model = this._editor.getModel();\n        this._editor.changeDecorations(accessor => {\n            // create a decoration for each placeholder\n            for (const placeholder of this._snippet.placeholders) {\n                const placeholderOffset = this._snippet.offset(placeholder);\n                const placeholderLen = this._snippet.fullLen(placeholder);\n                const range = Range.fromPositions(model.getPositionAt(this._offset + placeholderOffset), model.getPositionAt(this._offset + placeholderOffset + placeholderLen));\n                const options = placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive;\n                const handle = accessor.addDecoration(range, options);\n                this._placeholderDecorations.set(placeholder, handle);\n            }\n        });\n    }\n    move(fwd) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this._initDecorations();\n        // Transform placeholder text if necessary\n        if (this._placeholderGroupsIdx >= 0) {\n            let operations = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                // Check if the placeholder has a transformation\n                if (placeholder.transform) {\n                    const id = this._placeholderDecorations.get(placeholder);\n                    const range = this._editor.getModel().getDecorationRange(id);\n                    const currentValue = this._editor.getModel().getValueInRange(range);\n                    const transformedValueLines = placeholder.transform.resolve(currentValue).split(/\\r\\n|\\r|\\n/);\n                    // fix indentation for transformed lines\n                    for (let i = 1; i < transformedValueLines.length; i++) {\n                        transformedValueLines[i] = this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace + transformedValueLines[i]);\n                    }\n                    operations.push(EditOperation.replace(range, transformedValueLines.join(this._editor.getModel().getEOL())));\n                }\n            }\n            if (operations.length > 0) {\n                this._editor.executeEdits('snippet.placeholderTransform', operations);\n            }\n        }\n        let couldSkipThisPlaceholder = false;\n        if (fwd === true && this._placeholderGroupsIdx < this._placeholderGroups.length - 1) {\n            this._placeholderGroupsIdx += 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else if (fwd === false && this._placeholderGroupsIdx > 0) {\n            this._placeholderGroupsIdx -= 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else {\n            // the selection of the current placeholder might\n            // not acurate any more -> simply restore it\n        }\n        const newSelections = this._editor.getModel().changeDecorations(accessor => {\n            const activePlaceholders = new Set();\n            // change stickiness to always grow when typing at its edges\n            // because these decorations represent the currently active\n            // tabstop.\n            // Special case #1: reaching the final tabstop\n            // Special case #2: placeholders enclosing active placeholders\n            const selections = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                selections.push(new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn));\n                // consider to skip this placeholder index when the decoration\n                // range is empty but when the placeholder wasn't. that's a strong\n                // hint that the placeholder has been deleted. (all placeholder must match this)\n                couldSkipThisPlaceholder = couldSkipThisPlaceholder && this._hasPlaceholderBeenCollapsed(placeholder);\n                accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                activePlaceholders.add(placeholder);\n                for (const enclosingPlaceholder of this._snippet.enclosingPlaceholders(placeholder)) {\n                    const id = this._placeholderDecorations.get(enclosingPlaceholder);\n                    accessor.changeDecorationOptions(id, enclosingPlaceholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                    activePlaceholders.add(enclosingPlaceholder);\n                }\n            }\n            // change stickness to never grow when typing at its edges\n            // so that in-active tabstops never grow\n            for (const [placeholder, id] of this._placeholderDecorations) {\n                if (!activePlaceholders.has(placeholder)) {\n                    accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive);\n                }\n            }\n            return selections;\n        });\n        return !couldSkipThisPlaceholder ? newSelections !== null && newSelections !== void 0 ? newSelections : [] : this.move(fwd);\n    }\n    _hasPlaceholderBeenCollapsed(placeholder) {\n        // A placeholder is empty when it wasn't empty when authored but\n        // when its tracking decoration is empty. This also applies to all\n        // potential parent placeholders\n        let marker = placeholder;\n        while (marker) {\n            if (marker instanceof Placeholder) {\n                const id = this._placeholderDecorations.get(marker);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (range.isEmpty() && marker.toString().length > 0) {\n                    return true;\n                }\n            }\n            marker = marker.parent;\n        }\n        return false;\n    }\n    get isAtFirstPlaceholder() {\n        return this._placeholderGroupsIdx <= 0 || this._placeholderGroups.length === 0;\n    }\n    get isAtLastPlaceholder() {\n        return this._placeholderGroupsIdx === this._placeholderGroups.length - 1;\n    }\n    get hasPlaceholder() {\n        return this._snippet.placeholders.length > 0;\n    }\n    computePossibleSelections() {\n        const result = new Map();\n        for (const placeholdersWithEqualIndex of this._placeholderGroups) {\n            let ranges;\n            for (const placeholder of placeholdersWithEqualIndex) {\n                if (placeholder.isFinalTabstop) {\n                    // ignore those\n                    break;\n                }\n                if (!ranges) {\n                    ranges = [];\n                    result.set(placeholder.index, ranges);\n                }\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (!range) {\n                    // one of the placeholder lost its decoration and\n                    // therefore we bail out and pretend the placeholder\n                    // (with its mirrors) doesn't exist anymore.\n                    result.delete(placeholder.index);\n                    break;\n                }\n                ranges.push(range);\n            }\n        }\n        return result;\n    }\n    get choice() {\n        return this._placeholderGroups[this._placeholderGroupsIdx][0].choice;\n    }\n    merge(others) {\n        const model = this._editor.getModel();\n        this._nestingLevel *= 10;\n        this._editor.changeDecorations(accessor => {\n            // For each active placeholder take one snippet and merge it\n            // in that the placeholder (can be many for `$1foo$1foo`). Because\n            // everything is sorted by editor selection we can simply remove\n            // elements from the beginning of the array\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const nested = others.shift();\n                console.assert(!nested._placeholderDecorations);\n                // Massage placeholder-indicies of the nested snippet to be\n                // sorted right after the insertion point. This ensures we move\n                // through the placeholders in the correct order\n                const indexLastPlaceholder = nested._snippet.placeholderInfo.last.index;\n                for (const nestedPlaceholder of nested._snippet.placeholderInfo.all) {\n                    if (nestedPlaceholder.isFinalTabstop) {\n                        nestedPlaceholder.index = placeholder.index + ((indexLastPlaceholder + 1) / this._nestingLevel);\n                    }\n                    else {\n                        nestedPlaceholder.index = placeholder.index + (nestedPlaceholder.index / this._nestingLevel);\n                    }\n                }\n                this._snippet.replace(placeholder, nested._snippet.children);\n                // Remove the placeholder at which position are inserting\n                // the snippet and also remove its decoration.\n                const id = this._placeholderDecorations.get(placeholder);\n                accessor.removeDecoration(id);\n                this._placeholderDecorations.delete(placeholder);\n                // For each *new* placeholder we create decoration to monitor\n                // how and if it grows/shrinks.\n                for (const placeholder of nested._snippet.placeholders) {\n                    const placeholderOffset = nested._snippet.offset(placeholder);\n                    const placeholderLen = nested._snippet.fullLen(placeholder);\n                    const range = Range.fromPositions(model.getPositionAt(nested._offset + placeholderOffset), model.getPositionAt(nested._offset + placeholderOffset + placeholderLen));\n                    const handle = accessor.addDecoration(range, OneSnippet._decor.inactive);\n                    this._placeholderDecorations.set(placeholder, handle);\n                }\n            }\n            // Last, re-create the placeholder groups by sorting placeholders by their index.\n            this._placeholderGroups = groupBy(this._snippet.placeholders, Placeholder.compareByIndex);\n        });\n    }\n}\nOneSnippet._decor = {\n    active: ModelDecorationOptions.register({ description: 'snippet-placeholder-1', stickiness: 0 /* AlwaysGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    inactive: ModelDecorationOptions.register({ description: 'snippet-placeholder-2', stickiness: 1 /* NeverGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    activeFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-3', stickiness: 1 /* NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n    inactiveFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-4', stickiness: 1 /* NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n};\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nexport class SnippetSession {\n    constructor(editor, template, options = _defaultOptions) {\n        this._templateMerges = [];\n        this._snippets = [];\n        this._editor = editor;\n        this._template = template;\n        this._options = options;\n    }\n    static adjustWhitespace(model, position, snippet, adjustIndentation, adjustNewlines) {\n        const line = model.getLineContent(position.lineNumber);\n        const lineLeadingWhitespace = getLeadingWhitespace(line, 0, position.column - 1);\n        // the snippet as inserted\n        let snippetTextString;\n        snippet.walk(marker => {\n            // all text elements that are not inside choice\n            if (!(marker instanceof Text) || marker.parent instanceof Choice) {\n                return true;\n            }\n            const lines = marker.value.split(/\\r\\n|\\r|\\n/);\n            if (adjustIndentation) {\n                // adjust indentation of snippet test\n                // -the snippet-start doesn't get extra-indented (lineLeadingWhitespace), only normalized\n                // -all N+1 lines get extra-indented and normalized\n                // -the text start get extra-indented and normalized when following a linebreak\n                const offset = snippet.offset(marker);\n                if (offset === 0) {\n                    // snippet start\n                    lines[0] = model.normalizeIndentation(lines[0]);\n                }\n                else {\n                    // check if text start is after a linebreak\n                    snippetTextString = snippetTextString !== null && snippetTextString !== void 0 ? snippetTextString : snippet.toString();\n                    let prevChar = snippetTextString.charCodeAt(offset - 1);\n                    if (prevChar === 10 /* LineFeed */ || prevChar === 13 /* CarriageReturn */) {\n                        lines[0] = model.normalizeIndentation(lineLeadingWhitespace + lines[0]);\n                    }\n                }\n                for (let i = 1; i < lines.length; i++) {\n                    lines[i] = model.normalizeIndentation(lineLeadingWhitespace + lines[i]);\n                }\n            }\n            const newValue = lines.join(model.getEOL());\n            if (newValue !== marker.value) {\n                marker.parent.replace(marker, [new Text(newValue)]);\n                snippetTextString = undefined;\n            }\n            return true;\n        });\n        return lineLeadingWhitespace;\n    }\n    static adjustSelection(model, selection, overwriteBefore, overwriteAfter) {\n        if (overwriteBefore !== 0 || overwriteAfter !== 0) {\n            // overwrite[Before|After] is compute using the position, not the whole\n            // selection. therefore we adjust the selection around that position\n            const { positionLineNumber, positionColumn } = selection;\n            const positionColumnBefore = positionColumn - overwriteBefore;\n            const positionColumnAfter = positionColumn + overwriteAfter;\n            const range = model.validateRange({\n                startLineNumber: positionLineNumber,\n                startColumn: positionColumnBefore,\n                endLineNumber: positionLineNumber,\n                endColumn: positionColumnAfter\n            });\n            selection = Selection.createWithDirection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn, selection.getDirection());\n        }\n        return selection;\n    }\n    static createEditsAndSnippets(editor, template, overwriteBefore, overwriteAfter, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer) {\n        const edits = [];\n        const snippets = [];\n        if (!editor.hasModel()) {\n            return { edits, snippets };\n        }\n        const model = editor.getModel();\n        const workspaceService = editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService));\n        const modelBasedVariableResolver = editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model));\n        const readClipboardText = () => clipboardText;\n        let delta = 0;\n        // know what text the overwrite[Before|After] extensions\n        // of the primary curser have selected because only when\n        // secondary selections extend to the same text we can grow them\n        let firstBeforeText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), overwriteBefore, 0));\n        let firstAfterText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), 0, overwriteAfter));\n        // remember the first non-whitespace column to decide if\n        // `keepWhitespace` should be overruled for secondary selections\n        let firstLineFirstNonWhitespace = model.getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber);\n        // sort selections by their start position but remeber\n        // the original index. that allows you to create correct\n        // offset-based selection logic without changing the\n        // primary selection\n        const indexedSelections = editor.getSelections()\n            .map((selection, idx) => ({ selection, idx }))\n            .sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        for (const { selection, idx } of indexedSelections) {\n            // extend selection with the `overwriteBefore` and `overwriteAfter` and then\n            // compare if this matches the extensions of the primary selection\n            let extensionBefore = SnippetSession.adjustSelection(model, selection, overwriteBefore, 0);\n            let extensionAfter = SnippetSession.adjustSelection(model, selection, 0, overwriteAfter);\n            if (firstBeforeText !== model.getValueInRange(extensionBefore)) {\n                extensionBefore = selection;\n            }\n            if (firstAfterText !== model.getValueInRange(extensionAfter)) {\n                extensionAfter = selection;\n            }\n            // merge the before and after selection into one\n            const snippetSelection = selection\n                .setStartPosition(extensionBefore.startLineNumber, extensionBefore.startColumn)\n                .setEndPosition(extensionAfter.endLineNumber, extensionAfter.endColumn);\n            const snippet = new SnippetParser().parse(template, true, enforceFinalTabstop);\n            // adjust the template string to match the indentation and\n            // whitespace rules of this insert location (can be different for each cursor)\n            // happens when being asked for (default) or when this is a secondary\n            // cursor and the leading whitespace is different\n            const start = snippetSelection.getStartPosition();\n            const snippetLineLeadingWhitespace = SnippetSession.adjustWhitespace(model, start, snippet, adjustWhitespace || (idx > 0 && firstLineFirstNonWhitespace !== model.getLineFirstNonWhitespaceColumn(selection.positionLineNumber)), true);\n            snippet.resolveVariables(new CompositeSnippetVariableResolver([\n                modelBasedVariableResolver,\n                new ClipboardBasedVariableResolver(readClipboardText, idx, indexedSelections.length, editor.getOption(71 /* multiCursorPaste */) === 'spread'),\n                new SelectionBasedVariableResolver(model, selection, idx, overtypingCapturer),\n                new CommentBasedVariableResolver(model, selection),\n                new TimeBasedVariableResolver,\n                new WorkspaceBasedVariableResolver(workspaceService),\n                new RandomBasedVariableResolver,\n            ]));\n            const offset = model.getOffsetAt(start) + delta;\n            delta += snippet.toString().length - model.getValueLengthInRange(snippetSelection);\n            // store snippets with the index of their originating selection.\n            // that ensures the primiary cursor stays primary despite not being\n            // the one with lowest start position\n            edits[idx] = EditOperation.replace(snippetSelection, snippet.toString());\n            edits[idx].identifier = { major: idx, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\n            snippets[idx] = new OneSnippet(editor, snippet, offset, snippetLineLeadingWhitespace);\n        }\n        return { edits, snippets };\n    }\n    dispose() {\n        dispose(this._snippets);\n    }\n    _logInfo() {\n        return `template=\"${this._template}\", merged_templates=\"${this._templateMerges.join(' -> ')}\"`;\n    }\n    insert() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // make insert edit and start with first selections\n        const { edits, snippets } = SnippetSession.createEditsAndSnippets(this._editor, this._template, this._options.overwriteBefore, this._options.overwriteAfter, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer);\n        this._snippets = snippets;\n        this._editor.executeEdits('snippet', edits, undoEdits => {\n            if (this._snippets[0].hasPlaceholder) {\n                return this._move(true);\n            }\n            else {\n                return undoEdits\n                    .filter(edit => !!edit.identifier) // only use our undo edits\n                    .map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n            }\n        });\n        this._editor.revealRange(this._editor.getSelections()[0]);\n    }\n    merge(template, options = _defaultOptions) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._templateMerges.push([this._snippets[0]._nestingLevel, this._snippets[0]._placeholderGroupsIdx, template]);\n        const { edits, snippets } = SnippetSession.createEditsAndSnippets(this._editor, template, options.overwriteBefore, options.overwriteAfter, true, options.adjustWhitespace, options.clipboardText, options.overtypingCapturer);\n        this._editor.executeEdits('snippet', edits, undoEdits => {\n            for (const snippet of this._snippets) {\n                snippet.merge(snippets);\n            }\n            console.assert(snippets.length === 0);\n            if (this._snippets[0].hasPlaceholder) {\n                return this._move(undefined);\n            }\n            else {\n                return (undoEdits\n                    .filter(edit => !!edit.identifier) // only use our undo edits\n                    .map(edit => Selection.fromPositions(edit.range.getEndPosition())));\n            }\n        });\n    }\n    next() {\n        const newSelections = this._move(true);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    prev() {\n        const newSelections = this._move(false);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    _move(fwd) {\n        const selections = [];\n        for (const snippet of this._snippets) {\n            const oneSelection = snippet.move(fwd);\n            selections.push(...oneSelection);\n        }\n        return selections;\n    }\n    get isAtFirstPlaceholder() {\n        return this._snippets[0].isAtFirstPlaceholder;\n    }\n    get isAtLastPlaceholder() {\n        return this._snippets[0].isAtLastPlaceholder;\n    }\n    get hasPlaceholder() {\n        return this._snippets[0].hasPlaceholder;\n    }\n    get choice() {\n        return this._snippets[0].choice;\n    }\n    isSelectionWithinPlaceholders() {\n        if (!this.hasPlaceholder) {\n            return false;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length < this._snippets.length) {\n            // this means we started snippet mode with N\n            // selections and have M (N > M) selections.\n            // So one snippet is without selection -> cancel\n            return false;\n        }\n        let allPossibleSelections = new Map();\n        for (const snippet of this._snippets) {\n            const possibleSelections = snippet.computePossibleSelections();\n            // for the first snippet find the placeholder (and its ranges)\n            // that contain at least one selection. for all remaining snippets\n            // the same placeholder (and their ranges) must be used.\n            if (allPossibleSelections.size === 0) {\n                for (const [index, ranges] of possibleSelections) {\n                    ranges.sort(Range.compareRangesUsingStarts);\n                    for (const selection of selections) {\n                        if (ranges[0].containsRange(selection)) {\n                            allPossibleSelections.set(index, []);\n                            break;\n                        }\n                    }\n                }\n            }\n            if (allPossibleSelections.size === 0) {\n                // return false if we couldn't associate a selection to\n                // this (the first) snippet\n                return false;\n            }\n            // add selections from 'this' snippet so that we know all\n            // selections for this placeholder\n            allPossibleSelections.forEach((array, index) => {\n                array.push(...possibleSelections.get(index));\n            });\n        }\n        // sort selections (and later placeholder-ranges). then walk both\n        // arrays and make sure the placeholder-ranges contain the corresponding\n        // selection\n        selections.sort(Range.compareRangesUsingStarts);\n        for (let [index, ranges] of allPossibleSelections) {\n            if (ranges.length !== selections.length) {\n                allPossibleSelections.delete(index);\n                continue;\n            }\n            ranges.sort(Range.compareRangesUsingStarts);\n            for (let i = 0; i < ranges.length; i++) {\n                if (!ranges[i].containsRange(selections[i])) {\n                    allPossibleSelections.delete(index);\n                    continue;\n                }\n            }\n        }\n        // from all possible selections we have deleted those\n        // that don't match with the current selection. if we don't\n        // have any left, we don't have a selection anymore\n        return allPossibleSelections.size > 0;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { canceled, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport * as modes from '../../../common/languages.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const Context = {\n    Visible: new RawContextKey('suggestWidgetVisible', false, localize('suggestWidgetVisible', \"Whether suggestion are visible\")),\n    DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\n    HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\n    InsertMode: new RawContextKey('suggestionInsertMode', undefined, { type: 'string', description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\") }),\n    CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\")),\n};\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\nexport class CompletionItem {\n    constructor(position, completion, container, provider) {\n        this.position = position;\n        this.completion = completion;\n        this.container = container;\n        this.provider = provider;\n        // validation\n        this.isInvalid = false;\n        // sorting, filtering\n        this.score = FuzzyScore.Default;\n        this.distance = 0;\n        this.textLabel = typeof completion.label === 'string'\n            ? completion.label\n            : completion.label.label;\n        // ensure lower-variants (perf)\n        this.labelLow = this.textLabel.toLowerCase();\n        // validate label\n        this.isInvalid = !this.textLabel;\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\n        // normalize ranges\n        if (Range.isIRange(completion.range)) {\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            // validate range\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\n        }\n        else {\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\n            // validate ranges\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace)\n                || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber\n                || completion.range.insert.startColumn !== completion.range.replace.startColumn;\n        }\n        // create the suggestion resolver\n        if (typeof provider.resolveCompletionItem !== 'function') {\n            this._resolveCache = Promise.resolve();\n            this._isResolved = true;\n        }\n    }\n    // ---- resolving\n    get isResolved() {\n        return !!this._isResolved;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._resolveCache) {\n                const sub = token.onCancellationRequested(() => {\n                    this._resolveCache = undefined;\n                    this._isResolved = false;\n                });\n                this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\n                    Object.assign(this.completion, value);\n                    this._isResolved = true;\n                    sub.dispose();\n                }, err => {\n                    if (isCancellationError(err)) {\n                        // the IPC queue will reject the request with the\n                        // cancellation error -> reset cached\n                        this._resolveCache = undefined;\n                        this._isResolved = false;\n                    }\n                });\n            }\n            return this._resolveCache;\n        });\n    }\n}\nexport class CompletionOptions {\n    constructor(snippetSortOrder = 2 /* Bottom */, kindFilter = new Set(), providerFilter = new Set(), showDeprecated = true) {\n        this.snippetSortOrder = snippetSortOrder;\n        this.kindFilter = kindFilter;\n        this.providerFilter = providerFilter;\n        this.showDeprecated = showDeprecated;\n    }\n}\nCompletionOptions.default = new CompletionOptions();\nlet _snippetSuggestSupport;\nexport function getSnippetSuggestSupport() {\n    return _snippetSuggestSupport;\n}\nexport class CompletionItemModel {\n    constructor(items, needsClipboard, durations, disposable) {\n        this.items = items;\n        this.needsClipboard = needsClipboard;\n        this.durations = durations;\n        this.disposable = disposable;\n    }\n}\nexport function provideSuggestionItems(model, position, options = CompletionOptions.default, context = { triggerKind: 0 /* Invoke */ }, token = CancellationToken.None) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sw = new StopWatch(true);\n        position = position.clone();\n        const word = model.getWordAtPosition(position);\n        const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\n        const defaultRange = { replace: defaultReplaceRange, insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column) };\n        const result = [];\n        const disposables = new DisposableStore();\n        const durations = [];\n        let needsClipboard = false;\n        const onCompletionList = (provider, container, sw) => {\n            var _a, _b, _c;\n            let didAddResult = false;\n            if (!container) {\n                return didAddResult;\n            }\n            for (let suggestion of container.suggestions) {\n                if (!options.kindFilter.has(suggestion.kind)) {\n                    // skip if not showing deprecated suggestions\n                    if (!options.showDeprecated && ((_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.tags) === null || _a === void 0 ? void 0 : _a.includes(1 /* Deprecated */))) {\n                        continue;\n                    }\n                    // fill in default range when missing\n                    if (!suggestion.range) {\n                        suggestion.range = defaultRange;\n                    }\n                    // fill in default sortText when missing\n                    if (!suggestion.sortText) {\n                        suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\n                    }\n                    if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* InsertAsSnippet */) {\n                        needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\n                    }\n                    result.push(new CompletionItem(position, suggestion, container, provider));\n                    didAddResult = true;\n                }\n            }\n            if (isDisposable(container)) {\n                disposables.add(container);\n            }\n            durations.push({\n                providerName: (_b = provider._debugDisplayName) !== null && _b !== void 0 ? _b : 'unkown_provider', elapsedProvider: (_c = container.duration) !== null && _c !== void 0 ? _c : -1, elapsedOverall: sw.elapsed()\n            });\n            return didAddResult;\n        };\n        // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\n        // do so - no snippet filter, no special-providers-only request\n        const snippetCompletions = (() => __awaiter(this, void 0, void 0, function* () {\n            if (!_snippetSuggestSupport || options.kindFilter.has(27 /* Snippet */)) {\n                return;\n            }\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\n                return;\n            }\n            const sw = new StopWatch(true);\n            const list = yield _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\n            onCompletionList(_snippetSuggestSupport, list, sw);\n        }))();\n        // add suggestions from contributed providers - providers are ordered in groups of\n        // equal score and once a group produces a result the process stops\n        // get provider groups, always add snippet suggestion provider\n        for (let providerGroup of modes.CompletionProviderRegistry.orderedGroups(model)) {\n            // for each support in the group ask for suggestions\n            let didAddResult = false;\n            yield Promise.all(providerGroup.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n                    return;\n                }\n                try {\n                    const sw = new StopWatch(true);\n                    const list = yield provider.provideCompletionItems(model, position, context, token);\n                    didAddResult = onCompletionList(provider, list, sw) || didAddResult;\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            if (didAddResult || token.isCancellationRequested) {\n                break;\n            }\n        }\n        yield snippetCompletions;\n        if (token.isCancellationRequested) {\n            disposables.dispose();\n            return Promise.reject(canceled());\n        }\n        return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, { entries: durations, elapsed: sw.elapsed() }, disposables);\n    });\n}\nfunction defaultComparator(a, b) {\n    // check with 'sortText'\n    if (a.sortTextLow && b.sortTextLow) {\n        if (a.sortTextLow < b.sortTextLow) {\n            return -1;\n        }\n        else if (a.sortTextLow > b.sortTextLow) {\n            return 1;\n        }\n    }\n    // check with 'label'\n    if (a.completion.label < b.completion.label) {\n        return -1;\n    }\n    else if (a.completion.label > b.completion.label) {\n        return 1;\n    }\n    // check with 'type'\n    return a.completion.kind - b.completion.kind;\n}\nfunction snippetUpComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* Snippet */) {\n            return -1;\n        }\n        else if (b.completion.kind === 27 /* Snippet */) {\n            return 1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nfunction snippetDownComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* Snippet */) {\n            return 1;\n        }\n        else if (b.completion.kind === 27 /* Snippet */) {\n            return -1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nconst _snippetComparators = new Map();\n_snippetComparators.set(0 /* Top */, snippetUpComparator);\n_snippetComparators.set(2 /* Bottom */, snippetDownComparator);\n_snippetComparators.set(1 /* Inline */, defaultComparator);\nexport function getSuggestionComparator(snippetConfig) {\n    return _snippetComparators.get(snippetConfig);\n}\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter, maxItemsToResolve] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = {\n            incomplete: false,\n            suggestions: []\n        };\n        const resolving = [];\n        const completions = yield provideSuggestionItems(ref.object.textEditorModel, Position.lift(position), undefined, { triggerCharacter, triggerKind: triggerCharacter ? 1 /* TriggerCharacter */ : 0 /* Invoke */ });\n        for (const item of completions.items) {\n            if (resolving.length < (maxItemsToResolve !== null && maxItemsToResolve !== void 0 ? maxItemsToResolve : 0)) {\n                resolving.push(item.resolve(CancellationToken.None));\n            }\n            result.incomplete = result.incomplete || item.container.incomplete;\n            result.suggestions.push(item.completion);\n        }\n        try {\n            yield Promise.all(resolving);\n            return result;\n        }\n        finally {\n            setTimeout(() => completions.disposable.dispose(), 100);\n        }\n    }\n    finally {\n        ref.dispose();\n    }\n}));\nconst _provider = new class {\n    constructor() {\n        this.onlyOnceSuggestions = [];\n    }\n    provideCompletionItems() {\n        let suggestions = this.onlyOnceSuggestions.slice(0);\n        let result = { suggestions };\n        this.onlyOnceSuggestions.length = 0;\n        return result;\n    }\n};\nmodes.CompletionProviderRegistry.register('*', _provider);\nexport function showSimpleSuggestions(editor, suggestions) {\n    setTimeout(() => {\n        var _a;\n        _provider.onlyOnceSuggestions.push(...suggestions);\n        (_a = editor.getContribution('editor.contrib.suggestController')) === null || _a === void 0 ? void 0 : _a.triggerSuggest(new Set().add(_provider));\n    }, 0);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LRUCache, TernarySearchTree } from '../../../../base/common/map.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport class Memory {\n    constructor(name) {\n        this.name = name;\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        let topScore = items[0].score[0];\n        for (let i = 0; i < items.length; i++) {\n            const { score, completion: suggestion } = items[i];\n            if (score[0] !== topScore) {\n                // stop when leaving the group of top matches\n                break;\n            }\n            if (suggestion.preselect) {\n                // stop when seeing an auto-select-item\n                return i;\n            }\n        }\n        return 0;\n    }\n}\nexport class NoMemory extends Memory {\n    constructor() {\n        super('first');\n    }\n    memorize(model, pos, item) {\n        // no-op\n    }\n    toJSON() {\n        return undefined;\n    }\n    fromJSON() {\n        //\n    }\n}\nexport class LRUMemory extends Memory {\n    constructor() {\n        super('recentlyUsed');\n        this._cache = new LRUCache(300, 0.66);\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const key = `${model.getLanguageId()}/${item.textLabel}`;\n        this._cache.set(key, {\n            touch: this._seq++,\n            type: item.completion.kind,\n            insertText: item.completion.insertText\n        });\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\n        if (/\\s$/.test(lineSuffix)) {\n            return super.select(model, pos, items);\n        }\n        let topScore = items[0].score[0];\n        let indexPreselect = -1;\n        let indexRecency = -1;\n        let seq = -1;\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].score[0] !== topScore) {\n                // consider only top items\n                break;\n            }\n            const key = `${model.getLanguageId()}/${items[i].textLabel}`;\n            const item = this._cache.peek(key);\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\n                seq = item.touch;\n                indexRecency = i;\n            }\n            if (items[i].completion.preselect && indexPreselect === -1) {\n                // stop when seeing an auto-select-item\n                return indexPreselect = i;\n            }\n        }\n        if (indexRecency !== -1) {\n            return indexRecency;\n        }\n        else if (indexPreselect !== -1) {\n            return indexPreselect;\n        }\n        else {\n            return 0;\n        }\n    }\n    toJSON() {\n        return this._cache.toJSON();\n    }\n    fromJSON(data) {\n        this._cache.clear();\n        let seq = 0;\n        for (const [key, value] of data) {\n            value.touch = seq;\n            value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n            this._cache.set(key, value);\n        }\n        this._seq = this._cache.size;\n    }\n}\nexport class PrefixMemory extends Memory {\n    constructor() {\n        super('recentlyUsedByPrefix');\n        this._trie = TernarySearchTree.forStrings();\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const { word } = model.getWordUntilPosition(pos);\n        const key = `${model.getLanguageId()}/${word}`;\n        this._trie.set(key, {\n            type: item.completion.kind,\n            insertText: item.completion.insertText,\n            touch: this._seq++\n        });\n    }\n    select(model, pos, items) {\n        let { word } = model.getWordUntilPosition(pos);\n        if (!word) {\n            return super.select(model, pos, items);\n        }\n        let key = `${model.getLanguageId()}/${word}`;\n        let item = this._trie.get(key);\n        if (!item) {\n            item = this._trie.findSubstr(key);\n        }\n        if (item) {\n            for (let i = 0; i < items.length; i++) {\n                let { kind, insertText } = items[i].completion;\n                if (kind === item.type && insertText === item.insertText) {\n                    return i;\n                }\n            }\n        }\n        return super.select(model, pos, items);\n    }\n    toJSON() {\n        let entries = [];\n        this._trie.forEach((value, key) => entries.push([key, value]));\n        // sort by last recently used (touch), then\n        // take the top 200 item and normalize their\n        // touch\n        entries\n            .sort((a, b) => -(a[1].touch - b[1].touch))\n            .forEach((value, i) => value[1].touch = i);\n        return entries.slice(0, 200);\n    }\n    fromJSON(data) {\n        this._trie.clear();\n        if (data.length > 0) {\n            this._seq = data[0][1].touch + 1;\n            for (const [key, value] of data) {\n                value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n                this._trie.set(key, value);\n            }\n        }\n    }\n}\nlet SuggestMemoryService = class SuggestMemoryService {\n    constructor(_storageService, _configService) {\n        this._storageService = _storageService;\n        this._configService = _configService;\n        this._disposables = new DisposableStore();\n        this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\n        this._disposables.add(_storageService.onWillSaveState(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                this._saveState();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._persistSoon.dispose();\n    }\n    memorize(model, pos, item) {\n        this._withStrategy(model, pos).memorize(model, pos, item);\n        this._persistSoon.schedule();\n    }\n    select(model, pos, items) {\n        return this._withStrategy(model, pos).select(model, pos, items);\n    }\n    _withStrategy(model, pos) {\n        var _a;\n        const mode = this._configService.getValue('editor.suggestSelection', {\n            overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\n            resource: model.uri\n        });\n        if (((_a = this._strategy) === null || _a === void 0 ? void 0 : _a.name) !== mode) {\n            this._saveState();\n            const ctor = SuggestMemoryService._strategyCtors.get(mode) || NoMemory;\n            this._strategy = new ctor();\n            try {\n                const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n                const scope = share ? 0 /* GLOBAL */ : 1 /* WORKSPACE */;\n                const raw = this._storageService.get(`${SuggestMemoryService._storagePrefix}/${mode}`, scope);\n                if (raw) {\n                    this._strategy.fromJSON(JSON.parse(raw));\n                }\n            }\n            catch (e) {\n                // things can go wrong with JSON...\n            }\n        }\n        return this._strategy;\n    }\n    _saveState() {\n        if (this._strategy) {\n            const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n            const scope = share ? 0 /* GLOBAL */ : 1 /* WORKSPACE */;\n            const raw = JSON.stringify(this._strategy);\n            this._storageService.store(`${SuggestMemoryService._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* MACHINE */);\n        }\n    }\n};\nSuggestMemoryService._strategyCtors = new Map([\n    ['recentlyUsedByPrefix', PrefixMemory],\n    ['recentlyUsed', LRUMemory],\n    ['first', NoMemory]\n]);\nSuggestMemoryService._storagePrefix = 'suggest/memories';\nSuggestMemoryService = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], SuggestMemoryService);\nexport { SuggestMemoryService };\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, true);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet WordContextKey = class WordContextKey {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._enabled = false;\n        this._ckAtEnd = WordContextKey.AtEnd.bindTo(contextKeyService);\n        this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(111 /* tabCompletion */) && this._update());\n        this._update();\n    }\n    dispose() {\n        var _a;\n        this._configListener.dispose();\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._ckAtEnd.reset();\n    }\n    _update() {\n        // only update this when tab completions are enabled\n        const enabled = this._editor.getOption(111 /* tabCompletion */) === 'on';\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        if (this._enabled) {\n            const checkForWordEnd = () => {\n                if (!this._editor.hasModel()) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                const model = this._editor.getModel();\n                const selection = this._editor.getSelection();\n                const word = model.getWordAtPosition(selection.getStartPosition());\n                if (!word) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n            };\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n            checkForWordEnd();\n        }\n        else if (this._selectionListener) {\n            this._ckAtEnd.reset();\n            this._selectionListener.dispose();\n            this._selectionListener = undefined;\n        }\n    }\n};\nWordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\nWordContextKey = __decorate([\n    __param(1, IContextKeyService)\n], WordContextKey);\nexport { WordContextKey };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nlet SuggestAlternatives = class SuggestAlternatives {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._index = 0;\n        this._ckOtherSuggestions = SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService);\n    }\n    dispose() {\n        this.reset();\n    }\n    reset() {\n        var _a;\n        this._ckOtherSuggestions.reset();\n        (_a = this._listener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._model = undefined;\n        this._acceptNext = undefined;\n        this._ignore = false;\n    }\n    set({ model, index }, acceptNext) {\n        // no suggestions -> nothing to do\n        if (model.items.length === 0) {\n            this.reset();\n            return;\n        }\n        // no alternative suggestions -> nothing to do\n        let nextIndex = SuggestAlternatives._moveIndex(true, model, index);\n        if (nextIndex === index) {\n            this.reset();\n            return;\n        }\n        this._acceptNext = acceptNext;\n        this._model = model;\n        this._index = index;\n        this._listener = this._editor.onDidChangeCursorPosition(() => {\n            if (!this._ignore) {\n                this.reset();\n            }\n        });\n        this._ckOtherSuggestions.set(true);\n    }\n    static _moveIndex(fwd, model, index) {\n        let newIndex = index;\n        while (true) {\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n            if (newIndex === index) {\n                break;\n            }\n            if (!model.items[newIndex].completion.additionalTextEdits) {\n                break;\n            }\n        }\n        return newIndex;\n    }\n    next() {\n        this._move(true);\n    }\n    prev() {\n        this._move(false);\n    }\n    _move(fwd) {\n        if (!this._model) {\n            // nothing to reason about\n            return;\n        }\n        try {\n            this._ignore = true;\n            this._index = SuggestAlternatives._moveIndex(fwd, this._model, this._index);\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\n        }\n        finally {\n            this._ignore = false;\n        }\n    }\n};\nSuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\nSuggestAlternatives = __decorate([\n    __param(1, IContextKeyService)\n], SuggestAlternatives);\nexport { SuggestAlternatives };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nexport class CommitCharacterController {\n    constructor(editor, widget, accept) {\n        this._disposables = new DisposableStore();\n        this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\n        this._disposables.add(widget.onDidHide(this.reset, this));\n        this._disposables.add(editor.onWillType(text => {\n            if (this._active && !widget.isFrozen()) {\n                const ch = text.charCodeAt(text.length - 1);\n                if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* acceptSuggestionOnCommitCharacter */)) {\n                    accept(this._active.item);\n                }\n            }\n        }));\n    }\n    _onItem(selected) {\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n            // no item or no commit characters\n            this.reset();\n            return;\n        }\n        if (this._active && this._active.item.item === selected.item) {\n            // still the same item\n            return;\n        }\n        // keep item and its commit characters\n        const acceptCharacters = new CharacterSet();\n        for (const ch of selected.item.completion.commitCharacters) {\n            if (ch.length > 0) {\n                acceptCharacters.add(ch.charCodeAt(0));\n            }\n        }\n        this._active = { acceptCharacters, item: selected };\n    }\n    reset() {\n        this._active = undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { Range } from '../../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\nexport class WordDistance {\n    static create(service, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.getOption(106 /* suggest */).localityBonus) {\n                return WordDistance.None;\n            }\n            if (!editor.hasModel()) {\n                return WordDistance.None;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!service.canComputeWordRanges(model.uri)) {\n                return WordDistance.None;\n            }\n            const [ranges] = yield new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n            if (ranges.length === 0) {\n                return WordDistance.None;\n            }\n            const wordRanges = yield service.computeWordRanges(model.uri, ranges[0].range);\n            if (!wordRanges) {\n                return WordDistance.None;\n            }\n            // remove current word\n            const wordUntilPos = model.getWordUntilPosition(position);\n            delete wordRanges[wordUntilPos.word];\n            return new class extends WordDistance {\n                distance(anchor, item) {\n                    if (!position.equals(editor.getPosition())) {\n                        return 0;\n                    }\n                    if (item.kind === 17 /* Keyword */) {\n                        return 2 << 20;\n                    }\n                    let word = typeof item.label === 'string' ? item.label : item.label.label;\n                    let wordLines = wordRanges[word];\n                    if (isFalsyOrEmpty(wordLines)) {\n                        return 2 << 20;\n                    }\n                    let idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n                    let bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n                    let blockDistance = ranges.length;\n                    for (const range of ranges) {\n                        if (!Range.containsRange(range.range, bestWordRange)) {\n                            break;\n                        }\n                        blockDistance -= 1;\n                    }\n                    return blockDistance;\n                }\n            };\n        });\n    }\n}\nWordDistance.None = new class extends WordDistance {\n    distance() { return 0; }\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { quickSelect } from '../../../../base/common/arrays.js';\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive } from '../../../../base/common/filters.js';\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\nexport class LineContext {\n    constructor(leadingLineContent, characterCountDelta) {\n        this.leadingLineContent = leadingLineContent;\n        this.characterCountDelta = characterCountDelta;\n    }\n}\n/**\n * Sorted, filtered completion view model\n * */\nexport class CompletionModel {\n    constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, clipboardText) {\n        this.clipboardText = clipboardText;\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\n        this._items = items;\n        this._column = column;\n        this._wordDistance = wordDistance;\n        this._options = options;\n        this._refilterKind = 1 /* All */;\n        this._lineContext = lineContext;\n        if (snippetSuggestions === 'top') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n        }\n        else if (snippetSuggestions === 'bottom') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n        }\n    }\n    get lineContext() {\n        return this._lineContext;\n    }\n    set lineContext(value) {\n        if (this._lineContext.leadingLineContent !== value.leadingLineContent\n            || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n            this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Incr */ : 1 /* All */;\n            this._lineContext = value;\n        }\n    }\n    get items() {\n        this._ensureCachedState();\n        return this._filteredItems;\n    }\n    get allProvider() {\n        this._ensureCachedState();\n        return this._providerInfo.keys();\n    }\n    get incomplete() {\n        this._ensureCachedState();\n        const result = new Set();\n        for (let [provider, incomplete] of this._providerInfo) {\n            if (incomplete) {\n                result.add(provider);\n            }\n        }\n        return result;\n    }\n    adopt(except) {\n        let res = [];\n        for (let i = 0; i < this._items.length;) {\n            if (!except.has(this._items[i].provider)) {\n                res.push(this._items[i]);\n                // unordered removed\n                this._items[i] = this._items[this._items.length - 1];\n                this._items.pop();\n            }\n            else {\n                // continue with next item\n                i++;\n            }\n        }\n        this._refilterKind = 1 /* All */;\n        return res;\n    }\n    get stats() {\n        this._ensureCachedState();\n        return this._stats;\n    }\n    _ensureCachedState() {\n        if (this._refilterKind !== 0 /* Nothing */) {\n            this._createCachedState();\n        }\n    }\n    _createCachedState() {\n        this._providerInfo = new Map();\n        const labelLengths = [];\n        const { leadingLineContent, characterCountDelta } = this._lineContext;\n        let word = '';\n        let wordLow = '';\n        // incrementally filter less\n        const source = this._refilterKind === 1 /* All */ ? this._items : this._filteredItems;\n        const target = [];\n        // picks a score function based on the number of\n        // items that we have to score/filter and based on the\n        // user-configuration\n        const scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\n        for (let i = 0; i < source.length; i++) {\n            const item = source[i];\n            if (item.isInvalid) {\n                continue; // SKIP invalid items\n            }\n            // collect all support, know if their result is incomplete\n            this._providerInfo.set(item.provider, Boolean(item.container.incomplete));\n            // 'word' is that remainder of the current line that we\n            // filter and score against. In theory each suggestion uses a\n            // different word, but in practice not - that's why we cache\n            const overwriteBefore = item.position.column - item.editStart.column;\n            const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n            if (word.length !== wordLen) {\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n                wordLow = word.toLowerCase();\n            }\n            // remember the word against which this item was\n            // scored\n            item.word = word;\n            if (wordLen === 0) {\n                // when there is nothing to score against, don't\n                // event try to do. Use a const rank and rely on\n                // the fallback-sort using the initial sort order.\n                // use a score of `-100` because that is out of the\n                // bound of values `fuzzyScore` will return\n                item.score = FuzzyScore.Default;\n            }\n            else {\n                // skip word characters that are whitespace until\n                // we have hit the replace range (overwriteBefore)\n                let wordPos = 0;\n                while (wordPos < overwriteBefore) {\n                    const ch = word.charCodeAt(wordPos);\n                    if (ch === 32 /* Space */ || ch === 9 /* Tab */) {\n                        wordPos += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (wordPos >= wordLen) {\n                    // the wordPos at which scoring starts is the whole word\n                    // and therefore the same rules as not having a word apply\n                    item.score = FuzzyScore.Default;\n                }\n                else if (typeof item.completion.filterText === 'string') {\n                    // when there is a `filterText` it must match the `word`.\n                    // if it matches we check with the label to compute highlights\n                    // and if that doesn't yield a result we have no highlights,\n                    // despite having the match\n                    let match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, false);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\n                        // filterText and label are actually the same -> use good highlights\n                        item.score = match;\n                    }\n                    else {\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\n                        // of the filterText-match\n                        item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\n                        item.score[0] = match[0]; // use score from filterText\n                    }\n                }\n                else {\n                    // by default match `word` against the `label`\n                    let match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, false);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    item.score = match;\n                }\n            }\n            item.idx = i;\n            item.distance = this._wordDistance.distance(item.position, item.completion);\n            target.push(item);\n            // update stats\n            labelLengths.push(item.textLabel.length);\n        }\n        this._filteredItems = target.sort(this._snippetCompareFn);\n        this._refilterKind = 0 /* Nothing */;\n        this._stats = {\n            pLabelLen: labelLengths.length ?\n                quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b)\n                : 0\n        };\n    }\n    static _compareCompletionItems(a, b) {\n        if (a.score[0] > b.score[0]) {\n            return -1;\n        }\n        else if (a.score[0] < b.score[0]) {\n            return 1;\n        }\n        else if (a.distance < b.distance) {\n            return -1;\n        }\n        else if (a.distance > b.distance) {\n            return 1;\n        }\n        else if (a.idx < b.idx) {\n            return -1;\n        }\n        else if (a.idx > b.idx) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static _compareCompletionItemsSnippetsDown(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* Snippet */) {\n                return 1;\n            }\n            else if (b.completion.kind === 27 /* Snippet */) {\n                return -1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n    static _compareCompletionItemsSnippetsUp(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* Snippet */) {\n                return -1;\n            }\n            else if (b.completion.kind === 27 /* Snippet */) {\n                return 1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { CompletionProviderRegistry } from '../../../common/languages.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CompletionModel } from './completionModel.js';\nimport { CompletionOptions, getSnippetSuggestSupport, getSuggestionComparator, provideSuggestionItems } from './suggest.js';\nexport class LineContext {\n    constructor(model, position, auto, shy) {\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n        this.leadingWord = model.getWordUntilPosition(position);\n        this.lineNumber = position.lineNumber;\n        this.column = position.column;\n        this.auto = auto;\n        this.shy = shy;\n    }\n    static shouldAutoTrigger(editor) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const pos = editor.getPosition();\n        model.tokenizeIfCheap(pos.lineNumber);\n        const word = model.getWordAtPosition(pos);\n        if (!word) {\n            return false;\n        }\n        if (word.endColumn !== pos.column) {\n            return false;\n        }\n        if (!isNaN(Number(word.word))) {\n            return false;\n        }\n        return true;\n    }\n}\nfunction isSuggestPreviewEnabled(editor) {\n    return editor.getOption(106 /* suggest */).preview;\n}\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowQuickSuggestions');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const allowQuickSuggestions = configurationService.getValue('editor.inlineSuggest.allowSuggestOnTriggerCharacters');\n    if (allowQuickSuggestions !== undefined) {\n        // Use setting if available.\n        return Boolean(allowQuickSuggestions);\n    }\n    // Don't allow if inline suggestions are visible and no suggest preview is configured.\n    // TODO disabled for copilot\n    return false && isSuggestPreviewEnabled(editor);\n}\nlet SuggestModel = class SuggestModel {\n    constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService) {\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._clipboardService = _clipboardService;\n        this._telemetryService = _telemetryService;\n        this._logService = _logService;\n        this._contextKeyService = _contextKeyService;\n        this._configurationService = _configurationService;\n        this._toDispose = new DisposableStore();\n        this._quickSuggestDelay = 10;\n        this._triggerCharacterListener = new DisposableStore();\n        this._triggerQuickSuggest = new TimeoutTimer();\n        this._state = 0 /* Idle */;\n        this._completionDisposables = new DisposableStore();\n        this._onDidCancel = new Emitter();\n        this._onDidTrigger = new Emitter();\n        this._onDidSuggest = new Emitter();\n        this.onDidCancel = this._onDidCancel.event;\n        this.onDidTrigger = this._onDidTrigger.event;\n        this.onDidSuggest = this._onDidSuggest.event;\n        this._telemetryGate = 0;\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\n        // wire up various listeners\n        this._toDispose.add(this._editor.onDidChangeModel(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\n            this._updateTriggerCharacters();\n            this._updateQuickSuggest();\n        }));\n        this._toDispose.add(CompletionProviderRegistry.onDidChange(() => {\n            this._updateTriggerCharacters();\n            this._updateActiveSuggestSession();\n        }));\n        let editorIsComposing = false;\n        this._toDispose.add(this._editor.onDidCompositionStart(() => {\n            editorIsComposing = true;\n        }));\n        this._toDispose.add(this._editor.onDidCompositionEnd(() => {\n            editorIsComposing = false;\n            this._onCompositionEnd();\n        }));\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\n            // only trigger suggest when the editor isn't composing a character\n            if (!editorIsComposing) {\n                this._onCursorChange(e);\n            }\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelContent(() => {\n            // only filter completions when the editor isn't composing a character\n            // allow-any-unicode-next-line\n            // e.g. ¨ + u makes ü but just ¨ cannot be used for filtering\n            if (!editorIsComposing) {\n                this._refilterCompletionItems();\n            }\n        }));\n        this._updateTriggerCharacters();\n        this._updateQuickSuggest();\n    }\n    dispose() {\n        dispose(this._triggerCharacterListener);\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\n        this._toDispose.dispose();\n        this._completionDisposables.dispose();\n        this.cancel();\n    }\n    // --- handle configuration & precondition changes\n    _updateQuickSuggest() {\n        this._quickSuggestDelay = this._editor.getOption(80 /* quickSuggestionsDelay */);\n        if (isNaN(this._quickSuggestDelay) || (!this._quickSuggestDelay && this._quickSuggestDelay !== 0) || this._quickSuggestDelay < 0) {\n            this._quickSuggestDelay = 10;\n        }\n    }\n    _updateTriggerCharacters() {\n        this._triggerCharacterListener.clear();\n        if (this._editor.getOption(81 /* readOnly */)\n            || !this._editor.hasModel()\n            || !this._editor.getOption(109 /* suggestOnTriggerCharacters */)) {\n            return;\n        }\n        const supportsByTriggerCharacter = new Map();\n        for (const support of CompletionProviderRegistry.all(this._editor.getModel())) {\n            for (const ch of support.triggerCharacters || []) {\n                let set = supportsByTriggerCharacter.get(ch);\n                if (!set) {\n                    set = new Set();\n                    set.add(getSnippetSuggestSupport());\n                    supportsByTriggerCharacter.set(ch, set);\n                }\n                set.add(support);\n            }\n        }\n        const checkTriggerCharacter = (text) => {\n            if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\n                return;\n            }\n            if (LineContext.shouldAutoTrigger(this._editor)) {\n                // don't trigger by trigger characters when this is a case for quick suggest\n                return;\n            }\n            if (!text) {\n                // came here from the compositionEnd-event\n                const position = this._editor.getPosition();\n                const model = this._editor.getModel();\n                text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n            }\n            let lastChar = '';\n            if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\n                if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\n                    lastChar = text.substr(text.length - 2);\n                }\n            }\n            else {\n                lastChar = text.charAt(text.length - 1);\n            }\n            const supports = supportsByTriggerCharacter.get(lastChar);\n            if (supports) {\n                // keep existing items that where not computed by the\n                // supports/providers that want to trigger now\n                const existing = this._completionModel\n                    ? { items: this._completionModel.adopt(supports), clipboardText: this._completionModel.clipboardText }\n                    : undefined;\n                this.trigger({ auto: true, shy: false, triggerCharacter: lastChar }, Boolean(this._completionModel), supports, existing);\n            }\n        };\n        this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\n        this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\n    }\n    // --- trigger/retrigger/cancel suggest\n    get state() {\n        return this._state;\n    }\n    cancel(retrigger = false) {\n        var _a;\n        if (this._state !== 0 /* Idle */) {\n            this._triggerQuickSuggest.cancel();\n            (_a = this._requestToken) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._requestToken = undefined;\n            this._state = 0 /* Idle */;\n            this._completionModel = undefined;\n            this._context = undefined;\n            this._onDidCancel.fire({ retrigger });\n        }\n    }\n    clear() {\n        this._completionDisposables.clear();\n    }\n    _updateActiveSuggestSession() {\n        if (this._state !== 0 /* Idle */) {\n            if (!this._editor.hasModel() || !CompletionProviderRegistry.has(this._editor.getModel())) {\n                this.cancel();\n            }\n            else {\n                this.trigger({ auto: this._state === 2 /* Auto */, shy: false }, true);\n            }\n        }\n    }\n    _onCursorChange(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const prevSelection = this._currentSelection;\n        this._currentSelection = this._editor.getSelection();\n        if (!e.selection.isEmpty()\n            || (e.reason !== 0 /* NotSet */ && e.reason !== 3 /* Explicit */)\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\n            // Early exit if nothing needs to be done!\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n            this.cancel();\n            return;\n        }\n        if (this._state === 0 /* Idle */ && e.reason === 0 /* NotSet */) {\n            if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n                // cursor did move RIGHT due to typing -> trigger quick suggest\n                this._doTriggerQuickSuggest();\n            }\n        }\n        else if (this._state !== 0 /* Idle */ && e.reason === 3 /* Explicit */) {\n            // suggest is active and something like cursor keys are used to move\n            // the cursor. this means we can refilter at the new position\n            this._refilterCompletionItems();\n        }\n    }\n    _onCompositionEnd() {\n        // trigger or refilter when composition ends\n        if (this._state === 0 /* Idle */) {\n            this._doTriggerQuickSuggest();\n        }\n        else {\n            this._refilterCompletionItems();\n        }\n    }\n    _doTriggerQuickSuggest() {\n        var _a;\n        if (this._editor.getOption(79 /* quickSuggestions */) === false) {\n            // not enabled\n            return;\n        }\n        if (this._editor.getOption(106 /* suggest */).snippetsPreventQuickSuggestions && ((_a = SnippetController2.get(this._editor)) === null || _a === void 0 ? void 0 : _a.isInSnippet())) {\n            // no quick suggestion when in snippet mode\n            return;\n        }\n        this.cancel();\n        this._triggerQuickSuggest.cancelAndSet(() => {\n            if (this._state !== 0 /* Idle */) {\n                return;\n            }\n            if (!LineContext.shouldAutoTrigger(this._editor)) {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const pos = this._editor.getPosition();\n            // validate enabled now\n            const quickSuggestions = this._editor.getOption(79 /* quickSuggestions */);\n            if (quickSuggestions === false) {\n                return;\n            }\n            else if (quickSuggestions === true) {\n                // all good\n            }\n            else {\n                // Check the type of the token that triggered this\n                model.tokenizeIfCheap(pos.lineNumber);\n                const lineTokens = model.getLineTokens(pos.lineNumber);\n                const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n                const inValidScope = quickSuggestions.other && tokenType === 0 /* Other */\n                    || quickSuggestions.comments && tokenType === 1 /* Comment */\n                    || quickSuggestions.strings && tokenType === 2 /* String */;\n                if (!inValidScope) {\n                    return;\n                }\n            }\n            if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\n                // do not trigger quick suggestions if inline suggestions are shown\n                return;\n            }\n            if (!CompletionProviderRegistry.has(model)) {\n                return;\n            }\n            // we made it till here -> trigger now\n            this.trigger({ auto: true, shy: false });\n        }, this._quickSuggestDelay);\n    }\n    _refilterCompletionItems() {\n        // Re-filter suggestions. This MUST run async because filtering/scoring\n        // uses the model content AND the cursor position. The latter is NOT\n        // updated when the document has changed (the event which drives this method)\n        // and therefore a little pause (next mirco task) is needed. See:\n        // https://stackoverflow.com/questions/25915634/difference-between-microtask-and-macrotask-within-an-event-loop-context#25933985\n        Promise.resolve().then(() => {\n            if (this._state === 0 /* Idle */) {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const position = this._editor.getPosition();\n            const ctx = new LineContext(model, position, this._state === 2 /* Auto */, false);\n            this._onNewContext(ctx);\n        });\n    }\n    trigger(context, retrigger = false, onlyFrom, existing) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const auto = context.auto;\n        const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy);\n        // Cancel previous requests, change state & update UI\n        this.cancel(retrigger);\n        this._state = auto ? 2 /* Auto */ : 1 /* Manual */;\n        this._onDidTrigger.fire({ auto, shy: context.shy, position: this._editor.getPosition() });\n        // Capture context when request was sent\n        this._context = ctx;\n        // Build context for request\n        let suggestCtx = { triggerKind: (_a = context.triggerKind) !== null && _a !== void 0 ? _a : 0 /* Invoke */ };\n        if (context.triggerCharacter) {\n            suggestCtx = {\n                triggerKind: 1 /* TriggerCharacter */,\n                triggerCharacter: context.triggerCharacter\n            };\n        }\n        this._requestToken = new CancellationTokenSource();\n        // kind filter and snippet sort rules\n        const snippetSuggestions = this._editor.getOption(101 /* snippetSuggestions */);\n        let snippetSortOrder = 1 /* Inline */;\n        switch (snippetSuggestions) {\n            case 'top':\n                snippetSortOrder = 0 /* Top */;\n                break;\n            // \t↓ that's the default anyways...\n            // case 'inline':\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\n            // \tbreak;\n            case 'bottom':\n                snippetSortOrder = 2 /* Bottom */;\n                break;\n        }\n        const { itemKind: itemKindFilter, showDeprecated } = SuggestModel._createSuggestFilter(this._editor);\n        const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\n        const completions = provideSuggestionItems(model, this._editor.getPosition(), new CompletionOptions(snippetSortOrder, itemKindFilter, onlyFrom, showDeprecated), suggestCtx, this._requestToken.token);\n        Promise.all([completions, wordDistance]).then(([completions, wordDistance]) => __awaiter(this, void 0, void 0, function* () {\n            var _b;\n            (_b = this._requestToken) === null || _b === void 0 ? void 0 : _b.dispose();\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            let clipboardText = existing === null || existing === void 0 ? void 0 : existing.clipboardText;\n            if (!clipboardText && completions.needsClipboard) {\n                clipboardText = yield this._clipboardService.readText();\n            }\n            if (this._state === 0 /* Idle */) {\n                return;\n            }\n            const model = this._editor.getModel();\n            let items = completions.items;\n            if (existing) {\n                const cmpFn = getSuggestionComparator(snippetSortOrder);\n                items = items.concat(existing.items).sort(cmpFn);\n            }\n            const ctx = new LineContext(model, this._editor.getPosition(), auto, context.shy);\n            this._completionModel = new CompletionModel(items, this._context.column, {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            }, wordDistance, this._editor.getOption(106 /* suggest */), this._editor.getOption(101 /* snippetSuggestions */), clipboardText);\n            // store containers so that they can be disposed later\n            this._completionDisposables.add(completions.disposable);\n            this._onNewContext(ctx);\n            // finally report telemetry about durations\n            this._reportDurationsTelemetry(completions.durations);\n        })).catch(onUnexpectedError);\n    }\n    _reportDurationsTelemetry(durations) {\n        if (this._telemetryGate++ % 230 !== 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._telemetryService.publicLog2('suggest.durations.json', { data: JSON.stringify(durations) });\n            this._logService.debug('suggest.durations.json', durations);\n        });\n    }\n    static _createSuggestFilter(editor) {\n        // kind filter and snippet sort rules\n        const result = new Set();\n        // snippet setting\n        const snippetSuggestions = editor.getOption(101 /* snippetSuggestions */);\n        if (snippetSuggestions === 'none') {\n            result.add(27 /* Snippet */);\n        }\n        // type setting\n        const suggestOptions = editor.getOption(106 /* suggest */);\n        if (!suggestOptions.showMethods) {\n            result.add(0 /* Method */);\n        }\n        if (!suggestOptions.showFunctions) {\n            result.add(1 /* Function */);\n        }\n        if (!suggestOptions.showConstructors) {\n            result.add(2 /* Constructor */);\n        }\n        if (!suggestOptions.showFields) {\n            result.add(3 /* Field */);\n        }\n        if (!suggestOptions.showVariables) {\n            result.add(4 /* Variable */);\n        }\n        if (!suggestOptions.showClasses) {\n            result.add(5 /* Class */);\n        }\n        if (!suggestOptions.showStructs) {\n            result.add(6 /* Struct */);\n        }\n        if (!suggestOptions.showInterfaces) {\n            result.add(7 /* Interface */);\n        }\n        if (!suggestOptions.showModules) {\n            result.add(8 /* Module */);\n        }\n        if (!suggestOptions.showProperties) {\n            result.add(9 /* Property */);\n        }\n        if (!suggestOptions.showEvents) {\n            result.add(10 /* Event */);\n        }\n        if (!suggestOptions.showOperators) {\n            result.add(11 /* Operator */);\n        }\n        if (!suggestOptions.showUnits) {\n            result.add(12 /* Unit */);\n        }\n        if (!suggestOptions.showValues) {\n            result.add(13 /* Value */);\n        }\n        if (!suggestOptions.showConstants) {\n            result.add(14 /* Constant */);\n        }\n        if (!suggestOptions.showEnums) {\n            result.add(15 /* Enum */);\n        }\n        if (!suggestOptions.showEnumMembers) {\n            result.add(16 /* EnumMember */);\n        }\n        if (!suggestOptions.showKeywords) {\n            result.add(17 /* Keyword */);\n        }\n        if (!suggestOptions.showWords) {\n            result.add(18 /* Text */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(19 /* Color */);\n        }\n        if (!suggestOptions.showFiles) {\n            result.add(20 /* File */);\n        }\n        if (!suggestOptions.showReferences) {\n            result.add(21 /* Reference */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(22 /* Customcolor */);\n        }\n        if (!suggestOptions.showFolders) {\n            result.add(23 /* Folder */);\n        }\n        if (!suggestOptions.showTypeParameters) {\n            result.add(24 /* TypeParameter */);\n        }\n        if (!suggestOptions.showSnippets) {\n            result.add(27 /* Snippet */);\n        }\n        if (!suggestOptions.showUsers) {\n            result.add(25 /* User */);\n        }\n        if (!suggestOptions.showIssues) {\n            result.add(26 /* Issue */);\n        }\n        return { itemKind: result, showDeprecated: suggestOptions.showDeprecated };\n    }\n    _onNewContext(ctx) {\n        if (!this._context) {\n            // happens when 24x7 IntelliSense is enabled and still in its delay\n            return;\n        }\n        if (ctx.lineNumber !== this._context.lineNumber) {\n            // e.g. happens when pressing Enter while IntelliSense is computed\n            this.cancel();\n            return;\n        }\n        if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\n            // cancel IntelliSense when line start changes\n            // happens when the current word gets outdented\n            this.cancel();\n            return;\n        }\n        if (ctx.column < this._context.column) {\n            // typed -> moved cursor LEFT -> retrigger if still on a word\n            if (ctx.leadingWord.word) {\n                this.trigger({ auto: this._context.auto, shy: false }, true);\n            }\n            else {\n                this.cancel();\n            }\n            return;\n        }\n        if (!this._completionModel) {\n            // happens when IntelliSense is not yet computed\n            return;\n        }\n        if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\n            // started a new word while IntelliSense shows -> retrigger\n            // Select those providers have not contributed to this completion model and re-trigger completions for\n            // them. Also adopt the existing items and merge them into the new completion model\n            const inactiveProvider = new Set(CompletionProviderRegistry.all(this._editor.getModel()));\n            for (let provider of this._completionModel.allProvider) {\n                inactiveProvider.delete(provider);\n            }\n            const items = this._completionModel.adopt(new Set());\n            this.trigger({ auto: this._context.auto, shy: false }, true, inactiveProvider, { items, clipboardText: this._completionModel.clipboardText });\n            return;\n        }\n        if (ctx.column > this._context.column && this._completionModel.incomplete.size > 0 && ctx.leadingWord.word.length !== 0) {\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n            const { incomplete } = this._completionModel;\n            const items = this._completionModel.adopt(incomplete);\n            this.trigger({ auto: this._state === 2 /* Auto */, shy: false, triggerKind: 2 /* TriggerForIncompleteCompletions */ }, true, incomplete, { items, clipboardText: this._completionModel.clipboardText });\n        }\n        else {\n            // typed -> moved cursor RIGHT -> update UI\n            let oldLineContext = this._completionModel.lineContext;\n            let isFrozen = false;\n            this._completionModel.lineContext = {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            };\n            if (this._completionModel.items.length === 0) {\n                if (LineContext.shouldAutoTrigger(this._editor) && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n                    // retrigger when heading into a new word\n                    this.trigger({ auto: this._context.auto, shy: false }, true);\n                    return;\n                }\n                if (!this._context.auto) {\n                    // freeze when IntelliSense was manually requested\n                    this._completionModel.lineContext = oldLineContext;\n                    isFrozen = this._completionModel.items.length > 0;\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\n                        // there were results before but now there aren't\n                        // and also we are not on a word anymore -> cancel\n                        this.cancel();\n                        return;\n                    }\n                }\n                else {\n                    // nothing left\n                    this.cancel();\n                    return;\n                }\n            }\n            this._onDidSuggest.fire({\n                completionModel: this._completionModel,\n                auto: this._context.auto,\n                shy: this._context.shy,\n                isFrozen,\n            });\n        }\n    }\n};\nSuggestModel = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IClipboardService),\n    __param(3, ITelemetryService),\n    __param(4, ILogService),\n    __param(5, IContextKeyService),\n    __param(6, IConfigurationService)\n], SuggestModel);\nexport { SuggestModel };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class OvertypingCapturer {\n    constructor(editor, suggestModel) {\n        this._disposables = new DisposableStore();\n        this._lastOvertyped = [];\n        this._empty = true;\n        this._disposables.add(editor.onWillType(() => {\n            if (!this._empty) {\n                return;\n            }\n            if (!editor.hasModel()) {\n                return;\n            }\n            const selections = editor.getSelections();\n            const selectionsLength = selections.length;\n            // Check if it will overtype any selections\n            let willOvertype = false;\n            for (let i = 0; i < selectionsLength; i++) {\n                if (!selections[i].isEmpty()) {\n                    willOvertype = true;\n                    break;\n                }\n            }\n            if (!willOvertype) {\n                return;\n            }\n            this._lastOvertyped = [];\n            const model = editor.getModel();\n            for (let i = 0; i < selectionsLength; i++) {\n                const selection = selections[i];\n                // Check for overtyping capturer restrictions\n                if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\n                    return;\n                }\n                this._lastOvertyped[i] = { value: model.getValueInRange(selection), multiline: selection.startLineNumber !== selection.endLineNumber };\n            }\n            this._empty = false;\n        }));\n        this._disposables.add(suggestModel.onDidCancel(e => {\n            if (!this._empty && !e.retrigger) {\n                this._empty = true;\n            }\n        }));\n    }\n    getLastOvertypedInfo(idx) {\n        if (!this._empty && idx >= 0 && idx < this._lastOvertyped.length) {\n            return this._lastOvertyped[idx];\n        }\n        return undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nOvertypingCapturer._maxSelectionLength = 51200;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { suggestWidgetStatusbarMenu } from './suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            this.label.textContent = localize('ddd', '{0} ({1})', this._action.label, StatusBarViewItem.symbolPrintEnter(kb));\n        }\n    }\n    static symbolPrintEnter(kb) {\n        var _a;\n        return (_a = kb.getLabel()) === null || _a === void 0 ? void 0 : _a.replace(/\\benter\\b/gi, '\\u23CE');\n    }\n}\nlet SuggestWidgetStatus = class SuggestWidgetStatus {\n    constructor(container, instantiationService, _menuService, _contextKeyService) {\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._menuDisposables = new DisposableStore();\n        this.element = dom.append(container, dom.$('.suggest-status-bar'));\n        const actionViewItemProvider = (action => {\n            return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\n        });\n        this._leftActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._rightActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._leftActions.domNode.classList.add('left');\n        this._rightActions.domNode.classList.add('right');\n    }\n    dispose() {\n        this._menuDisposables.dispose();\n        this.element.remove();\n    }\n    show() {\n        const menu = this._menuService.createMenu(suggestWidgetStatusbarMenu, this._contextKeyService);\n        const renderMenu = () => {\n            const left = [];\n            const right = [];\n            for (let [group, actions] of menu.getActions()) {\n                if (group === 'left') {\n                    left.push(...actions);\n                }\n                else {\n                    right.push(...actions);\n                }\n            }\n            this._leftActions.clear();\n            this._leftActions.push(left);\n            this._rightActions.clear();\n            this._rightActions.push(right);\n        };\n        this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\n        this._menuDisposables.add(menu);\n    }\n    hide() {\n        this._menuDisposables.clear();\n    }\n};\nSuggestWidgetStatus = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, IMenuService),\n    __param(3, IContextKeyService)\n], SuggestWidgetStatus);\nexport { SuggestWidgetStatus };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Dimension } from '../../../../base/browser/dom.js';\nimport { OrthogonalEdge, Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Emitter, Event } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class ResizableHTMLElement {\n    constructor() {\n        this._onDidWillResize = new Emitter();\n        this.onDidWillResize = this._onDidWillResize.event;\n        this._onDidResize = new Emitter();\n        this.onDidResize = this._onDidResize.event;\n        this._sashListener = new DisposableStore();\n        this._size = new Dimension(0, 0);\n        this._minSize = new Dimension(0, 0);\n        this._maxSize = new Dimension(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n        this.domNode = document.createElement('div');\n        this._eastSash = new Sash(this.domNode, { getVerticalSashLeft: () => this._size.width }, { orientation: 0 /* VERTICAL */ });\n        this._westSash = new Sash(this.domNode, { getVerticalSashLeft: () => 0 }, { orientation: 0 /* VERTICAL */ });\n        this._northSash = new Sash(this.domNode, { getHorizontalSashTop: () => 0 }, { orientation: 1 /* HORIZONTAL */, orthogonalEdge: OrthogonalEdge.North });\n        this._southSash = new Sash(this.domNode, { getHorizontalSashTop: () => this._size.height }, { orientation: 1 /* HORIZONTAL */, orthogonalEdge: OrthogonalEdge.South });\n        this._northSash.orthogonalStartSash = this._westSash;\n        this._northSash.orthogonalEndSash = this._eastSash;\n        this._southSash.orthogonalStartSash = this._westSash;\n        this._southSash.orthogonalEndSash = this._eastSash;\n        let currentSize;\n        let deltaY = 0;\n        let deltaX = 0;\n        this._sashListener.add(Event.any(this._northSash.onDidStart, this._eastSash.onDidStart, this._southSash.onDidStart, this._westSash.onDidStart)(() => {\n            if (currentSize === undefined) {\n                this._onDidWillResize.fire();\n                currentSize = this._size;\n                deltaY = 0;\n                deltaX = 0;\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidEnd, this._eastSash.onDidEnd, this._southSash.onDidEnd, this._westSash.onDidEnd)(() => {\n            if (currentSize !== undefined) {\n                currentSize = undefined;\n                deltaY = 0;\n                deltaX = 0;\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(this._eastSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = e.currentX - e.startX;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, east: true });\n            }\n        }));\n        this._sashListener.add(this._westSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = -(e.currentX - e.startX);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, west: true });\n            }\n        }));\n        this._sashListener.add(this._northSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = -(e.currentY - e.startY);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, north: true });\n            }\n        }));\n        this._sashListener.add(this._southSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = e.currentY - e.startY;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, south: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._eastSash.onDidReset, this._westSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._size.height, this._preferredSize.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidReset, this._southSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._preferredSize.height, this._size.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n    }\n    dispose() {\n        this._northSash.dispose();\n        this._southSash.dispose();\n        this._eastSash.dispose();\n        this._westSash.dispose();\n        this._sashListener.dispose();\n        this._onDidResize.dispose();\n        this._onDidWillResize.dispose();\n        this.domNode.remove();\n    }\n    enableSashes(north, east, south, west) {\n        this._northSash.state = north ? 3 /* Enabled */ : 0 /* Disabled */;\n        this._eastSash.state = east ? 3 /* Enabled */ : 0 /* Disabled */;\n        this._southSash.state = south ? 3 /* Enabled */ : 0 /* Disabled */;\n        this._westSash.state = west ? 3 /* Enabled */ : 0 /* Disabled */;\n    }\n    layout(height = this.size.height, width = this.size.width) {\n        const { height: minHeight, width: minWidth } = this._minSize;\n        const { height: maxHeight, width: maxWidth } = this._maxSize;\n        height = Math.max(minHeight, Math.min(maxHeight, height));\n        width = Math.max(minWidth, Math.min(maxWidth, width));\n        const newSize = new Dimension(width, height);\n        if (!Dimension.equals(newSize, this._size)) {\n            this.domNode.style.height = height + 'px';\n            this.domNode.style.width = width + 'px';\n            this._size = newSize;\n            this._northSash.layout();\n            this._eastSash.layout();\n            this._southSash.layout();\n            this._westSash.layout();\n        }\n    }\n    clearSashHoverState() {\n        this._eastSash.clearSashHoverState();\n        this._westSash.clearSashHoverState();\n        this._northSash.clearSashHoverState();\n        this._southSash.clearSashHoverState();\n    }\n    get size() {\n        return this._size;\n    }\n    set maxSize(value) {\n        this._maxSize = value;\n    }\n    get maxSize() {\n        return this._maxSize;\n    }\n    set minSize(value) {\n        this._minSize = value;\n    }\n    get minSize() {\n        return this._minSize;\n    }\n    set preferredSize(value) {\n        this._preferredSize = value;\n    }\n    get preferredSize() {\n        return this._preferredSize;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { isSafari } from '../../../../base/browser/browser.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { ResizableHTMLElement } from './resizable.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function canExpandCompletionItem(item) {\n    return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\n}\nlet SuggestDetailsWidget = class SuggestDetailsWidget {\n    constructor(_editor, instaService) {\n        this._editor = _editor;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        this._onDidChangeContents = new Emitter();\n        this.onDidChangeContents = this._onDidChangeContents.event;\n        this._disposables = new DisposableStore();\n        this._renderDisposeable = new DisposableStore();\n        this._borderWidth = 1;\n        this._size = new dom.Dimension(330, 0);\n        this.domNode = dom.$('.suggest-details');\n        this.domNode.classList.add('no-docs');\n        this._markdownRenderer = instaService.createInstance(MarkdownRenderer, { editor: _editor });\n        this._body = dom.$('.body');\n        this._scrollbar = new DomScrollableElement(this._body, {});\n        dom.append(this.domNode, this._scrollbar.getDomNode());\n        this._disposables.add(this._scrollbar);\n        this._header = dom.append(this._body, dom.$('.header'));\n        this._close = dom.append(this._header, dom.$('span' + Codicon.close.cssSelector));\n        this._close.title = nls.localize('details.close', \"Close\");\n        this._type = dom.append(this._header, dom.$('p.type'));\n        this._docs = dom.append(this._body, dom.$('p.docs'));\n        this._configureFont();\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(44 /* fontInfo */)) {\n                this._configureFont();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._renderDisposeable.dispose();\n    }\n    _configureFont() {\n        const options = this._editor.getOptions();\n        const fontInfo = options.get(44 /* fontInfo */);\n        const fontFamily = fontInfo.getMassagedFontFamily(isSafari ? EDITOR_FONT_DEFAULTS.fontFamily : null);\n        const fontSize = options.get(107 /* suggestFontSize */) || fontInfo.fontSize;\n        const lineHeight = options.get(108 /* suggestLineHeight */) || fontInfo.lineHeight;\n        const fontWeight = fontInfo.fontWeight;\n        const fontSizePx = `${fontSize}px`;\n        const lineHeightPx = `${lineHeight}px`;\n        this.domNode.style.fontSize = fontSizePx;\n        this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this.domNode.style.fontWeight = fontWeight;\n        this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        this._type.style.fontFamily = fontFamily;\n        this._close.style.height = lineHeightPx;\n        this._close.style.width = lineHeightPx;\n    }\n    getLayoutInfo() {\n        const lineHeight = this._editor.getOption(108 /* suggestLineHeight */) || this._editor.getOption(44 /* fontInfo */).lineHeight;\n        const borderWidth = this._borderWidth;\n        const borderHeight = borderWidth * 2;\n        return {\n            lineHeight,\n            borderWidth,\n            borderHeight,\n            verticalPadding: 22,\n            horizontalPadding: 14\n        };\n    }\n    renderLoading() {\n        this._type.textContent = nls.localize('loading', \"Loading...\");\n        this._docs.textContent = '';\n        this.domNode.classList.remove('no-docs', 'no-type');\n        this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n        this._onDidChangeContents.fire(this);\n    }\n    renderItem(item, explainMode) {\n        var _a, _b;\n        this._renderDisposeable.clear();\n        let { detail, documentation } = item.completion;\n        if (explainMode) {\n            let md = '';\n            md += `score: ${item.score[0]}\\n`;\n            md += `prefix: ${(_a = item.word) !== null && _a !== void 0 ? _a : '(no prefix)'}\\n`;\n            md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\n            md += `distance: ${item.distance} (localityBonus-setting)\\n`;\n            md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\n            md += `commit_chars: ${(_b = item.completion.commitCharacters) === null || _b === void 0 ? void 0 : _b.join('')}\\n`;\n            documentation = new MarkdownString().appendCodeblock('empty', md);\n            detail = `Provider: ${item.provider._debugDisplayName}`;\n        }\n        if (!explainMode && !canExpandCompletionItem(item)) {\n            this.clearContents();\n            return;\n        }\n        this.domNode.classList.remove('no-docs', 'no-type');\n        // --- details\n        if (detail) {\n            const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}…` : detail;\n            this._type.textContent = cappedDetail;\n            this._type.title = cappedDetail;\n            dom.show(this._type);\n            this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\n        }\n        else {\n            dom.clearNode(this._type);\n            this._type.title = '';\n            dom.hide(this._type);\n            this.domNode.classList.add('no-type');\n        }\n        // --- documentation\n        dom.clearNode(this._docs);\n        if (typeof documentation === 'string') {\n            this._docs.classList.remove('markdown-docs');\n            this._docs.textContent = documentation;\n        }\n        else if (documentation) {\n            this._docs.classList.add('markdown-docs');\n            dom.clearNode(this._docs);\n            const renderedContents = this._markdownRenderer.render(documentation);\n            this._docs.appendChild(renderedContents.element);\n            this._renderDisposeable.add(renderedContents);\n            this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\n                this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n                this._onDidChangeContents.fire(this);\n            }));\n        }\n        this.domNode.style.userSelect = 'text';\n        this.domNode.tabIndex = -1;\n        this._close.onmousedown = e => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n        this._close.onclick = e => {\n            e.preventDefault();\n            e.stopPropagation();\n            this._onDidClose.fire();\n        };\n        this._body.scrollTop = 0;\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n        this._onDidChangeContents.fire(this);\n    }\n    clearContents() {\n        this.domNode.classList.add('no-docs');\n        this._type.textContent = '';\n        this._docs.textContent = '';\n    }\n    get size() {\n        return this._size;\n    }\n    layout(width, height) {\n        const newSize = new dom.Dimension(width, height);\n        if (!dom.Dimension.equals(newSize, this._size)) {\n            this._size = newSize;\n            dom.size(this.domNode, width, height);\n        }\n        this._scrollbar.scanDomNode();\n    }\n    scrollDown(much = 8) {\n        this._body.scrollTop += much;\n    }\n    scrollUp(much = 8) {\n        this._body.scrollTop -= much;\n    }\n    scrollTop() {\n        this._body.scrollTop = 0;\n    }\n    scrollBottom() {\n        this._body.scrollTop = this._body.scrollHeight;\n    }\n    pageDown() {\n        this.scrollDown(80);\n    }\n    pageUp() {\n        this.scrollUp(80);\n    }\n    set borderWidth(width) {\n        this._borderWidth = width;\n    }\n    get borderWidth() {\n        return this._borderWidth;\n    }\n};\nSuggestDetailsWidget = __decorate([\n    __param(1, IInstantiationService)\n], SuggestDetailsWidget);\nexport { SuggestDetailsWidget };\nexport class SuggestDetailsOverlay {\n    constructor(widget, _editor) {\n        this.widget = widget;\n        this._editor = _editor;\n        this._disposables = new DisposableStore();\n        this._added = false;\n        this._preferAlignAtTop = true;\n        this._resizable = new ResizableHTMLElement();\n        this._resizable.domNode.classList.add('suggest-details-container');\n        this._resizable.domNode.appendChild(widget.domNode);\n        this._resizable.enableSashes(false, true, true, false);\n        let topLeftNow;\n        let sizeNow;\n        let deltaTop = 0;\n        let deltaLeft = 0;\n        this._disposables.add(this._resizable.onDidWillResize(() => {\n            topLeftNow = this._topLeft;\n            sizeNow = this._resizable.size;\n        }));\n        this._disposables.add(this._resizable.onDidResize(e => {\n            if (topLeftNow && sizeNow) {\n                this.widget.layout(e.dimension.width, e.dimension.height);\n                let updateTopLeft = false;\n                if (e.west) {\n                    deltaLeft = sizeNow.width - e.dimension.width;\n                    updateTopLeft = true;\n                }\n                if (e.north) {\n                    deltaTop = sizeNow.height - e.dimension.height;\n                    updateTopLeft = true;\n                }\n                if (updateTopLeft) {\n                    this._applyTopLeft({\n                        top: topLeftNow.top + deltaTop,\n                        left: topLeftNow.left + deltaLeft,\n                    });\n                }\n            }\n            if (e.done) {\n                topLeftNow = undefined;\n                sizeNow = undefined;\n                deltaTop = 0;\n                deltaLeft = 0;\n                this._userSize = e.dimension;\n            }\n        }));\n        this._disposables.add(this.widget.onDidChangeContents(() => {\n            var _a;\n            if (this._anchorBox) {\n                this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, this._preferAlignAtTop);\n            }\n        }));\n    }\n    dispose() {\n        this._resizable.dispose();\n        this._disposables.dispose();\n        this.hide();\n    }\n    getId() {\n        return 'suggest.details';\n    }\n    getDomNode() {\n        return this._resizable.domNode;\n    }\n    getPosition() {\n        return null;\n    }\n    show() {\n        if (!this._added) {\n            this._editor.addOverlayWidget(this);\n            this.getDomNode().style.position = 'fixed';\n            this._added = true;\n        }\n    }\n    hide(sessionEnded = false) {\n        this._resizable.clearSashHoverState();\n        if (this._added) {\n            this._editor.removeOverlayWidget(this);\n            this._added = false;\n            this._anchorBox = undefined;\n            this._topLeft = undefined;\n        }\n        if (sessionEnded) {\n            this._userSize = undefined;\n            this.widget.clearContents();\n        }\n    }\n    placeAtAnchor(anchor, preferAlignAtTop) {\n        var _a;\n        const anchorBox = anchor.getBoundingClientRect();\n        this._anchorBox = anchorBox;\n        this._preferAlignAtTop = preferAlignAtTop;\n        this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, preferAlignAtTop);\n    }\n    _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\n        var _a;\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.widget.getLayoutInfo();\n        const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n        const defaultTop = anchorBox.top;\n        // EAST\n        const eastPlacement = (function () {\n            const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\n            const left = -info.borderWidth + anchorBox.left + anchorBox.width;\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // WEST\n        const westPlacement = (function () {\n            const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\n            const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // SOUTH\n        const southPacement = (function () {\n            const left = anchorBox.left;\n            const top = -info.borderWidth + anchorBox.top + anchorBox.height;\n            const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\n            return { top, left, fit: maxSizeBottom.height - size.height, maxSizeBottom, maxSizeTop: maxSizeBottom, minSize: defaultMinSize.with(maxSizeBottom.width) };\n        })();\n        // take first placement that fits or the first with \"least bad\" fit\n        const placements = [eastPlacement, westPlacement, southPacement];\n        const placement = (_a = placements.find(p => p.fit >= 0)) !== null && _a !== void 0 ? _a : placements.sort((a, b) => b.fit - a.fit)[0];\n        // top/bottom placement\n        const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n        let alignAtTop;\n        let height = size.height;\n        const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\n        if (height > maxHeight) {\n            height = maxHeight;\n        }\n        let maxSize;\n        if (preferAlignAtTop) {\n            if (height <= placement.maxSizeTop.height) {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n            else {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n        }\n        else {\n            if (height <= placement.maxSizeBottom.height) {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n            else {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n        }\n        this._applyTopLeft({ left: placement.left, top: alignAtTop ? placement.top : bottom - height });\n        this.getDomNode().style.position = 'fixed';\n        this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\n        this._resizable.minSize = placement.minSize;\n        this._resizable.maxSize = maxSize;\n        this._resizable.layout(height, Math.min(maxSize.width, size.width));\n        this.widget.layout(this._resizable.size.width, this._resizable.size.height);\n    }\n    _applyTopLeft(topLeft) {\n        this._topLeft = topLeft;\n        this.getDomNode().style.left = `${this._topLeft.left}px`;\n        this.getDomNode().style.top = `${this._topLeft.top}px`;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport { isSafari } from '../../../../base/browser/browser.js';\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { flatten } from '../../../../base/common/arrays.js';\nimport { Codicon, CSSIcon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { createMatches } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageService } from '../../../common/services/language.js';\nimport * as nls from '../../../../nls.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService, ThemeIcon } from '../../../../platform/theme/common/themeService.js';\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\nexport function getAriaId(index) {\n    return `suggest-aria-id:${index}`;\n}\nexport const suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\nconst _completionItemColor = new (_a = class ColorExtractor {\n        extract(item, out) {\n            if (item.textLabel.match(ColorExtractor._regexStrict)) {\n                out[0] = item.textLabel;\n                return true;\n            }\n            if (item.completion.detail && item.completion.detail.match(ColorExtractor._regexStrict)) {\n                out[0] = item.completion.detail;\n                return true;\n            }\n            if (typeof item.completion.documentation === 'string') {\n                const match = ColorExtractor._regexRelaxed.exec(item.completion.documentation);\n                if (match && (match.index === 0 || match.index + match[0].length === item.completion.documentation.length)) {\n                    out[0] = match[0];\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n    _a._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/,\n    _a._regexStrict = new RegExp(`^${_a._regexRelaxed.source}$`, 'i'),\n    _a);\nlet ItemRenderer = class ItemRenderer {\n    constructor(_editor, _modelService, _languageService, _themeService) {\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._languageService = _languageService;\n        this._themeService = _themeService;\n        this._onDidToggleDetails = new Emitter();\n        this.onDidToggleDetails = this._onDidToggleDetails.event;\n        this.templateId = 'suggestion';\n    }\n    dispose() {\n        this._onDidToggleDetails.dispose();\n    }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.disposables = new DisposableStore();\n        data.root = container;\n        data.root.classList.add('show-file-icons');\n        data.icon = append(container, $('.icon'));\n        data.colorspan = append(data.icon, $('span.colorspan'));\n        const text = append(container, $('.contents'));\n        const main = append(text, $('.main'));\n        data.iconContainer = append(main, $('.icon-label.codicon'));\n        data.left = append(main, $('span.left'));\n        data.right = append(main, $('span.right'));\n        data.iconLabel = new IconLabel(data.left, { supportHighlights: true, supportIcons: true });\n        data.disposables.add(data.iconLabel);\n        data.parametersLabel = append(data.left, $('span.signature-label'));\n        data.qualifierLabel = append(data.left, $('span.qualifier-label'));\n        data.detailsLabel = append(data.right, $('span.details-label'));\n        data.readMore = append(data.right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\n        data.readMore.title = nls.localize('readMore', \"Read More\");\n        const configureFont = () => {\n            const options = this._editor.getOptions();\n            const fontInfo = options.get(44 /* fontInfo */);\n            const fontFamily = fontInfo.getMassagedFontFamily(isSafari ? EDITOR_FONT_DEFAULTS.fontFamily : null);\n            const fontFeatureSettings = fontInfo.fontFeatureSettings;\n            const fontSize = options.get(107 /* suggestFontSize */) || fontInfo.fontSize;\n            const lineHeight = options.get(108 /* suggestLineHeight */) || fontInfo.lineHeight;\n            const fontWeight = fontInfo.fontWeight;\n            const fontSizePx = `${fontSize}px`;\n            const lineHeightPx = `${lineHeight}px`;\n            data.root.style.fontSize = fontSizePx;\n            data.root.style.fontWeight = fontWeight;\n            main.style.fontFamily = fontFamily;\n            main.style.fontFeatureSettings = fontFeatureSettings;\n            main.style.lineHeight = lineHeightPx;\n            data.icon.style.height = lineHeightPx;\n            data.icon.style.width = lineHeightPx;\n            data.readMore.style.height = lineHeightPx;\n            data.readMore.style.width = lineHeightPx;\n        };\n        configureFont();\n        data.disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(44 /* fontInfo */) || e.hasChanged(107 /* suggestFontSize */) || e.hasChanged(108 /* suggestLineHeight */)) {\n                configureFont();\n            }\n        }));\n        return data;\n    }\n    renderElement(element, index, data) {\n        const { completion } = element;\n        data.root.id = getAriaId(index);\n        data.colorspan.style.backgroundColor = '';\n        const labelOptions = {\n            labelEscapeNewLines: true,\n            matches: createMatches(element.score)\n        };\n        let color = [];\n        if (completion.kind === 19 /* Color */ && _completionItemColor.extract(element, color)) {\n            // special logic for 'color' completion items\n            data.icon.className = 'icon customcolor';\n            data.iconContainer.className = 'icon hide';\n            data.colorspan.style.backgroundColor = color[0];\n        }\n        else if (completion.kind === 20 /* File */ && this._themeService.getFileIconTheme().hasFileIcons) {\n            // special logic for 'file' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FILE);\n            const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FILE);\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n        }\n        else if (completion.kind === 23 /* Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\n            // special logic for 'folder' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            labelOptions.extraClasses = flatten([\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FOLDER),\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FOLDER)\n            ]);\n        }\n        else {\n            // normal icon\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = '';\n            data.iconContainer.classList.add('suggest-icon', ...CSSIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\n        }\n        if (completion.tags && completion.tags.indexOf(1 /* Deprecated */) >= 0) {\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n            labelOptions.matches = [];\n        }\n        data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\n        if (typeof completion.label === 'string') {\n            data.parametersLabel.textContent = '';\n            data.detailsLabel.textContent = stripNewLines(completion.detail || '');\n            data.root.classList.add('string-label');\n        }\n        else {\n            data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\n            data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\n            data.root.classList.remove('string-label');\n        }\n        if (this._editor.getOption(106 /* suggest */).showInlineDetails) {\n            show(data.detailsLabel);\n        }\n        else {\n            hide(data.detailsLabel);\n        }\n        if (canExpandCompletionItem(element)) {\n            data.right.classList.add('can-expand-details');\n            show(data.readMore);\n            data.readMore.onmousedown = e => {\n                e.stopPropagation();\n                e.preventDefault();\n            };\n            data.readMore.onclick = e => {\n                e.stopPropagation();\n                e.preventDefault();\n                this._onDidToggleDetails.fire();\n            };\n        }\n        else {\n            data.right.classList.remove('can-expand-details');\n            hide(data.readMore);\n            data.readMore.onmousedown = null;\n            data.readMore.onclick = null;\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n};\nItemRenderer = __decorate([\n    __param(1, IModelService),\n    __param(2, ILanguageService),\n    __param(3, IThemeService)\n], ItemRenderer);\nexport { ItemRenderer };\nfunction stripNewLines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { attachListStyler } from '../../../../platform/theme/common/styler.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResizableHTMLElement } from './resizable.js';\nimport { Context as SuggestContext } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\n/**\n * Suggest widget colors\n */\nexport const editorSuggestWidgetBackground = registerColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hc: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nexport const editorSuggestWidgetBorder = registerColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hc: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nexport const editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hc: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nexport const editorSuggestWidgetSelectedForeground = registerColor('editorSuggestWidget.selectedForeground', { dark: quickInputListFocusForeground, light: quickInputListFocusForeground, hc: quickInputListFocusForeground }, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedIconForeground = registerColor('editorSuggestWidget.selectedIconForeground', { dark: quickInputListFocusIconForeground, light: quickInputListFocusIconForeground, hc: quickInputListFocusIconForeground }, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: quickInputListFocusBackground, light: quickInputListFocusBackground, hc: quickInputListFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetHighlightForeground = registerColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hc: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nexport const editorSuggestWidgetHighlightFocusForeground = registerColor('editorSuggestWidget.focusHighlightForeground', { dark: listFocusHighlightForeground, light: listFocusHighlightForeground, hc: listFocusHighlightForeground }, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nexport const editorSuggestWidgetStatusForeground = registerColor('editorSuggestWidgetStatus.foreground', { dark: transparent(editorSuggestWidgetForeground, .5), light: transparent(editorSuggestWidgetForeground, .5), hc: transparent(editorSuggestWidgetForeground, .5) }, nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\nclass PersistedWidgetSize {\n    constructor(_service, editor) {\n        this._service = _service;\n        this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n    }\n    restore() {\n        var _a;\n        const raw = (_a = this._service.get(this._key, 0 /* GLOBAL */)) !== null && _a !== void 0 ? _a : '';\n        try {\n            const obj = JSON.parse(raw);\n            if (dom.Dimension.is(obj)) {\n                return dom.Dimension.lift(obj);\n            }\n        }\n        catch (_b) {\n            // ignore\n        }\n        return undefined;\n    }\n    store(size) {\n        this._service.store(this._key, JSON.stringify(size), 0 /* GLOBAL */, 1 /* MACHINE */);\n    }\n    reset() {\n        this._service.remove(this._key, 0 /* GLOBAL */);\n    }\n}\nlet SuggestWidget = class SuggestWidget {\n    constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\n        this.editor = editor;\n        this._storageService = _storageService;\n        this._state = 0 /* Hidden */;\n        this._isAuto = false;\n        this._ignoreFocusEvents = false;\n        this._forceRenderingAbove = false;\n        this._explainMode = false;\n        this._showTimeout = new TimeoutTimer();\n        this._disposables = new DisposableStore();\n        this._onDidSelect = new Emitter();\n        this._onDidFocus = new Emitter();\n        this._onDidHide = new Emitter();\n        this._onDidShow = new Emitter();\n        this.onDidSelect = this._onDidSelect.event;\n        this.onDidFocus = this._onDidFocus.event;\n        this.onDidHide = this._onDidHide.event;\n        this.onDidShow = this._onDidShow.event;\n        this._onDetailsKeydown = new Emitter();\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\n        this.element = new ResizableHTMLElement();\n        this.element.domNode.classList.add('editor-widget', 'suggest-widget');\n        this._contentWidget = new SuggestContentWidget(this, editor);\n        this._persistedSize = new PersistedWidgetSize(_storageService, editor);\n        class ResizeState {\n            constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\n                this.persistedSize = persistedSize;\n                this.currentSize = currentSize;\n                this.persistHeight = persistHeight;\n                this.persistWidth = persistWidth;\n            }\n        }\n        let state;\n        this._disposables.add(this.element.onDidWillResize(() => {\n            this._contentWidget.lockPreference();\n            state = new ResizeState(this._persistedSize.restore(), this.element.size);\n        }));\n        this._disposables.add(this.element.onDidResize(e => {\n            var _a, _b, _c, _d;\n            this._resize(e.dimension.width, e.dimension.height);\n            if (state) {\n                state.persistHeight = state.persistHeight || !!e.north || !!e.south;\n                state.persistWidth = state.persistWidth || !!e.east || !!e.west;\n            }\n            if (!e.done) {\n                return;\n            }\n            if (state) {\n                // only store width or height value that have changed and also\n                // only store changes that are above a certain threshold\n                const { itemHeight, defaultSize } = this.getLayoutInfo();\n                const threshold = Math.round(itemHeight / 2);\n                let { width, height } = this.element.size;\n                if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n                    height = (_b = (_a = state.persistedSize) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : defaultSize.height;\n                }\n                if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n                    width = (_d = (_c = state.persistedSize) === null || _c === void 0 ? void 0 : _c.width) !== null && _d !== void 0 ? _d : defaultSize.width;\n                }\n                this._persistedSize.store(new dom.Dimension(width, height));\n            }\n            // reset working state\n            this._contentWidget.unlockPreference();\n            state = undefined;\n        }));\n        this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n        this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n        const details = instantiationService.createInstance(SuggestDetailsWidget, this.editor);\n        details.onDidClose(this.toggleDetails, this, this._disposables);\n        this._details = new SuggestDetailsOverlay(details, this.editor);\n        const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(106 /* suggest */).showIcons);\n        applyIconStyle();\n        const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n        this._disposables.add(renderer);\n        this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n        this._list = new List('SuggestWidget', this._listElement, {\n            getHeight: (_element) => this.getLayoutInfo().itemHeight,\n            getTemplateId: (_element) => 'suggestion'\n        }, [renderer], {\n            alwaysConsumeMouseWheel: true,\n            useShadows: false,\n            mouseSupport: false,\n            accessibilityProvider: {\n                getRole: () => 'option',\n                getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n                getWidgetRole: () => 'listbox',\n                getAriaLabel: (item) => {\n                    let label = item.textLabel;\n                    if (typeof item.completion.label !== 'string') {\n                        const { detail, description } = item.completion.label;\n                        if (detail && description) {\n                            label = nls.localize('label.full', '{0}{1}, {2}', label, detail, description);\n                        }\n                        else if (detail) {\n                            label = nls.localize('label.detail', '{0}{1}', label, detail);\n                        }\n                        else if (description) {\n                            label = nls.localize('label.desc', '{0}, {1}', label, description);\n                        }\n                    }\n                    if (!item.isResolved || !this._isDetailsVisible()) {\n                        return label;\n                    }\n                    const { documentation, detail } = item.completion;\n                    const docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\n                    return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n                },\n            }\n        });\n        this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode);\n        const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(106 /* suggest */).showStatusBar);\n        applyStatusBarStyle();\n        this._disposables.add(attachListStyler(this._list, _themeService, {\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n            listInactiveFocusOutline: activeContrastBorder\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n        this._onThemeChange(_themeService.getColorTheme());\n        this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n        this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n        this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n        this._disposables.add(this.editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(106 /* suggest */)) {\n                applyStatusBarStyle();\n                applyIconStyle();\n            }\n        }));\n        this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n        this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n            this._onDetailsKeydown.fire(e);\n        }));\n        this._disposables.add(this.editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n    }\n    dispose() {\n        var _a;\n        this._details.widget.dispose();\n        this._details.dispose();\n        this._list.dispose();\n        this._status.dispose();\n        this._disposables.dispose();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._showTimeout.dispose();\n        this._contentWidget.dispose();\n        this.element.dispose();\n    }\n    _onEditorMouseDown(mouseEvent) {\n        if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n            // Clicking inside details\n            this._details.widget.domNode.focus();\n        }\n        else {\n            // Clicking outside details and inside suggest\n            if (this.element.domNode.contains(mouseEvent.target.element)) {\n                this.editor.focus();\n            }\n        }\n    }\n    _onCursorSelectionChanged() {\n        if (this._state !== 0 /* Hidden */) {\n            this._contentWidget.layout();\n        }\n    }\n    _onListMouseDownOrTap(e) {\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n            return;\n        }\n        // prevent stealing browser focus from the editor\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n        this._select(e.element, e.index);\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            this._select(e.elements[0], e.indexes[0]);\n        }\n    }\n    _select(item, index) {\n        const completionModel = this._completionModel;\n        if (completionModel) {\n            this._onDidSelect.fire({ item, index, model: completionModel });\n            this.editor.focus();\n        }\n    }\n    _onThemeChange(theme) {\n        this._details.widget.borderWidth = theme.type === 'hc' ? 2 : 1;\n    }\n    _onListFocus(e) {\n        var _a;\n        if (this._ignoreFocusEvents) {\n            return;\n        }\n        if (!e.elements.length) {\n            if (this._currentSuggestionDetails) {\n                this._currentSuggestionDetails.cancel();\n                this._currentSuggestionDetails = undefined;\n                this._focusedItem = undefined;\n            }\n            this.editor.setAriaOptions({ activeDescendant: undefined });\n            return;\n        }\n        if (!this._completionModel) {\n            return;\n        }\n        const item = e.elements[0];\n        const index = e.indexes[0];\n        if (item !== this._focusedItem) {\n            (_a = this._currentSuggestionDetails) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._currentSuggestionDetails = undefined;\n            this._focusedItem = item;\n            this._list.reveal(index);\n            this._currentSuggestionDetails = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const loading = disposableTimeout(() => {\n                    if (this._isDetailsVisible()) {\n                        this.showDetails(true);\n                    }\n                }, 250);\n                token.onCancellationRequested(() => loading.dispose());\n                const result = yield item.resolve(token);\n                loading.dispose();\n                return result;\n            }));\n            this._currentSuggestionDetails.then(() => {\n                if (index >= this._list.length || item !== this._list.element(index)) {\n                    return;\n                }\n                // item can have extra information, so re-render\n                this._ignoreFocusEvents = true;\n                this._list.splice(index, 1, [item]);\n                this._list.setFocus([index]);\n                this._ignoreFocusEvents = false;\n                if (this._isDetailsVisible()) {\n                    this.showDetails(false);\n                }\n                else {\n                    this.element.domNode.classList.remove('docs-side');\n                }\n                this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\n            }).catch(onUnexpectedError);\n        }\n        // emit an event\n        this._onDidFocus.fire({ item, index, model: this._completionModel });\n    }\n    _setState(state) {\n        if (this._state === state) {\n            return;\n        }\n        this._state = state;\n        this.element.domNode.classList.toggle('frozen', state === 4 /* Frozen */);\n        this.element.domNode.classList.remove('message');\n        switch (state) {\n            case 0 /* Hidden */:\n                dom.hide(this._messageElement, this._listElement, this._status.element);\n                this._details.hide(true);\n                this._status.hide();\n                this._contentWidget.hide();\n                this._ctxSuggestWidgetVisible.reset();\n                this._ctxSuggestWidgetMultipleSuggestions.reset();\n                this._showTimeout.cancel();\n                this.element.domNode.classList.remove('visible');\n                this._list.splice(0, this._list.length);\n                this._focusedItem = undefined;\n                this._cappedHeight = undefined;\n                this._explainMode = false;\n                break;\n            case 1 /* Loading */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 2 /* Empty */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 3 /* Open */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 4 /* Frozen */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 5 /* Details */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._details.show();\n                this._show();\n                break;\n        }\n    }\n    _show() {\n        this._status.show();\n        this._contentWidget.show();\n        this._layout(this._persistedSize.restore());\n        this._ctxSuggestWidgetVisible.set(true);\n        this._showTimeout.cancelAndSet(() => {\n            this.element.domNode.classList.add('visible');\n            this._onDidShow.fire(this);\n        }, 100);\n    }\n    showTriggered(auto, delay) {\n        if (this._state !== 0 /* Hidden */) {\n            return;\n        }\n        this._contentWidget.setPosition(this.editor.getPosition());\n        this._isAuto = !!auto;\n        if (!this._isAuto) {\n            this._loadingTimeout = disposableTimeout(() => this._setState(1 /* Loading */), delay);\n        }\n    }\n    showSuggestions(completionModel, selectionIndex, isFrozen, isAuto) {\n        var _a, _b;\n        this._contentWidget.setPosition(this.editor.getPosition());\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentSuggestionDetails) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._currentSuggestionDetails = undefined;\n        if (this._completionModel !== completionModel) {\n            this._completionModel = completionModel;\n        }\n        if (isFrozen && this._state !== 2 /* Empty */ && this._state !== 0 /* Hidden */) {\n            this._setState(4 /* Frozen */);\n            return;\n        }\n        const visibleCount = this._completionModel.items.length;\n        const isEmpty = visibleCount === 0;\n        this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n        if (isEmpty) {\n            this._setState(isAuto ? 0 /* Hidden */ : 2 /* Empty */);\n            this._completionModel = undefined;\n            return;\n        }\n        this._focusedItem = undefined;\n        this._list.splice(0, this._list.length, this._completionModel.items);\n        this._setState(isFrozen ? 4 /* Frozen */ : 3 /* Open */);\n        this._list.reveal(selectionIndex, 0);\n        this._list.setFocus([selectionIndex]);\n        this._layout(this.element.size);\n        // Reset focus border\n        this._details.widget.domNode.classList.remove('focused');\n    }\n    selectNextPage() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 5 /* Details */:\n                this._details.widget.pageDown();\n                return true;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNextPage();\n                return true;\n        }\n    }\n    selectNext() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNext(1, true);\n                return true;\n        }\n    }\n    selectLast() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 5 /* Details */:\n                this._details.widget.scrollBottom();\n                return true;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusLast();\n                return true;\n        }\n    }\n    selectPreviousPage() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 5 /* Details */:\n                this._details.widget.pageUp();\n                return true;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPreviousPage();\n                return true;\n        }\n    }\n    selectPrevious() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPrevious(1, true);\n                return false;\n        }\n    }\n    selectFirst() {\n        switch (this._state) {\n            case 0 /* Hidden */:\n                return false;\n            case 5 /* Details */:\n                this._details.widget.scrollTop();\n                return true;\n            case 1 /* Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusFirst();\n                return true;\n        }\n    }\n    getFocusedItem() {\n        if (this._state !== 0 /* Hidden */\n            && this._state !== 2 /* Empty */\n            && this._state !== 1 /* Loading */\n            && this._completionModel) {\n            return {\n                item: this._list.getFocusedElements()[0],\n                index: this._list.getFocus()[0],\n                model: this._completionModel\n            };\n        }\n        return undefined;\n    }\n    toggleDetailsFocus() {\n        if (this._state === 5 /* Details */) {\n            this._setState(3 /* Open */);\n            this._details.widget.domNode.classList.remove('focused');\n        }\n        else if (this._state === 3 /* Open */ && this._isDetailsVisible()) {\n            this._setState(5 /* Details */);\n            this._details.widget.domNode.classList.add('focused');\n        }\n    }\n    toggleDetails() {\n        if (this._isDetailsVisible()) {\n            // hide details widget\n            this._ctxSuggestWidgetDetailsVisible.set(false);\n            this._setDetailsVisible(false);\n            this._details.hide();\n            this.element.domNode.classList.remove('shows-details');\n        }\n        else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* Open */ || this._state === 5 /* Details */ || this._state === 4 /* Frozen */)) {\n            // show details widget (iff possible)\n            this._ctxSuggestWidgetDetailsVisible.set(true);\n            this._setDetailsVisible(true);\n            this.showDetails(false);\n        }\n    }\n    showDetails(loading) {\n        this._details.show();\n        if (loading) {\n            this._details.widget.renderLoading();\n        }\n        else {\n            this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n        }\n        this._positionDetails();\n        this.editor.focus();\n        this.element.domNode.classList.add('shows-details');\n    }\n    toggleExplainMode() {\n        if (this._list.getFocusedElements()[0]) {\n            this._explainMode = !this._explainMode;\n            if (!this._isDetailsVisible()) {\n                this.toggleDetails();\n            }\n            else {\n                this.showDetails(false);\n            }\n        }\n    }\n    resetPersistedSize() {\n        this._persistedSize.reset();\n    }\n    hideWidget() {\n        var _a;\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._setState(0 /* Hidden */);\n        this._onDidHide.fire(this);\n        this.element.clearSashHoverState();\n        // ensure that a reasonable widget height is persisted so that\n        // accidential \"resize-to-single-items\" cases aren't happening\n        const dim = this._persistedSize.restore();\n        const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n        if (dim && dim.height < minPersistedHeight) {\n            this._persistedSize.store(dim.with(undefined, minPersistedHeight));\n        }\n    }\n    isFrozen() {\n        return this._state === 4 /* Frozen */;\n    }\n    _afterRender(position) {\n        if (position === null) {\n            if (this._isDetailsVisible()) {\n                this._details.hide(); //todo@jrieken soft-hide\n            }\n            return;\n        }\n        if (this._state === 2 /* Empty */ || this._state === 1 /* Loading */) {\n            // no special positioning when widget isn't showing list\n            return;\n        }\n        if (this._isDetailsVisible()) {\n            this._details.show();\n        }\n        this._positionDetails();\n    }\n    _layout(size) {\n        var _a, _b, _c;\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (!this.editor.getDomNode()) {\n            // happens when running tests\n            return;\n        }\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.getLayoutInfo();\n        if (!size) {\n            size = info.defaultSize;\n        }\n        let height = size.height;\n        let width = size.width;\n        // status bar\n        this._status.element.style.lineHeight = `${info.itemHeight}px`;\n        if (this._state === 2 /* Empty */ || this._state === 1 /* Loading */) {\n            // showing a message only\n            height = info.itemHeight + info.borderHeight;\n            width = info.defaultSize.width / 2;\n            this.element.enableSashes(false, false, false, false);\n            this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n            this._contentWidget.setPreference(2 /* BELOW */);\n        }\n        else {\n            // showing items\n            // width math\n            const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n            if (width > maxWidth) {\n                width = maxWidth;\n            }\n            const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n            // height math\n            const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n            const minHeight = info.itemHeight + info.statusBarHeight;\n            const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n            const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n            const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n            const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n            const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n            const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n            let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n            if (height === ((_a = this._cappedHeight) === null || _a === void 0 ? void 0 : _a.capped)) {\n                // Restore the old (wanted) height when the current\n                // height is capped to fit\n                height = this._cappedHeight.wanted;\n            }\n            if (height < minHeight) {\n                height = minHeight;\n            }\n            if (height > maxHeight) {\n                height = maxHeight;\n            }\n            const forceRenderingAboveRequiredSpace = 150;\n            if (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\n                this._contentWidget.setPreference(1 /* ABOVE */);\n                this.element.enableSashes(true, true, false, false);\n                maxHeight = maxHeightAbove;\n            }\n            else {\n                this._contentWidget.setPreference(2 /* BELOW */);\n                this.element.enableSashes(false, true, true, false);\n                maxHeight = maxHeightBelow;\n            }\n            this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n            this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n            this.element.minSize = new dom.Dimension(220, minHeight);\n            // Know when the height was capped to fit and remember\n            // the wanted height for later. This is required when going\n            // left to widen suggestions.\n            this._cappedHeight = height === fullHeight\n                ? { wanted: (_c = (_b = this._cappedHeight) === null || _b === void 0 ? void 0 : _b.wanted) !== null && _c !== void 0 ? _c : size.height, capped: height }\n                : undefined;\n        }\n        this._resize(width, height);\n    }\n    _resize(width, height) {\n        const { width: maxWidth, height: maxHeight } = this.element.maxSize;\n        width = Math.min(maxWidth, width);\n        height = Math.min(maxHeight, height);\n        const { statusBarHeight } = this.getLayoutInfo();\n        this._list.layout(height - statusBarHeight, width);\n        this._listElement.style.height = `${height - statusBarHeight}px`;\n        this.element.layout(height, width);\n        this._contentWidget.layout();\n        this._positionDetails();\n    }\n    _positionDetails() {\n        var _a;\n        if (this._isDetailsVisible()) {\n            this._details.placeAtAnchor(this.element.domNode, ((_a = this._contentWidget.getPosition()) === null || _a === void 0 ? void 0 : _a.preference[0]) === 2 /* BELOW */);\n        }\n    }\n    getLayoutInfo() {\n        const fontInfo = this.editor.getOption(44 /* fontInfo */);\n        const itemHeight = clamp(this.editor.getOption(108 /* suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\n        const statusBarHeight = !this.editor.getOption(106 /* suggest */).showStatusBar || this._state === 2 /* Empty */ || this._state === 1 /* Loading */ ? 0 : itemHeight;\n        const borderWidth = this._details.widget.borderWidth;\n        const borderHeight = 2 * borderWidth;\n        return {\n            itemHeight,\n            statusBarHeight,\n            borderWidth,\n            borderHeight,\n            typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n            verticalPadding: 22,\n            horizontalPadding: 14,\n            defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n        };\n    }\n    _isDetailsVisible() {\n        return this._storageService.getBoolean('expandSuggestionDocs', 0 /* GLOBAL */, false);\n    }\n    _setDetailsVisible(value) {\n        this._storageService.store('expandSuggestionDocs', value, 0 /* GLOBAL */, 0 /* USER */);\n    }\n    forceRenderingAbove() {\n        if (!this._forceRenderingAbove) {\n            this._forceRenderingAbove = true;\n            this._layout(this._persistedSize.restore());\n        }\n    }\n    stopForceRenderingAbove() {\n        this._forceRenderingAbove = false;\n    }\n};\nSuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\nSuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\nSuggestWidget = __decorate([\n    __param(1, IStorageService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, IInstantiationService)\n], SuggestWidget);\nexport { SuggestWidget };\nexport class SuggestContentWidget {\n    constructor(_widget, _editor) {\n        this._widget = _widget;\n        this._editor = _editor;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._preferenceLocked = false;\n        this._added = false;\n        this._hidden = false;\n    }\n    dispose() {\n        if (this._added) {\n            this._added = false;\n            this._editor.removeContentWidget(this);\n        }\n    }\n    getId() {\n        return 'editor.widget.suggestWidget';\n    }\n    getDomNode() {\n        return this._widget.element.domNode;\n    }\n    show() {\n        this._hidden = false;\n        if (!this._added) {\n            this._added = true;\n            this._editor.addContentWidget(this);\n        }\n    }\n    hide() {\n        if (!this._hidden) {\n            this._hidden = true;\n            this.layout();\n        }\n    }\n    layout() {\n        this._editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this._hidden || !this._position || !this._preference) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [this._preference]\n        };\n    }\n    beforeRender() {\n        const { height, width } = this._widget.element.size;\n        const { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\n        return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n    }\n    afterRender(position) {\n        this._widget._afterRender(position);\n    }\n    setPreference(preference) {\n        if (!this._preferenceLocked) {\n            this._preference = preference;\n        }\n    }\n    lockPreference() {\n        this._preferenceLocked = true;\n    }\n    unlockPreference() {\n        this._preferenceLocked = false;\n    }\n    setPosition(position) {\n        this._position = position;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IdleValue } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { SimpleKeybinding } from '../../../../base/common/keybindings.js';\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isObject } from '../../../../base/common/types.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuRegistry } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { hash } from '../../../../base/common/hash.js';\n// sticky suggest widget which doesn't disappear on focus out and such\nlet _sticky = false;\n// _sticky = Boolean(\"true\"); // done \"weirdly\" so that a lint warning prevents you from pushing this\nclass LineSuffix {\n    constructor(_model, _position) {\n        this._model = _model;\n        this._position = _position;\n        // spy on what's happening right of the cursor. two cases:\n        // 1. end of line -> check that it's still end of line\n        // 2. mid of line -> add a marker and compute the delta\n        const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n        if (maxColumn !== _position.column) {\n            const offset = _model.getOffsetAt(_position);\n            const end = _model.getPositionAt(offset + 1);\n            this._marker = _model.deltaDecorations([], [{\n                    range: Range.fromPositions(_position, end),\n                    options: { description: 'suggest-line-suffix', stickiness: 1 /* NeverGrowsWhenTypingAtEdges */ }\n                }]);\n        }\n    }\n    dispose() {\n        if (this._marker && !this._model.isDisposed()) {\n            this._model.deltaDecorations(this._marker, []);\n        }\n    }\n    delta(position) {\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n            // bail out early if things seems fishy\n            return 0;\n        }\n        // read the marker (in case suggest was triggered at line end) or compare\n        // the cursor to the line end.\n        if (this._marker) {\n            const range = this._model.getDecorationRange(this._marker[0]);\n            const end = this._model.getOffsetAt(range.getStartPosition());\n            return end - this._model.getOffsetAt(position);\n        }\n        else {\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n        }\n    }\n}\nlet SuggestController = class SuggestController {\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\n        this._memoryService = _memoryService;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._telemetryService = _telemetryService;\n        this._lineSuffix = new MutableDisposable();\n        this._toDispose = new DisposableStore();\n        this._selectors = new PriorityRegistry(s => s.priority);\n        this._telemetryGate = 0;\n        this.editor = editor;\n        this.model = _instantiationService.createInstance(SuggestModel, this.editor);\n        // context key: update insert/replace mode\n        const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\n        ctxInsertMode.set(editor.getOption(106 /* suggest */).insertMode);\n        this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(106 /* suggest */).insertMode));\n        this.widget = this._toDispose.add(new IdleValue(() => {\n            const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\n            this._toDispose.add(widget);\n            this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0), this));\n            // Wire up logic to accept a suggestion on certain characters\n            const commitCharacterController = new CommitCharacterController(this.editor, widget, item => this._insertSuggestion(item, 2 /* NoAfterUndoStop */));\n            this._toDispose.add(commitCharacterController);\n            this._toDispose.add(this.model.onDidSuggest(e => {\n                if (e.completionModel.items.length === 0) {\n                    commitCharacterController.reset();\n                }\n            }));\n            // Wire up makes text edit context key\n            const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\n            const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\n            const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\n            this._toDispose.add(toDisposable(() => {\n                ctxMakesTextEdit.reset();\n                ctxHasInsertAndReplace.reset();\n                ctxCanResolve.reset();\n            }));\n            this._toDispose.add(widget.onDidFocus(({ item }) => {\n                // (ctx: makesTextEdit)\n                const position = this.editor.getPosition();\n                const startColumn = item.editStart.column;\n                const endColumn = position.column;\n                let value = true;\n                if (this.editor.getOption(1 /* acceptSuggestionOnEnter */) === 'smart'\n                    && this.model.state === 2 /* Auto */\n                    && !item.completion.additionalTextEdits\n                    && !(item.completion.insertTextRules & 4 /* InsertAsSnippet */)\n                    && endColumn - startColumn === item.completion.insertText.length) {\n                    const oldText = this.editor.getModel().getValueInRange({\n                        startLineNumber: position.lineNumber,\n                        startColumn,\n                        endLineNumber: position.lineNumber,\n                        endColumn\n                    });\n                    value = oldText !== item.completion.insertText;\n                }\n                ctxMakesTextEdit.set(value);\n                // (ctx: hasInsertAndReplaceRange)\n                ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\n                // (ctx: canResolve)\n                ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\n            }));\n            this._toDispose.add(widget.onDetailsKeyDown(e => {\n                // cmd + c on macOS, ctrl + c on Win / Linux\n                if (e.toKeybinding().equals(new SimpleKeybinding(true, false, false, false, 33 /* KeyC */)) ||\n                    (platform.isMacintosh && e.toKeybinding().equals(new SimpleKeybinding(false, false, false, true, 33 /* KeyC */)))) {\n                    e.stopPropagation();\n                    return;\n                }\n                if (!e.toKeybinding().isModifierKey()) {\n                    this.editor.focus();\n                }\n            }));\n            return widget;\n        }));\n        // Wire up text overtyping capture\n        this._overtypingCapturer = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\n        }));\n        this._alternatives = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\n        }));\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n        this._toDispose.add(this.model.onDidTrigger(e => {\n            this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\n            this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\n        }));\n        this._toDispose.add(this.model.onDidSuggest(e => {\n            if (!e.shy) {\n                let index = -1;\n                for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\n                    index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                    if (index !== -1) {\n                        break;\n                    }\n                }\n                if (index === -1) {\n                    index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                }\n                this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.auto);\n            }\n        }));\n        this._toDispose.add(this.model.onDidCancel(e => {\n            if (!e.retrigger) {\n                this.widget.value.hideWidget();\n            }\n        }));\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\n            if (!_sticky) {\n                this.model.cancel();\n                this.model.clear();\n            }\n        }));\n        // Manage the acceptSuggestionsOnEnter context key\n        let acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n        let updateFromConfig = () => {\n            const acceptSuggestionOnEnter = this.editor.getOption(1 /* acceptSuggestionOnEnter */);\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n        };\n        this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\n        updateFromConfig();\n    }\n    static get(editor) {\n        return editor.getContribution(SuggestController.ID);\n    }\n    dispose() {\n        this._alternatives.dispose();\n        this._toDispose.dispose();\n        this.widget.dispose();\n        this.model.dispose();\n        this._lineSuffix.dispose();\n    }\n    _insertSuggestion(event, flags) {\n        if (!event || !event.item) {\n            this._alternatives.value.reset();\n            this.model.cancel();\n            this.model.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const snippetController = SnippetController2.get(this.editor);\n        if (!snippetController) {\n            return;\n        }\n        const model = this.editor.getModel();\n        const modelVersionNow = model.getAlternativeVersionId();\n        const { item } = event;\n        //\n        const tasks = [];\n        const cts = new CancellationTokenSource();\n        // pushing undo stops *before* additional text edits and\n        // *after* the main edit\n        if (!(flags & 1 /* NoBeforeUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\n        const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* AlternativeOverwriteConfig */));\n        // keep item in memory\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\n        if (Array.isArray(item.completion.additionalTextEdits)) {\n            // sync additional edits\n            const scrollState = StableEditorScrollState.capture(this.editor);\n            this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text)));\n            scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n        }\n        else if (!item.isResolved) {\n            // async additional edits\n            const sw = new StopWatch(true);\n            let position;\n            const docListener = model.onDidChangeContent(e => {\n                if (e.isFlush) {\n                    cts.cancel();\n                    docListener.dispose();\n                    return;\n                }\n                for (let change of e.changes) {\n                    const thisPosition = Range.getEndPosition(change.range);\n                    if (!position || Position.isBefore(thisPosition, position)) {\n                        position = thisPosition;\n                    }\n                }\n            });\n            let oldFlags = flags;\n            flags |= 2 /* NoAfterUndoStop */;\n            let didType = false;\n            let typeListener = this.editor.onWillType(() => {\n                typeListener.dispose();\n                didType = true;\n                if (!(oldFlags & 2 /* NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n            });\n            tasks.push(item.resolve(cts.token).then(() => {\n                if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\n                    return false;\n                }\n                if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\n                    return false;\n                }\n                if (didType) {\n                    this.editor.pushUndoStop();\n                }\n                const scrollState = StableEditorScrollState.capture(this.editor);\n                this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text)));\n                scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n                if (didType || !(oldFlags & 2 /* NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n                return true;\n            }).then(applied => {\n                this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\n                docListener.dispose();\n                typeListener.dispose();\n            }));\n        }\n        let { insertText } = item.completion;\n        if (!(item.completion.insertTextRules & 4 /* InsertAsSnippet */)) {\n            insertText = SnippetParser.escape(insertText);\n        }\n        snippetController.insert(insertText, {\n            overwriteBefore: info.overwriteBefore,\n            overwriteAfter: info.overwriteAfter,\n            undoStopBefore: false,\n            undoStopAfter: false,\n            adjustWhitespace: !(item.completion.insertTextRules & 1 /* KeepWhitespace */),\n            clipboardText: event.model.clipboardText,\n            overtypingCapturer: this._overtypingCapturer.value\n        });\n        if (!(flags & 2 /* NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        if (!item.completion.command) {\n            // done\n            this.model.cancel();\n        }\n        else if (item.completion.command.id === TriggerSuggestAction.id) {\n            // retigger\n            this.model.trigger({ auto: true, shy: false }, true);\n        }\n        else {\n            // exec command, done\n            tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(onUnexpectedError));\n            this.model.cancel();\n        }\n        if (flags & 4 /* KeepAlternativeSuggestions */) {\n            this._alternatives.value.set(event, next => {\n                // cancel resolving of additional edits\n                cts.cancel();\n                // this is not so pretty. when inserting the 'next'\n                // suggestion we undo until we are at the state at\n                // which we were before inserting the previous suggestion...\n                while (model.canUndo()) {\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\n                        model.undo();\n                    }\n                    this._insertSuggestion(next, 1 /* NoBeforeUndoStop */ | 2 /* NoAfterUndoStop */ | (flags & 8 /* AlternativeOverwriteConfig */ ? 8 /* AlternativeOverwriteConfig */ : 0));\n                    break;\n                }\n            });\n        }\n        this._alertCompletionItem(item);\n        // clear only now - after all tasks are done\n        Promise.all(tasks).finally(() => {\n            this._reportSuggestionAcceptedTelemetry(model, event);\n            this.model.clear();\n            cts.dispose();\n        });\n    }\n    _reportSuggestionAcceptedTelemetry(model, acceptedSuggestion) {\n        var _a;\n        if (this._telemetryGate++ % 100 !== 0) {\n            return;\n        }\n        // _debugDisplayName looks like `vscode.css-language-features(/-:)`, where the last bit is the trigger chars\n        // normalize it to just the extension ID and lowercase\n        const providerId = ((_a = acceptedSuggestion.item.provider._debugDisplayName) !== null && _a !== void 0 ? _a : 'unknown').split('(', 1)[0].toLowerCase();\n        this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\n            providerId,\n            basenameHash: hash(basename(model.uri)).toString(16),\n            languageId: model.getLanguageId(),\n            fileExtension: extname(model.uri),\n        });\n    }\n    getOverwriteInfo(item, toggleMode) {\n        assertType(this.editor.hasModel());\n        let replace = this.editor.getOption(106 /* suggest */).insertMode === 'replace';\n        if (toggleMode) {\n            replace = !replace;\n        }\n        const overwriteBefore = item.position.column - item.editStart.column;\n        const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n        const columnDelta = this.editor.getPosition().column - item.position.column;\n        const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n        return {\n            overwriteBefore: overwriteBefore + columnDelta,\n            overwriteAfter: overwriteAfter + suffixDelta\n        };\n    }\n    _alertCompletionItem(item) {\n        if (isNonEmptyArray(item.completion.additionalTextEdits)) {\n            let msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\n            alert(msg);\n        }\n    }\n    triggerSuggest(onlyFrom, auto) {\n        if (this.editor.hasModel()) {\n            this.model.trigger({ auto: auto !== null && auto !== void 0 ? auto : false, shy: false }, false, onlyFrom);\n            this.editor.revealPosition(this.editor.getPosition(), 0 /* Smooth */);\n            this.editor.focus();\n        }\n    }\n    triggerSuggestAndAcceptBest(arg) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const positionNow = this.editor.getPosition();\n        const fallback = () => {\n            if (positionNow.equals(this.editor.getPosition())) {\n                this._commandService.executeCommand(arg.fallback);\n            }\n        };\n        const makesTextEdit = (item) => {\n            if (item.completion.insertTextRules & 4 /* InsertAsSnippet */ || item.completion.additionalTextEdits) {\n                // snippet, other editor -> makes edit\n                return true;\n            }\n            const position = this.editor.getPosition();\n            const startColumn = item.editStart.column;\n            const endColumn = position.column;\n            if (endColumn - startColumn !== item.completion.insertText.length) {\n                // unequal lengths -> makes edit\n                return true;\n            }\n            const textNow = this.editor.getModel().getValueInRange({\n                startLineNumber: position.lineNumber,\n                startColumn,\n                endLineNumber: position.lineNumber,\n                endColumn\n            });\n            // unequal text -> makes edit\n            return textNow !== item.completion.insertText;\n        };\n        Event.once(this.model.onDidTrigger)(_ => {\n            // wait for trigger because only then the cancel-event is trustworthy\n            let listener = [];\n            Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\n                // retrigger or cancel -> try to type default text\n                dispose(listener);\n                fallback();\n            }, undefined, listener);\n            this.model.onDidSuggest(({ completionModel }) => {\n                dispose(listener);\n                if (completionModel.items.length === 0) {\n                    fallback();\n                    return;\n                }\n                const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\n                const item = completionModel.items[index];\n                if (!makesTextEdit(item)) {\n                    fallback();\n                    return;\n                }\n                this.editor.pushUndoStop();\n                this._insertSuggestion({ index, item, model: completionModel }, 4 /* KeepAlternativeSuggestions */ | 1 /* NoBeforeUndoStop */ | 2 /* NoAfterUndoStop */);\n            }, undefined, listener);\n        });\n        this.model.trigger({ auto: false, shy: true });\n        this.editor.revealPosition(positionNow, 0 /* Smooth */);\n        this.editor.focus();\n    }\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\n        const item = this.widget.value.getFocusedItem();\n        let flags = 0;\n        if (keepAlternativeSuggestions) {\n            flags |= 4 /* KeepAlternativeSuggestions */;\n        }\n        if (alternativeOverwriteConfig) {\n            flags |= 8 /* AlternativeOverwriteConfig */;\n        }\n        this._insertSuggestion(item, flags);\n    }\n    acceptNextSuggestion() {\n        this._alternatives.value.next();\n    }\n    acceptPrevSuggestion() {\n        this._alternatives.value.prev();\n    }\n    cancelSuggestWidget() {\n        this.model.cancel();\n        this.model.clear();\n        this.widget.value.hideWidget();\n    }\n    selectNextSuggestion() {\n        this.widget.value.selectNext();\n    }\n    selectNextPageSuggestion() {\n        this.widget.value.selectNextPage();\n    }\n    selectLastSuggestion() {\n        this.widget.value.selectLast();\n    }\n    selectPrevSuggestion() {\n        this.widget.value.selectPrevious();\n    }\n    selectPrevPageSuggestion() {\n        this.widget.value.selectPreviousPage();\n    }\n    selectFirstSuggestion() {\n        this.widget.value.selectFirst();\n    }\n    toggleSuggestionDetails() {\n        this.widget.value.toggleDetails();\n    }\n    toggleExplainMode() {\n        this.widget.value.toggleExplainMode();\n    }\n    toggleSuggestionFocus() {\n        this.widget.value.toggleDetailsFocus();\n    }\n    resetWidgetSize() {\n        this.widget.value.resetPersistedSize();\n    }\n    forceRenderingAbove() {\n        this.widget.value.forceRenderingAbove();\n    }\n    stopForceRenderingAbove() {\n        if (!this.widget.isInitialized) {\n            // This method has no effect if the widget is not initialized yet.\n            return;\n        }\n        this.widget.value.stopForceRenderingAbove();\n    }\n    registerSelector(selector) {\n        return this._selectors.register(selector);\n    }\n};\nSuggestController.ID = 'editor.contrib.suggestController';\nSuggestController = __decorate([\n    __param(1, ISuggestMemoryService),\n    __param(2, ICommandService),\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ILogService),\n    __param(6, ITelemetryService)\n], SuggestController);\nexport { SuggestController };\nclass PriorityRegistry {\n    constructor(prioritySelector) {\n        this.prioritySelector = prioritySelector;\n        this._items = new Array();\n    }\n    register(value) {\n        if (this._items.indexOf(value) !== -1) {\n            throw new Error('Value is already registered');\n        }\n        this._items.push(value);\n        this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\n        return {\n            dispose: () => {\n                const idx = this._items.indexOf(value);\n                if (idx >= 0) {\n                    this._items.splice(idx, 1);\n                }\n            }\n        };\n    }\n    get itemsOrderedByPriorityDesc() {\n        return this._items;\n    }\n}\nexport class TriggerSuggestAction extends EditorAction {\n    constructor() {\n        super({\n            id: TriggerSuggestAction.id,\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n            alias: 'Trigger Suggest',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* CtrlCmd */ | 10 /* Space */,\n                secondary: [2048 /* CtrlCmd */ | 39 /* KeyI */],\n                mac: { primary: 256 /* WinCtrl */ | 10 /* Space */, secondary: [512 /* Alt */ | 9 /* Escape */, 2048 /* CtrlCmd */ | 39 /* KeyI */] },\n                weight: 100 /* EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        const controller = SuggestController.get(editor);\n        if (!controller) {\n            return;\n        }\n        let auto;\n        if (args && typeof args === 'object') {\n            if (args.auto === true) {\n                auto = true;\n            }\n        }\n        controller.triggerSuggest(undefined, auto);\n    }\n}\nTriggerSuggestAction.id = 'editor.action.triggerSuggest';\nregisterEditorContribution(SuggestController.ID, SuggestController);\nregisterEditorAction(TriggerSuggestAction);\nconst weight = 100 /* EditorContrib */ + 90;\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptSelectedSuggestion',\n    precondition: SuggestContext.Visible,\n    handler(x) {\n        x.acceptSelectedSuggestion(true, false);\n    }\n}));\n// normal tab\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'acceptSelectedSuggestion',\n    when: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n    primary: 2 /* Tab */,\n    weight\n});\n// accept on enter has special rules\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'acceptSelectedSuggestion',\n    when: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n    primary: 3 /* Enter */,\n    weight,\n});\nMenuRegistry.appendMenuItem(suggestWidgetStatusbarMenu, {\n    command: { id: 'acceptSelectedSuggestion', title: nls.localize('accept.insert', \"Insert\") },\n    group: 'left',\n    order: 1,\n    when: SuggestContext.HasInsertAndReplaceRange.toNegated()\n});\nMenuRegistry.appendMenuItem(suggestWidgetStatusbarMenu, {\n    command: { id: 'acceptSelectedSuggestion', title: nls.localize('accept.insert', \"Insert\") },\n    group: 'left',\n    order: 1,\n    when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\n});\nMenuRegistry.appendMenuItem(suggestWidgetStatusbarMenu, {\n    command: { id: 'acceptSelectedSuggestion', title: nls.localize('accept.replace', \"Replace\") },\n    group: 'left',\n    order: 1,\n    when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\n});\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptAlternativeSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* Shift */ | 3 /* Enter */,\n        secondary: [1024 /* Shift */ | 2 /* Tab */],\n    },\n    handler(x) {\n        x.acceptSelectedSuggestion(false, true);\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\n            title: nls.localize('accept.replace', \"Replace\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\n            title: nls.localize('accept.insert', \"Insert\")\n        }]\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n    id: 'hideSuggestWidget',\n    precondition: SuggestContext.Visible,\n    handler: x => x.cancelSuggestWidget(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 9 /* Escape */,\n        secondary: [1024 /* Shift */ | 9 /* Escape */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 18 /* DownArrow */,\n        secondary: [2048 /* CtrlCmd */ | 18 /* DownArrow */],\n        mac: { primary: 18 /* DownArrow */, secondary: [2048 /* CtrlCmd */ | 18 /* DownArrow */, 256 /* WinCtrl */ | 44 /* KeyN */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectNextPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 12 /* PageDown */,\n        secondary: [2048 /* CtrlCmd */ | 12 /* PageDown */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectLastSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectLastSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 16 /* UpArrow */,\n        secondary: [2048 /* CtrlCmd */ | 16 /* UpArrow */],\n        mac: { primary: 16 /* UpArrow */, secondary: [2048 /* CtrlCmd */ | 16 /* UpArrow */, 256 /* WinCtrl */ | 46 /* KeyP */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectPrevPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 11 /* PageUp */,\n        secondary: [2048 /* CtrlCmd */ | 11 /* PageUp */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectFirstSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.MultipleSuggestions),\n    handler: c => c.selectFirstSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionDetails',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionDetails(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* CtrlCmd */ | 10 /* Space */,\n        secondary: [2048 /* CtrlCmd */ | 39 /* KeyI */],\n        mac: { primary: 256 /* WinCtrl */ | 10 /* Space */, secondary: [2048 /* CtrlCmd */ | 39 /* KeyI */] }\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\n            title: nls.localize('detail.more', \"show less\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\n            title: nls.localize('detail.less', \"show more\")\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleExplainMode',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleExplainMode(),\n    kbOpts: {\n        weight: 100 /* EditorContrib */,\n        primary: 2048 /* CtrlCmd */ | 85 /* Slash */,\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionFocus',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionFocus(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* CtrlCmd */ | 512 /* Alt */ | 10 /* Space */,\n        mac: { primary: 256 /* WinCtrl */ | 512 /* Alt */ | 10 /* Space */ }\n    }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertBestCompletion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: (x, arg) => {\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? Object.assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\n    },\n    kbOpts: {\n        weight,\n        primary: 2 /* Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertNextSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2 /* Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertPrevSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* Shift */ | 2 /* Tab */\n    }\n}));\nregisterEditorAction(class extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.resetSuggestSize',\n            label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\n            alias: 'Reset Suggest Widget Size',\n            precondition: undefined\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = SuggestController.get(editor)) === null || _a === void 0 ? void 0 : _a.resetWidgetSize();\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { localize } from '../../../../nls.js';\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hc: '#EE9D28'\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hc: '#B180D7'\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hc: '#EE9D28'\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hc: '#75BEFF'\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hc: '#EE9D28'\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hc: '#75BEFF'\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hc: '#B180D7'\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hc: '#75BEFF'\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hc: '#B180D7'\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\n    dark: foreground,\n    light: foreground,\n    hc: foreground\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hc: '#75BEFF'\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nregisterThemingParticipant((theme, collector) => {\n    const symbolIconArrayColor = theme.getColor(SYMBOL_ICON_ARRAY_FOREGROUND);\n    if (symbolIconArrayColor) {\n        collector.addRule(`${Codicon.symbolArray.cssSelector} { color: ${symbolIconArrayColor}; }`);\n    }\n    const symbolIconBooleanColor = theme.getColor(SYMBOL_ICON_BOOLEAN_FOREGROUND);\n    if (symbolIconBooleanColor) {\n        collector.addRule(`${Codicon.symbolBoolean.cssSelector} { color: ${symbolIconBooleanColor}; }`);\n    }\n    const symbolIconClassColor = theme.getColor(SYMBOL_ICON_CLASS_FOREGROUND);\n    if (symbolIconClassColor) {\n        collector.addRule(`${Codicon.symbolClass.cssSelector} { color: ${symbolIconClassColor}; }`);\n    }\n    const symbolIconMethodColor = theme.getColor(SYMBOL_ICON_METHOD_FOREGROUND);\n    if (symbolIconMethodColor) {\n        collector.addRule(`${Codicon.symbolMethod.cssSelector} { color: ${symbolIconMethodColor}; }`);\n    }\n    const symbolIconColorColor = theme.getColor(SYMBOL_ICON_COLOR_FOREGROUND);\n    if (symbolIconColorColor) {\n        collector.addRule(`${Codicon.symbolColor.cssSelector} { color: ${symbolIconColorColor}; }`);\n    }\n    const symbolIconConstantColor = theme.getColor(SYMBOL_ICON_CONSTANT_FOREGROUND);\n    if (symbolIconConstantColor) {\n        collector.addRule(`${Codicon.symbolConstant.cssSelector} { color: ${symbolIconConstantColor}; }`);\n    }\n    const symbolIconConstructorColor = theme.getColor(SYMBOL_ICON_CONSTRUCTOR_FOREGROUND);\n    if (symbolIconConstructorColor) {\n        collector.addRule(`${Codicon.symbolConstructor.cssSelector} { color: ${symbolIconConstructorColor}; }`);\n    }\n    const symbolIconEnumeratorColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_FOREGROUND);\n    if (symbolIconEnumeratorColor) {\n        collector.addRule(`\n\t\t\t${Codicon.symbolValue.cssSelector},${Codicon.symbolEnum.cssSelector} { color: ${symbolIconEnumeratorColor}; }`);\n    }\n    const symbolIconEnumeratorMemberColor = theme.getColor(SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND);\n    if (symbolIconEnumeratorMemberColor) {\n        collector.addRule(`${Codicon.symbolEnumMember.cssSelector} { color: ${symbolIconEnumeratorMemberColor}; }`);\n    }\n    const symbolIconEventColor = theme.getColor(SYMBOL_ICON_EVENT_FOREGROUND);\n    if (symbolIconEventColor) {\n        collector.addRule(`${Codicon.symbolEvent.cssSelector} { color: ${symbolIconEventColor}; }`);\n    }\n    const symbolIconFieldColor = theme.getColor(SYMBOL_ICON_FIELD_FOREGROUND);\n    if (symbolIconFieldColor) {\n        collector.addRule(`${Codicon.symbolField.cssSelector} { color: ${symbolIconFieldColor}; }`);\n    }\n    const symbolIconFileColor = theme.getColor(SYMBOL_ICON_FILE_FOREGROUND);\n    if (symbolIconFileColor) {\n        collector.addRule(`${Codicon.symbolFile.cssSelector} { color: ${symbolIconFileColor}; }`);\n    }\n    const symbolIconFolderColor = theme.getColor(SYMBOL_ICON_FOLDER_FOREGROUND);\n    if (symbolIconFolderColor) {\n        collector.addRule(`${Codicon.symbolFolder.cssSelector} { color: ${symbolIconFolderColor}; }`);\n    }\n    const symbolIconFunctionColor = theme.getColor(SYMBOL_ICON_FUNCTION_FOREGROUND);\n    if (symbolIconFunctionColor) {\n        collector.addRule(`${Codicon.symbolFunction.cssSelector} { color: ${symbolIconFunctionColor}; }`);\n    }\n    const symbolIconInterfaceColor = theme.getColor(SYMBOL_ICON_INTERFACE_FOREGROUND);\n    if (symbolIconInterfaceColor) {\n        collector.addRule(`${Codicon.symbolInterface.cssSelector} { color: ${symbolIconInterfaceColor}; }`);\n    }\n    const symbolIconKeyColor = theme.getColor(SYMBOL_ICON_KEY_FOREGROUND);\n    if (symbolIconKeyColor) {\n        collector.addRule(`${Codicon.symbolKey.cssSelector} { color: ${symbolIconKeyColor}; }`);\n    }\n    const symbolIconKeywordColor = theme.getColor(SYMBOL_ICON_KEYWORD_FOREGROUND);\n    if (symbolIconKeywordColor) {\n        collector.addRule(`${Codicon.symbolKeyword.cssSelector} { color: ${symbolIconKeywordColor}; }`);\n    }\n    const symbolIconModuleColor = theme.getColor(SYMBOL_ICON_MODULE_FOREGROUND);\n    if (symbolIconModuleColor) {\n        collector.addRule(`${Codicon.symbolModule.cssSelector} { color: ${symbolIconModuleColor}; }`);\n    }\n    const outlineNamespaceColor = theme.getColor(SYMBOL_ICON_NAMESPACE_FOREGROUND);\n    if (outlineNamespaceColor) {\n        collector.addRule(`${Codicon.symbolNamespace.cssSelector} { color: ${outlineNamespaceColor}; }`);\n    }\n    const symbolIconNullColor = theme.getColor(SYMBOL_ICON_NULL_FOREGROUND);\n    if (symbolIconNullColor) {\n        collector.addRule(`${Codicon.symbolNull.cssSelector} { color: ${symbolIconNullColor}; }`);\n    }\n    const symbolIconNumberColor = theme.getColor(SYMBOL_ICON_NUMBER_FOREGROUND);\n    if (symbolIconNumberColor) {\n        collector.addRule(`${Codicon.symbolNumber.cssSelector} { color: ${symbolIconNumberColor}; }`);\n    }\n    const symbolIconObjectColor = theme.getColor(SYMBOL_ICON_OBJECT_FOREGROUND);\n    if (symbolIconObjectColor) {\n        collector.addRule(`${Codicon.symbolObject.cssSelector} { color: ${symbolIconObjectColor}; }`);\n    }\n    const symbolIconOperatorColor = theme.getColor(SYMBOL_ICON_OPERATOR_FOREGROUND);\n    if (symbolIconOperatorColor) {\n        collector.addRule(`${Codicon.symbolOperator.cssSelector} { color: ${symbolIconOperatorColor}; }`);\n    }\n    const symbolIconPackageColor = theme.getColor(SYMBOL_ICON_PACKAGE_FOREGROUND);\n    if (symbolIconPackageColor) {\n        collector.addRule(`${Codicon.symbolPackage.cssSelector} { color: ${symbolIconPackageColor}; }`);\n    }\n    const symbolIconPropertyColor = theme.getColor(SYMBOL_ICON_PROPERTY_FOREGROUND);\n    if (symbolIconPropertyColor) {\n        collector.addRule(`${Codicon.symbolProperty.cssSelector} { color: ${symbolIconPropertyColor}; }`);\n    }\n    const symbolIconReferenceColor = theme.getColor(SYMBOL_ICON_REFERENCE_FOREGROUND);\n    if (symbolIconReferenceColor) {\n        collector.addRule(`${Codicon.symbolReference.cssSelector} { color: ${symbolIconReferenceColor}; }`);\n    }\n    const symbolIconSnippetColor = theme.getColor(SYMBOL_ICON_SNIPPET_FOREGROUND);\n    if (symbolIconSnippetColor) {\n        collector.addRule(`${Codicon.symbolSnippet.cssSelector} { color: ${symbolIconSnippetColor}; }`);\n    }\n    const symbolIconStringColor = theme.getColor(SYMBOL_ICON_STRING_FOREGROUND);\n    if (symbolIconStringColor) {\n        collector.addRule(`${Codicon.symbolString.cssSelector} { color: ${symbolIconStringColor}; }`);\n    }\n    const symbolIconStructColor = theme.getColor(SYMBOL_ICON_STRUCT_FOREGROUND);\n    if (symbolIconStructColor) {\n        collector.addRule(`${Codicon.symbolStruct.cssSelector} { color: ${symbolIconStructColor}; }`);\n    }\n    const symbolIconTextColor = theme.getColor(SYMBOL_ICON_TEXT_FOREGROUND);\n    if (symbolIconTextColor) {\n        collector.addRule(`${Codicon.symbolText.cssSelector} { color: ${symbolIconTextColor}; }`);\n    }\n    const symbolIconTypeParameterColor = theme.getColor(SYMBOL_ICON_TYPEPARAMETER_FOREGROUND);\n    if (symbolIconTypeParameterColor) {\n        collector.addRule(`${Codicon.symbolTypeParameter.cssSelector} { color: ${symbolIconTypeParameterColor}; }`);\n    }\n    const symbolIconUnitColor = theme.getColor(SYMBOL_ICON_UNIT_FOREGROUND);\n    if (symbolIconUnitColor) {\n        collector.addRule(`${Codicon.symbolUnit.cssSelector} { color: ${symbolIconUnitColor}; }`);\n    }\n    const symbolIconVariableColor = theme.getColor(SYMBOL_ICON_VARIABLE_FOREGROUND);\n    if (symbolIconVariableColor) {\n        collector.addRule(`${Codicon.symbolVariable.cssSelector} { color: ${symbolIconVariableColor}; }`);\n    }\n});\n"],"names":["AbstractEditorCommandsQuickAccessProvider","options","instantiationService","keybindingService","commandService","telemetryService","dialogService","activeTextEditorControl","this","editorCommandPicks","getSupportedActions","editorAction","push","commandId","id","commandAlias","alias","label","stripIcons","AbstractCommandsQuickAccessProvider","AbstractEditorNavigationQuickAccessProvider","rangeHighlightDecorationId","undefined","picker","token","_a","disposables","DisposableStore","canAcceptInBackground","matchOnLabel","matchOnDescription","matchOnDetail","sortByLabel","pickerDisposable","add","MutableDisposable","value","doProvide","onDidActiveTextEditorControlChange","editor","canProvideWithTextEditor","context","codeEditor","getCodeEditor","lastKnownEditorViewState","withNullAsUndefined","saveViewState","onDidChangeCursorPosition","restoreViewState","once","onCancellationRequested","call","toDisposable","clearDecorations","provideWithTextEditor","provideWithoutTextEditor","setSelection","range","revealRangeInCenter","preserveFocus","focus","isDiffEditor","getModel","modified","changeDecorations","changeAccessor","deleteDecorations","overviewRulerDecorationId","rangeHighlightId","newDecorations","description","className","isWholeLine","overviewRuler","color","themeColorFromId","overviewRulerRangeHighlight","position","OverviewRulerLane","deltaDecorations","AbstractGotoLineQuickAccessProvider","localize","items","ariaLabel","Disposable","onDidAccept","event","item","selectedItems","isValidLineNumber","lineNumber","gotoLocation","toRange","column","keyMods","inBackground","hide","updatePickerAndEditor","parsePosition","trim","substr","PREFIX","length","getPickLabel","addDecorations","onDidChangeValue","getOptions","get","renderType","updateOptions","lineNumbers","startLineNumber","startColumn","endLineNumber","endColumn","numbers","split","map","part","parseInt","filter","isNaN","endLine","lineCount","isValidColumn","getPosition","model","positionCandidate","validatePosition","equals","_b","getLineCount","__decorate","decorators","target","key","desc","d","c","arguments","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","AbstractGotoSymbolQuickAccessProvider","_outlineModelService","create","provideLabelPick","DocumentSymbolProviderRegistry","doProvideWithEditorSymbols","doProvideWithoutEditorSymbols","waitForLanguageSymbolRegistry","isCancellationRequested","index","kind","symbolProviderRegistryPromise","DeferredPromise","symbolProviderListener","dispose","complete","p","selection","onDidTriggerItemButton","forceSideBySide","symbolsPromise","getDocumentSymbols","picksCts","updatePickerItems","busy","CancellationTokenSource","query","prepareQuery","doGetSymbolPicks","original","ignoreFirstActiveEvent","onDidChangeActive","activeItems","decoration","symbols","filterBySymbolKind","indexOf","SCOPE_PREFIX","filterPos","values","symbolQuery","pieceToQuery","containerQuery","slice","filteredSymbolPicks","symbol","symbolLabel","name","symbolLabelWithIcon","SymbolKinds","symbolLabelIconOffset","containerLabel","containerName","extraContainerLabel","symbolScore","symbolMatches","containerScore","containerMatches","skipContainerQuery","scoreFuzzy2","assign","deprecated","tags","score","highlights","Range","selectionRange","strikethrough","buttons","openSideBySideDirection","iconClass","Codicon","tooltip","sortedFilteredSymbolPicks","sort","symbolA","symbolB","compareByKindAndScore","compareByScore","symbolPicks","updateLastSeparatorLabel","lastSeparator","lastSymbolKind","lastSymbolKindCounter","format","NLS_SYMBOL_KIND_CACHE","FALLBACK_NLS_SYMBOL_KIND","symbolPick","type","kindA","kindB","localeCompare","document","getOrCreate","asListOfDocumentSymbols","PREFIX_BY_CATEGORY","IOutlineModelService","CONTEXT_RENAME_INPUT_VISIBLE","RawContextKey","RenameInputField","_editor","_acceptKeybindings","_themeService","_keybindingService","contextKeyService","_disposables","allowEditorOverflow","_visibleContextKey","bindTo","addContentWidget","onDidChangeConfiguration","hasChanged","_updateFont","onDidColorThemeChange","_updateStyles","removeContentWidget","_domNode","createElement","_input","setAttribute","appendChild","_label","updateLabel","accept","preview","lookupKeybinding","innerText","comment","getLabel","onDidUpdateKeybindings","getColorTheme","theme","_c","_d","widgetShadowColor","getColor","widgetShadow","style","backgroundColor","String","editorWidgetBackground","boxShadow","inputForeground","inputBackground","border","inputBorder","borderWidth","borderStyle","borderColor","toString","fontInfo","getOption","fontFamily","fontWeight","fontSize","_visible","_position","preference","cancelInput","wantsPreview","_currentAcceptInput","focusEditor","_currentCancelInput","where","selectionStart","selectionEnd","supportPreview","classList","toggle","Position","size","Math","max","disposeOnDone","newName","onDidBlurEditorWidget","_show","finally","_hide","revealLineInCenterIfOutsideViewport","set","layoutContentWidget","setTimeout","setSelectionRange","getAttribute","reset","IThemeService","IKeybindingService","IContextKeyService","RenameSkeleton","_providerRenameIdx","_providers","RenameProviderRegistry","rejects","provider","resolveRenameLocation","res","rejectReason","word","getWordAtPosition","text","join","_provideRenameEdits","edits","provideRenameEdits","concat","nls","rename","skeleton","CancellationToken","loc","RenameController","_instaService","_notificationService","_bulkEditService","_progressService","_logService","_configService","_dispoableStore","_cts","_renameInputField","IdleValue","createInstance","hasModel","hasProvider","EditorStateCancellationTokenSource","resolveLocationOperation","showWhile","MessageController","showMessage","getSelection","min","hasPreviewHandler","getValue","uri","getInput","inputFieldResult","renameOperation","raceCancellation","renameResult","info","ResourceEdit","showPreview","quotableLabel","ariaSummary","alert","catch","err","error","acceptInput","getContribution","ID","IInstantiationService","INotificationService","IBulkEditService","IEditorProgressService","ILogService","ITextResourceConfigurationService","RenameAction","precondition","ContextKeyExpr","EditorContextKeys","kbOpts","kbExpr","primary","weight","contextMenuOpts","group","order","accessor","args","editorService","ICodeEditorService","Array","isArray","pos","URI","openCodeEditor","resource","getActiveCodeEditor","setPosition","invokeWithinContext","reportTelemetry","run","onUnexpectedError","controller","EditorAction","registerEditorContribution","registerEditorAction","RenameCommand","EditorCommand","registerEditorCommand","handler","x","acceptRenameInput","cancelRenameInput","secondary","registerModelAndPositionCommand","assertType","Error","Registry","Extensions","registerConfiguration","properties","scope","default","BracketSelectionRangeProvider","positions","bucket","ranges","Map","_bracketsRightYield","_bracketsLeftYield","f","round","counts","t1","Date","now","_maxRounds","bracket","bracketPairs","findNextBracket","_maxDuration","close","isOpen","val","has","list","LinkedList","getEndPosition","findPrevBracket","closing","shift","delete","innerBracket","getStartPosition","outerBracket","_addBracketLeading","startLine","getLineFirstNonWhitespaceColumn","aboveLine","getLineLastNonWhitespaceColumn","WordSelectionRangeProvider","_addInWordRanges","_addWordRanges","_addWhitespaceLine","getFullModelRange","obj","offset","start","end","lastCh","ch","charCodeAt","isLowerAsciiLetter","isUpperAsciiLetter","getLineLength","getLineMaxColumn","SelectionRanges","fwd","equalsRange","mov","SmartSelectController","_ignoreSelection","_selectionListener","forward","selections","getSelections","modes","_state","provideSelectionRanges","s","arrays","a","b","equalsSelection","containsPosition","unshift","state","newSelections","Selection","setSelections","AbstractSmartSelect","opts","_forward","_accessor","GrowSelectionAction","mac","menuOpts","menuId","MenuId","title","CommandsRegistry","ShrinkSelectionAction","providers","work","allRawRanges","allProviderRanges","oneProviderRanges","onUnexpectedExternalError","all","oneRawRanges","last","oneRanges","selectLeadingAndTrailingWhitespace","oneRangesWithTrivia","prev","cur","rangeNoWhitespace","containsRange","rangeFull","registerModelCommand","_defaultOptions","overwriteBefore","overwriteAfter","undoStopBefore","undoStopAfter","adjustWhitespace","clipboardText","overtypingCapturer","SnippetController2","_snippetListener","_modelVersionId","_inSnippet","InSnippetMode","_hasNextTabstop","HasNextTabstop","_hasPrevTabstop","HasPrevTabstop","_session","template","_doInsert","cancel","_logInfo","clear","pushStackElement","merge","getAlternativeVersionId","SnippetSession","insert","_updateState","onDidChangeModelContent","isFlush","onDidChangeModel","onDidChangeCursorSelection","hasPlaceholder","isAtLastPlaceholder","isSelectionWithinPlaceholders","isAtFirstPlaceholder","_handleChoice","choice","_currentChoice","first","showSimpleSuggestions","option","insertText","sortText","repeat","delta","resetSelection","Boolean","CommandCtor","ctrl","finish","Scanner","len","_table","isDigitCharacter","isVariableCharacter","Marker","_children","child","Text","parent","others","idx","children","newChildren","splice","_fixParent","candidate","TextmateSnippet","reduce","TransformableMarker","Placeholder","Choice","ret","transform","clone","isFinalTabstop","marker","forEach","Transform","regexp","RegExp","_this","didMatch","replace","_replace","prototype","some","FormatString","elseValue","groups","source","ignoreCase","global","shorthandName","ifValue","toLocaleUpperCase","toLocaleLowerCase","_toPascalCase","_toCamelCase","match","charAt","toUpperCase","toLowerCase","Variable","resolver","walk","visitor","stack","_placeholders","placeholderInfo","found","placeholder","SnippetParser","_scanner","_token","insertFinalTabstop","enforceFinalTabstop","snippet","_parse","placeholderDefaultValues","incompletePlaceholders","placeholderCount","defaultValues","tokenText","nextToken","substring","_parseEscaped","_parseTabstopOrVariableName","_parseComplexPlaceholder","_parseComplexVariable","_parseAnything","_accept","test","Number","_backTo","_parseTransform","_parseChoiceElement","variable","regexValue","regexOptions","escaped","_parseFormatString","complex","shorthand","_until","CompositeSnippetVariableResolver","freeze","_delegates","SelectionBasedVariableResolver","_model","_selection","_selectionIdx","_overtypingCapturer","getValueInRange","isMultiline","getLastOvertypedInfo","multiline","line","getLineContent","lineLeadingWhitespace","getLeadingWhitespace","varLeadingWhitespace","splitLines","pop","whitespaceCommonLength","commonPrefixLength","m","newline","rest","positionLineNumber","positionColumn","ModelBasedVariableResolver","_labelService","path","fsPath","lastIndexOf","getUriLabel","dirname","relative","noPrefix","ClipboardBasedVariableResolver","_readClipboardText","_selectionCount","_spread","lines","isFalsyOrWhitespace","CommentBasedVariableResolver","langId","getLanguageIdAtPosition","selectionStartLineNumber","selectionStartColumn","config","LanguageConfigurationRegistry","lineCommentToken","blockCommentStartToken","blockCommentEndToken","TimeBasedVariableResolver","_date","getFullYear","getMonth","valueOf","padStart","getDate","getHours","getMinutes","getSeconds","dayNames","getDay","dayNamesShort","monthNames","monthNamesShort","floor","getTime","WorkspaceBasedVariableResolver","_workspaceService","workspaceIdentifier","toWorkspaceIdentifier","getWorkspace","_resolveWorkspaceName","_resoveWorkspacePath","isSingleFolderWorkspaceIdentifier","filename","configPath","endsWith","WORKSPACE_EXTENSION","normalizeDriveLetter","folderpath","RandomBasedVariableResolver","random","generateUuid","OneSnippet","_snippet","_offset","_snippetLineLeadingWhitespace","_nestingLevel","_placeholderGroups","groupBy","placeholders","_placeholderGroupsIdx","_placeholderDecorations","placeholderOffset","placeholderLen","fullLen","getPositionAt","_decor","inactiveFinal","inactive","handle","addDecoration","_initDecorations","operations","getDecorationRange","currentValue","transformedValueLines","normalizeIndentation","EditOperation","getEOL","executeEdits","couldSkipThisPlaceholder","activePlaceholders","Set","_hasPlaceholderBeenCollapsed","changeDecorationOptions","activeFinal","active","enclosingPlaceholders","enclosingPlaceholder","move","isEmpty","placeholdersWithEqualIndex","nested","console","assert","indexLastPlaceholder","nestedPlaceholder","removeDecoration","ModelDecorationOptions","stickiness","_templateMerges","_snippets","_template","_options","createEditsAndSnippets","snippets","undoEdits","_move","edit","identifier","revealRange","revealPositionInCenterIfOutsideViewport","oneSelection","allPossibleSelections","possibleSelections","computePossibleSelections","array","adjustIndentation","adjustNewlines","snippetTextString","prevChar","newValue","positionColumnBefore","positionColumnAfter","validateRange","getDirection","workspaceService","IWorkspaceContextService","modelBasedVariableResolver","ILabelService","readClipboardText","firstBeforeText","adjustSelection","firstAfterText","firstLineFirstNonWhitespace","indexedSelections","extensionBefore","extensionAfter","snippetSelection","setStartPosition","setEndPosition","parse","snippetLineLeadingWhitespace","resolveVariables","getOffsetAt","getValueLengthInRange","major","minor","_snippetSuggestSupport","Context","Visible","DetailsVisible","MultipleSuggestions","MakesTextEdit","AcceptSuggestionsOnEnter","HasInsertAndReplaceRange","InsertMode","CanResolve","suggestWidgetStatusbarMenu","CompletionItem","completion","container","isInvalid","FuzzyScore","distance","textLabel","labelLow","sortTextLow","filterTextLow","filterText","editStart","editInsertEnd","editReplaceEnd","resolveCompletionItem","_resolveCache","_isResolved","sub","isCancellationError","CompletionOptions","snippetSortOrder","kindFilter","providerFilter","showDeprecated","getSnippetSuggestSupport","CompletionItemModel","needsClipboard","durations","disposable","provideSuggestionItems","triggerKind","sw","StopWatch","defaultReplaceRange","defaultRange","onCompletionList","didAddResult","suggestions","suggestion","includes","insertTextRules","isDisposable","providerName","_debugDisplayName","elapsedProvider","duration","elapsedOverall","elapsed","snippetCompletions","provideCompletionItems","providerGroup","canceled","getSuggestionComparator","entries","defaultComparator","_snippetComparators","snippetConfig","triggerCharacter","maxItemsToResolve","ITextModelService","createModelReference","ref","incomplete","resolving","object","textEditorModel","completions","_provider","onlyOnceSuggestions","triggerSuggest","Memory","topScore","preselect","NoMemory","LRUMemory","_cache","LRUCache","_seq","getLanguageId","touch","lineSuffix","indexPreselect","indexRecency","seq","peek","toJSON","data","CompletionItemKinds","PrefixMemory","_trie","TernarySearchTree","getWordUntilPosition","findSubstr","SuggestMemoryService","_storageService","_persistSoon","RunOnceScheduler","_saveState","onWillSaveState","reason","WillSaveStateReason","_withStrategy","memorize","schedule","select","mode","overrideIdentifier","_strategy","ctor","_strategyCtors","raw","_storagePrefix","fromJSON","JSON","stringify","store","IStorageService","IConfigurationService","ISuggestMemoryService","createDecorator","registerSingleton","WordContextKey","_enabled","_ckAtEnd","AtEnd","_configListener","_update","enabled","checkForWordEnd","SuggestAlternatives","_index","_ckOtherSuggestions","OtherSuggestions","_listener","_acceptNext","_ignore","acceptNext","_moveIndex","newIndex","additionalTextEdits","CommitCharacterController","widget","onDidShow","_onItem","getFocusedItem","onDidFocus","onDidHide","onWillType","_active","isFrozen","acceptCharacters","selected","isNonEmptyArray","commitCharacters","CharacterSet","WordDistance","service","localityBonus","None","canComputeWordRanges","computeWordRanges","wordRanges","wordUntilPos","anchor","wordLines","isFalsyOrEmpty","binarySearch","bestWordRange","blockDistance","CompletionModel","lineContext","wordDistance","snippetSuggestions","_snippetCompareFn","_compareCompletionItems","_items","_column","_wordDistance","_refilterKind","_lineContext","_compareCompletionItemsSnippetsUp","_compareCompletionItemsSnippetsDown","leadingLineContent","characterCountDelta","_filteredItems","_ensureCachedState","_providerInfo","keys","except","_stats","_createCachedState","labelLengths","wordLow","scoreFn","filterGraceful","fuzzyScore","fuzzyScoreGracefulAggressive","wordLen","wordPos","compareIgnoreCase","anyScore","pLabelLen","quickSelect","LineContext","auto","shy","leadingWord","tokenizeIfCheap","SuggestModel","_editorWorkerService","_clipboardService","_telemetryService","_contextKeyService","_configurationService","_toDispose","_quickSuggestDelay","_triggerCharacterListener","_triggerQuickSuggest","TimeoutTimer","_completionDisposables","_onDidCancel","Emitter","_onDidTrigger","_onDidSuggest","onDidCancel","onDidTrigger","onDidSuggest","_telemetryGate","_currentSelection","_updateTriggerCharacters","onDidChangeModelLanguage","_updateQuickSuggest","CompletionProviderRegistry","_updateActiveSuggestSession","editorIsComposing","onDidCompositionStart","onDidCompositionEnd","_onCompositionEnd","_onCursorChange","_refilterCompletionItems","supportsByTriggerCharacter","support","triggerCharacters","checkTriggerCharacter","configurationService","getContextKeyValue","allowQuickSuggestions","canShowSuggestOnTriggerCharacters","shouldAutoTrigger","lastChar","isLowSurrogate","isHighSurrogate","supports","existing","_completionModel","adopt","trigger","onDidType","retrigger","_requestToken","_context","fire","prevSelection","isBeforeOrEqual","_doTriggerQuickSuggest","snippetsPreventQuickSuggestions","isInSnippet","cancelAndSet","quickSuggestions","lineTokens","getLineTokens","tokenType","getStandardTokenType","findTokenIndexAtOffset","other","comments","strings","canShowQuickSuggest","ctx","_onNewContext","onlyFrom","suggestCtx","_createSuggestFilter","itemKindFilter","itemKind","readText","cmpFn","_reportDurationsTelemetry","publicLog2","debug","inactiveProvider","allProvider","oldLineContext","completionModel","suggestOptions","showMethods","showFunctions","showConstructors","showFields","showVariables","showClasses","showStructs","showInterfaces","showModules","showProperties","showEvents","showOperators","showUnits","showValues","showConstants","showEnums","showEnumMembers","showKeywords","showWords","showColors","showFiles","showReferences","showFolders","showTypeParameters","showSnippets","showUsers","showIssues","IEditorWorkerService","IClipboardService","ITelemetryService","OvertypingCapturer","suggestModel","_lastOvertyped","_empty","selectionsLength","willOvertype","_maxSelectionLength","StatusBarViewItem","kb","_action","textContent","symbolPrintEnter","MenuEntryActionViewItem","SuggestWidgetStatus","_menuService","_menuDisposables","element","dom","append","$","actionViewItemProvider","action","MenuItemAction","_leftActions","ActionBar","_rightActions","domNode","remove","menu","createMenu","onDidChange","left","right","getActions","actions","renderMenu","IMenuService","ResizableHTMLElement","currentSize","_onDidWillResize","onDidWillResize","_onDidResize","onDidResize","_sashListener","_size","Dimension","_minSize","_maxSize","MAX_SAFE_INTEGER","_eastSash","Sash","getVerticalSashLeft","width","orientation","_westSash","_northSash","getHorizontalSashTop","orthogonalEdge","OrthogonalEdge","_southSash","height","orthogonalStartSash","orthogonalEndSash","deltaY","deltaX","Event","onDidStart","onDidEnd","dimension","currentX","startX","layout","east","west","currentY","startY","north","south","onDidReset","_preferredSize","minHeight","minWidth","maxHeight","maxWidth","newSize","clearSashHoverState","canExpandCompletionItem","documentation","detail","SuggestDetailsWidget","instaService","_onDidClose","onDidClose","_onDidChangeContents","onDidChangeContents","_renderDisposeable","_borderWidth","_markdownRenderer","MarkdownRenderer","_body","_scrollbar","DomScrollableElement","getDomNode","_header","_close","_type","_docs","_configureFont","getMassagedFontFamily","isSafari","EDITOR_FONT_DEFAULTS","lineHeight","fontSizePx","lineHeightPx","fontFeatureSettings","borderHeight","verticalPadding","horizontalPadding","getLayoutInfo","explainMode","md","MarkdownString","appendCodeblock","cappedDetail","show","clearNode","renderedContents","render","onDidRenderAsync","clientHeight","userSelect","tabIndex","onmousedown","preventDefault","stopPropagation","onclick","scrollTop","clearContents","scanDomNode","much","scrollHeight","scrollDown","scrollUp","SuggestDetailsOverlay","topLeftNow","sizeNow","_added","_preferAlignAtTop","_resizable","enableSashes","deltaTop","deltaLeft","_topLeft","updateTopLeft","_applyTopLeft","top","_userSize","_anchorBox","_placeAtAnchor","addOverlayWidget","sessionEnded","removeOverlayWidget","preferAlignAtTop","anchorBox","getBoundingClientRect","alignAtTop","maxSize","bodyBox","getClientArea","body","defaultMinSize","defaultTop","eastPlacement","maxSizeTop","maxSizeBottom","with","fit","minSize","placements","placement","find","bottom","topLeft","getAriaId","suggestMoreInfoIcon","registerIcon","_completionItemColor","out","ColorExtractor","_regexStrict","_regexRelaxed","exec","ItemRenderer","_modelService","_languageService","_onDidToggleDetails","onDidToggleDetails","templateId","root","icon","colorspan","main","iconContainer","iconLabel","IconLabel","supportHighlights","supportIcons","parametersLabel","qualifierLabel","detailsLabel","readMore","ThemeIcon","configureFont","labelOptions","labelEscapeNewLines","matches","createMatches","extract","getFileIconTheme","hasFileIcons","labelClasses","getIconClasses","scheme","FileKind","detailClasses","extraClasses","hasFolderIcons","flatten","CSSIcon","setLabel","stripNewLines","showInlineDetails","templateData","str","IModelService","ILanguageService","editorSuggestWidgetForeground","registerColor","dark","light","hc","editorWidgetBorder","editorForeground","editorSuggestWidgetSelectedBackground","quickInputListFocusForeground","quickInputListFocusIconForeground","quickInputListFocusBackground","PersistedWidgetSize","listHighlightForeground","listFocusHighlightForeground","transparent","_service","_key","getEditorType","EmbeddedCodeEditorWidget","is","lift","SuggestWidget","_isAuto","_ignoreFocusEvents","_forceRenderingAbove","_explainMode","_showTimeout","_onDidSelect","_onDidFocus","_onDidHide","_onDidShow","onDidSelect","_onDetailsKeydown","onDetailsKeyDown","_contentWidget","SuggestContentWidget","_persistedSize","ResizeState","persistedSize","persistHeight","persistWidth","lockPreference","restore","_resize","itemHeight","defaultSize","threshold","abs","unlockPreference","_messageElement","_listElement","details","toggleDetails","_details","applyIconStyle","showIcons","renderer","_list","List","getHeight","_element","getTemplateId","alwaysConsumeMouseWheel","useShadows","mouseSupport","accessibilityProvider","getRole","getWidgetAriaLabel","getWidgetRole","getAriaLabel","isResolved","_isDetailsVisible","docs","_status","applyStatusBarStyle","showStatusBar","attachListStyler","listInactiveFocusBackground","listInactiveFocusOutline","activeContrastBorder","t","_onThemeChange","onMouseDown","_onListMouseDownOrTap","onTap","onDidChangeSelection","_onListSelection","onDidChangeFocus","_onListFocus","_onCursorSelectionChanged","_ctxSuggestWidgetVisible","SuggestContext","_ctxSuggestWidgetDetailsVisible","_ctxSuggestWidgetMultipleSuggestions","addStandardDisposableListener","_onEditorMouseDown","_loadingTimeout","mouseEvent","contains","browserEvent","_select","elements","indexes","_currentSuggestionDetails","_focusedItem","setAriaOptions","activeDescendant","reveal","createCancelablePromise","loading","disposableTimeout","showDetails","setFocus","_cappedHeight","LOADING_MESSAGE","NO_SUGGESTIONS_MESSAGE","_layout","delay","_setState","selectionIndex","isAuto","visibleCount","pageDown","focusNextPage","focusNext","scrollBottom","focusLast","pageUp","focusPreviousPage","focusPrevious","focusFirst","getFocusedElements","getFocus","_setDetailsVisible","renderLoading","renderItem","_positionDetails","dim","minPersistedHeight","ceil","setPreference","preferredWidth","stats","typicalHalfwidthCharacterWidth","fullHeight","statusBarHeight","contentHeight","editorBox","getDomNodePagePosition","cursorBox","getScrolledVisiblePosition","cursorBottom","maxHeightBelow","availableSpaceAbove","maxHeightAbove","capped","wanted","preferredSize","placeAtAnchor","clamp","getBoolean","_widget","suppressMouseDown","_preferenceLocked","_hidden","_preference","_afterRender","LineSuffix","_marker","isDisposed","SuggestController","_memoryService","_commandService","_instantiationService","_lineSuffix","_selectors","PriorityRegistry","priority","ctxInsertMode","insertMode","_insertSuggestion","commitCharacterController","ctxMakesTextEdit","ctxHasInsertAndReplace","ctxCanResolve","toKeybinding","SimpleKeybinding","platform","isModifierKey","_alternatives","showTriggered","itemsOrderedByPriorityDesc","showSuggestions","hideWidget","acceptSuggestionsOnEnter","updateFromConfig","acceptSuggestionOnEnter","flags","snippetController","modelVersionNow","tasks","cts","pushUndoStop","getOverwriteInfo","scrollState","StableEditorScrollState","restoreRelativeVerticalPositionOfCursor","docListener","onDidChangeContent","changes","change","thisPosition","oldFlags","didType","typeListener","applied","trace","command","TriggerSuggestAction","executeCommand","canUndo","undo","_alertCompletionItem","_reportSuggestionAcceptedTelemetry","acceptedSuggestion","providerId","basenameHash","hash","basename","languageId","fileExtension","extname","toggleMode","msg","revealPosition","arg","positionNow","fallback","_","listener","makesTextEdit","keepAlternativeSuggestions","alternativeOverwriteConfig","selectNext","selectNextPage","selectLast","selectPrevious","selectPreviousPage","selectFirst","toggleExplainMode","toggleDetailsFocus","resetPersistedSize","forceRenderingAbove","isInitialized","stopForceRenderingAbove","selector","register","ICommandService","prioritySelector","s1","s2","SuggestCommand","acceptSelectedSuggestion","KeybindingsRegistry","when","MenuRegistry","cancelSuggestWidget","selectNextSuggestion","selectNextPageSuggestion","selectLastSuggestion","selectPrevSuggestion","selectPrevPageSuggestion","selectFirstSuggestion","toggleSuggestionDetails","toggleSuggestionFocus","toNegated","triggerSuggestAndAcceptBest","isObject","acceptNextSuggestion","acceptPrevSuggestion","resetWidgetSize","SYMBOL_ICON_ARRAY_FOREGROUND","foreground","SYMBOL_ICON_BOOLEAN_FOREGROUND","SYMBOL_ICON_CLASS_FOREGROUND","SYMBOL_ICON_COLOR_FOREGROUND","SYMBOL_ICON_CONSTANT_FOREGROUND","SYMBOL_ICON_CONSTRUCTOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_FOREGROUND","SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND","SYMBOL_ICON_EVENT_FOREGROUND","SYMBOL_ICON_FIELD_FOREGROUND","SYMBOL_ICON_FILE_FOREGROUND","SYMBOL_ICON_FOLDER_FOREGROUND","SYMBOL_ICON_FUNCTION_FOREGROUND","SYMBOL_ICON_INTERFACE_FOREGROUND","SYMBOL_ICON_KEY_FOREGROUND","SYMBOL_ICON_KEYWORD_FOREGROUND","SYMBOL_ICON_METHOD_FOREGROUND","SYMBOL_ICON_MODULE_FOREGROUND","SYMBOL_ICON_NAMESPACE_FOREGROUND","SYMBOL_ICON_NULL_FOREGROUND","SYMBOL_ICON_NUMBER_FOREGROUND","SYMBOL_ICON_OBJECT_FOREGROUND","SYMBOL_ICON_OPERATOR_FOREGROUND","SYMBOL_ICON_PACKAGE_FOREGROUND","SYMBOL_ICON_PROPERTY_FOREGROUND","SYMBOL_ICON_REFERENCE_FOREGROUND","SYMBOL_ICON_SNIPPET_FOREGROUND","SYMBOL_ICON_STRING_FOREGROUND","SYMBOL_ICON_STRUCT_FOREGROUND","SYMBOL_ICON_TEXT_FOREGROUND","SYMBOL_ICON_TYPEPARAMETER_FOREGROUND","SYMBOL_ICON_UNIT_FOREGROUND","SYMBOL_ICON_VARIABLE_FOREGROUND","registerThemingParticipant","collector","symbolIconArrayColor","addRule","symbolIconBooleanColor","symbolIconClassColor","symbolIconMethodColor","symbolIconColorColor","symbolIconConstantColor","symbolIconConstructorColor","symbolIconEnumeratorColor","symbolIconEnumeratorMemberColor","symbolIconEventColor","symbolIconFieldColor","symbolIconFileColor","symbolIconFolderColor","symbolIconFunctionColor","symbolIconInterfaceColor","symbolIconKeyColor","symbolIconKeywordColor","symbolIconModuleColor","outlineNamespaceColor","symbolIconNullColor","symbolIconNumberColor","symbolIconObjectColor","symbolIconOperatorColor","symbolIconPackageColor","symbolIconPropertyColor","symbolIconReferenceColor","symbolIconSnippetColor","symbolIconStringColor","symbolIconStructColor","symbolIconTextColor","symbolIconTypeParameterColor","symbolIconUnitColor","symbolIconVariableColor"],"sourceRoot":""}