{"version":3,"file":"static/js/monaco-editor-vendor.e8a66816.c73d2db6.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/commandsQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/editorNavigationQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoLineQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/readOnlyMessage/browser/contribution.js","../node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/renameInputField.js","../node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/rename.js","../node_modules/monaco-editor/esm/vs/editor/contrib/semanticTokens/browser/documentSemanticTokens.js","../node_modules/monaco-editor/esm/vs/editor/contrib/semanticTokens/browser/viewportSemanticTokens.js","../node_modules/monaco-editor/esm/vs/editor/contrib/semanticTokens/common/getSemanticTokens.js","../node_modules/monaco-editor/esm/vs/editor/contrib/semanticTokens/common/semanticTokensConfig.js","../node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/bracketSelections.js","../node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/smartSelect.js","../node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/wordSelections.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetController2.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetParser.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetVariables.js","../node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetSession.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { stripIcons } from '../../../../base/common/iconLabels.js';\nimport { AbstractCommandsQuickAccessProvider } from '../../../../platform/quickinput/browser/commandsQuickAccess.js';\nexport class AbstractEditorCommandsQuickAccessProvider extends AbstractCommandsQuickAccessProvider {\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n        super(options, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n    }\n    getCodeEditorCommandPicks() {\n        const activeTextEditorControl = this.activeTextEditorControl;\n        if (!activeTextEditorControl) {\n            return [];\n        }\n        const editorCommandPicks = [];\n        for (const editorAction of activeTextEditorControl.getSupportedActions()) {\n            editorCommandPicks.push({\n                commandId: editorAction.id,\n                commandAlias: editorAction.alias,\n                label: stripIcons(editorAction.label) || editorAction.id,\n            });\n        }\n        return editorCommandPicks;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createSingleCallFunction } from '../../../../base/common/functional.js';\nimport { DisposableStore, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { getCodeEditor, isDiffEditor } from '../../../browser/editorBrowser.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\n/**\n * A reusable quick access provider for the editor with support\n * for adding decorations for navigating in the currently active file\n * (for example \"Go to line\", \"Go to symbol\").\n */\nexport class AbstractEditorNavigationQuickAccessProvider {\n    constructor(options) {\n        this.options = options;\n        //#endregion\n        //#region Decorations Utils\n        this.rangeHighlightDecorationId = undefined;\n    }\n    //#region Provider methods\n    provide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // Apply options if any\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\n        // Disable filtering & sorting, we control the results\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n        // Provide based on current active editor\n        const pickerDisposable = disposables.add(new MutableDisposable());\n        pickerDisposable.value = this.doProvide(picker, token);\n        // Re-create whenever the active editor changes\n        disposables.add(this.onDidActiveTextEditorControlChange(() => {\n            // Clear old\n            pickerDisposable.value = undefined;\n            // Add new\n            pickerDisposable.value = this.doProvide(picker, token);\n        }));\n        return disposables;\n    }\n    doProvide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // With text control\n        const editor = this.activeTextEditorControl;\n        if (editor && this.canProvideWithTextEditor(editor)) {\n            const context = { editor };\n            // Restore any view state if this picker was closed\n            // without actually going to a line\n            const codeEditor = getCodeEditor(editor);\n            if (codeEditor) {\n                // Remember view state and update it when the cursor position\n                // changes even later because it could be that the user has\n                // configured quick access to remain open when focus is lost and\n                // we always want to restore the current location.\n                let lastKnownEditorViewState = (_a = editor.saveViewState()) !== null && _a !== void 0 ? _a : undefined;\n                disposables.add(codeEditor.onDidChangeCursorPosition(() => {\n                    var _a;\n                    lastKnownEditorViewState = (_a = editor.saveViewState()) !== null && _a !== void 0 ? _a : undefined;\n                }));\n                context.restoreViewState = () => {\n                    if (lastKnownEditorViewState && editor === this.activeTextEditorControl) {\n                        editor.restoreViewState(lastKnownEditorViewState);\n                    }\n                };\n                disposables.add(createSingleCallFunction(token.onCancellationRequested)(() => { var _a; return (_a = context.restoreViewState) === null || _a === void 0 ? void 0 : _a.call(context); }));\n            }\n            // Clean up decorations on dispose\n            disposables.add(toDisposable(() => this.clearDecorations(editor)));\n            // Ask subclass for entries\n            disposables.add(this.provideWithTextEditor(context, picker, token));\n        }\n        // Without text control\n        else {\n            disposables.add(this.provideWithoutTextEditor(picker, token));\n        }\n        return disposables;\n    }\n    /**\n     * Subclasses to implement if they can operate on the text editor.\n     */\n    canProvideWithTextEditor(editor) {\n        return true;\n    }\n    gotoLocation({ editor }, options) {\n        editor.setSelection(options.range);\n        editor.revealRangeInCenter(options.range, 0 /* ScrollType.Smooth */);\n        if (!options.preserveFocus) {\n            editor.focus();\n        }\n        const model = editor.getModel();\n        if (model && 'getLineContent' in model) {\n            status(`${model.getLineContent(options.range.startLineNumber)}`);\n        }\n    }\n    getModel(editor) {\n        var _a;\n        return isDiffEditor(editor) ?\n            (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.modified :\n            editor.getModel();\n    }\n    addDecorations(editor, range) {\n        editor.changeDecorations(changeAccessor => {\n            // Reset old decorations if any\n            const deleteDecorations = [];\n            if (this.rangeHighlightDecorationId) {\n                deleteDecorations.push(this.rangeHighlightDecorationId.overviewRulerDecorationId);\n                deleteDecorations.push(this.rangeHighlightDecorationId.rangeHighlightId);\n                this.rangeHighlightDecorationId = undefined;\n            }\n            // Add new decorations for the range\n            const newDecorations = [\n                // highlight the entire line on the range\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight',\n                        className: 'rangeHighlight',\n                        isWholeLine: true\n                    }\n                },\n                // also add overview ruler highlight\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight-overview',\n                        overviewRuler: {\n                            color: themeColorFromId(overviewRulerRangeHighlight),\n                            position: OverviewRulerLane.Full\n                        }\n                    }\n                }\n            ];\n            const [rangeHighlightId, overviewRulerDecorationId] = changeAccessor.deltaDecorations(deleteDecorations, newDecorations);\n            this.rangeHighlightDecorationId = { rangeHighlightId, overviewRulerDecorationId };\n        });\n    }\n    clearDecorations(editor) {\n        const rangeHighlightDecorationId = this.rangeHighlightDecorationId;\n        if (rangeHighlightDecorationId) {\n            editor.changeDecorations(changeAccessor => {\n                changeAccessor.deltaDecorations([\n                    rangeHighlightDecorationId.overviewRulerDecorationId,\n                    rangeHighlightDecorationId.rangeHighlightId\n                ], []);\n            });\n            this.rangeHighlightDecorationId = undefined;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { getCodeEditor } from '../../../browser/editorBrowser.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nexport class AbstractGotoLineQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor() {\n        super({ canAcceptInBackground: true });\n    }\n    provideWithoutTextEditor(picker) {\n        const label = localize('cannotRunGotoLine', \"Open a text editor first to go to a line.\");\n        picker.items = [{ label }];\n        picker.ariaLabel = label;\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto line once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item) {\n                if (!this.isValidLineNumber(editor, item.lineNumber)) {\n                    return;\n                }\n                this.gotoLocation(context, { range: this.toRange(item.lineNumber, item.column), keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // React to picker changes\n        const updatePickerAndEditor = () => {\n            const position = this.parsePosition(editor, picker.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length));\n            const label = this.getPickLabel(editor, position.lineNumber, position.column);\n            // Picker\n            picker.items = [{\n                    lineNumber: position.lineNumber,\n                    column: position.column,\n                    label\n                }];\n            // ARIA Label\n            picker.ariaLabel = label;\n            // Clear decorations for invalid range\n            if (!this.isValidLineNumber(editor, position.lineNumber)) {\n                this.clearDecorations(editor);\n                return;\n            }\n            // Reveal\n            const range = this.toRange(position.lineNumber, position.column);\n            editor.revealRangeInCenter(range, 0 /* ScrollType.Smooth */);\n            // Decorate\n            this.addDecorations(editor, range);\n        };\n        updatePickerAndEditor();\n        disposables.add(picker.onDidChangeValue(() => updatePickerAndEditor()));\n        // Adjust line number visibility as needed\n        const codeEditor = getCodeEditor(editor);\n        if (codeEditor) {\n            const options = codeEditor.getOptions();\n            const lineNumbers = options.get(67 /* EditorOption.lineNumbers */);\n            if (lineNumbers.renderType === 2 /* RenderLineNumbersType.Relative */) {\n                codeEditor.updateOptions({ lineNumbers: 'on' });\n                disposables.add(toDisposable(() => codeEditor.updateOptions({ lineNumbers: 'relative' })));\n            }\n        }\n        return disposables;\n    }\n    toRange(lineNumber = 1, column = 1) {\n        return {\n            startLineNumber: lineNumber,\n            startColumn: column,\n            endLineNumber: lineNumber,\n            endColumn: column\n        };\n    }\n    parsePosition(editor, value) {\n        // Support line-col formats of `line,col`, `line:col`, `line#col`\n        const numbers = value.split(/,|:|#/).map(part => parseInt(part, 10)).filter(part => !isNaN(part));\n        const endLine = this.lineCount(editor) + 1;\n        return {\n            lineNumber: numbers[0] > 0 ? numbers[0] : endLine + numbers[0],\n            column: numbers[1]\n        };\n    }\n    getPickLabel(editor, lineNumber, column) {\n        // Location valid: indicate this as picker label\n        if (this.isValidLineNumber(editor, lineNumber)) {\n            if (this.isValidColumn(editor, lineNumber, column)) {\n                return localize('gotoLineColumnLabel', \"Go to line {0} and character {1}.\", lineNumber, column);\n            }\n            return localize('gotoLineLabel', \"Go to line {0}.\", lineNumber);\n        }\n        // Location invalid: show generic label\n        const position = editor.getPosition() || { lineNumber: 1, column: 1 };\n        const lineCount = this.lineCount(editor);\n        if (lineCount > 1) {\n            return localize('gotoLineLabelEmptyWithLimit', \"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.\", position.lineNumber, position.column, lineCount);\n        }\n        return localize('gotoLineLabelEmpty', \"Current Line: {0}, Character: {1}. Type a line number to navigate to.\", position.lineNumber, position.column);\n    }\n    isValidLineNumber(editor, lineNumber) {\n        if (!lineNumber || typeof lineNumber !== 'number') {\n            return false;\n        }\n        return lineNumber > 0 && lineNumber <= this.lineCount(editor);\n    }\n    isValidColumn(editor, lineNumber, column) {\n        if (!column || typeof column !== 'number') {\n            return false;\n        }\n        const model = this.getModel(editor);\n        if (!model) {\n            return false;\n        }\n        const positionCandidate = { lineNumber, column };\n        return model.validatePosition(positionCandidate).equals(positionCandidate);\n    }\n    lineCount(editor) {\n        var _a, _b;\n        return (_b = (_a = this.getModel(editor)) === null || _a === void 0 ? void 0 : _a.getLineCount()) !== null && _b !== void 0 ? _b : 0;\n    }\n}\nAbstractGotoLineQuickAccessProvider.PREFIX = ':';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar AbstractGotoSymbolQuickAccessProvider_1;\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { pieceToQuery, prepareQuery, scoreFuzzy2 } from '../../../../base/common/fuzzyScorer.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { format, trim } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SymbolKinds, getAriaLabelForSymbol } from '../../../common/languages.js';\nimport { IOutlineModelService } from '../../documentSymbols/browser/outlineModel.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nlet AbstractGotoSymbolQuickAccessProvider = AbstractGotoSymbolQuickAccessProvider_1 = class AbstractGotoSymbolQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor(_languageFeaturesService, _outlineModelService, options = Object.create(null)) {\n        super(options);\n        this._languageFeaturesService = _languageFeaturesService;\n        this._outlineModelService = _outlineModelService;\n        this.options = options;\n        this.options.canAcceptInBackground = true;\n    }\n    provideWithoutTextEditor(picker) {\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutEditor', \"To go to a symbol, first open a text editor with symbol information.\"));\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const model = this.getModel(editor);\n        if (!model) {\n            return Disposable.None;\n        }\n        // Provide symbols from model if available in registry\n        if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n            return this.doProvideWithEditorSymbols(context, model, picker, token);\n        }\n        // Otherwise show an entry for a model without registry\n        // But give a chance to resolve the symbols at a later\n        // point if possible\n        return this.doProvideWithoutEditorSymbols(context, model, picker, token);\n    }\n    doProvideWithoutEditorSymbols(context, model, picker, token) {\n        const disposables = new DisposableStore();\n        // Generic pick for not having any symbol information\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutSymbolProvider', \"The active text editor does not provide symbol information.\"));\n        // Wait for changes to the registry and see if eventually\n        // we do get symbols. This can happen if the picker is opened\n        // very early after the model has loaded but before the\n        // language registry is ready.\n        // https://github.com/microsoft/vscode/issues/70607\n        (() => __awaiter(this, void 0, void 0, function* () {\n            const result = yield this.waitForLanguageSymbolRegistry(model, disposables);\n            if (!result || token.isCancellationRequested) {\n                return;\n            }\n            disposables.add(this.doProvideWithEditorSymbols(context, model, picker, token));\n        }))();\n        return disposables;\n    }\n    provideLabelPick(picker, label) {\n        picker.items = [{ label, index: 0, kind: 14 /* SymbolKind.String */ }];\n        picker.ariaLabel = label;\n    }\n    waitForLanguageSymbolRegistry(model, disposables) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                return true;\n            }\n            const symbolProviderRegistryPromise = new DeferredPromise();\n            // Resolve promise when registry knows model\n            const symbolProviderListener = disposables.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => {\n                if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                    symbolProviderListener.dispose();\n                    symbolProviderRegistryPromise.complete(true);\n                }\n            }));\n            // Resolve promise when we get disposed too\n            disposables.add(toDisposable(() => symbolProviderRegistryPromise.complete(false)));\n            return symbolProviderRegistryPromise.p;\n        });\n    }\n    doProvideWithEditorSymbols(context, model, picker, token) {\n        var _a;\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto symbol once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // Goto symbol side by side if enabled\n        disposables.add(picker.onDidTriggerItemButton(({ item }) => {\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, forceSideBySide: true });\n                picker.hide();\n            }\n        }));\n        // Resolve symbols from document once and reuse this\n        // request for all filtering and typing then on\n        const symbolsPromise = this.getDocumentSymbols(model, token);\n        // Set initial picks and update on type\n        let picksCts = undefined;\n        const updatePickerItems = (positionToEnclose) => __awaiter(this, void 0, void 0, function* () {\n            // Cancel any previous ask for picks and busy\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\n            picker.busy = false;\n            // Create new cancellation source for this run\n            picksCts = new CancellationTokenSource(token);\n            // Collect symbol picks\n            picker.busy = true;\n            try {\n                const query = prepareQuery(picker.value.substr(AbstractGotoSymbolQuickAccessProvider_1.PREFIX.length).trim());\n                const items = yield this.doGetSymbolPicks(symbolsPromise, query, undefined, picksCts.token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (items.length > 0) {\n                    picker.items = items;\n                    if (positionToEnclose && query.original.length === 0) {\n                        const candidate = findLast(items, item => Boolean(item.type !== 'separator' && item.range && Range.containsPosition(item.range.decoration, positionToEnclose)));\n                        if (candidate) {\n                            picker.activeItems = [candidate];\n                        }\n                    }\n                }\n                else {\n                    if (query.original.length > 0) {\n                        this.provideLabelPick(picker, localize('noMatchingSymbolResults', \"No matching editor symbols\"));\n                    }\n                    else {\n                        this.provideLabelPick(picker, localize('noSymbolResults', \"No editor symbols\"));\n                    }\n                }\n            }\n            finally {\n                if (!token.isCancellationRequested) {\n                    picker.busy = false;\n                }\n            }\n        });\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems(undefined)));\n        updatePickerItems((_a = editor.getSelection()) === null || _a === void 0 ? void 0 : _a.getPosition());\n        // Reveal and decorate when active item changes\n        disposables.add(picker.onDidChangeActive(() => {\n            const [item] = picker.activeItems;\n            if (item && item.range) {\n                // Reveal\n                editor.revealRangeInCenter(item.range.selection, 0 /* ScrollType.Smooth */);\n                // Decorate\n                this.addDecorations(editor, item.range.decoration);\n            }\n        }));\n        return disposables;\n    }\n    doGetSymbolPicks(symbolsPromise, query, options, token) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            const symbols = yield symbolsPromise;\n            if (token.isCancellationRequested) {\n                return [];\n            }\n            const filterBySymbolKind = query.original.indexOf(AbstractGotoSymbolQuickAccessProvider_1.SCOPE_PREFIX) === 0;\n            const filterPos = filterBySymbolKind ? 1 : 0;\n            // Split between symbol and container query\n            let symbolQuery;\n            let containerQuery;\n            if (query.values && query.values.length > 1) {\n                symbolQuery = pieceToQuery(query.values[0]); // symbol: only match on first part\n                containerQuery = pieceToQuery(query.values.slice(1)); // container: match on all but first parts\n            }\n            else {\n                symbolQuery = query;\n            }\n            // Convert to symbol picks and apply filtering\n            let buttons;\n            const openSideBySideDirection = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.openSideBySideDirection) === null || _b === void 0 ? void 0 : _b.call(_a);\n            if (openSideBySideDirection) {\n                buttons = [{\n                        iconClass: openSideBySideDirection === 'right' ? ThemeIcon.asClassName(Codicon.splitHorizontal) : ThemeIcon.asClassName(Codicon.splitVertical),\n                        tooltip: openSideBySideDirection === 'right' ? localize('openToSide', \"Open to the Side\") : localize('openToBottom', \"Open to the Bottom\")\n                    }];\n            }\n            const filteredSymbolPicks = [];\n            for (let index = 0; index < symbols.length; index++) {\n                const symbol = symbols[index];\n                const symbolLabel = trim(symbol.name);\n                const symbolLabelWithIcon = `$(${SymbolKinds.toIcon(symbol.kind).id}) ${symbolLabel}`;\n                const symbolLabelIconOffset = symbolLabelWithIcon.length - symbolLabel.length;\n                let containerLabel = symbol.containerName;\n                if (options === null || options === void 0 ? void 0 : options.extraContainerLabel) {\n                    if (containerLabel) {\n                        containerLabel = `${options.extraContainerLabel} • ${containerLabel}`;\n                    }\n                    else {\n                        containerLabel = options.extraContainerLabel;\n                    }\n                }\n                let symbolScore = undefined;\n                let symbolMatches = undefined;\n                let containerScore = undefined;\n                let containerMatches = undefined;\n                if (query.original.length > filterPos) {\n                    // First: try to score on the entire query, it is possible that\n                    // the symbol matches perfectly (e.g. searching for \"change log\"\n                    // can be a match on a markdown symbol \"change log\"). In that\n                    // case we want to skip the container query altogether.\n                    let skipContainerQuery = false;\n                    if (symbolQuery !== query) {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, Object.assign(Object.assign({}, query), { values: undefined /* disable multi-query support */ }), filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore === 'number') {\n                            skipContainerQuery = true; // since we consumed the query, skip any container matching\n                        }\n                    }\n                    // Otherwise: score on the symbol query and match on the container later\n                    if (typeof symbolScore !== 'number') {\n                        [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, symbolQuery, filterPos, symbolLabelIconOffset);\n                        if (typeof symbolScore !== 'number') {\n                            continue;\n                        }\n                    }\n                    // Score by container if specified\n                    if (!skipContainerQuery && containerQuery) {\n                        if (containerLabel && containerQuery.original.length > 0) {\n                            [containerScore, containerMatches] = scoreFuzzy2(containerLabel, containerQuery);\n                        }\n                        if (typeof containerScore !== 'number') {\n                            continue;\n                        }\n                        if (typeof symbolScore === 'number') {\n                            symbolScore += containerScore; // boost symbolScore by containerScore\n                        }\n                    }\n                }\n                const deprecated = symbol.tags && symbol.tags.indexOf(1 /* SymbolTag.Deprecated */) >= 0;\n                filteredSymbolPicks.push({\n                    index,\n                    kind: symbol.kind,\n                    score: symbolScore,\n                    label: symbolLabelWithIcon,\n                    ariaLabel: getAriaLabelForSymbol(symbol.name, symbol.kind),\n                    description: containerLabel,\n                    highlights: deprecated ? undefined : {\n                        label: symbolMatches,\n                        description: containerMatches\n                    },\n                    range: {\n                        selection: Range.collapseToStart(symbol.selectionRange),\n                        decoration: symbol.range\n                    },\n                    strikethrough: deprecated,\n                    buttons\n                });\n            }\n            // Sort by score\n            const sortedFilteredSymbolPicks = filteredSymbolPicks.sort((symbolA, symbolB) => filterBySymbolKind ?\n                this.compareByKindAndScore(symbolA, symbolB) :\n                this.compareByScore(symbolA, symbolB));\n            // Add separator for types\n            // - @  only total number of symbols\n            // - @: grouped by symbol kind\n            let symbolPicks = [];\n            if (filterBySymbolKind) {\n                let lastSymbolKind = undefined;\n                let lastSeparator = undefined;\n                let lastSymbolKindCounter = 0;\n                function updateLastSeparatorLabel() {\n                    if (lastSeparator && typeof lastSymbolKind === 'number' && lastSymbolKindCounter > 0) {\n                        lastSeparator.label = format(NLS_SYMBOL_KIND_CACHE[lastSymbolKind] || FALLBACK_NLS_SYMBOL_KIND, lastSymbolKindCounter);\n                    }\n                }\n                for (const symbolPick of sortedFilteredSymbolPicks) {\n                    // Found new kind\n                    if (lastSymbolKind !== symbolPick.kind) {\n                        // Update last separator with number of symbols we found for kind\n                        updateLastSeparatorLabel();\n                        lastSymbolKind = symbolPick.kind;\n                        lastSymbolKindCounter = 1;\n                        // Add new separator for new kind\n                        lastSeparator = { type: 'separator' };\n                        symbolPicks.push(lastSeparator);\n                    }\n                    // Existing kind, keep counting\n                    else {\n                        lastSymbolKindCounter++;\n                    }\n                    // Add to final result\n                    symbolPicks.push(symbolPick);\n                }\n                // Update last separator with number of symbols we found for kind\n                updateLastSeparatorLabel();\n            }\n            else if (sortedFilteredSymbolPicks.length > 0) {\n                symbolPicks = [\n                    { label: localize('symbols', \"symbols ({0})\", filteredSymbolPicks.length), type: 'separator' },\n                    ...sortedFilteredSymbolPicks\n                ];\n            }\n            return symbolPicks;\n        });\n    }\n    compareByScore(symbolA, symbolB) {\n        if (typeof symbolA.score !== 'number' && typeof symbolB.score === 'number') {\n            return 1;\n        }\n        else if (typeof symbolA.score === 'number' && typeof symbolB.score !== 'number') {\n            return -1;\n        }\n        if (typeof symbolA.score === 'number' && typeof symbolB.score === 'number') {\n            if (symbolA.score > symbolB.score) {\n                return -1;\n            }\n            else if (symbolA.score < symbolB.score) {\n                return 1;\n            }\n        }\n        if (symbolA.index < symbolB.index) {\n            return -1;\n        }\n        else if (symbolA.index > symbolB.index) {\n            return 1;\n        }\n        return 0;\n    }\n    compareByKindAndScore(symbolA, symbolB) {\n        const kindA = NLS_SYMBOL_KIND_CACHE[symbolA.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        const kindB = NLS_SYMBOL_KIND_CACHE[symbolB.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        // Sort by type first if scoped search\n        const result = kindA.localeCompare(kindB);\n        if (result === 0) {\n            return this.compareByScore(symbolA, symbolB);\n        }\n        return result;\n    }\n    getDocumentSymbols(document, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const model = yield this._outlineModelService.getOrCreate(document, token);\n            return token.isCancellationRequested ? [] : model.asListOfDocumentSymbols();\n        });\n    }\n};\nAbstractGotoSymbolQuickAccessProvider.PREFIX = '@';\nAbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX = ':';\nAbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY = `${AbstractGotoSymbolQuickAccessProvider_1.PREFIX}${AbstractGotoSymbolQuickAccessProvider_1.SCOPE_PREFIX}`;\nAbstractGotoSymbolQuickAccessProvider = AbstractGotoSymbolQuickAccessProvider_1 = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, IOutlineModelService)\n], AbstractGotoSymbolQuickAccessProvider);\nexport { AbstractGotoSymbolQuickAccessProvider };\n// #region NLS Helpers\nconst FALLBACK_NLS_SYMBOL_KIND = localize('property', \"properties ({0})\");\nconst NLS_SYMBOL_KIND_CACHE = {\n    [5 /* SymbolKind.Method */]: localize('method', \"methods ({0})\"),\n    [11 /* SymbolKind.Function */]: localize('function', \"functions ({0})\"),\n    [8 /* SymbolKind.Constructor */]: localize('_constructor', \"constructors ({0})\"),\n    [12 /* SymbolKind.Variable */]: localize('variable', \"variables ({0})\"),\n    [4 /* SymbolKind.Class */]: localize('class', \"classes ({0})\"),\n    [22 /* SymbolKind.Struct */]: localize('struct', \"structs ({0})\"),\n    [23 /* SymbolKind.Event */]: localize('event', \"events ({0})\"),\n    [24 /* SymbolKind.Operator */]: localize('operator', \"operators ({0})\"),\n    [10 /* SymbolKind.Interface */]: localize('interface', \"interfaces ({0})\"),\n    [2 /* SymbolKind.Namespace */]: localize('namespace', \"namespaces ({0})\"),\n    [3 /* SymbolKind.Package */]: localize('package', \"packages ({0})\"),\n    [25 /* SymbolKind.TypeParameter */]: localize('typeParameter', \"type parameters ({0})\"),\n    [1 /* SymbolKind.Module */]: localize('modules', \"modules ({0})\"),\n    [6 /* SymbolKind.Property */]: localize('property', \"properties ({0})\"),\n    [9 /* SymbolKind.Enum */]: localize('enum', \"enumerations ({0})\"),\n    [21 /* SymbolKind.EnumMember */]: localize('enumMember', \"enumeration members ({0})\"),\n    [14 /* SymbolKind.String */]: localize('string', \"strings ({0})\"),\n    [0 /* SymbolKind.File */]: localize('file', \"files ({0})\"),\n    [17 /* SymbolKind.Array */]: localize('array', \"arrays ({0})\"),\n    [15 /* SymbolKind.Number */]: localize('number', \"numbers ({0})\"),\n    [16 /* SymbolKind.Boolean */]: localize('boolean', \"booleans ({0})\"),\n    [18 /* SymbolKind.Object */]: localize('object', \"objects ({0})\"),\n    [19 /* SymbolKind.Key */]: localize('key', \"keys ({0})\"),\n    [7 /* SymbolKind.Field */]: localize('field', \"fields ({0})\"),\n    [13 /* SymbolKind.Constant */]: localize('constant', \"constants ({0})\")\n};\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nexport class ReadOnlyMessageController extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._register(this.editor.onDidAttemptReadOnlyEdit(() => this._onDidAttemptReadOnlyEdit()));\n    }\n    _onDidAttemptReadOnlyEdit() {\n        const messageController = MessageController.get(this.editor);\n        if (messageController && this.editor.hasModel()) {\n            let message = this.editor.getOptions().get(91 /* EditorOption.readOnlyMessage */);\n            if (!message) {\n                if (this.editor.isSimpleWidget) {\n                    message = new MarkdownString(nls.localize('editor.simple.readonly', \"Cannot edit in read-only input\"));\n                }\n                else {\n                    message = new MarkdownString(nls.localize('editor.readonly', \"Cannot edit in read-only editor\"));\n                }\n            }\n            messageController.showMessage(message, this.editor.getPosition());\n        }\n    }\n}\nReadOnlyMessageController.ID = 'editor.contrib.readOnlyMessageController';\nregisterEditorContribution(ReadOnlyMessageController.ID, ReadOnlyMessageController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './renameInputField.css';\nimport { Position } from '../../../common/core/position.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nlet RenameInputField = class RenameInputField {\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService) {\n        this._editor = _editor;\n        this._acceptKeybindings = _acceptKeybindings;\n        this._themeService = _themeService;\n        this._keybindingService = _keybindingService;\n        this._disposables = new DisposableStore();\n        this.allowEditorOverflow = true;\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._editor.addContentWidget(this);\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return '__renameInputWidget';\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'monaco-editor rename-box';\n            this._input = document.createElement('input');\n            this._input.className = 'rename-input';\n            this._input.type = 'text';\n            this._input.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n            this._domNode.appendChild(this._input);\n            this._label = document.createElement('div');\n            this._label.className = 'rename-label';\n            this._domNode.appendChild(this._label);\n            this._updateFont();\n            this._updateStyles(this._themeService.getColorTheme());\n        }\n        return this._domNode;\n    }\n    _updateStyles(theme) {\n        var _a, _b, _c, _d;\n        if (!this._input || !this._domNode) {\n            return;\n        }\n        const widgetShadowColor = theme.getColor(widgetShadow);\n        const widgetBorderColor = theme.getColor(widgetBorder);\n        this._domNode.style.backgroundColor = String((_a = theme.getColor(editorWidgetBackground)) !== null && _a !== void 0 ? _a : '');\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n        this._domNode.style.border = widgetBorderColor ? `1px solid ${widgetBorderColor}` : '';\n        this._domNode.style.color = String((_b = theme.getColor(inputForeground)) !== null && _b !== void 0 ? _b : '');\n        this._input.style.backgroundColor = String((_c = theme.getColor(inputBackground)) !== null && _c !== void 0 ? _c : '');\n        // this._input.style.color = String(theme.getColor(inputForeground) ?? '');\n        const border = theme.getColor(inputBorder);\n        this._input.style.borderWidth = border ? '1px' : '0px';\n        this._input.style.borderStyle = border ? 'solid' : 'none';\n        this._input.style.borderColor = (_d = border === null || border === void 0 ? void 0 : border.toString()) !== null && _d !== void 0 ? _d : 'none';\n    }\n    _updateFont() {\n        if (!this._input || !this._label) {\n            return;\n        }\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n        this._input.style.fontFamily = fontInfo.fontFamily;\n        this._input.style.fontWeight = fontInfo.fontWeight;\n        this._input.style.fontSize = `${fontInfo.fontSize}px`;\n        this._label.style.fontSize = `${fontInfo.fontSize * 0.8}px`;\n    }\n    getPosition() {\n        if (!this._visible) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n        };\n    }\n    beforeRender() {\n        var _a, _b;\n        const [accept, preview] = this._acceptKeybindings;\n        this._label.innerText = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", (_a = this._keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this._keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n        return null;\n    }\n    afterRender(position) {\n        if (!position) {\n            // cancel rename when input widget isn't rendered anymore\n            this.cancelInput(true);\n        }\n    }\n    acceptInput(wantsPreview) {\n        var _a;\n        (_a = this._currentAcceptInput) === null || _a === void 0 ? void 0 : _a.call(this, wantsPreview);\n    }\n    cancelInput(focusEditor) {\n        var _a;\n        (_a = this._currentCancelInput) === null || _a === void 0 ? void 0 : _a.call(this, focusEditor);\n    }\n    getInput(where, value, selectionStart, selectionEnd, supportPreview, token) {\n        this._domNode.classList.toggle('preview', supportPreview);\n        this._position = new Position(where.startLineNumber, where.startColumn);\n        this._input.value = value;\n        this._input.setAttribute('selectionStart', selectionStart.toString());\n        this._input.setAttribute('selectionEnd', selectionEnd.toString());\n        this._input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20);\n        const disposeOnDone = new DisposableStore();\n        return new Promise(resolve => {\n            this._currentCancelInput = (focusEditor) => {\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve(focusEditor);\n                return true;\n            };\n            this._currentAcceptInput = (wantsPreview) => {\n                if (this._input.value.trim().length === 0 || this._input.value === value) {\n                    // empty or whitespace only or not changed\n                    this.cancelInput(true);\n                    return;\n                }\n                this._currentAcceptInput = undefined;\n                this._currentCancelInput = undefined;\n                resolve({\n                    newName: this._input.value,\n                    wantsPreview: supportPreview && wantsPreview\n                });\n            };\n            disposeOnDone.add(token.onCancellationRequested(() => this.cancelInput(true)));\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => { var _a; return this.cancelInput(!((_a = this._domNode) === null || _a === void 0 ? void 0 : _a.ownerDocument.hasFocus())); }));\n            this._show();\n        }).finally(() => {\n            disposeOnDone.dispose();\n            this._hide();\n        });\n    }\n    _show() {\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\n        this._visible = true;\n        this._visibleContextKey.set(true);\n        this._editor.layoutContentWidget(this);\n        setTimeout(() => {\n            this._input.focus();\n            this._input.setSelectionRange(parseInt(this._input.getAttribute('selectionStart')), parseInt(this._input.getAttribute('selectionEnd')));\n        }, 100);\n    }\n    _hide() {\n        this._visible = false;\n        this._visibleContextKey.reset();\n        this._editor.layoutContentWidget(this);\n    }\n};\nRenameInputField = __decorate([\n    __param(2, IThemeService),\n    __param(3, IKeybindingService),\n    __param(4, IContextKeyService)\n], RenameInputField);\nexport { RenameInputField };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar RenameController_1;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ITextResourceConfigurationService } from '../../../common/services/textResourceConfiguration.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameInputField } from './renameInputField.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nclass RenameSkeleton {\n    constructor(model, position, registry) {\n        this.model = model;\n        this.position = position;\n        this._providerRenameIdx = 0;\n        this._providers = registry.ordered(model);\n    }\n    hasProvider() {\n        return this._providers.length > 0;\n    }\n    resolveRenameLocation(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const rejects = [];\n            for (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n                const provider = this._providers[this._providerRenameIdx];\n                if (!provider.resolveRenameLocation) {\n                    break;\n                }\n                const res = yield provider.resolveRenameLocation(this.model, this.position, token);\n                if (!res) {\n                    continue;\n                }\n                if (res.rejectReason) {\n                    rejects.push(res.rejectReason);\n                    continue;\n                }\n                return res;\n            }\n            const word = this.model.getWordAtPosition(this.position);\n            if (!word) {\n                return {\n                    range: Range.fromPositions(this.position),\n                    text: '',\n                    rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n                };\n            }\n            return {\n                range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n                text: word.word,\n                rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n            };\n        });\n    }\n    provideRenameEdits(newName, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n        });\n    }\n    _provideRenameEdits(newName, i, rejects, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const provider = this._providers[i];\n            if (!provider) {\n                return {\n                    edits: [],\n                    rejectReason: rejects.join('\\n')\n                };\n            }\n            const result = yield provider.provideRenameEdits(this.model, this.position, newName, token);\n            if (!result) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n            }\n            else if (result.rejectReason) {\n                return this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n            }\n            return result;\n        });\n    }\n}\nexport function rename(registry, model, position, newName) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const skeleton = new RenameSkeleton(model, position, registry);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            return { edits: [], rejectReason: loc.rejectReason };\n        }\n        return skeleton.provideRenameEdits(newName, CancellationToken.None);\n    });\n}\n// ---  register actions and commands\nlet RenameController = RenameController_1 = class RenameController {\n    static get(editor) {\n        return editor.getContribution(RenameController_1.ID);\n    }\n    constructor(editor, _instaService, _notificationService, _bulkEditService, _progressService, _logService, _configService, _languageFeaturesService) {\n        this.editor = editor;\n        this._instaService = _instaService;\n        this._notificationService = _notificationService;\n        this._bulkEditService = _bulkEditService;\n        this._progressService = _progressService;\n        this._logService = _logService;\n        this._configService = _configService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._disposableStore = new DisposableStore();\n        this._cts = new CancellationTokenSource();\n        this._renameInputField = this._disposableStore.add(this._instaService.createInstance(RenameInputField, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']));\n    }\n    dispose() {\n        this._disposableStore.dispose();\n        this._cts.dispose(true);\n    }\n    run() {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            // set up cancellation token to prevent reentrant rename, this\n            // is the parent to the resolve- and rename-tokens\n            this._cts.dispose(true);\n            this._cts = new CancellationTokenSource();\n            if (!this.editor.hasModel()) {\n                return undefined;\n            }\n            const position = this.editor.getPosition();\n            const skeleton = new RenameSkeleton(this.editor.getModel(), position, this._languageFeaturesService.renameProvider);\n            if (!skeleton.hasProvider()) {\n                return undefined;\n            }\n            // part 1 - resolve rename location\n            const cts1 = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, undefined, this._cts.token);\n            let loc;\n            try {\n                const resolveLocationOperation = skeleton.resolveRenameLocation(cts1.token);\n                this._progressService.showWhile(resolveLocationOperation, 250);\n                loc = yield resolveLocationOperation;\n            }\n            catch (e) {\n                (_a = MessageController.get(this.editor)) === null || _a === void 0 ? void 0 : _a.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n                return undefined;\n            }\n            finally {\n                cts1.dispose();\n            }\n            if (!loc) {\n                return undefined;\n            }\n            if (loc.rejectReason) {\n                (_b = MessageController.get(this.editor)) === null || _b === void 0 ? void 0 : _b.showMessage(loc.rejectReason, position);\n                return undefined;\n            }\n            if (cts1.token.isCancellationRequested) {\n                return undefined;\n            }\n            // part 2 - do rename at location\n            const cts2 = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, loc.range, this._cts.token);\n            const selection = this.editor.getSelection();\n            let selectionStart = 0;\n            let selectionEnd = loc.text.length;\n            if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(loc.range, selection)) {\n                selectionStart = Math.max(0, selection.startColumn - loc.range.startColumn);\n                selectionEnd = Math.min(loc.range.endColumn, selection.endColumn) - loc.range.startColumn;\n            }\n            const supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue(this.editor.getModel().uri, 'editor.rename.enablePreview');\n            const inputFieldResult = yield this._renameInputField.getInput(loc.range, loc.text, selectionStart, selectionEnd, supportPreview, cts2.token);\n            // no result, only hint to focus the editor or not\n            if (typeof inputFieldResult === 'boolean') {\n                if (inputFieldResult) {\n                    this.editor.focus();\n                }\n                cts2.dispose();\n                return undefined;\n            }\n            this.editor.focus();\n            const renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, cts2.token), cts2.token).then((renameResult) => __awaiter(this, void 0, void 0, function* () {\n                if (!renameResult || !this.editor.hasModel()) {\n                    return;\n                }\n                if (renameResult.rejectReason) {\n                    this._notificationService.info(renameResult.rejectReason);\n                    return;\n                }\n                // collapse selection to active end\n                this.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\n                this._bulkEditService.apply(renameResult, {\n                    editor: this.editor,\n                    showPreview: inputFieldResult.wantsPreview,\n                    label: nls.localize('label', \"Renaming '{0}' to '{1}'\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                    code: 'undoredo.rename',\n                    quotableLabel: nls.localize('quotableLabel', \"Renaming {0} to {1}\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                    respectAutoSaveConfig: true\n                }).then(result => {\n                    if (result.ariaSummary) {\n                        alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, inputFieldResult.newName, result.ariaSummary));\n                    }\n                }).catch(err => {\n                    this._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n                    this._logService.error(err);\n                });\n            }), err => {\n                this._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n                this._logService.error(err);\n            }).finally(() => {\n                cts2.dispose();\n            });\n            this._progressService.showWhile(renameOperation, 250);\n            return renameOperation;\n        });\n    }\n    acceptRenameInput(wantsPreview) {\n        this._renameInputField.acceptInput(wantsPreview);\n    }\n    cancelRenameInput() {\n        this._renameInputField.cancelInput(true);\n    }\n};\nRenameController.ID = 'editor.contrib.renameController';\nRenameController = RenameController_1 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, INotificationService),\n    __param(3, IBulkEditService),\n    __param(4, IEditorProgressService),\n    __param(5, ILogService),\n    __param(6, ITextResourceConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], RenameController);\n// ---- action implementation\nexport class RenameAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.rename',\n            label: nls.localize('rename.label', \"Rename Symbol\"),\n            alias: 'Rename Symbol',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.1\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(accessor, editor) {\n        const controller = RenameController.get(editor);\n        if (controller) {\n            return controller.run();\n        }\n        return Promise.resolve();\n    }\n}\nregisterEditorContribution(RenameController.ID, RenameController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(RenameAction);\nconst RenameCommand = EditorCommand.bindToContribution(RenameController.get);\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.acceptRenameInput(false),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInputWithPreview',\n    precondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n    handler: x => x.acceptRenameInput(true),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 1024 /* KeyMod.Shift */ + 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'cancelRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.cancelRenameInput(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n// ---- api bridge command\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (accessor, model, position, ...args) {\n    const [newName] = args;\n    assertType(typeof newName === 'string');\n    const { renameProvider } = accessor.get(ILanguageFeaturesService);\n    return rename(renameProvider, model, position, newName);\n});\nregisterModelAndPositionCommand('_executePrepareRename', function (accessor, model, position) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const { renameProvider } = accessor.get(ILanguageFeaturesService);\n        const skeleton = new RenameSkeleton(model, position, renameProvider);\n        const loc = yield skeleton.resolveRenameLocation(CancellationToken.None);\n        if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n            throw new Error(loc.rejectReason);\n        }\n        return loc;\n    });\n});\n//todo@jrieken use editor options world\nRegistry.as(Extensions.Configuration).registerConfiguration({\n    id: 'editor',\n    properties: {\n        'editor.rename.enablePreview': {\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n            default: true,\n            type: 'boolean'\n        }\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ModelSemanticColoring_1;\nimport { Disposable, dispose } from '../../../../base/common/lifecycle.js';\nimport * as errors from '../../../../base/common/errors.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { getDocumentSemanticTokens, hasDocumentSemanticTokensProvider, isSemanticTokens, isSemanticTokensEdits } from '../common/getSemanticTokens.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ISemanticTokensStylingService } from '../../../common/services/semanticTokensStyling.js';\nimport { registerEditorFeature } from '../../../common/editorFeatures.js';\nimport { SEMANTIC_HIGHLIGHTING_SETTING_ID, isSemanticColoringEnabled } from '../common/semanticTokensConfig.js';\nlet DocumentSemanticTokensFeature = class DocumentSemanticTokensFeature extends Disposable {\n    constructor(semanticTokensStylingService, modelService, themeService, configurationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._watchers = Object.create(null);\n        const register = (model) => {\n            this._watchers[model.uri.toString()] = new ModelSemanticColoring(model, semanticTokensStylingService, themeService, languageFeatureDebounceService, languageFeaturesService);\n        };\n        const deregister = (model, modelSemanticColoring) => {\n            modelSemanticColoring.dispose();\n            delete this._watchers[model.uri.toString()];\n        };\n        const handleSettingOrThemeChange = () => {\n            for (const model of modelService.getModels()) {\n                const curr = this._watchers[model.uri.toString()];\n                if (isSemanticColoringEnabled(model, themeService, configurationService)) {\n                    if (!curr) {\n                        register(model);\n                    }\n                }\n                else {\n                    if (curr) {\n                        deregister(model, curr);\n                    }\n                }\n            }\n        };\n        this._register(modelService.onModelAdded((model) => {\n            if (isSemanticColoringEnabled(model, themeService, configurationService)) {\n                register(model);\n            }\n        }));\n        this._register(modelService.onModelRemoved((model) => {\n            const curr = this._watchers[model.uri.toString()];\n            if (curr) {\n                deregister(model, curr);\n            }\n        }));\n        this._register(configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n                handleSettingOrThemeChange();\n            }\n        }));\n        this._register(themeService.onDidColorThemeChange(handleSettingOrThemeChange));\n    }\n    dispose() {\n        // Dispose all watchers\n        for (const watcher of Object.values(this._watchers)) {\n            watcher.dispose();\n        }\n        super.dispose();\n    }\n};\nDocumentSemanticTokensFeature = __decorate([\n    __param(0, ISemanticTokensStylingService),\n    __param(1, IModelService),\n    __param(2, IThemeService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], DocumentSemanticTokensFeature);\nexport { DocumentSemanticTokensFeature };\nlet ModelSemanticColoring = ModelSemanticColoring_1 = class ModelSemanticColoring extends Disposable {\n    constructor(model, _semanticTokensStylingService, themeService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._semanticTokensStylingService = _semanticTokensStylingService;\n        this._isDisposed = false;\n        this._model = model;\n        this._provider = languageFeaturesService.documentSemanticTokensProvider;\n        this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentSemanticTokens', { min: ModelSemanticColoring_1.REQUEST_MIN_DELAY, max: ModelSemanticColoring_1.REQUEST_MAX_DELAY });\n        this._fetchDocumentSemanticTokens = this._register(new RunOnceScheduler(() => this._fetchDocumentSemanticTokensNow(), ModelSemanticColoring_1.REQUEST_MIN_DELAY));\n        this._currentDocumentResponse = null;\n        this._currentDocumentRequestCancellationTokenSource = null;\n        this._documentProvidersChangeListeners = [];\n        this._providersChangedDuringRequest = false;\n        this._register(this._model.onDidChangeContent(() => {\n            if (!this._fetchDocumentSemanticTokens.isScheduled()) {\n                this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n            }\n        }));\n        this._register(this._model.onDidChangeAttached(() => {\n            if (!this._fetchDocumentSemanticTokens.isScheduled()) {\n                this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n            }\n        }));\n        this._register(this._model.onDidChangeLanguage(() => {\n            // clear any outstanding state\n            if (this._currentDocumentResponse) {\n                this._currentDocumentResponse.dispose();\n                this._currentDocumentResponse = null;\n            }\n            if (this._currentDocumentRequestCancellationTokenSource) {\n                this._currentDocumentRequestCancellationTokenSource.cancel();\n                this._currentDocumentRequestCancellationTokenSource = null;\n            }\n            this._setDocumentSemanticTokens(null, null, null, []);\n            this._fetchDocumentSemanticTokens.schedule(0);\n        }));\n        const bindDocumentChangeListeners = () => {\n            dispose(this._documentProvidersChangeListeners);\n            this._documentProvidersChangeListeners = [];\n            for (const provider of this._provider.all(model)) {\n                if (typeof provider.onDidChange === 'function') {\n                    this._documentProvidersChangeListeners.push(provider.onDidChange(() => {\n                        if (this._currentDocumentRequestCancellationTokenSource) {\n                            // there is already a request running,\n                            this._providersChangedDuringRequest = true;\n                            return;\n                        }\n                        this._fetchDocumentSemanticTokens.schedule(0);\n                    }));\n                }\n            }\n        };\n        bindDocumentChangeListeners();\n        this._register(this._provider.onDidChange(() => {\n            bindDocumentChangeListeners();\n            this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n        }));\n        this._register(themeService.onDidColorThemeChange(_ => {\n            // clear out existing tokens\n            this._setDocumentSemanticTokens(null, null, null, []);\n            this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n        }));\n        this._fetchDocumentSemanticTokens.schedule(0);\n    }\n    dispose() {\n        if (this._currentDocumentResponse) {\n            this._currentDocumentResponse.dispose();\n            this._currentDocumentResponse = null;\n        }\n        if (this._currentDocumentRequestCancellationTokenSource) {\n            this._currentDocumentRequestCancellationTokenSource.cancel();\n            this._currentDocumentRequestCancellationTokenSource = null;\n        }\n        dispose(this._documentProvidersChangeListeners);\n        this._documentProvidersChangeListeners = [];\n        this._setDocumentSemanticTokens(null, null, null, []);\n        this._isDisposed = true;\n        super.dispose();\n    }\n    _fetchDocumentSemanticTokensNow() {\n        if (this._currentDocumentRequestCancellationTokenSource) {\n            // there is already a request running, let it finish...\n            return;\n        }\n        if (!hasDocumentSemanticTokensProvider(this._provider, this._model)) {\n            // there is no provider\n            if (this._currentDocumentResponse) {\n                // there are semantic tokens set\n                this._model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        if (!this._model.isAttachedToEditor()) {\n            // this document is not visible, there is no need to fetch semantic tokens for it\n            return;\n        }\n        const cancellationTokenSource = new CancellationTokenSource();\n        const lastProvider = this._currentDocumentResponse ? this._currentDocumentResponse.provider : null;\n        const lastResultId = this._currentDocumentResponse ? this._currentDocumentResponse.resultId || null : null;\n        const request = getDocumentSemanticTokens(this._provider, this._model, lastProvider, lastResultId, cancellationTokenSource.token);\n        this._currentDocumentRequestCancellationTokenSource = cancellationTokenSource;\n        this._providersChangedDuringRequest = false;\n        const pendingChanges = [];\n        const contentChangeListener = this._model.onDidChangeContent((e) => {\n            pendingChanges.push(e);\n        });\n        const sw = new StopWatch(false);\n        request.then((res) => {\n            this._debounceInformation.update(this._model, sw.elapsed());\n            this._currentDocumentRequestCancellationTokenSource = null;\n            contentChangeListener.dispose();\n            if (!res) {\n                this._setDocumentSemanticTokens(null, null, null, pendingChanges);\n            }\n            else {\n                const { provider, tokens } = res;\n                const styling = this._semanticTokensStylingService.getStyling(provider);\n                this._setDocumentSemanticTokens(provider, tokens || null, styling, pendingChanges);\n            }\n        }, (err) => {\n            const isExpectedError = err && (errors.isCancellationError(err) || (typeof err.message === 'string' && err.message.indexOf('busy') !== -1));\n            if (!isExpectedError) {\n                errors.onUnexpectedError(err);\n            }\n            // Semantic tokens eats up all errors and considers errors to mean that the result is temporarily not available\n            // The API does not have a special error kind to express this...\n            this._currentDocumentRequestCancellationTokenSource = null;\n            contentChangeListener.dispose();\n            if (pendingChanges.length > 0 || this._providersChangedDuringRequest) {\n                // More changes occurred while the request was running\n                if (!this._fetchDocumentSemanticTokens.isScheduled()) {\n                    this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n                }\n            }\n        });\n    }\n    static _copy(src, srcOffset, dest, destOffset, length) {\n        // protect against overflows\n        length = Math.min(length, dest.length - destOffset, src.length - srcOffset);\n        for (let i = 0; i < length; i++) {\n            dest[destOffset + i] = src[srcOffset + i];\n        }\n    }\n    _setDocumentSemanticTokens(provider, tokens, styling, pendingChanges) {\n        const currentResponse = this._currentDocumentResponse;\n        const rescheduleIfNeeded = () => {\n            if ((pendingChanges.length > 0 || this._providersChangedDuringRequest) && !this._fetchDocumentSemanticTokens.isScheduled()) {\n                this._fetchDocumentSemanticTokens.schedule(this._debounceInformation.get(this._model));\n            }\n        };\n        if (this._currentDocumentResponse) {\n            this._currentDocumentResponse.dispose();\n            this._currentDocumentResponse = null;\n        }\n        if (this._isDisposed) {\n            // disposed!\n            if (provider && tokens) {\n                provider.releaseDocumentSemanticTokens(tokens.resultId);\n            }\n            return;\n        }\n        if (!provider || !styling) {\n            this._model.tokenization.setSemanticTokens(null, false);\n            return;\n        }\n        if (!tokens) {\n            this._model.tokenization.setSemanticTokens(null, true);\n            rescheduleIfNeeded();\n            return;\n        }\n        if (isSemanticTokensEdits(tokens)) {\n            if (!currentResponse) {\n                // not possible!\n                this._model.tokenization.setSemanticTokens(null, true);\n                return;\n            }\n            if (tokens.edits.length === 0) {\n                // nothing to do!\n                tokens = {\n                    resultId: tokens.resultId,\n                    data: currentResponse.data\n                };\n            }\n            else {\n                let deltaLength = 0;\n                for (const edit of tokens.edits) {\n                    deltaLength += (edit.data ? edit.data.length : 0) - edit.deleteCount;\n                }\n                const srcData = currentResponse.data;\n                const destData = new Uint32Array(srcData.length + deltaLength);\n                let srcLastStart = srcData.length;\n                let destLastStart = destData.length;\n                for (let i = tokens.edits.length - 1; i >= 0; i--) {\n                    const edit = tokens.edits[i];\n                    if (edit.start > srcData.length) {\n                        styling.warnInvalidEditStart(currentResponse.resultId, tokens.resultId, i, edit.start, srcData.length);\n                        // The edits are invalid and there's no way to recover\n                        this._model.tokenization.setSemanticTokens(null, true);\n                        return;\n                    }\n                    const copyCount = srcLastStart - (edit.start + edit.deleteCount);\n                    if (copyCount > 0) {\n                        ModelSemanticColoring_1._copy(srcData, srcLastStart - copyCount, destData, destLastStart - copyCount, copyCount);\n                        destLastStart -= copyCount;\n                    }\n                    if (edit.data) {\n                        ModelSemanticColoring_1._copy(edit.data, 0, destData, destLastStart - edit.data.length, edit.data.length);\n                        destLastStart -= edit.data.length;\n                    }\n                    srcLastStart = edit.start;\n                }\n                if (srcLastStart > 0) {\n                    ModelSemanticColoring_1._copy(srcData, 0, destData, 0, srcLastStart);\n                }\n                tokens = {\n                    resultId: tokens.resultId,\n                    data: destData\n                };\n            }\n        }\n        if (isSemanticTokens(tokens)) {\n            this._currentDocumentResponse = new SemanticTokensResponse(provider, tokens.resultId, tokens.data);\n            const result = toMultilineTokens2(tokens, styling, this._model.getLanguageId());\n            // Adjust incoming semantic tokens\n            if (pendingChanges.length > 0) {\n                // More changes occurred while the request was running\n                // We need to:\n                // 1. Adjust incoming semantic tokens\n                // 2. Request them again\n                for (const change of pendingChanges) {\n                    for (const area of result) {\n                        for (const singleChange of change.changes) {\n                            area.applyEdit(singleChange.range, singleChange.text);\n                        }\n                    }\n                }\n            }\n            this._model.tokenization.setSemanticTokens(result, true);\n        }\n        else {\n            this._model.tokenization.setSemanticTokens(null, true);\n        }\n        rescheduleIfNeeded();\n    }\n};\nModelSemanticColoring.REQUEST_MIN_DELAY = 300;\nModelSemanticColoring.REQUEST_MAX_DELAY = 2000;\nModelSemanticColoring = ModelSemanticColoring_1 = __decorate([\n    __param(1, ISemanticTokensStylingService),\n    __param(2, IThemeService),\n    __param(3, ILanguageFeatureDebounceService),\n    __param(4, ILanguageFeaturesService)\n], ModelSemanticColoring);\nclass SemanticTokensResponse {\n    constructor(provider, resultId, data) {\n        this.provider = provider;\n        this.resultId = resultId;\n        this.data = data;\n    }\n    dispose() {\n        this.provider.releaseDocumentSemanticTokens(this.resultId);\n    }\n}\nregisterEditorFeature(DocumentSemanticTokensFeature);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { createCancelablePromise, RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { getDocumentRangeSemanticTokens, hasDocumentRangeSemanticTokensProvider } from '../common/getSemanticTokens.js';\nimport { isSemanticColoringEnabled, SEMANTIC_HIGHLIGHTING_SETTING_ID } from '../common/semanticTokensConfig.js';\nimport { toMultilineTokens2 } from '../../../common/services/semanticTokensProviderStyling.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ISemanticTokensStylingService } from '../../../common/services/semanticTokensStyling.js';\nlet ViewportSemanticTokensContribution = class ViewportSemanticTokensContribution extends Disposable {\n    constructor(editor, _semanticTokensStylingService, _themeService, _configurationService, languageFeatureDebounceService, languageFeaturesService) {\n        super();\n        this._semanticTokensStylingService = _semanticTokensStylingService;\n        this._themeService = _themeService;\n        this._configurationService = _configurationService;\n        this._editor = editor;\n        this._provider = languageFeaturesService.documentRangeSemanticTokensProvider;\n        this._debounceInformation = languageFeatureDebounceService.for(this._provider, 'DocumentRangeSemanticTokens', { min: 100, max: 500 });\n        this._tokenizeViewport = this._register(new RunOnceScheduler(() => this._tokenizeViewportNow(), 100));\n        this._outstandingRequests = [];\n        const scheduleTokenizeViewport = () => {\n            if (this._editor.hasModel()) {\n                this._tokenizeViewport.schedule(this._debounceInformation.get(this._editor.getModel()));\n            }\n        };\n        this._register(this._editor.onDidScrollChange(() => {\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._provider.onDidChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        this._register(this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration(SEMANTIC_HIGHLIGHTING_SETTING_ID)) {\n                this._cancelAll();\n                scheduleTokenizeViewport();\n            }\n        }));\n        this._register(this._themeService.onDidColorThemeChange(() => {\n            this._cancelAll();\n            scheduleTokenizeViewport();\n        }));\n        scheduleTokenizeViewport();\n    }\n    _cancelAll() {\n        for (const request of this._outstandingRequests) {\n            request.cancel();\n        }\n        this._outstandingRequests = [];\n    }\n    _removeOutstandingRequest(req) {\n        for (let i = 0, len = this._outstandingRequests.length; i < len; i++) {\n            if (this._outstandingRequests[i] === req) {\n                this._outstandingRequests.splice(i, 1);\n                return;\n            }\n        }\n    }\n    _tokenizeViewportNow() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        if (model.tokenization.hasCompleteSemanticTokens()) {\n            return;\n        }\n        if (!isSemanticColoringEnabled(model, this._themeService, this._configurationService)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        if (!hasDocumentRangeSemanticTokensProvider(this._provider, model)) {\n            if (model.tokenization.hasSomeSemanticTokens()) {\n                model.tokenization.setSemanticTokens(null, false);\n            }\n            return;\n        }\n        const visibleRanges = this._editor.getVisibleRangesPlusViewportAboveBelow();\n        this._outstandingRequests = this._outstandingRequests.concat(visibleRanges.map(range => this._requestRange(model, range)));\n    }\n    _requestRange(model, range) {\n        const requestVersionId = model.getVersionId();\n        const request = createCancelablePromise(token => Promise.resolve(getDocumentRangeSemanticTokens(this._provider, model, range, token)));\n        const sw = new StopWatch(false);\n        request.then((r) => {\n            this._debounceInformation.update(model, sw.elapsed());\n            if (!r || !r.tokens || model.isDisposed() || model.getVersionId() !== requestVersionId) {\n                return;\n            }\n            const { provider, tokens: result } = r;\n            const styling = this._semanticTokensStylingService.getStyling(provider);\n            model.tokenization.setPartialSemanticTokens(range, toMultilineTokens2(result, styling, model.getLanguageId()));\n        }).then(() => this._removeOutstandingRequest(request), () => this._removeOutstandingRequest(request));\n        return request;\n    }\n};\nViewportSemanticTokensContribution.ID = 'editor.contrib.viewportSemanticTokens';\nViewportSemanticTokensContribution = __decorate([\n    __param(1, ISemanticTokensStylingService),\n    __param(2, IThemeService),\n    __param(3, IConfigurationService),\n    __param(4, ILanguageFeatureDebounceService),\n    __param(5, ILanguageFeaturesService)\n], ViewportSemanticTokensContribution);\nexport { ViewportSemanticTokensContribution };\nregisterEditorContribution(ViewportSemanticTokensContribution.ID, ViewportSemanticTokensContribution, 1 /* EditorContributionInstantiation.AfterFirstRender */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { encodeSemanticTokensDto } from '../../../common/services/semanticTokensDto.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport function isSemanticTokens(v) {\n    return v && !!(v.data);\n}\nexport function isSemanticTokensEdits(v) {\n    return v && Array.isArray(v.edits);\n}\nexport class DocumentSemanticTokensResult {\n    constructor(provider, tokens, error) {\n        this.provider = provider;\n        this.tokens = tokens;\n        this.error = error;\n    }\n}\nexport function hasDocumentSemanticTokensProvider(registry, model) {\n    return registry.has(model);\n}\nfunction getDocumentSemanticTokensProviders(registry, model) {\n    const groups = registry.orderedGroups(model);\n    return (groups.length > 0 ? groups[0] : []);\n}\nexport function getDocumentSemanticTokens(registry, model, lastProvider, lastResultId, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = getDocumentSemanticTokensProviders(registry, model);\n        // Get tokens from all providers at the same time.\n        const results = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            let result;\n            let error = null;\n            try {\n                result = yield provider.provideDocumentSemanticTokens(model, (provider === lastProvider ? lastResultId : null), token);\n            }\n            catch (err) {\n                error = err;\n                result = null;\n            }\n            if (!result || (!isSemanticTokens(result) && !isSemanticTokensEdits(result))) {\n                result = null;\n            }\n            return new DocumentSemanticTokensResult(provider, result, error);\n        })));\n        // Try to return the first result with actual tokens or\n        // the first result which threw an error (!!)\n        for (const result of results) {\n            if (result.error) {\n                throw result.error;\n            }\n            if (result.tokens) {\n                return result;\n            }\n        }\n        // Return the first result, even if it doesn't have tokens\n        if (results.length > 0) {\n            return results[0];\n        }\n        return null;\n    });\n}\nfunction _getDocumentSemanticTokensProviderHighestGroup(registry, model) {\n    const result = registry.orderedGroups(model);\n    return (result.length > 0 ? result[0] : null);\n}\nclass DocumentRangeSemanticTokensResult {\n    constructor(provider, tokens) {\n        this.provider = provider;\n        this.tokens = tokens;\n    }\n}\nexport function hasDocumentRangeSemanticTokensProvider(providers, model) {\n    return providers.has(model);\n}\nfunction getDocumentRangeSemanticTokensProviders(providers, model) {\n    const groups = providers.orderedGroups(model);\n    return (groups.length > 0 ? groups[0] : []);\n}\nexport function getDocumentRangeSemanticTokens(registry, model, range, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = getDocumentRangeSemanticTokensProviders(registry, model);\n        // Get tokens from all providers at the same time.\n        const results = yield Promise.all(providers.map((provider) => __awaiter(this, void 0, void 0, function* () {\n            let result;\n            try {\n                result = yield provider.provideDocumentRangeSemanticTokens(model, range, token);\n            }\n            catch (err) {\n                onUnexpectedExternalError(err);\n                result = null;\n            }\n            if (!result || !isSemanticTokens(result)) {\n                result = null;\n            }\n            return new DocumentRangeSemanticTokensResult(provider, result);\n        })));\n        // Try to return the first result with actual tokens\n        for (const result of results) {\n            if (result.tokens) {\n                return result;\n            }\n        }\n        // Return the first result, even if it doesn't have tokens\n        if (results.length > 0) {\n            return results[0];\n        }\n        return null;\n    });\n}\nCommandsRegistry.registerCommand('_provideDocumentSemanticTokensLegend', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri] = args;\n    assertType(uri instanceof URI);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return undefined;\n    }\n    const { documentSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\n    const providers = _getDocumentSemanticTokensProviderHighestGroup(documentSemanticTokensProvider, model);\n    if (!providers) {\n        // there is no provider => fall back to a document range semantic tokens provider\n        return accessor.get(ICommandService).executeCommand('_provideDocumentRangeSemanticTokensLegend', uri);\n    }\n    return providers[0].getLegend();\n}));\nCommandsRegistry.registerCommand('_provideDocumentSemanticTokens', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri] = args;\n    assertType(uri instanceof URI);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return undefined;\n    }\n    const { documentSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\n    if (!hasDocumentSemanticTokensProvider(documentSemanticTokensProvider, model)) {\n        // there is no provider => fall back to a document range semantic tokens provider\n        return accessor.get(ICommandService).executeCommand('_provideDocumentRangeSemanticTokens', uri, model.getFullModelRange());\n    }\n    const r = yield getDocumentSemanticTokens(documentSemanticTokensProvider, model, null, null, CancellationToken.None);\n    if (!r) {\n        return undefined;\n    }\n    const { provider, tokens } = r;\n    if (!tokens || !isSemanticTokens(tokens)) {\n        return undefined;\n    }\n    const buff = encodeSemanticTokensDto({\n        id: 0,\n        type: 'full',\n        data: tokens.data\n    });\n    if (tokens.resultId) {\n        provider.releaseDocumentSemanticTokens(tokens.resultId);\n    }\n    return buff;\n}));\nCommandsRegistry.registerCommand('_provideDocumentRangeSemanticTokensLegend', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, range] = args;\n    assertType(uri instanceof URI);\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return undefined;\n    }\n    const { documentRangeSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\n    const providers = getDocumentRangeSemanticTokensProviders(documentRangeSemanticTokensProvider, model);\n    if (providers.length === 0) {\n        // no providers\n        return undefined;\n    }\n    if (providers.length === 1) {\n        // straight forward case, just a single provider\n        return providers[0].getLegend();\n    }\n    if (!range || !Range.isIRange(range)) {\n        // if no range is provided, we cannot support multiple providers\n        // as we cannot fall back to the one which would give results\n        // => return the first legend for backwards compatibility and print a warning\n        console.warn(`provideDocumentRangeSemanticTokensLegend might be out-of-sync with provideDocumentRangeSemanticTokens unless a range argument is passed in`);\n        return providers[0].getLegend();\n    }\n    const result = yield getDocumentRangeSemanticTokens(documentRangeSemanticTokensProvider, model, Range.lift(range), CancellationToken.None);\n    if (!result) {\n        return undefined;\n    }\n    return result.provider.getLegend();\n}));\nCommandsRegistry.registerCommand('_provideDocumentRangeSemanticTokens', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, range] = args;\n    assertType(uri instanceof URI);\n    assertType(Range.isIRange(range));\n    const model = accessor.get(IModelService).getModel(uri);\n    if (!model) {\n        return undefined;\n    }\n    const { documentRangeSemanticTokensProvider } = accessor.get(ILanguageFeaturesService);\n    const result = yield getDocumentRangeSemanticTokens(documentRangeSemanticTokensProvider, model, Range.lift(range), CancellationToken.None);\n    if (!result || !result.tokens) {\n        // there is no provider or it didn't return tokens\n        return undefined;\n    }\n    return encodeSemanticTokensDto({\n        id: 0,\n        type: 'full',\n        data: result.tokens.data\n    });\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const SEMANTIC_HIGHLIGHTING_SETTING_ID = 'editor.semanticHighlighting';\nexport function isSemanticColoringEnabled(model, themeService, configurationService) {\n    var _a;\n    const setting = (_a = configurationService.getValue(SEMANTIC_HIGHLIGHTING_SETTING_ID, { overrideIdentifier: model.getLanguageId(), resource: model.uri })) === null || _a === void 0 ? void 0 : _a.enabled;\n    if (typeof setting === 'boolean') {\n        return setting;\n    }\n    return themeService.getColorTheme().semanticHighlighting;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport class BracketSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = [];\n            for (const position of positions) {\n                const bucket = [];\n                result.push(bucket);\n                const ranges = new Map();\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsRightYield(resolve, 0, model, position, ranges));\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsLeftYield(resolve, 0, model, position, ranges, bucket));\n            }\n            return result;\n        });\n    }\n    static _bracketsRightYield(resolve, round, model, pos, ranges) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            const bracket = model.bracketPairs.findNextBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            const d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsRightYield(resolve, round + 1, model, pos, ranges));\n                break;\n            }\n            if (bracket.bracketInfo.isOpeningBracket) {\n                const key = bracket.bracketInfo.bracketText;\n                // wait for closing\n                const val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                const key = bracket.bracketInfo.getOpeningBrackets()[0].bracketText;\n                // process closing\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    let list = ranges.get(key);\n                    if (!list) {\n                        list = new LinkedList();\n                        ranges.set(key, list);\n                    }\n                    list.push(bracket.range);\n                }\n            }\n            pos = bracket.range.getEndPosition();\n        }\n    }\n    static _bracketsLeftYield(resolve, round, model, pos, ranges, bucket) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds && ranges.size === 0) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            const bracket = model.bracketPairs.findPrevBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            const d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsLeftYield(resolve, round + 1, model, pos, ranges, bucket));\n                break;\n            }\n            if (!bracket.bracketInfo.isOpeningBracket) {\n                const key = bracket.bracketInfo.getOpeningBrackets()[0].bracketText;\n                // wait for opening\n                const val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                const key = bracket.bracketInfo.bracketText;\n                // opening\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    const list = ranges.get(key);\n                    if (list) {\n                        const closing = list.shift();\n                        if (list.size === 0) {\n                            ranges.delete(key);\n                        }\n                        const innerBracket = Range.fromPositions(bracket.range.getEndPosition(), closing.getStartPosition());\n                        const outerBracket = Range.fromPositions(bracket.range.getStartPosition(), closing.getEndPosition());\n                        bucket.push({ range: innerBracket });\n                        bucket.push({ range: outerBracket });\n                        BracketSelectionRangeProvider._addBracketLeading(model, outerBracket, bucket);\n                    }\n                }\n            }\n            pos = bracket.range.getStartPosition();\n        }\n    }\n    static _addBracketLeading(model, bracket, bucket) {\n        if (bracket.startLineNumber === bracket.endLineNumber) {\n            return;\n        }\n        // xxxxxxxx {\n        //\n        // }\n        const startLine = bracket.startLineNumber;\n        const column = model.getLineFirstNonWhitespaceColumn(startLine);\n        if (column !== 0 && column !== bracket.startColumn) {\n            bucket.push({ range: Range.fromPositions(new Position(startLine, column), bracket.getEndPosition()) });\n            bucket.push({ range: Range.fromPositions(new Position(startLine, 1), bracket.getEndPosition()) });\n        }\n        // xxxxxxxx\n        // {\n        //\n        // }\n        const aboveLine = startLine - 1;\n        if (aboveLine > 0) {\n            const column = model.getLineFirstNonWhitespaceColumn(aboveLine);\n            if (column === bracket.startColumn && column !== model.getLineLastNonWhitespaceColumn(aboveLine)) {\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, column), bracket.getEndPosition()) });\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, 1), bracket.getEndPosition()) });\n            }\n        }\n    }\n}\nBracketSelectionRangeProvider._maxDuration = 30;\nBracketSelectionRangeProvider._maxRounds = 2;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar SmartSelectController_1;\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nclass SelectionRanges {\n    constructor(index, ranges) {\n        this.index = index;\n        this.ranges = ranges;\n    }\n    mov(fwd) {\n        const index = this.index + (fwd ? 1 : -1);\n        if (index < 0 || index >= this.ranges.length) {\n            return this;\n        }\n        const res = new SelectionRanges(index, this.ranges);\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n            // next range equals this range, retry with next-next\n            return res.mov(fwd);\n        }\n        return res;\n    }\n}\nlet SmartSelectController = SmartSelectController_1 = class SmartSelectController {\n    static get(editor) {\n        return editor.getContribution(SmartSelectController_1.ID);\n    }\n    constructor(_editor, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._ignoreSelection = false;\n    }\n    dispose() {\n        var _a;\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    run(forward) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            const model = this._editor.getModel();\n            if (!this._state) {\n                yield provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(s => s.getPosition()), this._editor.getOption(112 /* EditorOption.smartSelect */), CancellationToken.None).then(ranges => {\n                    var _a;\n                    if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n                        // invalid result\n                        return;\n                    }\n                    if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\n                        // invalid editor state\n                        return;\n                    }\n                    for (let i = 0; i < ranges.length; i++) {\n                        ranges[i] = ranges[i].filter(range => {\n                            // filter ranges inside the selection\n                            return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n                        });\n                        // prepend current selection\n                        ranges[i].unshift(selections[i]);\n                    }\n                    this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\n                    // listen to caret move and forget about state\n                    (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                    this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\n                        var _a;\n                        if (!this._ignoreSelection) {\n                            (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                            this._state = undefined;\n                        }\n                    });\n                });\n            }\n            if (!this._state) {\n                // no state\n                return;\n            }\n            this._state = this._state.map(state => state.mov(forward));\n            const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\n            this._ignoreSelection = true;\n            try {\n                this._editor.setSelections(newSelections);\n            }\n            finally {\n                this._ignoreSelection = false;\n            }\n        });\n    }\n};\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\nSmartSelectController = SmartSelectController_1 = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SmartSelectController);\nexport { SmartSelectController };\nclass AbstractSmartSelect extends EditorAction {\n    constructor(forward, opts) {\n        super(opts);\n        this._forward = forward;\n    }\n    run(_accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = SmartSelectController.get(editor);\n            if (controller) {\n                yield controller.run(this._forward);\n            }\n        });\n    }\n}\nclass GrowSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(true, {\n            id: 'editor.action.smartSelect.expand',\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n            alias: 'Expand Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\n                order: 2\n            }\n        });\n    }\n}\n// renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nclass ShrinkSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(false, {\n            id: 'editor.action.smartSelect.shrink',\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n            alias: 'Shrink Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\n                order: 3\n            }\n        });\n    }\n}\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\nexport function provideSelectionRanges(registry, model, positions, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = registry.all(model)\n            .concat(new WordSelectionRangeProvider(options.selectSubwords)); // ALWAYS have word based selection range\n        if (providers.length === 1) {\n            // add word selection and bracket selection when no provider exists\n            providers.unshift(new BracketSelectionRangeProvider());\n        }\n        const work = [];\n        const allRawRanges = [];\n        for (const provider of providers) {\n            work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\n                if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n                    for (let i = 0; i < positions.length; i++) {\n                        if (!allRawRanges[i]) {\n                            allRawRanges[i] = [];\n                        }\n                        for (const oneProviderRanges of allProviderRanges[i]) {\n                            if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n                                allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n                            }\n                        }\n                    }\n                }\n            }, onUnexpectedExternalError));\n        }\n        yield Promise.all(work);\n        return allRawRanges.map(oneRawRanges => {\n            if (oneRawRanges.length === 0) {\n                return [];\n            }\n            // sort all by start/end position\n            oneRawRanges.sort((a, b) => {\n                if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n                    return 1;\n                }\n                else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n                    return 1;\n                }\n                else {\n                    return 0;\n                }\n            });\n            // remove ranges that don't contain the former range or that are equal to the\n            // former range\n            const oneRanges = [];\n            let last;\n            for (const range of oneRawRanges) {\n                if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\n                    oneRanges.push(range);\n                    last = range;\n                }\n            }\n            if (!options.selectLeadingAndTrailingWhitespace) {\n                return oneRanges;\n            }\n            // add ranges that expand trivia at line starts and ends whenever a range\n            // wraps onto the a new line\n            const oneRangesWithTrivia = [oneRanges[0]];\n            for (let i = 1; i < oneRanges.length; i++) {\n                const prev = oneRanges[i - 1];\n                const cur = oneRanges[i];\n                if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n                    // add line/block range without leading/failing whitespace\n                    const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n                    if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n                        oneRangesWithTrivia.push(rangeNoWhitespace);\n                    }\n                    // add line/block range\n                    const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n                    if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n                        oneRangesWithTrivia.push(rangeFull);\n                    }\n                }\n                oneRangesWithTrivia.push(cur);\n            }\n            return oneRangesWithTrivia;\n        });\n    });\n}\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, positions] = args;\n        assertType(URI.isUri(resource));\n        const registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\n        const reference = yield accessor.get(ITextModelService).createModelReference(resource);\n        try {\n            return provideSelectionRanges(registry, reference.object.textEditorModel, positions, { selectLeadingAndTrailingWhitespace: true, selectSubwords: true }, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isLowerAsciiLetter, isUpperAsciiLetter } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nexport class WordSelectionRangeProvider {\n    constructor(selectSubwords = true) {\n        this.selectSubwords = selectSubwords;\n    }\n    provideSelectionRanges(model, positions) {\n        const result = [];\n        for (const position of positions) {\n            const bucket = [];\n            result.push(bucket);\n            if (this.selectSubwords) {\n                this._addInWordRanges(bucket, model, position);\n            }\n            this._addWordRanges(bucket, model, position);\n            this._addWhitespaceLine(bucket, model, position);\n            bucket.push({ range: model.getFullModelRange() });\n        }\n        return result;\n    }\n    _addInWordRanges(bucket, model, pos) {\n        const obj = model.getWordAtPosition(pos);\n        if (!obj) {\n            return;\n        }\n        const { word, startColumn } = obj;\n        const offset = pos.column - startColumn;\n        let start = offset;\n        let end = offset;\n        let lastCh = 0;\n        // LEFT anchor (start)\n        for (; start >= 0; start--) {\n            const ch = word.charCodeAt(start);\n            if ((start !== offset) && (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */)) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            lastCh = ch;\n        }\n        start += 1;\n        // RIGHT anchor (end)\n        for (; end < word.length; end++) {\n            const ch = word.charCodeAt(end);\n            if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            else if (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            lastCh = ch;\n        }\n        if (start < end) {\n            bucket.push({ range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end) });\n        }\n    }\n    _addWordRanges(bucket, model, pos) {\n        const word = model.getWordAtPosition(pos);\n        if (word) {\n            bucket.push({ range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn) });\n        }\n    }\n    _addWhitespaceLine(bucket, model, pos) {\n        if (model.getLineLength(pos.lineNumber) > 0\n            && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0\n            && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\n            bucket.push({ range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber)) });\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar SnippetController2_1;\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { showSimpleSuggestions } from '../../suggest/browser/suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { SnippetSession } from './snippetSession.js';\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    undoStopBefore: true,\n    undoStopAfter: true,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nlet SnippetController2 = SnippetController2_1 = class SnippetController2 {\n    static get(editor) {\n        return editor.getContribution(SnippetController2_1.ID);\n    }\n    constructor(_editor, _logService, _languageFeaturesService, contextKeyService, _languageConfigurationService) {\n        this._editor = _editor;\n        this._logService = _logService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._snippetListener = new DisposableStore();\n        this._modelVersionId = -1;\n        this._inSnippet = SnippetController2_1.InSnippetMode.bindTo(contextKeyService);\n        this._hasNextTabstop = SnippetController2_1.HasNextTabstop.bindTo(contextKeyService);\n        this._hasPrevTabstop = SnippetController2_1.HasPrevTabstop.bindTo(contextKeyService);\n    }\n    dispose() {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._snippetListener.dispose();\n    }\n    insert(template, opts) {\n        // this is here to find out more about the yet-not-understood\n        // error that sometimes happens when we fail to inserted a nested\n        // snippet\n        try {\n            this._doInsert(template, typeof opts === 'undefined' ? _defaultOptions : Object.assign(Object.assign({}, _defaultOptions), opts));\n        }\n        catch (e) {\n            this.cancel();\n            this._logService.error(e);\n            this._logService.error('snippet_error');\n            this._logService.error('insert_template=', template);\n            this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\n        }\n    }\n    _doInsert(template, opts) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // don't listen while inserting the snippet\n        // as that is the inflight state causing cancelation\n        this._snippetListener.clear();\n        if (opts.undoStopBefore) {\n            this._editor.getModel().pushStackElement();\n        }\n        // don't merge\n        if (this._session && typeof template !== 'string') {\n            this.cancel();\n        }\n        if (!this._session) {\n            this._modelVersionId = this._editor.getModel().getAlternativeVersionId();\n            this._session = new SnippetSession(this._editor, template, opts, this._languageConfigurationService);\n            this._session.insert();\n        }\n        else {\n            assertType(typeof template === 'string');\n            this._session.merge(template, opts);\n        }\n        if (opts.undoStopAfter) {\n            this._editor.getModel().pushStackElement();\n        }\n        // regster completion item provider when there is any choice element\n        if ((_a = this._session) === null || _a === void 0 ? void 0 : _a.hasChoice) {\n            const provider = {\n                _debugDisplayName: 'snippetChoiceCompletions',\n                provideCompletionItems: (model, position) => {\n                    if (!this._session || model !== this._editor.getModel() || !Position.equals(this._editor.getPosition(), position)) {\n                        return undefined;\n                    }\n                    const { activeChoice } = this._session;\n                    if (!activeChoice || activeChoice.choice.options.length === 0) {\n                        return undefined;\n                    }\n                    const word = model.getValueInRange(activeChoice.range);\n                    const isAnyOfOptions = Boolean(activeChoice.choice.options.find(o => o.value === word));\n                    const suggestions = [];\n                    for (let i = 0; i < activeChoice.choice.options.length; i++) {\n                        const option = activeChoice.choice.options[i];\n                        suggestions.push({\n                            kind: 13 /* CompletionItemKind.Value */,\n                            label: option.value,\n                            insertText: option.value,\n                            sortText: 'a'.repeat(i + 1),\n                            range: activeChoice.range,\n                            filterText: isAnyOfOptions ? `${word}_${option.value}` : undefined,\n                            command: { id: 'jumpToNextSnippetPlaceholder', title: localize('next', 'Go to next placeholder...') }\n                        });\n                    }\n                    return { suggestions };\n                }\n            };\n            const model = this._editor.getModel();\n            let registration;\n            let isRegistered = false;\n            const disable = () => {\n                registration === null || registration === void 0 ? void 0 : registration.dispose();\n                isRegistered = false;\n            };\n            const enable = () => {\n                if (!isRegistered) {\n                    registration = this._languageFeaturesService.completionProvider.register({\n                        language: model.getLanguageId(),\n                        pattern: model.uri.fsPath,\n                        scheme: model.uri.scheme,\n                        exclusive: true\n                    }, provider);\n                    this._snippetListener.add(registration);\n                    isRegistered = true;\n                }\n            };\n            this._choiceCompletions = { provider, enable, disable };\n        }\n        this._updateState();\n        this._snippetListener.add(this._editor.onDidChangeModelContent(e => e.isFlush && this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeModel(() => this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeCursorSelection(() => this._updateState()));\n    }\n    _updateState() {\n        if (!this._session || !this._editor.hasModel()) {\n            // canceled in the meanwhile\n            return;\n        }\n        if (this._modelVersionId === this._editor.getModel().getAlternativeVersionId()) {\n            // undo until the 'before' state happened\n            // and makes use cancel snippet mode\n            return this.cancel();\n        }\n        if (!this._session.hasPlaceholder) {\n            // don't listen for selection changes and don't\n            // update context keys when the snippet is plain text\n            return this.cancel();\n        }\n        if (this._session.isAtLastPlaceholder || !this._session.isSelectionWithinPlaceholders()) {\n            this._editor.getModel().pushStackElement();\n            return this.cancel();\n        }\n        this._inSnippet.set(true);\n        this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder);\n        this._hasNextTabstop.set(!this._session.isAtLastPlaceholder);\n        this._handleChoice();\n    }\n    _handleChoice() {\n        var _a;\n        if (!this._session || !this._editor.hasModel()) {\n            this._currentChoice = undefined;\n            return;\n        }\n        const { activeChoice } = this._session;\n        if (!activeChoice || !this._choiceCompletions) {\n            (_a = this._choiceCompletions) === null || _a === void 0 ? void 0 : _a.disable();\n            this._currentChoice = undefined;\n            return;\n        }\n        if (this._currentChoice !== activeChoice.choice) {\n            this._currentChoice = activeChoice.choice;\n            this._choiceCompletions.enable();\n            // trigger suggest with the special choice completion provider\n            queueMicrotask(() => {\n                showSimpleSuggestions(this._editor, this._choiceCompletions.provider);\n            });\n        }\n    }\n    finish() {\n        while (this._inSnippet.get()) {\n            this.next();\n        }\n    }\n    cancel(resetSelection = false) {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        this._snippetListener.clear();\n        this._currentChoice = undefined;\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._session = undefined;\n        this._modelVersionId = -1;\n        if (resetSelection) {\n            // reset selection to the primary cursor when being asked\n            // for. this happens when explicitly cancelling snippet mode,\n            // e.g. when pressing ESC\n            this._editor.setSelections([this._editor.getSelection()]);\n        }\n    }\n    prev() {\n        var _a;\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.prev();\n        this._updateState();\n    }\n    next() {\n        var _a;\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.next();\n        this._updateState();\n    }\n    isInSnippet() {\n        return Boolean(this._inSnippet.get());\n    }\n};\nSnippetController2.ID = 'snippetController2';\nSnippetController2.InSnippetMode = new RawContextKey('inSnippetMode', false, localize('inSnippetMode', \"Whether the editor in current in snippet mode\"));\nSnippetController2.HasNextTabstop = new RawContextKey('hasNextTabstop', false, localize('hasNextTabstop', \"Whether there is a next tab stop when in snippet mode\"));\nSnippetController2.HasPrevTabstop = new RawContextKey('hasPrevTabstop', false, localize('hasPrevTabstop', \"Whether there is a previous tab stop when in snippet mode\"));\nSnippetController2 = SnippetController2_1 = __decorate([\n    __param(1, ILogService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IContextKeyService),\n    __param(4, ILanguageConfigurationService)\n], SnippetController2);\nexport { SnippetController2 };\nregisterEditorContribution(SnippetController2.ID, SnippetController2, 4 /* EditorContributionInstantiation.Lazy */);\nconst CommandCtor = EditorCommand.bindToContribution(SnippetController2.get);\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToNextSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasNextTabstop),\n    handler: ctrl => ctrl.next(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToPrevSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasPrevTabstop),\n    handler: ctrl => ctrl.prev(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'leaveSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.cancel(true),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'acceptSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.finish(),\n    // kbOpts: {\n    // \tweight: KeybindingWeight.EditorContrib + 30,\n    // \tkbExpr: EditorContextKeys.textFocus,\n    // \tprimary: KeyCode.Enter,\n    // }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class Scanner {\n    constructor() {\n        this.value = '';\n        this.pos = 0;\n    }\n    static isDigitCharacter(ch) {\n        return ch >= 48 /* CharCode.Digit0 */ && ch <= 57 /* CharCode.Digit9 */;\n    }\n    static isVariableCharacter(ch) {\n        return ch === 95 /* CharCode.Underline */\n            || (ch >= 97 /* CharCode.a */ && ch <= 122 /* CharCode.z */)\n            || (ch >= 65 /* CharCode.A */ && ch <= 90 /* CharCode.Z */);\n    }\n    text(value) {\n        this.value = value;\n        this.pos = 0;\n    }\n    tokenText(token) {\n        return this.value.substr(token.pos, token.len);\n    }\n    next() {\n        if (this.pos >= this.value.length) {\n            return { type: 14 /* TokenType.EOF */, pos: this.pos, len: 0 };\n        }\n        const pos = this.pos;\n        let len = 0;\n        let ch = this.value.charCodeAt(pos);\n        let type;\n        // static types\n        type = Scanner._table[ch];\n        if (typeof type === 'number') {\n            this.pos += 1;\n            return { type, pos, len: 1 };\n        }\n        // number\n        if (Scanner.isDigitCharacter(ch)) {\n            type = 8 /* TokenType.Int */;\n            do {\n                len += 1;\n                ch = this.value.charCodeAt(pos + len);\n            } while (Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // variable name\n        if (Scanner.isVariableCharacter(ch)) {\n            type = 9 /* TokenType.VariableName */;\n            do {\n                ch = this.value.charCodeAt(pos + (++len));\n            } while (Scanner.isVariableCharacter(ch) || Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // format\n        type = 10 /* TokenType.Format */;\n        do {\n            len += 1;\n            ch = this.value.charCodeAt(pos + len);\n        } while (!isNaN(ch)\n            && typeof Scanner._table[ch] === 'undefined' // not static token\n            && !Scanner.isDigitCharacter(ch) // not number\n            && !Scanner.isVariableCharacter(ch) // not variable\n        );\n        this.pos += len;\n        return { type, pos, len };\n    }\n}\nScanner._table = {\n    [36 /* CharCode.DollarSign */]: 0 /* TokenType.Dollar */,\n    [58 /* CharCode.Colon */]: 1 /* TokenType.Colon */,\n    [44 /* CharCode.Comma */]: 2 /* TokenType.Comma */,\n    [123 /* CharCode.OpenCurlyBrace */]: 3 /* TokenType.CurlyOpen */,\n    [125 /* CharCode.CloseCurlyBrace */]: 4 /* TokenType.CurlyClose */,\n    [92 /* CharCode.Backslash */]: 5 /* TokenType.Backslash */,\n    [47 /* CharCode.Slash */]: 6 /* TokenType.Forwardslash */,\n    [124 /* CharCode.Pipe */]: 7 /* TokenType.Pipe */,\n    [43 /* CharCode.Plus */]: 11 /* TokenType.Plus */,\n    [45 /* CharCode.Dash */]: 12 /* TokenType.Dash */,\n    [63 /* CharCode.QuestionMark */]: 13 /* TokenType.QuestionMark */,\n};\nexport class Marker {\n    constructor() {\n        this._children = [];\n    }\n    appendChild(child) {\n        if (child instanceof Text && this._children[this._children.length - 1] instanceof Text) {\n            // this and previous child are text -> merge them\n            this._children[this._children.length - 1].value += child.value;\n        }\n        else {\n            // normal adoption of child\n            child.parent = this;\n            this._children.push(child);\n        }\n        return this;\n    }\n    replace(child, others) {\n        const { parent } = child;\n        const idx = parent.children.indexOf(child);\n        const newChildren = parent.children.slice(0);\n        newChildren.splice(idx, 1, ...others);\n        parent._children = newChildren;\n        (function _fixParent(children, parent) {\n            for (const child of children) {\n                child.parent = parent;\n                _fixParent(child.children, child);\n            }\n        })(others, parent);\n    }\n    get children() {\n        return this._children;\n    }\n    get rightMostDescendant() {\n        if (this._children.length > 0) {\n            return this._children[this._children.length - 1].rightMostDescendant;\n        }\n        return this;\n    }\n    get snippet() {\n        let candidate = this;\n        while (true) {\n            if (!candidate) {\n                return undefined;\n            }\n            if (candidate instanceof TextmateSnippet) {\n                return candidate;\n            }\n            candidate = candidate.parent;\n        }\n    }\n    toString() {\n        return this.children.reduce((prev, cur) => prev + cur.toString(), '');\n    }\n    len() {\n        return 0;\n    }\n}\nexport class Text extends Marker {\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    len() {\n        return this.value.length;\n    }\n    clone() {\n        return new Text(this.value);\n    }\n}\nexport class TransformableMarker extends Marker {\n}\nexport class Placeholder extends TransformableMarker {\n    static compareByIndex(a, b) {\n        if (a.index === b.index) {\n            return 0;\n        }\n        else if (a.isFinalTabstop) {\n            return 1;\n        }\n        else if (b.isFinalTabstop) {\n            return -1;\n        }\n        else if (a.index < b.index) {\n            return -1;\n        }\n        else if (a.index > b.index) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    constructor(index) {\n        super();\n        this.index = index;\n    }\n    get isFinalTabstop() {\n        return this.index === 0;\n    }\n    get choice() {\n        return this._children.length === 1 && this._children[0] instanceof Choice\n            ? this._children[0]\n            : undefined;\n    }\n    clone() {\n        const ret = new Placeholder(this.index);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class Choice extends Marker {\n    constructor() {\n        super(...arguments);\n        this.options = [];\n    }\n    appendChild(marker) {\n        if (marker instanceof Text) {\n            marker.parent = this;\n            this.options.push(marker);\n        }\n        return this;\n    }\n    toString() {\n        return this.options[0].value;\n    }\n    len() {\n        return this.options[0].len();\n    }\n    clone() {\n        const ret = new Choice();\n        this.options.forEach(ret.appendChild, ret);\n        return ret;\n    }\n}\nexport class Transform extends Marker {\n    constructor() {\n        super(...arguments);\n        this.regexp = new RegExp('');\n    }\n    resolve(value) {\n        const _this = this;\n        let didMatch = false;\n        let ret = value.replace(this.regexp, function () {\n            didMatch = true;\n            return _this._replace(Array.prototype.slice.call(arguments, 0, -2));\n        });\n        // when the regex didn't match and when the transform has\n        // else branches, then run those\n        if (!didMatch && this._children.some(child => child instanceof FormatString && Boolean(child.elseValue))) {\n            ret = this._replace([]);\n        }\n        return ret;\n    }\n    _replace(groups) {\n        let ret = '';\n        for (const marker of this._children) {\n            if (marker instanceof FormatString) {\n                let value = groups[marker.index] || '';\n                value = marker.resolve(value);\n                ret += value;\n            }\n            else {\n                ret += marker.toString();\n            }\n        }\n        return ret;\n    }\n    toString() {\n        return '';\n    }\n    clone() {\n        const ret = new Transform();\n        ret.regexp = new RegExp(this.regexp.source, '' + (this.regexp.ignoreCase ? 'i' : '') + (this.regexp.global ? 'g' : ''));\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class FormatString extends Marker {\n    constructor(index, shorthandName, ifValue, elseValue) {\n        super();\n        this.index = index;\n        this.shorthandName = shorthandName;\n        this.ifValue = ifValue;\n        this.elseValue = elseValue;\n    }\n    resolve(value) {\n        if (this.shorthandName === 'upcase') {\n            return !value ? '' : value.toLocaleUpperCase();\n        }\n        else if (this.shorthandName === 'downcase') {\n            return !value ? '' : value.toLocaleLowerCase();\n        }\n        else if (this.shorthandName === 'capitalize') {\n            return !value ? '' : (value[0].toLocaleUpperCase() + value.substr(1));\n        }\n        else if (this.shorthandName === 'pascalcase') {\n            return !value ? '' : this._toPascalCase(value);\n        }\n        else if (this.shorthandName === 'camelcase') {\n            return !value ? '' : this._toCamelCase(value);\n        }\n        else if (Boolean(value) && typeof this.ifValue === 'string') {\n            return this.ifValue;\n        }\n        else if (!Boolean(value) && typeof this.elseValue === 'string') {\n            return this.elseValue;\n        }\n        else {\n            return value || '';\n        }\n    }\n    _toPascalCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map(word => {\n            return word.charAt(0).toUpperCase() + word.substr(1);\n        })\n            .join('');\n    }\n    _toCamelCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map((word, index) => {\n            if (index === 0) {\n                return word.charAt(0).toLowerCase() + word.substr(1);\n            }\n            return word.charAt(0).toUpperCase() + word.substr(1);\n        })\n            .join('');\n    }\n    clone() {\n        const ret = new FormatString(this.index, this.shorthandName, this.ifValue, this.elseValue);\n        return ret;\n    }\n}\nexport class Variable extends TransformableMarker {\n    constructor(name) {\n        super();\n        this.name = name;\n    }\n    resolve(resolver) {\n        let value = resolver.resolve(this);\n        if (this.transform) {\n            value = this.transform.resolve(value || '');\n        }\n        if (value !== undefined) {\n            this._children = [new Text(value)];\n            return true;\n        }\n        return false;\n    }\n    clone() {\n        const ret = new Variable(this.name);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nfunction walk(marker, visitor) {\n    const stack = [...marker];\n    while (stack.length > 0) {\n        const marker = stack.shift();\n        const recurse = visitor(marker);\n        if (!recurse) {\n            break;\n        }\n        stack.unshift(...marker.children);\n    }\n}\nexport class TextmateSnippet extends Marker {\n    get placeholderInfo() {\n        if (!this._placeholders) {\n            // fill in placeholders\n            const all = [];\n            let last;\n            this.walk(function (candidate) {\n                if (candidate instanceof Placeholder) {\n                    all.push(candidate);\n                    last = !last || last.index < candidate.index ? candidate : last;\n                }\n                return true;\n            });\n            this._placeholders = { all, last };\n        }\n        return this._placeholders;\n    }\n    get placeholders() {\n        const { all } = this.placeholderInfo;\n        return all;\n    }\n    offset(marker) {\n        let pos = 0;\n        let found = false;\n        this.walk(candidate => {\n            if (candidate === marker) {\n                found = true;\n                return false;\n            }\n            pos += candidate.len();\n            return true;\n        });\n        if (!found) {\n            return -1;\n        }\n        return pos;\n    }\n    fullLen(marker) {\n        let ret = 0;\n        walk([marker], marker => {\n            ret += marker.len();\n            return true;\n        });\n        return ret;\n    }\n    enclosingPlaceholders(placeholder) {\n        const ret = [];\n        let { parent } = placeholder;\n        while (parent) {\n            if (parent instanceof Placeholder) {\n                ret.push(parent);\n            }\n            parent = parent.parent;\n        }\n        return ret;\n    }\n    resolveVariables(resolver) {\n        this.walk(candidate => {\n            if (candidate instanceof Variable) {\n                if (candidate.resolve(resolver)) {\n                    this._placeholders = undefined;\n                }\n            }\n            return true;\n        });\n        return this;\n    }\n    appendChild(child) {\n        this._placeholders = undefined;\n        return super.appendChild(child);\n    }\n    replace(child, others) {\n        this._placeholders = undefined;\n        return super.replace(child, others);\n    }\n    clone() {\n        const ret = new TextmateSnippet();\n        this._children = this.children.map(child => child.clone());\n        return ret;\n    }\n    walk(visitor) {\n        walk(this.children, visitor);\n    }\n}\nexport class SnippetParser {\n    constructor() {\n        this._scanner = new Scanner();\n        this._token = { type: 14 /* TokenType.EOF */, pos: 0, len: 0 };\n    }\n    static escape(value) {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n    static guessNeedsClipboard(template) {\n        return /\\${?CLIPBOARD/.test(template);\n    }\n    parse(value, insertFinalTabstop, enforceFinalTabstop) {\n        const snippet = new TextmateSnippet();\n        this.parseFragment(value, snippet);\n        this.ensureFinalTabstop(snippet, enforceFinalTabstop !== null && enforceFinalTabstop !== void 0 ? enforceFinalTabstop : false, insertFinalTabstop !== null && insertFinalTabstop !== void 0 ? insertFinalTabstop : false);\n        return snippet;\n    }\n    parseFragment(value, snippet) {\n        const offset = snippet.children.length;\n        this._scanner.text(value);\n        this._token = this._scanner.next();\n        while (this._parse(snippet)) {\n            // nothing\n        }\n        // fill in values for placeholders. the first placeholder of an index\n        // that has a value defines the value for all placeholders with that index\n        const placeholderDefaultValues = new Map();\n        const incompletePlaceholders = [];\n        snippet.walk(marker => {\n            if (marker instanceof Placeholder) {\n                if (marker.isFinalTabstop) {\n                    placeholderDefaultValues.set(0, undefined);\n                }\n                else if (!placeholderDefaultValues.has(marker.index) && marker.children.length > 0) {\n                    placeholderDefaultValues.set(marker.index, marker.children);\n                }\n                else {\n                    incompletePlaceholders.push(marker);\n                }\n            }\n            return true;\n        });\n        const fillInIncompletePlaceholder = (placeholder, stack) => {\n            const defaultValues = placeholderDefaultValues.get(placeholder.index);\n            if (!defaultValues) {\n                return;\n            }\n            const clone = new Placeholder(placeholder.index);\n            clone.transform = placeholder.transform;\n            for (const child of defaultValues) {\n                const newChild = child.clone();\n                clone.appendChild(newChild);\n                // \"recurse\" on children that are again placeholders\n                if (newChild instanceof Placeholder && placeholderDefaultValues.has(newChild.index) && !stack.has(newChild.index)) {\n                    stack.add(newChild.index);\n                    fillInIncompletePlaceholder(newChild, stack);\n                    stack.delete(newChild.index);\n                }\n            }\n            snippet.replace(placeholder, [clone]);\n        };\n        const stack = new Set();\n        for (const placeholder of incompletePlaceholders) {\n            fillInIncompletePlaceholder(placeholder, stack);\n        }\n        return snippet.children.slice(offset);\n    }\n    ensureFinalTabstop(snippet, enforceFinalTabstop, insertFinalTabstop) {\n        if (enforceFinalTabstop || insertFinalTabstop && snippet.placeholders.length > 0) {\n            const finalTabstop = snippet.placeholders.find(p => p.index === 0);\n            if (!finalTabstop) {\n                // the snippet uses placeholders but has no\n                // final tabstop defined -> insert at the end\n                snippet.appendChild(new Placeholder(0));\n            }\n        }\n    }\n    _accept(type, value) {\n        if (type === undefined || this._token.type === type) {\n            const ret = !value ? true : this._scanner.tokenText(this._token);\n            this._token = this._scanner.next();\n            return ret;\n        }\n        return false;\n    }\n    _backTo(token) {\n        this._scanner.pos = token.pos + token.len;\n        this._token = token;\n        return false;\n    }\n    _until(type) {\n        const start = this._token;\n        while (this._token.type !== type) {\n            if (this._token.type === 14 /* TokenType.EOF */) {\n                return false;\n            }\n            else if (this._token.type === 5 /* TokenType.Backslash */) {\n                const nextToken = this._scanner.next();\n                if (nextToken.type !== 0 /* TokenType.Dollar */\n                    && nextToken.type !== 4 /* TokenType.CurlyClose */\n                    && nextToken.type !== 5 /* TokenType.Backslash */) {\n                    return false;\n                }\n            }\n            this._token = this._scanner.next();\n        }\n        const value = this._scanner.value.substring(start.pos, this._token.pos).replace(/\\\\(\\$|}|\\\\)/g, '$1');\n        this._token = this._scanner.next();\n        return value;\n    }\n    _parse(marker) {\n        return this._parseEscaped(marker)\n            || this._parseTabstopOrVariableName(marker)\n            || this._parseComplexPlaceholder(marker)\n            || this._parseComplexVariable(marker)\n            || this._parseAnything(marker);\n    }\n    // \\$, \\\\, \\} -> just text\n    _parseEscaped(marker) {\n        let value;\n        if (value = this._accept(5 /* TokenType.Backslash */, true)) {\n            // saw a backslash, append escaped token or that backslash\n            value = this._accept(0 /* TokenType.Dollar */, true)\n                || this._accept(4 /* TokenType.CurlyClose */, true)\n                || this._accept(5 /* TokenType.Backslash */, true)\n                || value;\n            marker.appendChild(new Text(value));\n            return true;\n        }\n        return false;\n    }\n    // $foo -> variable, $1 -> tabstop\n    _parseTabstopOrVariableName(parent) {\n        let value;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && (value = this._accept(9 /* TokenType.VariableName */, true) || this._accept(8 /* TokenType.Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        parent.appendChild(/^\\d+$/.test(value)\n            ? new Placeholder(Number(value))\n            : new Variable(value));\n        return true;\n    }\n    // ${1:<children>}, ${1} -> placeholder\n    _parseComplexPlaceholder(parent) {\n        let index;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && this._accept(3 /* TokenType.CurlyOpen */)\n            && (index = this._accept(8 /* TokenType.Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const placeholder = new Placeholder(Number(index));\n        if (this._accept(1 /* TokenType.Colon */)) {\n            // ${1:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* TokenType.CurlyClose */)) {\n                    parent.appendChild(placeholder);\n                    return true;\n                }\n                if (this._parse(placeholder)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + index + ':'));\n                placeholder.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (placeholder.index > 0 && this._accept(7 /* TokenType.Pipe */)) {\n            // ${1|one,two,three|}\n            const choice = new Choice();\n            while (true) {\n                if (this._parseChoiceElement(choice)) {\n                    if (this._accept(2 /* TokenType.Comma */)) {\n                        // opt, -> more\n                        continue;\n                    }\n                    if (this._accept(7 /* TokenType.Pipe */)) {\n                        placeholder.appendChild(choice);\n                        if (this._accept(4 /* TokenType.CurlyClose */)) {\n                            // ..|} -> done\n                            parent.appendChild(placeholder);\n                            return true;\n                        }\n                    }\n                }\n                this._backTo(token);\n                return false;\n            }\n        }\n        else if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${1/<regex>/<format>/<options>}\n            if (this._parseTransform(placeholder)) {\n                parent.appendChild(placeholder);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${1}\n            parent.appendChild(placeholder);\n            return true;\n        }\n        else {\n            // ${1 <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseChoiceElement(parent) {\n        const token = this._token;\n        const values = [];\n        while (true) {\n            if (this._token.type === 2 /* TokenType.Comma */ || this._token.type === 7 /* TokenType.Pipe */) {\n                break;\n            }\n            let value;\n            if (value = this._accept(5 /* TokenType.Backslash */, true)) {\n                // \\, \\|, or \\\\\n                value = this._accept(2 /* TokenType.Comma */, true)\n                    || this._accept(7 /* TokenType.Pipe */, true)\n                    || this._accept(5 /* TokenType.Backslash */, true)\n                    || value;\n            }\n            else {\n                value = this._accept(undefined, true);\n            }\n            if (!value) {\n                // EOF\n                this._backTo(token);\n                return false;\n            }\n            values.push(value);\n        }\n        if (values.length === 0) {\n            this._backTo(token);\n            return false;\n        }\n        parent.appendChild(new Text(values.join('')));\n        return true;\n    }\n    // ${foo:<children>}, ${foo} -> variable\n    _parseComplexVariable(parent) {\n        let name;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && this._accept(3 /* TokenType.CurlyOpen */)\n            && (name = this._accept(9 /* TokenType.VariableName */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const variable = new Variable(name);\n        if (this._accept(1 /* TokenType.Colon */)) {\n            // ${foo:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* TokenType.CurlyClose */)) {\n                    parent.appendChild(variable);\n                    return true;\n                }\n                if (this._parse(variable)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + name + ':'));\n                variable.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${foo/<regex>/<format>/<options>}\n            if (this._parseTransform(variable)) {\n                parent.appendChild(variable);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${foo}\n            parent.appendChild(variable);\n            return true;\n        }\n        else {\n            // ${foo <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseTransform(parent) {\n        // ...<regex>/<format>/<options>}\n        const transform = new Transform();\n        let regexValue = '';\n        let regexOptions = '';\n        // (1) /regex\n        while (true) {\n            if (this._accept(6 /* TokenType.Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\n                escaped = this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\n                regexValue += escaped;\n                continue;\n            }\n            if (this._token.type !== 14 /* TokenType.EOF */) {\n                regexValue += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        // (2) /format\n        while (true) {\n            if (this._accept(6 /* TokenType.Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\n                escaped = this._accept(5 /* TokenType.Backslash */, true) || this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\n                transform.appendChild(new Text(escaped));\n                continue;\n            }\n            if (this._parseFormatString(transform) || this._parseAnything(transform)) {\n                continue;\n            }\n            return false;\n        }\n        // (3) /option\n        while (true) {\n            if (this._accept(4 /* TokenType.CurlyClose */)) {\n                break;\n            }\n            if (this._token.type !== 14 /* TokenType.EOF */) {\n                regexOptions += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        try {\n            transform.regexp = new RegExp(regexValue, regexOptions);\n        }\n        catch (e) {\n            // invalid regexp\n            return false;\n        }\n        parent.transform = transform;\n        return true;\n    }\n    _parseFormatString(parent) {\n        const token = this._token;\n        if (!this._accept(0 /* TokenType.Dollar */)) {\n            return false;\n        }\n        let complex = false;\n        if (this._accept(3 /* TokenType.CurlyOpen */)) {\n            complex = true;\n        }\n        const index = this._accept(8 /* TokenType.Int */, true);\n        if (!index) {\n            this._backTo(token);\n            return false;\n        }\n        else if (!complex) {\n            // $1\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${1}\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (!this._accept(1 /* TokenType.Colon */)) {\n            this._backTo(token);\n            return false;\n        }\n        if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${1:/upcase}\n            const shorthand = this._accept(9 /* TokenType.VariableName */, true);\n            if (!shorthand || !this._accept(4 /* TokenType.CurlyClose */)) {\n                this._backTo(token);\n                return false;\n            }\n            else {\n                parent.appendChild(new FormatString(Number(index), shorthand));\n                return true;\n            }\n        }\n        else if (this._accept(11 /* TokenType.Plus */)) {\n            // ${1:+<if>}\n            const ifValue = this._until(4 /* TokenType.CurlyClose */);\n            if (ifValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, ifValue, undefined));\n                return true;\n            }\n        }\n        else if (this._accept(12 /* TokenType.Dash */)) {\n            // ${2:-<else>}\n            const elseValue = this._until(4 /* TokenType.CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        else if (this._accept(13 /* TokenType.QuestionMark */)) {\n            // ${2:?<if>:<else>}\n            const ifValue = this._until(1 /* TokenType.Colon */);\n            if (ifValue) {\n                const elseValue = this._until(4 /* TokenType.CurlyClose */);\n                if (elseValue) {\n                    parent.appendChild(new FormatString(Number(index), undefined, ifValue, elseValue));\n                    return true;\n                }\n            }\n        }\n        else {\n            // ${1:<else>}\n            const elseValue = this._until(4 /* TokenType.CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        this._backTo(token);\n        return false;\n    }\n    _parseAnything(marker) {\n        if (this._token.type !== 14 /* TokenType.EOF */) {\n            marker.appendChild(new Text(this._scanner.tokenText(this._token)));\n            this._accept(undefined);\n            return true;\n        }\n        return false;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { normalizeDriveLetter } from '../../../../base/common/labels.js';\nimport * as path from '../../../../base/common/path.js';\nimport { dirname } from '../../../../base/common/resources.js';\nimport { commonPrefixLength, getLeadingWhitespace, isFalsyOrWhitespace, splitLines } from '../../../../base/common/strings.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { Text } from './snippetParser.js';\nimport * as nls from '../../../../nls.js';\nimport { WORKSPACE_EXTENSION, isSingleFolderWorkspaceIdentifier, toWorkspaceIdentifier, isEmptyWorkspaceIdentifier } from '../../../../platform/workspace/common/workspace.js';\nexport const KnownSnippetVariableNames = Object.freeze({\n    'CURRENT_YEAR': true,\n    'CURRENT_YEAR_SHORT': true,\n    'CURRENT_MONTH': true,\n    'CURRENT_DATE': true,\n    'CURRENT_HOUR': true,\n    'CURRENT_MINUTE': true,\n    'CURRENT_SECOND': true,\n    'CURRENT_DAY_NAME': true,\n    'CURRENT_DAY_NAME_SHORT': true,\n    'CURRENT_MONTH_NAME': true,\n    'CURRENT_MONTH_NAME_SHORT': true,\n    'CURRENT_SECONDS_UNIX': true,\n    'CURRENT_TIMEZONE_OFFSET': true,\n    'SELECTION': true,\n    'CLIPBOARD': true,\n    'TM_SELECTED_TEXT': true,\n    'TM_CURRENT_LINE': true,\n    'TM_CURRENT_WORD': true,\n    'TM_LINE_INDEX': true,\n    'TM_LINE_NUMBER': true,\n    'TM_FILENAME': true,\n    'TM_FILENAME_BASE': true,\n    'TM_DIRECTORY': true,\n    'TM_FILEPATH': true,\n    'CURSOR_INDEX': true, // 0-offset\n    'CURSOR_NUMBER': true, // 1-offset\n    'RELATIVE_FILEPATH': true,\n    'BLOCK_COMMENT_START': true,\n    'BLOCK_COMMENT_END': true,\n    'LINE_COMMENT': true,\n    'WORKSPACE_NAME': true,\n    'WORKSPACE_FOLDER': true,\n    'RANDOM': true,\n    'RANDOM_HEX': true,\n    'UUID': true\n});\nexport class CompositeSnippetVariableResolver {\n    constructor(_delegates) {\n        this._delegates = _delegates;\n        //\n    }\n    resolve(variable) {\n        for (const delegate of this._delegates) {\n            const value = delegate.resolve(variable);\n            if (value !== undefined) {\n                return value;\n            }\n        }\n        return undefined;\n    }\n}\nexport class SelectionBasedVariableResolver {\n    constructor(_model, _selection, _selectionIdx, _overtypingCapturer) {\n        this._model = _model;\n        this._selection = _selection;\n        this._selectionIdx = _selectionIdx;\n        this._overtypingCapturer = _overtypingCapturer;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'SELECTION' || name === 'TM_SELECTED_TEXT') {\n            let value = this._model.getValueInRange(this._selection) || undefined;\n            let isMultiline = this._selection.startLineNumber !== this._selection.endLineNumber;\n            // If there was no selected text, try to get last overtyped text\n            if (!value && this._overtypingCapturer) {\n                const info = this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);\n                if (info) {\n                    value = info.value;\n                    isMultiline = info.multiline;\n                }\n            }\n            if (value && isMultiline && variable.snippet) {\n                // Selection is a multiline string which we indentation we now\n                // need to adjust. We compare the indentation of this variable\n                // with the indentation at the editor position and add potential\n                // extra indentation to the value\n                const line = this._model.getLineContent(this._selection.startLineNumber);\n                const lineLeadingWhitespace = getLeadingWhitespace(line, 0, this._selection.startColumn - 1);\n                let varLeadingWhitespace = lineLeadingWhitespace;\n                variable.snippet.walk(marker => {\n                    if (marker === variable) {\n                        return false;\n                    }\n                    if (marker instanceof Text) {\n                        varLeadingWhitespace = getLeadingWhitespace(splitLines(marker.value).pop());\n                    }\n                    return true;\n                });\n                const whitespaceCommonLength = commonPrefixLength(varLeadingWhitespace, lineLeadingWhitespace);\n                value = value.replace(/(\\r\\n|\\r|\\n)(.*)/g, (m, newline, rest) => `${newline}${varLeadingWhitespace.substr(whitespaceCommonLength)}${rest}`);\n            }\n            return value;\n        }\n        else if (name === 'TM_CURRENT_LINE') {\n            return this._model.getLineContent(this._selection.positionLineNumber);\n        }\n        else if (name === 'TM_CURRENT_WORD') {\n            const info = this._model.getWordAtPosition({\n                lineNumber: this._selection.positionLineNumber,\n                column: this._selection.positionColumn\n            });\n            return info && info.word || undefined;\n        }\n        else if (name === 'TM_LINE_INDEX') {\n            return String(this._selection.positionLineNumber - 1);\n        }\n        else if (name === 'TM_LINE_NUMBER') {\n            return String(this._selection.positionLineNumber);\n        }\n        else if (name === 'CURSOR_INDEX') {\n            return String(this._selectionIdx);\n        }\n        else if (name === 'CURSOR_NUMBER') {\n            return String(this._selectionIdx + 1);\n        }\n        return undefined;\n    }\n}\nexport class ModelBasedVariableResolver {\n    constructor(_labelService, _model) {\n        this._labelService = _labelService;\n        this._model = _model;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'TM_FILENAME') {\n            return path.basename(this._model.uri.fsPath);\n        }\n        else if (name === 'TM_FILENAME_BASE') {\n            const name = path.basename(this._model.uri.fsPath);\n            const idx = name.lastIndexOf('.');\n            if (idx <= 0) {\n                return name;\n            }\n            else {\n                return name.slice(0, idx);\n            }\n        }\n        else if (name === 'TM_DIRECTORY') {\n            if (path.dirname(this._model.uri.fsPath) === '.') {\n                return '';\n            }\n            return this._labelService.getUriLabel(dirname(this._model.uri));\n        }\n        else if (name === 'TM_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri);\n        }\n        else if (name === 'RELATIVE_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri, { relative: true, noPrefix: true });\n        }\n        return undefined;\n    }\n}\nexport class ClipboardBasedVariableResolver {\n    constructor(_readClipboardText, _selectionIdx, _selectionCount, _spread) {\n        this._readClipboardText = _readClipboardText;\n        this._selectionIdx = _selectionIdx;\n        this._selectionCount = _selectionCount;\n        this._spread = _spread;\n        //\n    }\n    resolve(variable) {\n        if (variable.name !== 'CLIPBOARD') {\n            return undefined;\n        }\n        const clipboardText = this._readClipboardText();\n        if (!clipboardText) {\n            return undefined;\n        }\n        // `spread` is assigning each cursor a line of the clipboard\n        // text whenever there the line count equals the cursor count\n        // and when enabled\n        if (this._spread) {\n            const lines = clipboardText.split(/\\r\\n|\\n|\\r/).filter(s => !isFalsyOrWhitespace(s));\n            if (lines.length === this._selectionCount) {\n                return lines[this._selectionIdx];\n            }\n        }\n        return clipboardText;\n    }\n}\nlet CommentBasedVariableResolver = class CommentBasedVariableResolver {\n    constructor(_model, _selection, _languageConfigurationService) {\n        this._model = _model;\n        this._selection = _selection;\n        this._languageConfigurationService = _languageConfigurationService;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        const langId = this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber, this._selection.selectionStartColumn);\n        const config = this._languageConfigurationService.getLanguageConfiguration(langId).comments;\n        if (!config) {\n            return undefined;\n        }\n        if (name === 'LINE_COMMENT') {\n            return config.lineCommentToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_START') {\n            return config.blockCommentStartToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_END') {\n            return config.blockCommentEndToken || undefined;\n        }\n        return undefined;\n    }\n};\nCommentBasedVariableResolver = __decorate([\n    __param(2, ILanguageConfigurationService)\n], CommentBasedVariableResolver);\nexport { CommentBasedVariableResolver };\nexport class TimeBasedVariableResolver {\n    constructor() {\n        this._date = new Date();\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'CURRENT_YEAR') {\n            return String(this._date.getFullYear());\n        }\n        else if (name === 'CURRENT_YEAR_SHORT') {\n            return String(this._date.getFullYear()).slice(-2);\n        }\n        else if (name === 'CURRENT_MONTH') {\n            return String(this._date.getMonth().valueOf() + 1).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DATE') {\n            return String(this._date.getDate().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_HOUR') {\n            return String(this._date.getHours().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_MINUTE') {\n            return String(this._date.getMinutes().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_SECOND') {\n            return String(this._date.getSeconds().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DAY_NAME') {\n            return TimeBasedVariableResolver.dayNames[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_DAY_NAME_SHORT') {\n            return TimeBasedVariableResolver.dayNamesShort[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME') {\n            return TimeBasedVariableResolver.monthNames[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME_SHORT') {\n            return TimeBasedVariableResolver.monthNamesShort[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_SECONDS_UNIX') {\n            return String(Math.floor(this._date.getTime() / 1000));\n        }\n        else if (name === 'CURRENT_TIMEZONE_OFFSET') {\n            const rawTimeOffset = this._date.getTimezoneOffset();\n            const sign = rawTimeOffset > 0 ? '-' : '+';\n            const hours = Math.trunc(Math.abs(rawTimeOffset / 60));\n            const hoursString = (hours < 10 ? '0' + hours : hours);\n            const minutes = Math.abs(rawTimeOffset) - hours * 60;\n            const minutesString = (minutes < 10 ? '0' + minutes : minutes);\n            return sign + hoursString + ':' + minutesString;\n        }\n        return undefined;\n    }\n}\nTimeBasedVariableResolver.dayNames = [nls.localize('Sunday', \"Sunday\"), nls.localize('Monday', \"Monday\"), nls.localize('Tuesday', \"Tuesday\"), nls.localize('Wednesday', \"Wednesday\"), nls.localize('Thursday', \"Thursday\"), nls.localize('Friday', \"Friday\"), nls.localize('Saturday', \"Saturday\")];\nTimeBasedVariableResolver.dayNamesShort = [nls.localize('SundayShort', \"Sun\"), nls.localize('MondayShort', \"Mon\"), nls.localize('TuesdayShort', \"Tue\"), nls.localize('WednesdayShort', \"Wed\"), nls.localize('ThursdayShort', \"Thu\"), nls.localize('FridayShort', \"Fri\"), nls.localize('SaturdayShort', \"Sat\")];\nTimeBasedVariableResolver.monthNames = [nls.localize('January', \"January\"), nls.localize('February', \"February\"), nls.localize('March', \"March\"), nls.localize('April', \"April\"), nls.localize('May', \"May\"), nls.localize('June', \"June\"), nls.localize('July', \"July\"), nls.localize('August', \"August\"), nls.localize('September', \"September\"), nls.localize('October', \"October\"), nls.localize('November', \"November\"), nls.localize('December', \"December\")];\nTimeBasedVariableResolver.monthNamesShort = [nls.localize('JanuaryShort', \"Jan\"), nls.localize('FebruaryShort', \"Feb\"), nls.localize('MarchShort', \"Mar\"), nls.localize('AprilShort', \"Apr\"), nls.localize('MayShort', \"May\"), nls.localize('JuneShort', \"Jun\"), nls.localize('JulyShort', \"Jul\"), nls.localize('AugustShort', \"Aug\"), nls.localize('SeptemberShort', \"Sep\"), nls.localize('OctoberShort', \"Oct\"), nls.localize('NovemberShort', \"Nov\"), nls.localize('DecemberShort', \"Dec\")];\nexport class WorkspaceBasedVariableResolver {\n    constructor(_workspaceService) {\n        this._workspaceService = _workspaceService;\n        //\n    }\n    resolve(variable) {\n        if (!this._workspaceService) {\n            return undefined;\n        }\n        const workspaceIdentifier = toWorkspaceIdentifier(this._workspaceService.getWorkspace());\n        if (isEmptyWorkspaceIdentifier(workspaceIdentifier)) {\n            return undefined;\n        }\n        if (variable.name === 'WORKSPACE_NAME') {\n            return this._resolveWorkspaceName(workspaceIdentifier);\n        }\n        else if (variable.name === 'WORKSPACE_FOLDER') {\n            return this._resoveWorkspacePath(workspaceIdentifier);\n        }\n        return undefined;\n    }\n    _resolveWorkspaceName(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return path.basename(workspaceIdentifier.uri.path);\n        }\n        let filename = path.basename(workspaceIdentifier.configPath.path);\n        if (filename.endsWith(WORKSPACE_EXTENSION)) {\n            filename = filename.substr(0, filename.length - WORKSPACE_EXTENSION.length - 1);\n        }\n        return filename;\n    }\n    _resoveWorkspacePath(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return normalizeDriveLetter(workspaceIdentifier.uri.fsPath);\n        }\n        const filename = path.basename(workspaceIdentifier.configPath.path);\n        let folderpath = workspaceIdentifier.configPath.fsPath;\n        if (folderpath.endsWith(filename)) {\n            folderpath = folderpath.substr(0, folderpath.length - filename.length - 1);\n        }\n        return (folderpath ? normalizeDriveLetter(folderpath) : '/');\n    }\n}\nexport class RandomBasedVariableResolver {\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'RANDOM') {\n            return Math.random().toString().slice(-6);\n        }\n        else if (name === 'RANDOM_HEX') {\n            return Math.random().toString(16).slice(-6);\n        }\n        else if (name === 'UUID') {\n            return generateUuid();\n        }\n        return undefined;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar SnippetSession_1;\nimport { groupBy } from '../../../../base/common/arrays.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace } from '../../../../base/common/strings.js';\nimport './snippetSession.css';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { Choice, Placeholder, SnippetParser, Text, TextmateSnippet } from './snippetParser.js';\nimport { ClipboardBasedVariableResolver, CommentBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, RandomBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, WorkspaceBasedVariableResolver } from './snippetVariables.js';\nexport class OneSnippet {\n    constructor(_editor, _snippet, _snippetLineLeadingWhitespace) {\n        this._editor = _editor;\n        this._snippet = _snippet;\n        this._snippetLineLeadingWhitespace = _snippetLineLeadingWhitespace;\n        this._offset = -1;\n        this._nestingLevel = 1;\n        this._placeholderGroups = groupBy(_snippet.placeholders, Placeholder.compareByIndex);\n        this._placeholderGroupsIdx = -1;\n    }\n    initialize(textChange) {\n        this._offset = textChange.newPosition;\n    }\n    dispose() {\n        if (this._placeholderDecorations) {\n            this._editor.removeDecorations([...this._placeholderDecorations.values()]);\n        }\n        this._placeholderGroups.length = 0;\n    }\n    _initDecorations() {\n        if (this._offset === -1) {\n            throw new Error(`Snippet not initialized!`);\n        }\n        if (this._placeholderDecorations) {\n            // already initialized\n            return;\n        }\n        this._placeholderDecorations = new Map();\n        const model = this._editor.getModel();\n        this._editor.changeDecorations(accessor => {\n            // create a decoration for each placeholder\n            for (const placeholder of this._snippet.placeholders) {\n                const placeholderOffset = this._snippet.offset(placeholder);\n                const placeholderLen = this._snippet.fullLen(placeholder);\n                const range = Range.fromPositions(model.getPositionAt(this._offset + placeholderOffset), model.getPositionAt(this._offset + placeholderOffset + placeholderLen));\n                const options = placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive;\n                const handle = accessor.addDecoration(range, options);\n                this._placeholderDecorations.set(placeholder, handle);\n            }\n        });\n    }\n    move(fwd) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this._initDecorations();\n        // Transform placeholder text if necessary\n        if (this._placeholderGroupsIdx >= 0) {\n            const operations = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                // Check if the placeholder has a transformation\n                if (placeholder.transform) {\n                    const id = this._placeholderDecorations.get(placeholder);\n                    const range = this._editor.getModel().getDecorationRange(id);\n                    const currentValue = this._editor.getModel().getValueInRange(range);\n                    const transformedValueLines = placeholder.transform.resolve(currentValue).split(/\\r\\n|\\r|\\n/);\n                    // fix indentation for transformed lines\n                    for (let i = 1; i < transformedValueLines.length; i++) {\n                        transformedValueLines[i] = this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace + transformedValueLines[i]);\n                    }\n                    operations.push(EditOperation.replace(range, transformedValueLines.join(this._editor.getModel().getEOL())));\n                }\n            }\n            if (operations.length > 0) {\n                this._editor.executeEdits('snippet.placeholderTransform', operations);\n            }\n        }\n        let couldSkipThisPlaceholder = false;\n        if (fwd === true && this._placeholderGroupsIdx < this._placeholderGroups.length - 1) {\n            this._placeholderGroupsIdx += 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else if (fwd === false && this._placeholderGroupsIdx > 0) {\n            this._placeholderGroupsIdx -= 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else {\n            // the selection of the current placeholder might\n            // not acurate any more -> simply restore it\n        }\n        const newSelections = this._editor.getModel().changeDecorations(accessor => {\n            const activePlaceholders = new Set();\n            // change stickiness to always grow when typing at its edges\n            // because these decorations represent the currently active\n            // tabstop.\n            // Special case #1: reaching the final tabstop\n            // Special case #2: placeholders enclosing active placeholders\n            const selections = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                selections.push(new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn));\n                // consider to skip this placeholder index when the decoration\n                // range is empty but when the placeholder wasn't. that's a strong\n                // hint that the placeholder has been deleted. (all placeholder must match this)\n                couldSkipThisPlaceholder = couldSkipThisPlaceholder && this._hasPlaceholderBeenCollapsed(placeholder);\n                accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                activePlaceholders.add(placeholder);\n                for (const enclosingPlaceholder of this._snippet.enclosingPlaceholders(placeholder)) {\n                    const id = this._placeholderDecorations.get(enclosingPlaceholder);\n                    accessor.changeDecorationOptions(id, enclosingPlaceholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                    activePlaceholders.add(enclosingPlaceholder);\n                }\n            }\n            // change stickness to never grow when typing at its edges\n            // so that in-active tabstops never grow\n            for (const [placeholder, id] of this._placeholderDecorations) {\n                if (!activePlaceholders.has(placeholder)) {\n                    accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive);\n                }\n            }\n            return selections;\n        });\n        return !couldSkipThisPlaceholder ? newSelections !== null && newSelections !== void 0 ? newSelections : [] : this.move(fwd);\n    }\n    _hasPlaceholderBeenCollapsed(placeholder) {\n        // A placeholder is empty when it wasn't empty when authored but\n        // when its tracking decoration is empty. This also applies to all\n        // potential parent placeholders\n        let marker = placeholder;\n        while (marker) {\n            if (marker instanceof Placeholder) {\n                const id = this._placeholderDecorations.get(marker);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (range.isEmpty() && marker.toString().length > 0) {\n                    return true;\n                }\n            }\n            marker = marker.parent;\n        }\n        return false;\n    }\n    get isAtFirstPlaceholder() {\n        return this._placeholderGroupsIdx <= 0 || this._placeholderGroups.length === 0;\n    }\n    get isAtLastPlaceholder() {\n        return this._placeholderGroupsIdx === this._placeholderGroups.length - 1;\n    }\n    get hasPlaceholder() {\n        return this._snippet.placeholders.length > 0;\n    }\n    /**\n     * A snippet is trivial when it has no placeholder or only a final placeholder at\n     * its very end\n     */\n    get isTrivialSnippet() {\n        if (this._snippet.placeholders.length === 0) {\n            return true;\n        }\n        if (this._snippet.placeholders.length === 1) {\n            const [placeholder] = this._snippet.placeholders;\n            if (placeholder.isFinalTabstop) {\n                if (this._snippet.rightMostDescendant === placeholder) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    computePossibleSelections() {\n        const result = new Map();\n        for (const placeholdersWithEqualIndex of this._placeholderGroups) {\n            let ranges;\n            for (const placeholder of placeholdersWithEqualIndex) {\n                if (placeholder.isFinalTabstop) {\n                    // ignore those\n                    break;\n                }\n                if (!ranges) {\n                    ranges = [];\n                    result.set(placeholder.index, ranges);\n                }\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (!range) {\n                    // one of the placeholder lost its decoration and\n                    // therefore we bail out and pretend the placeholder\n                    // (with its mirrors) doesn't exist anymore.\n                    result.delete(placeholder.index);\n                    break;\n                }\n                ranges.push(range);\n            }\n        }\n        return result;\n    }\n    get activeChoice() {\n        if (!this._placeholderDecorations) {\n            return undefined;\n        }\n        const placeholder = this._placeholderGroups[this._placeholderGroupsIdx][0];\n        if (!(placeholder === null || placeholder === void 0 ? void 0 : placeholder.choice)) {\n            return undefined;\n        }\n        const id = this._placeholderDecorations.get(placeholder);\n        if (!id) {\n            return undefined;\n        }\n        const range = this._editor.getModel().getDecorationRange(id);\n        if (!range) {\n            return undefined;\n        }\n        return { range, choice: placeholder.choice };\n    }\n    get hasChoice() {\n        let result = false;\n        this._snippet.walk(marker => {\n            result = marker instanceof Choice;\n            return !result;\n        });\n        return result;\n    }\n    merge(others) {\n        const model = this._editor.getModel();\n        this._nestingLevel *= 10;\n        this._editor.changeDecorations(accessor => {\n            // For each active placeholder take one snippet and merge it\n            // in that the placeholder (can be many for `$1foo$1foo`). Because\n            // everything is sorted by editor selection we can simply remove\n            // elements from the beginning of the array\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const nested = others.shift();\n                console.assert(nested._offset !== -1);\n                console.assert(!nested._placeholderDecorations);\n                // Massage placeholder-indicies of the nested snippet to be\n                // sorted right after the insertion point. This ensures we move\n                // through the placeholders in the correct order\n                const indexLastPlaceholder = nested._snippet.placeholderInfo.last.index;\n                for (const nestedPlaceholder of nested._snippet.placeholderInfo.all) {\n                    if (nestedPlaceholder.isFinalTabstop) {\n                        nestedPlaceholder.index = placeholder.index + ((indexLastPlaceholder + 1) / this._nestingLevel);\n                    }\n                    else {\n                        nestedPlaceholder.index = placeholder.index + (nestedPlaceholder.index / this._nestingLevel);\n                    }\n                }\n                this._snippet.replace(placeholder, nested._snippet.children);\n                // Remove the placeholder at which position are inserting\n                // the snippet and also remove its decoration.\n                const id = this._placeholderDecorations.get(placeholder);\n                accessor.removeDecoration(id);\n                this._placeholderDecorations.delete(placeholder);\n                // For each *new* placeholder we create decoration to monitor\n                // how and if it grows/shrinks.\n                for (const placeholder of nested._snippet.placeholders) {\n                    const placeholderOffset = nested._snippet.offset(placeholder);\n                    const placeholderLen = nested._snippet.fullLen(placeholder);\n                    const range = Range.fromPositions(model.getPositionAt(nested._offset + placeholderOffset), model.getPositionAt(nested._offset + placeholderOffset + placeholderLen));\n                    const handle = accessor.addDecoration(range, OneSnippet._decor.inactive);\n                    this._placeholderDecorations.set(placeholder, handle);\n                }\n            }\n            // Last, re-create the placeholder groups by sorting placeholders by their index.\n            this._placeholderGroups = groupBy(this._snippet.placeholders, Placeholder.compareByIndex);\n        });\n    }\n}\nOneSnippet._decor = {\n    active: ModelDecorationOptions.register({ description: 'snippet-placeholder-1', stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    inactive: ModelDecorationOptions.register({ description: 'snippet-placeholder-2', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    activeFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-3', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n    inactiveFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-4', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n};\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nlet SnippetSession = SnippetSession_1 = class SnippetSession {\n    static adjustWhitespace(model, position, adjustIndentation, snippet, filter) {\n        const line = model.getLineContent(position.lineNumber);\n        const lineLeadingWhitespace = getLeadingWhitespace(line, 0, position.column - 1);\n        // the snippet as inserted\n        let snippetTextString;\n        snippet.walk(marker => {\n            // all text elements that are not inside choice\n            if (!(marker instanceof Text) || marker.parent instanceof Choice) {\n                return true;\n            }\n            // check with filter (iff provided)\n            if (filter && !filter.has(marker)) {\n                return true;\n            }\n            const lines = marker.value.split(/\\r\\n|\\r|\\n/);\n            if (adjustIndentation) {\n                // adjust indentation of snippet test\n                // -the snippet-start doesn't get extra-indented (lineLeadingWhitespace), only normalized\n                // -all N+1 lines get extra-indented and normalized\n                // -the text start get extra-indented and normalized when following a linebreak\n                const offset = snippet.offset(marker);\n                if (offset === 0) {\n                    // snippet start\n                    lines[0] = model.normalizeIndentation(lines[0]);\n                }\n                else {\n                    // check if text start is after a linebreak\n                    snippetTextString = snippetTextString !== null && snippetTextString !== void 0 ? snippetTextString : snippet.toString();\n                    const prevChar = snippetTextString.charCodeAt(offset - 1);\n                    if (prevChar === 10 /* CharCode.LineFeed */ || prevChar === 13 /* CharCode.CarriageReturn */) {\n                        lines[0] = model.normalizeIndentation(lineLeadingWhitespace + lines[0]);\n                    }\n                }\n                for (let i = 1; i < lines.length; i++) {\n                    lines[i] = model.normalizeIndentation(lineLeadingWhitespace + lines[i]);\n                }\n            }\n            const newValue = lines.join(model.getEOL());\n            if (newValue !== marker.value) {\n                marker.parent.replace(marker, [new Text(newValue)]);\n                snippetTextString = undefined;\n            }\n            return true;\n        });\n        return lineLeadingWhitespace;\n    }\n    static adjustSelection(model, selection, overwriteBefore, overwriteAfter) {\n        if (overwriteBefore !== 0 || overwriteAfter !== 0) {\n            // overwrite[Before|After] is compute using the position, not the whole\n            // selection. therefore we adjust the selection around that position\n            const { positionLineNumber, positionColumn } = selection;\n            const positionColumnBefore = positionColumn - overwriteBefore;\n            const positionColumnAfter = positionColumn + overwriteAfter;\n            const range = model.validateRange({\n                startLineNumber: positionLineNumber,\n                startColumn: positionColumnBefore,\n                endLineNumber: positionLineNumber,\n                endColumn: positionColumnAfter\n            });\n            selection = Selection.createWithDirection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn, selection.getDirection());\n        }\n        return selection;\n    }\n    static createEditsAndSnippetsFromSelections(editor, template, overwriteBefore, overwriteAfter, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\n        const edits = [];\n        const snippets = [];\n        if (!editor.hasModel()) {\n            return { edits, snippets };\n        }\n        const model = editor.getModel();\n        const workspaceService = editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService));\n        const modelBasedVariableResolver = editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model));\n        const readClipboardText = () => clipboardText;\n        // know what text the overwrite[Before|After] extensions\n        // of the primary curser have selected because only when\n        // secondary selections extend to the same text we can grow them\n        const firstBeforeText = model.getValueInRange(SnippetSession_1.adjustSelection(model, editor.getSelection(), overwriteBefore, 0));\n        const firstAfterText = model.getValueInRange(SnippetSession_1.adjustSelection(model, editor.getSelection(), 0, overwriteAfter));\n        // remember the first non-whitespace column to decide if\n        // `keepWhitespace` should be overruled for secondary selections\n        const firstLineFirstNonWhitespace = model.getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber);\n        // sort selections by their start position but remeber\n        // the original index. that allows you to create correct\n        // offset-based selection logic without changing the\n        // primary selection\n        const indexedSelections = editor.getSelections()\n            .map((selection, idx) => ({ selection, idx }))\n            .sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        for (const { selection, idx } of indexedSelections) {\n            // extend selection with the `overwriteBefore` and `overwriteAfter` and then\n            // compare if this matches the extensions of the primary selection\n            let extensionBefore = SnippetSession_1.adjustSelection(model, selection, overwriteBefore, 0);\n            let extensionAfter = SnippetSession_1.adjustSelection(model, selection, 0, overwriteAfter);\n            if (firstBeforeText !== model.getValueInRange(extensionBefore)) {\n                extensionBefore = selection;\n            }\n            if (firstAfterText !== model.getValueInRange(extensionAfter)) {\n                extensionAfter = selection;\n            }\n            // merge the before and after selection into one\n            const snippetSelection = selection\n                .setStartPosition(extensionBefore.startLineNumber, extensionBefore.startColumn)\n                .setEndPosition(extensionAfter.endLineNumber, extensionAfter.endColumn);\n            const snippet = new SnippetParser().parse(template, true, enforceFinalTabstop);\n            // adjust the template string to match the indentation and\n            // whitespace rules of this insert location (can be different for each cursor)\n            // happens when being asked for (default) or when this is a secondary\n            // cursor and the leading whitespace is different\n            const start = snippetSelection.getStartPosition();\n            const snippetLineLeadingWhitespace = SnippetSession_1.adjustWhitespace(model, start, adjustWhitespace || (idx > 0 && firstLineFirstNonWhitespace !== model.getLineFirstNonWhitespaceColumn(selection.positionLineNumber)), snippet);\n            snippet.resolveVariables(new CompositeSnippetVariableResolver([\n                modelBasedVariableResolver,\n                new ClipboardBasedVariableResolver(readClipboardText, idx, indexedSelections.length, editor.getOption(78 /* EditorOption.multiCursorPaste */) === 'spread'),\n                new SelectionBasedVariableResolver(model, selection, idx, overtypingCapturer),\n                new CommentBasedVariableResolver(model, selection, languageConfigurationService),\n                new TimeBasedVariableResolver,\n                new WorkspaceBasedVariableResolver(workspaceService),\n                new RandomBasedVariableResolver,\n            ]));\n            // store snippets with the index of their originating selection.\n            // that ensures the primiary cursor stays primary despite not being\n            // the one with lowest start position\n            edits[idx] = EditOperation.replace(snippetSelection, snippet.toString());\n            edits[idx].identifier = { major: idx, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\n            edits[idx]._isTracked = true;\n            snippets[idx] = new OneSnippet(editor, snippet, snippetLineLeadingWhitespace);\n        }\n        return { edits, snippets };\n    }\n    static createEditsAndSnippetsFromEdits(editor, snippetEdits, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\n        if (!editor.hasModel() || snippetEdits.length === 0) {\n            return { edits: [], snippets: [] };\n        }\n        const edits = [];\n        const model = editor.getModel();\n        const parser = new SnippetParser();\n        const snippet = new TextmateSnippet();\n        // snippet variables resolver\n        const resolver = new CompositeSnippetVariableResolver([\n            editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model)),\n            new ClipboardBasedVariableResolver(() => clipboardText, 0, editor.getSelections().length, editor.getOption(78 /* EditorOption.multiCursorPaste */) === 'spread'),\n            new SelectionBasedVariableResolver(model, editor.getSelection(), 0, overtypingCapturer),\n            new CommentBasedVariableResolver(model, editor.getSelection(), languageConfigurationService),\n            new TimeBasedVariableResolver,\n            new WorkspaceBasedVariableResolver(editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService))),\n            new RandomBasedVariableResolver,\n        ]);\n        //\n        snippetEdits = snippetEdits.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n        let offset = 0;\n        for (let i = 0; i < snippetEdits.length; i++) {\n            const { range, template } = snippetEdits[i];\n            // gaps between snippet edits are appended as text nodes. this\n            // ensures placeholder-offsets are later correct\n            if (i > 0) {\n                const lastRange = snippetEdits[i - 1].range;\n                const textRange = Range.fromPositions(lastRange.getEndPosition(), range.getStartPosition());\n                const textNode = new Text(model.getValueInRange(textRange));\n                snippet.appendChild(textNode);\n                offset += textNode.value.length;\n            }\n            const newNodes = parser.parseFragment(template, snippet);\n            SnippetSession_1.adjustWhitespace(model, range.getStartPosition(), true, snippet, new Set(newNodes));\n            snippet.resolveVariables(resolver);\n            const snippetText = snippet.toString();\n            const snippetFragmentText = snippetText.slice(offset);\n            offset = snippetText.length;\n            // make edit\n            const edit = EditOperation.replace(range, snippetFragmentText);\n            edit.identifier = { major: i, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\n            edit._isTracked = true;\n            edits.push(edit);\n        }\n        //\n        parser.ensureFinalTabstop(snippet, enforceFinalTabstop, true);\n        return {\n            edits,\n            snippets: [new OneSnippet(editor, snippet, '')]\n        };\n    }\n    constructor(_editor, _template, _options = _defaultOptions, _languageConfigurationService) {\n        this._editor = _editor;\n        this._template = _template;\n        this._options = _options;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._templateMerges = [];\n        this._snippets = [];\n    }\n    dispose() {\n        dispose(this._snippets);\n    }\n    _logInfo() {\n        return `template=\"${this._template}\", merged_templates=\"${this._templateMerges.join(' -> ')}\"`;\n    }\n    insert() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // make insert edit and start with first selections\n        const { edits, snippets } = typeof this._template === 'string'\n            ? SnippetSession_1.createEditsAndSnippetsFromSelections(this._editor, this._template, this._options.overwriteBefore, this._options.overwriteAfter, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService)\n            : SnippetSession_1.createEditsAndSnippetsFromEdits(this._editor, this._template, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService);\n        this._snippets = snippets;\n        this._editor.executeEdits('snippet', edits, _undoEdits => {\n            // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\n            // so we need to look only at the undo edits relevant for us.\n            // Our edits have an identifier set so that's how we can distinguish them\n            const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\n            for (let idx = 0; idx < snippets.length; idx++) {\n                snippets[idx].initialize(undoEdits[idx].textChange);\n            }\n            if (this._snippets[0].hasPlaceholder) {\n                return this._move(true);\n            }\n            else {\n                return undoEdits\n                    .map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n            }\n        });\n        this._editor.revealRange(this._editor.getSelections()[0]);\n    }\n    merge(template, options = _defaultOptions) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._templateMerges.push([this._snippets[0]._nestingLevel, this._snippets[0]._placeholderGroupsIdx, template]);\n        const { edits, snippets } = SnippetSession_1.createEditsAndSnippetsFromSelections(this._editor, template, options.overwriteBefore, options.overwriteAfter, true, options.adjustWhitespace, options.clipboardText, options.overtypingCapturer, this._languageConfigurationService);\n        this._editor.executeEdits('snippet', edits, _undoEdits => {\n            // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\n            // so we need to look only at the undo edits relevant for us.\n            // Our edits have an identifier set so that's how we can distinguish them\n            const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\n            for (let idx = 0; idx < snippets.length; idx++) {\n                snippets[idx].initialize(undoEdits[idx].textChange);\n            }\n            // Trivial snippets have no placeholder or are just the final placeholder. That means they\n            // are just text insertions and we don't need to merge the nested snippet into the existing\n            // snippet\n            const isTrivialSnippet = snippets[0].isTrivialSnippet;\n            if (!isTrivialSnippet) {\n                for (const snippet of this._snippets) {\n                    snippet.merge(snippets);\n                }\n                console.assert(snippets.length === 0);\n            }\n            if (this._snippets[0].hasPlaceholder && !isTrivialSnippet) {\n                return this._move(undefined);\n            }\n            else {\n                return undoEdits.map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n            }\n        });\n    }\n    next() {\n        const newSelections = this._move(true);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    prev() {\n        const newSelections = this._move(false);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    _move(fwd) {\n        const selections = [];\n        for (const snippet of this._snippets) {\n            const oneSelection = snippet.move(fwd);\n            selections.push(...oneSelection);\n        }\n        return selections;\n    }\n    get isAtFirstPlaceholder() {\n        return this._snippets[0].isAtFirstPlaceholder;\n    }\n    get isAtLastPlaceholder() {\n        return this._snippets[0].isAtLastPlaceholder;\n    }\n    get hasPlaceholder() {\n        return this._snippets[0].hasPlaceholder;\n    }\n    get hasChoice() {\n        return this._snippets[0].hasChoice;\n    }\n    get activeChoice() {\n        return this._snippets[0].activeChoice;\n    }\n    isSelectionWithinPlaceholders() {\n        if (!this.hasPlaceholder) {\n            return false;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length < this._snippets.length) {\n            // this means we started snippet mode with N\n            // selections and have M (N > M) selections.\n            // So one snippet is without selection -> cancel\n            return false;\n        }\n        const allPossibleSelections = new Map();\n        for (const snippet of this._snippets) {\n            const possibleSelections = snippet.computePossibleSelections();\n            // for the first snippet find the placeholder (and its ranges)\n            // that contain at least one selection. for all remaining snippets\n            // the same placeholder (and their ranges) must be used.\n            if (allPossibleSelections.size === 0) {\n                for (const [index, ranges] of possibleSelections) {\n                    ranges.sort(Range.compareRangesUsingStarts);\n                    for (const selection of selections) {\n                        if (ranges[0].containsRange(selection)) {\n                            allPossibleSelections.set(index, []);\n                            break;\n                        }\n                    }\n                }\n            }\n            if (allPossibleSelections.size === 0) {\n                // return false if we couldn't associate a selection to\n                // this (the first) snippet\n                return false;\n            }\n            // add selections from 'this' snippet so that we know all\n            // selections for this placeholder\n            allPossibleSelections.forEach((array, index) => {\n                array.push(...possibleSelections.get(index));\n            });\n        }\n        // sort selections (and later placeholder-ranges). then walk both\n        // arrays and make sure the placeholder-ranges contain the corresponding\n        // selection\n        selections.sort(Range.compareRangesUsingStarts);\n        for (const [index, ranges] of allPossibleSelections) {\n            if (ranges.length !== selections.length) {\n                allPossibleSelections.delete(index);\n                continue;\n            }\n            ranges.sort(Range.compareRangesUsingStarts);\n            for (let i = 0; i < ranges.length; i++) {\n                if (!ranges[i].containsRange(selections[i])) {\n                    allPossibleSelections.delete(index);\n                    continue;\n                }\n            }\n        }\n        // from all possible selections we have deleted those\n        // that don't match with the current selection. if we don't\n        // have any left, we don't have a selection anymore\n        return allPossibleSelections.size > 0;\n    }\n};\nSnippetSession = SnippetSession_1 = __decorate([\n    __param(3, ILanguageConfigurationService)\n], SnippetSession);\nexport { SnippetSession };\n"],"names":["AbstractEditorCommandsQuickAccessProvider","_AbstractCommandsQuic","_inherits","_super","_createSuper","options","instantiationService","keybindingService","commandService","telemetryService","dialogService","_classCallCheck","call","_createClass","key","value","activeTextEditorControl","this","_step","editorCommandPicks","_iterator","_createForOfIteratorHelper","getSupportedActions","s","n","done","editorAction","push","commandId","id","commandAlias","alias","label","stripIcons","err","e","f","AbstractCommandsQuickAccessProvider","AbstractEditorNavigationQuickAccessProvider","rangeHighlightDecorationId","undefined","picker","token","_a","_this","disposables","DisposableStore","canAcceptInBackground","matchOnLabel","matchOnDescription","matchOnDetail","sortByLabel","pickerDisposable","add","MutableDisposable","doProvide","onDidActiveTextEditorControlChange","_this2","editor","canProvideWithTextEditor","context","codeEditor","getCodeEditor","lastKnownEditorViewState","saveViewState","onDidChangeCursorPosition","restoreViewState","createSingleCallFunction","onCancellationRequested","toDisposable","clearDecorations","provideWithTextEditor","provideWithoutTextEditor","_ref","setSelection","range","revealRangeInCenter","preserveFocus","focus","model","getModel","status","concat","getLineContent","startLineNumber","isDiffEditor","modified","_this3","changeDecorations","changeAccessor","deleteDecorations","overviewRulerDecorationId","rangeHighlightId","newDecorations","description","className","isWholeLine","overviewRuler","color","themeColorFromId","overviewRulerRangeHighlight","position","OverviewRulerLane","Full","_changeAccessor$delta","deltaDecorations","_changeAccessor$delta2","_slicedToArray","AbstractGotoLineQuickAccessProvider","_AbstractEditorNaviga","localize","items","ariaLabel","Disposable","None","onDidAccept","event","item","selectedItems","isValidLineNumber","lineNumber","gotoLocation","toRange","column","keyMods","inBackground","hide","updatePickerAndEditor","parsePosition","trim","substr","PREFIX","length","getPickLabel","addDecorations","onDidChangeValue","getOptions","get","renderType","updateOptions","lineNumbers","arguments","startColumn","endLineNumber","endColumn","numbers","split","map","part","parseInt","filter","isNaN","endLine","lineCount","isValidColumn","getPosition","positionCandidate","validatePosition","equals","_b","getLineCount","AbstractGotoSymbolQuickAccessProvider_1","__decorate","decorators","target","desc","d","c","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","then","apply","AbstractGotoSymbolQuickAccessProvider","_languageFeaturesService","_outlineModelService","create","provideLabelPick","documentSymbolProvider","has","doProvideWithEditorSymbols","doProvideWithoutEditorSymbols","_regeneratorRuntime","mark","_callee","wrap","_context","prev","waitForLanguageSymbolRegistry","sent","isCancellationRequested","abrupt","stop","index","kind","_callee2","symbolProviderRegistryPromise","symbolProviderListener","_context2","DeferredPromise","onDidChange","dispose","complete","p","_this4","selection","onDidTriggerItemButton","forceSideBySide","symbolsPromise","getDocumentSymbols","picksCts","updatePickerItems","positionToEnclose","_callee3","query","candidate","_context3","busy","CancellationTokenSource","prepareQuery","doGetSymbolPicks","original","findLast","Boolean","type","Range","containsPosition","decoration","activeItems","finish","getSelection","onDidChangeActive","_callee4","symbols","filterBySymbolKind","filterPos","symbolQuery","containerQuery","buttons","openSideBySideDirection","filteredSymbolPicks","symbol","symbolLabel","symbolLabelWithIcon","symbolLabelIconOffset","containerLabel","symbolScore","symbolMatches","containerScore","containerMatches","skipContainerQuery","_scoreFuzzy","_scoreFuzzy2","_scoreFuzzy3","_scoreFuzzy4","_scoreFuzzy5","_scoreFuzzy6","deprecated","sortedFilteredSymbolPicks","symbolPicks","updateLastSeparatorLabel","lastSymbolKind","lastSeparator","lastSymbolKindCounter","symbolPick","_this5","_context4","indexOf","SCOPE_PREFIX","values","pieceToQuery","slice","iconClass","ThemeIcon","asClassName","Codicon","splitHorizontal","splitVertical","tooltip","name","SymbolKinds","toIcon","containerName","extraContainerLabel","scoreFuzzy2","assign","tags","score","getAriaLabelForSymbol","highlights","collapseToStart","selectionRange","strikethrough","sort","symbolA","symbolB","compareByKindAndScore","compareByScore","format","NLS_SYMBOL_KIND_CACHE","FALLBACK_NLS_SYMBOL_KIND","_toConsumableArray","kindA","kindB","localeCompare","document","_callee5","_context5","getOrCreate","asListOfDocumentSymbols","PREFIX_BY_CATEGORY","ILanguageFeaturesService","IOutlineModelService","_NLS_SYMBOL_KIND_CACH","_defineProperty","ReadOnlyMessageController","_Disposable","_register","onDidAttemptReadOnlyEdit","_onDidAttemptReadOnlyEdit","messageController","MessageController","hasModel","message","isSimpleWidget","MarkdownString","nls","showMessage","ID","registerEditorContribution","CONTEXT_RENAME_INPUT_VISIBLE","RawContextKey","RenameInputField","_editor","_acceptKeybindings","_themeService","_keybindingService","contextKeyService","_disposables","allowEditorOverflow","_visibleContextKey","bindTo","addContentWidget","onDidChangeConfiguration","hasChanged","_updateFont","onDidColorThemeChange","_updateStyles","removeContentWidget","_domNode","createElement","_input","setAttribute","appendChild","_label","getColorTheme","theme","_c","_d","widgetShadowColor","getColor","widgetShadow","widgetBorderColor","widgetBorder","style","backgroundColor","String","editorWidgetBackground","boxShadow","border","inputForeground","inputBackground","inputBorder","borderWidth","borderStyle","borderColor","toString","fontInfo","getOption","fontFamily","fontWeight","fontSize","_visible","_position","preference","_this$_acceptKeybindi","accept","preview","innerText","comment","lookupKeybinding","getLabel","cancelInput","wantsPreview","_currentAcceptInput","focusEditor","_currentCancelInput","where","selectionStart","selectionEnd","supportPreview","classList","toggle","Position","size","Math","max","disposeOnDone","newName","onDidBlurEditorWidget","ownerDocument","hasFocus","_show","finally","_hide","revealLineInCenterIfOutsideViewport","set","layoutContentWidget","setTimeout","setSelectionRange","getAttribute","reset","IThemeService","IKeybindingService","IContextKeyService","RenameController_1","RenameSkeleton","registry","_providerRenameIdx","_providers","ordered","rejects","provider","res","word","resolveRenameLocation","rejectReason","getWordAtPosition","fromPositions","text","join","_provideRenameEdits","edits","provideRenameEdits","rename","skeleton","loc","CancellationToken","RenameController","_instaService","_notificationService","_bulkEditService","_progressService","_logService","_configService","_disposableStore","_cts","_renameInputField","createInstance","_callee6","cts1","resolveLocationOperation","cts2","inputFieldResult","renameOperation","_context6","renameProvider","hasProvider","EditorStateCancellationTokenSource","showWhile","t0","isEmpty","spansMultipleLines","containsRange","min","hasPreviewHandler","getValue","uri","getInput","raceCancellation","renameResult","info","showPreview","code","quotableLabel","respectAutoSaveConfig","ariaSummary","alert","catch","error","acceptInput","getContribution","IInstantiationService","INotificationService","IBulkEditService","IEditorProgressService","ILogService","ITextResourceConfigurationService","RenameAction","_EditorAction","precondition","ContextKeyExpr","and","EditorContextKeys","writable","hasRenameProvider","kbOpts","kbExpr","editorTextFocus","primary","weight","contextMenuOpts","group","order","accessor","args","editorService","ICodeEditorService","Array","isArray","_ref2","pos","URI","isUri","isIPosition","openCodeEditor","resource","getActiveCodeEditor","setPosition","invokeWithinContext","reportTelemetry","run","onUnexpectedError","_get","_getPrototypeOf","prototype","controller","EditorAction","registerEditorAction","RenameCommand","EditorCommand","bindToContribution","registerEditorCommand","handler","x","acceptRenameInput","not","cancelRenameInput","secondary","registerModelAndPositionCommand","_len","_key","assertType","_callee7","_accessor$get2","_context7","Error","Registry","as","Extensions","Configuration","registerConfiguration","properties","scope","default","ModelSemanticColoring_1","DocumentSemanticTokensFeature","semanticTokensStylingService","modelService","themeService","configurationService","languageFeatureDebounceService","languageFeaturesService","_watchers","register","ModelSemanticColoring","deregister","modelSemanticColoring","handleSettingOrThemeChange","getModels","curr","isSemanticColoringEnabled","onModelAdded","onModelRemoved","affectsConfiguration","SEMANTIC_HIGHLIGHTING_SETTING_ID","_i","_Object$values","ISemanticTokensStylingService","IModelService","IConfigurationService","ILanguageFeatureDebounceService","_Disposable2","_super2","_semanticTokensStylingService","_isDisposed","_model","_provider","documentSemanticTokensProvider","_debounceInformation","for","REQUEST_MIN_DELAY","REQUEST_MAX_DELAY","_fetchDocumentSemanticTokens","RunOnceScheduler","_fetchDocumentSemanticTokensNow","_currentDocumentResponse","_currentDocumentRequestCancellationTokenSource","_documentProvidersChangeListeners","_providersChangedDuringRequest","onDidChangeContent","isScheduled","schedule","onDidChangeAttached","onDidChangeLanguage","cancel","_setDocumentSemanticTokens","bindDocumentChangeListeners","_step2","_iterator2","all","_","hasDocumentSemanticTokensProvider","isAttachedToEditor","cancellationTokenSource","lastProvider","lastResultId","resultId","request","getDocumentSemanticTokens","pendingChanges","contentChangeListener","sw","StopWatch","update","elapsed","tokens","styling","getStyling","errors","tokenization","setSemanticTokens","currentResponse","rescheduleIfNeeded","releaseDocumentSemanticTokens","isSemanticTokensEdits","data","_step3","deltaLength","_iterator3","edit","deleteCount","srcData","destData","Uint32Array","srcLastStart","destLastStart","start","warnInvalidEditStart","copyCount","_copy","isSemanticTokens","SemanticTokensResponse","toMultilineTokens2","getLanguageId","_step4","_iterator4","_step5","change","_iterator5","_step6","area","_iterator6","changes","singleChange","applyEdit","src","srcOffset","dest","destOffset","registerEditorFeature","ViewportSemanticTokensContribution","_configurationService","documentRangeSemanticTokensProvider","_tokenizeViewport","_tokenizeViewportNow","_outstandingRequests","scheduleTokenizeViewport","onDidScrollChange","onDidChangeModel","_cancelAll","onDidChangeModelContent","req","len","splice","hasCompleteSemanticTokens","hasDocumentRangeSemanticTokensProvider","visibleRanges","getVisibleRangesPlusViewportAboveBelow","_requestRange","hasSomeSemanticTokens","requestVersionId","getVersionId","createCancelablePromise","getDocumentRangeSemanticTokens","isDisposed","setPartialSemanticTokens","_removeOutstandingRequest","v","DocumentSemanticTokensResult","getDocumentSemanticTokensProviders","groups","orderedGroups","providers","results","provideDocumentSemanticTokens","_getDocumentSemanticTokensProviderHighestGroup","DocumentRangeSemanticTokensResult","getDocumentRangeSemanticTokensProviders","provideDocumentRangeSemanticTokens","onUnexpectedExternalError","CommandsRegistry","registerCommand","_accessor$get","ICommandService","executeCommand","getLegend","_len2","_key2","buff","getFullModelRange","encodeSemanticTokensDto","_len3","_key3","_accessor$get3","isIRange","console","warn","lift","_len4","_key4","_callee8","_accessor$get4","_context8","setting","overrideIdentifier","enabled","semanticHighlighting","BracketSelectionRangeProvider","positions","_loop","bucket","ranges","Map","_bracketsRightYield","_bracketsLeftYield","delegateYield","t1","round","counts","Date","now","_maxRounds","bracket","bracketPairs","findNextBracket","_maxDuration","bracketInfo","isOpeningBracket","bracketText","val","getOpeningBrackets","list","LinkedList","getEndPosition","findPrevBracket","closing","shift","delete","innerBracket","getStartPosition","outerBracket","_addBracketLeading","startLine","getLineFirstNonWhitespaceColumn","aboveLine","getLineLastNonWhitespaceColumn","SmartSelectController_1","WordSelectionRangeProvider","selectSubwords","_addInWordRanges","_addWordRanges","_addWhitespaceLine","obj","offset","end","lastCh","ch","charCodeAt","isLowerAsciiLetter","isUpperAsciiLetter","getLineLength","getLineMaxColumn","SelectionRanges","fwd","equalsRange","mov","SmartSelectController","_ignoreSelection","_selectionListener","forward","selections","newSelections","getSelections","_state","provideSelectionRanges","selectionRangeProvider","arrays","a","b","equalsSelection","unshift","state","Selection","setSelections","AbstractSmartSelect","opts","_forward","_accessor","GrowSelectionAction","_AbstractSmartSelect","mac","menuOpts","menuId","MenuId","MenubarSelectionMenu","title","registerCommandAlias","ShrinkSelectionAction","_AbstractSmartSelect2","_super3","work","allRawRanges","allProviderRanges","oneProviderRanges","oneRawRanges","isBefore","last","oneRanges","selectLeadingAndTrailingWhitespace","oneRangesWithTrivia","cur","rangeNoWhitespace","rangeFull","reference","ITextModelService","createModelReference","object","textEditorModel","SnippetController2_1","_defaultOptions","overwriteBefore","overwriteAfter","undoStopBefore","undoStopAfter","adjustWhitespace","clipboardText","overtypingCapturer","SnippetController2","_languageConfigurationService","_snippetListener","_modelVersionId","_inSnippet","InSnippetMode","_hasNextTabstop","HasNextTabstop","_hasPrevTabstop","HasPrevTabstop","_session","template","_doInsert","_logInfo","clear","pushStackElement","merge","getAlternativeVersionId","SnippetSession","insert","hasChoice","registration","_debugDisplayName","provideCompletionItems","activeChoice","choice","getValueInRange","isAnyOfOptions","find","o","suggestions","option","insertText","sortText","repeat","filterText","command","isRegistered","_choiceCompletions","enable","completionProvider","language","pattern","fsPath","scheme","exclusive","disable","_updateState","isFlush","onDidChangeCursorSelection","hasPlaceholder","isAtLastPlaceholder","isSelectionWithinPlaceholders","isAtFirstPlaceholder","_handleChoice","_currentChoice","queueMicrotask","showSimpleSuggestions","resetSelection","ILanguageConfigurationService","CommandCtor","ctrl","Scanner","_table","isDigitCharacter","isVariableCharacter","_Scanner$_table","Marker","_children","child","Text","parent","others","idx","children","newChildren","_fixParent","rightMostDescendant","TextmateSnippet","reduce","_Marker","TransformableMarker","_Marker2","Placeholder","_TransformableMarker","Choice","ret","transform","clone","isFinalTabstop","_Marker3","_super4","marker","forEach","Transform","_Marker4","_super5","regexp","RegExp","didMatch","replace","_replace","some","FormatString","elseValue","source","ignoreCase","global","_Marker5","_super6","shorthandName","ifValue","_this6","toLocaleUpperCase","toLocaleLowerCase","_toPascalCase","_toCamelCase","match","charAt","toUpperCase","toLowerCase","Variable","_TransformableMarker2","_super7","_this7","resolver","walk","visitor","stack","_Marker6","_super8","_placeholders","placeholderInfo","found","placeholder","_this8","SnippetParser","_scanner","_token","insertFinalTabstop","enforceFinalTabstop","snippet","parseFragment","ensureFinalTabstop","_parse","placeholderDefaultValues","incompletePlaceholders","fillInIncompletePlaceholder","defaultValues","newChild","Set","_incompletePlaceholde","placeholders","tokenText","nextToken","substring","_parseEscaped","_parseTabstopOrVariableName","_parseComplexPlaceholder","_parseComplexVariable","_parseAnything","_accept","test","Number","_backTo","_parseTransform","_parseChoiceElement","variable","regexValue","regexOptions","escaped","_parseFormatString","complex","shorthand","_until","CompositeSnippetVariableResolver","freeze","_delegates","SelectionBasedVariableResolver","_selection","_selectionIdx","_overtypingCapturer","isMultiline","getLastOvertypedInfo","multiline","line","lineLeadingWhitespace","getLeadingWhitespace","varLeadingWhitespace","splitLines","pop","whitespaceCommonLength","commonPrefixLength","m","newline","rest","positionLineNumber","positionColumn","ModelBasedVariableResolver","_labelService","path","lastIndexOf","getUriLabel","dirname","relative","noPrefix","ClipboardBasedVariableResolver","_readClipboardText","_selectionCount","_spread","lines","isFalsyOrWhitespace","CommentBasedVariableResolver","langId","getLanguageIdAtPosition","selectionStartLineNumber","selectionStartColumn","config","getLanguageConfiguration","comments","lineCommentToken","blockCommentStartToken","blockCommentEndToken","TimeBasedVariableResolver","_date","getFullYear","getMonth","valueOf","padStart","getDate","getHours","getMinutes","getSeconds","dayNames","getDay","dayNamesShort","monthNames","monthNamesShort","floor","getTime","rawTimeOffset","getTimezoneOffset","sign","hours","trunc","abs","hoursString","minutes","SnippetSession_1","WorkspaceBasedVariableResolver","_workspaceService","workspaceIdentifier","toWorkspaceIdentifier","getWorkspace","isEmptyWorkspaceIdentifier","_resolveWorkspaceName","_resoveWorkspacePath","isSingleFolderWorkspaceIdentifier","filename","configPath","endsWith","WORKSPACE_EXTENSION","normalizeDriveLetter","folderpath","RandomBasedVariableResolver","random","generateUuid","OneSnippet","_snippet","_snippetLineLeadingWhitespace","_offset","_nestingLevel","_placeholderGroups","groupBy","compareByIndex","_placeholderGroupsIdx","textChange","newPosition","_placeholderDecorations","removeDecorations","placeholderOffset","placeholderLen","fullLen","getPositionAt","_decor","inactiveFinal","inactive","handle","addDecoration","_initDecorations","operations","getDecorationRange","currentValue","transformedValueLines","normalizeIndentation","EditOperation","getEOL","executeEdits","couldSkipThisPlaceholder","activePlaceholders","_hasPlaceholderBeenCollapsed","changeDecorationOptions","activeFinal","active","enclosingPlaceholders","enclosingPlaceholder","_step4$value","move","_step7","placeholdersWithEqualIndex","_iterator7","_step8","_iterator8","nested","assert","_step9","indexLastPlaceholder","_iterator9","nestedPlaceholder","removeDecoration","_step10","_iterator10","ModelDecorationOptions","stickiness","_template","_options","_templateMerges","_snippets","createEditsAndSnippetsFromSelections","createEditsAndSnippetsFromEdits","snippets","_undoEdits","undoEdits","identifier","initialize","_move","revealRange","_SnippetSession_1$cre","isTrivialSnippet","_step11","_iterator11","revealPositionInCenterIfOutsideViewport","_step12","_iterator12","oneSelection","_step13","allPossibleSelections","_iterator13","_ret","possibleSelections","computePossibleSelections","_step15","_iterator15","_step15$value","compareRangesUsingStarts","_step16","_iterator16","array","_step14","_iterator14","_step14$value","adjustIndentation","snippetTextString","prevChar","newValue","positionColumnBefore","positionColumnAfter","validateRange","createWithDirection","getDirection","languageConfigurationService","_step17","workspaceService","IWorkspaceContextService","modelBasedVariableResolver","ILabelService","readClipboardText","firstBeforeText","adjustSelection","firstAfterText","firstLineFirstNonWhitespace","indexedSelections","_iterator17","_step17$value","extensionBefore","extensionAfter","snippetSelection","setStartPosition","setEndPosition","parse","snippetLineLeadingWhitespace","resolveVariables","major","minor","_isTracked","snippetEdits","parser","_snippetEdits$i","lastRange","textRange","textNode","newNodes","snippetText","snippetFragmentText"],"sourceRoot":""}