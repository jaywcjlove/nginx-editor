{"version":3,"sources":["Header.module.less","LoadFile.module.less","nginx.conf.ts","LoadFile.tsx","Header.tsx","../../../src/suggestions.ts","../../../src/index.tsx","../../../src/conf.ts","App.tsx","index.tsx"],"names":["module","exports","nginxStr","LoadFile","props","onLoadContent","inputRef","useRef","fileReader","FileReader","fileState","handleUpload","eve","target","files","current","readAsText","useEffect","inp","onload","e","result","toString","addEventListener","removeEventListener","content","onClick","aTag","document","createElement","setAttribute","filename","blob","Blob","type","URL","createObjectURL","body","appendChild","eventMouse","createEvent","initMouseEvent","window","dispatchEvent","removeChild","className","styles","button","click","multiple","ref","accept","style","display","Logo","viewBox","width","height","fill","d","GitHub","Header","useState","setFilename","header","title","text","evn","file","name","href","marginLeft","suggestions","range","directives","label","item","kind","monaco","insertText","documentation","getDirectives","insertTextRules","detail","id","autoClosingPairs","open","close","defaultToken","ignoreCase","brackets","token","tokenizer","root","comment","numbers","next","units","colors","base","inherit","rules","foreground","fontStyle","provideCompletionItems","word","model","startLineNumber","position","endLineNumber","startColumn","endColumn","provideHover","data","contents","value","App","setContent","contentDownload","setContentDownload","editor","resizeHandle","innerWidth","innerHeight","layout","onChange","theme","language","options","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.f9700f0c.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__358aw\",\"title\":\"Header_title__2UH-p\",\"filename\":\"Header_filename__1Bl32\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"LoadFile_button__1Rr5N\"};","export const nginxStr = `user       www www;  ## Default: nobody\nworker_processes  5;  ## Default: 1\nerror_log  logs/error.log;\npid        logs/nginx.pid;\nworker_rlimit_nofile 8192;\n\nevents {\n  worker_connections  4096;  ## Default: 1024\n}\n\nhttp {\n  include    conf/mime.types;\n  include    /etc/nginx/proxy.conf;\n  include    /etc/nginx/fastcgi.conf;\n  index    index.html index.htm index.php;\n\n  default_type application/octet-stream;\n  log_format   main '$remote_addr - $remote_user [$time_local]  $status '\n    '\"$request\" $body_bytes_sent \"$http_referer\" '\n    '\"$http_user_agent\" \"$http_x_forwarded_for\"';\n  access_log   logs/access.log  main;\n  sendfile     on;\n  tcp_nopush   on;\n  server_names_hash_bucket_size 128; # this seems to be required for some vhosts\n\n  server { # php/fastcgi\n    listen       80;\n    server_name  domain1.com www.domain1.com;\n    access_log   logs/domain1.access.log  main;\n    root         html;\n\n    location ~ \\\\.php$ {\n      fastcgi_pass   127.0.0.1:1025;\n    }\n  }\n\n  server { # simple reverse-proxy\n    listen       80;\n    server_name  domain2.com www.domain2.com;\n    access_log   logs/domain2.access.log  main;\n\n    # serve static files\n    location ~ ^/(images|javascript|js|css|flash|media|static)/  {\n      root    /var/www/virtual/big.server.com/htdocs;\n      expires 30d;\n    }\n\n    # pass requests for dynamic content to rails/turbogears/zope, et al\n    location / {\n      proxy_pass      http://127.0.0.1:8080;\n    }\n  }\n\n  upstream big_server_com {\n    server 127.0.0.3:8000 weight=5;\n    server 127.0.0.3:8001 weight=5;\n    server 192.168.0.1:8000;\n    server 192.168.0.1:8001;\n  }\n\n  server { # simple load balancing\n    listen          80;\n    server_name     big.server.com;\n    access_log      logs/big.server.access.log main;\n\n    location / {\n      proxy_pass      http://big_server_com;\n    }\n  }\n}`;\n","import React, { useRef, useEffect, Fragment } from 'react';\nimport styles from './LoadFile.module.less';\n\nexport type LoadFileProps = {\n  content?: string;\n  filename?: string;\n  onLoadContent?: (text: string, evn: ProgressEvent<FileReader>, file?: File) => void;\n};\n\nexport default function LoadFile(props: LoadFileProps) {\n  const { onLoadContent } = props;\n  const inputRef = useRef<HTMLInputElement>(null);\n  const fileReader = useRef(new FileReader());\n  const fileState = useRef<File>();\n  useEffect(() => {\n    const inp = inputRef.current;\n    if (inp) {\n      fileReader.current.onload = (e) => {\n        if (e.target && e.target.result) {\n          onLoadContent && onLoadContent(e.target.result.toString(), e, fileState.current);\n        }\n      };\n      inp.addEventListener('change', handleUpload, false);\n    }\n    return () => {\n      if (inp) {\n        inp.removeEventListener('change', handleUpload, false);\n      }\n    };\n    // eslint-disable-next-line\n  }, []);\n\n  function handleUpload(eve: Event) {\n    const { target } = (eve as unknown) as React.ChangeEvent<HTMLInputElement>;\n    if (target.files && target.files[0]) {\n      fileState.current = target.files[0];\n      fileReader.current.readAsText(target.files[0]);\n    }\n  }\n\n  function handleClick() {\n    inputRef.current!.click();\n  }\n\n  function handleSaveAs() {\n    let aTag = document.createElement('a');\n    if ('download' in aTag) {\n      aTag.setAttribute('download', props.filename || 'nginx.conf');\n      let blob = new Blob([props.content || ''], { type: '' });\n      aTag.setAttribute('href', URL.createObjectURL(blob));\n      document.body.appendChild(aTag);\n      const eventMouse = document.createEvent('MouseEvents');\n      eventMouse.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n      aTag.dispatchEvent(eventMouse);\n      document.body.removeChild(aTag);\n    }\n  }\n\n  return (\n    <Fragment>\n      {props.content && (\n        <button onClick={handleSaveAs} className={styles.button}>\n          Save\n        </button>\n      )}\n      <button onClick={handleClick} className={styles.button}>\n        <input type=\"file\" multiple={false} ref={inputRef} accept=\"text/conf\" style={{ display: 'none' }} />\n        Open...\n      </button>\n    </Fragment>\n  );\n}\n","import styles from 'Header.module.less';\nimport { useState } from 'react';\nimport LoadFile, { LoadFileProps } from './LoadFile';\n\nconst Logo = () => (\n  <svg viewBox=\"0 0 1024 1024\" width=\"18\" height=\"18\">\n    <path\n      fill=\"currentColor\"\n      d=\"M512 0L68.48 256v512L512 1024l443.52-256V256L512 0z m256 707.84c0 30.08-27.562667 55.04-65.237333 55.04-26.922667 0-57.642667-10.88-76.842667-34.56l-256-304.682667v284.16c0 30.762667-24.32 55.04-54.357333 55.04H312.32c-30.762667 0-55.04-25.6-55.04-55.04V316.16c0-30.08 26.88-55.04 64-55.04 27.562667 0 58.88 10.88 78.08 34.56l254.72 304.682667V316.16c0-30.762667 25.6-55.04 55.04-55.04h3.2c30.72 0 55.04 25.6 55.04 55.04v391.68H768z\"\n    />\n  </svg>\n);\n\nconst GitHub = () => (\n  <svg viewBox=\"0 0 1024 1024\" width=\"18\" height=\"18\">\n    <path\n      fill=\"currentColor\"\n      d=\"M512 0C229.12 0 0 229.12 0 512c0 226.56 146.56 417.92 350.08 485.76 25.6 4.48 35.2-10.88 35.2-24.32 0-12.16-0.64-52.48-0.64-95.36-128.64 23.68-161.92-31.36-172.16-60.16-5.76-14.72-30.72-60.16-52.48-72.32-17.92-9.6-43.52-33.28-0.64-33.92 40.32-0.64 69.12 37.12 78.72 52.48 46.08 77.44 119.68 55.68 149.12 42.24 4.48-33.28 17.92-55.68 32.64-68.48-113.92-12.8-232.96-56.96-232.96-252.8 0-55.68 19.84-101.76 52.48-137.6-5.12-12.8-23.04-65.28 5.12-135.68 0 0 42.88-13.44 140.8 52.48 40.96-11.52 84.48-17.28 128-17.28 43.52 0 87.04 5.76 128 17.28 97.92-66.56 140.8-52.48 140.8-52.48 28.16 70.4 10.24 122.88 5.12 135.68 32.64 35.84 52.48 81.28 52.48 137.6 0 196.48-119.68 240-233.6 252.8 18.56 16 34.56 46.72 34.56 94.72 0 68.48-0.64 123.52-0.64 140.8 0 13.44 9.6 29.44 35.2 24.32A512.832 512.832 0 0 0 1024 512C1024 229.12 794.88 0 512 0z\"\n    />\n  </svg>\n);\n\ntype HeaderProps = LoadFileProps & {};\n\nexport default function Header(props: HeaderProps) {\n  const { onLoadContent } = props;\n  const [filename, setFilename] = useState('nginx.example.conf');\n  return (\n    <div className={styles.header}>\n      <Logo />\n      <div className={styles.title}>nginx editor</div>\n      <div className={styles.filename}>{filename}</div>\n      <LoadFile\n        content={props.content}\n        filename={filename}\n        onLoadContent={(text, evn, file) => {\n          setFilename(file!.name || '');\n          onLoadContent && onLoadContent(text, evn);\n        }}\n      />\n      <a href=\"https://github.com/jaywcjlove/nginx-editor\" target=\"__blank\" style={{ marginLeft: 6 }}>\n        <GitHub />\n      </a>\n    </div>\n  );\n}\n","import * as monaco from 'monaco-editor';\nimport directives from './directives.json';\n\nfunction getDirectives(range: monaco.IRange) {\n  return directives.map((item) => ({\n    label: item.n,\n    kind: monaco.languages.CompletionItemKind.Keyword,\n    insertText: item.n,\n    documentation: item.d,\n    range,\n  }));\n}\n\nexport default function suggestions(range: monaco.IRange): monaco.languages.CompletionList['suggestions'] {\n  return [\n    ...getDirectives(range),\n    {\n      label: 'upstream',\n      kind: monaco.languages.CompletionItemKind.Snippet,\n      insertText: [\n        // eslint-disable-next-line\n        'upstream ${1:upstream_name} {',\n        // eslint-disable-next-line\n        '\\tserver ${0:127.0.0.1:3110};',\n        '}',\n      ].join('\\n'),\n      insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n      detail: 'Upstream Example',\n      range,\n    },\n    {\n      label: 'proxy_pass',\n      kind: monaco.languages.CompletionItemKind.Snippet,\n      insertText: [\n        // eslint-disable-next-line\n        'proxy_pass    ${1:http}://${0192.168.188.222:32001};',\n      ].join('\\n'),\n      insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n      detail: 'proxy_pass Example',\n      range,\n    },\n    {\n      label: 'location',\n      kind: monaco.languages.CompletionItemKind.Snippet,\n      insertText: [\n        // eslint-disable-next-line\n        'location ${1:/} {\\n\\t${0}\\n}',\n      ].join('\\n'),\n      insertTextRules: monaco.languages.CompletionItemInsertTextRule.InsertAsSnippet,\n      detail: 'proxy_pass Example',\n      range,\n    },\n  ];\n}\n","import * as monaco from 'monaco-editor';\nimport { themeConfig, tokenConf } from './conf';\nimport suggestions from './suggestions';\nimport directives from './directives.json';\n\n// Register a new language\nmonaco.languages.register({\n  id: 'nginx',\n});\nmonaco.languages.setLanguageConfiguration('nginx', {\n  autoClosingPairs: [\n    { open: '{', close: '}' },\n    { open: '\"', close: '\"' },\n  ],\n});\nmonaco.languages.setMonarchTokensProvider('nginx', tokenConf);\nmonaco.editor.defineTheme('nginx-theme', themeConfig);\n\nmonaco.languages.registerCompletionItemProvider('nginx', {\n  provideCompletionItems: (model: monaco.editor.ITextModel, position: monaco.Position) => {\n    const word = model.getWordUntilPosition(position);\n    const range = {\n      startLineNumber: position.lineNumber,\n      endLineNumber: position.lineNumber,\n      startColumn: word.startColumn,\n      endColumn: word.endColumn,\n    };\n    return { suggestions: suggestions(range) };\n  },\n});\n\nmonaco.languages.registerHoverProvider('nginx', {\n  provideHover: (model: monaco.editor.ITextModel, position: monaco.Position, token: monaco.CancellationToken) => {\n    const word = model.getWordAtPosition(position);\n    if (!word) return;\n    const data = directives.find((item) => item.n === word.word || item.n === `$${word.word}`);\n    if (!data) return;\n    const range = {\n      startLineNumber: position.lineNumber,\n      endLineNumber: position.lineNumber,\n      startColumn: word.startColumn,\n      endColumn: word.endColumn,\n    };\n    const contents = [{ value: `**\\`${data.n}\\`** | ${data.m} | ${data.c || ''}` }];\n    if (data.s) {\n      contents.push({ value: `**syntax:** ${data.s || ''}` });\n    }\n    if (data.v) {\n      contents.push({ value: `**default:** ${data.v || ''}` });\n    }\n    if (data.d) {\n      contents.push({ value: `${data.d}` });\n    }\n    return {\n      contents: [...contents],\n      range: range,\n    };\n  },\n});\n","import * as monaco from 'monaco-editor';\n\nexport const tokenConf: monaco.languages.IMonarchLanguage = {\n  defaultToken: 'source',\n  ignoreCase: true,\n  brackets: [{ open: '{', close: '}', token: 'delimiter.bracket' }],\n\n  tokenizer: {\n    root: [\n      [/(\")/, 'delimiter.bracket'],\n      // [/[{}()[\\]]/, \"@brackets\"],\n      [/[;,.]/, 'delimiter'],\n      [/\\\\.* |~|~\\*|!~|!~\\*/, 'string.regexp'],\n      [/\\b\\d+\\w+\\b/, 'number'],\n      [/\\b\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}(:\\d{1,5})?\\b/, 'number'],\n      [/\\b(ip_hash|upstream|server)\\b/, 'http.upstream'],\n      [/\\b(add_header|expires|server_tokens)\\b/, 'http.headers'],\n      [/\\b(map|map_hash_max_size|map_hash_bucket_size)\\b/, 'module.http'],\n      [/\\b(http)\\b/, 'module.http'],\n      [\n        /\\b(gzip|gzip_buffers|gzip_comp_level|gzip_disable|gzip_http.version|gzip_min_length|gzip_proxied|gzip_types|gzip_vary)\\b/,\n        'module.http',\n      ],\n      [/\\s(on|off)\\b/, 'module.main'],\n      [/\\b(access_log|log_format)\\s/, 'module.log'],\n      [\n        /\\b(proxy_buffer_size|proxy_buffering|proxy_buffers|proxy_busy_buffers_size|proxy_cache|proxy_cache_background_update|proxy_cache_bypass|proxy_cache_convert_head|proxy_cache_key|proxy_cache_lock|proxy_cache_lock_age|proxy_cache_lock_timeout|proxy_cache_max_range_offset|proxy_cache_methods|proxy_cache_min_uses|proxy_cache_path|proxy_cache_purge|proxy_cache_revalidate|proxy_cache_use_stale|proxy_cache_valid|proxy_connect_timeout|proxy_headers_hash_bucket_size|proxy_headers_hash_max_size|proxy_hide_header|proxy_http_version|proxy_ignore_client_abort|proxy_intercept_errors|proxy_max_temp_file_size|proxy_method|proxy_next_upstream|proxy_next_upstream_tries|proxy_next_upstream_timeout|proxy_pass|proxy_pass_header|proxy_pass_request_body|proxy_pass_request_headers|proxy_read_timeout|proxy_redirect|proxy_redirect_errors|proxy_send_lowat|proxy_send_timeout|proxy_set_body|proxy_set_header|proxy_store|proxy_store_access|proxy_temp_file_write_size|proxy_t|emp_pathproxy_upstream_fail_timeout|proxy_upstream_max_fails)\\b/,\n        'http.proxy',\n      ],\n      [\n        /\\b(ssl|ssl_buffer_size|ssl_certificate|ssl_certificate_key|ssl_ciphers|ssl_client_certificate|ssl_crl|ssl_dhparam|ssl_ecdh_curve|ssl_password_file|ssl_prefer_server_ciphers|ssl_protocols|ssl_session_cache|ssl_session_ticket_key|ssl_session_tickets|ssl_session_timeout|ssl_stapling|ssl_stapling_file|ssl_stapling_responder|ssl_stapling_verify|ssl_trusted_certificate|ssl_verify_client|ssl_verify_depth)\\b/,\n        'module.http',\n      ],\n      [\n        /\\b(daemon|env|debug_points|error_log|log_not_found|include|lock_file|master_process|pid|ssl_engine|timer_resolution|types_hash_max_size|user|worker_cpu_affinity|worker_priority|worker_processes|worker_rlimit_core|worker_rlimit_nofile|worker_rlimit_sigpending|working_directory|try_files)\\b/,\n        'module.main',\n      ],\n      [\n        /\\b(index|alias|chunked_transfer_encoding|client_body_in_file_only|client_body_buffer_size|client_body_temp_path|client_body_timeout|client_header_buffer_size|client_header_timeout|client_max_body_size|default_type|error_page|index |internal|keepalive_timeout|keepalive_requests|large_client_header_buffers|limit_except|limit_rate|listen|location|msie_padding|msie_refresh|optimize_server_names|port_in_redirect|recursive_error_pages|reset_timedout_connection|resolver|resolver_timeout|root|satisfy_any|send_timeout|sendfile|server|server_name|server_names_hash_max_size|server_names_hash_bucket_size|tcp_nodelay|tcp_nopush|types |try_files)\\s/,\n        'module.http',\n      ],\n      [\n        /\\b(accept_mutex|accept_mutex_delay|debug_connection|devpoll_changes|devpoll_events|epoll_events|kqueue_changes|kqueue_events|multi_accept|rtsig_signo|rtsig_overflow_events|rtsig_overflow_test|rtsig_overflow_threshold|use|worker_connections)\\b/,\n        'module.events',\n      ],\n      [/\\b(add_before_body|add_after_body|addition_types)\\b/, 'module.http.addition'],\n      [/\\b(events)\\b/, 'module.events'],\n      [\n        /\\b(fastcgi_index|fastcgi_hide_header|fastcgi_ignore_client_abort|fastcgi_intercept_errors|fastcgi_param|fastcgi_pass|fastcgi_pass_header|fastcgi_read_timeout|fastcgi_redirect_errors|fa|stcgi_storefastcgi_store_access|fastcgi_buffers|fastcgi_buffers_size|fastcgi_temp_path|fastcgi_buffer_size|fastcgi_connect_timeout|fastcgi_send_timeout|fastcgi_split_path_info)\\b/,\n        'module.http',\n      ],\n      [/\\$\\w+/, 'variable'],\n      [/#.*$/, 'comment'],\n      // { include: \"@numbers\" },\n    ],\n    comment: [[/#.*$/, 'comment']],\n    // urldeclaration: [\n    //     ['[^)\\r\\n]+', 'string'],\n    //     ['\\\\)', { token: 'delimiter.parenthesis', next: '@pop' }]\n    // ],\n    numbers: [\n      ['-?(\\\\d*\\\\.)?\\\\d+([eE][\\\\-+]?\\\\d+)?', { token: 'attribute.value.number', next: '@units' }],\n      ['#[0-9a-fA-F_]+(?!\\\\w)', 'attribute.value.hex'],\n    ],\n    units: [['(M)?', 'attribute.value.unit', '@pop']],\n  },\n};\n\nexport const themeConfig: monaco.editor.IStandaloneThemeData = {\n  colors: {\n    // 'attribute.value.unit': '#68217a'\n  },\n  base: 'vs-dark',\n  inherit: true,\n  rules: [\n    {\n      token: 'module.http',\n      foreground: '#00bbbb',\n    },\n    {\n      token: 'module.events',\n      foreground: '#00bbbb',\n    },\n    {\n      token: 'http.headers',\n      foreground: '#00bbbb',\n    },\n    {\n      token: 'http.proxy',\n      foreground: '#58f18e',\n    },\n    {\n      token: 'module.main',\n      foreground: '#c152e4',\n      fontStyle: 'bold',\n    },\n    {\n      token: 'module.log',\n      foreground: '#4d6aab',\n    },\n    {\n      token: 'module.http.addition',\n      foreground: '#c152e4',\n    },\n    {\n      token: 'keywords',\n      foreground: '#9effff',\n      fontStyle: 'bold',\n    },\n    {\n      token: 'http.upstream',\n      foreground: '#0078d0',\n      fontStyle: 'bold',\n    },\n    {\n      token: 'identifier',\n      foreground: '#8e44ad',\n    },\n    {\n      token: 'delimiter.bracket',\n      foreground: '#737373',\n    },\n    {\n      token: 'delimiter',\n      foreground: '#737373',\n    },\n  ],\n};\n","import React, { useEffect, useRef, useState } from 'react';\nimport MonacoEditor, { RefEditorInstance } from '@uiw/react-monacoeditor';\nimport { nginxStr } from './nginx.conf';\nimport Header from './Header';\nimport './App.css';\nimport '../';\n\nconst App: React.FC = () => {\n  const [content, setContent] = useState(nginxStr || '');\n  const [contentDownload, setContentDownload] = useState(content || nginxStr || '');\n  const editor = useRef<RefEditorInstance>(null);\n  function resizeHandle(evn: UIEvent) {\n    const { target } = evn;\n    const width = (target as Window).innerWidth;\n    const height = (target as Window).innerHeight;\n    if (editor.current && editor.current.editor) {\n      editor.current.editor.layout({ width, height: height - 36 });\n    }\n  }\n  useEffect(() => {\n    if (editor.current && window) {\n      window.addEventListener('resize', resizeHandle, false);\n    }\n    return () => {\n      window && window.removeEventListener('resize', resizeHandle, false);\n    };\n  }, []);\n  return (\n    <div className=\"App\">\n      <Header\n        content={contentDownload}\n        onLoadContent={(text) => {\n          setContent(text);\n        }}\n      />\n      <MonacoEditor\n        ref={editor}\n        onChange={(value) => {\n          setContentDownload(value);\n        }}\n        theme=\"nginx-theme\"\n        language=\"nginx\"\n        value={content}\n        height=\"calc(100vh - 36px)\"\n        options={{\n          theme: 'vs-dark',\n        }}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}