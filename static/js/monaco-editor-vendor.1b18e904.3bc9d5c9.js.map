{"version":3,"file":"static/js/monaco-editor-vendor.1b18e904.3bc9d5c9.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/fontZoom/browser/fontZoom.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/format.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formatActions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/format/browser/formattingEdit.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/markerNavigationService.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoErrorWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoError/browser/gotoError.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/symbolNavigation.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToCommands.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/goToSymbol.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/clickLinkGesture.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/link/goToDefinitionAtPosition.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesTree.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/peek/referencesController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/gotoSymbol/browser/referencesModel.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { EditorZoom } from '../../../common/config/editorZoom.js';\nimport * as nls from '../../../../nls.js';\nclass EditorFontZoomIn extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomIn',\n            label: nls.localize('EditorFontZoomIn.label', \"Editor Font Zoom In\"),\n            alias: 'Editor Font Zoom In',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() + 1);\n    }\n}\nclass EditorFontZoomOut extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomOut',\n            label: nls.localize('EditorFontZoomOut.label', \"Editor Font Zoom Out\"),\n            alias: 'Editor Font Zoom Out',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(EditorZoom.getZoomLevel() - 1);\n    }\n}\nclass EditorFontZoomReset extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.fontZoomReset',\n            label: nls.localize('EditorFontZoomReset.label', \"Editor Font Zoom Reset\"),\n            alias: 'Editor Font Zoom Reset',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        EditorZoom.setZoomLevel(0);\n    }\n}\nregisterEditorAction(EditorFontZoomIn);\nregisterEditorAction(EditorFontZoomOut);\nregisterEditorAction(EditorFontZoomReset);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { asArray, isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource, TextModelCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ExtensionIdentifierSet } from '../../../../platform/extensions/common/extensions.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nexport function alertFormattingEdits(edits) {\n    edits = edits.filter(edit => edit.range);\n    if (!edits.length) {\n        return;\n    }\n    let { range } = edits[0];\n    for (let i = 1; i < edits.length; i++) {\n        range = Range.plusRange(range, edits[i].range);\n    }\n    const { startLineNumber, endLineNumber } = range;\n    if (startLineNumber === endLineNumber) {\n        if (edits.length === 1) {\n            alert(nls.localize('hint11', \"Made 1 formatting edit on line {0}\", startLineNumber));\n        }\n        else {\n            alert(nls.localize('hintn1', \"Made {0} formatting edits on line {1}\", edits.length, startLineNumber));\n        }\n    }\n    else {\n        if (edits.length === 1) {\n            alert(nls.localize('hint1n', \"Made 1 formatting edit between lines {0} and {1}\", startLineNumber, endLineNumber));\n        }\n        else {\n            alert(nls.localize('hintnn', \"Made {0} formatting edits between lines {1} and {2}\", edits.length, startLineNumber, endLineNumber));\n        }\n    }\n}\nexport function getRealAndSyntheticDocumentFormattersOrdered(documentFormattingEditProvider, documentRangeFormattingEditProvider, model) {\n    const result = [];\n    const seen = new ExtensionIdentifierSet();\n    // (1) add all document formatter\n    const docFormatter = documentFormattingEditProvider.ordered(model);\n    for (const formatter of docFormatter) {\n        result.push(formatter);\n        if (formatter.extensionId) {\n            seen.add(formatter.extensionId);\n        }\n    }\n    // (2) add all range formatter as document formatter (unless the same extension already did that)\n    const rangeFormatter = documentRangeFormattingEditProvider.ordered(model);\n    for (const formatter of rangeFormatter) {\n        if (formatter.extensionId) {\n            if (seen.has(formatter.extensionId)) {\n                continue;\n            }\n            seen.add(formatter.extensionId);\n        }\n        result.push({\n            displayName: formatter.displayName,\n            extensionId: formatter.extensionId,\n            provideDocumentFormattingEdits(model, options, token) {\n                return formatter.provideDocumentRangeFormattingEdits(model, model.getFullModelRange(), options, token);\n            }\n        });\n    }\n    return result;\n}\nexport class FormattingConflicts {\n    static setFormatterSelector(selector) {\n        const remove = FormattingConflicts._selectors.unshift(selector);\n        return { dispose: remove };\n    }\n    static select(formatter, document, mode) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (formatter.length === 0) {\n                return undefined;\n            }\n            const selector = Iterable.first(FormattingConflicts._selectors);\n            if (selector) {\n                return yield selector(formatter, document, mode);\n            }\n            return undefined;\n        });\n    }\n}\nFormattingConflicts._selectors = new LinkedList();\nexport function formatDocumentRangesWithSelectedProvider(accessor, editorOrModel, rangeOrRanges, mode, progress, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const instaService = accessor.get(IInstantiationService);\n        const { documentRangeFormattingEditProvider: documentRangeFormattingEditProviderRegistry } = accessor.get(ILanguageFeaturesService);\n        const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n        const provider = documentRangeFormattingEditProviderRegistry.ordered(model);\n        const selected = yield FormattingConflicts.select(provider, model, mode);\n        if (selected) {\n            progress.report(selected);\n            yield instaService.invokeFunction(formatDocumentRangesWithProvider, selected, editorOrModel, rangeOrRanges, token);\n        }\n    });\n}\nexport function formatDocumentRangesWithProvider(accessor, provider, editorOrModel, rangeOrRanges, token) {\n    var _a, _b;\n    return __awaiter(this, void 0, void 0, function* () {\n        const workerService = accessor.get(IEditorWorkerService);\n        const logService = accessor.get(ILogService);\n        let model;\n        let cts;\n        if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */, undefined, token);\n        }\n        else {\n            model = editorOrModel;\n            cts = new TextModelCancellationTokenSource(editorOrModel, token);\n        }\n        // make sure that ranges don't overlap nor touch each other\n        const ranges = [];\n        let len = 0;\n        for (const range of asArray(rangeOrRanges).sort(Range.compareRangesUsingStarts)) {\n            if (len > 0 && Range.areIntersectingOrTouching(ranges[len - 1], range)) {\n                ranges[len - 1] = Range.fromPositions(ranges[len - 1].getStartPosition(), range.getEndPosition());\n            }\n            else {\n                len = ranges.push(range);\n            }\n        }\n        const computeEdits = (range) => __awaiter(this, void 0, void 0, function* () {\n            var _c, _d;\n            logService.trace(`[format][provideDocumentRangeFormattingEdits] (request)`, (_c = provider.extensionId) === null || _c === void 0 ? void 0 : _c.value, range);\n            const result = (yield provider.provideDocumentRangeFormattingEdits(model, range, model.getFormattingOptions(), cts.token)) || [];\n            logService.trace(`[format][provideDocumentRangeFormattingEdits] (response)`, (_d = provider.extensionId) === null || _d === void 0 ? void 0 : _d.value, result);\n            return result;\n        });\n        const hasIntersectingEdit = (a, b) => {\n            if (!a.length || !b.length) {\n                return false;\n            }\n            // quick exit if the list of ranges are completely unrelated [O(n)]\n            const mergedA = a.reduce((acc, val) => { return Range.plusRange(acc, val.range); }, a[0].range);\n            if (!b.some(x => { return Range.intersectRanges(mergedA, x.range); })) {\n                return false;\n            }\n            // fallback to a complete check [O(n^2)]\n            for (const edit of a) {\n                for (const otherEdit of b) {\n                    if (Range.intersectRanges(edit.range, otherEdit.range)) {\n                        return true;\n                    }\n                }\n            }\n            return false;\n        };\n        const allEdits = [];\n        const rawEditsList = [];\n        try {\n            if (typeof provider.provideDocumentRangesFormattingEdits === 'function') {\n                logService.trace(`[format][provideDocumentRangeFormattingEdits] (request)`, (_a = provider.extensionId) === null || _a === void 0 ? void 0 : _a.value, ranges);\n                const result = (yield provider.provideDocumentRangesFormattingEdits(model, ranges, model.getFormattingOptions(), cts.token)) || [];\n                logService.trace(`[format][provideDocumentRangeFormattingEdits] (response)`, (_b = provider.extensionId) === null || _b === void 0 ? void 0 : _b.value, result);\n                rawEditsList.push(result);\n            }\n            else {\n                for (const range of ranges) {\n                    if (cts.token.isCancellationRequested) {\n                        return true;\n                    }\n                    rawEditsList.push(yield computeEdits(range));\n                }\n                for (let i = 0; i < ranges.length; ++i) {\n                    for (let j = i + 1; j < ranges.length; ++j) {\n                        if (cts.token.isCancellationRequested) {\n                            return true;\n                        }\n                        if (hasIntersectingEdit(rawEditsList[i], rawEditsList[j])) {\n                            // Merge ranges i and j into a single range, recompute the associated edits\n                            const mergedRange = Range.plusRange(ranges[i], ranges[j]);\n                            const edits = yield computeEdits(mergedRange);\n                            ranges.splice(j, 1);\n                            ranges.splice(i, 1);\n                            ranges.push(mergedRange);\n                            rawEditsList.splice(j, 1);\n                            rawEditsList.splice(i, 1);\n                            rawEditsList.push(edits);\n                            // Restart scanning\n                            i = 0;\n                            j = 0;\n                        }\n                    }\n                }\n            }\n            for (const rawEdits of rawEditsList) {\n                if (cts.token.isCancellationRequested) {\n                    return true;\n                }\n                const minimalEdits = yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n                if (minimalEdits) {\n                    allEdits.push(...minimalEdits);\n                }\n            }\n        }\n        finally {\n            cts.dispose();\n        }\n        if (allEdits.length === 0) {\n            return false;\n        }\n        if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, allEdits, true);\n            alertFormattingEdits(allEdits);\n            editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* ScrollType.Immediate */);\n        }\n        else {\n            // use model to apply edits\n            const [{ range }] = allEdits;\n            const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n            model.pushEditOperations([initialSelection], allEdits.map(edit => {\n                return {\n                    text: edit.text,\n                    range: Range.lift(edit.range),\n                    forceMoveMarkers: true\n                };\n            }), undoEdits => {\n                for (const { range } of undoEdits) {\n                    if (Range.areIntersectingOrTouching(range, initialSelection)) {\n                        return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\n                    }\n                }\n                return null;\n            });\n        }\n        return true;\n    });\n}\nexport function formatDocumentWithSelectedProvider(accessor, editorOrModel, mode, progress, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const instaService = accessor.get(IInstantiationService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const model = isCodeEditor(editorOrModel) ? editorOrModel.getModel() : editorOrModel;\n        const provider = getRealAndSyntheticDocumentFormattersOrdered(languageFeaturesService.documentFormattingEditProvider, languageFeaturesService.documentRangeFormattingEditProvider, model);\n        const selected = yield FormattingConflicts.select(provider, model, mode);\n        if (selected) {\n            progress.report(selected);\n            yield instaService.invokeFunction(formatDocumentWithProvider, selected, editorOrModel, mode, token);\n        }\n    });\n}\nexport function formatDocumentWithProvider(accessor, provider, editorOrModel, mode, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const workerService = accessor.get(IEditorWorkerService);\n        let model;\n        let cts;\n        if (isCodeEditor(editorOrModel)) {\n            model = editorOrModel.getModel();\n            cts = new EditorStateCancellationTokenSource(editorOrModel, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */, undefined, token);\n        }\n        else {\n            model = editorOrModel;\n            cts = new TextModelCancellationTokenSource(editorOrModel, token);\n        }\n        let edits;\n        try {\n            const rawEdits = yield provider.provideDocumentFormattingEdits(model, model.getFormattingOptions(), cts.token);\n            edits = yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            if (cts.token.isCancellationRequested) {\n                return true;\n            }\n        }\n        finally {\n            cts.dispose();\n        }\n        if (!edits || edits.length === 0) {\n            return false;\n        }\n        if (isCodeEditor(editorOrModel)) {\n            // use editor to apply edits\n            FormattingEdit.execute(editorOrModel, edits, mode !== 2 /* FormattingMode.Silent */);\n            if (mode !== 2 /* FormattingMode.Silent */) {\n                alertFormattingEdits(edits);\n                editorOrModel.revealPositionInCenterIfOutsideViewport(editorOrModel.getPosition(), 1 /* ScrollType.Immediate */);\n            }\n        }\n        else {\n            // use model to apply edits\n            const [{ range }] = edits;\n            const initialSelection = new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn);\n            model.pushEditOperations([initialSelection], edits.map(edit => {\n                return {\n                    text: edit.text,\n                    range: Range.lift(edit.range),\n                    forceMoveMarkers: true\n                };\n            }), undoEdits => {\n                for (const { range } of undoEdits) {\n                    if (Range.areIntersectingOrTouching(range, initialSelection)) {\n                        return [new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn)];\n                    }\n                }\n                return null;\n            });\n        }\n        return true;\n    });\n}\nexport function getDocumentRangeFormattingEditsUntilResult(workerService, languageFeaturesService, model, range, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = languageFeaturesService.documentRangeFormattingEditProvider.ordered(model);\n        for (const provider of providers) {\n            const rawEdits = yield Promise.resolve(provider.provideDocumentRangeFormattingEdits(model, range, options, token)).catch(onUnexpectedExternalError);\n            if (isNonEmptyArray(rawEdits)) {\n                return yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            }\n        }\n        return undefined;\n    });\n}\nexport function getDocumentFormattingEditsUntilResult(workerService, languageFeaturesService, model, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = getRealAndSyntheticDocumentFormattersOrdered(languageFeaturesService.documentFormattingEditProvider, languageFeaturesService.documentRangeFormattingEditProvider, model);\n        for (const provider of providers) {\n            const rawEdits = yield Promise.resolve(provider.provideDocumentFormattingEdits(model, options, token)).catch(onUnexpectedExternalError);\n            if (isNonEmptyArray(rawEdits)) {\n                return yield workerService.computeMoreMinimalEdits(model.uri, rawEdits);\n            }\n        }\n        return undefined;\n    });\n}\nexport function getOnTypeFormattingEdits(workerService, languageFeaturesService, model, position, ch, options, token) {\n    const providers = languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n    if (providers.length === 0) {\n        return Promise.resolve(undefined);\n    }\n    if (providers[0].autoFormatTriggerCharacters.indexOf(ch) < 0) {\n        return Promise.resolve(undefined);\n    }\n    return Promise.resolve(providers[0].provideOnTypeFormattingEdits(model, position, ch, options, token)).catch(onUnexpectedExternalError).then(edits => {\n        return workerService.computeMoreMinimalEdits(model.uri, edits);\n    });\n}\nCommandsRegistry.registerCommand('_executeFormatRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, range, options] = args;\n        assertType(URI.isUri(resource));\n        assertType(Range.isIRange(range));\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getDocumentRangeFormattingEditsUntilResult(workerService, languageFeaturesService, reference.object.textEditorModel, Range.lift(range), options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\nCommandsRegistry.registerCommand('_executeFormatDocumentProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, options] = args;\n        assertType(URI.isUri(resource));\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getDocumentFormattingEditsUntilResult(workerService, languageFeaturesService, reference.object.textEditorModel, options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\nCommandsRegistry.registerCommand('_executeFormatOnTypeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, position, ch, options] = args;\n        assertType(URI.isUri(resource));\n        assertType(Position.isIPosition(position));\n        assertType(typeof ch === 'string');\n        const resolverService = accessor.get(ITextModelService);\n        const workerService = accessor.get(IEditorWorkerService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const reference = yield resolverService.createModelReference(resource);\n        try {\n            return getOnTypeFormattingEdits(workerService, languageFeaturesService, reference.object.textEditorModel, Position.lift(position), ch, options, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { alertFormattingEdits, formatDocumentRangesWithSelectedProvider, formatDocumentWithSelectedProvider, getOnTypeFormattingEdits } from './format.js';\nimport { FormattingEdit } from './formattingEdit.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IEditorProgressService, Progress } from '../../../../platform/progress/common/progress.js';\nlet FormatOnType = class FormatOnType {\n    constructor(_editor, _languageFeaturesService, _workerService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._workerService = _workerService;\n        this._disposables = new DisposableStore();\n        this._sessionDisposables = new DisposableStore();\n        this._disposables.add(_languageFeaturesService.onTypeFormattingEditProvider.onDidChange(this._update, this));\n        this._disposables.add(_editor.onDidChangeModel(() => this._update()));\n        this._disposables.add(_editor.onDidChangeModelLanguage(() => this._update()));\n        this._disposables.add(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(56 /* EditorOption.formatOnType */)) {\n                this._update();\n            }\n        }));\n        this._update();\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._sessionDisposables.dispose();\n    }\n    _update() {\n        // clean up\n        this._sessionDisposables.clear();\n        // we are disabled\n        if (!this._editor.getOption(56 /* EditorOption.formatOnType */)) {\n            return;\n        }\n        // no model\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        // no support\n        const [support] = this._languageFeaturesService.onTypeFormattingEditProvider.ordered(model);\n        if (!support || !support.autoFormatTriggerCharacters) {\n            return;\n        }\n        // register typing listeners that will trigger the format\n        const triggerChars = new CharacterSet();\n        for (const ch of support.autoFormatTriggerCharacters) {\n            triggerChars.add(ch.charCodeAt(0));\n        }\n        this._sessionDisposables.add(this._editor.onDidType((text) => {\n            const lastCharCode = text.charCodeAt(text.length - 1);\n            if (triggerChars.has(lastCharCode)) {\n                this._trigger(String.fromCharCode(lastCharCode));\n            }\n        }));\n    }\n    _trigger(ch) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (this._editor.getSelections().length > 1 || !this._editor.getSelection().isEmpty()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const cts = new CancellationTokenSource();\n        // install a listener that checks if edits happens before the\n        // position on which we format right now. If so, we won't\n        // apply the format edits\n        const unbind = this._editor.onDidChangeModelContent((e) => {\n            if (e.isFlush) {\n                // a model.setValue() was called\n                // cancel only once\n                cts.cancel();\n                unbind.dispose();\n                return;\n            }\n            for (let i = 0, len = e.changes.length; i < len; i++) {\n                const change = e.changes[i];\n                if (change.range.endLineNumber <= position.lineNumber) {\n                    // cancel only once\n                    cts.cancel();\n                    unbind.dispose();\n                    return;\n                }\n            }\n        });\n        getOnTypeFormattingEdits(this._workerService, this._languageFeaturesService, model, position, ch, model.getFormattingOptions(), cts.token).then(edits => {\n            if (cts.token.isCancellationRequested) {\n                return;\n            }\n            if (isNonEmptyArray(edits)) {\n                FormattingEdit.execute(this._editor, edits, true);\n                alertFormattingEdits(edits);\n            }\n        }).finally(() => {\n            unbind.dispose();\n        });\n    }\n};\nFormatOnType.ID = 'editor.contrib.autoFormat';\nFormatOnType = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IEditorWorkerService)\n], FormatOnType);\nexport { FormatOnType };\nlet FormatOnPaste = class FormatOnPaste {\n    constructor(editor, _languageFeaturesService, _instantiationService) {\n        this.editor = editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._instantiationService = _instantiationService;\n        this._callOnDispose = new DisposableStore();\n        this._callOnModel = new DisposableStore();\n        this._callOnDispose.add(editor.onDidChangeConfiguration(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModel(() => this._update()));\n        this._callOnDispose.add(editor.onDidChangeModelLanguage(() => this._update()));\n        this._callOnDispose.add(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(this._update, this));\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        this._callOnModel.dispose();\n    }\n    _update() {\n        // clean up\n        this._callOnModel.clear();\n        // we are disabled\n        if (!this.editor.getOption(55 /* EditorOption.formatOnPaste */)) {\n            return;\n        }\n        // no model\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        // no formatter\n        if (!this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())) {\n            return;\n        }\n        this._callOnModel.add(this.editor.onDidPaste(({ range }) => this._trigger(range)));\n    }\n    _trigger(range) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (this.editor.getSelections().length > 1) {\n            return;\n        }\n        this._instantiationService.invokeFunction(formatDocumentRangesWithSelectedProvider, this.editor, range, 2 /* FormattingMode.Silent */, Progress.None, CancellationToken.None).catch(onUnexpectedError);\n    }\n};\nFormatOnPaste.ID = 'editor.contrib.formatOnPaste';\nFormatOnPaste = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IInstantiationService)\n], FormatOnPaste);\nclass FormatDocumentAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatDocument',\n            label: nls.localize('formatDocument.label', \"Format Document\"),\n            alias: 'Format Document',\n            precondition: ContextKeyExpr.and(EditorContextKeys.notInCompositeEditor, EditorContextKeys.writable, EditorContextKeys.hasDocumentFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */,\n                linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 39 /* KeyCode.KeyI */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.3\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                const instaService = accessor.get(IInstantiationService);\n                const progressService = accessor.get(IEditorProgressService);\n                yield progressService.showWhile(instaService.invokeFunction(formatDocumentWithSelectedProvider, editor, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n            }\n        });\n    }\n}\nclass FormatSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.formatSelection',\n            label: nls.localize('formatSelection.label', \"Format Selection\"),\n            alias: 'Format Selection',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasDocumentSelectionFormattingProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                when: EditorContextKeys.hasNonEmptySelection,\n                group: '1_modification',\n                order: 1.31\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.hasModel()) {\n                return;\n            }\n            const instaService = accessor.get(IInstantiationService);\n            const model = editor.getModel();\n            const ranges = editor.getSelections().map(range => {\n                return range.isEmpty()\n                    ? new Range(range.startLineNumber, 1, range.startLineNumber, model.getLineMaxColumn(range.startLineNumber))\n                    : range;\n            });\n            const progressService = accessor.get(IEditorProgressService);\n            yield progressService.showWhile(instaService.invokeFunction(formatDocumentRangesWithSelectedProvider, editor, ranges, 1 /* FormattingMode.Explicit */, Progress.None, CancellationToken.None), 250);\n        });\n    }\n}\nregisterEditorContribution(FormatOnType.ID, FormatOnType, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorContribution(FormatOnPaste.ID, FormatOnPaste, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(FormatDocumentAction);\nregisterEditorAction(FormatSelectionAction);\n// this is the old format action that does both (format document OR format selection)\n// and we keep it here such that existing keybinding configurations etc will still work\nCommandsRegistry.registerCommand('editor.action.format', (accessor) => __awaiter(void 0, void 0, void 0, function* () {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (!editor || !editor.hasModel()) {\n        return;\n    }\n    const commandService = accessor.get(ICommandService);\n    if (editor.getSelection().isEmpty()) {\n        yield commandService.executeCommand('editor.action.formatDocument');\n    }\n    else {\n        yield commandService.executeCommand('editor.action.formatSelection');\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nexport class FormattingEdit {\n    static _handleEolEdits(editor, edits) {\n        let newEol = undefined;\n        const singleEdits = [];\n        for (const edit of edits) {\n            if (typeof edit.eol === 'number') {\n                newEol = edit.eol;\n            }\n            if (edit.range && typeof edit.text === 'string') {\n                singleEdits.push(edit);\n            }\n        }\n        if (typeof newEol === 'number') {\n            if (editor.hasModel()) {\n                editor.getModel().pushEOL(newEol);\n            }\n        }\n        return singleEdits;\n    }\n    static _isFullModelReplaceEdit(editor, edit) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const editRange = model.validateRange(edit.range);\n        const fullModelRange = model.getFullModelRange();\n        return fullModelRange.equalsRange(editRange);\n    }\n    static execute(editor, _edits, addUndoStops) {\n        if (addUndoStops) {\n            editor.pushUndoStop();\n        }\n        const scrollState = StableEditorScrollState.capture(editor);\n        const edits = FormattingEdit._handleEolEdits(editor, _edits);\n        if (edits.length === 1 && FormattingEdit._isFullModelReplaceEdit(editor, edits[0])) {\n            // We use replace semantics and hope that markers stay put...\n            editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replace(Range.lift(edit.range), edit.text)));\n        }\n        else {\n            editor.executeEdits('formatEditsCommand', edits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n        }\n        if (addUndoStops) {\n            editor.pushUndoStop();\n        }\n        scrollState.restoreRelativeVerticalPositionOfCursor(editor);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { compare } from '../../../../base/common/strings.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Range } from '../../../common/core/range.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IMarkerService, MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nexport class MarkerCoordinate {\n    constructor(marker, index, total) {\n        this.marker = marker;\n        this.index = index;\n        this.total = total;\n    }\n}\nlet MarkerList = class MarkerList {\n    constructor(resourceFilter, _markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._dispoables = new DisposableStore();\n        this._markers = [];\n        this._nextIdx = -1;\n        if (URI.isUri(resourceFilter)) {\n            this._resourceFilter = uri => uri.toString() === resourceFilter.toString();\n        }\n        else if (resourceFilter) {\n            this._resourceFilter = resourceFilter;\n        }\n        const compareOrder = this._configService.getValue('problems.sortOrder');\n        const compareMarker = (a, b) => {\n            let res = compare(a.resource.toString(), b.resource.toString());\n            if (res === 0) {\n                if (compareOrder === 'position') {\n                    res = Range.compareRangesUsingStarts(a, b) || MarkerSeverity.compare(a.severity, b.severity);\n                }\n                else {\n                    res = MarkerSeverity.compare(a.severity, b.severity) || Range.compareRangesUsingStarts(a, b);\n                }\n            }\n            return res;\n        };\n        const updateMarker = () => {\n            this._markers = this._markerService.read({\n                resource: URI.isUri(resourceFilter) ? resourceFilter : undefined,\n                severities: MarkerSeverity.Error | MarkerSeverity.Warning | MarkerSeverity.Info\n            });\n            if (typeof resourceFilter === 'function') {\n                this._markers = this._markers.filter(m => this._resourceFilter(m.resource));\n            }\n            this._markers.sort(compareMarker);\n        };\n        updateMarker();\n        this._dispoables.add(_markerService.onMarkerChanged(uris => {\n            if (!this._resourceFilter || uris.some(uri => this._resourceFilter(uri))) {\n                updateMarker();\n                this._nextIdx = -1;\n                this._onDidChange.fire();\n            }\n        }));\n    }\n    dispose() {\n        this._dispoables.dispose();\n        this._onDidChange.dispose();\n    }\n    matches(uri) {\n        if (!this._resourceFilter && !uri) {\n            return true;\n        }\n        if (!this._resourceFilter || !uri) {\n            return false;\n        }\n        return this._resourceFilter(uri);\n    }\n    get selected() {\n        const marker = this._markers[this._nextIdx];\n        return marker && new MarkerCoordinate(marker, this._nextIdx + 1, this._markers.length);\n    }\n    _initIdx(model, position, fwd) {\n        let found = false;\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === model.uri.toString());\n        if (idx < 0) {\n            idx = binarySearch(this._markers, { resource: model.uri }, (a, b) => compare(a.resource.toString(), b.resource.toString()));\n            if (idx < 0) {\n                idx = ~idx;\n            }\n        }\n        for (let i = idx; i < this._markers.length; i++) {\n            let range = Range.lift(this._markers[i]);\n            if (range.isEmpty()) {\n                const word = model.getWordAtPosition(range.getStartPosition());\n                if (word) {\n                    range = new Range(range.startLineNumber, word.startColumn, range.startLineNumber, word.endColumn);\n                }\n            }\n            if (position && (range.containsPosition(position) || position.isBeforeOrEqual(range.getStartPosition()))) {\n                this._nextIdx = i;\n                found = true;\n                break;\n            }\n            if (this._markers[i].resource.toString() !== model.uri.toString()) {\n                break;\n            }\n        }\n        if (!found) {\n            // after the last change\n            this._nextIdx = fwd ? 0 : this._markers.length - 1;\n        }\n        if (this._nextIdx < 0) {\n            this._nextIdx = this._markers.length - 1;\n        }\n    }\n    resetIndex() {\n        this._nextIdx = -1;\n    }\n    move(fwd, model, position) {\n        if (this._markers.length === 0) {\n            return false;\n        }\n        const oldIdx = this._nextIdx;\n        if (this._nextIdx === -1) {\n            this._initIdx(model, position, fwd);\n        }\n        else if (fwd) {\n            this._nextIdx = (this._nextIdx + 1) % this._markers.length;\n        }\n        else if (!fwd) {\n            this._nextIdx = (this._nextIdx - 1 + this._markers.length) % this._markers.length;\n        }\n        if (oldIdx !== this._nextIdx) {\n            return true;\n        }\n        return false;\n    }\n    find(uri, position) {\n        let idx = this._markers.findIndex(marker => marker.resource.toString() === uri.toString());\n        if (idx < 0) {\n            return undefined;\n        }\n        for (; idx < this._markers.length; idx++) {\n            if (Range.containsPosition(this._markers[idx], position)) {\n                return new MarkerCoordinate(this._markers[idx], idx + 1, this._markers.length);\n            }\n        }\n        return undefined;\n    }\n};\nMarkerList = __decorate([\n    __param(1, IMarkerService),\n    __param(2, IConfigurationService)\n], MarkerList);\nexport { MarkerList };\nexport const IMarkerNavigationService = createDecorator('IMarkerNavigationService');\nlet MarkerNavigationService = class MarkerNavigationService {\n    constructor(_markerService, _configService) {\n        this._markerService = _markerService;\n        this._configService = _configService;\n        this._provider = new LinkedList();\n    }\n    getMarkerList(resource) {\n        for (const provider of this._provider) {\n            const result = provider.getMarkerList(resource);\n            if (result) {\n                return result;\n            }\n        }\n        // default\n        return new MarkerList(resource, this._markerService, this._configService);\n    }\n};\nMarkerNavigationService = __decorate([\n    __param(0, IMarkerService),\n    __param(1, IConfigurationService)\n], MarkerNavigationService);\nregisterSingleton(IMarkerNavigationService, MarkerNavigationService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar MarkerNavigationWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { splitLines } from '../../../../base/common/strings.js';\nimport './media/gotoErrorWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { peekViewTitleForeground, peekViewTitleInfoForeground, PeekViewWidget } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { createAndFillInActionBarActions } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { MarkerSeverity } from '../../../../platform/markers/common/markers.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { SeverityIcon } from '../../../../platform/severityIcon/browser/severityIcon.js';\nimport { contrastBorder, editorBackground, editorErrorBorder, editorErrorForeground, editorInfoBorder, editorInfoForeground, editorWarningBorder, editorWarningForeground, oneOf, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nclass MessageWidget {\n    constructor(parent, editor, onRelatedInformation, _openerService, _labelService) {\n        this._openerService = _openerService;\n        this._labelService = _labelService;\n        this._lines = 0;\n        this._longestLineLength = 0;\n        this._relatedDiagnostics = new WeakMap();\n        this._disposables = new DisposableStore();\n        this._editor = editor;\n        const domNode = document.createElement('div');\n        domNode.className = 'descriptioncontainer';\n        this._messageBlock = document.createElement('div');\n        this._messageBlock.classList.add('message');\n        this._messageBlock.setAttribute('aria-live', 'assertive');\n        this._messageBlock.setAttribute('role', 'alert');\n        domNode.appendChild(this._messageBlock);\n        this._relatedBlock = document.createElement('div');\n        domNode.appendChild(this._relatedBlock);\n        this._disposables.add(dom.addStandardDisposableListener(this._relatedBlock, 'click', event => {\n            event.preventDefault();\n            const related = this._relatedDiagnostics.get(event.target);\n            if (related) {\n                onRelatedInformation(related);\n            }\n        }));\n        this._scrollable = new ScrollableElement(domNode, {\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: 1 /* ScrollbarVisibility.Auto */,\n            useShadows: false,\n            horizontalScrollbarSize: 6,\n            verticalScrollbarSize: 6\n        });\n        parent.appendChild(this._scrollable.getDomNode());\n        this._disposables.add(this._scrollable.onScroll(e => {\n            domNode.style.left = `-${e.scrollLeft}px`;\n            domNode.style.top = `-${e.scrollTop}px`;\n        }));\n        this._disposables.add(this._scrollable);\n    }\n    dispose() {\n        dispose(this._disposables);\n    }\n    update(marker) {\n        const { source, message, relatedInformation, code } = marker;\n        let sourceAndCodeLength = ((source === null || source === void 0 ? void 0 : source.length) || 0) + '()'.length;\n        if (code) {\n            if (typeof code === 'string') {\n                sourceAndCodeLength += code.length;\n            }\n            else {\n                sourceAndCodeLength += code.value.length;\n            }\n        }\n        const lines = splitLines(message);\n        this._lines = lines.length;\n        this._longestLineLength = 0;\n        for (const line of lines) {\n            this._longestLineLength = Math.max(line.length + sourceAndCodeLength, this._longestLineLength);\n        }\n        dom.clearNode(this._messageBlock);\n        this._messageBlock.setAttribute('aria-label', this.getAriaLabel(marker));\n        this._editor.applyFontInfo(this._messageBlock);\n        let lastLineElement = this._messageBlock;\n        for (const line of lines) {\n            lastLineElement = document.createElement('div');\n            lastLineElement.innerText = line;\n            if (line === '') {\n                lastLineElement.style.height = this._messageBlock.style.lineHeight;\n            }\n            this._messageBlock.appendChild(lastLineElement);\n        }\n        if (source || code) {\n            const detailsElement = document.createElement('span');\n            detailsElement.classList.add('details');\n            lastLineElement.appendChild(detailsElement);\n            if (source) {\n                const sourceElement = document.createElement('span');\n                sourceElement.innerText = source;\n                sourceElement.classList.add('source');\n                detailsElement.appendChild(sourceElement);\n            }\n            if (code) {\n                if (typeof code === 'string') {\n                    const codeElement = document.createElement('span');\n                    codeElement.innerText = `(${code})`;\n                    codeElement.classList.add('code');\n                    detailsElement.appendChild(codeElement);\n                }\n                else {\n                    this._codeLink = dom.$('a.code-link');\n                    this._codeLink.setAttribute('href', `${code.target.toString()}`);\n                    this._codeLink.onclick = (e) => {\n                        this._openerService.open(code.target, { allowCommands: true });\n                        e.preventDefault();\n                        e.stopPropagation();\n                    };\n                    const codeElement = dom.append(this._codeLink, dom.$('span'));\n                    codeElement.innerText = code.value;\n                    detailsElement.appendChild(this._codeLink);\n                }\n            }\n        }\n        dom.clearNode(this._relatedBlock);\n        this._editor.applyFontInfo(this._relatedBlock);\n        if (isNonEmptyArray(relatedInformation)) {\n            const relatedInformationNode = this._relatedBlock.appendChild(document.createElement('div'));\n            relatedInformationNode.style.paddingTop = `${Math.floor(this._editor.getOption(66 /* EditorOption.lineHeight */) * 0.66)}px`;\n            this._lines += 1;\n            for (const related of relatedInformation) {\n                const container = document.createElement('div');\n                const relatedResource = document.createElement('a');\n                relatedResource.classList.add('filename');\n                relatedResource.innerText = `${this._labelService.getUriBasenameLabel(related.resource)}(${related.startLineNumber}, ${related.startColumn}): `;\n                relatedResource.title = this._labelService.getUriLabel(related.resource);\n                this._relatedDiagnostics.set(relatedResource, related);\n                const relatedMessage = document.createElement('span');\n                relatedMessage.innerText = related.message;\n                container.appendChild(relatedResource);\n                container.appendChild(relatedMessage);\n                this._lines += 1;\n                relatedInformationNode.appendChild(container);\n            }\n        }\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n        const scrollWidth = Math.ceil(fontInfo.typicalFullwidthCharacterWidth * this._longestLineLength * 0.75);\n        const scrollHeight = fontInfo.lineHeight * this._lines;\n        this._scrollable.setScrollDimensions({ scrollWidth, scrollHeight });\n    }\n    layout(height, width) {\n        this._scrollable.getDomNode().style.height = `${height}px`;\n        this._scrollable.getDomNode().style.width = `${width}px`;\n        this._scrollable.setScrollDimensions({ width, height });\n    }\n    getHeightInLines() {\n        return Math.min(17, this._lines);\n    }\n    getAriaLabel(marker) {\n        let severityLabel = '';\n        switch (marker.severity) {\n            case MarkerSeverity.Error:\n                severityLabel = nls.localize('Error', \"Error\");\n                break;\n            case MarkerSeverity.Warning:\n                severityLabel = nls.localize('Warning', \"Warning\");\n                break;\n            case MarkerSeverity.Info:\n                severityLabel = nls.localize('Info', \"Info\");\n                break;\n            case MarkerSeverity.Hint:\n                severityLabel = nls.localize('Hint', \"Hint\");\n                break;\n        }\n        let ariaLabel = nls.localize('marker aria', \"{0} at {1}. \", severityLabel, marker.startLineNumber + ':' + marker.startColumn);\n        const model = this._editor.getModel();\n        if (model && (marker.startLineNumber <= model.getLineCount()) && (marker.startLineNumber >= 1)) {\n            const lineContent = model.getLineContent(marker.startLineNumber);\n            ariaLabel = `${lineContent}, ${ariaLabel}`;\n        }\n        return ariaLabel;\n    }\n}\nlet MarkerNavigationWidget = MarkerNavigationWidget_1 = class MarkerNavigationWidget extends PeekViewWidget {\n    constructor(editor, _themeService, _openerService, _menuService, instantiationService, _contextKeyService, _labelService) {\n        super(editor, { showArrow: true, showFrame: true, isAccessible: true, frameWidth: 1 }, instantiationService);\n        this._themeService = _themeService;\n        this._openerService = _openerService;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._labelService = _labelService;\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectRelatedInformation = new Emitter();\n        this.onDidSelectRelatedInformation = this._onDidSelectRelatedInformation.event;\n        this._severity = MarkerSeverity.Warning;\n        this._backgroundColor = Color.white;\n        this._applyTheme(_themeService.getColorTheme());\n        this._callOnDispose.add(_themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this.create();\n    }\n    _applyTheme(theme) {\n        this._backgroundColor = theme.getColor(editorMarkerNavigationBackground);\n        let colorId = editorMarkerNavigationError;\n        let headerBackground = editorMarkerNavigationErrorHeader;\n        if (this._severity === MarkerSeverity.Warning) {\n            colorId = editorMarkerNavigationWarning;\n            headerBackground = editorMarkerNavigationWarningHeader;\n        }\n        else if (this._severity === MarkerSeverity.Info) {\n            colorId = editorMarkerNavigationInfo;\n            headerBackground = editorMarkerNavigationInfoHeader;\n        }\n        const frameColor = theme.getColor(colorId);\n        const headerBg = theme.getColor(headerBackground);\n        this.style({\n            arrowColor: frameColor,\n            frameColor: frameColor,\n            headerBackgroundColor: headerBg,\n            primaryHeadingColor: theme.getColor(peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekViewTitleInfoForeground)\n        }); // style() will trigger _applyStyles\n    }\n    _applyStyles() {\n        if (this._parentContainer) {\n            this._parentContainer.style.backgroundColor = this._backgroundColor ? this._backgroundColor.toString() : '';\n        }\n        super._applyStyles();\n    }\n    dispose() {\n        this._callOnDispose.dispose();\n        super.dispose();\n    }\n    _fillHead(container) {\n        super._fillHead(container);\n        this._disposables.add(this._actionbarWidget.actionRunner.onWillRun(e => this.editor.focus()));\n        const actions = [];\n        const menu = this._menuService.createMenu(MarkerNavigationWidget_1.TitleMenu, this._contextKeyService);\n        createAndFillInActionBarActions(menu, undefined, actions);\n        this._actionbarWidget.push(actions, { label: false, icon: true, index: 0 });\n        menu.dispose();\n    }\n    _fillTitleIcon(container) {\n        this._icon = dom.append(container, dom.$(''));\n    }\n    _fillBody(container) {\n        this._parentContainer = container;\n        container.classList.add('marker-widget');\n        this._parentContainer.tabIndex = 0;\n        this._parentContainer.setAttribute('role', 'tooltip');\n        this._container = document.createElement('div');\n        container.appendChild(this._container);\n        this._message = new MessageWidget(this._container, this.editor, related => this._onDidSelectRelatedInformation.fire(related), this._openerService, this._labelService);\n        this._disposables.add(this._message);\n    }\n    show() {\n        throw new Error('call showAtMarker');\n    }\n    showAtMarker(marker, markerIdx, markerCount) {\n        // update:\n        // * title\n        // * message\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n        // update frame color (only applied on 'show')\n        this._severity = marker.severity;\n        this._applyTheme(this._themeService.getColorTheme());\n        // show\n        const range = Range.lift(marker);\n        const editorPosition = this.editor.getPosition();\n        const position = editorPosition && range.containsPosition(editorPosition) ? editorPosition : range.getStartPosition();\n        super.show(position, this.computeRequiredHeight());\n        const model = this.editor.getModel();\n        if (model) {\n            const detail = markerCount > 1\n                ? nls.localize('problems', \"{0} of {1} problems\", markerIdx, markerCount)\n                : nls.localize('change', \"{0} of {1} problem\", markerIdx, markerCount);\n            this.setTitle(basename(model.uri), detail);\n        }\n        this._icon.className = `codicon ${SeverityIcon.className(MarkerSeverity.toSeverity(this._severity))}`;\n        this.editor.revealPositionNearTop(position, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    updateMarker(marker) {\n        this._container.classList.remove('stale');\n        this._message.update(marker);\n    }\n    showStale() {\n        this._container.classList.add('stale');\n        this._relayout();\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._heightInPixel = heightInPixel;\n        this._message.layout(heightInPixel, widthInPixel);\n        this._container.style.height = `${heightInPixel}px`;\n    }\n    _onWidth(widthInPixel) {\n        this._message.layout(this._heightInPixel, widthInPixel);\n    }\n    _relayout() {\n        super._relayout(this.computeRequiredHeight());\n    }\n    computeRequiredHeight() {\n        return 3 + this._message.getHeightInLines();\n    }\n};\nMarkerNavigationWidget.TitleMenu = new MenuId('gotoErrorTitleMenu');\nMarkerNavigationWidget = MarkerNavigationWidget_1 = __decorate([\n    __param(1, IThemeService),\n    __param(2, IOpenerService),\n    __param(3, IMenuService),\n    __param(4, IInstantiationService),\n    __param(5, IContextKeyService),\n    __param(6, ILabelService)\n], MarkerNavigationWidget);\nexport { MarkerNavigationWidget };\n// theming\nconst errorDefault = oneOf(editorErrorForeground, editorErrorBorder);\nconst warningDefault = oneOf(editorWarningForeground, editorWarningBorder);\nconst infoDefault = oneOf(editorInfoForeground, editorInfoBorder);\nconst editorMarkerNavigationError = registerColor('editorMarkerNavigationError.background', { dark: errorDefault, light: errorDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationError', 'Editor marker navigation widget error color.'));\nconst editorMarkerNavigationErrorHeader = registerColor('editorMarkerNavigationError.headerBackground', { dark: transparent(editorMarkerNavigationError, .1), light: transparent(editorMarkerNavigationError, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationErrorHeaderBackground', 'Editor marker navigation widget error heading background.'));\nconst editorMarkerNavigationWarning = registerColor('editorMarkerNavigationWarning.background', { dark: warningDefault, light: warningDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationWarning', 'Editor marker navigation widget warning color.'));\nconst editorMarkerNavigationWarningHeader = registerColor('editorMarkerNavigationWarning.headerBackground', { dark: transparent(editorMarkerNavigationWarning, .1), light: transparent(editorMarkerNavigationWarning, .1), hcDark: '#0C141F', hcLight: transparent(editorMarkerNavigationWarning, .2) }, nls.localize('editorMarkerNavigationWarningBackground', 'Editor marker navigation widget warning heading background.'));\nconst editorMarkerNavigationInfo = registerColor('editorMarkerNavigationInfo.background', { dark: infoDefault, light: infoDefault, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('editorMarkerNavigationInfo', 'Editor marker navigation widget info color.'));\nconst editorMarkerNavigationInfoHeader = registerColor('editorMarkerNavigationInfo.headerBackground', { dark: transparent(editorMarkerNavigationInfo, .1), light: transparent(editorMarkerNavigationInfo, .1), hcDark: null, hcLight: null }, nls.localize('editorMarkerNavigationInfoHeaderBackground', 'Editor marker navigation widget info heading background.'));\nconst editorMarkerNavigationBackground = registerColor('editorMarkerNavigation.background', { dark: editorBackground, light: editorBackground, hcDark: editorBackground, hcLight: editorBackground }, nls.localize('editorMarkerNavigationBackground', 'Editor marker navigation widget background.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar MarkerController_1;\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { IMarkerNavigationService } from './markerNavigationService.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { MarkerNavigationWidget } from './gotoErrorWidget.js';\nlet MarkerController = MarkerController_1 = class MarkerController {\n    static get(editor) {\n        return editor.getContribution(MarkerController_1.ID);\n    }\n    constructor(editor, _markerNavigationService, _contextKeyService, _editorService, _instantiationService) {\n        this._markerNavigationService = _markerNavigationService;\n        this._contextKeyService = _contextKeyService;\n        this._editorService = _editorService;\n        this._instantiationService = _instantiationService;\n        this._sessionDispoables = new DisposableStore();\n        this._editor = editor;\n        this._widgetVisible = CONTEXT_MARKERS_NAVIGATION_VISIBLE.bindTo(this._contextKeyService);\n    }\n    dispose() {\n        this._cleanUp();\n        this._sessionDispoables.dispose();\n    }\n    _cleanUp() {\n        this._widgetVisible.reset();\n        this._sessionDispoables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    _getOrCreateModel(uri) {\n        if (this._model && this._model.matches(uri)) {\n            return this._model;\n        }\n        let reusePosition = false;\n        if (this._model) {\n            reusePosition = true;\n            this._cleanUp();\n        }\n        this._model = this._markerNavigationService.getMarkerList(uri);\n        if (reusePosition) {\n            this._model.move(true, this._editor.getModel(), this._editor.getPosition());\n        }\n        this._widget = this._instantiationService.createInstance(MarkerNavigationWidget, this._editor);\n        this._widget.onDidClose(() => this.close(), this, this._sessionDispoables);\n        this._widgetVisible.set(true);\n        this._sessionDispoables.add(this._model);\n        this._sessionDispoables.add(this._widget);\n        // follow cursor\n        this._sessionDispoables.add(this._editor.onDidChangeCursorPosition(e => {\n            var _a, _b, _c;\n            if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.selected) || !Range.containsPosition((_b = this._model) === null || _b === void 0 ? void 0 : _b.selected.marker, e.position)) {\n                (_c = this._model) === null || _c === void 0 ? void 0 : _c.resetIndex();\n            }\n        }));\n        // update markers\n        this._sessionDispoables.add(this._model.onDidChange(() => {\n            if (!this._widget || !this._widget.position || !this._model) {\n                return;\n            }\n            const info = this._model.find(this._editor.getModel().uri, this._widget.position);\n            if (info) {\n                this._widget.updateMarker(info.marker);\n            }\n            else {\n                this._widget.showStale();\n            }\n        }));\n        // open related\n        this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation(related => {\n            this._editorService.openCodeEditor({\n                resource: related.resource,\n                options: { pinned: true, revealIfOpened: true, selection: Range.lift(related).collapseToStart() }\n            }, this._editor);\n            this.close(false);\n        }));\n        this._sessionDispoables.add(this._editor.onDidChangeModel(() => this._cleanUp()));\n        return this._model;\n    }\n    close(focusEditor = true) {\n        this._cleanUp();\n        if (focusEditor) {\n            this._editor.focus();\n        }\n    }\n    showAtMarker(marker) {\n        if (this._editor.hasModel()) {\n            const model = this._getOrCreateModel(this._editor.getModel().uri);\n            model.resetIndex();\n            model.move(true, this._editor.getModel(), new Position(marker.startLineNumber, marker.startColumn));\n            if (model.selected) {\n                this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n            }\n        }\n    }\n    nagivate(next, multiFile) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.hasModel()) {\n                const model = this._getOrCreateModel(multiFile ? undefined : this._editor.getModel().uri);\n                model.move(next, this._editor.getModel(), this._editor.getPosition());\n                if (!model.selected) {\n                    return;\n                }\n                if (model.selected.marker.resource.toString() !== this._editor.getModel().uri.toString()) {\n                    // show in different editor\n                    this._cleanUp();\n                    const otherEditor = yield this._editorService.openCodeEditor({\n                        resource: model.selected.marker.resource,\n                        options: { pinned: false, revealIfOpened: true, selectionRevealType: 2 /* TextEditorSelectionRevealType.NearTop */, selection: model.selected.marker }\n                    }, this._editor);\n                    if (otherEditor) {\n                        (_a = MarkerController_1.get(otherEditor)) === null || _a === void 0 ? void 0 : _a.close();\n                        (_b = MarkerController_1.get(otherEditor)) === null || _b === void 0 ? void 0 : _b.nagivate(next, multiFile);\n                    }\n                }\n                else {\n                    // show in this editor\n                    this._widget.showAtMarker(model.selected.marker, model.selected.index, model.selected.total);\n                }\n            }\n        });\n    }\n};\nMarkerController.ID = 'editor.contrib.markerController';\nMarkerController = MarkerController_1 = __decorate([\n    __param(1, IMarkerNavigationService),\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, IInstantiationService)\n], MarkerController);\nexport { MarkerController };\nclass MarkerNavigationAction extends EditorAction {\n    constructor(_next, _multiFile, opts) {\n        super(opts);\n        this._next = _next;\n        this._multiFile = _multiFile;\n    }\n    run(_accessor, editor) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (editor.hasModel()) {\n                (_a = MarkerController.get(editor)) === null || _a === void 0 ? void 0 : _a.nagivate(this._next, this._multiFile);\n            }\n        });\n    }\n}\nexport class NextMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, false, {\n            id: NextMarkerAction.ID,\n            label: NextMarkerAction.LABEL,\n            alias: 'Go to Next Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: NextMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-next', Codicon.arrowDown, nls.localize('nextMarkerIcon', 'Icon for goto next marker.')),\n                group: 'navigation',\n                order: 1\n            }\n        });\n    }\n}\nNextMarkerAction.ID = 'editor.action.marker.next';\nNextMarkerAction.LABEL = nls.localize('markerAction.next.label', \"Go to Next Problem (Error, Warning, Info)\");\nclass PrevMarkerAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, false, {\n            id: PrevMarkerAction.ID,\n            label: PrevMarkerAction.LABEL,\n            alias: 'Go to Previous Problem (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MarkerNavigationWidget.TitleMenu,\n                title: PrevMarkerAction.LABEL,\n                icon: registerIcon('marker-navigation-previous', Codicon.arrowUp, nls.localize('previousMarkerIcon', 'Icon for goto previous marker.')),\n                group: 'navigation',\n                order: 2\n            }\n        });\n    }\n}\nPrevMarkerAction.ID = 'editor.action.marker.prev';\nPrevMarkerAction.LABEL = nls.localize('markerAction.previous.label', \"Go to Previous Problem (Error, Warning, Info)\");\nclass NextMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(true, true, {\n            id: 'editor.action.marker.nextInFiles',\n            label: nls.localize('markerAction.nextInFiles.label', \"Go to Next Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Next Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoNextProblem', comment: ['&& denotes a mnemonic'] }, \"Next &&Problem\"),\n                group: '6_problem_nav',\n                order: 1\n            }\n        });\n    }\n}\nclass PrevMarkerInFilesAction extends MarkerNavigationAction {\n    constructor() {\n        super(false, true, {\n            id: 'editor.action.marker.prevInFiles',\n            label: nls.localize('markerAction.previousInFiles.label', \"Go to Previous Problem in Files (Error, Warning, Info)\"),\n            alias: 'Go to Previous Problem in Files (Error, Warning, Info)',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 1024 /* KeyMod.Shift */ | 66 /* KeyCode.F8 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarGoMenu,\n                title: nls.localize({ key: 'miGotoPreviousProblem', comment: ['&& denotes a mnemonic'] }, \"Previous &&Problem\"),\n                group: '6_problem_nav',\n                order: 2\n            }\n        });\n    }\n}\nregisterEditorContribution(MarkerController.ID, MarkerController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(NextMarkerAction);\nregisterEditorAction(PrevMarkerAction);\nregisterEditorAction(NextMarkerInFilesAction);\nregisterEditorAction(PrevMarkerInFilesAction);\nconst CONTEXT_MARKERS_NAVIGATION_VISIBLE = new RawContextKey('markersNavigationVisible', false);\nconst MarkerCommand = EditorCommand.bindToContribution(MarkerController.get);\nregisterEditorCommand(new MarkerCommand({\n    id: 'closeMarkersNavigation',\n    precondition: CONTEXT_MARKERS_NAVIGATION_VISIBLE,\n    handler: x => x.close(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 50,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Emitter } from '../../../../base/common/event.js';\nimport { combinedDisposable, DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingsRegistry } from '../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nexport const ctxHasSymbols = new RawContextKey('hasSymbols', false, localize('hasSymbols', \"Whether there are symbol locations that can be navigated via keyboard-only.\"));\nexport const ISymbolNavigationService = createDecorator('ISymbolNavigationService');\nlet SymbolNavigationService = class SymbolNavigationService {\n    constructor(contextKeyService, _editorService, _notificationService, _keybindingService) {\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._keybindingService = _keybindingService;\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n        this._ignoreEditorChange = false;\n        this._ctxHasSymbols = ctxHasSymbols.bindTo(contextKeyService);\n    }\n    reset() {\n        var _a, _b;\n        this._ctxHasSymbols.reset();\n        (_a = this._currentState) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentMessage) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._currentModel = undefined;\n        this._currentIdx = -1;\n    }\n    put(anchor) {\n        const refModel = anchor.parent.parent;\n        if (refModel.references.length <= 1) {\n            this.reset();\n            return;\n        }\n        this._currentModel = refModel;\n        this._currentIdx = refModel.references.indexOf(anchor);\n        this._ctxHasSymbols.set(true);\n        this._showMessage();\n        const editorState = new EditorState(this._editorService);\n        const listener = editorState.onDidChange(_ => {\n            if (this._ignoreEditorChange) {\n                return;\n            }\n            const editor = this._editorService.getActiveCodeEditor();\n            if (!editor) {\n                return;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!model || !position) {\n                return;\n            }\n            let seenUri = false;\n            let seenPosition = false;\n            for (const reference of refModel.references) {\n                if (isEqual(reference.uri, model.uri)) {\n                    seenUri = true;\n                    seenPosition = seenPosition || Range.containsPosition(reference.range, position);\n                }\n                else if (seenUri) {\n                    break;\n                }\n            }\n            if (!seenUri || !seenPosition) {\n                this.reset();\n            }\n        });\n        this._currentState = combinedDisposable(editorState, listener);\n    }\n    revealNext(source) {\n        if (!this._currentModel) {\n            return Promise.resolve();\n        }\n        // get next result and advance\n        this._currentIdx += 1;\n        this._currentIdx %= this._currentModel.references.length;\n        const reference = this._currentModel.references[this._currentIdx];\n        // status\n        this._showMessage();\n        // open editor, ignore events while that happens\n        this._ignoreEditorChange = true;\n        return this._editorService.openCodeEditor({\n            resource: reference.uri,\n            options: {\n                selection: Range.collapseToStart(reference.range),\n                selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */\n            }\n        }, source).finally(() => {\n            this._ignoreEditorChange = false;\n        });\n    }\n    _showMessage() {\n        var _a;\n        (_a = this._currentMessage) === null || _a === void 0 ? void 0 : _a.dispose();\n        const kb = this._keybindingService.lookupKeybinding('editor.gotoNextSymbolFromResult');\n        const message = kb\n            ? localize('location.kb', \"Symbol {0} of {1}, {2} for next\", this._currentIdx + 1, this._currentModel.references.length, kb.getLabel())\n            : localize('location', \"Symbol {0} of {1}\", this._currentIdx + 1, this._currentModel.references.length);\n        this._currentMessage = this._notificationService.status(message);\n    }\n};\nSymbolNavigationService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICodeEditorService),\n    __param(2, INotificationService),\n    __param(3, IKeybindingService)\n], SymbolNavigationService);\nregisterSingleton(ISymbolNavigationService, SymbolNavigationService, 1 /* InstantiationType.Delayed */);\nregisterEditorCommand(new class extends EditorCommand {\n    constructor() {\n        super({\n            id: 'editor.gotoNextSymbolFromResult',\n            precondition: ctxHasSymbols,\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                primary: 70 /* KeyCode.F12 */\n            }\n        });\n    }\n    runEditorCommand(accessor, editor) {\n        return accessor.get(ISymbolNavigationService).revealNext(editor);\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'editor.gotoNextSymbolFromResult.cancel',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    when: ctxHasSymbols,\n    primary: 9 /* KeyCode.Escape */,\n    handler(accessor) {\n        accessor.get(ISymbolNavigationService).reset();\n    }\n});\n//\nlet EditorState = class EditorState {\n    constructor(editorService) {\n        this._listener = new Map();\n        this._disposables = new DisposableStore();\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n        this._disposables.add(editorService.onCodeEditorRemove(this._onDidRemoveEditor, this));\n        this._disposables.add(editorService.onCodeEditorAdd(this._onDidAddEditor, this));\n        editorService.listCodeEditors().forEach(this._onDidAddEditor, this);\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._onDidChange.dispose();\n        dispose(this._listener.values());\n    }\n    _onDidAddEditor(editor) {\n        this._listener.set(editor, combinedDisposable(editor.onDidChangeCursorPosition(_ => this._onDidChange.fire({ editor })), editor.onDidChangeModelContent(_ => this._onDidChange.fire({ editor }))));\n    }\n    _onDidRemoveEditor(editor) {\n        var _a;\n        (_a = this._listener.get(editor)) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._listener.delete(editor);\n    }\n};\nEditorState = __decorate([\n    __param(0, ICodeEditorService)\n], EditorState);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar _a, _b, _c, _d, _e, _f, _g, _h;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { createCancelablePromise, raceCancellation } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { isCodeEditor } from '../../../browser/editorBrowser.js';\nimport { EditorAction2 } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport * as corePosition from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { isLocationLink } from '../../../common/languages.js';\nimport { ReferencesController } from './peek/referencesController.js';\nimport { ReferencesModel } from './referencesModel.js';\nimport { ISymbolNavigationService } from './symbolNavigation.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport { PeekContext } from '../../peekView/browser/peekView.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { getDeclarationsAtPosition, getDefinitionsAtPosition, getImplementationsAtPosition, getReferencesAtPosition, getTypeDefinitionsAtPosition } from './goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { IsWebContext } from '../../../../platform/contextkey/common/contextkeys.js';\nMenuRegistry.appendMenuItem(MenuId.EditorContext, {\n    submenu: MenuId.EditorContextPeek,\n    title: nls.localize('peek.submenu', \"Peek\"),\n    group: 'navigation',\n    order: 100\n});\nexport class SymbolNavigationAnchor {\n    static is(thing) {\n        if (!thing || typeof thing !== 'object') {\n            return false;\n        }\n        if (thing instanceof SymbolNavigationAnchor) {\n            return true;\n        }\n        if (corePosition.Position.isIPosition(thing.position) && thing.model) {\n            return true;\n        }\n        return false;\n    }\n    constructor(model, position) {\n        this.model = model;\n        this.position = position;\n    }\n}\nexport class SymbolNavigationAction extends EditorAction2 {\n    static all() {\n        return SymbolNavigationAction._allSymbolNavigationCommands.values();\n    }\n    static _patchConfig(opts) {\n        const result = Object.assign(Object.assign({}, opts), { f1: true });\n        // patch context menu when clause\n        if (result.menu) {\n            for (const item of Iterable.wrap(result.menu)) {\n                if (item.id === MenuId.EditorContext || item.id === MenuId.EditorContextPeek) {\n                    item.when = ContextKeyExpr.and(opts.precondition, item.when);\n                }\n            }\n        }\n        return result;\n    }\n    constructor(configuration, opts) {\n        super(SymbolNavigationAction._patchConfig(opts));\n        this.configuration = configuration;\n        SymbolNavigationAction._allSymbolNavigationCommands.set(opts.id, this);\n    }\n    runEditorCommand(accessor, editor, arg, range) {\n        if (!editor.hasModel()) {\n            return Promise.resolve(undefined);\n        }\n        const notificationService = accessor.get(INotificationService);\n        const editorService = accessor.get(ICodeEditorService);\n        const progressService = accessor.get(IEditorProgressService);\n        const symbolNavService = accessor.get(ISymbolNavigationService);\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const instaService = accessor.get(IInstantiationService);\n        const model = editor.getModel();\n        const position = editor.getPosition();\n        const anchor = SymbolNavigationAnchor.is(arg) ? arg : new SymbolNavigationAnchor(model, position);\n        const cts = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */ | 4 /* CodeEditorStateFlag.Position */);\n        const promise = raceCancellation(this._getLocationModel(languageFeaturesService, anchor.model, anchor.position, cts.token), cts.token).then((references) => __awaiter(this, void 0, void 0, function* () {\n            var _j;\n            if (!references || cts.token.isCancellationRequested) {\n                return;\n            }\n            alert(references.ariaMessage);\n            let altAction;\n            if (references.referenceAt(model.uri, position)) {\n                const altActionId = this._getAlternativeCommand(editor);\n                if (!SymbolNavigationAction._activeAlternativeCommands.has(altActionId) && SymbolNavigationAction._allSymbolNavigationCommands.has(altActionId)) {\n                    altAction = SymbolNavigationAction._allSymbolNavigationCommands.get(altActionId);\n                }\n            }\n            const referenceCount = references.references.length;\n            if (referenceCount === 0) {\n                // no result -> show message\n                if (!this.configuration.muteMessage) {\n                    const info = model.getWordAtPosition(position);\n                    (_j = MessageController.get(editor)) === null || _j === void 0 ? void 0 : _j.showMessage(this._getNoResultFoundMessage(info), position);\n                }\n            }\n            else if (referenceCount === 1 && altAction) {\n                // already at the only result, run alternative\n                SymbolNavigationAction._activeAlternativeCommands.add(this.desc.id);\n                instaService.invokeFunction((accessor) => altAction.runEditorCommand(accessor, editor, arg, range).finally(() => {\n                    SymbolNavigationAction._activeAlternativeCommands.delete(this.desc.id);\n                }));\n            }\n            else {\n                // normal results handling\n                return this._onResult(editorService, symbolNavService, editor, references, range);\n            }\n        }), (err) => {\n            // report an error\n            notificationService.error(err);\n        }).finally(() => {\n            cts.dispose();\n        });\n        progressService.showWhile(promise, 250);\n        return promise;\n    }\n    _onResult(editorService, symbolNavService, editor, model, range) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const gotoLocation = this._getGoToPreference(editor);\n            if (!(editor instanceof EmbeddedCodeEditorWidget) && (this.configuration.openInPeek || (gotoLocation === 'peek' && model.references.length > 1))) {\n                this._openInPeek(editor, model, range);\n            }\n            else {\n                const next = model.firstReference();\n                const peek = model.references.length > 1 && gotoLocation === 'gotoAndPeek';\n                const targetEditor = yield this._openReference(editor, editorService, next, this.configuration.openToSide, !peek);\n                if (peek && targetEditor) {\n                    this._openInPeek(targetEditor, model, range);\n                }\n                else {\n                    model.dispose();\n                }\n                // keep remaining locations around when using\n                // 'goto'-mode\n                if (gotoLocation === 'goto') {\n                    symbolNavService.put(next);\n                }\n            }\n        });\n    }\n    _openReference(editor, editorService, reference, sideBySide, highlight) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // range is the target-selection-range when we have one\n            // and the fallback is the 'full' range\n            let range = undefined;\n            if (isLocationLink(reference)) {\n                range = reference.targetSelectionRange;\n            }\n            if (!range) {\n                range = reference.range;\n            }\n            if (!range) {\n                return undefined;\n            }\n            const targetEditor = yield editorService.openCodeEditor({\n                resource: reference.uri,\n                options: {\n                    selection: Range.collapseToStart(range),\n                    selectionRevealType: 3 /* TextEditorSelectionRevealType.NearTopIfOutsideViewport */,\n                    selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */\n                }\n            }, editor, sideBySide);\n            if (!targetEditor) {\n                return undefined;\n            }\n            if (highlight) {\n                const modelNow = targetEditor.getModel();\n                const decorations = targetEditor.createDecorationsCollection([{ range, options: { description: 'symbol-navigate-action-highlight', className: 'symbolHighlight' } }]);\n                setTimeout(() => {\n                    if (targetEditor.getModel() === modelNow) {\n                        decorations.clear();\n                    }\n                }, 350);\n            }\n            return targetEditor;\n        });\n    }\n    _openInPeek(target, model, range) {\n        const controller = ReferencesController.get(target);\n        if (controller && target.hasModel()) {\n            controller.toggleWidget(range !== null && range !== void 0 ? range : target.getSelection(), createCancelablePromise(_ => Promise.resolve(model)), this.configuration.openInPeek);\n        }\n        else {\n            model.dispose();\n        }\n    }\n}\nSymbolNavigationAction._allSymbolNavigationCommands = new Map();\nSymbolNavigationAction._activeAlternativeCommands = new Set();\n//#region --- DEFINITION\nexport class DefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, token), nls.localize('def.title', 'Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('noResultWord', \"No definition found for '{0}'\", info.word)\n            : nls.localize('generic.noResults', \"No definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleDefinitions;\n    }\n}\nregisterAction2((_a = class GoToDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: _a.id,\n                title: {\n                    value: nls.localize('actions.goToDecl.label', \"Go to Definition\"),\n                    original: 'Go to Definition',\n                    mnemonicTitle: nls.localize({ key: 'miGotoDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Definition\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: [{\n                        when: EditorContextKeys.editorTextFocus,\n                        primary: 70 /* KeyCode.F12 */,\n                        weight: 100 /* KeybindingWeight.EditorContrib */\n                    }, {\n                        when: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, IsWebContext),\n                        primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\n                        weight: 100 /* KeybindingWeight.EditorContrib */\n                    }],\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.1\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 2,\n                    }]\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.goToDeclaration', _a.id);\n        }\n    },\n    _a.id = 'editor.action.revealDefinition',\n    _a));\nregisterAction2((_b = class OpenDefinitionToSideAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: true,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: _b.id,\n                title: {\n                    value: nls.localize('actions.goToDeclToSide.label', \"Open Definition to the Side\"),\n                    original: 'Open Definition to the Side'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: [{\n                        when: EditorContextKeys.editorTextFocus,\n                        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 70 /* KeyCode.F12 */),\n                        weight: 100 /* KeybindingWeight.EditorContrib */\n                    }, {\n                        when: ContextKeyExpr.and(EditorContextKeys.editorTextFocus, IsWebContext),\n                        primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */),\n                        weight: 100 /* KeybindingWeight.EditorContrib */\n                    }]\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.openDeclarationToTheSide', _b.id);\n        }\n    },\n    _b.id = 'editor.action.revealDefinitionAside',\n    _b));\nregisterAction2((_c = class PeekDefinitionAction extends DefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: _c.id,\n                title: {\n                    value: nls.localize('actions.previewDecl.label', \"Peek Definition\"),\n                    original: 'Peek Definition'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 512 /* KeyMod.Alt */ | 70 /* KeyCode.F12 */,\n                    linux: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 68 /* KeyCode.F10 */ },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: {\n                    id: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 2\n                }\n            });\n            CommandsRegistry.registerCommandAlias('editor.action.previewDeclaration', _c.id);\n        }\n    },\n    _c.id = 'editor.action.peekDefinition',\n    _c));\n//#endregion\n//#region --- DECLARATION\nclass DeclarationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, token), nls.localize('decl.title', 'Declarations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n            : nls.localize('decl.generic.noResults', \"No declaration found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeDeclarationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleDeclarations;\n    }\n}\nregisterAction2((_d = class GoToDeclarationAction extends DeclarationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: _d.id,\n                title: {\n                    value: nls.localize('actions.goToDeclaration.label', \"Go to Declaration\"),\n                    original: 'Go to Declaration',\n                    mnemonicTitle: nls.localize({ key: 'miGotoDeclaration', comment: ['&& denotes a mnemonic'] }, \"Go to &&Declaration\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.3\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 3,\n                    }],\n            });\n        }\n        _getNoResultFoundMessage(info) {\n            return info && info.word\n                ? nls.localize('decl.noResultWord', \"No declaration found for '{0}'\", info.word)\n                : nls.localize('decl.generic.noResults', \"No declaration found\");\n        }\n    },\n    _d.id = 'editor.action.revealDeclaration',\n    _d));\nregisterAction2(class PeekDeclarationAction extends DeclarationAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.peekDeclaration',\n            title: {\n                value: nls.localize('actions.peekDecl.label', \"Peek Declaration\"),\n                original: 'Peek Declaration'\n            },\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasDeclarationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            menu: {\n                id: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 3\n            }\n        });\n    }\n});\n//#endregion\n//#region --- TYPE DEFINITION\nclass TypeDefinitionAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, token), nls.localize('typedef.title', 'Type Definitions'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToTypeDefinition.noResultWord', \"No type definition found for '{0}'\", info.word)\n            : nls.localize('goToTypeDefinition.generic.noResults', \"No type definition found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeTypeDefinitionCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleTypeDefinitions;\n    }\n}\nregisterAction2((_e = class GoToTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: _e.ID,\n                title: {\n                    value: nls.localize('actions.goToTypeDefinition.label', \"Go to Type Definition\"),\n                    original: 'Go to Type Definition',\n                    mnemonicTitle: nls.localize({ key: 'miGotoTypeDefinition', comment: ['&& denotes a mnemonic'] }, \"Go to &&Type Definition\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 0,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.4\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 3,\n                    }]\n            });\n        }\n    },\n    _e.ID = 'editor.action.goToTypeDefinition',\n    _e));\nregisterAction2((_f = class PeekTypeDefinitionAction extends TypeDefinitionAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: _f.ID,\n                title: {\n                    value: nls.localize('actions.peekTypeDefinition.label', \"Peek Type Definition\"),\n                    original: 'Peek Type Definition'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasTypeDefinitionProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                menu: {\n                    id: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 4\n                }\n            });\n        }\n    },\n    _f.ID = 'editor.action.peekTypeDefinition',\n    _f));\n//#endregion\n//#region --- IMPLEMENTATION\nclass ImplementationAction extends SymbolNavigationAction {\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, token), nls.localize('impl.title', 'Implementations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && info.word\n            ? nls.localize('goToImplementation.noResultWord', \"No implementation found for '{0}'\", info.word)\n            : nls.localize('goToImplementation.generic.noResults', \"No implementation found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeImplementationCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleImplementations;\n    }\n}\nregisterAction2((_g = class GoToImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: false,\n                muteMessage: false\n            }, {\n                id: _g.ID,\n                title: {\n                    value: nls.localize('actions.goToImplementation.label', \"Go to Implementations\"),\n                    original: 'Go to Implementations',\n                    mnemonicTitle: nls.localize({ key: 'miGotoImplementation', comment: ['&& denotes a mnemonic'] }, \"Go to &&Implementations\")\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: [{\n                        id: MenuId.EditorContext,\n                        group: 'navigation',\n                        order: 1.45\n                    }, {\n                        id: MenuId.MenubarGoMenu,\n                        precondition: null,\n                        group: '4_symbol_nav',\n                        order: 4,\n                    }]\n            });\n        }\n    },\n    _g.ID = 'editor.action.goToImplementation',\n    _g));\nregisterAction2((_h = class PeekImplementationAction extends ImplementationAction {\n        constructor() {\n            super({\n                openToSide: false,\n                openInPeek: true,\n                muteMessage: false\n            }, {\n                id: _h.ID,\n                title: {\n                    value: nls.localize('actions.peekImplementation.label', \"Peek Implementations\"),\n                    original: 'Peek Implementations'\n                },\n                precondition: ContextKeyExpr.and(EditorContextKeys.hasImplementationProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n                keybinding: {\n                    when: EditorContextKeys.editorTextFocus,\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                },\n                menu: {\n                    id: MenuId.EditorContextPeek,\n                    group: 'peek',\n                    order: 5\n                }\n            });\n        }\n    },\n    _h.ID = 'editor.action.peekImplementation',\n    _h));\n//#endregion\n//#region --- REFERENCES\nclass ReferencesAction extends SymbolNavigationAction {\n    _getNoResultFoundMessage(info) {\n        return info\n            ? nls.localize('references.no', \"No references found for '{0}'\", info.word)\n            : nls.localize('references.noGeneric', \"No references found\");\n    }\n    _getAlternativeCommand(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).alternativeReferenceCommand;\n    }\n    _getGoToPreference(editor) {\n        return editor.getOption(58 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n}\nregisterAction2(class GoToReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: false,\n            muteMessage: false\n        }, {\n            id: 'editor.action.goToReferences',\n            title: {\n                value: nls.localize('goToReferences.label', \"Go to References\"),\n                original: 'Go to References',\n                mnemonicTitle: nls.localize({ key: 'miGotoReference', comment: ['&& denotes a mnemonic'] }, \"Go to &&References\")\n            },\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            keybinding: {\n                when: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menu: [{\n                    id: MenuId.EditorContext,\n                    group: 'navigation',\n                    order: 1.45\n                }, {\n                    id: MenuId.MenubarGoMenu,\n                    precondition: null,\n                    group: '4_symbol_nav',\n                    order: 5,\n                }]\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, true, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\nregisterAction2(class PeekReferencesAction extends ReferencesAction {\n    constructor() {\n        super({\n            openToSide: false,\n            openInPeek: true,\n            muteMessage: false\n        }, {\n            id: 'editor.action.referenceSearch.trigger',\n            title: {\n                value: nls.localize('references.action.label', \"Peek References\"),\n                original: 'Peek References'\n            },\n            precondition: ContextKeyExpr.and(EditorContextKeys.hasReferenceProvider, PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n            menu: {\n                id: MenuId.EditorContextPeek,\n                group: 'peek',\n                order: 6\n            }\n        });\n    }\n    _getLocationModel(languageFeaturesService, model, position, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(yield getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, token), nls.localize('ref.title', 'References'));\n        });\n    }\n});\n//#endregion\n//#region --- GENERIC goto symbols command\nclass GenericGoToLocationAction extends SymbolNavigationAction {\n    constructor(config, _references, _gotoMultipleBehaviour) {\n        super(config, {\n            id: 'editor.action.goToLocation',\n            title: {\n                value: nls.localize('label.generic', \"Go to Any Symbol\"),\n                original: 'Go to Any Symbol'\n            },\n            precondition: ContextKeyExpr.and(PeekContext.notInPeekEditor, EditorContextKeys.isInWalkThroughSnippet.toNegated()),\n        });\n        this._references = _references;\n        this._gotoMultipleBehaviour = _gotoMultipleBehaviour;\n    }\n    _getLocationModel(languageFeaturesService, _model, _position, _token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return new ReferencesModel(this._references, nls.localize('generic.title', 'Locations'));\n        });\n    }\n    _getNoResultFoundMessage(info) {\n        return info && nls.localize('generic.noResult', \"No results for '{0}'\", info.word) || '';\n    }\n    _getGoToPreference(editor) {\n        var _j;\n        return (_j = this._gotoMultipleBehaviour) !== null && _j !== void 0 ? _j : editor.getOption(58 /* EditorOption.gotoLocation */).multipleReferences;\n    }\n    _getAlternativeCommand() { return ''; }\n}\nCommandsRegistry.registerCommand({\n    id: 'editor.action.goToLocations',\n    description: {\n        description: 'Go to locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n            { name: 'noResultsMessage', description: 'Human readable message that shows when locations is empty.' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple, noResultsMessage, openInPeek) => __awaiter(void 0, void 0, void 0, function* () {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        assertType(Array.isArray(references));\n        assertType(typeof multiple === 'undefined' || typeof multiple === 'string');\n        assertType(typeof openInPeek === 'undefined' || typeof openInPeek === 'boolean');\n        const editorService = accessor.get(ICodeEditorService);\n        const editor = yield editorService.openCodeEditor({ resource }, editorService.getFocusedCodeEditor());\n        if (isCodeEditor(editor)) {\n            editor.setPosition(position);\n            editor.revealPositionInCenterIfOutsideViewport(position, 0 /* ScrollType.Smooth */);\n            return editor.invokeWithinContext(accessor => {\n                const command = new class extends GenericGoToLocationAction {\n                    _getNoResultFoundMessage(info) {\n                        return noResultsMessage || super._getNoResultFoundMessage(info);\n                    }\n                }({\n                    muteMessage: !Boolean(noResultsMessage),\n                    openInPeek: Boolean(openInPeek),\n                    openToSide: false\n                }, references, multiple);\n                accessor.get(IInstantiationService).invokeFunction(command.run.bind(command), editor);\n            });\n        }\n    })\n});\nCommandsRegistry.registerCommand({\n    id: 'editor.action.peekLocations',\n    description: {\n        description: 'Peek locations from a position in a file',\n        args: [\n            { name: 'uri', description: 'The text document in which to start', constraint: URI },\n            { name: 'position', description: 'The position at which to start', constraint: corePosition.Position.isIPosition },\n            { name: 'locations', description: 'An array of locations.', constraint: Array },\n            { name: 'multiple', description: 'Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto' },\n        ]\n    },\n    handler: (accessor, resource, position, references, multiple) => __awaiter(void 0, void 0, void 0, function* () {\n        accessor.get(ICommandService).executeCommand('editor.action.goToLocations', resource, position, references, multiple, undefined, true);\n    })\n});\n//#endregion\n//#region --- REFERENCE search special commands\nCommandsRegistry.registerCommand({\n    id: 'editor.action.findReferences',\n    handler: (accessor, resource, position) => {\n        assertType(URI.isUri(resource));\n        assertType(corePosition.Position.isIPosition(position));\n        const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n        const codeEditorService = accessor.get(ICodeEditorService);\n        return codeEditorService.openCodeEditor({ resource }, codeEditorService.getFocusedCodeEditor()).then(control => {\n            if (!isCodeEditor(control) || !control.hasModel()) {\n                return undefined;\n            }\n            const controller = ReferencesController.get(control);\n            if (!controller) {\n                return undefined;\n            }\n            const references = createCancelablePromise(token => getReferencesAtPosition(languageFeaturesService.referenceProvider, control.getModel(), corePosition.Position.lift(position), false, token).then(references => new ReferencesModel(references, nls.localize('ref.title', 'References'))));\n            const range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n            return Promise.resolve(controller.toggleWidget(range, references, false));\n        });\n    }\n});\n// use NEW command\nCommandsRegistry.registerCommandAlias('editor.action.showReferences', 'editor.action.peekLocations');\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { coalesce } from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ReferencesModel } from './referencesModel.js';\nfunction getLocationLinks(model, position, registry, provide) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const provider = registry.ordered(model);\n        // get results\n        const promises = provider.map((provider) => {\n            return Promise.resolve(provide(provider, model, position)).then(undefined, err => {\n                onUnexpectedExternalError(err);\n                return undefined;\n            });\n        });\n        const values = yield Promise.all(promises);\n        return coalesce(values.flat());\n    });\n}\nexport function getDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDefinition(model, position, token);\n    });\n}\nexport function getDeclarationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideDeclaration(model, position, token);\n    });\n}\nexport function getImplementationsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideImplementation(model, position, token);\n    });\n}\nexport function getTypeDefinitionsAtPosition(registry, model, position, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => {\n        return provider.provideTypeDefinition(model, position, token);\n    });\n}\nexport function getReferencesAtPosition(registry, model, position, compact, token) {\n    return getLocationLinks(model, position, registry, (provider, model, position) => __awaiter(this, void 0, void 0, function* () {\n        const result = yield provider.provideReferences(model, position, { includeDeclaration: true }, token);\n        if (!compact || !result || result.length !== 2) {\n            return result;\n        }\n        const resultWithoutDeclaration = yield provider.provideReferences(model, position, { includeDeclaration: false }, token);\n        if (resultWithoutDeclaration && resultWithoutDeclaration.length === 1) {\n            return resultWithoutDeclaration;\n        }\n        return result;\n    }));\n}\n// -- API commands ----\nfunction _sortedAndDeduped(callback) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const rawLinks = yield callback();\n        const model = new ReferencesModel(rawLinks, '');\n        const modelLinks = model.references.map(ref => ref.link);\n        model.dispose();\n        return modelLinks;\n    });\n}\nregisterModelAndPositionCommand('_executeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDefinitionsAtPosition(languageFeaturesService.definitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeTypeDefinitionProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getTypeDefinitionsAtPosition(languageFeaturesService.typeDefinitionProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeDeclarationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getDeclarationsAtPosition(languageFeaturesService.declarationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeReferenceProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getReferencesAtPosition(languageFeaturesService.referenceProvider, model, position, false, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\nregisterModelAndPositionCommand('_executeImplementationProvider', (accessor, model, position) => {\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const promise = getImplementationsAtPosition(languageFeaturesService.implementationProvider, model, position, CancellationToken.None);\n    return _sortedAndDeduped(() => promise);\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../../base/common/event.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../../base/common/platform.js';\nfunction hasModifier(e, modifier) {\n    return !!e[modifier];\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkMouseEvent {\n    constructor(source, opts) {\n        this.target = source.target;\n        this.isLeftClick = source.event.leftButton;\n        this.isMiddleClick = source.event.middleButton;\n        this.isRightClick = source.event.rightButton;\n        this.hasTriggerModifier = hasModifier(source.event, opts.triggerModifier);\n        this.hasSideBySideModifier = hasModifier(source.event, opts.triggerSideBySideModifier);\n        this.isNoneOrSingleMouseDown = (source.event.detail <= 1);\n    }\n}\n/**\n * An event that encapsulates the various trigger modifiers logic needed for go to definition.\n */\nexport class ClickLinkKeyboardEvent {\n    constructor(source, opts) {\n        this.keyCodeIsTriggerKey = (source.keyCode === opts.triggerKey);\n        this.keyCodeIsSideBySideKey = (source.keyCode === opts.triggerSideBySideKey);\n        this.hasTriggerModifier = hasModifier(source, opts.triggerModifier);\n    }\n}\nexport class ClickLinkOptions {\n    constructor(triggerKey, triggerModifier, triggerSideBySideKey, triggerSideBySideModifier) {\n        this.triggerKey = triggerKey;\n        this.triggerModifier = triggerModifier;\n        this.triggerSideBySideKey = triggerSideBySideKey;\n        this.triggerSideBySideModifier = triggerSideBySideModifier;\n    }\n    equals(other) {\n        return (this.triggerKey === other.triggerKey\n            && this.triggerModifier === other.triggerModifier\n            && this.triggerSideBySideKey === other.triggerSideBySideKey\n            && this.triggerSideBySideModifier === other.triggerSideBySideModifier);\n    }\n}\nfunction createOptions(multiCursorModifier) {\n    if (multiCursorModifier === 'altKey') {\n        if (platform.isMacintosh) {\n            return new ClickLinkOptions(57 /* KeyCode.Meta */, 'metaKey', 6 /* KeyCode.Alt */, 'altKey');\n        }\n        return new ClickLinkOptions(5 /* KeyCode.Ctrl */, 'ctrlKey', 6 /* KeyCode.Alt */, 'altKey');\n    }\n    if (platform.isMacintosh) {\n        return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 57 /* KeyCode.Meta */, 'metaKey');\n    }\n    return new ClickLinkOptions(6 /* KeyCode.Alt */, 'altKey', 5 /* KeyCode.Ctrl */, 'ctrlKey');\n}\nexport class ClickLinkGesture extends Disposable {\n    constructor(editor, opts) {\n        var _a;\n        super();\n        this._onMouseMoveOrRelevantKeyDown = this._register(new Emitter());\n        this.onMouseMoveOrRelevantKeyDown = this._onMouseMoveOrRelevantKeyDown.event;\n        this._onExecute = this._register(new Emitter());\n        this.onExecute = this._onExecute.event;\n        this._onCancel = this._register(new Emitter());\n        this.onCancel = this._onCancel.event;\n        this._editor = editor;\n        this._extractLineNumberFromMouseEvent = (_a = opts === null || opts === void 0 ? void 0 : opts.extractLineNumberFromMouseEvent) !== null && _a !== void 0 ? _a : ((e) => e.target.position ? e.target.position.lineNumber : 0);\n        this._opts = createOptions(this._editor.getOption(77 /* EditorOption.multiCursorModifier */));\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._lineNumberOnMouseDown = 0;\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(77 /* EditorOption.multiCursorModifier */)) {\n                const newOpts = createOptions(this._editor.getOption(77 /* EditorOption.multiCursorModifier */));\n                if (this._opts.equals(newOpts)) {\n                    return;\n                }\n                this._opts = newOpts;\n                this._lastMouseMoveEvent = null;\n                this._hasTriggerKeyOnMouseDown = false;\n                this._lineNumberOnMouseDown = 0;\n                this._onCancel.fire();\n            }\n        }));\n        this._register(this._editor.onMouseMove((e) => this._onEditorMouseMove(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(new ClickLinkMouseEvent(e, this._opts))));\n        this._register(this._editor.onKeyDown((e) => this._onEditorKeyDown(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onKeyUp((e) => this._onEditorKeyUp(new ClickLinkKeyboardEvent(e, this._opts))));\n        this._register(this._editor.onMouseDrag(() => this._resetHandler()));\n        this._register(this._editor.onDidChangeCursorSelection((e) => this._onDidChangeCursorSelection(e)));\n        this._register(this._editor.onDidChangeModel((e) => this._resetHandler()));\n        this._register(this._editor.onDidChangeModelContent(() => this._resetHandler()));\n        this._register(this._editor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged || e.scrollLeftChanged) {\n                this._resetHandler();\n            }\n        }));\n    }\n    _onDidChangeCursorSelection(e) {\n        if (e.selection && e.selection.startColumn !== e.selection.endColumn) {\n            this._resetHandler(); // immediately stop this feature if the user starts to select (https://github.com/microsoft/vscode/issues/7827)\n        }\n    }\n    _onEditorMouseMove(mouseEvent) {\n        this._lastMouseMoveEvent = mouseEvent;\n        this._onMouseMoveOrRelevantKeyDown.fire([mouseEvent, null]);\n    }\n    _onEditorMouseDown(mouseEvent) {\n        // We need to record if we had the trigger key on mouse down because someone might select something in the editor\n        // holding the mouse down and then while mouse is down start to press Ctrl/Cmd to start a copy operation and then\n        // release the mouse button without wanting to do the navigation.\n        // With this flag we prevent goto definition if the mouse was down before the trigger key was pressed.\n        this._hasTriggerKeyOnMouseDown = mouseEvent.hasTriggerModifier;\n        this._lineNumberOnMouseDown = this._extractLineNumberFromMouseEvent(mouseEvent);\n    }\n    _onEditorMouseUp(mouseEvent) {\n        const currentLineNumber = this._extractLineNumberFromMouseEvent(mouseEvent);\n        if (this._hasTriggerKeyOnMouseDown && this._lineNumberOnMouseDown && this._lineNumberOnMouseDown === currentLineNumber) {\n            this._onExecute.fire(mouseEvent);\n        }\n    }\n    _onEditorKeyDown(e) {\n        if (this._lastMouseMoveEvent\n            && (e.keyCodeIsTriggerKey // User just pressed Ctrl/Cmd (normal goto definition)\n                || (e.keyCodeIsSideBySideKey && e.hasTriggerModifier) // User pressed Ctrl/Cmd+Alt (goto definition to the side)\n            )) {\n            this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent, e]);\n        }\n        else if (e.hasTriggerModifier) {\n            this._onCancel.fire(); // remove decorations if user holds another key with ctrl/cmd to prevent accident goto declaration\n        }\n    }\n    _onEditorKeyUp(e) {\n        if (e.keyCodeIsTriggerKey) {\n            this._onCancel.fire();\n        }\n    }\n    _resetHandler() {\n        this._lastMouseMoveEvent = null;\n        this._hasTriggerKeyOnMouseDown = false;\n        this._onCancel.fire();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar GotoDefinitionAtPositionEditorContribution_1;\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { MarkdownString } from '../../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport './goToDefinitionAtPosition.css';\nimport { EditorState } from '../../../editorState/browser/editorState.js';\nimport { registerEditorContribution } from '../../../../browser/editorExtensions.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { ClickLinkGesture } from './clickLinkGesture.js';\nimport { PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IContextKeyService } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { DefinitionAction } from '../goToCommands.js';\nimport { getDefinitionsAtPosition } from '../goToSymbol.js';\nimport { ILanguageFeaturesService } from '../../../../common/services/languageFeatures.js';\nimport { ModelDecorationInjectedTextOptions } from '../../../../common/model/textModel.js';\nlet GotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = class GotoDefinitionAtPositionEditorContribution {\n    constructor(editor, textModelResolverService, languageService, languageFeaturesService) {\n        this.textModelResolverService = textModelResolverService;\n        this.languageService = languageService;\n        this.languageFeaturesService = languageFeaturesService;\n        this.toUnhook = new DisposableStore();\n        this.toUnhookForKeyboard = new DisposableStore();\n        this.currentWordAtPosition = null;\n        this.previousPromise = null;\n        this.editor = editor;\n        this.linkDecorations = this.editor.createDecorationsCollection();\n        const linkGesture = new ClickLinkGesture(editor);\n        this.toUnhook.add(linkGesture);\n        this.toUnhook.add(linkGesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, keyboardEvent]) => {\n            this.startFindDefinitionFromMouse(mouseEvent, keyboardEvent !== null && keyboardEvent !== void 0 ? keyboardEvent : undefined);\n        }));\n        this.toUnhook.add(linkGesture.onExecute((mouseEvent) => {\n            if (this.isEnabled(mouseEvent)) {\n                this.gotoDefinition(mouseEvent.target.position, mouseEvent.hasSideBySideModifier)\n                    .catch((error) => {\n                    onUnexpectedError(error);\n                })\n                    .finally(() => {\n                    this.removeLinkDecorations();\n                });\n            }\n        }));\n        this.toUnhook.add(linkGesture.onCancel(() => {\n            this.removeLinkDecorations();\n            this.currentWordAtPosition = null;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(GotoDefinitionAtPositionEditorContribution_1.ID);\n    }\n    startFindDefinitionFromCursor(position) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // For issue: https://github.com/microsoft/vscode/issues/46257\n            // equivalent to mouse move with meta/ctrl key\n            // First find the definition and add decorations\n            // to the editor to be shown with the content hover widget\n            yield this.startFindDefinition(position);\n            // Add listeners for editor cursor move and key down events\n            // Dismiss the \"extended\" editor decorations when the user hides\n            // the hover widget. There is no event for the widget itself so these\n            // serve as a best effort. After removing the link decorations, the hover\n            // widget is clean and will only show declarations per next request.\n            this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition(() => {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                this.toUnhookForKeyboard.clear();\n            }));\n            this.toUnhookForKeyboard.add(this.editor.onKeyDown((e) => {\n                if (e) {\n                    this.currentWordAtPosition = null;\n                    this.removeLinkDecorations();\n                    this.toUnhookForKeyboard.clear();\n                }\n            }));\n        });\n    }\n    startFindDefinitionFromMouse(mouseEvent, withKey) {\n        // check if we are active and on a content widget\n        if (mouseEvent.target.type === 9 /* MouseTargetType.CONTENT_WIDGET */ && this.linkDecorations.length > 0) {\n            return;\n        }\n        if (!this.editor.hasModel() || !this.isEnabled(mouseEvent, withKey)) {\n            this.currentWordAtPosition = null;\n            this.removeLinkDecorations();\n            return;\n        }\n        const position = mouseEvent.target.position;\n        this.startFindDefinition(position);\n    }\n    startFindDefinition(position) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            // Dispose listeners for updating decorations when using keyboard to show definition hover\n            this.toUnhookForKeyboard.clear();\n            // Find word at mouse position\n            const word = position ? (_a = this.editor.getModel()) === null || _a === void 0 ? void 0 : _a.getWordAtPosition(position) : null;\n            if (!word) {\n                this.currentWordAtPosition = null;\n                this.removeLinkDecorations();\n                return;\n            }\n            // Return early if word at position is still the same\n            if (this.currentWordAtPosition && this.currentWordAtPosition.startColumn === word.startColumn && this.currentWordAtPosition.endColumn === word.endColumn && this.currentWordAtPosition.word === word.word) {\n                return;\n            }\n            this.currentWordAtPosition = word;\n            // Find definition and decorate word if found\n            const state = new EditorState(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */ | 2 /* CodeEditorStateFlag.Selection */ | 8 /* CodeEditorStateFlag.Scroll */);\n            if (this.previousPromise) {\n                this.previousPromise.cancel();\n                this.previousPromise = null;\n            }\n            this.previousPromise = createCancelablePromise(token => this.findDefinition(position, token));\n            let results;\n            try {\n                results = yield this.previousPromise;\n            }\n            catch (error) {\n                onUnexpectedError(error);\n                return;\n            }\n            if (!results || !results.length || !state.validate(this.editor)) {\n                this.removeLinkDecorations();\n                return;\n            }\n            const linkRange = results[0].originSelectionRange\n                ? Range.lift(results[0].originSelectionRange)\n                : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n            // Multiple results\n            if (results.length > 1) {\n                let combinedRange = linkRange;\n                for (const { originSelectionRange } of results) {\n                    if (originSelectionRange) {\n                        combinedRange = Range.plusRange(combinedRange, originSelectionRange);\n                    }\n                }\n                this.addDecoration(combinedRange, new MarkdownString().appendText(nls.localize('multipleResults', \"Click to show {0} definitions.\", results.length)));\n            }\n            else {\n                // Single result\n                const result = results[0];\n                if (!result.uri) {\n                    return;\n                }\n                this.textModelResolverService.createModelReference(result.uri).then(ref => {\n                    if (!ref.object || !ref.object.textEditorModel) {\n                        ref.dispose();\n                        return;\n                    }\n                    const { object: { textEditorModel } } = ref;\n                    const { startLineNumber } = result.range;\n                    if (startLineNumber < 1 || startLineNumber > textEditorModel.getLineCount()) {\n                        // invalid range\n                        ref.dispose();\n                        return;\n                    }\n                    const previewValue = this.getPreviewValue(textEditorModel, startLineNumber, result);\n                    const languageId = this.languageService.guessLanguageIdByFilepathOrFirstLine(textEditorModel.uri);\n                    this.addDecoration(linkRange, previewValue ? new MarkdownString().appendCodeblock(languageId ? languageId : '', previewValue) : undefined);\n                    ref.dispose();\n                });\n            }\n        });\n    }\n    getPreviewValue(textEditorModel, startLineNumber, result) {\n        let rangeToUse = result.range;\n        const numberOfLinesInRange = rangeToUse.endLineNumber - rangeToUse.startLineNumber;\n        if (numberOfLinesInRange >= GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES) {\n            rangeToUse = this.getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber);\n        }\n        const previewValue = this.stripIndentationFromPreviewRange(textEditorModel, startLineNumber, rangeToUse);\n        return previewValue;\n    }\n    stripIndentationFromPreviewRange(textEditorModel, startLineNumber, previewRange) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        let minIndent = startIndent;\n        for (let endLineNumber = startLineNumber + 1; endLineNumber < previewRange.endLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            minIndent = Math.min(minIndent, endIndent);\n        }\n        const previewValue = textEditorModel.getValueInRange(previewRange).replace(new RegExp(`^\\\\s{${minIndent - 1}}`, 'gm'), '').trim();\n        return previewValue;\n    }\n    getPreviewRangeBasedOnIndentation(textEditorModel, startLineNumber) {\n        const startIndent = textEditorModel.getLineFirstNonWhitespaceColumn(startLineNumber);\n        const maxLineNumber = Math.min(textEditorModel.getLineCount(), startLineNumber + GotoDefinitionAtPositionEditorContribution_1.MAX_SOURCE_PREVIEW_LINES);\n        let endLineNumber = startLineNumber + 1;\n        for (; endLineNumber < maxLineNumber; endLineNumber++) {\n            const endIndent = textEditorModel.getLineFirstNonWhitespaceColumn(endLineNumber);\n            if (startIndent === endIndent) {\n                break;\n            }\n        }\n        return new Range(startLineNumber, 1, endLineNumber + 1, 1);\n    }\n    addDecoration(range, hoverMessage) {\n        const newDecorations = {\n            range: range,\n            options: {\n                description: 'goto-definition-link',\n                inlineClassName: 'goto-definition-link',\n                hoverMessage\n            }\n        };\n        this.linkDecorations.set([newDecorations]);\n    }\n    removeLinkDecorations() {\n        this.linkDecorations.clear();\n    }\n    isEnabled(mouseEvent, withKey) {\n        var _a;\n        return this.editor.hasModel()\n            && mouseEvent.isLeftClick\n            && mouseEvent.isNoneOrSingleMouseDown\n            && mouseEvent.target.type === 6 /* MouseTargetType.CONTENT_TEXT */\n            && !(((_a = mouseEvent.target.detail.injectedText) === null || _a === void 0 ? void 0 : _a.options) instanceof ModelDecorationInjectedTextOptions)\n            && (mouseEvent.hasTriggerModifier || (withKey ? withKey.keyCodeIsTriggerKey : false))\n            && this.languageFeaturesService.definitionProvider.has(this.editor.getModel());\n    }\n    findDefinition(position, token) {\n        const model = this.editor.getModel();\n        if (!model) {\n            return Promise.resolve(null);\n        }\n        return getDefinitionsAtPosition(this.languageFeaturesService.definitionProvider, model, position, token);\n    }\n    gotoDefinition(position, openToSide) {\n        this.editor.setPosition(position);\n        return this.editor.invokeWithinContext((accessor) => {\n            const canPeek = !openToSide && this.editor.getOption(87 /* EditorOption.definitionLinkOpensInPeek */) && !this.isInPeekEditor(accessor);\n            const action = new DefinitionAction({ openToSide, openInPeek: canPeek, muteMessage: true }, { title: { value: '', original: '' }, id: '', precondition: undefined });\n            return action.run(accessor);\n        });\n    }\n    isInPeekEditor(accessor) {\n        const contextKeyService = accessor.get(IContextKeyService);\n        return PeekContext.inPeekEditor.getValue(contextKeyService);\n    }\n    dispose() {\n        this.toUnhook.dispose();\n        this.toUnhookForKeyboard.dispose();\n    }\n};\nGotoDefinitionAtPositionEditorContribution.ID = 'editor.contrib.gotodefinitionatposition';\nGotoDefinitionAtPositionEditorContribution.MAX_SOURCE_PREVIEW_LINES = 8;\nGotoDefinitionAtPositionEditorContribution = GotoDefinitionAtPositionEditorContribution_1 = __decorate([\n    __param(1, ITextModelService),\n    __param(2, ILanguageService),\n    __param(3, ILanguageFeaturesService)\n], GotoDefinitionAtPositionEditorContribution);\nexport { GotoDefinitionAtPositionEditorContribution };\nregisterEditorContribution(GotoDefinitionAtPositionEditorContribution.ID, GotoDefinitionAtPositionEditorContribution, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar FileReferencesRenderer_1;\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { CountBadge } from '../../../../../base/browser/ui/countBadge/countBadge.js';\nimport { HighlightedLabel } from '../../../../../base/browser/ui/highlightedlabel/highlightedLabel.js';\nimport { IconLabel } from '../../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { createMatches, FuzzyScore } from '../../../../../base/common/filters.js';\nimport { Disposable } from '../../../../../base/common/lifecycle.js';\nimport { basename, dirname } from '../../../../../base/common/resources.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { localize } from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { defaultCountBadgeStyles } from '../../../../../platform/theme/browser/defaultStyles.js';\nimport { FileReferences, OneReference, ReferencesModel } from '../referencesModel.js';\nlet DataSource = class DataSource {\n    constructor(_resolverService) {\n        this._resolverService = _resolverService;\n    }\n    hasChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return true;\n        }\n        if (element instanceof FileReferences) {\n            return true;\n        }\n        return false;\n    }\n    getChildren(element) {\n        if (element instanceof ReferencesModel) {\n            return element.groups;\n        }\n        if (element instanceof FileReferences) {\n            return element.resolve(this._resolverService).then(val => {\n                // if (element.failure) {\n                // \t// refresh the element on failure so that\n                // \t// we can update its rendering\n                // \treturn tree.refresh(element).then(() => val.children);\n                // }\n                return val.children;\n            });\n        }\n        throw new Error('bad tree');\n    }\n};\nDataSource = __decorate([\n    __param(0, ITextModelService)\n], DataSource);\nexport { DataSource };\n//#endregion\nexport class Delegate {\n    getHeight() {\n        return 23;\n    }\n    getTemplateId(element) {\n        if (element instanceof FileReferences) {\n            return FileReferencesRenderer.id;\n        }\n        else {\n            return OneReferenceRenderer.id;\n        }\n    }\n}\nlet StringRepresentationProvider = class StringRepresentationProvider {\n    constructor(_keybindingService) {\n        this._keybindingService = _keybindingService;\n    }\n    getKeyboardNavigationLabel(element) {\n        var _a;\n        if (element instanceof OneReference) {\n            const parts = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n            if (parts) {\n                return parts.value;\n            }\n        }\n        // FileReferences or unresolved OneReference\n        return basename(element.uri);\n    }\n};\nStringRepresentationProvider = __decorate([\n    __param(0, IKeybindingService)\n], StringRepresentationProvider);\nexport { StringRepresentationProvider };\nexport class IdentityProvider {\n    getId(element) {\n        return element instanceof OneReference ? element.id : element.uri;\n    }\n}\n//#region render: File\nlet FileReferencesTemplate = class FileReferencesTemplate extends Disposable {\n    constructor(container, _labelService) {\n        super();\n        this._labelService = _labelService;\n        const parent = document.createElement('div');\n        parent.classList.add('reference-file');\n        this.file = this._register(new IconLabel(parent, { supportHighlights: true }));\n        this.badge = new CountBadge(dom.append(parent, dom.$('.count')), {}, defaultCountBadgeStyles);\n        container.appendChild(parent);\n    }\n    set(element, matches) {\n        const parent = dirname(element.uri);\n        this.file.setLabel(this._labelService.getUriBasenameLabel(element.uri), this._labelService.getUriLabel(parent, { relative: true }), { title: this._labelService.getUriLabel(element.uri), matches });\n        const len = element.children.length;\n        this.badge.setCount(len);\n        if (len > 1) {\n            this.badge.setTitleFormat(localize('referencesCount', \"{0} references\", len));\n        }\n        else {\n            this.badge.setTitleFormat(localize('referenceCount', \"{0} reference\", len));\n        }\n    }\n};\nFileReferencesTemplate = __decorate([\n    __param(1, ILabelService)\n], FileReferencesTemplate);\nlet FileReferencesRenderer = FileReferencesRenderer_1 = class FileReferencesRenderer {\n    constructor(_instantiationService) {\n        this._instantiationService = _instantiationService;\n        this.templateId = FileReferencesRenderer_1.id;\n    }\n    renderTemplate(container) {\n        return this._instantiationService.createInstance(FileReferencesTemplate, container);\n    }\n    renderElement(node, index, template) {\n        template.set(node.element, createMatches(node.filterData));\n    }\n    disposeTemplate(templateData) {\n        templateData.dispose();\n    }\n};\nFileReferencesRenderer.id = 'FileReferencesRenderer';\nFileReferencesRenderer = FileReferencesRenderer_1 = __decorate([\n    __param(0, IInstantiationService)\n], FileReferencesRenderer);\nexport { FileReferencesRenderer };\n//#endregion\n//#region render: Reference\nclass OneReferenceTemplate {\n    constructor(container) {\n        this.label = new HighlightedLabel(container);\n    }\n    set(element, score) {\n        var _a;\n        const preview = (_a = element.parent.getPreview(element)) === null || _a === void 0 ? void 0 : _a.preview(element.range);\n        if (!preview || !preview.value) {\n            // this means we FAILED to resolve the document or the value is the empty string\n            this.label.set(`${basename(element.uri)}:${element.range.startLineNumber + 1}:${element.range.startColumn + 1}`);\n        }\n        else {\n            // render search match as highlight unless\n            // we have score, then render the score\n            const { value, highlight } = preview;\n            if (score && !FuzzyScore.isDefault(score)) {\n                this.label.element.classList.toggle('referenceMatch', false);\n                this.label.set(value, createMatches(score));\n            }\n            else {\n                this.label.element.classList.toggle('referenceMatch', true);\n                this.label.set(value, [highlight]);\n            }\n        }\n    }\n}\nexport class OneReferenceRenderer {\n    constructor() {\n        this.templateId = OneReferenceRenderer.id;\n    }\n    renderTemplate(container) {\n        return new OneReferenceTemplate(container);\n    }\n    renderElement(node, index, templateData) {\n        templateData.set(node.element, node.filterData);\n    }\n    disposeTemplate() {\n    }\n}\nOneReferenceRenderer.id = 'OneReferenceRenderer';\n//#endregion\nexport class AccessibilityProvider {\n    getWidgetAriaLabel() {\n        return localize('treeAriaLabel', \"References\");\n    }\n    getAriaLabel(element) {\n        return element.ariaMessage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../../base/browser/dom.js';\nimport { Sizing, SplitView } from '../../../../../base/browser/ui/splitview/splitview.js';\nimport { Color } from '../../../../../base/common/color.js';\nimport { Emitter, Event } from '../../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../../../base/common/network.js';\nimport { basenameOrAuthority, dirname } from '../../../../../base/common/resources.js';\nimport './referencesWidget.css';\nimport { EmbeddedCodeEditorWidget } from '../../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { ModelDecorationOptions, TextModel } from '../../../../common/model/textModel.js';\nimport { ILanguageConfigurationService } from '../../../../common/languages/languageConfigurationRegistry.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../../../common/languages/modesRegistry.js';\nimport { ILanguageService } from '../../../../common/languages/language.js';\nimport { ITextModelService } from '../../../../common/services/resolverService.js';\nimport { AccessibilityProvider, DataSource, Delegate, FileReferencesRenderer, IdentityProvider, OneReferenceRenderer, StringRepresentationProvider } from './referencesTree.js';\nimport * as peekView from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../../platform/keybinding/common/keybinding.js';\nimport { ILabelService } from '../../../../../platform/label/common/label.js';\nimport { WorkbenchAsyncDataTree } from '../../../../../platform/list/browser/listService.js';\nimport { IThemeService } from '../../../../../platform/theme/common/themeService.js';\nimport { IUndoRedoService } from '../../../../../platform/undoRedo/common/undoRedo.js';\nimport { FileReferences, OneReference } from '../referencesModel.js';\nclass DecorationsManager {\n    constructor(_editor, _model) {\n        this._editor = _editor;\n        this._model = _model;\n        this._decorations = new Map();\n        this._decorationIgnoreSet = new Set();\n        this._callOnDispose = new DisposableStore();\n        this._callOnModelChange = new DisposableStore();\n        this._callOnDispose.add(this._editor.onDidChangeModel(() => this._onModelChanged()));\n        this._onModelChanged();\n    }\n    dispose() {\n        this._callOnModelChange.dispose();\n        this._callOnDispose.dispose();\n        this.removeDecorations();\n    }\n    _onModelChanged() {\n        this._callOnModelChange.clear();\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const ref of this._model.references) {\n            if (ref.uri.toString() === model.uri.toString()) {\n                this._addDecorations(ref.parent);\n                return;\n            }\n        }\n    }\n    _addDecorations(reference) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations(() => this._onDecorationChanged()));\n        const newDecorations = [];\n        const newDecorationsActualIndex = [];\n        for (let i = 0, len = reference.children.length; i < len; i++) {\n            const oneReference = reference.children[i];\n            if (this._decorationIgnoreSet.has(oneReference.id)) {\n                continue;\n            }\n            if (oneReference.uri.toString() !== this._editor.getModel().uri.toString()) {\n                continue;\n            }\n            newDecorations.push({\n                range: oneReference.range,\n                options: DecorationsManager.DecorationOptions\n            });\n            newDecorationsActualIndex.push(i);\n        }\n        this._editor.changeDecorations((changeAccessor) => {\n            const decorations = changeAccessor.deltaDecorations([], newDecorations);\n            for (let i = 0; i < decorations.length; i++) {\n                this._decorations.set(decorations[i], reference.children[newDecorationsActualIndex[i]]);\n            }\n        });\n    }\n    _onDecorationChanged() {\n        const toRemove = [];\n        const model = this._editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const [decorationId, reference] of this._decorations) {\n            const newRange = model.getDecorationRange(decorationId);\n            if (!newRange) {\n                continue;\n            }\n            let ignore = false;\n            if (Range.equalsRange(newRange, reference.range)) {\n                continue;\n            }\n            if (Range.spansMultipleLines(newRange)) {\n                ignore = true;\n            }\n            else {\n                const lineLength = reference.range.endColumn - reference.range.startColumn;\n                const newLineLength = newRange.endColumn - newRange.startColumn;\n                if (lineLength !== newLineLength) {\n                    ignore = true;\n                }\n            }\n            if (ignore) {\n                this._decorationIgnoreSet.add(reference.id);\n                toRemove.push(decorationId);\n            }\n            else {\n                reference.range = newRange;\n            }\n        }\n        for (let i = 0, len = toRemove.length; i < len; i++) {\n            this._decorations.delete(toRemove[i]);\n        }\n        this._editor.removeDecorations(toRemove);\n    }\n    removeDecorations() {\n        this._editor.removeDecorations([...this._decorations.keys()]);\n        this._decorations.clear();\n    }\n}\nDecorationsManager.DecorationOptions = ModelDecorationOptions.register({\n    description: 'reference-decoration',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'reference-decoration'\n});\nexport class LayoutData {\n    constructor() {\n        this.ratio = 0.7;\n        this.heightInLines = 18;\n    }\n    static fromJSON(raw) {\n        let ratio;\n        let heightInLines;\n        try {\n            const data = JSON.parse(raw);\n            ratio = data.ratio;\n            heightInLines = data.heightInLines;\n        }\n        catch (_a) {\n            //\n        }\n        return {\n            ratio: ratio || 0.7,\n            heightInLines: heightInLines || 18\n        };\n    }\n}\nclass ReferencesTree extends WorkbenchAsyncDataTree {\n}\n/**\n * ZoneWidget that is shown inside the editor\n */\nlet ReferenceWidget = class ReferenceWidget extends peekView.PeekViewWidget {\n    constructor(editor, _defaultTreeKeyboardSupport, layoutData, themeService, _textModelResolverService, _instantiationService, _peekViewService, _uriLabel, _undoRedoService, _keybindingService, _languageService, _languageConfigurationService) {\n        super(editor, { showFrame: false, showArrow: true, isResizeable: true, isAccessible: true, supportOnTitleClick: true }, _instantiationService);\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this.layoutData = layoutData;\n        this._textModelResolverService = _textModelResolverService;\n        this._instantiationService = _instantiationService;\n        this._peekViewService = _peekViewService;\n        this._uriLabel = _uriLabel;\n        this._undoRedoService = _undoRedoService;\n        this._keybindingService = _keybindingService;\n        this._languageService = _languageService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._disposeOnNewModel = new DisposableStore();\n        this._callOnDispose = new DisposableStore();\n        this._onDidSelectReference = new Emitter();\n        this.onDidSelectReference = this._onDidSelectReference.event;\n        this._dim = new dom.Dimension(0, 0);\n        this._applyTheme(themeService.getColorTheme());\n        this._callOnDispose.add(themeService.onDidColorThemeChange(this._applyTheme.bind(this)));\n        this._peekViewService.addExclusiveWidget(editor, this);\n        this.create();\n    }\n    dispose() {\n        this.setModel(undefined);\n        this._callOnDispose.dispose();\n        this._disposeOnNewModel.dispose();\n        dispose(this._preview);\n        dispose(this._previewNotAvailableMessage);\n        dispose(this._tree);\n        dispose(this._previewModelReference);\n        this._splitView.dispose();\n        super.dispose();\n    }\n    _applyTheme(theme) {\n        const borderColor = theme.getColor(peekView.peekViewBorder) || Color.transparent;\n        this.style({\n            arrowColor: borderColor,\n            frameColor: borderColor,\n            headerBackgroundColor: theme.getColor(peekView.peekViewTitleBackground) || Color.transparent,\n            primaryHeadingColor: theme.getColor(peekView.peekViewTitleForeground),\n            secondaryHeadingColor: theme.getColor(peekView.peekViewTitleInfoForeground)\n        });\n    }\n    show(where) {\n        super.show(where, this.layoutData.heightInLines || 18);\n    }\n    focusOnReferenceTree() {\n        this._tree.domFocus();\n    }\n    focusOnPreviewEditor() {\n        this._preview.focus();\n    }\n    isPreviewEditorFocused() {\n        return this._preview.hasTextFocus();\n    }\n    _onTitleClick(e) {\n        if (this._preview && this._preview.getModel()) {\n            this._onDidSelectReference.fire({\n                element: this._getFocusedReference(),\n                kind: e.ctrlKey || e.metaKey || e.altKey ? 'side' : 'open',\n                source: 'title'\n            });\n        }\n    }\n    _fillBody(containerElement) {\n        this.setCssClass('reference-zone-widget');\n        // message pane\n        this._messageContainer = dom.append(containerElement, dom.$('div.messages'));\n        dom.hide(this._messageContainer);\n        this._splitView = new SplitView(containerElement, { orientation: 1 /* Orientation.HORIZONTAL */ });\n        // editor\n        this._previewContainer = dom.append(containerElement, dom.$('div.preview.inline'));\n        const options = {\n            scrollBeyondLastLine: false,\n            scrollbar: {\n                verticalScrollbarSize: 14,\n                horizontal: 'auto',\n                useShadows: true,\n                verticalHasArrows: false,\n                horizontalHasArrows: false,\n                alwaysConsumeMouseWheel: true\n            },\n            overviewRulerLanes: 2,\n            fixedOverflowWidgets: true,\n            minimap: {\n                enabled: false\n            }\n        };\n        this._preview = this._instantiationService.createInstance(EmbeddedCodeEditorWidget, this._previewContainer, options, {}, this.editor);\n        dom.hide(this._previewContainer);\n        this._previewNotAvailableMessage = new TextModel(nls.localize('missingPreviewMessage', \"no preview available\"), PLAINTEXT_LANGUAGE_ID, TextModel.DEFAULT_CREATION_OPTIONS, null, this._undoRedoService, this._languageService, this._languageConfigurationService);\n        // tree\n        this._treeContainer = dom.append(containerElement, dom.$('div.ref-tree.inline'));\n        const treeOptions = {\n            keyboardSupport: this._defaultTreeKeyboardSupport,\n            accessibilityProvider: new AccessibilityProvider(),\n            keyboardNavigationLabelProvider: this._instantiationService.createInstance(StringRepresentationProvider),\n            identityProvider: new IdentityProvider(),\n            openOnSingleClick: true,\n            selectionNavigation: true,\n            overrideStyles: {\n                listBackground: peekView.peekViewResultsBackground\n            }\n        };\n        if (this._defaultTreeKeyboardSupport) {\n            // the tree will consume `Escape` and prevent the widget from closing\n            this._callOnDispose.add(dom.addStandardDisposableListener(this._treeContainer, 'keydown', (e) => {\n                if (e.equals(9 /* KeyCode.Escape */)) {\n                    this._keybindingService.dispatchEvent(e, e.target);\n                    e.stopPropagation();\n                }\n            }, true));\n        }\n        this._tree = this._instantiationService.createInstance(ReferencesTree, 'ReferencesWidget', this._treeContainer, new Delegate(), [\n            this._instantiationService.createInstance(FileReferencesRenderer),\n            this._instantiationService.createInstance(OneReferenceRenderer),\n        ], this._instantiationService.createInstance(DataSource), treeOptions);\n        // split stuff\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._previewContainer,\n            minimumSize: 200,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._preview.layout({ height: this._dim.height, width });\n            }\n        }, Sizing.Distribute);\n        this._splitView.addView({\n            onDidChange: Event.None,\n            element: this._treeContainer,\n            minimumSize: 100,\n            maximumSize: Number.MAX_VALUE,\n            layout: (width) => {\n                this._treeContainer.style.height = `${this._dim.height}px`;\n                this._treeContainer.style.width = `${width}px`;\n                this._tree.layout(this._dim.height, width);\n            }\n        }, Sizing.Distribute);\n        this._disposables.add(this._splitView.onDidSashChange(() => {\n            if (this._dim.width) {\n                this.layoutData.ratio = this._splitView.getViewSize(0) / this._dim.width;\n            }\n        }, undefined));\n        // listen on selection and focus\n        const onEvent = (element, kind) => {\n            if (element instanceof OneReference) {\n                if (kind === 'show') {\n                    this._revealReference(element, false);\n                }\n                this._onDidSelectReference.fire({ element, kind, source: 'tree' });\n            }\n        };\n        this._tree.onDidOpen(e => {\n            if (e.sideBySide) {\n                onEvent(e.element, 'side');\n            }\n            else if (e.editorOptions.pinned) {\n                onEvent(e.element, 'goto');\n            }\n            else {\n                onEvent(e.element, 'show');\n            }\n        });\n        dom.hide(this._treeContainer);\n    }\n    _onWidth(width) {\n        if (this._dim) {\n            this._doLayoutBody(this._dim.height, width);\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        super._doLayoutBody(heightInPixel, widthInPixel);\n        this._dim = new dom.Dimension(widthInPixel, heightInPixel);\n        this.layoutData.heightInLines = this._viewZone ? this._viewZone.heightInLines : this.layoutData.heightInLines;\n        this._splitView.layout(widthInPixel);\n        this._splitView.resizeView(0, widthInPixel * this.layoutData.ratio);\n    }\n    setSelection(selection) {\n        return this._revealReference(selection, true).then(() => {\n            if (!this._model) {\n                // disposed\n                return;\n            }\n            // show in tree\n            this._tree.setSelection([selection]);\n            this._tree.setFocus([selection]);\n        });\n    }\n    setModel(newModel) {\n        // clean up\n        this._disposeOnNewModel.clear();\n        this._model = newModel;\n        if (this._model) {\n            return this._onNewModel();\n        }\n        return Promise.resolve();\n    }\n    _onNewModel() {\n        if (!this._model) {\n            return Promise.resolve(undefined);\n        }\n        if (this._model.isEmpty) {\n            this.setTitle('');\n            this._messageContainer.innerText = nls.localize('noResults', \"No results\");\n            dom.show(this._messageContainer);\n            return Promise.resolve(undefined);\n        }\n        dom.hide(this._messageContainer);\n        this._decorationsManager = new DecorationsManager(this._preview, this._model);\n        this._disposeOnNewModel.add(this._decorationsManager);\n        // listen on model changes\n        this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange(reference => this._tree.rerender(reference)));\n        // listen on editor\n        this._disposeOnNewModel.add(this._preview.onMouseDown(e => {\n            const { event, target } = e;\n            if (event.detail !== 2) {\n                return;\n            }\n            const element = this._getFocusedReference();\n            if (!element) {\n                return;\n            }\n            this._onDidSelectReference.fire({\n                element: { uri: element.uri, range: target.range },\n                kind: (event.ctrlKey || event.metaKey || event.altKey) ? 'side' : 'open',\n                source: 'editor'\n            });\n        }));\n        // make sure things are rendered\n        this.container.classList.add('results-loaded');\n        dom.show(this._treeContainer);\n        dom.show(this._previewContainer);\n        this._splitView.layout(this._dim.width);\n        this.focusOnReferenceTree();\n        // pick input and a reference to begin with\n        return this._tree.setInput(this._model.groups.length === 1 ? this._model.groups[0] : this._model);\n    }\n    _getFocusedReference() {\n        const [element] = this._tree.getFocus();\n        if (element instanceof OneReference) {\n            return element;\n        }\n        else if (element instanceof FileReferences) {\n            if (element.children.length > 0) {\n                return element.children[0];\n            }\n        }\n        return undefined;\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._revealReference(reference, false);\n            this._onDidSelectReference.fire({ element: reference, kind: 'goto', source: 'tree' });\n        });\n    }\n    _revealReference(reference, revealParent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // check if there is anything to do...\n            if (this._revealedReference === reference) {\n                return;\n            }\n            this._revealedReference = reference;\n            // Update widget header\n            if (reference.uri.scheme !== Schemas.inMemory) {\n                this.setTitle(basenameOrAuthority(reference.uri), this._uriLabel.getUriLabel(dirname(reference.uri)));\n            }\n            else {\n                this.setTitle(nls.localize('peekView.alternateTitle', \"References\"));\n            }\n            const promise = this._textModelResolverService.createModelReference(reference.uri);\n            if (this._tree.getInput() === reference.parent) {\n                this._tree.reveal(reference);\n            }\n            else {\n                if (revealParent) {\n                    this._tree.reveal(reference.parent);\n                }\n                yield this._tree.expand(reference.parent);\n                this._tree.reveal(reference);\n            }\n            const ref = yield promise;\n            if (!this._model) {\n                // disposed\n                ref.dispose();\n                return;\n            }\n            dispose(this._previewModelReference);\n            // show in editor\n            const model = ref.object;\n            if (model) {\n                const scrollType = this._preview.getModel() === model.textEditorModel ? 0 /* ScrollType.Smooth */ : 1 /* ScrollType.Immediate */;\n                const sel = Range.lift(reference.range).collapseToStart();\n                this._previewModelReference = ref;\n                this._preview.setModel(model.textEditorModel);\n                this._preview.setSelection(sel);\n                this._preview.revealRangeInCenter(sel, scrollType);\n            }\n            else {\n                this._preview.setModel(this._previewNotAvailableMessage);\n                ref.dispose();\n            }\n        });\n    }\n};\nReferenceWidget = __decorate([\n    __param(3, IThemeService),\n    __param(4, ITextModelService),\n    __param(5, IInstantiationService),\n    __param(6, peekView.IPeekViewService),\n    __param(7, ILabelService),\n    __param(8, IUndoRedoService),\n    __param(9, IKeybindingService),\n    __param(10, ILanguageService),\n    __param(11, ILanguageConfigurationService)\n], ReferenceWidget);\nexport { ReferenceWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar ReferencesController_1;\nimport { createCancelablePromise } from '../../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../../base/common/errors.js';\nimport { KeyChord } from '../../../../../base/common/keyCodes.js';\nimport { DisposableStore } from '../../../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../../common/core/position.js';\nimport { Range } from '../../../../common/core/range.js';\nimport { getOuterEditor, PeekContext } from '../../../peekView/browser/peekView.js';\nimport * as nls from '../../../../../nls.js';\nimport { CommandsRegistry } from '../../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { IListService, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse, WorkbenchTreeElementCanExpand } from '../../../../../platform/list/browser/listService.js';\nimport { INotificationService } from '../../../../../platform/notification/common/notification.js';\nimport { IStorageService } from '../../../../../platform/storage/common/storage.js';\nimport { OneReference } from '../referencesModel.js';\nimport { LayoutData, ReferenceWidget } from './referencesWidget.js';\nexport const ctxReferenceSearchVisible = new RawContextKey('referenceSearchVisible', false, nls.localize('referenceSearchVisible', \"Whether reference peek is visible, like 'Peek References' or 'Peek Definition'\"));\nlet ReferencesController = ReferencesController_1 = class ReferencesController {\n    static get(editor) {\n        return editor.getContribution(ReferencesController_1.ID);\n    }\n    constructor(_defaultTreeKeyboardSupport, _editor, contextKeyService, _editorService, _notificationService, _instantiationService, _storageService, _configurationService) {\n        this._defaultTreeKeyboardSupport = _defaultTreeKeyboardSupport;\n        this._editor = _editor;\n        this._editorService = _editorService;\n        this._notificationService = _notificationService;\n        this._instantiationService = _instantiationService;\n        this._storageService = _storageService;\n        this._configurationService = _configurationService;\n        this._disposables = new DisposableStore();\n        this._requestIdPool = 0;\n        this._ignoreModelChangeEvent = false;\n        this._referenceSearchVisible = ctxReferenceSearchVisible.bindTo(contextKeyService);\n    }\n    dispose() {\n        var _a, _b;\n        this._referenceSearchVisible.reset();\n        this._disposables.dispose();\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._widget = undefined;\n        this._model = undefined;\n    }\n    toggleWidget(range, modelPromise, peekMode) {\n        // close current widget and return early is position didn't change\n        let widgetPosition;\n        if (this._widget) {\n            widgetPosition = this._widget.position;\n        }\n        this.closeWidget();\n        if (!!widgetPosition && range.containsPosition(widgetPosition)) {\n            return;\n        }\n        this._peekMode = peekMode;\n        this._referenceSearchVisible.set(true);\n        // close the widget on model/mode changes\n        this._disposables.add(this._editor.onDidChangeModelLanguage(() => { this.closeWidget(); }));\n        this._disposables.add(this._editor.onDidChangeModel(() => {\n            if (!this._ignoreModelChangeEvent) {\n                this.closeWidget();\n            }\n        }));\n        const storageKey = 'peekViewLayout';\n        const data = LayoutData.fromJSON(this._storageService.get(storageKey, 0 /* StorageScope.PROFILE */, '{}'));\n        this._widget = this._instantiationService.createInstance(ReferenceWidget, this._editor, this._defaultTreeKeyboardSupport, data);\n        this._widget.setTitle(nls.localize('labelLoading', \"Loading...\"));\n        this._widget.show(range);\n        this._disposables.add(this._widget.onDidClose(() => {\n            modelPromise.cancel();\n            if (this._widget) {\n                this._storageService.store(storageKey, JSON.stringify(this._widget.layoutData), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n                this._widget = undefined;\n            }\n            this.closeWidget();\n        }));\n        this._disposables.add(this._widget.onDidSelectReference(event => {\n            const { element, kind } = event;\n            if (!element) {\n                return;\n            }\n            switch (kind) {\n                case 'open':\n                    if (event.source !== 'editor' || !this._configurationService.getValue('editor.stablePeek')) {\n                        // when stable peek is configured we don't close\n                        // the peek window on selecting the editor\n                        this.openReference(element, false, false);\n                    }\n                    break;\n                case 'side':\n                    this.openReference(element, true, false);\n                    break;\n                case 'goto':\n                    if (peekMode) {\n                        this._gotoReference(element, true);\n                    }\n                    else {\n                        this.openReference(element, false, true);\n                    }\n                    break;\n            }\n        }));\n        const requestId = ++this._requestIdPool;\n        modelPromise.then(model => {\n            var _a;\n            // still current request? widget still open?\n            if (requestId !== this._requestIdPool || !this._widget) {\n                model.dispose();\n                return undefined;\n            }\n            (_a = this._model) === null || _a === void 0 ? void 0 : _a.dispose();\n            this._model = model;\n            // show widget\n            return this._widget.setModel(this._model).then(() => {\n                if (this._widget && this._model && this._editor.hasModel()) { // might have been closed\n                    // set title\n                    if (!this._model.isEmpty) {\n                        this._widget.setMetaTitle(nls.localize('metaTitle.N', \"{0} ({1})\", this._model.title, this._model.references.length));\n                    }\n                    else {\n                        this._widget.setMetaTitle('');\n                    }\n                    // set 'best' selection\n                    const uri = this._editor.getModel().uri;\n                    const pos = new Position(range.startLineNumber, range.startColumn);\n                    const selection = this._model.nearestReference(uri, pos);\n                    if (selection) {\n                        return this._widget.setSelection(selection).then(() => {\n                            if (this._widget && this._editor.getOption(86 /* EditorOption.peekWidgetDefaultFocus */) === 'editor') {\n                                this._widget.focusOnPreviewEditor();\n                            }\n                        });\n                    }\n                }\n                return undefined;\n            });\n        }, error => {\n            this._notificationService.error(error);\n        });\n    }\n    changeFocusBetweenPreviewAndReferences() {\n        if (!this._widget) {\n            // can be called while still resolving...\n            return;\n        }\n        if (this._widget.isPreviewEditorFocused()) {\n            this._widget.focusOnReferenceTree();\n        }\n        else {\n            this._widget.focusOnPreviewEditor();\n        }\n    }\n    goToNextOrPreviousReference(fwd) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            const currentPosition = this._widget.position;\n            if (!currentPosition) {\n                return;\n            }\n            const source = this._model.nearestReference(this._editor.getModel().uri, currentPosition);\n            if (!source) {\n                return;\n            }\n            const target = this._model.nextOrPreviousReference(source, fwd);\n            const editorFocus = this._editor.hasTextFocus();\n            const previewEditorFocus = this._widget.isPreviewEditorFocused();\n            yield this._widget.setSelection(target);\n            yield this._gotoReference(target, false);\n            if (editorFocus) {\n                this._editor.focus();\n            }\n            else if (this._widget && previewEditorFocus) {\n                this._widget.focusOnPreviewEditor();\n            }\n        });\n    }\n    revealReference(reference) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._model || !this._widget) {\n                // can be called while still resolving...\n                return;\n            }\n            yield this._widget.revealReference(reference);\n        });\n    }\n    closeWidget(focusEditor = true) {\n        var _a, _b;\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._model) === null || _b === void 0 ? void 0 : _b.dispose();\n        this._referenceSearchVisible.reset();\n        this._disposables.clear();\n        this._widget = undefined;\n        this._model = undefined;\n        if (focusEditor) {\n            this._editor.focus();\n        }\n        this._requestIdPool += 1; // Cancel pending requests\n    }\n    _gotoReference(ref, pinned) {\n        var _a;\n        (_a = this._widget) === null || _a === void 0 ? void 0 : _a.hide();\n        this._ignoreModelChangeEvent = true;\n        const range = Range.lift(ref.range).collapseToStart();\n        return this._editorService.openCodeEditor({\n            resource: ref.uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\n        }, this._editor).then(openedEditor => {\n            var _a;\n            this._ignoreModelChangeEvent = false;\n            if (!openedEditor || !this._widget) {\n                // something went wrong...\n                this.closeWidget();\n                return;\n            }\n            if (this._editor === openedEditor) {\n                //\n                this._widget.show(range);\n                this._widget.focusOnReferenceTree();\n            }\n            else {\n                // we opened a different editor instance which means a different controller instance.\n                // therefore we stop with this controller and continue with the other\n                const other = ReferencesController_1.get(openedEditor);\n                const model = this._model.clone();\n                this.closeWidget();\n                openedEditor.focus();\n                other === null || other === void 0 ? void 0 : other.toggleWidget(range, createCancelablePromise(_ => Promise.resolve(model)), (_a = this._peekMode) !== null && _a !== void 0 ? _a : false);\n            }\n        }, (err) => {\n            this._ignoreModelChangeEvent = false;\n            onUnexpectedError(err);\n        });\n    }\n    openReference(ref, sideBySide, pinned) {\n        // clear stage\n        if (!sideBySide) {\n            this.closeWidget();\n        }\n        const { uri, range } = ref;\n        this._editorService.openCodeEditor({\n            resource: uri,\n            options: { selection: range, selectionSource: \"code.jump\" /* TextEditorSelectionSource.JUMP */, pinned }\n        }, this._editor, sideBySide);\n    }\n};\nReferencesController.ID = 'editor.contrib.referencesController';\nReferencesController = ReferencesController_1 = __decorate([\n    __param(2, IContextKeyService),\n    __param(3, ICodeEditorService),\n    __param(4, INotificationService),\n    __param(5, IInstantiationService),\n    __param(6, IStorageService),\n    __param(7, IConfigurationService)\n], ReferencesController);\nexport { ReferencesController };\nfunction withController(accessor, fn) {\n    const outerEditor = getOuterEditor(accessor);\n    if (!outerEditor) {\n        return;\n    }\n    const controller = ReferencesController.get(outerEditor);\n    if (controller) {\n        fn(controller);\n    }\n}\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'togglePeekWidgetFocus',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 60 /* KeyCode.F2 */),\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.changeFocusBetweenPreviewAndReferences();\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToNextReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 62 /* KeyCode.F4 */,\n    secondary: [70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(true);\n        });\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'goToPreviousReference',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 10,\n    primary: 1024 /* KeyMod.Shift */ | 62 /* KeyCode.F4 */,\n    secondary: [1024 /* KeyMod.Shift */ | 70 /* KeyCode.F12 */],\n    when: ContextKeyExpr.or(ctxReferenceSearchVisible, PeekContext.inPeekEditor),\n    handler(accessor) {\n        withController(accessor, controller => {\n            controller.goToNextOrPreviousReference(false);\n        });\n    }\n});\n// commands that aren't needed anymore because there is now ContextKeyExpr.OR\nCommandsRegistry.registerCommandAlias('goToNextReferenceFromEmbeddedEditor', 'goToNextReference');\nCommandsRegistry.registerCommandAlias('goToPreviousReferenceFromEmbeddedEditor', 'goToPreviousReference');\n// close\nCommandsRegistry.registerCommandAlias('closeReferenceSearchEditor', 'closeReferenceSearch');\nCommandsRegistry.registerCommand('closeReferenceSearch', accessor => withController(accessor, controller => controller.closeWidget()));\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 100 /* KeybindingWeight.EditorContrib */ - 101,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(PeekContext.inPeekEditor, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerKeybindingRule({\n    id: 'closeReferenceSearch',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */ + 50,\n    primary: 9 /* KeyCode.Escape */,\n    secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */],\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, ContextKeyExpr.not('config.editor.stablePeek'))\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'revealReference',\n    weight: 200 /* KeybindingWeight.WorkbenchContrib */,\n    primary: 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 3 /* KeyCode.Enter */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */]\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.revealReference(focus[0]));\n        }\n    }\n});\nKeybindingsRegistry.registerCommandAndKeybindingRule({\n    id: 'openReferenceToSide',\n    weight: 100 /* KeybindingWeight.EditorContrib */,\n    primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n    mac: {\n        primary: 256 /* KeyMod.WinCtrl */ | 3 /* KeyCode.Enter */\n    },\n    when: ContextKeyExpr.and(ctxReferenceSearchVisible, WorkbenchListFocusContextKey, WorkbenchTreeElementCanCollapse.negate(), WorkbenchTreeElementCanExpand.negate()),\n    handler(accessor) {\n        var _a;\n        const listService = accessor.get(IListService);\n        const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n        if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n            withController(accessor, controller => controller.openReference(focus[0], true, true));\n        }\n    }\n});\nCommandsRegistry.registerCommand('openReference', (accessor) => {\n    var _a;\n    const listService = accessor.get(IListService);\n    const focus = (_a = listService.lastFocusedList) === null || _a === void 0 ? void 0 : _a.getFocus();\n    if (Array.isArray(focus) && focus[0] instanceof OneReference) {\n        withController(accessor, controller => controller.openReference(focus[0], false, true));\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { defaultGenerator } from '../../../../base/common/idGenerator.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { ResourceMap } from '../../../../base/common/map.js';\nimport { basename, extUri } from '../../../../base/common/resources.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { localize } from '../../../../nls.js';\nexport class OneReference {\n    constructor(isProviderFirst, parent, link, _rangeCallback) {\n        this.isProviderFirst = isProviderFirst;\n        this.parent = parent;\n        this.link = link;\n        this._rangeCallback = _rangeCallback;\n        this.id = defaultGenerator.nextId();\n    }\n    get uri() {\n        return this.link.uri;\n    }\n    get range() {\n        var _a, _b;\n        return (_b = (_a = this._range) !== null && _a !== void 0 ? _a : this.link.targetSelectionRange) !== null && _b !== void 0 ? _b : this.link.range;\n    }\n    set range(value) {\n        this._range = value;\n        this._rangeCallback(this);\n    }\n    get ariaMessage() {\n        var _a;\n        const preview = (_a = this.parent.getPreview(this)) === null || _a === void 0 ? void 0 : _a.preview(this.range);\n        if (!preview) {\n            return localize('aria.oneReference', \"in {0} on line {1} at column {2}\", basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n        }\n        else {\n            return localize({ key: 'aria.oneReference.preview', comment: ['Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code'] }, \"{0} in {1} on line {2} at column {3}\", preview.value, basename(this.uri), this.range.startLineNumber, this.range.startColumn);\n        }\n    }\n}\nexport class FilePreview {\n    constructor(_modelReference) {\n        this._modelReference = _modelReference;\n    }\n    dispose() {\n        this._modelReference.dispose();\n    }\n    preview(range, n = 8) {\n        const model = this._modelReference.object.textEditorModel;\n        if (!model) {\n            return undefined;\n        }\n        const { startLineNumber, startColumn, endLineNumber, endColumn } = range;\n        const word = model.getWordUntilPosition({ lineNumber: startLineNumber, column: startColumn - n });\n        const beforeRange = new Range(startLineNumber, word.startColumn, startLineNumber, startColumn);\n        const afterRange = new Range(endLineNumber, endColumn, endLineNumber, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        const before = model.getValueInRange(beforeRange).replace(/^\\s+/, '');\n        const inside = model.getValueInRange(range);\n        const after = model.getValueInRange(afterRange).replace(/\\s+$/, '');\n        return {\n            value: before + inside + after,\n            highlight: { start: before.length, end: before.length + inside.length }\n        };\n    }\n}\nexport class FileReferences {\n    constructor(parent, uri) {\n        this.parent = parent;\n        this.uri = uri;\n        this.children = [];\n        this._previews = new ResourceMap();\n    }\n    dispose() {\n        dispose(this._previews.values());\n        this._previews.clear();\n    }\n    getPreview(child) {\n        return this._previews.get(child.uri);\n    }\n    get ariaMessage() {\n        const len = this.children.length;\n        if (len === 1) {\n            return localize('aria.fileReferences.1', \"1 symbol in {0}, full path {1}\", basename(this.uri), this.uri.fsPath);\n        }\n        else {\n            return localize('aria.fileReferences.N', \"{0} symbols in {1}, full path {2}\", len, basename(this.uri), this.uri.fsPath);\n        }\n    }\n    resolve(textModelResolverService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._previews.size !== 0) {\n                return this;\n            }\n            for (const child of this.children) {\n                if (this._previews.has(child.uri)) {\n                    continue;\n                }\n                try {\n                    const ref = yield textModelResolverService.createModelReference(child.uri);\n                    this._previews.set(child.uri, new FilePreview(ref));\n                }\n                catch (err) {\n                    onUnexpectedError(err);\n                }\n            }\n            return this;\n        });\n    }\n}\nexport class ReferencesModel {\n    constructor(links, title) {\n        this.groups = [];\n        this.references = [];\n        this._onDidChangeReferenceRange = new Emitter();\n        this.onDidChangeReferenceRange = this._onDidChangeReferenceRange.event;\n        this._links = links;\n        this._title = title;\n        // grouping and sorting\n        const [providersFirst] = links;\n        links.sort(ReferencesModel._compareReferences);\n        let current;\n        for (const link of links) {\n            if (!current || !extUri.isEqual(current.uri, link.uri, true)) {\n                // new group\n                current = new FileReferences(this, link.uri);\n                this.groups.push(current);\n            }\n            // append, check for equality first!\n            if (current.children.length === 0 || ReferencesModel._compareReferences(link, current.children[current.children.length - 1]) !== 0) {\n                const oneRef = new OneReference(providersFirst === link, current, link, ref => this._onDidChangeReferenceRange.fire(ref));\n                this.references.push(oneRef);\n                current.children.push(oneRef);\n            }\n        }\n    }\n    dispose() {\n        dispose(this.groups);\n        this._onDidChangeReferenceRange.dispose();\n        this.groups.length = 0;\n    }\n    clone() {\n        return new ReferencesModel(this._links, this._title);\n    }\n    get title() {\n        return this._title;\n    }\n    get isEmpty() {\n        return this.groups.length === 0;\n    }\n    get ariaMessage() {\n        if (this.isEmpty) {\n            return localize('aria.result.0', \"No results found\");\n        }\n        else if (this.references.length === 1) {\n            return localize('aria.result.1', \"Found 1 symbol in {0}\", this.references[0].uri.fsPath);\n        }\n        else if (this.groups.length === 1) {\n            return localize('aria.result.n1', \"Found {0} symbols in {1}\", this.references.length, this.groups[0].uri.fsPath);\n        }\n        else {\n            return localize('aria.result.nm', \"Found {0} symbols in {1} files\", this.references.length, this.groups.length);\n        }\n    }\n    nextOrPreviousReference(reference, next) {\n        const { parent } = reference;\n        let idx = parent.children.indexOf(reference);\n        const childCount = parent.children.length;\n        const groupCount = parent.parent.groups.length;\n        if (groupCount === 1 || next && idx + 1 < childCount || !next && idx > 0) {\n            // cycling within one file\n            if (next) {\n                idx = (idx + 1) % childCount;\n            }\n            else {\n                idx = (idx + childCount - 1) % childCount;\n            }\n            return parent.children[idx];\n        }\n        idx = parent.parent.groups.indexOf(parent);\n        if (next) {\n            idx = (idx + 1) % groupCount;\n            return parent.parent.groups[idx].children[0];\n        }\n        else {\n            idx = (idx + groupCount - 1) % groupCount;\n            return parent.parent.groups[idx].children[parent.parent.groups[idx].children.length - 1];\n        }\n    }\n    nearestReference(resource, position) {\n        const nearest = this.references.map((ref, idx) => {\n            return {\n                idx,\n                prefixLen: strings.commonPrefixLength(ref.uri.toString(), resource.toString()),\n                offsetDist: Math.abs(ref.range.startLineNumber - position.lineNumber) * 100 + Math.abs(ref.range.startColumn - position.column)\n            };\n        }).sort((a, b) => {\n            if (a.prefixLen > b.prefixLen) {\n                return -1;\n            }\n            else if (a.prefixLen < b.prefixLen) {\n                return 1;\n            }\n            else if (a.offsetDist < b.offsetDist) {\n                return -1;\n            }\n            else if (a.offsetDist > b.offsetDist) {\n                return 1;\n            }\n            else {\n                return 0;\n            }\n        })[0];\n        if (nearest) {\n            return this.references[nearest.idx];\n        }\n        return undefined;\n    }\n    referenceAt(resource, position) {\n        for (const ref of this.references) {\n            if (ref.uri.toString() === resource.toString()) {\n                if (Range.containsPosition(ref.range, position)) {\n                    return ref;\n                }\n            }\n        }\n        return undefined;\n    }\n    firstReference() {\n        for (const ref of this.references) {\n            if (ref.isProviderFirst) {\n                return ref;\n            }\n        }\n        return this.references[0];\n    }\n    static _compareReferences(a, b) {\n        return extUri.compare(a.uri, b.uri) || Range.compareRangesUsingStarts(a.range, b.range);\n    }\n}\n"],"names":["EditorFontZoomIn","_EditorAction","_inherits","_super","_createSuper","_classCallCheck","call","id","label","nls","alias","precondition","undefined","_createClass","key","value","accessor","editor","EditorZoom","setZoomLevel","getZoomLevel","EditorAction","EditorFontZoomOut","_EditorAction2","_super2","EditorFontZoomReset","_EditorAction3","_super3","registerEditorAction","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","result","done","then","apply","alertFormattingEdits","edits","filter","edit","range","length","i","Range","plusRange","_range","startLineNumber","endLineNumber","alert","getRealAndSyntheticDocumentFormattersOrdered","documentFormattingEditProvider","documentRangeFormattingEditProvider","model","_step","seen","ExtensionIdentifierSet","docFormatter","ordered","_iterator","_createForOfIteratorHelper","s","n","formatter","push","extensionId","add","err","f","_step2","rangeFormatter","_iterator2","_loop","has","displayName","provideDocumentFormattingEdits","options","token","provideDocumentRangeFormattingEdits","getFullModelRange","FormattingConflicts","selector","dispose","_selectors","unshift","document","mode","this","_regeneratorRuntime","mark","_callee","wrap","_context","prev","abrupt","Iterable","first","sent","stop","formatDocumentRangesWithSelectedProvider","editorOrModel","rangeOrRanges","progress","_callee2","instaService","_accessor$get","documentRangeFormattingEditProviderRegistry","provider","selected","_context2","get","IInstantiationService","ILanguageFeaturesService","isCodeEditor","getModel","select","report","invokeFunction","formatDocumentRangesWithProvider","_a","_b","_callee4","workerService","logService","cts","ranges","len","_iterator3","_step3","_range4","computeEdits","hasIntersectingEdit","allEdits","rawEditsList","_iterator6","_step6","j","mergedRange","_i","_rawEditsList","rawEdits","minimalEdits","_range2","initialSelection","_this","_context4","IEditorWorkerService","ILogService","EditorStateCancellationTokenSource","TextModelCancellationTokenSource","asArray","sort","compareRangesUsingStarts","areIntersectingOrTouching","fromPositions","getStartPosition","getEndPosition","_callee3","_c","_d","_context3","trace","getFormattingOptions","t0","a","b","mergedA","reduce","acc","val","some","x","intersectRanges","_step4","_iterator4","_step5","_iterator5","otherEdit","provideDocumentRangesFormattingEdits","isCancellationRequested","t1","t2","t3","finish","splice","computeMoreMinimalEdits","uri","_toConsumableArray","FormattingEdit","execute","revealPositionInCenterIfOutsideViewport","getPosition","Selection","startColumn","endColumn","pushEditOperations","map","text","lift","forceMoveMarkers","undoEdits","_step7","_iterator7","formatDocumentWithSelectedProvider","_callee5","languageFeaturesService","_context5","formatDocumentWithProvider","_callee6","_edits","_edits2","_context6","_slicedToArray","_step8","_iterator8","getDocumentRangeFormattingEditsUntilResult","_callee7","providers","_iterator9","_step9","_context7","catch","onUnexpectedExternalError","isNonEmptyArray","getDocumentFormattingEditsUntilResult","_callee8","_iterator10","_step10","_context8","getOnTypeFormattingEdits","position","ch","onTypeFormattingEditProvider","autoFormatTriggerCharacters","indexOf","provideOnTypeFormattingEdits","LinkedList","CommandsRegistry","registerCommand","_len","arguments","args","Array","_key","_callee9","resource","resolverService","reference","_context9","assertType","URI","isUri","isIRange","ITextModelService","createModelReference","object","textEditorModel","CancellationToken","None","_len2","_key2","_callee10","_context10","_len3","_key3","_callee11","_context11","Position","isIPosition","__decorate","decorators","target","desc","d","c","r","Object","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","FormatOnType","_editor","_languageFeaturesService","_workerService","_disposables","DisposableStore","_sessionDisposables","onDidChange","_update","onDidChangeModel","onDidChangeModelLanguage","onDidChangeConfiguration","hasChanged","_this2","clear","getOption","hasModel","_this$_languageFeatur","support","triggerChars","CharacterSet","charCodeAt","onDidType","lastCharCode","_trigger","String","fromCharCode","_this3","getSelections","getSelection","isEmpty","CancellationTokenSource","unbind","onDidChangeModelContent","isFlush","cancel","changes","lineNumber","finally","ID","FormatOnPaste","_instantiationService","_this4","_callOnDispose","_callOnModel","_this5","onDidPaste","_ref","Progress","onUnexpectedError","FormatDocumentAction","ContextKeyExpr","and","EditorContextKeys","notInCompositeEditor","writable","hasDocumentFormattingProvider","kbOpts","kbExpr","editorTextFocus","primary","linux","weight","contextMenuOpts","group","order","progressService","IEditorProgressService","showWhile","FormatSelectionAction","hasDocumentSelectionFormattingProvider","KeyChord","when","hasNonEmptySelection","getLineMaxColumn","registerEditorContribution","commandService","ICodeEditorService","getFocusedCodeEditor","ICommandService","executeCommand","newEol","singleEdits","eol","pushEOL","editRange","validateRange","equalsRange","addUndoStops","pushUndoStop","scrollState","StableEditorScrollState","capture","_handleEolEdits","_isFullModelReplaceEdit","executeEdits","EditOperation","replace","replaceMove","restoreRelativeVerticalPositionOfCursor","MarkerCoordinate","marker","index","total","MarkerList","resourceFilter","_markerService","_configService","_onDidChange","Emitter","event","_dispoables","_markers","_nextIdx","_resourceFilter","toString","compareOrder","getValue","compareMarker","res","compare","MarkerSeverity","severity","updateMarker","read","severities","Error","Warning","Info","m","onMarkerChanged","uris","fire","fwd","found","idx","findIndex","binarySearch","word","getWordAtPosition","containsPosition","isBeforeOrEqual","oldIdx","_initIdx","IMarkerService","IConfigurationService","IMarkerNavigationService","createDecorator","MarkerNavigationService","_provider","getMarkerList","registerSingleton","MarkerNavigationWidget_1","MessageWidget","parent","onRelatedInformation","_openerService","_labelService","_lines","_longestLineLength","_relatedDiagnostics","WeakMap","domNode","createElement","className","_messageBlock","classList","setAttribute","appendChild","_relatedBlock","dom","addStandardDisposableListener","preventDefault","related","_scrollable","ScrollableElement","horizontal","vertical","useShadows","horizontalScrollbarSize","verticalScrollbarSize","getDomNode","onScroll","style","left","concat","scrollLeft","top","scrollTop","source","message","relatedInformation","code","sourceAndCodeLength","lines","splitLines","line","Math","max","clearNode","getAriaLabel","applyFontInfo","lastLineElement","innerText","height","lineHeight","detailsElement","sourceElement","codeElement","_codeLink","$","onclick","open","allowCommands","stopPropagation","append","relatedInformationNode","paddingTop","floor","container","relatedResource","getUriBasenameLabel","title","getUriLabel","set","relatedMessage","fontInfo","scrollWidth","ceil","typicalFullwidthCharacterWidth","scrollHeight","setScrollDimensions","width","min","severityLabel","Hint","ariaLabel","getLineCount","lineContent","getLineContent","MarkerNavigationWidget","_PeekViewWidget","_themeService","_menuService","instantiationService","_contextKeyService","showArrow","showFrame","isAccessible","frameWidth","_onDidSelectRelatedInformation","onDidSelectRelatedInformation","_severity","_backgroundColor","Color","white","_applyTheme","getColorTheme","onDidColorThemeChange","bind","_assertThisInitialized","create","theme","getColor","editorMarkerNavigationBackground","colorId","editorMarkerNavigationError","headerBackground","editorMarkerNavigationErrorHeader","editorMarkerNavigationWarning","editorMarkerNavigationWarningHeader","editorMarkerNavigationInfo","editorMarkerNavigationInfoHeader","frameColor","headerBg","arrowColor","headerBackgroundColor","primaryHeadingColor","peekViewTitleForeground","secondaryHeadingColor","peekViewTitleInfoForeground","_parentContainer","backgroundColor","_get","_getPrototypeOf","prototype","_actionbarWidget","actionRunner","onWillRun","focus","actions","menu","createMenu","TitleMenu","createAndFillInActionBarActions","icon","_icon","tabIndex","_container","_message","markerIdx","markerCount","remove","update","editorPosition","computeRequiredHeight","detail","setTitle","basename","SeverityIcon","toSeverity","revealPositionNearTop","_relayout","heightInPixel","widthInPixel","_heightInPixel","layout","getHeightInLines","PeekViewWidget","MenuId","IThemeService","IOpenerService","IMenuService","IContextKeyService","ILabelService","MarkerController_1","errorDefault","oneOf","editorErrorForeground","editorErrorBorder","warningDefault","editorWarningForeground","editorWarningBorder","infoDefault","editorInfoForeground","editorInfoBorder","registerColor","dark","light","hcDark","contrastBorder","hcLight","transparent","editorBackground","MarkerController","_markerNavigationService","_editorService","_sessionDispoables","_widgetVisible","CONTEXT_MARKERS_NAVIGATION_VISIBLE","bindTo","_cleanUp","reset","_widget","_model","matches","reusePosition","move","createInstance","onDidClose","close","onDidChangeCursorPosition","resetIndex","info","find","showStale","openCodeEditor","pinned","revealIfOpened","selection","collapseToStart","focusEditor","_getOrCreateModel","showAtMarker","multiFile","otherEditor","selectionRevealType","nagivate","getContribution","MarkerNavigationAction","_next","_multiFile","opts","_accessor","NextMarkerAction","_MarkerNavigationActi","LABEL","menuOpts","menuId","registerIcon","Codicon","arrowDown","PrevMarkerAction","_MarkerNavigationActi2","arrowUp","NextMarkerInFilesAction","_MarkerNavigationActi3","_super4","MenubarGoMenu","comment","PrevMarkerInFilesAction","_MarkerNavigationActi4","_super5","RawContextKey","MarkerCommand","EditorCommand","bindToContribution","registerEditorCommand","handler","secondary","ctxHasSymbols","localize","ISymbolNavigationService","SymbolNavigationService","contextKeyService","_notificationService","_keybindingService","_currentModel","_currentIdx","_ignoreEditorChange","_ctxHasSymbols","_currentState","_currentMessage","anchor","refModel","references","_showMessage","editorState","EditorState","listener","_","getActiveCodeEditor","seenUri","seenPosition","isEqual","combinedDisposable","kb","lookupKeybinding","getLabel","status","INotificationService","IKeybindingService","_EditorCommand","_class","revealNext","KeybindingsRegistry","registerCommandAndKeybindingRule","editorService","_listener","Map","onCodeEditorRemove","_onDidRemoveEditor","onCodeEditorAdd","_onDidAddEditor","listCodeEditors","forEach","values","delete","_e","_f","_g","_h","MenuRegistry","appendMenuItem","EditorContext","submenu","EditorContextPeek","SymbolNavigationAnchor","thing","corePosition","SymbolNavigationAction","configuration","_patchConfig","_allSymbolNavigationCommands","arg","notificationService","symbolNavService","is","promise","raceCancellation","_getLocationModel","_j","altAction","altActionId","referenceCount","ariaMessage","referenceAt","_getAlternativeCommand","_activeAlternativeCommands","muteMessage","MessageController","showMessage","_getNoResultFoundMessage","runEditorCommand","_onResult","error","gotoLocation","peek","targetEditor","_getGoToPreference","EmbeddedCodeEditorWidget","openInPeek","_openInPeek","firstReference","_openReference","openToSide","put","sideBySide","highlight","modelNow","decorations","isLocationLink","targetSelectionRange","selectionSource","createDecorationsCollection","description","setTimeout","controller","ReferencesController","toggleWidget","createCancelablePromise","assign","f1","item","EditorAction2","Set","DefinitionAction","_SymbolNavigationActi","ReferencesModel","getDefinitionsAtPosition","definitionProvider","alternativeDefinitionCommand","multipleDefinitions","registerAction2","_DefinitionAction","GoToDefinitionAction","original","mnemonicTitle","hasDefinitionProvider","isInWalkThroughSnippet","toNegated","keybinding","IsWebContext","registerCommandAlias","_DefinitionAction2","OpenDefinitionToSideAction","_DefinitionAction3","PeekDefinitionAction","_this6","PeekContext","notInPeekEditor","DeclarationAction","_SymbolNavigationActi2","_super6","getDeclarationsAtPosition","declarationProvider","alternativeDeclarationCommand","multipleDeclarations","_DeclarationAction","GoToDeclarationAction","_super7","hasDeclarationProvider","_DeclarationAction2","PeekDeclarationAction","_super8","TypeDefinitionAction","_SymbolNavigationActi3","_super9","getTypeDefinitionsAtPosition","typeDefinitionProvider","alternativeTypeDefinitionCommand","multipleTypeDefinitions","_TypeDefinitionAction","GoToTypeDefinitionAction","_super10","hasTypeDefinitionProvider","_TypeDefinitionAction2","PeekTypeDefinitionAction","_super11","ImplementationAction","_SymbolNavigationActi4","_super12","getImplementationsAtPosition","implementationProvider","alternativeImplementationCommand","multipleImplementations","_ImplementationAction","GoToImplementationAction","_super13","hasImplementationProvider","_ImplementationAction2","PeekImplementationAction","_super14","ReferencesAction","_SymbolNavigationActi5","_super15","alternativeReferenceCommand","multipleReferences","_ReferencesAction","GoToReferencesAction","_super16","hasReferenceProvider","getReferencesAtPosition","referenceProvider","_ReferencesAction2","PeekReferencesAction","_super17","GenericGoToLocationAction","_SymbolNavigationActi6","_super18","config","_references","_gotoMultipleBehaviour","_this7","_position","_token","name","constraint","multiple","noResultsMessage","isArray","setPosition","invokeWithinContext","command","_GenericGoToLocationA","_super19","Boolean","run","_callee12","_context12","codeEditorService","control","column","getLocationLinks","registry","provide","promises","all","coalesce","flat","provideDefinition","provideDeclaration","provideImplementation","provideTypeDefinition","compact","resultWithoutDeclaration","provideReferences","includeDeclaration","_sortedAndDeduped","callback","rawLinks","modelLinks","ref","link","registerModelAndPositionCommand","hasModifier","modifier","ClickLinkMouseEvent","isLeftClick","leftButton","isMiddleClick","middleButton","isRightClick","rightButton","hasTriggerModifier","triggerModifier","hasSideBySideModifier","triggerSideBySideModifier","isNoneOrSingleMouseDown","ClickLinkKeyboardEvent","keyCodeIsTriggerKey","keyCode","triggerKey","keyCodeIsSideBySideKey","triggerSideBySideKey","ClickLinkOptions","other","createOptions","multiCursorModifier","platform","ClickLinkGesture","_Disposable","_onMouseMoveOrRelevantKeyDown","_register","onMouseMoveOrRelevantKeyDown","_onExecute","onExecute","_onCancel","onCancel","_extractLineNumberFromMouseEvent","extractLineNumberFromMouseEvent","_opts","_lastMouseMoveEvent","_hasTriggerKeyOnMouseDown","_lineNumberOnMouseDown","newOpts","equals","onMouseMove","_onEditorMouseMove","onMouseDown","_onEditorMouseDown","onMouseUp","_onEditorMouseUp","onKeyDown","_onEditorKeyDown","onKeyUp","_onEditorKeyUp","onMouseDrag","_resetHandler","onDidChangeCursorSelection","_onDidChangeCursorSelection","onDidScrollChange","scrollTopChanged","scrollLeftChanged","mouseEvent","currentLineNumber","Disposable","GotoDefinitionAtPositionEditorContribution_1","GotoDefinitionAtPositionEditorContribution","textModelResolverService","languageService","toUnhook","toUnhookForKeyboard","currentWordAtPosition","previousPromise","linkDecorations","linkGesture","_ref2","keyboardEvent","startFindDefinitionFromMouse","isEnabled","gotoDefinition","removeLinkDecorations","startFindDefinition","withKey","type","state","results","linkRange","combinedRange","originSelectionRange","findDefinition","validate","addDecoration","MarkdownString","appendText","previewValue","getPreviewValue","languageId","guessLanguageIdByFilepathOrFirstLine","appendCodeblock","rangeToUse","MAX_SOURCE_PREVIEW_LINES","getPreviewRangeBasedOnIndentation","stripIndentationFromPreviewRange","previewRange","minIndent","getLineFirstNonWhitespaceColumn","endIndent","getValueInRange","RegExp","trim","startIndent","maxLineNumber","hoverMessage","newDecorations","inlineClassName","injectedText","ModelDecorationInjectedTextOptions","canPeek","isInPeekEditor","inPeekEditor","ILanguageService","FileReferencesRenderer_1","DataSource","_resolverService","element","FileReferences","groups","children","Delegate","FileReferencesRenderer","OneReferenceRenderer","StringRepresentationProvider","OneReference","parts","getPreview","preview","IdentityProvider","FileReferencesTemplate","file","IconLabel","supportHighlights","badge","CountBadge","defaultCountBadgeStyles","dirname","setLabel","relative","setCount","setTitleFormat","templateId","node","template","createMatches","filterData","templateData","OneReferenceTemplate","HighlightedLabel","score","FuzzyScore","isDefault","toggle","AccessibilityProvider","DecorationsManager","_decorations","_decorationIgnoreSet","_callOnModelChange","_onModelChanged","removeDecorations","_addDecorations","onDidChangeDecorations","_onDecorationChanged","newDecorationsActualIndex","oneReference","DecorationOptions","changeDecorations","changeAccessor","deltaDecorations","toRemove","_step2$value","decorationId","newRange","getDecorationRange","ignore","spansMultipleLines","keys","ModelDecorationOptions","register","stickiness","LayoutData","ratio","heightInLines","raw","data","JSON","parse","ReferencesTree","_WorkbenchAsyncDataTr","WorkbenchAsyncDataTree","ReferenceWidget","_peekView$PeekViewWid","_defaultTreeKeyboardSupport","layoutData","themeService","_textModelResolverService","_peekViewService","_uriLabel","_undoRedoService","_languageService","_languageConfigurationService","isResizeable","supportOnTitleClick","_disposeOnNewModel","_onDidSelectReference","onDidSelectReference","_dim","Dimension","addExclusiveWidget","setModel","_preview","_previewNotAvailableMessage","_tree","_previewModelReference","_splitView","borderColor","peekView","where","domFocus","hasTextFocus","_getFocusedReference","kind","ctrlKey","metaKey","altKey","containerElement","setCssClass","_messageContainer","hide","SplitView","orientation","_previewContainer","scrollBeyondLastLine","scrollbar","verticalHasArrows","horizontalHasArrows","alwaysConsumeMouseWheel","overviewRulerLanes","fixedOverflowWidgets","minimap","enabled","TextModel","PLAINTEXT_LANGUAGE_ID","DEFAULT_CREATION_OPTIONS","_treeContainer","treeOptions","keyboardSupport","accessibilityProvider","keyboardNavigationLabelProvider","identityProvider","openOnSingleClick","selectionNavigation","overrideStyles","listBackground","dispatchEvent","addView","Event","minimumSize","maximumSize","Number","MAX_VALUE","Sizing","Distribute","onDidSashChange","getViewSize","onEvent","_revealReference","onDidOpen","editorOptions","_doLayoutBody","_viewZone","resizeView","setSelection","setFocus","newModel","_onNewModel","show","_decorationsManager","onDidChangeReferenceRange","rerender","focusOnReferenceTree","setInput","_this$_tree$getFocus","getFocus","revealParent","scrollType","sel","_revealedReference","scheme","Schemas","inMemory","basenameOrAuthority","getInput","reveal","expand","revealRangeInCenter","IUndoRedoService","ILanguageConfigurationService","ReferencesController_1","ctxReferenceSearchVisible","_storageService","_configurationService","_requestIdPool","_ignoreModelChangeEvent","_referenceSearchVisible","modelPromise","peekMode","widgetPosition","closeWidget","_peekMode","storageKey","fromJSON","store","stringify","openReference","_gotoReference","requestId","setMetaTitle","pos","nearestReference","focusOnPreviewEditor","isPreviewEditorFocused","currentPosition","editorFocus","previewEditorFocus","nextOrPreviousReference","revealReference","openedEditor","clone","withController","fn","outerEditor","getOuterEditor","IStorageService","or","changeFocusBetweenPreviewAndReferences","goToNextOrPreviousReference","registerKeybindingRule","not","mac","WorkbenchListFocusContextKey","WorkbenchTreeElementCanCollapse","negate","WorkbenchTreeElementCanExpand","IListService","lastFocusedList","isProviderFirst","_rangeCallback","defaultGenerator","nextId","FilePreview","_modelReference","getWordUntilPosition","beforeRange","afterRange","before","inside","start","end","_previews","ResourceMap","child","fsPath","size","links","_onDidChangeReferenceRange","_links","_title","current","providersFirst","_compareReferences","extUri","oneRef","childCount","groupCount","nearest","prefixLen","strings","offsetDist","abs"],"sourceRoot":""}