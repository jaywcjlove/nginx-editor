{"version":3,"file":"static/js/monaco-editor-vendor.f873852b.21c10ae8.js","mappings":"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","sources":["../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/dnd/browser/dragAndDropCommand.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/dnd/browser/dnd.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/documentSymbols.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/documentSymbols/browser/outlineModel.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/dropIntoEditor/browser/dropIntoEditorContribution.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/editorState/browser/keybindingCancellation.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/editorState/browser/editorState.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findDecorations.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/replaceAllCommand.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/replacePattern.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findModel.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findOptionsWidget.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findState.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findWidget.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/find/browser/findController.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nexport class DragAndDropCommand {\n    constructor(selection, targetPosition, copy) {\n        this.selection = selection;\n        this.targetPosition = targetPosition;\n        this.copy = copy;\n        this.targetSelection = null;\n    }\n    getEditOperations(model, builder) {\n        const text = model.getValueInRange(this.selection);\n        if (!this.copy) {\n            builder.addEditOperation(this.selection, null);\n        }\n        builder.addEditOperation(new Range(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column), text);\n        if (this.selection.containsPosition(this.targetPosition) && !(this.copy && (this.selection.getEndPosition().equals(this.targetPosition) || this.selection.getStartPosition().equals(this.targetPosition)) // we allow users to paste content beside the selection\n        )) {\n            this.targetSelection = this.selection;\n            return;\n        }\n        if (this.copy) {\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.selection.endLineNumber - this.selection.startLineNumber + this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        if (this.targetPosition.lineNumber > this.selection.endLineNumber) {\n            // Drag the selection downwards\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        if (this.targetPosition.lineNumber < this.selection.endLineNumber) {\n            // Drag the selection upwards\n            this.targetSelection = new Selection(this.targetPosition.lineNumber, this.targetPosition.column, this.targetPosition.lineNumber + this.selection.endLineNumber - this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column + this.selection.endColumn - this.selection.startColumn :\n                this.selection.endColumn);\n            return;\n        }\n        // The target position is at the same line as the selection's end position.\n        if (this.selection.endColumn <= this.targetPosition.column) {\n            // The target position is after the selection's end position\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn :\n                this.targetPosition.column - this.selection.endColumn + this.selection.startColumn, this.targetPosition.lineNumber, this.selection.startLineNumber === this.selection.endLineNumber ?\n                this.targetPosition.column :\n                this.selection.endColumn);\n        }\n        else {\n            // The target position is before the selection's end position. Since the selection doesn't contain the target position, the selection is one-line and target position is before this selection.\n            this.targetSelection = new Selection(this.targetPosition.lineNumber - this.selection.endLineNumber + this.selection.startLineNumber, this.targetPosition.column, this.targetPosition.lineNumber, this.targetPosition.column + this.selection.endColumn - this.selection.startColumn);\n        }\n    }\n    computeCursorState(model, helper) {\n        return this.targetSelection;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport './dnd.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { DragAndDropCommand } from './dragAndDropCommand.js';\nfunction hasTriggerModifier(e) {\n    if (isMacintosh) {\n        return e.altKey;\n    }\n    else {\n        return e.ctrlKey;\n    }\n}\nclass DragAndDropController extends Disposable {\n    constructor(editor) {\n        super();\n        this._editor = editor;\n        this._dndDecorationIds = this._editor.createDecorationsCollection();\n        this._register(this._editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n        this._register(this._editor.onMouseUp((e) => this._onEditorMouseUp(e)));\n        this._register(this._editor.onMouseDrag((e) => this._onEditorMouseDrag(e)));\n        this._register(this._editor.onMouseDrop((e) => this._onEditorMouseDrop(e)));\n        this._register(this._editor.onMouseDropCanceled(() => this._onEditorMouseDropCanceled()));\n        this._register(this._editor.onKeyDown((e) => this.onEditorKeyDown(e)));\n        this._register(this._editor.onKeyUp((e) => this.onEditorKeyUp(e)));\n        this._register(this._editor.onDidBlurEditorWidget(() => this.onEditorBlur()));\n        this._register(this._editor.onDidBlurEditorText(() => this.onEditorBlur()));\n        this._mouseDown = false;\n        this._modifierPressed = false;\n        this._dragSelection = null;\n    }\n    onEditorBlur() {\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n        this._modifierPressed = false;\n    }\n    onEditorKeyDown(e) {\n        if (!this._editor.getOption(32 /* EditorOption.dragAndDrop */) || this._editor.getOption(19 /* EditorOption.columnSelection */)) {\n            return;\n        }\n        if (hasTriggerModifier(e)) {\n            this._modifierPressed = true;\n        }\n        if (this._mouseDown && hasTriggerModifier(e)) {\n            this._editor.updateOptions({\n                mouseStyle: 'copy'\n            });\n        }\n    }\n    onEditorKeyUp(e) {\n        if (!this._editor.getOption(32 /* EditorOption.dragAndDrop */) || this._editor.getOption(19 /* EditorOption.columnSelection */)) {\n            return;\n        }\n        if (hasTriggerModifier(e)) {\n            this._modifierPressed = false;\n        }\n        if (this._mouseDown && e.keyCode === DragAndDropController.TRIGGER_KEY_VALUE) {\n            this._editor.updateOptions({\n                mouseStyle: 'default'\n            });\n        }\n    }\n    _onEditorMouseDown(mouseEvent) {\n        this._mouseDown = true;\n    }\n    _onEditorMouseUp(mouseEvent) {\n        this._mouseDown = false;\n        // Whenever users release the mouse, the drag and drop operation should finish and the cursor should revert to text.\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n    }\n    _onEditorMouseDrag(mouseEvent) {\n        const target = mouseEvent.target;\n        if (this._dragSelection === null) {\n            const selections = this._editor.getSelections() || [];\n            const possibleSelections = selections.filter(selection => target.position && selection.containsPosition(target.position));\n            if (possibleSelections.length === 1) {\n                this._dragSelection = possibleSelections[0];\n            }\n            else {\n                return;\n            }\n        }\n        if (hasTriggerModifier(mouseEvent.event)) {\n            this._editor.updateOptions({\n                mouseStyle: 'copy'\n            });\n        }\n        else {\n            this._editor.updateOptions({\n                mouseStyle: 'default'\n            });\n        }\n        if (target.position) {\n            if (this._dragSelection.containsPosition(target.position)) {\n                this._removeDecoration();\n            }\n            else {\n                this.showAt(target.position);\n            }\n        }\n    }\n    _onEditorMouseDropCanceled() {\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n    }\n    _onEditorMouseDrop(mouseEvent) {\n        if (mouseEvent.target && (this._hitContent(mouseEvent.target) || this._hitMargin(mouseEvent.target)) && mouseEvent.target.position) {\n            const newCursorPosition = new Position(mouseEvent.target.position.lineNumber, mouseEvent.target.position.column);\n            if (this._dragSelection === null) {\n                let newSelections = null;\n                if (mouseEvent.event.shiftKey) {\n                    const primarySelection = this._editor.getSelection();\n                    if (primarySelection) {\n                        const { selectionStartLineNumber, selectionStartColumn } = primarySelection;\n                        newSelections = [new Selection(selectionStartLineNumber, selectionStartColumn, newCursorPosition.lineNumber, newCursorPosition.column)];\n                    }\n                }\n                else {\n                    newSelections = (this._editor.getSelections() || []).map(selection => {\n                        if (selection.containsPosition(newCursorPosition)) {\n                            return new Selection(newCursorPosition.lineNumber, newCursorPosition.column, newCursorPosition.lineNumber, newCursorPosition.column);\n                        }\n                        else {\n                            return selection;\n                        }\n                    });\n                }\n                // Use `mouse` as the source instead of `api` and setting the reason to explicit (to behave like any other mouse operation).\n                this._editor.setSelections(newSelections || [], 'mouse', 3 /* CursorChangeReason.Explicit */);\n            }\n            else if (!this._dragSelection.containsPosition(newCursorPosition) ||\n                ((hasTriggerModifier(mouseEvent.event) ||\n                    this._modifierPressed) && (this._dragSelection.getEndPosition().equals(newCursorPosition) || this._dragSelection.getStartPosition().equals(newCursorPosition)) // we allow users to paste content beside the selection\n                )) {\n                this._editor.pushUndoStop();\n                this._editor.executeCommand(DragAndDropController.ID, new DragAndDropCommand(this._dragSelection, newCursorPosition, hasTriggerModifier(mouseEvent.event) || this._modifierPressed));\n                this._editor.pushUndoStop();\n            }\n        }\n        this._editor.updateOptions({\n            mouseStyle: 'text'\n        });\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n    }\n    showAt(position) {\n        this._dndDecorationIds.set([{\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n                options: DragAndDropController._DECORATION_OPTIONS\n            }]);\n        this._editor.revealPosition(position, 1 /* ScrollType.Immediate */);\n    }\n    _removeDecoration() {\n        this._dndDecorationIds.clear();\n    }\n    _hitContent(target) {\n        return target.type === 6 /* MouseTargetType.CONTENT_TEXT */ ||\n            target.type === 7 /* MouseTargetType.CONTENT_EMPTY */;\n    }\n    _hitMargin(target) {\n        return target.type === 2 /* MouseTargetType.GUTTER_GLYPH_MARGIN */ ||\n            target.type === 3 /* MouseTargetType.GUTTER_LINE_NUMBERS */ ||\n            target.type === 4 /* MouseTargetType.GUTTER_LINE_DECORATIONS */;\n    }\n    dispose() {\n        this._removeDecoration();\n        this._dragSelection = null;\n        this._mouseDown = false;\n        this._modifierPressed = false;\n        super.dispose();\n    }\n}\nDragAndDropController.ID = 'editor.contrib.dragAndDrop';\nDragAndDropController.TRIGGER_KEY_VALUE = isMacintosh ? 6 /* KeyCode.Alt */ : 5 /* KeyCode.Ctrl */;\nDragAndDropController._DECORATION_OPTIONS = ModelDecorationOptions.register({\n    description: 'dnd-target',\n    className: 'dnd-target'\n});\nexport { DragAndDropController };\nregisterEditorContribution(DragAndDropController.ID, DragAndDropController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { IOutlineModelService } from './outlineModel.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nCommandsRegistry.registerCommand('_executeDocumentSymbolProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource] = args;\n        assertType(URI.isUri(resource));\n        const outlineService = accessor.get(IOutlineModelService);\n        const modelService = accessor.get(ITextModelService);\n        const reference = yield modelService.createModelReference(resource);\n        try {\n            return (yield outlineService.getOrCreate(reference.object.textEditorModel, CancellationToken.None)).getTopLevelSymbols();\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { equals } from '../../../../base/common/arrays.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nexport class TreeElement {\n    remove() {\n        var _a;\n        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.children.delete(this.id);\n    }\n    static findId(candidate, container) {\n        // complex id-computation which contains the origin/extension,\n        // the parent path, and some dedupe logic when names collide\n        let candidateId;\n        if (typeof candidate === 'string') {\n            candidateId = `${container.id}/${candidate}`;\n        }\n        else {\n            candidateId = `${container.id}/${candidate.name}`;\n            if (container.children.get(candidateId) !== undefined) {\n                candidateId = `${container.id}/${candidate.name}_${candidate.range.startLineNumber}_${candidate.range.startColumn}`;\n            }\n        }\n        let id = candidateId;\n        for (let i = 0; container.children.get(id) !== undefined; i++) {\n            id = `${candidateId}_${i}`;\n        }\n        return id;\n    }\n    static empty(element) {\n        return element.children.size === 0;\n    }\n}\nexport class OutlineElement extends TreeElement {\n    constructor(id, parent, symbol) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.symbol = symbol;\n        this.children = new Map();\n    }\n}\nexport class OutlineGroup extends TreeElement {\n    constructor(id, parent, label, order) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.label = label;\n        this.order = order;\n        this.children = new Map();\n    }\n}\nexport class OutlineModel extends TreeElement {\n    static create(registry, textModel, token) {\n        const cts = new CancellationTokenSource(token);\n        const result = new OutlineModel(textModel.uri);\n        const provider = registry.ordered(textModel);\n        const promises = provider.map((provider, index) => {\n            var _a;\n            const id = TreeElement.findId(`provider_${index}`, result);\n            const group = new OutlineGroup(id, result, (_a = provider.displayName) !== null && _a !== void 0 ? _a : 'Unknown Outline Provider', index);\n            return Promise.resolve(provider.provideDocumentSymbols(textModel, cts.token)).then(result => {\n                for (const info of result || []) {\n                    OutlineModel._makeOutlineElement(info, group);\n                }\n                return group;\n            }, err => {\n                onUnexpectedExternalError(err);\n                return group;\n            }).then(group => {\n                if (!TreeElement.empty(group)) {\n                    result._groups.set(id, group);\n                }\n                else {\n                    group.remove();\n                }\n            });\n        });\n        const listener = registry.onDidChange(() => {\n            const newProvider = registry.ordered(textModel);\n            if (!equals(newProvider, provider)) {\n                cts.cancel();\n            }\n        });\n        return Promise.all(promises).then(() => {\n            if (cts.token.isCancellationRequested && !token.isCancellationRequested) {\n                return OutlineModel.create(registry, textModel, token);\n            }\n            else {\n                return result._compact();\n            }\n        }).finally(() => {\n            listener.dispose();\n        });\n    }\n    static _makeOutlineElement(info, container) {\n        const id = TreeElement.findId(info, container);\n        const res = new OutlineElement(id, container, info);\n        if (info.children) {\n            for (const childInfo of info.children) {\n                OutlineModel._makeOutlineElement(childInfo, res);\n            }\n        }\n        container.children.set(res.id, res);\n    }\n    constructor(uri) {\n        super();\n        this.uri = uri;\n        this.id = 'root';\n        this.parent = undefined;\n        this._groups = new Map();\n        this.children = new Map();\n        this.id = 'root';\n        this.parent = undefined;\n    }\n    _compact() {\n        let count = 0;\n        for (const [key, group] of this._groups) {\n            if (group.children.size === 0) { // empty\n                this._groups.delete(key);\n            }\n            else {\n                count += 1;\n            }\n        }\n        if (count !== 1) {\n            //\n            this.children = this._groups;\n        }\n        else {\n            // adopt all elements of the first group\n            const group = Iterable.first(this._groups.values());\n            for (const [, child] of group.children) {\n                child.parent = this;\n                this.children.set(child.id, child);\n            }\n        }\n        return this;\n    }\n    getTopLevelSymbols() {\n        const roots = [];\n        for (const child of this.children.values()) {\n            if (child instanceof OutlineElement) {\n                roots.push(child.symbol);\n            }\n            else {\n                roots.push(...Iterable.map(child.children.values(), child => child.symbol));\n            }\n        }\n        return roots.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n    }\n    asListOfDocumentSymbols() {\n        const roots = this.getTopLevelSymbols();\n        const bucket = [];\n        OutlineModel._flattenDocumentSymbols(bucket, roots, '');\n        return bucket.sort((a, b) => Position.compare(Range.getStartPosition(a.range), Range.getStartPosition(b.range)) || Position.compare(Range.getEndPosition(b.range), Range.getEndPosition(a.range)));\n    }\n    static _flattenDocumentSymbols(bucket, entries, overrideContainerLabel) {\n        for (const entry of entries) {\n            bucket.push({\n                kind: entry.kind,\n                tags: entry.tags,\n                name: entry.name,\n                detail: entry.detail,\n                containerName: entry.containerName || overrideContainerLabel,\n                range: entry.range,\n                selectionRange: entry.selectionRange,\n                children: undefined, // we flatten it...\n            });\n            // Recurse over children\n            if (entry.children) {\n                OutlineModel._flattenDocumentSymbols(bucket, entry.children, entry.name);\n            }\n        }\n    }\n}\nexport const IOutlineModelService = createDecorator('IOutlineModelService');\nlet OutlineModelService = class OutlineModelService {\n    constructor(_languageFeaturesService, debounces, modelService) {\n        this._languageFeaturesService = _languageFeaturesService;\n        this._disposables = new DisposableStore();\n        this._cache = new LRUCache(10, 0.7);\n        this._debounceInformation = debounces.for(_languageFeaturesService.documentSymbolProvider, 'DocumentSymbols', { min: 350 });\n        // don't cache outline models longer than their text model\n        this._disposables.add(modelService.onModelRemoved(textModel => {\n            this._cache.delete(textModel.id);\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n    getOrCreate(textModel, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const registry = this._languageFeaturesService.documentSymbolProvider;\n            const provider = registry.ordered(textModel);\n            let data = this._cache.get(textModel.id);\n            if (!data || data.versionId !== textModel.getVersionId() || !equals(data.provider, provider)) {\n                const source = new CancellationTokenSource();\n                data = {\n                    versionId: textModel.getVersionId(),\n                    provider,\n                    promiseCnt: 0,\n                    source,\n                    promise: OutlineModel.create(registry, textModel, source.token),\n                    model: undefined,\n                };\n                this._cache.set(textModel.id, data);\n                const now = Date.now();\n                data.promise.then(outlineModel => {\n                    data.model = outlineModel;\n                    this._debounceInformation.update(textModel, Date.now() - now);\n                }).catch(_err => {\n                    this._cache.delete(textModel.id);\n                });\n            }\n            if (data.model) {\n                // resolved -> return data\n                return data.model;\n            }\n            // increase usage counter\n            data.promiseCnt += 1;\n            const listener = token.onCancellationRequested(() => {\n                // last -> cancel provider request, remove cached promise\n                if (--data.promiseCnt === 0) {\n                    data.source.cancel();\n                    this._cache.delete(textModel.id);\n                }\n            });\n            try {\n                return yield data.promise;\n            }\n            finally {\n                listener.dispose();\n            }\n        });\n    }\n};\nOutlineModelService = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, ILanguageFeatureDebounceService),\n    __param(2, IModelService)\n], OutlineModelService);\nexport { OutlineModelService };\nregisterSingleton(IOutlineModelService, OutlineModelService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { raceCancellation } from '../../../../base/common/async.js';\nimport { UriList, VSDataTransfer } from '../../../../base/common/dataTransfer.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Mimes } from '../../../../base/common/mime.js';\nimport { relativePath } from '../../../../base/common/resources.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { addExternalEditorsDropData, toVSDataTransfer } from '../../../browser/dnd.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService, ResourceTextEdit } from '../../../browser/services/bulkEditService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { IProgressService } from '../../../../platform/progress/common/progress.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nlet DropIntoEditorController = class DropIntoEditorController extends Disposable {\n    constructor(editor, _bulkEditService, _languageFeaturesService, _progressService, workspaceContextService) {\n        super();\n        this._bulkEditService = _bulkEditService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._progressService = _progressService;\n        this._register(editor.onDropIntoEditor(e => this.onDropIntoEditor(editor, e.position, e.event)));\n        this._languageFeaturesService.documentOnDropEditProvider.register('*', new DefaultOnDropProvider(workspaceContextService));\n    }\n    onDropIntoEditor(editor, position, dragEvent) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!dragEvent.dataTransfer || !editor.hasModel()) {\n                return;\n            }\n            const model = editor.getModel();\n            const initialModelVersion = model.getVersionId();\n            const ourDataTransfer = yield this.extractDataTransferData(dragEvent);\n            if (ourDataTransfer.size === 0) {\n                return;\n            }\n            if (editor.getModel().getVersionId() !== initialModelVersion) {\n                return;\n            }\n            const tokenSource = new EditorStateCancellationTokenSource(editor, 1 /* CodeEditorStateFlag.Value */);\n            try {\n                const providers = this._languageFeaturesService.documentOnDropEditProvider.ordered(model);\n                const providerEdit = yield this._progressService.withProgress({\n                    location: 15 /* ProgressLocation.Notification */,\n                    delay: 750,\n                    title: localize('dropProgressTitle', \"Running drop handlers...\"),\n                    cancellable: true,\n                }, () => {\n                    return raceCancellation((() => __awaiter(this, void 0, void 0, function* () {\n                        for (const provider of providers) {\n                            const edit = yield provider.provideDocumentOnDropEdits(model, position, ourDataTransfer, tokenSource.token);\n                            if (tokenSource.token.isCancellationRequested) {\n                                return undefined;\n                            }\n                            if (edit) {\n                                return edit;\n                            }\n                        }\n                        return undefined;\n                    }))(), tokenSource.token);\n                }, () => {\n                    tokenSource.cancel();\n                });\n                if (tokenSource.token.isCancellationRequested || editor.getModel().getVersionId() !== initialModelVersion) {\n                    return;\n                }\n                if (providerEdit) {\n                    const snippet = typeof providerEdit.insertText === 'string' ? SnippetParser.escape(providerEdit.insertText) : providerEdit.insertText.snippet;\n                    const combinedWorkspaceEdit = {\n                        edits: [\n                            new ResourceTextEdit(model.uri, {\n                                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n                                text: snippet,\n                                insertAsSnippet: true,\n                            }),\n                            ...((_b = (_a = providerEdit.additionalEdit) === null || _a === void 0 ? void 0 : _a.edits) !== null && _b !== void 0 ? _b : [])\n                        ]\n                    };\n                    yield this._bulkEditService.apply(combinedWorkspaceEdit, { editor });\n                    return;\n                }\n            }\n            finally {\n                tokenSource.dispose();\n            }\n        });\n    }\n    extractDataTransferData(dragEvent) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!dragEvent.dataTransfer) {\n                return new VSDataTransfer();\n            }\n            const textEditorDataTransfer = toVSDataTransfer(dragEvent.dataTransfer);\n            addExternalEditorsDropData(textEditorDataTransfer, dragEvent);\n            return textEditorDataTransfer;\n        });\n    }\n};\nDropIntoEditorController.ID = 'editor.contrib.dropIntoEditorController';\nDropIntoEditorController = __decorate([\n    __param(1, IBulkEditService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IProgressService),\n    __param(4, IWorkspaceContextService)\n], DropIntoEditorController);\nexport { DropIntoEditorController };\nlet DefaultOnDropProvider = class DefaultOnDropProvider {\n    constructor(_workspaceContextService) {\n        this._workspaceContextService = _workspaceContextService;\n    }\n    provideDocumentOnDropEdits(_model, _position, dataTransfer, _token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            const urlListEntry = dataTransfer.get(Mimes.uriList);\n            if (urlListEntry) {\n                const urlList = yield urlListEntry.asString();\n                const snippet = this.getUriListInsertText(urlList);\n                if (snippet) {\n                    return { insertText: snippet };\n                }\n            }\n            const textEntry = (_a = dataTransfer.get('text')) !== null && _a !== void 0 ? _a : dataTransfer.get(Mimes.text);\n            if (textEntry) {\n                const text = yield textEntry.asString();\n                return { insertText: text };\n            }\n            return undefined;\n        });\n    }\n    getUriListInsertText(strUriList) {\n        const uris = [];\n        for (const resource of UriList.parse(strUriList)) {\n            try {\n                uris.push(URI.parse(resource));\n            }\n            catch (_a) {\n                // noop\n            }\n        }\n        if (!uris.length) {\n            return;\n        }\n        return uris\n            .map(uri => {\n            const root = this._workspaceContextService.getWorkspaceFolder(uri);\n            if (root) {\n                const rel = relativePath(root.uri, uri);\n                if (rel) {\n                    return rel;\n                }\n            }\n            return uri.fsPath;\n        })\n            .join(' ');\n    }\n};\nDefaultOnDropProvider = __decorate([\n    __param(0, IWorkspaceContextService)\n], DefaultOnDropProvider);\nregisterEditorContribution(DropIntoEditorController.ID, DropIntoEditorController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorCommand, registerEditorCommand } from '../../../browser/editorExtensions.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { localize } from '../../../../nls.js';\nconst IEditorCancellationTokens = createDecorator('IEditorCancelService');\nconst ctxCancellableOperation = new RawContextKey('cancellableOperation', false, localize('cancellableOperation', 'Whether the editor runs a cancellable operation, e.g. like \\'Peek References\\''));\nregisterSingleton(IEditorCancellationTokens, class {\n    constructor() {\n        this._tokens = new WeakMap();\n    }\n    add(editor, cts) {\n        let data = this._tokens.get(editor);\n        if (!data) {\n            data = editor.invokeWithinContext(accessor => {\n                const key = ctxCancellableOperation.bindTo(accessor.get(IContextKeyService));\n                const tokens = new LinkedList();\n                return { key, tokens };\n            });\n            this._tokens.set(editor, data);\n        }\n        let removeFn;\n        data.key.set(true);\n        removeFn = data.tokens.push(cts);\n        return () => {\n            // remove w/o cancellation\n            if (removeFn) {\n                removeFn();\n                data.key.set(!data.tokens.isEmpty());\n                removeFn = undefined;\n            }\n        };\n    }\n    cancel(editor) {\n        const data = this._tokens.get(editor);\n        if (!data) {\n            return;\n        }\n        // remove with cancellation\n        const cts = data.tokens.pop();\n        if (cts) {\n            cts.cancel();\n            data.key.set(!data.tokens.isEmpty());\n        }\n    }\n}, 1 /* InstantiationType.Delayed */);\nexport class EditorKeybindingCancellationTokenSource extends CancellationTokenSource {\n    constructor(editor, parent) {\n        super(parent);\n        this.editor = editor;\n        this._unregister = editor.invokeWithinContext(accessor => accessor.get(IEditorCancellationTokens).add(editor, this));\n    }\n    dispose() {\n        this._unregister();\n        super.dispose();\n    }\n}\nregisterEditorCommand(new class extends EditorCommand {\n    constructor() {\n        super({\n            id: 'editor.cancelOperation',\n            kbOpts: {\n                weight: 100 /* KeybindingWeight.EditorContrib */,\n                primary: 9 /* KeyCode.Escape */\n            },\n            precondition: ctxCancellableOperation\n        });\n    }\n    runEditorCommand(accessor, editor) {\n        accessor.get(IEditorCancellationTokens).cancel(editor);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as strings from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorKeybindingCancellationTokenSource } from './keybindingCancellation.js';\nexport class EditorState {\n    constructor(editor, flags) {\n        this.flags = flags;\n        if ((this.flags & 1 /* CodeEditorStateFlag.Value */) !== 0) {\n            const model = editor.getModel();\n            this.modelVersionId = model ? strings.format('{0}#{1}', model.uri.toString(), model.getVersionId()) : null;\n        }\n        else {\n            this.modelVersionId = null;\n        }\n        if ((this.flags & 4 /* CodeEditorStateFlag.Position */) !== 0) {\n            this.position = editor.getPosition();\n        }\n        else {\n            this.position = null;\n        }\n        if ((this.flags & 2 /* CodeEditorStateFlag.Selection */) !== 0) {\n            this.selection = editor.getSelection();\n        }\n        else {\n            this.selection = null;\n        }\n        if ((this.flags & 8 /* CodeEditorStateFlag.Scroll */) !== 0) {\n            this.scrollLeft = editor.getScrollLeft();\n            this.scrollTop = editor.getScrollTop();\n        }\n        else {\n            this.scrollLeft = -1;\n            this.scrollTop = -1;\n        }\n    }\n    _equals(other) {\n        if (!(other instanceof EditorState)) {\n            return false;\n        }\n        const state = other;\n        if (this.modelVersionId !== state.modelVersionId) {\n            return false;\n        }\n        if (this.scrollLeft !== state.scrollLeft || this.scrollTop !== state.scrollTop) {\n            return false;\n        }\n        if (!this.position && state.position || this.position && !state.position || this.position && state.position && !this.position.equals(state.position)) {\n            return false;\n        }\n        if (!this.selection && state.selection || this.selection && !state.selection || this.selection && state.selection && !this.selection.equalsRange(state.selection)) {\n            return false;\n        }\n        return true;\n    }\n    validate(editor) {\n        return this._equals(new EditorState(editor, this.flags));\n    }\n}\n/**\n * A cancellation token source that cancels when the editor changes as expressed\n * by the provided flags\n * @param range If provided, changes in position and selection within this range will not trigger cancellation\n */\nexport class EditorStateCancellationTokenSource extends EditorKeybindingCancellationTokenSource {\n    constructor(editor, flags, range, parent) {\n        super(editor, parent);\n        this._listener = new DisposableStore();\n        if (flags & 4 /* CodeEditorStateFlag.Position */) {\n            this._listener.add(editor.onDidChangeCursorPosition(e => {\n                if (!range || !Range.containsPosition(range, e.position)) {\n                    this.cancel();\n                }\n            }));\n        }\n        if (flags & 2 /* CodeEditorStateFlag.Selection */) {\n            this._listener.add(editor.onDidChangeCursorSelection(e => {\n                if (!range || !Range.containsRange(range, e.selection)) {\n                    this.cancel();\n                }\n            }));\n        }\n        if (flags & 8 /* CodeEditorStateFlag.Scroll */) {\n            this._listener.add(editor.onDidScrollChange(_ => this.cancel()));\n        }\n        if (flags & 1 /* CodeEditorStateFlag.Value */) {\n            this._listener.add(editor.onDidChangeModel(_ => this.cancel()));\n            this._listener.add(editor.onDidChangeModelContent(_ => this.cancel()));\n        }\n    }\n    dispose() {\n        this._listener.dispose();\n        super.dispose();\n    }\n}\n/**\n * A cancellation token source that cancels when the provided model changes\n */\nexport class TextModelCancellationTokenSource extends CancellationTokenSource {\n    constructor(model, parent) {\n        super(parent);\n        this._listener = model.onDidChangeContent(() => this.cancel());\n    }\n    dispose() {\n        this._listener.dispose();\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nimport { MinimapPosition, OverviewRulerLane } from '../../../common/model.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { minimapFindMatch, overviewRulerFindMatchForeground } from '../../../../platform/theme/common/colorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nclass FindDecorations {\n    constructor(editor) {\n        this._editor = editor;\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n        this._startPosition = this._editor.getPosition();\n    }\n    dispose() {\n        this._editor.removeDecorations(this._allDecorations());\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n    }\n    reset() {\n        this._decorations = [];\n        this._overviewRulerApproximateDecorations = [];\n        this._findScopeDecorationIds = [];\n        this._rangeHighlightDecorationId = null;\n        this._highlightedDecorationId = null;\n    }\n    getCount() {\n        return this._decorations.length;\n    }\n    /** @deprecated use getFindScopes to support multiple selections */\n    getFindScope() {\n        if (this._findScopeDecorationIds[0]) {\n            return this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]);\n        }\n        return null;\n    }\n    getFindScopes() {\n        if (this._findScopeDecorationIds.length) {\n            const scopes = this._findScopeDecorationIds.map(findScopeDecorationId => this._editor.getModel().getDecorationRange(findScopeDecorationId)).filter(element => !!element);\n            if (scopes.length) {\n                return scopes;\n            }\n        }\n        return null;\n    }\n    getStartPosition() {\n        return this._startPosition;\n    }\n    setStartPosition(newStartPosition) {\n        this._startPosition = newStartPosition;\n        this.setCurrentFindMatch(null);\n    }\n    _getDecorationIndex(decorationId) {\n        const index = this._decorations.indexOf(decorationId);\n        if (index >= 0) {\n            return index + 1;\n        }\n        return 1;\n    }\n    getDecorationRangeAt(index) {\n        const decorationId = index < this._decorations.length ? this._decorations[index] : null;\n        if (decorationId) {\n            return this._editor.getModel().getDecorationRange(decorationId);\n        }\n        return null;\n    }\n    getCurrentMatchesPosition(desiredRange) {\n        const candidates = this._editor.getModel().getDecorationsInRange(desiredRange);\n        for (const candidate of candidates) {\n            const candidateOpts = candidate.options;\n            if (candidateOpts === FindDecorations._FIND_MATCH_DECORATION || candidateOpts === FindDecorations._CURRENT_FIND_MATCH_DECORATION) {\n                return this._getDecorationIndex(candidate.id);\n            }\n        }\n        // We don't know the current match position, so returns zero to show '?' in find widget\n        return 0;\n    }\n    setCurrentFindMatch(nextMatch) {\n        let newCurrentDecorationId = null;\n        let matchPosition = 0;\n        if (nextMatch) {\n            for (let i = 0, len = this._decorations.length; i < len; i++) {\n                const range = this._editor.getModel().getDecorationRange(this._decorations[i]);\n                if (nextMatch.equalsRange(range)) {\n                    newCurrentDecorationId = this._decorations[i];\n                    matchPosition = (i + 1);\n                    break;\n                }\n            }\n        }\n        if (this._highlightedDecorationId !== null || newCurrentDecorationId !== null) {\n            this._editor.changeDecorations((changeAccessor) => {\n                if (this._highlightedDecorationId !== null) {\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._FIND_MATCH_DECORATION);\n                    this._highlightedDecorationId = null;\n                }\n                if (newCurrentDecorationId !== null) {\n                    this._highlightedDecorationId = newCurrentDecorationId;\n                    changeAccessor.changeDecorationOptions(this._highlightedDecorationId, FindDecorations._CURRENT_FIND_MATCH_DECORATION);\n                }\n                if (this._rangeHighlightDecorationId !== null) {\n                    changeAccessor.removeDecoration(this._rangeHighlightDecorationId);\n                    this._rangeHighlightDecorationId = null;\n                }\n                if (newCurrentDecorationId !== null) {\n                    let rng = this._editor.getModel().getDecorationRange(newCurrentDecorationId);\n                    if (rng.startLineNumber !== rng.endLineNumber && rng.endColumn === 1) {\n                        const lineBeforeEnd = rng.endLineNumber - 1;\n                        const lineBeforeEndMaxColumn = this._editor.getModel().getLineMaxColumn(lineBeforeEnd);\n                        rng = new Range(rng.startLineNumber, rng.startColumn, lineBeforeEnd, lineBeforeEndMaxColumn);\n                    }\n                    this._rangeHighlightDecorationId = changeAccessor.addDecoration(rng, FindDecorations._RANGE_HIGHLIGHT_DECORATION);\n                }\n            });\n        }\n        return matchPosition;\n    }\n    set(findMatches, findScopes) {\n        this._editor.changeDecorations((accessor) => {\n            let findMatchesOptions = FindDecorations._FIND_MATCH_DECORATION;\n            const newOverviewRulerApproximateDecorations = [];\n            if (findMatches.length > 1000) {\n                // we go into a mode where the overview ruler gets \"approximate\" decorations\n                // the reason is that the overview ruler paints all the decorations in the file and we don't want to cause freezes\n                findMatchesOptions = FindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION;\n                // approximate a distance in lines where matches should be merged\n                const lineCount = this._editor.getModel().getLineCount();\n                const height = this._editor.getLayoutInfo().height;\n                const approxPixelsPerLine = height / lineCount;\n                const mergeLinesDelta = Math.max(2, Math.ceil(3 / approxPixelsPerLine));\n                // merge decorations as much as possible\n                let prevStartLineNumber = findMatches[0].range.startLineNumber;\n                let prevEndLineNumber = findMatches[0].range.endLineNumber;\n                for (let i = 1, len = findMatches.length; i < len; i++) {\n                    const range = findMatches[i].range;\n                    if (prevEndLineNumber + mergeLinesDelta >= range.startLineNumber) {\n                        if (range.endLineNumber > prevEndLineNumber) {\n                            prevEndLineNumber = range.endLineNumber;\n                        }\n                    }\n                    else {\n                        newOverviewRulerApproximateDecorations.push({\n                            range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n                            options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n                        });\n                        prevStartLineNumber = range.startLineNumber;\n                        prevEndLineNumber = range.endLineNumber;\n                    }\n                }\n                newOverviewRulerApproximateDecorations.push({\n                    range: new Range(prevStartLineNumber, 1, prevEndLineNumber, 1),\n                    options: FindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION\n                });\n            }\n            // Find matches\n            const newFindMatchesDecorations = new Array(findMatches.length);\n            for (let i = 0, len = findMatches.length; i < len; i++) {\n                newFindMatchesDecorations[i] = {\n                    range: findMatches[i].range,\n                    options: findMatchesOptions\n                };\n            }\n            this._decorations = accessor.deltaDecorations(this._decorations, newFindMatchesDecorations);\n            // Overview ruler approximate decorations\n            this._overviewRulerApproximateDecorations = accessor.deltaDecorations(this._overviewRulerApproximateDecorations, newOverviewRulerApproximateDecorations);\n            // Range highlight\n            if (this._rangeHighlightDecorationId) {\n                accessor.removeDecoration(this._rangeHighlightDecorationId);\n                this._rangeHighlightDecorationId = null;\n            }\n            // Find scope\n            if (this._findScopeDecorationIds.length) {\n                this._findScopeDecorationIds.forEach(findScopeDecorationId => accessor.removeDecoration(findScopeDecorationId));\n                this._findScopeDecorationIds = [];\n            }\n            if (findScopes === null || findScopes === void 0 ? void 0 : findScopes.length) {\n                this._findScopeDecorationIds = findScopes.map(findScope => accessor.addDecoration(findScope, FindDecorations._FIND_SCOPE_DECORATION));\n            }\n        });\n    }\n    matchBeforePosition(position) {\n        if (this._decorations.length === 0) {\n            return null;\n        }\n        for (let i = this._decorations.length - 1; i >= 0; i--) {\n            const decorationId = this._decorations[i];\n            const r = this._editor.getModel().getDecorationRange(decorationId);\n            if (!r || r.endLineNumber > position.lineNumber) {\n                continue;\n            }\n            if (r.endLineNumber < position.lineNumber) {\n                return r;\n            }\n            if (r.endColumn > position.column) {\n                continue;\n            }\n            return r;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length - 1]);\n    }\n    matchAfterPosition(position) {\n        if (this._decorations.length === 0) {\n            return null;\n        }\n        for (let i = 0, len = this._decorations.length; i < len; i++) {\n            const decorationId = this._decorations[i];\n            const r = this._editor.getModel().getDecorationRange(decorationId);\n            if (!r || r.startLineNumber < position.lineNumber) {\n                continue;\n            }\n            if (r.startLineNumber > position.lineNumber) {\n                return r;\n            }\n            if (r.startColumn < position.column) {\n                continue;\n            }\n            return r;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorations[0]);\n    }\n    _allDecorations() {\n        let result = [];\n        result = result.concat(this._decorations);\n        result = result.concat(this._overviewRulerApproximateDecorations);\n        if (this._findScopeDecorationIds.length) {\n            result.push(...this._findScopeDecorationIds);\n        }\n        if (this._rangeHighlightDecorationId) {\n            result.push(this._rangeHighlightDecorationId);\n        }\n        return result;\n    }\n}\nFindDecorations._CURRENT_FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    description: 'current-find-match',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    zIndex: 13,\n    className: 'currentFindMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: MinimapPosition.Inline\n    }\n});\nFindDecorations._FIND_MATCH_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    zIndex: 10,\n    className: 'findMatch',\n    showIfCollapsed: true,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    },\n    minimap: {\n        color: themeColorFromId(minimapFindMatch),\n        position: MinimapPosition.Inline\n    }\n});\nFindDecorations._FIND_MATCH_NO_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match-no-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'findMatch',\n    showIfCollapsed: true\n});\nFindDecorations._FIND_MATCH_ONLY_OVERVIEW_DECORATION = ModelDecorationOptions.register({\n    description: 'find-match-only-overview',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    overviewRuler: {\n        color: themeColorFromId(overviewRulerFindMatchForeground),\n        position: OverviewRulerLane.Center\n    }\n});\nFindDecorations._RANGE_HIGHLIGHT_DECORATION = ModelDecorationOptions.register({\n    description: 'find-range-highlight',\n    stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n    className: 'rangeHighlight',\n    isWholeLine: true\n});\nFindDecorations._FIND_SCOPE_DECORATION = ModelDecorationOptions.register({\n    description: 'find-scope',\n    className: 'findScope',\n    isWholeLine: true\n});\nexport { FindDecorations };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/core/range.js';\nexport class ReplaceAllCommand {\n    constructor(editorSelection, ranges, replaceStrings) {\n        this._editorSelection = editorSelection;\n        this._ranges = ranges;\n        this._replaceStrings = replaceStrings;\n        this._trackedEditorSelectionId = null;\n    }\n    getEditOperations(model, builder) {\n        if (this._ranges.length > 0) {\n            // Collect all edit operations\n            const ops = [];\n            for (let i = 0; i < this._ranges.length; i++) {\n                ops.push({\n                    range: this._ranges[i],\n                    text: this._replaceStrings[i]\n                });\n            }\n            // Sort them in ascending order by range starts\n            ops.sort((o1, o2) => {\n                return Range.compareRangesUsingStarts(o1.range, o2.range);\n            });\n            // Merge operations that touch each other\n            const resultOps = [];\n            let previousOp = ops[0];\n            for (let i = 1; i < ops.length; i++) {\n                if (previousOp.range.endLineNumber === ops[i].range.startLineNumber && previousOp.range.endColumn === ops[i].range.startColumn) {\n                    // These operations are one after another and can be merged\n                    previousOp.range = previousOp.range.plusRange(ops[i].range);\n                    previousOp.text = previousOp.text + ops[i].text;\n                }\n                else {\n                    resultOps.push(previousOp);\n                    previousOp = ops[i];\n                }\n            }\n            resultOps.push(previousOp);\n            for (const op of resultOps) {\n                builder.addEditOperation(op.range, op.text);\n            }\n        }\n        this._trackedEditorSelectionId = builder.trackSelection(this._editorSelection);\n    }\n    computeCursorState(model, helper) {\n        return helper.getTrackedSelection(this._trackedEditorSelectionId);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { buildReplaceStringWithCasePreserved } from '../../../../base/common/search.js';\n/**\n * Assigned when the replace pattern is entirely static.\n */\nclass StaticValueReplacePattern {\n    constructor(staticValue) {\n        this.staticValue = staticValue;\n        this.kind = 0 /* ReplacePatternKind.StaticValue */;\n    }\n}\n/**\n * Assigned when the replace pattern has replacement patterns.\n */\nclass DynamicPiecesReplacePattern {\n    constructor(pieces) {\n        this.pieces = pieces;\n        this.kind = 1 /* ReplacePatternKind.DynamicPieces */;\n    }\n}\nexport class ReplacePattern {\n    static fromStaticValue(value) {\n        return new ReplacePattern([ReplacePiece.staticValue(value)]);\n    }\n    get hasReplacementPatterns() {\n        return (this._state.kind === 1 /* ReplacePatternKind.DynamicPieces */);\n    }\n    constructor(pieces) {\n        if (!pieces || pieces.length === 0) {\n            this._state = new StaticValueReplacePattern('');\n        }\n        else if (pieces.length === 1 && pieces[0].staticValue !== null) {\n            this._state = new StaticValueReplacePattern(pieces[0].staticValue);\n        }\n        else {\n            this._state = new DynamicPiecesReplacePattern(pieces);\n        }\n    }\n    buildReplaceString(matches, preserveCase) {\n        if (this._state.kind === 0 /* ReplacePatternKind.StaticValue */) {\n            if (preserveCase) {\n                return buildReplaceStringWithCasePreserved(matches, this._state.staticValue);\n            }\n            else {\n                return this._state.staticValue;\n            }\n        }\n        let result = '';\n        for (let i = 0, len = this._state.pieces.length; i < len; i++) {\n            const piece = this._state.pieces[i];\n            if (piece.staticValue !== null) {\n                // static value ReplacePiece\n                result += piece.staticValue;\n                continue;\n            }\n            // match index ReplacePiece\n            let match = ReplacePattern._substitute(piece.matchIndex, matches);\n            if (piece.caseOps !== null && piece.caseOps.length > 0) {\n                const repl = [];\n                const lenOps = piece.caseOps.length;\n                let opIdx = 0;\n                for (let idx = 0, len = match.length; idx < len; idx++) {\n                    if (opIdx >= lenOps) {\n                        repl.push(match.slice(idx));\n                        break;\n                    }\n                    switch (piece.caseOps[opIdx]) {\n                        case 'U':\n                            repl.push(match[idx].toUpperCase());\n                            break;\n                        case 'u':\n                            repl.push(match[idx].toUpperCase());\n                            opIdx++;\n                            break;\n                        case 'L':\n                            repl.push(match[idx].toLowerCase());\n                            break;\n                        case 'l':\n                            repl.push(match[idx].toLowerCase());\n                            opIdx++;\n                            break;\n                        default:\n                            repl.push(match[idx]);\n                    }\n                }\n                match = repl.join('');\n            }\n            result += match;\n        }\n        return result;\n    }\n    static _substitute(matchIndex, matches) {\n        if (matches === null) {\n            return '';\n        }\n        if (matchIndex === 0) {\n            return matches[0];\n        }\n        let remainder = '';\n        while (matchIndex > 0) {\n            if (matchIndex < matches.length) {\n                // A match can be undefined\n                const match = (matches[matchIndex] || '');\n                return match + remainder;\n            }\n            remainder = String(matchIndex % 10) + remainder;\n            matchIndex = Math.floor(matchIndex / 10);\n        }\n        return '$' + remainder;\n    }\n}\n/**\n * A replace piece can either be a static string or an index to a specific match.\n */\nexport class ReplacePiece {\n    static staticValue(value) {\n        return new ReplacePiece(value, -1, null);\n    }\n    static caseOps(index, caseOps) {\n        return new ReplacePiece(null, index, caseOps);\n    }\n    constructor(staticValue, matchIndex, caseOps) {\n        this.staticValue = staticValue;\n        this.matchIndex = matchIndex;\n        if (!caseOps || caseOps.length === 0) {\n            this.caseOps = null;\n        }\n        else {\n            this.caseOps = caseOps.slice(0);\n        }\n    }\n}\nclass ReplacePieceBuilder {\n    constructor(source) {\n        this._source = source;\n        this._lastCharIndex = 0;\n        this._result = [];\n        this._resultLen = 0;\n        this._currentStaticPiece = '';\n    }\n    emitUnchanged(toCharIndex) {\n        this._emitStatic(this._source.substring(this._lastCharIndex, toCharIndex));\n        this._lastCharIndex = toCharIndex;\n    }\n    emitStatic(value, toCharIndex) {\n        this._emitStatic(value);\n        this._lastCharIndex = toCharIndex;\n    }\n    _emitStatic(value) {\n        if (value.length === 0) {\n            return;\n        }\n        this._currentStaticPiece += value;\n    }\n    emitMatchIndex(index, toCharIndex, caseOps) {\n        if (this._currentStaticPiece.length !== 0) {\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n            this._currentStaticPiece = '';\n        }\n        this._result[this._resultLen++] = ReplacePiece.caseOps(index, caseOps);\n        this._lastCharIndex = toCharIndex;\n    }\n    finalize() {\n        this.emitUnchanged(this._source.length);\n        if (this._currentStaticPiece.length !== 0) {\n            this._result[this._resultLen++] = ReplacePiece.staticValue(this._currentStaticPiece);\n            this._currentStaticPiece = '';\n        }\n        return new ReplacePattern(this._result);\n    }\n}\n/**\n * \\n\t\t\t=> inserts a LF\n * \\t\t\t\t=> inserts a TAB\n * \\\\\t\t\t=> inserts a \"\\\".\n * \\u\t\t\t=> upper-cases one character in a match.\n * \\U\t\t\t=> upper-cases ALL remaining characters in a match.\n * \\l\t\t\t=> lower-cases one character in a match.\n * \\L\t\t\t=> lower-cases ALL remaining characters in a match.\n * $$\t\t\t=> inserts a \"$\".\n * $& and $0\t=> inserts the matched substring.\n * $n\t\t\t=> Where n is a non-negative integer lesser than 100, inserts the nth parenthesized submatch string\n * everything else stays untouched\n *\n * Also see https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Specifying_a_string_as_a_parameter\n */\nexport function parseReplaceString(replaceString) {\n    if (!replaceString || replaceString.length === 0) {\n        return new ReplacePattern(null);\n    }\n    const caseOps = [];\n    const result = new ReplacePieceBuilder(replaceString);\n    for (let i = 0, len = replaceString.length; i < len; i++) {\n        const chCode = replaceString.charCodeAt(i);\n        if (chCode === 92 /* CharCode.Backslash */) {\n            // move to next char\n            i++;\n            if (i >= len) {\n                // string ends with a \\\n                break;\n            }\n            const nextChCode = replaceString.charCodeAt(i);\n            // let replaceWithCharacter: string | null = null;\n            switch (nextChCode) {\n                case 92 /* CharCode.Backslash */:\n                    // \\\\ => inserts a \"\\\"\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\\\', i + 1);\n                    break;\n                case 110 /* CharCode.n */:\n                    // \\n => inserts a LF\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\n', i + 1);\n                    break;\n                case 116 /* CharCode.t */:\n                    // \\t => inserts a TAB\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('\\t', i + 1);\n                    break;\n                // Case modification of string replacements, patterned after Boost, but only applied\n                // to the replacement text, not subsequent content.\n                case 117 /* CharCode.u */:\n                // \\u => upper-cases one character.\n                case 85 /* CharCode.U */:\n                // \\U => upper-cases ALL following characters.\n                case 108 /* CharCode.l */:\n                // \\l => lower-cases one character.\n                case 76 /* CharCode.L */:\n                    // \\L => lower-cases ALL following characters.\n                    result.emitUnchanged(i - 1);\n                    result.emitStatic('', i + 1);\n                    caseOps.push(String.fromCharCode(nextChCode));\n                    break;\n            }\n            continue;\n        }\n        if (chCode === 36 /* CharCode.DollarSign */) {\n            // move to next char\n            i++;\n            if (i >= len) {\n                // string ends with a $\n                break;\n            }\n            const nextChCode = replaceString.charCodeAt(i);\n            if (nextChCode === 36 /* CharCode.DollarSign */) {\n                // $$ => inserts a \"$\"\n                result.emitUnchanged(i - 1);\n                result.emitStatic('$', i + 1);\n                continue;\n            }\n            if (nextChCode === 48 /* CharCode.Digit0 */ || nextChCode === 38 /* CharCode.Ampersand */) {\n                // $& and $0 => inserts the matched substring.\n                result.emitUnchanged(i - 1);\n                result.emitMatchIndex(0, i + 1, caseOps);\n                caseOps.length = 0;\n                continue;\n            }\n            if (49 /* CharCode.Digit1 */ <= nextChCode && nextChCode <= 57 /* CharCode.Digit9 */) {\n                // $n\n                let matchIndex = nextChCode - 48 /* CharCode.Digit0 */;\n                // peek next char to probe for $nn\n                if (i + 1 < len) {\n                    const nextNextChCode = replaceString.charCodeAt(i + 1);\n                    if (48 /* CharCode.Digit0 */ <= nextNextChCode && nextNextChCode <= 57 /* CharCode.Digit9 */) {\n                        // $nn\n                        // move to next char\n                        i++;\n                        matchIndex = matchIndex * 10 + (nextNextChCode - 48 /* CharCode.Digit0 */);\n                        result.emitUnchanged(i - 2);\n                        result.emitMatchIndex(matchIndex, i + 1, caseOps);\n                        caseOps.length = 0;\n                        continue;\n                    }\n                }\n                result.emitUnchanged(i - 1);\n                result.emitMatchIndex(matchIndex, i + 1, caseOps);\n                caseOps.length = 0;\n                continue;\n            }\n        }\n    }\n    return result.finalize();\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { findFirstInSorted } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler, TimeoutTimer } from '../../../../base/common/async.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { ReplaceCommand, ReplaceCommandThatPreservesSelection } from '../../../common/commands/replaceCommand.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { SearchParams } from '../../../common/model/textModelSearch.js';\nimport { FindDecorations } from './findDecorations.js';\nimport { ReplaceAllCommand } from './replaceAllCommand.js';\nimport { parseReplaceString, ReplacePattern } from './replacePattern.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const CONTEXT_FIND_WIDGET_VISIBLE = new RawContextKey('findWidgetVisible', false);\nexport const CONTEXT_FIND_WIDGET_NOT_VISIBLE = CONTEXT_FIND_WIDGET_VISIBLE.toNegated();\n// Keep ContextKey use of 'Focussed' to not break when clauses\nexport const CONTEXT_FIND_INPUT_FOCUSED = new RawContextKey('findInputFocussed', false);\nexport const CONTEXT_REPLACE_INPUT_FOCUSED = new RawContextKey('replaceInputFocussed', false);\nexport const ToggleCaseSensitiveKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 33 /* KeyCode.KeyC */ }\n};\nexport const ToggleWholeWordKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 53 /* KeyCode.KeyW */ }\n};\nexport const ToggleRegexKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 48 /* KeyCode.KeyR */ }\n};\nexport const ToggleSearchScopeKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 42 /* KeyCode.KeyL */ }\n};\nexport const TogglePreserveCaseKeybinding = {\n    primary: 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */,\n    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 46 /* KeyCode.KeyP */ }\n};\nexport const FIND_IDS = {\n    StartFindAction: 'actions.find',\n    StartFindWithSelection: 'actions.findWithSelection',\n    StartFindWithArgs: 'editor.actions.findWithArgs',\n    NextMatchFindAction: 'editor.action.nextMatchFindAction',\n    PreviousMatchFindAction: 'editor.action.previousMatchFindAction',\n    GoToMatchFindAction: 'editor.action.goToMatchFindAction',\n    NextSelectionMatchFindAction: 'editor.action.nextSelectionMatchFindAction',\n    PreviousSelectionMatchFindAction: 'editor.action.previousSelectionMatchFindAction',\n    StartFindReplaceAction: 'editor.action.startFindReplaceAction',\n    CloseFindWidgetCommand: 'closeFindWidget',\n    ToggleCaseSensitiveCommand: 'toggleFindCaseSensitive',\n    ToggleWholeWordCommand: 'toggleFindWholeWord',\n    ToggleRegexCommand: 'toggleFindRegex',\n    ToggleSearchScopeCommand: 'toggleFindInSelection',\n    TogglePreserveCaseCommand: 'togglePreserveCase',\n    ReplaceOneAction: 'editor.action.replaceOne',\n    ReplaceAllAction: 'editor.action.replaceAll',\n    SelectAllMatchesAction: 'editor.action.selectAllMatches'\n};\nexport const MATCHES_LIMIT = 19999;\nconst RESEARCH_DELAY = 240;\nexport class FindModelBoundToEditorModel {\n    constructor(editor, state) {\n        this._toDispose = new DisposableStore();\n        this._editor = editor;\n        this._state = state;\n        this._isDisposed = false;\n        this._startSearchingTimer = new TimeoutTimer();\n        this._decorations = new FindDecorations(editor);\n        this._toDispose.add(this._decorations);\n        this._updateDecorationsScheduler = new RunOnceScheduler(() => this.research(false), 100);\n        this._toDispose.add(this._updateDecorationsScheduler);\n        this._toDispose.add(this._editor.onDidChangeCursorPosition((e) => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */\n                || e.reason === 5 /* CursorChangeReason.Undo */\n                || e.reason === 6 /* CursorChangeReason.Redo */) {\n                this._decorations.setStartPosition(this._editor.getPosition());\n            }\n        }));\n        this._ignoreModelContentChanged = false;\n        this._toDispose.add(this._editor.onDidChangeModelContent((e) => {\n            if (this._ignoreModelContentChanged) {\n                return;\n            }\n            if (e.isFlush) {\n                // a model.setValue() was called\n                this._decorations.reset();\n            }\n            this._decorations.setStartPosition(this._editor.getPosition());\n            this._updateDecorationsScheduler.schedule();\n        }));\n        this._toDispose.add(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this.research(false, this._state.searchScope);\n    }\n    dispose() {\n        this._isDisposed = true;\n        dispose(this._startSearchingTimer);\n        this._toDispose.dispose();\n    }\n    _onStateChanged(e) {\n        if (this._isDisposed) {\n            // The find model is disposed during a find state changed event\n            return;\n        }\n        if (!this._editor.hasModel()) {\n            // The find model will be disposed momentarily\n            return;\n        }\n        if (e.searchString || e.isReplaceRevealed || e.isRegex || e.wholeWord || e.matchCase || e.searchScope) {\n            const model = this._editor.getModel();\n            if (model.isTooLargeForSyncing()) {\n                this._startSearchingTimer.cancel();\n                this._startSearchingTimer.setIfNotSet(() => {\n                    if (e.searchScope) {\n                        this.research(e.moveCursor, this._state.searchScope);\n                    }\n                    else {\n                        this.research(e.moveCursor);\n                    }\n                }, RESEARCH_DELAY);\n            }\n            else {\n                if (e.searchScope) {\n                    this.research(e.moveCursor, this._state.searchScope);\n                }\n                else {\n                    this.research(e.moveCursor);\n                }\n            }\n        }\n    }\n    static _getSearchRange(model, findScope) {\n        // If we have set now or before a find scope, use it for computing the search range\n        if (findScope) {\n            return findScope;\n        }\n        return model.getFullModelRange();\n    }\n    research(moveCursor, newFindScope) {\n        let findScopes = null;\n        if (typeof newFindScope !== 'undefined') {\n            if (newFindScope !== null) {\n                if (!Array.isArray(newFindScope)) {\n                    findScopes = [newFindScope];\n                }\n                else {\n                    findScopes = newFindScope;\n                }\n            }\n        }\n        else {\n            findScopes = this._decorations.getFindScopes();\n        }\n        if (findScopes !== null) {\n            findScopes = findScopes.map(findScope => {\n                if (findScope.startLineNumber !== findScope.endLineNumber) {\n                    let endLineNumber = findScope.endLineNumber;\n                    if (findScope.endColumn === 1) {\n                        endLineNumber = endLineNumber - 1;\n                    }\n                    return new Range(findScope.startLineNumber, 1, endLineNumber, this._editor.getModel().getLineMaxColumn(endLineNumber));\n                }\n                return findScope;\n            });\n        }\n        const findMatches = this._findMatches(findScopes, false, MATCHES_LIMIT);\n        this._decorations.set(findMatches, findScopes);\n        const editorSelection = this._editor.getSelection();\n        let currentMatchesPosition = this._decorations.getCurrentMatchesPosition(editorSelection);\n        if (currentMatchesPosition === 0 && findMatches.length > 0) {\n            // current selection is not on top of a match\n            // try to find its nearest result from the top of the document\n            const matchAfterSelection = findFirstInSorted(findMatches.map(match => match.range), range => Range.compareRangesUsingStarts(range, editorSelection) >= 0);\n            currentMatchesPosition = matchAfterSelection > 0 ? matchAfterSelection - 1 + 1 /** match position is one based */ : currentMatchesPosition;\n        }\n        this._state.changeMatchInfo(currentMatchesPosition, this._decorations.getCount(), undefined);\n        if (moveCursor && this._editor.getOption(38 /* EditorOption.find */).cursorMoveOnType) {\n            this._moveToNextMatch(this._decorations.getStartPosition());\n        }\n    }\n    _hasMatches() {\n        return (this._state.matchesCount > 0);\n    }\n    _cannotFind() {\n        if (!this._hasMatches()) {\n            const findScope = this._decorations.getFindScope();\n            if (findScope) {\n                // Reveal the selection so user is reminded that 'selection find' is on.\n                this._editor.revealRangeInCenterIfOutsideViewport(findScope, 0 /* ScrollType.Smooth */);\n            }\n            return true;\n        }\n        return false;\n    }\n    _setCurrentFindMatch(match) {\n        const matchesPosition = this._decorations.setCurrentFindMatch(match);\n        this._state.changeMatchInfo(matchesPosition, this._decorations.getCount(), match);\n        this._editor.setSelection(match);\n        this._editor.revealRangeInCenterIfOutsideViewport(match, 0 /* ScrollType.Smooth */);\n    }\n    _prevSearchPosition(before) {\n        const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\n            || this._state.searchString.indexOf('$') >= 0);\n        let { lineNumber, column } = before;\n        const model = this._editor.getModel();\n        if (isUsingLineStops || column === 1) {\n            if (lineNumber === 1) {\n                lineNumber = model.getLineCount();\n            }\n            else {\n                lineNumber--;\n            }\n            column = model.getLineMaxColumn(lineNumber);\n        }\n        else {\n            column--;\n        }\n        return new Position(lineNumber, column);\n    }\n    _moveToPrevMatch(before, isRecursed = false) {\n        if (!this._state.canNavigateBack()) {\n            // we are beyond the first matched find result\n            // instead of doing nothing, we should refocus the first item\n            const nextMatchRange = this._decorations.matchAfterPosition(before);\n            if (nextMatchRange) {\n                this._setCurrentFindMatch(nextMatchRange);\n            }\n            return;\n        }\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\n            let prevMatchRange = this._decorations.matchBeforePosition(before);\n            if (prevMatchRange && prevMatchRange.isEmpty() && prevMatchRange.getStartPosition().equals(before)) {\n                before = this._prevSearchPosition(before);\n                prevMatchRange = this._decorations.matchBeforePosition(before);\n            }\n            if (prevMatchRange) {\n                this._setCurrentFindMatch(prevMatchRange);\n            }\n            return;\n        }\n        if (this._cannotFind()) {\n            return;\n        }\n        const findScope = this._decorations.getFindScope();\n        const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n        // ...(----)...|...\n        if (searchRange.getEndPosition().isBefore(before)) {\n            before = searchRange.getEndPosition();\n        }\n        // ...|...(----)...\n        if (before.isBefore(searchRange.getStartPosition())) {\n            before = searchRange.getEndPosition();\n        }\n        const { lineNumber, column } = before;\n        const model = this._editor.getModel();\n        let position = new Position(lineNumber, column);\n        let prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(124 /* EditorOption.wordSeparators */) : null, false);\n        if (prevMatch && prevMatch.range.isEmpty() && prevMatch.range.getStartPosition().equals(position)) {\n            // Looks like we're stuck at this position, unacceptable!\n            position = this._prevSearchPosition(position);\n            prevMatch = model.findPreviousMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(124 /* EditorOption.wordSeparators */) : null, false);\n        }\n        if (!prevMatch) {\n            // there is precisely one match and selection is on top of it\n            return;\n        }\n        if (!isRecursed && !searchRange.containsRange(prevMatch.range)) {\n            return this._moveToPrevMatch(prevMatch.range.getStartPosition(), true);\n        }\n        this._setCurrentFindMatch(prevMatch.range);\n    }\n    moveToPrevMatch() {\n        this._moveToPrevMatch(this._editor.getSelection().getStartPosition());\n    }\n    _nextSearchPosition(after) {\n        const isUsingLineStops = this._state.isRegex && (this._state.searchString.indexOf('^') >= 0\n            || this._state.searchString.indexOf('$') >= 0);\n        let { lineNumber, column } = after;\n        const model = this._editor.getModel();\n        if (isUsingLineStops || column === model.getLineMaxColumn(lineNumber)) {\n            if (lineNumber === model.getLineCount()) {\n                lineNumber = 1;\n            }\n            else {\n                lineNumber++;\n            }\n            column = 1;\n        }\n        else {\n            column++;\n        }\n        return new Position(lineNumber, column);\n    }\n    _moveToNextMatch(after) {\n        if (!this._state.canNavigateForward()) {\n            // we are beyond the last matched find result\n            // instead of doing nothing, we should refocus the last item\n            const prevMatchRange = this._decorations.matchBeforePosition(after);\n            if (prevMatchRange) {\n                this._setCurrentFindMatch(prevMatchRange);\n            }\n            return;\n        }\n        if (this._decorations.getCount() < MATCHES_LIMIT) {\n            let nextMatchRange = this._decorations.matchAfterPosition(after);\n            if (nextMatchRange && nextMatchRange.isEmpty() && nextMatchRange.getStartPosition().equals(after)) {\n                // Looks like we're stuck at this position, unacceptable!\n                after = this._nextSearchPosition(after);\n                nextMatchRange = this._decorations.matchAfterPosition(after);\n            }\n            if (nextMatchRange) {\n                this._setCurrentFindMatch(nextMatchRange);\n            }\n            return;\n        }\n        const nextMatch = this._getNextMatch(after, false, true);\n        if (nextMatch) {\n            this._setCurrentFindMatch(nextMatch.range);\n        }\n    }\n    _getNextMatch(after, captureMatches, forceMove, isRecursed = false) {\n        if (this._cannotFind()) {\n            return null;\n        }\n        const findScope = this._decorations.getFindScope();\n        const searchRange = FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), findScope);\n        // ...(----)...|...\n        if (searchRange.getEndPosition().isBefore(after)) {\n            after = searchRange.getStartPosition();\n        }\n        // ...|...(----)...\n        if (after.isBefore(searchRange.getStartPosition())) {\n            after = searchRange.getStartPosition();\n        }\n        const { lineNumber, column } = after;\n        const model = this._editor.getModel();\n        let position = new Position(lineNumber, column);\n        let nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(124 /* EditorOption.wordSeparators */) : null, captureMatches);\n        if (forceMove && nextMatch && nextMatch.range.isEmpty() && nextMatch.range.getStartPosition().equals(position)) {\n            // Looks like we're stuck at this position, unacceptable!\n            position = this._nextSearchPosition(position);\n            nextMatch = model.findNextMatch(this._state.searchString, position, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(124 /* EditorOption.wordSeparators */) : null, captureMatches);\n        }\n        if (!nextMatch) {\n            // there is precisely one match and selection is on top of it\n            return null;\n        }\n        if (!isRecursed && !searchRange.containsRange(nextMatch.range)) {\n            return this._getNextMatch(nextMatch.range.getEndPosition(), captureMatches, forceMove, true);\n        }\n        return nextMatch;\n    }\n    moveToNextMatch() {\n        this._moveToNextMatch(this._editor.getSelection().getEndPosition());\n    }\n    _moveToMatch(index) {\n        const decorationRange = this._decorations.getDecorationRangeAt(index);\n        if (decorationRange) {\n            this._setCurrentFindMatch(decorationRange);\n        }\n    }\n    moveToMatch(index) {\n        this._moveToMatch(index);\n    }\n    _getReplacePattern() {\n        if (this._state.isRegex) {\n            return parseReplaceString(this._state.replaceString);\n        }\n        return ReplacePattern.fromStaticValue(this._state.replaceString);\n    }\n    replace() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const replacePattern = this._getReplacePattern();\n        const selection = this._editor.getSelection();\n        const nextMatch = this._getNextMatch(selection.getStartPosition(), true, false);\n        if (nextMatch) {\n            if (selection.equalsRange(nextMatch.range)) {\n                // selection sits on a find match => replace it!\n                const replaceString = replacePattern.buildReplaceString(nextMatch.matches, this._state.preserveCase);\n                const command = new ReplaceCommand(selection, replaceString);\n                this._executeEditorCommand('replace', command);\n                this._decorations.setStartPosition(new Position(selection.startLineNumber, selection.startColumn + replaceString.length));\n                this.research(true);\n            }\n            else {\n                this._decorations.setStartPosition(this._editor.getPosition());\n                this._setCurrentFindMatch(nextMatch.range);\n            }\n        }\n    }\n    _findMatches(findScopes, captureMatches, limitResultCount) {\n        const searchRanges = (findScopes || [null]).map((scope) => FindModelBoundToEditorModel._getSearchRange(this._editor.getModel(), scope));\n        return this._editor.getModel().findMatches(this._state.searchString, searchRanges, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(124 /* EditorOption.wordSeparators */) : null, captureMatches, limitResultCount);\n    }\n    replaceAll() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const findScopes = this._decorations.getFindScopes();\n        if (findScopes === null && this._state.matchesCount >= MATCHES_LIMIT) {\n            // Doing a replace on the entire file that is over ${MATCHES_LIMIT} matches\n            this._largeReplaceAll();\n        }\n        else {\n            this._regularReplaceAll(findScopes);\n        }\n        this.research(false);\n    }\n    _largeReplaceAll() {\n        const searchParams = new SearchParams(this._state.searchString, this._state.isRegex, this._state.matchCase, this._state.wholeWord ? this._editor.getOption(124 /* EditorOption.wordSeparators */) : null);\n        const searchData = searchParams.parseSearchRequest();\n        if (!searchData) {\n            return;\n        }\n        let searchRegex = searchData.regex;\n        if (!searchRegex.multiline) {\n            let mod = 'mu';\n            if (searchRegex.ignoreCase) {\n                mod += 'i';\n            }\n            if (searchRegex.global) {\n                mod += 'g';\n            }\n            searchRegex = new RegExp(searchRegex.source, mod);\n        }\n        const model = this._editor.getModel();\n        const modelText = model.getValue(1 /* EndOfLinePreference.LF */);\n        const fullModelRange = model.getFullModelRange();\n        const replacePattern = this._getReplacePattern();\n        let resultText;\n        const preserveCase = this._state.preserveCase;\n        if (replacePattern.hasReplacementPatterns || preserveCase) {\n            resultText = modelText.replace(searchRegex, function () {\n                return replacePattern.buildReplaceString(arguments, preserveCase);\n            });\n        }\n        else {\n            resultText = modelText.replace(searchRegex, replacePattern.buildReplaceString(null, preserveCase));\n        }\n        const command = new ReplaceCommandThatPreservesSelection(fullModelRange, resultText, this._editor.getSelection());\n        this._executeEditorCommand('replaceAll', command);\n    }\n    _regularReplaceAll(findScopes) {\n        const replacePattern = this._getReplacePattern();\n        // Get all the ranges (even more than the highlighted ones)\n        const matches = this._findMatches(findScopes, replacePattern.hasReplacementPatterns || this._state.preserveCase, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        const replaceStrings = [];\n        for (let i = 0, len = matches.length; i < len; i++) {\n            replaceStrings[i] = replacePattern.buildReplaceString(matches[i].matches, this._state.preserveCase);\n        }\n        const command = new ReplaceAllCommand(this._editor.getSelection(), matches.map(m => m.range), replaceStrings);\n        this._executeEditorCommand('replaceAll', command);\n    }\n    selectAllMatches() {\n        if (!this._hasMatches()) {\n            return;\n        }\n        const findScopes = this._decorations.getFindScopes();\n        // Get all the ranges (even more than the highlighted ones)\n        const matches = this._findMatches(findScopes, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        let selections = matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn));\n        // If one of the ranges is the editor selection, then maintain it as primary\n        const editorSelection = this._editor.getSelection();\n        for (let i = 0, len = selections.length; i < len; i++) {\n            const sel = selections[i];\n            if (sel.equalsRange(editorSelection)) {\n                selections = [editorSelection].concat(selections.slice(0, i)).concat(selections.slice(i + 1));\n                break;\n            }\n        }\n        this._editor.setSelections(selections);\n    }\n    _executeEditorCommand(source, command) {\n        try {\n            this._ignoreModelContentChanged = true;\n            this._editor.pushUndoStop();\n            this._editor.executeCommand(source, command);\n            this._editor.pushUndoStop();\n        }\n        finally {\n            this._ignoreModelContentChanged = false;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport './findOptionsWidget.css';\nimport { CaseSensitiveToggle, RegexToggle, WholeWordsToggle } from '../../../../base/browser/ui/findinput/findInputToggles.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { FIND_IDS } from './findModel.js';\nimport { asCssVariable, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground } from '../../../../platform/theme/common/colorRegistry.js';\nclass FindOptionsWidget extends Widget {\n    constructor(editor, state, keybindingService) {\n        super();\n        this._hideSoon = this._register(new RunOnceScheduler(() => this._hide(), 2000));\n        this._isVisible = false;\n        this._editor = editor;\n        this._state = state;\n        this._keybindingService = keybindingService;\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'findOptionsWidget';\n        this._domNode.style.display = 'none';\n        this._domNode.style.top = '10px';\n        this._domNode.style.zIndex = '12';\n        this._domNode.setAttribute('role', 'presentation');\n        this._domNode.setAttribute('aria-hidden', 'true');\n        const toggleStyles = {\n            inputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n            inputActiveOptionForeground: asCssVariable(inputActiveOptionForeground),\n            inputActiveOptionBackground: asCssVariable(inputActiveOptionBackground),\n        };\n        this.caseSensitive = this._register(new CaseSensitiveToggle(Object.assign({ appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand), isChecked: this._state.matchCase }, toggleStyles)));\n        this._domNode.appendChild(this.caseSensitive.domNode);\n        this._register(this.caseSensitive.onChange(() => {\n            this._state.change({\n                matchCase: this.caseSensitive.checked\n            }, false);\n        }));\n        this.wholeWords = this._register(new WholeWordsToggle(Object.assign({ appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand), isChecked: this._state.wholeWord }, toggleStyles)));\n        this._domNode.appendChild(this.wholeWords.domNode);\n        this._register(this.wholeWords.onChange(() => {\n            this._state.change({\n                wholeWord: this.wholeWords.checked\n            }, false);\n        }));\n        this.regex = this._register(new RegexToggle(Object.assign({ appendTitle: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand), isChecked: this._state.isRegex }, toggleStyles)));\n        this._domNode.appendChild(this.regex.domNode);\n        this._register(this.regex.onChange(() => {\n            this._state.change({\n                isRegex: this.regex.checked\n            }, false);\n        }));\n        this._editor.addOverlayWidget(this);\n        this._register(this._state.onFindReplaceStateChange((e) => {\n            let somethingChanged = false;\n            if (e.isRegex) {\n                this.regex.checked = this._state.isRegex;\n                somethingChanged = true;\n            }\n            if (e.wholeWord) {\n                this.wholeWords.checked = this._state.wholeWord;\n                somethingChanged = true;\n            }\n            if (e.matchCase) {\n                this.caseSensitive.checked = this._state.matchCase;\n                somethingChanged = true;\n            }\n            if (!this._state.isRevealed && somethingChanged) {\n                this._revealTemporarily();\n            }\n        }));\n        this._register(dom.addDisposableListener(this._domNode, dom.EventType.MOUSE_LEAVE, (e) => this._onMouseLeave()));\n        this._register(dom.addDisposableListener(this._domNode, 'mouseover', (e) => this._onMouseOver()));\n    }\n    _keybindingLabelFor(actionId) {\n        const kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this);\n        super.dispose();\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindOptionsWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n        };\n    }\n    highlightFindOptions() {\n        this._revealTemporarily();\n    }\n    _revealTemporarily() {\n        this._show();\n        this._hideSoon.schedule();\n    }\n    _onMouseLeave() {\n        this._hideSoon.schedule();\n    }\n    _onMouseOver() {\n        this._hideSoon.cancel();\n    }\n    _show() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        this._domNode.style.display = 'block';\n    }\n    _hide() {\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this._domNode.style.display = 'none';\n    }\n}\nFindOptionsWidget.ID = 'editor.contrib.findOptionsWidget';\nexport { FindOptionsWidget };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { Range } from '../../../common/core/range.js';\nimport { MATCHES_LIMIT } from './findModel.js';\nfunction effectiveOptionValue(override, value) {\n    if (override === 1 /* FindOptionOverride.True */) {\n        return true;\n    }\n    if (override === 2 /* FindOptionOverride.False */) {\n        return false;\n    }\n    return value;\n}\nexport class FindReplaceState extends Disposable {\n    get searchString() { return this._searchString; }\n    get replaceString() { return this._replaceString; }\n    get isRevealed() { return this._isRevealed; }\n    get isReplaceRevealed() { return this._isReplaceRevealed; }\n    get isRegex() { return effectiveOptionValue(this._isRegexOverride, this._isRegex); }\n    get wholeWord() { return effectiveOptionValue(this._wholeWordOverride, this._wholeWord); }\n    get matchCase() { return effectiveOptionValue(this._matchCaseOverride, this._matchCase); }\n    get preserveCase() { return effectiveOptionValue(this._preserveCaseOverride, this._preserveCase); }\n    get actualIsRegex() { return this._isRegex; }\n    get actualWholeWord() { return this._wholeWord; }\n    get actualMatchCase() { return this._matchCase; }\n    get actualPreserveCase() { return this._preserveCase; }\n    get searchScope() { return this._searchScope; }\n    get matchesPosition() { return this._matchesPosition; }\n    get matchesCount() { return this._matchesCount; }\n    get currentMatch() { return this._currentMatch; }\n    constructor() {\n        super();\n        this._onFindReplaceStateChange = this._register(new Emitter());\n        this.onFindReplaceStateChange = this._onFindReplaceStateChange.event;\n        this._searchString = '';\n        this._replaceString = '';\n        this._isRevealed = false;\n        this._isReplaceRevealed = false;\n        this._isRegex = false;\n        this._isRegexOverride = 0 /* FindOptionOverride.NotSet */;\n        this._wholeWord = false;\n        this._wholeWordOverride = 0 /* FindOptionOverride.NotSet */;\n        this._matchCase = false;\n        this._matchCaseOverride = 0 /* FindOptionOverride.NotSet */;\n        this._preserveCase = false;\n        this._preserveCaseOverride = 0 /* FindOptionOverride.NotSet */;\n        this._searchScope = null;\n        this._matchesPosition = 0;\n        this._matchesCount = 0;\n        this._currentMatch = null;\n        this._loop = true;\n        this._isSearching = false;\n        this._filters = null;\n    }\n    changeMatchInfo(matchesPosition, matchesCount, currentMatch) {\n        const changeEvent = {\n            moveCursor: false,\n            updateHistory: false,\n            searchString: false,\n            replaceString: false,\n            isRevealed: false,\n            isReplaceRevealed: false,\n            isRegex: false,\n            wholeWord: false,\n            matchCase: false,\n            preserveCase: false,\n            searchScope: false,\n            matchesPosition: false,\n            matchesCount: false,\n            currentMatch: false,\n            loop: false,\n            isSearching: false,\n            filters: false\n        };\n        let somethingChanged = false;\n        if (matchesCount === 0) {\n            matchesPosition = 0;\n        }\n        if (matchesPosition > matchesCount) {\n            matchesPosition = matchesCount;\n        }\n        if (this._matchesPosition !== matchesPosition) {\n            this._matchesPosition = matchesPosition;\n            changeEvent.matchesPosition = true;\n            somethingChanged = true;\n        }\n        if (this._matchesCount !== matchesCount) {\n            this._matchesCount = matchesCount;\n            changeEvent.matchesCount = true;\n            somethingChanged = true;\n        }\n        if (typeof currentMatch !== 'undefined') {\n            if (!Range.equalsRange(this._currentMatch, currentMatch)) {\n                this._currentMatch = currentMatch;\n                changeEvent.currentMatch = true;\n                somethingChanged = true;\n            }\n        }\n        if (somethingChanged) {\n            this._onFindReplaceStateChange.fire(changeEvent);\n        }\n    }\n    change(newState, moveCursor, updateHistory = true) {\n        var _a;\n        const changeEvent = {\n            moveCursor: moveCursor,\n            updateHistory: updateHistory,\n            searchString: false,\n            replaceString: false,\n            isRevealed: false,\n            isReplaceRevealed: false,\n            isRegex: false,\n            wholeWord: false,\n            matchCase: false,\n            preserveCase: false,\n            searchScope: false,\n            matchesPosition: false,\n            matchesCount: false,\n            currentMatch: false,\n            loop: false,\n            isSearching: false,\n            filters: false\n        };\n        let somethingChanged = false;\n        const oldEffectiveIsRegex = this.isRegex;\n        const oldEffectiveWholeWords = this.wholeWord;\n        const oldEffectiveMatchCase = this.matchCase;\n        const oldEffectivePreserveCase = this.preserveCase;\n        if (typeof newState.searchString !== 'undefined') {\n            if (this._searchString !== newState.searchString) {\n                this._searchString = newState.searchString;\n                changeEvent.searchString = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.replaceString !== 'undefined') {\n            if (this._replaceString !== newState.replaceString) {\n                this._replaceString = newState.replaceString;\n                changeEvent.replaceString = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isRevealed !== 'undefined') {\n            if (this._isRevealed !== newState.isRevealed) {\n                this._isRevealed = newState.isRevealed;\n                changeEvent.isRevealed = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isReplaceRevealed !== 'undefined') {\n            if (this._isReplaceRevealed !== newState.isReplaceRevealed) {\n                this._isReplaceRevealed = newState.isReplaceRevealed;\n                changeEvent.isReplaceRevealed = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isRegex !== 'undefined') {\n            this._isRegex = newState.isRegex;\n        }\n        if (typeof newState.wholeWord !== 'undefined') {\n            this._wholeWord = newState.wholeWord;\n        }\n        if (typeof newState.matchCase !== 'undefined') {\n            this._matchCase = newState.matchCase;\n        }\n        if (typeof newState.preserveCase !== 'undefined') {\n            this._preserveCase = newState.preserveCase;\n        }\n        if (typeof newState.searchScope !== 'undefined') {\n            if (!((_a = newState.searchScope) === null || _a === void 0 ? void 0 : _a.every((newSearchScope) => {\n                var _a;\n                return (_a = this._searchScope) === null || _a === void 0 ? void 0 : _a.some(existingSearchScope => {\n                    return !Range.equalsRange(existingSearchScope, newSearchScope);\n                });\n            }))) {\n                this._searchScope = newState.searchScope;\n                changeEvent.searchScope = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.loop !== 'undefined') {\n            if (this._loop !== newState.loop) {\n                this._loop = newState.loop;\n                changeEvent.loop = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.isSearching !== 'undefined') {\n            if (this._isSearching !== newState.isSearching) {\n                this._isSearching = newState.isSearching;\n                changeEvent.isSearching = true;\n                somethingChanged = true;\n            }\n        }\n        if (typeof newState.filters !== 'undefined') {\n            if (this._filters) {\n                this._filters.update(newState.filters);\n            }\n            else {\n                this._filters = newState.filters;\n            }\n            changeEvent.filters = true;\n            somethingChanged = true;\n        }\n        // Overrides get set when they explicitly come in and get reset anytime something else changes\n        this._isRegexOverride = (typeof newState.isRegexOverride !== 'undefined' ? newState.isRegexOverride : 0 /* FindOptionOverride.NotSet */);\n        this._wholeWordOverride = (typeof newState.wholeWordOverride !== 'undefined' ? newState.wholeWordOverride : 0 /* FindOptionOverride.NotSet */);\n        this._matchCaseOverride = (typeof newState.matchCaseOverride !== 'undefined' ? newState.matchCaseOverride : 0 /* FindOptionOverride.NotSet */);\n        this._preserveCaseOverride = (typeof newState.preserveCaseOverride !== 'undefined' ? newState.preserveCaseOverride : 0 /* FindOptionOverride.NotSet */);\n        if (oldEffectiveIsRegex !== this.isRegex) {\n            somethingChanged = true;\n            changeEvent.isRegex = true;\n        }\n        if (oldEffectiveWholeWords !== this.wholeWord) {\n            somethingChanged = true;\n            changeEvent.wholeWord = true;\n        }\n        if (oldEffectiveMatchCase !== this.matchCase) {\n            somethingChanged = true;\n            changeEvent.matchCase = true;\n        }\n        if (oldEffectivePreserveCase !== this.preserveCase) {\n            somethingChanged = true;\n            changeEvent.preserveCase = true;\n        }\n        if (somethingChanged) {\n            this._onFindReplaceStateChange.fire(changeEvent);\n        }\n    }\n    canNavigateBack() {\n        return this.canNavigateInLoop() || (this.matchesPosition !== 1);\n    }\n    canNavigateForward() {\n        return this.canNavigateInLoop() || (this.matchesPosition < this.matchesCount);\n    }\n    canNavigateInLoop() {\n        return this._loop || (this.matchesCount >= MATCHES_LIMIT);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { alert as alertFn } from '../../../../base/browser/ui/aria/aria.js';\nimport { Toggle } from '../../../../base/browser/ui/toggle/toggle.js';\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './findWidget.css';\nimport { Range } from '../../../common/core/range.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_REPLACE_INPUT_FOCUSED, FIND_IDS, MATCHES_LIMIT } from './findModel.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextScopedFindInput, ContextScopedReplaceInput } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nimport { showHistoryKeybindingHint } from '../../../../platform/history/browser/historyWidgetKeybindingHint.js';\nimport { asCssVariable, contrastBorder, editorFindMatch, editorFindMatchBorder, editorFindMatchHighlight, editorFindMatchHighlightBorder, editorFindRangeHighlight, editorFindRangeHighlightBorder, editorWidgetBackground, editorWidgetBorder, editorWidgetForeground, editorWidgetResizeBorder, errorForeground, focusBorder, inputActiveOptionBackground, inputActiveOptionBorder, inputActiveOptionForeground, toolbarHoverBackground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon, widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport { defaultInputBoxStyles, defaultToggleStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nconst findSelectionIcon = registerIcon('find-selection', Codicon.selection, nls.localize('findSelectionIcon', 'Icon for \\'Find in Selection\\' in the editor find widget.'));\nconst findCollapsedIcon = registerIcon('find-collapsed', Codicon.chevronRight, nls.localize('findCollapsedIcon', 'Icon to indicate that the editor find widget is collapsed.'));\nconst findExpandedIcon = registerIcon('find-expanded', Codicon.chevronDown, nls.localize('findExpandedIcon', 'Icon to indicate that the editor find widget is expanded.'));\nexport const findReplaceIcon = registerIcon('find-replace', Codicon.replace, nls.localize('findReplaceIcon', 'Icon for \\'Replace\\' in the editor find widget.'));\nexport const findReplaceAllIcon = registerIcon('find-replace-all', Codicon.replaceAll, nls.localize('findReplaceAllIcon', 'Icon for \\'Replace All\\' in the editor find widget.'));\nexport const findPreviousMatchIcon = registerIcon('find-previous-match', Codicon.arrowUp, nls.localize('findPreviousMatchIcon', 'Icon for \\'Find Previous\\' in the editor find widget.'));\nexport const findNextMatchIcon = registerIcon('find-next-match', Codicon.arrowDown, nls.localize('findNextMatchIcon', 'Icon for \\'Find Next\\' in the editor find widget.'));\nconst NLS_FIND_INPUT_LABEL = nls.localize('label.find', \"Find\");\nconst NLS_FIND_INPUT_PLACEHOLDER = nls.localize('placeholder.find', \"Find\");\nconst NLS_PREVIOUS_MATCH_BTN_LABEL = nls.localize('label.previousMatchButton', \"Previous Match\");\nconst NLS_NEXT_MATCH_BTN_LABEL = nls.localize('label.nextMatchButton', \"Next Match\");\nconst NLS_TOGGLE_SELECTION_FIND_TITLE = nls.localize('label.toggleSelectionFind', \"Find in Selection\");\nconst NLS_CLOSE_BTN_LABEL = nls.localize('label.closeButton', \"Close\");\nconst NLS_REPLACE_INPUT_LABEL = nls.localize('label.replace', \"Replace\");\nconst NLS_REPLACE_INPUT_PLACEHOLDER = nls.localize('placeholder.replace', \"Replace\");\nconst NLS_REPLACE_BTN_LABEL = nls.localize('label.replaceButton', \"Replace\");\nconst NLS_REPLACE_ALL_BTN_LABEL = nls.localize('label.replaceAllButton', \"Replace All\");\nconst NLS_TOGGLE_REPLACE_MODE_BTN_LABEL = nls.localize('label.toggleReplaceButton', \"Toggle Replace\");\nconst NLS_MATCHES_COUNT_LIMIT_TITLE = nls.localize('title.matchesCountLimit', \"Only the first {0} results are highlighted, but all find operations work on the entire text.\", MATCHES_LIMIT);\nexport const NLS_MATCHES_LOCATION = nls.localize('label.matchesLocation', \"{0} of {1}\");\nexport const NLS_NO_RESULTS = nls.localize('label.noResults', \"No results\");\nconst FIND_WIDGET_INITIAL_WIDTH = 419;\nconst PART_WIDTH = 275;\nconst FIND_INPUT_AREA_WIDTH = PART_WIDTH - 54;\nlet MAX_MATCHES_COUNT_WIDTH = 69;\n// let FIND_ALL_CONTROLS_WIDTH = 17/** Find Input margin-left */ + (MAX_MATCHES_COUNT_WIDTH + 3 + 1) /** Match Results */ + 23 /** Button */ * 4 + 2/** sash */;\nconst FIND_INPUT_AREA_HEIGHT = 33; // The height of Find Widget when Replace Input is not visible.\nconst ctrlEnterReplaceAllWarningPromptedKey = 'ctrlEnterReplaceAll.windows.donotask';\nconst ctrlKeyMod = (platform.isMacintosh ? 256 /* KeyMod.WinCtrl */ : 2048 /* KeyMod.CtrlCmd */);\nexport class FindWidgetViewZone {\n    constructor(afterLineNumber) {\n        this.afterLineNumber = afterLineNumber;\n        this.heightInPx = FIND_INPUT_AREA_HEIGHT;\n        this.suppressMouseDown = false;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'dock-find-viewzone';\n    }\n}\nfunction stopPropagationForMultiLineUpwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionStart > 0) {\n        event.stopPropagation();\n        return;\n    }\n}\nfunction stopPropagationForMultiLineDownwards(event, value, textarea) {\n    const isMultiline = !!value.match(/\\n/);\n    if (textarea && isMultiline && textarea.selectionEnd < textarea.value.length) {\n        event.stopPropagation();\n        return;\n    }\n}\nclass FindWidget extends Widget {\n    constructor(codeEditor, controller, state, contextViewProvider, keybindingService, contextKeyService, themeService, storageService, notificationService) {\n        super();\n        this._cachedHeight = null;\n        this._revealTimeouts = [];\n        this._codeEditor = codeEditor;\n        this._controller = controller;\n        this._state = state;\n        this._contextViewProvider = contextViewProvider;\n        this._keybindingService = keybindingService;\n        this._contextKeyService = contextKeyService;\n        this._storageService = storageService;\n        this._notificationService = notificationService;\n        this._ctrlEnterReplaceAllWarningPrompted = !!storageService.getBoolean(ctrlEnterReplaceAllWarningPromptedKey, 0 /* StorageScope.PROFILE */);\n        this._isVisible = false;\n        this._isReplaceVisible = false;\n        this._ignoreChangeEvent = false;\n        this._updateHistoryDelayer = new Delayer(500);\n        this._register(toDisposable(() => this._updateHistoryDelayer.cancel()));\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this._buildDomNode();\n        this._updateButtons();\n        this._tryUpdateWidgetWidth();\n        this._findInput.inputBox.layout();\n        this._register(this._codeEditor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(86 /* EditorOption.readOnly */)) {\n                if (this._codeEditor.getOption(86 /* EditorOption.readOnly */)) {\n                    // Hide replace part if editor becomes read only\n                    this._state.change({ isReplaceRevealed: false }, false);\n                }\n                this._updateButtons();\n            }\n            if (e.hasChanged(138 /* EditorOption.layoutInfo */)) {\n                this._tryUpdateWidgetWidth();\n            }\n            if (e.hasChanged(2 /* EditorOption.accessibilitySupport */)) {\n                this.updateAccessibilitySupport();\n            }\n            if (e.hasChanged(38 /* EditorOption.find */)) {\n                const supportLoop = this._codeEditor.getOption(38 /* EditorOption.find */).loop;\n                this._state.change({ loop: supportLoop }, false);\n                const addExtraSpaceOnTop = this._codeEditor.getOption(38 /* EditorOption.find */).addExtraSpaceOnTop;\n                if (addExtraSpaceOnTop && !this._viewZone) {\n                    this._viewZone = new FindWidgetViewZone(0);\n                    this._showViewZone();\n                }\n                if (!addExtraSpaceOnTop && this._viewZone) {\n                    this._removeViewZone();\n                }\n            }\n        }));\n        this.updateAccessibilitySupport();\n        this._register(this._codeEditor.onDidChangeCursorSelection(() => {\n            if (this._isVisible) {\n                this._updateToggleSelectionFindButton();\n            }\n        }));\n        this._register(this._codeEditor.onDidFocusEditorWidget(() => __awaiter(this, void 0, void 0, function* () {\n            if (this._isVisible) {\n                const globalBufferTerm = yield this._controller.getGlobalBufferTerm();\n                if (globalBufferTerm && globalBufferTerm !== this._state.searchString) {\n                    this._state.change({ searchString: globalBufferTerm }, false);\n                    this._findInput.select();\n                }\n            }\n        })));\n        this._findInputFocused = CONTEXT_FIND_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._findFocusTracker = this._register(dom.trackFocus(this._findInput.inputBox.inputElement));\n        this._register(this._findFocusTracker.onDidFocus(() => {\n            this._findInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._findFocusTracker.onDidBlur(() => {\n            this._findInputFocused.set(false);\n        }));\n        this._replaceInputFocused = CONTEXT_REPLACE_INPUT_FOCUSED.bindTo(contextKeyService);\n        this._replaceFocusTracker = this._register(dom.trackFocus(this._replaceInput.inputBox.inputElement));\n        this._register(this._replaceFocusTracker.onDidFocus(() => {\n            this._replaceInputFocused.set(true);\n            this._updateSearchScope();\n        }));\n        this._register(this._replaceFocusTracker.onDidBlur(() => {\n            this._replaceInputFocused.set(false);\n        }));\n        this._codeEditor.addOverlayWidget(this);\n        if (this._codeEditor.getOption(38 /* EditorOption.find */).addExtraSpaceOnTop) {\n            this._viewZone = new FindWidgetViewZone(0); // Put it before the first line then users can scroll beyond the first line.\n        }\n        this._register(this._codeEditor.onDidChangeModel(() => {\n            if (!this._isVisible) {\n                return;\n            }\n            this._viewZoneId = undefined;\n        }));\n        this._register(this._codeEditor.onDidScrollChange((e) => {\n            if (e.scrollTopChanged) {\n                this._layoutViewZone();\n                return;\n            }\n            // for other scroll changes, layout the viewzone in next tick to avoid ruining current rendering.\n            setTimeout(() => {\n                this._layoutViewZone();\n            }, 0);\n        }));\n    }\n    // ----- IOverlayWidget API\n    getId() {\n        return FindWidget.ID;\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        if (this._isVisible) {\n            return {\n                preference: 0 /* OverlayWidgetPositionPreference.TOP_RIGHT_CORNER */\n            };\n        }\n        return null;\n    }\n    // ----- React to state changes\n    _onStateChanged(e) {\n        if (e.searchString) {\n            try {\n                this._ignoreChangeEvent = true;\n                this._findInput.setValue(this._state.searchString);\n            }\n            finally {\n                this._ignoreChangeEvent = false;\n            }\n            this._updateButtons();\n        }\n        if (e.replaceString) {\n            this._replaceInput.inputBox.value = this._state.replaceString;\n        }\n        if (e.isRevealed) {\n            if (this._state.isRevealed) {\n                this._reveal();\n            }\n            else {\n                this._hide(true);\n            }\n        }\n        if (e.isReplaceRevealed) {\n            if (this._state.isReplaceRevealed) {\n                if (!this._codeEditor.getOption(86 /* EditorOption.readOnly */) && !this._isReplaceVisible) {\n                    this._isReplaceVisible = true;\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._updateButtons();\n                    this._replaceInput.inputBox.layout();\n                }\n            }\n            else {\n                if (this._isReplaceVisible) {\n                    this._isReplaceVisible = false;\n                    this._updateButtons();\n                }\n            }\n        }\n        if ((e.isRevealed || e.isReplaceRevealed) && (this._state.isRevealed || this._state.isReplaceRevealed)) {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }\n        if (e.isRegex) {\n            this._findInput.setRegex(this._state.isRegex);\n        }\n        if (e.wholeWord) {\n            this._findInput.setWholeWords(this._state.wholeWord);\n        }\n        if (e.matchCase) {\n            this._findInput.setCaseSensitive(this._state.matchCase);\n        }\n        if (e.preserveCase) {\n            this._replaceInput.setPreserveCase(this._state.preserveCase);\n        }\n        if (e.searchScope) {\n            if (this._state.searchScope) {\n                this._toggleSelectionFind.checked = true;\n            }\n            else {\n                this._toggleSelectionFind.checked = false;\n            }\n            this._updateToggleSelectionFindButton();\n        }\n        if (e.searchString || e.matchesCount || e.matchesPosition) {\n            const showRedOutline = (this._state.searchString.length > 0 && this._state.matchesCount === 0);\n            this._domNode.classList.toggle('no-results', showRedOutline);\n            this._updateMatchesCount();\n            this._updateButtons();\n        }\n        if (e.searchString || e.currentMatch) {\n            this._layoutViewZone();\n        }\n        if (e.updateHistory) {\n            this._delayedUpdateHistory();\n        }\n        if (e.loop) {\n            this._updateButtons();\n        }\n    }\n    _delayedUpdateHistory() {\n        this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(undefined, onUnexpectedError);\n    }\n    _updateHistory() {\n        if (this._state.searchString) {\n            this._findInput.inputBox.addToHistory();\n        }\n        if (this._state.replaceString) {\n            this._replaceInput.inputBox.addToHistory();\n        }\n    }\n    _updateMatchesCount() {\n        this._matchesCount.style.minWidth = MAX_MATCHES_COUNT_WIDTH + 'px';\n        if (this._state.matchesCount >= MATCHES_LIMIT) {\n            this._matchesCount.title = NLS_MATCHES_COUNT_LIMIT_TITLE;\n        }\n        else {\n            this._matchesCount.title = '';\n        }\n        // remove previous content\n        if (this._matchesCount.firstChild) {\n            this._matchesCount.removeChild(this._matchesCount.firstChild);\n        }\n        let label;\n        if (this._state.matchesCount > 0) {\n            let matchesCount = String(this._state.matchesCount);\n            if (this._state.matchesCount >= MATCHES_LIMIT) {\n                matchesCount += '+';\n            }\n            let matchesPosition = String(this._state.matchesPosition);\n            if (matchesPosition === '0') {\n                matchesPosition = '?';\n            }\n            label = strings.format(NLS_MATCHES_LOCATION, matchesPosition, matchesCount);\n        }\n        else {\n            label = NLS_NO_RESULTS;\n        }\n        this._matchesCount.appendChild(document.createTextNode(label));\n        alertFn(this._getAriaLabel(label, this._state.currentMatch, this._state.searchString));\n        MAX_MATCHES_COUNT_WIDTH = Math.max(MAX_MATCHES_COUNT_WIDTH, this._matchesCount.clientWidth);\n    }\n    // ----- actions\n    _getAriaLabel(label, currentMatch, searchString) {\n        if (label === NLS_NO_RESULTS) {\n            return searchString === ''\n                ? nls.localize('ariaSearchNoResultEmpty', \"{0} found\", label)\n                : nls.localize('ariaSearchNoResult', \"{0} found for '{1}'\", label, searchString);\n        }\n        if (currentMatch) {\n            const ariaLabel = nls.localize('ariaSearchNoResultWithLineNum', \"{0} found for '{1}', at {2}\", label, searchString, currentMatch.startLineNumber + ':' + currentMatch.startColumn);\n            const model = this._codeEditor.getModel();\n            if (model && (currentMatch.startLineNumber <= model.getLineCount()) && (currentMatch.startLineNumber >= 1)) {\n                const lineContent = model.getLineContent(currentMatch.startLineNumber);\n                return `${lineContent}, ${ariaLabel}`;\n            }\n            return ariaLabel;\n        }\n        return nls.localize('ariaSearchNoResultWithLineNumNoCurrentMatch', \"{0} found for '{1}'\", label, searchString);\n    }\n    /**\n     * If 'selection find' is ON we should not disable the button (its function is to cancel 'selection find').\n     * If 'selection find' is OFF we enable the button only if there is a selection.\n     */\n    _updateToggleSelectionFindButton() {\n        const selection = this._codeEditor.getSelection();\n        const isSelection = selection ? (selection.startLineNumber !== selection.endLineNumber || selection.startColumn !== selection.endColumn) : false;\n        const isChecked = this._toggleSelectionFind.checked;\n        if (this._isVisible && (isChecked || isSelection)) {\n            this._toggleSelectionFind.enable();\n        }\n        else {\n            this._toggleSelectionFind.disable();\n        }\n    }\n    _updateButtons() {\n        this._findInput.setEnabled(this._isVisible);\n        this._replaceInput.setEnabled(this._isVisible && this._isReplaceVisible);\n        this._updateToggleSelectionFindButton();\n        this._closeBtn.setEnabled(this._isVisible);\n        const findInputIsNonEmpty = (this._state.searchString.length > 0);\n        const matchesCount = this._state.matchesCount ? true : false;\n        this._prevBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateBack());\n        this._nextBtn.setEnabled(this._isVisible && findInputIsNonEmpty && matchesCount && this._state.canNavigateForward());\n        this._replaceBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._replaceAllBtn.setEnabled(this._isVisible && this._isReplaceVisible && findInputIsNonEmpty);\n        this._domNode.classList.toggle('replaceToggled', this._isReplaceVisible);\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        const canReplace = !this._codeEditor.getOption(86 /* EditorOption.readOnly */);\n        this._toggleReplaceBtn.setEnabled(this._isVisible && canReplace);\n    }\n    _reveal() {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (!this._isVisible) {\n            this._isVisible = true;\n            const selection = this._codeEditor.getSelection();\n            switch (this._codeEditor.getOption(38 /* EditorOption.find */).autoFindInSelection) {\n                case 'always':\n                    this._toggleSelectionFind.checked = true;\n                    break;\n                case 'never':\n                    this._toggleSelectionFind.checked = false;\n                    break;\n                case 'multiline': {\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n                    this._toggleSelectionFind.checked = isSelectionMultipleLine;\n                    break;\n                }\n                default:\n                    break;\n            }\n            this._tryUpdateWidgetWidth();\n            this._updateButtons();\n            this._revealTimeouts.push(setTimeout(() => {\n                this._domNode.classList.add('visible');\n                this._domNode.setAttribute('aria-hidden', 'false');\n            }, 0));\n            // validate query again as it's being dismissed when we hide the find widget.\n            this._revealTimeouts.push(setTimeout(() => {\n                this._findInput.validate();\n            }, 200));\n            this._codeEditor.layoutOverlayWidget(this);\n            let adjustEditorScrollTop = true;\n            if (this._codeEditor.getOption(38 /* EditorOption.find */).seedSearchStringFromSelection && selection) {\n                const domNode = this._codeEditor.getDomNode();\n                if (domNode) {\n                    const editorCoords = dom.getDomNodePagePosition(domNode);\n                    const startCoords = this._codeEditor.getScrolledVisiblePosition(selection.getStartPosition());\n                    const startLeft = editorCoords.left + (startCoords ? startCoords.left : 0);\n                    const startTop = startCoords ? startCoords.top : 0;\n                    if (this._viewZone && startTop < this._viewZone.heightInPx) {\n                        if (selection.endLineNumber > selection.startLineNumber) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const leftOfFindWidget = dom.getTopLeftOffset(this._domNode).left;\n                        if (startLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                        const endCoords = this._codeEditor.getScrolledVisiblePosition(selection.getEndPosition());\n                        const endLeft = editorCoords.left + (endCoords ? endCoords.left : 0);\n                        if (endLeft > leftOfFindWidget) {\n                            adjustEditorScrollTop = false;\n                        }\n                    }\n                }\n            }\n            this._showViewZone(adjustEditorScrollTop);\n        }\n    }\n    _hide(focusTheEditor) {\n        this._revealTimeouts.forEach(e => {\n            clearTimeout(e);\n        });\n        this._revealTimeouts = [];\n        if (this._isVisible) {\n            this._isVisible = false;\n            this._updateButtons();\n            this._domNode.classList.remove('visible');\n            this._domNode.setAttribute('aria-hidden', 'true');\n            this._findInput.clearMessage();\n            if (focusTheEditor) {\n                this._codeEditor.focus();\n            }\n            this._codeEditor.layoutOverlayWidget(this);\n            this._removeViewZone();\n        }\n    }\n    _layoutViewZone(targetScrollTop) {\n        const addExtraSpaceOnTop = this._codeEditor.getOption(38 /* EditorOption.find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            this._removeViewZone();\n            return;\n        }\n        if (!this._isVisible) {\n            return;\n        }\n        const viewZone = this._viewZone;\n        if (this._viewZoneId !== undefined || !viewZone) {\n            return;\n        }\n        this._codeEditor.changeViewZones((accessor) => {\n            viewZone.heightInPx = this._getHeight();\n            this._viewZoneId = accessor.addZone(viewZone);\n            // scroll top adjust to make sure the editor doesn't scroll when adding viewzone at the beginning.\n            this._codeEditor.setScrollTop(targetScrollTop || this._codeEditor.getScrollTop() + viewZone.heightInPx);\n        });\n    }\n    _showViewZone(adjustScroll = true) {\n        if (!this._isVisible) {\n            return;\n        }\n        const addExtraSpaceOnTop = this._codeEditor.getOption(38 /* EditorOption.find */).addExtraSpaceOnTop;\n        if (!addExtraSpaceOnTop) {\n            return;\n        }\n        if (this._viewZone === undefined) {\n            this._viewZone = new FindWidgetViewZone(0);\n        }\n        const viewZone = this._viewZone;\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                // the view zone already exists, we need to update the height\n                const newHeight = this._getHeight();\n                if (newHeight === viewZone.heightInPx) {\n                    return;\n                }\n                const scrollAdjustment = newHeight - viewZone.heightInPx;\n                viewZone.heightInPx = newHeight;\n                accessor.layoutZone(this._viewZoneId);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n                return;\n            }\n            else {\n                let scrollAdjustment = this._getHeight();\n                // if the editor has top padding, factor that into the zone height\n                scrollAdjustment -= this._codeEditor.getOption(80 /* EditorOption.padding */).top;\n                if (scrollAdjustment <= 0) {\n                    return;\n                }\n                viewZone.heightInPx = scrollAdjustment;\n                this._viewZoneId = accessor.addZone(viewZone);\n                if (adjustScroll) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() + scrollAdjustment);\n                }\n            }\n        });\n    }\n    _removeViewZone() {\n        this._codeEditor.changeViewZones((accessor) => {\n            if (this._viewZoneId !== undefined) {\n                accessor.removeZone(this._viewZoneId);\n                this._viewZoneId = undefined;\n                if (this._viewZone) {\n                    this._codeEditor.setScrollTop(this._codeEditor.getScrollTop() - this._viewZone.heightInPx);\n                    this._viewZone = undefined;\n                }\n            }\n        });\n    }\n    _tryUpdateWidgetWidth() {\n        if (!this._isVisible) {\n            return;\n        }\n        if (!dom.isInDOM(this._domNode)) {\n            // the widget is not in the DOM\n            return;\n        }\n        const layoutInfo = this._codeEditor.getLayoutInfo();\n        const editorContentWidth = layoutInfo.contentWidth;\n        if (editorContentWidth <= 0) {\n            // for example, diff view original editor\n            this._domNode.classList.add('hiddenEditor');\n            return;\n        }\n        else if (this._domNode.classList.contains('hiddenEditor')) {\n            this._domNode.classList.remove('hiddenEditor');\n        }\n        const editorWidth = layoutInfo.width;\n        const minimapWidth = layoutInfo.minimap.minimapWidth;\n        let collapsedFindWidget = false;\n        let reducedFindWidget = false;\n        let narrowFindWidget = false;\n        if (this._resized) {\n            const widgetWidth = dom.getTotalWidth(this._domNode);\n            if (widgetWidth > FIND_WIDGET_INITIAL_WIDTH) {\n                // as the widget is resized by users, we may need to change the max width of the widget as the editor width changes.\n                this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                return;\n            }\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth >= editorWidth) {\n            reducedFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth) {\n            narrowFindWidget = true;\n        }\n        if (FIND_WIDGET_INITIAL_WIDTH + 28 + minimapWidth - MAX_MATCHES_COUNT_WIDTH >= editorWidth + 50) {\n            collapsedFindWidget = true;\n        }\n        this._domNode.classList.toggle('collapsed-find-widget', collapsedFindWidget);\n        this._domNode.classList.toggle('narrow-find-widget', narrowFindWidget);\n        this._domNode.classList.toggle('reduced-find-widget', reducedFindWidget);\n        if (!narrowFindWidget && !collapsedFindWidget) {\n            // the minimal left offset of findwidget is 15px.\n            this._domNode.style.maxWidth = `${editorWidth - 28 - minimapWidth - 15}px`;\n        }\n        if (this._resized) {\n            this._findInput.inputBox.layout();\n            const findInputWidth = this._findInput.inputBox.element.clientWidth;\n            if (findInputWidth > 0) {\n                this._replaceInput.width = findInputWidth;\n            }\n        }\n        else if (this._isReplaceVisible) {\n            this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n        }\n    }\n    _getHeight() {\n        let totalheight = 0;\n        // find input margin top\n        totalheight += 4;\n        // find input height\n        totalheight += this._findInput.inputBox.height + 2 /** input box border */;\n        if (this._isReplaceVisible) {\n            // replace input margin\n            totalheight += 4;\n            totalheight += this._replaceInput.inputBox.height + 2 /** input box border */;\n        }\n        // margin bottom\n        totalheight += 4;\n        return totalheight;\n    }\n    _tryUpdateHeight() {\n        const totalHeight = this._getHeight();\n        if (this._cachedHeight !== null && this._cachedHeight === totalHeight) {\n            return false;\n        }\n        this._cachedHeight = totalHeight;\n        this._domNode.style.height = `${totalHeight}px`;\n        return true;\n    }\n    // ----- Public\n    focusFindInput() {\n        this._findInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._findInput.focus();\n    }\n    focusReplaceInput() {\n        this._replaceInput.select();\n        // Edge browser requires focus() in addition to select()\n        this._replaceInput.focus();\n    }\n    highlightFindOptions() {\n        this._findInput.highlightFindOptions();\n    }\n    _updateSearchScope() {\n        if (!this._codeEditor.hasModel()) {\n            return;\n        }\n        if (this._toggleSelectionFind.checked) {\n            const selections = this._codeEditor.getSelections();\n            selections.map(selection => {\n                if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                    selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                }\n                const currentMatch = this._state.currentMatch;\n                if (selection.startLineNumber !== selection.endLineNumber) {\n                    if (!Range.equalsRange(selection, currentMatch)) {\n                        return selection;\n                    }\n                }\n                return null;\n            }).filter(element => !!element);\n            if (selections.length) {\n                this._state.change({ searchScope: selections }, true);\n            }\n        }\n    }\n    _onFindInputMouseDown(e) {\n        // on linux, middle key does pasting.\n        if (e.middleButton) {\n            e.stopPropagation();\n        }\n    }\n    _onFindInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                this._findInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* KeyCode.Tab */)) {\n            if (this._isReplaceVisible) {\n                this._replaceInput.focus();\n            }\n            else {\n                this._findInput.focusOnCaseSensitive();\n            }\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._findInput.getValue(), this._findInput.domNode.querySelector('textarea'));\n        }\n    }\n    _onReplaceInputKeyDown(e) {\n        if (e.equals(ctrlKeyMod | 3 /* KeyCode.Enter */)) {\n            if (this._keybindingService.dispatchEvent(e, e.target)) {\n                e.preventDefault();\n                return;\n            }\n            else {\n                if (platform.isWindows && platform.isNative && !this._ctrlEnterReplaceAllWarningPrompted) {\n                    // this is the first time when users press Ctrl + Enter to replace all\n                    this._notificationService.info(nls.localize('ctrlEnter.keybindingChanged', 'Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.'));\n                    this._ctrlEnterReplaceAllWarningPrompted = true;\n                    this._storageService.store(ctrlEnterReplaceAllWarningPromptedKey, true, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n                }\n                this._replaceInput.inputBox.insertAtCursor('\\n');\n                e.preventDefault();\n                return;\n            }\n        }\n        if (e.equals(2 /* KeyCode.Tab */)) {\n            this._findInput.focusOnCaseSensitive();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n            this._findInput.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)) {\n            this._codeEditor.focus();\n            e.preventDefault();\n            return;\n        }\n        if (e.equals(16 /* KeyCode.UpArrow */)) {\n            return stopPropagationForMultiLineUpwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n        if (e.equals(18 /* KeyCode.DownArrow */)) {\n            return stopPropagationForMultiLineDownwards(e, this._replaceInput.inputBox.value, this._replaceInput.inputBox.element.querySelector('textarea'));\n        }\n    }\n    // ----- sash\n    getVerticalSashLeft(_sash) {\n        return 0;\n    }\n    // ----- initialization\n    _keybindingLabelFor(actionId) {\n        const kb = this._keybindingService.lookupKeybinding(actionId);\n        if (!kb) {\n            return '';\n        }\n        return ` (${kb.getLabel()})`;\n    }\n    _buildDomNode() {\n        const flexibleHeight = true;\n        const flexibleWidth = true;\n        // Find input\n        this._findInput = this._register(new ContextScopedFindInput(null, this._contextViewProvider, {\n            width: FIND_INPUT_AREA_WIDTH,\n            label: NLS_FIND_INPUT_LABEL,\n            placeholder: NLS_FIND_INPUT_PLACEHOLDER,\n            appendCaseSensitiveLabel: this._keybindingLabelFor(FIND_IDS.ToggleCaseSensitiveCommand),\n            appendWholeWordsLabel: this._keybindingLabelFor(FIND_IDS.ToggleWholeWordCommand),\n            appendRegexLabel: this._keybindingLabelFor(FIND_IDS.ToggleRegexCommand),\n            validation: (value) => {\n                if (value.length === 0 || !this._findInput.getRegex()) {\n                    return null;\n                }\n                try {\n                    // use `g` and `u` which are also used by the TextModel search\n                    new RegExp(value, 'gu');\n                    return null;\n                }\n                catch (e) {\n                    return { content: e.message };\n                }\n            },\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showCommonFindToggles: true,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService),\n            inputBoxStyles: defaultInputBoxStyles,\n            toggleStyles: defaultToggleStyles\n        }, this._contextKeyService));\n        this._findInput.setRegex(!!this._state.isRegex);\n        this._findInput.setCaseSensitive(!!this._state.matchCase);\n        this._findInput.setWholeWords(!!this._state.wholeWord);\n        this._register(this._findInput.onKeyDown((e) => this._onFindInputKeyDown(e)));\n        this._register(this._findInput.inputBox.onDidChange(() => {\n            if (this._ignoreChangeEvent) {\n                return;\n            }\n            this._state.change({ searchString: this._findInput.getValue() }, true);\n        }));\n        this._register(this._findInput.onDidOptionChange(() => {\n            this._state.change({\n                isRegex: this._findInput.getRegex(),\n                wholeWord: this._findInput.getWholeWords(),\n                matchCase: this._findInput.getCaseSensitive()\n            }, true);\n        }));\n        this._register(this._findInput.onCaseSensitiveKeyDown((e) => {\n            if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.onRegexKeyDown((e) => {\n            if (e.equals(2 /* KeyCode.Tab */)) {\n                if (this._isReplaceVisible) {\n                    this._replaceInput.focusOnPreserve();\n                    e.preventDefault();\n                }\n            }\n        }));\n        this._register(this._findInput.inputBox.onDidHeightChange((e) => {\n            if (this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        if (platform.isLinux) {\n            this._register(this._findInput.onMouseDown((e) => this._onFindInputMouseDown(e)));\n        }\n        this._matchesCount = document.createElement('div');\n        this._matchesCount.className = 'matchesCount';\n        this._updateMatchesCount();\n        // Previous button\n        this._prevBtn = this._register(new SimpleButton({\n            label: NLS_PREVIOUS_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.PreviousMatchFindAction),\n            icon: findPreviousMatchIcon,\n            onTrigger: () => {\n                assertIsDefined(this._codeEditor.getAction(FIND_IDS.PreviousMatchFindAction)).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        // Next button\n        this._nextBtn = this._register(new SimpleButton({\n            label: NLS_NEXT_MATCH_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.NextMatchFindAction),\n            icon: findNextMatchIcon,\n            onTrigger: () => {\n                assertIsDefined(this._codeEditor.getAction(FIND_IDS.NextMatchFindAction)).run().then(undefined, onUnexpectedError);\n            }\n        }));\n        const findPart = document.createElement('div');\n        findPart.className = 'find-part';\n        findPart.appendChild(this._findInput.domNode);\n        const actionsContainer = document.createElement('div');\n        actionsContainer.className = 'find-actions';\n        findPart.appendChild(actionsContainer);\n        actionsContainer.appendChild(this._matchesCount);\n        actionsContainer.appendChild(this._prevBtn.domNode);\n        actionsContainer.appendChild(this._nextBtn.domNode);\n        // Toggle selection button\n        this._toggleSelectionFind = this._register(new Toggle({\n            icon: findSelectionIcon,\n            title: NLS_TOGGLE_SELECTION_FIND_TITLE + this._keybindingLabelFor(FIND_IDS.ToggleSearchScopeCommand),\n            isChecked: false,\n            inputActiveOptionBackground: asCssVariable(inputActiveOptionBackground),\n            inputActiveOptionBorder: asCssVariable(inputActiveOptionBorder),\n            inputActiveOptionForeground: asCssVariable(inputActiveOptionForeground),\n        }));\n        this._register(this._toggleSelectionFind.onChange(() => {\n            if (this._toggleSelectionFind.checked) {\n                if (this._codeEditor.hasModel()) {\n                    const selections = this._codeEditor.getSelections();\n                    selections.map(selection => {\n                        if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                            selection = selection.setEndPosition(selection.endLineNumber - 1, this._codeEditor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                        }\n                        if (!selection.isEmpty()) {\n                            return selection;\n                        }\n                        return null;\n                    }).filter(element => !!element);\n                    if (selections.length) {\n                        this._state.change({ searchScope: selections }, true);\n                    }\n                }\n            }\n            else {\n                this._state.change({ searchScope: null }, true);\n            }\n        }));\n        actionsContainer.appendChild(this._toggleSelectionFind.domNode);\n        // Close button\n        this._closeBtn = this._register(new SimpleButton({\n            label: NLS_CLOSE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.CloseFindWidgetCommand),\n            icon: widgetClose,\n            onTrigger: () => {\n                this._state.change({ isRevealed: false, searchScope: null }, false);\n            },\n            onKeyDown: (e) => {\n                if (e.equals(2 /* KeyCode.Tab */)) {\n                    if (this._isReplaceVisible) {\n                        if (this._replaceBtn.isEnabled()) {\n                            this._replaceBtn.focus();\n                        }\n                        else {\n                            this._codeEditor.focus();\n                        }\n                        e.preventDefault();\n                    }\n                }\n            }\n        }));\n        actionsContainer.appendChild(this._closeBtn.domNode);\n        // Replace input\n        this._replaceInput = this._register(new ContextScopedReplaceInput(null, undefined, {\n            label: NLS_REPLACE_INPUT_LABEL,\n            placeholder: NLS_REPLACE_INPUT_PLACEHOLDER,\n            appendPreserveCaseLabel: this._keybindingLabelFor(FIND_IDS.TogglePreserveCaseCommand),\n            history: [],\n            flexibleHeight,\n            flexibleWidth,\n            flexibleMaxHeight: 118,\n            showHistoryHint: () => showHistoryKeybindingHint(this._keybindingService),\n            inputBoxStyles: defaultInputBoxStyles,\n            toggleStyles: defaultToggleStyles\n        }, this._contextKeyService, true));\n        this._replaceInput.setPreserveCase(!!this._state.preserveCase);\n        this._register(this._replaceInput.onKeyDown((e) => this._onReplaceInputKeyDown(e)));\n        this._register(this._replaceInput.inputBox.onDidChange(() => {\n            this._state.change({ replaceString: this._replaceInput.inputBox.value }, false);\n        }));\n        this._register(this._replaceInput.inputBox.onDidHeightChange((e) => {\n            if (this._isReplaceVisible && this._tryUpdateHeight()) {\n                this._showViewZone();\n            }\n        }));\n        this._register(this._replaceInput.onDidOptionChange(() => {\n            this._state.change({\n                preserveCase: this._replaceInput.getPreserveCase()\n            }, true);\n        }));\n        this._register(this._replaceInput.onPreserveCaseKeyDown((e) => {\n            if (e.equals(2 /* KeyCode.Tab */)) {\n                if (this._prevBtn.isEnabled()) {\n                    this._prevBtn.focus();\n                }\n                else if (this._nextBtn.isEnabled()) {\n                    this._nextBtn.focus();\n                }\n                else if (this._toggleSelectionFind.enabled) {\n                    this._toggleSelectionFind.focus();\n                }\n                else if (this._closeBtn.isEnabled()) {\n                    this._closeBtn.focus();\n                }\n                e.preventDefault();\n            }\n        }));\n        // Replace one button\n        this._replaceBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceOneAction),\n            icon: findReplaceIcon,\n            onTrigger: () => {\n                this._controller.replace();\n            },\n            onKeyDown: (e) => {\n                if (e.equals(1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */)) {\n                    this._closeBtn.focus();\n                    e.preventDefault();\n                }\n            }\n        }));\n        // Replace all button\n        this._replaceAllBtn = this._register(new SimpleButton({\n            label: NLS_REPLACE_ALL_BTN_LABEL + this._keybindingLabelFor(FIND_IDS.ReplaceAllAction),\n            icon: findReplaceAllIcon,\n            onTrigger: () => {\n                this._controller.replaceAll();\n            }\n        }));\n        const replacePart = document.createElement('div');\n        replacePart.className = 'replace-part';\n        replacePart.appendChild(this._replaceInput.domNode);\n        const replaceActionsContainer = document.createElement('div');\n        replaceActionsContainer.className = 'replace-actions';\n        replacePart.appendChild(replaceActionsContainer);\n        replaceActionsContainer.appendChild(this._replaceBtn.domNode);\n        replaceActionsContainer.appendChild(this._replaceAllBtn.domNode);\n        // Toggle replace button\n        this._toggleReplaceBtn = this._register(new SimpleButton({\n            label: NLS_TOGGLE_REPLACE_MODE_BTN_LABEL,\n            className: 'codicon toggle left',\n            onTrigger: () => {\n                this._state.change({ isReplaceRevealed: !this._isReplaceVisible }, false);\n                if (this._isReplaceVisible) {\n                    this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n                    this._replaceInput.inputBox.layout();\n                }\n                this._showViewZone();\n            }\n        }));\n        this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);\n        // Widget\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'editor-widget find-widget';\n        this._domNode.setAttribute('aria-hidden', 'true');\n        // We need to set this explicitly, otherwise on IE11, the width inheritence of flex doesn't work.\n        this._domNode.style.width = `${FIND_WIDGET_INITIAL_WIDTH}px`;\n        this._domNode.appendChild(this._toggleReplaceBtn.domNode);\n        this._domNode.appendChild(findPart);\n        this._domNode.appendChild(replacePart);\n        this._resizeSash = new Sash(this._domNode, this, { orientation: 0 /* Orientation.VERTICAL */, size: 2 });\n        this._resized = false;\n        let originalWidth = FIND_WIDGET_INITIAL_WIDTH;\n        this._register(this._resizeSash.onDidStart(() => {\n            originalWidth = dom.getTotalWidth(this._domNode);\n        }));\n        this._register(this._resizeSash.onDidChange((evt) => {\n            this._resized = true;\n            const width = originalWidth + evt.startX - evt.currentX;\n            if (width < FIND_WIDGET_INITIAL_WIDTH) {\n                // narrow down the find widget should be handled by CSS.\n                return;\n            }\n            const maxWidth = parseFloat(dom.getComputedStyle(this._domNode).maxWidth) || 0;\n            if (width > maxWidth) {\n                return;\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n            this._tryUpdateHeight();\n        }));\n        this._register(this._resizeSash.onDidReset(() => {\n            // users double click on the sash\n            const currentWidth = dom.getTotalWidth(this._domNode);\n            if (currentWidth < FIND_WIDGET_INITIAL_WIDTH) {\n                // The editor is narrow and the width of the find widget is controlled fully by CSS.\n                return;\n            }\n            let width = FIND_WIDGET_INITIAL_WIDTH;\n            if (!this._resized || currentWidth === FIND_WIDGET_INITIAL_WIDTH) {\n                // 1. never resized before, double click should maximizes it\n                // 2. users resized it already but its width is the same as default\n                const layoutInfo = this._codeEditor.getLayoutInfo();\n                width = layoutInfo.width - 28 - layoutInfo.minimap.minimapWidth - 15;\n                this._resized = true;\n            }\n            else {\n                /**\n                 * no op, the find widget should be shrinked to its default size.\n                 */\n            }\n            this._domNode.style.width = `${width}px`;\n            if (this._isReplaceVisible) {\n                this._replaceInput.width = dom.getTotalWidth(this._findInput.domNode);\n            }\n            this._findInput.inputBox.layout();\n        }));\n    }\n    updateAccessibilitySupport() {\n        const value = this._codeEditor.getOption(2 /* EditorOption.accessibilitySupport */);\n        this._findInput.setFocusInputOnOptionClick(value !== 2 /* AccessibilitySupport.Enabled */);\n    }\n}\nFindWidget.ID = 'editor.contrib.findWidget';\nexport { FindWidget };\nexport class SimpleButton extends Widget {\n    constructor(opts) {\n        super();\n        this._opts = opts;\n        let className = 'button';\n        if (this._opts.className) {\n            className = className + ' ' + this._opts.className;\n        }\n        if (this._opts.icon) {\n            className = className + ' ' + ThemeIcon.asClassName(this._opts.icon);\n        }\n        this._domNode = document.createElement('div');\n        this._domNode.title = this._opts.label;\n        this._domNode.tabIndex = 0;\n        this._domNode.className = className;\n        this._domNode.setAttribute('role', 'button');\n        this._domNode.setAttribute('aria-label', this._opts.label);\n        this.onclick(this._domNode, (e) => {\n            this._opts.onTrigger();\n            e.preventDefault();\n        });\n        this.onkeydown(this._domNode, (e) => {\n            var _a, _b;\n            if (e.equals(10 /* KeyCode.Space */) || e.equals(3 /* KeyCode.Enter */)) {\n                this._opts.onTrigger();\n                e.preventDefault();\n                return;\n            }\n            (_b = (_a = this._opts).onKeyDown) === null || _b === void 0 ? void 0 : _b.call(_a, e);\n        });\n    }\n    get domNode() {\n        return this._domNode;\n    }\n    isEnabled() {\n        return (this._domNode.tabIndex >= 0);\n    }\n    focus() {\n        this._domNode.focus();\n    }\n    setEnabled(enabled) {\n        this._domNode.classList.toggle('disabled', !enabled);\n        this._domNode.setAttribute('aria-disabled', String(!enabled));\n        this._domNode.tabIndex = enabled ? 0 : -1;\n    }\n    setExpanded(expanded) {\n        this._domNode.setAttribute('aria-expanded', String(!!expanded));\n        if (expanded) {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findExpandedIcon));\n        }\n        else {\n            this._domNode.classList.remove(...ThemeIcon.asClassNameArray(findExpandedIcon));\n            this._domNode.classList.add(...ThemeIcon.asClassNameArray(findCollapsedIcon));\n        }\n    }\n}\n// theming\nregisterThemingParticipant((theme, collector) => {\n    const addBackgroundColorRule = (selector, color) => {\n        if (color) {\n            collector.addRule(`.monaco-editor ${selector} { background-color: ${color}; }`);\n        }\n    };\n    addBackgroundColorRule('.findMatch', theme.getColor(editorFindMatchHighlight));\n    addBackgroundColorRule('.currentFindMatch', theme.getColor(editorFindMatch));\n    addBackgroundColorRule('.findScope', theme.getColor(editorFindRangeHighlight));\n    const widgetBackground = theme.getColor(editorWidgetBackground);\n    addBackgroundColorRule('.find-widget', widgetBackground);\n    const widgetShadowColor = theme.getColor(widgetShadow);\n    if (widgetShadowColor) {\n        collector.addRule(`.monaco-editor .find-widget { box-shadow: 0 0 8px 2px ${widgetShadowColor}; }`);\n    }\n    const widgetBorderColor = theme.getColor(widgetBorder);\n    if (widgetBorderColor) {\n        collector.addRule(`.monaco-editor .find-widget { border-left: 1px solid ${widgetBorderColor}; border-right: 1px solid ${widgetBorderColor}; border-bottom: 1px solid ${widgetBorderColor}; }`);\n    }\n    const findMatchHighlightBorder = theme.getColor(editorFindMatchHighlightBorder);\n    if (findMatchHighlightBorder) {\n        collector.addRule(`.monaco-editor .findMatch { border: 1px ${isHighContrast(theme.type) ? 'dotted' : 'solid'} ${findMatchHighlightBorder}; box-sizing: border-box; }`);\n    }\n    const findMatchBorder = theme.getColor(editorFindMatchBorder);\n    if (findMatchBorder) {\n        collector.addRule(`.monaco-editor .currentFindMatch { border: 2px solid ${findMatchBorder}; padding: 1px; box-sizing: border-box; }`);\n    }\n    const findRangeHighlightBorder = theme.getColor(editorFindRangeHighlightBorder);\n    if (findRangeHighlightBorder) {\n        collector.addRule(`.monaco-editor .findScope { border: 1px ${isHighContrast(theme.type) ? 'dashed' : 'solid'} ${findRangeHighlightBorder}; }`);\n    }\n    const hcBorder = theme.getColor(contrastBorder);\n    if (hcBorder) {\n        collector.addRule(`.monaco-editor .find-widget { border: 1px solid ${hcBorder}; }`);\n    }\n    const foreground = theme.getColor(editorWidgetForeground);\n    if (foreground) {\n        collector.addRule(`.monaco-editor .find-widget { color: ${foreground}; }`);\n    }\n    const error = theme.getColor(errorForeground);\n    if (error) {\n        collector.addRule(`.monaco-editor .find-widget.no-results .matchesCount { color: ${error}; }`);\n    }\n    const resizeBorderBackground = theme.getColor(editorWidgetResizeBorder);\n    if (resizeBorderBackground) {\n        collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${resizeBorderBackground}; }`);\n    }\n    else {\n        const border = theme.getColor(editorWidgetBorder);\n        if (border) {\n            collector.addRule(`.monaco-editor .find-widget .monaco-sash { background-color: ${border}; }`);\n        }\n    }\n    // Action bars\n    const toolbarHoverBackgroundColor = theme.getColor(toolbarHoverBackground);\n    if (toolbarHoverBackgroundColor) {\n        collector.addRule(`\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ${toolbarHoverBackgroundColor} !important;\n\t\t}\n\t`);\n    }\n    // This rule is used to override the outline color for synthetic-focus find input.\n    const focusOutline = theme.getColor(focusBorder);\n    if (focusOutline) {\n        collector.addRule(`.monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ${focusOutline}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Delayer } from '../../../../base/common/async.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport { EditorAction, EditorCommand, MultiEditorAction, registerEditorAction, registerEditorCommand, registerEditorContribution, registerMultiEditorAction } from '../../../browser/editorExtensions.js';\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { CONTEXT_FIND_INPUT_FOCUSED, CONTEXT_FIND_WIDGET_VISIBLE, CONTEXT_REPLACE_INPUT_FOCUSED, FindModelBoundToEditorModel, FIND_IDS, ToggleCaseSensitiveKeybinding, TogglePreserveCaseKeybinding, ToggleRegexKeybinding, ToggleSearchScopeKeybinding, ToggleWholeWordKeybinding } from './findModel.js';\nimport { FindOptionsWidget } from './findOptionsWidget.js';\nimport { FindReplaceState } from './findState.js';\nimport { FindWidget } from './findWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IContextViewService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { IThemeService, themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nconst SEARCH_STRING_MAX_LENGTH = 524288;\nexport function getSelectionSearchString(editor, seedSearchStringFromSelection = 'single', seedSearchStringFromNonEmptySelection = false) {\n    if (!editor.hasModel()) {\n        return null;\n    }\n    const selection = editor.getSelection();\n    // if selection spans multiple lines, default search string to empty\n    if ((seedSearchStringFromSelection === 'single' && selection.startLineNumber === selection.endLineNumber)\n        || seedSearchStringFromSelection === 'multiple') {\n        if (selection.isEmpty()) {\n            const wordAtPosition = editor.getConfiguredWordAtPosition(selection.getStartPosition());\n            if (wordAtPosition && (false === seedSearchStringFromNonEmptySelection)) {\n                return wordAtPosition.word;\n            }\n        }\n        else {\n            if (editor.getModel().getValueLengthInRange(selection) < SEARCH_STRING_MAX_LENGTH) {\n                return editor.getModel().getValueInRange(selection);\n            }\n        }\n    }\n    return null;\n}\nlet CommonFindController = class CommonFindController extends Disposable {\n    get editor() {\n        return this._editor;\n    }\n    static get(editor) {\n        return editor.getContribution(CommonFindController.ID);\n    }\n    constructor(editor, contextKeyService, storageService, clipboardService) {\n        super();\n        this._editor = editor;\n        this._findWidgetVisible = CONTEXT_FIND_WIDGET_VISIBLE.bindTo(contextKeyService);\n        this._contextKeyService = contextKeyService;\n        this._storageService = storageService;\n        this._clipboardService = clipboardService;\n        this._updateHistoryDelayer = new Delayer(500);\n        this._state = this._register(new FindReplaceState());\n        this.loadQueryState();\n        this._register(this._state.onFindReplaceStateChange((e) => this._onStateChanged(e)));\n        this._model = null;\n        this._register(this._editor.onDidChangeModel(() => {\n            const shouldRestartFind = (this._editor.getModel() && this._state.isRevealed);\n            this.disposeModel();\n            this._state.change({\n                searchScope: null,\n                matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, false),\n                wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, false),\n                isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, false),\n                preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, false)\n            }, false);\n            if (shouldRestartFind) {\n                this._start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'none',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: false,\n                    updateSearchScope: false,\n                    loop: this._editor.getOption(38 /* EditorOption.find */).loop\n                });\n            }\n        }));\n    }\n    dispose() {\n        this.disposeModel();\n        super.dispose();\n    }\n    disposeModel() {\n        if (this._model) {\n            this._model.dispose();\n            this._model = null;\n        }\n    }\n    _onStateChanged(e) {\n        this.saveQueryState(e);\n        if (e.isRevealed) {\n            if (this._state.isRevealed) {\n                this._findWidgetVisible.set(true);\n            }\n            else {\n                this._findWidgetVisible.reset();\n                this.disposeModel();\n            }\n        }\n        if (e.searchString) {\n            this.setGlobalBufferTerm(this._state.searchString);\n        }\n    }\n    saveQueryState(e) {\n        if (e.isRegex) {\n            this._storageService.store('editor.isRegex', this._state.actualIsRegex, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n        if (e.wholeWord) {\n            this._storageService.store('editor.wholeWord', this._state.actualWholeWord, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n        if (e.matchCase) {\n            this._storageService.store('editor.matchCase', this._state.actualMatchCase, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n        if (e.preserveCase) {\n            this._storageService.store('editor.preserveCase', this._state.actualPreserveCase, 1 /* StorageScope.WORKSPACE */, 0 /* StorageTarget.USER */);\n        }\n    }\n    loadQueryState() {\n        this._state.change({\n            matchCase: this._storageService.getBoolean('editor.matchCase', 1 /* StorageScope.WORKSPACE */, this._state.matchCase),\n            wholeWord: this._storageService.getBoolean('editor.wholeWord', 1 /* StorageScope.WORKSPACE */, this._state.wholeWord),\n            isRegex: this._storageService.getBoolean('editor.isRegex', 1 /* StorageScope.WORKSPACE */, this._state.isRegex),\n            preserveCase: this._storageService.getBoolean('editor.preserveCase', 1 /* StorageScope.WORKSPACE */, this._state.preserveCase)\n        }, false);\n    }\n    isFindInputFocused() {\n        return !!CONTEXT_FIND_INPUT_FOCUSED.getValue(this._contextKeyService);\n    }\n    getState() {\n        return this._state;\n    }\n    closeFindWidget() {\n        this._state.change({\n            isRevealed: false,\n            searchScope: null\n        }, false);\n        this._editor.focus();\n    }\n    toggleCaseSensitive() {\n        this._state.change({ matchCase: !this._state.matchCase }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleWholeWords() {\n        this._state.change({ wholeWord: !this._state.wholeWord }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleRegex() {\n        this._state.change({ isRegex: !this._state.isRegex }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    togglePreserveCase() {\n        this._state.change({ preserveCase: !this._state.preserveCase }, false);\n        if (!this._state.isRevealed) {\n            this.highlightFindOptions();\n        }\n    }\n    toggleSearchScope() {\n        if (this._state.searchScope) {\n            this._state.change({ searchScope: null }, true);\n        }\n        else {\n            if (this._editor.hasModel()) {\n                const selections = this._editor.getSelections();\n                selections.map(selection => {\n                    if (selection.endColumn === 1 && selection.endLineNumber > selection.startLineNumber) {\n                        selection = selection.setEndPosition(selection.endLineNumber - 1, this._editor.getModel().getLineMaxColumn(selection.endLineNumber - 1));\n                    }\n                    if (!selection.isEmpty()) {\n                        return selection;\n                    }\n                    return null;\n                }).filter(element => !!element);\n                if (selections.length) {\n                    this._state.change({ searchScope: selections }, true);\n                }\n            }\n        }\n    }\n    setSearchString(searchString) {\n        if (this._state.isRegex) {\n            searchString = strings.escapeRegExpCharacters(searchString);\n        }\n        this._state.change({ searchString: searchString }, false);\n    }\n    highlightFindOptions(ignoreWhenVisible = false) {\n        // overwritten in subclass\n    }\n    _start(opts, newState) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.disposeModel();\n            if (!this._editor.hasModel()) {\n                // cannot do anything with an editor that doesn't have a model...\n                return;\n            }\n            const stateChanges = Object.assign(Object.assign({}, newState), { isRevealed: true });\n            if (opts.seedSearchStringFromSelection === 'single') {\n                const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection, opts.seedSearchStringFromNonEmptySelection);\n                if (selectionSearchString) {\n                    if (this._state.isRegex) {\n                        stateChanges.searchString = strings.escapeRegExpCharacters(selectionSearchString);\n                    }\n                    else {\n                        stateChanges.searchString = selectionSearchString;\n                    }\n                }\n            }\n            else if (opts.seedSearchStringFromSelection === 'multiple' && !opts.updateSearchScope) {\n                const selectionSearchString = getSelectionSearchString(this._editor, opts.seedSearchStringFromSelection);\n                if (selectionSearchString) {\n                    stateChanges.searchString = selectionSearchString;\n                }\n            }\n            if (!stateChanges.searchString && opts.seedSearchStringFromGlobalClipboard) {\n                const selectionSearchString = yield this.getGlobalBufferTerm();\n                if (!this._editor.hasModel()) {\n                    // the editor has lost its model in the meantime\n                    return;\n                }\n                if (selectionSearchString) {\n                    stateChanges.searchString = selectionSearchString;\n                }\n            }\n            // Overwrite isReplaceRevealed\n            if (opts.forceRevealReplace || stateChanges.isReplaceRevealed) {\n                stateChanges.isReplaceRevealed = true;\n            }\n            else if (!this._findWidgetVisible.get()) {\n                stateChanges.isReplaceRevealed = false;\n            }\n            if (opts.updateSearchScope) {\n                const currentSelections = this._editor.getSelections();\n                if (currentSelections.some(selection => !selection.isEmpty())) {\n                    stateChanges.searchScope = currentSelections;\n                }\n            }\n            stateChanges.loop = opts.loop;\n            this._state.change(stateChanges, false);\n            if (!this._model) {\n                this._model = new FindModelBoundToEditorModel(this._editor, this._state);\n            }\n        });\n    }\n    start(opts, newState) {\n        return this._start(opts, newState);\n    }\n    moveToNextMatch() {\n        if (this._model) {\n            this._model.moveToNextMatch();\n            return true;\n        }\n        return false;\n    }\n    moveToPrevMatch() {\n        if (this._model) {\n            this._model.moveToPrevMatch();\n            return true;\n        }\n        return false;\n    }\n    goToMatch(index) {\n        if (this._model) {\n            this._model.moveToMatch(index);\n            return true;\n        }\n        return false;\n    }\n    replace() {\n        if (this._model) {\n            this._model.replace();\n            return true;\n        }\n        return false;\n    }\n    replaceAll() {\n        if (this._model) {\n            this._model.replaceAll();\n            return true;\n        }\n        return false;\n    }\n    selectAllMatches() {\n        if (this._model) {\n            this._model.selectAllMatches();\n            this._editor.focus();\n            return true;\n        }\n        return false;\n    }\n    getGlobalBufferTerm() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._editor.getOption(38 /* EditorOption.find */).globalFindClipboard\n                && this._editor.hasModel()\n                && !this._editor.getModel().isTooLargeForSyncing()) {\n                return this._clipboardService.readFindText();\n            }\n            return '';\n        });\n    }\n    setGlobalBufferTerm(text) {\n        if (this._editor.getOption(38 /* EditorOption.find */).globalFindClipboard\n            && this._editor.hasModel()\n            && !this._editor.getModel().isTooLargeForSyncing()) {\n            // intentionally not awaited\n            this._clipboardService.writeFindText(text);\n        }\n    }\n};\nCommonFindController.ID = 'editor.contrib.findController';\nCommonFindController = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IStorageService),\n    __param(3, IClipboardService)\n], CommonFindController);\nexport { CommonFindController };\nlet FindController = class FindController extends CommonFindController {\n    constructor(editor, _contextViewService, _contextKeyService, _keybindingService, _themeService, _notificationService, _storageService, clipboardService) {\n        super(editor, _contextKeyService, _storageService, clipboardService);\n        this._contextViewService = _contextViewService;\n        this._keybindingService = _keybindingService;\n        this._themeService = _themeService;\n        this._notificationService = _notificationService;\n        this._widget = null;\n        this._findOptionsWidget = null;\n    }\n    _start(opts, newState) {\n        const _super = Object.create(null, {\n            _start: { get: () => super._start }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._widget) {\n                this._createFindWidget();\n            }\n            const selection = this._editor.getSelection();\n            let updateSearchScope = false;\n            switch (this._editor.getOption(38 /* EditorOption.find */).autoFindInSelection) {\n                case 'always':\n                    updateSearchScope = true;\n                    break;\n                case 'never':\n                    updateSearchScope = false;\n                    break;\n                case 'multiline': {\n                    const isSelectionMultipleLine = !!selection && selection.startLineNumber !== selection.endLineNumber;\n                    updateSearchScope = isSelectionMultipleLine;\n                    break;\n                }\n                default:\n                    break;\n            }\n            opts.updateSearchScope = opts.updateSearchScope || updateSearchScope;\n            yield _super._start.call(this, opts, newState);\n            if (this._widget) {\n                if (opts.shouldFocus === 2 /* FindStartFocusAction.FocusReplaceInput */) {\n                    this._widget.focusReplaceInput();\n                }\n                else if (opts.shouldFocus === 1 /* FindStartFocusAction.FocusFindInput */) {\n                    this._widget.focusFindInput();\n                }\n            }\n        });\n    }\n    highlightFindOptions(ignoreWhenVisible = false) {\n        if (!this._widget) {\n            this._createFindWidget();\n        }\n        if (this._state.isRevealed && !ignoreWhenVisible) {\n            this._widget.highlightFindOptions();\n        }\n        else {\n            this._findOptionsWidget.highlightFindOptions();\n        }\n    }\n    _createFindWidget() {\n        this._widget = this._register(new FindWidget(this._editor, this, this._state, this._contextViewService, this._keybindingService, this._contextKeyService, this._themeService, this._storageService, this._notificationService));\n        this._findOptionsWidget = this._register(new FindOptionsWidget(this._editor, this._state, this._keybindingService));\n    }\n};\nFindController = __decorate([\n    __param(1, IContextViewService),\n    __param(2, IContextKeyService),\n    __param(3, IKeybindingService),\n    __param(4, IThemeService),\n    __param(5, INotificationService),\n    __param(6, IStorageService),\n    __param(7, IClipboardService)\n], FindController);\nexport { FindController };\nexport const StartFindAction = registerMultiEditorAction(new MultiEditorAction({\n    id: FIND_IDS.StartFindAction,\n    label: nls.localize('startFindAction', \"Find\"),\n    alias: 'Find',\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n    kbOpts: {\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 36 /* KeyCode.KeyF */,\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    },\n    menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '3_find',\n        title: nls.localize({ key: 'miFind', comment: ['&& denotes a mnemonic'] }, \"&&Find\"),\n        order: 1\n    }\n}));\nStartFindAction.addImplementation(0, (accessor, editor, args) => {\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n        return false;\n    }\n    return controller.start({\n        forceRevealReplace: false,\n        seedSearchStringFromSelection: editor.getOption(38 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(38 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: editor.getOption(38 /* EditorOption.find */).globalFindClipboard,\n        shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(38 /* EditorOption.find */).loop\n    });\n});\nconst findArgDescription = {\n    description: 'Open a new In-Editor Find Widget.',\n    args: [{\n            name: 'Open a new In-Editor Find Widget args',\n            schema: {\n                properties: {\n                    searchString: { type: 'string' },\n                    replaceString: { type: 'string' },\n                    regex: { type: 'boolean' },\n                    regexOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.isRegexOverride', 'Overrides \"Use Regular Expression\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    wholeWord: { type: 'boolean' },\n                    wholeWordOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.wholeWordOverride', 'Overrides \"Match Whole Word\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    matchCase: { type: 'boolean' },\n                    matchCaseOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.matchCaseOverride', 'Overrides \"Math Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    preserveCase: { type: 'boolean' },\n                    preserveCaseOverride: {\n                        type: 'number',\n                        description: nls.localize('actions.find.preserveCaseOverride', 'Overrides \"Preserve Case\" flag.\\nThe flag will not be saved for the future.\\n0: Do Nothing\\n1: True\\n2: False')\n                    },\n                    findInSelection: { type: 'boolean' },\n                }\n            }\n        }]\n};\nexport class StartFindWithArgsAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.StartFindWithArgs,\n            label: nls.localize('startFindWithArgsAction', \"Find With Arguments\"),\n            alias: 'Find With Arguments',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 0,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            description: findArgDescription\n        });\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller) {\n                const newState = args ? {\n                    searchString: args.searchString,\n                    replaceString: args.replaceString,\n                    isReplaceRevealed: args.replaceString !== undefined,\n                    isRegex: args.isRegex,\n                    // isRegexOverride: args.regexOverride,\n                    wholeWord: args.matchWholeWord,\n                    // wholeWordOverride: args.wholeWordOverride,\n                    matchCase: args.isCaseSensitive,\n                    // matchCaseOverride: args.matchCaseOverride,\n                    preserveCase: args.preserveCase,\n                    // preserveCaseOverride: args.preserveCaseOverride,\n                } : {};\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(38 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: editor.getOption(38 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n                    seedSearchStringFromGlobalClipboard: true,\n                    shouldFocus: 1 /* FindStartFocusAction.FocusFindInput */,\n                    shouldAnimate: true,\n                    updateSearchScope: (args === null || args === void 0 ? void 0 : args.findInSelection) || false,\n                    loop: editor.getOption(38 /* EditorOption.find */).loop\n                }, newState);\n                controller.setGlobalBufferTerm(controller.getState().searchString);\n            }\n        });\n    }\n}\nexport class StartFindWithSelectionAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.StartFindWithSelection,\n            label: nls.localize('startFindWithSelectionAction', \"Find With Selection\"),\n            alias: 'Find With Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: null,\n                primary: 0,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 35 /* KeyCode.KeyE */,\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'multiple',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(38 /* EditorOption.find */).loop\n                });\n                controller.setGlobalBufferTerm(controller.getState().searchString);\n            }\n        });\n    }\n}\nexport class MatchFindAction extends EditorAction {\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (controller && !this._run(controller)) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: (controller.getState().searchString.length === 0) && editor.getOption(38 /* EditorOption.find */).seedSearchStringFromSelection !== 'never' ? 'single' : 'none',\n                    seedSearchStringFromNonEmptySelection: editor.getOption(38 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n                    seedSearchStringFromGlobalClipboard: true,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(38 /* EditorOption.find */).loop\n                });\n                this._run(controller);\n            }\n        });\n    }\n}\nexport class NextMatchFindAction extends MatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.NextMatchFindAction,\n            label: nls.localize('findNextMatchAction', \"Find Next\"),\n            alias: 'Find Next',\n            precondition: undefined,\n            kbOpts: [{\n                    kbExpr: EditorContextKeys.focus,\n                    primary: 61 /* KeyCode.F3 */,\n                    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 37 /* KeyCode.KeyG */, secondary: [61 /* KeyCode.F3 */] },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }, {\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n                    primary: 3 /* KeyCode.Enter */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }]\n        });\n    }\n    _run(controller) {\n        const result = controller.moveToNextMatch();\n        if (result) {\n            controller.editor.pushUndoStop();\n            return true;\n        }\n        return false;\n    }\n}\nexport class PreviousMatchFindAction extends MatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.PreviousMatchFindAction,\n            label: nls.localize('findPreviousMatchAction', \"Find Previous\"),\n            alias: 'Find Previous',\n            precondition: undefined,\n            kbOpts: [{\n                    kbExpr: EditorContextKeys.focus,\n                    primary: 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\n                    mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 37 /* KeyCode.KeyG */, secondary: [1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */] },\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }, {\n                    kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_FIND_INPUT_FOCUSED),\n                    primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */\n                }\n            ]\n        });\n    }\n    _run(controller) {\n        return controller.moveToPrevMatch();\n    }\n}\nexport class MoveToMatchFindAction extends EditorAction {\n    constructor() {\n        super({\n            id: FIND_IDS.GoToMatchFindAction,\n            label: nls.localize('findMatchAction.goToMatch', \"Go to Match...\"),\n            alias: 'Go to Match...',\n            precondition: CONTEXT_FIND_WIDGET_VISIBLE\n        });\n        this._highlightDecorations = [];\n    }\n    run(accessor, editor, args) {\n        const controller = CommonFindController.get(editor);\n        if (!controller) {\n            return;\n        }\n        const quickInputService = accessor.get(IQuickInputService);\n        const inputBox = quickInputService.createInputBox();\n        inputBox.placeholder = nls.localize('findMatchAction.inputPlaceHolder', \"Type a number to go to a specific match (between 1 and {0})\", controller.getState().matchesCount);\n        const updatePickerAndEditor = (value) => {\n            const index = parseInt(value);\n            if (!isNaN(index) && index > 0 && index <= controller.getState().matchesCount) {\n                // valid\n                inputBox.validationMessage = undefined;\n                controller.goToMatch(index - 1);\n                const currentMatch = controller.getState().currentMatch;\n                if (currentMatch) {\n                    this.addDecorations(editor, currentMatch);\n                }\n            }\n            else {\n                inputBox.validationMessage = nls.localize('findMatchAction.inputValidationMessage', \"Please type a number between 1 and {0}\", controller.getState().matchesCount);\n                this.clearDecorations(editor);\n            }\n        };\n        inputBox.onDidChangeValue(value => {\n            updatePickerAndEditor(value);\n        });\n        inputBox.onDidAccept(() => {\n            const index = parseInt(inputBox.value);\n            if (!isNaN(index) && index > 0 && index <= controller.getState().matchesCount) {\n                controller.goToMatch(index - 1);\n                inputBox.hide();\n            }\n            else {\n                inputBox.validationMessage = nls.localize('findMatchAction.inputValidationMessage', \"Please type a number between 1 and {0}\", controller.getState().matchesCount);\n            }\n        });\n        inputBox.onDidHide(() => {\n            this.clearDecorations(editor);\n            inputBox.dispose();\n        });\n        inputBox.show();\n    }\n    clearDecorations(editor) {\n        editor.changeDecorations(changeAccessor => {\n            this._highlightDecorations = changeAccessor.deltaDecorations(this._highlightDecorations, []);\n        });\n    }\n    addDecorations(editor, range) {\n        editor.changeDecorations(changeAccessor => {\n            this._highlightDecorations = changeAccessor.deltaDecorations(this._highlightDecorations, [\n                {\n                    range,\n                    options: {\n                        description: 'find-match-quick-access-range-highlight',\n                        className: 'rangeHighlight',\n                        isWholeLine: true\n                    }\n                },\n                {\n                    range,\n                    options: {\n                        description: 'find-match-quick-access-range-highlight-overview',\n                        overviewRuler: {\n                            color: themeColorFromId(overviewRulerRangeHighlight),\n                            position: OverviewRulerLane.Full\n                        }\n                    }\n                }\n            ]);\n        });\n    }\n}\nexport class SelectionMatchFindAction extends EditorAction {\n    run(accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = CommonFindController.get(editor);\n            if (!controller) {\n                return;\n            }\n            const selectionSearchString = getSelectionSearchString(editor, 'single', false);\n            if (selectionSearchString) {\n                controller.setSearchString(selectionSearchString);\n            }\n            if (!this._run(controller)) {\n                yield controller.start({\n                    forceRevealReplace: false,\n                    seedSearchStringFromSelection: 'none',\n                    seedSearchStringFromNonEmptySelection: false,\n                    seedSearchStringFromGlobalClipboard: false,\n                    shouldFocus: 0 /* FindStartFocusAction.NoFocusChange */,\n                    shouldAnimate: true,\n                    updateSearchScope: false,\n                    loop: editor.getOption(38 /* EditorOption.find */).loop\n                });\n                this._run(controller);\n            }\n        });\n    }\n}\nexport class NextSelectionMatchFindAction extends SelectionMatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.NextSelectionMatchFindAction,\n            label: nls.localize('nextSelectionMatchFindAction', \"Find Next Selection\"),\n            alias: 'Find Next Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 61 /* KeyCode.F3 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(controller) {\n        return controller.moveToNextMatch();\n    }\n}\nexport class PreviousSelectionMatchFindAction extends SelectionMatchFindAction {\n    constructor() {\n        super({\n            id: FIND_IDS.PreviousSelectionMatchFindAction,\n            label: nls.localize('previousSelectionMatchFindAction', \"Find Previous Selection\"),\n            alias: 'Find Previous Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 61 /* KeyCode.F3 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(controller) {\n        return controller.moveToPrevMatch();\n    }\n}\nexport const StartFindReplaceAction = registerMultiEditorAction(new MultiEditorAction({\n    id: FIND_IDS.StartFindReplaceAction,\n    label: nls.localize('startReplace', \"Replace\"),\n    alias: 'Replace',\n    precondition: ContextKeyExpr.or(EditorContextKeys.focus, ContextKeyExpr.has('editorIsOpen')),\n    kbOpts: {\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 38 /* KeyCode.KeyH */,\n        mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 36 /* KeyCode.KeyF */ },\n        weight: 100 /* KeybindingWeight.EditorContrib */\n    },\n    menuOpts: {\n        menuId: MenuId.MenubarEditMenu,\n        group: '3_find',\n        title: nls.localize({ key: 'miReplace', comment: ['&& denotes a mnemonic'] }, \"&&Replace\"),\n        order: 2\n    }\n}));\nStartFindReplaceAction.addImplementation(0, (accessor, editor, args) => {\n    if (!editor.hasModel() || editor.getOption(86 /* EditorOption.readOnly */)) {\n        return false;\n    }\n    const controller = CommonFindController.get(editor);\n    if (!controller) {\n        return false;\n    }\n    const currentSelection = editor.getSelection();\n    const findInputFocused = controller.isFindInputFocused();\n    // we only seed search string from selection when the current selection is single line and not empty,\n    // + the find input is not focused\n    const seedSearchStringFromSelection = !currentSelection.isEmpty()\n        && currentSelection.startLineNumber === currentSelection.endLineNumber\n        && (editor.getOption(38 /* EditorOption.find */).seedSearchStringFromSelection !== 'never')\n        && !findInputFocused;\n    /*\n    * if the existing search string in find widget is empty and we don't seed search string from selection, it means the Find Input is still empty, so we should focus the Find Input instead of Replace Input.\n\n    * findInputFocused true -> seedSearchStringFromSelection false, FocusReplaceInput\n    * findInputFocused false, seedSearchStringFromSelection true FocusReplaceInput\n    * findInputFocused false seedSearchStringFromSelection false FocusFindInput\n    */\n    const shouldFocus = (findInputFocused || seedSearchStringFromSelection) ?\n        2 /* FindStartFocusAction.FocusReplaceInput */ : 1 /* FindStartFocusAction.FocusFindInput */;\n    return controller.start({\n        forceRevealReplace: true,\n        seedSearchStringFromSelection: seedSearchStringFromSelection ? 'single' : 'none',\n        seedSearchStringFromNonEmptySelection: editor.getOption(38 /* EditorOption.find */).seedSearchStringFromSelection === 'selection',\n        seedSearchStringFromGlobalClipboard: editor.getOption(38 /* EditorOption.find */).seedSearchStringFromSelection !== 'never',\n        shouldFocus: shouldFocus,\n        shouldAnimate: true,\n        updateSearchScope: false,\n        loop: editor.getOption(38 /* EditorOption.find */).loop\n    });\n});\nregisterEditorContribution(CommonFindController.ID, FindController, 0 /* EditorContributionInstantiation.Eager */); // eager because it uses `saveViewState`/`restoreViewState`\nregisterEditorAction(StartFindWithArgsAction);\nregisterEditorAction(StartFindWithSelectionAction);\nregisterEditorAction(NextMatchFindAction);\nregisterEditorAction(PreviousMatchFindAction);\nregisterEditorAction(MoveToMatchFindAction);\nregisterEditorAction(NextSelectionMatchFindAction);\nregisterEditorAction(PreviousSelectionMatchFindAction);\nconst FindCommand = EditorCommand.bindToContribution(CommonFindController.get);\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.CloseFindWidgetCommand,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.closeFindWidget(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleCaseSensitiveCommand,\n    precondition: undefined,\n    handler: x => x.toggleCaseSensitive(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleCaseSensitiveKeybinding.primary,\n        mac: ToggleCaseSensitiveKeybinding.mac,\n        win: ToggleCaseSensitiveKeybinding.win,\n        linux: ToggleCaseSensitiveKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleWholeWordCommand,\n    precondition: undefined,\n    handler: x => x.toggleWholeWords(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleWholeWordKeybinding.primary,\n        mac: ToggleWholeWordKeybinding.mac,\n        win: ToggleWholeWordKeybinding.win,\n        linux: ToggleWholeWordKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleRegexCommand,\n    precondition: undefined,\n    handler: x => x.toggleRegex(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleRegexKeybinding.primary,\n        mac: ToggleRegexKeybinding.mac,\n        win: ToggleRegexKeybinding.win,\n        linux: ToggleRegexKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ToggleSearchScopeCommand,\n    precondition: undefined,\n    handler: x => x.toggleSearchScope(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: ToggleSearchScopeKeybinding.primary,\n        mac: ToggleSearchScopeKeybinding.mac,\n        win: ToggleSearchScopeKeybinding.win,\n        linux: ToggleSearchScopeKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.TogglePreserveCaseCommand,\n    precondition: undefined,\n    handler: x => x.togglePreserveCase(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: TogglePreserveCaseKeybinding.primary,\n        mac: TogglePreserveCaseKeybinding.mac,\n        win: TogglePreserveCaseKeybinding.win,\n        linux: TogglePreserveCaseKeybinding.linux\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceOneAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replace(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 22 /* KeyCode.Digit1 */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceOneAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replace(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n        primary: 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceAllAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replaceAll(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.ReplaceAllAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.replaceAll(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, CONTEXT_REPLACE_INPUT_FOCUSED),\n        primary: undefined,\n        mac: {\n            primary: 2048 /* KeyMod.CtrlCmd */ | 3 /* KeyCode.Enter */,\n        }\n    }\n}));\nregisterEditorCommand(new FindCommand({\n    id: FIND_IDS.SelectAllMatchesAction,\n    precondition: CONTEXT_FIND_WIDGET_VISIBLE,\n    handler: x => x.selectAllMatches(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 5,\n        kbExpr: EditorContextKeys.focus,\n        primary: 512 /* KeyMod.Alt */ | 3 /* KeyCode.Enter */\n    }\n}));\n"],"names":["DragAndDropCommand","selection","targetPosition","copy","_classCallCheck","this","targetSelection","_createClass","key","value","model","builder","text","getValueInRange","addEditOperation","Range","lineNumber","column","containsPosition","getEndPosition","equals","getStartPosition","Selection","endLineNumber","startLineNumber","endColumn","startColumn","helper","hasTriggerModifier","e","isMacintosh","altKey","ctrlKey","DragAndDropController","_Disposable","_inherits","_super","_createSuper","editor","_this","call","_editor","_dndDecorationIds","createDecorationsCollection","_register","onMouseDown","_onEditorMouseDown","onMouseUp","_onEditorMouseUp","onMouseDrag","_onEditorMouseDrag","onMouseDrop","_onEditorMouseDrop","onMouseDropCanceled","_onEditorMouseDropCanceled","onKeyDown","onEditorKeyDown","onKeyUp","onEditorKeyUp","onDidBlurEditorWidget","onEditorBlur","onDidBlurEditorText","_mouseDown","_modifierPressed","_dragSelection","_removeDecoration","getOption","updateOptions","mouseStyle","keyCode","TRIGGER_KEY_VALUE","mouseEvent","target","possibleSelections","getSelections","filter","position","length","event","showAt","_hitContent","_hitMargin","newCursorPosition","Position","newSelections","shiftKey","primarySelection","getSelection","selectionStartLineNumber","selectionStartColumn","map","setSelections","pushUndoStop","executeCommand","ID","set","range","options","_DECORATION_OPTIONS","revealPosition","clear","type","_get","_getPrototypeOf","prototype","Disposable","ModelDecorationOptions","register","description","className","registerEditorContribution","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","done","then","apply","CommandsRegistry","registerCommand","accessor","_len","arguments","args","Array","_key","_regeneratorRuntime","mark","_callee","resource","outlineService","modelService","reference","wrap","_context","prev","assertType","URI","isUri","get","IOutlineModelService","ITextModelService","createModelReference","sent","getOrCreate","object","textEditorModel","CancellationToken","None","abrupt","getTopLevelSymbols","dispose","finish","stop","__decorate","decorators","desc","d","c","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","TreeElement","_a","parent","children","delete","id","candidate","container","candidateId","concat","name","undefined","element","size","OutlineElement","_TreeElement","symbol","Map","OutlineGroup","_TreeElement2","_super2","label","order","_this2","OutlineModel","_TreeElement3","_super3","uri","_this3","_groups","_step","count","_iterator","_createForOfIteratorHelper","s","n","_step$value","_slicedToArray","err","f","_step2","group","Iterable","first","values","_iterator2","child","_step3","roots","_iterator3","push","_toConsumableArray","sort","a","b","compareRangesUsingStarts","bucket","_flattenDocumentSymbols","compare","registry","textModel","token","cts","CancellationTokenSource","provider","ordered","promises","index","findId","displayName","provideDocumentSymbols","_step4","_iterator4","info","_makeOutlineElement","onUnexpectedExternalError","empty","remove","listener","onDidChange","newProvider","cancel","all","isCancellationRequested","create","_compact","finally","res","_step5","_iterator5","childInfo","entries","overrideContainerLabel","_step6","_iterator6","entry","kind","tags","detail","containerName","selectionRange","createDecorator","OutlineModelService","_languageFeaturesService","debounces","_this4","_disposables","DisposableStore","_cache","LRUCache","_debounceInformation","for","documentSymbolProvider","min","add","onModelRemoved","data","source","now","_this5","versionId","getVersionId","promiseCnt","promise","Date","outlineModel","update","catch","_err","onCancellationRequested","ILanguageFeaturesService","ILanguageFeatureDebounceService","IModelService","registerSingleton","DropIntoEditorController","_bulkEditService","_progressService","workspaceContextService","onDropIntoEditor","documentOnDropEditProvider","DefaultOnDropProvider","dragEvent","_b","_callee2","initialModelVersion","ourDataTransfer","tokenSource","providers","providerEdit","snippet","combinedWorkspaceEdit","_context2","dataTransfer","hasModel","getModel","extractDataTransferData","EditorStateCancellationTokenSource","withProgress","location","delay","title","localize","cancellable","raceCancellation","edit","provideDocumentOnDropEdits","t0","insertText","SnippetParser","escape","edits","ResourceTextEdit","insertAsSnippet","additionalEdit","_callee3","textEditorDataTransfer","_context3","VSDataTransfer","toVSDataTransfer","addExternalEditorsDropData","IBulkEditService","IProgressService","IWorkspaceContextService","_workspaceContextService","_model","_position","_token","_callee4","urlListEntry","urlList","textEntry","_context4","Mimes","uriList","asString","getUriListInsertText","strUriList","uris","UriList","parse","root","getWorkspaceFolder","rel","relativePath","fsPath","join","IEditorCancellationTokens","ctxCancellableOperation","RawContextKey","_class","_tokens","WeakMap","removeFn","invokeWithinContext","bindTo","IContextKeyService","tokens","LinkedList","isEmpty","pop","EditorKeybindingCancellationTokenSource","_CancellationTokenSou","_unregister","_assertThisInitialized","registerEditorCommand","_EditorCommand","_class2","kbOpts","weight","primary","precondition","EditorCommand","EditorState","flags","modelVersionId","strings","toString","getPosition","scrollLeft","getScrollLeft","scrollTop","getScrollTop","other","state","equalsRange","_equals","_EditorKeybindingCanc","_listener","onDidChangeCursorPosition","onDidChangeCursorSelection","containsRange","onDidScrollChange","_","onDidChangeModel","onDidChangeModelContent","TextModelCancellationTokenSource","onDidChangeContent","FindDecorations","_decorations","_overviewRulerApproximateDecorations","_findScopeDecorationIds","_rangeHighlightDecorationId","_highlightedDecorationId","_startPosition","removeDecorations","_allDecorations","getDecorationRange","scopes","findScopeDecorationId","newStartPosition","setCurrentFindMatch","decorationId","indexOf","desiredRange","candidates","getDecorationsInRange","candidateOpts","_FIND_MATCH_DECORATION","_CURRENT_FIND_MATCH_DECORATION","_getDecorationIndex","nextMatch","newCurrentDecorationId","matchPosition","len","changeDecorations","changeAccessor","changeDecorationOptions","removeDecoration","rng","lineBeforeEnd","lineBeforeEndMaxColumn","getLineMaxColumn","addDecoration","_RANGE_HIGHLIGHT_DECORATION","findMatches","findScopes","findMatchesOptions","newOverviewRulerApproximateDecorations","_FIND_MATCH_NO_OVERVIEW_DECORATION","lineCount","getLineCount","approxPixelsPerLine","getLayoutInfo","height","mergeLinesDelta","Math","max","ceil","prevStartLineNumber","prevEndLineNumber","_FIND_MATCH_ONLY_OVERVIEW_DECORATION","newFindMatchesDecorations","deltaDecorations","forEach","findScope","_FIND_SCOPE_DECORATION","_result","stickiness","zIndex","showIfCollapsed","overviewRuler","color","themeColorFromId","overviewRulerFindMatchForeground","OverviewRulerLane","Center","minimap","minimapFindMatch","MinimapPosition","Inline","isWholeLine","ReplaceAllCommand","editorSelection","ranges","replaceStrings","_editorSelection","_ranges","_replaceStrings","_trackedEditorSelectionId","ops","o1","o2","resultOps","previousOp","plusRange","_i2","_resultOps","op","trackSelection","getTrackedSelection","StaticValueReplacePattern","staticValue","DynamicPiecesReplacePattern","pieces","ReplacePattern","_state","matches","preserveCase","buildReplaceStringWithCasePreserved","piece","match","_substitute","matchIndex","caseOps","repl","lenOps","opIdx","idx","slice","toUpperCase","toLowerCase","ReplacePiece","remainder","String","floor","ReplacePieceBuilder","_source","_lastCharIndex","_resultLen","_currentStaticPiece","toCharIndex","_emitStatic","substring","emitUnchanged","CONTEXT_FIND_WIDGET_VISIBLE","CONTEXT_FIND_INPUT_FOCUSED","toNegated","CONTEXT_REPLACE_INPUT_FOCUSED","ToggleCaseSensitiveKeybinding","mac","ToggleWholeWordKeybinding","ToggleRegexKeybinding","ToggleSearchScopeKeybinding","TogglePreserveCaseKeybinding","FIND_IDS","MATCHES_LIMIT","FindModelBoundToEditorModel","_toDispose","_isDisposed","_startSearchingTimer","TimeoutTimer","_updateDecorationsScheduler","RunOnceScheduler","research","reason","setStartPosition","_ignoreModelContentChanged","isFlush","reset","schedule","onFindReplaceStateChange","_onStateChanged","searchScope","searchString","isReplaceRevealed","isRegex","wholeWord","matchCase","isTooLargeForSyncing","setIfNotSet","moveCursor","newFindScope","isArray","getFindScopes","_findMatches","currentMatchesPosition","getCurrentMatchesPosition","matchAfterSelection","findFirstInSorted","changeMatchInfo","getCount","cursorMoveOnType","_moveToNextMatch","matchesCount","_hasMatches","getFindScope","revealRangeInCenterIfOutsideViewport","matchesPosition","setSelection","before","isUsingLineStops","isRecursed","canNavigateBack","prevMatchRange","matchBeforePosition","_prevSearchPosition","_setCurrentFindMatch","_cannotFind","searchRange","_getSearchRange","isBefore","_before","prevMatch","findPreviousMatch","_moveToPrevMatch","nextMatchRange","matchAfterPosition","after","canNavigateForward","_nextSearchPosition","_getNextMatch","captureMatches","forceMove","_after","findNextMatch","decorationRange","getDecorationRangeAt","_moveToMatch","replaceString","chCode","charCodeAt","nextChCode","emitStatic","emitMatchIndex","nextNextChCode","fromCharCode","finalize","parseReplaceString","fromStaticValue","replacePattern","_getReplacePattern","buildReplaceString","command","ReplaceCommand","_executeEditorCommand","limitResultCount","searchRanges","scope","_largeReplaceAll","_regularReplaceAll","searchData","SearchParams","parseSearchRequest","searchRegex","regex","multiline","mod","ignoreCase","global","RegExp","resultText","modelText","getValue","fullModelRange","getFullModelRange","hasReplacementPatterns","replace","ReplaceCommandThatPreservesSelection","m","selections","FindOptionsWidget","_Widget","keybindingService","_hideSoon","_hide","_isVisible","_keybindingService","_domNode","document","createElement","style","display","top","setAttribute","toggleStyles","inputActiveOptionBorder","asCssVariable","inputActiveOptionForeground","inputActiveOptionBackground","caseSensitive","CaseSensitiveToggle","assign","appendTitle","_keybindingLabelFor","isChecked","appendChild","domNode","onChange","change","checked","wholeWords","WholeWordsToggle","RegexToggle","addOverlayWidget","somethingChanged","isRevealed","_revealTemporarily","dom","addDisposableListener","EventType","MOUSE_LEAVE","_onMouseLeave","_onMouseOver","actionId","kb","lookupKeybinding","getLabel","removeOverlayWidget","preference","_show","Widget","effectiveOptionValue","override","FindReplaceState","_onFindReplaceStateChange","Emitter","_searchString","_replaceString","_isRevealed","_isReplaceRevealed","_isRegex","_isRegexOverride","_wholeWord","_wholeWordOverride","_matchCase","_matchCaseOverride","_preserveCase","_preserveCaseOverride","_searchScope","_matchesPosition","_matchesCount","_currentMatch","_loop","_isSearching","_filters","currentMatch","changeEvent","updateHistory","loop","isSearching","filters","fire","newState","oldEffectiveIsRegex","oldEffectiveWholeWords","oldEffectiveMatchCase","oldEffectivePreserveCase","every","newSearchScope","some","existingSearchScope","isRegexOverride","wholeWordOverride","matchCaseOverride","preserveCaseOverride","canNavigateInLoop","findSelectionIcon","registerIcon","Codicon","nls","findCollapsedIcon","chevronRight","findExpandedIcon","chevronDown","findReplaceIcon","findReplaceAllIcon","replaceAll","findPreviousMatchIcon","arrowUp","findNextMatchIcon","arrowDown","NLS_FIND_INPUT_LABEL","NLS_FIND_INPUT_PLACEHOLDER","NLS_PREVIOUS_MATCH_BTN_LABEL","NLS_NEXT_MATCH_BTN_LABEL","NLS_TOGGLE_SELECTION_FIND_TITLE","NLS_CLOSE_BTN_LABEL","NLS_REPLACE_INPUT_LABEL","NLS_REPLACE_INPUT_PLACEHOLDER","NLS_REPLACE_BTN_LABEL","NLS_REPLACE_ALL_BTN_LABEL","NLS_TOGGLE_REPLACE_MODE_BTN_LABEL","NLS_MATCHES_COUNT_LIMIT_TITLE","NLS_MATCHES_LOCATION","NLS_NO_RESULTS","FIND_WIDGET_INITIAL_WIDTH","MAX_MATCHES_COUNT_WIDTH","ctrlEnterReplaceAllWarningPromptedKey","ctrlKeyMod","platform","FindWidgetViewZone","afterLineNumber","heightInPx","suppressMouseDown","stopPropagationForMultiLineUpwards","textarea","isMultiline","selectionStart","stopPropagation","stopPropagationForMultiLineDownwards","selectionEnd","FindWidget","codeEditor","controller","contextViewProvider","contextKeyService","themeService","storageService","notificationService","_cachedHeight","_revealTimeouts","_codeEditor","_controller","_contextViewProvider","_contextKeyService","_storageService","_notificationService","_ctrlEnterReplaceAllWarningPrompted","getBoolean","_isReplaceVisible","_ignoreChangeEvent","_updateHistoryDelayer","Delayer","toDisposable","_buildDomNode","_updateButtons","_tryUpdateWidgetWidth","_findInput","inputBox","layout","onDidChangeConfiguration","hasChanged","updateAccessibilitySupport","supportLoop","addExtraSpaceOnTop","_viewZone","_showViewZone","_removeViewZone","_updateToggleSelectionFindButton","onDidFocusEditorWidget","globalBufferTerm","getGlobalBufferTerm","select","_findInputFocused","_findFocusTracker","trackFocus","inputElement","onDidFocus","_updateSearchScope","onDidBlur","_replaceInputFocused","_replaceFocusTracker","_replaceInput","_viewZoneId","scrollTopChanged","_layoutViewZone","setTimeout","setValue","_reveal","width","getTotalWidth","_tryUpdateHeight","setRegex","setWholeWords","setCaseSensitive","setPreserveCase","_toggleSelectionFind","showRedOutline","classList","toggle","_updateMatchesCount","_delayedUpdateHistory","trigger","_updateHistory","bind","onUnexpectedError","addToHistory","minWidth","firstChild","removeChild","createTextNode","alertFn","_getAriaLabel","clientWidth","ariaLabel","lineContent","getLineContent","isSelection","enable","disable","setEnabled","_closeBtn","findInputIsNonEmpty","_prevBtn","_nextBtn","_replaceBtn","_replaceAllBtn","_toggleReplaceBtn","setExpanded","canReplace","clearTimeout","autoFindInSelection","isSelectionMultipleLine","validate","layoutOverlayWidget","adjustEditorScrollTop","seedSearchStringFromSelection","getDomNode","editorCoords","getDomNodePagePosition","startCoords","getScrolledVisiblePosition","startLeft","left","startTop","leftOfFindWidget","getTopLeftOffset","endCoords","focusTheEditor","clearMessage","focus","targetScrollTop","viewZone","changeViewZones","_getHeight","addZone","setScrollTop","adjustScroll","newHeight","scrollAdjustment","layoutZone","removeZone","isInDOM","layoutInfo","contentWidth","contains","editorWidth","minimapWidth","collapsedFindWidget","reducedFindWidget","narrowFindWidget","_resized","maxWidth","findInputWidth","totalheight","totalHeight","highlightFindOptions","_this6","setEndPosition","middleButton","dispatchEvent","insertAtCursor","preventDefault","focusOnCaseSensitive","querySelector","store","_sash","_this7","ContextScopedFindInput","PART_WIDTH","placeholder","appendCaseSensitiveLabel","appendWholeWordsLabel","appendRegexLabel","validation","getRegex","content","message","flexibleHeight","flexibleWidth","flexibleMaxHeight","showCommonFindToggles","showHistoryHint","showHistoryKeybindingHint","inputBoxStyles","defaultInputBoxStyles","defaultToggleStyles","_onFindInputKeyDown","onDidOptionChange","getWholeWords","getCaseSensitive","onCaseSensitiveKeyDown","onRegexKeyDown","focusOnPreserve","onDidHeightChange","_onFindInputMouseDown","SimpleButton","icon","onTrigger","assertIsDefined","getAction","run","findPart","actionsContainer","Toggle","widgetClose","isEnabled","ContextScopedReplaceInput","appendPreserveCaseLabel","history","_onReplaceInputKeyDown","getPreserveCase","onPreserveCaseKeyDown","enabled","replacePart","replaceActionsContainer","_resizeSash","Sash","orientation","originalWidth","onDidStart","evt","startX","currentX","parseFloat","getComputedStyle","onDidReset","currentWidth","setFocusInputOnOptionClick","_Widget2","opts","_this8","_opts","ThemeIcon","asClassName","tabIndex","onclick","onkeydown","expanded","_this$_domNode$classL","_this$_domNode$classL2","_this$_domNode$classL3","_this$_domNode$classL4","asClassNameArray","registerThemingParticipant","theme","collector","addBackgroundColorRule","selector","addRule","getColor","editorFindMatchHighlight","editorFindMatch","editorFindRangeHighlight","editorWidgetBackground","widgetShadowColor","widgetShadow","widgetBorderColor","widgetBorder","findMatchHighlightBorder","editorFindMatchHighlightBorder","isHighContrast","findMatchBorder","editorFindMatchBorder","findRangeHighlightBorder","editorFindRangeHighlightBorder","hcBorder","contrastBorder","foreground","editorWidgetForeground","error","errorForeground","resizeBorderBackground","editorWidgetResizeBorder","border","editorWidgetBorder","toolbarHoverBackgroundColor","toolbarHoverBackground","focusOutline","focusBorder","getSelectionSearchString","seedSearchStringFromNonEmptySelection","wordAtPosition","getConfiguredWordAtPosition","word","getValueLengthInRange","CommonFindController","clipboardService","_findWidgetVisible","_clipboardService","loadQueryState","shouldRestartFind","disposeModel","_start","forceRevealReplace","seedSearchStringFromGlobalClipboard","shouldFocus","shouldAnimate","updateSearchScope","saveQueryState","setGlobalBufferTerm","actualIsRegex","actualWholeWord","actualMatchCase","actualPreserveCase","stateChanges","selectionSearchString","_selectionSearchString","_selectionSearchString2","currentSelections","moveToNextMatch","moveToPrevMatch","moveToMatch","selectAllMatches","globalFindClipboard","readFindText","writeFindText","getContribution","FindController","_CommonFindController","_contextViewService","_themeService","_widget","_findOptionsWidget","_createFindWidget","focusReplaceInput","focusFindInput","ignoreWhenVisible","IStorageService","IClipboardService","IContextViewService","IKeybindingService","IThemeService","INotificationService","registerMultiEditorAction","MultiEditorAction","alias","ContextKeyExpr","or","EditorContextKeys","has","kbExpr","menuOpts","menuId","MenuId","MenubarEditMenu","comment","addImplementation","start","findArgDescription","schema","properties","regexOverride","findInSelection","StartFindWithArgsAction","_EditorAction","_super4","matchWholeWord","isCaseSensitive","getState","EditorAction","StartFindWithSelectionAction","_EditorAction2","_super5","_callee5","_context5","MatchFindAction","_EditorAction3","_super6","_callee6","_context6","_run","NextMatchFindAction","_MatchFindAction","_super7","secondary","and","PreviousMatchFindAction","_MatchFindAction2","_super8","MoveToMatchFindAction","_EditorAction4","_super9","_highlightDecorations","IQuickInputService","createInputBox","onDidChangeValue","parseInt","isNaN","validationMessage","goToMatch","addDecorations","clearDecorations","updatePickerAndEditor","onDidAccept","hide","onDidHide","show","overviewRulerRangeHighlight","Full","SelectionMatchFindAction","_EditorAction5","_super10","_callee7","_context7","setSearchString","NextSelectionMatchFindAction","_SelectionMatchFindAc","_super11","PreviousSelectionMatchFindAction","_SelectionMatchFindAc2","_super12","currentSelection","findInputFocused","isFindInputFocused","registerEditorAction","FindCommand","bindToContribution","handler","x","closeFindWidget","not","toggleCaseSensitive","win","linux","toggleWholeWords","toggleRegex","toggleSearchScope","togglePreserveCase"],"sourceRoot":""}