{"version":3,"file":"static/js/monaco-editor-vendor.c7e29bf6.d54bd0b6.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/longLinesHelper/browser/longLinesHelper.js","../node_modules/monaco-editor/esm/vs/editor/contrib/message/browser/messageController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/multicursor/browser/multicursor.js","../node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/provideSignatureHelp.js","../node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHintsWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/parameterHints/browser/parameterHints.js","../node_modules/monaco-editor/esm/vs/editor/contrib/peekView/browser/peekView.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/commandsQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/editorNavigationQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoLineQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/quickAccess/browser/gotoSymbolQuickAccess.js","../node_modules/monaco-editor/esm/vs/editor/contrib/readOnlyMessage/browser/contribution.js","../node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/renameWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/rename/browser/rename.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nclass LongLinesHelper extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._register(this._editor.onMouseDown((e) => {\n            const stopRenderingLineAfter = this._editor.getOption(117 /* EditorOption.stopRenderingLineAfter */);\n            if (stopRenderingLineAfter >= 0 && e.target.type === 6 /* MouseTargetType.CONTENT_TEXT */ && e.target.position.column >= stopRenderingLineAfter) {\n                this._editor.updateOptions({\n                    stopRenderingLineAfter: -1\n                });\n            }\n        }));\n    }\n}\nLongLinesHelper.ID = 'editor.contrib.longLinesHelper';\nregisterEditorContribution(LongLinesHelper.ID, LongLinesHelper, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar MessageController_1;\nimport { renderMarkdown } from '../../../../base/browser/markdownRenderer.js';\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport './messageController.css';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Range } from '../../../common/core/range.js';\nimport { openLinkFromMarkdown } from '../../../browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport * as dom from '../../../../base/browser/dom.js';\nlet MessageController = MessageController_1 = class MessageController {\n    static get(editor) {\n        return editor.getContribution(MessageController_1.ID);\n    }\n    constructor(editor, contextKeyService, _openerService) {\n        this._openerService = _openerService;\n        this._messageWidget = new MutableDisposable();\n        this._messageListeners = new DisposableStore();\n        this._mouseOverMessage = false;\n        this._editor = editor;\n        this._visible = MessageController_1.MESSAGE_VISIBLE.bindTo(contextKeyService);\n    }\n    dispose() {\n        var _a;\n        (_a = this._message) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._messageListeners.dispose();\n        this._messageWidget.dispose();\n        this._visible.reset();\n    }\n    showMessage(message, position) {\n        alert(isMarkdownString(message) ? message.value : message);\n        this._visible.set(true);\n        this._messageWidget.clear();\n        this._messageListeners.clear();\n        this._message = isMarkdownString(message) ? renderMarkdown(message, {\n            actionHandler: {\n                callback: (url) => {\n                    this.closeMessage();\n                    openLinkFromMarkdown(this._openerService, url, isMarkdownString(message) ? message.isTrusted : undefined);\n                },\n                disposables: this._messageListeners\n            },\n        }) : undefined;\n        this._messageWidget.value = new MessageWidget(this._editor, position, typeof message === 'string' ? message : this._message.element);\n        // close on blur (debounced to allow to tab into the message), cursor, model change, dispose\n        this._messageListeners.add(Event.debounce(this._editor.onDidBlurEditorText, (last, event) => event, 0)(() => {\n            if (this._mouseOverMessage) {\n                return; // override when mouse over message\n            }\n            if (this._messageWidget.value && dom.isAncestor(dom.getActiveElement(), this._messageWidget.value.getDomNode())) {\n                return; // override when focus is inside the message\n            }\n            this.closeMessage();\n        }));\n        this._messageListeners.add(this._editor.onDidChangeCursorPosition(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidDispose(() => this.closeMessage()));\n        this._messageListeners.add(this._editor.onDidChangeModel(() => this.closeMessage()));\n        this._messageListeners.add(dom.addDisposableListener(this._messageWidget.value.getDomNode(), dom.EventType.MOUSE_ENTER, () => this._mouseOverMessage = true, true));\n        this._messageListeners.add(dom.addDisposableListener(this._messageWidget.value.getDomNode(), dom.EventType.MOUSE_LEAVE, () => this._mouseOverMessage = false, true));\n        // close on mouse move\n        let bounds;\n        this._messageListeners.add(this._editor.onMouseMove(e => {\n            // outside the text area\n            if (!e.target.position) {\n                return;\n            }\n            if (!bounds) {\n                // define bounding box around position and first mouse occurance\n                bounds = new Range(position.lineNumber - 3, 1, e.target.position.lineNumber + 3, 1);\n            }\n            else if (!bounds.containsPosition(e.target.position)) {\n                // check if position is still in bounds\n                this.closeMessage();\n            }\n        }));\n    }\n    closeMessage() {\n        this._visible.reset();\n        this._messageListeners.clear();\n        if (this._messageWidget.value) {\n            this._messageListeners.add(MessageWidget.fadeOut(this._messageWidget.value));\n        }\n    }\n};\nMessageController.ID = 'editor.contrib.messageController';\nMessageController.MESSAGE_VISIBLE = new RawContextKey('messageVisible', false, nls.localize('messageVisible', 'Whether the editor is currently showing an inline message'));\nMessageController = MessageController_1 = __decorate([\n    __param(1, IContextKeyService),\n    __param(2, IOpenerService)\n], MessageController);\nexport { MessageController };\nconst MessageCommand = EditorCommand.bindToContribution(MessageController.get);\nregisterEditorCommand(new MessageCommand({\n    id: 'leaveEditorMessage',\n    precondition: MessageController.MESSAGE_VISIBLE,\n    handler: c => c.closeMessage(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        primary: 9 /* KeyCode.Escape */\n    }\n}));\nclass MessageWidget {\n    static fadeOut(messageWidget) {\n        const dispose = () => {\n            messageWidget.dispose();\n            clearTimeout(handle);\n            messageWidget.getDomNode().removeEventListener('animationend', dispose);\n        };\n        const handle = setTimeout(dispose, 110);\n        messageWidget.getDomNode().addEventListener('animationend', dispose);\n        messageWidget.getDomNode().classList.add('fadeOut');\n        return { dispose };\n    }\n    constructor(editor, { lineNumber, column }, text) {\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._editor = editor;\n        this._editor.revealLinesInCenterIfOutsideViewport(lineNumber, lineNumber, 0 /* ScrollType.Smooth */);\n        this._position = { lineNumber, column };\n        this._domNode = document.createElement('div');\n        this._domNode.classList.add('monaco-editor-overlaymessage');\n        this._domNode.style.marginLeft = '-6px';\n        const anchorTop = document.createElement('div');\n        anchorTop.classList.add('anchor', 'top');\n        this._domNode.appendChild(anchorTop);\n        const message = document.createElement('div');\n        if (typeof text === 'string') {\n            message.classList.add('message');\n            message.textContent = text;\n        }\n        else {\n            text.classList.add('message');\n            message.appendChild(text);\n        }\n        this._domNode.appendChild(message);\n        const anchorBottom = document.createElement('div');\n        anchorBottom.classList.add('anchor', 'below');\n        this._domNode.appendChild(anchorBottom);\n        this._editor.addContentWidget(this);\n        this._domNode.classList.add('fadeIn');\n    }\n    dispose() {\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return 'messageoverlay';\n    }\n    getDomNode() {\n        return this._domNode;\n    }\n    getPosition() {\n        return {\n            position: this._position,\n            preference: [\n                1 /* ContentWidgetPositionPreference.ABOVE */,\n                2 /* ContentWidgetPositionPreference.BELOW */,\n            ],\n            positionAffinity: 1 /* PositionAffinity.Right */,\n        };\n    }\n    afterRender(position) {\n        this._domNode.classList.toggle('below', position === 2 /* ContentWidgetPositionPreference.BELOW */);\n    }\n}\nregisterEditorContribution(MessageController.ID, MessageController, 4 /* EditorContributionInstantiation.Lazy */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar SelectionHighlighter_1;\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { KeyChord } from '../../../../base/common/keyCodes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { CursorMoveCommands } from '../../../common/cursor/cursorMoveCommands.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { CommonFindController } from '../../find/browser/findController.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { getSelectionHighlightDecorationOptions } from '../../wordHighlighter/browser/highlightDecorations.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nfunction announceCursorChange(previousCursorState, cursorState) {\n    const cursorDiff = cursorState.filter(cs => !previousCursorState.find(pcs => pcs.equals(cs)));\n    if (cursorDiff.length >= 1) {\n        const cursorPositions = cursorDiff.map(cs => `line ${cs.viewState.position.lineNumber} column ${cs.viewState.position.column}`).join(', ');\n        const msg = cursorDiff.length === 1 ? nls.localize('cursorAdded', \"Cursor added: {0}\", cursorPositions) : nls.localize('cursorsAdded', \"Cursors added: {0}\", cursorPositions);\n        status(msg);\n    }\n}\nexport class InsertCursorAbove extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAbove',\n            label: nls.localize('mutlicursor.insertAbove', \"Add Cursor Above\"),\n            alias: 'Add Cursor Above',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                linux: {\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */,\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 16 /* KeyCode.UpArrow */]\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAbove', comment: ['&& denotes a mnemonic'] }, \"&&Add Cursor Above\"),\n                order: 2\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorUp(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealTopMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class InsertCursorBelow extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorBelow',\n            label: nls.localize('mutlicursor.insertBelow', \"Add Cursor Below\"),\n            alias: 'Add Cursor Below',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                linux: {\n                    primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */,\n                    secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 18 /* KeyCode.DownArrow */]\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorBelow', comment: ['&& denotes a mnemonic'] }, \"A&&dd Cursor Below\"),\n                order: 3\n            }\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        let useLogicalLine = true;\n        if (args && args.logicalLine === false) {\n            useLogicalLine = false;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = viewModel.getCursorStates();\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, CursorMoveCommands.addCursorDown(viewModel, previousCursorState, useLogicalLine));\n        viewModel.revealBottomMostCursor(args.source);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfEachLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.insertCursorAtEndOfEachLineSelected',\n            label: nls.localize('mutlicursor.insertAtEndOfEachLineSelected', \"Add Cursors to Line Ends\"),\n            alias: 'Add Cursors to Line Ends',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 39 /* KeyCode.KeyI */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miInsertCursorAtEndOfEachLineSelected', comment: ['&& denotes a mnemonic'] }, \"Add C&&ursors to Line Ends\"),\n                order: 4\n            }\n        });\n    }\n    getCursorsForSelection(selection, model, result) {\n        if (selection.isEmpty()) {\n            return;\n        }\n        for (let i = selection.startLineNumber; i < selection.endLineNumber; i++) {\n            const currentLineMaxColumn = model.getLineMaxColumn(i);\n            result.push(new Selection(i, currentLineMaxColumn, i, currentLineMaxColumn));\n        }\n        if (selection.endColumn > 1) {\n            result.push(new Selection(selection.endLineNumber, selection.endColumn, selection.endLineNumber, selection.endColumn));\n        }\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        const selections = editor.getSelections();\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        const newSelections = [];\n        selections.forEach((sel) => this.getCursorsForSelection(sel, model, newSelections));\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtEndOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToBottom',\n            label: nls.localize('mutlicursor.addCursorsToBottom', \"Add Cursors To Bottom\"),\n            alias: 'Add Cursors To Bottom',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        const lineCount = editor.getModel().getLineCount();\n        const newSelections = [];\n        for (let i = selections[0].startLineNumber; i <= lineCount; i++) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nclass InsertCursorAtTopOfLineSelected extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.addCursorsToTop',\n            label: nls.localize('mutlicursor.addCursorsToTop', \"Add Cursors To Top\"),\n            alias: 'Add Cursors To Top',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const selections = editor.getSelections();\n        const newSelections = [];\n        for (let i = selections[0].startLineNumber; i >= 1; i--) {\n            newSelections.push(new Selection(i, selections[0].startColumn, i, selections[0].endColumn));\n        }\n        const viewModel = editor._getViewModel();\n        const previousCursorState = viewModel.getCursorStates();\n        if (newSelections.length > 0) {\n            editor.setSelections(newSelections);\n        }\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class MultiCursorSessionResult {\n    constructor(selections, revealRange, revealScrollType) {\n        this.selections = selections;\n        this.revealRange = revealRange;\n        this.revealScrollType = revealScrollType;\n    }\n}\nexport class MultiCursorSession {\n    static create(editor, findController) {\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const findState = findController.getState();\n        // Find widget owns entirely what we search for if:\n        //  - focus is not in the editor (i.e. it is in the find widget)\n        //  - and the search widget is visible\n        //  - and the search string is non-empty\n        if (!editor.hasTextFocus() && findState.isRevealed && findState.searchString.length > 0) {\n            // Find widget owns what is searched for\n            return new MultiCursorSession(editor, findController, false, findState.searchString, findState.wholeWord, findState.matchCase, null);\n        }\n        // Otherwise, the selection gives the search text, and the find widget gives the search settings\n        // The exception is the find state disassociation case: when beginning with a single, collapsed selection\n        let isDisconnectedFromFindController = false;\n        let wholeWord;\n        let matchCase;\n        const selections = editor.getSelections();\n        if (selections.length === 1 && selections[0].isEmpty()) {\n            isDisconnectedFromFindController = true;\n            wholeWord = true;\n            matchCase = true;\n        }\n        else {\n            wholeWord = findState.wholeWord;\n            matchCase = findState.matchCase;\n        }\n        // Selection owns what is searched for\n        const s = editor.getSelection();\n        let searchText;\n        let currentMatch = null;\n        if (s.isEmpty()) {\n            // selection is empty => expand to current word\n            const word = editor.getConfiguredWordAtPosition(s.getStartPosition());\n            if (!word) {\n                return null;\n            }\n            searchText = word.word;\n            currentMatch = new Selection(s.startLineNumber, word.startColumn, s.startLineNumber, word.endColumn);\n        }\n        else {\n            searchText = editor.getModel().getValueInRange(s).replace(/\\r\\n/g, '\\n');\n        }\n        return new MultiCursorSession(editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch);\n    }\n    constructor(_editor, findController, isDisconnectedFromFindController, searchText, wholeWord, matchCase, currentMatch) {\n        this._editor = _editor;\n        this.findController = findController;\n        this.isDisconnectedFromFindController = isDisconnectedFromFindController;\n        this.searchText = searchText;\n        this.wholeWord = wholeWord;\n        this.matchCase = matchCase;\n        this.currentMatch = currentMatch;\n    }\n    addSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n    }\n    moveSelectionToNextFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const nextMatch = this._getNextMatch();\n        if (!nextMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(nextMatch), nextMatch, 0 /* ScrollType.Smooth */);\n    }\n    _getNextMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const nextMatch = this._editor.getModel().findNextMatch(this.searchText, lastAddedSelection.getEndPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(131 /* EditorOption.wordSeparators */) : null, false);\n        if (!nextMatch) {\n            return null;\n        }\n        return new Selection(nextMatch.range.startLineNumber, nextMatch.range.startColumn, nextMatch.range.endLineNumber, nextMatch.range.endColumn);\n    }\n    addSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n    }\n    moveSelectionToPreviousFindMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        const previousMatch = this._getPreviousMatch();\n        if (!previousMatch) {\n            return null;\n        }\n        const allSelections = this._editor.getSelections();\n        return new MultiCursorSessionResult(allSelections.slice(0, allSelections.length - 1).concat(previousMatch), previousMatch, 0 /* ScrollType.Smooth */);\n    }\n    _getPreviousMatch() {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (this.currentMatch) {\n            const result = this.currentMatch;\n            this.currentMatch = null;\n            return result;\n        }\n        this.findController.highlightFindOptions();\n        const allSelections = this._editor.getSelections();\n        const lastAddedSelection = allSelections[allSelections.length - 1];\n        const previousMatch = this._editor.getModel().findPreviousMatch(this.searchText, lastAddedSelection.getStartPosition(), false, this.matchCase, this.wholeWord ? this._editor.getOption(131 /* EditorOption.wordSeparators */) : null, false);\n        if (!previousMatch) {\n            return null;\n        }\n        return new Selection(previousMatch.range.startLineNumber, previousMatch.range.startColumn, previousMatch.range.endLineNumber, previousMatch.range.endColumn);\n    }\n    selectAll(searchScope) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this.findController.highlightFindOptions();\n        const editorModel = this._editor.getModel();\n        if (searchScope) {\n            return editorModel.findMatches(this.searchText, searchScope, false, this.matchCase, this.wholeWord ? this._editor.getOption(131 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n        }\n        return editorModel.findMatches(this.searchText, true, false, this.matchCase, this.wholeWord ? this._editor.getOption(131 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n    }\n}\nexport class MultiCursorSelectionController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(MultiCursorSelectionController.ID);\n    }\n    constructor(editor) {\n        super();\n        this._sessionDispose = this._register(new DisposableStore());\n        this._editor = editor;\n        this._ignoreSelectionChange = false;\n        this._session = null;\n    }\n    dispose() {\n        this._endSession();\n        super.dispose();\n    }\n    _beginSessionIfNeeded(findController) {\n        if (!this._session) {\n            // Create a new session\n            const session = MultiCursorSession.create(this._editor, findController);\n            if (!session) {\n                return;\n            }\n            this._session = session;\n            const newState = { searchString: this._session.searchText };\n            if (this._session.isDisconnectedFromFindController) {\n                newState.wholeWordOverride = 1 /* FindOptionOverride.True */;\n                newState.matchCaseOverride = 1 /* FindOptionOverride.True */;\n                newState.isRegexOverride = 2 /* FindOptionOverride.False */;\n            }\n            findController.getState().change(newState, false);\n            this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e) => {\n                if (this._ignoreSelectionChange) {\n                    return;\n                }\n                this._endSession();\n            }));\n            this._sessionDispose.add(this._editor.onDidBlurEditorText(() => {\n                this._endSession();\n            }));\n            this._sessionDispose.add(findController.getState().onFindReplaceStateChange((e) => {\n                if (e.matchCase || e.wholeWord) {\n                    this._endSession();\n                }\n            }));\n        }\n    }\n    _endSession() {\n        this._sessionDispose.clear();\n        if (this._session && this._session.isDisconnectedFromFindController) {\n            const newState = {\n                wholeWordOverride: 0 /* FindOptionOverride.NotSet */,\n                matchCaseOverride: 0 /* FindOptionOverride.NotSet */,\n                isRegexOverride: 0 /* FindOptionOverride.NotSet */,\n            };\n            this._session.findController.getState().change(newState, false);\n        }\n        this._session = null;\n    }\n    _setSelections(selections) {\n        this._ignoreSelectionChange = true;\n        this._editor.setSelections(selections);\n        this._ignoreSelectionChange = false;\n    }\n    _expandEmptyToWord(model, selection) {\n        if (!selection.isEmpty()) {\n            return selection;\n        }\n        const word = this._editor.getConfiguredWordAtPosition(selection.getStartPosition());\n        if (!word) {\n            return selection;\n        }\n        return new Selection(selection.startLineNumber, word.startColumn, selection.startLineNumber, word.endColumn);\n    }\n    _applySessionResult(result) {\n        if (!result) {\n            return;\n        }\n        this._setSelections(result.selections);\n        if (result.revealRange) {\n            this._editor.revealRangeInCenterIfOutsideViewport(result.revealRange, result.revealScrollType);\n        }\n    }\n    getSession(findController) {\n        return this._session;\n    }\n    addSelectionToNextFindMatch(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        if (!this._session) {\n            // If there are multiple cursors, handle the case where they do not all select the same text.\n            const allSelections = this._editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(this._editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    const model = this._editor.getModel();\n                    const resultingSelections = [];\n                    for (let i = 0, len = allSelections.length; i < len; i++) {\n                        resultingSelections[i] = this._expandEmptyToWord(model, allSelections[i]);\n                    }\n                    this._editor.setSelections(resultingSelections);\n                    return;\n                }\n            }\n        }\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToNextFindMatch());\n        }\n    }\n    addSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.addSelectionToPreviousFindMatch());\n        }\n    }\n    moveSelectionToNextFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToNextFindMatch());\n        }\n    }\n    moveSelectionToPreviousFindMatch(findController) {\n        this._beginSessionIfNeeded(findController);\n        if (this._session) {\n            this._applySessionResult(this._session.moveSelectionToPreviousFindMatch());\n        }\n    }\n    selectAll(findController) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        let matches = null;\n        const findState = findController.getState();\n        // Special case: find widget owns entirely what we search for if:\n        // - focus is not in the editor (i.e. it is in the find widget)\n        // - and the search widget is visible\n        // - and the search string is non-empty\n        // - and we're searching for a regex\n        if (findState.isRevealed && findState.searchString.length > 0 && findState.isRegex) {\n            const editorModel = this._editor.getModel();\n            if (findState.searchScope) {\n                matches = editorModel.findMatches(findState.searchString, findState.searchScope, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(131 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n            }\n            else {\n                matches = editorModel.findMatches(findState.searchString, true, findState.isRegex, findState.matchCase, findState.wholeWord ? this._editor.getOption(131 /* EditorOption.wordSeparators */) : null, false, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */);\n            }\n        }\n        else {\n            this._beginSessionIfNeeded(findController);\n            if (!this._session) {\n                return;\n            }\n            matches = this._session.selectAll(findState.searchScope);\n        }\n        if (matches.length > 0) {\n            const editorSelection = this._editor.getSelection();\n            // Have the primary cursor remain the one where the action was invoked\n            for (let i = 0, len = matches.length; i < len; i++) {\n                const match = matches[i];\n                const intersection = match.range.intersectRanges(editorSelection);\n                if (intersection) {\n                    // bingo!\n                    matches[i] = matches[0];\n                    matches[0] = match;\n                    break;\n                }\n            }\n            this._setSelections(matches.map(m => new Selection(m.range.startLineNumber, m.range.startColumn, m.range.endLineNumber, m.range.endColumn)));\n        }\n    }\n}\nMultiCursorSelectionController.ID = 'editor.contrib.multiCursorController';\nexport class MultiCursorSelectionControllerAction extends EditorAction {\n    run(accessor, editor) {\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel) {\n            const previousCursorState = viewModel.getCursorStates();\n            const findController = CommonFindController.get(editor);\n            if (findController) {\n                this._run(multiCursorController, findController);\n            }\n            else {\n                const newFindController = accessor.get(IInstantiationService).createInstance(CommonFindController, editor);\n                this._run(multiCursorController, newFindController);\n                newFindController.dispose();\n            }\n            announceCursorChange(previousCursorState, viewModel.getCursorStates());\n        }\n    }\n}\nexport class AddSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToNextFindMatch',\n            label: nls.localize('addSelectionToNextFindMatch', \"Add Selection To Next Find Match\"),\n            alias: 'Add Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToNextFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add &&Next Occurrence\"),\n                order: 5\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToNextFindMatch(findController);\n    }\n}\nexport class AddSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.addSelectionToPreviousFindMatch',\n            label: nls.localize('addSelectionToPreviousFindMatch', \"Add Selection To Previous Find Match\"),\n            alias: 'Add Selection To Previous Find Match',\n            precondition: undefined,\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miAddSelectionToPreviousFindMatch', comment: ['&& denotes a mnemonic'] }, \"Add P&&revious Occurrence\"),\n                order: 6\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.addSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class MoveSelectionToNextFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToNextFindMatch',\n            label: nls.localize('moveSelectionToNextFindMatch', \"Move Last Selection To Next Find Match\"),\n            alias: 'Move Last Selection To Next Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: KeyChord(2048 /* KeyMod.CtrlCmd */ | 41 /* KeyCode.KeyK */, 2048 /* KeyMod.CtrlCmd */ | 34 /* KeyCode.KeyD */),\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToNextFindMatch(findController);\n    }\n}\nexport class MoveSelectionToPreviousFindMatchAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.moveSelectionToPreviousFindMatch',\n            label: nls.localize('moveSelectionToPreviousFindMatch', \"Move Last Selection To Previous Find Match\"),\n            alias: 'Move Last Selection To Previous Find Match',\n            precondition: undefined\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.moveSelectionToPreviousFindMatch(findController);\n    }\n}\nexport class SelectHighlightsAction extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.selectHighlights',\n            label: nls.localize('selectAllOccurrencesOfFindMatch', \"Select All Occurrences of Find Match\"),\n            alias: 'Select All Occurrences of Find Match',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.focus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 42 /* KeyCode.KeyL */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '3_multi',\n                title: nls.localize({ key: 'miSelectHighlights', comment: ['&& denotes a mnemonic'] }, \"Select All &&Occurrences\"),\n                order: 7\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nexport class CompatChangeAll extends MultiCursorSelectionControllerAction {\n    constructor() {\n        super({\n            id: 'editor.action.changeAll',\n            label: nls.localize('changeAll.label', \"Change All Occurrences\"),\n            alias: 'Change All Occurrences',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.editorTextFocus),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.2\n            }\n        });\n    }\n    _run(multiCursorController, findController) {\n        multiCursorController.selectAll(findController);\n    }\n}\nclass SelectionHighlighterState {\n    constructor(_model, _searchText, _matchCase, _wordSeparators, prevState) {\n        this._model = _model;\n        this._searchText = _searchText;\n        this._matchCase = _matchCase;\n        this._wordSeparators = _wordSeparators;\n        this._modelVersionId = this._model.getVersionId();\n        this._cachedFindMatches = null;\n        if (prevState\n            && this._model === prevState._model\n            && this._searchText === prevState._searchText\n            && this._matchCase === prevState._matchCase\n            && this._wordSeparators === prevState._wordSeparators\n            && this._modelVersionId === prevState._modelVersionId) {\n            this._cachedFindMatches = prevState._cachedFindMatches;\n        }\n    }\n    findMatches() {\n        if (this._cachedFindMatches === null) {\n            this._cachedFindMatches = this._model.findMatches(this._searchText, true, false, this._matchCase, this._wordSeparators, false).map(m => m.range);\n            this._cachedFindMatches.sort(Range.compareRangesUsingStarts);\n        }\n        return this._cachedFindMatches;\n    }\n}\nlet SelectionHighlighter = SelectionHighlighter_1 = class SelectionHighlighter extends Disposable {\n    constructor(editor, _languageFeaturesService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this.editor = editor;\n        this._isEnabled = editor.getOption(108 /* EditorOption.selectionHighlight */);\n        this._decorations = editor.createDecorationsCollection();\n        this.updateSoon = this._register(new RunOnceScheduler(() => this._update(), 300));\n        this.state = null;\n        this._register(editor.onDidChangeConfiguration((e) => {\n            this._isEnabled = editor.getOption(108 /* EditorOption.selectionHighlight */);\n        }));\n        this._register(editor.onDidChangeCursorSelection((e) => {\n            if (!this._isEnabled) {\n                // Early exit if nothing needs to be done!\n                // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n                return;\n            }\n            if (e.selection.isEmpty()) {\n                if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                    if (this.state) {\n                        // no longer valid\n                        this._setState(null);\n                    }\n                    this.updateSoon.schedule();\n                }\n                else {\n                    this._setState(null);\n                }\n            }\n            else {\n                this._update();\n            }\n        }));\n        this._register(editor.onDidChangeModel((e) => {\n            this._setState(null);\n        }));\n        this._register(editor.onDidChangeModelContent((e) => {\n            if (this._isEnabled) {\n                this.updateSoon.schedule();\n            }\n        }));\n        const findController = CommonFindController.get(editor);\n        if (findController) {\n            this._register(findController.getState().onFindReplaceStateChange((e) => {\n                this._update();\n            }));\n        }\n        this.updateSoon.schedule();\n    }\n    _update() {\n        this._setState(SelectionHighlighter_1._createState(this.state, this._isEnabled, this.editor));\n    }\n    static _createState(oldState, isEnabled, editor) {\n        if (!isEnabled) {\n            return null;\n        }\n        if (!editor.hasModel()) {\n            return null;\n        }\n        const s = editor.getSelection();\n        if (s.startLineNumber !== s.endLineNumber) {\n            // multiline forbidden for perf reasons\n            return null;\n        }\n        const multiCursorController = MultiCursorSelectionController.get(editor);\n        if (!multiCursorController) {\n            return null;\n        }\n        const findController = CommonFindController.get(editor);\n        if (!findController) {\n            return null;\n        }\n        let r = multiCursorController.getSession(findController);\n        if (!r) {\n            const allSelections = editor.getSelections();\n            if (allSelections.length > 1) {\n                const findState = findController.getState();\n                const matchCase = findState.matchCase;\n                const selectionsContainSameText = modelRangesContainSameText(editor.getModel(), allSelections, matchCase);\n                if (!selectionsContainSameText) {\n                    return null;\n                }\n            }\n            r = MultiCursorSession.create(editor, findController);\n        }\n        if (!r) {\n            return null;\n        }\n        if (r.currentMatch) {\n            // This is an empty selection\n            // Do not interfere with semantic word highlighting in the no selection case\n            return null;\n        }\n        if (/^[ \\t]+$/.test(r.searchText)) {\n            // whitespace only selection\n            return null;\n        }\n        if (r.searchText.length > 200) {\n            // very long selection\n            return null;\n        }\n        // TODO: better handling of this case\n        const findState = findController.getState();\n        const caseSensitive = findState.matchCase;\n        // Return early if the find widget shows the exact same matches\n        if (findState.isRevealed) {\n            let findStateSearchString = findState.searchString;\n            if (!caseSensitive) {\n                findStateSearchString = findStateSearchString.toLowerCase();\n            }\n            let mySearchString = r.searchText;\n            if (!caseSensitive) {\n                mySearchString = mySearchString.toLowerCase();\n            }\n            if (findStateSearchString === mySearchString && r.matchCase === findState.matchCase && r.wholeWord === findState.wholeWord && !findState.isRegex) {\n                return null;\n            }\n        }\n        return new SelectionHighlighterState(editor.getModel(), r.searchText, r.matchCase, r.wholeWord ? editor.getOption(131 /* EditorOption.wordSeparators */) : null, oldState);\n    }\n    _setState(newState) {\n        this.state = newState;\n        if (!this.state) {\n            this._decorations.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const model = this.editor.getModel();\n        if (model.isTooLargeForTokenization()) {\n            // the file is too large, so searching word under cursor in the whole document would be blocking the UI.\n            return;\n        }\n        const allMatches = this.state.findMatches();\n        const selections = this.editor.getSelections();\n        selections.sort(Range.compareRangesUsingStarts);\n        // do not overlap with selection (issue #64 and #512)\n        const matches = [];\n        for (let i = 0, j = 0, len = allMatches.length, lenJ = selections.length; i < len;) {\n            const match = allMatches[i];\n            if (j >= lenJ) {\n                // finished all editor selections\n                matches.push(match);\n                i++;\n            }\n            else {\n                const cmp = Range.compareRangesUsingStarts(match, selections[j]);\n                if (cmp < 0) {\n                    // match is before sel\n                    if (selections[j].isEmpty() || !Range.areIntersecting(match, selections[j])) {\n                        matches.push(match);\n                    }\n                    i++;\n                }\n                else if (cmp > 0) {\n                    // sel is before match\n                    j++;\n                }\n                else {\n                    // sel is equal to match\n                    i++;\n                    j++;\n                }\n            }\n        }\n        const occurrenceHighlighting = this.editor.getOption(81 /* EditorOption.occurrencesHighlight */) !== 'off';\n        const hasSemanticHighlights = this._languageFeaturesService.documentHighlightProvider.has(model) && occurrenceHighlighting;\n        const decorations = matches.map(r => {\n            return {\n                range: r,\n                options: getSelectionHighlightDecorationOptions(hasSemanticHighlights)\n            };\n        });\n        this._decorations.set(decorations);\n    }\n    dispose() {\n        this._setState(null);\n        super.dispose();\n    }\n};\nSelectionHighlighter.ID = 'editor.contrib.selectionHighlighter';\nSelectionHighlighter = SelectionHighlighter_1 = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SelectionHighlighter);\nexport { SelectionHighlighter };\nfunction modelRangesContainSameText(model, ranges, matchCase) {\n    const selectedText = getValueInRange(model, ranges[0], !matchCase);\n    for (let i = 1, len = ranges.length; i < len; i++) {\n        const range = ranges[i];\n        if (range.isEmpty()) {\n            return false;\n        }\n        const thisSelectedText = getValueInRange(model, range, !matchCase);\n        if (selectedText !== thisSelectedText) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction getValueInRange(model, range, toLowerCase) {\n    const text = model.getValueInRange(range);\n    return (toLowerCase ? text.toLowerCase() : text);\n}\nexport class FocusNextCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.focusNextCursor',\n            label: nls.localize('mutlicursor.focusNextCursor', \"Focus Next Cursor\"),\n            metadata: {\n                description: nls.localize('mutlicursor.focusNextCursor.description', \"Focuses the next cursor\"),\n                args: [],\n            },\n            alias: 'Focus Next Cursor',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = Array.from(viewModel.getCursorStates());\n        const firstCursor = previousCursorState.shift();\n        if (!firstCursor) {\n            return;\n        }\n        previousCursorState.push(firstCursor);\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n        viewModel.revealPrimaryCursor(args.source, true);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nexport class FocusPreviousCursor extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.focusPreviousCursor',\n            label: nls.localize('mutlicursor.focusPreviousCursor', \"Focus Previous Cursor\"),\n            metadata: {\n                description: nls.localize('mutlicursor.focusPreviousCursor.description', \"Focuses the previous cursor\"),\n                args: [],\n            },\n            alias: 'Focus Previous Cursor',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const viewModel = editor._getViewModel();\n        if (viewModel.cursorConfig.readOnly) {\n            return;\n        }\n        viewModel.model.pushStackElement();\n        const previousCursorState = Array.from(viewModel.getCursorStates());\n        const firstCursor = previousCursorState.pop();\n        if (!firstCursor) {\n            return;\n        }\n        previousCursorState.unshift(firstCursor);\n        viewModel.setCursorStates(args.source, 3 /* CursorChangeReason.Explicit */, previousCursorState);\n        viewModel.revealPrimaryCursor(args.source, true);\n        announceCursorChange(previousCursorState, viewModel.getCursorStates());\n    }\n}\nregisterEditorContribution(MultiCursorSelectionController.ID, MultiCursorSelectionController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorContribution(SelectionHighlighter.ID, SelectionHighlighter, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterEditorAction(InsertCursorAbove);\nregisterEditorAction(InsertCursorBelow);\nregisterEditorAction(InsertCursorAtEndOfEachLineSelected);\nregisterEditorAction(AddSelectionToNextFindMatchAction);\nregisterEditorAction(AddSelectionToPreviousFindMatchAction);\nregisterEditorAction(MoveSelectionToNextFindMatchAction);\nregisterEditorAction(MoveSelectionToPreviousFindMatchAction);\nregisterEditorAction(SelectHighlightsAction);\nregisterEditorAction(CompatChangeAll);\nregisterEditorAction(InsertCursorAtEndOfLineSelected);\nregisterEditorAction(InsertCursorAtTopOfLineSelected);\nregisterEditorAction(FocusNextCursor);\nregisterEditorAction(FocusPreviousCursor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport * as languages from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport const Context = {\n    Visible: new RawContextKey('parameterHintsVisible', false),\n    MultipleSignatures: new RawContextKey('parameterHintsMultipleSignatures', false),\n};\nexport async function provideSignatureHelp(registry, model, position, context, token) {\n    const supports = registry.ordered(model);\n    for (const support of supports) {\n        try {\n            const result = await support.provideSignatureHelp(model, position, token, context);\n            if (result) {\n                return result;\n            }\n        }\n        catch (err) {\n            onUnexpectedExternalError(err);\n        }\n    }\n    return undefined;\n}\nCommandsRegistry.registerCommand('_executeSignatureHelpProvider', async (accessor, ...args) => {\n    const [uri, position, triggerCharacter] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    const languageFeaturesService = accessor.get(ILanguageFeaturesService);\n    const ref = await accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = await provideSignatureHelp(languageFeaturesService.signatureHelpProvider, ref.object.textEditorModel, Position.lift(position), {\n            triggerKind: languages.SignatureHelpTriggerKind.Invoke,\n            isRetrigger: false,\n            triggerCharacter,\n        }, CancellationToken.None);\n        if (!result) {\n            return undefined;\n        }\n        setTimeout(() => result.dispose(), 0);\n        return result.value;\n    }\n    finally {\n        ref.dispose();\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nimport * as languages from '../../../common/languages.js';\nimport { provideSignatureHelp } from './provideSignatureHelp.js';\nvar ParameterHintState;\n(function (ParameterHintState) {\n    ParameterHintState.Default = { type: 0 /* Type.Default */ };\n    class Pending {\n        constructor(request, previouslyActiveHints) {\n            this.request = request;\n            this.previouslyActiveHints = previouslyActiveHints;\n            this.type = 2 /* Type.Pending */;\n        }\n    }\n    ParameterHintState.Pending = Pending;\n    class Active {\n        constructor(hints) {\n            this.hints = hints;\n            this.type = 1 /* Type.Active */;\n        }\n    }\n    ParameterHintState.Active = Active;\n})(ParameterHintState || (ParameterHintState = {}));\nexport class ParameterHintsModel extends Disposable {\n    constructor(editor, providers, delay = ParameterHintsModel.DEFAULT_DELAY) {\n        super();\n        this._onChangedHints = this._register(new Emitter());\n        this.onChangedHints = this._onChangedHints.event;\n        this.triggerOnType = false;\n        this._state = ParameterHintState.Default;\n        this._pendingTriggers = [];\n        this._lastSignatureHelpResult = this._register(new MutableDisposable());\n        this.triggerChars = new CharacterSet();\n        this.retriggerChars = new CharacterSet();\n        this.triggerId = 0;\n        this.editor = editor;\n        this.providers = providers;\n        this.throttledDelayer = new Delayer(delay);\n        this._register(this.editor.onDidBlurEditorWidget(() => this.cancel()));\n        this._register(this.editor.onDidChangeConfiguration(() => this.onEditorConfigurationChange()));\n        this._register(this.editor.onDidChangeModel(e => this.onModelChanged()));\n        this._register(this.editor.onDidChangeModelLanguage(_ => this.onModelChanged()));\n        this._register(this.editor.onDidChangeCursorSelection(e => this.onCursorChange(e)));\n        this._register(this.editor.onDidChangeModelContent(e => this.onModelContentChange()));\n        this._register(this.providers.onDidChange(this.onModelChanged, this));\n        this._register(this.editor.onDidType(text => this.onDidType(text)));\n        this.onEditorConfigurationChange();\n        this.onModelChanged();\n    }\n    get state() { return this._state; }\n    set state(value) {\n        if (this._state.type === 2 /* ParameterHintState.Type.Pending */) {\n            this._state.request.cancel();\n        }\n        this._state = value;\n    }\n    cancel(silent = false) {\n        this.state = ParameterHintState.Default;\n        this.throttledDelayer.cancel();\n        if (!silent) {\n            this._onChangedHints.fire(undefined);\n        }\n    }\n    trigger(context, delay) {\n        const model = this.editor.getModel();\n        if (!model || !this.providers.has(model)) {\n            return;\n        }\n        const triggerId = ++this.triggerId;\n        this._pendingTriggers.push(context);\n        this.throttledDelayer.trigger(() => {\n            return this.doTrigger(triggerId);\n        }, delay)\n            .catch(onUnexpectedError);\n    }\n    next() {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const last = (activeSignature % length) === (length - 1);\n        const cycle = this.editor.getOption(86 /* EditorOption.parameterHints */).cycle;\n        // If there is only one signature, or we're on last signature of list\n        if ((length < 2 || last) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(last && cycle ? 0 : activeSignature + 1);\n    }\n    previous() {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        const length = this.state.hints.signatures.length;\n        const activeSignature = this.state.hints.activeSignature;\n        const first = activeSignature === 0;\n        const cycle = this.editor.getOption(86 /* EditorOption.parameterHints */).cycle;\n        // If there is only one signature, or we're on first signature of list\n        if ((length < 2 || first) && !cycle) {\n            this.cancel();\n            return;\n        }\n        this.updateActiveSignature(first && cycle ? length - 1 : activeSignature - 1);\n    }\n    updateActiveSignature(activeSignature) {\n        if (this.state.type !== 1 /* ParameterHintState.Type.Active */) {\n            return;\n        }\n        this.state = new ParameterHintState.Active({ ...this.state.hints, activeSignature });\n        this._onChangedHints.fire(this.state.hints);\n    }\n    async doTrigger(triggerId) {\n        const isRetrigger = this.state.type === 1 /* ParameterHintState.Type.Active */ || this.state.type === 2 /* ParameterHintState.Type.Pending */;\n        const activeSignatureHelp = this.getLastActiveHints();\n        this.cancel(true);\n        if (this._pendingTriggers.length === 0) {\n            return false;\n        }\n        const context = this._pendingTriggers.reduce(mergeTriggerContexts);\n        this._pendingTriggers = [];\n        const triggerContext = {\n            triggerKind: context.triggerKind,\n            triggerCharacter: context.triggerCharacter,\n            isRetrigger: isRetrigger,\n            activeSignatureHelp: activeSignatureHelp\n        };\n        if (!this.editor.hasModel()) {\n            return false;\n        }\n        const model = this.editor.getModel();\n        const position = this.editor.getPosition();\n        this.state = new ParameterHintState.Pending(createCancelablePromise(token => provideSignatureHelp(this.providers, model, position, triggerContext, token)), activeSignatureHelp);\n        try {\n            const result = await this.state.request;\n            // Check that we are still resolving the correct signature help\n            if (triggerId !== this.triggerId) {\n                result === null || result === void 0 ? void 0 : result.dispose();\n                return false;\n            }\n            if (!result || !result.value.signatures || result.value.signatures.length === 0) {\n                result === null || result === void 0 ? void 0 : result.dispose();\n                this._lastSignatureHelpResult.clear();\n                this.cancel();\n                return false;\n            }\n            else {\n                this.state = new ParameterHintState.Active(result.value);\n                this._lastSignatureHelpResult.value = result;\n                this._onChangedHints.fire(this.state.hints);\n                return true;\n            }\n        }\n        catch (error) {\n            if (triggerId === this.triggerId) {\n                this.state = ParameterHintState.Default;\n            }\n            onUnexpectedError(error);\n            return false;\n        }\n    }\n    getLastActiveHints() {\n        switch (this.state.type) {\n            case 1 /* ParameterHintState.Type.Active */: return this.state.hints;\n            case 2 /* ParameterHintState.Type.Pending */: return this.state.previouslyActiveHints;\n            default: return undefined;\n        }\n    }\n    get isTriggered() {\n        return this.state.type === 1 /* ParameterHintState.Type.Active */\n            || this.state.type === 2 /* ParameterHintState.Type.Pending */\n            || this.throttledDelayer.isTriggered();\n    }\n    onModelChanged() {\n        this.cancel();\n        this.triggerChars.clear();\n        this.retriggerChars.clear();\n        const model = this.editor.getModel();\n        if (!model) {\n            return;\n        }\n        for (const support of this.providers.ordered(model)) {\n            for (const ch of support.signatureHelpTriggerCharacters || []) {\n                if (ch.length) {\n                    const charCode = ch.charCodeAt(0);\n                    this.triggerChars.add(charCode);\n                    // All trigger characters are also considered retrigger characters\n                    this.retriggerChars.add(charCode);\n                }\n            }\n            for (const ch of support.signatureHelpRetriggerCharacters || []) {\n                if (ch.length) {\n                    this.retriggerChars.add(ch.charCodeAt(0));\n                }\n            }\n        }\n    }\n    onDidType(text) {\n        if (!this.triggerOnType) {\n            return;\n        }\n        const lastCharIndex = text.length - 1;\n        const triggerCharCode = text.charCodeAt(lastCharIndex);\n        if (this.triggerChars.has(triggerCharCode) || this.isTriggered && this.retriggerChars.has(triggerCharCode)) {\n            this.trigger({\n                triggerKind: languages.SignatureHelpTriggerKind.TriggerCharacter,\n                triggerCharacter: text.charAt(lastCharIndex),\n            });\n        }\n    }\n    onCursorChange(e) {\n        if (e.source === 'mouse') {\n            this.cancel();\n        }\n        else if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onModelContentChange() {\n        if (this.isTriggered) {\n            this.trigger({ triggerKind: languages.SignatureHelpTriggerKind.ContentChange });\n        }\n    }\n    onEditorConfigurationChange() {\n        this.triggerOnType = this.editor.getOption(86 /* EditorOption.parameterHints */).enabled;\n        if (!this.triggerOnType) {\n            this.cancel();\n        }\n    }\n    dispose() {\n        this.cancel(true);\n        super.dispose();\n    }\n}\nParameterHintsModel.DEFAULT_DELAY = 120; // ms\nfunction mergeTriggerContexts(previous, current) {\n    switch (current.triggerKind) {\n        case languages.SignatureHelpTriggerKind.Invoke:\n            // Invoke overrides previous triggers.\n            return current;\n        case languages.SignatureHelpTriggerKind.ContentChange:\n            // Ignore content changes triggers\n            return previous;\n        case languages.SignatureHelpTriggerKind.TriggerCharacter:\n        default:\n            return current;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ParameterHintsWidget_1;\nimport * as dom from '../../../../base/browser/dom.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { escapeRegExpCharacters } from '../../../../base/common/strings.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport './parameterHints.css';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { MarkdownRenderer } from '../../../browser/widget/markdownRenderer/browser/markdownRenderer.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { listHighlightForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nconst $ = dom.$;\nconst parameterHintsNextIcon = registerIcon('parameter-hints-next', Codicon.chevronDown, nls.localize('parameterHintsNextIcon', 'Icon for show next parameter hint.'));\nconst parameterHintsPreviousIcon = registerIcon('parameter-hints-previous', Codicon.chevronUp, nls.localize('parameterHintsPreviousIcon', 'Icon for show previous parameter hint.'));\nlet ParameterHintsWidget = ParameterHintsWidget_1 = class ParameterHintsWidget extends Disposable {\n    constructor(editor, model, contextKeyService, openerService, languageService) {\n        super();\n        this.editor = editor;\n        this.model = model;\n        this.renderDisposeables = this._register(new DisposableStore());\n        this.visible = false;\n        this.announcedLabel = null;\n        // Editor.IContentWidget.allowEditorOverflow\n        this.allowEditorOverflow = true;\n        this.markdownRenderer = this._register(new MarkdownRenderer({ editor }, languageService, openerService));\n        this.keyVisible = Context.Visible.bindTo(contextKeyService);\n        this.keyMultipleSignatures = Context.MultipleSignatures.bindTo(contextKeyService);\n    }\n    createParameterHintDOMNodes() {\n        const element = $('.editor-widget.parameter-hints-widget');\n        const wrapper = dom.append(element, $('.phwrapper'));\n        wrapper.tabIndex = -1;\n        const controls = dom.append(wrapper, $('.controls'));\n        const previous = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsPreviousIcon)));\n        const overloads = dom.append(controls, $('.overloads'));\n        const next = dom.append(controls, $('.button' + ThemeIcon.asCSSSelector(parameterHintsNextIcon)));\n        this._register(dom.addDisposableListener(previous, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.previous();\n        }));\n        this._register(dom.addDisposableListener(next, 'click', e => {\n            dom.EventHelper.stop(e);\n            this.next();\n        }));\n        const body = $('.body');\n        const scrollbar = new DomScrollableElement(body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        this._register(scrollbar);\n        wrapper.appendChild(scrollbar.getDomNode());\n        const signature = dom.append(body, $('.signature'));\n        const docs = dom.append(body, $('.docs'));\n        element.style.userSelect = 'text';\n        this.domNodes = {\n            element,\n            signature,\n            overloads,\n            docs,\n            scrollbar,\n        };\n        this.editor.addContentWidget(this);\n        this.hide();\n        this._register(this.editor.onDidChangeCursorSelection(e => {\n            if (this.visible) {\n                this.editor.layoutContentWidget(this);\n            }\n        }));\n        const updateFont = () => {\n            if (!this.domNodes) {\n                return;\n            }\n            const fontInfo = this.editor.getOption(50 /* EditorOption.fontInfo */);\n            this.domNodes.element.style.fontSize = `${fontInfo.fontSize}px`;\n            this.domNodes.element.style.lineHeight = `${fontInfo.lineHeight / fontInfo.fontSize}`;\n        };\n        updateFont();\n        this._register(Event.chain(this.editor.onDidChangeConfiguration.bind(this.editor), $ => $.filter(e => e.hasChanged(50 /* EditorOption.fontInfo */)))(updateFont));\n        this._register(this.editor.onDidLayoutChange(e => this.updateMaxHeight()));\n        this.updateMaxHeight();\n    }\n    show() {\n        if (this.visible) {\n            return;\n        }\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        this.keyVisible.set(true);\n        this.visible = true;\n        setTimeout(() => {\n            var _a;\n            (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.add('visible');\n        }, 100);\n        this.editor.layoutContentWidget(this);\n    }\n    hide() {\n        var _a;\n        this.renderDisposeables.clear();\n        if (!this.visible) {\n            return;\n        }\n        this.keyVisible.reset();\n        this.visible = false;\n        this.announcedLabel = null;\n        (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.element.classList.remove('visible');\n        this.editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this.visible) {\n            return {\n                position: this.editor.getPosition(),\n                preference: [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */]\n            };\n        }\n        return null;\n    }\n    render(hints) {\n        var _a;\n        this.renderDisposeables.clear();\n        if (!this.domNodes) {\n            return;\n        }\n        const multiple = hints.signatures.length > 1;\n        this.domNodes.element.classList.toggle('multiple', multiple);\n        this.keyMultipleSignatures.set(multiple);\n        this.domNodes.signature.innerText = '';\n        this.domNodes.docs.innerText = '';\n        const signature = hints.signatures[hints.activeSignature];\n        if (!signature) {\n            return;\n        }\n        const code = dom.append(this.domNodes.signature, $('.code'));\n        const fontInfo = this.editor.getOption(50 /* EditorOption.fontInfo */);\n        code.style.fontSize = `${fontInfo.fontSize}px`;\n        code.style.fontFamily = fontInfo.fontFamily;\n        const hasParameters = signature.parameters.length > 0;\n        const activeParameterIndex = (_a = signature.activeParameter) !== null && _a !== void 0 ? _a : hints.activeParameter;\n        if (!hasParameters) {\n            const label = dom.append(code, $('span'));\n            label.textContent = signature.label;\n        }\n        else {\n            this.renderParameters(code, signature, activeParameterIndex);\n        }\n        const activeParameter = signature.parameters[activeParameterIndex];\n        if (activeParameter === null || activeParameter === void 0 ? void 0 : activeParameter.documentation) {\n            const documentation = $('span.documentation');\n            if (typeof activeParameter.documentation === 'string') {\n                documentation.textContent = activeParameter.documentation;\n            }\n            else {\n                const renderedContents = this.renderMarkdownDocs(activeParameter.documentation);\n                documentation.appendChild(renderedContents.element);\n            }\n            dom.append(this.domNodes.docs, $('p', {}, documentation));\n        }\n        if (signature.documentation === undefined) {\n            /** no op */\n        }\n        else if (typeof signature.documentation === 'string') {\n            dom.append(this.domNodes.docs, $('p', {}, signature.documentation));\n        }\n        else {\n            const renderedContents = this.renderMarkdownDocs(signature.documentation);\n            dom.append(this.domNodes.docs, renderedContents.element);\n        }\n        const hasDocs = this.hasDocs(signature, activeParameter);\n        this.domNodes.signature.classList.toggle('has-docs', hasDocs);\n        this.domNodes.docs.classList.toggle('empty', !hasDocs);\n        this.domNodes.overloads.textContent =\n            String(hints.activeSignature + 1).padStart(hints.signatures.length.toString().length, '0') + '/' + hints.signatures.length;\n        if (activeParameter) {\n            let labelToAnnounce = '';\n            const param = signature.parameters[activeParameterIndex];\n            if (Array.isArray(param.label)) {\n                labelToAnnounce = signature.label.substring(param.label[0], param.label[1]);\n            }\n            else {\n                labelToAnnounce = param.label;\n            }\n            if (param.documentation) {\n                labelToAnnounce += typeof param.documentation === 'string' ? `, ${param.documentation}` : `, ${param.documentation.value}`;\n            }\n            if (signature.documentation) {\n                labelToAnnounce += typeof signature.documentation === 'string' ? `, ${signature.documentation}` : `, ${signature.documentation.value}`;\n            }\n            // Select method gets called on every user type while parameter hints are visible.\n            // We do not want to spam the user with same announcements, so we only announce if the current parameter changed.\n            if (this.announcedLabel !== labelToAnnounce) {\n                aria.alert(nls.localize('hint', \"{0}, hint\", labelToAnnounce));\n                this.announcedLabel = labelToAnnounce;\n            }\n        }\n        this.editor.layoutContentWidget(this);\n        this.domNodes.scrollbar.scanDomNode();\n    }\n    renderMarkdownDocs(markdown) {\n        const renderedContents = this.renderDisposeables.add(this.markdownRenderer.render(markdown, {\n            asyncRenderCallback: () => {\n                var _a;\n                (_a = this.domNodes) === null || _a === void 0 ? void 0 : _a.scrollbar.scanDomNode();\n            }\n        }));\n        renderedContents.element.classList.add('markdown-docs');\n        return renderedContents;\n    }\n    hasDocs(signature, activeParameter) {\n        if (activeParameter && typeof activeParameter.documentation === 'string' && assertIsDefined(activeParameter.documentation).length > 0) {\n            return true;\n        }\n        if (activeParameter && typeof activeParameter.documentation === 'object' && assertIsDefined(activeParameter.documentation).value.length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'string' && assertIsDefined(signature.documentation).length > 0) {\n            return true;\n        }\n        if (signature.documentation && typeof signature.documentation === 'object' && assertIsDefined(signature.documentation.value).length > 0) {\n            return true;\n        }\n        return false;\n    }\n    renderParameters(parent, signature, activeParameterIndex) {\n        const [start, end] = this.getParameterLabelOffsets(signature, activeParameterIndex);\n        const beforeSpan = document.createElement('span');\n        beforeSpan.textContent = signature.label.substring(0, start);\n        const paramSpan = document.createElement('span');\n        paramSpan.textContent = signature.label.substring(start, end);\n        paramSpan.className = 'parameter active';\n        const afterSpan = document.createElement('span');\n        afterSpan.textContent = signature.label.substring(end);\n        dom.append(parent, beforeSpan, paramSpan, afterSpan);\n    }\n    getParameterLabelOffsets(signature, paramIdx) {\n        const param = signature.parameters[paramIdx];\n        if (!param) {\n            return [0, 0];\n        }\n        else if (Array.isArray(param.label)) {\n            return param.label;\n        }\n        else if (!param.label.length) {\n            return [0, 0];\n        }\n        else {\n            const regex = new RegExp(`(\\\\W|^)${escapeRegExpCharacters(param.label)}(?=\\\\W|$)`, 'g');\n            regex.test(signature.label);\n            const idx = regex.lastIndex - param.label.length;\n            return idx >= 0\n                ? [idx, regex.lastIndex]\n                : [0, 0];\n        }\n    }\n    next() {\n        this.editor.focus();\n        this.model.next();\n    }\n    previous() {\n        this.editor.focus();\n        this.model.previous();\n    }\n    getDomNode() {\n        if (!this.domNodes) {\n            this.createParameterHintDOMNodes();\n        }\n        return this.domNodes.element;\n    }\n    getId() {\n        return ParameterHintsWidget_1.ID;\n    }\n    updateMaxHeight() {\n        if (!this.domNodes) {\n            return;\n        }\n        const height = Math.max(this.editor.getLayoutInfo().height / 4, 250);\n        const maxHeight = `${height}px`;\n        this.domNodes.element.style.maxHeight = maxHeight;\n        const wrapper = this.domNodes.element.getElementsByClassName('phwrapper');\n        if (wrapper.length) {\n            wrapper[0].style.maxHeight = maxHeight;\n        }\n    }\n};\nParameterHintsWidget.ID = 'editor.widget.parameterHintsWidget';\nParameterHintsWidget = ParameterHintsWidget_1 = __decorate([\n    __param(2, IContextKeyService),\n    __param(3, IOpenerService),\n    __param(4, ILanguageService)\n], ParameterHintsWidget);\nexport { ParameterHintsWidget };\nregisterColor('editorHoverWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorHoverWidgetHighlightForeground', 'Foreground color of the active item in the parameter hint.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar ParameterHintsController_1;\nimport { Lazy } from '../../../../base/common/lazy.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport * as languages from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ParameterHintsModel } from './parameterHintsModel.js';\nimport { Context } from './provideSignatureHelp.js';\nimport * as nls from '../../../../nls.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ParameterHintsWidget } from './parameterHintsWidget.js';\nlet ParameterHintsController = ParameterHintsController_1 = class ParameterHintsController extends Disposable {\n    static get(editor) {\n        return editor.getContribution(ParameterHintsController_1.ID);\n    }\n    constructor(editor, instantiationService, languageFeaturesService) {\n        super();\n        this.editor = editor;\n        this.model = this._register(new ParameterHintsModel(editor, languageFeaturesService.signatureHelpProvider));\n        this._register(this.model.onChangedHints(newParameterHints => {\n            var _a;\n            if (newParameterHints) {\n                this.widget.value.show();\n                this.widget.value.render(newParameterHints);\n            }\n            else {\n                (_a = this.widget.rawValue) === null || _a === void 0 ? void 0 : _a.hide();\n            }\n        }));\n        this.widget = new Lazy(() => this._register(instantiationService.createInstance(ParameterHintsWidget, this.editor, this.model)));\n    }\n    cancel() {\n        this.model.cancel();\n    }\n    previous() {\n        var _a;\n        (_a = this.widget.rawValue) === null || _a === void 0 ? void 0 : _a.previous();\n    }\n    next() {\n        var _a;\n        (_a = this.widget.rawValue) === null || _a === void 0 ? void 0 : _a.next();\n    }\n    trigger(context) {\n        this.model.trigger(context, 0);\n    }\n};\nParameterHintsController.ID = 'editor.controller.parameterHints';\nParameterHintsController = ParameterHintsController_1 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, ILanguageFeaturesService)\n], ParameterHintsController);\nexport { ParameterHintsController };\nexport class TriggerParameterHintsAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.triggerParameterHints',\n            label: nls.localize('parameterHints.trigger.label', \"Trigger Parameter Hints\"),\n            alias: 'Trigger Parameter Hints',\n            precondition: EditorContextKeys.hasSignatureHelpProvider,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 10 /* KeyCode.Space */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(accessor, editor) {\n        const controller = ParameterHintsController.get(editor);\n        controller === null || controller === void 0 ? void 0 : controller.trigger({\n            triggerKind: languages.SignatureHelpTriggerKind.Invoke\n        });\n    }\n}\nregisterEditorContribution(ParameterHintsController.ID, ParameterHintsController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(TriggerParameterHintsAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 75;\nconst ParameterHintsCommand = EditorCommand.bindToContribution(ParameterHintsController.get);\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'closeParameterHints',\n    precondition: Context.Visible,\n    handler: x => x.cancel(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showPrevParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.previous(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new ParameterHintsCommand({\n    id: 'showNextParameterHint',\n    precondition: ContextKeyExpr.and(Context.Visible, Context.MultipleSignatures),\n    handler: x => x.next(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.focus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Color } from '../../../../base/common/color.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport * as objects from '../../../../base/common/objects.js';\nimport './media/peekViewWidget.css';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/codeEditor/embeddedCodeEditorWidget.js';\nimport { ZoneWidget } from '../../zoneWidget/browser/zoneWidget.js';\nimport * as nls from '../../../../nls.js';\nimport { createActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator, IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { activeContrastBorder, contrastBorder, editorForeground, editorInfoForeground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nexport const IPeekViewService = createDecorator('IPeekViewService');\nregisterSingleton(IPeekViewService, class {\n    constructor() {\n        this._widgets = new Map();\n    }\n    addExclusiveWidget(editor, widget) {\n        const existing = this._widgets.get(editor);\n        if (existing) {\n            existing.listener.dispose();\n            existing.widget.dispose();\n        }\n        const remove = () => {\n            const data = this._widgets.get(editor);\n            if (data && data.widget === widget) {\n                data.listener.dispose();\n                this._widgets.delete(editor);\n            }\n        };\n        this._widgets.set(editor, { widget, listener: widget.onDidClose(remove) });\n    }\n}, 1 /* InstantiationType.Delayed */);\nexport var PeekContext;\n(function (PeekContext) {\n    PeekContext.inPeekEditor = new RawContextKey('inReferenceSearchEditor', true, nls.localize('inReferenceSearchEditor', \"Whether the current code editor is embedded inside peek\"));\n    PeekContext.notInPeekEditor = PeekContext.inPeekEditor.toNegated();\n})(PeekContext || (PeekContext = {}));\nlet PeekContextController = class PeekContextController {\n    constructor(editor, contextKeyService) {\n        if (editor instanceof EmbeddedCodeEditorWidget) {\n            PeekContext.inPeekEditor.bindTo(contextKeyService);\n        }\n    }\n    dispose() { }\n};\nPeekContextController.ID = 'editor.contrib.referenceController';\nPeekContextController = __decorate([\n    __param(1, IContextKeyService)\n], PeekContextController);\nregisterEditorContribution(PeekContextController.ID, PeekContextController, 0 /* EditorContributionInstantiation.Eager */); // eager because it needs to define a context key\nexport function getOuterEditor(accessor) {\n    const editor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n    if (editor instanceof EmbeddedCodeEditorWidget) {\n        return editor.getParentEditor();\n    }\n    return editor;\n}\nconst defaultOptions = {\n    headerBackgroundColor: Color.white,\n    primaryHeadingColor: Color.fromHex('#333333'),\n    secondaryHeadingColor: Color.fromHex('#6c6c6cb3')\n};\nlet PeekViewWidget = class PeekViewWidget extends ZoneWidget {\n    constructor(editor, options, instantiationService) {\n        super(editor, options);\n        this.instantiationService = instantiationService;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        objects.mixin(this.options, defaultOptions, false);\n    }\n    dispose() {\n        if (!this.disposed) {\n            this.disposed = true; // prevent consumers who dispose on onDidClose from looping\n            super.dispose();\n            this._onDidClose.fire(this);\n        }\n    }\n    style(styles) {\n        const options = this.options;\n        if (styles.headerBackgroundColor) {\n            options.headerBackgroundColor = styles.headerBackgroundColor;\n        }\n        if (styles.primaryHeadingColor) {\n            options.primaryHeadingColor = styles.primaryHeadingColor;\n        }\n        if (styles.secondaryHeadingColor) {\n            options.secondaryHeadingColor = styles.secondaryHeadingColor;\n        }\n        super.style(styles);\n    }\n    _applyStyles() {\n        super._applyStyles();\n        const options = this.options;\n        if (this._headElement && options.headerBackgroundColor) {\n            this._headElement.style.backgroundColor = options.headerBackgroundColor.toString();\n        }\n        if (this._primaryHeading && options.primaryHeadingColor) {\n            this._primaryHeading.style.color = options.primaryHeadingColor.toString();\n        }\n        if (this._secondaryHeading && options.secondaryHeadingColor) {\n            this._secondaryHeading.style.color = options.secondaryHeadingColor.toString();\n        }\n        if (this._bodyElement && options.frameColor) {\n            this._bodyElement.style.borderColor = options.frameColor.toString();\n        }\n    }\n    _fillContainer(container) {\n        this.setCssClass('peekview-widget');\n        this._headElement = dom.$('.head');\n        this._bodyElement = dom.$('.body');\n        this._fillHead(this._headElement);\n        this._fillBody(this._bodyElement);\n        container.appendChild(this._headElement);\n        container.appendChild(this._bodyElement);\n    }\n    _fillHead(container, noCloseAction) {\n        this._titleElement = dom.$('.peekview-title');\n        if (this.options.supportOnTitleClick) {\n            this._titleElement.classList.add('clickable');\n            dom.addStandardDisposableListener(this._titleElement, 'click', event => this._onTitleClick(event));\n        }\n        dom.append(this._headElement, this._titleElement);\n        this._fillTitleIcon(this._titleElement);\n        this._primaryHeading = dom.$('span.filename');\n        this._secondaryHeading = dom.$('span.dirname');\n        this._metaHeading = dom.$('span.meta');\n        dom.append(this._titleElement, this._primaryHeading, this._secondaryHeading, this._metaHeading);\n        const actionsContainer = dom.$('.peekview-actions');\n        dom.append(this._headElement, actionsContainer);\n        const actionBarOptions = this._getActionBarOptions();\n        this._actionbarWidget = new ActionBar(actionsContainer, actionBarOptions);\n        this._disposables.add(this._actionbarWidget);\n        if (!noCloseAction) {\n            this._actionbarWidget.push(new Action('peekview.close', nls.localize('label.close', \"Close\"), ThemeIcon.asClassName(Codicon.close), true, () => {\n                this.dispose();\n                return Promise.resolve();\n            }), { label: false, icon: true });\n        }\n    }\n    _fillTitleIcon(container) {\n    }\n    _getActionBarOptions() {\n        return {\n            actionViewItemProvider: createActionViewItem.bind(undefined, this.instantiationService),\n            orientation: 0 /* ActionsOrientation.HORIZONTAL */\n        };\n    }\n    _onTitleClick(event) {\n        // implement me if supportOnTitleClick option is set\n    }\n    setTitle(primaryHeading, secondaryHeading) {\n        if (this._primaryHeading && this._secondaryHeading) {\n            this._primaryHeading.innerText = primaryHeading;\n            this._primaryHeading.setAttribute('title', primaryHeading);\n            if (secondaryHeading) {\n                this._secondaryHeading.innerText = secondaryHeading;\n            }\n            else {\n                dom.clearNode(this._secondaryHeading);\n            }\n        }\n    }\n    setMetaTitle(value) {\n        if (this._metaHeading) {\n            if (value) {\n                this._metaHeading.innerText = value;\n                dom.show(this._metaHeading);\n            }\n            else {\n                dom.hide(this._metaHeading);\n            }\n        }\n    }\n    _doLayout(heightInPixel, widthInPixel) {\n        if (!this._isShowing && heightInPixel < 0) {\n            // Looks like the view zone got folded away!\n            this.dispose();\n            return;\n        }\n        const headHeight = Math.ceil(this.editor.getOption(67 /* EditorOption.lineHeight */) * 1.2);\n        const bodyHeight = Math.round(heightInPixel - (headHeight + 2 /* the border-top/bottom width*/));\n        this._doLayoutHead(headHeight, widthInPixel);\n        this._doLayoutBody(bodyHeight, widthInPixel);\n    }\n    _doLayoutHead(heightInPixel, widthInPixel) {\n        if (this._headElement) {\n            this._headElement.style.height = `${heightInPixel}px`;\n            this._headElement.style.lineHeight = this._headElement.style.height;\n        }\n    }\n    _doLayoutBody(heightInPixel, widthInPixel) {\n        if (this._bodyElement) {\n            this._bodyElement.style.height = `${heightInPixel}px`;\n        }\n    }\n};\nPeekViewWidget = __decorate([\n    __param(2, IInstantiationService)\n], PeekViewWidget);\nexport { PeekViewWidget };\nexport const peekViewTitleBackground = registerColor('peekViewTitle.background', { dark: '#252526', light: '#F3F3F3', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewTitleBackground', 'Background color of the peek view title area.'));\nexport const peekViewTitleForeground = registerColor('peekViewTitleLabel.foreground', { dark: Color.white, light: Color.black, hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewTitleForeground', 'Color of the peek view title.'));\nexport const peekViewTitleInfoForeground = registerColor('peekViewTitleDescription.foreground', { dark: '#ccccccb3', light: '#616161', hcDark: '#FFFFFF99', hcLight: '#292929' }, nls.localize('peekViewTitleInfoForeground', 'Color of the peek view title info.'));\nexport const peekViewBorder = registerColor('peekView.border', { dark: editorInfoForeground, light: editorInfoForeground, hcDark: contrastBorder, hcLight: contrastBorder }, nls.localize('peekViewBorder', 'Color of the peek view borders and arrow.'));\nexport const peekViewResultsBackground = registerColor('peekViewResult.background', { dark: '#252526', light: '#F3F3F3', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewResultsBackground', 'Background color of the peek view result list.'));\nexport const peekViewResultsMatchForeground = registerColor('peekViewResult.lineForeground', { dark: '#bbbbbb', light: '#646465', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsMatchForeground', 'Foreground color for line nodes in the peek view result list.'));\nexport const peekViewResultsFileForeground = registerColor('peekViewResult.fileForeground', { dark: Color.white, light: '#1E1E1E', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsFileForeground', 'Foreground color for file nodes in the peek view result list.'));\nexport const peekViewResultsSelectionBackground = registerColor('peekViewResult.selectionBackground', { dark: '#3399ff33', light: '#3399ff33', hcDark: null, hcLight: null }, nls.localize('peekViewResultsSelectionBackground', 'Background color of the selected entry in the peek view result list.'));\nexport const peekViewResultsSelectionForeground = registerColor('peekViewResult.selectionForeground', { dark: Color.white, light: '#6C6C6C', hcDark: Color.white, hcLight: editorForeground }, nls.localize('peekViewResultsSelectionForeground', 'Foreground color of the selected entry in the peek view result list.'));\nexport const peekViewEditorBackground = registerColor('peekViewEditor.background', { dark: '#001F33', light: '#F2F8FC', hcDark: Color.black, hcLight: Color.white }, nls.localize('peekViewEditorBackground', 'Background color of the peek view editor.'));\nexport const peekViewEditorGutterBackground = registerColor('peekViewEditorGutter.background', { dark: peekViewEditorBackground, light: peekViewEditorBackground, hcDark: peekViewEditorBackground, hcLight: peekViewEditorBackground }, nls.localize('peekViewEditorGutterBackground', 'Background color of the gutter in the peek view editor.'));\nexport const peekViewEditorStickyScrollBackground = registerColor('peekViewEditorStickyScroll.background', { dark: peekViewEditorBackground, light: peekViewEditorBackground, hcDark: peekViewEditorBackground, hcLight: peekViewEditorBackground }, nls.localize('peekViewEditorStickScrollBackground', 'Background color of sticky scroll in the peek view editor.'));\nexport const peekViewResultsMatchHighlight = registerColor('peekViewResult.matchHighlightBackground', { dark: '#ea5c004d', light: '#ea5c004d', hcDark: null, hcLight: null }, nls.localize('peekViewResultsMatchHighlight', 'Match highlight color in the peek view result list.'));\nexport const peekViewEditorMatchHighlight = registerColor('peekViewEditor.matchHighlightBackground', { dark: '#ff8f0099', light: '#f5d802de', hcDark: null, hcLight: null }, nls.localize('peekViewEditorMatchHighlight', 'Match highlight color in the peek view editor.'));\nexport const peekViewEditorMatchHighlightBorder = registerColor('peekViewEditor.matchHighlightBorder', { dark: null, light: null, hcDark: activeContrastBorder, hcLight: activeContrastBorder }, nls.localize('peekViewEditorMatchHighlightBorder', 'Match highlight border in the peek view editor.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { stripIcons } from '../../../../base/common/iconLabels.js';\nimport { isLocalizedString } from '../../../../platform/action/common/action.js';\nimport { AbstractCommandsQuickAccessProvider } from '../../../../platform/quickinput/browser/commandsQuickAccess.js';\nexport class AbstractEditorCommandsQuickAccessProvider extends AbstractCommandsQuickAccessProvider {\n    constructor(options, instantiationService, keybindingService, commandService, telemetryService, dialogService) {\n        super(options, instantiationService, keybindingService, commandService, telemetryService, dialogService);\n    }\n    getCodeEditorCommandPicks() {\n        var _a;\n        const activeTextEditorControl = this.activeTextEditorControl;\n        if (!activeTextEditorControl) {\n            return [];\n        }\n        const editorCommandPicks = [];\n        for (const editorAction of activeTextEditorControl.getSupportedActions()) {\n            let commandDescription;\n            if ((_a = editorAction.metadata) === null || _a === void 0 ? void 0 : _a.description) {\n                if (isLocalizedString(editorAction.metadata.description)) {\n                    commandDescription = editorAction.metadata.description;\n                }\n                else {\n                    commandDescription = { original: editorAction.metadata.description, value: editorAction.metadata.description };\n                }\n            }\n            editorCommandPicks.push({\n                commandId: editorAction.id,\n                commandAlias: editorAction.alias,\n                commandDescription,\n                label: stripIcons(editorAction.label) || editorAction.id,\n            });\n        }\n        return editorCommandPicks;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createSingleCallFunction } from '../../../../base/common/functional.js';\nimport { DisposableStore, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { getCodeEditor, isDiffEditor } from '../../../browser/editorBrowser.js';\nimport { OverviewRulerLane } from '../../../common/model.js';\nimport { overviewRulerRangeHighlight } from '../../../common/core/editorColorRegistry.js';\nimport { themeColorFromId } from '../../../../platform/theme/common/themeService.js';\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\n/**\n * A reusable quick access provider for the editor with support\n * for adding decorations for navigating in the currently active file\n * (for example \"Go to line\", \"Go to symbol\").\n */\nexport class AbstractEditorNavigationQuickAccessProvider {\n    constructor(options) {\n        this.options = options;\n        //#endregion\n        //#region Decorations Utils\n        this.rangeHighlightDecorationId = undefined;\n    }\n    //#region Provider methods\n    provide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // Apply options if any\n        picker.canAcceptInBackground = !!((_a = this.options) === null || _a === void 0 ? void 0 : _a.canAcceptInBackground);\n        // Disable filtering & sorting, we control the results\n        picker.matchOnLabel = picker.matchOnDescription = picker.matchOnDetail = picker.sortByLabel = false;\n        // Provide based on current active editor\n        const pickerDisposable = disposables.add(new MutableDisposable());\n        pickerDisposable.value = this.doProvide(picker, token);\n        // Re-create whenever the active editor changes\n        disposables.add(this.onDidActiveTextEditorControlChange(() => {\n            // Clear old\n            pickerDisposable.value = undefined;\n            // Add new\n            pickerDisposable.value = this.doProvide(picker, token);\n        }));\n        return disposables;\n    }\n    doProvide(picker, token) {\n        var _a;\n        const disposables = new DisposableStore();\n        // With text control\n        const editor = this.activeTextEditorControl;\n        if (editor && this.canProvideWithTextEditor(editor)) {\n            const context = { editor };\n            // Restore any view state if this picker was closed\n            // without actually going to a line\n            const codeEditor = getCodeEditor(editor);\n            if (codeEditor) {\n                // Remember view state and update it when the cursor position\n                // changes even later because it could be that the user has\n                // configured quick access to remain open when focus is lost and\n                // we always want to restore the current location.\n                let lastKnownEditorViewState = (_a = editor.saveViewState()) !== null && _a !== void 0 ? _a : undefined;\n                disposables.add(codeEditor.onDidChangeCursorPosition(() => {\n                    var _a;\n                    lastKnownEditorViewState = (_a = editor.saveViewState()) !== null && _a !== void 0 ? _a : undefined;\n                }));\n                context.restoreViewState = () => {\n                    if (lastKnownEditorViewState && editor === this.activeTextEditorControl) {\n                        editor.restoreViewState(lastKnownEditorViewState);\n                    }\n                };\n                disposables.add(createSingleCallFunction(token.onCancellationRequested)(() => { var _a; return (_a = context.restoreViewState) === null || _a === void 0 ? void 0 : _a.call(context); }));\n            }\n            // Clean up decorations on dispose\n            disposables.add(toDisposable(() => this.clearDecorations(editor)));\n            // Ask subclass for entries\n            disposables.add(this.provideWithTextEditor(context, picker, token));\n        }\n        // Without text control\n        else {\n            disposables.add(this.provideWithoutTextEditor(picker, token));\n        }\n        return disposables;\n    }\n    /**\n     * Subclasses to implement if they can operate on the text editor.\n     */\n    canProvideWithTextEditor(editor) {\n        return true;\n    }\n    gotoLocation({ editor }, options) {\n        editor.setSelection(options.range, \"code.jump\" /* TextEditorSelectionSource.JUMP */);\n        editor.revealRangeInCenter(options.range, 0 /* ScrollType.Smooth */);\n        if (!options.preserveFocus) {\n            editor.focus();\n        }\n        const model = editor.getModel();\n        if (model && 'getLineContent' in model) {\n            status(`${model.getLineContent(options.range.startLineNumber)}`);\n        }\n    }\n    getModel(editor) {\n        var _a;\n        return isDiffEditor(editor) ?\n            (_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.modified :\n            editor.getModel();\n    }\n    addDecorations(editor, range) {\n        editor.changeDecorations(changeAccessor => {\n            // Reset old decorations if any\n            const deleteDecorations = [];\n            if (this.rangeHighlightDecorationId) {\n                deleteDecorations.push(this.rangeHighlightDecorationId.overviewRulerDecorationId);\n                deleteDecorations.push(this.rangeHighlightDecorationId.rangeHighlightId);\n                this.rangeHighlightDecorationId = undefined;\n            }\n            // Add new decorations for the range\n            const newDecorations = [\n                // highlight the entire line on the range\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight',\n                        className: 'rangeHighlight',\n                        isWholeLine: true\n                    }\n                },\n                // also add overview ruler highlight\n                {\n                    range,\n                    options: {\n                        description: 'quick-access-range-highlight-overview',\n                        overviewRuler: {\n                            color: themeColorFromId(overviewRulerRangeHighlight),\n                            position: OverviewRulerLane.Full\n                        }\n                    }\n                }\n            ];\n            const [rangeHighlightId, overviewRulerDecorationId] = changeAccessor.deltaDecorations(deleteDecorations, newDecorations);\n            this.rangeHighlightDecorationId = { rangeHighlightId, overviewRulerDecorationId };\n        });\n    }\n    clearDecorations(editor) {\n        const rangeHighlightDecorationId = this.rangeHighlightDecorationId;\n        if (rangeHighlightDecorationId) {\n            editor.changeDecorations(changeAccessor => {\n                changeAccessor.deltaDecorations([\n                    rangeHighlightDecorationId.overviewRulerDecorationId,\n                    rangeHighlightDecorationId.rangeHighlightId\n                ], []);\n            });\n            this.rangeHighlightDecorationId = undefined;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { getCodeEditor } from '../../../browser/editorBrowser.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nexport class AbstractGotoLineQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor() {\n        super({ canAcceptInBackground: true });\n    }\n    provideWithoutTextEditor(picker) {\n        const label = localize('cannotRunGotoLine', \"Open a text editor first to go to a line.\");\n        picker.items = [{ label }];\n        picker.ariaLabel = label;\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto line once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item) {\n                if (!this.isValidLineNumber(editor, item.lineNumber)) {\n                    return;\n                }\n                this.gotoLocation(context, { range: this.toRange(item.lineNumber, item.column), keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // React to picker changes\n        const updatePickerAndEditor = () => {\n            const position = this.parsePosition(editor, picker.value.trim().substr(AbstractGotoLineQuickAccessProvider.PREFIX.length));\n            const label = this.getPickLabel(editor, position.lineNumber, position.column);\n            // Picker\n            picker.items = [{\n                    lineNumber: position.lineNumber,\n                    column: position.column,\n                    label\n                }];\n            // ARIA Label\n            picker.ariaLabel = label;\n            // Clear decorations for invalid range\n            if (!this.isValidLineNumber(editor, position.lineNumber)) {\n                this.clearDecorations(editor);\n                return;\n            }\n            // Reveal\n            const range = this.toRange(position.lineNumber, position.column);\n            editor.revealRangeInCenter(range, 0 /* ScrollType.Smooth */);\n            // Decorate\n            this.addDecorations(editor, range);\n        };\n        updatePickerAndEditor();\n        disposables.add(picker.onDidChangeValue(() => updatePickerAndEditor()));\n        // Adjust line number visibility as needed\n        const codeEditor = getCodeEditor(editor);\n        if (codeEditor) {\n            const options = codeEditor.getOptions();\n            const lineNumbers = options.get(68 /* EditorOption.lineNumbers */);\n            if (lineNumbers.renderType === 2 /* RenderLineNumbersType.Relative */) {\n                codeEditor.updateOptions({ lineNumbers: 'on' });\n                disposables.add(toDisposable(() => codeEditor.updateOptions({ lineNumbers: 'relative' })));\n            }\n        }\n        return disposables;\n    }\n    toRange(lineNumber = 1, column = 1) {\n        return {\n            startLineNumber: lineNumber,\n            startColumn: column,\n            endLineNumber: lineNumber,\n            endColumn: column\n        };\n    }\n    parsePosition(editor, value) {\n        // Support line-col formats of `line,col`, `line:col`, `line#col`\n        const numbers = value.split(/,|:|#/).map(part => parseInt(part, 10)).filter(part => !isNaN(part));\n        const endLine = this.lineCount(editor) + 1;\n        return {\n            lineNumber: numbers[0] > 0 ? numbers[0] : endLine + numbers[0],\n            column: numbers[1]\n        };\n    }\n    getPickLabel(editor, lineNumber, column) {\n        // Location valid: indicate this as picker label\n        if (this.isValidLineNumber(editor, lineNumber)) {\n            if (this.isValidColumn(editor, lineNumber, column)) {\n                return localize('gotoLineColumnLabel', \"Go to line {0} and character {1}.\", lineNumber, column);\n            }\n            return localize('gotoLineLabel', \"Go to line {0}.\", lineNumber);\n        }\n        // Location invalid: show generic label\n        const position = editor.getPosition() || { lineNumber: 1, column: 1 };\n        const lineCount = this.lineCount(editor);\n        if (lineCount > 1) {\n            return localize('gotoLineLabelEmptyWithLimit', \"Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.\", position.lineNumber, position.column, lineCount);\n        }\n        return localize('gotoLineLabelEmpty', \"Current Line: {0}, Character: {1}. Type a line number to navigate to.\", position.lineNumber, position.column);\n    }\n    isValidLineNumber(editor, lineNumber) {\n        if (!lineNumber || typeof lineNumber !== 'number') {\n            return false;\n        }\n        return lineNumber > 0 && lineNumber <= this.lineCount(editor);\n    }\n    isValidColumn(editor, lineNumber, column) {\n        if (!column || typeof column !== 'number') {\n            return false;\n        }\n        const model = this.getModel(editor);\n        if (!model) {\n            return false;\n        }\n        const positionCandidate = { lineNumber, column };\n        return model.validatePosition(positionCandidate).equals(positionCandidate);\n    }\n    lineCount(editor) {\n        var _a, _b;\n        return (_b = (_a = this.getModel(editor)) === null || _a === void 0 ? void 0 : _a.getLineCount()) !== null && _b !== void 0 ? _b : 0;\n    }\n}\nAbstractGotoLineQuickAccessProvider.PREFIX = ':';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar AbstractGotoSymbolQuickAccessProvider_1;\nimport { DeferredPromise } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { pieceToQuery, prepareQuery, scoreFuzzy2 } from '../../../../base/common/fuzzyScorer.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { format, trim } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SymbolKinds, getAriaLabelForSymbol } from '../../../common/languages.js';\nimport { IOutlineModelService } from '../../documentSymbols/browser/outlineModel.js';\nimport { AbstractEditorNavigationQuickAccessProvider } from './editorNavigationQuickAccess.js';\nimport { localize } from '../../../../nls.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nlet AbstractGotoSymbolQuickAccessProvider = AbstractGotoSymbolQuickAccessProvider_1 = class AbstractGotoSymbolQuickAccessProvider extends AbstractEditorNavigationQuickAccessProvider {\n    constructor(_languageFeaturesService, _outlineModelService, options = Object.create(null)) {\n        super(options);\n        this._languageFeaturesService = _languageFeaturesService;\n        this._outlineModelService = _outlineModelService;\n        this.options = options;\n        this.options.canAcceptInBackground = true;\n    }\n    provideWithoutTextEditor(picker) {\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutEditor', \"To go to a symbol, first open a text editor with symbol information.\"));\n        return Disposable.None;\n    }\n    provideWithTextEditor(context, picker, token) {\n        const editor = context.editor;\n        const model = this.getModel(editor);\n        if (!model) {\n            return Disposable.None;\n        }\n        // Provide symbols from model if available in registry\n        if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n            return this.doProvideWithEditorSymbols(context, model, picker, token);\n        }\n        // Otherwise show an entry for a model without registry\n        // But give a chance to resolve the symbols at a later\n        // point if possible\n        return this.doProvideWithoutEditorSymbols(context, model, picker, token);\n    }\n    doProvideWithoutEditorSymbols(context, model, picker, token) {\n        const disposables = new DisposableStore();\n        // Generic pick for not having any symbol information\n        this.provideLabelPick(picker, localize('cannotRunGotoSymbolWithoutSymbolProvider', \"The active text editor does not provide symbol information.\"));\n        // Wait for changes to the registry and see if eventually\n        // we do get symbols. This can happen if the picker is opened\n        // very early after the model has loaded but before the\n        // language registry is ready.\n        // https://github.com/microsoft/vscode/issues/70607\n        (async () => {\n            const result = await this.waitForLanguageSymbolRegistry(model, disposables);\n            if (!result || token.isCancellationRequested) {\n                return;\n            }\n            disposables.add(this.doProvideWithEditorSymbols(context, model, picker, token));\n        })();\n        return disposables;\n    }\n    provideLabelPick(picker, label) {\n        picker.items = [{ label, index: 0, kind: 14 /* SymbolKind.String */ }];\n        picker.ariaLabel = label;\n    }\n    async waitForLanguageSymbolRegistry(model, disposables) {\n        if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n            return true;\n        }\n        const symbolProviderRegistryPromise = new DeferredPromise();\n        // Resolve promise when registry knows model\n        const symbolProviderListener = disposables.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => {\n            if (this._languageFeaturesService.documentSymbolProvider.has(model)) {\n                symbolProviderListener.dispose();\n                symbolProviderRegistryPromise.complete(true);\n            }\n        }));\n        // Resolve promise when we get disposed too\n        disposables.add(toDisposable(() => symbolProviderRegistryPromise.complete(false)));\n        return symbolProviderRegistryPromise.p;\n    }\n    doProvideWithEditorSymbols(context, model, picker, token) {\n        var _a;\n        const editor = context.editor;\n        const disposables = new DisposableStore();\n        // Goto symbol once picked\n        disposables.add(picker.onDidAccept(event => {\n            const [item] = picker.selectedItems;\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, preserveFocus: event.inBackground });\n                if (!event.inBackground) {\n                    picker.hide();\n                }\n            }\n        }));\n        // Goto symbol side by side if enabled\n        disposables.add(picker.onDidTriggerItemButton(({ item }) => {\n            if (item && item.range) {\n                this.gotoLocation(context, { range: item.range.selection, keyMods: picker.keyMods, forceSideBySide: true });\n                picker.hide();\n            }\n        }));\n        // Resolve symbols from document once and reuse this\n        // request for all filtering and typing then on\n        const symbolsPromise = this.getDocumentSymbols(model, token);\n        // Set initial picks and update on type\n        let picksCts = undefined;\n        const updatePickerItems = async (positionToEnclose) => {\n            // Cancel any previous ask for picks and busy\n            picksCts === null || picksCts === void 0 ? void 0 : picksCts.dispose(true);\n            picker.busy = false;\n            // Create new cancellation source for this run\n            picksCts = new CancellationTokenSource(token);\n            // Collect symbol picks\n            picker.busy = true;\n            try {\n                const query = prepareQuery(picker.value.substr(AbstractGotoSymbolQuickAccessProvider_1.PREFIX.length).trim());\n                const items = await this.doGetSymbolPicks(symbolsPromise, query, undefined, picksCts.token);\n                if (token.isCancellationRequested) {\n                    return;\n                }\n                if (items.length > 0) {\n                    picker.items = items;\n                    if (positionToEnclose && query.original.length === 0) {\n                        const candidate = findLast(items, item => Boolean(item.type !== 'separator' && item.range && Range.containsPosition(item.range.decoration, positionToEnclose)));\n                        if (candidate) {\n                            picker.activeItems = [candidate];\n                        }\n                    }\n                }\n                else {\n                    if (query.original.length > 0) {\n                        this.provideLabelPick(picker, localize('noMatchingSymbolResults', \"No matching editor symbols\"));\n                    }\n                    else {\n                        this.provideLabelPick(picker, localize('noSymbolResults', \"No editor symbols\"));\n                    }\n                }\n            }\n            finally {\n                if (!token.isCancellationRequested) {\n                    picker.busy = false;\n                }\n            }\n        };\n        disposables.add(picker.onDidChangeValue(() => updatePickerItems(undefined)));\n        updatePickerItems((_a = editor.getSelection()) === null || _a === void 0 ? void 0 : _a.getPosition());\n        // Reveal and decorate when active item changes\n        disposables.add(picker.onDidChangeActive(() => {\n            const [item] = picker.activeItems;\n            if (item && item.range) {\n                // Reveal\n                editor.revealRangeInCenter(item.range.selection, 0 /* ScrollType.Smooth */);\n                // Decorate\n                this.addDecorations(editor, item.range.decoration);\n            }\n        }));\n        return disposables;\n    }\n    async doGetSymbolPicks(symbolsPromise, query, options, token) {\n        var _a, _b;\n        const symbols = await symbolsPromise;\n        if (token.isCancellationRequested) {\n            return [];\n        }\n        const filterBySymbolKind = query.original.indexOf(AbstractGotoSymbolQuickAccessProvider_1.SCOPE_PREFIX) === 0;\n        const filterPos = filterBySymbolKind ? 1 : 0;\n        // Split between symbol and container query\n        let symbolQuery;\n        let containerQuery;\n        if (query.values && query.values.length > 1) {\n            symbolQuery = pieceToQuery(query.values[0]); // symbol: only match on first part\n            containerQuery = pieceToQuery(query.values.slice(1)); // container: match on all but first parts\n        }\n        else {\n            symbolQuery = query;\n        }\n        // Convert to symbol picks and apply filtering\n        let buttons;\n        const openSideBySideDirection = (_b = (_a = this.options) === null || _a === void 0 ? void 0 : _a.openSideBySideDirection) === null || _b === void 0 ? void 0 : _b.call(_a);\n        if (openSideBySideDirection) {\n            buttons = [{\n                    iconClass: openSideBySideDirection === 'right' ? ThemeIcon.asClassName(Codicon.splitHorizontal) : ThemeIcon.asClassName(Codicon.splitVertical),\n                    tooltip: openSideBySideDirection === 'right' ? localize('openToSide', \"Open to the Side\") : localize('openToBottom', \"Open to the Bottom\")\n                }];\n        }\n        const filteredSymbolPicks = [];\n        for (let index = 0; index < symbols.length; index++) {\n            const symbol = symbols[index];\n            const symbolLabel = trim(symbol.name);\n            const symbolLabelWithIcon = `$(${SymbolKinds.toIcon(symbol.kind).id}) ${symbolLabel}`;\n            const symbolLabelIconOffset = symbolLabelWithIcon.length - symbolLabel.length;\n            let containerLabel = symbol.containerName;\n            if (options === null || options === void 0 ? void 0 : options.extraContainerLabel) {\n                if (containerLabel) {\n                    containerLabel = `${options.extraContainerLabel} • ${containerLabel}`;\n                }\n                else {\n                    containerLabel = options.extraContainerLabel;\n                }\n            }\n            let symbolScore = undefined;\n            let symbolMatches = undefined;\n            let containerScore = undefined;\n            let containerMatches = undefined;\n            if (query.original.length > filterPos) {\n                // First: try to score on the entire query, it is possible that\n                // the symbol matches perfectly (e.g. searching for \"change log\"\n                // can be a match on a markdown symbol \"change log\"). In that\n                // case we want to skip the container query altogether.\n                let skipContainerQuery = false;\n                if (symbolQuery !== query) {\n                    [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, { ...query, values: undefined /* disable multi-query support */ }, filterPos, symbolLabelIconOffset);\n                    if (typeof symbolScore === 'number') {\n                        skipContainerQuery = true; // since we consumed the query, skip any container matching\n                    }\n                }\n                // Otherwise: score on the symbol query and match on the container later\n                if (typeof symbolScore !== 'number') {\n                    [symbolScore, symbolMatches] = scoreFuzzy2(symbolLabelWithIcon, symbolQuery, filterPos, symbolLabelIconOffset);\n                    if (typeof symbolScore !== 'number') {\n                        continue;\n                    }\n                }\n                // Score by container if specified\n                if (!skipContainerQuery && containerQuery) {\n                    if (containerLabel && containerQuery.original.length > 0) {\n                        [containerScore, containerMatches] = scoreFuzzy2(containerLabel, containerQuery);\n                    }\n                    if (typeof containerScore !== 'number') {\n                        continue;\n                    }\n                    if (typeof symbolScore === 'number') {\n                        symbolScore += containerScore; // boost symbolScore by containerScore\n                    }\n                }\n            }\n            const deprecated = symbol.tags && symbol.tags.indexOf(1 /* SymbolTag.Deprecated */) >= 0;\n            filteredSymbolPicks.push({\n                index,\n                kind: symbol.kind,\n                score: symbolScore,\n                label: symbolLabelWithIcon,\n                ariaLabel: getAriaLabelForSymbol(symbol.name, symbol.kind),\n                description: containerLabel,\n                highlights: deprecated ? undefined : {\n                    label: symbolMatches,\n                    description: containerMatches\n                },\n                range: {\n                    selection: Range.collapseToStart(symbol.selectionRange),\n                    decoration: symbol.range\n                },\n                strikethrough: deprecated,\n                buttons\n            });\n        }\n        // Sort by score\n        const sortedFilteredSymbolPicks = filteredSymbolPicks.sort((symbolA, symbolB) => filterBySymbolKind ?\n            this.compareByKindAndScore(symbolA, symbolB) :\n            this.compareByScore(symbolA, symbolB));\n        // Add separator for types\n        // - @  only total number of symbols\n        // - @: grouped by symbol kind\n        let symbolPicks = [];\n        if (filterBySymbolKind) {\n            let lastSymbolKind = undefined;\n            let lastSeparator = undefined;\n            let lastSymbolKindCounter = 0;\n            function updateLastSeparatorLabel() {\n                if (lastSeparator && typeof lastSymbolKind === 'number' && lastSymbolKindCounter > 0) {\n                    lastSeparator.label = format(NLS_SYMBOL_KIND_CACHE[lastSymbolKind] || FALLBACK_NLS_SYMBOL_KIND, lastSymbolKindCounter);\n                }\n            }\n            for (const symbolPick of sortedFilteredSymbolPicks) {\n                // Found new kind\n                if (lastSymbolKind !== symbolPick.kind) {\n                    // Update last separator with number of symbols we found for kind\n                    updateLastSeparatorLabel();\n                    lastSymbolKind = symbolPick.kind;\n                    lastSymbolKindCounter = 1;\n                    // Add new separator for new kind\n                    lastSeparator = { type: 'separator' };\n                    symbolPicks.push(lastSeparator);\n                }\n                // Existing kind, keep counting\n                else {\n                    lastSymbolKindCounter++;\n                }\n                // Add to final result\n                symbolPicks.push(symbolPick);\n            }\n            // Update last separator with number of symbols we found for kind\n            updateLastSeparatorLabel();\n        }\n        else if (sortedFilteredSymbolPicks.length > 0) {\n            symbolPicks = [\n                { label: localize('symbols', \"symbols ({0})\", filteredSymbolPicks.length), type: 'separator' },\n                ...sortedFilteredSymbolPicks\n            ];\n        }\n        return symbolPicks;\n    }\n    compareByScore(symbolA, symbolB) {\n        if (typeof symbolA.score !== 'number' && typeof symbolB.score === 'number') {\n            return 1;\n        }\n        else if (typeof symbolA.score === 'number' && typeof symbolB.score !== 'number') {\n            return -1;\n        }\n        if (typeof symbolA.score === 'number' && typeof symbolB.score === 'number') {\n            if (symbolA.score > symbolB.score) {\n                return -1;\n            }\n            else if (symbolA.score < symbolB.score) {\n                return 1;\n            }\n        }\n        if (symbolA.index < symbolB.index) {\n            return -1;\n        }\n        else if (symbolA.index > symbolB.index) {\n            return 1;\n        }\n        return 0;\n    }\n    compareByKindAndScore(symbolA, symbolB) {\n        const kindA = NLS_SYMBOL_KIND_CACHE[symbolA.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        const kindB = NLS_SYMBOL_KIND_CACHE[symbolB.kind] || FALLBACK_NLS_SYMBOL_KIND;\n        // Sort by type first if scoped search\n        const result = kindA.localeCompare(kindB);\n        if (result === 0) {\n            return this.compareByScore(symbolA, symbolB);\n        }\n        return result;\n    }\n    async getDocumentSymbols(document, token) {\n        const model = await this._outlineModelService.getOrCreate(document, token);\n        return token.isCancellationRequested ? [] : model.asListOfDocumentSymbols();\n    }\n};\nAbstractGotoSymbolQuickAccessProvider.PREFIX = '@';\nAbstractGotoSymbolQuickAccessProvider.SCOPE_PREFIX = ':';\nAbstractGotoSymbolQuickAccessProvider.PREFIX_BY_CATEGORY = `${AbstractGotoSymbolQuickAccessProvider_1.PREFIX}${AbstractGotoSymbolQuickAccessProvider_1.SCOPE_PREFIX}`;\nAbstractGotoSymbolQuickAccessProvider = AbstractGotoSymbolQuickAccessProvider_1 = __decorate([\n    __param(0, ILanguageFeaturesService),\n    __param(1, IOutlineModelService)\n], AbstractGotoSymbolQuickAccessProvider);\nexport { AbstractGotoSymbolQuickAccessProvider };\n// #region NLS Helpers\nconst FALLBACK_NLS_SYMBOL_KIND = localize('property', \"properties ({0})\");\nconst NLS_SYMBOL_KIND_CACHE = {\n    [5 /* SymbolKind.Method */]: localize('method', \"methods ({0})\"),\n    [11 /* SymbolKind.Function */]: localize('function', \"functions ({0})\"),\n    [8 /* SymbolKind.Constructor */]: localize('_constructor', \"constructors ({0})\"),\n    [12 /* SymbolKind.Variable */]: localize('variable', \"variables ({0})\"),\n    [4 /* SymbolKind.Class */]: localize('class', \"classes ({0})\"),\n    [22 /* SymbolKind.Struct */]: localize('struct', \"structs ({0})\"),\n    [23 /* SymbolKind.Event */]: localize('event', \"events ({0})\"),\n    [24 /* SymbolKind.Operator */]: localize('operator', \"operators ({0})\"),\n    [10 /* SymbolKind.Interface */]: localize('interface', \"interfaces ({0})\"),\n    [2 /* SymbolKind.Namespace */]: localize('namespace', \"namespaces ({0})\"),\n    [3 /* SymbolKind.Package */]: localize('package', \"packages ({0})\"),\n    [25 /* SymbolKind.TypeParameter */]: localize('typeParameter', \"type parameters ({0})\"),\n    [1 /* SymbolKind.Module */]: localize('modules', \"modules ({0})\"),\n    [6 /* SymbolKind.Property */]: localize('property', \"properties ({0})\"),\n    [9 /* SymbolKind.Enum */]: localize('enum', \"enumerations ({0})\"),\n    [21 /* SymbolKind.EnumMember */]: localize('enumMember', \"enumeration members ({0})\"),\n    [14 /* SymbolKind.String */]: localize('string', \"strings ({0})\"),\n    [0 /* SymbolKind.File */]: localize('file', \"files ({0})\"),\n    [17 /* SymbolKind.Array */]: localize('array', \"arrays ({0})\"),\n    [15 /* SymbolKind.Number */]: localize('number', \"numbers ({0})\"),\n    [16 /* SymbolKind.Boolean */]: localize('boolean', \"booleans ({0})\"),\n    [18 /* SymbolKind.Object */]: localize('object', \"objects ({0})\"),\n    [19 /* SymbolKind.Key */]: localize('key', \"keys ({0})\"),\n    [7 /* SymbolKind.Field */]: localize('field', \"fields ({0})\"),\n    [13 /* SymbolKind.Constant */]: localize('constant', \"constants ({0})\")\n};\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nexport class ReadOnlyMessageController extends Disposable {\n    constructor(editor) {\n        super();\n        this.editor = editor;\n        this._register(this.editor.onDidAttemptReadOnlyEdit(() => this._onDidAttemptReadOnlyEdit()));\n    }\n    _onDidAttemptReadOnlyEdit() {\n        const messageController = MessageController.get(this.editor);\n        if (messageController && this.editor.hasModel()) {\n            let message = this.editor.getOptions().get(92 /* EditorOption.readOnlyMessage */);\n            if (!message) {\n                if (this.editor.isSimpleWidget) {\n                    message = new MarkdownString(nls.localize('editor.simple.readonly', \"Cannot edit in read-only input\"));\n                }\n                else {\n                    message = new MarkdownString(nls.localize('editor.readonly', \"Cannot edit in read-only editor\"));\n                }\n            }\n            messageController.showMessage(message, this.editor.getPosition());\n        }\n    }\n}\nReadOnlyMessageController.ID = 'editor.contrib.readOnlyMessageController';\nregisterEditorContribution(ReadOnlyMessageController.ID, ReadOnlyMessageController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport * as aria from '../../../../base/browser/ui/aria/aria.js';\nimport { getBaseLayerHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../../../../base/browser/ui/hover/hoverDelegateFactory.js';\nimport { renderIcon } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { DeferredPromise, raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isDefined } from '../../../../base/common/types.js';\nimport './renameWidget.css';\nimport * as domFontInfo from '../../../browser/config/domFontInfo.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { NewSymbolNameTag, NewSymbolNameTriggerKind } from '../../../common/languages.js';\nimport * as nls from '../../../../nls.js';\nimport { localize } from '../../../../nls.js';\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\nimport { editorWidgetBackground, inputBackground, inputBorder, inputForeground, quickInputListFocusBackground, quickInputListFocusForeground, widgetBorder, widgetShadow } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\n/** for debugging */\nconst _sticky = false;\nexport const CONTEXT_RENAME_INPUT_VISIBLE = new RawContextKey('renameInputVisible', false, localize('renameInputVisible', \"Whether the rename input widget is visible\"));\nexport const CONTEXT_RENAME_INPUT_FOCUSED = new RawContextKey('renameInputFocused', false, localize('renameInputFocused', \"Whether the rename input widget is focused\"));\nlet RenameWidget = class RenameWidget {\n    constructor(_editor, _acceptKeybindings, _themeService, _keybindingService, contextKeyService, _logService) {\n        this._editor = _editor;\n        this._acceptKeybindings = _acceptKeybindings;\n        this._themeService = _themeService;\n        this._keybindingService = _keybindingService;\n        this._logService = _logService;\n        // implement IContentWidget\n        this.allowEditorOverflow = true;\n        this._disposables = new DisposableStore();\n        this._visibleContextKey = CONTEXT_RENAME_INPUT_VISIBLE.bindTo(contextKeyService);\n        this._isEditingRenameCandidate = false;\n        this._nRenameSuggestionsInvocations = 0;\n        this._hadAutomaticRenameSuggestionsInvocation = false;\n        this._candidates = new Set();\n        this._beforeFirstInputFieldEditSW = new StopWatch();\n        this._inputWithButton = new InputWithButton();\n        this._disposables.add(this._inputWithButton);\n        this._editor.addContentWidget(this);\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(50 /* EditorOption.fontInfo */)) {\n                this._updateFont();\n            }\n        }));\n        this._disposables.add(_themeService.onDidColorThemeChange(this._updateStyles, this));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._editor.removeContentWidget(this);\n    }\n    getId() {\n        return '__renameInputWidget';\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'monaco-editor rename-box';\n            this._domNode.appendChild(this._inputWithButton.domNode);\n            this._renameCandidateListView = this._disposables.add(new RenameCandidateListView(this._domNode, {\n                fontInfo: this._editor.getOption(50 /* EditorOption.fontInfo */),\n                onFocusChange: (newSymbolName) => {\n                    this._inputWithButton.input.value = newSymbolName;\n                    this._isEditingRenameCandidate = false; // @ulugbekna: reset\n                },\n                onSelectionChange: () => {\n                    this._isEditingRenameCandidate = false; // @ulugbekna: because user picked a rename suggestion\n                    this.acceptInput(false); // we don't allow preview with mouse click for now\n                }\n            }));\n            this._disposables.add(this._inputWithButton.onDidInputChange(() => {\n                var _a, _b, _c, _d;\n                if (((_a = this._renameCandidateListView) === null || _a === void 0 ? void 0 : _a.focusedCandidate) !== undefined) {\n                    this._isEditingRenameCandidate = true;\n                }\n                (_b = this._timeBeforeFirstInputFieldEdit) !== null && _b !== void 0 ? _b : (this._timeBeforeFirstInputFieldEdit = this._beforeFirstInputFieldEditSW.elapsed());\n                if (((_c = this._renameCandidateProvidersCts) === null || _c === void 0 ? void 0 : _c.token.isCancellationRequested) === false) {\n                    this._renameCandidateProvidersCts.cancel();\n                }\n                (_d = this._renameCandidateListView) === null || _d === void 0 ? void 0 : _d.clearFocus();\n            }));\n            this._label = document.createElement('div');\n            this._label.className = 'rename-label';\n            this._domNode.appendChild(this._label);\n            this._updateFont();\n            this._updateStyles(this._themeService.getColorTheme());\n        }\n        return this._domNode;\n    }\n    _updateStyles(theme) {\n        var _a, _b, _c, _d, _e;\n        if (!this._domNode) {\n            return;\n        }\n        const widgetShadowColor = theme.getColor(widgetShadow);\n        const widgetBorderColor = theme.getColor(widgetBorder);\n        this._domNode.style.backgroundColor = String((_a = theme.getColor(editorWidgetBackground)) !== null && _a !== void 0 ? _a : '');\n        this._domNode.style.boxShadow = widgetShadowColor ? ` 0 0 8px 2px ${widgetShadowColor}` : '';\n        this._domNode.style.border = widgetBorderColor ? `1px solid ${widgetBorderColor}` : '';\n        this._domNode.style.color = String((_b = theme.getColor(inputForeground)) !== null && _b !== void 0 ? _b : '');\n        const border = theme.getColor(inputBorder);\n        this._inputWithButton.domNode.style.backgroundColor = String((_c = theme.getColor(inputBackground)) !== null && _c !== void 0 ? _c : '');\n        this._inputWithButton.input.style.backgroundColor = String((_d = theme.getColor(inputBackground)) !== null && _d !== void 0 ? _d : '');\n        this._inputWithButton.domNode.style.borderWidth = border ? '1px' : '0px';\n        this._inputWithButton.domNode.style.borderStyle = border ? 'solid' : 'none';\n        this._inputWithButton.domNode.style.borderColor = (_e = border === null || border === void 0 ? void 0 : border.toString()) !== null && _e !== void 0 ? _e : 'none';\n    }\n    _updateFont() {\n        if (this._domNode === undefined) {\n            return;\n        }\n        assertType(this._label !== undefined, 'RenameWidget#_updateFont: _label must not be undefined given _domNode is defined');\n        this._editor.applyFontInfo(this._inputWithButton.input);\n        const fontInfo = this._editor.getOption(50 /* EditorOption.fontInfo */);\n        this._label.style.fontSize = `${this._computeLabelFontSize(fontInfo.fontSize)}px`;\n    }\n    _computeLabelFontSize(editorFontSize) {\n        return editorFontSize * 0.8;\n    }\n    getPosition() {\n        if (!this._visible) {\n            return null;\n        }\n        if (!this._editor.hasModel() || // @ulugbekna: shouldn't happen\n            !this._editor.getDomNode() // @ulugbekna: can happen during tests based on suggestWidget's similar predicate check\n        ) {\n            return null;\n        }\n        const bodyBox = dom.getClientArea(this.getDomNode().ownerDocument.body);\n        const editorBox = dom.getDomNodePagePosition(this._editor.getDomNode());\n        const cursorBoxTop = this._getTopForPosition();\n        this._nPxAvailableAbove = cursorBoxTop + editorBox.top;\n        this._nPxAvailableBelow = bodyBox.height - this._nPxAvailableAbove;\n        const lineHeight = this._editor.getOption(67 /* EditorOption.lineHeight */);\n        const { totalHeight: candidateViewHeight } = RenameCandidateView.getLayoutInfo({ lineHeight });\n        const positionPreference = this._nPxAvailableBelow > candidateViewHeight * 6 /* approximate # of candidates to fit in (inclusive of rename input box & rename label) */\n            ? [2 /* ContentWidgetPositionPreference.BELOW */, 1 /* ContentWidgetPositionPreference.ABOVE */]\n            : [1 /* ContentWidgetPositionPreference.ABOVE */, 2 /* ContentWidgetPositionPreference.BELOW */];\n        return {\n            position: this._position,\n            preference: positionPreference,\n        };\n    }\n    beforeRender() {\n        var _a, _b;\n        const [accept, preview] = this._acceptKeybindings;\n        this._label.innerText = localize({ key: 'label', comment: ['placeholders are keybindings, e.g \"F2 to Rename, Shift+F2 to Preview\"'] }, \"{0} to Rename, {1} to Preview\", (_a = this._keybindingService.lookupKeybinding(accept)) === null || _a === void 0 ? void 0 : _a.getLabel(), (_b = this._keybindingService.lookupKeybinding(preview)) === null || _b === void 0 ? void 0 : _b.getLabel());\n        this._domNode.style.minWidth = `200px`; // to prevent from widening when candidates come in\n        return null;\n    }\n    afterRender(position) {\n        this._trace('invoking afterRender, position: ', position ? 'not null' : 'null');\n        if (position === null) {\n            // cancel rename when input widget isn't rendered anymore\n            this.cancelInput(true, 'afterRender (because position is null)');\n            return;\n        }\n        if (!this._editor.hasModel() || // shouldn't happen\n            !this._editor.getDomNode() // can happen during tests based on suggestWidget's similar predicate check\n        ) {\n            return;\n        }\n        assertType(this._renameCandidateListView);\n        assertType(this._nPxAvailableAbove !== undefined);\n        assertType(this._nPxAvailableBelow !== undefined);\n        const inputBoxHeight = dom.getTotalHeight(this._inputWithButton.domNode);\n        const labelHeight = dom.getTotalHeight(this._label);\n        let totalHeightAvailable;\n        if (position === 2 /* ContentWidgetPositionPreference.BELOW */) {\n            totalHeightAvailable = this._nPxAvailableBelow;\n        }\n        else {\n            totalHeightAvailable = this._nPxAvailableAbove;\n        }\n        this._renameCandidateListView.layout({\n            height: totalHeightAvailable - labelHeight - inputBoxHeight,\n            width: dom.getTotalWidth(this._inputWithButton.domNode),\n        });\n    }\n    acceptInput(wantsPreview) {\n        var _a;\n        this._trace(`invoking acceptInput`);\n        (_a = this._currentAcceptInput) === null || _a === void 0 ? void 0 : _a.call(this, wantsPreview);\n    }\n    cancelInput(focusEditor, caller) {\n        var _a;\n        this._trace(`invoking cancelInput, caller: ${caller}, _currentCancelInput: ${this._currentAcceptInput ? 'not undefined' : 'undefined'}`);\n        (_a = this._currentCancelInput) === null || _a === void 0 ? void 0 : _a.call(this, focusEditor);\n    }\n    focusNextRenameSuggestion() {\n        var _a;\n        if (!((_a = this._renameCandidateListView) === null || _a === void 0 ? void 0 : _a.focusNext())) {\n            this._inputWithButton.input.value = this._currentName;\n        }\n    }\n    focusPreviousRenameSuggestion() {\n        var _a;\n        if (!((_a = this._renameCandidateListView) === null || _a === void 0 ? void 0 : _a.focusPrevious())) {\n            this._inputWithButton.input.value = this._currentName;\n        }\n    }\n    /**\n     * @param requestRenameCandidates is `undefined` when there are no rename suggestion providers\n     */\n    getInput(where, currentName, supportPreview, requestRenameCandidates, cts) {\n        const { start: selectionStart, end: selectionEnd } = this._getSelection(where, currentName);\n        this._renameCts = cts;\n        const disposeOnDone = new DisposableStore();\n        this._nRenameSuggestionsInvocations = 0;\n        this._hadAutomaticRenameSuggestionsInvocation = false;\n        if (requestRenameCandidates === undefined) {\n            this._inputWithButton.button.style.display = 'none';\n        }\n        else {\n            this._inputWithButton.button.style.display = 'flex';\n            this._requestRenameCandidatesOnce = requestRenameCandidates;\n            this._requestRenameCandidates(currentName, false);\n            disposeOnDone.add(dom.addDisposableListener(this._inputWithButton.button, 'click', () => this._requestRenameCandidates(currentName, true)));\n            disposeOnDone.add(dom.addDisposableListener(this._inputWithButton.button, dom.EventType.KEY_DOWN, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                if (keyEvent.equals(3 /* KeyCode.Enter */) || keyEvent.equals(10 /* KeyCode.Space */)) {\n                    keyEvent.stopPropagation();\n                    keyEvent.preventDefault();\n                    this._requestRenameCandidates(currentName, true);\n                }\n            }));\n        }\n        this._isEditingRenameCandidate = false;\n        this._domNode.classList.toggle('preview', supportPreview);\n        this._position = new Position(where.startLineNumber, where.startColumn);\n        this._currentName = currentName;\n        this._inputWithButton.input.value = currentName;\n        this._inputWithButton.input.setAttribute('selectionStart', selectionStart.toString());\n        this._inputWithButton.input.setAttribute('selectionEnd', selectionEnd.toString());\n        this._inputWithButton.input.size = Math.max((where.endColumn - where.startColumn) * 1.1, 20); // determines width\n        this._beforeFirstInputFieldEditSW.reset();\n        disposeOnDone.add(toDisposable(() => {\n            this._renameCts = undefined;\n            cts.dispose(true);\n        })); // @ulugbekna: this may result in `this.cancelInput` being called twice, but it should be safe since we set it to undefined after 1st call\n        disposeOnDone.add(toDisposable(() => {\n            if (this._renameCandidateProvidersCts !== undefined) {\n                this._renameCandidateProvidersCts.dispose(true);\n                this._renameCandidateProvidersCts = undefined;\n            }\n        }));\n        disposeOnDone.add(toDisposable(() => this._candidates.clear()));\n        const inputResult = new DeferredPromise();\n        inputResult.p.finally(() => {\n            disposeOnDone.dispose();\n            this._hide();\n        });\n        this._currentCancelInput = (focusEditor) => {\n            var _a;\n            this._trace('invoking _currentCancelInput');\n            this._currentAcceptInput = undefined;\n            this._currentCancelInput = undefined;\n            // fixme session cleanup\n            (_a = this._renameCandidateListView) === null || _a === void 0 ? void 0 : _a.clearCandidates();\n            inputResult.complete(focusEditor);\n            return true;\n        };\n        this._currentAcceptInput = (wantsPreview) => {\n            this._trace('invoking _currentAcceptInput');\n            assertType(this._renameCandidateListView !== undefined);\n            const nRenameSuggestions = this._renameCandidateListView.nCandidates;\n            let newName;\n            let source;\n            const focusedCandidate = this._renameCandidateListView.focusedCandidate;\n            if (focusedCandidate !== undefined) {\n                this._trace('using new name from renameSuggestion');\n                newName = focusedCandidate;\n                source = { k: 'renameSuggestion' };\n            }\n            else {\n                this._trace('using new name from inputField');\n                newName = this._inputWithButton.input.value;\n                source = this._isEditingRenameCandidate ? { k: 'userEditedRenameSuggestion' } : { k: 'inputField' };\n            }\n            if (newName === currentName || newName.trim().length === 0 /* is just whitespace */) {\n                this.cancelInput(true, '_currentAcceptInput (because newName === value || newName.trim().length === 0)');\n                return;\n            }\n            this._currentAcceptInput = undefined;\n            this._currentCancelInput = undefined;\n            this._renameCandidateListView.clearCandidates();\n            // fixme session cleanup\n            inputResult.complete({\n                newName,\n                wantsPreview: supportPreview && wantsPreview,\n                stats: {\n                    source,\n                    nRenameSuggestions,\n                    timeBeforeFirstInputFieldEdit: this._timeBeforeFirstInputFieldEdit,\n                    nRenameSuggestionsInvocations: this._nRenameSuggestionsInvocations,\n                    hadAutomaticRenameSuggestionsInvocation: this._hadAutomaticRenameSuggestionsInvocation,\n                }\n            });\n        };\n        disposeOnDone.add(cts.token.onCancellationRequested(() => this.cancelInput(true, 'cts.token.onCancellationRequested')));\n        if (!_sticky) {\n            disposeOnDone.add(this._editor.onDidBlurEditorWidget(() => { var _a; return this.cancelInput(!((_a = this._domNode) === null || _a === void 0 ? void 0 : _a.ownerDocument.hasFocus()), 'editor.onDidBlurEditorWidget'); }));\n        }\n        this._show();\n        return inputResult.p;\n    }\n    _requestRenameCandidates(currentName, isManuallyTriggered) {\n        if (this._requestRenameCandidatesOnce === undefined) {\n            return;\n        }\n        if (this._renameCandidateProvidersCts !== undefined) {\n            this._renameCandidateProvidersCts.dispose(true);\n        }\n        assertType(this._renameCts);\n        if (this._inputWithButton.buttonState !== 'stop') {\n            this._renameCandidateProvidersCts = new CancellationTokenSource();\n            const triggerKind = isManuallyTriggered ? NewSymbolNameTriggerKind.Invoke : NewSymbolNameTriggerKind.Automatic;\n            const candidates = this._requestRenameCandidatesOnce(triggerKind, this._renameCandidateProvidersCts.token);\n            if (candidates.length === 0) {\n                this._inputWithButton.setSparkleButton();\n                return;\n            }\n            if (!isManuallyTriggered) {\n                this._hadAutomaticRenameSuggestionsInvocation = true;\n            }\n            this._nRenameSuggestionsInvocations += 1;\n            this._inputWithButton.setStopButton();\n            this._updateRenameCandidates(candidates, currentName, this._renameCts.token);\n        }\n    }\n    /**\n     * This allows selecting only part of the symbol name in the input field based on the selection in the editor\n     */\n    _getSelection(where, currentName) {\n        assertType(this._editor.hasModel());\n        const selection = this._editor.getSelection();\n        let start = 0;\n        let end = currentName.length;\n        if (!Range.isEmpty(selection) && !Range.spansMultipleLines(selection) && Range.containsRange(where, selection)) {\n            start = Math.max(0, selection.startColumn - where.startColumn);\n            end = Math.min(where.endColumn, selection.endColumn) - where.startColumn;\n        }\n        return { start, end };\n    }\n    _show() {\n        this._trace('invoking _show');\n        this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber, 0 /* ScrollType.Smooth */);\n        this._visible = true;\n        this._visibleContextKey.set(true);\n        this._editor.layoutContentWidget(this);\n        // TODO@ulugbekna: could this be simply run in `afterRender`?\n        setTimeout(() => {\n            this._inputWithButton.input.focus();\n            this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute('selectionStart')), parseInt(this._inputWithButton.input.getAttribute('selectionEnd')));\n        }, 100);\n    }\n    async _updateRenameCandidates(candidates, currentName, token) {\n        const trace = (...args) => this._trace('_updateRenameCandidates', ...args);\n        trace('start');\n        const namesListResults = await raceCancellation(Promise.allSettled(candidates), token);\n        this._inputWithButton.setSparkleButton();\n        if (namesListResults === undefined) {\n            trace('returning early - received updateRenameCandidates results - undefined');\n            return;\n        }\n        const newNames = namesListResults.flatMap(namesListResult => namesListResult.status === 'fulfilled' && isDefined(namesListResult.value)\n            ? namesListResult.value\n            : []);\n        trace(`received updateRenameCandidates results - total (unfiltered) ${newNames.length} candidates.`);\n        // deduplicate and filter out the current value\n        const distinctNames = arrays.distinct(newNames, v => v.newSymbolName);\n        trace(`distinct candidates - ${distinctNames.length} candidates.`);\n        const validDistinctNames = distinctNames.filter(({ newSymbolName }) => newSymbolName.trim().length > 0 && newSymbolName !== this._inputWithButton.input.value && newSymbolName !== currentName && !this._candidates.has(newSymbolName));\n        trace(`valid distinct candidates - ${newNames.length} candidates.`);\n        validDistinctNames.forEach(n => this._candidates.add(n.newSymbolName));\n        if (validDistinctNames.length < 1) {\n            trace('returning early - no valid distinct candidates');\n            return;\n        }\n        // show the candidates\n        trace('setting candidates');\n        this._renameCandidateListView.setCandidates(validDistinctNames);\n        // ask editor to re-layout given that the widget is now of a different size after rendering rename candidates\n        trace('asking editor to re-layout');\n        this._editor.layoutContentWidget(this);\n    }\n    _hide() {\n        this._trace('invoked _hide');\n        this._visible = false;\n        this._visibleContextKey.reset();\n        this._editor.layoutContentWidget(this);\n    }\n    _getTopForPosition() {\n        const visibleRanges = this._editor.getVisibleRanges();\n        let firstLineInViewport;\n        if (visibleRanges.length > 0) {\n            firstLineInViewport = visibleRanges[0].startLineNumber;\n        }\n        else {\n            this._logService.warn('RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty');\n            firstLineInViewport = Math.max(1, this._position.lineNumber - 5); // @ulugbekna: fallback to current line minus 5\n        }\n        return this._editor.getTopForLineNumber(this._position.lineNumber) - this._editor.getTopForLineNumber(firstLineInViewport);\n    }\n    _trace(...args) {\n        this._logService.trace('RenameWidget', ...args);\n    }\n};\nRenameWidget = __decorate([\n    __param(2, IThemeService),\n    __param(3, IKeybindingService),\n    __param(4, IContextKeyService),\n    __param(5, ILogService)\n], RenameWidget);\nexport { RenameWidget };\nclass RenameCandidateListView {\n    // FIXME@ulugbekna: rewrite using event emitters\n    constructor(parent, opts) {\n        this._disposables = new DisposableStore();\n        this._availableHeight = 0;\n        this._minimumWidth = 0;\n        this._lineHeight = opts.fontInfo.lineHeight;\n        this._typicalHalfwidthCharacterWidth = opts.fontInfo.typicalHalfwidthCharacterWidth;\n        this._listContainer = document.createElement('div');\n        this._listContainer.className = 'rename-box rename-candidate-list-container';\n        parent.appendChild(this._listContainer);\n        this._listWidget = RenameCandidateListView._createListWidget(this._listContainer, this._candidateViewHeight, opts.fontInfo);\n        this._listWidget.onDidChangeFocus(e => {\n            if (e.elements.length === 1) {\n                opts.onFocusChange(e.elements[0].newSymbolName);\n            }\n        }, this._disposables);\n        this._listWidget.onDidChangeSelection(e => {\n            if (e.elements.length === 1) {\n                opts.onSelectionChange();\n            }\n        }, this._disposables);\n        this._disposables.add(this._listWidget.onDidBlur(e => {\n            this._listWidget.setFocus([]);\n        }));\n        this._listWidget.style(getListStyles({\n            listInactiveFocusForeground: quickInputListFocusForeground,\n            listInactiveFocusBackground: quickInputListFocusBackground,\n        }));\n    }\n    dispose() {\n        this._listWidget.dispose();\n        this._disposables.dispose();\n    }\n    // height - max height allowed by parent element\n    layout({ height, width }) {\n        this._availableHeight = height;\n        this._minimumWidth = width;\n    }\n    setCandidates(candidates) {\n        // insert candidates into list widget\n        this._listWidget.splice(0, 0, candidates);\n        // adjust list widget layout\n        const height = this._pickListHeight(this._listWidget.length);\n        const width = this._pickListWidth(candidates);\n        this._listWidget.layout(height, width);\n        // adjust list container layout\n        this._listContainer.style.height = `${height}px`;\n        this._listContainer.style.width = `${width}px`;\n        aria.status(localize('renameSuggestionsReceivedAria', \"Received {0} rename suggestions\", candidates.length));\n    }\n    clearCandidates() {\n        this._listContainer.style.height = '0px';\n        this._listContainer.style.width = '0px';\n        this._listWidget.splice(0, this._listWidget.length, []);\n    }\n    get nCandidates() {\n        return this._listWidget.length;\n    }\n    get focusedCandidate() {\n        if (this._listWidget.length === 0) {\n            return;\n        }\n        const selectedElement = this._listWidget.getSelectedElements()[0];\n        if (selectedElement !== undefined) {\n            return selectedElement.newSymbolName;\n        }\n        const focusedElement = this._listWidget.getFocusedElements()[0];\n        if (focusedElement !== undefined) {\n            return focusedElement.newSymbolName;\n        }\n        return;\n    }\n    focusNext() {\n        if (this._listWidget.length === 0) {\n            return false;\n        }\n        const focusedIxs = this._listWidget.getFocus();\n        if (focusedIxs.length === 0) {\n            this._listWidget.focusFirst();\n            this._listWidget.reveal(0);\n            return true;\n        }\n        else {\n            if (focusedIxs[0] === this._listWidget.length - 1) {\n                this._listWidget.setFocus([]);\n                this._listWidget.reveal(0); // @ulugbekna: without this, it seems like focused element is obstructed\n                return false;\n            }\n            else {\n                this._listWidget.focusNext();\n                const focused = this._listWidget.getFocus()[0];\n                this._listWidget.reveal(focused);\n                return true;\n            }\n        }\n    }\n    /**\n     * @returns true if focus is moved to previous element\n     */\n    focusPrevious() {\n        if (this._listWidget.length === 0) {\n            return false;\n        }\n        const focusedIxs = this._listWidget.getFocus();\n        if (focusedIxs.length === 0) {\n            this._listWidget.focusLast();\n            const focused = this._listWidget.getFocus()[0];\n            this._listWidget.reveal(focused);\n            return true;\n        }\n        else {\n            if (focusedIxs[0] === 0) {\n                this._listWidget.setFocus([]);\n                return false;\n            }\n            else {\n                this._listWidget.focusPrevious();\n                const focused = this._listWidget.getFocus()[0];\n                this._listWidget.reveal(focused);\n                return true;\n            }\n        }\n    }\n    clearFocus() {\n        this._listWidget.setFocus([]);\n    }\n    get _candidateViewHeight() {\n        const { totalHeight } = RenameCandidateView.getLayoutInfo({ lineHeight: this._lineHeight });\n        return totalHeight;\n    }\n    _pickListHeight(nCandidates) {\n        const heightToFitAllCandidates = this._candidateViewHeight * nCandidates;\n        const MAX_N_CANDIDATES = 7; // @ulugbekna: max # of candidates we want to show at once\n        const height = Math.min(heightToFitAllCandidates, this._availableHeight, this._candidateViewHeight * MAX_N_CANDIDATES);\n        return height;\n    }\n    _pickListWidth(candidates) {\n        const longestCandidateWidth = Math.ceil(Math.max(...candidates.map(c => c.newSymbolName.length)) * this._typicalHalfwidthCharacterWidth);\n        const width = Math.max(this._minimumWidth, 4 /* padding */ + 16 /* sparkle icon */ + 5 /* margin-left */ + longestCandidateWidth + 10 /* (possibly visible) scrollbar width */ // TODO@ulugbekna: approximate calc - clean this up\n        );\n        return width;\n    }\n    static _createListWidget(container, candidateViewHeight, fontInfo) {\n        const virtualDelegate = new class {\n            getTemplateId(element) {\n                return 'candidate';\n            }\n            getHeight(element) {\n                return candidateViewHeight;\n            }\n        };\n        const renderer = new class {\n            constructor() {\n                this.templateId = 'candidate';\n            }\n            renderTemplate(container) {\n                return new RenameCandidateView(container, fontInfo);\n            }\n            renderElement(candidate, index, templateData) {\n                templateData.populate(candidate);\n            }\n            disposeTemplate(templateData) {\n                templateData.dispose();\n            }\n        };\n        return new List('NewSymbolNameCandidates', container, virtualDelegate, [renderer], {\n            keyboardSupport: false, // @ulugbekna: because we handle keyboard events through proper commands & keybinding service, see `rename.ts`\n            mouseSupport: true,\n            multipleSelectionSupport: false,\n        });\n    }\n}\nclass InputWithButton {\n    constructor() {\n        this._onDidInputChange = new Emitter();\n        this.onDidInputChange = this._onDidInputChange.event;\n        this._disposables = new DisposableStore();\n    }\n    get domNode() {\n        if (!this._domNode) {\n            this._domNode = document.createElement('div');\n            this._domNode.className = 'rename-input-with-button';\n            this._domNode.style.display = 'flex';\n            this._domNode.style.flexDirection = 'row';\n            this._domNode.style.alignItems = 'center';\n            this._inputNode = document.createElement('input');\n            this._inputNode.className = 'rename-input';\n            this._inputNode.type = 'text';\n            this._inputNode.style.border = 'none';\n            this._inputNode.setAttribute('aria-label', localize('renameAriaLabel', \"Rename input. Type new name and press Enter to commit.\"));\n            this._domNode.appendChild(this._inputNode);\n            this._buttonNode = document.createElement('div');\n            this._buttonNode.className = 'rename-suggestions-button';\n            this._buttonNode.setAttribute('tabindex', '0');\n            this._buttonGenHoverText = nls.localize('generateRenameSuggestionsButton', \"Generate new name suggestions\");\n            this._buttonCancelHoverText = nls.localize('cancelRenameSuggestionsButton', \"Cancel\");\n            this._buttonHover = getBaseLayerHoverDelegate().setupUpdatableHover(getDefaultHoverDelegate('element'), this._buttonNode, this._buttonGenHoverText);\n            this._disposables.add(this._buttonHover);\n            this._domNode.appendChild(this._buttonNode);\n            // notify if selection changes to cancel request to rename-suggestion providers\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.INPUT, () => this._onDidInputChange.fire()));\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.KEY_DOWN, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                if (keyEvent.keyCode === 15 /* KeyCode.LeftArrow */ || keyEvent.keyCode === 17 /* KeyCode.RightArrow */) {\n                    this._onDidInputChange.fire();\n                }\n            }));\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.CLICK, () => this._onDidInputChange.fire()));\n            // focus \"container\" border instead of input box\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.FOCUS, () => {\n                this.domNode.style.outlineWidth = '1px';\n                this.domNode.style.outlineStyle = 'solid';\n                this.domNode.style.outlineOffset = '-1px';\n                this.domNode.style.outlineColor = 'var(--vscode-focusBorder)';\n            }));\n            this._disposables.add(dom.addDisposableListener(this.input, dom.EventType.BLUR, () => {\n                this.domNode.style.outline = 'none';\n            }));\n        }\n        return this._domNode;\n    }\n    get input() {\n        assertType(this._inputNode);\n        return this._inputNode;\n    }\n    get button() {\n        assertType(this._buttonNode);\n        return this._buttonNode;\n    }\n    get buttonState() {\n        return this._buttonState;\n    }\n    setSparkleButton() {\n        var _a, _b;\n        this._buttonState = 'sparkle';\n        (_a = this._sparkleIcon) !== null && _a !== void 0 ? _a : (this._sparkleIcon = renderIcon(Codicon.sparkle));\n        dom.clearNode(this.button);\n        this.button.appendChild(this._sparkleIcon);\n        this.button.setAttribute('aria-label', 'Generating new name suggestions');\n        (_b = this._buttonHover) === null || _b === void 0 ? void 0 : _b.update(this._buttonGenHoverText);\n        this.input.focus();\n    }\n    setStopButton() {\n        var _a, _b;\n        this._buttonState = 'stop';\n        (_a = this._stopIcon) !== null && _a !== void 0 ? _a : (this._stopIcon = renderIcon(Codicon.primitiveSquare));\n        dom.clearNode(this.button);\n        this.button.appendChild(this._stopIcon);\n        this.button.setAttribute('aria-label', 'Cancel generating new name suggestions');\n        (_b = this._buttonHover) === null || _b === void 0 ? void 0 : _b.update(this._buttonCancelHoverText);\n        this.input.focus();\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nclass RenameCandidateView {\n    constructor(parent, fontInfo) {\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'rename-box rename-candidate';\n        this._domNode.style.display = `flex`;\n        this._domNode.style.columnGap = `5px`;\n        this._domNode.style.alignItems = `center`;\n        this._domNode.style.height = `${fontInfo.lineHeight}px`;\n        this._domNode.style.padding = `${RenameCandidateView._PADDING}px`;\n        // @ulugbekna: needed to keep space when the `icon.style.display` is set to `none`\n        const iconContainer = document.createElement('div');\n        iconContainer.style.display = `flex`;\n        iconContainer.style.alignItems = `center`;\n        iconContainer.style.width = iconContainer.style.height = `${fontInfo.lineHeight * 0.8}px`;\n        this._domNode.appendChild(iconContainer);\n        this._icon = renderIcon(Codicon.sparkle);\n        this._icon.style.display = `none`;\n        iconContainer.appendChild(this._icon);\n        this._label = document.createElement('div');\n        domFontInfo.applyFontInfo(this._label, fontInfo);\n        this._domNode.appendChild(this._label);\n        parent.appendChild(this._domNode);\n    }\n    populate(value) {\n        this._updateIcon(value);\n        this._updateLabel(value);\n    }\n    _updateIcon(value) {\n        var _a;\n        const isAIGenerated = !!((_a = value.tags) === null || _a === void 0 ? void 0 : _a.includes(NewSymbolNameTag.AIGenerated));\n        this._icon.style.display = isAIGenerated ? 'inherit' : 'none';\n    }\n    _updateLabel(value) {\n        this._label.innerText = value.newSymbolName;\n    }\n    static getLayoutInfo({ lineHeight }) {\n        const totalHeight = lineHeight + RenameCandidateView._PADDING * 2 /* top & bottom padding */;\n        return { totalHeight };\n    }\n    dispose() {\n    }\n}\nRenameCandidateView._PADDING = 2;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar RenameController_1;\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { raceCancellation } from '../../../../base/common/async.js';\nimport { CancellationToken, CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { CancellationError, onUnexpectedError } from '../../../../base/common/errors.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution, registerModelAndPositionCommand } from '../../../browser/editorExtensions.js';\nimport { IBulkEditService } from '../../../browser/services/bulkEditService.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { NewSymbolNameTriggerKind } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextResourceConfigurationService } from '../../../common/services/textResourceConfiguration.js';\nimport { EditorStateCancellationTokenSource } from '../../editorState/browser/editorState.js';\nimport { MessageController } from '../../message/browser/messageController.js';\nimport * as nls from '../../../../nls.js';\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { Extensions } from '../../../../platform/configuration/common/configurationRegistry.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { INotificationService } from '../../../../platform/notification/common/notification.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport { Registry } from '../../../../platform/registry/common/platform.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CONTEXT_RENAME_INPUT_VISIBLE, RenameWidget } from './renameWidget.js';\nclass RenameSkeleton {\n    constructor(model, position, registry) {\n        this.model = model;\n        this.position = position;\n        this._providerRenameIdx = 0;\n        this._providers = registry.ordered(model);\n    }\n    hasProvider() {\n        return this._providers.length > 0;\n    }\n    async resolveRenameLocation(token) {\n        const rejects = [];\n        for (this._providerRenameIdx = 0; this._providerRenameIdx < this._providers.length; this._providerRenameIdx++) {\n            const provider = this._providers[this._providerRenameIdx];\n            if (!provider.resolveRenameLocation) {\n                break;\n            }\n            const res = await provider.resolveRenameLocation(this.model, this.position, token);\n            if (!res) {\n                continue;\n            }\n            if (res.rejectReason) {\n                rejects.push(res.rejectReason);\n                continue;\n            }\n            return res;\n        }\n        // we are here when no provider prepared a location which means we can\n        // just rely on the word under cursor and start with the first provider\n        this._providerRenameIdx = 0;\n        const word = this.model.getWordAtPosition(this.position);\n        if (!word) {\n            return {\n                range: Range.fromPositions(this.position),\n                text: '',\n                rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n            };\n        }\n        return {\n            range: new Range(this.position.lineNumber, word.startColumn, this.position.lineNumber, word.endColumn),\n            text: word.word,\n            rejectReason: rejects.length > 0 ? rejects.join('\\n') : undefined\n        };\n    }\n    async provideRenameEdits(newName, token) {\n        return this._provideRenameEdits(newName, this._providerRenameIdx, [], token);\n    }\n    async _provideRenameEdits(newName, i, rejects, token) {\n        const provider = this._providers[i];\n        if (!provider) {\n            return {\n                edits: [],\n                rejectReason: rejects.join('\\n')\n            };\n        }\n        const result = await provider.provideRenameEdits(this.model, this.position, newName, token);\n        if (!result) {\n            return this._provideRenameEdits(newName, i + 1, rejects.concat(nls.localize('no result', \"No result.\")), token);\n        }\n        else if (result.rejectReason) {\n            return this._provideRenameEdits(newName, i + 1, rejects.concat(result.rejectReason), token);\n        }\n        return result;\n    }\n}\nexport async function rename(registry, model, position, newName) {\n    const skeleton = new RenameSkeleton(model, position, registry);\n    const loc = await skeleton.resolveRenameLocation(CancellationToken.None);\n    if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n        return { edits: [], rejectReason: loc.rejectReason };\n    }\n    return skeleton.provideRenameEdits(newName, CancellationToken.None);\n}\n// ---  register actions and commands\nlet RenameController = RenameController_1 = class RenameController {\n    static get(editor) {\n        return editor.getContribution(RenameController_1.ID);\n    }\n    constructor(editor, _instaService, _notificationService, _bulkEditService, _progressService, _logService, _configService, _languageFeaturesService, _telemetryService) {\n        this.editor = editor;\n        this._instaService = _instaService;\n        this._notificationService = _notificationService;\n        this._bulkEditService = _bulkEditService;\n        this._progressService = _progressService;\n        this._logService = _logService;\n        this._configService = _configService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._telemetryService = _telemetryService;\n        this._disposableStore = new DisposableStore();\n        this._cts = new CancellationTokenSource();\n        this._renameWidget = this._disposableStore.add(this._instaService.createInstance(RenameWidget, this.editor, ['acceptRenameInput', 'acceptRenameInputWithPreview']));\n    }\n    dispose() {\n        this._disposableStore.dispose();\n        this._cts.dispose(true);\n    }\n    async run() {\n        var _a, _b;\n        const trace = this._logService.trace.bind(this._logService, '[rename]');\n        // set up cancellation token to prevent reentrant rename, this\n        // is the parent to the resolve- and rename-tokens\n        this._cts.dispose(true);\n        this._cts = new CancellationTokenSource();\n        if (!this.editor.hasModel()) {\n            trace('editor has no model');\n            return undefined;\n        }\n        const position = this.editor.getPosition();\n        const skeleton = new RenameSkeleton(this.editor.getModel(), position, this._languageFeaturesService.renameProvider);\n        if (!skeleton.hasProvider()) {\n            trace('skeleton has no provider');\n            return undefined;\n        }\n        // part 1 - resolve rename location\n        const cts1 = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, undefined, this._cts.token);\n        let loc;\n        try {\n            trace('resolving rename location');\n            const resolveLocationOperation = skeleton.resolveRenameLocation(cts1.token);\n            this._progressService.showWhile(resolveLocationOperation, 250);\n            loc = await resolveLocationOperation;\n            trace('resolved rename location');\n        }\n        catch (e) {\n            if (e instanceof CancellationError) {\n                trace('resolve rename location cancelled', JSON.stringify(e, null, '\\t'));\n            }\n            else {\n                trace('resolve rename location failed', e instanceof Error ? e : JSON.stringify(e, null, '\\t'));\n                if (typeof e === 'string' || isMarkdownString(e)) {\n                    (_a = MessageController.get(this.editor)) === null || _a === void 0 ? void 0 : _a.showMessage(e || nls.localize('resolveRenameLocationFailed', \"An unknown error occurred while resolving rename location\"), position);\n                }\n            }\n            return undefined;\n        }\n        finally {\n            cts1.dispose();\n        }\n        if (!loc) {\n            trace('returning early - no loc');\n            return undefined;\n        }\n        if (loc.rejectReason) {\n            trace(`returning early - rejected with reason: ${loc.rejectReason}`, loc.rejectReason);\n            (_b = MessageController.get(this.editor)) === null || _b === void 0 ? void 0 : _b.showMessage(loc.rejectReason, position);\n            return undefined;\n        }\n        if (cts1.token.isCancellationRequested) {\n            trace('returning early - cts1 cancelled');\n            return undefined;\n        }\n        // part 2 - do rename at location\n        const cts2 = new EditorStateCancellationTokenSource(this.editor, 4 /* CodeEditorStateFlag.Position */ | 1 /* CodeEditorStateFlag.Value */, loc.range, this._cts.token);\n        const model = this.editor.getModel(); // @ulugbekna: assumes editor still has a model, otherwise, cts1 should've been cancelled\n        const newSymbolNamesProviders = this._languageFeaturesService.newSymbolNamesProvider.all(model);\n        const resolvedNewSymbolnamesProviders = await Promise.all(newSymbolNamesProviders.map(async (p) => { var _a; return [p, (_a = await p.supportsAutomaticNewSymbolNamesTriggerKind) !== null && _a !== void 0 ? _a : false]; }));\n        const requestRenameSuggestions = (triggerKind, cts) => {\n            let providers = resolvedNewSymbolnamesProviders.slice();\n            if (triggerKind === NewSymbolNameTriggerKind.Automatic) {\n                providers = providers.filter(([_, supportsAutomatic]) => supportsAutomatic);\n            }\n            return providers.map(([p,]) => p.provideNewSymbolNames(model, loc.range, triggerKind, cts));\n        };\n        trace('creating rename input field and awaiting its result');\n        const supportPreview = this._bulkEditService.hasPreviewHandler() && this._configService.getValue(this.editor.getModel().uri, 'editor.rename.enablePreview');\n        const inputFieldResult = await this._renameWidget.getInput(loc.range, loc.text, supportPreview, newSymbolNamesProviders.length > 0 ? requestRenameSuggestions : undefined, cts2);\n        trace('received response from rename input field');\n        if (newSymbolNamesProviders.length > 0) { // @ulugbekna: we're interested only in telemetry for rename suggestions currently\n            this._reportTelemetry(newSymbolNamesProviders.length, model.getLanguageId(), inputFieldResult);\n        }\n        // no result, only hint to focus the editor or not\n        if (typeof inputFieldResult === 'boolean') {\n            trace(`returning early - rename input field response - ${inputFieldResult}`);\n            if (inputFieldResult) {\n                this.editor.focus();\n            }\n            cts2.dispose();\n            return undefined;\n        }\n        this.editor.focus();\n        trace('requesting rename edits');\n        const renameOperation = raceCancellation(skeleton.provideRenameEdits(inputFieldResult.newName, cts2.token), cts2.token).then(async (renameResult) => {\n            if (!renameResult) {\n                trace('returning early - no rename edits result');\n                return;\n            }\n            if (!this.editor.hasModel()) {\n                trace('returning early - no model after rename edits are provided');\n                return;\n            }\n            if (renameResult.rejectReason) {\n                trace(`returning early - rejected with reason: ${renameResult.rejectReason}`);\n                this._notificationService.info(renameResult.rejectReason);\n                return;\n            }\n            // collapse selection to active end\n            this.editor.setSelection(Range.fromPositions(this.editor.getSelection().getPosition()));\n            trace('applying edits');\n            this._bulkEditService.apply(renameResult, {\n                editor: this.editor,\n                showPreview: inputFieldResult.wantsPreview,\n                label: nls.localize('label', \"Renaming '{0}' to '{1}'\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                code: 'undoredo.rename',\n                quotableLabel: nls.localize('quotableLabel', \"Renaming {0} to {1}\", loc === null || loc === void 0 ? void 0 : loc.text, inputFieldResult.newName),\n                respectAutoSaveConfig: true\n            }).then(result => {\n                trace('edits applied');\n                if (result.ariaSummary) {\n                    alert(nls.localize('aria', \"Successfully renamed '{0}' to '{1}'. Summary: {2}\", loc.text, inputFieldResult.newName, result.ariaSummary));\n                }\n            }).catch(err => {\n                trace(`error when applying edits ${JSON.stringify(err, null, '\\t')}`);\n                this._notificationService.error(nls.localize('rename.failedApply', \"Rename failed to apply edits\"));\n                this._logService.error(err);\n            });\n        }, err => {\n            trace('error when providing rename edits', JSON.stringify(err, null, '\\t'));\n            this._notificationService.error(nls.localize('rename.failed', \"Rename failed to compute edits\"));\n            this._logService.error(err);\n        }).finally(() => {\n            cts2.dispose();\n        });\n        trace('returning rename operation');\n        this._progressService.showWhile(renameOperation, 250);\n        return renameOperation;\n    }\n    acceptRenameInput(wantsPreview) {\n        this._renameWidget.acceptInput(wantsPreview);\n    }\n    cancelRenameInput() {\n        this._renameWidget.cancelInput(true, 'cancelRenameInput command');\n    }\n    focusNextRenameSuggestion() {\n        this._renameWidget.focusNextRenameSuggestion();\n    }\n    focusPreviousRenameSuggestion() {\n        this._renameWidget.focusPreviousRenameSuggestion();\n    }\n    _reportTelemetry(nRenameSuggestionProviders, languageId, inputFieldResult) {\n        const value = typeof inputFieldResult === 'boolean'\n            ? {\n                kind: 'cancelled',\n                languageId,\n                nRenameSuggestionProviders,\n            }\n            : {\n                kind: 'accepted',\n                languageId,\n                nRenameSuggestionProviders,\n                source: inputFieldResult.stats.source.k,\n                nRenameSuggestions: inputFieldResult.stats.nRenameSuggestions,\n                timeBeforeFirstInputFieldEdit: inputFieldResult.stats.timeBeforeFirstInputFieldEdit,\n                wantsPreview: inputFieldResult.wantsPreview,\n                nRenameSuggestionsInvocations: inputFieldResult.stats.nRenameSuggestionsInvocations,\n                hadAutomaticRenameSuggestionsInvocation: inputFieldResult.stats.hadAutomaticRenameSuggestionsInvocation,\n            };\n        this._telemetryService.publicLog2('renameInvokedEvent', value);\n    }\n};\nRenameController.ID = 'editor.contrib.renameController';\nRenameController = RenameController_1 = __decorate([\n    __param(1, IInstantiationService),\n    __param(2, INotificationService),\n    __param(3, IBulkEditService),\n    __param(4, IEditorProgressService),\n    __param(5, ILogService),\n    __param(6, ITextResourceConfigurationService),\n    __param(7, ILanguageFeaturesService),\n    __param(8, ITelemetryService)\n], RenameController);\n// ---- action implementation\nexport class RenameAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.rename',\n            label: nls.localize('rename.label', \"Rename Symbol\"),\n            alias: 'Rename Symbol',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasRenameProvider),\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 60 /* KeyCode.F2 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            contextMenuOpts: {\n                group: '1_modification',\n                order: 1.1\n            }\n        });\n    }\n    runCommand(accessor, args) {\n        const editorService = accessor.get(ICodeEditorService);\n        const [uri, pos] = Array.isArray(args) && args || [undefined, undefined];\n        if (URI.isUri(uri) && Position.isIPosition(pos)) {\n            return editorService.openCodeEditor({ resource: uri }, editorService.getActiveCodeEditor()).then(editor => {\n                if (!editor) {\n                    return;\n                }\n                editor.setPosition(pos);\n                editor.invokeWithinContext(accessor => {\n                    this.reportTelemetry(accessor, editor);\n                    return this.run(accessor, editor);\n                });\n            }, onUnexpectedError);\n        }\n        return super.runCommand(accessor, args);\n    }\n    run(accessor, editor) {\n        const logService = accessor.get(ILogService);\n        const controller = RenameController.get(editor);\n        if (controller) {\n            logService.trace('[RenameAction] got controller, running...');\n            return controller.run();\n        }\n        logService.trace('[RenameAction] returning early - controller missing');\n        return Promise.resolve();\n    }\n}\nregisterEditorContribution(RenameController.ID, RenameController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(RenameAction);\nconst RenameCommand = EditorCommand.bindToContribution(RenameController.get);\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.acceptRenameInput(false),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'acceptRenameInputWithPreview',\n    precondition: ContextKeyExpr.and(CONTEXT_RENAME_INPUT_VISIBLE, ContextKeyExpr.has('config.editor.rename.enablePreview')),\n    handler: x => x.acceptRenameInput(true),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: ContextKeyExpr.and(EditorContextKeys.focus, ContextKeyExpr.not('isComposing')),\n        primary: 2048 /* KeyMod.CtrlCmd */ + 3 /* KeyCode.Enter */\n    }\n}));\nregisterEditorCommand(new RenameCommand({\n    id: 'cancelRenameInput',\n    precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n    handler: x => x.cancelRenameInput(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n        kbExpr: EditorContextKeys.focus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterAction2(class FocusNextRenameSuggestion extends Action2 {\n    constructor() {\n        super({\n            id: 'focusNextRenameSuggestion',\n            title: {\n                ...nls.localize2('focusNextRenameSuggestion', \"Focus Next Rename Suggestion\"),\n            },\n            precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n            keybinding: [\n                {\n                    primary: 18 /* KeyCode.DownArrow */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n                }\n            ]\n        });\n    }\n    run(accessor) {\n        const currentEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (!currentEditor) {\n            return;\n        }\n        const controller = RenameController.get(currentEditor);\n        if (!controller) {\n            return;\n        }\n        controller.focusNextRenameSuggestion();\n    }\n});\nregisterAction2(class FocusPreviousRenameSuggestion extends Action2 {\n    constructor() {\n        super({\n            id: 'focusPreviousRenameSuggestion',\n            title: {\n                ...nls.localize2('focusPreviousRenameSuggestion', \"Focus Previous Rename Suggestion\"),\n            },\n            precondition: CONTEXT_RENAME_INPUT_VISIBLE,\n            keybinding: [\n                {\n                    primary: 16 /* KeyCode.UpArrow */,\n                    weight: 100 /* KeybindingWeight.EditorContrib */ + 99,\n                }\n            ]\n        });\n    }\n    run(accessor) {\n        const currentEditor = accessor.get(ICodeEditorService).getFocusedCodeEditor();\n        if (!currentEditor) {\n            return;\n        }\n        const controller = RenameController.get(currentEditor);\n        if (!controller) {\n            return;\n        }\n        controller.focusPreviousRenameSuggestion();\n    }\n});\n// ---- api bridge command\nregisterModelAndPositionCommand('_executeDocumentRenameProvider', function (accessor, model, position, ...args) {\n    const [newName] = args;\n    assertType(typeof newName === 'string');\n    const { renameProvider } = accessor.get(ILanguageFeaturesService);\n    return rename(renameProvider, model, position, newName);\n});\nregisterModelAndPositionCommand('_executePrepareRename', async function (accessor, model, position) {\n    const { renameProvider } = accessor.get(ILanguageFeaturesService);\n    const skeleton = new RenameSkeleton(model, position, renameProvider);\n    const loc = await skeleton.resolveRenameLocation(CancellationToken.None);\n    if (loc === null || loc === void 0 ? void 0 : loc.rejectReason) {\n        throw new Error(loc.rejectReason);\n    }\n    return loc;\n});\n//todo@jrieken use editor options world\nRegistry.as(Extensions.Configuration).registerConfiguration({\n    id: 'editor',\n    properties: {\n        'editor.rename.enablePreview': {\n            scope: 5 /* ConfigurationScope.LANGUAGE_OVERRIDABLE */,\n            description: nls.localize('enablePreview', \"Enable/disable the ability to preview changes before renaming\"),\n            default: true,\n            type: 'boolean'\n        }\n    }\n});\n"],"names":["LongLinesHelper","Disposable","constructor","_editor","super","this","_register","onMouseDown","e","stopRenderingLineAfter","getOption","target","type","position","column","updateOptions","ID","registerEditorContribution","MessageController_1","__decorate","decorators","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","MessageController","get","editor","getContribution","contextKeyService","_openerService","_messageWidget","MutableDisposable","_messageListeners","DisposableStore","_mouseOverMessage","_visible","MESSAGE_VISIBLE","bindTo","dispose","_a","_message","reset","showMessage","message","bounds","alert","isMarkdownString","value","set","clear","renderMarkdown","actionHandler","callback","url","closeMessage","openLinkFromMarkdown","isTrusted","undefined","disposables","MessageWidget","element","add","Event","debounce","onDidBlurEditorText","last","event","dom","getDomNode","onDidChangeCursorPosition","onDidDispose","onDidChangeModel","MOUSE_ENTER","MOUSE_LEAVE","onMouseMove","containsPosition","Range","lineNumber","fadeOut","RawContextKey","nls","IContextKeyService","IOpenerService","MessageCommand","EditorCommand","bindToContribution","registerEditorCommand","id","precondition","handler","kbOpts","weight","primary","messageWidget","clearTimeout","handle","removeEventListener","setTimeout","addEventListener","classList","_ref","text","allowEditorOverflow","suppressMouseDown","revealLinesInCenterIfOutsideViewport","_position","_domNode","document","createElement","style","marginLeft","anchorTop","appendChild","textContent","anchorBottom","addContentWidget","removeContentWidget","getId","getPosition","preference","positionAffinity","afterRender","toggle","SelectionHighlighter_1","announceCursorChange","previousCursorState","cursorState","cursorDiff","filter","cs","find","pcs","equals","cursorPositions","map","concat","viewState","join","msg","status","InsertCursorAbove","EditorAction","label","alias","kbExpr","EditorContextKeys","editorTextFocus","linux","secondary","menuOpts","menuId","MenuId","MenubarSelectionMenu","group","title","comment","order","run","accessor","args","hasModel","useLogicalLine","logicalLine","viewModel","_getViewModel","cursorConfig","readOnly","model","pushStackElement","getCursorStates","setCursorStates","source","CursorMoveCommands","addCursorUp","revealTopMostCursor","InsertCursorBelow","addCursorDown","revealBottomMostCursor","InsertCursorAtEndOfEachLineSelected","getCursorsForSelection","selection","result","isEmpty","startLineNumber","endLineNumber","currentLineMaxColumn","getLineMaxColumn","push","Selection","endColumn","getModel","selections","getSelections","newSelections","forEach","sel","setSelections","InsertCursorAtEndOfLineSelected","lineCount","getLineCount","startColumn","InsertCursorAtTopOfLineSelected","MultiCursorSessionResult","revealRange","revealScrollType","MultiCursorSession","create","findController","findState","getState","hasTextFocus","isRevealed","searchString","wholeWord","matchCase","isDisconnectedFromFindController","s","getSelection","searchText","currentMatch","word","getConfiguredWordAtPosition","getStartPosition","getValueInRange","replace","addSelectionToNextFindMatch","nextMatch","_getNextMatch","allSelections","moveSelectionToNextFindMatch","slice","highlightFindOptions","lastAddedSelection","findNextMatch","getEndPosition","range","addSelectionToPreviousFindMatch","previousMatch","_getPreviousMatch","moveSelectionToPreviousFindMatch","findPreviousMatch","selectAll","searchScope","editorModel","findMatches","MultiCursorSelectionController","_sessionDispose","_ignoreSelectionChange","_session","_endSession","_beginSessionIfNeeded","session","newState","wholeWordOverride","matchCaseOverride","isRegexOverride","change","onDidChangeCursorSelection","onFindReplaceStateChange","_setSelections","_expandEmptyToWord","_applySessionResult","revealRangeInCenterIfOutsideViewport","getSession","modelRangesContainSameText","resultingSelections","len","matches","isRegex","editorSelection","match","intersectRanges","m","MultiCursorSelectionControllerAction","multiCursorController","CommonFindController","_run","newFindController","IInstantiationService","createInstance","AddSelectionToNextFindMatchAction","focus","AddSelectionToPreviousFindMatchAction","MoveSelectionToNextFindMatchAction","KeyChord","MoveSelectionToPreviousFindMatchAction","SelectHighlightsAction","CompatChangeAll","ContextKeyExpr","and","writable","contextMenuOpts","SelectionHighlighterState","_model","_searchText","_matchCase","_wordSeparators","prevState","_modelVersionId","getVersionId","_cachedFindMatches","sort","compareRangesUsingStarts","SelectionHighlighter","_languageFeaturesService","_isEnabled","_decorations","createDecorationsCollection","updateSoon","RunOnceScheduler","_update","state","onDidChangeConfiguration","reason","_setState","schedule","onDidChangeModelContent","_createState","oldState","isEnabled","test","caseSensitive","findStateSearchString","toLowerCase","mySearchString","isTooLargeForTokenization","allMatches","j","lenJ","cmp","areIntersecting","occurrenceHighlighting","hasSemanticHighlights","documentHighlightProvider","has","decorations","options","getSelectionHighlightDecorationOptions","ranges","selectedText","ILanguageFeaturesService","FocusNextCursor","metadata","description","Array","from","firstCursor","shift","revealPrimaryCursor","FocusPreviousCursor","pop","unshift","registerEditorAction","Context","Visible","MultipleSignatures","async","provideSignatureHelp","registry","context","token","supports","ordered","support","err","onUnexpectedExternalError","ParameterHintState","CommandsRegistry","registerCommand","_len","_key","uri","triggerCharacter","assertType","URI","isUri","Position","isIPosition","languageFeaturesService","ref","ITextModelService","createModelReference","signatureHelpProvider","object","textEditorModel","lift","triggerKind","languages","Invoke","isRetrigger","CancellationToken","None","Default","Pending","request","previouslyActiveHints","Active","hints","ParameterHintsModel","providers","delay","DEFAULT_DELAY","_onChangedHints","Emitter","onChangedHints","triggerOnType","_state","_pendingTriggers","_lastSignatureHelpResult","triggerChars","CharacterSet","retriggerChars","triggerId","throttledDelayer","Delayer","onDidBlurEditorWidget","cancel","onEditorConfigurationChange","onModelChanged","onDidChangeModelLanguage","_","onCursorChange","onModelContentChange","onDidChange","onDidType","silent","fire","trigger","doTrigger","catch","onUnexpectedError","next","signatures","activeSignature","cycle","updateActiveSignature","previous","first","activeSignatureHelp","getLastActiveHints","reduce","mergeTriggerContexts","triggerContext","createCancelablePromise","error","isTriggered","ch","signatureHelpTriggerCharacters","charCode","charCodeAt","signatureHelpRetriggerCharacters","lastCharIndex","triggerCharCode","TriggerCharacter","charAt","ContentChange","enabled","current","ParameterHintsWidget_1","$","parameterHintsNextIcon","registerIcon","Codicon","chevronDown","parameterHintsPreviousIcon","chevronUp","ParameterHintsWidget","openerService","languageService","renderDisposeables","visible","announcedLabel","markdownRenderer","MarkdownRenderer","keyVisible","keyMultipleSignatures","createParameterHintDOMNodes","wrapper","tabIndex","controls","ThemeIcon","asCSSSelector","overloads","stop","body","scrollbar","DomScrollableElement","alwaysConsumeMouseWheel","signature","docs","userSelect","domNodes","hide","layoutContentWidget","updateFont","fontInfo","fontSize","lineHeight","chain","bind","hasChanged","onDidLayoutChange","updateMaxHeight","show","remove","render","multiple","innerText","code","fontFamily","hasParameters","parameters","activeParameterIndex","activeParameter","renderParameters","documentation","renderedContents","renderMarkdownDocs","hasDocs","String","padStart","toString","labelToAnnounce","param","isArray","substring","aria","scanDomNode","markdown","asyncRenderCallback","assertIsDefined","parent","start","end","getParameterLabelOffsets","beforeSpan","paramSpan","className","afterSpan","paramIdx","regex","RegExp","escapeRegExpCharacters","idx","lastIndex","height","Math","max","getLayoutInfo","maxHeight","getElementsByClassName","ILanguageService","registerColor","dark","listHighlightForeground","light","hcDark","hcLight","ParameterHintsController_1","ParameterHintsController","instantiationService","newParameterHints","widget","rawValue","Lazy","TriggerParameterHintsAction","hasSignatureHelpProvider","controller","ParameterHintsCommand","x","mac","IPeekViewService","createDecorator","PeekContext","registerSingleton","_widgets","Map","addExclusiveWidget","existing","listener","onDidClose","data","delete","inPeekEditor","notInPeekEditor","toNegated","PeekContextController","EmbeddedCodeEditorWidget","getOuterEditor","ICodeEditorService","getFocusedCodeEditor","getParentEditor","defaultOptions","headerBackgroundColor","Color","white","primaryHeadingColor","fromHex","secondaryHeadingColor","PeekViewWidget","ZoneWidget","_onDidClose","objects","disposed","styles","_applyStyles","_headElement","backgroundColor","_primaryHeading","color","_secondaryHeading","_bodyElement","frameColor","borderColor","_fillContainer","container","setCssClass","_fillHead","_fillBody","noCloseAction","_titleElement","supportOnTitleClick","_onTitleClick","_fillTitleIcon","_metaHeading","actionsContainer","actionBarOptions","_getActionBarOptions","_actionbarWidget","ActionBar","_disposables","Action","asClassName","close","Promise","resolve","icon","actionViewItemProvider","createActionViewItem","orientation","setTitle","primaryHeading","secondaryHeading","setAttribute","setMetaTitle","_doLayout","heightInPixel","widthInPixel","_isShowing","headHeight","ceil","bodyHeight","round","_doLayoutHead","_doLayoutBody","peekViewTitleBackground","black","peekViewTitleForeground","editorForeground","peekViewTitleInfoForeground","peekViewBorder","editorInfoForeground","contrastBorder","peekViewResultsBackground","peekViewEditorBackground","activeContrastBorder","AbstractEditorCommandsQuickAccessProvider","AbstractCommandsQuickAccessProvider","keybindingService","commandService","telemetryService","dialogService","getCodeEditorCommandPicks","activeTextEditorControl","editorCommandPicks","editorAction","getSupportedActions","commandDescription","isLocalizedString","original","commandId","commandAlias","stripIcons","AbstractEditorNavigationQuickAccessProvider","rangeHighlightDecorationId","provide","picker","canAcceptInBackground","matchOnLabel","matchOnDescription","matchOnDetail","sortByLabel","pickerDisposable","doProvide","onDidActiveTextEditorControlChange","canProvideWithTextEditor","codeEditor","getCodeEditor","lastKnownEditorViewState","saveViewState","restoreViewState","createSingleCallFunction","onCancellationRequested","call","toDisposable","clearDecorations","provideWithTextEditor","provideWithoutTextEditor","gotoLocation","setSelection","revealRangeInCenter","preserveFocus","getLineContent","isDiffEditor","modified","addDecorations","changeDecorations","changeAccessor","deleteDecorations","overviewRulerDecorationId","rangeHighlightId","newDecorations","isWholeLine","overviewRuler","themeColorFromId","overviewRulerRangeHighlight","OverviewRulerLane","Full","deltaDecorations","AbstractGotoLineQuickAccessProvider","localize","items","ariaLabel","onDidAccept","item","selectedItems","isValidLineNumber","toRange","keyMods","inBackground","updatePickerAndEditor","parsePosition","trim","substr","PREFIX","getPickLabel","onDidChangeValue","getOptions","renderType","lineNumbers","numbers","split","part","parseInt","isNaN","endLine","isValidColumn","positionCandidate","validatePosition","_b","AbstractGotoSymbolQuickAccessProvider_1","AbstractGotoSymbolQuickAccessProvider","_outlineModelService","provideLabelPick","documentSymbolProvider","doProvideWithEditorSymbols","doProvideWithoutEditorSymbols","waitForLanguageSymbolRegistry","isCancellationRequested","index","kind","symbolProviderRegistryPromise","DeferredPromise","symbolProviderListener","complete","p","onDidTriggerItemButton","forceSideBySide","symbolsPromise","getDocumentSymbols","picksCts","updatePickerItems","busy","CancellationTokenSource","query","prepareQuery","doGetSymbolPicks","positionToEnclose","candidate","findLast","Boolean","decoration","activeItems","onDidChangeActive","symbols","filterBySymbolKind","indexOf","SCOPE_PREFIX","filterPos","symbolQuery","containerQuery","buttons","values","pieceToQuery","openSideBySideDirection","iconClass","splitHorizontal","splitVertical","tooltip","filteredSymbolPicks","symbol","symbolLabel","name","symbolLabelWithIcon","SymbolKinds","toIcon","symbolLabelIconOffset","symbolScore","symbolMatches","containerScore","containerMatches","containerLabel","containerName","extraContainerLabel","skipContainerQuery","scoreFuzzy2","deprecated","tags","score","getAriaLabelForSymbol","highlights","collapseToStart","selectionRange","strikethrough","sortedFilteredSymbolPicks","symbolA","symbolB","compareByKindAndScore","compareByScore","symbolPicks","lastSymbolKind","lastSeparator","lastSymbolKindCounter","updateLastSeparatorLabel","format","NLS_SYMBOL_KIND_CACHE","FALLBACK_NLS_SYMBOL_KIND","symbolPick","kindA","kindB","localeCompare","getOrCreate","asListOfDocumentSymbols","PREFIX_BY_CATEGORY","IOutlineModelService","ReadOnlyMessageController","onDidAttemptReadOnlyEdit","_onDidAttemptReadOnlyEdit","messageController","isSimpleWidget","MarkdownString","CONTEXT_RENAME_INPUT_VISIBLE","RenameWidget","_acceptKeybindings","_themeService","_keybindingService","_logService","_visibleContextKey","_isEditingRenameCandidate","_nRenameSuggestionsInvocations","_hadAutomaticRenameSuggestionsInvocation","_candidates","Set","_beforeFirstInputFieldEditSW","StopWatch","_inputWithButton","InputWithButton","_updateFont","onDidColorThemeChange","_updateStyles","domNode","_renameCandidateListView","RenameCandidateListView","onFocusChange","newSymbolName","input","onSelectionChange","acceptInput","onDidInputChange","_c","_d","focusedCandidate","_timeBeforeFirstInputFieldEdit","elapsed","_renameCandidateProvidersCts","clearFocus","_label","getColorTheme","theme","_e","widgetShadowColor","getColor","widgetShadow","widgetBorderColor","widgetBorder","editorWidgetBackground","boxShadow","border","inputForeground","inputBorder","inputBackground","borderWidth","borderStyle","applyFontInfo","_computeLabelFontSize","editorFontSize","bodyBox","ownerDocument","editorBox","cursorBoxTop","_getTopForPosition","_nPxAvailableAbove","top","_nPxAvailableBelow","totalHeight","candidateViewHeight","RenameCandidateView","positionPreference","beforeRender","accept","preview","lookupKeybinding","getLabel","minWidth","_trace","cancelInput","inputBoxHeight","labelHeight","totalHeightAvailable","layout","width","wantsPreview","_currentAcceptInput","focusEditor","caller","_currentCancelInput","focusNextRenameSuggestion","focusNext","_currentName","focusPreviousRenameSuggestion","focusPrevious","getInput","where","currentName","supportPreview","requestRenameCandidates","cts","selectionStart","selectionEnd","_getSelection","_renameCts","disposeOnDone","button","display","_requestRenameCandidatesOnce","_requestRenameCandidates","KEY_DOWN","keyEvent","StandardKeyboardEvent","stopPropagation","preventDefault","size","inputResult","finally","_hide","clearCandidates","nRenameSuggestions","nCandidates","newName","k","stats","timeBeforeFirstInputFieldEdit","nRenameSuggestionsInvocations","hadAutomaticRenameSuggestionsInvocation","hasFocus","_show","isManuallyTriggered","buttonState","NewSymbolNameTriggerKind","Automatic","candidates","setSparkleButton","setStopButton","_updateRenameCandidates","spansMultipleLines","containsRange","min","revealLineInCenterIfOutsideViewport","setSelectionRange","getAttribute","_this","trace","namesListResults","raceCancellation","allSettled","newNames","flatMap","namesListResult","isDefined","distinctNames","arrays","v","validDistinctNames","n","setCandidates","visibleRanges","getVisibleRanges","firstLineInViewport","warn","getTopForLineNumber","_len2","_key2","IThemeService","IKeybindingService","ILogService","opts","_availableHeight","_minimumWidth","_lineHeight","_typicalHalfwidthCharacterWidth","typicalHalfwidthCharacterWidth","_listContainer","_listWidget","_createListWidget","_candidateViewHeight","onDidChangeFocus","elements","onDidChangeSelection","onDidBlur","setFocus","getListStyles","listInactiveFocusForeground","quickInputListFocusForeground","listInactiveFocusBackground","quickInputListFocusBackground","_ref2","splice","_pickListHeight","_pickListWidth","selectedElement","getSelectedElements","focusedElement","getFocusedElements","focusedIxs","getFocus","focusFirst","reveal","focused","focusLast","heightToFitAllCandidates","longestCandidateWidth","virtualDelegate","getTemplateId","getHeight","renderer","templateId","renderTemplate","renderElement","templateData","populate","disposeTemplate","List","keyboardSupport","mouseSupport","multipleSelectionSupport","_onDidInputChange","flexDirection","alignItems","_inputNode","_buttonNode","_buttonGenHoverText","_buttonCancelHoverText","_buttonHover","getBaseLayerHoverDelegate","setupUpdatableHover","getDefaultHoverDelegate","INPUT","keyCode","CLICK","FOCUS","outlineWidth","outlineStyle","outlineOffset","outlineColor","BLUR","outline","_buttonState","_sparkleIcon","renderIcon","sparkle","update","_stopIcon","primitiveSquare","columnGap","padding","_PADDING","iconContainer","_icon","domFontInfo","_updateIcon","_updateLabel","isAIGenerated","includes","NewSymbolNameTag","AIGenerated","_ref3","RenameController_1","RenameSkeleton","_providerRenameIdx","_providers","hasProvider","resolveRenameLocation","rejects","provider","res","rejectReason","getWordAtPosition","fromPositions","provideRenameEdits","_provideRenameEdits","edits","rename","skeleton","loc","RenameController","_instaService","_notificationService","_bulkEditService","_progressService","_configService","_telemetryService","_disposableStore","_cts","_renameWidget","renameProvider","cts1","EditorStateCancellationTokenSource","resolveLocationOperation","showWhile","CancellationError","JSON","stringify","Error","cts2","newSymbolNamesProviders","newSymbolNamesProvider","all","resolvedNewSymbolnamesProviders","supportsAutomaticNewSymbolNamesTriggerKind","hasPreviewHandler","getValue","inputFieldResult","requestRenameSuggestions","supportsAutomatic","provideNewSymbolNames","_reportTelemetry","getLanguageId","renameOperation","then","renameResult","info","apply","showPreview","quotableLabel","respectAutoSaveConfig","ariaSummary","acceptRenameInput","cancelRenameInput","nRenameSuggestionProviders","languageId","publicLog2","INotificationService","IBulkEditService","IEditorProgressService","ITextResourceConfigurationService","ITelemetryService","RenameAction","hasRenameProvider","runCommand","editorService","pos","openCodeEditor","resource","getActiveCodeEditor","setPosition","invokeWithinContext","reportTelemetry","logService","RenameCommand","not","registerAction2","Action2","keybinding","currentEditor","registerModelAndPositionCommand","Registry","as","Extensions","Configuration","registerConfiguration","properties","scope","default"],"sourceRoot":""}