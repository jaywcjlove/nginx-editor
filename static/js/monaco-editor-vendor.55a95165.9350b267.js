"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[4666],{2890:function(e,t,i){i.d(t,{CH:function(){return h},CR:function(){return d},D4:function(){return c},u7:function(){return u},xh:function(){return s},yu:function(){return l}});var n=i(60136),o=i(27277),r=i(15671),a=i(43144),s=function(e){(0,n.Z)(i,e);var t=(0,o.Z)(i);function i(e,n,o){var a;return(0,r.Z)(this,i),(a=t.call(this,e,n))._renderingContextBrand=void 0,a._viewLines=o,a}return(0,a.Z)(i,[{key:"linesVisibleRangesForRange",value:function(e,t){return this._viewLines.linesVisibleRangesForRange(e,t)}},{key:"visibleRangeForPosition",value:function(e){return this._viewLines.visibleRangeForPosition(e)}}]),i}(function(){function e(t,i){(0,r.Z)(this,e),this._restrictedRenderingContextBrand=void 0,this._viewLayout=t,this.viewportData=i,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;var n=this._viewLayout.getCurrentViewport();this.scrollTop=n.top,this.scrollLeft=n.left,this.viewportWidth=n.width,this.viewportHeight=n.height}return(0,a.Z)(e,[{key:"getScrolledTopFromAbsoluteTop",value:function(e){return e-this.scrollTop}},{key:"getVerticalOffsetForLineNumber",value:function(e,t){return this._viewLayout.getVerticalOffsetForLineNumber(e,t)}},{key:"getVerticalOffsetAfterLineNumber",value:function(e,t){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,t)}},{key:"getDecorationsInViewport",value:function(){return this.viewportData.getDecorationsInViewport()}}]),e}()),u=(0,a.Z)((function e(t,i,n,o){(0,r.Z)(this,e),this.outsideRenderedLine=t,this.lineNumber=i,this.ranges=n,this.continuesOnNextLine=o})),l=function(){function e(t,i){(0,r.Z)(this,e),this._horizontalRangeBrand=void 0,this.left=Math.round(t),this.width=Math.round(i)}return(0,a.Z)(e,[{key:"toString",value:function(){return"[".concat(this.left,",").concat(this.width,"]")}}],[{key:"from",value:function(t){for(var i=new Array(t.length),n=0,o=t.length;n<o;n++){var r=t[n];i[n]=new e(r.left,r.width)}return i}}]),e}(),d=function(){function e(t,i){(0,r.Z)(this,e),this._floatHorizontalRangeBrand=void 0,this.left=t,this.width=i}return(0,a.Z)(e,[{key:"toString",value:function(){return"[".concat(this.left,",").concat(this.width,"]")}}],[{key:"compare",value:function(e,t){return e.left-t.left}}]),e}(),c=(0,a.Z)((function e(t,i){(0,r.Z)(this,e),this.outsideRenderedLine=t,this.originalLeft=i,this.left=Math.round(this.originalLeft)})),h=(0,a.Z)((function e(t,i){(0,r.Z)(this,e),this.outsideRenderedLine=t,this.ranges=i}))},63835:function(e,t,i){i.d(t,{N:function(){return u}});var n=i(15671),o=i(43144),r=i(53651),a=i(65631),s=i(90650),u=function(){function e(t,i,o,r){(0,n.Z)(this,e),this.configuration=t,this.viewModel=i,this.userInputEvents=o,this.commandDelegate=r}return(0,o.Z)(e,[{key:"paste",value:function(e,t,i,n){this.commandDelegate.paste(e,t,i,n)}},{key:"type",value:function(e){this.commandDelegate.type(e)}},{key:"compositionType",value:function(e,t,i,n){this.commandDelegate.compositionType(e,t,i,n)}},{key:"compositionStart",value:function(){this.commandDelegate.startComposition()}},{key:"compositionEnd",value:function(){this.commandDelegate.endComposition()}},{key:"cut",value:function(){this.commandDelegate.cut()}},{key:"setSelection",value:function(e){r.CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}},{key:"_validateViewColumn",value:function(e){var t=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<t?new a.L(e.lineNumber,t):e}},{key:"_hasMulticursorModifier",value:function(e){switch(this.configuration.options.get(76)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}},{key:"_hasNonMulticursorModifier",value:function(e){switch(this.configuration.options.get(76)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}},{key:"dispatchMouse",value:function(e){var t=this.configuration.options,i=s.IJ&&t.get(105),n=t.get(21);e.middleButton&&!i?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):2===e.mouseDownCount?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||n?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}},{key:"_usualArgs",value:function(e,t){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:t}}},{key:"moveTo",value:function(e,t){r.CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_moveToSelect",value:function(e,t){r.CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_columnSelect",value:function(e,t,i){e=this._validateViewColumn(e),r.CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:t,doColumnSelect:i})}},{key:"_createCursor",value:function(e,t){e=this._validateViewColumn(e),r.CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:t})}},{key:"_lastCursorMoveToSelect",value:function(e,t){r.CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_wordSelect",value:function(e,t){r.CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_wordSelectDrag",value:function(e,t){r.CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_lastCursorWordSelect",value:function(e,t){r.CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_lineSelect",value:function(e,t){r.CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_lineSelectDrag",value:function(e,t){r.CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_lastCursorLineSelect",value:function(e,t){r.CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_lastCursorLineSelectDrag",value:function(e,t){r.CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,t))}},{key:"_selectAll",value:function(){r.CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}},{key:"_convertViewToModelPosition",value:function(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}},{key:"emitKeyDown",value:function(e){this.userInputEvents.emitKeyDown(e)}},{key:"emitKeyUp",value:function(e){this.userInputEvents.emitKeyUp(e)}},{key:"emitContextMenu",value:function(e){this.userInputEvents.emitContextMenu(e)}},{key:"emitMouseMove",value:function(e){this.userInputEvents.emitMouseMove(e)}},{key:"emitMouseLeave",value:function(e){this.userInputEvents.emitMouseLeave(e)}},{key:"emitMouseUp",value:function(e){this.userInputEvents.emitMouseUp(e)}},{key:"emitMouseDown",value:function(e){this.userInputEvents.emitMouseDown(e)}},{key:"emitMouseDrag",value:function(e){this.userInputEvents.emitMouseDrag(e)}},{key:"emitMouseDrop",value:function(e){this.userInputEvents.emitMouseDrop(e)}},{key:"emitMouseDropCanceled",value:function(){this.userInputEvents.emitMouseDropCanceled()}},{key:"emitMouseWheel",value:function(e){this.userInputEvents.emitMouseWheel(e)}}]),e}()},75861:function(e,t,i){i.d(t,{F:function(){return l},G:function(){return d}});var n=i(15671),o=i(43144),r=i(65379),a=i(81200),s=i(74146),u=i(53603),l=function(){function e(t){(0,n.Z)(this,e),this._createLine=t,this._set(1,[])}return(0,o.Z)(e,[{key:"flush",value:function(){this._set(1,[])}},{key:"_set",value:function(e,t){this._lines=t,this._rendLineNumberStart=e}},{key:"_get",value:function(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}},{key:"getStartLineNumber",value:function(){return this._rendLineNumberStart}},{key:"getEndLineNumber",value:function(){return this._rendLineNumberStart+this._lines.length-1}},{key:"getCount",value:function(){return this._lines.length}},{key:"getLine",value:function(e){var t=e-this._rendLineNumberStart;if(t<0||t>=this._lines.length)throw new s.he("Illegal value for lineNumber");return this._lines[t]}},{key:"onLinesDeleted",value:function(e,t){if(0===this.getCount())return null;var i=this.getStartLineNumber(),n=this.getEndLineNumber();if(t<i){var o=t-e+1;return this._rendLineNumberStart-=o,null}if(e>n)return null;for(var r=0,a=0,s=i;s<=n;s++){var u=s-this._rendLineNumberStart;e<=s&&s<=t&&(0===a?(r=u,a=1):a++)}if(e<i){var l=0;l=t<i?t-e+1:i-e,this._rendLineNumberStart-=l}return this._lines.splice(r,a)}},{key:"onLinesChanged",value:function(e,t){var i=e+t-1;if(0===this.getCount())return!1;for(var n=this.getStartLineNumber(),o=this.getEndLineNumber(),r=!1,a=e;a<=i;a++)a>=n&&a<=o&&(this._lines[a-this._rendLineNumberStart].onContentChanged(),r=!0);return r}},{key:"onLinesInserted",value:function(e,t){if(0===this.getCount())return null;var i=t-e+1,n=this.getStartLineNumber(),o=this.getEndLineNumber();if(e<=n)return this._rendLineNumberStart+=i,null;if(e>o)return null;if(i+e>o)return this._lines.splice(e-this._rendLineNumberStart,o-e+1);for(var r=[],a=0;a<i;a++)r[a]=this._createLine();var s=e-this._rendLineNumberStart,u=this._lines.slice(0,s),l=this._lines.slice(s,this._lines.length-i),d=this._lines.slice(this._lines.length-i,this._lines.length);return this._lines=u.concat(r).concat(l),d}},{key:"onTokensChanged",value:function(e){if(0===this.getCount())return!1;for(var t=this.getStartLineNumber(),i=this.getEndLineNumber(),n=!1,o=0,r=e.length;o<r;o++){var a=e[o];if(!(a.toLineNumber<t||a.fromLineNumber>i))for(var s=Math.max(t,a.fromLineNumber),u=Math.min(i,a.toLineNumber),l=s;l<=u;l++){var d=l-this._rendLineNumberStart;this._lines[d].onTokensChanged(),n=!0}}return n}}]),e}(),d=function(){function e(t){var i=this;(0,n.Z)(this,e),this._host=t,this.domNode=this._createDomNode(),this._linesCollection=new l((function(){return i._host.createVisibleLine()}))}return(0,o.Z)(e,[{key:"_createDomNode",value:function(){var e=(0,r.X)(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}},{key:"onConfigurationChanged",value:function(e){return!!e.hasChanged(142)}},{key:"onFlushed",value:function(e){return this._linesCollection.flush(),!0}},{key:"onLinesChanged",value:function(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}},{key:"onLinesDeleted",value:function(e){var t=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(t)for(var i=0,n=t.length;i<n;i++){var o=t[i].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}},{key:"onLinesInserted",value:function(e){var t=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(t)for(var i=0,n=t.length;i<n;i++){var o=t[i].getDomNode();o&&this.domNode.domNode.removeChild(o)}return!0}},{key:"onScrollChanged",value:function(e){return e.scrollTopChanged}},{key:"onTokensChanged",value:function(e){return this._linesCollection.onTokensChanged(e.ranges)}},{key:"onZonesChanged",value:function(e){return!0}},{key:"getStartLineNumber",value:function(){return this._linesCollection.getStartLineNumber()}},{key:"getEndLineNumber",value:function(){return this._linesCollection.getEndLineNumber()}},{key:"getVisibleLine",value:function(e){return this._linesCollection.getLine(e)}},{key:"renderLines",value:function(e){var t=this._linesCollection._get(),i=new c(this.domNode.domNode,this._host,e),n={rendLineNumberStart:t.rendLineNumberStart,lines:t.lines,linesLength:t.lines.length},o=i.render(n,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(o.rendLineNumberStart,o.lines)}}]),e}(),c=function(){function e(t,i,o){(0,n.Z)(this,e),this.domNode=t,this.host=i,this.viewportData=o}return(0,o.Z)(e,[{key:"render",value:function(e,t,i,n){var o={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(o.rendLineNumberStart+o.linesLength-1<t||i<o.rendLineNumberStart){o.rendLineNumberStart=t,o.linesLength=i-t+1,o.lines=[];for(var r=t;r<=i;r++)o.lines[r-t]=this.host.createVisibleLine();return this._finishRendering(o,!0,n),o}if(this._renderUntouchedLines(o,Math.max(t-o.rendLineNumberStart,0),Math.min(i-o.rendLineNumberStart,o.linesLength-1),n,t),o.rendLineNumberStart>t){var a=t,s=Math.min(i,o.rendLineNumberStart-1);a<=s&&(this._insertLinesBefore(o,a,s,n,t),o.linesLength+=s-a+1)}else if(o.rendLineNumberStart<t){var u=Math.min(o.linesLength,t-o.rendLineNumberStart);u>0&&(this._removeLinesBefore(o,u),o.linesLength-=u)}if(o.rendLineNumberStart=t,o.rendLineNumberStart+o.linesLength-1<i){var l=o.rendLineNumberStart+o.linesLength,d=i;l<=d&&(this._insertLinesAfter(o,l,d,n,t),o.linesLength+=d-l+1)}else if(o.rendLineNumberStart+o.linesLength-1>i){var c=Math.max(0,i-o.rendLineNumberStart+1),h=o.linesLength-1-c+1;h>0&&(this._removeLinesAfter(o,h),o.linesLength-=h)}return this._finishRendering(o,!1,n),o}},{key:"_renderUntouchedLines",value:function(e,t,i,n,o){for(var r=e.rendLineNumberStart,a=e.lines,s=t;s<=i;s++){var u=r+s;a[s].layoutLine(u,n[u-o])}}},{key:"_insertLinesBefore",value:function(e,t,i,n,o){for(var r=[],a=0,s=t;s<=i;s++)r[a++]=this.host.createVisibleLine();e.lines=r.concat(e.lines)}},{key:"_removeLinesBefore",value:function(e,t){for(var i=0;i<t;i++){var n=e.lines[i].getDomNode();n&&this.domNode.removeChild(n)}e.lines.splice(0,t)}},{key:"_insertLinesAfter",value:function(e,t,i,n,o){for(var r=[],a=0,s=t;s<=i;s++)r[a++]=this.host.createVisibleLine();e.lines=e.lines.concat(r)}},{key:"_removeLinesAfter",value:function(e,t){for(var i=e.linesLength-t,n=0;n<t;n++){var o=e.lines[i+n].getDomNode();o&&this.domNode.removeChild(o)}e.lines.splice(i,t)}},{key:"_finishRenderingNewLines",value:function(t,i,n,o){e._ttPolicy&&(n=e._ttPolicy.createHTML(n));var r=this.domNode.lastChild;i||!r?this.domNode.innerHTML=n:r.insertAdjacentHTML("afterend",n);for(var a=this.domNode.lastChild,s=t.linesLength-1;s>=0;s--){var u=t.lines[s];o[s]&&(u.setDomNode(a),a=a.previousSibling)}}},{key:"_finishRenderingInvalidLines",value:function(t,i,n){var o=document.createElement("div");e._ttPolicy&&(i=e._ttPolicy.createHTML(i)),o.innerHTML=i;for(var r=0;r<t.linesLength;r++){var a=t.lines[r];if(n[r]){var s=o.firstChild,u=a.getDomNode();u.parentNode.replaceChild(s,u),a.setDomNode(s)}}}},{key:"_finishRendering",value:function(t,i,n){var o=e._sb,r=t.linesLength,a=t.lines,s=t.rendLineNumberStart,u=[];o.reset();for(var l=!1,d=0;d<r;d++){var c=a[d];if(u[d]=!1,!c.getDomNode())c.renderLine(d+s,n[d],this.viewportData,o)&&(u[d]=!0,l=!0)}l&&this._finishRenderingNewLines(t,i,o.build(),u),o.reset();for(var h=!1,v=[],_=0;_<r;_++){var g=a[_];if(v[_]=!1,!u[_])g.renderLine(_+s,n[_],this.viewportData,o)&&(v[_]=!0,h=!0)}h&&this._finishRenderingInvalidLines(t,o.build(),v)}}]),e}();c._ttPolicy=(0,a.Z)("editorViewLayer",{createHTML:function(e){return e}}),c._sb=new u.HT(1e5)},50183:function(e,t,i){i.d(t,{Ib:function(){return m},Ip:function(){return g}});var n=i(15671),o=i(43144),r=i(97326),a=i(11752),s=i(61120),u=i(60136),l=i(27277),d=i(65379),c=i(88616),h=i(75861),v=function(e){(0,u.Z)(i,e);var t=(0,l.Z)(i);function i(e){var o;(0,n.Z)(this,i),(o=t.call(this,e))._visibleLines=new h.G((0,r.Z)(o)),o.domNode=o._visibleLines.domNode;var a=o._context.configuration.options.get(49);return(0,c.N)(o.domNode,a),o._dynamicOverlays=[],o._isFocused=!1,o.domNode.setClassName("view-overlays"),o}return(0,o.Z)(i,[{key:"shouldRender",value:function(){if((0,a.Z)((0,s.Z)(i.prototype),"shouldRender",this).call(this))return!0;for(var e=0,t=this._dynamicOverlays.length;e<t;e++){if(this._dynamicOverlays[e].shouldRender())return!0}return!1}},{key:"dispose",value:function(){(0,a.Z)((0,s.Z)(i.prototype),"dispose",this).call(this);for(var e=0,t=this._dynamicOverlays.length;e<t;e++){this._dynamicOverlays[e].dispose()}this._dynamicOverlays=[]}},{key:"getDomNode",value:function(){return this.domNode}},{key:"createVisibleLine",value:function(){return new _(this._context.configuration,this._dynamicOverlays)}},{key:"addDynamicOverlay",value:function(e){this._dynamicOverlays.push(e)}},{key:"onConfigurationChanged",value:function(e){this._visibleLines.onConfigurationChanged(e);for(var t=this._visibleLines.getStartLineNumber(),i=this._visibleLines.getEndLineNumber(),n=t;n<=i;n++){this._visibleLines.getVisibleLine(n).onConfigurationChanged(e)}var o=this._context.configuration.options.get(49);return(0,c.N)(this.domNode,o),!0}},{key:"onFlushed",value:function(e){return this._visibleLines.onFlushed(e)}},{key:"onFocusChanged",value:function(e){return this._isFocused=e.isFocused,!0}},{key:"onLinesChanged",value:function(e){return this._visibleLines.onLinesChanged(e)}},{key:"onLinesDeleted",value:function(e){return this._visibleLines.onLinesDeleted(e)}},{key:"onLinesInserted",value:function(e){return this._visibleLines.onLinesInserted(e)}},{key:"onScrollChanged",value:function(e){return this._visibleLines.onScrollChanged(e)||!0}},{key:"onTokensChanged",value:function(e){return this._visibleLines.onTokensChanged(e)}},{key:"onZonesChanged",value:function(e){return this._visibleLines.onZonesChanged(e)}},{key:"prepareRender",value:function(e){for(var t=this._dynamicOverlays.filter((function(e){return e.shouldRender()})),i=0,n=t.length;i<n;i++){var o=t[i];o.prepareRender(e),o.onDidRender()}}},{key:"render",value:function(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}},{key:"_viewOverlaysRender",value:function(e){this._visibleLines.renderLines(e.viewportData)}}]),i}(i(81535).E),_=function(){function e(t,i){(0,n.Z)(this,e),this._configuration=t,this._lineHeight=this._configuration.options.get(65),this._dynamicOverlays=i,this._domNode=null,this._renderedContent=null}return(0,o.Z)(e,[{key:"getDomNode",value:function(){return this._domNode?this._domNode.domNode:null}},{key:"setDomNode",value:function(e){this._domNode=(0,d.X)(e)}},{key:"onContentChanged",value:function(){}},{key:"onTokensChanged",value:function(){}},{key:"onConfigurationChanged",value:function(e){this._lineHeight=this._configuration.options.get(65)}},{key:"renderLine",value:function(e,t,i,n){for(var o="",r=0,a=this._dynamicOverlays.length;r<a;r++){o+=this._dynamicOverlays[r].render(i.startLineNumber,e)}return this._renderedContent!==o&&(this._renderedContent=o,n.appendString('<div style="position:absolute;top:'),n.appendString(String(t)),n.appendString("px;width:100%;height:"),n.appendString(String(this._lineHeight)),n.appendString('px;">'),n.appendString(o),n.appendString("</div>"),!0)}},{key:"layoutLine",value:function(e,t){this._domNode&&(this._domNode.setTop(t),this._domNode.setHeight(this._lineHeight))}}]),e}(),g=function(e){(0,u.Z)(i,e);var t=(0,l.Z)(i);function i(e){var o;(0,n.Z)(this,i);var r=(o=t.call(this,e))._context.configuration.options.get(142);return o._contentWidth=r.contentWidth,o.domNode.setHeight(0),o}return(0,o.Z)(i,[{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options.get(142);return this._contentWidth=t.contentWidth,(0,a.Z)((0,s.Z)(i.prototype),"onConfigurationChanged",this).call(this,e)||!0}},{key:"onScrollChanged",value:function(e){return(0,a.Z)((0,s.Z)(i.prototype),"onScrollChanged",this).call(this,e)||e.scrollWidthChanged}},{key:"_viewOverlaysRender",value:function(e){(0,a.Z)((0,s.Z)(i.prototype),"_viewOverlaysRender",this).call(this,e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}]),i}(v),m=function(e){(0,u.Z)(i,e);var t=(0,l.Z)(i);function i(e){var o;(0,n.Z)(this,i);var r=(o=t.call(this,e))._context.configuration.options,a=r.get(142);return o._contentLeft=a.contentLeft,o.domNode.setClassName("margin-view-overlays"),o.domNode.setWidth(1),(0,c.N)(o.domNode,r.get(49)),o}return(0,o.Z)(i,[{key:"onConfigurationChanged",value:function(e){var t=this._context.configuration.options;(0,c.N)(this.domNode,t.get(49));var n=t.get(142);return this._contentLeft=n.contentLeft,(0,a.Z)((0,s.Z)(i.prototype),"onConfigurationChanged",this).call(this,e)||!0}},{key:"onScrollChanged",value:function(e){return(0,a.Z)((0,s.Z)(i.prototype),"onScrollChanged",this).call(this,e)||e.scrollHeightChanged}},{key:"_viewOverlaysRender",value:function(e){(0,a.Z)((0,s.Z)(i.prototype),"_viewOverlaysRender",this).call(this,e);var t=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(t),this.domNode.setWidth(this._contentLeft)}}]),i}(v)},81535:function(e,t,i){i.d(t,{E:function(){return d},K:function(){return c}});var n=i(15671),o=i(43144),r=i(97326),a=i(11752),s=i(61120),u=i(60136),l=i(27277),d=function(e){(0,u.Z)(i,e);var t=(0,l.Z)(i);function i(e){var o;return(0,n.Z)(this,i),(o=t.call(this))._context=e,o._context.addEventHandler((0,r.Z)(o)),o}return(0,o.Z)(i,[{key:"dispose",value:function(){this._context.removeEventHandler(this),(0,a.Z)((0,s.Z)(i.prototype),"dispose",this).call(this)}}]),i}(i(7339).O),c=function(){function e(){(0,n.Z)(this,e)}return(0,o.Z)(e,null,[{key:"write",value:function(e,t){e.setAttribute("data-mprt",String(t))}},{key:"read",value:function(e){var t=e.getAttribute("data-mprt");return null===t?0:parseInt(t,10)}},{key:"collect",value:function(e,t){for(var i=[],n=0;e&&e!==document.body&&e!==t;)e.nodeType===e.ELEMENT_NODE&&(i[n++]=this.read(e)),e=e.parentElement;for(var o=new Uint8Array(n),r=0;r<n;r++)o[r]=i[n-r-1];return o}}]),e}()},56783:function(e,t,i){i.d(t,{q:function(){return a}});var n=i(15671),o=i(43144),r=i(65631),a=function(){function e(t){(0,n.Z)(this,e),this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=t}return(0,o.Z)(e,[{key:"emitKeyDown",value:function(e){var t;null===(t=this.onKeyDown)||void 0===t||t.call(this,e)}},{key:"emitKeyUp",value:function(e){var t;null===(t=this.onKeyUp)||void 0===t||t.call(this,e)}},{key:"emitContextMenu",value:function(e){var t;null===(t=this.onContextMenu)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseMove",value:function(e){var t;null===(t=this.onMouseMove)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseLeave",value:function(e){var t;null===(t=this.onMouseLeave)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDown",value:function(e){var t;null===(t=this.onMouseDown)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseUp",value:function(e){var t;null===(t=this.onMouseUp)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDrag",value:function(e){var t;null===(t=this.onMouseDrag)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDrop",value:function(e){var t;null===(t=this.onMouseDrop)||void 0===t||t.call(this,this._convertViewToModelMouseEvent(e))}},{key:"emitMouseDropCanceled",value:function(){var e;null===(e=this.onMouseDropCanceled)||void 0===e||e.call(this)}},{key:"emitMouseWheel",value:function(e){var t;null===(t=this.onMouseWheel)||void 0===t||t.call(this,e)}},{key:"_convertViewToModelMouseEvent",value:function(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}},{key:"_convertViewToModelMouseTarget",value:function(t){return e.convertViewToModelMouseTarget(t,this._coordinatesConverter)}}],[{key:"convertViewToModelMouseTarget",value:function(e,t){var i=Object.assign({},e);return i.position&&(i.position=t.convertViewPositionToModelPosition(i.position)),i.range&&(i.range=t.convertViewRangeToModelRange(i.range)),5!==i.type&&8!==i.type||(i.detail=this.convertViewToModelViewZoneData(i.detail,t)),i}},{key:"convertViewToModelViewZoneData",value:function(e,t){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?t.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?t.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:t.convertViewPositionToModelPosition(e.position),afterLineNumber:t.convertViewPositionToModelPosition(new r.L(e.afterLineNumber,1)).lineNumber}}}]),e}()},51811:function(e,t,i){i.d(t,{Gm:function(){return oe}});var n=i(29439),o=i(74165),r=i(37762),a=i(97326),s=i(11752),u=i(61120),l=i(60136),d=i(27277),c=i(15671),h=i(43144),v=(i(9824),i(82377),i(18420)),_=i(32959),g=i(74146),m=i(13880),f=i(65096),y=i(37649),p=i(85830),D=i(95253),C=i(76257),w=i(43837),k=i(56783),M=i(17683),S=i(30697),b=i(65631),L=i(17429),T=i(96601),N=i(13083),P=i(43886),I=i(98926),E=i(78519),F=i(59881),R=i(43980),V=i(69683),Z=i(99740),W=i(8022),x=i(64606),O=i(26746),A=i(49431),Q=i(41335),H=i(93897),K=i(63021),U=i(13698),B=i(47713),z=i(77002),G=i(19536),j=i(88616),J=i(65441),q=i(71049),X=(i(90969),function(e){(0,l.Z)(i,e);var t=(0,d.Z)(i);function i(){var e;return(0,c.Z)(this,i),(e=t.call(this))._editor=null,e._instantiationService=null,e._instances=e._register(new f.b2),e._pending=new Map,e._finishedInstantiation=[],e._finishedInstantiation[0]=!1,e._finishedInstantiation[1]=!1,e._finishedInstantiation[2]=!1,e._finishedInstantiation[3]=!1,e}return(0,h.Z)(i,[{key:"initialize",value:function(e,t,i){var n=this;this._editor=e,this._instantiationService=i;var o,a=(0,r.Z)(t);try{for(a.s();!(o=a.n()).done;){var s=o.value;this._pending.has(s.id)?(0,g.dL)(new Error("Cannot have two contributions with the same id ".concat(s.id))):this._pending.set(s.id,s)}}catch(u){a.e(u)}finally{a.f()}this._instantiateSome(0),this._register((0,q.To)((function(){n._instantiateSome(1)}))),this._register((0,q.To)((function(){n._instantiateSome(2)}))),this._register((0,q.To)((function(){n._instantiateSome(3)}),5e3))}},{key:"saveViewState",value:function(){var e,t={},i=(0,r.Z)(this._instances);try{for(i.s();!(e=i.n()).done;){var o=(0,n.Z)(e.value,2),a=o[0],s=o[1];"function"===typeof s.saveViewState&&(t[a]=s.saveViewState())}}catch(u){i.e(u)}finally{i.f()}return t}},{key:"restoreViewState",value:function(e){var t,i=(0,r.Z)(this._instances);try{for(i.s();!(t=i.n()).done;){var o=(0,n.Z)(t.value,2),a=o[0],s=o[1];"function"===typeof s.restoreViewState&&s.restoreViewState(e[a])}}catch(u){i.e(u)}finally{i.f()}}},{key:"get",value:function(e){return this._instantiateById(e),this._instances.get(e)||null}},{key:"onBeforeInteractionEvent",value:function(){this._instantiateSome(2)}},{key:"onAfterModelAttached",value:function(){var e=this;this._register((0,q.To)((function(){e._instantiateSome(1)}),50))}},{key:"_instantiateSome",value:function(e){if(!this._finishedInstantiation[e]){this._finishedInstantiation[e]=!0;var t,i=this._findPendingContributionsByInstantiation(e),n=(0,r.Z)(i);try{for(n.s();!(t=n.n()).done;){var o=t.value;this._instantiateById(o.id)}}catch(a){n.e(a)}finally{n.f()}}}},{key:"_findPendingContributionsByInstantiation",value:function(e){var t,i=[],o=(0,r.Z)(this._pending);try{for(o.s();!(t=o.n()).done;){var a=(0,n.Z)(t.value,2)[1];a.instantiation===e&&i.push(a)}}catch(s){o.e(s)}finally{o.f()}return i}},{key:"_instantiateById",value:function(e){var t=this._pending.get(e);if(t){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{var i=this._instantiationService.createInstance(t.ctor,this._editor);this._instances.set(t.id,i),"function"===typeof i.restoreViewState&&0!==t.instantiation&&console.warn("Editor contribution '".concat(t.id,"' should be eager instantiated because it uses saveViewState / restoreViewState."))}catch(n){(0,g.dL)(n)}}}}]),i}(f.JT)),Y=i(86128),$=function(e,t,i,n){var o,r=arguments.length,a=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,i,n);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,i,a):o(t,i))||a);return r>3&&a&&Object.defineProperty(t,i,a),a},ee=function(e,t){return function(i,n){t(i,n,e)}},te=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function a(e){try{u(n.next(e))}catch(t){r(t)}}function s(e){try{u(n.throw(e))}catch(t){r(t)}}function u(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(a,s)}u((n=n.apply(e,t||[])).next())}))},ie=0,ne=function(){function e(t,i,n,o,r,a){(0,c.Z)(this,e),this.model=t,this.viewModel=i,this.view=n,this.hasRealView=o,this.listenersToRemove=r,this.attachedView=a}return(0,h.Z)(e,[{key:"dispose",value:function(){(0,f.B9)(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}]),e}(),oe=function(e){(0,l.Z)(i,e);var t=(0,d.Z)(i);function i(e,n,s,u,l,d,h,v,f,y,p,C){var w;(0,c.Z)(this,i),(w=t.call(this)).languageConfigurationService=p,w._deliveryQueue=(0,m.Sp)(),w._contributions=w._register(new X),w._onDidDispose=w._register(new m.Q5),w.onDidDispose=w._onDidDispose.event,w._onDidChangeModelContent=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModelContent=w._onDidChangeModelContent.event,w._onDidChangeModelLanguage=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModelLanguage=w._onDidChangeModelLanguage.event,w._onDidChangeModelLanguageConfiguration=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModelLanguageConfiguration=w._onDidChangeModelLanguageConfiguration.event,w._onDidChangeModelOptions=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModelOptions=w._onDidChangeModelOptions.event,w._onDidChangeModelDecorations=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModelDecorations=w._onDidChangeModelDecorations.event,w._onDidChangeModelTokens=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModelTokens=w._onDidChangeModelTokens.event,w._onDidChangeConfiguration=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeConfiguration=w._onDidChangeConfiguration.event,w._onDidChangeModel=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeModel=w._onDidChangeModel.event,w._onDidChangeCursorPosition=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeCursorPosition=w._onDidChangeCursorPosition.event,w._onDidChangeCursorSelection=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeCursorSelection=w._onDidChangeCursorSelection.event,w._onDidAttemptReadOnlyEdit=w._register(new ae(w._contributions,w._deliveryQueue)),w.onDidAttemptReadOnlyEdit=w._onDidAttemptReadOnlyEdit.event,w._onDidLayoutChange=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidLayoutChange=w._onDidLayoutChange.event,w._editorTextFocus=w._register(new re({deliveryQueue:w._deliveryQueue})),w.onDidFocusEditorText=w._editorTextFocus.onDidChangeToTrue,w.onDidBlurEditorText=w._editorTextFocus.onDidChangeToFalse,w._editorWidgetFocus=w._register(new re({deliveryQueue:w._deliveryQueue})),w.onDidFocusEditorWidget=w._editorWidgetFocus.onDidChangeToTrue,w.onDidBlurEditorWidget=w._editorWidgetFocus.onDidChangeToFalse,w._onWillType=w._register(new ae(w._contributions,w._deliveryQueue)),w.onWillType=w._onWillType.event,w._onDidType=w._register(new ae(w._contributions,w._deliveryQueue)),w.onDidType=w._onDidType.event,w._onDidCompositionStart=w._register(new ae(w._contributions,w._deliveryQueue)),w.onDidCompositionStart=w._onDidCompositionStart.event,w._onDidCompositionEnd=w._register(new ae(w._contributions,w._deliveryQueue)),w.onDidCompositionEnd=w._onDidCompositionEnd.event,w._onDidPaste=w._register(new ae(w._contributions,w._deliveryQueue)),w.onDidPaste=w._onDidPaste.event,w._onMouseUp=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseUp=w._onMouseUp.event,w._onMouseDown=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseDown=w._onMouseDown.event,w._onMouseDrag=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseDrag=w._onMouseDrag.event,w._onMouseDrop=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseDrop=w._onMouseDrop.event,w._onMouseDropCanceled=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseDropCanceled=w._onMouseDropCanceled.event,w._onDropIntoEditor=w._register(new ae(w._contributions,w._deliveryQueue)),w.onDropIntoEditor=w._onDropIntoEditor.event,w._onContextMenu=w._register(new ae(w._contributions,w._deliveryQueue)),w.onContextMenu=w._onContextMenu.event,w._onMouseMove=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseMove=w._onMouseMove.event,w._onMouseLeave=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseLeave=w._onMouseLeave.event,w._onMouseWheel=w._register(new ae(w._contributions,w._deliveryQueue)),w.onMouseWheel=w._onMouseWheel.event,w._onKeyUp=w._register(new ae(w._contributions,w._deliveryQueue)),w.onKeyUp=w._onKeyUp.event,w._onKeyDown=w._register(new ae(w._contributions,w._deliveryQueue)),w.onKeyDown=w._onKeyDown.event,w._onDidContentSizeChange=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidContentSizeChange=w._onDidContentSizeChange.event,w._onDidScrollChange=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidScrollChange=w._onDidScrollChange.event,w._onDidChangeViewZones=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeViewZones=w._onDidChangeViewZones.event,w._onDidChangeHiddenAreas=w._register(new m.Q5({deliveryQueue:w._deliveryQueue})),w.onDidChangeHiddenAreas=w._onDidChangeHiddenAreas.event,w._actions=new Map,w._bannerDomNode=null,w._dropIntoEditorDecorations=w.createDecorationsCollection(),l.willCreateCodeEditor();var k,M=Object.assign({},n);w._domElement=e,w._overflowWidgetsDomNode=M.overflowWidgetsDomNode,delete M.overflowWidgetsDomNode,w._id=++ie,w._decorationTypeKeysToIds={},w._decorationTypeSubtypes={},w._telemetryData=s.telemetryData,w._configuration=w._register(w._createConfiguration(s.isSimpleWidget||!1,M,y)),w._register(w._configuration.onDidChange((function(e){w._onDidChangeConfiguration.fire(e);var t=w._configuration.options;if(e.hasChanged(142)){var i=t.get(142);w._onDidLayoutChange.fire(i)}}))),w._contextKeyService=w._register(h.createScoped(w._domElement)),w._notificationService=f,w._codeEditorService=l,w._commandService=d,w._themeService=v,w._register(new se((0,a.Z)(w),w._contextKeyService)),w._register(new ue((0,a.Z)(w),w._contextKeyService,C)),w._instantiationService=u.createChild(new O.y([W.i6,w._contextKeyService])),w._modelData=null,w._focusTracker=new le(e),w._register(w._focusTracker.onChange((function(){w._editorWidgetFocus.setValue(w._focusTracker.hasFocus())}))),w._contentWidgets={},w._overlayWidgets={},w._glyphMarginWidgets={},k=Array.isArray(s.contributions)?s.contributions:D.Uc.getEditorContributions(),w._contributions.initialize((0,a.Z)(w),k,w._instantiationService);var S,b=(0,r.Z)(D.Uc.getEditorActions());try{var L=function(){var e=S.value;if(w._actions.has(e.id))return(0,g.dL)(new Error("Cannot have two actions with the same id ".concat(e.id))),1;var t=new N.p(e.id,e.label,e.alias,(0,K.f6)(e.precondition),(function(){return w._instantiationService.invokeFunction((function(t){return Promise.resolve(e.runEditorCommand(t,(0,a.Z)(w),null))}))}),w._contextKeyService);w._actions.set(t.id,t)};for(b.s();!(S=b.n()).done;)L()}catch(P){b.e(P)}finally{b.f()}var T=function(){return!w._configuration.options.get(89)&&w._configuration.options.get(35).enabled};return w._register(new _.DragAndDropObserver(w._domElement,{onDragEnter:function(){},onDragOver:function(e){if(T()){var t=w.getTargetAtClientPoint(e.clientX,e.clientY);(null===t||void 0===t?void 0:t.position)&&w.showDropIndicatorAt(t.position)}},onDrop:function(e){return te((0,a.Z)(w),void 0,void 0,(0,o.Z)().mark((function t(){var i;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(T()){t.next=2;break}return t.abrupt("return");case 2:if(this.removeDropIndicator(),e.dataTransfer){t.next=5;break}return t.abrupt("return");case 5:(null===(i=this.getTargetAtClientPoint(e.clientX,e.clientY))||void 0===i?void 0:i.position)&&this._onDropIntoEditor.fire({position:i.position,event:e});case 7:case"end":return t.stop()}}),t,this)})))},onDragLeave:function(){w.removeDropIndicator()},onDragEnd:function(){w.removeDropIndicator()}})),w._codeEditorService.addCodeEditor((0,a.Z)(w)),w}return(0,h.Z)(i,[{key:"isSimpleWidget",get:function(){return this._configuration.isSimpleWidget}},{key:"writeScreenReaderContent",value:function(e){var t;null===(t=this._modelData)||void 0===t||t.view.writeScreenReaderContent(e)}},{key:"_createConfiguration",value:function(e,t,i){return new p.z(e,t,this._domElement,i)}},{key:"getId",value:function(){return this.getEditorType()+":"+this._id}},{key:"getEditorType",value:function(){return P.g.ICodeEditor}},{key:"dispose",value:function(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),(0,s.Z)((0,u.Z)(i.prototype),"dispose",this).call(this)}},{key:"invokeWithinContext",value:function(e){return this._instantiationService.invokeFunction(e)}},{key:"updateOptions",value:function(e){this._configuration.updateOptions(e||{})}},{key:"getOptions",value:function(){return this._configuration.options}},{key:"getOption",value:function(e){return this._configuration.options.get(e)}},{key:"getRawOptions",value:function(){return this._configuration.getRawOptions()}},{key:"getOverflowWidgetsDomNode",value:function(){return this._overflowWidgetsDomNode}},{key:"getConfiguredWordAtPosition",value:function(e){return this._modelData?z.w.getWordAtPosition(this._modelData.model,this._configuration.options.get(128),e):null}},{key:"getValue",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this._modelData)return"";var t=!(!e||!e.preserveBOM),i=0;return e&&e.lineEnding&&"\n"===e.lineEnding?i=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(i=2),this._modelData.model.getValue(i,t)}},{key:"setValue",value:function(e){this._modelData&&this._modelData.model.setValue(e)}},{key:"getModel",value:function(){return this._modelData?this._modelData.model:null}},{key:"setModel",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((null!==this._modelData||null!==e)&&(!this._modelData||this._modelData.model!==e)){var t=this.hasTextFocus(),i=this._detachModel();this._attachModel(e),t&&this.hasModel()&&this.focus();var n={oldModelUrl:i?i.uri:null,newModelUrl:e?e.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(n),this._postDetachModelCleanup(i),this._contributions.onAfterModelAttached()}}},{key:"_removeDecorationTypes",value:function(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(var e in this._decorationTypeSubtypes){var t=this._decorationTypeSubtypes[e];for(var i in t)this._removeDecorationType(e+"-"+i)}this._decorationTypeSubtypes={}}}},{key:"getVisibleRanges",value:function(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}},{key:"getVisibleRangesPlusViewportAboveBelow",value:function(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}},{key:"getWhitespaces",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}},{key:"getTopForLineNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?i._getVerticalOffsetForPosition(this._modelData,e,1,t):-1}},{key:"getTopForPosition",value:function(e,t){return this._modelData?i._getVerticalOffsetForPosition(this._modelData,e,t,!1):-1}},{key:"getBottomForLineNumber",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?i._getVerticalOffsetAfterPosition(this._modelData,e,1,t):-1}},{key:"setHiddenAreas",value:function(e,t){var i;null===(i=this._modelData)||void 0===i||i.viewModel.setHiddenAreas(e.map((function(e){return L.e.lift(e)})),t)}},{key:"getVisibleColumnFromPosition",value:function(e){if(!this._modelData)return e.column;var t=this._modelData.model.validatePosition(e),i=this._modelData.model.getOptions().tabSize;return S.i.visibleColumnFromColumn(this._modelData.model.getLineContent(t.lineNumber),t.column,i)+1}},{key:"getPosition",value:function(){return this._modelData?this._modelData.viewModel.getPosition():null}},{key:"setPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this._modelData){if(!b.L.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}},{key:"_sendRevealRange",value:function(e,t,i,n){if(this._modelData){if(!L.e.isIRange(e))throw new Error("Invalid arguments");var o=this._modelData.model.validateRange(e),r=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(o);this._modelData.viewModel.revealRange("api",i,r,t,n)}}},{key:"revealLine",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,0,t)}},{key:"revealLineInCenter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,1,t)}},{key:"revealLineInCenterIfOutsideViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,2,t)}},{key:"revealLineNearTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,5,t)}},{key:"_revealLine",value:function(e,t,i){if("number"!==typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new L.e(e,1,e,1),t,!1,i)}},{key:"revealPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,0,!0,t)}},{key:"revealPositionInCenter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,1,!0,t)}},{key:"revealPositionInCenterIfOutsideViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,2,!0,t)}},{key:"revealPositionNearTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,5,!0,t)}},{key:"_revealPosition",value:function(e,t,i,n){if(!b.L.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new L.e(e.lineNumber,e.column,e.lineNumber,e.column),t,i,n)}},{key:"getSelection",value:function(){return this._modelData?this._modelData.viewModel.getSelection():null}},{key:"getSelections",value:function(){return this._modelData?this._modelData.viewModel.getSelections():null}},{key:"setSelection",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",i=T.Y.isISelection(e),n=L.e.isIRange(e);if(!i&&!n)throw new Error("Invalid arguments");if(i)this._setSelectionImpl(e,t);else if(n){var o={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(o,t)}}},{key:"_setSelectionImpl",value:function(e,t){if(this._modelData){var i=new T.Y(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(t,[i])}}},{key:"revealLines",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,0,i)}},{key:"revealLinesInCenter",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,1,i)}},{key:"revealLinesInCenterIfOutsideViewport",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,2,i)}},{key:"revealLinesNearTop",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,t,5,i)}},{key:"_revealLines",value:function(e,t,i,n){if("number"!==typeof e||"number"!==typeof t)throw new Error("Invalid arguments");this._sendRevealRange(new L.e(e,1,t,1),i,!1,n)}},{key:"revealRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._revealRange(e,i?1:0,n,t)}},{key:"revealRangeInCenter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,1,!0,t)}},{key:"revealRangeInCenterIfOutsideViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,2,!0,t)}},{key:"revealRangeNearTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,5,!0,t)}},{key:"revealRangeNearTopIfOutsideViewport",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,6,!0,t)}},{key:"revealRangeAtTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,3,!0,t)}},{key:"_revealRange",value:function(e,t,i,n){if(!L.e.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(L.e.lift(e),t,i,n)}},{key:"setSelections",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(var n=0,o=e.length;n<o;n++)if(!T.Y.isISelection(e[n]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(t,e,i)}}},{key:"getContentWidth",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}},{key:"getScrollWidth",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}},{key:"getScrollLeft",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}},{key:"getContentHeight",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}},{key:"getScrollHeight",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}},{key:"getScrollTop",value:function(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}},{key:"setScrollLeft",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},t)}}},{key:"setScrollTop",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},t)}}},{key:"setScrollPosition",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,t)}},{key:"hasPendingScrollAnimation",value:function(){return!!this._modelData&&this._modelData.viewModel.viewLayout.hasPendingScrollAnimation()}},{key:"saveViewState",value:function(){if(!this._modelData)return null;var e=this._contributions.saveViewState();return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}},{key:"restoreViewState",value:function(e){if(this._modelData&&this._modelData.hasRealView){var t=e;if(t&&t.cursorState&&t.viewState){var i=t.cursorState;Array.isArray(i)?i.length>0&&this._modelData.viewModel.restoreCursorState(i):this._modelData.viewModel.restoreCursorState([i]),this._contributions.restoreViewState(t.contributionsState||{});var n=this._modelData.viewModel.reduceRestoreState(t.viewState);this._modelData.view.restoreState(n)}}}},{key:"handleInitialized",value:function(){var e;null===(e=this._getViewModel())||void 0===e||e.visibleLinesStabilized()}},{key:"getContribution",value:function(e){return this._contributions.get(e)}},{key:"getActions",value:function(){return Array.from(this._actions.values())}},{key:"getSupportedActions",value:function(){var e=this.getActions();return e=e.filter((function(e){return e.isSupported()}))}},{key:"getAction",value:function(e){return this._actions.get(e)||null}},{key:"trigger",value:function(e,t,i){switch(i=i||{},t){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":var n=i;return void this._type(e,n.text||"");case"replacePreviousChar":var o=i;return void this._compositionType(e,o.text||"",o.replaceCharCnt||0,0,0);case"compositionType":var r=i;return void this._compositionType(e,r.text||"",r.replacePrevCharCnt||0,r.replaceNextCharCnt||0,r.positionDelta||0);case"paste":var a=i;return void this._paste(e,a.text||"",a.pasteOnNewLine||!1,a.multicursorText||null,a.mode||null);case"cut":return void this._cut(e)}var s=this.getAction(t);s?Promise.resolve(s.run(i)).then(void 0,g.dL):this._modelData&&(this._triggerEditorCommand(e,t,i)||this._triggerCommand(t,i))}},{key:"_triggerCommand",value:function(e,t){this._commandService.executeCommand(e,t)}},{key:"_startComposition",value:function(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}},{key:"_endComposition",value:function(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}},{key:"_type",value:function(e,t){this._modelData&&0!==t.length&&("keyboard"===e&&this._onWillType.fire(t),this._modelData.viewModel.type(t,e),"keyboard"===e&&this._onDidType.fire(t))}},{key:"_compositionType",value:function(e,t,i,n,o){this._modelData&&this._modelData.viewModel.compositionType(t,i,n,o,e)}},{key:"_paste",value:function(e,t,i,n,o){if(this._modelData&&0!==t.length){var r=this._modelData.viewModel,a=r.getSelection().getStartPosition();r.paste(t,i,n,e);var s=r.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({range:new L.e(a.lineNumber,a.column,s.lineNumber,s.column),languageId:o})}}},{key:"_cut",value:function(e){this._modelData&&this._modelData.viewModel.cut(e)}},{key:"_triggerEditorCommand",value:function(e,t,i){var n=this,o=D.Uc.getEditorCommand(t);return!!o&&((i=i||{}).source=e,this._instantiationService.invokeFunction((function(e){Promise.resolve(o.runEditorCommand(e,n,i)).then(void 0,g.dL)})),!0)}},{key:"_getViewModel",value:function(){return this._modelData?this._modelData.viewModel:null}},{key:"pushUndoStop",value:function(){return!!this._modelData&&(!this._configuration.options.get(89)&&(this._modelData.model.pushStackElement(),!0))}},{key:"popUndoStop",value:function(){return!!this._modelData&&(!this._configuration.options.get(89)&&(this._modelData.model.popStackElement(),!0))}},{key:"executeEdits",value:function(e,t,i){return!!this._modelData&&(!this._configuration.options.get(89)&&(n=i?Array.isArray(i)?function(){return i}:i:function(){return null},this._modelData.viewModel.executeEdits(e,t,n),!0));var n}},{key:"executeCommand",value:function(e,t){this._modelData&&this._modelData.viewModel.executeCommand(t,e)}},{key:"executeCommands",value:function(e,t){this._modelData&&this._modelData.viewModel.executeCommands(t,e)}},{key:"createDecorationsCollection",value:function(e){return new de(this,e)}},{key:"changeDecorations",value:function(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}},{key:"getLineDecorations",value:function(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,(0,M.$J)(this._configuration.options)):null}},{key:"getDecorationsInRange",value:function(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,(0,M.$J)(this._configuration.options)):null}},{key:"deltaDecorations",value:function(e,t){return this._modelData?0===e.length&&0===t.length?e:this._modelData.model.deltaDecorations(e,t,this._id):[]}},{key:"removeDecorations",value:function(e){this._modelData&&0!==e.length&&this._modelData.model.changeDecorations((function(t){t.deltaDecorations(e,[])}))}},{key:"removeDecorationsByType",value:function(e){var t=this._decorationTypeKeysToIds[e];t&&this.deltaDecorations(t,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}},{key:"getLayoutInfo",value:function(){return this._configuration.options.get(142)}},{key:"createOverviewRuler",value:function(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}},{key:"getContainerDomNode",value:function(){return this._domElement}},{key:"getDomNode",value:function(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}},{key:"delegateVerticalScrollbarPointerDown",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(e)}},{key:"delegateScrollFromMouseWheelEvent",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateScrollFromMouseWheelEvent(e)}},{key:"layout",value:function(e){this._configuration.observeContainer(e),this.render()}},{key:"focus",value:function(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}},{key:"hasTextFocus",value:function(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}},{key:"hasWidgetFocus",value:function(){return this._focusTracker&&this._focusTracker.hasFocus()}},{key:"addContentWidget",value:function(e){var t={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(t)}},{key:"layoutContentWidget",value:function(e){var t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){var i=this._contentWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(i)}}},{key:"removeContentWidget",value:function(e){var t=e.getId();if(this._contentWidgets.hasOwnProperty(t)){var i=this._contentWidgets[t];delete this._contentWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(i)}}},{key:"addOverlayWidget",value:function(e){var t={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(t)}},{key:"layoutOverlayWidget",value:function(e){var t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){var i=this._overlayWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(i)}}},{key:"removeOverlayWidget",value:function(e){var t=e.getId();if(this._overlayWidgets.hasOwnProperty(t)){var i=this._overlayWidgets[t];delete this._overlayWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(i)}}},{key:"addGlyphMarginWidget",value:function(e){var t={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=t,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(t)}},{key:"layoutGlyphMarginWidget",value:function(e){var t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){var i=this._glyphMarginWidgets[t];i.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(i)}}},{key:"removeGlyphMarginWidget",value:function(e){var t=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(t)){var i=this._glyphMarginWidgets[t];delete this._glyphMarginWidgets[t],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(i)}}},{key:"changeViewZones",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}},{key:"getTargetAtClientPoint",value:function(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,t):null}},{key:"getScrolledVisiblePosition",value:function(e){if(!this._modelData||!this._modelData.hasRealView)return null;var t=this._modelData.model.validatePosition(e),n=this._configuration.options,o=n.get(142);return{top:i._getVerticalOffsetForPosition(this._modelData,t.lineNumber,t.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(t.lineNumber,t.column)+o.glyphMarginWidth+o.lineNumbersWidth+o.decorationsWidth-this.getScrollLeft(),height:n.get(65)}}},{key:"getOffsetForColumn",value:function(e,t){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,t):-1}},{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)}},{key:"setAriaOptions",value:function(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}},{key:"applyFontInfo",value:function(e){(0,j.N)(e,this._configuration.options.get(49))}},{key:"setBanner",value:function(e,t){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?t:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}},{key:"_attachModel",value:function(e){var t=this;if(e){var i=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());var o=e.onBeforeAttached(),r=new V.j(this._id,this._configuration,e,B.C.create(),U.p.create(this._configuration.options),(function(e){return _.scheduleAtNextAnimationFrame(e)}),this.languageConfigurationService,this._themeService,o);i.push(e.onWillDispose((function(){return t.setModel(null)}))),i.push(r.onEvent((function(i){switch(i.kind){case 0:t._onDidContentSizeChange.fire(i);break;case 1:t._editorTextFocus.setValue(i.hasFocus);break;case 2:t._onDidScrollChange.fire(i);break;case 3:t._onDidChangeViewZones.fire();break;case 4:t._onDidChangeHiddenAreas.fire();break;case 5:t._onDidAttemptReadOnlyEdit.fire();break;case 6:if(i.reachedMaxCursorCount){var n=t.getOption(78),o=v.NC("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",n);t._notificationService.prompt(A.zb.Warning,o,[{label:"Find and Replace",run:function(){t._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:v.NC("goToSetting","Increase Multi Cursor Limit"),run:function(){t._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}for(var r=[],a=0,s=i.selections.length;a<s;a++)r[a]=i.selections[a].getPosition();var u={position:r[0],secondaryPositions:r.slice(1),reason:i.reason,source:i.source};t._onDidChangeCursorPosition.fire(u);var l={selection:i.selections[0],secondarySelections:i.selections.slice(1),modelVersionId:i.modelVersionId,oldSelections:i.oldSelections,oldModelVersionId:i.oldModelVersionId,source:i.source,reason:i.reason};t._onDidChangeCursorSelection.fire(l);break;case 7:t._onDidChangeModelDecorations.fire(i.event);break;case 8:t._domElement.setAttribute("data-mode-id",e.getLanguageId()),t._onDidChangeModelLanguage.fire(i.event);break;case 9:t._onDidChangeModelLanguageConfiguration.fire(i.event);break;case 10:t._onDidChangeModelContent.fire(i.event);break;case 11:t._onDidChangeModelOptions.fire(i.event);break;case 12:t._onDidChangeModelTokens.fire(i.event)}})));var a=this._createView(r),s=(0,n.Z)(a,2),u=s[0],l=s[1];if(l){this._domElement.appendChild(u.domNode.domNode);for(var d=Object.keys(this._contentWidgets),c=0,h=d.length;c<h;c++){var g=d[c];u.addContentWidget(this._contentWidgets[g])}for(var m=0,f=(d=Object.keys(this._overlayWidgets)).length;m<f;m++){var y=d[m];u.addOverlayWidget(this._overlayWidgets[y])}for(var p=0,D=(d=Object.keys(this._glyphMarginWidgets)).length;p<D;p++){var C=d[p];u.addGlyphMarginWidget(this._glyphMarginWidgets[C])}u.render(!1,!0),u.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new ne(e,r,u,l,i,o)}else this._modelData=null}},{key:"_createView",value:function(e){var t,i=this;t=this.isSimpleWidget?{paste:function(e,t,n,o){i._paste("keyboard",e,t,n,o)},type:function(e){i._type("keyboard",e)},compositionType:function(e,t,n,o){i._compositionType("keyboard",e,t,n,o)},startComposition:function(){i._startComposition()},endComposition:function(){i._endComposition("keyboard")},cut:function(){i._cut("keyboard")}}:{paste:function(e,t,n,o){var r={text:e,pasteOnNewLine:t,multicursorText:n,mode:o};i._commandService.executeCommand("paste",r)},type:function(e){var t={text:e};i._commandService.executeCommand("type",t)},compositionType:function(e,t,n,o){if(n||o){var r={text:e,replacePrevCharCnt:t,replaceNextCharCnt:n,positionDelta:o};i._commandService.executeCommand("compositionType",r)}else{var a={text:e,replaceCharCnt:t};i._commandService.executeCommand("replacePreviousChar",a)}},startComposition:function(){i._commandService.executeCommand("compositionStart",{})},endComposition:function(){i._commandService.executeCommand("compositionEnd",{})},cut:function(){i._commandService.executeCommand("cut",{})}};var n=new k.q(e.coordinatesConverter);return n.onKeyDown=function(e){return i._onKeyDown.fire(e)},n.onKeyUp=function(e){return i._onKeyUp.fire(e)},n.onContextMenu=function(e){return i._onContextMenu.fire(e)},n.onMouseMove=function(e){return i._onMouseMove.fire(e)},n.onMouseLeave=function(e){return i._onMouseLeave.fire(e)},n.onMouseDown=function(e){return i._onMouseDown.fire(e)},n.onMouseUp=function(e){return i._onMouseUp.fire(e)},n.onMouseDrag=function(e){return i._onMouseDrag.fire(e)},n.onMouseDrop=function(e){return i._onMouseDrop.fire(e)},n.onMouseDropCanceled=function(e){return i._onMouseDropCanceled.fire(e)},n.onMouseWheel=function(e){return i._onMouseWheel.fire(e)},[new w.G(t,this._configuration,this._themeService.getColorTheme(),e,n,this._overflowWidgetsDomNode,this._instantiationService),!0]}},{key:"_postDetachModelCleanup",value:function(e){null===e||void 0===e||e.removeAllDecorationsWithOwnerId(this._id)}},{key:"_detachModel",value:function(){if(!this._modelData)return null;var e=this._modelData.model,t=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),t&&this._domElement.contains(t)&&this._domElement.removeChild(t),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}},{key:"_removeDecorationType",value:function(e){this._codeEditorService.removeDecorationType(e)}},{key:"hasModel",value:function(){return null!==this._modelData}},{key:"showDropIndicatorAt",value:function(e){var t=[{range:new L.e(e.lineNumber,e.column,e.lineNumber,e.column),options:i.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(t),this.revealPosition(e,1)}},{key:"removeDropIndicator",value:function(){this._dropIntoEditorDecorations.clear()}},{key:"setContextValue",value:function(e,t){this._contextKeyService.createKey(e,t)}}],[{key:"_getVerticalOffsetAfterPosition",value:function(e,t,i,n){var o=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(r.lineNumber,n)}},{key:"_getVerticalOffsetForPosition",value:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=e.model.validatePosition({lineNumber:t,column:i}),r=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(o);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber,n)}}]),i}(f.JT);oe.dropIntoEditorDecorationOptions=E.qx.register({description:"workbench-dnd-target",className:"dnd-target"}),oe=$([ee(3,x.TG),ee(4,C.$),ee(5,Z.H),ee(6,W.i6),ee(7,Q.XE),ee(8,A.lT),ee(9,H.F),ee(10,G.c_),ee(11,J.p)],oe);var re=function(e){(0,l.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;return(0,c.Z)(this,i),(n=t.call(this))._emitterOptions=e,n._onDidChangeToTrue=n._register(new m.Q5(n._emitterOptions)),n.onDidChangeToTrue=n._onDidChangeToTrue.event,n._onDidChangeToFalse=n._register(new m.Q5(n._emitterOptions)),n.onDidChangeToFalse=n._onDidChangeToFalse.event,n._value=0,n}return(0,h.Z)(i,[{key:"setValue",value:function(e){var t=e?2:1;this._value!==t&&(this._value=t,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}]),i}(f.JT),ae=function(e){(0,l.Z)(i,e);var t=(0,d.Z)(i);function i(e,n){var o;return(0,c.Z)(this,i),(o=t.call(this,{deliveryQueue:n}))._contributions=e,o}return(0,h.Z)(i,[{key:"fire",value:function(e){this._contributions.onBeforeInteractionEvent(),(0,s.Z)((0,u.Z)(i.prototype),"fire",this).call(this,e)}}]),i}(m.Q5),se=function(e){(0,l.Z)(i,e);var t=(0,d.Z)(i);function i(e,n){var o;return(0,c.Z)(this,i),(o=t.call(this))._editor=e,n.createKey("editorId",e.getId()),o._editorSimpleInput=I.u.editorSimpleInput.bindTo(n),o._editorFocus=I.u.focus.bindTo(n),o._textInputFocus=I.u.textInputFocus.bindTo(n),o._editorTextFocus=I.u.editorTextFocus.bindTo(n),o._editorTabMovesFocus=I.u.tabMovesFocus.bindTo(n),o._editorReadonly=I.u.readOnly.bindTo(n),o._inDiffEditor=I.u.inDiffEditor.bindTo(n),o._editorColumnSelection=I.u.columnSelection.bindTo(n),o._hasMultipleSelections=I.u.hasMultipleSelections.bindTo(n),o._hasNonEmptySelection=I.u.hasNonEmptySelection.bindTo(n),o._canUndo=I.u.canUndo.bindTo(n),o._canRedo=I.u.canRedo.bindTo(n),o._register(o._editor.onDidChangeConfiguration((function(){return o._updateFromConfig()}))),o._register(o._editor.onDidChangeCursorSelection((function(){return o._updateFromSelection()}))),o._register(o._editor.onDidFocusEditorWidget((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidBlurEditorWidget((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidFocusEditorText((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidBlurEditorText((function(){return o._updateFromFocus()}))),o._register(o._editor.onDidChangeModel((function(){return o._updateFromModel()}))),o._register(o._editor.onDidChangeConfiguration((function(){return o._updateFromModel()}))),o._register(Y.n.onDidChangeTabFocus((function(){return o._editorTabMovesFocus.set(Y.n.getTabFocusMode("editorFocus"))}))),o._updateFromConfig(),o._updateFromSelection(),o._updateFromFocus(),o._updateFromModel(),o._editorSimpleInput.set(o._editor.isSimpleWidget),o}return(0,h.Z)(i,[{key:"_updateFromConfig",value:function(){var e=this._editor.getOptions();this._editorTabMovesFocus.set(Y.n.getTabFocusMode("editorFocus")),this._editorReadonly.set(e.get(89)),this._inDiffEditor.set(e.get(60)),this._editorColumnSelection.set(e.get(21))}},{key:"_updateFromSelection",value:function(){var e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some((function(e){return!e.isEmpty()})))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}},{key:"_updateFromFocus",value:function(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}},{key:"_updateFromModel",value:function(){var e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}]),i}(f.JT),ue=function(e){(0,l.Z)(i,e);var t=(0,d.Z)(i);function i(e,n,o){var r;(0,c.Z)(this,i),(r=t.call(this))._editor=e,r._contextKeyService=n,r._languageFeaturesService=o,r._langId=I.u.languageId.bindTo(n),r._hasCompletionItemProvider=I.u.hasCompletionItemProvider.bindTo(n),r._hasCodeActionsProvider=I.u.hasCodeActionsProvider.bindTo(n),r._hasCodeLensProvider=I.u.hasCodeLensProvider.bindTo(n),r._hasDefinitionProvider=I.u.hasDefinitionProvider.bindTo(n),r._hasDeclarationProvider=I.u.hasDeclarationProvider.bindTo(n),r._hasImplementationProvider=I.u.hasImplementationProvider.bindTo(n),r._hasTypeDefinitionProvider=I.u.hasTypeDefinitionProvider.bindTo(n),r._hasHoverProvider=I.u.hasHoverProvider.bindTo(n),r._hasDocumentHighlightProvider=I.u.hasDocumentHighlightProvider.bindTo(n),r._hasDocumentSymbolProvider=I.u.hasDocumentSymbolProvider.bindTo(n),r._hasReferenceProvider=I.u.hasReferenceProvider.bindTo(n),r._hasRenameProvider=I.u.hasRenameProvider.bindTo(n),r._hasSignatureHelpProvider=I.u.hasSignatureHelpProvider.bindTo(n),r._hasInlayHintsProvider=I.u.hasInlayHintsProvider.bindTo(n),r._hasDocumentFormattingProvider=I.u.hasDocumentFormattingProvider.bindTo(n),r._hasDocumentSelectionFormattingProvider=I.u.hasDocumentSelectionFormattingProvider.bindTo(n),r._hasMultipleDocumentFormattingProvider=I.u.hasMultipleDocumentFormattingProvider.bindTo(n),r._hasMultipleDocumentSelectionFormattingProvider=I.u.hasMultipleDocumentSelectionFormattingProvider.bindTo(n),r._isInWalkThrough=I.u.isInWalkThroughSnippet.bindTo(n);var a=function(){return r._update()};return r._register(e.onDidChangeModel(a)),r._register(e.onDidChangeModelLanguage(a)),r._register(o.completionProvider.onDidChange(a)),r._register(o.codeActionProvider.onDidChange(a)),r._register(o.codeLensProvider.onDidChange(a)),r._register(o.definitionProvider.onDidChange(a)),r._register(o.declarationProvider.onDidChange(a)),r._register(o.implementationProvider.onDidChange(a)),r._register(o.typeDefinitionProvider.onDidChange(a)),r._register(o.hoverProvider.onDidChange(a)),r._register(o.documentHighlightProvider.onDidChange(a)),r._register(o.documentSymbolProvider.onDidChange(a)),r._register(o.referenceProvider.onDidChange(a)),r._register(o.renameProvider.onDidChange(a)),r._register(o.documentFormattingEditProvider.onDidChange(a)),r._register(o.documentRangeFormattingEditProvider.onDidChange(a)),r._register(o.signatureHelpProvider.onDidChange(a)),r._register(o.inlayHintsProvider.onDidChange(a)),a(),r}return(0,h.Z)(i,[{key:"dispose",value:function(){(0,s.Z)((0,u.Z)(i.prototype),"dispose",this).call(this)}},{key:"reset",value:function(){var e=this;this._contextKeyService.bufferChangeEvents((function(){e._langId.reset(),e._hasCompletionItemProvider.reset(),e._hasCodeActionsProvider.reset(),e._hasCodeLensProvider.reset(),e._hasDefinitionProvider.reset(),e._hasDeclarationProvider.reset(),e._hasImplementationProvider.reset(),e._hasTypeDefinitionProvider.reset(),e._hasHoverProvider.reset(),e._hasDocumentHighlightProvider.reset(),e._hasDocumentSymbolProvider.reset(),e._hasReferenceProvider.reset(),e._hasRenameProvider.reset(),e._hasDocumentFormattingProvider.reset(),e._hasDocumentSelectionFormattingProvider.reset(),e._hasSignatureHelpProvider.reset(),e._isInWalkThrough.reset()}))}},{key:"_update",value:function(){var e=this,t=this._editor.getModel();t?this._contextKeyService.bufferChangeEvents((function(){e._langId.set(t.getLanguageId()),e._hasCompletionItemProvider.set(e._languageFeaturesService.completionProvider.has(t)),e._hasCodeActionsProvider.set(e._languageFeaturesService.codeActionProvider.has(t)),e._hasCodeLensProvider.set(e._languageFeaturesService.codeLensProvider.has(t)),e._hasDefinitionProvider.set(e._languageFeaturesService.definitionProvider.has(t)),e._hasDeclarationProvider.set(e._languageFeaturesService.declarationProvider.has(t)),e._hasImplementationProvider.set(e._languageFeaturesService.implementationProvider.has(t)),e._hasTypeDefinitionProvider.set(e._languageFeaturesService.typeDefinitionProvider.has(t)),e._hasHoverProvider.set(e._languageFeaturesService.hoverProvider.has(t)),e._hasDocumentHighlightProvider.set(e._languageFeaturesService.documentHighlightProvider.has(t)),e._hasDocumentSymbolProvider.set(e._languageFeaturesService.documentSymbolProvider.has(t)),e._hasReferenceProvider.set(e._languageFeaturesService.referenceProvider.has(t)),e._hasRenameProvider.set(e._languageFeaturesService.renameProvider.has(t)),e._hasSignatureHelpProvider.set(e._languageFeaturesService.signatureHelpProvider.has(t)),e._hasInlayHintsProvider.set(e._languageFeaturesService.inlayHintsProvider.has(t)),e._hasDocumentFormattingProvider.set(e._languageFeaturesService.documentFormattingEditProvider.has(t)||e._languageFeaturesService.documentRangeFormattingEditProvider.has(t)),e._hasDocumentSelectionFormattingProvider.set(e._languageFeaturesService.documentRangeFormattingEditProvider.has(t)),e._hasMultipleDocumentFormattingProvider.set(e._languageFeaturesService.documentFormattingEditProvider.all(t).length+e._languageFeaturesService.documentRangeFormattingEditProvider.all(t).length>1),e._hasMultipleDocumentSelectionFormattingProvider.set(e._languageFeaturesService.documentRangeFormattingEditProvider.all(t).length>1),e._isInWalkThrough.set(t.uri.scheme===y.lg.walkThroughSnippet)})):this.reset()}}]),i}(f.JT),le=function(e){(0,l.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;return(0,c.Z)(this,i),(n=t.call(this))._onChange=n._register(new m.Q5),n.onChange=n._onChange.event,n._hasFocus=!1,n._domFocusTracker=n._register(_.trackFocus(e)),n._register(n._domFocusTracker.onDidFocus((function(){n._hasFocus=!0,n._onChange.fire(void 0)}))),n._register(n._domFocusTracker.onDidBlur((function(){n._hasFocus=!1,n._onChange.fire(void 0)}))),n}return(0,h.Z)(i,[{key:"hasFocus",value:function(){return this._hasFocus}}]),i}(f.JT),de=function(){function e(t,i){(0,c.Z)(this,e),this._editor=t,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(i)&&i.length>0&&this.set(i)}return(0,h.Z)(e,[{key:"length",get:function(){return this._decorationIds.length}},{key:"onDidChange",value:function(e,t,i){var n=this;return this._editor.onDidChangeModelDecorations((function(i){n._isChangingDecorations||e.call(t,i)}),i)}},{key:"getRange",value:function(e){return this._editor.hasModel()?e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e]):null}},{key:"getRanges",value:function(){if(!this._editor.hasModel())return[];var e,t=this._editor.getModel(),i=[],n=(0,r.Z)(this._decorationIds);try{for(n.s();!(e=n.n()).done;){var o=e.value,a=t.getDecorationRange(o);a&&i.push(a)}}catch(s){n.e(s)}finally{n.f()}return i}},{key:"has",value:function(e){return this._decorationIds.includes(e.id)}},{key:"clear",value:function(){0!==this._decorationIds.length&&this.set([])}},{key:"set",value:function(e){var t=this;try{this._isChangingDecorations=!0,this._editor.changeDecorations((function(i){t._decorationIds=i.deltaDecorations(t._decorationIds,e)}))}finally{this._isChangingDecorations=!1}return this._decorationIds}}]),e}(),ce=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),he=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function ve(e){return ce+encodeURIComponent(e.toString())+he}var _e=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),ge=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');(0,Q.Ic)((function(e,t){var i=e.getColor(R.lXJ);i&&t.addRule(".monaco-editor .".concat("squiggly-error",' { background: url("data:image/svg+xml,',ve(i),'") repeat-x bottom left; }'));var n=e.getColor(R.uoC);n&&t.addRule(".monaco-editor .".concat("squiggly-warning",' { background: url("data:image/svg+xml,',ve(n),'") repeat-x bottom left; }'));var o=e.getColor(R.c63);o&&t.addRule(".monaco-editor .".concat("squiggly-info",' { background: url("data:image/svg+xml,',ve(o),'") repeat-x bottom left; }'));var r=e.getColor(R.Dut);r&&t.addRule(".monaco-editor .".concat("squiggly-hint",' { background: url("data:image/svg+xml,',_e+encodeURIComponent(r.toString())+ge,'") no-repeat bottom left; }'));var a=e.getColor(F.zu);a&&t.addRule(".monaco-editor.showUnused .".concat("squiggly-inline-unnecessary"," { opacity: ",a.rgba.a,"; }"))}))}}]);
//# sourceMappingURL=monaco-editor-vendor.55a95165.9350b267.js.map