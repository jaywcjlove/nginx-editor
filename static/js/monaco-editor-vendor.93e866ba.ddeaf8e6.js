"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[88],{76064:function(e,t,i){i.r(t);var n,o,r=i(95253),s=i(74165),a=i(15671),l=i(43144),c=i(60136),d=i(27277),u=i(18420),h=i(59874),g=i(14443),f=i(77819),p=i(8022),m=i(98926),v=i(37762),_=i(29439),y=i(97326),b=i(11752),S=i(61120),k=i(65096),w=i(65441),C=i(32959),x=i(32990),D=i(81200),L=i(4391),I=i(65631),N=i(53603),T=i(63465),Z=i(56606),P=(0,l.Z)((function e(t,i){(0,a.Z)(this,e),this.lineNumbers=t,this.lastLineRelativePosition=i})),M=(0,D.Z)("stickyScrollViewLayer",{createHTML:function(e){return e}}),F=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this))._editor=e,n._rootDomNode=document.createElement("div"),n._disposableStore=n._register(new k.SL),n._lineNumbers=[],n._lastLineRelativePosition=0,n._hoverOnLine=-1,n._hoverOnColumn=-1,n._layoutInfo=n._editor.getLayoutInfo(),n._rootDomNode=document.createElement("div"),n._rootDomNode.className="sticky-widget",n._rootDomNode.classList.toggle("peek",e instanceof L.H),n._rootDomNode.style.width="".concat(n._layoutInfo.width-n._layoutInfo.minimap.minimapCanvasOuterWidth-n._layoutInfo.verticalScrollbarWidth,"px"),n}return(0,l.Z)(i,[{key:"hoverOnLine",get:function(){return this._hoverOnLine}},{key:"hoverOnColumn",get:function(){return this._hoverOnColumn}},{key:"lineNumbers",get:function(){return this._lineNumbers}},{key:"getCurrentLines",value:function(){return this._lineNumbers}},{key:"setState",value:function(e){C.clearNode(this._rootDomNode),this._disposableStore.clear(),this._lineNumbers.length=0;var t=this._editor.getOption(65);e.lineNumbers.length*t+e.lastLineRelativePosition>0?(this._lastLineRelativePosition=e.lastLineRelativePosition,this._lineNumbers=e.lineNumbers):(this._lastLineRelativePosition=0,this._lineNumbers=[]),this._renderRootNode()}},{key:"_renderRootNode",value:function(){if(this._editor._getViewModel()){var e,t=(0,v.Z)(this._lineNumbers.entries());try{for(t.s();!(e=t.n()).done;){var i=(0,_.Z)(e.value,2),n=i[0],o=i[1],r=this._renderChildNode(n,o);this._rootDomNode.appendChild(r)}}catch(l){t.e(l)}finally{t.f()}var s=this._editor.getOption(65),a=this._lineNumbers.length*s+this._lastLineRelativePosition;this._rootDomNode.style.display=a>0?"block":"none",this._rootDomNode.style.height=a.toString()+"px",this._rootDomNode.setAttribute("role","list"),"left"===this._editor.getOption(71).side&&(this._rootDomNode.style.marginLeft=this._editor.getLayoutInfo().minimap.minimapCanvasOuterWidth+"px")}}},{key:"_renderChildNode",value:function(e,t){var i,n=this,o=document.createElement("div"),r=this._editor._getViewModel(),s=r.coordinatesConverter.convertModelPositionToViewPosition(new I.L(t,1)).lineNumber,a=r.getViewLineRenderingData(s),l=this._editor.getLayoutInfo(),c=l.width-l.minimap.minimapCanvasOuterWidth-l.verticalScrollbarWidth,d=this._editor.getOption(71).side,u=this._editor.getOption(65),h=this._editor.getOption(66);try{i=T.Kp.filter(a.inlineDecorations,s,a.minColumn,a.maxColumn)}catch(y){i=[]}var g,f=new Z.IJ(!0,!0,a.content,a.continuesWithWrappedLine,a.isBasicASCII,a.containsRTL,0,a.tokens,i,a.tabSize,a.startVisibleColumn,1,1,1,500,"none",!0,!0,null),p=new N.HT(2e3);(0,Z.d1)(f,p),g=M?M.createHTML(p.build()):p.build();var m=document.createElement("span");m.className="sticky-line",m.classList.add("stickyLine".concat(t)),m.style.lineHeight="".concat(u,"px"),m.innerHTML=g;var v=document.createElement("span");v.className="sticky-line",v.style.lineHeight="".concat(u,"px"),"left"===d?v.style.width="".concat(l.contentLeft-l.minimap.minimapCanvasOuterWidth,"px"):"right"===d&&(v.style.width="".concat(l.contentLeft,"px"));var _=document.createElement("span");return 1===h.renderType||3===h.renderType&&t%10===0?_.innerText=t.toString():2===h.renderType&&(_.innerText=Math.abs(t-this._editor.getPosition().lineNumber).toString()),_.className="sticky-line-number",_.style.lineHeight="".concat(u,"px"),_.style.width="".concat(l.lineNumbersWidth,"px"),"left"===d?_.style.paddingLeft="".concat(l.lineNumbersLeft-l.minimap.minimapCanvasOuterWidth,"px"):"right"===d&&(_.style.paddingLeft="".concat(l.lineNumbersLeft,"px")),v.appendChild(_),this._editor.applyFontInfo(m),this._editor.applyFontInfo(_),o.appendChild(v),o.appendChild(m),o.className="sticky-line-root",o.setAttribute("role","listitem"),o.tabIndex=0,o.style.lineHeight="".concat(u,"px"),o.style.width="".concat(c,"px"),o.style.height="".concat(u,"px"),o.style.zIndex="0",e===this._lineNumbers.length-1&&(o.style.position="relative",o.style.zIndex="-1",o.style.top=this._lastLineRelativePosition+"px"),this._disposableStore.add(C.addDisposableListener(o,"mouseover",(function(e){if(n._editor.hasModel()){var i=new x.n(e).target.innerText;n._hoverOnLine=t,n._hoverOnColumn=n._editor.getModel().getLineContent(t).indexOf(i)+1||-1}}))),o}},{key:"getId",value:function(){return"editor.contrib.stickyScrollWidget"}},{key:"getDomNode",value:function(){return this._rootDomNode}},{key:"getPosition",value:function(){return{preference:null}}}]),i}(k.JT),O=i(7388),R=i(71049),A=i(38102),E=i(44641),z=i(13880),W=i(19536),H=i(40455),V=i(45092),B=i(21039),G=i(69220),K=i(74146),U=(0,l.Z)((function e(t,i){(0,a.Z)(this,e),this.startLineNumber=t,this.endLineNumber=i})),j=(0,l.Z)((function e(t,i,n){(0,a.Z)(this,e),this.range=t,this.children=i,this.parent=n})),q=(0,l.Z)((function e(t,i,n,o){(0,a.Z)(this,e),this.uri=t,this.version=i,this.element=n,this.outlineProviderId=o})),$=i(12928),Q=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},J=function(e,t){return function(i,n){t(i,n,e)}},X=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};!function(e){e.OUTLINE_MODEL="outlineModel",e.FOLDING_PROVIDER_MODEL="foldingProviderModel",e.INDENTATION_MODEL="indentationModel"}(n||(n={})),function(e){e[e.VALID=0]="VALID",e[e.INVALID=1]="INVALID",e[e.CANCELED=2]="CANCELED"}(o||(o={}));var Y=function(){function e(t,i,o,r){(0,a.Z)(this,e),this._editor=t,this._languageConfigurationService=i,this._languageFeaturesService=o,this._modelProviders=[],this._modelPromise=null,this._updateScheduler=new R.vp(300);var s=new te(o),l=new oe(this._editor,o),c=new ne(this._editor,i);switch(r){case n.OUTLINE_MODEL:this._modelProviders.push(s),this._modelProviders.push(l),this._modelProviders.push(c);break;case n.FOLDING_PROVIDER_MODEL:this._modelProviders.push(l),this._modelProviders.push(c);break;case n.INDENTATION_MODEL:this._modelProviders.push(c)}this._store=new k.SL}return(0,l.Z)(e,[{key:"_cancelModelPromise",value:function(){this._modelPromise&&(this._modelPromise.cancel(),this._modelPromise=null)}},{key:"update",value:function(e,t,i){return X(this,void 0,void 0,(0,s.Z)().mark((function n(){var r=this;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return this._store.clear(),this._store.add({dispose:function(){var e;r._cancelModelPromise(),null===(e=r._updateScheduler)||void 0===e||e.cancel()}}),this._cancelModelPromise(),n.next=5,this._updateScheduler.trigger((function(){return X(r,void 0,void 0,(0,s.Z)().mark((function n(){var r,a,l,c,d,u,h;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:r=(0,v.Z)(this._modelProviders),n.prev=1,r.s();case 3:if((a=r.n()).done){n.next=20;break}return l=a.value,c=l.computeStickyModel(e,t,i),d=c.statusPromise,u=c.modelPromise,this._modelPromise=u,n.next=9,d;case 9:if(h=n.sent,this._modelPromise===u){n.next=12;break}return n.abrupt("return",null);case 12:n.t0=h,n.next=n.t0===o.CANCELED?15:n.t0===o.VALID?17:18;break;case 15:return this._store.clear(),n.abrupt("return",null);case 17:return n.abrupt("return",l.stickyModel);case 18:n.next=3;break;case 20:n.next=25;break;case 22:n.prev=22,n.t1=n.catch(1),r.e(n.t1);case 25:return n.prev=25,r.f(),n.finish(25);case 28:return n.abrupt("return",null);case 29:case"end":return n.stop()}}),n,this,[[1,22,25,28]])})))}));case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}}),n,this)})))}}]),e}();Y=Q([J(1,W.c_),J(2,w.p)],Y);var ee=function(){function e(){(0,a.Z)(this,e),this._stickyModel=null}return(0,l.Z)(e,[{key:"stickyModel",get:function(){return this._stickyModel}},{key:"_invalid",value:function(){return this._stickyModel=null,o.INVALID}},{key:"computeStickyModel",value:function(e,t,i){var n=this;if(i.isCancellationRequested||!this.isProviderValid(e))return{statusPromise:this._invalid(),modelPromise:null};var r=(0,R.PG)((function(i){return n.createModelFromProvider(e,t,i)}));return{statusPromise:r.then((function(r){return n.isModelValid(r)?i.isCancellationRequested?o.CANCELED:(n._stickyModel=n.createStickyModel(e,t,i,r),o.VALID):n._invalid()})).then(void 0,(function(e){return(0,K.dL)(e),o.CANCELED})),modelPromise:r}}},{key:"isModelValid",value:function(e){return!0}},{key:"isProviderValid",value:function(e){return!0}}]),e}(),te=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this))._languageFeaturesService=e,n}return(0,l.Z)(i,[{key:"createModelFromProvider",value:function(e,t,i){return H.C3.create(this._languageFeaturesService.documentSymbolProvider,e,i)}},{key:"createStickyModel",value:function(e,t,i,n){var o,r=this._stickyModelFromOutlineModel(n,null===(o=this._stickyModel)||void 0===o?void 0:o.outlineProviderId),s=r.stickyOutlineElement,a=r.providerID;return new q(e.uri,t,s,a)}},{key:"isModelValid",value:function(e){return e&&e.children.size>0}},{key:"_stickyModelFromOutlineModel",value:function(e,t){var i,n=this;if($.$.first(e.children.values())instanceof H.H3){var o=$.$.find(e.children.values(),(function(e){return e.id===t}));if(o)i=o.children;else{var r,s="",a=-1,l=void 0,c=(0,v.Z)(e.children.entries());try{for(c.s();!(r=c.n()).done;){var d=(0,_.Z)(r.value,2),u=(d[0],d[1]),h=this._findSumOfRangesOfGroup(u);h>a&&(l=u,a=h,s=u.id)}}catch(b){c.e(b)}finally{c.f()}t=s,i=l.children}}else i=e.children;var g,f=[],p=Array.from(i.values()).sort((function(e,t){var i=new U(e.symbol.range.startLineNumber,e.symbol.range.endLineNumber),o=new U(t.symbol.range.startLineNumber,t.symbol.range.endLineNumber);return n._comparator(i,o)})),m=(0,v.Z)(p);try{for(m.s();!(g=m.n()).done;){var y=g.value;f.push(this._stickyModelFromOutlineElement(y,y.symbol.selectionRange.startLineNumber))}}catch(b){m.e(b)}finally{m.f()}return{stickyOutlineElement:new j(void 0,f,void 0),providerID:t}}},{key:"_stickyModelFromOutlineElement",value:function(e,t){var i,n=this,o=[],r=(0,v.Z)(e.children.values());try{for(r.s();!(i=r.n()).done;){var s=i.value;if(s.symbol.selectionRange.startLineNumber!==s.symbol.range.endLineNumber)if(s.symbol.selectionRange.startLineNumber!==t)o.push(this._stickyModelFromOutlineElement(s,s.symbol.selectionRange.startLineNumber));else{var a,l=(0,v.Z)(s.children.values());try{for(l.s();!(a=l.n()).done;){var c=a.value;o.push(this._stickyModelFromOutlineElement(c,s.symbol.selectionRange.startLineNumber))}}catch(u){l.e(u)}finally{l.f()}}}}catch(u){r.e(u)}finally{r.f()}o.sort((function(e,t){return n._comparator(e.range,t.range)}));var d=new U(e.symbol.selectionRange.startLineNumber,e.symbol.range.endLineNumber);return new j(d,o,void 0)}},{key:"_comparator",value:function(e,t){return e.startLineNumber!==t.startLineNumber?e.startLineNumber-t.startLineNumber:t.endLineNumber-e.endLineNumber}},{key:"_findSumOfRangesOfGroup",value:function(e){var t,i=0,n=(0,v.Z)(e.children.values());try{for(n.s();!(t=n.n()).done;){var o=t.value;i+=this._findSumOfRangesOfGroup(o)}}catch(r){n.e(r)}finally{n.f()}return e instanceof H.sT?i+e.symbol.range.endLineNumber-e.symbol.selectionRange.startLineNumber:i}}]),i}(ee);te=Q([J(0,w.p)],te);var ie=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this))._foldingLimitReporter=new V.RangesLimitReporter(e),n}return(0,l.Z)(i,[{key:"createStickyModel",value:function(e,t,i,n){var o=this._fromFoldingRegions(n);return new q(e.uri,t,o,void 0)}},{key:"isModelValid",value:function(e){return null!==e}},{key:"_fromFoldingRegions",value:function(e){for(var t=e.length,i=[],n=new j(void 0,[],void 0),o=0;o<t;o++){var r=e.getParentIndex(o),s=void 0;s=-1!==r?i[r]:n;var a=new j(new U(e.getStartLineNumber(o),e.getEndLineNumber(o)+1),[],s);s.children.push(a),i.push(a)}return n}}]),i}(ee),ne=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n){var o;return(0,a.Z)(this,i),(o=t.call(this,e))._languageConfigurationService=n,o}return(0,l.Z)(i,[{key:"createModelFromProvider",value:function(e,t,i){return new G.aI(e,this._languageConfigurationService,this._foldingLimitReporter).compute(i)}}]),i}(ie);ne=Q([J(1,W.c_)],ne);var oe=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n){var o;return(0,a.Z)(this,i),(o=t.call(this,e))._languageFeaturesService=n,o}return(0,l.Z)(i,[{key:"isProviderValid",value:function(e){return V.FoldingController.getFoldingRangeProviders(this._languageFeaturesService,e).length>0}},{key:"createModelFromProvider",value:function(e,t,i){var n=this,o=V.FoldingController.getFoldingRangeProviders(this._languageFeaturesService,e);return new B.e(e,o,(function(){return n.createModelFromProvider(e,t,i)}),this._foldingLimitReporter,void 0).compute(i)}}]),i}(ie);oe=Q([J(1,w.p)],oe);var re=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},se=function(e,t){return function(i,n){t(i,n,e)}},ae=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},le=(0,l.Z)((function e(t,i,n){(0,a.Z)(this,e),this.startLineNumber=t,this.endLineNumber=i,this.nestingDepth=n})),ce=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n,o){var r;return(0,a.Z)(this,i),(r=t.call(this))._languageFeaturesService=n,r._languageConfigurationService=o,r._onDidChangeStickyScroll=r._store.add(new z.Q5),r.onDidChangeStickyScroll=r._onDidChangeStickyScroll.event,r._options=null,r._model=null,r._cts=null,r._stickyModelProvider=null,r._editor=e,r._sessionStore=new k.SL,r._updateSoon=r._register(new R.pY((function(){return r.update()}),50)),r._register(r._editor.onDidChangeConfiguration((function(e){e.hasChanged(113)&&r.readConfiguration()}))),r.readConfiguration(),r}return(0,l.Z)(i,[{key:"dispose",value:function(){(0,b.Z)((0,S.Z)(i.prototype),"dispose",this).call(this),this._sessionStore.dispose()}},{key:"readConfiguration",value:function(){var e=this;this._options=this._editor.getOption(113),this._options.enabled?(this._stickyModelProvider=new Y(this._editor,this._languageConfigurationService,this._languageFeaturesService,this._options.defaultModel),this._sessionStore.add(this._editor.onDidChangeModel((function(){return e.update()}))),this._sessionStore.add(this._editor.onDidChangeHiddenAreas((function(){return e.update()}))),this._sessionStore.add(this._editor.onDidChangeModelContent((function(){return e._updateSoon.schedule()}))),this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((function(){return e.update()}))),this.update()):this._sessionStore.clear()}},{key:"getVersionId",value:function(){var e;return null===(e=this._model)||void 0===e?void 0:e.version}},{key:"update",value:function(){var e;return ae(this,void 0,void 0,(0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return null===(e=this._cts)||void 0===e||e.dispose(!0),this._cts=new O.A,t.next=4,this.updateStickyModel(this._cts.token);case 4:this._onDidChangeStickyScroll.fire();case 5:case"end":return t.stop()}}),t,this)})))}},{key:"updateStickyModel",value:function(e){return ae(this,void 0,void 0,(0,s.Z)().mark((function t(){var i,n,o,r,a=this;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()&&this._stickyModelProvider){t.next=2;break}return t.abrupt("return");case 2:return i=this._editor.getModel(),n=i.getVersionId(),o=!!this._model&&!(0,E.Xy)(this._model.uri,i.uri),r=o?setTimeout((function(){e.isCancellationRequested||(a._model=new q(i.uri,i.getVersionId(),void 0,void 0),a._onDidChangeStickyScroll.fire())}),75):void 0,t.next=8,this._stickyModelProvider.update(i,n,e);case 8:this._model=t.sent,clearTimeout(r);case 10:case"end":return t.stop()}}),t,this)})))}},{key:"updateIndex",value:function(e){return-1===e?e=0:e<0&&(e=-e-2),e}},{key:"getCandidateStickyLinesIntersectingFromStickyModel",value:function(e,t,i,n,o){if(0!==t.children.length){for(var r=o,s=[],a=0;a<t.children.length;a++){var l=t.children[a];l.range&&s.push(l.range.startLineNumber)}for(var c=this.updateIndex((0,A.ry)(s,e.startLineNumber,(function(e,t){return e-t}))),d=this.updateIndex((0,A.ry)(s,e.startLineNumber+n,(function(e,t){return e-t}))),u=c;u<=d;u++){var h=t.children[u];if(!h)return;if(h.range){var g=h.range.startLineNumber,f=h.range.endLineNumber;e.startLineNumber<=f+1&&g-1<=e.endLineNumber&&g!==r&&(r=g,i.push(new le(g,f-1,n+1)),this.getCandidateStickyLinesIntersectingFromStickyModel(e,h,i,n+1,g))}else this.getCandidateStickyLinesIntersectingFromStickyModel(e,h,i,n,o)}}}},{key:"getCandidateStickyLinesIntersecting",value:function(e){var t,i;if(!(null===(t=this._model)||void 0===t?void 0:t.element))return[];var n=[];this.getCandidateStickyLinesIntersectingFromStickyModel(e,this._model.element,n,0,-1);var o=null===(i=this._editor._getViewModel())||void 0===i?void 0:i.getHiddenAreas();if(o){var r,s=(0,v.Z)(o);try{var a=function(){var e=r.value;n=n.filter((function(t){return!(t.startLineNumber>=e.startLineNumber&&t.endLineNumber<=e.endLineNumber+1)}))};for(s.s();!(r=s.n()).done;)a()}catch(l){s.e(l)}finally{s.f()}}return n}}]),i}(k.JT);ce=re([se(1,w.p),se(2,W.c_)],ce);var de=i(64606),ue=i(92361),he=i(64124),ge=i(17429),fe=i(94738),pe=i(32993),me=i(68200),ve=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},_e=function(e,t){return function(i,n){t(i,n,e)}},ye=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},be=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n,o,r,l,c,d){var u;(0,a.Z)(this,i),(u=t.call(this))._editor=e,u._contextMenuService=n,u._languageFeaturesService=o,u._instaService=r,u._contextKeyService=d,u._sessionStore=new k.SL,u._maxStickyLines=Number.MAX_SAFE_INTEGER,u._candidateDefinitionsLength=-1,u._focusedStickyElementIndex=-1,u._enabled=!1,u._focused=!1,u._positionRevealed=!1,u._onMouseDown=!1,u._stickyScrollWidget=new F(u._editor),u._stickyLineCandidateProvider=new ce(u._editor,o,l),u._register(u._stickyScrollWidget),u._register(u._stickyLineCandidateProvider),u._widgetState=new P([],0),u._readConfiguration(),u._register(u._editor.onDidChangeConfiguration((function(e){e.hasChanged(113)&&u._readConfiguration()}))),u._register(C.addDisposableListener(u._stickyScrollWidget.getDomNode(),C.EventType.CONTEXT_MENU,(function(e){return ye((0,y.Z)(u),void 0,void 0,(0,s.Z)().mark((function t(){return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this._onContextMenu(e);case 1:case"end":return t.stop()}}),t,this)})))}))),u._stickyScrollFocusedContextKey=m.u.stickyScrollFocused.bindTo(u._contextKeyService),u._stickyScrollVisibleContextKey=m.u.stickyScrollVisible.bindTo(u._contextKeyService);var h=u._register(C.trackFocus(u._stickyScrollWidget.getDomNode()));return u._register(h.onDidBlur((function(e){var t=u._stickyScrollWidget.getDomNode().clientHeight;!1===u._positionRevealed&&0===t?(u._focusedStickyElementIndex=-1,u.focus()):u._disposeFocusStickyScrollStore()}))),u._register(h.onDidFocus((function(e){u.focus()}))),u._register(u._createClickLinkGesture()),u._register(C.addDisposableListener(u._stickyScrollWidget.getDomNode(),C.EventType.MOUSE_DOWN,(function(e){u._onMouseDown=!0}))),u}return(0,l.Z)(i,[{key:"_disposeFocusStickyScrollStore",value:function(){var e;this._stickyScrollFocusedContextKey.set(!1),null===(e=this._focusDisposableStore)||void 0===e||e.dispose(),this._focused=!1,this._positionRevealed=!1,this._onMouseDown=!1}},{key:"focus",value:function(){if(this._onMouseDown)return this._onMouseDown=!1,void this._editor.focus();if(!0!==this._stickyScrollFocusedContextKey.get()){this._focused=!0,this._focusDisposableStore=new k.SL,this._stickyScrollFocusedContextKey.set(!0);var e=this._stickyScrollWidget.getDomNode();e.lastElementChild.focus(),this._stickyElements=e.children,this._focusedStickyElementIndex=this._stickyScrollWidget.lineNumbers.length-1}}},{key:"focusNext",value:function(){this._focusedStickyElementIndex<this._stickyElements.length-1&&this._focusNav(!0)}},{key:"focusPrevious",value:function(){this._focusedStickyElementIndex>0&&this._focusNav(!1)}},{key:"selectEditor",value:function(){this._editor.focus()}},{key:"_focusNav",value:function(e){this._focusedStickyElementIndex=e?this._focusedStickyElementIndex+1:this._focusedStickyElementIndex-1,this._stickyElements.item(this._focusedStickyElementIndex).focus()}},{key:"goToFocused",value:function(){var e=this._stickyScrollWidget.lineNumbers;this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:e[this._focusedStickyElementIndex],column:1})}},{key:"_revealPosition",value:function(e){this._positionRevealed=!0,this._editor.revealPosition(e),this._editor.setSelection(ge.e.fromPositions(e)),this._editor.focus()}},{key:"_createClickLinkGesture",value:function(){var e=this,t=new k.SL,i=new k.SL;t.add(i);var n=new he.yN(this._editor,!0);return t.add(n),t.add(n.onMouseMoveOrRelevantKeyDown((function(t){var n=(0,_.Z)(t,2),o=n[0];n[1];if(e._editor.hasModel()&&o.hasTriggerModifier){var r=o.target;if(r.detail===e._stickyScrollWidget.getId()&&r.element.innerText===r.element.innerHTML){var s=r.element.innerText;if(-1===e._stickyScrollWidget.hoverOnColumn)return;var a=e._stickyScrollWidget.hoverOnLine,l=e._stickyScrollWidget.hoverOnColumn,c=new ge.e(a,l,a,l+s.length);if(c.equalsRange(e._stickyRangeProjectedOnEditor)){if("underline"===r.element.style.textDecoration)return}else e._stickyRangeProjectedOnEditor=c,i.clear();var d,u=new O.A;i.add((0,k.OF)((function(){return u.dispose(!0)}))),(0,fe.nD)(e._languageFeaturesService.definitionProvider,e._editor.getModel(),new I.L(a,l+1),u.token).then((function(t){if(!u.token.isCancellationRequested)if(0!==t.length){e._candidateDefinitionsLength=t.length;var n=r.element;d!==n?(i.clear(),(d=n).style.textDecoration="underline",i.add((0,k.OF)((function(){d.style.textDecoration="none"})))):d||((d=n).style.textDecoration="underline",i.add((0,k.OF)((function(){d.style.textDecoration="none"}))))}else i.clear()}))}else i.clear()}else i.clear()}))),t.add(n.onCancel((function(){i.clear()}))),t.add(n.onExecute((function(t){return ye(e,void 0,void 0,(0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target.detail===this._stickyScrollWidget.getId()){e.next=2;break}return e.abrupt("return");case 2:t.hasTriggerModifier?(this._candidateDefinitionsLength>1&&(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:this._stickyScrollWidget.hoverOnLine,column:1})),this._instaService.invokeFunction(pe.K,t,this._editor,{uri:this._editor.getModel().uri,range:this._stickyRangeProjectedOnEditor})):t.isRightClick||(this._focused&&this._disposeFocusStickyScrollStore(),this._revealPosition({lineNumber:this._stickyScrollWidget.hoverOnLine,column:this._stickyScrollWidget.hoverOnColumn}));case 3:case"end":return e.stop()}}),e,this)})))}))),t}},{key:"_onContextMenu",value:function(e){var t=new x.n(e);this._contextMenuService.showContextMenu({menuId:g.eH.StickyScrollContext,getAnchor:function(){return t}})}},{key:"_readConfiguration",value:function(){var e=this,t=this._editor.getOption(113);if(!1===t.enabled)return this._editor.removeOverlayWidget(this._stickyScrollWidget),this._sessionStore.clear(),void(this._enabled=!1);t.enabled&&!this._enabled&&(this._editor.addOverlayWidget(this._stickyScrollWidget),this._sessionStore.add(this._editor.onDidScrollChange((function(){return e._renderStickyScroll()}))),this._sessionStore.add(this._editor.onDidLayoutChange((function(){return e._onDidResize()}))),this._sessionStore.add(this._editor.onDidChangeModelTokens((function(t){return e._onTokensChange(t)}))),this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll((function(){return e._renderStickyScroll()}))),this._enabled=!0),2===this._editor.getOption(66).renderType&&this._sessionStore.add(this._editor.onDidChangeCursorPosition((function(){return e._renderStickyScroll()})))}},{key:"_needsUpdate",value:function(e){var t,i=this._stickyScrollWidget.getCurrentLines(),n=(0,v.Z)(i);try{for(n.s();!(t=n.n()).done;){var o,r=t.value,s=(0,v.Z)(e.ranges);try{for(s.s();!(o=s.n()).done;){var a=o.value;if(r>=a.fromLineNumber&&r<=a.toLineNumber)return!0}}catch(l){s.e(l)}finally{s.f()}}}catch(l){n.e(l)}finally{n.f()}return!1}},{key:"_onTokensChange",value:function(e){this._needsUpdate(e)&&this._renderStickyScroll()}},{key:"_onDidResize",value:function(){var e=this._editor.getLayoutInfo(),t=e.width-e.minimap.minimapCanvasOuterWidth-e.verticalScrollbarWidth;this._stickyScrollWidget.getDomNode().style.width="".concat(t,"px");var i=e.height/this._editor.getOption(65);this._maxStickyLines=Math.round(.25*i)}},{key:"_renderStickyScroll",value:function(){if(this._editor.hasModel()){var e=this._editor.getModel(),t=this._stickyLineCandidateProvider.getVersionId();if(void 0===t||t===e.getVersionId())if(this._widgetState=this.findScrollWidgetState(),this._stickyScrollVisibleContextKey.set(!(0===this._widgetState.lineNumbers.length)),this._focused)if(this._stickyElements=this._stickyScrollWidget.getDomNode().children,-1===this._focusedStickyElementIndex)this._stickyScrollWidget.setState(this._widgetState),this._focusedStickyElementIndex=this._stickyElements.length-1,-1!==this._focusedStickyElementIndex&&this._stickyElements.item(this._focusedStickyElementIndex).focus();else{var i=this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];if(this._stickyScrollWidget.setState(this._widgetState),0===this._stickyElements.length)this._focusedStickyElementIndex=-1;else this._stickyScrollWidget.lineNumbers.includes(i)||(this._focusedStickyElementIndex=this._stickyElements.length-1),this._stickyElements.item(this._focusedStickyElementIndex).focus()}else this._stickyScrollWidget.setState(this._widgetState)}}},{key:"findScrollWidgetState",value:function(){var e=this._editor.getOption(65),t=Math.min(this._maxStickyLines,this._editor.getOption(113).maxLineCount),i=this._editor.getScrollTop(),n=0,o=[],r=this._editor.getVisibleRanges();if(0!==r.length){var s,a=new U(r[0].startLineNumber,r[r.length-1].endLineNumber),l=this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(a),c=(0,v.Z)(l);try{for(c.s();!(s=c.n()).done;){var d=s.value,u=d.startLineNumber,h=d.endLineNumber,g=d.nestingDepth;if(h-u>0){var f=(g-1)*e,p=g*e,m=this._editor.getBottomForLineNumber(u)-i,_=this._editor.getTopForLineNumber(h)-i,y=this._editor.getBottomForLineNumber(h)-i;if(f>_&&f<=y){o.push(u),n=y-p;break}if(p>m&&p<=y&&o.push(u),o.length===t)break}}}catch(b){c.e(b)}finally{c.f()}}return new P(o,n)}},{key:"dispose",value:function(){(0,b.Z)((0,S.Z)(i.prototype),"dispose",this).call(this),this._sessionStore.dispose()}}],[{key:"get",value:function(e){return e.getContribution(i.ID)}}]),i}(k.JT);be.ID="store.contrib.stickyScrollController",be=ve([_e(1,ue.i),_e(2,w.p),_e(3,de.TG),_e(4,W.c_),_e(5,me.A),_e(6,p.i6)],be);var Se=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},ke=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,{id:"editor.action.toggleStickyScroll",title:{value:(0,u.NC)("toggleStickyScroll","Toggle Sticky Scroll"),mnemonicTitle:(0,u.NC)({key:"mitoggleStickyScroll",comment:["&& denotes a mnemonic"]},"&&Toggle Sticky Scroll"),original:"Toggle Sticky Scroll"},category:h.R.View,toggled:{condition:p.Ao.equals("config.editor.stickyScroll.enabled",!0),title:(0,u.NC)("stickyScroll","Sticky Scroll"),mnemonicTitle:(0,u.NC)({key:"miStickyScroll",comment:["&& denotes a mnemonic"]},"&&Sticky Scroll")},menu:[{id:g.eH.CommandPalette},{id:g.eH.MenubarViewMenu,group:"5_editor",order:2},{id:g.eH.StickyScrollContext}]})}return(0,l.Z)(i,[{key:"run",value:function(e){return Se(this,void 0,void 0,(0,s.Z)().mark((function t(){var i,n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.get(f.Ui),n=!i.getValue("editor.stickyScroll.enabled"),t.abrupt("return",i.updateValue("editor.stickyScroll.enabled",n));case 3:case"end":return t.stop()}}),t)})))}}]),i}(g.Ke),we=100,Ce=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,{id:"editor.action.focusStickyScroll",title:{value:(0,u.NC)("focusStickyScroll","Focus Sticky Scroll"),mnemonicTitle:(0,u.NC)({key:"mifocusStickyScroll",comment:["&& denotes a mnemonic"]},"&&Focus Sticky Scroll"),original:"Focus Sticky Scroll"},precondition:p.Ao.and(p.Ao.has("config.editor.stickyScroll.enabled"),m.u.stickyScrollVisible),menu:[{id:g.eH.CommandPalette}]})}return(0,l.Z)(i,[{key:"runEditorCommand",value:function(e,t){var i;null===(i=be.get(t))||void 0===i||i.focus()}}]),i}(r.x1),xe=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,{id:"editor.action.selectNextStickyScrollLine",title:{value:(0,u.NC)("selectNextStickyScrollLine.title","Select next sticky scroll line"),original:"Select next sticky scroll line"},precondition:m.u.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:we,primary:18}})}return(0,l.Z)(i,[{key:"runEditorCommand",value:function(e,t){var i;null===(i=be.get(t))||void 0===i||i.focusNext()}}]),i}(r.x1),De=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,{id:"editor.action.selectPreviousStickyScrollLine",title:{value:(0,u.NC)("selectPreviousStickyScrollLine.title","Select previous sticky scroll line"),original:"Select previous sticky scroll line"},precondition:m.u.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:we,primary:16}})}return(0,l.Z)(i,[{key:"runEditorCommand",value:function(e,t){var i;null===(i=be.get(t))||void 0===i||i.focusPrevious()}}]),i}(r.x1),Le=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,{id:"editor.action.goToFocusedStickyScrollLine",title:{value:(0,u.NC)("goToFocusedStickyScrollLine.title","Go to focused sticky scroll line"),original:"Go to focused sticky scroll line"},precondition:m.u.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:we,primary:3}})}return(0,l.Z)(i,[{key:"runEditorCommand",value:function(e,t){var i;null===(i=be.get(t))||void 0===i||i.goToFocused()}}]),i}(r.x1),Ie=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,{id:"editor.action.selectEditor",title:{value:(0,u.NC)("selectEditor.title","Select Editor"),original:"Select Editor"},precondition:m.u.stickyScrollFocused.isEqualTo(!0),keybinding:{weight:we,primary:9}})}return(0,l.Z)(i,[{key:"runEditorCommand",value:function(e,t){var i;null===(i=be.get(t))||void 0===i||i.selectEditor()}}]),i}(r.x1);(0,r._K)(be.ID,be,1),(0,g.r1)(ke),(0,g.r1)(Ce),(0,g.r1)(De),(0,g.r1)(xe),(0,g.r1)(Le),(0,g.r1)(Ie)},47799:function(e,t,i){i.d(t,{_:function(){return u},t:function(){return d}});var n=i(29439),o=i(37762),r=i(43144),s=i(15671),a=i(38102),l=i(21973),c=i(31906),d=(0,r.Z)((function e(t,i){(0,s.Z)(this,e),this.leadingLineContent=t,this.characterCountDelta=i})),u=function(){function e(t,i,n,o,r,a){var c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:l.mX.default,d=arguments.length>7&&void 0!==arguments[7]?arguments[7]:void 0;(0,s.Z)(this,e),this.clipboardText=d,this._snippetCompareFn=e._compareCompletionItems,this._items=t,this._column=i,this._wordDistance=o,this._options=r,this._refilterKind=1,this._lineContext=n,this._fuzzyScoreOptions=c,"top"===a?this._snippetCompareFn=e._compareCompletionItemsSnippetsUp:"bottom"===a&&(this._snippetCompareFn=e._compareCompletionItemsSnippetsDown)}return(0,r.Z)(e,[{key:"lineContext",get:function(){return this._lineContext},set:function(e){this._lineContext.leadingLineContent===e.leadingLineContent&&this._lineContext.characterCountDelta===e.characterCountDelta||(this._refilterKind=this._lineContext.characterCountDelta<e.characterCountDelta&&this._filteredItems?2:1,this._lineContext=e)}},{key:"items",get:function(){return this._ensureCachedState(),this._filteredItems}},{key:"getItemsByProvider",value:function(){return this._ensureCachedState(),this._itemsByProvider}},{key:"getIncompleteProvider",value:function(){this._ensureCachedState();var e,t=new Set,i=(0,o.Z)(this.getItemsByProvider());try{for(i.s();!(e=i.n()).done;){var r=(0,n.Z)(e.value,2),s=r[0],a=r[1];a.length>0&&a[0].container.incomplete&&t.add(s)}}catch(l){i.e(l)}finally{i.f()}return t}},{key:"stats",get:function(){return this._ensureCachedState(),this._stats}},{key:"_ensureCachedState",value:function(){0!==this._refilterKind&&this._createCachedState()}},{key:"_createCachedState",value:function(){this._itemsByProvider=new Map;for(var e=[],t=this._lineContext,i=t.leadingLineContent,n=t.characterCountDelta,o="",r="",s=1===this._refilterKind?this._items:this._filteredItems,d=[],u=!this._options.filterGraceful||s.length>2e3?l.EW:l.l7,h=0;h<s.length;h++){var g=s[h];if(!g.isInvalid){var f=this._itemsByProvider.get(g.provider);f?f.push(g):this._itemsByProvider.set(g.provider,[g]);var p=g.position.column-g.editStart.column,m=p+n-(g.position.column-this._column);if(o.length!==m&&(r=(o=0===m?"":i.slice(-m)).toLowerCase()),g.word=o,0===m)g.score=l.CL.Default;else{for(var v=0;v<p;){var _=o.charCodeAt(v);if(32!==_&&9!==_)break;v+=1}if(v>=m)g.score=l.CL.Default;else if("string"===typeof g.completion.filterText){var y=u(o,r,v,g.completion.filterText,g.filterTextLow,0,this._fuzzyScoreOptions);if(!y)continue;0===(0,c.zY)(g.completion.filterText,g.textLabel)?g.score=y:(g.score=(0,l.jB)(o,r,v,g.textLabel,g.labelLow,0),g.score[0]=y[0])}else{var b=u(o,r,v,g.textLabel,g.labelLow,0,this._fuzzyScoreOptions);if(!b)continue;g.score=b}}g.idx=h,g.distance=this._wordDistance.distance(g.position,g.completion),d.push(g),e.push(g.textLabel.length)}}this._filteredItems=d.sort(this._snippetCompareFn),this._refilterKind=0,this._stats={pLabelLen:e.length?(0,a.HW)(e.length-.85,e,(function(e,t){return e-t})):0}}}],[{key:"_compareCompletionItems",value:function(e,t){return e.score[0]>t.score[0]?-1:e.score[0]<t.score[0]?1:e.distance<t.distance?-1:e.distance>t.distance?1:e.idx<t.idx?-1:e.idx>t.idx?1:0}},{key:"_compareCompletionItemsSnippetsDown",value:function(t,i){if(t.completion.kind!==i.completion.kind){if(27===t.completion.kind)return 1;if(27===i.completion.kind)return-1}return e._compareCompletionItems(t,i)}},{key:"_compareCompletionItemsSnippetsUp",value:function(t,i){if(t.completion.kind!==i.completion.kind){if(27===t.completion.kind)return-1;if(27===i.completion.kind)return 1}return e._compareCompletionItems(t,i)}}]),e}()},51211:function(e,t,i){i.d(t,{A9:function(){return N},GI:function(){return L},ZJ:function(){return T},_y:function(){return D},i5:function(){return O},kL:function(){return P},tG:function(){return R}});var n,o=i(37762),r=i(74165),s=i(15671),a=i(43144),l=i(7388),c=i(74146),d=i(21973),u=i(65096),h=i(48497),g=i(63021),f=i(38821),p=i(65631),m=i(17429),v=i(7787),_=i(88324),y=i(18420),b=i(14443),S=i(99740),k=i(8022),w=i(65441),C=i(46689),x=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},D={Visible:C.iX,HasFocusedSuggestion:new k.uy("suggestWidgetHasFocusedSuggestion",!1,(0,y.NC)("suggestWidgetHasSelection","Whether any suggestion is focused")),DetailsVisible:new k.uy("suggestWidgetDetailsVisible",!1,(0,y.NC)("suggestWidgetDetailsVisible","Whether suggestion details are visible")),MultipleSuggestions:new k.uy("suggestWidgetMultipleSuggestions",!1,(0,y.NC)("suggestWidgetMultipleSuggestions","Whether there are multiple suggestions to pick from")),MakesTextEdit:new k.uy("suggestionMakesTextEdit",!0,(0,y.NC)("suggestionMakesTextEdit","Whether inserting the current suggestion yields in a change or has everything already been typed")),AcceptSuggestionsOnEnter:new k.uy("acceptSuggestionOnEnter",!0,(0,y.NC)("acceptSuggestionOnEnter","Whether suggestions are inserted when pressing Enter")),HasInsertAndReplaceRange:new k.uy("suggestionHasInsertAndReplaceRange",!1,(0,y.NC)("suggestionHasInsertAndReplaceRange","Whether the current suggestion has insert and replace behaviour")),InsertMode:new k.uy("suggestionInsertMode",void 0,{type:"string",description:(0,y.NC)("suggestionInsertMode","Whether the default behaviour is to insert or replace")}),CanResolve:new k.uy("suggestionCanResolve",!1,(0,y.NC)("suggestionCanResolve","Whether the current suggestion supports to resolve further details"))},L=new b.eH("suggestWidgetStatusBar"),I=function(){function e(t,i,n,o){var r;(0,s.Z)(this,e),this.position=t,this.completion=i,this.container=n,this.provider=o,this.isInvalid=!1,this.score=d.CL.Default,this.distance=0,this.textLabel="string"===typeof i.label?i.label:null===(r=i.label)||void 0===r?void 0:r.label,this.labelLow=this.textLabel.toLowerCase(),this.isInvalid=!this.textLabel,this.sortTextLow=i.sortText&&i.sortText.toLowerCase(),this.filterTextLow=i.filterText&&i.filterText.toLowerCase(),this.extensionId=i.extensionId,m.e.isIRange(i.range)?(this.editStart=new p.L(i.range.startLineNumber,i.range.startColumn),this.editInsertEnd=new p.L(i.range.endLineNumber,i.range.endColumn),this.editReplaceEnd=new p.L(i.range.endLineNumber,i.range.endColumn),this.isInvalid=this.isInvalid||m.e.spansMultipleLines(i.range)||i.range.startLineNumber!==t.lineNumber):(this.editStart=new p.L(i.range.insert.startLineNumber,i.range.insert.startColumn),this.editInsertEnd=new p.L(i.range.insert.endLineNumber,i.range.insert.endColumn),this.editReplaceEnd=new p.L(i.range.replace.endLineNumber,i.range.replace.endColumn),this.isInvalid=this.isInvalid||m.e.spansMultipleLines(i.range.insert)||m.e.spansMultipleLines(i.range.replace)||i.range.insert.startLineNumber!==t.lineNumber||i.range.replace.startLineNumber!==t.lineNumber||i.range.insert.startColumn!==i.range.replace.startColumn),"function"!==typeof o.resolveCompletionItem&&(this._resolveCache=Promise.resolve(),this._resolveDuration=0)}return(0,a.Z)(e,[{key:"isResolved",get:function(){return void 0!==this._resolveDuration}},{key:"resolveDuration",get:function(){return void 0!==this._resolveDuration?this._resolveDuration:-1}},{key:"resolve",value:function(e){return x(this,void 0,void 0,(0,r.Z)().mark((function t(){var i,n,o=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this._resolveCache||(i=e.onCancellationRequested((function(){o._resolveCache=void 0,o._resolveDuration=void 0})),n=new h.G(!0),this._resolveCache=Promise.resolve(this.provider.resolveCompletionItem(this.completion,e)).then((function(e){Object.assign(o.completion,e),o._resolveDuration=n.elapsed(),i.dispose()}),(function(e){(0,c.n2)(e)&&(o._resolveCache=void 0,o._resolveDuration=void 0)}))),t.abrupt("return",this._resolveCache);case 2:case"end":return t.stop()}}),t,this)})))}}]),e}(),N=(0,a.Z)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:2,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Set,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Set,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];(0,s.Z)(this,e),this.snippetSortOrder=t,this.kindFilter=i,this.providerFilter=n,this.providerItemsToReuse=o,this.showDeprecated=r}));function T(){return n}N.default=new N;var Z=(0,a.Z)((function e(t,i,n,o){(0,s.Z)(this,e),this.items=t,this.needsClipboard=i,this.durations=n,this.disposable=o}));function P(e,t,i){var s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:N.default,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{triggerKind:0},d=arguments.length>5&&void 0!==arguments[5]?arguments[5]:l.T.None;return x(this,void 0,void 0,(0,r.Z)().mark((function l(){var g,f,p,v,y,b,S,k,w,C,D,L,N,T=this;return(0,r.Z)().wrap((function(l){for(;;)switch(l.prev=l.next){case 0:g=new h.G,i=i.clone(),f=t.getWordAtPosition(i),p=f?new m.e(i.lineNumber,f.startColumn,i.lineNumber,f.endColumn):m.e.fromPositions(i),v={replace:p,insert:p.setEndPosition(i.lineNumber,i.column)},y=[],b=new u.SL,S=[],k=!1,w=function(e,t,n){var r,a,l,c=!1;if(!t)return c;var d,h=(0,o.Z)(t.suggestions);try{for(h.s();!(d=h.n()).done;){var g=d.value;if(!s.kindFilter.has(g.kind)){if(!s.showDeprecated&&(null===(r=null===g||void 0===g?void 0:g.tags)||void 0===r?void 0:r.includes(1)))continue;g.range||(g.range=v),g.sortText||(g.sortText="string"===typeof g.label?g.label:g.label.label),!k&&g.insertTextRules&&4&g.insertTextRules&&(k=_.Yj.guessNeedsClipboard(g.insertText)),y.push(new I(i,g,t,e)),c=!0}}}catch(f){h.e(f)}finally{h.f()}return(0,u.Wf)(t)&&b.add(t),S.push({providerName:null!==(a=e._debugDisplayName)&&void 0!==a?a:"unknown_provider",elapsedProvider:null!==(l=t.duration)&&void 0!==l?l:-1,elapsedOverall:n.elapsed()}),c},C=x(T,void 0,void 0,(0,r.Z)().mark((function e(){var o,l,c;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&!s.kindFilter.has(27)){e.next=2;break}return e.abrupt("return");case 2:if(!(o=s.providerItemsToReuse.get(n))){e.next=6;break}return o.forEach((function(e){return y.push(e)})),e.abrupt("return");case 6:if(!(s.providerFilter.size>0)||s.providerFilter.has(n)){e.next=8;break}return e.abrupt("return");case 8:return l=new h.G,e.next=11,n.provideCompletionItems(t,i,a,d);case 11:c=e.sent,w(n,c,l);case 13:case"end":return e.stop()}}),e)}))),D=(0,o.Z)(e.orderedGroups(t)),l.prev=12,N=(0,r.Z)().mark((function e(){var n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=L.value,o=!1,e.next=4,Promise.all(n.map((function(e){return x(T,void 0,void 0,(0,r.Z)().mark((function n(){var l,u,g;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!s.providerItemsToReuse.has(e)){n.next=5;break}return(l=s.providerItemsToReuse.get(e)).forEach((function(e){return y.push(e)})),o=o||l.length>0,n.abrupt("return");case 5:if(!(s.providerFilter.size>0)||s.providerFilter.has(e)){n.next=7;break}return n.abrupt("return");case 7:return n.prev=7,u=new h.G,n.next=11,e.provideCompletionItems(t,i,a,d);case 11:g=n.sent,o=w(e,g,u)||o,n.next=18;break;case 15:n.prev=15,n.t0=n.catch(7),(0,c.Cp)(n.t0);case 18:case"end":return n.stop()}}),n,null,[[7,15]])})))})));case 4:if(!o&&!d.isCancellationRequested){e.next=6;break}return e.abrupt("return",1);case 6:case"end":return e.stop()}}),e)})),D.s();case 15:if((L=D.n()).done){l.next=21;break}return l.delegateYield(N(),"t0",17);case 17:if(!l.t0){l.next=19;break}return l.abrupt("break",21);case 19:l.next=15;break;case 21:l.next=26;break;case 23:l.prev=23,l.t1=l.catch(12),D.e(l.t1);case 26:return l.prev=26,D.f(),l.finish(26);case 29:return l.next=31,C;case 31:if(!d.isCancellationRequested){l.next=34;break}return b.dispose(),l.abrupt("return",Promise.reject(new c.FU));case 34:return l.abrupt("return",new Z(y.sort((P=s.snippetSortOrder,F.get(P))),k,{entries:S,elapsed:g.elapsed()},b));case 35:case"end":return l.stop()}var P}),l,null,[[12,23,26,29]])})))}function M(e,t){if(e.sortTextLow&&t.sortTextLow){if(e.sortTextLow<t.sortTextLow)return-1;if(e.sortTextLow>t.sortTextLow)return 1}return e.textLabel<t.textLabel?-1:e.textLabel>t.textLabel?1:e.completion.kind-t.completion.kind}var F=new Map;function O(e,t){var i;null===(i=e.getContribution("editor.contrib.suggestController"))||void 0===i||i.triggerSuggest((new Set).add(t),void 0,!0)}F.set(0,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return-1;if(27===t.completion.kind)return 1}return M(e,t)})),F.set(2,(function(e,t){if(e.completion.kind!==t.completion.kind){if(27===e.completion.kind)return 1;if(27===t.completion.kind)return-1}return M(e,t)})),F.set(1,M),S.P.registerCommand("_executeCompletionItemProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),n=1;n<t;n++)i[n-1]=arguments[n];return x(void 0,void 0,void 0,(0,r.Z)().mark((function t(){var n,s,a,c,d,u,h,m,_,y,b,S,k,C;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=i[0],s=i[1],a=i[2],c=i[3],(0,g.p_)(f.o.isUri(n)),(0,g.p_)(p.L.isIPosition(s)),(0,g.p_)("string"===typeof a||!a),(0,g.p_)("number"===typeof c||!c),d=e.get(w.p),u=d.completionProvider,t.next=8,e.get(v.S).createModelReference(n);case 8:return h=t.sent,t.prev=9,m={incomplete:!1,suggestions:[]},_=[],y=h.object.textEditorModel.validatePosition(s),t.next=15,P(u,h.object.textEditorModel,y,void 0,{triggerCharacter:null!==a&&void 0!==a?a:void 0,triggerKind:a?1:0});case 15:b=t.sent,S=(0,o.Z)(b.items);try{for(S.s();!(k=S.n()).done;)C=k.value,_.length<(null!==c&&void 0!==c?c:0)&&_.push(C.resolve(l.T.None)),m.incomplete=m.incomplete||C.container.incomplete,m.suggestions.push(C.completion)}catch(r){S.e(r)}finally{S.f()}return t.prev=18,t.next=21,Promise.all(_);case 21:return t.abrupt("return",m);case 22:return t.prev=22,setTimeout((function(){return b.disposable.dispose()}),100),t.finish(22);case 25:return t.prev=25,h.dispose(),t.finish(25);case 28:case"end":return t.stop()}}),t,null,[[9,,25,28],[18,,22,25]])})))}));var R=function(){function e(){(0,s.Z)(this,e)}return(0,a.Z)(e,null,[{key:"isAllOff",value:function(e){return"off"===e.other&&"off"===e.comments&&"off"===e.strings}},{key:"isAllOn",value:function(e){return"on"===e.other&&"on"===e.comments&&"on"===e.strings}},{key:"valueFor",value:function(e,t){switch(t){case 1:return e.comments;case 2:return e.strings;default:return e.other}}}]),e}()},18143:function(e,t,i){i.r(t),i.d(t,{SuggestController:function(){return ht},TriggerSuggestAction:function(){return ft}});var n=i(60136),o=i(27277),r=i(93433),s=i(37762),a=i(15671),l=i(43144),c=i(61841),d=i(38102),u=i(71049),h=i(7388),g=i(74146),f=i(13880),p=i(63908),m=i(65096),v=i(90650),_=i(48497),y=i(63021),b=i(49039),S=i(95253),k=i(62557),w=i(65631),C=i(17429),x=i(98926),D=i(55261),L=i(88324),I=i(11522),N=i(8022),T=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Z=function(e,t){return function(i,n){t(i,n,e)}},P=function(){function e(t,i){var n=this;(0,a.Z)(this,e),this._editor=t,this._enabled=!1,this._ckAtEnd=e.AtEnd.bindTo(i),this._configListener=this._editor.onDidChangeConfiguration((function(e){return e.hasChanged(121)&&n._update()})),this._update()}return(0,l.Z)(e,[{key:"dispose",value:function(){var e;this._configListener.dispose(),null===(e=this._selectionListener)||void 0===e||e.dispose(),this._ckAtEnd.reset()}},{key:"_update",value:function(){var e=this,t="on"===this._editor.getOption(121);if(this._enabled!==t)if(this._enabled=t,this._enabled){var i=function(){if(e._editor.hasModel()){var t=e._editor.getModel(),i=e._editor.getSelection(),n=t.getWordAtPosition(i.getStartPosition());n?e._ckAtEnd.set(n.endColumn===i.getStartPosition().column):e._ckAtEnd.set(!1)}else e._ckAtEnd.set(!1)};this._selectionListener=this._editor.onDidChangeCursorSelection(i),i()}else this._selectionListener&&(this._ckAtEnd.reset(),this._selectionListener.dispose(),this._selectionListener=void 0)}}]),e}();P.AtEnd=new N.uy("atEndOfWord",!1),P=T([Z(1,N.i6)],P);var M=i(18420),F=i(99740),O=i(64606),R=i(1018),A=i(51211),E=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},z=function(e,t){return function(i,n){t(i,n,e)}},W=function(){function e(t,i){(0,a.Z)(this,e),this._editor=t,this._index=0,this._ckOtherSuggestions=e.OtherSuggestions.bindTo(i)}return(0,l.Z)(e,[{key:"dispose",value:function(){this.reset()}},{key:"reset",value:function(){var e;this._ckOtherSuggestions.reset(),null===(e=this._listener)||void 0===e||e.dispose(),this._model=void 0,this._acceptNext=void 0,this._ignore=!1}},{key:"set",value:function(t,i){var n=this,o=t.model,r=t.index;0!==o.items.length?e._moveIndex(!0,o,r)!==r?(this._acceptNext=i,this._model=o,this._index=r,this._listener=this._editor.onDidChangeCursorPosition((function(){n._ignore||n.reset()})),this._ckOtherSuggestions.set(!0)):this.reset():this.reset()}},{key:"next",value:function(){this._move(!0)}},{key:"prev",value:function(){this._move(!1)}},{key:"_move",value:function(t){if(this._model)try{this._ignore=!0,this._index=e._moveIndex(t,this._model,this._index),this._acceptNext({index:this._index,item:this._model.items[this._index],model:this._model})}finally{this._ignore=!1}}}],[{key:"_moveIndex",value:function(e,t,i){for(var n=i,o=t.items.length;o>0&&(n=(n+t.items.length+(e?1:-1))%t.items.length)!==i&&t.items[n].completion.additionalTextEdits;o--);return n}}]),e}();W.OtherSuggestions=new N.uy("hasOtherSuggestions",!1),W=E([z(1,N.i6)],W);var H=i(65239),V=function(){function e(t,i,n,o){var r=this;(0,a.Z)(this,e),this._disposables=new m.SL,this._disposables.add(n.onDidSuggest((function(e){0===e.completionModel.items.length&&r.reset()}))),this._disposables.add(n.onDidCancel((function(e){r.reset()}))),this._disposables.add(i.onDidShow((function(){return r._onItem(i.getFocusedItem())}))),this._disposables.add(i.onDidFocus(this._onItem,this)),this._disposables.add(i.onDidHide(this.reset,this)),this._disposables.add(t.onWillType((function(e){if(r._active&&!i.isFrozen()&&0!==n.state){var s=e.charCodeAt(e.length-1);r._active.acceptCharacters.has(s)&&t.getOption(0)&&o(r._active.item)}})))}return(0,l.Z)(e,[{key:"_onItem",value:function(e){if(e&&(0,d.Of)(e.item.completion.commitCharacters)){if(!this._active||this._active.item.item!==e.item){var t,i=new H.q,n=(0,s.Z)(e.item.completion.commitCharacters);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.length>0&&i.add(o.charCodeAt(0))}}catch(r){n.e(r)}finally{n.f()}this._active={acceptCharacters:i,item:e}}}else this.reset()}},{key:"reset",value:function(){this._active=void 0}},{key:"dispose",value:function(){this._disposables.dispose()}}]),e}(),B=i(74165),G=i(29439),K=i(31906),U=i(96601),j=i(88697),q=i(53459),$=i(76344),Q=i(77819),J=i(45536),X=i(47799),Y=i(65441),ee=i(21973),te=i(2736),ie=i(31198),ne=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},oe=function(e,t){return function(i,n){t(i,n,e)}},re=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},se=function(){function e(t,i,n){(0,a.Z)(this,e),this.leadingLineContent=t.getLineContent(i.lineNumber).substr(0,i.column-1),this.leadingWord=t.getWordUntilPosition(i),this.lineNumber=i.lineNumber,this.column=i.column,this.triggerOptions=n}return(0,l.Z)(e,null,[{key:"shouldAutoTrigger",value:function(e){if(!e.hasModel())return!1;var t=e.getModel(),i=e.getPosition();t.tokenization.tokenizeIfCheap(i.lineNumber);var n=t.getWordAtPosition(i);return!!n&&((n.endColumn===i.column||n.startColumn+1===i.column)&&!!isNaN(Number(n.word)))}}]),e}();var ae=function(){function e(t,i,n,o,r,s,l,c,d){var h=this;(0,a.Z)(this,e),this._editor=t,this._editorWorkerService=i,this._clipboardService=n,this._telemetryService=o,this._logService=r,this._contextKeyService=s,this._configurationService=l,this._languageFeaturesService=c,this._envService=d,this._toDispose=new m.SL,this._triggerCharacterListener=new m.SL,this._triggerQuickSuggest=new u._F,this._triggerState=void 0,this._completionDisposables=new m.SL,this._onDidCancel=new f.Q5,this._onDidTrigger=new f.Q5,this._onDidSuggest=new f.Q5,this.onDidCancel=this._onDidCancel.event,this.onDidTrigger=this._onDidTrigger.event,this.onDidSuggest=this._onDidSuggest.event,this._telemetryGate=0,this._currentSelection=this._editor.getSelection()||new U.Y(1,1,1,1),this._toDispose.add(this._editor.onDidChangeModel((function(){h._updateTriggerCharacters(),h.cancel()}))),this._toDispose.add(this._editor.onDidChangeModelLanguage((function(){h._updateTriggerCharacters(),h.cancel()}))),this._toDispose.add(this._editor.onDidChangeConfiguration((function(){h._updateTriggerCharacters()}))),this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange((function(){h._updateTriggerCharacters(),h._updateActiveSuggestSession()})));var g=!1;this._toDispose.add(this._editor.onDidCompositionStart((function(){g=!0}))),this._toDispose.add(this._editor.onDidCompositionEnd((function(){g=!1,h._onCompositionEnd()}))),this._toDispose.add(this._editor.onDidChangeCursorSelection((function(e){g||h._onCursorChange(e)}))),this._toDispose.add(this._editor.onDidChangeModelContent((function(){g||void 0===h._triggerState||h._refilterCompletionItems()}))),this._updateTriggerCharacters()}return(0,l.Z)(e,[{key:"dispose",value:function(){(0,m.B9)(this._triggerCharacterListener),(0,m.B9)([this._onDidCancel,this._onDidSuggest,this._onDidTrigger,this._triggerQuickSuggest]),this._toDispose.dispose(),this._completionDisposables.dispose(),this.cancel()}},{key:"_updateTriggerCharacters",value:function(){var e=this;if(this._triggerCharacterListener.clear(),!this._editor.getOption(89)&&this._editor.hasModel()&&this._editor.getOption(119)){var t,i=new Map,n=(0,s.Z)(this._languageFeaturesService.completionProvider.all(this._editor.getModel()));try{for(n.s();!(t=n.n()).done;){var o,r=t.value,a=(0,s.Z)(r.triggerCharacters||[]);try{for(a.s();!(o=a.n()).done;){var l=o.value,c=i.get(l);c||((c=new Set).add((0,A.ZJ)()),i.set(l,c)),c.add(r)}}catch(u){a.e(u)}finally{a.f()}}}catch(u){n.e(u)}finally{n.f()}var d=function(t){var n;if(function(e,t,i){if(!Boolean(t.getContextKeyValue("inlineSuggestionVisible")))return!0;var n=t.getContextKeyValue(te.f.suppressSuggestions.key);return void 0!==n?!n:!e.getOption(61).suppressSuggestions}(e._editor,e._contextKeyService,e._configurationService)&&!se.shouldAutoTrigger(e._editor)){if(!t){var o=e._editor.getPosition();t=e._editor.getModel().getLineContent(o.lineNumber).substr(0,o.column-1)}var r="";(0,K.YK)(t.charCodeAt(t.length-1))?(0,K.ZG)(t.charCodeAt(t.length-2))&&(r=t.substr(t.length-2)):r=t.charAt(t.length-1);var a=i.get(r);if(a){var l=new Map;if(e._completionModel){var c,d=(0,s.Z)(e._completionModel.getItemsByProvider());try{for(d.s();!(c=d.n()).done;){var h=(0,G.Z)(c.value,2),g=h[0],f=h[1];a.has(g)||l.set(g,f)}}catch(u){d.e(u)}finally{d.f()}}e.trigger({auto:!0,triggerKind:1,triggerCharacter:r,retrigger:Boolean(e._completionModel),clipboardText:null===(n=e._completionModel)||void 0===n?void 0:n.clipboardText,completionOptions:{providerFilter:a,providerItemsToReuse:l}})}}};this._triggerCharacterListener.add(this._editor.onDidType(d)),this._triggerCharacterListener.add(this._editor.onDidCompositionEnd((function(){return d()})))}}},{key:"state",get:function(){return this._triggerState?this._triggerState.auto?2:1:0}},{key:"cancel",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];void 0!==this._triggerState&&(this._triggerQuickSuggest.cancel(),null===(e=this._requestToken)||void 0===e||e.cancel(),this._requestToken=void 0,this._triggerState=void 0,this._completionModel=void 0,this._context=void 0,this._onDidCancel.fire({retrigger:t}))}},{key:"clear",value:function(){this._completionDisposables.clear()}},{key:"_updateActiveSuggestSession",value:function(){void 0!==this._triggerState&&(this._editor.hasModel()&&this._languageFeaturesService.completionProvider.has(this._editor.getModel())?this.trigger({auto:this._triggerState.auto,retrigger:!0}):this.cancel())}},{key:"_onCursorChange",value:function(e){if(this._editor.hasModel()){var t=this._currentSelection;this._currentSelection=this._editor.getSelection(),!e.selection.isEmpty()||0!==e.reason&&3!==e.reason||"keyboard"!==e.source&&"deleteLeft"!==e.source?this.cancel():void 0===this._triggerState&&0===e.reason?(t.containsRange(this._currentSelection)||t.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition()))&&this._doTriggerQuickSuggest():void 0!==this._triggerState&&3===e.reason&&this._refilterCompletionItems()}}},{key:"_onCompositionEnd",value:function(){void 0===this._triggerState?this._doTriggerQuickSuggest():this._refilterCompletionItems()}},{key:"_doTriggerQuickSuggest",value:function(){var e,t=this;A.tG.isAllOff(this._editor.getOption(87))||this._editor.getOption(116).snippetsPreventQuickSuggestions&&(null===(e=D.SnippetController2.get(this._editor))||void 0===e?void 0:e.isInSnippet())||(this.cancel(),this._triggerQuickSuggest.cancelAndSet((function(){if(void 0===t._triggerState&&se.shouldAutoTrigger(t._editor)&&t._editor.hasModel()&&t._editor.hasWidgetFocus()){var e=t._editor.getModel(),i=t._editor.getPosition(),n=t._editor.getOption(87);if(!A.tG.isAllOff(n)){if(!A.tG.isAllOn(n)){e.tokenization.tokenizeIfCheap(i.lineNumber);var o=e.tokenization.getLineTokens(i.lineNumber),r=o.getStandardTokenType(o.findTokenIndexAtOffset(Math.max(i.column-1-1,0)));if("on"!==A.tG.valueFor(n,r))return}(function(e,t,i){if(!Boolean(t.getContextKeyValue(te.f.inlineSuggestionVisible.key)))return!0;var n=t.getContextKeyValue(te.f.suppressSuggestions.key);return void 0!==n?!n:!e.getOption(61).suppressSuggestions})(t._editor,t._contextKeyService,t._configurationService)&&t._languageFeaturesService.completionProvider.has(e)&&t.trigger({auto:!0})}}}),this._editor.getOption(88)))}},{key:"_refilterCompletionItems",value:function(){(0,y.p_)(this._editor.hasModel()),(0,y.p_)(void 0!==this._triggerState);var e=this._editor.getModel(),t=this._editor.getPosition(),i=new se(e,t,Object.assign(Object.assign({},this._triggerState),{refilter:!0}));this._onNewContext(i)}},{key:"trigger",value:function(t){var i,n,o,r,a,l,c=this;if(this._editor.hasModel()){var d=this._editor.getModel(),u=new se(d,this._editor.getPosition(),t);this.cancel(t.retrigger),this._triggerState=t,this._onDidTrigger.fire({auto:t.auto,shy:null!==(i=t.shy)&&void 0!==i&&i,position:this._editor.getPosition()}),this._context=u;var f={triggerKind:null!==(n=t.triggerKind)&&void 0!==n?n:0};t.triggerCharacter&&(f={triggerKind:1,triggerCharacter:t.triggerCharacter}),this._requestToken=new h.A;var p=1;switch(this._editor.getOption(110)){case"top":p=0;break;case"bottom":p=2}var m=e._createSuggestFilter(this._editor),v=m.itemKind,_=m.showDeprecated,y=new A.A9(p,null!==(r=null===(o=t.completionOptions)||void 0===o?void 0:o.kindFilter)&&void 0!==r?r:v,null===(a=t.completionOptions)||void 0===a?void 0:a.providerFilter,null===(l=t.completionOptions)||void 0===l?void 0:l.providerItemsToReuse,_),b=q.K.create(this._editorWorkerService,this._editor),S=(0,A.kL)(this._languageFeaturesService.completionProvider,d,this._editor.getPosition(),y,f,this._requestToken.token);Promise.all([S,b]).then((function(e){var i=(0,G.Z)(e,2),n=i[0],o=i[1];return re(c,void 0,void 0,(0,B.Z)().mark((function e(){var i,r,a,l,c,d,u,h;return(0,B.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(i=this._requestToken)||void 0===i||i.dispose(),this._editor.hasModel()){e.next=3;break}return e.abrupt("return");case 3:if((r=null===t||void 0===t?void 0:t.clipboardText)||!n.needsClipboard){e.next=8;break}return e.next=7,this._clipboardService.readText();case 7:r=e.sent;case 8:if(void 0!==this._triggerState){e.next=10;break}return e.abrupt("return");case 10:if(a=this._editor.getModel(),l=new se(a,this._editor.getPosition(),t),c=Object.assign(Object.assign({},ee.mX.default),{firstMatchCanBeWeak:!this._editor.getOption(116).matchOnWordStartOnly}),this._completionModel=new X._(n.items,this._context.column,{leadingLineContent:l.leadingLineContent,characterCountDelta:l.column-this._context.column},o,this._editor.getOption(116),this._editor.getOption(110),c,r),this._completionDisposables.add(n.disposable),this._onNewContext(l),this._reportDurationsTelemetry(n.durations),!this._envService.isBuilt||this._envService.isExtensionDevelopment){d=(0,s.Z)(n.items);try{for(d.s();!(u=d.n()).done;)(h=u.value).isInvalid&&this._logService.warn("[suggest] did IGNORE invalid completion item from ".concat(h.provider._debugDisplayName),h.completion)}catch(g){d.e(g)}finally{d.f()}}case 18:case"end":return e.stop()}}),e,this)})))})).catch(g.dL)}}},{key:"_reportDurationsTelemetry",value:function(e){var t=this;this._telemetryGate++%230===0&&setTimeout((function(){t._telemetryService.publicLog2("suggest.durations.json",{data:JSON.stringify(e)}),t._logService.debug("suggest.durations.json",e)}))}},{key:"_onNewContext",value:function(e){if(this._context)if(e.lineNumber===this._context.lineNumber)if((0,K.V8)(e.leadingLineContent)===(0,K.V8)(this._context.leadingLineContent)){if(e.column<this._context.column)e.leadingWord.word?this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0}):this.cancel();else if(this._completionModel)if(0!==e.leadingWord.word.length&&e.leadingWord.startColumn>this._context.leadingWord.startColumn){if(se.shouldAutoTrigger(this._editor)&&this._context){var t=this._completionModel.getItemsByProvider();this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerItemsToReuse:t}})}}else if(e.column>this._context.column&&this._completionModel.getIncompleteProvider().size>0&&0!==e.leadingWord.word.length){var i,n=new Map,o=new Set,r=(0,s.Z)(this._completionModel.getItemsByProvider());try{for(r.s();!(i=r.n()).done;){var a=(0,G.Z)(i.value,2),l=a[0],c=a[1];c.length>0&&c[0].container.incomplete?o.add(l):n.set(l,c)}}catch(g){r.e(g)}finally{r.f()}this.trigger({auto:this._context.triggerOptions.auto,triggerKind:2,retrigger:!0,clipboardText:this._completionModel.clipboardText,completionOptions:{providerFilter:o,providerItemsToReuse:n}})}else{var d=this._completionModel.lineContext,u=!1;if(this._completionModel.lineContext={leadingLineContent:e.leadingLineContent,characterCountDelta:e.column-this._context.column},0===this._completionModel.items.length){var h=se.shouldAutoTrigger(this._editor);if(!this._context)return void this.cancel();if(h&&this._context.leadingWord.endColumn<e.leadingWord.startColumn)return void this.trigger({auto:this._context.triggerOptions.auto,retrigger:!0});if(this._context.triggerOptions.auto)return void this.cancel();if(this._completionModel.lineContext=d,(u=this._completionModel.items.length>0)&&0===e.leadingWord.word.length)return void this.cancel()}this._onDidSuggest.fire({completionModel:this._completionModel,triggerOptions:e.triggerOptions,isFrozen:u})}}else this.cancel();else this.cancel()}}],[{key:"_createSuggestFilter",value:function(e){var t=new Set;"none"===e.getOption(110)&&t.add(27);var i=e.getOption(116);return i.showMethods||t.add(0),i.showFunctions||t.add(1),i.showConstructors||t.add(2),i.showFields||t.add(3),i.showVariables||t.add(4),i.showClasses||t.add(5),i.showStructs||t.add(6),i.showInterfaces||t.add(7),i.showModules||t.add(8),i.showProperties||t.add(9),i.showEvents||t.add(10),i.showOperators||t.add(11),i.showUnits||t.add(12),i.showValues||t.add(13),i.showConstants||t.add(14),i.showEnums||t.add(15),i.showEnumMembers||t.add(16),i.showKeywords||t.add(17),i.showWords||t.add(18),i.showColors||t.add(19),i.showFiles||t.add(20),i.showReferences||t.add(21),i.showColors||t.add(22),i.showFolders||t.add(23),i.showTypeParameters||t.add(24),i.showSnippets||t.add(27),i.showUsers||t.add(25),i.showIssues||t.add(26),{itemKind:t,showDeprecated:i.showDeprecated}}}]),e}();ae=ne([oe(1,j.p),oe(2,$.p),oe(3,J.b),oe(4,R.VZ),oe(5,N.i6),oe(6,Q.Ui),oe(7,Y.p),oe(8,ie.Y)],ae);var le=function(){function e(t,i){var n=this;(0,a.Z)(this,e),this._disposables=new m.SL,this._lastOvertyped=[],this._locked=!1,this._disposables.add(t.onWillType((function(){if(!n._locked&&t.hasModel()){for(var i=t.getSelections(),o=i.length,r=!1,s=0;s<o;s++)if(!i[s].isEmpty()){r=!0;break}if(r){n._lastOvertyped=[];for(var a=t.getModel(),l=0;l<o;l++){var c=i[l];if(a.getValueLengthInRange(c)>e._maxSelectionLength)return;n._lastOvertyped[l]={value:a.getValueInRange(c),multiline:c.startLineNumber!==c.endLineNumber}}}else 0!==n._lastOvertyped.length&&(n._lastOvertyped.length=0)}}))),this._disposables.add(i.onDidTrigger((function(e){n._locked=!0}))),this._disposables.add(i.onDidCancel((function(e){n._locked=!1})))}return(0,l.Z)(e,[{key:"getLastOvertypedInfo",value:function(e){if(e>=0&&e<this._lastOvertyped.length)return this._lastOvertyped[e]}},{key:"dispose",value:function(){this._disposables.dispose()}}]),e}();le._maxSelectionLength=51200;var ce=i(32959),de=(i(62954),i(95587)),ue=i(61347),he=i(4391),ge=i(11752),fe=i(61120),pe=i(65171),me=i(68270),ve=i(14443),_e=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},ye=function(e,t){return function(i,n){t(i,n,e)}},be=function(e){(0,n.Z)(i,e);var t=(0,o.Z)(i);function i(){return(0,a.Z)(this,i),t.apply(this,arguments)}return(0,l.Z)(i,[{key:"updateLabel",value:function(){var e=this._keybindingService.lookupKeybinding(this._action.id,this._contextKeyService);if(!e)return(0,ge.Z)((0,fe.Z)(i.prototype),"updateLabel",this).call(this);this.label&&(this.label.textContent=(0,M.NC)({key:"content",comment:["A label","A keybinding"]},"{0} ({1})",this._action.label,i.symbolPrintEnter(e)))}}],[{key:"symbolPrintEnter",value:function(e){var t;return null===(t=e.getLabel())||void 0===t?void 0:t.replace(/\benter\b/gi,"\u23ce")}}]),i}(me.Mm),Se=function(){function e(t,i,n,o,r){(0,a.Z)(this,e),this._menuId=i,this._menuService=o,this._contextKeyService=r,this._menuDisposables=new m.SL,this.element=ce.append(t,ce.$(".suggest-status-bar"));var s=function(e){return e instanceof ve.U8?n.createInstance(be,e,void 0):void 0};this._leftActions=new pe.o(this.element,{actionViewItemProvider:s}),this._rightActions=new pe.o(this.element,{actionViewItemProvider:s}),this._leftActions.domNode.classList.add("left"),this._rightActions.domNode.classList.add("right")}return(0,l.Z)(e,[{key:"dispose",value:function(){this._menuDisposables.dispose(),this.element.remove()}},{key:"show",value:function(){var e=this,t=this._menuService.createMenu(this._menuId,this._contextKeyService);this._menuDisposables.add(t.onDidChange((function(){return function(){var i,n=[],o=[],a=(0,s.Z)(t.getActions());try{for(a.s();!(i=a.n()).done;){var l=(0,G.Z)(i.value,2),c=l[0],d=l[1];"left"===c?n.push.apply(n,(0,r.Z)(d)):o.push.apply(o,(0,r.Z)(d))}}catch(u){a.e(u)}finally{a.f()}e._leftActions.clear(),e._leftActions.push(n),e._rightActions.clear(),e._rightActions.push(o)}()}))),this._menuDisposables.add(t)}},{key:"hide",value:function(){this._menuDisposables.clear()}}]),e}();Se=_e([ye(2,O.TG),ye(3,ve.co),ye(4,N.i6)],Se);i(63220);var ke=i(88463),we=i(43980),Ce=i(39707),xe=i(41335),De=i(92763),Le=i(84337),Ie=i(77409),Ne=i(79730),Te=i(71047),Ze=i(38425),Pe=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Me=function(e,t){return function(i,n){t(i,n,e)}};function Fe(e){return!!e&&Boolean(e.completion.documentation||e.completion.detail&&e.completion.detail!==e.completion.label)}var Oe=function(){function e(t,i){var n=this;(0,a.Z)(this,e),this._editor=t,this._onDidClose=new f.Q5,this.onDidClose=this._onDidClose.event,this._onDidChangeContents=new f.Q5,this.onDidChangeContents=this._onDidChangeContents.event,this._disposables=new m.SL,this._renderDisposeable=new m.SL,this._borderWidth=1,this._size=new ce.Dimension(330,0),this.domNode=ce.$(".suggest-details"),this.domNode.classList.add("no-docs"),this._markdownRenderer=i.createInstance(Ze.$,{editor:t}),this._body=ce.$(".body"),this._scrollbar=new Le.s$(this._body,{alwaysConsumeMouseWheel:!0}),ce.append(this.domNode,this._scrollbar.getDomNode()),this._disposables.add(this._scrollbar),this._header=ce.append(this._body,ce.$(".header")),this._close=ce.append(this._header,ce.$("span"+Ne.k.asCSSSelector(Ie.l.close))),this._close.title=M.NC("details.close","Close"),this._type=ce.append(this._header,ce.$("p.type")),this._docs=ce.append(this._body,ce.$("p.docs")),this._configureFont(),this._disposables.add(this._editor.onDidChangeConfiguration((function(e){e.hasChanged(49)&&n._configureFont()})))}return(0,l.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._renderDisposeable.dispose()}},{key:"_configureFont",value:function(){var e=this._editor.getOptions(),t=e.get(49),i=t.getMassagedFontFamily(),n=e.get(117)||t.fontSize,o=e.get(118)||t.lineHeight,r=t.fontWeight,s="".concat(n,"px"),a="".concat(o,"px");this.domNode.style.fontSize=s,this.domNode.style.lineHeight="".concat(o/n),this.domNode.style.fontWeight=r,this.domNode.style.fontFeatureSettings=t.fontFeatureSettings,this._type.style.fontFamily=i,this._close.style.height=a,this._close.style.width=a}},{key:"getLayoutInfo",value:function(){var e=this._editor.getOption(118)||this._editor.getOption(49).lineHeight,t=this._borderWidth;return{lineHeight:e,borderWidth:t,borderHeight:2*t,verticalPadding:22,horizontalPadding:14}}},{key:"renderLoading",value:function(){this._type.textContent=M.NC("loading","Loading..."),this._docs.textContent="",this.domNode.classList.remove("no-docs","no-type"),this.layout(this.size.width,2*this.getLayoutInfo().lineHeight),this._onDidChangeContents.fire(this)}},{key:"renderItem",value:function(e,t){var i,n,o=this;this._renderDisposeable.clear();var r=e.completion,s=r.detail,a=r.documentation;if(t){var l="";l+="score: ".concat(e.score[0],"\n"),l+="prefix: ".concat(null!==(i=e.word)&&void 0!==i?i:"(no prefix)","\n"),l+="word: ".concat(e.completion.filterText?e.completion.filterText+" (filterText)":e.textLabel,"\n"),l+="distance: ".concat(e.distance," (localityBonus-setting)\n"),l+="index: ".concat(e.idx,", based on ").concat(e.completion.sortText&&'sortText: "'.concat(e.completion.sortText,'"')||"label","\n"),l+="commit_chars: ".concat(null===(n=e.completion.commitCharacters)||void 0===n?void 0:n.join(""),"\n"),a=(new Te.W5).appendCodeblock("empty",l),s="Provider: ".concat(e.provider._debugDisplayName)}if(t||Fe(e)){if(this.domNode.classList.remove("no-docs","no-type"),s){var c=s.length>1e5?"".concat(s.substr(0,1e5),"\u2026"):s;this._type.textContent=c,this._type.title=c,ce.show(this._type),this._type.classList.toggle("auto-wrap",!/\r?\n^\s+/gim.test(c))}else ce.clearNode(this._type),this._type.title="",ce.hide(this._type),this.domNode.classList.add("no-type");if(ce.clearNode(this._docs),"string"===typeof a)this._docs.classList.remove("markdown-docs"),this._docs.textContent=a;else if(a){this._docs.classList.add("markdown-docs"),ce.clearNode(this._docs);var d=this._markdownRenderer.render(a);this._docs.appendChild(d.element),this._renderDisposeable.add(d),this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync((function(){o.layout(o._size.width,o._type.clientHeight+o._docs.clientHeight),o._onDidChangeContents.fire(o)})))}this.domNode.style.userSelect="text",this.domNode.tabIndex=-1,this._close.onmousedown=function(e){e.preventDefault(),e.stopPropagation()},this._close.onclick=function(e){e.preventDefault(),e.stopPropagation(),o._onDidClose.fire()},this._body.scrollTop=0,this.layout(this._size.width,this._type.clientHeight+this._docs.clientHeight),this._onDidChangeContents.fire(this)}else this.clearContents()}},{key:"clearContents",value:function(){this.domNode.classList.add("no-docs"),this._type.textContent="",this._docs.textContent=""}},{key:"size",get:function(){return this._size}},{key:"layout",value:function(e,t){var i=new ce.Dimension(e,t);ce.Dimension.equals(i,this._size)||(this._size=i,ce.size(this.domNode,e,t)),this._scrollbar.scanDomNode()}},{key:"scrollDown",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;this._body.scrollTop+=e}},{key:"scrollUp",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8;this._body.scrollTop-=e}},{key:"scrollTop",value:function(){this._body.scrollTop=0}},{key:"scrollBottom",value:function(){this._body.scrollTop=this._body.scrollHeight}},{key:"pageDown",value:function(){this.scrollDown(80)}},{key:"pageUp",value:function(){this.scrollUp(80)}},{key:"borderWidth",get:function(){return this._borderWidth},set:function(e){this._borderWidth=e}}]),e}();Oe=Pe([Me(1,O.TG)],Oe);var Re,Ae=function(){function e(t,i){var n,o,r=this;(0,a.Z)(this,e),this.widget=t,this._editor=i,this._disposables=new m.SL,this._added=!1,this._preferAlignAtTop=!0,this._resizable=new De.f,this._resizable.domNode.classList.add("suggest-details-container"),this._resizable.domNode.appendChild(t.domNode),this._resizable.enableSashes(!1,!0,!0,!1);var s=0,l=0;this._disposables.add(this._resizable.onDidWillResize((function(){n=r._topLeft,o=r._resizable.size}))),this._disposables.add(this._resizable.onDidResize((function(e){if(n&&o){r.widget.layout(e.dimension.width,e.dimension.height);var t=!1;e.west&&(l=o.width-e.dimension.width,t=!0),e.north&&(s=o.height-e.dimension.height,t=!0),t&&r._applyTopLeft({top:n.top+s,left:n.left+l})}e.done&&(n=void 0,o=void 0,s=0,l=0,r._userSize=e.dimension)}))),this._disposables.add(this.widget.onDidChangeContents((function(){var e;r._anchorBox&&r._placeAtAnchor(r._anchorBox,null!==(e=r._userSize)&&void 0!==e?e:r.widget.size,r._preferAlignAtTop)})))}return(0,l.Z)(e,[{key:"dispose",value:function(){this._resizable.dispose(),this._disposables.dispose(),this.hide()}},{key:"getId",value:function(){return"suggest.details"}},{key:"getDomNode",value:function(){return this._resizable.domNode}},{key:"getPosition",value:function(){return null}},{key:"show",value:function(){this._added||(this._editor.addOverlayWidget(this),this.getDomNode().style.position="fixed",this._added=!0)}},{key:"hide",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._resizable.clearSashHoverState(),this._added&&(this._editor.removeOverlayWidget(this),this._added=!1,this._anchorBox=void 0,this._topLeft=void 0),e&&(this._userSize=void 0,this.widget.clearContents())}},{key:"placeAtAnchor",value:function(e,t){var i,n=e.getBoundingClientRect();this._anchorBox=n,this._preferAlignAtTop=t,this._placeAtAnchor(this._anchorBox,null!==(i=this._userSize)&&void 0!==i?i:this.widget.size,t)}},{key:"_placeAtAnchor",value:function(e,t,i){var n,o,r,s=ce.getClientArea(document.body),a=this.widget.getLayoutInfo(),l=new ce.Dimension(220,2*a.lineHeight),c=e.top,d=function(){var i=s.width-(e.left+e.width+a.borderWidth+a.horizontalPadding),n=-a.borderWidth+e.left+e.width,o=new ce.Dimension(i,s.height-e.top-a.borderHeight-a.verticalPadding),r=o.with(void 0,e.top+e.height-a.borderHeight-a.verticalPadding);return{top:c,left:n,fit:i-t.width,maxSizeTop:o,maxSizeBottom:r,minSize:l.with(Math.min(i,l.width))}}(),u=[d,function(){var i=e.left-a.borderWidth-a.horizontalPadding,n=Math.max(a.horizontalPadding,e.left-t.width-a.borderWidth),o=new ce.Dimension(i,s.height-e.top-a.borderHeight-a.verticalPadding),r=o.with(void 0,e.top+e.height-a.borderHeight-a.verticalPadding);return{top:c,left:n,fit:i-t.width,maxSizeTop:o,maxSizeBottom:r,minSize:l.with(Math.min(i,l.width))}}(),function(){var i=e.left,n=-a.borderWidth+e.top+e.height,o=new ce.Dimension(e.width-a.borderHeight,s.height-e.top-e.height-a.verticalPadding);return{top:n,left:i,fit:o.height-t.height,maxSizeBottom:o,maxSizeTop:o,minSize:l.with(o.width)}}()],h=null!==(n=u.find((function(e){return e.fit>=0})))&&void 0!==n?n:u.sort((function(e,t){return t.fit-e.fit}))[0],g=e.top+e.height-a.borderHeight,f=t.height,p=Math.max(h.maxSizeTop.height,h.maxSizeBottom.height);f>p&&(f=p),i?f<=h.maxSizeTop.height?(o=!0,r=h.maxSizeTop):(o=!1,r=h.maxSizeBottom):f<=h.maxSizeBottom.height?(o=!1,r=h.maxSizeBottom):(o=!0,r=h.maxSizeTop),this._applyTopLeft({left:h.left,top:o?h.top:g-f}),this.getDomNode().style.position="fixed",this._resizable.enableSashes(!o,h===d,o,h!==d),this._resizable.minSize=h.minSize,this._resizable.maxSize=r,this._resizable.layout(f,Math.min(r.width,t.width)),this.widget.layout(this._resizable.size.width,this._resizable.size.height)}},{key:"_applyTopLeft",value:function(e){this._topLeft=e,this.getDomNode().style.left="".concat(this._topLeft.left,"px"),this.getDomNode().style.top="".concat(this._topLeft.top,"px")}}]),e}(),Ee=i(31747),ze=i(38821),We=i(70133),He=i(59128),Ve=i(26246),Be=i(58188),Ge=i(58741),Ke=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},Ue=function(e,t){return function(i,n){t(i,n,e)}};function je(e){return"suggest-aria-id:".concat(e)}var qe=(0,i(87288).q5)("suggest-more-info",Ie.l.chevronRight,M.NC("suggestMoreInfoIcon","Icon for more information in the suggest widget.")),$e=new((Re=function(){function e(){(0,a.Z)(this,e)}return(0,l.Z)(e,[{key:"extract",value:function(t,i){if(t.textLabel.match(e._regexStrict))return i[0]=t.textLabel,!0;if(t.completion.detail&&t.completion.detail.match(e._regexStrict))return i[0]=t.completion.detail,!0;if("string"===typeof t.completion.documentation){var n=e._regexRelaxed.exec(t.completion.documentation);if(n&&(0===n.index||n.index+n[0].length===t.completion.documentation.length))return i[0]=n[0],!0}return!1}}]),e}())._regexRelaxed=/(#([\da-fA-F]{3}){1,2}|(rgb|hsl)a\(\s*(\d{1,3}%?\s*,\s*){3}(1|0?\.\d+)\)|(rgb|hsl)\(\s*\d{1,3}%?(\s*,\s*\d{1,3}%?){2}\s*\))/,Re._regexStrict=new RegExp("^".concat(Re._regexRelaxed.source,"$"),"i"),Re),Qe=function(){function e(t,i,n,o){(0,a.Z)(this,e),this._editor=t,this._modelService=i,this._languageService=n,this._themeService=o,this._onDidToggleDetails=new f.Q5,this.onDidToggleDetails=this._onDidToggleDetails.event,this.templateId="suggestion"}return(0,l.Z)(e,[{key:"dispose",value:function(){this._onDidToggleDetails.dispose()}},{key:"renderTemplate",value:function(e){var t=this,i=new m.SL,n=e;n.classList.add("show-file-icons");var o=(0,ce.append)(e,(0,ce.$)(".icon")),r=(0,ce.append)(o,(0,ce.$)("span.colorspan")),s=(0,ce.append)(e,(0,ce.$)(".contents")),a=(0,ce.append)(s,(0,ce.$)(".main")),l=(0,ce.append)(a,(0,ce.$)(".icon-label.codicon")),c=(0,ce.append)(a,(0,ce.$)("span.left")),d=(0,ce.append)(a,(0,ce.$)("span.right")),u=new Ee.g(c,{supportHighlights:!0,supportIcons:!0});i.add(u);var h=(0,ce.append)(c,(0,ce.$)("span.signature-label")),g=(0,ce.append)(c,(0,ce.$)("span.qualifier-label")),f=(0,ce.append)(d,(0,ce.$)("span.details-label")),p=(0,ce.append)(d,(0,ce.$)("span.readMore"+Ne.k.asCSSSelector(qe)));p.title=M.NC("readMore","Read More");var v=function(){var e=t._editor.getOptions(),i=e.get(49),r=i.getMassagedFontFamily(),s=i.fontFeatureSettings,l=e.get(117)||i.fontSize,c=e.get(118)||i.lineHeight,d=i.fontWeight,u=i.letterSpacing,h="".concat(l,"px"),g="".concat(c,"px"),f="".concat(u,"px");n.style.fontSize=h,n.style.fontWeight=d,n.style.letterSpacing=f,a.style.fontFamily=r,a.style.fontFeatureSettings=s,a.style.lineHeight=g,o.style.height=g,o.style.width=g,p.style.height=g,p.style.width=g};return v(),i.add(this._editor.onDidChangeConfiguration((function(e){(e.hasChanged(49)||e.hasChanged(117)||e.hasChanged(118))&&v()}))),{root:n,left:c,right:d,icon:o,colorspan:r,iconLabel:u,iconContainer:l,parametersLabel:h,qualifierLabel:g,detailsLabel:f,readMore:p,disposables:i}}},{key:"renderElement",value:function(e,t,i){var n=this,o=e.completion;i.root.id=je(t),i.colorspan.style.backgroundColor="";var s={labelEscapeNewLines:!0,matches:(0,ee.mB)(e.score)},a=[];if(19===o.kind&&$e.extract(e,a))i.icon.className="icon customcolor",i.iconContainer.className="icon hide",i.colorspan.style.backgroundColor=a[0];else if(20===o.kind&&this._themeService.getFileIconTheme().hasFileIcons){i.icon.className="icon hide",i.iconContainer.className="icon hide";var l=(0,He.r)(this._modelService,this._languageService,ze.o.from({scheme:"fake",path:e.textLabel}),Ge.R.FILE),c=(0,He.r)(this._modelService,this._languageService,ze.o.from({scheme:"fake",path:o.detail}),Ge.R.FILE);s.extraClasses=l.length>c.length?l:c}else if(23===o.kind&&this._themeService.getFileIconTheme().hasFolderIcons)i.icon.className="icon hide",i.iconContainer.className="icon hide",s.extraClasses=[(0,He.r)(this._modelService,this._languageService,ze.o.from({scheme:"fake",path:e.textLabel}),Ge.R.FOLDER),(0,He.r)(this._modelService,this._languageService,ze.o.from({scheme:"fake",path:o.detail}),Ge.R.FOLDER)].flat();else{var d;i.icon.className="icon hide",i.iconContainer.className="",(d=i.iconContainer.classList).add.apply(d,["suggest-icon"].concat((0,r.Z)(Ne.k.asClassNameArray(We.gX.toIcon(o.kind)))))}o.tags&&o.tags.indexOf(1)>=0&&(s.extraClasses=(s.extraClasses||[]).concat(["deprecated"]),s.matches=[]),i.iconLabel.setLabel(e.textLabel,void 0,s),"string"===typeof o.label?(i.parametersLabel.textContent="",i.detailsLabel.textContent=Je(o.detail||""),i.root.classList.add("string-label")):(i.parametersLabel.textContent=Je(o.label.detail||""),i.detailsLabel.textContent=Je(o.label.description||""),i.root.classList.remove("string-label")),this._editor.getOption(116).showInlineDetails?(0,ce.show)(i.detailsLabel):(0,ce.hide)(i.detailsLabel),Fe(e)?(i.right.classList.add("can-expand-details"),(0,ce.show)(i.readMore),i.readMore.onmousedown=function(e){e.stopPropagation(),e.preventDefault()},i.readMore.onclick=function(e){e.stopPropagation(),e.preventDefault(),n._onDidToggleDetails.fire()}):(i.right.classList.remove("can-expand-details"),(0,ce.hide)(i.readMore),i.readMore.onmousedown=null,i.readMore.onclick=null)}},{key:"disposeTemplate",value:function(e){e.disposables.dispose()}}]),e}();function Je(e){return e.replace(/\r\n|\r|\n/g,"")}Qe=Ke([Ue(1,Ve.q),Ue(2,Be.O),Ue(3,xe.XE)],Qe);var Xe=i(87103),Ye=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},et=function(e,t){return function(i,n){t(i,n,e)}},tt=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))};(0,we.P6G)("editorSuggestWidget.background",{dark:we.D0T,light:we.D0T,hcDark:we.D0T,hcLight:we.D0T},M.NC("editorSuggestWidgetBackground","Background color of the suggest widget.")),(0,we.P6G)("editorSuggestWidget.border",{dark:we.D1_,light:we.D1_,hcDark:we.D1_,hcLight:we.D1_},M.NC("editorSuggestWidgetBorder","Border color of the suggest widget."));var it=(0,we.P6G)("editorSuggestWidget.foreground",{dark:we.NOs,light:we.NOs,hcDark:we.NOs,hcLight:we.NOs},M.NC("editorSuggestWidgetForeground","Foreground color of the suggest widget."));(0,we.P6G)("editorSuggestWidget.selectedForeground",{dark:we.NPS,light:we.NPS,hcDark:we.NPS,hcLight:we.NPS},M.NC("editorSuggestWidgetSelectedForeground","Foreground color of the selected entry in the suggest widget.")),(0,we.P6G)("editorSuggestWidget.selectedIconForeground",{dark:we.cbQ,light:we.cbQ,hcDark:we.cbQ,hcLight:we.cbQ},M.NC("editorSuggestWidgetSelectedIconForeground","Icon foreground color of the selected entry in the suggest widget."));var nt=(0,we.P6G)("editorSuggestWidget.selectedBackground",{dark:we.Vqd,light:we.Vqd,hcDark:we.Vqd,hcLight:we.Vqd},M.NC("editorSuggestWidgetSelectedBackground","Background color of the selected entry in the suggest widget."));(0,we.P6G)("editorSuggestWidget.highlightForeground",{dark:we.Gwp,light:we.Gwp,hcDark:we.Gwp,hcLight:we.Gwp},M.NC("editorSuggestWidgetHighlightForeground","Color of the match highlights in the suggest widget.")),(0,we.P6G)("editorSuggestWidget.focusHighlightForeground",{dark:we.PX0,light:we.PX0,hcDark:we.PX0,hcLight:we.PX0},M.NC("editorSuggestWidgetFocusHighlightForeground","Color of the match highlights in the suggest widget when an item is focused.")),(0,we.P6G)("editorSuggestWidgetStatus.foreground",{dark:(0,we.ZnX)(it,.5),light:(0,we.ZnX)(it,.5),hcDark:(0,we.ZnX)(it,.5),hcLight:(0,we.ZnX)(it,.5)},M.NC("editorSuggestWidgetStatusForeground","Foreground color of the suggest widget status."));var ot=function(){function e(t,i){(0,a.Z)(this,e),this._service=t,this._key="suggestWidget.size/".concat(i.getEditorType(),"/").concat(i instanceof he.H)}return(0,l.Z)(e,[{key:"restore",value:function(){var e,t=null!==(e=this._service.get(this._key,0))&&void 0!==e?e:"";try{var i=JSON.parse(t);if(ce.Dimension.is(i))return ce.Dimension.lift(i)}catch(n){}}},{key:"store",value:function(e){this._service.store(this._key,JSON.stringify(e),0,1)}},{key:"reset",value:function(){this._service.remove(this._key,0)}}]),e}(),rt=function(){function e(t,i,n,o,r){var s=this;(0,a.Z)(this,e),this.editor=t,this._storageService=i,this._state=0,this._isAuto=!1,this._pendingLayout=new m.XK,this._pendingShowDetails=new m.XK,this._ignoreFocusEvents=!1,this._forceRenderingAbove=!1,this._explainMode=!1,this._showTimeout=new u._F,this._disposables=new m.SL,this._onDidSelect=new f.K3,this._onDidFocus=new f.K3,this._onDidHide=new f.Q5,this._onDidShow=new f.Q5,this.onDidSelect=this._onDidSelect.event,this.onDidFocus=this._onDidFocus.event,this.onDidHide=this._onDidHide.event,this.onDidShow=this._onDidShow.event,this._onDetailsKeydown=new f.Q5,this.onDetailsKeyDown=this._onDetailsKeydown.event,this.element=new De.f,this.element.domNode.classList.add("editor-widget","suggest-widget"),this._contentWidget=new st(this,t),this._persistedSize=new ot(i,t);var c,d=(0,l.Z)((function e(t,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(0,a.Z)(this,e),this.persistedSize=t,this.currentSize=i,this.persistHeight=n,this.persistWidth=o}));this._disposables.add(this.element.onDidWillResize((function(){s._contentWidget.lockPreference(),c=new d(s._persistedSize.restore(),s.element.size)}))),this._disposables.add(this.element.onDidResize((function(e){var t,i,n,o;if(s._resize(e.dimension.width,e.dimension.height),c&&(c.persistHeight=c.persistHeight||!!e.north||!!e.south,c.persistWidth=c.persistWidth||!!e.east||!!e.west),e.done){if(c){var r=s.getLayoutInfo(),a=r.itemHeight,l=r.defaultSize,d=Math.round(a/2),u=s.element.size,h=u.width,g=u.height;(!c.persistHeight||Math.abs(c.currentSize.height-g)<=d)&&(g=null!==(i=null===(t=c.persistedSize)||void 0===t?void 0:t.height)&&void 0!==i?i:l.height),(!c.persistWidth||Math.abs(c.currentSize.width-h)<=d)&&(h=null!==(o=null===(n=c.persistedSize)||void 0===n?void 0:n.width)&&void 0!==o?o:l.width),s._persistedSize.store(new ce.Dimension(h,g))}s._contentWidget.unlockPreference(),c=void 0}}))),this._messageElement=ce.append(this.element.domNode,ce.$(".message")),this._listElement=ce.append(this.element.domNode,ce.$(".tree"));var h=r.createInstance(Oe,this.editor);h.onDidClose(this.toggleDetails,this,this._disposables),this._details=new Ae(h,this.editor);var g=function(){return s.element.domNode.classList.toggle("no-icons",!s.editor.getOption(116).showIcons)};g();var p=r.createInstance(Qe,this.editor);this._disposables.add(p),this._disposables.add(p.onDidToggleDetails((function(){return s.toggleDetails()}))),this._list=new de.aV("SuggestWidget",this._listElement,{getHeight:function(e){return s.getLayoutInfo().itemHeight},getTemplateId:function(e){return"suggestion"}},[p],{alwaysConsumeMouseWheel:!0,useShadows:!1,mouseSupport:!1,multipleSelectionSupport:!1,accessibilityProvider:{getRole:function(){return"option"},getWidgetAriaLabel:function(){return M.NC("suggest","Suggest")},getWidgetRole:function(){return"listbox"},getAriaLabel:function(e){var t=e.textLabel;if("string"!==typeof e.completion.label){var i=e.completion.label,n=i.detail,o=i.description;n&&o?t=M.NC("label.full","{0} {1}, {2}",t,n,o):n?t=M.NC("label.detail","{0} {1}",t,n):o&&(t=M.NC("label.desc","{0}, {1}",t,o))}if(!e.isResolved||!s._isDetailsVisible())return t;var r=e.completion,a=r.documentation,l=r.detail,c=K.WU("{0}{1}",l||"",a?"string"===typeof a?a:a.value:"");return M.NC("ariaCurrenttSuggestionReadDetails","{0}, docs: {1}",t,c)}}}),this._list.style((0,Xe.TU)({listInactiveFocusBackground:nt,listInactiveFocusOutline:we.xL1})),this._status=r.createInstance(Se,this.element.domNode,A.GI);var v=function(){return s.element.domNode.classList.toggle("with-status-bar",s.editor.getOption(116).showStatusBar)};v(),this._disposables.add(o.onDidColorThemeChange((function(e){return s._onThemeChange(e)}))),this._onThemeChange(o.getColorTheme()),this._disposables.add(this._list.onMouseDown((function(e){return s._onListMouseDownOrTap(e)}))),this._disposables.add(this._list.onTap((function(e){return s._onListMouseDownOrTap(e)}))),this._disposables.add(this._list.onDidChangeSelection((function(e){return s._onListSelection(e)}))),this._disposables.add(this._list.onDidChangeFocus((function(e){return s._onListFocus(e)}))),this._disposables.add(this.editor.onDidChangeCursorSelection((function(){return s._onCursorSelectionChanged()}))),this._disposables.add(this.editor.onDidChangeConfiguration((function(e){e.hasChanged(116)&&(v(),g())}))),this._ctxSuggestWidgetVisible=A._y.Visible.bindTo(n),this._ctxSuggestWidgetDetailsVisible=A._y.DetailsVisible.bindTo(n),this._ctxSuggestWidgetMultipleSuggestions=A._y.MultipleSuggestions.bindTo(n),this._ctxSuggestWidgetHasFocusedSuggestion=A._y.HasFocusedSuggestion.bindTo(n),this._disposables.add(ce.addStandardDisposableListener(this._details.widget.domNode,"keydown",(function(e){s._onDetailsKeydown.fire(e)}))),this._disposables.add(this.editor.onMouseDown((function(e){return s._onEditorMouseDown(e)})))}return(0,l.Z)(e,[{key:"dispose",value:function(){var e;this._details.widget.dispose(),this._details.dispose(),this._list.dispose(),this._status.dispose(),this._disposables.dispose(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._pendingLayout.dispose(),this._pendingShowDetails.dispose(),this._showTimeout.dispose(),this._contentWidget.dispose(),this.element.dispose()}},{key:"_onEditorMouseDown",value:function(e){this._details.widget.domNode.contains(e.target.element)?this._details.widget.domNode.focus():this.element.domNode.contains(e.target.element)&&this.editor.focus()}},{key:"_onCursorSelectionChanged",value:function(){0!==this._state&&this._contentWidget.layout()}},{key:"_onListMouseDownOrTap",value:function(e){"undefined"!==typeof e.element&&"undefined"!==typeof e.index&&(e.browserEvent.preventDefault(),e.browserEvent.stopPropagation(),this._select(e.element,e.index))}},{key:"_onListSelection",value:function(e){e.elements.length&&this._select(e.elements[0],e.indexes[0])}},{key:"_select",value:function(e,t){var i=this._completionModel;i&&(this._onDidSelect.fire({item:e,index:t,model:i}),this.editor.focus())}},{key:"_onThemeChange",value:function(e){this._details.widget.borderWidth=(0,Ce.c3)(e.type)?2:1}},{key:"_onListFocus",value:function(e){var t,i=this;if(!this._ignoreFocusEvents){if(!e.elements.length)return this._currentSuggestionDetails&&(this._currentSuggestionDetails.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=void 0),this.editor.setAriaOptions({activeDescendant:void 0}),void this._ctxSuggestWidgetHasFocusedSuggestion.set(!1);if(this._completionModel){this._ctxSuggestWidgetHasFocusedSuggestion.set(!0);var n=e.elements[0],o=e.indexes[0];n!==this._focusedItem&&(null===(t=this._currentSuggestionDetails)||void 0===t||t.cancel(),this._currentSuggestionDetails=void 0,this._focusedItem=n,this._list.reveal(o),this._currentSuggestionDetails=(0,u.PG)((function(e){return tt(i,void 0,void 0,(0,B.Z)().mark((function t(){var i,o,r,s=this;return(0,B.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=(0,u.Vg)((function(){s._isDetailsVisible()&&s.showDetails(!0)}),250),o=e.onCancellationRequested((function(){return i.dispose()})),t.next=4,n.resolve(e);case 4:return r=t.sent,i.dispose(),o.dispose(),t.abrupt("return",r);case 8:case"end":return t.stop()}}),t)})))})),this._currentSuggestionDetails.then((function(){o>=i._list.length||n!==i._list.element(o)||(i._ignoreFocusEvents=!0,i._list.splice(o,1,[n]),i._list.setFocus([o]),i._ignoreFocusEvents=!1,i._isDetailsVisible()?i.showDetails(!1):i.element.domNode.classList.remove("docs-side"),i.editor.setAriaOptions({activeDescendant:je(o)}))})).catch(g.dL)),this._onDidFocus.fire({item:n,index:o,model:this._completionModel})}}}},{key:"_setState",value:function(t){if(this._state!==t)switch(this._state=t,this.element.domNode.classList.toggle("frozen",4===t),this.element.domNode.classList.remove("message"),t){case 0:ce.hide(this._messageElement,this._listElement,this._status.element),this._details.hide(!0),this._status.hide(),this._contentWidget.hide(),this._ctxSuggestWidgetVisible.reset(),this._ctxSuggestWidgetMultipleSuggestions.reset(),this._ctxSuggestWidgetHasFocusedSuggestion.reset(),this._showTimeout.cancel(),this.element.domNode.classList.remove("visible"),this._list.splice(0,this._list.length),this._focusedItem=void 0,this._cappedHeight=void 0,this._explainMode=!1;break;case 1:this.element.domNode.classList.add("message"),this._messageElement.textContent=e.LOADING_MESSAGE,ce.hide(this._listElement,this._status.element),ce.show(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 2:this.element.domNode.classList.add("message"),this._messageElement.textContent=e.NO_SUGGESTIONS_MESSAGE,ce.hide(this._listElement,this._status.element),ce.show(this._messageElement),this._details.hide(),this._show(),this._focusedItem=void 0;break;case 3:case 4:ce.hide(this._messageElement),ce.show(this._listElement,this._status.element),this._show();break;case 5:ce.hide(this._messageElement),ce.show(this._listElement,this._status.element),this._details.show(),this._show()}}},{key:"_show",value:function(){var e=this;this._status.show(),this._contentWidget.show(),this._layout(this._persistedSize.restore()),this._ctxSuggestWidgetVisible.set(!0),this._showTimeout.cancelAndSet((function(){e.element.domNode.classList.add("visible"),e._onDidShow.fire(e)}),100)}},{key:"showTriggered",value:function(e,t){var i=this;0===this._state&&(this._contentWidget.setPosition(this.editor.getPosition()),this._isAuto=!!e,this._isAuto||(this._loadingTimeout=(0,u.Vg)((function(){return i._setState(1)}),t)))}},{key:"showSuggestions",value:function(e,t,i,n,o){var r,s,a=this;if(this._contentWidget.setPosition(this.editor.getPosition()),null===(r=this._loadingTimeout)||void 0===r||r.dispose(),null===(s=this._currentSuggestionDetails)||void 0===s||s.cancel(),this._currentSuggestionDetails=void 0,this._completionModel!==e&&(this._completionModel=e),i&&2!==this._state&&0!==this._state)this._setState(4);else{var l=this._completionModel.items.length,c=0===l;if(this._ctxSuggestWidgetMultipleSuggestions.set(l>1),c)return this._setState(n?0:2),void(this._completionModel=void 0);this._focusedItem=void 0,this._onDidFocus.pause(),this._onDidSelect.pause();try{this._list.splice(0,this._list.length,this._completionModel.items),this._setState(i?4:3),this._list.reveal(t,0),this._list.setFocus(o?[]:[t])}finally{this._onDidFocus.resume(),this._onDidSelect.resume()}this._pendingLayout.value=ce.runAtThisOrScheduleAtNextAnimationFrame((function(){a._pendingLayout.clear(),a._layout(a.element.size),a._details.widget.domNode.classList.remove("focused")}))}}},{key:"focusSelected",value:function(){this._list.length>0&&this._list.setFocus([0])}},{key:"selectNextPage",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageDown(),!0;case 1:return!this._isAuto;default:return this._list.focusNextPage(),!0}}},{key:"selectNext",value:function(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusNext(1,!0),!0}}},{key:"selectLast",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollBottom(),!0;case 1:return!this._isAuto;default:return this._list.focusLast(),!0}}},{key:"selectPreviousPage",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.pageUp(),!0;case 1:return!this._isAuto;default:return this._list.focusPreviousPage(),!0}}},{key:"selectPrevious",value:function(){switch(this._state){case 0:return!1;case 1:return!this._isAuto;default:return this._list.focusPrevious(1,!0),!1}}},{key:"selectFirst",value:function(){switch(this._state){case 0:return!1;case 5:return this._details.widget.scrollTop(),!0;case 1:return!this._isAuto;default:return this._list.focusFirst(),!0}}},{key:"getFocusedItem",value:function(){if(0!==this._state&&2!==this._state&&1!==this._state&&this._completionModel&&this._list.getFocus().length>0)return{item:this._list.getFocusedElements()[0],index:this._list.getFocus()[0],model:this._completionModel}}},{key:"toggleDetailsFocus",value:function(){5===this._state?(this._setState(3),this._details.widget.domNode.classList.remove("focused")):3===this._state&&this._isDetailsVisible()&&(this._setState(5),this._details.widget.domNode.classList.add("focused"))}},{key:"toggleDetails",value:function(){this._isDetailsVisible()?(this._pendingShowDetails.clear(),this._ctxSuggestWidgetDetailsVisible.set(!1),this._setDetailsVisible(!1),this._details.hide(),this.element.domNode.classList.remove("shows-details")):!Fe(this._list.getFocusedElements()[0])&&!this._explainMode||3!==this._state&&5!==this._state&&4!==this._state||(this._ctxSuggestWidgetDetailsVisible.set(!0),this._setDetailsVisible(!0),this.showDetails(!1))}},{key:"showDetails",value:function(e){var t=this;this._pendingShowDetails.value=ce.runAtThisOrScheduleAtNextAnimationFrame((function(){t._pendingShowDetails.clear(),t._details.show(),e?t._details.widget.renderLoading():t._details.widget.renderItem(t._list.getFocusedElements()[0],t._explainMode),t._positionDetails(),t.editor.focus(),t.element.domNode.classList.add("shows-details")}))}},{key:"toggleExplainMode",value:function(){this._list.getFocusedElements()[0]&&(this._explainMode=!this._explainMode,this._isDetailsVisible()?this.showDetails(!1):this.toggleDetails())}},{key:"resetPersistedSize",value:function(){this._persistedSize.reset()}},{key:"hideWidget",value:function(){var e;this._pendingLayout.clear(),this._pendingShowDetails.clear(),null===(e=this._loadingTimeout)||void 0===e||e.dispose(),this._setState(0),this._onDidHide.fire(this),this.element.clearSashHoverState();var t=this._persistedSize.restore(),i=Math.ceil(4.3*this.getLayoutInfo().itemHeight);t&&t.height<i&&this._persistedSize.store(t.with(void 0,i))}},{key:"isFrozen",value:function(){return 4===this._state}},{key:"_afterRender",value:function(e){null!==e?2!==this._state&&1!==this._state&&(this._isDetailsVisible()&&this._details.show(),this._positionDetails()):this._isDetailsVisible()&&this._details.hide()}},{key:"_layout",value:function(e){var t,i,n;if(this.editor.hasModel()&&this.editor.getDomNode()){var o=ce.getClientArea(document.body),r=this.getLayoutInfo();e||(e=r.defaultSize);var s=e.height,a=e.width;if(this._status.element.style.height="".concat(r.itemHeight,"px"),2===this._state||1===this._state)s=r.itemHeight+r.borderHeight,a=r.defaultSize.width/2,this.element.enableSashes(!1,!1,!1,!1),this.element.minSize=this.element.maxSize=new ce.Dimension(a,s),this._contentWidget.setPreference(2);else{var l=o.width-r.borderHeight-2*r.horizontalPadding;a>l&&(a=l);var c=this._completionModel?this._completionModel.stats.pLabelLen*r.typicalHalfwidthCharacterWidth:a,d=r.statusBarHeight+this._list.contentHeight+r.borderHeight,u=r.itemHeight+r.statusBarHeight,h=ce.getDomNodePagePosition(this.editor.getDomNode()),g=this.editor.getScrolledVisiblePosition(this.editor.getPosition()),f=h.top+g.top+g.height,p=Math.min(o.height-f-r.verticalPadding,d),m=h.top+g.top-r.verticalPadding,v=Math.min(m,d),_=Math.min(Math.max(v,p)+r.borderHeight,d);s===(null===(t=this._cappedHeight)||void 0===t?void 0:t.capped)&&(s=this._cappedHeight.wanted),s<u&&(s=u),s>_&&(s=_);s>p||this._forceRenderingAbove&&m>150?(this._contentWidget.setPreference(1),this.element.enableSashes(!0,!0,!1,!1),_=v):(this._contentWidget.setPreference(2),this.element.enableSashes(!1,!0,!0,!1),_=p),this.element.preferredSize=new ce.Dimension(c,r.defaultSize.height),this.element.maxSize=new ce.Dimension(l,_),this.element.minSize=new ce.Dimension(220,u),this._cappedHeight=s===d?{wanted:null!==(n=null===(i=this._cappedHeight)||void 0===i?void 0:i.wanted)&&void 0!==n?n:e.height,capped:s}:void 0}this._resize(a,s)}}},{key:"_resize",value:function(e,t){var i=this.element.maxSize,n=i.width,o=i.height;e=Math.min(n,e),t=Math.min(o,t);var r=this.getLayoutInfo().statusBarHeight;this._list.layout(t-r,e),this._listElement.style.height="".concat(t-r,"px"),this.element.layout(t,e),this._contentWidget.layout(),this._positionDetails()}},{key:"_positionDetails",value:function(){var e;this._isDetailsVisible()&&this._details.placeAtAnchor(this.element.domNode,2===(null===(e=this._contentWidget.getPosition())||void 0===e?void 0:e.preference[0]))}},{key:"getLayoutInfo",value:function(){var e=this.editor.getOption(49),t=(0,ue.uZ)(this.editor.getOption(118)||e.lineHeight,8,1e3),i=this.editor.getOption(116).showStatusBar&&2!==this._state&&1!==this._state?t:0,n=this._details.widget.borderWidth,o=2*n;return{itemHeight:t,statusBarHeight:i,borderWidth:n,borderHeight:o,typicalHalfwidthCharacterWidth:e.typicalHalfwidthCharacterWidth,verticalPadding:22,horizontalPadding:14,defaultSize:new ce.Dimension(430,i+12*t+o)}}},{key:"_isDetailsVisible",value:function(){return this._storageService.getBoolean("expandSuggestionDocs",0,!1)}},{key:"_setDetailsVisible",value:function(e){this._storageService.store("expandSuggestionDocs",e,0,0)}},{key:"forceRenderingAbove",value:function(){this._forceRenderingAbove||(this._forceRenderingAbove=!0,this._layout(this._persistedSize.restore()))}},{key:"stopForceRenderingAbove",value:function(){this._forceRenderingAbove=!1}}]),e}();rt.LOADING_MESSAGE=M.NC("suggestWidget.loading","Loading..."),rt.NO_SUGGESTIONS_MESSAGE=M.NC("suggestWidget.noSuggestions","No suggestions."),rt=Ye([et(1,ke.Uy),et(2,N.i6),et(3,xe.XE),et(4,O.TG)],rt);var st=function(){function e(t,i){(0,a.Z)(this,e),this._widget=t,this._editor=i,this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._preferenceLocked=!1,this._added=!1,this._hidden=!1}return(0,l.Z)(e,[{key:"dispose",value:function(){this._added&&(this._added=!1,this._editor.removeContentWidget(this))}},{key:"getId",value:function(){return"editor.widget.suggestWidget"}},{key:"getDomNode",value:function(){return this._widget.element.domNode}},{key:"show",value:function(){this._hidden=!1,this._added||(this._added=!0,this._editor.addContentWidget(this))}},{key:"hide",value:function(){this._hidden||(this._hidden=!0,this.layout())}},{key:"layout",value:function(){this._editor.layoutContentWidget(this)}},{key:"getPosition",value:function(){return!this._hidden&&this._position&&this._preference?{position:this._position,preference:[this._preference]}:null}},{key:"beforeRender",value:function(){var e=this._widget.element.size,t=e.height,i=e.width,n=this._widget.getLayoutInfo(),o=n.borderWidth,r=n.horizontalPadding;return new ce.Dimension(i+2*o+r,t+2*o)}},{key:"afterRender",value:function(e){this._widget._afterRender(e)}},{key:"setPreference",value:function(e){this._preferenceLocked||(this._preference=e)}},{key:"lockPreference",value:function(){this._preferenceLocked=!0}},{key:"unlockPreference",value:function(){this._preferenceLocked=!1}},{key:"setPosition",value:function(e){this._position=e}}]),e}(),at=i(44641),lt=i(62204),ct=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},dt=function(e,t){return function(i,n){t(i,n,e)}},ut=function(){function e(t,i){if((0,a.Z)(this,e),this._model=t,this._position=i,t.getLineMaxColumn(i.lineNumber)!==i.column){var n=t.getOffsetAt(i),o=t.getPositionAt(n+1);this._marker=t.deltaDecorations([],[{range:C.e.fromPositions(i,o),options:{description:"suggest-line-suffix",stickiness:1}}])}}return(0,l.Z)(e,[{key:"dispose",value:function(){this._marker&&!this._model.isDisposed()&&this._model.deltaDecorations(this._marker,[])}},{key:"delta",value:function(e){if(this._model.isDisposed()||this._position.lineNumber!==e.lineNumber)return 0;if(this._marker){var t=this._model.getDecorationRange(this._marker[0]);return this._model.getOffsetAt(t.getStartPosition())-this._model.getOffsetAt(e)}return this._model.getLineMaxColumn(e.lineNumber)-e.column}}]),e}(),ht=function(){function e(t,i,n,o,r,l,c){var d=this;(0,a.Z)(this,e),this._memoryService=i,this._commandService=n,this._contextKeyService=o,this._instantiationService=r,this._logService=l,this._telemetryService=c,this._lineSuffix=new m.XK,this._toDispose=new m.SL,this._selectors=new gt((function(e){return e.priority})),this.editor=t,this.model=r.createInstance(ae,this.editor),this._selectors.register({priority:0,select:function(e,t,i){return d._memoryService.select(e,t,i)}});var h=A._y.InsertMode.bindTo(o);h.set(t.getOption(116).insertMode),this.model.onDidTrigger((function(){return h.set(t.getOption(116).insertMode)})),this.widget=this._toDispose.add(new u.Ue((function(){var e=d._instantiationService.createInstance(rt,d.editor);d._toDispose.add(e),d._toDispose.add(e.onDidSelect((function(e){return d._insertSuggestion(e,0)}),d));var t=new V(d.editor,e,d.model,(function(e){return d._insertSuggestion(e,2)}));d._toDispose.add(t);var i=A._y.MakesTextEdit.bindTo(d._contextKeyService),n=A._y.HasInsertAndReplaceRange.bindTo(d._contextKeyService),o=A._y.CanResolve.bindTo(d._contextKeyService);return d._toDispose.add((0,m.OF)((function(){i.reset(),n.reset(),o.reset()}))),d._toDispose.add(e.onDidFocus((function(e){var t=e.item,r=d.editor.getPosition(),s=t.editStart.column,a=r.column,l=!0;"smart"!==d.editor.getOption(1)||2!==d.model.state||t.completion.additionalTextEdits||4&t.completion.insertTextRules||a-s!==t.completion.insertText.length||(l=d.editor.getModel().getValueInRange({startLineNumber:r.lineNumber,startColumn:s,endLineNumber:r.lineNumber,endColumn:a})!==t.completion.insertText);i.set(l),n.set(!w.L.equals(t.editInsertEnd,t.editReplaceEnd)),o.set(Boolean(t.provider.resolveCompletionItem)||Boolean(t.completion.documentation)||t.completion.detail!==t.completion.label)}))),d._toDispose.add(e.onDetailsKeyDown((function(e){e.toKeyCodeChord().equals(new p.$M(!0,!1,!1,!1,33))||v.dz&&e.toKeyCodeChord().equals(new p.$M(!1,!1,!1,!0,33))?e.stopPropagation():e.toKeyCodeChord().isModifierKey()||d.editor.focus()}))),e}))),this._overtypingCapturer=this._toDispose.add(new u.Ue((function(){return d._toDispose.add(new le(d.editor,d.model))}))),this._alternatives=this._toDispose.add(new u.Ue((function(){return d._toDispose.add(new W(d.editor,d._contextKeyService))}))),this._toDispose.add(r.createInstance(P,t)),this._toDispose.add(this.model.onDidTrigger((function(e){d.widget.value.showTriggered(e.auto,e.shy?250:50),d._lineSuffix.value=new ut(d.editor.getModel(),e.position)}))),this._toDispose.add(this.model.onDidSuggest((function(e){if(!e.triggerOptions.shy){var t,i=-1,n=(0,s.Z)(d._selectors.itemsOrderedByPriorityDesc);try{for(n.s();!(t=n.n()).done;){if(-1!==(i=t.value.select(d.editor.getModel(),d.editor.getPosition(),e.completionModel.items)))break}}catch(a){n.e(a)}finally{n.f()}-1===i&&(i=0);var o=!1;if(e.triggerOptions.auto){var r=d.editor.getOption(116);"never"===r.selectionMode||"always"===r.selectionMode?o="never"===r.selectionMode:"whenTriggerCharacter"===r.selectionMode?o=1!==e.triggerOptions.triggerKind:"whenQuickSuggestion"===r.selectionMode&&(o=1===e.triggerOptions.triggerKind&&!e.triggerOptions.refilter)}d.widget.value.showSuggestions(e.completionModel,i,e.isFrozen,e.triggerOptions.auto,o)}}))),this._toDispose.add(this.model.onDidCancel((function(e){e.retrigger||d.widget.value.hideWidget()}))),this._toDispose.add(this.editor.onDidBlurEditorWidget((function(){d.model.cancel(),d.model.clear()})));var g=A._y.AcceptSuggestionsOnEnter.bindTo(o),f=function(){var e=d.editor.getOption(1);g.set("on"===e||"smart"===e)};this._toDispose.add(this.editor.onDidChangeConfiguration((function(){return f()}))),f()}return(0,l.Z)(e,[{key:"dispose",value:function(){this._alternatives.dispose(),this._toDispose.dispose(),this.widget.dispose(),this.model.dispose(),this._lineSuffix.dispose()}},{key:"_insertSuggestion",value:function(e,t){var i=this;if(!e||!e.item)return this._alternatives.value.reset(),this.model.cancel(),void this.model.clear();if(this.editor.hasModel()){var n=D.SnippetController2.get(this.editor);if(n){var o=this.editor.getModel(),a=o.getAlternativeVersionId(),l=e.item,c=[],d=new h.A;1&t||this.editor.pushUndoStop();var u=this.getOverwriteInfo(l,Boolean(8&t));this._memoryService.memorize(o,this.editor.getPosition(),l);var f=l.isResolved,p=-1,m=-1;if(Array.isArray(l.completion.additionalTextEdits)){this.model.cancel();var v=b.Z.capture(this.editor);this.editor.executeEdits("suggestController.additionalTextEdits.sync",l.completion.additionalTextEdits.map((function(e){return k.h.replaceMove(C.e.lift(e.range),e.text)}))),v.restoreRelativeVerticalPositionOfCursor(this.editor)}else if(!f){var y,S=new _.G,x=o.onDidChangeContent((function(e){if(e.isFlush)return d.cancel(),void x.dispose();var t,i=(0,s.Z)(e.changes);try{for(i.s();!(t=i.n()).done;){var n=t.value,o=C.e.getEndPosition(n.range);y&&!w.L.isBefore(o,y)||(y=o)}}catch(r){i.e(r)}finally{i.f()}})),I=t;t|=2;var N=!1,T=this.editor.onWillType((function(){T.dispose(),N=!0,2&I||i.editor.pushUndoStop()}));c.push(l.resolve(d.token).then((function(){if(l.completion.additionalTextEdits&&!d.token.isCancellationRequested){if(y&&l.completion.additionalTextEdits.some((function(e){return w.L.isBefore(y,C.e.getStartPosition(e.range))})))return!1;N&&i.editor.pushUndoStop();var e=b.Z.capture(i.editor);return i.editor.executeEdits("suggestController.additionalTextEdits.async",l.completion.additionalTextEdits.map((function(e){return k.h.replaceMove(C.e.lift(e.range),e.text)}))),e.restoreRelativeVerticalPositionOfCursor(i.editor),!N&&2&I||i.editor.pushUndoStop(),!0}})).then((function(e){i._logService.trace("[suggest] async resolving of edits DONE (ms, applied?)",S.elapsed(),e),m=!0===e?1:!1===e?0:-2})).finally((function(){x.dispose(),T.dispose()})))}var Z=l.completion.insertText;if(4&l.completion.insertTextRules||(Z=L.Yj.escape(Z)),this.model.cancel(),n.insert(Z,{overwriteBefore:u.overwriteBefore,overwriteAfter:u.overwriteAfter,undoStopBefore:!1,undoStopAfter:!1,adjustWhitespace:!(1&l.completion.insertTextRules),clipboardText:e.model.clipboardText,overtypingCapturer:this._overtypingCapturer.value}),2&t||this.editor.pushUndoStop(),l.completion.command)if(l.completion.command.id===ft.id)this.model.trigger({auto:!0,retrigger:!0});else{var P,M=new _.G;c.push((P=this._commandService).executeCommand.apply(P,[l.completion.command.id].concat((0,r.Z)(l.completion.command.arguments?(0,r.Z)(l.completion.command.arguments):[]))).catch((function(e){l.completion.extensionId?(0,g.Cp)(e):(0,g.dL)(e)})).finally((function(){p=M.elapsed()})))}4&t&&this._alternatives.value.set(e,(function(e){for(d.cancel();o.canUndo();){a!==o.getAlternativeVersionId()&&o.undo(),i._insertSuggestion(e,3|(8&t?8:0));break}})),this._alertCompletionItem(l),Promise.all(c).finally((function(){i._reportSuggestionAcceptedTelemetry(l,o,f,p,m),i.model.clear(),d.dispose()}))}}}},{key:"_reportSuggestionAcceptedTelemetry",value:function(e,t,i,n,o){var r,s,a;0!==Math.floor(100*Math.random())&&this._telemetryService.publicLog2("suggest.acceptedSuggestion",{extensionId:null!==(s=null===(r=e.extensionId)||void 0===r?void 0:r.value)&&void 0!==s?s:"unknown",providerId:null!==(a=e.provider._debugDisplayName)&&void 0!==a?a:"unknown",kind:e.completion.kind,basenameHash:(0,lt.vp)((0,at.EZ)(t.uri)).toString(16),languageId:t.getLanguageId(),fileExtension:(0,at.DZ)(t.uri),resolveInfo:e.provider.resolveCompletionItem?i?1:0:-1,resolveDuration:e.resolveDuration,commandDuration:n,additionalEditsAsync:o})}},{key:"getOverwriteInfo",value:function(e,t){(0,y.p_)(this.editor.hasModel());var i="replace"===this.editor.getOption(116).insertMode;t&&(i=!i);var n=e.position.column-e.editStart.column,o=(i?e.editReplaceEnd.column:e.editInsertEnd.column)-e.position.column;return{overwriteBefore:n+(this.editor.getPosition().column-e.position.column),overwriteAfter:o+(this._lineSuffix.value?this._lineSuffix.value.delta(this.editor.getPosition()):0)}}},{key:"_alertCompletionItem",value:function(e){if((0,d.Of)(e.completion.additionalTextEdits)){var t=M.NC("aria.alert.snippet","Accepting '{0}' made {1} additional edits",e.textLabel,e.completion.additionalTextEdits.length);(0,c.Z9)(t)}}},{key:"triggerSuggest",value:function(e,t,i){this.editor.hasModel()&&(this.model.trigger({auto:null!==t&&void 0!==t&&t,completionOptions:{providerFilter:e,kindFilter:i?new Set:void 0}}),this.editor.revealPosition(this.editor.getPosition(),0),this.editor.focus())}},{key:"triggerSuggestAndAcceptBest",value:function(e){var t=this;if(this.editor.hasModel()){var i=this.editor.getPosition(),n=function(){i.equals(t.editor.getPosition())&&t._commandService.executeCommand(e.fallback)};f.ju.once(this.model.onDidTrigger)((function(e){var i=[];f.ju.any(t.model.onDidTrigger,t.model.onDidCancel)((function(){(0,m.B9)(i),n()}),void 0,i),t.model.onDidSuggest((function(e){var o=e.completionModel;if((0,m.B9)(i),0!==o.items.length){var r=t._memoryService.select(t.editor.getModel(),t.editor.getPosition(),o.items),s=o.items[r];!function(e){if(4&e.completion.insertTextRules||e.completion.additionalTextEdits)return!0;var i=t.editor.getPosition(),n=e.editStart.column,o=i.column;return o-n!==e.completion.insertText.length||t.editor.getModel().getValueInRange({startLineNumber:i.lineNumber,startColumn:n,endLineNumber:i.lineNumber,endColumn:o})!==e.completion.insertText}(s)?n():(t.editor.pushUndoStop(),t._insertSuggestion({index:r,item:s,model:o},7))}else n()}),void 0,i)})),this.model.trigger({auto:!1,shy:!0}),this.editor.revealPosition(i,0),this.editor.focus()}}},{key:"acceptSelectedSuggestion",value:function(e,t){var i=this.widget.value.getFocusedItem(),n=0;e&&(n|=4),t&&(n|=8),this._insertSuggestion(i,n)}},{key:"acceptNextSuggestion",value:function(){this._alternatives.value.next()}},{key:"acceptPrevSuggestion",value:function(){this._alternatives.value.prev()}},{key:"cancelSuggestWidget",value:function(){this.model.cancel(),this.model.clear(),this.widget.value.hideWidget()}},{key:"focusSuggestion",value:function(){this.widget.value.focusSelected()}},{key:"selectNextSuggestion",value:function(){this.widget.value.selectNext()}},{key:"selectNextPageSuggestion",value:function(){this.widget.value.selectNextPage()}},{key:"selectLastSuggestion",value:function(){this.widget.value.selectLast()}},{key:"selectPrevSuggestion",value:function(){this.widget.value.selectPrevious()}},{key:"selectPrevPageSuggestion",value:function(){this.widget.value.selectPreviousPage()}},{key:"selectFirstSuggestion",value:function(){this.widget.value.selectFirst()}},{key:"toggleSuggestionDetails",value:function(){this.widget.value.toggleDetails()}},{key:"toggleExplainMode",value:function(){this.widget.value.toggleExplainMode()}},{key:"toggleSuggestionFocus",value:function(){this.widget.value.toggleDetailsFocus()}},{key:"resetWidgetSize",value:function(){this.widget.value.resetPersistedSize()}},{key:"forceRenderingAbove",value:function(){this.widget.value.forceRenderingAbove()}},{key:"stopForceRenderingAbove",value:function(){this.widget.isInitialized&&this.widget.value.stopForceRenderingAbove()}},{key:"registerSelector",value:function(e){return this._selectors.register(e)}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();ht.ID="editor.contrib.suggestController",ht=ct([dt(1,I.Fh),dt(2,F.H),dt(3,N.i6),dt(4,O.TG),dt(5,R.VZ),dt(6,J.b)],ht);var gt=function(){function e(t){(0,a.Z)(this,e),this.prioritySelector=t,this._items=new Array}return(0,l.Z)(e,[{key:"register",value:function(e){var t=this;if(-1!==this._items.indexOf(e))throw new Error("Value is already registered");return this._items.push(e),this._items.sort((function(e,i){return t.prioritySelector(i)-t.prioritySelector(e)})),{dispose:function(){var i=t._items.indexOf(e);i>=0&&t._items.splice(i,1)}}}},{key:"itemsOrderedByPriorityDesc",get:function(){return this._items}}]),e}(),ft=function(e){(0,n.Z)(i,e);var t=(0,o.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,{id:i.id,label:M.NC("suggest.trigger.label","Trigger Suggest"),alias:"Trigger Suggest",precondition:N.Ao.and(x.u.writable,x.u.hasCompletionItemProvider,A._y.Visible.toNegated()),kbOpts:{kbExpr:x.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[521,2087]},weight:100}})}return(0,l.Z)(i,[{key:"run",value:function(e,t,i){var n,o=ht.get(t);o&&(i&&"object"===typeof i&&!0===i.auto&&(n=!0),o.triggerSuggest(void 0,n,void 0))}}]),i}(S.R6);ft.id="editor.action.triggerSuggest",(0,S._K)(ht.ID,ht,2),(0,S.Qr)(ft);var pt=190,mt=S._l.bindToContribution(ht.get);(0,S.fK)(new mt({id:"acceptSelectedSuggestion",precondition:N.Ao.and(A._y.Visible,A._y.HasFocusedSuggestion),handler:function(e){e.acceptSelectedSuggestion(!0,!1)},kbOpts:[{primary:2,kbExpr:N.Ao.and(A._y.Visible,x.u.textInputFocus),weight:pt},{primary:3,kbExpr:N.Ao.and(A._y.Visible,x.u.textInputFocus,A._y.AcceptSuggestionsOnEnter,A._y.MakesTextEdit),weight:pt}],menuOpts:[{menuId:A.GI,title:M.NC("accept.insert","Insert"),group:"left",order:1,when:A._y.HasInsertAndReplaceRange.toNegated()},{menuId:A.GI,title:M.NC("accept.insert","Insert"),group:"left",order:1,when:N.Ao.and(A._y.HasInsertAndReplaceRange,A._y.InsertMode.isEqualTo("insert"))},{menuId:A.GI,title:M.NC("accept.replace","Replace"),group:"left",order:1,when:N.Ao.and(A._y.HasInsertAndReplaceRange,A._y.InsertMode.isEqualTo("replace"))}]})),(0,S.fK)(new mt({id:"acceptAlternativeSelectedSuggestion",precondition:N.Ao.and(A._y.Visible,x.u.textInputFocus,A._y.HasFocusedSuggestion),kbOpts:{weight:pt,kbExpr:x.u.textInputFocus,primary:1027,secondary:[1026]},handler:function(e){e.acceptSelectedSuggestion(!1,!0)},menuOpts:[{menuId:A.GI,group:"left",order:2,when:N.Ao.and(A._y.HasInsertAndReplaceRange,A._y.InsertMode.isEqualTo("insert")),title:M.NC("accept.replace","Replace")},{menuId:A.GI,group:"left",order:2,when:N.Ao.and(A._y.HasInsertAndReplaceRange,A._y.InsertMode.isEqualTo("replace")),title:M.NC("accept.insert","Insert")}]})),F.P.registerCommandAlias("acceptSelectedSuggestionOnEnter","acceptSelectedSuggestion"),(0,S.fK)(new mt({id:"hideSuggestWidget",precondition:A._y.Visible,handler:function(e){return e.cancelSuggestWidget()},kbOpts:{weight:pt,kbExpr:x.u.textInputFocus,primary:9,secondary:[1033]}})),(0,S.fK)(new mt({id:"selectNextSuggestion",precondition:N.Ao.and(A._y.Visible,N.Ao.or(A._y.MultipleSuggestions,A._y.HasFocusedSuggestion.negate())),handler:function(e){return e.selectNextSuggestion()},kbOpts:{weight:pt,kbExpr:x.u.textInputFocus,primary:18,secondary:[2066],mac:{primary:18,secondary:[2066,300]}}})),(0,S.fK)(new mt({id:"selectNextPageSuggestion",precondition:N.Ao.and(A._y.Visible,N.Ao.or(A._y.MultipleSuggestions,A._y.HasFocusedSuggestion.negate())),handler:function(e){return e.selectNextPageSuggestion()},kbOpts:{weight:pt,kbExpr:x.u.textInputFocus,primary:12,secondary:[2060]}})),(0,S.fK)(new mt({id:"selectLastSuggestion",precondition:N.Ao.and(A._y.Visible,N.Ao.or(A._y.MultipleSuggestions,A._y.HasFocusedSuggestion.negate())),handler:function(e){return e.selectLastSuggestion()}})),(0,S.fK)(new mt({id:"selectPrevSuggestion",precondition:N.Ao.and(A._y.Visible,N.Ao.or(A._y.MultipleSuggestions,A._y.HasFocusedSuggestion.negate())),handler:function(e){return e.selectPrevSuggestion()},kbOpts:{weight:pt,kbExpr:x.u.textInputFocus,primary:16,secondary:[2064],mac:{primary:16,secondary:[2064,302]}}})),(0,S.fK)(new mt({id:"selectPrevPageSuggestion",precondition:N.Ao.and(A._y.Visible,N.Ao.or(A._y.MultipleSuggestions,A._y.HasFocusedSuggestion.negate())),handler:function(e){return e.selectPrevPageSuggestion()},kbOpts:{weight:pt,kbExpr:x.u.textInputFocus,primary:11,secondary:[2059]}})),(0,S.fK)(new mt({id:"selectFirstSuggestion",precondition:N.Ao.and(A._y.Visible,N.Ao.or(A._y.MultipleSuggestions,A._y.HasFocusedSuggestion.negate())),handler:function(e){return e.selectFirstSuggestion()}})),(0,S.fK)(new mt({id:"focusSuggestion",precondition:N.Ao.and(A._y.Visible,A._y.HasFocusedSuggestion.negate()),handler:function(e){return e.focusSuggestion()},kbOpts:{weight:pt,kbExpr:x.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}}})),(0,S.fK)(new mt({id:"focusAndAcceptSuggestion",precondition:N.Ao.and(A._y.Visible,A._y.HasFocusedSuggestion.negate()),handler:function(e){e.focusSuggestion(),e.acceptSelectedSuggestion(!0,!1)}})),(0,S.fK)(new mt({id:"toggleSuggestionDetails",precondition:N.Ao.and(A._y.Visible,A._y.HasFocusedSuggestion),handler:function(e){return e.toggleSuggestionDetails()},kbOpts:{weight:pt,kbExpr:x.u.textInputFocus,primary:2058,secondary:[2087],mac:{primary:266,secondary:[2087]}},menuOpts:[{menuId:A.GI,group:"right",order:1,when:N.Ao.and(A._y.DetailsVisible,A._y.CanResolve),title:M.NC("detail.more","show less")},{menuId:A.GI,group:"right",order:1,when:N.Ao.and(A._y.DetailsVisible.toNegated(),A._y.CanResolve),title:M.NC("detail.less","show more")}]})),(0,S.fK)(new mt({id:"toggleExplainMode",precondition:A._y.Visible,handler:function(e){return e.toggleExplainMode()},kbOpts:{weight:100,primary:2138}})),(0,S.fK)(new mt({id:"toggleSuggestionFocus",precondition:A._y.Visible,handler:function(e){return e.toggleSuggestionFocus()},kbOpts:{weight:pt,kbExpr:x.u.textInputFocus,primary:2570,mac:{primary:778}}})),(0,S.fK)(new mt({id:"insertBestCompletion",precondition:N.Ao.and(x.u.textInputFocus,N.Ao.equals("config.editor.tabCompletion","on"),P.AtEnd,A._y.Visible.toNegated(),W.OtherSuggestions.toNegated(),D.SnippetController2.InSnippetMode.toNegated()),handler:function(e,t){e.triggerSuggestAndAcceptBest((0,y.Kn)(t)?Object.assign({fallback:"tab"},t):{fallback:"tab"})},kbOpts:{weight:pt,primary:2}})),(0,S.fK)(new mt({id:"insertNextSuggestion",precondition:N.Ao.and(x.u.textInputFocus,N.Ao.equals("config.editor.tabCompletion","on"),W.OtherSuggestions,A._y.Visible.toNegated(),D.SnippetController2.InSnippetMode.toNegated()),handler:function(e){return e.acceptNextSuggestion()},kbOpts:{weight:pt,kbExpr:x.u.textInputFocus,primary:2}})),(0,S.fK)(new mt({id:"insertPrevSuggestion",precondition:N.Ao.and(x.u.textInputFocus,N.Ao.equals("config.editor.tabCompletion","on"),W.OtherSuggestions,A._y.Visible.toNegated(),D.SnippetController2.InSnippetMode.toNegated()),handler:function(e){return e.acceptPrevSuggestion()},kbOpts:{weight:pt,kbExpr:x.u.textInputFocus,primary:1026}})),(0,S.Qr)(function(e){(0,n.Z)(i,e);var t=(0,o.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,{id:"editor.action.resetSuggestSize",label:M.NC("suggest.reset.label","Reset Suggest Widget Size"),alias:"Reset Suggest Widget Size",precondition:void 0})}return(0,l.Z)(i,[{key:"run",value:function(e,t){var i;null===(i=ht.get(t))||void 0===i||i.resetWidgetSize()}}]),i}(S.R6))},52650:function(e,t,i){i.r(t),i.d(t,{SuggestInlineCompletions:function(){return I}});var n=i(74165),o=i(37762),r=i(60136),s=i(27277),a=i(43144),l=i(15671),c=i(7388),d=i(21973),u=i(12928),h=i(65096),g=i(95253),f=i(76257),p=i(17429),m=i(65441),v=i(47799),_=i(51211),y=i(11522),b=i(53459),S=i(76344),k=i(64606),w=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},C=function(e,t){return function(i,n){t(i,n,e)}},x=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},D=(0,a.Z)((function e(t,i,n,o,r,s){(0,l.Z)(this,e),this.range=t,this.insertText=i,this.filterText=n,this.additionalTextEdits=o,this.command=r,this.completion=s})),L=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(e,n,o,r,s,a){var c;return(0,l.Z)(this,i),(c=t.call(this,s.disposable)).model=e,c.line=n,c.word=o,c.completionModel=r,c._suggestMemoryService=a,c}return(0,a.Z)(i,[{key:"canBeReused",value:function(e,t,i){return this.model===e&&this.line===t&&this.word.word.length>0&&this.word.startColumn===i.startColumn&&this.word.endColumn<i.endColumn&&0===this.completionModel.getIncompleteProvider().size}},{key:"items",get:function(){var e,t,i=[],n=this.completionModel.items,r=this._suggestMemoryService.select(this.model,{lineNumber:this.line,column:this.word.endColumn+this.completionModel.lineContext.characterCountDelta},n),s=u.$.slice(n,r),a=u.$.slice(n,0,r),l=5,h=(0,o.Z)(u.$.concat(s,a));try{for(h.s();!(t=h.n()).done;){var g=t.value;if(g.score!==d.CL.Default){var f=new p.e(g.editStart.lineNumber,g.editStart.column,g.editInsertEnd.lineNumber,g.editInsertEnd.column+this.completionModel.lineContext.characterCountDelta),m=g.completion.insertTextRules&&4&g.completion.insertTextRules?{snippet:g.completion.insertText}:g.completion.insertText;i.push(new D(f,m,null!==(e=g.filterTextLow)&&void 0!==e?e:g.labelLow,g.completion.additionalTextEdits,g.completion.command,g)),l-- >=0&&g.resolve(c.T.None)}}}catch(v){h.e(v)}finally{h.f()}return i}}]),i}(h.L6);L=w([C(5,y.Fh)],L);var I=function(){function e(t,i,n,o){(0,l.Z)(this,e),this._getEditorOption=t,this._languageFeatureService=i,this._clipboardService=n,this._suggestMemoryService=o}return(0,a.Z)(e,[{key:"provideInlineCompletions",value:function(e,t,i,o){var r;return x(this,void 0,void 0,(0,n.Z)().mark((function s(){var a,l,c,d,u,h,g,f,m,y,S;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!i.selectedSuggestionInfo){n.next=2;break}return n.abrupt("return");case 2:if(a=this._getEditorOption(87,e),!_.tG.isAllOff(a)){n.next=5;break}return n.abrupt("return");case 5:if(e.tokenization.tokenizeIfCheap(t.lineNumber),l=e.tokenization.getLineTokens(t.lineNumber),c=l.getStandardTokenType(l.findTokenIndexAtOffset(Math.max(t.column-1-1,0))),"inline"===_.tG.valueFor(a,c)){n.next=10;break}return n.abrupt("return",void 0);case 10:if((null===(d=e.getWordAtPosition(t))||void 0===d?void 0:d.word)||(u=this._getTriggerCharacterInfo(e,t)),(null===d||void 0===d?void 0:d.word)||u){n.next=14;break}return n.abrupt("return");case 14:if(d||(d=e.getWordUntilPosition(t)),d.endColumn===t.column){n.next=17;break}return n.abrupt("return");case 17:if(g=e.getValueInRange(new p.e(t.lineNumber,1,t.lineNumber,t.column)),u||!(null===(r=this._lastResult)||void 0===r?void 0:r.canBeReused(e,t.lineNumber,d))){n.next=25;break}f=new v.t(g,t.column-this._lastResult.word.endColumn),this._lastResult.completionModel.lineContext=f,this._lastResult.acquire(),h=this._lastResult,n.next=34;break;case 25:return n.next=27,(0,_.kL)(this._languageFeatureService.completionProvider,e,t,new _.A9(void 0,void 0,null===u||void 0===u?void 0:u.providers),u&&{triggerKind:1,triggerCharacter:u.ch},o);case 27:if(!(m=n.sent).needsClipboard){n.next=32;break}return n.next=31,this._clipboardService.readText();case 31:y=n.sent;case 32:S=new v._(m.items,t.column,new v.t(g,0),b.K.None,this._getEditorOption(116,e),this._getEditorOption(110,e),{boostFullMatch:!1,firstMatchCanBeWeak:!1},y),h=new L(e,t.lineNumber,d,S,m,this._suggestMemoryService);case 34:return this._lastResult=h,n.abrupt("return",h);case 36:case"end":return n.stop()}}),s,this)})))}},{key:"handleItemDidShow",value:function(e,t){t.completion.resolve(c.T.None)}},{key:"freeInlineCompletions",value:function(e){e.release()}},{key:"_getTriggerCharacterInfo",value:function(e,t){var i,n,r=e.getValueInRange(p.e.fromPositions({lineNumber:t.lineNumber,column:t.column-1},t)),s=new Set,a=(0,o.Z)(this._languageFeatureService.completionProvider.all(e));try{for(a.s();!(n=a.n()).done;){var l=n.value;(null===(i=l.triggerCharacters)||void 0===i?void 0:i.includes(r))&&s.add(l)}}catch(c){a.e(c)}finally{a.f()}if(0!==s.size)return{providers:s,ch:r}}}]),e}();I=w([C(1,m.p),C(2,S.p),C(3,y.Fh)],I);var N=function(){function e(t,i,n,o){if((0,l.Z)(this,e),1===++e._counter){var r=o.createInstance(I,(function(e,i){var o;return(null!==(o=n.listCodeEditors().find((function(e){return e.getModel()===i})))&&void 0!==o?o:t).getOption(e)}));e._disposable=i.inlineCompletionsProvider.register("*",r)}}return(0,a.Z)(e,[{key:"dispose",value:function(){var t;0===--e._counter&&(null===(t=e._disposable)||void 0===t||t.dispose(),e._disposable=void 0)}}]),e}();N._counter=0,N=w([C(1,m.p),C(2,f.$),C(3,k.TG)],N),(0,g._K)("suggest.inlineCompletionsProvider",N,0)},11522:function(e,t,i){i.d(t,{Fh:function(){return L}});var n=i(29439),o=i(37762),r=i(11752),s=i(61120),a=i(60136),l=i(27277),c=i(15671),d=i(43144),u=i(71049),h=i(65096),g=i(29413),f=i(29976),p=i(70133),m=i(77819),v=i(57832),_=i(64606),y=i(88463),b=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},S=function(e,t){return function(i,n){t(i,n,e)}},k=function(){function e(t){(0,c.Z)(this,e),this.name=t}return(0,d.Z)(e,[{key:"select",value:function(e,t,i){if(0===i.length)return 0;for(var n=i[0].score[0],o=0;o<i.length;o++){var r=i[o],s=r.score,a=r.completion;if(s[0]!==n)break;if(a.preselect)return o}return 0}}]),e}(),w=function(e){(0,a.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,c.Z)(this,i),t.call(this,"first")}return(0,d.Z)(i,[{key:"memorize",value:function(e,t,i){}},{key:"toJSON",value:function(){}},{key:"fromJSON",value:function(){}}]),i}(k),C=function(e){(0,a.Z)(i,e);var t=(0,l.Z)(i);function i(){var e;return(0,c.Z)(this,i),(e=t.call(this,"recentlyUsed"))._cache=new g.z6(300,.66),e._seq=0,e}return(0,d.Z)(i,[{key:"memorize",value:function(e,t,i){var n="".concat(e.getLanguageId(),"/").concat(i.textLabel);this._cache.set(n,{touch:this._seq++,type:i.completion.kind,insertText:i.completion.insertText})}},{key:"select",value:function(e,t,n){if(0===n.length)return 0;var o=e.getLineContent(t.lineNumber).substr(t.column-10,t.column-1);if(/\s$/.test(o))return(0,r.Z)((0,s.Z)(i.prototype),"select",this).call(this,e,t,n);for(var a=n[0].score[0],l=-1,c=-1,d=-1,u=0;u<n.length&&n[u].score[0]===a;u++){var h="".concat(e.getLanguageId(),"/").concat(n[u].textLabel),g=this._cache.peek(h);if(g&&g.touch>d&&g.type===n[u].completion.kind&&g.insertText===n[u].completion.insertText&&(d=g.touch,c=u),n[u].completion.preselect&&-1===l)return u}return-1!==c?c:-1!==l?l:0}},{key:"toJSON",value:function(){return this._cache.toJSON()}},{key:"fromJSON",value:function(e){this._cache.clear();var t,i=(0,o.Z)(e);try{for(i.s();!(t=i.n()).done;){var r=(0,n.Z)(t.value,2),s=r[0],a=r[1];a.touch=0,a.type="number"===typeof a.type?a.type:p.gX.fromString(a.type),this._cache.set(s,a)}}catch(l){i.e(l)}finally{i.f()}this._seq=this._cache.size}}]),i}(k),x=function(e){(0,a.Z)(i,e);var t=(0,l.Z)(i);function i(){var e;return(0,c.Z)(this,i),(e=t.call(this,"recentlyUsedByPrefix"))._trie=f.Id.forStrings(),e._seq=0,e}return(0,d.Z)(i,[{key:"memorize",value:function(e,t,i){var n=e.getWordUntilPosition(t).word,o="".concat(e.getLanguageId(),"/").concat(n);this._trie.set(o,{type:i.completion.kind,insertText:i.completion.insertText,touch:this._seq++})}},{key:"select",value:function(e,t,n){var o=e.getWordUntilPosition(t).word;if(!o)return(0,r.Z)((0,s.Z)(i.prototype),"select",this).call(this,e,t,n);var a="".concat(e.getLanguageId(),"/").concat(o),l=this._trie.get(a);if(l||(l=this._trie.findSubstr(a)),l)for(var c=0;c<n.length;c++){var d=n[c].completion,u=d.kind,h=d.insertText;if(u===l.type&&h===l.insertText)return c}return(0,r.Z)((0,s.Z)(i.prototype),"select",this).call(this,e,t,n)}},{key:"toJSON",value:function(){var e=[];return this._trie.forEach((function(t,i){return e.push([i,t])})),e.sort((function(e,t){return-(e[1].touch-t[1].touch)})).forEach((function(e,t){return e[1].touch=t})),e.slice(0,200)}},{key:"fromJSON",value:function(e){if(this._trie.clear(),e.length>0){this._seq=e[0][1].touch+1;var t,i=(0,o.Z)(e);try{for(i.s();!(t=i.n()).done;){var r=(0,n.Z)(t.value,2),s=r[0],a=r[1];a.type="number"===typeof a.type?a.type:p.gX.fromString(a.type),this._trie.set(s,a)}}catch(l){i.e(l)}finally{i.f()}}}}]),i}(k),D=function(){function e(t,i){var n=this;(0,c.Z)(this,e),this._storageService=t,this._configService=i,this._disposables=new h.SL,this._persistSoon=new u.pY((function(){return n._saveState()}),500),this._disposables.add(t.onWillSaveState((function(e){e.reason===y.fk.SHUTDOWN&&n._saveState()})))}return(0,d.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._persistSoon.dispose()}},{key:"memorize",value:function(e,t,i){this._withStrategy(e,t).memorize(e,t,i),this._persistSoon.schedule()}},{key:"select",value:function(e,t,i){return this._withStrategy(e,t).select(e,t,i)}},{key:"_withStrategy",value:function(t,i){var n,o=this._configService.getValue("editor.suggestSelection",{overrideIdentifier:t.getLanguageIdAtPosition(i.lineNumber,i.column),resource:t.uri});if((null===(n=this._strategy)||void 0===n?void 0:n.name)!==o){this._saveState();var r=e._strategyCtors.get(o)||w;this._strategy=new r;try{var s=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,a=this._storageService.get("".concat(e._storagePrefix,"/").concat(o),s);a&&this._strategy.fromJSON(JSON.parse(a))}catch(l){}}return this._strategy}},{key:"_saveState",value:function(){if(this._strategy){var t=this._configService.getValue("editor.suggest.shareSuggestSelections")?0:1,i=JSON.stringify(this._strategy);this._storageService.store("".concat(e._storagePrefix,"/").concat(this._strategy.name),i,t,1)}}}]),e}();D._strategyCtors=new Map([["recentlyUsedByPrefix",x],["recentlyUsed",C],["first",w]]),D._storagePrefix="suggest/memories",D=b([S(0,y.Uy),S(1,m.Ui)],D);var L=(0,_.yh)("ISuggestMemories");(0,v.z)(L,D,1)},53459:function(e,t,i){i.d(t,{K:function(){return f}});var n=i(74165),o=i(37762),r=i(60136),s=i(27277),a=i(29439),l=i(15671),c=i(43144),d=i(38102),u=i(17429),h=i(99344),g=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},f=function(){function e(){(0,l.Z)(this,e)}return(0,c.Z)(e,null,[{key:"create",value:function(t,i){return g(this,void 0,void 0,(0,n.Z)().mark((function g(){var f,p,m,v,_,y,b;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i.getOption(116).localityBonus){n.next=2;break}return n.abrupt("return",e.None);case 2:if(i.hasModel()){n.next=4;break}return n.abrupt("return",e.None);case 4:if(f=i.getModel(),p=i.getPosition(),t.canComputeWordRanges(f.uri)){n.next=8;break}return n.abrupt("return",e.None);case 8:return n.next=10,(new h.x).provideSelectionRanges(f,[p]);case 10:if(m=n.sent,v=(0,a.Z)(m,1),0!==(_=v[0]).length){n.next=15;break}return n.abrupt("return",e.None);case 15:return n.next=17,t.computeWordRanges(f.uri,_[0].range);case 17:if(y=n.sent){n.next=20;break}return n.abrupt("return",e.None);case 20:return b=f.getWordUntilPosition(p),delete y[b.word],n.abrupt("return",new(function(e){(0,r.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,c.Z)(n,[{key:"distance",value:function(e,t){if(!p.equals(i.getPosition()))return 0;if(17===t.kind)return 2<<20;var n="string"===typeof t.label?t.label:t.label.label,r=y[n];if((0,d.XY)(r))return 2<<20;var s,a=(0,d.ry)(r,u.e.fromPositions(e),u.e.compareRangesUsingStarts),l=a>=0?r[a]:r[Math.max(0,~a-1)],c=_.length,h=(0,o.Z)(_);try{for(h.s();!(s=h.n()).done;){var g=s.value;if(!u.e.containsRange(g.range,l))break;c-=1}}catch(f){h.e(f)}finally{h.f()}return c}}]),n}(e)));case 23:case"end":return n.stop()}}),g)})))}}]),e}();f.None=new(function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,l.Z)(this,i),t.apply(this,arguments)}return(0,c.Z)(i,[{key:"distance",value:function(){return 0}}]),i}(f))},63220:function(e,t,i){var n=i(18420),o=i(43980);(0,o.P6G)("symbolIcon.arrayForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.arrayForeground","The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.booleanForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.booleanForeground","The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.classForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,n.NC)("symbolIcon.classForeground","The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.colorForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.colorForeground","The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.constantForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.constantForeground","The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.constructorForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,n.NC)("symbolIcon.constructorForeground","The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.enumeratorForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,n.NC)("symbolIcon.enumeratorForeground","The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.enumeratorMemberForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,n.NC)("symbolIcon.enumeratorMemberForeground","The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.eventForeground",{dark:"#EE9D28",light:"#D67E00",hcDark:"#EE9D28",hcLight:"#D67E00"},(0,n.NC)("symbolIcon.eventForeground","The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.fieldForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,n.NC)("symbolIcon.fieldForeground","The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.fileForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.fileForeground","The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.folderForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.folderForeground","The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.functionForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,n.NC)("symbolIcon.functionForeground","The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.interfaceForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,n.NC)("symbolIcon.interfaceForeground","The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.keyForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.keyForeground","The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.keywordForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.keywordForeground","The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.methodForeground",{dark:"#B180D7",light:"#652D90",hcDark:"#B180D7",hcLight:"#652D90"},(0,n.NC)("symbolIcon.methodForeground","The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.moduleForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.moduleForeground","The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.namespaceForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.namespaceForeground","The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.nullForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.nullForeground","The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.numberForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.numberForeground","The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.objectForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.objectForeground","The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.operatorForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.operatorForeground","The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.packageForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.packageForeground","The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.propertyForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.propertyForeground","The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.referenceForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.referenceForeground","The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.snippetForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.snippetForeground","The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.stringForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.stringForeground","The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.structForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.structForeground","The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.textForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.textForeground","The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.typeParameterForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.typeParameterForeground","The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.unitForeground",{dark:o.dRz,light:o.dRz,hcDark:o.dRz,hcLight:o.dRz},(0,n.NC)("symbolIcon.unitForeground","The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.")),(0,o.P6G)("symbolIcon.variableForeground",{dark:"#75BEFF",light:"#007ACC",hcDark:"#75BEFF",hcLight:"#007ACC"},(0,n.NC)("symbolIcon.variableForeground","The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget."))},20857:function(e,t,i){i.r(t),i.d(t,{ToggleTabFocusModeAction:function(){return h}});var n=i(15671),o=i(43144),r=i(60136),s=i(27277),a=i(61841),l=i(86128),c=i(18420),d=i(14443),u=i(8022),h=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,n.Z)(this,i),t.call(this,{id:i.ID,title:{value:c.NC({key:"toggle.tabMovesFocus",comment:["Turn on/off use of tab key for moving focus around VS Code"]},"Toggle Tab Key Moves Focus"),original:"Toggle Tab Key Moves Focus"},precondition:void 0,keybinding:{primary:2091,mac:{primary:1323},weight:100},f1:!0})}return(0,o.Z)(i,[{key:"run",value:function(e){var t="terminal"===e.get(u.i6).getContextKeyValue("focusedView")?"terminalFocus":"editorFocus",i=!l.n.getTabFocusMode(t);l.n.setTabFocusMode(i,t),i?(0,a.Z9)(c.NC("toggle.tabMovesFocus.on","Pressing Tab will now move focus to the next focusable element")):(0,a.Z9)(c.NC("toggle.tabMovesFocus.off","Pressing Tab will now insert the tab character"))}}]),i}(d.Ke);h.ID="editor.action.toggleTabFocusMode",(0,d.r1)(h)},28842:function(e,t,i){i.r(t);var n=i(15671),o=i(43144),r=i(60136),s=i(27277),a=i(48497),l=i(95253),c=i(18420),d=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,n.Z)(this,i),t.call(this,{id:"editor.action.forceRetokenize",label:c.NC("forceRetokenize","Developer: Force Retokenize"),alias:"Developer: Force Retokenize",precondition:void 0})}return(0,o.Z)(i,[{key:"run",value:function(e,t){if(t.hasModel()){var i=t.getModel();i.tokenization.resetTokenization();var n=new a.G;i.tokenization.forceTokenization(i.getLineCount()),n.stop(),console.log("tokenization took ".concat(n.elapsed()))}}}]),i}(l.R6);(0,l.Qr)(d)},82801:function(e,t,i){i.r(t),i.d(t,{DisableHighlightingInCommentsAction:function(){return te},DisableHighlightingInStringsAction:function(){return ie},DisableHighlightingOfAmbiguousCharactersAction:function(){return ne},DisableHighlightingOfInvisibleCharactersAction:function(){return oe},DisableHighlightingOfNonBasicAsciiCharactersAction:function(){return re},ShowExcludeOptions:function(){return se},UnicodeHighlighter:function(){return j},UnicodeHighlighterHoverParticipant:function(){return Q},warningIcon:function(){return U}});var n=i(74165),o=i(37762),r=i(15671),s=i(43144),a=i(11752),l=i(61120),c=i(60136),d=i(27277),u=i(71049),h=i(77409),g=i(71047),f=i(65096),p=i(90650),m=i(31906),v=i(95253),_=i(17683),y=i(78519),b=i(55503),S=i(88697),k=i(58188),w=i(52803),C=i(24250),x=i(80592),D=i(32959),L=i(65171),I=i(93720),N=i(38425),T=i(64606),Z=i(16137),P=i(87288),M=i(79730),F=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},O=function(e,t){return function(i,n){t(i,n,e)}},R=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n){var o;return(0,r.Z)(this,i),(o=t.call(this))._editor=e,o.instantiationService=n,o.banner=o._register(o.instantiationService.createInstance(A)),o}return(0,s.Z)(i,[{key:"hide",value:function(){this._editor.setBanner(null,0),this.banner.clear()}},{key:"show",value:function(e){var t=this;this.banner.show(Object.assign(Object.assign({},e),{onClose:function(){var i;t.hide(),null===(i=e.onClose)||void 0===i||i.call(e)}})),this._editor.setBanner(this.banner.element,26)}}]),i}(f.JT);R=F([O(1,T.TG)],R);var A=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e){var n;return(0,r.Z)(this,i),(n=t.call(this)).instantiationService=e,n.markdownRenderer=n.instantiationService.createInstance(N.$,{}),n.element=(0,D.$)("div.editor-banner"),n.element.tabIndex=0,n}return(0,s.Z)(i,[{key:"getAriaLabel",value:function(e){return e.ariaLabel?e.ariaLabel:"string"===typeof e.message?e.message:void 0}},{key:"getBannerMessage",value:function(e){if("string"===typeof e){var t=(0,D.$)("span");return t.innerText=e,t}return this.markdownRenderer.render(e).element}},{key:"clear",value:function(){(0,D.clearNode)(this.element)}},{key:"show",value:function(e){(0,D.clearNode)(this.element);var t=this.getAriaLabel(e);t&&this.element.setAttribute("aria-label",t);var i=(0,D.append)(this.element,(0,D.$)("div.icon-container"));i.setAttribute("aria-hidden","true"),e.icon&&i.appendChild((0,D.$)("div".concat(M.k.asCSSSelector(e.icon))));var n=(0,D.append)(this.element,(0,D.$)("div.message-container"));if(n.setAttribute("aria-hidden","true"),n.appendChild(this.getBannerMessage(e.message)),this.messageActionsContainer=(0,D.append)(this.element,(0,D.$)("div.message-actions-container")),e.actions){var r,s=(0,o.Z)(e.actions);try{for(s.s();!(r=s.n()).done;){var a=r.value;this._register(this.instantiationService.createInstance(Z.r,this.messageActionsContainer,Object.assign(Object.assign({},a),{tabIndex:-1}),{}))}}catch(c){s.e(c)}finally{s.f()}}var l=(0,D.append)(this.element,(0,D.$)("div.action-container"));this.actionBar=this._register(new L.o(l)),this.actionBar.push(this._register(new I.aU("banner.close","Close Banner",M.k.asClassName(P.s_),!0,(function(){"function"===typeof e.onClose&&e.onClose()}))),{icon:!0,label:!1}),this.actionBar.setFocusable(!1)}}]),i}(f.JT);A=F([O(0,T.TG)],A);var E=i(18420),z=i(77819),W=i(51713),H=i(67949),V=i(74877),B=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},G=function(e,t){return function(i,n){t(i,n,e)}},K=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},U=(0,P.q5)("extensions-warning-message",h.l.warning,E.NC("warningIcon","Icon shown with a warning message in the extensions editor.")),j=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n,o,s){var a;return(0,r.Z)(this,i),(a=t.call(this))._editor=e,a._editorWorkerService=n,a._workspaceTrustService=o,a._highlighter=null,a._bannerClosed=!1,a._updateState=function(e){if(e&&e.hasMore){if(a._bannerClosed)return;var t,i=Math.max(e.ambiguousCharacterCount,e.nonBasicAsciiCharacterCount,e.invisibleCharacterCount);if(e.nonBasicAsciiCharacterCount>=i)t={message:E.NC("unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters","This document contains many non-basic ASCII unicode characters"),command:new re};else if(e.ambiguousCharacterCount>=i)t={message:E.NC("unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters","This document contains many ambiguous unicode characters"),command:new ne};else{if(!(e.invisibleCharacterCount>=i))throw new Error("Unreachable");t={message:E.NC("unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters","This document contains many invisible unicode characters"),command:new oe}}a._bannerController.show({id:"unicodeHighlightBanner",message:t.message,icon:U,actions:[{label:t.command.shortLabel,href:"command:".concat(t.command.id)}],onClose:function(){a._bannerClosed=!0}})}else a._bannerController.hide()},a._bannerController=a._register(s.createInstance(R,e)),a._register(a._editor.onDidChangeModel((function(){a._bannerClosed=!1,a._updateHighlighter()}))),a._options=e.getOption(123),a._register(o.onDidChangeTrust((function(e){a._updateHighlighter()}))),a._register(e.onDidChangeConfiguration((function(t){t.hasChanged(123)&&(a._options=e.getOption(123),a._updateHighlighter())}))),a._updateHighlighter(),a}return(0,s.Z)(i,[{key:"dispose",value:function(){this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"_updateHighlighter",value:function(){if(this._updateState(null),this._highlighter&&(this._highlighter.dispose(),this._highlighter=null),this._editor.hasModel()){var e=function(e,t){return{nonBasicASCII:t.nonBasicASCII===_.Av?!e:t.nonBasicASCII,ambiguousCharacters:t.ambiguousCharacters,invisibleCharacters:t.invisibleCharacters,includeComments:t.includeComments===_.Av?!e:t.includeComments,includeStrings:t.includeStrings===_.Av?!e:t.includeStrings,allowedCharacters:t.allowedCharacters,allowedLocales:t.allowedLocales}}(this._workspaceTrustService.isWorkspaceTrusted(),this._options);if(![e.nonBasicASCII,e.ambiguousCharacters,e.invisibleCharacters].every((function(e){return!1===e}))){var t={nonBasicASCII:e.nonBasicASCII,ambiguousCharacters:e.ambiguousCharacters,invisibleCharacters:e.invisibleCharacters,includeComments:e.includeComments,includeStrings:e.includeStrings,allowedCodePoints:Object.keys(e.allowedCharacters).map((function(e){return e.codePointAt(0)})),allowedLocales:Object.keys(e.allowedLocales).map((function(e){return"_os"===e?(new Intl.NumberFormat).resolvedOptions().locale:"_vscode"===e?p.dK:e}))};this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)?this._highlighter=new q(this._editor,t,this._updateState,this._editorWorkerService):this._highlighter=new $(this._editor,t,this._updateState)}}}},{key:"getDecorationInfo",value:function(e){return this._highlighter?this._highlighter.getDecorationInfo(e):null}}]),i}(f.JT);j.ID="editor.contrib.unicodeHighlighter",j=B([G(1,S.p),G(2,V.Y),G(3,T.TG)],j);var q=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n,o,s){var a;return(0,r.Z)(this,i),(a=t.call(this))._editor=e,a._options=n,a._updateState=o,a._editorWorkerService=s,a._model=a._editor.getModel(),a._decorations=a._editor.createDecorationsCollection(),a._updateSoon=a._register(new u.pY((function(){return a._update()}),250)),a._register(a._editor.onDidChangeModelContent((function(){a._updateSoon.schedule()}))),a._updateSoon.schedule(),a}return(0,s.Z)(i,[{key:"dispose",value:function(){this._decorations.clear(),(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"_update",value:function(){var e=this;if(!this._model.isDisposed())if(this._model.mightContainNonBasicASCII()){var t=this._model.getVersionId();this._editorWorkerService.computedUnicodeHighlights(this._model.uri,this._options).then((function(i){if(!e._model.isDisposed()&&e._model.getVersionId()===t){e._updateState(i);var n=[];if(!i.hasMore){var r,s=(0,o.Z)(i.ranges);try{for(s.s();!(r=s.n()).done;){var a=r.value;n.push({range:a,options:ee.instance.getDecorationFromOptions(e._options)})}}catch(l){s.e(l)}finally{s.f()}}e._decorations.set(n)}}))}else this._decorations.clear()}},{key:"getDecorationInfo",value:function(e){if(!this._decorations.has(e))return null;var t=this._editor.getModel();return(0,w.Fd)(t,e)?{reason:Y(t.getValueInRange(e.range),this._options),inComment:(0,w.$t)(t,e),inString:(0,w.zg)(t,e)}:null}}]),i}(f.JT);q=B([G(3,S.p)],q);var $=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(e,n,o){var s;return(0,r.Z)(this,i),(s=t.call(this))._editor=e,s._options=n,s._updateState=o,s._model=s._editor.getModel(),s._decorations=s._editor.createDecorationsCollection(),s._updateSoon=s._register(new u.pY((function(){return s._update()}),250)),s._register(s._editor.onDidLayoutChange((function(){s._updateSoon.schedule()}))),s._register(s._editor.onDidScrollChange((function(){s._updateSoon.schedule()}))),s._register(s._editor.onDidChangeHiddenAreas((function(){s._updateSoon.schedule()}))),s._register(s._editor.onDidChangeModelContent((function(){s._updateSoon.schedule()}))),s._updateSoon.schedule(),s}return(0,s.Z)(i,[{key:"dispose",value:function(){this._decorations.clear(),(0,a.Z)((0,l.Z)(i.prototype),"dispose",this).call(this)}},{key:"_update",value:function(){if(!this._model.isDisposed())if(this._model.mightContainNonBasicASCII()){var e,t=this._editor.getVisibleRanges(),i=[],n={ranges:[],ambiguousCharacterCount:0,invisibleCharacterCount:0,nonBasicAsciiCharacterCount:0,hasMore:!1},r=(0,o.Z)(t);try{for(r.s();!(e=r.n()).done;){var s,a=e.value,l=b.a.computeUnicodeHighlights(this._model,this._options,a),c=(0,o.Z)(l.ranges);try{for(c.s();!(s=c.n()).done;){var d=s.value;n.ranges.push(d)}}catch(f){c.e(f)}finally{c.f()}n.ambiguousCharacterCount+=n.ambiguousCharacterCount,n.invisibleCharacterCount+=n.invisibleCharacterCount,n.nonBasicAsciiCharacterCount+=n.nonBasicAsciiCharacterCount,n.hasMore=n.hasMore||l.hasMore}}catch(f){r.e(f)}finally{r.f()}if(!n.hasMore){var u,h=(0,o.Z)(n.ranges);try{for(h.s();!(u=h.n()).done;){var g=u.value;i.push({range:g,options:ee.instance.getDecorationFromOptions(this._options)})}}catch(f){h.e(f)}finally{h.f()}}this._updateState(n),this._decorations.set(i)}else this._decorations.clear()}},{key:"getDecorationInfo",value:function(e){if(!this._decorations.has(e))return null;var t=this._editor.getModel(),i=t.getValueInRange(e.range);return(0,w.Fd)(t,e)?{reason:Y(i,this._options),inComment:(0,w.$t)(t,e),inString:(0,w.zg)(t,e)}:null}}]),i}(f.JT),Q=function(){function e(t,i,n){(0,r.Z)(this,e),this._editor=t,this._languageService=i,this._openerService=n,this.hoverOrdinal=5}return(0,s.Z)(e,[{key:"computeSync",value:function(e,t){if(!this._editor.hasModel()||1!==e.type)return[];var i=this._editor.getModel(),n=this._editor.getContribution(j.ID);if(!n)return[];var r,s=[],a=new Set,l=300,c=(0,o.Z)(t);try{for(c.s();!(r=c.n()).done;){var d=r.value,u=n.getDecorationInfo(d);if(u){var h=i.getValueInRange(d.range).codePointAt(0),f=X(h),p=void 0;switch(u.reason.kind){case 0:p=(0,m.$i)(u.reason.confusableWith)?E.NC("unicodeHighlight.characterIsAmbiguousASCII","The character {0} could be confused with the ASCII character {1}, which is more common in source code.",f,X(u.reason.confusableWith.codePointAt(0))):E.NC("unicodeHighlight.characterIsAmbiguous","The character {0} could be confused with the character {1}, which is more common in source code.",f,X(u.reason.confusableWith.codePointAt(0)));break;case 1:p=E.NC("unicodeHighlight.characterIsInvisible","The character {0} is invisible.",f);break;case 2:p=E.NC("unicodeHighlight.characterIsNonBasicAscii","The character {0} is not a basic ASCII character.",f)}if(!a.has(p)){a.add(p);var v={codePoint:h,reason:u.reason,inComment:u.inComment,inString:u.inString},_=E.NC("unicodeHighlight.adjustSettings","Adjust settings"),y="command:".concat(se.ID,"?").concat(encodeURIComponent(JSON.stringify(v))),b=new g.W5("",!0).appendMarkdown(p).appendText(" ").appendLink(y,_);s.push(new x.hU(this,d.range,[b],!1,l++))}}}}catch(S){c.e(S)}finally{c.f()}return s}},{key:"renderHoverParts",value:function(e,t){return(0,x.c)(e,t,this._editor,this._languageService,this._openerService)}}]),e}();function J(e){return"U+".concat(e.toString(16).padStart(4,"0"))}function X(e){var t="`".concat(J(e),"`");return m.vU.isInvisibleCharacter(e)||(t+=' "'.concat("".concat(function(e){if(96===e)return"`` ` ``";return"`"+String.fromCodePoint(e)+"`"}(e)),'"')),t}function Y(e,t){return b.a.computeUnicodeHighlightReason(e,t)}Q=B([G(1,k.O),G(2,W.v4)],Q);var ee=function(){function e(){(0,r.Z)(this,e),this.map=new Map}return(0,s.Z)(e,[{key:"getDecorationFromOptions",value:function(e){return this.getDecoration(!e.includeComments,!e.includeStrings)}},{key:"getDecoration",value:function(e,t){var i="".concat(e).concat(t),n=this.map.get(i);return n||(n=y.qx.createDynamic({description:"unicode-highlight",stickiness:1,className:"unicode-highlight",showIfCollapsed:!0,overviewRuler:null,minimap:null,hideInCommentTokens:e,hideInStringTokens:t}),this.map.set(i,n)),n}}]),e}();ee.instance=new ee;var te=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){var e;return(0,r.Z)(this,i),(e=t.call(this,{id:ne.ID,label:E.NC("action.unicodeHighlight.disableHighlightingInComments","Disable highlighting of characters in comments"),alias:"Disable highlighting of characters in comments",precondition:void 0})).shortLabel=E.NC("unicodeHighlight.disableHighlightingInComments.shortLabel","Disable Highlight In Comments"),e}return(0,s.Z)(i,[{key:"run",value:function(e,t,i){return K(this,void 0,void 0,(0,n.Z)().mark((function t(){var i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=null===e||void 0===e?void 0:e.get(z.Ui))&&this.runAction(i);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"runAction",value:function(e){return K(this,void 0,void 0,(0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateValue(_.qt.includeComments,!1,2);case 2:case"end":return t.stop()}}),t)})))}}]),i}(v.R6),ie=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){var e;return(0,r.Z)(this,i),(e=t.call(this,{id:ne.ID,label:E.NC("action.unicodeHighlight.disableHighlightingInStrings","Disable highlighting of characters in strings"),alias:"Disable highlighting of characters in strings",precondition:void 0})).shortLabel=E.NC("unicodeHighlight.disableHighlightingInStrings.shortLabel","Disable Highlight In Strings"),e}return(0,s.Z)(i,[{key:"run",value:function(e,t,i){return K(this,void 0,void 0,(0,n.Z)().mark((function t(){var i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=null===e||void 0===e?void 0:e.get(z.Ui))&&this.runAction(i);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"runAction",value:function(e){return K(this,void 0,void 0,(0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateValue(_.qt.includeStrings,!1,2);case 2:case"end":return t.stop()}}),t)})))}}]),i}(v.R6),ne=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){var e;return(0,r.Z)(this,i),(e=t.call(this,{id:i.ID,label:E.NC("action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters","Disable highlighting of ambiguous characters"),alias:"Disable highlighting of ambiguous characters",precondition:void 0})).shortLabel=E.NC("unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel","Disable Ambiguous Highlight"),e}return(0,s.Z)(i,[{key:"run",value:function(e,t,i){return K(this,void 0,void 0,(0,n.Z)().mark((function t(){var i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=null===e||void 0===e?void 0:e.get(z.Ui))&&this.runAction(i);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"runAction",value:function(e){return K(this,void 0,void 0,(0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateValue(_.qt.ambiguousCharacters,!1,2);case 2:case"end":return t.stop()}}),t)})))}}]),i}(v.R6);ne.ID="editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters";var oe=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){var e;return(0,r.Z)(this,i),(e=t.call(this,{id:i.ID,label:E.NC("action.unicodeHighlight.disableHighlightingOfInvisibleCharacters","Disable highlighting of invisible characters"),alias:"Disable highlighting of invisible characters",precondition:void 0})).shortLabel=E.NC("unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel","Disable Invisible Highlight"),e}return(0,s.Z)(i,[{key:"run",value:function(e,t,i){return K(this,void 0,void 0,(0,n.Z)().mark((function t(){var i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=null===e||void 0===e?void 0:e.get(z.Ui))&&this.runAction(i);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"runAction",value:function(e){return K(this,void 0,void 0,(0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateValue(_.qt.invisibleCharacters,!1,2);case 2:case"end":return t.stop()}}),t)})))}}]),i}(v.R6);oe.ID="editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters";var re=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){var e;return(0,r.Z)(this,i),(e=t.call(this,{id:i.ID,label:E.NC("action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters","Disable highlighting of non basic ASCII characters"),alias:"Disable highlighting of non basic ASCII characters",precondition:void 0})).shortLabel=E.NC("unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel","Disable Non ASCII Highlight"),e}return(0,s.Z)(i,[{key:"run",value:function(e,t,i){return K(this,void 0,void 0,(0,n.Z)().mark((function t(){var i;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(i=null===e||void 0===e?void 0:e.get(z.Ui))&&this.runAction(i);case 2:case"end":return t.stop()}}),t,this)})))}},{key:"runAction",value:function(e){return K(this,void 0,void 0,(0,n.Z)().mark((function t(){return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.updateValue(_.qt.nonBasicASCII,!1,2);case 2:case"end":return t.stop()}}),t)})))}}]),i}(v.R6);re.ID="editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters";var se=function(e){(0,c.Z)(i,e);var t=(0,d.Z)(i);function i(){return(0,r.Z)(this,i),t.call(this,{id:i.ID,label:E.NC("action.unicodeHighlight.showExcludeOptions","Show Exclude Options"),alias:"Show Exclude Options",precondition:void 0})}return(0,s.Z)(i,[{key:"run",value:function(e,t,i){return K(this,void 0,void 0,(0,n.Z)().mark((function t(){var r,s,a,l,c,d,u,h,g,f,p,v,_,y,b,S,k,w,C=this;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(h=function(e){return m.vU.isInvisibleCharacter(e)?E.NC("unicodeHighlight.excludeInvisibleCharFromBeingHighlighted","Exclude {0} (invisible character) from being highlighted",J(e)):E.NC("unicodeHighlight.excludeCharFromBeingHighlighted","Exclude {0} from being highlighted","".concat(J(e),' "').concat(c,'"'))},r=i.codePoint,s=i.reason,a=i.inString,l=i.inComment,c=String.fromCodePoint(r),d=e.get(H.eJ),u=e.get(z.Ui),g=[],0!==s.kind){t.next=23;break}f=(0,o.Z)(s.notAmbiguousInLocales),t.prev=8,v=(0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=p.value,g.push({label:E.NC("unicodeHighlight.allowCommonCharactersInLanguage",'Allow unicode characters that are more common in the language "{0}".',t),run:function(){return K(C,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:le(u,[t]);case 1:case"end":return e.stop()}}),e)})))}});case 2:case"end":return e.stop()}}),e)})),f.s();case 11:if((p=f.n()).done){t.next=15;break}return t.delegateYield(v(),"t0",13);case 13:t.next=11;break;case 15:t.next=20;break;case 17:t.prev=17,t.t1=t.catch(8),f.e(t.t1);case 20:return t.prev=20,f.f(),t.finish(20);case 23:return g.push({label:h(r),run:function(){return ae(u,[r])}}),l?(_=new te,g.push({label:_.label,run:function(){return K(C,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",_.runAction(u));case 1:case"end":return e.stop()}}),e)})))}})):a&&(y=new ie,g.push({label:y.label,run:function(){return K(C,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",y.runAction(u));case 1:case"end":return e.stop()}}),e)})))}})),0===s.kind?(b=new ne,g.push({label:b.label,run:function(){return K(C,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",b.runAction(u));case 1:case"end":return e.stop()}}),e)})))}})):1===s.kind?(S=new oe,g.push({label:S.label,run:function(){return K(C,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.runAction(u));case 1:case"end":return e.stop()}}),e)})))}})):2===s.kind?(k=new re,g.push({label:k.label,run:function(){return K(C,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",k.runAction(u));case 1:case"end":return e.stop()}}),e)})))}})):ce(s),t.next=28,d.pick(g,{title:E.NC("unicodeHighlight.configureUnicodeHighlightOptions","Configure Unicode Highlight Options")});case 28:if(!(w=t.sent)){t.next=32;break}return t.next=32,w.run();case 32:case"end":return t.stop()}}),t,null,[[8,17,20,23]])})))}}]),i}(v.R6);function ae(e,t){return K(this,void 0,void 0,(0,n.Z)().mark((function i(){var r,s,a,l,c;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:r=e.getValue(_.qt.allowedCharacters),s="object"===typeof r&&r?r:{},a=(0,o.Z)(t);try{for(a.s();!(l=a.n()).done;)c=l.value,s[String.fromCodePoint(c)]=!0}catch(n){a.e(n)}finally{a.f()}return i.next=6,e.updateValue(_.qt.allowedCharacters,s,2);case 6:case"end":return i.stop()}}),i)})))}function le(e,t){var i;return K(this,void 0,void 0,(0,n.Z)().mark((function r(){var s,a,l,c,d;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:s=null===(i=e.inspect(_.qt.allowedLocales).user)||void 0===i?void 0:i.value,a="object"===typeof s&&s?Object.assign({},s):{},l=(0,o.Z)(t);try{for(l.s();!(c=l.n()).done;)d=c.value,a[d]=!0}catch(r){l.e(r)}finally{l.f()}return n.next=6,e.updateValue(_.qt.allowedLocales,a,2);case 6:case"end":return n.stop()}}),r)})))}function ce(e){throw new Error("Unexpected value: ".concat(e))}se.ID="editor.action.unicodeHighlight.showExcludeOptions",(0,v.Qr)(ne),(0,v.Qr)(oe),(0,v.Qr)(re),(0,v.Qr)(se),(0,v._K)(j.ID,j,1),C.Ae.register(Q)},97521:function(e,t,i){i.r(t),i.d(t,{UnusualLineTerminatorsDetector:function(){return b}});var n=i(74165),o=i(15671),r=i(43144),s=i(60136),a=i(27277),l=i(65096),c=i(44641),d=i(95253),u=i(76257),h=i(18420),g=i(10861),f=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},p=function(e,t){return function(i,n){t(i,n,e)}},m=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{l(n.next(e))}catch(t){r(t)}}function a(e){try{l(n.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}l((n=n.apply(e,t||[])).next())}))},v="ignoreUnusualLineTerminators";function _(e,t,i){e.setModelProperty(t.uri,v,i)}function y(e,t){return e.getModelProperty(t.uri,v)}var b=function(e){(0,s.Z)(i,e);var t=(0,a.Z)(i);function i(e,n,r){var s;return(0,o.Z)(this,i),(s=t.call(this))._editor=e,s._dialogService=n,s._codeEditorService=r,s._isPresentingDialog=!1,s._config=s._editor.getOption(124),s._register(s._editor.onDidChangeConfiguration((function(e){e.hasChanged(124)&&(s._config=s._editor.getOption(124),s._checkForUnusualLineTerminators())}))),s._register(s._editor.onDidChangeModel((function(){s._checkForUnusualLineTerminators()}))),s._register(s._editor.onDidChangeModelContent((function(e){e.isUndoing||s._checkForUnusualLineTerminators()}))),s._checkForUnusualLineTerminators(),s}return(0,r.Z)(i,[{key:"_checkForUnusualLineTerminators",value:function(){return m(this,void 0,void 0,(0,n.Z)().mark((function e(){var t,i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("off"!==this._config){e.next=2;break}return e.abrupt("return");case 2:if(this._editor.hasModel()){e.next=4;break}return e.abrupt("return");case 4:if((t=this._editor.getModel()).mightContainUnusualLineTerminators()){e.next=7;break}return e.abrupt("return");case 7:if(!0!==y(this._codeEditorService,t)){e.next=10;break}return e.abrupt("return");case 10:if(!this._editor.getOption(89)){e.next=12;break}return e.abrupt("return");case 12:if("auto"!==this._config){e.next=15;break}return t.removeUnusualLineTerminators(this._editor.getSelections()),e.abrupt("return");case 15:if(!this._isPresentingDialog){e.next=17;break}return e.abrupt("return");case 17:return e.prev=17,this._isPresentingDialog=!0,e.next=21,this._dialogService.confirm({title:h.NC("unusualLineTerminators.title","Unusual Line Terminators"),message:h.NC("unusualLineTerminators.message","Detected unusual line terminators"),detail:h.NC("unusualLineTerminators.detail","The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\n\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.",(0,c.EZ)(t.uri)),primaryButton:h.NC({key:"unusualLineTerminators.fix",comment:["&& denotes a mnemonic"]},"&&Remove Unusual Line Terminators"),cancelButton:h.NC("unusualLineTerminators.ignore","Ignore")});case 21:i=e.sent;case 22:return e.prev=22,this._isPresentingDialog=!1,e.finish(22);case 25:if(i.confirmed){e.next=28;break}return _(this._codeEditorService,t,!0),e.abrupt("return");case 28:t.removeUnusualLineTerminators(this._editor.getSelections());case 29:case"end":return e.stop()}}),e,this,[[17,,22,25]])})))}}]),i}(l.JT);b.ID="editor.contrib.unusualLineTerminatorsDetector",b=f([p(1,g.S),p(2,u.$)],b),(0,d._K)(b.ID,b,1)}}]);
//# sourceMappingURL=monaco-editor-vendor.93e866ba.ddeaf8e6.js.map