{"version":3,"file":"static/js/monaco-editor-vendor.93e866ba.cea6a981.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollModelProvider.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollElement.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollProvider.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollActions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollContribution.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestInlineCompletions.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js","../node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js","../node_modules/monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js","../node_modules/monaco-editor/esm/vs/editor/contrib/toggleTabFocusMode/browser/toggleTabFocusMode.js","../node_modules/monaco-editor/esm/vs/editor/contrib/tokenization/browser/tokenization.js","../node_modules/monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/bannerController.js","../node_modules/monaco-editor/esm/vs/editor/contrib/unicodeHighlighter/browser/unicodeHighlighter.js","../node_modules/monaco-editor/esm/vs/editor/contrib/unusualLineTerminators/browser/unusualLineTerminators.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { OutlineElement, OutlineGroup, OutlineModel } from '../../documentSymbols/browser/outlineModel.js';\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\nimport { FoldingController, RangesLimitReporter } from '../../folding/browser/folding.js';\nimport { SyntaxRangeProvider } from '../../folding/browser/syntaxRangeProvider.js';\nimport { IndentRangeProvider } from '../../folding/browser/indentRangeProvider.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { StickyElement, StickyModel, StickyRange } from './stickyScrollElement.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nvar ModelProvider;\n(function (ModelProvider) {\n    ModelProvider[\"OUTLINE_MODEL\"] = \"outlineModel\";\n    ModelProvider[\"FOLDING_PROVIDER_MODEL\"] = \"foldingProviderModel\";\n    ModelProvider[\"INDENTATION_MODEL\"] = \"indentationModel\";\n})(ModelProvider || (ModelProvider = {}));\nvar Status;\n(function (Status) {\n    Status[Status[\"VALID\"] = 0] = \"VALID\";\n    Status[Status[\"INVALID\"] = 1] = \"INVALID\";\n    Status[Status[\"CANCELED\"] = 2] = \"CANCELED\";\n})(Status || (Status = {}));\nexport let StickyModelProvider = class StickyModelProvider {\n    constructor(_editor, _languageConfigurationService, _languageFeaturesService, defaultModel) {\n        this._editor = _editor;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._modelProviders = [];\n        this._modelPromise = null;\n        this._updateScheduler = new Delayer(300);\n        const stickyModelFromCandidateOutlineProvider = new StickyModelFromCandidateOutlineProvider(_languageFeaturesService);\n        const stickyModelFromSyntaxFoldingProvider = new StickyModelFromCandidateSyntaxFoldingProvider(this._editor, _languageFeaturesService);\n        const stickyModelFromIndentationFoldingProvider = new StickyModelFromCandidateIndentationFoldingProvider(this._editor, _languageConfigurationService);\n        switch (defaultModel) {\n            case ModelProvider.OUTLINE_MODEL:\n                this._modelProviders.push(stickyModelFromCandidateOutlineProvider);\n                this._modelProviders.push(stickyModelFromSyntaxFoldingProvider);\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\n                break;\n            case ModelProvider.FOLDING_PROVIDER_MODEL:\n                this._modelProviders.push(stickyModelFromSyntaxFoldingProvider);\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\n                break;\n            case ModelProvider.INDENTATION_MODEL:\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\n                break;\n        }\n        this._store = new DisposableStore();\n    }\n    _cancelModelPromise() {\n        if (this._modelPromise) {\n            this._modelPromise.cancel();\n            this._modelPromise = null;\n        }\n    }\n    update(textModel, textModelVersionId, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._store.clear();\n            this._store.add({\n                dispose: () => {\n                    var _a;\n                    this._cancelModelPromise();\n                    (_a = this._updateScheduler) === null || _a === void 0 ? void 0 : _a.cancel();\n                }\n            });\n            this._cancelModelPromise();\n            return yield this._updateScheduler.trigger(() => __awaiter(this, void 0, void 0, function* () {\n                for (const modelProvider of this._modelProviders) {\n                    const { statusPromise, modelPromise } = modelProvider.computeStickyModel(textModel, textModelVersionId, token);\n                    this._modelPromise = modelPromise;\n                    const status = yield statusPromise;\n                    if (this._modelPromise !== modelPromise) {\n                        return null;\n                    }\n                    switch (status) {\n                        case Status.CANCELED:\n                            this._store.clear();\n                            return null;\n                        case Status.VALID:\n                            return modelProvider.stickyModel;\n                    }\n                }\n                return null;\n            }));\n        });\n    }\n};\nStickyModelProvider = __decorate([\n    __param(1, ILanguageConfigurationService),\n    __param(2, ILanguageFeaturesService)\n], StickyModelProvider);\nclass StickyModelCandidateProvider {\n    constructor() {\n        this._stickyModel = null;\n    }\n    get stickyModel() {\n        return this._stickyModel;\n    }\n    _invalid() {\n        this._stickyModel = null;\n        return Status.INVALID;\n    }\n    computeStickyModel(textModel, modelVersionId, token) {\n        if (token.isCancellationRequested || !this.isProviderValid(textModel)) {\n            return { statusPromise: this._invalid(), modelPromise: null };\n        }\n        const providerModelPromise = createCancelablePromise(token => this.createModelFromProvider(textModel, modelVersionId, token));\n        return {\n            statusPromise: providerModelPromise.then(providerModel => {\n                if (!this.isModelValid(providerModel)) {\n                    return this._invalid();\n                }\n                if (token.isCancellationRequested) {\n                    return Status.CANCELED;\n                }\n                this._stickyModel = this.createStickyModel(textModel, modelVersionId, token, providerModel);\n                return Status.VALID;\n            }).then(undefined, (err) => {\n                onUnexpectedError(err);\n                return Status.CANCELED;\n            }),\n            modelPromise: providerModelPromise\n        };\n    }\n    /**\n     * Method which checks whether the model returned by the provider is valid and can be used to compute a sticky model.\n     * This method by default returns true.\n     * @param model model returned by the provider\n     * @returns boolean indicating whether the model is valid\n     */\n    isModelValid(model) {\n        return true;\n    }\n    /**\n     * Method which checks whether the provider is valid before applying it to find the provider model.\n     * This method by default returns true.\n     * @param textModel text-model of the editor\n     * @returns boolean indicating whether the provider is valid\n     */\n    isProviderValid(textModel) {\n        return true;\n    }\n}\nlet StickyModelFromCandidateOutlineProvider = class StickyModelFromCandidateOutlineProvider extends StickyModelCandidateProvider {\n    constructor(_languageFeaturesService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n    }\n    createModelFromProvider(textModel, modelVersionId, token) {\n        return OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, textModel, token);\n    }\n    createStickyModel(textModel, modelVersionId, token, model) {\n        var _a;\n        const { stickyOutlineElement, providerID } = this._stickyModelFromOutlineModel(model, (_a = this._stickyModel) === null || _a === void 0 ? void 0 : _a.outlineProviderId);\n        return new StickyModel(textModel.uri, modelVersionId, stickyOutlineElement, providerID);\n    }\n    isModelValid(model) {\n        return model && model.children.size > 0;\n    }\n    _stickyModelFromOutlineModel(outlineModel, preferredProvider) {\n        let outlineElements;\n        // When several possible outline providers\n        if (Iterable.first(outlineModel.children.values()) instanceof OutlineGroup) {\n            const provider = Iterable.find(outlineModel.children.values(), outlineGroupOfModel => outlineGroupOfModel.id === preferredProvider);\n            if (provider) {\n                outlineElements = provider.children;\n            }\n            else {\n                let tempID = '';\n                let maxTotalSumOfRanges = -1;\n                let optimalOutlineGroup = undefined;\n                for (const [_key, outlineGroup] of outlineModel.children.entries()) {\n                    const totalSumRanges = this._findSumOfRangesOfGroup(outlineGroup);\n                    if (totalSumRanges > maxTotalSumOfRanges) {\n                        optimalOutlineGroup = outlineGroup;\n                        maxTotalSumOfRanges = totalSumRanges;\n                        tempID = outlineGroup.id;\n                    }\n                }\n                preferredProvider = tempID;\n                outlineElements = optimalOutlineGroup.children;\n            }\n        }\n        else {\n            outlineElements = outlineModel.children;\n        }\n        const stickyChildren = [];\n        const outlineElementsArray = Array.from(outlineElements.values()).sort((element1, element2) => {\n            const range1 = new StickyRange(element1.symbol.range.startLineNumber, element1.symbol.range.endLineNumber);\n            const range2 = new StickyRange(element2.symbol.range.startLineNumber, element2.symbol.range.endLineNumber);\n            return this._comparator(range1, range2);\n        });\n        for (const outlineElement of outlineElementsArray) {\n            stickyChildren.push(this._stickyModelFromOutlineElement(outlineElement, outlineElement.symbol.selectionRange.startLineNumber));\n        }\n        const stickyOutlineElement = new StickyElement(undefined, stickyChildren, undefined);\n        return {\n            stickyOutlineElement: stickyOutlineElement,\n            providerID: preferredProvider\n        };\n    }\n    _stickyModelFromOutlineElement(outlineElement, previousStartLine) {\n        const children = [];\n        for (const child of outlineElement.children.values()) {\n            if (child.symbol.selectionRange.startLineNumber !== child.symbol.range.endLineNumber) {\n                if (child.symbol.selectionRange.startLineNumber !== previousStartLine) {\n                    children.push(this._stickyModelFromOutlineElement(child, child.symbol.selectionRange.startLineNumber));\n                }\n                else {\n                    for (const subchild of child.children.values()) {\n                        children.push(this._stickyModelFromOutlineElement(subchild, child.symbol.selectionRange.startLineNumber));\n                    }\n                }\n            }\n        }\n        children.sort((child1, child2) => this._comparator(child1.range, child2.range));\n        const range = new StickyRange(outlineElement.symbol.selectionRange.startLineNumber, outlineElement.symbol.range.endLineNumber);\n        return new StickyElement(range, children, undefined);\n    }\n    _comparator(range1, range2) {\n        if (range1.startLineNumber !== range2.startLineNumber) {\n            return range1.startLineNumber - range2.startLineNumber;\n        }\n        else {\n            return range2.endLineNumber - range1.endLineNumber;\n        }\n    }\n    _findSumOfRangesOfGroup(outline) {\n        let res = 0;\n        for (const child of outline.children.values()) {\n            res += this._findSumOfRangesOfGroup(child);\n        }\n        if (outline instanceof OutlineElement) {\n            return res + outline.symbol.range.endLineNumber - outline.symbol.selectionRange.startLineNumber;\n        }\n        else {\n            return res;\n        }\n    }\n};\nStickyModelFromCandidateOutlineProvider = __decorate([\n    __param(0, ILanguageFeaturesService)\n], StickyModelFromCandidateOutlineProvider);\nclass StickyModelFromCandidateFoldingProvider extends StickyModelCandidateProvider {\n    constructor(editor) {\n        super();\n        this._foldingLimitReporter = new RangesLimitReporter(editor);\n    }\n    createStickyModel(textModel, modelVersionId, token, model) {\n        const foldingElement = this._fromFoldingRegions(model);\n        return new StickyModel(textModel.uri, modelVersionId, foldingElement, undefined);\n    }\n    isModelValid(model) {\n        return model !== null;\n    }\n    _fromFoldingRegions(foldingRegions) {\n        const length = foldingRegions.length;\n        const orderedStickyElements = [];\n        // The root sticky outline element\n        const stickyOutlineElement = new StickyElement(undefined, [], undefined);\n        for (let i = 0; i < length; i++) {\n            // Finding the parent index of the current range\n            const parentIndex = foldingRegions.getParentIndex(i);\n            let parentNode;\n            if (parentIndex !== -1) {\n                // Access the reference of the parent node\n                parentNode = orderedStickyElements[parentIndex];\n            }\n            else {\n                // In that case the parent node is the root node\n                parentNode = stickyOutlineElement;\n            }\n            const child = new StickyElement(new StickyRange(foldingRegions.getStartLineNumber(i), foldingRegions.getEndLineNumber(i) + 1), [], parentNode);\n            parentNode.children.push(child);\n            orderedStickyElements.push(child);\n        }\n        return stickyOutlineElement;\n    }\n}\nlet StickyModelFromCandidateIndentationFoldingProvider = class StickyModelFromCandidateIndentationFoldingProvider extends StickyModelFromCandidateFoldingProvider {\n    constructor(editor, _languageConfigurationService) {\n        super(editor);\n        this._languageConfigurationService = _languageConfigurationService;\n    }\n    createModelFromProvider(textModel, modelVersionId, token) {\n        const provider = new IndentRangeProvider(textModel, this._languageConfigurationService, this._foldingLimitReporter);\n        return provider.compute(token);\n    }\n};\nStickyModelFromCandidateIndentationFoldingProvider = __decorate([\n    __param(1, ILanguageConfigurationService)\n], StickyModelFromCandidateIndentationFoldingProvider);\nlet StickyModelFromCandidateSyntaxFoldingProvider = class StickyModelFromCandidateSyntaxFoldingProvider extends StickyModelFromCandidateFoldingProvider {\n    constructor(editor, _languageFeaturesService) {\n        super(editor);\n        this._languageFeaturesService = _languageFeaturesService;\n    }\n    isProviderValid(textModel) {\n        const selectedProviders = FoldingController.getFoldingRangeProviders(this._languageFeaturesService, textModel);\n        return selectedProviders.length > 0;\n    }\n    createModelFromProvider(textModel, modelVersionId, token) {\n        const selectedProviders = FoldingController.getFoldingRangeProviders(this._languageFeaturesService, textModel);\n        const provider = new SyntaxRangeProvider(textModel, selectedProviders, () => this.createModelFromProvider(textModel, modelVersionId, token), this._foldingLimitReporter, undefined);\n        return provider.compute(token);\n    }\n};\nStickyModelFromCandidateSyntaxFoldingProvider = __decorate([\n    __param(1, ILanguageFeaturesService)\n], StickyModelFromCandidateSyntaxFoldingProvider);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StandardMouseEvent } from '../../../../base/browser/mouseEvent.js';\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './stickyScroll.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Position } from '../../../common/core/position.js';\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nexport class StickyScrollWidgetState {\n    constructor(lineNumbers, lastLineRelativePosition) {\n        this.lineNumbers = lineNumbers;\n        this.lastLineRelativePosition = lastLineRelativePosition;\n    }\n}\nconst _ttPolicy = createTrustedTypesPolicy('stickyScrollViewLayer', { createHTML: value => value });\nexport class StickyScrollWidget extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._rootDomNode = document.createElement('div');\n        this._disposableStore = this._register(new DisposableStore());\n        this._lineNumbers = [];\n        this._lastLineRelativePosition = 0;\n        this._hoverOnLine = -1;\n        this._hoverOnColumn = -1;\n        this._layoutInfo = this._editor.getLayoutInfo();\n        this._rootDomNode = document.createElement('div');\n        this._rootDomNode.className = 'sticky-widget';\n        this._rootDomNode.classList.toggle('peek', _editor instanceof EmbeddedCodeEditorWidget);\n        this._rootDomNode.style.width = `${this._layoutInfo.width - this._layoutInfo.minimap.minimapCanvasOuterWidth - this._layoutInfo.verticalScrollbarWidth}px`;\n    }\n    get hoverOnLine() {\n        return this._hoverOnLine;\n    }\n    get hoverOnColumn() {\n        return this._hoverOnColumn;\n    }\n    get lineNumbers() {\n        return this._lineNumbers;\n    }\n    getCurrentLines() {\n        return this._lineNumbers;\n    }\n    setState(state) {\n        dom.clearNode(this._rootDomNode);\n        this._disposableStore.clear();\n        this._lineNumbers.length = 0;\n        const editorLineHeight = this._editor.getOption(64 /* EditorOption.lineHeight */);\n        const futureWidgetHeight = state.lineNumbers.length * editorLineHeight + state.lastLineRelativePosition;\n        if (futureWidgetHeight > 0) {\n            this._lastLineRelativePosition = state.lastLineRelativePosition;\n            this._lineNumbers = state.lineNumbers;\n        }\n        else {\n            this._lastLineRelativePosition = 0;\n            this._lineNumbers = [];\n        }\n        this._renderRootNode();\n    }\n    _renderRootNode() {\n        if (!this._editor._getViewModel()) {\n            return;\n        }\n        for (const [index, line] of this._lineNumbers.entries()) {\n            const childNode = this._renderChildNode(index, line);\n            this._rootDomNode.appendChild(childNode);\n        }\n        const editorLineHeight = this._editor.getOption(64 /* EditorOption.lineHeight */);\n        const widgetHeight = this._lineNumbers.length * editorLineHeight + this._lastLineRelativePosition;\n        this._rootDomNode.style.display = widgetHeight > 0 ? 'block' : 'none';\n        this._rootDomNode.style.height = widgetHeight.toString() + 'px';\n        this._rootDomNode.setAttribute('role', 'list');\n        const minimapSide = this._editor.getOption(70 /* EditorOption.minimap */).side;\n        if (minimapSide === 'left') {\n            this._rootDomNode.style.marginLeft = this._editor.getLayoutInfo().minimap.minimapCanvasOuterWidth + 'px';\n        }\n    }\n    _renderChildNode(index, line) {\n        const child = document.createElement('div');\n        const viewModel = this._editor._getViewModel();\n        const viewLineNumber = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(line, 1)).lineNumber;\n        const lineRenderingData = viewModel.getViewLineRenderingData(viewLineNumber);\n        const layoutInfo = this._editor.getLayoutInfo();\n        const width = layoutInfo.width - layoutInfo.minimap.minimapCanvasOuterWidth - layoutInfo.verticalScrollbarWidth;\n        const minimapSide = this._editor.getOption(70 /* EditorOption.minimap */).side;\n        const lineHeight = this._editor.getOption(64 /* EditorOption.lineHeight */);\n        const lineNumberOption = this._editor.getOption(65 /* EditorOption.lineNumbers */);\n        let actualInlineDecorations;\n        try {\n            actualInlineDecorations = LineDecoration.filter(lineRenderingData.inlineDecorations, viewLineNumber, lineRenderingData.minColumn, lineRenderingData.maxColumn);\n        }\n        catch (err) {\n            actualInlineDecorations = [];\n        }\n        const renderLineInput = new RenderLineInput(true, true, lineRenderingData.content, lineRenderingData.continuesWithWrappedLine, lineRenderingData.isBasicASCII, lineRenderingData.containsRTL, 0, lineRenderingData.tokens, actualInlineDecorations, lineRenderingData.tabSize, lineRenderingData.startVisibleColumn, 1, 1, 1, 500, 'none', true, true, null);\n        const sb = new StringBuilder(2000);\n        renderViewLine(renderLineInput, sb);\n        let newLine;\n        if (_ttPolicy) {\n            newLine = _ttPolicy.createHTML(sb.build());\n        }\n        else {\n            newLine = sb.build();\n        }\n        const lineHTMLNode = document.createElement('span');\n        lineHTMLNode.className = 'sticky-line';\n        lineHTMLNode.classList.add(`stickyLine${line}`);\n        lineHTMLNode.style.lineHeight = `${lineHeight}px`;\n        lineHTMLNode.innerHTML = newLine;\n        const lineNumberHTMLNode = document.createElement('span');\n        lineNumberHTMLNode.className = 'sticky-line';\n        lineNumberHTMLNode.style.lineHeight = `${lineHeight}px`;\n        if (minimapSide === 'left') {\n            lineNumberHTMLNode.style.width = `${layoutInfo.contentLeft - layoutInfo.minimap.minimapCanvasOuterWidth}px`;\n        }\n        else if (minimapSide === 'right') {\n            lineNumberHTMLNode.style.width = `${layoutInfo.contentLeft}px`;\n        }\n        const innerLineNumberHTML = document.createElement('span');\n        if (lineNumberOption.renderType === 1 /* RenderLineNumbersType.On */ || lineNumberOption.renderType === 3 /* RenderLineNumbersType.Interval */ && line % 10 === 0) {\n            innerLineNumberHTML.innerText = line.toString();\n        }\n        else if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n            innerLineNumberHTML.innerText = Math.abs(line - this._editor.getPosition().lineNumber).toString();\n        }\n        innerLineNumberHTML.className = 'sticky-line-number';\n        innerLineNumberHTML.style.lineHeight = `${lineHeight}px`;\n        innerLineNumberHTML.style.width = `${layoutInfo.lineNumbersWidth}px`;\n        if (minimapSide === 'left') {\n            innerLineNumberHTML.style.paddingLeft = `${layoutInfo.lineNumbersLeft - layoutInfo.minimap.minimapCanvasOuterWidth}px`;\n        }\n        else if (minimapSide === 'right') {\n            innerLineNumberHTML.style.paddingLeft = `${layoutInfo.lineNumbersLeft}px`;\n        }\n        lineNumberHTMLNode.appendChild(innerLineNumberHTML);\n        this._editor.applyFontInfo(lineHTMLNode);\n        this._editor.applyFontInfo(innerLineNumberHTML);\n        child.appendChild(lineNumberHTMLNode);\n        child.appendChild(lineHTMLNode);\n        child.className = 'sticky-line-root';\n        child.setAttribute('role', 'listitem');\n        child.tabIndex = 0;\n        child.style.lineHeight = `${lineHeight}px`;\n        child.style.width = `${width}px`;\n        child.style.height = `${lineHeight}px`;\n        child.style.zIndex = '0';\n        // Special case for the last line of sticky scroll\n        if (index === this._lineNumbers.length - 1) {\n            child.style.position = 'relative';\n            child.style.zIndex = '-1';\n            child.style.top = this._lastLineRelativePosition + 'px';\n        }\n        // Each child has a listener which fires when the mouse hovers over the child\n        this._disposableStore.add(dom.addDisposableListener(child, 'mouseover', (e) => {\n            if (this._editor.hasModel()) {\n                const mouseOverEvent = new StandardMouseEvent(e);\n                const text = mouseOverEvent.target.innerText;\n                // Line and column number of the hover needed for the control clicking feature\n                this._hoverOnLine = line;\n                // TODO: workaround to find the column index, perhaps need a more solid solution\n                this._hoverOnColumn = this._editor.getModel().getLineContent(line).indexOf(text) + 1 || -1;\n            }\n        }));\n        return child;\n    }\n    getId() {\n        return 'editor.contrib.stickyScrollWidget';\n    }\n    getDomNode() {\n        return this._rootDomNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class StickyRange {\n    constructor(startLineNumber, endLineNumber) {\n        this.startLineNumber = startLineNumber;\n        this.endLineNumber = endLineNumber;\n    }\n}\nexport class StickyElement {\n    constructor(\n    /**\n     * Range of line numbers spanned by the current scope\n     */\n    range, \n    /**\n     * Must be sorted by start line number\n    */\n    children, \n    /**\n     * Parent sticky outline element\n     */\n    parent) {\n        this.range = range;\n        this.children = children;\n        this.parent = parent;\n    }\n}\nexport class StickyModel {\n    constructor(uri, version, element, outlineProviderId) {\n        this.uri = uri;\n        this.version = version;\n        this.element = element;\n        this.outlineProviderId = outlineProviderId;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { StickyModelProvider } from './stickyScrollModelProvider.js';\nimport { StickyModel } from './stickyScrollElement.js';\nexport class StickyLineCandidate {\n    constructor(startLineNumber, endLineNumber, nestingDepth) {\n        this.startLineNumber = startLineNumber;\n        this.endLineNumber = endLineNumber;\n        this.nestingDepth = nestingDepth;\n    }\n}\nexport let StickyLineCandidateProvider = class StickyLineCandidateProvider extends Disposable {\n    constructor(editor, _languageFeaturesService, _languageConfigurationService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._onDidChangeStickyScroll = this._store.add(new Emitter());\n        this.onDidChangeStickyScroll = this._onDidChangeStickyScroll.event;\n        this._options = null;\n        this._model = null;\n        this._cts = null;\n        this._stickyModelProvider = null;\n        this._editor = editor;\n        this._sessionStore = new DisposableStore();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this.update(), 50));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(111 /* EditorOption.stickyScroll */)) {\n                this.readConfiguration();\n            }\n        }));\n        this.readConfiguration();\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n    readConfiguration() {\n        this._options = this._editor.getOption(111 /* EditorOption.stickyScroll */);\n        if (!this._options.enabled) {\n            this._sessionStore.clear();\n            return;\n        }\n        this._stickyModelProvider = new StickyModelProvider(this._editor, this._languageConfigurationService, this._languageFeaturesService, this._options.defaultModel);\n        this._sessionStore.add(this._editor.onDidChangeModel(() => this.update()));\n        this._sessionStore.add(this._editor.onDidChangeHiddenAreas(() => this.update()));\n        this._sessionStore.add(this._editor.onDidChangeModelContent(() => this._updateSoon.schedule()));\n        this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => this.update()));\n        this.update();\n    }\n    getVersionId() {\n        var _a;\n        return (_a = this._model) === null || _a === void 0 ? void 0 : _a.version;\n    }\n    update() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = this._cts) === null || _a === void 0 ? void 0 : _a.dispose(true);\n            this._cts = new CancellationTokenSource();\n            yield this.updateStickyModel(this._cts.token);\n            this._onDidChangeStickyScroll.fire();\n        });\n    }\n    updateStickyModel(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._stickyModelProvider) {\n                return;\n            }\n            const textModel = this._editor.getModel();\n            const modelVersionId = textModel.getVersionId();\n            const isDifferentModel = this._model ? !isEqual(this._model.uri, textModel.uri) : false;\n            // Clear sticky scroll to not show stale data for too long\n            const resetHandle = isDifferentModel ? setTimeout(() => {\n                if (!token.isCancellationRequested) {\n                    this._model = new StickyModel(textModel.uri, textModel.getVersionId(), undefined, undefined);\n                    this._onDidChangeStickyScroll.fire();\n                }\n            }, 75) : undefined;\n            this._model = yield this._stickyModelProvider.update(textModel, modelVersionId, token);\n            clearTimeout(resetHandle);\n        });\n    }\n    updateIndex(index) {\n        if (index === -1) {\n            index = 0;\n        }\n        else if (index < 0) {\n            index = -index - 2;\n        }\n        return index;\n    }\n    getCandidateStickyLinesIntersectingFromStickyModel(range, outlineModel, result, depth, lastStartLineNumber) {\n        if (outlineModel.children.length === 0) {\n            return;\n        }\n        let lastLine = lastStartLineNumber;\n        const childrenStartLines = [];\n        for (let i = 0; i < outlineModel.children.length; i++) {\n            const child = outlineModel.children[i];\n            if (child.range) {\n                childrenStartLines.push(child.range.startLineNumber);\n            }\n        }\n        const lowerBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber, (a, b) => { return a - b; }));\n        const upperBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber + depth, (a, b) => { return a - b; }));\n        for (let i = lowerBound; i <= upperBound; i++) {\n            const child = outlineModel.children[i];\n            if (!child) {\n                return;\n            }\n            if (child.range) {\n                const childStartLine = child.range.startLineNumber;\n                const childEndLine = child.range.endLineNumber;\n                if (range.startLineNumber <= childEndLine + 1 && childStartLine - 1 <= range.endLineNumber && childStartLine !== lastLine) {\n                    lastLine = childStartLine;\n                    result.push(new StickyLineCandidate(childStartLine, childEndLine - 1, depth + 1));\n                    this.getCandidateStickyLinesIntersectingFromStickyModel(range, child, result, depth + 1, childStartLine);\n                }\n            }\n            else {\n                this.getCandidateStickyLinesIntersectingFromStickyModel(range, child, result, depth, lastStartLineNumber);\n            }\n        }\n    }\n    getCandidateStickyLinesIntersecting(range) {\n        var _a, _b;\n        if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.element)) {\n            return [];\n        }\n        let stickyLineCandidates = [];\n        this.getCandidateStickyLinesIntersectingFromStickyModel(range, this._model.element, stickyLineCandidates, 0, -1);\n        const hiddenRanges = (_b = this._editor._getViewModel()) === null || _b === void 0 ? void 0 : _b.getHiddenAreas();\n        if (hiddenRanges) {\n            for (const hiddenRange of hiddenRanges) {\n                stickyLineCandidates = stickyLineCandidates.filter(stickyLine => !(stickyLine.startLineNumber >= hiddenRange.startLineNumber && stickyLine.endLineNumber <= hiddenRange.endLineNumber + 1));\n            }\n        }\n        return stickyLineCandidates;\n    }\n};\nStickyLineCandidateProvider = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageConfigurationService)\n], StickyLineCandidateProvider);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { StickyScrollWidget, StickyScrollWidgetState } from './stickyScrollWidget.js';\nimport { StickyLineCandidateProvider } from './stickyScrollProvider.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getDefinitionsAtPosition } from '../../gotoSymbol/browser/goToSymbol.js';\nimport { goToDefinitionWithLocation } from '../../inlayHints/browser/inlayHintsLocations.js';\nimport { Position } from '../../../common/core/position.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StickyRange } from './stickyScrollElement.js';\nexport let StickyScrollController = class StickyScrollController extends Disposable {\n    constructor(_editor, _contextMenuService, _languageFeaturesService, _instaService, _languageConfigurationService, _languageFeatureDebounceService, _contextKeyService) {\n        super();\n        this._editor = _editor;\n        this._contextMenuService = _contextMenuService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._instaService = _instaService;\n        this._contextKeyService = _contextKeyService;\n        this._sessionStore = new DisposableStore();\n        this._maxStickyLines = Number.MAX_SAFE_INTEGER;\n        this._candidateDefinitionsLength = -1;\n        this._focusedStickyElementIndex = -1;\n        this._enabled = false;\n        this._focused = false;\n        this._positionRevealed = false;\n        this._onMouseDown = false;\n        this._stickyScrollWidget = new StickyScrollWidget(this._editor);\n        this._stickyLineCandidateProvider = new StickyLineCandidateProvider(this._editor, _languageFeaturesService, _languageConfigurationService);\n        this._register(this._stickyScrollWidget);\n        this._register(this._stickyLineCandidateProvider);\n        this._widgetState = new StickyScrollWidgetState([], 0);\n        this._readConfiguration();\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(111 /* EditorOption.stickyScroll */)) {\n                this._readConfiguration();\n            }\n        }));\n        this._register(dom.addDisposableListener(this._stickyScrollWidget.getDomNode(), dom.EventType.CONTEXT_MENU, (event) => __awaiter(this, void 0, void 0, function* () {\n            this._onContextMenu(event);\n        })));\n        this._stickyScrollFocusedContextKey = EditorContextKeys.stickyScrollFocused.bindTo(this._contextKeyService);\n        this._stickyScrollVisibleContextKey = EditorContextKeys.stickyScrollVisible.bindTo(this._contextKeyService);\n        const focusTracker = this._register(dom.trackFocus(this._stickyScrollWidget.getDomNode()));\n        this._register(focusTracker.onDidBlur(_ => {\n            const height = this._stickyScrollWidget.getDomNode().clientHeight;\n            // Suppose that the blurring is caused by scrolling, then keep the focus on the sticky scroll\n            // This is determined by the fact that the height of the widget has become zero and there has been no position revealing\n            if (this._positionRevealed === false && height === 0) {\n                this._focusedStickyElementIndex = -1;\n                this.focus();\n            }\n            // In all other casees, dispose the focus on the sticky scroll\n            else {\n                this._disposeFocusStickyScrollStore();\n            }\n        }));\n        this._register(focusTracker.onDidFocus(_ => {\n            this.focus();\n        }));\n        this._register(this._createClickLinkGesture());\n        // Suppose that mouse down on the sticky scroll, then do not focus on the sticky scroll because this will be followed by the revealing of a position\n        this._register(dom.addDisposableListener(this._stickyScrollWidget.getDomNode(), dom.EventType.MOUSE_DOWN, (e) => {\n            this._onMouseDown = true;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(StickyScrollController.ID);\n    }\n    _disposeFocusStickyScrollStore() {\n        var _a;\n        this._stickyScrollFocusedContextKey.set(false);\n        (_a = this._focusDisposableStore) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._focused = false;\n        this._positionRevealed = false;\n        this._onMouseDown = false;\n    }\n    focus() {\n        // If the mouse is down, do not focus on the sticky scroll\n        if (this._onMouseDown) {\n            this._onMouseDown = false;\n            this._editor.focus();\n            return;\n        }\n        const focusState = this._stickyScrollFocusedContextKey.get();\n        if (focusState === true) {\n            return;\n        }\n        this._focused = true;\n        this._focusDisposableStore = new DisposableStore();\n        this._stickyScrollFocusedContextKey.set(true);\n        const rootNode = this._stickyScrollWidget.getDomNode();\n        rootNode.lastElementChild.focus();\n        this._stickyElements = rootNode.children;\n        this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumbers.length - 1;\n    }\n    focusNext() {\n        if (this._focusedStickyElementIndex < this._stickyElements.length - 1) {\n            this._focusNav(true);\n        }\n    }\n    focusPrevious() {\n        if (this._focusedStickyElementIndex > 0) {\n            this._focusNav(false);\n        }\n    }\n    selectEditor() {\n        this._editor.focus();\n    }\n    // True is next, false is previous\n    _focusNav(direction) {\n        this._focusedStickyElementIndex = direction ? this._focusedStickyElementIndex + 1 : this._focusedStickyElementIndex - 1;\n        this._stickyElements.item(this._focusedStickyElementIndex).focus();\n    }\n    goToFocused() {\n        const lineNumbers = this._stickyScrollWidget.lineNumbers;\n        this._disposeFocusStickyScrollStore();\n        this._revealPosition({ lineNumber: lineNumbers[this._focusedStickyElementIndex], column: 1 });\n    }\n    _revealPosition(position) {\n        this._positionRevealed = true;\n        this._editor.revealPosition(position);\n        this._editor.setSelection(Range.fromPositions(position));\n        this._editor.focus();\n    }\n    _createClickLinkGesture() {\n        const linkGestureStore = new DisposableStore();\n        const sessionStore = new DisposableStore();\n        linkGestureStore.add(sessionStore);\n        const gesture = new ClickLinkGesture(this._editor, true);\n        linkGestureStore.add(gesture);\n        linkGestureStore.add(gesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, _keyboardEvent]) => {\n            if (!this._editor.hasModel() || !mouseEvent.hasTriggerModifier) {\n                sessionStore.clear();\n                return;\n            }\n            const targetMouseEvent = mouseEvent.target;\n            if (targetMouseEvent.detail === this._stickyScrollWidget.getId()\n                && targetMouseEvent.element.innerText === targetMouseEvent.element.innerHTML) {\n                const text = targetMouseEvent.element.innerText;\n                if (this._stickyScrollWidget.hoverOnColumn === -1) {\n                    return;\n                }\n                const lineNumber = this._stickyScrollWidget.hoverOnLine;\n                const column = this._stickyScrollWidget.hoverOnColumn;\n                const stickyPositionProjectedOnEditor = new Range(lineNumber, column, lineNumber, column + text.length);\n                if (!stickyPositionProjectedOnEditor.equalsRange(this._stickyRangeProjectedOnEditor)) {\n                    this._stickyRangeProjectedOnEditor = stickyPositionProjectedOnEditor;\n                    sessionStore.clear();\n                }\n                else if (targetMouseEvent.element.style.textDecoration === 'underline') {\n                    return;\n                }\n                const cancellationToken = new CancellationTokenSource();\n                sessionStore.add(toDisposable(() => cancellationToken.dispose(true)));\n                let currentHTMLChild;\n                getDefinitionsAtPosition(this._languageFeaturesService.definitionProvider, this._editor.getModel(), new Position(lineNumber, column + 1), cancellationToken.token).then((candidateDefinitions => {\n                    if (cancellationToken.token.isCancellationRequested) {\n                        return;\n                    }\n                    if (candidateDefinitions.length !== 0) {\n                        this._candidateDefinitionsLength = candidateDefinitions.length;\n                        const childHTML = targetMouseEvent.element;\n                        if (currentHTMLChild !== childHTML) {\n                            sessionStore.clear();\n                            currentHTMLChild = childHTML;\n                            currentHTMLChild.style.textDecoration = 'underline';\n                            sessionStore.add(toDisposable(() => {\n                                currentHTMLChild.style.textDecoration = 'none';\n                            }));\n                        }\n                        else if (!currentHTMLChild) {\n                            currentHTMLChild = childHTML;\n                            currentHTMLChild.style.textDecoration = 'underline';\n                            sessionStore.add(toDisposable(() => {\n                                currentHTMLChild.style.textDecoration = 'none';\n                            }));\n                        }\n                    }\n                    else {\n                        sessionStore.clear();\n                    }\n                }));\n            }\n            else {\n                sessionStore.clear();\n            }\n        }));\n        linkGestureStore.add(gesture.onCancel(() => {\n            sessionStore.clear();\n        }));\n        linkGestureStore.add(gesture.onExecute((e) => __awaiter(this, void 0, void 0, function* () {\n            if (e.target.detail !== this._stickyScrollWidget.getId()) {\n                return;\n            }\n            if (e.hasTriggerModifier) {\n                // Control click\n                if (this._candidateDefinitionsLength > 1) {\n                    if (this._focused) {\n                        this._disposeFocusStickyScrollStore();\n                    }\n                    this._revealPosition({ lineNumber: this._stickyScrollWidget.hoverOnLine, column: 1 });\n                }\n                this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, { uri: this._editor.getModel().uri, range: this._stickyRangeProjectedOnEditor });\n            }\n            else if (!e.isRightClick) {\n                // Normal click\n                if (this._focused) {\n                    this._disposeFocusStickyScrollStore();\n                }\n                this._revealPosition({ lineNumber: this._stickyScrollWidget.hoverOnLine, column: this._stickyScrollWidget.hoverOnColumn });\n            }\n        })));\n        return linkGestureStore;\n    }\n    _onContextMenu(event) {\n        this._contextMenuService.showContextMenu({\n            menuId: MenuId.StickyScrollContext,\n            getAnchor: () => event,\n        });\n    }\n    _readConfiguration() {\n        const options = this._editor.getOption(111 /* EditorOption.stickyScroll */);\n        if (options.enabled === false) {\n            this._editor.removeOverlayWidget(this._stickyScrollWidget);\n            this._sessionStore.clear();\n            this._enabled = false;\n            return;\n        }\n        else if (options.enabled && !this._enabled) {\n            // When sticky scroll was just enabled, add the listeners on the sticky scroll\n            this._editor.addOverlayWidget(this._stickyScrollWidget);\n            this._sessionStore.add(this._editor.onDidScrollChange(() => this._renderStickyScroll()));\n            this._sessionStore.add(this._editor.onDidLayoutChange(() => this._onDidResize()));\n            this._sessionStore.add(this._editor.onDidChangeModelTokens((e) => this._onTokensChange(e)));\n            this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(() => this._renderStickyScroll()));\n            this._enabled = true;\n        }\n        const lineNumberOption = this._editor.getOption(65 /* EditorOption.lineNumbers */);\n        if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n            this._sessionStore.add(this._editor.onDidChangeCursorPosition(() => this._renderStickyScroll()));\n        }\n    }\n    _needsUpdate(event) {\n        const stickyLineNumbers = this._stickyScrollWidget.getCurrentLines();\n        for (const stickyLineNumber of stickyLineNumbers) {\n            for (const range of event.ranges) {\n                if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    _onTokensChange(event) {\n        if (this._needsUpdate(event)) {\n            this._renderStickyScroll();\n        }\n    }\n    _onDidResize() {\n        const layoutInfo = this._editor.getLayoutInfo();\n        const width = layoutInfo.width - layoutInfo.minimap.minimapCanvasOuterWidth - layoutInfo.verticalScrollbarWidth;\n        this._stickyScrollWidget.getDomNode().style.width = `${width}px`;\n        // Make sure sticky scroll doesn't take up more than 25% of the editor\n        const theoreticalLines = layoutInfo.height / this._editor.getOption(64 /* EditorOption.lineHeight */);\n        this._maxStickyLines = Math.round(theoreticalLines * .25);\n    }\n    _renderStickyScroll() {\n        if (!(this._editor.hasModel())) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const stickyLineVersion = this._stickyLineCandidateProvider.getVersionId();\n        if (stickyLineVersion === undefined || stickyLineVersion === model.getVersionId()) {\n            this._widgetState = this.findScrollWidgetState();\n            this._stickyScrollVisibleContextKey.set(!(this._widgetState.lineNumbers.length === 0));\n            if (!this._focused) {\n                this._stickyScrollWidget.setState(this._widgetState);\n            }\n            else {\n                this._stickyElements = this._stickyScrollWidget.getDomNode().children;\n                // Suppose that previously the sticky scroll widget had height 0, then if there are visible lines, set the last line as focused\n                if (this._focusedStickyElementIndex === -1) {\n                    this._stickyScrollWidget.setState(this._widgetState);\n                    this._focusedStickyElementIndex = this._stickyElements.length - 1;\n                    if (this._focusedStickyElementIndex !== -1) {\n                        this._stickyElements.item(this._focusedStickyElementIndex).focus();\n                    }\n                }\n                else {\n                    const focusedStickyElementLineNumber = this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];\n                    this._stickyScrollWidget.setState(this._widgetState);\n                    // Suppose that after setting the state, there are no sticky lines, set the focused index to -1\n                    if (this._stickyElements.length === 0) {\n                        this._focusedStickyElementIndex = -1;\n                    }\n                    else {\n                        const previousFocusedLineNumberExists = this._stickyScrollWidget.lineNumbers.includes(focusedStickyElementLineNumber);\n                        // If the line number is still there, do not change anything\n                        // If the line number is not there, set the new focused line to be the last line\n                        if (!previousFocusedLineNumberExists) {\n                            this._focusedStickyElementIndex = this._stickyElements.length - 1;\n                        }\n                        this._stickyElements.item(this._focusedStickyElementIndex).focus();\n                    }\n                }\n            }\n        }\n    }\n    findScrollWidgetState() {\n        const lineHeight = this._editor.getOption(64 /* EditorOption.lineHeight */);\n        const maxNumberStickyLines = Math.min(this._maxStickyLines, this._editor.getOption(111 /* EditorOption.stickyScroll */).maxLineCount);\n        const scrollTop = this._editor.getScrollTop();\n        let lastLineRelativePosition = 0;\n        const lineNumbers = [];\n        const arrayVisibleRanges = this._editor.getVisibleRanges();\n        if (arrayVisibleRanges.length !== 0) {\n            const fullVisibleRange = new StickyRange(arrayVisibleRanges[0].startLineNumber, arrayVisibleRanges[arrayVisibleRanges.length - 1].endLineNumber);\n            const candidateRanges = this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(fullVisibleRange);\n            for (const range of candidateRanges) {\n                const start = range.startLineNumber;\n                const end = range.endLineNumber;\n                const depth = range.nestingDepth;\n                if (end - start > 0) {\n                    const topOfElementAtDepth = (depth - 1) * lineHeight;\n                    const bottomOfElementAtDepth = depth * lineHeight;\n                    const bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\n                    const topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\n                    const bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\n                    if (topOfElementAtDepth > topOfEndLine && topOfElementAtDepth <= bottomOfEndLine) {\n                        lineNumbers.push(start);\n                        lastLineRelativePosition = bottomOfEndLine - bottomOfElementAtDepth;\n                        break;\n                    }\n                    else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth <= bottomOfEndLine) {\n                        lineNumbers.push(start);\n                    }\n                    if (lineNumbers.length === maxNumberStickyLines) {\n                        break;\n                    }\n                }\n            }\n        }\n        return new StickyScrollWidgetState(lineNumbers, lastLineRelativePosition);\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n};\nStickyScrollController.ID = 'store.contrib.stickyScrollController';\nStickyScrollController = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IInstantiationService),\n    __param(4, ILanguageConfigurationService),\n    __param(5, ILanguageFeatureDebounceService),\n    __param(6, IContextKeyService)\n], StickyScrollController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { EditorAction2 } from '../../../browser/editorExtensions.js';\nimport { localize } from '../../../../nls.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { Action2, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { StickyScrollController } from './stickyScrollController.js';\nexport class ToggleStickyScroll extends Action2 {\n    constructor() {\n        super({\n            id: 'editor.action.toggleStickyScroll',\n            title: {\n                value: localize('toggleStickyScroll', \"Toggle Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'mitoggleStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Sticky Scroll\"),\n                original: 'Toggle Sticky Scroll',\n            },\n            category: Categories.View,\n            toggled: {\n                condition: ContextKeyExpr.equals('config.editor.stickyScroll.enabled', true),\n                title: localize('stickyScroll', \"Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'miStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Sticky Scroll\"),\n            },\n            menu: [\n                { id: MenuId.CommandPalette },\n                { id: MenuId.MenubarViewMenu, group: '5_editor', order: 2 },\n                { id: MenuId.StickyScrollContext }\n            ]\n        });\n    }\n    run(accessor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor.get(IConfigurationService);\n            const newValue = !configurationService.getValue('editor.stickyScroll.enabled');\n            return configurationService.updateValue('editor.stickyScroll.enabled', newValue);\n        });\n    }\n}\nconst weight = 100 /* KeybindingWeight.EditorContrib */;\nexport class FocusStickyScroll extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.focusStickyScroll',\n            title: {\n                value: localize('focusStickyScroll', \"Focus Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'mifocusStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Focus Sticky Scroll\"),\n                original: 'Focus Sticky Scroll',\n            },\n            precondition: ContextKeyExpr.and(ContextKeyExpr.has('config.editor.stickyScroll.enabled'), EditorContextKeys.stickyScrollVisible),\n            menu: [\n                { id: MenuId.CommandPalette },\n            ]\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n}\nexport class SelectNextStickyScrollLine extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.selectNextStickyScrollLine',\n            title: {\n                value: localize('selectNextStickyScrollLine.title', \"Select next sticky scroll line\"),\n                original: 'Select next sticky scroll line'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 18 /* KeyCode.DownArrow */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focusNext();\n    }\n}\nexport class SelectPreviousStickyScrollLine extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.selectPreviousStickyScrollLine',\n            title: {\n                value: localize('selectPreviousStickyScrollLine.title', \"Select previous sticky scroll line\"),\n                original: 'Select previous sticky scroll line'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 16 /* KeyCode.UpArrow */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focusPrevious();\n    }\n}\nexport class GoToStickyScrollLine extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.goToFocusedStickyScrollLine',\n            title: {\n                value: localize('goToFocusedStickyScrollLine.title', \"Go to focused sticky scroll line\"),\n                original: 'Go to focused sticky scroll line'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 3 /* KeyCode.Enter */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToFocused();\n    }\n}\nexport class SelectEditor extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.selectEditor',\n            title: {\n                value: localize('selectEditor.title', \"Select Editor\"),\n                original: 'Select Editor'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 9 /* KeyCode.Escape */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectEditor();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ToggleStickyScroll, FocusStickyScroll, SelectEditor, SelectPreviousStickyScrollLine, SelectNextStickyScrollLine, GoToStickyScrollLine } from './stickyScrollActions.js';\nimport { StickyScrollController } from './stickyScrollController.js';\nimport { registerAction2 } from '../../../../platform/actions/common/actions.js';\nregisterEditorContribution(StickyScrollController.ID, StickyScrollController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterAction2(ToggleStickyScroll);\nregisterAction2(FocusStickyScroll);\nregisterAction2(SelectPreviousStickyScrollLine);\nregisterAction2(SelectNextStickyScrollLine);\nregisterAction2(GoToStickyScrollLine);\nregisterAction2(SelectEditor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { quickSelect } from '../../../../base/common/arrays.js';\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive, FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\nexport class LineContext {\n    constructor(leadingLineContent, characterCountDelta) {\n        this.leadingLineContent = leadingLineContent;\n        this.characterCountDelta = characterCountDelta;\n    }\n}\n/**\n * Sorted, filtered completion view model\n * */\nexport class CompletionModel {\n    constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, fuzzyScoreOptions = FuzzyScoreOptions.default, clipboardText = undefined) {\n        this.clipboardText = clipboardText;\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\n        this._items = items;\n        this._column = column;\n        this._wordDistance = wordDistance;\n        this._options = options;\n        this._refilterKind = 1 /* Refilter.All */;\n        this._lineContext = lineContext;\n        this._fuzzyScoreOptions = fuzzyScoreOptions;\n        if (snippetSuggestions === 'top') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n        }\n        else if (snippetSuggestions === 'bottom') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n        }\n    }\n    get lineContext() {\n        return this._lineContext;\n    }\n    set lineContext(value) {\n        if (this._lineContext.leadingLineContent !== value.leadingLineContent\n            || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n            this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Refilter.Incr */ : 1 /* Refilter.All */;\n            this._lineContext = value;\n        }\n    }\n    get items() {\n        this._ensureCachedState();\n        return this._filteredItems;\n    }\n    getItemsByProvider() {\n        this._ensureCachedState();\n        return this._itemsByProvider;\n    }\n    getIncompleteProvider() {\n        this._ensureCachedState();\n        const result = new Set();\n        for (const [provider, items] of this.getItemsByProvider()) {\n            if (items.length > 0 && items[0].container.incomplete) {\n                result.add(provider);\n            }\n        }\n        return result;\n    }\n    get stats() {\n        this._ensureCachedState();\n        return this._stats;\n    }\n    _ensureCachedState() {\n        if (this._refilterKind !== 0 /* Refilter.Nothing */) {\n            this._createCachedState();\n        }\n    }\n    _createCachedState() {\n        this._itemsByProvider = new Map();\n        const labelLengths = [];\n        const { leadingLineContent, characterCountDelta } = this._lineContext;\n        let word = '';\n        let wordLow = '';\n        // incrementally filter less\n        const source = this._refilterKind === 1 /* Refilter.All */ ? this._items : this._filteredItems;\n        const target = [];\n        // picks a score function based on the number of\n        // items that we have to score/filter and based on the\n        // user-configuration\n        const scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\n        for (let i = 0; i < source.length; i++) {\n            const item = source[i];\n            if (item.isInvalid) {\n                continue; // SKIP invalid items\n            }\n            // keep all items by their provider\n            const arr = this._itemsByProvider.get(item.provider);\n            if (arr) {\n                arr.push(item);\n            }\n            else {\n                this._itemsByProvider.set(item.provider, [item]);\n            }\n            // 'word' is that remainder of the current line that we\n            // filter and score against. In theory each suggestion uses a\n            // different word, but in practice not - that's why we cache\n            const overwriteBefore = item.position.column - item.editStart.column;\n            const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n            if (word.length !== wordLen) {\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n                wordLow = word.toLowerCase();\n            }\n            // remember the word against which this item was\n            // scored\n            item.word = word;\n            if (wordLen === 0) {\n                // when there is nothing to score against, don't\n                // event try to do. Use a const rank and rely on\n                // the fallback-sort using the initial sort order.\n                // use a score of `-100` because that is out of the\n                // bound of values `fuzzyScore` will return\n                item.score = FuzzyScore.Default;\n            }\n            else {\n                // skip word characters that are whitespace until\n                // we have hit the replace range (overwriteBefore)\n                let wordPos = 0;\n                while (wordPos < overwriteBefore) {\n                    const ch = word.charCodeAt(wordPos);\n                    if (ch === 32 /* CharCode.Space */ || ch === 9 /* CharCode.Tab */) {\n                        wordPos += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (wordPos >= wordLen) {\n                    // the wordPos at which scoring starts is the whole word\n                    // and therefore the same rules as not having a word apply\n                    item.score = FuzzyScore.Default;\n                }\n                else if (typeof item.completion.filterText === 'string') {\n                    // when there is a `filterText` it must match the `word`.\n                    // if it matches we check with the label to compute highlights\n                    // and if that doesn't yield a result we have no highlights,\n                    // despite having the match\n                    const match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\n                        // filterText and label are actually the same -> use good highlights\n                        item.score = match;\n                    }\n                    else {\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\n                        // of the filterText-match\n                        item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\n                        item.score[0] = match[0]; // use score from filterText\n                    }\n                }\n                else {\n                    // by default match `word` against the `label`\n                    const match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    item.score = match;\n                }\n            }\n            item.idx = i;\n            item.distance = this._wordDistance.distance(item.position, item.completion);\n            target.push(item);\n            // update stats\n            labelLengths.push(item.textLabel.length);\n        }\n        this._filteredItems = target.sort(this._snippetCompareFn);\n        this._refilterKind = 0 /* Refilter.Nothing */;\n        this._stats = {\n            pLabelLen: labelLengths.length ?\n                quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b)\n                : 0\n        };\n    }\n    static _compareCompletionItems(a, b) {\n        if (a.score[0] > b.score[0]) {\n            return -1;\n        }\n        else if (a.score[0] < b.score[0]) {\n            return 1;\n        }\n        else if (a.distance < b.distance) {\n            return -1;\n        }\n        else if (a.distance > b.distance) {\n            return 1;\n        }\n        else if (a.idx < b.idx) {\n            return -1;\n        }\n        else if (a.idx > b.idx) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static _compareCompletionItemsSnippetsDown(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n    static _compareCompletionItemsSnippetsUp(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { CancellationError, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { historyNavigationVisible } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nexport const Context = {\n    Visible: historyNavigationVisible,\n    HasFocusedSuggestion: new RawContextKey('suggestWidgetHasFocusedSuggestion', false, localize('suggestWidgetHasSelection', \"Whether any suggestion is focused\")),\n    DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\n    HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\n    InsertMode: new RawContextKey('suggestionInsertMode', undefined, { type: 'string', description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\") }),\n    CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\")),\n};\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\nexport class CompletionItem {\n    constructor(position, completion, container, provider) {\n        var _a;\n        this.position = position;\n        this.completion = completion;\n        this.container = container;\n        this.provider = provider;\n        // validation\n        this.isInvalid = false;\n        // sorting, filtering\n        this.score = FuzzyScore.Default;\n        this.distance = 0;\n        this.textLabel = typeof completion.label === 'string'\n            ? completion.label\n            : (_a = completion.label) === null || _a === void 0 ? void 0 : _a.label;\n        // ensure lower-variants (perf)\n        this.labelLow = this.textLabel.toLowerCase();\n        // validate label\n        this.isInvalid = !this.textLabel;\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\n        this.extensionId = completion.extensionId;\n        // normalize ranges\n        if (Range.isIRange(completion.range)) {\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            // validate range\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\n        }\n        else {\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\n            // validate ranges\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace)\n                || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber\n                || completion.range.insert.startColumn !== completion.range.replace.startColumn;\n        }\n        // create the suggestion resolver\n        if (typeof provider.resolveCompletionItem !== 'function') {\n            this._resolveCache = Promise.resolve();\n            this._isResolved = true;\n        }\n    }\n    // ---- resolving\n    get isResolved() {\n        return !!this._isResolved;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._resolveCache) {\n                const sub = token.onCancellationRequested(() => {\n                    this._resolveCache = undefined;\n                    this._isResolved = false;\n                });\n                this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\n                    Object.assign(this.completion, value);\n                    this._isResolved = true;\n                    sub.dispose();\n                }, err => {\n                    if (isCancellationError(err)) {\n                        // the IPC queue will reject the request with the\n                        // cancellation error -> reset cached\n                        this._resolveCache = undefined;\n                        this._isResolved = false;\n                    }\n                });\n            }\n            return this._resolveCache;\n        });\n    }\n}\nexport class CompletionOptions {\n    constructor(snippetSortOrder = 2 /* SnippetSortOrder.Bottom */, kindFilter = new Set(), providerFilter = new Set(), providerItemsToReuse = new Map(), showDeprecated = true) {\n        this.snippetSortOrder = snippetSortOrder;\n        this.kindFilter = kindFilter;\n        this.providerFilter = providerFilter;\n        this.providerItemsToReuse = providerItemsToReuse;\n        this.showDeprecated = showDeprecated;\n    }\n}\nCompletionOptions.default = new CompletionOptions();\nlet _snippetSuggestSupport;\nexport function getSnippetSuggestSupport() {\n    return _snippetSuggestSupport;\n}\nexport class CompletionItemModel {\n    constructor(items, needsClipboard, durations, disposable) {\n        this.items = items;\n        this.needsClipboard = needsClipboard;\n        this.durations = durations;\n        this.disposable = disposable;\n    }\n}\nexport function provideSuggestionItems(registry, model, position, options = CompletionOptions.default, context = { triggerKind: 0 /* languages.CompletionTriggerKind.Invoke */ }, token = CancellationToken.None) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sw = new StopWatch(true);\n        position = position.clone();\n        const word = model.getWordAtPosition(position);\n        const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\n        const defaultRange = { replace: defaultReplaceRange, insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column) };\n        const result = [];\n        const disposables = new DisposableStore();\n        const durations = [];\n        let needsClipboard = false;\n        const onCompletionList = (provider, container, sw) => {\n            var _a, _b, _c;\n            let didAddResult = false;\n            if (!container) {\n                return didAddResult;\n            }\n            for (const suggestion of container.suggestions) {\n                if (!options.kindFilter.has(suggestion.kind)) {\n                    // skip if not showing deprecated suggestions\n                    if (!options.showDeprecated && ((_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.tags) === null || _a === void 0 ? void 0 : _a.includes(1 /* languages.CompletionItemTag.Deprecated */))) {\n                        continue;\n                    }\n                    // fill in default range when missing\n                    if (!suggestion.range) {\n                        suggestion.range = defaultRange;\n                    }\n                    // fill in default sortText when missing\n                    if (!suggestion.sortText) {\n                        suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\n                    }\n                    if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* languages.CompletionItemInsertTextRule.InsertAsSnippet */) {\n                        needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\n                    }\n                    result.push(new CompletionItem(position, suggestion, container, provider));\n                    didAddResult = true;\n                }\n            }\n            if (isDisposable(container)) {\n                disposables.add(container);\n            }\n            durations.push({\n                providerName: (_b = provider._debugDisplayName) !== null && _b !== void 0 ? _b : 'unknown_provider', elapsedProvider: (_c = container.duration) !== null && _c !== void 0 ? _c : -1, elapsedOverall: sw.elapsed()\n            });\n            return didAddResult;\n        };\n        // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\n        // do so - no snippet filter, no special-providers-only request\n        const snippetCompletions = (() => __awaiter(this, void 0, void 0, function* () {\n            if (!_snippetSuggestSupport || options.kindFilter.has(27 /* languages.CompletionItemKind.Snippet */)) {\n                return;\n            }\n            // we have items from a previous session that we can reuse\n            const reuseItems = options.providerItemsToReuse.get(_snippetSuggestSupport);\n            if (reuseItems) {\n                reuseItems.forEach(item => result.push(item));\n                return;\n            }\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\n                return;\n            }\n            const sw = new StopWatch(true);\n            const list = yield _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\n            onCompletionList(_snippetSuggestSupport, list, sw);\n        }))();\n        // add suggestions from contributed providers - providers are ordered in groups of\n        // equal score and once a group produces a result the process stops\n        // get provider groups, always add snippet suggestion provider\n        for (const providerGroup of registry.orderedGroups(model)) {\n            // for each support in the group ask for suggestions\n            let didAddResult = false;\n            yield Promise.all(providerGroup.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                // we have items from a previous session that we can reuse\n                if (options.providerItemsToReuse.has(provider)) {\n                    const items = options.providerItemsToReuse.get(provider);\n                    items.forEach(item => result.push(item));\n                    didAddResult = didAddResult || items.length > 0;\n                    return;\n                }\n                // check if this provider is filtered out\n                if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n                    return;\n                }\n                try {\n                    const sw = new StopWatch(true);\n                    const list = yield provider.provideCompletionItems(model, position, context, token);\n                    didAddResult = onCompletionList(provider, list, sw) || didAddResult;\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            if (didAddResult || token.isCancellationRequested) {\n                break;\n            }\n        }\n        yield snippetCompletions;\n        if (token.isCancellationRequested) {\n            disposables.dispose();\n            return Promise.reject(new CancellationError());\n        }\n        return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, { entries: durations, elapsed: sw.elapsed() }, disposables);\n    });\n}\nfunction defaultComparator(a, b) {\n    // check with 'sortText'\n    if (a.sortTextLow && b.sortTextLow) {\n        if (a.sortTextLow < b.sortTextLow) {\n            return -1;\n        }\n        else if (a.sortTextLow > b.sortTextLow) {\n            return 1;\n        }\n    }\n    // check with 'label'\n    if (a.textLabel < b.textLabel) {\n        return -1;\n    }\n    else if (a.textLabel > b.textLabel) {\n        return 1;\n    }\n    // check with 'type'\n    return a.completion.kind - b.completion.kind;\n}\nfunction snippetUpComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nfunction snippetDownComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nconst _snippetComparators = new Map();\n_snippetComparators.set(0 /* SnippetSortOrder.Top */, snippetUpComparator);\n_snippetComparators.set(2 /* SnippetSortOrder.Bottom */, snippetDownComparator);\n_snippetComparators.set(1 /* SnippetSortOrder.Inline */, defaultComparator);\nexport function getSuggestionComparator(snippetConfig) {\n    return _snippetComparators.get(snippetConfig);\n}\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter, maxItemsToResolve] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = {\n            incomplete: false,\n            suggestions: []\n        };\n        const resolving = [];\n        const actualPosition = ref.object.textEditorModel.validatePosition(position);\n        const completions = yield provideSuggestionItems(completionProvider, ref.object.textEditorModel, actualPosition, undefined, { triggerCharacter: triggerCharacter !== null && triggerCharacter !== void 0 ? triggerCharacter : undefined, triggerKind: triggerCharacter ? 1 /* languages.CompletionTriggerKind.TriggerCharacter */ : 0 /* languages.CompletionTriggerKind.Invoke */ });\n        for (const item of completions.items) {\n            if (resolving.length < (maxItemsToResolve !== null && maxItemsToResolve !== void 0 ? maxItemsToResolve : 0)) {\n                resolving.push(item.resolve(CancellationToken.None));\n            }\n            result.incomplete = result.incomplete || item.container.incomplete;\n            result.suggestions.push(item.completion);\n        }\n        try {\n            yield Promise.all(resolving);\n            return result;\n        }\n        finally {\n            setTimeout(() => completions.disposable.dispose(), 100);\n        }\n    }\n    finally {\n        ref.dispose();\n    }\n}));\nexport function showSimpleSuggestions(editor, provider) {\n    var _a;\n    (_a = editor.getContribution('editor.contrib.suggestController')) === null || _a === void 0 ? void 0 : _a.triggerSuggest(new Set().add(provider), undefined, true);\n}\nexport class QuickSuggestionsOptions {\n    static isAllOff(config) {\n        return config.other === 'off' && config.comments === 'off' && config.strings === 'off';\n    }\n    static isAllOn(config) {\n        return config.other === 'on' && config.comments === 'on' && config.strings === 'on';\n    }\n    static valueFor(config, tokenType) {\n        switch (tokenType) {\n            case 1 /* StandardTokenType.Comment */: return config.comments;\n            case 2 /* StandardTokenType.String */: return config.strings;\n            default: return config.other;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport let WordContextKey = class WordContextKey {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._enabled = false;\n        this._ckAtEnd = WordContextKey.AtEnd.bindTo(contextKeyService);\n        this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(119 /* EditorOption.tabCompletion */) && this._update());\n        this._update();\n    }\n    dispose() {\n        var _a;\n        this._configListener.dispose();\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._ckAtEnd.reset();\n    }\n    _update() {\n        // only update this when tab completions are enabled\n        const enabled = this._editor.getOption(119 /* EditorOption.tabCompletion */) === 'on';\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        if (this._enabled) {\n            const checkForWordEnd = () => {\n                if (!this._editor.hasModel()) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                const model = this._editor.getModel();\n                const selection = this._editor.getSelection();\n                const word = model.getWordAtPosition(selection.getStartPosition());\n                if (!word) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n            };\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n            checkForWordEnd();\n        }\n        else if (this._selectionListener) {\n            this._ckAtEnd.reset();\n            this._selectionListener.dispose();\n            this._selectionListener = undefined;\n        }\n    }\n};\nWordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\nWordContextKey = __decorate([\n    __param(1, IContextKeyService)\n], WordContextKey);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport let SuggestAlternatives = class SuggestAlternatives {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._index = 0;\n        this._ckOtherSuggestions = SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService);\n    }\n    dispose() {\n        this.reset();\n    }\n    reset() {\n        var _a;\n        this._ckOtherSuggestions.reset();\n        (_a = this._listener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._model = undefined;\n        this._acceptNext = undefined;\n        this._ignore = false;\n    }\n    set({ model, index }, acceptNext) {\n        // no suggestions -> nothing to do\n        if (model.items.length === 0) {\n            this.reset();\n            return;\n        }\n        // no alternative suggestions -> nothing to do\n        const nextIndex = SuggestAlternatives._moveIndex(true, model, index);\n        if (nextIndex === index) {\n            this.reset();\n            return;\n        }\n        this._acceptNext = acceptNext;\n        this._model = model;\n        this._index = index;\n        this._listener = this._editor.onDidChangeCursorPosition(() => {\n            if (!this._ignore) {\n                this.reset();\n            }\n        });\n        this._ckOtherSuggestions.set(true);\n    }\n    static _moveIndex(fwd, model, index) {\n        let newIndex = index;\n        for (let rounds = model.items.length; rounds > 0; rounds--) {\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n            if (newIndex === index) {\n                break;\n            }\n            if (!model.items[newIndex].completion.additionalTextEdits) {\n                break;\n            }\n        }\n        return newIndex;\n    }\n    next() {\n        this._move(true);\n    }\n    prev() {\n        this._move(false);\n    }\n    _move(fwd) {\n        if (!this._model) {\n            // nothing to reason about\n            return;\n        }\n        try {\n            this._ignore = true;\n            this._index = SuggestAlternatives._moveIndex(fwd, this._model, this._index);\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\n        }\n        finally {\n            this._ignore = false;\n        }\n    }\n};\nSuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\nSuggestAlternatives = __decorate([\n    __param(1, IContextKeyService)\n], SuggestAlternatives);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nexport class CommitCharacterController {\n    constructor(editor, widget, model, accept) {\n        this._disposables = new DisposableStore();\n        this._disposables.add(model.onDidSuggest(e => {\n            if (e.completionModel.items.length === 0) {\n                this.reset();\n            }\n        }));\n        this._disposables.add(model.onDidCancel(e => {\n            this.reset();\n        }));\n        this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\n        this._disposables.add(widget.onDidHide(this.reset, this));\n        this._disposables.add(editor.onWillType(text => {\n            if (this._active && !widget.isFrozen() && model.state !== 0 /* State.Idle */) {\n                const ch = text.charCodeAt(text.length - 1);\n                if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* EditorOption.acceptSuggestionOnCommitCharacter */)) {\n                    accept(this._active.item);\n                }\n            }\n        }));\n    }\n    _onItem(selected) {\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n            // no item or no commit characters\n            this.reset();\n            return;\n        }\n        if (this._active && this._active.item.item === selected.item) {\n            // still the same item\n            return;\n        }\n        // keep item and its commit characters\n        const acceptCharacters = new CharacterSet();\n        for (const ch of selected.item.completion.commitCharacters) {\n            if (ch.length > 0) {\n                acceptCharacters.add(ch.charCodeAt(0));\n            }\n        }\n        this._active = { acceptCharacters, item: selected };\n    }\n    reset() {\n        this._active = undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CompletionModel } from './completionModel.js';\nimport { CompletionOptions, getSnippetSuggestSupport, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { InlineCompletionContextKeys } from '../../inlineCompletions/browser/inlineCompletionContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nexport class LineContext {\n    static shouldAutoTrigger(editor) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const pos = editor.getPosition();\n        model.tokenization.tokenizeIfCheap(pos.lineNumber);\n        const word = model.getWordAtPosition(pos);\n        if (!word) {\n            return false;\n        }\n        if (word.endColumn !== pos.column &&\n            word.startColumn + 1 !== pos.column /* after typing a single character before a word */) {\n            return false;\n        }\n        if (!isNaN(Number(word.word))) {\n            return false;\n        }\n        return true;\n    }\n    constructor(model, position, triggerOptions) {\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n        this.leadingWord = model.getWordUntilPosition(position);\n        this.lineNumber = position.lineNumber;\n        this.column = position.column;\n        this.triggerOptions = triggerOptions;\n    }\n}\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue(InlineCompletionContextKeys.inlineSuggestionVisible.key))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const suppressSuggestions = contextKeyService.getContextKeyValue(InlineCompletionContextKeys.suppressSuggestions.key);\n    if (suppressSuggestions !== undefined) {\n        return !suppressSuggestions;\n    }\n    return !editor.getOption(60 /* EditorOption.inlineSuggest */).suppressSuggestions;\n}\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const suppressSuggestions = contextKeyService.getContextKeyValue(InlineCompletionContextKeys.suppressSuggestions.key);\n    if (suppressSuggestions !== undefined) {\n        return !suppressSuggestions;\n    }\n    return !editor.getOption(60 /* EditorOption.inlineSuggest */).suppressSuggestions;\n}\nexport let SuggestModel = class SuggestModel {\n    constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._clipboardService = _clipboardService;\n        this._telemetryService = _telemetryService;\n        this._logService = _logService;\n        this._contextKeyService = _contextKeyService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._toDispose = new DisposableStore();\n        this._triggerCharacterListener = new DisposableStore();\n        this._triggerQuickSuggest = new TimeoutTimer();\n        this._triggerState = undefined;\n        this._completionDisposables = new DisposableStore();\n        this._onDidCancel = new Emitter();\n        this._onDidTrigger = new Emitter();\n        this._onDidSuggest = new Emitter();\n        this.onDidCancel = this._onDidCancel.event;\n        this.onDidTrigger = this._onDidTrigger.event;\n        this.onDidSuggest = this._onDidSuggest.event;\n        this._telemetryGate = 0;\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\n        // wire up various listeners\n        this._toDispose.add(this._editor.onDidChangeModel(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\n            this._updateTriggerCharacters();\n        }));\n        this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(() => {\n            this._updateTriggerCharacters();\n            this._updateActiveSuggestSession();\n        }));\n        let editorIsComposing = false;\n        this._toDispose.add(this._editor.onDidCompositionStart(() => {\n            editorIsComposing = true;\n        }));\n        this._toDispose.add(this._editor.onDidCompositionEnd(() => {\n            editorIsComposing = false;\n            this._onCompositionEnd();\n        }));\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\n            // only trigger suggest when the editor isn't composing a character\n            if (!editorIsComposing) {\n                this._onCursorChange(e);\n            }\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelContent(() => {\n            // only filter completions when the editor isn't composing a character\n            // allow-any-unicode-next-line\n            // e.g. ¨ + u makes ü but just ¨ cannot be used for filtering\n            if (!editorIsComposing && this._triggerState !== undefined) {\n                this._refilterCompletionItems();\n            }\n        }));\n        this._updateTriggerCharacters();\n    }\n    dispose() {\n        dispose(this._triggerCharacterListener);\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\n        this._toDispose.dispose();\n        this._completionDisposables.dispose();\n        this.cancel();\n    }\n    _updateTriggerCharacters() {\n        this._triggerCharacterListener.clear();\n        if (this._editor.getOption(88 /* EditorOption.readOnly */)\n            || !this._editor.hasModel()\n            || !this._editor.getOption(117 /* EditorOption.suggestOnTriggerCharacters */)) {\n            return;\n        }\n        const supportsByTriggerCharacter = new Map();\n        for (const support of this._languageFeaturesService.completionProvider.all(this._editor.getModel())) {\n            for (const ch of support.triggerCharacters || []) {\n                let set = supportsByTriggerCharacter.get(ch);\n                if (!set) {\n                    set = new Set();\n                    set.add(getSnippetSuggestSupport());\n                    supportsByTriggerCharacter.set(ch, set);\n                }\n                set.add(support);\n            }\n        }\n        const checkTriggerCharacter = (text) => {\n            var _a;\n            if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\n                return;\n            }\n            if (LineContext.shouldAutoTrigger(this._editor)) {\n                // don't trigger by trigger characters when this is a case for quick suggest\n                return;\n            }\n            if (!text) {\n                // came here from the compositionEnd-event\n                const position = this._editor.getPosition();\n                const model = this._editor.getModel();\n                text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n            }\n            let lastChar = '';\n            if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\n                if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\n                    lastChar = text.substr(text.length - 2);\n                }\n            }\n            else {\n                lastChar = text.charAt(text.length - 1);\n            }\n            const supports = supportsByTriggerCharacter.get(lastChar);\n            if (supports) {\n                // keep existing items that where not computed by the\n                // supports/providers that want to trigger now\n                const providerItemsToReuse = new Map();\n                if (this._completionModel) {\n                    for (const [provider, items] of this._completionModel.getItemsByProvider()) {\n                        if (!supports.has(provider)) {\n                            providerItemsToReuse.set(provider, items);\n                        }\n                    }\n                }\n                this.trigger({\n                    auto: true,\n                    triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n                    triggerCharacter: lastChar,\n                    retrigger: Boolean(this._completionModel),\n                    clipboardText: (_a = this._completionModel) === null || _a === void 0 ? void 0 : _a.clipboardText,\n                    completionOptions: { providerFilter: supports, providerItemsToReuse }\n                });\n            }\n        };\n        this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\n        this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\n    }\n    // --- trigger/retrigger/cancel suggest\n    get state() {\n        if (!this._triggerState) {\n            return 0 /* State.Idle */;\n        }\n        else if (!this._triggerState.auto) {\n            return 1 /* State.Manual */;\n        }\n        else {\n            return 2 /* State.Auto */;\n        }\n    }\n    cancel(retrigger = false) {\n        var _a;\n        if (this._triggerState !== undefined) {\n            this._triggerQuickSuggest.cancel();\n            (_a = this._requestToken) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._requestToken = undefined;\n            this._triggerState = undefined;\n            this._completionModel = undefined;\n            this._context = undefined;\n            this._onDidCancel.fire({ retrigger });\n        }\n    }\n    clear() {\n        this._completionDisposables.clear();\n    }\n    _updateActiveSuggestSession() {\n        if (this._triggerState !== undefined) {\n            if (!this._editor.hasModel() || !this._languageFeaturesService.completionProvider.has(this._editor.getModel())) {\n                this.cancel();\n            }\n            else {\n                this.trigger({ auto: this._triggerState.auto, retrigger: true });\n            }\n        }\n    }\n    _onCursorChange(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const prevSelection = this._currentSelection;\n        this._currentSelection = this._editor.getSelection();\n        if (!e.selection.isEmpty()\n            || (e.reason !== 0 /* CursorChangeReason.NotSet */ && e.reason !== 3 /* CursorChangeReason.Explicit */)\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\n            // Early exit if nothing needs to be done!\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n            this.cancel();\n            return;\n        }\n        if (this._triggerState === undefined && e.reason === 0 /* CursorChangeReason.NotSet */) {\n            if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n                // cursor did move RIGHT due to typing -> trigger quick suggest\n                this._doTriggerQuickSuggest();\n            }\n        }\n        else if (this._triggerState !== undefined && e.reason === 3 /* CursorChangeReason.Explicit */) {\n            // suggest is active and something like cursor keys are used to move\n            // the cursor. this means we can refilter at the new position\n            this._refilterCompletionItems();\n        }\n    }\n    _onCompositionEnd() {\n        // trigger or refilter when composition ends\n        if (this._triggerState === undefined) {\n            this._doTriggerQuickSuggest();\n        }\n        else {\n            this._refilterCompletionItems();\n        }\n    }\n    _doTriggerQuickSuggest() {\n        var _a;\n        if (QuickSuggestionsOptions.isAllOff(this._editor.getOption(86 /* EditorOption.quickSuggestions */))) {\n            // not enabled\n            return;\n        }\n        if (this._editor.getOption(114 /* EditorOption.suggest */).snippetsPreventQuickSuggestions && ((_a = SnippetController2.get(this._editor)) === null || _a === void 0 ? void 0 : _a.isInSnippet())) {\n            // no quick suggestion when in snippet mode\n            return;\n        }\n        this.cancel();\n        this._triggerQuickSuggest.cancelAndSet(() => {\n            if (this._triggerState !== undefined) {\n                return;\n            }\n            if (!LineContext.shouldAutoTrigger(this._editor)) {\n                return;\n            }\n            if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const pos = this._editor.getPosition();\n            // validate enabled now\n            const config = this._editor.getOption(86 /* EditorOption.quickSuggestions */);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                return;\n            }\n            if (!QuickSuggestionsOptions.isAllOn(config)) {\n                // Check the type of the token that triggered this\n                model.tokenization.tokenizeIfCheap(pos.lineNumber);\n                const lineTokens = model.tokenization.getLineTokens(pos.lineNumber);\n                const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n                if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'on') {\n                    return;\n                }\n            }\n            if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\n                // do not trigger quick suggestions if inline suggestions are shown\n                return;\n            }\n            if (!this._languageFeaturesService.completionProvider.has(model)) {\n                return;\n            }\n            // we made it till here -> trigger now\n            this.trigger({ auto: true });\n        }, this._editor.getOption(87 /* EditorOption.quickSuggestionsDelay */));\n    }\n    _refilterCompletionItems() {\n        assertType(this._editor.hasModel());\n        assertType(this._triggerState !== undefined);\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const ctx = new LineContext(model, position, Object.assign(Object.assign({}, this._triggerState), { refilter: true }));\n        this._onNewContext(ctx);\n    }\n    trigger(options) {\n        var _a, _b, _c, _d, _e, _f;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const ctx = new LineContext(model, this._editor.getPosition(), options);\n        // Cancel previous requests, change state & update UI\n        this.cancel(options.retrigger);\n        this._triggerState = options;\n        this._onDidTrigger.fire({ auto: options.auto, shy: (_a = options.shy) !== null && _a !== void 0 ? _a : false, position: this._editor.getPosition() });\n        // Capture context when request was sent\n        this._context = ctx;\n        // Build context for request\n        let suggestCtx = { triggerKind: (_b = options.triggerKind) !== null && _b !== void 0 ? _b : 0 /* CompletionTriggerKind.Invoke */ };\n        if (options.triggerCharacter) {\n            suggestCtx = {\n                triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n                triggerCharacter: options.triggerCharacter\n            };\n        }\n        this._requestToken = new CancellationTokenSource();\n        // kind filter and snippet sort rules\n        const snippetSuggestions = this._editor.getOption(108 /* EditorOption.snippetSuggestions */);\n        let snippetSortOrder = 1 /* SnippetSortOrder.Inline */;\n        switch (snippetSuggestions) {\n            case 'top':\n                snippetSortOrder = 0 /* SnippetSortOrder.Top */;\n                break;\n            // \t↓ that's the default anyways...\n            // case 'inline':\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\n            // \tbreak;\n            case 'bottom':\n                snippetSortOrder = 2 /* SnippetSortOrder.Bottom */;\n                break;\n        }\n        const { itemKind: itemKindFilter, showDeprecated } = SuggestModel._createSuggestFilter(this._editor);\n        const completionOptions = new CompletionOptions(snippetSortOrder, (_d = (_c = options.completionOptions) === null || _c === void 0 ? void 0 : _c.kindFilter) !== null && _d !== void 0 ? _d : itemKindFilter, (_e = options.completionOptions) === null || _e === void 0 ? void 0 : _e.providerFilter, (_f = options.completionOptions) === null || _f === void 0 ? void 0 : _f.providerItemsToReuse, showDeprecated);\n        const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\n        const completions = provideSuggestionItems(this._languageFeaturesService.completionProvider, model, this._editor.getPosition(), completionOptions, suggestCtx, this._requestToken.token);\n        Promise.all([completions, wordDistance]).then(([completions, wordDistance]) => __awaiter(this, void 0, void 0, function* () {\n            var _g;\n            (_g = this._requestToken) === null || _g === void 0 ? void 0 : _g.dispose();\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            let clipboardText = options === null || options === void 0 ? void 0 : options.clipboardText;\n            if (!clipboardText && completions.needsClipboard) {\n                clipboardText = yield this._clipboardService.readText();\n            }\n            if (this._triggerState === undefined) {\n                return;\n            }\n            const model = this._editor.getModel();\n            // const items = completions.items;\n            // if (existing) {\n            // \tconst cmpFn = getSuggestionComparator(snippetSortOrder);\n            // \titems = items.concat(existing.items).sort(cmpFn);\n            // }\n            const ctx = new LineContext(model, this._editor.getPosition(), options);\n            const fuzzySearchOptions = Object.assign(Object.assign({}, FuzzyScoreOptions.default), { firstMatchCanBeWeak: !this._editor.getOption(114 /* EditorOption.suggest */).matchOnWordStartOnly });\n            this._completionModel = new CompletionModel(completions.items, this._context.column, {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            }, wordDistance, this._editor.getOption(114 /* EditorOption.suggest */), this._editor.getOption(108 /* EditorOption.snippetSuggestions */), fuzzySearchOptions, clipboardText);\n            // store containers so that they can be disposed later\n            this._completionDisposables.add(completions.disposable);\n            this._onNewContext(ctx);\n            // finally report telemetry about durations\n            this._reportDurationsTelemetry(completions.durations);\n        })).catch(onUnexpectedError);\n    }\n    _reportDurationsTelemetry(durations) {\n        if (this._telemetryGate++ % 230 !== 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._telemetryService.publicLog2('suggest.durations.json', { data: JSON.stringify(durations) });\n            this._logService.debug('suggest.durations.json', durations);\n        });\n    }\n    static _createSuggestFilter(editor) {\n        // kind filter and snippet sort rules\n        const result = new Set();\n        // snippet setting\n        const snippetSuggestions = editor.getOption(108 /* EditorOption.snippetSuggestions */);\n        if (snippetSuggestions === 'none') {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        // type setting\n        const suggestOptions = editor.getOption(114 /* EditorOption.suggest */);\n        if (!suggestOptions.showMethods) {\n            result.add(0 /* CompletionItemKind.Method */);\n        }\n        if (!suggestOptions.showFunctions) {\n            result.add(1 /* CompletionItemKind.Function */);\n        }\n        if (!suggestOptions.showConstructors) {\n            result.add(2 /* CompletionItemKind.Constructor */);\n        }\n        if (!suggestOptions.showFields) {\n            result.add(3 /* CompletionItemKind.Field */);\n        }\n        if (!suggestOptions.showVariables) {\n            result.add(4 /* CompletionItemKind.Variable */);\n        }\n        if (!suggestOptions.showClasses) {\n            result.add(5 /* CompletionItemKind.Class */);\n        }\n        if (!suggestOptions.showStructs) {\n            result.add(6 /* CompletionItemKind.Struct */);\n        }\n        if (!suggestOptions.showInterfaces) {\n            result.add(7 /* CompletionItemKind.Interface */);\n        }\n        if (!suggestOptions.showModules) {\n            result.add(8 /* CompletionItemKind.Module */);\n        }\n        if (!suggestOptions.showProperties) {\n            result.add(9 /* CompletionItemKind.Property */);\n        }\n        if (!suggestOptions.showEvents) {\n            result.add(10 /* CompletionItemKind.Event */);\n        }\n        if (!suggestOptions.showOperators) {\n            result.add(11 /* CompletionItemKind.Operator */);\n        }\n        if (!suggestOptions.showUnits) {\n            result.add(12 /* CompletionItemKind.Unit */);\n        }\n        if (!suggestOptions.showValues) {\n            result.add(13 /* CompletionItemKind.Value */);\n        }\n        if (!suggestOptions.showConstants) {\n            result.add(14 /* CompletionItemKind.Constant */);\n        }\n        if (!suggestOptions.showEnums) {\n            result.add(15 /* CompletionItemKind.Enum */);\n        }\n        if (!suggestOptions.showEnumMembers) {\n            result.add(16 /* CompletionItemKind.EnumMember */);\n        }\n        if (!suggestOptions.showKeywords) {\n            result.add(17 /* CompletionItemKind.Keyword */);\n        }\n        if (!suggestOptions.showWords) {\n            result.add(18 /* CompletionItemKind.Text */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(19 /* CompletionItemKind.Color */);\n        }\n        if (!suggestOptions.showFiles) {\n            result.add(20 /* CompletionItemKind.File */);\n        }\n        if (!suggestOptions.showReferences) {\n            result.add(21 /* CompletionItemKind.Reference */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(22 /* CompletionItemKind.Customcolor */);\n        }\n        if (!suggestOptions.showFolders) {\n            result.add(23 /* CompletionItemKind.Folder */);\n        }\n        if (!suggestOptions.showTypeParameters) {\n            result.add(24 /* CompletionItemKind.TypeParameter */);\n        }\n        if (!suggestOptions.showSnippets) {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        if (!suggestOptions.showUsers) {\n            result.add(25 /* CompletionItemKind.User */);\n        }\n        if (!suggestOptions.showIssues) {\n            result.add(26 /* CompletionItemKind.Issue */);\n        }\n        return { itemKind: result, showDeprecated: suggestOptions.showDeprecated };\n    }\n    _onNewContext(ctx) {\n        if (!this._context) {\n            // happens when 24x7 IntelliSense is enabled and still in its delay\n            return;\n        }\n        if (ctx.lineNumber !== this._context.lineNumber) {\n            // e.g. happens when pressing Enter while IntelliSense is computed\n            this.cancel();\n            return;\n        }\n        if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\n            // cancel IntelliSense when line start changes\n            // happens when the current word gets outdented\n            this.cancel();\n            return;\n        }\n        if (ctx.column < this._context.column) {\n            // typed -> moved cursor LEFT -> retrigger if still on a word\n            if (ctx.leadingWord.word) {\n                this.trigger({ auto: this._context.triggerOptions.auto, retrigger: true });\n            }\n            else {\n                this.cancel();\n            }\n            return;\n        }\n        if (!this._completionModel) {\n            // happens when IntelliSense is not yet computed\n            return;\n        }\n        if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\n            // started a new word while IntelliSense shows -> retrigger but reuse all items that we currently have\n            const shouldAutoTrigger = LineContext.shouldAutoTrigger(this._editor);\n            if (shouldAutoTrigger && this._context) {\n                // shouldAutoTrigger forces tokenization, which can cause pending cursor change events to be emitted, which can cause\n                // suggestions to be cancelled, which causes `this._context` to be undefined\n                const map = this._completionModel.getItemsByProvider();\n                this.trigger({\n                    auto: this._context.triggerOptions.auto,\n                    retrigger: true,\n                    clipboardText: this._completionModel.clipboardText,\n                    completionOptions: { providerItemsToReuse: map }\n                });\n            }\n            return;\n        }\n        if (ctx.column > this._context.column && this._completionModel.getIncompleteProvider().size > 0 && ctx.leadingWord.word.length !== 0) {\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n            const providerItemsToReuse = new Map();\n            const providerFilter = new Set();\n            for (const [provider, items] of this._completionModel.getItemsByProvider()) {\n                if (items.length > 0 && items[0].container.incomplete) {\n                    providerFilter.add(provider);\n                }\n                else {\n                    providerItemsToReuse.set(provider, items);\n                }\n            }\n            this.trigger({\n                auto: this._context.triggerOptions.auto,\n                triggerKind: 2 /* CompletionTriggerKind.TriggerForIncompleteCompletions */,\n                retrigger: true,\n                clipboardText: this._completionModel.clipboardText,\n                completionOptions: { providerFilter, providerItemsToReuse }\n            });\n        }\n        else {\n            // typed -> moved cursor RIGHT -> update UI\n            const oldLineContext = this._completionModel.lineContext;\n            let isFrozen = false;\n            this._completionModel.lineContext = {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            };\n            if (this._completionModel.items.length === 0) {\n                const shouldAutoTrigger = LineContext.shouldAutoTrigger(this._editor);\n                if (!this._context) {\n                    // shouldAutoTrigger forces tokenization, which can cause pending cursor change events to be emitted, which can cause\n                    // suggestions to be cancelled, which causes `this._context` to be undefined\n                    this.cancel();\n                    return;\n                }\n                if (shouldAutoTrigger && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n                    // retrigger when heading into a new word\n                    this.trigger({ auto: this._context.triggerOptions.auto, retrigger: true });\n                    return;\n                }\n                if (!this._context.triggerOptions.auto) {\n                    // freeze when IntelliSense was manually requested\n                    this._completionModel.lineContext = oldLineContext;\n                    isFrozen = this._completionModel.items.length > 0;\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\n                        // there were results before but now there aren't\n                        // and also we are not on a word anymore -> cancel\n                        this.cancel();\n                        return;\n                    }\n                }\n                else {\n                    // nothing left\n                    this.cancel();\n                    return;\n                }\n            }\n            this._onDidSuggest.fire({\n                completionModel: this._completionModel,\n                triggerOptions: ctx.triggerOptions,\n                isFrozen,\n            });\n        }\n    }\n};\nSuggestModel = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IClipboardService),\n    __param(3, ITelemetryService),\n    __param(4, ILogService),\n    __param(5, IContextKeyService),\n    __param(6, IConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], SuggestModel);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class OvertypingCapturer {\n    constructor(editor, suggestModel) {\n        this._disposables = new DisposableStore();\n        this._lastOvertyped = [];\n        this._locked = false;\n        this._disposables.add(editor.onWillType(() => {\n            if (this._locked || !editor.hasModel()) {\n                return;\n            }\n            const selections = editor.getSelections();\n            const selectionsLength = selections.length;\n            // Check if it will overtype any selections\n            let willOvertype = false;\n            for (let i = 0; i < selectionsLength; i++) {\n                if (!selections[i].isEmpty()) {\n                    willOvertype = true;\n                    break;\n                }\n            }\n            if (!willOvertype) {\n                if (this._lastOvertyped.length !== 0) {\n                    this._lastOvertyped.length = 0;\n                }\n                return;\n            }\n            this._lastOvertyped = [];\n            const model = editor.getModel();\n            for (let i = 0; i < selectionsLength; i++) {\n                const selection = selections[i];\n                // Check for overtyping capturer restrictions\n                if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\n                    return;\n                }\n                this._lastOvertyped[i] = { value: model.getValueInRange(selection), multiline: selection.startLineNumber !== selection.endLineNumber };\n            }\n        }));\n        this._disposables.add(suggestModel.onDidTrigger(e => {\n            this._locked = true;\n        }));\n        this._disposables.add(suggestModel.onDidCancel(e => {\n            this._locked = false;\n        }));\n    }\n    getLastOvertypedInfo(idx) {\n        if (idx >= 0 && idx < this._lastOvertyped.length) {\n            return this._lastOvertyped[idx];\n        }\n        return undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nOvertypingCapturer._maxSelectionLength = 51200;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            this.label.textContent = localize({ key: 'content', comment: ['A label', 'A keybinding'] }, '{0} ({1})', this._action.label, StatusBarViewItem.symbolPrintEnter(kb));\n        }\n    }\n    static symbolPrintEnter(kb) {\n        var _a;\n        return (_a = kb.getLabel()) === null || _a === void 0 ? void 0 : _a.replace(/\\benter\\b/gi, '\\u23CE');\n    }\n}\nexport let SuggestWidgetStatus = class SuggestWidgetStatus {\n    constructor(container, _menuId, instantiationService, _menuService, _contextKeyService) {\n        this._menuId = _menuId;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._menuDisposables = new DisposableStore();\n        this.element = dom.append(container, dom.$('.suggest-status-bar'));\n        const actionViewItemProvider = (action => {\n            return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\n        });\n        this._leftActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._rightActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._leftActions.domNode.classList.add('left');\n        this._rightActions.domNode.classList.add('right');\n    }\n    dispose() {\n        this._menuDisposables.dispose();\n        this.element.remove();\n    }\n    show() {\n        const menu = this._menuService.createMenu(this._menuId, this._contextKeyService);\n        const renderMenu = () => {\n            const left = [];\n            const right = [];\n            for (const [group, actions] of menu.getActions()) {\n                if (group === 'left') {\n                    left.push(...actions);\n                }\n                else {\n                    right.push(...actions);\n                }\n            }\n            this._leftActions.clear();\n            this._leftActions.push(left);\n            this._rightActions.clear();\n            this._rightActions.push(right);\n        };\n        this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\n        this._menuDisposables.add(menu);\n    }\n    hide() {\n        this._menuDisposables.clear();\n    }\n};\nSuggestWidgetStatus = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, IMenuService),\n    __param(4, IContextKeyService)\n], SuggestWidgetStatus);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function canExpandCompletionItem(item) {\n    return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\n}\nexport let SuggestDetailsWidget = class SuggestDetailsWidget {\n    constructor(_editor, instaService) {\n        this._editor = _editor;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        this._onDidChangeContents = new Emitter();\n        this.onDidChangeContents = this._onDidChangeContents.event;\n        this._disposables = new DisposableStore();\n        this._renderDisposeable = new DisposableStore();\n        this._borderWidth = 1;\n        this._size = new dom.Dimension(330, 0);\n        this.domNode = dom.$('.suggest-details');\n        this.domNode.classList.add('no-docs');\n        this._markdownRenderer = instaService.createInstance(MarkdownRenderer, { editor: _editor });\n        this._body = dom.$('.body');\n        this._scrollbar = new DomScrollableElement(this._body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        dom.append(this.domNode, this._scrollbar.getDomNode());\n        this._disposables.add(this._scrollbar);\n        this._header = dom.append(this._body, dom.$('.header'));\n        this._close = dom.append(this._header, dom.$('span' + ThemeIcon.asCSSSelector(Codicon.close)));\n        this._close.title = nls.localize('details.close', \"Close\");\n        this._type = dom.append(this._header, dom.$('p.type'));\n        this._docs = dom.append(this._body, dom.$('p.docs'));\n        this._configureFont();\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(48 /* EditorOption.fontInfo */)) {\n                this._configureFont();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._renderDisposeable.dispose();\n    }\n    _configureFont() {\n        const options = this._editor.getOptions();\n        const fontInfo = options.get(48 /* EditorOption.fontInfo */);\n        const fontFamily = fontInfo.getMassagedFontFamily();\n        const fontSize = options.get(115 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n        const lineHeight = options.get(116 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n        const fontWeight = fontInfo.fontWeight;\n        const fontSizePx = `${fontSize}px`;\n        const lineHeightPx = `${lineHeight}px`;\n        this.domNode.style.fontSize = fontSizePx;\n        this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this.domNode.style.fontWeight = fontWeight;\n        this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        this._type.style.fontFamily = fontFamily;\n        this._close.style.height = lineHeightPx;\n        this._close.style.width = lineHeightPx;\n    }\n    getLayoutInfo() {\n        const lineHeight = this._editor.getOption(116 /* EditorOption.suggestLineHeight */) || this._editor.getOption(48 /* EditorOption.fontInfo */).lineHeight;\n        const borderWidth = this._borderWidth;\n        const borderHeight = borderWidth * 2;\n        return {\n            lineHeight,\n            borderWidth,\n            borderHeight,\n            verticalPadding: 22,\n            horizontalPadding: 14\n        };\n    }\n    renderLoading() {\n        this._type.textContent = nls.localize('loading', \"Loading...\");\n        this._docs.textContent = '';\n        this.domNode.classList.remove('no-docs', 'no-type');\n        this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n        this._onDidChangeContents.fire(this);\n    }\n    renderItem(item, explainMode) {\n        var _a, _b;\n        this._renderDisposeable.clear();\n        let { detail, documentation } = item.completion;\n        if (explainMode) {\n            let md = '';\n            md += `score: ${item.score[0]}\\n`;\n            md += `prefix: ${(_a = item.word) !== null && _a !== void 0 ? _a : '(no prefix)'}\\n`;\n            md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\n            md += `distance: ${item.distance} (localityBonus-setting)\\n`;\n            md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\n            md += `commit_chars: ${(_b = item.completion.commitCharacters) === null || _b === void 0 ? void 0 : _b.join('')}\\n`;\n            documentation = new MarkdownString().appendCodeblock('empty', md);\n            detail = `Provider: ${item.provider._debugDisplayName}`;\n        }\n        if (!explainMode && !canExpandCompletionItem(item)) {\n            this.clearContents();\n            return;\n        }\n        this.domNode.classList.remove('no-docs', 'no-type');\n        // --- details\n        if (detail) {\n            const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}…` : detail;\n            this._type.textContent = cappedDetail;\n            this._type.title = cappedDetail;\n            dom.show(this._type);\n            this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\n        }\n        else {\n            dom.clearNode(this._type);\n            this._type.title = '';\n            dom.hide(this._type);\n            this.domNode.classList.add('no-type');\n        }\n        // --- documentation\n        dom.clearNode(this._docs);\n        if (typeof documentation === 'string') {\n            this._docs.classList.remove('markdown-docs');\n            this._docs.textContent = documentation;\n        }\n        else if (documentation) {\n            this._docs.classList.add('markdown-docs');\n            dom.clearNode(this._docs);\n            const renderedContents = this._markdownRenderer.render(documentation);\n            this._docs.appendChild(renderedContents.element);\n            this._renderDisposeable.add(renderedContents);\n            this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\n                this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n                this._onDidChangeContents.fire(this);\n            }));\n        }\n        this.domNode.style.userSelect = 'text';\n        this.domNode.tabIndex = -1;\n        this._close.onmousedown = e => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n        this._close.onclick = e => {\n            e.preventDefault();\n            e.stopPropagation();\n            this._onDidClose.fire();\n        };\n        this._body.scrollTop = 0;\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n        this._onDidChangeContents.fire(this);\n    }\n    clearContents() {\n        this.domNode.classList.add('no-docs');\n        this._type.textContent = '';\n        this._docs.textContent = '';\n    }\n    get size() {\n        return this._size;\n    }\n    layout(width, height) {\n        const newSize = new dom.Dimension(width, height);\n        if (!dom.Dimension.equals(newSize, this._size)) {\n            this._size = newSize;\n            dom.size(this.domNode, width, height);\n        }\n        this._scrollbar.scanDomNode();\n    }\n    scrollDown(much = 8) {\n        this._body.scrollTop += much;\n    }\n    scrollUp(much = 8) {\n        this._body.scrollTop -= much;\n    }\n    scrollTop() {\n        this._body.scrollTop = 0;\n    }\n    scrollBottom() {\n        this._body.scrollTop = this._body.scrollHeight;\n    }\n    pageDown() {\n        this.scrollDown(80);\n    }\n    pageUp() {\n        this.scrollUp(80);\n    }\n    set borderWidth(width) {\n        this._borderWidth = width;\n    }\n    get borderWidth() {\n        return this._borderWidth;\n    }\n};\nSuggestDetailsWidget = __decorate([\n    __param(1, IInstantiationService)\n], SuggestDetailsWidget);\nexport class SuggestDetailsOverlay {\n    constructor(widget, _editor) {\n        this.widget = widget;\n        this._editor = _editor;\n        this._disposables = new DisposableStore();\n        this._added = false;\n        this._preferAlignAtTop = true;\n        this._resizable = new ResizableHTMLElement();\n        this._resizable.domNode.classList.add('suggest-details-container');\n        this._resizable.domNode.appendChild(widget.domNode);\n        this._resizable.enableSashes(false, true, true, false);\n        let topLeftNow;\n        let sizeNow;\n        let deltaTop = 0;\n        let deltaLeft = 0;\n        this._disposables.add(this._resizable.onDidWillResize(() => {\n            topLeftNow = this._topLeft;\n            sizeNow = this._resizable.size;\n        }));\n        this._disposables.add(this._resizable.onDidResize(e => {\n            if (topLeftNow && sizeNow) {\n                this.widget.layout(e.dimension.width, e.dimension.height);\n                let updateTopLeft = false;\n                if (e.west) {\n                    deltaLeft = sizeNow.width - e.dimension.width;\n                    updateTopLeft = true;\n                }\n                if (e.north) {\n                    deltaTop = sizeNow.height - e.dimension.height;\n                    updateTopLeft = true;\n                }\n                if (updateTopLeft) {\n                    this._applyTopLeft({\n                        top: topLeftNow.top + deltaTop,\n                        left: topLeftNow.left + deltaLeft,\n                    });\n                }\n            }\n            if (e.done) {\n                topLeftNow = undefined;\n                sizeNow = undefined;\n                deltaTop = 0;\n                deltaLeft = 0;\n                this._userSize = e.dimension;\n            }\n        }));\n        this._disposables.add(this.widget.onDidChangeContents(() => {\n            var _a;\n            if (this._anchorBox) {\n                this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, this._preferAlignAtTop);\n            }\n        }));\n    }\n    dispose() {\n        this._resizable.dispose();\n        this._disposables.dispose();\n        this.hide();\n    }\n    getId() {\n        return 'suggest.details';\n    }\n    getDomNode() {\n        return this._resizable.domNode;\n    }\n    getPosition() {\n        return null;\n    }\n    show() {\n        if (!this._added) {\n            this._editor.addOverlayWidget(this);\n            this.getDomNode().style.position = 'fixed';\n            this._added = true;\n        }\n    }\n    hide(sessionEnded = false) {\n        this._resizable.clearSashHoverState();\n        if (this._added) {\n            this._editor.removeOverlayWidget(this);\n            this._added = false;\n            this._anchorBox = undefined;\n            this._topLeft = undefined;\n        }\n        if (sessionEnded) {\n            this._userSize = undefined;\n            this.widget.clearContents();\n        }\n    }\n    placeAtAnchor(anchor, preferAlignAtTop) {\n        var _a;\n        const anchorBox = anchor.getBoundingClientRect();\n        this._anchorBox = anchorBox;\n        this._preferAlignAtTop = preferAlignAtTop;\n        this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, preferAlignAtTop);\n    }\n    _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\n        var _a;\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.widget.getLayoutInfo();\n        const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n        const defaultTop = anchorBox.top;\n        // EAST\n        const eastPlacement = (function () {\n            const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\n            const left = -info.borderWidth + anchorBox.left + anchorBox.width;\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // WEST\n        const westPlacement = (function () {\n            const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\n            const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // SOUTH\n        const southPacement = (function () {\n            const left = anchorBox.left;\n            const top = -info.borderWidth + anchorBox.top + anchorBox.height;\n            const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\n            return { top, left, fit: maxSizeBottom.height - size.height, maxSizeBottom, maxSizeTop: maxSizeBottom, minSize: defaultMinSize.with(maxSizeBottom.width) };\n        })();\n        // take first placement that fits or the first with \"least bad\" fit\n        const placements = [eastPlacement, westPlacement, southPacement];\n        const placement = (_a = placements.find(p => p.fit >= 0)) !== null && _a !== void 0 ? _a : placements.sort((a, b) => b.fit - a.fit)[0];\n        // top/bottom placement\n        const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n        let alignAtTop;\n        let height = size.height;\n        const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\n        if (height > maxHeight) {\n            height = maxHeight;\n        }\n        let maxSize;\n        if (preferAlignAtTop) {\n            if (height <= placement.maxSizeTop.height) {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n            else {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n        }\n        else {\n            if (height <= placement.maxSizeBottom.height) {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n            else {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n        }\n        this._applyTopLeft({ left: placement.left, top: alignAtTop ? placement.top : bottom - height });\n        this.getDomNode().style.position = 'fixed';\n        this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\n        this._resizable.minSize = placement.minSize;\n        this._resizable.maxSize = maxSize;\n        this._resizable.layout(height, Math.min(maxSize.width, size.width));\n        this.widget.layout(this._resizable.size.width, this._resizable.size.height);\n    }\n    _applyTopLeft(topLeft) {\n        this._topLeft = topLeft;\n        this.getDomNode().style.left = `${this._topLeft.left}px`;\n        this.getDomNode().style.top = `${this._topLeft.top}px`;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { createMatches } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport * as nls from '../../../../nls.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\nexport function getAriaId(index) {\n    return `suggest-aria-id:${index}`;\n}\nconst suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\nconst _completionItemColor = new (_a = class ColorExtractor {\n        extract(item, out) {\n            if (item.textLabel.match(ColorExtractor._regexStrict)) {\n                out[0] = item.textLabel;\n                return true;\n            }\n            if (item.completion.detail && item.completion.detail.match(ColorExtractor._regexStrict)) {\n                out[0] = item.completion.detail;\n                return true;\n            }\n            if (typeof item.completion.documentation === 'string') {\n                const match = ColorExtractor._regexRelaxed.exec(item.completion.documentation);\n                if (match && (match.index === 0 || match.index + match[0].length === item.completion.documentation.length)) {\n                    out[0] = match[0];\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n    _a._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/,\n    _a._regexStrict = new RegExp(`^${_a._regexRelaxed.source}$`, 'i'),\n    _a);\nexport let ItemRenderer = class ItemRenderer {\n    constructor(_editor, _modelService, _languageService, _themeService) {\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._languageService = _languageService;\n        this._themeService = _themeService;\n        this._onDidToggleDetails = new Emitter();\n        this.onDidToggleDetails = this._onDidToggleDetails.event;\n        this.templateId = 'suggestion';\n    }\n    dispose() {\n        this._onDidToggleDetails.dispose();\n    }\n    renderTemplate(container) {\n        const disposables = new DisposableStore();\n        const root = container;\n        root.classList.add('show-file-icons');\n        const icon = append(container, $('.icon'));\n        const colorspan = append(icon, $('span.colorspan'));\n        const text = append(container, $('.contents'));\n        const main = append(text, $('.main'));\n        const iconContainer = append(main, $('.icon-label.codicon'));\n        const left = append(main, $('span.left'));\n        const right = append(main, $('span.right'));\n        const iconLabel = new IconLabel(left, { supportHighlights: true, supportIcons: true });\n        disposables.add(iconLabel);\n        const parametersLabel = append(left, $('span.signature-label'));\n        const qualifierLabel = append(left, $('span.qualifier-label'));\n        const detailsLabel = append(right, $('span.details-label'));\n        const readMore = append(right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\n        readMore.title = nls.localize('readMore', \"Read More\");\n        const configureFont = () => {\n            const options = this._editor.getOptions();\n            const fontInfo = options.get(48 /* EditorOption.fontInfo */);\n            const fontFamily = fontInfo.getMassagedFontFamily();\n            const fontFeatureSettings = fontInfo.fontFeatureSettings;\n            const fontSize = options.get(115 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n            const lineHeight = options.get(116 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n            const fontWeight = fontInfo.fontWeight;\n            const letterSpacing = fontInfo.letterSpacing;\n            const fontSizePx = `${fontSize}px`;\n            const lineHeightPx = `${lineHeight}px`;\n            const letterSpacingPx = `${letterSpacing}px`;\n            root.style.fontSize = fontSizePx;\n            root.style.fontWeight = fontWeight;\n            root.style.letterSpacing = letterSpacingPx;\n            main.style.fontFamily = fontFamily;\n            main.style.fontFeatureSettings = fontFeatureSettings;\n            main.style.lineHeight = lineHeightPx;\n            icon.style.height = lineHeightPx;\n            icon.style.width = lineHeightPx;\n            readMore.style.height = lineHeightPx;\n            readMore.style.width = lineHeightPx;\n        };\n        configureFont();\n        disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(48 /* EditorOption.fontInfo */) || e.hasChanged(115 /* EditorOption.suggestFontSize */) || e.hasChanged(116 /* EditorOption.suggestLineHeight */)) {\n                configureFont();\n            }\n        }));\n        return { root, left, right, icon, colorspan, iconLabel, iconContainer, parametersLabel, qualifierLabel, detailsLabel, readMore, disposables };\n    }\n    renderElement(element, index, data) {\n        const { completion } = element;\n        data.root.id = getAriaId(index);\n        data.colorspan.style.backgroundColor = '';\n        const labelOptions = {\n            labelEscapeNewLines: true,\n            matches: createMatches(element.score)\n        };\n        const color = [];\n        if (completion.kind === 19 /* CompletionItemKind.Color */ && _completionItemColor.extract(element, color)) {\n            // special logic for 'color' completion items\n            data.icon.className = 'icon customcolor';\n            data.iconContainer.className = 'icon hide';\n            data.colorspan.style.backgroundColor = color[0];\n        }\n        else if (completion.kind === 20 /* CompletionItemKind.File */ && this._themeService.getFileIconTheme().hasFileIcons) {\n            // special logic for 'file' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FILE);\n            const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FILE);\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n        }\n        else if (completion.kind === 23 /* CompletionItemKind.Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\n            // special logic for 'folder' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            labelOptions.extraClasses = [\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FOLDER),\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FOLDER)\n            ].flat();\n        }\n        else {\n            // normal icon\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = '';\n            data.iconContainer.classList.add('suggest-icon', ...ThemeIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\n        }\n        if (completion.tags && completion.tags.indexOf(1 /* CompletionItemTag.Deprecated */) >= 0) {\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n            labelOptions.matches = [];\n        }\n        data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\n        if (typeof completion.label === 'string') {\n            data.parametersLabel.textContent = '';\n            data.detailsLabel.textContent = stripNewLines(completion.detail || '');\n            data.root.classList.add('string-label');\n        }\n        else {\n            data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\n            data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\n            data.root.classList.remove('string-label');\n        }\n        if (this._editor.getOption(114 /* EditorOption.suggest */).showInlineDetails) {\n            show(data.detailsLabel);\n        }\n        else {\n            hide(data.detailsLabel);\n        }\n        if (canExpandCompletionItem(element)) {\n            data.right.classList.add('can-expand-details');\n            show(data.readMore);\n            data.readMore.onmousedown = e => {\n                e.stopPropagation();\n                e.preventDefault();\n            };\n            data.readMore.onclick = e => {\n                e.stopPropagation();\n                e.preventDefault();\n                this._onDidToggleDetails.fire();\n            };\n        }\n        else {\n            data.right.classList.remove('can-expand-details');\n            hide(data.readMore);\n            data.readMore.onmousedown = null;\n            data.readMore.onclick = null;\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n};\nItemRenderer = __decorate([\n    __param(1, IModelService),\n    __param(2, ILanguageService),\n    __param(3, IThemeService)\n], ItemRenderer);\nfunction stripNewLines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter, PauseableEmitter } from '../../../../base/common/event.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\n/**\n * Suggest widget colors\n */\nregisterColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hcDark: editorWidgetBackground, hcLight: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nregisterColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hcDark: editorWidgetBorder, hcLight: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nconst editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hcDark: editorForeground, hcLight: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nregisterColor('editorSuggestWidget.selectedForeground', { dark: quickInputListFocusForeground, light: quickInputListFocusForeground, hcDark: quickInputListFocusForeground, hcLight: quickInputListFocusForeground }, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nregisterColor('editorSuggestWidget.selectedIconForeground', { dark: quickInputListFocusIconForeground, light: quickInputListFocusIconForeground, hcDark: quickInputListFocusIconForeground, hcLight: quickInputListFocusIconForeground }, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: quickInputListFocusBackground, light: quickInputListFocusBackground, hcDark: quickInputListFocusBackground, hcLight: quickInputListFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nregisterColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nregisterColor('editorSuggestWidget.focusHighlightForeground', { dark: listFocusHighlightForeground, light: listFocusHighlightForeground, hcDark: listFocusHighlightForeground, hcLight: listFocusHighlightForeground }, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nregisterColor('editorSuggestWidgetStatus.foreground', { dark: transparent(editorSuggestWidgetForeground, .5), light: transparent(editorSuggestWidgetForeground, .5), hcDark: transparent(editorSuggestWidgetForeground, .5), hcLight: transparent(editorSuggestWidgetForeground, .5) }, nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\nclass PersistedWidgetSize {\n    constructor(_service, editor) {\n        this._service = _service;\n        this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n    }\n    restore() {\n        var _a;\n        const raw = (_a = this._service.get(this._key, 0 /* StorageScope.PROFILE */)) !== null && _a !== void 0 ? _a : '';\n        try {\n            const obj = JSON.parse(raw);\n            if (dom.Dimension.is(obj)) {\n                return dom.Dimension.lift(obj);\n            }\n        }\n        catch (_b) {\n            // ignore\n        }\n        return undefined;\n    }\n    store(size) {\n        this._service.store(this._key, JSON.stringify(size), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n    }\n    reset() {\n        this._service.remove(this._key, 0 /* StorageScope.PROFILE */);\n    }\n}\nexport let SuggestWidget = class SuggestWidget {\n    constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\n        this.editor = editor;\n        this._storageService = _storageService;\n        this._state = 0 /* State.Hidden */;\n        this._isAuto = false;\n        this._pendingLayout = new MutableDisposable();\n        this._pendingShowDetails = new MutableDisposable();\n        this._ignoreFocusEvents = false;\n        this._forceRenderingAbove = false;\n        this._explainMode = false;\n        this._showTimeout = new TimeoutTimer();\n        this._disposables = new DisposableStore();\n        this._onDidSelect = new PauseableEmitter();\n        this._onDidFocus = new PauseableEmitter();\n        this._onDidHide = new Emitter();\n        this._onDidShow = new Emitter();\n        this.onDidSelect = this._onDidSelect.event;\n        this.onDidFocus = this._onDidFocus.event;\n        this.onDidHide = this._onDidHide.event;\n        this.onDidShow = this._onDidShow.event;\n        this._onDetailsKeydown = new Emitter();\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\n        this.element = new ResizableHTMLElement();\n        this.element.domNode.classList.add('editor-widget', 'suggest-widget');\n        this._contentWidget = new SuggestContentWidget(this, editor);\n        this._persistedSize = new PersistedWidgetSize(_storageService, editor);\n        class ResizeState {\n            constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\n                this.persistedSize = persistedSize;\n                this.currentSize = currentSize;\n                this.persistHeight = persistHeight;\n                this.persistWidth = persistWidth;\n            }\n        }\n        let state;\n        this._disposables.add(this.element.onDidWillResize(() => {\n            this._contentWidget.lockPreference();\n            state = new ResizeState(this._persistedSize.restore(), this.element.size);\n        }));\n        this._disposables.add(this.element.onDidResize(e => {\n            var _a, _b, _c, _d;\n            this._resize(e.dimension.width, e.dimension.height);\n            if (state) {\n                state.persistHeight = state.persistHeight || !!e.north || !!e.south;\n                state.persistWidth = state.persistWidth || !!e.east || !!e.west;\n            }\n            if (!e.done) {\n                return;\n            }\n            if (state) {\n                // only store width or height value that have changed and also\n                // only store changes that are above a certain threshold\n                const { itemHeight, defaultSize } = this.getLayoutInfo();\n                const threshold = Math.round(itemHeight / 2);\n                let { width, height } = this.element.size;\n                if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n                    height = (_b = (_a = state.persistedSize) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : defaultSize.height;\n                }\n                if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n                    width = (_d = (_c = state.persistedSize) === null || _c === void 0 ? void 0 : _c.width) !== null && _d !== void 0 ? _d : defaultSize.width;\n                }\n                this._persistedSize.store(new dom.Dimension(width, height));\n            }\n            // reset working state\n            this._contentWidget.unlockPreference();\n            state = undefined;\n        }));\n        this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n        this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n        const details = instantiationService.createInstance(SuggestDetailsWidget, this.editor);\n        details.onDidClose(this.toggleDetails, this, this._disposables);\n        this._details = new SuggestDetailsOverlay(details, this.editor);\n        const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(114 /* EditorOption.suggest */).showIcons);\n        applyIconStyle();\n        const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n        this._disposables.add(renderer);\n        this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n        this._list = new List('SuggestWidget', this._listElement, {\n            getHeight: (_element) => this.getLayoutInfo().itemHeight,\n            getTemplateId: (_element) => 'suggestion'\n        }, [renderer], {\n            alwaysConsumeMouseWheel: true,\n            useShadows: false,\n            mouseSupport: false,\n            multipleSelectionSupport: false,\n            accessibilityProvider: {\n                getRole: () => 'option',\n                getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n                getWidgetRole: () => 'listbox',\n                getAriaLabel: (item) => {\n                    let label = item.textLabel;\n                    if (typeof item.completion.label !== 'string') {\n                        const { detail, description } = item.completion.label;\n                        if (detail && description) {\n                            label = nls.localize('label.full', '{0}{1}, {2}', label, detail, description);\n                        }\n                        else if (detail) {\n                            label = nls.localize('label.detail', '{0}{1}', label, detail);\n                        }\n                        else if (description) {\n                            label = nls.localize('label.desc', '{0}, {1}', label, description);\n                        }\n                    }\n                    if (!item.isResolved || !this._isDetailsVisible()) {\n                        return label;\n                    }\n                    const { documentation, detail } = item.completion;\n                    const docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\n                    return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n                },\n            }\n        });\n        this._list.style(getListStyles({\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n            listInactiveFocusOutline: activeContrastBorder\n        }));\n        this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode, suggestWidgetStatusbarMenu);\n        const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(114 /* EditorOption.suggest */).showStatusBar);\n        applyStatusBarStyle();\n        this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n        this._onThemeChange(_themeService.getColorTheme());\n        this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n        this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n        this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n        this._disposables.add(this.editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(114 /* EditorOption.suggest */)) {\n                applyStatusBarStyle();\n                applyIconStyle();\n            }\n        }));\n        this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetHasFocusedSuggestion = SuggestContext.HasFocusedSuggestion.bindTo(_contextKeyService);\n        this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n            this._onDetailsKeydown.fire(e);\n        }));\n        this._disposables.add(this.editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n    }\n    dispose() {\n        var _a;\n        this._details.widget.dispose();\n        this._details.dispose();\n        this._list.dispose();\n        this._status.dispose();\n        this._disposables.dispose();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._pendingLayout.dispose();\n        this._pendingShowDetails.dispose();\n        this._showTimeout.dispose();\n        this._contentWidget.dispose();\n        this.element.dispose();\n    }\n    _onEditorMouseDown(mouseEvent) {\n        if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n            // Clicking inside details\n            this._details.widget.domNode.focus();\n        }\n        else {\n            // Clicking outside details and inside suggest\n            if (this.element.domNode.contains(mouseEvent.target.element)) {\n                this.editor.focus();\n            }\n        }\n    }\n    _onCursorSelectionChanged() {\n        if (this._state !== 0 /* State.Hidden */) {\n            this._contentWidget.layout();\n        }\n    }\n    _onListMouseDownOrTap(e) {\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n            return;\n        }\n        // prevent stealing browser focus from the editor\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n        this._select(e.element, e.index);\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            this._select(e.elements[0], e.indexes[0]);\n        }\n    }\n    _select(item, index) {\n        const completionModel = this._completionModel;\n        if (completionModel) {\n            this._onDidSelect.fire({ item, index, model: completionModel });\n            this.editor.focus();\n        }\n    }\n    _onThemeChange(theme) {\n        this._details.widget.borderWidth = isHighContrast(theme.type) ? 2 : 1;\n    }\n    _onListFocus(e) {\n        var _a;\n        if (this._ignoreFocusEvents) {\n            return;\n        }\n        if (!e.elements.length) {\n            if (this._currentSuggestionDetails) {\n                this._currentSuggestionDetails.cancel();\n                this._currentSuggestionDetails = undefined;\n                this._focusedItem = undefined;\n            }\n            this.editor.setAriaOptions({ activeDescendant: undefined });\n            this._ctxSuggestWidgetHasFocusedSuggestion.set(false);\n            return;\n        }\n        if (!this._completionModel) {\n            return;\n        }\n        this._ctxSuggestWidgetHasFocusedSuggestion.set(true);\n        const item = e.elements[0];\n        const index = e.indexes[0];\n        if (item !== this._focusedItem) {\n            (_a = this._currentSuggestionDetails) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._currentSuggestionDetails = undefined;\n            this._focusedItem = item;\n            this._list.reveal(index);\n            this._currentSuggestionDetails = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const loading = disposableTimeout(() => {\n                    if (this._isDetailsVisible()) {\n                        this.showDetails(true);\n                    }\n                }, 250);\n                const sub = token.onCancellationRequested(() => loading.dispose());\n                const result = yield item.resolve(token);\n                loading.dispose();\n                sub.dispose();\n                return result;\n            }));\n            this._currentSuggestionDetails.then(() => {\n                if (index >= this._list.length || item !== this._list.element(index)) {\n                    return;\n                }\n                // item can have extra information, so re-render\n                this._ignoreFocusEvents = true;\n                this._list.splice(index, 1, [item]);\n                this._list.setFocus([index]);\n                this._ignoreFocusEvents = false;\n                if (this._isDetailsVisible()) {\n                    this.showDetails(false);\n                }\n                else {\n                    this.element.domNode.classList.remove('docs-side');\n                }\n                this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\n            }).catch(onUnexpectedError);\n        }\n        // emit an event\n        this._onDidFocus.fire({ item, index, model: this._completionModel });\n    }\n    _setState(state) {\n        if (this._state === state) {\n            return;\n        }\n        this._state = state;\n        this.element.domNode.classList.toggle('frozen', state === 4 /* State.Frozen */);\n        this.element.domNode.classList.remove('message');\n        switch (state) {\n            case 0 /* State.Hidden */:\n                dom.hide(this._messageElement, this._listElement, this._status.element);\n                this._details.hide(true);\n                this._status.hide();\n                this._contentWidget.hide();\n                this._ctxSuggestWidgetVisible.reset();\n                this._ctxSuggestWidgetMultipleSuggestions.reset();\n                this._ctxSuggestWidgetHasFocusedSuggestion.reset();\n                this._showTimeout.cancel();\n                this.element.domNode.classList.remove('visible');\n                this._list.splice(0, this._list.length);\n                this._focusedItem = undefined;\n                this._cappedHeight = undefined;\n                this._explainMode = false;\n                break;\n            case 1 /* State.Loading */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 2 /* State.Empty */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 3 /* State.Open */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 4 /* State.Frozen */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 5 /* State.Details */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._details.show();\n                this._show();\n                break;\n        }\n    }\n    _show() {\n        this._status.show();\n        this._contentWidget.show();\n        this._layout(this._persistedSize.restore());\n        this._ctxSuggestWidgetVisible.set(true);\n        this._showTimeout.cancelAndSet(() => {\n            this.element.domNode.classList.add('visible');\n            this._onDidShow.fire(this);\n        }, 100);\n    }\n    showTriggered(auto, delay) {\n        if (this._state !== 0 /* State.Hidden */) {\n            return;\n        }\n        this._contentWidget.setPosition(this.editor.getPosition());\n        this._isAuto = !!auto;\n        if (!this._isAuto) {\n            this._loadingTimeout = disposableTimeout(() => this._setState(1 /* State.Loading */), delay);\n        }\n    }\n    showSuggestions(completionModel, selectionIndex, isFrozen, isAuto, noFocus) {\n        var _a, _b;\n        this._contentWidget.setPosition(this.editor.getPosition());\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentSuggestionDetails) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._currentSuggestionDetails = undefined;\n        if (this._completionModel !== completionModel) {\n            this._completionModel = completionModel;\n        }\n        if (isFrozen && this._state !== 2 /* State.Empty */ && this._state !== 0 /* State.Hidden */) {\n            this._setState(4 /* State.Frozen */);\n            return;\n        }\n        const visibleCount = this._completionModel.items.length;\n        const isEmpty = visibleCount === 0;\n        this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n        if (isEmpty) {\n            this._setState(isAuto ? 0 /* State.Hidden */ : 2 /* State.Empty */);\n            this._completionModel = undefined;\n            return;\n        }\n        this._focusedItem = undefined;\n        // calling list.splice triggers focus event which this widget forwards. That can lead to\n        // suggestions being cancelled and the widget being cleared (and hidden). All this happens\n        // before revealing and focusing is done which means revealing and focusing will fail when\n        // they get run.\n        this._onDidFocus.pause();\n        this._onDidSelect.pause();\n        try {\n            this._list.splice(0, this._list.length, this._completionModel.items);\n            this._setState(isFrozen ? 4 /* State.Frozen */ : 3 /* State.Open */);\n            this._list.reveal(selectionIndex, 0);\n            this._list.setFocus(noFocus ? [] : [selectionIndex]);\n        }\n        finally {\n            this._onDidFocus.resume();\n            this._onDidSelect.resume();\n        }\n        this._pendingLayout.value = dom.runAtThisOrScheduleAtNextAnimationFrame(() => {\n            this._pendingLayout.clear();\n            this._layout(this.element.size);\n            // Reset focus border\n            this._details.widget.domNode.classList.remove('focused');\n        });\n    }\n    focusSelected() {\n        if (this._list.length > 0) {\n            this._list.setFocus([0]);\n        }\n    }\n    selectNextPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageDown();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNextPage();\n                return true;\n        }\n    }\n    selectNext() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNext(1, true);\n                return true;\n        }\n    }\n    selectLast() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollBottom();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusLast();\n                return true;\n        }\n    }\n    selectPreviousPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageUp();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPreviousPage();\n                return true;\n        }\n    }\n    selectPrevious() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPrevious(1, true);\n                return false;\n        }\n    }\n    selectFirst() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollTop();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusFirst();\n                return true;\n        }\n    }\n    getFocusedItem() {\n        if (this._state !== 0 /* State.Hidden */\n            && this._state !== 2 /* State.Empty */\n            && this._state !== 1 /* State.Loading */\n            && this._completionModel\n            && this._list.getFocus().length > 0) {\n            return {\n                item: this._list.getFocusedElements()[0],\n                index: this._list.getFocus()[0],\n                model: this._completionModel\n            };\n        }\n        return undefined;\n    }\n    toggleDetailsFocus() {\n        if (this._state === 5 /* State.Details */) {\n            this._setState(3 /* State.Open */);\n            this._details.widget.domNode.classList.remove('focused');\n        }\n        else if (this._state === 3 /* State.Open */ && this._isDetailsVisible()) {\n            this._setState(5 /* State.Details */);\n            this._details.widget.domNode.classList.add('focused');\n        }\n    }\n    toggleDetails() {\n        if (this._isDetailsVisible()) {\n            // hide details widget\n            this._pendingShowDetails.clear();\n            this._ctxSuggestWidgetDetailsVisible.set(false);\n            this._setDetailsVisible(false);\n            this._details.hide();\n            this.element.domNode.classList.remove('shows-details');\n        }\n        else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* State.Open */ || this._state === 5 /* State.Details */ || this._state === 4 /* State.Frozen */)) {\n            // show details widget (iff possible)\n            this._ctxSuggestWidgetDetailsVisible.set(true);\n            this._setDetailsVisible(true);\n            this.showDetails(false);\n        }\n    }\n    showDetails(loading) {\n        this._pendingShowDetails.value = dom.runAtThisOrScheduleAtNextAnimationFrame(() => {\n            this._pendingShowDetails.clear();\n            this._details.show();\n            if (loading) {\n                this._details.widget.renderLoading();\n            }\n            else {\n                this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n            }\n            this._positionDetails();\n            this.editor.focus();\n            this.element.domNode.classList.add('shows-details');\n        });\n    }\n    toggleExplainMode() {\n        if (this._list.getFocusedElements()[0]) {\n            this._explainMode = !this._explainMode;\n            if (!this._isDetailsVisible()) {\n                this.toggleDetails();\n            }\n            else {\n                this.showDetails(false);\n            }\n        }\n    }\n    resetPersistedSize() {\n        this._persistedSize.reset();\n    }\n    hideWidget() {\n        var _a;\n        this._pendingLayout.clear();\n        this._pendingShowDetails.clear();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._setState(0 /* State.Hidden */);\n        this._onDidHide.fire(this);\n        this.element.clearSashHoverState();\n        // ensure that a reasonable widget height is persisted so that\n        // accidential \"resize-to-single-items\" cases aren't happening\n        const dim = this._persistedSize.restore();\n        const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n        if (dim && dim.height < minPersistedHeight) {\n            this._persistedSize.store(dim.with(undefined, minPersistedHeight));\n        }\n    }\n    isFrozen() {\n        return this._state === 4 /* State.Frozen */;\n    }\n    _afterRender(position) {\n        if (position === null) {\n            if (this._isDetailsVisible()) {\n                this._details.hide(); //todo@jrieken soft-hide\n            }\n            return;\n        }\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // no special positioning when widget isn't showing list\n            return;\n        }\n        if (this._isDetailsVisible()) {\n            this._details.show();\n        }\n        this._positionDetails();\n    }\n    _layout(size) {\n        var _a, _b, _c;\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (!this.editor.getDomNode()) {\n            // happens when running tests\n            return;\n        }\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.getLayoutInfo();\n        if (!size) {\n            size = info.defaultSize;\n        }\n        let height = size.height;\n        let width = size.width;\n        // status bar\n        this._status.element.style.height = `${info.itemHeight}px`;\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // showing a message only\n            height = info.itemHeight + info.borderHeight;\n            width = info.defaultSize.width / 2;\n            this.element.enableSashes(false, false, false, false);\n            this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n            this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n        else {\n            // showing items\n            // width math\n            const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n            if (width > maxWidth) {\n                width = maxWidth;\n            }\n            const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n            // height math\n            const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n            const minHeight = info.itemHeight + info.statusBarHeight;\n            const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n            const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n            const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n            const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n            const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n            const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n            let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n            if (height === ((_a = this._cappedHeight) === null || _a === void 0 ? void 0 : _a.capped)) {\n                // Restore the old (wanted) height when the current\n                // height is capped to fit\n                height = this._cappedHeight.wanted;\n            }\n            if (height < minHeight) {\n                height = minHeight;\n            }\n            if (height > maxHeight) {\n                height = maxHeight;\n            }\n            const forceRenderingAboveRequiredSpace = 150;\n            if (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\n                this._contentWidget.setPreference(1 /* ContentWidgetPositionPreference.ABOVE */);\n                this.element.enableSashes(true, true, false, false);\n                maxHeight = maxHeightAbove;\n            }\n            else {\n                this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n                this.element.enableSashes(false, true, true, false);\n                maxHeight = maxHeightBelow;\n            }\n            this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n            this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n            this.element.minSize = new dom.Dimension(220, minHeight);\n            // Know when the height was capped to fit and remember\n            // the wanted height for later. This is required when going\n            // left to widen suggestions.\n            this._cappedHeight = height === fullHeight\n                ? { wanted: (_c = (_b = this._cappedHeight) === null || _b === void 0 ? void 0 : _b.wanted) !== null && _c !== void 0 ? _c : size.height, capped: height }\n                : undefined;\n        }\n        this._resize(width, height);\n    }\n    _resize(width, height) {\n        const { width: maxWidth, height: maxHeight } = this.element.maxSize;\n        width = Math.min(maxWidth, width);\n        height = Math.min(maxHeight, height);\n        const { statusBarHeight } = this.getLayoutInfo();\n        this._list.layout(height - statusBarHeight, width);\n        this._listElement.style.height = `${height - statusBarHeight}px`;\n        this.element.layout(height, width);\n        this._contentWidget.layout();\n        this._positionDetails();\n    }\n    _positionDetails() {\n        var _a;\n        if (this._isDetailsVisible()) {\n            this._details.placeAtAnchor(this.element.domNode, ((_a = this._contentWidget.getPosition()) === null || _a === void 0 ? void 0 : _a.preference[0]) === 2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n    }\n    getLayoutInfo() {\n        const fontInfo = this.editor.getOption(48 /* EditorOption.fontInfo */);\n        const itemHeight = clamp(this.editor.getOption(116 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\n        const statusBarHeight = !this.editor.getOption(114 /* EditorOption.suggest */).showStatusBar || this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */ ? 0 : itemHeight;\n        const borderWidth = this._details.widget.borderWidth;\n        const borderHeight = 2 * borderWidth;\n        return {\n            itemHeight,\n            statusBarHeight,\n            borderWidth,\n            borderHeight,\n            typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n            verticalPadding: 22,\n            horizontalPadding: 14,\n            defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n        };\n    }\n    _isDetailsVisible() {\n        return this._storageService.getBoolean('expandSuggestionDocs', 0 /* StorageScope.PROFILE */, false);\n    }\n    _setDetailsVisible(value) {\n        this._storageService.store('expandSuggestionDocs', value, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n    }\n    forceRenderingAbove() {\n        if (!this._forceRenderingAbove) {\n            this._forceRenderingAbove = true;\n            this._layout(this._persistedSize.restore());\n        }\n    }\n    stopForceRenderingAbove() {\n        this._forceRenderingAbove = false;\n    }\n};\nSuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\nSuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\nSuggestWidget = __decorate([\n    __param(1, IStorageService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, IInstantiationService)\n], SuggestWidget);\nexport class SuggestContentWidget {\n    constructor(_widget, _editor) {\n        this._widget = _widget;\n        this._editor = _editor;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._preferenceLocked = false;\n        this._added = false;\n        this._hidden = false;\n    }\n    dispose() {\n        if (this._added) {\n            this._added = false;\n            this._editor.removeContentWidget(this);\n        }\n    }\n    getId() {\n        return 'editor.widget.suggestWidget';\n    }\n    getDomNode() {\n        return this._widget.element.domNode;\n    }\n    show() {\n        this._hidden = false;\n        if (!this._added) {\n            this._added = true;\n            this._editor.addContentWidget(this);\n        }\n    }\n    hide() {\n        if (!this._hidden) {\n            this._hidden = true;\n            this.layout();\n        }\n    }\n    layout() {\n        this._editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this._hidden || !this._position || !this._preference) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [this._preference]\n        };\n    }\n    beforeRender() {\n        const { height, width } = this._widget.element.size;\n        const { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\n        return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n    }\n    afterRender(position) {\n        this._widget._afterRender(position);\n    }\n    setPreference(preference) {\n        if (!this._preferenceLocked) {\n            this._preference = preference;\n        }\n    }\n    lockPreference() {\n        this._preferenceLocked = true;\n    }\n    unlockPreference() {\n        this._preferenceLocked = false;\n    }\n    setPosition(position) {\n        this._position = position;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IdleValue } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { KeyCodeChord } from '../../../../base/common/keybindings.js';\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isObject } from '../../../../base/common/types.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { hash } from '../../../../base/common/hash.js';\n// sticky suggest widget which doesn't disappear on focus out and such\nconst _sticky = false;\nclass LineSuffix {\n    constructor(_model, _position) {\n        this._model = _model;\n        this._position = _position;\n        // spy on what's happening right of the cursor. two cases:\n        // 1. end of line -> check that it's still end of line\n        // 2. mid of line -> add a marker and compute the delta\n        const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n        if (maxColumn !== _position.column) {\n            const offset = _model.getOffsetAt(_position);\n            const end = _model.getPositionAt(offset + 1);\n            this._marker = _model.deltaDecorations([], [{\n                    range: Range.fromPositions(_position, end),\n                    options: { description: 'suggest-line-suffix', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */ }\n                }]);\n        }\n    }\n    dispose() {\n        if (this._marker && !this._model.isDisposed()) {\n            this._model.deltaDecorations(this._marker, []);\n        }\n    }\n    delta(position) {\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n            // bail out early if things seems fishy\n            return 0;\n        }\n        // read the marker (in case suggest was triggered at line end) or compare\n        // the cursor to the line end.\n        if (this._marker) {\n            const range = this._model.getDecorationRange(this._marker[0]);\n            const end = this._model.getOffsetAt(range.getStartPosition());\n            return end - this._model.getOffsetAt(position);\n        }\n        else {\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n        }\n    }\n}\nexport let SuggestController = class SuggestController {\n    static get(editor) {\n        return editor.getContribution(SuggestController.ID);\n    }\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\n        this._memoryService = _memoryService;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._telemetryService = _telemetryService;\n        this._lineSuffix = new MutableDisposable();\n        this._toDispose = new DisposableStore();\n        this._selectors = new PriorityRegistry(s => s.priority);\n        this._telemetryGate = 0;\n        this.editor = editor;\n        this.model = _instantiationService.createInstance(SuggestModel, this.editor);\n        // default selector\n        this._selectors.register({\n            priority: 0,\n            select: (model, pos, items) => this._memoryService.select(model, pos, items)\n        });\n        // context key: update insert/replace mode\n        const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\n        ctxInsertMode.set(editor.getOption(114 /* EditorOption.suggest */).insertMode);\n        this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(114 /* EditorOption.suggest */).insertMode));\n        this.widget = this._toDispose.add(new IdleValue(() => {\n            const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\n            this._toDispose.add(widget);\n            this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0 /* InsertFlags.None */), this));\n            // Wire up logic to accept a suggestion on certain characters\n            const commitCharacterController = new CommitCharacterController(this.editor, widget, this.model, item => this._insertSuggestion(item, 2 /* InsertFlags.NoAfterUndoStop */));\n            this._toDispose.add(commitCharacterController);\n            // Wire up makes text edit context key\n            const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\n            const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\n            const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\n            this._toDispose.add(toDisposable(() => {\n                ctxMakesTextEdit.reset();\n                ctxHasInsertAndReplace.reset();\n                ctxCanResolve.reset();\n            }));\n            this._toDispose.add(widget.onDidFocus(({ item }) => {\n                // (ctx: makesTextEdit)\n                const position = this.editor.getPosition();\n                const startColumn = item.editStart.column;\n                const endColumn = position.column;\n                let value = true;\n                if (this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */) === 'smart'\n                    && this.model.state === 2 /* State.Auto */\n                    && !item.completion.additionalTextEdits\n                    && !(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\n                    && endColumn - startColumn === item.completion.insertText.length) {\n                    const oldText = this.editor.getModel().getValueInRange({\n                        startLineNumber: position.lineNumber,\n                        startColumn,\n                        endLineNumber: position.lineNumber,\n                        endColumn\n                    });\n                    value = oldText !== item.completion.insertText;\n                }\n                ctxMakesTextEdit.set(value);\n                // (ctx: hasInsertAndReplaceRange)\n                ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\n                // (ctx: canResolve)\n                ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\n            }));\n            this._toDispose.add(widget.onDetailsKeyDown(e => {\n                // cmd + c on macOS, ctrl + c on Win / Linux\n                if (e.toKeyCodeChord().equals(new KeyCodeChord(true, false, false, false, 33 /* KeyCode.KeyC */)) ||\n                    (platform.isMacintosh && e.toKeyCodeChord().equals(new KeyCodeChord(false, false, false, true, 33 /* KeyCode.KeyC */)))) {\n                    e.stopPropagation();\n                    return;\n                }\n                if (!e.toKeyCodeChord().isModifierKey()) {\n                    this.editor.focus();\n                }\n            }));\n            return widget;\n        }));\n        // Wire up text overtyping capture\n        this._overtypingCapturer = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\n        }));\n        this._alternatives = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\n        }));\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n        this._toDispose.add(this.model.onDidTrigger(e => {\n            this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\n            this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\n        }));\n        this._toDispose.add(this.model.onDidSuggest(e => {\n            if (e.triggerOptions.shy) {\n                return;\n            }\n            let index = -1;\n            for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\n                index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                if (index !== -1) {\n                    break;\n                }\n            }\n            if (index === -1) {\n                index = 0;\n            }\n            let noFocus = false;\n            if (e.triggerOptions.auto) {\n                // don't \"focus\" item when configured to do\n                const options = this.editor.getOption(114 /* EditorOption.suggest */);\n                if (options.selectionMode === 'never' || options.selectionMode === 'always') {\n                    // simple: always or never\n                    noFocus = options.selectionMode === 'never';\n                }\n                else if (options.selectionMode === 'whenTriggerCharacter') {\n                    // on with trigger character\n                    noFocus = e.triggerOptions.triggerKind !== 1 /* CompletionTriggerKind.TriggerCharacter */;\n                }\n                else if (options.selectionMode === 'whenQuickSuggestion') {\n                    // without trigger character or when refiltering\n                    noFocus = e.triggerOptions.triggerKind === 1 /* CompletionTriggerKind.TriggerCharacter */ && !e.triggerOptions.refilter;\n                }\n            }\n            this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.triggerOptions.auto, noFocus);\n        }));\n        this._toDispose.add(this.model.onDidCancel(e => {\n            if (!e.retrigger) {\n                this.widget.value.hideWidget();\n            }\n        }));\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\n            if (!_sticky) {\n                this.model.cancel();\n                this.model.clear();\n            }\n        }));\n        // Manage the acceptSuggestionsOnEnter context key\n        const acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n        const updateFromConfig = () => {\n            const acceptSuggestionOnEnter = this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */);\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n        };\n        this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\n        updateFromConfig();\n    }\n    dispose() {\n        this._alternatives.dispose();\n        this._toDispose.dispose();\n        this.widget.dispose();\n        this.model.dispose();\n        this._lineSuffix.dispose();\n    }\n    _insertSuggestion(event, flags) {\n        if (!event || !event.item) {\n            this._alternatives.value.reset();\n            this.model.cancel();\n            this.model.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const snippetController = SnippetController2.get(this.editor);\n        if (!snippetController) {\n            return;\n        }\n        const model = this.editor.getModel();\n        const modelVersionNow = model.getAlternativeVersionId();\n        const { item } = event;\n        //\n        const tasks = [];\n        const cts = new CancellationTokenSource();\n        // pushing undo stops *before* additional text edits and\n        // *after* the main edit\n        if (!(flags & 1 /* InsertFlags.NoBeforeUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\n        const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* InsertFlags.AlternativeOverwriteConfig */));\n        // keep item in memory\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\n        if (Array.isArray(item.completion.additionalTextEdits)) {\n            // cancel -> stops all listening and closes widget\n            this.model.cancel();\n            // sync additional edits\n            const scrollState = StableEditorScrollState.capture(this.editor);\n            this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n            scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n        }\n        else if (!item.isResolved) {\n            // async additional edits\n            const sw = new StopWatch(true);\n            let position;\n            const docListener = model.onDidChangeContent(e => {\n                if (e.isFlush) {\n                    cts.cancel();\n                    docListener.dispose();\n                    return;\n                }\n                for (const change of e.changes) {\n                    const thisPosition = Range.getEndPosition(change.range);\n                    if (!position || Position.isBefore(thisPosition, position)) {\n                        position = thisPosition;\n                    }\n                }\n            });\n            const oldFlags = flags;\n            flags |= 2 /* InsertFlags.NoAfterUndoStop */;\n            let didType = false;\n            const typeListener = this.editor.onWillType(() => {\n                typeListener.dispose();\n                didType = true;\n                if (!(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n            });\n            tasks.push(item.resolve(cts.token).then(() => {\n                if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\n                    return false;\n                }\n                if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\n                    return false;\n                }\n                if (didType) {\n                    this.editor.pushUndoStop();\n                }\n                const scrollState = StableEditorScrollState.capture(this.editor);\n                this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n                scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n                if (didType || !(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n                return true;\n            }).then(applied => {\n                this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\n                docListener.dispose();\n                typeListener.dispose();\n            }));\n        }\n        let { insertText } = item.completion;\n        if (!(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)) {\n            insertText = SnippetParser.escape(insertText);\n        }\n        // cancel -> stops all listening and closes widget\n        this.model.cancel();\n        snippetController.insert(insertText, {\n            overwriteBefore: info.overwriteBefore,\n            overwriteAfter: info.overwriteAfter,\n            undoStopBefore: false,\n            undoStopAfter: false,\n            adjustWhitespace: !(item.completion.insertTextRules & 1 /* CompletionItemInsertTextRule.KeepWhitespace */),\n            clipboardText: event.model.clipboardText,\n            overtypingCapturer: this._overtypingCapturer.value\n        });\n        if (!(flags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        if (item.completion.command) {\n            if (item.completion.command.id === TriggerSuggestAction.id) {\n                // retigger\n                this.model.trigger({ auto: true, retrigger: true });\n            }\n            else {\n                // exec command, done\n                tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(e => {\n                    if (item.completion.extensionId) {\n                        onUnexpectedExternalError(e);\n                    }\n                    else {\n                        onUnexpectedError(e);\n                    }\n                }));\n            }\n        }\n        if (flags & 4 /* InsertFlags.KeepAlternativeSuggestions */) {\n            this._alternatives.value.set(event, next => {\n                // cancel resolving of additional edits\n                cts.cancel();\n                // this is not so pretty. when inserting the 'next'\n                // suggestion we undo until we are at the state at\n                // which we were before inserting the previous suggestion...\n                while (model.canUndo()) {\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\n                        model.undo();\n                    }\n                    this._insertSuggestion(next, 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */ | (flags & 8 /* InsertFlags.AlternativeOverwriteConfig */ ? 8 /* InsertFlags.AlternativeOverwriteConfig */ : 0));\n                    break;\n                }\n            });\n        }\n        this._alertCompletionItem(item);\n        // clear only now - after all tasks are done\n        Promise.all(tasks).finally(() => {\n            this._reportSuggestionAcceptedTelemetry(item, model, event);\n            this.model.clear();\n            cts.dispose();\n        });\n    }\n    _reportSuggestionAcceptedTelemetry(item, model, acceptedSuggestion) {\n        var _a;\n        if (this._telemetryGate++ % 100 !== 0) {\n            return;\n        }\n        // _debugDisplayName looks like `vscode.css-language-features(/-:)`, where the last bit is the trigger chars\n        // normalize it to just the extension ID and lowercase\n        const providerId = item.extensionId ? item.extensionId.value : ((_a = acceptedSuggestion.item.provider._debugDisplayName) !== null && _a !== void 0 ? _a : 'unknown').split('(', 1)[0].toLowerCase();\n        this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\n            providerId,\n            kind: item.completion.kind,\n            basenameHash: hash(basename(model.uri)).toString(16),\n            languageId: model.getLanguageId(),\n            fileExtension: extname(model.uri),\n        });\n    }\n    getOverwriteInfo(item, toggleMode) {\n        assertType(this.editor.hasModel());\n        let replace = this.editor.getOption(114 /* EditorOption.suggest */).insertMode === 'replace';\n        if (toggleMode) {\n            replace = !replace;\n        }\n        const overwriteBefore = item.position.column - item.editStart.column;\n        const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n        const columnDelta = this.editor.getPosition().column - item.position.column;\n        const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n        return {\n            overwriteBefore: overwriteBefore + columnDelta,\n            overwriteAfter: overwriteAfter + suffixDelta\n        };\n    }\n    _alertCompletionItem(item) {\n        if (isNonEmptyArray(item.completion.additionalTextEdits)) {\n            const msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\n            alert(msg);\n        }\n    }\n    triggerSuggest(onlyFrom, auto, noFilter) {\n        if (this.editor.hasModel()) {\n            this.model.trigger({\n                auto: auto !== null && auto !== void 0 ? auto : false,\n                completionOptions: { providerFilter: onlyFrom, kindFilter: noFilter ? new Set() : undefined }\n            });\n            this.editor.revealPosition(this.editor.getPosition(), 0 /* ScrollType.Smooth */);\n            this.editor.focus();\n        }\n    }\n    triggerSuggestAndAcceptBest(arg) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const positionNow = this.editor.getPosition();\n        const fallback = () => {\n            if (positionNow.equals(this.editor.getPosition())) {\n                this._commandService.executeCommand(arg.fallback);\n            }\n        };\n        const makesTextEdit = (item) => {\n            if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */ || item.completion.additionalTextEdits) {\n                // snippet, other editor -> makes edit\n                return true;\n            }\n            const position = this.editor.getPosition();\n            const startColumn = item.editStart.column;\n            const endColumn = position.column;\n            if (endColumn - startColumn !== item.completion.insertText.length) {\n                // unequal lengths -> makes edit\n                return true;\n            }\n            const textNow = this.editor.getModel().getValueInRange({\n                startLineNumber: position.lineNumber,\n                startColumn,\n                endLineNumber: position.lineNumber,\n                endColumn\n            });\n            // unequal text -> makes edit\n            return textNow !== item.completion.insertText;\n        };\n        Event.once(this.model.onDidTrigger)(_ => {\n            // wait for trigger because only then the cancel-event is trustworthy\n            const listener = [];\n            Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\n                // retrigger or cancel -> try to type default text\n                dispose(listener);\n                fallback();\n            }, undefined, listener);\n            this.model.onDidSuggest(({ completionModel }) => {\n                dispose(listener);\n                if (completionModel.items.length === 0) {\n                    fallback();\n                    return;\n                }\n                const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\n                const item = completionModel.items[index];\n                if (!makesTextEdit(item)) {\n                    fallback();\n                    return;\n                }\n                this.editor.pushUndoStop();\n                this._insertSuggestion({ index, item, model: completionModel }, 4 /* InsertFlags.KeepAlternativeSuggestions */ | 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */);\n            }, undefined, listener);\n        });\n        this.model.trigger({ auto: false, shy: true });\n        this.editor.revealPosition(positionNow, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\n        const item = this.widget.value.getFocusedItem();\n        let flags = 0;\n        if (keepAlternativeSuggestions) {\n            flags |= 4 /* InsertFlags.KeepAlternativeSuggestions */;\n        }\n        if (alternativeOverwriteConfig) {\n            flags |= 8 /* InsertFlags.AlternativeOverwriteConfig */;\n        }\n        this._insertSuggestion(item, flags);\n    }\n    acceptNextSuggestion() {\n        this._alternatives.value.next();\n    }\n    acceptPrevSuggestion() {\n        this._alternatives.value.prev();\n    }\n    cancelSuggestWidget() {\n        this.model.cancel();\n        this.model.clear();\n        this.widget.value.hideWidget();\n    }\n    focusSuggestion() {\n        this.widget.value.focusSelected();\n    }\n    selectNextSuggestion() {\n        this.widget.value.selectNext();\n    }\n    selectNextPageSuggestion() {\n        this.widget.value.selectNextPage();\n    }\n    selectLastSuggestion() {\n        this.widget.value.selectLast();\n    }\n    selectPrevSuggestion() {\n        this.widget.value.selectPrevious();\n    }\n    selectPrevPageSuggestion() {\n        this.widget.value.selectPreviousPage();\n    }\n    selectFirstSuggestion() {\n        this.widget.value.selectFirst();\n    }\n    toggleSuggestionDetails() {\n        this.widget.value.toggleDetails();\n    }\n    toggleExplainMode() {\n        this.widget.value.toggleExplainMode();\n    }\n    toggleSuggestionFocus() {\n        this.widget.value.toggleDetailsFocus();\n    }\n    resetWidgetSize() {\n        this.widget.value.resetPersistedSize();\n    }\n    forceRenderingAbove() {\n        this.widget.value.forceRenderingAbove();\n    }\n    stopForceRenderingAbove() {\n        if (!this.widget.isInitialized) {\n            // This method has no effect if the widget is not initialized yet.\n            return;\n        }\n        this.widget.value.stopForceRenderingAbove();\n    }\n    registerSelector(selector) {\n        return this._selectors.register(selector);\n    }\n};\nSuggestController.ID = 'editor.contrib.suggestController';\nSuggestController = __decorate([\n    __param(1, ISuggestMemoryService),\n    __param(2, ICommandService),\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ILogService),\n    __param(6, ITelemetryService)\n], SuggestController);\nclass PriorityRegistry {\n    constructor(prioritySelector) {\n        this.prioritySelector = prioritySelector;\n        this._items = new Array();\n    }\n    register(value) {\n        if (this._items.indexOf(value) !== -1) {\n            throw new Error('Value is already registered');\n        }\n        this._items.push(value);\n        this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\n        return {\n            dispose: () => {\n                const idx = this._items.indexOf(value);\n                if (idx >= 0) {\n                    this._items.splice(idx, 1);\n                }\n            }\n        };\n    }\n    get itemsOrderedByPriorityDesc() {\n        return this._items;\n    }\n}\nexport class TriggerSuggestAction extends EditorAction {\n    constructor() {\n        super({\n            id: TriggerSuggestAction.id,\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n            alias: 'Trigger Suggest',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider, SuggestContext.Visible.toNegated()),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        const controller = SuggestController.get(editor);\n        if (!controller) {\n            return;\n        }\n        let auto;\n        if (args && typeof args === 'object') {\n            if (args.auto === true) {\n                auto = true;\n            }\n        }\n        controller.triggerSuggest(undefined, auto, undefined);\n    }\n}\nTriggerSuggestAction.id = 'editor.action.triggerSuggest';\nregisterEditorContribution(SuggestController.ID, SuggestController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(TriggerSuggestAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n    handler(x) {\n        x.acceptSelectedSuggestion(true, false);\n    },\n    kbOpts: [{\n            // normal tab\n            primary: 2 /* KeyCode.Tab */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n            weight,\n        }, {\n            // accept on enter has special rules\n            primary: 3 /* KeyCode.Enter */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n            weight,\n        }],\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: SuggestContext.HasInsertAndReplaceRange.toNegated()\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.replace', \"Replace\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptAlternativeSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.HasFocusedSuggestion),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\n    },\n    handler(x) {\n        x.acceptSelectedSuggestion(false, true);\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\n            title: nls.localize('accept.replace', \"Replace\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\n            title: nls.localize('accept.insert', \"Insert\")\n        }]\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n    id: 'hideSuggestWidget',\n    precondition: SuggestContext.Visible,\n    handler: x => x.cancelSuggestWidget(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectNextPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 12 /* KeyCode.PageDown */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 12 /* KeyCode.PageDown */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectLastSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectLastSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectPrevPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 11 /* KeyCode.PageUp */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 11 /* KeyCode.PageUp */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectFirstSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectFirstSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'focusSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion.negate()),\n    handler: x => x.focusSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\n    },\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'focusAndAcceptSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion.negate()),\n    handler: c => {\n        c.focusSuggestion();\n        c.acceptSelectedSuggestion(true, false);\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionDetails',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n    handler: x => x.toggleSuggestionDetails(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\n            title: nls.localize('detail.more', \"show less\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\n            title: nls.localize('detail.less', \"show more\")\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleExplainMode',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleExplainMode(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 90 /* KeyCode.Slash */,\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionFocus',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionFocus(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */,\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */ }\n    }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertBestCompletion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: (x, arg) => {\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? Object.assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\n    },\n    kbOpts: {\n        weight,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertNextSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertPrevSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorAction(class extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.resetSuggestSize',\n            label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\n            alias: 'Reset Suggest Widget Size',\n            precondition: undefined\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = SuggestController.get(editor)) === null || _a === void 0 ? void 0 : _a.resetWidgetSize();\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { RefCountedDisposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CompletionModel, LineContext } from './completionModel.js';\nimport { CompletionOptions, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass SuggestInlineCompletion {\n    constructor(range, insertText, filterText, additionalTextEdits, command, completion) {\n        this.range = range;\n        this.insertText = insertText;\n        this.filterText = filterText;\n        this.additionalTextEdits = additionalTextEdits;\n        this.command = command;\n        this.completion = completion;\n    }\n}\nlet InlineCompletionResults = class InlineCompletionResults extends RefCountedDisposable {\n    constructor(model, line, word, completionModel, completions, _suggestMemoryService) {\n        super(completions.disposable);\n        this.model = model;\n        this.line = line;\n        this.word = word;\n        this.completionModel = completionModel;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    canBeReused(model, line, word) {\n        return this.model === model // same model\n            && this.line === line\n            && this.word.word.length > 0\n            && this.word.startColumn === word.startColumn && this.word.endColumn < word.endColumn // same word\n            && this.completionModel.getIncompleteProvider().size === 0; // no incomplete results\n    }\n    get items() {\n        var _a;\n        const result = [];\n        // Split items by preselected index. This ensures the memory-selected item shows first and that better/worst\n        // ranked items are before/after\n        const { items } = this.completionModel;\n        const selectedIndex = this._suggestMemoryService.select(this.model, { lineNumber: this.line, column: this.word.endColumn + this.completionModel.lineContext.characterCountDelta }, items);\n        const first = Iterable.slice(items, selectedIndex);\n        const second = Iterable.slice(items, 0, selectedIndex);\n        let resolveCount = 5;\n        for (const item of Iterable.concat(first, second)) {\n            if (item.score === FuzzyScore.Default) {\n                // skip items that have no overlap\n                continue;\n            }\n            const range = new Range(item.editStart.lineNumber, item.editStart.column, item.editInsertEnd.lineNumber, item.editInsertEnd.column + this.completionModel.lineContext.characterCountDelta // end PLUS character delta\n            );\n            const insertText = item.completion.insertTextRules && (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\n                ? { snippet: item.completion.insertText }\n                : item.completion.insertText;\n            result.push(new SuggestInlineCompletion(range, insertText, (_a = item.filterTextLow) !== null && _a !== void 0 ? _a : item.labelLow, item.completion.additionalTextEdits, item.completion.command, item));\n            // resolve the first N suggestions eagerly\n            if (resolveCount-- >= 0) {\n                item.resolve(CancellationToken.None);\n            }\n        }\n        return result;\n    }\n};\nInlineCompletionResults = __decorate([\n    __param(5, ISuggestMemoryService)\n], InlineCompletionResults);\nexport let SuggestInlineCompletions = class SuggestInlineCompletions {\n    constructor(_getEditorOption, _languageFeatureService, _clipboardService, _suggestMemoryService) {\n        this._getEditorOption = _getEditorOption;\n        this._languageFeatureService = _languageFeatureService;\n        this._clipboardService = _clipboardService;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    provideInlineCompletions(model, position, context, token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (context.selectedSuggestionInfo) {\n                return;\n            }\n            const config = this._getEditorOption(86 /* EditorOption.quickSuggestions */, model);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                // quick suggest is off (for this model/language)\n                return;\n            }\n            model.tokenization.tokenizeIfCheap(position.lineNumber);\n            const lineTokens = model.tokenization.getLineTokens(position.lineNumber);\n            const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(position.column - 1 - 1, 0)));\n            if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'inline') {\n                // quick suggest is off (for this token)\n                return undefined;\n            }\n            // We consider non-empty leading words and trigger characters. The latter only\n            // when no word is being typed (word characters superseed trigger characters)\n            let wordInfo = model.getWordAtPosition(position);\n            let triggerCharacterInfo;\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word)) {\n                triggerCharacterInfo = this._getTriggerCharacterInfo(model, position);\n            }\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word) && !triggerCharacterInfo) {\n                // not at word, not a trigger character\n                return;\n            }\n            // ensure that we have word information and that we are at the end of a word\n            // otherwise we stop because we don't want to do quick suggestions inside words\n            if (!wordInfo) {\n                wordInfo = model.getWordUntilPosition(position);\n            }\n            if (wordInfo.endColumn !== position.column) {\n                return;\n            }\n            let result;\n            const leadingLineContents = model.getValueInRange(new Range(position.lineNumber, 1, position.lineNumber, position.column));\n            if (!triggerCharacterInfo && ((_a = this._lastResult) === null || _a === void 0 ? void 0 : _a.canBeReused(model, position.lineNumber, wordInfo))) {\n                // reuse a previous result iff possible, only a refilter is needed\n                // TODO@jrieken this can be improved further and only incomplete results can be updated\n                // console.log(`REUSE with ${wordInfo.word}`);\n                const newLineContext = new LineContext(leadingLineContents, position.column - this._lastResult.word.endColumn);\n                this._lastResult.completionModel.lineContext = newLineContext;\n                this._lastResult.acquire();\n                result = this._lastResult;\n            }\n            else {\n                // refesh model is required\n                const completions = yield provideSuggestionItems(this._languageFeatureService.completionProvider, model, position, new CompletionOptions(undefined, undefined, triggerCharacterInfo === null || triggerCharacterInfo === void 0 ? void 0 : triggerCharacterInfo.providers), triggerCharacterInfo && { triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */, triggerCharacter: triggerCharacterInfo.ch }, token);\n                let clipboardText;\n                if (completions.needsClipboard) {\n                    clipboardText = yield this._clipboardService.readText();\n                }\n                const completionModel = new CompletionModel(completions.items, position.column, new LineContext(leadingLineContents, 0), WordDistance.None, this._getEditorOption(114 /* EditorOption.suggest */, model), this._getEditorOption(108 /* EditorOption.snippetSuggestions */, model), { boostFullMatch: false, firstMatchCanBeWeak: false }, clipboardText);\n                result = new InlineCompletionResults(model, position.lineNumber, wordInfo, completionModel, completions, this._suggestMemoryService);\n            }\n            this._lastResult = result;\n            return result;\n        });\n    }\n    handleItemDidShow(_completions, item) {\n        item.completion.resolve(CancellationToken.None);\n    }\n    freeInlineCompletions(result) {\n        result.release();\n    }\n    _getTriggerCharacterInfo(model, position) {\n        var _a;\n        const ch = model.getValueInRange(Range.fromPositions({ lineNumber: position.lineNumber, column: position.column - 1 }, position));\n        const providers = new Set();\n        for (const provider of this._languageFeatureService.completionProvider.all(model)) {\n            if ((_a = provider.triggerCharacters) === null || _a === void 0 ? void 0 : _a.includes(ch)) {\n                providers.add(provider);\n            }\n        }\n        if (providers.size === 0) {\n            return undefined;\n        }\n        return { providers, ch };\n    }\n};\nSuggestInlineCompletions = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IClipboardService),\n    __param(3, ISuggestMemoryService)\n], SuggestInlineCompletions);\nlet EditorContribution = class EditorContribution {\n    constructor(_editor, languageFeatureService, editorService, instaService) {\n        // HACK - way to contribute something only once\n        if (++EditorContribution._counter === 1) {\n            const provider = instaService.createInstance(SuggestInlineCompletions, (id, model) => {\n                var _a;\n                // HACK - reuse the editor options world outside from a \"normal\" contribution\n                const editor = (_a = editorService.listCodeEditors().find(editor => editor.getModel() === model)) !== null && _a !== void 0 ? _a : _editor;\n                return editor.getOption(id);\n            });\n            EditorContribution._disposable = languageFeatureService.inlineCompletionsProvider.register('*', provider);\n        }\n    }\n    dispose() {\n        var _a;\n        if (--EditorContribution._counter === 0) {\n            (_a = EditorContribution._disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n            EditorContribution._disposable = undefined;\n        }\n    }\n};\nEditorContribution._counter = 0;\nEditorContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ICodeEditorService),\n    __param(3, IInstantiationService)\n], EditorContribution);\nregisterEditorContribution('suggest.inlineCompletionsProvider', EditorContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because the contribution is used as a way to ONCE access a service to which a provider is registered\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { TernarySearchTree } from '../../../../base/common/ternarySearchTree.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport class Memory {\n    constructor(name) {\n        this.name = name;\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const topScore = items[0].score[0];\n        for (let i = 0; i < items.length; i++) {\n            const { score, completion: suggestion } = items[i];\n            if (score[0] !== topScore) {\n                // stop when leaving the group of top matches\n                break;\n            }\n            if (suggestion.preselect) {\n                // stop when seeing an auto-select-item\n                return i;\n            }\n        }\n        return 0;\n    }\n}\nexport class NoMemory extends Memory {\n    constructor() {\n        super('first');\n    }\n    memorize(model, pos, item) {\n        // no-op\n    }\n    toJSON() {\n        return undefined;\n    }\n    fromJSON() {\n        //\n    }\n}\nexport class LRUMemory extends Memory {\n    constructor() {\n        super('recentlyUsed');\n        this._cache = new LRUCache(300, 0.66);\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const key = `${model.getLanguageId()}/${item.textLabel}`;\n        this._cache.set(key, {\n            touch: this._seq++,\n            type: item.completion.kind,\n            insertText: item.completion.insertText\n        });\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\n        if (/\\s$/.test(lineSuffix)) {\n            return super.select(model, pos, items);\n        }\n        const topScore = items[0].score[0];\n        let indexPreselect = -1;\n        let indexRecency = -1;\n        let seq = -1;\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].score[0] !== topScore) {\n                // consider only top items\n                break;\n            }\n            const key = `${model.getLanguageId()}/${items[i].textLabel}`;\n            const item = this._cache.peek(key);\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\n                seq = item.touch;\n                indexRecency = i;\n            }\n            if (items[i].completion.preselect && indexPreselect === -1) {\n                // stop when seeing an auto-select-item\n                return indexPreselect = i;\n            }\n        }\n        if (indexRecency !== -1) {\n            return indexRecency;\n        }\n        else if (indexPreselect !== -1) {\n            return indexPreselect;\n        }\n        else {\n            return 0;\n        }\n    }\n    toJSON() {\n        return this._cache.toJSON();\n    }\n    fromJSON(data) {\n        this._cache.clear();\n        const seq = 0;\n        for (const [key, value] of data) {\n            value.touch = seq;\n            value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n            this._cache.set(key, value);\n        }\n        this._seq = this._cache.size;\n    }\n}\nexport class PrefixMemory extends Memory {\n    constructor() {\n        super('recentlyUsedByPrefix');\n        this._trie = TernarySearchTree.forStrings();\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const { word } = model.getWordUntilPosition(pos);\n        const key = `${model.getLanguageId()}/${word}`;\n        this._trie.set(key, {\n            type: item.completion.kind,\n            insertText: item.completion.insertText,\n            touch: this._seq++\n        });\n    }\n    select(model, pos, items) {\n        const { word } = model.getWordUntilPosition(pos);\n        if (!word) {\n            return super.select(model, pos, items);\n        }\n        const key = `${model.getLanguageId()}/${word}`;\n        let item = this._trie.get(key);\n        if (!item) {\n            item = this._trie.findSubstr(key);\n        }\n        if (item) {\n            for (let i = 0; i < items.length; i++) {\n                const { kind, insertText } = items[i].completion;\n                if (kind === item.type && insertText === item.insertText) {\n                    return i;\n                }\n            }\n        }\n        return super.select(model, pos, items);\n    }\n    toJSON() {\n        const entries = [];\n        this._trie.forEach((value, key) => entries.push([key, value]));\n        // sort by last recently used (touch), then\n        // take the top 200 item and normalize their\n        // touch\n        entries\n            .sort((a, b) => -(a[1].touch - b[1].touch))\n            .forEach((value, i) => value[1].touch = i);\n        return entries.slice(0, 200);\n    }\n    fromJSON(data) {\n        this._trie.clear();\n        if (data.length > 0) {\n            this._seq = data[0][1].touch + 1;\n            for (const [key, value] of data) {\n                value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n                this._trie.set(key, value);\n            }\n        }\n    }\n}\nexport let SuggestMemoryService = class SuggestMemoryService {\n    constructor(_storageService, _configService) {\n        this._storageService = _storageService;\n        this._configService = _configService;\n        this._disposables = new DisposableStore();\n        this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\n        this._disposables.add(_storageService.onWillSaveState(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                this._saveState();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._persistSoon.dispose();\n    }\n    memorize(model, pos, item) {\n        this._withStrategy(model, pos).memorize(model, pos, item);\n        this._persistSoon.schedule();\n    }\n    select(model, pos, items) {\n        return this._withStrategy(model, pos).select(model, pos, items);\n    }\n    _withStrategy(model, pos) {\n        var _a;\n        const mode = this._configService.getValue('editor.suggestSelection', {\n            overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\n            resource: model.uri\n        });\n        if (((_a = this._strategy) === null || _a === void 0 ? void 0 : _a.name) !== mode) {\n            this._saveState();\n            const ctor = SuggestMemoryService._strategyCtors.get(mode) || NoMemory;\n            this._strategy = new ctor();\n            try {\n                const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n                const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n                const raw = this._storageService.get(`${SuggestMemoryService._storagePrefix}/${mode}`, scope);\n                if (raw) {\n                    this._strategy.fromJSON(JSON.parse(raw));\n                }\n            }\n            catch (e) {\n                // things can go wrong with JSON...\n            }\n        }\n        return this._strategy;\n    }\n    _saveState() {\n        if (this._strategy) {\n            const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n            const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n            const raw = JSON.stringify(this._strategy);\n            this._storageService.store(`${SuggestMemoryService._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* StorageTarget.MACHINE */);\n        }\n    }\n};\nSuggestMemoryService._strategyCtors = new Map([\n    ['recentlyUsedByPrefix', PrefixMemory],\n    ['recentlyUsed', LRUMemory],\n    ['first', NoMemory]\n]);\nSuggestMemoryService._storagePrefix = 'suggest/memories';\nSuggestMemoryService = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], SuggestMemoryService);\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { Range } from '../../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\nexport class WordDistance {\n    static create(service, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.getOption(114 /* EditorOption.suggest */).localityBonus) {\n                return WordDistance.None;\n            }\n            if (!editor.hasModel()) {\n                return WordDistance.None;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!service.canComputeWordRanges(model.uri)) {\n                return WordDistance.None;\n            }\n            const [ranges] = yield new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n            if (ranges.length === 0) {\n                return WordDistance.None;\n            }\n            const wordRanges = yield service.computeWordRanges(model.uri, ranges[0].range);\n            if (!wordRanges) {\n                return WordDistance.None;\n            }\n            // remove current word\n            const wordUntilPos = model.getWordUntilPosition(position);\n            delete wordRanges[wordUntilPos.word];\n            return new class extends WordDistance {\n                distance(anchor, item) {\n                    if (!position.equals(editor.getPosition())) {\n                        return 0;\n                    }\n                    if (item.kind === 17 /* CompletionItemKind.Keyword */) {\n                        return 2 << 20;\n                    }\n                    const word = typeof item.label === 'string' ? item.label : item.label.label;\n                    const wordLines = wordRanges[word];\n                    if (isFalsyOrEmpty(wordLines)) {\n                        return 2 << 20;\n                    }\n                    const idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n                    const bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n                    let blockDistance = ranges.length;\n                    for (const range of ranges) {\n                        if (!Range.containsRange(range.range, bestWordRange)) {\n                            break;\n                        }\n                        blockDistance -= 1;\n                    }\n                    return blockDistance;\n                }\n            };\n        });\n    }\n}\nWordDistance.None = new class extends WordDistance {\n    distance() { return 0; }\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './symbolIcons.css';\nimport { localize } from '../../../../nls.js';\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC',\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { TabFocus } from '../../../browser/config/tabFocus.js';\nimport * as nls from '../../../../nls.js';\nimport { Action2, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nexport class ToggleTabFocusModeAction extends Action2 {\n    constructor() {\n        super({\n            id: ToggleTabFocusModeAction.ID,\n            title: { value: nls.localize({ key: 'toggle.tabMovesFocus', comment: ['Turn on/off use of tab key for moving focus around VS Code'] }, 'Toggle Tab Key Moves Focus'), original: 'Toggle Tab Key Moves Focus' },\n            precondition: undefined,\n            keybinding: {\n                primary: 2048 /* KeyMod.CtrlCmd */ | 43 /* KeyCode.KeyM */,\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 43 /* KeyCode.KeyM */ },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            f1: true\n        });\n    }\n    run(accessor) {\n        const context = accessor.get(IContextKeyService).getContextKeyValue('focusedView') === 'terminal' ? \"terminalFocus\" /* TabFocusContext.Terminal */ : \"editorFocus\" /* TabFocusContext.Editor */;\n        const oldValue = TabFocus.getTabFocusMode(context);\n        const newValue = !oldValue;\n        TabFocus.setTabFocusMode(newValue, context);\n        if (newValue) {\n            alert(nls.localize('toggle.tabMovesFocus.on', \"Pressing Tab will now move focus to the next focusable element\"));\n        }\n        else {\n            alert(nls.localize('toggle.tabMovesFocus.off', \"Pressing Tab will now insert the tab character\"));\n        }\n    }\n}\nToggleTabFocusModeAction.ID = 'editor.action.toggleTabFocusMode';\nregisterAction2(ToggleTabFocusModeAction);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport * as nls from '../../../../nls.js';\nclass ForceRetokenizeAction extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.forceRetokenize',\n            label: nls.localize('forceRetokenize', \"Developer: Force Retokenize\"),\n            alias: 'Developer: Force Retokenize',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor) {\n        if (!editor.hasModel()) {\n            return;\n        }\n        const model = editor.getModel();\n        model.tokenization.resetTokenization();\n        const sw = new StopWatch(true);\n        model.tokenization.forceTokenization(model.getLineCount());\n        sw.stop();\n        console.log(`tokenization took ${sw.elapsed()}`);\n    }\n}\nregisterEditorAction(ForceRetokenizeAction);\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './bannerController.css';\nimport { $, append, clearNode } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { Link } from '../../../../platform/opener/browser/link.js';\nimport { widgetClose } from '../../../../platform/theme/common/iconRegistry.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nconst BANNER_ELEMENT_HEIGHT = 26;\nexport let BannerController = class BannerController extends Disposable {\n    constructor(_editor, instantiationService) {\n        super();\n        this._editor = _editor;\n        this.instantiationService = instantiationService;\n        this.banner = this._register(this.instantiationService.createInstance(Banner));\n    }\n    hide() {\n        this._editor.setBanner(null, 0);\n        this.banner.clear();\n    }\n    show(item) {\n        this.banner.show(Object.assign(Object.assign({}, item), { onClose: () => {\n                var _a;\n                this.hide();\n                (_a = item.onClose) === null || _a === void 0 ? void 0 : _a.call(item);\n            } }));\n        this._editor.setBanner(this.banner.element, BANNER_ELEMENT_HEIGHT);\n    }\n};\nBannerController = __decorate([\n    __param(1, IInstantiationService)\n], BannerController);\n// TODO@hediet: Investigate if this can be reused by the workspace banner (bannerPart.ts).\nlet Banner = class Banner extends Disposable {\n    constructor(instantiationService) {\n        super();\n        this.instantiationService = instantiationService;\n        this.markdownRenderer = this.instantiationService.createInstance(MarkdownRenderer, {});\n        this.element = $('div.editor-banner');\n        this.element.tabIndex = 0;\n    }\n    getAriaLabel(item) {\n        if (item.ariaLabel) {\n            return item.ariaLabel;\n        }\n        if (typeof item.message === 'string') {\n            return item.message;\n        }\n        return undefined;\n    }\n    getBannerMessage(message) {\n        if (typeof message === 'string') {\n            const element = $('span');\n            element.innerText = message;\n            return element;\n        }\n        return this.markdownRenderer.render(message).element;\n    }\n    clear() {\n        clearNode(this.element);\n    }\n    show(item) {\n        // Clear previous item\n        clearNode(this.element);\n        // Banner aria label\n        const ariaLabel = this.getAriaLabel(item);\n        if (ariaLabel) {\n            this.element.setAttribute('aria-label', ariaLabel);\n        }\n        // Icon\n        const iconContainer = append(this.element, $('div.icon-container'));\n        iconContainer.setAttribute('aria-hidden', 'true');\n        if (item.icon) {\n            iconContainer.appendChild($(`div${ThemeIcon.asCSSSelector(item.icon)}`));\n        }\n        // Message\n        const messageContainer = append(this.element, $('div.message-container'));\n        messageContainer.setAttribute('aria-hidden', 'true');\n        messageContainer.appendChild(this.getBannerMessage(item.message));\n        // Message Actions\n        this.messageActionsContainer = append(this.element, $('div.message-actions-container'));\n        if (item.actions) {\n            for (const action of item.actions) {\n                this._register(this.instantiationService.createInstance(Link, this.messageActionsContainer, Object.assign(Object.assign({}, action), { tabIndex: -1 }), {}));\n            }\n        }\n        // Action\n        const actionBarContainer = append(this.element, $('div.action-container'));\n        this.actionBar = this._register(new ActionBar(actionBarContainer));\n        this.actionBar.push(this._register(new Action('banner.close', 'Close Banner', ThemeIcon.asClassName(widgetClose), true, () => {\n            if (typeof item.onClose === 'function') {\n                item.onClose();\n            }\n        })), { icon: true, label: false });\n        this.actionBar.setFocusable(false);\n    }\n};\nBanner = __decorate([\n    __param(0, IInstantiationService)\n], Banner);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { InvisibleCharacters, isBasicASCII } from '../../../../base/common/strings.js';\nimport './unicodeHighlighter.css';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { inUntrustedWorkspace, unicodeHighlightConfigKeys } from '../../../common/config/editorOptions.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { UnicodeTextModelHighlighter } from '../../../common/services/unicodeTextModelHighlighter.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { isModelDecorationInComment, isModelDecorationInString, isModelDecorationVisible } from '../../../common/viewModel/viewModelDecorations.js';\nimport { HoverParticipantRegistry } from '../../hover/browser/hoverTypes.js';\nimport { MarkdownHover, renderMarkdownHovers } from '../../hover/browser/markdownHoverParticipant.js';\nimport { BannerController } from './bannerController.js';\nimport * as nls from '../../../../nls.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../../platform/quickinput/common/quickInput.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IWorkspaceTrustManagementService } from '../../../../platform/workspace/common/workspaceTrust.js';\nexport const warningIcon = registerIcon('extensions-warning-message', Codicon.warning, nls.localize('warningIcon', 'Icon shown with a warning message in the extensions editor.'));\nexport let UnicodeHighlighter = class UnicodeHighlighter extends Disposable {\n    constructor(_editor, _editorWorkerService, _workspaceTrustService, instantiationService) {\n        super();\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._workspaceTrustService = _workspaceTrustService;\n        this._highlighter = null;\n        this._bannerClosed = false;\n        this._updateState = (state) => {\n            if (state && state.hasMore) {\n                if (this._bannerClosed) {\n                    return;\n                }\n                // This document contains many non-basic ASCII characters.\n                const max = Math.max(state.ambiguousCharacterCount, state.nonBasicAsciiCharacterCount, state.invisibleCharacterCount);\n                let data;\n                if (state.nonBasicAsciiCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyNonBasicAsciiUnicodeCharacters', 'This document contains many non-basic ASCII unicode characters'),\n                        command: new DisableHighlightingOfNonBasicAsciiCharactersAction(),\n                    };\n                }\n                else if (state.ambiguousCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyAmbiguousUnicodeCharacters', 'This document contains many ambiguous unicode characters'),\n                        command: new DisableHighlightingOfAmbiguousCharactersAction(),\n                    };\n                }\n                else if (state.invisibleCharacterCount >= max) {\n                    data = {\n                        message: nls.localize('unicodeHighlighting.thisDocumentHasManyInvisibleUnicodeCharacters', 'This document contains many invisible unicode characters'),\n                        command: new DisableHighlightingOfInvisibleCharactersAction(),\n                    };\n                }\n                else {\n                    throw new Error('Unreachable');\n                }\n                this._bannerController.show({\n                    id: 'unicodeHighlightBanner',\n                    message: data.message,\n                    icon: warningIcon,\n                    actions: [\n                        {\n                            label: data.command.shortLabel,\n                            href: `command:${data.command.id}`\n                        }\n                    ],\n                    onClose: () => {\n                        this._bannerClosed = true;\n                    },\n                });\n            }\n            else {\n                this._bannerController.hide();\n            }\n        };\n        this._bannerController = this._register(instantiationService.createInstance(BannerController, _editor));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._bannerClosed = false;\n            this._updateHighlighter();\n        }));\n        this._options = _editor.getOption(121 /* EditorOption.unicodeHighlighting */);\n        this._register(_workspaceTrustService.onDidChangeTrust(e => {\n            this._updateHighlighter();\n        }));\n        this._register(_editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(121 /* EditorOption.unicodeHighlighting */)) {\n                this._options = _editor.getOption(121 /* EditorOption.unicodeHighlighting */);\n                this._updateHighlighter();\n            }\n        }));\n        this._updateHighlighter();\n    }\n    dispose() {\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        super.dispose();\n    }\n    _updateHighlighter() {\n        this._updateState(null);\n        if (this._highlighter) {\n            this._highlighter.dispose();\n            this._highlighter = null;\n        }\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const options = resolveOptions(this._workspaceTrustService.isWorkspaceTrusted(), this._options);\n        if ([\n            options.nonBasicASCII,\n            options.ambiguousCharacters,\n            options.invisibleCharacters,\n        ].every((option) => option === false)) {\n            // Don't do anything if the feature is fully disabled\n            return;\n        }\n        const highlightOptions = {\n            nonBasicASCII: options.nonBasicASCII,\n            ambiguousCharacters: options.ambiguousCharacters,\n            invisibleCharacters: options.invisibleCharacters,\n            includeComments: options.includeComments,\n            includeStrings: options.includeStrings,\n            allowedCodePoints: Object.keys(options.allowedCharacters).map(c => c.codePointAt(0)),\n            allowedLocales: Object.keys(options.allowedLocales).map(locale => {\n                if (locale === '_os') {\n                    const osLocale = new Intl.NumberFormat().resolvedOptions().locale;\n                    return osLocale;\n                }\n                else if (locale === '_vscode') {\n                    return platform.language;\n                }\n                return locale;\n            }),\n        };\n        if (this._editorWorkerService.canComputeUnicodeHighlights(this._editor.getModel().uri)) {\n            this._highlighter = new DocumentUnicodeHighlighter(this._editor, highlightOptions, this._updateState, this._editorWorkerService);\n        }\n        else {\n            this._highlighter = new ViewportUnicodeHighlighter(this._editor, highlightOptions, this._updateState);\n        }\n    }\n    getDecorationInfo(decoration) {\n        if (this._highlighter) {\n            return this._highlighter.getDecorationInfo(decoration);\n        }\n        return null;\n    }\n};\nUnicodeHighlighter.ID = 'editor.contrib.unicodeHighlighter';\nUnicodeHighlighter = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IWorkspaceTrustManagementService),\n    __param(3, IInstantiationService)\n], UnicodeHighlighter);\nfunction resolveOptions(trusted, options) {\n    return {\n        nonBasicASCII: options.nonBasicASCII === inUntrustedWorkspace ? !trusted : options.nonBasicASCII,\n        ambiguousCharacters: options.ambiguousCharacters,\n        invisibleCharacters: options.invisibleCharacters,\n        includeComments: options.includeComments === inUntrustedWorkspace ? !trusted : options.includeComments,\n        includeStrings: options.includeStrings === inUntrustedWorkspace ? !trusted : options.includeStrings,\n        allowedCharacters: options.allowedCharacters,\n        allowedLocales: options.allowedLocales,\n    };\n}\nlet DocumentUnicodeHighlighter = class DocumentUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState, _editorWorkerService) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._editorWorkerService = _editorWorkerService;\n        this._model = this._editor.getModel();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorations.clear();\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorations.clear();\n            return;\n        }\n        const modelVersionId = this._model.getVersionId();\n        this._editorWorkerService\n            .computedUnicodeHighlights(this._model.uri, this._options)\n            .then((info) => {\n            if (this._model.isDisposed()) {\n                return;\n            }\n            if (this._model.getVersionId() !== modelVersionId) {\n                // model changed in the meantime\n                return;\n            }\n            this._updateState(info);\n            const decorations = [];\n            if (!info.hasMore) {\n                // Don't show decoration if there are too many.\n                // In this case, a banner is shown.\n                for (const range of info.ranges) {\n                    decorations.push({\n                        range: range,\n                        options: Decorations.instance.getDecorationFromOptions(this._options),\n                    });\n                }\n            }\n            this._decorations.set(decorations);\n        });\n    }\n    getDecorationInfo(decoration) {\n        if (!this._decorations.has(decoration)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        const text = model.getValueInRange(decoration.range);\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n};\nDocumentUnicodeHighlighter = __decorate([\n    __param(3, IEditorWorkerService)\n], DocumentUnicodeHighlighter);\nclass ViewportUnicodeHighlighter extends Disposable {\n    constructor(_editor, _options, _updateState) {\n        super();\n        this._editor = _editor;\n        this._options = _options;\n        this._updateState = _updateState;\n        this._model = this._editor.getModel();\n        this._decorations = this._editor.createDecorationsCollection();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this._update(), 250));\n        this._register(this._editor.onDidLayoutChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidScrollChange(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeHiddenAreas(() => {\n            this._updateSoon.schedule();\n        }));\n        this._register(this._editor.onDidChangeModelContent(() => {\n            this._updateSoon.schedule();\n        }));\n        this._updateSoon.schedule();\n    }\n    dispose() {\n        this._decorations.clear();\n        super.dispose();\n    }\n    _update() {\n        if (this._model.isDisposed()) {\n            return;\n        }\n        if (!this._model.mightContainNonBasicASCII()) {\n            this._decorations.clear();\n            return;\n        }\n        const ranges = this._editor.getVisibleRanges();\n        const decorations = [];\n        const totalResult = {\n            ranges: [],\n            ambiguousCharacterCount: 0,\n            invisibleCharacterCount: 0,\n            nonBasicAsciiCharacterCount: 0,\n            hasMore: false,\n        };\n        for (const range of ranges) {\n            const result = UnicodeTextModelHighlighter.computeUnicodeHighlights(this._model, this._options, range);\n            for (const r of result.ranges) {\n                totalResult.ranges.push(r);\n            }\n            totalResult.ambiguousCharacterCount += totalResult.ambiguousCharacterCount;\n            totalResult.invisibleCharacterCount += totalResult.invisibleCharacterCount;\n            totalResult.nonBasicAsciiCharacterCount += totalResult.nonBasicAsciiCharacterCount;\n            totalResult.hasMore = totalResult.hasMore || result.hasMore;\n        }\n        if (!totalResult.hasMore) {\n            // Don't show decorations if there are too many.\n            // A banner will be shown instead.\n            for (const range of totalResult.ranges) {\n                decorations.push({ range, options: Decorations.instance.getDecorationFromOptions(this._options) });\n            }\n        }\n        this._updateState(totalResult);\n        this._decorations.set(decorations);\n    }\n    getDecorationInfo(decoration) {\n        if (!this._decorations.has(decoration)) {\n            return null;\n        }\n        const model = this._editor.getModel();\n        const text = model.getValueInRange(decoration.range);\n        if (!isModelDecorationVisible(model, decoration)) {\n            return null;\n        }\n        return {\n            reason: computeReason(text, this._options),\n            inComment: isModelDecorationInComment(model, decoration),\n            inString: isModelDecorationInString(model, decoration),\n        };\n    }\n}\nexport let UnicodeHighlighterHoverParticipant = class UnicodeHighlighterHoverParticipant {\n    constructor(_editor, _languageService, _openerService) {\n        this._editor = _editor;\n        this._languageService = _languageService;\n        this._openerService = _openerService;\n        this.hoverOrdinal = 5;\n    }\n    computeSync(anchor, lineDecorations) {\n        if (!this._editor.hasModel() || anchor.type !== 1 /* HoverAnchorType.Range */) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const unicodeHighlighter = this._editor.getContribution(UnicodeHighlighter.ID);\n        if (!unicodeHighlighter) {\n            return [];\n        }\n        const result = [];\n        let index = 300;\n        for (const d of lineDecorations) {\n            const highlightInfo = unicodeHighlighter.getDecorationInfo(d);\n            if (!highlightInfo) {\n                continue;\n            }\n            const char = model.getValueInRange(d.range);\n            // text refers to a single character.\n            const codePoint = char.codePointAt(0);\n            const codePointStr = formatCodePointMarkdown(codePoint);\n            let reason;\n            switch (highlightInfo.reason.kind) {\n                case 0 /* UnicodeHighlighterReasonKind.Ambiguous */: {\n                    if (isBasicASCII(highlightInfo.reason.confusableWith)) {\n                        reason = nls.localize('unicodeHighlight.characterIsAmbiguousASCII', 'The character {0} could be confused with the ASCII character {1}, which is more common in source code.', codePointStr, formatCodePointMarkdown(highlightInfo.reason.confusableWith.codePointAt(0)));\n                    }\n                    else {\n                        reason = nls.localize('unicodeHighlight.characterIsAmbiguous', 'The character {0} could be confused with the character {1}, which is more common in source code.', codePointStr, formatCodePointMarkdown(highlightInfo.reason.confusableWith.codePointAt(0)));\n                    }\n                    break;\n                }\n                case 1 /* UnicodeHighlighterReasonKind.Invisible */:\n                    reason = nls.localize('unicodeHighlight.characterIsInvisible', 'The character {0} is invisible.', codePointStr);\n                    break;\n                case 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */:\n                    reason = nls.localize('unicodeHighlight.characterIsNonBasicAscii', 'The character {0} is not a basic ASCII character.', codePointStr);\n                    break;\n            }\n            const adjustSettingsArgs = {\n                codePoint: codePoint,\n                reason: highlightInfo.reason,\n                inComment: highlightInfo.inComment,\n                inString: highlightInfo.inString,\n            };\n            const adjustSettings = nls.localize('unicodeHighlight.adjustSettings', 'Adjust settings');\n            const uri = `command:${ShowExcludeOptions.ID}?${encodeURIComponent(JSON.stringify(adjustSettingsArgs))}`;\n            const markdown = new MarkdownString('', true)\n                .appendMarkdown(reason)\n                .appendText(' ')\n                .appendLink(uri, adjustSettings);\n            result.push(new MarkdownHover(this, d.range, [markdown], false, index++));\n        }\n        return result;\n    }\n    renderHoverParts(context, hoverParts) {\n        return renderMarkdownHovers(context, hoverParts, this._editor, this._languageService, this._openerService);\n    }\n};\nUnicodeHighlighterHoverParticipant = __decorate([\n    __param(1, ILanguageService),\n    __param(2, IOpenerService)\n], UnicodeHighlighterHoverParticipant);\nfunction codePointToHex(codePoint) {\n    return `U+${codePoint.toString(16).padStart(4, '0')}`;\n}\nfunction formatCodePointMarkdown(codePoint) {\n    let value = `\\`${codePointToHex(codePoint)}\\``;\n    if (!InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n        // Don't render any control characters or any invisible characters, as they cannot be seen anyways.\n        value += ` \"${`${renderCodePointAsInlineCode(codePoint)}`}\"`;\n    }\n    return value;\n}\nfunction renderCodePointAsInlineCode(codePoint) {\n    if (codePoint === 96 /* CharCode.BackTick */) {\n        return '`` ` ``';\n    }\n    return '`' + String.fromCodePoint(codePoint) + '`';\n}\nfunction computeReason(char, options) {\n    return UnicodeTextModelHighlighter.computeUnicodeHighlightReason(char, options);\n}\nclass Decorations {\n    constructor() {\n        this.map = new Map();\n    }\n    getDecorationFromOptions(options) {\n        return this.getDecoration(!options.includeComments, !options.includeStrings);\n    }\n    getDecoration(hideInComments, hideInStrings) {\n        const key = `${hideInComments}${hideInStrings}`;\n        let options = this.map.get(key);\n        if (!options) {\n            options = ModelDecorationOptions.createDynamic({\n                description: 'unicode-highlight',\n                stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */,\n                className: 'unicode-highlight',\n                showIfCollapsed: true,\n                overviewRuler: null,\n                minimap: null,\n                hideInCommentTokens: hideInComments,\n                hideInStringTokens: hideInStrings,\n            });\n            this.map.set(key, options);\n        }\n        return options;\n    }\n}\nDecorations.instance = new Decorations();\nexport class DisableHighlightingInCommentsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInComments', 'Disable highlighting of characters in comments'),\n            alias: 'Disable highlighting of characters in comments',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInComments.shortLabel', 'Disable Highlight In Comments');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeComments, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nexport class DisableHighlightingInStringsAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingInStrings', 'Disable highlighting of characters in strings'),\n            alias: 'Disable highlighting of characters in strings',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingInStrings.shortLabel', 'Disable Highlight In Strings');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.includeStrings, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nexport class DisableHighlightingOfAmbiguousCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfAmbiguousCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters', 'Disable highlighting of ambiguous characters'),\n            alias: 'Disable highlighting of ambiguous characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfAmbiguousCharacters.shortLabel', 'Disable Ambiguous Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.ambiguousCharacters, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfAmbiguousCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfAmbiguousCharacters';\nexport class DisableHighlightingOfInvisibleCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfInvisibleCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfInvisibleCharacters', 'Disable highlighting of invisible characters'),\n            alias: 'Disable highlighting of invisible characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfInvisibleCharacters.shortLabel', 'Disable Invisible Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.invisibleCharacters, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfInvisibleCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfInvisibleCharacters';\nexport class DisableHighlightingOfNonBasicAsciiCharactersAction extends EditorAction {\n    constructor() {\n        super({\n            id: DisableHighlightingOfNonBasicAsciiCharactersAction.ID,\n            label: nls.localize('action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters', 'Disable highlighting of non basic ASCII characters'),\n            alias: 'Disable highlighting of non basic ASCII characters',\n            precondition: undefined\n        });\n        this.shortLabel = nls.localize('unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters.shortLabel', 'Disable Non ASCII Highlight');\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor === null || accessor === void 0 ? void 0 : accessor.get(IConfigurationService);\n            if (configurationService) {\n                this.runAction(configurationService);\n            }\n        });\n    }\n    runAction(configurationService) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield configurationService.updateValue(unicodeHighlightConfigKeys.nonBasicASCII, false, 2 /* ConfigurationTarget.USER */);\n        });\n    }\n}\nDisableHighlightingOfNonBasicAsciiCharactersAction.ID = 'editor.action.unicodeHighlight.disableHighlightingOfNonBasicAsciiCharacters';\nexport class ShowExcludeOptions extends EditorAction {\n    constructor() {\n        super({\n            id: ShowExcludeOptions.ID,\n            label: nls.localize('action.unicodeHighlight.showExcludeOptions', \"Show Exclude Options\"),\n            alias: 'Show Exclude Options',\n            precondition: undefined\n        });\n    }\n    run(accessor, editor, args) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const { codePoint, reason, inString, inComment } = args;\n            const char = String.fromCodePoint(codePoint);\n            const quickPickService = accessor.get(IQuickInputService);\n            const configurationService = accessor.get(IConfigurationService);\n            function getExcludeCharFromBeingHighlightedLabel(codePoint) {\n                if (InvisibleCharacters.isInvisibleCharacter(codePoint)) {\n                    return nls.localize('unicodeHighlight.excludeInvisibleCharFromBeingHighlighted', 'Exclude {0} (invisible character) from being highlighted', codePointToHex(codePoint));\n                }\n                return nls.localize('unicodeHighlight.excludeCharFromBeingHighlighted', 'Exclude {0} from being highlighted', `${codePointToHex(codePoint)} \"${char}\"`);\n            }\n            const options = [];\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n                for (const locale of reason.notAmbiguousInLocales) {\n                    options.push({\n                        label: nls.localize(\"unicodeHighlight.allowCommonCharactersInLanguage\", \"Allow unicode characters that are more common in the language \\\"{0}\\\".\", locale),\n                        run: () => __awaiter(this, void 0, void 0, function* () {\n                            excludeLocaleFromBeingHighlighted(configurationService, [locale]);\n                        }),\n                    });\n                }\n            }\n            options.push({\n                label: getExcludeCharFromBeingHighlightedLabel(codePoint),\n                run: () => excludeCharFromBeingHighlighted(configurationService, [codePoint])\n            });\n            if (inComment) {\n                const action = new DisableHighlightingInCommentsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (inString) {\n                const action = new DisableHighlightingInStringsAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            if (reason.kind === 0 /* UnicodeHighlighterReasonKind.Ambiguous */) {\n                const action = new DisableHighlightingOfAmbiguousCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 1 /* UnicodeHighlighterReasonKind.Invisible */) {\n                const action = new DisableHighlightingOfInvisibleCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else if (reason.kind === 2 /* UnicodeHighlighterReasonKind.NonBasicAscii */) {\n                const action = new DisableHighlightingOfNonBasicAsciiCharactersAction();\n                options.push({ label: action.label, run: () => __awaiter(this, void 0, void 0, function* () { return action.runAction(configurationService); }) });\n            }\n            else {\n                expectNever(reason);\n            }\n            const result = yield quickPickService.pick(options, { title: nls.localize('unicodeHighlight.configureUnicodeHighlightOptions', 'Configure Unicode Highlight Options') });\n            if (result) {\n                yield result.run();\n            }\n        });\n    }\n}\nShowExcludeOptions.ID = 'editor.action.unicodeHighlight.showExcludeOptions';\nfunction excludeCharFromBeingHighlighted(configurationService, charCodes) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = configurationService.getValue(unicodeHighlightConfigKeys.allowedCharacters);\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            value = existingValue;\n        }\n        else {\n            value = {};\n        }\n        for (const charCode of charCodes) {\n            value[String.fromCodePoint(charCode)] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedCharacters, value, 2 /* ConfigurationTarget.USER */);\n    });\n}\nfunction excludeLocaleFromBeingHighlighted(configurationService, locales) {\n    var _a;\n    return __awaiter(this, void 0, void 0, function* () {\n        const existingValue = (_a = configurationService.inspect(unicodeHighlightConfigKeys.allowedLocales).user) === null || _a === void 0 ? void 0 : _a.value;\n        let value;\n        if ((typeof existingValue === 'object') && existingValue) {\n            // Copy value, as the existing value is read only\n            value = Object.assign({}, existingValue);\n        }\n        else {\n            value = {};\n        }\n        for (const locale of locales) {\n            value[locale] = true;\n        }\n        yield configurationService.updateValue(unicodeHighlightConfigKeys.allowedLocales, value, 2 /* ConfigurationTarget.USER */);\n    });\n}\nfunction expectNever(value) {\n    throw new Error(`Unexpected value: ${value}`);\n}\nregisterEditorAction(DisableHighlightingOfAmbiguousCharactersAction);\nregisterEditorAction(DisableHighlightingOfInvisibleCharactersAction);\nregisterEditorAction(DisableHighlightingOfNonBasicAsciiCharactersAction);\nregisterEditorAction(ShowExcludeOptions);\nregisterEditorContribution(UnicodeHighlighter.ID, UnicodeHighlighter, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nHoverParticipantRegistry.register(UnicodeHighlighterHoverParticipant);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { basename } from '../../../../base/common/resources.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport * as nls from '../../../../nls.js';\nimport { IDialogService } from '../../../../platform/dialogs/common/dialogs.js';\nconst ignoreUnusualLineTerminators = 'ignoreUnusualLineTerminators';\nfunction writeIgnoreState(codeEditorService, model, state) {\n    codeEditorService.setModelProperty(model.uri, ignoreUnusualLineTerminators, state);\n}\nfunction readIgnoreState(codeEditorService, model) {\n    return codeEditorService.getModelProperty(model.uri, ignoreUnusualLineTerminators);\n}\nexport let UnusualLineTerminatorsDetector = class UnusualLineTerminatorsDetector extends Disposable {\n    constructor(_editor, _dialogService, _codeEditorService) {\n        super();\n        this._editor = _editor;\n        this._dialogService = _dialogService;\n        this._codeEditorService = _codeEditorService;\n        this._isPresentingDialog = false;\n        this._config = this._editor.getOption(122 /* EditorOption.unusualLineTerminators */);\n        this._register(this._editor.onDidChangeConfiguration((e) => {\n            if (e.hasChanged(122 /* EditorOption.unusualLineTerminators */)) {\n                this._config = this._editor.getOption(122 /* EditorOption.unusualLineTerminators */);\n                this._checkForUnusualLineTerminators();\n            }\n        }));\n        this._register(this._editor.onDidChangeModel(() => {\n            this._checkForUnusualLineTerminators();\n        }));\n        this._register(this._editor.onDidChangeModelContent((e) => {\n            if (e.isUndoing) {\n                // skip checking in case of undoing\n                return;\n            }\n            this._checkForUnusualLineTerminators();\n        }));\n        this._checkForUnusualLineTerminators();\n    }\n    _checkForUnusualLineTerminators() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._config === 'off') {\n                return;\n            }\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            if (!model.mightContainUnusualLineTerminators()) {\n                return;\n            }\n            const ignoreState = readIgnoreState(this._codeEditorService, model);\n            if (ignoreState === true) {\n                // this model should be ignored\n                return;\n            }\n            if (this._editor.getOption(88 /* EditorOption.readOnly */)) {\n                // read only editor => sorry!\n                return;\n            }\n            if (this._config === 'auto') {\n                // just do it!\n                model.removeUnusualLineTerminators(this._editor.getSelections());\n                return;\n            }\n            if (this._isPresentingDialog) {\n                // we're currently showing the dialog, which is async.\n                // avoid spamming the user\n                return;\n            }\n            let result;\n            try {\n                this._isPresentingDialog = true;\n                result = yield this._dialogService.confirm({\n                    title: nls.localize('unusualLineTerminators.title', \"Unusual Line Terminators\"),\n                    message: nls.localize('unusualLineTerminators.message', \"Detected unusual line terminators\"),\n                    detail: nls.localize('unusualLineTerminators.detail', \"The file '{0}' contains one or more unusual line terminator characters, like Line Separator (LS) or Paragraph Separator (PS).\\n\\nIt is recommended to remove them from the file. This can be configured via `editor.unusualLineTerminators`.\", basename(model.uri)),\n                    primaryButton: nls.localize({ key: 'unusualLineTerminators.fix', comment: ['&& denotes a mnemonic'] }, \"&&Remove Unusual Line Terminators\"),\n                    cancelButton: nls.localize('unusualLineTerminators.ignore', \"Ignore\")\n                });\n            }\n            finally {\n                this._isPresentingDialog = false;\n            }\n            if (!result.confirmed) {\n                // this model should be ignored\n                writeIgnoreState(this._codeEditorService, model, true);\n                return;\n            }\n            model.removeUnusualLineTerminators(this._editor.getSelections());\n        });\n    }\n};\nUnusualLineTerminatorsDetector.ID = 'editor.contrib.unusualLineTerminatorsDetector';\nUnusualLineTerminatorsDetector = __decorate([\n    __param(1, IDialogService),\n    __param(2, ICodeEditorService)\n], UnusualLineTerminatorsDetector);\nregisterEditorContribution(UnusualLineTerminatorsDetector.ID, UnusualLineTerminatorsDetector, 1 /* EditorContributionInstantiation.AfterFirstRender */);\n"],"names":["ModelProvider","Status","StickyScrollWidgetState","_createClass","lineNumbers","lastLineRelativePosition","_classCallCheck","this","_ttPolicy","createTrustedTypesPolicy","createHTML","value","StickyScrollWidget","_Disposable","_inherits","_super","_createSuper","_editor","_this","call","_rootDomNode","document","createElement","_disposableStore","_register","DisposableStore","_lineNumbers","_lastLineRelativePosition","_hoverOnLine","_hoverOnColumn","_layoutInfo","getLayoutInfo","className","classList","toggle","EmbeddedCodeEditorWidget","style","width","concat","minimap","minimapCanvasOuterWidth","verticalScrollbarWidth","key","get","state","dom","clearNode","clear","length","editorLineHeight","getOption","_renderRootNode","_getViewModel","_step","_iterator","_createForOfIteratorHelper","entries","s","n","done","_step$value","_slicedToArray","index","line","childNode","_renderChildNode","appendChild","err","e","f","widgetHeight","display","height","toString","setAttribute","side","marginLeft","actualInlineDecorations","_this2","child","viewModel","viewLineNumber","coordinatesConverter","convertModelPositionToViewPosition","Position","lineNumber","lineRenderingData","getViewLineRenderingData","layoutInfo","minimapSide","lineHeight","lineNumberOption","LineDecoration","filter","inlineDecorations","minColumn","maxColumn","newLine","renderLineInput","RenderLineInput","content","continuesWithWrappedLine","isBasicASCII","containsRTL","tokens","tabSize","startVisibleColumn","sb","StringBuilder","renderViewLine","build","lineHTMLNode","add","innerHTML","lineNumberHTMLNode","contentLeft","innerLineNumberHTML","renderType","innerText","Math","abs","getPosition","lineNumbersWidth","paddingLeft","lineNumbersLeft","applyFontInfo","tabIndex","zIndex","position","top","addDisposableListener","hasModel","text","StandardMouseEvent","target","getModel","getLineContent","indexOf","preference","Disposable","StickyRange","startLineNumber","endLineNumber","StickyElement","range","children","parent","StickyModel","uri","version","element","outlineProviderId","__decorate","decorators","desc","d","c","arguments","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","result","then","apply","StickyModelProvider","_languageConfigurationService","_languageFeaturesService","defaultModel","_modelProviders","_modelPromise","_updateScheduler","Delayer","stickyModelFromCandidateOutlineProvider","StickyModelFromCandidateOutlineProvider","stickyModelFromSyntaxFoldingProvider","StickyModelFromCandidateSyntaxFoldingProvider","stickyModelFromIndentationFoldingProvider","StickyModelFromCandidateIndentationFoldingProvider","OUTLINE_MODEL","push","FOLDING_PROVIDER_MODEL","INDENTATION_MODEL","_store","cancel","textModel","textModelVersionId","token","_regeneratorRuntime","mark","_callee2","wrap","_context2","prev","dispose","_a","_cancelModelPromise","trigger","_callee","modelProvider","_modelProvider$comput","statusPromise","modelPromise","status","_context","computeStickyModel","sent","abrupt","t0","CANCELED","VALID","stickyModel","t1","finish","stop","ILanguageConfigurationService","ILanguageFeaturesService","StickyModelCandidateProvider","_stickyModel","INVALID","modelVersionId","isCancellationRequested","isProviderValid","_invalid","providerModelPromise","createCancelablePromise","createModelFromProvider","providerModel","isModelValid","createStickyModel","undefined","onUnexpectedError","model","_StickyModelCandidate","_this3","OutlineModel","create","documentSymbolProvider","_this$_stickyModelFro","_stickyModelFromOutlineModel","stickyOutlineElement","providerID","size","outlineModel","preferredProvider","outlineElements","_this4","Iterable","first","values","OutlineGroup","provider","find","outlineGroupOfModel","id","_step2","tempID","maxTotalSumOfRanges","optimalOutlineGroup","_iterator2","_step2$value","outlineGroup","totalSumRanges","_findSumOfRangesOfGroup","_step3","stickyChildren","outlineElementsArray","Array","from","sort","element1","element2","range1","symbol","range2","_comparator","_iterator3","outlineElement","_stickyModelFromOutlineElement","selectionRange","previousStartLine","_step4","_this5","_iterator4","_step5","_iterator5","subchild","child1","child2","outline","_step6","res","_iterator6","OutlineElement","StickyModelFromCandidateFoldingProvider","_StickyModelCandidate2","_super2","editor","_this6","_foldingLimitReporter","RangesLimitReporter","foldingElement","_fromFoldingRegions","foldingRegions","orderedStickyElements","parentIndex","getParentIndex","parentNode","getStartLineNumber","getEndLineNumber","_StickyModelFromCandi","_super3","_this7","IndentRangeProvider","compute","_StickyModelFromCandi2","_super4","_this8","FoldingController","getFoldingRangeProviders","_this9","selectedProviders","SyntaxRangeProvider","StickyLineCandidate","nestingDepth","StickyLineCandidateProvider","_onDidChangeStickyScroll","Emitter","onDidChangeStickyScroll","event","_options","_model","_cts","_stickyModelProvider","_sessionStore","_updateSoon","RunOnceScheduler","update","onDidChangeConfiguration","hasChanged","readConfiguration","_get","_getPrototypeOf","prototype","enabled","onDidChangeModel","onDidChangeHiddenAreas","onDidChangeModelContent","schedule","onDidChange","CancellationTokenSource","updateStickyModel","fire","isDifferentModel","resetHandle","getVersionId","isEqual","setTimeout","clearTimeout","depth","lastStartLineNumber","lastLine","childrenStartLines","lowerBound","updateIndex","binarySearch","a","b","upperBound","childStartLine","childEndLine","getCandidateStickyLinesIntersectingFromStickyModel","_b","stickyLineCandidates","hiddenRanges","getHiddenAreas","_loop","hiddenRange","stickyLine","StickyScrollController","_contextMenuService","_instaService","_languageFeatureDebounceService","_contextKeyService","_maxStickyLines","Number","MAX_SAFE_INTEGER","_candidateDefinitionsLength","_focusedStickyElementIndex","_enabled","_focused","_positionRevealed","_onMouseDown","_stickyScrollWidget","_stickyLineCandidateProvider","_widgetState","_readConfiguration","getDomNode","EventType","CONTEXT_MENU","_assertThisInitialized","_onContextMenu","_stickyScrollFocusedContextKey","EditorContextKeys","stickyScrollFocused","bindTo","_stickyScrollVisibleContextKey","stickyScrollVisible","focusTracker","trackFocus","onDidBlur","_","clientHeight","focus","_disposeFocusStickyScrollStore","onDidFocus","_createClickLinkGesture","MOUSE_DOWN","set","_focusDisposableStore","rootNode","lastElementChild","_stickyElements","_focusNav","direction","item","_revealPosition","column","revealPosition","setSelection","Range","fromPositions","linkGestureStore","sessionStore","gesture","ClickLinkGesture","onMouseMoveOrRelevantKeyDown","_ref","_ref2","mouseEvent","hasTriggerModifier","targetMouseEvent","detail","getId","hoverOnColumn","hoverOnLine","stickyPositionProjectedOnEditor","equalsRange","_stickyRangeProjectedOnEditor","textDecoration","currentHTMLChild","cancellationToken","toDisposable","getDefinitionsAtPosition","definitionProvider","candidateDefinitions","childHTML","onCancel","onExecute","invokeFunction","goToDefinitionWithLocation","isRightClick","showContextMenu","menuId","MenuId","StickyScrollContext","getAnchor","options","removeOverlayWidget","addOverlayWidget","onDidScrollChange","_renderStickyScroll","onDidLayoutChange","_onDidResize","onDidChangeModelTokens","_onTokensChange","onDidChangeCursorPosition","stickyLineNumbers","getCurrentLines","stickyLineNumber","ranges","fromLineNumber","toLineNumber","_needsUpdate","theoreticalLines","round","stickyLineVersion","findScrollWidgetState","setState","focusedStickyElementLineNumber","includes","maxNumberStickyLines","min","maxLineCount","scrollTop","getScrollTop","arrayVisibleRanges","getVisibleRanges","fullVisibleRange","candidateRanges","getCandidateStickyLinesIntersecting","start","end","topOfElementAtDepth","bottomOfElementAtDepth","bottomOfBeginningLine","getBottomForLineNumber","topOfEndLine","getTopForLineNumber","bottomOfEndLine","getContribution","ID","IContextMenuService","IInstantiationService","ILanguageFeatureDebounceService","IContextKeyService","ToggleStickyScroll","_Action","title","localize","mnemonicTitle","comment","original","category","Categories","View","toggled","condition","ContextKeyExpr","equals","menu","CommandPalette","MenubarViewMenu","group","order","accessor","configurationService","newValue","IConfigurationService","getValue","updateValue","Action2","weight","FocusStickyScroll","_EditorAction","precondition","and","has","_accessor","EditorAction2","SelectNextStickyScrollLine","_EditorAction2","isEqualTo","keybinding","primary","focusNext","SelectPreviousStickyScrollLine","_EditorAction3","focusPrevious","GoToStickyScrollLine","_EditorAction4","_super5","goToFocused","SelectEditor","_EditorAction5","_super6","selectEditor","registerEditorContribution","registerAction2","LineContext","leadingLineContent","characterCountDelta","CompletionModel","items","lineContext","wordDistance","snippetSuggestions","fuzzyScoreOptions","FuzzyScoreOptions","default","clipboardText","_snippetCompareFn","_compareCompletionItems","_items","_column","_wordDistance","_refilterKind","_lineContext","_fuzzyScoreOptions","_compareCompletionItemsSnippetsUp","_compareCompletionItemsSnippetsDown","_filteredItems","_ensureCachedState","_itemsByProvider","Set","getItemsByProvider","container","incomplete","_stats","_createCachedState","Map","labelLengths","_this$_lineContext","word","wordLow","source","scoreFn","filterGraceful","fuzzyScore","fuzzyScoreGracefulAggressive","isInvalid","arr","overwriteBefore","editStart","wordLen","slice","toLowerCase","score","FuzzyScore","Default","wordPos","ch","charCodeAt","completion","filterText","match","filterTextLow","compareIgnoreCase","textLabel","anyScore","labelLow","idx","distance","pLabelLen","quickSelect","kind","_snippetSuggestSupport","Context","Visible","historyNavigationVisible","HasFocusedSuggestion","RawContextKey","DetailsVisible","MultipleSuggestions","MakesTextEdit","AcceptSuggestionsOnEnter","HasInsertAndReplaceRange","InsertMode","type","description","CanResolve","suggestWidgetStatusbarMenu","CompletionItem","label","sortTextLow","sortText","extensionId","isIRange","startColumn","editInsertEnd","endColumn","editReplaceEnd","spansMultipleLines","insert","replace","resolveCompletionItem","_resolveCache","_isResolved","sub","onCancellationRequested","assign","isCancellationError","CompletionOptions","snippetSortOrder","kindFilter","providerFilter","providerItemsToReuse","showDeprecated","getSnippetSuggestSupport","CompletionItemModel","needsClipboard","durations","disposable","provideSuggestionItems","registry","context","triggerKind","CancellationToken","None","_callee4","sw","defaultReplaceRange","defaultRange","disposables","onCompletionList","snippetCompletions","_context5","StopWatch","clone","getWordAtPosition","setEndPosition","_c","didAddResult","suggestions","suggestion","tags","insertTextRules","SnippetParser","guessNeedsClipboard","insertText","isDisposable","providerName","_debugDisplayName","elapsedProvider","duration","elapsedOverall","elapsed","reuseItems","list","forEach","provideCompletionItems","orderedGroups","providerGroup","_context4","all","map","_callee3","_sw","_context3","onUnexpectedExternalError","delegateYield","CancellationError","snippetConfig","_snippetComparators","defaultComparator","showSimpleSuggestions","triggerSuggest","CommandsRegistry","registerCommand","_len","args","_key","_callee5","triggerCharacter","maxItemsToResolve","_accessor$get","completionProvider","ref","_result","resolving","actualPosition","completions","_context6","assertType","URI","isUri","isIPosition","ITextModelService","createModelReference","object","textEditorModel","validatePosition","QuickSuggestionsOptions","config","other","comments","strings","tokenType","WordContextKey","contextKeyService","_ckAtEnd","AtEnd","_configListener","_update","_selectionListener","reset","checkForWordEnd","selection","getSelection","getStartPosition","onDidChangeCursorSelection","SuggestAlternatives","_index","_ckOtherSuggestions","OtherSuggestions","_listener","_acceptNext","_ignore","acceptNext","_moveIndex","_move","fwd","newIndex","rounds","additionalTextEdits","CommitCharacterController","widget","accept","_disposables","onDidSuggest","completionModel","onDidCancel","onDidShow","_onItem","getFocusedItem","onDidHide","onWillType","_active","isFrozen","acceptCharacters","selected","isNonEmptyArray","commitCharacters","CharacterSet","triggerOptions","substr","leadingWord","getWordUntilPosition","pos","tokenization","tokenizeIfCheap","isNaN","SuggestModel","_editorWorkerService","_clipboardService","_telemetryService","_logService","_configurationService","_toDispose","_triggerCharacterListener","_triggerQuickSuggest","TimeoutTimer","_triggerState","_completionDisposables","_onDidCancel","_onDidTrigger","_onDidSuggest","onDidTrigger","_telemetryGate","_currentSelection","Selection","_updateTriggerCharacters","onDidChangeModelLanguage","_updateActiveSuggestSession","editorIsComposing","onDidCompositionStart","onDidCompositionEnd","_onCompositionEnd","_onCursorChange","_refilterCompletionItems","supportsByTriggerCharacter","support","triggerCharacters","checkTriggerCharacter","Boolean","getContextKeyValue","suppressSuggestions","InlineCompletionContextKeys","canShowSuggestOnTriggerCharacters","shouldAutoTrigger","lastChar","isLowSurrogate","isHighSurrogate","charAt","supports","_completionModel","auto","retrigger","completionOptions","onDidType","_requestToken","prevSelection","isEmpty","reason","containsRange","getEndPosition","isBeforeOrEqual","_doTriggerQuickSuggest","isAllOff","snippetsPreventQuickSuggestions","SnippetController2","isInSnippet","cancelAndSet","hasWidgetFocus","isAllOn","lineTokens","getLineTokens","getStandardTokenType","findTokenIndexAtOffset","max","valueFor","inlineSuggestionVisible","canShowQuickSuggest","ctx","refilter","_onNewContext","_d","_e","_f","shy","suggestCtx","_SuggestModel$_create","_createSuggestFilter","itemKindFilter","itemKind","WordDistance","_g","fuzzySearchOptions","readText","firstMatchCanBeWeak","matchOnWordStartOnly","_reportDurationsTelemetry","catch","publicLog2","data","JSON","stringify","debug","getLeadingWhitespace","getIncompleteProvider","_step4$value","oldLineContext","suggestOptions","showMethods","showFunctions","showConstructors","showFields","showVariables","showClasses","showStructs","showInterfaces","showModules","showProperties","showEvents","showOperators","showUnits","showValues","showConstants","showEnums","showEnumMembers","showKeywords","showWords","showColors","showFiles","showReferences","showFolders","showTypeParameters","showSnippets","showUsers","showIssues","IEditorWorkerService","IClipboardService","ITelemetryService","ILogService","OvertypingCapturer","suggestModel","_lastOvertyped","_locked","selections","getSelections","selectionsLength","willOvertype","getValueLengthInRange","_maxSelectionLength","getValueInRange","multiline","StatusBarViewItem","_MenuEntryActionViewI","kb","_keybindingService","lookupKeybinding","_action","textContent","symbolPrintEnter","getLabel","MenuEntryActionViewItem","SuggestWidgetStatus","_menuId","instantiationService","_menuService","_menuDisposables","append","$","actionViewItemProvider","action","MenuItemAction","createInstance","_leftActions","ActionBar","_rightActions","domNode","remove","createMenu","left","right","getActions","actions","_toConsumableArray","renderMenu","IMenuService","canExpandCompletionItem","documentation","SuggestDetailsWidget","instaService","_onDidClose","onDidClose","_onDidChangeContents","onDidChangeContents","_renderDisposeable","_borderWidth","_size","Dimension","_markdownRenderer","MarkdownRenderer","_body","_scrollbar","DomScrollableElement","alwaysConsumeMouseWheel","_header","_close","ThemeIcon","asCSSSelector","Codicon","close","nls","_type","_docs","_configureFont","getOptions","fontInfo","fontFamily","getMassagedFontFamily","fontSize","fontWeight","fontSizePx","lineHeightPx","fontFeatureSettings","borderWidth","borderHeight","verticalPadding","horizontalPadding","layout","explainMode","_item$completion","md","join","MarkdownString","appendCodeblock","cappedDetail","show","test","hide","renderedContents","render","onDidRenderAsync","userSelect","onmousedown","preventDefault","stopPropagation","onclick","clearContents","newSize","scanDomNode","much","scrollHeight","scrollDown","scrollUp","SuggestDetailsOverlay","topLeftNow","sizeNow","_added","_preferAlignAtTop","_resizable","ResizableHTMLElement","enableSashes","deltaTop","deltaLeft","onDidWillResize","_topLeft","onDidResize","dimension","updateTopLeft","west","north","_applyTopLeft","_userSize","_anchorBox","_placeAtAnchor","sessionEnded","clearSashHoverState","anchor","preferAlignAtTop","anchorBox","getBoundingClientRect","alignAtTop","maxSize","bodyBox","getClientArea","body","info","defaultMinSize","defaultTop","eastPlacement","maxSizeTop","maxSizeBottom","with","fit","minSize","placements","placement","p","bottom","maxHeight","topLeft","getAriaId","suggestMoreInfoIcon","registerIcon","chevronRight","_completionItemColor","ColorExtractor","out","_regexStrict","_regexRelaxed","exec","RegExp","ItemRenderer","_modelService","_languageService","_themeService","_onDidToggleDetails","onDidToggleDetails","templateId","root","icon","colorspan","main","iconContainer","iconLabel","IconLabel","supportHighlights","supportIcons","parametersLabel","qualifierLabel","detailsLabel","readMore","configureFont","letterSpacing","letterSpacingPx","backgroundColor","labelOptions","labelEscapeNewLines","matches","createMatches","color","extract","getFileIconTheme","hasFileIcons","labelClasses","getIconClasses","scheme","path","FileKind","FILE","detailClasses","extraClasses","hasFolderIcons","FOLDER","flat","_data$iconContainer$c","asClassNameArray","CompletionItemKinds","toIcon","setLabel","stripNewLines","showInlineDetails","templateData","str","IModelService","ILanguageService","IThemeService","registerColor","dark","editorWidgetBackground","light","hcDark","hcLight","editorWidgetBorder","editorSuggestWidgetForeground","editorForeground","quickInputListFocusForeground","quickInputListFocusIconForeground","editorSuggestWidgetSelectedBackground","quickInputListFocusBackground","listHighlightForeground","listFocusHighlightForeground","transparent","PersistedWidgetSize","_service","getEditorType","raw","obj","parse","is","lift","store","SuggestWidget","_storageService","_state","_isAuto","_pendingLayout","MutableDisposable","_pendingShowDetails","_ignoreFocusEvents","_forceRenderingAbove","_explainMode","_showTimeout","_onDidSelect","PauseableEmitter","_onDidFocus","_onDidHide","_onDidShow","onDidSelect","_onDetailsKeydown","onDetailsKeyDown","_contentWidget","SuggestContentWidget","_persistedSize","ResizeState","persistedSize","currentSize","persistHeight","persistWidth","lockPreference","restore","_resize","south","east","_this$getLayoutInfo","itemHeight","defaultSize","threshold","_this$element$size","unlockPreference","_messageElement","_listElement","details","toggleDetails","_details","applyIconStyle","showIcons","renderer","_list","List","getHeight","_element","getTemplateId","useShadows","mouseSupport","multipleSelectionSupport","accessibilityProvider","getRole","getWidgetAriaLabel","getWidgetRole","getAriaLabel","_item$completion$labe","isResolved","_isDetailsVisible","docs","getListStyles","listInactiveFocusBackground","listInactiveFocusOutline","activeContrastBorder","_status","applyStatusBarStyle","showStatusBar","onDidColorThemeChange","t","_onThemeChange","getColorTheme","onMouseDown","_onListMouseDownOrTap","onTap","onDidChangeSelection","_onListSelection","onDidChangeFocus","_onListFocus","_onCursorSelectionChanged","_ctxSuggestWidgetVisible","SuggestContext","_ctxSuggestWidgetDetailsVisible","_ctxSuggestWidgetMultipleSuggestions","_ctxSuggestWidgetHasFocusedSuggestion","addStandardDisposableListener","_onEditorMouseDown","_loadingTimeout","contains","browserEvent","_select","elements","indexes","theme","isHighContrast","_currentSuggestionDetails","_focusedItem","setAriaOptions","activeDescendant","reveal","loading","disposableTimeout","showDetails","splice","setFocus","_cappedHeight","LOADING_MESSAGE","_show","NO_SUGGESTIONS_MESSAGE","_layout","delay","setPosition","_setState","selectionIndex","isAuto","noFocus","visibleCount","pause","resume","runAtThisOrScheduleAtNextAnimationFrame","pageDown","focusNextPage","scrollBottom","focusLast","pageUp","focusPreviousPage","focusFirst","getFocus","getFocusedElements","_setDetailsVisible","renderLoading","renderItem","_positionDetails","dim","minPersistedHeight","ceil","setPreference","maxWidth","preferredWidth","stats","typicalHalfwidthCharacterWidth","fullHeight","statusBarHeight","contentHeight","minHeight","editorBox","getDomNodePagePosition","cursorBox","getScrolledVisiblePosition","cursorBottom","maxHeightBelow","availableSpaceAbove","maxHeightAbove","capped","wanted","preferredSize","_this$element$maxSize","placeAtAnchor","clamp","getBoolean","IStorageService","_widget","allowEditorOverflow","suppressMouseDown","_preferenceLocked","_hidden","removeContentWidget","addContentWidget","layoutContentWidget","_position","_preference","_this$_widget$element","_this$_widget$getLayo","_afterRender","LineSuffix","getLineMaxColumn","offset","getOffsetAt","getPositionAt","_marker","deltaDecorations","stickiness","isDisposed","getDecorationRange","SuggestController","_memoryService","_commandService","_instantiationService","_lineSuffix","_selectors","PriorityRegistry","priority","register","select","ctxInsertMode","insertMode","IdleValue","_insertSuggestion","commitCharacterController","ctxMakesTextEdit","ctxHasInsertAndReplace","ctxCanResolve","toKeyCodeChord","KeyCodeChord","platform","isModifierKey","_overtypingCapturer","_alternatives","showTriggered","itemsOrderedByPriorityDesc","selectionMode","showSuggestions","hideWidget","onDidBlurEditorWidget","acceptSuggestionsOnEnter","updateFromConfig","acceptSuggestionOnEnter","flags","snippetController","modelVersionNow","getAlternativeVersionId","tasks","cts","pushUndoStop","getOverwriteInfo","memorize","isArray","scrollState","StableEditorScrollState","capture","executeEdits","edit","EditOperation","replaceMove","restoreRelativeVerticalPositionOfCursor","docListener","onDidChangeContent","isFlush","changes","change","thisPosition","isBefore","oldFlags","didType","typeListener","some","applied","trace","_this$_commandService","escape","overwriteAfter","undoStopBefore","undoStopAfter","adjustWhitespace","overtypingCapturer","command","TriggerSuggestAction","executeCommand","canUndo","undo","_alertCompletionItem","finally","_reportSuggestionAcceptedTelemetry","acceptedSuggestion","providerId","split","basenameHash","hash","basename","languageId","getLanguageId","fileExtension","extname","toggleMode","delta","msg","alert","onlyFrom","noFilter","arg","positionNow","fallback","Event","once","listener","any","makesTextEdit","keepAlternativeSuggestions","alternativeOverwriteConfig","focusSelected","selectNext","selectNextPage","selectLast","selectPrevious","selectPreviousPage","selectFirst","toggleExplainMode","toggleDetailsFocus","resetPersistedSize","forceRenderingAbove","isInitialized","stopForceRenderingAbove","selector","ISuggestMemoryService","ICommandService","prioritySelector","Error","s1","s2","alias","writable","hasCompletionItemProvider","toNegated","kbOpts","kbExpr","textInputFocus","secondary","mac","controller","EditorAction","registerEditorAction","SuggestCommand","EditorCommand","bindToContribution","registerEditorCommand","handler","x","acceptSelectedSuggestion","menuOpts","when","registerCommandAlias","cancelSuggestWidget","or","negate","selectNextSuggestion","selectNextPageSuggestion","selectLastSuggestion","selectPrevSuggestion","selectPrevPageSuggestion","selectFirstSuggestion","focusSuggestion","toggleSuggestionDetails","toggleSuggestionFocus","InSnippetMode","triggerSuggestAndAcceptBest","isObject","acceptNextSuggestion","acceptPrevSuggestion","_class","resetWidgetSize","SuggestInlineCompletion","InlineCompletionResults","_RefCountedDisposable","_suggestMemoryService","selectedIndex","second","resolveCount","snippet","RefCountedDisposable","SuggestInlineCompletions","_getEditorOption","_languageFeatureService","wordInfo","triggerCharacterInfo","leadingLineContents","newLineContext","selectedSuggestionInfo","_getTriggerCharacterInfo","_lastResult","canBeReused","acquire","providers","boostFullMatch","_completions","release","EditorContribution","languageFeatureService","editorService","_counter","listCodeEditors","_disposable","inlineCompletionsProvider","ICodeEditorService","Memory","name","topScore","_items$i","preselect","NoMemory","_Memory","LRUMemory","_Memory2","_cache","LRUCache","_seq","touch","lineSuffix","indexPreselect","indexRecency","seq","peek","toJSON","fromString","PrefixMemory","_Memory3","_trie","TernarySearchTree","forStrings","findSubstr","_items$i$completion","SuggestMemoryService","_configService","_persistSoon","_saveState","onWillSaveState","WillSaveStateReason","SHUTDOWN","_withStrategy","mode","overrideIdentifier","getLanguageIdAtPosition","resource","_strategy","ctor","_strategyCtors","scope","_storagePrefix","fromJSON","createDecorator","registerSingleton","service","_yield$BracketSelecti","_yield$BracketSelecti2","wordRanges","wordUntilPos","localityBonus","canComputeWordRanges","BracketSelectionRangeProvider","provideSelectionRanges","computeWordRanges","_WordDistance","wordLines","isFalsyOrEmpty","compareRangesUsingStarts","bestWordRange","blockDistance","_WordDistance2","_class2","foreground","ToggleTabFocusModeAction","f1","TabFocus","getTabFocusMode","setTabFocusMode","ForceRetokenizeAction","resetTokenization","forceTokenization","getLineCount","console","log","BannerController","banner","Banner","setBanner","onClose","_Disposable2","markdownRenderer","ariaLabel","message","messageContainer","getBannerMessage","messageActionsContainer","Link","actionBarContainer","actionBar","Action","asClassName","widgetClose","setFocusable","warningIcon","warning","UnicodeHighlighter","_workspaceTrustService","_highlighter","_bannerClosed","_updateState","hasMore","ambiguousCharacterCount","nonBasicAsciiCharacterCount","invisibleCharacterCount","DisableHighlightingOfNonBasicAsciiCharactersAction","DisableHighlightingOfAmbiguousCharactersAction","DisableHighlightingOfInvisibleCharactersAction","_bannerController","shortLabel","href","_updateHighlighter","onDidChangeTrust","trusted","nonBasicASCII","inUntrustedWorkspace","ambiguousCharacters","invisibleCharacters","includeComments","includeStrings","allowedCharacters","allowedLocales","resolveOptions","isWorkspaceTrusted","every","option","highlightOptions","allowedCodePoints","keys","codePointAt","locale","Intl","NumberFormat","resolvedOptions","canComputeUnicodeHighlights","DocumentUnicodeHighlighter","ViewportUnicodeHighlighter","decoration","getDecorationInfo","IWorkspaceTrustManagementService","_decorations","createDecorationsCollection","mightContainNonBasicASCII","computedUnicodeHighlights","decorations","Decorations","instance","getDecorationFromOptions","isModelDecorationVisible","computeReason","inComment","isModelDecorationInComment","inString","isModelDecorationInString","_Disposable3","totalResult","UnicodeTextModelHighlighter","computeUnicodeHighlights","UnicodeHighlighterHoverParticipant","_openerService","hoverOrdinal","lineDecorations","unicodeHighlighter","highlightInfo","codePoint","codePointStr","formatCodePointMarkdown","confusableWith","adjustSettingsArgs","adjustSettings","ShowExcludeOptions","encodeURIComponent","markdown","appendMarkdown","appendText","appendLink","MarkdownHover","hoverParts","renderMarkdownHovers","codePointToHex","padStart","InvisibleCharacters","isInvisibleCharacter","String","fromCodePoint","renderCodePointAsInlineCode","char","computeUnicodeHighlightReason","IOpenerService","getDecoration","hideInComments","hideInStrings","ModelDecorationOptions","createDynamic","showIfCollapsed","overviewRuler","hideInCommentTokens","hideInStringTokens","DisableHighlightingInCommentsAction","runAction","unicodeHighlightConfigKeys","DisableHighlightingInStringsAction","_callee6","_super7","_callee7","_context7","_callee8","_context8","_super8","_callee9","_context9","_callee10","_context10","_EditorAction6","_super9","_callee17","quickPickService","getExcludeCharFromBeingHighlightedLabel","_action2","_action3","_action4","_this10","_context18","IQuickInputService","notAmbiguousInLocales","_context12","run","_callee11","_context11","excludeLocaleFromBeingHighlighted","excludeCharFromBeingHighlighted","_callee12","_context13","_callee13","_context14","_callee14","_context15","_callee15","_context16","_callee16","_context17","expectNever","pick","charCodes","_callee18","existingValue","_iterator7","_step7","charCode","_context19","locales","_callee19","_iterator8","_step8","_context20","inspect","user","HoverParticipantRegistry","ignoreUnusualLineTerminators","writeIgnoreState","codeEditorService","setModelProperty","readIgnoreState","getModelProperty","UnusualLineTerminatorsDetector","_dialogService","_codeEditorService","_isPresentingDialog","_config","_checkForUnusualLineTerminators","isUndoing","mightContainUnusualLineTerminators","removeUnusualLineTerminators","confirm","primaryButton","cancelButton","confirmed","IDialogService"],"sourceRoot":""}