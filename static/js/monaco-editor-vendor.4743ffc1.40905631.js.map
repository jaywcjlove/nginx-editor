{"version":3,"file":"static/js/monaco-editor-vendor.4743ffc1.40905631.js","mappings":"iKAKO,IAAMA,EAAmC,0B,yICG1CC,EAAW,OACXC,EAAa,SACbC,EAAe,WACfC,EAA4B,wBAC5BC,EAAe,WAIRC,EAAW,SAAAC,IAAAC,EAAAA,EAAAA,GAAAF,EAAAC,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAJ,GACpB,SAAAA,EAAYK,EAAWC,GAAS,IAAAC,EAKI,OALJC,EAAAA,EAAAA,GAAA,KAAAR,IAC5BO,EAAAJ,EAAAM,KAAA,OACKC,UAAY,EACjBH,EAAKI,qBAAuBJ,EAAKK,UAAU,IAAIC,EAAAA,IAAiB,kBAAMC,EAAAA,EAAAA,MAAKP,EAAKQ,QAAQ,GAAE,IAC1FR,EAAKS,qBAAuBT,EAAKK,UAAU,IAAIC,EAAAA,IAAiB,kBAAMN,EAAKU,qBAAqB,GAAEjB,EAAYkB,kCAC9GX,EAAKY,OAAOd,EAAWC,GAASC,CACpC,CAkEC,OAlEAa,EAAAA,EAAAA,GAAApB,EAAA,EAAAqB,IAAA,SAAAC,MACD,SAAOjB,EAAWC,GACdiB,KAAKR,QAAUS,SAASC,cAAc,OACtCF,KAAKR,QAAQW,UAAUC,IAAI,6BAC3BJ,KAAKR,QAAQa,aAAa,OAAQ,eAClCL,KAAKR,QAAQa,aAAa,gBAAiB,KAC3CvB,EAAUwB,YAAYN,KAAKR,SAC3BQ,KAAKO,IAAMN,SAASC,cAAc,OAClCF,KAAKO,IAAIJ,UAAUC,IAAI,gBACvBJ,KAAKO,IAAIC,MAAMC,iBAA+B,OAAZ1B,QAAgC,IAAZA,OAAqB,EAASA,EAAQ2B,wBAA0B,UACtHV,KAAKR,QAAQc,YAAYN,KAAKO,IAClC,GAAC,CAAAT,IAAA,MAAAC,MACD,WACIC,KAAKO,IAAIC,MAAMG,MAAQ,UACvBX,KAAKO,IAAIC,MAAMI,QAAU,IACzBZ,KAAKR,QAAQW,UAAUU,OAAOxC,EAAYC,EAAcC,EAA2BC,GACnFwB,KAAKb,UAAY,EACjBa,KAAKc,eAAYC,EACjBf,KAAKP,qBAAqBuB,QAC9B,GACA,CAAAlB,IAAA,OAAAC,MAGA,WACI,OAAOC,KAAKiB,QAAO,EACvB,GAAC,CAAAnB,IAAA,SAAAC,MACD,SAAOmB,GAAS,IAAAC,EAAA,KAsBZ,OArBAnB,KAAKR,QAAQW,UAAUC,IAAIhC,GAEtB4B,KAAKR,QAAQW,UAAUiB,SAAS9C,IAWjC0B,KAAKO,IAAIC,MAAMI,QAAU,IACrBM,EACAG,YAAW,kBAAMF,EAAKG,KAAK,GAAE,KAG7BtB,KAAKsB,QAfTtB,KAAKO,IAAIC,MAAMG,MAAQ,UACnBO,EACAG,YAAW,kBAAMF,EAAKG,KAAK,GAAE,KAG7BtB,KAAKsB,OAaNtB,IACX,GACA,CAAAF,IAAA,WAAAC,MAGA,WAMI,OALAC,KAAKO,IAAIC,MAAMG,MAAQ,KACvBX,KAAKO,IAAIC,MAAMI,QAAU,IACzBZ,KAAKR,QAAQW,UAAUU,OAAOrC,EAAcJ,EAAUG,GACtDyB,KAAKR,QAAQW,UAAUC,IAAI/B,EAAYC,GACvC0B,KAAKP,qBAAqB8B,WACnBvB,IACX,GAAC,CAAAF,IAAA,sBAAAC,MACD,WACIC,KAAKR,QAAQW,UAAUC,IAAI7B,EAC/B,GAAC,CAAAuB,IAAA,eAAAC,MACD,WACI,OAAOC,KAAKR,OAChB,KAACf,CAAA,CAzEmB,CAAS+C,EAAAA,IAmFjC/C,EAAYkB,gCAAkC,G,8HC3FjC8B,EAAoB,WAC7B,SAAAA,IAAc,IAkBNC,EAlBM1C,EAAA,MAAAC,EAAAA,EAAAA,GAAA,KAAAwC,GACVzB,KAAK2B,iBAAmB,IAAIC,EAAAA,GAC5B5B,KAAK6B,gBAAkB7B,KAAK2B,iBAAiBG,MAC7C9B,KAAK+B,aAAe,IAAIH,EAAAA,GACxB5B,KAAKgC,YAAchC,KAAK+B,aAAaD,MACrC9B,KAAKiC,cAAgB,IAAIC,EAAAA,GACzBlC,KAAKmC,MAAQ,IAAIC,EAAAA,UAAU,EAAG,GAC9BpC,KAAKqC,SAAW,IAAID,EAAAA,UAAU,EAAG,GACjCpC,KAAKsC,SAAW,IAAIF,EAAAA,UAAUG,OAAOC,iBAAkBD,OAAOC,kBAC9DxC,KAAKyC,QAAUxC,SAASC,cAAc,OACtCF,KAAK0C,UAAY,IAAIC,EAAAA,EAAK3C,KAAKyC,QAAS,CAAEG,oBAAqB,kBAAM5D,EAAKmD,MAAMxB,KAAK,GAAI,CAAEkC,YAAa,IACxG7C,KAAK8C,UAAY,IAAIH,EAAAA,EAAK3C,KAAKyC,QAAS,CAAEG,oBAAqB,kBAAM,CAAC,GAAI,CAAEC,YAAa,IACzF7C,KAAK+C,WAAa,IAAIJ,EAAAA,EAAK3C,KAAKyC,QAAS,CAAEO,qBAAsB,kBAAM,CAAC,GAAI,CAAEH,YAAa,EAAgCI,eAAgBC,EAAAA,EAAeC,QAC1JnD,KAAKoD,WAAa,IAAIT,EAAAA,EAAK3C,KAAKyC,QAAS,CAAEO,qBAAsB,kBAAMhE,EAAKmD,MAAMkB,MAAM,GAAI,CAAER,YAAa,EAAgCI,eAAgBC,EAAAA,EAAeI,QAC1KtD,KAAK+C,WAAWQ,oBAAsBvD,KAAK8C,UAC3C9C,KAAK+C,WAAWS,kBAAoBxD,KAAK0C,UACzC1C,KAAKoD,WAAWG,oBAAsBvD,KAAK8C,UAC3C9C,KAAKoD,WAAWI,kBAAoBxD,KAAK0C,UAEzC,IAAIe,EAAS,EACTC,EAAS,EACb1D,KAAKiC,cAAc7B,IAAIuD,EAAAA,GAAMC,IAAI5D,KAAK+C,WAAWc,WAAY7D,KAAK0C,UAAUmB,WAAY7D,KAAKoD,WAAWS,WAAY7D,KAAK8C,UAAUe,WAA5GF,EAAwH,gBACvH5C,IAAhBW,IACA1C,EAAK2C,iBAAiBmC,OACtBpC,EAAc1C,EAAKmD,MACnBsB,EAAS,EACTC,EAAS,EAEjB,KACA1D,KAAKiC,cAAc7B,IAAIuD,EAAAA,GAAMC,IAAI5D,KAAK+C,WAAWgB,SAAU/D,KAAK0C,UAAUqB,SAAU/D,KAAKoD,WAAWW,SAAU/D,KAAK8C,UAAUiB,SAAtGJ,EAAgH,gBAC/G5C,IAAhBW,IACAA,OAAcX,EACd0C,EAAS,EACTC,EAAS,EACT1E,EAAK+C,aAAa+B,KAAK,CAAEE,UAAWhF,EAAKmD,MAAO8B,MAAM,IAE9D,KACAjE,KAAKiC,cAAc7B,IAAIJ,KAAK0C,UAAUwB,aAAY,SAAAC,GAC1CzC,IACAgC,EAASS,EAAEC,SAAWD,EAAEE,OACxBrF,EAAKsF,OAAO5C,EAAY2B,OAASI,EAAQ/B,EAAYf,MAAQ+C,GAC7D1E,EAAK+C,aAAa+B,KAAK,CAAEE,UAAWhF,EAAKmD,MAAO8B,MAAM,EAAOM,MAAM,IAE3E,KACAvE,KAAKiC,cAAc7B,IAAIJ,KAAK8C,UAAUoB,aAAY,SAAAC,GAC1CzC,IACAgC,IAAWS,EAAEC,SAAWD,EAAEE,QAC1BrF,EAAKsF,OAAO5C,EAAY2B,OAASI,EAAQ/B,EAAYf,MAAQ+C,GAC7D1E,EAAK+C,aAAa+B,KAAK,CAAEE,UAAWhF,EAAKmD,MAAO8B,MAAM,EAAOO,MAAM,IAE3E,KACAxE,KAAKiC,cAAc7B,IAAIJ,KAAK+C,WAAWmB,aAAY,SAAAC,GAC3CzC,IACA+B,IAAWU,EAAEM,SAAWN,EAAEO,QAC1B1F,EAAKsF,OAAO5C,EAAY2B,OAASI,EAAQ/B,EAAYf,MAAQ+C,GAC7D1E,EAAK+C,aAAa+B,KAAK,CAAEE,UAAWhF,EAAKmD,MAAO8B,MAAM,EAAOU,OAAO,IAE5E,KACA3E,KAAKiC,cAAc7B,IAAIJ,KAAKoD,WAAWc,aAAY,SAAAC,GAC3CzC,IACA+B,EAASU,EAAEM,SAAWN,EAAEO,OACxB1F,EAAKsF,OAAO5C,EAAY2B,OAASI,EAAQ/B,EAAYf,MAAQ+C,GAC7D1E,EAAK+C,aAAa+B,KAAK,CAAEE,UAAWhF,EAAKmD,MAAO8B,MAAM,EAAOW,OAAO,IAE5E,KACA5E,KAAKiC,cAAc7B,IAAIuD,EAAAA,GAAMC,IAAI5D,KAAK0C,UAAUmC,WAAY7E,KAAK8C,UAAU+B,WAApDlB,EAAgE,SAAAQ,GAC/EnF,EAAK8F,iBACL9F,EAAKsF,OAAOtF,EAAKmD,MAAMkB,OAAQrE,EAAK8F,eAAenE,OACnD3B,EAAK+C,aAAa+B,KAAK,CAAEE,UAAWhF,EAAKmD,MAAO8B,MAAM,IAE9D,KACAjE,KAAKiC,cAAc7B,IAAIuD,EAAAA,GAAMC,IAAI5D,KAAK+C,WAAW8B,WAAY7E,KAAKoD,WAAWyB,WAAtDlB,EAAkE,SAAAQ,GACjFnF,EAAK8F,iBACL9F,EAAKsF,OAAOtF,EAAK8F,eAAezB,OAAQrE,EAAKmD,MAAMxB,OACnD3B,EAAK+C,aAAa+B,KAAK,CAAEE,UAAWhF,EAAKmD,MAAO8B,MAAM,IAE9D,IACJ,CAwDC,OAxDApE,EAAAA,EAAAA,GAAA4B,EAAA,EAAA3B,IAAA,UAAAC,MACD,WACIC,KAAK+C,WAAWgC,UAChB/E,KAAKoD,WAAW2B,UAChB/E,KAAK0C,UAAUqC,UACf/E,KAAK8C,UAAUiC,UACf/E,KAAKiC,cAAc8C,UACnB/E,KAAK+B,aAAagD,UAClB/E,KAAK2B,iBAAiBoD,UACtB/E,KAAKyC,QAAQ5B,QACjB,GAAC,CAAAf,IAAA,eAAAC,MACD,SAAa4E,EAAOJ,EAAMK,EAAOJ,GAC7BxE,KAAK+C,WAAWiC,MAAQL,EAAQ,EAA4B,EAC5D3E,KAAK0C,UAAUsC,MAAQT,EAAO,EAA4B,EAC1DvE,KAAKoD,WAAW4B,MAAQJ,EAAQ,EAA4B,EAC5D5E,KAAK8C,UAAUkC,MAAQR,EAAO,EAA4B,CAC9D,GAAC,CAAA1E,IAAA,SAAAC,MACD,WAA2D,IAApDsD,EAAM4B,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGjF,KAAKmF,KAAK9B,OAAQ1C,EAAKsE,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGjF,KAAKmF,KAAKxE,MAChDyE,EAA+CpF,KAAKqC,SAApCgD,EAASD,EAAjB/B,OAA0BiC,EAAQF,EAAfzE,MAC3B4E,EAA+CvF,KAAKsC,SAApCkD,EAASD,EAAjBlC,OAA0BoC,EAAQF,EAAf5E,MAC3B0C,EAASqC,KAAKC,IAAIN,EAAWK,KAAKE,IAAIJ,EAAWnC,IACjD1C,EAAQ+E,KAAKC,IAAIL,EAAUI,KAAKE,IAAIH,EAAU9E,IAC9C,IAAMkF,EAAU,IAAIzD,EAAAA,UAAUzB,EAAO0C,GAChCjB,EAAAA,UAAU0D,OAAOD,EAAS7F,KAAKmC,SAChCnC,KAAKyC,QAAQjC,MAAM6C,OAASA,EAAS,KACrCrD,KAAKyC,QAAQjC,MAAMG,MAAQA,EAAQ,KACnCX,KAAKmC,MAAQ0D,EACb7F,KAAK+C,WAAWuB,SAChBtE,KAAK0C,UAAU4B,SACftE,KAAKoD,WAAWkB,SAChBtE,KAAK8C,UAAUwB,SAEvB,GAAC,CAAAxE,IAAA,sBAAAC,MACD,WACIC,KAAK0C,UAAUqD,sBACf/F,KAAK8C,UAAUiD,sBACf/F,KAAK+C,WAAWgD,sBAChB/F,KAAKoD,WAAW2C,qBACpB,GAAC,CAAAjG,IAAA,OAAAkG,IACD,WACI,OAAOhG,KAAKmC,KAChB,GAAC,CAAArC,IAAA,UAAAkG,IAID,WACI,OAAOhG,KAAKsC,QAChB,EAAC2D,IALD,SAAYlG,GACRC,KAAKsC,SAAWvC,CACpB,GAAC,CAAAD,IAAA,UAAAkG,IAOD,WACI,OAAOhG,KAAKqC,QAChB,EAAC4D,IALD,SAAYlG,GACRC,KAAKqC,SAAWtC,CACpB,GAAC,CAAAD,IAAA,gBAAAkG,IAOD,WACI,OAAOhG,KAAK8E,cAChB,EAACmB,IALD,SAAkBlG,GACdC,KAAK8E,eAAiB/E,CAC1B,KAAC0B,CAAA,CAtI4B,E,mFCgBtByB,E,gLApBPgD,EAA0C,SAAUC,EAAYC,EAAQtG,EAAKuG,GAC7E,IAA2HC,EAAvHC,EAAItB,UAAUC,OAAQsB,EAAID,EAAI,EAAIH,EAAkB,OAATC,EAAgBA,EAAOI,OAAOC,yBAAyBN,EAAQtG,GAAOuG,EACrH,GAAuB,kBAAZM,SAAoD,oBAArBA,QAAQC,SAAyBJ,EAAIG,QAAQC,SAAST,EAAYC,EAAQtG,EAAKuG,QACpH,IAAK,IAAIQ,EAAIV,EAAWjB,OAAS,EAAG2B,GAAK,EAAGA,KAASP,EAAIH,EAAWU,MAAIL,GAAKD,EAAI,EAAID,EAAEE,GAAKD,EAAI,EAAID,EAAEF,EAAQtG,EAAK0G,GAAKF,EAAEF,EAAQtG,KAAS0G,GAChJ,OAAOD,EAAI,GAAKC,GAAKC,OAAOK,eAAeV,EAAQtG,EAAK0G,GAAIA,CAChE,GAgBA,SAAWtD,GACPA,EAAsB,MAAI,QAC1BA,EAAsB,MAAI,QAC1BA,EAAqB,KAAI,OACzBA,EAAqB,KAAI,MAC5B,CALD,CAKGA,IAAmBA,EAAiB,CAAC,IACxC,IACM6D,EAAwB,IAAInF,EAAAA,GAE5BoF,EAAwB,IAAIpF,EAAAA,GAC5BqF,EAAiB,WACnB,SAAAA,KAAchI,EAAAA,EAAAA,GAAA,KAAAgI,GACVjH,KAAKkH,YAAc,IAAIhF,EAAAA,EAC3B,CASC,OATArC,EAAAA,EAAAA,GAAAoH,EAAA,EAAAnH,IAAA,gBAAAkG,IACD,WACI,OAAOhG,KAAKkH,YAAY9G,IAAI,IAAI+G,EAAAA,EAAWC,OAAQ,cAActF,KACrE,GAAC,CAAAhC,IAAA,cAAAkG,IACD,WACI,OAAOhG,KAAKkH,YAAY9G,IAAI,IAAI+G,EAAAA,EAAWC,OAAQ,YAAYtF,KACnE,GAAC,CAAAhC,IAAA,UAAAC,MACD,WACIC,KAAKkH,YAAYnC,SACrB,KAACkC,CAAA,CAZkB,GAcvBf,EAAW,CACPmB,EAAAA,GACDJ,EAAkBK,UAAW,gBAAiB,MACjDpB,EAAW,CACPmB,EAAAA,GACDJ,EAAkBK,UAAW,cAAe,MAAM,IAC/CC,EAAmB,WAOrB,SAAAA,EAAYC,IAAIvI,EAAAA,EAAAA,GAAA,KAAAsI,GACZvH,KAAKwH,GAAKA,EACVxH,KAAKkH,YAAc,IAAIhF,EAAAA,EAC3B,CAGC,OAHArC,EAAAA,EAAAA,GAAA0H,EAAA,EAAAzH,IAAA,gBAAAkG,IATD,WACI,OAAOhG,KAAKkH,YAAY9G,IAAI,IAAI+G,EAAAA,EAAWnH,KAAKwH,GAAIC,EAAAA,EAAUC,SAAS5F,KAC3E,GAAC,CAAAhC,IAAA,cAAAkG,IACD,WACI,OAAOhG,KAAKkH,YAAY9G,IAAI,IAAI+G,EAAAA,EAAWnH,KAAKwH,GAAIC,EAAAA,EAAUE,MAAM7F,KACxE,GAAC,CAAAhC,IAAA,UAAAC,MAKD,WACIC,KAAKkH,YAAYnC,SACrB,KAACwC,CAAA,CAboB,GAezBrB,EAAW,CACPmB,EAAAA,GACDE,EAAoBD,UAAW,gBAAiB,MACnDpB,EAAW,CACPmB,EAAAA,GACDE,EAAoBD,UAAW,cAAe,MAAM,IACjDM,EAA6B,WAO/B,SAAAA,EAAYC,IAAS5I,EAAAA,EAAAA,GAAA,KAAA2I,GACjB5H,KAAK6H,QAAUA,CACnB,CAGC,OAHAhI,EAAAA,EAAAA,GAAA+H,EAAA,EAAA9H,IAAA,gBAAAkG,IARD,WACI,OAAOhG,KAAK6H,QAAQC,aACxB,GAAC,CAAAhI,IAAA,cAAAkG,IACD,WACI,OAAOhG,KAAK6H,QAAQE,WACxB,GAAC,CAAAjI,IAAA,UAAAC,MAID,WACI,KACH6H,CAAA,CAZ8B,GAcnC1B,EAAW,CACPmB,EAAAA,GACDO,EAA8BN,UAAW,gBAAiB,MAC7DpB,EAAW,CACPmB,EAAAA,GACDO,EAA8BN,UAAW,cAAe,MAC3D,IAAMU,EAAgC,0BAczBrF,EAAI,SAAAjE,IAAAC,EAAAA,EAAAA,GAAAgE,EAAAjE,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAA8D,GA4Eb,SAAAA,EAAY7D,EAAWmJ,EAAgBlJ,GAAS,IAAAC,GAAAC,EAAAA,EAAAA,GAAA,KAAA0D,IAC5C3D,EAAAJ,EAAAM,KAAA,OACKgJ,WA3JU,IA4JflJ,EAAKmJ,aAAenJ,EAAKK,UAAU,IAAI+I,EAAAA,GAAQpJ,EAAKkJ,aACpDlJ,EAAKqJ,OAAS,EACdrJ,EAAKsJ,sBAAwBtJ,EAAKK,UAAU,IAAIuC,EAAAA,IAChD5C,EAAKuJ,YAAcvJ,EAAKK,UAAU,IAAIuC,EAAAA,IACtC5C,EAAKwJ,aAAexJ,EAAKK,UAAU,IAAIuC,EAAAA,IACvC5C,EAAKyJ,YAAczJ,EAAKK,UAAU,IAAIuC,EAAAA,IACtC5C,EAAK0J,UAAY1J,EAAKK,UAAU,IAAIuC,EAAAA,IACpC5C,EAAK2J,+BAAiC3J,EAAKK,UAAU,IAAI6C,EAAAA,IACzDlD,EAAK4J,qCAAuC5J,EAAKK,UAAU,IAAI6C,EAAAA,IAC/DlD,EAAK6J,6BAA+B7J,EAAKK,UAAU,IAAI6C,EAAAA,IACvDlD,EAAK8J,mCAAqC9J,EAAKK,UAAU,IAAI6C,EAAAA,IAI7DlD,EAAK6E,WAAa7E,EAAKuJ,YAAYzG,MAKnC9C,EAAKkF,YAAclF,EAAKwJ,aAAa1G,MAIrC9C,EAAK6F,WAAa7F,EAAKyJ,YAAY3G,MAInC9C,EAAK+E,SAAW/E,EAAK0J,UAAU5G,MAO/B9C,EAAK+J,gBAAahI,EAClB/B,EAAKwI,IAAKwB,EAAAA,EAAAA,QAAOlK,GAAWmK,EAAAA,EAAAA,GAAE,iBAC1BlK,EAAQkE,gBACRjE,EAAKwI,GAAGrH,UAAUC,IAAI,mBAAD8I,OAAoBnK,EAAQkE,iBAEjDkG,EAAAA,IACAnK,EAAKwI,GAAGrH,UAAUC,IAAI,OAE1B,IAAMgJ,EAAcpK,EAAKK,UAAU,IAAI8H,EAAAA,EAAWnI,EAAKwI,GAAI,cAAc1F,MACzE9C,EAAKK,UAAU+J,GAAY,SAAAjF,GAAC,OAAInF,EAAKqK,eAAelF,EAAG,IAAI8C,EAAoB,IAAAqC,EAAAA,EAAAA,GAAAtK,KAC/E,IAAMuK,EAAqBvK,EAAKK,UAAU,IAAI8H,EAAAA,EAAWnI,EAAKwI,GAAI,aAAa1F,MAC/E9C,EAAKK,UAAUkK,EAAmBvK,EAAKwK,sBAAoBF,EAAAA,EAAAA,GAAAtK,KAC3D,IAAMyK,EAAezK,EAAKK,UAAU,IAAI8H,EAAAA,EAAWnI,EAAKwI,GAAI,eAAe1F,MAC3E9C,EAAKK,UAAUoK,GAAa,kBAAM9G,EAAK8G,cAAYH,EAAAA,EAAAA,GAAAtK,GAAM,KACzD,IAAM0K,EAAe1K,EAAKK,UAAU,IAAI8H,EAAAA,EAAWnI,EAAKwI,GAAI,eAAe1F,MAC3E9C,EAAKK,UAAUqK,GAAa,kBAAM/G,EAAK+G,cAAYJ,EAAAA,EAAAA,GAAAtK,GAAM,KACzDA,EAAKK,UAAUsK,EAAAA,EAAQC,UAAU5K,EAAKwI,KACtC,IAAMqC,EAAe7K,EAAKK,UAAU,IAAI8H,EAAAA,EAAWnI,EAAKwI,GAAIC,EAAAA,EAAUqC,QAAQhI,MAC9E9C,EAAKK,UAAUwK,GAAa,SAAA1F,GAAC,OAAInF,EAAKqK,eAAelF,EAAG,IAAIoD,EAAoBvI,EAAKwI,IAAI,IAAA8B,EAAAA,EAAAA,GAAAtK,KACzF,IAAM+K,EAAQ/K,EAAKK,UAAU,IAAI8H,EAAAA,EAAWnI,EAAKwI,GAAIC,EAAAA,EAAUuC,MAAMlI,MACjEmI,OAAmBlJ,EAyCT,OAxCd/B,EAAKK,UAAU0K,GAAM,SAAAjI,GACjB,GAAImI,EAIA,OAHAC,aAAaD,GACbA,OAAmBlJ,OACnB/B,EAAKwK,qBAAqB1H,GAG9BoI,aAAaD,GACbA,EAAmB5I,YAAW,kBAAM4I,OAAmBlJ,CAAS,GAAE,IACtE,IAACuI,EAAAA,EAAAA,GAAAtK,KAC2B,kBAAjBD,EAAQoG,MACfnG,EAAKmG,KAAOpG,EAAQoG,KACQ,IAAxBpG,EAAQ8D,YACR7D,EAAKwI,GAAGhH,MAAMG,MAAQ,GAAHuI,OAAMlK,EAAKmG,KAAI,MAGlCnG,EAAKwI,GAAGhH,MAAM6C,OAAS,GAAH6F,OAAMlK,EAAKmG,KAAI,QAIvCnG,EAAKmG,KAzOA,EA0OLnG,EAAKK,UAAU0H,EAAsBjF,OAAM,SAAAqD,GACvCnG,EAAKmG,KAAOA,EACZnG,EAAKsF,QACT,MAEJtF,EAAKK,UAAU2H,EAAsBlF,OAAM,SAAAqI,GAAK,OAAInL,EAAKkJ,WAAaiC,CAAK,KAC3EnL,EAAKiJ,eAAiBA,EACtBjJ,EAAKuE,oBAAsBxE,EAAQwE,oBACnCvE,EAAKwE,kBAAoBzE,EAAQyE,kBACjCxE,EAAK6D,YAAc9D,EAAQ8D,aAAe,EACjB,IAArB7D,EAAK6D,aACL7D,EAAKwI,GAAGrH,UAAUC,IAAI,cACtBpB,EAAKwI,GAAGrH,UAAUU,OAAO,cAGzB7B,EAAKwI,GAAGrH,UAAUU,OAAO,cACzB7B,EAAKwI,GAAGrH,UAAUC,IAAI,aAE1BpB,EAAKwI,GAAGrH,UAAUiK,OAAO,QApQnB,OAqQNpL,EAAKsF,SAAStF,CAClB,CAgHC,OAhHAa,EAAAA,EAAAA,GAAA8C,EAAA,EAAA7C,IAAA,QAAAkG,IA9KD,WAAc,OAAOhG,KAAKqI,MAAQ,EAACpC,IAOnC,SAAUjB,GACFhF,KAAKqI,SAAWrD,IAGpBhF,KAAKwH,GAAGrH,UAAUiK,OAAO,WAAsB,IAAVpF,GACrChF,KAAKwH,GAAGrH,UAAUiK,OAAO,UAAqB,IAAVpF,GACpChF,KAAKwH,GAAGrH,UAAUiK,OAAO,UAAqB,IAAVpF,GACpChF,KAAKqI,OAASrD,EACdhF,KAAKsI,sBAAsBxE,KAAKkB,GACpC,GACA,CAAAlF,IAAA,sBAAAkG,IAhBA,WAA4B,OAAOhG,KAAKqK,oBAAsB,EAACpE,IAwB/D,SAAwBqE,GAAM,IAAAnJ,EAAA,KAC1B,GAAInB,KAAKqK,uBAAyBC,EAAlC,CAKA,GAFAtK,KAAK4I,qCAAqC2B,QAC1CvK,KAAK2I,+BAA+B4B,QAChCD,EAAM,CACN,IAAME,EAAW,SAACxF,GACd7D,EAAKyH,qCAAqC2B,QAC5B,IAAVvF,IACA7D,EAAKsJ,4BAA6BzB,EAAAA,EAAAA,QAAO7H,EAAKqG,IAAIyB,EAAAA,EAAAA,GAAE,kCACpD9H,EAAKyH,qCAAqCxI,KAAIsK,EAAAA,EAAAA,KAAa,kBAAMvJ,EAAKsJ,2BAA2B5J,QAAQ,KACzGM,EAAKyH,qCAAqCxI,IAAI,IAAI+G,EAAAA,EAAWhG,EAAKsJ,2BAA4B,eAAe3I,OAAM,kBAAMa,EAAK8G,aAAaa,EAAK,QAAEvJ,EAAWI,EAAKyH,sCAClKzH,EAAKyH,qCAAqCxI,IAAI,IAAI+G,EAAAA,EAAWhG,EAAKsJ,2BAA4B,eAAe3I,OAAM,kBAAMa,EAAK+G,aAAaY,EAAK,QAAEvJ,EAAWI,EAAKyH,sCAE1K,EACA5I,KAAK2I,+BAA+BvI,IAAIkK,EAAKhC,sBAAsBxG,MAAM0I,EAAUxK,OACnFwK,EAASF,EAAKtF,MAClB,CACAhF,KAAKqK,qBAAuBC,CAhB5B,CAiBJ,GACA,CAAAxK,IAAA,oBAAAkG,IA5CA,WAA0B,OAAOhG,KAAK2K,kBAAoB,EAAC1E,IAoD3D,SAAsBqE,GAAM,IAAAM,EAAA,KACxB,GAAI5K,KAAK2K,qBAAuBL,EAAhC,CAKA,GAFAtK,KAAK8I,mCAAmCyB,QACxCvK,KAAK6I,6BAA6B0B,QAC9BD,EAAM,CACN,IAAME,EAAW,SAACxF,GACd4F,EAAK9B,mCAAmCyB,QAC1B,IAAVvF,IACA4F,EAAKC,0BAA2B7B,EAAAA,EAAAA,QAAO4B,EAAKpD,IAAIyB,EAAAA,EAAAA,GAAE,gCAClD2B,EAAK9B,mCAAmC1I,KAAIsK,EAAAA,EAAAA,KAAa,kBAAME,EAAKC,yBAAyBhK,QAAQ,KACrG+J,EAAK9B,mCAAmC1I,IAAI,IAAI+G,EAAAA,EAAWyD,EAAKC,yBAA0B,eAAe/I,OAAM,kBAAMa,EAAK8G,aAAaa,EAAK,QAAEvJ,EAAW6J,EAAK9B,oCAC9J8B,EAAK9B,mCAAmC1I,IAAI,IAAI+G,EAAAA,EAAWyD,EAAKC,yBAA0B,eAAe/I,OAAM,kBAAMa,EAAK+G,aAAaY,EAAK,QAAEvJ,EAAW6J,EAAK9B,oCAEtK,EACA9I,KAAK6I,6BAA6BzI,IAAIkK,EAAKhC,sBAAsBxG,MAAM0I,EAAUxK,OACjFwK,EAASF,EAAKtF,MAClB,CACAhF,KAAK2K,mBAAqBL,CAhB1B,CAiBJ,GAAC,CAAAxK,IAAA,iBAAAC,MAqGD,SAAe+B,EAAOgJ,GAAqB,IAAAC,EAAA,KACvCC,EAAAA,YAAYC,KAAKnJ,GACjB,IAAIoJ,GAAoB,EACxB,IAAKpJ,EAAMqJ,sBAAuB,CAC9B,IAAMC,EAAiBpL,KAAKqL,kBAAkBvJ,GAC1CsJ,IACAF,GAAoB,EACpBpJ,EAAMqJ,uBAAwB,EAC9BC,EAAe/B,eAAevH,EAAO,IAAI8F,EAA8BkD,IAE/E,CAKA,GAJI9K,KAAK+I,aAAejH,EAAMwJ,oBAC1BxJ,EAAMwJ,mBAAoB,EAC1BtL,KAAK+I,WAAWM,eAAevH,EAAO,IAAI8F,EAA8BkD,KAEvE9K,KAAKgF,MAAV,CAGA,IAC4BuG,EADtBC,EAAUvL,SAASwL,qBAAqB,UAAUC,GAAAC,EAAAA,EAAAA,GACnCH,GAAO,IAA5B,IAAAE,EAAAE,MAAAL,EAAAG,EAAAG,KAAA5H,MAA8B,CAAbsH,EAAAxL,MACNI,UAAUC,IAAI4H,EACzB,CAAC,OAAA8D,GAAAJ,EAAAvH,EAAA2H,EAAA,SAAAJ,EAAAK,GAAA,CACD,IAAM1H,EAASvC,EAAMkK,MACftH,EAAS5C,EAAMmK,MACfC,EAASpK,EAAMoK,OACfC,EAAa,CAAE9H,OAAAA,EAAQD,SAAUC,EAAQK,OAAAA,EAAQD,SAAUC,EAAQwH,OAAAA,GACzElM,KAAKwH,GAAGrH,UAAUC,IAAI,UACtBJ,KAAKuI,YAAYzE,KAAKqI,GAEtB,IAAM3L,GAAQ4L,EAAAA,EAAAA,kBAAiBpM,KAAKwH,IAC9B6E,EAAc,WAChB,IAAIC,EAAS,GAETA,EADApB,EACS,aAEiB,IAArBH,EAAKlI,YACS,IAAfkI,EAAK/F,MACI,WAEW,IAAf+F,EAAK/F,MACD,WAGAmE,EAAAA,GAAc,aAAe,YAIvB,IAAf4B,EAAK/F,MACI,WAEW,IAAf+F,EAAK/F,MACD,WAGAmE,EAAAA,GAAc,aAAe,YAG9C3I,EAAM+L,YAAc,eAAHrD,OAAkBoD,EAAM,iBAC7C,EACMpF,EAAc,IAAIhF,EAAAA,GACxBmK,IACKnB,GACDlL,KAAKsI,sBAAsBxG,MAAMuK,EAAa,KAAMnF,GAiBxD4D,EAAoBhD,eAfE,SAAC3D,GACnB6G,EAAAA,YAAYC,KAAK9G,GAAG,GACpB,IAAMrC,EAAQ,CAAEuC,OAAAA,EAAQD,SAAUD,EAAE6H,MAAOtH,OAAAA,EAAQD,SAAUN,EAAE8H,MAAOC,OAAAA,GACtEnB,EAAKvC,aAAa1E,KAAKhC,EAC3B,GAWiD,KAAMoF,GACvD4D,EAAoB/C,aAXA,SAAC5D,GACjB6G,EAAAA,YAAYC,KAAK9G,GAAG,GACpB4G,EAAKvD,GAAGgF,YAAYhM,GACpBuK,EAAKvD,GAAGrH,UAAUU,OAAO,UACzBkK,EAAKrC,UAAU5E,OACfoD,EAAYnC,UAAU,IACM0H,EADNC,GAAAf,EAAAA,EAAAA,GACDH,GAAO,IAA5B,IAAAkB,EAAAd,MAAAa,EAAAC,EAAAb,KAAA5H,MAA8B,CAAbwI,EAAA1M,MACNI,UAAUU,OAAOmH,EAC5B,CAAC,OAAA8D,GAAAY,EAAAvI,EAAA2H,EAAA,SAAAY,EAAAX,GAAA,CACL,GAE6C,KAAM7E,GACnDA,EAAY9G,IAAI0K,EAhEhB,CAiEJ,GAAC,CAAAhL,IAAA,uBAAAC,MACD,SAAqBoE,GACjB,IAAMiH,EAAiBpL,KAAKqL,kBAAkBlH,GAC1CiH,GACAA,EAAe3C,YAAY3E,OAE3B9D,KAAK+I,YACL/I,KAAK+I,WAAWN,YAAY3E,OAEhC9D,KAAKyI,YAAY3E,MACrB,GAAC,CAAAhE,IAAA,sBAAAC,MAyBD,WACI4C,EAAK+G,aAAa1J,KACtB,GACA,CAAAF,IAAA,SAAAC,MAIA,WACI,GAAyB,IAArBC,KAAK6C,YAA8C,CACnD,IAAM8J,EAAmB3M,KAAKiI,eAC9BjI,KAAKwH,GAAGhH,MAAMoM,KAAOD,EAAiB/J,oBAAoB5C,MAASA,KAAKmF,KAAO,EAAK,KAChFwH,EAAiBE,qBACjB7M,KAAKwH,GAAGhH,MAAMsM,IAAMH,EAAiBE,mBAAmB7M,MAAQ,MAEhE2M,EAAiBI,wBACjB/M,KAAKwH,GAAGhH,MAAM6C,OAASsJ,EAAiBI,sBAAsB/M,MAAQ,KAE9E,KACK,CACD,IAAMgN,EAAqBhN,KAAKiI,eAChCjI,KAAKwH,GAAGhH,MAAMsM,IAAME,EAAmBhK,qBAAqBhD,MAASA,KAAKmF,KAAO,EAAK,KAClF6H,EAAmBC,wBACnBjN,KAAKwH,GAAGhH,MAAMoM,KAAOI,EAAmBC,sBAAsBjN,MAAQ,MAEtEgN,EAAmBE,yBACnBlN,KAAKwH,GAAGhH,MAAMG,MAAQqM,EAAmBE,uBAAuBlN,MAAQ,KAEhF,CACJ,GAAC,CAAAF,IAAA,oBAAAC,MACD,SAAkBoE,GACd,IAAIgJ,EACE/G,EAAoC,QAA1B+G,EAAKhJ,EAAEiJ,qBAAkC,IAAPD,EAAgBA,EAAKhJ,EAAEiC,OACzE,GAAKA,GAAYA,aAAkBiH,YAGnC,OAAIjH,EAAOjG,UAAUiB,SAAS,0BACnBgF,EAAOjG,UAAUiB,SAAS,SAAWpB,KAAKuD,oBAAsBvD,KAAKwD,uBADhF,CAIJ,GAAC,CAAA1D,IAAA,UAAAC,MACD,YACIuN,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA5K,EAAA2E,WAAA,gBAAApI,KAAA,MACAc,KAAKwH,GAAG3G,QACZ,IAAC,EAAAf,IAAA,eAAAC,MAnED,SAAoBuK,GAA8B,IAAxBkD,EAAcvI,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,IAAAA,UAAA,GAChCqF,EAAK9C,GAAGrH,UAAUiB,SAAS,WAC3BkJ,EAAKnC,aAAanH,SAClBsJ,EAAK9C,GAAGrH,UAAUC,IAAI,UAGtBkK,EAAKnC,aAAasF,SAAQ,kBAAMnD,EAAK9C,GAAGrH,UAAUC,IAAI,QAAQ,GAAEkK,EAAKpC,YAAYwF,UAAK3M,GAAW,WAAQ,KAExGyM,GAAkBlD,EAAKvB,YACxBpG,EAAK8G,aAAaa,EAAKvB,YAAY,EAE3C,GAAC,CAAAjJ,IAAA,eAAAC,MACD,SAAoBuK,GAA8B,IAAxBkD,EAAcvI,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,IAAAA,UAAA,GACpCqF,EAAKnC,aAAanH,SAClBsJ,EAAK9C,GAAGrH,UAAUU,OAAO,UACpB2M,GAAkBlD,EAAKvB,YACxBpG,EAAK+G,aAAaY,EAAKvB,YAAY,EAE3C,KAACpG,CAAA,CA/RY,CAASnB,EAAAA,G,0SClGbmM,EAAiB,GACjBC,EAAc,SAAAC,IAAAlP,EAAAA,EAAAA,GAAAiP,EAAAC,GAAA,IAAAjP,GAAAC,EAAAA,EAAAA,GAAA+O,GACvB,SAAAA,EAAYE,GAAM,IAAAC,EAAA/O,EA0C4D,OA1C5DC,EAAAA,EAAAA,GAAA,KAAA2O,IACd5O,EAAAJ,EAAAM,KAAA,OACK8O,YAAcF,EAAKG,WACxBjP,EAAKkP,UAAYjO,SAASC,cAAc,OACxClB,EAAKkP,UAAUC,UAAY,mBAC3BnP,EAAKkP,UAAU1N,MAAM4N,SAAW,WAChCpP,EAAKkP,UAAU1N,MAAMG,MAAQmN,EAAKO,QAAU,KAC5CrP,EAAKkP,UAAU1N,MAAM6C,OAASyK,EAAKQ,SAAW,KACtB,qBAAbR,EAAKhB,MACZ9N,EAAKkP,UAAU1N,MAAMsM,IAAM,OAEN,qBAAdgB,EAAKlB,OACZ5N,EAAKkP,UAAU1N,MAAMoM,KAAO,OAEL,qBAAhBkB,EAAKS,SACZvP,EAAKkP,UAAU1N,MAAM+N,OAAS,OAER,qBAAfT,EAAKU,QACZxP,EAAKkP,UAAU1N,MAAMgO,MAAQ,OAEjCxP,EAAKyD,QAAUxC,SAASC,cAAc,OACtClB,EAAKyD,QAAQ0L,UAAYL,EAAKK,WAC9BJ,EAAA/O,EAAKyD,QAAQtC,WAAUC,IAAGqO,MAAAV,GAAAW,EAAAA,EAAAA,GAAIC,EAAAA,EAAUC,iBAAiBd,EAAKe,QAC9D7P,EAAKyD,QAAQjC,MAAM4N,SAAW,WAC9BpP,EAAKyD,QAAQjC,MAAMG,MAAQgN,OAC3B3O,EAAKyD,QAAQjC,MAAM6C,OAASsK,OACJ,qBAAbG,EAAKhB,MACZ9N,EAAKyD,QAAQjC,MAAMsM,IAAMgB,EAAKhB,IAAM,MAEf,qBAAdgB,EAAKlB,OACZ5N,EAAKyD,QAAQjC,MAAMoM,KAAOkB,EAAKlB,KAAO,MAEf,qBAAhBkB,EAAKS,SACZvP,EAAKyD,QAAQjC,MAAM+N,OAAST,EAAKS,OAAS,MAEpB,qBAAfT,EAAKU,QACZxP,EAAKyD,QAAQjC,MAAMgO,MAAQV,EAAKU,MAAQ,MAE5CxP,EAAK8P,oBAAsB9P,EAAKK,UAAU,IAAI0P,EAAAA,GAC9C/P,EAAKK,UAAU2P,EAAIC,8BAA8BjQ,EAAKkP,UAAWc,EAAIvH,UAAUyH,cAAc,SAAC/K,GAAC,OAAKnF,EAAKmQ,kBAAkBhL,EAAE,KAC7HnF,EAAKK,UAAU2P,EAAIC,8BAA8BjQ,EAAKyD,QAASuM,EAAIvH,UAAUyH,cAAc,SAAC/K,GAAC,OAAKnF,EAAKmQ,kBAAkBhL,EAAE,KAC3HnF,EAAKoQ,wBAA0BpQ,EAAKK,UAAU,IAAIgQ,EAAAA,IAClDrQ,EAAKsQ,gCAAkCtQ,EAAKK,UAAU,IAAIkQ,EAAAA,IAAgBvQ,CAC9E,CAgBC,OAhBAa,EAAAA,EAAAA,GAAA+N,EAAA,EAAA9N,IAAA,oBAAAC,MACD,SAAkBoE,GAAG,IAAAhD,EAAA,KACjB,GAAKgD,EAAEiC,QAAYjC,EAAEiC,kBAAkBoJ,QAAvC,CAMAxP,KAAKgO,cACLhO,KAAKoP,wBAAwBpO,SAC7BhB,KAAKsP,gCAAgCG,cALZ,WACrBtO,EAAKiO,wBAAwBK,cAAa,kBAAMtO,EAAK6M,aAAa,GAAE,IAAO,GAC/E,GAGoE,KACpEhO,KAAK8O,oBAAoBY,gBAAgBvL,EAAEiC,OAAQjC,EAAEwL,UAAWxL,EAAEyL,SAAS,SAACC,GAAsB,IAAG,WACjG1O,EAAKiO,wBAAwBpO,SAC7BG,EAAKmO,gCAAgCtO,QACzC,IACAmD,EAAE2L,gBAXF,CAYJ,KAAClC,CAAA,CA5DsB,CAASmC,EAAAA,G,WCPvBC,EAA6B,SAAAtR,IAAAC,EAAAA,EAAAA,GAAAqR,EAAAtR,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAmR,GACtC,SAAAA,EAAYC,EAAYC,EAAkBC,GAAoB,IAAAnR,EAUH,OAVGC,EAAAA,EAAAA,GAAA,KAAA+Q,IAC1DhR,EAAAJ,EAAAM,KAAA,OACKkR,YAAcH,EACnBjR,EAAKqR,kBAAoBH,EACzBlR,EAAKsR,oBAAsBH,EAC3BnR,EAAKuR,SAAW,KAChBvR,EAAKwR,YAAa,EAClBxR,EAAKyR,WAAY,EACjBzR,EAAK0R,qBAAsB,EAC3B1R,EAAK2R,kBAAmB,EACxB3R,EAAK4R,aAAe5R,EAAKK,UAAU,IAAIkQ,EAAAA,IAAgBvQ,CAC3D,CAwEC,OAxEAa,EAAAA,EAAAA,GAAAmQ,EAAA,EAAAlQ,IAAA,gBAAAC,MACD,SAAckQ,GACNjQ,KAAKoQ,cAAgBH,IACrBjQ,KAAKoQ,YAAcH,EACnBjQ,KAAK6Q,yBAEb,GACA,CAAA/Q,IAAA,qBAAAC,MACA,SAAmB+Q,GACf9Q,KAAK0Q,oBAAsBI,EAC3B9Q,KAAK6Q,wBACT,GAAC,CAAA/Q,IAAA,0BAAAC,MACD,WACI,OAAyB,IAArBC,KAAKoQ,cAGgB,IAArBpQ,KAAKoQ,aAGFpQ,KAAK0Q,oBAChB,GAAC,CAAA5Q,IAAA,yBAAAC,MACD,WACI,IAAMgR,EAAkB/Q,KAAKgR,0BACzBhR,KAAK2Q,mBAAqBI,IAC1B/Q,KAAK2Q,iBAAmBI,EACxB/Q,KAAKiR,mBAEb,GAAC,CAAAnR,IAAA,cAAAC,MACD,SAAYmR,GACJlR,KAAKyQ,YAAcS,IACnBlR,KAAKyQ,UAAYS,EACjBlR,KAAKiR,mBAEb,GAAC,CAAAnR,IAAA,aAAAC,MACD,SAAW0C,GACPzC,KAAKuQ,SAAW9N,EAChBzC,KAAKuQ,SAASY,aAAanR,KAAKsQ,qBAEhCtQ,KAAKoR,oBAAmB,EAC5B,GAAC,CAAAtR,IAAA,mBAAAC,MACD,WACSC,KAAKyQ,UAKNzQ,KAAK2Q,iBACL3Q,KAAKqR,UAGLrR,KAAKsR,OAAM,GAPXtR,KAAKsR,OAAM,EASnB,GAAC,CAAAxR,IAAA,UAAAC,MACD,WAAU,IAAAoB,EAAA,KACFnB,KAAKwQ,aAGTxQ,KAAKwQ,YAAa,EAElBxQ,KAAK4Q,aAAaW,aAAY,WAC1B,IAAIpE,EACqB,QAAxBA,EAAKhM,EAAKoP,gBAA6B,IAAPpD,GAAyBA,EAAGgE,aAAahQ,EAAKkP,kBACnF,GAAG,GACP,GAAC,CAAAvQ,IAAA,QAAAC,MACD,SAAMyR,GACF,IAAIrE,EACJnN,KAAK4Q,aAAa5P,SACbhB,KAAKwQ,aAGVxQ,KAAKwQ,YAAa,EACO,QAAxBrD,EAAKnN,KAAKuQ,gBAA6B,IAAPpD,GAAyBA,EAAGgE,aAAanR,KAAKsQ,qBAAuBkB,EAAe,QAAU,KACnI,KAACxB,CAAA,CApFqC,CAASxO,EAAAA,I,WCStCiQ,EAAiB,SAAA5D,IAAAlP,EAAAA,EAAAA,GAAA8S,EAAA5D,GAAA,IAAAjP,GAAAC,EAAAA,EAAAA,GAAA4S,GAC1B,SAAAA,EAAY3D,GAAM,IAAA9O,EAgBkH,OAhBlHC,EAAAA,EAAAA,GAAA,KAAAwS,IACdzS,EAAAJ,EAAAM,KAAA,OACKwS,YAAc5D,EAAK6D,WACxB3S,EAAK4S,MAAQ9D,EAAK+D,KAClB7S,EAAK8S,YAAchE,EAAKiE,WACxB/S,EAAKgT,cAAgBlE,EAAKmE,aAC1BjT,EAAKkT,gBAAkBpE,EAAKqE,eAC5BnT,EAAKoT,sBAAwBpT,EAAKK,UAAU,IAAI2Q,EAA8BlC,EAAKmC,WAAY,qBAAuBnC,EAAKuE,wBAAyB,uBAAyBvE,EAAKuE,0BAClLrT,EAAKoT,sBAAsBE,YAAYtT,EAAKkT,gBAAgBhB,YAC5DlS,EAAK8P,oBAAsB9P,EAAKK,UAAU,IAAI0P,EAAAA,GAC9C/P,EAAKuT,eAAgB,EACrBvT,EAAKyD,SAAU+P,EAAAA,EAAAA,GAAkBvS,SAASC,cAAc,QACxDlB,EAAKyD,QAAQpC,aAAa,OAAQ,gBAClCrB,EAAKyD,QAAQpC,aAAa,cAAe,QACzCrB,EAAKoT,sBAAsBK,WAAWzT,EAAKyD,SAC3CzD,EAAKyD,QAAQiQ,YAAY,YACzB1T,EAAKK,UAAU2P,EAAI2D,sBAAsB3T,EAAKyD,QAAQA,QAASuM,EAAIvH,UAAUyH,cAAc,SAAC/K,GAAC,OAAKnF,EAAK4T,oBAAoBzO,EAAE,KAAGnF,CACpI,CA4KC,OA1KDa,EAAAA,EAAAA,GAAA4R,EAAA,EAAA3R,IAAA,eAAAC,MAGA,SAAa+N,GACT,IAAM+E,EAAQ7S,KAAKX,UAAU,IAAIuO,EAAeE,IAChD9N,KAAKyC,QAAQA,QAAQnC,YAAYuS,EAAM3E,WACvClO,KAAKyC,QAAQA,QAAQnC,YAAYuS,EAAMpQ,QAC3C,GACA,CAAA3C,IAAA,gBAAAC,MAGA,SAAc+M,EAAKF,EAAMjM,EAAO0C,GAAQ,IAAAlC,EAAA,KACpCnB,KAAK8S,QAASN,EAAAA,EAAAA,GAAkBvS,SAASC,cAAc,QACvDF,KAAK8S,OAAO3B,aAAa,UACzBnR,KAAK8S,OAAOJ,YAAY,YACxB1S,KAAK8S,OAAOC,OAAOjG,GACnB9M,KAAK8S,OAAOE,QAAQpG,GACC,kBAAVjM,GACPX,KAAK8S,OAAOG,SAAStS,GAEH,kBAAX0C,GACPrD,KAAK8S,OAAOI,UAAU7P,GAE1BrD,KAAK8S,OAAOK,iBAAgB,GAC5BnT,KAAK8S,OAAOM,WAAW,UACvBpT,KAAKyC,QAAQA,QAAQnC,YAAYN,KAAK8S,OAAOrQ,SAC7CzC,KAAKX,UAAU2P,EAAI2D,sBAAsB3S,KAAK8S,OAAOrQ,QAASuM,EAAIvH,UAAUyH,cAAc,SAAC/K,GACtE,IAAbA,EAAEkP,SACFlP,EAAE2L,iBACF3O,EAAKmS,mBAAmBnP,GAEhC,KACAnE,KAAKuT,QAAQvT,KAAK8S,OAAOrQ,SAAS,SAAA0B,GAC1BA,EAAEqP,YACFrP,EAAEsP,iBAEV,GACJ,GACA,CAAA3T,IAAA,iBAAAC,MACA,SAAe2T,GAQX,OAPI1T,KAAKkS,gBAAgByB,eAAeD,KACpC1T,KAAKoS,sBAAsBE,YAAYtS,KAAKkS,gBAAgBhB,YAC5DlR,KAAKuS,eAAgB,EAChBvS,KAAK0R,aACN1R,KAAK4T,UAGN5T,KAAKuS,aAChB,GAAC,CAAAzS,IAAA,uBAAAC,MACD,SAAqB8T,GAQjB,OAPI7T,KAAKkS,gBAAgB4B,cAAcD,KACnC7T,KAAKoS,sBAAsBE,YAAYtS,KAAKkS,gBAAgBhB,YAC5DlR,KAAKuS,eAAgB,EAChBvS,KAAK0R,aACN1R,KAAK4T,UAGN5T,KAAKuS,aAChB,GAAC,CAAAzS,IAAA,2BAAAC,MACD,SAAyBgU,GAQrB,OAPI/T,KAAKkS,gBAAgB8B,kBAAkBD,KACvC/T,KAAKoS,sBAAsBE,YAAYtS,KAAKkS,gBAAgBhB,YAC5DlR,KAAKuS,eAAgB,EAChBvS,KAAK0R,aACN1R,KAAK4T,UAGN5T,KAAKuS,aAChB,GACA,CAAAzS,IAAA,cAAAC,MACA,WACIC,KAAKoS,sBAAsBhB,oBAAmB,EAClD,GAAC,CAAAtR,IAAA,YAAAC,MACD,WACIC,KAAKoS,sBAAsBhB,oBAAmB,EAClD,GAAC,CAAAtR,IAAA,SAAAC,MACD,WACSC,KAAKuS,gBAGVvS,KAAKuS,eAAgB,EACrBvS,KAAKiU,eAAejU,KAAKkS,gBAAgBgC,wBAAyBlU,KAAKkS,gBAAgBiC,yBACvFnU,KAAKoU,cAAcpU,KAAKkS,gBAAgBmC,gBAAiBrU,KAAKkS,gBAAgBoC,eAAiBtU,KAAKkS,gBAAgBqC,qBACxH,GACA,CAAAzU,IAAA,sBAAAC,MACA,SAAoBoE,GACZA,EAAEiC,SAAWpG,KAAKyC,QAAQA,SAG9BzC,KAAKwU,eAAerQ,EACxB,GAAC,CAAArE,IAAA,sBAAAC,MACD,SAAoBoE,GAChB,IAAMsQ,EAASzU,KAAKyC,QAAQA,QAAQiS,iBAAiB,GAAG5H,IAClD6H,EAAcF,EAASzU,KAAKkS,gBAAgBqC,oBAC5CK,EAAaH,EAASzU,KAAKkS,gBAAgBqC,oBAAsBvU,KAAKkS,gBAAgBmC,gBACtFQ,EAAa7U,KAAK8U,uBAAuB3Q,GAC3CwQ,GAAeE,GAAcA,GAAcD,EAE1B,IAAbzQ,EAAEkP,SACFlP,EAAE2L,iBACF9P,KAAKsT,mBAAmBnP,IAK5BnE,KAAKwU,eAAerQ,EAE5B,GAAC,CAAArE,IAAA,iBAAAC,MACD,SAAeoE,GACX,IAAI4Q,EACAC,EACJ,GAAI7Q,EAAEiC,SAAWpG,KAAKyC,QAAQA,SAAgC,kBAAd0B,EAAE4Q,SAA6C,kBAAd5Q,EAAE6Q,QAC/ED,EAAU5Q,EAAE4Q,QACZC,EAAU7Q,EAAE6Q,YAEX,CACD,IAAMC,EAAkBjG,EAAIkG,uBAAuBlV,KAAKyC,QAAQA,SAChEsS,EAAU5Q,EAAE6H,MAAQiJ,EAAgBrI,KACpCoI,EAAU7Q,EAAE8H,MAAQgJ,EAAgBnI,GACxC,CACA,IAAMqI,EAASnV,KAAKoV,6BAA6BL,EAASC,GAC1DhV,KAAKqV,6BAA6BrV,KAAKgS,cACjChS,KAAKkS,gBAAgBoD,wCAAwCH,GAC7DnV,KAAKkS,gBAAgBqD,mCAAmCJ,IAC7C,IAAbhR,EAAEkP,SAEFlP,EAAE2L,iBACF9P,KAAKsT,mBAAmBnP,GAEhC,GAAC,CAAArE,IAAA,qBAAAC,MACD,SAAmBoE,GAAG,IAAAyG,EAAA,KAClB,GAAKzG,EAAEiC,QAAYjC,EAAEiC,kBAAkBoJ,QAAvC,CAGA,IAAMgG,EAAyBxV,KAAK8U,uBAAuB3Q,GACrDsR,EAAmCzV,KAAK0V,iCAAiCvR,GACzEwR,EAAwB3V,KAAKkS,gBAAgB0D,QACnD5V,KAAK8S,OAAO+C,gBAAgB,UAAU,GACtC7V,KAAK8O,oBAAoBY,gBAAgBvL,EAAEiC,OAAQjC,EAAEwL,UAAWxL,EAAEyL,SAAS,SAACC,GACxE,IAAMiG,EAA4BlL,EAAK8K,iCAAiC7F,GAClEkG,EAAyBrQ,KAAKsQ,IAAIF,EAA4BL,GACpE,GAAIQ,EAAAA,IAAsBF,EAlKF,IAoKpBnL,EAAKyK,6BAA6BM,EAAsBO,yBAF5D,CAKA,IACMC,EADkBvL,EAAKkK,uBAAuBjF,GACb2F,EACvC5K,EAAKyK,6BAA6BM,EAAsBS,kCAAkCD,GAH1F,CAIJ,IAAG,WACCvL,EAAKkI,OAAO+C,gBAAgB,UAAU,GACtCjL,EAAKgH,MAAMyE,WACf,IACArW,KAAK4R,MAAM0E,aApBX,CAqBJ,GAAC,CAAAxW,IAAA,+BAAAC,MACD,SAA6BwW,GACzB,IAAMC,EAAwB,CAAC,EAC/BxW,KAAKyW,oBAAoBD,EAAuBD,GAChDvW,KAAK8R,YAAY4E,qBAAqBF,EAC1C,GAAC,CAAA1W,IAAA,sBAAAC,MACD,SAAoB4W,GAChB3W,KAAK4W,qBAAqBD,GAC1B3W,KAAKkS,gBAAgB2E,iBAAiBF,GACtC3W,KAAKuS,eAAgB,EAChBvS,KAAK0R,aACN1R,KAAK4T,QAEb,GAAC,CAAA9T,IAAA,WAAAC,MACD,WACI,OAAOC,KAAKkS,gBAAgBhB,UAChC,KAACO,CAAA,CA9LyB,CAAS1B,EAAAA,G,sBCN1B+G,EAAmB,SAAAC,IAAApY,EAAAA,EAAAA,GAAAmY,EAAAC,GAAA,IAAAnY,GAAAC,EAAAA,EAAAA,GAAAiY,GAC5B,SAAAA,EAAY/E,EAAYhT,EAAS8S,GAAM,IAAA7S,GAAAC,EAAAA,EAAAA,GAAA,KAAA6X,GACnC,IAAME,EAAmBjF,EAAWkF,sBAC9BC,EAAiBnF,EAAWoF,2BAUlC,GATAnY,EAAAJ,EAAAM,KAAA,KAAM,CACFyS,WAAY5S,EAAQ4S,WACpBE,KAAMA,EACNM,eAAgB,IAAIiF,EAAAA,EAAgBrY,EAAQsY,oBAAsBtY,EAAQuY,UAAY,EAA4B,IAAvBvY,EAAQwY,WAAoD,EAAIxY,EAAQyY,wBAAgD,IAArBzY,EAAQ0Y,SAAkD,EAAI1Y,EAAQ2Y,sBAAwBV,EAAiBrW,MAAOqW,EAAiBW,YAAaT,EAAeU,YACjW3H,WAAYlR,EAAQwY,WACpBlF,wBAAyB,aACzBN,WAAYA,EACZE,aAAclT,EAAQkT,eAEtBlT,EAAQsY,oBAAqB,CAC7B,IAAMQ,GAAc9Y,EAAQuY,UAAY3J,GAAkB,EACpDmK,GAAkB/Y,EAAQyY,wBAA0B7J,GAAkB,EAC5E3O,EAAK+Y,aAAa,CACd5J,UAAW,OACXU,KAAMmJ,EAAAA,EAAQC,oBACdnL,IAAKgL,EACLlL,KAAMiL,EACNtJ,YAAQxN,EACRyN,WAAOzN,EACPsN,QAAStP,EAAQuY,UACjBhJ,SAAUvP,EAAQyY,wBAClBvJ,WAAY,kBAAMjP,EAAK4S,MAAMsG,aAAa,IAAIC,EAAAA,EAAmB,KAAM,EAAG,GAAG,IAEjFnZ,EAAK+Y,aAAa,CACd5J,UAAW,OACXU,KAAMmJ,EAAAA,EAAQI,qBACdtL,IAAKgL,EACLlL,UAAM7L,EACNwN,YAAQxN,EACRyN,MAAOqJ,EACPxJ,QAAStP,EAAQuY,UACjBhJ,SAAUvP,EAAQyY,wBAClBvJ,WAAY,kBAAMjP,EAAK4S,MAAMsG,aAAa,IAAIC,EAAAA,EAAmB,MAAO,EAAG,GAAG,GAEtF,CACiJ,OAAjJnZ,EAAKqZ,cAAc3S,KAAK4S,OAAOvZ,EAAQyY,wBAA0BzY,EAAQwZ,sBAAwB,GAAI,OAAGxX,EAAWhC,EAAQwZ,sBAAsBvZ,CACrJ,CAqCC,OArCAa,EAAAA,EAAAA,GAAAiX,EAAA,EAAAhX,IAAA,gBAAAC,MACD,SAAcyY,EAAYC,GACtBzY,KAAK8S,OAAOG,SAASuF,GACrBxY,KAAK8S,OAAOE,QAAQyF,EACxB,GAAC,CAAA3Y,IAAA,iBAAAC,MACD,SAAe2Y,EAAWC,GACtB3Y,KAAKyC,QAAQwQ,SAASyF,GACtB1Y,KAAKyC,QAAQyQ,UAAUyF,GACvB3Y,KAAKyC,QAAQuQ,QAAQ,GACrBhT,KAAKyC,QAAQmW,UAAU,EAC3B,GAAC,CAAA9Y,IAAA,cAAAC,MACD,SAAYoE,GAIR,OAHAnE,KAAKuS,cAAgBvS,KAAK6Y,qBAAqB1U,EAAEwT,cAAgB3X,KAAKuS,cACtEvS,KAAKuS,cAAgBvS,KAAK8Y,yBAAyB3U,EAAEyT,aAAe5X,KAAKuS,cACzEvS,KAAKuS,cAAgBvS,KAAK+Y,eAAe5U,EAAExD,QAAUX,KAAKuS,cACnDvS,KAAKuS,aAChB,GAAC,CAAAzS,IAAA,+BAAAC,MACD,SAA6BgV,EAASC,GAClC,OAAOD,CACX,GAAC,CAAAjV,IAAA,yBAAAC,MACD,SAAuBoE,GACnB,OAAOA,EAAE6H,KACb,GAAC,CAAAlM,IAAA,mCAAAC,MACD,SAAiCoE,GAC7B,OAAOA,EAAE8H,KACb,GAAC,CAAAnM,IAAA,uBAAAC,MACD,SAAqBoF,GACjBnF,KAAK8S,OAAOI,UAAU/N,EAC1B,GAAC,CAAArF,IAAA,sBAAAC,MACD,SAAoBqG,EAAQ8Q,GACxB9Q,EAAOwR,WAAaV,CACxB,GAAC,CAAApX,IAAA,gBAAAC,MACD,SAAchB,GACViB,KAAKgZ,oBAA2C,IAAvBja,EAAQwY,WAAoD,EAAIxY,EAAQyY,yBACjGxX,KAAKkS,gBAAgB+G,yBAA8C,IAArBla,EAAQ0Y,SAAkD,EAAI1Y,EAAQ2Y,uBACpH1X,KAAKoS,sBAAsB8G,cAAcna,EAAQwY,YACjDvX,KAAKgS,cAAgBjT,EAAQkT,YACjC,KAAC6E,CAAA,CA7E2B,CAASrF,GCA5B0H,EAAiB,SAAApC,IAAApY,EAAAA,EAAAA,GAAAwa,EAAApC,GAAA,IAAAnY,GAAAC,EAAAA,EAAAA,GAAAsa,GAC1B,SAAAA,EAAYpH,EAAYhT,EAAS8S,GAAM,IAAA7S,GAAAC,EAAAA,EAAAA,GAAA,KAAAka,GACnC,IAAMnC,EAAmBjF,EAAWkF,sBAC9BC,EAAiBnF,EAAWoF,2BAYlC,GAXAnY,EAAAJ,EAAAM,KAAA,KAAM,CACFyS,WAAY5S,EAAQ4S,WACpBE,KAAMA,EACNM,eAAgB,IAAIiF,EAAAA,EAAgBrY,EAAQqa,kBAAoBra,EAAQuY,UAAY,EAA0B,IAArBvY,EAAQ0Y,SAAkD,EAAI1Y,EAAQ2Y,sBAE/J,EAAGV,EAAiB3T,OAAQ2T,EAAiBqC,aAAcnC,EAAeoC,WAC1ErJ,WAAYlR,EAAQ0Y,SACpBpF,wBAAyB,WACzBN,WAAYA,EACZE,aAAclT,EAAQkT,eAEtBlT,EAAQqa,kBAAmB,CAC3B,IAAMvB,GAAc9Y,EAAQuY,UAAY3J,GAAkB,EACpDmK,GAAkB/Y,EAAQ2Y,sBAAwB/J,GAAkB,EAC1E3O,EAAK+Y,aAAa,CACd5J,UAAW,OACXU,KAAMmJ,EAAAA,EAAQuB,kBACdzM,IAAK+K,EACLjL,KAAMkL,EACNvJ,YAAQxN,EACRyN,WAAOzN,EACPsN,QAAStP,EAAQ2Y,sBACjBpJ,SAAUvP,EAAQuY,UAClBrJ,WAAY,kBAAMjP,EAAK4S,MAAMsG,aAAa,IAAIC,EAAAA,EAAmB,KAAM,EAAG,GAAG,IAEjFnZ,EAAK+Y,aAAa,CACd5J,UAAW,OACXU,KAAMmJ,EAAAA,EAAQwB,oBACd1M,SAAK/L,EACL6L,KAAMkL,EACNvJ,OAAQsJ,EACRrJ,WAAOzN,EACPsN,QAAStP,EAAQ2Y,sBACjBpJ,SAAUvP,EAAQuY,UAClBrJ,WAAY,kBAAMjP,EAAK4S,MAAMsG,aAAa,IAAIC,EAAAA,EAAmB,KAAM,GAAI,GAAG,GAEtF,CAC2I,OAA3InZ,EAAKqZ,cAAc,EAAG3S,KAAK4S,OAAOvZ,EAAQ2Y,sBAAwB3Y,EAAQ0a,oBAAsB,GAAI1a,EAAQ0a,wBAAoB1Y,GAAW/B,CAC/I,CAsCC,OAtCAa,EAAAA,EAAAA,GAAAsZ,EAAA,EAAArZ,IAAA,gBAAAC,MACD,SAAcyY,EAAYC,GACtBzY,KAAK8S,OAAOI,UAAUsF,GACtBxY,KAAK8S,OAAOC,OAAO0F,EACvB,GAAC,CAAA3Y,IAAA,iBAAAC,MACD,SAAe2Y,EAAWC,GACtB3Y,KAAKyC,QAAQwQ,SAAS0F,GACtB3Y,KAAKyC,QAAQyQ,UAAUwF,GACvB1Y,KAAKyC,QAAQiX,SAAS,GACtB1Z,KAAKyC,QAAQsQ,OAAO,EACxB,GAAC,CAAAjT,IAAA,cAAAC,MACD,SAAYoE,GAIR,OAHAnE,KAAKuS,cAAgBvS,KAAK6Y,qBAAqB1U,EAAEkV,eAAiBrZ,KAAKuS,cACvEvS,KAAKuS,cAAgBvS,KAAK8Y,yBAAyB3U,EAAEmV,YAActZ,KAAKuS,cACxEvS,KAAKuS,cAAgBvS,KAAK+Y,eAAe5U,EAAEd,SAAWrD,KAAKuS,cACpDvS,KAAKuS,aAChB,GAAC,CAAAzS,IAAA,+BAAAC,MACD,SAA6BgV,EAASC,GAClC,OAAOA,CACX,GAAC,CAAAlV,IAAA,yBAAAC,MACD,SAAuBoE,GACnB,OAAOA,EAAE8H,KACb,GAAC,CAAAnM,IAAA,mCAAAC,MACD,SAAiCoE,GAC7B,OAAOA,EAAE6H,KACb,GAAC,CAAAlM,IAAA,uBAAAC,MACD,SAAqBoF,GACjBnF,KAAK8S,OAAOG,SAAS9N,EACzB,GAAC,CAAArF,IAAA,sBAAAC,MACD,SAAoBqG,EAAQ8Q,GACxB9Q,EAAOkT,UAAYpC,CACvB,GAAC,CAAApX,IAAA,gBAAAC,MACD,SAAchB,GACViB,KAAKgZ,oBAAyC,IAArBja,EAAQ0Y,SAAkD,EAAI1Y,EAAQ2Y,uBAE/F1X,KAAKkS,gBAAgB+G,yBAAyB,GAC9CjZ,KAAKoS,sBAAsB8G,cAAcna,EAAQ0Y,UACjDzX,KAAKgS,cAAgBjT,EAAQkT,YACjC,KAACkH,CAAA,CAhFyB,CAAS1H,G,sBCWjCkI,GAAwB9Z,EAAAA,EAAAA,IAC1B,SAAA8Z,EAAYC,EAAWlW,EAAQD,IAAQxE,EAAAA,EAAAA,GAAA,KAAA0a,GACnC3Z,KAAK4Z,UAAYA,EACjB5Z,KAAK0D,OAASA,EACd1D,KAAKyD,OAASA,EACdzD,KAAK6Z,MAAQ,CACjB,IAESC,EAAoB,WAC7B,SAAAA,KAAc7a,EAAAA,EAAAA,GAAA,KAAA6a,GACV9Z,KAAK+Z,UAAY,EACjB/Z,KAAKga,QAAU,GACfha,KAAKia,QAAU,EACfja,KAAKka,OAAS,CAClB,CAmFC,OAnFAra,EAAAA,EAAAA,GAAAia,EAAA,EAAAha,IAAA,uBAAAC,MACD,WACI,IAAqB,IAAjBC,KAAKia,SAAiC,IAAhBja,KAAKka,MAE3B,OAAO,EAOX,IAJA,IAAIC,EAAqB,EACrBN,EAAQ,EACRO,EAAY,EACZC,EAAQra,KAAKka,QACd,CACC,IAAMI,EAAaD,IAAUra,KAAKia,OAASE,EAAqBzU,KAAK6U,IAAI,GAAIH,GAG7E,GAFAD,GAAsBG,EACtBT,GAAS7Z,KAAKga,QAAQK,GAAOR,MAAQS,EACjCD,IAAUra,KAAKia,OACf,MAEJI,GAASra,KAAK+Z,UAAYM,EAAQ,GAAKra,KAAK+Z,UAC5CK,GACJ,CACA,OAAQP,GAAS,EACrB,GAAC,CAAA/Z,IAAA,2BAAAC,MACD,SAAyBoE,GACrB,IAAMqW,EAAepT,OAAOqT,kBAAmBC,EAAAA,EAAAA,MAC3CzE,EAAAA,IAAsBA,EAAAA,GAGtBjW,KAAK2a,OAAOC,KAAKC,MAAO1W,EAAET,OAAS8W,EAAcrW,EAAEV,OAAS+W,GAG5Dxa,KAAK2a,OAAOC,KAAKC,MAAO1W,EAAET,OAAQS,EAAEV,OAE5C,GAAC,CAAA3D,IAAA,SAAAC,MACD,SAAO6Z,EAAWlW,EAAQD,GACtB,IAAMqX,EAAO,IAAInB,EAAyBC,EAAWlW,EAAQD,GAC7DqX,EAAKjB,MAAQ7Z,KAAK+a,cAAcD,IACX,IAAjB9a,KAAKia,SAAiC,IAAhBja,KAAKka,OAC3Bla,KAAKga,QAAQ,GAAKc,EAClB9a,KAAKia,OAAS,EACdja,KAAKka,MAAQ,IAGbla,KAAKka,OAASla,KAAKka,MAAQ,GAAKla,KAAK+Z,UACjC/Z,KAAKka,QAAUla,KAAKia,SAEpBja,KAAKia,QAAUja,KAAKia,OAAS,GAAKja,KAAK+Z,WAE3C/Z,KAAKga,QAAQha,KAAKka,OAASY,EAEnC,GACA,CAAAhb,IAAA,gBAAAC,MAKA,SAAc+a,GACV,GAAIpV,KAAKsQ,IAAI8E,EAAKpX,QAAU,GAAKgC,KAAKsQ,IAAI8E,EAAKrX,QAAU,EAErD,OAAO,EAEX,IAAIoW,EAAQ,IACmB,IAAjB7Z,KAAKia,SAAiC,IAAhBja,KAAKka,OAAsBla,KAAKga,QAAQha,KAAKka,OAgBjF,OAJKla,KAAKgb,aAAaF,EAAKpX,SAAY1D,KAAKgb,aAAaF,EAAKrX,UAE3DoW,GAAS,KAENnU,KAAKE,IAAIF,KAAKC,IAAIkU,EAAO,GAAI,EACxC,GAAC,CAAA/Z,IAAA,eAAAC,MACD,SAAaA,GAET,OADc2F,KAAKsQ,IAAItQ,KAAKuV,MAAMlb,GAASA,GAC3B,GACpB,KAAC+Z,CAAA,CAzF4B,GA2FjCA,EAAqBoB,SAAW,IAAIpB,EAC7B,IAAMqB,EAAyB,SAAAtN,IAAAlP,EAAAA,EAAAA,GAAAwc,EAAAtN,GAAA,IAAAjP,GAAAC,EAAAA,EAAAA,GAAAsc,GAIlC,SAAAA,EAAY3b,EAAST,EAASgT,GAAY,IAAA/S,GAAAC,EAAAA,EAAAA,GAAA,KAAAkc,IACtCnc,EAAAJ,EAAAM,KAAA,OACKkc,UAAYpc,EAAKK,UAAU,IAAIuC,EAAAA,IACpC5C,EAAKqc,SAAWrc,EAAKoc,UAAUtZ,MAC/B9C,EAAKsc,cAAgBtc,EAAKK,UAAU,IAAIuC,EAAAA,IACxCpC,EAAQgB,MAAM+a,SAAW,SACzBvc,EAAKwc,SAuXb,SAAwB1N,GACpB,IAAM2N,EAAS,CACX9J,WAAwC,qBAApB7D,EAAK6D,YAA6B7D,EAAK6D,WAC3DxD,UAAsC,qBAAnBL,EAAKK,UAA4BL,EAAKK,UAAY,GACrEuN,WAAwC,qBAApB5N,EAAK4N,YAA6B5N,EAAK4N,WAC3DC,iBAAoD,qBAA1B7N,EAAK6N,kBAAmC7N,EAAK6N,iBACvEC,SAAoC,qBAAlB9N,EAAK8N,UAA2B9N,EAAK8N,SACvDC,qCAA4F,qBAA9C/N,EAAK+N,sCAAuD/N,EAAK+N,qCAC/GC,wBAAkE,qBAAjChO,EAAKgO,yBAA0ChO,EAAKgO,wBACrFC,WAAwC,qBAApBjO,EAAKiO,YAA6BjO,EAAKiO,WAC3DC,4BAA0E,qBAArClO,EAAKkO,4BAA8ClO,EAAKkO,4BAA8B,EAC3HC,sBAA8D,qBAA/BnO,EAAKmO,sBAAwCnO,EAAKmO,sBAAwB,EACzGC,sBAA8D,qBAA/BpO,EAAKoO,uBAAwCpO,EAAKoO,sBACjFC,uBAAgE,qBAAhCrO,EAAKqO,wBAAyCrO,EAAKqO,uBACnF7E,UAAsC,qBAAnBxJ,EAAKwJ,UAA4BxJ,EAAKwJ,UAAY,GACrE8E,gBAAkD,qBAAzBtO,EAAKsO,gBAAkCtO,EAAKsO,gBAAkB,KACvF7E,WAAwC,qBAApBzJ,EAAKyJ,WAA6BzJ,EAAKyJ,WAAa,EACxEC,wBAAkE,qBAAjC1J,EAAK0J,wBAA0C1J,EAAK0J,wBAA0B,GAC/Ge,qBAA4D,qBAA9BzK,EAAKyK,qBAAuCzK,EAAKyK,qBAAuB,EACtGlB,oBAA0D,qBAA7BvJ,EAAKuJ,qBAAsCvJ,EAAKuJ,oBAC7EI,SAAoC,qBAAlB3J,EAAK2J,SAA2B3J,EAAK2J,SAAW,EAClEC,sBAA8D,qBAA/B5J,EAAK4J,sBAAwC5J,EAAK4J,sBAAwB,GACzG0B,kBAAsD,qBAA3BtL,EAAKsL,mBAAoCtL,EAAKsL,kBACzEK,mBAAwD,qBAA5B3L,EAAK2L,mBAAqC3L,EAAK2L,mBAAqB,EAChGxH,aAA4C,qBAAtBnE,EAAKmE,cAA+BnE,EAAKmE,cAEnEwJ,EAAOlD,qBAA6D,qBAA9BzK,EAAKyK,qBAAuCzK,EAAKyK,qBAAuBkD,EAAOjE,wBACrHiE,EAAOhC,mBAAyD,qBAA5B3L,EAAK2L,mBAAqC3L,EAAK2L,mBAAqBgC,EAAO/D,sBAE3GzB,EAAAA,KACAwF,EAAOtN,WAAa,QAExB,OAAOsN,CACX,CAxZwBY,CAAetd,GAC/BC,EAAK8S,YAAcC,EACnB/S,EAAKK,UAAUL,EAAK8S,YAAYuJ,UAAS,SAAClX,GACtCnF,EAAKsc,cAAcxX,KAAKK,GACxBnF,EAAKsd,aAAanY,GAClBnF,EAAKoc,UAAUtX,KAAKK,EACxB,KACA,IAAMoY,EAAgB,CAClBrE,aAAc,SAACsE,GAAe,OAAKxd,EAAKyd,cAAcD,EAAgB,EACtElG,YAAa,kBAAMtX,EAAK0d,cAAc,EACtCrG,UAAW,kBAAMrX,EAAK2d,YAAY,GAqCV,OAnC5B3d,EAAK4d,mBAAqB5d,EAAKK,UAAU,IAAI8Z,EAAkBna,EAAK8S,YAAa9S,EAAKwc,SAAUe,IAChGvd,EAAK6d,qBAAuB7d,EAAKK,UAAU,IAAIyX,EAAoB9X,EAAK8S,YAAa9S,EAAKwc,SAAUe,IACpGvd,EAAKuR,SAAWtQ,SAASC,cAAc,OACvClB,EAAKuR,SAASpC,UAAY,6BAA+BnP,EAAKwc,SAASrN,UACvEnP,EAAKuR,SAASlQ,aAAa,OAAQ,gBACnCrB,EAAKuR,SAAS/P,MAAM4N,SAAW,WAC/BpP,EAAKuR,SAAS/P,MAAM+a,SAAW,SAC/Bvc,EAAKuR,SAASjQ,YAAYd,GAC1BR,EAAKuR,SAASjQ,YAAYtB,EAAK6d,qBAAqBpa,QAAQA,SAC5DzD,EAAKuR,SAASjQ,YAAYtB,EAAK4d,mBAAmBna,QAAQA,SACtDzD,EAAKwc,SAASE,YACd1c,EAAK8d,oBAAqBtK,EAAAA,EAAAA,GAAkBvS,SAASC,cAAc,QACnElB,EAAK8d,mBAAmB3L,aAAa,UACrCnS,EAAKuR,SAASjQ,YAAYtB,EAAK8d,mBAAmBra,SAClDzD,EAAK+d,mBAAoBvK,EAAAA,EAAAA,GAAkBvS,SAASC,cAAc,QAClElB,EAAK+d,kBAAkB5L,aAAa,UACpCnS,EAAKuR,SAASjQ,YAAYtB,EAAK+d,kBAAkBta,SACjDzD,EAAKge,uBAAwBxK,EAAAA,EAAAA,GAAkBvS,SAASC,cAAc,QACtElB,EAAKge,sBAAsB7L,aAAa,UACxCnS,EAAKuR,SAASjQ,YAAYtB,EAAKge,sBAAsBva,WAGrDzD,EAAK8d,mBAAqB,KAC1B9d,EAAK+d,kBAAoB,KACzB/d,EAAKge,sBAAwB,MAEjChe,EAAKie,iBAAmBje,EAAKwc,SAASY,iBAAmBpd,EAAKuR,SAC9DvR,EAAKke,qBAAuB,GAC5Ble,EAAKme,0BAA0Bne,EAAKwc,SAASG,kBAC7C3c,EAAKoe,YAAYpe,EAAKie,kBAAkB,SAAC9Y,GAAC,OAAKnF,EAAKqe,aAAalZ,EAAE,IACnEnF,EAAKse,aAAate,EAAKie,kBAAkB,SAAC9Y,GAAC,OAAKnF,EAAKue,cAAcpZ,EAAE,IACrEnF,EAAKwe,aAAexe,EAAKK,UAAU,IAAIkQ,EAAAA,IACvCvQ,EAAKye,aAAc,EACnBze,EAAK0e,cAAe,EACpB1e,EAAKuT,eAAgB,EACrBvT,EAAK2e,iBAAkB,EAAK3e,CAChC,CA2PC,OA3PAa,EAAAA,EAAAA,GAAAsb,EAAA,EAAArb,IAAA,UAAAkG,IAzDD,WACI,OAAOhG,KAAKwb,QAChB,GAAC,CAAA1b,IAAA,UAAAC,MAwDD,WACIC,KAAKkd,sBAAuBnY,EAAAA,EAAAA,IAAQ/E,KAAKkd,uBACzC5P,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA4N,EAAA7T,WAAA,gBAAApI,KAAA,KACJ,GACA,CAAAY,IAAA,aAAAC,MAGA,WACI,OAAOC,KAAKuQ,QAChB,GAAC,CAAAzQ,IAAA,6BAAAC,MACD,WACI,MAAO,CACH6d,OAAQ5d,KAAKuQ,SACbsN,aAAc7d,KAAK4c,mBAAmBna,QAAQA,QAEtD,GACA,CAAA3C,IAAA,uCAAAC,MAIA,SAAqC+d,GACjC9d,KAAK4c,mBAAmBmB,oBAAoBD,EAChD,GAAC,CAAAhe,IAAA,sBAAAC,MACD,WACI,OAAOC,KAAK8R,YAAYmF,qBAC5B,GAAC,CAAAnX,IAAA,sBAAAC,MACD,SAAoBie,GAChBhe,KAAK8R,YAAYmM,oBAAoBD,GAAY,EACrD,GACA,CAAAle,IAAA,kBAAAC,MAGA,SAAgBme,GACZle,KAAKwb,SAASrN,UAAY+P,EAEtBjI,EAAAA,KACAjW,KAAKwb,SAASrN,WAAa,QAE/BnO,KAAKuQ,SAASpC,UAAY,6BAA+BnO,KAAKwb,SAASrN,SAC3E,GACA,CAAArO,IAAA,gBAAAC,MAGA,SAAcoe,GACiC,qBAAhCA,EAAWxC,mBAClB3b,KAAKwb,SAASG,iBAAmBwC,EAAWxC,iBAC5C3b,KAAKmd,0BAA0Bnd,KAAKwb,SAASG,mBAEK,qBAA3CwC,EAAWnC,8BAClBhc,KAAKwb,SAASQ,4BAA8BmC,EAAWnC,6BAEX,qBAArCmC,EAAWlC,wBAClBjc,KAAKwb,SAASS,sBAAwBkC,EAAWlC,uBAEL,qBAArCkC,EAAWjC,wBAClBlc,KAAKwb,SAASU,sBAAwBiC,EAAWjC,uBAEhB,qBAA1BiC,EAAW5G,aAClBvX,KAAKwb,SAASjE,WAAa4G,EAAW5G,YAEP,qBAAxB4G,EAAW1G,WAClBzX,KAAKwb,SAAS/D,SAAW0G,EAAW1G,UAEU,qBAAvC0G,EAAW3G,0BAClBxX,KAAKwb,SAAShE,wBAA0B2G,EAAW3G,yBAEP,qBAArC2G,EAAWzG,wBAClB1X,KAAKwb,SAAS9D,sBAAwByG,EAAWzG,uBAEd,qBAA5ByG,EAAWlM,eAClBjS,KAAKwb,SAASvJ,aAAekM,EAAWlM,cAE5CjS,KAAK6c,qBAAqBuB,cAAcpe,KAAKwb,UAC7Cxb,KAAK4c,mBAAmBwB,cAAcpe,KAAKwb,UACtCxb,KAAKwb,SAAS7J,YACf3R,KAAKqe,SAEb,GAAC,CAAAve,IAAA,oCAAAC,MACD,SAAkC+d,GAC9B9d,KAAKyc,cAAc,IAAItE,EAAAA,EAAmB2F,GAC9C,GACA,CAAAhe,IAAA,4BAAAC,MACA,SAA0Bue,GAAc,IAAAnd,EAAA,KAEpC,GADqBnB,KAAKkd,qBAAqBhY,OAAS,IACpCoZ,IAKpBte,KAAKkd,sBAAuBnY,EAAAA,EAAAA,IAAQ/E,KAAKkd,sBAErCoB,GAAc,CAIdte,KAAKkd,qBAAqBqB,KAAKvP,EAAI2D,sBAAsB3S,KAAKid,iBAAkBjO,EAAIvH,UAAU+W,aAHzE,SAACV,GAClB3c,EAAKsb,cAAc,IAAItE,EAAAA,EAAmB2F,GAC9C,GACyH,CAAEW,SAAS,IACxI,CACJ,GAAC,CAAA3e,IAAA,gBAAAC,MACD,SAAcoE,GACV,IAAIgJ,EACJ,KAA8B,QAAzBA,EAAKhJ,EAAE2Z,oBAAiC,IAAP3Q,OAAgB,EAASA,EAAGuR,kBAAlE,CAGA,IAAMC,EAAa7E,EAAqBoB,SAEpCyD,EAAWC,yBAAyBza,GAGxC,IAAI0a,GAAY,EAChB,GAAI1a,EAAEV,QAAUU,EAAET,OAAQ,CACtB,IAAID,EAASU,EAAEV,OAASzD,KAAKwb,SAASQ,4BAClCtY,EAASS,EAAET,OAAS1D,KAAKwb,SAASQ,4BAStC,GARIhc,KAAKwb,SAASU,wBACVxW,KAAKsQ,IAAIvS,IAAWiC,KAAKsQ,IAAItS,GAC7BA,EAAS,EAGTD,EAAS,GAGbzD,KAAKwb,SAASI,SAAU,KAAAkD,EACL,CAACpb,EAAQD,GAA3BA,EAAMqb,EAAA,GAAEpb,EAAMob,EAAA,EACnB,CAGA,IAAMC,GAAgB9I,EAAAA,IAAwB9R,EAAE2Z,cAAgB3Z,EAAE2Z,aAAakB,UAC1Ehf,KAAKwb,SAASO,aAAcgD,GAAkBrb,IAC/CA,EAASD,EACTA,EAAS,GAETU,EAAE2Z,cAAgB3Z,EAAE2Z,aAAa5R,SAEjCxI,GAAkB1D,KAAKwb,SAASS,sBAChCxY,GAAkBzD,KAAKwb,SAASS,uBAEpC,IAAMgD,EAAuBjf,KAAK8R,YAAYoN,0BAC1C1I,EAAwB,CAAC,EAC7B,GAAI/S,EAAQ,CACR,IAAM0b,EA3SW,GA2SiC1b,EAE5C2b,EAAmBH,EAAqB3F,WAAa6F,EAAiB,EAAIzZ,KAAK4S,MAAM6G,GAAkBzZ,KAAK2Z,KAAKF,IACvHnf,KAAK4c,mBAAmBnG,oBAAoBD,EAAuB4I,EACvE,CACA,GAAI1b,EAAQ,CACR,IAAM4b,EAjTW,GAiTkC5b,EAE7C6b,EAAoBN,EAAqBrH,YAAc0H,EAAkB,EAAI5Z,KAAK4S,MAAMgH,GAAmB5Z,KAAK2Z,KAAKC,IAC3Htf,KAAK6c,qBAAqBpG,oBAAoBD,EAAuB+I,EACzE,CAGA,GADA/I,EAAwBxW,KAAK8R,YAAY0N,uBAAuBhJ,GAC5DyI,EAAqBrH,aAAepB,EAAsBoB,YAAcqH,EAAqB3F,YAAc9C,EAAsB8C,UAE1HtZ,KAAKwb,SAASW,wBACdwC,EAAWc,uBAEdzf,KAAK8R,YAAY4N,wBAAwBlJ,GAGzCxW,KAAK8R,YAAY4E,qBAAqBF,GAE1CqI,GAAY,CAEpB,CACA,IAAIc,EAAoBd,GACnBc,GAAqB3f,KAAKwb,SAASM,0BACpC6D,GAAoB,IAEnBA,GAAqB3f,KAAKwb,SAASK,uCAAyC7b,KAAK4c,mBAAmB1L,YAAclR,KAAK6c,qBAAqB3L,cAC7IyO,GAAoB,GAEpBA,IACAxb,EAAE2L,iBACF3L,EAAEsP,kBAvEN,CAyEJ,GAAC,CAAA3T,IAAA,eAAAC,MACD,SAAaoE,GACTnE,KAAKuS,cAAgBvS,KAAK6c,qBAAqB+C,YAAYzb,IAAMnE,KAAKuS,cACtEvS,KAAKuS,cAAgBvS,KAAK4c,mBAAmBgD,YAAYzb,IAAMnE,KAAKuS,cAChEvS,KAAKwb,SAASE,aACd1b,KAAKuS,eAAgB,GAErBvS,KAAK2d,iBACL3d,KAAKqR,UAEJrR,KAAKwb,SAAS7J,YACf3R,KAAKqe,SAEb,GACA,CAAAve,IAAA,YAAAC,MAIA,WACI,IAAKC,KAAKwb,SAAS7J,WACf,MAAM,IAAIkO,MAAM,sDAEpB7f,KAAKqe,SACT,GAAC,CAAAve,IAAA,UAAAC,MACD,WACI,GAAKC,KAAKuS,gBAGVvS,KAAKuS,eAAgB,EACrBvS,KAAK6c,qBAAqBjJ,SAC1B5T,KAAK4c,mBAAmBhJ,SACpB5T,KAAKwb,SAASE,YAAY,CAC1B,IAAMoE,EAAc9f,KAAK8R,YAAYqF,2BAC/B4I,EAAYD,EAAYxG,UAAY,EACpC0G,EAAaF,EAAYlI,WAAa,EACtCqI,EAAiBD,EAAa,QAAU,GACxCE,EAAgBH,EAAY,OAAS,GACrCI,EAAoBH,GAAcD,EAAY,mBAAqB,GACzE/f,KAAK8c,mBAAmB3L,aAAa,SAADjI,OAAU+W,IAC9CjgB,KAAK+c,kBAAkB5L,aAAa,SAADjI,OAAUgX,IAC7ClgB,KAAKgd,sBAAsB7L,aAAa,SAADjI,OAAUiX,GAAgBjX,OAAGgX,GAAYhX,OAAG+W,GACvF,CACJ,GACA,CAAAngB,IAAA,eAAAC,MACA,WACIC,KAAKyd,aAAc,EACnBzd,KAAKqR,SACT,GAAC,CAAAvR,IAAA,aAAAC,MACD,WACIC,KAAKyd,aAAc,EACnBzd,KAAKsR,OACT,GAAC,CAAAxR,IAAA,gBAAAC,MACD,SAAcoE,GACVnE,KAAK0d,cAAe,EACpB1d,KAAKsR,OACT,GAAC,CAAAxR,IAAA,eAAAC,MACD,SAAaoE,GACTnE,KAAK0d,cAAe,EACpB1d,KAAKqR,SACT,GAAC,CAAAvR,IAAA,UAAAC,MACD,WACIC,KAAK4c,mBAAmBwD,cACxBpgB,KAAK6c,qBAAqBuD,cAC1BpgB,KAAKqgB,eACT,GAAC,CAAAvgB,IAAA,QAAAC,MACD,WACSC,KAAK0d,cAAiB1d,KAAKyd,cAC5Bzd,KAAK4c,mBAAmB0D,YACxBtgB,KAAK6c,qBAAqByD,YAElC,GAAC,CAAAxgB,IAAA,gBAAAC,MACD,WAAgB,IAAA6K,EAAA,KACP5K,KAAK0d,cAAiB1d,KAAKyd,aAC5Bzd,KAAKwd,aAAa/N,cAAa,kBAAM7E,EAAK0G,OAAO,GA1ZxC,IA4ZjB,KAAC6J,CAAA,CArTiC,CAASpL,EAAAA,GAuTlCwQ,EAAiB,SAAAC,IAAA7hB,EAAAA,EAAAA,GAAA4hB,EAAAC,GAAA,IAAAC,GAAA5hB,EAAAA,EAAAA,GAAA0hB,GAC1B,SAAAA,EAAY/gB,EAAST,GAAS,IAAAgM,GAAA9L,EAAAA,EAAAA,GAAA,KAAAshB,IAC1BxhB,EAAUA,GAAW,CAAC,GACdod,wBAAyB,EACjC,IAAMpK,EAAa,IAAI2O,EAAAA,GAAW,CAC9BC,oBAAoB,EACpBC,qBAAsB,EACtBC,6BAA8B,SAACC,GAAQ,OAAK9R,EAAI6R,6BAA6BC,EAAS,IAG/D,OAD3B/V,EAAA0V,EAAAvhB,KAAA,KAAMM,EAAST,EAASgT,IACnB1S,UAAU0S,GAAYhH,CAC/B,CAGC,OAHAlL,EAAAA,EAAAA,GAAA0gB,EAAA,EAAAzgB,IAAA,oBAAAC,MACD,SAAkBghB,GACd/gB,KAAK8R,YAAY4E,qBAAqBqK,EAC1C,KAACR,CAAA,CAdyB,CAASpF,GAgB1B6F,EAAuB,SAAAC,IAAAtiB,EAAAA,EAAAA,GAAAqiB,EAAAC,GAAA,IAAAC,GAAAriB,EAAAA,EAAAA,GAAAmiB,GAChC,SAAAA,EAAYxhB,EAAST,EAASgT,GAAY,OAAA9S,EAAAA,EAAAA,GAAA,KAAA+hB,GAAAE,EAAAhiB,KAAA,KAChCM,EAAST,EAASgT,EAC5B,CAWC,OAXAlS,EAAAA,EAAAA,GAAAmhB,EAAA,EAAAlhB,IAAA,oBAAAC,MACD,SAAkBghB,GACVA,EAAOI,eACPnhB,KAAK8R,YAAY4N,wBAAwBqB,EAAQA,EAAOI,gBAGxDnhB,KAAK8R,YAAY4E,qBAAqBqK,EAE9C,GAAC,CAAAjhB,IAAA,oBAAAC,MACD,WACI,OAAOC,KAAK8R,YAAYqF,0BAC5B,KAAC6J,CAAA,CAd+B,CAAS7F,GAgBhCiG,EAAoB,SAAAC,IAAA1iB,EAAAA,EAAAA,GAAAyiB,EAAAC,GAAA,IAAAC,GAAAziB,EAAAA,EAAAA,GAAAuiB,GAC7B,SAAAA,EAAY5hB,EAAST,GAAS,IAAAwiB,GAAAtiB,EAAAA,EAAAA,GAAA,KAAAmiB,IAC1BriB,EAAUA,GAAW,CAAC,GACdod,wBAAyB,EACjC,IAAMpK,EAAa,IAAI2O,EAAAA,GAAW,CAC9BC,oBAAoB,EACpBC,qBAAsB,EACtBC,6BAA8B,SAACC,GAAQ,OAAK9R,EAAI6R,6BAA6BC,EAAS,IAavE,OAXnBS,EAAAD,EAAApiB,KAAA,KAAMM,EAAST,EAASgT,IACnB1S,UAAU0S,GACfwP,EAAKC,SAAWhiB,EAChB+hB,EAAKlG,UAAS,SAAClX,GACPA,EAAEsd,mBACFF,EAAKC,SAASlI,UAAYnV,EAAEmV,WAE5BnV,EAAEud,oBACFH,EAAKC,SAAS5J,WAAazT,EAAEyT,WAErC,IACA2J,EAAKI,cAAcJ,CACvB,CAmBC,OAnBA1hB,EAAAA,EAAAA,GAAAuhB,EAAA,EAAAthB,IAAA,oBAAAC,MACD,SAAkBghB,GACd/gB,KAAK8R,YAAY4E,qBAAqBqK,EAC1C,GAAC,CAAAjhB,IAAA,oBAAAC,MACD,WACI,OAAOC,KAAK8R,YAAYqF,0BAC5B,GAAC,CAAArX,IAAA,cAAAC,MACD,WAEIC,KAAKie,oBAAoB,CACrBtd,MAAOX,KAAKwhB,SAASI,YACrBjK,YAAa3X,KAAKwhB,SAAS7J,YAC3BtU,OAAQrD,KAAKwhB,SAASK,aACtBxI,aAAcrZ,KAAKwhB,SAASnI,eAEhCrZ,KAAKgU,kBAAkB,CACnB4D,WAAY5X,KAAKwhB,SAAS5J,WAC1B0B,UAAWtZ,KAAKwhB,SAASlI,WAEjC,KAAC8H,CAAA,CAxC4B,CAASjG,E,kFCvc7B/D,EAAc,WACvB,SAAAA,EAAYE,EAAWX,EAAemL,EAAuBpO,EAAaqO,EAAY7K,IAAgBjY,EAAAA,EAAAA,GAAA,KAAAmY,GAClGpX,KAAKgiB,eAAiBtc,KAAKuV,MAAMtE,GACjC3W,KAAKiiB,uBAAyBvc,KAAKuV,MAAM6G,GACzC9hB,KAAKkiB,WAAaxc,KAAKuV,MAAM3D,GAC7BtX,KAAKmiB,aAAezO,EACpB1T,KAAKoiB,YAAcL,EACnB/hB,KAAKqiB,gBAAkBnL,EACvBlX,KAAKsiB,uBAAyB,EAC9BtiB,KAAKuiB,mBAAoB,EACzBviB,KAAKwiB,oBAAsB,EAC3BxiB,KAAKyiB,qBAAuB,EAC5BziB,KAAK0iB,wBAA0B,EAC/B1iB,KAAK2iB,wBACT,CAgEC,OAhEA9iB,EAAAA,EAAAA,GAAAuX,EAAA,EAAAtX,IAAA,QAAAC,MACD,WACI,OAAO,IAAIqX,EAAepX,KAAKkiB,WAAYliB,KAAKgiB,eAAgBhiB,KAAKiiB,uBAAwBjiB,KAAKmiB,aAAcniB,KAAKoiB,YAAapiB,KAAKqiB,gBAC3I,GAAC,CAAAviB,IAAA,iBAAAC,MACD,SAAe2T,GACX,IAAMkP,EAAeld,KAAKuV,MAAMvH,GAChC,OAAI1T,KAAKmiB,eAAiBS,IACtB5iB,KAAKmiB,aAAeS,EACpB5iB,KAAK2iB,0BACE,EAGf,GAAC,CAAA7iB,IAAA,gBAAAC,MACD,SAAcgiB,GACV,IAAMc,EAAcnd,KAAKuV,MAAM8G,GAC/B,OAAI/hB,KAAKoiB,cAAgBS,IACrB7iB,KAAKoiB,YAAcS,EACnB7iB,KAAK2iB,0BACE,EAGf,GAAC,CAAA7iB,IAAA,oBAAAC,MACD,SAAkBmX,GACd,IAAM4L,EAAkBpd,KAAKuV,MAAM/D,GACnC,OAAIlX,KAAKqiB,kBAAoBS,IACzB9iB,KAAKqiB,gBAAkBS,EACvB9iB,KAAK2iB,0BACE,EAGf,GAAC,CAAA7iB,IAAA,mBAAAC,MACD,SAAiB4W,GACb3W,KAAKgiB,eAAiBtc,KAAKuV,MAAMtE,EACrC,GAAC,CAAA7W,IAAA,2BAAAC,MACD,SAAyB+hB,GACrB9hB,KAAKiiB,uBAAyBvc,KAAKuV,MAAM6G,EAC7C,GAAC,CAAAhiB,IAAA,yBAAAC,MA6BD,WACI,IAAMyG,EAAI4Q,EAAe2L,eAAe/iB,KAAKiiB,uBAAwBjiB,KAAKkiB,WAAYliB,KAAKmiB,aAAcniB,KAAKoiB,YAAapiB,KAAKqiB,iBAChIriB,KAAKsiB,uBAAyB9b,EAAEwc,sBAChChjB,KAAKuiB,kBAAoB/b,EAAEyc,iBAC3BjjB,KAAKwiB,oBAAsBhc,EAAE0c,mBAC7BljB,KAAKyiB,qBAAuBjc,EAAE2c,oBAC9BnjB,KAAK0iB,wBAA0Blc,EAAE4c,sBACrC,GAAC,CAAAtjB,IAAA,eAAAC,MACD,WACI,OAAOC,KAAKkiB,UAChB,GAAC,CAAApiB,IAAA,oBAAAC,MACD,WACI,OAAOC,KAAKqiB,eAChB,GAAC,CAAAviB,IAAA,wBAAAC,MACD,WACI,OAAOC,KAAKsiB,sBAChB,GAAC,CAAAxiB,IAAA,wBAAAC,MACD,WACI,OAAOC,KAAKgiB,cAChB,GAAC,CAAAliB,IAAA,WAAAC,MACD,WACI,OAAOC,KAAKuiB,iBAChB,GAAC,CAAAziB,IAAA,gBAAAC,MACD,WACI,OAAOC,KAAKwiB,mBAChB,GAAC,CAAA1iB,IAAA,oBAAAC,MACD,WACI,OAAOC,KAAK0iB,uBAChB,GACA,CAAA5iB,IAAA,qCAAAC,MAIA,SAAmCoV,GAC/B,IAAKnV,KAAKuiB,kBAEN,OAAO,EAEX,IAAMc,EAAwBlO,EAASnV,KAAKkiB,WAAaliB,KAAKwiB,oBAAsB,EACpF,OAAO9c,KAAKuV,MAAMoI,EAAwBrjB,KAAKyiB,qBACnD,GACA,CAAA3iB,IAAA,0CAAAC,MAMA,SAAwCoV,GACpC,IAAKnV,KAAKuiB,kBAEN,OAAO,EAEX,IAAMe,EAAkBnO,EAASnV,KAAKkiB,WAClC1L,EAAwBxW,KAAKqiB,gBAOjC,OANIiB,EAAkBtjB,KAAK0iB,wBACvBlM,GAAyBxW,KAAKmiB,aAG9B3L,GAAyBxW,KAAKmiB,aAE3B3L,CACX,GACA,CAAA1W,IAAA,oCAAAC,MAGA,SAAkCwjB,GAC9B,IAAKvjB,KAAKuiB,kBAEN,OAAO,EAEX,IAAMc,EAAwBrjB,KAAK0iB,wBAA0Ba,EAC7D,OAAO7d,KAAKuV,MAAMoI,EAAwBrjB,KAAKyiB,qBACnD,IAAC,EAAA3iB,IAAA,iBAAAC,MApGD,SAAsB+hB,EAAuBxK,EAAW5D,EAAaqO,EAAY7K,GAC7E,IAAM8L,EAAwBtd,KAAKC,IAAI,EAAG+N,EAAcoO,GAClD0B,EAA4B9d,KAAKC,IAAI,EAAGqd,EAAwB,EAAI1L,GACpE2L,EAAoBlB,EAAa,GAAKA,EAAarO,EACzD,IAAKuP,EAED,MAAO,CACHD,sBAAuBtd,KAAKuV,MAAM+H,GAClCC,iBAAkBA,EAClBC,mBAAoBxd,KAAKuV,MAAMuI,GAC/BL,oBAAqB,EACrBC,uBAAwB,GAIhC,IAAMF,EAAqBxd,KAAKuV,MAAMvV,KAAKC,IAnEvB,GAmEgDD,KAAK4S,MAAM5E,EAAc8P,EAA4BzB,KAGnHoB,GAAuBK,EAA4BN,IAAuBnB,EAAarO,GACvF0P,EAA0BlM,EAAiBiM,EACjD,MAAO,CACHH,sBAAuBtd,KAAKuV,MAAM+H,GAClCC,iBAAkBA,EAClBC,mBAAoBxd,KAAKuV,MAAMiI,GAC/BC,oBAAqBA,EACrBC,uBAAwB1d,KAAKuV,MAAMmI,GAE3C,KAAChM,CAAA,CA9EsB,E,uPCQrBnO,EAAI+F,EAAI/F,EACRwa,EAAkC,8BAClCC,EAAkB,oBAAAA,KAAAzkB,EAAAA,EAAAA,GAAA,KAAAykB,EAAA,CA8BnB,OA9BmB7jB,EAAAA,EAAAA,GAAA6jB,EAAA,EAAA5jB,IAAA,aAAAkG,IACpB,WAAmB,OAAOyd,CAAiC,GAAC,CAAA3jB,IAAA,iBAAAC,MAC5D,SAAejB,GACX,IAAM6kB,EAAOld,OAAO7G,OAAO,MAK3B,OAJA+jB,EAAKC,KAAO9kB,EACZ6kB,EAAKE,KAAO7U,EAAIhG,OAAOlK,EAAWmK,EAAE,iBACpC0a,EAAKG,OAAS9U,EAAIhG,OAAOlK,EAAWmK,EAAE,mBACtC0a,EAAKI,eAAiB/U,EAAIhG,OAAOlK,EAAWmK,EAAE,4BACvC0a,CACX,GAAC,CAAA7jB,IAAA,gBAAAC,MACD,SAAcP,EAAS6a,EAAO2J,GAC1B,IAAML,EAAOK,EACPH,EAAOrkB,EAAQqkB,KACfC,EAAStkB,EAAQskB,OACjBC,EAAiBvkB,EAAQukB,eACzBE,EAAazkB,EAAQykB,WAC3BN,EAAKE,KAAKtX,YAAcsX,EACxBF,EAAKG,OAAOvX,YAAgBuX,GAAkB,GAC9CH,EAAKI,eAAeG,UAAcH,GAAkC,GAEhEE,EACAN,EAAKC,KAAKzjB,UAAUC,IAAI,mBAIxBujB,EAAKC,KAAKzjB,UAAUU,OAAO,kBAEnC,GAAC,CAAAf,IAAA,kBAAAC,MACD,SAAgBokB,GACZ,KACHT,CAAA,CA9BmB,GAgCXU,EAAa,SAAA1lB,IAAAC,EAAAA,EAAAA,GAAAylB,EAAA1lB,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAulB,GACtB,SAAAA,EAAYrlB,EAASslB,EAAUC,EAAqBC,EAAQC,GAAkB,IAAAxlB,EAiCpD,OAjCoDC,EAAAA,EAAAA,GAAA,KAAAmlB,IAC1EplB,EAAAJ,EAAAM,KAAA,OACKH,QAAU,GACfC,EAAKylB,kBAAoB,EACzBzlB,EAAK0lB,aAAc,EACnB1lB,EAAK2lB,aAAc,EACnB3lB,EAAK4lB,SAAU,EACf5lB,EAAKwR,YAAa,EAClBxR,EAAKulB,OAASA,EACdvlB,EAAKwlB,iBAAmBA,GAAoB/d,OAAO7G,OAAO,MACL,kBAA1CZ,EAAKwlB,iBAAiBK,gBAC7B7lB,EAAKwlB,iBAAiBK,gBAAkBT,EAAcU,uCAEjD9lB,EAAKwlB,iBAAiBK,gBAAkB,IAC7C7lB,EAAKwlB,iBAAiBK,gBAAkB,GAE5C7lB,EAAK+lB,cAAgB9kB,SAASC,cAAc,UAE5ClB,EAAK+lB,cAAc5W,UAAY,uDACgB,kBAApCnP,EAAKwlB,iBAAiBQ,WAC7BhmB,EAAK+lB,cAAc1kB,aAAa,aAAcrB,EAAKwlB,iBAAiBQ,WAEnB,kBAA1ChmB,EAAKwlB,iBAAiBS,iBAC7BjmB,EAAK+lB,cAAc1kB,aAAa,mBAAoBrB,EAAKwlB,iBAAiBS,iBAE9EjmB,EAAKkmB,aAAe,IAAItjB,EAAAA,GACxB5C,EAAKK,UAAUL,EAAKkmB,cACpBlmB,EAAKmmB,oBACLnmB,EAAKomB,wBAAwBd,GAC7BtlB,EAAKqlB,SAAWA,GAAY,EACxBtlB,GACAC,EAAKqmB,WAAWtmB,EAASslB,GAE7BrlB,EAAKsmB,iBAAiBtmB,CAC1B,CAsvBC,OArvBDa,EAAAA,EAAAA,GAAAukB,EAAA,EAAAtkB,IAAA,YAAAC,MACA,WACI,OAAO,EACX,GAAC,CAAAD,IAAA,gBAAAC,MACD,WACI,OAAO0jB,CACX,GAAC,CAAA3jB,IAAA,0BAAAC,MACD,SAAwBukB,GAEpBtkB,KAAKskB,oBAAsBA,EAC3BtkB,KAAKulB,wBAA0BvW,EAAI/F,EAAE,yCAErCjJ,KAAKulB,wBAAwBplB,UAAUC,IAAI,sCAE3CJ,KAAKwlB,qBAAuBxW,EAAIhG,OAAOhJ,KAAKulB,wBAAyBtc,EAAE,6BAEvE,IAAMwc,EAAuBzW,EAAIhG,OAAOhJ,KAAKulB,wBAAyBtc,EAAE,iDAClEyc,EAAuB1W,EAAIhG,OAAOyc,EAAsBxc,EAAE,uBAChEjJ,KAAK2lB,oBAAsB1lB,SAASC,cAAc,QAClDF,KAAK2lB,oBAAoBxX,UAAY,4BACrCa,EAAIhG,OAAO0c,EAAsB1lB,KAAK2lB,qBAEtC3lB,KAAK4lB,kBAAoB,EAEzB5lB,KAAK6lB,aAAe7W,EAAI5C,iBAAiBpM,KAAKulB,yBAE9CvlB,KAAKulB,wBAAwBllB,aAAa,YAAa,QACvDL,KAAKX,UAAU2P,EAAI2D,sBAAsB3S,KAAKulB,wBAAyBvW,EAAIvH,UAAUqe,YAAY,SAAC3hB,GAC9F6K,EAAIhE,YAAYC,KAAK9G,GAAG,EAC5B,IACJ,GAAC,CAAArE,IAAA,oBAAAC,MACD,WAAoB,IA6BZgmB,EA7BY5kB,EAAA,KAEhBnB,KAAKX,UAAU2P,EAAIC,8BAA8BjP,KAAK+kB,cAAe,UAAU,SAAC5gB,GAC5EhD,EAAKkjB,SAAWlgB,EAAEiC,OAAO4f,cACzB7kB,EAAK+jB,aAAaphB,KAAK,CACnBuW,MAAOlW,EAAEiC,OAAO4f,cAChB3B,SAAUlgB,EAAEiC,OAAOrG,QAEjBoB,EAAKpC,QAAQoC,EAAKkjB,WAAeljB,EAAKpC,QAAQoC,EAAKkjB,UAAUR,OAC/D1iB,EAAK4jB,cAAckB,MAAQ9kB,EAAKpC,QAAQoC,EAAKkjB,UAAUR,KAE/D,KAGA7jB,KAAKX,UAAU2P,EAAI2D,sBAAsB3S,KAAK+kB,cAAe/V,EAAIvH,UAAUye,OAAO,SAAC/hB,GAC/E6K,EAAIhE,YAAYC,KAAK9G,GACjBhD,EAAKqP,WACLrP,EAAKglB,oBAAmB,GAGxBhlB,EAAKilB,oBAEb,KACApmB,KAAKX,UAAU2P,EAAI2D,sBAAsB3S,KAAK+kB,cAAe/V,EAAIvH,UAAU4e,YAAY,SAACliB,GACpF6K,EAAIhE,YAAYC,KAAK9G,EACzB,KAKAnE,KAAKX,UAAU2P,EAAI2D,sBAAsB3S,KAAK+kB,cAAe,cAAc,SAAC5gB,GACxE4hB,EAA4B5kB,EAAKqP,UACrC,KACAxQ,KAAKX,UAAU2P,EAAI2D,sBAAsB3S,KAAK+kB,cAAe,YAAY,SAAC5gB,GACtE6K,EAAIhE,YAAYC,KAAK9G,GACjB4hB,EACA5kB,EAAKglB,oBAAmB,GAGxBhlB,EAAKilB,oBAEb,KAEApmB,KAAKX,UAAU2P,EAAI2D,sBAAsB3S,KAAK+kB,cAAe/V,EAAIvH,UAAU6e,UAAU,SAACniB,GAClF,IAAMrC,EAAQ,IAAIykB,EAAAA,EAAsBpiB,GACpCqiB,GAAe,EAEfrd,EAAAA,GACsB,KAAlBrH,EAAM2kB,SAA4D,KAAlB3kB,EAAM2kB,SAA0D,KAAlB3kB,EAAM2kB,SAAwD,IAAlB3kB,EAAM2kB,UAChJD,GAAe,IAIG,KAAlB1kB,EAAM2kB,SAA0C3kB,EAAMoK,QAA4B,KAAlBpK,EAAM2kB,SAAwC3kB,EAAMoK,QAA4B,KAAlBpK,EAAM2kB,SAAwD,IAAlB3kB,EAAM2kB,WAChLD,GAAe,GAGnBA,IACArlB,EAAKilB,qBACLpX,EAAIhE,YAAYC,KAAK9G,GAAG,GAEhC,IACJ,GAAC,CAAArE,IAAA,cAAAkG,IACD,WACI,OAAOhG,KAAKklB,aAAapjB,KAC7B,GAAC,CAAAhC,IAAA,aAAAC,MACD,SAAWhB,EAASslB,GAAU,IAAAzZ,EAAA,KACrB8b,EAAAA,GAAc1mB,KAAKjB,QAASA,KAC7BiB,KAAKjB,QAAUA,EACfiB,KAAK+kB,cAAchmB,QAAQmG,OAAS,EACpClF,KAAK0kB,aAAc,EACnB1kB,KAAK2mB,6BAA0B5lB,EAC/Bf,KAAKjB,QAAQ6nB,SAAQ,SAACC,EAAQxM,GAC1BzP,EAAKma,cAAc3kB,IAAIwK,EAAKkc,aAAaD,EAAOhD,KAAMxJ,EAAOwM,EAAO5C,aAClC,kBAAvB4C,EAAOE,cACdnc,EAAK8Z,aAAc,EAE3B,UAEa3jB,IAAbsjB,IACArkB,KAAKgnB,OAAO3C,GAEZrkB,KAAKykB,kBAAoBzkB,KAAKqkB,SAEtC,GAAC,CAAAvkB,IAAA,iBAAAC,MACD,WACI,IAAIoN,EAGuB,QAA1BA,EAAKnN,KAAKinB,kBAA+B,IAAP9Z,GAAyBA,EAAG+Z,OAAO,EAAGlnB,KAAKinB,WAAW/hB,OAAQlF,KAAKjB,QAC1G,GAAC,CAAAe,IAAA,SAAAC,MACD,SAAOsa,GACCA,GAAS,GAAKA,EAAQra,KAAKjB,QAAQmG,OACnClF,KAAKqkB,SAAWhK,EAEXA,EAAQra,KAAKjB,QAAQmG,OAAS,EAGnClF,KAAKgnB,OAAOhnB,KAAKjB,QAAQmG,OAAS,GAE7BlF,KAAKqkB,SAAW,IACrBrkB,KAAKqkB,SAAW,GAEpBrkB,KAAK+kB,cAAciB,cAAgBhmB,KAAKqkB,SAClCrkB,KAAKjB,QAAQiB,KAAKqkB,WAAerkB,KAAKjB,QAAQiB,KAAKqkB,UAAUR,OAC/D7jB,KAAK+kB,cAAckB,MAAQjmB,KAAKjB,QAAQiB,KAAKqkB,UAAUR,KAE/D,GAAC,CAAA/jB,IAAA,QAAAC,MACD,WACQC,KAAK+kB,gBACL/kB,KAAK+kB,cAAcoC,SAAW,EAC9BnnB,KAAK+kB,cAAcqC,QAE3B,GAAC,CAAAtnB,IAAA,OAAAC,MACD,WACQC,KAAK+kB,gBACL/kB,KAAK+kB,cAAcoC,UAAY,EAC/BnnB,KAAK+kB,cAAcsC,OAE3B,GAAC,CAAAvnB,IAAA,eAAAC,MACD,SAAaunB,GACTtnB,KAAK+kB,cAAcoC,SAAWG,EAAY,GAAK,CACnD,GAAC,CAAAxnB,IAAA,SAAAC,MACD,SAAOjB,GACHkB,KAAKlB,UAAYA,EACjBA,EAAUqB,UAAUC,IAAI,oBACxBtB,EAAUwB,YAAYN,KAAK+kB,eAC3B/kB,KAAKunB,oBACT,GAAC,CAAAznB,IAAA,iBAAAC,MACD,WACI,IAAMynB,EAAU,GAEZxnB,KAAKukB,OAAOkD,qBACZD,EAAQjJ,KAAK,yIAADrV,OAA0IlJ,KAAKukB,OAAOkD,oBAAmB,mBAErLznB,KAAKukB,OAAOmD,qBACZF,EAAQjJ,KAAK,8HAADrV,OAA+HlJ,KAAKukB,OAAOmD,oBAAmB,mBAE1K1nB,KAAKukB,OAAOoD,0BACZH,EAAQjJ,KAAK,4JAADrV,OAA6JlJ,KAAKukB,OAAOoD,yBAAwB,QAE7M3nB,KAAKukB,OAAOqD,kBAAoB5nB,KAAKukB,OAAOsD,cAAgB7nB,KAAKukB,OAAOsD,eAAiB7nB,KAAKukB,OAAOqD,kBACrGJ,EAAQjJ,KAAK,6DAADrV,OAA8DlJ,KAAKukB,OAAOsD,aAAY,QAClGL,EAAQjJ,KAAK,uGAADrV,OAAwGlJ,KAAKukB,OAAOsD,aAAY,QAC5IL,EAAQjJ,KAAK,6GAADrV,OAA8GlJ,KAAKukB,OAAOsD,aAAY,SAE7I7nB,KAAKukB,OAAOuD,mBACjBN,EAAQjJ,KAAK,uGAADrV,OAAwGlJ,KAAKukB,OAAOuD,iBAAgB,QAChJN,EAAQjJ,KAAK,6GAADrV,OAA8GlJ,KAAKukB,OAAOuD,iBAAgB,SAGtJ9nB,KAAKukB,OAAOwD,qBACZP,EAAQjJ,KAAK,gKAADrV,OAAiKlJ,KAAKukB,OAAOwD,oBAAmB,mBAG5M/nB,KAAKukB,OAAOyD,qBACZR,EAAQjJ,KAAK,2KAADrV,OAA4KlJ,KAAKukB,OAAOyD,oBAAmB,mBAGvNhoB,KAAKukB,OAAO0D,kBACZT,EAAQjJ,KAAK,6IAADrV,OAA8IlJ,KAAKukB,OAAO0D,iBAAgB,sDAEtLjoB,KAAKukB,OAAO2D,kBACZV,EAAQjJ,KAAK,+KAADrV,OAAgLlJ,KAAKukB,OAAO2D,iBAAgB,sDAG5NV,EAAQjJ,KAAK,wOACbiJ,EAAQjJ,KAAK,sOACbve,KAAK6lB,aAAatZ,YAAcib,EAAQW,KAAK,KACjD,GAAC,CAAAroB,IAAA,qBAAAC,MACD,WACI,IAAIoN,EAAIib,EAAIC,EACNC,EAAqD,QAAvCnb,EAAKnN,KAAKukB,OAAOqD,wBAAqC,IAAPza,EAAgBA,EAAK,GAClFob,EAAqD,QAAvCH,EAAKpoB,KAAKukB,OAAOiE,wBAAqC,IAAPJ,EAAgBA,EAAK,GAClFK,EAA6C,QAAnCJ,EAAKroB,KAAKukB,OAAOsD,oBAAiC,IAAPQ,EAAgBA,EAAK,GAChFroB,KAAK+kB,cAAcvkB,MAAMC,gBAAkB6nB,EAC3CtoB,KAAK+kB,cAAcvkB,MAAMkoB,MAAQH,EACjCvoB,KAAK+kB,cAAcvkB,MAAMmoB,YAAcF,CAC3C,GAAC,CAAA3oB,IAAA,YAAAC,MACD,WACI,IAAIoN,EAAIib,EACFE,EAAqD,QAAvCnb,EAAKnN,KAAKukB,OAAOqD,wBAAqC,IAAPza,EAAgBA,EAAK,GAClFyb,EAAiB5Z,EAAI6Z,sBAAsB7oB,KAAKukB,OAAOuE,qBAAsBR,GACnFtoB,KAAK+oB,4BAA4BvoB,MAAMC,gBAAkBmoB,EACzD5oB,KAAKwlB,qBAAqBhlB,MAAMC,gBAAkBmoB,EAClD,IAAMI,EAAmD,QAAlCZ,EAAKpoB,KAAKukB,OAAO0E,mBAAgC,IAAPb,EAAgBA,EAAK,GACtFpoB,KAAKulB,wBAAwB/kB,MAAM0oB,aAAeF,EAClDhpB,KAAKulB,wBAAwB/kB,MAAM2oB,cAAgB,OACnDnpB,KAAKinB,WAAWzmB,MAAMR,KAAKukB,OAC/B,GAAC,CAAAzkB,IAAA,eAAAC,MACD,SAAaA,EAAOsa,EAAO+O,GACvB,IAAMvC,EAAS5mB,SAASC,cAAc,UAItC,OAHA2mB,EAAO9mB,MAAQA,EACf8mB,EAAOhD,KAAO9jB,EACd8mB,EAAOuC,WAAaA,EACbvC,CACX,GACA,CAAA/mB,IAAA,qBAAAC,MACA,WAAqB,IAAAgL,EAAA,KACjB/K,KAAKwlB,qBAAqBtB,UAAY,GACjClkB,KAAKskB,sBAAuBtkB,KAAKwQ,aAItCxQ,KAAKqpB,iBAAiBrpB,KAAKulB,yBAC3BvlB,KAAKspB,iBAILtpB,KAAKskB,oBAAoBiF,gBAAgB,CACrCC,UAAW,kBAAMze,EAAKga,aAAa,EACnCnR,OAAQ,SAAC9U,GAAS,OAAKiM,EAAK0e,qBAAqB3qB,GAAW,EAAK,EACjEwF,OAAQ,WACJyG,EAAK2e,sBACT,EACAC,OAAQ,WACJ5e,EAAKwa,wBAAwBplB,UAAUU,OAAO,WAC9CkK,EAAKga,cAAc5kB,UAAUU,OAAO,kBACxC,EACA+oB,eAAgB5pB,KAAK4lB,mBACtB5lB,KAAKwkB,iBAAiBqF,kBAAoB7pB,KAAKlB,eAAYiC,GAE9Df,KAAKwQ,YAAa,EAClBxQ,KAAKmmB,oBAAmB,GACxBnmB,KAAKskB,oBAAoBiF,gBAAgB,CACrCC,UAAW,kBAAMze,EAAKga,aAAa,EACnCnR,OAAQ,SAAC9U,GAAS,OAAKiM,EAAK0e,qBAAqB3qB,EAAU,EAC3DwF,OAAQ,kBAAMyG,EAAK2e,sBAAsB,EACzCC,OAAQ,WACJ5e,EAAKwa,wBAAwBplB,UAAUU,OAAO,WAC9CkK,EAAKga,cAAc5kB,UAAUU,OAAO,kBACxC,EACA+oB,eAAgB5pB,KAAK4lB,mBACtB5lB,KAAKwkB,iBAAiBqF,kBAAoB7pB,KAAKlB,eAAYiC,GAE9Df,KAAKykB,kBAAoBzkB,KAAKqkB,SAC9BrkB,KAAKwQ,YAAa,EAClBxQ,KAAK+kB,cAAc1kB,aAAa,gBAAiB,QACrD,GAAC,CAAAP,IAAA,qBAAAC,MACD,SAAmB+pB,GACV9pB,KAAKskB,qBAAwBtkB,KAAKwQ,aAGvCxQ,KAAKwQ,YAAa,EAClBxQ,KAAK+kB,cAAc1kB,aAAa,gBAAiB,SAC7CypB,GACA9pB,KAAK+kB,cAAcqC,QAEvBpnB,KAAKskB,oBAAoByF,kBAC7B,GAAC,CAAAjqB,IAAA,uBAAAC,MACD,SAAqBjB,EAAWkrB,GAAmB,IAAAzI,EAAA,KAI/C,OAHAziB,EAAUwB,YAAYN,KAAKulB,yBAE3BvlB,KAAK0pB,qBAAqBM,GACnB,CACHjlB,QAAS,WAEL,IACIjG,EAAU0N,YAAY+U,EAAKgE,wBAC/B,CACA,MAAO0E,GACH,CAER,EAER,GACA,CAAAnqB,IAAA,0BAAAC,MACA,WAA0B,IAAAmqB,EAAA,KAClBC,EAAuB,EAO3B,OANAnqB,KAAKjB,QAAQ6nB,SAAQ,SAACwD,EAAS/P,GAC3B6P,EAAKG,aAAahQ,GACd6P,EAAK1E,qBAAqB8E,aAAeH,IACzCA,EAAuBD,EAAK1E,qBAAqB8E,aAEzD,IACOH,CACX,GAAC,CAAArqB,IAAA,uBAAAC,MACD,SAAqBiqB,GAEjB,GAAIhqB,KAAK2kB,YACL,OAAO,EAKX,GAAI3kB,KAAKinB,WAAY,CAEjBjnB,KAAKulB,wBAAwBplB,UAAUC,IAAI,WAC3C,IAAMmqB,EAAiBvb,EAAIkG,uBAAuBlV,KAAK+kB,eACjDR,EAASiG,iBAAiBxqB,KAAK+kB,eAC/B0F,EAAkBC,WAAWnG,EAAOoG,iBAAiB,2BAA6BD,WAAWnG,EAAOoG,iBAAiB,8BACrHC,EAAgCxjB,OAAOyjB,YAAcN,EAAezd,IAAMyd,EAAelnB,QAAUrD,KAAKwkB,iBAAiBK,iBAAmB,GAC5IiG,EAAgCP,EAAezd,IAAMsX,EAAc2G,oCAEnEC,EAAchrB,KAAK+kB,cAAckG,YACjCC,EAAiBlrB,KAAKmrB,uBAAuBnrB,KAAK2lB,qBAClDyF,EAAqB1lB,KAAKC,IAAIulB,EAAgBxlB,KAAKuV,MAAM+P,IAAcK,WAAa,KAC1FrrB,KAAKulB,wBAAwB/kB,MAAMG,MAAQyqB,EAE3CprB,KAAKinB,WAAWqE,iBAAiB9qB,MAAM6C,OAAS,GAChDrD,KAAKinB,WAAW3iB,SAChB,IAAIinB,EAAavrB,KAAKinB,WAAWuE,cAC7BxrB,KAAK0kB,kBAAgD3jB,IAAjCf,KAAK2mB,0BACzB3mB,KAAK2mB,wBAA0B3mB,KAAKyrB,2BAExC,IAAMtB,EAAuBnqB,KAAK0kB,YAAc1kB,KAAK2mB,wBAA0B,EACzE+E,EAA4BH,EAAad,EAAkBN,EAC3DwB,EAA2BjmB,KAAK4S,OAAOsS,EAA+BH,EAAkBN,GAAwBnqB,KAAK4rB,aACrHC,EAA2BnmB,KAAK4S,OAAOwS,EAA+BL,EAAkBN,GAAwBnqB,KAAK4rB,aAK3H,GAAI5B,EAGA,QAAKO,EAAezd,IAAMyd,EAAelnB,OAAW+D,OAAOyjB,YAAc,IAClEN,EAAezd,IAAMsX,EAAc2G,qCACjCY,EAAyB,GAAOE,EAAyB,KAM9DF,EAAyBvH,EAAc0H,iCACpCD,EAAyBF,GACzB3rB,KAAKjB,QAAQmG,OAASymB,GACzB3rB,KAAK4lB,kBAAoB,EACzB5lB,KAAKulB,wBAAwB/Y,YAAYxM,KAAK+oB,6BAC9C/oB,KAAKulB,wBAAwB/Y,YAAYxM,KAAKwlB,sBAC9CxlB,KAAKulB,wBAAwBjlB,YAAYN,KAAKwlB,sBAC9CxlB,KAAKulB,wBAAwBjlB,YAAYN,KAAK+oB,6BAC9C/oB,KAAKwlB,qBAAqBrlB,UAAUU,OAAO,cAC3Cb,KAAKwlB,qBAAqBrlB,UAAUC,IAAI,mBAGxCJ,KAAK4lB,kBAAoB,EACzB5lB,KAAKulB,wBAAwB/Y,YAAYxM,KAAK+oB,6BAC9C/oB,KAAKulB,wBAAwB/Y,YAAYxM,KAAKwlB,sBAC9CxlB,KAAKulB,wBAAwBjlB,YAAYN,KAAK+oB,6BAC9C/oB,KAAKulB,wBAAwBjlB,YAAYN,KAAKwlB,sBAC9CxlB,KAAKwlB,qBAAqBrlB,UAAUU,OAAO,iBAC3Cb,KAAKwlB,qBAAqBrlB,UAAUC,IAAI,gBAGrC,GAGX,GAAKmqB,EAAezd,IAAMyd,EAAelnB,OAAW+D,OAAOyjB,YAAc,IAClEN,EAAezd,IAAMsX,EAAc2G,qCACP,IAA3B/qB,KAAK4lB,mBAAsD+F,EAAyB,GACzD,IAA3B3rB,KAAK4lB,mBAAsDiG,EAAyB,EAGxF,OADA7rB,KAAKmmB,oBAAmB,IACjB,EAIX,GAA+B,IAA3BnmB,KAAK4lB,kBAAoD,CACzD,GAAI5lB,KAAKwQ,YAAcmb,EAAyBE,EAAyB,EAIrE,OADA7rB,KAAKmmB,oBAAmB,IACjB,EAGPuF,EAA4Bd,IAC5BW,EAAcI,EAAyB3rB,KAAK4rB,YAEpD,MAEQF,EAA4BZ,IAC5BS,EAAcM,EAAyB7rB,KAAK4rB,aAyBpD,OArBA5rB,KAAKinB,WAAW3iB,OAAOinB,GACvBvrB,KAAKinB,WAAW8E,WAEZ/rB,KAAKinB,WAAW/hB,OAAS,IACzBlF,KAAKinB,WAAW+E,SAAS,CAAChsB,KAAKqkB,UAAY,IAC3CrkB,KAAKinB,WAAWgF,OAAOjsB,KAAKinB,WAAWiF,WAAW,IAAM,IAExDlsB,KAAK0kB,aAEL1kB,KAAKinB,WAAWqE,iBAAiB9qB,MAAM6C,OAAUkoB,EAAad,EAAmB,KACjFzqB,KAAKulB,wBAAwB/kB,MAAM6C,OAAS,IAG5CrD,KAAKulB,wBAAwB/kB,MAAM6C,OAAUkoB,EAAad,EAAmB,KAEjFzqB,KAAKqqB,aAAarqB,KAAKqkB,UACvBrkB,KAAKulB,wBAAwB/kB,MAAMG,MAAQyqB,EAE3CprB,KAAK+oB,4BAA4B1oB,aAAa,WAAY,KAC1DL,KAAK+kB,cAAc5kB,UAAUC,IAAI,mBACjCJ,KAAKulB,wBAAwBplB,UAAUC,IAAI,oBACpC,CACX,CAEI,OAAO,CAEf,GAAC,CAAAN,IAAA,yBAAAC,MACD,SAAuBjB,GACnB,IAAIqtB,EAAe,EACnB,GAAIrtB,EAAW,CACX,IAAIstB,EAAU,EACVC,EAAgB,EACpBrsB,KAAKjB,QAAQ6nB,SAAQ,SAACC,EAAQxM,GAC1B,IAAMiS,EAAiBzF,EAAO/C,OAAS+C,EAAO/C,OAAO5e,OAAS,EACxDqnB,EAAyB1F,EAAO9C,eAAiB8C,EAAO9C,eAAe7e,OAAS,EAChFsnB,EAAM3F,EAAOhD,KAAK3e,OAASonB,EAAeC,EAC5CC,EAAMH,IACND,EAAU/R,EACVgS,EAAgBG,EAExB,IACA1tB,EAAUyN,YAAcvM,KAAKjB,QAAQqtB,GAASvI,MAAU7jB,KAAKjB,QAAQqtB,GAASrI,eAAkB/jB,KAAKjB,QAAQqtB,GAASrI,eAAiB,IAAO,IAC9IoI,EAAend,EAAIyd,cAAc3tB,EACrC,CACA,OAAOqtB,CACX,GAAC,CAAArsB,IAAA,mBAAAC,MACD,SAAiB6d,GAAQ,IAAA8O,EAAA,KAErB,IAAI1sB,KAAKinB,WAAT,CAIAjnB,KAAK+oB,4BAA8B/Z,EAAIhG,OAAO4U,EAAQ3U,EAAE,wCACxDjJ,KAAK2sB,aAAe,IAAIjJ,EACxB1jB,KAAKinB,WAAa,IAAI2F,EAAAA,GAAK,kBAAmB5sB,KAAK+oB,4BAA6B/oB,KAAM,CAACA,KAAK2sB,cAAe,CACvGjR,YAAY,EACZmR,mBAAoB,EACpBC,iBAAiB,EACjBC,cAAc,EACdC,sBAAuB,CACnBC,aAAc,SAAAztB,GACV,IAAI0tB,EAAQ1tB,EAAQqkB,KAUpB,OATIrkB,EAAQskB,SACRoJ,GAAS,KAAJhkB,OAAS1J,EAAQskB,SAEtBtkB,EAAQukB,iBACRmJ,GAAS,KAAJhkB,OAAS1J,EAAQukB,iBAEtBvkB,EAAQunB,cACRmG,GAAS,KAAJhkB,OAAS1J,EAAQunB,cAEnBmG,CACX,EACAC,mBAAoB,kBAAMC,EAAAA,EAAAA,IAAS,CAAEttB,IAAK,YAAautB,QAAS,CAAC,gDAAkD,aAAa,EAChIC,QAAS,kBAAMnkB,EAAAA,GAAc,GAAK,QAAQ,EAC1CokB,cAAe,iBAAM,SAAS,KAGlCvtB,KAAKwkB,iBAAiBQ,YACtBhlB,KAAKinB,WAAWjC,UAAYhlB,KAAKwkB,iBAAiBQ,WAGtD,IAAMwI,EAAYxtB,KAAKX,UAAU,IAAI8H,EAAAA,EAAWnH,KAAK+oB,4BAA6B,YAC5E0E,EAA0B9pB,EAAAA,GAAM+pB,MAAMF,EAAU1rB,OACjD6rB,QAAO,kBAAMjB,EAAKzF,WAAW/hB,OAAS,CAAC,IACvC0oB,KAAI,SAAAzpB,GAAC,OAAI,IAAIoiB,EAAAA,EAAsBpiB,EAAE,IAC1CnE,KAAKX,UAAUouB,EAAwBE,QAAO,SAAAxpB,GAAC,OAAkB,IAAdA,EAAEsiB,OAAa,IAAsBoH,IAAG,SAAA1pB,GAAC,OAAIuoB,EAAKoB,QAAQ3pB,EAAE,GAAEnE,OACjHA,KAAKX,UAAUouB,EAAwBE,QAAO,SAAAxpB,GAAC,OAAkB,IAAdA,EAAEsiB,OAAa,IAAoBoH,IAAG,SAAA1pB,GAAC,OAAIuoB,EAAKoB,QAAQ3pB,EAAE,GAAEnE,OAC/GA,KAAKX,UAAUouB,EAAwBE,QAAO,SAAAxpB,GAAC,OAAkB,IAAdA,EAAEsiB,OAAa,IAAuBoH,IAAG,SAAA1pB,GAAC,OAAIuoB,EAAKqB,SAAS5pB,EAAE,GAAEnE,OACnHA,KAAKX,UAAUouB,EAAwBE,QAAO,SAAAxpB,GAAC,OAAkB,KAAdA,EAAEsiB,OAAc,IAAwBoH,IAAG,SAAA1pB,GAAC,OAAIuoB,EAAKsB,UAAU7pB,EAAE,GAAEnE,OACtHA,KAAKX,UAAUouB,EAAwBE,QAAO,SAAAxpB,GAAC,OAAkB,KAAdA,EAAEsiB,OAAc,IAA0BoH,IAAG,SAAA1pB,GAAC,OAAIuoB,EAAKuB,YAAY9pB,EAAE,GAAEnE,OAC1HA,KAAKX,UAAUouB,EAAwBE,QAAO,SAAAxpB,GAAC,OAAkB,KAAdA,EAAEsiB,OAAc,IAAyBoH,GAAG7tB,KAAKkuB,WAAYluB,OAChHA,KAAKX,UAAUouB,EAAwBE,QAAO,SAAAxpB,GAAC,OAAkB,KAAdA,EAAEsiB,OAAc,IAAuBoH,GAAG7tB,KAAKmuB,SAAUnuB,OAC5GA,KAAKX,UAAUouB,EAAwBE,QAAO,SAAAxpB,GAAC,OAAkB,KAAdA,EAAEsiB,OAAc,IAAqBoH,GAAG7tB,KAAKouB,OAAQpuB,OACxGA,KAAKX,UAAUouB,EAAwBE,QAAO,SAAAxpB,GAAC,OAAkB,KAAdA,EAAEsiB,OAAc,IAAoBoH,GAAG7tB,KAAKquB,MAAOruB,OACtGA,KAAKX,UAAUouB,EAAwBE,QAAO,SAAAxpB,GAAC,OAAKA,EAAEsiB,SAAW,IAA2BtiB,EAAEsiB,SAAW,IAA2BtiB,EAAEsiB,SAAW,IAA8BtiB,EAAEsiB,SAAW,GAA+B,IAAEoH,GAAG7tB,KAAKsuB,YAAatuB,OAElPA,KAAKX,UAAU2P,EAAI2D,sBAAsB3S,KAAKinB,WAAWqE,iBAAkBtc,EAAIvH,UAAU8mB,YAAY,SAAApqB,GAAC,OAAIuoB,EAAK3kB,YAAY5D,EAAE,KAC7HnE,KAAKX,UAAUW,KAAKinB,WAAWuH,aAAY,SAAArqB,GAAC,MAAuB,qBAAZA,EAAEkW,OAAyBqS,EAAKzF,WAAW+E,SAAS,CAAC7nB,EAAEkW,OAAO,KACrHra,KAAKX,UAAUW,KAAKinB,WAAWwH,kBAAiB,SAAAtqB,GAAC,OAAIuoB,EAAKgC,YAAYvqB,EAAE,KACxEnE,KAAKX,UAAU2P,EAAI2D,sBAAsB3S,KAAKulB,wBAAyBvW,EAAIvH,UAAUknB,WAAW,SAAAxqB,GACvFuoB,EAAKlc,aAAcxB,EAAI4f,WAAWzqB,EAAE0qB,cAAenC,EAAKnH,0BAG7DmH,EAAKoC,YACT,KACA9uB,KAAKinB,WAAWqE,iBAAiBjrB,aAAa,aAAcL,KAAKwkB,iBAAiBQ,WAAa,IAC/FhlB,KAAKinB,WAAWqE,iBAAiBjrB,aAAa,gBAAiB,QAC/DL,KAAK+uB,WA1DL,CA2DJ,GAGA,CAAAjvB,IAAA,cAAAC,MACA,SAAYoE,GACR,GAAKnE,KAAKinB,WAAW/hB,OAArB,CAGA8J,EAAIhE,YAAYC,KAAK9G,GACrB,IAAMiC,EAASjC,EAAEiC,OACjB,GAAKA,IAIDA,EAAOjG,UAAUiB,SAAS,UAA9B,CAGA,IAAM4tB,EAAiB5oB,EAAO6oB,QAAQ,oBACtC,GAAKD,EAAL,CAGA,IAAM3U,EAAQ9X,OAAOysB,EAAeE,aAAa,eAC3C9F,EAAW4F,EAAe7uB,UAAUiB,SAAS,mBAE/CiZ,GAAS,GAAKA,EAAQra,KAAKjB,QAAQmG,SAAWkkB,IAC9CppB,KAAKqkB,SAAWhK,EAChBra,KAAKgnB,OAAOhnB,KAAKqkB,UACjBrkB,KAAKinB,WAAW+E,SAAS,CAAChsB,KAAKqkB,WAC/BrkB,KAAKinB,WAAWgF,OAAOjsB,KAAKinB,WAAWiF,WAAW,IAE9ClsB,KAAKqkB,WAAarkB,KAAKykB,oBAEvBzkB,KAAKykB,kBAAoBzkB,KAAKqkB,SAC9BrkB,KAAKklB,aAAaphB,KAAK,CACnBuW,MAAOra,KAAK+kB,cAAciB,cAC1B3B,SAAUrkB,KAAKjB,QAAQiB,KAAKqkB,UAAUR,OAEpC7jB,KAAKjB,QAAQiB,KAAKqkB,WAAerkB,KAAKjB,QAAQiB,KAAKqkB,UAAUR,OAC/D7jB,KAAK+kB,cAAckB,MAAQjmB,KAAKjB,QAAQiB,KAAKqkB,UAAUR,OAG/D7jB,KAAKmmB,oBAAmB,GArB5B,CAJA,CATA,CAoCJ,GACA,CAAArmB,IAAA,aAAAC,MACA,WACQC,KAAK4kB,UAGL5kB,KAAKqkB,WAAarkB,KAAKykB,mBAEvBzkB,KAAKgnB,OAAOhnB,KAAKykB,mBAErBzkB,KAAKmmB,oBAAmB,GAC5B,GAAC,CAAArmB,IAAA,4BAAAC,MACD,SAA0B8jB,EAAMsL,GAC5B,IAYMC,GAAWC,EAAAA,EAAAA,IAAe,CAAEtvB,MAAO8jB,EAAMyL,mBAAmB,GAAQ,CAAEH,cAAAA,IAG5E,OAFAC,EAAS5vB,QAAQW,UAAUC,IAAI,mCAbD,SAAxBmvB,EAAyB/vB,GAC3B,IAAK,IAAIqH,EAAI,EAAGA,EAAIrH,EAAQgwB,WAAWtqB,OAAQ2B,IAAK,CAChD,IAAM4oB,EAAQjwB,EAAQgwB,WAAW1U,KAAKjU,GAEtB,SADA4oB,EAAMC,SAAWD,EAAMC,QAAQC,eAE3CnwB,EAAQgN,YAAYijB,GAGpBF,EAAsBE,EAE9B,CACJ,CAGAF,CAAsBH,EAAS5vB,SACxB4vB,EAAS5vB,OACpB,GACA,CAAAM,IAAA,cAAAC,MACA,SAAYoE,GAEHnE,KAAKwQ,YAAexQ,KAAK0kB,aAG9B1kB,KAAKqqB,aAAalmB,EAAEyrB,QAAQ,GAChC,GAAC,CAAA9vB,IAAA,eAAAC,MACD,SAAaimB,GACT,IAAI7Y,EAAIib,EACRpoB,KAAKwlB,qBAAqBtB,UAAY,GACtC,IAAM2C,EAAS7mB,KAAKjB,QAAQinB,GACtBe,EAA4F,QAA7E5Z,EAAgB,OAAX0Z,QAA8B,IAAXA,OAAoB,EAASA,EAAOE,mBAAgC,IAAP5Z,EAAgBA,EAAK,GACzH0iB,EAAgH,QAAvFzH,EAAgB,OAAXvB,QAA8B,IAAXA,OAAoB,EAASA,EAAOgJ,6BAA0C,IAAPzH,GAAgBA,EAC9I,GAAIrB,EAAa,CACb,GAAI8I,EAAuB,CACvB,IAAMV,EAAgBtI,EAAOiJ,iCAC7B9vB,KAAKwlB,qBAAqBllB,YAAYN,KAAK+vB,0BAA0BhJ,EAAaoI,GACtF,MAEInvB,KAAKwlB,qBAAqBtB,UAAY6C,EAE1C/mB,KAAKwlB,qBAAqBhlB,MAAMwvB,QAAU,OAC9C,MAEIhwB,KAAKwlB,qBAAqBhlB,MAAMwvB,QAAU,OAG9ChwB,KAAK2kB,aAAc,EACnB3kB,KAAKskB,oBAAoBhgB,SACzBtE,KAAK2kB,aAAc,CACvB,GAEA,CAAA7kB,IAAA,WAAAC,MACA,SAASoE,GACL6K,EAAIhE,YAAYC,KAAK9G,GAErBnE,KAAKgnB,OAAOhnB,KAAKykB,mBACjBzkB,KAAKmmB,oBAAmB,EAC5B,GACA,CAAArmB,IAAA,UAAAC,MACA,SAAQoE,GACJ6K,EAAIhE,YAAYC,KAAK9G,GAEjBnE,KAAKqkB,WAAarkB,KAAKykB,oBACvBzkB,KAAKykB,kBAAoBzkB,KAAKqkB,SAC9BrkB,KAAKklB,aAAaphB,KAAK,CACnBuW,MAAOra,KAAK+kB,cAAciB,cAC1B3B,SAAUrkB,KAAKjB,QAAQiB,KAAKqkB,UAAUR,OAEpC7jB,KAAKjB,QAAQiB,KAAKqkB,WAAerkB,KAAKjB,QAAQiB,KAAKqkB,UAAUR,OAC/D7jB,KAAK+kB,cAAckB,MAAQjmB,KAAKjB,QAAQiB,KAAKqkB,UAAUR,OAG/D7jB,KAAKmmB,oBAAmB,EAC5B,GACA,CAAArmB,IAAA,cAAAC,MACA,SAAYoE,GACR,GAAInE,KAAKqkB,SAAWrkB,KAAKjB,QAAQmG,OAAS,EAAG,CACzC8J,EAAIhE,YAAYC,KAAK9G,GAAG,GAExB,IAAM8rB,EAAqBjwB,KAAKjB,QAAQiB,KAAKqkB,SAAW,GAAGJ,WAC3D,GAAIgM,GAAsBjwB,KAAKjB,QAAQmG,OAASlF,KAAKqkB,SAAW,EAC5DrkB,KAAKqkB,UAAY,MAEhB,IAAI4L,EACL,OAGAjwB,KAAKqkB,UACT,CAEArkB,KAAKgnB,OAAOhnB,KAAKqkB,UACjBrkB,KAAKinB,WAAW+E,SAAS,CAAChsB,KAAKqkB,WAC/BrkB,KAAKinB,WAAWgF,OAAOjsB,KAAKinB,WAAWiF,WAAW,GACtD,CACJ,GAAC,CAAApsB,IAAA,YAAAC,MACD,SAAUoE,GACFnE,KAAKqkB,SAAW,IAChBrV,EAAIhE,YAAYC,KAAK9G,GAAG,GAEOnE,KAAKjB,QAAQiB,KAAKqkB,SAAW,GAAGJ,YACjCjkB,KAAKqkB,SAAW,EAC1CrkB,KAAKqkB,UAAY,EAGjBrkB,KAAKqkB,WAGTrkB,KAAKgnB,OAAOhnB,KAAKqkB,UACjBrkB,KAAKinB,WAAW+E,SAAS,CAAChsB,KAAKqkB,WAC/BrkB,KAAKinB,WAAWgF,OAAOjsB,KAAKinB,WAAWiF,WAAW,IAE1D,GAAC,CAAApsB,IAAA,WAAAC,MACD,SAASoE,GAAG,IAAA+rB,EAAA,KACRlhB,EAAIhE,YAAYC,KAAK9G,GACrBnE,KAAKinB,WAAWkJ,oBAEhB9uB,YAAW,WACP6uB,EAAK7L,SAAW6L,EAAKjJ,WAAWiF,WAAW,GAEvCgE,EAAKnxB,QAAQmxB,EAAK7L,UAAUJ,YAAciM,EAAK7L,SAAW6L,EAAKnxB,QAAQmG,OAAS,IAChFgrB,EAAK7L,WACL6L,EAAKjJ,WAAW+E,SAAS,CAACkE,EAAK7L,YAEnC6L,EAAKjJ,WAAWgF,OAAOiE,EAAK7L,UAC5B6L,EAAKlJ,OAAOkJ,EAAK7L,SACrB,GAAG,EACP,GAAC,CAAAvkB,IAAA,aAAAC,MACD,SAAWoE,GAAG,IAAAisB,EAAA,KACVphB,EAAIhE,YAAYC,KAAK9G,GACrBnE,KAAKinB,WAAWoJ,gBAEhBhvB,YAAW,WACP+uB,EAAK/L,SAAW+L,EAAKnJ,WAAWiF,WAAW,GAEvCkE,EAAKrxB,QAAQqxB,EAAK/L,UAAUJ,YAAcmM,EAAK/L,SAAW,IAC1D+L,EAAK/L,WACL+L,EAAKnJ,WAAW+E,SAAS,CAACoE,EAAK/L,YAEnC+L,EAAKnJ,WAAWgF,OAAOmE,EAAK/L,UAC5B+L,EAAKpJ,OAAOoJ,EAAK/L,SACrB,GAAG,EACP,GAAC,CAAAvkB,IAAA,SAAAC,MACD,SAAOoE,GACH6K,EAAIhE,YAAYC,KAAK9G,GACjBnE,KAAKjB,QAAQmG,OAAS,IAG1BlF,KAAKqkB,SAAW,EACZrkB,KAAKjB,QAAQiB,KAAKqkB,UAAUJ,YAAcjkB,KAAKqkB,SAAW,GAC1DrkB,KAAKqkB,WAETrkB,KAAKinB,WAAW+E,SAAS,CAAChsB,KAAKqkB,WAC/BrkB,KAAKinB,WAAWgF,OAAOjsB,KAAKqkB,UAC5BrkB,KAAKgnB,OAAOhnB,KAAKqkB,UACrB,GAAC,CAAAvkB,IAAA,QAAAC,MACD,SAAMoE,GACF6K,EAAIhE,YAAYC,KAAK9G,GACjBnE,KAAKjB,QAAQmG,OAAS,IAG1BlF,KAAKqkB,SAAWrkB,KAAKjB,QAAQmG,OAAS,EAClClF,KAAKjB,QAAQiB,KAAKqkB,UAAUJ,YAAcjkB,KAAKqkB,SAAW,GAC1DrkB,KAAKqkB,WAETrkB,KAAKinB,WAAW+E,SAAS,CAAChsB,KAAKqkB,WAC/BrkB,KAAKinB,WAAWgF,OAAOjsB,KAAKqkB,UAC5BrkB,KAAKgnB,OAAOhnB,KAAKqkB,UACrB,GACA,CAAAvkB,IAAA,cAAAC,MACA,SAAYoE,GAGR,IAFA,IAAMmsB,EAAKC,EAAAA,GAAalF,SAASlnB,EAAEsiB,SAC/B+J,GAAe,EACV3pB,EAAI,EAAGA,EAAI7G,KAAKjB,QAAQmG,OAAS,EAAG2B,IAEzC,GADA2pB,GAAe3pB,EAAI7G,KAAKqkB,SAAW,GAAKrkB,KAAKjB,QAAQmG,OACjDlF,KAAKjB,QAAQyxB,GAAa3M,KAAK4M,OAAO,GAAGC,gBAAkBJ,IAAOtwB,KAAKjB,QAAQyxB,GAAavM,WAAY,CACxGjkB,KAAKgnB,OAAOwJ,GACZxwB,KAAKinB,WAAW+E,SAAS,CAACwE,IAC1BxwB,KAAKinB,WAAWgF,OAAOjsB,KAAKinB,WAAWiF,WAAW,IAClDld,EAAIhE,YAAYC,KAAK9G,GACrB,KACJ,CAER,GAAC,CAAArE,IAAA,UAAAC,MACD,WACIC,KAAKmmB,oBAAmB,IACxB7Y,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA6W,EAAA9c,WAAA,gBAAApI,KAAA,KACJ,KAACklB,CAAA,CAzxBqB,CAAS5iB,EAAAA,IA2xBnC4iB,EAAcU,uCAAyC,GACvDV,EAAc2G,oCAAsC,EACpD3G,EAAc0H,gCAAkC,E,eCr0BnC6E,EAAe,SAAAjyB,IAAAC,EAAAA,EAAAA,GAAAgyB,EAAAjyB,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAA8xB,GACxB,SAAAA,EAAY5xB,EAASslB,EAAUE,EAAQC,GAAkB,IAAAxlB,EAgBlB,OAhBkBC,EAAAA,EAAAA,GAAA,KAAA0xB,IACrD3xB,EAAAJ,EAAAM,KAAA,OACKmlB,SAAW,EAChBrlB,EAAKwlB,iBAAmBA,GAAoB/d,OAAO7G,OAAO,MAC1DZ,EAAKD,QAAU,GACfC,EAAK+lB,cAAgB9kB,SAASC,cAAc,UAC5ClB,EAAK+lB,cAAc5W,UAAY,oBACgB,kBAApCnP,EAAKwlB,iBAAiBQ,WAC7BhmB,EAAK+lB,cAAc1kB,aAAa,aAAcrB,EAAKwlB,iBAAiBQ,WAEnB,kBAA1ChmB,EAAKwlB,iBAAiBS,iBAC7BjmB,EAAK+lB,cAAc1kB,aAAa,mBAAoBrB,EAAKwlB,iBAAiBS,iBAE9EjmB,EAAKkmB,aAAelmB,EAAKK,UAAU,IAAIuC,EAAAA,IACvC5C,EAAKulB,OAASA,EACdvlB,EAAKmmB,oBACLnmB,EAAKqmB,WAAWtmB,EAASslB,GAAUrlB,CACvC,CA8GC,OA9GAa,EAAAA,EAAAA,GAAA8wB,EAAA,EAAA7wB,IAAA,oBAAAC,MACD,WAAoB,IAAAoB,EAAA,KAChBnB,KAAKX,UAAUsK,EAAAA,EAAQC,UAAU5J,KAAK+kB,gBACtC,CAACtd,EAAAA,EAAUuC,KAAK4c,SAAQ,SAAAgK,GACpBzvB,EAAK9B,UAAU2P,EAAI2D,sBAAsBxR,EAAK4jB,cAAe6L,GAAW,SAACzsB,GACrEhD,EAAK4jB,cAAcqC,OACvB,IACJ,IACApnB,KAAKX,UAAU2P,EAAIC,8BAA8BjP,KAAK+kB,cAAe,SAAS,SAAC5gB,GAC3E6K,EAAIhE,YAAYC,KAAK9G,GAAG,EAC5B,KACAnE,KAAKX,UAAU2P,EAAIC,8BAA8BjP,KAAK+kB,cAAe,UAAU,SAAC5gB,GAC5EhD,EAAK4jB,cAAckB,MAAQ9hB,EAAEiC,OAAOrG,MACpCoB,EAAK+jB,aAAaphB,KAAK,CACnBuW,MAAOlW,EAAEiC,OAAO4f,cAChB3B,SAAUlgB,EAAEiC,OAAOrG,OAE3B,KACAC,KAAKX,UAAU2P,EAAIC,8BAA8BjP,KAAK+kB,cAAe,WAAW,SAAC5gB,GAC7E,IAAI0sB,GAAa,EACb1nB,EAAAA,GACkB,KAAdhF,EAAEsiB,SAAwD,KAAdtiB,EAAEsiB,SAAsD,KAAdtiB,EAAEsiB,UACxFoK,GAAa,IAIC,KAAd1sB,EAAEsiB,SAA0CtiB,EAAE+H,QAAwB,KAAd/H,EAAEsiB,SAAoD,IAAdtiB,EAAEsiB,WAClGoK,GAAa,GAGjBA,GAEA1sB,EAAEsP,iBAEV,IACJ,GAAC,CAAA3T,IAAA,cAAAkG,IACD,WACI,OAAOhG,KAAKklB,aAAapjB,KAC7B,GAAC,CAAAhC,IAAA,aAAAC,MACD,SAAWhB,EAASslB,GAAU,IAAAzZ,EAAA,KACrB5K,KAAKjB,SAAY2nB,EAAAA,GAAc1mB,KAAKjB,QAASA,KAC9CiB,KAAKjB,QAAUA,EACfiB,KAAK+kB,cAAchmB,QAAQmG,OAAS,EACpClF,KAAKjB,QAAQ6nB,SAAQ,SAACC,EAAQxM,GAC1BzP,EAAKma,cAAc3kB,IAAIwK,EAAKkc,aAAaD,EAAOhD,KAAMxJ,EAAOwM,EAAO5C,YACxE,UAEaljB,IAAbsjB,GACArkB,KAAKgnB,OAAO3C,EAEpB,GAAC,CAAAvkB,IAAA,SAAAC,MACD,SAAOsa,GACyB,IAAxBra,KAAKjB,QAAQmG,OACblF,KAAKqkB,SAAW,EAEXhK,GAAS,GAAKA,EAAQra,KAAKjB,QAAQmG,OACxClF,KAAKqkB,SAAWhK,EAEXA,EAAQra,KAAKjB,QAAQmG,OAAS,EAGnClF,KAAKgnB,OAAOhnB,KAAKjB,QAAQmG,OAAS,GAE7BlF,KAAKqkB,SAAW,IACrBrkB,KAAKqkB,SAAW,GAEpBrkB,KAAK+kB,cAAciB,cAAgBhmB,KAAKqkB,SACnCrkB,KAAKqkB,SAAWrkB,KAAKjB,QAAQmG,QAAuD,kBAArClF,KAAKjB,QAAQiB,KAAKqkB,UAAUR,KAC5E7jB,KAAK+kB,cAAckB,MAAQjmB,KAAKjB,QAAQiB,KAAKqkB,UAAUR,KAGvD7jB,KAAK+kB,cAAckB,MAAQ,EAEnC,GAAC,CAAAnmB,IAAA,QAAAC,MACD,WACQC,KAAK+kB,gBACL/kB,KAAK+kB,cAAcoC,SAAW,EAC9BnnB,KAAK+kB,cAAcqC,QAE3B,GAAC,CAAAtnB,IAAA,OAAAC,MACD,WACQC,KAAK+kB,gBACL/kB,KAAK+kB,cAAcoC,UAAY,EAC/BnnB,KAAK+kB,cAAcsC,OAE3B,GAAC,CAAAvnB,IAAA,eAAAC,MACD,SAAaunB,GACTtnB,KAAK+kB,cAAcoC,SAAWG,EAAY,GAAK,CACnD,GAAC,CAAAxnB,IAAA,SAAAC,MACD,SAAOjB,GACHA,EAAUqB,UAAUC,IAAI,oBACxBtB,EAAUwB,YAAYN,KAAK+kB,eAC3B/kB,KAAKqlB,WAAWrlB,KAAKjB,QAASiB,KAAKqkB,UACnCrkB,KAAK8wB,aACT,GAAC,CAAAhxB,IAAA,cAAAC,MACD,WACI,IAAIoN,EAAIib,EAAIC,EAERroB,KAAK+kB,gBACL/kB,KAAK+kB,cAAcvkB,MAAMC,gBAA0D,QAAvC0M,EAAKnN,KAAKukB,OAAOqD,wBAAqC,IAAPza,EAAgBA,EAAK,GAChHnN,KAAK+kB,cAAcvkB,MAAMkoB,MAAgD,QAAvCN,EAAKpoB,KAAKukB,OAAOiE,wBAAqC,IAAPJ,EAAgBA,EAAK,GACtGpoB,KAAK+kB,cAAcvkB,MAAMmoB,YAAkD,QAAnCN,EAAKroB,KAAKukB,OAAOsD,oBAAiC,IAAPQ,EAAgBA,EAAK,GAEhH,GAAC,CAAAvoB,IAAA,eAAAC,MACD,SAAaA,EAAOsa,EAAO+O,GACvB,IAAMvC,EAAS5mB,SAASC,cAAc,UAItC,OAHA2mB,EAAO9mB,MAAQA,EACf8mB,EAAOhD,KAAO9jB,EACd8mB,EAAOuC,WAAaA,EACbvC,CACX,KAAC8J,CAAA,CAhIuB,CAASnvB,EAAAA,ICDxBuvB,EAAS,SAAAljB,IAAAlP,EAAAA,EAAAA,GAAAoyB,EAAAljB,GAAA,IAAAjP,GAAAC,EAAAA,EAAAA,GAAAkyB,GAClB,SAAAA,EAAYhyB,EAASslB,EAAUC,EAAqBC,EAAQC,GAAkB,IAAAxlB,EASnC,OATmCC,EAAAA,EAAAA,GAAA,KAAA8xB,GAC1E/xB,EAAAJ,EAAAM,KAAA,MAEIiK,EAAAA,MAAsC,OAArBqb,QAAkD,IAArBA,OAA8B,EAASA,EAAiBwM,gBACtGhyB,EAAKiyB,kBAAoB,IAAIN,EAAgB5xB,EAASslB,EAAUE,EAAQC,GAGxExlB,EAAKiyB,kBAAoB,IAAI7M,EAAcrlB,EAASslB,EAAUC,EAAqBC,EAAQC,GAE/FxlB,EAAKK,UAAUL,EAAKiyB,mBAAmBjyB,CAC3C,CAsBC,OArBDa,EAAAA,EAAAA,GAAAkxB,EAAA,EAAAjxB,IAAA,cAAAkG,IACA,WACI,OAAOhG,KAAKixB,kBAAkBC,WAClC,GAAC,CAAApxB,IAAA,aAAAC,MACD,SAAWhB,EAASslB,GAChBrkB,KAAKixB,kBAAkB5L,WAAWtmB,EAASslB,EAC/C,GAAC,CAAAvkB,IAAA,SAAAC,MACD,SAAOsa,GACHra,KAAKixB,kBAAkBjK,OAAO3M,EAClC,GAAC,CAAAva,IAAA,QAAAC,MACD,WACIC,KAAKixB,kBAAkB7J,OAC3B,GAAC,CAAAtnB,IAAA,OAAAC,MACD,WACIC,KAAKixB,kBAAkB5J,MAC3B,GAAC,CAAAvnB,IAAA,eAAAC,MACD,SAAaunB,GACTtnB,KAAKixB,kBAAkBE,aAAa7J,EACxC,GAAC,CAAAxnB,IAAA,SAAAC,MACD,SAAOjB,GACHkB,KAAKixB,kBAAkBrd,OAAO9U,EAClC,KAACiyB,CAAA,CAjCiB,C,SAAShhB,E,mFCiF3BqhB,EAKOC,E,iNA/ELC,EAAgB,CAClBC,gBAAiBC,EAAAA,GAAMC,aAErBC,EAAQ,WAoCV,SAAAA,EAAY5yB,EAAW6yB,EAAMxsB,EAAMysB,IAAY3yB,EAAAA,EAAAA,GAAA,KAAAyyB,GAC3C1xB,KAAKlB,UAAYA,EACjBkB,KAAK2xB,KAAOA,EACZ3xB,KAAK4xB,WAAaA,EAClB5xB,KAAK6xB,wBAAqB9wB,EACN,kBAAToE,GACPnF,KAAKmC,MAAQgD,EACbnF,KAAK6xB,wBAAqB9wB,EAC1BjC,EAAUqB,UAAUC,IAAI,aAGxBJ,KAAKmC,MAAQ,EACbnC,KAAK6xB,mBAAqB1sB,EAAK2sB,kBAEvC,CAOC,OAPAjyB,EAAAA,EAAAA,GAAA6xB,EAAA,EAAA5xB,IAAA,OAAAkG,IA9CD,WACI,OAAOhG,KAAKmC,KAChB,EAAC8D,IALD,SAASd,GACLnF,KAAKmC,MAAQgD,CACjB,GAAC,CAAArF,IAAA,UAAAkG,IAID,WACI,MAA0C,qBAA5BhG,KAAK6xB,kBACvB,GAAC,CAAA/xB,IAAA,aAAAC,MACD,SAAWgyB,EAAS5sB,GAChB,IAAIgI,EAAIib,EACJ2J,IAAY/xB,KAAK+xB,UAGjBA,GACA/xB,KAAKmF,MAAO6sB,EAAAA,EAAAA,IAAMhyB,KAAK6xB,mBAAoB7xB,KAAKiyB,gBAAiBjyB,KAAKkyB,iBACtElyB,KAAK6xB,wBAAqB9wB,IAG1Bf,KAAK6xB,mBAAqC,kBAAT1sB,EAAoBA,EAAOnF,KAAKmF,KACjEnF,KAAKmF,KAAO,GAEhBnF,KAAKlB,UAAUqB,UAAUiK,OAAO,UAAW2nB,GACJ,QAAtC3J,GAAMjb,EAAKnN,KAAK2xB,MAAMQ,kBAA+B,IAAP/J,GAAyBA,EAAGlpB,KAAKiO,EAAI4kB,GACxF,GAAC,CAAAjyB,IAAA,cAAAkG,IACD,WAAoB,OAAOhG,KAAK+xB,QAAU/xB,KAAK2xB,KAAKS,YAAc,CAAG,GAAC,CAAAtyB,IAAA,kBAAAkG,IACtE,WAAwB,OAAOhG,KAAK2xB,KAAKS,WAAa,GAAC,CAAAtyB,IAAA,cAAAkG,IACvD,WAAoB,OAAOhG,KAAK+xB,QAAU/xB,KAAK2xB,KAAKU,YAAc,CAAG,GAAC,CAAAvyB,IAAA,kBAAAkG,IACtE,WAAwB,OAAOhG,KAAK2xB,KAAKU,WAAa,GAAC,CAAAvyB,IAAA,WAAAkG,IACvD,WAAiB,OAAOhG,KAAK2xB,KAAKW,QAAU,GAAC,CAAAxyB,IAAA,qBAAAkG,IAC7C,WAA2B,IAAImH,EAAI,OAA+C,QAAvCA,EAAKnN,KAAK2xB,KAAKY,0BAAuC,IAAPplB,GAAgBA,CAAW,GAAC,CAAArN,IAAA,OAAAkG,IACtH,WAAa,QAAShG,KAAK2xB,KAAKa,IAAM,GAAC,CAAA1yB,IAAA,UAAAmG,IACvC,SAAYwsB,GACRzyB,KAAKlB,UAAU0B,MAAMkyB,cAAgBD,EAAU,GAAK,MACxD,GAAC,CAAA3yB,IAAA,SAAAC,MAgBD,SAAOoV,EAAQwd,GACX3yB,KAAK4yB,gBAAgBzd,GACrBnV,KAAK2xB,KAAKrtB,OAAOtE,KAAKmF,KAAMgQ,EAAQwd,EACxC,GAAC,CAAA7yB,IAAA,UAAAC,MACD,WACIC,KAAK4xB,WAAW7sB,SACpB,KAAC2sB,CAAA,CAzDS,GA2DRmB,EAAgB,SAAAC,IAAAn0B,EAAAA,EAAAA,GAAAk0B,EAAAC,GAAA,IAAAl0B,GAAAC,EAAAA,EAAAA,GAAAg0B,GAAA,SAAAA,IAAA,OAAA5zB,EAAAA,EAAAA,GAAA,KAAA4zB,GAAAj0B,EAAA6P,MAAA,KAAAxJ,UAAA,CAIjB,OAJiBpF,EAAAA,EAAAA,GAAAgzB,EAAA,EAAA/yB,IAAA,kBAAAC,MAClB,SAAgBoV,GACZnV,KAAKlB,UAAU0B,MAAMsM,IAAM,GAAH5D,OAAMiM,EAAM,MACpCnV,KAAKlB,UAAU0B,MAAM6C,OAAS,GAAH6F,OAAMlJ,KAAKmF,KAAI,KAC9C,KAAC0tB,CAAA,CAJiB,CAASnB,GAMzBqB,EAAkB,SAAAC,IAAAr0B,EAAAA,EAAAA,GAAAo0B,EAAAC,GAAA,IAAAvS,GAAA5hB,EAAAA,EAAAA,GAAAk0B,GAAA,SAAAA,IAAA,OAAA9zB,EAAAA,EAAAA,GAAA,KAAA8zB,GAAAtS,EAAAhS,MAAA,KAAAxJ,UAAA,CAInB,OAJmBpF,EAAAA,EAAAA,GAAAkzB,EAAA,EAAAjzB,IAAA,kBAAAC,MACpB,SAAgBoV,GACZnV,KAAKlB,UAAU0B,MAAMoM,KAAO,GAAH1D,OAAMiM,EAAM,MACrCnV,KAAKlB,UAAU0B,MAAMG,MAAQ,GAAHuI,OAAMlJ,KAAKmF,KAAI,KAC7C,KAAC4tB,CAAA,CAJmB,CAASrB,IAOjC,SAAWN,GACPA,EAAMA,EAAY,KAAI,GAAK,OAC3BA,EAAMA,EAAY,KAAI,GAAK,MAC9B,CAHD,CAGGA,IAAUA,EAAQ,CAAC,IAEtB,SAAWC,GAKPA,EAAO4B,WAAa,CAAEC,KAAM,cAM5B7B,EAAO8B,MADP,SAAe9Y,GAAS,MAAO,CAAE6Y,KAAM,QAAS7Y,MAAAA,EAAS,EAOzDgX,EAAO+B,KADP,SAAc/Y,GAAS,MAAO,CAAE6Y,KAAM,OAAQ7Y,MAAAA,EAAS,EAMvDgX,EAAOgC,UADP,SAAmBvB,GAAqB,MAAO,CAAEoB,KAAM,YAAapB,kBAAAA,EAAqB,CAE5F,CAvBD,CAuBGT,IAAWA,EAAS,CAAC,IA6BjB,IAAMiC,EAAS,SAAA50B,IAAAC,EAAAA,EAAAA,GAAA20B,EAAA50B,GAAA,IAAAwiB,GAAAriB,EAAAA,EAAAA,GAAAy0B,GAkDlB,SAAAA,EAAYx0B,GAAyB,IAAAE,EAC7BmO,EAAIib,EAAIC,EAAIkL,EAAIC,EADDz0B,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAChG,EAAAA,EAAAA,GAAA,KAAAq0B,IAE/Bt0B,EAAAkiB,EAAAhiB,KAAA,OACKiG,KAAO,EACZnG,EAAKy0B,YAAc,EACnBz0B,EAAK00B,iBAAc3yB,EACnB/B,EAAK20B,UAAY,GACjB30B,EAAK40B,UAAY,GACjB50B,EAAKgG,MAAQosB,EAAMyC,KACnB70B,EAAK80B,iBAAmB90B,EAAKK,UAAU,IAAIuC,EAAAA,IAC3C5C,EAAK+0B,gBAAkB/0B,EAAKK,UAAU,IAAIuC,EAAAA,IAC1C5C,EAAKg1B,uBAAwB,EAC7Bh1B,EAAKi1B,qBAAsB,EAI3Bj1B,EAAKk1B,gBAAkBl1B,EAAK80B,iBAAiBhyB,MAI7C9C,EAAKm1B,eAAiBn1B,EAAK+0B,gBAAgBjyB,MAC3C9C,EAAK6D,YAA6C,QAA9BsK,EAAKpO,EAAQ8D,mBAAgC,IAAPsK,EAAgBA,EAAK,EAC/EnO,EAAKo1B,mBAA2D,QAArChM,EAAKrpB,EAAQq1B,0BAAuC,IAAPhM,GAAgBA,EACxFppB,EAAKuzB,mBAA2D,QAArClK,EAAKtpB,EAAQwzB,0BAAuC,IAAPlK,GAAgBA,EACxFrpB,EAAKq1B,sBAAwBt1B,EAAQs1B,sBACrCr1B,EAAKwI,GAAKvH,SAASC,cAAc,OACjClB,EAAKwI,GAAGrH,UAAUC,IAAI,sBACtBpB,EAAKwI,GAAGrH,UAAUC,IAAyB,IAArBpB,EAAK6D,YAA+C,WAAa,cACvF/D,EAAUwB,YAAYtB,EAAKwI,IAC3BxI,EAAKs1B,eAAgBtrB,EAAAA,EAAAA,QAAOhK,EAAKwI,IAAIyB,EAAAA,EAAAA,GAAE,oBACvCjK,EAAKu1B,eAAgBtrB,EAAAA,EAAAA,GAAE,yBACvBjK,EAAK+S,WAAa,IAAI2O,EAAAA,GAAW,CAC7BC,oBAAoB,EACpBC,qBAAsB,IACtBC,6BAAAA,EAAAA,+BAEJ7hB,EAAKw1B,kBAAoBx1B,EAAKK,UAAU,IAAI2hB,EAAAA,GAAwBhiB,EAAKu1B,cAAe,CACpF9c,SAA+B,IAArBzY,EAAK6D,YAAuF,QAAtC0wB,EAAKx0B,EAAQ01B,2BAAwC,IAAPlB,EAAgBA,EAAK,EAAoC,EACvKhc,WAAiC,IAArBvY,EAAK6D,YAAyF,QAAtC2wB,EAAKz0B,EAAQ01B,2BAAwC,IAAPjB,EAAgBA,EAAK,EAAoC,GAC5Kx0B,EAAK+S,aAER,IAAM2iB,EAA2B11B,EAAKK,UAAU,IAAI8H,EAAAA,EAAWnI,EAAKu1B,cAAe,WAAWzyB,MA+B7F,OA9BD9C,EAAKK,UAAUq1B,GAAyB,SAAAC,GACpC,IAAMvmB,EAAWpP,EAAKw1B,kBAAkBte,oBAClC0B,EAAalS,KAAKsQ,IAAIhX,EAAKu1B,cAAc3c,WAAaxJ,EAASwJ,aAAe,OAAI7W,EAAY/B,EAAKu1B,cAAc3c,WACjH0B,EAAY5T,KAAKsQ,IAAIhX,EAAKu1B,cAAcjb,UAAYlL,EAASkL,YAAc,OAAIvY,EAAY/B,EAAKu1B,cAAcjb,eACjGvY,IAAf6W,QAA0C7W,IAAduY,GAC5Bta,EAAKw1B,kBAAkBxgB,kBAAkB,CAAE4D,WAAAA,EAAY0B,UAAAA,GAE/D,KACAta,EAAK4gB,YAAc5gB,EAAKw1B,kBAAkBnZ,SAC1Crc,EAAKK,UAAUL,EAAK4gB,aAAY,SAAAzb,GACxBA,EAAEsd,mBACFziB,EAAKu1B,cAAcjb,UAAYnV,EAAEmV,WAEjCnV,EAAEud,oBACF1iB,EAAKu1B,cAAc3c,WAAazT,EAAEyT,WAE1C,MACA5O,EAAAA,EAAAA,QAAOhK,EAAKwI,GAAIxI,EAAKw1B,kBAAkBI,cACvC51B,EAAKwB,MAAMzB,EAAQwlB,QAAU+M,GAEzBvyB,EAAQ81B,aACR71B,EAAKmG,KAAOpG,EAAQ81B,WAAW1vB,KAC/BpG,EAAQ81B,WAAWC,MAAMlO,SAAQ,SAACmO,EAAgB1a,GAC9C,IAAM2a,EAASC,EAAAA,GAAkBF,EAAehD,UAAYgD,EAAehD,QAAUgD,EAAe5vB,KAAO,CAAE+tB,KAAM,YAAapB,kBAAmBiD,EAAe5vB,MAC5JwsB,EAAOoD,EAAepD,KAC5B3yB,EAAKk2B,UAAUvD,EAAMqD,EAAQ3a,GAAO,EACxC,IAEArb,EAAKy0B,YAAcz0B,EAAK20B,UAAUwB,QAAO,SAAC3uB,EAAGK,GAAC,OAAKL,EAAIK,EAAE1B,IAAI,GAAE,GAC/DnG,EAAKo2B,mBACRp2B,CACL,CAwhBC,OAxhBAa,EAAAA,EAAAA,GAAAyzB,EAAA,EAAAxzB,IAAA,sBAAAkG,IA1HD,WAA4B,OAAOhG,KAAKqK,oBAAsB,EAACpE,IAS/D,SAAwBqE,GAAM,IACWiB,EADXG,GAAAC,EAAAA,EAAAA,GACH3L,KAAK4zB,WAAS,IAArC,IAAAloB,EAAAE,MAAAL,EAAAG,EAAAG,KAAA5H,MAAuC,CAApBsH,EAAAxL,MACNuK,KAAK/G,oBAAsB+G,CACxC,CAAC,OAAAwB,GAAAJ,EAAAvH,EAAA2H,EAAA,SAAAJ,EAAAK,GAAA,CACD/L,KAAKqK,qBAAuBC,CAChC,GACA,CAAAxK,IAAA,oBAAAkG,IAdA,WAA0B,OAAOhG,KAAK2K,kBAAoB,EAAC1E,IAmB3D,SAAsBqE,GAAM,IACamC,EADbC,GAAAf,EAAAA,EAAAA,GACD3L,KAAK4zB,WAAS,IAArC,IAAAlnB,EAAAd,MAAAa,EAAAC,EAAAb,KAAA5H,MAAuC,CAApBwI,EAAA1M,MACNuK,KAAK9G,kBAAoB8G,CACtC,CAAC,OAAAwB,GAAAY,EAAAvI,EAAA2H,EAAA,SAAAY,EAAAX,GAAA,CACD/L,KAAK2K,mBAAqBL,CAC9B,GACA,CAAAxK,IAAA,uBAAAkG,IAxBA,WAA6B,OAAOhG,KAAKg0B,qBAAuB,EAAC/tB,IA2BjE,SAAyBovB,GACjBr1B,KAAKg0B,wBAA0BqB,IAGnCr1B,KAAKg0B,sBAAwBqB,EAC7Br1B,KAAKs1B,uBACT,GACA,CAAAx1B,IAAA,qBAAAkG,IAjCA,WAA2B,OAAOhG,KAAKi0B,mBAAqB,EAAChuB,IAoC7D,SAAuBsvB,GACfv1B,KAAKi0B,sBAAwBsB,IAGjCv1B,KAAKi0B,oBAAsBsB,EAC3Bv1B,KAAKs1B,uBACT,GAAC,CAAAx1B,IAAA,QAAAC,MA8ED,SAAMwkB,GACEA,EAAOgN,gBAAgBiE,iBACvBx1B,KAAKwH,GAAGrH,UAAUU,OAAO,oBACzBb,KAAKwH,GAAGhH,MAAMi1B,eAAe,wBAG7Bz1B,KAAKwH,GAAGrH,UAAUC,IAAI,oBACtBJ,KAAKwH,GAAGhH,MAAMk1B,YAAY,qBAAsBnR,EAAOgN,gBAAgBlG,YAE/E,GACA,CAAAvrB,IAAA,UAAAC,MAQA,SAAQ4xB,EAAMxsB,GAAiD,IAA3CkV,EAAKpV,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGjF,KAAK2zB,UAAUzuB,OAAQywB,EAAU1wB,UAAAC,OAAA,EAAAD,UAAA,QAAAlE,EACzDf,KAAKk1B,UAAUvD,EAAMxsB,EAAMkV,EAAOsb,EACtC,GACA,CAAA71B,IAAA,SAAAC,MAMA,SAAOoF,EAAMwtB,GAAe,IAAAxxB,EAAA,KAClBy0B,EAAelwB,KAAKC,IAAI3F,KAAKmF,KAAMnF,KAAKyzB,aAG9C,GAFAzzB,KAAKmF,KAAOA,EACZnF,KAAK2yB,cAAgBA,EAChB3yB,KAAK0zB,YAML,CAED,IADA,IAAImC,EAAQ,EACHhvB,EAAI,EAAGA,EAAI7G,KAAK2zB,UAAUzuB,OAAQ2B,IAAK,CAC5C,IAAMiU,EAAO9a,KAAK2zB,UAAU9sB,GACtBivB,EAAa91B,KAAK0zB,YAAY7sB,GACV,kBAAfivB,EACPD,GAASC,EAGT3wB,GAAQ2V,EAAK3V,IAErB,CACA,IAAK,IAAI0B,EAAI,EAAGA,EAAI7G,KAAK2zB,UAAUzuB,OAAQ2B,IAAK,CAC5C,IAAMiU,EAAO9a,KAAK2zB,UAAU9sB,GACtBivB,EAAa91B,KAAK0zB,YAAY7sB,GACV,kBAAfivB,IACPhb,EAAK3V,MAAO6sB,EAAAA,EAAAA,IAAMtsB,KAAKuV,MAAM6a,EAAa3wB,EAAO0wB,GAAQ/a,EAAKsX,YAAatX,EAAKuX,aAExF,CACJ,KAzBuB,CACnB,IAAMzC,GAAUmG,EAAAA,EAAAA,IAAM/1B,KAAK2zB,UAAUzuB,QAC/B8wB,EAAqBpG,EAAQjC,QAAO,SAAA9mB,GAAC,OAAmC,IAA/B1F,EAAKwyB,UAAU9sB,GAAGyrB,QAAc,IACzE2D,EAAsBrG,EAAQjC,QAAO,SAAA9mB,GAAC,OAAmC,IAA/B1F,EAAKwyB,UAAU9sB,GAAGyrB,QAAc,IAChFtyB,KAAKk2B,OAAOl2B,KAAK2zB,UAAUzuB,OAAS,EAAGC,EAAOywB,OAAc70B,EAAWi1B,EAAoBC,EAC/F,CAqBAj2B,KAAKm2B,uBACLn2B,KAAKo2B,aACT,GAAC,CAAAt2B,IAAA,kBAAAC,MACD,WAAkB,IAAA6K,EAAA,KACV5K,KAAKuyB,oBAAsBvyB,KAAKyzB,YAAc,IAC9CzzB,KAAK0zB,YAAc1zB,KAAK2zB,UAAU/F,KAAI,SAAA/mB,GAAC,OAAIA,EAAE0rB,mBAAqB1rB,EAAE1B,KAAOyF,EAAK6oB,iBAAc1yB,CAAS,IAE/G,GAAC,CAAAjB,IAAA,cAAAC,MACD,SAAA+e,GAAkC,IACGuX,EADHtrB,EAAA,KAApBT,EAAIwU,EAAJxU,KAAMgsB,EAAKxX,EAALwX,MAAOC,EAAGzX,EAAHyX,IAAGC,GAAA7qB,EAAAA,EAAAA,GACP3L,KAAK2zB,WAAS,IAAjC,IAAA6C,EAAA5qB,MAAAyqB,EAAAG,EAAA3qB,KAAA5H,MAAmC,CAApBoyB,EAAAt2B,MACN0yB,SAAU,CACnB,CAAC,OAAA3mB,GAAA0qB,EAAAryB,EAAA2H,EAAA,SAAA0qB,EAAAzqB,GAAA,CACD,IAAMsO,EAAQra,KAAK4zB,UAAU6C,WAAU,SAAA3b,GAAI,OAAIA,EAAKxQ,OAASA,CAAI,IAE3DsnB,GAAa8E,EAAAA,EAAAA,KAAmB/jB,EAAAA,EAAAA,uBAAsB1S,SAAS02B,KAAM,WAAW,SAAAxyB,GAAC,OAAIyyB,EAAmB7rB,EAAK8rB,cAAcC,QAAS3yB,EAAE+H,OAAO,KAAGyG,EAAAA,EAAAA,uBAAsB1S,SAAS02B,KAAM,SAAS,kBAAMC,EAAmB7rB,EAAK8rB,cAAcC,SAAS,EAAM,KACzPF,EAAqB,SAACN,EAAOC,GAC/B,IAsBIQ,EACAC,EAvBEC,EAAQlsB,EAAK4oB,UAAU/F,KAAI,SAAA/mB,GAAC,OAAIA,EAAE1B,IAAI,IACxC+xB,EAAW30B,OAAO40B,kBAClBC,EAAW70B,OAAO80B,kBAItB,GAHItsB,EAAKqpB,qBACLmC,GAAOA,GAEPA,EAKA,GADmBlc,IAAUtP,EAAK6oB,UAAU1uB,OAAS,EACrC,CACZ,IAAMoyB,EAAWvsB,EAAK4oB,UAAUtZ,GAChC6c,GAAYI,EAASlF,YAAckF,EAASnyB,MAAQ,EACpDiyB,GAAYE,EAASjF,YAAciF,EAASnyB,MAAQ,CACxD,KACK,CACD,IAAMmyB,EAAWvsB,EAAK4oB,UAAUtZ,EAAQ,GACxC6c,GAAYI,EAASnyB,KAAOmyB,EAASjF,aAAe,EACpD+E,GAAYE,EAASnyB,KAAOmyB,EAASlF,aAAe,CACxD,CAIJ,IAAKmE,EAAK,CACN,IAAMgB,GAAYxB,EAAAA,EAAAA,IAAM1b,GAAQ,GAC1Bmd,GAAczB,EAAAA,EAAAA,IAAM1b,EAAQ,EAAGtP,EAAK4oB,UAAUzuB,QAC9CuyB,EAAaF,EAAUpC,QAAO,SAAC3uB,EAAGK,GAAC,OAAKL,GAAKuE,EAAK4oB,UAAU9sB,GAAGurB,YAAc6E,EAAMpwB,GAAG,GAAE,GACxF6wB,EAAaH,EAAUpC,QAAO,SAAC3uB,EAAGK,GAAC,OAAKL,GAAKuE,EAAK4oB,UAAU9sB,GAAGqrB,gBAAkB+E,EAAMpwB,GAAG,GAAE,GAC5F8wB,EAAsC,IAAvBH,EAAYtyB,OAAe3C,OAAO80B,kBAAoBG,EAAYrC,QAAO,SAAC3uB,EAAGK,GAAC,OAAKL,GAAKywB,EAAMpwB,GAAKkE,EAAK4oB,UAAU9sB,GAAGurB,YAAY,GAAE,GAClJwF,EAAsC,IAAvBJ,EAAYtyB,OAAe3C,OAAO40B,kBAAoBK,EAAYrC,QAAO,SAAC3uB,EAAGK,GAAC,OAAKL,GAAKywB,EAAMpwB,GAAKkE,EAAK4oB,UAAU9sB,GAAGqrB,gBAAgB,GAAE,GACtJgF,EAAWxxB,KAAKC,IAAI8xB,EAAYG,GAChCR,EAAW1xB,KAAKE,IAAI+xB,EAAcD,GAClCG,EAAkB9sB,EAAK+sB,mBAAmBP,GAC1CQ,EAAiBhtB,EAAK+sB,mBAAmBN,GAC/C,GAA+B,kBAApBK,EAA8B,CACrC,IAAMP,EAAWvsB,EAAK4oB,UAAUkE,GAC1BG,EAAWtyB,KAAK4S,MAAMgf,EAASrF,gBAAkB,GACvD8E,EAAa,CACT1c,MAAOwd,EACPI,WAAYX,EAASvF,QAAUmF,EAAWc,EAAWd,EAAWc,EAChE7yB,KAAMmyB,EAASnyB,KAEvB,CACA,GAA8B,kBAAnB4yB,EAA6B,CACpC,IAAMT,EAAWvsB,EAAK4oB,UAAUoE,GAC1BC,EAAWtyB,KAAK4S,MAAMgf,EAASrF,gBAAkB,GACvD+E,EAAY,CACR3c,MAAO0d,EACPE,WAAYX,EAASvF,QAAUqF,EAAWY,EAAWZ,EAAWY,EAChE7yB,KAAMmyB,EAASnyB,KAEvB,CACJ,CACA4F,EAAK8rB,cAAgB,CAAEP,MAAAA,EAAOQ,QAASR,EAAOjc,MAAAA,EAAO4c,MAAAA,EAAOC,SAAAA,EAAUE,SAAAA,EAAUb,IAAAA,EAAKQ,WAAAA,EAAYC,UAAAA,EAAWpF,WAAAA,EAChH,EACAgF,EAAmBN,EAAOC,EAC9B,GAAC,CAAAz2B,IAAA,eAAAC,MACD,SAAAm4B,GAA0B,IAAXpB,EAAOoB,EAAPpB,QACXqB,EAAgFn4B,KAAK62B,cAA7Exc,EAAK8d,EAAL9d,MAAOic,EAAK6B,EAAL7B,MAAOW,EAAKkB,EAALlB,MAAOV,EAAG4B,EAAH5B,IAAKW,EAAQiB,EAARjB,SAAUE,EAAQe,EAARf,SAAUL,EAAUoB,EAAVpB,WAAYC,EAASmB,EAATnB,UAClEh3B,KAAK62B,cAAcC,QAAUA,EAC7B,IAAMvT,EAAQuT,EAAUR,EAClB8B,EAAWp4B,KAAKk2B,OAAO7b,EAAOkJ,EAAO0T,OAAOl2B,OAAWA,EAAWm2B,EAAUE,EAAUL,EAAYC,GACxG,GAAIT,EAAK,CACL,IAAM8B,EAAahe,IAAUra,KAAK4zB,UAAU1uB,OAAS,EAC/CozB,EAAWt4B,KAAK2zB,UAAU/F,KAAI,SAAA/mB,GAAC,OAAIA,EAAE1B,IAAI,IACzCozB,EAAgBF,EAAahe,EAAQA,EAAQ,EAC7Cid,EAAWt3B,KAAK2zB,UAAU4E,GAC1BC,EAAclB,EAASnyB,KAAOmyB,EAASjF,YACvCoG,EAAcnB,EAASnyB,KAAOmyB,EAASlF,YACvCsG,EAAcL,EAAahe,EAAQ,EAAIA,EAAQ,EACrDra,KAAKk2B,OAAOwC,GAAcN,EAAUE,OAAUv3B,OAAWA,EAAWy3B,EAAaC,EACrF,CACAz4B,KAAKm2B,uBACLn2B,KAAKo2B,aACT,GAAC,CAAAt2B,IAAA,YAAAC,MACD,SAAUsa,GACNra,KAAK8zB,iBAAiBhwB,KAAKuW,GAC3Bra,KAAK62B,cAAcjF,WAAW7sB,UAC9B/E,KAAKo1B,kBAAkB,IACUuD,EADVC,GAAAjtB,EAAAA,EAAAA,GACJ3L,KAAK2zB,WAAS,IAAjC,IAAAiF,EAAAhtB,MAAA+sB,EAAAC,EAAA/sB,KAAA5H,MAAmC,CAApB00B,EAAA54B,MACN0yB,SAAU,CACnB,CAAC,OAAA3mB,GAAA8sB,EAAAz0B,EAAA2H,EAAA,SAAA8sB,EAAA7sB,GAAA,CACL,GAAC,CAAAjM,IAAA,eAAAC,MACD,SAAa+a,EAAM3V,GACf,IAAMkV,EAAQra,KAAK2zB,UAAUkF,QAAQ/d,GACjCT,EAAQ,GAAKA,GAASra,KAAK2zB,UAAUzuB,SAGzCC,EAAuB,kBAATA,EAAoBA,EAAO2V,EAAK3V,KAC9CA,GAAO6sB,EAAAA,EAAAA,IAAM7sB,EAAM2V,EAAKsX,YAAatX,EAAKuX,aACtCryB,KAAKo0B,oBAAsB/Z,EAAQ,GAGnCra,KAAKk2B,OAAO7b,EAAQ,EAAG3U,KAAK4S,OAAOwC,EAAK3V,KAAOA,GAAQ,IACvDnF,KAAKm2B,uBACLn2B,KAAKo2B,gBAGLtb,EAAK3V,KAAOA,EACZnF,KAAK84B,SAAS,CAACze,QAAQtZ,IAE/B,GACA,CAAAjB,IAAA,aAAAC,MAMA,SAAWsa,EAAOlV,GAAM,IAAAoc,EAAA,KACpB,GAAIvhB,KAAKgF,QAAUosB,EAAMyC,KACrB,MAAM,IAAIhU,MAAM,yBAGpB,GADA7f,KAAKgF,MAAQosB,EAAM2H,OACf1e,EAAQ,GAAKA,GAASra,KAAK2zB,UAAUzuB,QAAzC,CAGA,IAAM0qB,GAAUmG,EAAAA,EAAAA,IAAM/1B,KAAK2zB,UAAUzuB,QAAQyoB,QAAO,SAAA9mB,GAAC,OAAIA,IAAMwT,CAAK,IAC9D2b,EAAqB,GAAH9sB,QAAAwF,EAAAA,EAAAA,GAAOkhB,EAAQjC,QAAO,SAAA9mB,GAAC,OAAmC,IAA/B0a,EAAKoS,UAAU9sB,GAAGyrB,QAAc,KAA0B,CAAEjY,IACzG4b,EAAsBrG,EAAQjC,QAAO,SAAA9mB,GAAC,OAAmC,IAA/B0a,EAAKoS,UAAU9sB,GAAGyrB,QAAc,IAC1ExX,EAAO9a,KAAK2zB,UAAUtZ,GAC5BlV,EAAOO,KAAKuV,MAAM9V,GAClBA,GAAO6sB,EAAAA,EAAAA,IAAM7sB,EAAM2V,EAAKsX,YAAa1sB,KAAKE,IAAIkV,EAAKuX,YAAaryB,KAAKmF,OACrE2V,EAAK3V,KAAOA,EACZnF,KAAK84B,SAAS9C,EAAoBC,GAClCj2B,KAAKgF,MAAQosB,EAAMyC,IATnB,CAUJ,GACA,CAAA/zB,IAAA,sBAAAC,MAGA,WAAsB,IAGei5B,EAHf9O,EAAA,KACZ+O,EAAoB,GACtBC,EAAe,EAAEC,GAAAxtB,EAAAA,EAAAA,GACF3L,KAAK2zB,WAAS,IAAjC,IAAAwF,EAAAvtB,MAAAotB,EAAAG,EAAAttB,KAAA5H,MAAmC,KAAxB6W,EAAIke,EAAAj5B,MACP+a,EAAKuX,YAAcvX,EAAKsX,YAAc,IACtC6G,EAAkB1a,KAAKzD,GACvBoe,GAAgBpe,EAAK3V,KAE7B,CAAC,OAAA2G,GAAAqtB,EAAAh1B,EAAA2H,EAAA,SAAAqtB,EAAAptB,GAAA,CAED,IADA,IAAM5G,EAAOO,KAAK4S,MAAM4gB,EAAeD,EAAkB/zB,QACzDk0B,EAAA,EAAAC,EAAmBJ,EAAiBG,EAAAC,EAAAn0B,OAAAk0B,IAAE,CAAjC,IAAMte,EAAIue,EAAAD,GACXte,EAAK3V,MAAO6sB,EAAAA,EAAAA,IAAM7sB,EAAM2V,EAAKsX,YAAatX,EAAKuX,YACnD,CACA,IAAMzC,GAAUmG,EAAAA,EAAAA,IAAM/1B,KAAK2zB,UAAUzuB,QAC/B8wB,EAAqBpG,EAAQjC,QAAO,SAAA9mB,GAAC,OAAmC,IAA/BqjB,EAAKyJ,UAAU9sB,GAAGyrB,QAAc,IACzE2D,EAAsBrG,EAAQjC,QAAO,SAAA9mB,GAAC,OAAmC,IAA/BqjB,EAAKyJ,UAAU9sB,GAAGyrB,QAAc,IAChFtyB,KAAK84B,SAAS9C,EAAoBC,EACtC,GACA,CAAAn2B,IAAA,cAAAC,MAGA,SAAYsa,GACR,OAAIA,EAAQ,GAAKA,GAASra,KAAK2zB,UAAUzuB,QAC7B,EAELlF,KAAK2zB,UAAUtZ,GAAOlV,IACjC,GAAC,CAAArF,IAAA,YAAAC,MACD,SAAU4xB,EAAMxsB,GAAiD,IAAAunB,EAAA,KAA3CrS,EAAKpV,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGjF,KAAK2zB,UAAUzuB,OAAQywB,EAAU1wB,UAAAC,OAAA,EAAAD,UAAA,QAAAlE,EAC3D,GAAIf,KAAKgF,QAAUosB,EAAMyC,KACrB,MAAM,IAAIhU,MAAM,yBAEpB7f,KAAKgF,MAAQosB,EAAM2H,KAEnB,IAAMj6B,GAAYmK,EAAAA,EAAAA,GAAE,oBAChBoR,IAAUra,KAAK2zB,UAAUzuB,OACzBlF,KAAKu0B,cAAcj0B,YAAYxB,GAG/BkB,KAAKu0B,cAAc1W,aAAa/e,EAAWkB,KAAKu0B,cAAc+E,SAASxe,KAAKT,IAEhF,IAGIkf,EAHEC,EAAqB7H,EAAKztB,aAAY,SAAAiB,GAAI,OAAIunB,EAAK+M,aAAa3e,EAAM3V,EAAK,IAC3Eu0B,GAAsBhvB,EAAAA,EAAAA,KAAa,kBAAMgiB,EAAK6H,cAAc/nB,YAAY1N,EAAU,IAClF8yB,GAAa8E,EAAAA,EAAAA,IAAmB8C,EAAoBE,GAEtC,kBAATv0B,EACPo0B,EAAWp0B,GAGO,SAAdA,EAAK+tB,OAED/tB,EADAnF,KAAK25B,sBACE,CAAEzG,KAAM,cAGR,CAAEA,KAAM,QAAS7Y,MAAOlV,EAAKkV,QAIxCkf,EADc,UAAdp0B,EAAK+tB,KACMlzB,KAAK45B,YAAYz0B,EAAKkV,OAAS,EAEvB,cAAdlV,EAAK+tB,KACC,CAAEpB,kBAAmB3sB,EAAK2sB,mBAG1BH,EAAKS,aAGxB,IAsCI6D,EAtCEnb,EAA4B,IAArB9a,KAAK6C,YACZ,IAAIgwB,EAAiB/zB,EAAW6yB,EAAM4H,EAAU3H,GAChD,IAAImB,EAAmBj0B,EAAW6yB,EAAM4H,EAAU3H,GAGxD,GAFA5xB,KAAK2zB,UAAUzM,OAAO7M,EAAO,EAAGS,GAE5B9a,KAAK2zB,UAAUzuB,OAAS,EAAG,CAC3B,IAAM4I,EAAO,CAAEvK,oBAAqBvD,KAAKuD,oBAAqBC,kBAAmBxD,KAAKwD,mBAChF8G,EAA4B,IAArBtK,KAAK6C,YACZ,IAAIF,EAAAA,EAAK3C,KAAKs0B,cAAe,CAAEtxB,qBAAsB,SAAA4I,GAAC,OAAI8gB,EAAKmN,gBAAgBjuB,EAAE,EAAEsB,uBAAwBlN,KAAKq0B,uBAAyB5tB,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAGhsB,GAAO,CAAEjL,YAAa,KAC/L,IAAIF,EAAAA,EAAK3C,KAAKs0B,cAAe,CAAE1xB,oBAAqB,SAAAgJ,GAAC,OAAI8gB,EAAKmN,gBAAgBjuB,EAAE,EAAEmB,sBAAuB/M,KAAKq0B,uBAAyB5tB,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAGhsB,GAAO,CAAEjL,YAAa,KAC7Lk3B,EAAuC,IAArB/5B,KAAK6C,YACvB,SAACsB,GAAC,MAAM,CAAEmG,KAAAA,EAAMgsB,MAAOnyB,EAAEO,OAAQoyB,QAAS3yB,EAAEM,SAAU8xB,IAAKpyB,EAAE+H,OAAQ,EACrE,SAAC/H,GAAC,MAAM,CAAEmG,KAAAA,EAAMgsB,MAAOnyB,EAAEE,OAAQyyB,QAAS3yB,EAAEC,SAAUmyB,IAAKpyB,EAAE+H,OAAQ,EAErE8tB,EADUr2B,EAAAA,GAAMiqB,IAAItjB,EAAKzG,WAAYk2B,EACjBE,CAAQj6B,KAAKk6B,YAAal6B,MAE9Cw5B,EADW71B,EAAAA,GAAMiqB,IAAItjB,EAAKpG,YAAa61B,EAClBvvB,CAASxK,KAAKm6B,aAAcn6B,MACjDquB,EAAQ1qB,EAAAA,GAAMiqB,IAAItjB,EAAKvG,UAAU,kBAAM2oB,EAAKkH,UAAU6C,WAAU,SAAA3b,GAAI,OAAIA,EAAKxQ,OAASA,CAAI,GAAC,IAC3F8vB,EAAkB/L,EAAMruB,KAAKq6B,UAAWr6B,MACxCs6B,EAAuBhwB,EAAKzF,YAAW,WACzC,IAAMwV,EAAQqS,EAAKkH,UAAU6C,WAAU,SAAA3b,GAAI,OAAIA,EAAKxQ,OAASA,CAAI,IAC3DitB,GAAYxB,EAAAA,EAAAA,IAAM1b,GAAQ,GAC1Bmd,GAAczB,EAAAA,EAAAA,IAAM1b,EAAQ,EAAGqS,EAAKiH,UAAUzuB,QAC9C2yB,EAAkBnL,EAAKoL,mBAAmBP,GAC1CQ,EAAiBrL,EAAKoL,mBAAmBN,IAChB,kBAApBK,GAAiCnL,EAAKiH,UAAUkE,GAAiB9F,WAG9C,kBAAnBgG,GAAgCrL,EAAKiH,UAAUoE,GAAgBhG,UAG1ErF,EAAKqH,gBAAgBjwB,KAAKuW,EAC9B,IACMuX,GAAa8E,EAAAA,EAAAA,IAAmBsD,EAAmBR,EAAoBY,EAAiBE,EAAsBhwB,GAC9GiwB,EAAW,CAAEjwB,KAAAA,EAAMsnB,WAAAA,GACzB5xB,KAAK4zB,UAAU1M,OAAO7M,EAAQ,EAAG,EAAGkgB,EACxC,CACAz7B,EAAUwB,YAAYqxB,EAAKnyB,SAEP,kBAAT2F,GAAmC,UAAdA,EAAK+tB,OACjC+C,EAAsB,CAAC9wB,EAAKkV,QAE3Bsb,GACD31B,KAAK84B,SAAS,CAACze,GAAQ4b,GAE3Bj2B,KAAKgF,MAAQosB,EAAMyC,KACd8B,GAA8B,kBAATxwB,GAAmC,eAAdA,EAAK+tB,MAChDlzB,KAAKw6B,qBAEb,GAAC,CAAA16B,IAAA,WAAAC,MACD,SAASi2B,EAAoBC,GACzB,IAAMxC,EAAczzB,KAAK2zB,UAAUwB,QAAO,SAAC3uB,EAAGK,GAAC,OAAKL,EAAIK,EAAE1B,IAAI,GAAE,GAChEnF,KAAKk2B,OAAOl2B,KAAK2zB,UAAUzuB,OAAS,EAAGlF,KAAKmF,KAAOsuB,OAAa1yB,EAAWi1B,EAAoBC,GAC/Fj2B,KAAKm2B,uBACLn2B,KAAKo2B,cACLp2B,KAAKo1B,iBACT,GAAC,CAAAt1B,IAAA,SAAAC,MACD,SAAOsa,EAAOkJ,GAA0M,IAAA2M,EAAA,KAAnM+G,EAAKhyB,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGjF,KAAK2zB,UAAU/F,KAAI,SAAA/mB,GAAC,OAAIA,EAAE1B,IAAI,IAAG6wB,EAAkB/wB,UAAAC,OAAA,EAAAD,UAAA,QAAAlE,EAAEk1B,EAAmBhxB,UAAAC,OAAA,EAAAD,UAAA,QAAAlE,EAAE05B,EAAgBx1B,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG1C,OAAO40B,kBAAmBuD,EAAgBz1B,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG1C,OAAO80B,kBAAmBN,EAAU9xB,UAAAC,OAAA,EAAAD,UAAA,QAAAlE,EAAEi2B,EAAS/xB,UAAAC,OAAA,EAAAD,UAAA,QAAAlE,EAClN,GAAIsZ,EAAQ,GAAKA,GAASra,KAAK2zB,UAAUzuB,OACrC,OAAO,EAEX,IAAMqyB,GAAYxB,EAAAA,EAAAA,IAAM1b,GAAQ,GAC1Bmd,GAAczB,EAAAA,EAAAA,IAAM1b,EAAQ,EAAGra,KAAK2zB,UAAUzuB,QACpD,GAAI+wB,EAAqB,KACkB0E,EADlBC,GAAAjvB,EAAAA,EAAAA,GACDsqB,GAAmB,IAAvC,IAAA2E,EAAAhvB,MAAA+uB,EAAAC,EAAA/uB,KAAA5H,MAAyC,KAA9BoW,EAAKsgB,EAAA56B,OACZ86B,EAAAA,EAAAA,IAAYtD,EAAWld,IACvBwgB,EAAAA,EAAAA,IAAYrD,EAAand,EAC7B,CAAC,OAAAvO,GAAA8uB,EAAAz2B,EAAA2H,EAAA,SAAA8uB,EAAA7uB,GAAA,CACL,CACA,GAAIiqB,EAAoB,KACkB8E,EADlBC,GAAApvB,EAAAA,EAAAA,GACAqqB,GAAkB,IAAtC,IAAA+E,EAAAnvB,MAAAkvB,EAAAC,EAAAlvB,KAAA5H,MAAwC,KAA7BoW,EAAKygB,EAAA/6B,OACZi7B,EAAAA,EAAAA,IAAUzD,EAAWld,IACrB2gB,EAAAA,EAAAA,IAAUxD,EAAand,EAC3B,CAAC,OAAAvO,GAAAivB,EAAA52B,EAAA2H,EAAA,SAAAivB,EAAAhvB,GAAA,CACL,CACA,IAAMkvB,EAAU1D,EAAU3J,KAAI,SAAA/mB,GAAC,OAAIqpB,EAAKyD,UAAU9sB,EAAE,IAC9Cq0B,EAAU3D,EAAU3J,KAAI,SAAA/mB,GAAC,OAAIowB,EAAMpwB,EAAE,IACrCs0B,EAAY3D,EAAY5J,KAAI,SAAA/mB,GAAC,OAAIqpB,EAAKyD,UAAU9sB,EAAE,IAClDu0B,EAAY5D,EAAY5J,KAAI,SAAA/mB,GAAC,OAAIowB,EAAMpwB,EAAE,IACzC4wB,EAAaF,EAAUpC,QAAO,SAAC3uB,EAAGK,GAAC,OAAKL,GAAK0pB,EAAKyD,UAAU9sB,GAAGurB,YAAc6E,EAAMpwB,GAAG,GAAE,GACxF6wB,EAAaH,EAAUpC,QAAO,SAAC3uB,EAAGK,GAAC,OAAKL,GAAK0pB,EAAKyD,UAAU9sB,GAAGwrB,YAAc4E,EAAMpwB,GAAG,GAAE,GACxF8wB,EAAsC,IAAvBH,EAAYtyB,OAAe3C,OAAO80B,kBAAoBG,EAAYrC,QAAO,SAAC3uB,EAAGK,GAAC,OAAKL,GAAKywB,EAAMpwB,GAAKqpB,EAAKyD,UAAU9sB,GAAGurB,YAAY,GAAE,GAClJwF,EAAsC,IAAvBJ,EAAYtyB,OAAe3C,OAAO40B,kBAAoBK,EAAYrC,QAAO,SAAC3uB,EAAGK,GAAC,OAAKL,GAAKywB,EAAMpwB,GAAKqpB,EAAKyD,UAAU9sB,GAAGwrB,YAAY,GAAE,GAClJ6E,EAAWxxB,KAAKC,IAAI8xB,EAAYG,EAAc6C,GAC9CrD,EAAW1xB,KAAKE,IAAI+xB,EAAcD,EAAYgD,GAChDW,GAAU,EACd,GAAItE,EAAY,CACZ,IAAMuE,EAAWt7B,KAAK2zB,UAAUoD,EAAW1c,OACrC0X,EAAUxO,GAASwT,EAAWkB,WACpCoD,EAAUtJ,IAAYuJ,EAASvJ,QAC/BuJ,EAASnJ,WAAWJ,EAASgF,EAAW5xB,KAC5C,CACA,IAAKk2B,GAAWrE,EAAW,CACvB,IAAMsE,EAAWt7B,KAAK2zB,UAAUqD,EAAU3c,OACpC0X,EAAUxO,EAAQyT,EAAUiB,WAClCoD,EAAUtJ,IAAYuJ,EAASvJ,QAC/BuJ,EAASnJ,WAAWJ,EAASiF,EAAU7xB,KAC3C,CACA,GAAIk2B,EACA,OAAOr7B,KAAKk2B,OAAO7b,EAAOkJ,EAAO0T,EAAOjB,EAAoBC,EAAqBwE,EAAkBC,GAGvG,IAAK,IAAI7zB,EAAI,EAAG00B,EADhBhY,GAAQyO,EAAAA,EAAAA,IAAMzO,EAAO2T,EAAUE,GACEvwB,EAAIo0B,EAAQ/1B,OAAQ2B,IAAK,CACtD,IAAMiU,EAAOmgB,EAAQp0B,GACf1B,GAAO6sB,EAAAA,EAAAA,IAAMkJ,EAAQr0B,GAAK00B,EAASzgB,EAAKsX,YAAatX,EAAKuX,aAEhEkJ,GADkBp2B,EAAO+1B,EAAQr0B,GAEjCiU,EAAK3V,KAAOA,CAChB,CACA,IAAK,IAAI0B,EAAI,EAAG20B,EAAYjY,EAAO1c,EAAIs0B,EAAUj2B,OAAQ2B,IAAK,CAC1D,IAAMiU,EAAOqgB,EAAUt0B,GACjB1B,GAAO6sB,EAAAA,EAAAA,IAAMoJ,EAAUv0B,GAAK20B,EAAW1gB,EAAKsX,YAAatX,EAAKuX,aAEpEmJ,GADkBr2B,EAAOi2B,EAAUv0B,GAEnCiU,EAAK3V,KAAOA,CAChB,CACA,OAAOoe,CACX,GAAC,CAAAzjB,IAAA,uBAAAC,MACD,SAAqB07B,GAAkB,IAMIC,EANJtL,EAAA,KAC7BqD,EAAczzB,KAAK2zB,UAAUwB,QAAO,SAAC3uB,EAAGK,GAAC,OAAKL,EAAIK,EAAE1B,IAAI,GAAE,GAC5Dw2B,EAAa37B,KAAKmF,KAAOsuB,EACvB7D,GAAUmG,EAAAA,EAAAA,IAAM/1B,KAAK2zB,UAAUzuB,OAAS,GAAI,GAC5C8wB,EAAqBpG,EAAQjC,QAAO,SAAA9mB,GAAC,OAAmC,IAA/BupB,EAAKuD,UAAU9sB,GAAGyrB,QAAc,IACzE2D,EAAsBrG,EAAQjC,QAAO,SAAA9mB,GAAC,OAAmC,IAA/BupB,EAAKuD,UAAU9sB,GAAGyrB,QAAc,IAA4BsJ,GAAAjwB,EAAAA,EAAAA,GACxFsqB,GAAmB,IAAvC,IAAA2F,EAAAhwB,MAAA8vB,EAAAE,EAAA/vB,KAAA5H,MAAyC,KAA9BoW,EAAKqhB,EAAA37B,OACZ86B,EAAAA,EAAAA,IAAYjL,EAASvV,EACzB,CAAC,OAAAvO,GAAA8vB,EAAAz3B,EAAA2H,EAAA,SAAA8vB,EAAA7vB,GAAA,KACqC8vB,EADrCC,GAAAnwB,EAAAA,EAAAA,GACmBqqB,GAAkB,IAAtC,IAAA8F,EAAAlwB,MAAAiwB,EAAAC,EAAAjwB,KAAA5H,MAAwC,KAA7BoW,EAAKwhB,EAAA97B,OACZi7B,EAAAA,EAAAA,IAAUpL,EAASvV,EACvB,CAAC,OAAAvO,GAAAgwB,EAAA33B,EAAA2H,EAAA,SAAAgwB,EAAA/vB,GAAA,CAC+B,kBAArB0vB,IACPT,EAAAA,EAAAA,IAAUpL,EAAS6L,GAEvB,IAAK,IAAI50B,EAAI,EAAkB,IAAf80B,GAAoB90B,EAAI+oB,EAAQ1qB,OAAQ2B,IAAK,CACzD,IAAMiU,EAAO9a,KAAK2zB,UAAU/D,EAAQ/oB,IAC9B1B,GAAO6sB,EAAAA,EAAAA,IAAMlX,EAAK3V,KAAOw2B,EAAY7gB,EAAKsX,YAAatX,EAAKuX,aAElEsJ,GADkBx2B,EAAO2V,EAAK3V,KAE9B2V,EAAK3V,KAAOA,CAChB,CACJ,GAAC,CAAArF,IAAA,cAAAC,MACD,WAEIC,KAAKyzB,YAAczzB,KAAK2zB,UAAUwB,QAAO,SAAC3uB,EAAGK,GAAC,OAAKL,EAAIK,EAAE1B,IAAI,GAAE,GAE/D,IACqC42B,EADjC5mB,EAAS,EAAE6mB,GAAArwB,EAAAA,EAAAA,GACQ3L,KAAK2zB,WAAS,IAArC,IAAAqI,EAAApwB,MAAAmwB,EAAAC,EAAAnwB,KAAA5H,MAAuC,KAA5BqzB,EAAQyE,EAAAh8B,MACfu3B,EAAShzB,OAAO6Q,EAAQnV,KAAK2yB,eAC7Bxd,GAAUmiB,EAASnyB,IACvB,CACA,OAAA2G,GAAAkwB,EAAA73B,EAAA2H,EAAA,SAAAkwB,EAAAjwB,GAAA,CACA/L,KAAK4zB,UAAUhN,SAAQ,SAAA9L,GAAI,OAAIA,EAAKxQ,KAAKhG,QAAQ,IACjDtE,KAAKs1B,uBACLt1B,KAAKi8B,yBACT,GAAC,CAAAn8B,IAAA,0BAAAC,MACD,WAC6B,IAArBC,KAAK6C,YACL7C,KAAKw0B,kBAAkBvW,oBAAoB,CACvC5a,OAAQrD,KAAKmF,KACbkU,aAAcrZ,KAAKyzB,cAIvBzzB,KAAKw0B,kBAAkBvW,oBAAoB,CACvCtd,MAAOX,KAAKmF,KACZwS,YAAa3X,KAAKyzB,aAG9B,GAAC,CAAA3zB,IAAA,uBAAAC,MACD,WACI,IAAIm8B,GAAW,EACTC,EAAgBn8B,KAAK2zB,UAAU/F,KAAI,SAAA/mB,GAAC,OAAIq1B,EAAYr1B,EAAE1B,KAAO0B,EAAEurB,YAAc,GAAM8J,CAAQ,IACjGA,GAAW,EACX,IAAME,EAAcp8B,KAAK2zB,UAAU/F,KAAI,SAAA/mB,GAAC,OAAIq1B,EAAYr1B,EAAEwrB,YAAcxrB,EAAE1B,KAAO,GAAM+2B,CAAQ,IACzFG,GAAe3tB,EAAAA,EAAAA,GAAI1O,KAAK2zB,WAAW2I,UACzCJ,GAAW,EACX,IAAMK,EAAcF,EAAazO,KAAI,SAAA/mB,GAAC,OAAIq1B,EAAYr1B,EAAE1B,KAAO0B,EAAEurB,YAAc,GAAM8J,CAAQ,IAAEI,UAC/FJ,GAAW,EAGX,IAFA,IAAMM,EAAYH,EAAazO,KAAI,SAAA/mB,GAAC,OAAIq1B,EAAYr1B,EAAEwrB,YAAcxrB,EAAE1B,KAAO,GAAM+2B,CAAQ,IAAEI,UACzFluB,EAAW,EACNiM,EAAQ,EAAGA,EAAQra,KAAK4zB,UAAU1uB,OAAQmV,IAAS,CACxD,IAAQ/P,EAAStK,KAAK4zB,UAAUvZ,GAAxB/P,KAER8D,GADiBpO,KAAK2zB,UAAUtZ,GACXlV,KACrB,IAAMS,IAAQu2B,EAAc9hB,IAAUmiB,EAAUniB,EAAQ,IAClD1U,IAAQy2B,EAAY/hB,IAAUkiB,EAAYliB,EAAQ,IACxD,GAAIzU,GAAOD,EAAK,CACZ,IAAM4xB,GAAYxB,EAAAA,EAAAA,IAAM1b,GAAQ,GAC1Bmd,GAAczB,EAAAA,EAAAA,IAAM1b,EAAQ,EAAGra,KAAK2zB,UAAUzuB,QAC9C2yB,EAAkB73B,KAAK83B,mBAAmBP,GAC1CQ,EAAiB/3B,KAAK83B,mBAAmBN,GACzCiF,EAA2C,kBAApB5E,IAAiC73B,KAAK2zB,UAAUkE,GAAiB9F,QACxF2K,EAAyC,kBAAnB3E,IAAgC/3B,KAAK2zB,UAAUoE,GAAgBhG,QACvF0K,GAAiBF,EAAYliB,KAAWjM,EAAW,GAAKpO,KAAKq1B,sBAC7D/qB,EAAKtF,MAAQ,EAER03B,GAAgBP,EAAc9hB,KAAWjM,EAAWpO,KAAKyzB,aAAezzB,KAAKu1B,oBAClFjrB,EAAKtF,MAAQ,EAGbsF,EAAKtF,MAAQ,CAErB,MAEIsF,EAAKtF,MADAY,IAAQD,EACA,GAEPC,GAAOD,EACA,EAGA,CAErB,CACJ,GAAC,CAAA7F,IAAA,kBAAAC,MACD,SAAgBuK,GAEZ,IADA,IAAI8D,EAAW,EACNvH,EAAI,EAAGA,EAAI7G,KAAK4zB,UAAU1uB,OAAQ2B,IAEvC,GADAuH,GAAYpO,KAAK2zB,UAAU9sB,GAAG1B,KAC1BnF,KAAK4zB,UAAU/sB,GAAGyD,OAASA,EAC3B,OAAO8D,EAGf,OAAO,CACX,GAAC,CAAAtO,IAAA,qBAAAC,MACD,SAAmB6vB,GACf,IAC2B+M,EAD3BC,GAAAjxB,EAAAA,EAAAA,GACoBikB,GAAO,IAA3B,IAAAgN,EAAAhxB,MAAA+wB,EAAAC,EAAA/wB,KAAA5H,MAA6B,KAAlBoW,EAAKsiB,EAAA58B,MACNu3B,EAAWt3B,KAAK2zB,UAAUtZ,GAChC,GAAKid,EAASvF,SAGVuF,EAAS9E,KACT,OAAOnY,CAEf,CACA,OAAAvO,GAAA8wB,EAAAz4B,EAAA2H,EAAA,SAAA8wB,EAAA7wB,GAAA,KAC2B8wB,EAD3BC,GAAAnxB,EAAAA,EAAAA,GACoBikB,GAAO,IAA3B,IAAAkN,EAAAlxB,MAAAixB,EAAAC,EAAAjxB,KAAA5H,MAA6B,KAAlBoW,EAAKwiB,EAAA98B,MACNu3B,EAAWt3B,KAAK2zB,UAAUtZ,GAChC,GAAIid,EAASvF,SAAWuF,EAASjF,YAAciF,EAASlF,YAAc,EAClE,OAEJ,IAAKkF,EAASvF,SAAWuF,EAAS9E,KAC9B,OAAOnY,CAEf,CAAC,OAAAvO,GAAAgxB,EAAA34B,EAAA2H,EAAA,SAAAgxB,EAAA/wB,GAAA,CAEL,GAAC,CAAAjM,IAAA,sBAAAC,MACD,WACI,IACiCg9B,EAD7Bn3B,OAAM7E,EAAW4E,OAAM5E,EAAUi8B,GAAArxB,EAAAA,EAAAA,GAClB3L,KAAK2zB,WAAS,IAAjC,IAAAqJ,EAAApxB,MAAAmxB,EAAAC,EAAAnxB,KAAA5H,MAAmC,KAAxB0tB,EAAIoL,EAAAh9B,MAGX,GAFA6F,OAAc7E,IAAR6E,EAAoB+rB,EAAKxsB,KAAOO,KAAKE,IAAIA,EAAK+rB,EAAKxsB,OACzDQ,OAAc5E,IAAR4E,EAAoBgsB,EAAKxsB,KAAOO,KAAKC,IAAIA,EAAKgsB,EAAKxsB,OAC/CS,EAAM,EACZ,OAAO,CAEf,CAAC,OAAAkG,GAAAkxB,EAAA74B,EAAA2H,EAAA,SAAAkxB,EAAAjxB,GAAA,CACD,OAAO,CACX,GAAC,CAAAjM,IAAA,UAAAC,MACD,WACI,IAAIoN,EAC0B,QAA7BA,EAAKnN,KAAK62B,qBAAkC,IAAP1pB,GAAyBA,EAAGykB,WAAW7sB,WAC7EA,EAAAA,EAAAA,IAAQ/E,KAAK2zB,WACb3zB,KAAK2zB,UAAY,GACjB3zB,KAAK4zB,UAAUhN,SAAQ,SAAA/f,GAAC,OAAIA,EAAE+qB,WAAW7sB,SAAS,IAClD/E,KAAK4zB,UAAY,IACjBtmB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA+lB,EAAAhsB,WAAA,gBAAApI,KAAA,KACJ,KAACo0B,CAAA,CAnpBiB,CAAS9xB,EAAAA,G,0KC1IzBy7B,EAAiB,WACnB,SAAAA,EAAYC,EAASC,EAAWC,IAAen+B,EAAAA,EAAAA,GAAA,KAAAg+B,GAC3Cj9B,KAAKk9B,QAAUA,EACfl9B,KAAKo9B,cAAgBA,EACrBp9B,KAAKq9B,WAAaJ,EAAkBK,WACpCt9B,KAAKu9B,kBAAoB,IAAIC,IAC7B,IAAMC,EAAc,IAAIC,IAAIP,EAAUvP,KAAI,SAAApnB,GAAC,MAAI,CAACA,EAAE62B,WAAY72B,EAAE,KAChExG,KAAKm9B,UAAY,GAAG,IACQ5xB,EADRG,GAAAC,EAAAA,EAAAA,GACCuxB,GAAO,IAA5B,IAAAxxB,EAAAE,MAAAL,EAAAG,EAAAG,KAAA5H,MAA8B,KAAnB05B,EAAMpyB,EAAAxL,MACP69B,EAAWH,EAAYz3B,IAAI23B,EAAON,YACxC,IAAKO,EACD,MAAM,IAAI/d,MAAM,uCAAD3W,OAAwCy0B,EAAON,WAAU,gBAE5Er9B,KAAKm9B,UAAU5e,KAAKqf,EACxB,CAAC,OAAA9xB,GAAAJ,EAAAvH,EAAA2H,EAAA,SAAAJ,EAAAK,GAAA,CACL,CA8CC,OA9CAlM,EAAAA,EAAAA,GAAAo9B,EAAA,EAAAn9B,IAAA,iBAAAC,MACD,SAAejB,GAIX,IAHA,IAAM++B,GAAe70B,EAAAA,EAAAA,QAAOlK,GAAWmK,EAAAA,EAAAA,GAAE,qBACnC60B,EAAiB,GACjBC,EAAmB,GAChBl3B,EAAI,EAAGA,EAAI7G,KAAKk9B,QAAQh4B,OAAQ2B,IAAK,CAC1C,IAAM+2B,EAAW59B,KAAKm9B,UAAUt2B,GAC1Bm3B,GAAgBh1B,EAAAA,EAAAA,QAAO60B,GAAc50B,EAAAA,EAAAA,GAAE,mBAAoB,CAAE,iBAAkBpC,KACrFm3B,EAAcx9B,MAAMG,MAAQ,GAAHuI,OAAMlJ,KAAKo9B,cAAcv2B,GAAE,MACpDi3B,EAAevf,KAAKyf,GACpBD,EAAiBxf,KAAKqf,EAASK,eAAeD,GAClD,CACA,IAAMviB,EAAS,CAAE3c,UAAAA,EAAWg/B,eAAAA,EAAgBC,iBAAAA,GAE5C,OADA/9B,KAAKu9B,kBAAkBn9B,IAAIqb,GACpBA,CACX,GAAC,CAAA3b,IAAA,gBAAAC,MACD,SAAcP,EAAS6a,EAAO2J,EAAc3gB,GACxC,IAAK,IAAIwD,EAAI,EAAGA,EAAI7G,KAAKk9B,QAAQh4B,OAAQ2B,IAAK,CAC1C,IACMq3B,EADSl+B,KAAKk9B,QAAQr2B,GACRs3B,QAAQ3+B,GACXQ,KAAKm9B,UAAUt2B,GACvBu3B,cAAcF,EAAM7jB,EAAO2J,EAAa+Z,iBAAiBl3B,GAAIxD,EAC1E,CACJ,GAAC,CAAAvD,IAAA,iBAAAC,MACD,SAAeP,EAAS6a,EAAO2J,EAAc3gB,GACzC,IAAK,IAAIwD,EAAI,EAAGA,EAAI7G,KAAKk9B,QAAQh4B,OAAQ2B,IAAK,CAC1C,IAAM+2B,EAAW59B,KAAKm9B,UAAUt2B,GAChC,GAAI+2B,EAASS,eAAgB,CACzB,IACMH,EADSl+B,KAAKk9B,QAAQr2B,GACRs3B,QAAQ3+B,GAC5Bo+B,EAASS,eAAeH,EAAM7jB,EAAO2J,EAAa+Z,iBAAiBl3B,GAAIxD,EAC3E,CACJ,CACJ,GAAC,CAAAvD,IAAA,kBAAAC,MACD,SAAgBikB,GACZ,IAAK,IAAInd,EAAI,EAAGA,EAAI7G,KAAKk9B,QAAQh4B,OAAQ2B,IAAK,CACzB7G,KAAKm9B,UAAUt2B,GACvBy3B,gBAAgBta,EAAa+Z,iBAAiBl3B,GAC3D,EACA03B,EAAAA,EAAAA,WAAUva,EAAallB,WACvBkB,KAAKu9B,kBAAkBiB,OAAOxa,EAClC,GAAC,CAAAlkB,IAAA,eAAAC,MACD,SAAasa,EAAOlV,GAAM,IACiCsH,EADjCC,GAAAf,EAAAA,EAAAA,GACW3L,KAAKu9B,mBAAiB,IAAvD,IAAA7wB,EAAAd,MAAAa,EAAAC,EAAAb,KAAA5H,MAAyD,CAA9BwI,EAAA1M,MAAd+9B,eACMzjB,GAAO7Z,MAAMG,MAAQ,GAAHuI,OAAM/D,EAAI,KAC/C,CAAC,OAAA2G,GAAAY,EAAAvI,EAAA2H,EAAA,SAAAY,EAAAX,GAAA,CACL,KAACkxB,CAAA,CA7DkB,GA+DvBA,EAAkBK,WAAa,MAM9B,IACKmB,EAAY,WAId,SAAAA,EAAYd,EAAQtjB,IAAOpb,EAAAA,EAAAA,GAAA,KAAAw/B,GACvBz+B,KAAK29B,OAASA,EACd39B,KAAKqa,MAAQA,EACbra,KAAK0+B,aAAe,IAAI98B,EAAAA,GACxB5B,KAAK2+B,YAAc3+B,KAAK0+B,aAAa58B,MACrC9B,KAAKR,SAAUyJ,EAAAA,EAAAA,GAAE,mBAAoB,CAAE,iBAAkBoR,EAAO4L,MAAO0X,EAAOiB,SAAWjB,EAAOzQ,MACpG,CAGC,OAHArtB,EAAAA,EAAAA,GAAA4+B,EAAA,EAAA3+B,IAAA,cAAAkG,IATD,WAAoB,IAAImH,EAAI,OAA2C,QAAnCA,EAAKnN,KAAK29B,OAAOkB,oBAAiC,IAAP1xB,EAAgBA,EAAK,GAAK,GAAC,CAAArN,IAAA,cAAAkG,IAC1G,WAAoB,IAAImH,EAAI,OAA2C,QAAnCA,EAAKnN,KAAK29B,OAAOmB,oBAAiC,IAAP3xB,EAAgBA,EAAK5K,OAAO80B,iBAAmB,GAAC,CAAAv3B,IAAA,cAAAkG,IAC/H,WAAoB,IAAImH,EAAI,OAA0D,QAAlDA,EAAKnN,KAAK29B,OAAOoB,mCAAgD,IAAP5xB,EAAgBA,EAAKxJ,EAAAA,GAAMq7B,IAAM,GAAC,CAAAl/B,IAAA,SAAAC,MAQhI,SAAOoF,GACHnF,KAAK0+B,aAAa56B,KAAK,CAAC9D,KAAKqa,MAAOlV,GACxC,KAACs5B,CAAA,CAba,GAeLQ,EAAK,WAYd,SAAAA,EAAYC,EAAMpgC,EAAWqgC,EAAiBjC,EAASC,EAAW3hB,GAAU,IAAAxc,EAAA,MAAAC,EAAAA,EAAAA,GAAA,KAAAggC,GACxEj/B,KAAKm/B,gBAAkBA,EACvBn/B,KAAKo/B,MAAQ,YAAHl2B,SAAiB+1B,EAAMI,eACjCr/B,KAAKkH,YAAc,IAAIhF,EAAAA,GACvBlC,KAAKs/B,YAAc,EACnBt/B,KAAKu/B,aAAe,EACpBv/B,KAAKyC,SAAUuG,EAAAA,EAAAA,QAAOlK,GAAWmK,EAAAA,EAAAA,GAAE,iBAADC,OAAkBlJ,KAAKo/B,SACzD,IAAMI,EAAUtC,EAAQtP,KAAI,SAACrnB,EAAGM,GAAC,OAAK,IAAI43B,EAAal4B,EAAGM,EAAE,IACtDguB,EAAa,CACf1vB,KAAMq6B,EAAQrK,QAAO,SAACsK,EAAGC,GAAC,OAAKD,EAAIC,EAAE/B,OAAOgC,MAAM,GAAE,GACpD7K,MAAO0K,EAAQ5R,KAAI,SAAA+D,GAAI,MAAK,CAAExsB,KAAMwsB,EAAKgM,OAAOgC,OAAQhO,KAAAA,EAAM,KAElE3xB,KAAK4/B,UAAY5/B,KAAKkH,YAAY9G,IAAI,IAAIkzB,EAAAA,EAAUtzB,KAAKyC,QAAS,CAC9DI,YAAa,EACb4xB,oBAAqB,EACrBJ,sBAAuB,kBAAMr1B,EAAKugC,YAAY,EAC9C1K,WAAAA,KAEJ70B,KAAK4/B,UAAUp4B,GAAGhH,MAAM6C,OAAS,GAAH6F,OAAMi2B,EAAgBU,gBAAe,MACnE7/B,KAAK4/B,UAAUp4B,GAAGhH,MAAMs/B,WAAa,GAAH52B,OAAMi2B,EAAgBU,gBAAe,MACvE,IArDuBE,EAqDjBnC,EAAW,IAAIX,EAAkBC,EAASC,GAAW,SAAAt2B,GAAC,OAAI7H,EAAK4gC,UAAUhG,YAAY/yB,EAAE,IAC7F7G,KAAKggC,KAAOhgC,KAAKkH,YAAY9G,IAAI,IAAIwsB,EAAAA,GAAKsS,EAAMl/B,KAAKyC,SAtD9Bs9B,EAsD6DZ,EArDjF,CACHvT,UAAS,SAACqU,GAAO,OAAOF,EAASnU,UAAUqU,EAAM,EACjDC,cAAa,WAAK,OAAOjD,EAAkBK,UAAY,IAmD+C,CAACM,GAAWpiB,IAClH7X,EAAAA,GAAMC,IAAG6K,MAAT9K,EAAAA,IAAK+K,EAAAA,EAAAA,GAAQ8wB,EAAQ5R,KAAI,SAAAuS,GAAC,OAAIA,EAAExB,WAAW,KAA3Ch7B,EAA8C,SAAAmb,GAAA,IAAAoZ,GAAAkI,EAAAA,EAAAA,GAAAthB,EAAA,GAAEzE,EAAK6d,EAAA,GAAE/yB,EAAI+yB,EAAA,UAAM0F,EAASyC,aAAahmB,EAAOlV,EAAK,GAAE,KAAMnF,KAAKkH,aAChHlH,KAAK4/B,UAAUzL,gBAAe,SAAA9Z,GAC1B,IAAMimB,EAAcpD,EAAQ/H,QAAO,SAAC3uB,EAAGD,GAAC,OAAKC,EAAID,EAAEo5B,MAAM,GAAE,GACrDx6B,EAAO+3B,EAAQ7iB,GAAOslB,OAASW,EAActhC,EAAKsgC,YACxDtgC,EAAK4gC,UAAUW,WAAWlmB,EAAOlV,EACrC,GAAG,KAAMnF,KAAKkH,aACdlH,KAAK6lB,cAAezZ,EAAAA,EAAAA,kBAAiBpM,KAAKyC,SAC1CzC,KAAKQ,MAAMggC,EAAAA,GACf,CA8BC,OA9BA3gC,EAAAA,EAAAA,GAAAo/B,EAAA,EAAAn/B,IAAA,mBAAAkG,IAzCD,WAAyB,OAAOhG,KAAKggC,KAAKvR,gBAAkB,GAAC,CAAA3uB,IAAA,uBAAAkG,IAC7D,WAA6B,OAAOhG,KAAKggC,KAAKS,oBAAsB,GAAC,CAAA3gC,IAAA,cAAAkG,IACrE,WAAoB,OAAOhG,KAAKggC,KAAKpgB,WAAa,GAAC,CAAA9f,IAAA,kBAAAkG,IACnD,WAAwB,OAAOhG,KAAKggC,KAAKU,eAAiB,GAAC,CAAA5gC,IAAA,YAAAkG,IAC3D,WAAkB,OAAOhG,KAAKggC,KAAKW,SAAW,GAAC,CAAA7gC,IAAA,aAAAkG,IAC/C,WAAmB,OAAOhG,KAAKggC,KAAKY,UAAY,GAAC,CAAA9gC,IAAA,YAAAkG,IACjD,WAAkB,OAAOhG,KAAKggC,KAAK1mB,SAAW,EAACrT,IAC/C,SAAcqT,GAAatZ,KAAKggC,KAAK1mB,UAAYA,CAAW,GAAC,CAAAxZ,IAAA,eAAAkG,IAC7D,WAAqB,OAAOhG,KAAKggC,KAAK3mB,YAAc,GAAC,CAAAvZ,IAAA,eAAAkG,IACrD,WAAqB,OAAOhG,KAAKggC,KAAKa,YAAc,GAAC,CAAA/gC,IAAA,eAAAkG,IACrD,WAAqB,OAAOhG,KAAKggC,KAAKc,YAAc,GAAC,CAAAhhC,IAAA,gBAAAC,MAgCrD,SAAchB,GACViB,KAAKggC,KAAK5hB,cAAcrf,EAC5B,GAAC,CAAAe,IAAA,SAAAC,MACD,SAAOu2B,EAAOyK,GAA4B,IAAfC,EAAQ/7B,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,GAClCjF,KAAKggC,KAAK9Y,OAAOoP,EAAOyK,EAAaC,EACzC,GAAC,CAAAlhC,IAAA,iBAAAC,MACD,WACI,OAAOC,KAAKyC,OAChB,GAAC,CAAA3C,IAAA,QAAAC,MACD,SAAMwkB,GACF,IAAMiD,EAAU,GAChBA,EAAQjJ,KAAK,iBAADrV,OAAkBlJ,KAAKo/B,MAAK,uEAAAl2B,OACtClJ,KAAKm/B,gBAAgBU,gBAAkB,EAAC,mCAAA32B,OACzBlJ,KAAKm/B,gBAAgBU,gBAAe,gBAErD7/B,KAAK6lB,aAAatZ,YAAcib,EAAQW,KAAK,MAC7CnoB,KAAKggC,KAAKx/B,MAAM+jB,EACpB,GAAC,CAAAzkB,IAAA,sBAAAC,MACD,WACI,OAAOC,KAAKggC,KAAKiB,qBACrB,GAAC,CAAAnhC,IAAA,eAAAC,MACD,WACI,OAAOC,KAAKggC,KAAKkB,cACrB,GAAC,CAAAphC,IAAA,WAAAC,MACD,WACI,OAAOC,KAAKggC,KAAK9T,UACrB,GAAC,CAAApsB,IAAA,UAAAC,MACD,WACIC,KAAKkH,YAAYnC,SACrB,KAACk6B,CAAA,CAxEa,GA0ElBA,EAAMI,cAAgB,C,2KCjKT8B,EAAuB,CAChCC,wBAAyB,YACzBC,4BAA6B,UAC7BC,4BAA6B,aAEpBC,EAAM,SAAA1zB,IAAAlP,EAAAA,EAAAA,GAAA4iC,EAAA1zB,GAAA,IAAAjP,GAAAC,EAAAA,EAAAA,GAAA0iC,GACf,SAAAA,EAAYzzB,GAAM,IAAAC,EAAA/O,GAAAC,EAAAA,EAAAA,GAAA,KAAAsiC,IACdviC,EAAAJ,EAAAM,KAAA,OACKsiC,UAAYxiC,EAAKK,UAAU,IAAIuC,EAAAA,IACpC5C,EAAKwL,SAAWxL,EAAKwiC,UAAU1/B,MAC/B9C,EAAKyiC,WAAaziC,EAAKK,UAAU,IAAIuC,EAAAA,IACrC5C,EAAKwuB,UAAYxuB,EAAKyiC,WAAW3/B,MACjC9C,EAAK0iC,MAAQ5zB,EACb9O,EAAK2iC,SAAW3iC,EAAK0iC,MAAME,UAC3B,IAAMC,EAAU,CAAC,wBAsCd,OArCC7iC,EAAK0iC,MAAM7yB,OACX7P,EAAK8iC,MAAQ9iC,EAAK0iC,MAAM7yB,KACxBgzB,EAAQtjB,KAAI9P,MAAZozB,GAAOnzB,EAAAA,EAAAA,GAASC,EAAAA,EAAUC,iBAAiB5P,EAAK8iC,UAEhD9iC,EAAK0iC,MAAMK,iBACXF,EAAQtjB,KAAI9P,MAAZozB,GAAOnzB,EAAAA,EAAAA,GAAS1P,EAAK0iC,MAAMK,gBAAgBC,MAAM,OAEjDhjC,EAAK2iC,UACLE,EAAQtjB,KAAK,WAEjBvf,EAAKyD,QAAUxC,SAASC,cAAc,OACtClB,EAAKyD,QAAQwjB,MAAQjnB,EAAK0iC,MAAMzb,OAChClY,EAAA/O,EAAKyD,QAAQtC,WAAUC,IAAGqO,MAAAV,EAAI8zB,GACzB7iC,EAAK0iC,MAAMO,eACZjjC,EAAKyD,QAAQ0kB,SAAW,GAE5BnoB,EAAKyD,QAAQpC,aAAa,OAAQ,YAClCrB,EAAKyD,QAAQpC,aAAa,eAAgB6hC,OAAOljC,EAAK2iC,WACtD3iC,EAAKyD,QAAQpC,aAAa,aAAcrB,EAAK0iC,MAAMzb,OACnDjnB,EAAK8xB,cACL9xB,EAAKuU,QAAQvU,EAAKyD,SAAS,SAAC0/B,GACpBnjC,EAAKyzB,UACLzzB,EAAKojC,SAAWpjC,EAAK2iC,SACrB3iC,EAAKwiC,UAAU19B,MAAK,GACpBq+B,EAAGryB,iBAEX,IACA9Q,EAAKK,UAAUL,EAAKqjC,cAAcrjC,EAAKyD,UACvCzD,EAAKsjC,UAAUtjC,EAAKyD,SAAS,SAAC8/B,GAC1B,GAA8B,KAA1BA,EAAc9b,SAAgE,IAA1B8b,EAAc9b,QAKlE,OAJAznB,EAAKojC,SAAWpjC,EAAK2iC,SACrB3iC,EAAKwiC,UAAU19B,MAAK,GACpBy+B,EAAczyB,sBACdyyB,EAAc9uB,kBAGlBzU,EAAKyiC,WAAW39B,KAAKy+B,EACzB,IAAGvjC,CACP,CA+BC,OA/BAa,EAAAA,EAAAA,GAAA0hC,EAAA,EAAAzhC,IAAA,UAAAkG,IACD,WACI,MAAsD,SAA/ChG,KAAKyC,QAAQysB,aAAa,gBACrC,GAAC,CAAApvB,IAAA,QAAAC,MACD,WACIC,KAAKyC,QAAQ2kB,OACjB,GAAC,CAAAtnB,IAAA,UAAAkG,IACD,WACI,OAAOhG,KAAK2hC,QAChB,EAAC17B,IACD,SAAYu8B,GACRxiC,KAAK2hC,SAAWa,EAChBxiC,KAAKyC,QAAQpC,aAAa,eAAgB6hC,OAAOliC,KAAK2hC,WACtD3hC,KAAKyC,QAAQtC,UAAUiK,OAAO,UAAWpK,KAAK2hC,UAC9C3hC,KAAK8wB,aACT,GAAC,CAAAhxB,IAAA,QAAAC,MACD,WACI,OAAO,EACX,GAAC,CAAAD,IAAA,cAAAC,MACD,WACQC,KAAKyC,UACLzC,KAAKyC,QAAQjC,MAAMmoB,YAAe3oB,KAAK2hC,UAAY3hC,KAAK0hC,MAAMN,yBAA4B,GAC1FphC,KAAKyC,QAAQjC,MAAMkoB,MAAS1oB,KAAK2hC,UAAY3hC,KAAK0hC,MAAML,6BAAgC,UACxFrhC,KAAKyC,QAAQjC,MAAMC,gBAAmBT,KAAK2hC,UAAY3hC,KAAK0hC,MAAMJ,6BAAgC,GAE1G,GAAC,CAAAxhC,IAAA,SAAAC,MACD,WACIC,KAAKyC,QAAQpC,aAAa,gBAAiB6hC,QAAO,GACtD,GAAC,CAAApiC,IAAA,UAAAC,MACD,WACIC,KAAKyC,QAAQpC,aAAa,gBAAiB6hC,QAAO,GACtD,KAACX,CAAA,CA/Ec,CAASxxB,EAAAA,E,4OCTxB0yB,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUljC,GAAS,IAAMmjC,EAAKL,EAAUM,KAAKpjC,GAAS,CAAE,MAAOoE,GAAK6+B,EAAO7+B,EAAI,CAAE,CAC1F,SAASi/B,EAASrjC,GAAS,IAAMmjC,EAAKL,EAAiB,MAAE9iC,GAAS,CAAE,MAAOoE,GAAK6+B,EAAO7+B,EAAI,CAAE,CAC7F,SAAS++B,EAAKznB,GAJlB,IAAe1b,EAIa0b,EAAOxX,KAAO8+B,EAAQtnB,EAAO1b,QAJ1CA,EAIyD0b,EAAO1b,MAJhDA,aAAiB6iC,EAAI7iC,EAAQ,IAAI6iC,GAAE,SAAUG,GAAWA,EAAQhjC,EAAQ,KAIjB2N,KAAKu1B,EAAWG,EAAW,CAC7GF,GAAML,EAAYA,EAAUp0B,MAAMi0B,EAASC,GAAc,KAAKQ,OAClE,GACJ,EAcaE,EAAO,SAAA3kC,IAAAC,EAAAA,EAAAA,GAAA0kC,EAAA3kC,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAwkC,GAChB,SAAAA,EAAYvkC,EAAWwkC,GAAuF,IAAAtkC,EAAlED,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAEpC,YAAa,GAyD7D,OAzDoG5D,EAAAA,EAAAA,GAAA,KAAAokC,IACxGrkC,EAAAJ,EAAAM,KAAA,OACKqkC,uBAAyB,GAC9BvkC,EAAKwkC,qBAAsB,EAC3BxkC,EAAKykC,+BAAiCzkC,EAAKK,UAAU,IAAIqkC,EAAAA,IACzD1kC,EAAK2kC,8BAAgC3kC,EAAKykC,+BAA+B3hC,MACzE9C,EAAKkI,YAAc,IAAIhF,EAAAA,GACvBlD,EAAKD,QAAUA,EACfC,EAAK4kC,kBAA0D,oBAA/B5kC,EAAKD,QAAQ8kC,cAC7C7kC,EAAK8kC,iBAAmB9kC,EAAKK,UAAU,IAAI0kC,GAAiB,WAAQ,IAAI52B,EAAI,OAAgD,QAAxCA,EAAKnO,EAAKglC,gCAA6C,IAAP72B,OAAgB,EAASA,EAAG5N,MAAQ,GAAGR,EAAQklC,kBACnLjlC,EAAKQ,QAAUS,SAASC,cAAc,OACtClB,EAAKQ,QAAQ2O,UAAY,iBACzBrP,EAAUwB,YAAYtB,EAAKQ,SAC3BR,EAAKklC,UAAYllC,EAAKK,UAAU,IAAI8kC,EAAAA,EAAUnlC,EAAKQ,QAAS,CACxDqD,YAAa9D,EAAQ8D,YACrBmiB,UAAWjmB,EAAQimB,UACnBof,aAAcrlC,EAAQqlC,aACtBC,iBAAkBtlC,EAAQslC,iBAC1BC,uBAAwB,SAACC,EAAQC,GAC7B,IAAIr3B,EACJ,GAAIo3B,EAAOE,KAAOV,EAAiBW,GAY/B,OAXA1lC,EAAKglC,yBAA2B,IAAIW,EAAAA,EAA2BJ,EAAQA,EAAOK,YAAatB,EAAqB,CAC5GgB,uBAAwBtlC,EAAKD,QAAQulC,uBACrCF,aAAcplC,EAAKolC,aACnBS,mBAAoB7lC,EAAKD,QAAQ8kC,cACjCiB,WAAYn2B,EAAAA,EAAUC,iBAA6C,QAA3BzB,EAAKpO,EAAQgmC,gBAA6B,IAAP53B,EAAgBA,EAAK6K,EAAAA,EAAQgtB,aACxGC,wBAAyBjmC,EAAKD,QAAQkmC,wBACtCC,cAAelmC,EAAKD,QAAQomC,6BAC5BC,cAAepmC,EAAKD,QAAQqmC,gBAEhCpmC,EAAKglC,yBAAyBqB,iBAAiBrmC,EAAKklC,UAAUoB,SAC9DtmC,EAAKkI,YAAY9G,IAAIpB,EAAKykC,+BAA+BrjC,IAAIpB,EAAKglC,yBAAyBuB,wBACpFvmC,EAAKglC,yBAEhB,GAAIjlC,EAAQulC,uBAAwB,CAChC,IAAM7oB,EAAS1c,EAAQulC,uBAAuBC,EAAQC,GACtD,GAAI/oB,EACA,OAAOA,CAEf,CACA,GAAI8oB,aAAkBiB,EAAAA,GAAe,CACjC,IAAM/pB,EAAS,IAAIkpB,EAAAA,EAA2BJ,EAAQA,EAAOkB,QAASnC,EAAqB,CACvFgB,uBAAwBtlC,EAAKD,QAAQulC,uBACrCF,aAAcplC,EAAKolC,aACnBS,mBAAoB7lC,EAAKD,QAAQ8kC,cACjCiB,WAAYP,EAAOmB,MACnBT,wBAAyBjmC,EAAKD,QAAQkmC,wBACtCC,cAAelmC,EAAKD,QAAQomC,6BAC5BC,cAAepmC,EAAKD,QAAQqmC,gBAKhC,OAHA3pB,EAAO4pB,iBAAiBrmC,EAAKklC,UAAUoB,SACvCtmC,EAAKukC,uBAAuBhlB,KAAK9C,GACjCzc,EAAKkI,YAAY9G,IAAIpB,EAAKykC,+BAA+BrjC,IAAIqb,EAAO8pB,wBAC7D9pB,CACX,CAEJ,KACAzc,CACR,CAuCC,OAvCAa,EAAAA,EAAAA,GAAAwjC,EAAA,EAAAvjC,IAAA,eAAAkG,IAID,WACI,OAAOhG,KAAKkkC,UAAUE,YAC1B,EAACn+B,IALD,SAAiBm+B,GACbpkC,KAAKkkC,UAAUE,aAAeA,CAClC,GAAC,CAAAtkC,IAAA,aAAAC,MAID,WACI,OAAOC,KAAKR,OAChB,GAAC,CAAAM,IAAA,gBAAAC,MACD,SAAc4lC,GACV,OAAO3lC,KAAKkkC,UAAU0B,UAAUD,EACpC,GAAC,CAAA7lC,IAAA,aAAAC,MACD,SAAW8lC,EAAgBC,GAAkB,IAAA3kC,EAAA,KACzCnB,KAAKuK,QACL,IAAMw7B,EAAsBF,EAAiBA,EAAeG,MAAM,GAAK,GAEvEhmC,KAAKwjC,uBAAyBsC,GAAoBA,EAAiB5gC,OAAS,GACxElF,KAAKwjC,qBAAuBsC,IAC5B9lC,KAAK8jC,iBAAiBc,YAAckB,EAAiBE,MAAM,GAC3DD,EAAoBxnB,KAAKve,KAAK8jC,mBAElCiC,EAAoBnf,SAAQ,SAAA2d,GACxBpjC,EAAK+iC,UAAU3lB,KAAKgmB,EAAQ,CAAE11B,MAAM,EAAMqe,OAAO,EAAO+Y,WAAY9kC,EAAK+kC,mBAAmB3B,IAChG,GACJ,GAAC,CAAAzkC,IAAA,qBAAAC,MACD,SAAmBwkC,GACf,IAAIp3B,EAAIib,EACFtoB,EAAME,KAAK4jC,kBAAiE,QAA5Cxb,GAAMjb,EAAKnN,KAAKjB,SAAS8kC,qBAAkC,IAAPzb,OAAgB,EAASA,EAAGlpB,KAAKiO,EAAIo3B,QAAUxjC,EACzI,OAAOolC,EAAAA,EAAAA,IAA4B,OAARrmC,QAAwB,IAARA,OAAiB,EAASA,EAAIsmC,WAC7E,GAAC,CAAAtmC,IAAA,QAAAC,MACD,WACIC,KAAKujC,uBAAyB,GAC9BvjC,KAAKkH,YAAYqD,QACjBvK,KAAKkkC,UAAU35B,OACnB,GAAC,CAAAzK,IAAA,UAAAC,MACD,WACIC,KAAKuK,SACL+C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA81B,EAAA/7B,WAAA,gBAAApI,KAAA,KACJ,KAACmkC,CAAA,CAlGe,CAAS7hC,EAAAA,IAoGhBuiC,EAAgB,SAAAsC,IAAA1nC,EAAAA,EAAAA,GAAAolC,EAAAsC,GAAA,IAAA5lB,GAAA5hB,EAAAA,EAAAA,GAAAklC,GACzB,SAAAA,EAAYuC,EAAoBrgB,GAAO,IAAArb,EAIU,OAJV3L,EAAAA,EAAAA,GAAA,KAAA8kC,GACnC9d,EAAQA,GAASsgB,EAAAA,GAAa,cAAe,oBAC7C37B,EAAA6V,EAAAvhB,KAAA,KAAM6kC,EAAiBW,GAAIze,OAAOllB,GAAW,IACxCylC,aAAe,GACpB57B,EAAK07B,mBAAqBA,EAAmB17B,CACjD,CAWC,OAXA/K,EAAAA,EAAAA,GAAAkkC,EAAA,EAAAjkC,IAAA,MAAAC,MACD,WACI,OAAO0iC,EAAUziC,UAAM,OAAQ,GAAMymC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA1D,MAAA,OACnCnjC,KAAKsmC,qBAAqB,wBAAAO,EAAA57B,OAAA,GAAA07B,EAAA,SAElC,GAAC,CAAA7mC,IAAA,cAAAkG,IACD,WACI,OAAOhG,KAAKwmC,YAChB,EAACvgC,IACD,SAAgBw/B,GACZzlC,KAAKwmC,aAAef,CACxB,KAAC1B,CAAA,CAjBwB,CAASgD,EAAAA,IAmBtChD,EAAiBW,GAAK,qB,meC5GhBsC,EAA2B,SAAAC,IAAAtoC,EAAAA,EAAAA,GAAAqoC,EAAAC,GAAA,IAAAxmB,GAAA5hB,EAAAA,EAAAA,GAAAmoC,GAC7B,SAAAA,EAAYrjB,GAAM,IAAA3kB,EAEG,OAFHC,EAAAA,EAAAA,GAAA,KAAA+nC,IACdhoC,EAAAyhB,EAAAvhB,KAAA,KAAMykB,EAAKqd,SAASpT,KAAI,SAAAsZ,GAAI,OAAIA,EAAK1nC,OAAO,MACvCmkB,KAAOA,EAAK3kB,CACrB,CAAC,OAAAa,EAAAA,EAAAA,GAAAmnC,EAAA,CAJ4B,CAASG,EAAAA,IAM1C,SAASC,EAAsBzjB,GAC3B,OAAIA,aAAgBwjB,EAAAA,GACT,IAAIH,EAA4BrjB,GAEpCA,CACX,CAAC,IACK0jB,EAAuB,WACzB,SAAAA,EAAYC,EAAeC,IAAKtoC,EAAAA,EAAAA,GAAA,KAAAooC,GAC5BrnC,KAAKsnC,cAAgBA,EACrBtnC,KAAKunC,IAAMA,EACXvnC,KAAKwnC,qBAAuBhmC,EAAAA,GAAWw9B,IAC3C,CAgEC,OAhEAn/B,EAAAA,EAAAA,GAAAwnC,EAAA,EAAAvnC,IAAA,aAAAC,MACD,SAAWmnC,GACP,OAAOlnC,KAAKunC,IAAIE,WAAWP,EAAK1nC,QACpC,GAAC,CAAAM,IAAA,eAAAC,MACD,SAAa2nC,EAAOC,GAChB,GAAI3nC,KAAKunC,IAAIK,aACT,OAAO5nC,KAAKunC,IAAIK,aAAaF,EAAM9Z,KAAI,SAAAsZ,GAAI,OAAIA,EAAK1nC,OAAO,IAAGmoC,EAGtE,GAAC,CAAA7nC,IAAA,cAAAC,MACD,SAAY4jB,EAAMgkB,GACd,IAAIx6B,EAAIib,EAC+B,QAAtCA,GAAMjb,EAAKnN,KAAKunC,KAAKjxB,mBAAgC,IAAP8R,GAAyBA,EAAGlpB,KAAKiO,EAAIi6B,EAAsBzjB,GAAOgkB,EACrH,GAAC,CAAA7nC,IAAA,aAAAC,MACD,SAAW4jB,EAAMkkB,EAAYC,EAAaH,GAA2B,IAAAxmC,EAAA,KAAZ4mC,IAAG9iC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,KAAAA,UAAA,GAClDwW,EAASzb,KAAKunC,IAAIS,WAAWZ,EAAsBzjB,GAAOkkB,GAAcA,EAAWroC,QAASsoC,EAAaH,GACzGM,EAA0BjoC,KAAKkoC,iBAAmBL,EAKxD,GAJII,IACAjoC,KAAKwnC,qBAAqBziC,UAC1B/E,KAAKkoC,eAAiBL,GAEA,qBAAfA,EACP,OAAOpsB,EAYX,GAVIwsB,GAA6C,mBAAXxsB,GAAwBA,EAAO0sB,aACjEnoC,KAAKwnC,sBAAuBY,EAAAA,EAAAA,KAAkB,WAC1C,IAAMC,EAAQlnC,EAAKmmC,gBACbgB,EAAMD,EAAME,gBAAgBV,GAC9BQ,EAAMG,YAAYF,IAClBD,EAAMI,aAAaH,GAAK,GAE5BnnC,EAAK+mC,oBAAiBnnC,CAC1B,GAAG,MAEe,mBAAX0a,IAAyBA,EAAOd,QAAmC,qBAAlBc,EAAOitB,QAA0BjtB,EAAOktB,SAChG,OAAKZ,EAKEtsB,EAFI,CAAEd,OAFwB,mBAAXc,EAAuBA,EAASA,EAAOd,OAE5CiuB,OADgB,mBAAXntB,OAAuB1a,EAAY0a,EAAOmtB,OACvCD,SAAU,CAACb,IAI5C,GAAsB,IAAlBrsB,EAAOitB,OAA0C,CACjD,IAAML,EAAQroC,KAAKsnC,gBACbgB,EAAMD,EAAME,gBAAgBV,GAC5BgB,EAAYR,EAAMS,sBAAsBR,GACxCS,EAAaV,EAAMW,QAAQH,GAC3BI,EAAcJ,GAAaR,EAAMa,aAAaL,GACpD,OAAO7oC,KAAKgoC,WAAWrkB,EAAMolB,EAAYE,EAAatB,GAAe,EACzE,CACA,IAAMU,EAAQroC,KAAKsnC,gBACbgB,EAAMD,EAAME,gBAAgBV,GAC5BvR,EAAQ+R,EAAMa,aAAaZ,GAC3BpjC,EAASmjC,EAAMc,mBAAmBb,GACxC,OAAO7hC,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAGre,GAAS,CAAEktB,UAAU5S,EAAAA,EAAAA,IAAMO,EAAOA,EAAQpxB,IACrF,GAAC,CAAApF,IAAA,OAAAC,MACD,SAAK4jB,EAAMkkB,EAAYC,EAAaH,GAChC3nC,KAAKwnC,qBAAqBziC,UAC1B/E,KAAKkoC,oBAAiBnnC,EACtBf,KAAKunC,IAAI6B,KAAKhC,EAAsBzjB,GAAOkkB,GAAcA,EAAWroC,QAASsoC,EAAaH,EAC9F,GAAC,CAAA7nC,IAAA,YAAAC,MACD,SAAU4nC,GACN,IAAIx6B,EAAIib,EAC6B,QAApCA,GAAMjb,EAAKnN,KAAKunC,KAAKlxB,iBAA8B,IAAP+R,GAAyBA,EAAGlpB,KAAKiO,EAAIw6B,EACtF,KAACN,CAAA,CArEwB,GA6GtB,IAkBIgC,EAlBEC,EAAoB,WAC7B,SAAAA,EAAYvJ,IAAU9gC,EAAAA,EAAAA,GAAA,KAAAqqC,GAClBtpC,KAAK+/B,SAAWA,CACpB,CAaC,OAbAlgC,EAAAA,EAAAA,GAAAypC,EAAA,EAAAxpC,IAAA,YAAAC,MACD,SAAUP,GACN,OAAOQ,KAAK+/B,SAASnU,UAAUpsB,EAAQA,QAC3C,GAAC,CAAAM,IAAA,gBAAAC,MACD,SAAcP,GACV,OAAOQ,KAAK+/B,SAASG,cAAc1gC,EAAQA,QAC/C,GAAC,CAAAM,IAAA,mBAAAC,MACD,SAAiBP,GACb,QAASQ,KAAK+/B,SAASwJ,kBAAoBvpC,KAAK+/B,SAASwJ,iBAAiB/pC,EAAQA,QACtF,GAAC,CAAAM,IAAA,mBAAAC,MACD,SAAiBP,EAAS6D,GACtB,IAAI8J,EAAIib,EACyC,QAAhDA,GAAMjb,EAAKnN,KAAK+/B,UAAUyJ,wBAAqC,IAAPphB,GAAyBA,EAAGlpB,KAAKiO,EAAI3N,EAAQA,QAAS6D,EACnH,KAACimC,CAAA,CAhB4B,IAmBjC,SAAWD,GACPA,EAAyB,KAAI,OAC7BA,EAA4B,QAAI,UAChCA,EAA2B,OAAI,QAClC,CAJD,CAIGA,IAAuBA,EAAqB,CAAC,IAAI,IAC9CI,EAAe,WAIjB,SAAAA,EAAYvlC,GAA6B,IAAA0G,EAAA,KAAhB8+B,EAASzkC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,IAAEhG,EAAAA,EAAAA,GAAA,KAAAwqC,GACnCzpC,KAAK0pC,UAAYA,EACjB1pC,KAAKkH,YAAc,IAAIhF,EAAAA,GACvBlC,KAAKkE,YAAcP,EAAAA,GAAMijB,QAAQ1iB,GAAa,SAAA88B,GAAQ,OAAIp2B,EAAK8+B,UAAY1I,CAAQ,GAAEhhC,KAAKkH,YAC9F,CAGC,OAHArH,EAAAA,EAAAA,GAAA4pC,EAAA,EAAA3pC,IAAA,WAAAkG,IAPD,WACI,OAAOhG,KAAK0pC,SAChB,GAAC,CAAA5pC,IAAA,UAAAC,MAMD,WACIC,KAAKkH,YAAYnC,SACrB,KAAC0kC,CAAA,CAXgB,GAafE,EAAY,WACd,SAAAA,EAAY/L,EAAU0J,EAAesC,EAA0BC,EAAaC,GAAoC,IACxG38B,EAD0FpO,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAChG,EAAAA,EAAAA,GAAA,KAAA0qC,GAE1G3pC,KAAK49B,SAAWA,EAChB59B,KAAKsnC,cAAgBA,EACrBtnC,KAAK6pC,YAAcA,EACnB7pC,KAAK8pC,qBAAuBA,EAC5B9pC,KAAK+pC,iBAAmB,IAAIrM,IAC5B19B,KAAKgqC,cAAgB,IAAItM,IACzB19B,KAAKiqC,OAASN,EAAaO,cAC3BlqC,KAAKmqC,iCAAkC,EACvCnqC,KAAKoqC,0BAA2B,EAChCpqC,KAAKqqC,kBAAoB,IAAI7M,IAC7Bx9B,KAAKsqC,uBAAyB9oC,EAAAA,GAAWw9B,KACzCh/B,KAAKkH,YAAc,IAAIhF,EAAAA,GACvBlC,KAAKq9B,WAAaO,EAASP,WAC3Br9B,KAAKoe,cAAcrf,GACnB4E,EAAAA,GAAMiqB,IAAIgc,GAA0B,SAAAzlC,GAAC,OAAIA,EAAE+iC,IAAI,GAA/CvjC,CAAiD3D,KAAKuqC,4BAA6BvqC,KAAMA,KAAKkH,aAClD,QAA3CiG,EAAKywB,EAAS4M,+BAA4C,IAAPr9B,GAAyBA,EAAGjO,KAAK0+B,EAAU59B,KAAKwqC,wBAAyBxqC,KAAMA,KAAKkH,YAC5I,CAwKC,OAxKArH,EAAAA,EAAAA,GAAA8pC,EAAA,EAAA7pC,IAAA,gBAAAC,MACD,WAA4B,IAAdhB,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,EACrB,GAA8B,qBAAnBlG,EAAQkrC,OAAwB,CACvC,IAAMA,GAASjY,EAAAA,EAAAA,IAAMjzB,EAAQkrC,OAAQ,EAAG,IACxC,GAAIA,IAAWjqC,KAAKiqC,OAAQ,CACxBjqC,KAAKiqC,OAASA,EAAO,IACgC1+B,EADhCG,GAAAC,EAAAA,EAAAA,GACc3L,KAAKgqC,eAAa,IAArD,IAAAt+B,EAAAE,MAAAL,EAAAG,EAAAG,KAAA5H,MAAuD,KAAAwmC,GAAArK,EAAAA,EAAAA,GAAA70B,EAAAxL,MAAA,GAA3CmnC,EAAIuD,EAAA,GAAEzmB,EAAYymB,EAAA,GAC1BzqC,KAAK0qC,kBAAkBxD,EAAMljB,EACjC,CAAC,OAAAlY,GAAAJ,EAAAvH,EAAA2H,EAAA,SAAAJ,EAAAK,GAAA,CACL,CACJ,CACA,GAA0C,qBAA/BhN,EAAQ4rC,mBAAoC,CACnD,IAAMP,EAA2BrrC,EAAQ4rC,qBAAuBtB,EAAmBrK,KACnF,GAAIoL,IAA6BpqC,KAAKoqC,yBAA0B,CAC5DpqC,KAAKoqC,yBAA2BA,EAAyB,IACJ39B,EADIC,GAAAf,EAAAA,EAAAA,GACtB3L,KAAKgqC,eAAa,IAArD,IAAAt9B,EAAAd,MAAAa,EAAAC,EAAAb,KAAA5H,MAAuD,KAAA2mC,GAAAxK,EAAAA,EAAAA,GAAA3zB,EAAA1M,MAAA,GAA3CmnC,EAAI0D,EAAA,GAAE5mB,EAAY4mB,EAAA,GAC1B5qC,KAAK6qC,oBAAoB3D,EAAMljB,EACnC,CAAC,OAAAlY,GAAAY,EAAAvI,EAAA2H,EAAA,SAAAY,EAAAX,GAAA,CAED,GADA/L,KAAKsqC,uBAAuBvlC,UACxBqlC,EAA0B,CAC1B,IAAMljC,EAAc,IAAIhF,EAAAA,GACxBlC,KAAK6pC,YAAY3lC,YAAYlE,KAAK8qC,wBAAyB9qC,KAAMkH,GACjElH,KAAKsqC,uBAAyBpjC,EAC9BlH,KAAK8qC,wBAAwB9qC,KAAK6pC,YAAY7I,SAClD,CACJ,CACJ,CACuD,qBAA5CjiC,EAAQorC,kCACfnqC,KAAKmqC,gCAAkCprC,EAAQorC,gCAEvD,GAAC,CAAArqC,IAAA,iBAAAC,MACD,SAAejB,GACX,IAAM0I,GAAKwB,EAAAA,EAAAA,QAAOlK,GAAWmK,EAAAA,EAAAA,GAAE,mBACzBghC,GAASjhC,EAAAA,EAAAA,QAAOxB,GAAIyB,EAAAA,EAAAA,GAAE,sBACtB8hC,GAAU/hC,EAAAA,EAAAA,QAAOxB,GAAIyB,EAAAA,EAAAA,GAAE,uBACvB+hC,GAAWhiC,EAAAA,EAAAA,QAAOxB,GAAIyB,EAAAA,EAAAA,GAAE,wBACxB+a,EAAehkB,KAAK49B,SAASK,eAAe+M,GAClD,MAAO,CAAElsC,UAAAA,EAAWmrC,OAAAA,EAAQc,QAAAA,EAAST,uBAAwB9oC,EAAAA,GAAWw9B,KAAMhb,aAAAA,EAClF,GAAC,CAAAlkB,IAAA,gBAAAC,MACD,SAAcmnC,EAAM7sB,EAAO2J,EAAc3gB,GACrCrD,KAAKgqC,cAAc/jC,IAAIihC,EAAMljB,GAC7BhkB,KAAK+pC,iBAAiB9jC,IAAIihC,EAAK1nC,QAAS0nC,GACxClnC,KAAK0qC,kBAAkBxD,EAAMljB,GAC7BhkB,KAAK49B,SAASQ,cAAc8I,EAAM7sB,EAAO2J,EAAaA,aAAc3gB,EACxE,GAAC,CAAAvD,IAAA,iBAAAC,MACD,SAAemnC,EAAM7sB,EAAO2J,EAAc3gB,GACtC,IAAI8J,EAAIib,EACRpE,EAAasmB,uBAAuBvlC,UACW,QAA9CqjB,GAAMjb,EAAKnN,KAAK49B,UAAUS,sBAAmC,IAAPjW,GAAyBA,EAAGlpB,KAAKiO,EAAI+5B,EAAM7sB,EAAO2J,EAAaA,aAAc3gB,GAC9G,kBAAXA,IACPrD,KAAKgqC,cAAcxL,OAAO0I,GAC1BlnC,KAAK+pC,iBAAiBvL,OAAO0I,EAAK1nC,SAE1C,GAAC,CAAAM,IAAA,kBAAAC,MACD,SAAgBikB,GACZhkB,KAAK49B,SAASU,gBAAgBta,EAAaA,aAC/C,GAAC,CAAAlkB,IAAA,0BAAAC,MACD,SAAwBP,GACpB,IAAM0nC,EAAOlnC,KAAK+pC,iBAAiB/jC,IAAIxG,GAClC0nC,GAGLlnC,KAAKuqC,4BAA4BrD,EACrC,GAAC,CAAApnC,IAAA,8BAAAC,MACD,SAA4BmnC,GACxB,IAAMljB,EAAehkB,KAAKgqC,cAAchkC,IAAIkhC,GACvCljB,IAGLhkB,KAAK8qC,wBAAwB9qC,KAAK6pC,YAAY7I,UAC9ChhC,KAAK0qC,kBAAkBxD,EAAMljB,GACjC,GAAC,CAAAlkB,IAAA,oBAAAC,MACD,SAAkBmnC,EAAMljB,GAAc,IAAAinB,EAC5BhB,EAASN,EAAaO,eAAiBhD,EAAKgE,MAAQ,GAAKlrC,KAAKiqC,OACpEjmB,EAAa+mB,QAAQvqC,MAAM2qC,YAAc,GAAHjiC,OAAM+gC,EAAM,MAClDjmB,EAAaimB,OAAOzpC,MAAMG,MAAQ,GAAHuI,OAAM+gC,EAASjqC,KAAKiqC,OAAS,GAAE,MAC1D/C,EAAKkE,YACLpnB,EAAallB,UAAUuB,aAAa,gBAAiB6hC,QAAQgF,EAAKmE,YAGlErnB,EAAallB,UAAUwsC,gBAAgB,kBAE3CL,EAAAjnB,EAAa+mB,QAAQ5qC,WAAUU,OAAM4N,MAAAw8B,GAAAv8B,EAAAA,EAAAA,GAAIC,EAAAA,EAAUC,iBAAiBoJ,EAAAA,EAAQuzB,oBAC5E,IAAIC,GAAkB,EAItB,GAHIxrC,KAAK49B,SAAS6N,gBACdD,EAAkBxrC,KAAK49B,SAAS6N,cAAcvE,EAAK1nC,QAASwkB,EAAa+mB,UAEzE7D,EAAKkE,eAAiBprC,KAAKmqC,iCAAmCjD,EAAKwE,qBAAuB,GAAI,CACxE,IAAAC,EAAtB,IAAKH,GACDG,EAAA3nB,EAAa+mB,QAAQ5qC,WAAUC,IAAGqO,MAAAk9B,GAAAj9B,EAAAA,EAAAA,GAAIC,EAAAA,EAAUC,iBAAiBoJ,EAAAA,EAAQuzB,oBAE7EvnB,EAAa+mB,QAAQ5qC,UAAUC,IAAI,eACnC4jB,EAAa+mB,QAAQ5qC,UAAUiK,OAAO,YAAa88B,EAAKmE,UAC5D,MAEIrnB,EAAa+mB,QAAQ5qC,UAAUU,OAAO,cAAe,aAEzDb,KAAK6qC,oBAAoB3D,EAAMljB,EACnC,GAAC,CAAAlkB,IAAA,sBAAAC,MACD,SAAoBmnC,EAAMljB,GAAc,IAAAjZ,EAAA,KAGpC,IAFAwzB,EAAAA,EAAAA,WAAUva,EAAaimB,QACvBjmB,EAAasmB,uBAAuBvlC,UAC/B/E,KAAKoqC,yBAAV,CAKA,IAFA,IAAMwB,EAAkB,IAAI1pC,EAAAA,GACtBmmC,EAAQroC,KAAKsnC,gBAAgBuE,EAAA,WAE/B,IAAMvD,EAAMD,EAAME,gBAAgBrB,GAC5B2B,EAAYR,EAAMS,sBAAsBR,GAC9C,IAAKO,EAAW,SAGhB,IAAMjrB,EAASyqB,EAAMW,QAAQH,GACvBiD,GAAQ7iC,EAAAA,EAAAA,GAAE,gBAAiB,CAAEzI,MAAO,UAAF0I,OAAY6B,EAAKk/B,OAAM,QAC3Dl/B,EAAKs/B,kBAAkB0B,IAAInuB,IAC3BkuB,EAAM3rC,UAAUC,IAAI,UAEsB,IAA1C4jB,EAAaimB,OAAO+B,kBACpBhoB,EAAaimB,OAAO3pC,YAAYwrC,GAGhC9nB,EAAaimB,OAAOpsB,aAAaiuB,EAAO9nB,EAAaimB,OAAOgC,mBAEhElhC,EAAK++B,qBAAqB1pC,IAAIwd,EAAQkuB,GACtCF,EAAgBxrC,KAAIsK,EAAAA,EAAAA,KAAa,kBAAMK,EAAK++B,qBAAqBtL,OAAO5gB,EAAQkuB,EAAM,KACtF5E,EAAOtpB,CACX,GApBWiuB,MAqBX7nB,EAAasmB,uBAAyBsB,CAxBtC,CAyBJ,GAAC,CAAA9rC,IAAA,0BAAAC,MACD,SAAwB2nC,GAAO,IAAAnmB,EAAA,KAC3B,GAAKvhB,KAAKoqC,yBAAV,CAGA,IAAMnkC,EAAM,IAAIu3B,IACV6K,EAAQroC,KAAKsnC,gBACnBI,EAAM9gB,SAAQ,SAAAsgB,GACV,IAAMoB,EAAMD,EAAME,gBAAgBrB,GAClC,IACI,IAAM2B,EAAYR,EAAMS,sBAAsBR,GAC1CpB,EAAKkE,aAAelE,EAAK5N,SAASp0B,OAAS,IAAMgiC,EAAKmE,UACtDplC,EAAI7F,IAAI8mC,GAEH2B,GACL5iC,EAAI7F,IAAIioC,EAAMW,QAAQH,GAE9B,CACA,MAAO17B,GACH,CAER,IACAnN,KAAKqqC,kBAAkBzjB,SAAQ,SAAAsgB,GACtBjhC,EAAI8lC,IAAI7E,IACT3lB,EAAKuoB,qBAAqBljB,QAAQsgB,GAAM,SAAAgF,GAAI,OAAIA,EAAK/rC,UAAUU,OAAO,SAAS,GAEvF,IACAoF,EAAI2gB,SAAQ,SAAAsgB,GACH3lB,EAAK8oB,kBAAkB0B,IAAI7E,IAC5B3lB,EAAKuoB,qBAAqBljB,QAAQsgB,GAAM,SAAAgF,GAAI,OAAIA,EAAK/rC,UAAUC,IAAI,SAAS,GAEpF,IACAJ,KAAKqqC,kBAAoBpkC,CA5BzB,CA6BJ,GAAC,CAAAnG,IAAA,UAAAC,MACD,WACIC,KAAKgqC,cAAcz/B,QACnBvK,KAAK+pC,iBAAiBx/B,QACtBvK,KAAKsqC,uBAAuBvlC,WAC5BA,EAAAA,EAAAA,IAAQ/E,KAAKkH,YACjB,KAACyiC,CAAA,CA3La,GA6LlBA,EAAaO,cAAgB,EAAE,IAyHpBiC,EAKAC,EA7HLC,EAAU,WAGZ,SAAAA,EAAYC,EAAMC,EAAiCC,IAASvtC,EAAAA,EAAAA,GAAA,KAAAotC,GACxDrsC,KAAKssC,KAAOA,EACZtsC,KAAKusC,gCAAkCA,EACvCvsC,KAAKwsC,QAAUA,EACfxsC,KAAKysC,YAAc,EACnBzsC,KAAK0sC,YAAc,EACnB1sC,KAAK2sC,SAAW,GAChB3sC,KAAK4sC,kBAAoB,GACzB5sC,KAAKkH,YAAc,IAAIhF,EAAAA,GACvBoqC,EAAKO,eAAe7sC,KAAK8sC,MAAO9sC,KAAMA,KAAKkH,YAC/C,CAuEC,OAvEArH,EAAAA,EAAAA,GAAAwsC,EAAA,EAAAvsC,IAAA,aAAAkG,IAZD,WAAmB,OAAOhG,KAAKysC,WAAa,GAAC,CAAA3sC,IAAA,aAAAkG,IAC7C,WAAmB,OAAOhG,KAAK0sC,WAAa,GAAC,CAAA5sC,IAAA,SAAAC,MAY7C,SAAOP,EAASutC,GACZ,IAAI98B,EAAa,EACjB,GAAIjQ,KAAKwsC,QAAS,CACd,IAAM/wB,EAASzb,KAAKwsC,QAAQ7e,OAAOnuB,EAASutC,GAU5C,GAAmB,KARf98B,EADkB,mBAAXwL,EACMA,EAAS,EAAiC,GAElDuxB,EAAAA,EAAAA,IAAevxB,IACPwxB,EAAAA,EAAAA,IAAgBxxB,EAAOxL,YAGvBwL,GAGb,OAAO,CAEf,CAEA,GADAzb,KAAKysC,eACAzsC,KAAK2sC,SAEN,OADA3sC,KAAK0sC,cACE,CAAE/oB,KAAMupB,EAAAA,GAAWC,QAASl9B,WAAAA,GAEvC,IAEsBomB,EAFhBnJ,EAAQltB,KAAKusC,gCAAgCa,2BAA2B5tC,GACxE6tC,EAASC,MAAMC,QAAQrgB,GAASA,EAAQ,CAACA,GAAOsJ,GAAA7qB,EAAAA,EAAAA,GACtC0hC,GAAM,IAAtB,IAAA7W,EAAA5qB,MAAAyqB,EAAAG,EAAA3qB,KAAA5H,MAAwB,KAAbupC,EAACnX,EAAAt2B,MACF0tC,EAAWD,GAAKA,EAAEniB,WACxB,GAAwB,qBAAboiB,EACP,MAAO,CAAE9pB,KAAMupB,EAAAA,GAAWC,QAASl9B,WAAAA,GAEvC,IAAI4J,OAAK,EACT,GAAI7Z,KAAKssC,KAAKoB,gBAAkBtB,EAAkBuB,WAAY,CAC1D,IAAMtzB,EAAQozB,EAAS9d,cAAckJ,QAAQ74B,KAAK4sC,mBAClD,GAAIvyB,GAAS,EAAG,CACZR,EAAQ,CAACtX,OAAOC,iBAAkB,GAClC,IAAK,IAAIqE,EAAI7G,KAAK4sC,kBAAkB1nC,OAAQ2B,EAAI,EAAGA,IAC/CgT,EAAM0E,KAAKlE,EAAQxT,EAAI,EAE/B,CACJ,MAEIgT,GAAQ+zB,EAAAA,EAAAA,IAAW5tC,KAAK2sC,SAAU3sC,KAAK4sC,kBAAmB,EAAGa,EAAUA,EAAS9d,cAAe,EAAG,CAAEke,qBAAqB,EAAMC,gBAAgB,IAEnJ,GAAIj0B,EAEA,OADA7Z,KAAK0sC,cACoB,IAAlBW,EAAOnoC,OACV,CAAEye,KAAM9J,EAAO5J,WAAAA,GACf,CAAE0T,KAAM,CAAEuJ,MAAOugB,EAAU5zB,MAAOA,GAAS5J,WAAAA,EAEvD,CAAC,OAAAnE,GAAA0qB,EAAAryB,EAAA2H,EAAA,SAAA0qB,EAAAzqB,GAAA,CACD,OAAI/L,KAAKssC,KAAKyB,WAAa5B,EAAa6B,OACmB,kBAA5ChuC,KAAKssC,KAAKvtC,QAAQkvC,sBAClBjuC,KAAKssC,KAAKvtC,QAAQkvC,sBAEpBjuC,KAAKssC,KAAKvtC,QAAQkvC,sBAChBjuC,KAAKssC,KAAKvtC,QAAQkvC,sBAAsBzuC,GAGxC,EAIJ,CAAEmkB,KAAMupB,EAAAA,GAAWC,QAASl9B,WAAAA,EAE3C,GAAC,CAAAnQ,IAAA,QAAAC,MACD,WACIC,KAAKysC,YAAc,EACnBzsC,KAAK0sC,YAAc,CACvB,GAAC,CAAA5sC,IAAA,UAAAC,MACD,YACIgF,EAAAA,EAAAA,IAAQ/E,KAAKkH,YACjB,KAACmlC,CAAA,CApFW,GAiHI6B,EAAAA,GACF/M,EAAAA,GAOlB,SAAWgL,GACPA,EAAaA,EAAwB,UAAI,GAAK,YAC9CA,EAAaA,EAAqB,OAAI,GAAK,QAC9C,CAHD,CAGGA,IAAiBA,EAAe,CAAC,IAEpC,SAAWC,GACPA,EAAkBA,EAAyB,MAAI,GAAK,QACpDA,EAAkBA,EAA8B,WAAI,GAAK,YAC5D,CAHD,CAGGA,IAAsBA,EAAoB,CAAC,IAAI,IAgL5C+B,EAAc,WA4BhB,SAAAA,EAAY7B,EAAMjE,EAAO1W,EAAMhE,EAAQrJ,GAAmC,IAClEnX,EAAIib,EADgDrpB,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAChG,EAAAA,EAAAA,GAAA,KAAAkvC,GAEpEnuC,KAAKssC,KAAOA,EACZtsC,KAAK2xB,KAAOA,EACZ3xB,KAAK2tB,OAASA,EACd3tB,KAAKskB,oBAAsBA,EAC3BtkB,KAAKjB,QAAUA,EACfiB,KAAK2sC,SAAW,GAChB3sC,KAAKW,MAAQ,EACbX,KAAKouC,iBAAmB,IAAIxsC,EAAAA,GAC5B5B,KAAKquC,gBAAkBruC,KAAKouC,iBAAiBtsC,MAC7C9B,KAAKsuC,sBAAwB,IAAI1sC,EAAAA,GACjC5B,KAAKuuC,qBAAuBvuC,KAAKsuC,sBAAsBxsC,MACvD9B,KAAKwuC,oBAAsB,IAAI5sC,EAAAA,GAC/B5B,KAAKyuC,sBAAwB,IAAI7sC,EAAAA,GACjC5B,KAAK0uC,qBAAuB1uC,KAAKyuC,sBAAsB3sC,MACvD9B,KAAK2uC,mBAAqB,IAAIzsC,EAAAA,GAC9BlC,KAAKkH,YAAc,IAAIhF,EAAAA,GACvBlC,KAAK4uC,MAAgD,QAAvCzhC,EAAKm/B,EAAKvtC,QAAQ8vC,uBAAoC,IAAP1hC,EAAgBA,EAAKg/B,EAAa2C,UAC/F9uC,KAAK+uC,WAA0D,QAA5C3mB,EAAKkkB,EAAKvtC,QAAQiwC,4BAAyC,IAAP5mB,EAAgBA,EAAKgkB,EAAkB6C,MAC9G5G,EAAM6G,YAAYlvC,KAAKmvC,iBAAkBnvC,KAAMA,KAAKkH,YACxD,CAkDC,OAlDArH,EAAAA,EAAAA,GAAAsuC,EAAA,EAAAruC,IAAA,UAAAkG,IAhDD,WAAgB,OAAOhG,KAAK2sC,QAAU,GAAC,CAAA7sC,IAAA,OAAAkG,IACvC,WAAa,OAAOhG,KAAK4uC,KAAO,EAAC3oC,IACjC,SAASmpC,GACDA,IAASpvC,KAAK4uC,QAGlB5uC,KAAK4uC,MAAQQ,EACTpvC,KAAKqvC,SACLrvC,KAAKqvC,OAAOD,KAAOpvC,KAAK4uC,OAE5B5uC,KAAKssC,KAAKgD,WACVtvC,KAAK4T,SACL5T,KAAKouC,iBAAiBtqC,KAAKsrC,GAC/B,GAAC,CAAAtvC,IAAA,YAAAkG,IACD,WAAkB,OAAOhG,KAAK+uC,UAAY,EAAC9oC,IAC3C,SAAcspC,GACNA,IAAcvvC,KAAK+uC,aAGvB/uC,KAAK+uC,WAAaQ,EACdvvC,KAAKqvC,SACLrvC,KAAKqvC,OAAOE,UAAYvvC,KAAK+uC,YAEjC/uC,KAAKssC,KAAKgD,WACVtvC,KAAK4T,SACL5T,KAAKsuC,sBAAsBxqC,KAAKyrC,GACpC,GAAC,CAAAzvC,IAAA,gBAAAC,MAuBD,WAAkC,IAApByvC,EAAavqC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,OACWlE,IAAlCyuC,EAAcX,kBACd7uC,KAAKovC,KAAOI,EAAcX,sBAEa9tC,IAAvCyuC,EAAcR,uBACdhvC,KAAKuvC,UAAYC,EAAcR,qBAEvC,GAAC,CAAAlvC,IAAA,mBAAAC,MACD,WACSC,KAAKqvC,QAAkC,IAAxBrvC,KAAKyvC,QAAQvqC,SAGjClF,KAAKssC,KAAKgD,WACVtvC,KAAK4T,SACT,GAAC,CAAA9T,IAAA,SAAAC,MACD,WACI,IAAIoN,EAAIib,EAAIC,EAAIkL,EACVmc,EAAY1vC,KAAK2tB,OAAOgiB,WAAa,GAAgC,IAA3B3vC,KAAK2tB,OAAOiiB,WACxD5vC,KAAKyvC,SAAWC,EACqC,QAAhDviC,EAAKnN,KAAKssC,KAAKvtC,QAAQ8wC,2BAAwC,IAAP1iC,GAAgBA,EAClD,QAAtBib,EAAKpoB,KAAKqvC,cAA2B,IAAPjnB,GAAyBA,EAAG0nB,YAAY,CAAE5c,KAAM,EAA6B1L,SAAS4F,EAAAA,EAAAA,IAAS,YAAa,wBAGpH,QAAtB/E,EAAKroB,KAAKqvC,cAA2B,IAAPhnB,GAAyBA,EAAGynB,YAAY,CAAE5c,KAAM,IAI5D,QAAtBK,EAAKvzB,KAAKqvC,cAA2B,IAAP9b,GAAyBA,EAAGwc,cAEnE,GAAC,CAAAjwC,IAAA,mBAAAC,MACD,SAAiBmnC,GACb,OAAKlnC,KAAKqvC,SAAWrvC,KAAKyvC,SAAWzvC,KAAK4uC,QAAUzC,EAAa6B,SAG7DhuC,KAAK2tB,OAAOgiB,WAAa,GAAK3vC,KAAK2tB,OAAOiiB,YAAc,IAGpD1C,EAAAA,GAAW8C,UAAU9I,EAAK+I,YACtC,GAAC,CAAAnwC,IAAA,SAAAC,MACD,SAAOY,GACH,IAAIwM,EACJnN,KAAKW,MAAQA,EACU,QAAtBwM,EAAKnN,KAAKqvC,cAA2B,IAAPliC,GAAyBA,EAAG7I,OAAO3D,EACtE,GAAC,CAAAb,IAAA,UAAAC,MACD,WACIC,KAAKkwC,cAAWnvC,EAChBf,KAAKwuC,oBAAoBzpC,UACzB/E,KAAK2uC,mBAAmB5pC,UACxB/E,KAAKkH,YAAYnC,SACrB,KAACopC,CAAA,CAnGe,GAqGpB,SAASgC,EAAiBruC,GACtB,IAAIsE,EAASgqC,EAAAA,GAAqBC,QAUlC,OATIC,EAAAA,EAAAA,oBAAmBxuC,EAAMgc,aAAa1X,OAAQ,oBAAqB,iBACnEA,EAASgqC,EAAAA,GAAqBG,SAEzBD,EAAAA,EAAAA,oBAAmBxuC,EAAMgc,aAAa1X,OAAQ,qBAAsB,iBACzEA,EAASgqC,EAAAA,GAAqB5gC,SAEzB8gC,EAAAA,EAAAA,oBAAmBxuC,EAAMgc,aAAa1X,OAAQ,0BAA2B,iBAC9EA,EAASgqC,EAAAA,GAAqBpC,QAE3B,CACHlwB,aAAchc,EAAMgc,aACpBte,QAASsC,EAAMtC,QAAUsC,EAAMtC,QAAQA,QAAU,KACjD4G,OAAAA,EAER,CACA,SAASoqC,EAAItJ,EAAMuJ,GACfA,EAAGvJ,GACHA,EAAK5N,SAAS1S,SAAQ,SAAA6I,GAAK,OAAI+gB,EAAI/gB,EAAOghB,EAAG,GACjD,CACA,IAIMC,EAAK,WAOP,SAAAA,EAAYC,EAA8BC,IAAkB3xC,EAAAA,EAAAA,GAAA,KAAAyxC,GACxD1wC,KAAK2wC,6BAA+BA,EACpC3wC,KAAK4wC,iBAAmBA,EACxB5wC,KAAK0nC,MAAQ,GACb1nC,KAAKwI,aAAe,IAAI5G,EAAAA,GACxB5B,KAAKkE,YAAclE,KAAKwI,aAAa1G,KACzC,CAsEC,OAtEAjC,EAAAA,EAAAA,GAAA6wC,EAAA,EAAA5wC,IAAA,UAAAkG,IAZD,WAII,OAHKhG,KAAK6wC,WACN7wC,KAAK6wC,SAAW7wC,KAAK8wC,iBAElB9wC,KAAK6wC,QAChB,GAAC,CAAA/wC,IAAA,MAAAC,MAQD,SAAI2nC,EAAO5pB,KACgB,OAAjBA,QAA0C,IAAjBA,OAA0B,EAASA,EAAaizB,gBAAiBjrC,EAAAA,EAAAA,IAAO9F,KAAK0nC,MAAOA,IAGnH1nC,KAAKgxC,KAAKtJ,GAAO,EAAO5pB,EAC5B,GAAC,CAAAhe,IAAA,OAAAC,MACD,SAAK2nC,EAAOuJ,EAAQnzB,GAIhB,GAHA9d,KAAK0nC,OAAKh5B,EAAAA,EAAAA,GAAOg5B,GACjB1nC,KAAKghC,cAAWjgC,EAChBf,KAAK6wC,cAAW9vC,GACXkwC,EAAQ,CACT,IAAMC,EAAOlxC,KACbA,KAAKwI,aAAa1E,KAAK,CAAE,YAAIk9B,GAAa,OAAOkQ,EAAKlrC,KAAO,EAAG8X,aAAAA,GACpE,CACJ,GAAC,CAAAhe,IAAA,MAAAC,MACD,WAII,OAHKC,KAAKghC,WACNhhC,KAAKghC,SAAWhhC,KAAK0nC,MAAM9Z,KAAI,SAAAsZ,GAAI,OAAIA,EAAK1nC,OAAO,MAEvDkP,EAAAA,EAAAA,GAAW1O,KAAKghC,SACpB,GAAC,CAAAlhC,IAAA,WAAAC,MACD,WACI,OAAOC,KAAK0nC,KAChB,GAAC,CAAA5nC,IAAA,MAAAC,MACD,SAAImnC,GACA,OAAOlnC,KAAKmxC,QAAQpF,IAAI7E,EAC5B,GAAC,CAAApnC,IAAA,mBAAAC,MACD,SAAAm4B,GAAkD,IAAAhI,EAAA,KAA/BkhB,EAAalZ,EAAbkZ,cAAeC,EAAYnZ,EAAZmZ,aAC9B,IAAKrxC,KAAK4wC,iBAAkB,CACxB,IAAM3qC,EAAMjG,KAAK8wC,gBACXQ,EAAQ,SAACpK,GAAI,OAAKjhC,EAAIu4B,OAAO0I,EAAK,EAGxC,OAFAmK,EAAazqB,SAAQ,SAAAsgB,GAAI,OAAIsJ,EAAItJ,EAAMoK,EAAM,SAC7CtxC,KAAKiG,KAAGyI,EAAAA,EAAAA,GAAKzI,EAAIsrC,UAErB,CACA,IAAMC,EAAoB,IAAIhU,IACxBiU,EAAsB,SAACvK,GAAI,OAAKsK,EAAkBpxC,IAAI8vB,EAAK0gB,iBAAiBc,MAAMxK,EAAK1nC,SAAS6rB,WAAW,EACjHgmB,EAAazqB,SAAQ,SAAAsgB,GAAI,OAAIsJ,EAAItJ,EAAMuK,EAAoB,IAC3D,IAAME,EAAmB,IAAIjU,IACvBkU,EAAuB,SAAC1K,GAAI,OAAKyK,EAAiB1rC,IAAIiqB,EAAK0gB,iBAAiBc,MAAMxK,EAAK1nC,SAAS6rB,WAAY6b,EAAK,EACvHkK,EAAcxqB,SAAQ,SAAAsgB,GAAI,OAAIsJ,EAAItJ,EAAM0K,EAAqB,IAC7D,IAC6BjZ,EADvB+O,EAAQ,GAAG9O,GAAAjtB,EAAAA,EAAAA,GACE3L,KAAK0nC,OAAK,IAA7B,IAAA9O,EAAAhtB,MAAA+sB,EAAAC,EAAA/sB,KAAA5H,MAA+B,KAApBijC,EAAIvO,EAAA54B,MACL0kC,EAAKzkC,KAAK4wC,iBAAiBc,MAAMxK,EAAK1nC,SAAS6rB,WAErD,GADmBmmB,EAAkBzF,IAAItH,GAIpC,CACD,IAAMoN,EAAeF,EAAiB3rC,IAAIy+B,GACtCoN,GAAgBA,EAAa9f,SAC7B2V,EAAMnpB,KAAKszB,EAEnB,MAPInK,EAAMnpB,KAAK2oB,EAQnB,CAAC,OAAAp7B,GAAA8sB,EAAAz0B,EAAA2H,EAAA,SAAA8sB,EAAA7sB,GAAA,CACD,GAAI/L,KAAK0nC,MAAMxiC,OAAS,GAAsB,IAAjBwiC,EAAMxiC,OAAc,CAC7C,IAAMgiC,EAAOlnC,KAAK2wC,+BACdzJ,GACAQ,EAAMnpB,KAAK2oB,EAEnB,CACAlnC,KAAKgxC,KAAKtJ,GAAO,EACrB,GAAC,CAAA5nC,IAAA,gBAAAC,MACD,WACI,IAC6Bi5B,EADvB/yB,EAAM,IAAIu3B,IAAMrE,GAAAxtB,EAAAA,EAAAA,GACH3L,KAAK0nC,OAAK,IAA7B,IAAAvO,EAAAvtB,MAAAotB,EAAAG,EAAAttB,KAAA5H,MAA+B,KAApBijC,EAAIlO,EAAAj5B,MACXkG,EAAI7F,IAAI8mC,EACZ,CAAC,OAAAp7B,GAAAqtB,EAAAh1B,EAAA2H,EAAA,SAAAqtB,EAAAptB,GAAA,CACD,OAAO9F,CACX,KAACyqC,CAAA,CAnFM,GAqFLoB,EAA2B,SAAAC,IAAApzC,EAAAA,EAAAA,GAAAmzC,EAAAC,GAAA,IAAAC,GAAAnzC,EAAAA,EAAAA,GAAAizC,GAC7B,SAAAA,EAAY9R,EAAMsM,GAAM,IAAAlc,EAEH,OAFGnxB,EAAAA,EAAAA,GAAA,KAAA6yC,IACpB1hB,EAAA4hB,EAAA9yC,KAAA,KAAM8gC,IACDsM,KAAOA,EAAKlc,CACrB,CAuDC,OAvDAvwB,EAAAA,EAAAA,GAAAiyC,EAAA,EAAAhyC,IAAA,gBAAAC,MACD,SAAcoE,GACV,MAAI8tC,EAAAA,EAAAA,IAAS9tC,EAAE2Z,aAAa1X,UACxB8rC,EAAAA,EAAAA,IAAe/tC,EAAE2Z,aAAa1X,UAC9B+rC,EAAAA,EAAAA,IAAehuC,EAAE2Z,aAAa1X,WAG9BjC,EAAE2Z,aAAas0B,gBAAnB,CAGA,IAAMlL,EAAO/iC,EAAE3E,QACf,IAAK0nC,EACD,OAAA55B,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAukC,EAAAxqC,WAAA,sBAAApI,KAAA,KAA2BiF,GAE/B,GAAInE,KAAKqyC,4BAA4BluC,IAAMnE,KAAKsyC,6BAA6BnuC,GACzE,OAAAmJ,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAukC,EAAAxqC,WAAA,sBAAApI,KAAA,KAA2BiF,GAE/B,IAAMiC,EAASjC,EAAE2Z,aAAa1X,OACxBmsC,EAAYnsC,EAAOjG,UAAUiB,SAAS,sBACpCgF,EAAOjG,UAAUiB,SAAS,sBAAwBgF,EAAOjG,UAAUiB,SAAS,gBAAkB+C,EAAE2Z,aAAa/I,QAAU,GAC3Hy9B,GAA2B,EAO/B,IALIA,EAD8C,oBAAvCxyC,KAAKssC,KAAKkG,yBACUxyC,KAAKssC,KAAKkG,yBAAyBtL,EAAK1nC,WAGtCQ,KAAKssC,KAAKkG,4BAEVD,GAAuC,IAA1BpuC,EAAE2Z,aAAagG,OACzD,OAAAxW,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAukC,EAAAxqC,WAAA,sBAAApI,KAAA,KAA2BiF,GAE/B,IAAKnE,KAAKssC,KAAKmG,qBAAiD,IAA1BtuC,EAAE2Z,aAAagG,OACjD,OAAAxW,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAukC,EAAAxqC,WAAA,sBAAApI,KAAA,KAA2BiF,GAE/B,GAAI+iC,EAAKkE,YAAa,CAClB,IAAMsH,EAAW1yC,KAAKssC,KAAK/D,gBAAgBrB,GACrCyL,EAAYxuC,EAAE2Z,aAAa5R,OAGjC,GAFAlM,KAAKssC,KAAKtgB,SAAS,CAAC0mB,IACpB1yC,KAAKssC,KAAKsG,gBAAgBF,EAAUC,GAChCH,GAA4BD,EAG5B,YADApuC,EAAE2Z,aAAas0B,iBAAkB,EAGzC,EACA9kC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAukC,EAAAxqC,WAAA,sBAAApI,KAAA,KAAoBiF,EAnCpB,CAoCJ,GAAC,CAAArE,IAAA,gBAAAC,MACD,SAAcoE,IACQA,EAAE2Z,aAAa1X,OAAOjG,UAAUiB,SAAS,sBACzCpB,KAAKssC,KAAKmG,sBAGxBtuC,EAAE2Z,aAAas0B,kBAGnB9kC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAukC,EAAAxqC,WAAA,sBAAApI,KAAA,KAAoBiF,GACxB,KAAC2tC,CAAA,CA3D4B,CAASe,EAAAA,IAiEpCC,EAAY,SAAAC,IAAAp0C,EAAAA,EAAAA,GAAAm0C,EAAAC,GAAA,IAAAC,GAAAn0C,EAAAA,EAAAA,GAAAi0C,GACd,SAAAA,EAAY5T,EAAMpgC,EAAWqgC,EAAiBhC,EAAW8V,EAAYC,EAAgBC,EAAap0C,GAAS,IAAAq0C,EAIxE,OAJwEn0C,EAAAA,EAAAA,GAAA,KAAA6zC,IACvGM,EAAAJ,EAAA9zC,KAAA,KAAMggC,EAAMpgC,EAAWqgC,EAAiBhC,EAAWp+B,IAC9Ck0C,WAAaA,EAClBG,EAAKF,eAAiBA,EACtBE,EAAKD,YAAcA,EAAYC,CACnC,CAuDC,OAvDAvzC,EAAAA,EAAAA,GAAAizC,EAAA,EAAAhzC,IAAA,wBAAAC,MACD,SAAsBhB,GAClB,OAAO,IAAI+yC,EAA4B9xC,KAAMjB,EAAQutC,KACzD,GAAC,CAAAxsC,IAAA,SAAAC,MACD,SAAOu2B,EAAOyK,GAA4B,IAAAsS,EAAA,KAAfrS,EAAQ/7B,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,GAElC,IADAqI,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAulC,EAAAxrC,WAAA,eAAApI,KAAA,KAAao3B,EAAOyK,EAAaC,GACT,IAApBA,EAAS97B,OAAb,CAGA,IAEIouC,EAFEC,EAAkB,GAClBC,EAAsB,GAE5BxS,EAASpa,SAAQ,SAACsgB,EAAM7sB,GAChBg5B,EAAKJ,WAAWlH,IAAI7E,IACpBqM,EAAgBh1B,KAAK+X,EAAQjc,GAE7Bg5B,EAAKH,eAAenH,IAAI7E,IACxBsM,EAAoBj1B,KAAK+X,EAAQjc,GAEjCg5B,EAAKF,YAAYpH,IAAI7E,KACrBoM,EAAShd,EAAQjc,EAEzB,IACIk5B,EAAgBruC,OAAS,IACzBoI,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAulC,EAAAxrC,WAAA,iBAAApI,KAAA,MAAeu0C,EAAAA,EAAAA,IAAS,GAADvqC,QAAAwF,EAAAA,EAAAA,IAAApB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAulC,EAAAxrC,WAAA,iBAAApI,KAAC,OAAyBq0C,KAEjDC,EAAoBtuC,OAAS,IAC7BoI,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAulC,EAAAxrC,WAAA,qBAAApI,KAAA,MAAmBu0C,EAAAA,EAAAA,IAAS,GAADvqC,QAAAwF,EAAAA,EAAAA,IAAApB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAulC,EAAAxrC,WAAA,qBAAApI,KAAC,OAA6Bs0C,KAEvC,kBAAXF,IACPhmC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAulC,EAAAxrC,WAAA,kBAAApI,KAAA,KAAgBo0C,EAtBpB,CAwBJ,GAAC,CAAAxzC,IAAA,WAAAC,MACD,SAAS6vB,EAAS9R,GAA+B,IAAA41B,EAAA,KAAjBC,EAAO1uC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,IAAAA,UAAA,IACnCqI,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAulC,EAAAxrC,WAAA,iBAAApI,KAAA,KAAe0wB,EAAS9R,GACnB61B,GACD3zC,KAAKizC,WAAWhtC,IAAI2pB,EAAQhC,KAAI,SAAA/mB,GAAC,OAAI6sC,EAAKl0C,QAAQqH,EAAE,IAAGiX,EAE/D,GAAC,CAAAhe,IAAA,eAAAC,MACD,SAAa6vB,EAAS9R,GAA+B,IAAA81B,EAAA,KAAjBD,EAAO1uC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,IAAAA,UAAA,IACvCqI,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAulC,EAAAxrC,WAAA,qBAAApI,KAAA,KAAmB0wB,EAAS9R,GACvB61B,GACD3zC,KAAKkzC,eAAejtC,IAAI2pB,EAAQhC,KAAI,SAAA/mB,GAAC,OAAI+sC,EAAKp0C,QAAQqH,EAAE,IAAGiX,EAEnE,GAAC,CAAAhe,IAAA,YAAAC,MACD,SAAUsa,GAAwB,IAAjBs5B,EAAO1uC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,IAAAA,UAAA,IACpBqI,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAulC,EAAAxrC,WAAA,kBAAApI,KAAA,KAAgBmb,GACXs5B,IACoB,qBAAVt5B,EACPra,KAAKmzC,YAAYltC,IAAI,IAGrBjG,KAAKmzC,YAAYltC,IAAI,CAACjG,KAAKR,QAAQ6a,KAG/C,KAACy4B,CAAA,CA7Da,CAASlmB,EAAAA,IA+DdinB,EAAY,WAoBrB,SAAAA,EAAYC,EAAOh1C,EAAWihC,EAAU5C,GAA0B,IAC1DhwB,EAD0D4mC,EAAA,KAAfv4B,EAAQvW,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAChG,EAAAA,EAAAA,GAAA,KAAA40C,GAE5D7zC,KAAK8zC,MAAQA,EACb9zC,KAAKwb,SAAWA,EAChBxb,KAAKg0C,cAAgB,IAAIC,EAAAA,GACzBj0C,KAAKk0C,yBAA2BvwC,EAAAA,GAAMq7B,KACtCh/B,KAAKkH,YAAc,IAAIhF,EAAAA,GACvBlC,KAAKm0C,gBAAkB,IAAIvyC,EAAAA,GAC3B5B,KAAK6sC,eAAiB7sC,KAAKm0C,gBAAgBryC,MAC3C9B,KAAKo0C,oBAAsB,IAAIxyC,EAAAA,GAC/B,IAAMyyC,EAAe,IAAI/K,EAAqBvJ,GACxCuU,EAAgC,IAAIC,EAAAA,GACpCC,EAAyB,IAAID,EAAAA,GAC7B1K,EAAc7pC,KAAKkH,YAAY9G,IAAI,IAAIqpC,EAAgB+K,EAAuB1yC,QAC9EgoC,EAAuB,IAAI2K,EAAAA,EACjCz0C,KAAKm9B,UAAYA,EAAUvP,KAAI,SAAApnB,GAAC,OAAI,IAAImjC,EAAanjC,GAAG,kBAAMutC,EAAK1L,KAAK,GAAEiM,EAA8BxyC,MAAO+nC,EAAaC,EAAsBtuB,EAAS,IAAE,IAC/Hmf,EAG1BhN,EAp7BW2Z,EAAevoC,EAg7B+H67B,GAAAjvB,EAAAA,EAAAA,GAC7I3L,KAAKm9B,WAAS,IAA9B,IAAAvC,EAAAhvB,MAAA+uB,EAAAC,EAAA/uB,KAAA5H,MAAgC,KAArBuC,EAACm0B,EAAA56B,MACRC,KAAKkH,YAAY9G,IAAIoG,EACzB,CAAC,OAAAsF,GAAA8uB,EAAAz2B,EAAA2H,EAAA,SAAA8uB,EAAA7uB,GAAA,CAEGyP,EAAS+wB,kCACT5e,EAAS,IAAI0e,EAAWrsC,KAAMwb,EAAS+wB,gCAAiC/wB,EAASmS,QACjFnS,EAAW/U,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAGte,GAAW,CAAEmS,OAAQA,IAChE3tB,KAAKkH,YAAY9G,IAAIutB,IAEzB3tB,KAAKonB,MAAQ,IAAIspB,GAAM,kBAAMqD,EAAKpiB,KAAK+iB,qBAAqB,EAAE,GAAEl5B,EAASo1B,kBACzE5wC,KAAK20C,UAAY,IAAIjE,GAAM,kBAAMqD,EAAKpiB,KAAKsP,sBAAsB,EAAE,GAAEzlB,EAASo1B,kBAC9E5wC,KAAKszC,OAAS,IAAI5C,GAAM,kBAAMqD,EAAKpiB,KAAKijB,kBAAkB,GAAEp5B,EAASo1B,kBACrE5wC,KAAK2xB,KAAO,IAAImhB,EAAagB,EAAOh1C,EAAWu1C,EAAcr0C,KAAKm9B,UAAWn9B,KAAKonB,MAAOpnB,KAAK20C,UAAW30C,KAAKszC,OAAQ7sC,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,GA77BpIwN,EA67BqJ,kBAAMyM,EAAK1L,KAAK,GA77BtJtpC,EA67BwJyc,IA57BxK/U,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG/6B,GAAU,CAAE6xC,iBAAkB7xC,EAAQ6xC,kBAAoB,CACpGc,MAAK,SAAClqC,GACF,OAAOzI,EAAQ6xC,iBAAiBc,MAAMlqC,EAAGhI,QAC7C,GACD+nC,IAAKxoC,EAAQwoC,KAAO,IAAIF,EAAwBC,EAAevoC,EAAQwoC,KAAMsN,4BAA6B91C,EAAQ81C,6BAA+B,CAChJvC,6BAA4B,SAACnuC,GACzB,OAAOpF,EAAQ81C,4BAA4BvC,6BAA6B7rC,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG31B,GAAI,CAAE3E,QAAS2E,EAAE3E,UAC7H,EACA6yC,4BAA2B,SAACluC,GACxB,OAAOpF,EAAQ81C,4BAA4BxC,4BAA4B5rC,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG31B,GAAI,CAAE3E,QAAS2E,EAAE3E,UAC5H,GACDwtB,sBAAuBjuB,EAAQiuB,uBAAyBvmB,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG/6B,EAAQiuB,uBAAwB,CAAE8nB,WAAU,SAAC5N,GAChI,IAAMmB,EAAQf,IACRgB,EAAMD,EAAME,gBAAgBrB,GAC5B2B,EAAYR,EAAMS,sBAAsBR,GAE9C,OADmBD,EAAMW,QAAQH,GACf6C,oBACtB,EACAqJ,YAAW,SAAC7N,GACR,OAAOA,EAAK8N,kBAAoB,CACpC,EAAGpT,UAAW7iC,EAAQiuB,uBAAyBjuB,EAAQiuB,sBAAsB4U,UAAY,SAACsF,GACtF,OAAOnoC,EAAQiuB,sBAAsB4U,UAAUsF,EAAK1nC,QACxD,OAAIuB,EAAWusB,QAASvuB,EAAQiuB,uBAAyBjuB,EAAQiuB,sBAAsBM,QAAU,SAAC4Z,GAC9F,OAAOnoC,EAAQiuB,sBAAsBM,QAAQ4Z,EAAK1nC,QACtD,EAAI,iBAAM,UAAU,EAAEytB,aAAY,SAAC9oB,GAC/B,OAAOpF,EAAQiuB,sBAAsBC,aAAa9oB,EAAE3E,QACxD,EACA2tB,mBAAkB,WACd,OAAOpuB,EAAQiuB,sBAAsBG,oBACzC,EAAGI,cAAexuB,EAAQiuB,uBAAyBjuB,EAAQiuB,sBAAsBO,cAAgB,kBAAMxuB,EAAQiuB,sBAAsBO,eAAe,EAAG,iBAAM,MAAM,EAAE0nB,aAAcl2C,EAAQiuB,uBAAyBjuB,EAAQiuB,sBAAsBioB,aAAe,SAAC/N,GAAI,OAAKnoC,EAAQiuB,sBAAsBioB,aAAa/N,EAAK1nC,QAAQ,EAAG,SAAC0nC,GACnU,OAAOA,EAAKgE,KAChB,EAAGgK,sBAAuBn2C,EAAQiuB,sBAAsBkoB,uBAA0B,SAAAhO,GAC9E,OAAOnoC,EAAQiuB,sBAAsBkoB,sBAAsBhO,EAAK1nC,QACpE,IAAO+sC,gCAAiCxtC,EAAQwtC,iCAAmC9lC,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG/6B,EAAQwtC,iCAAkC,CAAEa,2BAA0B,SAAClG,GACtL,OAAOnoC,EAAQwtC,gCAAgCa,2BAA2BlG,EAAK1nC,QACnF,QAy5B8L,CAAE8sC,KAAMtsC,QAC1MA,KAAKqoC,MAAQroC,KAAKm1C,YAAYrB,EAAO9zC,KAAK2xB,KAAMnW,GAChD84B,EAA8Bc,MAAQp1C,KAAKqoC,MAAMuB,yBACjD,IAAMyL,EAAmB1xC,EAAAA,GAAMijB,QAAQ5mB,KAAKqoC,MAAM6G,aAAa,SAAA/qC,GAC3D4vC,EAAKC,cAAcsB,cAAa,WAC5BvB,EAAK3sB,MAAMiuB,iBAAiBlxC,GAC5B4vC,EAAKY,UAAUU,iBAAiBlxC,EACpC,GACJ,GAAGnE,KAAKkH,aAmBR,GAjBAmuC,GAAiB,kBAAM,IAAI,GAAE,KAAMr1C,KAAKkH,aAKxCstC,EAAuBY,MAAQzxC,EAAAA,GAAM+pB,MAAM/pB,EAAAA,GAAMC,IAAIyxC,EAAkBr1C,KAAKonB,MAAMljB,YAAalE,KAAK20C,UAAUzwC,cACzGqxC,UAAS,kBAAM,IAAI,GAAE,GACrB3nB,KAAI,WACL,IACwCkN,EADlC70B,EAAM,IAAIu3B,IAAMzC,GAAApvB,EAAAA,EAAAA,GACHooC,EAAK3sB,MAAMouB,YAAU,IAAxC,IAAAza,EAAAnvB,MAAAkvB,EAAAC,EAAAlvB,KAAA5H,MAA0C,KAA/BijC,EAAIpM,EAAA/6B,MACXkG,EAAI7F,IAAI8mC,EACZ,CAAC,OAAAp7B,GAAAivB,EAAA52B,EAAA2H,EAAA,SAAAivB,EAAAhvB,GAAA,KAC2C2vB,EAD3CE,GAAAjwB,EAAAA,EAAAA,GACkBooC,EAAKY,UAAUa,YAAU,IAA5C,IAAA5Z,EAAAhwB,MAAA8vB,EAAAE,EAAA/vB,KAAA5H,MAA8C,KAAnCijC,EAAIxL,EAAA37B,MACXkG,EAAI7F,IAAI8mC,EACZ,CAAC,OAAAp7B,GAAA8vB,EAAAz3B,EAAA2H,EAAA,SAAA8vB,EAAA7vB,GAAA,CACD,OAAA2C,EAAAA,EAAAA,GAAWzI,EAAIsrC,SACnB,IAAGzvC,OAC8B,IAA7B0Z,EAASsR,gBAA2B,CACpC,IAAMU,EAAY7pB,EAAAA,GAAM+pB,MAAM1tB,KAAK2xB,KAAKnE,WACnCG,QAAO,SAAAxpB,GAAC,QAAK+tC,EAAAA,EAAAA,IAAe/tC,EAAEiC,OAAO,IACrCwnB,KAAI,SAAAzpB,GAAC,OAAI,IAAIoiB,EAAAA,EAAsBpiB,EAAE,IAC1CqpB,EAAUG,QAAO,SAAAxpB,GAAC,OAAkB,KAAdA,EAAEsiB,OAAc,IAA0BoH,GAAG7tB,KAAKy1C,YAAaz1C,KAAMA,KAAKkH,aAChGsmB,EAAUG,QAAO,SAAAxpB,GAAC,OAAkB,KAAdA,EAAEsiB,OAAc,IAA2BoH,GAAG7tB,KAAK01C,aAAc11C,KAAMA,KAAKkH,aAClGsmB,EAAUG,QAAO,SAAAxpB,GAAC,OAAkB,KAAdA,EAAEsiB,OAAc,IAAsBoH,GAAG7tB,KAAK21C,QAAS31C,KAAMA,KAAKkH,YAC5F,CACA,IAA2C,QAArCiG,EAAKqO,EAASo6B,yBAAsC,IAAPzoC,GAAgBA,IAAcqO,EAAS+wB,iCAAmC/wB,EAAS8I,oBAAqB,CACvJ,IAAMxW,EAAO9N,KAAKjB,QAAQ82C,iBAAmB,CAAEtxB,OAAQvkB,KAAKjB,QAAQ82C,uBAAqB90C,EACzFf,KAAK81C,eAAiB,IAAI3H,EAAenuC,KAAMA,KAAKqoC,MAAOroC,KAAK2xB,KAAMhE,EAAQnS,EAAS8I,oBAAqBxW,GAC5G9N,KAAK+1C,sBAAwB,SAAA7O,GAAI,OAAI6M,EAAK+B,eAAeE,iBAAiB9O,EAAK,EAC/ElnC,KAAKk0C,yBAA2Bl0C,KAAK81C,eAAepH,qBACpD1uC,KAAKkH,YAAY9G,IAAIJ,KAAK81C,gBAC1B91C,KAAKi2C,oBAAsBj2C,KAAK81C,eAAezH,gBAC/CruC,KAAKk2C,yBAA2Bl2C,KAAK81C,eAAevH,oBACxD,MAEIvuC,KAAKi2C,oBAAsBtyC,EAAAA,GAAMq7B,KACjCh/B,KAAKk2C,yBAA2BvyC,EAAAA,GAAMq7B,KAE1Ch/B,KAAK6lB,cAAezZ,EAAAA,EAAAA,kBAAiBpM,KAAK2xB,KAAKrG,kBAC/CtrB,KAAKsrB,iBAAiBnrB,UAAUiK,OAAO,SAAUpK,KAAKwb,SAASmvB,qBAAuBtB,EAAmB8M,OAC7G,CA2KC,OA3KAt2C,EAAAA,EAAAA,GAAAg0C,EAAA,EAAA/zC,IAAA,cAAAkG,IAjGD,WAAoB,OAAOhG,KAAK2xB,KAAK/R,WAAa,GAAC,CAAA9f,IAAA,mBAAAkG,IACnD,WAAyB,OAAOhG,KAAKg0C,cAAcoC,UAAUp2C,KAAKonB,MAAMljB,YAAc,GAAC,CAAApE,IAAA,uBAAAkG,IACvF,WAA6B,OAAOhG,KAAKg0C,cAAcoC,UAAUp2C,KAAK20C,UAAUzwC,YAAc,GAAC,CAAApE,IAAA,kBAAAkG,IAC/F,WAAwB,OAAOrC,EAAAA,GAAMgqB,OAAOhqB,EAAAA,GAAMiqB,IAAI5tB,KAAK2xB,KAAK+O,gBAAiByP,IAAmB,SAAAhsC,GAAC,OAAIA,EAAEiC,SAAWgqC,EAAAA,GAAqBpC,MAAM,GAAG,GAAC,CAAAluC,IAAA,YAAAkG,IACrJ,WAAkB,OAAOrC,EAAAA,GAAMiqB,IAAI5tB,KAAK2xB,KAAKgP,UAAWwP,EAAmB,GAAC,CAAArwC,IAAA,aAAAkG,IAC5E,WAAmB,OAAOhG,KAAK2xB,KAAKiP,UAAY,GAAC,CAAA9gC,IAAA,mBAAAkG,IACjD,WAAyB,OAAOrC,EAAAA,GAAM0yC,OAAOr2C,KAAKqoC,MAAM6G,YAAc,GAAC,CAAApvC,IAAA,2BAAAkG,IACvE,WAAiC,OAAOhG,KAAKqoC,MAAMuB,wBAA0B,GAAC,CAAA9pC,IAAA,WAAAkG,IAC9E,WAAiB,IAAImH,EAAIib,EAAI,OAA0F,QAAlFA,EAAoC,QAA9Bjb,EAAKnN,KAAK81C,sBAAmC,IAAP3oC,OAAgB,EAASA,EAAGiiC,YAAyB,IAAPhnB,EAAgBA,EAAK+jB,EAAa2C,SAAW,EAAC7oC,IAC7K,SAAa8nC,GAAgB/tC,KAAK81C,iBAC9B91C,KAAK81C,eAAe1G,KAAOrB,EAC7B,GAAC,CAAAjuC,IAAA,gBAAAkG,IACH,WAAsB,IAAImH,EAAIib,EAAI,OAA+F,QAAvFA,EAAoC,QAA9Bjb,EAAKnN,KAAK81C,sBAAmC,IAAP3oC,OAAgB,EAASA,EAAGoiC,iBAA8B,IAAPnnB,EAAgBA,EAAKgkB,EAAkB6C,KAAO,EAAChpC,IACxL,SAAkBqwC,GAAiBt2C,KAAK81C,iBACpC91C,KAAK81C,eAAevG,UAAY+G,EAClC,GAAC,CAAAx2C,IAAA,sBAAAkG,IACH,WAA4B,MAAoD,qBAAtChG,KAAKwb,SAASi3B,qBAA6CzyC,KAAKwb,SAASi3B,mBAAqB,GAAC,CAAA3yC,IAAA,2BAAAkG,IACzI,WAAiC,MAAyD,qBAA3ChG,KAAKwb,SAASg3B,0BAAkDxyC,KAAKwb,SAASg3B,wBAA0B,GAAC,CAAA1yC,IAAA,eAAAkG,IACxJ,WAAqB,OAAOhG,KAAK2xB,KAAKmP,YAAc,GAAC,CAAAhhC,IAAA,gBAAAC,MAgFrD,WAAkC,IAC1BoN,EADMqiC,EAAavqC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,EAE3BjF,KAAKwb,SAAW/U,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG95B,KAAKwb,UAAWg0B,GAAe,IAC1C3T,EAD0CC,GAAAnwB,EAAAA,EAAAA,GACxD3L,KAAKm9B,WAAS,IAArC,IAAArB,EAAAlwB,MAAAiwB,EAAAC,EAAAjwB,KAAA5H,MAAuC,CAApB43B,EAAA97B,MACNqe,cAAcoxB,EAC3B,CAAC,OAAA1jC,GAAAgwB,EAAA33B,EAAA2H,EAAA,SAAAgwB,EAAA/vB,GAAA,CACD/L,KAAK2xB,KAAKvT,cAAcpe,KAAKwb,UACE,QAA9BrO,EAAKnN,KAAK81C,sBAAmC,IAAP3oC,GAAyBA,EAAGiR,cAAcoxB,GACjFxvC,KAAKo0C,oBAAoBtwC,KAAK9D,KAAKwb,UACnCxb,KAAKsrB,iBAAiBnrB,UAAUiK,OAAO,SAAUpK,KAAKwb,SAASmvB,qBAAuBtB,EAAmB8M,OAC7G,GAAC,CAAAr2C,IAAA,UAAAkG,IACD,WACI,OAAOhG,KAAKwb,QAChB,GACA,CAAA1b,IAAA,iBAAAC,MACA,WACI,OAAOC,KAAK2xB,KAAKrG,gBACrB,GAAC,CAAAxrB,IAAA,YAAAkG,IACD,WACI,OAAOhG,KAAK2xB,KAAKrY,SACrB,EAACrT,IACD,SAAcqT,GACVtZ,KAAK2xB,KAAKrY,UAAYA,CAC1B,GAAC,CAAAxZ,IAAA,eAAAkG,IACD,WACI,OAAOhG,KAAK2xB,KAAKtY,YACrB,GAAC,CAAAvZ,IAAA,eAAAkG,IACD,WACI,OAAOhG,KAAK2xB,KAAKkP,YACrB,GAAC,CAAA/gC,IAAA,WAAAC,MACD,WACIC,KAAK2xB,KAAK5F,UACd,GAAC,CAAAjsB,IAAA,SAAAC,MACD,SAAOsD,EAAQ1C,GACX,IAAIwM,EACJnN,KAAK2xB,KAAKrtB,OAAOjB,EAAQ1C,IACrB41C,EAAAA,EAAAA,IAAS51C,KACsB,QAA9BwM,EAAKnN,KAAK81C,sBAAmC,IAAP3oC,GAAyBA,EAAG7I,OAAO3D,GAElF,GAAC,CAAAb,IAAA,QAAAC,MACD,SAAMwkB,GACF,IAAMiyB,EAAS,IAAHttC,OAAOlJ,KAAK2xB,KAAKyN,OACvB5X,EAAU,GACZjD,EAAOkyB,yBACPjvB,EAAQjJ,KAAK,eAADrV,OAAgBstC,EAAM,0DAAAttC,OAAyDstC,EAAM,+DAAAttC,OAA8Dqb,EAAOmyB,+BAA8B,QACpMlvB,EAAQjJ,KAAK,eAADrV,OAAgBstC,EAAM,8DAAAttC,OAA6Dqb,EAAOkyB,uBAAsB,SAEhIz2C,KAAK6lB,aAAatZ,YAAcib,EAAQW,KAAK,MAC7CnoB,KAAK2xB,KAAKnxB,MAAM+jB,EACpB,GACA,CAAAzkB,IAAA,mBAAAC,MACA,SAAiB2yC,GACb,IAAM7J,EAAY7oC,KAAKqoC,MAAMS,sBAAsB4J,GAEnD,OADmB1yC,KAAKqoC,MAAMW,QAAQH,GACpBrpC,OACtB,GAAC,CAAAM,IAAA,uBAAAC,MACD,SAAqB2yC,GACjB,OAAO1yC,KAAKqoC,MAAMsO,qBAAqBjE,EAC3C,GACA,CAAA5yC,IAAA,UAAAC,MACA,SAAQ2yC,GACJ,OAAO1yC,KAAKqoC,MAAMW,QAAQ0J,EAC9B,GAAC,CAAA5yC,IAAA,kBAAAC,MACD,SAAgBmnC,GACZ,OAAOlnC,KAAKqoC,MAAME,gBAAgBrB,EACtC,GAAC,CAAApnC,IAAA,WAAAC,MACD,SAAS2yC,GAA6B,IAAnBC,EAAS1tC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,IAAAA,UAAA,GACxB,OAAOjF,KAAKqoC,MAAMI,aAAaiK,GAAU,EAAMC,EACnD,GAAC,CAAA7yC,IAAA,SAAAC,MACD,SAAO2yC,GAA6B,IAAnBC,EAAS1tC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,IAAAA,UAAA,GACtB,OAAOjF,KAAKqoC,MAAMI,aAAaiK,GAAU,EAAOC,EACpD,GAAC,CAAA7yC,IAAA,kBAAAC,MACD,SAAgB2yC,GAA6B,IAAnBC,EAAS1tC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,IAAAA,UAAA,GAC/B,OAAOjF,KAAKqoC,MAAMI,aAAaiK,OAAU3xC,EAAW4xC,EACxD,GAAC,CAAA7yC,IAAA,gBAAAC,MACD,SAAc2yC,GACV,OAAO1yC,KAAKqoC,MAAMuO,cAAclE,EACpC,GAAC,CAAA5yC,IAAA,iBAAAC,MACD,SAAe2yC,EAAUtH,GACrB,OAAOprC,KAAKqoC,MAAMwO,eAAenE,EAAUtH,EAC/C,GAAC,CAAAtrC,IAAA,cAAAC,MACD,SAAY2yC,GACR,OAAO1yC,KAAKqoC,MAAMG,YAAYkK,EAClC,GAAC,CAAA5yC,IAAA,WAAAC,MACD,WACIC,KAAKm0C,gBAAgBrwC,UAAK/C,GAC1Bf,KAAKqoC,MAAMiH,UACf,GAAC,CAAAxvC,IAAA,eAAAC,MACD,SAAaihC,EAAUljB,GAAc,IAAAg5B,EAAA,KAC3BpP,EAAQ1G,EAASpT,KAAI,SAAAzpB,GAAC,OAAI2yC,EAAKzO,MAAMW,QAAQ7kC,EAAE,IACrDnE,KAAK20C,UAAU1uC,IAAIyhC,EAAO5pB,GAC1B,IAAM8R,EAAUoR,EAASpT,KAAI,SAAAzpB,GAAC,OAAI2yC,EAAKzO,MAAMa,aAAa/kC,EAAE,IAAEwpB,QAAO,SAAA9mB,GAAC,OAAIA,GAAK,CAAC,IAChF7G,KAAK2xB,KAAKolB,aAAannB,EAAS9R,GAAc,EAClD,GAAC,CAAAhe,IAAA,eAAAC,MACD,WACI,OAAOC,KAAK20C,UAAU3uC,KAC1B,GAAC,CAAAlG,IAAA,WAAAC,MACD,SAASihC,EAAUljB,GAAc,IAAAk5B,EAAA,KACvBtP,EAAQ1G,EAASpT,KAAI,SAAAzpB,GAAC,OAAI6yC,EAAK3O,MAAMW,QAAQ7kC,EAAE,IACrDnE,KAAKonB,MAAMnhB,IAAIyhC,EAAO5pB,GACtB,IAAM8R,EAAUoR,EAASpT,KAAI,SAAAzpB,GAAC,OAAI6yC,EAAK3O,MAAMa,aAAa/kC,EAAE,IAAEwpB,QAAO,SAAA9mB,GAAC,OAAIA,GAAK,CAAC,IAChF7G,KAAK2xB,KAAK3F,SAAS4D,EAAS9R,GAAc,EAC9C,GAAC,CAAAhe,IAAA,WAAAC,MACD,WACI,OAAOC,KAAKonB,MAAMphB,KACtB,GAAC,CAAAlG,IAAA,SAAAC,MACD,SAAO2yC,EAAUuE,GACbj3C,KAAKqoC,MAAM6O,SAASxE,GACpB,IAAMr4B,EAAQra,KAAKqoC,MAAMa,aAAawJ,IACvB,IAAXr4B,GAGJra,KAAK2xB,KAAK1F,OAAO5R,EAAO48B,EAC5B,GACA,CAAAn3C,IAAA,cAAAC,MACA,SAAYoE,GACRA,EAAE2L,iBACF3L,EAAEsP,kBACF,IAAMi0B,EAAQ1nC,KAAK2xB,KAAK+iB,qBACxB,GAAqB,IAAjBhN,EAAMxiC,OAAV,CAGA,IAAMgiC,EAAOQ,EAAM,GACbgL,EAAW1yC,KAAKqoC,MAAME,gBAAgBrB,GAE5C,IADkBlnC,KAAKqoC,MAAMI,aAAaiK,GAAU,GACpC,CACZ,IAAMyE,EAAiBn3C,KAAKqoC,MAAMS,sBAAsB4J,GACxD,IAAKyE,EACD,OAEJ,IAAMC,EAAkBp3C,KAAKqoC,MAAMa,aAAaiO,GAChDn3C,KAAK2xB,KAAK1F,OAAOmrB,GACjBp3C,KAAK2xB,KAAK3F,SAAS,CAACorB,GACxB,CAZA,CAaJ,GAAC,CAAAt3C,IAAA,eAAAC,MACD,SAAaoE,GACTA,EAAE2L,iBACF3L,EAAEsP,kBACF,IAAMi0B,EAAQ1nC,KAAK2xB,KAAK+iB,qBACxB,GAAqB,IAAjBhN,EAAMxiC,OAAV,CAGA,IAAMgiC,EAAOQ,EAAM,GACbgL,EAAW1yC,KAAKqoC,MAAME,gBAAgBrB,GAE5C,IADkBlnC,KAAKqoC,MAAMI,aAAaiK,GAAU,GACpC,CACZ,IAAKxL,EAAK5N,SAAS+d,MAAK,SAAA5nB,GAAK,OAAIA,EAAMsC,OAAO,IAC1C,OAEJ,IAAAulB,EAAuBt3C,KAAK2xB,KAAKzF,WAC3BqrB,GADqCnX,EAAAA,EAAAA,GAAAkX,EAAA,GAAxB,GACoB,EACvCt3C,KAAK2xB,KAAK1F,OAAOsrB,GACjBv3C,KAAK2xB,KAAK3F,SAAS,CAACurB,GACxB,CAZA,CAaJ,GAAC,CAAAz3C,IAAA,UAAAC,MACD,SAAQoE,GACJA,EAAE2L,iBACF3L,EAAEsP,kBACF,IAAMi0B,EAAQ1nC,KAAK2xB,KAAK+iB,qBACxB,GAAqB,IAAjBhN,EAAMxiC,OAAV,CAGA,IAAMgiC,EAAOQ,EAAM,GACbgL,EAAW1yC,KAAKqoC,MAAME,gBAAgBrB,GACtCyL,EAAYxuC,EAAE2Z,aAAa5R,OACjClM,KAAKqoC,MAAMI,aAAaiK,OAAU3xC,EAAW4xC,EAJ7C,CAKJ,GAAC,CAAA7yC,IAAA,UAAAC,MACD,YACIgF,EAAAA,EAAAA,IAAQ/E,KAAKkH,aACblH,KAAK2xB,KAAK5sB,SACd,KAAC8uC,CAAA,CA7QoB,E,qUCjgCrBpR,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUljC,GAAS,IAAMmjC,EAAKL,EAAUM,KAAKpjC,GAAS,CAAE,MAAOoE,GAAK6+B,EAAO7+B,EAAI,CAAE,CAC1F,SAASi/B,EAASrjC,GAAS,IAAMmjC,EAAKL,EAAiB,MAAE9iC,GAAS,CAAE,MAAOoE,GAAK6+B,EAAO7+B,EAAI,CAAE,CAC7F,SAAS++B,EAAKznB,GAJlB,IAAe1b,EAIa0b,EAAOxX,KAAO8+B,EAAQtnB,EAAO1b,QAJ1CA,EAIyD0b,EAAO1b,MAJhDA,aAAiB6iC,EAAI7iC,EAAQ,IAAI6iC,GAAE,SAAUG,GAAWA,EAAQhjC,EAAQ,KAIjB2N,KAAKu1B,EAAWG,EAAW,CAC7GF,GAAML,EAAYA,EAAUp0B,MAAMi0B,EAASC,GAAc,KAAKQ,OAClE,GACJ,EAcA,SAASqU,EAAwBC,GAC7B,OAAOhxC,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG2d,GAAQ,CAAEne,SAAU,GAAIoe,oBAAgB32C,EAAW42C,OAAO,EAAMC,MAAM,EAAOC,wBAAoB92C,GAC5I,CACA,SAAS6tB,EAAWkpB,EAAUC,GAC1B,QAAKA,EAAWn6B,SAGPm6B,EAAWn6B,SAAWk6B,GAIpBlpB,EAAWkpB,EAAUC,EAAWn6B,QAE/C,CACA,SAASo6B,EAAW9Q,EAAM+Q,GACtB,OAAO/Q,IAAS+Q,GAASrpB,EAAWsY,EAAM+Q,IAAUrpB,EAAWqpB,EAAO/Q,EAC1E,CAAC,IACKgR,EAAwB,WAU1B,SAAAA,EAAYhR,IAAMjoC,EAAAA,EAAAA,GAAA,KAAAi5C,GACdl4C,KAAKknC,KAAOA,CAChB,CAHiD,OAGhDrnC,EAAAA,EAAAA,GAAAq4C,EAAA,EAAAp4C,IAAA,UAAAkG,IAXD,WAAgB,OAAOhG,KAAKknC,KAAK1nC,QAAQA,OAAS,GAAC,CAAAM,IAAA,WAAAkG,IACnD,WAAiB,OAAOhG,KAAKknC,KAAK5N,SAAS1L,KAAI,SAAAsZ,GAAI,OAAI,IAAIgR,EAAyBhR,EAAK,GAAG,GAAC,CAAApnC,IAAA,QAAAkG,IAC7F,WAAc,OAAOhG,KAAKknC,KAAKgE,KAAO,GAAC,CAAAprC,IAAA,uBAAAkG,IACvC,WAA6B,OAAOhG,KAAKknC,KAAKwE,oBAAsB,GAAC,CAAA5rC,IAAA,oBAAAkG,IACrE,WAA0B,OAAOhG,KAAKknC,KAAK8N,iBAAmB,GAAC,CAAAl1C,IAAA,cAAAkG,IAC/D,WAAoB,OAAOhG,KAAKknC,KAAKkE,WAAa,GAAC,CAAAtrC,IAAA,YAAAkG,IACnD,WAAkB,OAAOhG,KAAKknC,KAAKmE,SAAW,GAAC,CAAAvrC,IAAA,UAAAkG,IAC/C,WAAgB,OAAOhG,KAAKknC,KAAKnV,OAAS,GAAC,CAAAjyB,IAAA,aAAAkG,IAC3C,WAAmB,OAAOhG,KAAKknC,KAAK+I,UAAY,KAACiI,CAAA,CATvB,GAcxBC,EAAqB,WACvB,SAAAA,EAAYva,EAAUwa,EAAY5N,IAAyBvrC,EAAAA,EAAAA,GAAA,KAAAk5C,GACvDn4C,KAAK49B,SAAWA,EAChB59B,KAAKo4C,WAAaA,EAClBp4C,KAAKwqC,wBAA0BA,EAC/BxqC,KAAKgqC,cAAgB,IAAItM,IACzB19B,KAAKq9B,WAAaO,EAASP,UAC/B,CA2BC,OA3BAx9B,EAAAA,EAAAA,GAAAs4C,EAAA,EAAAr4C,IAAA,iBAAAC,MACD,SAAejB,GAEX,MAAO,CAAEklB,aADYhkB,KAAK49B,SAASK,eAAen/B,GAEtD,GAAC,CAAAgB,IAAA,gBAAAC,MACD,SAAcmnC,EAAM7sB,EAAO2J,EAAc3gB,GACrCrD,KAAK49B,SAASQ,cAAcp+B,KAAKo4C,WAAWxqB,IAAIsZ,GAAO7sB,EAAO2J,EAAaA,aAAc3gB,EAC7F,GAAC,CAAAvD,IAAA,gBAAAC,MACD,SAAcP,EAAS64C,GACD,IAAAC,EAIbC,EAJL,OAAI/4C,EAAQo4C,OACRU,EAAAD,EAAel4C,WAAUC,IAAGqO,MAAA6pC,GAAA5pC,EAAAA,EAAAA,GAAIC,EAAAA,EAAUC,iBAAiBoJ,EAAAA,EAAQwgC,oBAC5D,KAGPD,EAAAF,EAAel4C,WAAUU,OAAM4N,MAAA8pC,GAAA7pC,EAAAA,EAAAA,GAAIC,EAAAA,EAAUC,iBAAiBoJ,EAAAA,EAAQwgC,oBAC/D,EAEf,GAAC,CAAA14C,IAAA,iBAAAC,MACD,SAAemnC,EAAM7sB,EAAO2J,EAAc3gB,GACtC,IAAI8J,EAAIib,EACuC,QAA9CA,GAAMjb,EAAKnN,KAAK49B,UAAUS,sBAAmC,IAAPjW,GAAyBA,EAAGlpB,KAAKiO,EAAInN,KAAKo4C,WAAWxqB,IAAIsZ,GAAO7sB,EAAO2J,EAAaA,aAAc3gB,EAC7J,GAAC,CAAAvD,IAAA,kBAAAC,MACD,SAAgBikB,GACZhkB,KAAK49B,SAASU,gBAAgBta,EAAaA,aAC/C,GAAC,CAAAlkB,IAAA,UAAAC,MACD,WACIC,KAAKgqC,cAAcz/B,OACvB,KAAC4tC,CAAA,CAlCsB,GAoC3B,SAASM,EAAYt0C,GACjB,MAAO,CACH2Z,aAAc3Z,EAAE2Z,aAChBkjB,SAAU78B,EAAE68B,SAASpT,KAAI,SAAAzpB,GAAC,OAAIA,EAAE3E,OAAO,IAE/C,CACA,SAAS2wC,EAAiBhsC,GACtB,MAAO,CACH2Z,aAAc3Z,EAAE2Z,aAChBte,QAAS2E,EAAE3E,SAAW2E,EAAE3E,QAAQA,QAChC4G,OAAQjC,EAAEiC,OAElB,CAAC,IACKsyC,EAAoC,SAAAzR,IAAAtoC,EAAAA,EAAAA,GAAA+5C,EAAAzR,GAAA,IAAAroC,GAAAC,EAAAA,EAAAA,GAAA65C,GACtC,SAAAA,EAAY/0B,GAAM,IAAA3kB,EAEG,OAFHC,EAAAA,EAAAA,GAAA,KAAAy5C,IACd15C,EAAAJ,EAAAM,KAAA,KAAMykB,EAAKqd,SAASpT,KAAI,SAAAsZ,GAAI,OAAIA,EAAK1nC,OAAO,MACvCmkB,KAAOA,EAAK3kB,CACrB,CAAC,OAAAa,EAAAA,EAAAA,GAAA64C,EAAA,CAJqC,CAASvR,EAAAA,IAMnD,SAASwR,EAA+Bh1B,GACpC,OAAIA,aAAgBwjB,EAAAA,GACT,IAAIuR,EAAqC/0B,GAE7CA,CACX,CAAC,IACKi1B,EAAgC,WAClC,SAAAA,EAAYrR,IAAKtoC,EAAAA,EAAAA,GAAA,KAAA25C,GACb54C,KAAKunC,IAAMA,CACf,CAuBC,OAvBA1nC,EAAAA,EAAAA,GAAA+4C,EAAA,EAAA94C,IAAA,aAAAC,MACD,SAAWmnC,GACP,OAAOlnC,KAAKunC,IAAIE,WAAWP,EAAK1nC,QACpC,GAAC,CAAAM,IAAA,eAAAC,MACD,SAAa2nC,EAAOC,GAChB,GAAI3nC,KAAKunC,IAAIK,aACT,OAAO5nC,KAAKunC,IAAIK,aAAaF,EAAM9Z,KAAI,SAAAsZ,GAAI,OAAIA,EAAK1nC,OAAO,IAAGmoC,EAGtE,GAAC,CAAA7nC,IAAA,cAAAC,MACD,SAAY4jB,EAAMgkB,GACd,IAAIx6B,EAAIib,EAC+B,QAAtCA,GAAMjb,EAAKnN,KAAKunC,KAAKjxB,mBAAgC,IAAP8R,GAAyBA,EAAGlpB,KAAKiO,EAAIwrC,EAA+Bh1B,GAAOgkB,EAC9H,GAAC,CAAA7nC,IAAA,aAAAC,MACD,SAAW4jB,EAAMkkB,EAAYC,EAAaH,GACtC,OAAO3nC,KAAKunC,IAAIS,WAAW2Q,EAA+Bh1B,GAAOkkB,GAAcA,EAAWroC,QAASsoC,EAAaH,EACpH,GAAC,CAAA7nC,IAAA,OAAAC,MACD,SAAK4jB,EAAMkkB,EAAYC,EAAaH,GAChC3nC,KAAKunC,IAAI6B,KAAKuP,EAA+Bh1B,GAAOkkB,GAAcA,EAAWroC,QAASsoC,EAAaH,EACvG,GAAC,CAAA7nC,IAAA,YAAAC,MACD,SAAU4nC,GACN,IAAIx6B,EAAIib,EAC6B,QAApCA,GAAMjb,EAAKnN,KAAKunC,KAAKlxB,iBAA8B,IAAP+R,GAAyBA,EAAGlpB,KAAKiO,EAAIw6B,EACtF,KAACiR,CAAA,CA1BiC,GA4BtC,SAASC,EAAoB95C,GACzB,OAAOA,GAAW0H,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG/6B,GAAU,CAAE+5C,mBAAmB,EAAMlI,iBAAkB7xC,EAAQ6xC,kBAAoB,CAC7Hc,MAAK,SAAClqC,GACF,OAAOzI,EAAQ6xC,iBAAiBc,MAAMlqC,EAAGhI,QAC7C,GACD+nC,IAAKxoC,EAAQwoC,KAAO,IAAIqR,EAAiC75C,EAAQwoC,KAAMsN,4BAA6B91C,EAAQ81C,6BAA+B,CAC1IvC,6BAA4B,SAACnuC,GACzB,OAAOpF,EAAQ81C,4BAA4BvC,6BAA6B7rC,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG31B,GAAI,CAAE3E,QAAS2E,EAAE3E,UAC7H,EACA6yC,4BAA2B,SAACluC,GACxB,OAAOpF,EAAQ81C,4BAA4BxC,4BAA4B5rC,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG31B,GAAI,CAAE3E,QAAS2E,EAAE3E,UAC5H,GACDwtB,sBAAuBjuB,EAAQiuB,uBAAyBvmB,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG/6B,EAAQiuB,uBAAwB,CAAE+nB,iBAAah0C,EAAW+zC,gBAAY/zC,EAAWusB,QAASvuB,EAAQiuB,sBAAsBM,QAAU,SAAC9lB,GACtN,OAAOzI,EAAQiuB,sBAAsBM,QAAQ9lB,EAAGhI,QACpD,EAAI,iBAAM,UAAU,EAAEoiC,UAAW7iC,EAAQiuB,sBAAsB4U,UAAY,SAACz9B,GACxE,IAAIgJ,EACJ,SAAmD,QAAxCA,EAAKpO,EAAQiuB,6BAA0C,IAAP7f,OAAgB,EAASA,EAAGy0B,UAAUz9B,EAAE3E,SACvG,OAAIuB,EAAWksB,aAAY,SAAC9oB,GACxB,OAAOpF,EAAQiuB,sBAAsBC,aAAa9oB,EAAE3E,QACxD,EACA2tB,mBAAkB,WACd,OAAOpuB,EAAQiuB,sBAAsBG,oBACzC,EAAGI,cAAexuB,EAAQiuB,sBAAsBO,cAAgB,kBAAMxuB,EAAQiuB,sBAAsBO,eAAe,EAAG,iBAAM,MAAM,EAAE0nB,aAAcl2C,EAAQiuB,sBAAsBioB,cAAiB,SAAA/N,GAC7L,OAAOnoC,EAAQiuB,sBAAsBioB,aAAa/N,EAAK1nC,QAC3D,EAAI01C,sBAAuBn2C,EAAQiuB,sBAAsBkoB,uBAA0B,SAAAhO,GAC/E,OAAOnoC,EAAQiuB,sBAAsBkoB,sBAAsBhO,EAAK1nC,QACpE,IAAOmuB,OAAQ5uB,EAAQ4uB,QAAU,CACjCA,OAAM,SAACxpB,EAAG4oC,GACN,OAAOhuC,EAAQ4uB,OAAOA,OAAOxpB,EAAE3E,QAASutC,EAC5C,GACDR,gCAAiCxtC,EAAQwtC,iCAAmC9lC,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG/6B,EAAQwtC,iCAAkC,CAAEa,2BAA0B,SAACjpC,GAC9K,OAAOpF,EAAQwtC,gCAAgCa,2BAA2BjpC,EAAE3E,QAChF,IAAMu5C,YAAQh4C,EAAWyxC,yBAAsE,qBAArCzzC,EAAQyzC,8BAA2CzxC,EAAyD,oBAArChC,EAAQyzC,yBAA0CzzC,EAAQyzC,yBAA4B,SAAAruC,GAAC,OAAIpF,EAAQyzC,yBAAyBruC,EAAE3E,QAAQ,EAAIyuC,sBAAuB,SAAA9pC,GAClS,OAAIA,EAAE60C,aAAe70C,EAAEwzC,MACZ,EAEuC,kBAAlC54C,EAAQkvC,sBACblvC,EAAQkvC,sBAE+B,qBAAlClvC,EAAQkvC,sBACb,EAGAlvC,EAAQkvC,sBAAsB9pC,EAAE3E,QAE/C,GACR,CACA,SAASgxC,EAAItJ,EAAMuJ,GACfA,EAAGvJ,GACHA,EAAK5N,SAAS1S,SAAQ,SAAA6I,GAAK,OAAI+gB,EAAI/gB,EAAOghB,EAAG,GACjD,CACO,IAAMwI,EAAa,WAetB,SAAAA,EAAY/Z,EAAMpgC,EAAWihC,EAAU5C,EAAW+b,GAA0B,IAAdn6C,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAChG,EAAAA,EAAAA,GAAA,KAAAg6C,GACtEj5C,KAAKk/B,KAAOA,EACZl/B,KAAKk5C,WAAaA,EAClBl5C,KAAK0nC,MAAQ,IAAIhK,IACjB19B,KAAKm5C,uBAAyB,IAAIzb,IAClC19B,KAAKo5C,gBAAkB,IAAI1b,IAC3B19B,KAAKq5C,aAAe,IAAIz3C,EAAAA,GACxB5B,KAAKs5C,0BAA4B,IAAI13C,EAAAA,GACrC5B,KAAKo4C,WAAa,IAAImB,EAAAA,IAAW,SAAArS,GAAI,OAAI,IAAIgR,EAAyBhR,EAAK,IAC3ElnC,KAAKkH,YAAc,IAAIhF,EAAAA,GACvBlC,KAAK4wC,iBAAmB7xC,EAAQ6xC,iBAChC5wC,KAAKw5C,yBAAuE,qBAArCz6C,EAAQy6C,0BAAmDz6C,EAAQy6C,yBAC1Gx5C,KAAK+4C,OAASh6C,EAAQg6C,OACtB/4C,KAAK84C,kBAAoB/5C,EAAQ+5C,kBACjC94C,KAAKssC,KAAOtsC,KAAKy5C,WAAWva,EAAMpgC,EAAWihC,EAAU5C,EAAWp+B,GAClEiB,KAAKi2C,oBAAsBj2C,KAAKssC,KAAK2J,oBACrCj2C,KAAK4jB,KAAO4zB,EAAwB,CAChCh4C,aAASuB,EACT6c,OAAQ,KACRo7B,aAAa,IAEbh5C,KAAK4wC,mBACL5wC,KAAK4jB,KAAOnd,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG95B,KAAK4jB,MAAO,CAAE6gB,GAAI,QAElEzkC,KAAK0nC,MAAMzhC,IAAI,KAAMjG,KAAK4jB,MAC1B5jB,KAAKssC,KAAK1C,yBAAyB5pC,KAAK05C,0BAA2B15C,KAAMA,KAAKkH,YAClF,CAoZC,OApZArH,EAAAA,EAAAA,GAAAo5C,EAAA,EAAAn5C,IAAA,cAAAkG,IAxCD,WAAoB,OAAOhG,KAAKssC,KAAK1sB,WAAa,GAAC,CAAA9f,IAAA,mBAAAkG,IACnD,WAAyB,OAAOrC,EAAAA,GAAMiqB,IAAI5tB,KAAKssC,KAAK7d,iBAAkBgqB,EAAc,GAAC,CAAA34C,IAAA,uBAAAkG,IACrF,WAA6B,OAAOrC,EAAAA,GAAMiqB,IAAI5tB,KAAKssC,KAAK7L,qBAAsBgY,EAAc,GAAC,CAAA34C,IAAA,kBAAAkG,IAC7F,WAAwB,OAAOrC,EAAAA,GAAMiqB,IAAI5tB,KAAKssC,KAAK5L,gBAAiByP,EAAmB,GAAC,CAAArwC,IAAA,YAAAkG,IACxF,WAAkB,OAAOrC,EAAAA,GAAMiqB,IAAI5tB,KAAKssC,KAAK3L,UAAWwP,EAAmB,GAAC,CAAArwC,IAAA,aAAAkG,IAC5E,WAAmB,OAAOhG,KAAKssC,KAAK1L,UAAY,GAChD,CAAA9gC,IAAA,mBAAAkG,IAIA,WAAyB,OAAOhG,KAAKssC,KAAKqN,gBAAkB,GAAC,CAAA75C,IAAA,2BAAAkG,IAC7D,WAAiC,OAAOhG,KAAKssC,KAAK1C,wBAA0B,GAAC,CAAA9pC,IAAA,2BAAAkG,IAC7E,WAAiC,OAAOhG,KAAKssC,KAAK4H,wBAA0B,GAAC,CAAAp0C,IAAA,eAAAkG,IAC7E,WAAqB,OAAOhG,KAAKssC,KAAKxL,YAAc,GAAC,CAAAhhC,IAAA,aAAAC,MA4BrD,SAAWm/B,EAAMpgC,EAAWihC,EAAU5C,EAAWp+B,GAAS,IAAAoC,EAAA,KAChDy4C,EAAqB,IAAItQ,EAAAA,GAAqBvJ,GAC9C8Z,EAAsB1c,EAAUvP,KAAI,SAAApnB,GAAC,OAAI,IAAI2xC,EAAsB3xC,EAAGrF,EAAKi3C,WAAYj3C,EAAKm4C,0BAA0Bx3C,MAAM,IAC5Hg4C,EAAoBjB,EAAoB95C,IAAY,CAAC,EAC3D,OAAO,IAAIg7C,EAAAA,EAAW7a,EAAMpgC,EAAW86C,EAAoBC,EAAqBC,EACpF,GAAC,CAAAh6C,IAAA,gBAAAC,MACD,WAA4B,IAAdhB,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,EACrBjF,KAAKssC,KAAKluB,cAAcrf,EAC5B,GACA,CAAAe,IAAA,iBAAAC,MACA,WACI,OAAOC,KAAKssC,KAAKhhB,gBACrB,GAAC,CAAAxrB,IAAA,YAAAkG,IACD,WACI,OAAOhG,KAAKssC,KAAKhzB,SACrB,EAACrT,IACD,SAAcqT,GACVtZ,KAAKssC,KAAKhzB,UAAYA,CAC1B,GAAC,CAAAxZ,IAAA,eAAAkG,IACD,WACI,OAAOhG,KAAKssC,KAAKjzB,YACrB,GAAC,CAAAvZ,IAAA,eAAAkG,IACD,WACI,OAAOhG,KAAKssC,KAAKzL,YACrB,GAAC,CAAA/gC,IAAA,WAAAC,MACD,WACIC,KAAKssC,KAAKvgB,UACd,GAAC,CAAAjsB,IAAA,SAAAC,MACD,SAAOsD,EAAQ1C,GACXX,KAAKssC,KAAKhoC,OAAOjB,EAAQ1C,EAC7B,GAAC,CAAAb,IAAA,QAAAC,MACD,SAAMwkB,GACFvkB,KAAKssC,KAAK9rC,MAAM+jB,EACpB,GACA,CAAAzkB,IAAA,WAAAC,MACA,WACI,OAAOC,KAAK4jB,KAAKpkB,OACrB,GAAC,CAAAM,IAAA,WAAAC,MACD,SAASq1C,EAAO4E,GACZ,OAAOvX,EAAUziC,UAAM,OAAQ,GAAMymC,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,IAAAsT,EAAA,OAAAxT,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAA1D,MAAA,OAKnC,OAJAnjC,KAAKo5C,gBAAgBxyB,SAAQ,SAAAszB,GAAO,OAAIA,EAAQl5C,QAAQ,IACxDhB,KAAKo5C,gBAAgB7uC,QACrBvK,KAAK4jB,KAAKpkB,QAAU41C,EACd6E,EAAmBD,GAAa,CAAEA,UAAAA,EAAW5yB,MAAO,GAAIutB,UAAW,IAAI9N,EAAA1D,KAAA,EACvEnjC,KAAKm6C,gBAAgB/E,GAAO,GAAM,EAAO6E,GAAiB,OAC5DA,IACAj6C,KAAKssC,KAAKtgB,SAASiuB,EAAiB7yB,OACpCpnB,KAAKssC,KAAKyK,aAAakD,EAAiBtF,YAExCqF,GAA4C,kBAAxBA,EAAU1gC,YAC9BtZ,KAAKsZ,UAAY0gC,EAAU1gC,WAC9B,wBAAAutB,EAAA57B,OAAA,GAAA07B,EAAA,SAET,GAAC,CAAA7mC,IAAA,kBAAAC,MACD,WAA4G,IAA5FP,EAAOyF,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGjF,KAAK4jB,KAAKpkB,QAASmzC,IAAS1tC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,KAAAA,UAAA,GAASm1C,EAAQn1C,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,IAAAA,UAAA,GAAUg1C,EAAgBh1C,UAAAC,OAAA,EAAAD,UAAA,QAAAlE,EAAEhC,EAAOkG,UAAAC,OAAA,EAAAD,UAAA,QAAAlE,EACtG,OAAO0hC,EAAUziC,UAAM,OAAQ,GAAMymC,EAAAA,EAAAA,KAAAC,MAAE,SAAA2T,IAAA,IAAAnT,EAAA,OAAAT,EAAAA,EAAAA,KAAAG,MAAA,SAAA0T,GAAA,cAAAA,EAAAxT,KAAAwT,EAAAnX,MAAA,UACF,qBAAtBnjC,KAAK4jB,KAAKpkB,QAAuB,CAAA86C,EAAAnX,KAAA,cAClC,IAAIoX,EAAAA,GAAUv6C,KAAKk/B,KAAM,sBAAqB,WAEpDl/B,KAAK4jB,KAAK8zB,eAAgB,CAAF4C,EAAAnX,KAAA,QACxB,OADwBmX,EAAAnX,KAAA,EAClBnjC,KAAK4jB,KAAK8zB,eAAc,OAC9B,OAD8B4C,EAAAnX,KAAA,EACxBx/B,EAAAA,GAAM62C,UAAUx6C,KAAKq5C,aAAav3C,OAAM,OAGlD,OADMolC,EAAOlnC,KAAKy6C,YAAYj7C,GAAQ86C,EAAAnX,KAAA,GAChCnjC,KAAK06C,qBAAqBxT,EAAMyL,EAAWsH,EAAkBl7C,GAAQ,QAC3E,GAAIq7C,EACA,IACIp6C,KAAKssC,KAAK8N,SAASlT,EACvB,CACA,MAAO/5B,GAEH,CAEP,yBAAAmtC,EAAArvC,OAAA,GAAAovC,EAAA,SAET,GACA,CAAAv6C,IAAA,WAAAC,MACA,SAASP,GACL,QAAgBuB,IAAZvB,GAAyBA,IAAYQ,KAAK4jB,KAAKpkB,QAAnD,CAIA,IAAM0nC,EAAOlnC,KAAKy6C,YAAYj7C,GAC9BQ,KAAKssC,KAAK8N,SAASlT,EAFnB,MAFIlnC,KAAKssC,KAAK8N,UAKlB,GACA,CAAAt6C,IAAA,UAAAC,MACA,WAAqC,IAA7BP,EAAOyF,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGjF,KAAK4jB,KAAKpkB,QAClBm7C,EAAW36C,KAAKy6C,YAAYj7C,GAC5B0nC,EAAOlnC,KAAKssC,KAAKtD,QAAQ2R,IAAa36C,KAAK4jB,KAAO,KAAO+2B,GAC/D,OAAO36C,KAAKo4C,WAAWxqB,IAAIsZ,EAC/B,GAAC,CAAApnC,IAAA,WAAAC,MACD,SAASP,GAA4B,IAAnBmzC,EAAS1tC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,IAAAA,UAAA,GACjBiiC,EAAOlnC,KAAKy6C,YAAYj7C,GAC9B,OAAOQ,KAAKssC,KAAKsO,SAAS1T,IAASlnC,KAAK4jB,KAAO,KAAOsjB,EAAMyL,EAChE,GAAC,CAAA7yC,IAAA,SAAAC,MACD,SAAOP,GAA4B,IAAnBmzC,EAAS1tC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,IAAAA,UAAA,GACrB,OAAOw9B,EAAUziC,UAAM,OAAQ,GAAMymC,EAAAA,EAAAA,KAAAC,MAAE,SAAAmU,IAAA,IAAA3T,EAAAzrB,EAAA,OAAAgrB,EAAAA,EAAAA,KAAAG,MAAA,SAAAkU,GAAA,cAAAA,EAAAhU,KAAAgU,EAAA3X,MAAA,UACF,qBAAtBnjC,KAAK4jB,KAAKpkB,QAAuB,CAAAs7C,EAAA3X,KAAA,cAClC,IAAIoX,EAAAA,GAAUv6C,KAAKk/B,KAAM,sBAAqB,WAEpDl/B,KAAK4jB,KAAK8zB,eAAgB,CAAFoD,EAAA3X,KAAA,QACxB,OADwB2X,EAAA3X,KAAA,EAClBnjC,KAAK4jB,KAAK8zB,eAAc,OAC9B,OAD8BoD,EAAA3X,KAAA,EACxBx/B,EAAAA,GAAM62C,UAAUx6C,KAAKq5C,aAAav3C,OAAM,OAEZ,GAAhColC,EAAOlnC,KAAKy6C,YAAYj7C,IAC1BQ,KAAKssC,KAAKyO,WAAW7T,IAAUlnC,KAAKssC,KAAKsK,cAAc1P,GAAK,CAAA4T,EAAA3X,KAAA,gBAAA2X,EAAAE,OAAA,UACrD,GAAK,YAEZ9T,EAAKwQ,eAAgB,CAAFoD,EAAA3X,KAAA,SACnB,OADmB2X,EAAA3X,KAAA,GACbnjC,KAAK4jB,KAAK8zB,eAAc,QAC9B,OAD8BoD,EAAA3X,KAAA,GACxBx/B,EAAAA,GAAM62C,UAAUx6C,KAAKq5C,aAAav3C,OAAM,WAE9ColC,IAASlnC,KAAK4jB,MAASsjB,EAAKwQ,gBAAmB13C,KAAKssC,KAAK9D,YAAYtB,GAAK,CAAA4T,EAAA3X,KAAA,gBAAA2X,EAAAE,OAAA,UACnE,GAAK,QAE4D,GAAtEv/B,EAASzb,KAAKssC,KAAK2O,OAAO/T,IAASlnC,KAAK4jB,KAAO,KAAOsjB,EAAMyL,IAC9DzL,EAAKwQ,eAAgB,CAAFoD,EAAA3X,KAAA,SACnB,OADmB2X,EAAA3X,KAAA,GACbnjC,KAAK4jB,KAAK8zB,eAAc,QAC9B,OAD8BoD,EAAA3X,KAAA,GACxBx/B,EAAAA,GAAM62C,UAAUx6C,KAAKq5C,aAAav3C,OAAM,eAAAg5C,EAAAE,OAAA,SAE3Cv/B,GAAM,yBAAAq/B,EAAA7vC,OAAA,GAAA4vC,EAAA,SAErB,GAAC,CAAA/6C,IAAA,eAAAC,MACD,SAAaihC,EAAUljB,GAAc,IAAAlT,EAAA,KAC3B88B,EAAQ1G,EAASpT,KAAI,SAAAzpB,GAAC,OAAIyG,EAAK6vC,YAAYt2C,EAAE,IACnDnE,KAAKssC,KAAKyK,aAAarP,EAAO5pB,EAClC,GAAC,CAAAhe,IAAA,eAAAC,MACD,WAEI,OADcC,KAAKssC,KAAKpL,eACXtT,KAAI,SAAA/hB,GAAC,OAAIA,EAAErM,OAAO,GACnC,GAAC,CAAAM,IAAA,WAAAC,MACD,SAASihC,EAAUljB,GAAc,IAAA/S,EAAA,KACvB28B,EAAQ1G,EAASpT,KAAI,SAAAzpB,GAAC,OAAI4G,EAAK0vC,YAAYt2C,EAAE,IACnDnE,KAAKssC,KAAKtgB,SAAS0b,EAAO5pB,EAC9B,GAAC,CAAAhe,IAAA,WAAAC,MACD,WAEI,OADcC,KAAKssC,KAAKpgB,WACX0B,KAAI,SAAA/hB,GAAC,OAAIA,EAAErM,OAAO,GACnC,GAAC,CAAAM,IAAA,SAAAC,MACD,SAAOP,EAASy3C,GACZj3C,KAAKssC,KAAKrgB,OAAOjsB,KAAKy6C,YAAYj7C,GAAUy3C,EAChD,GACA,CAAAn3C,IAAA,mBAAAC,MACA,SAAiBP,GACb,IAAM0nC,EAAOlnC,KAAKssC,KAAK4O,iBAAiBl7C,KAAKy6C,YAAYj7C,IACzD,OAAQ0nC,GAAQA,EAAK1nC,OACzB,GAAC,CAAAM,IAAA,uBAAAC,MACD,WAAkD,IAA7BP,EAAOyF,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGjF,KAAK4jB,KAAKpkB,QAC/Bm7C,EAAW36C,KAAKy6C,YAAYj7C,GAC5B0nC,EAAOlnC,KAAKssC,KAAKqK,qBAAqBgE,IAAa36C,KAAK4jB,KAAO,KAAO+2B,GAC5E,OAAQzT,GAAQA,EAAK1nC,OACzB,GACA,CAAAM,IAAA,cAAAC,MACA,SAAYP,GACR,IAAM0nC,EAAOlnC,KAAK0nC,MAAM1hC,IAAKxG,IAAYQ,KAAK4jB,KAAKpkB,QAAU,KAAOA,GACpE,IAAK0nC,EACD,MAAM,IAAIqT,EAAAA,GAAUv6C,KAAKk/B,KAAM,6BAAFh2B,OAA+B1J,IAEhE,OAAO0nC,CACX,GAAC,CAAApnC,IAAA,uBAAAC,MACD,SAAqBmnC,EAAMyL,EAAWsH,EAAkBl7C,GACpD,OAAO0jC,EAAUziC,UAAM,OAAQ,GAAMymC,EAAAA,EAAAA,KAAAC,MAAE,SAAAyU,IAAA,OAAA1U,EAAAA,EAAAA,KAAAG,MAAA,SAAAwU,GAAA,cAAAA,EAAAtU,KAAAsU,EAAAjY,MAAA,OACnC,OADmCiY,EAAAjY,KAAA,EAC7BnjC,KAAKq7C,YAAYnU,EAAMyL,EAAWsH,GAAiB,OACzDj6C,KAAK4T,OAAOszB,EAAM+S,EAAkBl7C,GAAS,wBAAAq8C,EAAAnwC,OAAA,GAAAkwC,EAAA,SAErD,GAAC,CAAAr7C,IAAA,cAAAC,MACD,SAAYmnC,EAAMyL,EAAWsH,GACzB,OAAOxX,EAAUziC,UAAM,OAAQ,GAAMymC,EAAAA,EAAAA,KAAAC,MAAE,SAAA4U,IAAA,IAAA7/B,EAAA8F,EAAA,YAAAklB,EAAAA,EAAAA,KAAAG,MAAA,SAAA2U,GAAA,cAAAA,EAAAzU,KAAAyU,EAAApY,MAAA,OAMhC,GAJHnjC,KAAKm5C,uBAAuBvyB,SAAQ,SAAC8wB,EAAgB2D,IAC5C5/B,GAAUu8B,EAAWqD,EAAanU,KACnCzrB,EAASi8B,EAAehqC,MAAK,kBAAM6T,EAAK85B,YAAYnU,EAAMyL,EAAWsH,EAAiB,IAE9F,KACIx+B,EAAQ,CAAF8/B,EAAApY,KAAA,eAAAoY,EAAAP,OAAA,SACCv/B,GAAM,UAEbyrB,IAASlnC,KAAK4jB,KAAI,CAAA23B,EAAApY,KAAA,QACsB,IAAvBnjC,KAAKssC,KAAKtD,QAAQ9B,GACtBmE,UAAW,CAAFkQ,EAAApY,KAAA,QAEA,OADlB+D,EAAK8R,cAAgBh5C,KAAKk5C,WAAWF,YAAY9R,EAAK1nC,SACtD0nC,EAAKyQ,OAAQ,EAAK4D,EAAAP,OAAA,wBAAAO,EAAAP,OAAA,SAInBh7C,KAAKw7C,iBAAiBtU,EAAMyL,EAAWsH,IAAiB,yBAAAsB,EAAAtwC,OAAA,GAAAqwC,EAAA,SAEvE,GAAC,CAAAx7C,IAAA,mBAAAC,MACD,SAAiBmnC,EAAMyL,EAAWsH,GAC9B,OAAOxX,EAAUziC,UAAM,OAAQ,GAAMymC,EAAAA,EAAAA,KAAAC,MAAE,SAAA+U,IAAA,IAAAx3C,EAAAy3C,EAAAxxB,EAAA,YAAAuc,EAAAA,EAAAA,KAAAG,MAAA,SAAA+U,GAAA,cAAAA,EAAA7U,KAAA6U,EAAAxY,MAAA,OASL,OAP9B+D,EAAKwQ,eAAiB,IAAI5U,SAAQ,SAAAv8B,GAAC,OAAItC,EAAOsC,CAAC,IAC/CvG,KAAKm5C,uBAAuBlzC,IAAIihC,EAAMA,EAAKwQ,gBAC3CxQ,EAAKwQ,eAAekE,SAAQ,WACxB1U,EAAKwQ,oBAAiB32C,EACtBmpB,EAAKivB,uBAAuB3a,OAAO0I,EACvC,IAAGyU,EAAA7U,KAAA,EAAA6U,EAAAxY,KAAA,EAEiCnjC,KAAK67C,cAAc3U,EAAMyL,EAAWsH,GAAiB,OAErF,OAFMyB,EAAiBC,EAAAG,KACvB5U,EAAKyQ,OAAQ,EAAMgE,EAAAxY,KAAA,GACb4Y,EAAAA,GAASC,QAAQN,EAAkB9tB,KAAI,SAAA6B,GAAK,OAAIvF,EAAKsxB,iBAAiB/rB,EAAOkjB,EAAWsH,EAAiB,KAAE,QAG1G,OAH0G0B,EAAA7U,KAAA,GAGjH7iC,IAAO03C,EAAAM,OAAA,6BAAAN,EAAA1wC,OAAA,GAAAwwC,EAAA,sBAGnB,GAAC,CAAA37C,IAAA,gBAAAC,MACD,SAAcmnC,EAAMyL,EAAWsH,GAC3B,OAAOxX,EAAUziC,UAAM,OAAQ,GAAMymC,EAAAA,EAAAA,KAAAC,MAAE,SAAAwV,IAAA,IAAAC,EAAA7iB,EAAA8iB,EAAAC,EAAA3vB,EAAA,YAAA+Z,EAAAA,EAAAA,KAAAG,MAAA,SAAA0V,GAAA,cAAAA,EAAAxV,KAAAwV,EAAAnZ,MAAA,OAqBd,OApBrB+D,EAAK8R,cAAgBh5C,KAAKk5C,WAAWF,YAAY9R,EAAK1nC,SAEjD0nC,EAAK8R,aAIA1f,EAAWt5B,KAAKu8C,cAAcrV,IAChCsV,EAAAA,EAAAA,IAAWljB,GACX6iB,EAAkBrZ,QAAQC,QAAQzJ,KAG5B8iB,GAAcK,EAAAA,EAAAA,IAAQ,MAChB/uC,MAAK,WACbw5B,EAAK0Q,MAAO,EACZlrB,EAAK4sB,0BAA0Bx1C,KAAKojC,EACxC,IAAG,SAAAvS,GAAC,OAAI,IAAI,IACZwnB,EAAkB7iB,EAASsiB,SAAQ,kBAAMQ,EAAYp7C,QAAQ,MAbjEm7C,EAAkBrZ,QAAQC,QAAQ2Z,EAAAA,EAASC,SAe9CL,EAAAxV,KAAA,EAAAwV,EAAAnZ,KAAA,EAE0BgZ,EAAe,OAAxB,OAAR7iB,EAAQgjB,EAAAR,KAAAQ,EAAAtB,OAAA,SACPh7C,KAAK48C,YAAY1V,EAAM5N,EAAUqZ,EAAWsH,IAAiB,OAKnE,GALmEqC,EAAAxV,KAAA,EAAAwV,EAAAO,GAAAP,EAAA,SAGhEpV,IAASlnC,KAAK4jB,MAAQ5jB,KAAKssC,KAAKyO,WAAW7T,IAC3ClnC,KAAKssC,KAAKsO,SAAS1T,KAEnB4V,EAAAA,EAAAA,IAAmBR,EAAAO,IAAO,CAAFP,EAAAnZ,KAAA,gBAAAmZ,EAAAtB,OAAA,SACjB,IAAE,cAAAsB,EAAAO,GAAA,QAQZ,OARYP,EAAAxV,KAAA,GAKTI,EAAK0Q,OACL1Q,EAAK0Q,MAAO,EACZ53C,KAAKs5C,0BAA0Bx1C,KAAKojC,IACvCoV,EAAAL,OAAA,6BAAAK,EAAArxC,OAAA,GAAAixC,EAAA,uBAGb,GAAC,CAAAp8C,IAAA,gBAAAC,MACD,SAAcmnC,GAAM,IAAAhX,EAAA,KACZzU,EAASzb,KAAKo5C,gBAAgBpzC,IAAIkhC,GACtC,GAAIzrB,EACA,OAAOA,EAEX,IAAM6d,EAAWt5B,KAAKk5C,WAAW6D,YAAY7V,EAAK1nC,SAClD,OAAIg9C,EAAAA,EAAAA,IAAWljB,GACJt5B,KAAKg9C,gBAAgB1jB,IAG5B7d,GAASwhC,EAAAA,EAAAA,KAAwB,kBAAMxa,EAAUvS,OAAM,OAAQ,GAAMuW,EAAAA,EAAAA,KAAAC,MAAE,SAAAwW,IAAA,OAAAzW,EAAAA,EAAAA,KAAAG,MAAA,SAAAuW,GAAA,cAAAA,EAAArW,KAAAqW,EAAAha,MAAA,OAA2C,OAA3Cga,EAAAN,GAAsB78C,KAAIm9C,EAAAha,KAAA,EAAuB7J,EAAQ,cAAA6jB,EAAAC,GAAAD,EAAArB,KAAAqB,EAAAnC,OAAA,SAAAmC,EAAAN,GAA9BG,gBAAe99C,KAAAi+C,EAAAN,GAAAM,EAAAC,KAAA,wBAAAD,EAAAlyC,OAAA,GAAAiyC,EAAA,SAAoB,IACrIl9C,KAAKo5C,gBAAgBnzC,IAAIihC,EAAMzrB,GACxBA,EAAOmgC,SAAQ,WAAQ1rB,EAAKkpB,gBAAgB5a,OAAO0I,EAAO,IAEzE,GAAC,CAAApnC,IAAA,4BAAAC,MACD,SAAA+e,GAA0C,IAAdooB,EAAIpoB,EAAJooB,KAAMmW,EAAIv+B,EAAJu+B,KACT,OAAjBnW,EAAK1nC,UAGJ0nC,EAAKmE,WAAanE,EAAK1nC,QAAQm4C,QAC5B0F,EACAr9C,KAAK46C,SAAS1T,EAAK1nC,QAAQA,SAG3BQ,KAAK06C,qBAAqBxT,EAAK1nC,SAAS,GACnC89C,MAAMC,EAAAA,IAGvB,GAAC,CAAAz9C,IAAA,cAAAC,MACD,SAAYmnC,EAAMsW,EAA0B7K,EAAWsH,GAAkB,IAAAwD,EAAArtB,EAAA,KAC/DstB,GAAgBhvC,EAAAA,EAAAA,GAAO8uC,GAE7B,GAA6B,IAAzBtW,EAAK5N,SAASp0B,QAA4C,IAA5Bw4C,EAAiBx4C,OAC/C,MAAO,GAEX,IAEiCqG,EAF3BoyC,EAAgB,IAAIjgB,IACpBkgB,EAAwB,IAAIlgB,IAAMhyB,GAAAC,EAAAA,EAAAA,GACpBu7B,EAAK5N,UAAQ,IAAjC,IAAA5tB,EAAAE,MAAAL,EAAAG,EAAAG,KAAA5H,MAAmC,KAAxBwrB,EAAKlkB,EAAAxL,MAEZ,GADA49C,EAAc13C,IAAIwpB,EAAMjwB,QAASiwB,GAC7BzvB,KAAK4wC,iBAAkB,CACvB,IAAMvF,EAAYrrC,KAAKssC,KAAK9D,YAAY/Y,GACxCmuB,EAAsB33C,IAAIwpB,EAAMgV,GAAI,CAAEyC,KAAMzX,EAAO4b,UAAAA,GACvD,CACJ,CAAC,OAAAv/B,GAAAJ,EAAAvH,EAAA2H,EAAA,SAAAJ,EAAAK,GAAA,CACD,IAoDyCU,EApDnCivC,EAAoB,GACpBpiB,EAAWokB,EAAiB9vB,KAAI,SAAApuB,GAClC,IAAMw5C,IAAgB5oB,EAAK8oB,WAAWF,YAAYx5C,GAClD,IAAK4wB,EAAKwgB,iBAAkB,CACxB,IAAMiN,EAAoBrG,EAAwB,CAAEh4C,QAAAA,EAASoe,OAAQspB,EAAM8R,YAAAA,IAK3E,OAJIA,GAAe5oB,EAAK0oB,oBAAsB1oB,EAAK0oB,kBAAkBt5C,KACjEq+C,EAAkBhG,oBAAqB,EACvC6D,EAAkBn9B,KAAKs/B,IAEpBA,CACX,CACA,IAAMpZ,EAAKrU,EAAKwgB,iBAAiBc,MAAMlyC,GAAS6rB,WAC1C5P,EAASmiC,EAAsB53C,IAAIy+B,GACzC,GAAIhpB,EAAQ,CACR,IAAMoiC,EAAoBpiC,EAAOyrB,KAoBjC,OAnBAyW,EAAcnf,OAAOqf,EAAkBr+C,SACvC4wB,EAAKsX,MAAMlJ,OAAOqf,EAAkBr+C,SACpC4wB,EAAKsX,MAAMzhC,IAAIzG,EAASq+C,GACxBA,EAAkBr+C,QAAUA,EAC5Bq+C,EAAkB7E,YAAcA,EAC5BrG,EACIl3B,EAAO4vB,WACPwS,EAAkBvkB,SAAS1S,SAAQ,SAAAsgB,GAAI,OAAIsJ,EAAItJ,GAAM,SAAAA,GAAI,OAAI9W,EAAKsX,MAAMlJ,OAAO0I,EAAK1nC,QAAQ,GAAC,IAC7Fq+C,EAAkBvkB,SAASpS,OAAO,EAAG22B,EAAkBvkB,SAASp0B,QAChE24C,EAAkBlG,OAAQ,GAG1B+D,EAAkBn9B,KAAKs/B,GAGtB7E,GAAe5oB,EAAK0oB,oBAAsB1oB,EAAK0oB,kBAAkBt5C,KACtEq+C,EAAkBhG,oBAAqB,EACvC6D,EAAkBn9B,KAAKs/B,IAEpBA,CACX,CACA,IAAMC,EAAyBtG,EAAwB,CAAEh4C,QAAAA,EAASoe,OAAQspB,EAAMzC,GAAAA,EAAIuU,YAAAA,IAcpF,OAbIiB,GAAoBA,EAAiBD,UAAU5yB,OAAS6yB,EAAiBD,UAAU5yB,MAAMyR,QAAQ4L,IAAO,GACxGwV,EAAiB7yB,MAAM7I,KAAKu/B,GAE5B7D,GAAoBA,EAAiBD,UAAUrF,WAAasF,EAAiBD,UAAUrF,UAAU9b,QAAQ4L,IAAO,GAChHwV,EAAiBtF,UAAUp2B,KAAKu/B,GAEhC7D,GAAoBA,EAAiBD,UAAU+D,UAAY9D,EAAiBD,UAAU+D,SAASllB,QAAQ4L,IAAO,EAC9GiX,EAAkBn9B,KAAKu/B,GAElB9E,GAAe5oB,EAAK0oB,oBAAsB1oB,EAAK0oB,kBAAkBt5C,KACtEs+C,EAAuBjG,oBAAqB,EAC5C6D,EAAkBn9B,KAAKu/B,IAEpBA,CACX,IAAGpxC,GAAAf,EAAAA,EAAAA,GACgBgyC,EAAcpM,UAAQ,IAAzC,IAAA7kC,EAAAd,MAAAa,EAAAC,EAAAb,KAAA5H,MAA2C,CACvCusC,EADW/jC,EAAA1M,OACD,SAAAmnC,GAAI,OAAI9W,EAAKsX,MAAMlJ,OAAO0I,EAAK1nC,QAAQ,GACrD,CAAC,OAAAsM,GAAAY,EAAAvI,EAAA2H,EAAA,SAAAY,EAAAX,GAAA,KAC2BsqB,EAD3BG,GAAA7qB,EAAAA,EAAAA,GACmB2tB,GAAQ,IAA5B,IAAA9C,EAAA5qB,MAAAyqB,EAAAG,EAAA3qB,KAAA5H,MAA8B,KAAnBwrB,EAAK4G,EAAAt2B,MACZC,KAAK0nC,MAAMzhC,IAAIwpB,EAAMjwB,QAASiwB,EAClC,CAAC,OAAA3jB,GAAA0qB,EAAAryB,EAAA2H,EAAA,SAAA0qB,EAAAzqB,GAAA,CAOD,OANA0xC,EAAAvW,EAAK5N,UAASpS,OAAMzY,MAAAgvC,EAAA,CAAC,EAAGvW,EAAK5N,SAASp0B,QAAMgE,QAAAwF,EAAAA,EAAAA,GAAK4qB,KAE7C4N,IAASlnC,KAAK4jB,MAAQ5jB,KAAKw5C,0BAAgD,IAApBlgB,EAASp0B,QAA6C,IAA7Bw2C,EAAkBx2C,SAClGo0B,EAAS,GAAGue,oBAAqB,EACjC6D,EAAkBn9B,KAAK+a,EAAS,KAE7BoiB,CACX,GAAC,CAAA57C,IAAA,SAAAC,MACD,SAAOmnC,EAAM+S,EAAkBl7C,GAAS,IAAAq0C,EAAA,KAC9B9Z,EAAW4N,EAAK5N,SAAS1L,KAAI,SAAAsZ,GAAI,OAAIkM,EAAK4K,cAAc9W,EAAM+S,EAAiB,IAC/EH,EAAoB/6C,GAAW0H,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG/6B,GAAU,CAAEk/C,qBAAsBl/C,EAAQk/C,sBAAwB,CAC/HvM,MAAK,SAACxK,GACF,OAAOnoC,EAAQk/C,qBAAqBvM,MAAMxK,EAAK1nC,QACnD,KAERQ,KAAKssC,KAAKsQ,YAAY1V,IAASlnC,KAAK4jB,KAAO,KAAOsjB,EAAM5N,EAAUwgB,GAC9D5S,IAASlnC,KAAK4jB,MACd5jB,KAAKssC,KAAKuK,eAAe3P,EAAMA,EAAK8R,aAExCh5C,KAAKq5C,aAAav1C,MACtB,GAAC,CAAAhE,IAAA,gBAAAC,MACD,SAAcmnC,EAAM+S,GAAkB,IAQ9B5O,EAR8BgI,EAAA,KAClC,OAAInM,EAAKyQ,MACE,CACHn4C,QAAS0nC,EACTkE,YAAalE,EAAK8R,YAClB3N,WAAW,IAKfA,IADA4O,GAAoBA,EAAiBD,UAAU+D,UAAY7W,EAAKzC,IAAMwV,EAAiBD,UAAU+D,SAASllB,QAAQqO,EAAKzC,KAAO,IAIlHyC,EAAK2Q,mBAErB3Q,EAAK2Q,wBAAqB92C,EACnB,CACHvB,QAAS0nC,EACT5N,SAAU4N,EAAK8R,YAAc0D,EAAAA,EAAS9uB,IAAIsZ,EAAK5N,UAAU,SAAA7J,GAAK,OAAI4jB,EAAK2K,cAAcvuB,EAAOwqB,EAAiB,IAAI,GACjH7O,YAAalE,EAAK8R,YAClB3N,UAAAA,GAER,GAAC,CAAAvrC,IAAA,kBAAAC,MACD,SAAgBu5B,GAIZ,OAHIt5B,KAAK+4C,SACLzf,GAAW5qB,EAAAA,EAAAA,GAAI4qB,GAAU4kB,KAAKl+C,KAAK+4C,OAAOoF,QAAQC,KAAKp+C,KAAK+4C,UAEzDzf,CACX,GAAC,CAAAx5B,IAAA,UAAAC,MACD,WACIC,KAAKkH,YAAYnC,SACrB,KAACk0C,CAAA,CA7bqB,GA+bpBoF,EAAoC,WAetC,SAAAA,EAAYnX,IAAMjoC,EAAAA,EAAAA,GAAA,KAAAo/C,GACdr+C,KAAKknC,KAAOA,CAChB,CAHiD,OAGhDrnC,EAAAA,EAAAA,GAAAw+C,EAAA,EAAAv+C,IAAA,UAAAkG,IAhBD,WACI,MAAO,CACHg7B,SAAUhhC,KAAKknC,KAAK1nC,QAAQwhC,SAASpT,KAAI,SAAAzpB,GAAC,OAAIA,EAAE3E,OAAO,IACvD8+C,eAAgBt+C,KAAKknC,KAAK1nC,QAAQ8+C,eAE1C,GAAC,CAAAx+C,IAAA,WAAAkG,IACD,WAAiB,OAAOhG,KAAKknC,KAAK5N,SAAS1L,KAAI,SAAAsZ,GAAI,OAAI,IAAImX,EAAqCnX,EAAK,GAAG,GAAC,CAAApnC,IAAA,QAAAkG,IACzG,WAAc,OAAOhG,KAAKknC,KAAKgE,KAAO,GAAC,CAAAprC,IAAA,uBAAAkG,IACvC,WAA6B,OAAOhG,KAAKknC,KAAKwE,oBAAsB,GAAC,CAAA5rC,IAAA,oBAAAkG,IACrE,WAA0B,OAAOhG,KAAKknC,KAAK8N,iBAAmB,GAAC,CAAAl1C,IAAA,cAAAkG,IAC/D,WAAoB,OAAOhG,KAAKknC,KAAKkE,WAAa,GAAC,CAAAtrC,IAAA,YAAAkG,IACnD,WAAkB,OAAOhG,KAAKknC,KAAKmE,SAAW,GAAC,CAAAvrC,IAAA,UAAAkG,IAC/C,WAAgB,OAAOhG,KAAKknC,KAAKnV,OAAS,GAAC,CAAAjyB,IAAA,aAAAkG,IAC3C,WAAmB,OAAOhG,KAAKknC,KAAK+I,UAAY,KAACoO,CAAA,CAdX,GAmBpCE,EAAiC,WACnC,SAAAA,EAAY3gB,EAAUwa,EAAYoG,EAAgChU,IAAyBvrC,EAAAA,EAAAA,GAAA,KAAAs/C,GACvFv+C,KAAK49B,SAAWA,EAChB59B,KAAKo4C,WAAaA,EAClBp4C,KAAKw+C,+BAAiCA,EACtCx+C,KAAKwqC,wBAA0BA,EAC/BxqC,KAAKgqC,cAAgB,IAAItM,IACzB19B,KAAKkH,YAAc,GACnBlH,KAAKq9B,WAAaO,EAASP,UAC/B,CAmCC,OAnCAx9B,EAAAA,EAAAA,GAAA0+C,EAAA,EAAAz+C,IAAA,iBAAAC,MACD,SAAejB,GAEX,MAAO,CAAEklB,aADYhkB,KAAK49B,SAASK,eAAen/B,GAEtD,GAAC,CAAAgB,IAAA,gBAAAC,MACD,SAAcmnC,EAAM7sB,EAAO2J,EAAc3gB,GACrCrD,KAAK49B,SAASQ,cAAcp+B,KAAKo4C,WAAWxqB,IAAIsZ,GAAO7sB,EAAO2J,EAAaA,aAAc3gB,EAC7F,GAAC,CAAAvD,IAAA,2BAAAC,MACD,SAAyBmnC,EAAM7sB,EAAO2J,EAAc3gB,GAChDrD,KAAK49B,SAAS6gB,yBAAyBz+C,KAAKw+C,iCAAiC5wB,IAAIsZ,GAAO7sB,EAAO2J,EAAaA,aAAc3gB,EAC9H,GAAC,CAAAvD,IAAA,gBAAAC,MACD,SAAcP,EAAS64C,GACD,IAAAqG,EAIbC,EAJL,OAAIn/C,EAAQo4C,OACR8G,EAAArG,EAAel4C,WAAUC,IAAGqO,MAAAiwC,GAAAhwC,EAAAA,EAAAA,GAAIC,EAAAA,EAAUC,iBAAiBoJ,EAAAA,EAAQwgC,oBAC5D,KAGPmG,EAAAtG,EAAel4C,WAAUU,OAAM4N,MAAAkwC,GAAAjwC,EAAAA,EAAAA,GAAIC,EAAAA,EAAUC,iBAAiBoJ,EAAAA,EAAQwgC,oBAC/D,EAEf,GAAC,CAAA14C,IAAA,iBAAAC,MACD,SAAemnC,EAAM7sB,EAAO2J,EAAc3gB,GACtC,IAAI8J,EAAIib,EACuC,QAA9CA,GAAMjb,EAAKnN,KAAK49B,UAAUS,sBAAmC,IAAPjW,GAAyBA,EAAGlpB,KAAKiO,EAAInN,KAAKo4C,WAAWxqB,IAAIsZ,GAAO7sB,EAAO2J,EAAaA,aAAc3gB,EAC7J,GAAC,CAAAvD,IAAA,4BAAAC,MACD,SAA0BmnC,EAAM7sB,EAAO2J,EAAc3gB,GACjD,IAAI8J,EAAIib,EACkD,QAAzDA,GAAMjb,EAAKnN,KAAK49B,UAAUghB,iCAA8C,IAAPx2B,GAAyBA,EAAGlpB,KAAKiO,EAAInN,KAAKw+C,iCAAiC5wB,IAAIsZ,GAAO7sB,EAAO2J,EAAaA,aAAc3gB,EAC9L,GAAC,CAAAvD,IAAA,kBAAAC,MACD,SAAgBikB,GACZhkB,KAAK49B,SAASU,gBAAgBta,EAAaA,aAC/C,GAAC,CAAAlkB,IAAA,UAAAC,MACD,WACIC,KAAKgqC,cAAcz/B,QACnBvK,KAAKkH,aAAcnC,EAAAA,EAAAA,IAAQ/E,KAAKkH,YACpC,KAACq3C,CAAA,CA5CkC,GAoDhC,IAAMM,EAAyB,SAAAC,IAAAngD,EAAAA,EAAAA,GAAAkgD,EAAAC,GAAA,IAAAr+B,GAAA5hB,EAAAA,EAAAA,GAAAggD,GAClC,SAAAA,EAAY3f,EAAMpgC,EAAWqgC,EAAiB4f,EAAqB5hB,EAAW+b,GAA0B,IAAAxF,EAAd30C,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,EAIpE,OAJqEhG,EAAAA,EAAAA,GAAA,KAAA4/C,IAClGnL,EAAAjzB,EAAAvhB,KAAA,KAAMggC,EAAMpgC,EAAWqgC,EAAiBhC,EAAW+b,EAAYn6C,IAC1DggD,oBAAsBA,EAC3BrL,EAAKsL,uBAAyB,IAAIzF,EAAAA,IAAW,SAAArS,GAAI,OAAI,IAAImX,EAAqCnX,EAAK,IACnGwM,EAAK/lB,OAAS5uB,EAAQ4uB,OAAO+lB,CACjC,CAmFC,OAnFA7zC,EAAAA,EAAAA,GAAAg/C,EAAA,EAAA/+C,IAAA,aAAAC,MACD,SAAWm/B,EAAMpgC,EAAWihC,EAAU5C,EAAWp+B,GAAS,IAAA60C,EAAA,KAChDgG,EAAqB,IAAItQ,EAAAA,GAAqBvJ,GAC9C8Z,EAAsB1c,EAAUvP,KAAI,SAAApnB,GAAC,OAAI,IAAI+3C,EAAkC/3C,EAAGotC,EAAKwE,YAAY,kBAAMxE,EAAKoL,sBAAsB,GAAEpL,EAAK0F,0BAA0Bx3C,MAAM,IAC3Kg4C,EAhBd,SAAyC/6C,GACrC,IAAM+6C,EAAoB/6C,GAAW85C,EAAoB95C,GACzD,OAAO+6C,GAAqBrzC,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAGggB,GAAoB,CAAEvN,gCAAiCuN,EAAkBvN,iCAAmC9lC,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAGggB,EAAkBvN,iCAAkC,CAAE0S,yCAAwC,SAACC,GAC3R,OAAOngD,EAAQwtC,gCAAgC0S,yCAAyCC,EAAItxB,KAAI,SAAAzpB,GAAC,OAAIA,EAAE3E,OAAO,IAClH,KACZ,CAWkC2/C,CAAgCpgD,IAAY,CAAC,EACvE,OAAO,IAAIqgD,EAAAA,EAAuBlgB,EAAMpgC,EAAW86C,EAAoBC,EAAqBC,EAChG,GAAC,CAAAh6C,IAAA,gBAAAC,MACD,SAAcmnC,EAAM+S,GAChB,OAAOxzC,OAAOqzB,OAAO,CAAEwkB,eAAgBt+C,KAAK++C,oBAAoBM,iBAAiBnY,EAAK1nC,WAAU8N,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAsxC,EAAAv3C,WAAA,sBAAApI,KAAA,KAAsBgoC,EAAM+S,GAChI,GAAC,CAAAn6C,IAAA,gBAAAC,MACD,WAA4B,IAAdhB,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,EACrBjF,KAAKssC,KAAKluB,cAAcrf,EAC5B,GAAC,CAAAe,IAAA,SAAAC,MACD,SAAOmnC,EAAM+S,GAAkB,IAAAlG,EAAA,KAC3B,IAAK/zC,KAAK4wC,iBACN,OAAAtjC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAsxC,EAAAv3C,WAAA,eAAApI,KAAA,KAAoBgoC,EAAM+S,GAK9B,IAAMvI,EAAQ,SAAClyC,GAAO,OAAKu0C,EAAKnD,iBAAiBc,MAAMlyC,GAAS6rB,UAAU,EACpEi0B,EAAqB,SAAC5X,GACxB,IACwB/O,EADlBld,EAAS,IAAI+hB,IAAM5E,GAAAjtB,EAAAA,EAAAA,GACN+7B,GAAK,IAAxB,IAAA9O,EAAAhtB,MAAA+sB,EAAAC,EAAA/sB,KAAA5H,MAA0B,KAAfijC,EAAIvO,EAAA54B,MACLw/C,EAAiBxL,EAAKzH,KAAKkT,sBAAsBtY,IAAS6M,EAAKnwB,KAAO,KAAOsjB,GACnF,GAAKqY,EAAe//C,QAApB,CAEC,IACiDw5B,EADjDG,GAAAxtB,EAAAA,EAAAA,GACkB4zC,EAAe//C,QAAQwhC,UAAQ,IAAlD,IAAA7H,EAAAvtB,MAAAotB,EAAAG,EAAAttB,KAAA5H,MAAoD,KAAzCijC,EAAIlO,EAAAj5B,MACX0b,EAAOrb,IAAIsxC,EAAMxK,EAAK1nC,SAC1B,CAAC,OAAAsM,GAAAqtB,EAAAh1B,EAAA2H,EAAA,SAAAqtB,EAAAptB,GAAA,CAHD,CAIJ,CAAC,OAAAD,GAAA8sB,EAAAz0B,EAAA2H,EAAA,SAAA8sB,EAAA7sB,GAAA,CACD,OAAO0P,CACX,EACMgkC,EAAeH,EAAmBt/C,KAAKssC,KAAKpL,gBAC5Cwe,EAAWJ,EAAmBt/C,KAAKssC,KAAKpgB,aAC9C5e,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAsxC,EAAAv3C,WAAA,eAAApI,KAAA,KAAagoC,EAAM+S,GACnB,IAAMtF,EAAY30C,KAAKkhC,eACnBye,GAAqB,EACnBv4B,EAAQpnB,KAAKksB,WACf0zB,GAAiB,GACP,SAARtO,EAASpK,GACX,IAAMqY,EAAiBrY,EAAK1nC,QAC5B,GAAI+/C,EACA,IAAK,IAAI14C,EAAI,EAAGA,EAAI04C,EAAeve,SAAS97B,OAAQ2B,IAAK,CACrD,IAAM49B,EAAKiN,EAAM6N,EAAeve,SAASn6B,GAAGrH,SACtCA,EAAU+/C,EAAeve,SAASue,EAAeve,SAAS97B,OAAS,GAAG1F,QAExEigD,EAAa1T,IAAItH,KAAuC,IAAhCkQ,EAAU9b,QAAQr5B,KAC1Cm1C,EAAUp2B,KAAK/e,GACfmgD,GAAqB,GAErBD,EAAS3T,IAAItH,KAAmC,IAA5Brd,EAAMyR,QAAQr5B,KAClC4nB,EAAM7I,KAAK/e,GACXogD,GAAiB,EAEzB,CAEJ1Y,EAAK5N,SAAS1S,QAAQ0qB,EAC1B,CACAA,CAAMtxC,KAAKssC,KAAKkT,sBAAsBtY,IAASlnC,KAAK4jB,KAAO,KAAOsjB,IAC9DyY,GACA3/C,KAAK+2C,aAAapC,GAElBiL,GACA5/C,KAAKgsB,SAAS5E,EAEtB,GAGA,CAAAtnB,IAAA,kBAAAC,MACA,SAAgBu5B,GAAU,IAAAwd,EAAA,KAWtB,OAVI92C,KAAK2tB,SACL2L,EAAWojB,EAAAA,EAAS/uB,OAAO2L,GAAU,SAAAn1B,GACjC,IAWO07C,EAXDpkC,EAASq7B,EAAKnpB,OAAOA,OAAOxpB,EAAG,GAC/B8L,EAWU,mBADT4vC,EAV0BpkC,GAYlCokC,EAAe,EAAiC,GAElD7S,EAAAA,EAAAA,IAAe6S,IACb5S,EAAAA,EAAAA,IAAgB4S,EAAa5vC,aAG7Bg9B,EAAAA,EAAAA,IAAgB4S,GAjBf,GAAmB,IAAf5vC,EACA,MAAM,IAAI4P,MAAM,0EAEpB,OAAsB,IAAf5P,CACX,MAEJ3C,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAsxC,EAAAv3C,WAAA,wBAAApI,KAAA,KAA6Bo6B,EACjC,KAACulB,CAAA,CAzFiC,CAAS5F,E,6HCrsBlC6G,EAAQ,SAAAC,IAAAphD,EAAAA,EAAAA,GAAAmhD,EAAAC,GAAA,IAAAnhD,GAAAC,EAAAA,EAAAA,GAAAihD,GACjB,SAAAA,EAAY5gB,EAAMpgC,EAAWihC,EAAU5C,EAAW+b,GAA0B,IAAAl6C,EAAdD,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,EAIpB,OAJqBhG,EAAAA,EAAAA,GAAA,KAAA6gD,IACtE9gD,EAAAJ,EAAAM,KAAA,KAAMggC,EAAMpgC,EAAWihC,EAAU5C,EAAWp+B,IACvCmgC,KAAOA,EACZlgC,EAAKk6C,WAAaA,EAClBl6C,EAAK4xC,iBAAmB7xC,EAAQ6xC,iBAAiB5xC,CACrD,CAGC,OAHAa,EAAAA,EAAAA,GAAAigD,EAAA,EAAAhgD,IAAA,cAAAC,MACD,SAAYm/B,EAAMvN,EAAM5yB,GACpB,OAAO,IAAIihD,EAAAA,EAAgB9gB,EAAMvN,EAAM5yB,EAC3C,KAAC+gD,CAAA,CATgB,CAASjM,EAAAA,G,gPCKvB,SAAS7G,EAAeiT,GAC3B,MAAsB,kBAARA,GAAoB,eAAgBA,GAAO,SAAUA,CACvE,CACO,SAAShT,EAAgBh9B,GAC5B,OAAQA,GACJ,KAAK,EAAM,OAAO,EAClB,KAAK,EAAO,OAAO,EACnB,QAAS,OAAOA,EAExB,CACA,SAASiwC,EAAyBn/B,GAC9B,MAAqC,mBAAvBA,EAAOqqB,WACzB,CACO,IAAM+U,EAAc,WACvB,SAAAA,EAAYjhB,EAAMc,EAAMogB,GAA2B,IAAdrhD,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAChG,EAAAA,EAAAA,GAAA,KAAAkhD,GAC7CngD,KAAKk/B,KAAOA,EACZl/B,KAAKggC,KAAOA,EACZhgC,KAAKqgD,QAAU,GACfrgD,KAAKg0C,cAAgB,IAAIC,EAAAA,GACzBj0C,KAAK05C,0BAA4B,IAAI93C,EAAAA,GACrC5B,KAAK4pC,yBAA2B5pC,KAAKg0C,cAAcoC,UAAUp2C,KAAK05C,0BAA0B53C,OAC5F9B,KAAKsgD,4BAA8B,IAAI1+C,EAAAA,GACvC5B,KAAKugD,2BAA6BvgD,KAAKg0C,cAAcoC,UAAUp2C,KAAKsgD,4BAA4Bx+C,OAChG9B,KAAKwgD,aAAe,IAAI5+C,EAAAA,GACxB5B,KAAKkvC,YAAclvC,KAAKwgD,aAAa1+C,MACrC9B,KAAKygD,gBAAkB,IAAIr4C,EAAAA,GAAQs4C,EAAAA,GACnC1gD,KAAK84C,kBAAyD,qBAA9B/5C,EAAQ+5C,mBAA4C/5C,EAAQ+5C,kBAC5F94C,KAAK2tB,OAAS5uB,EAAQ4uB,OACtB3tB,KAAKw5C,yBAAuE,qBAArCz6C,EAAQy6C,0BAAmDz6C,EAAQy6C,yBAC1Gx5C,KAAK4jB,KAAO,CACRhG,YAAQ7c,EACRvB,QAAS4gD,EACT9mB,SAAU,GACV4R,MAAO,EACPQ,qBAAsB,EACtBsJ,mBAAoB,EACpB5J,aAAa,EACbC,WAAW,EACXsV,gBAAiB,EACjB1wC,WAAY,EACZ8hB,SAAS,EACTke,gBAAYlvC,EAEpB,CAmeC,OAneAlB,EAAAA,EAAAA,GAAAsgD,EAAA,EAAArgD,IAAA,SAAAC,MACD,SAAO2yC,EAAU3R,GAAwD,IAA3C6f,EAAQ37C,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGy3C,EAAAA,EAASC,QAAS59C,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,EAClE,GAAwB,IAApBytC,EAASxtC,OACT,MAAM,IAAIq1C,EAAAA,GAAUv6C,KAAKk/B,KAAM,yBAE/BngC,EAAQk/C,qBACRj+C,KAAK6gD,YAAY9hD,EAAQk/C,qBAAsBvL,EAAU3R,EAAa6f,EAAU7hD,GAGhFiB,KAAK8gD,aAAapO,EAAU3R,EAAa6f,EAAU7hD,EAE3D,GAAC,CAAAe,IAAA,cAAAC,MACD,SAAYghD,EAAUrO,EAAU3R,EAAaigB,EAAkBjiD,EAASkiD,GAAe,IAC/E9zC,EAD+EnO,EAAA,UAE1D,IAArBgiD,IAA+BA,EAAmBtE,EAAAA,EAASC,cACzC,IAAlBsE,IAA4BA,EAA6C,QAA5B9zC,EAAKpO,EAAQmiD,iBAA8B,IAAP/zC,EAAgBA,EAAK,GAC1G,IAAQ47B,EAAe/oC,KAAKmhD,2BAA2BzO,GAA/C3J,WACR,IAAKA,EAAWqY,YACZ,OAAOphD,KAAK8gD,aAAapO,EAAU3R,EAAaigB,EAAkBjiD,GAEtE,IAAM6hD,GAAQlyC,EAAAA,EAAAA,GAAOsyC,GACf3mC,EAAQq4B,EAASA,EAASxtC,OAAS,GACnCm8C,EAAO,IAAIC,EAAAA,GAAQ,CAAEC,YAAa,kBAAMxY,EAAWqY,WAAW,GAAI,CACpEG,YAAa,iBAAM,GAAAr4C,QAAAwF,EAAAA,EAAAA,GACZq6B,EAAWzP,SAAS0M,MAAM,EAAG3rB,KAAM3L,EAAAA,EAAAA,GACnCkyC,IAAQlyC,EAAAA,EAAAA,GACRq6B,EAAWzP,SAAS0M,MAAM3rB,EAAQ0mB,KACvCnT,KAAI,SAAAzpB,GAAC,OAAI48C,EAASrP,MAAMvtC,EAAE3E,SAAS6rB,UAAU,GAAC,IACjDm2B,aAAY,GAEf,GAAIH,EAAKI,UAEL,OADA1Y,EAAWqY,iBAAcrgD,EAClBf,KAAK8gD,aAAapO,EAAU3R,EAAa6f,EAAU7hD,GAE9D,IAYmFwM,EAZ7Em2C,EAAiBhP,EAAS1M,MAAM,GAAI,GACpC2b,EAAgB,SAACC,EAAcC,EAAcC,GAC/C,GAAIb,EAAgB,EAChB,IAAK,IAAIp6C,EAAI,EAAGA,EAAIi7C,EAAOj7C,IACvB+6C,IACAC,IACA7iD,EAAK6hD,YAAYE,EAAU,GAAF73C,QAAAwF,EAAAA,EAAAA,GAAMgzC,GAAc,CAAEE,EAAc,IAAIr/C,OAAOC,iBAAkBo+C,EAASiB,GAAcvoB,SAAUv6B,EAASkiD,EAAgB,EAGhK,EACIc,EAAar8C,KAAKE,IAAImjC,EAAWzP,SAASp0B,OAAQmV,EAAQ0mB,GAC1DihB,EAAapB,EAAS17C,OAAOwG,GAAAC,EAAAA,EAAAA,GACZ01C,EAAKY,QAAQ/D,MAAK,SAACze,EAAGC,GAAC,OAAKA,EAAEwiB,cAAgBziB,EAAEyiB,aAAa,KAAC,IAAnF,IAAAx2C,EAAAE,MAAAL,EAAAG,EAAAG,KAAA5H,MAAqF,KAA1Ek+C,EAAM52C,EAAAxL,MACb4hD,EAAcI,EAAYC,EAAYD,GAAcI,EAAOD,cAAgBC,EAAOC,iBAClFL,EAAaI,EAAOD,cACpBF,EAAaG,EAAOE,cAAgBhoC,EACpCra,KAAK8gD,aAAa,GAAD53C,QAAAwF,EAAAA,EAAAA,GAAKgzC,GAAc,CAAEK,IAAaI,EAAOC,eAAgB1F,EAAAA,EAAS1W,MAAM4a,EAAUoB,EAAYA,EAAaG,EAAOG,gBAAiBvjD,EACxJ,CACA,OAAA+M,GAAAJ,EAAAvH,EAAA2H,EAAA,SAAAJ,EAAAK,GAAA,CACA41C,EAAcI,EAAYC,EAAYD,EAC1C,GAAC,CAAAjiD,IAAA,eAAAC,MACD,SAAa2yC,EAAU3R,GASnB,IATyH,IAAA5/B,EAAA,KAAzFy/C,EAAQ37C,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGy3C,EAAAA,EAASC,QAAO79B,EAAA7Z,UAAAC,OAAA,EAAAD,UAAA,QAAAlE,EAAIwhD,EAAezjC,EAAfyjC,gBAAiBC,EAAe1jC,EAAf0jC,gBAAiBvE,EAAoBn/B,EAApBm/B,qBACjGwE,EAAqDziD,KAAKmhD,2BAA2BzO,GAA7E3J,EAAU0Z,EAAV1Z,WAAY2Z,EAASD,EAATC,UAAWC,EAAQF,EAARE,SAAU5wB,EAAO0wB,EAAP1wB,QACnC6wB,EAA2B,GAC3BC,EAAwBnG,EAAAA,EAAS9uB,IAAIgzB,GAAU,SAAAp5C,GAAE,OAAIrG,EAAK2hD,eAAet7C,EAAIuhC,EAAYA,EAAWhX,QAAU,EAAiC,EAA+B4wB,EAAUC,EAA0BL,EAAgB,IAClOQ,EAAYrQ,EAASA,EAASxtC,OAAS,GACvC89C,EAAkBja,EAAWzP,SAASp0B,OAAS,EAGjD+9C,EAAyB,EACpBp8C,EAAIk8C,EAAWl8C,GAAK,GAAKA,EAAIkiC,EAAWzP,SAASp0B,OAAQ2B,IAAK,CACnE,IAAM4oB,EAAQsZ,EAAWzP,SAASzyB,GAClC,GAAI4oB,EAAMsC,QAAS,CACfkxB,EAAyBxzB,EAAMulB,kBAC/B,KACJ,CACJ,CACA,IAGyCvoC,EAHnCy2C,EAAgB,GAClBC,EAA+B,EAC/BxC,EAAkB,EAAEj0C,GAAAf,EAAAA,EAAAA,GACJk3C,GAAqB,IAAzC,IAAAn2C,EAAAd,MAAAa,EAAAC,EAAAb,KAAA5H,MAA2C,KAAhCwrB,EAAKhjB,EAAA1M,MACZmjD,EAAc3kC,KAAKkR,GACnBkxB,GAAmBlxB,EAAMkxB,gBACrBlxB,EAAMsC,UACNtC,EAAMulB,kBAAoBiO,EAAyBE,IAE3D,CAAC,OAAAr3C,GAAAY,EAAAvI,EAAA2H,EAAA,SAAAY,EAAAX,GAAA,CACD,IAAMslC,GAAenqB,EAAAA,EAAAA,IAAO6hB,EAAWzP,SAAUypB,EAAWhiB,EAAamiB,GACpEjF,EAGIlV,EAAWqY,aAChBl6B,EAAAA,EAAAA,IAAO6hB,EAAWqY,YAAa2B,EAAWhiB,EAAamiB,EAAct1B,KAAI,SAAA/hB,GAAC,OAAIoyC,EAAqBvM,MAAM7lC,EAAErM,SAAS6rB,UAAU,KAG9H0d,EAAWqY,YAAcrY,EAAWzP,SAAS1L,KAAI,SAAA/hB,GAAC,OAAIoyC,EAAqBvM,MAAM7lC,EAAErM,SAAS6rB,UAAU,IANtG0d,EAAWqY,iBAAcrgD,EAS7B,IACgCs1B,EAD5B+sB,EAA8B,EAAE5sB,GAAA7qB,EAAAA,EAAAA,GAChB0lC,GAAY,IAAhC,IAAA7a,EAAA5qB,MAAAyqB,EAAAG,EAAA3qB,KAAA5H,MAAkC,CAAlBoyB,EAAAt2B,MACFgyB,SACNqxB,GAER,CACA,OAAAt3C,GAAA0qB,EAAAryB,EAAA2H,EAAA,SAAA0qB,EAAAzqB,GAAA,CACA,GAAoC,IAAhCq3C,EACA,IAAK,IAAIv8C,EAAIk8C,EAAYG,EAAch+C,OAAQ2B,EAAIkiC,EAAWzP,SAASp0B,OAAQ2B,IAAK,CAChF,IAAM4oB,EAAQsZ,EAAWzP,SAASzyB,GAC9B4oB,EAAMsC,UACNtC,EAAMulB,mBAAqBoO,EAEnC,CAIJ,GADAra,EAAW2C,sBAAwByX,EAA+BC,EAC9DT,GAAY5wB,EAAS,CACrB,IAAMsxB,EAAqBhS,EAAalc,QAAO,SAAC3uB,EAAG0gC,GAAI,OAAK1gC,GAAK0gC,EAAKnV,QAAUmV,EAAKyZ,gBAAkB,EAAE,GAAE,GAC3G3gD,KAAKsjD,gCAAgCva,EAAY4X,EAAkB0C,GACnErjD,KAAKggC,KAAK9Y,OAAOw7B,EAAWW,EAAoBT,EACpD,CACA,GAAIvR,EAAansC,OAAS,GAAKs9C,EAAiB,CAK5CnR,EAAazqB,SAJC,SAAR0qB,EAASpK,GACXsb,EAAgBtb,GAChBA,EAAK5N,SAAS1S,QAAQ0qB,EAC1B,GAEJ,CACAtxC,KAAKwgD,aAAa18C,KAAK,CAAEstC,cAAe8R,EAAe7R,aAAAA,IACvD,IAAMkS,EAAuBxa,EAAWzP,SAASp0B,OAAS,EACtD89C,IAAoBO,GACpBvjD,KAAK62C,eAAenE,EAAS1M,MAAM,GAAI,GAAIud,GAG/C,IADA,IAAIrc,EAAO6B,EACJ7B,GAAM,CACT,GAAwB,IAApBA,EAAKj3B,WAA+C,CAEpDjQ,KAAKygD,gBAAgBhzC,SAAQ,kBAAMtM,EAAKmuC,UAAU,IAClD,KACJ,CACApI,EAAOA,EAAKtpB,MAChB,CACJ,GAAC,CAAA9d,IAAA,WAAAC,MACD,SAAS2yC,GACL,GAAwB,IAApBA,EAASxtC,OACT,MAAM,IAAIq1C,EAAAA,GAAUv6C,KAAKk/B,KAAM,yBAEnC,IAAAskB,EAAsCxjD,KAAKyjD,yBAAyB/Q,GAA5DxL,EAAIsc,EAAJtc,KAAMwb,EAASc,EAATd,UAAWC,EAAQa,EAARb,SACrBzb,EAAKnV,SAAW4wB,GAChB3iD,KAAKggC,KAAK9Y,OAAOw7B,EAAW,EAAG,CAACxb,GAExC,GAAC,CAAApnC,IAAA,MAAAC,MACD,SAAI2yC,GACA,OAAO1yC,KAAK0jD,YAAYhR,EAC5B,GAAC,CAAA5yC,IAAA,eAAAC,MACD,SAAa2yC,GACT,IAAAiR,EAAyC3jD,KAAKyjD,yBAAyB/Q,GAA/DgQ,EAASiB,EAATjB,UAAW3wB,EAAO4xB,EAAP5xB,QAAS4wB,EAAQgB,EAARhB,SAC5B,OAAO5wB,GAAW4wB,EAAWD,GAAa,CAC9C,GAAC,CAAA5iD,IAAA,qBAAAC,MACD,SAAmB2yC,GACf,OAAO1yC,KAAK4jD,YAAYlR,GAAUiO,eACtC,GAAC,CAAA7gD,IAAA,gBAAAC,MACD,SAAc2yC,GACV,OAAO1yC,KAAK4jD,YAAYlR,GAAUtH,WACtC,GAAC,CAAAtrC,IAAA,iBAAAC,MACD,SAAe2yC,EAAUtH,GAAa,IAAAxgC,EAAA,KAC5Bs8B,EAAOlnC,KAAK4jD,YAAYlR,GACH,qBAAhBtH,IACPA,GAAelE,EAAKkE,aAExB,IAAMrqB,EAAS,CAAEqqB,YAAAA,GACjB,OAAOprC,KAAKg0C,cAAcsB,cAAa,kBAAM1qC,EAAKi5C,kBAAkBnR,EAAU3xB,EAAO,GACzF,GAAC,CAAAjhB,IAAA,cAAAC,MACD,SAAY2yC,GACR,OAAO1yC,KAAK4jD,YAAYlR,GAAUrH,SACtC,GAAC,CAAAvrC,IAAA,eAAAC,MACD,SAAa2yC,EAAUrH,EAAWsH,GAAW,IAAA5nC,EAAA,KACnCm8B,EAAOlnC,KAAK4jD,YAAYlR,GACL,qBAAdrH,IACPA,GAAanE,EAAKmE,WAEtB,IAAMtqB,EAAS,CAAEsqB,UAAAA,EAAWsH,UAAWA,IAAa,GACpD,OAAO3yC,KAAKg0C,cAAcsB,cAAa,kBAAMvqC,EAAK84C,kBAAkBnR,EAAU3xB,EAAO,GACzF,GAAC,CAAAjhB,IAAA,oBAAAC,MACD,SAAkB2yC,EAAU3xB,GACxB,IAAA+iC,EAAsC9jD,KAAKyjD,yBAAyB/Q,GAA5DxL,EAAI4c,EAAJ5c,KAAMwb,EAASoB,EAATpB,UAAWC,EAAQmB,EAARnB,SACnBlnC,EAASzb,KAAK+jD,0BAA0B7c,EAAMwb,EAAWC,EAAU5hC,GACzE,GAAImmB,IAASlnC,KAAK4jB,MAAQ5jB,KAAKw5C,0BAA4B/9B,IAAWykC,EAAyBn/B,IAAWmmB,EAAKkE,cAAgBlE,EAAKmE,YAActqB,EAAO4xB,UAAW,CAEhK,IADA,IAAIqR,GAAyB,EACpBn9C,EAAI,EAAGA,EAAIqgC,EAAK5N,SAASp0B,OAAQ2B,IAAK,CAE3C,GADcqgC,EAAK5N,SAASzyB,GAClBkrB,QAAS,CACf,GAAIiyB,GAAyB,EAAG,CAC5BA,GAAyB,EACzB,KACJ,CAEIA,EAAwBn9C,CAEhC,CACJ,CACIm9C,GAAyB,GACzBhkD,KAAK6jD,kBAAkB,GAAD36C,QAAAwF,EAAAA,EAAAA,GAAKgkC,GAAQ,CAAEsR,IAAwBjjC,EAErE,CACA,OAAOtF,CACX,GAAC,CAAA3b,IAAA,4BAAAC,MACD,SAA0BmnC,EAAMwb,EAAWC,EAAU5hC,GACjD,IAAMtF,EAASzb,KAAKikD,sBAAsB/c,EAAMnmB,GAAQ,GACxD,IAAK4hC,IAAazb,EAAKnV,UAAYtW,EAC/B,OAAOA,EAEX,IAAMyoC,EAA0Bhd,EAAKyZ,gBAC/BC,EAAW5gD,KAAKmkD,8BAA8Bjd,GAC9CnG,EAAcmjB,IAA0C,IAAfxB,EAAmB,EAAI,GAEtE,OADA1iD,KAAKggC,KAAK9Y,OAAOw7B,EAAY,EAAG3hB,EAAa6f,EAAS5a,MAAM,IACrDvqB,CACX,GAAC,CAAA3b,IAAA,wBAAAC,MACD,SAAsBmnC,EAAMnmB,EAAQs8B,GAChC,IAAI5hC,EAoBJ,GAnBIyrB,IAASlnC,KAAK4jB,KACdnI,GAAS,GAGLykC,EAAyBn/B,IACzBtF,EAASyrB,EAAKkE,cAAgBrqB,EAAOqqB,YACrClE,EAAKkE,YAAcrqB,EAAOqqB,aAEpBlE,EAAKkE,aAIX3vB,EAASyrB,EAAKmE,YAActqB,EAAOsqB,UACnCnE,EAAKmE,UAAYtqB,EAAOsqB,WAJxB5vB,GAAS,EAMTA,GACAzb,KAAK05C,0BAA0B51C,KAAK,CAAEojC,KAAAA,EAAMmW,KAAAA,MAG/C6C,EAAyBn/B,IAAWA,EAAO4xB,UAAW,KACtBha,EADsBC,GAAAjtB,EAAAA,EAAAA,GACnCu7B,EAAK5N,UAAQ,IAAjC,IAAAV,EAAAhtB,MAAA+sB,EAAAC,EAAA/sB,KAAA5H,MAAmC,KAAxBwrB,EAAKkJ,EAAA54B,MACZ0b,EAASzb,KAAKikD,sBAAsBx0B,EAAO1O,GAAQ,IAAStF,CAChE,CAAC,OAAA3P,GAAA8sB,EAAAz0B,EAAA2H,EAAA,SAAA8sB,EAAA7sB,GAAA,CACL,CACA,OAAO0P,CACX,GAAC,CAAA3b,IAAA,WAAAC,MACD,SAAS2yC,GAAU,IAAAnxB,EAAA,KACfvhB,KAAKg0C,cAAcsB,cAAa,WAE5B,IADA,IAAIpO,EAAO3lB,EAAKqiC,YAAYlR,GACrBxL,EAAKtpB,QACRspB,EAAOA,EAAKtpB,OACZ80B,EAAWA,EAAS1M,MAAM,EAAG0M,EAASxtC,OAAS,GAC3CgiC,EAAKmE,WACL9pB,EAAKsiC,kBAAkBnR,EAAU,CAAErH,WAAW,EAAOsH,WAAW,GAG5E,GACJ,GAAC,CAAA7yC,IAAA,WAAAC,MACD,WACI,IAAMmkD,EAA0BlkD,KAAK4jB,KAAK+8B,gBACpCC,EAAW5gD,KAAKokD,4BAA4BpkD,KAAK4jB,MACvD5jB,KAAKggC,KAAK9Y,OAAO,EAAGg9B,EAAyBtD,GAC7C5gD,KAAKygD,gBAAgBz/C,QACzB,GAAC,CAAAlB,IAAA,iBAAAC,MACD,SAAeskD,EAAazmC,EAAQmvB,EAAkB4V,EAAU2B,EAAkB/B,GAC9E,IAAMrb,EAAO,CACTtpB,OAAAA,EACApe,QAAS6kD,EAAY7kD,QACrB85B,SAAU,GACV4R,MAAOttB,EAAOstB,MAAQ,EACtBQ,qBAAsB,EACtBsJ,mBAAoB,EACpB5J,YAAgD,mBAA5BiZ,EAAYjZ,YAA4BiZ,EAAYjZ,YAAgD,qBAA1BiZ,EAAYhZ,UAC1GA,UAA4C,qBAA1BgZ,EAAYhZ,UAA4BrrC,KAAK84C,kBAAoBuL,EAAYhZ,UAC/FsV,gBAAiB,EACjB1wC,WAAY,EACZ8hB,SAAS,EACTke,gBAAYlvC,GAEVkP,EAAajQ,KAAKukD,YAAYrd,EAAM6F,GAC1C7F,EAAKj3B,WAAaA,EACd0yC,GACA2B,EAAiB/lC,KAAK2oB,GAE1B,IAI8BlO,EAJxBwrB,EAAgBH,EAAY/qB,UAAYojB,EAAAA,EAASC,QACjD8H,EAAgB9B,GAA2B,IAAf1yC,IAAiDi3B,EAAKmE,UACpFK,EAAuB,EACvBiV,EAAkB,EAAExnB,GAAAxtB,EAAAA,EAAAA,GACP64C,GAAa,IAA9B,IAAArrB,EAAAvtB,MAAAotB,EAAAG,EAAAttB,KAAA5H,MAAgC,KAArBuD,EAAEwxB,EAAAj5B,MACH0vB,EAAQzvB,KAAK8iD,eAAet7C,EAAI0/B,EAAMj3B,EAAYw0C,EAAeH,EAAkB/B,GACzFrb,EAAK5N,SAAS/a,KAAKkR,GACnBkxB,GAAmBlxB,EAAMkxB,gBACrBlxB,EAAMsC,UACNtC,EAAMulB,kBAAoBtJ,IAElC,CAAC,OAAA5/B,GAAAqtB,EAAAh1B,EAAA2H,EAAA,SAAAqtB,EAAAptB,GAAA,CAcD,OAbAm7B,EAAKkE,YAAclE,EAAKkE,aAAelE,EAAK5N,SAASp0B,OAAS,EAC9DgiC,EAAKwE,qBAAuBA,EAC5BxE,EAAKnV,QAAyB,IAAf9hB,EAAgDy7B,EAAuB,EAAoB,IAAfz7B,EACtFi3B,EAAKnV,QAMAmV,EAAKmE,YACXnE,EAAKyZ,gBAAkBA,IANvBzZ,EAAKyZ,gBAAkB,EACnBgC,GACA2B,EAAiBI,OAML,OAApBnC,QAAgD,IAApBA,GAAsCA,EAAgBrb,GAC3EA,CACX,GAAC,CAAApnC,IAAA,gCAAAC,MACD,SAA8BmnC,GAC1B,IAAMgd,EAA0Bhd,EAAKyZ,gBAC/BllC,EAAS,GAGf,OAFAzb,KAAK2kD,+BAA+Bzd,EAAMzrB,GAC1Czb,KAAKsjD,gCAAgCpc,EAAKtpB,OAAQnC,EAAOvW,OAASg/C,GAC3DzoC,CACX,GAAC,CAAA3b,IAAA,iCAAAC,MACD,SAA+BmnC,EAAMzrB,GACjC,IAAqB,IAAjByrB,EAAKnV,QACL,OAAO,EAIX,GAFAtW,EAAO8C,KAAK2oB,GACZA,EAAKyZ,gBAAkB,GAClBzZ,EAAKmE,UAAW,KACgB1Q,EADhBC,GAAAjvB,EAAAA,EAAAA,GACGu7B,EAAK5N,UAAQ,IAAjC,IAAAsB,EAAAhvB,MAAA+uB,EAAAC,EAAA/uB,KAAA5H,MAAmC,KAAxBwrB,EAAKkL,EAAA56B,MACZmnC,EAAKyZ,iBAAmB3gD,KAAK2kD,+BAA+Bl1B,EAAOhU,EACvE,CAAC,OAAA3P,GAAA8uB,EAAAz2B,EAAA2H,EAAA,SAAA8uB,EAAA7uB,GAAA,CACL,CAEA,OADA/L,KAAKsgD,4BAA4Bx8C,KAAKojC,GAC/BA,EAAKyZ,eAChB,GAAC,CAAA7gD,IAAA,8BAAAC,MACD,SAA4BmnC,GACxB,IAAMgd,EAA0Bhd,EAAKyZ,gBAC/BllC,EAAS,GAGf,OAFAzb,KAAK4kD,6BAA6B1d,EAAMA,EAAKnV,QAAU,EAAiC,EAA+BtW,GACvHzb,KAAKsjD,gCAAgCpc,EAAKtpB,OAAQnC,EAAOvW,OAASg/C,GAC3DzoC,CACX,GAAC,CAAA3b,IAAA,+BAAAC,MACD,SAA6BmnC,EAAM6F,EAAkBtxB,GAAyB,IACtExL,EADqD0yC,IAAQ19C,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,KAAAA,UAAA,GAEjE,GAAIiiC,IAASlnC,KAAK4jB,KAAM,CAEpB,GAAmB,KADnB3T,EAAajQ,KAAKukD,YAAYrd,EAAM6F,IAIhC,OAFA7F,EAAKnV,SAAU,EACfmV,EAAKyZ,gBAAkB,GAChB,EAEPgC,GACAlnC,EAAO8C,KAAK2oB,EAEpB,CACA,IAAM2d,EAAoBppC,EAAOvW,OACjCgiC,EAAKyZ,gBAAkBzZ,IAASlnC,KAAK4jB,KAAO,EAAI,EAChD,IAAIkhC,GAAwB,EAC5B,GAAK5d,EAAKmE,WAA4B,IAAfp7B,EAWnBi3B,EAAKwE,qBAAuB,MAXqC,CACjE,IACiC5Q,EAD7Bka,EAAoB,EAAEja,GAAApvB,EAAAA,EAAAA,GACNu7B,EAAK5N,UAAQ,IAAjC,IAAAyB,EAAAnvB,MAAAkvB,EAAAC,EAAAlvB,KAAA5H,MAAmC,KAAxBwrB,EAAKqL,EAAA/6B,MACZ+kD,EAAwB9kD,KAAK4kD,6BAA6Bn1B,EAAOxf,EAAYwL,EAAQknC,IAAazb,EAAKmE,YAAcyZ,EACjHr1B,EAAMsC,UACNtC,EAAMulB,kBAAoBA,IAElC,CAAC,OAAAlpC,GAAAivB,EAAA52B,EAAA2H,EAAA,SAAAivB,EAAAhvB,GAAA,CACDm7B,EAAKwE,qBAAuBsJ,CAChC,CAkBA,OAdI9N,IAASlnC,KAAK4jB,OACdsjB,EAAKnV,QAAyB,IAAf9hB,EAAgD60C,EAAwC,IAAf70C,EACxFi3B,EAAKj3B,WAAaA,GAEjBi3B,EAAKnV,QAMAmV,EAAKmE,YACXnE,EAAKyZ,iBAAmBllC,EAAOvW,OAAS2/C,IANxC3d,EAAKyZ,gBAAkB,EACnBgC,GACAlnC,EAAOipC,OAMf1kD,KAAKsgD,4BAA4Bx8C,KAAKojC,GAC/BA,EAAKnV,OAChB,GAAC,CAAAjyB,IAAA,kCAAAC,MACD,SAAgCmnC,EAAMma,GAClC,GAAa,IAATA,EAGJ,KAAOna,GACHA,EAAKyZ,iBAAmBU,EACxBrhD,KAAKsgD,4BAA4Bx8C,KAAKojC,GACtCA,EAAOA,EAAKtpB,MAEpB,GAAC,CAAA9d,IAAA,cAAAC,MACD,SAAYmnC,EAAM6F,GACd,IAAMtxB,EAASzb,KAAK2tB,OAAS3tB,KAAK2tB,OAAOA,OAAOuZ,EAAK1nC,QAASutC,GAAoB,EAClF,MAAsB,mBAAXtxB,GACPyrB,EAAK+I,gBAAalvC,EACX0a,EAAS,EAAiC,GAE5CuxB,EAAevxB,IACpByrB,EAAK+I,WAAax0B,EAAOkI,KAClBspB,EAAgBxxB,EAAOxL,cAG9Bi3B,EAAK+I,gBAAalvC,EACXksC,EAAgBxxB,GAE/B,GACA,CAAA3b,IAAA,cAAAC,MACA,SAAY2yC,GAA4B,IAAlBxL,EAAIjiC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGjF,KAAK4jB,KAC9B,IAAK8uB,GAAgC,IAApBA,EAASxtC,OACtB,OAAO,EAEX,IAAA6/C,GAAAC,EAAAA,EAAAA,GAAyBtS,GAAlBr4B,EAAK0qC,EAAA,GAAKE,EAAIF,EAAA/e,MAAA,GACrB,QAAI3rB,EAAQ,GAAKA,EAAQ6sB,EAAK5N,SAASp0B,SAGhClF,KAAK0jD,YAAYuB,EAAM/d,EAAK5N,SAASjf,GAChD,GACA,CAAAva,IAAA,cAAAC,MACA,SAAY2yC,GAA4B,IAAlBxL,EAAIjiC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGjF,KAAK4jB,KAC9B,IAAK8uB,GAAgC,IAApBA,EAASxtC,OACtB,OAAOgiC,EAEX,IAAAge,GAAAF,EAAAA,EAAAA,GAAyBtS,GAAlBr4B,EAAK6qC,EAAA,GAAKD,EAAIC,EAAAlf,MAAA,GACrB,GAAI3rB,EAAQ,GAAKA,EAAQ6sB,EAAK5N,SAASp0B,OACnC,MAAM,IAAIq1C,EAAAA,GAAUv6C,KAAKk/B,KAAM,yBAEnC,OAAOl/B,KAAK4jD,YAAYqB,EAAM/d,EAAK5N,SAASjf,GAChD,GACA,CAAAva,IAAA,2BAAAC,MACA,SAAyB2yC,GACrB,GAAwB,IAApBA,EAASxtC,OACT,MAAO,CAAEgiC,KAAMlnC,KAAK4jB,KAAM8+B,WAAY,EAAGC,UAAU,EAAM5wB,SAAS,GAEtE,IAAAozB,EAAqDnlD,KAAKmhD,2BAA2BzO,GAA7E3J,EAAUoc,EAAVpc,WAAY2Z,EAASyC,EAATzC,UAAWC,EAAQwC,EAARxC,SAAU5wB,EAAOozB,EAAPpzB,QACnC1X,EAAQq4B,EAASA,EAASxtC,OAAS,GACzC,GAAImV,EAAQ,GAAKA,EAAQ0uB,EAAWzP,SAASp0B,OACzC,MAAM,IAAIq1C,EAAAA,GAAUv6C,KAAKk/B,KAAM,yBAEnC,IAAMgI,EAAO6B,EAAWzP,SAASjf,GACjC,MAAO,CAAE6sB,KAAAA,EAAMwb,UAAAA,EAAWC,SAAAA,EAAU5wB,QAASA,GAAWmV,EAAKnV,QACjE,GAAC,CAAAjyB,IAAA,6BAAAC,MACD,SAA2B2yC,GAA4E,IAAlExL,EAAIjiC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGjF,KAAK4jB,KAAM8+B,EAASz9C,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,EAAG09C,IAAQ19C,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,KAAAA,UAAA,GAAS8sB,IAAO9sB,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,KAAAA,UAAA,GAC1FmgD,GAAAJ,EAAAA,EAAAA,GAAyBtS,GAAlBr4B,EAAK+qC,EAAA,GAAKH,EAAIG,EAAApf,MAAA,GACrB,GAAI3rB,EAAQ,GAAKA,EAAQ6sB,EAAK5N,SAASp0B,OACnC,MAAM,IAAIq1C,EAAAA,GAAUv6C,KAAKk/B,KAAM,yBAGnC,IAAK,IAAIr4B,EAAI,EAAGA,EAAIwT,EAAOxT,IACvB67C,GAAaxb,EAAK5N,SAASzyB,GAAG85C,gBAIlC,OAFAgC,EAAWA,IAAazb,EAAKmE,UAC7BtZ,EAAUA,GAAWmV,EAAKnV,QACN,IAAhBkzB,EAAK//C,OACE,CAAE6jC,WAAY7B,EAAMwb,UAAAA,EAAWC,SAAAA,EAAU5wB,QAAAA,GAE7C/xB,KAAKmhD,2BAA2B8D,EAAM/d,EAAK5N,SAASjf,GAAQqoC,EAAY,EAAGC,EAAU5wB,EAChG,GAAC,CAAAjyB,IAAA,UAAAC,MACD,WAAuB,IAAf2yC,EAAQztC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,GACf,OAAOjF,KAAK4jD,YAAYlR,EAC5B,GACA,CAAA5yC,IAAA,kBAAAC,MACA,SAAgBmnC,GAGZ,IAFA,IAAMwL,EAAW,GACb2S,EAAgBne,EACbme,EAAcznC,QACjB80B,EAASn0B,KAAK8mC,EAAcznC,OAAO0b,SAAST,QAAQwsB,IACpDA,EAAgBA,EAAcznC,OAElC,OAAO80B,EAASpW,SACpB,GAAC,CAAAx8B,IAAA,wBAAAC,MACD,SAAsB2yC,GAClB,OAAwB,IAApBA,EAASxtC,YACT,EAEyB,IAApBwtC,EAASxtC,OACP,IAGAogD,EAAAA,EAAAA,IAAM5S,GAAU,EAE/B,GAAC,CAAA5yC,IAAA,uBAAAC,MACD,SAAqB2yC,GACjB,IAAMxL,EAAOlnC,KAAK4jD,YAAYlR,GAC9B,GAA6B,IAAzBxL,EAAK5N,SAASp0B,OAGlB,OAAOgiC,EAAK5N,SAAS,GAAG95B,OAC5B,KAAC2gD,CAAA,CAjgBsB,E,uPCf3B,SAASoF,EAAW/lD,GAGhB,MAAO,CACHA,QAAS,CAAEwhC,SAHE,CAACxhC,EAAQA,SAGD8+C,eAFF9+C,EAAQ8+C,iBAAkB,GAG7ChlB,SAAUojB,EAAAA,EAAS9uB,IAAI8uB,EAAAA,EAAS8I,KAAKhmD,EAAQ85B,UAAWisB,GACxDna,YAAa5rC,EAAQ4rC,YACrBC,UAAW7rC,EAAQ6rC,UAE3B,CAEO,SAASoa,EAASjmD,GAKrB,IAJA,IAEIkmD,EACApsB,EAHE0H,EAAW,CAACxhC,EAAQA,SACpB8+C,EAAiB9+C,EAAQ8+C,iBAAkB,IAGpC,KAAAqH,EACsBjJ,EAAAA,EAASkJ,QAAQlJ,EAAAA,EAAS8I,KAAKhmD,EAAQ85B,UAAW,GAAEusB,GAAAzlB,EAAAA,EAAAA,GAAAulB,EAAA,GACnF,GADCrsB,EAAQusB,EAAA,GAAEH,EAAgBG,EAAA,GACH,IAApBvsB,EAASp0B,OACT,MAEJ,GAAIo0B,EAAS,GAAGglB,eACZ,MAEJ9+C,EAAU85B,EAAS,GACnB0H,EAASziB,KAAK/e,EAAQA,QAC1B,CACA,MAAO,CACHA,QAAS,CAAEwhC,SAAAA,EAAUsd,eAAAA,GACrBhlB,SAAUojB,EAAAA,EAAS9uB,IAAI8uB,EAAAA,EAASxzC,OAAOowB,EAAUosB,GAAmBD,GACpEra,YAAa5rC,EAAQ4rC,YACrBC,UAAW7rC,EAAQ6rC,UAE3B,CACA,SAASya,EAAYtmD,GAAoB,IACjC85B,EADsBjf,EAAKpV,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,EAQlC,OALIq0B,EADAjf,EAAQ7a,EAAQA,QAAQwhC,SAAS97B,OAAS,EAC/B,CAAC4gD,EAAYtmD,EAAS6a,EAAQ,IAG9BqiC,EAAAA,EAAS9uB,IAAI8uB,EAAAA,EAAS8I,KAAKhmD,EAAQ85B,WAAW,SAAA9xB,GAAE,OAAIs+C,EAAYt+C,EAAI,EAAE,IAEvE,IAAV6S,GAAe7a,EAAQA,QAAQ8+C,eACxB,CACH9+C,QAASA,EAAQA,QAAQwhC,SAAS3mB,GAClCif,SAAAA,EACAglB,gBAAgB,EAChBlT,YAAa5rC,EAAQ4rC,YACrBC,UAAW7rC,EAAQ6rC,WAGpB,CACH7rC,QAASA,EAAQA,QAAQwhC,SAAS3mB,GAClCif,SAAAA,EACA8R,YAAa5rC,EAAQ4rC,YACrBC,UAAW7rC,EAAQ6rC,UAE3B,CAEO,SAAS0a,EAAWvmD,GACvB,OAAOsmD,EAAYtmD,EAAS,EAChC,CACA,SAAS0nB,EAAOm9B,EAAa7kD,EAAS85B,GAClC,OAAI+qB,EAAY7kD,UAAYA,EACjBiH,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAGuqB,GAAc,CAAE/qB,SAAAA,IAEpD7yB,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAGuqB,GAAc,CAAE/qB,SAAUojB,EAAAA,EAAS9uB,IAAI8uB,EAAAA,EAAS8I,KAAKnB,EAAY/qB,WAAW,SAAAn1B,GAAC,OAAI+iB,EAAO/iB,EAAG3E,EAAS85B,EAAS,KACxJ,CACA,IAMa0sB,EAAyB,WAIlC,SAAAA,EAAY9mB,EAAMc,GAAoB,IAAdjhC,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAChG,EAAAA,EAAAA,GAAA,KAAA+mD,GAChChmD,KAAKk/B,KAAOA,EACZl/B,KAAKqgD,QAAU,KACfrgD,KAAK0nC,MAAQ,IAAIhK,IACjB19B,KAAKqoC,MAAQ,IAAI2X,EAAAA,EAAgB9gB,EAAMc,EAAMjhC,GAC7CiB,KAAKyyB,QAAgD,qBAA/B1zB,EAAQknD,oBAA4ClnD,EAAQknD,mBAClFjmD,KAAK4wC,iBAAmB7xC,EAAQ6xC,gBACpC,CAgJC,OAhJA/wC,EAAAA,EAAAA,GAAAmmD,EAAA,EAAAlmD,IAAA,cAAAkG,IAVD,WAAoB,OAAOhG,KAAKqoC,MAAM6G,WAAa,GAAC,CAAApvC,IAAA,2BAAAkG,IACpD,WAAiC,OAAOhG,KAAKqoC,MAAMuB,wBAA0B,GAAC,CAAA9pC,IAAA,6BAAAkG,IAC9E,WAAmC,OAAOhG,KAAKqoC,MAAMkY,0BAA4B,GAAC,CAAAzgD,IAAA,cAAAC,MASlF,SAAYP,GAA+C,IAlBjC0mD,EAkBL5sB,EAAQr0B,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGy3C,EAAAA,EAASC,QAAS59C,EAAOkG,UAAAC,OAAA,EAAAD,UAAA,QAAAlE,EAG/Ck9C,EAAuBl/C,EAAQk/C,uBArBfiI,EAqB4DnnD,EAAQk/C,qBArB1D,CACpCvM,MAAK,SAACxK,GACF,OAAOA,EAAKlG,SAASpT,KAAI,SAAAzpB,GAAC,OAAI+hD,EAAKxU,MAAMvtC,GAAGknB,UAAU,IAAElD,KAAK,KACjE,IAmBI,GAAgB,OAAZ3oB,EAAJ,CAKA,IAAM+/C,EAAiBv/C,KAAK0nC,MAAM1hC,IAAIxG,GACtC,IAAK+/C,EACD,MAAM,IAAIhF,EAAAA,GAAUv6C,KAAKk/B,KAAM,gCAEnC,IAAMgI,EAAOlnC,KAAKqoC,MAAMW,QAAQuW,GAC1B4G,EAAuBnmD,KAAKqoC,MAAMS,sBAAsByW,GACxD3hC,EAAS5d,KAAKqoC,MAAMW,QAAQmd,GAE5BC,EAAiBl/B,EADK6+B,EAAW7e,GACY1nC,EAAS85B,GACtD+sB,GAAuBrmD,KAAKyyB,QAAUgzB,EAAWF,GAAYa,GAG7DE,EAAoBvnD,EAAQk/C,qBAC3B,SAACxe,EAAGC,GAAC,OAAK3gC,EAAQk/C,qBAAqBvM,MAAMjS,KAAO1gC,EAAQk/C,qBAAqBvM,MAAMhS,EAAE,OAC1F3+B,EACN,IAAI+E,EAAAA,EAAAA,IAAOugD,EAAoB7mD,QAAQwhC,SAAUkG,EAAK1nC,QAAQwhC,SAAUslB,GACpEtmD,KAAKumD,aAAahH,EAAgB8G,EAAoB/sB,UAAYojB,EAAAA,EAASC,QAAS,CAAEsB,qBAAAA,EAAsBiD,UAAW,QAD3H,CAIA,IAAMsF,EAAiB5oC,EAAO0b,SACzB1L,KAAI,SAAA6B,GAAK,OAAIA,IAAUyX,EAAOmf,EAAsB52B,CAAK,IAC9DzvB,KAAKumD,aAAa3oC,EAAOpe,QAASgnD,EAAgB,CAC9CvI,qBAAAA,EACAiD,UAAWha,EAAKgE,MAAQttB,EAAOstB,OALnC,CAnBA,KAJA,CACI,IAAMub,EAAqB/J,EAAAA,EAAS9uB,IAAI0L,EAAUt5B,KAAKyyB,QAAUgzB,EAAWF,GAC5EvlD,KAAKumD,aAAa,KAAME,EAAoB,CAAExI,qBAAAA,EAAsBiD,UAAWwF,KAEnF,CA0BJ,GAAC,CAAA5mD,IAAA,wBAAAC,MACD,SAAsB0yB,GAClB,GAAIA,IAAYzyB,KAAKyyB,QAArB,CAGAzyB,KAAKyyB,QAAUA,EACf,IACMk0B,EADO3mD,KAAKqoC,MAAMW,UACE1P,SACpBstB,EAA2BlK,EAAAA,EAAS9uB,IAAI+4B,EAAcZ,GACtDc,EAA2BnK,EAAAA,EAAS9uB,IAAIg5B,EAA0Bn0B,EAAUgzB,EAAWF,GAG7FvlD,KAAKumD,aAAa,KAAMM,EAA0B,CAC9C5I,qBAAsBj+C,KAAK4wC,iBAC3BsQ,UAAWwF,KAVf,CAYJ,GAAC,CAAA5mD,IAAA,eAAAC,MACD,SAAamnC,EAAM5N,EAAUv6B,GAAS,IAAAC,EAAA,KAC5B8nD,EAAmB,IAAItpB,IAc7Bx9B,KAAKqoC,MAAMuU,YAAY1V,EAAM5N,EAAU7yB,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG/6B,GAAU,CAAEwjD,gBAb3D,SAACrb,GAAS,IACa37B,EADbG,GAAAC,EAAAA,EAAAA,GACRu7B,EAAK1nC,QAAQwhC,UAAQ,IAA3C,IAAAt1B,EAAAE,MAAAL,EAAAG,EAAAG,KAAA5H,MAA6C,KAAlCzE,EAAO+L,EAAAxL,MACd+mD,EAAiB1mD,IAAIZ,GACrBR,EAAK0oC,MAAMzhC,IAAIzG,EAAS0nC,EAAK1nC,QACjC,CAAC,OAAAsM,GAAAJ,EAAAvH,EAAA2H,EAAA,SAAAJ,EAAAK,GAAA,CACL,EAQoGy2C,gBAP5E,SAACtb,GAAS,IACaz6B,EADbC,GAAAf,EAAAA,EAAAA,GACRu7B,EAAK1nC,QAAQwhC,UAAQ,IAA3C,IAAAt0B,EAAAd,MAAAa,EAAAC,EAAAb,KAAA5H,MAA6C,KAAlCzE,EAAOiN,EAAA1M,MACT+mD,EAAiB/a,IAAIvsC,IACtBR,EAAK0oC,MAAMlJ,OAAOh/B,EAE1B,CAAC,OAAAsM,GAAAY,EAAAvI,EAAA2H,EAAA,SAAAY,EAAAX,GAAA,CACL,IAEJ,GAAC,CAAAjM,IAAA,MAAAC,MACD,SAAIP,GACA,OAAOQ,KAAK0nC,MAAMqE,IAAIvsC,EAC1B,GAAC,CAAAM,IAAA,eAAAC,MACD,SAAa2yC,GACT,IAAMxL,EAAOlnC,KAAK+mD,kBAAkBrU,GACpC,OAAO1yC,KAAKqoC,MAAMa,aAAahC,EACnC,GAAC,CAAApnC,IAAA,qBAAAC,MACD,SAAmB2yC,GACf,IAAMxL,EAAOlnC,KAAK+mD,kBAAkBrU,GACpC,OAAO1yC,KAAKqoC,MAAMc,mBAAmBjC,EACzC,GAAC,CAAApnC,IAAA,UAAAC,MACD,SAAQ2yC,GACJ,GAAwB,qBAAbA,EACP,OAAO1yC,KAAKqoC,MAAMW,UAEtB,IAAM9B,EAAOlnC,KAAK+mD,kBAAkBrU,GACpC,OAAO1yC,KAAKqoC,MAAMW,QAAQ9B,EAC9B,GACA,CAAApnC,IAAA,kBAAAC,MACA,SAAgBmnC,GACZ,IAAMqY,EAAiBv/C,KAAKqoC,MAAME,gBAAgBrB,GAClD,OAAuB,OAAnBqY,EACO,KAEJA,EAAeve,SAASue,EAAeve,SAAS97B,OAAS,EACpE,GACA,CAAApF,IAAA,wBAAAC,MACA,SAAsB2yC,GAClB,IAAM6M,EAAiBv/C,KAAK+mD,kBAAkBrU,GACxC3J,EAAa/oC,KAAKqoC,MAAMS,sBAAsByW,GACpD,OAAmB,OAAfxW,EACO,KAEJA,EAAW/H,SAAS+H,EAAW/H,SAAS97B,OAAS,EAC5D,GAAC,CAAApF,IAAA,uBAAAC,MACD,SAAqB2yC,GACjB,IAAM6M,EAAiBv/C,KAAK+mD,kBAAkBrU,GAC9C,OAAO1yC,KAAKqoC,MAAMsO,qBAAqB4I,EAC3C,GAAC,CAAAz/C,IAAA,gBAAAC,MACD,SAAc2yC,GACV,IAAM6M,EAAiBv/C,KAAK+mD,kBAAkBrU,GAC9C,OAAO1yC,KAAKqoC,MAAMuO,cAAc2I,EACpC,GAAC,CAAAz/C,IAAA,iBAAAC,MACD,SAAe2yC,EAAUtH,GACrB,IAAMmU,EAAiBv/C,KAAK+mD,kBAAkBrU,GAC9C,OAAO1yC,KAAKqoC,MAAMwO,eAAe0I,EAAgBnU,EACrD,GAAC,CAAAtrC,IAAA,cAAAC,MACD,SAAY2yC,GACR,IAAM6M,EAAiBv/C,KAAK+mD,kBAAkBrU,GAC9C,OAAO1yC,KAAKqoC,MAAMG,YAAY+W,EAClC,GAAC,CAAAz/C,IAAA,eAAAC,MACD,SAAa2yC,EAAUrH,EAAWsH,GAC9B,IAAM4M,EAAiBv/C,KAAK+mD,kBAAkBrU,GAC9C,OAAO1yC,KAAKqoC,MAAMI,aAAa8W,EAAgBlU,EAAWsH,EAC9D,GAAC,CAAA7yC,IAAA,WAAAC,MACD,SAAS2yC,GACL,IAAM6M,EAAiBv/C,KAAK+mD,kBAAkBrU,GAC9C1yC,KAAKqoC,MAAM6O,SAASqI,EACxB,GAAC,CAAAz/C,IAAA,WAAAC,MACD,SAAS2yC,GACL,IAAM6M,EAAiBv/C,KAAK+mD,kBAAkBrU,GAC9C1yC,KAAKqoC,MAAM+R,SAASmF,EACxB,GAAC,CAAAz/C,IAAA,WAAAC,MACD,WACIC,KAAKqoC,MAAMiH,UACf,GAAC,CAAAxvC,IAAA,oBAAAC,MACD,SAAkBP,GACd,GAAgB,OAAZA,EACA,OAAO,KAEX,IAAM0nC,EAAOlnC,KAAK0nC,MAAM1hC,IAAIxG,GAC5B,IAAK0nC,EACD,MAAM,IAAIqT,EAAAA,GAAUv6C,KAAKk/B,KAAM,2BAAFh2B,OAA6B1J,IAE9D,OAAO0nC,CACX,KAAC8e,CAAA,CA3JiC,GA6JzBgB,EAAuB,SAAAhmB,GAAQ,OAAIA,EAASA,EAAS97B,OAAS,EAAE,EACvE+hD,EAAyB,WAU3B,SAAAA,EAAYC,EAAWhgB,IAAMjoC,EAAAA,EAAAA,GAAA,KAAAgoD,GACzBjnD,KAAKknD,UAAYA,EACjBlnD,KAAKknC,KAAOA,CAChB,CAJiD,OAIhDrnC,EAAAA,EAAAA,GAAAonD,EAAA,EAAAnnD,IAAA,UAAAkG,IAZD,WAAgB,OAA6B,OAAtBhG,KAAKknC,KAAK1nC,QAAmB,KAAOQ,KAAKknD,UAAUlnD,KAAKknC,KAAK1nC,QAAU,GAAC,CAAAM,IAAA,WAAAkG,IAC/F,WAAe,IAAA7E,EAAA,KAAE,OAAOnB,KAAKknC,KAAK5N,SAAS1L,KAAI,SAAAsZ,GAAI,OAAI,IAAI+f,EAA0B9lD,EAAK+lD,UAAWhgB,EAAK,GAAG,GAAC,CAAApnC,IAAA,QAAAkG,IAC9G,WAAc,OAAOhG,KAAKknC,KAAKgE,KAAO,GAAC,CAAAprC,IAAA,uBAAAkG,IACvC,WAA6B,OAAOhG,KAAKknC,KAAKwE,oBAAsB,GAAC,CAAA5rC,IAAA,oBAAAkG,IACrE,WAA0B,OAAOhG,KAAKknC,KAAK8N,iBAAmB,GAAC,CAAAl1C,IAAA,cAAAkG,IAC/D,WAAoB,OAAOhG,KAAKknC,KAAKkE,WAAa,GAAC,CAAAtrC,IAAA,YAAAkG,IACnD,WAAkB,OAAOhG,KAAKknC,KAAKmE,SAAW,GAAC,CAAAvrC,IAAA,UAAAkG,IAC/C,WAAgB,OAAOhG,KAAKknC,KAAKnV,OAAS,GAAC,CAAAjyB,IAAA,aAAAkG,IAC3C,WAAmB,OAAOhG,KAAKknC,KAAK+I,UAAY,KAACgX,CAAA,CATtB,GAwCxB,IAAME,EAA2B,WAgBpC,SAAAA,EAAYjoB,EAAMc,GAAoB,IAAAp1B,EAAA,KAAd7L,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAChG,EAAAA,EAAAA,GAAA,KAAAkoD,GAChCnnD,KAAKqgD,QAAU,KACfrgD,KAAKonD,cAAgBroD,EAAQqoD,eAAiBJ,EAC9C,IAAMK,EAA0B,SAAAngB,GAAI,OAAIt8B,EAAKw8C,cAAclgB,EAAKlG,SAAS,EACzEhhC,KAAKo4C,WAAa,IAAImB,EAAAA,IAAW,SAAArS,GAAI,OAAI,IAAI+f,EAA0BI,EAAyBngB,EAAK,IACrGlnC,KAAKqoC,MAAQ,IAAI2d,EAA0B9mB,EA9CnD,SAAiBkZ,EAAYpY,GACzB,MAAO,CACH9Y,OAAM,SAACoP,EAAOyK,EAAa6f,GACvB5gB,EAAK9Y,OAAOoP,EAAOyK,EAAa6f,EAAShzB,KAAI,SAAAsZ,GAAI,OAAIkR,EAAWxqB,IAAIsZ,EAAK,IAC7E,EACAogB,oBAAmB,SAACjtC,EAAOhX,GACvB28B,EAAKsnB,oBAAoBjtC,EAAOhX,EACpC,EAER,CAqCyDkkD,CAAQvnD,KAAKo4C,WAAYpY,GApClF,SAAoBqnB,EAAyBtoD,GACzC,OAAO0H,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG/6B,GAAU,CAAE6xC,iBAAkB7xC,EAAQ6xC,kBAAoB,CACzFc,MAAK,SAACxK,GACF,OAAOnoC,EAAQ6xC,iBAAiBc,MAAM2V,EAAwBngB,GAClE,GACD6R,OAAQh6C,EAAQg6C,QAAU,CACzBoF,QAAO,SAACjX,EAAMsgB,GACV,OAAOzoD,EAAQg6C,OAAOoF,QAAQjX,EAAKlG,SAAS,GAAIwmB,EAAUxmB,SAAS,GACvE,GACDrT,OAAQ5uB,EAAQ4uB,QAAU,CACzBA,OAAM,SAACuZ,EAAM6F,GACT,OAAOhuC,EAAQ4uB,OAAOA,OAAO05B,EAAwBngB,GAAO6F,EAChE,IAEZ,CAsByF0a,CAAWJ,EAAyBtoD,GACzH,CAuDC,OAvDAc,EAAAA,EAAAA,GAAAsnD,EAAA,EAAArnD,IAAA,cAAAkG,IArBD,WAAkB,IAAA+E,EAAA,KACd,OAAOpH,EAAAA,GAAMiqB,IAAI5tB,KAAKqoC,MAAM6G,aAAa,SAAApwB,GAAA,IAAGsyB,EAAatyB,EAAbsyB,cAAeC,EAAYvyB,EAAZuyB,aAAY,MAAQ,CAC3ED,cAAeA,EAAcxjB,KAAI,SAAAsZ,GAAI,OAAIn8B,EAAKqtC,WAAWxqB,IAAIsZ,EAAK,IAClEmK,aAAcA,EAAazjB,KAAI,SAAAsZ,GAAI,OAAIn8B,EAAKqtC,WAAWxqB,IAAIsZ,EAAK,IACnE,GACL,GAAC,CAAApnC,IAAA,2BAAAkG,IACD,WAA+B,IAAAub,EAAA,KAC3B,OAAO5d,EAAAA,GAAMiqB,IAAI5tB,KAAKqoC,MAAMuB,0BAA0B,SAAA1R,GAAA,IAAGgP,EAAIhP,EAAJgP,KAAMmW,EAAInlB,EAAJmlB,KAAI,MAAQ,CACvEnW,KAAM3lB,EAAK62B,WAAWxqB,IAAIsZ,GAC1BmW,KAAAA,EACH,GACL,GAAC,CAAAv9C,IAAA,6BAAAkG,IACD,WAAiC,IAAAkkB,EAAA,KAC7B,OAAOvmB,EAAAA,GAAMiqB,IAAI5tB,KAAKqoC,MAAMkY,4BAA4B,SAAArZ,GAAI,OAAIhd,EAAKkuB,WAAWxqB,IAAIsZ,EAAK,GAC7F,GAAC,CAAApnC,IAAA,cAAAC,MAQD,SAAYP,GAAoD,IAA3C85B,EAAQr0B,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGy3C,EAAAA,EAASC,QAAS59C,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,EACzDjF,KAAKqoC,MAAMuU,YAAYp9C,EAAS85B,EAAUv6B,EAC9C,GAAC,CAAAe,IAAA,wBAAAC,MACD,SAAsB0yB,GAClBzyB,KAAKqoC,MAAMqf,sBAAsBj1B,EACrC,GAAC,CAAA3yB,IAAA,MAAAC,MACD,SAAI2yC,GACA,OAAO1yC,KAAKqoC,MAAM0D,IAAI2G,EAC1B,GAAC,CAAA5yC,IAAA,eAAAC,MACD,SAAa2yC,GACT,OAAO1yC,KAAKqoC,MAAMa,aAAawJ,EACnC,GAAC,CAAA5yC,IAAA,qBAAAC,MACD,SAAmB2yC,GACf,OAAO1yC,KAAKqoC,MAAMc,mBAAmBuJ,EACzC,GAAC,CAAA5yC,IAAA,UAAAC,MACD,SAAQ2yC,GACJ,OAAO1yC,KAAKo4C,WAAWxqB,IAAI5tB,KAAKqoC,MAAMW,QAAQ0J,GAClD,GAAC,CAAA5yC,IAAA,kBAAAC,MACD,SAAgBmnC,GACZ,OAAOA,EAAK1nC,OAChB,GAAC,CAAAM,IAAA,wBAAAC,MACD,SAAsB2yC,GAClB,OAAO1yC,KAAKqoC,MAAMS,sBAAsB4J,EAC5C,GAAC,CAAA5yC,IAAA,uBAAAC,MACD,SAAqB2yC,GACjB,IAAMj3B,EAASzb,KAAKqoC,MAAMsO,qBAAqBjE,GAC/C,OAAe,OAAXj3B,GAAqC,qBAAXA,EACnBA,EAEJzb,KAAKonD,cAAc3rC,EAAOulB,SACrC,GAAC,CAAAlhC,IAAA,gBAAAC,MACD,SAAc2yC,GACV,OAAO1yC,KAAKqoC,MAAMuO,cAAclE,EACpC,GAAC,CAAA5yC,IAAA,iBAAAC,MACD,SAAe2yC,EAAUrH,GACrB,OAAOrrC,KAAKqoC,MAAMwO,eAAenE,EAAUrH,EAC/C,GAAC,CAAAvrC,IAAA,cAAAC,MACD,SAAY2yC,GACR,OAAO1yC,KAAKqoC,MAAMG,YAAYkK,EAClC,GAAC,CAAA5yC,IAAA,eAAAC,MACD,SAAa2yC,EAAUrH,EAAWsH,GAC9B,OAAO3yC,KAAKqoC,MAAMI,aAAaiK,EAAUrH,EAAWsH,EACxD,GAAC,CAAA7yC,IAAA,WAAAC,MACD,SAAS2yC,GACL,OAAO1yC,KAAKqoC,MAAM6O,SAASxE,EAC/B,GAAC,CAAA5yC,IAAA,WAAAC,MACD,SAAS2yC,GACL,OAAO1yC,KAAKqoC,MAAM+R,SAAS1H,EAC/B,GAAC,CAAA5yC,IAAA,WAAAC,MACD,WACI,OAAOC,KAAKqoC,MAAMiH,UACtB,GAAC,CAAAxvC,IAAA,wBAAAC,MACD,WAAuC,IAAjB2yC,EAAQztC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,KAC7B,OAAOjF,KAAKqoC,MAAMW,QAAQ0J,EAC9B,KAACyU,CAAA,CA7EmC,G,WCrRpCjhD,EAA0C,SAAUC,EAAYC,EAAQtG,EAAKuG,GAC7E,IAA2HC,EAAvHC,EAAItB,UAAUC,OAAQsB,EAAID,EAAI,EAAIH,EAAkB,OAATC,EAAgBA,EAAOI,OAAOC,yBAAyBN,EAAQtG,GAAOuG,EACrH,GAAuB,kBAAZM,SAAoD,oBAArBA,QAAQC,SAAyBJ,EAAIG,QAAQC,SAAST,EAAYC,EAAQtG,EAAKuG,QACpH,IAAK,IAAIQ,EAAIV,EAAWjB,OAAS,EAAG2B,GAAK,EAAGA,KAASP,EAAIH,EAAWU,MAAIL,GAAKD,EAAI,EAAID,EAAEE,GAAKD,EAAI,EAAID,EAAEF,EAAQtG,EAAK0G,GAAKF,EAAEF,EAAQtG,KAAS0G,GAChJ,OAAOD,EAAI,GAAKC,GAAKC,OAAOK,eAAeV,EAAQtG,EAAK0G,GAAIA,CAChE,EAMauzC,EAAU,SAAAgG,IAAAphD,EAAAA,EAAAA,GAAAo7C,EAAAgG,GAAA,IAAAnhD,GAAAC,EAAAA,EAAAA,GAAAk7C,GAEnB,SAAAA,EAAY7a,EAAMpgC,EAAWihC,EAAU5C,GAAyB,IAAAn+B,EAAdD,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,EAExC,OAFyChG,EAAAA,EAAAA,GAAA,KAAA86C,IAC1D/6C,EAAAJ,EAAAM,KAAA,KAAMggC,EAAMpgC,EAAWihC,EAAU5C,EAAWp+B,IACvCmgC,KAAOA,EAAKlgC,CACrB,CAgBC,OAhBAa,EAAAA,EAAAA,GAAAk6C,EAAA,EAAAj6C,IAAA,2BAAAkG,IAJD,WAAiC,OAAOhG,KAAKqoC,MAAMuB,wBAA0B,GAAC,CAAA9pC,IAAA,cAAAC,MAK9E,SAAYP,GAA+C,IAAtC85B,EAAQr0B,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGy3C,EAAAA,EAASC,QAAS59C,EAAOkG,UAAAC,OAAA,EAAAD,UAAA,QAAAlE,EACrDf,KAAKqoC,MAAMuU,YAAYp9C,EAAS85B,EAAUv6B,EAC9C,GAAC,CAAAe,IAAA,WAAAC,MACD,SAASP,QACWuB,IAAZvB,EAIJQ,KAAKqoC,MAAM+R,SAAS56C,GAHhBQ,KAAK2xB,KAAKyoB,UAIlB,GAAC,CAAAt6C,IAAA,aAAAC,MACD,SAAWP,GACP,OAAOQ,KAAKqoC,MAAM0D,IAAIvsC,EAC1B,GAAC,CAAAM,IAAA,cAAAC,MACD,SAAYm/B,EAAMvN,EAAM5yB,GACpB,OAAO,IAAIihD,EAAAA,EAAgB9gB,EAAMvN,EAAM5yB,EAC3C,KAACg7C,CAAA,CArBkB,CAASlG,EAAAA,IAuB1B8T,EAAoB,WAItB,SAAAA,EAAYC,EAA6BhqB,IAAU3+B,EAAAA,EAAAA,GAAA,KAAA0oD,GAC/C3nD,KAAK4nD,4BAA8BA,EACnC5nD,KAAK49B,SAAWA,EAChB59B,KAAKq9B,WAAaO,EAASP,WACvBO,EAAS4M,0BACTxqC,KAAKwqC,wBAA0B5M,EAAS4M,wBAEhD,CAiCC,OAjCA3qC,EAAAA,EAAAA,GAAA8nD,EAAA,EAAA7nD,IAAA,6BAAAkG,IAVD,WACI,OAAOhG,KAAK4nD,6BAChB,GAAC,CAAA9nD,IAAA,iBAAAC,MASD,SAAejB,GAEX,MAAO,CAAE+oD,wBAAoB9mD,EAAW4iB,KAD3B3jB,KAAK49B,SAASK,eAAen/B,GAE9C,GAAC,CAAAgB,IAAA,gBAAAC,MACD,SAAcmnC,EAAM7sB,EAAO2J,EAAc3gB,GACrC,IAAMwkD,EAAqB7nD,KAAK8nD,2BAA2BtI,sBAAsBtY,EAAK1nC,SACnC,IAA/CqoD,EAAmBroD,QAAQwhC,SAAS97B,QACpC8e,EAAa6jC,wBAAqB9mD,EAClCf,KAAK49B,SAASQ,cAAc8I,EAAM7sB,EAAO2J,EAAaL,KAAMtgB,KAG5D2gB,EAAa6jC,mBAAqBA,EAClC7nD,KAAK49B,SAAS6gB,yBAAyBoJ,EAAoBxtC,EAAO2J,EAAaL,KAAMtgB,GAE7F,GAAC,CAAAvD,IAAA,iBAAAC,MACD,SAAemnC,EAAM7sB,EAAO2J,EAAc3gB,GACtC,IAAI8J,EAAIib,EAAIC,EAAIkL,EACZvP,EAAa6jC,mBAC6C,QAAzDz/B,GAAMjb,EAAKnN,KAAK49B,UAAUghB,iCAA8C,IAAPx2B,GAAyBA,EAAGlpB,KAAKiO,EAAI6W,EAAa6jC,mBAAoBxtC,EAAO2J,EAAaL,KAAMtgB,GAGnH,QAA9CkwB,GAAMlL,EAAKroB,KAAK49B,UAAUS,sBAAmC,IAAP9K,GAAyBA,EAAGr0B,KAAKmpB,EAAI6e,EAAM7sB,EAAO2J,EAAaL,KAAMtgB,EAEpI,GAAC,CAAAvD,IAAA,kBAAAC,MACD,SAAgBikB,GACZhkB,KAAK49B,SAASU,gBAAgBta,EAAaL,KAC/C,GAAC,CAAA7jB,IAAA,gBAAAC,MACD,SAAcP,EAAS64C,GACnB,QAAIr4C,KAAK49B,SAAS6N,eACPzrC,KAAK49B,SAAS6N,cAAcjsC,EAAS64C,EAGpD,KAACsP,CAAA,CA5CqB,GA8C1BzhD,EAAW,CACPmB,EAAAA,GACDsgD,EAAqBrgD,UAAW,6BAA8B,MAoB1D,IAAM83C,EAAsB,SAAA2I,IAAAppD,EAAAA,EAAAA,GAAAygD,EAAA2I,GAAA,IAAAtnC,GAAA5hB,EAAAA,EAAAA,GAAAugD,GAC/B,SAAAA,EAAYlgB,EAAMpgC,EAAWihC,EAAU5C,GAAyB,IAAAh8B,EAAdpC,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAChG,EAAAA,EAAAA,GAAA,KAAAmgD,GAC1D,IAAM0I,EAA6B,WAAH,OAAAx+C,EAAAA,EAAAA,GAAAnI,EAAA,EAC1B6mD,EAAwB7qB,EAAUvP,KAAI,SAAApnB,GAAC,OAAI,IAAImhD,EAAqBG,EAA4BthD,EAAE,IAAE,OAAArF,EAAAsf,EAAAvhB,KAAA,KACpGggC,EAAMpgC,EAAWihC,EAAUioB,EAvBzC,SAA6BF,EAA4B/oD,GACrD,OAAOA,GAAW0H,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG/6B,GAAU,CAAEwtC,gCAAiCxtC,EAAQwtC,iCAAmC,CAClIa,2BAA0B,SAACjpC,GACvB,IAAI0jD,EACJ,IACIA,EAAqBC,IAA6BtI,sBAAsBr7C,EAC5E,CACA,MAAOgJ,GACH,OAAOpO,EAAQwtC,gCAAgCa,2BAA2BjpC,EAC9E,CACA,OAAmD,IAA/C0jD,EAAmBroD,QAAQwhC,SAAS97B,OAC7BnG,EAAQwtC,gCAAgCa,2BAA2BjpC,GAGnEpF,EAAQwtC,gCAAgC0S,yCAAyC4I,EAAmBroD,QAAQwhC,SAE3H,IAEZ,CAKgE6X,CAAoBiP,EAA4B/oD,GAC5G,CAeC,OAfAc,EAAAA,EAAAA,GAAAu/C,EAAA,EAAAt/C,IAAA,cAAAC,MACD,SAAYP,GAA+C,IAAtC85B,EAAQr0B,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGy3C,EAAAA,EAASC,QAAS59C,EAAOkG,UAAAC,OAAA,EAAAD,UAAA,QAAAlE,EACrDf,KAAKqoC,MAAMuU,YAAYp9C,EAAS85B,EAAUv6B,EAC9C,GAAC,CAAAe,IAAA,cAAAC,MACD,SAAYm/B,EAAMvN,EAAM5yB,GACpB,OAAO,IAAIooD,EAA4BjoB,EAAMvN,EAAM5yB,EACvD,GAAC,CAAAe,IAAA,gBAAAC,MACD,WAAkC,IAApByvC,EAAavqC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,GAC3BqI,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA6xC,EAAA93C,WAAA,sBAAApI,KAAA,KAAoBswC,GAC4B,qBAArCA,EAAcyW,oBACrBjmD,KAAKqoC,MAAMqf,sBAAsBlY,EAAcyW,mBAEvD,GAAC,CAAAnmD,IAAA,wBAAAC,MACD,WAAsC,IAAhBP,EAAOyF,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,KAC5B,OAAOjF,KAAKqoC,MAAMmX,sBAAsBhgD,EAC5C,KAAC4/C,CAAA,CApB8B,CAASrF,E,6HCnG/BiG,EAAe,WACxB,SAAAA,EAAY9gB,EAAMc,GAAoB,IAAdjhC,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,GAAChG,EAAAA,EAAAA,GAAA,KAAA+gD,GAChChgD,KAAKk/B,KAAOA,EACZl/B,KAAKqgD,QAAU,KACfrgD,KAAK0nC,MAAQ,IAAIhK,IACjB19B,KAAKioD,gBAAkB,IAAIvqB,IAC3B19B,KAAKqoC,MAAQ,IAAI8X,EAAAA,EAAejhB,EAAMc,EAAM,KAAMjhC,GAClDiB,KAAKkvC,YAAclvC,KAAKqoC,MAAM6G,YAC9BlvC,KAAK4pC,yBAA2B5pC,KAAKqoC,MAAMuB,yBAC3C5pC,KAAKugD,2BAA6BvgD,KAAKqoC,MAAMkY,2BACzCxhD,EAAQg6C,SACR/4C,KAAK+4C,OAAS,CACVoF,QAAO,SAAC1e,EAAGC,GACP,OAAO3gC,EAAQg6C,OAAOoF,QAAQ1e,EAAEjgC,QAASkgC,EAAElgC,QAC/C,IAGRQ,KAAK4wC,iBAAmB7xC,EAAQ6xC,gBACpC,CAmKC,OAnKA/wC,EAAAA,EAAAA,GAAAmgD,EAAA,EAAAlgD,IAAA,cAAAC,MACD,SAAYP,GAAoD,IAA3C85B,EAAQr0B,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGy3C,EAAAA,EAASC,QAAS59C,EAAOkG,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,CAAC,EACnDytC,EAAW1yC,KAAKkoD,mBAAmB1oD,GACzCQ,KAAKumD,aAAa7T,EAAU1yC,KAAKmoD,sBAAsB7uB,GAAWv6B,EACtE,GAAC,CAAAe,IAAA,eAAAC,MACD,SAAa2yC,GAAgD,IAAA1zC,EAAA,KAAtCs6B,EAAQr0B,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGy3C,EAAAA,EAASC,QAAS59C,EAAOkG,UAAAC,OAAA,EAAAD,UAAA,QAAAlE,EACjD+lD,EAAmB,IAAItpB,IACvB4qB,EAAqB,IAAI5qB,IAiC/Bx9B,KAAKqoC,MAAMnhB,OAAO,GAADhe,QAAAwF,EAAAA,EAAAA,GAAKgkC,GAAQ,CAAE,IAAInwC,OAAO8lD,UAAW/uB,EAAU7yB,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAG/6B,GAAU,CAAEwjD,gBAhCpF,SAACrb,GACrB,IAAI/5B,EACJ,GAAqB,OAAjB+5B,EAAK1nC,QAAT,CAGA,IAAM8oD,EAAQphB,EAGd,GAFA4f,EAAiB1mD,IAAIkoD,EAAM9oD,SAC3BR,EAAK0oC,MAAMzhC,IAAIqiD,EAAM9oD,QAAS8oD,GAC1BtpD,EAAK4xC,iBAAkB,CACvB,IAAMnM,EAAKzlC,EAAK4xC,iBAAiBc,MAAM4W,EAAM9oD,SAAS6rB,WACtD+8B,EAAmBhoD,IAAIqkC,GACvBzlC,EAAKipD,gBAAgBhiD,IAAIw+B,EAAI6jB,EACjC,CACmC,QAAlCn7C,EAAKpO,EAAQwjD,uBAAoC,IAAPp1C,GAAyBA,EAAGjO,KAAKH,EAASupD,EATrF,CAUJ,EAkB6H9F,gBAjBrG,SAACtb,GACrB,IAAI/5B,EACJ,GAAqB,OAAjB+5B,EAAK1nC,QAAT,CAGA,IAAM8oD,EAAQphB,EAId,GAHK4f,EAAiB/a,IAAIuc,EAAM9oD,UAC5BR,EAAK0oC,MAAMlJ,OAAO8pB,EAAM9oD,SAExBR,EAAK4xC,iBAAkB,CACvB,IAAMnM,EAAKzlC,EAAK4xC,iBAAiBc,MAAM4W,EAAM9oD,SAAS6rB,WACjD+8B,EAAmBrc,IAAItH,IACxBzlC,EAAKipD,gBAAgBzpB,OAAOiG,EAEpC,CACmC,QAAlCt3B,EAAKpO,EAAQyjD,uBAAoC,IAAPr1C,GAAyBA,EAAGjO,KAAKH,EAASupD,EAXrF,CAYJ,IAEJ,GAAC,CAAAxoD,IAAA,wBAAAC,MACD,WAAmD,IAAAoB,EAAA,KAA7B6/B,EAAQ/7B,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAGy3C,EAAAA,EAASC,QAItC,OAHI38C,KAAK+4C,SACL/X,GAAWtyB,EAAAA,EAAAA,GAAIsyB,GAAUkd,KAAKl+C,KAAK+4C,OAAOoF,QAAQC,KAAKp+C,KAAK+4C,UAEzD2D,EAAAA,EAAS9uB,IAAIoT,GAAU,SAAAqjB,GAC1B,IAMQhZ,EANJnE,EAAO/lC,EAAKumC,MAAM1hC,IAAIq+C,EAAY7kD,SACtC,IAAK0nC,GAAQ/lC,EAAKyvC,iBAAkB,CAChC,IAAMnM,EAAKtjC,EAAKyvC,iBAAiBc,MAAM2S,EAAY7kD,SAAS6rB,WAC5D6b,EAAO/lC,EAAK8mD,gBAAgBjiD,IAAIy+B,EACpC,CACA,IAAKyC,EAcD,OAXImE,EADiC,qBAA1BgZ,EAAYhZ,eACPtqC,EAEPsjD,EAAYhZ,YAAckd,EAAAA,GAA+BC,WAAanE,EAAYhZ,YAAckd,EAAAA,GAA+BE,qBAG/HpE,EAAYhZ,YAAckd,EAAAA,GAA+BG,UAAYrE,EAAYhZ,YAAckd,EAAAA,GAA+BI,oBAIvHC,QAAQvE,EAAYhZ,WAE7B5kC,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAGuqB,GAAc,CAAE/qB,SAAUn4B,EAAKgnD,sBAAsB9D,EAAY/qB,UAAW+R,UAAAA,IAEvH,IACIA,EADED,EAAiD,mBAA5BiZ,EAAYjZ,YAA4BiZ,EAAYjZ,YAAclE,EAAKkE,YAclG,OAXIC,EADiC,qBAA1BgZ,EAAYhZ,WAA6BgZ,EAAYhZ,YAAckd,EAAAA,GAA+BE,qBAAuBpE,EAAYhZ,YAAckd,EAAAA,GAA+BI,mBAC7KzhB,EAAKmE,UAEZgZ,EAAYhZ,YAAckd,EAAAA,GAA+BC,WAGzDnE,EAAYhZ,YAAckd,EAAAA,GAA+BG,UAIlDE,QAAQvE,EAAYhZ,WAE7B5kC,OAAOqzB,OAAOrzB,OAAOqzB,OAAO,CAAC,EAAGuqB,GAAc,CAAEjZ,YAAAA,EACnDC,UAAAA,EAAW/R,SAAUn4B,EAAKgnD,sBAAsB9D,EAAY/qB,WACpE,GACJ,GAAC,CAAAx5B,IAAA,WAAAC,MACD,SAASP,GACL,IAAMkzC,EAAW1yC,KAAKkoD,mBAAmB1oD,GACzCQ,KAAKqoC,MAAM+R,SAAS1H,EACxB,GAAC,CAAA5yC,IAAA,uBAAAC,MACD,WAAiC,IAAZuoC,EAAGrjC,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,KACjBytC,EAAW1yC,KAAKkoD,mBAAmB5f,GACzC,OAAOtoC,KAAKqoC,MAAMsO,qBAAqBjE,EAC3C,GAAC,CAAA5yC,IAAA,MAAAC,MACD,SAAIP,GACA,OAAOQ,KAAK0nC,MAAMqE,IAAIvsC,EAC1B,GAAC,CAAAM,IAAA,eAAAC,MACD,SAAaP,GACT,IAAMkzC,EAAW1yC,KAAKkoD,mBAAmB1oD,GACzC,OAAOQ,KAAKqoC,MAAMa,aAAawJ,EACnC,GAAC,CAAA5yC,IAAA,qBAAAC,MACD,SAAmBP,GACf,IAAMkzC,EAAW1yC,KAAKkoD,mBAAmB1oD,GACzC,OAAOQ,KAAKqoC,MAAMc,mBAAmBuJ,EACzC,GAAC,CAAA5yC,IAAA,gBAAAC,MACD,SAAcP,GACV,IAAMkzC,EAAW1yC,KAAKkoD,mBAAmB1oD,GACzC,OAAOQ,KAAKqoC,MAAMuO,cAAclE,EACpC,GAAC,CAAA5yC,IAAA,iBAAAC,MACD,SAAeP,EAAS4rC,GACpB,IAAMsH,EAAW1yC,KAAKkoD,mBAAmB1oD,GACzC,OAAOQ,KAAKqoC,MAAMwO,eAAenE,EAAUtH,EAC/C,GAAC,CAAAtrC,IAAA,cAAAC,MACD,SAAYP,GACR,IAAMkzC,EAAW1yC,KAAKkoD,mBAAmB1oD,GACzC,OAAOQ,KAAKqoC,MAAMG,YAAYkK,EAClC,GAAC,CAAA5yC,IAAA,eAAAC,MACD,SAAaP,EAAS6rC,EAAWsH,GAC7B,IAAMD,EAAW1yC,KAAKkoD,mBAAmB1oD,GACzC,OAAOQ,KAAKqoC,MAAMI,aAAaiK,EAAUrH,EAAWsH,EACxD,GAAC,CAAA7yC,IAAA,WAAAC,MACD,SAASP,GACL,IAAMkzC,EAAW1yC,KAAKkoD,mBAAmB1oD,GACzCQ,KAAKqoC,MAAM6O,SAASxE,EACxB,GAAC,CAAA5yC,IAAA,WAAAC,MACD,WACIC,KAAKqoC,MAAMiH,UACf,GAAC,CAAAxvC,IAAA,UAAAC,MACD,WAAwB,IAAhBP,EAAOyF,UAAAC,OAAA,QAAAnE,IAAAkE,UAAA,GAAAA,UAAA,GAAG,KACd,GAAgB,OAAZzF,EACA,OAAOQ,KAAKqoC,MAAMW,QAAQhpC,KAAKqoC,MAAMgY,SAEzC,IAAMnZ,EAAOlnC,KAAK0nC,MAAM1hC,IAAIxG,GAC5B,IAAK0nC,EACD,MAAM,IAAIqT,EAAAA,GAAUv6C,KAAKk/B,KAAM,2BAAFh2B,OAA6B1J,IAE9D,OAAO0nC,CACX,GAAC,CAAApnC,IAAA,kBAAAC,MACD,SAAgBmnC,GACZ,OAAOA,EAAK1nC,OAChB,GAAC,CAAAM,IAAA,wBAAAC,MACD,SAAsBP,GAClB,GAAgB,OAAZA,EACA,MAAM,IAAI+6C,EAAAA,GAAUv6C,KAAKk/B,KAAM,sCAEnC,IAAMgI,EAAOlnC,KAAK0nC,MAAM1hC,IAAIxG,GAC5B,IAAK0nC,EACD,MAAM,IAAIqT,EAAAA,GAAUv6C,KAAKk/B,KAAM,2BAAFh2B,OAA6B1J,IAE9D,IAAMkzC,EAAW1yC,KAAKqoC,MAAME,gBAAgBrB,GACtCiQ,EAAiBn3C,KAAKqoC,MAAMS,sBAAsB4J,GAExD,OADe1yC,KAAKqoC,MAAMW,QAAQmO,GACpB33C,OAClB,GAAC,CAAAM,IAAA,qBAAAC,MACD,SAAmBP,GACf,GAAgB,OAAZA,EACA,MAAO,GAEX,IAAM0nC,EAAOlnC,KAAK0nC,MAAM1hC,IAAIxG,GAC5B,IAAK0nC,EACD,MAAM,IAAIqT,EAAAA,GAAUv6C,KAAKk/B,KAAM,2BAAFh2B,OAA6B1J,IAE9D,OAAOQ,KAAKqoC,MAAME,gBAAgBrB,EACtC,KAAC8Y,CAAA,CArLuB,E,qICHjBuI,EAaAnY,E,wDAZX,SAAWmY,GACPA,EAA+BA,EAAyC,SAAI,GAAK,WACjFA,EAA+BA,EAA0C,UAAI,GAAK,YAIlFA,EAA+BA,EAAmD,mBAAI,GAAK,qBAI3FA,EAA+BA,EAAoD,oBAAI,GAAK,qBAC/F,CAXD,CAWGA,IAAmCA,EAAiC,CAAC,IAExE,SAAWnY,GACPA,EAAqBA,EAA8B,QAAI,GAAK,UAC5DA,EAAqBA,EAA8B,QAAI,GAAK,UAC5DA,EAAqBA,EAA8B,QAAI,GAAK,UAC5DA,EAAqBA,EAA6B,OAAI,GAAK,QAC9D,CALD,CAKGA,IAAyBA,EAAuB,CAAC,IAC7C,IAAMmK,EAAS,SAAAsO,IAAAlqD,EAAAA,EAAAA,GAAA47C,EAAAsO,GAAA,IAAAjqD,GAAAC,EAAAA,EAAAA,GAAA07C,GAClB,SAAAA,EAAYrb,EAAM4pB,GAAS,OAAA7pD,EAAAA,EAAAA,GAAA,KAAAs7C,GAAA37C,EAAAM,KAAA,mBAAAgK,OACHg2B,EAAI,MAAAh2B,OAAK4/C,GACjC,CAAC,OAAAjpD,EAAAA,EAAAA,GAAA06C,EAAA,CAHiB,EAGjBwO,EAAAA,EAAAA,GAH0BlpC,QAKlB05B,EAAU,WACnB,SAAAA,EAAY9I,IAAIxxC,EAAAA,EAAAA,GAAA,KAAAs6C,GACZv5C,KAAKywC,GAAKA,EACVzwC,KAAKgpD,KAAO,IAAIC,OACpB,CAQC,OARAppD,EAAAA,EAAAA,GAAA05C,EAAA,EAAAz5C,IAAA,MAAAC,MACD,SAAID,GACA,IAAI2b,EAASzb,KAAKgpD,KAAKhjD,IAAIlG,GAK3B,OAJK2b,IACDA,EAASzb,KAAKywC,GAAG3wC,GACjBE,KAAKgpD,KAAK/iD,IAAInG,EAAK2b,IAEhBA,CACX,KAAC89B,CAAA,CAZkB,E,oJCpBVxpC,EAAM,SAAArR,IAAAC,EAAAA,EAAAA,GAAAoR,EAAArR,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAkR,GAAA,SAAAA,IAAA,OAAA9Q,EAAAA,EAAAA,GAAA,KAAA8Q,GAAAnR,EAAA6P,MAAA,KAAAxJ,UAAA,CA8Bd,OA9BcpF,EAAAA,EAAAA,GAAAkQ,EAAA,EAAAjQ,IAAA,UAAAC,MACf,SAAQ0C,EAASymD,GACblpD,KAAKX,UAAU2P,EAAAA,sBAA0BvM,EAASuM,EAAAA,UAAckX,OAAO,SAAC/hB,GAAC,OAAK+kD,EAAS,IAAIC,EAAAA,EAAmBhlD,GAAG,IACrH,GAAC,CAAArE,IAAA,cAAAC,MACD,SAAY0C,EAASymD,GACjBlpD,KAAKX,UAAU2P,EAAAA,sBAA0BvM,EAASuM,EAAAA,UAAcqX,YAAY,SAACliB,GAAC,OAAK+kD,EAAS,IAAIC,EAAAA,EAAmBhlD,GAAG,IAC1H,GAAC,CAAArE,IAAA,cAAAC,MACD,SAAY0C,EAASymD,GACjBlpD,KAAKX,UAAU2P,EAAAA,sBAA0BvM,EAASuM,EAAAA,UAAco6C,YAAY,SAACjlD,GAAC,OAAK+kD,EAAS,IAAIC,EAAAA,EAAmBhlD,GAAG,IAC1H,GAAC,CAAArE,IAAA,eAAAC,MACD,SAAa0C,EAASymD,GAClBlpD,KAAKX,UAAU2P,EAAAA,sBAA0BvM,EAASuM,EAAAA,UAAcq6C,aAAa,SAACllD,GAAC,OAAK+kD,EAAS,IAAIC,EAAAA,EAAmBhlD,GAAG,IAC3H,GAAC,CAAArE,IAAA,YAAAC,MACD,SAAU0C,EAASymD,GACflpD,KAAKX,UAAU2P,EAAAA,sBAA0BvM,EAASuM,EAAAA,UAAcsX,UAAU,SAACniB,GAAC,OAAK+kD,EAAS,IAAI3iC,EAAAA,EAAsBpiB,GAAG,IAC3H,GAAC,CAAArE,IAAA,UAAAC,MACD,SAAQ0C,EAASymD,GACblpD,KAAKX,UAAU2P,EAAAA,sBAA0BvM,EAASuM,EAAAA,UAAcs6C,QAAQ,SAACnlD,GAAC,OAAK+kD,EAAS,IAAI3iC,EAAAA,EAAsBpiB,GAAG,IACzH,GAAC,CAAArE,IAAA,UAAAC,MACD,SAAQ0C,EAASymD,GACblpD,KAAKX,UAAU2P,EAAAA,sBAA0BvM,EAASuM,EAAAA,UAAcu6C,MAAOL,GAC3E,GAAC,CAAAppD,IAAA,SAAAC,MACD,SAAO0C,EAASymD,GACZlpD,KAAKX,UAAU2P,EAAAA,sBAA0BvM,EAASuM,EAAAA,UAAcw6C,KAAMN,GAC1E,GAAC,CAAAppD,IAAA,UAAAC,MACD,SAAQ0C,EAASymD,GACblpD,KAAKX,UAAU2P,EAAAA,sBAA0BvM,EAASuM,EAAAA,UAAcy6C,MAAOP,GAC3E,GAAC,CAAAppD,IAAA,gBAAAC,MACD,SAAc0C,GACV,OAAOkH,EAAAA,EAAQ+/C,aAAajnD,EAChC,KAACsN,CAAA,CA9Bc,C,SAASvO,G","sources":["../node_modules/monaco-editor/esm/vs/base/browser/ui/mouseCursor/mouseCursor.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/progressbar/progressbar.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/resizable/resizable.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/sash/sash.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarArrow.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarVisibilityController.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/abstractScrollbar.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/horizontalScrollbar.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/verticalScrollbar.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollableElement.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/scrollbar/scrollbarState.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBoxCustom.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBoxNative.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/selectBox/selectBox.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/splitview/splitview.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/table/tableWidget.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/toggle/toggle.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/toolbar/toolbar.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/abstractTree.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/asyncDataTree.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/dataTree.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/indexTreeModel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/compressedObjectTreeModel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/objectTree.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/objectTreeModel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/tree/tree.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/widget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './mouseCursor.css';\nexport const MOUSE_CURSOR_TEXT_CSS_CLASS_NAME = `monaco-mouse-cursor-text`;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { show } from '../../dom.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './progressbar.css';\nconst CSS_DONE = 'done';\nconst CSS_ACTIVE = 'active';\nconst CSS_INFINITE = 'infinite';\nconst CSS_INFINITE_LONG_RUNNING = 'infinite-long-running';\nconst CSS_DISCRETE = 'discrete';\n/**\n * A progress bar with support for infinite or discrete progress.\n */\nexport class ProgressBar extends Disposable {\n    constructor(container, options) {\n        super();\n        this.workedVal = 0;\n        this.showDelayedScheduler = this._register(new RunOnceScheduler(() => show(this.element), 0));\n        this.longRunningScheduler = this._register(new RunOnceScheduler(() => this.infiniteLongRunning(), ProgressBar.LONG_RUNNING_INFINITE_THRESHOLD));\n        this.create(container, options);\n    }\n    create(container, options) {\n        this.element = document.createElement('div');\n        this.element.classList.add('monaco-progress-container');\n        this.element.setAttribute('role', 'progressbar');\n        this.element.setAttribute('aria-valuemin', '0');\n        container.appendChild(this.element);\n        this.bit = document.createElement('div');\n        this.bit.classList.add('progress-bit');\n        this.bit.style.backgroundColor = (options === null || options === void 0 ? void 0 : options.progressBarBackground) || '#0E70C0';\n        this.element.appendChild(this.bit);\n    }\n    off() {\n        this.bit.style.width = 'inherit';\n        this.bit.style.opacity = '1';\n        this.element.classList.remove(CSS_ACTIVE, CSS_INFINITE, CSS_INFINITE_LONG_RUNNING, CSS_DISCRETE);\n        this.workedVal = 0;\n        this.totalWork = undefined;\n        this.longRunningScheduler.cancel();\n    }\n    /**\n     * Stops the progressbar from showing any progress instantly without fading out.\n     */\n    stop() {\n        return this.doDone(false);\n    }\n    doDone(delayed) {\n        this.element.classList.add(CSS_DONE);\n        // discrete: let it grow to 100% width and hide afterwards\n        if (!this.element.classList.contains(CSS_INFINITE)) {\n            this.bit.style.width = 'inherit';\n            if (delayed) {\n                setTimeout(() => this.off(), 200);\n            }\n            else {\n                this.off();\n            }\n        }\n        // infinite: let it fade out and hide afterwards\n        else {\n            this.bit.style.opacity = '0';\n            if (delayed) {\n                setTimeout(() => this.off(), 200);\n            }\n            else {\n                this.off();\n            }\n        }\n        return this;\n    }\n    /**\n     * Use this mode to indicate progress that has no total number of work units.\n     */\n    infinite() {\n        this.bit.style.width = '2%';\n        this.bit.style.opacity = '1';\n        this.element.classList.remove(CSS_DISCRETE, CSS_DONE, CSS_INFINITE_LONG_RUNNING);\n        this.element.classList.add(CSS_ACTIVE, CSS_INFINITE);\n        this.longRunningScheduler.schedule();\n        return this;\n    }\n    infiniteLongRunning() {\n        this.element.classList.add(CSS_INFINITE_LONG_RUNNING);\n    }\n    getContainer() {\n        return this.element;\n    }\n}\n/**\n * After a certain time of showing the progress bar, switch\n * to long-running mode and throttle animations to reduce\n * the pressure on the GPU process.\n *\n * https://github.com/microsoft/vscode/issues/97900\n * https://github.com/microsoft/vscode/issues/138396\n */\nProgressBar.LONG_RUNNING_INFINITE_THRESHOLD = 10000;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Dimension } from '../../dom.js';\nimport { OrthogonalEdge, Sash } from '../sash/sash.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nexport class ResizableHTMLElement {\n    constructor() {\n        this._onDidWillResize = new Emitter();\n        this.onDidWillResize = this._onDidWillResize.event;\n        this._onDidResize = new Emitter();\n        this.onDidResize = this._onDidResize.event;\n        this._sashListener = new DisposableStore();\n        this._size = new Dimension(0, 0);\n        this._minSize = new Dimension(0, 0);\n        this._maxSize = new Dimension(Number.MAX_SAFE_INTEGER, Number.MAX_SAFE_INTEGER);\n        this.domNode = document.createElement('div');\n        this._eastSash = new Sash(this.domNode, { getVerticalSashLeft: () => this._size.width }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._westSash = new Sash(this.domNode, { getVerticalSashLeft: () => 0 }, { orientation: 0 /* Orientation.VERTICAL */ });\n        this._northSash = new Sash(this.domNode, { getHorizontalSashTop: () => 0 }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.North });\n        this._southSash = new Sash(this.domNode, { getHorizontalSashTop: () => this._size.height }, { orientation: 1 /* Orientation.HORIZONTAL */, orthogonalEdge: OrthogonalEdge.South });\n        this._northSash.orthogonalStartSash = this._westSash;\n        this._northSash.orthogonalEndSash = this._eastSash;\n        this._southSash.orthogonalStartSash = this._westSash;\n        this._southSash.orthogonalEndSash = this._eastSash;\n        let currentSize;\n        let deltaY = 0;\n        let deltaX = 0;\n        this._sashListener.add(Event.any(this._northSash.onDidStart, this._eastSash.onDidStart, this._southSash.onDidStart, this._westSash.onDidStart)(() => {\n            if (currentSize === undefined) {\n                this._onDidWillResize.fire();\n                currentSize = this._size;\n                deltaY = 0;\n                deltaX = 0;\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidEnd, this._eastSash.onDidEnd, this._southSash.onDidEnd, this._westSash.onDidEnd)(() => {\n            if (currentSize !== undefined) {\n                currentSize = undefined;\n                deltaY = 0;\n                deltaX = 0;\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(this._eastSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = e.currentX - e.startX;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, east: true });\n            }\n        }));\n        this._sashListener.add(this._westSash.onDidChange(e => {\n            if (currentSize) {\n                deltaX = -(e.currentX - e.startX);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, west: true });\n            }\n        }));\n        this._sashListener.add(this._northSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = -(e.currentY - e.startY);\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, north: true });\n            }\n        }));\n        this._sashListener.add(this._southSash.onDidChange(e => {\n            if (currentSize) {\n                deltaY = e.currentY - e.startY;\n                this.layout(currentSize.height + deltaY, currentSize.width + deltaX);\n                this._onDidResize.fire({ dimension: this._size, done: false, south: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._eastSash.onDidReset, this._westSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._size.height, this._preferredSize.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n        this._sashListener.add(Event.any(this._northSash.onDidReset, this._southSash.onDidReset)(e => {\n            if (this._preferredSize) {\n                this.layout(this._preferredSize.height, this._size.width);\n                this._onDidResize.fire({ dimension: this._size, done: true });\n            }\n        }));\n    }\n    dispose() {\n        this._northSash.dispose();\n        this._southSash.dispose();\n        this._eastSash.dispose();\n        this._westSash.dispose();\n        this._sashListener.dispose();\n        this._onDidResize.dispose();\n        this._onDidWillResize.dispose();\n        this.domNode.remove();\n    }\n    enableSashes(north, east, south, west) {\n        this._northSash.state = north ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._eastSash.state = east ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._southSash.state = south ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n        this._westSash.state = west ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n    }\n    layout(height = this.size.height, width = this.size.width) {\n        const { height: minHeight, width: minWidth } = this._minSize;\n        const { height: maxHeight, width: maxWidth } = this._maxSize;\n        height = Math.max(minHeight, Math.min(maxHeight, height));\n        width = Math.max(minWidth, Math.min(maxWidth, width));\n        const newSize = new Dimension(width, height);\n        if (!Dimension.equals(newSize, this._size)) {\n            this.domNode.style.height = height + 'px';\n            this.domNode.style.width = width + 'px';\n            this._size = newSize;\n            this._northSash.layout();\n            this._eastSash.layout();\n            this._southSash.layout();\n            this._westSash.layout();\n        }\n    }\n    clearSashHoverState() {\n        this._eastSash.clearSashHoverState();\n        this._westSash.clearSashHoverState();\n        this._northSash.clearSashHoverState();\n        this._southSash.clearSashHoverState();\n    }\n    get size() {\n        return this._size;\n    }\n    set maxSize(value) {\n        this._maxSize = value;\n    }\n    get maxSize() {\n        return this._maxSize;\n    }\n    set minSize(value) {\n        this._minSize = value;\n    }\n    get minSize() {\n        return this._minSize;\n    }\n    set preferredSize(value) {\n        this._preferredSize = value;\n    }\n    get preferredSize() {\n        return this._preferredSize;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { $, append, createStyleSheet, EventHelper } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { EventType, Gesture } from '../../touch.js';\nimport { Delayer } from '../../../common/async.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './sash.css';\n/**\n * Allow the sashes to be visible at runtime.\n * @remark Use for development purposes only.\n */\nconst DEBUG = false;\nexport var OrthogonalEdge;\n(function (OrthogonalEdge) {\n    OrthogonalEdge[\"North\"] = \"north\";\n    OrthogonalEdge[\"South\"] = \"south\";\n    OrthogonalEdge[\"East\"] = \"east\";\n    OrthogonalEdge[\"West\"] = \"west\";\n})(OrthogonalEdge || (OrthogonalEdge = {}));\nlet globalSize = 4;\nconst onDidChangeGlobalSize = new Emitter();\nlet globalHoverDelay = 300;\nconst onDidChangeHoverDelay = new Emitter();\nclass MouseEventFactory {\n    constructor() {\n        this.disposables = new DisposableStore();\n    }\n    get onPointerMove() {\n        return this.disposables.add(new DomEmitter(window, 'mousemove')).event;\n    }\n    get onPointerUp() {\n        return this.disposables.add(new DomEmitter(window, 'mouseup')).event;\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], MouseEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], MouseEventFactory.prototype, \"onPointerUp\", null);\nclass GestureEventFactory {\n    get onPointerMove() {\n        return this.disposables.add(new DomEmitter(this.el, EventType.Change)).event;\n    }\n    get onPointerUp() {\n        return this.disposables.add(new DomEmitter(this.el, EventType.End)).event;\n    }\n    constructor(el) {\n        this.el = el;\n        this.disposables = new DisposableStore();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], GestureEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], GestureEventFactory.prototype, \"onPointerUp\", null);\nclass OrthogonalPointerEventFactory {\n    get onPointerMove() {\n        return this.factory.onPointerMove;\n    }\n    get onPointerUp() {\n        return this.factory.onPointerUp;\n    }\n    constructor(factory) {\n        this.factory = factory;\n    }\n    dispose() {\n        // noop\n    }\n}\n__decorate([\n    memoize\n], OrthogonalPointerEventFactory.prototype, \"onPointerMove\", null);\n__decorate([\n    memoize\n], OrthogonalPointerEventFactory.prototype, \"onPointerUp\", null);\nconst PointerEventsDisabledCssClass = 'pointer-events-disabled';\n/**\n * The {@link Sash} is the UI component which allows the user to resize other\n * components. It's usually an invisible horizontal or vertical line which, when\n * hovered, becomes highlighted and can be dragged along the perpendicular dimension\n * to its direction.\n *\n * Features:\n * - Touch event handling\n * - Corner sash support\n * - Hover with different mouse cursor support\n * - Configurable hover size\n * - Linked sash support, for 2x2 corner sashes\n */\nexport class Sash extends Disposable {\n    get state() { return this._state; }\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    /**\n     * The state of a sash defines whether it can be interacted with by the user\n     * as well as what mouse cursor to use, when hovered.\n     */\n    set state(state) {\n        if (this._state === state) {\n            return;\n        }\n        this.el.classList.toggle('disabled', state === 0 /* SashState.Disabled */);\n        this.el.classList.toggle('minimum', state === 1 /* SashState.AtMinimum */);\n        this.el.classList.toggle('maximum', state === 2 /* SashState.AtMaximum */);\n        this._state = state;\n        this.onDidEnablementChange.fire(state);\n    }\n    /**\n     * A reference to another sash, perpendicular to this one, which\n     * aligns at the start of this one. A corner sash will be created\n     * automatically at that location.\n     *\n     * The start of a horizontal sash is its left-most position.\n     * The start of a vertical sash is its top-most position.\n     */\n    set orthogonalStartSash(sash) {\n        if (this._orthogonalStartSash === sash) {\n            return;\n        }\n        this.orthogonalStartDragHandleDisposables.clear();\n        this.orthogonalStartSashDisposables.clear();\n        if (sash) {\n            const onChange = (state) => {\n                this.orthogonalStartDragHandleDisposables.clear();\n                if (state !== 0 /* SashState.Disabled */) {\n                    this._orthogonalStartDragHandle = append(this.el, $('.orthogonal-drag-handle.start'));\n                    this.orthogonalStartDragHandleDisposables.add(toDisposable(() => this._orthogonalStartDragHandle.remove()));\n                    this.orthogonalStartDragHandleDisposables.add(new DomEmitter(this._orthogonalStartDragHandle, 'mouseenter')).event(() => Sash.onMouseEnter(sash), undefined, this.orthogonalStartDragHandleDisposables);\n                    this.orthogonalStartDragHandleDisposables.add(new DomEmitter(this._orthogonalStartDragHandle, 'mouseleave')).event(() => Sash.onMouseLeave(sash), undefined, this.orthogonalStartDragHandleDisposables);\n                }\n            };\n            this.orthogonalStartSashDisposables.add(sash.onDidEnablementChange.event(onChange, this));\n            onChange(sash.state);\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to another sash, perpendicular to this one, which\n     * aligns at the end of this one. A corner sash will be created\n     * automatically at that location.\n     *\n     * The end of a horizontal sash is its right-most position.\n     * The end of a vertical sash is its bottom-most position.\n     */\n    set orthogonalEndSash(sash) {\n        if (this._orthogonalEndSash === sash) {\n            return;\n        }\n        this.orthogonalEndDragHandleDisposables.clear();\n        this.orthogonalEndSashDisposables.clear();\n        if (sash) {\n            const onChange = (state) => {\n                this.orthogonalEndDragHandleDisposables.clear();\n                if (state !== 0 /* SashState.Disabled */) {\n                    this._orthogonalEndDragHandle = append(this.el, $('.orthogonal-drag-handle.end'));\n                    this.orthogonalEndDragHandleDisposables.add(toDisposable(() => this._orthogonalEndDragHandle.remove()));\n                    this.orthogonalEndDragHandleDisposables.add(new DomEmitter(this._orthogonalEndDragHandle, 'mouseenter')).event(() => Sash.onMouseEnter(sash), undefined, this.orthogonalEndDragHandleDisposables);\n                    this.orthogonalEndDragHandleDisposables.add(new DomEmitter(this._orthogonalEndDragHandle, 'mouseleave')).event(() => Sash.onMouseLeave(sash), undefined, this.orthogonalEndDragHandleDisposables);\n                }\n            };\n            this.orthogonalEndSashDisposables.add(sash.onDidEnablementChange.event(onChange, this));\n            onChange(sash.state);\n        }\n        this._orthogonalEndSash = sash;\n    }\n    constructor(container, layoutProvider, options) {\n        super();\n        this.hoverDelay = globalHoverDelay;\n        this.hoverDelayer = this._register(new Delayer(this.hoverDelay));\n        this._state = 3 /* SashState.Enabled */;\n        this.onDidEnablementChange = this._register(new Emitter());\n        this._onDidStart = this._register(new Emitter());\n        this._onDidChange = this._register(new Emitter());\n        this._onDidReset = this._register(new Emitter());\n        this._onDidEnd = this._register(new Emitter());\n        this.orthogonalStartSashDisposables = this._register(new DisposableStore());\n        this.orthogonalStartDragHandleDisposables = this._register(new DisposableStore());\n        this.orthogonalEndSashDisposables = this._register(new DisposableStore());\n        this.orthogonalEndDragHandleDisposables = this._register(new DisposableStore());\n        /**\n         * An event which fires whenever the user starts dragging this sash.\n         */\n        this.onDidStart = this._onDidStart.event;\n        /**\n         * An event which fires whenever the user moves the mouse while\n         * dragging this sash.\n         */\n        this.onDidChange = this._onDidChange.event;\n        /**\n         * An event which fires whenever the user double clicks this sash.\n         */\n        this.onDidReset = this._onDidReset.event;\n        /**\n         * An event which fires whenever the user stops dragging this sash.\n         */\n        this.onDidEnd = this._onDidEnd.event;\n        /**\n         * A linked sash will be forwarded the same user interactions and events\n         * so it moves exactly the same way as this sash.\n         *\n         * Useful in 2x2 grids. Not meant for widespread usage.\n         */\n        this.linkedSash = undefined;\n        this.el = append(container, $('.monaco-sash'));\n        if (options.orthogonalEdge) {\n            this.el.classList.add(`orthogonal-edge-${options.orthogonalEdge}`);\n        }\n        if (isMacintosh) {\n            this.el.classList.add('mac');\n        }\n        const onMouseDown = this._register(new DomEmitter(this.el, 'mousedown')).event;\n        this._register(onMouseDown(e => this.onPointerStart(e, new MouseEventFactory()), this));\n        const onMouseDoubleClick = this._register(new DomEmitter(this.el, 'dblclick')).event;\n        this._register(onMouseDoubleClick(this.onPointerDoublePress, this));\n        const onMouseEnter = this._register(new DomEmitter(this.el, 'mouseenter')).event;\n        this._register(onMouseEnter(() => Sash.onMouseEnter(this)));\n        const onMouseLeave = this._register(new DomEmitter(this.el, 'mouseleave')).event;\n        this._register(onMouseLeave(() => Sash.onMouseLeave(this)));\n        this._register(Gesture.addTarget(this.el));\n        const onTouchStart = this._register(new DomEmitter(this.el, EventType.Start)).event;\n        this._register(onTouchStart(e => this.onPointerStart(e, new GestureEventFactory(this.el)), this));\n        const onTap = this._register(new DomEmitter(this.el, EventType.Tap)).event;\n        let doubleTapTimeout = undefined;\n        this._register(onTap(event => {\n            if (doubleTapTimeout) {\n                clearTimeout(doubleTapTimeout);\n                doubleTapTimeout = undefined;\n                this.onPointerDoublePress(event);\n                return;\n            }\n            clearTimeout(doubleTapTimeout);\n            doubleTapTimeout = setTimeout(() => doubleTapTimeout = undefined, 250);\n        }, this));\n        if (typeof options.size === 'number') {\n            this.size = options.size;\n            if (options.orientation === 0 /* Orientation.VERTICAL */) {\n                this.el.style.width = `${this.size}px`;\n            }\n            else {\n                this.el.style.height = `${this.size}px`;\n            }\n        }\n        else {\n            this.size = globalSize;\n            this._register(onDidChangeGlobalSize.event(size => {\n                this.size = size;\n                this.layout();\n            }));\n        }\n        this._register(onDidChangeHoverDelay.event(delay => this.hoverDelay = delay));\n        this.layoutProvider = layoutProvider;\n        this.orthogonalStartSash = options.orthogonalStartSash;\n        this.orthogonalEndSash = options.orthogonalEndSash;\n        this.orientation = options.orientation || 0 /* Orientation.VERTICAL */;\n        if (this.orientation === 1 /* Orientation.HORIZONTAL */) {\n            this.el.classList.add('horizontal');\n            this.el.classList.remove('vertical');\n        }\n        else {\n            this.el.classList.remove('horizontal');\n            this.el.classList.add('vertical');\n        }\n        this.el.classList.toggle('debug', DEBUG);\n        this.layout();\n    }\n    onPointerStart(event, pointerEventFactory) {\n        EventHelper.stop(event);\n        let isMultisashResize = false;\n        if (!event.__orthogonalSashEvent) {\n            const orthogonalSash = this.getOrthogonalSash(event);\n            if (orthogonalSash) {\n                isMultisashResize = true;\n                event.__orthogonalSashEvent = true;\n                orthogonalSash.onPointerStart(event, new OrthogonalPointerEventFactory(pointerEventFactory));\n            }\n        }\n        if (this.linkedSash && !event.__linkedSashEvent) {\n            event.__linkedSashEvent = true;\n            this.linkedSash.onPointerStart(event, new OrthogonalPointerEventFactory(pointerEventFactory));\n        }\n        if (!this.state) {\n            return;\n        }\n        const iframes = document.getElementsByTagName('iframe');\n        for (const iframe of iframes) {\n            iframe.classList.add(PointerEventsDisabledCssClass); // disable mouse events on iframes as long as we drag the sash\n        }\n        const startX = event.pageX;\n        const startY = event.pageY;\n        const altKey = event.altKey;\n        const startEvent = { startX, currentX: startX, startY, currentY: startY, altKey };\n        this.el.classList.add('active');\n        this._onDidStart.fire(startEvent);\n        // fix https://github.com/microsoft/vscode/issues/21675\n        const style = createStyleSheet(this.el);\n        const updateStyle = () => {\n            let cursor = '';\n            if (isMultisashResize) {\n                cursor = 'all-scroll';\n            }\n            else if (this.orientation === 1 /* Orientation.HORIZONTAL */) {\n                if (this.state === 1 /* SashState.AtMinimum */) {\n                    cursor = 's-resize';\n                }\n                else if (this.state === 2 /* SashState.AtMaximum */) {\n                    cursor = 'n-resize';\n                }\n                else {\n                    cursor = isMacintosh ? 'row-resize' : 'ns-resize';\n                }\n            }\n            else {\n                if (this.state === 1 /* SashState.AtMinimum */) {\n                    cursor = 'e-resize';\n                }\n                else if (this.state === 2 /* SashState.AtMaximum */) {\n                    cursor = 'w-resize';\n                }\n                else {\n                    cursor = isMacintosh ? 'col-resize' : 'ew-resize';\n                }\n            }\n            style.textContent = `* { cursor: ${cursor} !important; }`;\n        };\n        const disposables = new DisposableStore();\n        updateStyle();\n        if (!isMultisashResize) {\n            this.onDidEnablementChange.event(updateStyle, null, disposables);\n        }\n        const onPointerMove = (e) => {\n            EventHelper.stop(e, false);\n            const event = { startX, currentX: e.pageX, startY, currentY: e.pageY, altKey };\n            this._onDidChange.fire(event);\n        };\n        const onPointerUp = (e) => {\n            EventHelper.stop(e, false);\n            this.el.removeChild(style);\n            this.el.classList.remove('active');\n            this._onDidEnd.fire();\n            disposables.dispose();\n            for (const iframe of iframes) {\n                iframe.classList.remove(PointerEventsDisabledCssClass);\n            }\n        };\n        pointerEventFactory.onPointerMove(onPointerMove, null, disposables);\n        pointerEventFactory.onPointerUp(onPointerUp, null, disposables);\n        disposables.add(pointerEventFactory);\n    }\n    onPointerDoublePress(e) {\n        const orthogonalSash = this.getOrthogonalSash(e);\n        if (orthogonalSash) {\n            orthogonalSash._onDidReset.fire();\n        }\n        if (this.linkedSash) {\n            this.linkedSash._onDidReset.fire();\n        }\n        this._onDidReset.fire();\n    }\n    static onMouseEnter(sash, fromLinkedSash = false) {\n        if (sash.el.classList.contains('active')) {\n            sash.hoverDelayer.cancel();\n            sash.el.classList.add('hover');\n        }\n        else {\n            sash.hoverDelayer.trigger(() => sash.el.classList.add('hover'), sash.hoverDelay).then(undefined, () => { });\n        }\n        if (!fromLinkedSash && sash.linkedSash) {\n            Sash.onMouseEnter(sash.linkedSash, true);\n        }\n    }\n    static onMouseLeave(sash, fromLinkedSash = false) {\n        sash.hoverDelayer.cancel();\n        sash.el.classList.remove('hover');\n        if (!fromLinkedSash && sash.linkedSash) {\n            Sash.onMouseLeave(sash.linkedSash, true);\n        }\n    }\n    /**\n     * Forcefully stop any user interactions with this sash.\n     * Useful when hiding a parent component, while the user is still\n     * interacting with the sash.\n     */\n    clearSashHoverState() {\n        Sash.onMouseLeave(this);\n    }\n    /**\n     * Layout the sash. The sash will size and position itself\n     * based on its provided {@link ISashLayoutProvider layout provider}.\n     */\n    layout() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            const verticalProvider = this.layoutProvider;\n            this.el.style.left = verticalProvider.getVerticalSashLeft(this) - (this.size / 2) + 'px';\n            if (verticalProvider.getVerticalSashTop) {\n                this.el.style.top = verticalProvider.getVerticalSashTop(this) + 'px';\n            }\n            if (verticalProvider.getVerticalSashHeight) {\n                this.el.style.height = verticalProvider.getVerticalSashHeight(this) + 'px';\n            }\n        }\n        else {\n            const horizontalProvider = this.layoutProvider;\n            this.el.style.top = horizontalProvider.getHorizontalSashTop(this) - (this.size / 2) + 'px';\n            if (horizontalProvider.getHorizontalSashLeft) {\n                this.el.style.left = horizontalProvider.getHorizontalSashLeft(this) + 'px';\n            }\n            if (horizontalProvider.getHorizontalSashWidth) {\n                this.el.style.width = horizontalProvider.getHorizontalSashWidth(this) + 'px';\n            }\n        }\n    }\n    getOrthogonalSash(e) {\n        var _a;\n        const target = (_a = e.initialTarget) !== null && _a !== void 0 ? _a : e.target;\n        if (!target || !(target instanceof HTMLElement)) {\n            return undefined;\n        }\n        if (target.classList.contains('orthogonal-drag-handle')) {\n            return target.classList.contains('start') ? this.orthogonalStartSash : this.orthogonalEndSash;\n        }\n        return undefined;\n    }\n    dispose() {\n        super.dispose();\n        this.el.remove();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { GlobalPointerMoveMonitor } from '../../globalPointerMoveMonitor.js';\nimport { Widget } from '../widget.js';\nimport { IntervalTimer, TimeoutTimer } from '../../../common/async.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport * as dom from '../../dom.js';\n/**\n * The arrow image size.\n */\nexport const ARROW_IMG_SIZE = 11;\nexport class ScrollbarArrow extends Widget {\n    constructor(opts) {\n        super();\n        this._onActivate = opts.onActivate;\n        this.bgDomNode = document.createElement('div');\n        this.bgDomNode.className = 'arrow-background';\n        this.bgDomNode.style.position = 'absolute';\n        this.bgDomNode.style.width = opts.bgWidth + 'px';\n        this.bgDomNode.style.height = opts.bgHeight + 'px';\n        if (typeof opts.top !== 'undefined') {\n            this.bgDomNode.style.top = '0px';\n        }\n        if (typeof opts.left !== 'undefined') {\n            this.bgDomNode.style.left = '0px';\n        }\n        if (typeof opts.bottom !== 'undefined') {\n            this.bgDomNode.style.bottom = '0px';\n        }\n        if (typeof opts.right !== 'undefined') {\n            this.bgDomNode.style.right = '0px';\n        }\n        this.domNode = document.createElement('div');\n        this.domNode.className = opts.className;\n        this.domNode.classList.add(...ThemeIcon.asClassNameArray(opts.icon));\n        this.domNode.style.position = 'absolute';\n        this.domNode.style.width = ARROW_IMG_SIZE + 'px';\n        this.domNode.style.height = ARROW_IMG_SIZE + 'px';\n        if (typeof opts.top !== 'undefined') {\n            this.domNode.style.top = opts.top + 'px';\n        }\n        if (typeof opts.left !== 'undefined') {\n            this.domNode.style.left = opts.left + 'px';\n        }\n        if (typeof opts.bottom !== 'undefined') {\n            this.domNode.style.bottom = opts.bottom + 'px';\n        }\n        if (typeof opts.right !== 'undefined') {\n            this.domNode.style.right = opts.right + 'px';\n        }\n        this._pointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._register(dom.addStandardDisposableListener(this.bgDomNode, dom.EventType.POINTER_DOWN, (e) => this._arrowPointerDown(e)));\n        this._register(dom.addStandardDisposableListener(this.domNode, dom.EventType.POINTER_DOWN, (e) => this._arrowPointerDown(e)));\n        this._pointerdownRepeatTimer = this._register(new IntervalTimer());\n        this._pointerdownScheduleRepeatTimer = this._register(new TimeoutTimer());\n    }\n    _arrowPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const scheduleRepeater = () => {\n            this._pointerdownRepeatTimer.cancelAndSet(() => this._onActivate(), 1000 / 24);\n        };\n        this._onActivate();\n        this._pointerdownRepeatTimer.cancel();\n        this._pointerdownScheduleRepeatTimer.cancelAndSet(scheduleRepeater, 200);\n        this._pointerMoveMonitor.startMonitoring(e.target, e.pointerId, e.buttons, (pointerMoveData) => { }, () => {\n            this._pointerdownRepeatTimer.cancel();\n            this._pointerdownScheduleRepeatTimer.cancel();\n        });\n        e.preventDefault();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nexport class ScrollbarVisibilityController extends Disposable {\n    constructor(visibility, visibleClassName, invisibleClassName) {\n        super();\n        this._visibility = visibility;\n        this._visibleClassName = visibleClassName;\n        this._invisibleClassName = invisibleClassName;\n        this._domNode = null;\n        this._isVisible = false;\n        this._isNeeded = false;\n        this._rawShouldBeVisible = false;\n        this._shouldBeVisible = false;\n        this._revealTimer = this._register(new TimeoutTimer());\n    }\n    setVisibility(visibility) {\n        if (this._visibility !== visibility) {\n            this._visibility = visibility;\n            this._updateShouldBeVisible();\n        }\n    }\n    // ----------------- Hide / Reveal\n    setShouldBeVisible(rawShouldBeVisible) {\n        this._rawShouldBeVisible = rawShouldBeVisible;\n        this._updateShouldBeVisible();\n    }\n    _applyVisibilitySetting() {\n        if (this._visibility === 2 /* ScrollbarVisibility.Hidden */) {\n            return false;\n        }\n        if (this._visibility === 3 /* ScrollbarVisibility.Visible */) {\n            return true;\n        }\n        return this._rawShouldBeVisible;\n    }\n    _updateShouldBeVisible() {\n        const shouldBeVisible = this._applyVisibilitySetting();\n        if (this._shouldBeVisible !== shouldBeVisible) {\n            this._shouldBeVisible = shouldBeVisible;\n            this.ensureVisibility();\n        }\n    }\n    setIsNeeded(isNeeded) {\n        if (this._isNeeded !== isNeeded) {\n            this._isNeeded = isNeeded;\n            this.ensureVisibility();\n        }\n    }\n    setDomNode(domNode) {\n        this._domNode = domNode;\n        this._domNode.setClassName(this._invisibleClassName);\n        // Now that the flags & the dom node are in a consistent state, ensure the Hidden/Visible configuration\n        this.setShouldBeVisible(false);\n    }\n    ensureVisibility() {\n        if (!this._isNeeded) {\n            // Nothing to be rendered\n            this._hide(false);\n            return;\n        }\n        if (this._shouldBeVisible) {\n            this._reveal();\n        }\n        else {\n            this._hide(true);\n        }\n    }\n    _reveal() {\n        if (this._isVisible) {\n            return;\n        }\n        this._isVisible = true;\n        // The CSS animation doesn't play otherwise\n        this._revealTimer.setIfNotSet(() => {\n            var _a;\n            (_a = this._domNode) === null || _a === void 0 ? void 0 : _a.setClassName(this._visibleClassName);\n        }, 0);\n    }\n    _hide(withFadeAway) {\n        var _a;\n        this._revealTimer.cancel();\n        if (!this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        (_a = this._domNode) === null || _a === void 0 ? void 0 : _a.setClassName(this._invisibleClassName + (withFadeAway ? ' fade' : ''));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { createFastDomNode } from '../../fastDomNode.js';\nimport { GlobalPointerMoveMonitor } from '../../globalPointerMoveMonitor.js';\nimport { ScrollbarArrow } from './scrollbarArrow.js';\nimport { ScrollbarVisibilityController } from './scrollbarVisibilityController.js';\nimport { Widget } from '../widget.js';\nimport * as platform from '../../../common/platform.js';\n/**\n * The orthogonal distance to the slider at which dragging \"resets\". This implements \"snapping\"\n */\nconst POINTER_DRAG_RESET_DISTANCE = 140;\nexport class AbstractScrollbar extends Widget {\n    constructor(opts) {\n        super();\n        this._lazyRender = opts.lazyRender;\n        this._host = opts.host;\n        this._scrollable = opts.scrollable;\n        this._scrollByPage = opts.scrollByPage;\n        this._scrollbarState = opts.scrollbarState;\n        this._visibilityController = this._register(new ScrollbarVisibilityController(opts.visibility, 'visible scrollbar ' + opts.extraScrollbarClassName, 'invisible scrollbar ' + opts.extraScrollbarClassName));\n        this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n        this._pointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._shouldRender = true;\n        this.domNode = createFastDomNode(document.createElement('div'));\n        this.domNode.setAttribute('role', 'presentation');\n        this.domNode.setAttribute('aria-hidden', 'true');\n        this._visibilityController.setDomNode(this.domNode);\n        this.domNode.setPosition('absolute');\n        this._register(dom.addDisposableListener(this.domNode.domNode, dom.EventType.POINTER_DOWN, (e) => this._domNodePointerDown(e)));\n    }\n    // ----------------- creation\n    /**\n     * Creates the dom node for an arrow & adds it to the container\n     */\n    _createArrow(opts) {\n        const arrow = this._register(new ScrollbarArrow(opts));\n        this.domNode.domNode.appendChild(arrow.bgDomNode);\n        this.domNode.domNode.appendChild(arrow.domNode);\n    }\n    /**\n     * Creates the slider dom node, adds it to the container & hooks up the events\n     */\n    _createSlider(top, left, width, height) {\n        this.slider = createFastDomNode(document.createElement('div'));\n        this.slider.setClassName('slider');\n        this.slider.setPosition('absolute');\n        this.slider.setTop(top);\n        this.slider.setLeft(left);\n        if (typeof width === 'number') {\n            this.slider.setWidth(width);\n        }\n        if (typeof height === 'number') {\n            this.slider.setHeight(height);\n        }\n        this.slider.setLayerHinting(true);\n        this.slider.setContain('strict');\n        this.domNode.domNode.appendChild(this.slider.domNode);\n        this._register(dom.addDisposableListener(this.slider.domNode, dom.EventType.POINTER_DOWN, (e) => {\n            if (e.button === 0) {\n                e.preventDefault();\n                this._sliderPointerDown(e);\n            }\n        }));\n        this.onclick(this.slider.domNode, e => {\n            if (e.leftButton) {\n                e.stopPropagation();\n            }\n        });\n    }\n    // ----------------- Update state\n    _onElementSize(visibleSize) {\n        if (this._scrollbarState.setVisibleSize(visibleSize)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    _onElementScrollSize(elementScrollSize) {\n        if (this._scrollbarState.setScrollSize(elementScrollSize)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    _onElementScrollPosition(elementScrollPosition) {\n        if (this._scrollbarState.setScrollPosition(elementScrollPosition)) {\n            this._visibilityController.setIsNeeded(this._scrollbarState.isNeeded());\n            this._shouldRender = true;\n            if (!this._lazyRender) {\n                this.render();\n            }\n        }\n        return this._shouldRender;\n    }\n    // ----------------- rendering\n    beginReveal() {\n        this._visibilityController.setShouldBeVisible(true);\n    }\n    beginHide() {\n        this._visibilityController.setShouldBeVisible(false);\n    }\n    render() {\n        if (!this._shouldRender) {\n            return;\n        }\n        this._shouldRender = false;\n        this._renderDomNode(this._scrollbarState.getRectangleLargeSize(), this._scrollbarState.getRectangleSmallSize());\n        this._updateSlider(this._scrollbarState.getSliderSize(), this._scrollbarState.getArrowSize() + this._scrollbarState.getSliderPosition());\n    }\n    // ----------------- DOM events\n    _domNodePointerDown(e) {\n        if (e.target !== this.domNode.domNode) {\n            return;\n        }\n        this._onPointerDown(e);\n    }\n    delegatePointerDown(e) {\n        const domTop = this.domNode.domNode.getClientRects()[0].top;\n        const sliderStart = domTop + this._scrollbarState.getSliderPosition();\n        const sliderStop = domTop + this._scrollbarState.getSliderPosition() + this._scrollbarState.getSliderSize();\n        const pointerPos = this._sliderPointerPosition(e);\n        if (sliderStart <= pointerPos && pointerPos <= sliderStop) {\n            // Act as if it was a pointer down on the slider\n            if (e.button === 0) {\n                e.preventDefault();\n                this._sliderPointerDown(e);\n            }\n        }\n        else {\n            // Act as if it was a pointer down on the scrollbar\n            this._onPointerDown(e);\n        }\n    }\n    _onPointerDown(e) {\n        let offsetX;\n        let offsetY;\n        if (e.target === this.domNode.domNode && typeof e.offsetX === 'number' && typeof e.offsetY === 'number') {\n            offsetX = e.offsetX;\n            offsetY = e.offsetY;\n        }\n        else {\n            const domNodePosition = dom.getDomNodePagePosition(this.domNode.domNode);\n            offsetX = e.pageX - domNodePosition.left;\n            offsetY = e.pageY - domNodePosition.top;\n        }\n        const offset = this._pointerDownRelativePosition(offsetX, offsetY);\n        this._setDesiredScrollPositionNow(this._scrollByPage\n            ? this._scrollbarState.getDesiredScrollPositionFromOffsetPaged(offset)\n            : this._scrollbarState.getDesiredScrollPositionFromOffset(offset));\n        if (e.button === 0) {\n            // left button\n            e.preventDefault();\n            this._sliderPointerDown(e);\n        }\n    }\n    _sliderPointerDown(e) {\n        if (!e.target || !(e.target instanceof Element)) {\n            return;\n        }\n        const initialPointerPosition = this._sliderPointerPosition(e);\n        const initialPointerOrthogonalPosition = this._sliderOrthogonalPointerPosition(e);\n        const initialScrollbarState = this._scrollbarState.clone();\n        this.slider.toggleClassName('active', true);\n        this._pointerMoveMonitor.startMonitoring(e.target, e.pointerId, e.buttons, (pointerMoveData) => {\n            const pointerOrthogonalPosition = this._sliderOrthogonalPointerPosition(pointerMoveData);\n            const pointerOrthogonalDelta = Math.abs(pointerOrthogonalPosition - initialPointerOrthogonalPosition);\n            if (platform.isWindows && pointerOrthogonalDelta > POINTER_DRAG_RESET_DISTANCE) {\n                // The pointer has wondered away from the scrollbar => reset dragging\n                this._setDesiredScrollPositionNow(initialScrollbarState.getScrollPosition());\n                return;\n            }\n            const pointerPosition = this._sliderPointerPosition(pointerMoveData);\n            const pointerDelta = pointerPosition - initialPointerPosition;\n            this._setDesiredScrollPositionNow(initialScrollbarState.getDesiredScrollPositionFromDelta(pointerDelta));\n        }, () => {\n            this.slider.toggleClassName('active', false);\n            this._host.onDragEnd();\n        });\n        this._host.onDragStart();\n    }\n    _setDesiredScrollPositionNow(_desiredScrollPosition) {\n        const desiredScrollPosition = {};\n        this.writeScrollPosition(desiredScrollPosition, _desiredScrollPosition);\n        this._scrollable.setScrollPositionNow(desiredScrollPosition);\n    }\n    updateScrollbarSize(scrollbarSize) {\n        this._updateScrollbarSize(scrollbarSize);\n        this._scrollbarState.setScrollbarSize(scrollbarSize);\n        this._shouldRender = true;\n        if (!this._lazyRender) {\n            this.render();\n        }\n    }\n    isNeeded() {\n        return this._scrollbarState.isNeeded();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { AbstractScrollbar } from './abstractScrollbar.js';\nimport { ARROW_IMG_SIZE } from './scrollbarArrow.js';\nimport { ScrollbarState } from './scrollbarState.js';\nimport { Codicon } from '../../../common/codicons.js';\nexport class HorizontalScrollbar extends AbstractScrollbar {\n    constructor(scrollable, options, host) {\n        const scrollDimensions = scrollable.getScrollDimensions();\n        const scrollPosition = scrollable.getCurrentScrollPosition();\n        super({\n            lazyRender: options.lazyRender,\n            host: host,\n            scrollbarState: new ScrollbarState((options.horizontalHasArrows ? options.arrowSize : 0), (options.horizontal === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.horizontalScrollbarSize), (options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize), scrollDimensions.width, scrollDimensions.scrollWidth, scrollPosition.scrollLeft),\n            visibility: options.horizontal,\n            extraScrollbarClassName: 'horizontal',\n            scrollable: scrollable,\n            scrollByPage: options.scrollByPage\n        });\n        if (options.horizontalHasArrows) {\n            const arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\n            const scrollbarDelta = (options.horizontalScrollbarSize - ARROW_IMG_SIZE) / 2;\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonLeft,\n                top: scrollbarDelta,\n                left: arrowDelta,\n                bottom: undefined,\n                right: undefined,\n                bgWidth: options.arrowSize,\n                bgHeight: options.horizontalScrollbarSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 1, 0)),\n            });\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonRight,\n                top: scrollbarDelta,\n                left: undefined,\n                bottom: undefined,\n                right: arrowDelta,\n                bgWidth: options.arrowSize,\n                bgHeight: options.horizontalScrollbarSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, -1, 0)),\n            });\n        }\n        this._createSlider(Math.floor((options.horizontalScrollbarSize - options.horizontalSliderSize) / 2), 0, undefined, options.horizontalSliderSize);\n    }\n    _updateSlider(sliderSize, sliderPosition) {\n        this.slider.setWidth(sliderSize);\n        this.slider.setLeft(sliderPosition);\n    }\n    _renderDomNode(largeSize, smallSize) {\n        this.domNode.setWidth(largeSize);\n        this.domNode.setHeight(smallSize);\n        this.domNode.setLeft(0);\n        this.domNode.setBottom(0);\n    }\n    onDidScroll(e) {\n        this._shouldRender = this._onElementScrollSize(e.scrollWidth) || this._shouldRender;\n        this._shouldRender = this._onElementScrollPosition(e.scrollLeft) || this._shouldRender;\n        this._shouldRender = this._onElementSize(e.width) || this._shouldRender;\n        return this._shouldRender;\n    }\n    _pointerDownRelativePosition(offsetX, offsetY) {\n        return offsetX;\n    }\n    _sliderPointerPosition(e) {\n        return e.pageX;\n    }\n    _sliderOrthogonalPointerPosition(e) {\n        return e.pageY;\n    }\n    _updateScrollbarSize(size) {\n        this.slider.setHeight(size);\n    }\n    writeScrollPosition(target, scrollPosition) {\n        target.scrollLeft = scrollPosition;\n    }\n    updateOptions(options) {\n        this.updateScrollbarSize(options.horizontal === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.horizontalScrollbarSize);\n        this._scrollbarState.setOppositeScrollbarSize(options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize);\n        this._visibilityController.setVisibility(options.horizontal);\n        this._scrollByPage = options.scrollByPage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { AbstractScrollbar } from './abstractScrollbar.js';\nimport { ARROW_IMG_SIZE } from './scrollbarArrow.js';\nimport { ScrollbarState } from './scrollbarState.js';\nimport { Codicon } from '../../../common/codicons.js';\nexport class VerticalScrollbar extends AbstractScrollbar {\n    constructor(scrollable, options, host) {\n        const scrollDimensions = scrollable.getScrollDimensions();\n        const scrollPosition = scrollable.getCurrentScrollPosition();\n        super({\n            lazyRender: options.lazyRender,\n            host: host,\n            scrollbarState: new ScrollbarState((options.verticalHasArrows ? options.arrowSize : 0), (options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize), \n            // give priority to vertical scroll bar over horizontal and let it scroll all the way to the bottom\n            0, scrollDimensions.height, scrollDimensions.scrollHeight, scrollPosition.scrollTop),\n            visibility: options.vertical,\n            extraScrollbarClassName: 'vertical',\n            scrollable: scrollable,\n            scrollByPage: options.scrollByPage\n        });\n        if (options.verticalHasArrows) {\n            const arrowDelta = (options.arrowSize - ARROW_IMG_SIZE) / 2;\n            const scrollbarDelta = (options.verticalScrollbarSize - ARROW_IMG_SIZE) / 2;\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonUp,\n                top: arrowDelta,\n                left: scrollbarDelta,\n                bottom: undefined,\n                right: undefined,\n                bgWidth: options.verticalScrollbarSize,\n                bgHeight: options.arrowSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 0, 1)),\n            });\n            this._createArrow({\n                className: 'scra',\n                icon: Codicon.scrollbarButtonDown,\n                top: undefined,\n                left: scrollbarDelta,\n                bottom: arrowDelta,\n                right: undefined,\n                bgWidth: options.verticalScrollbarSize,\n                bgHeight: options.arrowSize,\n                onActivate: () => this._host.onMouseWheel(new StandardWheelEvent(null, 0, -1)),\n            });\n        }\n        this._createSlider(0, Math.floor((options.verticalScrollbarSize - options.verticalSliderSize) / 2), options.verticalSliderSize, undefined);\n    }\n    _updateSlider(sliderSize, sliderPosition) {\n        this.slider.setHeight(sliderSize);\n        this.slider.setTop(sliderPosition);\n    }\n    _renderDomNode(largeSize, smallSize) {\n        this.domNode.setWidth(smallSize);\n        this.domNode.setHeight(largeSize);\n        this.domNode.setRight(0);\n        this.domNode.setTop(0);\n    }\n    onDidScroll(e) {\n        this._shouldRender = this._onElementScrollSize(e.scrollHeight) || this._shouldRender;\n        this._shouldRender = this._onElementScrollPosition(e.scrollTop) || this._shouldRender;\n        this._shouldRender = this._onElementSize(e.height) || this._shouldRender;\n        return this._shouldRender;\n    }\n    _pointerDownRelativePosition(offsetX, offsetY) {\n        return offsetY;\n    }\n    _sliderPointerPosition(e) {\n        return e.pageY;\n    }\n    _sliderOrthogonalPointerPosition(e) {\n        return e.pageX;\n    }\n    _updateScrollbarSize(size) {\n        this.slider.setWidth(size);\n    }\n    writeScrollPosition(target, scrollPosition) {\n        target.scrollTop = scrollPosition;\n    }\n    updateOptions(options) {\n        this.updateScrollbarSize(options.vertical === 2 /* ScrollbarVisibility.Hidden */ ? 0 : options.verticalScrollbarSize);\n        // give priority to vertical scroll bar over horizontal and let it scroll all the way to the bottom\n        this._scrollbarState.setOppositeScrollbarSize(0);\n        this._visibilityController.setVisibility(options.vertical);\n        this._scrollByPage = options.scrollByPage;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getZoomFactor } from '../../browser.js';\nimport * as dom from '../../dom.js';\nimport { createFastDomNode } from '../../fastDomNode.js';\nimport { StandardWheelEvent } from '../../mouseEvent.js';\nimport { HorizontalScrollbar } from './horizontalScrollbar.js';\nimport { VerticalScrollbar } from './verticalScrollbar.js';\nimport { Widget } from '../widget.js';\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { Emitter } from '../../../common/event.js';\nimport { dispose } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport './media/scrollbars.css';\nconst HIDE_TIMEOUT = 500;\nconst SCROLL_WHEEL_SENSITIVITY = 50;\nconst SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED = true;\nclass MouseWheelClassifierItem {\n    constructor(timestamp, deltaX, deltaY) {\n        this.timestamp = timestamp;\n        this.deltaX = deltaX;\n        this.deltaY = deltaY;\n        this.score = 0;\n    }\n}\nexport class MouseWheelClassifier {\n    constructor() {\n        this._capacity = 5;\n        this._memory = [];\n        this._front = -1;\n        this._rear = -1;\n    }\n    isPhysicalMouseWheel() {\n        if (this._front === -1 && this._rear === -1) {\n            // no elements\n            return false;\n        }\n        // 0.5 * last + 0.25 * 2nd last + 0.125 * 3rd last + ...\n        let remainingInfluence = 1;\n        let score = 0;\n        let iteration = 1;\n        let index = this._rear;\n        do {\n            const influence = (index === this._front ? remainingInfluence : Math.pow(2, -iteration));\n            remainingInfluence -= influence;\n            score += this._memory[index].score * influence;\n            if (index === this._front) {\n                break;\n            }\n            index = (this._capacity + index - 1) % this._capacity;\n            iteration++;\n        } while (true);\n        return (score <= 0.5);\n    }\n    acceptStandardWheelEvent(e) {\n        const osZoomFactor = window.devicePixelRatio / getZoomFactor();\n        if (platform.isWindows || platform.isLinux) {\n            // On Windows and Linux, the incoming delta events are multiplied with the OS zoom factor.\n            // The OS zoom factor can be reverse engineered by using the device pixel ratio and the configured zoom factor into account.\n            this.accept(Date.now(), e.deltaX / osZoomFactor, e.deltaY / osZoomFactor);\n        }\n        else {\n            this.accept(Date.now(), e.deltaX, e.deltaY);\n        }\n    }\n    accept(timestamp, deltaX, deltaY) {\n        const item = new MouseWheelClassifierItem(timestamp, deltaX, deltaY);\n        item.score = this._computeScore(item);\n        if (this._front === -1 && this._rear === -1) {\n            this._memory[0] = item;\n            this._front = 0;\n            this._rear = 0;\n        }\n        else {\n            this._rear = (this._rear + 1) % this._capacity;\n            if (this._rear === this._front) {\n                // Drop oldest\n                this._front = (this._front + 1) % this._capacity;\n            }\n            this._memory[this._rear] = item;\n        }\n    }\n    /**\n     * A score between 0 and 1 for `item`.\n     *  - a score towards 0 indicates that the source appears to be a physical mouse wheel\n     *  - a score towards 1 indicates that the source appears to be a touchpad or magic mouse, etc.\n     */\n    _computeScore(item) {\n        if (Math.abs(item.deltaX) > 0 && Math.abs(item.deltaY) > 0) {\n            // both axes exercised => definitely not a physical mouse wheel\n            return 1;\n        }\n        let score = 0.5;\n        const prev = (this._front === -1 && this._rear === -1 ? null : this._memory[this._rear]);\n        if (prev) {\n            // const deltaT = item.timestamp - prev.timestamp;\n            // if (deltaT < 1000 / 30) {\n            // \t// sooner than X times per second => indicator that this is not a physical mouse wheel\n            // \tscore += 0.25;\n            // }\n            // if (item.deltaX === prev.deltaX && item.deltaY === prev.deltaY) {\n            // \t// equal amplitude => indicator that this is a physical mouse wheel\n            // \tscore -= 0.25;\n            // }\n        }\n        if (!this._isAlmostInt(item.deltaX) || !this._isAlmostInt(item.deltaY)) {\n            // non-integer deltas => indicator that this is not a physical mouse wheel\n            score += 0.25;\n        }\n        return Math.min(Math.max(score, 0), 1);\n    }\n    _isAlmostInt(value) {\n        const delta = Math.abs(Math.round(value) - value);\n        return (delta < 0.01);\n    }\n}\nMouseWheelClassifier.INSTANCE = new MouseWheelClassifier();\nexport class AbstractScrollableElement extends Widget {\n    get options() {\n        return this._options;\n    }\n    constructor(element, options, scrollable) {\n        super();\n        this._onScroll = this._register(new Emitter());\n        this.onScroll = this._onScroll.event;\n        this._onWillScroll = this._register(new Emitter());\n        element.style.overflow = 'hidden';\n        this._options = resolveOptions(options);\n        this._scrollable = scrollable;\n        this._register(this._scrollable.onScroll((e) => {\n            this._onWillScroll.fire(e);\n            this._onDidScroll(e);\n            this._onScroll.fire(e);\n        }));\n        const scrollbarHost = {\n            onMouseWheel: (mouseWheelEvent) => this._onMouseWheel(mouseWheelEvent),\n            onDragStart: () => this._onDragStart(),\n            onDragEnd: () => this._onDragEnd(),\n        };\n        this._verticalScrollbar = this._register(new VerticalScrollbar(this._scrollable, this._options, scrollbarHost));\n        this._horizontalScrollbar = this._register(new HorizontalScrollbar(this._scrollable, this._options, scrollbarHost));\n        this._domNode = document.createElement('div');\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n        this._domNode.setAttribute('role', 'presentation');\n        this._domNode.style.position = 'relative';\n        this._domNode.style.overflow = 'hidden';\n        this._domNode.appendChild(element);\n        this._domNode.appendChild(this._horizontalScrollbar.domNode.domNode);\n        this._domNode.appendChild(this._verticalScrollbar.domNode.domNode);\n        if (this._options.useShadows) {\n            this._leftShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._leftShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._leftShadowDomNode.domNode);\n            this._topShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._topShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._topShadowDomNode.domNode);\n            this._topLeftShadowDomNode = createFastDomNode(document.createElement('div'));\n            this._topLeftShadowDomNode.setClassName('shadow');\n            this._domNode.appendChild(this._topLeftShadowDomNode.domNode);\n        }\n        else {\n            this._leftShadowDomNode = null;\n            this._topShadowDomNode = null;\n            this._topLeftShadowDomNode = null;\n        }\n        this._listenOnDomNode = this._options.listenOnDomNode || this._domNode;\n        this._mouseWheelToDispose = [];\n        this._setListeningToMouseWheel(this._options.handleMouseWheel);\n        this.onmouseover(this._listenOnDomNode, (e) => this._onMouseOver(e));\n        this.onmouseleave(this._listenOnDomNode, (e) => this._onMouseLeave(e));\n        this._hideTimeout = this._register(new TimeoutTimer());\n        this._isDragging = false;\n        this._mouseIsOver = false;\n        this._shouldRender = true;\n        this._revealOnScroll = true;\n    }\n    dispose() {\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\n        super.dispose();\n    }\n    /**\n     * Get the generated 'scrollable' dom node\n     */\n    getDomNode() {\n        return this._domNode;\n    }\n    getOverviewRulerLayoutInfo() {\n        return {\n            parent: this._domNode,\n            insertBefore: this._verticalScrollbar.domNode.domNode,\n        };\n    }\n    /**\n     * Delegate a pointer down event to the vertical scrollbar.\n     * This is to help with clicking somewhere else and having the scrollbar react.\n     */\n    delegateVerticalScrollbarPointerDown(browserEvent) {\n        this._verticalScrollbar.delegatePointerDown(browserEvent);\n    }\n    getScrollDimensions() {\n        return this._scrollable.getScrollDimensions();\n    }\n    setScrollDimensions(dimensions) {\n        this._scrollable.setScrollDimensions(dimensions, false);\n    }\n    /**\n     * Update the class name of the scrollable element.\n     */\n    updateClassName(newClassName) {\n        this._options.className = newClassName;\n        // Defaults are different on Macs\n        if (platform.isMacintosh) {\n            this._options.className += ' mac';\n        }\n        this._domNode.className = 'monaco-scrollable-element ' + this._options.className;\n    }\n    /**\n     * Update configuration options for the scrollbar.\n     */\n    updateOptions(newOptions) {\n        if (typeof newOptions.handleMouseWheel !== 'undefined') {\n            this._options.handleMouseWheel = newOptions.handleMouseWheel;\n            this._setListeningToMouseWheel(this._options.handleMouseWheel);\n        }\n        if (typeof newOptions.mouseWheelScrollSensitivity !== 'undefined') {\n            this._options.mouseWheelScrollSensitivity = newOptions.mouseWheelScrollSensitivity;\n        }\n        if (typeof newOptions.fastScrollSensitivity !== 'undefined') {\n            this._options.fastScrollSensitivity = newOptions.fastScrollSensitivity;\n        }\n        if (typeof newOptions.scrollPredominantAxis !== 'undefined') {\n            this._options.scrollPredominantAxis = newOptions.scrollPredominantAxis;\n        }\n        if (typeof newOptions.horizontal !== 'undefined') {\n            this._options.horizontal = newOptions.horizontal;\n        }\n        if (typeof newOptions.vertical !== 'undefined') {\n            this._options.vertical = newOptions.vertical;\n        }\n        if (typeof newOptions.horizontalScrollbarSize !== 'undefined') {\n            this._options.horizontalScrollbarSize = newOptions.horizontalScrollbarSize;\n        }\n        if (typeof newOptions.verticalScrollbarSize !== 'undefined') {\n            this._options.verticalScrollbarSize = newOptions.verticalScrollbarSize;\n        }\n        if (typeof newOptions.scrollByPage !== 'undefined') {\n            this._options.scrollByPage = newOptions.scrollByPage;\n        }\n        this._horizontalScrollbar.updateOptions(this._options);\n        this._verticalScrollbar.updateOptions(this._options);\n        if (!this._options.lazyRender) {\n            this._render();\n        }\n    }\n    delegateScrollFromMouseWheelEvent(browserEvent) {\n        this._onMouseWheel(new StandardWheelEvent(browserEvent));\n    }\n    // -------------------- mouse wheel scrolling --------------------\n    _setListeningToMouseWheel(shouldListen) {\n        const isListening = (this._mouseWheelToDispose.length > 0);\n        if (isListening === shouldListen) {\n            // No change\n            return;\n        }\n        // Stop listening (if necessary)\n        this._mouseWheelToDispose = dispose(this._mouseWheelToDispose);\n        // Start listening (if necessary)\n        if (shouldListen) {\n            const onMouseWheel = (browserEvent) => {\n                this._onMouseWheel(new StandardWheelEvent(browserEvent));\n            };\n            this._mouseWheelToDispose.push(dom.addDisposableListener(this._listenOnDomNode, dom.EventType.MOUSE_WHEEL, onMouseWheel, { passive: false }));\n        }\n    }\n    _onMouseWheel(e) {\n        var _a;\n        if ((_a = e.browserEvent) === null || _a === void 0 ? void 0 : _a.defaultPrevented) {\n            return;\n        }\n        const classifier = MouseWheelClassifier.INSTANCE;\n        if (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED) {\n            classifier.acceptStandardWheelEvent(e);\n        }\n        // console.log(`${Date.now()}, ${e.deltaY}, ${e.deltaX}`);\n        let didScroll = false;\n        if (e.deltaY || e.deltaX) {\n            let deltaY = e.deltaY * this._options.mouseWheelScrollSensitivity;\n            let deltaX = e.deltaX * this._options.mouseWheelScrollSensitivity;\n            if (this._options.scrollPredominantAxis) {\n                if (Math.abs(deltaY) >= Math.abs(deltaX)) {\n                    deltaX = 0;\n                }\n                else {\n                    deltaY = 0;\n                }\n            }\n            if (this._options.flipAxes) {\n                [deltaY, deltaX] = [deltaX, deltaY];\n            }\n            // Convert vertical scrolling to horizontal if shift is held, this\n            // is handled at a higher level on Mac\n            const shiftConvert = !platform.isMacintosh && e.browserEvent && e.browserEvent.shiftKey;\n            if ((this._options.scrollYToX || shiftConvert) && !deltaX) {\n                deltaX = deltaY;\n                deltaY = 0;\n            }\n            if (e.browserEvent && e.browserEvent.altKey) {\n                // fastScrolling\n                deltaX = deltaX * this._options.fastScrollSensitivity;\n                deltaY = deltaY * this._options.fastScrollSensitivity;\n            }\n            const futureScrollPosition = this._scrollable.getFutureScrollPosition();\n            let desiredScrollPosition = {};\n            if (deltaY) {\n                const deltaScrollTop = SCROLL_WHEEL_SENSITIVITY * deltaY;\n                // Here we convert values such as -0.3 to -1 or 0.3 to 1, otherwise low speed scrolling will never scroll\n                const desiredScrollTop = futureScrollPosition.scrollTop - (deltaScrollTop < 0 ? Math.floor(deltaScrollTop) : Math.ceil(deltaScrollTop));\n                this._verticalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollTop);\n            }\n            if (deltaX) {\n                const deltaScrollLeft = SCROLL_WHEEL_SENSITIVITY * deltaX;\n                // Here we convert values such as -0.3 to -1 or 0.3 to 1, otherwise low speed scrolling will never scroll\n                const desiredScrollLeft = futureScrollPosition.scrollLeft - (deltaScrollLeft < 0 ? Math.floor(deltaScrollLeft) : Math.ceil(deltaScrollLeft));\n                this._horizontalScrollbar.writeScrollPosition(desiredScrollPosition, desiredScrollLeft);\n            }\n            // Check that we are scrolling towards a location which is valid\n            desiredScrollPosition = this._scrollable.validateScrollPosition(desiredScrollPosition);\n            if (futureScrollPosition.scrollLeft !== desiredScrollPosition.scrollLeft || futureScrollPosition.scrollTop !== desiredScrollPosition.scrollTop) {\n                const canPerformSmoothScroll = (SCROLL_WHEEL_SMOOTH_SCROLL_ENABLED\n                    && this._options.mouseWheelSmoothScroll\n                    && classifier.isPhysicalMouseWheel());\n                if (canPerformSmoothScroll) {\n                    this._scrollable.setScrollPositionSmooth(desiredScrollPosition);\n                }\n                else {\n                    this._scrollable.setScrollPositionNow(desiredScrollPosition);\n                }\n                didScroll = true;\n            }\n        }\n        let consumeMouseWheel = didScroll;\n        if (!consumeMouseWheel && this._options.alwaysConsumeMouseWheel) {\n            consumeMouseWheel = true;\n        }\n        if (!consumeMouseWheel && this._options.consumeMouseWheelIfScrollbarIsNeeded && (this._verticalScrollbar.isNeeded() || this._horizontalScrollbar.isNeeded())) {\n            consumeMouseWheel = true;\n        }\n        if (consumeMouseWheel) {\n            e.preventDefault();\n            e.stopPropagation();\n        }\n    }\n    _onDidScroll(e) {\n        this._shouldRender = this._horizontalScrollbar.onDidScroll(e) || this._shouldRender;\n        this._shouldRender = this._verticalScrollbar.onDidScroll(e) || this._shouldRender;\n        if (this._options.useShadows) {\n            this._shouldRender = true;\n        }\n        if (this._revealOnScroll) {\n            this._reveal();\n        }\n        if (!this._options.lazyRender) {\n            this._render();\n        }\n    }\n    /**\n     * Render / mutate the DOM now.\n     * Should be used together with the ctor option `lazyRender`.\n     */\n    renderNow() {\n        if (!this._options.lazyRender) {\n            throw new Error('Please use `lazyRender` together with `renderNow`!');\n        }\n        this._render();\n    }\n    _render() {\n        if (!this._shouldRender) {\n            return;\n        }\n        this._shouldRender = false;\n        this._horizontalScrollbar.render();\n        this._verticalScrollbar.render();\n        if (this._options.useShadows) {\n            const scrollState = this._scrollable.getCurrentScrollPosition();\n            const enableTop = scrollState.scrollTop > 0;\n            const enableLeft = scrollState.scrollLeft > 0;\n            const leftClassName = (enableLeft ? ' left' : '');\n            const topClassName = (enableTop ? ' top' : '');\n            const topLeftClassName = (enableLeft || enableTop ? ' top-left-corner' : '');\n            this._leftShadowDomNode.setClassName(`shadow${leftClassName}`);\n            this._topShadowDomNode.setClassName(`shadow${topClassName}`);\n            this._topLeftShadowDomNode.setClassName(`shadow${topLeftClassName}${topClassName}${leftClassName}`);\n        }\n    }\n    // -------------------- fade in / fade out --------------------\n    _onDragStart() {\n        this._isDragging = true;\n        this._reveal();\n    }\n    _onDragEnd() {\n        this._isDragging = false;\n        this._hide();\n    }\n    _onMouseLeave(e) {\n        this._mouseIsOver = false;\n        this._hide();\n    }\n    _onMouseOver(e) {\n        this._mouseIsOver = true;\n        this._reveal();\n    }\n    _reveal() {\n        this._verticalScrollbar.beginReveal();\n        this._horizontalScrollbar.beginReveal();\n        this._scheduleHide();\n    }\n    _hide() {\n        if (!this._mouseIsOver && !this._isDragging) {\n            this._verticalScrollbar.beginHide();\n            this._horizontalScrollbar.beginHide();\n        }\n    }\n    _scheduleHide() {\n        if (!this._mouseIsOver && !this._isDragging) {\n            this._hideTimeout.cancelAndSet(() => this._hide(), HIDE_TIMEOUT);\n        }\n    }\n}\nexport class ScrollableElement extends AbstractScrollableElement {\n    constructor(element, options) {\n        options = options || {};\n        options.mouseWheelSmoothScroll = false;\n        const scrollable = new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 0,\n            scheduleAtNextAnimationFrame: (callback) => dom.scheduleAtNextAnimationFrame(callback)\n        });\n        super(element, options, scrollable);\n        this._register(scrollable);\n    }\n    setScrollPosition(update) {\n        this._scrollable.setScrollPositionNow(update);\n    }\n}\nexport class SmoothScrollableElement extends AbstractScrollableElement {\n    constructor(element, options, scrollable) {\n        super(element, options, scrollable);\n    }\n    setScrollPosition(update) {\n        if (update.reuseAnimation) {\n            this._scrollable.setScrollPositionSmooth(update, update.reuseAnimation);\n        }\n        else {\n            this._scrollable.setScrollPositionNow(update);\n        }\n    }\n    getScrollPosition() {\n        return this._scrollable.getCurrentScrollPosition();\n    }\n}\nexport class DomScrollableElement extends AbstractScrollableElement {\n    constructor(element, options) {\n        options = options || {};\n        options.mouseWheelSmoothScroll = false;\n        const scrollable = new Scrollable({\n            forceIntegerValues: false,\n            smoothScrollDuration: 0,\n            scheduleAtNextAnimationFrame: (callback) => dom.scheduleAtNextAnimationFrame(callback)\n        });\n        super(element, options, scrollable);\n        this._register(scrollable);\n        this._element = element;\n        this.onScroll((e) => {\n            if (e.scrollTopChanged) {\n                this._element.scrollTop = e.scrollTop;\n            }\n            if (e.scrollLeftChanged) {\n                this._element.scrollLeft = e.scrollLeft;\n            }\n        });\n        this.scanDomNode();\n    }\n    setScrollPosition(update) {\n        this._scrollable.setScrollPositionNow(update);\n    }\n    getScrollPosition() {\n        return this._scrollable.getCurrentScrollPosition();\n    }\n    scanDomNode() {\n        // width, scrollLeft, scrollWidth, height, scrollTop, scrollHeight\n        this.setScrollDimensions({\n            width: this._element.clientWidth,\n            scrollWidth: this._element.scrollWidth,\n            height: this._element.clientHeight,\n            scrollHeight: this._element.scrollHeight\n        });\n        this.setScrollPosition({\n            scrollLeft: this._element.scrollLeft,\n            scrollTop: this._element.scrollTop,\n        });\n    }\n}\nfunction resolveOptions(opts) {\n    const result = {\n        lazyRender: (typeof opts.lazyRender !== 'undefined' ? opts.lazyRender : false),\n        className: (typeof opts.className !== 'undefined' ? opts.className : ''),\n        useShadows: (typeof opts.useShadows !== 'undefined' ? opts.useShadows : true),\n        handleMouseWheel: (typeof opts.handleMouseWheel !== 'undefined' ? opts.handleMouseWheel : true),\n        flipAxes: (typeof opts.flipAxes !== 'undefined' ? opts.flipAxes : false),\n        consumeMouseWheelIfScrollbarIsNeeded: (typeof opts.consumeMouseWheelIfScrollbarIsNeeded !== 'undefined' ? opts.consumeMouseWheelIfScrollbarIsNeeded : false),\n        alwaysConsumeMouseWheel: (typeof opts.alwaysConsumeMouseWheel !== 'undefined' ? opts.alwaysConsumeMouseWheel : false),\n        scrollYToX: (typeof opts.scrollYToX !== 'undefined' ? opts.scrollYToX : false),\n        mouseWheelScrollSensitivity: (typeof opts.mouseWheelScrollSensitivity !== 'undefined' ? opts.mouseWheelScrollSensitivity : 1),\n        fastScrollSensitivity: (typeof opts.fastScrollSensitivity !== 'undefined' ? opts.fastScrollSensitivity : 5),\n        scrollPredominantAxis: (typeof opts.scrollPredominantAxis !== 'undefined' ? opts.scrollPredominantAxis : true),\n        mouseWheelSmoothScroll: (typeof opts.mouseWheelSmoothScroll !== 'undefined' ? opts.mouseWheelSmoothScroll : true),\n        arrowSize: (typeof opts.arrowSize !== 'undefined' ? opts.arrowSize : 11),\n        listenOnDomNode: (typeof opts.listenOnDomNode !== 'undefined' ? opts.listenOnDomNode : null),\n        horizontal: (typeof opts.horizontal !== 'undefined' ? opts.horizontal : 1 /* ScrollbarVisibility.Auto */),\n        horizontalScrollbarSize: (typeof opts.horizontalScrollbarSize !== 'undefined' ? opts.horizontalScrollbarSize : 10),\n        horizontalSliderSize: (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : 0),\n        horizontalHasArrows: (typeof opts.horizontalHasArrows !== 'undefined' ? opts.horizontalHasArrows : false),\n        vertical: (typeof opts.vertical !== 'undefined' ? opts.vertical : 1 /* ScrollbarVisibility.Auto */),\n        verticalScrollbarSize: (typeof opts.verticalScrollbarSize !== 'undefined' ? opts.verticalScrollbarSize : 10),\n        verticalHasArrows: (typeof opts.verticalHasArrows !== 'undefined' ? opts.verticalHasArrows : false),\n        verticalSliderSize: (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : 0),\n        scrollByPage: (typeof opts.scrollByPage !== 'undefined' ? opts.scrollByPage : false)\n    };\n    result.horizontalSliderSize = (typeof opts.horizontalSliderSize !== 'undefined' ? opts.horizontalSliderSize : result.horizontalScrollbarSize);\n    result.verticalSliderSize = (typeof opts.verticalSliderSize !== 'undefined' ? opts.verticalSliderSize : result.verticalScrollbarSize);\n    // Defaults are different on Macs\n    if (platform.isMacintosh) {\n        result.className += ' mac';\n    }\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/**\n * The minimal size of the slider (such that it can still be clickable) -- it is artificially enlarged.\n */\nconst MINIMUM_SLIDER_SIZE = 20;\nexport class ScrollbarState {\n    constructor(arrowSize, scrollbarSize, oppositeScrollbarSize, visibleSize, scrollSize, scrollPosition) {\n        this._scrollbarSize = Math.round(scrollbarSize);\n        this._oppositeScrollbarSize = Math.round(oppositeScrollbarSize);\n        this._arrowSize = Math.round(arrowSize);\n        this._visibleSize = visibleSize;\n        this._scrollSize = scrollSize;\n        this._scrollPosition = scrollPosition;\n        this._computedAvailableSize = 0;\n        this._computedIsNeeded = false;\n        this._computedSliderSize = 0;\n        this._computedSliderRatio = 0;\n        this._computedSliderPosition = 0;\n        this._refreshComputedValues();\n    }\n    clone() {\n        return new ScrollbarState(this._arrowSize, this._scrollbarSize, this._oppositeScrollbarSize, this._visibleSize, this._scrollSize, this._scrollPosition);\n    }\n    setVisibleSize(visibleSize) {\n        const iVisibleSize = Math.round(visibleSize);\n        if (this._visibleSize !== iVisibleSize) {\n            this._visibleSize = iVisibleSize;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollSize(scrollSize) {\n        const iScrollSize = Math.round(scrollSize);\n        if (this._scrollSize !== iScrollSize) {\n            this._scrollSize = iScrollSize;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollPosition(scrollPosition) {\n        const iScrollPosition = Math.round(scrollPosition);\n        if (this._scrollPosition !== iScrollPosition) {\n            this._scrollPosition = iScrollPosition;\n            this._refreshComputedValues();\n            return true;\n        }\n        return false;\n    }\n    setScrollbarSize(scrollbarSize) {\n        this._scrollbarSize = Math.round(scrollbarSize);\n    }\n    setOppositeScrollbarSize(oppositeScrollbarSize) {\n        this._oppositeScrollbarSize = Math.round(oppositeScrollbarSize);\n    }\n    static _computeValues(oppositeScrollbarSize, arrowSize, visibleSize, scrollSize, scrollPosition) {\n        const computedAvailableSize = Math.max(0, visibleSize - oppositeScrollbarSize);\n        const computedRepresentableSize = Math.max(0, computedAvailableSize - 2 * arrowSize);\n        const computedIsNeeded = (scrollSize > 0 && scrollSize > visibleSize);\n        if (!computedIsNeeded) {\n            // There is no need for a slider\n            return {\n                computedAvailableSize: Math.round(computedAvailableSize),\n                computedIsNeeded: computedIsNeeded,\n                computedSliderSize: Math.round(computedRepresentableSize),\n                computedSliderRatio: 0,\n                computedSliderPosition: 0,\n            };\n        }\n        // We must artificially increase the size of the slider if needed, since the slider would be too small to grab with the mouse otherwise\n        const computedSliderSize = Math.round(Math.max(MINIMUM_SLIDER_SIZE, Math.floor(visibleSize * computedRepresentableSize / scrollSize)));\n        // The slider can move from 0 to `computedRepresentableSize` - `computedSliderSize`\n        // in the same way `scrollPosition` can move from 0 to `scrollSize` - `visibleSize`.\n        const computedSliderRatio = (computedRepresentableSize - computedSliderSize) / (scrollSize - visibleSize);\n        const computedSliderPosition = (scrollPosition * computedSliderRatio);\n        return {\n            computedAvailableSize: Math.round(computedAvailableSize),\n            computedIsNeeded: computedIsNeeded,\n            computedSliderSize: Math.round(computedSliderSize),\n            computedSliderRatio: computedSliderRatio,\n            computedSliderPosition: Math.round(computedSliderPosition),\n        };\n    }\n    _refreshComputedValues() {\n        const r = ScrollbarState._computeValues(this._oppositeScrollbarSize, this._arrowSize, this._visibleSize, this._scrollSize, this._scrollPosition);\n        this._computedAvailableSize = r.computedAvailableSize;\n        this._computedIsNeeded = r.computedIsNeeded;\n        this._computedSliderSize = r.computedSliderSize;\n        this._computedSliderRatio = r.computedSliderRatio;\n        this._computedSliderPosition = r.computedSliderPosition;\n    }\n    getArrowSize() {\n        return this._arrowSize;\n    }\n    getScrollPosition() {\n        return this._scrollPosition;\n    }\n    getRectangleLargeSize() {\n        return this._computedAvailableSize;\n    }\n    getRectangleSmallSize() {\n        return this._scrollbarSize;\n    }\n    isNeeded() {\n        return this._computedIsNeeded;\n    }\n    getSliderSize() {\n        return this._computedSliderSize;\n    }\n    getSliderPosition() {\n        return this._computedSliderPosition;\n    }\n    /**\n     * Compute a desired `scrollPosition` such that `offset` ends up in the center of the slider.\n     * `offset` is based on the same coordinate system as the `sliderPosition`.\n     */\n    getDesiredScrollPositionFromOffset(offset) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const desiredSliderPosition = offset - this._arrowSize - this._computedSliderSize / 2;\n        return Math.round(desiredSliderPosition / this._computedSliderRatio);\n    }\n    /**\n     * Compute a desired `scrollPosition` from if offset is before or after the slider position.\n     * If offset is before slider, treat as a page up (or left).  If after, page down (or right).\n     * `offset` and `_computedSliderPosition` are based on the same coordinate system.\n     * `_visibleSize` corresponds to a \"page\" of lines in the returned coordinate system.\n     */\n    getDesiredScrollPositionFromOffsetPaged(offset) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const correctedOffset = offset - this._arrowSize; // compensate if has arrows\n        let desiredScrollPosition = this._scrollPosition;\n        if (correctedOffset < this._computedSliderPosition) {\n            desiredScrollPosition -= this._visibleSize; // page up/left\n        }\n        else {\n            desiredScrollPosition += this._visibleSize; // page down/right\n        }\n        return desiredScrollPosition;\n    }\n    /**\n     * Compute a desired `scrollPosition` such that the slider moves by `delta`.\n     */\n    getDesiredScrollPositionFromDelta(delta) {\n        if (!this._computedIsNeeded) {\n            // no need for a slider\n            return 0;\n        }\n        const desiredSliderPosition = this._computedSliderPosition + delta;\n        return Math.round(desiredSliderPosition / this._computedSliderRatio);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { renderMarkdown } from '../../markdownRenderer.js';\nimport { List } from '../list/listWidget.js';\nimport * as arrays from '../../../common/arrays.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { KeyCodeUtils } from '../../../common/keyCodes.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './selectBoxCustom.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nconst SELECT_OPTION_ENTRY_TEMPLATE_ID = 'selectOption.entry.template';\nclass SelectListRenderer {\n    get templateId() { return SELECT_OPTION_ENTRY_TEMPLATE_ID; }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.root = container;\n        data.text = dom.append(container, $('.option-text'));\n        data.detail = dom.append(container, $('.option-detail'));\n        data.decoratorRight = dom.append(container, $('.option-decorator-right'));\n        return data;\n    }\n    renderElement(element, index, templateData) {\n        const data = templateData;\n        const text = element.text;\n        const detail = element.detail;\n        const decoratorRight = element.decoratorRight;\n        const isDisabled = element.isDisabled;\n        data.text.textContent = text;\n        data.detail.textContent = !!detail ? detail : '';\n        data.decoratorRight.innerText = !!decoratorRight ? decoratorRight : '';\n        // pseudo-select disabled option\n        if (isDisabled) {\n            data.root.classList.add('option-disabled');\n        }\n        else {\n            // Make sure we do class removal from prior template rendering\n            data.root.classList.remove('option-disabled');\n        }\n    }\n    disposeTemplate(_templateData) {\n        // noop\n    }\n}\nexport class SelectBoxList extends Disposable {\n    constructor(options, selected, contextViewProvider, styles, selectBoxOptions) {\n        super();\n        this.options = [];\n        this._currentSelection = 0;\n        this._hasDetails = false;\n        this._skipLayout = false;\n        this._sticky = false; // for dev purposes only\n        this._isVisible = false;\n        this.styles = styles;\n        this.selectBoxOptions = selectBoxOptions || Object.create(null);\n        if (typeof this.selectBoxOptions.minBottomMargin !== 'number') {\n            this.selectBoxOptions.minBottomMargin = SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN;\n        }\n        else if (this.selectBoxOptions.minBottomMargin < 0) {\n            this.selectBoxOptions.minBottomMargin = 0;\n        }\n        this.selectElement = document.createElement('select');\n        // Use custom CSS vars for padding calculation\n        this.selectElement.className = 'monaco-select-box monaco-select-box-dropdown-padding';\n        if (typeof this.selectBoxOptions.ariaLabel === 'string') {\n            this.selectElement.setAttribute('aria-label', this.selectBoxOptions.ariaLabel);\n        }\n        if (typeof this.selectBoxOptions.ariaDescription === 'string') {\n            this.selectElement.setAttribute('aria-description', this.selectBoxOptions.ariaDescription);\n        }\n        this._onDidSelect = new Emitter();\n        this._register(this._onDidSelect);\n        this.registerListeners();\n        this.constructSelectDropDown(contextViewProvider);\n        this.selected = selected || 0;\n        if (options) {\n            this.setOptions(options, selected);\n        }\n        this.initStyleSheet();\n    }\n    // IDelegate - List renderer\n    getHeight() {\n        return 22;\n    }\n    getTemplateId() {\n        return SELECT_OPTION_ENTRY_TEMPLATE_ID;\n    }\n    constructSelectDropDown(contextViewProvider) {\n        // SetUp ContextView container to hold select Dropdown\n        this.contextViewProvider = contextViewProvider;\n        this.selectDropDownContainer = dom.$('.monaco-select-box-dropdown-container');\n        // Use custom CSS vars for padding calculation (shared with parent select)\n        this.selectDropDownContainer.classList.add('monaco-select-box-dropdown-padding');\n        // Setup container for select option details\n        this.selectionDetailsPane = dom.append(this.selectDropDownContainer, $('.select-box-details-pane'));\n        // Create span flex box item/div we can measure and control\n        const widthControlOuterDiv = dom.append(this.selectDropDownContainer, $('.select-box-dropdown-container-width-control'));\n        const widthControlInnerDiv = dom.append(widthControlOuterDiv, $('.width-control-div'));\n        this.widthControlElement = document.createElement('span');\n        this.widthControlElement.className = 'option-text-width-control';\n        dom.append(widthControlInnerDiv, this.widthControlElement);\n        // Always default to below position\n        this._dropDownPosition = 0 /* AnchorPosition.BELOW */;\n        // Inline stylesheet for themes\n        this.styleElement = dom.createStyleSheet(this.selectDropDownContainer);\n        // Prevent dragging of dropdown #114329\n        this.selectDropDownContainer.setAttribute('draggable', 'true');\n        this._register(dom.addDisposableListener(this.selectDropDownContainer, dom.EventType.DRAG_START, (e) => {\n            dom.EventHelper.stop(e, true);\n        }));\n    }\n    registerListeners() {\n        // Parent native select keyboard listeners\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'change', (e) => {\n            this.selected = e.target.selectedIndex;\n            this._onDidSelect.fire({\n                index: e.target.selectedIndex,\n                selected: e.target.value\n            });\n            if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                this.selectElement.title = this.options[this.selected].text;\n            }\n        }));\n        // Have to implement both keyboard and mouse controllers to handle disabled options\n        // Intercept mouse events to override normal select actions on parents\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.CLICK, (e) => {\n            dom.EventHelper.stop(e);\n            if (this._isVisible) {\n                this.hideSelectDropDown(true);\n            }\n            else {\n                this.showSelectDropDown();\n            }\n        }));\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.MOUSE_DOWN, (e) => {\n            dom.EventHelper.stop(e);\n        }));\n        // Intercept touch events\n        // The following implementation is slightly different from the mouse event handlers above.\n        // Use the following helper variable, otherwise the list flickers.\n        let listIsVisibleOnTouchStart;\n        this._register(dom.addDisposableListener(this.selectElement, 'touchstart', (e) => {\n            listIsVisibleOnTouchStart = this._isVisible;\n        }));\n        this._register(dom.addDisposableListener(this.selectElement, 'touchend', (e) => {\n            dom.EventHelper.stop(e);\n            if (listIsVisibleOnTouchStart) {\n                this.hideSelectDropDown(true);\n            }\n            else {\n                this.showSelectDropDown();\n            }\n        }));\n        // Intercept keyboard handling\n        this._register(dom.addDisposableListener(this.selectElement, dom.EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            let showDropDown = false;\n            // Create and drop down select list on keyboard select\n            if (isMacintosh) {\n                if (event.keyCode === 18 /* KeyCode.DownArrow */ || event.keyCode === 16 /* KeyCode.UpArrow */ || event.keyCode === 10 /* KeyCode.Space */ || event.keyCode === 3 /* KeyCode.Enter */) {\n                    showDropDown = true;\n                }\n            }\n            else {\n                if (event.keyCode === 18 /* KeyCode.DownArrow */ && event.altKey || event.keyCode === 16 /* KeyCode.UpArrow */ && event.altKey || event.keyCode === 10 /* KeyCode.Space */ || event.keyCode === 3 /* KeyCode.Enter */) {\n                    showDropDown = true;\n                }\n            }\n            if (showDropDown) {\n                this.showSelectDropDown();\n                dom.EventHelper.stop(e, true);\n            }\n        }));\n    }\n    get onDidSelect() {\n        return this._onDidSelect.event;\n    }\n    setOptions(options, selected) {\n        if (!arrays.equals(this.options, options)) {\n            this.options = options;\n            this.selectElement.options.length = 0;\n            this._hasDetails = false;\n            this._cachedMaxDetailsHeight = undefined;\n            this.options.forEach((option, index) => {\n                this.selectElement.add(this.createOption(option.text, index, option.isDisabled));\n                if (typeof option.description === 'string') {\n                    this._hasDetails = true;\n                }\n            });\n        }\n        if (selected !== undefined) {\n            this.select(selected);\n            // Set current = selected since this is not necessarily a user exit\n            this._currentSelection = this.selected;\n        }\n    }\n    setOptionsList() {\n        var _a;\n        // Mirror options in drop-down\n        // Populate select list for non-native select mode\n        (_a = this.selectList) === null || _a === void 0 ? void 0 : _a.splice(0, this.selectList.length, this.options);\n    }\n    select(index) {\n        if (index >= 0 && index < this.options.length) {\n            this.selected = index;\n        }\n        else if (index > this.options.length - 1) {\n            // Adjust index to end of list\n            // This could make client out of sync with the select\n            this.select(this.options.length - 1);\n        }\n        else if (this.selected < 0) {\n            this.selected = 0;\n        }\n        this.selectElement.selectedIndex = this.selected;\n        if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n            this.selectElement.title = this.options[this.selected].text;\n        }\n    }\n    focus() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = 0;\n            this.selectElement.focus();\n        }\n    }\n    blur() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = -1;\n            this.selectElement.blur();\n        }\n    }\n    setFocusable(focusable) {\n        this.selectElement.tabIndex = focusable ? 0 : -1;\n    }\n    render(container) {\n        this.container = container;\n        container.classList.add('select-container');\n        container.appendChild(this.selectElement);\n        this.styleSelectElement();\n    }\n    initStyleSheet() {\n        const content = [];\n        // Style non-native select mode\n        if (this.styles.listFocusBackground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { background-color: ${this.styles.listFocusBackground} !important; }`);\n        }\n        if (this.styles.listFocusForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { color: ${this.styles.listFocusForeground} !important; }`);\n        }\n        if (this.styles.decoratorRightForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.focused) .option-decorator-right { color: ${this.styles.decoratorRightForeground}; }`);\n        }\n        if (this.styles.selectBackground && this.styles.selectBorder && this.styles.selectBorder !== this.styles.selectBackground) {\n            content.push(`.monaco-select-box-dropdown-container { border: 1px solid ${this.styles.selectBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectBorder} } `);\n        }\n        else if (this.styles.selectListBorder) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-top { border-top: 1px solid ${this.styles.selectListBorder} } `);\n            content.push(`.monaco-select-box-dropdown-container > .select-box-details-pane.border-bottom { border-bottom: 1px solid ${this.styles.selectListBorder} } `);\n        }\n        // Hover foreground - ignore for disabled options\n        if (this.styles.listHoverForeground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { color: ${this.styles.listHoverForeground} !important; }`);\n        }\n        // Hover background - ignore for disabled options\n        if (this.styles.listHoverBackground) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { background-color: ${this.styles.listHoverBackground} !important; }`);\n        }\n        // Match quick input outline styles - ignore for disabled options\n        if (this.styles.listFocusOutline) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.focused { outline: 1.6px dotted ${this.styles.listFocusOutline} !important; outline-offset: -1.6px !important; }`);\n        }\n        if (this.styles.listHoverOutline) {\n            content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row:not(.option-disabled):not(.focused):hover { outline: 1.6px dashed ${this.styles.listHoverOutline} !important; outline-offset: -1.6px !important; }`);\n        }\n        // Clear list styles on focus and on hover for disabled options\n        content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled.focused { background-color: transparent !important; color: inherit !important; outline: none !important; }`);\n        content.push(`.monaco-select-box-dropdown-container > .select-box-dropdown-list-container .monaco-list .monaco-list-row.option-disabled:hover { background-color: transparent !important; color: inherit !important; outline: none !important; }`);\n        this.styleElement.textContent = content.join('\\n');\n    }\n    styleSelectElement() {\n        var _a, _b, _c;\n        const background = (_a = this.styles.selectBackground) !== null && _a !== void 0 ? _a : '';\n        const foreground = (_b = this.styles.selectForeground) !== null && _b !== void 0 ? _b : '';\n        const border = (_c = this.styles.selectBorder) !== null && _c !== void 0 ? _c : '';\n        this.selectElement.style.backgroundColor = background;\n        this.selectElement.style.color = foreground;\n        this.selectElement.style.borderColor = border;\n    }\n    styleList() {\n        var _a, _b;\n        const background = (_a = this.styles.selectBackground) !== null && _a !== void 0 ? _a : '';\n        const listBackground = dom.asCssValueWithDefault(this.styles.selectListBackground, background);\n        this.selectDropDownListContainer.style.backgroundColor = listBackground;\n        this.selectionDetailsPane.style.backgroundColor = listBackground;\n        const optionsBorder = (_b = this.styles.focusBorder) !== null && _b !== void 0 ? _b : '';\n        this.selectDropDownContainer.style.outlineColor = optionsBorder;\n        this.selectDropDownContainer.style.outlineOffset = '-1px';\n        this.selectList.style(this.styles);\n    }\n    createOption(value, index, disabled) {\n        const option = document.createElement('option');\n        option.value = value;\n        option.text = value;\n        option.disabled = !!disabled;\n        return option;\n    }\n    // ContextView dropdown methods\n    showSelectDropDown() {\n        this.selectionDetailsPane.innerText = '';\n        if (!this.contextViewProvider || this._isVisible) {\n            return;\n        }\n        // Lazily create and populate list only at open, moved from constructor\n        this.createSelectList(this.selectDropDownContainer);\n        this.setOptionsList();\n        // This allows us to flip the position based on measurement\n        // Set drop-down position above/below from required height and margins\n        // If pre-layout cannot fit at least one option do not show drop-down\n        this.contextViewProvider.showContextView({\n            getAnchor: () => this.selectElement,\n            render: (container) => this.renderSelectDropDown(container, true),\n            layout: () => {\n                this.layoutSelectDropDown();\n            },\n            onHide: () => {\n                this.selectDropDownContainer.classList.remove('visible');\n                this.selectElement.classList.remove('synthetic-focus');\n            },\n            anchorPosition: this._dropDownPosition\n        }, this.selectBoxOptions.optionsAsChildren ? this.container : undefined);\n        // Hide so we can relay out\n        this._isVisible = true;\n        this.hideSelectDropDown(false);\n        this.contextViewProvider.showContextView({\n            getAnchor: () => this.selectElement,\n            render: (container) => this.renderSelectDropDown(container),\n            layout: () => this.layoutSelectDropDown(),\n            onHide: () => {\n                this.selectDropDownContainer.classList.remove('visible');\n                this.selectElement.classList.remove('synthetic-focus');\n            },\n            anchorPosition: this._dropDownPosition\n        }, this.selectBoxOptions.optionsAsChildren ? this.container : undefined);\n        // Track initial selection the case user escape, blur\n        this._currentSelection = this.selected;\n        this._isVisible = true;\n        this.selectElement.setAttribute('aria-expanded', 'true');\n    }\n    hideSelectDropDown(focusSelect) {\n        if (!this.contextViewProvider || !this._isVisible) {\n            return;\n        }\n        this._isVisible = false;\n        this.selectElement.setAttribute('aria-expanded', 'false');\n        if (focusSelect) {\n            this.selectElement.focus();\n        }\n        this.contextViewProvider.hideContextView();\n    }\n    renderSelectDropDown(container, preLayoutPosition) {\n        container.appendChild(this.selectDropDownContainer);\n        // Pre-Layout allows us to change position\n        this.layoutSelectDropDown(preLayoutPosition);\n        return {\n            dispose: () => {\n                // contextView will dispose itself if moving from one View to another\n                try {\n                    container.removeChild(this.selectDropDownContainer); // remove to take out the CSS rules we add\n                }\n                catch (error) {\n                    // Ignore, removed already by change of focus\n                }\n            }\n        };\n    }\n    // Iterate over detailed descriptions, find max height\n    measureMaxDetailsHeight() {\n        let maxDetailsPaneHeight = 0;\n        this.options.forEach((_option, index) => {\n            this.updateDetail(index);\n            if (this.selectionDetailsPane.offsetHeight > maxDetailsPaneHeight) {\n                maxDetailsPaneHeight = this.selectionDetailsPane.offsetHeight;\n            }\n        });\n        return maxDetailsPaneHeight;\n    }\n    layoutSelectDropDown(preLayoutPosition) {\n        // Avoid recursion from layout called in onListFocus\n        if (this._skipLayout) {\n            return false;\n        }\n        // Layout ContextView drop down select list and container\n        // Have to manage our vertical overflow, sizing, position below or above\n        // Position has to be determined and set prior to contextView instantiation\n        if (this.selectList) {\n            // Make visible to enable measurements\n            this.selectDropDownContainer.classList.add('visible');\n            const selectPosition = dom.getDomNodePagePosition(this.selectElement);\n            const styles = getComputedStyle(this.selectElement);\n            const verticalPadding = parseFloat(styles.getPropertyValue('--dropdown-padding-top')) + parseFloat(styles.getPropertyValue('--dropdown-padding-bottom'));\n            const maxSelectDropDownHeightBelow = (window.innerHeight - selectPosition.top - selectPosition.height - (this.selectBoxOptions.minBottomMargin || 0));\n            const maxSelectDropDownHeightAbove = (selectPosition.top - SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN);\n            // Determine optimal width - min(longest option), opt(parent select, excluding margins), max(ContextView controlled)\n            const selectWidth = this.selectElement.offsetWidth;\n            const selectMinWidth = this.setWidthControlElement(this.widthControlElement);\n            const selectOptimalWidth = Math.max(selectMinWidth, Math.round(selectWidth)).toString() + 'px';\n            this.selectDropDownContainer.style.width = selectOptimalWidth;\n            // Get initial list height and determine space above and below\n            this.selectList.getHTMLElement().style.height = '';\n            this.selectList.layout();\n            let listHeight = this.selectList.contentHeight;\n            if (this._hasDetails && this._cachedMaxDetailsHeight === undefined) {\n                this._cachedMaxDetailsHeight = this.measureMaxDetailsHeight();\n            }\n            const maxDetailsPaneHeight = this._hasDetails ? this._cachedMaxDetailsHeight : 0;\n            const minRequiredDropDownHeight = listHeight + verticalPadding + maxDetailsPaneHeight;\n            const maxVisibleOptionsBelow = ((Math.floor((maxSelectDropDownHeightBelow - verticalPadding - maxDetailsPaneHeight) / this.getHeight())));\n            const maxVisibleOptionsAbove = ((Math.floor((maxSelectDropDownHeightAbove - verticalPadding - maxDetailsPaneHeight) / this.getHeight())));\n            // If we are only doing pre-layout check/adjust position only\n            // Calculate vertical space available, flip up if insufficient\n            // Use reflected padding on parent select, ContextView style\n            // properties not available before DOM attachment\n            if (preLayoutPosition) {\n                // Check if select moved out of viewport , do not open\n                // If at least one option cannot be shown, don't open the drop-down or hide/remove if open\n                if ((selectPosition.top + selectPosition.height) > (window.innerHeight - 22)\n                    || selectPosition.top < SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN\n                    || ((maxVisibleOptionsBelow < 1) && (maxVisibleOptionsAbove < 1))) {\n                    // Indicate we cannot open\n                    return false;\n                }\n                // Determine if we have to flip up\n                // Always show complete list items - never more than Max available vertical height\n                if (maxVisibleOptionsBelow < SelectBoxList.DEFAULT_MINIMUM_VISIBLE_OPTIONS\n                    && maxVisibleOptionsAbove > maxVisibleOptionsBelow\n                    && this.options.length > maxVisibleOptionsBelow) {\n                    this._dropDownPosition = 1 /* AnchorPosition.ABOVE */;\n                    this.selectDropDownContainer.removeChild(this.selectDropDownListContainer);\n                    this.selectDropDownContainer.removeChild(this.selectionDetailsPane);\n                    this.selectDropDownContainer.appendChild(this.selectionDetailsPane);\n                    this.selectDropDownContainer.appendChild(this.selectDropDownListContainer);\n                    this.selectionDetailsPane.classList.remove('border-top');\n                    this.selectionDetailsPane.classList.add('border-bottom');\n                }\n                else {\n                    this._dropDownPosition = 0 /* AnchorPosition.BELOW */;\n                    this.selectDropDownContainer.removeChild(this.selectDropDownListContainer);\n                    this.selectDropDownContainer.removeChild(this.selectionDetailsPane);\n                    this.selectDropDownContainer.appendChild(this.selectDropDownListContainer);\n                    this.selectDropDownContainer.appendChild(this.selectionDetailsPane);\n                    this.selectionDetailsPane.classList.remove('border-bottom');\n                    this.selectionDetailsPane.classList.add('border-top');\n                }\n                // Do full layout on showSelectDropDown only\n                return true;\n            }\n            // Check if select out of viewport or cutting into status bar\n            if ((selectPosition.top + selectPosition.height) > (window.innerHeight - 22)\n                || selectPosition.top < SelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN\n                || (this._dropDownPosition === 0 /* AnchorPosition.BELOW */ && maxVisibleOptionsBelow < 1)\n                || (this._dropDownPosition === 1 /* AnchorPosition.ABOVE */ && maxVisibleOptionsAbove < 1)) {\n                // Cannot properly layout, close and hide\n                this.hideSelectDropDown(true);\n                return false;\n            }\n            // SetUp list dimensions and layout - account for container padding\n            // Use position to check above or below available space\n            if (this._dropDownPosition === 0 /* AnchorPosition.BELOW */) {\n                if (this._isVisible && maxVisibleOptionsBelow + maxVisibleOptionsAbove < 1) {\n                    // If drop-down is visible, must be doing a DOM re-layout, hide since we don't fit\n                    // Hide drop-down, hide contextview, focus on parent select\n                    this.hideSelectDropDown(true);\n                    return false;\n                }\n                // Adjust list height to max from select bottom to margin (default/minBottomMargin)\n                if (minRequiredDropDownHeight > maxSelectDropDownHeightBelow) {\n                    listHeight = (maxVisibleOptionsBelow * this.getHeight());\n                }\n            }\n            else {\n                if (minRequiredDropDownHeight > maxSelectDropDownHeightAbove) {\n                    listHeight = (maxVisibleOptionsAbove * this.getHeight());\n                }\n            }\n            // Set adjusted list height and relayout\n            this.selectList.layout(listHeight);\n            this.selectList.domFocus();\n            // Finally set focus on selected item\n            if (this.selectList.length > 0) {\n                this.selectList.setFocus([this.selected || 0]);\n                this.selectList.reveal(this.selectList.getFocus()[0] || 0);\n            }\n            if (this._hasDetails) {\n                // Leave the selectDropDownContainer to size itself according to children (list + details) - #57447\n                this.selectList.getHTMLElement().style.height = (listHeight + verticalPadding) + 'px';\n                this.selectDropDownContainer.style.height = '';\n            }\n            else {\n                this.selectDropDownContainer.style.height = (listHeight + verticalPadding) + 'px';\n            }\n            this.updateDetail(this.selected);\n            this.selectDropDownContainer.style.width = selectOptimalWidth;\n            // Maintain focus outline on parent select as well as list container - tabindex for focus\n            this.selectDropDownListContainer.setAttribute('tabindex', '0');\n            this.selectElement.classList.add('synthetic-focus');\n            this.selectDropDownContainer.classList.add('synthetic-focus');\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    setWidthControlElement(container) {\n        let elementWidth = 0;\n        if (container) {\n            let longest = 0;\n            let longestLength = 0;\n            this.options.forEach((option, index) => {\n                const detailLength = !!option.detail ? option.detail.length : 0;\n                const rightDecoratorLength = !!option.decoratorRight ? option.decoratorRight.length : 0;\n                const len = option.text.length + detailLength + rightDecoratorLength;\n                if (len > longestLength) {\n                    longest = index;\n                    longestLength = len;\n                }\n            });\n            container.textContent = this.options[longest].text + (!!this.options[longest].decoratorRight ? (this.options[longest].decoratorRight + ' ') : '');\n            elementWidth = dom.getTotalWidth(container);\n        }\n        return elementWidth;\n    }\n    createSelectList(parent) {\n        // If we have already constructive list on open, skip\n        if (this.selectList) {\n            return;\n        }\n        // SetUp container for list\n        this.selectDropDownListContainer = dom.append(parent, $('.select-box-dropdown-list-container'));\n        this.listRenderer = new SelectListRenderer();\n        this.selectList = new List('SelectBoxCustom', this.selectDropDownListContainer, this, [this.listRenderer], {\n            useShadows: false,\n            verticalScrollMode: 3 /* ScrollbarVisibility.Visible */,\n            keyboardSupport: false,\n            mouseSupport: false,\n            accessibilityProvider: {\n                getAriaLabel: element => {\n                    let label = element.text;\n                    if (element.detail) {\n                        label += `. ${element.detail}`;\n                    }\n                    if (element.decoratorRight) {\n                        label += `. ${element.decoratorRight}`;\n                    }\n                    if (element.description) {\n                        label += `. ${element.description}`;\n                    }\n                    return label;\n                },\n                getWidgetAriaLabel: () => localize({ key: 'selectBox', comment: ['Behave like native select dropdown element.'] }, \"Select Box\"),\n                getRole: () => isMacintosh ? '' : 'option',\n                getWidgetRole: () => 'listbox'\n            }\n        });\n        if (this.selectBoxOptions.ariaLabel) {\n            this.selectList.ariaLabel = this.selectBoxOptions.ariaLabel;\n        }\n        // SetUp list keyboard controller - control navigation, disabled items, focus\n        const onKeyDown = this._register(new DomEmitter(this.selectDropDownListContainer, 'keydown'));\n        const onSelectDropDownKeyDown = Event.chain(onKeyDown.event)\n            .filter(() => this.selectList.length > 0)\n            .map(e => new StandardKeyboardEvent(e));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 3 /* KeyCode.Enter */).on(e => this.onEnter(e), this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 2 /* KeyCode.Tab */).on(e => this.onEnter(e), this)); // Tab should behave the same as enter, #79339\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 9 /* KeyCode.Escape */).on(e => this.onEscape(e), this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 16 /* KeyCode.UpArrow */).on(e => this.onUpArrow(e), this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 18 /* KeyCode.DownArrow */).on(e => this.onDownArrow(e), this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 12 /* KeyCode.PageDown */).on(this.onPageDown, this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 11 /* KeyCode.PageUp */).on(this.onPageUp, this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 14 /* KeyCode.Home */).on(this.onHome, this));\n        this._register(onSelectDropDownKeyDown.filter(e => e.keyCode === 13 /* KeyCode.End */).on(this.onEnd, this));\n        this._register(onSelectDropDownKeyDown.filter(e => (e.keyCode >= 21 /* KeyCode.Digit0 */ && e.keyCode <= 56 /* KeyCode.KeyZ */) || (e.keyCode >= 85 /* KeyCode.Semicolon */ && e.keyCode <= 113 /* KeyCode.NumpadDivide */)).on(this.onCharacter, this));\n        // SetUp list mouse controller - control navigation, disabled items, focus\n        this._register(dom.addDisposableListener(this.selectList.getHTMLElement(), dom.EventType.POINTER_UP, e => this.onPointerUp(e)));\n        this._register(this.selectList.onMouseOver(e => typeof e.index !== 'undefined' && this.selectList.setFocus([e.index])));\n        this._register(this.selectList.onDidChangeFocus(e => this.onListFocus(e)));\n        this._register(dom.addDisposableListener(this.selectDropDownContainer, dom.EventType.FOCUS_OUT, e => {\n            if (!this._isVisible || dom.isAncestor(e.relatedTarget, this.selectDropDownContainer)) {\n                return;\n            }\n            this.onListBlur();\n        }));\n        this.selectList.getHTMLElement().setAttribute('aria-label', this.selectBoxOptions.ariaLabel || '');\n        this.selectList.getHTMLElement().setAttribute('aria-expanded', 'true');\n        this.styleList();\n    }\n    // List methods\n    // List mouse controller - active exit, select option, fire onDidSelect if change, return focus to parent select\n    // Also takes in touchend events\n    onPointerUp(e) {\n        if (!this.selectList.length) {\n            return;\n        }\n        dom.EventHelper.stop(e);\n        const target = e.target;\n        if (!target) {\n            return;\n        }\n        // Check our mouse event is on an option (not scrollbar)\n        if (target.classList.contains('slider')) {\n            return;\n        }\n        const listRowElement = target.closest('.monaco-list-row');\n        if (!listRowElement) {\n            return;\n        }\n        const index = Number(listRowElement.getAttribute('data-index'));\n        const disabled = listRowElement.classList.contains('option-disabled');\n        // Ignore mouse selection of disabled options\n        if (index >= 0 && index < this.options.length && !disabled) {\n            this.selected = index;\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n            // Only fire if selection change\n            if (this.selected !== this._currentSelection) {\n                // Set current = selected\n                this._currentSelection = this.selected;\n                this._onDidSelect.fire({\n                    index: this.selectElement.selectedIndex,\n                    selected: this.options[this.selected].text\n                });\n                if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                    this.selectElement.title = this.options[this.selected].text;\n                }\n            }\n            this.hideSelectDropDown(true);\n        }\n    }\n    // List Exit - passive - implicit no selection change, hide drop-down\n    onListBlur() {\n        if (this._sticky) {\n            return;\n        }\n        if (this.selected !== this._currentSelection) {\n            // Reset selected to current if no change\n            this.select(this._currentSelection);\n        }\n        this.hideSelectDropDown(false);\n    }\n    renderDescriptionMarkdown(text, actionHandler) {\n        const cleanRenderedMarkdown = (element) => {\n            for (let i = 0; i < element.childNodes.length; i++) {\n                const child = element.childNodes.item(i);\n                const tagName = child.tagName && child.tagName.toLowerCase();\n                if (tagName === 'img') {\n                    element.removeChild(child);\n                }\n                else {\n                    cleanRenderedMarkdown(child);\n                }\n            }\n        };\n        const rendered = renderMarkdown({ value: text, supportThemeIcons: true }, { actionHandler });\n        rendered.element.classList.add('select-box-description-markdown');\n        cleanRenderedMarkdown(rendered.element);\n        return rendered.element;\n    }\n    // List Focus Change - passive - update details pane with newly focused element's data\n    onListFocus(e) {\n        // Skip during initial layout\n        if (!this._isVisible || !this._hasDetails) {\n            return;\n        }\n        this.updateDetail(e.indexes[0]);\n    }\n    updateDetail(selectedIndex) {\n        var _a, _b;\n        this.selectionDetailsPane.innerText = '';\n        const option = this.options[selectedIndex];\n        const description = (_a = option === null || option === void 0 ? void 0 : option.description) !== null && _a !== void 0 ? _a : '';\n        const descriptionIsMarkdown = (_b = option === null || option === void 0 ? void 0 : option.descriptionIsMarkdown) !== null && _b !== void 0 ? _b : false;\n        if (description) {\n            if (descriptionIsMarkdown) {\n                const actionHandler = option.descriptionMarkdownActionHandler;\n                this.selectionDetailsPane.appendChild(this.renderDescriptionMarkdown(description, actionHandler));\n            }\n            else {\n                this.selectionDetailsPane.innerText = description;\n            }\n            this.selectionDetailsPane.style.display = 'block';\n        }\n        else {\n            this.selectionDetailsPane.style.display = 'none';\n        }\n        // Avoid recursion\n        this._skipLayout = true;\n        this.contextViewProvider.layout();\n        this._skipLayout = false;\n    }\n    // List keyboard controller\n    // List exit - active - hide ContextView dropdown, reset selection, return focus to parent select\n    onEscape(e) {\n        dom.EventHelper.stop(e);\n        // Reset selection to value when opened\n        this.select(this._currentSelection);\n        this.hideSelectDropDown(true);\n    }\n    // List exit - active - hide ContextView dropdown, return focus to parent select, fire onDidSelect if change\n    onEnter(e) {\n        dom.EventHelper.stop(e);\n        // Only fire if selection change\n        if (this.selected !== this._currentSelection) {\n            this._currentSelection = this.selected;\n            this._onDidSelect.fire({\n                index: this.selectElement.selectedIndex,\n                selected: this.options[this.selected].text\n            });\n            if (!!this.options[this.selected] && !!this.options[this.selected].text) {\n                this.selectElement.title = this.options[this.selected].text;\n            }\n        }\n        this.hideSelectDropDown(true);\n    }\n    // List navigation - have to handle a disabled option (jump over)\n    onDownArrow(e) {\n        if (this.selected < this.options.length - 1) {\n            dom.EventHelper.stop(e, true);\n            // Skip disabled options\n            const nextOptionDisabled = this.options[this.selected + 1].isDisabled;\n            if (nextOptionDisabled && this.options.length > this.selected + 2) {\n                this.selected += 2;\n            }\n            else if (nextOptionDisabled) {\n                return;\n            }\n            else {\n                this.selected++;\n            }\n            // Set focus/selection - only fire event when closing drop-down or on blur\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n        }\n    }\n    onUpArrow(e) {\n        if (this.selected > 0) {\n            dom.EventHelper.stop(e, true);\n            // Skip disabled options\n            const previousOptionDisabled = this.options[this.selected - 1].isDisabled;\n            if (previousOptionDisabled && this.selected > 1) {\n                this.selected -= 2;\n            }\n            else {\n                this.selected--;\n            }\n            // Set focus/selection - only fire event when closing drop-down or on blur\n            this.select(this.selected);\n            this.selectList.setFocus([this.selected]);\n            this.selectList.reveal(this.selectList.getFocus()[0]);\n        }\n    }\n    onPageUp(e) {\n        dom.EventHelper.stop(e);\n        this.selectList.focusPreviousPage();\n        // Allow scrolling to settle\n        setTimeout(() => {\n            this.selected = this.selectList.getFocus()[0];\n            // Shift selection down if we land on a disabled option\n            if (this.options[this.selected].isDisabled && this.selected < this.options.length - 1) {\n                this.selected++;\n                this.selectList.setFocus([this.selected]);\n            }\n            this.selectList.reveal(this.selected);\n            this.select(this.selected);\n        }, 1);\n    }\n    onPageDown(e) {\n        dom.EventHelper.stop(e);\n        this.selectList.focusNextPage();\n        // Allow scrolling to settle\n        setTimeout(() => {\n            this.selected = this.selectList.getFocus()[0];\n            // Shift selection up if we land on a disabled option\n            if (this.options[this.selected].isDisabled && this.selected > 0) {\n                this.selected--;\n                this.selectList.setFocus([this.selected]);\n            }\n            this.selectList.reveal(this.selected);\n            this.select(this.selected);\n        }, 1);\n    }\n    onHome(e) {\n        dom.EventHelper.stop(e);\n        if (this.options.length < 2) {\n            return;\n        }\n        this.selected = 0;\n        if (this.options[this.selected].isDisabled && this.selected > 1) {\n            this.selected++;\n        }\n        this.selectList.setFocus([this.selected]);\n        this.selectList.reveal(this.selected);\n        this.select(this.selected);\n    }\n    onEnd(e) {\n        dom.EventHelper.stop(e);\n        if (this.options.length < 2) {\n            return;\n        }\n        this.selected = this.options.length - 1;\n        if (this.options[this.selected].isDisabled && this.selected > 1) {\n            this.selected--;\n        }\n        this.selectList.setFocus([this.selected]);\n        this.selectList.reveal(this.selected);\n        this.select(this.selected);\n    }\n    // Mimic option first character navigation of native select\n    onCharacter(e) {\n        const ch = KeyCodeUtils.toString(e.keyCode);\n        let optionIndex = -1;\n        for (let i = 0; i < this.options.length - 1; i++) {\n            optionIndex = (i + this.selected + 1) % this.options.length;\n            if (this.options[optionIndex].text.charAt(0).toUpperCase() === ch && !this.options[optionIndex].isDisabled) {\n                this.select(optionIndex);\n                this.selectList.setFocus([optionIndex]);\n                this.selectList.reveal(this.selectList.getFocus()[0]);\n                dom.EventHelper.stop(e);\n                break;\n            }\n        }\n    }\n    dispose() {\n        this.hideSelectDropDown(false);\n        super.dispose();\n    }\n}\nSelectBoxList.DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN = 32;\nSelectBoxList.DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN = 2;\nSelectBoxList.DEFAULT_MINIMUM_VISIBLE_OPTIONS = 3;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { EventType, Gesture } from '../../touch.js';\nimport * as arrays from '../../../common/arrays.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { isMacintosh } from '../../../common/platform.js';\nexport class SelectBoxNative extends Disposable {\n    constructor(options, selected, styles, selectBoxOptions) {\n        super();\n        this.selected = 0;\n        this.selectBoxOptions = selectBoxOptions || Object.create(null);\n        this.options = [];\n        this.selectElement = document.createElement('select');\n        this.selectElement.className = 'monaco-select-box';\n        if (typeof this.selectBoxOptions.ariaLabel === 'string') {\n            this.selectElement.setAttribute('aria-label', this.selectBoxOptions.ariaLabel);\n        }\n        if (typeof this.selectBoxOptions.ariaDescription === 'string') {\n            this.selectElement.setAttribute('aria-description', this.selectBoxOptions.ariaDescription);\n        }\n        this._onDidSelect = this._register(new Emitter());\n        this.styles = styles;\n        this.registerListeners();\n        this.setOptions(options, selected);\n    }\n    registerListeners() {\n        this._register(Gesture.addTarget(this.selectElement));\n        [EventType.Tap].forEach(eventType => {\n            this._register(dom.addDisposableListener(this.selectElement, eventType, (e) => {\n                this.selectElement.focus();\n            }));\n        });\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'click', (e) => {\n            dom.EventHelper.stop(e, true);\n        }));\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'change', (e) => {\n            this.selectElement.title = e.target.value;\n            this._onDidSelect.fire({\n                index: e.target.selectedIndex,\n                selected: e.target.value\n            });\n        }));\n        this._register(dom.addStandardDisposableListener(this.selectElement, 'keydown', (e) => {\n            let showSelect = false;\n            if (isMacintosh) {\n                if (e.keyCode === 18 /* KeyCode.DownArrow */ || e.keyCode === 16 /* KeyCode.UpArrow */ || e.keyCode === 10 /* KeyCode.Space */) {\n                    showSelect = true;\n                }\n            }\n            else {\n                if (e.keyCode === 18 /* KeyCode.DownArrow */ && e.altKey || e.keyCode === 10 /* KeyCode.Space */ || e.keyCode === 3 /* KeyCode.Enter */) {\n                    showSelect = true;\n                }\n            }\n            if (showSelect) {\n                // Space, Enter, is used to expand select box, do not propagate it (prevent action bar action run)\n                e.stopPropagation();\n            }\n        }));\n    }\n    get onDidSelect() {\n        return this._onDidSelect.event;\n    }\n    setOptions(options, selected) {\n        if (!this.options || !arrays.equals(this.options, options)) {\n            this.options = options;\n            this.selectElement.options.length = 0;\n            this.options.forEach((option, index) => {\n                this.selectElement.add(this.createOption(option.text, index, option.isDisabled));\n            });\n        }\n        if (selected !== undefined) {\n            this.select(selected);\n        }\n    }\n    select(index) {\n        if (this.options.length === 0) {\n            this.selected = 0;\n        }\n        else if (index >= 0 && index < this.options.length) {\n            this.selected = index;\n        }\n        else if (index > this.options.length - 1) {\n            // Adjust index to end of list\n            // This could make client out of sync with the select\n            this.select(this.options.length - 1);\n        }\n        else if (this.selected < 0) {\n            this.selected = 0;\n        }\n        this.selectElement.selectedIndex = this.selected;\n        if ((this.selected < this.options.length) && typeof this.options[this.selected].text === 'string') {\n            this.selectElement.title = this.options[this.selected].text;\n        }\n        else {\n            this.selectElement.title = '';\n        }\n    }\n    focus() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = 0;\n            this.selectElement.focus();\n        }\n    }\n    blur() {\n        if (this.selectElement) {\n            this.selectElement.tabIndex = -1;\n            this.selectElement.blur();\n        }\n    }\n    setFocusable(focusable) {\n        this.selectElement.tabIndex = focusable ? 0 : -1;\n    }\n    render(container) {\n        container.classList.add('select-container');\n        container.appendChild(this.selectElement);\n        this.setOptions(this.options, this.selected);\n        this.applyStyles();\n    }\n    applyStyles() {\n        var _a, _b, _c;\n        // Style native select\n        if (this.selectElement) {\n            this.selectElement.style.backgroundColor = (_a = this.styles.selectBackground) !== null && _a !== void 0 ? _a : '';\n            this.selectElement.style.color = (_b = this.styles.selectForeground) !== null && _b !== void 0 ? _b : '';\n            this.selectElement.style.borderColor = (_c = this.styles.selectBorder) !== null && _c !== void 0 ? _c : '';\n        }\n    }\n    createOption(value, index, disabled) {\n        const option = document.createElement('option');\n        option.value = value;\n        option.text = value;\n        option.disabled = !!disabled;\n        return option;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { SelectBoxList } from './selectBoxCustom.js';\nimport { SelectBoxNative } from './selectBoxNative.js';\nimport { Widget } from '../widget.js';\nimport { isMacintosh } from '../../../common/platform.js';\nimport './selectBox.css';\nexport class SelectBox extends Widget {\n    constructor(options, selected, contextViewProvider, styles, selectBoxOptions) {\n        super();\n        // Default to native SelectBox for OSX unless overridden\n        if (isMacintosh && !(selectBoxOptions === null || selectBoxOptions === void 0 ? void 0 : selectBoxOptions.useCustomDrawn)) {\n            this.selectBoxDelegate = new SelectBoxNative(options, selected, styles, selectBoxOptions);\n        }\n        else {\n            this.selectBoxDelegate = new SelectBoxList(options, selected, contextViewProvider, styles, selectBoxOptions);\n        }\n        this._register(this.selectBoxDelegate);\n    }\n    // Public SelectBox Methods - routed through delegate interface\n    get onDidSelect() {\n        return this.selectBoxDelegate.onDidSelect;\n    }\n    setOptions(options, selected) {\n        this.selectBoxDelegate.setOptions(options, selected);\n    }\n    select(index) {\n        this.selectBoxDelegate.select(index);\n    }\n    focus() {\n        this.selectBoxDelegate.focus();\n    }\n    blur() {\n        this.selectBoxDelegate.blur();\n    }\n    setFocusable(focusable) {\n        this.selectBoxDelegate.setFocusable(focusable);\n    }\n    render(container) {\n        this.selectBoxDelegate.render(container);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, addDisposableListener, append, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { Sash } from '../sash/sash.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { pushToEnd, pushToStart, range } from '../../../common/arrays.js';\nimport { Color } from '../../../common/color.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { combinedDisposable, Disposable, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport * as types from '../../../common/types.js';\nimport './splitview.css';\nconst defaultStyles = {\n    separatorBorder: Color.transparent\n};\nclass ViewItem {\n    set size(size) {\n        this._size = size;\n    }\n    get size() {\n        return this._size;\n    }\n    get visible() {\n        return typeof this._cachedVisibleSize === 'undefined';\n    }\n    setVisible(visible, size) {\n        var _a, _b;\n        if (visible === this.visible) {\n            return;\n        }\n        if (visible) {\n            this.size = clamp(this._cachedVisibleSize, this.viewMinimumSize, this.viewMaximumSize);\n            this._cachedVisibleSize = undefined;\n        }\n        else {\n            this._cachedVisibleSize = typeof size === 'number' ? size : this.size;\n            this.size = 0;\n        }\n        this.container.classList.toggle('visible', visible);\n        (_b = (_a = this.view).setVisible) === null || _b === void 0 ? void 0 : _b.call(_a, visible);\n    }\n    get minimumSize() { return this.visible ? this.view.minimumSize : 0; }\n    get viewMinimumSize() { return this.view.minimumSize; }\n    get maximumSize() { return this.visible ? this.view.maximumSize : 0; }\n    get viewMaximumSize() { return this.view.maximumSize; }\n    get priority() { return this.view.priority; }\n    get proportionalLayout() { var _a; return (_a = this.view.proportionalLayout) !== null && _a !== void 0 ? _a : true; }\n    get snap() { return !!this.view.snap; }\n    set enabled(enabled) {\n        this.container.style.pointerEvents = enabled ? '' : 'none';\n    }\n    constructor(container, view, size, disposable) {\n        this.container = container;\n        this.view = view;\n        this.disposable = disposable;\n        this._cachedVisibleSize = undefined;\n        if (typeof size === 'number') {\n            this._size = size;\n            this._cachedVisibleSize = undefined;\n            container.classList.add('visible');\n        }\n        else {\n            this._size = 0;\n            this._cachedVisibleSize = size.cachedVisibleSize;\n        }\n    }\n    layout(offset, layoutContext) {\n        this.layoutContainer(offset);\n        this.view.layout(this.size, offset, layoutContext);\n    }\n    dispose() {\n        this.disposable.dispose();\n    }\n}\nclass VerticalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.top = `${offset}px`;\n        this.container.style.height = `${this.size}px`;\n    }\n}\nclass HorizontalViewItem extends ViewItem {\n    layoutContainer(offset) {\n        this.container.style.left = `${offset}px`;\n        this.container.style.width = `${this.size}px`;\n    }\n}\nvar State;\n(function (State) {\n    State[State[\"Idle\"] = 0] = \"Idle\";\n    State[State[\"Busy\"] = 1] = \"Busy\";\n})(State || (State = {}));\nexport var Sizing;\n(function (Sizing) {\n    /**\n     * When adding or removing views, distribute the delta space among\n     * all other views.\n     */\n    Sizing.Distribute = { type: 'distribute' };\n    /**\n     * When adding or removing views, split the delta space with another\n     * specific view, indexed by the provided `index`.\n     */\n    function Split(index) { return { type: 'split', index }; }\n    Sizing.Split = Split;\n    /**\n     * When adding a view, use DistributeSizing when all pre-existing views are\n     * distributed evenly, otherwise use SplitSizing.\n     */\n    function Auto(index) { return { type: 'auto', index }; }\n    Sizing.Auto = Auto;\n    /**\n     * When adding or removing views, assume the view is invisible.\n     */\n    function Invisible(cachedVisibleSize) { return { type: 'invisible', cachedVisibleSize }; }\n    Sizing.Invisible = Invisible;\n})(Sizing || (Sizing = {}));\n/**\n * The {@link SplitView} is the UI component which implements a one dimensional\n * flex-like layout algorithm for a collection of {@link IView} instances, which\n * are essentially HTMLElement instances with the following size constraints:\n *\n * - {@link IView.minimumSize}\n * - {@link IView.maximumSize}\n * - {@link IView.priority}\n * - {@link IView.snap}\n *\n * In case the SplitView doesn't have enough size to fit all views, it will overflow\n * its content with a scrollbar.\n *\n * In between each pair of views there will be a {@link Sash} allowing the user\n * to resize the views, making sure the constraints are respected.\n *\n * An optional {@link TLayoutContext layout context type} may be used in order to\n * pass along layout contextual data from the {@link SplitView.layout} method down\n * to each view's {@link IView.layout} calls.\n *\n * Features:\n * - Flex-like layout algorithm\n * - Snap support\n * - Orthogonal sash support, for corner sashes\n * - View hide/show support\n * - View swap/move support\n * - Alt key modifier behavior, macOS style\n */\nexport class SplitView extends Disposable {\n    get orthogonalStartSash() { return this._orthogonalStartSash; }\n    get orthogonalEndSash() { return this._orthogonalEndSash; }\n    get startSnappingEnabled() { return this._startSnappingEnabled; }\n    get endSnappingEnabled() { return this._endSnappingEnabled; }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the left- or top-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalStartSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalStartSash = sash;\n        }\n        this._orthogonalStartSash = sash;\n    }\n    /**\n     * A reference to a sash, perpendicular to all sashes in this {@link SplitView},\n     * located at the right- or bottom-most side of the SplitView.\n     * Corner sashes will be created automatically at the intersections.\n     */\n    set orthogonalEndSash(sash) {\n        for (const sashItem of this.sashItems) {\n            sashItem.sash.orthogonalEndSash = sash;\n        }\n        this._orthogonalEndSash = sash;\n    }\n    /**\n     * Enable/disable snapping at the beginning of this {@link SplitView}.\n     */\n    set startSnappingEnabled(startSnappingEnabled) {\n        if (this._startSnappingEnabled === startSnappingEnabled) {\n            return;\n        }\n        this._startSnappingEnabled = startSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Enable/disable snapping at the end of this {@link SplitView}.\n     */\n    set endSnappingEnabled(endSnappingEnabled) {\n        if (this._endSnappingEnabled === endSnappingEnabled) {\n            return;\n        }\n        this._endSnappingEnabled = endSnappingEnabled;\n        this.updateSashEnablement();\n    }\n    /**\n     * Create a new {@link SplitView} instance.\n     */\n    constructor(container, options = {}) {\n        var _a, _b, _c, _d, _e;\n        super();\n        this.size = 0;\n        this.contentSize = 0;\n        this.proportions = undefined;\n        this.viewItems = [];\n        this.sashItems = []; // used in tests\n        this.state = State.Idle;\n        this._onDidSashChange = this._register(new Emitter());\n        this._onDidSashReset = this._register(new Emitter());\n        this._startSnappingEnabled = true;\n        this._endSnappingEnabled = true;\n        /**\n         * Fires whenever the user resizes a {@link Sash sash}.\n         */\n        this.onDidSashChange = this._onDidSashChange.event;\n        /**\n         * Fires whenever the user double clicks a {@link Sash sash}.\n         */\n        this.onDidSashReset = this._onDidSashReset.event;\n        this.orientation = (_a = options.orientation) !== null && _a !== void 0 ? _a : 0 /* Orientation.VERTICAL */;\n        this.inverseAltBehavior = (_b = options.inverseAltBehavior) !== null && _b !== void 0 ? _b : false;\n        this.proportionalLayout = (_c = options.proportionalLayout) !== null && _c !== void 0 ? _c : true;\n        this.getSashOrthogonalSize = options.getSashOrthogonalSize;\n        this.el = document.createElement('div');\n        this.el.classList.add('monaco-split-view2');\n        this.el.classList.add(this.orientation === 0 /* Orientation.VERTICAL */ ? 'vertical' : 'horizontal');\n        container.appendChild(this.el);\n        this.sashContainer = append(this.el, $('.sash-container'));\n        this.viewContainer = $('.split-view-container');\n        this.scrollable = new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: 125,\n            scheduleAtNextAnimationFrame\n        });\n        this.scrollableElement = this._register(new SmoothScrollableElement(this.viewContainer, {\n            vertical: this.orientation === 0 /* Orientation.VERTICAL */ ? ((_d = options.scrollbarVisibility) !== null && _d !== void 0 ? _d : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */,\n            horizontal: this.orientation === 1 /* Orientation.HORIZONTAL */ ? ((_e = options.scrollbarVisibility) !== null && _e !== void 0 ? _e : 1 /* ScrollbarVisibility.Auto */) : 2 /* ScrollbarVisibility.Hidden */\n        }, this.scrollable));\n        // https://github.com/microsoft/vscode/issues/157737\n        const onDidScrollViewContainer = this._register(new DomEmitter(this.viewContainer, 'scroll')).event;\n        this._register(onDidScrollViewContainer(_ => {\n            const position = this.scrollableElement.getScrollPosition();\n            const scrollLeft = Math.abs(this.viewContainer.scrollLeft - position.scrollLeft) <= 1 ? undefined : this.viewContainer.scrollLeft;\n            const scrollTop = Math.abs(this.viewContainer.scrollTop - position.scrollTop) <= 1 ? undefined : this.viewContainer.scrollTop;\n            if (scrollLeft !== undefined || scrollTop !== undefined) {\n                this.scrollableElement.setScrollPosition({ scrollLeft, scrollTop });\n            }\n        }));\n        this.onDidScroll = this.scrollableElement.onScroll;\n        this._register(this.onDidScroll(e => {\n            if (e.scrollTopChanged) {\n                this.viewContainer.scrollTop = e.scrollTop;\n            }\n            if (e.scrollLeftChanged) {\n                this.viewContainer.scrollLeft = e.scrollLeft;\n            }\n        }));\n        append(this.el, this.scrollableElement.getDomNode());\n        this.style(options.styles || defaultStyles);\n        // We have an existing set of view, add them now\n        if (options.descriptor) {\n            this.size = options.descriptor.size;\n            options.descriptor.views.forEach((viewDescriptor, index) => {\n                const sizing = types.isUndefined(viewDescriptor.visible) || viewDescriptor.visible ? viewDescriptor.size : { type: 'invisible', cachedVisibleSize: viewDescriptor.size };\n                const view = viewDescriptor.view;\n                this.doAddView(view, sizing, index, true);\n            });\n            // Initialize content size and proportions for first layout\n            this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n            this.saveProportions();\n        }\n    }\n    style(styles) {\n        if (styles.separatorBorder.isTransparent()) {\n            this.el.classList.remove('separator-border');\n            this.el.style.removeProperty('--separator-border');\n        }\n        else {\n            this.el.classList.add('separator-border');\n            this.el.style.setProperty('--separator-border', styles.separatorBorder.toString());\n        }\n    }\n    /**\n     * Add a {@link IView view} to this {@link SplitView}.\n     *\n     * @param view The view to add.\n     * @param size Either a fixed size, or a dynamic {@link Sizing} strategy.\n     * @param index The index to insert the view on.\n     * @param skipLayout Whether layout should be skipped.\n     */\n    addView(view, size, index = this.viewItems.length, skipLayout) {\n        this.doAddView(view, size, index, skipLayout);\n    }\n    /**\n     * Layout the {@link SplitView}.\n     *\n     * @param size The entire size of the {@link SplitView}.\n     * @param layoutContext An optional layout context to pass along to {@link IView views}.\n     */\n    layout(size, layoutContext) {\n        const previousSize = Math.max(this.size, this.contentSize);\n        this.size = size;\n        this.layoutContext = layoutContext;\n        if (!this.proportions) {\n            const indexes = range(this.viewItems.length);\n            const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n            const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n            this.resize(this.viewItems.length - 1, size - previousSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        }\n        else {\n            let total = 0;\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    total += proportion;\n                }\n                else {\n                    size -= item.size;\n                }\n            }\n            for (let i = 0; i < this.viewItems.length; i++) {\n                const item = this.viewItems[i];\n                const proportion = this.proportions[i];\n                if (typeof proportion === 'number') {\n                    item.size = clamp(Math.round(proportion * size / total), item.minimumSize, item.maximumSize);\n                }\n            }\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    saveProportions() {\n        if (this.proportionalLayout && this.contentSize > 0) {\n            this.proportions = this.viewItems.map(i => i.proportionalLayout ? i.size / this.contentSize : undefined);\n        }\n    }\n    onSashStart({ sash, start, alt }) {\n        for (const item of this.viewItems) {\n            item.enabled = false;\n        }\n        const index = this.sashItems.findIndex(item => item.sash === sash);\n        // This way, we can press Alt while we resize a sash, macOS style!\n        const disposable = combinedDisposable(addDisposableListener(document.body, 'keydown', e => resetSashDragState(this.sashDragState.current, e.altKey)), addDisposableListener(document.body, 'keyup', () => resetSashDragState(this.sashDragState.current, false)));\n        const resetSashDragState = (start, alt) => {\n            const sizes = this.viewItems.map(i => i.size);\n            let minDelta = Number.NEGATIVE_INFINITY;\n            let maxDelta = Number.POSITIVE_INFINITY;\n            if (this.inverseAltBehavior) {\n                alt = !alt;\n            }\n            if (alt) {\n                // When we're using the last sash with Alt, we're resizing\n                // the view to the left/up, instead of right/down as usual\n                // Thus, we must do the inverse of the usual\n                const isLastSash = index === this.sashItems.length - 1;\n                if (isLastSash) {\n                    const viewItem = this.viewItems[index];\n                    minDelta = (viewItem.minimumSize - viewItem.size) / 2;\n                    maxDelta = (viewItem.maximumSize - viewItem.size) / 2;\n                }\n                else {\n                    const viewItem = this.viewItems[index + 1];\n                    minDelta = (viewItem.size - viewItem.maximumSize) / 2;\n                    maxDelta = (viewItem.size - viewItem.minimumSize) / 2;\n                }\n            }\n            let snapBefore;\n            let snapAfter;\n            if (!alt) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n                const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].viewMaximumSize - sizes[i]), 0);\n                const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n                const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].viewMaximumSize), 0);\n                const minDelta = Math.max(minDeltaUp, minDeltaDown);\n                const maxDelta = Math.min(maxDeltaDown, maxDeltaUp);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number') {\n                    const viewItem = this.viewItems[snapBeforeIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapBefore = {\n                        index: snapBeforeIndex,\n                        limitDelta: viewItem.visible ? minDelta - halfSize : minDelta + halfSize,\n                        size: viewItem.size\n                    };\n                }\n                if (typeof snapAfterIndex === 'number') {\n                    const viewItem = this.viewItems[snapAfterIndex];\n                    const halfSize = Math.floor(viewItem.viewMinimumSize / 2);\n                    snapAfter = {\n                        index: snapAfterIndex,\n                        limitDelta: viewItem.visible ? maxDelta + halfSize : maxDelta - halfSize,\n                        size: viewItem.size\n                    };\n                }\n            }\n            this.sashDragState = { start, current: start, index, sizes, minDelta, maxDelta, alt, snapBefore, snapAfter, disposable };\n        };\n        resetSashDragState(start, alt);\n    }\n    onSashChange({ current }) {\n        const { index, start, sizes, alt, minDelta, maxDelta, snapBefore, snapAfter } = this.sashDragState;\n        this.sashDragState.current = current;\n        const delta = current - start;\n        const newDelta = this.resize(index, delta, sizes, undefined, undefined, minDelta, maxDelta, snapBefore, snapAfter);\n        if (alt) {\n            const isLastSash = index === this.sashItems.length - 1;\n            const newSizes = this.viewItems.map(i => i.size);\n            const viewItemIndex = isLastSash ? index : index + 1;\n            const viewItem = this.viewItems[viewItemIndex];\n            const newMinDelta = viewItem.size - viewItem.maximumSize;\n            const newMaxDelta = viewItem.size - viewItem.minimumSize;\n            const resizeIndex = isLastSash ? index - 1 : index + 1;\n            this.resize(resizeIndex, -newDelta, newSizes, undefined, undefined, newMinDelta, newMaxDelta);\n        }\n        this.distributeEmptySpace();\n        this.layoutViews();\n    }\n    onSashEnd(index) {\n        this._onDidSashChange.fire(index);\n        this.sashDragState.disposable.dispose();\n        this.saveProportions();\n        for (const item of this.viewItems) {\n            item.enabled = true;\n        }\n    }\n    onViewChange(item, size) {\n        const index = this.viewItems.indexOf(item);\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        size = typeof size === 'number' ? size : item.size;\n        size = clamp(size, item.minimumSize, item.maximumSize);\n        if (this.inverseAltBehavior && index > 0) {\n            // In this case, we want the view to grow or shrink both sides equally\n            // so we just resize the \"left\" side by half and let `resize` do the clamping magic\n            this.resize(index - 1, Math.floor((item.size - size) / 2));\n            this.distributeEmptySpace();\n            this.layoutViews();\n        }\n        else {\n            item.size = size;\n            this.relayout([index], undefined);\n        }\n    }\n    /**\n     * Resize a {@link IView view} within the {@link SplitView}.\n     *\n     * @param index The {@link IView view} index.\n     * @param size The {@link IView view} size.\n     */\n    resizeView(index, size) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        if (index < 0 || index >= this.viewItems.length) {\n            return;\n        }\n        const indexes = range(this.viewItems.length).filter(i => i !== index);\n        const lowPriorityIndexes = [...indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */), index];\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        const item = this.viewItems[index];\n        size = Math.round(size);\n        size = clamp(size, item.minimumSize, Math.min(item.maximumSize, this.size));\n        item.size = size;\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n        this.state = State.Idle;\n    }\n    /**\n     * Distribute the entire {@link SplitView} size among all {@link IView views}.\n     */\n    distributeViewSizes() {\n        const flexibleViewItems = [];\n        let flexibleSize = 0;\n        for (const item of this.viewItems) {\n            if (item.maximumSize - item.minimumSize > 0) {\n                flexibleViewItems.push(item);\n                flexibleSize += item.size;\n            }\n        }\n        const size = Math.floor(flexibleSize / flexibleViewItems.length);\n        for (const item of flexibleViewItems) {\n            item.size = clamp(size, item.minimumSize, item.maximumSize);\n        }\n        const indexes = range(this.viewItems.length);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        this.relayout(lowPriorityIndexes, highPriorityIndexes);\n    }\n    /**\n     * Returns the size of a {@link IView view}.\n     */\n    getViewSize(index) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return -1;\n        }\n        return this.viewItems[index].size;\n    }\n    doAddView(view, size, index = this.viewItems.length, skipLayout) {\n        if (this.state !== State.Idle) {\n            throw new Error('Cant modify splitview');\n        }\n        this.state = State.Busy;\n        // Add view\n        const container = $('.split-view-view');\n        if (index === this.viewItems.length) {\n            this.viewContainer.appendChild(container);\n        }\n        else {\n            this.viewContainer.insertBefore(container, this.viewContainer.children.item(index));\n        }\n        const onChangeDisposable = view.onDidChange(size => this.onViewChange(item, size));\n        const containerDisposable = toDisposable(() => this.viewContainer.removeChild(container));\n        const disposable = combinedDisposable(onChangeDisposable, containerDisposable);\n        let viewSize;\n        if (typeof size === 'number') {\n            viewSize = size;\n        }\n        else {\n            if (size.type === 'auto') {\n                if (this.areViewsDistributed()) {\n                    size = { type: 'distribute' };\n                }\n                else {\n                    size = { type: 'split', index: size.index };\n                }\n            }\n            if (size.type === 'split') {\n                viewSize = this.getViewSize(size.index) / 2;\n            }\n            else if (size.type === 'invisible') {\n                viewSize = { cachedVisibleSize: size.cachedVisibleSize };\n            }\n            else {\n                viewSize = view.minimumSize;\n            }\n        }\n        const item = this.orientation === 0 /* Orientation.VERTICAL */\n            ? new VerticalViewItem(container, view, viewSize, disposable)\n            : new HorizontalViewItem(container, view, viewSize, disposable);\n        this.viewItems.splice(index, 0, item);\n        // Add sash\n        if (this.viewItems.length > 1) {\n            const opts = { orthogonalStartSash: this.orthogonalStartSash, orthogonalEndSash: this.orthogonalEndSash };\n            const sash = this.orientation === 0 /* Orientation.VERTICAL */\n                ? new Sash(this.sashContainer, { getHorizontalSashTop: s => this.getSashPosition(s), getHorizontalSashWidth: this.getSashOrthogonalSize }, Object.assign(Object.assign({}, opts), { orientation: 1 /* Orientation.HORIZONTAL */ }))\n                : new Sash(this.sashContainer, { getVerticalSashLeft: s => this.getSashPosition(s), getVerticalSashHeight: this.getSashOrthogonalSize }, Object.assign(Object.assign({}, opts), { orientation: 0 /* Orientation.VERTICAL */ }));\n            const sashEventMapper = this.orientation === 0 /* Orientation.VERTICAL */\n                ? (e) => ({ sash, start: e.startY, current: e.currentY, alt: e.altKey })\n                : (e) => ({ sash, start: e.startX, current: e.currentX, alt: e.altKey });\n            const onStart = Event.map(sash.onDidStart, sashEventMapper);\n            const onStartDisposable = onStart(this.onSashStart, this);\n            const onChange = Event.map(sash.onDidChange, sashEventMapper);\n            const onChangeDisposable = onChange(this.onSashChange, this);\n            const onEnd = Event.map(sash.onDidEnd, () => this.sashItems.findIndex(item => item.sash === sash));\n            const onEndDisposable = onEnd(this.onSashEnd, this);\n            const onDidResetDisposable = sash.onDidReset(() => {\n                const index = this.sashItems.findIndex(item => item.sash === sash);\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                if (typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible) {\n                    return;\n                }\n                if (typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible) {\n                    return;\n                }\n                this._onDidSashReset.fire(index);\n            });\n            const disposable = combinedDisposable(onStartDisposable, onChangeDisposable, onEndDisposable, onDidResetDisposable, sash);\n            const sashItem = { sash, disposable };\n            this.sashItems.splice(index - 1, 0, sashItem);\n        }\n        container.appendChild(view.element);\n        let highPriorityIndexes;\n        if (typeof size !== 'number' && size.type === 'split') {\n            highPriorityIndexes = [size.index];\n        }\n        if (!skipLayout) {\n            this.relayout([index], highPriorityIndexes);\n        }\n        this.state = State.Idle;\n        if (!skipLayout && typeof size !== 'number' && size.type === 'distribute') {\n            this.distributeViewSizes();\n        }\n    }\n    relayout(lowPriorityIndexes, highPriorityIndexes) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        this.resize(this.viewItems.length - 1, this.size - contentSize, undefined, lowPriorityIndexes, highPriorityIndexes);\n        this.distributeEmptySpace();\n        this.layoutViews();\n        this.saveProportions();\n    }\n    resize(index, delta, sizes = this.viewItems.map(i => i.size), lowPriorityIndexes, highPriorityIndexes, overloadMinDelta = Number.NEGATIVE_INFINITY, overloadMaxDelta = Number.POSITIVE_INFINITY, snapBefore, snapAfter) {\n        if (index < 0 || index >= this.viewItems.length) {\n            return 0;\n        }\n        const upIndexes = range(index, -1);\n        const downIndexes = range(index + 1, this.viewItems.length);\n        if (highPriorityIndexes) {\n            for (const index of highPriorityIndexes) {\n                pushToStart(upIndexes, index);\n                pushToStart(downIndexes, index);\n            }\n        }\n        if (lowPriorityIndexes) {\n            for (const index of lowPriorityIndexes) {\n                pushToEnd(upIndexes, index);\n                pushToEnd(downIndexes, index);\n            }\n        }\n        const upItems = upIndexes.map(i => this.viewItems[i]);\n        const upSizes = upIndexes.map(i => sizes[i]);\n        const downItems = downIndexes.map(i => this.viewItems[i]);\n        const downSizes = downIndexes.map(i => sizes[i]);\n        const minDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].minimumSize - sizes[i]), 0);\n        const maxDeltaUp = upIndexes.reduce((r, i) => r + (this.viewItems[i].maximumSize - sizes[i]), 0);\n        const maxDeltaDown = downIndexes.length === 0 ? Number.POSITIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].minimumSize), 0);\n        const minDeltaDown = downIndexes.length === 0 ? Number.NEGATIVE_INFINITY : downIndexes.reduce((r, i) => r + (sizes[i] - this.viewItems[i].maximumSize), 0);\n        const minDelta = Math.max(minDeltaUp, minDeltaDown, overloadMinDelta);\n        const maxDelta = Math.min(maxDeltaDown, maxDeltaUp, overloadMaxDelta);\n        let snapped = false;\n        if (snapBefore) {\n            const snapView = this.viewItems[snapBefore.index];\n            const visible = delta >= snapBefore.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapBefore.size);\n        }\n        if (!snapped && snapAfter) {\n            const snapView = this.viewItems[snapAfter.index];\n            const visible = delta < snapAfter.limitDelta;\n            snapped = visible !== snapView.visible;\n            snapView.setVisible(visible, snapAfter.size);\n        }\n        if (snapped) {\n            return this.resize(index, delta, sizes, lowPriorityIndexes, highPriorityIndexes, overloadMinDelta, overloadMaxDelta);\n        }\n        delta = clamp(delta, minDelta, maxDelta);\n        for (let i = 0, deltaUp = delta; i < upItems.length; i++) {\n            const item = upItems[i];\n            const size = clamp(upSizes[i] + deltaUp, item.minimumSize, item.maximumSize);\n            const viewDelta = size - upSizes[i];\n            deltaUp -= viewDelta;\n            item.size = size;\n        }\n        for (let i = 0, deltaDown = delta; i < downItems.length; i++) {\n            const item = downItems[i];\n            const size = clamp(downSizes[i] - deltaDown, item.minimumSize, item.maximumSize);\n            const viewDelta = size - downSizes[i];\n            deltaDown += viewDelta;\n            item.size = size;\n        }\n        return delta;\n    }\n    distributeEmptySpace(lowPriorityIndex) {\n        const contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        let emptyDelta = this.size - contentSize;\n        const indexes = range(this.viewItems.length - 1, -1);\n        const lowPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 1 /* LayoutPriority.Low */);\n        const highPriorityIndexes = indexes.filter(i => this.viewItems[i].priority === 2 /* LayoutPriority.High */);\n        for (const index of highPriorityIndexes) {\n            pushToStart(indexes, index);\n        }\n        for (const index of lowPriorityIndexes) {\n            pushToEnd(indexes, index);\n        }\n        if (typeof lowPriorityIndex === 'number') {\n            pushToEnd(indexes, lowPriorityIndex);\n        }\n        for (let i = 0; emptyDelta !== 0 && i < indexes.length; i++) {\n            const item = this.viewItems[indexes[i]];\n            const size = clamp(item.size + emptyDelta, item.minimumSize, item.maximumSize);\n            const viewDelta = size - item.size;\n            emptyDelta -= viewDelta;\n            item.size = size;\n        }\n    }\n    layoutViews() {\n        // Save new content size\n        this.contentSize = this.viewItems.reduce((r, i) => r + i.size, 0);\n        // Layout views\n        let offset = 0;\n        for (const viewItem of this.viewItems) {\n            viewItem.layout(offset, this.layoutContext);\n            offset += viewItem.size;\n        }\n        // Layout sashes\n        this.sashItems.forEach(item => item.sash.layout());\n        this.updateSashEnablement();\n        this.updateScrollableElement();\n    }\n    updateScrollableElement() {\n        if (this.orientation === 0 /* Orientation.VERTICAL */) {\n            this.scrollableElement.setScrollDimensions({\n                height: this.size,\n                scrollHeight: this.contentSize\n            });\n        }\n        else {\n            this.scrollableElement.setScrollDimensions({\n                width: this.size,\n                scrollWidth: this.contentSize\n            });\n        }\n    }\n    updateSashEnablement() {\n        let previous = false;\n        const collapsesDown = this.viewItems.map(i => previous = (i.size - i.minimumSize > 0) || previous);\n        previous = false;\n        const expandsDown = this.viewItems.map(i => previous = (i.maximumSize - i.size > 0) || previous);\n        const reverseViews = [...this.viewItems].reverse();\n        previous = false;\n        const collapsesUp = reverseViews.map(i => previous = (i.size - i.minimumSize > 0) || previous).reverse();\n        previous = false;\n        const expandsUp = reverseViews.map(i => previous = (i.maximumSize - i.size > 0) || previous).reverse();\n        let position = 0;\n        for (let index = 0; index < this.sashItems.length; index++) {\n            const { sash } = this.sashItems[index];\n            const viewItem = this.viewItems[index];\n            position += viewItem.size;\n            const min = !(collapsesDown[index] && expandsUp[index + 1]);\n            const max = !(expandsDown[index] && collapsesUp[index + 1]);\n            if (min && max) {\n                const upIndexes = range(index, -1);\n                const downIndexes = range(index + 1, this.viewItems.length);\n                const snapBeforeIndex = this.findFirstSnapIndex(upIndexes);\n                const snapAfterIndex = this.findFirstSnapIndex(downIndexes);\n                const snappedBefore = typeof snapBeforeIndex === 'number' && !this.viewItems[snapBeforeIndex].visible;\n                const snappedAfter = typeof snapAfterIndex === 'number' && !this.viewItems[snapAfterIndex].visible;\n                if (snappedBefore && collapsesUp[index] && (position > 0 || this.startSnappingEnabled)) {\n                    sash.state = 1 /* SashState.AtMinimum */;\n                }\n                else if (snappedAfter && collapsesDown[index] && (position < this.contentSize || this.endSnappingEnabled)) {\n                    sash.state = 2 /* SashState.AtMaximum */;\n                }\n                else {\n                    sash.state = 0 /* SashState.Disabled */;\n                }\n            }\n            else if (min && !max) {\n                sash.state = 1 /* SashState.AtMinimum */;\n            }\n            else if (!min && max) {\n                sash.state = 2 /* SashState.AtMaximum */;\n            }\n            else {\n                sash.state = 3 /* SashState.Enabled */;\n            }\n        }\n    }\n    getSashPosition(sash) {\n        let position = 0;\n        for (let i = 0; i < this.sashItems.length; i++) {\n            position += this.viewItems[i].size;\n            if (this.sashItems[i].sash === sash) {\n                return position;\n            }\n        }\n        return 0;\n    }\n    findFirstSnapIndex(indexes) {\n        // visible views first\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (!viewItem.visible) {\n                continue;\n            }\n            if (viewItem.snap) {\n                return index;\n            }\n        }\n        // then, hidden views\n        for (const index of indexes) {\n            const viewItem = this.viewItems[index];\n            if (viewItem.visible && viewItem.maximumSize - viewItem.minimumSize > 0) {\n                return undefined;\n            }\n            if (!viewItem.visible && viewItem.snap) {\n                return index;\n            }\n        }\n        return undefined;\n    }\n    areViewsDistributed() {\n        let min = undefined, max = undefined;\n        for (const view of this.viewItems) {\n            min = min === undefined ? view.size : Math.min(min, view.size);\n            max = max === undefined ? view.size : Math.max(max, view.size);\n            if (max - min > 2) {\n                return false;\n            }\n        }\n        return true;\n    }\n    dispose() {\n        var _a;\n        (_a = this.sashDragState) === null || _a === void 0 ? void 0 : _a.disposable.dispose();\n        dispose(this.viewItems);\n        this.viewItems = [];\n        this.sashItems.forEach(i => i.disposable.dispose());\n        this.sashItems = [];\n        super.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, append, clearNode, createStyleSheet } from '../../dom.js';\nimport { List, unthemedListStyles } from '../list/listWidget.js';\nimport { SplitView } from '../splitview/splitview.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport './table.css';\nclass TableListRenderer {\n    constructor(columns, renderers, getColumnSize) {\n        this.columns = columns;\n        this.getColumnSize = getColumnSize;\n        this.templateId = TableListRenderer.TemplateId;\n        this.renderedTemplates = new Set();\n        const rendererMap = new Map(renderers.map(r => [r.templateId, r]));\n        this.renderers = [];\n        for (const column of columns) {\n            const renderer = rendererMap.get(column.templateId);\n            if (!renderer) {\n                throw new Error(`Table cell renderer for template id ${column.templateId} not found.`);\n            }\n            this.renderers.push(renderer);\n        }\n    }\n    renderTemplate(container) {\n        const rowContainer = append(container, $('.monaco-table-tr'));\n        const cellContainers = [];\n        const cellTemplateData = [];\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            const cellContainer = append(rowContainer, $('.monaco-table-td', { 'data-col-index': i }));\n            cellContainer.style.width = `${this.getColumnSize(i)}px`;\n            cellContainers.push(cellContainer);\n            cellTemplateData.push(renderer.renderTemplate(cellContainer));\n        }\n        const result = { container, cellContainers, cellTemplateData };\n        this.renderedTemplates.add(result);\n        return result;\n    }\n    renderElement(element, index, templateData, height) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const column = this.columns[i];\n            const cell = column.project(element);\n            const renderer = this.renderers[i];\n            renderer.renderElement(cell, index, templateData.cellTemplateData[i], height);\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            if (renderer.disposeElement) {\n                const column = this.columns[i];\n                const cell = column.project(element);\n                renderer.disposeElement(cell, index, templateData.cellTemplateData[i], height);\n            }\n        }\n    }\n    disposeTemplate(templateData) {\n        for (let i = 0; i < this.columns.length; i++) {\n            const renderer = this.renderers[i];\n            renderer.disposeTemplate(templateData.cellTemplateData[i]);\n        }\n        clearNode(templateData.container);\n        this.renderedTemplates.delete(templateData);\n    }\n    layoutColumn(index, size) {\n        for (const { cellContainers } of this.renderedTemplates) {\n            cellContainers[index].style.width = `${size}px`;\n        }\n    }\n}\nTableListRenderer.TemplateId = 'row';\nfunction asListVirtualDelegate(delegate) {\n    return {\n        getHeight(row) { return delegate.getHeight(row); },\n        getTemplateId() { return TableListRenderer.TemplateId; },\n    };\n}\nclass ColumnHeader {\n    get minimumSize() { var _a; return (_a = this.column.minimumWidth) !== null && _a !== void 0 ? _a : 120; }\n    get maximumSize() { var _a; return (_a = this.column.maximumWidth) !== null && _a !== void 0 ? _a : Number.POSITIVE_INFINITY; }\n    get onDidChange() { var _a; return (_a = this.column.onDidChangeWidthConstraints) !== null && _a !== void 0 ? _a : Event.None; }\n    constructor(column, index) {\n        this.column = column;\n        this.index = index;\n        this._onDidLayout = new Emitter();\n        this.onDidLayout = this._onDidLayout.event;\n        this.element = $('.monaco-table-th', { 'data-col-index': index, title: column.tooltip }, column.label);\n    }\n    layout(size) {\n        this._onDidLayout.fire([this.index, size]);\n    }\n}\nexport class Table {\n    get onDidChangeFocus() { return this.list.onDidChangeFocus; }\n    get onDidChangeSelection() { return this.list.onDidChangeSelection; }\n    get onDidScroll() { return this.list.onDidScroll; }\n    get onMouseDblClick() { return this.list.onMouseDblClick; }\n    get onPointer() { return this.list.onPointer; }\n    get onDidFocus() { return this.list.onDidFocus; }\n    get scrollTop() { return this.list.scrollTop; }\n    set scrollTop(scrollTop) { this.list.scrollTop = scrollTop; }\n    get scrollHeight() { return this.list.scrollHeight; }\n    get renderHeight() { return this.list.renderHeight; }\n    get onDidDispose() { return this.list.onDidDispose; }\n    constructor(user, container, virtualDelegate, columns, renderers, _options) {\n        this.virtualDelegate = virtualDelegate;\n        this.domId = `table_id_${++Table.InstanceCount}`;\n        this.disposables = new DisposableStore();\n        this.cachedWidth = 0;\n        this.cachedHeight = 0;\n        this.domNode = append(container, $(`.monaco-table.${this.domId}`));\n        const headers = columns.map((c, i) => new ColumnHeader(c, i));\n        const descriptor = {\n            size: headers.reduce((a, b) => a + b.column.weight, 0),\n            views: headers.map(view => ({ size: view.column.weight, view }))\n        };\n        this.splitview = this.disposables.add(new SplitView(this.domNode, {\n            orientation: 1 /* Orientation.HORIZONTAL */,\n            scrollbarVisibility: 2 /* ScrollbarVisibility.Hidden */,\n            getSashOrthogonalSize: () => this.cachedHeight,\n            descriptor\n        }));\n        this.splitview.el.style.height = `${virtualDelegate.headerRowHeight}px`;\n        this.splitview.el.style.lineHeight = `${virtualDelegate.headerRowHeight}px`;\n        const renderer = new TableListRenderer(columns, renderers, i => this.splitview.getViewSize(i));\n        this.list = this.disposables.add(new List(user, this.domNode, asListVirtualDelegate(virtualDelegate), [renderer], _options));\n        Event.any(...headers.map(h => h.onDidLayout))(([index, size]) => renderer.layoutColumn(index, size), null, this.disposables);\n        this.splitview.onDidSashReset(index => {\n            const totalWeight = columns.reduce((r, c) => r + c.weight, 0);\n            const size = columns[index].weight / totalWeight * this.cachedWidth;\n            this.splitview.resizeView(index, size);\n        }, null, this.disposables);\n        this.styleElement = createStyleSheet(this.domNode);\n        this.style(unthemedListStyles);\n    }\n    updateOptions(options) {\n        this.list.updateOptions(options);\n    }\n    splice(start, deleteCount, elements = []) {\n        this.list.splice(start, deleteCount, elements);\n    }\n    getHTMLElement() {\n        return this.domNode;\n    }\n    style(styles) {\n        const content = [];\n        content.push(`.monaco-table.${this.domId} > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\ttop: ${this.virtualDelegate.headerRowHeight + 1}px;\n\t\t\theight: calc(100% - ${this.virtualDelegate.headerRowHeight}px);\n\t\t}`);\n        this.styleElement.textContent = content.join('\\n');\n        this.list.style(styles);\n    }\n    getSelectedElements() {\n        return this.list.getSelectedElements();\n    }\n    getSelection() {\n        return this.list.getSelection();\n    }\n    getFocus() {\n        return this.list.getFocus();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nTable.InstanceCount = 0;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Widget } from '../widget.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { Emitter } from '../../../common/event.js';\nimport './toggle.css';\nexport const unthemedToggleStyles = {\n    inputActiveOptionBorder: '#007ACC00',\n    inputActiveOptionForeground: '#FFFFFF',\n    inputActiveOptionBackground: '#0E639C50'\n};\nexport class Toggle extends Widget {\n    constructor(opts) {\n        super();\n        this._onChange = this._register(new Emitter());\n        this.onChange = this._onChange.event;\n        this._onKeyDown = this._register(new Emitter());\n        this.onKeyDown = this._onKeyDown.event;\n        this._opts = opts;\n        this._checked = this._opts.isChecked;\n        const classes = ['monaco-custom-toggle'];\n        if (this._opts.icon) {\n            this._icon = this._opts.icon;\n            classes.push(...ThemeIcon.asClassNameArray(this._icon));\n        }\n        if (this._opts.actionClassName) {\n            classes.push(...this._opts.actionClassName.split(' '));\n        }\n        if (this._checked) {\n            classes.push('checked');\n        }\n        this.domNode = document.createElement('div');\n        this.domNode.title = this._opts.title;\n        this.domNode.classList.add(...classes);\n        if (!this._opts.notFocusable) {\n            this.domNode.tabIndex = 0;\n        }\n        this.domNode.setAttribute('role', 'checkbox');\n        this.domNode.setAttribute('aria-checked', String(this._checked));\n        this.domNode.setAttribute('aria-label', this._opts.title);\n        this.applyStyles();\n        this.onclick(this.domNode, (ev) => {\n            if (this.enabled) {\n                this.checked = !this._checked;\n                this._onChange.fire(false);\n                ev.preventDefault();\n            }\n        });\n        this._register(this.ignoreGesture(this.domNode));\n        this.onkeydown(this.domNode, (keyboardEvent) => {\n            if (keyboardEvent.keyCode === 10 /* KeyCode.Space */ || keyboardEvent.keyCode === 3 /* KeyCode.Enter */) {\n                this.checked = !this._checked;\n                this._onChange.fire(true);\n                keyboardEvent.preventDefault();\n                keyboardEvent.stopPropagation();\n                return;\n            }\n            this._onKeyDown.fire(keyboardEvent);\n        });\n    }\n    get enabled() {\n        return this.domNode.getAttribute('aria-disabled') !== 'true';\n    }\n    focus() {\n        this.domNode.focus();\n    }\n    get checked() {\n        return this._checked;\n    }\n    set checked(newIsChecked) {\n        this._checked = newIsChecked;\n        this.domNode.setAttribute('aria-checked', String(this._checked));\n        this.domNode.classList.toggle('checked', this._checked);\n        this.applyStyles();\n    }\n    width() {\n        return 2 /*margin left*/ + 2 /*border*/ + 2 /*padding*/ + 16 /* icon width */;\n    }\n    applyStyles() {\n        if (this.domNode) {\n            this.domNode.style.borderColor = (this._checked && this._opts.inputActiveOptionBorder) || '';\n            this.domNode.style.color = (this._checked && this._opts.inputActiveOptionForeground) || 'inherit';\n            this.domNode.style.backgroundColor = (this._checked && this._opts.inputActiveOptionBackground) || '';\n        }\n    }\n    enable() {\n        this.domNode.setAttribute('aria-disabled', String(false));\n    }\n    disable() {\n        this.domNode.setAttribute('aria-disabled', String(true));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { DropdownMenuActionViewItem } from '../dropdown/dropdownActionViewItem.js';\nimport { Action, SubmenuAction } from '../../../common/actions.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { EventMultiplexer } from '../../../common/event.js';\nimport { Disposable, DisposableStore } from '../../../common/lifecycle.js';\nimport { withNullAsUndefined } from '../../../common/types.js';\nimport './toolbar.css';\nimport * as nls from '../../../../nls.js';\n/**\n * A widget that combines an action bar for primary actions and a dropdown for secondary actions.\n */\nexport class ToolBar extends Disposable {\n    constructor(container, contextMenuProvider, options = { orientation: 0 /* ActionsOrientation.HORIZONTAL */ }) {\n        super();\n        this.submenuActionViewItems = [];\n        this.hasSecondaryActions = false;\n        this._onDidChangeDropdownVisibility = this._register(new EventMultiplexer());\n        this.onDidChangeDropdownVisibility = this._onDidChangeDropdownVisibility.event;\n        this.disposables = new DisposableStore();\n        this.options = options;\n        this.lookupKeybindings = typeof this.options.getKeyBinding === 'function';\n        this.toggleMenuAction = this._register(new ToggleMenuAction(() => { var _a; return (_a = this.toggleMenuActionViewItem) === null || _a === void 0 ? void 0 : _a.show(); }, options.toggleMenuTitle));\n        this.element = document.createElement('div');\n        this.element.className = 'monaco-toolbar';\n        container.appendChild(this.element);\n        this.actionBar = this._register(new ActionBar(this.element, {\n            orientation: options.orientation,\n            ariaLabel: options.ariaLabel,\n            actionRunner: options.actionRunner,\n            allowContextMenu: options.allowContextMenu,\n            actionViewItemProvider: (action, viewItemOptions) => {\n                var _a;\n                if (action.id === ToggleMenuAction.ID) {\n                    this.toggleMenuActionViewItem = new DropdownMenuActionViewItem(action, action.menuActions, contextMenuProvider, {\n                        actionViewItemProvider: this.options.actionViewItemProvider,\n                        actionRunner: this.actionRunner,\n                        keybindingProvider: this.options.getKeyBinding,\n                        classNames: ThemeIcon.asClassNameArray((_a = options.moreIcon) !== null && _a !== void 0 ? _a : Codicon.toolBarMore),\n                        anchorAlignmentProvider: this.options.anchorAlignmentProvider,\n                        menuAsChild: !!this.options.renderDropdownAsChildElement,\n                        skipTelemetry: this.options.skipTelemetry\n                    });\n                    this.toggleMenuActionViewItem.setActionContext(this.actionBar.context);\n                    this.disposables.add(this._onDidChangeDropdownVisibility.add(this.toggleMenuActionViewItem.onDidChangeVisibility));\n                    return this.toggleMenuActionViewItem;\n                }\n                if (options.actionViewItemProvider) {\n                    const result = options.actionViewItemProvider(action, viewItemOptions);\n                    if (result) {\n                        return result;\n                    }\n                }\n                if (action instanceof SubmenuAction) {\n                    const result = new DropdownMenuActionViewItem(action, action.actions, contextMenuProvider, {\n                        actionViewItemProvider: this.options.actionViewItemProvider,\n                        actionRunner: this.actionRunner,\n                        keybindingProvider: this.options.getKeyBinding,\n                        classNames: action.class,\n                        anchorAlignmentProvider: this.options.anchorAlignmentProvider,\n                        menuAsChild: !!this.options.renderDropdownAsChildElement,\n                        skipTelemetry: this.options.skipTelemetry\n                    });\n                    result.setActionContext(this.actionBar.context);\n                    this.submenuActionViewItems.push(result);\n                    this.disposables.add(this._onDidChangeDropdownVisibility.add(result.onDidChangeVisibility));\n                    return result;\n                }\n                return undefined;\n            }\n        }));\n    }\n    set actionRunner(actionRunner) {\n        this.actionBar.actionRunner = actionRunner;\n    }\n    get actionRunner() {\n        return this.actionBar.actionRunner;\n    }\n    getElement() {\n        return this.element;\n    }\n    getItemAction(indexOrElement) {\n        return this.actionBar.getAction(indexOrElement);\n    }\n    setActions(primaryActions, secondaryActions) {\n        this.clear();\n        const primaryActionsToSet = primaryActions ? primaryActions.slice(0) : [];\n        // Inject additional action to open secondary actions if present\n        this.hasSecondaryActions = !!(secondaryActions && secondaryActions.length > 0);\n        if (this.hasSecondaryActions && secondaryActions) {\n            this.toggleMenuAction.menuActions = secondaryActions.slice(0);\n            primaryActionsToSet.push(this.toggleMenuAction);\n        }\n        primaryActionsToSet.forEach(action => {\n            this.actionBar.push(action, { icon: true, label: false, keybinding: this.getKeybindingLabel(action) });\n        });\n    }\n    getKeybindingLabel(action) {\n        var _a, _b;\n        const key = this.lookupKeybindings ? (_b = (_a = this.options).getKeyBinding) === null || _b === void 0 ? void 0 : _b.call(_a, action) : undefined;\n        return withNullAsUndefined(key === null || key === void 0 ? void 0 : key.getLabel());\n    }\n    clear() {\n        this.submenuActionViewItems = [];\n        this.disposables.clear();\n        this.actionBar.clear();\n    }\n    dispose() {\n        this.clear();\n        super.dispose();\n    }\n}\nexport class ToggleMenuAction extends Action {\n    constructor(toggleDropdownMenu, title) {\n        title = title || nls.localize('moreActions', \"More Actions...\");\n        super(ToggleMenuAction.ID, title, undefined, true);\n        this._menuActions = [];\n        this.toggleDropdownMenu = toggleDropdownMenu;\n    }\n    run() {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.toggleDropdownMenu();\n        });\n    }\n    get menuActions() {\n        return this._menuActions;\n    }\n    set menuActions(actions) {\n        this._menuActions = actions;\n    }\n}\nToggleMenuAction.ID = 'toolbar.toggle.more';\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { $, append, clearNode, createStyleSheet, h, hasParentWithClass } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { FindInput } from '../findinput/findInput.js';\nimport { unthemedInboxStyles } from '../inputbox/inputBox.js';\nimport { ElementsDragAndDropData } from '../list/listView.js';\nimport { isButton, isInputElement, isMonacoEditor, List, MouseController } from '../list/listWidget.js';\nimport { Toggle, unthemedToggleStyles } from '../toggle/toggle.js';\nimport { getVisibleState, isFilterResult } from './indexTreeModel.js';\nimport { TreeMouseEventTarget } from './tree.js';\nimport { Action } from '../../../common/actions.js';\nimport { distinct, equals, range } from '../../../common/arrays.js';\nimport { disposableTimeout, timeout } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { SetMap } from '../../../common/collections.js';\nimport { Emitter, Event, EventBufferer, Relay } from '../../../common/event.js';\nimport { fuzzyScore, FuzzyScore } from '../../../common/filters.js';\nimport { Disposable, DisposableStore, dispose, toDisposable } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport { isNumber } from '../../../common/types.js';\nimport './media/tree.css';\nimport { localize } from '../../../../nls.js';\nclass TreeElementsDragAndDropData extends ElementsDragAndDropData {\n    constructor(data) {\n        super(data.elements.map(node => node.element));\n        this.data = data;\n    }\n}\nfunction asTreeDragAndDropData(data) {\n    if (data instanceof ElementsDragAndDropData) {\n        return new TreeElementsDragAndDropData(data);\n    }\n    return data;\n}\nclass TreeNodeListDragAndDrop {\n    constructor(modelProvider, dnd) {\n        this.modelProvider = modelProvider;\n        this.dnd = dnd;\n        this.autoExpandDisposable = Disposable.None;\n    }\n    getDragURI(node) {\n        return this.dnd.getDragURI(node.element);\n    }\n    getDragLabel(nodes, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(nodes.map(node => node.element), originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, asTreeDragAndDropData(data), originalEvent);\n    }\n    onDragOver(data, targetNode, targetIndex, originalEvent, raw = true) {\n        const result = this.dnd.onDragOver(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n        const didChangeAutoExpandNode = this.autoExpandNode !== targetNode;\n        if (didChangeAutoExpandNode) {\n            this.autoExpandDisposable.dispose();\n            this.autoExpandNode = targetNode;\n        }\n        if (typeof targetNode === 'undefined') {\n            return result;\n        }\n        if (didChangeAutoExpandNode && typeof result !== 'boolean' && result.autoExpand) {\n            this.autoExpandDisposable = disposableTimeout(() => {\n                const model = this.modelProvider();\n                const ref = model.getNodeLocation(targetNode);\n                if (model.isCollapsed(ref)) {\n                    model.setCollapsed(ref, false);\n                }\n                this.autoExpandNode = undefined;\n            }, 500);\n        }\n        if (typeof result === 'boolean' || !result.accept || typeof result.bubble === 'undefined' || result.feedback) {\n            if (!raw) {\n                const accept = typeof result === 'boolean' ? result : result.accept;\n                const effect = typeof result === 'boolean' ? undefined : result.effect;\n                return { accept, effect, feedback: [targetIndex] };\n            }\n            return result;\n        }\n        if (result.bubble === 1 /* TreeDragOverBubble.Up */) {\n            const model = this.modelProvider();\n            const ref = model.getNodeLocation(targetNode);\n            const parentRef = model.getParentNodeLocation(ref);\n            const parentNode = model.getNode(parentRef);\n            const parentIndex = parentRef && model.getListIndex(parentRef);\n            return this.onDragOver(data, parentNode, parentIndex, originalEvent, false);\n        }\n        const model = this.modelProvider();\n        const ref = model.getNodeLocation(targetNode);\n        const start = model.getListIndex(ref);\n        const length = model.getListRenderCount(ref);\n        return Object.assign(Object.assign({}, result), { feedback: range(start, start + length) });\n    }\n    drop(data, targetNode, targetIndex, originalEvent) {\n        this.autoExpandDisposable.dispose();\n        this.autoExpandNode = undefined;\n        this.dnd.drop(asTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n}\nfunction asListOptions(modelProvider, options) {\n    return options && Object.assign(Object.assign({}, options), { identityProvider: options.identityProvider && {\n            getId(el) {\n                return options.identityProvider.getId(el.element);\n            }\n        }, dnd: options.dnd && new TreeNodeListDragAndDrop(modelProvider, options.dnd), multipleSelectionController: options.multipleSelectionController && {\n            isSelectionSingleChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            },\n            isSelectionRangeChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            }\n        }, accessibilityProvider: options.accessibilityProvider && Object.assign(Object.assign({}, options.accessibilityProvider), { getSetSize(node) {\n                const model = modelProvider();\n                const ref = model.getNodeLocation(node);\n                const parentRef = model.getParentNodeLocation(ref);\n                const parentNode = model.getNode(parentRef);\n                return parentNode.visibleChildrenCount;\n            },\n            getPosInSet(node) {\n                return node.visibleChildIndex + 1;\n            }, isChecked: options.accessibilityProvider && options.accessibilityProvider.isChecked ? (node) => {\n                return options.accessibilityProvider.isChecked(node.element);\n            } : undefined, getRole: options.accessibilityProvider && options.accessibilityProvider.getRole ? (node) => {\n                return options.accessibilityProvider.getRole(node.element);\n            } : () => 'treeitem', getAriaLabel(e) {\n                return options.accessibilityProvider.getAriaLabel(e.element);\n            },\n            getWidgetAriaLabel() {\n                return options.accessibilityProvider.getWidgetAriaLabel();\n            }, getWidgetRole: options.accessibilityProvider && options.accessibilityProvider.getWidgetRole ? () => options.accessibilityProvider.getWidgetRole() : () => 'tree', getAriaLevel: options.accessibilityProvider && options.accessibilityProvider.getAriaLevel ? (node) => options.accessibilityProvider.getAriaLevel(node.element) : (node) => {\n                return node.depth;\n            }, getActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && (node => {\n                return options.accessibilityProvider.getActiveDescendantId(node.element);\n            }) }), keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && Object.assign(Object.assign({}, options.keyboardNavigationLabelProvider), { getKeyboardNavigationLabel(node) {\n                return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(node.element);\n            } }) });\n}\nexport class ComposedTreeDelegate {\n    constructor(delegate) {\n        this.delegate = delegate;\n    }\n    getHeight(element) {\n        return this.delegate.getHeight(element.element);\n    }\n    getTemplateId(element) {\n        return this.delegate.getTemplateId(element.element);\n    }\n    hasDynamicHeight(element) {\n        return !!this.delegate.hasDynamicHeight && this.delegate.hasDynamicHeight(element.element);\n    }\n    setDynamicHeight(element, height) {\n        var _a, _b;\n        (_b = (_a = this.delegate).setDynamicHeight) === null || _b === void 0 ? void 0 : _b.call(_a, element.element, height);\n    }\n}\nexport var RenderIndentGuides;\n(function (RenderIndentGuides) {\n    RenderIndentGuides[\"None\"] = \"none\";\n    RenderIndentGuides[\"OnHover\"] = \"onHover\";\n    RenderIndentGuides[\"Always\"] = \"always\";\n})(RenderIndentGuides || (RenderIndentGuides = {}));\nclass EventCollection {\n    get elements() {\n        return this._elements;\n    }\n    constructor(onDidChange, _elements = []) {\n        this._elements = _elements;\n        this.disposables = new DisposableStore();\n        this.onDidChange = Event.forEach(onDidChange, elements => this._elements = elements, this.disposables);\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nclass TreeRenderer {\n    constructor(renderer, modelProvider, onDidChangeCollapseState, activeNodes, renderedIndentGuides, options = {}) {\n        var _a;\n        this.renderer = renderer;\n        this.modelProvider = modelProvider;\n        this.activeNodes = activeNodes;\n        this.renderedIndentGuides = renderedIndentGuides;\n        this.renderedElements = new Map();\n        this.renderedNodes = new Map();\n        this.indent = TreeRenderer.DefaultIndent;\n        this.hideTwistiesOfChildlessElements = false;\n        this.shouldRenderIndentGuides = false;\n        this.activeIndentNodes = new Set();\n        this.indentGuidesDisposable = Disposable.None;\n        this.disposables = new DisposableStore();\n        this.templateId = renderer.templateId;\n        this.updateOptions(options);\n        Event.map(onDidChangeCollapseState, e => e.node)(this.onDidChangeNodeTwistieState, this, this.disposables);\n        (_a = renderer.onDidChangeTwistieState) === null || _a === void 0 ? void 0 : _a.call(renderer, this.onDidChangeTwistieState, this, this.disposables);\n    }\n    updateOptions(options = {}) {\n        if (typeof options.indent !== 'undefined') {\n            const indent = clamp(options.indent, 0, 40);\n            if (indent !== this.indent) {\n                this.indent = indent;\n                for (const [node, templateData] of this.renderedNodes) {\n                    this.renderTreeElement(node, templateData);\n                }\n            }\n        }\n        if (typeof options.renderIndentGuides !== 'undefined') {\n            const shouldRenderIndentGuides = options.renderIndentGuides !== RenderIndentGuides.None;\n            if (shouldRenderIndentGuides !== this.shouldRenderIndentGuides) {\n                this.shouldRenderIndentGuides = shouldRenderIndentGuides;\n                for (const [node, templateData] of this.renderedNodes) {\n                    this._renderIndentGuides(node, templateData);\n                }\n                this.indentGuidesDisposable.dispose();\n                if (shouldRenderIndentGuides) {\n                    const disposables = new DisposableStore();\n                    this.activeNodes.onDidChange(this._onDidChangeActiveNodes, this, disposables);\n                    this.indentGuidesDisposable = disposables;\n                    this._onDidChangeActiveNodes(this.activeNodes.elements);\n                }\n            }\n        }\n        if (typeof options.hideTwistiesOfChildlessElements !== 'undefined') {\n            this.hideTwistiesOfChildlessElements = options.hideTwistiesOfChildlessElements;\n        }\n    }\n    renderTemplate(container) {\n        const el = append(container, $('.monaco-tl-row'));\n        const indent = append(el, $('.monaco-tl-indent'));\n        const twistie = append(el, $('.monaco-tl-twistie'));\n        const contents = append(el, $('.monaco-tl-contents'));\n        const templateData = this.renderer.renderTemplate(contents);\n        return { container, indent, twistie, indentGuidesDisposable: Disposable.None, templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderedNodes.set(node, templateData);\n        this.renderedElements.set(node.element, node);\n        this.renderTreeElement(node, templateData);\n        this.renderer.renderElement(node, index, templateData.templateData, height);\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b;\n        templateData.indentGuidesDisposable.dispose();\n        (_b = (_a = this.renderer).disposeElement) === null || _b === void 0 ? void 0 : _b.call(_a, node, index, templateData.templateData, height);\n        if (typeof height === 'number') {\n            this.renderedNodes.delete(node);\n            this.renderedElements.delete(node.element);\n        }\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    onDidChangeTwistieState(element) {\n        const node = this.renderedElements.get(element);\n        if (!node) {\n            return;\n        }\n        this.onDidChangeNodeTwistieState(node);\n    }\n    onDidChangeNodeTwistieState(node) {\n        const templateData = this.renderedNodes.get(node);\n        if (!templateData) {\n            return;\n        }\n        this._onDidChangeActiveNodes(this.activeNodes.elements);\n        this.renderTreeElement(node, templateData);\n    }\n    renderTreeElement(node, templateData) {\n        const indent = TreeRenderer.DefaultIndent + (node.depth - 1) * this.indent;\n        templateData.twistie.style.paddingLeft = `${indent}px`;\n        templateData.indent.style.width = `${indent + this.indent - 16}px`;\n        if (node.collapsible) {\n            templateData.container.setAttribute('aria-expanded', String(!node.collapsed));\n        }\n        else {\n            templateData.container.removeAttribute('aria-expanded');\n        }\n        templateData.twistie.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemExpanded));\n        let twistieRendered = false;\n        if (this.renderer.renderTwistie) {\n            twistieRendered = this.renderer.renderTwistie(node.element, templateData.twistie);\n        }\n        if (node.collapsible && (!this.hideTwistiesOfChildlessElements || node.visibleChildrenCount > 0)) {\n            if (!twistieRendered) {\n                templateData.twistie.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemExpanded));\n            }\n            templateData.twistie.classList.add('collapsible');\n            templateData.twistie.classList.toggle('collapsed', node.collapsed);\n        }\n        else {\n            templateData.twistie.classList.remove('collapsible', 'collapsed');\n        }\n        this._renderIndentGuides(node, templateData);\n    }\n    _renderIndentGuides(node, templateData) {\n        clearNode(templateData.indent);\n        templateData.indentGuidesDisposable.dispose();\n        if (!this.shouldRenderIndentGuides) {\n            return;\n        }\n        const disposableStore = new DisposableStore();\n        const model = this.modelProvider();\n        while (true) {\n            const ref = model.getNodeLocation(node);\n            const parentRef = model.getParentNodeLocation(ref);\n            if (!parentRef) {\n                break;\n            }\n            const parent = model.getNode(parentRef);\n            const guide = $('.indent-guide', { style: `width: ${this.indent}px` });\n            if (this.activeIndentNodes.has(parent)) {\n                guide.classList.add('active');\n            }\n            if (templateData.indent.childElementCount === 0) {\n                templateData.indent.appendChild(guide);\n            }\n            else {\n                templateData.indent.insertBefore(guide, templateData.indent.firstElementChild);\n            }\n            this.renderedIndentGuides.add(parent, guide);\n            disposableStore.add(toDisposable(() => this.renderedIndentGuides.delete(parent, guide)));\n            node = parent;\n        }\n        templateData.indentGuidesDisposable = disposableStore;\n    }\n    _onDidChangeActiveNodes(nodes) {\n        if (!this.shouldRenderIndentGuides) {\n            return;\n        }\n        const set = new Set();\n        const model = this.modelProvider();\n        nodes.forEach(node => {\n            const ref = model.getNodeLocation(node);\n            try {\n                const parentRef = model.getParentNodeLocation(ref);\n                if (node.collapsible && node.children.length > 0 && !node.collapsed) {\n                    set.add(node);\n                }\n                else if (parentRef) {\n                    set.add(model.getNode(parentRef));\n                }\n            }\n            catch (_a) {\n                // noop\n            }\n        });\n        this.activeIndentNodes.forEach(node => {\n            if (!set.has(node)) {\n                this.renderedIndentGuides.forEach(node, line => line.classList.remove('active'));\n            }\n        });\n        set.forEach(node => {\n            if (!this.activeIndentNodes.has(node)) {\n                this.renderedIndentGuides.forEach(node, line => line.classList.add('active'));\n            }\n        });\n        this.activeIndentNodes = set;\n    }\n    dispose() {\n        this.renderedNodes.clear();\n        this.renderedElements.clear();\n        this.indentGuidesDisposable.dispose();\n        dispose(this.disposables);\n    }\n}\nTreeRenderer.DefaultIndent = 8;\nclass FindFilter {\n    get totalCount() { return this._totalCount; }\n    get matchCount() { return this._matchCount; }\n    constructor(tree, keyboardNavigationLabelProvider, _filter) {\n        this.tree = tree;\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n        this._filter = _filter;\n        this._totalCount = 0;\n        this._matchCount = 0;\n        this._pattern = '';\n        this._lowercasePattern = '';\n        this.disposables = new DisposableStore();\n        tree.onWillRefilter(this.reset, this, this.disposables);\n    }\n    filter(element, parentVisibility) {\n        let visibility = 1 /* TreeVisibility.Visible */;\n        if (this._filter) {\n            const result = this._filter.filter(element, parentVisibility);\n            if (typeof result === 'boolean') {\n                visibility = result ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n            }\n            else if (isFilterResult(result)) {\n                visibility = getVisibleState(result.visibility);\n            }\n            else {\n                visibility = result;\n            }\n            if (visibility === 0 /* TreeVisibility.Hidden */) {\n                return false;\n            }\n        }\n        this._totalCount++;\n        if (!this._pattern) {\n            this._matchCount++;\n            return { data: FuzzyScore.Default, visibility };\n        }\n        const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(element);\n        const labels = Array.isArray(label) ? label : [label];\n        for (const l of labels) {\n            const labelStr = l && l.toString();\n            if (typeof labelStr === 'undefined') {\n                return { data: FuzzyScore.Default, visibility };\n            }\n            let score;\n            if (this.tree.findMatchType === TreeFindMatchType.Contiguous) {\n                const index = labelStr.toLowerCase().indexOf(this._lowercasePattern);\n                if (index > -1) {\n                    score = [Number.MAX_SAFE_INTEGER, 0];\n                    for (let i = this._lowercasePattern.length; i > 0; i--) {\n                        score.push(index + i - 1);\n                    }\n                }\n            }\n            else {\n                score = fuzzyScore(this._pattern, this._lowercasePattern, 0, labelStr, labelStr.toLowerCase(), 0, { firstMatchCanBeWeak: true, boostFullMatch: true });\n            }\n            if (score) {\n                this._matchCount++;\n                return labels.length === 1 ?\n                    { data: score, visibility } :\n                    { data: { label: labelStr, score: score }, visibility };\n            }\n        }\n        if (this.tree.findMode === TreeFindMode.Filter) {\n            if (typeof this.tree.options.defaultFindVisibility === 'number') {\n                return this.tree.options.defaultFindVisibility;\n            }\n            else if (this.tree.options.defaultFindVisibility) {\n                return this.tree.options.defaultFindVisibility(element);\n            }\n            else {\n                return 2 /* TreeVisibility.Recurse */;\n            }\n        }\n        else {\n            return { data: FuzzyScore.Default, visibility };\n        }\n    }\n    reset() {\n        this._totalCount = 0;\n        this._matchCount = 0;\n    }\n    dispose() {\n        dispose(this.disposables);\n    }\n}\nexport class ModeToggle extends Toggle {\n    constructor(opts) {\n        var _a;\n        super({\n            icon: Codicon.listFilter,\n            title: localize('filter', \"Filter\"),\n            isChecked: (_a = opts.isChecked) !== null && _a !== void 0 ? _a : false,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nexport class FuzzyToggle extends Toggle {\n    constructor(opts) {\n        var _a;\n        super({\n            icon: Codicon.searchFuzzy,\n            title: localize('fuzzySearch', \"Fuzzy Match\"),\n            isChecked: (_a = opts.isChecked) !== null && _a !== void 0 ? _a : false,\n            inputActiveOptionBorder: opts.inputActiveOptionBorder,\n            inputActiveOptionForeground: opts.inputActiveOptionForeground,\n            inputActiveOptionBackground: opts.inputActiveOptionBackground\n        });\n    }\n}\nconst unthemedFindWidgetStyles = {\n    inputBoxStyles: unthemedInboxStyles,\n    toggleStyles: unthemedToggleStyles,\n    listFilterWidgetBackground: undefined,\n    listFilterWidgetNoMatchesOutline: undefined,\n    listFilterWidgetOutline: undefined,\n    listFilterWidgetShadow: undefined\n};\nexport var TreeFindMode;\n(function (TreeFindMode) {\n    TreeFindMode[TreeFindMode[\"Highlight\"] = 0] = \"Highlight\";\n    TreeFindMode[TreeFindMode[\"Filter\"] = 1] = \"Filter\";\n})(TreeFindMode || (TreeFindMode = {}));\nexport var TreeFindMatchType;\n(function (TreeFindMatchType) {\n    TreeFindMatchType[TreeFindMatchType[\"Fuzzy\"] = 0] = \"Fuzzy\";\n    TreeFindMatchType[TreeFindMatchType[\"Contiguous\"] = 1] = \"Contiguous\";\n})(TreeFindMatchType || (TreeFindMatchType = {}));\nclass FindWidget extends Disposable {\n    set mode(mode) {\n        this.modeToggle.checked = mode === TreeFindMode.Filter;\n        this.findInput.inputBox.setPlaceHolder(mode === TreeFindMode.Filter ? localize('type to filter', \"Type to filter\") : localize('type to search', \"Type to search\"));\n    }\n    set matchType(matchType) {\n        this.matchTypeToggle.checked = matchType === TreeFindMatchType.Fuzzy;\n    }\n    constructor(container, tree, contextViewProvider, mode, matchType, options) {\n        var _a;\n        super();\n        this.tree = tree;\n        this.elements = h('.monaco-tree-type-filter', [\n            h('.monaco-tree-type-filter-grab.codicon.codicon-debug-gripper@grab', { tabIndex: 0 }),\n            h('.monaco-tree-type-filter-input@findInput'),\n            h('.monaco-tree-type-filter-actionbar@actionbar'),\n        ]);\n        this.width = 0;\n        this.right = 0;\n        this.top = 0;\n        this._onDidDisable = new Emitter();\n        container.appendChild(this.elements.root);\n        this._register(toDisposable(() => container.removeChild(this.elements.root)));\n        const styles = (_a = options === null || options === void 0 ? void 0 : options.styles) !== null && _a !== void 0 ? _a : unthemedFindWidgetStyles;\n        if (styles.listFilterWidgetBackground) {\n            this.elements.root.style.backgroundColor = styles.listFilterWidgetBackground;\n        }\n        if (styles.listFilterWidgetShadow) {\n            this.elements.root.style.boxShadow = `0 0 8px 2px ${styles.listFilterWidgetShadow}`;\n        }\n        this.modeToggle = this._register(new ModeToggle(Object.assign(Object.assign({}, styles.toggleStyles), { isChecked: mode === TreeFindMode.Filter })));\n        this.matchTypeToggle = this._register(new FuzzyToggle(Object.assign(Object.assign({}, styles.toggleStyles), { isChecked: matchType === TreeFindMatchType.Fuzzy })));\n        this.onDidChangeMode = Event.map(this.modeToggle.onChange, () => this.modeToggle.checked ? TreeFindMode.Filter : TreeFindMode.Highlight, this._store);\n        this.onDidChangeMatchType = Event.map(this.matchTypeToggle.onChange, () => this.matchTypeToggle.checked ? TreeFindMatchType.Fuzzy : TreeFindMatchType.Contiguous, this._store);\n        this.findInput = this._register(new FindInput(this.elements.findInput, contextViewProvider, {\n            label: localize('type to search', \"Type to search\"),\n            additionalToggles: [this.modeToggle, this.matchTypeToggle],\n            showCommonFindToggles: false,\n            inputBoxStyles: styles.inputBoxStyles,\n            toggleStyles: styles.toggleStyles,\n            history: options === null || options === void 0 ? void 0 : options.history\n        }));\n        this.actionbar = this._register(new ActionBar(this.elements.actionbar));\n        this.mode = mode;\n        const emitter = this._register(new DomEmitter(this.findInput.inputBox.inputElement, 'keydown'));\n        const onKeyDown = this._register(Event.chain(emitter.event))\n            .map(e => new StandardKeyboardEvent(e))\n            .event;\n        this._register(onKeyDown((e) => {\n            // Using equals() so we reserve modified keys for future use\n            if (e.equals(3 /* KeyCode.Enter */)) {\n                // This is the only keyboard way to return to the tree from a history item that isn't the last one\n                e.preventDefault();\n                e.stopPropagation();\n                this.findInput.inputBox.addToHistory();\n                this.tree.domFocus();\n                return;\n            }\n            if (e.equals(18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                e.stopPropagation();\n                if (this.findInput.inputBox.isAtLastInHistory() || this.findInput.inputBox.isNowhereInHistory()) {\n                    // Retain original pre-history DownArrow behavior\n                    this.findInput.inputBox.addToHistory();\n                    this.tree.domFocus();\n                }\n                else {\n                    // Downward through history\n                    this.findInput.inputBox.showNextValue();\n                }\n                return;\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                e.stopPropagation();\n                // Upward through history\n                this.findInput.inputBox.showPreviousValue();\n                return;\n            }\n        }));\n        const closeAction = this._register(new Action('close', localize('close', \"Close\"), 'codicon codicon-close', true, () => this.dispose()));\n        this.actionbar.push(closeAction, { icon: true, label: false });\n        const onGrabMouseDown = this._register(new DomEmitter(this.elements.grab, 'mousedown'));\n        this._register(onGrabMouseDown.event(e => {\n            const disposables = new DisposableStore();\n            const onWindowMouseMove = disposables.add(new DomEmitter(window, 'mousemove'));\n            const onWindowMouseUp = disposables.add(new DomEmitter(window, 'mouseup'));\n            const startRight = this.right;\n            const startX = e.pageX;\n            const startTop = this.top;\n            const startY = e.pageY;\n            this.elements.grab.classList.add('grabbing');\n            const transition = this.elements.root.style.transition;\n            this.elements.root.style.transition = 'unset';\n            const update = (e) => {\n                const deltaX = e.pageX - startX;\n                this.right = startRight - deltaX;\n                const deltaY = e.pageY - startY;\n                this.top = startTop + deltaY;\n                this.layout();\n            };\n            disposables.add(onWindowMouseMove.event(update));\n            disposables.add(onWindowMouseUp.event(e => {\n                update(e);\n                this.elements.grab.classList.remove('grabbing');\n                this.elements.root.style.transition = transition;\n                disposables.dispose();\n            }));\n        }));\n        const onGrabKeyDown = this._register(Event.chain(this._register(new DomEmitter(this.elements.grab, 'keydown')).event))\n            .map(e => new StandardKeyboardEvent(e))\n            .event;\n        this._register(onGrabKeyDown((e) => {\n            let right;\n            let top;\n            if (e.keyCode === 15 /* KeyCode.LeftArrow */) {\n                right = Number.POSITIVE_INFINITY;\n            }\n            else if (e.keyCode === 17 /* KeyCode.RightArrow */) {\n                right = 0;\n            }\n            else if (e.keyCode === 10 /* KeyCode.Space */) {\n                right = this.right === 0 ? Number.POSITIVE_INFINITY : 0;\n            }\n            if (e.keyCode === 16 /* KeyCode.UpArrow */) {\n                top = 0;\n            }\n            else if (e.keyCode === 18 /* KeyCode.DownArrow */) {\n                top = Number.POSITIVE_INFINITY;\n            }\n            if (right !== undefined) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.right = right;\n                this.layout();\n            }\n            if (top !== undefined) {\n                e.preventDefault();\n                e.stopPropagation();\n                this.top = top;\n                const transition = this.elements.root.style.transition;\n                this.elements.root.style.transition = 'unset';\n                this.layout();\n                setTimeout(() => {\n                    this.elements.root.style.transition = transition;\n                }, 0);\n            }\n        }));\n        this.onDidChangeValue = this.findInput.onDidChange;\n    }\n    layout(width = this.width) {\n        this.width = width;\n        this.right = clamp(this.right, 0, Math.max(0, width - 212));\n        this.elements.root.style.right = `${this.right}px`;\n        this.top = clamp(this.top, 0, 24);\n        this.elements.root.style.top = `${this.top}px`;\n    }\n    showMessage(message) {\n        this.findInput.showMessage(message);\n    }\n    clearMessage() {\n        this.findInput.clearMessage();\n    }\n    dispose() {\n        const _super = Object.create(null, {\n            dispose: { get: () => super.dispose }\n        });\n        return __awaiter(this, void 0, void 0, function* () {\n            this._onDidDisable.fire();\n            this.elements.root.classList.add('disabled');\n            yield timeout(300);\n            _super.dispose.call(this);\n        });\n    }\n}\nclass FindController {\n    get pattern() { return this._pattern; }\n    get mode() { return this._mode; }\n    set mode(mode) {\n        if (mode === this._mode) {\n            return;\n        }\n        this._mode = mode;\n        if (this.widget) {\n            this.widget.mode = this._mode;\n        }\n        this.tree.refilter();\n        this.render();\n        this._onDidChangeMode.fire(mode);\n    }\n    get matchType() { return this._matchType; }\n    set matchType(matchType) {\n        if (matchType === this._matchType) {\n            return;\n        }\n        this._matchType = matchType;\n        if (this.widget) {\n            this.widget.matchType = this._matchType;\n        }\n        this.tree.refilter();\n        this.render();\n        this._onDidChangeMatchType.fire(matchType);\n    }\n    constructor(tree, model, view, filter, contextViewProvider, options = {}) {\n        var _a, _b;\n        this.tree = tree;\n        this.view = view;\n        this.filter = filter;\n        this.contextViewProvider = contextViewProvider;\n        this.options = options;\n        this._pattern = '';\n        this.width = 0;\n        this._onDidChangeMode = new Emitter();\n        this.onDidChangeMode = this._onDidChangeMode.event;\n        this._onDidChangeMatchType = new Emitter();\n        this.onDidChangeMatchType = this._onDidChangeMatchType.event;\n        this._onDidChangePattern = new Emitter();\n        this._onDidChangeOpenState = new Emitter();\n        this.onDidChangeOpenState = this._onDidChangeOpenState.event;\n        this.enabledDisposables = new DisposableStore();\n        this.disposables = new DisposableStore();\n        this._mode = (_a = tree.options.defaultFindMode) !== null && _a !== void 0 ? _a : TreeFindMode.Highlight;\n        this._matchType = (_b = tree.options.defaultFindMatchType) !== null && _b !== void 0 ? _b : TreeFindMatchType.Fuzzy;\n        model.onDidSplice(this.onDidSpliceModel, this, this.disposables);\n    }\n    updateOptions(optionsUpdate = {}) {\n        if (optionsUpdate.defaultFindMode !== undefined) {\n            this.mode = optionsUpdate.defaultFindMode;\n        }\n        if (optionsUpdate.defaultFindMatchType !== undefined) {\n            this.matchType = optionsUpdate.defaultFindMatchType;\n        }\n    }\n    onDidSpliceModel() {\n        if (!this.widget || this.pattern.length === 0) {\n            return;\n        }\n        this.tree.refilter();\n        this.render();\n    }\n    render() {\n        var _a, _b, _c, _d;\n        const noMatches = this.filter.totalCount > 0 && this.filter.matchCount === 0;\n        if (this.pattern && noMatches) {\n            if ((_a = this.tree.options.showNotFoundMessage) !== null && _a !== void 0 ? _a : true) {\n                (_b = this.widget) === null || _b === void 0 ? void 0 : _b.showMessage({ type: 2 /* MessageType.WARNING */, content: localize('not found', \"No elements found.\") });\n            }\n            else {\n                (_c = this.widget) === null || _c === void 0 ? void 0 : _c.showMessage({ type: 2 /* MessageType.WARNING */ });\n            }\n        }\n        else {\n            (_d = this.widget) === null || _d === void 0 ? void 0 : _d.clearMessage();\n        }\n    }\n    shouldAllowFocus(node) {\n        if (!this.widget || !this.pattern || this._mode === TreeFindMode.Filter) {\n            return true;\n        }\n        if (this.filter.totalCount > 0 && this.filter.matchCount <= 1) {\n            return true;\n        }\n        return !FuzzyScore.isDefault(node.filterData);\n    }\n    layout(width) {\n        var _a;\n        this.width = width;\n        (_a = this.widget) === null || _a === void 0 ? void 0 : _a.layout(width);\n    }\n    dispose() {\n        this._history = undefined;\n        this._onDidChangePattern.dispose();\n        this.enabledDisposables.dispose();\n        this.disposables.dispose();\n    }\n}\nfunction asTreeMouseEvent(event) {\n    let target = TreeMouseEventTarget.Unknown;\n    if (hasParentWithClass(event.browserEvent.target, 'monaco-tl-twistie', 'monaco-tl-row')) {\n        target = TreeMouseEventTarget.Twistie;\n    }\n    else if (hasParentWithClass(event.browserEvent.target, 'monaco-tl-contents', 'monaco-tl-row')) {\n        target = TreeMouseEventTarget.Element;\n    }\n    else if (hasParentWithClass(event.browserEvent.target, 'monaco-tree-type-filter', 'monaco-list')) {\n        target = TreeMouseEventTarget.Filter;\n    }\n    return {\n        browserEvent: event.browserEvent,\n        element: event.element ? event.element.element : null,\n        target\n    };\n}\nfunction dfs(node, fn) {\n    fn(node);\n    node.children.forEach(child => dfs(child, fn));\n}\n/**\n * The trait concept needs to exist at the tree level, because collapsed\n * tree nodes will not be known by the list.\n */\nclass Trait {\n    get nodeSet() {\n        if (!this._nodeSet) {\n            this._nodeSet = this.createNodeSet();\n        }\n        return this._nodeSet;\n    }\n    constructor(getFirstViewElementWithTrait, identityProvider) {\n        this.getFirstViewElementWithTrait = getFirstViewElementWithTrait;\n        this.identityProvider = identityProvider;\n        this.nodes = [];\n        this._onDidChange = new Emitter();\n        this.onDidChange = this._onDidChange.event;\n    }\n    set(nodes, browserEvent) {\n        if (!(browserEvent === null || browserEvent === void 0 ? void 0 : browserEvent.__forceEvent) && equals(this.nodes, nodes)) {\n            return;\n        }\n        this._set(nodes, false, browserEvent);\n    }\n    _set(nodes, silent, browserEvent) {\n        this.nodes = [...nodes];\n        this.elements = undefined;\n        this._nodeSet = undefined;\n        if (!silent) {\n            const that = this;\n            this._onDidChange.fire({ get elements() { return that.get(); }, browserEvent });\n        }\n    }\n    get() {\n        if (!this.elements) {\n            this.elements = this.nodes.map(node => node.element);\n        }\n        return [...this.elements];\n    }\n    getNodes() {\n        return this.nodes;\n    }\n    has(node) {\n        return this.nodeSet.has(node);\n    }\n    onDidModelSplice({ insertedNodes, deletedNodes }) {\n        if (!this.identityProvider) {\n            const set = this.createNodeSet();\n            const visit = (node) => set.delete(node);\n            deletedNodes.forEach(node => dfs(node, visit));\n            this.set([...set.values()]);\n            return;\n        }\n        const deletedNodesIdSet = new Set();\n        const deletedNodesVisitor = (node) => deletedNodesIdSet.add(this.identityProvider.getId(node.element).toString());\n        deletedNodes.forEach(node => dfs(node, deletedNodesVisitor));\n        const insertedNodesMap = new Map();\n        const insertedNodesVisitor = (node) => insertedNodesMap.set(this.identityProvider.getId(node.element).toString(), node);\n        insertedNodes.forEach(node => dfs(node, insertedNodesVisitor));\n        const nodes = [];\n        for (const node of this.nodes) {\n            const id = this.identityProvider.getId(node.element).toString();\n            const wasDeleted = deletedNodesIdSet.has(id);\n            if (!wasDeleted) {\n                nodes.push(node);\n            }\n            else {\n                const insertedNode = insertedNodesMap.get(id);\n                if (insertedNode && insertedNode.visible) {\n                    nodes.push(insertedNode);\n                }\n            }\n        }\n        if (this.nodes.length > 0 && nodes.length === 0) {\n            const node = this.getFirstViewElementWithTrait();\n            if (node) {\n                nodes.push(node);\n            }\n        }\n        this._set(nodes, true);\n    }\n    createNodeSet() {\n        const set = new Set();\n        for (const node of this.nodes) {\n            set.add(node);\n        }\n        return set;\n    }\n}\nclass TreeNodeListMouseController extends MouseController {\n    constructor(list, tree) {\n        super(list);\n        this.tree = tree;\n    }\n    onViewPointer(e) {\n        if (isButton(e.browserEvent.target) ||\n            isInputElement(e.browserEvent.target) ||\n            isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        const node = e.element;\n        if (!node) {\n            return super.onViewPointer(e);\n        }\n        if (this.isSelectionRangeChangeEvent(e) || this.isSelectionSingleChangeEvent(e)) {\n            return super.onViewPointer(e);\n        }\n        const target = e.browserEvent.target;\n        const onTwistie = target.classList.contains('monaco-tl-twistie')\n            || (target.classList.contains('monaco-icon-label') && target.classList.contains('folder-icon') && e.browserEvent.offsetX < 16);\n        let expandOnlyOnTwistieClick = false;\n        if (typeof this.tree.expandOnlyOnTwistieClick === 'function') {\n            expandOnlyOnTwistieClick = this.tree.expandOnlyOnTwistieClick(node.element);\n        }\n        else {\n            expandOnlyOnTwistieClick = !!this.tree.expandOnlyOnTwistieClick;\n        }\n        if (expandOnlyOnTwistieClick && !onTwistie && e.browserEvent.detail !== 2) {\n            return super.onViewPointer(e);\n        }\n        if (!this.tree.expandOnDoubleClick && e.browserEvent.detail === 2) {\n            return super.onViewPointer(e);\n        }\n        if (node.collapsible) {\n            const location = this.tree.getNodeLocation(node);\n            const recursive = e.browserEvent.altKey;\n            this.tree.setFocus([location]);\n            this.tree.toggleCollapsed(location, recursive);\n            if (expandOnlyOnTwistieClick && onTwistie) {\n                // Do not set this before calling a handler on the super class, because it will reject it as handled\n                e.browserEvent.isHandledByList = true;\n                return;\n            }\n        }\n        super.onViewPointer(e);\n    }\n    onDoubleClick(e) {\n        const onTwistie = e.browserEvent.target.classList.contains('monaco-tl-twistie');\n        if (onTwistie || !this.tree.expandOnDoubleClick) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        super.onDoubleClick(e);\n    }\n}\n/**\n * We use this List subclass to restore selection and focus as nodes\n * get rendered in the list, possibly due to a node expand() call.\n */\nclass TreeNodeList extends List {\n    constructor(user, container, virtualDelegate, renderers, focusTrait, selectionTrait, anchorTrait, options) {\n        super(user, container, virtualDelegate, renderers, options);\n        this.focusTrait = focusTrait;\n        this.selectionTrait = selectionTrait;\n        this.anchorTrait = anchorTrait;\n    }\n    createMouseController(options) {\n        return new TreeNodeListMouseController(this, options.tree);\n    }\n    splice(start, deleteCount, elements = []) {\n        super.splice(start, deleteCount, elements);\n        if (elements.length === 0) {\n            return;\n        }\n        const additionalFocus = [];\n        const additionalSelection = [];\n        let anchor;\n        elements.forEach((node, index) => {\n            if (this.focusTrait.has(node)) {\n                additionalFocus.push(start + index);\n            }\n            if (this.selectionTrait.has(node)) {\n                additionalSelection.push(start + index);\n            }\n            if (this.anchorTrait.has(node)) {\n                anchor = start + index;\n            }\n        });\n        if (additionalFocus.length > 0) {\n            super.setFocus(distinct([...super.getFocus(), ...additionalFocus]));\n        }\n        if (additionalSelection.length > 0) {\n            super.setSelection(distinct([...super.getSelection(), ...additionalSelection]));\n        }\n        if (typeof anchor === 'number') {\n            super.setAnchor(anchor);\n        }\n    }\n    setFocus(indexes, browserEvent, fromAPI = false) {\n        super.setFocus(indexes, browserEvent);\n        if (!fromAPI) {\n            this.focusTrait.set(indexes.map(i => this.element(i)), browserEvent);\n        }\n    }\n    setSelection(indexes, browserEvent, fromAPI = false) {\n        super.setSelection(indexes, browserEvent);\n        if (!fromAPI) {\n            this.selectionTrait.set(indexes.map(i => this.element(i)), browserEvent);\n        }\n    }\n    setAnchor(index, fromAPI = false) {\n        super.setAnchor(index);\n        if (!fromAPI) {\n            if (typeof index === 'undefined') {\n                this.anchorTrait.set([]);\n            }\n            else {\n                this.anchorTrait.set([this.element(index)]);\n            }\n        }\n    }\n}\nexport class AbstractTree {\n    get onDidScroll() { return this.view.onDidScroll; }\n    get onDidChangeFocus() { return this.eventBufferer.wrapEvent(this.focus.onDidChange); }\n    get onDidChangeSelection() { return this.eventBufferer.wrapEvent(this.selection.onDidChange); }\n    get onMouseDblClick() { return Event.filter(Event.map(this.view.onMouseDblClick, asTreeMouseEvent), e => e.target !== TreeMouseEventTarget.Filter); }\n    get onPointer() { return Event.map(this.view.onPointer, asTreeMouseEvent); }\n    get onDidFocus() { return this.view.onDidFocus; }\n    get onDidChangeModel() { return Event.signal(this.model.onDidSplice); }\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    get findMode() { var _a, _b; return (_b = (_a = this.findController) === null || _a === void 0 ? void 0 : _a.mode) !== null && _b !== void 0 ? _b : TreeFindMode.Highlight; }\n    set findMode(findMode) { if (this.findController) {\n        this.findController.mode = findMode;\n    } }\n    get findMatchType() { var _a, _b; return (_b = (_a = this.findController) === null || _a === void 0 ? void 0 : _a.matchType) !== null && _b !== void 0 ? _b : TreeFindMatchType.Fuzzy; }\n    set findMatchType(findFuzzy) { if (this.findController) {\n        this.findController.matchType = findFuzzy;\n    } }\n    get expandOnDoubleClick() { return typeof this._options.expandOnDoubleClick === 'undefined' ? true : this._options.expandOnDoubleClick; }\n    get expandOnlyOnTwistieClick() { return typeof this._options.expandOnlyOnTwistieClick === 'undefined' ? true : this._options.expandOnlyOnTwistieClick; }\n    get onDidDispose() { return this.view.onDidDispose; }\n    constructor(_user, container, delegate, renderers, _options = {}) {\n        var _a;\n        this._user = _user;\n        this._options = _options;\n        this.eventBufferer = new EventBufferer();\n        this.onDidChangeFindOpenState = Event.None;\n        this.disposables = new DisposableStore();\n        this._onWillRefilter = new Emitter();\n        this.onWillRefilter = this._onWillRefilter.event;\n        this._onDidUpdateOptions = new Emitter();\n        const treeDelegate = new ComposedTreeDelegate(delegate);\n        const onDidChangeCollapseStateRelay = new Relay();\n        const onDidChangeActiveNodes = new Relay();\n        const activeNodes = this.disposables.add(new EventCollection(onDidChangeActiveNodes.event));\n        const renderedIndentGuides = new SetMap();\n        this.renderers = renderers.map(r => new TreeRenderer(r, () => this.model, onDidChangeCollapseStateRelay.event, activeNodes, renderedIndentGuides, _options));\n        for (const r of this.renderers) {\n            this.disposables.add(r);\n        }\n        let filter;\n        if (_options.keyboardNavigationLabelProvider) {\n            filter = new FindFilter(this, _options.keyboardNavigationLabelProvider, _options.filter);\n            _options = Object.assign(Object.assign({}, _options), { filter: filter }); // TODO need typescript help here\n            this.disposables.add(filter);\n        }\n        this.focus = new Trait(() => this.view.getFocusedElements()[0], _options.identityProvider);\n        this.selection = new Trait(() => this.view.getSelectedElements()[0], _options.identityProvider);\n        this.anchor = new Trait(() => this.view.getAnchorElement(), _options.identityProvider);\n        this.view = new TreeNodeList(_user, container, treeDelegate, this.renderers, this.focus, this.selection, this.anchor, Object.assign(Object.assign({}, asListOptions(() => this.model, _options)), { tree: this }));\n        this.model = this.createModel(_user, this.view, _options);\n        onDidChangeCollapseStateRelay.input = this.model.onDidChangeCollapseState;\n        const onDidModelSplice = Event.forEach(this.model.onDidSplice, e => {\n            this.eventBufferer.bufferEvents(() => {\n                this.focus.onDidModelSplice(e);\n                this.selection.onDidModelSplice(e);\n            });\n        }, this.disposables);\n        // Make sure the `forEach` always runs\n        onDidModelSplice(() => null, null, this.disposables);\n        // Active nodes can change when the model changes or when focus or selection change.\n        // We debounce it with 0 delay since these events may fire in the same stack and we only\n        // want to run this once. It also doesn't matter if it runs on the next tick since it's only\n        // a nice to have UI feature.\n        onDidChangeActiveNodes.input = Event.chain(Event.any(onDidModelSplice, this.focus.onDidChange, this.selection.onDidChange))\n            .debounce(() => null, 0)\n            .map(() => {\n            const set = new Set();\n            for (const node of this.focus.getNodes()) {\n                set.add(node);\n            }\n            for (const node of this.selection.getNodes()) {\n                set.add(node);\n            }\n            return [...set.values()];\n        }).event;\n        if (_options.keyboardSupport !== false) {\n            const onKeyDown = Event.chain(this.view.onKeyDown)\n                .filter(e => !isInputElement(e.target))\n                .map(e => new StandardKeyboardEvent(e));\n            onKeyDown.filter(e => e.keyCode === 15 /* KeyCode.LeftArrow */).on(this.onLeftArrow, this, this.disposables);\n            onKeyDown.filter(e => e.keyCode === 17 /* KeyCode.RightArrow */).on(this.onRightArrow, this, this.disposables);\n            onKeyDown.filter(e => e.keyCode === 10 /* KeyCode.Space */).on(this.onSpace, this, this.disposables);\n        }\n        if (((_a = _options.findWidgetEnabled) !== null && _a !== void 0 ? _a : true) && _options.keyboardNavigationLabelProvider && _options.contextViewProvider) {\n            const opts = this.options.findWidgetStyles ? { styles: this.options.findWidgetStyles } : undefined;\n            this.findController = new FindController(this, this.model, this.view, filter, _options.contextViewProvider, opts);\n            this.focusNavigationFilter = node => this.findController.shouldAllowFocus(node);\n            this.onDidChangeFindOpenState = this.findController.onDidChangeOpenState;\n            this.disposables.add(this.findController);\n            this.onDidChangeFindMode = this.findController.onDidChangeMode;\n            this.onDidChangeFindMatchType = this.findController.onDidChangeMatchType;\n        }\n        else {\n            this.onDidChangeFindMode = Event.None;\n            this.onDidChangeFindMatchType = Event.None;\n        }\n        this.styleElement = createStyleSheet(this.view.getHTMLElement());\n        this.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n    }\n    updateOptions(optionsUpdate = {}) {\n        var _a;\n        this._options = Object.assign(Object.assign({}, this._options), optionsUpdate);\n        for (const renderer of this.renderers) {\n            renderer.updateOptions(optionsUpdate);\n        }\n        this.view.updateOptions(this._options);\n        (_a = this.findController) === null || _a === void 0 ? void 0 : _a.updateOptions(optionsUpdate);\n        this._onDidUpdateOptions.fire(this._options);\n        this.getHTMLElement().classList.toggle('always', this._options.renderIndentGuides === RenderIndentGuides.Always);\n    }\n    get options() {\n        return this._options;\n    }\n    // Widget\n    getHTMLElement() {\n        return this.view.getHTMLElement();\n    }\n    get scrollTop() {\n        return this.view.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.view.scrollTop = scrollTop;\n    }\n    get scrollHeight() {\n        return this.view.scrollHeight;\n    }\n    get renderHeight() {\n        return this.view.renderHeight;\n    }\n    domFocus() {\n        this.view.domFocus();\n    }\n    layout(height, width) {\n        var _a;\n        this.view.layout(height, width);\n        if (isNumber(width)) {\n            (_a = this.findController) === null || _a === void 0 ? void 0 : _a.layout(width);\n        }\n    }\n    style(styles) {\n        const suffix = `.${this.view.domId}`;\n        const content = [];\n        if (styles.treeIndentGuidesStroke) {\n            content.push(`.monaco-list${suffix}:hover .monaco-tl-indent > .indent-guide, .monaco-list${suffix}.always .monaco-tl-indent > .indent-guide  { border-color: ${styles.treeInactiveIndentGuidesStroke}; }`);\n            content.push(`.monaco-list${suffix} .monaco-tl-indent > .indent-guide.active { border-color: ${styles.treeIndentGuidesStroke}; }`);\n        }\n        this.styleElement.textContent = content.join('\\n');\n        this.view.style(styles);\n    }\n    // Tree navigation\n    getParentElement(location) {\n        const parentRef = this.model.getParentNodeLocation(location);\n        const parentNode = this.model.getNode(parentRef);\n        return parentNode.element;\n    }\n    getFirstElementChild(location) {\n        return this.model.getFirstElementChild(location);\n    }\n    // Tree\n    getNode(location) {\n        return this.model.getNode(location);\n    }\n    getNodeLocation(node) {\n        return this.model.getNodeLocation(node);\n    }\n    collapse(location, recursive = false) {\n        return this.model.setCollapsed(location, true, recursive);\n    }\n    expand(location, recursive = false) {\n        return this.model.setCollapsed(location, false, recursive);\n    }\n    toggleCollapsed(location, recursive = false) {\n        return this.model.setCollapsed(location, undefined, recursive);\n    }\n    isCollapsible(location) {\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(location, collapsible) {\n        return this.model.setCollapsible(location, collapsible);\n    }\n    isCollapsed(location) {\n        return this.model.isCollapsed(location);\n    }\n    refilter() {\n        this._onWillRefilter.fire(undefined);\n        this.model.refilter();\n    }\n    setSelection(elements, browserEvent) {\n        const nodes = elements.map(e => this.model.getNode(e));\n        this.selection.set(nodes, browserEvent);\n        const indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n        this.view.setSelection(indexes, browserEvent, true);\n    }\n    getSelection() {\n        return this.selection.get();\n    }\n    setFocus(elements, browserEvent) {\n        const nodes = elements.map(e => this.model.getNode(e));\n        this.focus.set(nodes, browserEvent);\n        const indexes = elements.map(e => this.model.getListIndex(e)).filter(i => i > -1);\n        this.view.setFocus(indexes, browserEvent, true);\n    }\n    getFocus() {\n        return this.focus.get();\n    }\n    reveal(location, relativeTop) {\n        this.model.expandTo(location);\n        const index = this.model.getListIndex(location);\n        if (index === -1) {\n            return;\n        }\n        this.view.reveal(index, relativeTop);\n    }\n    // List\n    onLeftArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const didChange = this.model.setCollapsed(location, true);\n        if (!didChange) {\n            const parentLocation = this.model.getParentNodeLocation(location);\n            if (!parentLocation) {\n                return;\n            }\n            const parentListIndex = this.model.getListIndex(parentLocation);\n            this.view.reveal(parentListIndex);\n            this.view.setFocus([parentListIndex]);\n        }\n    }\n    onRightArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const didChange = this.model.setCollapsed(location, false);\n        if (!didChange) {\n            if (!node.children.some(child => child.visible)) {\n                return;\n            }\n            const [focusedIndex] = this.view.getFocus();\n            const firstChildIndex = focusedIndex + 1;\n            this.view.reveal(firstChildIndex);\n            this.view.setFocus([firstChildIndex]);\n        }\n    }\n    onSpace(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        const nodes = this.view.getFocusedElements();\n        if (nodes.length === 0) {\n            return;\n        }\n        const node = nodes[0];\n        const location = this.model.getNodeLocation(node);\n        const recursive = e.browserEvent.altKey;\n        this.model.setCollapsed(location, undefined, recursive);\n    }\n    dispose() {\n        dispose(this.disposables);\n        this.view.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ElementsDragAndDropData } from '../list/listView.js';\nimport { ComposedTreeDelegate } from './abstractTree.js';\nimport { getVisibleState, isFilterResult } from './indexTreeModel.js';\nimport { CompressibleObjectTree, ObjectTree } from './objectTree.js';\nimport { TreeError, WeakMapper } from './tree.js';\nimport { createCancelablePromise, Promises, timeout } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { isCancellationError, onUnexpectedError } from '../../../common/errors.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { isIterable } from '../../../common/types.js';\nfunction createAsyncDataTreeNode(props) {\n    return Object.assign(Object.assign({}, props), { children: [], refreshPromise: undefined, stale: true, slow: false, collapsedByDefault: undefined });\n}\nfunction isAncestor(ancestor, descendant) {\n    if (!descendant.parent) {\n        return false;\n    }\n    else if (descendant.parent === ancestor) {\n        return true;\n    }\n    else {\n        return isAncestor(ancestor, descendant.parent);\n    }\n}\nfunction intersects(node, other) {\n    return node === other || isAncestor(node, other) || isAncestor(other, node);\n}\nclass AsyncDataTreeNodeWrapper {\n    get element() { return this.node.element.element; }\n    get children() { return this.node.children.map(node => new AsyncDataTreeNodeWrapper(node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(node) {\n        this.node = node;\n    }\n}\nclass AsyncDataTreeRenderer {\n    constructor(renderer, nodeMapper, onDidChangeTwistieState) {\n        this.renderer = renderer;\n        this.nodeMapper = nodeMapper;\n        this.onDidChangeTwistieState = onDidChangeTwistieState;\n        this.renderedNodes = new Map();\n        this.templateId = renderer.templateId;\n    }\n    renderTemplate(container) {\n        const templateData = this.renderer.renderTemplate(container);\n        return { templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderer.renderElement(this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    renderTwistie(element, twistieElement) {\n        if (element.slow) {\n            twistieElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return true;\n        }\n        else {\n            twistieElement.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return false;\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b;\n        (_b = (_a = this.renderer).disposeElement) === null || _b === void 0 ? void 0 : _b.call(_a, this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    dispose() {\n        this.renderedNodes.clear();\n    }\n}\nfunction asTreeEvent(e) {\n    return {\n        browserEvent: e.browserEvent,\n        elements: e.elements.map(e => e.element)\n    };\n}\nfunction asTreeMouseEvent(e) {\n    return {\n        browserEvent: e.browserEvent,\n        element: e.element && e.element.element,\n        target: e.target\n    };\n}\nclass AsyncDataTreeElementsDragAndDropData extends ElementsDragAndDropData {\n    constructor(data) {\n        super(data.elements.map(node => node.element));\n        this.data = data;\n    }\n}\nfunction asAsyncDataTreeDragAndDropData(data) {\n    if (data instanceof ElementsDragAndDropData) {\n        return new AsyncDataTreeElementsDragAndDropData(data);\n    }\n    return data;\n}\nclass AsyncDataTreeNodeListDragAndDrop {\n    constructor(dnd) {\n        this.dnd = dnd;\n    }\n    getDragURI(node) {\n        return this.dnd.getDragURI(node.element);\n    }\n    getDragLabel(nodes, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(nodes.map(node => node.element), originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, asAsyncDataTreeDragAndDropData(data), originalEvent);\n    }\n    onDragOver(data, targetNode, targetIndex, originalEvent, raw = true) {\n        return this.dnd.onDragOver(asAsyncDataTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n    }\n    drop(data, targetNode, targetIndex, originalEvent) {\n        this.dnd.drop(asAsyncDataTreeDragAndDropData(data), targetNode && targetNode.element, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n}\nfunction asObjectTreeOptions(options) {\n    return options && Object.assign(Object.assign({}, options), { collapseByDefault: true, identityProvider: options.identityProvider && {\n            getId(el) {\n                return options.identityProvider.getId(el.element);\n            }\n        }, dnd: options.dnd && new AsyncDataTreeNodeListDragAndDrop(options.dnd), multipleSelectionController: options.multipleSelectionController && {\n            isSelectionSingleChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionSingleChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            },\n            isSelectionRangeChangeEvent(e) {\n                return options.multipleSelectionController.isSelectionRangeChangeEvent(Object.assign(Object.assign({}, e), { element: e.element }));\n            }\n        }, accessibilityProvider: options.accessibilityProvider && Object.assign(Object.assign({}, options.accessibilityProvider), { getPosInSet: undefined, getSetSize: undefined, getRole: options.accessibilityProvider.getRole ? (el) => {\n                return options.accessibilityProvider.getRole(el.element);\n            } : () => 'treeitem', isChecked: options.accessibilityProvider.isChecked ? (e) => {\n                var _a;\n                return !!((_a = options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.isChecked(e.element));\n            } : undefined, getAriaLabel(e) {\n                return options.accessibilityProvider.getAriaLabel(e.element);\n            },\n            getWidgetAriaLabel() {\n                return options.accessibilityProvider.getWidgetAriaLabel();\n            }, getWidgetRole: options.accessibilityProvider.getWidgetRole ? () => options.accessibilityProvider.getWidgetRole() : () => 'tree', getAriaLevel: options.accessibilityProvider.getAriaLevel && (node => {\n                return options.accessibilityProvider.getAriaLevel(node.element);\n            }), getActiveDescendantId: options.accessibilityProvider.getActiveDescendantId && (node => {\n                return options.accessibilityProvider.getActiveDescendantId(node.element);\n            }) }), filter: options.filter && {\n            filter(e, parentVisibility) {\n                return options.filter.filter(e.element, parentVisibility);\n            }\n        }, keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && Object.assign(Object.assign({}, options.keyboardNavigationLabelProvider), { getKeyboardNavigationLabel(e) {\n                return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e.element);\n            } }), sorter: undefined, expandOnlyOnTwistieClick: typeof options.expandOnlyOnTwistieClick === 'undefined' ? undefined : (typeof options.expandOnlyOnTwistieClick !== 'function' ? options.expandOnlyOnTwistieClick : (e => options.expandOnlyOnTwistieClick(e.element))), defaultFindVisibility: e => {\n            if (e.hasChildren && e.stale) {\n                return 1 /* TreeVisibility.Visible */;\n            }\n            else if (typeof options.defaultFindVisibility === 'number') {\n                return options.defaultFindVisibility;\n            }\n            else if (typeof options.defaultFindVisibility === 'undefined') {\n                return 2 /* TreeVisibility.Recurse */;\n            }\n            else {\n                return options.defaultFindVisibility(e.element);\n            }\n        } });\n}\nfunction dfs(node, fn) {\n    fn(node);\n    node.children.forEach(child => dfs(child, fn));\n}\nexport class AsyncDataTree {\n    get onDidScroll() { return this.tree.onDidScroll; }\n    get onDidChangeFocus() { return Event.map(this.tree.onDidChangeFocus, asTreeEvent); }\n    get onDidChangeSelection() { return Event.map(this.tree.onDidChangeSelection, asTreeEvent); }\n    get onMouseDblClick() { return Event.map(this.tree.onMouseDblClick, asTreeMouseEvent); }\n    get onPointer() { return Event.map(this.tree.onPointer, asTreeMouseEvent); }\n    get onDidFocus() { return this.tree.onDidFocus; }\n    /**\n     * To be used internally only!\n     * @deprecated\n     */\n    get onDidChangeModel() { return this.tree.onDidChangeModel; }\n    get onDidChangeCollapseState() { return this.tree.onDidChangeCollapseState; }\n    get onDidChangeFindOpenState() { return this.tree.onDidChangeFindOpenState; }\n    get onDidDispose() { return this.tree.onDidDispose; }\n    constructor(user, container, delegate, renderers, dataSource, options = {}) {\n        this.user = user;\n        this.dataSource = dataSource;\n        this.nodes = new Map();\n        this.subTreeRefreshPromises = new Map();\n        this.refreshPromises = new Map();\n        this._onDidRender = new Emitter();\n        this._onDidChangeNodeSlowState = new Emitter();\n        this.nodeMapper = new WeakMapper(node => new AsyncDataTreeNodeWrapper(node));\n        this.disposables = new DisposableStore();\n        this.identityProvider = options.identityProvider;\n        this.autoExpandSingleChildren = typeof options.autoExpandSingleChildren === 'undefined' ? false : options.autoExpandSingleChildren;\n        this.sorter = options.sorter;\n        this.collapseByDefault = options.collapseByDefault;\n        this.tree = this.createTree(user, container, delegate, renderers, options);\n        this.onDidChangeFindMode = this.tree.onDidChangeFindMode;\n        this.root = createAsyncDataTreeNode({\n            element: undefined,\n            parent: null,\n            hasChildren: true\n        });\n        if (this.identityProvider) {\n            this.root = Object.assign(Object.assign({}, this.root), { id: null });\n        }\n        this.nodes.set(null, this.root);\n        this.tree.onDidChangeCollapseState(this._onDidChangeCollapseState, this, this.disposables);\n    }\n    createTree(user, container, delegate, renderers, options) {\n        const objectTreeDelegate = new ComposedTreeDelegate(delegate);\n        const objectTreeRenderers = renderers.map(r => new AsyncDataTreeRenderer(r, this.nodeMapper, this._onDidChangeNodeSlowState.event));\n        const objectTreeOptions = asObjectTreeOptions(options) || {};\n        return new ObjectTree(user, container, objectTreeDelegate, objectTreeRenderers, objectTreeOptions);\n    }\n    updateOptions(options = {}) {\n        this.tree.updateOptions(options);\n    }\n    // Widget\n    getHTMLElement() {\n        return this.tree.getHTMLElement();\n    }\n    get scrollTop() {\n        return this.tree.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.tree.scrollTop = scrollTop;\n    }\n    get scrollHeight() {\n        return this.tree.scrollHeight;\n    }\n    get renderHeight() {\n        return this.tree.renderHeight;\n    }\n    domFocus() {\n        this.tree.domFocus();\n    }\n    layout(height, width) {\n        this.tree.layout(height, width);\n    }\n    style(styles) {\n        this.tree.style(styles);\n    }\n    // Model\n    getInput() {\n        return this.root.element;\n    }\n    setInput(input, viewState) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this.refreshPromises.forEach(promise => promise.cancel());\n            this.refreshPromises.clear();\n            this.root.element = input;\n            const viewStateContext = viewState && { viewState, focus: [], selection: [] };\n            yield this._updateChildren(input, true, false, viewStateContext);\n            if (viewStateContext) {\n                this.tree.setFocus(viewStateContext.focus);\n                this.tree.setSelection(viewStateContext.selection);\n            }\n            if (viewState && typeof viewState.scrollTop === 'number') {\n                this.scrollTop = viewState.scrollTop;\n            }\n        });\n    }\n    _updateChildren(element = this.root.element, recursive = true, rerender = false, viewStateContext, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.root.element === 'undefined') {\n                throw new TreeError(this.user, 'Tree input not set');\n            }\n            if (this.root.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            const node = this.getDataNode(element);\n            yield this.refreshAndRenderNode(node, recursive, viewStateContext, options);\n            if (rerender) {\n                try {\n                    this.tree.rerender(node);\n                }\n                catch (_a) {\n                    // missing nodes are fine, this could've resulted from\n                    // parallel refresh calls, removing `node` altogether\n                }\n            }\n        });\n    }\n    // View\n    rerender(element) {\n        if (element === undefined || element === this.root.element) {\n            this.tree.rerender();\n            return;\n        }\n        const node = this.getDataNode(element);\n        this.tree.rerender(node);\n    }\n    // Tree\n    getNode(element = this.root.element) {\n        const dataNode = this.getDataNode(element);\n        const node = this.tree.getNode(dataNode === this.root ? null : dataNode);\n        return this.nodeMapper.map(node);\n    }\n    collapse(element, recursive = false) {\n        const node = this.getDataNode(element);\n        return this.tree.collapse(node === this.root ? null : node, recursive);\n    }\n    expand(element, recursive = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.root.element === 'undefined') {\n                throw new TreeError(this.user, 'Tree input not set');\n            }\n            if (this.root.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            const node = this.getDataNode(element);\n            if (this.tree.hasElement(node) && !this.tree.isCollapsible(node)) {\n                return false;\n            }\n            if (node.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            if (node !== this.root && !node.refreshPromise && !this.tree.isCollapsed(node)) {\n                return false;\n            }\n            const result = this.tree.expand(node === this.root ? null : node, recursive);\n            if (node.refreshPromise) {\n                yield this.root.refreshPromise;\n                yield Event.toPromise(this._onDidRender.event);\n            }\n            return result;\n        });\n    }\n    setSelection(elements, browserEvent) {\n        const nodes = elements.map(e => this.getDataNode(e));\n        this.tree.setSelection(nodes, browserEvent);\n    }\n    getSelection() {\n        const nodes = this.tree.getSelection();\n        return nodes.map(n => n.element);\n    }\n    setFocus(elements, browserEvent) {\n        const nodes = elements.map(e => this.getDataNode(e));\n        this.tree.setFocus(nodes, browserEvent);\n    }\n    getFocus() {\n        const nodes = this.tree.getFocus();\n        return nodes.map(n => n.element);\n    }\n    reveal(element, relativeTop) {\n        this.tree.reveal(this.getDataNode(element), relativeTop);\n    }\n    // Tree navigation\n    getParentElement(element) {\n        const node = this.tree.getParentElement(this.getDataNode(element));\n        return (node && node.element);\n    }\n    getFirstElementChild(element = this.root.element) {\n        const dataNode = this.getDataNode(element);\n        const node = this.tree.getFirstElementChild(dataNode === this.root ? null : dataNode);\n        return (node && node.element);\n    }\n    // Implementation\n    getDataNode(element) {\n        const node = this.nodes.get((element === this.root.element ? null : element));\n        if (!node) {\n            throw new TreeError(this.user, `Data tree node not found: ${element}`);\n        }\n        return node;\n    }\n    refreshAndRenderNode(node, recursive, viewStateContext, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.refreshNode(node, recursive, viewStateContext);\n            this.render(node, viewStateContext, options);\n        });\n    }\n    refreshNode(node, recursive, viewStateContext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let result;\n            this.subTreeRefreshPromises.forEach((refreshPromise, refreshNode) => {\n                if (!result && intersects(refreshNode, node)) {\n                    result = refreshPromise.then(() => this.refreshNode(node, recursive, viewStateContext));\n                }\n            });\n            if (result) {\n                return result;\n            }\n            if (node !== this.root) {\n                const treeNode = this.tree.getNode(node);\n                if (treeNode.collapsed) {\n                    node.hasChildren = !!this.dataSource.hasChildren(node.element);\n                    node.stale = true;\n                    return;\n                }\n            }\n            return this.doRefreshSubTree(node, recursive, viewStateContext);\n        });\n    }\n    doRefreshSubTree(node, recursive, viewStateContext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let done;\n            node.refreshPromise = new Promise(c => done = c);\n            this.subTreeRefreshPromises.set(node, node.refreshPromise);\n            node.refreshPromise.finally(() => {\n                node.refreshPromise = undefined;\n                this.subTreeRefreshPromises.delete(node);\n            });\n            try {\n                const childrenToRefresh = yield this.doRefreshNode(node, recursive, viewStateContext);\n                node.stale = false;\n                yield Promises.settled(childrenToRefresh.map(child => this.doRefreshSubTree(child, recursive, viewStateContext)));\n            }\n            finally {\n                done();\n            }\n        });\n    }\n    doRefreshNode(node, recursive, viewStateContext) {\n        return __awaiter(this, void 0, void 0, function* () {\n            node.hasChildren = !!this.dataSource.hasChildren(node.element);\n            let childrenPromise;\n            if (!node.hasChildren) {\n                childrenPromise = Promise.resolve(Iterable.empty());\n            }\n            else {\n                const children = this.doGetChildren(node);\n                if (isIterable(children)) {\n                    childrenPromise = Promise.resolve(children);\n                }\n                else {\n                    const slowTimeout = timeout(800);\n                    slowTimeout.then(() => {\n                        node.slow = true;\n                        this._onDidChangeNodeSlowState.fire(node);\n                    }, _ => null);\n                    childrenPromise = children.finally(() => slowTimeout.cancel());\n                }\n            }\n            try {\n                const children = yield childrenPromise;\n                return this.setChildren(node, children, recursive, viewStateContext);\n            }\n            catch (err) {\n                if (node !== this.root && this.tree.hasElement(node)) {\n                    this.tree.collapse(node);\n                }\n                if (isCancellationError(err)) {\n                    return [];\n                }\n                throw err;\n            }\n            finally {\n                if (node.slow) {\n                    node.slow = false;\n                    this._onDidChangeNodeSlowState.fire(node);\n                }\n            }\n        });\n    }\n    doGetChildren(node) {\n        let result = this.refreshPromises.get(node);\n        if (result) {\n            return result;\n        }\n        const children = this.dataSource.getChildren(node.element);\n        if (isIterable(children)) {\n            return this.processChildren(children);\n        }\n        else {\n            result = createCancelablePromise(() => __awaiter(this, void 0, void 0, function* () { return this.processChildren(yield children); }));\n            this.refreshPromises.set(node, result);\n            return result.finally(() => { this.refreshPromises.delete(node); });\n        }\n    }\n    _onDidChangeCollapseState({ node, deep }) {\n        if (node.element === null) {\n            return;\n        }\n        if (!node.collapsed && node.element.stale) {\n            if (deep) {\n                this.collapse(node.element.element);\n            }\n            else {\n                this.refreshAndRenderNode(node.element, false)\n                    .catch(onUnexpectedError);\n            }\n        }\n    }\n    setChildren(node, childrenElementsIterable, recursive, viewStateContext) {\n        const childrenElements = [...childrenElementsIterable];\n        // perf: if the node was and still is a leaf, avoid all this hassle\n        if (node.children.length === 0 && childrenElements.length === 0) {\n            return [];\n        }\n        const nodesToForget = new Map();\n        const childrenTreeNodesById = new Map();\n        for (const child of node.children) {\n            nodesToForget.set(child.element, child);\n            if (this.identityProvider) {\n                const collapsed = this.tree.isCollapsed(child);\n                childrenTreeNodesById.set(child.id, { node: child, collapsed });\n            }\n        }\n        const childrenToRefresh = [];\n        const children = childrenElements.map(element => {\n            const hasChildren = !!this.dataSource.hasChildren(element);\n            if (!this.identityProvider) {\n                const asyncDataTreeNode = createAsyncDataTreeNode({ element, parent: node, hasChildren });\n                if (hasChildren && this.collapseByDefault && !this.collapseByDefault(element)) {\n                    asyncDataTreeNode.collapsedByDefault = false;\n                    childrenToRefresh.push(asyncDataTreeNode);\n                }\n                return asyncDataTreeNode;\n            }\n            const id = this.identityProvider.getId(element).toString();\n            const result = childrenTreeNodesById.get(id);\n            if (result) {\n                const asyncDataTreeNode = result.node;\n                nodesToForget.delete(asyncDataTreeNode.element);\n                this.nodes.delete(asyncDataTreeNode.element);\n                this.nodes.set(element, asyncDataTreeNode);\n                asyncDataTreeNode.element = element;\n                asyncDataTreeNode.hasChildren = hasChildren;\n                if (recursive) {\n                    if (result.collapsed) {\n                        asyncDataTreeNode.children.forEach(node => dfs(node, node => this.nodes.delete(node.element)));\n                        asyncDataTreeNode.children.splice(0, asyncDataTreeNode.children.length);\n                        asyncDataTreeNode.stale = true;\n                    }\n                    else {\n                        childrenToRefresh.push(asyncDataTreeNode);\n                    }\n                }\n                else if (hasChildren && this.collapseByDefault && !this.collapseByDefault(element)) {\n                    asyncDataTreeNode.collapsedByDefault = false;\n                    childrenToRefresh.push(asyncDataTreeNode);\n                }\n                return asyncDataTreeNode;\n            }\n            const childAsyncDataTreeNode = createAsyncDataTreeNode({ element, parent: node, id, hasChildren });\n            if (viewStateContext && viewStateContext.viewState.focus && viewStateContext.viewState.focus.indexOf(id) > -1) {\n                viewStateContext.focus.push(childAsyncDataTreeNode);\n            }\n            if (viewStateContext && viewStateContext.viewState.selection && viewStateContext.viewState.selection.indexOf(id) > -1) {\n                viewStateContext.selection.push(childAsyncDataTreeNode);\n            }\n            if (viewStateContext && viewStateContext.viewState.expanded && viewStateContext.viewState.expanded.indexOf(id) > -1) {\n                childrenToRefresh.push(childAsyncDataTreeNode);\n            }\n            else if (hasChildren && this.collapseByDefault && !this.collapseByDefault(element)) {\n                childAsyncDataTreeNode.collapsedByDefault = false;\n                childrenToRefresh.push(childAsyncDataTreeNode);\n            }\n            return childAsyncDataTreeNode;\n        });\n        for (const node of nodesToForget.values()) {\n            dfs(node, node => this.nodes.delete(node.element));\n        }\n        for (const child of children) {\n            this.nodes.set(child.element, child);\n        }\n        node.children.splice(0, node.children.length, ...children);\n        // TODO@joao this doesn't take filter into account\n        if (node !== this.root && this.autoExpandSingleChildren && children.length === 1 && childrenToRefresh.length === 0) {\n            children[0].collapsedByDefault = false;\n            childrenToRefresh.push(children[0]);\n        }\n        return childrenToRefresh;\n    }\n    render(node, viewStateContext, options) {\n        const children = node.children.map(node => this.asTreeElement(node, viewStateContext));\n        const objectTreeOptions = options && Object.assign(Object.assign({}, options), { diffIdentityProvider: options.diffIdentityProvider && {\n                getId(node) {\n                    return options.diffIdentityProvider.getId(node.element);\n                }\n            } });\n        this.tree.setChildren(node === this.root ? null : node, children, objectTreeOptions);\n        if (node !== this.root) {\n            this.tree.setCollapsible(node, node.hasChildren);\n        }\n        this._onDidRender.fire();\n    }\n    asTreeElement(node, viewStateContext) {\n        if (node.stale) {\n            return {\n                element: node,\n                collapsible: node.hasChildren,\n                collapsed: true\n            };\n        }\n        let collapsed;\n        if (viewStateContext && viewStateContext.viewState.expanded && node.id && viewStateContext.viewState.expanded.indexOf(node.id) > -1) {\n            collapsed = false;\n        }\n        else {\n            collapsed = node.collapsedByDefault;\n        }\n        node.collapsedByDefault = undefined;\n        return {\n            element: node,\n            children: node.hasChildren ? Iterable.map(node.children, child => this.asTreeElement(child, viewStateContext)) : [],\n            collapsible: node.hasChildren,\n            collapsed\n        };\n    }\n    processChildren(children) {\n        if (this.sorter) {\n            children = [...children].sort(this.sorter.compare.bind(this.sorter));\n        }\n        return children;\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nclass CompressibleAsyncDataTreeNodeWrapper {\n    get element() {\n        return {\n            elements: this.node.element.elements.map(e => e.element),\n            incompressible: this.node.element.incompressible\n        };\n    }\n    get children() { return this.node.children.map(node => new CompressibleAsyncDataTreeNodeWrapper(node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(node) {\n        this.node = node;\n    }\n}\nclass CompressibleAsyncDataTreeRenderer {\n    constructor(renderer, nodeMapper, compressibleNodeMapperProvider, onDidChangeTwistieState) {\n        this.renderer = renderer;\n        this.nodeMapper = nodeMapper;\n        this.compressibleNodeMapperProvider = compressibleNodeMapperProvider;\n        this.onDidChangeTwistieState = onDidChangeTwistieState;\n        this.renderedNodes = new Map();\n        this.disposables = [];\n        this.templateId = renderer.templateId;\n    }\n    renderTemplate(container) {\n        const templateData = this.renderer.renderTemplate(container);\n        return { templateData };\n    }\n    renderElement(node, index, templateData, height) {\n        this.renderer.renderElement(this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    renderCompressedElements(node, index, templateData, height) {\n        this.renderer.renderCompressedElements(this.compressibleNodeMapperProvider().map(node), index, templateData.templateData, height);\n    }\n    renderTwistie(element, twistieElement) {\n        if (element.slow) {\n            twistieElement.classList.add(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return true;\n        }\n        else {\n            twistieElement.classList.remove(...ThemeIcon.asClassNameArray(Codicon.treeItemLoading));\n            return false;\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b;\n        (_b = (_a = this.renderer).disposeElement) === null || _b === void 0 ? void 0 : _b.call(_a, this.nodeMapper.map(node), index, templateData.templateData, height);\n    }\n    disposeCompressedElements(node, index, templateData, height) {\n        var _a, _b;\n        (_b = (_a = this.renderer).disposeCompressedElements) === null || _b === void 0 ? void 0 : _b.call(_a, this.compressibleNodeMapperProvider().map(node), index, templateData.templateData, height);\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.templateData);\n    }\n    dispose() {\n        this.renderedNodes.clear();\n        this.disposables = dispose(this.disposables);\n    }\n}\nfunction asCompressibleObjectTreeOptions(options) {\n    const objectTreeOptions = options && asObjectTreeOptions(options);\n    return objectTreeOptions && Object.assign(Object.assign({}, objectTreeOptions), { keyboardNavigationLabelProvider: objectTreeOptions.keyboardNavigationLabelProvider && Object.assign(Object.assign({}, objectTreeOptions.keyboardNavigationLabelProvider), { getCompressedNodeKeyboardNavigationLabel(els) {\n                return options.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(els.map(e => e.element));\n            } }) });\n}\nexport class CompressibleAsyncDataTree extends AsyncDataTree {\n    constructor(user, container, virtualDelegate, compressionDelegate, renderers, dataSource, options = {}) {\n        super(user, container, virtualDelegate, renderers, dataSource, options);\n        this.compressionDelegate = compressionDelegate;\n        this.compressibleNodeMapper = new WeakMapper(node => new CompressibleAsyncDataTreeNodeWrapper(node));\n        this.filter = options.filter;\n    }\n    createTree(user, container, delegate, renderers, options) {\n        const objectTreeDelegate = new ComposedTreeDelegate(delegate);\n        const objectTreeRenderers = renderers.map(r => new CompressibleAsyncDataTreeRenderer(r, this.nodeMapper, () => this.compressibleNodeMapper, this._onDidChangeNodeSlowState.event));\n        const objectTreeOptions = asCompressibleObjectTreeOptions(options) || {};\n        return new CompressibleObjectTree(user, container, objectTreeDelegate, objectTreeRenderers, objectTreeOptions);\n    }\n    asTreeElement(node, viewStateContext) {\n        return Object.assign({ incompressible: this.compressionDelegate.isIncompressible(node.element) }, super.asTreeElement(node, viewStateContext));\n    }\n    updateOptions(options = {}) {\n        this.tree.updateOptions(options);\n    }\n    render(node, viewStateContext) {\n        if (!this.identityProvider) {\n            return super.render(node, viewStateContext);\n        }\n        // Preserve traits across compressions. Hacky but does the trick.\n        // This is hard to fix properly since it requires rewriting the traits\n        // across trees and lists. Let's just keep it this way for now.\n        const getId = (element) => this.identityProvider.getId(element).toString();\n        const getUncompressedIds = (nodes) => {\n            const result = new Set();\n            for (const node of nodes) {\n                const compressedNode = this.tree.getCompressedTreeNode(node === this.root ? null : node);\n                if (!compressedNode.element) {\n                    continue;\n                }\n                for (const node of compressedNode.element.elements) {\n                    result.add(getId(node.element));\n                }\n            }\n            return result;\n        };\n        const oldSelection = getUncompressedIds(this.tree.getSelection());\n        const oldFocus = getUncompressedIds(this.tree.getFocus());\n        super.render(node, viewStateContext);\n        const selection = this.getSelection();\n        let didChangeSelection = false;\n        const focus = this.getFocus();\n        let didChangeFocus = false;\n        const visit = (node) => {\n            const compressedNode = node.element;\n            if (compressedNode) {\n                for (let i = 0; i < compressedNode.elements.length; i++) {\n                    const id = getId(compressedNode.elements[i].element);\n                    const element = compressedNode.elements[compressedNode.elements.length - 1].element;\n                    // github.com/microsoft/vscode/issues/85938\n                    if (oldSelection.has(id) && selection.indexOf(element) === -1) {\n                        selection.push(element);\n                        didChangeSelection = true;\n                    }\n                    if (oldFocus.has(id) && focus.indexOf(element) === -1) {\n                        focus.push(element);\n                        didChangeFocus = true;\n                    }\n                }\n            }\n            node.children.forEach(visit);\n        };\n        visit(this.tree.getCompressedTreeNode(node === this.root ? null : node));\n        if (didChangeSelection) {\n            this.setSelection(selection);\n        }\n        if (didChangeFocus) {\n            this.setFocus(focus);\n        }\n    }\n    // For compressed async data trees, `TreeVisibility.Recurse` doesn't currently work\n    // and we have to filter everything beforehand\n    // Related to #85193 and #85835\n    processChildren(children) {\n        if (this.filter) {\n            children = Iterable.filter(children, e => {\n                const result = this.filter.filter(e, 1 /* TreeVisibility.Visible */);\n                const visibility = getVisibility(result);\n                if (visibility === 2 /* TreeVisibility.Recurse */) {\n                    throw new Error('Recursive tree visibility not supported in async data compressed trees');\n                }\n                return visibility === 1 /* TreeVisibility.Visible */;\n            });\n        }\n        return super.processChildren(children);\n    }\n}\nfunction getVisibility(filterResult) {\n    if (typeof filterResult === 'boolean') {\n        return filterResult ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n    }\n    else if (isFilterResult(filterResult)) {\n        return getVisibleState(filterResult.visibility);\n    }\n    else {\n        return getVisibleState(filterResult);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { AbstractTree } from './abstractTree.js';\nimport { ObjectTreeModel } from './objectTreeModel.js';\nexport class DataTree extends AbstractTree {\n    constructor(user, container, delegate, renderers, dataSource, options = {}) {\n        super(user, container, delegate, renderers, options);\n        this.user = user;\n        this.dataSource = dataSource;\n        this.identityProvider = options.identityProvider;\n    }\n    createModel(user, view, options) {\n        return new ObjectTreeModel(user, view, options);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { TreeError } from './tree.js';\nimport { splice, tail2 } from '../../../common/arrays.js';\nimport { Delayer } from '../../../common/async.js';\nimport { MicrotaskDelay } from '../../../common/symbols.js';\nimport { LcsDiff } from '../../../common/diff/diff.js';\nimport { Emitter, EventBufferer } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport function isFilterResult(obj) {\n    return typeof obj === 'object' && 'visibility' in obj && 'data' in obj;\n}\nexport function getVisibleState(visibility) {\n    switch (visibility) {\n        case true: return 1 /* TreeVisibility.Visible */;\n        case false: return 0 /* TreeVisibility.Hidden */;\n        default: return visibility;\n    }\n}\nfunction isCollapsibleStateUpdate(update) {\n    return typeof update.collapsible === 'boolean';\n}\nexport class IndexTreeModel {\n    constructor(user, list, rootElement, options = {}) {\n        this.user = user;\n        this.list = list;\n        this.rootRef = [];\n        this.eventBufferer = new EventBufferer();\n        this._onDidChangeCollapseState = new Emitter();\n        this.onDidChangeCollapseState = this.eventBufferer.wrapEvent(this._onDidChangeCollapseState.event);\n        this._onDidChangeRenderNodeCount = new Emitter();\n        this.onDidChangeRenderNodeCount = this.eventBufferer.wrapEvent(this._onDidChangeRenderNodeCount.event);\n        this._onDidSplice = new Emitter();\n        this.onDidSplice = this._onDidSplice.event;\n        this.refilterDelayer = new Delayer(MicrotaskDelay);\n        this.collapseByDefault = typeof options.collapseByDefault === 'undefined' ? false : options.collapseByDefault;\n        this.filter = options.filter;\n        this.autoExpandSingleChildren = typeof options.autoExpandSingleChildren === 'undefined' ? false : options.autoExpandSingleChildren;\n        this.root = {\n            parent: undefined,\n            element: rootElement,\n            children: [],\n            depth: 0,\n            visibleChildrenCount: 0,\n            visibleChildIndex: -1,\n            collapsible: false,\n            collapsed: false,\n            renderNodeCount: 0,\n            visibility: 1 /* TreeVisibility.Visible */,\n            visible: true,\n            filterData: undefined\n        };\n    }\n    splice(location, deleteCount, toInsert = Iterable.empty(), options = {}) {\n        if (location.length === 0) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        if (options.diffIdentityProvider) {\n            this.spliceSmart(options.diffIdentityProvider, location, deleteCount, toInsert, options);\n        }\n        else {\n            this.spliceSimple(location, deleteCount, toInsert, options);\n        }\n    }\n    spliceSmart(identity, location, deleteCount, toInsertIterable, options, recurseLevels) {\n        var _a;\n        if (toInsertIterable === void 0) { toInsertIterable = Iterable.empty(); }\n        if (recurseLevels === void 0) { recurseLevels = (_a = options.diffDepth) !== null && _a !== void 0 ? _a : 0; }\n        const { parentNode } = this.getParentNodeWithListIndex(location);\n        if (!parentNode.lastDiffIds) {\n            return this.spliceSimple(location, deleteCount, toInsertIterable, options);\n        }\n        const toInsert = [...toInsertIterable];\n        const index = location[location.length - 1];\n        const diff = new LcsDiff({ getElements: () => parentNode.lastDiffIds }, {\n            getElements: () => [\n                ...parentNode.children.slice(0, index),\n                ...toInsert,\n                ...parentNode.children.slice(index + deleteCount),\n            ].map(e => identity.getId(e.element).toString())\n        }).ComputeDiff(false);\n        // if we were given a 'best effort' diff, use default behavior\n        if (diff.quitEarly) {\n            parentNode.lastDiffIds = undefined;\n            return this.spliceSimple(location, deleteCount, toInsert, options);\n        }\n        const locationPrefix = location.slice(0, -1);\n        const recurseSplice = (fromOriginal, fromModified, count) => {\n            if (recurseLevels > 0) {\n                for (let i = 0; i < count; i++) {\n                    fromOriginal--;\n                    fromModified--;\n                    this.spliceSmart(identity, [...locationPrefix, fromOriginal, 0], Number.MAX_SAFE_INTEGER, toInsert[fromModified].children, options, recurseLevels - 1);\n                }\n            }\n        };\n        let lastStartO = Math.min(parentNode.children.length, index + deleteCount);\n        let lastStartM = toInsert.length;\n        for (const change of diff.changes.sort((a, b) => b.originalStart - a.originalStart)) {\n            recurseSplice(lastStartO, lastStartM, lastStartO - (change.originalStart + change.originalLength));\n            lastStartO = change.originalStart;\n            lastStartM = change.modifiedStart - index;\n            this.spliceSimple([...locationPrefix, lastStartO], change.originalLength, Iterable.slice(toInsert, lastStartM, lastStartM + change.modifiedLength), options);\n        }\n        // at this point, startO === startM === count since any remaining prefix should match\n        recurseSplice(lastStartO, lastStartM, lastStartO);\n    }\n    spliceSimple(location, deleteCount, toInsert = Iterable.empty(), { onDidCreateNode, onDidDeleteNode, diffIdentityProvider }) {\n        const { parentNode, listIndex, revealed, visible } = this.getParentNodeWithListIndex(location);\n        const treeListElementsToInsert = [];\n        const nodesToInsertIterator = Iterable.map(toInsert, el => this.createTreeNode(el, parentNode, parentNode.visible ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */, revealed, treeListElementsToInsert, onDidCreateNode));\n        const lastIndex = location[location.length - 1];\n        const lastHadChildren = parentNode.children.length > 0;\n        // figure out what's the visible child start index right before the\n        // splice point\n        let visibleChildStartIndex = 0;\n        for (let i = lastIndex; i >= 0 && i < parentNode.children.length; i--) {\n            const child = parentNode.children[i];\n            if (child.visible) {\n                visibleChildStartIndex = child.visibleChildIndex;\n                break;\n            }\n        }\n        const nodesToInsert = [];\n        let insertedVisibleChildrenCount = 0;\n        let renderNodeCount = 0;\n        for (const child of nodesToInsertIterator) {\n            nodesToInsert.push(child);\n            renderNodeCount += child.renderNodeCount;\n            if (child.visible) {\n                child.visibleChildIndex = visibleChildStartIndex + insertedVisibleChildrenCount++;\n            }\n        }\n        const deletedNodes = splice(parentNode.children, lastIndex, deleteCount, nodesToInsert);\n        if (!diffIdentityProvider) {\n            parentNode.lastDiffIds = undefined;\n        }\n        else if (parentNode.lastDiffIds) {\n            splice(parentNode.lastDiffIds, lastIndex, deleteCount, nodesToInsert.map(n => diffIdentityProvider.getId(n.element).toString()));\n        }\n        else {\n            parentNode.lastDiffIds = parentNode.children.map(n => diffIdentityProvider.getId(n.element).toString());\n        }\n        // figure out what is the count of deleted visible children\n        let deletedVisibleChildrenCount = 0;\n        for (const child of deletedNodes) {\n            if (child.visible) {\n                deletedVisibleChildrenCount++;\n            }\n        }\n        // and adjust for all visible children after the splice point\n        if (deletedVisibleChildrenCount !== 0) {\n            for (let i = lastIndex + nodesToInsert.length; i < parentNode.children.length; i++) {\n                const child = parentNode.children[i];\n                if (child.visible) {\n                    child.visibleChildIndex -= deletedVisibleChildrenCount;\n                }\n            }\n        }\n        // update parent's visible children count\n        parentNode.visibleChildrenCount += insertedVisibleChildrenCount - deletedVisibleChildrenCount;\n        if (revealed && visible) {\n            const visibleDeleteCount = deletedNodes.reduce((r, node) => r + (node.visible ? node.renderNodeCount : 0), 0);\n            this._updateAncestorsRenderNodeCount(parentNode, renderNodeCount - visibleDeleteCount);\n            this.list.splice(listIndex, visibleDeleteCount, treeListElementsToInsert);\n        }\n        if (deletedNodes.length > 0 && onDidDeleteNode) {\n            const visit = (node) => {\n                onDidDeleteNode(node);\n                node.children.forEach(visit);\n            };\n            deletedNodes.forEach(visit);\n        }\n        this._onDidSplice.fire({ insertedNodes: nodesToInsert, deletedNodes });\n        const currentlyHasChildren = parentNode.children.length > 0;\n        if (lastHadChildren !== currentlyHasChildren) {\n            this.setCollapsible(location.slice(0, -1), currentlyHasChildren);\n        }\n        let node = parentNode;\n        while (node) {\n            if (node.visibility === 2 /* TreeVisibility.Recurse */) {\n                // delayed to avoid excessive refiltering, see #135941\n                this.refilterDelayer.trigger(() => this.refilter());\n                break;\n            }\n            node = node.parent;\n        }\n    }\n    rerender(location) {\n        if (location.length === 0) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        const { node, listIndex, revealed } = this.getTreeNodeWithListIndex(location);\n        if (node.visible && revealed) {\n            this.list.splice(listIndex, 1, [node]);\n        }\n    }\n    has(location) {\n        return this.hasTreeNode(location);\n    }\n    getListIndex(location) {\n        const { listIndex, visible, revealed } = this.getTreeNodeWithListIndex(location);\n        return visible && revealed ? listIndex : -1;\n    }\n    getListRenderCount(location) {\n        return this.getTreeNode(location).renderNodeCount;\n    }\n    isCollapsible(location) {\n        return this.getTreeNode(location).collapsible;\n    }\n    setCollapsible(location, collapsible) {\n        const node = this.getTreeNode(location);\n        if (typeof collapsible === 'undefined') {\n            collapsible = !node.collapsible;\n        }\n        const update = { collapsible };\n        return this.eventBufferer.bufferEvents(() => this._setCollapseState(location, update));\n    }\n    isCollapsed(location) {\n        return this.getTreeNode(location).collapsed;\n    }\n    setCollapsed(location, collapsed, recursive) {\n        const node = this.getTreeNode(location);\n        if (typeof collapsed === 'undefined') {\n            collapsed = !node.collapsed;\n        }\n        const update = { collapsed, recursive: recursive || false };\n        return this.eventBufferer.bufferEvents(() => this._setCollapseState(location, update));\n    }\n    _setCollapseState(location, update) {\n        const { node, listIndex, revealed } = this.getTreeNodeWithListIndex(location);\n        const result = this._setListNodeCollapseState(node, listIndex, revealed, update);\n        if (node !== this.root && this.autoExpandSingleChildren && result && !isCollapsibleStateUpdate(update) && node.collapsible && !node.collapsed && !update.recursive) {\n            let onlyVisibleChildIndex = -1;\n            for (let i = 0; i < node.children.length; i++) {\n                const child = node.children[i];\n                if (child.visible) {\n                    if (onlyVisibleChildIndex > -1) {\n                        onlyVisibleChildIndex = -1;\n                        break;\n                    }\n                    else {\n                        onlyVisibleChildIndex = i;\n                    }\n                }\n            }\n            if (onlyVisibleChildIndex > -1) {\n                this._setCollapseState([...location, onlyVisibleChildIndex], update);\n            }\n        }\n        return result;\n    }\n    _setListNodeCollapseState(node, listIndex, revealed, update) {\n        const result = this._setNodeCollapseState(node, update, false);\n        if (!revealed || !node.visible || !result) {\n            return result;\n        }\n        const previousRenderNodeCount = node.renderNodeCount;\n        const toInsert = this.updateNodeAfterCollapseChange(node);\n        const deleteCount = previousRenderNodeCount - (listIndex === -1 ? 0 : 1);\n        this.list.splice(listIndex + 1, deleteCount, toInsert.slice(1));\n        return result;\n    }\n    _setNodeCollapseState(node, update, deep) {\n        let result;\n        if (node === this.root) {\n            result = false;\n        }\n        else {\n            if (isCollapsibleStateUpdate(update)) {\n                result = node.collapsible !== update.collapsible;\n                node.collapsible = update.collapsible;\n            }\n            else if (!node.collapsible) {\n                result = false;\n            }\n            else {\n                result = node.collapsed !== update.collapsed;\n                node.collapsed = update.collapsed;\n            }\n            if (result) {\n                this._onDidChangeCollapseState.fire({ node, deep });\n            }\n        }\n        if (!isCollapsibleStateUpdate(update) && update.recursive) {\n            for (const child of node.children) {\n                result = this._setNodeCollapseState(child, update, true) || result;\n            }\n        }\n        return result;\n    }\n    expandTo(location) {\n        this.eventBufferer.bufferEvents(() => {\n            let node = this.getTreeNode(location);\n            while (node.parent) {\n                node = node.parent;\n                location = location.slice(0, location.length - 1);\n                if (node.collapsed) {\n                    this._setCollapseState(location, { collapsed: false, recursive: false });\n                }\n            }\n        });\n    }\n    refilter() {\n        const previousRenderNodeCount = this.root.renderNodeCount;\n        const toInsert = this.updateNodeAfterFilterChange(this.root);\n        this.list.splice(0, previousRenderNodeCount, toInsert);\n        this.refilterDelayer.cancel();\n    }\n    createTreeNode(treeElement, parent, parentVisibility, revealed, treeListElements, onDidCreateNode) {\n        const node = {\n            parent,\n            element: treeElement.element,\n            children: [],\n            depth: parent.depth + 1,\n            visibleChildrenCount: 0,\n            visibleChildIndex: -1,\n            collapsible: typeof treeElement.collapsible === 'boolean' ? treeElement.collapsible : (typeof treeElement.collapsed !== 'undefined'),\n            collapsed: typeof treeElement.collapsed === 'undefined' ? this.collapseByDefault : treeElement.collapsed,\n            renderNodeCount: 1,\n            visibility: 1 /* TreeVisibility.Visible */,\n            visible: true,\n            filterData: undefined\n        };\n        const visibility = this._filterNode(node, parentVisibility);\n        node.visibility = visibility;\n        if (revealed) {\n            treeListElements.push(node);\n        }\n        const childElements = treeElement.children || Iterable.empty();\n        const childRevealed = revealed && visibility !== 0 /* TreeVisibility.Hidden */ && !node.collapsed;\n        let visibleChildrenCount = 0;\n        let renderNodeCount = 1;\n        for (const el of childElements) {\n            const child = this.createTreeNode(el, node, visibility, childRevealed, treeListElements, onDidCreateNode);\n            node.children.push(child);\n            renderNodeCount += child.renderNodeCount;\n            if (child.visible) {\n                child.visibleChildIndex = visibleChildrenCount++;\n            }\n        }\n        node.collapsible = node.collapsible || node.children.length > 0;\n        node.visibleChildrenCount = visibleChildrenCount;\n        node.visible = visibility === 2 /* TreeVisibility.Recurse */ ? visibleChildrenCount > 0 : (visibility === 1 /* TreeVisibility.Visible */);\n        if (!node.visible) {\n            node.renderNodeCount = 0;\n            if (revealed) {\n                treeListElements.pop();\n            }\n        }\n        else if (!node.collapsed) {\n            node.renderNodeCount = renderNodeCount;\n        }\n        onDidCreateNode === null || onDidCreateNode === void 0 ? void 0 : onDidCreateNode(node);\n        return node;\n    }\n    updateNodeAfterCollapseChange(node) {\n        const previousRenderNodeCount = node.renderNodeCount;\n        const result = [];\n        this._updateNodeAfterCollapseChange(node, result);\n        this._updateAncestorsRenderNodeCount(node.parent, result.length - previousRenderNodeCount);\n        return result;\n    }\n    _updateNodeAfterCollapseChange(node, result) {\n        if (node.visible === false) {\n            return 0;\n        }\n        result.push(node);\n        node.renderNodeCount = 1;\n        if (!node.collapsed) {\n            for (const child of node.children) {\n                node.renderNodeCount += this._updateNodeAfterCollapseChange(child, result);\n            }\n        }\n        this._onDidChangeRenderNodeCount.fire(node);\n        return node.renderNodeCount;\n    }\n    updateNodeAfterFilterChange(node) {\n        const previousRenderNodeCount = node.renderNodeCount;\n        const result = [];\n        this._updateNodeAfterFilterChange(node, node.visible ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */, result);\n        this._updateAncestorsRenderNodeCount(node.parent, result.length - previousRenderNodeCount);\n        return result;\n    }\n    _updateNodeAfterFilterChange(node, parentVisibility, result, revealed = true) {\n        let visibility;\n        if (node !== this.root) {\n            visibility = this._filterNode(node, parentVisibility);\n            if (visibility === 0 /* TreeVisibility.Hidden */) {\n                node.visible = false;\n                node.renderNodeCount = 0;\n                return false;\n            }\n            if (revealed) {\n                result.push(node);\n            }\n        }\n        const resultStartLength = result.length;\n        node.renderNodeCount = node === this.root ? 0 : 1;\n        let hasVisibleDescendants = false;\n        if (!node.collapsed || visibility !== 0 /* TreeVisibility.Hidden */) {\n            let visibleChildIndex = 0;\n            for (const child of node.children) {\n                hasVisibleDescendants = this._updateNodeAfterFilterChange(child, visibility, result, revealed && !node.collapsed) || hasVisibleDescendants;\n                if (child.visible) {\n                    child.visibleChildIndex = visibleChildIndex++;\n                }\n            }\n            node.visibleChildrenCount = visibleChildIndex;\n        }\n        else {\n            node.visibleChildrenCount = 0;\n        }\n        if (node !== this.root) {\n            node.visible = visibility === 2 /* TreeVisibility.Recurse */ ? hasVisibleDescendants : (visibility === 1 /* TreeVisibility.Visible */);\n            node.visibility = visibility;\n        }\n        if (!node.visible) {\n            node.renderNodeCount = 0;\n            if (revealed) {\n                result.pop();\n            }\n        }\n        else if (!node.collapsed) {\n            node.renderNodeCount += result.length - resultStartLength;\n        }\n        this._onDidChangeRenderNodeCount.fire(node);\n        return node.visible;\n    }\n    _updateAncestorsRenderNodeCount(node, diff) {\n        if (diff === 0) {\n            return;\n        }\n        while (node) {\n            node.renderNodeCount += diff;\n            this._onDidChangeRenderNodeCount.fire(node);\n            node = node.parent;\n        }\n    }\n    _filterNode(node, parentVisibility) {\n        const result = this.filter ? this.filter.filter(node.element, parentVisibility) : 1 /* TreeVisibility.Visible */;\n        if (typeof result === 'boolean') {\n            node.filterData = undefined;\n            return result ? 1 /* TreeVisibility.Visible */ : 0 /* TreeVisibility.Hidden */;\n        }\n        else if (isFilterResult(result)) {\n            node.filterData = result.data;\n            return getVisibleState(result.visibility);\n        }\n        else {\n            node.filterData = undefined;\n            return getVisibleState(result);\n        }\n    }\n    // cheap\n    hasTreeNode(location, node = this.root) {\n        if (!location || location.length === 0) {\n            return true;\n        }\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            return false;\n        }\n        return this.hasTreeNode(rest, node.children[index]);\n    }\n    // cheap\n    getTreeNode(location, node = this.root) {\n        if (!location || location.length === 0) {\n            return node;\n        }\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        return this.getTreeNode(rest, node.children[index]);\n    }\n    // expensive\n    getTreeNodeWithListIndex(location) {\n        if (location.length === 0) {\n            return { node: this.root, listIndex: -1, revealed: true, visible: false };\n        }\n        const { parentNode, listIndex, revealed, visible } = this.getParentNodeWithListIndex(location);\n        const index = location[location.length - 1];\n        if (index < 0 || index > parentNode.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        const node = parentNode.children[index];\n        return { node, listIndex, revealed, visible: visible && node.visible };\n    }\n    getParentNodeWithListIndex(location, node = this.root, listIndex = 0, revealed = true, visible = true) {\n        const [index, ...rest] = location;\n        if (index < 0 || index > node.children.length) {\n            throw new TreeError(this.user, 'Invalid tree location');\n        }\n        // TODO@joao perf!\n        for (let i = 0; i < index; i++) {\n            listIndex += node.children[i].renderNodeCount;\n        }\n        revealed = revealed && !node.collapsed;\n        visible = visible && node.visible;\n        if (rest.length === 0) {\n            return { parentNode: node, listIndex, revealed, visible };\n        }\n        return this.getParentNodeWithListIndex(rest, node.children[index], listIndex + 1, revealed, visible);\n    }\n    getNode(location = []) {\n        return this.getTreeNode(location);\n    }\n    // TODO@joao perf!\n    getNodeLocation(node) {\n        const location = [];\n        let indexTreeNode = node; // typing woes\n        while (indexTreeNode.parent) {\n            location.push(indexTreeNode.parent.children.indexOf(indexTreeNode));\n            indexTreeNode = indexTreeNode.parent;\n        }\n        return location.reverse();\n    }\n    getParentNodeLocation(location) {\n        if (location.length === 0) {\n            return undefined;\n        }\n        else if (location.length === 1) {\n            return [];\n        }\n        else {\n            return tail2(location)[0];\n        }\n    }\n    getFirstElementChild(location) {\n        const node = this.getTreeNode(location);\n        if (node.children.length === 0) {\n            return undefined;\n        }\n        return node.children[0].element;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ObjectTreeModel } from './objectTreeModel.js';\nimport { TreeError, WeakMapper } from './tree.js';\nimport { equals } from '../../../common/arrays.js';\nimport { Event } from '../../../common/event.js';\nimport { Iterable } from '../../../common/iterator.js';\nfunction noCompress(element) {\n    const elements = [element.element];\n    const incompressible = element.incompressible || false;\n    return {\n        element: { elements, incompressible },\n        children: Iterable.map(Iterable.from(element.children), noCompress),\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\n// Exported only for test reasons, do not use directly\nexport function compress(element) {\n    const elements = [element.element];\n    const incompressible = element.incompressible || false;\n    let childrenIterator;\n    let children;\n    while (true) {\n        [children, childrenIterator] = Iterable.consume(Iterable.from(element.children), 2);\n        if (children.length !== 1) {\n            break;\n        }\n        if (children[0].incompressible) {\n            break;\n        }\n        element = children[0];\n        elements.push(element.element);\n    }\n    return {\n        element: { elements, incompressible },\n        children: Iterable.map(Iterable.concat(children, childrenIterator), compress),\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\nfunction _decompress(element, index = 0) {\n    let children;\n    if (index < element.element.elements.length - 1) {\n        children = [_decompress(element, index + 1)];\n    }\n    else {\n        children = Iterable.map(Iterable.from(element.children), el => _decompress(el, 0));\n    }\n    if (index === 0 && element.element.incompressible) {\n        return {\n            element: element.element.elements[index],\n            children,\n            incompressible: true,\n            collapsible: element.collapsible,\n            collapsed: element.collapsed\n        };\n    }\n    return {\n        element: element.element.elements[index],\n        children,\n        collapsible: element.collapsible,\n        collapsed: element.collapsed\n    };\n}\n// Exported only for test reasons, do not use directly\nexport function decompress(element) {\n    return _decompress(element, 0);\n}\nfunction splice(treeElement, element, children) {\n    if (treeElement.element === element) {\n        return Object.assign(Object.assign({}, treeElement), { children });\n    }\n    return Object.assign(Object.assign({}, treeElement), { children: Iterable.map(Iterable.from(treeElement.children), e => splice(e, element, children)) });\n}\nconst wrapIdentityProvider = (base) => ({\n    getId(node) {\n        return node.elements.map(e => base.getId(e).toString()).join('\\0');\n    }\n});\n// Exported only for test reasons, do not use directly\nexport class CompressedObjectTreeModel {\n    get onDidSplice() { return this.model.onDidSplice; }\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    get onDidChangeRenderNodeCount() { return this.model.onDidChangeRenderNodeCount; }\n    constructor(user, list, options = {}) {\n        this.user = user;\n        this.rootRef = null;\n        this.nodes = new Map();\n        this.model = new ObjectTreeModel(user, list, options);\n        this.enabled = typeof options.compressionEnabled === 'undefined' ? true : options.compressionEnabled;\n        this.identityProvider = options.identityProvider;\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        // Diffs must be deep, since the compression can affect nested elements.\n        // @see https://github.com/microsoft/vscode/pull/114237#issuecomment-759425034\n        const diffIdentityProvider = options.diffIdentityProvider && wrapIdentityProvider(options.diffIdentityProvider);\n        if (element === null) {\n            const compressedChildren = Iterable.map(children, this.enabled ? compress : noCompress);\n            this._setChildren(null, compressedChildren, { diffIdentityProvider, diffDepth: Infinity });\n            return;\n        }\n        const compressedNode = this.nodes.get(element);\n        if (!compressedNode) {\n            throw new TreeError(this.user, 'Unknown compressed tree node');\n        }\n        const node = this.model.getNode(compressedNode);\n        const compressedParentNode = this.model.getParentNodeLocation(compressedNode);\n        const parent = this.model.getNode(compressedParentNode);\n        const decompressedElement = decompress(node);\n        const splicedElement = splice(decompressedElement, element, children);\n        const recompressedElement = (this.enabled ? compress : noCompress)(splicedElement);\n        // If the recompressed node is identical to the original, just set its children.\n        // Saves work and churn diffing the parent element.\n        const elementComparator = options.diffIdentityProvider\n            ? ((a, b) => options.diffIdentityProvider.getId(a) === options.diffIdentityProvider.getId(b))\n            : undefined;\n        if (equals(recompressedElement.element.elements, node.element.elements, elementComparator)) {\n            this._setChildren(compressedNode, recompressedElement.children || Iterable.empty(), { diffIdentityProvider, diffDepth: 1 });\n            return;\n        }\n        const parentChildren = parent.children\n            .map(child => child === node ? recompressedElement : child);\n        this._setChildren(parent.element, parentChildren, {\n            diffIdentityProvider,\n            diffDepth: node.depth - parent.depth,\n        });\n    }\n    setCompressionEnabled(enabled) {\n        if (enabled === this.enabled) {\n            return;\n        }\n        this.enabled = enabled;\n        const root = this.model.getNode();\n        const rootChildren = root.children;\n        const decompressedRootChildren = Iterable.map(rootChildren, decompress);\n        const recompressedRootChildren = Iterable.map(decompressedRootChildren, enabled ? compress : noCompress);\n        // it should be safe to always use deep diff mode here if an identity\n        // provider is available, since we know the raw nodes are unchanged.\n        this._setChildren(null, recompressedRootChildren, {\n            diffIdentityProvider: this.identityProvider,\n            diffDepth: Infinity,\n        });\n    }\n    _setChildren(node, children, options) {\n        const insertedElements = new Set();\n        const onDidCreateNode = (node) => {\n            for (const element of node.element.elements) {\n                insertedElements.add(element);\n                this.nodes.set(element, node.element);\n            }\n        };\n        const onDidDeleteNode = (node) => {\n            for (const element of node.element.elements) {\n                if (!insertedElements.has(element)) {\n                    this.nodes.delete(element);\n                }\n            }\n        };\n        this.model.setChildren(node, children, Object.assign(Object.assign({}, options), { onDidCreateNode, onDidDeleteNode }));\n    }\n    has(element) {\n        return this.nodes.has(element);\n    }\n    getListIndex(location) {\n        const node = this.getCompressedNode(location);\n        return this.model.getListIndex(node);\n    }\n    getListRenderCount(location) {\n        const node = this.getCompressedNode(location);\n        return this.model.getListRenderCount(node);\n    }\n    getNode(location) {\n        if (typeof location === 'undefined') {\n            return this.model.getNode();\n        }\n        const node = this.getCompressedNode(location);\n        return this.model.getNode(node);\n    }\n    // TODO: review this\n    getNodeLocation(node) {\n        const compressedNode = this.model.getNodeLocation(node);\n        if (compressedNode === null) {\n            return null;\n        }\n        return compressedNode.elements[compressedNode.elements.length - 1];\n    }\n    // TODO: review this\n    getParentNodeLocation(location) {\n        const compressedNode = this.getCompressedNode(location);\n        const parentNode = this.model.getParentNodeLocation(compressedNode);\n        if (parentNode === null) {\n            return null;\n        }\n        return parentNode.elements[parentNode.elements.length - 1];\n    }\n    getFirstElementChild(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.getFirstElementChild(compressedNode);\n    }\n    isCollapsible(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.isCollapsible(compressedNode);\n    }\n    setCollapsible(location, collapsible) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.setCollapsible(compressedNode, collapsible);\n    }\n    isCollapsed(location) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.isCollapsed(compressedNode);\n    }\n    setCollapsed(location, collapsed, recursive) {\n        const compressedNode = this.getCompressedNode(location);\n        return this.model.setCollapsed(compressedNode, collapsed, recursive);\n    }\n    expandTo(location) {\n        const compressedNode = this.getCompressedNode(location);\n        this.model.expandTo(compressedNode);\n    }\n    rerender(location) {\n        const compressedNode = this.getCompressedNode(location);\n        this.model.rerender(compressedNode);\n    }\n    refilter() {\n        this.model.refilter();\n    }\n    getCompressedNode(element) {\n        if (element === null) {\n            return null;\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return node;\n    }\n}\nexport const DefaultElementMapper = elements => elements[elements.length - 1];\nclass CompressedTreeNodeWrapper {\n    get element() { return this.node.element === null ? null : this.unwrapper(this.node.element); }\n    get children() { return this.node.children.map(node => new CompressedTreeNodeWrapper(this.unwrapper, node)); }\n    get depth() { return this.node.depth; }\n    get visibleChildrenCount() { return this.node.visibleChildrenCount; }\n    get visibleChildIndex() { return this.node.visibleChildIndex; }\n    get collapsible() { return this.node.collapsible; }\n    get collapsed() { return this.node.collapsed; }\n    get visible() { return this.node.visible; }\n    get filterData() { return this.node.filterData; }\n    constructor(unwrapper, node) {\n        this.unwrapper = unwrapper;\n        this.node = node;\n    }\n}\nfunction mapList(nodeMapper, list) {\n    return {\n        splice(start, deleteCount, toInsert) {\n            list.splice(start, deleteCount, toInsert.map(node => nodeMapper.map(node)));\n        },\n        updateElementHeight(index, height) {\n            list.updateElementHeight(index, height);\n        }\n    };\n}\nfunction mapOptions(compressedNodeUnwrapper, options) {\n    return Object.assign(Object.assign({}, options), { identityProvider: options.identityProvider && {\n            getId(node) {\n                return options.identityProvider.getId(compressedNodeUnwrapper(node));\n            }\n        }, sorter: options.sorter && {\n            compare(node, otherNode) {\n                return options.sorter.compare(node.elements[0], otherNode.elements[0]);\n            }\n        }, filter: options.filter && {\n            filter(node, parentVisibility) {\n                return options.filter.filter(compressedNodeUnwrapper(node), parentVisibility);\n            }\n        } });\n}\nexport class CompressibleObjectTreeModel {\n    get onDidSplice() {\n        return Event.map(this.model.onDidSplice, ({ insertedNodes, deletedNodes }) => ({\n            insertedNodes: insertedNodes.map(node => this.nodeMapper.map(node)),\n            deletedNodes: deletedNodes.map(node => this.nodeMapper.map(node)),\n        }));\n    }\n    get onDidChangeCollapseState() {\n        return Event.map(this.model.onDidChangeCollapseState, ({ node, deep }) => ({\n            node: this.nodeMapper.map(node),\n            deep\n        }));\n    }\n    get onDidChangeRenderNodeCount() {\n        return Event.map(this.model.onDidChangeRenderNodeCount, node => this.nodeMapper.map(node));\n    }\n    constructor(user, list, options = {}) {\n        this.rootRef = null;\n        this.elementMapper = options.elementMapper || DefaultElementMapper;\n        const compressedNodeUnwrapper = node => this.elementMapper(node.elements);\n        this.nodeMapper = new WeakMapper(node => new CompressedTreeNodeWrapper(compressedNodeUnwrapper, node));\n        this.model = new CompressedObjectTreeModel(user, mapList(this.nodeMapper, list), mapOptions(compressedNodeUnwrapper, options));\n    }\n    setChildren(element, children = Iterable.empty(), options = {}) {\n        this.model.setChildren(element, children, options);\n    }\n    setCompressionEnabled(enabled) {\n        this.model.setCompressionEnabled(enabled);\n    }\n    has(location) {\n        return this.model.has(location);\n    }\n    getListIndex(location) {\n        return this.model.getListIndex(location);\n    }\n    getListRenderCount(location) {\n        return this.model.getListRenderCount(location);\n    }\n    getNode(location) {\n        return this.nodeMapper.map(this.model.getNode(location));\n    }\n    getNodeLocation(node) {\n        return node.element;\n    }\n    getParentNodeLocation(location) {\n        return this.model.getParentNodeLocation(location);\n    }\n    getFirstElementChild(location) {\n        const result = this.model.getFirstElementChild(location);\n        if (result === null || typeof result === 'undefined') {\n            return result;\n        }\n        return this.elementMapper(result.elements);\n    }\n    isCollapsible(location) {\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(location, collapsed) {\n        return this.model.setCollapsible(location, collapsed);\n    }\n    isCollapsed(location) {\n        return this.model.isCollapsed(location);\n    }\n    setCollapsed(location, collapsed, recursive) {\n        return this.model.setCollapsed(location, collapsed, recursive);\n    }\n    expandTo(location) {\n        return this.model.expandTo(location);\n    }\n    rerender(location) {\n        return this.model.rerender(location);\n    }\n    refilter() {\n        return this.model.refilter();\n    }\n    getCompressedTreeNode(location = null) {\n        return this.model.getNode(location);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { AbstractTree } from './abstractTree.js';\nimport { CompressibleObjectTreeModel } from './compressedObjectTreeModel.js';\nimport { ObjectTreeModel } from './objectTreeModel.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport class ObjectTree extends AbstractTree {\n    get onDidChangeCollapseState() { return this.model.onDidChangeCollapseState; }\n    constructor(user, container, delegate, renderers, options = {}) {\n        super(user, container, delegate, renderers, options);\n        this.user = user;\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        this.model.setChildren(element, children, options);\n    }\n    rerender(element) {\n        if (element === undefined) {\n            this.view.rerender();\n            return;\n        }\n        this.model.rerender(element);\n    }\n    hasElement(element) {\n        return this.model.has(element);\n    }\n    createModel(user, view, options) {\n        return new ObjectTreeModel(user, view, options);\n    }\n}\nclass CompressibleRenderer {\n    get compressedTreeNodeProvider() {\n        return this._compressedTreeNodeProvider();\n    }\n    constructor(_compressedTreeNodeProvider, renderer) {\n        this._compressedTreeNodeProvider = _compressedTreeNodeProvider;\n        this.renderer = renderer;\n        this.templateId = renderer.templateId;\n        if (renderer.onDidChangeTwistieState) {\n            this.onDidChangeTwistieState = renderer.onDidChangeTwistieState;\n        }\n    }\n    renderTemplate(container) {\n        const data = this.renderer.renderTemplate(container);\n        return { compressedTreeNode: undefined, data };\n    }\n    renderElement(node, index, templateData, height) {\n        const compressedTreeNode = this.compressedTreeNodeProvider.getCompressedTreeNode(node.element);\n        if (compressedTreeNode.element.elements.length === 1) {\n            templateData.compressedTreeNode = undefined;\n            this.renderer.renderElement(node, index, templateData.data, height);\n        }\n        else {\n            templateData.compressedTreeNode = compressedTreeNode;\n            this.renderer.renderCompressedElements(compressedTreeNode, index, templateData.data, height);\n        }\n    }\n    disposeElement(node, index, templateData, height) {\n        var _a, _b, _c, _d;\n        if (templateData.compressedTreeNode) {\n            (_b = (_a = this.renderer).disposeCompressedElements) === null || _b === void 0 ? void 0 : _b.call(_a, templateData.compressedTreeNode, index, templateData.data, height);\n        }\n        else {\n            (_d = (_c = this.renderer).disposeElement) === null || _d === void 0 ? void 0 : _d.call(_c, node, index, templateData.data, height);\n        }\n    }\n    disposeTemplate(templateData) {\n        this.renderer.disposeTemplate(templateData.data);\n    }\n    renderTwistie(element, twistieElement) {\n        if (this.renderer.renderTwistie) {\n            return this.renderer.renderTwistie(element, twistieElement);\n        }\n        return false;\n    }\n}\n__decorate([\n    memoize\n], CompressibleRenderer.prototype, \"compressedTreeNodeProvider\", null);\nfunction asObjectTreeOptions(compressedTreeNodeProvider, options) {\n    return options && Object.assign(Object.assign({}, options), { keyboardNavigationLabelProvider: options.keyboardNavigationLabelProvider && {\n            getKeyboardNavigationLabel(e) {\n                let compressedTreeNode;\n                try {\n                    compressedTreeNode = compressedTreeNodeProvider().getCompressedTreeNode(e);\n                }\n                catch (_a) {\n                    return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e);\n                }\n                if (compressedTreeNode.element.elements.length === 1) {\n                    return options.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(e);\n                }\n                else {\n                    return options.keyboardNavigationLabelProvider.getCompressedNodeKeyboardNavigationLabel(compressedTreeNode.element.elements);\n                }\n            }\n        } });\n}\nexport class CompressibleObjectTree extends ObjectTree {\n    constructor(user, container, delegate, renderers, options = {}) {\n        const compressedTreeNodeProvider = () => this;\n        const compressibleRenderers = renderers.map(r => new CompressibleRenderer(compressedTreeNodeProvider, r));\n        super(user, container, delegate, compressibleRenderers, asObjectTreeOptions(compressedTreeNodeProvider, options));\n    }\n    setChildren(element, children = Iterable.empty(), options) {\n        this.model.setChildren(element, children, options);\n    }\n    createModel(user, view, options) {\n        return new CompressibleObjectTreeModel(user, view, options);\n    }\n    updateOptions(optionsUpdate = {}) {\n        super.updateOptions(optionsUpdate);\n        if (typeof optionsUpdate.compressionEnabled !== 'undefined') {\n            this.model.setCompressionEnabled(optionsUpdate.compressionEnabled);\n        }\n    }\n    getCompressedTreeNode(element = null) {\n        return this.model.getCompressedTreeNode(element);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { IndexTreeModel } from './indexTreeModel.js';\nimport { ObjectTreeElementCollapseState, TreeError } from './tree.js';\nimport { Iterable } from '../../../common/iterator.js';\nexport class ObjectTreeModel {\n    constructor(user, list, options = {}) {\n        this.user = user;\n        this.rootRef = null;\n        this.nodes = new Map();\n        this.nodesByIdentity = new Map();\n        this.model = new IndexTreeModel(user, list, null, options);\n        this.onDidSplice = this.model.onDidSplice;\n        this.onDidChangeCollapseState = this.model.onDidChangeCollapseState;\n        this.onDidChangeRenderNodeCount = this.model.onDidChangeRenderNodeCount;\n        if (options.sorter) {\n            this.sorter = {\n                compare(a, b) {\n                    return options.sorter.compare(a.element, b.element);\n                }\n            };\n        }\n        this.identityProvider = options.identityProvider;\n    }\n    setChildren(element, children = Iterable.empty(), options = {}) {\n        const location = this.getElementLocation(element);\n        this._setChildren(location, this.preserveCollapseState(children), options);\n    }\n    _setChildren(location, children = Iterable.empty(), options) {\n        const insertedElements = new Set();\n        const insertedElementIds = new Set();\n        const onDidCreateNode = (node) => {\n            var _a;\n            if (node.element === null) {\n                return;\n            }\n            const tnode = node;\n            insertedElements.add(tnode.element);\n            this.nodes.set(tnode.element, tnode);\n            if (this.identityProvider) {\n                const id = this.identityProvider.getId(tnode.element).toString();\n                insertedElementIds.add(id);\n                this.nodesByIdentity.set(id, tnode);\n            }\n            (_a = options.onDidCreateNode) === null || _a === void 0 ? void 0 : _a.call(options, tnode);\n        };\n        const onDidDeleteNode = (node) => {\n            var _a;\n            if (node.element === null) {\n                return;\n            }\n            const tnode = node;\n            if (!insertedElements.has(tnode.element)) {\n                this.nodes.delete(tnode.element);\n            }\n            if (this.identityProvider) {\n                const id = this.identityProvider.getId(tnode.element).toString();\n                if (!insertedElementIds.has(id)) {\n                    this.nodesByIdentity.delete(id);\n                }\n            }\n            (_a = options.onDidDeleteNode) === null || _a === void 0 ? void 0 : _a.call(options, tnode);\n        };\n        this.model.splice([...location, 0], Number.MAX_VALUE, children, Object.assign(Object.assign({}, options), { onDidCreateNode, onDidDeleteNode }));\n    }\n    preserveCollapseState(elements = Iterable.empty()) {\n        if (this.sorter) {\n            elements = [...elements].sort(this.sorter.compare.bind(this.sorter));\n        }\n        return Iterable.map(elements, treeElement => {\n            let node = this.nodes.get(treeElement.element);\n            if (!node && this.identityProvider) {\n                const id = this.identityProvider.getId(treeElement.element).toString();\n                node = this.nodesByIdentity.get(id);\n            }\n            if (!node) {\n                let collapsed;\n                if (typeof treeElement.collapsed === 'undefined') {\n                    collapsed = undefined;\n                }\n                else if (treeElement.collapsed === ObjectTreeElementCollapseState.Collapsed || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrCollapsed) {\n                    collapsed = true;\n                }\n                else if (treeElement.collapsed === ObjectTreeElementCollapseState.Expanded || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrExpanded) {\n                    collapsed = false;\n                }\n                else {\n                    collapsed = Boolean(treeElement.collapsed);\n                }\n                return Object.assign(Object.assign({}, treeElement), { children: this.preserveCollapseState(treeElement.children), collapsed });\n            }\n            const collapsible = typeof treeElement.collapsible === 'boolean' ? treeElement.collapsible : node.collapsible;\n            let collapsed;\n            if (typeof treeElement.collapsed === 'undefined' || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrCollapsed || treeElement.collapsed === ObjectTreeElementCollapseState.PreserveOrExpanded) {\n                collapsed = node.collapsed;\n            }\n            else if (treeElement.collapsed === ObjectTreeElementCollapseState.Collapsed) {\n                collapsed = true;\n            }\n            else if (treeElement.collapsed === ObjectTreeElementCollapseState.Expanded) {\n                collapsed = false;\n            }\n            else {\n                collapsed = Boolean(treeElement.collapsed);\n            }\n            return Object.assign(Object.assign({}, treeElement), { collapsible,\n                collapsed, children: this.preserveCollapseState(treeElement.children) });\n        });\n    }\n    rerender(element) {\n        const location = this.getElementLocation(element);\n        this.model.rerender(location);\n    }\n    getFirstElementChild(ref = null) {\n        const location = this.getElementLocation(ref);\n        return this.model.getFirstElementChild(location);\n    }\n    has(element) {\n        return this.nodes.has(element);\n    }\n    getListIndex(element) {\n        const location = this.getElementLocation(element);\n        return this.model.getListIndex(location);\n    }\n    getListRenderCount(element) {\n        const location = this.getElementLocation(element);\n        return this.model.getListRenderCount(location);\n    }\n    isCollapsible(element) {\n        const location = this.getElementLocation(element);\n        return this.model.isCollapsible(location);\n    }\n    setCollapsible(element, collapsible) {\n        const location = this.getElementLocation(element);\n        return this.model.setCollapsible(location, collapsible);\n    }\n    isCollapsed(element) {\n        const location = this.getElementLocation(element);\n        return this.model.isCollapsed(location);\n    }\n    setCollapsed(element, collapsed, recursive) {\n        const location = this.getElementLocation(element);\n        return this.model.setCollapsed(location, collapsed, recursive);\n    }\n    expandTo(element) {\n        const location = this.getElementLocation(element);\n        this.model.expandTo(location);\n    }\n    refilter() {\n        this.model.refilter();\n    }\n    getNode(element = null) {\n        if (element === null) {\n            return this.model.getNode(this.model.rootRef);\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return node;\n    }\n    getNodeLocation(node) {\n        return node.element;\n    }\n    getParentNodeLocation(element) {\n        if (element === null) {\n            throw new TreeError(this.user, `Invalid getParentNodeLocation call`);\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        const location = this.model.getNodeLocation(node);\n        const parentLocation = this.model.getParentNodeLocation(location);\n        const parent = this.model.getNode(parentLocation);\n        return parent.element;\n    }\n    getElementLocation(element) {\n        if (element === null) {\n            return [];\n        }\n        const node = this.nodes.get(element);\n        if (!node) {\n            throw new TreeError(this.user, `Tree element not found: ${element}`);\n        }\n        return this.model.getNodeLocation(node);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport var ObjectTreeElementCollapseState;\n(function (ObjectTreeElementCollapseState) {\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"Expanded\"] = 0] = \"Expanded\";\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"Collapsed\"] = 1] = \"Collapsed\";\n    /**\n     * If the element is already in the tree, preserve its current state. Else, expand it.\n     */\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"PreserveOrExpanded\"] = 2] = \"PreserveOrExpanded\";\n    /**\n     * If the element is already in the tree, preserve its current state. Else, collapse it.\n     */\n    ObjectTreeElementCollapseState[ObjectTreeElementCollapseState[\"PreserveOrCollapsed\"] = 3] = \"PreserveOrCollapsed\";\n})(ObjectTreeElementCollapseState || (ObjectTreeElementCollapseState = {}));\nexport var TreeMouseEventTarget;\n(function (TreeMouseEventTarget) {\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Unknown\"] = 0] = \"Unknown\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Twistie\"] = 1] = \"Twistie\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Element\"] = 2] = \"Element\";\n    TreeMouseEventTarget[TreeMouseEventTarget[\"Filter\"] = 3] = \"Filter\";\n})(TreeMouseEventTarget || (TreeMouseEventTarget = {}));\nexport class TreeError extends Error {\n    constructor(user, message) {\n        super(`TreeError [${user}] ${message}`);\n    }\n}\nexport class WeakMapper {\n    constructor(fn) {\n        this.fn = fn;\n        this._map = new WeakMap();\n    }\n    map(key) {\n        let result = this._map.get(key);\n        if (!result) {\n            result = this.fn(key);\n            this._map.set(key, result);\n        }\n        return result;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../dom.js';\nimport { StandardKeyboardEvent } from '../keyboardEvent.js';\nimport { StandardMouseEvent } from '../mouseEvent.js';\nimport { Gesture } from '../touch.js';\nimport { Disposable } from '../../common/lifecycle.js';\nexport class Widget extends Disposable {\n    onclick(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.CLICK, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onmousedown(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_DOWN, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onmouseover(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_OVER, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onmouseleave(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.MOUSE_LEAVE, (e) => listener(new StandardMouseEvent(e))));\n    }\n    onkeydown(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, (e) => listener(new StandardKeyboardEvent(e))));\n    }\n    onkeyup(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, (e) => listener(new StandardKeyboardEvent(e))));\n    }\n    oninput(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.INPUT, listener));\n    }\n    onblur(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.BLUR, listener));\n    }\n    onfocus(domNode, listener) {\n        this._register(dom.addDisposableListener(domNode, dom.EventType.FOCUS, listener));\n    }\n    ignoreGesture(domNode) {\n        return Gesture.ignoreTarget(domNode);\n    }\n}\n"],"names":["MOUSE_CURSOR_TEXT_CSS_CLASS_NAME","CSS_DONE","CSS_ACTIVE","CSS_INFINITE","CSS_INFINITE_LONG_RUNNING","CSS_DISCRETE","ProgressBar","_Disposable","_inherits","_super","_createSuper","container","options","_this","_classCallCheck","call","workedVal","showDelayedScheduler","_register","RunOnceScheduler","show","element","longRunningScheduler","infiniteLongRunning","LONG_RUNNING_INFINITE_THRESHOLD","create","_createClass","key","value","this","document","createElement","classList","add","setAttribute","appendChild","bit","style","backgroundColor","progressBarBackground","width","opacity","remove","totalWork","undefined","cancel","doDone","delayed","_this2","contains","setTimeout","off","schedule","Disposable","ResizableHTMLElement","currentSize","_onDidWillResize","Emitter","onDidWillResize","event","_onDidResize","onDidResize","_sashListener","DisposableStore","_size","Dimension","_minSize","_maxSize","Number","MAX_SAFE_INTEGER","domNode","_eastSash","Sash","getVerticalSashLeft","orientation","_westSash","_northSash","getHorizontalSashTop","orthogonalEdge","OrthogonalEdge","North","_southSash","height","South","orthogonalStartSash","orthogonalEndSash","deltaY","deltaX","Event","any","onDidStart","fire","onDidEnd","dimension","done","onDidChange","e","currentX","startX","layout","east","west","currentY","startY","north","south","onDidReset","_preferredSize","dispose","state","arguments","length","size","_this$_minSize","minHeight","minWidth","_this$_maxSize","maxHeight","maxWidth","Math","max","min","newSize","equals","clearSashHoverState","get","set","__decorate","decorators","target","desc","d","c","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","onDidChangeGlobalSize","onDidChangeHoverDelay","MouseEventFactory","disposables","DomEmitter","window","memoize","prototype","GestureEventFactory","el","EventType","Change","End","OrthogonalPointerEventFactory","factory","onPointerMove","onPointerUp","PointerEventsDisabledCssClass","layoutProvider","hoverDelay","hoverDelayer","Delayer","_state","onDidEnablementChange","_onDidStart","_onDidChange","_onDidReset","_onDidEnd","orthogonalStartSashDisposables","orthogonalStartDragHandleDisposables","orthogonalEndSashDisposables","orthogonalEndDragHandleDisposables","linkedSash","append","$","concat","isMacintosh","onMouseDown","onPointerStart","_assertThisInitialized","onMouseDoubleClick","onPointerDoublePress","onMouseEnter","onMouseLeave","Gesture","addTarget","onTouchStart","Start","onTap","Tap","doubleTapTimeout","clearTimeout","delay","toggle","_orthogonalStartSash","sash","clear","onChange","_orthogonalStartDragHandle","toDisposable","_orthogonalEndSash","_this3","_orthogonalEndDragHandle","pointerEventFactory","_this4","EventHelper","stop","isMultisashResize","__orthogonalSashEvent","orthogonalSash","getOrthogonalSash","__linkedSashEvent","_step","iframes","getElementsByTagName","_iterator","_createForOfIteratorHelper","s","n","err","f","pageX","pageY","altKey","startEvent","createStyleSheet","updateStyle","cursor","textContent","removeChild","_step2","_iterator2","verticalProvider","left","getVerticalSashTop","top","getVerticalSashHeight","horizontalProvider","getHorizontalSashLeft","getHorizontalSashWidth","_a","initialTarget","HTMLElement","_get","_getPrototypeOf","fromLinkedSash","trigger","then","ARROW_IMG_SIZE","ScrollbarArrow","_Widget","opts","_this$domNode$classLi","_onActivate","onActivate","bgDomNode","className","position","bgWidth","bgHeight","bottom","right","apply","_toConsumableArray","ThemeIcon","asClassNameArray","icon","_pointerMoveMonitor","GlobalPointerMoveMonitor","dom","addStandardDisposableListener","POINTER_DOWN","_arrowPointerDown","_pointerdownRepeatTimer","IntervalTimer","_pointerdownScheduleRepeatTimer","TimeoutTimer","Element","cancelAndSet","startMonitoring","pointerId","buttons","pointerMoveData","preventDefault","Widget","ScrollbarVisibilityController","visibility","visibleClassName","invisibleClassName","_visibility","_visibleClassName","_invisibleClassName","_domNode","_isVisible","_isNeeded","_rawShouldBeVisible","_shouldBeVisible","_revealTimer","_updateShouldBeVisible","rawShouldBeVisible","shouldBeVisible","_applyVisibilitySetting","ensureVisibility","isNeeded","setClassName","setShouldBeVisible","_reveal","_hide","setIfNotSet","withFadeAway","AbstractScrollbar","_lazyRender","lazyRender","_host","host","_scrollable","scrollable","_scrollByPage","scrollByPage","_scrollbarState","scrollbarState","_visibilityController","extraScrollbarClassName","setIsNeeded","_shouldRender","createFastDomNode","setDomNode","setPosition","addDisposableListener","_domNodePointerDown","arrow","slider","setTop","setLeft","setWidth","setHeight","setLayerHinting","setContain","button","_sliderPointerDown","onclick","leftButton","stopPropagation","visibleSize","setVisibleSize","render","elementScrollSize","setScrollSize","elementScrollPosition","setScrollPosition","_renderDomNode","getRectangleLargeSize","getRectangleSmallSize","_updateSlider","getSliderSize","getArrowSize","getSliderPosition","_onPointerDown","domTop","getClientRects","sliderStart","sliderStop","pointerPos","_sliderPointerPosition","offsetX","offsetY","domNodePosition","getDomNodePagePosition","offset","_pointerDownRelativePosition","_setDesiredScrollPositionNow","getDesiredScrollPositionFromOffsetPaged","getDesiredScrollPositionFromOffset","initialPointerPosition","initialPointerOrthogonalPosition","_sliderOrthogonalPointerPosition","initialScrollbarState","clone","toggleClassName","pointerOrthogonalPosition","pointerOrthogonalDelta","abs","platform","getScrollPosition","pointerDelta","getDesiredScrollPositionFromDelta","onDragEnd","onDragStart","_desiredScrollPosition","desiredScrollPosition","writeScrollPosition","setScrollPositionNow","scrollbarSize","_updateScrollbarSize","setScrollbarSize","HorizontalScrollbar","_AbstractScrollbar","scrollDimensions","getScrollDimensions","scrollPosition","getCurrentScrollPosition","ScrollbarState","horizontalHasArrows","arrowSize","horizontal","horizontalScrollbarSize","vertical","verticalScrollbarSize","scrollWidth","scrollLeft","arrowDelta","scrollbarDelta","_createArrow","Codicon","scrollbarButtonLeft","onMouseWheel","StandardWheelEvent","scrollbarButtonRight","_createSlider","floor","horizontalSliderSize","sliderSize","sliderPosition","largeSize","smallSize","setBottom","_onElementScrollSize","_onElementScrollPosition","_onElementSize","updateScrollbarSize","setOppositeScrollbarSize","setVisibility","VerticalScrollbar","verticalHasArrows","scrollHeight","scrollTop","scrollbarButtonUp","scrollbarButtonDown","verticalSliderSize","setRight","MouseWheelClassifierItem","timestamp","score","MouseWheelClassifier","_capacity","_memory","_front","_rear","remainingInfluence","iteration","index","influence","pow","osZoomFactor","devicePixelRatio","getZoomFactor","accept","Date","now","item","_computeScore","_isAlmostInt","round","INSTANCE","AbstractScrollableElement","_onScroll","onScroll","_onWillScroll","overflow","_options","result","useShadows","handleMouseWheel","flipAxes","consumeMouseWheelIfScrollbarIsNeeded","alwaysConsumeMouseWheel","scrollYToX","mouseWheelScrollSensitivity","fastScrollSensitivity","scrollPredominantAxis","mouseWheelSmoothScroll","listenOnDomNode","resolveOptions","_onDidScroll","scrollbarHost","mouseWheelEvent","_onMouseWheel","_onDragStart","_onDragEnd","_verticalScrollbar","_horizontalScrollbar","_leftShadowDomNode","_topShadowDomNode","_topLeftShadowDomNode","_listenOnDomNode","_mouseWheelToDispose","_setListeningToMouseWheel","onmouseover","_onMouseOver","onmouseleave","_onMouseLeave","_hideTimeout","_isDragging","_mouseIsOver","_revealOnScroll","parent","insertBefore","browserEvent","delegatePointerDown","dimensions","setScrollDimensions","newClassName","newOptions","updateOptions","_render","shouldListen","push","MOUSE_WHEEL","passive","defaultPrevented","classifier","acceptStandardWheelEvent","didScroll","_ref","shiftConvert","shiftKey","futureScrollPosition","getFutureScrollPosition","deltaScrollTop","desiredScrollTop","ceil","deltaScrollLeft","desiredScrollLeft","validateScrollPosition","isPhysicalMouseWheel","setScrollPositionSmooth","consumeMouseWheel","onDidScroll","Error","scrollState","enableTop","enableLeft","leftClassName","topClassName","topLeftClassName","beginReveal","_scheduleHide","beginHide","ScrollableElement","_AbstractScrollableEl","_super2","Scrollable","forceIntegerValues","smoothScrollDuration","scheduleAtNextAnimationFrame","callback","update","SmoothScrollableElement","_AbstractScrollableEl2","_super3","reuseAnimation","DomScrollableElement","_AbstractScrollableEl3","_super4","_this5","_element","scrollTopChanged","scrollLeftChanged","scanDomNode","clientWidth","clientHeight","oppositeScrollbarSize","scrollSize","_scrollbarSize","_oppositeScrollbarSize","_arrowSize","_visibleSize","_scrollSize","_scrollPosition","_computedAvailableSize","_computedIsNeeded","_computedSliderSize","_computedSliderRatio","_computedSliderPosition","_refreshComputedValues","iVisibleSize","iScrollSize","iScrollPosition","_computeValues","computedAvailableSize","computedIsNeeded","computedSliderSize","computedSliderRatio","computedSliderPosition","desiredSliderPosition","correctedOffset","delta","computedRepresentableSize","SELECT_OPTION_ENTRY_TEMPLATE_ID","SelectListRenderer","data","root","text","detail","decoratorRight","templateData","isDisabled","innerText","_templateData","SelectBoxList","selected","contextViewProvider","styles","selectBoxOptions","_currentSelection","_hasDetails","_skipLayout","_sticky","minBottomMargin","DEFAULT_DROPDOWN_MINIMUM_BOTTOM_MARGIN","selectElement","ariaLabel","ariaDescription","_onDidSelect","registerListeners","constructSelectDropDown","setOptions","initStyleSheet","selectDropDownContainer","selectionDetailsPane","widthControlOuterDiv","widthControlInnerDiv","widthControlElement","_dropDownPosition","styleElement","DRAG_START","listIsVisibleOnTouchStart","selectedIndex","title","CLICK","hideSelectDropDown","showSelectDropDown","MOUSE_DOWN","KEY_DOWN","StandardKeyboardEvent","showDropDown","keyCode","arrays","_cachedMaxDetailsHeight","forEach","option","createOption","description","select","selectList","splice","tabIndex","focus","blur","focusable","styleSelectElement","content","listFocusBackground","listFocusForeground","decoratorRightForeground","selectBackground","selectBorder","selectListBorder","listHoverForeground","listHoverBackground","listFocusOutline","listHoverOutline","join","_b","_c","background","foreground","selectForeground","border","color","borderColor","listBackground","asCssValueWithDefault","selectListBackground","selectDropDownListContainer","optionsBorder","focusBorder","outlineColor","outlineOffset","disabled","createSelectList","setOptionsList","showContextView","getAnchor","renderSelectDropDown","layoutSelectDropDown","onHide","anchorPosition","optionsAsChildren","focusSelect","hideContextView","preLayoutPosition","error","_this6","maxDetailsPaneHeight","_option","updateDetail","offsetHeight","selectPosition","getComputedStyle","verticalPadding","parseFloat","getPropertyValue","maxSelectDropDownHeightBelow","innerHeight","maxSelectDropDownHeightAbove","DEFAULT_DROPDOWN_MINIMUM_TOP_MARGIN","selectWidth","offsetWidth","selectMinWidth","setWidthControlElement","selectOptimalWidth","toString","getHTMLElement","listHeight","contentHeight","measureMaxDetailsHeight","minRequiredDropDownHeight","maxVisibleOptionsBelow","getHeight","maxVisibleOptionsAbove","DEFAULT_MINIMUM_VISIBLE_OPTIONS","domFocus","setFocus","reveal","getFocus","elementWidth","longest","longestLength","detailLength","rightDecoratorLength","len","getTotalWidth","_this7","listRenderer","List","verticalScrollMode","keyboardSupport","mouseSupport","accessibilityProvider","getAriaLabel","label","getWidgetAriaLabel","localize","comment","getRole","getWidgetRole","onKeyDown","onSelectDropDownKeyDown","chain","filter","map","on","onEnter","onEscape","onUpArrow","onDownArrow","onPageDown","onPageUp","onHome","onEnd","onCharacter","POINTER_UP","onMouseOver","onDidChangeFocus","onListFocus","FOCUS_OUT","isAncestor","relatedTarget","onListBlur","styleList","listRowElement","closest","getAttribute","actionHandler","rendered","renderMarkdown","supportThemeIcons","cleanRenderedMarkdown","childNodes","child","tagName","toLowerCase","indexes","descriptionIsMarkdown","descriptionMarkdownActionHandler","renderDescriptionMarkdown","display","nextOptionDisabled","_this8","focusPreviousPage","_this9","focusNextPage","ch","KeyCodeUtils","optionIndex","charAt","toUpperCase","SelectBoxNative","eventType","showSelect","applyStyles","SelectBox","useCustomDrawn","selectBoxDelegate","onDidSelect","setFocusable","State","Sizing","defaultStyles","separatorBorder","Color","transparent","ViewItem","view","disposable","_cachedVisibleSize","cachedVisibleSize","visible","clamp","viewMinimumSize","viewMaximumSize","setVisible","minimumSize","maximumSize","priority","proportionalLayout","snap","enabled","pointerEvents","layoutContext","layoutContainer","VerticalViewItem","_ViewItem","HorizontalViewItem","_ViewItem2","Distribute","type","Split","Auto","Invisible","SplitView","_d","_e","contentSize","proportions","viewItems","sashItems","Idle","_onDidSashChange","_onDidSashReset","_startSnappingEnabled","_endSnappingEnabled","onDidSashChange","onDidSashReset","inverseAltBehavior","getSashOrthogonalSize","sashContainer","viewContainer","scrollableElement","scrollbarVisibility","onDidScrollViewContainer","_","getDomNode","descriptor","views","viewDescriptor","sizing","types","doAddView","reduce","saveProportions","startSnappingEnabled","updateSashEnablement","endSnappingEnabled","isTransparent","removeProperty","setProperty","skipLayout","previousSize","total","proportion","range","lowPriorityIndexes","highPriorityIndexes","resize","distributeEmptySpace","layoutViews","_step3","start","alt","_iterator3","findIndex","combinedDisposable","body","resetSashDragState","sashDragState","current","snapBefore","snapAfter","sizes","minDelta","NEGATIVE_INFINITY","maxDelta","POSITIVE_INFINITY","viewItem","upIndexes","downIndexes","minDeltaUp","maxDeltaUp","maxDeltaDown","minDeltaDown","snapBeforeIndex","findFirstSnapIndex","snapAfterIndex","halfSize","limitDelta","_ref2","_this$sashDragState","newDelta","isLastSash","newSizes","viewItemIndex","newMinDelta","newMaxDelta","resizeIndex","_step4","_iterator4","indexOf","relayout","Busy","_step5","flexibleViewItems","flexibleSize","_iterator5","_i2","_flexibleViewItems","children","viewSize","onChangeDisposable","onViewChange","containerDisposable","areViewsDistributed","getViewSize","getSashPosition","assign","sashEventMapper","onStartDisposable","onStart","onSashStart","onSashChange","onEndDisposable","onSashEnd","onDidResetDisposable","sashItem","distributeViewSizes","overloadMinDelta","overloadMaxDelta","_step6","_iterator6","pushToStart","_step7","_iterator7","pushToEnd","upItems","upSizes","downItems","downSizes","snapped","snapView","deltaUp","deltaDown","lowPriorityIndex","_step8","emptyDelta","_iterator8","_step9","_iterator9","_step10","_iterator10","updateScrollableElement","previous","collapsesDown","expandsDown","reverseViews","reverse","collapsesUp","expandsUp","snappedBefore","snappedAfter","_step11","_iterator11","_step12","_iterator12","_step13","_iterator13","TableListRenderer","columns","renderers","getColumnSize","templateId","TemplateId","renderedTemplates","Set","rendererMap","Map","column","renderer","rowContainer","cellContainers","cellTemplateData","cellContainer","renderTemplate","cell","project","renderElement","disposeElement","disposeTemplate","clearNode","delete","ColumnHeader","_onDidLayout","onDidLayout","tooltip","minimumWidth","maximumWidth","onDidChangeWidthConstraints","None","Table","user","virtualDelegate","domId","InstanceCount","cachedWidth","cachedHeight","headers","a","b","weight","splitview","headerRowHeight","lineHeight","delegate","list","row","getTemplateId","h","_slicedToArray","layoutColumn","totalWeight","resizeView","unthemedListStyles","onDidChangeSelection","onMouseDblClick","onPointer","onDidFocus","renderHeight","onDidDispose","deleteCount","elements","getSelectedElements","getSelection","unthemedToggleStyles","inputActiveOptionBorder","inputActiveOptionForeground","inputActiveOptionBackground","Toggle","_onChange","_onKeyDown","_opts","_checked","isChecked","classes","_icon","actionClassName","split","notFocusable","String","ev","checked","ignoreGesture","onkeydown","keyboardEvent","newIsChecked","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","ToolBar","contextMenuProvider","submenuActionViewItems","hasSecondaryActions","_onDidChangeDropdownVisibility","EventMultiplexer","onDidChangeDropdownVisibility","lookupKeybindings","getKeyBinding","toggleMenuAction","ToggleMenuAction","toggleMenuActionViewItem","toggleMenuTitle","actionBar","ActionBar","actionRunner","allowContextMenu","actionViewItemProvider","action","viewItemOptions","id","ID","DropdownMenuActionViewItem","menuActions","keybindingProvider","classNames","moreIcon","toolBarMore","anchorAlignmentProvider","menuAsChild","renderDropdownAsChildElement","skipTelemetry","setActionContext","context","onDidChangeVisibility","SubmenuAction","actions","class","indexOrElement","getAction","primaryActions","secondaryActions","primaryActionsToSet","slice","keybinding","getKeybindingLabel","withNullAsUndefined","getLabel","_Action","toggleDropdownMenu","nls","_menuActions","_regeneratorRuntime","mark","_callee","wrap","_context","prev","Action","TreeElementsDragAndDropData","_ElementsDragAndDropD","node","ElementsDragAndDropData","asTreeDragAndDropData","TreeNodeListDragAndDrop","modelProvider","dnd","autoExpandDisposable","getDragURI","nodes","originalEvent","getDragLabel","targetNode","targetIndex","raw","onDragOver","didChangeAutoExpandNode","autoExpandNode","autoExpand","disposableTimeout","model","ref","getNodeLocation","isCollapsed","setCollapsed","bubble","feedback","effect","parentRef","getParentNodeLocation","parentNode","getNode","parentIndex","getListIndex","getListRenderCount","drop","RenderIndentGuides","ComposedTreeDelegate","hasDynamicHeight","setDynamicHeight","EventCollection","_elements","TreeRenderer","onDidChangeCollapseState","activeNodes","renderedIndentGuides","renderedElements","renderedNodes","indent","DefaultIndent","hideTwistiesOfChildlessElements","shouldRenderIndentGuides","activeIndentNodes","indentGuidesDisposable","onDidChangeNodeTwistieState","onDidChangeTwistieState","_step$value","renderTreeElement","renderIndentGuides","_step2$value","_renderIndentGuides","_onDidChangeActiveNodes","twistie","contents","_templateData$twistie","depth","paddingLeft","collapsible","collapsed","removeAttribute","treeItemExpanded","twistieRendered","renderTwistie","visibleChildrenCount","_templateData$twistie2","disposableStore","_loop","guide","has","childElementCount","firstElementChild","line","TreeFindMode","TreeFindMatchType","FindFilter","tree","keyboardNavigationLabelProvider","_filter","_totalCount","_matchCount","_pattern","_lowercasePattern","onWillRefilter","reset","parentVisibility","isFilterResult","getVisibleState","FuzzyScore","Default","getKeyboardNavigationLabel","labels","Array","isArray","l","labelStr","findMatchType","Contiguous","fuzzyScore","firstMatchCanBeWeak","boostFullMatch","findMode","Filter","defaultFindVisibility","unthemedInboxStyles","FindController","_onDidChangeMode","onDidChangeMode","_onDidChangeMatchType","onDidChangeMatchType","_onDidChangePattern","_onDidChangeOpenState","onDidChangeOpenState","enabledDisposables","_mode","defaultFindMode","Highlight","_matchType","defaultFindMatchType","Fuzzy","onDidSplice","onDidSpliceModel","mode","widget","refilter","matchType","optionsUpdate","pattern","noMatches","totalCount","matchCount","showNotFoundMessage","showMessage","clearMessage","isDefault","filterData","_history","asTreeMouseEvent","TreeMouseEventTarget","Unknown","hasParentWithClass","Twistie","dfs","fn","Trait","getFirstViewElementWithTrait","identityProvider","_nodeSet","createNodeSet","__forceEvent","_set","silent","that","nodeSet","insertedNodes","deletedNodes","visit","values","deletedNodesIdSet","deletedNodesVisitor","getId","insertedNodesMap","insertedNodesVisitor","insertedNode","TreeNodeListMouseController","_MouseController","_super6","isButton","isInputElement","isMonacoEditor","isHandledByList","isSelectionRangeChangeEvent","isSelectionSingleChangeEvent","onTwistie","expandOnlyOnTwistieClick","expandOnDoubleClick","location","recursive","toggleCollapsed","MouseController","TreeNodeList","_List","_super7","focusTrait","selectionTrait","anchorTrait","_this10","_this11","anchor","additionalFocus","additionalSelection","distinct","_this12","fromAPI","_this13","AbstractTree","_user","_this14","eventBufferer","EventBufferer","onDidChangeFindOpenState","_onWillRefilter","_onDidUpdateOptions","treeDelegate","onDidChangeCollapseStateRelay","Relay","onDidChangeActiveNodes","SetMap","getFocusedElements","selection","getAnchorElement","multipleSelectionController","getSetSize","getPosInSet","visibleChildIndex","getAriaLevel","getActiveDescendantId","createModel","input","onDidModelSplice","bufferEvents","debounce","getNodes","onLeftArrow","onRightArrow","onSpace","findWidgetEnabled","findWidgetStyles","findController","focusNavigationFilter","shouldAllowFocus","onDidChangeFindMode","onDidChangeFindMatchType","Always","wrapEvent","signal","findFuzzy","isNumber","suffix","treeIndentGuidesStroke","treeInactiveIndentGuidesStroke","getFirstElementChild","isCollapsible","setCollapsible","_this15","setSelection","_this16","relativeTop","expandTo","parentLocation","parentListIndex","some","_this$view$getFocus","firstChildIndex","createAsyncDataTreeNode","props","refreshPromise","stale","slow","collapsedByDefault","ancestor","descendant","intersects","other","AsyncDataTreeNodeWrapper","AsyncDataTreeRenderer","nodeMapper","twistieElement","_twistieElement$class","_twistieElement$class2","treeItemLoading","asTreeEvent","AsyncDataTreeElementsDragAndDropData","asAsyncDataTreeDragAndDropData","AsyncDataTreeNodeListDragAndDrop","asObjectTreeOptions","collapseByDefault","sorter","hasChildren","AsyncDataTree","dataSource","subTreeRefreshPromises","refreshPromises","_onDidRender","_onDidChangeNodeSlowState","WeakMapper","autoExpandSingleChildren","createTree","_onDidChangeCollapseState","onDidChangeModel","objectTreeDelegate","objectTreeRenderers","objectTreeOptions","ObjectTree","viewState","viewStateContext","promise","_updateChildren","rerender","_callee2","_context2","TreeError","toPromise","getDataNode","refreshAndRenderNode","dataNode","collapse","_callee3","_context3","hasElement","abrupt","expand","getParentElement","_callee4","_context4","refreshNode","_callee5","_context5","doRefreshSubTree","_callee6","childrenToRefresh","_context6","finally","doRefreshNode","sent","Promises","settled","finish","_callee7","childrenPromise","slowTimeout","_children","_context7","doGetChildren","isIterable","timeout","Iterable","empty","setChildren","t0","isCancellationError","getChildren","processChildren","createCancelablePromise","_callee8","_context8","t1","deep","catch","onUnexpectedError","childrenElementsIterable","_node$children","childrenElements","nodesToForget","childrenTreeNodesById","asyncDataTreeNode","childAsyncDataTreeNode","expanded","asTreeElement","diffIdentityProvider","sort","compare","bind","CompressibleAsyncDataTreeNodeWrapper","incompressible","CompressibleAsyncDataTreeRenderer","compressibleNodeMapperProvider","renderCompressedElements","_twistieElement$class3","_twistieElement$class4","disposeCompressedElements","CompressibleAsyncDataTree","_AsyncDataTree","compressionDelegate","compressibleNodeMapper","getCompressedNodeKeyboardNavigationLabel","els","asCompressibleObjectTreeOptions","CompressibleObjectTree","isIncompressible","getUncompressedIds","compressedNode","getCompressedTreeNode","oldSelection","oldFocus","didChangeSelection","didChangeFocus","filterResult","DataTree","_AbstractTree","ObjectTreeModel","obj","isCollapsibleStateUpdate","IndexTreeModel","rootElement","rootRef","_onDidChangeRenderNodeCount","onDidChangeRenderNodeCount","_onDidSplice","refilterDelayer","MicrotaskDelay","renderNodeCount","toInsert","spliceSmart","spliceSimple","identity","toInsertIterable","recurseLevels","diffDepth","getParentNodeWithListIndex","lastDiffIds","diff","LcsDiff","getElements","ComputeDiff","quitEarly","locationPrefix","recurseSplice","fromOriginal","fromModified","count","lastStartO","lastStartM","changes","originalStart","change","originalLength","modifiedStart","modifiedLength","onDidCreateNode","onDidDeleteNode","_this$getParentNodeWi2","listIndex","revealed","treeListElementsToInsert","nodesToInsertIterator","createTreeNode","lastIndex","lastHadChildren","visibleChildStartIndex","nodesToInsert","insertedVisibleChildrenCount","deletedVisibleChildrenCount","visibleDeleteCount","_updateAncestorsRenderNodeCount","currentlyHasChildren","_this$getTreeNodeWith","getTreeNodeWithListIndex","hasTreeNode","_this$getTreeNodeWith2","getTreeNode","_setCollapseState","_this$getTreeNodeWith3","_setListNodeCollapseState","onlyVisibleChildIndex","_setNodeCollapseState","previousRenderNodeCount","updateNodeAfterCollapseChange","updateNodeAfterFilterChange","treeElement","treeListElements","_filterNode","childElements","childRevealed","pop","_updateNodeAfterCollapseChange","_updateNodeAfterFilterChange","resultStartLength","hasVisibleDescendants","_location","_toArray","rest","_location2","_this$getParentNodeWi3","_location3","indexTreeNode","tail2","noCompress","from","compress","childrenIterator","_Iterable$consume","consume","_Iterable$consume2","_decompress","decompress","CompressedObjectTreeModel","compressionEnabled","base","compressedParentNode","splicedElement","recompressedElement","elementComparator","_setChildren","parentChildren","compressedChildren","Infinity","rootChildren","decompressedRootChildren","recompressedRootChildren","insertedElements","getCompressedNode","DefaultElementMapper","CompressedTreeNodeWrapper","unwrapper","CompressibleObjectTreeModel","elementMapper","compressedNodeUnwrapper","updateElementHeight","mapList","otherNode","mapOptions","setCompressionEnabled","CompressibleRenderer","_compressedTreeNodeProvider","compressedTreeNode","compressedTreeNodeProvider","_ObjectTree","compressibleRenderers","nodesByIdentity","getElementLocation","preserveCollapseState","insertedElementIds","MAX_VALUE","tnode","ObjectTreeElementCollapseState","Collapsed","PreserveOrCollapsed","Expanded","PreserveOrExpanded","Boolean","_Error","message","_wrapNativeSuper","_map","WeakMap","listener","StandardMouseEvent","MOUSE_OVER","MOUSE_LEAVE","KEY_UP","INPUT","BLUR","FOCUS","ignoreTarget"],"sourceRoot":""}