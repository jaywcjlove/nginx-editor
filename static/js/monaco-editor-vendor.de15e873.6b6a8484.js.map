{"version":3,"file":"static/js/monaco-editor-vendor.de15e873.6b6a8484.js","mappings":"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","sources":["../../node_modules/monaco-editor/esm/vs/editor/browser/editorBrowser.js","../../node_modules/monaco-editor/esm/vs/editor/browser/editorDom.js","../../node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js","../../node_modules/monaco-editor/esm/vs/editor/browser/observableUtilities.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/abstractCodeEditorService.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/bulkEditService.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorService.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/editorWorkerService.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/hoverService/hoverWidget.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/hoverService/updatableHoverWidget.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/hoverService/hoverService.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/markerDecorations.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/openerService.js","../../node_modules/monaco-editor/esm/vs/editor/browser/services/webWorker.js","../../node_modules/monaco-editor/esm/vs/editor/browser/stableEditorScroll.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as editorCommon from '../common/editorCommon.js';\n/**\n *@internal\n */\nexport function isCodeEditor(thing) {\n    if (thing && typeof thing.getEditorType === 'function') {\n        return thing.getEditorType() === editorCommon.EditorType.ICodeEditor;\n    }\n    else {\n        return false;\n    }\n}\n/**\n *@internal\n */\nexport function isDiffEditor(thing) {\n    if (thing && typeof thing.getEditorType === 'function') {\n        return thing.getEditorType() === editorCommon.EditorType.IDiffEditor;\n    }\n    else {\n        return false;\n    }\n}\n/**\n *@internal\n */\nexport function isCompositeEditor(thing) {\n    return !!thing\n        && typeof thing === 'object'\n        && typeof thing.onDidChangeActiveEditor === 'function';\n}\n/**\n *@internal\n */\nexport function getCodeEditor(thing) {\n    if (isCodeEditor(thing)) {\n        return thing;\n    }\n    if (isDiffEditor(thing)) {\n        return thing.getModifiedEditor();\n    }\n    if (isCompositeEditor(thing) && isCodeEditor(thing.activeCodeEditor)) {\n        return thing.activeCodeEditor;\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../base/browser/globalPointerMoveMonitor.js';\nimport { StandardMouseEvent } from '../../base/browser/mouseEvent.js';\nimport { RunOnceScheduler } from '../../base/common/async.js';\nimport { Disposable, DisposableStore } from '../../base/common/lifecycle.js';\nimport { asCssVariable } from '../../platform/theme/common/colorRegistry.js';\n/**\n * Coordinates relative to the whole document (e.g. mouse event's pageX and pageY)\n */\nexport class PageCoordinates {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this._pageCoordinatesBrand = undefined;\n    }\n    toClientCoordinates(targetWindow) {\n        return new ClientCoordinates(this.x - targetWindow.scrollX, this.y - targetWindow.scrollY);\n    }\n}\n/**\n * Coordinates within the application's client area (i.e. origin is document's scroll position).\n *\n * For example, clicking in the top-left corner of the client area will\n * always result in a mouse event with a client.x value of 0, regardless\n * of whether the page is scrolled horizontally.\n */\nexport class ClientCoordinates {\n    constructor(clientX, clientY) {\n        this.clientX = clientX;\n        this.clientY = clientY;\n        this._clientCoordinatesBrand = undefined;\n    }\n    toPageCoordinates(targetWindow) {\n        return new PageCoordinates(this.clientX + targetWindow.scrollX, this.clientY + targetWindow.scrollY);\n    }\n}\n/**\n * The position of the editor in the page.\n */\nexport class EditorPagePosition {\n    constructor(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this._editorPagePositionBrand = undefined;\n    }\n}\n/**\n * Coordinates relative to the the (top;left) of the editor that can be used safely with other internal editor metrics.\n * **NOTE**: This position is obtained by taking page coordinates and transforming them relative to the\n * editor's (top;left) position in a way in which scale transformations are taken into account.\n * **NOTE**: These coordinates could be negative if the mouse position is outside the editor.\n */\nexport class CoordinatesRelativeToEditor {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this._positionRelativeToEditorBrand = undefined;\n    }\n}\nexport function createEditorPagePosition(editorViewDomNode) {\n    const editorPos = dom.getDomNodePagePosition(editorViewDomNode);\n    return new EditorPagePosition(editorPos.left, editorPos.top, editorPos.width, editorPos.height);\n}\nexport function createCoordinatesRelativeToEditor(editorViewDomNode, editorPagePosition, pos) {\n    // The editor's page position is read from the DOM using getBoundingClientRect().\n    //\n    // getBoundingClientRect() returns the actual dimensions, while offsetWidth and offsetHeight\n    // reflect the unscaled size. We can use this difference to detect a transform:scale()\n    // and we will apply the transformation in inverse to get mouse coordinates that make sense inside the editor.\n    //\n    // This could be expanded to cover rotation as well maybe by walking the DOM up from `editorViewDomNode`\n    // and computing the effective transformation matrix using getComputedStyle(element).transform.\n    //\n    const scaleX = editorPagePosition.width / editorViewDomNode.offsetWidth;\n    const scaleY = editorPagePosition.height / editorViewDomNode.offsetHeight;\n    // Adjust mouse offsets if editor appears to be scaled via transforms\n    const relativeX = (pos.x - editorPagePosition.x) / scaleX;\n    const relativeY = (pos.y - editorPagePosition.y) / scaleY;\n    return new CoordinatesRelativeToEditor(relativeX, relativeY);\n}\nexport class EditorMouseEvent extends StandardMouseEvent {\n    constructor(e, isFromPointerCapture, editorViewDomNode) {\n        super(dom.getWindow(editorViewDomNode), e);\n        this._editorMouseEventBrand = undefined;\n        this.isFromPointerCapture = isFromPointerCapture;\n        this.pos = new PageCoordinates(this.posx, this.posy);\n        this.editorPos = createEditorPagePosition(editorViewDomNode);\n        this.relativePos = createCoordinatesRelativeToEditor(editorViewDomNode, this.editorPos, this.pos);\n    }\n}\nexport class EditorMouseEventFactory {\n    constructor(editorViewDomNode) {\n        this._editorViewDomNode = editorViewDomNode;\n    }\n    _create(e) {\n        return new EditorMouseEvent(e, false, this._editorViewDomNode);\n    }\n    onContextMenu(target, callback) {\n        return dom.addDisposableListener(target, 'contextmenu', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseUp(target, callback) {\n        return dom.addDisposableListener(target, 'mouseup', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.MOUSE_DOWN, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_DOWN, (e) => {\n            callback(this._create(e), e.pointerId);\n        });\n    }\n    onMouseLeave(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.MOUSE_LEAVE, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseMove(target, callback) {\n        return dom.addDisposableListener(target, 'mousemove', (e) => callback(this._create(e)));\n    }\n}\nexport class EditorPointerEventFactory {\n    constructor(editorViewDomNode) {\n        this._editorViewDomNode = editorViewDomNode;\n    }\n    _create(e) {\n        return new EditorMouseEvent(e, false, this._editorViewDomNode);\n    }\n    onPointerUp(target, callback) {\n        return dom.addDisposableListener(target, 'pointerup', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_DOWN, (e) => {\n            callback(this._create(e), e.pointerId);\n        });\n    }\n    onPointerLeave(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_LEAVE, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerMove(target, callback) {\n        return dom.addDisposableListener(target, 'pointermove', (e) => callback(this._create(e)));\n    }\n}\nexport class GlobalEditorPointerMoveMonitor extends Disposable {\n    constructor(editorViewDomNode) {\n        super();\n        this._editorViewDomNode = editorViewDomNode;\n        this._globalPointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._keydownListener = null;\n    }\n    startMonitoring(initialElement, pointerId, initialButtons, pointerMoveCallback, onStopCallback) {\n        // Add a <<capture>> keydown event listener that will cancel the monitoring\n        // if something other than a modifier key is pressed\n        this._keydownListener = dom.addStandardDisposableListener(initialElement.ownerDocument, 'keydown', (e) => {\n            const chord = e.toKeyCodeChord();\n            if (chord.isModifierKey()) {\n                // Allow modifier keys\n                return;\n            }\n            this._globalPointerMoveMonitor.stopMonitoring(true, e.browserEvent);\n        }, true);\n        this._globalPointerMoveMonitor.startMonitoring(initialElement, pointerId, initialButtons, (e) => {\n            pointerMoveCallback(new EditorMouseEvent(e, true, this._editorViewDomNode));\n        }, (e) => {\n            this._keydownListener.dispose();\n            onStopCallback(e);\n        });\n    }\n    stopMonitoring() {\n        this._globalPointerMoveMonitor.stopMonitoring(true);\n    }\n}\n/**\n * A helper to create dynamic css rules, bound to a class name.\n * Rules are reused.\n * Reference counting and delayed garbage collection ensure that no rules leak.\n*/\nexport class DynamicCssRules {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._instanceId = ++DynamicCssRules._idPool;\n        this._counter = 0;\n        this._rules = new Map();\n        // We delay garbage collection so that hanging rules can be reused.\n        this._garbageCollectionScheduler = new RunOnceScheduler(() => this.garbageCollect(), 1000);\n    }\n    createClassNameRef(options) {\n        const rule = this.getOrCreateRule(options);\n        rule.increaseRefCount();\n        return {\n            className: rule.className,\n            dispose: () => {\n                rule.decreaseRefCount();\n                this._garbageCollectionScheduler.schedule();\n            }\n        };\n    }\n    getOrCreateRule(properties) {\n        const key = this.computeUniqueKey(properties);\n        let existingRule = this._rules.get(key);\n        if (!existingRule) {\n            const counter = this._counter++;\n            existingRule = new RefCountedCssRule(key, `dyn-rule-${this._instanceId}-${counter}`, dom.isInShadowDOM(this._editor.getContainerDomNode())\n                ? this._editor.getContainerDomNode()\n                : undefined, properties);\n            this._rules.set(key, existingRule);\n        }\n        return existingRule;\n    }\n    computeUniqueKey(properties) {\n        return JSON.stringify(properties);\n    }\n    garbageCollect() {\n        for (const rule of this._rules.values()) {\n            if (!rule.hasReferences()) {\n                this._rules.delete(rule.key);\n                rule.dispose();\n            }\n        }\n    }\n}\nDynamicCssRules._idPool = 0;\nclass RefCountedCssRule {\n    constructor(key, className, _containerElement, properties) {\n        this.key = key;\n        this.className = className;\n        this.properties = properties;\n        this._referenceCount = 0;\n        this._styleElementDisposables = new DisposableStore();\n        this._styleElement = dom.createStyleSheet(_containerElement, undefined, this._styleElementDisposables);\n        this._styleElement.textContent = this.getCssText(this.className, this.properties);\n    }\n    getCssText(className, properties) {\n        let str = `.${className} {`;\n        for (const prop in properties) {\n            const value = properties[prop];\n            let cssValue;\n            if (typeof value === 'object') {\n                cssValue = asCssVariable(value.id);\n            }\n            else {\n                cssValue = value;\n            }\n            const cssPropName = camelToDashes(prop);\n            str += `\\n\\t${cssPropName}: ${cssValue};`;\n        }\n        str += `\\n}`;\n        return str;\n    }\n    dispose() {\n        this._styleElementDisposables.dispose();\n        this._styleElement = undefined;\n    }\n    increaseRefCount() {\n        this._referenceCount++;\n    }\n    decreaseRefCount() {\n        this._referenceCount--;\n    }\n    hasReferences() {\n        return this._referenceCount > 0;\n    }\n}\nfunction camelToDashes(str) {\n    return str.replace(/(^[A-Z])/, ([first]) => first.toLowerCase())\n        .replace(/([A-Z])/g, ([letter]) => `-${letter.toLowerCase()}`);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../nls.js';\nimport { URI } from '../../base/common/uri.js';\nimport { ICodeEditorService } from './services/codeEditorService.js';\nimport { Position } from '../common/core/position.js';\nimport { IModelService } from '../common/services/model.js';\nimport { ITextModelService } from '../common/services/resolverService.js';\nimport { MenuId, MenuRegistry, Action2 } from '../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../platform/keybinding/common/keybindingsRegistry.js';\nimport { Registry } from '../../platform/registry/common/platform.js';\nimport { ITelemetryService } from '../../platform/telemetry/common/telemetry.js';\nimport { assertType } from '../../base/common/types.js';\nimport { ILogService } from '../../platform/log/common/log.js';\nimport { getActiveElement } from '../../base/browser/dom.js';\nexport class Command {\n    constructor(opts) {\n        this.id = opts.id;\n        this.precondition = opts.precondition;\n        this._kbOpts = opts.kbOpts;\n        this._menuOpts = opts.menuOpts;\n        this.metadata = opts.metadata;\n    }\n    register() {\n        if (Array.isArray(this._menuOpts)) {\n            this._menuOpts.forEach(this._registerMenuItem, this);\n        }\n        else if (this._menuOpts) {\n            this._registerMenuItem(this._menuOpts);\n        }\n        if (this._kbOpts) {\n            const kbOptsArr = Array.isArray(this._kbOpts) ? this._kbOpts : [this._kbOpts];\n            for (const kbOpts of kbOptsArr) {\n                let kbWhen = kbOpts.kbExpr;\n                if (this.precondition) {\n                    if (kbWhen) {\n                        kbWhen = ContextKeyExpr.and(kbWhen, this.precondition);\n                    }\n                    else {\n                        kbWhen = this.precondition;\n                    }\n                }\n                const desc = {\n                    id: this.id,\n                    weight: kbOpts.weight,\n                    args: kbOpts.args,\n                    when: kbWhen,\n                    primary: kbOpts.primary,\n                    secondary: kbOpts.secondary,\n                    win: kbOpts.win,\n                    linux: kbOpts.linux,\n                    mac: kbOpts.mac,\n                };\n                KeybindingsRegistry.registerKeybindingRule(desc);\n            }\n        }\n        CommandsRegistry.registerCommand({\n            id: this.id,\n            handler: (accessor, args) => this.runCommand(accessor, args),\n            metadata: this.metadata\n        });\n    }\n    _registerMenuItem(item) {\n        MenuRegistry.appendMenuItem(item.menuId, {\n            group: item.group,\n            command: {\n                id: this.id,\n                title: item.title,\n                icon: item.icon,\n                precondition: this.precondition\n            },\n            when: item.when,\n            order: item.order\n        });\n    }\n}\nexport class MultiCommand extends Command {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, name, implementation, when) {\n        this._implementations.push({ priority, name, implementation, when });\n        this._implementations.sort((a, b) => b.priority - a.priority);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i].implementation === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    runCommand(accessor, args) {\n        const logService = accessor.get(ILogService);\n        const contextKeyService = accessor.get(IContextKeyService);\n        logService.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);\n        for (const impl of this._implementations) {\n            if (impl.when) {\n                const context = contextKeyService.getContext(getActiveElement());\n                const value = impl.when.evaluate(context);\n                if (!value) {\n                    continue;\n                }\n            }\n            const result = impl.implementation(accessor, args);\n            if (result) {\n                logService.trace(`Command '${this.id}' was handled by '${impl.name}'.`);\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n        logService.trace(`The Command '${this.id}' was not handled by any implementation.`);\n    }\n}\n//#endregion\n/**\n * A command that delegates to another command's implementation.\n *\n * This lets different commands be registered but share the same implementation\n */\nexport class ProxyCommand extends Command {\n    constructor(command, opts) {\n        super(opts);\n        this.command = command;\n    }\n    runCommand(accessor, args) {\n        return this.command.runCommand(accessor, args);\n    }\n}\nexport class EditorCommand extends Command {\n    /**\n     * Create a command class that is bound to a certain editor contribution.\n     */\n    static bindToContribution(controllerGetter) {\n        return class EditorControllerCommandImpl extends EditorCommand {\n            constructor(opts) {\n                super(opts);\n                this._callback = opts.handler;\n            }\n            runEditorCommand(accessor, editor, args) {\n                const controller = controllerGetter(editor);\n                if (controller) {\n                    this._callback(controller, args);\n                }\n            }\n        };\n    }\n    static runEditorCommand(accessor, args, precondition, runner) {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        // Find the editor with text focus or active\n        const editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n        if (!editor) {\n            // well, at least we tried...\n            return;\n        }\n        return editor.invokeWithinContext((editorAccessor) => {\n            const kbService = editorAccessor.get(IContextKeyService);\n            if (!kbService.contextMatchesRules(precondition !== null && precondition !== void 0 ? precondition : undefined)) {\n                // precondition does not hold\n                return;\n            }\n            return runner(editorAccessor, editor, args);\n        });\n    }\n    runCommand(accessor, args) {\n        return EditorCommand.runEditorCommand(accessor, args, this.precondition, (accessor, editor, args) => this.runEditorCommand(accessor, editor, args));\n    }\n}\nexport class EditorAction extends EditorCommand {\n    static convertOptions(opts) {\n        let menuOpts;\n        if (Array.isArray(opts.menuOpts)) {\n            menuOpts = opts.menuOpts;\n        }\n        else if (opts.menuOpts) {\n            menuOpts = [opts.menuOpts];\n        }\n        else {\n            menuOpts = [];\n        }\n        function withDefaults(item) {\n            if (!item.menuId) {\n                item.menuId = MenuId.EditorContext;\n            }\n            if (!item.title) {\n                item.title = opts.label;\n            }\n            item.when = ContextKeyExpr.and(opts.precondition, item.when);\n            return item;\n        }\n        if (Array.isArray(opts.contextMenuOpts)) {\n            menuOpts.push(...opts.contextMenuOpts.map(withDefaults));\n        }\n        else if (opts.contextMenuOpts) {\n            menuOpts.push(withDefaults(opts.contextMenuOpts));\n        }\n        opts.menuOpts = menuOpts;\n        return opts;\n    }\n    constructor(opts) {\n        super(EditorAction.convertOptions(opts));\n        this.label = opts.label;\n        this.alias = opts.alias;\n    }\n    runEditorCommand(accessor, editor, args) {\n        this.reportTelemetry(accessor, editor);\n        return this.run(accessor, editor, args || {});\n    }\n    reportTelemetry(accessor, editor) {\n        accessor.get(ITelemetryService).publicLog2('editorActionInvoked', { name: this.label, id: this.id });\n    }\n}\nexport class MultiEditorAction extends EditorAction {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, implementation) {\n        this._implementations.push([priority, implementation]);\n        this._implementations.sort((a, b) => b[0] - a[0]);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i][1] === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    run(accessor, editor, args) {\n        for (const impl of this._implementations) {\n            const result = impl[1](accessor, editor, args);\n            if (result) {\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n    }\n}\n//#endregion EditorAction\n//#region EditorAction2\nexport class EditorAction2 extends Action2 {\n    run(accessor, ...args) {\n        // Find the editor with text focus or active\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n        if (!editor) {\n            // well, at least we tried...\n            return;\n        }\n        // precondition does hold\n        return editor.invokeWithinContext((editorAccessor) => {\n            var _a, _b;\n            const kbService = editorAccessor.get(IContextKeyService);\n            const logService = editorAccessor.get(ILogService);\n            const enabled = kbService.contextMatchesRules((_a = this.desc.precondition) !== null && _a !== void 0 ? _a : undefined);\n            if (!enabled) {\n                logService.debug(`[EditorAction2] NOT running command because its precondition is FALSE`, this.desc.id, (_b = this.desc.precondition) === null || _b === void 0 ? void 0 : _b.serialize());\n                return;\n            }\n            return this.runEditorCommand(editorAccessor, editor, ...args);\n        });\n    }\n}\n//#endregion\n// --- Registration of commands and actions\nexport function registerModelAndPositionCommand(id, handler) {\n    CommandsRegistry.registerCommand(id, function (accessor, ...args) {\n        const instaService = accessor.get(IInstantiationService);\n        const [resource, position] = args;\n        assertType(URI.isUri(resource));\n        assertType(Position.isIPosition(position));\n        const model = accessor.get(IModelService).getModel(resource);\n        if (model) {\n            const editorPosition = Position.lift(position);\n            return instaService.invokeFunction(handler, model, editorPosition, ...args.slice(2));\n        }\n        return accessor.get(ITextModelService).createModelReference(resource).then(reference => {\n            return new Promise((resolve, reject) => {\n                try {\n                    const result = instaService.invokeFunction(handler, reference.object.textEditorModel, Position.lift(position), args.slice(2));\n                    resolve(result);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            }).finally(() => {\n                reference.dispose();\n            });\n        });\n    });\n}\nexport function registerEditorCommand(editorCommand) {\n    EditorContributionRegistry.INSTANCE.registerEditorCommand(editorCommand);\n    return editorCommand;\n}\nexport function registerEditorAction(ctor) {\n    const action = new ctor();\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerMultiEditorAction(action) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerInstantiatedEditorAction(editorAction) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(editorAction);\n}\n/**\n * Registers an editor contribution. Editor contributions have a lifecycle which is bound\n * to a specific code editor instance.\n */\nexport function registerEditorContribution(id, ctor, instantiation) {\n    EditorContributionRegistry.INSTANCE.registerEditorContribution(id, ctor, instantiation);\n}\nexport var EditorExtensionsRegistry;\n(function (EditorExtensionsRegistry) {\n    function getEditorCommand(commandId) {\n        return EditorContributionRegistry.INSTANCE.getEditorCommand(commandId);\n    }\n    EditorExtensionsRegistry.getEditorCommand = getEditorCommand;\n    function getEditorActions() {\n        return EditorContributionRegistry.INSTANCE.getEditorActions();\n    }\n    EditorExtensionsRegistry.getEditorActions = getEditorActions;\n    function getEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions();\n    }\n    EditorExtensionsRegistry.getEditorContributions = getEditorContributions;\n    function getSomeEditorContributions(ids) {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions().filter(c => ids.indexOf(c.id) >= 0);\n    }\n    EditorExtensionsRegistry.getSomeEditorContributions = getSomeEditorContributions;\n    function getDiffEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getDiffEditorContributions();\n    }\n    EditorExtensionsRegistry.getDiffEditorContributions = getDiffEditorContributions;\n})(EditorExtensionsRegistry || (EditorExtensionsRegistry = {}));\n// Editor extension points\nconst Extensions = {\n    EditorCommonContributions: 'editor.contributions'\n};\nclass EditorContributionRegistry {\n    constructor() {\n        this.editorContributions = [];\n        this.diffEditorContributions = [];\n        this.editorActions = [];\n        this.editorCommands = Object.create(null);\n    }\n    registerEditorContribution(id, ctor, instantiation) {\n        this.editorContributions.push({ id, ctor: ctor, instantiation });\n    }\n    getEditorContributions() {\n        return this.editorContributions.slice(0);\n    }\n    getDiffEditorContributions() {\n        return this.diffEditorContributions.slice(0);\n    }\n    registerEditorAction(action) {\n        action.register();\n        this.editorActions.push(action);\n    }\n    getEditorActions() {\n        return this.editorActions;\n    }\n    registerEditorCommand(editorCommand) {\n        editorCommand.register();\n        this.editorCommands[editorCommand.id] = editorCommand;\n    }\n    getEditorCommand(commandId) {\n        return (this.editorCommands[commandId] || null);\n    }\n}\nEditorContributionRegistry.INSTANCE = new EditorContributionRegistry();\nRegistry.add(Extensions.EditorCommonContributions, EditorContributionRegistry.INSTANCE);\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const UndoCommand = registerCommand(new MultiCommand({\n    id: 'undo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 56 /* KeyCode.KeyZ */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miUndo', comment: ['&& denotes a mnemonic'] }, \"&&Undo\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('undo', \"Undo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(UndoCommand, { id: 'default:undo', precondition: undefined }));\nexport const RedoCommand = registerCommand(new MultiCommand({\n    id: 'redo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 55 /* KeyCode.KeyY */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */],\n        mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */ }\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miRedo', comment: ['&& denotes a mnemonic'] }, \"&&Redo\"),\n            order: 2\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('redo', \"Redo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(RedoCommand, { id: 'default:redo', precondition: undefined }));\nexport const SelectAllCommand = registerCommand(new MultiCommand({\n    id: 'editor.action.selectAll',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 31 /* KeyCode.KeyA */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarSelectionMenu,\n            group: '1_basic',\n            title: nls.localize({ key: 'miSelectAll', comment: ['&& denotes a mnemonic'] }, \"&&Select All\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('selectAll', \"Select All\"),\n            order: 1\n        }]\n}));\n","import { observableFromEvent } from '../../base/common/observable.js';\n/**\n * Returns a facade for the code editor that provides observables for various states/events.\n*/\nexport function obsCodeEditor(editor) {\n    return ObservableCodeEditor.get(editor);\n}\nclass ObservableCodeEditor {\n    /**\n     * Make sure that editor is not disposed yet!\n    */\n    static get(editor) {\n        let result = ObservableCodeEditor._map.get(editor);\n        if (!result) {\n            result = new ObservableCodeEditor(editor);\n            ObservableCodeEditor._map.set(editor, result);\n            const d = editor.onDidDispose(() => {\n                ObservableCodeEditor._map.delete(editor);\n                d.dispose();\n            });\n        }\n        return result;\n    }\n    constructor(editor) {\n        this.editor = editor;\n        this.model = observableFromEvent(this.editor.onDidChangeModel, () => this.editor.getModel());\n    }\n}\nObservableCodeEditor._map = new Map();\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet AbstractCodeEditorService = class AbstractCodeEditorService extends Disposable {\n    constructor(_themeService) {\n        super();\n        this._themeService = _themeService;\n        this._onWillCreateCodeEditor = this._register(new Emitter());\n        this._onCodeEditorAdd = this._register(new Emitter());\n        this.onCodeEditorAdd = this._onCodeEditorAdd.event;\n        this._onCodeEditorRemove = this._register(new Emitter());\n        this.onCodeEditorRemove = this._onCodeEditorRemove.event;\n        this._onWillCreateDiffEditor = this._register(new Emitter());\n        this._onDiffEditorAdd = this._register(new Emitter());\n        this.onDiffEditorAdd = this._onDiffEditorAdd.event;\n        this._onDiffEditorRemove = this._register(new Emitter());\n        this.onDiffEditorRemove = this._onDiffEditorRemove.event;\n        this._decorationOptionProviders = new Map();\n        this._codeEditorOpenHandlers = new LinkedList();\n        this._modelProperties = new Map();\n        this._codeEditors = Object.create(null);\n        this._diffEditors = Object.create(null);\n        this._globalStyleSheet = null;\n    }\n    willCreateCodeEditor() {\n        this._onWillCreateCodeEditor.fire();\n    }\n    addCodeEditor(editor) {\n        this._codeEditors[editor.getId()] = editor;\n        this._onCodeEditorAdd.fire(editor);\n    }\n    removeCodeEditor(editor) {\n        if (delete this._codeEditors[editor.getId()]) {\n            this._onCodeEditorRemove.fire(editor);\n        }\n    }\n    listCodeEditors() {\n        return Object.keys(this._codeEditors).map(id => this._codeEditors[id]);\n    }\n    willCreateDiffEditor() {\n        this._onWillCreateDiffEditor.fire();\n    }\n    addDiffEditor(editor) {\n        this._diffEditors[editor.getId()] = editor;\n        this._onDiffEditorAdd.fire(editor);\n    }\n    listDiffEditors() {\n        return Object.keys(this._diffEditors).map(id => this._diffEditors[id]);\n    }\n    getFocusedCodeEditor() {\n        let editorWithWidgetFocus = null;\n        const editors = this.listCodeEditors();\n        for (const editor of editors) {\n            if (editor.hasTextFocus()) {\n                // bingo!\n                return editor;\n            }\n            if (editor.hasWidgetFocus()) {\n                editorWithWidgetFocus = editor;\n            }\n        }\n        return editorWithWidgetFocus;\n    }\n    removeDecorationType(key) {\n        const provider = this._decorationOptionProviders.get(key);\n        if (provider) {\n            provider.refCount--;\n            if (provider.refCount <= 0) {\n                this._decorationOptionProviders.delete(key);\n                provider.dispose();\n                this.listCodeEditors().forEach((ed) => ed.removeDecorationsByType(key));\n            }\n        }\n    }\n    setModelProperty(resource, key, value) {\n        const key1 = resource.toString();\n        let dest;\n        if (this._modelProperties.has(key1)) {\n            dest = this._modelProperties.get(key1);\n        }\n        else {\n            dest = new Map();\n            this._modelProperties.set(key1, dest);\n        }\n        dest.set(key, value);\n    }\n    getModelProperty(resource, key) {\n        const key1 = resource.toString();\n        if (this._modelProperties.has(key1)) {\n            const innerMap = this._modelProperties.get(key1);\n            return innerMap.get(key);\n        }\n        return undefined;\n    }\n    async openCodeEditor(input, source, sideBySide) {\n        for (const handler of this._codeEditorOpenHandlers) {\n            const candidate = await handler(input, source, sideBySide);\n            if (candidate !== null) {\n                return candidate;\n            }\n        }\n        return null;\n    }\n    registerCodeEditorOpenHandler(handler) {\n        const rm = this._codeEditorOpenHandlers.unshift(handler);\n        return toDisposable(rm);\n    }\n};\nAbstractCodeEditorService = __decorate([\n    __param(0, IThemeService)\n], AbstractCodeEditorService);\nexport { AbstractCodeEditorService };\nexport class GlobalStyleSheet {\n    constructor(styleSheet) {\n        this._styleSheet = styleSheet;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { isObject } from '../../../base/common/types.js';\nexport const IBulkEditService = createDecorator('IWorkspaceEditService');\nexport class ResourceEdit {\n    constructor(metadata) {\n        this.metadata = metadata;\n    }\n    static convert(edit) {\n        return edit.edits.map(edit => {\n            if (ResourceTextEdit.is(edit)) {\n                return ResourceTextEdit.lift(edit);\n            }\n            if (ResourceFileEdit.is(edit)) {\n                return ResourceFileEdit.lift(edit);\n            }\n            throw new Error('Unsupported edit');\n        });\n    }\n}\nexport class ResourceTextEdit extends ResourceEdit {\n    static is(candidate) {\n        if (candidate instanceof ResourceTextEdit) {\n            return true;\n        }\n        return isObject(candidate)\n            && URI.isUri(candidate.resource)\n            && isObject(candidate.textEdit);\n    }\n    static lift(edit) {\n        if (edit instanceof ResourceTextEdit) {\n            return edit;\n        }\n        else {\n            return new ResourceTextEdit(edit.resource, edit.textEdit, edit.versionId, edit.metadata);\n        }\n    }\n    constructor(resource, textEdit, versionId = undefined, metadata) {\n        super(metadata);\n        this.resource = resource;\n        this.textEdit = textEdit;\n        this.versionId = versionId;\n    }\n}\nexport class ResourceFileEdit extends ResourceEdit {\n    static is(candidate) {\n        if (candidate instanceof ResourceFileEdit) {\n            return true;\n        }\n        else {\n            return isObject(candidate)\n                && (Boolean(candidate.newResource) || Boolean(candidate.oldResource));\n        }\n    }\n    static lift(edit) {\n        if (edit instanceof ResourceFileEdit) {\n            return edit;\n        }\n        else {\n            return new ResourceFileEdit(edit.oldResource, edit.newResource, edit.options, edit.metadata);\n        }\n    }\n    constructor(oldResource, newResource, options = {}, metadata) {\n        super(metadata);\n        this.oldResource = oldResource;\n        this.newResource = newResource;\n        this.options = options;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const ICodeEditorService = createDecorator('codeEditorService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IntervalTimer, timeout } from '../../../base/common/async.js';\nimport { Disposable, dispose, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { SimpleWorkerClient, logOnceWebWorkerWarning } from '../../../base/common/worker/simpleWorker.js';\nimport { DefaultWorkerFactory } from '../../../base/browser/defaultWorkerFactory.js';\nimport { Range } from '../../common/core/range.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { EditorSimpleWorker } from '../../common/services/editorSimpleWorker.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextResourceConfigurationService } from '../../common/services/textResourceConfiguration.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { canceled } from '../../../base/common/errors.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { MovedText } from '../../common/diff/linesDiffComputer.js';\nimport { DetailedLineRangeMapping, RangeMapping, LineRangeMapping } from '../../common/diff/rangeMapping.js';\nimport { LineRange } from '../../common/core/lineRange.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { WindowIntervalTimer } from '../../../base/browser/dom.js';\n/**\n * Stop syncing a model to the worker if it was not needed for 1 min.\n */\nconst STOP_SYNC_MODEL_DELTA_TIME_MS = 60 * 1000;\n/**\n * Stop the worker if it was not needed for 5 min.\n */\nconst STOP_WORKER_DELTA_TIME_MS = 5 * 60 * 1000;\nfunction canSyncModel(modelService, resource) {\n    const model = modelService.getModel(resource);\n    if (!model) {\n        return false;\n    }\n    if (model.isTooLargeForSyncing()) {\n        return false;\n    }\n    return true;\n}\nlet EditorWorkerService = class EditorWorkerService extends Disposable {\n    constructor(modelService, configurationService, logService, languageConfigurationService, languageFeaturesService) {\n        super();\n        this._modelService = modelService;\n        this._workerManager = this._register(new WorkerManager(this._modelService, languageConfigurationService));\n        this._logService = logService;\n        // register default link-provider and default completions-provider\n        this._register(languageFeaturesService.linkProvider.register({ language: '*', hasAccessToAllModels: true }, {\n            provideLinks: (model, token) => {\n                if (!canSyncModel(this._modelService, model.uri)) {\n                    return Promise.resolve({ links: [] }); // File too large\n                }\n                return this._workerManager.withWorker().then(client => client.computeLinks(model.uri)).then(links => {\n                    return links && { links };\n                });\n            }\n        }));\n        this._register(languageFeaturesService.completionProvider.register('*', new WordBasedCompletionItemProvider(this._workerManager, configurationService, this._modelService, languageConfigurationService)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    canComputeUnicodeHighlights(uri) {\n        return canSyncModel(this._modelService, uri);\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._workerManager.withWorker().then(client => client.computedUnicodeHighlights(uri, options, range));\n    }\n    async computeDiff(original, modified, options, algorithm) {\n        const result = await this._workerManager.withWorker().then(client => client.computeDiff(original, modified, options, algorithm));\n        if (!result) {\n            return null;\n        }\n        // Convert from space efficient JSON data to rich objects.\n        const diff = {\n            identical: result.identical,\n            quitEarly: result.quitEarly,\n            changes: toLineRangeMappings(result.changes),\n            moves: result.moves.map(m => new MovedText(new LineRangeMapping(new LineRange(m[0], m[1]), new LineRange(m[2], m[3])), toLineRangeMappings(m[4])))\n        };\n        return diff;\n        function toLineRangeMappings(changes) {\n            return changes.map((c) => {\n                var _a;\n                return new DetailedLineRangeMapping(new LineRange(c[0], c[1]), new LineRange(c[2], c[3]), (_a = c[4]) === null || _a === void 0 ? void 0 : _a.map((c) => new RangeMapping(new Range(c[0], c[1], c[2], c[3]), new Range(c[4], c[5], c[6], c[7]))));\n            });\n        }\n    }\n    computeMoreMinimalEdits(resource, edits, pretty = false) {\n        if (isNonEmptyArray(edits)) {\n            if (!canSyncModel(this._modelService, resource)) {\n                return Promise.resolve(edits); // File too large\n            }\n            const sw = StopWatch.create();\n            const result = this._workerManager.withWorker().then(client => client.computeMoreMinimalEdits(resource, edits, pretty));\n            result.finally(() => this._logService.trace('FORMAT#computeMoreMinimalEdits', resource.toString(true), sw.elapsed()));\n            return Promise.race([result, timeout(1000).then(() => edits)]);\n        }\n        else {\n            return Promise.resolve(undefined);\n        }\n    }\n    canNavigateValueSet(resource) {\n        return (canSyncModel(this._modelService, resource));\n    }\n    navigateValueSet(resource, range, up) {\n        return this._workerManager.withWorker().then(client => client.navigateValueSet(resource, range, up));\n    }\n    canComputeWordRanges(resource) {\n        return canSyncModel(this._modelService, resource);\n    }\n    computeWordRanges(resource, range) {\n        return this._workerManager.withWorker().then(client => client.computeWordRanges(resource, range));\n    }\n    findSectionHeaders(uri, options) {\n        return this._workerManager.withWorker().then(client => client.findSectionHeaders(uri, options));\n    }\n};\nEditorWorkerService = __decorate([\n    __param(0, IModelService),\n    __param(1, ITextResourceConfigurationService),\n    __param(2, ILogService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], EditorWorkerService);\nexport { EditorWorkerService };\nclass WordBasedCompletionItemProvider {\n    constructor(workerManager, configurationService, modelService, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._debugDisplayName = 'wordbasedCompletions';\n        this._workerManager = workerManager;\n        this._configurationService = configurationService;\n        this._modelService = modelService;\n    }\n    async provideCompletionItems(model, position) {\n        const config = this._configurationService.getValue(model.uri, position, 'editor');\n        if (config.wordBasedSuggestions === 'off') {\n            return undefined;\n        }\n        const models = [];\n        if (config.wordBasedSuggestions === 'currentDocument') {\n            // only current file and only if not too large\n            if (canSyncModel(this._modelService, model.uri)) {\n                models.push(model.uri);\n            }\n        }\n        else {\n            // either all files or files of same language\n            for (const candidate of this._modelService.getModels()) {\n                if (!canSyncModel(this._modelService, candidate.uri)) {\n                    continue;\n                }\n                if (candidate === model) {\n                    models.unshift(candidate.uri);\n                }\n                else if (config.wordBasedSuggestions === 'allDocuments' || candidate.getLanguageId() === model.getLanguageId()) {\n                    models.push(candidate.uri);\n                }\n            }\n        }\n        if (models.length === 0) {\n            return undefined; // File too large, no other files\n        }\n        const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n        const word = model.getWordAtPosition(position);\n        const replace = !word ? Range.fromPositions(position) : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n        const insert = replace.setEndPosition(position.lineNumber, position.column);\n        const client = await this._workerManager.withWorker();\n        const data = await client.textualSuggest(models, word === null || word === void 0 ? void 0 : word.word, wordDefRegExp);\n        if (!data) {\n            return undefined;\n        }\n        return {\n            duration: data.duration,\n            suggestions: data.words.map((word) => {\n                return {\n                    kind: 18 /* languages.CompletionItemKind.Text */,\n                    label: word,\n                    insertText: word,\n                    range: { insert, replace }\n                };\n            }),\n        };\n    }\n}\nclass WorkerManager extends Disposable {\n    constructor(modelService, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._modelService = modelService;\n        this._editorWorkerClient = null;\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        const stopWorkerInterval = this._register(new WindowIntervalTimer());\n        stopWorkerInterval.cancelAndSet(() => this._checkStopIdleWorker(), Math.round(STOP_WORKER_DELTA_TIME_MS / 2), mainWindow);\n        this._register(this._modelService.onModelRemoved(_ => this._checkStopEmptyWorker()));\n    }\n    dispose() {\n        if (this._editorWorkerClient) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n        super.dispose();\n    }\n    /**\n     * Check if the model service has no more models and stop the worker if that is the case.\n     */\n    _checkStopEmptyWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const models = this._modelService.getModels();\n        if (models.length === 0) {\n            // There are no more models => nothing possible for me to do\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    /**\n     * Check if the worker has been idle for a while and then stop it.\n     */\n    _checkStopIdleWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const timeSinceLastWorkerUsedTime = (new Date()).getTime() - this._lastWorkerUsedTime;\n        if (timeSinceLastWorkerUsedTime > STOP_WORKER_DELTA_TIME_MS) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    withWorker() {\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        if (!this._editorWorkerClient) {\n            this._editorWorkerClient = new EditorWorkerClient(this._modelService, false, 'editorWorkerService', this.languageConfigurationService);\n        }\n        return Promise.resolve(this._editorWorkerClient);\n    }\n}\nclass EditorModelManager extends Disposable {\n    constructor(proxy, modelService, keepIdleModels) {\n        super();\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        this._proxy = proxy;\n        this._modelService = modelService;\n        if (!keepIdleModels) {\n            const timer = new IntervalTimer();\n            timer.cancelAndSet(() => this._checkStopModelSync(), Math.round(STOP_SYNC_MODEL_DELTA_TIME_MS / 2));\n            this._register(timer);\n        }\n    }\n    dispose() {\n        for (const modelUrl in this._syncedModels) {\n            dispose(this._syncedModels[modelUrl]);\n        }\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        super.dispose();\n    }\n    ensureSyncedResources(resources, forceLargeModels) {\n        for (const resource of resources) {\n            const resourceStr = resource.toString();\n            if (!this._syncedModels[resourceStr]) {\n                this._beginModelSync(resource, forceLargeModels);\n            }\n            if (this._syncedModels[resourceStr]) {\n                this._syncedModelsLastUsedTime[resourceStr] = (new Date()).getTime();\n            }\n        }\n    }\n    _checkStopModelSync() {\n        const currentTime = (new Date()).getTime();\n        const toRemove = [];\n        for (const modelUrl in this._syncedModelsLastUsedTime) {\n            const elapsedTime = currentTime - this._syncedModelsLastUsedTime[modelUrl];\n            if (elapsedTime > STOP_SYNC_MODEL_DELTA_TIME_MS) {\n                toRemove.push(modelUrl);\n            }\n        }\n        for (const e of toRemove) {\n            this._stopModelSync(e);\n        }\n    }\n    _beginModelSync(resource, forceLargeModels) {\n        const model = this._modelService.getModel(resource);\n        if (!model) {\n            return;\n        }\n        if (!forceLargeModels && model.isTooLargeForSyncing()) {\n            return;\n        }\n        const modelUrl = resource.toString();\n        this._proxy.acceptNewModel({\n            url: model.uri.toString(),\n            lines: model.getLinesContent(),\n            EOL: model.getEOL(),\n            versionId: model.getVersionId()\n        });\n        const toDispose = new DisposableStore();\n        toDispose.add(model.onDidChangeContent((e) => {\n            this._proxy.acceptModelChanged(modelUrl.toString(), e);\n        }));\n        toDispose.add(model.onWillDispose(() => {\n            this._stopModelSync(modelUrl);\n        }));\n        toDispose.add(toDisposable(() => {\n            this._proxy.acceptRemovedModel(modelUrl);\n        }));\n        this._syncedModels[modelUrl] = toDispose;\n    }\n    _stopModelSync(modelUrl) {\n        const toDispose = this._syncedModels[modelUrl];\n        delete this._syncedModels[modelUrl];\n        delete this._syncedModelsLastUsedTime[modelUrl];\n        dispose(toDispose);\n    }\n}\nclass SynchronousWorkerClient {\n    constructor(instance) {\n        this._instance = instance;\n        this._proxyObj = Promise.resolve(this._instance);\n    }\n    dispose() {\n        this._instance.dispose();\n    }\n    getProxyObject() {\n        return this._proxyObj;\n    }\n}\nexport class EditorWorkerHost {\n    constructor(workerClient) {\n        this._workerClient = workerClient;\n    }\n    // foreign host request\n    fhr(method, args) {\n        return this._workerClient.fhr(method, args);\n    }\n}\nexport class EditorWorkerClient extends Disposable {\n    constructor(modelService, keepIdleModels, label, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._disposed = false;\n        this._modelService = modelService;\n        this._keepIdleModels = keepIdleModels;\n        this._workerFactory = new DefaultWorkerFactory(label);\n        this._worker = null;\n        this._modelManager = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        throw new Error(`Not implemented!`);\n    }\n    _getOrCreateWorker() {\n        if (!this._worker) {\n            try {\n                this._worker = this._register(new SimpleWorkerClient(this._workerFactory, 'vs/editor/common/services/editorSimpleWorker', new EditorWorkerHost(this)));\n            }\n            catch (err) {\n                logOnceWebWorkerWarning(err);\n                this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            }\n        }\n        return this._worker;\n    }\n    _getProxy() {\n        return this._getOrCreateWorker().getProxyObject().then(undefined, (err) => {\n            logOnceWebWorkerWarning(err);\n            this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            return this._getOrCreateWorker().getProxyObject();\n        });\n    }\n    _getOrCreateModelManager(proxy) {\n        if (!this._modelManager) {\n            this._modelManager = this._register(new EditorModelManager(proxy, this._modelService, this._keepIdleModels));\n        }\n        return this._modelManager;\n    }\n    async _withSyncedResources(resources, forceLargeModels = false) {\n        if (this._disposed) {\n            return Promise.reject(canceled());\n        }\n        return this._getProxy().then((proxy) => {\n            this._getOrCreateModelManager(proxy).ensureSyncedResources(resources, forceLargeModels);\n            return proxy;\n        });\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._withSyncedResources([uri]).then(proxy => {\n            return proxy.computeUnicodeHighlights(uri.toString(), options, range);\n        });\n    }\n    computeDiff(original, modified, options, algorithm) {\n        return this._withSyncedResources([original, modified], /* forceLargeModels */ true).then(proxy => {\n            return proxy.computeDiff(original.toString(), modified.toString(), options, algorithm);\n        });\n    }\n    computeMoreMinimalEdits(resource, edits, pretty) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeMoreMinimalEdits(resource.toString(), edits, pretty);\n        });\n    }\n    computeLinks(resource) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeLinks(resource.toString());\n        });\n    }\n    computeDefaultDocumentColors(resource) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeDefaultDocumentColors(resource.toString());\n        });\n    }\n    async textualSuggest(resources, leadingWord, wordDefRegExp) {\n        const proxy = await this._withSyncedResources(resources);\n        const wordDef = wordDefRegExp.source;\n        const wordDefFlags = wordDefRegExp.flags;\n        return proxy.textualSuggest(resources.map(r => r.toString()), leadingWord, wordDef, wordDefFlags);\n    }\n    computeWordRanges(resource, range) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return Promise.resolve(null);\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = wordDefRegExp.flags;\n            return proxy.computeWordRanges(resource.toString(), range, wordDef, wordDefFlags);\n        });\n    }\n    navigateValueSet(resource, range, up) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return null;\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = wordDefRegExp.flags;\n            return proxy.navigateValueSet(resource.toString(), range, up, wordDef, wordDefFlags);\n        });\n    }\n    findSectionHeaders(uri, options) {\n        return this._withSyncedResources([uri]).then(proxy => {\n            return proxy.findSectionHeaders(uri.toString(), options);\n        });\n    }\n    dispose() {\n        super.dispose();\n        this._disposed = true;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport './hover.css';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { EDITOR_FONT_DEFAULTS } from '../../../common/config/editorOptions.js';\nimport { HoverAction, HoverWidget as BaseHoverWidget, getHoverAccessibleViewHint } from '../../../../base/browser/ui/hover/hoverWidget.js';\nimport { Widget } from '../../../../base/browser/ui/widget.js';\nimport { IOpenerService } from '../../../../platform/opener/common/opener.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { MarkdownRenderer, openLinkFromMarkdown } from '../../widget/markdownRenderer/browser/markdownRenderer.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { localize } from '../../../../nls.js';\nimport { isMacintosh } from '../../../../base/common/platform.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { status } from '../../../../base/browser/ui/aria/aria.js';\nconst $ = dom.$;\nlet HoverWidget = class HoverWidget extends Widget {\n    get _targetWindow() {\n        return dom.getWindow(this._target.targetElements[0]);\n    }\n    get _targetDocumentElement() {\n        return dom.getWindow(this._target.targetElements[0]).document.documentElement;\n    }\n    get isDisposed() { return this._isDisposed; }\n    get isMouseIn() { return this._lockMouseTracker.isMouseIn; }\n    get domNode() { return this._hover.containerDomNode; }\n    get onDispose() { return this._onDispose.event; }\n    get onRequestLayout() { return this._onRequestLayout.event; }\n    get anchor() { return this._hoverPosition === 2 /* HoverPosition.BELOW */ ? 0 /* AnchorPosition.BELOW */ : 1 /* AnchorPosition.ABOVE */; }\n    get x() { return this._x; }\n    get y() { return this._y; }\n    /**\n     * Whether the hover is \"locked\" by holding the alt/option key. When locked, the hover will not\n     * hide and can be hovered regardless of whether the `hideOnHover` hover option is set.\n     */\n    get isLocked() { return this._isLocked; }\n    set isLocked(value) {\n        if (this._isLocked === value) {\n            return;\n        }\n        this._isLocked = value;\n        this._hoverContainer.classList.toggle('locked', this._isLocked);\n    }\n    constructor(options, _keybindingService, _configurationService, _openerService, _instantiationService, _accessibilityService) {\n        var _a, _b, _c, _d, _e, _f, _g, _h;\n        super();\n        this._keybindingService = _keybindingService;\n        this._configurationService = _configurationService;\n        this._openerService = _openerService;\n        this._instantiationService = _instantiationService;\n        this._accessibilityService = _accessibilityService;\n        this._messageListeners = new DisposableStore();\n        this._isDisposed = false;\n        this._forcePosition = false;\n        this._x = 0;\n        this._y = 0;\n        this._isLocked = false;\n        this._enableFocusTraps = false;\n        this._addedFocusTrap = false;\n        this._onDispose = this._register(new Emitter());\n        this._onRequestLayout = this._register(new Emitter());\n        this._linkHandler = options.linkHandler || (url => {\n            return openLinkFromMarkdown(this._openerService, url, isMarkdownString(options.content) ? options.content.isTrusted : undefined);\n        });\n        this._target = 'targetElements' in options.target ? options.target : new ElementHoverTarget(options.target);\n        this._hoverPointer = ((_a = options.appearance) === null || _a === void 0 ? void 0 : _a.showPointer) ? $('div.workbench-hover-pointer') : undefined;\n        this._hover = this._register(new BaseHoverWidget());\n        this._hover.containerDomNode.classList.add('workbench-hover', 'fadeIn');\n        if ((_b = options.appearance) === null || _b === void 0 ? void 0 : _b.compact) {\n            this._hover.containerDomNode.classList.add('workbench-hover', 'compact');\n        }\n        if ((_c = options.appearance) === null || _c === void 0 ? void 0 : _c.skipFadeInAnimation) {\n            this._hover.containerDomNode.classList.add('skip-fade-in');\n        }\n        if (options.additionalClasses) {\n            this._hover.containerDomNode.classList.add(...options.additionalClasses);\n        }\n        if ((_d = options.position) === null || _d === void 0 ? void 0 : _d.forcePosition) {\n            this._forcePosition = true;\n        }\n        if (options.trapFocus) {\n            this._enableFocusTraps = true;\n        }\n        this._hoverPosition = (_f = (_e = options.position) === null || _e === void 0 ? void 0 : _e.hoverPosition) !== null && _f !== void 0 ? _f : 3 /* HoverPosition.ABOVE */;\n        // Don't allow mousedown out of the widget, otherwise preventDefault will call and text will\n        // not be selected.\n        this.onmousedown(this._hover.containerDomNode, e => e.stopPropagation());\n        // Hide hover on escape\n        this.onkeydown(this._hover.containerDomNode, e => {\n            if (e.equals(9 /* KeyCode.Escape */)) {\n                this.dispose();\n            }\n        });\n        // Hide when the window loses focus\n        this._register(dom.addDisposableListener(this._targetWindow, 'blur', () => this.dispose()));\n        const rowElement = $('div.hover-row.markdown-hover');\n        const contentsElement = $('div.hover-contents');\n        if (typeof options.content === 'string') {\n            contentsElement.textContent = options.content;\n            contentsElement.style.whiteSpace = 'pre-wrap';\n        }\n        else if (options.content instanceof HTMLElement) {\n            contentsElement.appendChild(options.content);\n            contentsElement.classList.add('html-hover-contents');\n        }\n        else {\n            const markdown = options.content;\n            const mdRenderer = this._instantiationService.createInstance(MarkdownRenderer, { codeBlockFontFamily: this._configurationService.getValue('editor').fontFamily || EDITOR_FONT_DEFAULTS.fontFamily });\n            const { element } = mdRenderer.render(markdown, {\n                actionHandler: {\n                    callback: (content) => this._linkHandler(content),\n                    disposables: this._messageListeners\n                },\n                asyncRenderCallback: () => {\n                    contentsElement.classList.add('code-hover-contents');\n                    this.layout();\n                    // This changes the dimensions of the hover so trigger a layout\n                    this._onRequestLayout.fire();\n                }\n            });\n            contentsElement.appendChild(element);\n        }\n        rowElement.appendChild(contentsElement);\n        this._hover.contentsDomNode.appendChild(rowElement);\n        if (options.actions && options.actions.length > 0) {\n            const statusBarElement = $('div.hover-row.status-bar');\n            const actionsElement = $('div.actions');\n            options.actions.forEach(action => {\n                const keybinding = this._keybindingService.lookupKeybinding(action.commandId);\n                const keybindingLabel = keybinding ? keybinding.getLabel() : null;\n                HoverAction.render(actionsElement, {\n                    label: action.label,\n                    commandId: action.commandId,\n                    run: e => {\n                        action.run(e);\n                        this.dispose();\n                    },\n                    iconClass: action.iconClass\n                }, keybindingLabel);\n            });\n            statusBarElement.appendChild(actionsElement);\n            this._hover.containerDomNode.appendChild(statusBarElement);\n        }\n        this._hoverContainer = $('div.workbench-hover-container');\n        if (this._hoverPointer) {\n            this._hoverContainer.appendChild(this._hoverPointer);\n        }\n        this._hoverContainer.appendChild(this._hover.containerDomNode);\n        // Determine whether to hide on hover\n        let hideOnHover;\n        if (options.actions && options.actions.length > 0) {\n            // If there are actions, require hover so they can be accessed\n            hideOnHover = false;\n        }\n        else {\n            if (((_g = options.persistence) === null || _g === void 0 ? void 0 : _g.hideOnHover) === undefined) {\n                // When unset, will default to true when it's a string or when it's markdown that\n                // appears to have a link using a naive check for '](' and '</a>'\n                hideOnHover = typeof options.content === 'string' ||\n                    isMarkdownString(options.content) && !options.content.value.includes('](') && !options.content.value.includes('</a>');\n            }\n            else {\n                // It's set explicitly\n                hideOnHover = options.persistence.hideOnHover;\n            }\n        }\n        // Show the hover hint if needed\n        if (hideOnHover && ((_h = options.appearance) === null || _h === void 0 ? void 0 : _h.showHoverHint)) {\n            const statusBarElement = $('div.hover-row.status-bar');\n            const infoElement = $('div.info');\n            infoElement.textContent = localize('hoverhint', 'Hold {0} key to mouse over', isMacintosh ? 'Option' : 'Alt');\n            statusBarElement.appendChild(infoElement);\n            this._hover.containerDomNode.appendChild(statusBarElement);\n        }\n        const mouseTrackerTargets = [...this._target.targetElements];\n        if (!hideOnHover) {\n            mouseTrackerTargets.push(this._hoverContainer);\n        }\n        const mouseTracker = this._register(new CompositeMouseTracker(mouseTrackerTargets));\n        this._register(mouseTracker.onMouseOut(() => {\n            if (!this._isLocked) {\n                this.dispose();\n            }\n        }));\n        // Setup another mouse tracker when hideOnHover is set in order to track the hover as well\n        // when it is locked. This ensures the hover will hide on mouseout after alt has been\n        // released to unlock the element.\n        if (hideOnHover) {\n            const mouseTracker2Targets = [...this._target.targetElements, this._hoverContainer];\n            this._lockMouseTracker = this._register(new CompositeMouseTracker(mouseTracker2Targets));\n            this._register(this._lockMouseTracker.onMouseOut(() => {\n                if (!this._isLocked) {\n                    this.dispose();\n                }\n            }));\n        }\n        else {\n            this._lockMouseTracker = mouseTracker;\n        }\n    }\n    addFocusTrap() {\n        if (!this._enableFocusTraps || this._addedFocusTrap) {\n            return;\n        }\n        this._addedFocusTrap = true;\n        // Add a hover tab loop if the hover has at least one element with a valid tabIndex\n        const firstContainerFocusElement = this._hover.containerDomNode;\n        const lastContainerFocusElement = this.findLastFocusableChild(this._hover.containerDomNode);\n        if (lastContainerFocusElement) {\n            const beforeContainerFocusElement = dom.prepend(this._hoverContainer, $('div'));\n            const afterContainerFocusElement = dom.append(this._hoverContainer, $('div'));\n            beforeContainerFocusElement.tabIndex = 0;\n            afterContainerFocusElement.tabIndex = 0;\n            this._register(dom.addDisposableListener(afterContainerFocusElement, 'focus', (e) => {\n                firstContainerFocusElement.focus();\n                e.preventDefault();\n            }));\n            this._register(dom.addDisposableListener(beforeContainerFocusElement, 'focus', (e) => {\n                lastContainerFocusElement.focus();\n                e.preventDefault();\n            }));\n        }\n    }\n    findLastFocusableChild(root) {\n        if (root.hasChildNodes()) {\n            for (let i = 0; i < root.childNodes.length; i++) {\n                const node = root.childNodes.item(root.childNodes.length - i - 1);\n                if (node.nodeType === node.ELEMENT_NODE) {\n                    const parsedNode = node;\n                    if (typeof parsedNode.tabIndex === 'number' && parsedNode.tabIndex >= 0) {\n                        return parsedNode;\n                    }\n                }\n                const recursivelyFoundElement = this.findLastFocusableChild(node);\n                if (recursivelyFoundElement) {\n                    return recursivelyFoundElement;\n                }\n            }\n        }\n        return undefined;\n    }\n    render(container) {\n        var _a;\n        container.appendChild(this._hoverContainer);\n        const hoverFocused = this._hoverContainer.contains(this._hoverContainer.ownerDocument.activeElement);\n        const accessibleViewHint = hoverFocused && getHoverAccessibleViewHint(this._configurationService.getValue('accessibility.verbosity.hover') === true && this._accessibilityService.isScreenReaderOptimized(), (_a = this._keybindingService.lookupKeybinding('editor.action.accessibleView')) === null || _a === void 0 ? void 0 : _a.getAriaLabel());\n        if (accessibleViewHint) {\n            status(accessibleViewHint);\n        }\n        this.layout();\n        this.addFocusTrap();\n    }\n    layout() {\n        this._hover.containerDomNode.classList.remove('right-aligned');\n        this._hover.contentsDomNode.style.maxHeight = '';\n        const getZoomAccountedBoundingClientRect = (e) => {\n            const zoom = dom.getDomNodeZoomLevel(e);\n            const boundingRect = e.getBoundingClientRect();\n            return {\n                top: boundingRect.top * zoom,\n                bottom: boundingRect.bottom * zoom,\n                right: boundingRect.right * zoom,\n                left: boundingRect.left * zoom,\n            };\n        };\n        const targetBounds = this._target.targetElements.map(e => getZoomAccountedBoundingClientRect(e));\n        const { top, right, bottom, left } = targetBounds[0];\n        const width = right - left;\n        const height = bottom - top;\n        const targetRect = {\n            top, right, bottom, left, width, height,\n            center: {\n                x: left + (width / 2),\n                y: top + (height / 2)\n            }\n        };\n        // These calls adjust the position depending on spacing.\n        this.adjustHorizontalHoverPosition(targetRect);\n        this.adjustVerticalHoverPosition(targetRect);\n        // This call limits the maximum height of the hover.\n        this.adjustHoverMaxHeight(targetRect);\n        // Offset the hover position if there is a pointer so it aligns with the target element\n        this._hoverContainer.style.padding = '';\n        this._hoverContainer.style.margin = '';\n        if (this._hoverPointer) {\n            switch (this._hoverPosition) {\n                case 1 /* HoverPosition.RIGHT */:\n                    targetRect.left += 3 /* Constants.PointerSize */;\n                    targetRect.right += 3 /* Constants.PointerSize */;\n                    this._hoverContainer.style.paddingLeft = `${3 /* Constants.PointerSize */}px`;\n                    this._hoverContainer.style.marginLeft = `${-3 /* Constants.PointerSize */}px`;\n                    break;\n                case 0 /* HoverPosition.LEFT */:\n                    targetRect.left -= 3 /* Constants.PointerSize */;\n                    targetRect.right -= 3 /* Constants.PointerSize */;\n                    this._hoverContainer.style.paddingRight = `${3 /* Constants.PointerSize */}px`;\n                    this._hoverContainer.style.marginRight = `${-3 /* Constants.PointerSize */}px`;\n                    break;\n                case 2 /* HoverPosition.BELOW */:\n                    targetRect.top += 3 /* Constants.PointerSize */;\n                    targetRect.bottom += 3 /* Constants.PointerSize */;\n                    this._hoverContainer.style.paddingTop = `${3 /* Constants.PointerSize */}px`;\n                    this._hoverContainer.style.marginTop = `${-3 /* Constants.PointerSize */}px`;\n                    break;\n                case 3 /* HoverPosition.ABOVE */:\n                    targetRect.top -= 3 /* Constants.PointerSize */;\n                    targetRect.bottom -= 3 /* Constants.PointerSize */;\n                    this._hoverContainer.style.paddingBottom = `${3 /* Constants.PointerSize */}px`;\n                    this._hoverContainer.style.marginBottom = `${-3 /* Constants.PointerSize */}px`;\n                    break;\n            }\n            targetRect.center.x = targetRect.left + (width / 2);\n            targetRect.center.y = targetRect.top + (height / 2);\n        }\n        this.computeXCordinate(targetRect);\n        this.computeYCordinate(targetRect);\n        if (this._hoverPointer) {\n            // reset\n            this._hoverPointer.classList.remove('top');\n            this._hoverPointer.classList.remove('left');\n            this._hoverPointer.classList.remove('right');\n            this._hoverPointer.classList.remove('bottom');\n            this.setHoverPointerPosition(targetRect);\n        }\n        this._hover.onContentsChanged();\n    }\n    computeXCordinate(target) {\n        const hoverWidth = this._hover.containerDomNode.clientWidth + 2 /* Constants.HoverBorderWidth */;\n        if (this._target.x !== undefined) {\n            this._x = this._target.x;\n        }\n        else if (this._hoverPosition === 1 /* HoverPosition.RIGHT */) {\n            this._x = target.right;\n        }\n        else if (this._hoverPosition === 0 /* HoverPosition.LEFT */) {\n            this._x = target.left - hoverWidth;\n        }\n        else {\n            if (this._hoverPointer) {\n                this._x = target.center.x - (this._hover.containerDomNode.clientWidth / 2);\n            }\n            else {\n                this._x = target.left;\n            }\n            // Hover is going beyond window towards right end\n            if (this._x + hoverWidth >= this._targetDocumentElement.clientWidth) {\n                this._hover.containerDomNode.classList.add('right-aligned');\n                this._x = Math.max(this._targetDocumentElement.clientWidth - hoverWidth - 2 /* Constants.HoverWindowEdgeMargin */, this._targetDocumentElement.clientLeft);\n            }\n        }\n        // Hover is going beyond window towards left end\n        if (this._x < this._targetDocumentElement.clientLeft) {\n            this._x = target.left + 2 /* Constants.HoverWindowEdgeMargin */;\n        }\n    }\n    computeYCordinate(target) {\n        if (this._target.y !== undefined) {\n            this._y = this._target.y;\n        }\n        else if (this._hoverPosition === 3 /* HoverPosition.ABOVE */) {\n            this._y = target.top;\n        }\n        else if (this._hoverPosition === 2 /* HoverPosition.BELOW */) {\n            this._y = target.bottom - 2;\n        }\n        else {\n            if (this._hoverPointer) {\n                this._y = target.center.y + (this._hover.containerDomNode.clientHeight / 2);\n            }\n            else {\n                this._y = target.bottom;\n            }\n        }\n        // Hover on bottom is going beyond window\n        if (this._y > this._targetWindow.innerHeight) {\n            this._y = target.bottom;\n        }\n    }\n    adjustHorizontalHoverPosition(target) {\n        // Do not adjust horizontal hover position if x cordiante is provided\n        if (this._target.x !== undefined) {\n            return;\n        }\n        const hoverPointerOffset = (this._hoverPointer ? 3 /* Constants.PointerSize */ : 0);\n        // When force position is enabled, restrict max width\n        if (this._forcePosition) {\n            const padding = hoverPointerOffset + 2 /* Constants.HoverBorderWidth */;\n            if (this._hoverPosition === 1 /* HoverPosition.RIGHT */) {\n                this._hover.containerDomNode.style.maxWidth = `${this._targetDocumentElement.clientWidth - target.right - padding}px`;\n            }\n            else if (this._hoverPosition === 0 /* HoverPosition.LEFT */) {\n                this._hover.containerDomNode.style.maxWidth = `${target.left - padding}px`;\n            }\n            return;\n        }\n        // Position hover on right to target\n        if (this._hoverPosition === 1 /* HoverPosition.RIGHT */) {\n            const roomOnRight = this._targetDocumentElement.clientWidth - target.right;\n            // Hover on the right is going beyond window.\n            if (roomOnRight < this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n                const roomOnLeft = target.left;\n                // There's enough room on the left, flip the hover position\n                if (roomOnLeft >= this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n                    this._hoverPosition = 0 /* HoverPosition.LEFT */;\n                }\n                // Hover on the left would go beyond window too\n                else {\n                    this._hoverPosition = 2 /* HoverPosition.BELOW */;\n                }\n            }\n        }\n        // Position hover on left to target\n        else if (this._hoverPosition === 0 /* HoverPosition.LEFT */) {\n            const roomOnLeft = target.left;\n            // Hover on the left is going beyond window.\n            if (roomOnLeft < this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n                const roomOnRight = this._targetDocumentElement.clientWidth - target.right;\n                // There's enough room on the right, flip the hover position\n                if (roomOnRight >= this._hover.containerDomNode.clientWidth + hoverPointerOffset) {\n                    this._hoverPosition = 1 /* HoverPosition.RIGHT */;\n                }\n                // Hover on the right would go beyond window too\n                else {\n                    this._hoverPosition = 2 /* HoverPosition.BELOW */;\n                }\n            }\n            // Hover on the left is going beyond window.\n            if (target.left - this._hover.containerDomNode.clientWidth - hoverPointerOffset <= this._targetDocumentElement.clientLeft) {\n                this._hoverPosition = 1 /* HoverPosition.RIGHT */;\n            }\n        }\n    }\n    adjustVerticalHoverPosition(target) {\n        // Do not adjust vertical hover position if the y coordinate is provided\n        // or the position is forced\n        if (this._target.y !== undefined || this._forcePosition) {\n            return;\n        }\n        const hoverPointerOffset = (this._hoverPointer ? 3 /* Constants.PointerSize */ : 0);\n        // Position hover on top of the target\n        if (this._hoverPosition === 3 /* HoverPosition.ABOVE */) {\n            // Hover on top is going beyond window\n            if (target.top - this._hover.containerDomNode.clientHeight - hoverPointerOffset < 0) {\n                this._hoverPosition = 2 /* HoverPosition.BELOW */;\n            }\n        }\n        // Position hover below the target\n        else if (this._hoverPosition === 2 /* HoverPosition.BELOW */) {\n            // Hover on bottom is going beyond window\n            if (target.bottom + this._hover.containerDomNode.clientHeight + hoverPointerOffset > this._targetWindow.innerHeight) {\n                this._hoverPosition = 3 /* HoverPosition.ABOVE */;\n            }\n        }\n    }\n    adjustHoverMaxHeight(target) {\n        let maxHeight = this._targetWindow.innerHeight / 2;\n        // When force position is enabled, restrict max height\n        if (this._forcePosition) {\n            const padding = (this._hoverPointer ? 3 /* Constants.PointerSize */ : 0) + 2 /* Constants.HoverBorderWidth */;\n            if (this._hoverPosition === 3 /* HoverPosition.ABOVE */) {\n                maxHeight = Math.min(maxHeight, target.top - padding);\n            }\n            else if (this._hoverPosition === 2 /* HoverPosition.BELOW */) {\n                maxHeight = Math.min(maxHeight, this._targetWindow.innerHeight - target.bottom - padding);\n            }\n        }\n        this._hover.containerDomNode.style.maxHeight = `${maxHeight}px`;\n        if (this._hover.contentsDomNode.clientHeight < this._hover.contentsDomNode.scrollHeight) {\n            // Add padding for a vertical scrollbar\n            const extraRightPadding = `${this._hover.scrollbar.options.verticalScrollbarSize}px`;\n            if (this._hover.contentsDomNode.style.paddingRight !== extraRightPadding) {\n                this._hover.contentsDomNode.style.paddingRight = extraRightPadding;\n            }\n        }\n    }\n    setHoverPointerPosition(target) {\n        if (!this._hoverPointer) {\n            return;\n        }\n        switch (this._hoverPosition) {\n            case 0 /* HoverPosition.LEFT */:\n            case 1 /* HoverPosition.RIGHT */: {\n                this._hoverPointer.classList.add(this._hoverPosition === 0 /* HoverPosition.LEFT */ ? 'right' : 'left');\n                const hoverHeight = this._hover.containerDomNode.clientHeight;\n                // If hover is taller than target, then show the pointer at the center of target\n                if (hoverHeight > target.height) {\n                    this._hoverPointer.style.top = `${target.center.y - (this._y - hoverHeight) - 3 /* Constants.PointerSize */}px`;\n                }\n                // Otherwise show the pointer at the center of hover\n                else {\n                    this._hoverPointer.style.top = `${Math.round((hoverHeight / 2)) - 3 /* Constants.PointerSize */}px`;\n                }\n                break;\n            }\n            case 3 /* HoverPosition.ABOVE */:\n            case 2 /* HoverPosition.BELOW */: {\n                this._hoverPointer.classList.add(this._hoverPosition === 3 /* HoverPosition.ABOVE */ ? 'bottom' : 'top');\n                const hoverWidth = this._hover.containerDomNode.clientWidth;\n                // Position pointer at the center of the hover\n                let pointerLeftPosition = Math.round((hoverWidth / 2)) - 3 /* Constants.PointerSize */;\n                // If pointer goes beyond target then position it at the center of the target\n                const pointerX = this._x + pointerLeftPosition;\n                if (pointerX < target.left || pointerX > target.right) {\n                    pointerLeftPosition = target.center.x - this._x - 3 /* Constants.PointerSize */;\n                }\n                this._hoverPointer.style.left = `${pointerLeftPosition}px`;\n                break;\n            }\n        }\n    }\n    focus() {\n        this._hover.containerDomNode.focus();\n    }\n    dispose() {\n        if (!this._isDisposed) {\n            this._onDispose.fire();\n            this._hoverContainer.remove();\n            this._messageListeners.dispose();\n            this._target.dispose();\n            super.dispose();\n        }\n        this._isDisposed = true;\n    }\n};\nHoverWidget = __decorate([\n    __param(1, IKeybindingService),\n    __param(2, IConfigurationService),\n    __param(3, IOpenerService),\n    __param(4, IInstantiationService),\n    __param(5, IAccessibilityService)\n], HoverWidget);\nexport { HoverWidget };\nclass CompositeMouseTracker extends Widget {\n    get onMouseOut() { return this._onMouseOut.event; }\n    get isMouseIn() { return this._isMouseIn; }\n    constructor(_elements) {\n        super();\n        this._elements = _elements;\n        this._isMouseIn = true;\n        this._onMouseOut = this._register(new Emitter());\n        this._elements.forEach(n => this.onmouseover(n, () => this._onTargetMouseOver(n)));\n        this._elements.forEach(n => this.onmouseleave(n, () => this._onTargetMouseLeave(n)));\n    }\n    _onTargetMouseOver(target) {\n        this._isMouseIn = true;\n        this._clearEvaluateMouseStateTimeout(target);\n    }\n    _onTargetMouseLeave(target) {\n        this._isMouseIn = false;\n        this._evaluateMouseState(target);\n    }\n    _evaluateMouseState(target) {\n        this._clearEvaluateMouseStateTimeout(target);\n        // Evaluate whether the mouse is still outside asynchronously such that other mouse targets\n        // have the opportunity to first their mouse in event.\n        this._mouseTimeout = dom.getWindow(target).setTimeout(() => this._fireIfMouseOutside(), 0);\n    }\n    _clearEvaluateMouseStateTimeout(target) {\n        if (this._mouseTimeout) {\n            dom.getWindow(target).clearTimeout(this._mouseTimeout);\n            this._mouseTimeout = undefined;\n        }\n    }\n    _fireIfMouseOutside() {\n        if (!this._isMouseIn) {\n            this._onMouseOut.fire();\n        }\n    }\n}\nclass ElementHoverTarget {\n    constructor(_element) {\n        this._element = _element;\n        this.targetElements = [this._element];\n    }\n    dispose() {\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { isMarkdownString } from '../../../../base/common/htmlContent.js';\nimport { isFunction, isString } from '../../../../base/common/types.js';\nimport { localize } from '../../../../nls.js';\nexport class UpdatableHoverWidget {\n    constructor(hoverDelegate, target, fadeInAnimation) {\n        this.hoverDelegate = hoverDelegate;\n        this.target = target;\n        this.fadeInAnimation = fadeInAnimation;\n    }\n    async update(content, focus, options) {\n        var _a;\n        if (this._cancellationTokenSource) {\n            // there's an computation ongoing, cancel it\n            this._cancellationTokenSource.dispose(true);\n            this._cancellationTokenSource = undefined;\n        }\n        if (this.isDisposed) {\n            return;\n        }\n        let resolvedContent;\n        if (content === undefined || isString(content) || content instanceof HTMLElement) {\n            resolvedContent = content;\n        }\n        else if (!isFunction(content.markdown)) {\n            resolvedContent = (_a = content.markdown) !== null && _a !== void 0 ? _a : content.markdownNotSupportedFallback;\n        }\n        else {\n            // compute the content, potentially long-running\n            // show 'Loading' if no hover is up yet\n            if (!this._hoverWidget) {\n                this.show(localize('iconLabel.loading', \"Loading...\"), focus);\n            }\n            // compute the content\n            this._cancellationTokenSource = new CancellationTokenSource();\n            const token = this._cancellationTokenSource.token;\n            resolvedContent = await content.markdown(token);\n            if (resolvedContent === undefined) {\n                resolvedContent = content.markdownNotSupportedFallback;\n            }\n            if (this.isDisposed || token.isCancellationRequested) {\n                // either the widget has been closed in the meantime\n                // or there has been a new call to `update`\n                return;\n            }\n        }\n        this.show(resolvedContent, focus, options);\n    }\n    show(content, focus, options) {\n        const oldHoverWidget = this._hoverWidget;\n        if (this.hasContent(content)) {\n            const hoverOptions = {\n                content,\n                target: this.target,\n                appearance: {\n                    showPointer: this.hoverDelegate.placement === 'element',\n                    skipFadeInAnimation: !this.fadeInAnimation || !!oldHoverWidget, // do not fade in if the hover is already showing\n                },\n                position: {\n                    hoverPosition: 2 /* HoverPosition.BELOW */,\n                },\n                ...options\n            };\n            this._hoverWidget = this.hoverDelegate.showHover(hoverOptions, focus);\n        }\n        oldHoverWidget === null || oldHoverWidget === void 0 ? void 0 : oldHoverWidget.dispose();\n    }\n    hasContent(content) {\n        if (!content) {\n            return false;\n        }\n        if (isMarkdownString(content)) {\n            return !!content.value;\n        }\n        return true;\n    }\n    get isDisposed() {\n        var _a;\n        return (_a = this._hoverWidget) === null || _a === void 0 ? void 0 : _a.isDisposed;\n    }\n    dispose() {\n        var _a, _b;\n        (_a = this._hoverWidget) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._cancellationTokenSource) === null || _b === void 0 ? void 0 : _b.dispose(true);\n        this._cancellationTokenSource = undefined;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { registerThemingParticipant } from '../../../../platform/theme/common/themeService.js';\nimport { editorHoverBorder } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IHoverService } from '../../../../platform/hover/browser/hover.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { HoverWidget } from './hoverWidget.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { addDisposableListener, EventType, getActiveElement, isAncestorOfActiveElement, isAncestor, getWindow } from '../../../../base/browser/dom.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nimport { StandardKeyboardEvent } from '../../../../base/browser/keyboardEvent.js';\nimport { IAccessibilityService } from '../../../../platform/accessibility/common/accessibility.js';\nimport { ILayoutService } from '../../../../platform/layout/browser/layoutService.js';\nimport { mainWindow } from '../../../../base/browser/window.js';\nimport { ContextViewHandler } from '../../../../platform/contextview/browser/contextViewService.js';\nimport { UpdatableHoverWidget } from './updatableHoverWidget.js';\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nlet HoverService = class HoverService extends Disposable {\n    constructor(_instantiationService, contextMenuService, _keybindingService, _layoutService, _accessibilityService) {\n        super();\n        this._instantiationService = _instantiationService;\n        this._keybindingService = _keybindingService;\n        this._layoutService = _layoutService;\n        this._accessibilityService = _accessibilityService;\n        contextMenuService.onDidShowContextMenu(() => this.hideHover());\n        this._contextViewHandler = this._register(new ContextViewHandler(this._layoutService));\n    }\n    showHover(options, focus, skipLastFocusedUpdate) {\n        var _a, _b, _c, _d;\n        if (getHoverOptionsIdentity(this._currentHoverOptions) === getHoverOptionsIdentity(options)) {\n            return undefined;\n        }\n        if (this._currentHover && ((_b = (_a = this._currentHoverOptions) === null || _a === void 0 ? void 0 : _a.persistence) === null || _b === void 0 ? void 0 : _b.sticky)) {\n            return undefined;\n        }\n        this._currentHoverOptions = options;\n        this._lastHoverOptions = options;\n        const trapFocus = options.trapFocus || this._accessibilityService.isScreenReaderOptimized();\n        const activeElement = getActiveElement();\n        // HACK, remove this check when #189076 is fixed\n        if (!skipLastFocusedUpdate) {\n            if (trapFocus && activeElement) {\n                this._lastFocusedElementBeforeOpen = activeElement;\n            }\n            else {\n                this._lastFocusedElementBeforeOpen = undefined;\n            }\n        }\n        const hoverDisposables = new DisposableStore();\n        const hover = this._instantiationService.createInstance(HoverWidget, options);\n        if ((_c = options.persistence) === null || _c === void 0 ? void 0 : _c.sticky) {\n            hover.isLocked = true;\n        }\n        hover.onDispose(() => {\n            var _a, _b;\n            const hoverWasFocused = ((_a = this._currentHover) === null || _a === void 0 ? void 0 : _a.domNode) && isAncestorOfActiveElement(this._currentHover.domNode);\n            if (hoverWasFocused) {\n                // Required to handle cases such as closing the hover with the escape key\n                (_b = this._lastFocusedElementBeforeOpen) === null || _b === void 0 ? void 0 : _b.focus();\n            }\n            // Only clear the current options if it's the current hover, the current options help\n            // reduce flickering when the same hover is shown multiple times\n            if (this._currentHoverOptions === options) {\n                this._currentHoverOptions = undefined;\n            }\n            hoverDisposables.dispose();\n        }, undefined, hoverDisposables);\n        // Set the container explicitly to enable aux window support\n        if (!options.container) {\n            const targetElement = options.target instanceof HTMLElement ? options.target : options.target.targetElements[0];\n            options.container = this._layoutService.getContainer(getWindow(targetElement));\n        }\n        this._contextViewHandler.showContextView(new HoverContextViewDelegate(hover, focus), options.container);\n        hover.onRequestLayout(() => this._contextViewHandler.layout(), undefined, hoverDisposables);\n        if ((_d = options.persistence) === null || _d === void 0 ? void 0 : _d.sticky) {\n            hoverDisposables.add(addDisposableListener(getWindow(options.container).document, EventType.MOUSE_DOWN, e => {\n                if (!isAncestor(e.target, hover.domNode)) {\n                    this.doHideHover();\n                }\n            }));\n        }\n        else {\n            if ('targetElements' in options.target) {\n                for (const element of options.target.targetElements) {\n                    hoverDisposables.add(addDisposableListener(element, EventType.CLICK, () => this.hideHover()));\n                }\n            }\n            else {\n                hoverDisposables.add(addDisposableListener(options.target, EventType.CLICK, () => this.hideHover()));\n            }\n            const focusedElement = getActiveElement();\n            if (focusedElement) {\n                const focusedElementDocument = getWindow(focusedElement).document;\n                hoverDisposables.add(addDisposableListener(focusedElement, EventType.KEY_DOWN, e => { var _a; return this._keyDown(e, hover, !!((_a = options.persistence) === null || _a === void 0 ? void 0 : _a.hideOnKeyDown)); }));\n                hoverDisposables.add(addDisposableListener(focusedElementDocument, EventType.KEY_DOWN, e => { var _a; return this._keyDown(e, hover, !!((_a = options.persistence) === null || _a === void 0 ? void 0 : _a.hideOnKeyDown)); }));\n                hoverDisposables.add(addDisposableListener(focusedElement, EventType.KEY_UP, e => this._keyUp(e, hover)));\n                hoverDisposables.add(addDisposableListener(focusedElementDocument, EventType.KEY_UP, e => this._keyUp(e, hover)));\n            }\n        }\n        if ('IntersectionObserver' in mainWindow) {\n            const observer = new IntersectionObserver(e => this._intersectionChange(e, hover), { threshold: 0 });\n            const firstTargetElement = 'targetElements' in options.target ? options.target.targetElements[0] : options.target;\n            observer.observe(firstTargetElement);\n            hoverDisposables.add(toDisposable(() => observer.disconnect()));\n        }\n        this._currentHover = hover;\n        return hover;\n    }\n    hideHover() {\n        var _a;\n        if (((_a = this._currentHover) === null || _a === void 0 ? void 0 : _a.isLocked) || !this._currentHoverOptions) {\n            return;\n        }\n        this.doHideHover();\n    }\n    doHideHover() {\n        this._currentHover = undefined;\n        this._currentHoverOptions = undefined;\n        this._contextViewHandler.hideContextView();\n    }\n    _intersectionChange(entries, hover) {\n        const entry = entries[entries.length - 1];\n        if (!entry.isIntersecting) {\n            hover.dispose();\n        }\n    }\n    showAndFocusLastHover() {\n        if (!this._lastHoverOptions) {\n            return;\n        }\n        this.showHover(this._lastHoverOptions, true, true);\n    }\n    _keyDown(e, hover, hideOnKeyDown) {\n        var _a, _b;\n        if (e.key === 'Alt') {\n            hover.isLocked = true;\n            return;\n        }\n        const event = new StandardKeyboardEvent(e);\n        const keybinding = this._keybindingService.resolveKeyboardEvent(event);\n        if (keybinding.getSingleModifierDispatchChords().some(value => !!value) || this._keybindingService.softDispatch(event, event.target).kind !== 0 /* ResultKind.NoMatchingKb */) {\n            return;\n        }\n        if (hideOnKeyDown && (!((_a = this._currentHoverOptions) === null || _a === void 0 ? void 0 : _a.trapFocus) || e.key !== 'Tab')) {\n            this.hideHover();\n            (_b = this._lastFocusedElementBeforeOpen) === null || _b === void 0 ? void 0 : _b.focus();\n        }\n    }\n    _keyUp(e, hover) {\n        var _a;\n        if (e.key === 'Alt') {\n            hover.isLocked = false;\n            // Hide if alt is released while the mouse is not over hover/target\n            if (!hover.isMouseIn) {\n                this.hideHover();\n                (_a = this._lastFocusedElementBeforeOpen) === null || _a === void 0 ? void 0 : _a.focus();\n            }\n        }\n    }\n    // TODO: Investigate performance of this function. There seems to be a lot of content created\n    //       and thrown away on start up\n    setupUpdatableHover(hoverDelegate, htmlElement, content, options) {\n        htmlElement.setAttribute('custom-hover', 'true');\n        if (htmlElement.title !== '') {\n            console.warn('HTML element already has a title attribute, which will conflict with the custom hover. Please remove the title attribute.');\n            console.trace('Stack trace:', htmlElement.title);\n            htmlElement.title = '';\n        }\n        let hoverPreparation;\n        let hoverWidget;\n        const hideHover = (disposeWidget, disposePreparation) => {\n            var _a;\n            const hadHover = hoverWidget !== undefined;\n            if (disposeWidget) {\n                hoverWidget === null || hoverWidget === void 0 ? void 0 : hoverWidget.dispose();\n                hoverWidget = undefined;\n            }\n            if (disposePreparation) {\n                hoverPreparation === null || hoverPreparation === void 0 ? void 0 : hoverPreparation.dispose();\n                hoverPreparation = undefined;\n            }\n            if (hadHover) {\n                (_a = hoverDelegate.onDidHideHover) === null || _a === void 0 ? void 0 : _a.call(hoverDelegate);\n                hoverWidget = undefined;\n            }\n        };\n        const triggerShowHover = (delay, focus, target) => {\n            return new TimeoutTimer(async () => {\n                if (!hoverWidget || hoverWidget.isDisposed) {\n                    hoverWidget = new UpdatableHoverWidget(hoverDelegate, target || htmlElement, delay > 0);\n                    await hoverWidget.update(typeof content === 'function' ? content() : content, focus, options);\n                }\n            }, delay);\n        };\n        let isMouseDown = false;\n        const mouseDownEmitter = addDisposableListener(htmlElement, EventType.MOUSE_DOWN, () => {\n            isMouseDown = true;\n            hideHover(true, true);\n        }, true);\n        const mouseUpEmitter = addDisposableListener(htmlElement, EventType.MOUSE_UP, () => {\n            isMouseDown = false;\n        }, true);\n        const mouseLeaveEmitter = addDisposableListener(htmlElement, EventType.MOUSE_LEAVE, (e) => {\n            isMouseDown = false;\n            hideHover(false, e.fromElement === htmlElement);\n        }, true);\n        const onMouseOver = (e) => {\n            if (hoverPreparation) {\n                return;\n            }\n            const toDispose = new DisposableStore();\n            const target = {\n                targetElements: [htmlElement],\n                dispose: () => { }\n            };\n            if (hoverDelegate.placement === undefined || hoverDelegate.placement === 'mouse') {\n                // track the mouse position\n                const onMouseMove = (e) => {\n                    target.x = e.x + 10;\n                    if ((e.target instanceof HTMLElement) && getHoverTargetElement(e.target, htmlElement) !== htmlElement) {\n                        hideHover(true, true);\n                    }\n                };\n                toDispose.add(addDisposableListener(htmlElement, EventType.MOUSE_MOVE, onMouseMove, true));\n            }\n            hoverPreparation = toDispose;\n            if ((e.target instanceof HTMLElement) && getHoverTargetElement(e.target, htmlElement) !== htmlElement) {\n                return; // Do not show hover when the mouse is over another hover target\n            }\n            toDispose.add(triggerShowHover(hoverDelegate.delay, false, target));\n        };\n        const mouseOverDomEmitter = addDisposableListener(htmlElement, EventType.MOUSE_OVER, onMouseOver, true);\n        const onFocus = () => {\n            if (isMouseDown || hoverPreparation) {\n                return;\n            }\n            const target = {\n                targetElements: [htmlElement],\n                dispose: () => { }\n            };\n            const toDispose = new DisposableStore();\n            const onBlur = () => hideHover(true, true);\n            toDispose.add(addDisposableListener(htmlElement, EventType.BLUR, onBlur, true));\n            toDispose.add(triggerShowHover(hoverDelegate.delay, false, target));\n            hoverPreparation = toDispose;\n        };\n        // Do not show hover when focusing an input or textarea\n        let focusDomEmitter;\n        const tagName = htmlElement.tagName.toLowerCase();\n        if (tagName !== 'input' && tagName !== 'textarea') {\n            focusDomEmitter = addDisposableListener(htmlElement, EventType.FOCUS, onFocus, true);\n        }\n        const hover = {\n            show: focus => {\n                hideHover(false, true); // terminate a ongoing mouse over preparation\n                triggerShowHover(0, focus); // show hover immediately\n            },\n            hide: () => {\n                hideHover(true, true);\n            },\n            update: async (newContent, hoverOptions) => {\n                content = newContent;\n                await (hoverWidget === null || hoverWidget === void 0 ? void 0 : hoverWidget.update(content, undefined, hoverOptions));\n            },\n            dispose: () => {\n                mouseOverDomEmitter.dispose();\n                mouseLeaveEmitter.dispose();\n                mouseDownEmitter.dispose();\n                mouseUpEmitter.dispose();\n                focusDomEmitter === null || focusDomEmitter === void 0 ? void 0 : focusDomEmitter.dispose();\n                hideHover(true, true);\n            }\n        };\n        return hover;\n    }\n};\nHoverService = __decorate([\n    __param(0, IInstantiationService),\n    __param(1, IContextMenuService),\n    __param(2, IKeybindingService),\n    __param(3, ILayoutService),\n    __param(4, IAccessibilityService)\n], HoverService);\nexport { HoverService };\nfunction getHoverOptionsIdentity(options) {\n    var _a;\n    if (options === undefined) {\n        return undefined;\n    }\n    return (_a = options === null || options === void 0 ? void 0 : options.id) !== null && _a !== void 0 ? _a : options;\n}\nclass HoverContextViewDelegate {\n    get anchorPosition() {\n        return this._hover.anchor;\n    }\n    constructor(_hover, _focus = false) {\n        this._hover = _hover;\n        this._focus = _focus;\n        // Render over all other context views\n        this.layer = 1;\n    }\n    render(container) {\n        this._hover.render(container);\n        if (this._focus) {\n            this._hover.focus();\n        }\n        return this._hover;\n    }\n    getAnchor() {\n        return {\n            x: this._hover.x,\n            y: this._hover.y\n        };\n    }\n    layout() {\n        this._hover.layout();\n    }\n}\nfunction getHoverTargetElement(element, stopElement) {\n    stopElement = stopElement !== null && stopElement !== void 0 ? stopElement : getWindow(element).document.body;\n    while (!element.hasAttribute('custom-hover') && element !== stopElement) {\n        element = element.parentElement;\n    }\n    return element;\n}\nregisterSingleton(IHoverService, HoverService, 1 /* InstantiationType.Delayed */);\nregisterThemingParticipant((theme, collector) => {\n    const hoverBorder = theme.getColor(editorHoverBorder);\n    if (hoverBorder) {\n        collector.addRule(`.monaco-workbench .workbench-hover .hover-row:not(:first-child):not(:empty) { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n        collector.addRule(`.monaco-workbench .workbench-hover hr { border-top: 1px solid ${hoverBorder.transparent(0.5)}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\nimport { registerEditorContribution } from '../editorExtensions.js';\nlet MarkerDecorationsContribution = class MarkerDecorationsContribution {\n    constructor(_editor, _markerDecorationsService) {\n        // Doesn't do anything, just requires `IMarkerDecorationsService` to make sure it gets instantiated\n    }\n    dispose() {\n    }\n};\nMarkerDecorationsContribution.ID = 'editor.contrib.markerDecorations';\nMarkerDecorationsContribution = __decorate([\n    __param(1, IMarkerDecorationsService)\n], MarkerDecorationsContribution);\nexport { MarkerDecorationsContribution };\nregisterEditorContribution(MarkerDecorationsContribution.ID, MarkerDecorationsContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because it instantiates IMarkerDecorationsService which is responsible for rendering squiggles\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { mainWindow } from '../../../base/browser/window.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { parse } from '../../../base/common/marshalling.js';\nimport { matchesScheme, matchesSomeScheme, Schemas } from '../../../base/common/network.js';\nimport { normalizePath } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ICodeEditorService } from './codeEditorService.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { EditorOpenSource } from '../../../platform/editor/common/editor.js';\nimport { extractSelection } from '../../../platform/opener/common/opener.js';\nlet CommandOpener = class CommandOpener {\n    constructor(_commandService) {\n        this._commandService = _commandService;\n    }\n    async open(target, options) {\n        if (!matchesScheme(target, Schemas.command)) {\n            return false;\n        }\n        if (!(options === null || options === void 0 ? void 0 : options.allowCommands)) {\n            // silently ignore commands when command-links are disabled, also\n            // suppress other openers by returning TRUE\n            return true;\n        }\n        if (typeof target === 'string') {\n            target = URI.parse(target);\n        }\n        if (Array.isArray(options.allowCommands)) {\n            // Only allow specific commands\n            if (!options.allowCommands.includes(target.path)) {\n                // Suppress other openers by returning TRUE\n                return true;\n            }\n        }\n        // execute as command\n        let args = [];\n        try {\n            args = parse(decodeURIComponent(target.query));\n        }\n        catch (_a) {\n            // ignore and retry\n            try {\n                args = parse(target.query);\n            }\n            catch (_b) {\n                // ignore error\n            }\n        }\n        if (!Array.isArray(args)) {\n            args = [args];\n        }\n        await this._commandService.executeCommand(target.path, ...args);\n        return true;\n    }\n};\nCommandOpener = __decorate([\n    __param(0, ICommandService)\n], CommandOpener);\nlet EditorOpener = class EditorOpener {\n    constructor(_editorService) {\n        this._editorService = _editorService;\n    }\n    async open(target, options) {\n        if (typeof target === 'string') {\n            target = URI.parse(target);\n        }\n        const { selection, uri } = extractSelection(target);\n        target = uri;\n        if (target.scheme === Schemas.file) {\n            target = normalizePath(target); // workaround for non-normalized paths (https://github.com/microsoft/vscode/issues/12954)\n        }\n        await this._editorService.openCodeEditor({\n            resource: target,\n            options: {\n                selection,\n                source: (options === null || options === void 0 ? void 0 : options.fromUserGesture) ? EditorOpenSource.USER : EditorOpenSource.API,\n                ...options === null || options === void 0 ? void 0 : options.editorOptions\n            }\n        }, this._editorService.getFocusedCodeEditor(), options === null || options === void 0 ? void 0 : options.openToSide);\n        return true;\n    }\n};\nEditorOpener = __decorate([\n    __param(0, ICodeEditorService)\n], EditorOpener);\nlet OpenerService = class OpenerService {\n    constructor(editorService, commandService) {\n        this._openers = new LinkedList();\n        this._validators = new LinkedList();\n        this._resolvers = new LinkedList();\n        this._resolvedUriTargets = new ResourceMap(uri => uri.with({ path: null, fragment: null, query: null }).toString());\n        this._externalOpeners = new LinkedList();\n        // Default external opener is going through window.open()\n        this._defaultExternalOpener = {\n            openExternal: async (href) => {\n                // ensure to open HTTP/HTTPS links into new windows\n                // to not trigger a navigation. Any other link is\n                // safe to be set as HREF to prevent a blank window\n                // from opening.\n                if (matchesSomeScheme(href, Schemas.http, Schemas.https)) {\n                    dom.windowOpenNoOpener(href);\n                }\n                else {\n                    mainWindow.location.href = href;\n                }\n                return true;\n            }\n        };\n        // Default opener: any external, maito, http(s), command, and catch-all-editors\n        this._openers.push({\n            open: async (target, options) => {\n                if ((options === null || options === void 0 ? void 0 : options.openExternal) || matchesSomeScheme(target, Schemas.mailto, Schemas.http, Schemas.https, Schemas.vsls)) {\n                    // open externally\n                    await this._doOpenExternal(target, options);\n                    return true;\n                }\n                return false;\n            }\n        });\n        this._openers.push(new CommandOpener(commandService));\n        this._openers.push(new EditorOpener(editorService));\n    }\n    registerOpener(opener) {\n        const remove = this._openers.unshift(opener);\n        return { dispose: remove };\n    }\n    async open(target, options) {\n        var _a;\n        // check with contributed validators\n        const targetURI = typeof target === 'string' ? URI.parse(target) : target;\n        // validate against the original URI that this URI resolves to, if one exists\n        const validationTarget = (_a = this._resolvedUriTargets.get(targetURI)) !== null && _a !== void 0 ? _a : target;\n        for (const validator of this._validators) {\n            if (!(await validator.shouldOpen(validationTarget, options))) {\n                return false;\n            }\n        }\n        // check with contributed openers\n        for (const opener of this._openers) {\n            const handled = await opener.open(target, options);\n            if (handled) {\n                return true;\n            }\n        }\n        return false;\n    }\n    async resolveExternalUri(resource, options) {\n        for (const resolver of this._resolvers) {\n            try {\n                const result = await resolver.resolveExternalUri(resource, options);\n                if (result) {\n                    if (!this._resolvedUriTargets.has(result.resolved)) {\n                        this._resolvedUriTargets.set(result.resolved, resource);\n                    }\n                    return result;\n                }\n            }\n            catch (_a) {\n                // noop\n            }\n        }\n        throw new Error('Could not resolve external URI: ' + resource.toString());\n    }\n    async _doOpenExternal(resource, options) {\n        //todo@jrieken IExternalUriResolver should support `uri: URI | string`\n        const uri = typeof resource === 'string' ? URI.parse(resource) : resource;\n        let externalUri;\n        try {\n            externalUri = (await this.resolveExternalUri(uri, options)).resolved;\n        }\n        catch (_a) {\n            externalUri = uri;\n        }\n        let href;\n        if (typeof resource === 'string' && uri.toString() === externalUri.toString()) {\n            // open the url-string AS IS\n            href = resource;\n        }\n        else {\n            // open URI using the toString(noEncode)+encodeURI-trick\n            href = encodeURI(externalUri.toString(true));\n        }\n        if (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) {\n            const preferredOpenerId = typeof (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) === 'string' ? options === null || options === void 0 ? void 0 : options.allowContributedOpeners : undefined;\n            for (const opener of this._externalOpeners) {\n                const didOpen = await opener.openExternal(href, {\n                    sourceUri: uri,\n                    preferredOpenerId,\n                }, CancellationToken.None);\n                if (didOpen) {\n                    return true;\n                }\n            }\n        }\n        return this._defaultExternalOpener.openExternal(href, { sourceUri: uri }, CancellationToken.None);\n    }\n    dispose() {\n        this._validators.clear();\n    }\n};\nOpenerService = __decorate([\n    __param(0, ICodeEditorService),\n    __param(1, ICommandService)\n], OpenerService);\nexport { OpenerService };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getAllMethodNames } from '../../../base/common/objects.js';\nimport { EditorWorkerClient } from './editorWorkerService.js';\n/**\n * Create a new web worker that has model syncing capabilities built in.\n * Specify an AMD module to load that will `create` an object that will be proxied.\n */\nexport function createWebWorker(modelService, languageConfigurationService, opts) {\n    return new MonacoWebWorkerImpl(modelService, languageConfigurationService, opts);\n}\nclass MonacoWebWorkerImpl extends EditorWorkerClient {\n    constructor(modelService, languageConfigurationService, opts) {\n        super(modelService, opts.keepIdleModels || false, opts.label, languageConfigurationService);\n        this._foreignModuleId = opts.moduleId;\n        this._foreignModuleCreateData = opts.createData || null;\n        this._foreignModuleHost = opts.host || null;\n        this._foreignProxy = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        if (!this._foreignModuleHost || typeof this._foreignModuleHost[method] !== 'function') {\n            return Promise.reject(new Error('Missing method ' + method + ' or missing main thread foreign host.'));\n        }\n        try {\n            return Promise.resolve(this._foreignModuleHost[method].apply(this._foreignModuleHost, args));\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    _getForeignProxy() {\n        if (!this._foreignProxy) {\n            this._foreignProxy = this._getProxy().then((proxy) => {\n                const foreignHostMethods = this._foreignModuleHost ? getAllMethodNames(this._foreignModuleHost) : [];\n                return proxy.loadForeignModule(this._foreignModuleId, this._foreignModuleCreateData, foreignHostMethods).then((foreignMethods) => {\n                    this._foreignModuleCreateData = null;\n                    const proxyMethodRequest = (method, args) => {\n                        return proxy.fmr(method, args);\n                    };\n                    const createProxyMethod = (method, proxyMethodRequest) => {\n                        return function () {\n                            const args = Array.prototype.slice.call(arguments, 0);\n                            return proxyMethodRequest(method, args);\n                        };\n                    };\n                    const foreignProxy = {};\n                    for (const foreignMethod of foreignMethods) {\n                        foreignProxy[foreignMethod] = createProxyMethod(foreignMethod, proxyMethodRequest);\n                    }\n                    return foreignProxy;\n                });\n            });\n        }\n        return this._foreignProxy;\n    }\n    getProxy() {\n        return this._getForeignProxy();\n    }\n    withSyncedResources(resources) {\n        return this._withSyncedResources(resources).then(_ => this.getProxy());\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class StableEditorScrollState {\n    static capture(editor) {\n        if (editor.getScrollTop() === 0 || editor.hasPendingScrollAnimation()) {\n            // Never mess with the scroll top if the editor is at the top of the file or if there is a pending scroll animation\n            return new StableEditorScrollState(editor.getScrollTop(), editor.getContentHeight(), null, 0, null);\n        }\n        let visiblePosition = null;\n        let visiblePositionScrollDelta = 0;\n        const visibleRanges = editor.getVisibleRanges();\n        if (visibleRanges.length > 0) {\n            visiblePosition = visibleRanges[0].getStartPosition();\n            const visiblePositionScrollTop = editor.getTopForPosition(visiblePosition.lineNumber, visiblePosition.column);\n            visiblePositionScrollDelta = editor.getScrollTop() - visiblePositionScrollTop;\n        }\n        return new StableEditorScrollState(editor.getScrollTop(), editor.getContentHeight(), visiblePosition, visiblePositionScrollDelta, editor.getPosition());\n    }\n    constructor(_initialScrollTop, _initialContentHeight, _visiblePosition, _visiblePositionScrollDelta, _cursorPosition) {\n        this._initialScrollTop = _initialScrollTop;\n        this._initialContentHeight = _initialContentHeight;\n        this._visiblePosition = _visiblePosition;\n        this._visiblePositionScrollDelta = _visiblePositionScrollDelta;\n        this._cursorPosition = _cursorPosition;\n    }\n    restore(editor) {\n        if (this._initialContentHeight === editor.getContentHeight() && this._initialScrollTop === editor.getScrollTop()) {\n            // The editor's content height and scroll top haven't changed, so we don't need to do anything\n            return;\n        }\n        if (this._visiblePosition) {\n            const visiblePositionScrollTop = editor.getTopForPosition(this._visiblePosition.lineNumber, this._visiblePosition.column);\n            editor.setScrollTop(visiblePositionScrollTop + this._visiblePositionScrollDelta);\n        }\n    }\n    restoreRelativeVerticalPositionOfCursor(editor) {\n        if (this._initialContentHeight === editor.getContentHeight() && this._initialScrollTop === editor.getScrollTop()) {\n            // The editor's content height and scroll top haven't changed, so we don't need to do anything\n            return;\n        }\n        const currentCursorPosition = editor.getPosition();\n        if (!this._cursorPosition || !currentCursorPosition) {\n            return;\n        }\n        const offset = editor.getTopForLineNumber(currentCursorPosition.lineNumber) - editor.getTopForLineNumber(this._cursorPosition.lineNumber);\n        editor.setScrollTop(editor.getScrollTop() + offset);\n    }\n}\n"],"names":["isCodeEditor","thing","getEditorType","editorCommon","ICodeEditor","isDiffEditor","IDiffEditor","getCodeEditor","getModifiedEditor","onDidChangeActiveEditor","isCompositeEditor","activeCodeEditor","PageCoordinates","constructor","x","y","this","_pageCoordinatesBrand","undefined","toClientCoordinates","targetWindow","ClientCoordinates","scrollX","scrollY","clientX","clientY","_clientCoordinatesBrand","toPageCoordinates","EditorPagePosition","width","height","_editorPagePositionBrand","CoordinatesRelativeToEditor","_positionRelativeToEditorBrand","createEditorPagePosition","editorViewDomNode","editorPos","dom","left","top","createCoordinatesRelativeToEditor","editorPagePosition","pos","scaleX","offsetWidth","scaleY","offsetHeight","relativeX","relativeY","EditorMouseEvent","StandardMouseEvent","e","isFromPointerCapture","super","_editorMouseEventBrand","posx","posy","relativePos","EditorMouseEventFactory","_editorViewDomNode","_create","onContextMenu","target","callback","onMouseUp","onMouseDown","MOUSE_DOWN","onPointerDown","POINTER_DOWN","pointerId","onMouseLeave","MOUSE_LEAVE","onMouseMove","EditorPointerEventFactory","onPointerUp","onPointerLeave","POINTER_LEAVE","onPointerMove","GlobalEditorPointerMoveMonitor","Disposable","_globalPointerMoveMonitor","_register","GlobalPointerMoveMonitor","_keydownListener","startMonitoring","initialElement","initialButtons","pointerMoveCallback","onStopCallback","ownerDocument","toKeyCodeChord","isModifierKey","stopMonitoring","browserEvent","dispose","DynamicCssRules","_editor","_instanceId","_idPool","_counter","_rules","Map","_garbageCollectionScheduler","RunOnceScheduler","garbageCollect","createClassNameRef","options","rule","getOrCreateRule","increaseRefCount","className","decreaseRefCount","schedule","properties","key","computeUniqueKey","existingRule","get","counter","RefCountedCssRule","concat","getContainerDomNode","set","JSON","stringify","values","hasReferences","delete","_containerElement","_referenceCount","_styleElementDisposables","DisposableStore","_styleElement","textContent","getCssText","str","prop","value","cssValue","asCssVariable","id","cssPropName","camelToDashes","replace","_ref","first","toLowerCase","_ref2","letter","EditorExtensionsRegistry","Command","opts","precondition","_kbOpts","kbOpts","_menuOpts","menuOpts","metadata","register","Array","isArray","forEach","_registerMenuItem","kbOptsArr","kbWhen","kbExpr","ContextKeyExpr","and","desc","weight","args","when","primary","secondary","win","linux","mac","KeybindingsRegistry","registerKeybindingRule","CommandsRegistry","registerCommand","handler","accessor","runCommand","item","MenuRegistry","appendMenuItem","menuId","group","command","title","icon","order","MultiCommand","arguments","_implementations","addImplementation","priority","name","implementation","push","sort","a","b","i","length","splice","logService","ILogService","contextKeyService","IContextKeyService","trace","impl","context","getContext","getActiveElement","evaluate","result","ProxyCommand","EditorCommand","bindToContribution","controllerGetter","_callback","runEditorCommand","editor","controller","runner","codeEditorService","ICodeEditorService","getFocusedCodeEditor","getActiveCodeEditor","invokeWithinContext","editorAccessor","contextMatchesRules","EditorAction","convertOptions","withDefaults","MenuId","EditorContext","label","contextMenuOpts","map","alias","reportTelemetry","run","ITelemetryService","publicLog2","MultiEditorAction","EditorAction2","Action2","_len","_key","_a","_b","kbService","debug","serialize","registerModelAndPositionCommand","_len2","_key2","instaService","IInstantiationService","resource","position","assertType","URI","isUri","Position","isIPosition","model","IModelService","getModel","editorPosition","lift","invokeFunction","slice","ITextModelService","createModelReference","then","reference","Promise","resolve","reject","object","textEditorModel","err","finally","registerEditorCommand","editorCommand","EditorContributionRegistry","INSTANCE","registerEditorAction","ctor","action","registerMultiEditorAction","registerInstantiatedEditorAction","editorAction","registerEditorContribution","instantiation","getEditorCommand","commandId","getEditorActions","getEditorContributions","getSomeEditorContributions","ids","filter","c","indexOf","getDiffEditorContributions","editorContributions","diffEditorContributions","editorActions","editorCommands","Object","create","Registry","add","UndoCommand","MenubarEditMenu","nls","comment","CommandPalette","RedoCommand","SelectAllCommand","MenubarSelectionMenu","obsCodeEditor","ObservableCodeEditor","_map","d","onDidDispose","observableFromEvent","onDidChangeModel","__decorate","decorators","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","AbstractCodeEditorService","_themeService","_onWillCreateCodeEditor","Emitter","_onCodeEditorAdd","onCodeEditorAdd","event","_onCodeEditorRemove","onCodeEditorRemove","_onWillCreateDiffEditor","_onDiffEditorAdd","onDiffEditorAdd","_onDiffEditorRemove","onDiffEditorRemove","_decorationOptionProviders","_codeEditorOpenHandlers","LinkedList","_modelProperties","_codeEditors","_diffEditors","_globalStyleSheet","willCreateCodeEditor","fire","addCodeEditor","getId","removeCodeEditor","listCodeEditors","keys","willCreateDiffEditor","addDiffEditor","listDiffEditors","editorWithWidgetFocus","editors","hasTextFocus","hasWidgetFocus","removeDecorationType","provider","refCount","ed","removeDecorationsByType","setModelProperty","key1","toString","dest","has","getModelProperty","openCodeEditor","input","source","sideBySide","candidate","registerCodeEditorOpenHandler","rm","unshift","toDisposable","IThemeService","IBulkEditService","createDecorator","ResourceEdit","convert","edit","edits","ResourceTextEdit","is","ResourceFileEdit","Error","isObject","textEdit","versionId","Boolean","newResource","oldResource","STOP_WORKER_DELTA_TIME_MS","canSyncModel","modelService","isTooLargeForSyncing","EditorWorkerService","configurationService","languageConfigurationService","languageFeaturesService","_modelService","_workerManager","WorkerManager","_logService","linkProvider","language","hasAccessToAllModels","provideLinks","token","uri","withWorker","client","computeLinks","links","completionProvider","WordBasedCompletionItemProvider","canComputeUnicodeHighlights","computedUnicodeHighlights","range","computeDiff","original","modified","algorithm","identical","quitEarly","changes","toLineRangeMappings","moves","m","MovedText","LineRangeMapping","LineRange","DetailedLineRangeMapping","RangeMapping","Range","computeMoreMinimalEdits","pretty","isNonEmptyArray","sw","StopWatch","elapsed","race","timeout","canNavigateValueSet","navigateValueSet","up","canComputeWordRanges","computeWordRanges","findSectionHeaders","ITextResourceConfigurationService","ILanguageConfigurationService","ILanguageFeaturesService","workerManager","_debugDisplayName","_configurationService","provideCompletionItems","config","getValue","wordBasedSuggestions","models","getModels","getLanguageId","wordDefRegExp","getLanguageConfiguration","getWordDefinition","word","getWordAtPosition","lineNumber","startColumn","endColumn","fromPositions","insert","setEndPosition","column","data","textualSuggest","duration","suggestions","words","kind","insertText","_editorWorkerClient","_lastWorkerUsedTime","Date","getTime","WindowIntervalTimer","cancelAndSet","_checkStopIdleWorker","Math","round","mainWindow","onModelRemoved","_","_checkStopEmptyWorker","EditorWorkerClient","EditorModelManager","proxy","keepIdleModels","_syncedModels","_syncedModelsLastUsedTime","_proxy","timer","IntervalTimer","_checkStopModelSync","STOP_SYNC_MODEL_DELTA_TIME_MS","modelUrl","ensureSyncedResources","resources","forceLargeModels","resourceStr","_beginModelSync","currentTime","toRemove","_stopModelSync","acceptNewModel","url","lines","getLinesContent","EOL","getEOL","getVersionId","toDispose","onDidChangeContent","acceptModelChanged","onWillDispose","acceptRemovedModel","SynchronousWorkerClient","instance","_instance","_proxyObj","getProxyObject","EditorWorkerHost","workerClient","_workerClient","fhr","method","_disposed","_keepIdleModels","_workerFactory","DefaultWorkerFactory","_worker","_modelManager","_getOrCreateWorker","SimpleWorkerClient","logOnceWebWorkerWarning","EditorSimpleWorker","_getProxy","_getOrCreateModelManager","_withSyncedResources","canceled","computeUnicodeHighlights","computeDefaultDocumentColors","leadingWord","wordDef","wordDefFlags","flags","$","HoverWidget","Widget","_targetWindow","_target","targetElements","_targetDocumentElement","document","documentElement","isDisposed","_isDisposed","isMouseIn","_lockMouseTracker","domNode","_hover","containerDomNode","onDispose","_onDispose","onRequestLayout","_onRequestLayout","anchor","_hoverPosition","_x","_y","isLocked","_isLocked","_hoverContainer","classList","toggle","_keybindingService","_openerService","_instantiationService","_accessibilityService","_c","_d","_e","_f","_g","_h","_messageListeners","_forcePosition","_enableFocusTraps","_addedFocusTrap","_linkHandler","linkHandler","openLinkFromMarkdown","isMarkdownString","content","isTrusted","ElementHoverTarget","_hoverPointer","appearance","showPointer","BaseHoverWidget","compact","skipFadeInAnimation","additionalClasses","forcePosition","trapFocus","hoverPosition","onmousedown","stopPropagation","onkeydown","equals","rowElement","contentsElement","style","whiteSpace","HTMLElement","appendChild","markdown","mdRenderer","createInstance","MarkdownRenderer","codeBlockFontFamily","fontFamily","EDITOR_FONT_DEFAULTS","element","render","actionHandler","disposables","asyncRenderCallback","layout","contentsDomNode","actions","statusBarElement","actionsElement","keybinding","lookupKeybinding","keybindingLabel","getLabel","HoverAction","iconClass","hideOnHover","persistence","includes","showHoverHint","infoElement","localize","isMacintosh","mouseTrackerTargets","mouseTracker","CompositeMouseTracker","onMouseOut","mouseTracker2Targets","addFocusTrap","firstContainerFocusElement","lastContainerFocusElement","findLastFocusableChild","beforeContainerFocusElement","afterContainerFocusElement","tabIndex","focus","preventDefault","root","hasChildNodes","childNodes","node","nodeType","ELEMENT_NODE","parsedNode","recursivelyFoundElement","container","accessibleViewHint","contains","activeElement","getHoverAccessibleViewHint","isScreenReaderOptimized","getAriaLabel","status","remove","maxHeight","targetBounds","zoom","boundingRect","getBoundingClientRect","bottom","right","getZoomAccountedBoundingClientRect","targetRect","center","adjustHorizontalHoverPosition","adjustVerticalHoverPosition","adjustHoverMaxHeight","padding","margin","paddingLeft","marginLeft","paddingRight","marginRight","paddingTop","marginTop","paddingBottom","marginBottom","computeXCordinate","computeYCordinate","setHoverPointerPosition","onContentsChanged","hoverWidth","clientWidth","max","clientLeft","clientHeight","innerHeight","hoverPointerOffset","maxWidth","min","scrollHeight","extraRightPadding","scrollbar","verticalScrollbarSize","hoverHeight","pointerLeftPosition","pointerX","IKeybindingService","IConfigurationService","IOpenerService","IAccessibilityService","_onMouseOut","_isMouseIn","_elements","n","onmouseover","_onTargetMouseOver","onmouseleave","_onTargetMouseLeave","_clearEvaluateMouseStateTimeout","_evaluateMouseState","_mouseTimeout","setTimeout","_fireIfMouseOutside","clearTimeout","_element","UpdatableHoverWidget","hoverDelegate","fadeInAnimation","update","_cancellationTokenSource","resolvedContent","isString","isFunction","_hoverWidget","show","CancellationTokenSource","markdownNotSupportedFallback","isCancellationRequested","oldHoverWidget","hasContent","hoverOptions","placement","showHover","HoverService","contextMenuService","_layoutService","onDidShowContextMenu","hideHover","_contextViewHandler","ContextViewHandler","skipLastFocusedUpdate","getHoverOptionsIdentity","_currentHoverOptions","_currentHover","sticky","_lastHoverOptions","_lastFocusedElementBeforeOpen","hoverDisposables","hover","isAncestorOfActiveElement","targetElement","getContainer","getWindow","showContextView","HoverContextViewDelegate","addDisposableListener","EventType","isAncestor","doHideHover","CLICK","focusedElement","focusedElementDocument","KEY_DOWN","_keyDown","hideOnKeyDown","KEY_UP","_keyUp","observer","IntersectionObserver","_intersectionChange","threshold","firstTargetElement","observe","disconnect","hideContextView","entries","isIntersecting","showAndFocusLastHover","StandardKeyboardEvent","resolveKeyboardEvent","getSingleModifierDispatchChords","some","softDispatch","setupUpdatableHover","htmlElement","hoverPreparation","hoverWidget","setAttribute","console","warn","disposeWidget","disposePreparation","hadHover","onDidHideHover","call","triggerShowHover","delay","TimeoutTimer","async","isMouseDown","mouseDownEmitter","mouseUpEmitter","MOUSE_UP","mouseLeaveEmitter","fromElement","mouseOverDomEmitter","MOUSE_OVER","getHoverTargetElement","MOUSE_MOVE","onFocus","BLUR","onBlur","focusDomEmitter","tagName","FOCUS","hide","newContent","IContextMenuService","ILayoutService","anchorPosition","_focus","layer","getAnchor","stopElement","body","hasAttribute","parentElement","registerSingleton","IHoverService","registerThemingParticipant","theme","collector","hoverBorder","getColor","editorHoverBorder","addRule","transparent","MarkerDecorationsContribution","_markerDecorationsService","ID","IMarkerDecorationsService","CommandOpener","_commandService","open","matchesScheme","Schemas","allowCommands","parse","path","decodeURIComponent","query","executeCommand","ICommandService","EditorOpener","_editorService","selection","extractSelection","scheme","file","normalizePath","fromUserGesture","EditorOpenSource","USER","API","editorOptions","openToSide","OpenerService","editorService","commandService","_openers","_validators","_resolvers","_resolvedUriTargets","ResourceMap","with","fragment","_externalOpeners","_defaultExternalOpener","openExternal","matchesSomeScheme","href","http","https","location","mailto","vsls","_doOpenExternal","registerOpener","opener","targetURI","validationTarget","validator","shouldOpen","resolveExternalUri","resolver","resolved","externalUri","encodeURI","allowContributedOpeners","preferredOpenerId","sourceUri","CancellationToken","None","clear","createWebWorker","MonacoWebWorkerImpl","_foreignModuleId","moduleId","_foreignModuleCreateData","createData","_foreignModuleHost","host","_foreignProxy","apply","_getForeignProxy","foreignHostMethods","getAllMethodNames","loadForeignModule","foreignMethods","proxyMethodRequest","fmr","createProxyMethod","prototype","foreignProxy","foreignMethod","getProxy","withSyncedResources","StableEditorScrollState","capture","getScrollTop","hasPendingScrollAnimation","getContentHeight","visiblePosition","visiblePositionScrollDelta","visibleRanges","getVisibleRanges","getStartPosition","visiblePositionScrollTop","getTopForPosition","getPosition","_initialScrollTop","_initialContentHeight","_visiblePosition","_visiblePositionScrollDelta","_cursorPosition","restore","setScrollTop","restoreRelativeVerticalPositionOfCursor","currentCursorPosition","offset","getTopForLineNumber"],"sourceRoot":""}