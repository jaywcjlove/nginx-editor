"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[596],{42861:function(e,t,i){i.r(t),i.d(t,{DragAndDropController:function(){return m}});var n=i(15671),o=i(43144),r=i(11752),s=i(61120),a=i(60136),c=i(27277),l=i(10526),d=i(4827),u=i(98351),h=i(10849),g=i(30788),p=i(52091),_=i(77161),f=function(){function e(t,i,o){(0,n.Z)(this,e),this.selection=t,this.targetPosition=i,this.copy=o,this.targetSelection=null}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,t){var i=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new g.e(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new p.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new p.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new p.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new p.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new p.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}},{key:"computeCursorState",value:function(e,t){return this.targetSelection}}]),e}();function v(e){return d.dz?e.altKey:e.ctrlKey}var m=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e){var o;return(0,n.Z)(this,i),(o=t.call(this))._editor=e,o._dndDecorationIds=o._editor.createDecorationsCollection(),o._register(o._editor.onMouseDown((function(e){return o._onEditorMouseDown(e)}))),o._register(o._editor.onMouseUp((function(e){return o._onEditorMouseUp(e)}))),o._register(o._editor.onMouseDrag((function(e){return o._onEditorMouseDrag(e)}))),o._register(o._editor.onMouseDrop((function(e){return o._onEditorMouseDrop(e)}))),o._register(o._editor.onMouseDropCanceled((function(){return o._onEditorMouseDropCanceled()}))),o._register(o._editor.onKeyDown((function(e){return o.onEditorKeyDown(e)}))),o._register(o._editor.onKeyUp((function(e){return o.onEditorKeyUp(e)}))),o._register(o._editor.onDidBlurEditorWidget((function(){return o.onEditorBlur()}))),o._register(o._editor.onDidBlurEditorText((function(){return o.onEditorBlur()}))),o._mouseDown=!1,o._modifierPressed=!1,o._dragSelection=null,o}return(0,o.Z)(i,[{key:"onEditorBlur",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}},{key:"onEditorKeyDown",value:function(e){this._editor.getOption(32)&&!this._editor.getOption(19)&&(v(e)&&(this._modifierPressed=!0),this._mouseDown&&v(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}},{key:"onEditorKeyUp",value:function(e){this._editor.getOption(32)&&!this._editor.getOption(19)&&(v(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===i.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}},{key:"_onEditorMouseDown",value:function(e){this._mouseDown=!0}},{key:"_onEditorMouseUp",value:function(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}},{key:"_onEditorMouseDrag",value:function(e){var t=e.target;if(null===this._dragSelection){var i=(this._editor.getSelections()||[]).filter((function(e){return t.position&&e.containsPosition(t.position)}));if(1!==i.length)return;this._dragSelection=i[0]}v(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}},{key:"_onEditorMouseDropCanceled",value:function(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"_onEditorMouseDrop",value:function(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){var t=new h.L(e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){var n=null;if(e.event.shiftKey){var o=this._editor.getSelection();if(o){var r=o.selectionStartLineNumber,s=o.selectionStartColumn;n=[new p.Y(r,s,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map((function(e){return e.containsPosition(t)?new p.Y(t.lineNumber,t.column,t.lineNumber,t.column):e}));this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(v(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(i.ID,new f(this._dragSelection,t,v(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"showAt",value:function(e){this._dndDecorationIds.set([{range:new g.e(e.lineNumber,e.column,e.lineNumber,e.column),options:i._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}},{key:"_removeDecoration",value:function(){this._dndDecorationIds.clear()}},{key:"_hitContent",value:function(e){return 6===e.type||7===e.type}},{key:"_hitMargin",value:function(e){return 2===e.type||3===e.type||4===e.type}},{key:"dispose",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,(0,r.Z)((0,s.Z)(i.prototype),"dispose",this).call(this)}}]),i}(l.JT);m.ID="editor.contrib.dragAndDrop",m.TRIGGER_KEY_VALUE=d.dz?6:5,m._DECORATION_OPTIONS=_.qx.register({description:"dnd-target",className:"dnd-target"}),(0,u._K)(m.ID,m,2)},21992:function(e,t,i){i.r(t);var n=i(74165),o=i(32124),r=i(64272),s=i(50605),a=i(26777),c=i(54280),l=i(89850),d=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{c(n.next(e))}catch(t){r(t)}}function a(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};l.P.registerCommand("_executeDocumentSymbolProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),l=1;l<t;l++)i[l-1]=arguments[l];return d(this,void 0,void 0,(0,n.Z)().mark((function t(){var l,d,u,h;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=i[0],(0,r.p_)(s.o.isUri(l)),d=e.get(c.Je),u=e.get(a.S),t.next=6,u.createModelReference(l);case 6:return h=t.sent,t.prev=7,t.next=10,d.getOrCreate(h.object.textEditorModel,o.T.None);case 10:return t.abrupt("return",t.sent.getTopLevelSymbols());case 11:return t.prev=11,h.dispose(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[7,,11,14]])})))}))},54280:function(e,t,i){i.d(t,{C3:function(){return E},H3:function(){return D},Je:function(){return F},sT:function(){return I}});var n=i(74165),o=i(93433),r=i(29439),s=i(37762),a=i(60136),c=i(27277),l=i(15671),d=i(43144),u=i(71881),h=i(32124),g=i(68552),p=i(25138),_=i(49584),f=i(10849),v=i(30788),m=i(22847),S=i(8850),y=i(11280),b=i(74463),C=i(10526),k=i(45161),w=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},N=function(e,t){return function(i,n){t(i,n,e)}},x=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{c(n.next(e))}catch(t){r(t)}}function a(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},R=function(){function e(){(0,l.Z)(this,e)}return(0,d.Z)(e,[{key:"remove",value:function(){var e;null===(e=this.parent)||void 0===e||e.children.delete(this.id)}}],[{key:"findId",value:function(e,t){var i;"string"===typeof e?i="".concat(t.id,"/").concat(e):(i="".concat(t.id,"/").concat(e.name),void 0!==t.children.get(i)&&(i="".concat(t.id,"/").concat(e.name,"_").concat(e.range.startLineNumber,"_").concat(e.range.startColumn)));for(var n=i,o=0;void 0!==t.children.get(n);o++)n="".concat(i,"_").concat(o);return n}},{key:"empty",value:function(e){return 0===e.children.size}}]),e}(),I=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e,n,o){var r;return(0,l.Z)(this,i),(r=t.call(this)).id=e,r.parent=n,r.symbol=o,r.children=new Map,r}return(0,d.Z)(i)}(R),D=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e,n,o,r){var s;return(0,l.Z)(this,i),(s=t.call(this)).id=e,s.parent=n,s.label=o,s.order=r,s.children=new Map,s}return(0,d.Z)(i)}(R),E=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e){var n;return(0,l.Z)(this,i),(n=t.call(this)).uri=e,n.id="root",n.parent=void 0,n._groups=new Map,n.children=new Map,n.id="root",n.parent=void 0,n}return(0,d.Z)(i,[{key:"_compact",value:function(){var e,t=0,i=(0,s.Z)(this._groups);try{for(i.s();!(e=i.n()).done;){var n=(0,r.Z)(e.value,2),o=n[0];0===n[1].children.size?this._groups.delete(o):t+=1}}catch(u){i.e(u)}finally{i.f()}if(1!==t)this.children=this._groups;else{var a,c=p.$.first(this._groups.values()),l=(0,s.Z)(c.children);try{for(l.s();!(a=l.n()).done;){var d=(0,r.Z)(a.value,2)[1];d.parent=this,this.children.set(d.id,d)}}catch(u){l.e(u)}finally{l.f()}}return this}},{key:"getTopLevelSymbols",value:function(){var e,t=[],i=(0,s.Z)(this.children.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;n instanceof I?t.push(n.symbol):t.push.apply(t,(0,o.Z)(p.$.map(n.children.values(),(function(e){return e.symbol}))))}}catch(r){i.e(r)}finally{i.f()}return t.sort((function(e,t){return v.e.compareRangesUsingStarts(e.range,t.range)}))}},{key:"asListOfDocumentSymbols",value:function(){var e=this.getTopLevelSymbols(),t=[];return i._flattenDocumentSymbols(t,e,""),t.sort((function(e,t){return f.L.compare(v.e.getStartPosition(e.range),v.e.getStartPosition(t.range))||f.L.compare(v.e.getEndPosition(t.range),v.e.getEndPosition(e.range))}))}}],[{key:"create",value:function(e,t,n){var o=new h.A(n),r=new i(t.uri),a=e.ordered(t),c=a.map((function(e,n){var a,c=R.findId("provider_".concat(n),r),l=new D(c,r,null!==(a=e.displayName)&&void 0!==a?a:"Unknown Outline Provider",n);return Promise.resolve(e.provideDocumentSymbols(t,o.token)).then((function(e){var t,n=(0,s.Z)(e||[]);try{for(n.s();!(t=n.n()).done;){var o=t.value;i._makeOutlineElement(o,l)}}catch(r){n.e(r)}finally{n.f()}return l}),(function(e){return(0,g.Cp)(e),l})).then((function(e){R.empty(e)?e.remove():r._groups.set(c,e)}))})),l=e.onDidChange((function(){var i=e.ordered(t);(0,u.fS)(i,a)||o.cancel()}));return Promise.all(c).then((function(){return o.token.isCancellationRequested&&!n.isCancellationRequested?i.create(e,t,n):r._compact()})).finally((function(){l.dispose()}))}},{key:"_makeOutlineElement",value:function(e,t){var n=R.findId(e,t),o=new I(n,t,e);if(e.children){var r,a=(0,s.Z)(e.children);try{for(a.s();!(r=a.n()).done;){var c=r.value;i._makeOutlineElement(c,o)}}catch(l){a.e(l)}finally{a.f()}}t.children.set(o.id,o)}},{key:"_flattenDocumentSymbols",value:function(e,t,n){var o,r=(0,s.Z)(t);try{for(r.s();!(o=r.n()).done;){var a=o.value;e.push({kind:a.kind,tags:a.tags,name:a.name,detail:a.detail,containerName:a.containerName||n,range:a.range,selectionRange:a.selectionRange,children:void 0}),a.children&&i._flattenDocumentSymbols(e,a.children,a.name)}}catch(c){r.e(c)}finally{r.f()}}}]),i}(R),F=(0,S.yh)("IOutlineModelService"),M=function(){function e(t,i,n){var o=this;(0,l.Z)(this,e),this._languageFeaturesService=t,this._disposables=new C.SL,this._cache=new _.z6(10,.7),this._debounceInformation=i.for(t.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(n.onModelRemoved((function(e){o._cache.delete(e.id)})))}return(0,d.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose()}},{key:"getOrCreate",value:function(e,t){return x(this,void 0,void 0,(0,n.Z)().mark((function i(){var o,r,s,a,c,l,d=this;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=this._languageFeaturesService.documentSymbolProvider,r=o.ordered(e),(s=this._cache.get(e.id))&&s.versionId===e.getVersionId()&&(0,u.fS)(s.provider,r)||(a=new h.A,s={versionId:e.getVersionId(),provider:r,promiseCnt:0,source:a,promise:E.create(o,e,a.token),model:void 0},this._cache.set(e.id,s),c=Date.now(),s.promise.then((function(t){s.model=t,d._debounceInformation.update(e,Date.now()-c)})).catch((function(t){d._cache.delete(e.id)}))),!s.model){i.next=6;break}return i.abrupt("return",s.model);case 6:return s.promiseCnt+=1,l=t.onCancellationRequested((function(){0===--s.promiseCnt&&(s.source.cancel(),d._cache.delete(e.id))})),i.prev=8,i.next=11,s.promise;case 11:return i.abrupt("return",i.sent);case 12:return i.prev=12,l.dispose(),i.finish(12);case 15:case"end":return i.stop()}}),i,this,[[8,,12,15]])})))}}]),e}();M=w([N(0,k.p),N(1,m.A),N(2,b.q)],M),(0,y.z)(F,M,1)},77058:function(e,t,i){i.r(t),i.d(t,{DropIntoEditorController:function(){return D}});var n=i(93433),o=i(74165),r=i(37762),s=i(15671),a=i(43144),c=i(60136),l=i(27277),d=i(32590),u=i(77314),h=i(10526),g=i(67609),p=i(34408),_=i(50605),f=i(23068),v=i(98351),m=i(16986),S=i(30788),y=i(45161),b=i(50004),C=i(25707),k=i(87697),w=i(26562),N=i(46049),x=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},R=function(e,t){return function(i,n){t(i,n,e)}},I=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{c(n.next(e))}catch(t){r(t)}}function a(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},D=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,o,r,a){var c;return(0,s.Z)(this,i),(c=t.call(this))._bulkEditService=n,c._languageFeaturesService=o,c._progressService=r,c._register(e.onDropIntoEditor((function(t){return c.onDropIntoEditor(e,t.position,t.event)}))),c._languageFeaturesService.documentOnDropEditProvider.register("*",new E(a)),c}return(0,a.Z)(i,[{key:"onDropIntoEditor",value:function(e,t,i){var s,a;return I(this,void 0,void 0,(0,o.Z)().mark((function c(){var l,u,h,g,p,_,f,v,y=this;return(0,o.Z)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if(i.dataTransfer&&e.hasModel()){c.next=2;break}return c.abrupt("return");case 2:return l=e.getModel(),u=l.getVersionId(),c.next=6,this.extractDataTransferData(i);case 6:if(0!==(h=c.sent).size){c.next=9;break}return c.abrupt("return");case 9:if(e.getModel().getVersionId()===u){c.next=11;break}return c.abrupt("return");case 11:return g=new b.Dl(e,1),c.prev=12,p=this._languageFeaturesService.documentOnDropEditProvider.ordered(l),c.next=16,this._progressService.withProgress({location:15,delay:750,title:(0,k.NC)("dropProgressTitle","Running drop handlers..."),cancellable:!0},(function(){return(0,d.eP)(I(y,void 0,void 0,(0,o.Z)().mark((function e(){var i,n,s,a;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=(0,r.Z)(p),e.prev=1,i.s();case 3:if((n=i.n()).done){e.next=14;break}return s=n.value,e.next=7,s.provideDocumentOnDropEdits(l,t,h,g.token);case 7:if(a=e.sent,!g.token.isCancellationRequested){e.next=10;break}return e.abrupt("return",void 0);case 10:if(!a){e.next=12;break}return e.abrupt("return",a);case 12:e.next=3;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),i.e(e.t0);case 19:return e.prev=19,i.f(),e.finish(19);case 22:return e.abrupt("return",void 0);case 23:case"end":return e.stop()}}),e,null,[[1,16,19,22]])}))),g.token)}),(function(){g.cancel()}));case 16:if(_=c.sent,!g.token.isCancellationRequested&&e.getModel().getVersionId()===u){c.next=19;break}return c.abrupt("return");case 19:if(!_){c.next=25;break}return f="string"===typeof _.insertText?C.Yj.escape(_.insertText):_.insertText.snippet,v={edits:[new m.Gl(l.uri,{range:new S.e(t.lineNumber,t.column,t.lineNumber,t.column),text:f,insertAsSnippet:!0})].concat((0,n.Z)(null!==(a=null===(s=_.additionalEdit)||void 0===s?void 0:s.edits)&&void 0!==a?a:[]))},c.next=24,this._bulkEditService.apply(v,{editor:e});case 24:return c.abrupt("return");case 25:return c.prev=25,g.dispose(),c.finish(25);case 28:case"end":return c.stop()}}),c,this,[[12,,25,28]])})))}},{key:"extractDataTransferData",value:function(e){return I(this,void 0,void 0,(0,o.Z)().mark((function t(){var i;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dataTransfer){t.next=2;break}return t.abrupt("return",new u.Hl);case 2:return i=(0,f.B)(e.dataTransfer),(0,f.d)(i,e),t.abrupt("return",i);case 5:case"end":return t.stop()}}),t)})))}}]),i}(h.JT);D.ID="editor.contrib.dropIntoEditorController",D=x([R(1,m.vu),R(2,y.p),R(3,w.R9),R(4,N.ec)],D);var E=function(){function e(t){(0,s.Z)(this,e),this._workspaceContextService=t}return(0,a.Z)(e,[{key:"provideDocumentOnDropEdits",value:function(e,t,i,n){var r;return I(this,void 0,void 0,(0,o.Z)().mark((function e(){var t,n,s,a,c;return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=i.get(g.v.uriList))){e.next=8;break}return e.next=4,t.asString();case 4:if(n=e.sent,!(s=this.getUriListInsertText(n))){e.next=8;break}return e.abrupt("return",{insertText:s});case 8:if(!(a=null!==(r=i.get("text"))&&void 0!==r?r:i.get(g.v.text))){e.next=14;break}return e.next=12,a.asString();case 12:return c=e.sent,e.abrupt("return",{insertText:c});case 14:return e.abrupt("return",void 0);case 15:case"end":return e.stop()}}),e,this)})))}},{key:"getUriListInsertText",value:function(e){var t,i=this,n=[],o=(0,r.Z)(u.Z0.parse(e));try{for(o.s();!(t=o.n()).done;){var s=t.value;try{n.push(_.o.parse(s))}catch(a){}}}catch(c){o.e(c)}finally{o.f()}if(n.length)return n.map((function(e){var t=i._workspaceContextService.getWorkspaceFolder(e);if(t){var n=(0,p.lX)(t.uri,e);if(n)return n}return e.fsPath})).join(" ")}}]),e}();E=x([R(0,N.ec)],E),(0,v._K)(D.ID,D,2)},50004:function(e,t,i){i.d(t,{yy:function(){return k},Dl:function(){return w},YQ:function(){return N}});var n=i(11752),o=i(61120),r=i(60136),s=i(27277),a=i(15671),c=i(43144),l=i(26684),d=i(30788),u=i(32124),h=i(10526),g=i(97326),p=i(98351),_=i(49525),f=i(49511),v=i(8850),m=i(11280),S=i(87697),y=(0,v.yh)("IEditorCancelService"),b=new _.uy("cancellableOperation",!1,(0,S.NC)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,m.z)(y,function(){function e(){(0,a.Z)(this,e),this._tokens=new WeakMap}return(0,c.Z)(e,[{key:"add",value:function(e,t){var i,n=this._tokens.get(e);return n||(n=e.invokeWithinContext((function(e){return{key:b.bindTo(e.get(_.i6)),tokens:new f.S}})),this._tokens.set(e,n)),n.key.set(!0),i=n.tokens.push(t),function(){i&&(i(),n.key.set(!n.tokens.isEmpty()),i=void 0)}}},{key:"cancel",value:function(e){var t=this._tokens.get(e);if(t){var i=t.tokens.pop();i&&(i.cancel(),t.key.set(!t.tokens.isEmpty()))}}}]),e}(),1);var C=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(e,n){var o;return(0,a.Z)(this,i),(o=t.call(this,n)).editor=e,o._unregister=e.invokeWithinContext((function(t){return t.get(y).add(e,(0,g.Z)(o))})),o}return(0,c.Z)(i,[{key:"dispose",value:function(){this._unregister(),(0,n.Z)((0,o.Z)(i.prototype),"dispose",this).call(this)}}]),i}(u.A);(0,p.fK)(new(function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,{id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:b})}return(0,c.Z)(i,[{key:"runEditorCommand",value:function(e,t){e.get(y).cancel(t)}}]),i}(p._l)));var k=function(){function e(t,i){if((0,a.Z)(this,e),this.flags=i,0!==(1&this.flags)){var n=t.getModel();this.modelVersionId=n?l.WU("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;0!==(4&this.flags)?this.position=t.getPosition():this.position=null,0!==(2&this.flags)?this.selection=t.getSelection():this.selection=null,0!==(8&this.flags)?(this.scrollLeft=t.getScrollLeft(),this.scrollTop=t.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}return(0,c.Z)(e,[{key:"_equals",value:function(t){if(!(t instanceof e))return!1;var i=t;return this.modelVersionId===i.modelVersionId&&(this.scrollLeft===i.scrollLeft&&this.scrollTop===i.scrollTop&&(!(!this.position&&i.position||this.position&&!i.position||this.position&&i.position&&!this.position.equals(i.position))&&!(!this.selection&&i.selection||this.selection&&!i.selection||this.selection&&i.selection&&!this.selection.equalsRange(i.selection))))}},{key:"validate",value:function(t){return this._equals(new e(t,this.flags))}}]),e}(),w=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(e,n,o,r){var s;return(0,a.Z)(this,i),(s=t.call(this,e,r))._listener=new h.SL,4&n&&s._listener.add(e.onDidChangeCursorPosition((function(e){o&&d.e.containsPosition(o,e.position)||s.cancel()}))),2&n&&s._listener.add(e.onDidChangeCursorSelection((function(e){o&&d.e.containsRange(o,e.selection)||s.cancel()}))),8&n&&s._listener.add(e.onDidScrollChange((function(e){return s.cancel()}))),1&n&&(s._listener.add(e.onDidChangeModel((function(e){return s.cancel()}))),s._listener.add(e.onDidChangeModelContent((function(e){return s.cancel()})))),s}return(0,c.Z)(i,[{key:"dispose",value:function(){this._listener.dispose(),(0,n.Z)((0,o.Z)(i.prototype),"dispose",this).call(this)}}]),i}(C),N=function(e){(0,r.Z)(i,e);var t=(0,s.Z)(i);function i(e,n){var o;return(0,a.Z)(this,i),(o=t.call(this,n))._listener=e.onDidChangeContent((function(){return o.cancel()})),o}return(0,c.Z)(i,[{key:"dispose",value:function(){this._listener.dispose(),(0,n.Z)((0,o.Z)(i.prototype),"dispose",this).call(this)}}]),i}(u.A)},51679:function(e,t,i){i.r(t),i.d(t,{CommonFindController:function(){return Ct},FindController:function(){return kt},MatchFindAction:function(){return It},MoveToMatchFindAction:function(){return Ft},NextMatchFindAction:function(){return Dt},NextSelectionMatchFindAction:function(){return Ot},PreviousMatchFindAction:function(){return Et},PreviousSelectionMatchFindAction:function(){return Zt},SelectionMatchFindAction:function(){return Mt},StartFindAction:function(){return wt},StartFindReplaceAction:function(){return Pt},StartFindWithArgsAction:function(){return xt},StartFindWithSelectionAction:function(){return Rt},getSelectionSearchString:function(){return bt}});var n=i(74165),o=i(15671),r=i(43144),s=i(11752),a=i(61120),c=i(60136),l=i(27277),d=i(32590),u=i(10526),h=i(26684),g=i(98351),p=i(2374),_=i(44474),f=i(36158),v=i(71881),m=i(11922),S=i(10849),y=i(30788),b=i(52091),C=i(37926),k=i(93433),w=i(37762),N=i(77161),x=i(6574),R=i(3553),I=function(){function e(t){(0,o.Z)(this,e),this._editor=t,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}return(0,r.Z)(e,[{key:"dispose",value:function(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}},{key:"reset",value:function(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}},{key:"getCount",value:function(){return this._decorations.length}},{key:"getFindScope",value:function(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}},{key:"getFindScopes",value:function(){var e=this;if(this._findScopeDecorationIds.length){var t=this._findScopeDecorationIds.map((function(t){return e._editor.getModel().getDecorationRange(t)})).filter((function(e){return!!e}));if(t.length)return t}return null}},{key:"getStartPosition",value:function(){return this._startPosition}},{key:"setStartPosition",value:function(e){this._startPosition=e,this.setCurrentFindMatch(null)}},{key:"_getDecorationIndex",value:function(e){var t=this._decorations.indexOf(e);return t>=0?t+1:1}},{key:"getDecorationRangeAt",value:function(e){var t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}},{key:"getCurrentMatchesPosition",value:function(t){var i,n=this._editor.getModel().getDecorationsInRange(t),o=(0,w.Z)(n);try{for(o.s();!(i=o.n()).done;){var r=i.value,s=r.options;if(s===e._FIND_MATCH_DECORATION||s===e._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(r.id)}}catch(a){o.e(a)}finally{o.f()}return 0}},{key:"setCurrentFindMatch",value:function(t){var i=this,n=null,o=0;if(t)for(var r=0,s=this._decorations.length;r<s;r++){var a=this._editor.getModel().getDecorationRange(this._decorations[r]);if(t.equalsRange(a)){n=this._decorations[r],o=r+1;break}}return null===this._highlightedDecorationId&&null===n||this._editor.changeDecorations((function(t){if(null!==i._highlightedDecorationId&&(t.changeDecorationOptions(i._highlightedDecorationId,e._FIND_MATCH_DECORATION),i._highlightedDecorationId=null),null!==n&&(i._highlightedDecorationId=n,t.changeDecorationOptions(i._highlightedDecorationId,e._CURRENT_FIND_MATCH_DECORATION)),null!==i._rangeHighlightDecorationId&&(t.removeDecoration(i._rangeHighlightDecorationId),i._rangeHighlightDecorationId=null),null!==n){var o=i._editor.getModel().getDecorationRange(n);if(o.startLineNumber!==o.endLineNumber&&1===o.endColumn){var r=o.endLineNumber-1,s=i._editor.getModel().getLineMaxColumn(r);o=new y.e(o.startLineNumber,o.startColumn,r,s)}i._rangeHighlightDecorationId=t.addDecoration(o,e._RANGE_HIGHLIGHT_DECORATION)}})),o}},{key:"set",value:function(t,i){var n=this;this._editor.changeDecorations((function(o){var r=e._FIND_MATCH_DECORATION,s=[];if(t.length>1e3){r=e._FIND_MATCH_NO_OVERVIEW_DECORATION;for(var a=n._editor.getModel().getLineCount(),c=n._editor.getLayoutInfo().height/a,l=Math.max(2,Math.ceil(3/c)),d=t[0].range.startLineNumber,u=t[0].range.endLineNumber,h=1,g=t.length;h<g;h++){var p=t[h].range;u+l>=p.startLineNumber?p.endLineNumber>u&&(u=p.endLineNumber):(s.push({range:new y.e(d,1,u,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),d=p.startLineNumber,u=p.endLineNumber)}s.push({range:new y.e(d,1,u,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}for(var _=new Array(t.length),f=0,v=t.length;f<v;f++)_[f]={range:t[f].range,options:r};n._decorations=o.deltaDecorations(n._decorations,_),n._overviewRulerApproximateDecorations=o.deltaDecorations(n._overviewRulerApproximateDecorations,s),n._rangeHighlightDecorationId&&(o.removeDecoration(n._rangeHighlightDecorationId),n._rangeHighlightDecorationId=null),n._findScopeDecorationIds.length&&(n._findScopeDecorationIds.forEach((function(e){return o.removeDecoration(e)})),n._findScopeDecorationIds=[]),(null===i||void 0===i?void 0:i.length)&&(n._findScopeDecorationIds=i.map((function(t){return o.addDecoration(t,e._FIND_SCOPE_DECORATION)})))}))}},{key:"matchBeforePosition",value:function(e){if(0===this._decorations.length)return null;for(var t=this._decorations.length-1;t>=0;t--){var i=this._decorations[t],n=this._editor.getModel().getDecorationRange(i);if(n&&!(n.endLineNumber>e.lineNumber)){if(n.endLineNumber<e.lineNumber)return n;if(!(n.endColumn>e.column))return n}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}},{key:"matchAfterPosition",value:function(e){if(0===this._decorations.length)return null;for(var t=0,i=this._decorations.length;t<i;t++){var n=this._decorations[t],o=this._editor.getModel().getDecorationRange(n);if(o&&!(o.startLineNumber<e.lineNumber)){if(o.startLineNumber>e.lineNumber)return o;if(!(o.startColumn<e.column))return o}}return this._editor.getModel().getDecorationRange(this._decorations[0])}},{key:"_allDecorations",value:function(){var e,t=[];(t=(t=t.concat(this._decorations)).concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length)&&(e=t).push.apply(e,(0,k.Z)(this._findScopeDecorationIds));return this._rangeHighlightDecorationId&&t.push(this._rangeHighlightDecorationId),t}}]),e}();I._CURRENT_FIND_MATCH_DECORATION=N.qx.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:(0,R.EN)(x.Fm_),position:f.sh.Center},minimap:{color:(0,R.EN)(x.SUY),position:f.F5.Inline}}),I._FIND_MATCH_DECORATION=N.qx.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:(0,R.EN)(x.Fm_),position:f.sh.Center},minimap:{color:(0,R.EN)(x.SUY),position:f.F5.Inline}}),I._FIND_MATCH_NO_OVERVIEW_DECORATION=N.qx.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),I._FIND_MATCH_ONLY_OVERVIEW_DECORATION=N.qx.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,R.EN)(x.Fm_),position:f.sh.Center}}),I._RANGE_HIGHLIGHT_DECORATION=N.qx.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),I._FIND_SCOPE_DECORATION=N.qx.register({description:"find-scope",className:"findScope",isWholeLine:!0});var D=function(){function e(t,i,n){(0,o.Z)(this,e),this._editorSelection=t,this._ranges=i,this._replaceStrings=n,this._trackedEditorSelectionId=null}return(0,r.Z)(e,[{key:"getEditOperations",value:function(e,t){if(this._ranges.length>0){for(var i=[],n=0;n<this._ranges.length;n++)i.push({range:this._ranges[n],text:this._replaceStrings[n]});i.sort((function(e,t){return y.e.compareRangesUsingStarts(e.range,t.range)}));for(var o=[],r=i[0],s=1;s<i.length;s++)r.range.endLineNumber===i[s].range.startLineNumber&&r.range.endColumn===i[s].range.startColumn?(r.range=r.range.plusRange(i[s].range),r.text=r.text+i[s].text):(o.push(r),r=i[s]);o.push(r);for(var a=0,c=o;a<c.length;a++){var l=c[a];t.addEditOperation(l.range,l.text)}}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}]),e}(),E=i(41218),F=(0,r.Z)((function e(t){(0,o.Z)(this,e),this.staticValue=t,this.kind=0})),M=(0,r.Z)((function e(t){(0,o.Z)(this,e),this.pieces=t,this.kind=1})),O=function(){function e(t){(0,o.Z)(this,e),t&&0!==t.length?1===t.length&&null!==t[0].staticValue?this._state=new F(t[0].staticValue):this._state=new M(t):this._state=new F("")}return(0,r.Z)(e,[{key:"hasReplacementPatterns",get:function(){return 1===this._state.kind}},{key:"buildReplaceString",value:function(t,i){if(0===this._state.kind)return i?(0,E.o)(t,this._state.staticValue):this._state.staticValue;for(var n="",o=0,r=this._state.pieces.length;o<r;o++){var s=this._state.pieces[o];if(null===s.staticValue){var a=e._substitute(s.matchIndex,t);if(null!==s.caseOps&&s.caseOps.length>0){for(var c=[],l=s.caseOps.length,d=0,u=0,h=a.length;u<h;u++){if(d>=l){c.push(a.slice(u));break}switch(s.caseOps[d]){case"U":c.push(a[u].toUpperCase());break;case"u":c.push(a[u].toUpperCase()),d++;break;case"L":c.push(a[u].toLowerCase());break;case"l":c.push(a[u].toLowerCase()),d++;break;default:c.push(a[u])}}a=c.join("")}n+=a}else n+=s.staticValue}return n}}],[{key:"fromStaticValue",value:function(t){return new e([Z.staticValue(t)])}},{key:"_substitute",value:function(e,t){if(null===t)return"";if(0===e)return t[0];for(var i="";e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}]),e}(),Z=function(){function e(t,i,n){(0,o.Z)(this,e),this.staticValue=t,this.matchIndex=i,n&&0!==n.length?this.caseOps=n.slice(0):this.caseOps=null}return(0,r.Z)(e,null,[{key:"staticValue",value:function(t){return new e(t,-1,null)}},{key:"caseOps",value:function(t,i){return new e(null,t,i)}}]),e}(),P=function(){function e(t){(0,o.Z)(this,e),this._source=t,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}return(0,r.Z)(e,[{key:"emitUnchanged",value:function(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}},{key:"emitStatic",value:function(e,t){this._emitStatic(e),this._lastCharIndex=t}},{key:"_emitStatic",value:function(e){0!==e.length&&(this._currentStaticPiece+=e)}},{key:"emitMatchIndex",value:function(e,t,i){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=Z.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=Z.caseOps(e,i),this._lastCharIndex=t}},{key:"finalize",value:function(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=Z.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new O(this._result)}}]),e}();var T=i(49525),L=new T.uy("findWidgetVisible",!1),A=(L.toNegated(),new T.uy("findInputFocussed",!1)),W=new T.uy("replaceInputFocussed",!1),V={primary:545,mac:{primary:2593}},B={primary:565,mac:{primary:2613}},H={primary:560,mac:{primary:2608}},q={primary:554,mac:{primary:2602}},U={primary:558,mac:{primary:2606}},K="actions.find",G="actions.findWithSelection",z="editor.actions.findWithArgs",Y="editor.action.nextMatchFindAction",j="editor.action.previousMatchFindAction",Q="editor.action.goToMatchFindAction",J="editor.action.nextSelectionMatchFindAction",$="editor.action.previousSelectionMatchFindAction",X="editor.action.startFindReplaceAction",ee="closeFindWidget",te="toggleFindCaseSensitive",ie="toggleFindWholeWord",ne="toggleFindRegex",oe="toggleFindInSelection",re="togglePreserveCase",se="editor.action.replaceOne",ae="editor.action.replaceAll",ce="editor.action.selectAllMatches",le=19999,de=function(){function e(t,i){var n=this;(0,o.Z)(this,e),this._toDispose=new u.SL,this._editor=t,this._state=i,this._isDisposed=!1,this._startSearchingTimer=new d._F,this._decorations=new I(t),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new d.pY((function(){return n.research(!1)}),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition((function(e){3!==e.reason&&5!==e.reason&&6!==e.reason||n._decorations.setStartPosition(n._editor.getPosition())}))),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent((function(e){n._ignoreModelContentChanged||(e.isFlush&&n._decorations.reset(),n._decorations.setStartPosition(n._editor.getPosition()),n._updateDecorationsScheduler.schedule())}))),this._toDispose.add(this._state.onFindReplaceStateChange((function(e){return n._onStateChanged(e)}))),this.research(!1,this._state.searchScope)}return(0,r.Z)(e,[{key:"dispose",value:function(){this._isDisposed=!0,(0,u.B9)(this._startSearchingTimer),this._toDispose.dispose()}},{key:"_onStateChanged",value:function(e){var t=this;this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet((function(){e.searchScope?t.research(e.moveCursor,t._state.searchScope):t.research(e.moveCursor)}),240)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}},{key:"research",value:function(e,t){var i=this,n=null;"undefined"!==typeof t?null!==t&&(n=Array.isArray(t)?t:[t]):n=this._decorations.getFindScopes(),null!==n&&(n=n.map((function(e){if(e.startLineNumber!==e.endLineNumber){var t=e.endLineNumber;return 1===e.endColumn&&(t-=1),new y.e(e.startLineNumber,1,t,i._editor.getModel().getLineMaxColumn(t))}return e})));var o=this._findMatches(n,!1,le);this._decorations.set(o,n);var r=this._editor.getSelection(),s=this._decorations.getCurrentMatchesPosition(r);if(0===s&&o.length>0){var a=(0,v.lG)(o.map((function(e){return e.range})),(function(e){return y.e.compareRangesUsingStarts(e,r)>=0}));s=a>0?a-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),e&&this._editor.getOption(38).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}},{key:"_hasMatches",value:function(){return this._state.matchesCount>0}},{key:"_cannotFind",value:function(){if(!this._hasMatches()){var e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}},{key:"_setCurrentFindMatch",value:function(e){var t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}},{key:"_prevSearchPosition",value:function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),i=e.lineNumber,n=e.column,o=this._editor.getModel();return t||1===n?(1===i?i=o.getLineCount():i--,n=o.getLineMaxColumn(i)):n--,new S.L(i,n)}},{key:"_moveToPrevMatch",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._state.canNavigateBack()){if(this._decorations.getCount()<le){var n=this._decorations.matchBeforePosition(t);return n&&n.isEmpty()&&n.getStartPosition().equals(t)&&(t=this._prevSearchPosition(t),n=this._decorations.matchBeforePosition(t)),void(n&&this._setCurrentFindMatch(n))}if(!this._cannotFind()){var o=this._decorations.getFindScope(),r=e._getSearchRange(this._editor.getModel(),o);r.getEndPosition().isBefore(t)&&(t=r.getEndPosition()),t.isBefore(r.getStartPosition())&&(t=r.getEndPosition());var s=t,a=s.lineNumber,c=s.column,l=this._editor.getModel(),d=new S.L(a,c),u=l.findPreviousMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(124):null,!1);if(u&&u.range.isEmpty()&&u.range.getStartPosition().equals(d)&&(d=this._prevSearchPosition(d),u=l.findPreviousMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(124):null,!1)),u)return i||r.containsRange(u.range)?void this._setCurrentFindMatch(u.range):this._moveToPrevMatch(u.range.getStartPosition(),!0)}}else{var h=this._decorations.matchAfterPosition(t);h&&this._setCurrentFindMatch(h)}}},{key:"moveToPrevMatch",value:function(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}},{key:"_nextSearchPosition",value:function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),i=e.lineNumber,n=e.column,o=this._editor.getModel();return t||n===o.getLineMaxColumn(i)?(i===o.getLineCount()?i=1:i++,n=1):n++,new S.L(i,n)}},{key:"_moveToNextMatch",value:function(e){if(this._state.canNavigateForward()){if(this._decorations.getCount()<le){var t=this._decorations.matchAfterPosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),void(t&&this._setCurrentFindMatch(t))}var i=this._getNextMatch(e,!1,!0);i&&this._setCurrentFindMatch(i.range)}else{var n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n)}}},{key:"_getNextMatch",value:function(t,i,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._cannotFind())return null;var r=this._decorations.getFindScope(),s=e._getSearchRange(this._editor.getModel(),r);s.getEndPosition().isBefore(t)&&(t=s.getStartPosition()),t.isBefore(s.getStartPosition())&&(t=s.getStartPosition());var a=t,c=a.lineNumber,l=a.column,d=this._editor.getModel(),u=new S.L(c,l),h=d.findNextMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(124):null,i);return n&&h&&h.range.isEmpty()&&h.range.getStartPosition().equals(u)&&(u=this._nextSearchPosition(u),h=d.findNextMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(124):null,i)),h?o||s.containsRange(h.range)?h:this._getNextMatch(h.range.getEndPosition(),i,n,!0):null}},{key:"moveToNextMatch",value:function(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}},{key:"_moveToMatch",value:function(e){var t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}},{key:"moveToMatch",value:function(e){this._moveToMatch(e)}},{key:"_getReplacePattern",value:function(){return this._state.isRegex?function(e){if(!e||0===e.length)return new O(null);for(var t=[],i=new P(e),n=0,o=e.length;n<o;n++){var r=e.charCodeAt(n);if(92!==r){if(36===r){if(++n>=o)break;var s=e.charCodeAt(n);if(36===s){i.emitUnchanged(n-1),i.emitStatic("$",n+1);continue}if(48===s||38===s){i.emitUnchanged(n-1),i.emitMatchIndex(0,n+1,t),t.length=0;continue}if(49<=s&&s<=57){var a=s-48;if(n+1<o){var c=e.charCodeAt(n+1);if(48<=c&&c<=57){n++,a=10*a+(c-48),i.emitUnchanged(n-2),i.emitMatchIndex(a,n+1,t),t.length=0;continue}}i.emitUnchanged(n-1),i.emitMatchIndex(a,n+1,t),t.length=0;continue}}}else{if(++n>=o)break;var l=e.charCodeAt(n);switch(l){case 92:i.emitUnchanged(n-1),i.emitStatic("\\",n+1);break;case 110:i.emitUnchanged(n-1),i.emitStatic("\n",n+1);break;case 116:i.emitUnchanged(n-1),i.emitStatic("\t",n+1);break;case 117:case 85:case 108:case 76:i.emitUnchanged(n-1),i.emitStatic("",n+1),t.push(String.fromCharCode(l))}}}return i.finalize()}(this._state.replaceString):O.fromStaticValue(this._state.replaceString)}},{key:"replace",value:function(){if(this._hasMatches()){var e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){var n=e.buildReplaceString(i.matches,this._state.preserveCase),o=new m.T4(t,n);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new S.L(t.startLineNumber,t.startColumn+n.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}}},{key:"_findMatches",value:function(t,i,n){var o=this,r=(t||[null]).map((function(t){return e._getSearchRange(o._editor.getModel(),t)}));return this._editor.getModel().findMatches(this._state.searchString,r,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(124):null,i,n)}},{key:"replaceAll",value:function(){if(this._hasMatches()){var e=this._decorations.getFindScopes();null===e&&this._state.matchesCount>=le?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}}},{key:"_largeReplaceAll",value:function(){var e=new C.bc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(124):null).parseSearchRequest();if(e){var t=e.regex;if(!t.multiline){var i="mu";t.ignoreCase&&(i+="i"),t.global&&(i+="g"),t=new RegExp(t.source,i)}var n,o=this._editor.getModel(),r=o.getValue(1),s=o.getFullModelRange(),a=this._getReplacePattern(),c=this._state.preserveCase;n=a.hasReplacementPatterns||c?r.replace(t,(function(){return a.buildReplaceString(arguments,c)})):r.replace(t,a.buildReplaceString(null,c));var l=new m.hP(s,n,this._editor.getSelection());this._executeEditorCommand("replaceAll",l)}}},{key:"_regularReplaceAll",value:function(e){for(var t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),n=[],o=0,r=i.length;o<r;o++)n[o]=t.buildReplaceString(i[o].matches,this._state.preserveCase);var s=new D(this._editor.getSelection(),i.map((function(e){return e.range})),n);this._executeEditorCommand("replaceAll",s)}},{key:"selectAllMatches",value:function(){if(this._hasMatches()){for(var e=this._decorations.getFindScopes(),t=this._findMatches(e,!1,1073741824).map((function(e){return new b.Y(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)})),i=this._editor.getSelection(),n=0,o=t.length;n<o;n++){if(t[n].equalsRange(i)){t=[i].concat(t.slice(0,n)).concat(t.slice(n+1));break}}this._editor.setSelections(t)}}},{key:"_executeEditorCommand",value:function(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}],[{key:"_getSearchRange",value:function(e,t){return t||e.getFullModelRange()}}]),e}(),ue=i(97326),he=i(53210),ge=i(17859),pe=i(86457),_e=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,r){var s;(0,o.Z)(this,i),(s=t.call(this))._hideSoon=s._register(new d.pY((function(){return s._hide()}),2e3)),s._isVisible=!1,s._editor=e,s._state=n,s._keybindingService=r,s._domNode=document.createElement("div"),s._domNode.className="findOptionsWidget",s._domNode.style.display="none",s._domNode.style.top="10px",s._domNode.style.zIndex="12",s._domNode.setAttribute("role","presentation"),s._domNode.setAttribute("aria-hidden","true");var a={inputActiveOptionBorder:(0,x.n_1)(x.PRb),inputActiveOptionForeground:(0,x.n_1)(x.Pvw),inputActiveOptionBackground:(0,x.n_1)(x.XEs)};return s.caseSensitive=s._register(new ge.rk(Object.assign({appendTitle:s._keybindingLabelFor(te),isChecked:s._state.matchCase},a))),s._domNode.appendChild(s.caseSensitive.domNode),s._register(s.caseSensitive.onChange((function(){s._state.change({matchCase:s.caseSensitive.checked},!1)}))),s.wholeWords=s._register(new ge.Qx(Object.assign({appendTitle:s._keybindingLabelFor(ie),isChecked:s._state.wholeWord},a))),s._domNode.appendChild(s.wholeWords.domNode),s._register(s.wholeWords.onChange((function(){s._state.change({wholeWord:s.wholeWords.checked},!1)}))),s.regex=s._register(new ge.eH(Object.assign({appendTitle:s._keybindingLabelFor(ne),isChecked:s._state.isRegex},a))),s._domNode.appendChild(s.regex.domNode),s._register(s.regex.onChange((function(){s._state.change({isRegex:s.regex.checked},!1)}))),s._editor.addOverlayWidget((0,ue.Z)(s)),s._register(s._state.onFindReplaceStateChange((function(e){var t=!1;e.isRegex&&(s.regex.checked=s._state.isRegex,t=!0),e.wholeWord&&(s.wholeWords.checked=s._state.wholeWord,t=!0),e.matchCase&&(s.caseSensitive.checked=s._state.matchCase,t=!0),!s._state.isRevealed&&t&&s._revealTemporarily()}))),s._register(he.addDisposableListener(s._domNode,he.EventType.MOUSE_LEAVE,(function(e){return s._onMouseLeave()}))),s._register(he.addDisposableListener(s._domNode,"mouseover",(function(e){return s._onMouseOver()}))),s}return(0,r.Z)(i,[{key:"_keybindingLabelFor",value:function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}},{key:"dispose",value:function(){this._editor.removeOverlayWidget(this),(0,s.Z)((0,a.Z)(i.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return i.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return{preference:0}}},{key:"highlightFindOptions",value:function(){this._revealTemporarily()}},{key:"_revealTemporarily",value:function(){this._show(),this._hideSoon.schedule()}},{key:"_onMouseLeave",value:function(){this._hideSoon.schedule()}},{key:"_onMouseOver",value:function(){this._hideSoon.cancel()}},{key:"_show",value:function(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}},{key:"_hide",value:function(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}]),i}(pe.$);_e.ID="editor.contrib.findOptionsWidget";var fe=i(28941);function ve(e,t){return 1===e||2!==e&&t}var me=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){var e;return(0,o.Z)(this,i),(e=t.call(this))._onFindReplaceStateChange=e._register(new fe.Q5),e.onFindReplaceStateChange=e._onFindReplaceStateChange.event,e._searchString="",e._replaceString="",e._isRevealed=!1,e._isReplaceRevealed=!1,e._isRegex=!1,e._isRegexOverride=0,e._wholeWord=!1,e._wholeWordOverride=0,e._matchCase=!1,e._matchCaseOverride=0,e._preserveCase=!1,e._preserveCaseOverride=0,e._searchScope=null,e._matchesPosition=0,e._matchesCount=0,e._currentMatch=null,e._loop=!0,e._isSearching=!1,e._filters=null,e}return(0,r.Z)(i,[{key:"searchString",get:function(){return this._searchString}},{key:"replaceString",get:function(){return this._replaceString}},{key:"isRevealed",get:function(){return this._isRevealed}},{key:"isReplaceRevealed",get:function(){return this._isReplaceRevealed}},{key:"isRegex",get:function(){return ve(this._isRegexOverride,this._isRegex)}},{key:"wholeWord",get:function(){return ve(this._wholeWordOverride,this._wholeWord)}},{key:"matchCase",get:function(){return ve(this._matchCaseOverride,this._matchCase)}},{key:"preserveCase",get:function(){return ve(this._preserveCaseOverride,this._preserveCase)}},{key:"actualIsRegex",get:function(){return this._isRegex}},{key:"actualWholeWord",get:function(){return this._wholeWord}},{key:"actualMatchCase",get:function(){return this._matchCase}},{key:"actualPreserveCase",get:function(){return this._preserveCase}},{key:"searchScope",get:function(){return this._searchScope}},{key:"matchesPosition",get:function(){return this._matchesPosition}},{key:"matchesCount",get:function(){return this._matchesCount}},{key:"currentMatch",get:function(){return this._currentMatch}},{key:"changeMatchInfo",value:function(e,t,i){var n={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},o=!1;0===t&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,n.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,n.matchesCount=!0,o=!0),"undefined"!==typeof i&&(y.e.equalsRange(this._currentMatch,i)||(this._currentMatch=i,n.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(n)}},{key:"change",value:function(e,t){var i,n=this,o={moveCursor:t,updateHistory:!(arguments.length>2&&void 0!==arguments[2])||arguments[2],searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},r=!1,s=this.isRegex,a=this.wholeWord,c=this.matchCase,l=this.preserveCase;"undefined"!==typeof e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,o.searchString=!0,r=!0),"undefined"!==typeof e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,o.replaceString=!0,r=!0),"undefined"!==typeof e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,o.isRevealed=!0,r=!0),"undefined"!==typeof e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,o.isReplaceRevealed=!0,r=!0),"undefined"!==typeof e.isRegex&&(this._isRegex=e.isRegex),"undefined"!==typeof e.wholeWord&&(this._wholeWord=e.wholeWord),"undefined"!==typeof e.matchCase&&(this._matchCase=e.matchCase),"undefined"!==typeof e.preserveCase&&(this._preserveCase=e.preserveCase),"undefined"!==typeof e.searchScope&&((null===(i=e.searchScope)||void 0===i?void 0:i.every((function(e){var t;return null===(t=n._searchScope)||void 0===t?void 0:t.some((function(t){return!y.e.equalsRange(t,e)}))})))||(this._searchScope=e.searchScope,o.searchScope=!0,r=!0)),"undefined"!==typeof e.loop&&this._loop!==e.loop&&(this._loop=e.loop,o.loop=!0,r=!0),"undefined"!==typeof e.isSearching&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,o.isSearching=!0,r=!0),"undefined"!==typeof e.filters&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,o.filters=!0,r=!0),this._isRegexOverride="undefined"!==typeof e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride="undefined"!==typeof e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride="undefined"!==typeof e.matchCaseOverride?e.matchCaseOverride:0,this._preserveCaseOverride="undefined"!==typeof e.preserveCaseOverride?e.preserveCaseOverride:0,s!==this.isRegex&&(r=!0,o.isRegex=!0),a!==this.wholeWord&&(r=!0,o.wholeWord=!0),c!==this.matchCase&&(r=!0,o.matchCase=!0),l!==this.preserveCase&&(r=!0,o.preserveCase=!0),r&&this._onFindReplaceStateChange.fire(o)}},{key:"canNavigateBack",value:function(){return this.canNavigateInLoop()||1!==this.matchesPosition}},{key:"canNavigateForward",value:function(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}},{key:"canNavigateInLoop",value:function(){return this._loop||this.matchesCount>=le}}]),i}(u.JT),Se=i(58340),ye=i(5762),be=i(98883),Ce=i(7579),ke=i(68552),we=i(4827),Ne=i(87697),xe=i(61776),Re=i(20034),Ie=i(18191),De=i(30870),Ee=i(11761),Fe=i(64272),Me=i(35724),Oe=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{c(n.next(e))}catch(t){r(t)}}function a(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},Ze=(0,Ie.q5)("find-selection",Ce.l.selection,Ne.NC("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Pe=(0,Ie.q5)("find-collapsed",Ce.l.chevronRight,Ne.NC("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Te=(0,Ie.q5)("find-expanded",Ce.l.chevronDown,Ne.NC("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),Le=(0,Ie.q5)("find-replace",Ce.l.replace,Ne.NC("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Ae=(0,Ie.q5)("find-replace-all",Ce.l.replaceAll,Ne.NC("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),We=(0,Ie.q5)("find-previous-match",Ce.l.arrowUp,Ne.NC("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),Ve=(0,Ie.q5)("find-next-match",Ce.l.arrowDown,Ne.NC("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Be=Ne.NC("label.find","Find"),He=Ne.NC("placeholder.find","Find"),qe=Ne.NC("label.previousMatchButton","Previous Match"),Ue=Ne.NC("label.nextMatchButton","Next Match"),Ke=Ne.NC("label.toggleSelectionFind","Find in Selection"),Ge=Ne.NC("label.closeButton","Close"),ze=Ne.NC("label.replace","Replace"),Ye=Ne.NC("placeholder.replace","Replace"),je=Ne.NC("label.replaceButton","Replace"),Qe=Ne.NC("label.replaceAllButton","Replace All"),Je=Ne.NC("label.toggleReplaceButton","Toggle Replace"),$e=Ne.NC("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",le),Xe=Ne.NC("label.matchesLocation","{0} of {1}"),et=Ne.NC("label.noResults","No results"),tt=419,it=69,nt="ctrlEnterReplaceAll.windows.donotask",ot=we.dz?256:2048,rt=(0,r.Z)((function e(t){(0,o.Z)(this,e),this.afterLineNumber=t,this.heightInPx=33,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}));function st(e,t,i){var n=!!t.match(/\n/);i&&n&&i.selectionStart>0&&e.stopPropagation()}function at(e,t,i){var n=!!t.match(/\n/);i&&n&&i.selectionEnd<i.value.length&&e.stopPropagation()}var ct=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(e,r,s,a,c,l,h,g,p){var _;return(0,o.Z)(this,i),(_=t.call(this))._cachedHeight=null,_._revealTimeouts=[],_._codeEditor=e,_._controller=r,_._state=s,_._contextViewProvider=a,_._keybindingService=c,_._contextKeyService=l,_._storageService=g,_._notificationService=p,_._ctrlEnterReplaceAllWarningPrompted=!!g.getBoolean(nt,0),_._isVisible=!1,_._isReplaceVisible=!1,_._ignoreChangeEvent=!1,_._updateHistoryDelayer=new d.vp(500),_._register((0,u.OF)((function(){return _._updateHistoryDelayer.cancel()}))),_._register(_._state.onFindReplaceStateChange((function(e){return _._onStateChanged(e)}))),_._buildDomNode(),_._updateButtons(),_._tryUpdateWidgetWidth(),_._findInput.inputBox.layout(),_._register(_._codeEditor.onDidChangeConfiguration((function(e){if(e.hasChanged(86)&&(_._codeEditor.getOption(86)&&_._state.change({isReplaceRevealed:!1},!1),_._updateButtons()),e.hasChanged(138)&&_._tryUpdateWidgetWidth(),e.hasChanged(2)&&_.updateAccessibilitySupport(),e.hasChanged(38)){var t=_._codeEditor.getOption(38).loop;_._state.change({loop:t},!1);var i=_._codeEditor.getOption(38).addExtraSpaceOnTop;i&&!_._viewZone&&(_._viewZone=new rt(0),_._showViewZone()),!i&&_._viewZone&&_._removeViewZone()}}))),_.updateAccessibilitySupport(),_._register(_._codeEditor.onDidChangeCursorSelection((function(){_._isVisible&&_._updateToggleSelectionFindButton()}))),_._register(_._codeEditor.onDidFocusEditorWidget((function(){return Oe((0,ue.Z)(_),void 0,void 0,(0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isVisible){e.next=5;break}return e.next=3,this._controller.getGlobalBufferTerm();case 3:(t=e.sent)&&t!==this._state.searchString&&(this._state.change({searchString:t},!1),this._findInput.select());case 5:case"end":return e.stop()}}),e,this)})))}))),_._findInputFocused=A.bindTo(l),_._findFocusTracker=_._register(he.trackFocus(_._findInput.inputBox.inputElement)),_._register(_._findFocusTracker.onDidFocus((function(){_._findInputFocused.set(!0),_._updateSearchScope()}))),_._register(_._findFocusTracker.onDidBlur((function(){_._findInputFocused.set(!1)}))),_._replaceInputFocused=W.bindTo(l),_._replaceFocusTracker=_._register(he.trackFocus(_._replaceInput.inputBox.inputElement)),_._register(_._replaceFocusTracker.onDidFocus((function(){_._replaceInputFocused.set(!0),_._updateSearchScope()}))),_._register(_._replaceFocusTracker.onDidBlur((function(){_._replaceInputFocused.set(!1)}))),_._codeEditor.addOverlayWidget((0,ue.Z)(_)),_._codeEditor.getOption(38).addExtraSpaceOnTop&&(_._viewZone=new rt(0)),_._register(_._codeEditor.onDidChangeModel((function(){_._isVisible&&(_._viewZoneId=void 0)}))),_._register(_._codeEditor.onDidScrollChange((function(e){e.scrollTopChanged?_._layoutViewZone():setTimeout((function(){_._layoutViewZone()}),0)}))),_}return(0,r.Z)(i,[{key:"getId",value:function(){return i.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return this._isVisible?{preference:0}:null}},{key:"_onStateChanged",value:function(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(86)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=he.getTotalWidth(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){var t=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}},{key:"_delayedUpdateHistory",value:function(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,ke.dL)}},{key:"_updateHistory",value:function(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}},{key:"_updateMatchesCount",value:function(){var e;if(this._matchesCount.style.minWidth=it+"px",this._state.matchesCount>=le?this._matchesCount.title=$e:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){var t=String(this._state.matchesCount);this._state.matchesCount>=le&&(t+="+");var i=String(this._state.matchesPosition);"0"===i&&(i="?"),e=h.WU(Xe,i,t)}else e=et;this._matchesCount.appendChild(document.createTextNode(e)),(0,Se.Z9)(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),it=Math.max(it,this._matchesCount.clientWidth)}},{key:"_getAriaLabel",value:function(e,t,i){if(e===et)return""===i?Ne.NC("ariaSearchNoResultEmpty","{0} found",e):Ne.NC("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){var n=Ne.NC("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();if(o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1){var r=o.getLineContent(t.startLineNumber);return"".concat(r,", ").concat(n)}return n}return Ne.NC("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}},{key:"_updateToggleSelectionFindButton",value:function(){var e=this._codeEditor.getSelection(),t=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}},{key:"_updateButtons",value:function(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);var e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);var i=!this._codeEditor.getOption(86);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}},{key:"_reveal",value:function(){var e=this;if(this._revealTimeouts.forEach((function(e){clearTimeout(e)})),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;var t=this._codeEditor.getSelection();switch(this._codeEditor.getOption(38).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":var i=!!t&&t.startLineNumber!==t.endLineNumber;this._toggleSelectionFind.checked=i}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout((function(){e._domNode.classList.add("visible"),e._domNode.setAttribute("aria-hidden","false")}),0)),this._revealTimeouts.push(setTimeout((function(){e._findInput.validate()}),200)),this._codeEditor.layoutOverlayWidget(this);var n=!0;if(this._codeEditor.getOption(38).seedSearchStringFromSelection&&t){var o=this._codeEditor.getDomNode();if(o){var r=he.getDomNodePagePosition(o),s=this._codeEditor.getScrolledVisiblePosition(t.getStartPosition()),a=r.left+(s?s.left:0),c=s?s.top:0;if(this._viewZone&&c<this._viewZone.heightInPx){t.endLineNumber>t.startLineNumber&&(n=!1);var l=he.getTopLeftOffset(this._domNode).left;a>l&&(n=!1);var d=this._codeEditor.getScrolledVisiblePosition(t.getEndPosition());r.left+(d?d.left:0)>l&&(n=!1)}}}this._showViewZone(n)}}},{key:"_hide",value:function(e){this._revealTimeouts.forEach((function(e){clearTimeout(e)})),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}},{key:"_layoutViewZone",value:function(e){var t=this;if(this._codeEditor.getOption(38).addExtraSpaceOnTop){if(this._isVisible){var i=this._viewZone;void 0===this._viewZoneId&&i&&this._codeEditor.changeViewZones((function(n){i.heightInPx=t._getHeight(),t._viewZoneId=n.addZone(i),t._codeEditor.setScrollTop(e||t._codeEditor.getScrollTop()+i.heightInPx)}))}}else this._removeViewZone()}},{key:"_showViewZone",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._isVisible&&this._codeEditor.getOption(38).addExtraSpaceOnTop){void 0===this._viewZone&&(this._viewZone=new rt(0));var i=this._viewZone;this._codeEditor.changeViewZones((function(n){if(void 0!==e._viewZoneId){var o=e._getHeight();if(o===i.heightInPx)return;var r=o-i.heightInPx;return i.heightInPx=o,n.layoutZone(e._viewZoneId),void(t&&e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()+r))}var s=e._getHeight();(s-=e._codeEditor.getOption(80).top)<=0||(i.heightInPx=s,e._viewZoneId=n.addZone(i),t&&e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()+s))}))}}},{key:"_removeViewZone",value:function(){var e=this;this._codeEditor.changeViewZones((function(t){void 0!==e._viewZoneId&&(t.removeZone(e._viewZoneId),e._viewZoneId=void 0,e._viewZone&&(e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()-e._viewZone.heightInPx),e._viewZone=void 0))}))}},{key:"_tryUpdateWidgetWidth",value:function(){if(this._isVisible&&he.isInDOM(this._domNode)){var e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0)this._domNode.classList.add("hiddenEditor");else{this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");var t=e.width,i=e.minimap.minimapWidth,n=!1,o=!1,r=!1;if(this._resized)if(he.getTotalWidth(this._domNode)>tt)return this._domNode.style.maxWidth="".concat(t-28-i-15,"px"),void(this._replaceInput.width=he.getTotalWidth(this._findInput.domNode));if(447+i>=t&&(o=!0),447+i-it>=t&&(r=!0),447+i-it>=t+50&&(n=!0),this._domNode.classList.toggle("collapsed-find-widget",n),this._domNode.classList.toggle("narrow-find-widget",r),this._domNode.classList.toggle("reduced-find-widget",o),r||n||(this._domNode.style.maxWidth="".concat(t-28-i-15,"px")),this._resized){this._findInput.inputBox.layout();var s=this._findInput.inputBox.element.clientWidth;s>0&&(this._replaceInput.width=s)}else this._isReplaceVisible&&(this._replaceInput.width=he.getTotalWidth(this._findInput.domNode))}}}},{key:"_getHeight",value:function(){var e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4}},{key:"_tryUpdateHeight",value:function(){var e=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==e)&&(this._cachedHeight=e,this._domNode.style.height="".concat(e,"px"),!0)}},{key:"focusFindInput",value:function(){this._findInput.select(),this._findInput.focus()}},{key:"focusReplaceInput",value:function(){this._replaceInput.select(),this._replaceInput.focus()}},{key:"highlightFindOptions",value:function(){this._findInput.highlightFindOptions()}},{key:"_updateSearchScope",value:function(){var e=this;if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){var t=this._codeEditor.getSelections();t.map((function(t){1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));var i=e._state.currentMatch;return t.startLineNumber===t.endLineNumber||y.e.equalsRange(t,i)?null:t})).filter((function(e){return!!e})),t.length&&this._state.change({searchScope:t},!0)}}},{key:"_onFindInputMouseDown",value:function(e){e.middleButton&&e.stopPropagation()}},{key:"_onFindInputKeyDown",value:function(e){return e.equals(3|ot)?(this._keybindingService.dispatchEvent(e,e.target)||this._findInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?st(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18)?at(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}},{key:"_onReplaceInputKeyDown",value:function(e){return e.equals(3|ot)?(this._keybindingService.dispatchEvent(e,e.target)||(we.ED&&we.tY&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(Ne.NC("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(nt,!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n")),void e.preventDefault()):e.equals(2)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?st(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18)?at(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}},{key:"getVerticalSashLeft",value:function(e){return 0}},{key:"_keybindingLabelFor",value:function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}},{key:"_buildDomNode",value:function(){var e=this;this._findInput=this._register(new xe.Yb(null,this._contextViewProvider,{width:221,label:Be,placeholder:He,appendCaseSensitiveLabel:this._keybindingLabelFor(te),appendWholeWordsLabel:this._keybindingLabelFor(ie),appendRegexLabel:this._keybindingLabelFor(ne),validation:function(t){if(0===t.length||!e._findInput.getRegex())return null;try{return new RegExp(t,"gu"),null}catch(i){return{content:i.message}}},flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:function(){return(0,Re.u)(e._keybindingService)},inputBoxStyles:Me.Hc,toggleStyles:Me.pl},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown((function(t){return e._onFindInputKeyDown(t)}))),this._register(this._findInput.inputBox.onDidChange((function(){e._ignoreChangeEvent||e._state.change({searchString:e._findInput.getValue()},!0)}))),this._register(this._findInput.onDidOptionChange((function(){e._state.change({isRegex:e._findInput.getRegex(),wholeWord:e._findInput.getWholeWords(),matchCase:e._findInput.getCaseSensitive()},!0)}))),this._register(this._findInput.onCaseSensitiveKeyDown((function(t){t.equals(1026)&&e._isReplaceVisible&&(e._replaceInput.focus(),t.preventDefault())}))),this._register(this._findInput.onRegexKeyDown((function(t){t.equals(2)&&e._isReplaceVisible&&(e._replaceInput.focusOnPreserve(),t.preventDefault())}))),this._register(this._findInput.inputBox.onDidHeightChange((function(t){e._tryUpdateHeight()&&e._showViewZone()}))),we.IJ&&this._register(this._findInput.onMouseDown((function(t){return e._onFindInputMouseDown(t)}))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new lt({label:qe+this._keybindingLabelFor(j),icon:We,onTrigger:function(){(0,Fe.cW)(e._codeEditor.getAction(j)).run().then(void 0,ke.dL)}})),this._nextBtn=this._register(new lt({label:Ue+this._keybindingLabelFor(Y),icon:Ve,onTrigger:function(){(0,Fe.cW)(e._codeEditor.getAction(Y)).run().then(void 0,ke.dL)}}));var t=document.createElement("div");t.className="find-part",t.appendChild(this._findInput.domNode);var i=document.createElement("div");i.className="find-actions",t.appendChild(i),i.appendChild(this._matchesCount),i.appendChild(this._prevBtn.domNode),i.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new ye.Z({icon:Ze,title:Ke+this._keybindingLabelFor(oe),isChecked:!1,inputActiveOptionBackground:(0,x.n_1)(x.XEs),inputActiveOptionBorder:(0,x.n_1)(x.PRb),inputActiveOptionForeground:(0,x.n_1)(x.Pvw)})),this._register(this._toggleSelectionFind.onChange((function(){if(e._toggleSelectionFind.checked){if(e._codeEditor.hasModel()){var t=e._codeEditor.getSelections();t.map((function(t){return 1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t})).filter((function(e){return!!e})),t.length&&e._state.change({searchScope:t},!0)}}else e._state.change({searchScope:null},!0)}))),i.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new lt({label:Ge+this._keybindingLabelFor(ee),icon:Ie.s_,onTrigger:function(){e._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:function(t){t.equals(2)&&e._isReplaceVisible&&(e._replaceBtn.isEnabled()?e._replaceBtn.focus():e._codeEditor.focus(),t.preventDefault())}})),i.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new xe.Nq(null,void 0,{label:ze,placeholder:Ye,appendPreserveCaseLabel:this._keybindingLabelFor(re),history:[],flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118,showHistoryHint:function(){return(0,Re.u)(e._keybindingService)},inputBoxStyles:Me.Hc,toggleStyles:Me.pl},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown((function(t){return e._onReplaceInputKeyDown(t)}))),this._register(this._replaceInput.inputBox.onDidChange((function(){e._state.change({replaceString:e._replaceInput.inputBox.value},!1)}))),this._register(this._replaceInput.inputBox.onDidHeightChange((function(t){e._isReplaceVisible&&e._tryUpdateHeight()&&e._showViewZone()}))),this._register(this._replaceInput.onDidOptionChange((function(){e._state.change({preserveCase:e._replaceInput.getPreserveCase()},!0)}))),this._register(this._replaceInput.onPreserveCaseKeyDown((function(t){t.equals(2)&&(e._prevBtn.isEnabled()?e._prevBtn.focus():e._nextBtn.isEnabled()?e._nextBtn.focus():e._toggleSelectionFind.enabled?e._toggleSelectionFind.focus():e._closeBtn.isEnabled()&&e._closeBtn.focus(),t.preventDefault())}))),this._replaceBtn=this._register(new lt({label:je+this._keybindingLabelFor(se),icon:Le,onTrigger:function(){e._controller.replace()},onKeyDown:function(t){t.equals(1026)&&(e._closeBtn.focus(),t.preventDefault())}})),this._replaceAllBtn=this._register(new lt({label:Qe+this._keybindingLabelFor(ae),icon:Ae,onTrigger:function(){e._controller.replaceAll()}}));var n=document.createElement("div");n.className="replace-part",n.appendChild(this._replaceInput.domNode);var o=document.createElement("div");o.className="replace-actions",n.appendChild(o),o.appendChild(this._replaceBtn.domNode),o.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new lt({label:Je,className:"codicon toggle left",onTrigger:function(){e._state.change({isReplaceRevealed:!e._isReplaceVisible},!1),e._isReplaceVisible&&(e._replaceInput.width=he.getTotalWidth(e._findInput.domNode),e._replaceInput.inputBox.layout()),e._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width="".concat(tt,"px"),this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(t),this._domNode.appendChild(n),this._resizeSash=new be.g(this._domNode,this,{orientation:0,size:2}),this._resized=!1;var r=tt;this._register(this._resizeSash.onDidStart((function(){r=he.getTotalWidth(e._domNode)}))),this._register(this._resizeSash.onDidChange((function(t){e._resized=!0;var i=r+t.startX-t.currentX;i<tt||(i>(parseFloat(he.getComputedStyle(e._domNode).maxWidth)||0)||(e._domNode.style.width="".concat(i,"px"),e._isReplaceVisible&&(e._replaceInput.width=he.getTotalWidth(e._findInput.domNode)),e._findInput.inputBox.layout(),e._tryUpdateHeight()))}))),this._register(this._resizeSash.onDidReset((function(){var t=he.getTotalWidth(e._domNode);if(!(t<tt)){var i=tt;if(!e._resized||t===tt){var n=e._codeEditor.getLayoutInfo();i=n.width-28-n.minimap.minimapWidth-15,e._resized=!0}e._domNode.style.width="".concat(i,"px"),e._isReplaceVisible&&(e._replaceInput.width=he.getTotalWidth(e._findInput.domNode)),e._findInput.inputBox.layout()}})))}},{key:"updateAccessibilitySupport",value:function(){var e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(2!==e)}}]),i}(pe.$);ct.ID="editor.contrib.findWidget";var lt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n;(0,o.Z)(this,i),(n=t.call(this))._opts=e;var r="button";return n._opts.className&&(r=r+" "+n._opts.className),n._opts.icon&&(r=r+" "+De.k.asClassName(n._opts.icon)),n._domNode=document.createElement("div"),n._domNode.title=n._opts.label,n._domNode.tabIndex=0,n._domNode.className=r,n._domNode.setAttribute("role","button"),n._domNode.setAttribute("aria-label",n._opts.label),n.onclick(n._domNode,(function(e){n._opts.onTrigger(),e.preventDefault()})),n.onkeydown(n._domNode,(function(e){var t,i;if(e.equals(10)||e.equals(3))return n._opts.onTrigger(),void e.preventDefault();null===(i=(t=n._opts).onKeyDown)||void 0===i||i.call(t,e)})),n}return(0,r.Z)(i,[{key:"domNode",get:function(){return this._domNode}},{key:"isEnabled",value:function(){return this._domNode.tabIndex>=0}},{key:"focus",value:function(){this._domNode.focus()}},{key:"setEnabled",value:function(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}},{key:"setExpanded",value:function(e){var t,i,n,o;(this._domNode.setAttribute("aria-expanded",String(!!e)),e)?((t=this._domNode.classList).remove.apply(t,(0,k.Z)(De.k.asClassNameArray(Pe))),(i=this._domNode.classList).add.apply(i,(0,k.Z)(De.k.asClassNameArray(Te)))):((n=this._domNode.classList).remove.apply(n,(0,k.Z)(De.k.asClassNameArray(Te))),(o=this._domNode.classList).add.apply(o,(0,k.Z)(De.k.asClassNameArray(Pe))))}}]),i}(pe.$);(0,R.Ic)((function(e,t){var i=function(e,i){i&&t.addRule(".monaco-editor ".concat(e," { background-color: ").concat(i,"; }"))};i(".findMatch",e.getColor(x.MUv)),i(".currentFindMatch",e.getColor(x.nyM)),i(".findScope",e.getColor(x.jUe)),i(".find-widget",e.getColor(x.D0T));var n=e.getColor(x.rh);n&&t.addRule(".monaco-editor .find-widget { box-shadow: 0 0 8px 2px ".concat(n,"; }"));var o=e.getColor(x.A42);o&&t.addRule(".monaco-editor .find-widget { border-left: 1px solid ".concat(o,"; border-right: 1px solid ").concat(o,"; border-bottom: 1px solid ").concat(o,"; }"));var r=e.getColor(x.EiJ);r&&t.addRule(".monaco-editor .findMatch { border: 1px ".concat((0,Ee.c3)(e.type)?"dotted":"solid"," ").concat(r,"; box-sizing: border-box; }"));var s=e.getColor(x.pnM);s&&t.addRule(".monaco-editor .currentFindMatch { border: 2px solid ".concat(s,"; padding: 1px; box-sizing: border-box; }"));var a=e.getColor(x.gkn);a&&t.addRule(".monaco-editor .findScope { border: 1px ".concat((0,Ee.c3)(e.type)?"dashed":"solid"," ").concat(a,"; }"));var c=e.getColor(x.lRK);c&&t.addRule(".monaco-editor .find-widget { border: 1px solid ".concat(c,"; }"));var l=e.getColor(x.Hfx);l&&t.addRule(".monaco-editor .find-widget { color: ".concat(l,"; }"));var d=e.getColor(x.Ido);d&&t.addRule(".monaco-editor .find-widget.no-results .matchesCount { color: ".concat(d,"; }"));var u=e.getColor(x.Ng6);if(u)t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: ".concat(u,"; }"));else{var h=e.getColor(x.D1_);h&&t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: ".concat(h,"; }"))}var g=e.getColor(x.lUq);g&&t.addRule("\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ".concat(g," !important;\n\t\t}\n\t"));var p=e.getColor(x.R80);p&&t.addRule(".monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ".concat(p,"; }"))}));var dt=i(23911),ut=i(88532),ht=i(30291),gt=i(45753),pt=i(13023),_t=i(4581),ft=i(63019),vt=function(e,t,i,n){var o,r=arguments.length,s=r<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(s=(r<3?o(s):r>3?o(t,i,s):o(t,i))||s);return r>3&&s&&Object.defineProperty(t,i,s),s},mt=function(e,t){return function(i,n){t(i,n,e)}},St=function(e,t,i,n){return new(i||(i=Promise))((function(o,r){function s(e){try{c(n.next(e))}catch(t){r(t)}}function a(e){try{c(n.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},yt=524288;function bt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.hasModel())return null;var n=e.getSelection();if("single"===t&&n.startLineNumber===n.endLineNumber||"multiple"===t)if(n.isEmpty()){var o=e.getConfiguredWordAtPosition(n.getStartPosition());if(o&&!1===i)return o.word}else if(e.getModel().getValueLengthInRange(n)<yt)return e.getModel().getValueInRange(n);return null}var Ct=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,r,s){var a;return(0,o.Z)(this,i),(a=t.call(this))._editor=e,a._findWidgetVisible=L.bindTo(n),a._contextKeyService=n,a._storageService=r,a._clipboardService=s,a._updateHistoryDelayer=new d.vp(500),a._state=a._register(new me),a.loadQueryState(),a._register(a._state.onFindReplaceStateChange((function(e){return a._onStateChanged(e)}))),a._model=null,a._register(a._editor.onDidChangeModel((function(){var e=a._editor.getModel()&&a._state.isRevealed;a.disposeModel(),a._state.change({searchScope:null,matchCase:a._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:a._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:a._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:a._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&a._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:a._editor.getOption(38).loop})}))),a}return(0,r.Z)(i,[{key:"editor",get:function(){return this._editor}},{key:"dispose",value:function(){this.disposeModel(),(0,s.Z)((0,a.Z)(i.prototype),"dispose",this).call(this)}},{key:"disposeModel",value:function(){this._model&&(this._model.dispose(),this._model=null)}},{key:"_onStateChanged",value:function(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}},{key:"saveQueryState",value:function(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,0),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,0),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,0),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,0)}},{key:"loadQueryState",value:function(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}},{key:"isFindInputFocused",value:function(){return!!A.getValue(this._contextKeyService)}},{key:"getState",value:function(){return this._state}},{key:"closeFindWidget",value:function(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}},{key:"toggleCaseSensitive",value:function(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleWholeWords",value:function(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleRegex",value:function(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"togglePreserveCase",value:function(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleSearchScope",value:function(){var e=this;if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){var t=this._editor.getSelections();t.map((function(t){return 1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t})).filter((function(e){return!!e})),t.length&&this._state.change({searchScope:t},!0)}}},{key:"setSearchString",value:function(e){this._state.isRegex&&(e=h.ec(e)),this._state.change({searchString:e},!1)}},{key:"highlightFindOptions",value:function(){}},{key:"_start",value:function(e,t){return St(this,void 0,void 0,(0,n.Z)().mark((function i(){var o,r,s,a,c;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.disposeModel(),this._editor.hasModel()){i.next=3;break}return i.abrupt("return");case 3:if(o=Object.assign(Object.assign({},t),{isRevealed:!0}),"single"===e.seedSearchStringFromSelection?(r=bt(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection))&&(this._state.isRegex?o.searchString=h.ec(r):o.searchString=r):"multiple"!==e.seedSearchStringFromSelection||e.updateSearchScope||(s=bt(this._editor,e.seedSearchStringFromSelection))&&(o.searchString=s),o.searchString||!e.seedSearchStringFromGlobalClipboard){i.next=12;break}return i.next=8,this.getGlobalBufferTerm();case 8:if(a=i.sent,this._editor.hasModel()){i.next=11;break}return i.abrupt("return");case 11:a&&(o.searchString=a);case 12:e.forceRevealReplace||o.isReplaceRevealed?o.isReplaceRevealed=!0:this._findWidgetVisible.get()||(o.isReplaceRevealed=!1),e.updateSearchScope&&(c=this._editor.getSelections()).some((function(e){return!e.isEmpty()}))&&(o.searchScope=c),o.loop=e.loop,this._state.change(o,!1),this._model||(this._model=new de(this._editor,this._state));case 17:case"end":return i.stop()}}),i,this)})))}},{key:"start",value:function(e,t){return this._start(e,t)}},{key:"moveToNextMatch",value:function(){return!!this._model&&(this._model.moveToNextMatch(),!0)}},{key:"moveToPrevMatch",value:function(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}},{key:"goToMatch",value:function(e){return!!this._model&&(this._model.moveToMatch(e),!0)}},{key:"replace",value:function(){return!!this._model&&(this._model.replace(),!0)}},{key:"replaceAll",value:function(){return!!this._model&&(this._model.replaceAll(),!0)}},{key:"selectAllMatches",value:function(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}},{key:"getGlobalBufferTerm",value:function(){return St(this,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._editor.getOption(38).globalFindClipboard||!this._editor.hasModel()||this._editor.getModel().isTooLargeForSyncing()){e.next=2;break}return e.abrupt("return",this._clipboardService.readFindText());case 2:return e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})))}},{key:"setGlobalBufferTerm",value:function(e){this._editor.getOption(38).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}}],[{key:"get",value:function(e){return e.getContribution(i.ID)}}]),i}(u.JT);Ct.ID="editor.contrib.findController";var kt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,r,s,a,c,l,d){var u;return(0,o.Z)(this,i),(u=t.call(this,e,r,l,d))._contextViewService=n,u._keybindingService=s,u._themeService=a,u._notificationService=c,u._widget=null,u._findOptionsWidget=null,u}return(0,r.Z)(i,[{key:"_start",value:function(e,t){var o=this,r=Object.create(null,{_start:{get:function(){return(0,s.Z)((0,a.Z)(i.prototype),"_start",o)}}});return St(this,void 0,void 0,(0,n.Z)().mark((function i(){var o,s,a;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:this._widget||this._createFindWidget(),o=this._editor.getSelection(),s=!1,i.t0=this._editor.getOption(38).autoFindInSelection,i.next="always"===i.t0?6:"never"===i.t0?8:"multiline"===i.t0?10:13;break;case 6:return s=!0,i.abrupt("break",14);case 8:return s=!1,i.abrupt("break",14);case 10:return a=!!o&&o.startLineNumber!==o.endLineNumber,s=a,i.abrupt("break",14);case 13:return i.abrupt("break",14);case 14:return e.updateSearchScope=e.updateSearchScope||s,i.next=17,r._start.call(this,e,t);case 17:this._widget&&(2===e.shouldFocus?this._widget.focusReplaceInput():1===e.shouldFocus&&this._widget.focusFindInput());case 18:case"end":return i.stop()}}),i,this)})))}},{key:"highlightFindOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}},{key:"_createFindWidget",value:function(){this._widget=this._register(new ct(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new _e(this._editor,this._state,this._keybindingService))}}]),i}(Ct=vt([mt(1,T.i6),mt(2,ft.Uy),mt(3,ut.p)],Ct));kt=vt([mt(1,ht.u),mt(2,T.i6),mt(3,gt.d),mt(4,R.XE),mt(5,pt.lT),mt(6,ft.Uy),mt(7,ut.p)],kt);var wt=(0,g.rn)(new g.jY({id:K,label:Ne.NC("startFindAction","Find"),alias:"Find",precondition:T.Ao.or(_.u.focus,T.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:dt.eH.MenubarEditMenu,group:"3_find",title:Ne.NC({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));wt.addImplementation(0,(function(e,t,i){var n=Ct.get(t);return!!n&&n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(38).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(38).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getOption(38).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(38).loop})}));var Nt={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:Ne.NC("actions.find.isRegexOverride",'Overrides "Use Regular Expression" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:Ne.NC("actions.find.wholeWordOverride",'Overrides "Match Whole Word" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:Ne.NC("actions.find.matchCaseOverride",'Overrides "Math Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:Ne.NC("actions.find.preserveCaseOverride",'Overrides "Preserve Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},findInSelection:{type:"boolean"}}}}]},xt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,o.Z)(this,i),t.call(this,{id:z,label:Ne.NC("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:Nt})}return(0,r.Z)(i,[{key:"run",value:function(e,t,i){return St(this,void 0,void 0,(0,n.Z)().mark((function e(){var o,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(o=Ct.get(t))){e.next=6;break}return r=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:void 0!==i.replaceString,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{},e.next=5,o.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===o.getState().searchString.length&&"never"!==t.getOption(38).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(38).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(null===i||void 0===i?void 0:i.findInSelection)||!1,loop:t.getOption(38).loop},r);case 5:o.setGlobalBufferTerm(o.getState().searchString);case 6:case"end":return e.stop()}}),e)})))}}]),i}(g.R6),Rt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,o.Z)(this,i),t.call(this,{id:G,label:Ne.NC("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}return(0,r.Z)(i,[{key:"run",value:function(e,t){return St(this,void 0,void 0,(0,n.Z)().mark((function e(){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Ct.get(t))){e.next=5;break}return e.next=4,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(38).loop});case 4:i.setGlobalBufferTerm(i.getState().searchString);case 5:case"end":return e.stop()}}),e)})))}}]),i}(g.R6),It=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,o.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"run",value:function(e,t){return St(this,void 0,void 0,(0,n.Z)().mark((function e(){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=Ct.get(t))||this._run(i)){e.next=5;break}return e.next=4,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===i.getState().searchString.length&&"never"!==t.getOption(38).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(38).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(38).loop});case 4:this._run(i);case 5:case"end":return e.stop()}}),e,this)})))}}]),i}(g.R6),Dt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,o.Z)(this,i),t.call(this,{id:Y,label:Ne.NC("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:_.u.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:T.Ao.and(_.u.focus,A),primary:3,weight:100}]})}return(0,r.Z)(i,[{key:"_run",value:function(e){return!!e.moveToNextMatch()&&(e.editor.pushUndoStop(),!0)}}]),i}(It),Et=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,o.Z)(this,i),t.call(this,{id:j,label:Ne.NC("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:_.u.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:T.Ao.and(_.u.focus,A),primary:1027,weight:100}]})}return(0,r.Z)(i,[{key:"_run",value:function(e){return e.moveToPrevMatch()}}]),i}(It),Ft=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){var e;return(0,o.Z)(this,i),(e=t.call(this,{id:Q,label:Ne.NC("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:L}))._highlightDecorations=[],e}return(0,r.Z)(i,[{key:"run",value:function(e,t,i){var n=this,o=Ct.get(t);if(o){var r=e.get(_t.eJ).createInputBox();r.placeholder=Ne.NC("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",o.getState().matchesCount);r.onDidChangeValue((function(e){!function(e){var i=parseInt(e);if(!isNaN(i)&&i>0&&i<=o.getState().matchesCount){r.validationMessage=void 0,o.goToMatch(i-1);var s=o.getState().currentMatch;s&&n.addDecorations(t,s)}else r.validationMessage=Ne.NC("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",o.getState().matchesCount),n.clearDecorations(t)}(e)})),r.onDidAccept((function(){var e=parseInt(r.value);!isNaN(e)&&e>0&&e<=o.getState().matchesCount?(o.goToMatch(e-1),r.hide()):r.validationMessage=Ne.NC("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",o.getState().matchesCount)})),r.onDidHide((function(){n.clearDecorations(t),r.dispose()})),r.show()}}},{key:"clearDecorations",value:function(e){var t=this;e.changeDecorations((function(e){t._highlightDecorations=e.deltaDecorations(t._highlightDecorations,[])}))}},{key:"addDecorations",value:function(e,t){var i=this;e.changeDecorations((function(e){i._highlightDecorations=e.deltaDecorations(i._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:(0,R.EN)(p.m9),position:f.sh.Full}}}])}))}}]),i}(g.R6),Mt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,o.Z)(this,i),t.apply(this,arguments)}return(0,r.Z)(i,[{key:"run",value:function(e,t){return St(this,void 0,void 0,(0,n.Z)().mark((function e(){var i,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Ct.get(t)){e.next=3;break}return e.abrupt("return");case 3:if((o=bt(t,"single",!1))&&i.setSearchString(o),this._run(i)){e.next=9;break}return e.next=8,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(38).loop});case 8:this._run(i);case 9:case"end":return e.stop()}}),e,this)})))}}]),i}(g.R6),Ot=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,o.Z)(this,i),t.call(this,{id:J,label:Ne.NC("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:_.u.focus,primary:2109,weight:100}})}return(0,r.Z)(i,[{key:"_run",value:function(e){return e.moveToNextMatch()}}]),i}(Mt),Zt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,o.Z)(this,i),t.call(this,{id:$,label:Ne.NC("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:_.u.focus,primary:3133,weight:100}})}return(0,r.Z)(i,[{key:"_run",value:function(e){return e.moveToPrevMatch()}}]),i}(Mt),Pt=(0,g.rn)(new g.jY({id:X,label:Ne.NC("startReplace","Replace"),alias:"Replace",precondition:T.Ao.or(_.u.focus,T.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:dt.eH.MenubarEditMenu,group:"3_find",title:Ne.NC({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));Pt.addImplementation(0,(function(e,t,i){if(!t.hasModel()||t.getOption(86))return!1;var n=Ct.get(t);if(!n)return!1;var o=t.getSelection(),r=n.isFindInputFocused(),s=!o.isEmpty()&&o.startLineNumber===o.endLineNumber&&"never"!==t.getOption(38).seedSearchStringFromSelection&&!r,a=r||s?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(38).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==t.getOption(38).seedSearchStringFromSelection,shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(38).loop})})),(0,g._K)(Ct.ID,kt,0),(0,g.Qr)(xt),(0,g.Qr)(Rt),(0,g.Qr)(Dt),(0,g.Qr)(Et),(0,g.Qr)(Ft),(0,g.Qr)(Ot),(0,g.Qr)(Zt);var Tt=g._l.bindToContribution(Ct.get);(0,g.fK)(new Tt({id:ee,precondition:L,handler:function(e){return e.closeFindWidget()},kbOpts:{weight:105,kbExpr:T.Ao.and(_.u.focus,T.Ao.not("isComposing")),primary:9,secondary:[1033]}})),(0,g.fK)(new Tt({id:te,precondition:void 0,handler:function(e){return e.toggleCaseSensitive()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:V.primary,mac:V.mac,win:V.win,linux:V.linux}})),(0,g.fK)(new Tt({id:ie,precondition:void 0,handler:function(e){return e.toggleWholeWords()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:B.primary,mac:B.mac,win:B.win,linux:B.linux}})),(0,g.fK)(new Tt({id:ne,precondition:void 0,handler:function(e){return e.toggleRegex()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:H.primary,mac:H.mac,win:H.win,linux:H.linux}})),(0,g.fK)(new Tt({id:oe,precondition:void 0,handler:function(e){return e.toggleSearchScope()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:q.primary,mac:q.mac,win:q.win,linux:q.linux}})),(0,g.fK)(new Tt({id:re,precondition:void 0,handler:function(e){return e.togglePreserveCase()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:U.primary,mac:U.mac,win:U.win,linux:U.linux}})),(0,g.fK)(new Tt({id:se,precondition:L,handler:function(e){return e.replace()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:3094}})),(0,g.fK)(new Tt({id:se,precondition:L,handler:function(e){return e.replace()},kbOpts:{weight:105,kbExpr:T.Ao.and(_.u.focus,W),primary:3}})),(0,g.fK)(new Tt({id:ae,precondition:L,handler:function(e){return e.replaceAll()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:2563}})),(0,g.fK)(new Tt({id:ae,precondition:L,handler:function(e){return e.replaceAll()},kbOpts:{weight:105,kbExpr:T.Ao.and(_.u.focus,W),primary:void 0,mac:{primary:2051}}})),(0,g.fK)(new Tt({id:ce,precondition:L,handler:function(e){return e.selectAllMatches()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:515}}))}}]);
//# sourceMappingURL=monaco-editor-vendor.b74e11c3.5d003731.js.map