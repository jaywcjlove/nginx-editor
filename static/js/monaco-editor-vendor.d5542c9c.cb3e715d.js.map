{"version":3,"file":"static/js/monaco-editor-vendor.d5542c9c.cb3e715d.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/base/common/worker/simpleWorker.js","../node_modules/monaco-editor/esm/vs/base/parts/quickinput/browser/quickInputUtils.js","../node_modules/monaco-editor/esm/vs/base/parts/quickinput/browser/quickInputBox.js","../node_modules/monaco-editor/esm/vs/base/parts/quickinput/browser/quickInputList.js","../node_modules/monaco-editor/esm/vs/base/parts/quickinput/browser/quickInput.js","../node_modules/monaco-editor/esm/vs/base/parts/quickinput/common/quickInput.js","../node_modules/monaco-editor/esm/vs/base/parts/storage/common/storage.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { transformErrorForSerialization } from '../errors.js';\nimport { Emitter } from '../event.js';\nimport { Disposable } from '../lifecycle.js';\nimport { globals, isWeb } from '../platform.js';\nimport * as types from '../types.js';\nimport * as strings from '../strings.js';\nconst INITIALIZE = '$initialize';\nlet webWorkerWarningLogged = false;\nexport function logOnceWebWorkerWarning(err) {\n    if (!isWeb) {\n        // running tests\n        return;\n    }\n    if (!webWorkerWarningLogged) {\n        webWorkerWarningLogged = true;\n        console.warn('Could not create web worker(s). Falling back to loading web worker code in main thread, which might cause UI freezes. Please see https://github.com/microsoft/monaco-editor#faq');\n    }\n    console.warn(err.message);\n}\nclass RequestMessage {\n    constructor(vsWorker, req, method, args) {\n        this.vsWorker = vsWorker;\n        this.req = req;\n        this.method = method;\n        this.args = args;\n        this.type = 0 /* Request */;\n    }\n}\nclass ReplyMessage {\n    constructor(vsWorker, seq, res, err) {\n        this.vsWorker = vsWorker;\n        this.seq = seq;\n        this.res = res;\n        this.err = err;\n        this.type = 1 /* Reply */;\n    }\n}\nclass SubscribeEventMessage {\n    constructor(vsWorker, req, eventName, arg) {\n        this.vsWorker = vsWorker;\n        this.req = req;\n        this.eventName = eventName;\n        this.arg = arg;\n        this.type = 2 /* SubscribeEvent */;\n    }\n}\nclass EventMessage {\n    constructor(vsWorker, req, event) {\n        this.vsWorker = vsWorker;\n        this.req = req;\n        this.event = event;\n        this.type = 3 /* Event */;\n    }\n}\nclass UnsubscribeEventMessage {\n    constructor(vsWorker, req) {\n        this.vsWorker = vsWorker;\n        this.req = req;\n        this.type = 4 /* UnsubscribeEvent */;\n    }\n}\nclass SimpleWorkerProtocol {\n    constructor(handler) {\n        this._workerId = -1;\n        this._handler = handler;\n        this._lastSentReq = 0;\n        this._pendingReplies = Object.create(null);\n        this._pendingEmitters = new Map();\n        this._pendingEvents = new Map();\n    }\n    setWorkerId(workerId) {\n        this._workerId = workerId;\n    }\n    sendMessage(method, args) {\n        const req = String(++this._lastSentReq);\n        return new Promise((resolve, reject) => {\n            this._pendingReplies[req] = {\n                resolve: resolve,\n                reject: reject\n            };\n            this._send(new RequestMessage(this._workerId, req, method, args));\n        });\n    }\n    listen(eventName, arg) {\n        let req = null;\n        const emitter = new Emitter({\n            onFirstListenerAdd: () => {\n                req = String(++this._lastSentReq);\n                this._pendingEmitters.set(req, emitter);\n                this._send(new SubscribeEventMessage(this._workerId, req, eventName, arg));\n            },\n            onLastListenerRemove: () => {\n                this._pendingEmitters.delete(req);\n                this._send(new UnsubscribeEventMessage(this._workerId, req));\n                req = null;\n            }\n        });\n        return emitter.event;\n    }\n    handleMessage(message) {\n        if (!message || !message.vsWorker) {\n            return;\n        }\n        if (this._workerId !== -1 && message.vsWorker !== this._workerId) {\n            return;\n        }\n        this._handleMessage(message);\n    }\n    _handleMessage(msg) {\n        switch (msg.type) {\n            case 1 /* Reply */:\n                return this._handleReplyMessage(msg);\n            case 0 /* Request */:\n                return this._handleRequestMessage(msg);\n            case 2 /* SubscribeEvent */:\n                return this._handleSubscribeEventMessage(msg);\n            case 3 /* Event */:\n                return this._handleEventMessage(msg);\n            case 4 /* UnsubscribeEvent */:\n                return this._handleUnsubscribeEventMessage(msg);\n        }\n    }\n    _handleReplyMessage(replyMessage) {\n        if (!this._pendingReplies[replyMessage.seq]) {\n            console.warn('Got reply to unknown seq');\n            return;\n        }\n        let reply = this._pendingReplies[replyMessage.seq];\n        delete this._pendingReplies[replyMessage.seq];\n        if (replyMessage.err) {\n            let err = replyMessage.err;\n            if (replyMessage.err.$isError) {\n                err = new Error();\n                err.name = replyMessage.err.name;\n                err.message = replyMessage.err.message;\n                err.stack = replyMessage.err.stack;\n            }\n            reply.reject(err);\n            return;\n        }\n        reply.resolve(replyMessage.res);\n    }\n    _handleRequestMessage(requestMessage) {\n        let req = requestMessage.req;\n        let result = this._handler.handleMessage(requestMessage.method, requestMessage.args);\n        result.then((r) => {\n            this._send(new ReplyMessage(this._workerId, req, r, undefined));\n        }, (e) => {\n            if (e.detail instanceof Error) {\n                // Loading errors have a detail property that points to the actual error\n                e.detail = transformErrorForSerialization(e.detail);\n            }\n            this._send(new ReplyMessage(this._workerId, req, undefined, transformErrorForSerialization(e)));\n        });\n    }\n    _handleSubscribeEventMessage(msg) {\n        const req = msg.req;\n        const disposable = this._handler.handleEvent(msg.eventName, msg.arg)((event) => {\n            this._send(new EventMessage(this._workerId, req, event));\n        });\n        this._pendingEvents.set(req, disposable);\n    }\n    _handleEventMessage(msg) {\n        if (!this._pendingEmitters.has(msg.req)) {\n            console.warn('Got event for unknown req');\n            return;\n        }\n        this._pendingEmitters.get(msg.req).fire(msg.event);\n    }\n    _handleUnsubscribeEventMessage(msg) {\n        if (!this._pendingEvents.has(msg.req)) {\n            console.warn('Got unsubscribe for unknown req');\n            return;\n        }\n        this._pendingEvents.get(msg.req).dispose();\n        this._pendingEvents.delete(msg.req);\n    }\n    _send(msg) {\n        let transfer = [];\n        if (msg.type === 0 /* Request */) {\n            for (let i = 0; i < msg.args.length; i++) {\n                if (msg.args[i] instanceof ArrayBuffer) {\n                    transfer.push(msg.args[i]);\n                }\n            }\n        }\n        else if (msg.type === 1 /* Reply */) {\n            if (msg.res instanceof ArrayBuffer) {\n                transfer.push(msg.res);\n            }\n        }\n        this._handler.sendMessage(msg, transfer);\n    }\n}\n/**\n * Main thread side\n */\nexport class SimpleWorkerClient extends Disposable {\n    constructor(workerFactory, moduleId, host) {\n        super();\n        let lazyProxyReject = null;\n        this._worker = this._register(workerFactory.create('vs/base/common/worker/simpleWorker', (msg) => {\n            this._protocol.handleMessage(msg);\n        }, (err) => {\n            // in Firefox, web workers fail lazily :(\n            // we will reject the proxy\n            if (lazyProxyReject) {\n                lazyProxyReject(err);\n            }\n        }));\n        this._protocol = new SimpleWorkerProtocol({\n            sendMessage: (msg, transfer) => {\n                this._worker.postMessage(msg, transfer);\n            },\n            handleMessage: (method, args) => {\n                if (typeof host[method] !== 'function') {\n                    return Promise.reject(new Error('Missing method ' + method + ' on main thread host.'));\n                }\n                try {\n                    return Promise.resolve(host[method].apply(host, args));\n                }\n                catch (e) {\n                    return Promise.reject(e);\n                }\n            },\n            handleEvent: (eventName, arg) => {\n                if (propertyIsDynamicEvent(eventName)) {\n                    const event = host[eventName].call(host, arg);\n                    if (typeof event !== 'function') {\n                        throw new Error(`Missing dynamic event ${eventName} on main thread host.`);\n                    }\n                    return event;\n                }\n                if (propertyIsEvent(eventName)) {\n                    const event = host[eventName];\n                    if (typeof event !== 'function') {\n                        throw new Error(`Missing event ${eventName} on main thread host.`);\n                    }\n                    return event;\n                }\n                throw new Error(`Malformed event name ${eventName}`);\n            }\n        });\n        this._protocol.setWorkerId(this._worker.getId());\n        // Gather loader configuration\n        let loaderConfiguration = null;\n        if (typeof globals.require !== 'undefined' && typeof globals.require.getConfig === 'function') {\n            // Get the configuration from the Monaco AMD Loader\n            loaderConfiguration = globals.require.getConfig();\n        }\n        else if (typeof globals.requirejs !== 'undefined') {\n            // Get the configuration from requirejs\n            loaderConfiguration = globals.requirejs.s.contexts._.config;\n        }\n        const hostMethods = types.getAllMethodNames(host);\n        // Send initialize message\n        this._onModuleLoaded = this._protocol.sendMessage(INITIALIZE, [\n            this._worker.getId(),\n            JSON.parse(JSON.stringify(loaderConfiguration)),\n            moduleId,\n            hostMethods,\n        ]);\n        // Create proxy to loaded code\n        const proxyMethodRequest = (method, args) => {\n            return this._request(method, args);\n        };\n        const proxyListen = (eventName, arg) => {\n            return this._protocol.listen(eventName, arg);\n        };\n        this._lazyProxy = new Promise((resolve, reject) => {\n            lazyProxyReject = reject;\n            this._onModuleLoaded.then((availableMethods) => {\n                resolve(createProxyObject(availableMethods, proxyMethodRequest, proxyListen));\n            }, (e) => {\n                reject(e);\n                this._onError('Worker failed to load ' + moduleId, e);\n            });\n        });\n    }\n    getProxyObject() {\n        return this._lazyProxy;\n    }\n    _request(method, args) {\n        return new Promise((resolve, reject) => {\n            this._onModuleLoaded.then(() => {\n                this._protocol.sendMessage(method, args).then(resolve, reject);\n            }, reject);\n        });\n    }\n    _onError(message, error) {\n        console.error(message);\n        console.info(error);\n    }\n}\nfunction propertyIsEvent(name) {\n    // Assume a property is an event if it has a form of \"onSomething\"\n    return name[0] === 'o' && name[1] === 'n' && strings.isUpperAsciiLetter(name.charCodeAt(2));\n}\nfunction propertyIsDynamicEvent(name) {\n    // Assume a property is a dynamic event (a method that returns an event) if it has a form of \"onDynamicSomething\"\n    return /^onDynamic/.test(name) && strings.isUpperAsciiLetter(name.charCodeAt(9));\n}\nfunction createProxyObject(methodNames, invoke, proxyListen) {\n    const createProxyMethod = (method) => {\n        return function () {\n            const args = Array.prototype.slice.call(arguments, 0);\n            return invoke(method, args);\n        };\n    };\n    const createProxyDynamicEvent = (eventName) => {\n        return function (arg) {\n            return proxyListen(eventName, arg);\n        };\n    };\n    let result = {};\n    for (const methodName of methodNames) {\n        if (propertyIsDynamicEvent(methodName)) {\n            result[methodName] = createProxyDynamicEvent(methodName);\n            continue;\n        }\n        if (propertyIsEvent(methodName)) {\n            result[methodName] = proxyListen(methodName, undefined);\n            continue;\n        }\n        result[methodName] = createProxyMethod(methodName);\n    }\n    return result;\n}\n/**\n * Worker side\n */\nexport class SimpleWorkerServer {\n    constructor(postMessage, requestHandlerFactory) {\n        this._requestHandlerFactory = requestHandlerFactory;\n        this._requestHandler = null;\n        this._protocol = new SimpleWorkerProtocol({\n            sendMessage: (msg, transfer) => {\n                postMessage(msg, transfer);\n            },\n            handleMessage: (method, args) => this._handleMessage(method, args),\n            handleEvent: (eventName, arg) => this._handleEvent(eventName, arg)\n        });\n    }\n    onmessage(msg) {\n        this._protocol.handleMessage(msg);\n    }\n    _handleMessage(method, args) {\n        if (method === INITIALIZE) {\n            return this.initialize(args[0], args[1], args[2], args[3]);\n        }\n        if (!this._requestHandler || typeof this._requestHandler[method] !== 'function') {\n            return Promise.reject(new Error('Missing requestHandler or method: ' + method));\n        }\n        try {\n            return Promise.resolve(this._requestHandler[method].apply(this._requestHandler, args));\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    _handleEvent(eventName, arg) {\n        if (!this._requestHandler) {\n            throw new Error(`Missing requestHandler`);\n        }\n        if (propertyIsDynamicEvent(eventName)) {\n            const event = this._requestHandler[eventName].call(this._requestHandler, arg);\n            if (typeof event !== 'function') {\n                throw new Error(`Missing dynamic event ${eventName} on request handler.`);\n            }\n            return event;\n        }\n        if (propertyIsEvent(eventName)) {\n            const event = this._requestHandler[eventName];\n            if (typeof event !== 'function') {\n                throw new Error(`Missing event ${eventName} on request handler.`);\n            }\n            return event;\n        }\n        throw new Error(`Malformed event name ${eventName}`);\n    }\n    initialize(workerId, loaderConfig, moduleId, hostMethods) {\n        this._protocol.setWorkerId(workerId);\n        const proxyMethodRequest = (method, args) => {\n            return this._protocol.sendMessage(method, args);\n        };\n        const proxyListen = (eventName, arg) => {\n            return this._protocol.listen(eventName, arg);\n        };\n        const hostProxy = createProxyObject(hostMethods, proxyMethodRequest, proxyListen);\n        if (this._requestHandlerFactory) {\n            // static request handler\n            this._requestHandler = this._requestHandlerFactory(hostProxy);\n            return Promise.resolve(types.getAllMethodNames(this._requestHandler));\n        }\n        if (loaderConfig) {\n            // Remove 'baseUrl', handling it is beyond scope for now\n            if (typeof loaderConfig.baseUrl !== 'undefined') {\n                delete loaderConfig['baseUrl'];\n            }\n            if (typeof loaderConfig.paths !== 'undefined') {\n                if (typeof loaderConfig.paths.vs !== 'undefined') {\n                    delete loaderConfig.paths['vs'];\n                }\n            }\n            if (typeof loaderConfig.trustedTypesPolicy !== undefined) {\n                // don't use, it has been destroyed during serialize\n                delete loaderConfig['trustedTypesPolicy'];\n            }\n            // Since this is in a web worker, enable catching errors\n            loaderConfig.catchError = true;\n            globals.require.config(loaderConfig);\n        }\n        return new Promise((resolve, reject) => {\n            // Use the global require to be sure to get the global config\n            // ESM-comment-begin\n            // \t\t\tconst req = (globals.require || require);\n            // ESM-comment-end\n            // ESM-uncomment-begin\n            const req = globals.require;\n            // ESM-uncomment-end\n            req([moduleId], (module) => {\n                this._requestHandler = module.create(hostProxy);\n                if (!this._requestHandler) {\n                    reject(new Error(`No RequestHandler!`));\n                    return;\n                }\n                resolve(types.getAllMethodNames(this._requestHandler));\n            }, reject);\n        });\n    }\n}\n/**\n * Called on the worker side\n */\nexport function create(postMessage) {\n    return new SimpleWorkerServer(postMessage, null);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../browser/dom.js';\nimport { IdGenerator } from '../../../common/idGenerator.js';\nimport './media/quickInput.css';\nconst iconPathToClass = {};\nconst iconClassGenerator = new IdGenerator('quick-input-button-icon-');\nexport function getIconClass(iconPath) {\n    if (!iconPath) {\n        return undefined;\n    }\n    let iconClass;\n    const key = iconPath.dark.toString();\n    if (iconPathToClass[key]) {\n        iconClass = iconPathToClass[key];\n    }\n    else {\n        iconClass = iconClassGenerator.nextId();\n        dom.createCSSRule(`.${iconClass}`, `background-image: ${dom.asCSSUrl(iconPath.light || iconPath.dark)}`);\n        dom.createCSSRule(`.vs-dark .${iconClass}, .hc-black .${iconClass}`, `background-image: ${dom.asCSSUrl(iconPath.dark)}`);\n        iconPathToClass[key] = iconClass;\n    }\n    return iconClass;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../browser/keyboardEvent.js';\nimport { StandardMouseEvent } from '../../../browser/mouseEvent.js';\nimport { InputBox } from '../../../browser/ui/inputbox/inputBox.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport Severity from '../../../common/severity.js';\nimport './media/quickInput.css';\nconst $ = dom.$;\nexport class QuickInputBox extends Disposable {\n    constructor(parent) {\n        super();\n        this.parent = parent;\n        this.onKeyDown = (handler) => {\n            return dom.addDisposableListener(this.inputBox.inputElement, dom.EventType.KEY_DOWN, (e) => {\n                handler(new StandardKeyboardEvent(e));\n            });\n        };\n        this.onMouseDown = (handler) => {\n            return dom.addDisposableListener(this.inputBox.inputElement, dom.EventType.MOUSE_DOWN, (e) => {\n                handler(new StandardMouseEvent(e));\n            });\n        };\n        this.onDidChange = (handler) => {\n            return this.inputBox.onDidChange(handler);\n        };\n        this.container = dom.append(this.parent, $('.quick-input-box'));\n        this.inputBox = this._register(new InputBox(this.container, undefined));\n    }\n    get value() {\n        return this.inputBox.value;\n    }\n    set value(value) {\n        this.inputBox.value = value;\n    }\n    select(range = null) {\n        this.inputBox.select(range);\n    }\n    isSelectionAtEnd() {\n        return this.inputBox.isSelectionAtEnd();\n    }\n    get placeholder() {\n        return this.inputBox.inputElement.getAttribute('placeholder') || '';\n    }\n    set placeholder(placeholder) {\n        this.inputBox.setPlaceHolder(placeholder);\n    }\n    get ariaLabel() {\n        return this.inputBox.getAriaLabel();\n    }\n    set ariaLabel(ariaLabel) {\n        this.inputBox.setAriaLabel(ariaLabel);\n    }\n    get password() {\n        return this.inputBox.inputElement.type === 'password';\n    }\n    set password(password) {\n        this.inputBox.inputElement.type = password ? 'password' : 'text';\n    }\n    setAttribute(name, value) {\n        this.inputBox.inputElement.setAttribute(name, value);\n    }\n    removeAttribute(name) {\n        this.inputBox.inputElement.removeAttribute(name);\n    }\n    showDecoration(decoration) {\n        if (decoration === Severity.Ignore) {\n            this.inputBox.hideMessage();\n        }\n        else {\n            this.inputBox.showMessage({ type: decoration === Severity.Info ? 1 /* INFO */ : decoration === Severity.Warning ? 2 /* WARNING */ : 3 /* ERROR */, content: '' });\n        }\n    }\n    stylesForType(decoration) {\n        return this.inputBox.stylesForType(decoration === Severity.Info ? 1 /* INFO */ : decoration === Severity.Warning ? 2 /* WARNING */ : 3 /* ERROR */);\n    }\n    setFocus() {\n        this.inputBox.focus();\n    }\n    layout() {\n        this.inputBox.layout();\n    }\n    style(styles) {\n        this.inputBox.style(styles);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../browser/keyboardEvent.js';\nimport { ActionBar } from '../../../browser/ui/actionbar/actionbar.js';\nimport { IconLabel } from '../../../browser/ui/iconLabel/iconLabel.js';\nimport { KeybindingLabel } from '../../../browser/ui/keybindingLabel/keybindingLabel.js';\nimport { Action } from '../../../common/actions.js';\nimport { range } from '../../../common/arrays.js';\nimport { getCodiconAriaLabel } from '../../../common/codicons.js';\nimport { compareAnything } from '../../../common/comparers.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { matchesFuzzyIconAware, parseLabelWithIcons } from '../../../common/iconLabels.js';\nimport { dispose } from '../../../common/lifecycle.js';\nimport * as platform from '../../../common/platform.js';\nimport { withNullAsUndefined } from '../../../common/types.js';\nimport { getIconClass } from './quickInputUtils.js';\nimport './media/quickInput.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nclass ListElement {\n    constructor(init) {\n        this.hidden = false;\n        this._onChecked = new Emitter();\n        this.onChecked = this._onChecked.event;\n        Object.assign(this, init);\n    }\n    get checked() {\n        return !!this._checked;\n    }\n    set checked(value) {\n        if (value !== this._checked) {\n            this._checked = value;\n            this._onChecked.fire(value);\n        }\n    }\n    dispose() {\n        this._onChecked.dispose();\n    }\n}\nclass ListElementRenderer {\n    get templateId() {\n        return ListElementRenderer.ID;\n    }\n    renderTemplate(container) {\n        const data = Object.create(null);\n        data.toDisposeElement = [];\n        data.toDisposeTemplate = [];\n        data.entry = dom.append(container, $('.quick-input-list-entry'));\n        // Checkbox\n        const label = dom.append(data.entry, $('label.quick-input-list-label'));\n        data.toDisposeTemplate.push(dom.addStandardDisposableListener(label, dom.EventType.CLICK, e => {\n            if (!data.checkbox.offsetParent) { // If checkbox not visible:\n                e.preventDefault(); // Prevent toggle of checkbox when it is immediately shown afterwards. #91740\n            }\n        }));\n        data.checkbox = dom.append(label, $('input.quick-input-list-checkbox'));\n        data.checkbox.type = 'checkbox';\n        data.toDisposeTemplate.push(dom.addStandardDisposableListener(data.checkbox, dom.EventType.CHANGE, e => {\n            data.element.checked = data.checkbox.checked;\n        }));\n        // Rows\n        const rows = dom.append(label, $('.quick-input-list-rows'));\n        const row1 = dom.append(rows, $('.quick-input-list-row'));\n        const row2 = dom.append(rows, $('.quick-input-list-row'));\n        // Label\n        data.label = new IconLabel(row1, { supportHighlights: true, supportDescriptionHighlights: true, supportIcons: true });\n        // Keybinding\n        const keybindingContainer = dom.append(row1, $('.quick-input-list-entry-keybinding'));\n        data.keybinding = new KeybindingLabel(keybindingContainer, platform.OS);\n        // Detail\n        const detailContainer = dom.append(row2, $('.quick-input-list-label-meta'));\n        data.detail = new IconLabel(detailContainer, { supportHighlights: true, supportIcons: true });\n        // Separator\n        data.separator = dom.append(data.entry, $('.quick-input-list-separator'));\n        // Actions\n        data.actionBar = new ActionBar(data.entry);\n        data.actionBar.domNode.classList.add('quick-input-list-entry-action-bar');\n        data.toDisposeTemplate.push(data.actionBar);\n        return data;\n    }\n    renderElement(element, index, data) {\n        data.toDisposeElement = dispose(data.toDisposeElement);\n        data.element = element;\n        data.checkbox.checked = element.checked;\n        data.toDisposeElement.push(element.onChecked(checked => data.checkbox.checked = checked));\n        const { labelHighlights, descriptionHighlights, detailHighlights } = element;\n        // Label\n        const options = Object.create(null);\n        options.matches = labelHighlights || [];\n        options.descriptionTitle = element.saneDescription;\n        options.descriptionMatches = descriptionHighlights || [];\n        options.extraClasses = element.item.iconClasses;\n        options.italic = element.item.italic;\n        options.strikethrough = element.item.strikethrough;\n        data.label.setLabel(element.saneLabel, element.saneDescription, options);\n        // Keybinding\n        data.keybinding.set(element.item.keybinding);\n        // Meta\n        if (element.saneDetail) {\n            data.detail.setLabel(element.saneDetail, undefined, {\n                matches: detailHighlights,\n                title: element.saneDetail\n            });\n        }\n        // Separator\n        if (element.separator && element.separator.label) {\n            data.separator.textContent = element.separator.label;\n            data.separator.style.display = '';\n        }\n        else {\n            data.separator.style.display = 'none';\n        }\n        data.entry.classList.toggle('quick-input-list-separator-border', !!element.separator);\n        // Actions\n        data.actionBar.clear();\n        const buttons = element.item.buttons;\n        if (buttons && buttons.length) {\n            data.actionBar.push(buttons.map((button, index) => {\n                let cssClasses = button.iconClass || (button.iconPath ? getIconClass(button.iconPath) : undefined);\n                if (button.alwaysVisible) {\n                    cssClasses = cssClasses ? `${cssClasses} always-visible` : 'always-visible';\n                }\n                const action = new Action(`id-${index}`, '', cssClasses, true, () => __awaiter(this, void 0, void 0, function* () {\n                    element.fireButtonTriggered({\n                        button,\n                        item: element.item\n                    });\n                }));\n                action.tooltip = button.tooltip || '';\n                return action;\n            }), { icon: true, label: false });\n            data.entry.classList.add('has-actions');\n        }\n        else {\n            data.entry.classList.remove('has-actions');\n        }\n    }\n    disposeElement(element, index, data) {\n        data.toDisposeElement = dispose(data.toDisposeElement);\n    }\n    disposeTemplate(data) {\n        data.toDisposeElement = dispose(data.toDisposeElement);\n        data.toDisposeTemplate = dispose(data.toDisposeTemplate);\n    }\n}\nListElementRenderer.ID = 'listelement';\nclass ListElementDelegate {\n    getHeight(element) {\n        return element.saneDetail ? 44 : 22;\n    }\n    getTemplateId(element) {\n        return ListElementRenderer.ID;\n    }\n}\nexport var QuickInputListFocus;\n(function (QuickInputListFocus) {\n    QuickInputListFocus[QuickInputListFocus[\"First\"] = 1] = \"First\";\n    QuickInputListFocus[QuickInputListFocus[\"Second\"] = 2] = \"Second\";\n    QuickInputListFocus[QuickInputListFocus[\"Last\"] = 3] = \"Last\";\n    QuickInputListFocus[QuickInputListFocus[\"Next\"] = 4] = \"Next\";\n    QuickInputListFocus[QuickInputListFocus[\"Previous\"] = 5] = \"Previous\";\n    QuickInputListFocus[QuickInputListFocus[\"NextPage\"] = 6] = \"NextPage\";\n    QuickInputListFocus[QuickInputListFocus[\"PreviousPage\"] = 7] = \"PreviousPage\";\n})(QuickInputListFocus || (QuickInputListFocus = {}));\nexport class QuickInputList {\n    constructor(parent, id, options) {\n        this.parent = parent;\n        this.inputElements = [];\n        this.elements = [];\n        this.elementsToIndexes = new Map();\n        this.matchOnDescription = false;\n        this.matchOnDetail = false;\n        this.matchOnLabel = true;\n        this.matchOnMeta = true;\n        this.sortByLabel = true;\n        this._onChangedAllVisibleChecked = new Emitter();\n        this.onChangedAllVisibleChecked = this._onChangedAllVisibleChecked.event;\n        this._onChangedCheckedCount = new Emitter();\n        this.onChangedCheckedCount = this._onChangedCheckedCount.event;\n        this._onChangedVisibleCount = new Emitter();\n        this.onChangedVisibleCount = this._onChangedVisibleCount.event;\n        this._onChangedCheckedElements = new Emitter();\n        this.onChangedCheckedElements = this._onChangedCheckedElements.event;\n        this._onButtonTriggered = new Emitter();\n        this.onButtonTriggered = this._onButtonTriggered.event;\n        this._onKeyDown = new Emitter();\n        this.onKeyDown = this._onKeyDown.event;\n        this._onLeave = new Emitter();\n        this.onLeave = this._onLeave.event;\n        this._fireCheckedEvents = true;\n        this.elementDisposables = [];\n        this.disposables = [];\n        this.id = id;\n        this.container = dom.append(this.parent, $('.quick-input-list'));\n        const delegate = new ListElementDelegate();\n        const accessibilityProvider = new QuickInputAccessibilityProvider();\n        this.list = options.createList('QuickInput', this.container, delegate, [new ListElementRenderer()], {\n            identityProvider: { getId: element => element.saneLabel },\n            setRowLineHeight: false,\n            multipleSelectionSupport: false,\n            horizontalScrolling: false,\n            accessibilityProvider\n        });\n        this.list.getHTMLElement().id = id;\n        this.disposables.push(this.list);\n        this.disposables.push(this.list.onKeyDown(e => {\n            const event = new StandardKeyboardEvent(e);\n            switch (event.keyCode) {\n                case 10 /* Space */:\n                    this.toggleCheckbox();\n                    break;\n                case 31 /* KeyA */:\n                    if (platform.isMacintosh ? e.metaKey : e.ctrlKey) {\n                        this.list.setFocus(range(this.list.length));\n                    }\n                    break;\n                case 16 /* UpArrow */: {\n                    const focus1 = this.list.getFocus();\n                    if (focus1.length === 1 && focus1[0] === 0) {\n                        this._onLeave.fire();\n                    }\n                    break;\n                }\n                case 18 /* DownArrow */: {\n                    const focus2 = this.list.getFocus();\n                    if (focus2.length === 1 && focus2[0] === this.list.length - 1) {\n                        this._onLeave.fire();\n                    }\n                    break;\n                }\n            }\n            this._onKeyDown.fire(event);\n        }));\n        this.disposables.push(this.list.onMouseDown(e => {\n            if (e.browserEvent.button !== 2) {\n                // Works around / fixes #64350.\n                e.browserEvent.preventDefault();\n            }\n        }));\n        this.disposables.push(dom.addDisposableListener(this.container, dom.EventType.CLICK, e => {\n            if (e.x || e.y) { // Avoid 'click' triggered by 'space' on checkbox.\n                this._onLeave.fire();\n            }\n        }));\n        this.disposables.push(this.list.onMouseMiddleClick(e => {\n            this._onLeave.fire();\n        }));\n        this.disposables.push(this.list.onContextMenu(e => {\n            if (typeof e.index === 'number') {\n                e.browserEvent.preventDefault();\n                // we want to treat a context menu event as\n                // a gesture to open the item at the index\n                // since we do not have any context menu\n                // this enables for example macOS to Ctrl-\n                // click on an item to open it.\n                this.list.setSelection([e.index]);\n            }\n        }));\n        this.disposables.push(this._onChangedAllVisibleChecked, this._onChangedCheckedCount, this._onChangedVisibleCount, this._onChangedCheckedElements, this._onButtonTriggered, this._onLeave, this._onKeyDown);\n    }\n    get onDidChangeFocus() {\n        return Event.map(this.list.onDidChangeFocus, e => e.elements.map(e => e.item));\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.list.onDidChangeSelection, e => ({ items: e.elements.map(e => e.item), event: e.browserEvent }));\n    }\n    get scrollTop() {\n        return this.list.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.list.scrollTop = scrollTop;\n    }\n    getAllVisibleChecked() {\n        return this.allVisibleChecked(this.elements, false);\n    }\n    allVisibleChecked(elements, whenNoneVisible = true) {\n        for (let i = 0, n = elements.length; i < n; i++) {\n            const element = elements[i];\n            if (!element.hidden) {\n                if (!element.checked) {\n                    return false;\n                }\n                else {\n                    whenNoneVisible = true;\n                }\n            }\n        }\n        return whenNoneVisible;\n    }\n    getCheckedCount() {\n        let count = 0;\n        const elements = this.elements;\n        for (let i = 0, n = elements.length; i < n; i++) {\n            if (elements[i].checked) {\n                count++;\n            }\n        }\n        return count;\n    }\n    getVisibleCount() {\n        let count = 0;\n        const elements = this.elements;\n        for (let i = 0, n = elements.length; i < n; i++) {\n            if (!elements[i].hidden) {\n                count++;\n            }\n        }\n        return count;\n    }\n    setAllVisibleChecked(checked) {\n        try {\n            this._fireCheckedEvents = false;\n            this.elements.forEach(element => {\n                if (!element.hidden) {\n                    element.checked = checked;\n                }\n            });\n        }\n        finally {\n            this._fireCheckedEvents = true;\n            this.fireCheckedEvents();\n        }\n    }\n    setElements(inputElements) {\n        this.elementDisposables = dispose(this.elementDisposables);\n        const fireButtonTriggered = (event) => this.fireButtonTriggered(event);\n        this.inputElements = inputElements;\n        this.elements = inputElements.reduce((result, item, index) => {\n            var _a, _b, _c;\n            if (item.type !== 'separator') {\n                const previous = index && inputElements[index - 1];\n                const saneLabel = item.label && item.label.replace(/\\r?\\n/g, ' ');\n                const saneMeta = item.meta && item.meta.replace(/\\r?\\n/g, ' ');\n                const saneDescription = item.description && item.description.replace(/\\r?\\n/g, ' ');\n                const saneDetail = item.detail && item.detail.replace(/\\r?\\n/g, ' ');\n                const saneAriaLabel = item.ariaLabel || [saneLabel, saneDescription, saneDetail]\n                    .map(s => getCodiconAriaLabel(s))\n                    .filter(s => !!s)\n                    .join(', ');\n                const hasCheckbox = this.parent.classList.contains('show-checkboxes');\n                result.push(new ListElement({\n                    hasCheckbox,\n                    index,\n                    item,\n                    saneLabel,\n                    saneMeta,\n                    saneAriaLabel,\n                    saneDescription,\n                    saneDetail,\n                    labelHighlights: (_a = item.highlights) === null || _a === void 0 ? void 0 : _a.label,\n                    descriptionHighlights: (_b = item.highlights) === null || _b === void 0 ? void 0 : _b.description,\n                    detailHighlights: (_c = item.highlights) === null || _c === void 0 ? void 0 : _c.detail,\n                    checked: false,\n                    separator: previous && previous.type === 'separator' ? previous : undefined,\n                    fireButtonTriggered\n                }));\n            }\n            return result;\n        }, []);\n        this.elementDisposables.push(...this.elements);\n        this.elementDisposables.push(...this.elements.map(element => element.onChecked(() => this.fireCheckedEvents())));\n        this.elementsToIndexes = this.elements.reduce((map, element, index) => {\n            map.set(element.item, index);\n            return map;\n        }, new Map());\n        this.list.splice(0, this.list.length); // Clear focus and selection first, sending the events when the list is empty.\n        this.list.splice(0, this.list.length, this.elements);\n        this._onChangedVisibleCount.fire(this.elements.length);\n    }\n    getFocusedElements() {\n        return this.list.getFocusedElements()\n            .map(e => e.item);\n    }\n    setFocusedElements(items) {\n        this.list.setFocus(items\n            .filter(item => this.elementsToIndexes.has(item))\n            .map(item => this.elementsToIndexes.get(item)));\n        if (items.length > 0) {\n            const focused = this.list.getFocus()[0];\n            if (typeof focused === 'number') {\n                this.list.reveal(focused);\n            }\n        }\n    }\n    getActiveDescendant() {\n        return this.list.getHTMLElement().getAttribute('aria-activedescendant');\n    }\n    setSelectedElements(items) {\n        this.list.setSelection(items\n            .filter(item => this.elementsToIndexes.has(item))\n            .map(item => this.elementsToIndexes.get(item)));\n    }\n    getCheckedElements() {\n        return this.elements.filter(e => e.checked)\n            .map(e => e.item);\n    }\n    setCheckedElements(items) {\n        try {\n            this._fireCheckedEvents = false;\n            const checked = new Set();\n            for (const item of items) {\n                checked.add(item);\n            }\n            for (const element of this.elements) {\n                element.checked = checked.has(element.item);\n            }\n        }\n        finally {\n            this._fireCheckedEvents = true;\n            this.fireCheckedEvents();\n        }\n    }\n    set enabled(value) {\n        this.list.getHTMLElement().style.pointerEvents = value ? '' : 'none';\n    }\n    focus(what) {\n        if (!this.list.length) {\n            return;\n        }\n        if (what === QuickInputListFocus.Next && this.list.getFocus()[0] === this.list.length - 1) {\n            what = QuickInputListFocus.First;\n        }\n        if (what === QuickInputListFocus.Previous && this.list.getFocus()[0] === 0) {\n            what = QuickInputListFocus.Last;\n        }\n        if (what === QuickInputListFocus.Second && this.list.length < 2) {\n            what = QuickInputListFocus.First;\n        }\n        switch (what) {\n            case QuickInputListFocus.First:\n                this.list.focusFirst();\n                break;\n            case QuickInputListFocus.Second:\n                this.list.focusNth(1);\n                break;\n            case QuickInputListFocus.Last:\n                this.list.focusLast();\n                break;\n            case QuickInputListFocus.Next:\n                this.list.focusNext();\n                break;\n            case QuickInputListFocus.Previous:\n                this.list.focusPrevious();\n                break;\n            case QuickInputListFocus.NextPage:\n                this.list.focusNextPage();\n                break;\n            case QuickInputListFocus.PreviousPage:\n                this.list.focusPreviousPage();\n                break;\n        }\n        const focused = this.list.getFocus()[0];\n        if (typeof focused === 'number') {\n            this.list.reveal(focused);\n        }\n    }\n    clearFocus() {\n        this.list.setFocus([]);\n    }\n    domFocus() {\n        this.list.domFocus();\n    }\n    layout(maxHeight) {\n        this.list.getHTMLElement().style.maxHeight = maxHeight ? `calc(${Math.floor(maxHeight / 44) * 44}px)` : '';\n        this.list.layout();\n    }\n    filter(query) {\n        if (!(this.sortByLabel || this.matchOnLabel || this.matchOnDescription || this.matchOnDetail)) {\n            this.list.layout();\n            return false;\n        }\n        query = query.trim();\n        // Reset filtering\n        if (!query || !(this.matchOnLabel || this.matchOnDescription || this.matchOnDetail)) {\n            this.elements.forEach(element => {\n                element.labelHighlights = undefined;\n                element.descriptionHighlights = undefined;\n                element.detailHighlights = undefined;\n                element.hidden = false;\n                const previous = element.index && this.inputElements[element.index - 1];\n                element.separator = previous && previous.type === 'separator' ? previous : undefined;\n            });\n        }\n        // Filter by value (since we support icons in labels, use $(..) aware fuzzy matching)\n        else {\n            let currentSeparator;\n            this.elements.forEach(element => {\n                const labelHighlights = this.matchOnLabel ? withNullAsUndefined(matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneLabel))) : undefined;\n                const descriptionHighlights = this.matchOnDescription ? withNullAsUndefined(matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDescription || ''))) : undefined;\n                const detailHighlights = this.matchOnDetail ? withNullAsUndefined(matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneDetail || ''))) : undefined;\n                const metaHighlights = this.matchOnMeta ? withNullAsUndefined(matchesFuzzyIconAware(query, parseLabelWithIcons(element.saneMeta || ''))) : undefined;\n                if (labelHighlights || descriptionHighlights || detailHighlights || metaHighlights) {\n                    element.labelHighlights = labelHighlights;\n                    element.descriptionHighlights = descriptionHighlights;\n                    element.detailHighlights = detailHighlights;\n                    element.hidden = false;\n                }\n                else {\n                    element.labelHighlights = undefined;\n                    element.descriptionHighlights = undefined;\n                    element.detailHighlights = undefined;\n                    element.hidden = !element.item.alwaysShow;\n                }\n                element.separator = undefined;\n                // we can show the separator unless the list gets sorted by match\n                if (!this.sortByLabel) {\n                    const previous = element.index && this.inputElements[element.index - 1];\n                    currentSeparator = previous && previous.type === 'separator' ? previous : currentSeparator;\n                    if (currentSeparator && !element.hidden) {\n                        element.separator = currentSeparator;\n                        currentSeparator = undefined;\n                    }\n                }\n            });\n        }\n        const shownElements = this.elements.filter(element => !element.hidden);\n        // Sort by value\n        if (this.sortByLabel && query) {\n            const normalizedSearchValue = query.toLowerCase();\n            shownElements.sort((a, b) => {\n                return compareEntries(a, b, normalizedSearchValue);\n            });\n        }\n        this.elementsToIndexes = shownElements.reduce((map, element, index) => {\n            map.set(element.item, index);\n            return map;\n        }, new Map());\n        this.list.splice(0, this.list.length, shownElements);\n        this.list.setFocus([]);\n        this.list.layout();\n        this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked());\n        this._onChangedVisibleCount.fire(shownElements.length);\n        return true;\n    }\n    toggleCheckbox() {\n        try {\n            this._fireCheckedEvents = false;\n            const elements = this.list.getFocusedElements();\n            const allChecked = this.allVisibleChecked(elements);\n            for (const element of elements) {\n                element.checked = !allChecked;\n            }\n        }\n        finally {\n            this._fireCheckedEvents = true;\n            this.fireCheckedEvents();\n        }\n    }\n    display(display) {\n        this.container.style.display = display ? '' : 'none';\n    }\n    isDisplayed() {\n        return this.container.style.display !== 'none';\n    }\n    dispose() {\n        this.elementDisposables = dispose(this.elementDisposables);\n        this.disposables = dispose(this.disposables);\n    }\n    fireCheckedEvents() {\n        if (this._fireCheckedEvents) {\n            this._onChangedAllVisibleChecked.fire(this.getAllVisibleChecked());\n            this._onChangedCheckedCount.fire(this.getCheckedCount());\n            this._onChangedCheckedElements.fire(this.getCheckedElements());\n        }\n    }\n    fireButtonTriggered(event) {\n        this._onButtonTriggered.fire(event);\n    }\n    style(styles) {\n        this.list.style(styles);\n    }\n}\n__decorate([\n    memoize\n], QuickInputList.prototype, \"onDidChangeFocus\", null);\n__decorate([\n    memoize\n], QuickInputList.prototype, \"onDidChangeSelection\", null);\nfunction compareEntries(elementA, elementB, lookFor) {\n    const labelHighlightsA = elementA.labelHighlights || [];\n    const labelHighlightsB = elementB.labelHighlights || [];\n    if (labelHighlightsA.length && !labelHighlightsB.length) {\n        return -1;\n    }\n    if (!labelHighlightsA.length && labelHighlightsB.length) {\n        return 1;\n    }\n    if (labelHighlightsA.length === 0 && labelHighlightsB.length === 0) {\n        return 0;\n    }\n    return compareAnything(elementA.saneLabel, elementB.saneLabel, lookFor);\n}\nclass QuickInputAccessibilityProvider {\n    getWidgetAriaLabel() {\n        return localize('quickInput', \"Quick Input\");\n    }\n    getAriaLabel(element) {\n        return element.saneAriaLabel;\n    }\n    getWidgetRole() {\n        return 'listbox';\n    }\n    getRole(element) {\n        return element.hasCheckbox ? 'checkbox' : 'option';\n    }\n    isChecked(element) {\n        if (!element.hasCheckbox) {\n            return undefined;\n        }\n        return {\n            value: element.checked,\n            onDidChange: element.onChecked\n        };\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../browser/keyboardEvent.js';\nimport { ActionBar } from '../../../browser/ui/actionbar/actionbar.js';\nimport { Button } from '../../../browser/ui/button/button.js';\nimport { CountBadge } from '../../../browser/ui/countBadge/countBadge.js';\nimport { renderLabelWithIcons } from '../../../browser/ui/iconLabel/iconLabels.js';\nimport { ProgressBar } from '../../../browser/ui/progressbar/progressbar.js';\nimport { Action } from '../../../common/actions.js';\nimport { equals } from '../../../common/arrays.js';\nimport { TimeoutTimer } from '../../../common/async.js';\nimport { CancellationToken } from '../../../common/cancellation.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { Emitter } from '../../../common/event.js';\nimport { Disposable, DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { isIOS } from '../../../common/platform.js';\nimport Severity from '../../../common/severity.js';\nimport { withNullAsUndefined } from '../../../common/types.js';\nimport { getIconClass } from './quickInputUtils.js';\nimport { ItemActivation, NO_KEY_MODS, QuickInputHideReason } from '../common/quickInput.js';\nimport './media/quickInput.css';\nimport { localize } from '../../../../nls.js';\nimport { QuickInputBox } from './quickInputBox.js';\nimport { QuickInputList, QuickInputListFocus } from './quickInputList.js';\nconst $ = dom.$;\nconst backButton = {\n    iconClass: Codicon.quickInputBack.classNames,\n    tooltip: localize('quickInput.back', \"Back\"),\n    handle: -1 // TODO\n};\nclass QuickInput extends Disposable {\n    constructor(ui) {\n        super();\n        this.ui = ui;\n        this.visible = false;\n        this._enabled = true;\n        this._busy = false;\n        this._ignoreFocusOut = false;\n        this._buttons = [];\n        this.noValidationMessage = QuickInput.noPromptMessage;\n        this._severity = Severity.Ignore;\n        this.buttonsUpdated = false;\n        this.onDidTriggerButtonEmitter = this._register(new Emitter());\n        this.onDidHideEmitter = this._register(new Emitter());\n        this.onDisposeEmitter = this._register(new Emitter());\n        this.visibleDisposables = this._register(new DisposableStore());\n        this.onDidHide = this.onDidHideEmitter.event;\n    }\n    get title() {\n        return this._title;\n    }\n    set title(title) {\n        this._title = title;\n        this.update();\n    }\n    get description() {\n        return this._description;\n    }\n    set description(description) {\n        this._description = description;\n        this.update();\n    }\n    get step() {\n        return this._steps;\n    }\n    set step(step) {\n        this._steps = step;\n        this.update();\n    }\n    get totalSteps() {\n        return this._totalSteps;\n    }\n    set totalSteps(totalSteps) {\n        this._totalSteps = totalSteps;\n        this.update();\n    }\n    get enabled() {\n        return this._enabled;\n    }\n    set enabled(enabled) {\n        this._enabled = enabled;\n        this.update();\n    }\n    get contextKey() {\n        return this._contextKey;\n    }\n    set contextKey(contextKey) {\n        this._contextKey = contextKey;\n        this.update();\n    }\n    get busy() {\n        return this._busy;\n    }\n    set busy(busy) {\n        this._busy = busy;\n        this.update();\n    }\n    get ignoreFocusOut() {\n        return this._ignoreFocusOut;\n    }\n    set ignoreFocusOut(ignoreFocusOut) {\n        const shouldUpdate = this._ignoreFocusOut !== ignoreFocusOut && !isIOS;\n        this._ignoreFocusOut = ignoreFocusOut && !isIOS;\n        if (shouldUpdate) {\n            this.update();\n        }\n    }\n    get buttons() {\n        return this._buttons;\n    }\n    set buttons(buttons) {\n        this._buttons = buttons;\n        this.buttonsUpdated = true;\n        this.update();\n    }\n    get validationMessage() {\n        return this._validationMessage;\n    }\n    set validationMessage(validationMessage) {\n        this._validationMessage = validationMessage;\n        this.update();\n    }\n    get severity() {\n        return this._severity;\n    }\n    set severity(severity) {\n        this._severity = severity;\n        this.update();\n    }\n    show() {\n        if (this.visible) {\n            return;\n        }\n        this.visibleDisposables.add(this.ui.onDidTriggerButton(button => {\n            if (this.buttons.indexOf(button) !== -1) {\n                this.onDidTriggerButtonEmitter.fire(button);\n            }\n        }));\n        this.ui.show(this);\n        // update properties in the controller that get reset in the ui.show() call\n        this.visible = true;\n        // This ensures the message/prompt gets rendered\n        this._lastValidationMessage = undefined;\n        // This ensures the input box has the right severity applied\n        this._lastSeverity = undefined;\n        if (this.buttons.length) {\n            // if there are buttons, the ui.show() clears them out of the UI so we should\n            // rerender them.\n            this.buttonsUpdated = true;\n        }\n        this.update();\n    }\n    hide() {\n        if (!this.visible) {\n            return;\n        }\n        this.ui.hide();\n    }\n    didHide(reason = QuickInputHideReason.Other) {\n        this.visible = false;\n        this.visibleDisposables.clear();\n        this.onDidHideEmitter.fire({ reason });\n    }\n    update() {\n        if (!this.visible) {\n            return;\n        }\n        const title = this.getTitle();\n        if (title && this.ui.title.textContent !== title) {\n            this.ui.title.textContent = title;\n        }\n        else if (!title && this.ui.title.innerHTML !== '&nbsp;') {\n            this.ui.title.innerText = '\\u00a0';\n        }\n        const description = this.getDescription();\n        if (this.ui.description1.textContent !== description) {\n            this.ui.description1.textContent = description;\n        }\n        if (this.ui.description2.textContent !== description) {\n            this.ui.description2.textContent = description;\n        }\n        if (this.busy && !this.busyDelay) {\n            this.busyDelay = new TimeoutTimer();\n            this.busyDelay.setIfNotSet(() => {\n                if (this.visible) {\n                    this.ui.progressBar.infinite();\n                }\n            }, 800);\n        }\n        if (!this.busy && this.busyDelay) {\n            this.ui.progressBar.stop();\n            this.busyDelay.cancel();\n            this.busyDelay = undefined;\n        }\n        if (this.buttonsUpdated) {\n            this.buttonsUpdated = false;\n            this.ui.leftActionBar.clear();\n            const leftButtons = this.buttons.filter(button => button === backButton);\n            this.ui.leftActionBar.push(leftButtons.map((button, index) => {\n                const action = new Action(`id-${index}`, '', button.iconClass || getIconClass(button.iconPath), true, () => __awaiter(this, void 0, void 0, function* () {\n                    this.onDidTriggerButtonEmitter.fire(button);\n                }));\n                action.tooltip = button.tooltip || '';\n                return action;\n            }), { icon: true, label: false });\n            this.ui.rightActionBar.clear();\n            const rightButtons = this.buttons.filter(button => button !== backButton);\n            this.ui.rightActionBar.push(rightButtons.map((button, index) => {\n                const action = new Action(`id-${index}`, '', button.iconClass || getIconClass(button.iconPath), true, () => __awaiter(this, void 0, void 0, function* () {\n                    this.onDidTriggerButtonEmitter.fire(button);\n                }));\n                action.tooltip = button.tooltip || '';\n                return action;\n            }), { icon: true, label: false });\n        }\n        this.ui.ignoreFocusOut = this.ignoreFocusOut;\n        this.ui.setEnabled(this.enabled);\n        this.ui.setContextKey(this.contextKey);\n        const validationMessage = this.validationMessage || this.noValidationMessage;\n        if (this._lastValidationMessage !== validationMessage) {\n            this._lastValidationMessage = validationMessage;\n            dom.reset(this.ui.message, ...renderLabelWithIcons(validationMessage));\n        }\n        if (this._lastSeverity !== this.severity) {\n            this._lastSeverity = this.severity;\n            this.showMessageDecoration(this.severity);\n        }\n    }\n    getTitle() {\n        if (this.title && this.step) {\n            return `${this.title} (${this.getSteps()})`;\n        }\n        if (this.title) {\n            return this.title;\n        }\n        if (this.step) {\n            return this.getSteps();\n        }\n        return '';\n    }\n    getDescription() {\n        return this.description || '';\n    }\n    getSteps() {\n        if (this.step && this.totalSteps) {\n            return localize('quickInput.steps', \"{0}/{1}\", this.step, this.totalSteps);\n        }\n        if (this.step) {\n            return String(this.step);\n        }\n        return '';\n    }\n    showMessageDecoration(severity) {\n        this.ui.inputBox.showDecoration(severity);\n        if (severity !== Severity.Ignore) {\n            const styles = this.ui.inputBox.stylesForType(severity);\n            this.ui.message.style.color = styles.foreground ? `${styles.foreground}` : '';\n            this.ui.message.style.backgroundColor = styles.background ? `${styles.background}` : '';\n            this.ui.message.style.border = styles.border ? `1px solid ${styles.border}` : '';\n            this.ui.message.style.marginBottom = '-2px';\n        }\n        else {\n            this.ui.message.style.color = '';\n            this.ui.message.style.backgroundColor = '';\n            this.ui.message.style.border = '';\n            this.ui.message.style.marginBottom = '';\n        }\n    }\n    dispose() {\n        this.hide();\n        this.onDisposeEmitter.fire();\n        super.dispose();\n    }\n}\nQuickInput.noPromptMessage = localize('inputModeEntry', \"Press 'Enter' to confirm your input or 'Escape' to cancel\");\nclass QuickPick extends QuickInput {\n    constructor() {\n        super(...arguments);\n        this._value = '';\n        this.onDidChangeValueEmitter = this._register(new Emitter());\n        this.onWillAcceptEmitter = this._register(new Emitter());\n        this.onDidAcceptEmitter = this._register(new Emitter());\n        this.onDidCustomEmitter = this._register(new Emitter());\n        this._items = [];\n        this.itemsUpdated = false;\n        this._canSelectMany = false;\n        this._canAcceptInBackground = false;\n        this._matchOnDescription = false;\n        this._matchOnDetail = false;\n        this._matchOnLabel = true;\n        this._sortByLabel = true;\n        this._autoFocusOnList = true;\n        this._keepScrollPosition = false;\n        this._itemActivation = this.ui.isScreenReaderOptimized() ? ItemActivation.NONE /* https://github.com/microsoft/vscode/issues/57501 */ : ItemActivation.FIRST;\n        this._activeItems = [];\n        this.activeItemsUpdated = false;\n        this.activeItemsToConfirm = [];\n        this.onDidChangeActiveEmitter = this._register(new Emitter());\n        this._selectedItems = [];\n        this.selectedItemsUpdated = false;\n        this.selectedItemsToConfirm = [];\n        this.onDidChangeSelectionEmitter = this._register(new Emitter());\n        this.onDidTriggerItemButtonEmitter = this._register(new Emitter());\n        this.valueSelectionUpdated = true;\n        this._ok = 'default';\n        this._customButton = false;\n        this.filterValue = (value) => value;\n        this.onDidChangeValue = this.onDidChangeValueEmitter.event;\n        this.onWillAccept = this.onWillAcceptEmitter.event;\n        this.onDidAccept = this.onDidAcceptEmitter.event;\n        this.onDidChangeActive = this.onDidChangeActiveEmitter.event;\n        this.onDidChangeSelection = this.onDidChangeSelectionEmitter.event;\n        this.onDidTriggerItemButton = this.onDidTriggerItemButtonEmitter.event;\n    }\n    get quickNavigate() {\n        return this._quickNavigate;\n    }\n    set quickNavigate(quickNavigate) {\n        this._quickNavigate = quickNavigate;\n        this.update();\n    }\n    get value() {\n        return this._value;\n    }\n    set value(value) {\n        this.doSetValue(value);\n    }\n    doSetValue(value, skipUpdate) {\n        if (this._value !== value) {\n            this._value = value;\n            if (!skipUpdate) {\n                this.update();\n            }\n            if (this.visible) {\n                const didFilter = this.ui.list.filter(this.filterValue(this._value));\n                if (didFilter) {\n                    this.trySelectFirst();\n                }\n            }\n            this.onDidChangeValueEmitter.fire(this._value);\n        }\n    }\n    set ariaLabel(ariaLabel) {\n        this._ariaLabel = ariaLabel;\n        this.update();\n    }\n    get ariaLabel() {\n        return this._ariaLabel;\n    }\n    get placeholder() {\n        return this._placeholder;\n    }\n    set placeholder(placeholder) {\n        this._placeholder = placeholder;\n        this.update();\n    }\n    get items() {\n        return this._items;\n    }\n    get scrollTop() {\n        return this.ui.list.scrollTop;\n    }\n    set scrollTop(scrollTop) {\n        this.ui.list.scrollTop = scrollTop;\n    }\n    set items(items) {\n        this._items = items;\n        this.itemsUpdated = true;\n        this.update();\n    }\n    get canSelectMany() {\n        return this._canSelectMany;\n    }\n    set canSelectMany(canSelectMany) {\n        this._canSelectMany = canSelectMany;\n        this.update();\n    }\n    get canAcceptInBackground() {\n        return this._canAcceptInBackground;\n    }\n    set canAcceptInBackground(canAcceptInBackground) {\n        this._canAcceptInBackground = canAcceptInBackground;\n    }\n    get matchOnDescription() {\n        return this._matchOnDescription;\n    }\n    set matchOnDescription(matchOnDescription) {\n        this._matchOnDescription = matchOnDescription;\n        this.update();\n    }\n    get matchOnDetail() {\n        return this._matchOnDetail;\n    }\n    set matchOnDetail(matchOnDetail) {\n        this._matchOnDetail = matchOnDetail;\n        this.update();\n    }\n    get matchOnLabel() {\n        return this._matchOnLabel;\n    }\n    set matchOnLabel(matchOnLabel) {\n        this._matchOnLabel = matchOnLabel;\n        this.update();\n    }\n    get sortByLabel() {\n        return this._sortByLabel;\n    }\n    set sortByLabel(sortByLabel) {\n        this._sortByLabel = sortByLabel;\n        this.update();\n    }\n    get autoFocusOnList() {\n        return this._autoFocusOnList;\n    }\n    set autoFocusOnList(autoFocusOnList) {\n        this._autoFocusOnList = autoFocusOnList;\n        this.update();\n    }\n    get keepScrollPosition() {\n        return this._keepScrollPosition;\n    }\n    set keepScrollPosition(keepScrollPosition) {\n        this._keepScrollPosition = keepScrollPosition;\n    }\n    get itemActivation() {\n        return this._itemActivation;\n    }\n    set itemActivation(itemActivation) {\n        this._itemActivation = itemActivation;\n    }\n    get activeItems() {\n        return this._activeItems;\n    }\n    set activeItems(activeItems) {\n        this._activeItems = activeItems;\n        this.activeItemsUpdated = true;\n        this.update();\n    }\n    get selectedItems() {\n        return this._selectedItems;\n    }\n    set selectedItems(selectedItems) {\n        this._selectedItems = selectedItems;\n        this.selectedItemsUpdated = true;\n        this.update();\n    }\n    get keyMods() {\n        if (this._quickNavigate) {\n            // Disable keyMods when quick navigate is enabled\n            // because in this model the interaction is purely\n            // keyboard driven and Ctrl/Alt are typically\n            // pressed and hold during this interaction.\n            return NO_KEY_MODS;\n        }\n        return this.ui.keyMods;\n    }\n    set valueSelection(valueSelection) {\n        this._valueSelection = valueSelection;\n        this.valueSelectionUpdated = true;\n        this.update();\n    }\n    get customButton() {\n        return this._customButton;\n    }\n    set customButton(showCustomButton) {\n        this._customButton = showCustomButton;\n        this.update();\n    }\n    get customLabel() {\n        return this._customButtonLabel;\n    }\n    set customLabel(label) {\n        this._customButtonLabel = label;\n        this.update();\n    }\n    get customHover() {\n        return this._customButtonHover;\n    }\n    set customHover(hover) {\n        this._customButtonHover = hover;\n        this.update();\n    }\n    get ok() {\n        return this._ok;\n    }\n    set ok(showOkButton) {\n        this._ok = showOkButton;\n        this.update();\n    }\n    get hideInput() {\n        return !!this._hideInput;\n    }\n    set hideInput(hideInput) {\n        this._hideInput = hideInput;\n        this.update();\n    }\n    trySelectFirst() {\n        if (this.autoFocusOnList) {\n            if (!this.canSelectMany) {\n                this.ui.list.focus(QuickInputListFocus.First);\n            }\n        }\n    }\n    show() {\n        if (!this.visible) {\n            this.visibleDisposables.add(this.ui.inputBox.onDidChange(value => {\n                this.doSetValue(value, true /* skip update since this originates from the UI */);\n            }));\n            this.visibleDisposables.add(this.ui.inputBox.onMouseDown(event => {\n                if (!this.autoFocusOnList) {\n                    this.ui.list.clearFocus();\n                }\n            }));\n            this.visibleDisposables.add((this._hideInput ? this.ui.list : this.ui.inputBox).onKeyDown((event) => {\n                switch (event.keyCode) {\n                    case 18 /* DownArrow */:\n                        this.ui.list.focus(QuickInputListFocus.Next);\n                        if (this.canSelectMany) {\n                            this.ui.list.domFocus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                        break;\n                    case 16 /* UpArrow */:\n                        if (this.ui.list.getFocusedElements().length) {\n                            this.ui.list.focus(QuickInputListFocus.Previous);\n                        }\n                        else {\n                            this.ui.list.focus(QuickInputListFocus.Last);\n                        }\n                        if (this.canSelectMany) {\n                            this.ui.list.domFocus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                        break;\n                    case 12 /* PageDown */:\n                        this.ui.list.focus(QuickInputListFocus.NextPage);\n                        if (this.canSelectMany) {\n                            this.ui.list.domFocus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                        break;\n                    case 11 /* PageUp */:\n                        this.ui.list.focus(QuickInputListFocus.PreviousPage);\n                        if (this.canSelectMany) {\n                            this.ui.list.domFocus();\n                        }\n                        dom.EventHelper.stop(event, true);\n                        break;\n                    case 17 /* RightArrow */:\n                        if (!this._canAcceptInBackground) {\n                            return; // needs to be enabled\n                        }\n                        if (!this.ui.inputBox.isSelectionAtEnd()) {\n                            return; // ensure input box selection at end\n                        }\n                        if (this.activeItems[0]) {\n                            this._selectedItems = [this.activeItems[0]];\n                            this.onDidChangeSelectionEmitter.fire(this.selectedItems);\n                            this.handleAccept(true);\n                        }\n                        break;\n                    case 14 /* Home */:\n                        if ((event.ctrlKey || event.metaKey) && !event.shiftKey && !event.altKey) {\n                            this.ui.list.focus(QuickInputListFocus.First);\n                            dom.EventHelper.stop(event, true);\n                        }\n                        break;\n                    case 13 /* End */:\n                        if ((event.ctrlKey || event.metaKey) && !event.shiftKey && !event.altKey) {\n                            this.ui.list.focus(QuickInputListFocus.Last);\n                            dom.EventHelper.stop(event, true);\n                        }\n                        break;\n                }\n            }));\n            this.visibleDisposables.add(this.ui.onDidAccept(() => {\n                if (this.canSelectMany) {\n                    // if there are no checked elements, it means that an onDidChangeSelection never fired to overwrite\n                    // `_selectedItems`. In that case, we should emit one with an empty array to ensure that\n                    // `.selectedItems` is up to date.\n                    if (!this.ui.list.getCheckedElements().length) {\n                        this._selectedItems = [];\n                        this.onDidChangeSelectionEmitter.fire(this.selectedItems);\n                    }\n                }\n                else if (this.activeItems[0]) {\n                    // For single-select, we set `selectedItems` to the item that was accepted.\n                    this._selectedItems = [this.activeItems[0]];\n                    this.onDidChangeSelectionEmitter.fire(this.selectedItems);\n                }\n                this.handleAccept(false);\n            }));\n            this.visibleDisposables.add(this.ui.onDidCustom(() => {\n                this.onDidCustomEmitter.fire();\n            }));\n            this.visibleDisposables.add(this.ui.list.onDidChangeFocus(focusedItems => {\n                if (this.activeItemsUpdated) {\n                    return; // Expect another event.\n                }\n                if (this.activeItemsToConfirm !== this._activeItems && equals(focusedItems, this._activeItems, (a, b) => a === b)) {\n                    return;\n                }\n                this._activeItems = focusedItems;\n                this.onDidChangeActiveEmitter.fire(focusedItems);\n            }));\n            this.visibleDisposables.add(this.ui.list.onDidChangeSelection(({ items: selectedItems, event }) => {\n                if (this.canSelectMany) {\n                    if (selectedItems.length) {\n                        this.ui.list.setSelectedElements([]);\n                    }\n                    return;\n                }\n                if (this.selectedItemsToConfirm !== this._selectedItems && equals(selectedItems, this._selectedItems, (a, b) => a === b)) {\n                    return;\n                }\n                this._selectedItems = selectedItems;\n                this.onDidChangeSelectionEmitter.fire(selectedItems);\n                if (selectedItems.length) {\n                    this.handleAccept(event instanceof MouseEvent && event.button === 1 /* mouse middle click */);\n                }\n            }));\n            this.visibleDisposables.add(this.ui.list.onChangedCheckedElements(checkedItems => {\n                if (!this.canSelectMany) {\n                    return;\n                }\n                if (this.selectedItemsToConfirm !== this._selectedItems && equals(checkedItems, this._selectedItems, (a, b) => a === b)) {\n                    return;\n                }\n                this._selectedItems = checkedItems;\n                this.onDidChangeSelectionEmitter.fire(checkedItems);\n            }));\n            this.visibleDisposables.add(this.ui.list.onButtonTriggered(event => this.onDidTriggerItemButtonEmitter.fire(event)));\n            this.visibleDisposables.add(this.registerQuickNavigation());\n            this.valueSelectionUpdated = true;\n        }\n        super.show(); // TODO: Why have show() bubble up while update() trickles down? (Could move setComboboxAccessibility() here.)\n    }\n    handleAccept(inBackground) {\n        // Figure out veto via `onWillAccept` event\n        let veto = false;\n        this.onWillAcceptEmitter.fire({ veto: () => veto = true });\n        // Continue with `onDidAccept` if no veto\n        if (!veto) {\n            this.onDidAcceptEmitter.fire({ inBackground });\n        }\n    }\n    registerQuickNavigation() {\n        return dom.addDisposableListener(this.ui.container, dom.EventType.KEY_UP, e => {\n            if (this.canSelectMany || !this._quickNavigate) {\n                return;\n            }\n            const keyboardEvent = new StandardKeyboardEvent(e);\n            const keyCode = keyboardEvent.keyCode;\n            // Select element when keys are pressed that signal it\n            const quickNavKeys = this._quickNavigate.keybindings;\n            const wasTriggerKeyPressed = quickNavKeys.some(k => {\n                const [firstPart, chordPart] = k.getParts();\n                if (chordPart) {\n                    return false;\n                }\n                if (firstPart.shiftKey && keyCode === 4 /* Shift */) {\n                    if (keyboardEvent.ctrlKey || keyboardEvent.altKey || keyboardEvent.metaKey) {\n                        return false; // this is an optimistic check for the shift key being used to navigate back in quick input\n                    }\n                    return true;\n                }\n                if (firstPart.altKey && keyCode === 6 /* Alt */) {\n                    return true;\n                }\n                if (firstPart.ctrlKey && keyCode === 5 /* Ctrl */) {\n                    return true;\n                }\n                if (firstPart.metaKey && keyCode === 57 /* Meta */) {\n                    return true;\n                }\n                return false;\n            });\n            if (wasTriggerKeyPressed) {\n                if (this.activeItems[0]) {\n                    this._selectedItems = [this.activeItems[0]];\n                    this.onDidChangeSelectionEmitter.fire(this.selectedItems);\n                    this.handleAccept(false);\n                }\n                // Unset quick navigate after press. It is only valid once\n                // and should not result in any behaviour change afterwards\n                // if the picker remains open because there was no active item\n                this._quickNavigate = undefined;\n            }\n        });\n    }\n    update() {\n        if (!this.visible) {\n            return;\n        }\n        // store the scrollTop before it is reset\n        const scrollTopBefore = this.keepScrollPosition ? this.scrollTop : 0;\n        const hideInput = !!this._hideInput && this._items.length > 0;\n        this.ui.container.classList.toggle('hidden-input', hideInput && !this.description);\n        const visibilities = {\n            title: !!this.title || !!this.step || !!this.buttons.length,\n            description: !!this.description,\n            checkAll: this.canSelectMany && !this._hideCheckAll,\n            checkBox: this.canSelectMany,\n            inputBox: !hideInput,\n            progressBar: !hideInput,\n            visibleCount: true,\n            count: this.canSelectMany,\n            ok: this.ok === 'default' ? this.canSelectMany : this.ok,\n            list: true,\n            message: !!this.validationMessage,\n            customButton: this.customButton\n        };\n        this.ui.setVisibilities(visibilities);\n        super.update();\n        if (this.ui.inputBox.value !== this.value) {\n            this.ui.inputBox.value = this.value;\n        }\n        if (this.valueSelectionUpdated) {\n            this.valueSelectionUpdated = false;\n            this.ui.inputBox.select(this._valueSelection && { start: this._valueSelection[0], end: this._valueSelection[1] });\n        }\n        if (this.ui.inputBox.placeholder !== (this.placeholder || '')) {\n            this.ui.inputBox.placeholder = (this.placeholder || '');\n        }\n        const ariaLabel = this.ariaLabel || this.placeholder || QuickPick.DEFAULT_ARIA_LABEL;\n        if (this.ui.inputBox.ariaLabel !== ariaLabel) {\n            this.ui.inputBox.ariaLabel = ariaLabel;\n        }\n        this.ui.list.matchOnDescription = this.matchOnDescription;\n        this.ui.list.matchOnDetail = this.matchOnDetail;\n        this.ui.list.matchOnLabel = this.matchOnLabel;\n        this.ui.list.sortByLabel = this.sortByLabel;\n        if (this.itemsUpdated) {\n            this.itemsUpdated = false;\n            this.ui.list.setElements(this.items);\n            this.ui.list.filter(this.filterValue(this.ui.inputBox.value));\n            this.ui.checkAll.checked = this.ui.list.getAllVisibleChecked();\n            this.ui.visibleCount.setCount(this.ui.list.getVisibleCount());\n            this.ui.count.setCount(this.ui.list.getCheckedCount());\n            switch (this._itemActivation) {\n                case ItemActivation.NONE:\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\n                    break;\n                case ItemActivation.SECOND:\n                    this.ui.list.focus(QuickInputListFocus.Second);\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\n                    break;\n                case ItemActivation.LAST:\n                    this.ui.list.focus(QuickInputListFocus.Last);\n                    this._itemActivation = ItemActivation.FIRST; // only valid once, then unset\n                    break;\n                default:\n                    this.trySelectFirst();\n                    break;\n            }\n        }\n        if (this.ui.container.classList.contains('show-checkboxes') !== !!this.canSelectMany) {\n            if (this.canSelectMany) {\n                this.ui.list.clearFocus();\n            }\n            else {\n                this.trySelectFirst();\n            }\n        }\n        if (this.activeItemsUpdated) {\n            this.activeItemsUpdated = false;\n            this.activeItemsToConfirm = this._activeItems;\n            this.ui.list.setFocusedElements(this.activeItems);\n            if (this.activeItemsToConfirm === this._activeItems) {\n                this.activeItemsToConfirm = null;\n            }\n        }\n        if (this.selectedItemsUpdated) {\n            this.selectedItemsUpdated = false;\n            this.selectedItemsToConfirm = this._selectedItems;\n            if (this.canSelectMany) {\n                this.ui.list.setCheckedElements(this.selectedItems);\n            }\n            else {\n                this.ui.list.setSelectedElements(this.selectedItems);\n            }\n            if (this.selectedItemsToConfirm === this._selectedItems) {\n                this.selectedItemsToConfirm = null;\n            }\n        }\n        this.ui.customButton.label = this.customLabel || '';\n        this.ui.customButton.element.title = this.customHover || '';\n        this.ui.setComboboxAccessibility(true);\n        if (!visibilities.inputBox) {\n            // we need to move focus into the tree to detect keybindings\n            // properly when the input box is not visible (quick nav)\n            this.ui.list.domFocus();\n            // Focus the first element in the list if multiselect is enabled\n            if (this.canSelectMany) {\n                this.ui.list.focus(QuickInputListFocus.First);\n            }\n        }\n        // Set the scroll position to what it was before updating the items\n        if (this.keepScrollPosition) {\n            this.scrollTop = scrollTopBefore;\n        }\n    }\n}\nQuickPick.DEFAULT_ARIA_LABEL = localize('quickInputBox.ariaLabel', \"Type to narrow down results.\");\nexport class QuickInputController extends Disposable {\n    constructor(options) {\n        super();\n        this.options = options;\n        this.comboboxAccessibility = false;\n        this.enabled = true;\n        this.onDidAcceptEmitter = this._register(new Emitter());\n        this.onDidCustomEmitter = this._register(new Emitter());\n        this.onDidTriggerButtonEmitter = this._register(new Emitter());\n        this.keyMods = { ctrlCmd: false, alt: false };\n        this.controller = null;\n        this.onShowEmitter = this._register(new Emitter());\n        this.onShow = this.onShowEmitter.event;\n        this.onHideEmitter = this._register(new Emitter());\n        this.onHide = this.onHideEmitter.event;\n        this.idPrefix = options.idPrefix;\n        this.parentElement = options.container;\n        this.styles = options.styles;\n        this.registerKeyModsListeners();\n    }\n    registerKeyModsListeners() {\n        const listener = (e) => {\n            this.keyMods.ctrlCmd = e.ctrlKey || e.metaKey;\n            this.keyMods.alt = e.altKey;\n        };\n        this._register(dom.addDisposableListener(window, dom.EventType.KEY_DOWN, listener, true));\n        this._register(dom.addDisposableListener(window, dom.EventType.KEY_UP, listener, true));\n        this._register(dom.addDisposableListener(window, dom.EventType.MOUSE_DOWN, listener, true));\n    }\n    getUI() {\n        if (this.ui) {\n            return this.ui;\n        }\n        const container = dom.append(this.parentElement, $('.quick-input-widget.show-file-icons'));\n        container.tabIndex = -1;\n        container.style.display = 'none';\n        const styleSheet = dom.createStyleSheet(container);\n        const titleBar = dom.append(container, $('.quick-input-titlebar'));\n        const leftActionBar = this._register(new ActionBar(titleBar));\n        leftActionBar.domNode.classList.add('quick-input-left-action-bar');\n        const title = dom.append(titleBar, $('.quick-input-title'));\n        const rightActionBar = this._register(new ActionBar(titleBar));\n        rightActionBar.domNode.classList.add('quick-input-right-action-bar');\n        const description1 = dom.append(container, $('.quick-input-description'));\n        const headerContainer = dom.append(container, $('.quick-input-header'));\n        const checkAll = dom.append(headerContainer, $('input.quick-input-check-all'));\n        checkAll.type = 'checkbox';\n        this._register(dom.addStandardDisposableListener(checkAll, dom.EventType.CHANGE, e => {\n            const checked = checkAll.checked;\n            list.setAllVisibleChecked(checked);\n        }));\n        this._register(dom.addDisposableListener(checkAll, dom.EventType.CLICK, e => {\n            if (e.x || e.y) { // Avoid 'click' triggered by 'space'...\n                inputBox.setFocus();\n            }\n        }));\n        const description2 = dom.append(headerContainer, $('.quick-input-description'));\n        const extraContainer = dom.append(headerContainer, $('.quick-input-and-message'));\n        const filterContainer = dom.append(extraContainer, $('.quick-input-filter'));\n        const inputBox = this._register(new QuickInputBox(filterContainer));\n        inputBox.setAttribute('aria-describedby', `${this.idPrefix}message`);\n        const visibleCountContainer = dom.append(filterContainer, $('.quick-input-visible-count'));\n        visibleCountContainer.setAttribute('aria-live', 'polite');\n        visibleCountContainer.setAttribute('aria-atomic', 'true');\n        const visibleCount = new CountBadge(visibleCountContainer, { countFormat: localize({ key: 'quickInput.visibleCount', comment: ['This tells the user how many items are shown in a list of items to select from. The items can be anything. Currently not visible, but read by screen readers.'] }, \"{0} Results\") });\n        const countContainer = dom.append(filterContainer, $('.quick-input-count'));\n        countContainer.setAttribute('aria-live', 'polite');\n        const count = new CountBadge(countContainer, { countFormat: localize({ key: 'quickInput.countSelected', comment: ['This tells the user how many items are selected in a list of items to select from. The items can be anything.'] }, \"{0} Selected\") });\n        const okContainer = dom.append(headerContainer, $('.quick-input-action'));\n        const ok = new Button(okContainer);\n        ok.label = localize('ok', \"OK\");\n        this._register(ok.onDidClick(e => {\n            this.onDidAcceptEmitter.fire();\n        }));\n        const customButtonContainer = dom.append(headerContainer, $('.quick-input-action'));\n        const customButton = new Button(customButtonContainer);\n        customButton.label = localize('custom', \"Custom\");\n        this._register(customButton.onDidClick(e => {\n            this.onDidCustomEmitter.fire();\n        }));\n        const message = dom.append(extraContainer, $(`#${this.idPrefix}message.quick-input-message`));\n        const list = this._register(new QuickInputList(container, this.idPrefix + 'list', this.options));\n        this._register(list.onChangedAllVisibleChecked(checked => {\n            checkAll.checked = checked;\n        }));\n        this._register(list.onChangedVisibleCount(c => {\n            visibleCount.setCount(c);\n        }));\n        this._register(list.onChangedCheckedCount(c => {\n            count.setCount(c);\n        }));\n        this._register(list.onLeave(() => {\n            // Defer to avoid the input field reacting to the triggering key.\n            setTimeout(() => {\n                inputBox.setFocus();\n                if (this.controller instanceof QuickPick && this.controller.canSelectMany) {\n                    list.clearFocus();\n                }\n            }, 0);\n        }));\n        this._register(list.onDidChangeFocus(() => {\n            if (this.comboboxAccessibility) {\n                this.getUI().inputBox.setAttribute('aria-activedescendant', this.getUI().list.getActiveDescendant() || '');\n            }\n        }));\n        const progressBar = new ProgressBar(container);\n        progressBar.getContainer().classList.add('quick-input-progress');\n        const focusTracker = dom.trackFocus(container);\n        this._register(focusTracker);\n        this._register(dom.addDisposableListener(container, dom.EventType.FOCUS, e => {\n            this.previousFocusElement = e.relatedTarget instanceof HTMLElement ? e.relatedTarget : undefined;\n        }, true));\n        this._register(focusTracker.onDidBlur(() => {\n            if (!this.getUI().ignoreFocusOut && !this.options.ignoreFocusOut()) {\n                this.hide(QuickInputHideReason.Blur);\n            }\n            this.previousFocusElement = undefined;\n        }));\n        this._register(dom.addDisposableListener(container, dom.EventType.FOCUS, (e) => {\n            inputBox.setFocus();\n        }));\n        this._register(dom.addDisposableListener(container, dom.EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            switch (event.keyCode) {\n                case 3 /* Enter */:\n                    dom.EventHelper.stop(e, true);\n                    this.onDidAcceptEmitter.fire();\n                    break;\n                case 9 /* Escape */:\n                    dom.EventHelper.stop(e, true);\n                    this.hide(QuickInputHideReason.Gesture);\n                    break;\n                case 2 /* Tab */:\n                    if (!event.altKey && !event.ctrlKey && !event.metaKey) {\n                        const selectors = ['.action-label.codicon'];\n                        if (container.classList.contains('show-checkboxes')) {\n                            selectors.push('input');\n                        }\n                        else {\n                            selectors.push('input[type=text]');\n                        }\n                        if (this.getUI().list.isDisplayed()) {\n                            selectors.push('.monaco-list');\n                        }\n                        const stops = container.querySelectorAll(selectors.join(', '));\n                        if (event.shiftKey && event.target === stops[0]) {\n                            dom.EventHelper.stop(e, true);\n                            stops[stops.length - 1].focus();\n                        }\n                        else if (!event.shiftKey && event.target === stops[stops.length - 1]) {\n                            dom.EventHelper.stop(e, true);\n                            stops[0].focus();\n                        }\n                    }\n                    break;\n            }\n        }));\n        this.ui = {\n            container,\n            styleSheet,\n            leftActionBar,\n            titleBar,\n            title,\n            description1,\n            description2,\n            rightActionBar,\n            checkAll,\n            filterContainer,\n            inputBox,\n            visibleCountContainer,\n            visibleCount,\n            countContainer,\n            count,\n            okContainer,\n            ok,\n            message,\n            customButtonContainer,\n            customButton,\n            list,\n            progressBar,\n            onDidAccept: this.onDidAcceptEmitter.event,\n            onDidCustom: this.onDidCustomEmitter.event,\n            onDidTriggerButton: this.onDidTriggerButtonEmitter.event,\n            ignoreFocusOut: false,\n            keyMods: this.keyMods,\n            isScreenReaderOptimized: () => this.options.isScreenReaderOptimized(),\n            show: controller => this.show(controller),\n            hide: () => this.hide(),\n            setVisibilities: visibilities => this.setVisibilities(visibilities),\n            setComboboxAccessibility: enabled => this.setComboboxAccessibility(enabled),\n            setEnabled: enabled => this.setEnabled(enabled),\n            setContextKey: contextKey => this.options.setContextKey(contextKey),\n        };\n        this.updateStyles();\n        return this.ui;\n    }\n    pick(picks, options = {}, token = CancellationToken.None) {\n        return new Promise((doResolve, reject) => {\n            let resolve = (result) => {\n                resolve = doResolve;\n                if (options.onKeyMods) {\n                    options.onKeyMods(input.keyMods);\n                }\n                doResolve(result);\n            };\n            if (token.isCancellationRequested) {\n                resolve(undefined);\n                return;\n            }\n            const input = this.createQuickPick();\n            let activeItem;\n            const disposables = [\n                input,\n                input.onDidAccept(() => {\n                    if (input.canSelectMany) {\n                        resolve(input.selectedItems.slice());\n                        input.hide();\n                    }\n                    else {\n                        const result = input.activeItems[0];\n                        if (result) {\n                            resolve(result);\n                            input.hide();\n                        }\n                    }\n                }),\n                input.onDidChangeActive(items => {\n                    const focused = items[0];\n                    if (focused && options.onDidFocus) {\n                        options.onDidFocus(focused);\n                    }\n                }),\n                input.onDidChangeSelection(items => {\n                    if (!input.canSelectMany) {\n                        const result = items[0];\n                        if (result) {\n                            resolve(result);\n                            input.hide();\n                        }\n                    }\n                }),\n                input.onDidTriggerItemButton(event => options.onDidTriggerItemButton && options.onDidTriggerItemButton(Object.assign(Object.assign({}, event), { removeItem: () => {\n                        const index = input.items.indexOf(event.item);\n                        if (index !== -1) {\n                            const items = input.items.slice();\n                            const removed = items.splice(index, 1);\n                            const activeItems = input.activeItems.filter(activeItem => activeItem !== removed[0]);\n                            const keepScrollPositionBefore = input.keepScrollPosition;\n                            input.keepScrollPosition = true;\n                            input.items = items;\n                            if (activeItems) {\n                                input.activeItems = activeItems;\n                            }\n                            input.keepScrollPosition = keepScrollPositionBefore;\n                        }\n                    } }))),\n                input.onDidChangeValue(value => {\n                    if (activeItem && !value && (input.activeItems.length !== 1 || input.activeItems[0] !== activeItem)) {\n                        input.activeItems = [activeItem];\n                    }\n                }),\n                token.onCancellationRequested(() => {\n                    input.hide();\n                }),\n                input.onDidHide(() => {\n                    dispose(disposables);\n                    resolve(undefined);\n                }),\n            ];\n            input.title = options.title;\n            input.canSelectMany = !!options.canPickMany;\n            input.placeholder = options.placeHolder;\n            input.ignoreFocusOut = !!options.ignoreFocusLost;\n            input.matchOnDescription = !!options.matchOnDescription;\n            input.matchOnDetail = !!options.matchOnDetail;\n            input.matchOnLabel = (options.matchOnLabel === undefined) || options.matchOnLabel; // default to true\n            input.autoFocusOnList = (options.autoFocusOnList === undefined) || options.autoFocusOnList; // default to true\n            input.quickNavigate = options.quickNavigate;\n            input.contextKey = options.contextKey;\n            input.busy = true;\n            Promise.all([picks, options.activeItem])\n                .then(([items, _activeItem]) => {\n                activeItem = _activeItem;\n                input.busy = false;\n                input.items = items;\n                if (input.canSelectMany) {\n                    input.selectedItems = items.filter(item => item.type !== 'separator' && item.picked);\n                }\n                if (activeItem) {\n                    input.activeItems = [activeItem];\n                }\n            });\n            input.show();\n            Promise.resolve(picks).then(undefined, err => {\n                reject(err);\n                input.hide();\n            });\n        });\n    }\n    createQuickPick() {\n        const ui = this.getUI();\n        return new QuickPick(ui);\n    }\n    show(controller) {\n        const ui = this.getUI();\n        this.onShowEmitter.fire();\n        const oldController = this.controller;\n        this.controller = controller;\n        if (oldController) {\n            oldController.didHide();\n        }\n        this.setEnabled(true);\n        ui.leftActionBar.clear();\n        ui.title.textContent = '';\n        ui.description1.textContent = '';\n        ui.description2.textContent = '';\n        ui.rightActionBar.clear();\n        ui.checkAll.checked = false;\n        // ui.inputBox.value = ''; Avoid triggering an event.\n        ui.inputBox.placeholder = '';\n        ui.inputBox.password = false;\n        ui.inputBox.showDecoration(Severity.Ignore);\n        ui.visibleCount.setCount(0);\n        ui.count.setCount(0);\n        dom.reset(ui.message);\n        ui.progressBar.stop();\n        ui.list.setElements([]);\n        ui.list.matchOnDescription = false;\n        ui.list.matchOnDetail = false;\n        ui.list.matchOnLabel = true;\n        ui.list.sortByLabel = true;\n        ui.ignoreFocusOut = false;\n        this.setComboboxAccessibility(false);\n        ui.inputBox.ariaLabel = '';\n        const backKeybindingLabel = this.options.backKeybindingLabel();\n        backButton.tooltip = backKeybindingLabel ? localize('quickInput.backWithKeybinding', \"Back ({0})\", backKeybindingLabel) : localize('quickInput.back', \"Back\");\n        ui.container.style.display = '';\n        this.updateLayout();\n        ui.inputBox.setFocus();\n    }\n    setVisibilities(visibilities) {\n        const ui = this.getUI();\n        ui.title.style.display = visibilities.title ? '' : 'none';\n        ui.description1.style.display = visibilities.description && (visibilities.inputBox || visibilities.checkAll) ? '' : 'none';\n        ui.description2.style.display = visibilities.description && !(visibilities.inputBox || visibilities.checkAll) ? '' : 'none';\n        ui.checkAll.style.display = visibilities.checkAll ? '' : 'none';\n        ui.filterContainer.style.display = visibilities.inputBox ? '' : 'none';\n        ui.visibleCountContainer.style.display = visibilities.visibleCount ? '' : 'none';\n        ui.countContainer.style.display = visibilities.count ? '' : 'none';\n        ui.okContainer.style.display = visibilities.ok ? '' : 'none';\n        ui.customButtonContainer.style.display = visibilities.customButton ? '' : 'none';\n        ui.message.style.display = visibilities.message ? '' : 'none';\n        ui.progressBar.getContainer().style.display = visibilities.progressBar ? '' : 'none';\n        ui.list.display(!!visibilities.list);\n        ui.container.classList[visibilities.checkBox ? 'add' : 'remove']('show-checkboxes');\n        this.updateLayout(); // TODO\n    }\n    setComboboxAccessibility(enabled) {\n        if (enabled !== this.comboboxAccessibility) {\n            const ui = this.getUI();\n            this.comboboxAccessibility = enabled;\n            if (this.comboboxAccessibility) {\n                ui.inputBox.setAttribute('role', 'combobox');\n                ui.inputBox.setAttribute('aria-haspopup', 'true');\n                ui.inputBox.setAttribute('aria-autocomplete', 'list');\n                ui.inputBox.setAttribute('aria-activedescendant', ui.list.getActiveDescendant() || '');\n            }\n            else {\n                ui.inputBox.removeAttribute('role');\n                ui.inputBox.removeAttribute('aria-haspopup');\n                ui.inputBox.removeAttribute('aria-autocomplete');\n                ui.inputBox.removeAttribute('aria-activedescendant');\n            }\n        }\n    }\n    setEnabled(enabled) {\n        if (enabled !== this.enabled) {\n            this.enabled = enabled;\n            for (const item of this.getUI().leftActionBar.viewItems) {\n                item.getAction().enabled = enabled;\n            }\n            for (const item of this.getUI().rightActionBar.viewItems) {\n                item.getAction().enabled = enabled;\n            }\n            this.getUI().checkAll.disabled = !enabled;\n            // this.getUI().inputBox.enabled = enabled; Avoid loosing focus.\n            this.getUI().ok.enabled = enabled;\n            this.getUI().list.enabled = enabled;\n        }\n    }\n    hide(reason) {\n        var _a;\n        const controller = this.controller;\n        if (controller) {\n            const focusChanged = !((_a = this.ui) === null || _a === void 0 ? void 0 : _a.container.contains(document.activeElement));\n            this.controller = null;\n            this.onHideEmitter.fire();\n            this.getUI().container.style.display = 'none';\n            if (!focusChanged) {\n                let currentElement = this.previousFocusElement;\n                while (currentElement && !currentElement.offsetParent) {\n                    currentElement = withNullAsUndefined(currentElement.parentElement);\n                }\n                if (currentElement === null || currentElement === void 0 ? void 0 : currentElement.offsetParent) {\n                    currentElement.focus();\n                    this.previousFocusElement = undefined;\n                }\n                else {\n                    this.options.returnFocus();\n                }\n            }\n            controller.didHide(reason);\n        }\n    }\n    layout(dimension, titleBarOffset) {\n        this.dimension = dimension;\n        this.titleBarOffset = titleBarOffset;\n        this.updateLayout();\n    }\n    updateLayout() {\n        if (this.ui) {\n            this.ui.container.style.top = `${this.titleBarOffset}px`;\n            const style = this.ui.container.style;\n            const width = Math.min(this.dimension.width * 0.62 /* golden cut */, QuickInputController.MAX_WIDTH);\n            style.width = width + 'px';\n            style.marginLeft = '-' + (width / 2) + 'px';\n            this.ui.inputBox.layout();\n            this.ui.list.layout(this.dimension && this.dimension.height * 0.4);\n        }\n    }\n    applyStyles(styles) {\n        this.styles = styles;\n        this.updateStyles();\n    }\n    updateStyles() {\n        if (this.ui) {\n            const { quickInputTitleBackground, quickInputBackground, quickInputForeground, contrastBorder, widgetShadow, } = this.styles.widget;\n            this.ui.titleBar.style.backgroundColor = quickInputTitleBackground ? quickInputTitleBackground.toString() : '';\n            this.ui.container.style.backgroundColor = quickInputBackground ? quickInputBackground.toString() : '';\n            this.ui.container.style.color = quickInputForeground ? quickInputForeground.toString() : '';\n            this.ui.container.style.border = contrastBorder ? `1px solid ${contrastBorder}` : '';\n            this.ui.container.style.boxShadow = widgetShadow ? `0 0 8px 2px ${widgetShadow}` : '';\n            this.ui.inputBox.style(this.styles.inputBox);\n            this.ui.count.style(this.styles.countBadge);\n            this.ui.ok.style(this.styles.button);\n            this.ui.customButton.style(this.styles.button);\n            this.ui.progressBar.style(this.styles.progressBar);\n            this.ui.list.style(this.styles.list);\n            const content = [];\n            if (this.styles.list.pickerGroupBorder) {\n                content.push(`.quick-input-list .quick-input-list-entry { border-top-color:  ${this.styles.list.pickerGroupBorder}; }`);\n            }\n            if (this.styles.list.pickerGroupForeground) {\n                content.push(`.quick-input-list .quick-input-list-separator { color:  ${this.styles.list.pickerGroupForeground}; }`);\n            }\n            if (this.styles.keybindingLabel.keybindingLabelBackground ||\n                this.styles.keybindingLabel.keybindingLabelBorder ||\n                this.styles.keybindingLabel.keybindingLabelBottomBorder ||\n                this.styles.keybindingLabel.keybindingLabelShadow ||\n                this.styles.keybindingLabel.keybindingLabelForeground) {\n                content.push('.quick-input-list .monaco-keybinding > .monaco-keybinding-key {');\n                if (this.styles.keybindingLabel.keybindingLabelBackground) {\n                    content.push(`background-color: ${this.styles.keybindingLabel.keybindingLabelBackground};`);\n                }\n                if (this.styles.keybindingLabel.keybindingLabelBorder) {\n                    // Order matters here. `border-color` must come before `border-bottom-color`.\n                    content.push(`border-color: ${this.styles.keybindingLabel.keybindingLabelBorder};`);\n                }\n                if (this.styles.keybindingLabel.keybindingLabelBottomBorder) {\n                    content.push(`border-bottom-color: ${this.styles.keybindingLabel.keybindingLabelBottomBorder};`);\n                }\n                if (this.styles.keybindingLabel.keybindingLabelShadow) {\n                    content.push(`box-shadow: inset 0 -1px 0 ${this.styles.keybindingLabel.keybindingLabelShadow};`);\n                }\n                if (this.styles.keybindingLabel.keybindingLabelForeground) {\n                    content.push(`color: ${this.styles.keybindingLabel.keybindingLabelForeground};`);\n                }\n                content.push('}');\n            }\n            const newStyles = content.join('\\n');\n            if (newStyles !== this.ui.styleSheet.textContent) {\n                this.ui.styleSheet.textContent = newStyles;\n            }\n        }\n    }\n}\nQuickInputController.MAX_WIDTH = 600; // Max total width of quick input widget\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport const NO_KEY_MODS = { ctrlCmd: false, alt: false };\nexport var QuickInputHideReason;\n(function (QuickInputHideReason) {\n    /**\n     * Focus moved away from the quick input.\n     */\n    QuickInputHideReason[QuickInputHideReason[\"Blur\"] = 1] = \"Blur\";\n    /**\n     * An explicit user gesture, e.g. pressing Escape key.\n     */\n    QuickInputHideReason[QuickInputHideReason[\"Gesture\"] = 2] = \"Gesture\";\n    /**\n     * Anything else.\n     */\n    QuickInputHideReason[QuickInputHideReason[\"Other\"] = 3] = \"Other\";\n})(QuickInputHideReason || (QuickInputHideReason = {}));\nexport var ItemActivation;\n(function (ItemActivation) {\n    ItemActivation[ItemActivation[\"NONE\"] = 0] = \"NONE\";\n    ItemActivation[ItemActivation[\"FIRST\"] = 1] = \"FIRST\";\n    ItemActivation[ItemActivation[\"SECOND\"] = 2] = \"SECOND\";\n    ItemActivation[ItemActivation[\"LAST\"] = 3] = \"LAST\";\n})(ItemActivation || (ItemActivation = {}));\nexport class QuickPickItemScorerAccessor {\n    constructor(options) {\n        this.options = options;\n    }\n}\nexport const quickPickItemScorerAccessor = new QuickPickItemScorerAccessor();\n//#endregion\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { ThrottledDelayer } from '../../../common/async.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { isUndefinedOrNull } from '../../../common/types.js';\nvar StorageState;\n(function (StorageState) {\n    StorageState[StorageState[\"None\"] = 0] = \"None\";\n    StorageState[StorageState[\"Initialized\"] = 1] = \"Initialized\";\n    StorageState[StorageState[\"Closed\"] = 2] = \"Closed\";\n})(StorageState || (StorageState = {}));\nexport class Storage extends Disposable {\n    constructor(database, options = Object.create(null)) {\n        super();\n        this.database = database;\n        this.options = options;\n        this._onDidChangeStorage = this._register(new Emitter());\n        this.onDidChangeStorage = this._onDidChangeStorage.event;\n        this.state = StorageState.None;\n        this.cache = new Map();\n        this.flushDelayer = new ThrottledDelayer(Storage.DEFAULT_FLUSH_DELAY);\n        this.pendingDeletes = new Set();\n        this.pendingInserts = new Map();\n        this.whenFlushedCallbacks = [];\n        this.registerListeners();\n    }\n    registerListeners() {\n        this._register(this.database.onDidChangeItemsExternal(e => this.onDidChangeItemsExternal(e)));\n    }\n    onDidChangeItemsExternal(e) {\n        var _a, _b;\n        // items that change external require us to update our\n        // caches with the values. we just accept the value and\n        // emit an event if there is a change.\n        (_a = e.changed) === null || _a === void 0 ? void 0 : _a.forEach((value, key) => this.accept(key, value));\n        (_b = e.deleted) === null || _b === void 0 ? void 0 : _b.forEach(key => this.accept(key, undefined));\n    }\n    accept(key, value) {\n        if (this.state === StorageState.Closed) {\n            return; // Return early if we are already closed\n        }\n        let changed = false;\n        // Item got removed, check for deletion\n        if (isUndefinedOrNull(value)) {\n            changed = this.cache.delete(key);\n        }\n        // Item got updated, check for change\n        else {\n            const currentValue = this.cache.get(key);\n            if (currentValue !== value) {\n                this.cache.set(key, value);\n                changed = true;\n            }\n        }\n        // Signal to outside listeners\n        if (changed) {\n            this._onDidChangeStorage.fire(key);\n        }\n    }\n    get(key, fallbackValue) {\n        const value = this.cache.get(key);\n        if (isUndefinedOrNull(value)) {\n            return fallbackValue;\n        }\n        return value;\n    }\n    getBoolean(key, fallbackValue) {\n        const value = this.get(key);\n        if (isUndefinedOrNull(value)) {\n            return fallbackValue;\n        }\n        return value === 'true';\n    }\n    getNumber(key, fallbackValue) {\n        const value = this.get(key);\n        if (isUndefinedOrNull(value)) {\n            return fallbackValue;\n        }\n        return parseInt(value, 10);\n    }\n    set(key, value) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.state === StorageState.Closed) {\n                return; // Return early if we are already closed\n            }\n            // We remove the key for undefined/null values\n            if (isUndefinedOrNull(value)) {\n                return this.delete(key);\n            }\n            // Otherwise, convert to String and store\n            const valueStr = String(value);\n            // Return early if value already set\n            const currentValue = this.cache.get(key);\n            if (currentValue === valueStr) {\n                return;\n            }\n            // Update in cache and pending\n            this.cache.set(key, valueStr);\n            this.pendingInserts.set(key, valueStr);\n            this.pendingDeletes.delete(key);\n            // Event\n            this._onDidChangeStorage.fire(key);\n            // Accumulate work by scheduling after timeout\n            return this.doFlush();\n        });\n    }\n    delete(key) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this.state === StorageState.Closed) {\n                return; // Return early if we are already closed\n            }\n            // Remove from cache and add to pending\n            const wasDeleted = this.cache.delete(key);\n            if (!wasDeleted) {\n                return; // Return early if value already deleted\n            }\n            if (!this.pendingDeletes.has(key)) {\n                this.pendingDeletes.add(key);\n            }\n            this.pendingInserts.delete(key);\n            // Event\n            this._onDidChangeStorage.fire(key);\n            // Accumulate work by scheduling after timeout\n            return this.doFlush();\n        });\n    }\n    get hasPending() {\n        return this.pendingInserts.size > 0 || this.pendingDeletes.size > 0;\n    }\n    flushPending() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this.hasPending) {\n                return; // return early if nothing to do\n            }\n            // Get pending data\n            const updateRequest = { insert: this.pendingInserts, delete: this.pendingDeletes };\n            // Reset pending data for next run\n            this.pendingDeletes = new Set();\n            this.pendingInserts = new Map();\n            // Update in storage and release any\n            // waiters we have once done\n            return this.database.updateItems(updateRequest).finally(() => {\n                var _a;\n                if (!this.hasPending) {\n                    while (this.whenFlushedCallbacks.length) {\n                        (_a = this.whenFlushedCallbacks.pop()) === null || _a === void 0 ? void 0 : _a();\n                    }\n                }\n            });\n        });\n    }\n    doFlush(delay) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return this.flushDelayer.trigger(() => this.flushPending(), delay);\n        });\n    }\n    dispose() {\n        this.flushDelayer.dispose();\n        super.dispose();\n    }\n}\nStorage.DEFAULT_FLUSH_DELAY = 100;\nexport class InMemoryStorageDatabase {\n    constructor() {\n        this.onDidChangeItemsExternal = Event.None;\n        this.items = new Map();\n    }\n    updateItems(request) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (request.insert) {\n                request.insert.forEach((value, key) => this.items.set(key, value));\n            }\n            if (request.delete) {\n                request.delete.forEach(key => this.items.delete(key));\n            }\n        });\n    }\n}\n"],"names":["INITIALIZE","webWorkerWarningLogged","logOnceWebWorkerWarning","err","isWeb","console","warn","message","RequestMessage","vsWorker","req","method","args","this","type","ReplyMessage","seq","res","SubscribeEventMessage","eventName","arg","EventMessage","event","UnsubscribeEventMessage","SimpleWorkerProtocol","handler","_workerId","_handler","_lastSentReq","_pendingReplies","Object","create","_pendingEmitters","Map","_pendingEvents","workerId","String","Promise","resolve","reject","_send","emitter","Emitter","onFirstListenerAdd","set","onLastListenerRemove","delete","_handleMessage","msg","_handleReplyMessage","_handleRequestMessage","_handleSubscribeEventMessage","_handleEventMessage","_handleUnsubscribeEventMessage","replyMessage","reply","$isError","Error","name","stack","requestMessage","handleMessage","then","r","undefined","e","detail","transformErrorForSerialization","disposable","handleEvent","has","get","fire","dispose","transfer","i","length","ArrayBuffer","push","sendMessage","SimpleWorkerClient","workerFactory","moduleId","host","lazyProxyReject","_worker","_register","_protocol","postMessage","apply","propertyIsDynamicEvent","call","propertyIsEvent","setWorkerId","getId","loaderConfiguration","globals","hostMethods","types","_onModuleLoaded","JSON","parse","stringify","proxyMethodRequest","_request","proxyListen","listen","_lazyProxy","availableMethods","createProxyObject","_onError","error","info","Disposable","strings","charCodeAt","test","methodNames","invoke","createProxyMethod","Array","prototype","slice","arguments","createProxyDynamicEvent","result","methodName","iconPathToClass","iconClassGenerator","IdGenerator","getIconClass","iconPath","iconClass","key","dark","toString","nextId","dom","createCSSRule","asCSSUrl","light","$","QuickInputBox","parent","onKeyDown","addDisposableListener","inputBox","inputElement","EventType","KEY_DOWN","StandardKeyboardEvent","onMouseDown","MOUSE_DOWN","StandardMouseEvent","onDidChange","container","append","InputBox","value","range","select","isSelectionAtEnd","getAttribute","placeholder","setPlaceHolder","getAriaLabel","ariaLabel","setAriaLabel","password","setAttribute","removeAttribute","decoration","Severity","hideMessage","showMessage","content","stylesForType","focus","layout","styles","style","__decorate","decorators","target","desc","d","c","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","done","ListElement","init","hidden","_onChecked","onChecked","assign","_checked","ListElementRenderer","ID","data","toDisposeElement","toDisposeTemplate","entry","label","addStandardDisposableListener","CLICK","checkbox","offsetParent","preventDefault","CHANGE","element","checked","rows","row1","row2","IconLabel","supportHighlights","supportDescriptionHighlights","supportIcons","keybindingContainer","keybinding","KeybindingLabel","platform","OS","detailContainer","separator","actionBar","ActionBar","domNode","classList","add","index","labelHighlights","descriptionHighlights","detailHighlights","options","matches","descriptionTitle","saneDescription","descriptionMatches","extraClasses","item","iconClasses","italic","strikethrough","setLabel","saneLabel","saneDetail","title","textContent","display","toggle","clear","buttons","map","button","cssClasses","alwaysVisible","action","Action","fireButtonTriggered","tooltip","icon","remove","QuickInputListFocus","ListElementDelegate","QuickInputList","id","inputElements","elements","elementsToIndexes","matchOnDescription","matchOnDetail","matchOnLabel","matchOnMeta","sortByLabel","_onChangedAllVisibleChecked","onChangedAllVisibleChecked","_onChangedCheckedCount","onChangedCheckedCount","_onChangedVisibleCount","onChangedVisibleCount","_onChangedCheckedElements","onChangedCheckedElements","_onButtonTriggered","onButtonTriggered","_onKeyDown","_onLeave","onLeave","_fireCheckedEvents","elementDisposables","disposables","delegate","accessibilityProvider","QuickInputAccessibilityProvider","list","createList","identityProvider","setRowLineHeight","multipleSelectionSupport","horizontalScrolling","getHTMLElement","keyCode","toggleCheckbox","metaKey","ctrlKey","setFocus","focus1","getFocus","focus2","browserEvent","x","y","onMouseMiddleClick","onContextMenu","setSelection","Event","onDidChangeFocus","onDidChangeSelection","items","scrollTop","allVisibleChecked","whenNoneVisible","n","count","forEach","fireCheckedEvents","reduce","_a","_b","_c","previous","replace","saneMeta","meta","description","saneAriaLabel","s","getCodiconAriaLabel","filter","join","hasCheckbox","contains","highlights","splice","getFocusedElements","focused","reveal","Set","pointerEvents","what","Next","First","Previous","Last","Second","focusFirst","focusNth","focusLast","focusNext","focusPrevious","NextPage","focusNextPage","PreviousPage","focusPreviousPage","domFocus","maxHeight","Math","floor","query","currentSeparator","trim","withNullAsUndefined","matchesFuzzyIconAware","parseLabelWithIcons","metaHighlights","alwaysShow","shownElements","normalizedSearchValue","toLowerCase","sort","a","b","elementA","elementB","lookFor","labelHighlightsA","labelHighlightsB","compareAnything","compareEntries","getAllVisibleChecked","allChecked","getCheckedCount","getCheckedElements","memoize","localize","backButton","Codicon","handle","QuickInput","ui","visible","_enabled","_busy","_ignoreFocusOut","_buttons","noValidationMessage","noPromptMessage","_severity","buttonsUpdated","onDidTriggerButtonEmitter","onDidHideEmitter","onDisposeEmitter","visibleDisposables","DisposableStore","onDidHide","_title","update","_description","_steps","_totalSteps","totalSteps","enabled","_contextKey","contextKey","busy","ignoreFocusOut","shouldUpdate","isIOS","_validationMessage","validationMessage","severity","onDidTriggerButton","indexOf","show","_lastValidationMessage","_lastSeverity","hide","reason","QuickInputHideReason","getTitle","innerHTML","innerText","getDescription","description1","description2","busyDelay","TimeoutTimer","setIfNotSet","progressBar","infinite","stop","cancel","leftActionBar","leftButtons","rightActionBar","rightButtons","setEnabled","setContextKey","reset","renderLabelWithIcons","showMessageDecoration","getSteps","showDecoration","color","foreground","backgroundColor","background","border","marginBottom","QuickPick","_value","onDidChangeValueEmitter","onWillAcceptEmitter","onDidAcceptEmitter","onDidCustomEmitter","_items","itemsUpdated","_canSelectMany","_canAcceptInBackground","_matchOnDescription","_matchOnDetail","_matchOnLabel","_sortByLabel","_autoFocusOnList","_keepScrollPosition","_itemActivation","isScreenReaderOptimized","ItemActivation","_activeItems","activeItemsUpdated","activeItemsToConfirm","onDidChangeActiveEmitter","_selectedItems","selectedItemsUpdated","selectedItemsToConfirm","onDidChangeSelectionEmitter","onDidTriggerItemButtonEmitter","valueSelectionUpdated","_ok","_customButton","filterValue","onDidChangeValue","onWillAccept","onDidAccept","onDidChangeActive","onDidTriggerItemButton","_quickNavigate","quickNavigate","doSetValue","skipUpdate","trySelectFirst","_ariaLabel","_placeholder","canSelectMany","canAcceptInBackground","autoFocusOnList","keepScrollPosition","itemActivation","activeItems","selectedItems","NO_KEY_MODS","keyMods","valueSelection","_valueSelection","showCustomButton","_customButtonLabel","_customButtonHover","hover","showOkButton","_hideInput","hideInput","clearFocus","EventHelper","handleAccept","shiftKey","altKey","onDidCustom","focusedItems","equals","setSelectedElements","MouseEvent","checkedItems","registerQuickNavigation","inBackground","veto","KEY_UP","keyboardEvent","keybindings","some","k","getParts","firstPart","scrollTopBefore","visibilities","checkAll","_hideCheckAll","checkBox","visibleCount","ok","customButton","setVisibilities","start","end","DEFAULT_ARIA_LABEL","setElements","setCount","getVisibleCount","setFocusedElements","setCheckedElements","customLabel","customHover","setComboboxAccessibility","QuickInputController","comboboxAccessibility","ctrlCmd","alt","controller","onShowEmitter","onShow","onHideEmitter","onHide","idPrefix","parentElement","registerKeyModsListeners","listener","window","tabIndex","styleSheet","createStyleSheet","titleBar","headerContainer","setAllVisibleChecked","extraContainer","filterContainer","visibleCountContainer","CountBadge","countFormat","comment","countContainer","okContainer","Button","onDidClick","customButtonContainer","setTimeout","getUI","getActiveDescendant","ProgressBar","getContainer","focusTracker","trackFocus","FOCUS","previousFocusElement","relatedTarget","HTMLElement","onDidBlur","selectors","isDisplayed","stops","querySelectorAll","updateStyles","picks","token","CancellationToken","doResolve","onKeyMods","input","isCancellationRequested","activeItem","createQuickPick","onDidFocus","removeItem","removed","keepScrollPositionBefore","onCancellationRequested","canPickMany","placeHolder","ignoreFocusLost","all","_activeItem","picked","oldController","didHide","backKeybindingLabel","updateLayout","viewItems","getAction","disabled","focusChanged","document","activeElement","currentElement","returnFocus","dimension","titleBarOffset","top","width","min","MAX_WIDTH","marginLeft","height","widget","quickInputTitleBackground","quickInputBackground","quickInputForeground","contrastBorder","widgetShadow","boxShadow","countBadge","pickerGroupBorder","pickerGroupForeground","keybindingLabel","keybindingLabelBackground","keybindingLabelBorder","keybindingLabelBottomBorder","keybindingLabelShadow","keybindingLabelForeground","newStyles","StorageState","Storage","database","_onDidChangeStorage","onDidChangeStorage","state","None","cache","flushDelayer","ThrottledDelayer","DEFAULT_FLUSH_DELAY","pendingDeletes","pendingInserts","whenFlushedCallbacks","registerListeners","onDidChangeItemsExternal","changed","accept","deleted","Closed","isUndefinedOrNull","fallbackValue","parseInt","valueStr","doFlush","size","hasPending","updateRequest","insert","updateItems","finally","pop","delay","trigger","flushPending","InMemoryStorageDatabase","request"],"sourceRoot":""}