{"version":3,"file":"static/js/monaco-editor-vendor.86f2f8d8.61e14516.js","mappings":"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","sources":["../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/bracketSelections.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/wordSelections.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/smartSelect/browser/smartSelect.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetController2.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetParser.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetVariables.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/snippet/browser/snippetSession.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollModelProvider.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollWidget.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollElement.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollProvider.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollController.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollActions.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/stickyScroll/browser/stickyScrollContribution.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/completionModel.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggest.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordContextKey.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestAlternatives.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestCommitCharacters.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestModel.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestOvertypingCapturer.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetStatus.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetDetails.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidgetRenderer.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestWidget.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestController.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestInlineCompletions.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/suggestMemory.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/suggest/browser/wordDistance.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/contrib/symbolIcons/browser/symbolIcons.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { LinkedList } from '../../../../base/common/linkedList.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport class BracketSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = [];\n            for (const position of positions) {\n                const bucket = [];\n                result.push(bucket);\n                const ranges = new Map();\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsRightYield(resolve, 0, model, position, ranges));\n                yield new Promise(resolve => BracketSelectionRangeProvider._bracketsLeftYield(resolve, 0, model, position, ranges, bucket));\n            }\n            return result;\n        });\n    }\n    static _bracketsRightYield(resolve, round, model, pos, ranges) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            const bracket = model.bracketPairs.findNextBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            const d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsRightYield(resolve, round + 1, model, pos, ranges));\n                break;\n            }\n            if (bracket.bracketInfo.isOpeningBracket) {\n                const key = bracket.bracketInfo.bracketText;\n                // wait for closing\n                const val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                const key = bracket.bracketInfo.getOpeningBrackets()[0].bracketText;\n                // process closing\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    let list = ranges.get(key);\n                    if (!list) {\n                        list = new LinkedList();\n                        ranges.set(key, list);\n                    }\n                    list.push(bracket.range);\n                }\n            }\n            pos = bracket.range.getEndPosition();\n        }\n    }\n    static _bracketsLeftYield(resolve, round, model, pos, ranges, bucket) {\n        const counts = new Map();\n        const t1 = Date.now();\n        while (true) {\n            if (round >= BracketSelectionRangeProvider._maxRounds && ranges.size === 0) {\n                resolve();\n                break;\n            }\n            if (!pos) {\n                resolve();\n                break;\n            }\n            const bracket = model.bracketPairs.findPrevBracket(pos);\n            if (!bracket) {\n                resolve();\n                break;\n            }\n            const d = Date.now() - t1;\n            if (d > BracketSelectionRangeProvider._maxDuration) {\n                setTimeout(() => BracketSelectionRangeProvider._bracketsLeftYield(resolve, round + 1, model, pos, ranges, bucket));\n                break;\n            }\n            if (!bracket.bracketInfo.isOpeningBracket) {\n                const key = bracket.bracketInfo.getOpeningBrackets()[0].bracketText;\n                // wait for opening\n                const val = counts.has(key) ? counts.get(key) : 0;\n                counts.set(key, val + 1);\n            }\n            else {\n                const key = bracket.bracketInfo.bracketText;\n                // opening\n                let val = counts.has(key) ? counts.get(key) : 0;\n                val -= 1;\n                counts.set(key, Math.max(0, val));\n                if (val < 0) {\n                    const list = ranges.get(key);\n                    if (list) {\n                        const closing = list.shift();\n                        if (list.size === 0) {\n                            ranges.delete(key);\n                        }\n                        const innerBracket = Range.fromPositions(bracket.range.getEndPosition(), closing.getStartPosition());\n                        const outerBracket = Range.fromPositions(bracket.range.getStartPosition(), closing.getEndPosition());\n                        bucket.push({ range: innerBracket });\n                        bucket.push({ range: outerBracket });\n                        BracketSelectionRangeProvider._addBracketLeading(model, outerBracket, bucket);\n                    }\n                }\n            }\n            pos = bracket.range.getStartPosition();\n        }\n    }\n    static _addBracketLeading(model, bracket, bucket) {\n        if (bracket.startLineNumber === bracket.endLineNumber) {\n            return;\n        }\n        // xxxxxxxx {\n        //\n        // }\n        const startLine = bracket.startLineNumber;\n        const column = model.getLineFirstNonWhitespaceColumn(startLine);\n        if (column !== 0 && column !== bracket.startColumn) {\n            bucket.push({ range: Range.fromPositions(new Position(startLine, column), bracket.getEndPosition()) });\n            bucket.push({ range: Range.fromPositions(new Position(startLine, 1), bracket.getEndPosition()) });\n        }\n        // xxxxxxxx\n        // {\n        //\n        // }\n        const aboveLine = startLine - 1;\n        if (aboveLine > 0) {\n            const column = model.getLineFirstNonWhitespaceColumn(aboveLine);\n            if (column === bracket.startColumn && column !== model.getLineLastNonWhitespaceColumn(aboveLine)) {\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, column), bracket.getEndPosition()) });\n                bucket.push({ range: Range.fromPositions(new Position(aboveLine, 1), bracket.getEndPosition()) });\n            }\n        }\n    }\n}\nBracketSelectionRangeProvider._maxDuration = 30;\nBracketSelectionRangeProvider._maxRounds = 2;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isLowerAsciiLetter, isUpperAsciiLetter } from '../../../../base/common/strings.js';\nimport { Range } from '../../../common/core/range.js';\nexport class WordSelectionRangeProvider {\n    provideSelectionRanges(model, positions) {\n        const result = [];\n        for (const position of positions) {\n            const bucket = [];\n            result.push(bucket);\n            this._addInWordRanges(bucket, model, position);\n            this._addWordRanges(bucket, model, position);\n            this._addWhitespaceLine(bucket, model, position);\n            bucket.push({ range: model.getFullModelRange() });\n        }\n        return result;\n    }\n    _addInWordRanges(bucket, model, pos) {\n        const obj = model.getWordAtPosition(pos);\n        if (!obj) {\n            return;\n        }\n        const { word, startColumn } = obj;\n        const offset = pos.column - startColumn;\n        let start = offset;\n        let end = offset;\n        let lastCh = 0;\n        // LEFT anchor (start)\n        for (; start >= 0; start--) {\n            const ch = word.charCodeAt(start);\n            if ((start !== offset) && (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */)) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            else if (isLowerAsciiLetter(ch) && isUpperAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            lastCh = ch;\n        }\n        start += 1;\n        // RIGHT anchor (end)\n        for (; end < word.length; end++) {\n            const ch = word.charCodeAt(end);\n            if (isUpperAsciiLetter(ch) && isLowerAsciiLetter(lastCh)) {\n                // fooBar\n                break;\n            }\n            else if (ch === 95 /* CharCode.Underline */ || ch === 45 /* CharCode.Dash */) {\n                // foo-bar OR foo_bar\n                break;\n            }\n            lastCh = ch;\n        }\n        if (start < end) {\n            bucket.push({ range: new Range(pos.lineNumber, startColumn + start, pos.lineNumber, startColumn + end) });\n        }\n    }\n    _addWordRanges(bucket, model, pos) {\n        const word = model.getWordAtPosition(pos);\n        if (word) {\n            bucket.push({ range: new Range(pos.lineNumber, word.startColumn, pos.lineNumber, word.endColumn) });\n        }\n    }\n    _addWhitespaceLine(bucket, model, pos) {\n        if (model.getLineLength(pos.lineNumber) > 0\n            && model.getLineFirstNonWhitespaceColumn(pos.lineNumber) === 0\n            && model.getLineLastNonWhitespaceColumn(pos.lineNumber) === 0) {\n            bucket.push({ range: new Range(pos.lineNumber, 1, pos.lineNumber, model.getLineMaxColumn(pos.lineNumber)) });\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as arrays from '../../../../base/common/arrays.js';\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { EditorAction, registerEditorAction, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { BracketSelectionRangeProvider } from './bracketSelections.js';\nimport { WordSelectionRangeProvider } from './wordSelections.js';\nimport * as nls from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nclass SelectionRanges {\n    constructor(index, ranges) {\n        this.index = index;\n        this.ranges = ranges;\n    }\n    mov(fwd) {\n        const index = this.index + (fwd ? 1 : -1);\n        if (index < 0 || index >= this.ranges.length) {\n            return this;\n        }\n        const res = new SelectionRanges(index, this.ranges);\n        if (res.ranges[index].equalsRange(this.ranges[this.index])) {\n            // next range equals this range, retry with next-next\n            return res.mov(fwd);\n        }\n        return res;\n    }\n}\nexport let SmartSelectController = class SmartSelectController {\n    static get(editor) {\n        return editor.getContribution(SmartSelectController.ID);\n    }\n    constructor(_editor, _languageFeaturesService) {\n        this._editor = _editor;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._ignoreSelection = false;\n    }\n    dispose() {\n        var _a;\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    run(forward) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            const selections = this._editor.getSelections();\n            const model = this._editor.getModel();\n            if (!this._state) {\n                yield provideSelectionRanges(this._languageFeaturesService.selectionRangeProvider, model, selections.map(s => s.getPosition()), this._editor.getOption(109 /* EditorOption.smartSelect */), CancellationToken.None).then(ranges => {\n                    var _a;\n                    if (!arrays.isNonEmptyArray(ranges) || ranges.length !== selections.length) {\n                        // invalid result\n                        return;\n                    }\n                    if (!this._editor.hasModel() || !arrays.equals(this._editor.getSelections(), selections, (a, b) => a.equalsSelection(b))) {\n                        // invalid editor state\n                        return;\n                    }\n                    for (let i = 0; i < ranges.length; i++) {\n                        ranges[i] = ranges[i].filter(range => {\n                            // filter ranges inside the selection\n                            return range.containsPosition(selections[i].getStartPosition()) && range.containsPosition(selections[i].getEndPosition());\n                        });\n                        // prepend current selection\n                        ranges[i].unshift(selections[i]);\n                    }\n                    this._state = ranges.map(ranges => new SelectionRanges(0, ranges));\n                    // listen to caret move and forget about state\n                    (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                    this._selectionListener = this._editor.onDidChangeCursorPosition(() => {\n                        var _a;\n                        if (!this._ignoreSelection) {\n                            (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n                            this._state = undefined;\n                        }\n                    });\n                });\n            }\n            if (!this._state) {\n                // no state\n                return;\n            }\n            this._state = this._state.map(state => state.mov(forward));\n            const newSelections = this._state.map(state => Selection.fromPositions(state.ranges[state.index].getStartPosition(), state.ranges[state.index].getEndPosition()));\n            this._ignoreSelection = true;\n            try {\n                this._editor.setSelections(newSelections);\n            }\n            finally {\n                this._ignoreSelection = false;\n            }\n        });\n    }\n};\nSmartSelectController.ID = 'editor.contrib.smartSelectController';\nSmartSelectController = __decorate([\n    __param(1, ILanguageFeaturesService)\n], SmartSelectController);\nclass AbstractSmartSelect extends EditorAction {\n    constructor(forward, opts) {\n        super(opts);\n        this._forward = forward;\n    }\n    run(_accessor, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const controller = SmartSelectController.get(editor);\n            if (controller) {\n                yield controller.run(this._forward);\n            }\n        });\n    }\n}\nclass GrowSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(true, {\n            id: 'editor.action.smartSelect.expand',\n            label: nls.localize('smartSelect.expand', \"Expand Selection\"),\n            alias: 'Expand Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 17 /* KeyCode.RightArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 17 /* KeyCode.RightArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectGrow', comment: ['&& denotes a mnemonic'] }, \"&&Expand Selection\"),\n                order: 2\n            }\n        });\n    }\n}\n// renamed command id\nCommandsRegistry.registerCommandAlias('editor.action.smartSelect.grow', 'editor.action.smartSelect.expand');\nclass ShrinkSelectionAction extends AbstractSmartSelect {\n    constructor() {\n        super(false, {\n            id: 'editor.action.smartSelect.shrink',\n            label: nls.localize('smartSelect.shrink', \"Shrink Selection\"),\n            alias: 'Shrink Selection',\n            precondition: undefined,\n            kbOpts: {\n                kbExpr: EditorContextKeys.editorTextFocus,\n                primary: 1024 /* KeyMod.Shift */ | 512 /* KeyMod.Alt */ | 15 /* KeyCode.LeftArrow */,\n                mac: {\n                    primary: 2048 /* KeyMod.CtrlCmd */ | 256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */,\n                    secondary: [256 /* KeyMod.WinCtrl */ | 1024 /* KeyMod.Shift */ | 15 /* KeyCode.LeftArrow */],\n                },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            menuOpts: {\n                menuId: MenuId.MenubarSelectionMenu,\n                group: '1_basic',\n                title: nls.localize({ key: 'miSmartSelectShrink', comment: ['&& denotes a mnemonic'] }, \"&&Shrink Selection\"),\n                order: 3\n            }\n        });\n    }\n}\nregisterEditorContribution(SmartSelectController.ID, SmartSelectController, 4 /* EditorContributionInstantiation.Lazy */);\nregisterEditorAction(GrowSelectionAction);\nregisterEditorAction(ShrinkSelectionAction);\nexport function provideSelectionRanges(registry, model, positions, options, token) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const providers = registry.all(model)\n            .concat(new WordSelectionRangeProvider()); // ALWAYS have word based selection range\n        if (providers.length === 1) {\n            // add word selection and bracket selection when no provider exists\n            providers.unshift(new BracketSelectionRangeProvider());\n        }\n        const work = [];\n        const allRawRanges = [];\n        for (const provider of providers) {\n            work.push(Promise.resolve(provider.provideSelectionRanges(model, positions, token)).then(allProviderRanges => {\n                if (arrays.isNonEmptyArray(allProviderRanges) && allProviderRanges.length === positions.length) {\n                    for (let i = 0; i < positions.length; i++) {\n                        if (!allRawRanges[i]) {\n                            allRawRanges[i] = [];\n                        }\n                        for (const oneProviderRanges of allProviderRanges[i]) {\n                            if (Range.isIRange(oneProviderRanges.range) && Range.containsPosition(oneProviderRanges.range, positions[i])) {\n                                allRawRanges[i].push(Range.lift(oneProviderRanges.range));\n                            }\n                        }\n                    }\n                }\n            }, onUnexpectedExternalError));\n        }\n        yield Promise.all(work);\n        return allRawRanges.map(oneRawRanges => {\n            if (oneRawRanges.length === 0) {\n                return [];\n            }\n            // sort all by start/end position\n            oneRawRanges.sort((a, b) => {\n                if (Position.isBefore(a.getStartPosition(), b.getStartPosition())) {\n                    return 1;\n                }\n                else if (Position.isBefore(b.getStartPosition(), a.getStartPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(a.getEndPosition(), b.getEndPosition())) {\n                    return -1;\n                }\n                else if (Position.isBefore(b.getEndPosition(), a.getEndPosition())) {\n                    return 1;\n                }\n                else {\n                    return 0;\n                }\n            });\n            // remove ranges that don't contain the former range or that are equal to the\n            // former range\n            const oneRanges = [];\n            let last;\n            for (const range of oneRawRanges) {\n                if (!last || (Range.containsRange(range, last) && !Range.equalsRange(range, last))) {\n                    oneRanges.push(range);\n                    last = range;\n                }\n            }\n            if (!options.selectLeadingAndTrailingWhitespace) {\n                return oneRanges;\n            }\n            // add ranges that expand trivia at line starts and ends whenever a range\n            // wraps onto the a new line\n            const oneRangesWithTrivia = [oneRanges[0]];\n            for (let i = 1; i < oneRanges.length; i++) {\n                const prev = oneRanges[i - 1];\n                const cur = oneRanges[i];\n                if (cur.startLineNumber !== prev.startLineNumber || cur.endLineNumber !== prev.endLineNumber) {\n                    // add line/block range without leading/failing whitespace\n                    const rangeNoWhitespace = new Range(prev.startLineNumber, model.getLineFirstNonWhitespaceColumn(prev.startLineNumber), prev.endLineNumber, model.getLineLastNonWhitespaceColumn(prev.endLineNumber));\n                    if (rangeNoWhitespace.containsRange(prev) && !rangeNoWhitespace.equalsRange(prev) && cur.containsRange(rangeNoWhitespace) && !cur.equalsRange(rangeNoWhitespace)) {\n                        oneRangesWithTrivia.push(rangeNoWhitespace);\n                    }\n                    // add line/block range\n                    const rangeFull = new Range(prev.startLineNumber, 1, prev.endLineNumber, model.getLineMaxColumn(prev.endLineNumber));\n                    if (rangeFull.containsRange(prev) && !rangeFull.equalsRange(rangeNoWhitespace) && cur.containsRange(rangeFull) && !cur.equalsRange(rangeFull)) {\n                        oneRangesWithTrivia.push(rangeFull);\n                    }\n                }\n                oneRangesWithTrivia.push(cur);\n            }\n            return oneRangesWithTrivia;\n        });\n    });\n}\nCommandsRegistry.registerCommand('_executeSelectionRangeProvider', function (accessor, ...args) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const [resource, positions] = args;\n        assertType(URI.isUri(resource));\n        const registry = accessor.get(ILanguageFeaturesService).selectionRangeProvider;\n        const reference = yield accessor.get(ITextModelService).createModelReference(resource);\n        try {\n            return provideSelectionRanges(registry, reference.object.textEditorModel, positions, { selectLeadingAndTrailingWhitespace: true }, CancellationToken.None);\n        }\n        finally {\n            reference.dispose();\n        }\n    });\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { EditorCommand, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { Position } from '../../../common/core/position.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { showSimpleSuggestions } from '../../suggest/browser/suggest.js';\nimport { localize } from '../../../../nls.js';\nimport { ContextKeyExpr, IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { SnippetSession } from './snippetSession.js';\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    undoStopBefore: true,\n    undoStopAfter: true,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nexport let SnippetController2 = class SnippetController2 {\n    static get(editor) {\n        return editor.getContribution(SnippetController2.ID);\n    }\n    constructor(_editor, _logService, _languageFeaturesService, contextKeyService, _languageConfigurationService) {\n        this._editor = _editor;\n        this._logService = _logService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._snippetListener = new DisposableStore();\n        this._modelVersionId = -1;\n        this._inSnippet = SnippetController2.InSnippetMode.bindTo(contextKeyService);\n        this._hasNextTabstop = SnippetController2.HasNextTabstop.bindTo(contextKeyService);\n        this._hasPrevTabstop = SnippetController2.HasPrevTabstop.bindTo(contextKeyService);\n    }\n    dispose() {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._snippetListener.dispose();\n    }\n    insert(template, opts) {\n        // this is here to find out more about the yet-not-understood\n        // error that sometimes happens when we fail to inserted a nested\n        // snippet\n        try {\n            this._doInsert(template, typeof opts === 'undefined' ? _defaultOptions : Object.assign(Object.assign({}, _defaultOptions), opts));\n        }\n        catch (e) {\n            this.cancel();\n            this._logService.error(e);\n            this._logService.error('snippet_error');\n            this._logService.error('insert_template=', template);\n            this._logService.error('existing_template=', this._session ? this._session._logInfo() : '<no_session>');\n        }\n    }\n    _doInsert(template, opts) {\n        var _a;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // don't listen while inserting the snippet\n        // as that is the inflight state causing cancelation\n        this._snippetListener.clear();\n        if (opts.undoStopBefore) {\n            this._editor.getModel().pushStackElement();\n        }\n        // don't merge\n        if (this._session && typeof template !== 'string') {\n            this.cancel();\n        }\n        if (!this._session) {\n            this._modelVersionId = this._editor.getModel().getAlternativeVersionId();\n            this._session = new SnippetSession(this._editor, template, opts, this._languageConfigurationService);\n            this._session.insert();\n        }\n        else {\n            assertType(typeof template === 'string');\n            this._session.merge(template, opts);\n        }\n        if (opts.undoStopAfter) {\n            this._editor.getModel().pushStackElement();\n        }\n        // regster completion item provider when there is any choice element\n        if ((_a = this._session) === null || _a === void 0 ? void 0 : _a.hasChoice) {\n            this._choiceCompletionItemProvider = {\n                provideCompletionItems: (model, position) => {\n                    if (!this._session || model !== this._editor.getModel() || !Position.equals(this._editor.getPosition(), position)) {\n                        return undefined;\n                    }\n                    const { activeChoice } = this._session;\n                    if (!activeChoice || activeChoice.choice.options.length === 0) {\n                        return undefined;\n                    }\n                    const word = model.getValueInRange(activeChoice.range);\n                    const isAnyOfOptions = Boolean(activeChoice.choice.options.find(o => o.value === word));\n                    const suggestions = [];\n                    for (let i = 0; i < activeChoice.choice.options.length; i++) {\n                        const option = activeChoice.choice.options[i];\n                        suggestions.push({\n                            kind: 13 /* CompletionItemKind.Value */,\n                            label: option.value,\n                            insertText: option.value,\n                            sortText: 'a'.repeat(i + 1),\n                            range: activeChoice.range,\n                            filterText: isAnyOfOptions ? `${word}_${option.value}` : undefined,\n                            command: { id: 'jumpToNextSnippetPlaceholder', title: localize('next', 'Go to next placeholder...') }\n                        });\n                    }\n                    return { suggestions };\n                }\n            };\n            const registration = this._languageFeaturesService.completionProvider.register({\n                language: this._editor.getModel().getLanguageId(),\n                pattern: this._editor.getModel().uri.fsPath,\n                scheme: this._editor.getModel().uri.scheme,\n                exclusive: true\n            }, this._choiceCompletionItemProvider);\n            this._snippetListener.add(registration);\n        }\n        this._updateState();\n        this._snippetListener.add(this._editor.onDidChangeModelContent(e => e.isFlush && this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeModel(() => this.cancel()));\n        this._snippetListener.add(this._editor.onDidChangeCursorSelection(() => this._updateState()));\n    }\n    _updateState() {\n        if (!this._session || !this._editor.hasModel()) {\n            // canceled in the meanwhile\n            return;\n        }\n        if (this._modelVersionId === this._editor.getModel().getAlternativeVersionId()) {\n            // undo until the 'before' state happened\n            // and makes use cancel snippet mode\n            return this.cancel();\n        }\n        if (!this._session.hasPlaceholder) {\n            // don't listen for selection changes and don't\n            // update context keys when the snippet is plain text\n            return this.cancel();\n        }\n        if (this._session.isAtLastPlaceholder || !this._session.isSelectionWithinPlaceholders()) {\n            this._editor.getModel().pushStackElement();\n            return this.cancel();\n        }\n        this._inSnippet.set(true);\n        this._hasPrevTabstop.set(!this._session.isAtFirstPlaceholder);\n        this._hasNextTabstop.set(!this._session.isAtLastPlaceholder);\n        this._handleChoice();\n    }\n    _handleChoice() {\n        if (!this._session || !this._editor.hasModel()) {\n            this._currentChoice = undefined;\n            return;\n        }\n        const { activeChoice } = this._session;\n        if (!activeChoice || !this._choiceCompletionItemProvider) {\n            this._currentChoice = undefined;\n            return;\n        }\n        if (this._currentChoice !== activeChoice.choice) {\n            this._currentChoice = activeChoice.choice;\n            // trigger suggest with the special choice completion provider\n            queueMicrotask(() => {\n                showSimpleSuggestions(this._editor, this._choiceCompletionItemProvider);\n            });\n        }\n    }\n    finish() {\n        while (this._inSnippet.get()) {\n            this.next();\n        }\n    }\n    cancel(resetSelection = false) {\n        var _a;\n        this._inSnippet.reset();\n        this._hasPrevTabstop.reset();\n        this._hasNextTabstop.reset();\n        this._snippetListener.clear();\n        this._currentChoice = undefined;\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._session = undefined;\n        this._modelVersionId = -1;\n        if (resetSelection) {\n            // reset selection to the primary cursor when being asked\n            // for. this happens when explicitly cancelling snippet mode,\n            // e.g. when pressing ESC\n            this._editor.setSelections([this._editor.getSelection()]);\n        }\n    }\n    prev() {\n        var _a;\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.prev();\n        this._updateState();\n    }\n    next() {\n        var _a;\n        (_a = this._session) === null || _a === void 0 ? void 0 : _a.next();\n        this._updateState();\n    }\n    isInSnippet() {\n        return Boolean(this._inSnippet.get());\n    }\n};\nSnippetController2.ID = 'snippetController2';\nSnippetController2.InSnippetMode = new RawContextKey('inSnippetMode', false, localize('inSnippetMode', \"Whether the editor in current in snippet mode\"));\nSnippetController2.HasNextTabstop = new RawContextKey('hasNextTabstop', false, localize('hasNextTabstop', \"Whether there is a next tab stop when in snippet mode\"));\nSnippetController2.HasPrevTabstop = new RawContextKey('hasPrevTabstop', false, localize('hasPrevTabstop', \"Whether there is a previous tab stop when in snippet mode\"));\nSnippetController2 = __decorate([\n    __param(1, ILogService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IContextKeyService),\n    __param(4, ILanguageConfigurationService)\n], SnippetController2);\nregisterEditorContribution(SnippetController2.ID, SnippetController2, 4 /* EditorContributionInstantiation.Lazy */);\nconst CommandCtor = EditorCommand.bindToContribution(SnippetController2.get);\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToNextSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasNextTabstop),\n    handler: ctrl => ctrl.next(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'jumpToPrevSnippetPlaceholder',\n    precondition: ContextKeyExpr.and(SnippetController2.InSnippetMode, SnippetController2.HasPrevTabstop),\n    handler: ctrl => ctrl.prev(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'leaveSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.cancel(true),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */ + 30,\n        kbExpr: EditorContextKeys.editorTextFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new CommandCtor({\n    id: 'acceptSnippet',\n    precondition: SnippetController2.InSnippetMode,\n    handler: ctrl => ctrl.finish(),\n    // kbOpts: {\n    // \tweight: KeybindingWeight.EditorContrib + 30,\n    // \tkbExpr: EditorContextKeys.textFocus,\n    // \tprimary: KeyCode.Enter,\n    // }\n}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class Scanner {\n    constructor() {\n        this.value = '';\n        this.pos = 0;\n    }\n    static isDigitCharacter(ch) {\n        return ch >= 48 /* CharCode.Digit0 */ && ch <= 57 /* CharCode.Digit9 */;\n    }\n    static isVariableCharacter(ch) {\n        return ch === 95 /* CharCode.Underline */\n            || (ch >= 97 /* CharCode.a */ && ch <= 122 /* CharCode.z */)\n            || (ch >= 65 /* CharCode.A */ && ch <= 90 /* CharCode.Z */);\n    }\n    text(value) {\n        this.value = value;\n        this.pos = 0;\n    }\n    tokenText(token) {\n        return this.value.substr(token.pos, token.len);\n    }\n    next() {\n        if (this.pos >= this.value.length) {\n            return { type: 14 /* TokenType.EOF */, pos: this.pos, len: 0 };\n        }\n        const pos = this.pos;\n        let len = 0;\n        let ch = this.value.charCodeAt(pos);\n        let type;\n        // static types\n        type = Scanner._table[ch];\n        if (typeof type === 'number') {\n            this.pos += 1;\n            return { type, pos, len: 1 };\n        }\n        // number\n        if (Scanner.isDigitCharacter(ch)) {\n            type = 8 /* TokenType.Int */;\n            do {\n                len += 1;\n                ch = this.value.charCodeAt(pos + len);\n            } while (Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // variable name\n        if (Scanner.isVariableCharacter(ch)) {\n            type = 9 /* TokenType.VariableName */;\n            do {\n                ch = this.value.charCodeAt(pos + (++len));\n            } while (Scanner.isVariableCharacter(ch) || Scanner.isDigitCharacter(ch));\n            this.pos += len;\n            return { type, pos, len };\n        }\n        // format\n        type = 10 /* TokenType.Format */;\n        do {\n            len += 1;\n            ch = this.value.charCodeAt(pos + len);\n        } while (!isNaN(ch)\n            && typeof Scanner._table[ch] === 'undefined' // not static token\n            && !Scanner.isDigitCharacter(ch) // not number\n            && !Scanner.isVariableCharacter(ch) // not variable\n        );\n        this.pos += len;\n        return { type, pos, len };\n    }\n}\nScanner._table = {\n    [36 /* CharCode.DollarSign */]: 0 /* TokenType.Dollar */,\n    [58 /* CharCode.Colon */]: 1 /* TokenType.Colon */,\n    [44 /* CharCode.Comma */]: 2 /* TokenType.Comma */,\n    [123 /* CharCode.OpenCurlyBrace */]: 3 /* TokenType.CurlyOpen */,\n    [125 /* CharCode.CloseCurlyBrace */]: 4 /* TokenType.CurlyClose */,\n    [92 /* CharCode.Backslash */]: 5 /* TokenType.Backslash */,\n    [47 /* CharCode.Slash */]: 6 /* TokenType.Forwardslash */,\n    [124 /* CharCode.Pipe */]: 7 /* TokenType.Pipe */,\n    [43 /* CharCode.Plus */]: 11 /* TokenType.Plus */,\n    [45 /* CharCode.Dash */]: 12 /* TokenType.Dash */,\n    [63 /* CharCode.QuestionMark */]: 13 /* TokenType.QuestionMark */,\n};\nexport class Marker {\n    constructor() {\n        this._children = [];\n    }\n    appendChild(child) {\n        if (child instanceof Text && this._children[this._children.length - 1] instanceof Text) {\n            // this and previous child are text -> merge them\n            this._children[this._children.length - 1].value += child.value;\n        }\n        else {\n            // normal adoption of child\n            child.parent = this;\n            this._children.push(child);\n        }\n        return this;\n    }\n    replace(child, others) {\n        const { parent } = child;\n        const idx = parent.children.indexOf(child);\n        const newChildren = parent.children.slice(0);\n        newChildren.splice(idx, 1, ...others);\n        parent._children = newChildren;\n        (function _fixParent(children, parent) {\n            for (const child of children) {\n                child.parent = parent;\n                _fixParent(child.children, child);\n            }\n        })(others, parent);\n    }\n    get children() {\n        return this._children;\n    }\n    get rightMostDescendant() {\n        if (this._children.length > 0) {\n            return this._children[this._children.length - 1].rightMostDescendant;\n        }\n        return this;\n    }\n    get snippet() {\n        let candidate = this;\n        while (true) {\n            if (!candidate) {\n                return undefined;\n            }\n            if (candidate instanceof TextmateSnippet) {\n                return candidate;\n            }\n            candidate = candidate.parent;\n        }\n    }\n    toString() {\n        return this.children.reduce((prev, cur) => prev + cur.toString(), '');\n    }\n    len() {\n        return 0;\n    }\n}\nexport class Text extends Marker {\n    constructor(value) {\n        super();\n        this.value = value;\n    }\n    toString() {\n        return this.value;\n    }\n    len() {\n        return this.value.length;\n    }\n    clone() {\n        return new Text(this.value);\n    }\n}\nexport class TransformableMarker extends Marker {\n}\nexport class Placeholder extends TransformableMarker {\n    static compareByIndex(a, b) {\n        if (a.index === b.index) {\n            return 0;\n        }\n        else if (a.isFinalTabstop) {\n            return 1;\n        }\n        else if (b.isFinalTabstop) {\n            return -1;\n        }\n        else if (a.index < b.index) {\n            return -1;\n        }\n        else if (a.index > b.index) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    constructor(index) {\n        super();\n        this.index = index;\n    }\n    get isFinalTabstop() {\n        return this.index === 0;\n    }\n    get choice() {\n        return this._children.length === 1 && this._children[0] instanceof Choice\n            ? this._children[0]\n            : undefined;\n    }\n    clone() {\n        const ret = new Placeholder(this.index);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class Choice extends Marker {\n    constructor() {\n        super(...arguments);\n        this.options = [];\n    }\n    appendChild(marker) {\n        if (marker instanceof Text) {\n            marker.parent = this;\n            this.options.push(marker);\n        }\n        return this;\n    }\n    toString() {\n        return this.options[0].value;\n    }\n    len() {\n        return this.options[0].len();\n    }\n    clone() {\n        const ret = new Choice();\n        this.options.forEach(ret.appendChild, ret);\n        return ret;\n    }\n}\nexport class Transform extends Marker {\n    constructor() {\n        super(...arguments);\n        this.regexp = new RegExp('');\n    }\n    resolve(value) {\n        const _this = this;\n        let didMatch = false;\n        let ret = value.replace(this.regexp, function () {\n            didMatch = true;\n            return _this._replace(Array.prototype.slice.call(arguments, 0, -2));\n        });\n        // when the regex didn't match and when the transform has\n        // else branches, then run those\n        if (!didMatch && this._children.some(child => child instanceof FormatString && Boolean(child.elseValue))) {\n            ret = this._replace([]);\n        }\n        return ret;\n    }\n    _replace(groups) {\n        let ret = '';\n        for (const marker of this._children) {\n            if (marker instanceof FormatString) {\n                let value = groups[marker.index] || '';\n                value = marker.resolve(value);\n                ret += value;\n            }\n            else {\n                ret += marker.toString();\n            }\n        }\n        return ret;\n    }\n    toString() {\n        return '';\n    }\n    clone() {\n        const ret = new Transform();\n        ret.regexp = new RegExp(this.regexp.source, '' + (this.regexp.ignoreCase ? 'i' : '') + (this.regexp.global ? 'g' : ''));\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nexport class FormatString extends Marker {\n    constructor(index, shorthandName, ifValue, elseValue) {\n        super();\n        this.index = index;\n        this.shorthandName = shorthandName;\n        this.ifValue = ifValue;\n        this.elseValue = elseValue;\n    }\n    resolve(value) {\n        if (this.shorthandName === 'upcase') {\n            return !value ? '' : value.toLocaleUpperCase();\n        }\n        else if (this.shorthandName === 'downcase') {\n            return !value ? '' : value.toLocaleLowerCase();\n        }\n        else if (this.shorthandName === 'capitalize') {\n            return !value ? '' : (value[0].toLocaleUpperCase() + value.substr(1));\n        }\n        else if (this.shorthandName === 'pascalcase') {\n            return !value ? '' : this._toPascalCase(value);\n        }\n        else if (this.shorthandName === 'camelcase') {\n            return !value ? '' : this._toCamelCase(value);\n        }\n        else if (Boolean(value) && typeof this.ifValue === 'string') {\n            return this.ifValue;\n        }\n        else if (!Boolean(value) && typeof this.elseValue === 'string') {\n            return this.elseValue;\n        }\n        else {\n            return value || '';\n        }\n    }\n    _toPascalCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map(word => {\n            return word.charAt(0).toUpperCase() + word.substr(1);\n        })\n            .join('');\n    }\n    _toCamelCase(value) {\n        const match = value.match(/[a-z0-9]+/gi);\n        if (!match) {\n            return value;\n        }\n        return match.map((word, index) => {\n            if (index === 0) {\n                return word.charAt(0).toLowerCase() + word.substr(1);\n            }\n            return word.charAt(0).toUpperCase() + word.substr(1);\n        })\n            .join('');\n    }\n    clone() {\n        const ret = new FormatString(this.index, this.shorthandName, this.ifValue, this.elseValue);\n        return ret;\n    }\n}\nexport class Variable extends TransformableMarker {\n    constructor(name) {\n        super();\n        this.name = name;\n    }\n    resolve(resolver) {\n        let value = resolver.resolve(this);\n        if (this.transform) {\n            value = this.transform.resolve(value || '');\n        }\n        if (value !== undefined) {\n            this._children = [new Text(value)];\n            return true;\n        }\n        return false;\n    }\n    clone() {\n        const ret = new Variable(this.name);\n        if (this.transform) {\n            ret.transform = this.transform.clone();\n        }\n        ret._children = this.children.map(child => child.clone());\n        return ret;\n    }\n}\nfunction walk(marker, visitor) {\n    const stack = [...marker];\n    while (stack.length > 0) {\n        const marker = stack.shift();\n        const recurse = visitor(marker);\n        if (!recurse) {\n            break;\n        }\n        stack.unshift(...marker.children);\n    }\n}\nexport class TextmateSnippet extends Marker {\n    get placeholderInfo() {\n        if (!this._placeholders) {\n            // fill in placeholders\n            const all = [];\n            let last;\n            this.walk(function (candidate) {\n                if (candidate instanceof Placeholder) {\n                    all.push(candidate);\n                    last = !last || last.index < candidate.index ? candidate : last;\n                }\n                return true;\n            });\n            this._placeholders = { all, last };\n        }\n        return this._placeholders;\n    }\n    get placeholders() {\n        const { all } = this.placeholderInfo;\n        return all;\n    }\n    offset(marker) {\n        let pos = 0;\n        let found = false;\n        this.walk(candidate => {\n            if (candidate === marker) {\n                found = true;\n                return false;\n            }\n            pos += candidate.len();\n            return true;\n        });\n        if (!found) {\n            return -1;\n        }\n        return pos;\n    }\n    fullLen(marker) {\n        let ret = 0;\n        walk([marker], marker => {\n            ret += marker.len();\n            return true;\n        });\n        return ret;\n    }\n    enclosingPlaceholders(placeholder) {\n        const ret = [];\n        let { parent } = placeholder;\n        while (parent) {\n            if (parent instanceof Placeholder) {\n                ret.push(parent);\n            }\n            parent = parent.parent;\n        }\n        return ret;\n    }\n    resolveVariables(resolver) {\n        this.walk(candidate => {\n            if (candidate instanceof Variable) {\n                if (candidate.resolve(resolver)) {\n                    this._placeholders = undefined;\n                }\n            }\n            return true;\n        });\n        return this;\n    }\n    appendChild(child) {\n        this._placeholders = undefined;\n        return super.appendChild(child);\n    }\n    replace(child, others) {\n        this._placeholders = undefined;\n        return super.replace(child, others);\n    }\n    clone() {\n        const ret = new TextmateSnippet();\n        this._children = this.children.map(child => child.clone());\n        return ret;\n    }\n    walk(visitor) {\n        walk(this.children, visitor);\n    }\n}\nexport class SnippetParser {\n    constructor() {\n        this._scanner = new Scanner();\n        this._token = { type: 14 /* TokenType.EOF */, pos: 0, len: 0 };\n    }\n    static escape(value) {\n        return value.replace(/\\$|}|\\\\/g, '\\\\$&');\n    }\n    static guessNeedsClipboard(template) {\n        return /\\${?CLIPBOARD/.test(template);\n    }\n    parse(value, insertFinalTabstop, enforceFinalTabstop) {\n        const snippet = new TextmateSnippet();\n        this.parseFragment(value, snippet);\n        this.ensureFinalTabstop(snippet, enforceFinalTabstop !== null && enforceFinalTabstop !== void 0 ? enforceFinalTabstop : false, insertFinalTabstop !== null && insertFinalTabstop !== void 0 ? insertFinalTabstop : false);\n        return snippet;\n    }\n    parseFragment(value, snippet) {\n        const offset = snippet.children.length;\n        this._scanner.text(value);\n        this._token = this._scanner.next();\n        while (this._parse(snippet)) {\n            // nothing\n        }\n        // fill in values for placeholders. the first placeholder of an index\n        // that has a value defines the value for all placeholders with that index\n        const placeholderDefaultValues = new Map();\n        const incompletePlaceholders = [];\n        snippet.walk(marker => {\n            if (marker instanceof Placeholder) {\n                if (marker.isFinalTabstop) {\n                    placeholderDefaultValues.set(0, undefined);\n                }\n                else if (!placeholderDefaultValues.has(marker.index) && marker.children.length > 0) {\n                    placeholderDefaultValues.set(marker.index, marker.children);\n                }\n                else {\n                    incompletePlaceholders.push(marker);\n                }\n            }\n            return true;\n        });\n        const fillInIncompletePlaceholder = (placeholder, stack) => {\n            const defaultValues = placeholderDefaultValues.get(placeholder.index);\n            if (!defaultValues) {\n                return;\n            }\n            const clone = new Placeholder(placeholder.index);\n            clone.transform = placeholder.transform;\n            for (const child of defaultValues) {\n                const newChild = child.clone();\n                clone.appendChild(newChild);\n                // \"recurse\" on children that are again placeholders\n                if (newChild instanceof Placeholder && placeholderDefaultValues.has(newChild.index) && !stack.has(newChild.index)) {\n                    stack.add(newChild.index);\n                    fillInIncompletePlaceholder(newChild, stack);\n                    stack.delete(newChild.index);\n                }\n            }\n            snippet.replace(placeholder, [clone]);\n        };\n        const stack = new Set();\n        for (const placeholder of incompletePlaceholders) {\n            fillInIncompletePlaceholder(placeholder, stack);\n        }\n        return snippet.children.slice(offset);\n    }\n    ensureFinalTabstop(snippet, enforceFinalTabstop, insertFinalTabstop) {\n        if (enforceFinalTabstop || insertFinalTabstop && snippet.placeholders.length > 0) {\n            const finalTabstop = snippet.placeholders.find(p => p.index === 0);\n            if (!finalTabstop) {\n                // the snippet uses placeholders but has no\n                // final tabstop defined -> insert at the end\n                snippet.appendChild(new Placeholder(0));\n            }\n        }\n    }\n    _accept(type, value) {\n        if (type === undefined || this._token.type === type) {\n            const ret = !value ? true : this._scanner.tokenText(this._token);\n            this._token = this._scanner.next();\n            return ret;\n        }\n        return false;\n    }\n    _backTo(token) {\n        this._scanner.pos = token.pos + token.len;\n        this._token = token;\n        return false;\n    }\n    _until(type) {\n        const start = this._token;\n        while (this._token.type !== type) {\n            if (this._token.type === 14 /* TokenType.EOF */) {\n                return false;\n            }\n            else if (this._token.type === 5 /* TokenType.Backslash */) {\n                const nextToken = this._scanner.next();\n                if (nextToken.type !== 0 /* TokenType.Dollar */\n                    && nextToken.type !== 4 /* TokenType.CurlyClose */\n                    && nextToken.type !== 5 /* TokenType.Backslash */) {\n                    return false;\n                }\n            }\n            this._token = this._scanner.next();\n        }\n        const value = this._scanner.value.substring(start.pos, this._token.pos).replace(/\\\\(\\$|}|\\\\)/g, '$1');\n        this._token = this._scanner.next();\n        return value;\n    }\n    _parse(marker) {\n        return this._parseEscaped(marker)\n            || this._parseTabstopOrVariableName(marker)\n            || this._parseComplexPlaceholder(marker)\n            || this._parseComplexVariable(marker)\n            || this._parseAnything(marker);\n    }\n    // \\$, \\\\, \\} -> just text\n    _parseEscaped(marker) {\n        let value;\n        if (value = this._accept(5 /* TokenType.Backslash */, true)) {\n            // saw a backslash, append escaped token or that backslash\n            value = this._accept(0 /* TokenType.Dollar */, true)\n                || this._accept(4 /* TokenType.CurlyClose */, true)\n                || this._accept(5 /* TokenType.Backslash */, true)\n                || value;\n            marker.appendChild(new Text(value));\n            return true;\n        }\n        return false;\n    }\n    // $foo -> variable, $1 -> tabstop\n    _parseTabstopOrVariableName(parent) {\n        let value;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && (value = this._accept(9 /* TokenType.VariableName */, true) || this._accept(8 /* TokenType.Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        parent.appendChild(/^\\d+$/.test(value)\n            ? new Placeholder(Number(value))\n            : new Variable(value));\n        return true;\n    }\n    // ${1:<children>}, ${1} -> placeholder\n    _parseComplexPlaceholder(parent) {\n        let index;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && this._accept(3 /* TokenType.CurlyOpen */)\n            && (index = this._accept(8 /* TokenType.Int */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const placeholder = new Placeholder(Number(index));\n        if (this._accept(1 /* TokenType.Colon */)) {\n            // ${1:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* TokenType.CurlyClose */)) {\n                    parent.appendChild(placeholder);\n                    return true;\n                }\n                if (this._parse(placeholder)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + index + ':'));\n                placeholder.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (placeholder.index > 0 && this._accept(7 /* TokenType.Pipe */)) {\n            // ${1|one,two,three|}\n            const choice = new Choice();\n            while (true) {\n                if (this._parseChoiceElement(choice)) {\n                    if (this._accept(2 /* TokenType.Comma */)) {\n                        // opt, -> more\n                        continue;\n                    }\n                    if (this._accept(7 /* TokenType.Pipe */)) {\n                        placeholder.appendChild(choice);\n                        if (this._accept(4 /* TokenType.CurlyClose */)) {\n                            // ..|} -> done\n                            parent.appendChild(placeholder);\n                            return true;\n                        }\n                    }\n                }\n                this._backTo(token);\n                return false;\n            }\n        }\n        else if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${1/<regex>/<format>/<options>}\n            if (this._parseTransform(placeholder)) {\n                parent.appendChild(placeholder);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${1}\n            parent.appendChild(placeholder);\n            return true;\n        }\n        else {\n            // ${1 <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseChoiceElement(parent) {\n        const token = this._token;\n        const values = [];\n        while (true) {\n            if (this._token.type === 2 /* TokenType.Comma */ || this._token.type === 7 /* TokenType.Pipe */) {\n                break;\n            }\n            let value;\n            if (value = this._accept(5 /* TokenType.Backslash */, true)) {\n                // \\, \\|, or \\\\\n                value = this._accept(2 /* TokenType.Comma */, true)\n                    || this._accept(7 /* TokenType.Pipe */, true)\n                    || this._accept(5 /* TokenType.Backslash */, true)\n                    || value;\n            }\n            else {\n                value = this._accept(undefined, true);\n            }\n            if (!value) {\n                // EOF\n                this._backTo(token);\n                return false;\n            }\n            values.push(value);\n        }\n        if (values.length === 0) {\n            this._backTo(token);\n            return false;\n        }\n        parent.appendChild(new Text(values.join('')));\n        return true;\n    }\n    // ${foo:<children>}, ${foo} -> variable\n    _parseComplexVariable(parent) {\n        let name;\n        const token = this._token;\n        const match = this._accept(0 /* TokenType.Dollar */)\n            && this._accept(3 /* TokenType.CurlyOpen */)\n            && (name = this._accept(9 /* TokenType.VariableName */, true));\n        if (!match) {\n            return this._backTo(token);\n        }\n        const variable = new Variable(name);\n        if (this._accept(1 /* TokenType.Colon */)) {\n            // ${foo:<children>}\n            while (true) {\n                // ...} -> done\n                if (this._accept(4 /* TokenType.CurlyClose */)) {\n                    parent.appendChild(variable);\n                    return true;\n                }\n                if (this._parse(variable)) {\n                    continue;\n                }\n                // fallback\n                parent.appendChild(new Text('${' + name + ':'));\n                variable.children.forEach(parent.appendChild, parent);\n                return true;\n            }\n        }\n        else if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${foo/<regex>/<format>/<options>}\n            if (this._parseTransform(variable)) {\n                parent.appendChild(variable);\n                return true;\n            }\n            this._backTo(token);\n            return false;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${foo}\n            parent.appendChild(variable);\n            return true;\n        }\n        else {\n            // ${foo <- missing curly or colon\n            return this._backTo(token);\n        }\n    }\n    _parseTransform(parent) {\n        // ...<regex>/<format>/<options>}\n        const transform = new Transform();\n        let regexValue = '';\n        let regexOptions = '';\n        // (1) /regex\n        while (true) {\n            if (this._accept(6 /* TokenType.Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\n                escaped = this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\n                regexValue += escaped;\n                continue;\n            }\n            if (this._token.type !== 14 /* TokenType.EOF */) {\n                regexValue += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        // (2) /format\n        while (true) {\n            if (this._accept(6 /* TokenType.Forwardslash */)) {\n                break;\n            }\n            let escaped;\n            if (escaped = this._accept(5 /* TokenType.Backslash */, true)) {\n                escaped = this._accept(5 /* TokenType.Backslash */, true) || this._accept(6 /* TokenType.Forwardslash */, true) || escaped;\n                transform.appendChild(new Text(escaped));\n                continue;\n            }\n            if (this._parseFormatString(transform) || this._parseAnything(transform)) {\n                continue;\n            }\n            return false;\n        }\n        // (3) /option\n        while (true) {\n            if (this._accept(4 /* TokenType.CurlyClose */)) {\n                break;\n            }\n            if (this._token.type !== 14 /* TokenType.EOF */) {\n                regexOptions += this._accept(undefined, true);\n                continue;\n            }\n            return false;\n        }\n        try {\n            transform.regexp = new RegExp(regexValue, regexOptions);\n        }\n        catch (e) {\n            // invalid regexp\n            return false;\n        }\n        parent.transform = transform;\n        return true;\n    }\n    _parseFormatString(parent) {\n        const token = this._token;\n        if (!this._accept(0 /* TokenType.Dollar */)) {\n            return false;\n        }\n        let complex = false;\n        if (this._accept(3 /* TokenType.CurlyOpen */)) {\n            complex = true;\n        }\n        const index = this._accept(8 /* TokenType.Int */, true);\n        if (!index) {\n            this._backTo(token);\n            return false;\n        }\n        else if (!complex) {\n            // $1\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (this._accept(4 /* TokenType.CurlyClose */)) {\n            // ${1}\n            parent.appendChild(new FormatString(Number(index)));\n            return true;\n        }\n        else if (!this._accept(1 /* TokenType.Colon */)) {\n            this._backTo(token);\n            return false;\n        }\n        if (this._accept(6 /* TokenType.Forwardslash */)) {\n            // ${1:/upcase}\n            const shorthand = this._accept(9 /* TokenType.VariableName */, true);\n            if (!shorthand || !this._accept(4 /* TokenType.CurlyClose */)) {\n                this._backTo(token);\n                return false;\n            }\n            else {\n                parent.appendChild(new FormatString(Number(index), shorthand));\n                return true;\n            }\n        }\n        else if (this._accept(11 /* TokenType.Plus */)) {\n            // ${1:+<if>}\n            const ifValue = this._until(4 /* TokenType.CurlyClose */);\n            if (ifValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, ifValue, undefined));\n                return true;\n            }\n        }\n        else if (this._accept(12 /* TokenType.Dash */)) {\n            // ${2:-<else>}\n            const elseValue = this._until(4 /* TokenType.CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        else if (this._accept(13 /* TokenType.QuestionMark */)) {\n            // ${2:?<if>:<else>}\n            const ifValue = this._until(1 /* TokenType.Colon */);\n            if (ifValue) {\n                const elseValue = this._until(4 /* TokenType.CurlyClose */);\n                if (elseValue) {\n                    parent.appendChild(new FormatString(Number(index), undefined, ifValue, elseValue));\n                    return true;\n                }\n            }\n        }\n        else {\n            // ${1:<else>}\n            const elseValue = this._until(4 /* TokenType.CurlyClose */);\n            if (elseValue) {\n                parent.appendChild(new FormatString(Number(index), undefined, undefined, elseValue));\n                return true;\n            }\n        }\n        this._backTo(token);\n        return false;\n    }\n    _parseAnything(marker) {\n        if (this._token.type !== 14 /* TokenType.EOF */) {\n            marker.appendChild(new Text(this._scanner.tokenText(this._token)));\n            this._accept(undefined);\n            return true;\n        }\n        return false;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { normalizeDriveLetter } from '../../../../base/common/labels.js';\nimport * as path from '../../../../base/common/path.js';\nimport { dirname } from '../../../../base/common/resources.js';\nimport { commonPrefixLength, getLeadingWhitespace, isFalsyOrWhitespace, splitLines } from '../../../../base/common/strings.js';\nimport { generateUuid } from '../../../../base/common/uuid.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { Text } from './snippetParser.js';\nimport * as nls from '../../../../nls.js';\nimport { WORKSPACE_EXTENSION, isSingleFolderWorkspaceIdentifier, toWorkspaceIdentifier, isEmptyWorkspaceIdentifier } from '../../../../platform/workspace/common/workspace.js';\nexport const KnownSnippetVariableNames = Object.freeze({\n    'CURRENT_YEAR': true,\n    'CURRENT_YEAR_SHORT': true,\n    'CURRENT_MONTH': true,\n    'CURRENT_DATE': true,\n    'CURRENT_HOUR': true,\n    'CURRENT_MINUTE': true,\n    'CURRENT_SECOND': true,\n    'CURRENT_DAY_NAME': true,\n    'CURRENT_DAY_NAME_SHORT': true,\n    'CURRENT_MONTH_NAME': true,\n    'CURRENT_MONTH_NAME_SHORT': true,\n    'CURRENT_SECONDS_UNIX': true,\n    'CURRENT_TIMEZONE_OFFSET': true,\n    'SELECTION': true,\n    'CLIPBOARD': true,\n    'TM_SELECTED_TEXT': true,\n    'TM_CURRENT_LINE': true,\n    'TM_CURRENT_WORD': true,\n    'TM_LINE_INDEX': true,\n    'TM_LINE_NUMBER': true,\n    'TM_FILENAME': true,\n    'TM_FILENAME_BASE': true,\n    'TM_DIRECTORY': true,\n    'TM_FILEPATH': true,\n    'CURSOR_INDEX': true,\n    'CURSOR_NUMBER': true,\n    'RELATIVE_FILEPATH': true,\n    'BLOCK_COMMENT_START': true,\n    'BLOCK_COMMENT_END': true,\n    'LINE_COMMENT': true,\n    'WORKSPACE_NAME': true,\n    'WORKSPACE_FOLDER': true,\n    'RANDOM': true,\n    'RANDOM_HEX': true,\n    'UUID': true\n});\nexport class CompositeSnippetVariableResolver {\n    constructor(_delegates) {\n        this._delegates = _delegates;\n        //\n    }\n    resolve(variable) {\n        for (const delegate of this._delegates) {\n            const value = delegate.resolve(variable);\n            if (value !== undefined) {\n                return value;\n            }\n        }\n        return undefined;\n    }\n}\nexport class SelectionBasedVariableResolver {\n    constructor(_model, _selection, _selectionIdx, _overtypingCapturer) {\n        this._model = _model;\n        this._selection = _selection;\n        this._selectionIdx = _selectionIdx;\n        this._overtypingCapturer = _overtypingCapturer;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'SELECTION' || name === 'TM_SELECTED_TEXT') {\n            let value = this._model.getValueInRange(this._selection) || undefined;\n            let isMultiline = this._selection.startLineNumber !== this._selection.endLineNumber;\n            // If there was no selected text, try to get last overtyped text\n            if (!value && this._overtypingCapturer) {\n                const info = this._overtypingCapturer.getLastOvertypedInfo(this._selectionIdx);\n                if (info) {\n                    value = info.value;\n                    isMultiline = info.multiline;\n                }\n            }\n            if (value && isMultiline && variable.snippet) {\n                // Selection is a multiline string which we indentation we now\n                // need to adjust. We compare the indentation of this variable\n                // with the indentation at the editor position and add potential\n                // extra indentation to the value\n                const line = this._model.getLineContent(this._selection.startLineNumber);\n                const lineLeadingWhitespace = getLeadingWhitespace(line, 0, this._selection.startColumn - 1);\n                let varLeadingWhitespace = lineLeadingWhitespace;\n                variable.snippet.walk(marker => {\n                    if (marker === variable) {\n                        return false;\n                    }\n                    if (marker instanceof Text) {\n                        varLeadingWhitespace = getLeadingWhitespace(splitLines(marker.value).pop());\n                    }\n                    return true;\n                });\n                const whitespaceCommonLength = commonPrefixLength(varLeadingWhitespace, lineLeadingWhitespace);\n                value = value.replace(/(\\r\\n|\\r|\\n)(.*)/g, (m, newline, rest) => `${newline}${varLeadingWhitespace.substr(whitespaceCommonLength)}${rest}`);\n            }\n            return value;\n        }\n        else if (name === 'TM_CURRENT_LINE') {\n            return this._model.getLineContent(this._selection.positionLineNumber);\n        }\n        else if (name === 'TM_CURRENT_WORD') {\n            const info = this._model.getWordAtPosition({\n                lineNumber: this._selection.positionLineNumber,\n                column: this._selection.positionColumn\n            });\n            return info && info.word || undefined;\n        }\n        else if (name === 'TM_LINE_INDEX') {\n            return String(this._selection.positionLineNumber - 1);\n        }\n        else if (name === 'TM_LINE_NUMBER') {\n            return String(this._selection.positionLineNumber);\n        }\n        else if (name === 'CURSOR_INDEX') {\n            return String(this._selectionIdx);\n        }\n        else if (name === 'CURSOR_NUMBER') {\n            return String(this._selectionIdx + 1);\n        }\n        return undefined;\n    }\n}\nexport class ModelBasedVariableResolver {\n    constructor(_labelService, _model) {\n        this._labelService = _labelService;\n        this._model = _model;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'TM_FILENAME') {\n            return path.basename(this._model.uri.fsPath);\n        }\n        else if (name === 'TM_FILENAME_BASE') {\n            const name = path.basename(this._model.uri.fsPath);\n            const idx = name.lastIndexOf('.');\n            if (idx <= 0) {\n                return name;\n            }\n            else {\n                return name.slice(0, idx);\n            }\n        }\n        else if (name === 'TM_DIRECTORY') {\n            if (path.dirname(this._model.uri.fsPath) === '.') {\n                return '';\n            }\n            return this._labelService.getUriLabel(dirname(this._model.uri));\n        }\n        else if (name === 'TM_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri);\n        }\n        else if (name === 'RELATIVE_FILEPATH') {\n            return this._labelService.getUriLabel(this._model.uri, { relative: true, noPrefix: true });\n        }\n        return undefined;\n    }\n}\nexport class ClipboardBasedVariableResolver {\n    constructor(_readClipboardText, _selectionIdx, _selectionCount, _spread) {\n        this._readClipboardText = _readClipboardText;\n        this._selectionIdx = _selectionIdx;\n        this._selectionCount = _selectionCount;\n        this._spread = _spread;\n        //\n    }\n    resolve(variable) {\n        if (variable.name !== 'CLIPBOARD') {\n            return undefined;\n        }\n        const clipboardText = this._readClipboardText();\n        if (!clipboardText) {\n            return undefined;\n        }\n        // `spread` is assigning each cursor a line of the clipboard\n        // text whenever there the line count equals the cursor count\n        // and when enabled\n        if (this._spread) {\n            const lines = clipboardText.split(/\\r\\n|\\n|\\r/).filter(s => !isFalsyOrWhitespace(s));\n            if (lines.length === this._selectionCount) {\n                return lines[this._selectionIdx];\n            }\n        }\n        return clipboardText;\n    }\n}\nexport let CommentBasedVariableResolver = class CommentBasedVariableResolver {\n    constructor(_model, _selection, _languageConfigurationService) {\n        this._model = _model;\n        this._selection = _selection;\n        this._languageConfigurationService = _languageConfigurationService;\n        //\n    }\n    resolve(variable) {\n        const { name } = variable;\n        const langId = this._model.getLanguageIdAtPosition(this._selection.selectionStartLineNumber, this._selection.selectionStartColumn);\n        const config = this._languageConfigurationService.getLanguageConfiguration(langId).comments;\n        if (!config) {\n            return undefined;\n        }\n        if (name === 'LINE_COMMENT') {\n            return config.lineCommentToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_START') {\n            return config.blockCommentStartToken || undefined;\n        }\n        else if (name === 'BLOCK_COMMENT_END') {\n            return config.blockCommentEndToken || undefined;\n        }\n        return undefined;\n    }\n};\nCommentBasedVariableResolver = __decorate([\n    __param(2, ILanguageConfigurationService)\n], CommentBasedVariableResolver);\nexport class TimeBasedVariableResolver {\n    constructor() {\n        this._date = new Date();\n    }\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'CURRENT_YEAR') {\n            return String(this._date.getFullYear());\n        }\n        else if (name === 'CURRENT_YEAR_SHORT') {\n            return String(this._date.getFullYear()).slice(-2);\n        }\n        else if (name === 'CURRENT_MONTH') {\n            return String(this._date.getMonth().valueOf() + 1).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DATE') {\n            return String(this._date.getDate().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_HOUR') {\n            return String(this._date.getHours().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_MINUTE') {\n            return String(this._date.getMinutes().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_SECOND') {\n            return String(this._date.getSeconds().valueOf()).padStart(2, '0');\n        }\n        else if (name === 'CURRENT_DAY_NAME') {\n            return TimeBasedVariableResolver.dayNames[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_DAY_NAME_SHORT') {\n            return TimeBasedVariableResolver.dayNamesShort[this._date.getDay()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME') {\n            return TimeBasedVariableResolver.monthNames[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_MONTH_NAME_SHORT') {\n            return TimeBasedVariableResolver.monthNamesShort[this._date.getMonth()];\n        }\n        else if (name === 'CURRENT_SECONDS_UNIX') {\n            return String(Math.floor(this._date.getTime() / 1000));\n        }\n        else if (name === 'CURRENT_TIMEZONE_OFFSET') {\n            const rawTimeOffset = this._date.getTimezoneOffset();\n            const sign = rawTimeOffset > 0 ? '-' : '+';\n            const hours = Math.trunc(Math.abs(rawTimeOffset / 60));\n            const hoursString = (hours < 10 ? '0' + hours : hours);\n            const minutes = Math.abs(rawTimeOffset) - hours * 60;\n            const minutesString = (minutes < 10 ? '0' + minutes : minutes);\n            return sign + hoursString + ':' + minutesString;\n        }\n        return undefined;\n    }\n}\nTimeBasedVariableResolver.dayNames = [nls.localize('Sunday', \"Sunday\"), nls.localize('Monday', \"Monday\"), nls.localize('Tuesday', \"Tuesday\"), nls.localize('Wednesday', \"Wednesday\"), nls.localize('Thursday', \"Thursday\"), nls.localize('Friday', \"Friday\"), nls.localize('Saturday', \"Saturday\")];\nTimeBasedVariableResolver.dayNamesShort = [nls.localize('SundayShort', \"Sun\"), nls.localize('MondayShort', \"Mon\"), nls.localize('TuesdayShort', \"Tue\"), nls.localize('WednesdayShort', \"Wed\"), nls.localize('ThursdayShort', \"Thu\"), nls.localize('FridayShort', \"Fri\"), nls.localize('SaturdayShort', \"Sat\")];\nTimeBasedVariableResolver.monthNames = [nls.localize('January', \"January\"), nls.localize('February', \"February\"), nls.localize('March', \"March\"), nls.localize('April', \"April\"), nls.localize('May', \"May\"), nls.localize('June', \"June\"), nls.localize('July', \"July\"), nls.localize('August', \"August\"), nls.localize('September', \"September\"), nls.localize('October', \"October\"), nls.localize('November', \"November\"), nls.localize('December', \"December\")];\nTimeBasedVariableResolver.monthNamesShort = [nls.localize('JanuaryShort', \"Jan\"), nls.localize('FebruaryShort', \"Feb\"), nls.localize('MarchShort', \"Mar\"), nls.localize('AprilShort', \"Apr\"), nls.localize('MayShort', \"May\"), nls.localize('JuneShort', \"Jun\"), nls.localize('JulyShort', \"Jul\"), nls.localize('AugustShort', \"Aug\"), nls.localize('SeptemberShort', \"Sep\"), nls.localize('OctoberShort', \"Oct\"), nls.localize('NovemberShort', \"Nov\"), nls.localize('DecemberShort', \"Dec\")];\nexport class WorkspaceBasedVariableResolver {\n    constructor(_workspaceService) {\n        this._workspaceService = _workspaceService;\n        //\n    }\n    resolve(variable) {\n        if (!this._workspaceService) {\n            return undefined;\n        }\n        const workspaceIdentifier = toWorkspaceIdentifier(this._workspaceService.getWorkspace());\n        if (isEmptyWorkspaceIdentifier(workspaceIdentifier)) {\n            return undefined;\n        }\n        if (variable.name === 'WORKSPACE_NAME') {\n            return this._resolveWorkspaceName(workspaceIdentifier);\n        }\n        else if (variable.name === 'WORKSPACE_FOLDER') {\n            return this._resoveWorkspacePath(workspaceIdentifier);\n        }\n        return undefined;\n    }\n    _resolveWorkspaceName(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return path.basename(workspaceIdentifier.uri.path);\n        }\n        let filename = path.basename(workspaceIdentifier.configPath.path);\n        if (filename.endsWith(WORKSPACE_EXTENSION)) {\n            filename = filename.substr(0, filename.length - WORKSPACE_EXTENSION.length - 1);\n        }\n        return filename;\n    }\n    _resoveWorkspacePath(workspaceIdentifier) {\n        if (isSingleFolderWorkspaceIdentifier(workspaceIdentifier)) {\n            return normalizeDriveLetter(workspaceIdentifier.uri.fsPath);\n        }\n        const filename = path.basename(workspaceIdentifier.configPath.path);\n        let folderpath = workspaceIdentifier.configPath.fsPath;\n        if (folderpath.endsWith(filename)) {\n            folderpath = folderpath.substr(0, folderpath.length - filename.length - 1);\n        }\n        return (folderpath ? normalizeDriveLetter(folderpath) : '/');\n    }\n}\nexport class RandomBasedVariableResolver {\n    resolve(variable) {\n        const { name } = variable;\n        if (name === 'RANDOM') {\n            return Math.random().toString().slice(-6);\n        }\n        else if (name === 'RANDOM_HEX') {\n            return Math.random().toString(16).slice(-6);\n        }\n        else if (name === 'UUID') {\n            return generateUuid();\n        }\n        return undefined;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { groupBy } from '../../../../base/common/arrays.js';\nimport { dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace } from '../../../../base/common/strings.js';\nimport './snippetSession.css';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Range } from '../../../common/core/range.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { ILabelService } from '../../../../platform/label/common/label.js';\nimport { IWorkspaceContextService } from '../../../../platform/workspace/common/workspace.js';\nimport { Choice, Placeholder, SnippetParser, Text, TextmateSnippet } from './snippetParser.js';\nimport { ClipboardBasedVariableResolver, CommentBasedVariableResolver, CompositeSnippetVariableResolver, ModelBasedVariableResolver, RandomBasedVariableResolver, SelectionBasedVariableResolver, TimeBasedVariableResolver, WorkspaceBasedVariableResolver } from './snippetVariables.js';\nexport class OneSnippet {\n    constructor(_editor, _snippet, _snippetLineLeadingWhitespace) {\n        this._editor = _editor;\n        this._snippet = _snippet;\n        this._snippetLineLeadingWhitespace = _snippetLineLeadingWhitespace;\n        this._offset = -1;\n        this._nestingLevel = 1;\n        this._placeholderGroups = groupBy(_snippet.placeholders, Placeholder.compareByIndex);\n        this._placeholderGroupsIdx = -1;\n    }\n    initialize(textChange) {\n        this._offset = textChange.newPosition;\n    }\n    dispose() {\n        if (this._placeholderDecorations) {\n            this._editor.removeDecorations([...this._placeholderDecorations.values()]);\n        }\n        this._placeholderGroups.length = 0;\n    }\n    _initDecorations() {\n        if (this._offset === -1) {\n            throw new Error(`Snippet not initialized!`);\n        }\n        if (this._placeholderDecorations) {\n            // already initialized\n            return;\n        }\n        this._placeholderDecorations = new Map();\n        const model = this._editor.getModel();\n        this._editor.changeDecorations(accessor => {\n            // create a decoration for each placeholder\n            for (const placeholder of this._snippet.placeholders) {\n                const placeholderOffset = this._snippet.offset(placeholder);\n                const placeholderLen = this._snippet.fullLen(placeholder);\n                const range = Range.fromPositions(model.getPositionAt(this._offset + placeholderOffset), model.getPositionAt(this._offset + placeholderOffset + placeholderLen));\n                const options = placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive;\n                const handle = accessor.addDecoration(range, options);\n                this._placeholderDecorations.set(placeholder, handle);\n            }\n        });\n    }\n    move(fwd) {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        this._initDecorations();\n        // Transform placeholder text if necessary\n        if (this._placeholderGroupsIdx >= 0) {\n            const operations = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                // Check if the placeholder has a transformation\n                if (placeholder.transform) {\n                    const id = this._placeholderDecorations.get(placeholder);\n                    const range = this._editor.getModel().getDecorationRange(id);\n                    const currentValue = this._editor.getModel().getValueInRange(range);\n                    const transformedValueLines = placeholder.transform.resolve(currentValue).split(/\\r\\n|\\r|\\n/);\n                    // fix indentation for transformed lines\n                    for (let i = 1; i < transformedValueLines.length; i++) {\n                        transformedValueLines[i] = this._editor.getModel().normalizeIndentation(this._snippetLineLeadingWhitespace + transformedValueLines[i]);\n                    }\n                    operations.push(EditOperation.replace(range, transformedValueLines.join(this._editor.getModel().getEOL())));\n                }\n            }\n            if (operations.length > 0) {\n                this._editor.executeEdits('snippet.placeholderTransform', operations);\n            }\n        }\n        let couldSkipThisPlaceholder = false;\n        if (fwd === true && this._placeholderGroupsIdx < this._placeholderGroups.length - 1) {\n            this._placeholderGroupsIdx += 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else if (fwd === false && this._placeholderGroupsIdx > 0) {\n            this._placeholderGroupsIdx -= 1;\n            couldSkipThisPlaceholder = true;\n        }\n        else {\n            // the selection of the current placeholder might\n            // not acurate any more -> simply restore it\n        }\n        const newSelections = this._editor.getModel().changeDecorations(accessor => {\n            const activePlaceholders = new Set();\n            // change stickiness to always grow when typing at its edges\n            // because these decorations represent the currently active\n            // tabstop.\n            // Special case #1: reaching the final tabstop\n            // Special case #2: placeholders enclosing active placeholders\n            const selections = [];\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                selections.push(new Selection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn));\n                // consider to skip this placeholder index when the decoration\n                // range is empty but when the placeholder wasn't. that's a strong\n                // hint that the placeholder has been deleted. (all placeholder must match this)\n                couldSkipThisPlaceholder = couldSkipThisPlaceholder && this._hasPlaceholderBeenCollapsed(placeholder);\n                accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                activePlaceholders.add(placeholder);\n                for (const enclosingPlaceholder of this._snippet.enclosingPlaceholders(placeholder)) {\n                    const id = this._placeholderDecorations.get(enclosingPlaceholder);\n                    accessor.changeDecorationOptions(id, enclosingPlaceholder.isFinalTabstop ? OneSnippet._decor.activeFinal : OneSnippet._decor.active);\n                    activePlaceholders.add(enclosingPlaceholder);\n                }\n            }\n            // change stickness to never grow when typing at its edges\n            // so that in-active tabstops never grow\n            for (const [placeholder, id] of this._placeholderDecorations) {\n                if (!activePlaceholders.has(placeholder)) {\n                    accessor.changeDecorationOptions(id, placeholder.isFinalTabstop ? OneSnippet._decor.inactiveFinal : OneSnippet._decor.inactive);\n                }\n            }\n            return selections;\n        });\n        return !couldSkipThisPlaceholder ? newSelections !== null && newSelections !== void 0 ? newSelections : [] : this.move(fwd);\n    }\n    _hasPlaceholderBeenCollapsed(placeholder) {\n        // A placeholder is empty when it wasn't empty when authored but\n        // when its tracking decoration is empty. This also applies to all\n        // potential parent placeholders\n        let marker = placeholder;\n        while (marker) {\n            if (marker instanceof Placeholder) {\n                const id = this._placeholderDecorations.get(marker);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (range.isEmpty() && marker.toString().length > 0) {\n                    return true;\n                }\n            }\n            marker = marker.parent;\n        }\n        return false;\n    }\n    get isAtFirstPlaceholder() {\n        return this._placeholderGroupsIdx <= 0 || this._placeholderGroups.length === 0;\n    }\n    get isAtLastPlaceholder() {\n        return this._placeholderGroupsIdx === this._placeholderGroups.length - 1;\n    }\n    get hasPlaceholder() {\n        return this._snippet.placeholders.length > 0;\n    }\n    /**\n     * A snippet is trivial when it has no placeholder or only a final placeholder at\n     * its very end\n     */\n    get isTrivialSnippet() {\n        if (this._snippet.placeholders.length === 0) {\n            return true;\n        }\n        if (this._snippet.placeholders.length === 1) {\n            const [placeholder] = this._snippet.placeholders;\n            if (placeholder.isFinalTabstop) {\n                if (this._snippet.rightMostDescendant === placeholder) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    computePossibleSelections() {\n        const result = new Map();\n        for (const placeholdersWithEqualIndex of this._placeholderGroups) {\n            let ranges;\n            for (const placeholder of placeholdersWithEqualIndex) {\n                if (placeholder.isFinalTabstop) {\n                    // ignore those\n                    break;\n                }\n                if (!ranges) {\n                    ranges = [];\n                    result.set(placeholder.index, ranges);\n                }\n                const id = this._placeholderDecorations.get(placeholder);\n                const range = this._editor.getModel().getDecorationRange(id);\n                if (!range) {\n                    // one of the placeholder lost its decoration and\n                    // therefore we bail out and pretend the placeholder\n                    // (with its mirrors) doesn't exist anymore.\n                    result.delete(placeholder.index);\n                    break;\n                }\n                ranges.push(range);\n            }\n        }\n        return result;\n    }\n    get activeChoice() {\n        if (!this._placeholderDecorations) {\n            return undefined;\n        }\n        const placeholder = this._placeholderGroups[this._placeholderGroupsIdx][0];\n        if (!(placeholder === null || placeholder === void 0 ? void 0 : placeholder.choice)) {\n            return undefined;\n        }\n        const id = this._placeholderDecorations.get(placeholder);\n        if (!id) {\n            return undefined;\n        }\n        const range = this._editor.getModel().getDecorationRange(id);\n        if (!range) {\n            return undefined;\n        }\n        return { range, choice: placeholder.choice };\n    }\n    get hasChoice() {\n        let result = false;\n        this._snippet.walk(marker => {\n            result = marker instanceof Choice;\n            return !result;\n        });\n        return result;\n    }\n    merge(others) {\n        const model = this._editor.getModel();\n        this._nestingLevel *= 10;\n        this._editor.changeDecorations(accessor => {\n            // For each active placeholder take one snippet and merge it\n            // in that the placeholder (can be many for `$1foo$1foo`). Because\n            // everything is sorted by editor selection we can simply remove\n            // elements from the beginning of the array\n            for (const placeholder of this._placeholderGroups[this._placeholderGroupsIdx]) {\n                const nested = others.shift();\n                console.assert(nested._offset !== -1);\n                console.assert(!nested._placeholderDecorations);\n                // Massage placeholder-indicies of the nested snippet to be\n                // sorted right after the insertion point. This ensures we move\n                // through the placeholders in the correct order\n                const indexLastPlaceholder = nested._snippet.placeholderInfo.last.index;\n                for (const nestedPlaceholder of nested._snippet.placeholderInfo.all) {\n                    if (nestedPlaceholder.isFinalTabstop) {\n                        nestedPlaceholder.index = placeholder.index + ((indexLastPlaceholder + 1) / this._nestingLevel);\n                    }\n                    else {\n                        nestedPlaceholder.index = placeholder.index + (nestedPlaceholder.index / this._nestingLevel);\n                    }\n                }\n                this._snippet.replace(placeholder, nested._snippet.children);\n                // Remove the placeholder at which position are inserting\n                // the snippet and also remove its decoration.\n                const id = this._placeholderDecorations.get(placeholder);\n                accessor.removeDecoration(id);\n                this._placeholderDecorations.delete(placeholder);\n                // For each *new* placeholder we create decoration to monitor\n                // how and if it grows/shrinks.\n                for (const placeholder of nested._snippet.placeholders) {\n                    const placeholderOffset = nested._snippet.offset(placeholder);\n                    const placeholderLen = nested._snippet.fullLen(placeholder);\n                    const range = Range.fromPositions(model.getPositionAt(nested._offset + placeholderOffset), model.getPositionAt(nested._offset + placeholderOffset + placeholderLen));\n                    const handle = accessor.addDecoration(range, OneSnippet._decor.inactive);\n                    this._placeholderDecorations.set(placeholder, handle);\n                }\n            }\n            // Last, re-create the placeholder groups by sorting placeholders by their index.\n            this._placeholderGroups = groupBy(this._snippet.placeholders, Placeholder.compareByIndex);\n        });\n    }\n}\nOneSnippet._decor = {\n    active: ModelDecorationOptions.register({ description: 'snippet-placeholder-1', stickiness: 0 /* TrackedRangeStickiness.AlwaysGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    inactive: ModelDecorationOptions.register({ description: 'snippet-placeholder-2', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'snippet-placeholder' }),\n    activeFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-3', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n    inactiveFinal: ModelDecorationOptions.register({ description: 'snippet-placeholder-4', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */, className: 'finish-snippet-placeholder' }),\n};\nconst _defaultOptions = {\n    overwriteBefore: 0,\n    overwriteAfter: 0,\n    adjustWhitespace: true,\n    clipboardText: undefined,\n    overtypingCapturer: undefined\n};\nexport let SnippetSession = class SnippetSession {\n    static adjustWhitespace(model, position, adjustIndentation, snippet, filter) {\n        const line = model.getLineContent(position.lineNumber);\n        const lineLeadingWhitespace = getLeadingWhitespace(line, 0, position.column - 1);\n        // the snippet as inserted\n        let snippetTextString;\n        snippet.walk(marker => {\n            // all text elements that are not inside choice\n            if (!(marker instanceof Text) || marker.parent instanceof Choice) {\n                return true;\n            }\n            // check with filter (iff provided)\n            if (filter && !filter.has(marker)) {\n                return true;\n            }\n            const lines = marker.value.split(/\\r\\n|\\r|\\n/);\n            if (adjustIndentation) {\n                // adjust indentation of snippet test\n                // -the snippet-start doesn't get extra-indented (lineLeadingWhitespace), only normalized\n                // -all N+1 lines get extra-indented and normalized\n                // -the text start get extra-indented and normalized when following a linebreak\n                const offset = snippet.offset(marker);\n                if (offset === 0) {\n                    // snippet start\n                    lines[0] = model.normalizeIndentation(lines[0]);\n                }\n                else {\n                    // check if text start is after a linebreak\n                    snippetTextString = snippetTextString !== null && snippetTextString !== void 0 ? snippetTextString : snippet.toString();\n                    const prevChar = snippetTextString.charCodeAt(offset - 1);\n                    if (prevChar === 10 /* CharCode.LineFeed */ || prevChar === 13 /* CharCode.CarriageReturn */) {\n                        lines[0] = model.normalizeIndentation(lineLeadingWhitespace + lines[0]);\n                    }\n                }\n                for (let i = 1; i < lines.length; i++) {\n                    lines[i] = model.normalizeIndentation(lineLeadingWhitespace + lines[i]);\n                }\n            }\n            const newValue = lines.join(model.getEOL());\n            if (newValue !== marker.value) {\n                marker.parent.replace(marker, [new Text(newValue)]);\n                snippetTextString = undefined;\n            }\n            return true;\n        });\n        return lineLeadingWhitespace;\n    }\n    static adjustSelection(model, selection, overwriteBefore, overwriteAfter) {\n        if (overwriteBefore !== 0 || overwriteAfter !== 0) {\n            // overwrite[Before|After] is compute using the position, not the whole\n            // selection. therefore we adjust the selection around that position\n            const { positionLineNumber, positionColumn } = selection;\n            const positionColumnBefore = positionColumn - overwriteBefore;\n            const positionColumnAfter = positionColumn + overwriteAfter;\n            const range = model.validateRange({\n                startLineNumber: positionLineNumber,\n                startColumn: positionColumnBefore,\n                endLineNumber: positionLineNumber,\n                endColumn: positionColumnAfter\n            });\n            selection = Selection.createWithDirection(range.startLineNumber, range.startColumn, range.endLineNumber, range.endColumn, selection.getDirection());\n        }\n        return selection;\n    }\n    static createEditsAndSnippetsFromSelections(editor, template, overwriteBefore, overwriteAfter, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\n        const edits = [];\n        const snippets = [];\n        if (!editor.hasModel()) {\n            return { edits, snippets };\n        }\n        const model = editor.getModel();\n        const workspaceService = editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService));\n        const modelBasedVariableResolver = editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model));\n        const readClipboardText = () => clipboardText;\n        // know what text the overwrite[Before|After] extensions\n        // of the primary curser have selected because only when\n        // secondary selections extend to the same text we can grow them\n        const firstBeforeText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), overwriteBefore, 0));\n        const firstAfterText = model.getValueInRange(SnippetSession.adjustSelection(model, editor.getSelection(), 0, overwriteAfter));\n        // remember the first non-whitespace column to decide if\n        // `keepWhitespace` should be overruled for secondary selections\n        const firstLineFirstNonWhitespace = model.getLineFirstNonWhitespaceColumn(editor.getSelection().positionLineNumber);\n        // sort selections by their start position but remeber\n        // the original index. that allows you to create correct\n        // offset-based selection logic without changing the\n        // primary selection\n        const indexedSelections = editor.getSelections()\n            .map((selection, idx) => ({ selection, idx }))\n            .sort((a, b) => Range.compareRangesUsingStarts(a.selection, b.selection));\n        for (const { selection, idx } of indexedSelections) {\n            // extend selection with the `overwriteBefore` and `overwriteAfter` and then\n            // compare if this matches the extensions of the primary selection\n            let extensionBefore = SnippetSession.adjustSelection(model, selection, overwriteBefore, 0);\n            let extensionAfter = SnippetSession.adjustSelection(model, selection, 0, overwriteAfter);\n            if (firstBeforeText !== model.getValueInRange(extensionBefore)) {\n                extensionBefore = selection;\n            }\n            if (firstAfterText !== model.getValueInRange(extensionAfter)) {\n                extensionAfter = selection;\n            }\n            // merge the before and after selection into one\n            const snippetSelection = selection\n                .setStartPosition(extensionBefore.startLineNumber, extensionBefore.startColumn)\n                .setEndPosition(extensionAfter.endLineNumber, extensionAfter.endColumn);\n            const snippet = new SnippetParser().parse(template, true, enforceFinalTabstop);\n            // adjust the template string to match the indentation and\n            // whitespace rules of this insert location (can be different for each cursor)\n            // happens when being asked for (default) or when this is a secondary\n            // cursor and the leading whitespace is different\n            const start = snippetSelection.getStartPosition();\n            const snippetLineLeadingWhitespace = SnippetSession.adjustWhitespace(model, start, adjustWhitespace || (idx > 0 && firstLineFirstNonWhitespace !== model.getLineFirstNonWhitespaceColumn(selection.positionLineNumber)), snippet);\n            snippet.resolveVariables(new CompositeSnippetVariableResolver([\n                modelBasedVariableResolver,\n                new ClipboardBasedVariableResolver(readClipboardText, idx, indexedSelections.length, editor.getOption(76 /* EditorOption.multiCursorPaste */) === 'spread'),\n                new SelectionBasedVariableResolver(model, selection, idx, overtypingCapturer),\n                new CommentBasedVariableResolver(model, selection, languageConfigurationService),\n                new TimeBasedVariableResolver,\n                new WorkspaceBasedVariableResolver(workspaceService),\n                new RandomBasedVariableResolver,\n            ]));\n            // store snippets with the index of their originating selection.\n            // that ensures the primiary cursor stays primary despite not being\n            // the one with lowest start position\n            edits[idx] = EditOperation.replace(snippetSelection, snippet.toString());\n            edits[idx].identifier = { major: idx, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\n            edits[idx]._isTracked = true;\n            snippets[idx] = new OneSnippet(editor, snippet, snippetLineLeadingWhitespace);\n        }\n        return { edits, snippets };\n    }\n    static createEditsAndSnippetsFromEdits(editor, snippetEdits, enforceFinalTabstop, adjustWhitespace, clipboardText, overtypingCapturer, languageConfigurationService) {\n        if (!editor.hasModel() || snippetEdits.length === 0) {\n            return { edits: [], snippets: [] };\n        }\n        const edits = [];\n        const model = editor.getModel();\n        const parser = new SnippetParser();\n        const snippet = new TextmateSnippet();\n        // snippet variables resolver\n        const resolver = new CompositeSnippetVariableResolver([\n            editor.invokeWithinContext(accessor => new ModelBasedVariableResolver(accessor.get(ILabelService), model)),\n            new ClipboardBasedVariableResolver(() => clipboardText, 0, editor.getSelections().length, editor.getOption(76 /* EditorOption.multiCursorPaste */) === 'spread'),\n            new SelectionBasedVariableResolver(model, editor.getSelection(), 0, overtypingCapturer),\n            new CommentBasedVariableResolver(model, editor.getSelection(), languageConfigurationService),\n            new TimeBasedVariableResolver,\n            new WorkspaceBasedVariableResolver(editor.invokeWithinContext(accessor => accessor.get(IWorkspaceContextService))),\n            new RandomBasedVariableResolver,\n        ]);\n        //\n        snippetEdits = snippetEdits.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n        let offset = 0;\n        for (let i = 0; i < snippetEdits.length; i++) {\n            const { range, template } = snippetEdits[i];\n            // gaps between snippet edits are appended as text nodes. this\n            // ensures placeholder-offsets are later correct\n            if (i > 0) {\n                const lastRange = snippetEdits[i - 1].range;\n                const textRange = Range.fromPositions(lastRange.getEndPosition(), range.getStartPosition());\n                const textNode = new Text(model.getValueInRange(textRange));\n                snippet.appendChild(textNode);\n                offset += textNode.value.length;\n            }\n            const newNodes = parser.parseFragment(template, snippet);\n            SnippetSession.adjustWhitespace(model, range.getStartPosition(), true, snippet, new Set(newNodes));\n            snippet.resolveVariables(resolver);\n            const snippetText = snippet.toString();\n            const snippetFragmentText = snippetText.slice(offset);\n            offset = snippetText.length;\n            // make edit\n            const edit = EditOperation.replace(range, snippetFragmentText);\n            edit.identifier = { major: i, minor: 0 }; // mark the edit so only our undo edits will be used to generate end cursors\n            edit._isTracked = true;\n            edits.push(edit);\n        }\n        //\n        parser.ensureFinalTabstop(snippet, enforceFinalTabstop, true);\n        return {\n            edits,\n            snippets: [new OneSnippet(editor, snippet, '')]\n        };\n    }\n    constructor(_editor, _template, _options = _defaultOptions, _languageConfigurationService) {\n        this._editor = _editor;\n        this._template = _template;\n        this._options = _options;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._templateMerges = [];\n        this._snippets = [];\n    }\n    dispose() {\n        dispose(this._snippets);\n    }\n    _logInfo() {\n        return `template=\"${this._template}\", merged_templates=\"${this._templateMerges.join(' -> ')}\"`;\n    }\n    insert() {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        // make insert edit and start with first selections\n        const { edits, snippets } = typeof this._template === 'string'\n            ? SnippetSession.createEditsAndSnippetsFromSelections(this._editor, this._template, this._options.overwriteBefore, this._options.overwriteAfter, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService)\n            : SnippetSession.createEditsAndSnippetsFromEdits(this._editor, this._template, false, this._options.adjustWhitespace, this._options.clipboardText, this._options.overtypingCapturer, this._languageConfigurationService);\n        this._snippets = snippets;\n        this._editor.executeEdits('snippet', edits, _undoEdits => {\n            // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\n            // so we need to look only at the undo edits relevant for us.\n            // Our edits have an identifier set so that's how we can distinguish them\n            const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\n            for (let idx = 0; idx < snippets.length; idx++) {\n                snippets[idx].initialize(undoEdits[idx].textChange);\n            }\n            if (this._snippets[0].hasPlaceholder) {\n                return this._move(true);\n            }\n            else {\n                return undoEdits\n                    .map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n            }\n        });\n        this._editor.revealRange(this._editor.getSelections()[0]);\n    }\n    merge(template, options = _defaultOptions) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        this._templateMerges.push([this._snippets[0]._nestingLevel, this._snippets[0]._placeholderGroupsIdx, template]);\n        const { edits, snippets } = SnippetSession.createEditsAndSnippetsFromSelections(this._editor, template, options.overwriteBefore, options.overwriteAfter, true, options.adjustWhitespace, options.clipboardText, options.overtypingCapturer, this._languageConfigurationService);\n        this._editor.executeEdits('snippet', edits, _undoEdits => {\n            // Sometimes, the text buffer will remove automatic whitespace when doing any edits,\n            // so we need to look only at the undo edits relevant for us.\n            // Our edits have an identifier set so that's how we can distinguish them\n            const undoEdits = _undoEdits.filter(edit => !!edit.identifier);\n            for (let idx = 0; idx < snippets.length; idx++) {\n                snippets[idx].initialize(undoEdits[idx].textChange);\n            }\n            // Trivial snippets have no placeholder or are just the final placeholder. That means they\n            // are just text insertions and we don't need to merge the nested snippet into the existing\n            // snippet\n            const isTrivialSnippet = snippets[0].isTrivialSnippet;\n            if (!isTrivialSnippet) {\n                for (const snippet of this._snippets) {\n                    snippet.merge(snippets);\n                }\n                console.assert(snippets.length === 0);\n            }\n            if (this._snippets[0].hasPlaceholder && !isTrivialSnippet) {\n                return this._move(undefined);\n            }\n            else {\n                return undoEdits.map(edit => Selection.fromPositions(edit.range.getEndPosition()));\n            }\n        });\n    }\n    next() {\n        const newSelections = this._move(true);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    prev() {\n        const newSelections = this._move(false);\n        this._editor.setSelections(newSelections);\n        this._editor.revealPositionInCenterIfOutsideViewport(newSelections[0].getPosition());\n    }\n    _move(fwd) {\n        const selections = [];\n        for (const snippet of this._snippets) {\n            const oneSelection = snippet.move(fwd);\n            selections.push(...oneSelection);\n        }\n        return selections;\n    }\n    get isAtFirstPlaceholder() {\n        return this._snippets[0].isAtFirstPlaceholder;\n    }\n    get isAtLastPlaceholder() {\n        return this._snippets[0].isAtLastPlaceholder;\n    }\n    get hasPlaceholder() {\n        return this._snippets[0].hasPlaceholder;\n    }\n    get hasChoice() {\n        return this._snippets[0].hasChoice;\n    }\n    get activeChoice() {\n        return this._snippets[0].activeChoice;\n    }\n    isSelectionWithinPlaceholders() {\n        if (!this.hasPlaceholder) {\n            return false;\n        }\n        const selections = this._editor.getSelections();\n        if (selections.length < this._snippets.length) {\n            // this means we started snippet mode with N\n            // selections and have M (N > M) selections.\n            // So one snippet is without selection -> cancel\n            return false;\n        }\n        const allPossibleSelections = new Map();\n        for (const snippet of this._snippets) {\n            const possibleSelections = snippet.computePossibleSelections();\n            // for the first snippet find the placeholder (and its ranges)\n            // that contain at least one selection. for all remaining snippets\n            // the same placeholder (and their ranges) must be used.\n            if (allPossibleSelections.size === 0) {\n                for (const [index, ranges] of possibleSelections) {\n                    ranges.sort(Range.compareRangesUsingStarts);\n                    for (const selection of selections) {\n                        if (ranges[0].containsRange(selection)) {\n                            allPossibleSelections.set(index, []);\n                            break;\n                        }\n                    }\n                }\n            }\n            if (allPossibleSelections.size === 0) {\n                // return false if we couldn't associate a selection to\n                // this (the first) snippet\n                return false;\n            }\n            // add selections from 'this' snippet so that we know all\n            // selections for this placeholder\n            allPossibleSelections.forEach((array, index) => {\n                array.push(...possibleSelections.get(index));\n            });\n        }\n        // sort selections (and later placeholder-ranges). then walk both\n        // arrays and make sure the placeholder-ranges contain the corresponding\n        // selection\n        selections.sort(Range.compareRangesUsingStarts);\n        for (const [index, ranges] of allPossibleSelections) {\n            if (ranges.length !== selections.length) {\n                allPossibleSelections.delete(index);\n                continue;\n            }\n            ranges.sort(Range.compareRangesUsingStarts);\n            for (let i = 0; i < ranges.length; i++) {\n                if (!ranges[i].containsRange(selections[i])) {\n                    allPossibleSelections.delete(index);\n                    continue;\n                }\n            }\n        }\n        // from all possible selections we have deleted those\n        // that don't match with the current selection. if we don't\n        // have any left, we don't have a selection anymore\n        return allPossibleSelections.size > 0;\n    }\n};\nSnippetSession = __decorate([\n    __param(3, ILanguageConfigurationService)\n], SnippetSession);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { OutlineElement, OutlineGroup, OutlineModel } from '../../documentSymbols/browser/outlineModel.js';\nimport { createCancelablePromise, Delayer } from '../../../../base/common/async.js';\nimport { FoldingController, RangesLimitReporter } from '../../folding/browser/folding.js';\nimport { SyntaxRangeProvider } from '../../folding/browser/syntaxRangeProvider.js';\nimport { IndentRangeProvider } from '../../folding/browser/indentRangeProvider.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { StickyElement, StickyModel, StickyRange } from './stickyScrollElement.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nvar ModelProvider;\n(function (ModelProvider) {\n    ModelProvider[\"OUTLINE_MODEL\"] = \"outlineModel\";\n    ModelProvider[\"FOLDING_PROVIDER_MODEL\"] = \"foldingProviderModel\";\n    ModelProvider[\"INDENTATION_MODEL\"] = \"indentationModel\";\n})(ModelProvider || (ModelProvider = {}));\nvar Status;\n(function (Status) {\n    Status[Status[\"VALID\"] = 0] = \"VALID\";\n    Status[Status[\"INVALID\"] = 1] = \"INVALID\";\n    Status[Status[\"CANCELED\"] = 2] = \"CANCELED\";\n})(Status || (Status = {}));\nexport let StickyModelProvider = class StickyModelProvider {\n    constructor(_editor, _languageConfigurationService, _languageFeaturesService, defaultModel) {\n        this._editor = _editor;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._modelProviders = [];\n        this._modelPromise = null;\n        this._updateScheduler = new Delayer(300);\n        const stickyModelFromCandidateOutlineProvider = new StickyModelFromCandidateOutlineProvider(_languageFeaturesService);\n        const stickyModelFromSyntaxFoldingProvider = new StickyModelFromCandidateSyntaxFoldingProvider(this._editor, _languageFeaturesService);\n        const stickyModelFromIndentationFoldingProvider = new StickyModelFromCandidateIndentationFoldingProvider(this._editor, _languageConfigurationService);\n        switch (defaultModel) {\n            case ModelProvider.OUTLINE_MODEL:\n                this._modelProviders.push(stickyModelFromCandidateOutlineProvider);\n                this._modelProviders.push(stickyModelFromSyntaxFoldingProvider);\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\n                break;\n            case ModelProvider.FOLDING_PROVIDER_MODEL:\n                this._modelProviders.push(stickyModelFromSyntaxFoldingProvider);\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\n                break;\n            case ModelProvider.INDENTATION_MODEL:\n                this._modelProviders.push(stickyModelFromIndentationFoldingProvider);\n                break;\n        }\n        this._store = new DisposableStore();\n    }\n    _cancelModelPromise() {\n        if (this._modelPromise) {\n            this._modelPromise.cancel();\n            this._modelPromise = null;\n        }\n    }\n    update(textModel, textModelVersionId, token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            this._store.clear();\n            this._store.add({\n                dispose: () => {\n                    var _a;\n                    this._cancelModelPromise();\n                    (_a = this._updateScheduler) === null || _a === void 0 ? void 0 : _a.cancel();\n                }\n            });\n            this._cancelModelPromise();\n            return yield this._updateScheduler.trigger(() => __awaiter(this, void 0, void 0, function* () {\n                for (const modelProvider of this._modelProviders) {\n                    const { statusPromise, modelPromise } = modelProvider.computeStickyModel(textModel, textModelVersionId, token);\n                    this._modelPromise = modelPromise;\n                    const status = yield statusPromise;\n                    if (this._modelPromise !== modelPromise) {\n                        return null;\n                    }\n                    switch (status) {\n                        case Status.CANCELED:\n                            this._store.clear();\n                            return null;\n                        case Status.VALID:\n                            return modelProvider.stickyModel;\n                    }\n                }\n                return null;\n            }));\n        });\n    }\n};\nStickyModelProvider = __decorate([\n    __param(1, ILanguageConfigurationService),\n    __param(2, ILanguageFeaturesService)\n], StickyModelProvider);\nclass StickyModelCandidateProvider {\n    constructor() {\n        this._stickyModel = null;\n    }\n    get stickyModel() {\n        return this._stickyModel;\n    }\n    _invalid() {\n        this._stickyModel = null;\n        return Status.INVALID;\n    }\n    computeStickyModel(textModel, modelVersionId, token) {\n        if (token.isCancellationRequested || !this.isProviderValid(textModel)) {\n            return { statusPromise: this._invalid(), modelPromise: null };\n        }\n        const providerModelPromise = createCancelablePromise(token => this.createModelFromProvider(textModel, modelVersionId, token));\n        return {\n            statusPromise: providerModelPromise.then(providerModel => {\n                if (!this.isModelValid(providerModel)) {\n                    return this._invalid();\n                }\n                if (token.isCancellationRequested) {\n                    return Status.CANCELED;\n                }\n                this._stickyModel = this.createStickyModel(textModel, modelVersionId, token, providerModel);\n                return Status.VALID;\n            }).then(undefined, (err) => {\n                onUnexpectedError(err);\n                return Status.CANCELED;\n            }),\n            modelPromise: providerModelPromise\n        };\n    }\n    /**\n     * Method which checks whether the model returned by the provider is valid and can be used to compute a sticky model.\n     * This method by default returns true.\n     * @param model model returned by the provider\n     * @returns boolean indicating whether the model is valid\n     */\n    isModelValid(model) {\n        return true;\n    }\n    /**\n     * Method which checks whether the provider is valid before applying it to find the provider model.\n     * This method by default returns true.\n     * @param textModel text-model of the editor\n     * @returns boolean indicating whether the provider is valid\n     */\n    isProviderValid(textModel) {\n        return true;\n    }\n}\nlet StickyModelFromCandidateOutlineProvider = class StickyModelFromCandidateOutlineProvider extends StickyModelCandidateProvider {\n    constructor(_languageFeaturesService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n    }\n    createModelFromProvider(textModel, modelVersionId, token) {\n        return OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, textModel, token);\n    }\n    createStickyModel(textModel, modelVersionId, token, model) {\n        var _a;\n        const { stickyOutlineElement, providerID } = this._stickyModelFromOutlineModel(model, (_a = this._stickyModel) === null || _a === void 0 ? void 0 : _a.outlineProviderId);\n        return new StickyModel(textModel.uri, modelVersionId, stickyOutlineElement, providerID);\n    }\n    isModelValid(model) {\n        return model && model.children.size > 0;\n    }\n    _stickyModelFromOutlineModel(outlineModel, preferredProvider) {\n        let outlineElements;\n        // When several possible outline providers\n        if (Iterable.first(outlineModel.children.values()) instanceof OutlineGroup) {\n            const provider = Iterable.find(outlineModel.children.values(), outlineGroupOfModel => outlineGroupOfModel.id === preferredProvider);\n            if (provider) {\n                outlineElements = provider.children;\n            }\n            else {\n                let tempID = '';\n                let maxTotalSumOfRanges = -1;\n                let optimalOutlineGroup = undefined;\n                for (const [_key, outlineGroup] of outlineModel.children.entries()) {\n                    const totalSumRanges = this._findSumOfRangesOfGroup(outlineGroup);\n                    if (totalSumRanges > maxTotalSumOfRanges) {\n                        optimalOutlineGroup = outlineGroup;\n                        maxTotalSumOfRanges = totalSumRanges;\n                        tempID = outlineGroup.id;\n                    }\n                }\n                preferredProvider = tempID;\n                outlineElements = optimalOutlineGroup.children;\n            }\n        }\n        else {\n            outlineElements = outlineModel.children;\n        }\n        const stickyChildren = [];\n        const outlineElementsArray = Array.from(outlineElements.values()).sort((element1, element2) => {\n            const range1 = new StickyRange(element1.symbol.range.startLineNumber, element1.symbol.range.endLineNumber);\n            const range2 = new StickyRange(element2.symbol.range.startLineNumber, element2.symbol.range.endLineNumber);\n            return this._comparator(range1, range2);\n        });\n        for (const outlineElement of outlineElementsArray) {\n            stickyChildren.push(this._stickyModelFromOutlineElement(outlineElement, outlineElement.symbol.selectionRange.startLineNumber));\n        }\n        const stickyOutlineElement = new StickyElement(undefined, stickyChildren, undefined);\n        return {\n            stickyOutlineElement: stickyOutlineElement,\n            providerID: preferredProvider\n        };\n    }\n    _stickyModelFromOutlineElement(outlineElement, previousStartLine) {\n        const children = [];\n        for (const child of outlineElement.children.values()) {\n            if (child.symbol.selectionRange.startLineNumber !== child.symbol.range.endLineNumber) {\n                if (child.symbol.selectionRange.startLineNumber !== previousStartLine) {\n                    children.push(this._stickyModelFromOutlineElement(child, child.symbol.selectionRange.startLineNumber));\n                }\n                else {\n                    for (const subchild of child.children.values()) {\n                        children.push(this._stickyModelFromOutlineElement(subchild, child.symbol.selectionRange.startLineNumber));\n                    }\n                }\n            }\n        }\n        children.sort((child1, child2) => this._comparator(child1.range, child2.range));\n        const range = new StickyRange(outlineElement.symbol.selectionRange.startLineNumber, outlineElement.symbol.range.endLineNumber);\n        return new StickyElement(range, children, undefined);\n    }\n    _comparator(range1, range2) {\n        if (range1.startLineNumber !== range2.startLineNumber) {\n            return range1.startLineNumber - range2.startLineNumber;\n        }\n        else {\n            return range2.endLineNumber - range1.endLineNumber;\n        }\n    }\n    _findSumOfRangesOfGroup(outline) {\n        let res = 0;\n        for (const child of outline.children.values()) {\n            res += this._findSumOfRangesOfGroup(child);\n        }\n        if (outline instanceof OutlineElement) {\n            return res + outline.symbol.range.endLineNumber - outline.symbol.selectionRange.startLineNumber;\n        }\n        else {\n            return res;\n        }\n    }\n};\nStickyModelFromCandidateOutlineProvider = __decorate([\n    __param(0, ILanguageFeaturesService)\n], StickyModelFromCandidateOutlineProvider);\nclass StickyModelFromCandidateFoldingProvider extends StickyModelCandidateProvider {\n    constructor(editor) {\n        super();\n        this._foldingLimitReporter = new RangesLimitReporter(editor);\n    }\n    createStickyModel(textModel, modelVersionId, token, model) {\n        const foldingElement = this._fromFoldingRegions(model);\n        return new StickyModel(textModel.uri, modelVersionId, foldingElement, undefined);\n    }\n    isModelValid(model) {\n        return model !== null;\n    }\n    _fromFoldingRegions(foldingRegions) {\n        const length = foldingRegions.length;\n        const orderedStickyElements = [];\n        // The root sticky outline element\n        const stickyOutlineElement = new StickyElement(undefined, [], undefined);\n        for (let i = 0; i < length; i++) {\n            // Finding the parent index of the current range\n            const parentIndex = foldingRegions.getParentIndex(i);\n            let parentNode;\n            if (parentIndex !== -1) {\n                // Access the reference of the parent node\n                parentNode = orderedStickyElements[parentIndex];\n            }\n            else {\n                // In that case the parent node is the root node\n                parentNode = stickyOutlineElement;\n            }\n            const child = new StickyElement(new StickyRange(foldingRegions.getStartLineNumber(i), foldingRegions.getEndLineNumber(i) + 1), [], parentNode);\n            parentNode.children.push(child);\n            orderedStickyElements.push(child);\n        }\n        return stickyOutlineElement;\n    }\n}\nlet StickyModelFromCandidateIndentationFoldingProvider = class StickyModelFromCandidateIndentationFoldingProvider extends StickyModelFromCandidateFoldingProvider {\n    constructor(editor, _languageConfigurationService) {\n        super(editor);\n        this._languageConfigurationService = _languageConfigurationService;\n    }\n    createModelFromProvider(textModel, modelVersionId, token) {\n        const provider = new IndentRangeProvider(textModel, this._languageConfigurationService, this._foldingLimitReporter);\n        return provider.compute(token);\n    }\n};\nStickyModelFromCandidateIndentationFoldingProvider = __decorate([\n    __param(1, ILanguageConfigurationService)\n], StickyModelFromCandidateIndentationFoldingProvider);\nlet StickyModelFromCandidateSyntaxFoldingProvider = class StickyModelFromCandidateSyntaxFoldingProvider extends StickyModelFromCandidateFoldingProvider {\n    constructor(editor, _languageFeaturesService) {\n        super(editor);\n        this._languageFeaturesService = _languageFeaturesService;\n    }\n    isProviderValid(textModel) {\n        const selectedProviders = FoldingController.getFoldingRangeProviders(this._languageFeaturesService, textModel);\n        return selectedProviders.length > 0;\n    }\n    createModelFromProvider(textModel, modelVersionId, token) {\n        const selectedProviders = FoldingController.getFoldingRangeProviders(this._languageFeaturesService, textModel);\n        const provider = new SyntaxRangeProvider(textModel, selectedProviders, () => this.createModelFromProvider(textModel, modelVersionId, token), this._foldingLimitReporter, undefined);\n        return provider.compute(token);\n    }\n};\nStickyModelFromCandidateSyntaxFoldingProvider = __decorate([\n    __param(1, ILanguageFeaturesService)\n], StickyModelFromCandidateSyntaxFoldingProvider);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StandardMouseEvent } from '../../../../base/browser/mouseEvent.js';\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport './stickyScroll.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { Position } from '../../../common/core/position.js';\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nexport class StickyScrollWidgetState {\n    constructor(lineNumbers, lastLineRelativePosition) {\n        this.lineNumbers = lineNumbers;\n        this.lastLineRelativePosition = lastLineRelativePosition;\n    }\n}\nconst _ttPolicy = createTrustedTypesPolicy('stickyScrollViewLayer', { createHTML: value => value });\nexport class StickyScrollWidget extends Disposable {\n    constructor(_editor) {\n        super();\n        this._editor = _editor;\n        this._rootDomNode = document.createElement('div');\n        this._disposableStore = this._register(new DisposableStore());\n        this._lineNumbers = [];\n        this._lastLineRelativePosition = 0;\n        this._hoverOnLine = -1;\n        this._hoverOnColumn = -1;\n        this._layoutInfo = this._editor.getLayoutInfo();\n        this._rootDomNode = document.createElement('div');\n        this._rootDomNode.className = 'sticky-widget';\n        this._rootDomNode.classList.toggle('peek', _editor instanceof EmbeddedCodeEditorWidget);\n        this._rootDomNode.style.width = `${this._layoutInfo.width - this._layoutInfo.minimap.minimapCanvasOuterWidth - this._layoutInfo.verticalScrollbarWidth}px`;\n    }\n    get hoverOnLine() {\n        return this._hoverOnLine;\n    }\n    get hoverOnColumn() {\n        return this._hoverOnColumn;\n    }\n    get lineNumbers() {\n        return this._lineNumbers;\n    }\n    getCurrentLines() {\n        return this._lineNumbers;\n    }\n    setState(state) {\n        dom.clearNode(this._rootDomNode);\n        this._disposableStore.clear();\n        this._lineNumbers.length = 0;\n        const editorLineHeight = this._editor.getOption(64 /* EditorOption.lineHeight */);\n        const futureWidgetHeight = state.lineNumbers.length * editorLineHeight + state.lastLineRelativePosition;\n        if (futureWidgetHeight > 0) {\n            this._lastLineRelativePosition = state.lastLineRelativePosition;\n            this._lineNumbers = state.lineNumbers;\n        }\n        else {\n            this._lastLineRelativePosition = 0;\n            this._lineNumbers = [];\n        }\n        this._renderRootNode();\n    }\n    _renderRootNode() {\n        if (!this._editor._getViewModel()) {\n            return;\n        }\n        for (const [index, line] of this._lineNumbers.entries()) {\n            const childNode = this._renderChildNode(index, line);\n            this._rootDomNode.appendChild(childNode);\n        }\n        const editorLineHeight = this._editor.getOption(64 /* EditorOption.lineHeight */);\n        const widgetHeight = this._lineNumbers.length * editorLineHeight + this._lastLineRelativePosition;\n        this._rootDomNode.style.display = widgetHeight > 0 ? 'block' : 'none';\n        this._rootDomNode.style.height = widgetHeight.toString() + 'px';\n        this._rootDomNode.setAttribute('role', 'list');\n        const minimapSide = this._editor.getOption(70 /* EditorOption.minimap */).side;\n        if (minimapSide === 'left') {\n            this._rootDomNode.style.marginLeft = this._editor.getLayoutInfo().minimap.minimapCanvasOuterWidth + 'px';\n        }\n    }\n    _renderChildNode(index, line) {\n        const child = document.createElement('div');\n        const viewModel = this._editor._getViewModel();\n        const viewLineNumber = viewModel.coordinatesConverter.convertModelPositionToViewPosition(new Position(line, 1)).lineNumber;\n        const lineRenderingData = viewModel.getViewLineRenderingData(viewLineNumber);\n        const layoutInfo = this._editor.getLayoutInfo();\n        const width = layoutInfo.width - layoutInfo.minimap.minimapCanvasOuterWidth - layoutInfo.verticalScrollbarWidth;\n        const minimapSide = this._editor.getOption(70 /* EditorOption.minimap */).side;\n        const lineHeight = this._editor.getOption(64 /* EditorOption.lineHeight */);\n        const lineNumberOption = this._editor.getOption(65 /* EditorOption.lineNumbers */);\n        let actualInlineDecorations;\n        try {\n            actualInlineDecorations = LineDecoration.filter(lineRenderingData.inlineDecorations, viewLineNumber, lineRenderingData.minColumn, lineRenderingData.maxColumn);\n        }\n        catch (err) {\n            actualInlineDecorations = [];\n        }\n        const renderLineInput = new RenderLineInput(true, true, lineRenderingData.content, lineRenderingData.continuesWithWrappedLine, lineRenderingData.isBasicASCII, lineRenderingData.containsRTL, 0, lineRenderingData.tokens, actualInlineDecorations, lineRenderingData.tabSize, lineRenderingData.startVisibleColumn, 1, 1, 1, 500, 'none', true, true, null);\n        const sb = new StringBuilder(2000);\n        renderViewLine(renderLineInput, sb);\n        let newLine;\n        if (_ttPolicy) {\n            newLine = _ttPolicy.createHTML(sb.build());\n        }\n        else {\n            newLine = sb.build();\n        }\n        const lineHTMLNode = document.createElement('span');\n        lineHTMLNode.className = 'sticky-line';\n        lineHTMLNode.classList.add(`stickyLine${line}`);\n        lineHTMLNode.style.lineHeight = `${lineHeight}px`;\n        lineHTMLNode.innerHTML = newLine;\n        const lineNumberHTMLNode = document.createElement('span');\n        lineNumberHTMLNode.className = 'sticky-line';\n        lineNumberHTMLNode.style.lineHeight = `${lineHeight}px`;\n        if (minimapSide === 'left') {\n            lineNumberHTMLNode.style.width = `${layoutInfo.contentLeft - layoutInfo.minimap.minimapCanvasOuterWidth}px`;\n        }\n        else if (minimapSide === 'right') {\n            lineNumberHTMLNode.style.width = `${layoutInfo.contentLeft}px`;\n        }\n        const innerLineNumberHTML = document.createElement('span');\n        if (lineNumberOption.renderType === 1 /* RenderLineNumbersType.On */ || lineNumberOption.renderType === 3 /* RenderLineNumbersType.Interval */ && line % 10 === 0) {\n            innerLineNumberHTML.innerText = line.toString();\n        }\n        else if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n            innerLineNumberHTML.innerText = Math.abs(line - this._editor.getPosition().lineNumber).toString();\n        }\n        innerLineNumberHTML.className = 'sticky-line-number';\n        innerLineNumberHTML.style.lineHeight = `${lineHeight}px`;\n        innerLineNumberHTML.style.width = `${layoutInfo.lineNumbersWidth}px`;\n        if (minimapSide === 'left') {\n            innerLineNumberHTML.style.paddingLeft = `${layoutInfo.lineNumbersLeft - layoutInfo.minimap.minimapCanvasOuterWidth}px`;\n        }\n        else if (minimapSide === 'right') {\n            innerLineNumberHTML.style.paddingLeft = `${layoutInfo.lineNumbersLeft}px`;\n        }\n        lineNumberHTMLNode.appendChild(innerLineNumberHTML);\n        this._editor.applyFontInfo(lineHTMLNode);\n        this._editor.applyFontInfo(innerLineNumberHTML);\n        child.appendChild(lineNumberHTMLNode);\n        child.appendChild(lineHTMLNode);\n        child.className = 'sticky-line-root';\n        child.setAttribute('role', 'listitem');\n        child.tabIndex = 0;\n        child.style.lineHeight = `${lineHeight}px`;\n        child.style.width = `${width}px`;\n        child.style.height = `${lineHeight}px`;\n        child.style.zIndex = '0';\n        // Special case for the last line of sticky scroll\n        if (index === this._lineNumbers.length - 1) {\n            child.style.position = 'relative';\n            child.style.zIndex = '-1';\n            child.style.top = this._lastLineRelativePosition + 'px';\n        }\n        // Each child has a listener which fires when the mouse hovers over the child\n        this._disposableStore.add(dom.addDisposableListener(child, 'mouseover', (e) => {\n            if (this._editor.hasModel()) {\n                const mouseOverEvent = new StandardMouseEvent(e);\n                const text = mouseOverEvent.target.innerText;\n                // Line and column number of the hover needed for the control clicking feature\n                this._hoverOnLine = line;\n                // TODO: workaround to find the column index, perhaps need a more solid solution\n                this._hoverOnColumn = this._editor.getModel().getLineContent(line).indexOf(text) + 1 || -1;\n            }\n        }));\n        return child;\n    }\n    getId() {\n        return 'editor.contrib.stickyScrollWidget';\n    }\n    getDomNode() {\n        return this._rootDomNode;\n    }\n    getPosition() {\n        return {\n            preference: null\n        };\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class StickyRange {\n    constructor(startLineNumber, endLineNumber) {\n        this.startLineNumber = startLineNumber;\n        this.endLineNumber = endLineNumber;\n    }\n}\nexport class StickyElement {\n    constructor(\n    /**\n     * Range of line numbers spanned by the current scope\n     */\n    range, \n    /**\n     * Must be sorted by start line number\n    */\n    children, \n    /**\n     * Parent sticky outline element\n     */\n    parent) {\n        this.range = range;\n        this.children = children;\n        this.parent = parent;\n    }\n}\nexport class StickyModel {\n    constructor(uri, version, element, outlineProviderId) {\n        this.uri = uri;\n        this.version = version;\n        this.element = element;\n        this.outlineProviderId = outlineProviderId;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable, DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { binarySearch } from '../../../../base/common/arrays.js';\nimport { isEqual } from '../../../../base/common/resources.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { StickyModelProvider } from './stickyScrollModelProvider.js';\nimport { StickyModel } from './stickyScrollElement.js';\nexport class StickyLineCandidate {\n    constructor(startLineNumber, endLineNumber, nestingDepth) {\n        this.startLineNumber = startLineNumber;\n        this.endLineNumber = endLineNumber;\n        this.nestingDepth = nestingDepth;\n    }\n}\nexport let StickyLineCandidateProvider = class StickyLineCandidateProvider extends Disposable {\n    constructor(editor, _languageFeaturesService, _languageConfigurationService) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this._languageConfigurationService = _languageConfigurationService;\n        this._onDidChangeStickyScroll = this._store.add(new Emitter());\n        this.onDidChangeStickyScroll = this._onDidChangeStickyScroll.event;\n        this._options = null;\n        this._model = null;\n        this._cts = null;\n        this._stickyModelProvider = null;\n        this._editor = editor;\n        this._sessionStore = new DisposableStore();\n        this._updateSoon = this._register(new RunOnceScheduler(() => this.update(), 50));\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(111 /* EditorOption.stickyScroll */)) {\n                this.readConfiguration();\n            }\n        }));\n        this.readConfiguration();\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n    readConfiguration() {\n        this._options = this._editor.getOption(111 /* EditorOption.stickyScroll */);\n        if (!this._options.enabled) {\n            this._sessionStore.clear();\n            return;\n        }\n        this._stickyModelProvider = new StickyModelProvider(this._editor, this._languageConfigurationService, this._languageFeaturesService, this._options.defaultModel);\n        this._sessionStore.add(this._editor.onDidChangeModel(() => this.update()));\n        this._sessionStore.add(this._editor.onDidChangeHiddenAreas(() => this.update()));\n        this._sessionStore.add(this._editor.onDidChangeModelContent(() => this._updateSoon.schedule()));\n        this._sessionStore.add(this._languageFeaturesService.documentSymbolProvider.onDidChange(() => this.update()));\n        this.update();\n    }\n    getVersionId() {\n        var _a;\n        return (_a = this._model) === null || _a === void 0 ? void 0 : _a.version;\n    }\n    update() {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            (_a = this._cts) === null || _a === void 0 ? void 0 : _a.dispose(true);\n            this._cts = new CancellationTokenSource();\n            yield this.updateStickyModel(this._cts.token);\n            this._onDidChangeStickyScroll.fire();\n        });\n    }\n    updateStickyModel(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._editor.hasModel() || !this._stickyModelProvider) {\n                return;\n            }\n            const textModel = this._editor.getModel();\n            const modelVersionId = textModel.getVersionId();\n            const isDifferentModel = this._model ? !isEqual(this._model.uri, textModel.uri) : false;\n            // Clear sticky scroll to not show stale data for too long\n            const resetHandle = isDifferentModel ? setTimeout(() => {\n                if (!token.isCancellationRequested) {\n                    this._model = new StickyModel(textModel.uri, textModel.getVersionId(), undefined, undefined);\n                    this._onDidChangeStickyScroll.fire();\n                }\n            }, 75) : undefined;\n            this._model = yield this._stickyModelProvider.update(textModel, modelVersionId, token);\n            clearTimeout(resetHandle);\n        });\n    }\n    updateIndex(index) {\n        if (index === -1) {\n            index = 0;\n        }\n        else if (index < 0) {\n            index = -index - 2;\n        }\n        return index;\n    }\n    getCandidateStickyLinesIntersectingFromStickyModel(range, outlineModel, result, depth, lastStartLineNumber) {\n        if (outlineModel.children.length === 0) {\n            return;\n        }\n        let lastLine = lastStartLineNumber;\n        const childrenStartLines = [];\n        for (let i = 0; i < outlineModel.children.length; i++) {\n            const child = outlineModel.children[i];\n            if (child.range) {\n                childrenStartLines.push(child.range.startLineNumber);\n            }\n        }\n        const lowerBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber, (a, b) => { return a - b; }));\n        const upperBound = this.updateIndex(binarySearch(childrenStartLines, range.startLineNumber + depth, (a, b) => { return a - b; }));\n        for (let i = lowerBound; i <= upperBound; i++) {\n            const child = outlineModel.children[i];\n            if (!child) {\n                return;\n            }\n            if (child.range) {\n                const childStartLine = child.range.startLineNumber;\n                const childEndLine = child.range.endLineNumber;\n                if (range.startLineNumber <= childEndLine + 1 && childStartLine - 1 <= range.endLineNumber && childStartLine !== lastLine) {\n                    lastLine = childStartLine;\n                    result.push(new StickyLineCandidate(childStartLine, childEndLine - 1, depth + 1));\n                    this.getCandidateStickyLinesIntersectingFromStickyModel(range, child, result, depth + 1, childStartLine);\n                }\n            }\n            else {\n                this.getCandidateStickyLinesIntersectingFromStickyModel(range, child, result, depth, lastStartLineNumber);\n            }\n        }\n    }\n    getCandidateStickyLinesIntersecting(range) {\n        var _a, _b;\n        if (!((_a = this._model) === null || _a === void 0 ? void 0 : _a.element)) {\n            return [];\n        }\n        let stickyLineCandidates = [];\n        this.getCandidateStickyLinesIntersectingFromStickyModel(range, this._model.element, stickyLineCandidates, 0, -1);\n        const hiddenRanges = (_b = this._editor._getViewModel()) === null || _b === void 0 ? void 0 : _b.getHiddenAreas();\n        if (hiddenRanges) {\n            for (const hiddenRange of hiddenRanges) {\n                stickyLineCandidates = stickyLineCandidates.filter(stickyLine => !(stickyLine.startLineNumber >= hiddenRange.startLineNumber && stickyLine.endLineNumber <= hiddenRange.endLineNumber + 1));\n            }\n        }\n        return stickyLineCandidates;\n    }\n};\nStickyLineCandidateProvider = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ILanguageConfigurationService)\n], StickyLineCandidateProvider);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { StickyScrollWidget, StickyScrollWidgetState } from './stickyScrollWidget.js';\nimport { StickyLineCandidateProvider } from './stickyScrollProvider.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { ClickLinkGesture } from '../../gotoSymbol/browser/link/clickLinkGesture.js';\nimport { Range } from '../../../common/core/range.js';\nimport { getDefinitionsAtPosition } from '../../gotoSymbol/browser/goToSymbol.js';\nimport { goToDefinitionWithLocation } from '../../inlayHints/browser/inlayHintsLocations.js';\nimport { Position } from '../../../common/core/position.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { ILanguageConfigurationService } from '../../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeatureDebounceService } from '../../../common/services/languageFeatureDebounce.js';\nimport * as dom from '../../../../base/browser/dom.js';\nimport { StickyRange } from './stickyScrollElement.js';\nexport let StickyScrollController = class StickyScrollController extends Disposable {\n    constructor(_editor, _contextMenuService, _languageFeaturesService, _instaService, _languageConfigurationService, _languageFeatureDebounceService, _contextKeyService) {\n        super();\n        this._editor = _editor;\n        this._contextMenuService = _contextMenuService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._instaService = _instaService;\n        this._contextKeyService = _contextKeyService;\n        this._sessionStore = new DisposableStore();\n        this._maxStickyLines = Number.MAX_SAFE_INTEGER;\n        this._candidateDefinitionsLength = -1;\n        this._focusedStickyElementIndex = -1;\n        this._enabled = false;\n        this._focused = false;\n        this._positionRevealed = false;\n        this._onMouseDown = false;\n        this._stickyScrollWidget = new StickyScrollWidget(this._editor);\n        this._stickyLineCandidateProvider = new StickyLineCandidateProvider(this._editor, _languageFeaturesService, _languageConfigurationService);\n        this._register(this._stickyScrollWidget);\n        this._register(this._stickyLineCandidateProvider);\n        this._widgetState = new StickyScrollWidgetState([], 0);\n        this._readConfiguration();\n        this._register(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(111 /* EditorOption.stickyScroll */)) {\n                this._readConfiguration();\n            }\n        }));\n        this._register(dom.addDisposableListener(this._stickyScrollWidget.getDomNode(), dom.EventType.CONTEXT_MENU, (event) => __awaiter(this, void 0, void 0, function* () {\n            this._onContextMenu(event);\n        })));\n        this._stickyScrollFocusedContextKey = EditorContextKeys.stickyScrollFocused.bindTo(this._contextKeyService);\n        this._stickyScrollVisibleContextKey = EditorContextKeys.stickyScrollVisible.bindTo(this._contextKeyService);\n        const focusTracker = this._register(dom.trackFocus(this._stickyScrollWidget.getDomNode()));\n        this._register(focusTracker.onDidBlur(_ => {\n            const height = this._stickyScrollWidget.getDomNode().clientHeight;\n            // Suppose that the blurring is caused by scrolling, then keep the focus on the sticky scroll\n            // This is determined by the fact that the height of the widget has become zero and there has been no position revealing\n            if (this._positionRevealed === false && height === 0) {\n                this._focusedStickyElementIndex = -1;\n                this.focus();\n            }\n            // In all other casees, dispose the focus on the sticky scroll\n            else {\n                this._disposeFocusStickyScrollStore();\n            }\n        }));\n        this._register(focusTracker.onDidFocus(_ => {\n            this.focus();\n        }));\n        this._register(this._createClickLinkGesture());\n        // Suppose that mouse down on the sticky scroll, then do not focus on the sticky scroll because this will be followed by the revealing of a position\n        this._register(dom.addDisposableListener(this._stickyScrollWidget.getDomNode(), dom.EventType.MOUSE_DOWN, (e) => {\n            this._onMouseDown = true;\n        }));\n    }\n    static get(editor) {\n        return editor.getContribution(StickyScrollController.ID);\n    }\n    _disposeFocusStickyScrollStore() {\n        var _a;\n        this._stickyScrollFocusedContextKey.set(false);\n        (_a = this._focusDisposableStore) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._focused = false;\n        this._positionRevealed = false;\n        this._onMouseDown = false;\n    }\n    focus() {\n        // If the mouse is down, do not focus on the sticky scroll\n        if (this._onMouseDown) {\n            this._onMouseDown = false;\n            this._editor.focus();\n            return;\n        }\n        const focusState = this._stickyScrollFocusedContextKey.get();\n        if (focusState === true) {\n            return;\n        }\n        this._focused = true;\n        this._focusDisposableStore = new DisposableStore();\n        this._stickyScrollFocusedContextKey.set(true);\n        const rootNode = this._stickyScrollWidget.getDomNode();\n        rootNode.lastElementChild.focus();\n        this._stickyElements = rootNode.children;\n        this._focusedStickyElementIndex = this._stickyScrollWidget.lineNumbers.length - 1;\n    }\n    focusNext() {\n        if (this._focusedStickyElementIndex < this._stickyElements.length - 1) {\n            this._focusNav(true);\n        }\n    }\n    focusPrevious() {\n        if (this._focusedStickyElementIndex > 0) {\n            this._focusNav(false);\n        }\n    }\n    selectEditor() {\n        this._editor.focus();\n    }\n    // True is next, false is previous\n    _focusNav(direction) {\n        this._focusedStickyElementIndex = direction ? this._focusedStickyElementIndex + 1 : this._focusedStickyElementIndex - 1;\n        this._stickyElements.item(this._focusedStickyElementIndex).focus();\n    }\n    goToFocused() {\n        const lineNumbers = this._stickyScrollWidget.lineNumbers;\n        this._disposeFocusStickyScrollStore();\n        this._revealPosition({ lineNumber: lineNumbers[this._focusedStickyElementIndex], column: 1 });\n    }\n    _revealPosition(position) {\n        this._positionRevealed = true;\n        this._editor.revealPosition(position);\n        this._editor.setSelection(Range.fromPositions(position));\n        this._editor.focus();\n    }\n    _createClickLinkGesture() {\n        const linkGestureStore = new DisposableStore();\n        const sessionStore = new DisposableStore();\n        linkGestureStore.add(sessionStore);\n        const gesture = new ClickLinkGesture(this._editor, true);\n        linkGestureStore.add(gesture);\n        linkGestureStore.add(gesture.onMouseMoveOrRelevantKeyDown(([mouseEvent, _keyboardEvent]) => {\n            if (!this._editor.hasModel() || !mouseEvent.hasTriggerModifier) {\n                sessionStore.clear();\n                return;\n            }\n            const targetMouseEvent = mouseEvent.target;\n            if (targetMouseEvent.detail === this._stickyScrollWidget.getId()\n                && targetMouseEvent.element.innerText === targetMouseEvent.element.innerHTML) {\n                const text = targetMouseEvent.element.innerText;\n                if (this._stickyScrollWidget.hoverOnColumn === -1) {\n                    return;\n                }\n                const lineNumber = this._stickyScrollWidget.hoverOnLine;\n                const column = this._stickyScrollWidget.hoverOnColumn;\n                const stickyPositionProjectedOnEditor = new Range(lineNumber, column, lineNumber, column + text.length);\n                if (!stickyPositionProjectedOnEditor.equalsRange(this._stickyRangeProjectedOnEditor)) {\n                    this._stickyRangeProjectedOnEditor = stickyPositionProjectedOnEditor;\n                    sessionStore.clear();\n                }\n                else if (targetMouseEvent.element.style.textDecoration === 'underline') {\n                    return;\n                }\n                const cancellationToken = new CancellationTokenSource();\n                sessionStore.add(toDisposable(() => cancellationToken.dispose(true)));\n                let currentHTMLChild;\n                getDefinitionsAtPosition(this._languageFeaturesService.definitionProvider, this._editor.getModel(), new Position(lineNumber, column + 1), cancellationToken.token).then((candidateDefinitions => {\n                    if (cancellationToken.token.isCancellationRequested) {\n                        return;\n                    }\n                    if (candidateDefinitions.length !== 0) {\n                        this._candidateDefinitionsLength = candidateDefinitions.length;\n                        const childHTML = targetMouseEvent.element;\n                        if (currentHTMLChild !== childHTML) {\n                            sessionStore.clear();\n                            currentHTMLChild = childHTML;\n                            currentHTMLChild.style.textDecoration = 'underline';\n                            sessionStore.add(toDisposable(() => {\n                                currentHTMLChild.style.textDecoration = 'none';\n                            }));\n                        }\n                        else if (!currentHTMLChild) {\n                            currentHTMLChild = childHTML;\n                            currentHTMLChild.style.textDecoration = 'underline';\n                            sessionStore.add(toDisposable(() => {\n                                currentHTMLChild.style.textDecoration = 'none';\n                            }));\n                        }\n                    }\n                    else {\n                        sessionStore.clear();\n                    }\n                }));\n            }\n            else {\n                sessionStore.clear();\n            }\n        }));\n        linkGestureStore.add(gesture.onCancel(() => {\n            sessionStore.clear();\n        }));\n        linkGestureStore.add(gesture.onExecute((e) => __awaiter(this, void 0, void 0, function* () {\n            if (e.target.detail !== this._stickyScrollWidget.getId()) {\n                return;\n            }\n            if (e.hasTriggerModifier) {\n                // Control click\n                if (this._candidateDefinitionsLength > 1) {\n                    if (this._focused) {\n                        this._disposeFocusStickyScrollStore();\n                    }\n                    this._revealPosition({ lineNumber: this._stickyScrollWidget.hoverOnLine, column: 1 });\n                }\n                this._instaService.invokeFunction(goToDefinitionWithLocation, e, this._editor, { uri: this._editor.getModel().uri, range: this._stickyRangeProjectedOnEditor });\n            }\n            else if (!e.isRightClick) {\n                // Normal click\n                if (this._focused) {\n                    this._disposeFocusStickyScrollStore();\n                }\n                this._revealPosition({ lineNumber: this._stickyScrollWidget.hoverOnLine, column: this._stickyScrollWidget.hoverOnColumn });\n            }\n        })));\n        return linkGestureStore;\n    }\n    _onContextMenu(event) {\n        this._contextMenuService.showContextMenu({\n            menuId: MenuId.StickyScrollContext,\n            getAnchor: () => event,\n        });\n    }\n    _readConfiguration() {\n        const options = this._editor.getOption(111 /* EditorOption.stickyScroll */);\n        if (options.enabled === false) {\n            this._editor.removeOverlayWidget(this._stickyScrollWidget);\n            this._sessionStore.clear();\n            this._enabled = false;\n            return;\n        }\n        else if (options.enabled && !this._enabled) {\n            // When sticky scroll was just enabled, add the listeners on the sticky scroll\n            this._editor.addOverlayWidget(this._stickyScrollWidget);\n            this._sessionStore.add(this._editor.onDidScrollChange(() => this._renderStickyScroll()));\n            this._sessionStore.add(this._editor.onDidLayoutChange(() => this._onDidResize()));\n            this._sessionStore.add(this._editor.onDidChangeModelTokens((e) => this._onTokensChange(e)));\n            this._sessionStore.add(this._stickyLineCandidateProvider.onDidChangeStickyScroll(() => this._renderStickyScroll()));\n            this._enabled = true;\n        }\n        const lineNumberOption = this._editor.getOption(65 /* EditorOption.lineNumbers */);\n        if (lineNumberOption.renderType === 2 /* RenderLineNumbersType.Relative */) {\n            this._sessionStore.add(this._editor.onDidChangeCursorPosition(() => this._renderStickyScroll()));\n        }\n    }\n    _needsUpdate(event) {\n        const stickyLineNumbers = this._stickyScrollWidget.getCurrentLines();\n        for (const stickyLineNumber of stickyLineNumbers) {\n            for (const range of event.ranges) {\n                if (stickyLineNumber >= range.fromLineNumber && stickyLineNumber <= range.toLineNumber) {\n                    return true;\n                }\n            }\n        }\n        return false;\n    }\n    _onTokensChange(event) {\n        if (this._needsUpdate(event)) {\n            this._renderStickyScroll();\n        }\n    }\n    _onDidResize() {\n        const layoutInfo = this._editor.getLayoutInfo();\n        const width = layoutInfo.width - layoutInfo.minimap.minimapCanvasOuterWidth - layoutInfo.verticalScrollbarWidth;\n        this._stickyScrollWidget.getDomNode().style.width = `${width}px`;\n        // Make sure sticky scroll doesn't take up more than 25% of the editor\n        const theoreticalLines = layoutInfo.height / this._editor.getOption(64 /* EditorOption.lineHeight */);\n        this._maxStickyLines = Math.round(theoreticalLines * .25);\n    }\n    _renderStickyScroll() {\n        if (!(this._editor.hasModel())) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const stickyLineVersion = this._stickyLineCandidateProvider.getVersionId();\n        if (stickyLineVersion === undefined || stickyLineVersion === model.getVersionId()) {\n            this._widgetState = this.findScrollWidgetState();\n            this._stickyScrollVisibleContextKey.set(!(this._widgetState.lineNumbers.length === 0));\n            if (!this._focused) {\n                this._stickyScrollWidget.setState(this._widgetState);\n            }\n            else {\n                this._stickyElements = this._stickyScrollWidget.getDomNode().children;\n                // Suppose that previously the sticky scroll widget had height 0, then if there are visible lines, set the last line as focused\n                if (this._focusedStickyElementIndex === -1) {\n                    this._stickyScrollWidget.setState(this._widgetState);\n                    this._focusedStickyElementIndex = this._stickyElements.length - 1;\n                    if (this._focusedStickyElementIndex !== -1) {\n                        this._stickyElements.item(this._focusedStickyElementIndex).focus();\n                    }\n                }\n                else {\n                    const focusedStickyElementLineNumber = this._stickyScrollWidget.lineNumbers[this._focusedStickyElementIndex];\n                    this._stickyScrollWidget.setState(this._widgetState);\n                    // Suppose that after setting the state, there are no sticky lines, set the focused index to -1\n                    if (this._stickyElements.length === 0) {\n                        this._focusedStickyElementIndex = -1;\n                    }\n                    else {\n                        const previousFocusedLineNumberExists = this._stickyScrollWidget.lineNumbers.includes(focusedStickyElementLineNumber);\n                        // If the line number is still there, do not change anything\n                        // If the line number is not there, set the new focused line to be the last line\n                        if (!previousFocusedLineNumberExists) {\n                            this._focusedStickyElementIndex = this._stickyElements.length - 1;\n                        }\n                        this._stickyElements.item(this._focusedStickyElementIndex).focus();\n                    }\n                }\n            }\n        }\n    }\n    findScrollWidgetState() {\n        const lineHeight = this._editor.getOption(64 /* EditorOption.lineHeight */);\n        const maxNumberStickyLines = Math.min(this._maxStickyLines, this._editor.getOption(111 /* EditorOption.stickyScroll */).maxLineCount);\n        const scrollTop = this._editor.getScrollTop();\n        let lastLineRelativePosition = 0;\n        const lineNumbers = [];\n        const arrayVisibleRanges = this._editor.getVisibleRanges();\n        if (arrayVisibleRanges.length !== 0) {\n            const fullVisibleRange = new StickyRange(arrayVisibleRanges[0].startLineNumber, arrayVisibleRanges[arrayVisibleRanges.length - 1].endLineNumber);\n            const candidateRanges = this._stickyLineCandidateProvider.getCandidateStickyLinesIntersecting(fullVisibleRange);\n            for (const range of candidateRanges) {\n                const start = range.startLineNumber;\n                const end = range.endLineNumber;\n                const depth = range.nestingDepth;\n                if (end - start > 0) {\n                    const topOfElementAtDepth = (depth - 1) * lineHeight;\n                    const bottomOfElementAtDepth = depth * lineHeight;\n                    const bottomOfBeginningLine = this._editor.getBottomForLineNumber(start) - scrollTop;\n                    const topOfEndLine = this._editor.getTopForLineNumber(end) - scrollTop;\n                    const bottomOfEndLine = this._editor.getBottomForLineNumber(end) - scrollTop;\n                    if (topOfElementAtDepth > topOfEndLine && topOfElementAtDepth <= bottomOfEndLine) {\n                        lineNumbers.push(start);\n                        lastLineRelativePosition = bottomOfEndLine - bottomOfElementAtDepth;\n                        break;\n                    }\n                    else if (bottomOfElementAtDepth > bottomOfBeginningLine && bottomOfElementAtDepth <= bottomOfEndLine) {\n                        lineNumbers.push(start);\n                    }\n                    if (lineNumbers.length === maxNumberStickyLines) {\n                        break;\n                    }\n                }\n            }\n        }\n        return new StickyScrollWidgetState(lineNumbers, lastLineRelativePosition);\n    }\n    dispose() {\n        super.dispose();\n        this._sessionStore.dispose();\n    }\n};\nStickyScrollController.ID = 'store.contrib.stickyScrollController';\nStickyScrollController = __decorate([\n    __param(1, IContextMenuService),\n    __param(2, ILanguageFeaturesService),\n    __param(3, IInstantiationService),\n    __param(4, ILanguageConfigurationService),\n    __param(5, ILanguageFeatureDebounceService),\n    __param(6, IContextKeyService)\n], StickyScrollController);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { EditorAction2 } from '../../../browser/editorExtensions.js';\nimport { localize } from '../../../../nls.js';\nimport { Categories } from '../../../../platform/action/common/actionCommonCategories.js';\nimport { Action2, MenuId } from '../../../../platform/actions/common/actions.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { StickyScrollController } from './stickyScrollController.js';\nexport class ToggleStickyScroll extends Action2 {\n    constructor() {\n        super({\n            id: 'editor.action.toggleStickyScroll',\n            title: {\n                value: localize('toggleStickyScroll', \"Toggle Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'mitoggleStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Toggle Sticky Scroll\"),\n                original: 'Toggle Sticky Scroll',\n            },\n            category: Categories.View,\n            toggled: {\n                condition: ContextKeyExpr.equals('config.editor.stickyScroll.enabled', true),\n                title: localize('stickyScroll', \"Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'miStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Sticky Scroll\"),\n            },\n            menu: [\n                { id: MenuId.CommandPalette },\n                { id: MenuId.MenubarViewMenu, group: '5_editor', order: 2 },\n                { id: MenuId.StickyScrollContext }\n            ]\n        });\n    }\n    run(accessor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const configurationService = accessor.get(IConfigurationService);\n            const newValue = !configurationService.getValue('editor.stickyScroll.enabled');\n            return configurationService.updateValue('editor.stickyScroll.enabled', newValue);\n        });\n    }\n}\nconst weight = 100 /* KeybindingWeight.EditorContrib */;\nexport class FocusStickyScroll extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.focusStickyScroll',\n            title: {\n                value: localize('focusStickyScroll', \"Focus Sticky Scroll\"),\n                mnemonicTitle: localize({ key: 'mifocusStickyScroll', comment: ['&& denotes a mnemonic'] }, \"&&Focus Sticky Scroll\"),\n                original: 'Focus Sticky Scroll',\n            },\n            precondition: ContextKeyExpr.and(ContextKeyExpr.has('config.editor.stickyScroll.enabled'), EditorContextKeys.stickyScrollVisible),\n            menu: [\n                { id: MenuId.CommandPalette },\n            ]\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n}\nexport class SelectNextStickyScrollLine extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.selectNextStickyScrollLine',\n            title: {\n                value: localize('selectNextStickyScrollLine.title', \"Select next sticky scroll line\"),\n                original: 'Select next sticky scroll line'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 18 /* KeyCode.DownArrow */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focusNext();\n    }\n}\nexport class SelectPreviousStickyScrollLine extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.selectPreviousStickyScrollLine',\n            title: {\n                value: localize('selectPreviousStickyScrollLine.title', \"Select previous sticky scroll line\"),\n                original: 'Select previous sticky scroll line'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 16 /* KeyCode.UpArrow */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.focusPrevious();\n    }\n}\nexport class GoToStickyScrollLine extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.goToFocusedStickyScrollLine',\n            title: {\n                value: localize('goToFocusedStickyScrollLine.title', \"Go to focused sticky scroll line\"),\n                original: 'Go to focused sticky scroll line'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 3 /* KeyCode.Enter */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.goToFocused();\n    }\n}\nexport class SelectEditor extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'editor.action.selectEditor',\n            title: {\n                value: localize('selectEditor.title', \"Select Editor\"),\n                original: 'Select Editor'\n            },\n            precondition: EditorContextKeys.stickyScrollFocused.isEqualTo(true),\n            keybinding: {\n                weight,\n                primary: 9 /* KeyCode.Escape */\n            }\n        });\n    }\n    runEditorCommand(_accessor, editor) {\n        var _a;\n        (_a = StickyScrollController.get(editor)) === null || _a === void 0 ? void 0 : _a.selectEditor();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ToggleStickyScroll, FocusStickyScroll, SelectEditor, SelectPreviousStickyScrollLine, SelectNextStickyScrollLine, GoToStickyScrollLine } from './stickyScrollActions.js';\nimport { StickyScrollController } from './stickyScrollController.js';\nimport { registerAction2 } from '../../../../platform/actions/common/actions.js';\nregisterEditorContribution(StickyScrollController.ID, StickyScrollController, 1 /* EditorContributionInstantiation.AfterFirstRender */);\nregisterAction2(ToggleStickyScroll);\nregisterAction2(FocusStickyScroll);\nregisterAction2(SelectPreviousStickyScrollLine);\nregisterAction2(SelectNextStickyScrollLine);\nregisterAction2(GoToStickyScrollLine);\nregisterAction2(SelectEditor);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { quickSelect } from '../../../../base/common/arrays.js';\nimport { anyScore, fuzzyScore, FuzzyScore, fuzzyScoreGracefulAggressive, FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { compareIgnoreCase } from '../../../../base/common/strings.js';\nexport class LineContext {\n    constructor(leadingLineContent, characterCountDelta) {\n        this.leadingLineContent = leadingLineContent;\n        this.characterCountDelta = characterCountDelta;\n    }\n}\n/**\n * Sorted, filtered completion view model\n * */\nexport class CompletionModel {\n    constructor(items, column, lineContext, wordDistance, options, snippetSuggestions, fuzzyScoreOptions = FuzzyScoreOptions.default, clipboardText = undefined) {\n        this.clipboardText = clipboardText;\n        this._snippetCompareFn = CompletionModel._compareCompletionItems;\n        this._items = items;\n        this._column = column;\n        this._wordDistance = wordDistance;\n        this._options = options;\n        this._refilterKind = 1 /* Refilter.All */;\n        this._lineContext = lineContext;\n        this._fuzzyScoreOptions = fuzzyScoreOptions;\n        if (snippetSuggestions === 'top') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsUp;\n        }\n        else if (snippetSuggestions === 'bottom') {\n            this._snippetCompareFn = CompletionModel._compareCompletionItemsSnippetsDown;\n        }\n    }\n    get lineContext() {\n        return this._lineContext;\n    }\n    set lineContext(value) {\n        if (this._lineContext.leadingLineContent !== value.leadingLineContent\n            || this._lineContext.characterCountDelta !== value.characterCountDelta) {\n            this._refilterKind = this._lineContext.characterCountDelta < value.characterCountDelta && this._filteredItems ? 2 /* Refilter.Incr */ : 1 /* Refilter.All */;\n            this._lineContext = value;\n        }\n    }\n    get items() {\n        this._ensureCachedState();\n        return this._filteredItems;\n    }\n    getItemsByProvider() {\n        this._ensureCachedState();\n        return this._itemsByProvider;\n    }\n    getIncompleteProvider() {\n        this._ensureCachedState();\n        const result = new Set();\n        for (const [provider, items] of this.getItemsByProvider()) {\n            if (items.length > 0 && items[0].container.incomplete) {\n                result.add(provider);\n            }\n        }\n        return result;\n    }\n    get stats() {\n        this._ensureCachedState();\n        return this._stats;\n    }\n    _ensureCachedState() {\n        if (this._refilterKind !== 0 /* Refilter.Nothing */) {\n            this._createCachedState();\n        }\n    }\n    _createCachedState() {\n        this._itemsByProvider = new Map();\n        const labelLengths = [];\n        const { leadingLineContent, characterCountDelta } = this._lineContext;\n        let word = '';\n        let wordLow = '';\n        // incrementally filter less\n        const source = this._refilterKind === 1 /* Refilter.All */ ? this._items : this._filteredItems;\n        const target = [];\n        // picks a score function based on the number of\n        // items that we have to score/filter and based on the\n        // user-configuration\n        const scoreFn = (!this._options.filterGraceful || source.length > 2000) ? fuzzyScore : fuzzyScoreGracefulAggressive;\n        for (let i = 0; i < source.length; i++) {\n            const item = source[i];\n            if (item.isInvalid) {\n                continue; // SKIP invalid items\n            }\n            // keep all items by their provider\n            const arr = this._itemsByProvider.get(item.provider);\n            if (arr) {\n                arr.push(item);\n            }\n            else {\n                this._itemsByProvider.set(item.provider, [item]);\n            }\n            // 'word' is that remainder of the current line that we\n            // filter and score against. In theory each suggestion uses a\n            // different word, but in practice not - that's why we cache\n            const overwriteBefore = item.position.column - item.editStart.column;\n            const wordLen = overwriteBefore + characterCountDelta - (item.position.column - this._column);\n            if (word.length !== wordLen) {\n                word = wordLen === 0 ? '' : leadingLineContent.slice(-wordLen);\n                wordLow = word.toLowerCase();\n            }\n            // remember the word against which this item was\n            // scored\n            item.word = word;\n            if (wordLen === 0) {\n                // when there is nothing to score against, don't\n                // event try to do. Use a const rank and rely on\n                // the fallback-sort using the initial sort order.\n                // use a score of `-100` because that is out of the\n                // bound of values `fuzzyScore` will return\n                item.score = FuzzyScore.Default;\n            }\n            else {\n                // skip word characters that are whitespace until\n                // we have hit the replace range (overwriteBefore)\n                let wordPos = 0;\n                while (wordPos < overwriteBefore) {\n                    const ch = word.charCodeAt(wordPos);\n                    if (ch === 32 /* CharCode.Space */ || ch === 9 /* CharCode.Tab */) {\n                        wordPos += 1;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                if (wordPos >= wordLen) {\n                    // the wordPos at which scoring starts is the whole word\n                    // and therefore the same rules as not having a word apply\n                    item.score = FuzzyScore.Default;\n                }\n                else if (typeof item.completion.filterText === 'string') {\n                    // when there is a `filterText` it must match the `word`.\n                    // if it matches we check with the label to compute highlights\n                    // and if that doesn't yield a result we have no highlights,\n                    // despite having the match\n                    const match = scoreFn(word, wordLow, wordPos, item.completion.filterText, item.filterTextLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    if (compareIgnoreCase(item.completion.filterText, item.textLabel) === 0) {\n                        // filterText and label are actually the same -> use good highlights\n                        item.score = match;\n                    }\n                    else {\n                        // re-run the scorer on the label in the hope of a result BUT use the rank\n                        // of the filterText-match\n                        item.score = anyScore(word, wordLow, wordPos, item.textLabel, item.labelLow, 0);\n                        item.score[0] = match[0]; // use score from filterText\n                    }\n                }\n                else {\n                    // by default match `word` against the `label`\n                    const match = scoreFn(word, wordLow, wordPos, item.textLabel, item.labelLow, 0, this._fuzzyScoreOptions);\n                    if (!match) {\n                        continue; // NO match\n                    }\n                    item.score = match;\n                }\n            }\n            item.idx = i;\n            item.distance = this._wordDistance.distance(item.position, item.completion);\n            target.push(item);\n            // update stats\n            labelLengths.push(item.textLabel.length);\n        }\n        this._filteredItems = target.sort(this._snippetCompareFn);\n        this._refilterKind = 0 /* Refilter.Nothing */;\n        this._stats = {\n            pLabelLen: labelLengths.length ?\n                quickSelect(labelLengths.length - .85, labelLengths, (a, b) => a - b)\n                : 0\n        };\n    }\n    static _compareCompletionItems(a, b) {\n        if (a.score[0] > b.score[0]) {\n            return -1;\n        }\n        else if (a.score[0] < b.score[0]) {\n            return 1;\n        }\n        else if (a.distance < b.distance) {\n            return -1;\n        }\n        else if (a.distance > b.distance) {\n            return 1;\n        }\n        else if (a.idx < b.idx) {\n            return -1;\n        }\n        else if (a.idx > b.idx) {\n            return 1;\n        }\n        else {\n            return 0;\n        }\n    }\n    static _compareCompletionItemsSnippetsDown(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n    static _compareCompletionItemsSnippetsUp(a, b) {\n        if (a.completion.kind !== b.completion.kind) {\n            if (a.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return -1;\n            }\n            else if (b.completion.kind === 27 /* CompletionItemKind.Snippet */) {\n                return 1;\n            }\n        }\n        return CompletionModel._compareCompletionItems(a, b);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { CancellationError, isCancellationError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { DisposableStore, isDisposable } from '../../../../base/common/lifecycle.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ITextModelService } from '../../../common/services/resolverService.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuId } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { historyNavigationVisible } from '../../../../platform/history/browser/contextScopedHistoryWidget.js';\nexport const Context = {\n    Visible: historyNavigationVisible,\n    HasFocusedSuggestion: new RawContextKey('suggestWidgetHasFocusedSuggestion', false, localize('suggestWidgetHasSelection', \"Whether any suggestion is focused\")),\n    DetailsVisible: new RawContextKey('suggestWidgetDetailsVisible', false, localize('suggestWidgetDetailsVisible', \"Whether suggestion details are visible\")),\n    MultipleSuggestions: new RawContextKey('suggestWidgetMultipleSuggestions', false, localize('suggestWidgetMultipleSuggestions', \"Whether there are multiple suggestions to pick from\")),\n    MakesTextEdit: new RawContextKey('suggestionMakesTextEdit', true, localize('suggestionMakesTextEdit', \"Whether inserting the current suggestion yields in a change or has everything already been typed\")),\n    AcceptSuggestionsOnEnter: new RawContextKey('acceptSuggestionOnEnter', true, localize('acceptSuggestionOnEnter', \"Whether suggestions are inserted when pressing Enter\")),\n    HasInsertAndReplaceRange: new RawContextKey('suggestionHasInsertAndReplaceRange', false, localize('suggestionHasInsertAndReplaceRange', \"Whether the current suggestion has insert and replace behaviour\")),\n    InsertMode: new RawContextKey('suggestionInsertMode', undefined, { type: 'string', description: localize('suggestionInsertMode', \"Whether the default behaviour is to insert or replace\") }),\n    CanResolve: new RawContextKey('suggestionCanResolve', false, localize('suggestionCanResolve', \"Whether the current suggestion supports to resolve further details\")),\n};\nexport const suggestWidgetStatusbarMenu = new MenuId('suggestWidgetStatusBar');\nexport class CompletionItem {\n    constructor(position, completion, container, provider) {\n        var _a;\n        this.position = position;\n        this.completion = completion;\n        this.container = container;\n        this.provider = provider;\n        // validation\n        this.isInvalid = false;\n        // sorting, filtering\n        this.score = FuzzyScore.Default;\n        this.distance = 0;\n        this.textLabel = typeof completion.label === 'string'\n            ? completion.label\n            : (_a = completion.label) === null || _a === void 0 ? void 0 : _a.label;\n        // ensure lower-variants (perf)\n        this.labelLow = this.textLabel.toLowerCase();\n        // validate label\n        this.isInvalid = !this.textLabel;\n        this.sortTextLow = completion.sortText && completion.sortText.toLowerCase();\n        this.filterTextLow = completion.filterText && completion.filterText.toLowerCase();\n        this.extensionId = completion.extensionId;\n        // normalize ranges\n        if (Range.isIRange(completion.range)) {\n            this.editStart = new Position(completion.range.startLineNumber, completion.range.startColumn);\n            this.editInsertEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            this.editReplaceEnd = new Position(completion.range.endLineNumber, completion.range.endColumn);\n            // validate range\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range) || completion.range.startLineNumber !== position.lineNumber;\n        }\n        else {\n            this.editStart = new Position(completion.range.insert.startLineNumber, completion.range.insert.startColumn);\n            this.editInsertEnd = new Position(completion.range.insert.endLineNumber, completion.range.insert.endColumn);\n            this.editReplaceEnd = new Position(completion.range.replace.endLineNumber, completion.range.replace.endColumn);\n            // validate ranges\n            this.isInvalid = this.isInvalid\n                || Range.spansMultipleLines(completion.range.insert) || Range.spansMultipleLines(completion.range.replace)\n                || completion.range.insert.startLineNumber !== position.lineNumber || completion.range.replace.startLineNumber !== position.lineNumber\n                || completion.range.insert.startColumn !== completion.range.replace.startColumn;\n        }\n        // create the suggestion resolver\n        if (typeof provider.resolveCompletionItem !== 'function') {\n            this._resolveCache = Promise.resolve();\n            this._isResolved = true;\n        }\n    }\n    // ---- resolving\n    get isResolved() {\n        return !!this._isResolved;\n    }\n    resolve(token) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!this._resolveCache) {\n                const sub = token.onCancellationRequested(() => {\n                    this._resolveCache = undefined;\n                    this._isResolved = false;\n                });\n                this._resolveCache = Promise.resolve(this.provider.resolveCompletionItem(this.completion, token)).then(value => {\n                    Object.assign(this.completion, value);\n                    this._isResolved = true;\n                    sub.dispose();\n                }, err => {\n                    if (isCancellationError(err)) {\n                        // the IPC queue will reject the request with the\n                        // cancellation error -> reset cached\n                        this._resolveCache = undefined;\n                        this._isResolved = false;\n                    }\n                });\n            }\n            return this._resolveCache;\n        });\n    }\n}\nexport class CompletionOptions {\n    constructor(snippetSortOrder = 2 /* SnippetSortOrder.Bottom */, kindFilter = new Set(), providerFilter = new Set(), providerItemsToReuse = new Map(), showDeprecated = true) {\n        this.snippetSortOrder = snippetSortOrder;\n        this.kindFilter = kindFilter;\n        this.providerFilter = providerFilter;\n        this.providerItemsToReuse = providerItemsToReuse;\n        this.showDeprecated = showDeprecated;\n    }\n}\nCompletionOptions.default = new CompletionOptions();\nlet _snippetSuggestSupport;\nexport function getSnippetSuggestSupport() {\n    return _snippetSuggestSupport;\n}\nexport class CompletionItemModel {\n    constructor(items, needsClipboard, durations, disposable) {\n        this.items = items;\n        this.needsClipboard = needsClipboard;\n        this.durations = durations;\n        this.disposable = disposable;\n    }\n}\nexport function provideSuggestionItems(registry, model, position, options = CompletionOptions.default, context = { triggerKind: 0 /* languages.CompletionTriggerKind.Invoke */ }, token = CancellationToken.None) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const sw = new StopWatch(true);\n        position = position.clone();\n        const word = model.getWordAtPosition(position);\n        const defaultReplaceRange = word ? new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn) : Range.fromPositions(position);\n        const defaultRange = { replace: defaultReplaceRange, insert: defaultReplaceRange.setEndPosition(position.lineNumber, position.column) };\n        const result = [];\n        const disposables = new DisposableStore();\n        const durations = [];\n        let needsClipboard = false;\n        const onCompletionList = (provider, container, sw) => {\n            var _a, _b, _c;\n            let didAddResult = false;\n            if (!container) {\n                return didAddResult;\n            }\n            for (const suggestion of container.suggestions) {\n                if (!options.kindFilter.has(suggestion.kind)) {\n                    // skip if not showing deprecated suggestions\n                    if (!options.showDeprecated && ((_a = suggestion === null || suggestion === void 0 ? void 0 : suggestion.tags) === null || _a === void 0 ? void 0 : _a.includes(1 /* languages.CompletionItemTag.Deprecated */))) {\n                        continue;\n                    }\n                    // fill in default range when missing\n                    if (!suggestion.range) {\n                        suggestion.range = defaultRange;\n                    }\n                    // fill in default sortText when missing\n                    if (!suggestion.sortText) {\n                        suggestion.sortText = typeof suggestion.label === 'string' ? suggestion.label : suggestion.label.label;\n                    }\n                    if (!needsClipboard && suggestion.insertTextRules && suggestion.insertTextRules & 4 /* languages.CompletionItemInsertTextRule.InsertAsSnippet */) {\n                        needsClipboard = SnippetParser.guessNeedsClipboard(suggestion.insertText);\n                    }\n                    result.push(new CompletionItem(position, suggestion, container, provider));\n                    didAddResult = true;\n                }\n            }\n            if (isDisposable(container)) {\n                disposables.add(container);\n            }\n            durations.push({\n                providerName: (_b = provider._debugDisplayName) !== null && _b !== void 0 ? _b : 'unknown_provider', elapsedProvider: (_c = container.duration) !== null && _c !== void 0 ? _c : -1, elapsedOverall: sw.elapsed()\n            });\n            return didAddResult;\n        };\n        // ask for snippets in parallel to asking \"real\" providers. Only do something if configured to\n        // do so - no snippet filter, no special-providers-only request\n        const snippetCompletions = (() => __awaiter(this, void 0, void 0, function* () {\n            if (!_snippetSuggestSupport || options.kindFilter.has(27 /* languages.CompletionItemKind.Snippet */)) {\n                return;\n            }\n            // we have items from a previous session that we can reuse\n            const reuseItems = options.providerItemsToReuse.get(_snippetSuggestSupport);\n            if (reuseItems) {\n                reuseItems.forEach(item => result.push(item));\n                return;\n            }\n            if (options.providerFilter.size > 0 && !options.providerFilter.has(_snippetSuggestSupport)) {\n                return;\n            }\n            const sw = new StopWatch(true);\n            const list = yield _snippetSuggestSupport.provideCompletionItems(model, position, context, token);\n            onCompletionList(_snippetSuggestSupport, list, sw);\n        }))();\n        // add suggestions from contributed providers - providers are ordered in groups of\n        // equal score and once a group produces a result the process stops\n        // get provider groups, always add snippet suggestion provider\n        for (const providerGroup of registry.orderedGroups(model)) {\n            // for each support in the group ask for suggestions\n            let didAddResult = false;\n            yield Promise.all(providerGroup.map((provider) => __awaiter(this, void 0, void 0, function* () {\n                // we have items from a previous session that we can reuse\n                if (options.providerItemsToReuse.has(provider)) {\n                    const items = options.providerItemsToReuse.get(provider);\n                    items.forEach(item => result.push(item));\n                    didAddResult = didAddResult || items.length > 0;\n                    return;\n                }\n                // check if this provider is filtered out\n                if (options.providerFilter.size > 0 && !options.providerFilter.has(provider)) {\n                    return;\n                }\n                try {\n                    const sw = new StopWatch(true);\n                    const list = yield provider.provideCompletionItems(model, position, context, token);\n                    didAddResult = onCompletionList(provider, list, sw) || didAddResult;\n                }\n                catch (err) {\n                    onUnexpectedExternalError(err);\n                }\n            })));\n            if (didAddResult || token.isCancellationRequested) {\n                break;\n            }\n        }\n        yield snippetCompletions;\n        if (token.isCancellationRequested) {\n            disposables.dispose();\n            return Promise.reject(new CancellationError());\n        }\n        return new CompletionItemModel(result.sort(getSuggestionComparator(options.snippetSortOrder)), needsClipboard, { entries: durations, elapsed: sw.elapsed() }, disposables);\n    });\n}\nfunction defaultComparator(a, b) {\n    // check with 'sortText'\n    if (a.sortTextLow && b.sortTextLow) {\n        if (a.sortTextLow < b.sortTextLow) {\n            return -1;\n        }\n        else if (a.sortTextLow > b.sortTextLow) {\n            return 1;\n        }\n    }\n    // check with 'label'\n    if (a.textLabel < b.textLabel) {\n        return -1;\n    }\n    else if (a.textLabel > b.textLabel) {\n        return 1;\n    }\n    // check with 'type'\n    return a.completion.kind - b.completion.kind;\n}\nfunction snippetUpComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nfunction snippetDownComparator(a, b) {\n    if (a.completion.kind !== b.completion.kind) {\n        if (a.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return 1;\n        }\n        else if (b.completion.kind === 27 /* languages.CompletionItemKind.Snippet */) {\n            return -1;\n        }\n    }\n    return defaultComparator(a, b);\n}\nconst _snippetComparators = new Map();\n_snippetComparators.set(0 /* SnippetSortOrder.Top */, snippetUpComparator);\n_snippetComparators.set(2 /* SnippetSortOrder.Bottom */, snippetDownComparator);\n_snippetComparators.set(1 /* SnippetSortOrder.Inline */, defaultComparator);\nexport function getSuggestionComparator(snippetConfig) {\n    return _snippetComparators.get(snippetConfig);\n}\nCommandsRegistry.registerCommand('_executeCompletionItemProvider', (accessor, ...args) => __awaiter(void 0, void 0, void 0, function* () {\n    const [uri, position, triggerCharacter, maxItemsToResolve] = args;\n    assertType(URI.isUri(uri));\n    assertType(Position.isIPosition(position));\n    assertType(typeof triggerCharacter === 'string' || !triggerCharacter);\n    assertType(typeof maxItemsToResolve === 'number' || !maxItemsToResolve);\n    const { completionProvider } = accessor.get(ILanguageFeaturesService);\n    const ref = yield accessor.get(ITextModelService).createModelReference(uri);\n    try {\n        const result = {\n            incomplete: false,\n            suggestions: []\n        };\n        const resolving = [];\n        const actualPosition = ref.object.textEditorModel.validatePosition(position);\n        const completions = yield provideSuggestionItems(completionProvider, ref.object.textEditorModel, actualPosition, undefined, { triggerCharacter: triggerCharacter !== null && triggerCharacter !== void 0 ? triggerCharacter : undefined, triggerKind: triggerCharacter ? 1 /* languages.CompletionTriggerKind.TriggerCharacter */ : 0 /* languages.CompletionTriggerKind.Invoke */ });\n        for (const item of completions.items) {\n            if (resolving.length < (maxItemsToResolve !== null && maxItemsToResolve !== void 0 ? maxItemsToResolve : 0)) {\n                resolving.push(item.resolve(CancellationToken.None));\n            }\n            result.incomplete = result.incomplete || item.container.incomplete;\n            result.suggestions.push(item.completion);\n        }\n        try {\n            yield Promise.all(resolving);\n            return result;\n        }\n        finally {\n            setTimeout(() => completions.disposable.dispose(), 100);\n        }\n    }\n    finally {\n        ref.dispose();\n    }\n}));\nexport function showSimpleSuggestions(editor, provider) {\n    var _a;\n    (_a = editor.getContribution('editor.contrib.suggestController')) === null || _a === void 0 ? void 0 : _a.triggerSuggest(new Set().add(provider), undefined, true);\n}\nexport class QuickSuggestionsOptions {\n    static isAllOff(config) {\n        return config.other === 'off' && config.comments === 'off' && config.strings === 'off';\n    }\n    static isAllOn(config) {\n        return config.other === 'on' && config.comments === 'on' && config.strings === 'on';\n    }\n    static valueFor(config, tokenType) {\n        switch (tokenType) {\n            case 1 /* StandardTokenType.Comment */: return config.comments;\n            case 2 /* StandardTokenType.String */: return config.strings;\n            default: return config.other;\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport let WordContextKey = class WordContextKey {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._enabled = false;\n        this._ckAtEnd = WordContextKey.AtEnd.bindTo(contextKeyService);\n        this._configListener = this._editor.onDidChangeConfiguration(e => e.hasChanged(119 /* EditorOption.tabCompletion */) && this._update());\n        this._update();\n    }\n    dispose() {\n        var _a;\n        this._configListener.dispose();\n        (_a = this._selectionListener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._ckAtEnd.reset();\n    }\n    _update() {\n        // only update this when tab completions are enabled\n        const enabled = this._editor.getOption(119 /* EditorOption.tabCompletion */) === 'on';\n        if (this._enabled === enabled) {\n            return;\n        }\n        this._enabled = enabled;\n        if (this._enabled) {\n            const checkForWordEnd = () => {\n                if (!this._editor.hasModel()) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                const model = this._editor.getModel();\n                const selection = this._editor.getSelection();\n                const word = model.getWordAtPosition(selection.getStartPosition());\n                if (!word) {\n                    this._ckAtEnd.set(false);\n                    return;\n                }\n                this._ckAtEnd.set(word.endColumn === selection.getStartPosition().column);\n            };\n            this._selectionListener = this._editor.onDidChangeCursorSelection(checkForWordEnd);\n            checkForWordEnd();\n        }\n        else if (this._selectionListener) {\n            this._ckAtEnd.reset();\n            this._selectionListener.dispose();\n            this._selectionListener = undefined;\n        }\n    }\n};\nWordContextKey.AtEnd = new RawContextKey('atEndOfWord', false);\nWordContextKey = __decorate([\n    __param(1, IContextKeyService)\n], WordContextKey);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IContextKeyService, RawContextKey } from '../../../../platform/contextkey/common/contextkey.js';\nexport let SuggestAlternatives = class SuggestAlternatives {\n    constructor(_editor, contextKeyService) {\n        this._editor = _editor;\n        this._index = 0;\n        this._ckOtherSuggestions = SuggestAlternatives.OtherSuggestions.bindTo(contextKeyService);\n    }\n    dispose() {\n        this.reset();\n    }\n    reset() {\n        var _a;\n        this._ckOtherSuggestions.reset();\n        (_a = this._listener) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._model = undefined;\n        this._acceptNext = undefined;\n        this._ignore = false;\n    }\n    set({ model, index }, acceptNext) {\n        // no suggestions -> nothing to do\n        if (model.items.length === 0) {\n            this.reset();\n            return;\n        }\n        // no alternative suggestions -> nothing to do\n        const nextIndex = SuggestAlternatives._moveIndex(true, model, index);\n        if (nextIndex === index) {\n            this.reset();\n            return;\n        }\n        this._acceptNext = acceptNext;\n        this._model = model;\n        this._index = index;\n        this._listener = this._editor.onDidChangeCursorPosition(() => {\n            if (!this._ignore) {\n                this.reset();\n            }\n        });\n        this._ckOtherSuggestions.set(true);\n    }\n    static _moveIndex(fwd, model, index) {\n        let newIndex = index;\n        for (let rounds = model.items.length; rounds > 0; rounds--) {\n            newIndex = (newIndex + model.items.length + (fwd ? +1 : -1)) % model.items.length;\n            if (newIndex === index) {\n                break;\n            }\n            if (!model.items[newIndex].completion.additionalTextEdits) {\n                break;\n            }\n        }\n        return newIndex;\n    }\n    next() {\n        this._move(true);\n    }\n    prev() {\n        this._move(false);\n    }\n    _move(fwd) {\n        if (!this._model) {\n            // nothing to reason about\n            return;\n        }\n        try {\n            this._ignore = true;\n            this._index = SuggestAlternatives._moveIndex(fwd, this._model, this._index);\n            this._acceptNext({ index: this._index, item: this._model.items[this._index], model: this._model });\n        }\n        finally {\n            this._ignore = false;\n        }\n    }\n};\nSuggestAlternatives.OtherSuggestions = new RawContextKey('hasOtherSuggestions', false);\nSuggestAlternatives = __decorate([\n    __param(1, IContextKeyService)\n], SuggestAlternatives);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { CharacterSet } from '../../../common/core/characterClassifier.js';\nexport class CommitCharacterController {\n    constructor(editor, widget, model, accept) {\n        this._disposables = new DisposableStore();\n        this._disposables.add(model.onDidSuggest(e => {\n            if (e.completionModel.items.length === 0) {\n                this.reset();\n            }\n        }));\n        this._disposables.add(model.onDidCancel(e => {\n            this.reset();\n        }));\n        this._disposables.add(widget.onDidShow(() => this._onItem(widget.getFocusedItem())));\n        this._disposables.add(widget.onDidFocus(this._onItem, this));\n        this._disposables.add(widget.onDidHide(this.reset, this));\n        this._disposables.add(editor.onWillType(text => {\n            if (this._active && !widget.isFrozen() && model.state !== 0 /* State.Idle */) {\n                const ch = text.charCodeAt(text.length - 1);\n                if (this._active.acceptCharacters.has(ch) && editor.getOption(0 /* EditorOption.acceptSuggestionOnCommitCharacter */)) {\n                    accept(this._active.item);\n                }\n            }\n        }));\n    }\n    _onItem(selected) {\n        if (!selected || !isNonEmptyArray(selected.item.completion.commitCharacters)) {\n            // no item or no commit characters\n            this.reset();\n            return;\n        }\n        if (this._active && this._active.item.item === selected.item) {\n            // still the same item\n            return;\n        }\n        // keep item and its commit characters\n        const acceptCharacters = new CharacterSet();\n        for (const ch of selected.item.completion.commitCharacters) {\n            if (ch.length > 0) {\n                acceptCharacters.add(ch.charCodeAt(0));\n            }\n        }\n        this._active = { acceptCharacters, item: selected };\n    }\n    reset() {\n        this._active = undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { TimeoutTimer } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { DisposableStore, dispose } from '../../../../base/common/lifecycle.js';\nimport { getLeadingWhitespace, isHighSurrogate, isLowSurrogate } from '../../../../base/common/strings.js';\nimport { Selection } from '../../../common/core/selection.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { CompletionModel } from './completionModel.js';\nimport { CompletionOptions, getSnippetSuggestSupport, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { FuzzyScoreOptions } from '../../../../base/common/filters.js';\nimport { assertType } from '../../../../base/common/types.js';\nimport { InlineCompletionContextKeys } from '../../inlineCompletions/browser/inlineCompletionContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nexport class LineContext {\n    static shouldAutoTrigger(editor) {\n        if (!editor.hasModel()) {\n            return false;\n        }\n        const model = editor.getModel();\n        const pos = editor.getPosition();\n        model.tokenization.tokenizeIfCheap(pos.lineNumber);\n        const word = model.getWordAtPosition(pos);\n        if (!word) {\n            return false;\n        }\n        if (word.endColumn !== pos.column &&\n            word.startColumn + 1 !== pos.column /* after typing a single character before a word */) {\n            return false;\n        }\n        if (!isNaN(Number(word.word))) {\n            return false;\n        }\n        return true;\n    }\n    constructor(model, position, triggerOptions) {\n        this.leadingLineContent = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n        this.leadingWord = model.getWordUntilPosition(position);\n        this.lineNumber = position.lineNumber;\n        this.column = position.column;\n        this.triggerOptions = triggerOptions;\n    }\n}\nfunction canShowQuickSuggest(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue(InlineCompletionContextKeys.inlineSuggestionVisible.key))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const suppressSuggestions = contextKeyService.getContextKeyValue(InlineCompletionContextKeys.suppressSuggestions.key);\n    if (suppressSuggestions !== undefined) {\n        return !suppressSuggestions;\n    }\n    return !editor.getOption(60 /* EditorOption.inlineSuggest */).suppressSuggestions;\n}\nfunction canShowSuggestOnTriggerCharacters(editor, contextKeyService, configurationService) {\n    if (!Boolean(contextKeyService.getContextKeyValue('inlineSuggestionVisible'))) {\n        // Allow if there is no inline suggestion.\n        return true;\n    }\n    const suppressSuggestions = contextKeyService.getContextKeyValue(InlineCompletionContextKeys.suppressSuggestions.key);\n    if (suppressSuggestions !== undefined) {\n        return !suppressSuggestions;\n    }\n    return !editor.getOption(60 /* EditorOption.inlineSuggest */).suppressSuggestions;\n}\nexport let SuggestModel = class SuggestModel {\n    constructor(_editor, _editorWorkerService, _clipboardService, _telemetryService, _logService, _contextKeyService, _configurationService, _languageFeaturesService) {\n        this._editor = _editor;\n        this._editorWorkerService = _editorWorkerService;\n        this._clipboardService = _clipboardService;\n        this._telemetryService = _telemetryService;\n        this._logService = _logService;\n        this._contextKeyService = _contextKeyService;\n        this._configurationService = _configurationService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._toDispose = new DisposableStore();\n        this._triggerCharacterListener = new DisposableStore();\n        this._triggerQuickSuggest = new TimeoutTimer();\n        this._triggerState = undefined;\n        this._completionDisposables = new DisposableStore();\n        this._onDidCancel = new Emitter();\n        this._onDidTrigger = new Emitter();\n        this._onDidSuggest = new Emitter();\n        this.onDidCancel = this._onDidCancel.event;\n        this.onDidTrigger = this._onDidTrigger.event;\n        this.onDidSuggest = this._onDidSuggest.event;\n        this._telemetryGate = 0;\n        this._currentSelection = this._editor.getSelection() || new Selection(1, 1, 1, 1);\n        // wire up various listeners\n        this._toDispose.add(this._editor.onDidChangeModel(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelLanguage(() => {\n            this._updateTriggerCharacters();\n            this.cancel();\n        }));\n        this._toDispose.add(this._editor.onDidChangeConfiguration(() => {\n            this._updateTriggerCharacters();\n        }));\n        this._toDispose.add(this._languageFeaturesService.completionProvider.onDidChange(() => {\n            this._updateTriggerCharacters();\n            this._updateActiveSuggestSession();\n        }));\n        let editorIsComposing = false;\n        this._toDispose.add(this._editor.onDidCompositionStart(() => {\n            editorIsComposing = true;\n        }));\n        this._toDispose.add(this._editor.onDidCompositionEnd(() => {\n            editorIsComposing = false;\n            this._onCompositionEnd();\n        }));\n        this._toDispose.add(this._editor.onDidChangeCursorSelection(e => {\n            // only trigger suggest when the editor isn't composing a character\n            if (!editorIsComposing) {\n                this._onCursorChange(e);\n            }\n        }));\n        this._toDispose.add(this._editor.onDidChangeModelContent(() => {\n            // only filter completions when the editor isn't composing a character\n            // allow-any-unicode-next-line\n            // e.g.  + u makes  but just  cannot be used for filtering\n            if (!editorIsComposing && this._triggerState !== undefined) {\n                this._refilterCompletionItems();\n            }\n        }));\n        this._updateTriggerCharacters();\n    }\n    dispose() {\n        dispose(this._triggerCharacterListener);\n        dispose([this._onDidCancel, this._onDidSuggest, this._onDidTrigger, this._triggerQuickSuggest]);\n        this._toDispose.dispose();\n        this._completionDisposables.dispose();\n        this.cancel();\n    }\n    _updateTriggerCharacters() {\n        this._triggerCharacterListener.clear();\n        if (this._editor.getOption(88 /* EditorOption.readOnly */)\n            || !this._editor.hasModel()\n            || !this._editor.getOption(117 /* EditorOption.suggestOnTriggerCharacters */)) {\n            return;\n        }\n        const supportsByTriggerCharacter = new Map();\n        for (const support of this._languageFeaturesService.completionProvider.all(this._editor.getModel())) {\n            for (const ch of support.triggerCharacters || []) {\n                let set = supportsByTriggerCharacter.get(ch);\n                if (!set) {\n                    set = new Set();\n                    set.add(getSnippetSuggestSupport());\n                    supportsByTriggerCharacter.set(ch, set);\n                }\n                set.add(support);\n            }\n        }\n        const checkTriggerCharacter = (text) => {\n            var _a;\n            if (!canShowSuggestOnTriggerCharacters(this._editor, this._contextKeyService, this._configurationService)) {\n                return;\n            }\n            if (LineContext.shouldAutoTrigger(this._editor)) {\n                // don't trigger by trigger characters when this is a case for quick suggest\n                return;\n            }\n            if (!text) {\n                // came here from the compositionEnd-event\n                const position = this._editor.getPosition();\n                const model = this._editor.getModel();\n                text = model.getLineContent(position.lineNumber).substr(0, position.column - 1);\n            }\n            let lastChar = '';\n            if (isLowSurrogate(text.charCodeAt(text.length - 1))) {\n                if (isHighSurrogate(text.charCodeAt(text.length - 2))) {\n                    lastChar = text.substr(text.length - 2);\n                }\n            }\n            else {\n                lastChar = text.charAt(text.length - 1);\n            }\n            const supports = supportsByTriggerCharacter.get(lastChar);\n            if (supports) {\n                // keep existing items that where not computed by the\n                // supports/providers that want to trigger now\n                const providerItemsToReuse = new Map();\n                if (this._completionModel) {\n                    for (const [provider, items] of this._completionModel.getItemsByProvider()) {\n                        if (!supports.has(provider)) {\n                            providerItemsToReuse.set(provider, items);\n                        }\n                    }\n                }\n                this.trigger({\n                    auto: true,\n                    triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n                    triggerCharacter: lastChar,\n                    retrigger: Boolean(this._completionModel),\n                    clipboardText: (_a = this._completionModel) === null || _a === void 0 ? void 0 : _a.clipboardText,\n                    completionOptions: { providerFilter: supports, providerItemsToReuse }\n                });\n            }\n        };\n        this._triggerCharacterListener.add(this._editor.onDidType(checkTriggerCharacter));\n        this._triggerCharacterListener.add(this._editor.onDidCompositionEnd(() => checkTriggerCharacter()));\n    }\n    // --- trigger/retrigger/cancel suggest\n    get state() {\n        if (!this._triggerState) {\n            return 0 /* State.Idle */;\n        }\n        else if (!this._triggerState.auto) {\n            return 1 /* State.Manual */;\n        }\n        else {\n            return 2 /* State.Auto */;\n        }\n    }\n    cancel(retrigger = false) {\n        var _a;\n        if (this._triggerState !== undefined) {\n            this._triggerQuickSuggest.cancel();\n            (_a = this._requestToken) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._requestToken = undefined;\n            this._triggerState = undefined;\n            this._completionModel = undefined;\n            this._context = undefined;\n            this._onDidCancel.fire({ retrigger });\n        }\n    }\n    clear() {\n        this._completionDisposables.clear();\n    }\n    _updateActiveSuggestSession() {\n        if (this._triggerState !== undefined) {\n            if (!this._editor.hasModel() || !this._languageFeaturesService.completionProvider.has(this._editor.getModel())) {\n                this.cancel();\n            }\n            else {\n                this.trigger({ auto: this._triggerState.auto, retrigger: true });\n            }\n        }\n    }\n    _onCursorChange(e) {\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const prevSelection = this._currentSelection;\n        this._currentSelection = this._editor.getSelection();\n        if (!e.selection.isEmpty()\n            || (e.reason !== 0 /* CursorChangeReason.NotSet */ && e.reason !== 3 /* CursorChangeReason.Explicit */)\n            || (e.source !== 'keyboard' && e.source !== 'deleteLeft')) {\n            // Early exit if nothing needs to be done!\n            // Leave some form of early exit check here if you wish to continue being a cursor position change listener ;)\n            this.cancel();\n            return;\n        }\n        if (this._triggerState === undefined && e.reason === 0 /* CursorChangeReason.NotSet */) {\n            if (prevSelection.containsRange(this._currentSelection) || prevSelection.getEndPosition().isBeforeOrEqual(this._currentSelection.getPosition())) {\n                // cursor did move RIGHT due to typing -> trigger quick suggest\n                this._doTriggerQuickSuggest();\n            }\n        }\n        else if (this._triggerState !== undefined && e.reason === 3 /* CursorChangeReason.Explicit */) {\n            // suggest is active and something like cursor keys are used to move\n            // the cursor. this means we can refilter at the new position\n            this._refilterCompletionItems();\n        }\n    }\n    _onCompositionEnd() {\n        // trigger or refilter when composition ends\n        if (this._triggerState === undefined) {\n            this._doTriggerQuickSuggest();\n        }\n        else {\n            this._refilterCompletionItems();\n        }\n    }\n    _doTriggerQuickSuggest() {\n        var _a;\n        if (QuickSuggestionsOptions.isAllOff(this._editor.getOption(86 /* EditorOption.quickSuggestions */))) {\n            // not enabled\n            return;\n        }\n        if (this._editor.getOption(114 /* EditorOption.suggest */).snippetsPreventQuickSuggestions && ((_a = SnippetController2.get(this._editor)) === null || _a === void 0 ? void 0 : _a.isInSnippet())) {\n            // no quick suggestion when in snippet mode\n            return;\n        }\n        this.cancel();\n        this._triggerQuickSuggest.cancelAndSet(() => {\n            if (this._triggerState !== undefined) {\n                return;\n            }\n            if (!LineContext.shouldAutoTrigger(this._editor)) {\n                return;\n            }\n            if (!this._editor.hasModel() || !this._editor.hasWidgetFocus()) {\n                return;\n            }\n            const model = this._editor.getModel();\n            const pos = this._editor.getPosition();\n            // validate enabled now\n            const config = this._editor.getOption(86 /* EditorOption.quickSuggestions */);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                return;\n            }\n            if (!QuickSuggestionsOptions.isAllOn(config)) {\n                // Check the type of the token that triggered this\n                model.tokenization.tokenizeIfCheap(pos.lineNumber);\n                const lineTokens = model.tokenization.getLineTokens(pos.lineNumber);\n                const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(pos.column - 1 - 1, 0)));\n                if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'on') {\n                    return;\n                }\n            }\n            if (!canShowQuickSuggest(this._editor, this._contextKeyService, this._configurationService)) {\n                // do not trigger quick suggestions if inline suggestions are shown\n                return;\n            }\n            if (!this._languageFeaturesService.completionProvider.has(model)) {\n                return;\n            }\n            // we made it till here -> trigger now\n            this.trigger({ auto: true });\n        }, this._editor.getOption(87 /* EditorOption.quickSuggestionsDelay */));\n    }\n    _refilterCompletionItems() {\n        assertType(this._editor.hasModel());\n        assertType(this._triggerState !== undefined);\n        const model = this._editor.getModel();\n        const position = this._editor.getPosition();\n        const ctx = new LineContext(model, position, Object.assign(Object.assign({}, this._triggerState), { refilter: true }));\n        this._onNewContext(ctx);\n    }\n    trigger(options) {\n        var _a, _b, _c, _d, _e, _f;\n        if (!this._editor.hasModel()) {\n            return;\n        }\n        const model = this._editor.getModel();\n        const ctx = new LineContext(model, this._editor.getPosition(), options);\n        // Cancel previous requests, change state & update UI\n        this.cancel(options.retrigger);\n        this._triggerState = options;\n        this._onDidTrigger.fire({ auto: options.auto, shy: (_a = options.shy) !== null && _a !== void 0 ? _a : false, position: this._editor.getPosition() });\n        // Capture context when request was sent\n        this._context = ctx;\n        // Build context for request\n        let suggestCtx = { triggerKind: (_b = options.triggerKind) !== null && _b !== void 0 ? _b : 0 /* CompletionTriggerKind.Invoke */ };\n        if (options.triggerCharacter) {\n            suggestCtx = {\n                triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */,\n                triggerCharacter: options.triggerCharacter\n            };\n        }\n        this._requestToken = new CancellationTokenSource();\n        // kind filter and snippet sort rules\n        const snippetSuggestions = this._editor.getOption(108 /* EditorOption.snippetSuggestions */);\n        let snippetSortOrder = 1 /* SnippetSortOrder.Inline */;\n        switch (snippetSuggestions) {\n            case 'top':\n                snippetSortOrder = 0 /* SnippetSortOrder.Top */;\n                break;\n            // \t that's the default anyways...\n            // case 'inline':\n            // \tsnippetSortOrder = SnippetSortOrder.Inline;\n            // \tbreak;\n            case 'bottom':\n                snippetSortOrder = 2 /* SnippetSortOrder.Bottom */;\n                break;\n        }\n        const { itemKind: itemKindFilter, showDeprecated } = SuggestModel._createSuggestFilter(this._editor);\n        const completionOptions = new CompletionOptions(snippetSortOrder, (_d = (_c = options.completionOptions) === null || _c === void 0 ? void 0 : _c.kindFilter) !== null && _d !== void 0 ? _d : itemKindFilter, (_e = options.completionOptions) === null || _e === void 0 ? void 0 : _e.providerFilter, (_f = options.completionOptions) === null || _f === void 0 ? void 0 : _f.providerItemsToReuse, showDeprecated);\n        const wordDistance = WordDistance.create(this._editorWorkerService, this._editor);\n        const completions = provideSuggestionItems(this._languageFeaturesService.completionProvider, model, this._editor.getPosition(), completionOptions, suggestCtx, this._requestToken.token);\n        Promise.all([completions, wordDistance]).then(([completions, wordDistance]) => __awaiter(this, void 0, void 0, function* () {\n            var _g;\n            (_g = this._requestToken) === null || _g === void 0 ? void 0 : _g.dispose();\n            if (!this._editor.hasModel()) {\n                return;\n            }\n            let clipboardText = options === null || options === void 0 ? void 0 : options.clipboardText;\n            if (!clipboardText && completions.needsClipboard) {\n                clipboardText = yield this._clipboardService.readText();\n            }\n            if (this._triggerState === undefined) {\n                return;\n            }\n            const model = this._editor.getModel();\n            // const items = completions.items;\n            // if (existing) {\n            // \tconst cmpFn = getSuggestionComparator(snippetSortOrder);\n            // \titems = items.concat(existing.items).sort(cmpFn);\n            // }\n            const ctx = new LineContext(model, this._editor.getPosition(), options);\n            const fuzzySearchOptions = Object.assign(Object.assign({}, FuzzyScoreOptions.default), { firstMatchCanBeWeak: !this._editor.getOption(114 /* EditorOption.suggest */).matchOnWordStartOnly });\n            this._completionModel = new CompletionModel(completions.items, this._context.column, {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            }, wordDistance, this._editor.getOption(114 /* EditorOption.suggest */), this._editor.getOption(108 /* EditorOption.snippetSuggestions */), fuzzySearchOptions, clipboardText);\n            // store containers so that they can be disposed later\n            this._completionDisposables.add(completions.disposable);\n            this._onNewContext(ctx);\n            // finally report telemetry about durations\n            this._reportDurationsTelemetry(completions.durations);\n        })).catch(onUnexpectedError);\n    }\n    _reportDurationsTelemetry(durations) {\n        if (this._telemetryGate++ % 230 !== 0) {\n            return;\n        }\n        setTimeout(() => {\n            this._telemetryService.publicLog2('suggest.durations.json', { data: JSON.stringify(durations) });\n            this._logService.debug('suggest.durations.json', durations);\n        });\n    }\n    static _createSuggestFilter(editor) {\n        // kind filter and snippet sort rules\n        const result = new Set();\n        // snippet setting\n        const snippetSuggestions = editor.getOption(108 /* EditorOption.snippetSuggestions */);\n        if (snippetSuggestions === 'none') {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        // type setting\n        const suggestOptions = editor.getOption(114 /* EditorOption.suggest */);\n        if (!suggestOptions.showMethods) {\n            result.add(0 /* CompletionItemKind.Method */);\n        }\n        if (!suggestOptions.showFunctions) {\n            result.add(1 /* CompletionItemKind.Function */);\n        }\n        if (!suggestOptions.showConstructors) {\n            result.add(2 /* CompletionItemKind.Constructor */);\n        }\n        if (!suggestOptions.showFields) {\n            result.add(3 /* CompletionItemKind.Field */);\n        }\n        if (!suggestOptions.showVariables) {\n            result.add(4 /* CompletionItemKind.Variable */);\n        }\n        if (!suggestOptions.showClasses) {\n            result.add(5 /* CompletionItemKind.Class */);\n        }\n        if (!suggestOptions.showStructs) {\n            result.add(6 /* CompletionItemKind.Struct */);\n        }\n        if (!suggestOptions.showInterfaces) {\n            result.add(7 /* CompletionItemKind.Interface */);\n        }\n        if (!suggestOptions.showModules) {\n            result.add(8 /* CompletionItemKind.Module */);\n        }\n        if (!suggestOptions.showProperties) {\n            result.add(9 /* CompletionItemKind.Property */);\n        }\n        if (!suggestOptions.showEvents) {\n            result.add(10 /* CompletionItemKind.Event */);\n        }\n        if (!suggestOptions.showOperators) {\n            result.add(11 /* CompletionItemKind.Operator */);\n        }\n        if (!suggestOptions.showUnits) {\n            result.add(12 /* CompletionItemKind.Unit */);\n        }\n        if (!suggestOptions.showValues) {\n            result.add(13 /* CompletionItemKind.Value */);\n        }\n        if (!suggestOptions.showConstants) {\n            result.add(14 /* CompletionItemKind.Constant */);\n        }\n        if (!suggestOptions.showEnums) {\n            result.add(15 /* CompletionItemKind.Enum */);\n        }\n        if (!suggestOptions.showEnumMembers) {\n            result.add(16 /* CompletionItemKind.EnumMember */);\n        }\n        if (!suggestOptions.showKeywords) {\n            result.add(17 /* CompletionItemKind.Keyword */);\n        }\n        if (!suggestOptions.showWords) {\n            result.add(18 /* CompletionItemKind.Text */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(19 /* CompletionItemKind.Color */);\n        }\n        if (!suggestOptions.showFiles) {\n            result.add(20 /* CompletionItemKind.File */);\n        }\n        if (!suggestOptions.showReferences) {\n            result.add(21 /* CompletionItemKind.Reference */);\n        }\n        if (!suggestOptions.showColors) {\n            result.add(22 /* CompletionItemKind.Customcolor */);\n        }\n        if (!suggestOptions.showFolders) {\n            result.add(23 /* CompletionItemKind.Folder */);\n        }\n        if (!suggestOptions.showTypeParameters) {\n            result.add(24 /* CompletionItemKind.TypeParameter */);\n        }\n        if (!suggestOptions.showSnippets) {\n            result.add(27 /* CompletionItemKind.Snippet */);\n        }\n        if (!suggestOptions.showUsers) {\n            result.add(25 /* CompletionItemKind.User */);\n        }\n        if (!suggestOptions.showIssues) {\n            result.add(26 /* CompletionItemKind.Issue */);\n        }\n        return { itemKind: result, showDeprecated: suggestOptions.showDeprecated };\n    }\n    _onNewContext(ctx) {\n        if (!this._context) {\n            // happens when 24x7 IntelliSense is enabled and still in its delay\n            return;\n        }\n        if (ctx.lineNumber !== this._context.lineNumber) {\n            // e.g. happens when pressing Enter while IntelliSense is computed\n            this.cancel();\n            return;\n        }\n        if (getLeadingWhitespace(ctx.leadingLineContent) !== getLeadingWhitespace(this._context.leadingLineContent)) {\n            // cancel IntelliSense when line start changes\n            // happens when the current word gets outdented\n            this.cancel();\n            return;\n        }\n        if (ctx.column < this._context.column) {\n            // typed -> moved cursor LEFT -> retrigger if still on a word\n            if (ctx.leadingWord.word) {\n                this.trigger({ auto: this._context.triggerOptions.auto, retrigger: true });\n            }\n            else {\n                this.cancel();\n            }\n            return;\n        }\n        if (!this._completionModel) {\n            // happens when IntelliSense is not yet computed\n            return;\n        }\n        if (ctx.leadingWord.word.length !== 0 && ctx.leadingWord.startColumn > this._context.leadingWord.startColumn) {\n            // started a new word while IntelliSense shows -> retrigger but reuse all items that we currently have\n            const shouldAutoTrigger = LineContext.shouldAutoTrigger(this._editor);\n            if (shouldAutoTrigger && this._context) {\n                // shouldAutoTrigger forces tokenization, which can cause pending cursor change events to be emitted, which can cause\n                // suggestions to be cancelled, which causes `this._context` to be undefined\n                const map = this._completionModel.getItemsByProvider();\n                this.trigger({\n                    auto: this._context.triggerOptions.auto,\n                    retrigger: true,\n                    clipboardText: this._completionModel.clipboardText,\n                    completionOptions: { providerItemsToReuse: map }\n                });\n            }\n            return;\n        }\n        if (ctx.column > this._context.column && this._completionModel.getIncompleteProvider().size > 0 && ctx.leadingWord.word.length !== 0) {\n            // typed -> moved cursor RIGHT & incomple model & still on a word -> retrigger\n            const providerItemsToReuse = new Map();\n            const providerFilter = new Set();\n            for (const [provider, items] of this._completionModel.getItemsByProvider()) {\n                if (items.length > 0 && items[0].container.incomplete) {\n                    providerFilter.add(provider);\n                }\n                else {\n                    providerItemsToReuse.set(provider, items);\n                }\n            }\n            this.trigger({\n                auto: this._context.triggerOptions.auto,\n                triggerKind: 2 /* CompletionTriggerKind.TriggerForIncompleteCompletions */,\n                retrigger: true,\n                clipboardText: this._completionModel.clipboardText,\n                completionOptions: { providerFilter, providerItemsToReuse }\n            });\n        }\n        else {\n            // typed -> moved cursor RIGHT -> update UI\n            const oldLineContext = this._completionModel.lineContext;\n            let isFrozen = false;\n            this._completionModel.lineContext = {\n                leadingLineContent: ctx.leadingLineContent,\n                characterCountDelta: ctx.column - this._context.column\n            };\n            if (this._completionModel.items.length === 0) {\n                const shouldAutoTrigger = LineContext.shouldAutoTrigger(this._editor);\n                if (!this._context) {\n                    // shouldAutoTrigger forces tokenization, which can cause pending cursor change events to be emitted, which can cause\n                    // suggestions to be cancelled, which causes `this._context` to be undefined\n                    this.cancel();\n                    return;\n                }\n                if (shouldAutoTrigger && this._context.leadingWord.endColumn < ctx.leadingWord.startColumn) {\n                    // retrigger when heading into a new word\n                    this.trigger({ auto: this._context.triggerOptions.auto, retrigger: true });\n                    return;\n                }\n                if (!this._context.triggerOptions.auto) {\n                    // freeze when IntelliSense was manually requested\n                    this._completionModel.lineContext = oldLineContext;\n                    isFrozen = this._completionModel.items.length > 0;\n                    if (isFrozen && ctx.leadingWord.word.length === 0) {\n                        // there were results before but now there aren't\n                        // and also we are not on a word anymore -> cancel\n                        this.cancel();\n                        return;\n                    }\n                }\n                else {\n                    // nothing left\n                    this.cancel();\n                    return;\n                }\n            }\n            this._onDidSuggest.fire({\n                completionModel: this._completionModel,\n                triggerOptions: ctx.triggerOptions,\n                isFrozen,\n            });\n        }\n    }\n};\nSuggestModel = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, IClipboardService),\n    __param(3, ITelemetryService),\n    __param(4, ILogService),\n    __param(5, IContextKeyService),\n    __param(6, IConfigurationService),\n    __param(7, ILanguageFeaturesService)\n], SuggestModel);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nexport class OvertypingCapturer {\n    constructor(editor, suggestModel) {\n        this._disposables = new DisposableStore();\n        this._lastOvertyped = [];\n        this._locked = false;\n        this._disposables.add(editor.onWillType(() => {\n            if (this._locked || !editor.hasModel()) {\n                return;\n            }\n            const selections = editor.getSelections();\n            const selectionsLength = selections.length;\n            // Check if it will overtype any selections\n            let willOvertype = false;\n            for (let i = 0; i < selectionsLength; i++) {\n                if (!selections[i].isEmpty()) {\n                    willOvertype = true;\n                    break;\n                }\n            }\n            if (!willOvertype) {\n                if (this._lastOvertyped.length !== 0) {\n                    this._lastOvertyped.length = 0;\n                }\n                return;\n            }\n            this._lastOvertyped = [];\n            const model = editor.getModel();\n            for (let i = 0; i < selectionsLength; i++) {\n                const selection = selections[i];\n                // Check for overtyping capturer restrictions\n                if (model.getValueLengthInRange(selection) > OvertypingCapturer._maxSelectionLength) {\n                    return;\n                }\n                this._lastOvertyped[i] = { value: model.getValueInRange(selection), multiline: selection.startLineNumber !== selection.endLineNumber };\n            }\n        }));\n        this._disposables.add(suggestModel.onDidTrigger(e => {\n            this._locked = true;\n        }));\n        this._disposables.add(suggestModel.onDidCancel(e => {\n            this._locked = false;\n        }));\n    }\n    getLastOvertypedInfo(idx) {\n        if (idx >= 0 && idx < this._lastOvertyped.length) {\n            return this._lastOvertyped[idx];\n        }\n        return undefined;\n    }\n    dispose() {\n        this._disposables.dispose();\n    }\n}\nOvertypingCapturer._maxSelectionLength = 51200;\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { localize } from '../../../../nls.js';\nimport { MenuEntryActionViewItem } from '../../../../platform/actions/browser/menuEntryActionViewItem.js';\nimport { IMenuService, MenuItemAction } from '../../../../platform/actions/common/actions.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass StatusBarViewItem extends MenuEntryActionViewItem {\n    updateLabel() {\n        const kb = this._keybindingService.lookupKeybinding(this._action.id, this._contextKeyService);\n        if (!kb) {\n            return super.updateLabel();\n        }\n        if (this.label) {\n            this.label.textContent = localize({ key: 'content', comment: ['A label', 'A keybinding'] }, '{0} ({1})', this._action.label, StatusBarViewItem.symbolPrintEnter(kb));\n        }\n    }\n    static symbolPrintEnter(kb) {\n        var _a;\n        return (_a = kb.getLabel()) === null || _a === void 0 ? void 0 : _a.replace(/\\benter\\b/gi, '\\u23CE');\n    }\n}\nexport let SuggestWidgetStatus = class SuggestWidgetStatus {\n    constructor(container, _menuId, instantiationService, _menuService, _contextKeyService) {\n        this._menuId = _menuId;\n        this._menuService = _menuService;\n        this._contextKeyService = _contextKeyService;\n        this._menuDisposables = new DisposableStore();\n        this.element = dom.append(container, dom.$('.suggest-status-bar'));\n        const actionViewItemProvider = (action => {\n            return action instanceof MenuItemAction ? instantiationService.createInstance(StatusBarViewItem, action, undefined) : undefined;\n        });\n        this._leftActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._rightActions = new ActionBar(this.element, { actionViewItemProvider });\n        this._leftActions.domNode.classList.add('left');\n        this._rightActions.domNode.classList.add('right');\n    }\n    dispose() {\n        this._menuDisposables.dispose();\n        this.element.remove();\n    }\n    show() {\n        const menu = this._menuService.createMenu(this._menuId, this._contextKeyService);\n        const renderMenu = () => {\n            const left = [];\n            const right = [];\n            for (const [group, actions] of menu.getActions()) {\n                if (group === 'left') {\n                    left.push(...actions);\n                }\n                else {\n                    right.push(...actions);\n                }\n            }\n            this._leftActions.clear();\n            this._leftActions.push(left);\n            this._rightActions.clear();\n            this._rightActions.push(right);\n        };\n        this._menuDisposables.add(menu.onDidChange(() => renderMenu()));\n        this._menuDisposables.add(menu);\n    }\n    hide() {\n        this._menuDisposables.clear();\n    }\n};\nSuggestWidgetStatus = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, IMenuService),\n    __param(4, IContextKeyService)\n], SuggestWidgetStatus);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { MarkdownRenderer } from '../../markdownRenderer/browser/markdownRenderer.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport * as nls from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nexport function canExpandCompletionItem(item) {\n    return !!item && Boolean(item.completion.documentation || item.completion.detail && item.completion.detail !== item.completion.label);\n}\nexport let SuggestDetailsWidget = class SuggestDetailsWidget {\n    constructor(_editor, instaService) {\n        this._editor = _editor;\n        this._onDidClose = new Emitter();\n        this.onDidClose = this._onDidClose.event;\n        this._onDidChangeContents = new Emitter();\n        this.onDidChangeContents = this._onDidChangeContents.event;\n        this._disposables = new DisposableStore();\n        this._renderDisposeable = new DisposableStore();\n        this._borderWidth = 1;\n        this._size = new dom.Dimension(330, 0);\n        this.domNode = dom.$('.suggest-details');\n        this.domNode.classList.add('no-docs');\n        this._markdownRenderer = instaService.createInstance(MarkdownRenderer, { editor: _editor });\n        this._body = dom.$('.body');\n        this._scrollbar = new DomScrollableElement(this._body, {\n            alwaysConsumeMouseWheel: true,\n        });\n        dom.append(this.domNode, this._scrollbar.getDomNode());\n        this._disposables.add(this._scrollbar);\n        this._header = dom.append(this._body, dom.$('.header'));\n        this._close = dom.append(this._header, dom.$('span' + ThemeIcon.asCSSSelector(Codicon.close)));\n        this._close.title = nls.localize('details.close', \"Close\");\n        this._type = dom.append(this._header, dom.$('p.type'));\n        this._docs = dom.append(this._body, dom.$('p.docs'));\n        this._configureFont();\n        this._disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(48 /* EditorOption.fontInfo */)) {\n                this._configureFont();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._renderDisposeable.dispose();\n    }\n    _configureFont() {\n        const options = this._editor.getOptions();\n        const fontInfo = options.get(48 /* EditorOption.fontInfo */);\n        const fontFamily = fontInfo.getMassagedFontFamily();\n        const fontSize = options.get(115 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n        const lineHeight = options.get(116 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n        const fontWeight = fontInfo.fontWeight;\n        const fontSizePx = `${fontSize}px`;\n        const lineHeightPx = `${lineHeight}px`;\n        this.domNode.style.fontSize = fontSizePx;\n        this.domNode.style.lineHeight = `${lineHeight / fontSize}`;\n        this.domNode.style.fontWeight = fontWeight;\n        this.domNode.style.fontFeatureSettings = fontInfo.fontFeatureSettings;\n        this._type.style.fontFamily = fontFamily;\n        this._close.style.height = lineHeightPx;\n        this._close.style.width = lineHeightPx;\n    }\n    getLayoutInfo() {\n        const lineHeight = this._editor.getOption(116 /* EditorOption.suggestLineHeight */) || this._editor.getOption(48 /* EditorOption.fontInfo */).lineHeight;\n        const borderWidth = this._borderWidth;\n        const borderHeight = borderWidth * 2;\n        return {\n            lineHeight,\n            borderWidth,\n            borderHeight,\n            verticalPadding: 22,\n            horizontalPadding: 14\n        };\n    }\n    renderLoading() {\n        this._type.textContent = nls.localize('loading', \"Loading...\");\n        this._docs.textContent = '';\n        this.domNode.classList.remove('no-docs', 'no-type');\n        this.layout(this.size.width, this.getLayoutInfo().lineHeight * 2);\n        this._onDidChangeContents.fire(this);\n    }\n    renderItem(item, explainMode) {\n        var _a, _b;\n        this._renderDisposeable.clear();\n        let { detail, documentation } = item.completion;\n        if (explainMode) {\n            let md = '';\n            md += `score: ${item.score[0]}\\n`;\n            md += `prefix: ${(_a = item.word) !== null && _a !== void 0 ? _a : '(no prefix)'}\\n`;\n            md += `word: ${item.completion.filterText ? item.completion.filterText + ' (filterText)' : item.textLabel}\\n`;\n            md += `distance: ${item.distance} (localityBonus-setting)\\n`;\n            md += `index: ${item.idx}, based on ${item.completion.sortText && `sortText: \"${item.completion.sortText}\"` || 'label'}\\n`;\n            md += `commit_chars: ${(_b = item.completion.commitCharacters) === null || _b === void 0 ? void 0 : _b.join('')}\\n`;\n            documentation = new MarkdownString().appendCodeblock('empty', md);\n            detail = `Provider: ${item.provider._debugDisplayName}`;\n        }\n        if (!explainMode && !canExpandCompletionItem(item)) {\n            this.clearContents();\n            return;\n        }\n        this.domNode.classList.remove('no-docs', 'no-type');\n        // --- details\n        if (detail) {\n            const cappedDetail = detail.length > 100000 ? `${detail.substr(0, 100000)}` : detail;\n            this._type.textContent = cappedDetail;\n            this._type.title = cappedDetail;\n            dom.show(this._type);\n            this._type.classList.toggle('auto-wrap', !/\\r?\\n^\\s+/gmi.test(cappedDetail));\n        }\n        else {\n            dom.clearNode(this._type);\n            this._type.title = '';\n            dom.hide(this._type);\n            this.domNode.classList.add('no-type');\n        }\n        // --- documentation\n        dom.clearNode(this._docs);\n        if (typeof documentation === 'string') {\n            this._docs.classList.remove('markdown-docs');\n            this._docs.textContent = documentation;\n        }\n        else if (documentation) {\n            this._docs.classList.add('markdown-docs');\n            dom.clearNode(this._docs);\n            const renderedContents = this._markdownRenderer.render(documentation);\n            this._docs.appendChild(renderedContents.element);\n            this._renderDisposeable.add(renderedContents);\n            this._renderDisposeable.add(this._markdownRenderer.onDidRenderAsync(() => {\n                this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n                this._onDidChangeContents.fire(this);\n            }));\n        }\n        this.domNode.style.userSelect = 'text';\n        this.domNode.tabIndex = -1;\n        this._close.onmousedown = e => {\n            e.preventDefault();\n            e.stopPropagation();\n        };\n        this._close.onclick = e => {\n            e.preventDefault();\n            e.stopPropagation();\n            this._onDidClose.fire();\n        };\n        this._body.scrollTop = 0;\n        this.layout(this._size.width, this._type.clientHeight + this._docs.clientHeight);\n        this._onDidChangeContents.fire(this);\n    }\n    clearContents() {\n        this.domNode.classList.add('no-docs');\n        this._type.textContent = '';\n        this._docs.textContent = '';\n    }\n    get size() {\n        return this._size;\n    }\n    layout(width, height) {\n        const newSize = new dom.Dimension(width, height);\n        if (!dom.Dimension.equals(newSize, this._size)) {\n            this._size = newSize;\n            dom.size(this.domNode, width, height);\n        }\n        this._scrollbar.scanDomNode();\n    }\n    scrollDown(much = 8) {\n        this._body.scrollTop += much;\n    }\n    scrollUp(much = 8) {\n        this._body.scrollTop -= much;\n    }\n    scrollTop() {\n        this._body.scrollTop = 0;\n    }\n    scrollBottom() {\n        this._body.scrollTop = this._body.scrollHeight;\n    }\n    pageDown() {\n        this.scrollDown(80);\n    }\n    pageUp() {\n        this.scrollUp(80);\n    }\n    set borderWidth(width) {\n        this._borderWidth = width;\n    }\n    get borderWidth() {\n        return this._borderWidth;\n    }\n};\nSuggestDetailsWidget = __decorate([\n    __param(1, IInstantiationService)\n], SuggestDetailsWidget);\nexport class SuggestDetailsOverlay {\n    constructor(widget, _editor) {\n        this.widget = widget;\n        this._editor = _editor;\n        this._disposables = new DisposableStore();\n        this._added = false;\n        this._preferAlignAtTop = true;\n        this._resizable = new ResizableHTMLElement();\n        this._resizable.domNode.classList.add('suggest-details-container');\n        this._resizable.domNode.appendChild(widget.domNode);\n        this._resizable.enableSashes(false, true, true, false);\n        let topLeftNow;\n        let sizeNow;\n        let deltaTop = 0;\n        let deltaLeft = 0;\n        this._disposables.add(this._resizable.onDidWillResize(() => {\n            topLeftNow = this._topLeft;\n            sizeNow = this._resizable.size;\n        }));\n        this._disposables.add(this._resizable.onDidResize(e => {\n            if (topLeftNow && sizeNow) {\n                this.widget.layout(e.dimension.width, e.dimension.height);\n                let updateTopLeft = false;\n                if (e.west) {\n                    deltaLeft = sizeNow.width - e.dimension.width;\n                    updateTopLeft = true;\n                }\n                if (e.north) {\n                    deltaTop = sizeNow.height - e.dimension.height;\n                    updateTopLeft = true;\n                }\n                if (updateTopLeft) {\n                    this._applyTopLeft({\n                        top: topLeftNow.top + deltaTop,\n                        left: topLeftNow.left + deltaLeft,\n                    });\n                }\n            }\n            if (e.done) {\n                topLeftNow = undefined;\n                sizeNow = undefined;\n                deltaTop = 0;\n                deltaLeft = 0;\n                this._userSize = e.dimension;\n            }\n        }));\n        this._disposables.add(this.widget.onDidChangeContents(() => {\n            var _a;\n            if (this._anchorBox) {\n                this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, this._preferAlignAtTop);\n            }\n        }));\n    }\n    dispose() {\n        this._resizable.dispose();\n        this._disposables.dispose();\n        this.hide();\n    }\n    getId() {\n        return 'suggest.details';\n    }\n    getDomNode() {\n        return this._resizable.domNode;\n    }\n    getPosition() {\n        return null;\n    }\n    show() {\n        if (!this._added) {\n            this._editor.addOverlayWidget(this);\n            this.getDomNode().style.position = 'fixed';\n            this._added = true;\n        }\n    }\n    hide(sessionEnded = false) {\n        this._resizable.clearSashHoverState();\n        if (this._added) {\n            this._editor.removeOverlayWidget(this);\n            this._added = false;\n            this._anchorBox = undefined;\n            this._topLeft = undefined;\n        }\n        if (sessionEnded) {\n            this._userSize = undefined;\n            this.widget.clearContents();\n        }\n    }\n    placeAtAnchor(anchor, preferAlignAtTop) {\n        var _a;\n        const anchorBox = anchor.getBoundingClientRect();\n        this._anchorBox = anchorBox;\n        this._preferAlignAtTop = preferAlignAtTop;\n        this._placeAtAnchor(this._anchorBox, (_a = this._userSize) !== null && _a !== void 0 ? _a : this.widget.size, preferAlignAtTop);\n    }\n    _placeAtAnchor(anchorBox, size, preferAlignAtTop) {\n        var _a;\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.widget.getLayoutInfo();\n        const defaultMinSize = new dom.Dimension(220, 2 * info.lineHeight);\n        const defaultTop = anchorBox.top;\n        // EAST\n        const eastPlacement = (function () {\n            const width = bodyBox.width - (anchorBox.left + anchorBox.width + info.borderWidth + info.horizontalPadding);\n            const left = -info.borderWidth + anchorBox.left + anchorBox.width;\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // WEST\n        const westPlacement = (function () {\n            const width = anchorBox.left - info.borderWidth - info.horizontalPadding;\n            const left = Math.max(info.horizontalPadding, anchorBox.left - size.width - info.borderWidth);\n            const maxSizeTop = new dom.Dimension(width, bodyBox.height - anchorBox.top - info.borderHeight - info.verticalPadding);\n            const maxSizeBottom = maxSizeTop.with(undefined, anchorBox.top + anchorBox.height - info.borderHeight - info.verticalPadding);\n            return { top: defaultTop, left, fit: width - size.width, maxSizeTop, maxSizeBottom, minSize: defaultMinSize.with(Math.min(width, defaultMinSize.width)) };\n        })();\n        // SOUTH\n        const southPacement = (function () {\n            const left = anchorBox.left;\n            const top = -info.borderWidth + anchorBox.top + anchorBox.height;\n            const maxSizeBottom = new dom.Dimension(anchorBox.width - info.borderHeight, bodyBox.height - anchorBox.top - anchorBox.height - info.verticalPadding);\n            return { top, left, fit: maxSizeBottom.height - size.height, maxSizeBottom, maxSizeTop: maxSizeBottom, minSize: defaultMinSize.with(maxSizeBottom.width) };\n        })();\n        // take first placement that fits or the first with \"least bad\" fit\n        const placements = [eastPlacement, westPlacement, southPacement];\n        const placement = (_a = placements.find(p => p.fit >= 0)) !== null && _a !== void 0 ? _a : placements.sort((a, b) => b.fit - a.fit)[0];\n        // top/bottom placement\n        const bottom = anchorBox.top + anchorBox.height - info.borderHeight;\n        let alignAtTop;\n        let height = size.height;\n        const maxHeight = Math.max(placement.maxSizeTop.height, placement.maxSizeBottom.height);\n        if (height > maxHeight) {\n            height = maxHeight;\n        }\n        let maxSize;\n        if (preferAlignAtTop) {\n            if (height <= placement.maxSizeTop.height) {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n            else {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n        }\n        else {\n            if (height <= placement.maxSizeBottom.height) {\n                alignAtTop = false;\n                maxSize = placement.maxSizeBottom;\n            }\n            else {\n                alignAtTop = true;\n                maxSize = placement.maxSizeTop;\n            }\n        }\n        this._applyTopLeft({ left: placement.left, top: alignAtTop ? placement.top : bottom - height });\n        this.getDomNode().style.position = 'fixed';\n        this._resizable.enableSashes(!alignAtTop, placement === eastPlacement, alignAtTop, placement !== eastPlacement);\n        this._resizable.minSize = placement.minSize;\n        this._resizable.maxSize = maxSize;\n        this._resizable.layout(height, Math.min(maxSize.width, size.width));\n        this.widget.layout(this._resizable.size.width, this._resizable.size.height);\n    }\n    _applyTopLeft(topLeft) {\n        this._topLeft = topLeft;\n        this.getDomNode().style.left = `${this._topLeft.left}px`;\n        this.getDomNode().style.top = `${this._topLeft.top}px`;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar _a;\nimport { $, append, hide, show } from '../../../../base/browser/dom.js';\nimport { IconLabel } from '../../../../base/browser/ui/iconLabel/iconLabel.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { Emitter } from '../../../../base/common/event.js';\nimport { createMatches } from '../../../../base/common/filters.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { URI } from '../../../../base/common/uri.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { getIconClasses } from '../../../common/services/getIconClasses.js';\nimport { IModelService } from '../../../common/services/model.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport * as nls from '../../../../nls.js';\nimport { FileKind } from '../../../../platform/files/common/files.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { canExpandCompletionItem } from './suggestWidgetDetails.js';\nexport function getAriaId(index) {\n    return `suggest-aria-id:${index}`;\n}\nconst suggestMoreInfoIcon = registerIcon('suggest-more-info', Codicon.chevronRight, nls.localize('suggestMoreInfoIcon', 'Icon for more information in the suggest widget.'));\nconst _completionItemColor = new (_a = class ColorExtractor {\n        extract(item, out) {\n            if (item.textLabel.match(ColorExtractor._regexStrict)) {\n                out[0] = item.textLabel;\n                return true;\n            }\n            if (item.completion.detail && item.completion.detail.match(ColorExtractor._regexStrict)) {\n                out[0] = item.completion.detail;\n                return true;\n            }\n            if (typeof item.completion.documentation === 'string') {\n                const match = ColorExtractor._regexRelaxed.exec(item.completion.documentation);\n                if (match && (match.index === 0 || match.index + match[0].length === item.completion.documentation.length)) {\n                    out[0] = match[0];\n                    return true;\n                }\n            }\n            return false;\n        }\n    },\n    _a._regexRelaxed = /(#([\\da-fA-F]{3}){1,2}|(rgb|hsl)a\\(\\s*(\\d{1,3}%?\\s*,\\s*){3}(1|0?\\.\\d+)\\)|(rgb|hsl)\\(\\s*\\d{1,3}%?(\\s*,\\s*\\d{1,3}%?){2}\\s*\\))/,\n    _a._regexStrict = new RegExp(`^${_a._regexRelaxed.source}$`, 'i'),\n    _a);\nexport let ItemRenderer = class ItemRenderer {\n    constructor(_editor, _modelService, _languageService, _themeService) {\n        this._editor = _editor;\n        this._modelService = _modelService;\n        this._languageService = _languageService;\n        this._themeService = _themeService;\n        this._onDidToggleDetails = new Emitter();\n        this.onDidToggleDetails = this._onDidToggleDetails.event;\n        this.templateId = 'suggestion';\n    }\n    dispose() {\n        this._onDidToggleDetails.dispose();\n    }\n    renderTemplate(container) {\n        const disposables = new DisposableStore();\n        const root = container;\n        root.classList.add('show-file-icons');\n        const icon = append(container, $('.icon'));\n        const colorspan = append(icon, $('span.colorspan'));\n        const text = append(container, $('.contents'));\n        const main = append(text, $('.main'));\n        const iconContainer = append(main, $('.icon-label.codicon'));\n        const left = append(main, $('span.left'));\n        const right = append(main, $('span.right'));\n        const iconLabel = new IconLabel(left, { supportHighlights: true, supportIcons: true });\n        disposables.add(iconLabel);\n        const parametersLabel = append(left, $('span.signature-label'));\n        const qualifierLabel = append(left, $('span.qualifier-label'));\n        const detailsLabel = append(right, $('span.details-label'));\n        const readMore = append(right, $('span.readMore' + ThemeIcon.asCSSSelector(suggestMoreInfoIcon)));\n        readMore.title = nls.localize('readMore', \"Read More\");\n        const configureFont = () => {\n            const options = this._editor.getOptions();\n            const fontInfo = options.get(48 /* EditorOption.fontInfo */);\n            const fontFamily = fontInfo.getMassagedFontFamily();\n            const fontFeatureSettings = fontInfo.fontFeatureSettings;\n            const fontSize = options.get(115 /* EditorOption.suggestFontSize */) || fontInfo.fontSize;\n            const lineHeight = options.get(116 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight;\n            const fontWeight = fontInfo.fontWeight;\n            const letterSpacing = fontInfo.letterSpacing;\n            const fontSizePx = `${fontSize}px`;\n            const lineHeightPx = `${lineHeight}px`;\n            const letterSpacingPx = `${letterSpacing}px`;\n            root.style.fontSize = fontSizePx;\n            root.style.fontWeight = fontWeight;\n            root.style.letterSpacing = letterSpacingPx;\n            main.style.fontFamily = fontFamily;\n            main.style.fontFeatureSettings = fontFeatureSettings;\n            main.style.lineHeight = lineHeightPx;\n            icon.style.height = lineHeightPx;\n            icon.style.width = lineHeightPx;\n            readMore.style.height = lineHeightPx;\n            readMore.style.width = lineHeightPx;\n        };\n        configureFont();\n        disposables.add(this._editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(48 /* EditorOption.fontInfo */) || e.hasChanged(115 /* EditorOption.suggestFontSize */) || e.hasChanged(116 /* EditorOption.suggestLineHeight */)) {\n                configureFont();\n            }\n        }));\n        return { root, left, right, icon, colorspan, iconLabel, iconContainer, parametersLabel, qualifierLabel, detailsLabel, readMore, disposables };\n    }\n    renderElement(element, index, data) {\n        const { completion } = element;\n        data.root.id = getAriaId(index);\n        data.colorspan.style.backgroundColor = '';\n        const labelOptions = {\n            labelEscapeNewLines: true,\n            matches: createMatches(element.score)\n        };\n        const color = [];\n        if (completion.kind === 19 /* CompletionItemKind.Color */ && _completionItemColor.extract(element, color)) {\n            // special logic for 'color' completion items\n            data.icon.className = 'icon customcolor';\n            data.iconContainer.className = 'icon hide';\n            data.colorspan.style.backgroundColor = color[0];\n        }\n        else if (completion.kind === 20 /* CompletionItemKind.File */ && this._themeService.getFileIconTheme().hasFileIcons) {\n            // special logic for 'file' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            const labelClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FILE);\n            const detailClasses = getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FILE);\n            labelOptions.extraClasses = labelClasses.length > detailClasses.length ? labelClasses : detailClasses;\n        }\n        else if (completion.kind === 23 /* CompletionItemKind.Folder */ && this._themeService.getFileIconTheme().hasFolderIcons) {\n            // special logic for 'folder' completion items\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = 'icon hide';\n            labelOptions.extraClasses = [\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: element.textLabel }), FileKind.FOLDER),\n                getIconClasses(this._modelService, this._languageService, URI.from({ scheme: 'fake', path: completion.detail }), FileKind.FOLDER)\n            ].flat();\n        }\n        else {\n            // normal icon\n            data.icon.className = 'icon hide';\n            data.iconContainer.className = '';\n            data.iconContainer.classList.add('suggest-icon', ...ThemeIcon.asClassNameArray(CompletionItemKinds.toIcon(completion.kind)));\n        }\n        if (completion.tags && completion.tags.indexOf(1 /* CompletionItemTag.Deprecated */) >= 0) {\n            labelOptions.extraClasses = (labelOptions.extraClasses || []).concat(['deprecated']);\n            labelOptions.matches = [];\n        }\n        data.iconLabel.setLabel(element.textLabel, undefined, labelOptions);\n        if (typeof completion.label === 'string') {\n            data.parametersLabel.textContent = '';\n            data.detailsLabel.textContent = stripNewLines(completion.detail || '');\n            data.root.classList.add('string-label');\n        }\n        else {\n            data.parametersLabel.textContent = stripNewLines(completion.label.detail || '');\n            data.detailsLabel.textContent = stripNewLines(completion.label.description || '');\n            data.root.classList.remove('string-label');\n        }\n        if (this._editor.getOption(114 /* EditorOption.suggest */).showInlineDetails) {\n            show(data.detailsLabel);\n        }\n        else {\n            hide(data.detailsLabel);\n        }\n        if (canExpandCompletionItem(element)) {\n            data.right.classList.add('can-expand-details');\n            show(data.readMore);\n            data.readMore.onmousedown = e => {\n                e.stopPropagation();\n                e.preventDefault();\n            };\n            data.readMore.onclick = e => {\n                e.stopPropagation();\n                e.preventDefault();\n                this._onDidToggleDetails.fire();\n            };\n        }\n        else {\n            data.right.classList.remove('can-expand-details');\n            hide(data.readMore);\n            data.readMore.onmousedown = null;\n            data.readMore.onclick = null;\n        }\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n};\nItemRenderer = __decorate([\n    __param(1, IModelService),\n    __param(2, ILanguageService),\n    __param(3, IThemeService)\n], ItemRenderer);\nfunction stripNewLines(str) {\n    return str.replace(/\\r\\n|\\r|\\n/g, '');\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../../base/browser/dom.js';\nimport '../../../../base/browser/ui/codicons/codiconStyles.js'; // The codicon symbol styles are defined here and must be loaded\nimport { List } from '../../../../base/browser/ui/list/listWidget.js';\nimport { createCancelablePromise, disposableTimeout, TimeoutTimer } from '../../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Emitter, PauseableEmitter } from '../../../../base/common/event.js';\nimport { DisposableStore, MutableDisposable } from '../../../../base/common/lifecycle.js';\nimport { clamp } from '../../../../base/common/numbers.js';\nimport * as strings from '../../../../base/common/strings.js';\nimport './media/suggest.css';\nimport { EmbeddedCodeEditorWidget } from '../../../browser/widget/embeddedCodeEditorWidget.js';\nimport { SuggestWidgetStatus } from './suggestWidgetStatus.js';\nimport '../../symbolIcons/browser/symbolIcons.js'; // The codicon symbol colors are defined here and must be loaded to get colors\nimport * as nls from '../../../../nls.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService } from '../../../../platform/storage/common/storage.js';\nimport { activeContrastBorder, editorForeground, editorWidgetBackground, editorWidgetBorder, listFocusHighlightForeground, listHighlightForeground, quickInputListFocusBackground, quickInputListFocusForeground, quickInputListFocusIconForeground, registerColor, transparent } from '../../../../platform/theme/common/colorRegistry.js';\nimport { isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nimport { ResizableHTMLElement } from '../../../../base/browser/ui/resizable/resizable.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { canExpandCompletionItem, SuggestDetailsOverlay, SuggestDetailsWidget } from './suggestWidgetDetails.js';\nimport { getAriaId, ItemRenderer } from './suggestWidgetRenderer.js';\nimport { getListStyles } from '../../../../platform/theme/browser/defaultStyles.js';\n/**\n * Suggest widget colors\n */\nregisterColor('editorSuggestWidget.background', { dark: editorWidgetBackground, light: editorWidgetBackground, hcDark: editorWidgetBackground, hcLight: editorWidgetBackground }, nls.localize('editorSuggestWidgetBackground', 'Background color of the suggest widget.'));\nregisterColor('editorSuggestWidget.border', { dark: editorWidgetBorder, light: editorWidgetBorder, hcDark: editorWidgetBorder, hcLight: editorWidgetBorder }, nls.localize('editorSuggestWidgetBorder', 'Border color of the suggest widget.'));\nconst editorSuggestWidgetForeground = registerColor('editorSuggestWidget.foreground', { dark: editorForeground, light: editorForeground, hcDark: editorForeground, hcLight: editorForeground }, nls.localize('editorSuggestWidgetForeground', 'Foreground color of the suggest widget.'));\nregisterColor('editorSuggestWidget.selectedForeground', { dark: quickInputListFocusForeground, light: quickInputListFocusForeground, hcDark: quickInputListFocusForeground, hcLight: quickInputListFocusForeground }, nls.localize('editorSuggestWidgetSelectedForeground', 'Foreground color of the selected entry in the suggest widget.'));\nregisterColor('editorSuggestWidget.selectedIconForeground', { dark: quickInputListFocusIconForeground, light: quickInputListFocusIconForeground, hcDark: quickInputListFocusIconForeground, hcLight: quickInputListFocusIconForeground }, nls.localize('editorSuggestWidgetSelectedIconForeground', 'Icon foreground color of the selected entry in the suggest widget.'));\nexport const editorSuggestWidgetSelectedBackground = registerColor('editorSuggestWidget.selectedBackground', { dark: quickInputListFocusBackground, light: quickInputListFocusBackground, hcDark: quickInputListFocusBackground, hcLight: quickInputListFocusBackground }, nls.localize('editorSuggestWidgetSelectedBackground', 'Background color of the selected entry in the suggest widget.'));\nregisterColor('editorSuggestWidget.highlightForeground', { dark: listHighlightForeground, light: listHighlightForeground, hcDark: listHighlightForeground, hcLight: listHighlightForeground }, nls.localize('editorSuggestWidgetHighlightForeground', 'Color of the match highlights in the suggest widget.'));\nregisterColor('editorSuggestWidget.focusHighlightForeground', { dark: listFocusHighlightForeground, light: listFocusHighlightForeground, hcDark: listFocusHighlightForeground, hcLight: listFocusHighlightForeground }, nls.localize('editorSuggestWidgetFocusHighlightForeground', 'Color of the match highlights in the suggest widget when an item is focused.'));\nregisterColor('editorSuggestWidgetStatus.foreground', { dark: transparent(editorSuggestWidgetForeground, .5), light: transparent(editorSuggestWidgetForeground, .5), hcDark: transparent(editorSuggestWidgetForeground, .5), hcLight: transparent(editorSuggestWidgetForeground, .5) }, nls.localize('editorSuggestWidgetStatusForeground', 'Foreground color of the suggest widget status.'));\nclass PersistedWidgetSize {\n    constructor(_service, editor) {\n        this._service = _service;\n        this._key = `suggestWidget.size/${editor.getEditorType()}/${editor instanceof EmbeddedCodeEditorWidget}`;\n    }\n    restore() {\n        var _a;\n        const raw = (_a = this._service.get(this._key, 0 /* StorageScope.PROFILE */)) !== null && _a !== void 0 ? _a : '';\n        try {\n            const obj = JSON.parse(raw);\n            if (dom.Dimension.is(obj)) {\n                return dom.Dimension.lift(obj);\n            }\n        }\n        catch (_b) {\n            // ignore\n        }\n        return undefined;\n    }\n    store(size) {\n        this._service.store(this._key, JSON.stringify(size), 0 /* StorageScope.PROFILE */, 1 /* StorageTarget.MACHINE */);\n    }\n    reset() {\n        this._service.remove(this._key, 0 /* StorageScope.PROFILE */);\n    }\n}\nexport let SuggestWidget = class SuggestWidget {\n    constructor(editor, _storageService, _contextKeyService, _themeService, instantiationService) {\n        this.editor = editor;\n        this._storageService = _storageService;\n        this._state = 0 /* State.Hidden */;\n        this._isAuto = false;\n        this._pendingLayout = new MutableDisposable();\n        this._pendingShowDetails = new MutableDisposable();\n        this._ignoreFocusEvents = false;\n        this._forceRenderingAbove = false;\n        this._explainMode = false;\n        this._showTimeout = new TimeoutTimer();\n        this._disposables = new DisposableStore();\n        this._onDidSelect = new PauseableEmitter();\n        this._onDidFocus = new PauseableEmitter();\n        this._onDidHide = new Emitter();\n        this._onDidShow = new Emitter();\n        this.onDidSelect = this._onDidSelect.event;\n        this.onDidFocus = this._onDidFocus.event;\n        this.onDidHide = this._onDidHide.event;\n        this.onDidShow = this._onDidShow.event;\n        this._onDetailsKeydown = new Emitter();\n        this.onDetailsKeyDown = this._onDetailsKeydown.event;\n        this.element = new ResizableHTMLElement();\n        this.element.domNode.classList.add('editor-widget', 'suggest-widget');\n        this._contentWidget = new SuggestContentWidget(this, editor);\n        this._persistedSize = new PersistedWidgetSize(_storageService, editor);\n        class ResizeState {\n            constructor(persistedSize, currentSize, persistHeight = false, persistWidth = false) {\n                this.persistedSize = persistedSize;\n                this.currentSize = currentSize;\n                this.persistHeight = persistHeight;\n                this.persistWidth = persistWidth;\n            }\n        }\n        let state;\n        this._disposables.add(this.element.onDidWillResize(() => {\n            this._contentWidget.lockPreference();\n            state = new ResizeState(this._persistedSize.restore(), this.element.size);\n        }));\n        this._disposables.add(this.element.onDidResize(e => {\n            var _a, _b, _c, _d;\n            this._resize(e.dimension.width, e.dimension.height);\n            if (state) {\n                state.persistHeight = state.persistHeight || !!e.north || !!e.south;\n                state.persistWidth = state.persistWidth || !!e.east || !!e.west;\n            }\n            if (!e.done) {\n                return;\n            }\n            if (state) {\n                // only store width or height value that have changed and also\n                // only store changes that are above a certain threshold\n                const { itemHeight, defaultSize } = this.getLayoutInfo();\n                const threshold = Math.round(itemHeight / 2);\n                let { width, height } = this.element.size;\n                if (!state.persistHeight || Math.abs(state.currentSize.height - height) <= threshold) {\n                    height = (_b = (_a = state.persistedSize) === null || _a === void 0 ? void 0 : _a.height) !== null && _b !== void 0 ? _b : defaultSize.height;\n                }\n                if (!state.persistWidth || Math.abs(state.currentSize.width - width) <= threshold) {\n                    width = (_d = (_c = state.persistedSize) === null || _c === void 0 ? void 0 : _c.width) !== null && _d !== void 0 ? _d : defaultSize.width;\n                }\n                this._persistedSize.store(new dom.Dimension(width, height));\n            }\n            // reset working state\n            this._contentWidget.unlockPreference();\n            state = undefined;\n        }));\n        this._messageElement = dom.append(this.element.domNode, dom.$('.message'));\n        this._listElement = dom.append(this.element.domNode, dom.$('.tree'));\n        const details = instantiationService.createInstance(SuggestDetailsWidget, this.editor);\n        details.onDidClose(this.toggleDetails, this, this._disposables);\n        this._details = new SuggestDetailsOverlay(details, this.editor);\n        const applyIconStyle = () => this.element.domNode.classList.toggle('no-icons', !this.editor.getOption(114 /* EditorOption.suggest */).showIcons);\n        applyIconStyle();\n        const renderer = instantiationService.createInstance(ItemRenderer, this.editor);\n        this._disposables.add(renderer);\n        this._disposables.add(renderer.onDidToggleDetails(() => this.toggleDetails()));\n        this._list = new List('SuggestWidget', this._listElement, {\n            getHeight: (_element) => this.getLayoutInfo().itemHeight,\n            getTemplateId: (_element) => 'suggestion'\n        }, [renderer], {\n            alwaysConsumeMouseWheel: true,\n            useShadows: false,\n            mouseSupport: false,\n            multipleSelectionSupport: false,\n            accessibilityProvider: {\n                getRole: () => 'option',\n                getWidgetAriaLabel: () => nls.localize('suggest', \"Suggest\"),\n                getWidgetRole: () => 'listbox',\n                getAriaLabel: (item) => {\n                    let label = item.textLabel;\n                    if (typeof item.completion.label !== 'string') {\n                        const { detail, description } = item.completion.label;\n                        if (detail && description) {\n                            label = nls.localize('label.full', '{0}{1}, {2}', label, detail, description);\n                        }\n                        else if (detail) {\n                            label = nls.localize('label.detail', '{0}{1}', label, detail);\n                        }\n                        else if (description) {\n                            label = nls.localize('label.desc', '{0}, {1}', label, description);\n                        }\n                    }\n                    if (!item.isResolved || !this._isDetailsVisible()) {\n                        return label;\n                    }\n                    const { documentation, detail } = item.completion;\n                    const docs = strings.format('{0}{1}', detail || '', documentation ? (typeof documentation === 'string' ? documentation : documentation.value) : '');\n                    return nls.localize('ariaCurrenttSuggestionReadDetails', \"{0}, docs: {1}\", label, docs);\n                },\n            }\n        });\n        this._list.style(getListStyles({\n            listInactiveFocusBackground: editorSuggestWidgetSelectedBackground,\n            listInactiveFocusOutline: activeContrastBorder\n        }));\n        this._status = instantiationService.createInstance(SuggestWidgetStatus, this.element.domNode, suggestWidgetStatusbarMenu);\n        const applyStatusBarStyle = () => this.element.domNode.classList.toggle('with-status-bar', this.editor.getOption(114 /* EditorOption.suggest */).showStatusBar);\n        applyStatusBarStyle();\n        this._disposables.add(_themeService.onDidColorThemeChange(t => this._onThemeChange(t)));\n        this._onThemeChange(_themeService.getColorTheme());\n        this._disposables.add(this._list.onMouseDown(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onTap(e => this._onListMouseDownOrTap(e)));\n        this._disposables.add(this._list.onDidChangeSelection(e => this._onListSelection(e)));\n        this._disposables.add(this._list.onDidChangeFocus(e => this._onListFocus(e)));\n        this._disposables.add(this.editor.onDidChangeCursorSelection(() => this._onCursorSelectionChanged()));\n        this._disposables.add(this.editor.onDidChangeConfiguration(e => {\n            if (e.hasChanged(114 /* EditorOption.suggest */)) {\n                applyStatusBarStyle();\n                applyIconStyle();\n            }\n        }));\n        this._ctxSuggestWidgetVisible = SuggestContext.Visible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetDetailsVisible = SuggestContext.DetailsVisible.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetMultipleSuggestions = SuggestContext.MultipleSuggestions.bindTo(_contextKeyService);\n        this._ctxSuggestWidgetHasFocusedSuggestion = SuggestContext.HasFocusedSuggestion.bindTo(_contextKeyService);\n        this._disposables.add(dom.addStandardDisposableListener(this._details.widget.domNode, 'keydown', e => {\n            this._onDetailsKeydown.fire(e);\n        }));\n        this._disposables.add(this.editor.onMouseDown((e) => this._onEditorMouseDown(e)));\n    }\n    dispose() {\n        var _a;\n        this._details.widget.dispose();\n        this._details.dispose();\n        this._list.dispose();\n        this._status.dispose();\n        this._disposables.dispose();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._pendingLayout.dispose();\n        this._pendingShowDetails.dispose();\n        this._showTimeout.dispose();\n        this._contentWidget.dispose();\n        this.element.dispose();\n    }\n    _onEditorMouseDown(mouseEvent) {\n        if (this._details.widget.domNode.contains(mouseEvent.target.element)) {\n            // Clicking inside details\n            this._details.widget.domNode.focus();\n        }\n        else {\n            // Clicking outside details and inside suggest\n            if (this.element.domNode.contains(mouseEvent.target.element)) {\n                this.editor.focus();\n            }\n        }\n    }\n    _onCursorSelectionChanged() {\n        if (this._state !== 0 /* State.Hidden */) {\n            this._contentWidget.layout();\n        }\n    }\n    _onListMouseDownOrTap(e) {\n        if (typeof e.element === 'undefined' || typeof e.index === 'undefined') {\n            return;\n        }\n        // prevent stealing browser focus from the editor\n        e.browserEvent.preventDefault();\n        e.browserEvent.stopPropagation();\n        this._select(e.element, e.index);\n    }\n    _onListSelection(e) {\n        if (e.elements.length) {\n            this._select(e.elements[0], e.indexes[0]);\n        }\n    }\n    _select(item, index) {\n        const completionModel = this._completionModel;\n        if (completionModel) {\n            this._onDidSelect.fire({ item, index, model: completionModel });\n            this.editor.focus();\n        }\n    }\n    _onThemeChange(theme) {\n        this._details.widget.borderWidth = isHighContrast(theme.type) ? 2 : 1;\n    }\n    _onListFocus(e) {\n        var _a;\n        if (this._ignoreFocusEvents) {\n            return;\n        }\n        if (!e.elements.length) {\n            if (this._currentSuggestionDetails) {\n                this._currentSuggestionDetails.cancel();\n                this._currentSuggestionDetails = undefined;\n                this._focusedItem = undefined;\n            }\n            this.editor.setAriaOptions({ activeDescendant: undefined });\n            this._ctxSuggestWidgetHasFocusedSuggestion.set(false);\n            return;\n        }\n        if (!this._completionModel) {\n            return;\n        }\n        this._ctxSuggestWidgetHasFocusedSuggestion.set(true);\n        const item = e.elements[0];\n        const index = e.indexes[0];\n        if (item !== this._focusedItem) {\n            (_a = this._currentSuggestionDetails) === null || _a === void 0 ? void 0 : _a.cancel();\n            this._currentSuggestionDetails = undefined;\n            this._focusedItem = item;\n            this._list.reveal(index);\n            this._currentSuggestionDetails = createCancelablePromise((token) => __awaiter(this, void 0, void 0, function* () {\n                const loading = disposableTimeout(() => {\n                    if (this._isDetailsVisible()) {\n                        this.showDetails(true);\n                    }\n                }, 250);\n                const sub = token.onCancellationRequested(() => loading.dispose());\n                const result = yield item.resolve(token);\n                loading.dispose();\n                sub.dispose();\n                return result;\n            }));\n            this._currentSuggestionDetails.then(() => {\n                if (index >= this._list.length || item !== this._list.element(index)) {\n                    return;\n                }\n                // item can have extra information, so re-render\n                this._ignoreFocusEvents = true;\n                this._list.splice(index, 1, [item]);\n                this._list.setFocus([index]);\n                this._ignoreFocusEvents = false;\n                if (this._isDetailsVisible()) {\n                    this.showDetails(false);\n                }\n                else {\n                    this.element.domNode.classList.remove('docs-side');\n                }\n                this.editor.setAriaOptions({ activeDescendant: getAriaId(index) });\n            }).catch(onUnexpectedError);\n        }\n        // emit an event\n        this._onDidFocus.fire({ item, index, model: this._completionModel });\n    }\n    _setState(state) {\n        if (this._state === state) {\n            return;\n        }\n        this._state = state;\n        this.element.domNode.classList.toggle('frozen', state === 4 /* State.Frozen */);\n        this.element.domNode.classList.remove('message');\n        switch (state) {\n            case 0 /* State.Hidden */:\n                dom.hide(this._messageElement, this._listElement, this._status.element);\n                this._details.hide(true);\n                this._status.hide();\n                this._contentWidget.hide();\n                this._ctxSuggestWidgetVisible.reset();\n                this._ctxSuggestWidgetMultipleSuggestions.reset();\n                this._ctxSuggestWidgetHasFocusedSuggestion.reset();\n                this._showTimeout.cancel();\n                this.element.domNode.classList.remove('visible');\n                this._list.splice(0, this._list.length);\n                this._focusedItem = undefined;\n                this._cappedHeight = undefined;\n                this._explainMode = false;\n                break;\n            case 1 /* State.Loading */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.LOADING_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 2 /* State.Empty */:\n                this.element.domNode.classList.add('message');\n                this._messageElement.textContent = SuggestWidget.NO_SUGGESTIONS_MESSAGE;\n                dom.hide(this._listElement, this._status.element);\n                dom.show(this._messageElement);\n                this._details.hide();\n                this._show();\n                this._focusedItem = undefined;\n                break;\n            case 3 /* State.Open */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 4 /* State.Frozen */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._show();\n                break;\n            case 5 /* State.Details */:\n                dom.hide(this._messageElement);\n                dom.show(this._listElement, this._status.element);\n                this._details.show();\n                this._show();\n                break;\n        }\n    }\n    _show() {\n        this._status.show();\n        this._contentWidget.show();\n        this._layout(this._persistedSize.restore());\n        this._ctxSuggestWidgetVisible.set(true);\n        this._showTimeout.cancelAndSet(() => {\n            this.element.domNode.classList.add('visible');\n            this._onDidShow.fire(this);\n        }, 100);\n    }\n    showTriggered(auto, delay) {\n        if (this._state !== 0 /* State.Hidden */) {\n            return;\n        }\n        this._contentWidget.setPosition(this.editor.getPosition());\n        this._isAuto = !!auto;\n        if (!this._isAuto) {\n            this._loadingTimeout = disposableTimeout(() => this._setState(1 /* State.Loading */), delay);\n        }\n    }\n    showSuggestions(completionModel, selectionIndex, isFrozen, isAuto, noFocus) {\n        var _a, _b;\n        this._contentWidget.setPosition(this.editor.getPosition());\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        (_b = this._currentSuggestionDetails) === null || _b === void 0 ? void 0 : _b.cancel();\n        this._currentSuggestionDetails = undefined;\n        if (this._completionModel !== completionModel) {\n            this._completionModel = completionModel;\n        }\n        if (isFrozen && this._state !== 2 /* State.Empty */ && this._state !== 0 /* State.Hidden */) {\n            this._setState(4 /* State.Frozen */);\n            return;\n        }\n        const visibleCount = this._completionModel.items.length;\n        const isEmpty = visibleCount === 0;\n        this._ctxSuggestWidgetMultipleSuggestions.set(visibleCount > 1);\n        if (isEmpty) {\n            this._setState(isAuto ? 0 /* State.Hidden */ : 2 /* State.Empty */);\n            this._completionModel = undefined;\n            return;\n        }\n        this._focusedItem = undefined;\n        // calling list.splice triggers focus event which this widget forwards. That can lead to\n        // suggestions being cancelled and the widget being cleared (and hidden). All this happens\n        // before revealing and focusing is done which means revealing and focusing will fail when\n        // they get run.\n        this._onDidFocus.pause();\n        this._onDidSelect.pause();\n        try {\n            this._list.splice(0, this._list.length, this._completionModel.items);\n            this._setState(isFrozen ? 4 /* State.Frozen */ : 3 /* State.Open */);\n            this._list.reveal(selectionIndex, 0);\n            this._list.setFocus(noFocus ? [] : [selectionIndex]);\n        }\n        finally {\n            this._onDidFocus.resume();\n            this._onDidSelect.resume();\n        }\n        this._pendingLayout.value = dom.runAtThisOrScheduleAtNextAnimationFrame(() => {\n            this._pendingLayout.clear();\n            this._layout(this.element.size);\n            // Reset focus border\n            this._details.widget.domNode.classList.remove('focused');\n        });\n    }\n    focusSelected() {\n        if (this._list.length > 0) {\n            this._list.setFocus([0]);\n        }\n    }\n    selectNextPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageDown();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNextPage();\n                return true;\n        }\n    }\n    selectNext() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusNext(1, true);\n                return true;\n        }\n    }\n    selectLast() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollBottom();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusLast();\n                return true;\n        }\n    }\n    selectPreviousPage() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.pageUp();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPreviousPage();\n                return true;\n        }\n    }\n    selectPrevious() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusPrevious(1, true);\n                return false;\n        }\n    }\n    selectFirst() {\n        switch (this._state) {\n            case 0 /* State.Hidden */:\n                return false;\n            case 5 /* State.Details */:\n                this._details.widget.scrollTop();\n                return true;\n            case 1 /* State.Loading */:\n                return !this._isAuto;\n            default:\n                this._list.focusFirst();\n                return true;\n        }\n    }\n    getFocusedItem() {\n        if (this._state !== 0 /* State.Hidden */\n            && this._state !== 2 /* State.Empty */\n            && this._state !== 1 /* State.Loading */\n            && this._completionModel\n            && this._list.getFocus().length > 0) {\n            return {\n                item: this._list.getFocusedElements()[0],\n                index: this._list.getFocus()[0],\n                model: this._completionModel\n            };\n        }\n        return undefined;\n    }\n    toggleDetailsFocus() {\n        if (this._state === 5 /* State.Details */) {\n            this._setState(3 /* State.Open */);\n            this._details.widget.domNode.classList.remove('focused');\n        }\n        else if (this._state === 3 /* State.Open */ && this._isDetailsVisible()) {\n            this._setState(5 /* State.Details */);\n            this._details.widget.domNode.classList.add('focused');\n        }\n    }\n    toggleDetails() {\n        if (this._isDetailsVisible()) {\n            // hide details widget\n            this._pendingShowDetails.clear();\n            this._ctxSuggestWidgetDetailsVisible.set(false);\n            this._setDetailsVisible(false);\n            this._details.hide();\n            this.element.domNode.classList.remove('shows-details');\n        }\n        else if ((canExpandCompletionItem(this._list.getFocusedElements()[0]) || this._explainMode) && (this._state === 3 /* State.Open */ || this._state === 5 /* State.Details */ || this._state === 4 /* State.Frozen */)) {\n            // show details widget (iff possible)\n            this._ctxSuggestWidgetDetailsVisible.set(true);\n            this._setDetailsVisible(true);\n            this.showDetails(false);\n        }\n    }\n    showDetails(loading) {\n        this._pendingShowDetails.value = dom.runAtThisOrScheduleAtNextAnimationFrame(() => {\n            this._pendingShowDetails.clear();\n            this._details.show();\n            if (loading) {\n                this._details.widget.renderLoading();\n            }\n            else {\n                this._details.widget.renderItem(this._list.getFocusedElements()[0], this._explainMode);\n            }\n            this._positionDetails();\n            this.editor.focus();\n            this.element.domNode.classList.add('shows-details');\n        });\n    }\n    toggleExplainMode() {\n        if (this._list.getFocusedElements()[0]) {\n            this._explainMode = !this._explainMode;\n            if (!this._isDetailsVisible()) {\n                this.toggleDetails();\n            }\n            else {\n                this.showDetails(false);\n            }\n        }\n    }\n    resetPersistedSize() {\n        this._persistedSize.reset();\n    }\n    hideWidget() {\n        var _a;\n        this._pendingLayout.clear();\n        this._pendingShowDetails.clear();\n        (_a = this._loadingTimeout) === null || _a === void 0 ? void 0 : _a.dispose();\n        this._setState(0 /* State.Hidden */);\n        this._onDidHide.fire(this);\n        this.element.clearSashHoverState();\n        // ensure that a reasonable widget height is persisted so that\n        // accidential \"resize-to-single-items\" cases aren't happening\n        const dim = this._persistedSize.restore();\n        const minPersistedHeight = Math.ceil(this.getLayoutInfo().itemHeight * 4.3);\n        if (dim && dim.height < minPersistedHeight) {\n            this._persistedSize.store(dim.with(undefined, minPersistedHeight));\n        }\n    }\n    isFrozen() {\n        return this._state === 4 /* State.Frozen */;\n    }\n    _afterRender(position) {\n        if (position === null) {\n            if (this._isDetailsVisible()) {\n                this._details.hide(); //todo@jrieken soft-hide\n            }\n            return;\n        }\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // no special positioning when widget isn't showing list\n            return;\n        }\n        if (this._isDetailsVisible()) {\n            this._details.show();\n        }\n        this._positionDetails();\n    }\n    _layout(size) {\n        var _a, _b, _c;\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        if (!this.editor.getDomNode()) {\n            // happens when running tests\n            return;\n        }\n        const bodyBox = dom.getClientArea(document.body);\n        const info = this.getLayoutInfo();\n        if (!size) {\n            size = info.defaultSize;\n        }\n        let height = size.height;\n        let width = size.width;\n        // status bar\n        this._status.element.style.height = `${info.itemHeight}px`;\n        if (this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */) {\n            // showing a message only\n            height = info.itemHeight + info.borderHeight;\n            width = info.defaultSize.width / 2;\n            this.element.enableSashes(false, false, false, false);\n            this.element.minSize = this.element.maxSize = new dom.Dimension(width, height);\n            this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n        else {\n            // showing items\n            // width math\n            const maxWidth = bodyBox.width - info.borderHeight - 2 * info.horizontalPadding;\n            if (width > maxWidth) {\n                width = maxWidth;\n            }\n            const preferredWidth = this._completionModel ? this._completionModel.stats.pLabelLen * info.typicalHalfwidthCharacterWidth : width;\n            // height math\n            const fullHeight = info.statusBarHeight + this._list.contentHeight + info.borderHeight;\n            const minHeight = info.itemHeight + info.statusBarHeight;\n            const editorBox = dom.getDomNodePagePosition(this.editor.getDomNode());\n            const cursorBox = this.editor.getScrolledVisiblePosition(this.editor.getPosition());\n            const cursorBottom = editorBox.top + cursorBox.top + cursorBox.height;\n            const maxHeightBelow = Math.min(bodyBox.height - cursorBottom - info.verticalPadding, fullHeight);\n            const availableSpaceAbove = editorBox.top + cursorBox.top - info.verticalPadding;\n            const maxHeightAbove = Math.min(availableSpaceAbove, fullHeight);\n            let maxHeight = Math.min(Math.max(maxHeightAbove, maxHeightBelow) + info.borderHeight, fullHeight);\n            if (height === ((_a = this._cappedHeight) === null || _a === void 0 ? void 0 : _a.capped)) {\n                // Restore the old (wanted) height when the current\n                // height is capped to fit\n                height = this._cappedHeight.wanted;\n            }\n            if (height < minHeight) {\n                height = minHeight;\n            }\n            if (height > maxHeight) {\n                height = maxHeight;\n            }\n            const forceRenderingAboveRequiredSpace = 150;\n            if (height > maxHeightBelow || (this._forceRenderingAbove && availableSpaceAbove > forceRenderingAboveRequiredSpace)) {\n                this._contentWidget.setPreference(1 /* ContentWidgetPositionPreference.ABOVE */);\n                this.element.enableSashes(true, true, false, false);\n                maxHeight = maxHeightAbove;\n            }\n            else {\n                this._contentWidget.setPreference(2 /* ContentWidgetPositionPreference.BELOW */);\n                this.element.enableSashes(false, true, true, false);\n                maxHeight = maxHeightBelow;\n            }\n            this.element.preferredSize = new dom.Dimension(preferredWidth, info.defaultSize.height);\n            this.element.maxSize = new dom.Dimension(maxWidth, maxHeight);\n            this.element.minSize = new dom.Dimension(220, minHeight);\n            // Know when the height was capped to fit and remember\n            // the wanted height for later. This is required when going\n            // left to widen suggestions.\n            this._cappedHeight = height === fullHeight\n                ? { wanted: (_c = (_b = this._cappedHeight) === null || _b === void 0 ? void 0 : _b.wanted) !== null && _c !== void 0 ? _c : size.height, capped: height }\n                : undefined;\n        }\n        this._resize(width, height);\n    }\n    _resize(width, height) {\n        const { width: maxWidth, height: maxHeight } = this.element.maxSize;\n        width = Math.min(maxWidth, width);\n        height = Math.min(maxHeight, height);\n        const { statusBarHeight } = this.getLayoutInfo();\n        this._list.layout(height - statusBarHeight, width);\n        this._listElement.style.height = `${height - statusBarHeight}px`;\n        this.element.layout(height, width);\n        this._contentWidget.layout();\n        this._positionDetails();\n    }\n    _positionDetails() {\n        var _a;\n        if (this._isDetailsVisible()) {\n            this._details.placeAtAnchor(this.element.domNode, ((_a = this._contentWidget.getPosition()) === null || _a === void 0 ? void 0 : _a.preference[0]) === 2 /* ContentWidgetPositionPreference.BELOW */);\n        }\n    }\n    getLayoutInfo() {\n        const fontInfo = this.editor.getOption(48 /* EditorOption.fontInfo */);\n        const itemHeight = clamp(this.editor.getOption(116 /* EditorOption.suggestLineHeight */) || fontInfo.lineHeight, 8, 1000);\n        const statusBarHeight = !this.editor.getOption(114 /* EditorOption.suggest */).showStatusBar || this._state === 2 /* State.Empty */ || this._state === 1 /* State.Loading */ ? 0 : itemHeight;\n        const borderWidth = this._details.widget.borderWidth;\n        const borderHeight = 2 * borderWidth;\n        return {\n            itemHeight,\n            statusBarHeight,\n            borderWidth,\n            borderHeight,\n            typicalHalfwidthCharacterWidth: fontInfo.typicalHalfwidthCharacterWidth,\n            verticalPadding: 22,\n            horizontalPadding: 14,\n            defaultSize: new dom.Dimension(430, statusBarHeight + 12 * itemHeight + borderHeight)\n        };\n    }\n    _isDetailsVisible() {\n        return this._storageService.getBoolean('expandSuggestionDocs', 0 /* StorageScope.PROFILE */, false);\n    }\n    _setDetailsVisible(value) {\n        this._storageService.store('expandSuggestionDocs', value, 0 /* StorageScope.PROFILE */, 0 /* StorageTarget.USER */);\n    }\n    forceRenderingAbove() {\n        if (!this._forceRenderingAbove) {\n            this._forceRenderingAbove = true;\n            this._layout(this._persistedSize.restore());\n        }\n    }\n    stopForceRenderingAbove() {\n        this._forceRenderingAbove = false;\n    }\n};\nSuggestWidget.LOADING_MESSAGE = nls.localize('suggestWidget.loading', \"Loading...\");\nSuggestWidget.NO_SUGGESTIONS_MESSAGE = nls.localize('suggestWidget.noSuggestions', \"No suggestions.\");\nSuggestWidget = __decorate([\n    __param(1, IStorageService),\n    __param(2, IContextKeyService),\n    __param(3, IThemeService),\n    __param(4, IInstantiationService)\n], SuggestWidget);\nexport class SuggestContentWidget {\n    constructor(_widget, _editor) {\n        this._widget = _widget;\n        this._editor = _editor;\n        this.allowEditorOverflow = true;\n        this.suppressMouseDown = false;\n        this._preferenceLocked = false;\n        this._added = false;\n        this._hidden = false;\n    }\n    dispose() {\n        if (this._added) {\n            this._added = false;\n            this._editor.removeContentWidget(this);\n        }\n    }\n    getId() {\n        return 'editor.widget.suggestWidget';\n    }\n    getDomNode() {\n        return this._widget.element.domNode;\n    }\n    show() {\n        this._hidden = false;\n        if (!this._added) {\n            this._added = true;\n            this._editor.addContentWidget(this);\n        }\n    }\n    hide() {\n        if (!this._hidden) {\n            this._hidden = true;\n            this.layout();\n        }\n    }\n    layout() {\n        this._editor.layoutContentWidget(this);\n    }\n    getPosition() {\n        if (this._hidden || !this._position || !this._preference) {\n            return null;\n        }\n        return {\n            position: this._position,\n            preference: [this._preference]\n        };\n    }\n    beforeRender() {\n        const { height, width } = this._widget.element.size;\n        const { borderWidth, horizontalPadding } = this._widget.getLayoutInfo();\n        return new dom.Dimension(width + 2 * borderWidth + horizontalPadding, height + 2 * borderWidth);\n    }\n    afterRender(position) {\n        this._widget._afterRender(position);\n    }\n    setPreference(preference) {\n        if (!this._preferenceLocked) {\n            this._preference = preference;\n        }\n    }\n    lockPreference() {\n        this._preferenceLocked = true;\n    }\n    unlockPreference() {\n        this._preferenceLocked = false;\n    }\n    setPosition(position) {\n        this._position = position;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { alert } from '../../../../base/browser/ui/aria/aria.js';\nimport { isNonEmptyArray } from '../../../../base/common/arrays.js';\nimport { IdleValue } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedError, onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { KeyCodeChord } from '../../../../base/common/keybindings.js';\nimport { DisposableStore, dispose, MutableDisposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport * as platform from '../../../../base/common/platform.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { assertType, isObject } from '../../../../base/common/types.js';\nimport { StableEditorScrollState } from '../../../browser/stableEditorScroll.js';\nimport { EditorAction, EditorCommand, registerEditorAction, registerEditorCommand, registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { EditOperation } from '../../../common/core/editOperation.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { SnippetController2 } from '../../snippet/browser/snippetController2.js';\nimport { SnippetParser } from '../../snippet/browser/snippetParser.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordContextKey } from './wordContextKey.js';\nimport * as nls from '../../../../nls.js';\nimport { CommandsRegistry, ICommandService } from '../../../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ILogService } from '../../../../platform/log/common/log.js';\nimport { Context as SuggestContext, suggestWidgetStatusbarMenu } from './suggest.js';\nimport { SuggestAlternatives } from './suggestAlternatives.js';\nimport { CommitCharacterController } from './suggestCommitCharacters.js';\nimport { SuggestModel } from './suggestModel.js';\nimport { OvertypingCapturer } from './suggestOvertypingCapturer.js';\nimport { SuggestWidget } from './suggestWidget.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nimport { basename, extname } from '../../../../base/common/resources.js';\nimport { hash } from '../../../../base/common/hash.js';\n// sticky suggest widget which doesn't disappear on focus out and such\nconst _sticky = false;\nclass LineSuffix {\n    constructor(_model, _position) {\n        this._model = _model;\n        this._position = _position;\n        // spy on what's happening right of the cursor. two cases:\n        // 1. end of line -> check that it's still end of line\n        // 2. mid of line -> add a marker and compute the delta\n        const maxColumn = _model.getLineMaxColumn(_position.lineNumber);\n        if (maxColumn !== _position.column) {\n            const offset = _model.getOffsetAt(_position);\n            const end = _model.getPositionAt(offset + 1);\n            this._marker = _model.deltaDecorations([], [{\n                    range: Range.fromPositions(_position, end),\n                    options: { description: 'suggest-line-suffix', stickiness: 1 /* TrackedRangeStickiness.NeverGrowsWhenTypingAtEdges */ }\n                }]);\n        }\n    }\n    dispose() {\n        if (this._marker && !this._model.isDisposed()) {\n            this._model.deltaDecorations(this._marker, []);\n        }\n    }\n    delta(position) {\n        if (this._model.isDisposed() || this._position.lineNumber !== position.lineNumber) {\n            // bail out early if things seems fishy\n            return 0;\n        }\n        // read the marker (in case suggest was triggered at line end) or compare\n        // the cursor to the line end.\n        if (this._marker) {\n            const range = this._model.getDecorationRange(this._marker[0]);\n            const end = this._model.getOffsetAt(range.getStartPosition());\n            return end - this._model.getOffsetAt(position);\n        }\n        else {\n            return this._model.getLineMaxColumn(position.lineNumber) - position.column;\n        }\n    }\n}\nexport let SuggestController = class SuggestController {\n    static get(editor) {\n        return editor.getContribution(SuggestController.ID);\n    }\n    constructor(editor, _memoryService, _commandService, _contextKeyService, _instantiationService, _logService, _telemetryService) {\n        this._memoryService = _memoryService;\n        this._commandService = _commandService;\n        this._contextKeyService = _contextKeyService;\n        this._instantiationService = _instantiationService;\n        this._logService = _logService;\n        this._telemetryService = _telemetryService;\n        this._lineSuffix = new MutableDisposable();\n        this._toDispose = new DisposableStore();\n        this._selectors = new PriorityRegistry(s => s.priority);\n        this._telemetryGate = 0;\n        this.editor = editor;\n        this.model = _instantiationService.createInstance(SuggestModel, this.editor);\n        // default selector\n        this._selectors.register({\n            priority: 0,\n            select: (model, pos, items) => this._memoryService.select(model, pos, items)\n        });\n        // context key: update insert/replace mode\n        const ctxInsertMode = SuggestContext.InsertMode.bindTo(_contextKeyService);\n        ctxInsertMode.set(editor.getOption(114 /* EditorOption.suggest */).insertMode);\n        this.model.onDidTrigger(() => ctxInsertMode.set(editor.getOption(114 /* EditorOption.suggest */).insertMode));\n        this.widget = this._toDispose.add(new IdleValue(() => {\n            const widget = this._instantiationService.createInstance(SuggestWidget, this.editor);\n            this._toDispose.add(widget);\n            this._toDispose.add(widget.onDidSelect(item => this._insertSuggestion(item, 0 /* InsertFlags.None */), this));\n            // Wire up logic to accept a suggestion on certain characters\n            const commitCharacterController = new CommitCharacterController(this.editor, widget, this.model, item => this._insertSuggestion(item, 2 /* InsertFlags.NoAfterUndoStop */));\n            this._toDispose.add(commitCharacterController);\n            // Wire up makes text edit context key\n            const ctxMakesTextEdit = SuggestContext.MakesTextEdit.bindTo(this._contextKeyService);\n            const ctxHasInsertAndReplace = SuggestContext.HasInsertAndReplaceRange.bindTo(this._contextKeyService);\n            const ctxCanResolve = SuggestContext.CanResolve.bindTo(this._contextKeyService);\n            this._toDispose.add(toDisposable(() => {\n                ctxMakesTextEdit.reset();\n                ctxHasInsertAndReplace.reset();\n                ctxCanResolve.reset();\n            }));\n            this._toDispose.add(widget.onDidFocus(({ item }) => {\n                // (ctx: makesTextEdit)\n                const position = this.editor.getPosition();\n                const startColumn = item.editStart.column;\n                const endColumn = position.column;\n                let value = true;\n                if (this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */) === 'smart'\n                    && this.model.state === 2 /* State.Auto */\n                    && !item.completion.additionalTextEdits\n                    && !(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\n                    && endColumn - startColumn === item.completion.insertText.length) {\n                    const oldText = this.editor.getModel().getValueInRange({\n                        startLineNumber: position.lineNumber,\n                        startColumn,\n                        endLineNumber: position.lineNumber,\n                        endColumn\n                    });\n                    value = oldText !== item.completion.insertText;\n                }\n                ctxMakesTextEdit.set(value);\n                // (ctx: hasInsertAndReplaceRange)\n                ctxHasInsertAndReplace.set(!Position.equals(item.editInsertEnd, item.editReplaceEnd));\n                // (ctx: canResolve)\n                ctxCanResolve.set(Boolean(item.provider.resolveCompletionItem) || Boolean(item.completion.documentation) || item.completion.detail !== item.completion.label);\n            }));\n            this._toDispose.add(widget.onDetailsKeyDown(e => {\n                // cmd + c on macOS, ctrl + c on Win / Linux\n                if (e.toKeyCodeChord().equals(new KeyCodeChord(true, false, false, false, 33 /* KeyCode.KeyC */)) ||\n                    (platform.isMacintosh && e.toKeyCodeChord().equals(new KeyCodeChord(false, false, false, true, 33 /* KeyCode.KeyC */)))) {\n                    e.stopPropagation();\n                    return;\n                }\n                if (!e.toKeyCodeChord().isModifierKey()) {\n                    this.editor.focus();\n                }\n            }));\n            return widget;\n        }));\n        // Wire up text overtyping capture\n        this._overtypingCapturer = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new OvertypingCapturer(this.editor, this.model));\n        }));\n        this._alternatives = this._toDispose.add(new IdleValue(() => {\n            return this._toDispose.add(new SuggestAlternatives(this.editor, this._contextKeyService));\n        }));\n        this._toDispose.add(_instantiationService.createInstance(WordContextKey, editor));\n        this._toDispose.add(this.model.onDidTrigger(e => {\n            this.widget.value.showTriggered(e.auto, e.shy ? 250 : 50);\n            this._lineSuffix.value = new LineSuffix(this.editor.getModel(), e.position);\n        }));\n        this._toDispose.add(this.model.onDidSuggest(e => {\n            if (e.triggerOptions.shy) {\n                return;\n            }\n            let index = -1;\n            for (const selector of this._selectors.itemsOrderedByPriorityDesc) {\n                index = selector.select(this.editor.getModel(), this.editor.getPosition(), e.completionModel.items);\n                if (index !== -1) {\n                    break;\n                }\n            }\n            if (index === -1) {\n                index = 0;\n            }\n            let noFocus = false;\n            if (e.triggerOptions.auto) {\n                // don't \"focus\" item when configured to do\n                const options = this.editor.getOption(114 /* EditorOption.suggest */);\n                if (options.selectionMode === 'never' || options.selectionMode === 'always') {\n                    // simple: always or never\n                    noFocus = options.selectionMode === 'never';\n                }\n                else if (options.selectionMode === 'whenTriggerCharacter') {\n                    // on with trigger character\n                    noFocus = e.triggerOptions.triggerKind !== 1 /* CompletionTriggerKind.TriggerCharacter */;\n                }\n                else if (options.selectionMode === 'whenQuickSuggestion') {\n                    // without trigger character or when refiltering\n                    noFocus = e.triggerOptions.triggerKind === 1 /* CompletionTriggerKind.TriggerCharacter */ && !e.triggerOptions.refilter;\n                }\n            }\n            this.widget.value.showSuggestions(e.completionModel, index, e.isFrozen, e.triggerOptions.auto, noFocus);\n        }));\n        this._toDispose.add(this.model.onDidCancel(e => {\n            if (!e.retrigger) {\n                this.widget.value.hideWidget();\n            }\n        }));\n        this._toDispose.add(this.editor.onDidBlurEditorWidget(() => {\n            if (!_sticky) {\n                this.model.cancel();\n                this.model.clear();\n            }\n        }));\n        // Manage the acceptSuggestionsOnEnter context key\n        const acceptSuggestionsOnEnter = SuggestContext.AcceptSuggestionsOnEnter.bindTo(_contextKeyService);\n        const updateFromConfig = () => {\n            const acceptSuggestionOnEnter = this.editor.getOption(1 /* EditorOption.acceptSuggestionOnEnter */);\n            acceptSuggestionsOnEnter.set(acceptSuggestionOnEnter === 'on' || acceptSuggestionOnEnter === 'smart');\n        };\n        this._toDispose.add(this.editor.onDidChangeConfiguration(() => updateFromConfig()));\n        updateFromConfig();\n    }\n    dispose() {\n        this._alternatives.dispose();\n        this._toDispose.dispose();\n        this.widget.dispose();\n        this.model.dispose();\n        this._lineSuffix.dispose();\n    }\n    _insertSuggestion(event, flags) {\n        if (!event || !event.item) {\n            this._alternatives.value.reset();\n            this.model.cancel();\n            this.model.clear();\n            return;\n        }\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const snippetController = SnippetController2.get(this.editor);\n        if (!snippetController) {\n            return;\n        }\n        const model = this.editor.getModel();\n        const modelVersionNow = model.getAlternativeVersionId();\n        const { item } = event;\n        //\n        const tasks = [];\n        const cts = new CancellationTokenSource();\n        // pushing undo stops *before* additional text edits and\n        // *after* the main edit\n        if (!(flags & 1 /* InsertFlags.NoBeforeUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        // compute overwrite[Before|After] deltas BEFORE applying extra edits\n        const info = this.getOverwriteInfo(item, Boolean(flags & 8 /* InsertFlags.AlternativeOverwriteConfig */));\n        // keep item in memory\n        this._memoryService.memorize(model, this.editor.getPosition(), item);\n        if (Array.isArray(item.completion.additionalTextEdits)) {\n            // cancel -> stops all listening and closes widget\n            this.model.cancel();\n            // sync additional edits\n            const scrollState = StableEditorScrollState.capture(this.editor);\n            this.editor.executeEdits('suggestController.additionalTextEdits.sync', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n            scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n        }\n        else if (!item.isResolved) {\n            // async additional edits\n            const sw = new StopWatch(true);\n            let position;\n            const docListener = model.onDidChangeContent(e => {\n                if (e.isFlush) {\n                    cts.cancel();\n                    docListener.dispose();\n                    return;\n                }\n                for (const change of e.changes) {\n                    const thisPosition = Range.getEndPosition(change.range);\n                    if (!position || Position.isBefore(thisPosition, position)) {\n                        position = thisPosition;\n                    }\n                }\n            });\n            const oldFlags = flags;\n            flags |= 2 /* InsertFlags.NoAfterUndoStop */;\n            let didType = false;\n            const typeListener = this.editor.onWillType(() => {\n                typeListener.dispose();\n                didType = true;\n                if (!(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n            });\n            tasks.push(item.resolve(cts.token).then(() => {\n                if (!item.completion.additionalTextEdits || cts.token.isCancellationRequested) {\n                    return false;\n                }\n                if (position && item.completion.additionalTextEdits.some(edit => Position.isBefore(position, Range.getStartPosition(edit.range)))) {\n                    return false;\n                }\n                if (didType) {\n                    this.editor.pushUndoStop();\n                }\n                const scrollState = StableEditorScrollState.capture(this.editor);\n                this.editor.executeEdits('suggestController.additionalTextEdits.async', item.completion.additionalTextEdits.map(edit => EditOperation.replaceMove(Range.lift(edit.range), edit.text)));\n                scrollState.restoreRelativeVerticalPositionOfCursor(this.editor);\n                if (didType || !(oldFlags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n                    this.editor.pushUndoStop();\n                }\n                return true;\n            }).then(applied => {\n                this._logService.trace('[suggest] async resolving of edits DONE (ms, applied?)', sw.elapsed(), applied);\n                docListener.dispose();\n                typeListener.dispose();\n            }));\n        }\n        let { insertText } = item.completion;\n        if (!(item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)) {\n            insertText = SnippetParser.escape(insertText);\n        }\n        // cancel -> stops all listening and closes widget\n        this.model.cancel();\n        snippetController.insert(insertText, {\n            overwriteBefore: info.overwriteBefore,\n            overwriteAfter: info.overwriteAfter,\n            undoStopBefore: false,\n            undoStopAfter: false,\n            adjustWhitespace: !(item.completion.insertTextRules & 1 /* CompletionItemInsertTextRule.KeepWhitespace */),\n            clipboardText: event.model.clipboardText,\n            overtypingCapturer: this._overtypingCapturer.value\n        });\n        if (!(flags & 2 /* InsertFlags.NoAfterUndoStop */)) {\n            this.editor.pushUndoStop();\n        }\n        if (item.completion.command) {\n            if (item.completion.command.id === TriggerSuggestAction.id) {\n                // retigger\n                this.model.trigger({ auto: true, retrigger: true });\n            }\n            else {\n                // exec command, done\n                tasks.push(this._commandService.executeCommand(item.completion.command.id, ...(item.completion.command.arguments ? [...item.completion.command.arguments] : [])).catch(e => {\n                    if (item.completion.extensionId) {\n                        onUnexpectedExternalError(e);\n                    }\n                    else {\n                        onUnexpectedError(e);\n                    }\n                }));\n            }\n        }\n        if (flags & 4 /* InsertFlags.KeepAlternativeSuggestions */) {\n            this._alternatives.value.set(event, next => {\n                // cancel resolving of additional edits\n                cts.cancel();\n                // this is not so pretty. when inserting the 'next'\n                // suggestion we undo until we are at the state at\n                // which we were before inserting the previous suggestion...\n                while (model.canUndo()) {\n                    if (modelVersionNow !== model.getAlternativeVersionId()) {\n                        model.undo();\n                    }\n                    this._insertSuggestion(next, 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */ | (flags & 8 /* InsertFlags.AlternativeOverwriteConfig */ ? 8 /* InsertFlags.AlternativeOverwriteConfig */ : 0));\n                    break;\n                }\n            });\n        }\n        this._alertCompletionItem(item);\n        // clear only now - after all tasks are done\n        Promise.all(tasks).finally(() => {\n            this._reportSuggestionAcceptedTelemetry(item, model, event);\n            this.model.clear();\n            cts.dispose();\n        });\n    }\n    _reportSuggestionAcceptedTelemetry(item, model, acceptedSuggestion) {\n        var _a;\n        if (this._telemetryGate++ % 100 !== 0) {\n            return;\n        }\n        // _debugDisplayName looks like `vscode.css-language-features(/-:)`, where the last bit is the trigger chars\n        // normalize it to just the extension ID and lowercase\n        const providerId = item.extensionId ? item.extensionId.value : ((_a = acceptedSuggestion.item.provider._debugDisplayName) !== null && _a !== void 0 ? _a : 'unknown').split('(', 1)[0].toLowerCase();\n        this._telemetryService.publicLog2('suggest.acceptedSuggestion', {\n            providerId,\n            kind: item.completion.kind,\n            basenameHash: hash(basename(model.uri)).toString(16),\n            languageId: model.getLanguageId(),\n            fileExtension: extname(model.uri),\n        });\n    }\n    getOverwriteInfo(item, toggleMode) {\n        assertType(this.editor.hasModel());\n        let replace = this.editor.getOption(114 /* EditorOption.suggest */).insertMode === 'replace';\n        if (toggleMode) {\n            replace = !replace;\n        }\n        const overwriteBefore = item.position.column - item.editStart.column;\n        const overwriteAfter = (replace ? item.editReplaceEnd.column : item.editInsertEnd.column) - item.position.column;\n        const columnDelta = this.editor.getPosition().column - item.position.column;\n        const suffixDelta = this._lineSuffix.value ? this._lineSuffix.value.delta(this.editor.getPosition()) : 0;\n        return {\n            overwriteBefore: overwriteBefore + columnDelta,\n            overwriteAfter: overwriteAfter + suffixDelta\n        };\n    }\n    _alertCompletionItem(item) {\n        if (isNonEmptyArray(item.completion.additionalTextEdits)) {\n            const msg = nls.localize('aria.alert.snippet', \"Accepting '{0}' made {1} additional edits\", item.textLabel, item.completion.additionalTextEdits.length);\n            alert(msg);\n        }\n    }\n    triggerSuggest(onlyFrom, auto, noFilter) {\n        if (this.editor.hasModel()) {\n            this.model.trigger({\n                auto: auto !== null && auto !== void 0 ? auto : false,\n                completionOptions: { providerFilter: onlyFrom, kindFilter: noFilter ? new Set() : undefined }\n            });\n            this.editor.revealPosition(this.editor.getPosition(), 0 /* ScrollType.Smooth */);\n            this.editor.focus();\n        }\n    }\n    triggerSuggestAndAcceptBest(arg) {\n        if (!this.editor.hasModel()) {\n            return;\n        }\n        const positionNow = this.editor.getPosition();\n        const fallback = () => {\n            if (positionNow.equals(this.editor.getPosition())) {\n                this._commandService.executeCommand(arg.fallback);\n            }\n        };\n        const makesTextEdit = (item) => {\n            if (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */ || item.completion.additionalTextEdits) {\n                // snippet, other editor -> makes edit\n                return true;\n            }\n            const position = this.editor.getPosition();\n            const startColumn = item.editStart.column;\n            const endColumn = position.column;\n            if (endColumn - startColumn !== item.completion.insertText.length) {\n                // unequal lengths -> makes edit\n                return true;\n            }\n            const textNow = this.editor.getModel().getValueInRange({\n                startLineNumber: position.lineNumber,\n                startColumn,\n                endLineNumber: position.lineNumber,\n                endColumn\n            });\n            // unequal text -> makes edit\n            return textNow !== item.completion.insertText;\n        };\n        Event.once(this.model.onDidTrigger)(_ => {\n            // wait for trigger because only then the cancel-event is trustworthy\n            const listener = [];\n            Event.any(this.model.onDidTrigger, this.model.onDidCancel)(() => {\n                // retrigger or cancel -> try to type default text\n                dispose(listener);\n                fallback();\n            }, undefined, listener);\n            this.model.onDidSuggest(({ completionModel }) => {\n                dispose(listener);\n                if (completionModel.items.length === 0) {\n                    fallback();\n                    return;\n                }\n                const index = this._memoryService.select(this.editor.getModel(), this.editor.getPosition(), completionModel.items);\n                const item = completionModel.items[index];\n                if (!makesTextEdit(item)) {\n                    fallback();\n                    return;\n                }\n                this.editor.pushUndoStop();\n                this._insertSuggestion({ index, item, model: completionModel }, 4 /* InsertFlags.KeepAlternativeSuggestions */ | 1 /* InsertFlags.NoBeforeUndoStop */ | 2 /* InsertFlags.NoAfterUndoStop */);\n            }, undefined, listener);\n        });\n        this.model.trigger({ auto: false, shy: true });\n        this.editor.revealPosition(positionNow, 0 /* ScrollType.Smooth */);\n        this.editor.focus();\n    }\n    acceptSelectedSuggestion(keepAlternativeSuggestions, alternativeOverwriteConfig) {\n        const item = this.widget.value.getFocusedItem();\n        let flags = 0;\n        if (keepAlternativeSuggestions) {\n            flags |= 4 /* InsertFlags.KeepAlternativeSuggestions */;\n        }\n        if (alternativeOverwriteConfig) {\n            flags |= 8 /* InsertFlags.AlternativeOverwriteConfig */;\n        }\n        this._insertSuggestion(item, flags);\n    }\n    acceptNextSuggestion() {\n        this._alternatives.value.next();\n    }\n    acceptPrevSuggestion() {\n        this._alternatives.value.prev();\n    }\n    cancelSuggestWidget() {\n        this.model.cancel();\n        this.model.clear();\n        this.widget.value.hideWidget();\n    }\n    focusSuggestion() {\n        this.widget.value.focusSelected();\n    }\n    selectNextSuggestion() {\n        this.widget.value.selectNext();\n    }\n    selectNextPageSuggestion() {\n        this.widget.value.selectNextPage();\n    }\n    selectLastSuggestion() {\n        this.widget.value.selectLast();\n    }\n    selectPrevSuggestion() {\n        this.widget.value.selectPrevious();\n    }\n    selectPrevPageSuggestion() {\n        this.widget.value.selectPreviousPage();\n    }\n    selectFirstSuggestion() {\n        this.widget.value.selectFirst();\n    }\n    toggleSuggestionDetails() {\n        this.widget.value.toggleDetails();\n    }\n    toggleExplainMode() {\n        this.widget.value.toggleExplainMode();\n    }\n    toggleSuggestionFocus() {\n        this.widget.value.toggleDetailsFocus();\n    }\n    resetWidgetSize() {\n        this.widget.value.resetPersistedSize();\n    }\n    forceRenderingAbove() {\n        this.widget.value.forceRenderingAbove();\n    }\n    stopForceRenderingAbove() {\n        if (!this.widget.isInitialized) {\n            // This method has no effect if the widget is not initialized yet.\n            return;\n        }\n        this.widget.value.stopForceRenderingAbove();\n    }\n    registerSelector(selector) {\n        return this._selectors.register(selector);\n    }\n};\nSuggestController.ID = 'editor.contrib.suggestController';\nSuggestController = __decorate([\n    __param(1, ISuggestMemoryService),\n    __param(2, ICommandService),\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ILogService),\n    __param(6, ITelemetryService)\n], SuggestController);\nclass PriorityRegistry {\n    constructor(prioritySelector) {\n        this.prioritySelector = prioritySelector;\n        this._items = new Array();\n    }\n    register(value) {\n        if (this._items.indexOf(value) !== -1) {\n            throw new Error('Value is already registered');\n        }\n        this._items.push(value);\n        this._items.sort((s1, s2) => this.prioritySelector(s2) - this.prioritySelector(s1));\n        return {\n            dispose: () => {\n                const idx = this._items.indexOf(value);\n                if (idx >= 0) {\n                    this._items.splice(idx, 1);\n                }\n            }\n        };\n    }\n    get itemsOrderedByPriorityDesc() {\n        return this._items;\n    }\n}\nexport class TriggerSuggestAction extends EditorAction {\n    constructor() {\n        super({\n            id: TriggerSuggestAction.id,\n            label: nls.localize('suggest.trigger.label', \"Trigger Suggest\"),\n            alias: 'Trigger Suggest',\n            precondition: ContextKeyExpr.and(EditorContextKeys.writable, EditorContextKeys.hasCompletionItemProvider, SuggestContext.Visible.toNegated()),\n            kbOpts: {\n                kbExpr: EditorContextKeys.textInputFocus,\n                primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n                secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n                mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */, 2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] },\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            }\n        });\n    }\n    run(_accessor, editor, args) {\n        const controller = SuggestController.get(editor);\n        if (!controller) {\n            return;\n        }\n        let auto;\n        if (args && typeof args === 'object') {\n            if (args.auto === true) {\n                auto = true;\n            }\n        }\n        controller.triggerSuggest(undefined, auto, undefined);\n    }\n}\nTriggerSuggestAction.id = 'editor.action.triggerSuggest';\nregisterEditorContribution(SuggestController.ID, SuggestController, 2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\nregisterEditorAction(TriggerSuggestAction);\nconst weight = 100 /* KeybindingWeight.EditorContrib */ + 90;\nconst SuggestCommand = EditorCommand.bindToContribution(SuggestController.get);\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n    handler(x) {\n        x.acceptSelectedSuggestion(true, false);\n    },\n    kbOpts: [{\n            // normal tab\n            primary: 2 /* KeyCode.Tab */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus),\n            weight,\n        }, {\n            // accept on enter has special rules\n            primary: 3 /* KeyCode.Enter */,\n            kbExpr: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.AcceptSuggestionsOnEnter, SuggestContext.MakesTextEdit),\n            weight,\n        }],\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: SuggestContext.HasInsertAndReplaceRange.toNegated()\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.insert', \"Insert\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert'))\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            title: nls.localize('accept.replace', \"Replace\"),\n            group: 'left',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace'))\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'acceptAlternativeSelectedSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, EditorContextKeys.textInputFocus, SuggestContext.HasFocusedSuggestion),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 3 /* KeyCode.Enter */,\n        secondary: [1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */],\n    },\n    handler(x) {\n        x.acceptSelectedSuggestion(false, true);\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('insert')),\n            title: nls.localize('accept.replace', \"Replace\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'left',\n            order: 2,\n            when: ContextKeyExpr.and(SuggestContext.HasInsertAndReplaceRange, SuggestContext.InsertMode.isEqualTo('replace')),\n            title: nls.localize('accept.insert', \"Insert\")\n        }]\n}));\n// continue to support the old command\nCommandsRegistry.registerCommandAlias('acceptSelectedSuggestionOnEnter', 'acceptSelectedSuggestion');\nregisterEditorCommand(new SuggestCommand({\n    id: 'hideSuggestWidget',\n    precondition: SuggestContext.Visible,\n    handler: x => x.cancelSuggestWidget(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 9 /* KeyCode.Escape */,\n        secondary: [1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 18 /* KeyCode.DownArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */],\n        mac: { primary: 18 /* KeyCode.DownArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */, 256 /* KeyMod.WinCtrl */ | 44 /* KeyCode.KeyN */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectNextPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectNextPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 12 /* KeyCode.PageDown */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 12 /* KeyCode.PageDown */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectLastSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectLastSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 16 /* KeyCode.UpArrow */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */],\n        mac: { primary: 16 /* KeyCode.UpArrow */, secondary: [2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */, 256 /* KeyMod.WinCtrl */ | 46 /* KeyCode.KeyP */] }\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectPrevPageSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectPrevPageSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 11 /* KeyCode.PageUp */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 11 /* KeyCode.PageUp */]\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'selectFirstSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, ContextKeyExpr.or(SuggestContext.MultipleSuggestions, SuggestContext.HasFocusedSuggestion.negate())),\n    handler: c => c.selectFirstSuggestion()\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'focusSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion.negate()),\n    handler: x => x.focusSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\n    },\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'focusAndAcceptSuggestion',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion.negate()),\n    handler: c => {\n        c.focusSuggestion();\n        c.acceptSelectedSuggestion(true, false);\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionDetails',\n    precondition: ContextKeyExpr.and(SuggestContext.Visible, SuggestContext.HasFocusedSuggestion),\n    handler: x => x.toggleSuggestionDetails(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 10 /* KeyCode.Space */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */],\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 10 /* KeyCode.Space */, secondary: [2048 /* KeyMod.CtrlCmd */ | 39 /* KeyCode.KeyI */] }\n    },\n    menuOpts: [{\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible, SuggestContext.CanResolve),\n            title: nls.localize('detail.more', \"show less\")\n        }, {\n            menuId: suggestWidgetStatusbarMenu,\n            group: 'right',\n            order: 1,\n            when: ContextKeyExpr.and(SuggestContext.DetailsVisible.toNegated(), SuggestContext.CanResolve),\n            title: nls.localize('detail.less', \"show more\")\n        }]\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleExplainMode',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleExplainMode(),\n    kbOpts: {\n        weight: 100 /* KeybindingWeight.EditorContrib */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 90 /* KeyCode.Slash */,\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'toggleSuggestionFocus',\n    precondition: SuggestContext.Visible,\n    handler: x => x.toggleSuggestionFocus(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */,\n        mac: { primary: 256 /* KeyMod.WinCtrl */ | 512 /* KeyMod.Alt */ | 10 /* KeyCode.Space */ }\n    }\n}));\n//#region tab completions\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertBestCompletion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), WordContextKey.AtEnd, SuggestContext.Visible.toNegated(), SuggestAlternatives.OtherSuggestions.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: (x, arg) => {\n        x.triggerSuggestAndAcceptBest(isObject(arg) ? Object.assign({ fallback: 'tab' }, arg) : { fallback: 'tab' });\n    },\n    kbOpts: {\n        weight,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertNextSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptNextSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorCommand(new SuggestCommand({\n    id: 'insertPrevSuggestion',\n    precondition: ContextKeyExpr.and(EditorContextKeys.textInputFocus, ContextKeyExpr.equals('config.editor.tabCompletion', 'on'), SuggestAlternatives.OtherSuggestions, SuggestContext.Visible.toNegated(), SnippetController2.InSnippetMode.toNegated()),\n    handler: x => x.acceptPrevSuggestion(),\n    kbOpts: {\n        weight: weight,\n        kbExpr: EditorContextKeys.textInputFocus,\n        primary: 1024 /* KeyMod.Shift */ | 2 /* KeyCode.Tab */\n    }\n}));\nregisterEditorAction(class extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.resetSuggestSize',\n            label: nls.localize('suggest.reset.label', \"Reset Suggest Widget Size\"),\n            alias: 'Reset Suggest Widget Size',\n            precondition: undefined\n        });\n    }\n    run(_accessor, editor) {\n        var _a;\n        (_a = SuggestController.get(editor)) === null || _a === void 0 ? void 0 : _a.resetWidgetSize();\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { CancellationToken } from '../../../../base/common/cancellation.js';\nimport { FuzzyScore } from '../../../../base/common/filters.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { RefCountedDisposable } from '../../../../base/common/lifecycle.js';\nimport { registerEditorContribution } from '../../../browser/editorExtensions.js';\nimport { ICodeEditorService } from '../../../browser/services/codeEditorService.js';\nimport { Range } from '../../../common/core/range.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { CompletionModel, LineContext } from './completionModel.js';\nimport { CompletionOptions, provideSuggestionItems, QuickSuggestionsOptions } from './suggest.js';\nimport { ISuggestMemoryService } from './suggestMemory.js';\nimport { WordDistance } from './wordDistance.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nclass SuggestInlineCompletion {\n    constructor(range, insertText, filterText, additionalTextEdits, command, completion) {\n        this.range = range;\n        this.insertText = insertText;\n        this.filterText = filterText;\n        this.additionalTextEdits = additionalTextEdits;\n        this.command = command;\n        this.completion = completion;\n    }\n}\nlet InlineCompletionResults = class InlineCompletionResults extends RefCountedDisposable {\n    constructor(model, line, word, completionModel, completions, _suggestMemoryService) {\n        super(completions.disposable);\n        this.model = model;\n        this.line = line;\n        this.word = word;\n        this.completionModel = completionModel;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    canBeReused(model, line, word) {\n        return this.model === model // same model\n            && this.line === line\n            && this.word.word.length > 0\n            && this.word.startColumn === word.startColumn && this.word.endColumn < word.endColumn // same word\n            && this.completionModel.getIncompleteProvider().size === 0; // no incomplete results\n    }\n    get items() {\n        var _a;\n        const result = [];\n        // Split items by preselected index. This ensures the memory-selected item shows first and that better/worst\n        // ranked items are before/after\n        const { items } = this.completionModel;\n        const selectedIndex = this._suggestMemoryService.select(this.model, { lineNumber: this.line, column: this.word.endColumn + this.completionModel.lineContext.characterCountDelta }, items);\n        const first = Iterable.slice(items, selectedIndex);\n        const second = Iterable.slice(items, 0, selectedIndex);\n        let resolveCount = 5;\n        for (const item of Iterable.concat(first, second)) {\n            if (item.score === FuzzyScore.Default) {\n                // skip items that have no overlap\n                continue;\n            }\n            const range = new Range(item.editStart.lineNumber, item.editStart.column, item.editInsertEnd.lineNumber, item.editInsertEnd.column + this.completionModel.lineContext.characterCountDelta // end PLUS character delta\n            );\n            const insertText = item.completion.insertTextRules && (item.completion.insertTextRules & 4 /* CompletionItemInsertTextRule.InsertAsSnippet */)\n                ? { snippet: item.completion.insertText }\n                : item.completion.insertText;\n            result.push(new SuggestInlineCompletion(range, insertText, (_a = item.filterTextLow) !== null && _a !== void 0 ? _a : item.labelLow, item.completion.additionalTextEdits, item.completion.command, item));\n            // resolve the first N suggestions eagerly\n            if (resolveCount-- >= 0) {\n                item.resolve(CancellationToken.None);\n            }\n        }\n        return result;\n    }\n};\nInlineCompletionResults = __decorate([\n    __param(5, ISuggestMemoryService)\n], InlineCompletionResults);\nexport let SuggestInlineCompletions = class SuggestInlineCompletions {\n    constructor(_getEditorOption, _languageFeatureService, _clipboardService, _suggestMemoryService) {\n        this._getEditorOption = _getEditorOption;\n        this._languageFeatureService = _languageFeatureService;\n        this._clipboardService = _clipboardService;\n        this._suggestMemoryService = _suggestMemoryService;\n    }\n    provideInlineCompletions(model, position, context, token) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (context.selectedSuggestionInfo) {\n                return;\n            }\n            const config = this._getEditorOption(86 /* EditorOption.quickSuggestions */, model);\n            if (QuickSuggestionsOptions.isAllOff(config)) {\n                // quick suggest is off (for this model/language)\n                return;\n            }\n            model.tokenization.tokenizeIfCheap(position.lineNumber);\n            const lineTokens = model.tokenization.getLineTokens(position.lineNumber);\n            const tokenType = lineTokens.getStandardTokenType(lineTokens.findTokenIndexAtOffset(Math.max(position.column - 1 - 1, 0)));\n            if (QuickSuggestionsOptions.valueFor(config, tokenType) !== 'inline') {\n                // quick suggest is off (for this token)\n                return undefined;\n            }\n            // We consider non-empty leading words and trigger characters. The latter only\n            // when no word is being typed (word characters superseed trigger characters)\n            let wordInfo = model.getWordAtPosition(position);\n            let triggerCharacterInfo;\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word)) {\n                triggerCharacterInfo = this._getTriggerCharacterInfo(model, position);\n            }\n            if (!(wordInfo === null || wordInfo === void 0 ? void 0 : wordInfo.word) && !triggerCharacterInfo) {\n                // not at word, not a trigger character\n                return;\n            }\n            // ensure that we have word information and that we are at the end of a word\n            // otherwise we stop because we don't want to do quick suggestions inside words\n            if (!wordInfo) {\n                wordInfo = model.getWordUntilPosition(position);\n            }\n            if (wordInfo.endColumn !== position.column) {\n                return;\n            }\n            let result;\n            const leadingLineContents = model.getValueInRange(new Range(position.lineNumber, 1, position.lineNumber, position.column));\n            if (!triggerCharacterInfo && ((_a = this._lastResult) === null || _a === void 0 ? void 0 : _a.canBeReused(model, position.lineNumber, wordInfo))) {\n                // reuse a previous result iff possible, only a refilter is needed\n                // TODO@jrieken this can be improved further and only incomplete results can be updated\n                // console.log(`REUSE with ${wordInfo.word}`);\n                const newLineContext = new LineContext(leadingLineContents, position.column - this._lastResult.word.endColumn);\n                this._lastResult.completionModel.lineContext = newLineContext;\n                this._lastResult.acquire();\n                result = this._lastResult;\n            }\n            else {\n                // refesh model is required\n                const completions = yield provideSuggestionItems(this._languageFeatureService.completionProvider, model, position, new CompletionOptions(undefined, undefined, triggerCharacterInfo === null || triggerCharacterInfo === void 0 ? void 0 : triggerCharacterInfo.providers), triggerCharacterInfo && { triggerKind: 1 /* CompletionTriggerKind.TriggerCharacter */, triggerCharacter: triggerCharacterInfo.ch }, token);\n                let clipboardText;\n                if (completions.needsClipboard) {\n                    clipboardText = yield this._clipboardService.readText();\n                }\n                const completionModel = new CompletionModel(completions.items, position.column, new LineContext(leadingLineContents, 0), WordDistance.None, this._getEditorOption(114 /* EditorOption.suggest */, model), this._getEditorOption(108 /* EditorOption.snippetSuggestions */, model), { boostFullMatch: false, firstMatchCanBeWeak: false }, clipboardText);\n                result = new InlineCompletionResults(model, position.lineNumber, wordInfo, completionModel, completions, this._suggestMemoryService);\n            }\n            this._lastResult = result;\n            return result;\n        });\n    }\n    handleItemDidShow(_completions, item) {\n        item.completion.resolve(CancellationToken.None);\n    }\n    freeInlineCompletions(result) {\n        result.release();\n    }\n    _getTriggerCharacterInfo(model, position) {\n        var _a;\n        const ch = model.getValueInRange(Range.fromPositions({ lineNumber: position.lineNumber, column: position.column - 1 }, position));\n        const providers = new Set();\n        for (const provider of this._languageFeatureService.completionProvider.all(model)) {\n            if ((_a = provider.triggerCharacters) === null || _a === void 0 ? void 0 : _a.includes(ch)) {\n                providers.add(provider);\n            }\n        }\n        if (providers.size === 0) {\n            return undefined;\n        }\n        return { providers, ch };\n    }\n};\nSuggestInlineCompletions = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, IClipboardService),\n    __param(3, ISuggestMemoryService)\n], SuggestInlineCompletions);\nlet EditorContribution = class EditorContribution {\n    constructor(_editor, languageFeatureService, editorService, instaService) {\n        // HACK - way to contribute something only once\n        if (++EditorContribution._counter === 1) {\n            const provider = instaService.createInstance(SuggestInlineCompletions, (id, model) => {\n                var _a;\n                // HACK - reuse the editor options world outside from a \"normal\" contribution\n                const editor = (_a = editorService.listCodeEditors().find(editor => editor.getModel() === model)) !== null && _a !== void 0 ? _a : _editor;\n                return editor.getOption(id);\n            });\n            EditorContribution._disposable = languageFeatureService.inlineCompletionsProvider.register('*', provider);\n        }\n    }\n    dispose() {\n        var _a;\n        if (--EditorContribution._counter === 0) {\n            (_a = EditorContribution._disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n            EditorContribution._disposable = undefined;\n        }\n    }\n};\nEditorContribution._counter = 0;\nEditorContribution = __decorate([\n    __param(1, ILanguageFeaturesService),\n    __param(2, ICodeEditorService),\n    __param(3, IInstantiationService)\n], EditorContribution);\nregisterEditorContribution('suggest.inlineCompletionsProvider', EditorContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because the contribution is used as a way to ONCE access a service to which a provider is registered\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { DisposableStore } from '../../../../base/common/lifecycle.js';\nimport { LRUCache } from '../../../../base/common/map.js';\nimport { TernarySearchTree } from '../../../../base/common/ternarySearchTree.js';\nimport { CompletionItemKinds } from '../../../common/languages.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IStorageService, WillSaveStateReason } from '../../../../platform/storage/common/storage.js';\nexport class Memory {\n    constructor(name) {\n        this.name = name;\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const topScore = items[0].score[0];\n        for (let i = 0; i < items.length; i++) {\n            const { score, completion: suggestion } = items[i];\n            if (score[0] !== topScore) {\n                // stop when leaving the group of top matches\n                break;\n            }\n            if (suggestion.preselect) {\n                // stop when seeing an auto-select-item\n                return i;\n            }\n        }\n        return 0;\n    }\n}\nexport class NoMemory extends Memory {\n    constructor() {\n        super('first');\n    }\n    memorize(model, pos, item) {\n        // no-op\n    }\n    toJSON() {\n        return undefined;\n    }\n    fromJSON() {\n        //\n    }\n}\nexport class LRUMemory extends Memory {\n    constructor() {\n        super('recentlyUsed');\n        this._cache = new LRUCache(300, 0.66);\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const key = `${model.getLanguageId()}/${item.textLabel}`;\n        this._cache.set(key, {\n            touch: this._seq++,\n            type: item.completion.kind,\n            insertText: item.completion.insertText\n        });\n    }\n    select(model, pos, items) {\n        if (items.length === 0) {\n            return 0;\n        }\n        const lineSuffix = model.getLineContent(pos.lineNumber).substr(pos.column - 10, pos.column - 1);\n        if (/\\s$/.test(lineSuffix)) {\n            return super.select(model, pos, items);\n        }\n        const topScore = items[0].score[0];\n        let indexPreselect = -1;\n        let indexRecency = -1;\n        let seq = -1;\n        for (let i = 0; i < items.length; i++) {\n            if (items[i].score[0] !== topScore) {\n                // consider only top items\n                break;\n            }\n            const key = `${model.getLanguageId()}/${items[i].textLabel}`;\n            const item = this._cache.peek(key);\n            if (item && item.touch > seq && item.type === items[i].completion.kind && item.insertText === items[i].completion.insertText) {\n                seq = item.touch;\n                indexRecency = i;\n            }\n            if (items[i].completion.preselect && indexPreselect === -1) {\n                // stop when seeing an auto-select-item\n                return indexPreselect = i;\n            }\n        }\n        if (indexRecency !== -1) {\n            return indexRecency;\n        }\n        else if (indexPreselect !== -1) {\n            return indexPreselect;\n        }\n        else {\n            return 0;\n        }\n    }\n    toJSON() {\n        return this._cache.toJSON();\n    }\n    fromJSON(data) {\n        this._cache.clear();\n        const seq = 0;\n        for (const [key, value] of data) {\n            value.touch = seq;\n            value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n            this._cache.set(key, value);\n        }\n        this._seq = this._cache.size;\n    }\n}\nexport class PrefixMemory extends Memory {\n    constructor() {\n        super('recentlyUsedByPrefix');\n        this._trie = TernarySearchTree.forStrings();\n        this._seq = 0;\n    }\n    memorize(model, pos, item) {\n        const { word } = model.getWordUntilPosition(pos);\n        const key = `${model.getLanguageId()}/${word}`;\n        this._trie.set(key, {\n            type: item.completion.kind,\n            insertText: item.completion.insertText,\n            touch: this._seq++\n        });\n    }\n    select(model, pos, items) {\n        const { word } = model.getWordUntilPosition(pos);\n        if (!word) {\n            return super.select(model, pos, items);\n        }\n        const key = `${model.getLanguageId()}/${word}`;\n        let item = this._trie.get(key);\n        if (!item) {\n            item = this._trie.findSubstr(key);\n        }\n        if (item) {\n            for (let i = 0; i < items.length; i++) {\n                const { kind, insertText } = items[i].completion;\n                if (kind === item.type && insertText === item.insertText) {\n                    return i;\n                }\n            }\n        }\n        return super.select(model, pos, items);\n    }\n    toJSON() {\n        const entries = [];\n        this._trie.forEach((value, key) => entries.push([key, value]));\n        // sort by last recently used (touch), then\n        // take the top 200 item and normalize their\n        // touch\n        entries\n            .sort((a, b) => -(a[1].touch - b[1].touch))\n            .forEach((value, i) => value[1].touch = i);\n        return entries.slice(0, 200);\n    }\n    fromJSON(data) {\n        this._trie.clear();\n        if (data.length > 0) {\n            this._seq = data[0][1].touch + 1;\n            for (const [key, value] of data) {\n                value.type = typeof value.type === 'number' ? value.type : CompletionItemKinds.fromString(value.type);\n                this._trie.set(key, value);\n            }\n        }\n    }\n}\nexport let SuggestMemoryService = class SuggestMemoryService {\n    constructor(_storageService, _configService) {\n        this._storageService = _storageService;\n        this._configService = _configService;\n        this._disposables = new DisposableStore();\n        this._persistSoon = new RunOnceScheduler(() => this._saveState(), 500);\n        this._disposables.add(_storageService.onWillSaveState(e => {\n            if (e.reason === WillSaveStateReason.SHUTDOWN) {\n                this._saveState();\n            }\n        }));\n    }\n    dispose() {\n        this._disposables.dispose();\n        this._persistSoon.dispose();\n    }\n    memorize(model, pos, item) {\n        this._withStrategy(model, pos).memorize(model, pos, item);\n        this._persistSoon.schedule();\n    }\n    select(model, pos, items) {\n        return this._withStrategy(model, pos).select(model, pos, items);\n    }\n    _withStrategy(model, pos) {\n        var _a;\n        const mode = this._configService.getValue('editor.suggestSelection', {\n            overrideIdentifier: model.getLanguageIdAtPosition(pos.lineNumber, pos.column),\n            resource: model.uri\n        });\n        if (((_a = this._strategy) === null || _a === void 0 ? void 0 : _a.name) !== mode) {\n            this._saveState();\n            const ctor = SuggestMemoryService._strategyCtors.get(mode) || NoMemory;\n            this._strategy = new ctor();\n            try {\n                const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n                const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n                const raw = this._storageService.get(`${SuggestMemoryService._storagePrefix}/${mode}`, scope);\n                if (raw) {\n                    this._strategy.fromJSON(JSON.parse(raw));\n                }\n            }\n            catch (e) {\n                // things can go wrong with JSON...\n            }\n        }\n        return this._strategy;\n    }\n    _saveState() {\n        if (this._strategy) {\n            const share = this._configService.getValue('editor.suggest.shareSuggestSelections');\n            const scope = share ? 0 /* StorageScope.PROFILE */ : 1 /* StorageScope.WORKSPACE */;\n            const raw = JSON.stringify(this._strategy);\n            this._storageService.store(`${SuggestMemoryService._storagePrefix}/${this._strategy.name}`, raw, scope, 1 /* StorageTarget.MACHINE */);\n        }\n    }\n};\nSuggestMemoryService._strategyCtors = new Map([\n    ['recentlyUsedByPrefix', PrefixMemory],\n    ['recentlyUsed', LRUMemory],\n    ['first', NoMemory]\n]);\nSuggestMemoryService._storagePrefix = 'suggest/memories';\nSuggestMemoryService = __decorate([\n    __param(0, IStorageService),\n    __param(1, IConfigurationService)\n], SuggestMemoryService);\nexport const ISuggestMemoryService = createDecorator('ISuggestMemories');\nregisterSingleton(ISuggestMemoryService, SuggestMemoryService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { binarySearch, isFalsyOrEmpty } from '../../../../base/common/arrays.js';\nimport { Range } from '../../../common/core/range.js';\nimport { BracketSelectionRangeProvider } from '../../smartSelect/browser/bracketSelections.js';\nexport class WordDistance {\n    static create(service, editor) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!editor.getOption(114 /* EditorOption.suggest */).localityBonus) {\n                return WordDistance.None;\n            }\n            if (!editor.hasModel()) {\n                return WordDistance.None;\n            }\n            const model = editor.getModel();\n            const position = editor.getPosition();\n            if (!service.canComputeWordRanges(model.uri)) {\n                return WordDistance.None;\n            }\n            const [ranges] = yield new BracketSelectionRangeProvider().provideSelectionRanges(model, [position]);\n            if (ranges.length === 0) {\n                return WordDistance.None;\n            }\n            const wordRanges = yield service.computeWordRanges(model.uri, ranges[0].range);\n            if (!wordRanges) {\n                return WordDistance.None;\n            }\n            // remove current word\n            const wordUntilPos = model.getWordUntilPosition(position);\n            delete wordRanges[wordUntilPos.word];\n            return new class extends WordDistance {\n                distance(anchor, item) {\n                    if (!position.equals(editor.getPosition())) {\n                        return 0;\n                    }\n                    if (item.kind === 17 /* CompletionItemKind.Keyword */) {\n                        return 2 << 20;\n                    }\n                    const word = typeof item.label === 'string' ? item.label : item.label.label;\n                    const wordLines = wordRanges[word];\n                    if (isFalsyOrEmpty(wordLines)) {\n                        return 2 << 20;\n                    }\n                    const idx = binarySearch(wordLines, Range.fromPositions(anchor), Range.compareRangesUsingStarts);\n                    const bestWordRange = idx >= 0 ? wordLines[idx] : wordLines[Math.max(0, ~idx - 1)];\n                    let blockDistance = ranges.length;\n                    for (const range of ranges) {\n                        if (!Range.containsRange(range.range, bestWordRange)) {\n                            break;\n                        }\n                        blockDistance -= 1;\n                    }\n                    return blockDistance;\n                }\n            };\n        });\n    }\n}\nWordDistance.None = new class extends WordDistance {\n    distance() { return 0; }\n};\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport './symbolIcons.css';\nimport { localize } from '../../../../nls.js';\nimport { foreground, registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nexport const SYMBOL_ICON_ARRAY_FOREGROUND = registerColor('symbolIcon.arrayForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.arrayForeground', 'The foreground color for array symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_BOOLEAN_FOREGROUND = registerColor('symbolIcon.booleanForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.booleanForeground', 'The foreground color for boolean symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CLASS_FOREGROUND = registerColor('symbolIcon.classForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.classForeground', 'The foreground color for class symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_COLOR_FOREGROUND = registerColor('symbolIcon.colorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.colorForeground', 'The foreground color for color symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTANT_FOREGROUND = registerColor('symbolIcon.constantForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.constantForeground', 'The foreground color for constant symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_CONSTRUCTOR_FOREGROUND = registerColor('symbolIcon.constructorForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.constructorForeground', 'The foreground color for constructor symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_FOREGROUND = registerColor('symbolIcon.enumeratorForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.enumeratorForeground', 'The foreground color for enumerator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_ENUMERATOR_MEMBER_FOREGROUND = registerColor('symbolIcon.enumeratorMemberForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.enumeratorMemberForeground', 'The foreground color for enumerator member symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_EVENT_FOREGROUND = registerColor('symbolIcon.eventForeground', {\n    dark: '#EE9D28',\n    light: '#D67E00',\n    hcDark: '#EE9D28',\n    hcLight: '#D67E00'\n}, localize('symbolIcon.eventForeground', 'The foreground color for event symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FIELD_FOREGROUND = registerColor('symbolIcon.fieldForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.fieldForeground', 'The foreground color for field symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FILE_FOREGROUND = registerColor('symbolIcon.fileForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.fileForeground', 'The foreground color for file symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FOLDER_FOREGROUND = registerColor('symbolIcon.folderForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.folderForeground', 'The foreground color for folder symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_FUNCTION_FOREGROUND = registerColor('symbolIcon.functionForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.functionForeground', 'The foreground color for function symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_INTERFACE_FOREGROUND = registerColor('symbolIcon.interfaceForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC'\n}, localize('symbolIcon.interfaceForeground', 'The foreground color for interface symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEY_FOREGROUND = registerColor('symbolIcon.keyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keyForeground', 'The foreground color for key symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_KEYWORD_FOREGROUND = registerColor('symbolIcon.keywordForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.keywordForeground', 'The foreground color for keyword symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_METHOD_FOREGROUND = registerColor('symbolIcon.methodForeground', {\n    dark: '#B180D7',\n    light: '#652D90',\n    hcDark: '#B180D7',\n    hcLight: '#652D90'\n}, localize('symbolIcon.methodForeground', 'The foreground color for method symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_MODULE_FOREGROUND = registerColor('symbolIcon.moduleForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.moduleForeground', 'The foreground color for module symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NAMESPACE_FOREGROUND = registerColor('symbolIcon.namespaceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.namespaceForeground', 'The foreground color for namespace symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NULL_FOREGROUND = registerColor('symbolIcon.nullForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.nullForeground', 'The foreground color for null symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_NUMBER_FOREGROUND = registerColor('symbolIcon.numberForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.numberForeground', 'The foreground color for number symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OBJECT_FOREGROUND = registerColor('symbolIcon.objectForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.objectForeground', 'The foreground color for object symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_OPERATOR_FOREGROUND = registerColor('symbolIcon.operatorForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.operatorForeground', 'The foreground color for operator symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PACKAGE_FOREGROUND = registerColor('symbolIcon.packageForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.packageForeground', 'The foreground color for package symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_PROPERTY_FOREGROUND = registerColor('symbolIcon.propertyForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.propertyForeground', 'The foreground color for property symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_REFERENCE_FOREGROUND = registerColor('symbolIcon.referenceForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.referenceForeground', 'The foreground color for reference symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_SNIPPET_FOREGROUND = registerColor('symbolIcon.snippetForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.snippetForeground', 'The foreground color for snippet symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRING_FOREGROUND = registerColor('symbolIcon.stringForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.stringForeground', 'The foreground color for string symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_STRUCT_FOREGROUND = registerColor('symbolIcon.structForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground,\n}, localize('symbolIcon.structForeground', 'The foreground color for struct symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TEXT_FOREGROUND = registerColor('symbolIcon.textForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.textForeground', 'The foreground color for text symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_TYPEPARAMETER_FOREGROUND = registerColor('symbolIcon.typeParameterForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.typeParameterForeground', 'The foreground color for type parameter symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_UNIT_FOREGROUND = registerColor('symbolIcon.unitForeground', {\n    dark: foreground,\n    light: foreground,\n    hcDark: foreground,\n    hcLight: foreground\n}, localize('symbolIcon.unitForeground', 'The foreground color for unit symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\nexport const SYMBOL_ICON_VARIABLE_FOREGROUND = registerColor('symbolIcon.variableForeground', {\n    dark: '#75BEFF',\n    light: '#007ACC',\n    hcDark: '#75BEFF',\n    hcLight: '#007ACC',\n}, localize('symbolIcon.variableForeground', 'The foreground color for variable symbols. These symbols appear in the outline, breadcrumb, and suggest widget.'));\n"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","BracketSelectionRangeProvider","_classCallCheck","_createClass","key","model","positions","this","_regeneratorRuntime","mark","_callee","_iterator","_step","_loop","wrap","_context2","prev","_createForOfIteratorHelper","position","bucket","ranges","_context","push","Map","_bracketsRightYield","_bracketsLeftYield","stop","s","n","delegateYield","t1","f","finish","abrupt","round","pos","counts","Date","now","_maxRounds","bracket","bracketPairs","findNextBracket","_maxDuration","setTimeout","bracketInfo","isOpeningBracket","bracketText","val","has","get","set","getOpeningBrackets","Math","max","list","LinkedList","range","getEndPosition","size","findPrevBracket","closing","shift","delete","innerBracket","Range","fromPositions","getStartPosition","outerBracket","_addBracketLeading","startLineNumber","endLineNumber","startLine","column","getLineFirstNonWhitespaceColumn","startColumn","Position","aboveLine","getLineLastNonWhitespaceColumn","WordSelectionRangeProvider","_addInWordRanges","_addWordRanges","_addWhitespaceLine","getFullModelRange","err","obj","getWordAtPosition","word","offset","start","end","lastCh","ch","charCodeAt","isLowerAsciiLetter","isUpperAsciiLetter","length","lineNumber","endColumn","getLineLength","getLineMaxColumn","__decorate","decorators","target","desc","d","c","arguments","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","SelectionRanges","index","fwd","res","equalsRange","mov","SmartSelectController","_editor","_languageFeaturesService","_ignoreSelection","_a","_selectionListener","dispose","forward","selections","newSelections","_this","hasModel","getSelections","getModel","_state","provideSelectionRanges","selectionRangeProvider","map","getPosition","getOption","CancellationToken","None","arrays","a","b","equalsSelection","filter","containsPosition","unshift","onDidChangeCursorPosition","undefined","state","Selection","setSelections","editor","getContribution","ID","ILanguageFeaturesService","AbstractSmartSelect","_EditorAction","_inherits","_super","_createSuper","opts","_this2","call","_forward","_accessor","_callee2","controller","run","EditorAction","GrowSelectionAction","_AbstractSmartSelect","_super2","id","label","nls","alias","precondition","kbOpts","kbExpr","EditorContextKeys","editorTextFocus","primary","mac","secondary","weight","menuOpts","menuId","MenuId","MenubarSelectionMenu","group","title","comment","order","CommandsRegistry","registerCommandAlias","ShrinkSelectionAction","_AbstractSmartSelect2","_super3","registry","options","token","_callee3","providers","work","allRawRanges","provider","_context3","all","concat","allProviderRanges","_step3","_iterator3","oneProviderRanges","isIRange","lift","onUnexpectedExternalError","oneRawRanges","sort","isBefore","last","_step2","oneRanges","_iterator2","containsRange","selectLeadingAndTrailingWhitespace","oneRangesWithTrivia","cur","rangeNoWhitespace","rangeFull","registerEditorContribution","registerEditorAction","registerCommand","accessor","_len","args","Array","_key","_callee4","resource","reference","_context4","assertType","URI","isUri","ITextModelService","createModelReference","sent","object","textEditorModel","_defaultOptions","overwriteBefore","overwriteAfter","undoStopBefore","undoStopAfter","adjustWhitespace","clipboardText","overtypingCapturer","SnippetController2","_logService","contextKeyService","_languageConfigurationService","_snippetListener","DisposableStore","_modelVersionId","_inSnippet","InSnippetMode","bindTo","_hasNextTabstop","HasNextTabstop","_hasPrevTabstop","HasPrevTabstop","reset","_session","template","_doInsert","assign","cancel","error","_logInfo","clear","pushStackElement","merge","getAlternativeVersionId","SnippetSession","insert","hasChoice","_choiceCompletionItemProvider","provideCompletionItems","equals","activeChoice","choice","getValueInRange","isAnyOfOptions","Boolean","find","o","suggestions","option","kind","insertText","sortText","repeat","filterText","command","localize","registration","completionProvider","register","language","getLanguageId","pattern","uri","fsPath","scheme","exclusive","add","_updateState","onDidChangeModelContent","isFlush","onDidChangeModel","onDidChangeCursorSelection","hasPlaceholder","isAtLastPlaceholder","isSelectionWithinPlaceholders","isAtFirstPlaceholder","_handleChoice","_currentChoice","queueMicrotask","showSimpleSuggestions","resetSelection","getSelection","RawContextKey","ILogService","IContextKeyService","ILanguageConfigurationService","CommandCtor","EditorCommand","bindToContribution","registerEditorCommand","ContextKeyExpr","and","handler","ctrl","Scanner","substr","len","type","_table","isDigitCharacter","isVariableCharacter","isNaN","_Scanner$_table","_defineProperty","Marker","_children","child","Text","parent","others","idx","children","indexOf","newChildren","slice","splice","_toConsumableArray","_fixParent","rightMostDescendant","candidate","TextmateSnippet","reduce","toString","_Marker","TransformableMarker","_Marker2","Placeholder","_TransformableMarker","_this3","Choice","ret","transform","clone","isFinalTabstop","_Marker3","_super4","_this4","marker","forEach","appendChild","Transform","_Marker4","_super5","_this5","regexp","RegExp","didMatch","replace","_replace","prototype","some","FormatString","elseValue","groups","source","ignoreCase","global","_Marker5","_super6","shorthandName","ifValue","_this6","toLocaleUpperCase","toLocaleLowerCase","_toPascalCase","_toCamelCase","match","charAt","toUpperCase","join","toLowerCase","Variable","_TransformableMarker2","_super7","name","_this7","resolver","walk","visitor","stack","_Marker6","_super8","_placeholders","placeholderInfo","found","placeholder","_this8","_get","_getPrototypeOf","SnippetParser","_scanner","_token","insertFinalTabstop","enforceFinalTabstop","snippet","parseFragment","ensureFinalTabstop","text","_parse","placeholderDefaultValues","incompletePlaceholders","fillInIncompletePlaceholder","defaultValues","newChild","Set","_i","_incompletePlaceholde","placeholders","p","tokenText","nextToken","substring","_parseEscaped","_parseTabstopOrVariableName","_parseComplexPlaceholder","_parseComplexVariable","_parseAnything","_accept","test","Number","_backTo","_parseTransform","_parseChoiceElement","values","variable","regexValue","regexOptions","escaped","_parseFormatString","complex","shorthand","_until","CompositeSnippetVariableResolver","freeze","_delegates","SelectionBasedVariableResolver","_model","_selection","_selectionIdx","_overtypingCapturer","isMultiline","info","getLastOvertypedInfo","multiline","line","getLineContent","lineLeadingWhitespace","getLeadingWhitespace","varLeadingWhitespace","splitLines","pop","whitespaceCommonLength","commonPrefixLength","m","newline","rest","positionLineNumber","positionColumn","String","ModelBasedVariableResolver","_labelService","path","lastIndexOf","getUriLabel","dirname","relative","noPrefix","ClipboardBasedVariableResolver","_readClipboardText","_selectionCount","_spread","lines","split","isFalsyOrWhitespace","CommentBasedVariableResolver","langId","getLanguageIdAtPosition","selectionStartLineNumber","selectionStartColumn","config","getLanguageConfiguration","comments","lineCommentToken","blockCommentStartToken","blockCommentEndToken","TimeBasedVariableResolver","_date","getFullYear","getMonth","valueOf","padStart","getDate","getHours","getMinutes","getSeconds","dayNames","getDay","dayNamesShort","monthNames","monthNamesShort","floor","getTime","rawTimeOffset","getTimezoneOffset","sign","hours","trunc","abs","hoursString","minutes","WorkspaceBasedVariableResolver","_workspaceService","workspaceIdentifier","toWorkspaceIdentifier","getWorkspace","isEmptyWorkspaceIdentifier","_resolveWorkspaceName","_resoveWorkspacePath","isSingleFolderWorkspaceIdentifier","filename","configPath","endsWith","WORKSPACE_EXTENSION","normalizeDriveLetter","folderpath","RandomBasedVariableResolver","random","generateUuid","OneSnippet","_snippet","_snippetLineLeadingWhitespace","_offset","_nestingLevel","_placeholderGroups","groupBy","compareByIndex","_placeholderGroupsIdx","textChange","newPosition","_placeholderDecorations","removeDecorations","Error","changeDecorations","placeholderOffset","placeholderLen","fullLen","getPositionAt","_decor","inactiveFinal","inactive","handle","addDecoration","_initDecorations","operations","getDecorationRange","currentValue","transformedValueLines","normalizeIndentation","EditOperation","getEOL","executeEdits","couldSkipThisPlaceholder","activePlaceholders","_hasPlaceholderBeenCollapsed","changeDecorationOptions","activeFinal","active","_step5","_iterator5","enclosingPlaceholders","enclosingPlaceholder","_step4","_iterator4","_step4$value","_slicedToArray","move","isEmpty","_step6","_iterator6","_step7","placeholdersWithEqualIndex","_iterator7","_step8","_iterator8","nested","console","assert","_step9","indexLastPlaceholder","_iterator9","nestedPlaceholder","removeDecoration","_step10","_iterator10","ModelDecorationOptions","description","stickiness","className","_template","_options","_templateMerges","_snippets","_ref","createEditsAndSnippetsFromSelections","createEditsAndSnippetsFromEdits","edits","snippets","_undoEdits","undoEdits","edit","identifier","initialize","_move","revealRange","_SnippetSession$creat","isTrivialSnippet","_step11","_iterator11","revealPositionInCenterIfOutsideViewport","_step12","_iterator12","oneSelection","_step13","allPossibleSelections","_iterator13","_ret","possibleSelections","computePossibleSelections","_step15","_iterator15","_step15$value","compareRangesUsingStarts","_step16","_iterator16","selection","v","array","_step14","_iterator14","_step14$value","adjustIndentation","snippetTextString","prevChar","newValue","positionColumnBefore","positionColumnAfter","validateRange","createWithDirection","getDirection","languageConfigurationService","_step17","workspaceService","invokeWithinContext","IWorkspaceContextService","modelBasedVariableResolver","ILabelService","readClipboardText","firstBeforeText","adjustSelection","firstAfterText","firstLineFirstNonWhitespace","indexedSelections","_iterator17","_step17$value","extensionBefore","extensionAfter","snippetSelection","setStartPosition","setEndPosition","parse","snippetLineLeadingWhitespace","resolveVariables","major","minor","_isTracked","snippetEdits","parser","_snippetEdits$i","lastRange","textRange","textNode","newNodes","snippetText","snippetFragmentText","ModelProvider","Status","StickyScrollWidgetState","lineNumbers","lastLineRelativePosition","_ttPolicy","createTrustedTypesPolicy","createHTML","StickyScrollWidget","_Disposable","_rootDomNode","document","createElement","_disposableStore","_register","_lineNumbers","_lastLineRelativePosition","_hoverOnLine","_hoverOnColumn","_layoutInfo","getLayoutInfo","classList","toggle","EmbeddedCodeEditorWidget","style","width","minimap","minimapCanvasOuterWidth","verticalScrollbarWidth","dom","clearNode","editorLineHeight","_renderRootNode","_getViewModel","entries","_step$value","childNode","_renderChildNode","widgetHeight","display","height","setAttribute","side","marginLeft","actualInlineDecorations","viewModel","viewLineNumber","coordinatesConverter","convertModelPositionToViewPosition","lineRenderingData","getViewLineRenderingData","layoutInfo","minimapSide","lineHeight","lineNumberOption","LineDecoration","inlineDecorations","minColumn","maxColumn","newLine","renderLineInput","RenderLineInput","content","continuesWithWrappedLine","isBasicASCII","containsRTL","tokens","tabSize","startVisibleColumn","sb","StringBuilder","renderViewLine","build","lineHTMLNode","innerHTML","lineNumberHTMLNode","contentLeft","innerLineNumberHTML","renderType","innerText","lineNumbersWidth","paddingLeft","lineNumbersLeft","applyFontInfo","tabIndex","zIndex","top","addDisposableListener","StandardMouseEvent","preference","Disposable","StickyRange","StickyElement","StickyModel","version","element","outlineProviderId","StickyModelProvider","defaultModel","_modelProviders","_modelPromise","_updateScheduler","Delayer","stickyModelFromCandidateOutlineProvider","StickyModelFromCandidateOutlineProvider","stickyModelFromSyntaxFoldingProvider","StickyModelFromCandidateSyntaxFoldingProvider","stickyModelFromIndentationFoldingProvider","StickyModelFromCandidateIndentationFoldingProvider","OUTLINE_MODEL","FOLDING_PROVIDER_MODEL","INDENTATION_MODEL","_store","textModel","textModelVersionId","_cancelModelPromise","trigger","modelProvider","_modelProvider$comput","statusPromise","modelPromise","status","computeStickyModel","t0","CANCELED","VALID","stickyModel","StickyModelCandidateProvider","_stickyModel","INVALID","modelVersionId","isCancellationRequested","isProviderValid","_invalid","providerModelPromise","createCancelablePromise","createModelFromProvider","providerModel","isModelValid","createStickyModel","onUnexpectedError","_StickyModelCandidate","OutlineModel","create","documentSymbolProvider","_this$_stickyModelFro","_stickyModelFromOutlineModel","stickyOutlineElement","providerID","outlineModel","preferredProvider","outlineElements","Iterable","first","OutlineGroup","outlineGroupOfModel","tempID","maxTotalSumOfRanges","optimalOutlineGroup","_step2$value","outlineGroup","totalSumRanges","_findSumOfRangesOfGroup","stickyChildren","outlineElementsArray","from","element1","element2","range1","symbol","range2","_comparator","outlineElement","_stickyModelFromOutlineElement","selectionRange","previousStartLine","subchild","child1","child2","outline","OutlineElement","StickyModelFromCandidateFoldingProvider","_StickyModelCandidate2","_foldingLimitReporter","RangesLimitReporter","foldingElement","_fromFoldingRegions","foldingRegions","orderedStickyElements","parentIndex","getParentIndex","parentNode","getStartLineNumber","getEndLineNumber","_StickyModelFromCandi","IndentRangeProvider","compute","_StickyModelFromCandi2","FoldingController","getFoldingRangeProviders","_this9","selectedProviders","SyntaxRangeProvider","StickyLineCandidate","nestingDepth","StickyLineCandidateProvider","_onDidChangeStickyScroll","Emitter","onDidChangeStickyScroll","event","_cts","_stickyModelProvider","_sessionStore","_updateSoon","RunOnceScheduler","update","onDidChangeConfiguration","hasChanged","readConfiguration","enabled","onDidChangeHiddenAreas","schedule","onDidChange","CancellationTokenSource","updateStickyModel","fire","isDifferentModel","resetHandle","getVersionId","isEqual","clearTimeout","depth","lastStartLineNumber","lastLine","childrenStartLines","lowerBound","updateIndex","binarySearch","upperBound","childStartLine","childEndLine","getCandidateStickyLinesIntersectingFromStickyModel","_b","stickyLineCandidates","hiddenRanges","getHiddenAreas","hiddenRange","stickyLine","StickyScrollController","_contextMenuService","_instaService","_languageFeatureDebounceService","_contextKeyService","_maxStickyLines","MAX_SAFE_INTEGER","_candidateDefinitionsLength","_focusedStickyElementIndex","_enabled","_focused","_positionRevealed","_onMouseDown","_stickyScrollWidget","_stickyLineCandidateProvider","_widgetState","_readConfiguration","getDomNode","EventType","CONTEXT_MENU","_assertThisInitialized","_onContextMenu","_stickyScrollFocusedContextKey","stickyScrollFocused","_stickyScrollVisibleContextKey","stickyScrollVisible","focusTracker","trackFocus","onDidBlur","_","clientHeight","focus","_disposeFocusStickyScrollStore","onDidFocus","_createClickLinkGesture","MOUSE_DOWN","_focusDisposableStore","rootNode","lastElementChild","_stickyElements","_focusNav","direction","item","_revealPosition","revealPosition","setSelection","linkGestureStore","sessionStore","gesture","ClickLinkGesture","onMouseMoveOrRelevantKeyDown","_ref2","mouseEvent","hasTriggerModifier","targetMouseEvent","detail","getId","hoverOnColumn","hoverOnLine","stickyPositionProjectedOnEditor","_stickyRangeProjectedOnEditor","textDecoration","currentHTMLChild","cancellationToken","toDisposable","getDefinitionsAtPosition","definitionProvider","candidateDefinitions","childHTML","onCancel","onExecute","invokeFunction","goToDefinitionWithLocation","isRightClick","showContextMenu","StickyScrollContext","getAnchor","removeOverlayWidget","addOverlayWidget","onDidScrollChange","_renderStickyScroll","onDidLayoutChange","_onDidResize","onDidChangeModelTokens","_onTokensChange","stickyLineNumbers","getCurrentLines","stickyLineNumber","fromLineNumber","toLineNumber","_needsUpdate","theoreticalLines","stickyLineVersion","findScrollWidgetState","setState","focusedStickyElementLineNumber","includes","maxNumberStickyLines","min","maxLineCount","scrollTop","getScrollTop","arrayVisibleRanges","getVisibleRanges","fullVisibleRange","candidateRanges","getCandidateStickyLinesIntersecting","topOfElementAtDepth","bottomOfElementAtDepth","bottomOfBeginningLine","getBottomForLineNumber","topOfEndLine","getTopForLineNumber","bottomOfEndLine","IContextMenuService","IInstantiationService","ILanguageFeatureDebounceService","ToggleStickyScroll","_Action","mnemonicTitle","original","category","Categories","View","toggled","condition","menu","CommandPalette","MenubarViewMenu","configurationService","IConfigurationService","getValue","updateValue","Action2","FocusStickyScroll","EditorAction2","SelectNextStickyScrollLine","_EditorAction2","isEqualTo","keybinding","focusNext","SelectPreviousStickyScrollLine","_EditorAction3","focusPrevious","GoToStickyScrollLine","_EditorAction4","goToFocused","SelectEditor","_EditorAction5","selectEditor","registerAction2","LineContext","leadingLineContent","characterCountDelta","CompletionModel","items","lineContext","wordDistance","snippetSuggestions","fuzzyScoreOptions","FuzzyScoreOptions","default","_snippetCompareFn","_compareCompletionItems","_items","_column","_wordDistance","_refilterKind","_lineContext","_fuzzyScoreOptions","_compareCompletionItemsSnippetsUp","_compareCompletionItemsSnippetsDown","_filteredItems","_ensureCachedState","_itemsByProvider","getItemsByProvider","container","incomplete","_stats","_createCachedState","labelLengths","_this$_lineContext","wordLow","scoreFn","filterGraceful","fuzzyScore","fuzzyScoreGracefulAggressive","isInvalid","arr","editStart","wordLen","score","FuzzyScore","Default","wordPos","completion","filterTextLow","compareIgnoreCase","textLabel","anyScore","labelLow","distance","pLabelLen","quickSelect","_snippetSuggestSupport","Context","Visible","historyNavigationVisible","HasFocusedSuggestion","DetailsVisible","MultipleSuggestions","MakesTextEdit","AcceptSuggestionsOnEnter","HasInsertAndReplaceRange","InsertMode","CanResolve","suggestWidgetStatusbarMenu","CompletionItem","sortTextLow","extensionId","editInsertEnd","editReplaceEnd","spansMultipleLines","resolveCompletionItem","_resolveCache","_isResolved","sub","onCancellationRequested","isCancellationError","CompletionOptions","snippetSortOrder","kindFilter","providerFilter","providerItemsToReuse","showDeprecated","getSnippetSuggestSupport","CompletionItemModel","needsClipboard","durations","disposable","provideSuggestionItems","context","triggerKind","sw","defaultReplaceRange","defaultRange","disposables","onCompletionList","snippetCompletions","_context5","StopWatch","_c","didAddResult","suggestion","tags","insertTextRules","guessNeedsClipboard","isDisposable","providerName","_debugDisplayName","elapsedProvider","duration","elapsedOverall","elapsed","reuseItems","orderedGroups","providerGroup","_sw","CancellationError","snippetConfig","_snippetComparators","defaultComparator","triggerSuggest","_callee5","triggerCharacter","maxItemsToResolve","_accessor$get","ref","_result","resolving","actualPosition","completions","_context6","isIPosition","validatePosition","QuickSuggestionsOptions","other","strings","tokenType","WordContextKey","_ckAtEnd","AtEnd","_configListener","_update","checkForWordEnd","SuggestAlternatives","_index","_ckOtherSuggestions","OtherSuggestions","_listener","_acceptNext","_ignore","acceptNext","_moveIndex","newIndex","rounds","additionalTextEdits","CommitCharacterController","widget","accept","_disposables","onDidSuggest","completionModel","onDidCancel","onDidShow","_onItem","getFocusedItem","onDidHide","onWillType","_active","isFrozen","acceptCharacters","selected","isNonEmptyArray","commitCharacters","CharacterSet","triggerOptions","leadingWord","getWordUntilPosition","tokenization","tokenizeIfCheap","SuggestModel","_editorWorkerService","_clipboardService","_telemetryService","_configurationService","_toDispose","_triggerCharacterListener","_triggerQuickSuggest","TimeoutTimer","_triggerState","_completionDisposables","_onDidCancel","_onDidTrigger","_onDidSuggest","onDidTrigger","_telemetryGate","_currentSelection","_updateTriggerCharacters","onDidChangeModelLanguage","_updateActiveSuggestSession","editorIsComposing","onDidCompositionStart","onDidCompositionEnd","_onCompositionEnd","_onCursorChange","_refilterCompletionItems","supportsByTriggerCharacter","support","triggerCharacters","checkTriggerCharacter","getContextKeyValue","suppressSuggestions","InlineCompletionContextKeys","canShowSuggestOnTriggerCharacters","shouldAutoTrigger","lastChar","isLowSurrogate","isHighSurrogate","supports","_completionModel","auto","retrigger","completionOptions","onDidType","_requestToken","prevSelection","reason","isBeforeOrEqual","_doTriggerQuickSuggest","isAllOff","snippetsPreventQuickSuggestions","isInSnippet","cancelAndSet","hasWidgetFocus","isAllOn","lineTokens","getLineTokens","getStandardTokenType","findTokenIndexAtOffset","valueFor","inlineSuggestionVisible","canShowQuickSuggest","ctx","refilter","_onNewContext","_d","_e","_f","shy","suggestCtx","_SuggestModel$_create","_createSuggestFilter","itemKindFilter","itemKind","WordDistance","_g","fuzzySearchOptions","readText","firstMatchCanBeWeak","matchOnWordStartOnly","_reportDurationsTelemetry","catch","publicLog2","data","JSON","stringify","debug","getIncompleteProvider","oldLineContext","suggestOptions","showMethods","showFunctions","showConstructors","showFields","showVariables","showClasses","showStructs","showInterfaces","showModules","showProperties","showEvents","showOperators","showUnits","showValues","showConstants","showEnums","showEnumMembers","showKeywords","showWords","showColors","showFiles","showReferences","showFolders","showTypeParameters","showSnippets","showUsers","showIssues","IEditorWorkerService","IClipboardService","ITelemetryService","OvertypingCapturer","suggestModel","_lastOvertyped","_locked","selectionsLength","willOvertype","getValueLengthInRange","_maxSelectionLength","StatusBarViewItem","_MenuEntryActionViewI","kb","_keybindingService","lookupKeybinding","_action","textContent","symbolPrintEnter","getLabel","MenuEntryActionViewItem","SuggestWidgetStatus","_menuId","instantiationService","_menuService","_menuDisposables","append","$","actionViewItemProvider","action","MenuItemAction","createInstance","_leftActions","ActionBar","_rightActions","domNode","remove","createMenu","left","right","getActions","actions","renderMenu","IMenuService","canExpandCompletionItem","documentation","SuggestDetailsWidget","instaService","_onDidClose","onDidClose","_onDidChangeContents","onDidChangeContents","_renderDisposeable","_borderWidth","_size","Dimension","_markdownRenderer","MarkdownRenderer","_body","_scrollbar","DomScrollableElement","alwaysConsumeMouseWheel","_header","_close","ThemeIcon","asCSSSelector","Codicon","close","_type","_docs","_configureFont","getOptions","fontInfo","fontFamily","getMassagedFontFamily","fontSize","fontWeight","fontSizePx","lineHeightPx","fontFeatureSettings","borderWidth","borderHeight","verticalPadding","horizontalPadding","layout","explainMode","_item$completion","md","MarkdownString","appendCodeblock","cappedDetail","show","hide","renderedContents","render","onDidRenderAsync","userSelect","onmousedown","preventDefault","stopPropagation","onclick","clearContents","newSize","scanDomNode","much","scrollHeight","scrollDown","scrollUp","SuggestDetailsOverlay","topLeftNow","sizeNow","_added","_preferAlignAtTop","_resizable","ResizableHTMLElement","enableSashes","deltaTop","deltaLeft","onDidWillResize","_topLeft","onDidResize","dimension","updateTopLeft","west","north","_applyTopLeft","_userSize","_anchorBox","_placeAtAnchor","sessionEnded","clearSashHoverState","anchor","preferAlignAtTop","anchorBox","getBoundingClientRect","alignAtTop","maxSize","bodyBox","getClientArea","body","defaultMinSize","defaultTop","eastPlacement","maxSizeTop","maxSizeBottom","with","fit","minSize","placements","placement","bottom","maxHeight","topLeft","getAriaId","suggestMoreInfoIcon","registerIcon","chevronRight","_completionItemColor","ColorExtractor","out","_regexStrict","_regexRelaxed","exec","ItemRenderer","_modelService","_languageService","_themeService","_onDidToggleDetails","onDidToggleDetails","templateId","root","icon","colorspan","main","iconContainer","iconLabel","IconLabel","supportHighlights","supportIcons","parametersLabel","qualifierLabel","detailsLabel","readMore","configureFont","letterSpacing","letterSpacingPx","backgroundColor","labelOptions","labelEscapeNewLines","matches","createMatches","color","extract","getFileIconTheme","hasFileIcons","labelClasses","getIconClasses","FileKind","FILE","detailClasses","extraClasses","hasFolderIcons","FOLDER","flat","_data$iconContainer$c","asClassNameArray","CompletionItemKinds","toIcon","setLabel","stripNewLines","showInlineDetails","templateData","str","IModelService","ILanguageService","IThemeService","registerColor","dark","editorWidgetBackground","light","hcDark","hcLight","editorWidgetBorder","editorSuggestWidgetForeground","editorForeground","quickInputListFocusForeground","quickInputListFocusIconForeground","editorSuggestWidgetSelectedBackground","quickInputListFocusBackground","listHighlightForeground","listFocusHighlightForeground","transparent","PersistedWidgetSize","_service","getEditorType","raw","is","store","SuggestWidget","_storageService","_isAuto","_pendingLayout","MutableDisposable","_pendingShowDetails","_ignoreFocusEvents","_forceRenderingAbove","_explainMode","_showTimeout","_onDidSelect","PauseableEmitter","_onDidFocus","_onDidHide","_onDidShow","onDidSelect","_onDetailsKeydown","onDetailsKeyDown","_contentWidget","SuggestContentWidget","_persistedSize","ResizeState","persistedSize","currentSize","persistHeight","persistWidth","lockPreference","restore","_resize","south","east","_this$getLayoutInfo","itemHeight","defaultSize","threshold","_this$element$size","unlockPreference","_messageElement","_listElement","details","toggleDetails","_details","applyIconStyle","showIcons","renderer","_list","List","getHeight","_element","getTemplateId","useShadows","mouseSupport","multipleSelectionSupport","accessibilityProvider","getRole","getWidgetAriaLabel","getWidgetRole","getAriaLabel","_item$completion$labe","isResolved","_isDetailsVisible","docs","getListStyles","listInactiveFocusBackground","listInactiveFocusOutline","activeContrastBorder","_status","applyStatusBarStyle","showStatusBar","onDidColorThemeChange","t","_onThemeChange","getColorTheme","onMouseDown","_onListMouseDownOrTap","onTap","onDidChangeSelection","_onListSelection","onDidChangeFocus","_onListFocus","_onCursorSelectionChanged","_ctxSuggestWidgetVisible","SuggestContext","_ctxSuggestWidgetDetailsVisible","_ctxSuggestWidgetMultipleSuggestions","_ctxSuggestWidgetHasFocusedSuggestion","addStandardDisposableListener","_onEditorMouseDown","_loadingTimeout","contains","browserEvent","_select","elements","indexes","theme","isHighContrast","_currentSuggestionDetails","_focusedItem","setAriaOptions","activeDescendant","reveal","loading","disposableTimeout","showDetails","setFocus","_cappedHeight","LOADING_MESSAGE","_show","NO_SUGGESTIONS_MESSAGE","_layout","delay","setPosition","_setState","selectionIndex","isAuto","noFocus","visibleCount","pause","resume","runAtThisOrScheduleAtNextAnimationFrame","pageDown","focusNextPage","scrollBottom","focusLast","pageUp","focusPreviousPage","focusFirst","getFocus","getFocusedElements","_setDetailsVisible","renderLoading","renderItem","_positionDetails","dim","minPersistedHeight","ceil","setPreference","maxWidth","preferredWidth","stats","typicalHalfwidthCharacterWidth","fullHeight","statusBarHeight","contentHeight","minHeight","editorBox","getDomNodePagePosition","cursorBox","getScrolledVisiblePosition","cursorBottom","maxHeightBelow","availableSpaceAbove","maxHeightAbove","capped","wanted","preferredSize","_this$element$maxSize","placeAtAnchor","clamp","getBoolean","IStorageService","_widget","allowEditorOverflow","suppressMouseDown","_preferenceLocked","_hidden","removeContentWidget","addContentWidget","layoutContentWidget","_position","_preference","_this$_widget$element","_this$_widget$getLayo","_afterRender","LineSuffix","getOffsetAt","_marker","deltaDecorations","isDisposed","SuggestController","_memoryService","_commandService","_instantiationService","_lineSuffix","_selectors","PriorityRegistry","priority","select","ctxInsertMode","insertMode","IdleValue","_insertSuggestion","commitCharacterController","ctxMakesTextEdit","ctxHasInsertAndReplace","ctxCanResolve","toKeyCodeChord","KeyCodeChord","platform","isModifierKey","_alternatives","showTriggered","itemsOrderedByPriorityDesc","selectionMode","showSuggestions","hideWidget","onDidBlurEditorWidget","acceptSuggestionsOnEnter","updateFromConfig","acceptSuggestionOnEnter","flags","snippetController","modelVersionNow","tasks","cts","pushUndoStop","getOverwriteInfo","memorize","isArray","scrollState","StableEditorScrollState","capture","replaceMove","restoreRelativeVerticalPositionOfCursor","docListener","onDidChangeContent","changes","change","thisPosition","oldFlags","didType","typeListener","applied","trace","_this$_commandService","escape","TriggerSuggestAction","executeCommand","canUndo","undo","_alertCompletionItem","finally","_reportSuggestionAcceptedTelemetry","acceptedSuggestion","providerId","basenameHash","hash","basename","languageId","fileExtension","extname","toggleMode","delta","msg","alert","onlyFrom","noFilter","arg","positionNow","fallback","Event","once","listener","any","makesTextEdit","keepAlternativeSuggestions","alternativeOverwriteConfig","focusSelected","selectNext","selectNextPage","selectLast","selectPrevious","selectPreviousPage","selectFirst","toggleExplainMode","toggleDetailsFocus","resetPersistedSize","forceRenderingAbove","isInitialized","stopForceRenderingAbove","selector","ISuggestMemoryService","ICommandService","prioritySelector","s1","s2","writable","hasCompletionItemProvider","toNegated","textInputFocus","SuggestCommand","x","acceptSelectedSuggestion","when","cancelSuggestWidget","or","negate","selectNextSuggestion","selectNextPageSuggestion","selectLastSuggestion","selectPrevSuggestion","selectPrevPageSuggestion","selectFirstSuggestion","focusSuggestion","toggleSuggestionDetails","toggleSuggestionFocus","triggerSuggestAndAcceptBest","isObject","acceptNextSuggestion","acceptPrevSuggestion","_class","resetWidgetSize","SuggestInlineCompletion","InlineCompletionResults","_RefCountedDisposable","_suggestMemoryService","selectedIndex","second","resolveCount","RefCountedDisposable","SuggestInlineCompletions","_getEditorOption","_languageFeatureService","wordInfo","triggerCharacterInfo","leadingLineContents","newLineContext","selectedSuggestionInfo","_getTriggerCharacterInfo","_lastResult","canBeReused","acquire","boostFullMatch","_completions","release","EditorContribution","languageFeatureService","editorService","_counter","listCodeEditors","_disposable","inlineCompletionsProvider","ICodeEditorService","Memory","topScore","_items$i","preselect","NoMemory","_Memory","LRUMemory","_Memory2","_cache","LRUCache","_seq","touch","lineSuffix","indexPreselect","indexRecency","seq","peek","toJSON","fromString","PrefixMemory","_Memory3","_trie","TernarySearchTree","forStrings","findSubstr","_items$i$completion","SuggestMemoryService","_configService","_persistSoon","_saveState","onWillSaveState","WillSaveStateReason","SHUTDOWN","_withStrategy","mode","overrideIdentifier","_strategy","ctor","_strategyCtors","scope","_storagePrefix","fromJSON","createDecorator","registerSingleton","service","_yield$BracketSelecti","_yield$BracketSelecti2","wordRanges","wordUntilPos","localityBonus","canComputeWordRanges","computeWordRanges","_WordDistance","wordLines","isFalsyOrEmpty","bestWordRange","blockDistance","_WordDistance2","_class2","foreground"],"sourceRoot":""}