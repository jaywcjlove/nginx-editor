"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[2609],{24216:(e,t,i)=>{var s=i(87766),n=i(30050);class o extends s.jG{constructor(e){super(),this._editor=e,this._register(this._editor.onMouseDown((e=>{const t=this._editor.getOption(117);t>=0&&6===e.target.type&&e.target.position.column>=t&&this._editor.updateOptions({stopRenderingLineAfter:-1})})))}}o.ID="editor.contrib.longLinesHelper",(0,n.HW)(o.ID,o,2)},85521:(e,t,i)=>{i.d(t,{k:()=>f});var s,n=i(38427),o=i(82224),r=i(48250),a=i(58348),d=i(87766),l=i(30050),c=i(99005),h=i(14564),u=i(51413),g=i(39686),p=i(2531),m=i(32605),_=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},v=function(e,t){return function(i,s){t(i,s,e)}};let f=s=class{static get(e){return e.getContribution(s.ID)}constructor(e,t,i){this._openerService=i,this._messageWidget=new d.HE,this._messageListeners=new d.Cm,this._mouseOverMessage=!1,this._editor=e,this._visible=s.MESSAGE_VISIBLE.bindTo(t)}dispose(){var e;null===(e=this._message)||void 0===e||e.dispose(),this._messageListeners.dispose(),this._messageWidget.dispose(),this._visible.reset()}showMessage(e,t){let i;(0,o.xE)((0,a.VS)(e)?e.value:e),this._visible.set(!0),this._messageWidget.clear(),this._messageListeners.clear(),this._message=(0,a.VS)(e)?(0,n.Gc)(e,{actionHandler:{callback:t=>{this.closeMessage(),(0,h.i)(this._openerService,t,(0,a.VS)(e)?e.isTrusted:void 0)},disposables:this._messageListeners}}):void 0,this._messageWidget.value=new C(this._editor,t,"string"===typeof e?e:this._message.element),this._messageListeners.add(r.Jh.debounce(this._editor.onDidBlurEditorText,((e,t)=>t),0)((()=>{this._mouseOverMessage||this._messageWidget.value&&m.QX(m.bq(),this._messageWidget.value.getDomNode())||this.closeMessage()}))),this._messageListeners.add(this._editor.onDidChangeCursorPosition((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidDispose((()=>this.closeMessage()))),this._messageListeners.add(this._editor.onDidChangeModel((()=>this.closeMessage()))),this._messageListeners.add(m.ko(this._messageWidget.value.getDomNode(),m.Bx.MOUSE_ENTER,(()=>this._mouseOverMessage=!0),!0)),this._messageListeners.add(m.ko(this._messageWidget.value.getDomNode(),m.Bx.MOUSE_LEAVE,(()=>this._mouseOverMessage=!1),!0)),this._messageListeners.add(this._editor.onMouseMove((e=>{e.target.position&&(i?i.containsPosition(e.target.position)||this.closeMessage():i=new c.Q(t.lineNumber-3,1,e.target.position.lineNumber+3,1))})))}closeMessage(){this._visible.reset(),this._messageListeners.clear(),this._messageWidget.value&&this._messageListeners.add(C.fadeOut(this._messageWidget.value))}};f.ID="editor.contrib.messageController",f.MESSAGE_VISIBLE=new g.N1("messageVisible",!1,u.kg("messageVisible","Whether the editor is currently showing an inline message")),f=s=_([v(1,g.fN),v(2,p.C)],f);const b=l.DX.bindToContribution(f.get);(0,l.E_)(new b({id:"leaveEditorMessage",precondition:f.MESSAGE_VISIBLE,handler:e=>e.closeMessage(),kbOpts:{weight:130,primary:9}}));class C{static fadeOut(e){const t=()=>{e.dispose(),clearTimeout(i),e.getDomNode().removeEventListener("animationend",t)},i=setTimeout(t,110);return e.getDomNode().addEventListener("animationend",t),e.getDomNode().classList.add("fadeOut"),{dispose:t}}constructor(e,t,i){let{lineNumber:s,column:n}=t;this.allowEditorOverflow=!0,this.suppressMouseDown=!1,this._editor=e,this._editor.revealLinesInCenterIfOutsideViewport(s,s,0),this._position={lineNumber:s,column:n},this._domNode=document.createElement("div"),this._domNode.classList.add("monaco-editor-overlaymessage"),this._domNode.style.marginLeft="-6px";const o=document.createElement("div");o.classList.add("anchor","top"),this._domNode.appendChild(o);const r=document.createElement("div");"string"===typeof i?(r.classList.add("message"),r.textContent=i):(i.classList.add("message"),r.appendChild(i)),this._domNode.appendChild(r);const a=document.createElement("div");a.classList.add("anchor","below"),this._domNode.appendChild(a),this._editor.addContentWidget(this),this._domNode.classList.add("fadeIn")}dispose(){this._editor.removeContentWidget(this)}getId(){return"messageoverlay"}getDomNode(){return this._domNode}getPosition(){return{position:this._position,preference:[1,2],positionAffinity:1}}afterRender(e){this._domNode.classList.toggle("below",2===e)}}(0,l.HW)(f.ID,f,4)},1416:(e,t,i)=>{var s,n=i(82224),o=i(73990),r=i(57443),a=i(87766),d=i(30050),l=i(11288),c=i(99005),h=i(5190),u=i(72330),g=i(74013),p=i(51413),m=i(35155),_=i(39686),v=i(63910),f=i(4220),b=i(39263),C=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},y=function(e,t){return function(i,s){t(i,s,e)}};function S(e,t){const i=t.filter((t=>!e.find((e=>e.equals(t)))));if(i.length>=1){const e=i.map((e=>"line ".concat(e.viewState.position.lineNumber," column ").concat(e.viewState.position.column))).join(", "),t=1===i.length?p.kg("cursorAdded","Cursor added: {0}",e):p.kg("cursorsAdded","Cursors added: {0}",e);(0,n.h5)(t)}}class k extends d.ks{constructor(){super({id:"editor.action.insertCursorAbove",label:p.kg("mutlicursor.insertAbove","Add Cursor Above"),alias:"Add Cursor Above",precondition:void 0,kbOpts:{kbExpr:u.R.editorTextFocus,primary:2576,linux:{primary:1552,secondary:[3088]},weight:100},menuOpts:{menuId:m.D8.MenubarSelectionMenu,group:"3_multi",title:p.kg({key:"miInsertCursorAbove",comment:["&& denotes a mnemonic"]},"&&Add Cursor Above"),order:2}})}run(e,t,i){if(!t.hasModel())return;let s=!0;i&&!1===i.logicalLine&&(s=!1);const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const o=n.getCursorStates();n.setCursorStates(i.source,3,l.c.addCursorUp(n,o,s)),n.revealTopMostCursor(i.source),S(o,n.getCursorStates())}}class w extends d.ks{constructor(){super({id:"editor.action.insertCursorBelow",label:p.kg("mutlicursor.insertBelow","Add Cursor Below"),alias:"Add Cursor Below",precondition:void 0,kbOpts:{kbExpr:u.R.editorTextFocus,primary:2578,linux:{primary:1554,secondary:[3090]},weight:100},menuOpts:{menuId:m.D8.MenubarSelectionMenu,group:"3_multi",title:p.kg({key:"miInsertCursorBelow",comment:["&& denotes a mnemonic"]},"A&&dd Cursor Below"),order:3}})}run(e,t,i){if(!t.hasModel())return;let s=!0;i&&!1===i.logicalLine&&(s=!1);const n=t._getViewModel();if(n.cursorConfig.readOnly)return;n.model.pushStackElement();const o=n.getCursorStates();n.setCursorStates(i.source,3,l.c.addCursorDown(n,o,s)),n.revealBottomMostCursor(i.source),S(o,n.getCursorStates())}}class N extends d.ks{constructor(){super({id:"editor.action.insertCursorAtEndOfEachLineSelected",label:p.kg("mutlicursor.insertAtEndOfEachLineSelected","Add Cursors to Line Ends"),alias:"Add Cursors to Line Ends",precondition:void 0,kbOpts:{kbExpr:u.R.editorTextFocus,primary:1575,weight:100},menuOpts:{menuId:m.D8.MenubarSelectionMenu,group:"3_multi",title:p.kg({key:"miInsertCursorAtEndOfEachLineSelected",comment:["&& denotes a mnemonic"]},"Add C&&ursors to Line Ends"),order:4}})}getCursorsForSelection(e,t,i){if(!e.isEmpty()){for(let s=e.startLineNumber;s<e.endLineNumber;s++){const e=t.getLineMaxColumn(s);i.push(new h.L(s,e,s,e))}e.endColumn>1&&i.push(new h.L(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn))}}run(e,t){if(!t.hasModel())return;const i=t.getModel(),s=t.getSelections(),n=t._getViewModel(),o=n.getCursorStates(),r=[];s.forEach((e=>this.getCursorsForSelection(e,i,r))),r.length>0&&t.setSelections(r),S(o,n.getCursorStates())}}class x extends d.ks{constructor(){super({id:"editor.action.addCursorsToBottom",label:p.kg("mutlicursor.addCursorsToBottom","Add Cursors To Bottom"),alias:"Add Cursors To Bottom",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),s=t.getModel().getLineCount(),n=[];for(let a=i[0].startLineNumber;a<=s;a++)n.push(new h.L(a,i[0].startColumn,a,i[0].endColumn));const o=t._getViewModel(),r=o.getCursorStates();n.length>0&&t.setSelections(n),S(r,o.getCursorStates())}}class R extends d.ks{constructor(){super({id:"editor.action.addCursorsToTop",label:p.kg("mutlicursor.addCursorsToTop","Add Cursors To Top"),alias:"Add Cursors To Top",precondition:void 0})}run(e,t){if(!t.hasModel())return;const i=t.getSelections(),s=[];for(let r=i[0].startLineNumber;r>=1;r--)s.push(new h.L(r,i[0].startColumn,r,i[0].endColumn));const n=t._getViewModel(),o=n.getCursorStates();s.length>0&&t.setSelections(s),S(o,n.getCursorStates())}}class M{constructor(e,t,i){this.selections=e,this.revealRange=t,this.revealScrollType=i}}class I{static create(e,t){if(!e.hasModel())return null;const i=t.getState();if(!e.hasTextFocus()&&i.isRevealed&&i.searchString.length>0)return new I(e,t,!1,i.searchString,i.wholeWord,i.matchCase,null);let s,n,o=!1;const r=e.getSelections();1===r.length&&r[0].isEmpty()?(o=!0,s=!0,n=!0):(s=i.wholeWord,n=i.matchCase);const a=e.getSelection();let d,l=null;if(a.isEmpty()){const t=e.getConfiguredWordAtPosition(a.getStartPosition());if(!t)return null;d=t.word,l=new h.L(a.startLineNumber,t.startColumn,a.startLineNumber,t.endColumn)}else d=e.getModel().getValueInRange(a).replace(/\r\n/g,"\n");return new I(e,t,o,d,s,n,l)}constructor(e,t,i,s,n,o,r){this._editor=e,this.findController=t,this.isDisconnectedFromFindController=i,this.searchText=s,this.wholeWord=n,this.matchCase=o,this.currentMatch=r}addSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new M(t.concat(e),e,0)}moveSelectionToNextFindMatch(){if(!this._editor.hasModel())return null;const e=this._getNextMatch();if(!e)return null;const t=this._editor.getSelections();return new M(t.slice(0,t.length-1).concat(e),e,0)}_getNextMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findNextMatch(this.searchText,t.getEndPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1);return i?new h.L(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}addSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new M(t.concat(e),e,0)}moveSelectionToPreviousFindMatch(){if(!this._editor.hasModel())return null;const e=this._getPreviousMatch();if(!e)return null;const t=this._editor.getSelections();return new M(t.slice(0,t.length-1).concat(e),e,0)}_getPreviousMatch(){if(!this._editor.hasModel())return null;if(this.currentMatch){const e=this.currentMatch;return this.currentMatch=null,e}this.findController.highlightFindOptions();const e=this._editor.getSelections(),t=e[e.length-1],i=this._editor.getModel().findPreviousMatch(this.searchText,t.getStartPosition(),!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1);return i?new h.L(i.range.startLineNumber,i.range.startColumn,i.range.endLineNumber,i.range.endColumn):null}selectAll(e){if(!this._editor.hasModel())return[];this.findController.highlightFindOptions();const t=this._editor.getModel();return e?t.findMatches(this.searchText,e,!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1,1073741824):t.findMatches(this.searchText,!0,!1,this.matchCase,this.wholeWord?this._editor.getOption(131):null,!1,1073741824)}}class E extends a.jG{static get(e){return e.getContribution(E.ID)}constructor(e){super(),this._sessionDispose=this._register(new a.Cm),this._editor=e,this._ignoreSelectionChange=!1,this._session=null}dispose(){this._endSession(),super.dispose()}_beginSessionIfNeeded(e){if(!this._session){const t=I.create(this._editor,e);if(!t)return;this._session=t;const i={searchString:this._session.searchText};this._session.isDisconnectedFromFindController&&(i.wholeWordOverride=1,i.matchCaseOverride=1,i.isRegexOverride=2),e.getState().change(i,!1),this._sessionDispose.add(this._editor.onDidChangeCursorSelection((e=>{this._ignoreSelectionChange||this._endSession()}))),this._sessionDispose.add(this._editor.onDidBlurEditorText((()=>{this._endSession()}))),this._sessionDispose.add(e.getState().onFindReplaceStateChange((e=>{(e.matchCase||e.wholeWord)&&this._endSession()})))}}_endSession(){if(this._sessionDispose.clear(),this._session&&this._session.isDisconnectedFromFindController){const e={wholeWordOverride:0,matchCaseOverride:0,isRegexOverride:0};this._session.findController.getState().change(e,!1)}this._session=null}_setSelections(e){this._ignoreSelectionChange=!0,this._editor.setSelections(e),this._ignoreSelectionChange=!1}_expandEmptyToWord(e,t){if(!t.isEmpty())return t;const i=this._editor.getConfiguredWordAtPosition(t.getStartPosition());return i?new h.L(t.startLineNumber,i.startColumn,t.startLineNumber,i.endColumn):t}_applySessionResult(e){e&&(this._setSelections(e.selections),e.revealRange&&this._editor.revealRangeInCenterIfOutsideViewport(e.revealRange,e.revealScrollType))}getSession(e){return this._session}addSelectionToNextFindMatch(e){if(this._editor.hasModel()){if(!this._session){const t=this._editor.getSelections();if(t.length>1){const i=e.getState().matchCase;if(!D(this._editor.getModel(),t,i)){const e=this._editor.getModel(),i=[];for(let s=0,n=t.length;s<n;s++)i[s]=this._expandEmptyToWord(e,t[s]);return void this._editor.setSelections(i)}}}this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToNextFindMatch())}}addSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.addSelectionToPreviousFindMatch())}moveSelectionToNextFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToNextFindMatch())}moveSelectionToPreviousFindMatch(e){this._beginSessionIfNeeded(e),this._session&&this._applySessionResult(this._session.moveSelectionToPreviousFindMatch())}selectAll(e){if(!this._editor.hasModel())return;let t=null;const i=e.getState();if(i.isRevealed&&i.searchString.length>0&&i.isRegex){const e=this._editor.getModel();t=i.searchScope?e.findMatches(i.searchString,i.searchScope,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(131):null,!1,1073741824):e.findMatches(i.searchString,!0,i.isRegex,i.matchCase,i.wholeWord?this._editor.getOption(131):null,!1,1073741824)}else{if(this._beginSessionIfNeeded(e),!this._session)return;t=this._session.selectAll(i.searchScope)}if(t.length>0){const e=this._editor.getSelection();for(let i=0,s=t.length;i<s;i++){const s=t[i];if(s.range.intersectRanges(e)){t[i]=t[0],t[0]=s;break}}this._setSelections(t.map((e=>new h.L(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn))))}}}E.ID="editor.contrib.multiCursorController";class L extends d.ks{run(e,t){const i=E.get(t);if(!i)return;const s=t._getViewModel();if(s){const n=s.getCursorStates(),o=g.z0.get(t);if(o)this._run(i,o);else{const s=e.get(b._Y).createInstance(g.z0,t);this._run(i,s),s.dispose()}S(n,s.getCursorStates())}}}class P{constructor(e,t,i,s,n){this._model=e,this._searchText=t,this._matchCase=i,this._wordSeparators=s,this._modelVersionId=this._model.getVersionId(),this._cachedFindMatches=null,n&&this._model===n._model&&this._searchText===n._searchText&&this._matchCase===n._matchCase&&this._wordSeparators===n._wordSeparators&&this._modelVersionId===n._modelVersionId&&(this._cachedFindMatches=n._cachedFindMatches)}findMatches(){return null===this._cachedFindMatches&&(this._cachedFindMatches=this._model.findMatches(this._searchText,!0,!1,this._matchCase,this._wordSeparators,!1).map((e=>e.range)),this._cachedFindMatches.sort(c.Q.compareRangesUsingStarts)),this._cachedFindMatches}}let F=s=class extends a.jG{constructor(e,t){super(),this._languageFeaturesService=t,this.editor=e,this._isEnabled=e.getOption(108),this._decorations=e.createDecorationsCollection(),this.updateSoon=this._register(new o.uC((()=>this._update()),300)),this.state=null,this._register(e.onDidChangeConfiguration((t=>{this._isEnabled=e.getOption(108)}))),this._register(e.onDidChangeCursorSelection((e=>{this._isEnabled&&(e.selection.isEmpty()?3===e.reason?(this.state&&this._setState(null),this.updateSoon.schedule()):this._setState(null):this._update())}))),this._register(e.onDidChangeModel((e=>{this._setState(null)}))),this._register(e.onDidChangeModelContent((e=>{this._isEnabled&&this.updateSoon.schedule()})));const i=g.z0.get(e);i&&this._register(i.getState().onFindReplaceStateChange((e=>{this._update()}))),this.updateSoon.schedule()}_update(){this._setState(s._createState(this.state,this._isEnabled,this.editor))}static _createState(e,t,i){if(!t)return null;if(!i.hasModel())return null;const s=i.getSelection();if(s.startLineNumber!==s.endLineNumber)return null;const n=E.get(i);if(!n)return null;const o=g.z0.get(i);if(!o)return null;let r=n.getSession(o);if(!r){const e=i.getSelections();if(e.length>1){const t=o.getState().matchCase;if(!D(i.getModel(),e,t))return null}r=I.create(i,o)}if(!r)return null;if(r.currentMatch)return null;if(/^[ \t]+$/.test(r.searchText))return null;if(r.searchText.length>200)return null;const a=o.getState(),d=a.matchCase;if(a.isRevealed){let e=a.searchString;d||(e=e.toLowerCase());let t=r.searchText;if(d||(t=t.toLowerCase()),e===t&&r.matchCase===a.matchCase&&r.wholeWord===a.wholeWord&&!a.isRegex)return null}return new P(i.getModel(),r.searchText,r.matchCase,r.wholeWord?i.getOption(131):null,e)}_setState(e){if(this.state=e,!this.state)return void this._decorations.clear();if(!this.editor.hasModel())return;const t=this.editor.getModel();if(t.isTooLargeForTokenization())return;const i=this.state.findMatches(),s=this.editor.getSelections();s.sort(c.Q.compareRangesUsingStarts);const n=[];for(let d=0,l=0,h=i.length,u=s.length;d<h;){const e=i[d];if(l>=u)n.push(e),d++;else{const t=c.Q.compareRangesUsingStarts(e,s[l]);t<0?(!s[l].isEmpty()&&c.Q.areIntersecting(e,s[l])||n.push(e),d++):(t>0||d++,l++)}}const o="off"!==this.editor.getOption(81),r=this._languageFeaturesService.documentHighlightProvider.has(t)&&o,a=n.map((e=>({range:e,options:(0,f.v)(r)})));this._decorations.set(a)}dispose(){this._setState(null),super.dispose()}};function D(e,t,i){const s=W(e,t[0],!i);for(let n=1,o=t.length;n<o;n++){const o=t[n];if(o.isEmpty())return!1;if(s!==W(e,o,!i))return!1}return!0}function W(e,t,i){const s=e.getValueInRange(t);return i?s.toLowerCase():s}F.ID="editor.contrib.selectionHighlighter",F=s=C([y(1,v.u)],F);class T extends d.ks{constructor(){super({id:"editor.action.focusNextCursor",label:p.kg("mutlicursor.focusNextCursor","Focus Next Cursor"),metadata:{description:p.kg("mutlicursor.focusNextCursor.description","Focuses the next cursor"),args:[]},alias:"Focus Next Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const n=Array.from(s.getCursorStates()),o=n.shift();o&&(n.push(o),s.setCursorStates(i.source,3,n),s.revealPrimaryCursor(i.source,!0),S(n,s.getCursorStates()))}}class A extends d.ks{constructor(){super({id:"editor.action.focusPreviousCursor",label:p.kg("mutlicursor.focusPreviousCursor","Focus Previous Cursor"),metadata:{description:p.kg("mutlicursor.focusPreviousCursor.description","Focuses the previous cursor"),args:[]},alias:"Focus Previous Cursor",precondition:void 0})}run(e,t,i){if(!t.hasModel())return;const s=t._getViewModel();if(s.cursorConfig.readOnly)return;s.model.pushStackElement();const n=Array.from(s.getCursorStates()),o=n.pop();o&&(n.unshift(o),s.setCursorStates(i.source,3,n),s.revealPrimaryCursor(i.source,!0),S(n,s.getCursorStates()))}}(0,d.HW)(E.ID,E,4),(0,d.HW)(F.ID,F,1),(0,d.Fl)(k),(0,d.Fl)(w),(0,d.Fl)(N),(0,d.Fl)(class extends L{constructor(){super({id:"editor.action.addSelectionToNextFindMatch",label:p.kg("addSelectionToNextFindMatch","Add Selection To Next Find Match"),alias:"Add Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:u.R.focus,primary:2082,weight:100},menuOpts:{menuId:m.D8.MenubarSelectionMenu,group:"3_multi",title:p.kg({key:"miAddSelectionToNextFindMatch",comment:["&& denotes a mnemonic"]},"Add &&Next Occurrence"),order:5}})}_run(e,t){e.addSelectionToNextFindMatch(t)}}),(0,d.Fl)(class extends L{constructor(){super({id:"editor.action.addSelectionToPreviousFindMatch",label:p.kg("addSelectionToPreviousFindMatch","Add Selection To Previous Find Match"),alias:"Add Selection To Previous Find Match",precondition:void 0,menuOpts:{menuId:m.D8.MenubarSelectionMenu,group:"3_multi",title:p.kg({key:"miAddSelectionToPreviousFindMatch",comment:["&& denotes a mnemonic"]},"Add P&&revious Occurrence"),order:6}})}_run(e,t){e.addSelectionToPreviousFindMatch(t)}}),(0,d.Fl)(class extends L{constructor(){super({id:"editor.action.moveSelectionToNextFindMatch",label:p.kg("moveSelectionToNextFindMatch","Move Last Selection To Next Find Match"),alias:"Move Last Selection To Next Find Match",precondition:void 0,kbOpts:{kbExpr:u.R.focus,primary:(0,r.m5)(2089,2082),weight:100}})}_run(e,t){e.moveSelectionToNextFindMatch(t)}}),(0,d.Fl)(class extends L{constructor(){super({id:"editor.action.moveSelectionToPreviousFindMatch",label:p.kg("moveSelectionToPreviousFindMatch","Move Last Selection To Previous Find Match"),alias:"Move Last Selection To Previous Find Match",precondition:void 0})}_run(e,t){e.moveSelectionToPreviousFindMatch(t)}}),(0,d.Fl)(class extends L{constructor(){super({id:"editor.action.selectHighlights",label:p.kg("selectAllOccurrencesOfFindMatch","Select All Occurrences of Find Match"),alias:"Select All Occurrences of Find Match",precondition:void 0,kbOpts:{kbExpr:u.R.focus,primary:3114,weight:100},menuOpts:{menuId:m.D8.MenubarSelectionMenu,group:"3_multi",title:p.kg({key:"miSelectHighlights",comment:["&& denotes a mnemonic"]},"Select All &&Occurrences"),order:7}})}_run(e,t){e.selectAll(t)}}),(0,d.Fl)(class extends L{constructor(){super({id:"editor.action.changeAll",label:p.kg("changeAll.label","Change All Occurrences"),alias:"Change All Occurrences",precondition:_.M$.and(u.R.writable,u.R.editorTextFocus),kbOpts:{kbExpr:u.R.editorTextFocus,primary:2108,weight:100},contextMenuOpts:{group:"1_modification",order:1.2}})}_run(e,t){e.selectAll(t)}}),(0,d.Fl)(x),(0,d.Fl)(R),(0,d.Fl)(T),(0,d.Fl)(A)},93461:(e,t,i)=>{var s=i(64330),n=i(87766),o=i(30050),r=i(72330),a=i(91861),d=i(63910),l=i(73990),c=i(29591),h=i(48250),u=i(61950),g=i(25143),p=i(32031),m=i(97072),_=i(23525),v=i(58066),f=i(39587),b=i(39686);const C={Visible:new b.N1("parameterHintsVisible",!1),MultipleSignatures:new b.N1("parameterHintsMultipleSignatures",!1)};async function y(e,t,i,s,n){const o=e.ordered(t);for(const a of o)try{const e=await a.provideSignatureHelp(t,i,n,s);if(e)return e}catch(r){(0,c.M_)(r)}}var S;f.w.registerCommand("_executeSignatureHelpProvider",(async function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),s=1;s<t;s++)i[s-1]=arguments[s];const[n,o,r]=i;(0,p.j)(m.r.isUri(n)),(0,p.j)(_.y.isIPosition(o)),(0,p.j)("string"===typeof r||!r);const l=e.get(d.u),c=await e.get(v.b).createModelReference(n);try{const e=await y(l.signatureHelpProvider,c.object.textEditorModel,_.y.lift(o),{triggerKind:a.WA.Invoke,isRetrigger:!1,triggerCharacter:r},g.XO.None);if(!e)return;return setTimeout((()=>e.dispose()),0),e.value}finally{c.dispose()}})),function(e){e.Default={type:0};e.Pending=class{constructor(e,t){this.request=e,this.previouslyActiveHints=t,this.type=2}};e.Active=class{constructor(e){this.hints=e,this.type=1}}}(S||(S={}));class k extends n.jG{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:k.DEFAULT_DELAY;super(),this._onChangedHints=this._register(new h.vl),this.onChangedHints=this._onChangedHints.event,this.triggerOnType=!1,this._state=S.Default,this._pendingTriggers=[],this._lastSignatureHelpResult=this._register(new n.HE),this.triggerChars=new u.y,this.retriggerChars=new u.y,this.triggerId=0,this.editor=e,this.providers=t,this.throttledDelayer=new l.ve(i),this._register(this.editor.onDidBlurEditorWidget((()=>this.cancel()))),this._register(this.editor.onDidChangeConfiguration((()=>this.onEditorConfigurationChange()))),this._register(this.editor.onDidChangeModel((e=>this.onModelChanged()))),this._register(this.editor.onDidChangeModelLanguage((e=>this.onModelChanged()))),this._register(this.editor.onDidChangeCursorSelection((e=>this.onCursorChange(e)))),this._register(this.editor.onDidChangeModelContent((e=>this.onModelContentChange()))),this._register(this.providers.onDidChange(this.onModelChanged,this)),this._register(this.editor.onDidType((e=>this.onDidType(e)))),this.onEditorConfigurationChange(),this.onModelChanged()}get state(){return this._state}set state(e){2===this._state.type&&this._state.request.cancel(),this._state=e}cancel(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.state=S.Default,this.throttledDelayer.cancel(),e||this._onChangedHints.fire(void 0)}trigger(e,t){const i=this.editor.getModel();if(!i||!this.providers.has(i))return;const s=++this.triggerId;this._pendingTriggers.push(e),this.throttledDelayer.trigger((()=>this.doTrigger(s)),t).catch(c.dz)}next(){if(1!==this.state.type)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=t%e===e-1,s=this.editor.getOption(86).cycle;!(e<2||i)||s?this.updateActiveSignature(i&&s?0:t+1):this.cancel()}previous(){if(1!==this.state.type)return;const e=this.state.hints.signatures.length,t=this.state.hints.activeSignature,i=0===t,s=this.editor.getOption(86).cycle;!(e<2||i)||s?this.updateActiveSignature(i&&s?e-1:t-1):this.cancel()}updateActiveSignature(e){1===this.state.type&&(this.state=new S.Active({...this.state.hints,activeSignature:e}),this._onChangedHints.fire(this.state.hints))}async doTrigger(e){const t=1===this.state.type||2===this.state.type,i=this.getLastActiveHints();if(this.cancel(!0),0===this._pendingTriggers.length)return!1;const s=this._pendingTriggers.reduce(w);this._pendingTriggers=[];const n={triggerKind:s.triggerKind,triggerCharacter:s.triggerCharacter,isRetrigger:t,activeSignatureHelp:i};if(!this.editor.hasModel())return!1;const o=this.editor.getModel(),r=this.editor.getPosition();this.state=new S.Pending((0,l.SS)((e=>y(this.providers,o,r,n,e))),i);try{const t=await this.state.request;return e!==this.triggerId?(null===t||void 0===t||t.dispose(),!1):t&&t.value.signatures&&0!==t.value.signatures.length?(this.state=new S.Active(t.value),this._lastSignatureHelpResult.value=t,this._onChangedHints.fire(this.state.hints),!0):(null===t||void 0===t||t.dispose(),this._lastSignatureHelpResult.clear(),this.cancel(),!1)}catch(a){return e===this.triggerId&&(this.state=S.Default),(0,c.dz)(a),!1}}getLastActiveHints(){switch(this.state.type){case 1:return this.state.hints;case 2:return this.state.previouslyActiveHints;default:return}}get isTriggered(){return 1===this.state.type||2===this.state.type||this.throttledDelayer.isTriggered()}onModelChanged(){this.cancel(),this.triggerChars.clear(),this.retriggerChars.clear();const e=this.editor.getModel();if(e)for(const t of this.providers.ordered(e)){for(const e of t.signatureHelpTriggerCharacters||[])if(e.length){const t=e.charCodeAt(0);this.triggerChars.add(t),this.retriggerChars.add(t)}for(const e of t.signatureHelpRetriggerCharacters||[])e.length&&this.retriggerChars.add(e.charCodeAt(0))}}onDidType(e){if(!this.triggerOnType)return;const t=e.length-1,i=e.charCodeAt(t);(this.triggerChars.has(i)||this.isTriggered&&this.retriggerChars.has(i))&&this.trigger({triggerKind:a.WA.TriggerCharacter,triggerCharacter:e.charAt(t)})}onCursorChange(e){"mouse"===e.source?this.cancel():this.isTriggered&&this.trigger({triggerKind:a.WA.ContentChange})}onModelContentChange(){this.isTriggered&&this.trigger({triggerKind:a.WA.ContentChange})}onEditorConfigurationChange(){this.triggerOnType=this.editor.getOption(86).enabled,this.triggerOnType||this.cancel()}dispose(){this.cancel(!0),super.dispose()}}function w(e,t){switch(t.triggerKind){case a.WA.Invoke:return t;case a.WA.ContentChange:return e;case a.WA.TriggerCharacter:default:return t}}k.DEFAULT_DELAY=120;var N,x=i(51413),R=i(39263),M=i(32605),I=i(82224),E=i(89067),L=i(21030),P=i(12780),F=i(63970),D=i(14564),W=i(2531),T=i(63573),A=i(85514),O=i(70145),H=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},B=function(e,t){return function(i,s){t(i,s,e)}};const V=M.$,j=(0,A.pU)("parameter-hints-next",L.W.chevronDown,x.kg("parameterHintsNextIcon","Icon for show next parameter hint.")),Q=(0,A.pU)("parameter-hints-previous",L.W.chevronUp,x.kg("parameterHintsPreviousIcon","Icon for show previous parameter hint."));let G=N=class extends n.jG{constructor(e,t,i,s,o){super(),this.editor=e,this.model=t,this.renderDisposeables=this._register(new n.Cm),this.visible=!1,this.announcedLabel=null,this.allowEditorOverflow=!0,this.markdownRenderer=this._register(new D.T({editor:e},o,s)),this.keyVisible=C.Visible.bindTo(i),this.keyMultipleSignatures=C.MultipleSignatures.bindTo(i)}createParameterHintDOMNodes(){const e=V(".editor-widget.parameter-hints-widget"),t=M.BC(e,V(".phwrapper"));t.tabIndex=-1;const i=M.BC(t,V(".controls")),s=M.BC(i,V(".button"+O.L.asCSSSelector(Q))),n=M.BC(i,V(".overloads")),o=M.BC(i,V(".button"+O.L.asCSSSelector(j)));this._register(M.ko(s,"click",(e=>{M.fs.stop(e),this.previous()}))),this._register(M.ko(o,"click",(e=>{M.fs.stop(e),this.next()})));const r=V(".body"),a=new E.MU(r,{alwaysConsumeMouseWheel:!0});this._register(a),t.appendChild(a.getDomNode());const d=M.BC(r,V(".signature")),l=M.BC(r,V(".docs"));e.style.userSelect="text",this.domNodes={element:e,signature:d,overloads:n,docs:l,scrollbar:a},this.editor.addContentWidget(this),this.hide(),this._register(this.editor.onDidChangeCursorSelection((e=>{this.visible&&this.editor.layoutContentWidget(this)})));const c=()=>{if(!this.domNodes)return;const e=this.editor.getOption(50);this.domNodes.element.style.fontSize="".concat(e.fontSize,"px"),this.domNodes.element.style.lineHeight="".concat(e.lineHeight/e.fontSize)};c(),this._register(h.Jh.chain(this.editor.onDidChangeConfiguration.bind(this.editor),(e=>e.filter((e=>e.hasChanged(50)))))(c)),this._register(this.editor.onDidLayoutChange((e=>this.updateMaxHeight()))),this.updateMaxHeight()}show(){this.visible||(this.domNodes||this.createParameterHintDOMNodes(),this.keyVisible.set(!0),this.visible=!0,setTimeout((()=>{var e;null===(e=this.domNodes)||void 0===e||e.element.classList.add("visible")}),100),this.editor.layoutContentWidget(this))}hide(){var e;this.renderDisposeables.clear(),this.visible&&(this.keyVisible.reset(),this.visible=!1,this.announcedLabel=null,null===(e=this.domNodes)||void 0===e||e.element.classList.remove("visible"),this.editor.layoutContentWidget(this))}getPosition(){return this.visible?{position:this.editor.getPosition(),preference:[1,2]}:null}render(e){var t;if(this.renderDisposeables.clear(),!this.domNodes)return;const i=e.signatures.length>1;this.domNodes.element.classList.toggle("multiple",i),this.keyMultipleSignatures.set(i),this.domNodes.signature.innerText="",this.domNodes.docs.innerText="";const s=e.signatures[e.activeSignature];if(!s)return;const n=M.BC(this.domNodes.signature,V(".code")),o=this.editor.getOption(50);n.style.fontSize="".concat(o.fontSize,"px"),n.style.fontFamily=o.fontFamily;const r=s.parameters.length>0,a=null!==(t=s.activeParameter)&&void 0!==t?t:e.activeParameter;if(r)this.renderParameters(n,s,a);else{M.BC(n,V("span")).textContent=s.label}const d=s.parameters[a];if(null===d||void 0===d?void 0:d.documentation){const e=V("span.documentation");if("string"===typeof d.documentation)e.textContent=d.documentation;else{const t=this.renderMarkdownDocs(d.documentation);e.appendChild(t.element)}M.BC(this.domNodes.docs,V("p",{},e))}if(void 0===s.documentation);else if("string"===typeof s.documentation)M.BC(this.domNodes.docs,V("p",{},s.documentation));else{const e=this.renderMarkdownDocs(s.documentation);M.BC(this.domNodes.docs,e.element)}const l=this.hasDocs(s,d);if(this.domNodes.signature.classList.toggle("has-docs",l),this.domNodes.docs.classList.toggle("empty",!l),this.domNodes.overloads.textContent=String(e.activeSignature+1).padStart(e.signatures.length.toString().length,"0")+"/"+e.signatures.length,d){let e="";const t=s.parameters[a];e=Array.isArray(t.label)?s.label.substring(t.label[0],t.label[1]):t.label,t.documentation&&(e+="string"===typeof t.documentation?", ".concat(t.documentation):", ".concat(t.documentation.value)),s.documentation&&(e+="string"===typeof s.documentation?", ".concat(s.documentation):", ".concat(s.documentation.value)),this.announcedLabel!==e&&(I.xE(x.kg("hint","{0}, hint",e)),this.announcedLabel=e)}this.editor.layoutContentWidget(this),this.domNodes.scrollbar.scanDomNode()}renderMarkdownDocs(e){const t=this.renderDisposeables.add(this.markdownRenderer.render(e,{asyncRenderCallback:()=>{var e;null===(e=this.domNodes)||void 0===e||e.scrollbar.scanDomNode()}}));return t.element.classList.add("markdown-docs"),t}hasDocs(e,t){return!!(t&&"string"===typeof t.documentation&&(0,p.eU)(t.documentation).length>0)||(!!(t&&"object"===typeof t.documentation&&(0,p.eU)(t.documentation).value.length>0)||(!!(e.documentation&&"string"===typeof e.documentation&&(0,p.eU)(e.documentation).length>0)||!!(e.documentation&&"object"===typeof e.documentation&&(0,p.eU)(e.documentation.value).length>0)))}renderParameters(e,t,i){const[s,n]=this.getParameterLabelOffsets(t,i),o=document.createElement("span");o.textContent=t.label.substring(0,s);const r=document.createElement("span");r.textContent=t.label.substring(s,n),r.className="parameter active";const a=document.createElement("span");a.textContent=t.label.substring(n),M.BC(e,o,r,a)}getParameterLabelOffsets(e,t){const i=e.parameters[t];if(i){if(Array.isArray(i.label))return i.label;if(i.label.length){const t=new RegExp("(\\W|^)".concat((0,P.bm)(i.label),"(?=\\W|$)"),"g");t.test(e.label);const s=t.lastIndex-i.label.length;return s>=0?[s,t.lastIndex]:[0,0]}return[0,0]}return[0,0]}next(){this.editor.focus(),this.model.next()}previous(){this.editor.focus(),this.model.previous()}getDomNode(){return this.domNodes||this.createParameterHintDOMNodes(),this.domNodes.element}getId(){return N.ID}updateMaxHeight(){if(!this.domNodes)return;const e=Math.max(this.editor.getLayoutInfo().height/4,250),t="".concat(e,"px");this.domNodes.element.style.maxHeight=t;const i=this.domNodes.element.getElementsByClassName("phwrapper");i.length&&(i[0].style.maxHeight=t)}};G.ID="editor.widget.parameterHintsWidget",G=N=H([B(2,b.fN),B(3,W.C),B(4,F.L)],G),(0,T.x1A)("editorHoverWidget.highlightForeground",{dark:T.QI5,light:T.QI5,hcDark:T.QI5,hcLight:T.QI5},x.kg("editorHoverWidgetHighlightForeground","Foreground color of the active item in the parameter hint."));var q,K=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},U=function(e,t){return function(i,s){t(i,s,e)}};let z=q=class extends n.jG{static get(e){return e.getContribution(q.ID)}constructor(e,t,i){super(),this.editor=e,this.model=this._register(new k(e,i.signatureHelpProvider)),this._register(this.model.onChangedHints((e=>{var t;e?(this.widget.value.show(),this.widget.value.render(e)):null===(t=this.widget.rawValue)||void 0===t||t.hide()}))),this.widget=new s.d((()=>this._register(t.createInstance(G,this.editor,this.model))))}cancel(){this.model.cancel()}previous(){var e;null===(e=this.widget.rawValue)||void 0===e||e.previous()}next(){var e;null===(e=this.widget.rawValue)||void 0===e||e.next()}trigger(e){this.model.trigger(e,0)}};z.ID="editor.controller.parameterHints",z=q=K([U(1,R._Y),U(2,d.u)],z);class $ extends o.ks{constructor(){super({id:"editor.action.triggerParameterHints",label:x.kg("parameterHints.trigger.label","Trigger Parameter Hints"),alias:"Trigger Parameter Hints",precondition:r.R.hasSignatureHelpProvider,kbOpts:{kbExpr:r.R.editorTextFocus,primary:3082,weight:100}})}run(e,t){const i=z.get(t);null===i||void 0===i||i.trigger({triggerKind:a.WA.Invoke})}}(0,o.HW)(z.ID,z,2),(0,o.Fl)($);const X=o.DX.bindToContribution(z.get);(0,o.E_)(new X({id:"closeParameterHints",precondition:C.Visible,handler:e=>e.cancel(),kbOpts:{weight:175,kbExpr:r.R.focus,primary:9,secondary:[1033]}})),(0,o.E_)(new X({id:"showPrevParameterHint",precondition:b.M$.and(C.Visible,C.MultipleSignatures),handler:e=>e.previous(),kbOpts:{weight:175,kbExpr:r.R.focus,primary:16,secondary:[528],mac:{primary:16,secondary:[528,302]}}})),(0,o.E_)(new X({id:"showNextParameterHint",precondition:b.M$.and(C.Visible,C.MultipleSignatures),handler:e=>e.next(),kbOpts:{weight:175,kbExpr:r.R.focus,primary:18,secondary:[530],mac:{primary:18,secondary:[530,300]}}}))},78472:(e,t,i)=>{i.d(t,{zn:()=>k,x2:()=>w,j6:()=>M,RL:()=>x,zl:()=>P,n6:()=>F,z0:()=>I,_X:()=>E,e3:()=>L});var s=i(32605),n=i(97567),o=i(63169),r=i(21030),a=i(70145),d=i(57397),l=i(48250),c=i(28826),h=i(30050),u=i(32101),g=i(60633),p=i(53878),m=i(51413),_=i(53073),v=i(39686),f=i(42502),b=i(39263),C=i(63573),y=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},S=function(e,t){return function(i,s){t(i,s,e)}};const k=(0,b.u1)("IPeekViewService");var w;(0,f.v)(k,class{constructor(){this._widgets=new Map}addExclusiveWidget(e,t){const i=this._widgets.get(e);i&&(i.listener.dispose(),i.widget.dispose());this._widgets.set(e,{widget:t,listener:t.onDidClose((()=>{const i=this._widgets.get(e);i&&i.widget===t&&(i.listener.dispose(),this._widgets.delete(e))}))})}},1),function(e){e.inPeekEditor=new v.N1("inReferenceSearchEditor",!0,m.kg("inReferenceSearchEditor","Whether the current code editor is embedded inside peek")),e.notInPeekEditor=e.inPeekEditor.toNegated()}(w||(w={}));let N=class{constructor(e,t){e instanceof g.t&&w.inPeekEditor.bindTo(t)}dispose(){}};function x(e){const t=e.get(u.T).getFocusedCodeEditor();return t instanceof g.t?t.getParentEditor():t}N.ID="editor.contrib.referenceController",N=y([S(1,v.fN)],N),(0,h.HW)(N.ID,N,0);const R={headerBackgroundColor:d.Q1.white,primaryHeadingColor:d.Q1.fromHex("#333333"),secondaryHeadingColor:d.Q1.fromHex("#6c6c6cb3")};let M=class extends p.P{constructor(e,t,i){super(e,t),this.instantiationService=i,this._onDidClose=new l.vl,this.onDidClose=this._onDidClose.event,c.co(this.options,R,!1)}dispose(){this.disposed||(this.disposed=!0,super.dispose(),this._onDidClose.fire(this))}style(e){const t=this.options;e.headerBackgroundColor&&(t.headerBackgroundColor=e.headerBackgroundColor),e.primaryHeadingColor&&(t.primaryHeadingColor=e.primaryHeadingColor),e.secondaryHeadingColor&&(t.secondaryHeadingColor=e.secondaryHeadingColor),super.style(e)}_applyStyles(){super._applyStyles();const e=this.options;this._headElement&&e.headerBackgroundColor&&(this._headElement.style.backgroundColor=e.headerBackgroundColor.toString()),this._primaryHeading&&e.primaryHeadingColor&&(this._primaryHeading.style.color=e.primaryHeadingColor.toString()),this._secondaryHeading&&e.secondaryHeadingColor&&(this._secondaryHeading.style.color=e.secondaryHeadingColor.toString()),this._bodyElement&&e.frameColor&&(this._bodyElement.style.borderColor=e.frameColor.toString())}_fillContainer(e){this.setCssClass("peekview-widget"),this._headElement=s.$(".head"),this._bodyElement=s.$(".body"),this._fillHead(this._headElement),this._fillBody(this._bodyElement),e.appendChild(this._headElement),e.appendChild(this._bodyElement)}_fillHead(e,t){this._titleElement=s.$(".peekview-title"),this.options.supportOnTitleClick&&(this._titleElement.classList.add("clickable"),s.b2(this._titleElement,"click",(e=>this._onTitleClick(e)))),s.BC(this._headElement,this._titleElement),this._fillTitleIcon(this._titleElement),this._primaryHeading=s.$("span.filename"),this._secondaryHeading=s.$("span.dirname"),this._metaHeading=s.$("span.meta"),s.BC(this._titleElement,this._primaryHeading,this._secondaryHeading,this._metaHeading);const i=s.$(".peekview-actions");s.BC(this._headElement,i);const d=this._getActionBarOptions();this._actionbarWidget=new n.E(i,d),this._disposables.add(this._actionbarWidget),t||this._actionbarWidget.push(new o.rc("peekview.close",m.kg("label.close","Close"),a.L.asClassName(r.W.close),!0,(()=>(this.dispose(),Promise.resolve()))),{label:!1,icon:!0})}_fillTitleIcon(e){}_getActionBarOptions(){return{actionViewItemProvider:_.rN.bind(void 0,this.instantiationService),orientation:0}}_onTitleClick(e){}setTitle(e,t){this._primaryHeading&&this._secondaryHeading&&(this._primaryHeading.innerText=e,this._primaryHeading.setAttribute("title",e),t?this._secondaryHeading.innerText=t:s.w_(this._secondaryHeading))}setMetaTitle(e){this._metaHeading&&(e?(this._metaHeading.innerText=e,s.WU(this._metaHeading)):s.jD(this._metaHeading))}_doLayout(e,t){if(!this._isShowing&&e<0)return void this.dispose();const i=Math.ceil(1.2*this.editor.getOption(67)),s=Math.round(e-(i+2));this._doLayoutHead(i,t),this._doLayoutBody(s,t)}_doLayoutHead(e,t){this._headElement&&(this._headElement.style.height="".concat(e,"px"),this._headElement.style.lineHeight=this._headElement.style.height)}_doLayoutBody(e,t){this._bodyElement&&(this._bodyElement.style.height="".concat(e,"px"))}};M=y([S(2,b._Y)],M);const I=(0,C.x1A)("peekViewTitle.background",{dark:"#252526",light:"#F3F3F3",hcDark:d.Q1.black,hcLight:d.Q1.white},m.kg("peekViewTitleBackground","Background color of the peek view title area.")),E=(0,C.x1A)("peekViewTitleLabel.foreground",{dark:d.Q1.white,light:d.Q1.black,hcDark:d.Q1.white,hcLight:C.By2},m.kg("peekViewTitleForeground","Color of the peek view title.")),L=(0,C.x1A)("peekViewTitleDescription.foreground",{dark:"#ccccccb3",light:"#616161",hcDark:"#FFFFFF99",hcLight:"#292929"},m.kg("peekViewTitleInfoForeground","Color of the peek view title info.")),P=(0,C.x1A)("peekView.border",{dark:C.pOz,light:C.pOz,hcDark:C.b1q,hcLight:C.b1q},m.kg("peekViewBorder","Color of the peek view borders and arrow.")),F=(0,C.x1A)("peekViewResult.background",{dark:"#252526",light:"#F3F3F3",hcDark:d.Q1.black,hcLight:d.Q1.white},m.kg("peekViewResultsBackground","Background color of the peek view result list.")),D=((0,C.x1A)("peekViewResult.lineForeground",{dark:"#bbbbbb",light:"#646465",hcDark:d.Q1.white,hcLight:C.By2},m.kg("peekViewResultsMatchForeground","Foreground color for line nodes in the peek view result list.")),(0,C.x1A)("peekViewResult.fileForeground",{dark:d.Q1.white,light:"#1E1E1E",hcDark:d.Q1.white,hcLight:C.By2},m.kg("peekViewResultsFileForeground","Foreground color for file nodes in the peek view result list.")),(0,C.x1A)("peekViewResult.selectionBackground",{dark:"#3399ff33",light:"#3399ff33",hcDark:null,hcLight:null},m.kg("peekViewResultsSelectionBackground","Background color of the selected entry in the peek view result list.")),(0,C.x1A)("peekViewResult.selectionForeground",{dark:d.Q1.white,light:"#6C6C6C",hcDark:d.Q1.white,hcLight:C.By2},m.kg("peekViewResultsSelectionForeground","Foreground color of the selected entry in the peek view result list.")),(0,C.x1A)("peekViewEditor.background",{dark:"#001F33",light:"#F2F8FC",hcDark:d.Q1.black,hcLight:d.Q1.white},m.kg("peekViewEditorBackground","Background color of the peek view editor.")));(0,C.x1A)("peekViewEditorGutter.background",{dark:D,light:D,hcDark:D,hcLight:D},m.kg("peekViewEditorGutterBackground","Background color of the gutter in the peek view editor.")),(0,C.x1A)("peekViewEditorStickyScroll.background",{dark:D,light:D,hcDark:D,hcLight:D},m.kg("peekViewEditorStickScrollBackground","Background color of sticky scroll in the peek view editor.")),(0,C.x1A)("peekViewResult.matchHighlightBackground",{dark:"#ea5c004d",light:"#ea5c004d",hcDark:null,hcLight:null},m.kg("peekViewResultsMatchHighlight","Match highlight color in the peek view result list.")),(0,C.x1A)("peekViewEditor.matchHighlightBackground",{dark:"#ff8f0099",light:"#f5d802de",hcDark:null,hcLight:null},m.kg("peekViewEditorMatchHighlight","Match highlight color in the peek view editor.")),(0,C.x1A)("peekViewEditor.matchHighlightBorder",{dark:null,light:null,hcDark:C.buw,hcLight:C.buw},m.kg("peekViewEditorMatchHighlightBorder","Match highlight border in the peek view editor."))},69266:(e,t,i)=>{i.d(t,{C:()=>r});var s=i(30546),n=i(61847),o=i(18313);class r extends o.l{constructor(e,t,i,s,n,o){super(e,t,i,s,n,o)}getCodeEditorCommandPicks(){var e;const t=this.activeTextEditorControl;if(!t)return[];const i=[];for(const o of t.getSupportedActions()){let t;(null===(e=o.metadata)||void 0===e?void 0:e.description)&&(t=(0,n.f)(o.metadata.description)?o.metadata.description:{original:o.metadata.description,value:o.metadata.description}),i.push({commandId:o.id,commandAlias:o.alias,commandDescription:t,label:(0,s.pS)(o.label)||o.id})}return i}}},82461:(e,t,i)=>{i.d(t,{o:()=>c});var s=i(5729),n=i(87766),o=i(98702),r=i(32743),a=i(16871),d=i(19700),l=i(82224);class c{constructor(e){this.options=e,this.rangeHighlightDecorationId=void 0}provide(e,t){var i;const s=new n.Cm;e.canAcceptInBackground=!!(null===(i=this.options)||void 0===i?void 0:i.canAcceptInBackground),e.matchOnLabel=e.matchOnDescription=e.matchOnDetail=e.sortByLabel=!1;const o=s.add(new n.HE);return o.value=this.doProvide(e,t),s.add(this.onDidActiveTextEditorControlChange((()=>{o.value=void 0,o.value=this.doProvide(e,t)}))),s}doProvide(e,t){var i;const r=new n.Cm,a=this.activeTextEditorControl;if(a&&this.canProvideWithTextEditor(a)){const d={editor:a},l=(0,o.jA)(a);if(l){let e=null!==(i=a.saveViewState())&&void 0!==i?i:void 0;r.add(l.onDidChangeCursorPosition((()=>{var t;e=null!==(t=a.saveViewState())&&void 0!==t?t:void 0}))),d.restoreViewState=()=>{e&&a===this.activeTextEditorControl&&a.restoreViewState(e)},r.add((0,s.P)(t.onCancellationRequested)((()=>{var e;return null===(e=d.restoreViewState)||void 0===e?void 0:e.call(d)})))}r.add((0,n.s)((()=>this.clearDecorations(a)))),r.add(this.provideWithTextEditor(d,e,t))}else r.add(this.provideWithoutTextEditor(e,t));return r}canProvideWithTextEditor(e){return!0}gotoLocation(e,t){let{editor:i}=e;i.setSelection(t.range,"code.jump"),i.revealRangeInCenter(t.range,0),t.preserveFocus||i.focus();const s=i.getModel();s&&"getLineContent"in s&&(0,l.h5)("".concat(s.getLineContent(t.range.startLineNumber)))}getModel(e){var t;return(0,o.Np)(e)?null===(t=e.getModel())||void 0===t?void 0:t.modified:e.getModel()}addDecorations(e,t){e.changeDecorations((e=>{const i=[];this.rangeHighlightDecorationId&&(i.push(this.rangeHighlightDecorationId.overviewRulerDecorationId),i.push(this.rangeHighlightDecorationId.rangeHighlightId),this.rangeHighlightDecorationId=void 0);const s=[{range:t,options:{description:"quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"quick-access-range-highlight-overview",overviewRuler:{color:(0,d.Yf)(a.vp),position:r.A5.Full}}}],[n,o]=e.deltaDecorations(i,s);this.rangeHighlightDecorationId={rangeHighlightId:n,overviewRulerDecorationId:o}}))}clearDecorations(e){const t=this.rangeHighlightDecorationId;t&&(e.changeDecorations((e=>{e.deltaDecorations([t.overviewRulerDecorationId,t.rangeHighlightId],[])})),this.rangeHighlightDecorationId=void 0)}}},25179:(e,t,i)=>{i.d(t,{o:()=>a});var s=i(87766),n=i(98702),o=i(82461),r=i(51413);class a extends o.o{constructor(){super({canAcceptInBackground:!0})}provideWithoutTextEditor(e){const t=(0,r.kg)("cannotRunGotoLine","Open a text editor first to go to a line.");return e.items=[{label:t}],e.ariaLabel=t,s.jG.None}provideWithTextEditor(e,t,i){const o=e.editor,r=new s.Cm;r.add(t.onDidAccept((i=>{const[s]=t.selectedItems;if(s){if(!this.isValidLineNumber(o,s.lineNumber))return;this.gotoLocation(e,{range:this.toRange(s.lineNumber,s.column),keyMods:t.keyMods,preserveFocus:i.inBackground}),i.inBackground||t.hide()}})));const d=()=>{const e=this.parsePosition(o,t.value.trim().substr(a.PREFIX.length)),i=this.getPickLabel(o,e.lineNumber,e.column);if(t.items=[{lineNumber:e.lineNumber,column:e.column,label:i}],t.ariaLabel=i,!this.isValidLineNumber(o,e.lineNumber))return void this.clearDecorations(o);const s=this.toRange(e.lineNumber,e.column);o.revealRangeInCenter(s,0),this.addDecorations(o,s)};d(),r.add(t.onDidChangeValue((()=>d())));const l=(0,n.jA)(o);if(l){2===l.getOptions().get(68).renderType&&(l.updateOptions({lineNumbers:"on"}),r.add((0,s.s)((()=>l.updateOptions({lineNumbers:"relative"})))))}return r}toRange(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return{startLineNumber:e,startColumn:t,endLineNumber:e,endColumn:t}}parsePosition(e,t){const i=t.split(/,|:|#/).map((e=>parseInt(e,10))).filter((e=>!isNaN(e))),s=this.lineCount(e)+1;return{lineNumber:i[0]>0?i[0]:s+i[0],column:i[1]}}getPickLabel(e,t,i){if(this.isValidLineNumber(e,t))return this.isValidColumn(e,t,i)?(0,r.kg)("gotoLineColumnLabel","Go to line {0} and character {1}.",t,i):(0,r.kg)("gotoLineLabel","Go to line {0}.",t);const s=e.getPosition()||{lineNumber:1,column:1},n=this.lineCount(e);return n>1?(0,r.kg)("gotoLineLabelEmptyWithLimit","Current Line: {0}, Character: {1}. Type a line number between 1 and {2} to navigate to.",s.lineNumber,s.column,n):(0,r.kg)("gotoLineLabelEmpty","Current Line: {0}, Character: {1}. Type a line number to navigate to.",s.lineNumber,s.column)}isValidLineNumber(e,t){return!(!t||"number"!==typeof t)&&(t>0&&t<=this.lineCount(e))}isValidColumn(e,t,i){if(!i||"number"!==typeof i)return!1;const s=this.getModel(e);if(!s)return!1;const n={lineNumber:t,column:i};return s.validatePosition(n).equals(n)}lineCount(e){var t,i;return null!==(i=null===(t=this.getModel(e))||void 0===t?void 0:t.getLineCount())&&void 0!==i?i:0}}a.PREFIX=":"},38405:(e,t,i)=>{i.d(t,{O:()=>C});var s,n=i(73990),o=i(25143),r=i(21030),a=i(70145),d=i(76002),l=i(87766),c=i(12780),h=i(99005),u=i(91861),g=i(28247),p=i(82461),m=i(51413),_=i(63910),v=i(21457),f=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},b=function(e,t){return function(i,s){t(i,s,e)}};let C=s=class extends p.o{constructor(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Object.create(null);super(i),this._languageFeaturesService=e,this._outlineModelService=t,this.options=i,this.options.canAcceptInBackground=!0}provideWithoutTextEditor(e){return this.provideLabelPick(e,(0,m.kg)("cannotRunGotoSymbolWithoutEditor","To go to a symbol, first open a text editor with symbol information.")),l.jG.None}provideWithTextEditor(e,t,i){const s=e.editor,n=this.getModel(s);return n?this._languageFeaturesService.documentSymbolProvider.has(n)?this.doProvideWithEditorSymbols(e,n,t,i):this.doProvideWithoutEditorSymbols(e,n,t,i):l.jG.None}doProvideWithoutEditorSymbols(e,t,i,s){const n=new l.Cm;return this.provideLabelPick(i,(0,m.kg)("cannotRunGotoSymbolWithoutSymbolProvider","The active text editor does not provide symbol information.")),(async()=>{await this.waitForLanguageSymbolRegistry(t,n)&&!s.isCancellationRequested&&n.add(this.doProvideWithEditorSymbols(e,t,i,s))})(),n}provideLabelPick(e,t){e.items=[{label:t,index:0,kind:14}],e.ariaLabel=t}async waitForLanguageSymbolRegistry(e,t){if(this._languageFeaturesService.documentSymbolProvider.has(e))return!0;const i=new n.Zv,s=t.add(this._languageFeaturesService.documentSymbolProvider.onDidChange((()=>{this._languageFeaturesService.documentSymbolProvider.has(e)&&(s.dispose(),i.complete(!0))})));return t.add((0,l.s)((()=>i.complete(!1)))),i.p}doProvideWithEditorSymbols(e,t,i,n){var r;const a=e.editor,c=new l.Cm;c.add(i.onDidAccept((t=>{const[s]=i.selectedItems;s&&s.range&&(this.gotoLocation(e,{range:s.range.selection,keyMods:i.keyMods,preserveFocus:t.inBackground}),t.inBackground||i.hide())}))),c.add(i.onDidTriggerItemButton((t=>{let{item:s}=t;s&&s.range&&(this.gotoLocation(e,{range:s.range.selection,keyMods:i.keyMods,forceSideBySide:!0}),i.hide())})));const u=this.getDocumentSymbols(t,n);let g;const p=async e=>{null===g||void 0===g||g.dispose(!0),i.busy=!1,g=new o.Qi(n),i.busy=!0;try{const t=(0,d.Ib)(i.value.substr(s.PREFIX.length).trim()),o=await this.doGetSymbolPicks(u,t,void 0,g.token);if(n.isCancellationRequested)return;if(o.length>0){if(i.items=o,e&&0===t.original.length){const t=(0,v.Uk)(o,(t=>Boolean("separator"!==t.type&&t.range&&h.Q.containsPosition(t.range.decoration,e))));t&&(i.activeItems=[t])}}else t.original.length>0?this.provideLabelPick(i,(0,m.kg)("noMatchingSymbolResults","No matching editor symbols")):this.provideLabelPick(i,(0,m.kg)("noSymbolResults","No editor symbols"))}finally{n.isCancellationRequested||(i.busy=!1)}};return c.add(i.onDidChangeValue((()=>p(void 0)))),p(null===(r=a.getSelection())||void 0===r?void 0:r.getPosition()),c.add(i.onDidChangeActive((()=>{const[e]=i.activeItems;e&&e.range&&(a.revealRangeInCenter(e.range.selection,0),this.addDecorations(a,e.range.decoration))}))),c}async doGetSymbolPicks(e,t,i,n){var o,l;const g=await e;if(n.isCancellationRequested)return[];const p=0===t.original.indexOf(s.SCOPE_PREFIX),_=p?1:0;let v,f,b;t.values&&t.values.length>1?(v=(0,d.AH)(t.values[0]),f=(0,d.AH)(t.values.slice(1))):v=t;const C=null===(l=null===(o=this.options)||void 0===o?void 0:o.openSideBySideDirection)||void 0===l?void 0:l.call(o);C&&(b=[{iconClass:"right"===C?a.L.asClassName(r.W.splitHorizontal):a.L.asClassName(r.W.splitVertical),tooltip:"right"===C?(0,m.kg)("openToSide","Open to the Side"):(0,m.kg)("openToBottom","Open to the Bottom")}]);const k=[];for(let x=0;x<g.length;x++){const R=g[x],M=(0,c.Bq)(R.name),I="$(".concat(u.gP.toIcon(R.kind).id,") ").concat(M),E=I.length-M.length;let L,P,F,D,W=R.containerName;if((null===i||void 0===i?void 0:i.extraContainerLabel)&&(W=W?"".concat(i.extraContainerLabel," \u2022 ").concat(W):i.extraContainerLabel),t.original.length>_){let A=!1;if(v!==t&&([L,P]=(0,d.nw)(I,{...t,values:void 0},_,E),"number"===typeof L&&(A=!0)),"number"!==typeof L&&([L,P]=(0,d.nw)(I,v,_,E),"number"!==typeof L))continue;if(!A&&f){if(W&&f.original.length>0&&([F,D]=(0,d.nw)(W,f)),"number"!==typeof F)continue;"number"===typeof L&&(L+=F)}}const T=R.tags&&R.tags.indexOf(1)>=0;k.push({index:x,kind:R.kind,score:L,label:I,ariaLabel:(0,u.PK)(R.name,R.kind),description:W,highlights:T?void 0:{label:P,description:D},range:{selection:h.Q.collapseToStart(R.selectionRange),decoration:R.range},strikethrough:T,buttons:b})}const w=k.sort(((e,t)=>p?this.compareByKindAndScore(e,t):this.compareByScore(e,t)));let N=[];if(p){let O,H,B=0;function V(){H&&"number"===typeof O&&B>0&&(H.label=(0,c.GP)(S[O]||y,B))}for(const j of w)O!==j.kind?(V(),O=j.kind,B=1,H={type:"separator"},N.push(H)):B++,N.push(j);V()}else w.length>0&&(N=[{label:(0,m.kg)("symbols","symbols ({0})",k.length),type:"separator"},...w]);return N}compareByScore(e,t){if("number"!==typeof e.score&&"number"===typeof t.score)return 1;if("number"===typeof e.score&&"number"!==typeof t.score)return-1;if("number"===typeof e.score&&"number"===typeof t.score){if(e.score>t.score)return-1;if(e.score<t.score)return 1}return e.index<t.index?-1:e.index>t.index?1:0}compareByKindAndScore(e,t){const i=S[e.kind]||y,s=S[t.kind]||y,n=i.localeCompare(s);return 0===n?this.compareByScore(e,t):n}async getDocumentSymbols(e,t){const i=await this._outlineModelService.getOrCreate(e,t);return t.isCancellationRequested?[]:i.asListOfDocumentSymbols()}};C.PREFIX="@",C.SCOPE_PREFIX=":",C.PREFIX_BY_CATEGORY="".concat(s.PREFIX).concat(s.SCOPE_PREFIX),C=s=f([b(0,_.u),b(1,g.gW)],C);const y=(0,m.kg)("property","properties ({0})"),S={5:(0,m.kg)("method","methods ({0})"),11:(0,m.kg)("function","functions ({0})"),8:(0,m.kg)("_constructor","constructors ({0})"),12:(0,m.kg)("variable","variables ({0})"),4:(0,m.kg)("class","classes ({0})"),22:(0,m.kg)("struct","structs ({0})"),23:(0,m.kg)("event","events ({0})"),24:(0,m.kg)("operator","operators ({0})"),10:(0,m.kg)("interface","interfaces ({0})"),2:(0,m.kg)("namespace","namespaces ({0})"),3:(0,m.kg)("package","packages ({0})"),25:(0,m.kg)("typeParameter","type parameters ({0})"),1:(0,m.kg)("modules","modules ({0})"),6:(0,m.kg)("property","properties ({0})"),9:(0,m.kg)("enum","enumerations ({0})"),21:(0,m.kg)("enumMember","enumeration members ({0})"),14:(0,m.kg)("string","strings ({0})"),0:(0,m.kg)("file","files ({0})"),17:(0,m.kg)("array","arrays ({0})"),15:(0,m.kg)("number","numbers ({0})"),16:(0,m.kg)("boolean","booleans ({0})"),18:(0,m.kg)("object","objects ({0})"),19:(0,m.kg)("key","keys ({0})"),7:(0,m.kg)("field","fields ({0})"),13:(0,m.kg)("constant","constants ({0})")}},19691:(e,t,i)=>{var s=i(58348),n=i(87766),o=i(30050),r=i(85521),a=i(51413);class d extends n.jG{constructor(e){super(),this.editor=e,this._register(this.editor.onDidAttemptReadOnlyEdit((()=>this._onDidAttemptReadOnlyEdit())))}_onDidAttemptReadOnlyEdit(){const e=r.k.get(this.editor);if(e&&this.editor.hasModel()){let t=this.editor.getOptions().get(92);t||(t=this.editor.isSimpleWidget?new s.Bc(a.kg("editor.simple.readonly","Cannot edit in read-only input")):new s.Bc(a.kg("editor.readonly","Cannot edit in read-only editor"))),e.showMessage(t,this.editor.getPosition())}}}d.ID="editor.contrib.readOnlyMessageController",(0,o.HW)(d.ID,d,2)},1124:(e,t,i)=>{var s=i(82224),n=i(73990),o=i(25143),r=i(29591),a=i(58348),d=i(87766),l=i(32031),c=i(97072),h=i(30050),u=i(59313),g=i(32101),p=i(23525),m=i(99005),_=i(72330),v=i(91861),f=i(63910),b=i(58432),C=i(39212),y=i(85521),S=i(51413),k=i(35155),w=i(9702),N=i(39686),x=i(39263),R=i(26505),M=i(39895),I=i(3607),E=i(31519),L=i(96819),P=i(32605),F=i(46250),D=i(13132),W=i(48128),T=i(58250),A=i(37155),O=i(61498),H=i(21030),B=i(48250),V=i(40997),j=i(30381),Q=i(16391),G=i(77942),q=i(63573),K=i(19700),U=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},z=function(e,t){return function(i,s){t(i,s,e)}};const $=new N.N1("renameInputVisible",!1,(0,S.kg)("renameInputVisible","Whether the rename input widget is visible"));new N.N1("renameInputFocused",!1,(0,S.kg)("renameInputFocused","Whether the rename input widget is focused"));let X=class{constructor(e,t,i,s,n,o){this._editor=e,this._acceptKeybindings=t,this._themeService=i,this._keybindingService=s,this._logService=o,this.allowEditorOverflow=!0,this._disposables=new d.Cm,this._visibleContextKey=$.bindTo(n),this._isEditingRenameCandidate=!1,this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,this._candidates=new Set,this._beforeFirstInputFieldEditSW=new V.W,this._inputWithButton=new J,this._disposables.add(this._inputWithButton),this._editor.addContentWidget(this),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(50)&&this._updateFont()}))),this._disposables.add(i.onDidColorThemeChange(this._updateStyles,this))}dispose(){this._disposables.dispose(),this._editor.removeContentWidget(this)}getId(){return"__renameInputWidget"}getDomNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="monaco-editor rename-box",this._domNode.appendChild(this._inputWithButton.domNode),this._renameCandidateListView=this._disposables.add(new Y(this._domNode,{fontInfo:this._editor.getOption(50),onFocusChange:e=>{this._inputWithButton.input.value=e,this._isEditingRenameCandidate=!1},onSelectionChange:()=>{this._isEditingRenameCandidate=!1,this.acceptInput(!1)}})),this._disposables.add(this._inputWithButton.onDidInputChange((()=>{var e,t,i,s;void 0!==(null===(e=this._renameCandidateListView)||void 0===e?void 0:e.focusedCandidate)&&(this._isEditingRenameCandidate=!0),null!==(t=this._timeBeforeFirstInputFieldEdit)&&void 0!==t||(this._timeBeforeFirstInputFieldEdit=this._beforeFirstInputFieldEditSW.elapsed()),!1===(null===(i=this._renameCandidateProvidersCts)||void 0===i?void 0:i.token.isCancellationRequested)&&this._renameCandidateProvidersCts.cancel(),null===(s=this._renameCandidateListView)||void 0===s||s.clearFocus()}))),this._label=document.createElement("div"),this._label.className="rename-label",this._domNode.appendChild(this._label),this._updateFont(),this._updateStyles(this._themeService.getColorTheme())),this._domNode}_updateStyles(e){var t,i,s,n,o;if(!this._domNode)return;const r=e.getColor(q.f9l),a=e.getColor(q.DSL);this._domNode.style.backgroundColor=String(null!==(t=e.getColor(q.CgL))&&void 0!==t?t:""),this._domNode.style.boxShadow=r?" 0 0 8px 2px ".concat(r):"",this._domNode.style.border=a?"1px solid ".concat(a):"",this._domNode.style.color=String(null!==(i=e.getColor(q.cws))&&void 0!==i?i:"");const d=e.getColor(q.Zgs);this._inputWithButton.domNode.style.backgroundColor=String(null!==(s=e.getColor(q.L4c))&&void 0!==s?s:""),this._inputWithButton.input.style.backgroundColor=String(null!==(n=e.getColor(q.L4c))&&void 0!==n?n:""),this._inputWithButton.domNode.style.borderWidth=d?"1px":"0px",this._inputWithButton.domNode.style.borderStyle=d?"solid":"none",this._inputWithButton.domNode.style.borderColor=null!==(o=null===d||void 0===d?void 0:d.toString())&&void 0!==o?o:"none"}_updateFont(){if(void 0===this._domNode)return;(0,l.j)(void 0!==this._label,"RenameWidget#_updateFont: _label must not be undefined given _domNode is defined"),this._editor.applyFontInfo(this._inputWithButton.input);const e=this._editor.getOption(50);this._label.style.fontSize="".concat(this._computeLabelFontSize(e.fontSize),"px")}_computeLabelFontSize(e){return.8*e}getPosition(){if(!this._visible)return null;if(!this._editor.hasModel()||!this._editor.getDomNode())return null;const e=P.tG(this.getDomNode().ownerDocument.body),t=P.BK(this._editor.getDomNode()),i=this._getTopForPosition();this._nPxAvailableAbove=i+t.top,this._nPxAvailableBelow=e.height-this._nPxAvailableAbove;const s=this._editor.getOption(67),{totalHeight:n}=Z.getLayoutInfo({lineHeight:s}),o=this._nPxAvailableBelow>6*n?[2,1]:[1,2];return{position:this._position,preference:o}}beforeRender(){var e,t;const[i,s]=this._acceptKeybindings;return this._label.innerText=(0,S.kg)({key:"label",comment:['placeholders are keybindings, e.g "F2 to Rename, Shift+F2 to Preview"']},"{0} to Rename, {1} to Preview",null===(e=this._keybindingService.lookupKeybinding(i))||void 0===e?void 0:e.getLabel(),null===(t=this._keybindingService.lookupKeybinding(s))||void 0===t?void 0:t.getLabel()),this._domNode.style.minWidth="200px",null}afterRender(e){if(this._trace("invoking afterRender, position: ",e?"not null":"null"),null===e)return void this.cancelInput(!0,"afterRender (because position is null)");if(!this._editor.hasModel()||!this._editor.getDomNode())return;(0,l.j)(this._renameCandidateListView),(0,l.j)(void 0!==this._nPxAvailableAbove),(0,l.j)(void 0!==this._nPxAvailableBelow);const t=P.OK(this._inputWithButton.domNode),i=P.OK(this._label);let s;s=2===e?this._nPxAvailableBelow:this._nPxAvailableAbove,this._renameCandidateListView.layout({height:s-i-t,width:P.Tr(this._inputWithButton.domNode)})}acceptInput(e){var t;this._trace("invoking acceptInput"),null===(t=this._currentAcceptInput)||void 0===t||t.call(this,e)}cancelInput(e,t){var i;this._trace("invoking cancelInput, caller: ".concat(t,", _currentCancelInput: ").concat(this._currentAcceptInput?"not undefined":"undefined")),null===(i=this._currentCancelInput)||void 0===i||i.call(this,e)}focusNextRenameSuggestion(){var e;(null===(e=this._renameCandidateListView)||void 0===e?void 0:e.focusNext())||(this._inputWithButton.input.value=this._currentName)}focusPreviousRenameSuggestion(){var e;(null===(e=this._renameCandidateListView)||void 0===e?void 0:e.focusPrevious())||(this._inputWithButton.input.value=this._currentName)}getInput(e,t,i,s,o){const{start:r,end:a}=this._getSelection(e,t);this._renameCts=o;const c=new d.Cm;this._nRenameSuggestionsInvocations=0,this._hadAutomaticRenameSuggestionsInvocation=!1,void 0===s?this._inputWithButton.button.style.display="none":(this._inputWithButton.button.style.display="flex",this._requestRenameCandidatesOnce=s,this._requestRenameCandidates(t,!1),c.add(P.ko(this._inputWithButton.button,"click",(()=>this._requestRenameCandidates(t,!0)))),c.add(P.ko(this._inputWithButton.button,P.Bx.KEY_DOWN,(e=>{const i=new F.Z(e);(i.equals(3)||i.equals(10))&&(i.stopPropagation(),i.preventDefault(),this._requestRenameCandidates(t,!0))})))),this._isEditingRenameCandidate=!1,this._domNode.classList.toggle("preview",i),this._position=new p.y(e.startLineNumber,e.startColumn),this._currentName=t,this._inputWithButton.input.value=t,this._inputWithButton.input.setAttribute("selectionStart",r.toString()),this._inputWithButton.input.setAttribute("selectionEnd",a.toString()),this._inputWithButton.input.size=Math.max(1.1*(e.endColumn-e.startColumn),20),this._beforeFirstInputFieldEditSW.reset(),c.add((0,d.s)((()=>{this._renameCts=void 0,o.dispose(!0)}))),c.add((0,d.s)((()=>{void 0!==this._renameCandidateProvidersCts&&(this._renameCandidateProvidersCts.dispose(!0),this._renameCandidateProvidersCts=void 0)}))),c.add((0,d.s)((()=>this._candidates.clear())));const h=new n.Zv;return h.p.finally((()=>{c.dispose(),this._hide()})),this._currentCancelInput=e=>{var t;return this._trace("invoking _currentCancelInput"),this._currentAcceptInput=void 0,this._currentCancelInput=void 0,null===(t=this._renameCandidateListView)||void 0===t||t.clearCandidates(),h.complete(e),!0},this._currentAcceptInput=e=>{this._trace("invoking _currentAcceptInput"),(0,l.j)(void 0!==this._renameCandidateListView);const s=this._renameCandidateListView.nCandidates;let n,o;const r=this._renameCandidateListView.focusedCandidate;void 0!==r?(this._trace("using new name from renameSuggestion"),n=r,o={k:"renameSuggestion"}):(this._trace("using new name from inputField"),n=this._inputWithButton.input.value,o=this._isEditingRenameCandidate?{k:"userEditedRenameSuggestion"}:{k:"inputField"}),n!==t&&0!==n.trim().length?(this._currentAcceptInput=void 0,this._currentCancelInput=void 0,this._renameCandidateListView.clearCandidates(),h.complete({newName:n,wantsPreview:i&&e,stats:{source:o,nRenameSuggestions:s,timeBeforeFirstInputFieldEdit:this._timeBeforeFirstInputFieldEdit,nRenameSuggestionsInvocations:this._nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:this._hadAutomaticRenameSuggestionsInvocation}})):this.cancelInput(!0,"_currentAcceptInput (because newName === value || newName.trim().length === 0)")},c.add(o.token.onCancellationRequested((()=>this.cancelInput(!0,"cts.token.onCancellationRequested")))),c.add(this._editor.onDidBlurEditorWidget((()=>{var e;return this.cancelInput(!(null===(e=this._domNode)||void 0===e?void 0:e.ownerDocument.hasFocus()),"editor.onDidBlurEditorWidget")}))),this._show(),h.p}_requestRenameCandidates(e,t){if(void 0!==this._requestRenameCandidatesOnce&&(void 0!==this._renameCandidateProvidersCts&&this._renameCandidateProvidersCts.dispose(!0),(0,l.j)(this._renameCts),"stop"!==this._inputWithButton.buttonState)){this._renameCandidateProvidersCts=new o.Qi;const i=t?v.YT.Invoke:v.YT.Automatic,s=this._requestRenameCandidatesOnce(i,this._renameCandidateProvidersCts.token);if(0===s.length)return void this._inputWithButton.setSparkleButton();t||(this._hadAutomaticRenameSuggestionsInvocation=!0),this._nRenameSuggestionsInvocations+=1,this._inputWithButton.setStopButton(),this._updateRenameCandidates(s,e,this._renameCts.token)}}_getSelection(e,t){(0,l.j)(this._editor.hasModel());const i=this._editor.getSelection();let s=0,n=t.length;return m.Q.isEmpty(i)||m.Q.spansMultipleLines(i)||!m.Q.containsRange(e,i)||(s=Math.max(0,i.startColumn-e.startColumn),n=Math.min(e.endColumn,i.endColumn)-e.startColumn),{start:s,end:n}}_show(){this._trace("invoking _show"),this._editor.revealLineInCenterIfOutsideViewport(this._position.lineNumber,0),this._visible=!0,this._visibleContextKey.set(!0),this._editor.layoutContentWidget(this),setTimeout((()=>{this._inputWithButton.input.focus(),this._inputWithButton.input.setSelectionRange(parseInt(this._inputWithButton.input.getAttribute("selectionStart")),parseInt(this._inputWithButton.input.getAttribute("selectionEnd")))}),100)}async _updateRenameCandidates(e,t,i){var s=this;const o=function(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];return s._trace("_updateRenameCandidates",...t)};o("start");const r=await(0,n.PK)(Promise.allSettled(e),i);if(this._inputWithButton.setSparkleButton(),void 0===r)return void o("returning early - received updateRenameCandidates results - undefined");const a=r.flatMap((e=>"fulfilled"===e.status&&(0,l.O9)(e.value)?e.value:[]));o("received updateRenameCandidates results - total (unfiltered) ".concat(a.length," candidates."));const d=O.dM(a,(e=>e.newSymbolName));o("distinct candidates - ".concat(d.length," candidates."));const c=d.filter((e=>{let{newSymbolName:i}=e;return i.trim().length>0&&i!==this._inputWithButton.input.value&&i!==t&&!this._candidates.has(i)}));o("valid distinct candidates - ".concat(a.length," candidates.")),c.forEach((e=>this._candidates.add(e.newSymbolName))),c.length<1?o("returning early - no valid distinct candidates"):(o("setting candidates"),this._renameCandidateListView.setCandidates(c),o("asking editor to re-layout"),this._editor.layoutContentWidget(this))}_hide(){this._trace("invoked _hide"),this._visible=!1,this._visibleContextKey.reset(),this._editor.layoutContentWidget(this)}_getTopForPosition(){const e=this._editor.getVisibleRanges();let t;return e.length>0?t=e[0].startLineNumber:(this._logService.warn("RenameWidget#_getTopForPosition: this should not happen - visibleRanges is empty"),t=Math.max(1,this._position.lineNumber-5)),this._editor.getTopForLineNumber(this._position.lineNumber)-this._editor.getTopForLineNumber(t)}_trace(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];this._logService.trace("RenameWidget",...t)}};X=U([z(2,K.Gy),z(3,Q.b),z(4,N.fN),z(5,R.rr)],X);class Y{constructor(e,t){this._disposables=new d.Cm,this._availableHeight=0,this._minimumWidth=0,this._lineHeight=t.fontInfo.lineHeight,this._typicalHalfwidthCharacterWidth=t.fontInfo.typicalHalfwidthCharacterWidth,this._listContainer=document.createElement("div"),this._listContainer.className="rename-box rename-candidate-list-container",e.appendChild(this._listContainer),this._listWidget=Y._createListWidget(this._listContainer,this._candidateViewHeight,t.fontInfo),this._listWidget.onDidChangeFocus((e=>{1===e.elements.length&&t.onFocusChange(e.elements[0].newSymbolName)}),this._disposables),this._listWidget.onDidChangeSelection((e=>{1===e.elements.length&&t.onSelectionChange()}),this._disposables),this._disposables.add(this._listWidget.onDidBlur((e=>{this._listWidget.setFocus([])}))),this._listWidget.style((0,G.t8)({listInactiveFocusForeground:q.nH,listInactiveFocusBackground:q.AlL}))}dispose(){this._listWidget.dispose(),this._disposables.dispose()}layout(e){let{height:t,width:i}=e;this._availableHeight=t,this._minimumWidth=i}setCandidates(e){this._listWidget.splice(0,0,e);const t=this._pickListHeight(this._listWidget.length),i=this._pickListWidth(e);this._listWidget.layout(t,i),this._listContainer.style.height="".concat(t,"px"),this._listContainer.style.width="".concat(i,"px"),s.h5((0,S.kg)("renameSuggestionsReceivedAria","Received {0} rename suggestions",e.length))}clearCandidates(){this._listContainer.style.height="0px",this._listContainer.style.width="0px",this._listWidget.splice(0,this._listWidget.length,[])}get nCandidates(){return this._listWidget.length}get focusedCandidate(){if(0===this._listWidget.length)return;const e=this._listWidget.getSelectedElements()[0];if(void 0!==e)return e.newSymbolName;const t=this._listWidget.getFocusedElements()[0];return void 0!==t?t.newSymbolName:void 0}focusNext(){if(0===this._listWidget.length)return!1;const e=this._listWidget.getFocus();if(0===e.length)return this._listWidget.focusFirst(),this._listWidget.reveal(0),!0;if(e[0]===this._listWidget.length-1)return this._listWidget.setFocus([]),this._listWidget.reveal(0),!1;{this._listWidget.focusNext();const e=this._listWidget.getFocus()[0];return this._listWidget.reveal(e),!0}}focusPrevious(){if(0===this._listWidget.length)return!1;const e=this._listWidget.getFocus();if(0===e.length){this._listWidget.focusLast();const e=this._listWidget.getFocus()[0];return this._listWidget.reveal(e),!0}if(0===e[0])return this._listWidget.setFocus([]),!1;{this._listWidget.focusPrevious();const e=this._listWidget.getFocus()[0];return this._listWidget.reveal(e),!0}}clearFocus(){this._listWidget.setFocus([])}get _candidateViewHeight(){const{totalHeight:e}=Z.getLayoutInfo({lineHeight:this._lineHeight});return e}_pickListHeight(e){const t=this._candidateViewHeight*e;return Math.min(t,this._availableHeight,7*this._candidateViewHeight)}_pickListWidth(e){const t=Math.ceil(Math.max(...e.map((e=>e.newSymbolName.length)))*this._typicalHalfwidthCharacterWidth);return Math.max(this._minimumWidth,25+t+10)}static _createListWidget(e,t,i){const s=new class{getTemplateId(e){return"candidate"}getHeight(e){return t}},n=new class{constructor(){this.templateId="candidate"}renderTemplate(e){return new Z(e,i)}renderElement(e,t,i){i.populate(e)}disposeTemplate(e){e.dispose()}};return new A.B8("NewSymbolNameCandidates",e,s,[n],{keyboardSupport:!1,mouseSupport:!0,multipleSelectionSupport:!1})}}class J{constructor(){this._onDidInputChange=new B.vl,this.onDidInputChange=this._onDidInputChange.event,this._disposables=new d.Cm}get domNode(){return this._domNode||(this._domNode=document.createElement("div"),this._domNode.className="rename-input-with-button",this._domNode.style.display="flex",this._domNode.style.flexDirection="row",this._domNode.style.alignItems="center",this._inputNode=document.createElement("input"),this._inputNode.className="rename-input",this._inputNode.type="text",this._inputNode.style.border="none",this._inputNode.setAttribute("aria-label",(0,S.kg)("renameAriaLabel","Rename input. Type new name and press Enter to commit.")),this._domNode.appendChild(this._inputNode),this._buttonNode=document.createElement("div"),this._buttonNode.className="rename-suggestions-button",this._buttonNode.setAttribute("tabindex","0"),this._buttonGenHoverText=S.kg("generateRenameSuggestionsButton","Generate new name suggestions"),this._buttonCancelHoverText=S.kg("cancelRenameSuggestionsButton","Cancel"),this._buttonHover=(0,D.i)().setupUpdatableHover((0,W.nZ)("element"),this._buttonNode,this._buttonGenHoverText),this._disposables.add(this._buttonHover),this._domNode.appendChild(this._buttonNode),this._disposables.add(P.ko(this.input,P.Bx.INPUT,(()=>this._onDidInputChange.fire()))),this._disposables.add(P.ko(this.input,P.Bx.KEY_DOWN,(e=>{const t=new F.Z(e);15!==t.keyCode&&17!==t.keyCode||this._onDidInputChange.fire()}))),this._disposables.add(P.ko(this.input,P.Bx.CLICK,(()=>this._onDidInputChange.fire()))),this._disposables.add(P.ko(this.input,P.Bx.FOCUS,(()=>{this.domNode.style.outlineWidth="1px",this.domNode.style.outlineStyle="solid",this.domNode.style.outlineOffset="-1px",this.domNode.style.outlineColor="var(--vscode-focusBorder)"}))),this._disposables.add(P.ko(this.input,P.Bx.BLUR,(()=>{this.domNode.style.outline="none"})))),this._domNode}get input(){return(0,l.j)(this._inputNode),this._inputNode}get button(){return(0,l.j)(this._buttonNode),this._buttonNode}get buttonState(){return this._buttonState}setSparkleButton(){var e,t;this._buttonState="sparkle",null!==(e=this._sparkleIcon)&&void 0!==e||(this._sparkleIcon=(0,T.s)(H.W.sparkle)),P.w_(this.button),this.button.appendChild(this._sparkleIcon),this.button.setAttribute("aria-label","Generating new name suggestions"),null===(t=this._buttonHover)||void 0===t||t.update(this._buttonGenHoverText),this.input.focus()}setStopButton(){var e,t;this._buttonState="stop",null!==(e=this._stopIcon)&&void 0!==e||(this._stopIcon=(0,T.s)(H.W.primitiveSquare)),P.w_(this.button),this.button.appendChild(this._stopIcon),this.button.setAttribute("aria-label","Cancel generating new name suggestions"),null===(t=this._buttonHover)||void 0===t||t.update(this._buttonCancelHoverText),this.input.focus()}dispose(){this._disposables.dispose()}}class Z{constructor(e,t){this._domNode=document.createElement("div"),this._domNode.className="rename-box rename-candidate",this._domNode.style.display="flex",this._domNode.style.columnGap="5px",this._domNode.style.alignItems="center",this._domNode.style.height="".concat(t.lineHeight,"px"),this._domNode.style.padding="".concat(Z._PADDING,"px");const i=document.createElement("div");i.style.display="flex",i.style.alignItems="center",i.style.width=i.style.height="".concat(.8*t.lineHeight,"px"),this._domNode.appendChild(i),this._icon=(0,T.s)(H.W.sparkle),this._icon.style.display="none",i.appendChild(this._icon),this._label=document.createElement("div"),j.M(this._label,t),this._domNode.appendChild(this._label),e.appendChild(this._domNode)}populate(e){this._updateIcon(e),this._updateLabel(e)}_updateIcon(e){var t;const i=!!(null===(t=e.tags)||void 0===t?void 0:t.includes(v.OV.AIGenerated));this._icon.style.display=i?"inherit":"none"}_updateLabel(e){this._label.innerText=e.newSymbolName}static getLayoutInfo(e){let{lineHeight:t}=e;return{totalHeight:t+2*Z._PADDING}}dispose(){}}Z._PADDING=2;var ee,te=function(e,t,i,s){var n,o=arguments.length,r=o<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(o<3?n(r):o>3?n(t,i,r):n(t,i))||r);return o>3&&r&&Object.defineProperty(t,i,r),r},ie=function(e,t){return function(i,s){t(i,s,e)}};class se{constructor(e,t,i){this.model=e,this.position=t,this._providerRenameIdx=0,this._providers=i.ordered(e)}hasProvider(){return this._providers.length>0}async resolveRenameLocation(e){const t=[];for(this._providerRenameIdx=0;this._providerRenameIdx<this._providers.length;this._providerRenameIdx++){const i=this._providers[this._providerRenameIdx];if(!i.resolveRenameLocation)break;const s=await i.resolveRenameLocation(this.model,this.position,e);if(s){if(!s.rejectReason)return s;t.push(s.rejectReason)}}this._providerRenameIdx=0;const i=this.model.getWordAtPosition(this.position);return i?{range:new m.Q(this.position.lineNumber,i.startColumn,this.position.lineNumber,i.endColumn),text:i.word,rejectReason:t.length>0?t.join("\n"):void 0}:{range:m.Q.fromPositions(this.position),text:"",rejectReason:t.length>0?t.join("\n"):void 0}}async provideRenameEdits(e,t){return this._provideRenameEdits(e,this._providerRenameIdx,[],t)}async _provideRenameEdits(e,t,i,s){const n=this._providers[t];if(!n)return{edits:[],rejectReason:i.join("\n")};const o=await n.provideRenameEdits(this.model,this.position,e,s);return o?o.rejectReason?this._provideRenameEdits(e,t+1,i.concat(o.rejectReason),s):o:this._provideRenameEdits(e,t+1,i.concat(S.kg("no result","No result.")),s)}}let ne=ee=class{static get(e){return e.getContribution(ee.ID)}constructor(e,t,i,s,n,r,a,l,c){this.editor=e,this._instaService=t,this._notificationService=i,this._bulkEditService=s,this._progressService=n,this._logService=r,this._configService=a,this._languageFeaturesService=l,this._telemetryService=c,this._disposableStore=new d.Cm,this._cts=new o.Qi,this._renameWidget=this._disposableStore.add(this._instaService.createInstance(X,this.editor,["acceptRenameInput","acceptRenameInputWithPreview"]))}dispose(){this._disposableStore.dispose(),this._cts.dispose(!0)}async run(){var e,t;const i=this._logService.trace.bind(this._logService,"[rename]");if(this._cts.dispose(!0),this._cts=new o.Qi,!this.editor.hasModel())return void i("editor has no model");const d=this.editor.getPosition(),l=new se(this.editor.getModel(),d,this._languageFeaturesService.renameProvider);if(!l.hasProvider())return void i("skeleton has no provider");const c=new C.gI(this.editor,5,void 0,this._cts.token);let h;try{i("resolving rename location");const e=l.resolveRenameLocation(c.token);this._progressService.showWhile(e,250),h=await e,i("resolved rename location")}catch(w){return void(w instanceof r.AL?i("resolve rename location cancelled",JSON.stringify(w,null,"\t")):(i("resolve rename location failed",w instanceof Error?w:JSON.stringify(w,null,"\t")),("string"===typeof w||(0,a.VS)(w))&&(null===(e=y.k.get(this.editor))||void 0===e||e.showMessage(w||S.kg("resolveRenameLocationFailed","An unknown error occurred while resolving rename location"),d))))}finally{c.dispose()}if(!h)return void i("returning early - no loc");if(h.rejectReason)return i("returning early - rejected with reason: ".concat(h.rejectReason),h.rejectReason),void(null===(t=y.k.get(this.editor))||void 0===t||t.showMessage(h.rejectReason,d));if(c.token.isCancellationRequested)return void i("returning early - cts1 cancelled");const u=new C.gI(this.editor,5,h.range,this._cts.token),g=this.editor.getModel(),p=this._languageFeaturesService.newSymbolNamesProvider.all(g),_=await Promise.all(p.map((async e=>{var t;return[e,null!==(t=await e.supportsAutomaticNewSymbolNamesTriggerKind)&&void 0!==t&&t]})));i("creating rename input field and awaiting its result");const f=this._bulkEditService.hasPreviewHandler()&&this._configService.getValue(this.editor.getModel().uri,"editor.rename.enablePreview"),b=await this._renameWidget.getInput(h.range,h.text,f,p.length>0?(e,t)=>{let i=_.slice();return e===v.YT.Automatic&&(i=i.filter((e=>{let[t,i]=e;return i}))),i.map((i=>{let[s]=i;return s.provideNewSymbolNames(g,h.range,e,t)}))}:void 0,u);if(i("received response from rename input field"),p.length>0&&this._reportTelemetry(p.length,g.getLanguageId(),b),"boolean"===typeof b)return i("returning early - rename input field response - ".concat(b)),b&&this.editor.focus(),void u.dispose();this.editor.focus(),i("requesting rename edits");const k=(0,n.PK)(l.provideRenameEdits(b.newName,u.token),u.token).then((async e=>{if(e)if(this.editor.hasModel()){if(e.rejectReason)return i("returning early - rejected with reason: ".concat(e.rejectReason)),void this._notificationService.info(e.rejectReason);this.editor.setSelection(m.Q.fromPositions(this.editor.getSelection().getPosition())),i("applying edits"),this._bulkEditService.apply(e,{editor:this.editor,showPreview:b.wantsPreview,label:S.kg("label","Renaming '{0}' to '{1}'",null===h||void 0===h?void 0:h.text,b.newName),code:"undoredo.rename",quotableLabel:S.kg("quotableLabel","Renaming {0} to {1}",null===h||void 0===h?void 0:h.text,b.newName),respectAutoSaveConfig:!0}).then((e=>{i("edits applied"),e.ariaSummary&&(0,s.xE)(S.kg("aria","Successfully renamed '{0}' to '{1}'. Summary: {2}",h.text,b.newName,e.ariaSummary))})).catch((e=>{i("error when applying edits ".concat(JSON.stringify(e,null,"\t"))),this._notificationService.error(S.kg("rename.failedApply","Rename failed to apply edits")),this._logService.error(e)}))}else i("returning early - no model after rename edits are provided");else i("returning early - no rename edits result")}),(e=>{i("error when providing rename edits",JSON.stringify(e,null,"\t")),this._notificationService.error(S.kg("rename.failed","Rename failed to compute edits")),this._logService.error(e)})).finally((()=>{u.dispose()}));return i("returning rename operation"),this._progressService.showWhile(k,250),k}acceptRenameInput(e){this._renameWidget.acceptInput(e)}cancelRenameInput(){this._renameWidget.cancelInput(!0,"cancelRenameInput command")}focusNextRenameSuggestion(){this._renameWidget.focusNextRenameSuggestion()}focusPreviousRenameSuggestion(){this._renameWidget.focusPreviousRenameSuggestion()}_reportTelemetry(e,t,i){const s="boolean"===typeof i?{kind:"cancelled",languageId:t,nRenameSuggestionProviders:e}:{kind:"accepted",languageId:t,nRenameSuggestionProviders:e,source:i.stats.source.k,nRenameSuggestions:i.stats.nRenameSuggestions,timeBeforeFirstInputFieldEdit:i.stats.timeBeforeFirstInputFieldEdit,wantsPreview:i.wantsPreview,nRenameSuggestionsInvocations:i.stats.nRenameSuggestionsInvocations,hadAutomaticRenameSuggestionsInvocation:i.stats.hadAutomaticRenameSuggestionsInvocation};this._telemetryService.publicLog2("renameInvokedEvent",s)}};ne.ID="editor.contrib.renameController",ne=ee=te([ie(1,x._Y),ie(2,M.Ot),ie(3,u.nu),ie(4,I.N8),ie(5,R.rr),ie(6,b.U),ie(7,f.u),ie(8,L.k)],ne);class oe extends h.ks{constructor(){super({id:"editor.action.rename",label:S.kg("rename.label","Rename Symbol"),alias:"Rename Symbol",precondition:N.M$.and(_.R.writable,_.R.hasRenameProvider),kbOpts:{kbExpr:_.R.editorTextFocus,primary:60,weight:100},contextMenuOpts:{group:"1_modification",order:1.1}})}runCommand(e,t){const i=e.get(g.T),[s,n]=Array.isArray(t)&&t||[void 0,void 0];return c.r.isUri(s)&&p.y.isIPosition(n)?i.openCodeEditor({resource:s},i.getActiveCodeEditor()).then((e=>{e&&(e.setPosition(n),e.invokeWithinContext((t=>(this.reportTelemetry(t,e),this.run(t,e)))))}),r.dz):super.runCommand(e,t)}run(e,t){const i=e.get(R.rr),s=ne.get(t);return s?(i.trace("[RenameAction] got controller, running..."),s.run()):(i.trace("[RenameAction] returning early - controller missing"),Promise.resolve())}}(0,h.HW)(ne.ID,ne,4),(0,h.Fl)(oe);const re=h.DX.bindToContribution(ne.get);(0,h.E_)(new re({id:"acceptRenameInput",precondition:$,handler:e=>e.acceptRenameInput(!1),kbOpts:{weight:199,kbExpr:N.M$.and(_.R.focus,N.M$.not("isComposing")),primary:3}})),(0,h.E_)(new re({id:"acceptRenameInputWithPreview",precondition:N.M$.and($,N.M$.has("config.editor.rename.enablePreview")),handler:e=>e.acceptRenameInput(!0),kbOpts:{weight:199,kbExpr:N.M$.and(_.R.focus,N.M$.not("isComposing")),primary:2051}})),(0,h.E_)(new re({id:"cancelRenameInput",precondition:$,handler:e=>e.cancelRenameInput(),kbOpts:{weight:199,kbExpr:_.R.focus,primary:9,secondary:[1033]}})),(0,k.ug)(class extends k.L{constructor(){super({id:"focusNextRenameSuggestion",title:{...S.aS("focusNextRenameSuggestion","Focus Next Rename Suggestion")},precondition:$,keybinding:[{primary:18,weight:199}]})}run(e){const t=e.get(g.T).getFocusedCodeEditor();if(!t)return;const i=ne.get(t);i&&i.focusNextRenameSuggestion()}}),(0,k.ug)(class extends k.L{constructor(){super({id:"focusPreviousRenameSuggestion",title:{...S.aS("focusPreviousRenameSuggestion","Focus Previous Rename Suggestion")},precondition:$,keybinding:[{primary:16,weight:199}]})}run(e){const t=e.get(g.T).getFocusedCodeEditor();if(!t)return;const i=ne.get(t);i&&i.focusPreviousRenameSuggestion()}}),(0,h.ke)("_executeDocumentRenameProvider",(function(e,t,i){for(var s=arguments.length,n=new Array(s>3?s-3:0),r=3;r<s;r++)n[r-3]=arguments[r];const[a]=n;(0,l.j)("string"===typeof a);const{renameProvider:d}=e.get(f.u);return async function(e,t,i,s){const n=new se(t,i,e),r=await n.resolveRenameLocation(o.XO.None);return(null===r||void 0===r?void 0:r.rejectReason)?{edits:[],rejectReason:r.rejectReason}:n.provideRenameEdits(s,o.XO.None)}(d,t,i,a)})),(0,h.ke)("_executePrepareRename",(async function(e,t,i){const{renameProvider:s}=e.get(f.u),n=new se(t,i,s),r=await n.resolveRenameLocation(o.XO.None);if(null===r||void 0===r?void 0:r.rejectReason)throw new Error(r.rejectReason);return r})),E.O.as(w.Fd.Configuration).registerConfiguration({id:"editor",properties:{"editor.rename.enablePreview":{scope:5,description:S.kg("enablePreview","Enable/disable the ability to preview changes before renaming"),default:!0,type:"boolean"}}})}}]);
//# sourceMappingURL=monaco-editor-vendor.c7e29bf6.a7a50e48.js.map