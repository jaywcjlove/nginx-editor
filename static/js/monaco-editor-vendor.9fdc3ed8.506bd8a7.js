"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[535],{3887:(e,t,o)=>{o.r(t),o.d(t,{SelectionAnchorSet:()=>m});var i,n=o(46403),r=o(71047),s=o(89490),a=o(95253),c=o(96601),d=o(98926),l=o(18420),h=o(8022),u=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},g=function(e,t){return function(o,i){t(o,i,e)}},p=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const m=new h.uy("selectionAnchorSet",!1);let _=i=class{static get(e){return e.getContribution(i.ID)}constructor(e,t){this.editor=e,this.selectionAnchorSetContextKey=m.bindTo(t),this.modelChangeListener=e.onDidChangeModel((()=>this.selectionAnchorSetContextKey.reset()))}setSelectionAnchor(){if(this.editor.hasModel()){const e=this.editor.getPosition();this.editor.changeDecorations((t=>{this.decorationId&&t.removeDecoration(this.decorationId),this.decorationId=t.addDecoration(c.Y.fromPositions(e,e),{description:"selection-anchor",stickiness:1,hoverMessage:(new r.W5).appendText((0,l.NC)("selectionAnchor","Selection Anchor")),className:"selection-anchor"})})),this.selectionAnchorSetContextKey.set(!!this.decorationId),(0,n.Z9)((0,l.NC)("anchorSet","Anchor set at {0}:{1}",e.lineNumber,e.column))}}goToSelectionAnchor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);e&&this.editor.setPosition(e.getStartPosition())}}selectFromAnchorToCursor(){if(this.editor.hasModel()&&this.decorationId){const e=this.editor.getModel().getDecorationRange(this.decorationId);if(e){const t=this.editor.getPosition();this.editor.setSelection(c.Y.fromPositions(e.getStartPosition(),t)),this.cancelSelectionAnchor()}}}cancelSelectionAnchor(){if(this.decorationId){const e=this.decorationId;this.editor.changeDecorations((t=>{t.removeDecoration(e),this.decorationId=void 0})),this.selectionAnchorSetContextKey.set(!1)}}dispose(){this.cancelSelectionAnchor(),this.modelChangeListener.dispose()}};_.ID="editor.contrib.selectionAnchorController",_=i=u([g(1,h.i6)],_);class f extends a.R6{constructor(){super({id:"editor.action.setSelectionAnchor",label:(0,l.NC)("setSelectionAnchor","Set Selection Anchor"),alias:"Set Selection Anchor",precondition:void 0,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,s.gx)(2089,2080),weight:100}})}run(e,t){var o;return p(this,void 0,void 0,(function*(){null===(o=_.get(t))||void 0===o||o.setSelectionAnchor()}))}}class C extends a.R6{constructor(){super({id:"editor.action.goToSelectionAnchor",label:(0,l.NC)("goToSelectionAnchor","Go to Selection Anchor"),alias:"Go to Selection Anchor",precondition:m})}run(e,t){var o;return p(this,void 0,void 0,(function*(){null===(o=_.get(t))||void 0===o||o.goToSelectionAnchor()}))}}class v extends a.R6{constructor(){super({id:"editor.action.selectFromAnchorToCursor",label:(0,l.NC)("selectFromAnchorToCursor","Select from Anchor to Cursor"),alias:"Select from Anchor to Cursor",precondition:m,kbOpts:{kbExpr:d.u.editorTextFocus,primary:(0,s.gx)(2089,2089),weight:100}})}run(e,t){var o;return p(this,void 0,void 0,(function*(){null===(o=_.get(t))||void 0===o||o.selectFromAnchorToCursor()}))}}class b extends a.R6{constructor(){super({id:"editor.action.cancelSelectionAnchor",label:(0,l.NC)("cancelSelectionAnchor","Cancel Selection Anchor"),alias:"Cancel Selection Anchor",precondition:m,kbOpts:{kbExpr:d.u.editorTextFocus,primary:9,weight:100}})}run(e,t){var o;return p(this,void 0,void 0,(function*(){null===(o=_.get(t))||void 0===o||o.cancelSelectionAnchor()}))}}(0,a._K)(_.ID,_,4),(0,a.Qr)(f),(0,a.Qr)(C),(0,a.Qr)(v),(0,a.Qr)(b)},31796:(e,t,o)=>{o.r(t),o.d(t,{BracketMatchingController:()=>y});var i=o(71049),n=o(65096),r=o(95253),s=o(65631),a=o(17429),c=o(96601),d=o(98926),l=o(20329),h=o(78519),u=o(18420),g=o(14443),p=o(43980),m=o(41335);const _=(0,p.P6G)("editorOverviewRuler.bracketMatchForeground",{dark:"#A0A0A0",light:"#A0A0A0",hcDark:"#A0A0A0",hcLight:"#A0A0A0"},u.NC("overviewRulerBracketMatchForeground","Overview ruler marker color for matching brackets."));class f extends r.R6{constructor(){super({id:"editor.action.jumpToBracket",label:u.NC("smartSelect.jumpBracket","Go to Bracket"),alias:"Go to Bracket",precondition:void 0,kbOpts:{kbExpr:d.u.editorTextFocus,primary:3165,weight:100}})}run(e,t){var o;null===(o=y.get(t))||void 0===o||o.jumpToBracket()}}class C extends r.R6{constructor(){super({id:"editor.action.selectToBracket",label:u.NC("smartSelect.selectToBracket","Select to Bracket"),alias:"Select to Bracket",precondition:void 0,description:{description:"Select to Bracket",args:[{name:"args",schema:{type:"object",properties:{selectBrackets:{type:"boolean",default:!0}}}}]}})}run(e,t,o){var i;let n=!0;o&&!1===o.selectBrackets&&(n=!1),null===(i=y.get(t))||void 0===i||i.selectToBracket(n)}}class v extends r.R6{constructor(){super({id:"editor.action.removeBrackets",label:u.NC("smartSelect.removeBrackets","Remove Brackets"),alias:"Remove Brackets",precondition:void 0,kbOpts:{kbExpr:d.u.editorTextFocus,primary:2561,weight:100}})}run(e,t){var o;null===(o=y.get(t))||void 0===o||o.removeBrackets(this.id)}}class b{constructor(e,t,o){this.position=e,this.brackets=t,this.options=o}}class y extends n.JT{static get(e){return e.getContribution(y.ID)}constructor(e){super(),this._editor=e,this._lastBracketsData=[],this._lastVersionId=0,this._decorations=this._editor.createDecorationsCollection(),this._updateBracketsSoon=this._register(new i.pY((()=>this._updateBrackets()),50)),this._matchBrackets=this._editor.getOption(71),this._updateBracketsSoon.schedule(),this._register(e.onDidChangeCursorPosition((e=>{"never"!==this._matchBrackets&&this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelContent((e=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModel((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeModelLanguageConfiguration((e=>{this._lastBracketsData=[],this._updateBracketsSoon.schedule()}))),this._register(e.onDidChangeConfiguration((e=>{e.hasChanged(71)&&(this._matchBrackets=this._editor.getOption(71),this._decorations.clear(),this._lastBracketsData=[],this._lastVersionId=0,this._updateBracketsSoon.schedule())}))),this._register(e.onDidBlurEditorWidget((()=>{this._updateBracketsSoon.schedule()}))),this._register(e.onDidFocusEditorWidget((()=>{this._updateBracketsSoon.schedule()})))}jumpToBracket(){if(!this._editor.hasModel())return;const e=this._editor.getModel(),t=this._editor.getSelections().map((t=>{const o=t.getStartPosition(),i=e.bracketPairs.matchBracket(o);let n=null;if(i)i[0].containsPosition(o)&&!i[1].containsPosition(o)?n=i[1].getStartPosition():i[1].containsPosition(o)&&(n=i[0].getStartPosition());else{const t=e.bracketPairs.findEnclosingBrackets(o);if(t)n=t[1].getStartPosition();else{const t=e.bracketPairs.findNextBracket(o);t&&t.range&&(n=t.range.getStartPosition())}}return n?new c.Y(n.lineNumber,n.column,n.lineNumber,n.column):new c.Y(o.lineNumber,o.column,o.lineNumber,o.column)}));this._editor.setSelections(t),this._editor.revealRange(t[0])}selectToBracket(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),o=[];this._editor.getSelections().forEach((i=>{const n=i.getStartPosition();let r=t.bracketPairs.matchBracket(n);if(!r&&(r=t.bracketPairs.findEnclosingBrackets(n),!r)){const e=t.bracketPairs.findNextBracket(n);e&&e.range&&(r=t.bracketPairs.matchBracket(e.range.getStartPosition()))}let s=null,d=null;if(r){r.sort(a.e.compareRangesUsingStarts);const[t,o]=r;if(s=e?t.getStartPosition():t.getEndPosition(),d=e?o.getEndPosition():o.getStartPosition(),o.containsPosition(n)){const e=s;s=d,d=e}}s&&d&&o.push(new c.Y(s.lineNumber,s.column,d.lineNumber,d.column))})),o.length>0&&(this._editor.setSelections(o),this._editor.revealRange(o[0]))}removeBrackets(e){if(!this._editor.hasModel())return;const t=this._editor.getModel();this._editor.getSelections().forEach((o=>{const i=o.getPosition();let n=t.bracketPairs.matchBracket(i);n||(n=t.bracketPairs.findEnclosingBrackets(i)),n&&(this._editor.pushUndoStop(),this._editor.executeEdits(e,[{range:n[0],text:""},{range:n[1],text:""}]),this._editor.pushUndoStop())}))}_updateBrackets(){if("never"===this._matchBrackets)return;this._recomputeBrackets();const e=[];let t=0;for(const o of this._lastBracketsData){const i=o.brackets;i&&(e[t++]={range:i[0],options:o.options},e[t++]={range:i[1],options:o.options})}this._decorations.set(e)}_recomputeBrackets(){if(!this._editor.hasModel()||!this._editor.hasWidgetFocus())return this._lastBracketsData=[],void(this._lastVersionId=0);const e=this._editor.getSelections();if(e.length>100)return this._lastBracketsData=[],void(this._lastVersionId=0);const t=this._editor.getModel(),o=t.getVersionId();let i=[];this._lastVersionId===o&&(i=this._lastBracketsData);const n=[];let r=0;for(let s=0,h=e.length;s<h;s++){const t=e[s];t.isEmpty()&&(n[r++]=t.getStartPosition())}n.length>1&&n.sort(s.L.compare);const a=[];let c=0,d=0;const l=i.length;for(let s=0,h=n.length;s<h;s++){const e=n[s];for(;d<l&&i[d].position.isBefore(e);)d++;if(d<l&&i[d].position.equals(e))a[c++]=i[d];else{let o=t.bracketPairs.matchBracket(e,20),i=y._DECORATION_OPTIONS_WITH_OVERVIEW_RULER;o||"always"!==this._matchBrackets||(o=t.bracketPairs.findEnclosingBrackets(e,20),i=y._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER),a[c++]=new b(e,o,i)}}this._lastBracketsData=a,this._lastVersionId=o}}y.ID="editor.contrib.bracketMatchingController",y._DECORATION_OPTIONS_WITH_OVERVIEW_RULER=h.qx.register({description:"bracket-match-overview",stickiness:1,className:"bracket-match",overviewRuler:{color:(0,m.EN)(_),position:l.sh.Center}}),y._DECORATION_OPTIONS_WITHOUT_OVERVIEW_RULER=h.qx.register({description:"bracket-match-no-overview",stickiness:1,className:"bracket-match"}),(0,r._K)(y.ID,y,1),(0,r.Qr)(C),(0,r.Qr)(f),(0,r.Qr)(v),g.BH.appendMenuItem(g.eH.MenubarGoMenu,{group:"5_infile_nav",command:{id:"editor.action.jumpToBracket",title:u.NC({key:"miGoToBracket",comment:["&& denotes a mnemonic"]},"Go to &&Bracket")},order:2})},83512:(e,t,o)=>{o.r(t);var i=o(95253),n=o(98926),r=o(17429),s=o(96601);class a{constructor(e,t){this._selection=e,this._isMovingLeft=t}getEditOperations(e,t){if(this._selection.startLineNumber!==this._selection.endLineNumber||this._selection.isEmpty())return;const o=this._selection.startLineNumber,i=this._selection.startColumn,n=this._selection.endColumn;if((!this._isMovingLeft||1!==i)&&(this._isMovingLeft||n!==e.getLineMaxColumn(o)))if(this._isMovingLeft){const s=new r.e(o,i-1,o,i),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new r.e(o,n,o,n),a)}else{const s=new r.e(o,n,o,n+1),a=e.getValueInRange(s);t.addEditOperation(s,null),t.addEditOperation(new r.e(o,i,o,i),a)}}computeCursorState(e,t){return this._isMovingLeft?new s.Y(this._selection.startLineNumber,this._selection.startColumn-1,this._selection.endLineNumber,this._selection.endColumn-1):new s.Y(this._selection.startLineNumber,this._selection.startColumn+1,this._selection.endLineNumber,this._selection.endColumn+1)}}var c=o(18420);class d extends i.R6{constructor(e,t){super(t),this.left=e}run(e,t){if(!t.hasModel())return;const o=[],i=t.getSelections();for(const n of i)o.push(new a(n,this.left));t.pushUndoStop(),t.executeCommands(this.id,o),t.pushUndoStop()}}(0,i.Qr)(class extends d{constructor(){super(!0,{id:"editor.action.moveCarretLeftAction",label:c.NC("caret.moveLeft","Move Selected Text Left"),alias:"Move Selected Text Left",precondition:n.u.writable})}}),(0,i.Qr)(class extends d{constructor(){super(!1,{id:"editor.action.moveCarretRightAction",label:c.NC("caret.moveRight","Move Selected Text Right"),alias:"Move Selected Text Right",precondition:n.u.writable})}})},28291:(e,t,o)=>{o.r(t);var i=o(95253),n=o(18424),r=o(5866),s=o(17429),a=o(98926),c=o(18420);class d extends i.R6{constructor(){super({id:"editor.action.transposeLetters",label:c.NC("transposeLetters.label","Transpose Letters"),alias:"Transpose Letters",precondition:a.u.writable,kbOpts:{kbExpr:a.u.textInputFocus,primary:0,mac:{primary:306},weight:100}})}run(e,t){if(!t.hasModel())return;const o=t.getModel(),i=[],a=t.getSelections();for(const c of a){if(!c.isEmpty())continue;const e=c.startLineNumber,t=c.startColumn,a=o.getLineMaxColumn(e);if(1===e&&(1===t||2===t&&2===a))continue;const d=t===a?c.getPosition():r.o.rightPosition(o,c.getPosition().lineNumber,c.getPosition().column),l=r.o.leftPosition(o,d),h=r.o.leftPosition(o,l),u=o.getValueInRange(s.e.fromPositions(h,l)),g=o.getValueInRange(s.e.fromPositions(l,d)),p=s.e.fromPositions(h,d);i.push(new n.T4(p,g+u))}i.length>0&&(t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop())}}(0,i.Qr)(d)},40382:(e,t,o)=>{o.r(t),o.d(t,{CopyAction:()=>y,CutAction:()=>b,PasteAction:()=>w});var i=o(30620),n=o(32959),r=o(90650),s=o(19956),a=o(95253),c=o(76257),d=o(98926),l=o(18420),h=o(14443),u=o(76344),g=o(8022),p=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const m="9_cutcopypaste",_=r.tY||document.queryCommandSupported("cut"),f=r.tY||document.queryCommandSupported("copy"),C="undefined"!==typeof navigator.clipboard&&!i.vU||document.queryCommandSupported("paste");function v(e){return e.register(),e}const b=_?v(new a.AJ({id:"editor.action.clipboardCutAction",precondition:void 0,kbOpts:r.tY?{primary:2102,win:{primary:2102,secondary:[1044]},weight:100}:void 0,menuOpts:[{menuId:h.eH.MenubarEditMenu,group:"2_ccp",title:l.NC({key:"miCut",comment:["&& denotes a mnemonic"]},"Cu&&t"),order:1},{menuId:h.eH.EditorContext,group:m,title:l.NC("actions.clipboard.cutLabel","Cut"),when:d.u.writable,order:1},{menuId:h.eH.CommandPalette,group:"",title:l.NC("actions.clipboard.cutLabel","Cut"),order:1},{menuId:h.eH.SimpleEditorContext,group:m,title:l.NC("actions.clipboard.cutLabel","Cut"),when:d.u.writable,order:1}]})):void 0,y=f?v(new a.AJ({id:"editor.action.clipboardCopyAction",precondition:void 0,kbOpts:r.tY?{primary:2081,win:{primary:2081,secondary:[2067]},weight:100}:void 0,menuOpts:[{menuId:h.eH.MenubarEditMenu,group:"2_ccp",title:l.NC({key:"miCopy",comment:["&& denotes a mnemonic"]},"&&Copy"),order:2},{menuId:h.eH.EditorContext,group:m,title:l.NC("actions.clipboard.copyLabel","Copy"),order:2},{menuId:h.eH.CommandPalette,group:"",title:l.NC("actions.clipboard.copyLabel","Copy"),order:1},{menuId:h.eH.SimpleEditorContext,group:m,title:l.NC("actions.clipboard.copyLabel","Copy"),order:2}]})):void 0;h.BH.appendMenuItem(h.eH.MenubarEditMenu,{submenu:h.eH.MenubarCopy,title:{value:l.NC("copy as","Copy As"),original:"Copy As"},group:"2_ccp",order:3}),h.BH.appendMenuItem(h.eH.EditorContext,{submenu:h.eH.EditorContextCopy,title:{value:l.NC("copy as","Copy As"),original:"Copy As"},group:m,order:3}),h.BH.appendMenuItem(h.eH.EditorContext,{submenu:h.eH.EditorContextShare,title:{value:l.NC("share","Share"),original:"Share"},group:"11_share",order:-1,when:g.Ao.and(g.Ao.notEquals("resourceScheme","output"),d.u.editorTextFocus)}),h.BH.appendMenuItem(h.eH.EditorTitleContext,{submenu:h.eH.EditorTitleContextShare,title:{value:l.NC("share","Share"),original:"Share"},group:"11_share",order:-1}),h.BH.appendMenuItem(h.eH.ExplorerContext,{submenu:h.eH.ExplorerContextShare,title:{value:l.NC("share","Share"),original:"Share"},group:"11_share",order:-1});const w=C?v(new a.AJ({id:"editor.action.clipboardPasteAction",precondition:void 0,kbOpts:r.tY?{primary:2100,win:{primary:2100,secondary:[1043]},linux:{primary:2100,secondary:[1043]},weight:100}:void 0,menuOpts:[{menuId:h.eH.MenubarEditMenu,group:"2_ccp",title:l.NC({key:"miPaste",comment:["&& denotes a mnemonic"]},"&&Paste"),order:4},{menuId:h.eH.EditorContext,group:m,title:l.NC("actions.clipboard.pasteLabel","Paste"),when:d.u.writable,order:4},{menuId:h.eH.CommandPalette,group:"",title:l.NC("actions.clipboard.pasteLabel","Paste"),order:1},{menuId:h.eH.SimpleEditorContext,group:m,title:l.NC("actions.clipboard.pasteLabel","Paste"),when:d.u.writable,order:4}]})):void 0;class S extends a.R6{constructor(){super({id:"editor.action.clipboardCopyWithSyntaxHighlightingAction",label:l.NC("actions.clipboard.copyWithSyntaxHighlightingLabel","Copy With Syntax Highlighting"),alias:"Copy With Syntax Highlighting",precondition:void 0,kbOpts:{kbExpr:d.u.textInputFocus,primary:0,weight:100}})}run(e,t){if(!t.hasModel())return;!t.getOption(37)&&t.getSelection().isEmpty()||(s.RA.forceCopyWithSyntaxHighlighting=!0,t.focus(),t.getContainerDomNode().ownerDocument.execCommand("copy"),s.RA.forceCopyWithSyntaxHighlighting=!1)}}function k(e,t){e&&(e.addImplementation(1e4,"code-editor",((e,o)=>{const i=e.get(c.$).getFocusedCodeEditor();if(i&&i.hasTextFocus()){const e=i.getOption(37),o=i.getSelection();return o&&o.isEmpty()&&!e||i.getContainerDomNode().ownerDocument.execCommand(t),!0}return!1})),e.addImplementation(0,"generic-dom",((e,o)=>((0,n.uP)().execCommand(t),!0))))}k(b,"cut"),k(y,"copy"),w&&(w.addImplementation(1e4,"code-editor",((e,t)=>{const o=e.get(c.$),i=e.get(u.p),n=o.getFocusedCodeEditor();if(n&&n.hasTextFocus()){return!(!n.getContainerDomNode().ownerDocument.execCommand("paste")&&r.$L)||p(void 0,void 0,void 0,(function*(){const e=yield i.readText();if(""!==e){const t=s.Nl.INSTANCE.get(e);let o=!1,i=null,r=null;t&&(o=n.getOption(37)&&!!t.isFromEmptySelection,i="undefined"!==typeof t.multicursorText?t.multicursorText:null,r=t.mode),n.trigger("keyboard","paste",{text:e,pasteOnNewLine:o,multicursorText:i,mode:r})}}))}return!1})),w.addImplementation(0,"generic-dom",((e,t)=>((0,n.uP)().execCommand("paste"),!0)))),f&&(0,a.Qr)(S)},47150:(e,t,o)=>{o.d(t,{Bb:()=>k,LR:()=>E,MN:()=>N,RB:()=>y,TM:()=>L,UX:()=>M,aI:()=>D,cz:()=>w,pZ:()=>S,uH:()=>x});var i=o(38102),n=o(7388),r=o(74146),s=o(65096),a=o(38821),c=o(48895),d=o(17429),l=o(96601),h=o(65441),u=o(26246),g=o(16836),p=o(18420),m=o(99740),_=o(49431),f=o(28322),C=o(45536),v=o(53222),b=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const y="editor.action.codeAction",w="editor.action.quickFix",S="editor.action.autoFix",k="editor.action.refactor",N="editor.action.sourceAction",x="editor.action.organizeImports",L="editor.action.fixAll";class A extends s.JT{static codeActionsPreferredComparator(e,t){return e.isPreferred&&!t.isPreferred?-1:!e.isPreferred&&t.isPreferred?1:0}static codeActionsComparator(e,t){let{action:o}=e,{action:n}=t;return(0,i.Of)(o.diagnostics)?(0,i.Of)(n.diagnostics)?A.codeActionsPreferredComparator(o,n):-1:(0,i.Of)(n.diagnostics)?1:A.codeActionsPreferredComparator(o,n)}constructor(e,t,o){super(),this.documentation=t,this._register(o),this.allActions=[...e].sort(A.codeActionsComparator),this.validActions=this.allActions.filter((e=>{let{action:t}=e;return!t.disabled}))}get hasAutoFix(){return this.validActions.some((e=>{let{action:t}=e;return!!t.kind&&v.yN.QuickFix.contains(new v.yN(t.kind))&&!!t.isPreferred}))}}const P={actions:[],documentation:void 0};function D(e,t,o,n,a,c){var d;return b(this,void 0,void 0,(function*(){const l=n.filter||{},h=Object.assign(Object.assign({},l),{excludes:[...l.excludes||[],v.yN.Notebook]}),u={only:null===(d=l.include)||void 0===d?void 0:d.value,trigger:n.type},p=new g.YQ(t,c),m=2===n.type,_=function(e,t,o){return e.all(t).filter((e=>!e.providedCodeActionKinds||e.providedCodeActionKinds.some((e=>(0,v.EU)(o,new v.yN(e))))))}(e,t,m?h:l),f=new s.SL,C=_.map((e=>b(this,void 0,void 0,(function*(){try{a.report(e);const i=yield e.provideCodeActions(t,o,u,p.token);if(i&&f.add(i),p.token.isCancellationRequested)return P;const n=((null===i||void 0===i?void 0:i.actions)||[]).filter((e=>e&&(0,v.Yl)(l,e))),r=function(e,t,o){if(!e.documentation)return;const i=e.documentation.map((e=>({kind:new v.yN(e.kind),command:e.command})));if(o){let e;for(const t of i)t.kind.contains(o)&&(e?e.kind.contains(t.kind)&&(e=t):e=t);if(e)return null===e||void 0===e?void 0:e.command}for(const n of t)if(n.kind)for(const e of i)if(e.kind.contains(new v.yN(n.kind)))return e.command;return}(e,n,l.include);return{actions:n.map((t=>new v.bA(t,e))),documentation:r}}catch(i){if((0,r.n2)(i))throw i;return(0,r.Cp)(i),P}})))),y=e.onDidChange((()=>{const o=e.all(t);(0,i.fS)(o,_)||p.cancel()}));try{const o=yield Promise.all(C),r=o.map((e=>e.actions)).flat(),s=[...(0,i.kX)(o.map((e=>e.documentation))),...I(e,t,n,r)];return new A(r,s,f)}finally{y.dispose(),p.dispose()}}))}function*I(e,t,o,i){var n,r,s;if(t&&i.length)for(const a of e.all(t))a._getAdditionalMenuItems&&(yield*null===(n=a._getAdditionalMenuItems)||void 0===n?void 0:n.call(a,{trigger:o.type,only:null===(s=null===(r=o.filter)||void 0===r?void 0:r.include)||void 0===s?void 0:s.value},i.map((e=>e.action))))}var M;function E(e,t,o,i){let r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:n.T.None;var s;return b(this,void 0,void 0,(function*(){const n=e.get(c.vu),a=e.get(m.H),d=e.get(C.b),l=e.get(_.lT);if(d.publicLog2("codeAction.applyCodeAction",{codeActionTitle:t.action.title,codeActionKind:t.action.kind,codeActionIsPreferred:!!t.action.isPreferred,reason:o}),yield t.resolve(r),!r.isCancellationRequested){if(null===(s=t.action.edit)||void 0===s?void 0:s.edits.length){if(!(yield n.apply(t.action.edit,{editor:null===i||void 0===i?void 0:i.editor,label:t.action.title,quotableLabel:t.action.title,code:"undoredo.codeAction",respectAutoSaveConfig:o!==M.OnSave,showPreview:null===i||void 0===i?void 0:i.preview})).isApplied)return}if(t.action.command)try{yield a.executeCommand(t.action.command.id,...t.action.command.arguments||[])}catch(h){const e=function(e){return"string"===typeof e?e:e instanceof Error&&"string"===typeof e.message?e.message:void 0}(h);l.error("string"===typeof e?e:p.NC("applyCodeActionFailed","An unknown error occurred while applying the code action"))}}}))}!function(e){e.OnSave="onSave",e.FromProblemsView="fromProblemsView",e.FromCodeActions="fromCodeActions"}(M||(M={})),m.P.registerCommand("_executeCodeActionProvider",(function(e,t,o,i,s){return b(this,void 0,void 0,(function*(){if(!(t instanceof a.o))throw(0,r.b1)();const{codeActionProvider:c}=e.get(h.p),g=e.get(u.q).getModel(t);if(!g)throw(0,r.b1)();const p=l.Y.isISelection(o)?l.Y.liftSelection(o):d.e.isIRange(o)?g.validateRange(o):void 0;if(!p)throw(0,r.b1)();const m="string"===typeof i?new v.yN(i):void 0,_=yield D(c,g,p,{type:1,triggerAction:v.aQ.Default,filter:{includeSourceActions:!0,include:m}},f.Ex.None,n.T.None),C=[],b=Math.min(_.validActions.length,"number"===typeof s?s:0);for(let e=0;e<b;e++)C.push(_.validActions[e].resolve(n.T.None));try{return yield Promise.all(C),_.validActions.map((e=>e.action))}finally{setTimeout((()=>_.dispose()),100)}}))}))},63446:(e,t,o)=>{o.r(t);var i=o(95253),n=o(89212),r=o(31906),s=o(98926),a=o(47150),c=o(18420),d=o(8022),l=o(53222),h=o(32714),u=o(89748);function g(e){return d.Ao.regex(u.fj.keys()[0],new RegExp("(\\s|^)"+(0,r.ec)(e.value)+"\\b"))}const p={type:"object",defaultSnippets:[{body:{kind:""}}],properties:{kind:{type:"string",description:c.NC("args.schema.kind","Kind of the code action to run.")},apply:{type:"string",description:c.NC("args.schema.apply","Controls when the returned actions are applied."),default:"ifSingle",enum:["first","ifSingle","never"],enumDescriptions:[c.NC("args.schema.apply.first","Always apply the first returned code action."),c.NC("args.schema.apply.ifSingle","Apply the first returned code action if it is the only one."),c.NC("args.schema.apply.never","Do not apply the returned code actions.")]},preferred:{type:"boolean",default:!1,description:c.NC("args.schema.preferred","Controls if only preferred code actions should be returned.")}}};function m(e,t,o,i){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:l.aQ.Default;if(e.hasModel()){const r=h.G.get(e);null===r||void 0===r||r.manualTriggerAtCurrentPosition(t,n,o,i)}}class _ extends i.R6{constructor(){super({id:a.cz,label:c.NC("quickfix.trigger.label","Quick Fix..."),alias:"Quick Fix...",precondition:d.Ao.and(s.u.writable,s.u.hasCodeActionsProvider),kbOpts:{kbExpr:s.u.textInputFocus,primary:2137,weight:100}})}run(e,t){return m(t,c.NC("editor.action.quickFix.noneMessage","No code actions available"),void 0,void 0,l.aQ.QuickFix)}}class f extends i._l{constructor(){super({id:a.RB,precondition:d.Ao.and(s.u.writable,s.u.hasCodeActionsProvider),description:{description:"Trigger a code action",args:[{name:"args",schema:p}]}})}runEditorCommand(e,t,o){const i=l.wZ.fromUser(o,{kind:l.yN.Empty,apply:"ifSingle"});return m(t,"string"===typeof(null===o||void 0===o?void 0:o.kind)?i.preferred?c.NC("editor.action.codeAction.noneMessage.preferred.kind","No preferred code actions for '{0}' available",o.kind):c.NC("editor.action.codeAction.noneMessage.kind","No code actions for '{0}' available",o.kind):i.preferred?c.NC("editor.action.codeAction.noneMessage.preferred","No preferred code actions available"):c.NC("editor.action.codeAction.noneMessage","No code actions available"),{include:i.kind,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply)}}class C extends i.R6{constructor(){super({id:a.Bb,label:c.NC("refactor.label","Refactor..."),alias:"Refactor...",precondition:d.Ao.and(s.u.writable,s.u.hasCodeActionsProvider),kbOpts:{kbExpr:s.u.textInputFocus,primary:3120,mac:{primary:1328},weight:100},contextMenuOpts:{group:"1_modification",order:2,when:d.Ao.and(s.u.writable,g(l.yN.Refactor))},description:{description:"Refactor...",args:[{name:"args",schema:p}]}})}run(e,t,o){const i=l.wZ.fromUser(o,{kind:l.yN.Refactor,apply:"never"});return m(t,"string"===typeof(null===o||void 0===o?void 0:o.kind)?i.preferred?c.NC("editor.action.refactor.noneMessage.preferred.kind","No preferred refactorings for '{0}' available",o.kind):c.NC("editor.action.refactor.noneMessage.kind","No refactorings for '{0}' available",o.kind):i.preferred?c.NC("editor.action.refactor.noneMessage.preferred","No preferred refactorings available"):c.NC("editor.action.refactor.noneMessage","No refactorings available"),{include:l.yN.Refactor.contains(i.kind)?i.kind:l.yN.None,onlyIncludePreferredActions:i.preferred},i.apply,l.aQ.Refactor)}}class v extends i.R6{constructor(){super({id:a.MN,label:c.NC("source.label","Source Action..."),alias:"Source Action...",precondition:d.Ao.and(s.u.writable,s.u.hasCodeActionsProvider),contextMenuOpts:{group:"1_modification",order:2.1,when:d.Ao.and(s.u.writable,g(l.yN.Source))},description:{description:"Source Action...",args:[{name:"args",schema:p}]}})}run(e,t,o){const i=l.wZ.fromUser(o,{kind:l.yN.Source,apply:"never"});return m(t,"string"===typeof(null===o||void 0===o?void 0:o.kind)?i.preferred?c.NC("editor.action.source.noneMessage.preferred.kind","No preferred source actions for '{0}' available",o.kind):c.NC("editor.action.source.noneMessage.kind","No source actions for '{0}' available",o.kind):i.preferred?c.NC("editor.action.source.noneMessage.preferred","No preferred source actions available"):c.NC("editor.action.source.noneMessage","No source actions available"),{include:l.yN.Source.contains(i.kind)?i.kind:l.yN.None,includeSourceActions:!0,onlyIncludePreferredActions:i.preferred},i.apply,l.aQ.SourceAction)}}class b extends i.R6{constructor(){super({id:a.uH,label:c.NC("organizeImports.label","Organize Imports"),alias:"Organize Imports",precondition:d.Ao.and(s.u.writable,g(l.yN.SourceOrganizeImports)),kbOpts:{kbExpr:s.u.textInputFocus,primary:1581,weight:100}})}run(e,t){return m(t,c.NC("editor.action.organize.noneMessage","No organize imports action available"),{include:l.yN.SourceOrganizeImports,includeSourceActions:!0},"ifSingle",l.aQ.OrganizeImports)}}class y extends i.R6{constructor(){super({id:a.TM,label:c.NC("fixAll.label","Fix All"),alias:"Fix All",precondition:d.Ao.and(s.u.writable,g(l.yN.SourceFixAll))})}run(e,t){return m(t,c.NC("fixAll.noneMessage","No fix all action available"),{include:l.yN.SourceFixAll,includeSourceActions:!0},"ifSingle",l.aQ.FixAll)}}class w extends i.R6{constructor(){super({id:a.pZ,label:c.NC("autoFix.label","Auto Fix..."),alias:"Auto Fix...",precondition:d.Ao.and(s.u.writable,g(l.yN.QuickFix)),kbOpts:{kbExpr:s.u.textInputFocus,primary:1625,mac:{primary:2649},weight:100}})}run(e,t){return m(t,c.NC("editor.action.autoFix.noneMessage","No auto fixes available"),{include:l.yN.QuickFix,onlyIncludePreferredActions:!0},"ifSingle",l.aQ.AutoFix)}}var S=o(86522),k=o(92328),N=o(43357);(0,i._K)(h.G.ID,h.G,3),(0,i._K)(S.f.ID,S.f,4),(0,i.Qr)(_),(0,i.Qr)(C),(0,i.Qr)(v),(0,i.Qr)(b),(0,i.Qr)(w),(0,i.Qr)(y),(0,i.fK)(new f),N.B.as(k.IP.Configuration).registerConfiguration(Object.assign(Object.assign({},n.wk),{properties:{"editor.codeActionWidget.showHeaders":{type:"boolean",scope:5,description:c.NC("showCodeActionHeaders","Enable/disable showing group headers in the Code Action menu."),default:!0}}})),N.B.as(k.IP.Configuration).registerConfiguration(Object.assign(Object.assign({},n.wk),{properties:{"editor.codeActionWidget.includeNearbyQuickfixes":{type:"boolean",scope:5,description:c.NC("includeNearbyQuickfixes","Enable/disable showing nearest quickfix within a line when not currently on a diagnostic."),default:!1}}}))},32714:(e,t,o)=>{o.d(t,{G:()=>H});var i,n=o(32959),r=o(46403),s=o(74146),a=o(29158),c=o(65096),d=o(65631),l=o(78519),h=o(65441),u=o(47150),g=o(53222),p=o(75256),m=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},_=function(e,t){return function(o,i){t(o,i,e)}};let f=i=class{constructor(e){this.keybindingService=e}getResolver(){const e=new a.o((()=>this.keybindingService.getKeybindings().filter((e=>i.codeActionCommands.indexOf(e.command)>=0)).filter((e=>e.resolvedKeybinding)).map((e=>{let t=e.commandArgs;return e.command===u.uH?t={kind:g.yN.SourceOrganizeImports.value}:e.command===u.TM&&(t={kind:g.yN.SourceFixAll.value}),Object.assign({resolvedKeybinding:e.resolvedKeybinding},g.wZ.fromUser(t,{kind:g.yN.None,apply:"never"}))}))));return t=>{if(t.kind){const o=this.bestKeybindingForCodeAction(t,e.value);return null===o||void 0===o?void 0:o.resolvedKeybinding}}}bestKeybindingForCodeAction(e,t){if(!e.kind)return;const o=new g.yN(e.kind);return t.filter((e=>e.kind.contains(o))).filter((t=>!t.preferred||e.isPreferred)).reduceRight(((e,t)=>e?e.kind.contains(t.kind)?t:e:t),void 0)}};f.codeActionCommands=[u.Bb,u.RB,u.MN,u.uH,u.TM],f=i=m([_(0,p.d)],f);o(46962);var C=o(77409),v=(o(24988),o(18420));const b=Object.freeze({kind:g.yN.Empty,title:(0,v.NC)("codeAction.widget.id.more","More Actions...")}),y=Object.freeze([{kind:g.yN.QuickFix,title:(0,v.NC)("codeAction.widget.id.quickfix","Quick Fix")},{kind:g.yN.RefactorExtract,title:(0,v.NC)("codeAction.widget.id.extract","Extract"),icon:C.l.wrench},{kind:g.yN.RefactorInline,title:(0,v.NC)("codeAction.widget.id.inline","Inline"),icon:C.l.wrench},{kind:g.yN.RefactorRewrite,title:(0,v.NC)("codeAction.widget.id.convert","Rewrite"),icon:C.l.wrench},{kind:g.yN.RefactorMove,title:(0,v.NC)("codeAction.widget.id.move","Move"),icon:C.l.wrench},{kind:g.yN.SurroundWith,title:(0,v.NC)("codeAction.widget.id.surround","Surround With"),icon:C.l.symbolSnippet},{kind:g.yN.Source,title:(0,v.NC)("codeAction.widget.id.source","Source Action"),icon:C.l.symbolFile},b]);var w,S=o(86522),k=o(98594),N=o(26890),x=o(99740),L=o(77819),A=o(8022),P=o(64606),D=o(81266),I=o(28322),M=o(43980),E=o(39707),O=o(41335),R=o(89748),T=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},F=function(e,t){return function(o,i){t(o,i,e)}},B=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};let H=w=class extends c.JT{static get(e){return e.getContribution(w.ID)}constructor(e,t,o,i,n,r,s,d,l,h){super(),this._commandService=s,this._configurationService=d,this._actionWidgetService=l,this._instantiationService=h,this._activeCodeActions=this._register(new c.XK),this._showDisabled=!1,this._disposed=!1,this._editor=e,this._model=this._register(new R.Jt(this._editor,n.codeActionProvider,t,o,r,d)),this._register(this._model.onDidChangeState((e=>this.update(e)))),this._lightBulbWidget=new a.o((()=>{const e=this._editor.getContribution(S.f.ID);return e&&this._register(e.onClick((e=>this.showCodeActionList(e.actions,e,{includeDisabledActions:!1,fromLightbulb:!0})))),e})),this._resolver=i.createInstance(f),this._register(this._editor.onDidLayoutChange((()=>this._actionWidgetService.hide())))}dispose(){this._disposed=!0,super.dispose()}showCodeActions(e,t,o){return this.showCodeActionList(t,o,{includeDisabledActions:!1,fromLightbulb:!1})}manualTriggerAtCurrentPosition(e,t,o,i){var n;if(!this._editor.hasModel())return;null===(n=k.O.get(this._editor))||void 0===n||n.closeMessage();const r=this._editor.getPosition();this._trigger({type:1,triggerAction:t,filter:o,autoApply:i,context:{notAvailableMessage:e,position:r}})}_trigger(e){return this._model.trigger(e)}_applyCodeAction(e,t,o){return B(this,void 0,void 0,(function*(){try{yield this._instantiationService.invokeFunction(u.LR,e,u.UX.FromCodeActions,{preview:o,editor:this._editor})}finally{t&&this._trigger({type:2,triggerAction:g.aQ.QuickFix,filter:{}})}}))}update(e){var t,o,i,n,r,a,c;return B(this,void 0,void 0,(function*(){if(1!==e.type)return void(null===(t=this._lightBulbWidget.rawValue)||void 0===t||t.hide());let d;try{d=yield e.actions}catch(l){return void(0,s.dL)(l)}if(!this._disposed)if(null===(o=this._lightBulbWidget.value)||void 0===o||o.update(d,e.trigger,e.position),1===e.trigger.type){if(null===(i=e.trigger.filter)||void 0===i?void 0:i.include){const t=this.tryGetValidActionToApply(e.trigger,d);if(t){try{null===(n=this._lightBulbWidget.value)||void 0===n||n.hide(),yield this._applyCodeAction(t,!1,!1)}finally{d.dispose()}return}if(e.trigger.context){const t=this.getInvalidActionThatWouldHaveBeenApplied(e.trigger,d);if(t&&t.action.disabled)return null===(r=k.O.get(this._editor))||void 0===r||r.showMessage(t.action.disabled,e.trigger.context.position),void d.dispose()}}const t=!!(null===(a=e.trigger.filter)||void 0===a?void 0:a.include);if(e.trigger.context&&(!d.allActions.length||!t&&!d.validActions.length))return null===(c=k.O.get(this._editor))||void 0===c||c.showMessage(e.trigger.context.notAvailableMessage,e.trigger.context.position),this._activeCodeActions.value=d,void d.dispose();this._activeCodeActions.value=d,this.showCodeActionList(d,this.toCoords(e.position),{includeDisabledActions:t,fromLightbulb:!1})}else this._actionWidgetService.isVisible?d.dispose():this._activeCodeActions.value=d}))}getInvalidActionThatWouldHaveBeenApplied(e,t){if(t.allActions.length)return"first"===e.autoApply&&0===t.validActions.length||"ifSingle"===e.autoApply&&1===t.allActions.length?t.allActions.find((e=>{let{action:t}=e;return t.disabled})):void 0}tryGetValidActionToApply(e,t){if(t.validActions.length)return"first"===e.autoApply&&t.validActions.length>0||"ifSingle"===e.autoApply&&1===t.validActions.length?t.validActions[0]:void 0}showCodeActionList(e,t,o){return B(this,void 0,void 0,(function*(){const i=this._editor.createDecorationsCollection(),n=this._editor.getDomNode();if(!n)return;const s=o.includeDisabledActions&&(this._showDisabled||0===e.validActions.length)?e.allActions:e.validActions;if(!s.length)return;const a=d.L.isIPosition(t)?this.toCoords(t):t,c={onSelect:(e,t)=>B(this,void 0,void 0,(function*(){this._applyCodeAction(e,!0,!!t),this._actionWidgetService.hide(),i.clear()})),onHide:()=>{var e;null===(e=this._editor)||void 0===e||e.focus(),i.clear()},onHover:(e,t)=>B(this,void 0,void 0,(function*(){var o;if(yield e.resolve(t),!t.isCancellationRequested)return{canPreview:!!(null===(o=e.action.edit)||void 0===o?void 0:o.edits.length)}})),onFocus:e=>{var t,o;if(e&&e.highlightRange&&e.action.diagnostics){const n=[{range:e.action.diagnostics[0],options:w.DECORATION}];i.set(n);const s=e.action.diagnostics[0],a=null===(o=null===(t=this._editor.getModel())||void 0===t?void 0:t.getWordAtPosition({lineNumber:s.startLineNumber,column:s.startColumn}))||void 0===o?void 0:o.word;r.i7((0,v.NC)("editingNewSelection","Context: {0} at line {1} and column {2}.",a,s.startLineNumber,s.startColumn))}else i.clear()}};this._actionWidgetService.show("codeActionWidget",!0,function(e,t,o){if(!t)return e.map((e=>{var t;return{kind:"action",item:e,group:b,disabled:!!e.action.disabled,label:e.action.disabled||e.action.title,canPreview:!!(null===(t=e.action.edit)||void 0===t?void 0:t.edits.length)}}));const i=y.map((e=>({group:e,actions:[]})));for(const r of e){const e=r.action.kind?new g.yN(r.action.kind):g.yN.None;for(const t of i)if(t.group.kind.contains(e)){t.actions.push(r);break}}const n=[];for(const r of i)if(r.actions.length){n.push({kind:"header",group:r.group});for(const e of r.actions)n.push({kind:"action",item:e,group:r.group,label:e.action.title,disabled:!!e.action.disabled,keybinding:o(e.action)})}return n}(s,this._shouldShowHeaders(),this._resolver.getResolver()),c,a,n,this._getActionBarActions(e,t,o))}))}toCoords(e){if(!this._editor.hasModel())return{x:0,y:0};this._editor.revealPosition(e,1),this._editor.render();const t=this._editor.getScrolledVisiblePosition(e),o=(0,n.i)(this._editor.getDomNode());return{x:o.left+t.left,y:o.top+t.top+t.height}}_shouldShowHeaders(){var e;const t=null===(e=this._editor)||void 0===e?void 0:e.getModel();return this._configurationService.getValue("editor.codeActionWidget.showHeaders",{resource:null===t||void 0===t?void 0:t.uri})}_getActionBarActions(e,t,o){if(o.fromLightbulb)return[];const i=e.documentation.map((e=>{var t;return{id:e.id,label:e.title,tooltip:null!==(t=e.tooltip)&&void 0!==t?t:"",class:void 0,enabled:!0,run:()=>{var t;return this._commandService.executeCommand(e.id,...null!==(t=e.arguments)&&void 0!==t?t:[])}}}));return o.includeDisabledActions&&e.validActions.length>0&&e.allActions.length!==e.validActions.length&&i.push(this._showDisabled?{id:"hideMoreActions",label:(0,v.NC)("hideMoreActions","Hide Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!1,this.showCodeActionList(e,t,o))}:{id:"showMoreActions",label:(0,v.NC)("showMoreActions","Show Disabled"),enabled:!0,tooltip:"",class:void 0,run:()=>(this._showDisabled=!0,this.showCodeActionList(e,t,o))}),i}};H.ID="editor.contrib.codeActionController",H.DECORATION=l.qx.register({description:"quickfix-highlight",className:"quickfix-edit-highlight"}),H=w=T([F(1,D.lT),F(2,A.i6),F(3,P.TG),F(4,h.p),F(5,I.ek),F(6,x.H),F(7,L.Ui),F(8,N.v),F(9,P.TG)],H),(0,O.Ic)(((e,t)=>{var o,i;o=".quickfix-edit-highlight",(i=e.getColor(M.MUv))&&t.addRule(".monaco-editor ".concat(o," { background-color: ").concat(i,"; }"));const n=e.getColor(M.EiJ);n&&t.addRule(".monaco-editor .quickfix-edit-highlight { border: 1px ".concat((0,E.c3)(e.type)?"dotted":"solid"," ").concat(n,"; box-sizing: border-box; }"))}))},89748:(e,t,o)=>{o.d(t,{Jt:()=>v,fj:()=>m});var i=o(71049),n=o(74146),r=o(13880),s=o(65096),a=o(44641),c=o(65631),d=o(96601),l=o(8022),h=o(28322),u=o(53222),g=o(47150),p=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const m=new l.uy("supportedCodeAction","");class _ extends s.JT{constructor(e,t,o){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:250;super(),this._editor=e,this._markerService=t,this._signalChange=o,this._delay=n,this._autoTriggerTimer=this._register(new i._F),this._register(this._markerService.onMarkerChanged((e=>this._onMarkerChanges(e)))),this._register(this._editor.onDidChangeCursorPosition((()=>this._tryAutoTrigger())))}trigger(e){const t=this._getRangeOfSelectionUnlessWhitespaceEnclosed(e);this._signalChange(t?{trigger:e,selection:t}:void 0)}_onMarkerChanges(e){const t=this._editor.getModel();t&&e.some((e=>(0,a.Xy)(e,t.uri)))&&this._tryAutoTrigger()}_tryAutoTrigger(){this._autoTriggerTimer.cancelAndSet((()=>{this.trigger({type:2,triggerAction:u.aQ.Default})}),this._delay)}_getRangeOfSelectionUnlessWhitespaceEnclosed(e){if(!this._editor.hasModel())return;const t=this._editor.getModel(),o=this._editor.getSelection();if(o.isEmpty()&&2===e.type){const{lineNumber:e,column:i}=o.getPosition(),n=t.getLineContent(e);if(0===n.length)return;if(1===i){if(/\s/.test(n[0]))return}else if(i===t.getLineMaxColumn(e)){if(/\s/.test(n[n.length-1]))return}else if(/\s/.test(n[i-2])&&/\s/.test(n[i-1]))return}return o}}var f;!function(e){e.Empty={type:0};e.Triggered=class{constructor(e,t,o){this.trigger=e,this.position=t,this._cancellablePromise=o,this.type=1,this.actions=o.catch((e=>{if((0,n.n2)(e))return C;throw e}))}cancel(){this._cancellablePromise.cancel()}}}(f||(f={}));const C=Object.freeze({allActions:[],validActions:[],dispose:()=>{},documentation:[],hasAutoFix:!1});class v extends s.JT{constructor(e,t,o,i,n,a){super(),this._editor=e,this._registry=t,this._markerService=o,this._progressService=n,this._configurationService=a,this._codeActionOracle=this._register(new s.XK),this._state=f.Empty,this._onDidChangeState=this._register(new r.Q5),this.onDidChangeState=this._onDidChangeState.event,this._disposed=!1,this._supportedCodeActions=m.bindTo(i),this._register(this._editor.onDidChangeModel((()=>this._update()))),this._register(this._editor.onDidChangeModelLanguage((()=>this._update()))),this._register(this._registry.onDidChange((()=>this._update()))),this._update()}dispose(){this._disposed||(this._disposed=!0,super.dispose(),this.setState(f.Empty,!0))}_settingEnabledNearbyQuickfixes(){var e;const t=null===(e=this._editor)||void 0===e?void 0:e.getModel();return!!this._configurationService&&this._configurationService.getValue("editor.codeActionWidget.includeNearbyQuickfixes",{resource:null===t||void 0===t?void 0:t.uri})}_update(){if(this._disposed)return;this._codeActionOracle.value=void 0,this.setState(f.Empty);const e=this._editor.getModel();if(e&&this._registry.has(e)&&!this._editor.getOption(90)){const t=this._registry.all(e).flatMap((e=>{var t;return null!==(t=e.providedCodeActionKinds)&&void 0!==t?t:[]}));this._supportedCodeActions.set(t.join(" ")),this._codeActionOracle.value=new _(this._editor,this._markerService,(t=>{var o;if(!t)return void this.setState(f.Empty);const n=t.selection.getStartPosition(),r=(0,i.PG)((o=>p(this,void 0,void 0,(function*(){var i,n,r,s,a,l;if(this._settingEnabledNearbyQuickfixes()&&1===t.trigger.type&&(t.trigger.triggerAction===u.aQ.QuickFix||(null===(n=null===(i=t.trigger.filter)||void 0===i?void 0:i.include)||void 0===n?void 0:n.contains(u.yN.QuickFix)))){const i=yield(0,g.aI)(this._registry,e,t.selection,t.trigger,h.Ex.None,o);if(o.isCancellationRequested)return C;if(!(null===(r=i.validActions)||void 0===r?void 0:r.some((e=>!!e.action.kind&&u.yN.QuickFix.contains(new u.yN(e.action.kind)))))){const n=this._markerService.read({resource:e.uri});if(n.length>0){const r=t.selection.getPosition();let p=r,m=Number.MAX_VALUE,_=!1;for(const e of n){const t=e.endColumn,o=e.endLineNumber,i=e.startLineNumber;(o===r.lineNumber||i===r.lineNumber)&&Math.abs(r.column-t)<m&&(m=Math.abs(r.column-t),_=!0,p=new c.L(o,t))}if(_){const n={type:t.trigger.type,triggerAction:t.trigger.triggerAction,filter:{include:(null===(s=t.trigger.filter)||void 0===s?void 0:s.include)?null===(a=t.trigger.filter)||void 0===a?void 0:a.include:u.yN.QuickFix},autoApply:t.trigger.autoApply,context:{notAvailableMessage:(null===(l=t.trigger.context)||void 0===l?void 0:l.notAvailableMessage)||"",position:p}},r=new d.Y(p.lineNumber,p.column,p.lineNumber,p.column),c=yield(0,g.aI)(this._registry,e,r,n,h.Ex.None,o),m=[...i.validActions];return 0!==c.validActions.length&&(c.validActions.forEach((e=>{e.highlightRange=e.action.isPreferred})),m.push(...c.validActions)),{validActions:m,allActions:i.allActions,documentation:i.documentation,hasAutoFix:i.hasAutoFix,dispose:()=>{i.dispose()}}}}}}return(0,g.aI)(this._registry,e,t.selection,t.trigger,h.Ex.None,o)}))));1===t.trigger.type&&(null===(o=this._progressService)||void 0===o||o.showWhile(r,250)),this.setState(new f.Triggered(t.trigger,n,r))}),void 0),this._codeActionOracle.value.trigger({type:2,triggerAction:u.aQ.Default})}else this._supportedCodeActions.reset()}trigger(e){var t;null===(t=this._codeActionOracle.value)||void 0===t||t.trigger(e)}setState(e,t){e!==this._state&&(1===this._state.type&&this._state.cancel(),this._state=e,t||this._disposed||this._onDidChangeState.fire(e))}}},86522:(e,t,o)=>{o.d(t,{f:()=>f});var i,n,r=o(32959),s=o(84100),a=o(77409),c=o(13880),d=o(65096),l=o(79730),h=o(23291),u=o(47150),g=o(18420),p=o(75256),m=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},_=function(e,t){return function(o,i){t(o,i,e)}};!function(e){e.Hidden={type:0};e.Showing=class{constructor(e,t,o,i){this.actions=e,this.trigger=t,this.editorPosition=o,this.widgetPosition=i,this.type=1}}}(n||(n={}));let f=i=class extends d.JT{constructor(e,t){super(),this._editor=e,this._onClick=this._register(new c.Q5),this.onClick=this._onClick.event,this._state=n.Hidden,this._domNode=r.$("div.lightBulbWidget"),this._register(s.o.ignoreTarget(this._domNode)),this._editor.addContentWidget(this),this._register(this._editor.onDidChangeModelContent((e=>{const t=this._editor.getModel();(1!==this.state.type||!t||this.state.editorPosition.lineNumber>=t.getLineCount())&&this.hide()}))),this._register(r.GQ(this._domNode,(e=>{if(1!==this.state.type)return;this._editor.focus(),e.preventDefault();const{top:t,height:o}=r.i(this._domNode),i=this._editor.getOption(66);let n=Math.floor(i/3);null!==this.state.widgetPosition.position&&this.state.widgetPosition.position.lineNumber<this.state.editorPosition.lineNumber&&(n+=i),this._onClick.fire({x:e.posx,y:t+o+n,actions:this.state.actions,trigger:this.state.trigger})}))),this._register(r.nm(this._domNode,"mouseenter",(e=>{1===(1&e.buttons)&&this.hide()}))),this._register(this._editor.onDidChangeConfiguration((e=>{e.hasChanged(64)&&!this._editor.getOption(64).enabled&&this.hide()}))),this._register(c.ju.runAndSubscribe(t.onDidUpdateKeybindings,(()=>{var e,o,i,n;this._preferredKbLabel=null!==(o=null===(e=t.lookupKeybinding(u.pZ))||void 0===e?void 0:e.getLabel())&&void 0!==o?o:void 0,this._quickFixKbLabel=null!==(n=null===(i=t.lookupKeybinding(u.cz))||void 0===i?void 0:i.getLabel())&&void 0!==n?n:void 0,this._updateLightBulbTitleAndIcon()})))}dispose(){super.dispose(),this._editor.removeContentWidget(this)}getId(){return"LightBulbWidget"}getDomNode(){return this._domNode}getPosition(){return 1===this._state.type?this._state.widgetPosition:null}update(e,t,o){if(e.validActions.length<=0)return this.hide();const r=this._editor.getOptions();if(!r.get(64).enabled)return this.hide();const s=this._editor.getModel();if(!s)return this.hide();const{lineNumber:a,column:c}=s.validatePosition(o),d=s.getOptions().tabSize,l=r.get(50),u=s.getLineContent(a),g=(0,h.q)(u,d),p=e=>e>2&&this._editor.getTopForLineNumber(e)===this._editor.getTopForLineNumber(e-1);let m=a;if(!(l.spaceWidth*g>22))if(a>1&&!p(a-1))m-=1;else if(p(a+1)){if(c*l.spaceWidth<22)return this.hide()}else m+=1;this.state=new n.Showing(e,t,o,{position:{lineNumber:m,column:1},preference:i._posPref}),this._editor.layoutContentWidget(this)}hide(){this.state!==n.Hidden&&(this.state=n.Hidden,this._editor.layoutContentWidget(this))}get state(){return this._state}set state(e){this._state=e,this._updateLightBulbTitleAndIcon()}_updateLightBulbTitleAndIcon(){1===this.state.type&&this.state.actions.hasAutoFix&&(this._domNode.classList.remove(...l.k.asClassNameArray(a.l.lightBulb)),this._domNode.classList.add(...l.k.asClassNameArray(a.l.lightbulbAutofix)),this._preferredKbLabel)?this.title=g.NC("preferredcodeActionWithKb","Show Code Actions. Preferred Quick Fix Available ({0})",this._preferredKbLabel):(this._domNode.classList.remove(...l.k.asClassNameArray(a.l.lightbulbAutofix)),this._domNode.classList.add(...l.k.asClassNameArray(a.l.lightBulb)),this._quickFixKbLabel?this.title=g.NC("codeActionWithKb","Show Code Actions ({0})",this._quickFixKbLabel):this.title=g.NC("codeAction","Show Code Actions"))}set title(e){this._domNode.title=e}};f.ID="editor.contrib.lightbulbWidget",f._posPref=[0],f=i=m([_(1,p.d)],f)},53222:(e,t,o)=>{o.d(t,{EU:()=>a,Yl:()=>c,aQ:()=>i,bA:()=>h,wZ:()=>l,yN:()=>s});var i,n=o(74146),r=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class s{constructor(e){this.value=e}equals(e){return this.value===e.value}contains(e){return this.equals(e)||""===this.value||e.value.startsWith(this.value+s.sep)}intersects(e){return this.contains(e)||e.contains(this)}append(e){return new s(this.value+s.sep+e)}}function a(e,t){return!(e.include&&!e.include.intersects(t))&&((!e.excludes||!e.excludes.some((o=>d(t,o,e.include))))&&!(!e.includeSourceActions&&s.Source.contains(t)))}function c(e,t){const o=t.kind?new s(t.kind):void 0;return!!(!e.include||o&&e.include.contains(o))&&(!(e.excludes&&o&&e.excludes.some((t=>d(o,t,e.include))))&&(!(!e.includeSourceActions&&o&&s.Source.contains(o))&&!(e.onlyIncludePreferredActions&&!t.isPreferred)))}function d(e,t,o){return!!t.contains(e)&&(!o||!t.contains(o))}s.sep=".",s.None=new s("@@none@@"),s.Empty=new s(""),s.QuickFix=new s("quickfix"),s.Refactor=new s("refactor"),s.RefactorExtract=s.Refactor.append("extract"),s.RefactorInline=s.Refactor.append("inline"),s.RefactorMove=s.Refactor.append("move"),s.RefactorRewrite=s.Refactor.append("rewrite"),s.Notebook=new s("notebook"),s.Source=new s("source"),s.SourceOrganizeImports=s.Source.append("organizeImports"),s.SourceFixAll=s.Source.append("fixAll"),s.SurroundWith=s.Refactor.append("surround"),function(e){e.Refactor="refactor",e.RefactorPreview="refactor preview",e.Lightbulb="lightbulb",e.Default="other (default)",e.SourceAction="source action",e.QuickFix="quick fix action",e.FixAll="fix all",e.OrganizeImports="organize imports",e.AutoFix="auto fix",e.QuickFixHover="quick fix hover window",e.OnSave="save participants",e.ProblemsView="problems view"}(i||(i={}));class l{static fromUser(e,t){return e&&"object"===typeof e?new l(l.getKindFromUser(e,t.kind),l.getApplyFromUser(e,t.apply),l.getPreferredUser(e)):new l(t.kind,t.apply,!1)}static getApplyFromUser(e,t){switch("string"===typeof e.apply?e.apply.toLowerCase():""){case"first":return"first";case"never":return"never";case"ifsingle":return"ifSingle";default:return t}}static getKindFromUser(e,t){return"string"===typeof e.kind?new s(e.kind):t}static getPreferredUser(e){return"boolean"===typeof e.preferred&&e.preferred}constructor(e,t,o){this.kind=e,this.apply=t,this.preferred=o}}class h{constructor(e,t,o){this.action=e,this.provider=t,this.highlightRange=o}resolve(e){var t;return r(this,void 0,void 0,(function*(){if((null===(t=this.provider)||void 0===t?void 0:t.resolveCodeAction)&&!this.action.edit){let t;try{t=yield this.provider.resolveCodeAction(this.action,e)}catch(o){(0,n.Cp)(o)}t&&(this.action.edit=t.edit)}return this}))}}},86779:(e,t,o)=>{o.r(t),o.d(t,{CodeLensContribution:()=>z});var i=o(71049),n=o(74146),r=o(65096),s=o(49039),a=o(95253),c=o(17683),d=o(98926),l=o(7388),h=o(63021),u=o(38821),g=o(26246),p=o(99740),m=o(65441),_=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class f{constructor(){this.lenses=[],this._disposables=new r.SL}dispose(){this._disposables.dispose()}get isDisposed(){return this._disposables.isDisposed}add(e,t){this._disposables.add(e);for(const o of e.lenses)this.lenses.push({symbol:o,provider:t})}}function C(e,t,o){return _(this,void 0,void 0,(function*(){const i=e.ordered(t),r=new Map,s=new f,a=i.map(((e,i)=>_(this,void 0,void 0,(function*(){r.set(e,i);try{const i=yield Promise.resolve(e.provideCodeLenses(t,o));i&&s.add(i,e)}catch(a){(0,n.Cp)(a)}}))));return yield Promise.all(a),s.lenses=s.lenses.sort(((e,t)=>e.symbol.range.startLineNumber<t.symbol.range.startLineNumber?-1:e.symbol.range.startLineNumber>t.symbol.range.startLineNumber?1:r.get(e.provider)<r.get(t.provider)?-1:r.get(e.provider)>r.get(t.provider)?1:e.symbol.range.startColumn<t.symbol.range.startColumn?-1:e.symbol.range.startColumn>t.symbol.range.startColumn?1:0)),s}))}p.P.registerCommand("_executeCodeLensProvider",(function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),i=1;i<t;i++)o[i-1]=arguments[i];let[s,a]=o;(0,h.p_)(u.o.isUri(s)),(0,h.p_)("number"===typeof a||!a);const{codeLensProvider:c}=e.get(m.p),d=e.get(g.q).getModel(s);if(!d)throw(0,n.b1)();const p=[],_=new r.SL;return C(c,d,l.T.None).then((e=>{_.add(e);const t=[];for(const o of e.lenses)void 0===a||null===a||Boolean(o.symbol.command)?p.push(o.symbol):a-- >0&&o.provider.resolveCodeLens&&t.push(Promise.resolve(o.provider.resolveCodeLens(d,o.symbol,l.T.None)).then((e=>p.push(e||o.symbol))));return Promise.all(t)})).then((()=>p)).finally((()=>{setTimeout((()=>_.dispose()),100)}))}));var v=o(13880),b=o(29413),y=o(17429),w=o(57832),S=o(64606),k=o(88463),N=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},x=function(e,t){return function(o,i){t(o,i,e)}};const L=(0,S.yh)("ICodeLensCache");class A{constructor(e,t){this.lineCount=e,this.data=t}}let P=class{constructor(e){this._fakeProvider=new class{provideCodeLenses(){throw new Error("not supported")}},this._cache=new b.z6(20,.75);(0,i.To)((()=>e.remove("codelens/cache",1)));const t="codelens/cache2",o=e.get(t,1,"{}");this._deserialize(o),v.ju.once(e.onWillSaveState)((o=>{o.reason===k.fk.SHUTDOWN&&e.store(t,this._serialize(),1,1)}))}put(e,t){const o=t.lenses.map((e=>{var t;return{range:e.symbol.range,command:e.symbol.command&&{id:"",title:null===(t=e.symbol.command)||void 0===t?void 0:t.title}}})),i=new f;i.add({lenses:o,dispose:()=>{}},this._fakeProvider);const n=new A(e.getLineCount(),i);this._cache.set(e.uri.toString(),n)}get(e){const t=this._cache.get(e.uri.toString());return t&&t.lineCount===e.getLineCount()?t.data:void 0}delete(e){this._cache.delete(e.uri.toString())}_serialize(){const e=Object.create(null);for(const[t,o]of this._cache){const i=new Set;for(const e of o.data.lenses)i.add(e.symbol.range.startLineNumber);e[t]={lineCount:o.lineCount,lines:[...i.values()]}}return JSON.stringify(e)}_deserialize(e){try{const t=JSON.parse(e);for(const e in t){const o=t[e],i=[];for(const e of o.lines)i.push({range:new y.e(e,1,e,11)});const n=new f;n.add({lenses:i,dispose(){}},this._fakeProvider),this._cache.set(e,new A(o.lineCount,n))}}catch(t){}}};P=N([x(0,k.Uy)],P),(0,w.z)(L,P,1);var D=o(32959),I=o(26805),M=o(78519);class E{constructor(e,t,o){this.afterColumn=1073741824,this.afterLineNumber=e,this.heightInPx=t,this._onHeight=o,this.suppressMouseDown=!0,this.domNode=document.createElement("div")}onComputedHeight(e){void 0===this._lastHeight?this._lastHeight=e:this._lastHeight!==e&&(this._lastHeight=e,this._onHeight())}isVisible(){return 0!==this._lastHeight&&this.domNode.hasAttribute("monaco-visible-view-zone")}}class O{constructor(e,t){this.allowEditorOverflow=!1,this.suppressMouseDown=!0,this._commands=new Map,this._isEmpty=!0,this._editor=e,this._id="codelens.widget-".concat(O._idPool++),this.updatePosition(t),this._domNode=document.createElement("span"),this._domNode.className="codelens-decoration"}withCommands(e,t){this._commands.clear();const o=[];let i=!1;for(let n=0;n<e.length;n++){const t=e[n];if(t&&(i=!0,t.command)){const i=(0,I.T)(t.command.title.trim());t.command.id?(o.push(D.$("a",{id:String(n),title:t.command.tooltip,role:"button"},...i)),this._commands.set(String(n),t.command)):o.push(D.$("span",{title:t.command.tooltip},...i)),n+1<e.length&&o.push(D.$("span",void 0,"\xa0|\xa0"))}}i?(D.mc(this._domNode,...o),this._isEmpty&&t&&this._domNode.classList.add("fadein"),this._isEmpty=!1):D.mc(this._domNode,D.$("span",void 0,"no commands"))}getCommand(e){return e.parentElement===this._domNode?this._commands.get(e.id):void 0}getId(){return this._id}getDomNode(){return this._domNode}updatePosition(e){const t=this._editor.getModel().getLineFirstNonWhitespaceColumn(e);this._widgetPosition={position:{lineNumber:e,column:t},preference:[1]}}getPosition(){return this._widgetPosition||null}}O._idPool=0;class R{constructor(){this._removeDecorations=[],this._addDecorations=[],this._addDecorationsCallbacks=[]}addDecoration(e,t){this._addDecorations.push(e),this._addDecorationsCallbacks.push(t)}removeDecoration(e){this._removeDecorations.push(e)}commit(e){const t=e.deltaDecorations(this._removeDecorations,this._addDecorations);for(let o=0,i=t.length;o<i;o++)this._addDecorationsCallbacks[o](t[o])}}const T=M.qx.register({collapseOnReplaceEdit:!0,description:"codelens"});class F{constructor(e,t,o,i,n,r){let s;this._isDisposed=!1,this._editor=t,this._data=e,this._decorationIds=[];const a=[];this._data.forEach(((e,t)=>{e.symbol.command&&a.push(e.symbol),o.addDecoration({range:e.symbol.range,options:T},(e=>this._decorationIds[t]=e)),s=s?y.e.plusRange(s,e.symbol.range):y.e.lift(e.symbol.range)})),this._viewZone=new E(s.startLineNumber-1,n,r),this._viewZoneId=i.addZone(this._viewZone),a.length>0&&(this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(a,!1))}_createContentWidgetIfNecessary(){this._contentWidget?this._editor.layoutContentWidget(this._contentWidget):(this._contentWidget=new O(this._editor,this._viewZone.afterLineNumber+1),this._editor.addContentWidget(this._contentWidget))}dispose(e,t){this._decorationIds.forEach(e.removeDecoration,e),this._decorationIds=[],null===t||void 0===t||t.removeZone(this._viewZoneId),this._contentWidget&&(this._editor.removeContentWidget(this._contentWidget),this._contentWidget=void 0),this._isDisposed=!0}isDisposed(){return this._isDisposed}isValid(){return this._decorationIds.some(((e,t)=>{const o=this._editor.getModel().getDecorationRange(e),i=this._data[t].symbol;return!(!o||y.e.isEmpty(i.range)!==o.isEmpty())}))}updateCodeLensSymbols(e,t){this._decorationIds.forEach(t.removeDecoration,t),this._decorationIds=[],this._data=e,this._data.forEach(((e,o)=>{t.addDecoration({range:e.symbol.range,options:T},(e=>this._decorationIds[o]=e))}))}updateHeight(e,t){this._viewZone.heightInPx=e,t.layoutZone(this._viewZoneId),this._contentWidget&&this._editor.layoutContentWidget(this._contentWidget)}computeIfNecessary(e){if(!this._viewZone.isVisible())return null;for(let t=0;t<this._decorationIds.length;t++){const o=e.getDecorationRange(this._decorationIds[t]);o&&(this._data[t].symbol.range=o)}return this._data}updateCommands(e){this._createContentWidgetIfNecessary(),this._contentWidget.withCommands(e,!0);for(let t=0;t<this._data.length;t++){const o=e[t];if(o){const{symbol:e}=this._data[t];e.command=o.command||e.command}}}getCommand(e){var t;return null===(t=this._contentWidget)||void 0===t?void 0:t.getCommand(e)}getLineNumber(){const e=this._editor.getModel().getDecorationRange(this._decorationIds[0]);return e?e.startLineNumber:-1}update(e){if(this.isValid()){const t=this._editor.getModel().getDecorationRange(this._decorationIds[0]);t&&(this._viewZone.afterLineNumber=t.startLineNumber-1,e.layoutZone(this._viewZoneId),this._contentWidget&&(this._contentWidget.updatePosition(t.startLineNumber),this._editor.layoutContentWidget(this._contentWidget)))}}}var B=o(18420),H=o(49431),W=o(67949),V=o(68200),Q=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},U=function(e,t){return function(o,i){t(o,i,e)}},j=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};let z=class{constructor(e,t,o,n,s,a){this._editor=e,this._languageFeaturesService=t,this._commandService=n,this._notificationService=s,this._codeLensCache=a,this._disposables=new r.SL,this._localToDispose=new r.SL,this._lenses=[],this._oldCodeLensModels=new r.SL,this._provideCodeLensDebounce=o.for(t.codeLensProvider,"CodeLensProvide",{min:250}),this._resolveCodeLensesDebounce=o.for(t.codeLensProvider,"CodeLensResolve",{min:250,salt:"resolve"}),this._resolveCodeLensesScheduler=new i.pY((()=>this._resolveCodeLensesInViewport()),this._resolveCodeLensesDebounce.default()),this._disposables.add(this._editor.onDidChangeModel((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeModelLanguage((()=>this._onModelChange()))),this._disposables.add(this._editor.onDidChangeConfiguration((e=>{(e.hasChanged(50)||e.hasChanged(19)||e.hasChanged(18))&&this._updateLensStyle(),e.hasChanged(17)&&this._onModelChange()}))),this._disposables.add(t.codeLensProvider.onDidChange(this._onModelChange,this)),this._onModelChange(),this._updateLensStyle()}dispose(){var e;this._localDispose(),this._disposables.dispose(),this._oldCodeLensModels.dispose(),null===(e=this._currentCodeLensModel)||void 0===e||e.dispose()}_getLayoutInfo(){const e=Math.max(1.3,this._editor.getOption(66)/this._editor.getOption(52));let t=this._editor.getOption(19);return(!t||t<5)&&(t=.9*this._editor.getOption(52)|0),{fontSize:t,codeLensHeight:t*e|0}}_updateLensStyle(){const{codeLensHeight:e,fontSize:t}=this._getLayoutInfo(),o=this._editor.getOption(18),i=this._editor.getOption(50),{style:n}=this._editor.getContainerDomNode();n.setProperty("--vscode-editorCodeLens-lineHeight","".concat(e,"px")),n.setProperty("--vscode-editorCodeLens-fontSize","".concat(t,"px")),n.setProperty("--vscode-editorCodeLens-fontFeatureSettings",i.fontFeatureSettings),o&&(n.setProperty("--vscode-editorCodeLens-fontFamily",o),n.setProperty("--vscode-editorCodeLens-fontFamilyDefault",c.hL.fontFamily)),this._editor.changeViewZones((t=>{for(const o of this._lenses)o.updateHeight(e,t)}))}_localDispose(){var e,t,o;null===(e=this._getCodeLensModelPromise)||void 0===e||e.cancel(),this._getCodeLensModelPromise=void 0,null===(t=this._resolveCodeLensesPromise)||void 0===t||t.cancel(),this._resolveCodeLensesPromise=void 0,this._localToDispose.clear(),this._oldCodeLensModels.clear(),null===(o=this._currentCodeLensModel)||void 0===o||o.dispose()}_onModelChange(){this._localDispose();const e=this._editor.getModel();if(!e)return;if(!this._editor.getOption(17)||e.isTooLargeForTokenization())return;const t=this._codeLensCache.get(e);if(t&&this._renderCodeLensSymbols(t),!this._languageFeaturesService.codeLensProvider.has(e))return void(t&&this._localToDispose.add((0,i.Vg)((()=>{const o=this._codeLensCache.get(e);t===o&&(this._codeLensCache.delete(e),this._onModelChange())}),3e4)));for(const i of this._languageFeaturesService.codeLensProvider.all(e))if("function"===typeof i.onDidChange){const e=i.onDidChange((()=>o.schedule()));this._localToDispose.add(e)}const o=new i.pY((()=>{var t;const r=Date.now();null===(t=this._getCodeLensModelPromise)||void 0===t||t.cancel(),this._getCodeLensModelPromise=(0,i.PG)((t=>C(this._languageFeaturesService.codeLensProvider,e,t))),this._getCodeLensModelPromise.then((t=>{this._currentCodeLensModel&&this._oldCodeLensModels.add(this._currentCodeLensModel),this._currentCodeLensModel=t,this._codeLensCache.put(e,t);const i=this._provideCodeLensDebounce.update(e,Date.now()-r);o.delay=i,this._renderCodeLensSymbols(t),this._resolveCodeLensesInViewportSoon()}),n.dL)}),this._provideCodeLensDebounce.get(e));this._localToDispose.add(o),this._localToDispose.add((0,r.OF)((()=>this._resolveCodeLensesScheduler.cancel()))),this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{var e;this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const o=[];let i=-1;this._lenses.forEach((e=>{e.isValid()&&i!==e.getLineNumber()?(e.update(t),i=e.getLineNumber()):o.push(e)}));const n=new R;o.forEach((e=>{e.dispose(n,t),this._lenses.splice(this._lenses.indexOf(e),1)})),n.commit(e)}))})),o.schedule(),this._resolveCodeLensesScheduler.cancel(),null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0}))),this._localToDispose.add(this._editor.onDidFocusEditorWidget((()=>{o.schedule()}))),this._localToDispose.add(this._editor.onDidBlurEditorText((()=>{o.cancel()}))),this._localToDispose.add(this._editor.onDidScrollChange((e=>{e.scrollTopChanged&&this._lenses.length>0&&this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add(this._editor.onDidLayoutChange((()=>{this._resolveCodeLensesInViewportSoon()}))),this._localToDispose.add((0,r.OF)((()=>{if(this._editor.getModel()){const e=s.Z.capture(this._editor);this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{this._disposeAllLenses(e,t)}))})),e.restore(this._editor)}else this._disposeAllLenses(void 0,void 0)}))),this._localToDispose.add(this._editor.onMouseDown((e=>{if(9!==e.target.type)return;let t=e.target.element;if("SPAN"===(null===t||void 0===t?void 0:t.tagName)&&(t=t.parentElement),"A"===(null===t||void 0===t?void 0:t.tagName))for(const o of this._lenses){const e=o.getCommand(t);if(e){this._commandService.executeCommand(e.id,...e.arguments||[]).catch((e=>this._notificationService.error(e)));break}}}))),o.schedule()}_disposeAllLenses(e,t){const o=new R;for(const i of this._lenses)i.dispose(o,t);e&&o.commit(e),this._lenses.length=0}_renderCodeLensSymbols(e){if(!this._editor.hasModel())return;const t=this._editor.getModel().getLineCount(),o=[];let i;for(const s of e.lenses){const e=s.symbol.range.startLineNumber;e<1||e>t||(i&&i[i.length-1].symbol.range.startLineNumber===e?i.push(s):(i=[s],o.push(i)))}if(!o.length&&!this._lenses.length)return;const n=s.Z.capture(this._editor),r=this._getLayoutInfo();this._editor.changeDecorations((e=>{this._editor.changeViewZones((t=>{const i=new R;let n=0,s=0;for(;s<o.length&&n<this._lenses.length;){const e=o[s][0].symbol.range.startLineNumber,a=this._lenses[n].getLineNumber();a<e?(this._lenses[n].dispose(i,t),this._lenses.splice(n,1)):a===e?(this._lenses[n].updateCodeLensSymbols(o[s],i),s++,n++):(this._lenses.splice(n,0,new F(o[s],this._editor,i,t,r.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),n++,s++)}for(;n<this._lenses.length;)this._lenses[n].dispose(i,t),this._lenses.splice(n,1);for(;s<o.length;)this._lenses.push(new F(o[s],this._editor,i,t,r.codeLensHeight,(()=>this._resolveCodeLensesInViewportSoon()))),s++;i.commit(e)}))})),n.restore(this._editor)}_resolveCodeLensesInViewportSoon(){this._editor.getModel()&&this._resolveCodeLensesScheduler.schedule()}_resolveCodeLensesInViewport(){var e;null===(e=this._resolveCodeLensesPromise)||void 0===e||e.cancel(),this._resolveCodeLensesPromise=void 0;const t=this._editor.getModel();if(!t)return;const o=[],r=[];if(this._lenses.forEach((e=>{const i=e.computeIfNecessary(t);i&&(o.push(i),r.push(e))})),0===o.length)return;const s=Date.now(),a=(0,i.PG)((e=>{const i=o.map(((o,i)=>{const s=new Array(o.length),a=o.map(((o,i)=>o.symbol.command||"function"!==typeof o.provider.resolveCodeLens?(s[i]=o.symbol,Promise.resolve(void 0)):Promise.resolve(o.provider.resolveCodeLens(t,o.symbol,e)).then((e=>{s[i]=e}),n.Cp)));return Promise.all(a).then((()=>{e.isCancellationRequested||r[i].isDisposed()||r[i].updateCommands(s)}))}));return Promise.all(i)}));this._resolveCodeLensesPromise=a,this._resolveCodeLensesPromise.then((()=>{const e=this._resolveCodeLensesDebounce.update(t,Date.now()-s);this._resolveCodeLensesScheduler.delay=e,this._currentCodeLensModel&&this._codeLensCache.put(t,this._currentCodeLensModel),this._oldCodeLensModels.clear(),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}),(e=>{(0,n.dL)(e),a===this._resolveCodeLensesPromise&&(this._resolveCodeLensesPromise=void 0)}))}getModel(){var e;return j(this,void 0,void 0,(function*(){return yield this._getCodeLensModelPromise,yield this._resolveCodeLensesPromise,(null===(e=this._currentCodeLensModel)||void 0===e?void 0:e.isDisposed)?void 0:this._currentCodeLensModel}))}};z.ID="css.editor.codeLens",z=Q([U(1,m.p),U(2,V.A),U(3,p.H),U(4,H.lT),U(5,L)],z),(0,a._K)(z.ID,z,1),(0,a.Qr)(class extends a.R6{constructor(){super({id:"codelens.showLensesInCurrentLine",precondition:d.u.hasCodeLensProvider,label:(0,B.NC)("showLensOnLine","Show CodeLens Commands For Current Line"),alias:"Show CodeLens Commands For Current Line"})}run(e,t){return j(this,void 0,void 0,(function*(){if(!t.hasModel())return;const o=e.get(W.eJ),i=e.get(p.H),n=e.get(H.lT),r=t.getSelection().positionLineNumber,s=t.getContribution(z.ID);if(!s)return;const a=yield s.getModel();if(!a)return;const c=[];for(const e of a.lenses)e.symbol.command&&e.symbol.range.startLineNumber===r&&c.push({label:e.symbol.command.title,command:e.symbol.command});if(0===c.length)return;const d=yield o.pick(c,{canPickMany:!1,placeHolder:(0,B.NC)("placeHolder","Select a command")});if(!d)return;let l=d.command;if(a.isDisposed){const e=yield s.getModel(),t=null===e||void 0===e?void 0:e.lenses.find((e=>{var t;return e.symbol.range.startLineNumber===r&&(null===(t=e.symbol.command)||void 0===t?void 0:t.title)===l.title}));if(!t||!t.symbol.command)return;l=t.symbol.command}try{yield i.executeCommand(l.id,...l.arguments||[])}catch(h){n.error(h)}}))}})},53921:(e,t,o)=>{o.d(t,{E:()=>g,R:()=>p});var i=o(7388),n=o(74146),r=o(38821),s=o(17429),a=o(26246),c=o(99740),d=o(65441),l=o(2587),h=o(77819),u=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};function g(e,t,o){let i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return u(this,void 0,void 0,(function*(){return C(new m,e,t,o,i)}))}function p(e,t,o,i){return Promise.resolve(o.provideColorPresentations(e,t,i))}class m{constructor(){}compute(e,t,o,i){return u(this,void 0,void 0,(function*(){const n=yield e.provideDocumentColors(t,o);if(Array.isArray(n))for(const t of n)i.push({colorInfo:t,provider:e});return Array.isArray(n)}))}}class _{constructor(){}compute(e,t,o,i){return u(this,void 0,void 0,(function*(){const n=yield e.provideDocumentColors(t,o);if(Array.isArray(n))for(const e of n)i.push({range:e.range,color:[e.color.red,e.color.green,e.color.blue,e.color.alpha]});return Array.isArray(n)}))}}class f{constructor(e){this.colorInfo=e}compute(e,t,o,n){return u(this,void 0,void 0,(function*(){const o=yield e.provideColorPresentations(t,this.colorInfo,i.T.None);return Array.isArray(o)&&n.push(...o),Array.isArray(o)}))}}function C(e,t,o,i,r){return u(this,void 0,void 0,(function*(){let s,a=!1;const c=[],d=t.ordered(o);for(let t=d.length-1;t>=0;t--){const r=d[t];if(r instanceof l.G)s=r;else try{(yield e.compute(r,o,i,c))&&(a=!0)}catch(h){(0,n.Cp)(h)}}return a?c:s&&r?(yield e.compute(s,o,i,c),c):[]}))}function v(e,t){const{colorProvider:o}=e.get(d.p),i=e.get(a.q).getModel(t);if(!i)throw(0,n.b1)();return{model:i,colorProviderRegistry:o,isDefaultColorDecoratorsEnabled:e.get(h.Ui).getValue("editor.defaultColorDecorators",{resource:t})}}c.P.registerCommand("_executeDocumentColorProvider",(function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),s=1;s<t;s++)o[s-1]=arguments[s];const[a]=o;if(!(a instanceof r.o))throw(0,n.b1)();const{model:c,colorProviderRegistry:d,isDefaultColorDecoratorsEnabled:l}=v(e,a);return C(new _,d,c,i.T.None,l)})),c.P.registerCommand("_executeColorPresentationProvider",(function(e){for(var t=arguments.length,o=new Array(t>1?t-1:0),a=1;a<t;a++)o[a-1]=arguments[a];const[c,d]=o,{uri:l,range:h}=d;if(!(l instanceof r.o)||!Array.isArray(c)||4!==c.length||!s.e.isIRange(h))throw(0,n.b1)();const{model:u,colorProviderRegistry:g,isDefaultColorDecoratorsEnabled:p}=v(e,l),[m,_,b,y]=c;return C(new f({range:h,color:{red:m,green:_,blue:b,alpha:y}}),g,u,i.T.None,p)}))},22667:(e,t,o)=>{o.r(t),o.d(t,{ColorContribution:()=>l});var i=o(65096),n=o(95253),r=o(17429),s=o(732),a=o(4222),c=o(29596),d=o(24250);class l extends i.JT{constructor(e){super(),this._editor=e,this._register(e.onMouseDown((e=>this.onMouseDown(e))))}dispose(){super.dispose()}onMouseDown(e){const t=this._editor.getOption(146);if("click"!==t&&"clickAndHover"!==t)return;const o=e.target;if(6!==o.type)return;if(!o.detail.injectedText)return;if(o.detail.injectedText.options.attachedData!==s.Ak)return;if(!o.range)return;const i=this._editor.getContribution(c.ModesHoverController.ID);if(i&&!i.isColorPickerVisible){const e=new r.e(o.range.startLineNumber,o.range.startColumn+1,o.range.endLineNumber,o.range.endColumn+1);i.showContentHover(e,1,0,!1,!0)}}}l.ID="editor.contrib.colorContribution",(0,n._K)(l.ID,l,2),d.Ae.register(a.nh)},732:(e,t,o)=>{o.d(t,{Ak:()=>w,if:()=>S});var i,n=o(71049),r=o(40476),s=o(74146),a=o(13880),c=o(65096),d=o(48497),l=o(31906),h=o(47583),u=o(95253),g=o(17429),p=o(78519),m=o(68200),_=o(65441),f=o(53921),C=o(77819),v=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},b=function(e,t){return function(o,i){t(o,i,e)}},y=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};const w=Object.create({});let S=i=class extends c.JT{constructor(e,t,o,n){super(),this._editor=e,this._configurationService=t,this._languageFeaturesService=o,this._localToDispose=this._register(new c.SL),this._decorationsIds=[],this._colorDatas=new Map,this._colorDecoratorIds=this._editor.createDecorationsCollection(),this._ruleFactory=new h.t7(this._editor),this._decoratorLimitReporter=new k,this._colorDecorationClassRefs=this._register(new c.SL),this._debounceInformation=n.for(o.colorProvider,"Document Colors",{min:i.RECOMPUTE_TIME}),this._register(e.onDidChangeModel((()=>{this._isColorDecoratorsEnabled=this.isEnabled(),this.updateColors()}))),this._register(e.onDidChangeModelLanguage((()=>this.updateColors()))),this._register(o.colorProvider.onDidChange((()=>this.updateColors()))),this._register(e.onDidChangeConfiguration((e=>{const t=this._isColorDecoratorsEnabled;this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(145);const o=t!==this._isColorDecoratorsEnabled||e.hasChanged(21),i=e.hasChanged(145);(o||i)&&(this._isColorDecoratorsEnabled?this.updateColors():this.removeAllDecorations())}))),this._timeoutTimer=null,this._computePromise=null,this._isColorDecoratorsEnabled=this.isEnabled(),this._isDefaultColorDecoratorsEnabled=this._editor.getOption(145),this.updateColors()}isEnabled(){const e=this._editor.getModel();if(!e)return!1;const t=e.getLanguageId(),o=this._configurationService.getValue(t);if(o&&"object"===typeof o){const e=o.colorDecorators;if(e&&void 0!==e.enable&&!e.enable)return e.enable}return this._editor.getOption(20)}static get(e){return e.getContribution(this.ID)}dispose(){this.stop(),this.removeAllDecorations(),super.dispose()}updateColors(){if(this.stop(),!this._isColorDecoratorsEnabled)return;const e=this._editor.getModel();e&&this._languageFeaturesService.colorProvider.has(e)&&(this._localToDispose.add(this._editor.onDidChangeModelContent((()=>{this._timeoutTimer||(this._timeoutTimer=new n._F,this._timeoutTimer.cancelAndSet((()=>{this._timeoutTimer=null,this.beginCompute()}),this._debounceInformation.get(e)))}))),this.beginCompute())}beginCompute(){return y(this,void 0,void 0,(function*(){this._computePromise=(0,n.PG)((e=>y(this,void 0,void 0,(function*(){const t=this._editor.getModel();if(!t)return[];const o=new d.G(!1),i=yield(0,f.E)(this._languageFeaturesService.colorProvider,t,e,this._isDefaultColorDecoratorsEnabled);return this._debounceInformation.update(t,o.elapsed()),i}))));try{const e=yield this._computePromise;this.updateDecorations(e),this.updateColorDecorators(e),this._computePromise=null}catch(e){(0,s.dL)(e)}}))}stop(){this._timeoutTimer&&(this._timeoutTimer.cancel(),this._timeoutTimer=null),this._computePromise&&(this._computePromise.cancel(),this._computePromise=null),this._localToDispose.clear()}updateDecorations(e){const t=e.map((e=>({range:{startLineNumber:e.colorInfo.range.startLineNumber,startColumn:e.colorInfo.range.startColumn,endLineNumber:e.colorInfo.range.endLineNumber,endColumn:e.colorInfo.range.endColumn},options:p.qx.EMPTY})));this._editor.changeDecorations((o=>{this._decorationsIds=o.deltaDecorations(this._decorationsIds,t),this._colorDatas=new Map,this._decorationsIds.forEach(((t,o)=>this._colorDatas.set(t,e[o])))}))}updateColorDecorators(e){this._colorDecorationClassRefs.clear();const t=[],o=this._editor.getOption(21);for(let n=0;n<e.length&&t.length<o;n++){const{red:o,green:i,blue:s,alpha:a}=e[n].colorInfo.color,c=new r.VS(Math.round(255*o),Math.round(255*i),Math.round(255*s),a),d="rgba(".concat(c.r,", ").concat(c.g,", ").concat(c.b,", ").concat(c.a,")"),h=this._colorDecorationClassRefs.add(this._ruleFactory.createClassNameRef({backgroundColor:d}));t.push({range:{startLineNumber:e[n].colorInfo.range.startLineNumber,startColumn:e[n].colorInfo.range.startColumn,endLineNumber:e[n].colorInfo.range.endLineNumber,endColumn:e[n].colorInfo.range.endColumn},options:{description:"colorDetector",before:{content:l.B4,inlineClassName:"".concat(h.className," colorpicker-color-decoration"),inlineClassNameAffectsLetterSpacing:!0,attachedData:w}}})}const i=o<e.length&&o;this._decoratorLimitReporter.update(e.length,i),this._colorDecoratorIds.set(t)}removeAllDecorations(){this._editor.removeDecorations(this._decorationsIds),this._decorationsIds=[],this._colorDecoratorIds.clear(),this._colorDecorationClassRefs.clear()}getColorData(e){const t=this._editor.getModel();if(!t)return null;const o=t.getDecorationsInRange(g.e.fromPositions(e,e)).filter((e=>this._colorDatas.has(e.id)));return 0===o.length?null:this._colorDatas.get(o[0].id)}isColorDecoration(e){return this._colorDecoratorIds.has(e)}};S.ID="editor.contrib.colorDetector",S.RECOMPUTE_TIME=1e3,S=i=v([b(1,C.Ui),b(2,_.p),b(3,m.A)],S);class k{constructor(){this._onDidChange=new a.Q5,this._computed=0,this._limited=!1}update(e,t){e===this._computed&&t===this._limited||(this._computed=e,this._limited=t,this._onDidChange.fire())}}(0,u._K)(S.ID,S,1)},4222:(e,t,o)=>{o.d(t,{nh:()=>T,PQ:()=>B});var i=o(71049),n=o(7388),r=o(40476),s=o(65096),a=o(17429),c=o(53921),d=o(732),l=o(13880);class h{get color(){return this._color}set color(e){this._color.equals(e)||(this._color=e,this._onDidChangeColor.fire(e))}get presentation(){return this.colorPresentations[this.presentationIndex]}get colorPresentations(){return this._colorPresentations}set colorPresentations(e){this._colorPresentations=e,this.presentationIndex>e.length-1&&(this.presentationIndex=0),this._onDidChangePresentation.fire(this.presentation)}constructor(e,t,o){this.presentationIndex=o,this._onColorFlushed=new l.Q5,this.onColorFlushed=this._onColorFlushed.event,this._onDidChangeColor=new l.Q5,this.onDidChangeColor=this._onDidChangeColor.event,this._onDidChangePresentation=new l.Q5,this.onDidChangePresentation=this._onDidChangePresentation.event,this.originalColor=e,this._color=e,this._colorPresentations=t}selectNextColorPresentation(){this.presentationIndex=(this.presentationIndex+1)%this.colorPresentations.length,this.flushColor(),this._onDidChangePresentation.fire(this.presentation)}guessColorPresentation(e,t){let o=-1;for(let i=0;i<this.colorPresentations.length;i++)if(t.toLowerCase()===this.colorPresentations[i].label){o=i;break}if(-1===o){const e=t.split("(")[0].toLowerCase();for(let t=0;t<this.colorPresentations.length;t++)if(this.colorPresentations[t].label.toLowerCase().startsWith(e)){o=t;break}}-1!==o&&o!==this.presentationIndex&&(this.presentationIndex=o,this._onDidChangePresentation.fire(this.presentation))}flushColor(){this._onColorFlushed.fire(this._color)}}var u=o(30620),g=o(32959),p=o(40052),m=o(13752),_=o(77409),f=o(79730),C=(o(1061),o(18420)),v=o(43980),b=o(87288);const y=g.$;class w extends s.JT{constructor(e,t,o){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(),this.model=t,this.showingStandaloneColorPicker=i,this._closeButton=null,this._domNode=y(".colorpicker-header"),g.R3(e,this._domNode),this._pickedColorNode=g.R3(this._domNode,y(".picked-color")),g.R3(this._pickedColorNode,y("span.codicon.codicon-color-mode")),this._pickedColorPresentation=g.R3(this._pickedColorNode,document.createElement("span")),this._pickedColorPresentation.classList.add("picked-color-presentation");const n=(0,C.NC)("clickToToggleColorOptions","Click to toggle color options (rgb/hsl/hex)");this._pickedColorNode.setAttribute("title",n),this._originalColorNode=g.R3(this._domNode,y(".original-color")),this._originalColorNode.style.backgroundColor=r.Il.Format.CSS.format(this.model.originalColor)||"",this.backgroundColor=o.getColorTheme().getColor(v.yJx)||r.Il.white,this._register(o.onDidColorThemeChange((e=>{this.backgroundColor=e.getColor(v.yJx)||r.Il.white}))),this._register(g.nm(this._pickedColorNode,g.tw.CLICK,(()=>this.model.selectNextColorPresentation()))),this._register(g.nm(this._originalColorNode,g.tw.CLICK,(()=>{this.model.color=this.model.originalColor,this.model.flushColor()}))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this._register(t.onDidChangePresentation(this.onDidChangePresentation,this)),this._pickedColorNode.style.backgroundColor=r.Il.Format.CSS.format(t.color)||"",this._pickedColorNode.classList.toggle("light",t.color.rgba.a<.5?this.backgroundColor.isLighter():t.color.isLighter()),this.onDidChangeColor(this.model.color),this.showingStandaloneColorPicker&&(this._domNode.classList.add("standalone-colorpicker"),this._closeButton=this._register(new S(this._domNode)))}get closeButton(){return this._closeButton}get pickedColorNode(){return this._pickedColorNode}get originalColorNode(){return this._originalColorNode}onDidChangeColor(e){this._pickedColorNode.style.backgroundColor=r.Il.Format.CSS.format(e)||"",this._pickedColorNode.classList.toggle("light",e.rgba.a<.5?this.backgroundColor.isLighter():e.isLighter()),this.onDidChangePresentation()}onDidChangePresentation(){this._pickedColorPresentation.textContent=this.model.presentation?this.model.presentation.label:""}}class S extends s.JT{constructor(e){super(),this._onClicked=this._register(new l.Q5),this.onClicked=this._onClicked.event,this._button=document.createElement("div"),this._button.classList.add("close-button"),g.R3(e,this._button);const t=document.createElement("div");t.classList.add("close-button-inner-div"),g.R3(this._button,t);g.R3(t,y(".button"+f.k.asCSSSelector((0,b.q5)("color-picker-close",_.l.close,(0,C.NC)("closeIcon","Icon to close the color picker"))))).classList.add("close-icon"),this._button.onclick=()=>{this._onClicked.fire()}}}class k extends s.JT{constructor(e,t,o){let i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];super(),this.model=t,this.pixelRatio=o,this._insertButton=null,this._domNode=y(".colorpicker-body"),g.R3(e,this._domNode),this._saturationBox=new N(this._domNode,this.model,this.pixelRatio),this._register(this._saturationBox),this._register(this._saturationBox.onDidChange(this.onDidSaturationValueChange,this)),this._register(this._saturationBox.onColorFlushed(this.flushColor,this)),this._opacityStrip=new L(this._domNode,this.model,i),this._register(this._opacityStrip),this._register(this._opacityStrip.onDidChange(this.onDidOpacityChange,this)),this._register(this._opacityStrip.onColorFlushed(this.flushColor,this)),this._hueStrip=new A(this._domNode,this.model,i),this._register(this._hueStrip),this._register(this._hueStrip.onDidChange(this.onDidHueChange,this)),this._register(this._hueStrip.onColorFlushed(this.flushColor,this)),i&&(this._insertButton=this._register(new P(this._domNode)),this._domNode.classList.add("standalone-colorpicker"))}flushColor(){this.model.flushColor()}onDidSaturationValueChange(e){let{s:t,v:o}=e;const i=this.model.color.hsva;this.model.color=new r.Il(new r.tx(i.h,t,o,i.a))}onDidOpacityChange(e){const t=this.model.color.hsva;this.model.color=new r.Il(new r.tx(t.h,t.s,t.v,e))}onDidHueChange(e){const t=this.model.color.hsva,o=360*(1-e);this.model.color=new r.Il(new r.tx(360===o?0:o,t.s,t.v,t.a))}get domNode(){return this._domNode}get saturationBox(){return this._saturationBox}get enterButton(){return this._insertButton}layout(){this._saturationBox.layout(),this._opacityStrip.layout(),this._hueStrip.layout()}}class N extends s.JT{constructor(e,t,o){super(),this.model=t,this.pixelRatio=o,this._onDidChange=new l.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new l.Q5,this.onColorFlushed=this._onColorFlushed.event,this._domNode=y(".saturation-wrap"),g.R3(e,this._domNode),this._canvas=document.createElement("canvas"),this._canvas.className="saturation-box",g.R3(this._domNode,this._canvas),this.selection=y(".saturation-selection"),g.R3(this._domNode,this.selection),this.layout(),this._register(g.nm(this._domNode,g.tw.POINTER_DOWN,(e=>this.onPointerDown(e)))),this._register(this.model.onDidChangeColor(this.onDidChangeColor,this)),this.monitor=null}get domNode(){return this._domNode}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;this.monitor=this._register(new p.C);const t=g.i(this._domNode);e.target!==this.selection&&this.onDidChangePosition(e.offsetX,e.offsetY),this.monitor.startMonitoring(e.target,e.pointerId,e.buttons,(e=>this.onDidChangePosition(e.pageX-t.left,e.pageY-t.top)),(()=>null));const o=g.nm(e.target.ownerDocument,g.tw.POINTER_UP,(()=>{this._onColorFlushed.fire(),o.dispose(),this.monitor&&(this.monitor.stopMonitoring(!0),this.monitor=null)}),!0)}onDidChangePosition(e,t){const o=Math.max(0,Math.min(1,e/this.width)),i=Math.max(0,Math.min(1,1-t/this.height));this.paintSelection(o,i),this._onDidChange.fire({s:o,v:i})}layout(){this.width=this._domNode.offsetWidth,this.height=this._domNode.offsetHeight,this._canvas.width=this.width*this.pixelRatio,this._canvas.height=this.height*this.pixelRatio,this.paint();const e=this.model.color.hsva;this.paintSelection(e.s,e.v)}paint(){const e=this.model.color.hsva,t=new r.Il(new r.tx(e.h,1,1,1)),o=this._canvas.getContext("2d"),i=o.createLinearGradient(0,0,this._canvas.width,0);i.addColorStop(0,"rgba(255, 255, 255, 1)"),i.addColorStop(.5,"rgba(255, 255, 255, 0.5)"),i.addColorStop(1,"rgba(255, 255, 255, 0)");const n=o.createLinearGradient(0,0,0,this._canvas.height);n.addColorStop(0,"rgba(0, 0, 0, 0)"),n.addColorStop(1,"rgba(0, 0, 0, 1)"),o.rect(0,0,this._canvas.width,this._canvas.height),o.fillStyle=r.Il.Format.CSS.format(t),o.fill(),o.fillStyle=i,o.fill(),o.fillStyle=n,o.fill()}paintSelection(e,t){this.selection.style.left="".concat(e*this.width,"px"),this.selection.style.top="".concat(this.height-t*this.height,"px")}onDidChangeColor(e){if(this.monitor&&this.monitor.isMonitoring())return;this.paint();const t=e.hsva;this.paintSelection(t.s,t.v)}}class x extends s.JT{constructor(e,t){let o=arguments.length>2&&void 0!==arguments[2]&&arguments[2];super(),this.model=t,this._onDidChange=new l.Q5,this.onDidChange=this._onDidChange.event,this._onColorFlushed=new l.Q5,this.onColorFlushed=this._onColorFlushed.event,o?(this.domNode=g.R3(e,y(".standalone-strip")),this.overlay=g.R3(this.domNode,y(".standalone-overlay"))):(this.domNode=g.R3(e,y(".strip")),this.overlay=g.R3(this.domNode,y(".overlay"))),this.slider=g.R3(this.domNode,y(".slider")),this.slider.style.top="0px",this._register(g.nm(this.domNode,g.tw.POINTER_DOWN,(e=>this.onPointerDown(e)))),this._register(t.onDidChangeColor(this.onDidChangeColor,this)),this.layout()}layout(){this.height=this.domNode.offsetHeight-this.slider.offsetHeight;const e=this.getValue(this.model.color);this.updateSliderPosition(e)}onDidChangeColor(e){const t=this.getValue(e);this.updateSliderPosition(t)}onPointerDown(e){if(!e.target||!(e.target instanceof Element))return;const t=this._register(new p.C),o=g.i(this.domNode);this.domNode.classList.add("grabbing"),e.target!==this.slider&&this.onDidChangeTop(e.offsetY),t.startMonitoring(e.target,e.pointerId,e.buttons,(e=>this.onDidChangeTop(e.pageY-o.top)),(()=>null));const i=g.nm(e.target.ownerDocument,g.tw.POINTER_UP,(()=>{this._onColorFlushed.fire(),i.dispose(),t.stopMonitoring(!0),this.domNode.classList.remove("grabbing")}),!0)}onDidChangeTop(e){const t=Math.max(0,Math.min(1,1-e/this.height));this.updateSliderPosition(t),this._onDidChange.fire(t)}updateSliderPosition(e){this.slider.style.top="".concat((1-e)*this.height,"px")}}class L extends x{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.domNode.classList.add("opacity-strip"),this.onDidChangeColor(this.model.color)}onDidChangeColor(e){super.onDidChangeColor(e);const{r:t,g:o,b:i}=e.rgba,n=new r.Il(new r.VS(t,o,i,1)),s=new r.Il(new r.VS(t,o,i,0));this.overlay.style.background="linear-gradient(to bottom, ".concat(n," 0%, ").concat(s," 100%)")}getValue(e){return e.hsva.a}}class A extends x{constructor(e,t){super(e,t,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.domNode.classList.add("hue-strip")}getValue(e){return 1-e.hsva.h/360}}class P extends s.JT{constructor(e){super(),this._onClicked=this._register(new l.Q5),this.onClicked=this._onClicked.event,this._button=g.R3(e,document.createElement("button")),this._button.classList.add("insert-button"),this._button.textContent="Insert",this._button.onclick=e=>{this._onClicked.fire()}}get button(){return this._button}}class D extends m.${constructor(e,t,o,i){let n=arguments.length>4&&void 0!==arguments[4]&&arguments[4];super(),this.model=t,this.pixelRatio=o,this._register(u.Tz.onDidChange((()=>this.layout())));const r=y(".colorpicker-widget");e.appendChild(r),this.header=this._register(new w(r,this.model,i,n)),this.body=this._register(new k(r,this.model,this.pixelRatio,n))}layout(){this.body.layout()}}var I=o(41335),M=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},E=function(e,t){return function(o,i){t(o,i,e)}},O=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class R{constructor(e,t,o,i){this.owner=e,this.range=t,this.model=o,this.provider=i,this.forceShowAtRange=!0}isValidForHoverAnchor(e){return 1===e.type&&this.range.startColumn<=e.range.startColumn&&this.range.endColumn>=e.range.endColumn}}let T=class{constructor(e,t){this._editor=e,this._themeService=t,this.hoverOrdinal=2}computeSync(e,t){return[]}computeAsync(e,t,o){return i.Aq.fromPromise(this._computeAsync(e,t,o))}_computeAsync(e,t,o){return O(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return[];const e=d.if.get(this._editor);if(!e)return[];for(const o of t){if(!e.isColorDecoration(o))continue;const t=e.getColorData(o.range.getStartPosition());if(t){return[yield H(this,this._editor.getModel(),t.colorInfo,t.provider)]}}return[]}))}renderHoverParts(e,t){return W(this,this._editor,this._themeService,t,e)}};T=M([E(1,I.XE)],T);class F{constructor(e,t,o,i){this.owner=e,this.range=t,this.model=o,this.provider=i}}let B=class{constructor(e,t){this._editor=e,this._themeService=t,this._color=null}createColorHover(e,t,o){return O(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return null;if(!d.if.get(this._editor))return null;const i=yield(0,c.E)(o,this._editor.getModel(),n.T.None);let r=null,s=null;for(const t of i){const o=t.colorInfo;a.e.containsRange(o.range,e.range)&&(r=o,s=t.provider)}const l=null!==r&&void 0!==r?r:e,h=null!==s&&void 0!==s?s:t,u=!!r;return{colorHover:yield H(this,this._editor.getModel(),l,h),foundInEditor:u}}))}updateEditorModel(e){return O(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return;const t=e.model;let o=new a.e(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn);this._color&&(yield Q(this._editor.getModel(),t,this._color,o,e),o=V(this._editor,o,t))}))}renderHoverParts(e,t){return W(this,this._editor,this._themeService,t,e)}set color(e){this._color=e}get color(){return this._color}};function H(e,t,o,i){return O(this,void 0,void 0,(function*(){const s=t.getValueInRange(o.range),{red:d,green:l,blue:u,alpha:g}=o.color,p=new r.VS(Math.round(255*d),Math.round(255*l),Math.round(255*u),g),m=new r.Il(p),_=yield(0,c.R)(t,o,i,n.T.None),f=new h(m,[],0);return f.colorPresentations=_||[],f.guessColorPresentation(m,s),e instanceof T?new R(e,a.e.lift(o.range),f,i):new F(e,a.e.lift(o.range),f,i)}))}function W(e,t,o,i,n){if(0===i.length||!t.hasModel())return s.JT.None;if(n.setMinimumDimensions){const e=t.getOption(66)+8;n.setMinimumDimensions(new g.Ro(302,e))}const r=new s.SL,c=i[0],d=t.getModel(),l=c.model,h=r.add(new D(n.fragment,l,t.getOption(141),o,e instanceof B));n.setColorPicker(h);let u=!1,p=new a.e(c.range.startLineNumber,c.range.startColumn,c.range.endLineNumber,c.range.endColumn);if(e instanceof B){const t=i[0].model.color;e.color=t,Q(d,l,t,p,c),r.add(l.onColorFlushed((t=>{e.color=t})))}else r.add(l.onColorFlushed((e=>O(this,void 0,void 0,(function*(){yield Q(d,l,e,p,c),u=!0,p=V(t,p,l,n)})))));return r.add(l.onDidChangeColor((e=>{Q(d,l,e,p,c)}))),r.add(t.onDidChangeModelContent((e=>{u?u=!1:(n.hide(),t.focus())}))),r}function V(e,t,o,i){let n,r;if(o.presentation.textEdit){n=[o.presentation.textEdit],r=new a.e(o.presentation.textEdit.range.startLineNumber,o.presentation.textEdit.range.startColumn,o.presentation.textEdit.range.endLineNumber,o.presentation.textEdit.range.endColumn);const t=e.getModel()._setTrackedRange(null,r,3);e.pushUndoStop(),e.executeEdits("colorpicker",n),r=e.getModel()._getTrackedRange(t)||r}else n=[{range:t,text:o.presentation.label,forceMoveMarkers:!1}],r=t.setEndPosition(t.endLineNumber,t.startColumn+o.presentation.label.length),e.pushUndoStop(),e.executeEdits("colorpicker",n);return o.presentation.additionalTextEdits&&(n=[...o.presentation.additionalTextEdits],e.executeEdits("colorpicker",n),i&&i.hide()),e.pushUndoStop(),r}function Q(e,t,o,i,r){return O(this,void 0,void 0,(function*(){const s=yield(0,c.R)(e,{range:i,color:{red:o.rgba.r/255,green:o.rgba.g/255,blue:o.rgba.b/255,alpha:o.rgba.a}},r.provider,n.T.None);t.colorPresentations=s||[]}))}B=M([E(1,I.XE)],B)},2587:(e,t,o)=>{o.d(t,{G:()=>g});var i=o(40476),n=o(88074),r=o(26246),s=o(19536),a=o(65096),c=o(65441),d=o(62636),l=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},h=function(e,t){return function(o,i){t(o,i,e)}},u=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};class g{constructor(e,t){this._editorWorkerClient=new n.Q8(e,!1,"editorWorkerService",t)}provideDocumentColors(e,t){return u(this,void 0,void 0,(function*(){return this._editorWorkerClient.computeDefaultDocumentColors(e.uri)}))}provideColorPresentations(e,t,o){const n=t.range,r=t.color,s=r.alpha,a=new i.Il(new i.VS(Math.round(255*r.red),Math.round(255*r.green),Math.round(255*r.blue),s)),c=s?i.Il.Format.CSS.formatRGB(a):i.Il.Format.CSS.formatRGBA(a),d=s?i.Il.Format.CSS.formatHSL(a):i.Il.Format.CSS.formatHSLA(a),l=s?i.Il.Format.CSS.formatHex(a):i.Il.Format.CSS.formatHexA(a),h=[];return h.push({label:c,textEdit:{range:n,text:c}}),h.push({label:d,textEdit:{range:n,text:d}}),h.push({label:l,textEdit:{range:n,text:l}}),h}}let p=class extends a.JT{constructor(e,t,o){super(),this._register(o.colorProvider.register("*",new g(e,t)))}};p=l([h(0,r.q),h(1,s.c_),h(2,c.p)],p),(0,d.y)(p)},86993:(e,t,o)=>{o.r(t),o.d(t,{ShowOrFocusStandaloneColorPicker:()=>L});var i,n,r=o(95253),s=o(18420),a=o(65096),c=o(4222),d=o(64606),l=o(21019),h=o(75256),u=o(13880),g=o(65441),p=o(98926),m=o(8022),_=o(26246),f=o(19536),C=o(2587),v=o(32959),b=(o(1061),function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s}),y=function(e,t){return function(o,i){t(o,i,e)}},w=function(e,t,o,i){return new(o||(o=Promise))((function(n,r){function s(e){try{c(i.next(e))}catch(t){r(t)}}function a(e){try{c(i.throw(e))}catch(t){r(t)}}function c(e){var t;e.done?n(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(s,a)}c((i=i.apply(e,t||[])).next())}))};let S=i=class extends a.JT{constructor(e,t,o,i,n,r,s){super(),this._editor=e,this._modelService=o,this._keybindingService=i,this._instantiationService=n,this._languageFeatureService=r,this._languageConfigurationService=s,this._standaloneColorPickerWidget=null,this._standaloneColorPickerVisible=p.u.standaloneColorPickerVisible.bindTo(t),this._standaloneColorPickerFocused=p.u.standaloneColorPickerFocused.bindTo(t)}showOrFocus(){var e;this._editor.hasModel()&&(this._standaloneColorPickerVisible.get()?this._standaloneColorPickerFocused.get()||null===(e=this._standaloneColorPickerWidget)||void 0===e||e.focus():this._standaloneColorPickerWidget=new k(this._editor,this._standaloneColorPickerVisible,this._standaloneColorPickerFocused,this._instantiationService,this._modelService,this._keybindingService,this._languageFeatureService,this._languageConfigurationService))}hide(){var e;this._standaloneColorPickerFocused.set(!1),this._standaloneColorPickerVisible.set(!1),null===(e=this._standaloneColorPickerWidget)||void 0===e||e.hide(),this._editor.focus()}insertColor(){var e;null===(e=this._standaloneColorPickerWidget)||void 0===e||e.updateEditor(),this.hide()}static get(e){return e.getContribution(i.ID)}};S.ID="editor.contrib.standaloneColorPickerController",S=i=b([y(1,m.i6),y(2,_.q),y(3,h.d),y(4,d.TG),y(5,g.p),y(6,f.c_)],S),(0,r._K)(S.ID,S,1);let k=n=class extends a.JT{constructor(e,t,o,i,n,r,s,a){var d;super(),this._editor=e,this._standaloneColorPickerVisible=t,this._standaloneColorPickerFocused=o,this._modelService=n,this._keybindingService=r,this._languageFeaturesService=s,this._languageConfigurationService=a,this.allowEditorOverflow=!0,this._position=void 0,this._body=document.createElement("div"),this._colorHover=null,this._selectionSetInEditor=!1,this._onResult=this._register(new u.Q5),this.onResult=this._onResult.event,this._standaloneColorPickerVisible.set(!0),this._standaloneColorPickerParticipant=i.createInstance(c.PQ,this._editor),this._position=null===(d=this._editor._getViewModel())||void 0===d?void 0:d.getPrimaryCursorState().modelState.position;const l=this._editor.getSelection(),h=l?{startLineNumber:l.startLineNumber,startColumn:l.startColumn,endLineNumber:l.endLineNumber,endColumn:l.endColumn}:{startLineNumber:0,endLineNumber:0,endColumn:0,startColumn:0},g=this._register(v.go(this._body));this._register(g.onDidBlur((e=>{this.hide()}))),this._register(g.onDidFocus((e=>{this.focus()}))),this._register(this._editor.onDidChangeCursorPosition((()=>{this._selectionSetInEditor?this._selectionSetInEditor=!1:this.hide()}))),this._register(this._editor.onMouseMove((e=>{var t;const o=null===(t=e.target.element)||void 0===t?void 0:t.classList;o&&o.contains("colorpicker-color-decoration")&&this.hide()}))),this._register(this.onResult((e=>{this._render(e.value,e.foundInEditor)}))),this._start(h),this._body.style.zIndex="50",this._editor.addContentWidget(this)}updateEditor(){this._colorHover&&this._standaloneColorPickerParticipant.updateEditorModel(this._colorHover)}getId(){return n.ID}getDomNode(){return this._body}getPosition(){if(!this._position)return null;const e=this._editor.getOption(60).above;return{position:this._position,secondaryPosition:this._position,preference:e?[1,2]:[2,1],positionAffinity:2}}hide(){this.dispose(),this._standaloneColorPickerVisible.set(!1),this._standaloneColorPickerFocused.set(!1),this._editor.removeContentWidget(this),this._editor.focus()}focus(){this._standaloneColorPickerFocused.set(!0),this._body.focus()}_start(e){return w(this,void 0,void 0,(function*(){const t=yield this._computeAsync(e);t&&this._onResult.fire(new N(t.result,t.foundInEditor))}))}_computeAsync(e){return w(this,void 0,void 0,(function*(){if(!this._editor.hasModel())return null;const t={range:e,color:{red:0,green:0,blue:0,alpha:1}},o=yield this._standaloneColorPickerParticipant.createColorHover(t,new C.G(this._modelService,this._languageConfigurationService),this._languageFeaturesService.colorProvider);return o?{result:o.colorHover,foundInEditor:o.foundInEditor}:null}))}_render(e,t){const o=document.createDocumentFragment();let i;const n={fragment:o,statusBar:this._register(new l.mR(this._keybindingService)),setColorPicker:e=>i=e,onContentsChanged:()=>{},hide:()=>this.hide()};if(this._colorHover=e,this._register(this._standaloneColorPickerParticipant.renderHoverParts(n,[e])),void 0===i)return;this._body.classList.add("standalone-colorpicker-body"),this._body.style.maxHeight=Math.max(this._editor.getLayoutInfo().height/4,250)+"px",this._body.style.maxWidth=Math.max(.66*this._editor.getLayoutInfo().width,500)+"px",this._body.tabIndex=0,this._body.appendChild(o),i.layout();const r=i.body,s=r.saturationBox.domNode.clientWidth,a=r.domNode.clientWidth-s-22-8,c=i.body.enterButton;null===c||void 0===c||c.onClicked((()=>{this.updateEditor(),this.hide()}));const d=i.header;d.pickedColorNode.style.width=s+8+"px";d.originalColorNode.style.width=a+"px";const h=i.header.closeButton;null===h||void 0===h||h.onClicked((()=>{this.hide()})),t&&(c&&(c.button.textContent="Replace"),this._selectionSetInEditor=!0,this._editor.setSelection(e.range)),this._editor.layoutContentWidget(this)}};k.ID="editor.contrib.standaloneColorPickerWidget",k=n=b([y(3,d.TG),y(4,_.q),y(5,h.d),y(6,g.p),y(7,f.c_)],k);class N{constructor(e,t){this.value=e,this.foundInEditor=t}}var x=o(14443);class L extends r.x1{constructor(){super({id:"editor.action.showOrFocusStandaloneColorPicker",title:{value:(0,s.NC)("showOrFocusStandaloneColorPicker","Show or Focus Standalone Color Picker"),mnemonicTitle:(0,s.NC)({key:"mishowOrFocusStandaloneColorPicker",comment:["&& denotes a mnemonic"]},"&&Show or Focus Standalone Color Picker"),original:"Show or Focus Standalone Color Picker"},precondition:void 0,menu:[{id:x.eH.CommandPalette}]})}runEditorCommand(e,t){var o;null===(o=S.get(t))||void 0===o||o.showOrFocus()}}class A extends r.R6{constructor(){super({id:"editor.action.hideColorPicker",label:(0,s.NC)({key:"hideColorPicker",comment:["Action that hides the color picker"]},"Hide the Color Picker"),alias:"Hide the Color Picker",precondition:p.u.standaloneColorPickerVisible.isEqualTo(!0),kbOpts:{primary:9,weight:100}})}run(e,t){var o;null===(o=S.get(t))||void 0===o||o.hide()}}class P extends r.R6{constructor(){super({id:"editor.action.insertColorWithStandaloneColorPicker",label:(0,s.NC)({key:"insertColorWithStandaloneColorPicker",comment:["Action that inserts color with standalone color picker"]},"Insert Color with Standalone Color Picker"),alias:"Insert Color with Standalone Color Picker",precondition:p.u.standaloneColorPickerFocused.isEqualTo(!0),kbOpts:{primary:3,weight:100}})}run(e,t){var o;null===(o=S.get(t))||void 0===o||o.insertColor()}}(0,r.Qr)(A),(0,r.Qr)(P),(0,x.r1)(L)},68404:(e,t,o)=>{o.r(t);var i=o(89490),n=o(95253),r=o(17429),s=o(98926),a=o(19536),c=o(62557),d=o(65631),l=o(96601);class h{constructor(e,t,o){this.languageConfigurationService=o,this._selection=e,this._insertSpace=t,this._usedEndToken=null}static _haystackHasNeedleAtOffset(e,t,o){if(o<0)return!1;const i=t.length;if(o+i>e.length)return!1;for(let n=0;n<i;n++){const i=e.charCodeAt(o+n),r=t.charCodeAt(n);if(i!==r&&(!(i>=65&&i<=90&&i+32===r)&&!(r>=65&&r<=90&&r+32===i)))return!1}return!0}_createOperationsForBlockComment(e,t,o,i,n,s){const a=e.startLineNumber,c=e.startColumn,d=e.endLineNumber,l=e.endColumn,u=n.getLineContent(a),g=n.getLineContent(d);let p,m=u.lastIndexOf(t,c-1+t.length),_=g.indexOf(o,l-1-o.length);if(-1!==m&&-1!==_)if(a===d){u.substring(m+t.length,_).indexOf(o)>=0&&(m=-1,_=-1)}else{const e=u.substring(m+t.length),i=g.substring(0,_);(e.indexOf(o)>=0||i.indexOf(o)>=0)&&(m=-1,_=-1)}-1!==m&&-1!==_?(i&&m+t.length<u.length&&32===u.charCodeAt(m+t.length)&&(t+=" "),i&&_>0&&32===g.charCodeAt(_-1)&&(o=" "+o,_-=1),p=h._createRemoveBlockCommentOperations(new r.e(a,m+t.length+1,d,_+1),t,o)):(p=h._createAddBlockCommentOperations(e,t,o,this._insertSpace),this._usedEndToken=1===p.length?o:null);for(const r of p)s.addTrackedEditOperation(r.range,r.text)}static _createRemoveBlockCommentOperations(e,t,o){const i=[];return r.e.isEmpty(e)?i.push(c.h.delete(new r.e(e.startLineNumber,e.startColumn-t.length,e.endLineNumber,e.endColumn+o.length))):(i.push(c.h.delete(new r.e(e.startLineNumber,e.startColumn-t.length,e.startLineNumber,e.startColumn))),i.push(c.h.delete(new r.e(e.endLineNumber,e.endColumn,e.endLineNumber,e.endColumn+o.length)))),i}static _createAddBlockCommentOperations(e,t,o,i){const n=[];return r.e.isEmpty(e)?n.push(c.h.replace(new r.e(e.startLineNumber,e.startColumn,e.endLineNumber,e.endColumn),t+"  "+o)):(n.push(c.h.insert(new d.L(e.startLineNumber,e.startColumn),t+(i?" ":""))),n.push(c.h.insert(new d.L(e.endLineNumber,e.endColumn),(i?" ":"")+o))),n}getEditOperations(e,t){const o=this._selection.startLineNumber,i=this._selection.startColumn;e.tokenization.tokenizeIfCheap(o);const n=e.getLanguageIdAtPosition(o,i),r=this.languageConfigurationService.getLanguageConfiguration(n).comments;r&&r.blockCommentStartToken&&r.blockCommentEndToken&&this._createOperationsForBlockComment(this._selection,r.blockCommentStartToken,r.blockCommentEndToken,this._insertSpace,e,t)}computeCursorState(e,t){const o=t.getInverseEditOperations();if(2===o.length){const e=o[0],t=o[1];return new l.Y(e.range.endLineNumber,e.range.endColumn,t.range.startLineNumber,t.range.startColumn)}{const e=o[0].range,t=this._usedEndToken?-this._usedEndToken.length-1:0;return new l.Y(e.endLineNumber,e.endColumn+t,e.endLineNumber,e.endColumn+t)}}}var u=o(31906);class g{constructor(e,t,o,i,n,r,s){this.languageConfigurationService=e,this._selection=t,this._tabSize=o,this._type=i,this._insertSpace=n,this._selectionId=null,this._deltaColumn=0,this._moveEndPositionDown=!1,this._ignoreEmptyLines=r,this._ignoreFirstLine=s||!1}static _gatherPreflightCommentStrings(e,t,o,i){e.tokenization.tokenizeIfCheap(t);const n=e.getLanguageIdAtPosition(t,1),r=i.getLanguageConfiguration(n).comments,s=r?r.lineCommentToken:null;if(!s)return null;const a=[];for(let c=0,d=o-t+1;c<d;c++)a[c]={ignore:!1,commentStr:s,commentStrOffset:0,commentStrLength:s.length};return a}static _analyzeLines(e,t,o,i,n,r,s,a){let c,d=!0;c=0===e||1!==e;for(let l=0,g=i.length;l<g;l++){const a=i[l],g=n+l;if(g===n&&s){a.ignore=!0;continue}const p=o.getLineContent(g),m=u.LC(p);if(-1!==m){if(d=!1,a.ignore=!1,a.commentStrOffset=m,c&&!h._haystackHasNeedleAtOffset(p,a.commentStr,m)&&(0===e?c=!1:1===e||(a.ignore=!0)),c&&t){const e=m+a.commentStrLength;e<p.length&&32===p.charCodeAt(e)&&(a.commentStrLength+=1)}}else a.ignore=r,a.commentStrOffset=p.length}if(0===e&&d){c=!1;for(let e=0,t=i.length;e<t;e++)i[e].ignore=!1}return{supported:!0,shouldRemoveComments:c,lines:i}}static _gatherPreflightData(e,t,o,i,n,r,s,a){const c=g._gatherPreflightCommentStrings(o,i,n,a);return null===c?{supported:!1}:g._analyzeLines(e,t,o,c,i,r,s,a)}_executeLineComments(e,t,o,i){let n;o.shouldRemoveComments?n=g._createRemoveLineCommentsOperations(o.lines,i.startLineNumber):(g._normalizeInsertionPoint(e,o.lines,i.startLineNumber,this._tabSize),n=this._createAddLineCommentsOperations(o.lines,i.startLineNumber));const s=new d.L(i.positionLineNumber,i.positionColumn);for(let a=0,c=n.length;a<c;a++)if(t.addEditOperation(n[a].range,n[a].text),r.e.isEmpty(n[a].range)&&r.e.getStartPosition(n[a].range).equals(s)){e.getLineContent(s.lineNumber).length+1===s.column&&(this._deltaColumn=(n[a].text||"").length)}this._selectionId=t.trackSelection(i)}_attemptRemoveBlockComment(e,t,o,i){let n=t.startLineNumber,s=t.endLineNumber;const a=i.length+Math.max(e.getLineFirstNonWhitespaceColumn(t.startLineNumber),t.startColumn);let c=e.getLineContent(n).lastIndexOf(o,a-1),d=e.getLineContent(s).indexOf(i,t.endColumn-1-o.length);return-1!==c&&-1===d&&(d=e.getLineContent(n).indexOf(i,c+o.length),s=n),-1===c&&-1!==d&&(c=e.getLineContent(s).lastIndexOf(o,d),n=s),!t.isEmpty()||-1!==c&&-1!==d||(c=e.getLineContent(n).indexOf(o),-1!==c&&(d=e.getLineContent(n).indexOf(i,c+o.length))),-1!==c&&32===e.getLineContent(n).charCodeAt(c+o.length)&&(o+=" "),-1!==d&&32===e.getLineContent(s).charCodeAt(d-1)&&(i=" "+i,d-=1),-1!==c&&-1!==d?h._createRemoveBlockCommentOperations(new r.e(n,c+o.length+1,s,d+1),o,i):null}_executeBlockComment(e,t,o){e.tokenization.tokenizeIfCheap(o.startLineNumber);const i=e.getLanguageIdAtPosition(o.startLineNumber,1),n=this.languageConfigurationService.getLanguageConfiguration(i).comments;if(!n||!n.blockCommentStartToken||!n.blockCommentEndToken)return;const s=n.blockCommentStartToken,a=n.blockCommentEndToken;let c=this._attemptRemoveBlockComment(e,o,s,a);if(!c){if(o.isEmpty()){const t=e.getLineContent(o.startLineNumber);let i=u.LC(t);-1===i&&(i=t.length),c=h._createAddBlockCommentOperations(new r.e(o.startLineNumber,i+1,o.startLineNumber,t.length+1),s,a,this._insertSpace)}else c=h._createAddBlockCommentOperations(new r.e(o.startLineNumber,e.getLineFirstNonWhitespaceColumn(o.startLineNumber),o.endLineNumber,e.getLineMaxColumn(o.endLineNumber)),s,a,this._insertSpace);1===c.length&&(this._deltaColumn=s.length+1)}this._selectionId=t.trackSelection(o);for(const r of c)t.addEditOperation(r.range,r.text)}getEditOperations(e,t){let o=this._selection;if(this._moveEndPositionDown=!1,o.startLineNumber===o.endLineNumber&&this._ignoreFirstLine)return t.addEditOperation(new r.e(o.startLineNumber,e.getLineMaxColumn(o.startLineNumber),o.startLineNumber+1,1),o.startLineNumber===e.getLineCount()?"":"\n"),void(this._selectionId=t.trackSelection(o));o.startLineNumber<o.endLineNumber&&1===o.endColumn&&(this._moveEndPositionDown=!0,o=o.setEndPosition(o.endLineNumber-1,e.getLineMaxColumn(o.endLineNumber-1)));const i=g._gatherPreflightData(this._type,this._insertSpace,e,o.startLineNumber,o.endLineNumber,this._ignoreEmptyLines,this._ignoreFirstLine,this.languageConfigurationService);return i.supported?this._executeLineComments(e,t,i,o):this._executeBlockComment(e,t,o)}computeCursorState(e,t){let o=t.getTrackedSelection(this._selectionId);return this._moveEndPositionDown&&(o=o.setEndPosition(o.endLineNumber+1,1)),new l.Y(o.selectionStartLineNumber,o.selectionStartColumn+this._deltaColumn,o.positionLineNumber,o.positionColumn+this._deltaColumn)}static _createRemoveLineCommentsOperations(e,t){const o=[];for(let i=0,n=e.length;i<n;i++){const n=e[i];n.ignore||o.push(c.h.delete(new r.e(t+i,n.commentStrOffset+1,t+i,n.commentStrOffset+n.commentStrLength+1)))}return o}_createAddLineCommentsOperations(e,t){const o=[],i=this._insertSpace?" ":"";for(let n=0,r=e.length;n<r;n++){const r=e[n];r.ignore||o.push(c.h.insert(new d.L(t+n,r.commentStrOffset+1),r.commentStr+i))}return o}static nextVisibleColumn(e,t,o,i){return o?e+(t-e%t):e+i}static _normalizeInsertionPoint(e,t,o,i){let n,r,s=1073741824;for(let a=0,c=t.length;a<c;a++){if(t[a].ignore)continue;const n=e.getLineContent(o+a);let r=0;for(let e=0,o=t[a].commentStrOffset;r<s&&e<o;e++)r=g.nextVisibleColumn(r,i,9===n.charCodeAt(e),1);r<s&&(s=r)}s=Math.floor(s/i)*i;for(let a=0,c=t.length;a<c;a++){if(t[a].ignore)continue;const c=e.getLineContent(o+a);let d=0;for(n=0,r=t[a].commentStrOffset;d<s&&n<r;n++)d=g.nextVisibleColumn(d,i,9===c.charCodeAt(n),1);t[a].commentStrOffset=d>s?n-1:n}}}var p=o(18420),m=o(14443);class _ extends n.R6{constructor(e,t){super(t),this._type=e}run(e,t){const o=e.get(a.c_);if(!t.hasModel())return;const i=[],n=t.getModel().getOptions(),s=t.getOption(23),c=t.getSelections().map(((e,t)=>({selection:e,index:t,ignoreFirstLine:!1})));c.sort(((e,t)=>r.e.compareRangesUsingStarts(e.selection,t.selection)));let d=c[0];for(let r=1;r<c.length;r++){const e=c[r];d.selection.endLineNumber===e.selection.startLineNumber&&(d.index<e.index?e.ignoreFirstLine=!0:(d.ignoreFirstLine=!0,d=e))}for(const r of c)i.push(new g(o,r.selection,n.tabSize,this._type,s.insertSpace,s.ignoreEmptyLines,r.ignoreFirstLine));t.pushUndoStop(),t.executeCommands(this.id,i),t.pushUndoStop()}}class f extends n.R6{constructor(){super({id:"editor.action.blockComment",label:p.NC("comment.block","Toggle Block Comment"),alias:"Toggle Block Comment",precondition:s.u.writable,kbOpts:{kbExpr:s.u.editorTextFocus,primary:1567,linux:{primary:3103},weight:100},menuOpts:{menuId:m.eH.MenubarEditMenu,group:"5_insert",title:p.NC({key:"miToggleBlockComment",comment:["&& denotes a mnemonic"]},"Toggle &&Block Comment"),order:2}})}run(e,t){const o=e.get(a.c_);if(!t.hasModel())return;const i=t.getOption(23),n=[],r=t.getSelections();for(const s of r)n.push(new h(s,i.insertSpace,o));t.pushUndoStop(),t.executeCommands(this.id,n),t.pushUndoStop()}}(0,n.Qr)(class extends _{constructor(){super(0,{id:"editor.action.commentLine",label:p.NC("comment.line","Toggle Line Comment"),alias:"Toggle Line Comment",precondition:s.u.writable,kbOpts:{kbExpr:s.u.editorTextFocus,primary:2138,weight:100},menuOpts:{menuId:m.eH.MenubarEditMenu,group:"5_insert",title:p.NC({key:"miToggleLineComment",comment:["&& denotes a mnemonic"]},"&&Toggle Line Comment"),order:1}})}}),(0,n.Qr)(class extends _{constructor(){super(1,{id:"editor.action.addCommentLine",label:p.NC("comment.line.add","Add Line Comment"),alias:"Add Line Comment",precondition:s.u.writable,kbOpts:{kbExpr:s.u.editorTextFocus,primary:(0,i.gx)(2089,2081),weight:100}})}}),(0,n.Qr)(class extends _{constructor(){super(2,{id:"editor.action.removeCommentLine",label:p.NC("comment.line.remove","Remove Line Comment"),alias:"Remove Line Comment",precondition:s.u.writable,kbOpts:{kbExpr:s.u.editorTextFocus,primary:(0,i.gx)(2089,2099),weight:100}})}}),(0,n.Qr)(f)},33065:(e,t,o)=>{o.r(t),o.d(t,{ContextMenuController:()=>b});var i,n=o(32959),r=o(6035),s=o(93720),a=o(65096),c=o(90650),d=o(95253),l=o(98926),h=o(18420),u=o(14443),g=o(8022),p=o(92361),m=o(75256),_=o(77819),f=o(55208),C=function(e,t,o,i){var n,r=arguments.length,s=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,o):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,o,i);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(s=(r<3?n(s):r>3?n(t,o,s):n(t,o))||s);return r>3&&s&&Object.defineProperty(t,o,s),s},v=function(e,t){return function(o,i){t(o,i,e)}};let b=i=class{static get(e){return e.getContribution(i.ID)}constructor(e,t,o,i,r,s,c,d){this._contextMenuService=t,this._contextViewService=o,this._contextKeyService=i,this._keybindingService=r,this._menuService=s,this._configurationService=c,this._workspaceContextService=d,this._toDispose=new a.SL,this._contextMenuIsBeingShownCount=0,this._editor=e,this._toDispose.add(this._editor.onContextMenu((e=>this._onContextMenu(e)))),this._toDispose.add(this._editor.onMouseWheel((e=>{if(this._contextMenuIsBeingShownCount>0){const t=this._contextViewService.getContextViewElement(),o=e.srcElement;o.shadowRoot&&n.Ay(t)===o.shadowRoot||this._contextViewService.hideContextView()}}))),this._toDispose.add(this._editor.onKeyDown((e=>{this._editor.getOption(24)&&58===e.keyCode&&(e.preventDefault(),e.stopPropagation(),this.showContextMenu())})))}_onContextMenu(e){if(!this._editor.hasModel())return;if(!this._editor.getOption(24))return this._editor.focus(),void(e.target.position&&!this._editor.getSelection().containsPosition(e.target.position)&&this._editor.setPosition(e.target.position));if(12===e.target.type)return;if(6===e.target.type&&e.target.detail.injectedText)return;if(e.event.preventDefault(),e.event.stopPropagation(),11===e.target.type)return this._showScrollbarContextMenu(e.event);if(6!==e.target.type&&7!==e.target.type&&1!==e.target.type)return;if(this._editor.focus(),e.target.position){let t=!1;for(const o of this._editor.getSelections())if(o.containsPosition(e.target.position)){t=!0;break}t||this._editor.setPosition(e.target.position)}let t=null;1!==e.target.type&&(t=e.event),this.showContextMenu(t)}showContextMenu(e){if(!this._editor.getOption(24))return;if(!this._editor.hasModel())return;const t=this._getMenuActions(this._editor.getModel(),this._editor.isSimpleWidget?u.eH.SimpleEditorContext:u.eH.EditorContext);t.length>0&&this._doShowContextMenu(t,e)}_getMenuActions(e,t){const o=[],i=this._menuService.createMenu(t,this._contextKeyService),n=i.getActions({arg:e.uri});i.dispose();for(const r of n){const[,t]=r;let i=0;for(const n of t)if(n instanceof u.NZ){const t=this._getMenuActions(e,n.item.submenu);t.length>0&&(o.push(new s.wY(n.id,n.label,t)),i++)}else o.push(n),i++;i&&o.push(new s.Z0)}return o.length&&o.pop(),o}_doShowContextMenu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!this._editor.hasModel())return;const o=this._editor.getOption(60);this._editor.updateOptions({hover:{enabled:!1}});let i=t;if(!i){this._editor.revealPosition(this._editor.getPosition(),1),this._editor.render();const e=this._editor.getScrolledVisiblePosition(this._editor.getPosition()),t=n.i(this._editor.getDomNode()),o=t.left+e.left,r=t.top+e.top+e.height;i={x:o,y:r}}const s=this._editor.getOption(126)&&!c.gn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:s?this._editor.getDomNode():void 0,getAnchor:()=>i,getActions:()=>e,getActionViewItem:e=>{const t=this._keybindingFor(e);if(t)return new r.gU(e,e,{label:!0,keybinding:t.getLabel(),isMenu:!0});const o=e;return"function"===typeof o.getActionViewItem?o.getActionViewItem():new r.gU(e,e,{icon:!0,label:!0,isMenu:!0})},getKeyBinding:e=>this._keybindingFor(e),onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.updateOptions({hover:o})}})}_showScrollbarContextMenu(e){if(!this._editor.hasModel())return;if((0,f.x)(this._workspaceContextService.getWorkspace()))return;const t=this._editor.getOption(72);let o=0;const i=e=>({id:"menu-action-".concat(++o),label:e.label,tooltip:"",class:void 0,enabled:"undefined"===typeof e.enabled||e.enabled,checked:e.checked,run:e.run}),n=(e,t,n,r,a)=>{if(!t)return i({label:e,enabled:t,run:()=>{}});const c=e=>()=>{this._configurationService.updateValue(n,e)},d=[];for(const o of a)d.push(i({label:o.label,checked:r===o.value,run:c(o.value)}));return((e,t)=>new s.wY("menu-action-".concat(++o),e,t,void 0))(e,d)},r=[];r.push(i({label:h.NC("context.minimap.minimap","Minimap"),checked:t.enabled,run:()=>{this._configurationService.updateValue("editor.minimap.enabled",!t.enabled)}})),r.push(new s.Z0),r.push(i({label:h.NC("context.minimap.renderCharacters","Render Characters"),enabled:t.enabled,checked:t.renderCharacters,run:()=>{this._configurationService.updateValue("editor.minimap.renderCharacters",!t.renderCharacters)}})),r.push(n(h.NC("context.minimap.size","Vertical size"),t.enabled,"editor.minimap.size",t.size,[{label:h.NC("context.minimap.size.proportional","Proportional"),value:"proportional"},{label:h.NC("context.minimap.size.fill","Fill"),value:"fill"},{label:h.NC("context.minimap.size.fit","Fit"),value:"fit"}])),r.push(n(h.NC("context.minimap.slider","Slider"),t.enabled,"editor.minimap.showSlider",t.showSlider,[{label:h.NC("context.minimap.slider.mouseover","Mouse Over"),value:"mouseover"},{label:h.NC("context.minimap.slider.always","Always"),value:"always"}]));const a=this._editor.getOption(126)&&!c.gn;this._contextMenuIsBeingShownCount++,this._contextMenuService.showContextMenu({domForShadowRoot:a?this._editor.getDomNode():void 0,getAnchor:()=>e,getActions:()=>r,onHide:e=>{this._contextMenuIsBeingShownCount--,this._editor.focus()}})}_keybindingFor(e){return this._keybindingService.lookupKeybinding(e.id)}dispose(){this._contextMenuIsBeingShownCount>0&&this._contextViewService.hideContextView(),this._toDispose.dispose()}};b.ID="editor.contrib.contextmenu",b=i=C([v(1,p.i),v(2,p.u),v(3,g.i6),v(4,m.d),v(5,u.co),v(6,_.Ui),v(7,f.ec)],b);class y extends d.R6{constructor(){super({id:"editor.action.showContextMenu",label:h.NC("action.showContextMenu.label","Show Editor Context Menu"),alias:"Show Editor Context Menu",precondition:void 0,kbOpts:{kbExpr:l.u.textInputFocus,primary:1092,weight:100}})}run(e,t){var o;null===(o=b.get(t))||void 0===o||o.showContextMenu()}}(0,d._K)(b.ID,b,2),(0,d.Qr)(y)},13081:(e,t,o)=>{o.r(t),o.d(t,{CursorRedo:()=>h,CursorUndo:()=>l,CursorUndoRedoController:()=>d});var i=o(65096),n=o(95253),r=o(98926),s=o(18420);class a{constructor(e){this.selections=e}equals(e){const t=this.selections.length;if(t!==e.selections.length)return!1;for(let o=0;o<t;o++)if(!this.selections[o].equalsSelection(e.selections[o]))return!1;return!0}}class c{constructor(e,t,o){this.cursorState=e,this.scrollTop=t,this.scrollLeft=o}}class d extends i.JT{static get(e){return e.getContribution(d.ID)}constructor(e){super(),this._editor=e,this._isCursorUndoRedo=!1,this._undoStack=[],this._redoStack=[],this._register(e.onDidChangeModel((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeModelContent((e=>{this._undoStack=[],this._redoStack=[]}))),this._register(e.onDidChangeCursorSelection((t=>{if(this._isCursorUndoRedo)return;if(!t.oldSelections)return;if(t.oldModelVersionId!==t.modelVersionId)return;const o=new a(t.oldSelections);this._undoStack.length>0&&this._undoStack[this._undoStack.length-1].cursorState.equals(o)||(this._undoStack.push(new c(o,e.getScrollTop(),e.getScrollLeft())),this._redoStack=[],this._undoStack.length>50&&this._undoStack.shift())})))}cursorUndo(){this._editor.hasModel()&&0!==this._undoStack.length&&(this._redoStack.push(new c(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._undoStack.pop()))}cursorRedo(){this._editor.hasModel()&&0!==this._redoStack.length&&(this._undoStack.push(new c(new a(this._editor.getSelections()),this._editor.getScrollTop(),this._editor.getScrollLeft())),this._applyState(this._redoStack.pop()))}_applyState(e){this._isCursorUndoRedo=!0,this._editor.setSelections(e.cursorState.selections),this._editor.setScrollPosition({scrollTop:e.scrollTop,scrollLeft:e.scrollLeft}),this._isCursorUndoRedo=!1}}d.ID="editor.contrib.cursorUndoRedoController";class l extends n.R6{constructor(){super({id:"cursorUndo",label:s.NC("cursor.undo","Cursor Undo"),alias:"Cursor Undo",precondition:void 0,kbOpts:{kbExpr:r.u.textInputFocus,primary:2099,weight:100}})}run(e,t,o){var i;null===(i=d.get(t))||void 0===i||i.cursorUndo()}}class h extends n.R6{constructor(){super({id:"cursorRedo",label:s.NC("cursor.redo","Cursor Redo"),alias:"Cursor Redo",precondition:void 0})}run(e,t,o){var i;null===(i=d.get(t))||void 0===i||i.cursorRedo()}}(0,n._K)(d.ID,d,0),(0,n.Qr)(l),(0,n.Qr)(h)},1061:()=>{}}]);
//# sourceMappingURL=monaco-editor-vendor.9fdc3ed8.506bd8a7.js.map