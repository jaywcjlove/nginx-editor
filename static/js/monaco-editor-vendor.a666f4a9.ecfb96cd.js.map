{"version":3,"file":"static/js/monaco-editor-vendor.a666f4a9.ecfb96cd.js","mappings":"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","sources":["../node_modules/monaco-editor/esm/vs/base/browser/ui/keybindingLabel/keybindingLabel.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listPaging.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/rangeMap.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/rowCache.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listView.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/splice.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/list.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/list/listWidget.js","../node_modules/monaco-editor/esm/vs/base/browser/ui/menu/menu.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../dom.js';\nimport { getBaseLayerHoverDelegate } from '../hover/hoverDelegate2.js';\nimport { getDefaultHoverDelegate } from '../hover/hoverDelegateFactory.js';\nimport { UILabelProvider } from '../../../common/keybindingLabels.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport { equals } from '../../../common/objects.js';\nimport './keybindingLabel.css';\nimport { localize } from '../../../../nls.js';\nconst $ = dom.$;\nexport const unthemedKeybindingLabelOptions = {\n    keybindingLabelBackground: undefined,\n    keybindingLabelForeground: undefined,\n    keybindingLabelBorder: undefined,\n    keybindingLabelBottomBorder: undefined,\n    keybindingLabelShadow: undefined\n};\nexport class KeybindingLabel extends Disposable {\n    constructor(container, os, options) {\n        super();\n        this.os = os;\n        this.keyElements = new Set();\n        this.options = options || Object.create(null);\n        const labelForeground = this.options.keybindingLabelForeground;\n        this.domNode = dom.append(container, $('.monaco-keybinding'));\n        if (labelForeground) {\n            this.domNode.style.color = labelForeground;\n        }\n        this.hover = this._register(getBaseLayerHoverDelegate().setupUpdatableHover(getDefaultHoverDelegate('mouse'), this.domNode, ''));\n        this.didEverRender = false;\n        container.appendChild(this.domNode);\n    }\n    get element() {\n        return this.domNode;\n    }\n    set(keybinding, matches) {\n        if (this.didEverRender && this.keybinding === keybinding && KeybindingLabel.areSame(this.matches, matches)) {\n            return;\n        }\n        this.keybinding = keybinding;\n        this.matches = matches;\n        this.render();\n    }\n    render() {\n        var _a;\n        this.clear();\n        if (this.keybinding) {\n            const chords = this.keybinding.getChords();\n            if (chords[0]) {\n                this.renderChord(this.domNode, chords[0], this.matches ? this.matches.firstPart : null);\n            }\n            for (let i = 1; i < chords.length; i++) {\n                dom.append(this.domNode, $('span.monaco-keybinding-key-chord-separator', undefined, ' '));\n                this.renderChord(this.domNode, chords[i], this.matches ? this.matches.chordPart : null);\n            }\n            const title = ((_a = this.options.disableTitle) !== null && _a !== void 0 ? _a : false) ? undefined : this.keybinding.getAriaLabel() || undefined;\n            this.hover.update(title);\n            this.domNode.setAttribute('aria-label', title || '');\n        }\n        else if (this.options && this.options.renderUnboundKeybindings) {\n            this.renderUnbound(this.domNode);\n        }\n        this.didEverRender = true;\n    }\n    clear() {\n        dom.clearNode(this.domNode);\n        this.keyElements.clear();\n    }\n    renderChord(parent, chord, match) {\n        const modifierLabels = UILabelProvider.modifierLabels[this.os];\n        if (chord.ctrlKey) {\n            this.renderKey(parent, modifierLabels.ctrlKey, Boolean(match === null || match === void 0 ? void 0 : match.ctrlKey), modifierLabels.separator);\n        }\n        if (chord.shiftKey) {\n            this.renderKey(parent, modifierLabels.shiftKey, Boolean(match === null || match === void 0 ? void 0 : match.shiftKey), modifierLabels.separator);\n        }\n        if (chord.altKey) {\n            this.renderKey(parent, modifierLabels.altKey, Boolean(match === null || match === void 0 ? void 0 : match.altKey), modifierLabels.separator);\n        }\n        if (chord.metaKey) {\n            this.renderKey(parent, modifierLabels.metaKey, Boolean(match === null || match === void 0 ? void 0 : match.metaKey), modifierLabels.separator);\n        }\n        const keyLabel = chord.keyLabel;\n        if (keyLabel) {\n            this.renderKey(parent, keyLabel, Boolean(match === null || match === void 0 ? void 0 : match.keyCode), '');\n        }\n    }\n    renderKey(parent, label, highlight, separator) {\n        dom.append(parent, this.createKeyElement(label, highlight ? '.highlight' : ''));\n        if (separator) {\n            dom.append(parent, $('span.monaco-keybinding-key-separator', undefined, separator));\n        }\n    }\n    renderUnbound(parent) {\n        dom.append(parent, this.createKeyElement(localize('unbound', \"Unbound\")));\n    }\n    createKeyElement(label, extraClass = '') {\n        const keyElement = $('span.monaco-keybinding-key' + extraClass, undefined, label);\n        this.keyElements.add(keyElement);\n        if (this.options.keybindingLabelBackground) {\n            keyElement.style.backgroundColor = this.options.keybindingLabelBackground;\n        }\n        if (this.options.keybindingLabelBorder) {\n            keyElement.style.borderColor = this.options.keybindingLabelBorder;\n        }\n        if (this.options.keybindingLabelBottomBorder) {\n            keyElement.style.borderBottomColor = this.options.keybindingLabelBottomBorder;\n        }\n        if (this.options.keybindingLabelShadow) {\n            keyElement.style.boxShadow = `inset 0 -1px 0 ${this.options.keybindingLabelShadow}`;\n        }\n        return keyElement;\n    }\n    static areSame(a, b) {\n        if (a === b || (!a && !b)) {\n            return true;\n        }\n        return !!a && !!b && equals(a.firstPart, b.firstPart) && equals(a.chordPart, b.chordPart);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { range } from '../../../common/arrays.js';\nimport { CancellationTokenSource } from '../../../common/cancellation.js';\nimport { Event } from '../../../common/event.js';\nimport { Disposable } from '../../../common/lifecycle.js';\nimport './list.css';\nimport { List } from './listWidget.js';\nclass PagedRenderer {\n    get templateId() { return this.renderer.templateId; }\n    constructor(renderer, modelProvider) {\n        this.renderer = renderer;\n        this.modelProvider = modelProvider;\n    }\n    renderTemplate(container) {\n        const data = this.renderer.renderTemplate(container);\n        return { data, disposable: Disposable.None };\n    }\n    renderElement(index, _, data, height) {\n        var _a;\n        (_a = data.disposable) === null || _a === void 0 ? void 0 : _a.dispose();\n        if (!data.data) {\n            return;\n        }\n        const model = this.modelProvider();\n        if (model.isResolved(index)) {\n            return this.renderer.renderElement(model.get(index), index, data.data, height);\n        }\n        const cts = new CancellationTokenSource();\n        const promise = model.resolve(index, cts.token);\n        data.disposable = { dispose: () => cts.cancel() };\n        this.renderer.renderPlaceholder(index, data.data);\n        promise.then(entry => this.renderer.renderElement(entry, index, data.data, height));\n    }\n    disposeTemplate(data) {\n        if (data.disposable) {\n            data.disposable.dispose();\n            data.disposable = undefined;\n        }\n        if (data.data) {\n            this.renderer.disposeTemplate(data.data);\n            data.data = undefined;\n        }\n    }\n}\nclass PagedAccessibilityProvider {\n    constructor(modelProvider, accessibilityProvider) {\n        this.modelProvider = modelProvider;\n        this.accessibilityProvider = accessibilityProvider;\n    }\n    getWidgetAriaLabel() {\n        return this.accessibilityProvider.getWidgetAriaLabel();\n    }\n    getAriaLabel(index) {\n        const model = this.modelProvider();\n        if (!model.isResolved(index)) {\n            return null;\n        }\n        return this.accessibilityProvider.getAriaLabel(model.get(index));\n    }\n}\nfunction fromPagedListOptions(modelProvider, options) {\n    return {\n        ...options,\n        accessibilityProvider: options.accessibilityProvider && new PagedAccessibilityProvider(modelProvider, options.accessibilityProvider)\n    };\n}\nexport class PagedList {\n    constructor(user, container, virtualDelegate, renderers, options = {}) {\n        const modelProvider = () => this.model;\n        const pagedRenderers = renderers.map(r => new PagedRenderer(r, modelProvider));\n        this.list = new List(user, container, virtualDelegate, pagedRenderers, fromPagedListOptions(modelProvider, options));\n    }\n    updateOptions(options) {\n        this.list.updateOptions(options);\n    }\n    getHTMLElement() {\n        return this.list.getHTMLElement();\n    }\n    get onDidFocus() {\n        return this.list.onDidFocus;\n    }\n    get widget() {\n        return this.list;\n    }\n    get onDidDispose() {\n        return this.list.onDidDispose;\n    }\n    get onMouseDblClick() {\n        return Event.map(this.list.onMouseDblClick, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onPointer() {\n        return Event.map(this.list.onPointer, ({ element, index, browserEvent }) => ({ element: element === undefined ? undefined : this._model.get(element), index, browserEvent }));\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.list.onDidChangeSelection, ({ elements, indexes, browserEvent }) => ({ elements: elements.map(e => this._model.get(e)), indexes, browserEvent }));\n    }\n    get model() {\n        return this._model;\n    }\n    set model(model) {\n        this._model = model;\n        this.list.splice(0, this.list.length, range(model.length));\n    }\n    getFocus() {\n        return this.list.getFocus();\n    }\n    getSelection() {\n        return this.list.getSelection();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.model.get(i));\n    }\n    style(styles) {\n        this.list.style(styles);\n    }\n    dispose() {\n        this.list.dispose();\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Range } from '../../../common/range.js';\n/**\n * Returns the intersection between a ranged group and a range.\n * Returns `[]` if the intersection is empty.\n */\nexport function groupIntersect(range, groups) {\n    const result = [];\n    for (const r of groups) {\n        if (range.start >= r.range.end) {\n            continue;\n        }\n        if (range.end < r.range.start) {\n            break;\n        }\n        const intersection = Range.intersect(range, r.range);\n        if (Range.isEmpty(intersection)) {\n            continue;\n        }\n        result.push({\n            range: intersection,\n            size: r.size\n        });\n    }\n    return result;\n}\n/**\n * Shifts a range by that `much`.\n */\nexport function shift({ start, end }, much) {\n    return { start: start + much, end: end + much };\n}\n/**\n * Consolidates a collection of ranged groups.\n *\n * Consolidation is the process of merging consecutive ranged groups\n * that share the same `size`.\n */\nexport function consolidate(groups) {\n    const result = [];\n    let previousGroup = null;\n    for (const group of groups) {\n        const start = group.range.start;\n        const end = group.range.end;\n        const size = group.size;\n        if (previousGroup && size === previousGroup.size) {\n            previousGroup.range.end = end;\n            continue;\n        }\n        previousGroup = { range: { start, end }, size };\n        result.push(previousGroup);\n    }\n    return result;\n}\n/**\n * Concatenates several collections of ranged groups into a single\n * collection.\n */\nfunction concat(...groups) {\n    return consolidate(groups.reduce((r, g) => r.concat(g), []));\n}\nexport class RangeMap {\n    get paddingTop() {\n        return this._paddingTop;\n    }\n    set paddingTop(paddingTop) {\n        this._size = this._size + paddingTop - this._paddingTop;\n        this._paddingTop = paddingTop;\n    }\n    constructor(topPadding) {\n        this.groups = [];\n        this._size = 0;\n        this._paddingTop = 0;\n        this._paddingTop = topPadding !== null && topPadding !== void 0 ? topPadding : 0;\n        this._size = this._paddingTop;\n    }\n    splice(index, deleteCount, items = []) {\n        const diff = items.length - deleteCount;\n        const before = groupIntersect({ start: 0, end: index }, this.groups);\n        const after = groupIntersect({ start: index + deleteCount, end: Number.POSITIVE_INFINITY }, this.groups)\n            .map(g => ({ range: shift(g.range, diff), size: g.size }));\n        const middle = items.map((item, i) => ({\n            range: { start: index + i, end: index + i + 1 },\n            size: item.size\n        }));\n        this.groups = concat(before, middle, after);\n        this._size = this._paddingTop + this.groups.reduce((t, g) => t + (g.size * (g.range.end - g.range.start)), 0);\n    }\n    /**\n     * Returns the number of items in the range map.\n     */\n    get count() {\n        const len = this.groups.length;\n        if (!len) {\n            return 0;\n        }\n        return this.groups[len - 1].range.end;\n    }\n    /**\n     * Returns the sum of the sizes of all items in the range map.\n     */\n    get size() {\n        return this._size;\n    }\n    /**\n     * Returns the index of the item at the given position.\n     */\n    indexAt(position) {\n        if (position < 0) {\n            return -1;\n        }\n        if (position < this._paddingTop) {\n            return 0;\n        }\n        let index = 0;\n        let size = this._paddingTop;\n        for (const group of this.groups) {\n            const count = group.range.end - group.range.start;\n            const newSize = size + (count * group.size);\n            if (position < newSize) {\n                return index + Math.floor((position - size) / group.size);\n            }\n            index += count;\n            size = newSize;\n        }\n        return index;\n    }\n    /**\n     * Returns the index of the item right after the item at the\n     * index of the given position.\n     */\n    indexAfter(position) {\n        return Math.min(this.indexAt(position) + 1, this.count);\n    }\n    /**\n     * Returns the start position of the item at the given index.\n     */\n    positionAt(index) {\n        if (index < 0) {\n            return -1;\n        }\n        let position = 0;\n        let count = 0;\n        for (const group of this.groups) {\n            const groupCount = group.range.end - group.range.start;\n            const newCount = count + groupCount;\n            if (index < newCount) {\n                return this._paddingTop + position + ((index - count) * group.size);\n            }\n            position += groupCount * group.size;\n            count = newCount;\n        }\n        return -1;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $ } from '../../dom.js';\nfunction removeFromParent(element) {\n    var _a;\n    try {\n        (_a = element.parentElement) === null || _a === void 0 ? void 0 : _a.removeChild(element);\n    }\n    catch (e) {\n        // this will throw if this happens due to a blur event, nasty business\n    }\n}\nexport class RowCache {\n    constructor(renderers) {\n        this.renderers = renderers;\n        this.cache = new Map();\n        this.transactionNodesPendingRemoval = new Set();\n        this.inTransaction = false;\n    }\n    /**\n     * Returns a row either by creating a new one or reusing\n     * a previously released row which shares the same templateId.\n     *\n     * @returns A row and `isReusingConnectedDomNode` if the row's node is already in the dom in a stale position.\n     */\n    alloc(templateId) {\n        let result = this.getTemplateCache(templateId).pop();\n        let isStale = false;\n        if (result) {\n            isStale = this.transactionNodesPendingRemoval.has(result.domNode);\n            if (isStale) {\n                this.transactionNodesPendingRemoval.delete(result.domNode);\n            }\n        }\n        else {\n            const domNode = $('.monaco-list-row');\n            const renderer = this.getRenderer(templateId);\n            const templateData = renderer.renderTemplate(domNode);\n            result = { domNode, templateId, templateData };\n        }\n        return { row: result, isReusingConnectedDomNode: isStale };\n    }\n    /**\n     * Releases the row for eventual reuse.\n     */\n    release(row) {\n        if (!row) {\n            return;\n        }\n        this.releaseRow(row);\n    }\n    /**\n     * Begin a set of changes that use the cache. This lets us skip work when a row is removed and then inserted again.\n     */\n    transact(makeChanges) {\n        if (this.inTransaction) {\n            throw new Error('Already in transaction');\n        }\n        this.inTransaction = true;\n        try {\n            makeChanges();\n        }\n        finally {\n            for (const domNode of this.transactionNodesPendingRemoval) {\n                this.doRemoveNode(domNode);\n            }\n            this.transactionNodesPendingRemoval.clear();\n            this.inTransaction = false;\n        }\n    }\n    releaseRow(row) {\n        const { domNode, templateId } = row;\n        if (domNode) {\n            if (this.inTransaction) {\n                this.transactionNodesPendingRemoval.add(domNode);\n            }\n            else {\n                this.doRemoveNode(domNode);\n            }\n        }\n        const cache = this.getTemplateCache(templateId);\n        cache.push(row);\n    }\n    doRemoveNode(domNode) {\n        domNode.classList.remove('scrolling');\n        removeFromParent(domNode);\n    }\n    getTemplateCache(templateId) {\n        let result = this.cache.get(templateId);\n        if (!result) {\n            result = [];\n            this.cache.set(templateId, result);\n        }\n        return result;\n    }\n    dispose() {\n        this.cache.forEach((cachedRows, templateId) => {\n            for (const cachedRow of cachedRows) {\n                const renderer = this.getRenderer(templateId);\n                renderer.disposeTemplate(cachedRow.templateData);\n                cachedRow.templateData = null;\n            }\n        });\n        this.cache.clear();\n        this.transactionNodesPendingRemoval.clear();\n    }\n    getRenderer(templateId) {\n        const renderer = this.renderers.get(templateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for ${templateId}`);\n        }\n        return renderer;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { DataTransfers } from '../../dnd.js';\nimport { $, addDisposableListener, animate, getContentHeight, getContentWidth, getTopLeftOffset, getWindow, isAncestor, scheduleAtNextAnimationFrame } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { SmoothScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { distinct, equals } from '../../../common/arrays.js';\nimport { Delayer, disposableTimeout } from '../../../common/async.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event } from '../../../common/event.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../common/lifecycle.js';\nimport { Range } from '../../../common/range.js';\nimport { Scrollable } from '../../../common/scrollable.js';\nimport { RangeMap, shift } from './rangeMap.js';\nimport { RowCache } from './rowCache.js';\nimport { BugIndicatingError } from '../../../common/errors.js';\nimport { clamp } from '../../../common/numbers.js';\nconst StaticDND = {\n    CurrentDragAndDropData: undefined\n};\nconst DefaultOptions = {\n    useShadows: true,\n    verticalScrollMode: 1 /* ScrollbarVisibility.Auto */,\n    setRowLineHeight: true,\n    setRowHeight: true,\n    supportDynamicHeights: false,\n    dnd: {\n        getDragElements(e) { return [e]; },\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { },\n        dispose() { }\n    },\n    horizontalScrolling: false,\n    transformOptimization: true,\n    alwaysConsumeMouseWheel: true,\n};\nexport class ElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class ExternalElementsDragAndDropData {\n    constructor(elements) {\n        this.elements = elements;\n    }\n    update() { }\n    getData() {\n        return this.elements;\n    }\n}\nexport class NativeDragAndDropData {\n    constructor() {\n        this.types = [];\n        this.files = [];\n    }\n    update(dataTransfer) {\n        if (dataTransfer.types) {\n            this.types.splice(0, this.types.length, ...dataTransfer.types);\n        }\n        if (dataTransfer.files) {\n            this.files.splice(0, this.files.length);\n            for (let i = 0; i < dataTransfer.files.length; i++) {\n                const file = dataTransfer.files.item(i);\n                if (file && (file.size || file.type)) {\n                    this.files.push(file);\n                }\n            }\n        }\n    }\n    getData() {\n        return {\n            types: this.types,\n            files: this.files\n        };\n    }\n}\nfunction equalsDragFeedback(f1, f2) {\n    if (Array.isArray(f1) && Array.isArray(f2)) {\n        return equals(f1, f2);\n    }\n    return f1 === f2;\n}\nclass ListViewAccessibilityProvider {\n    constructor(accessibilityProvider) {\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getSetSize) {\n            this.getSetSize = accessibilityProvider.getSetSize.bind(accessibilityProvider);\n        }\n        else {\n            this.getSetSize = (e, i, l) => l;\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getPosInSet) {\n            this.getPosInSet = accessibilityProvider.getPosInSet.bind(accessibilityProvider);\n        }\n        else {\n            this.getPosInSet = (e, i) => i + 1;\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.getRole) {\n            this.getRole = accessibilityProvider.getRole.bind(accessibilityProvider);\n        }\n        else {\n            this.getRole = _ => 'listitem';\n        }\n        if (accessibilityProvider === null || accessibilityProvider === void 0 ? void 0 : accessibilityProvider.isChecked) {\n            this.isChecked = accessibilityProvider.isChecked.bind(accessibilityProvider);\n        }\n        else {\n            this.isChecked = _ => undefined;\n        }\n    }\n}\n/**\n * The {@link ListView} is a virtual scrolling engine.\n *\n * Given that it only renders elements within its viewport, it can hold large\n * collections of elements and stay very performant. The performance bottleneck\n * usually lies within the user's rendering code for each element.\n *\n * @remarks It is a low-level widget, not meant to be used directly. Refer to the\n * List widget instead.\n */\nexport class ListView {\n    get contentHeight() { return this.rangeMap.size; }\n    get onDidScroll() { return this.scrollableElement.onScroll; }\n    get scrollableElementDomNode() { return this.scrollableElement.getDomNode(); }\n    get horizontalScrolling() { return this._horizontalScrolling; }\n    set horizontalScrolling(value) {\n        if (value === this._horizontalScrolling) {\n            return;\n        }\n        if (value && this.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this._horizontalScrolling = value;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        if (this._horizontalScrolling) {\n            for (const item of this.items) {\n                this.measureItemWidth(item);\n            }\n            this.updateScrollWidth();\n            this.scrollableElement.setScrollDimensions({ width: getContentWidth(this.domNode) });\n            this.rowsContainer.style.width = `${Math.max(this.scrollWidth || 0, this.renderWidth)}px`;\n        }\n        else {\n            this.scrollableElementWidthDelayer.cancel();\n            this.scrollableElement.setScrollDimensions({ width: this.renderWidth, scrollWidth: this.renderWidth });\n            this.rowsContainer.style.width = '';\n        }\n    }\n    constructor(container, virtualDelegate, renderers, options = DefaultOptions) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o;\n        this.virtualDelegate = virtualDelegate;\n        this.domId = `list_id_${++ListView.InstanceCount}`;\n        this.renderers = new Map();\n        this.renderWidth = 0;\n        this._scrollHeight = 0;\n        this.scrollableElementUpdateDisposable = null;\n        this.scrollableElementWidthDelayer = new Delayer(50);\n        this.splicing = false;\n        this.dragOverAnimationStopDisposable = Disposable.None;\n        this.dragOverMouseY = 0;\n        this.canDrop = false;\n        this.currentDragFeedbackDisposable = Disposable.None;\n        this.onDragLeaveTimeout = Disposable.None;\n        this.disposables = new DisposableStore();\n        this._onDidChangeContentHeight = new Emitter();\n        this._onDidChangeContentWidth = new Emitter();\n        this.onDidChangeContentHeight = Event.latch(this._onDidChangeContentHeight.event, undefined, this.disposables);\n        this._horizontalScrolling = false;\n        if (options.horizontalScrolling && options.supportDynamicHeights) {\n            throw new Error('Horizontal scrolling and dynamic heights not supported simultaneously');\n        }\n        this.items = [];\n        this.itemId = 0;\n        this.rangeMap = this.createRangeMap((_a = options.paddingTop) !== null && _a !== void 0 ? _a : 0);\n        for (const renderer of renderers) {\n            this.renderers.set(renderer.templateId, renderer);\n        }\n        this.cache = this.disposables.add(new RowCache(this.renderers));\n        this.lastRenderTop = 0;\n        this.lastRenderHeight = 0;\n        this.domNode = document.createElement('div');\n        this.domNode.className = 'monaco-list';\n        this.domNode.classList.add(this.domId);\n        this.domNode.tabIndex = 0;\n        this.domNode.classList.toggle('mouse-support', typeof options.mouseSupport === 'boolean' ? options.mouseSupport : true);\n        this._horizontalScrolling = (_b = options.horizontalScrolling) !== null && _b !== void 0 ? _b : DefaultOptions.horizontalScrolling;\n        this.domNode.classList.toggle('horizontal-scrolling', this._horizontalScrolling);\n        this.paddingBottom = typeof options.paddingBottom === 'undefined' ? 0 : options.paddingBottom;\n        this.accessibilityProvider = new ListViewAccessibilityProvider(options.accessibilityProvider);\n        this.rowsContainer = document.createElement('div');\n        this.rowsContainer.className = 'monaco-list-rows';\n        const transformOptimization = (_c = options.transformOptimization) !== null && _c !== void 0 ? _c : DefaultOptions.transformOptimization;\n        if (transformOptimization) {\n            this.rowsContainer.style.transform = 'translate3d(0px, 0px, 0px)';\n            this.rowsContainer.style.overflow = 'hidden';\n            this.rowsContainer.style.contain = 'strict';\n        }\n        this.disposables.add(Gesture.addTarget(this.rowsContainer));\n        this.scrollable = this.disposables.add(new Scrollable({\n            forceIntegerValues: true,\n            smoothScrollDuration: ((_d = options.smoothScrolling) !== null && _d !== void 0 ? _d : false) ? 125 : 0,\n            scheduleAtNextAnimationFrame: cb => scheduleAtNextAnimationFrame(getWindow(this.domNode), cb)\n        }));\n        this.scrollableElement = this.disposables.add(new SmoothScrollableElement(this.rowsContainer, {\n            alwaysConsumeMouseWheel: (_e = options.alwaysConsumeMouseWheel) !== null && _e !== void 0 ? _e : DefaultOptions.alwaysConsumeMouseWheel,\n            horizontal: 1 /* ScrollbarVisibility.Auto */,\n            vertical: (_f = options.verticalScrollMode) !== null && _f !== void 0 ? _f : DefaultOptions.verticalScrollMode,\n            useShadows: (_g = options.useShadows) !== null && _g !== void 0 ? _g : DefaultOptions.useShadows,\n            mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity,\n            fastScrollSensitivity: options.fastScrollSensitivity,\n            scrollByPage: options.scrollByPage\n        }, this.scrollable));\n        this.domNode.appendChild(this.scrollableElement.getDomNode());\n        container.appendChild(this.domNode);\n        this.scrollableElement.onScroll(this.onScroll, this, this.disposables);\n        this.disposables.add(addDisposableListener(this.rowsContainer, TouchEventType.Change, e => this.onTouchChange(e)));\n        // Prevent the monaco-scrollable-element from scrolling\n        // https://github.com/microsoft/vscode/issues/44181\n        this.disposables.add(addDisposableListener(this.scrollableElement.getDomNode(), 'scroll', e => e.target.scrollTop = 0));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragover', e => this.onDragOver(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'drop', e => this.onDrop(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragleave', e => this.onDragLeave(this.toDragEvent(e))));\n        this.disposables.add(addDisposableListener(this.domNode, 'dragend', e => this.onDragEnd(e)));\n        this.setRowLineHeight = (_h = options.setRowLineHeight) !== null && _h !== void 0 ? _h : DefaultOptions.setRowLineHeight;\n        this.setRowHeight = (_j = options.setRowHeight) !== null && _j !== void 0 ? _j : DefaultOptions.setRowHeight;\n        this.supportDynamicHeights = (_k = options.supportDynamicHeights) !== null && _k !== void 0 ? _k : DefaultOptions.supportDynamicHeights;\n        this.dnd = (_l = options.dnd) !== null && _l !== void 0 ? _l : this.disposables.add(DefaultOptions.dnd);\n        this.layout((_m = options.initialSize) === null || _m === void 0 ? void 0 : _m.height, (_o = options.initialSize) === null || _o === void 0 ? void 0 : _o.width);\n    }\n    updateOptions(options) {\n        if (options.paddingBottom !== undefined) {\n            this.paddingBottom = options.paddingBottom;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        if (options.smoothScrolling !== undefined) {\n            this.scrollable.setSmoothScrollDuration(options.smoothScrolling ? 125 : 0);\n        }\n        if (options.horizontalScrolling !== undefined) {\n            this.horizontalScrolling = options.horizontalScrolling;\n        }\n        let scrollableOptions;\n        if (options.scrollByPage !== undefined) {\n            scrollableOptions = { ...(scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {}), scrollByPage: options.scrollByPage };\n        }\n        if (options.mouseWheelScrollSensitivity !== undefined) {\n            scrollableOptions = { ...(scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {}), mouseWheelScrollSensitivity: options.mouseWheelScrollSensitivity };\n        }\n        if (options.fastScrollSensitivity !== undefined) {\n            scrollableOptions = { ...(scrollableOptions !== null && scrollableOptions !== void 0 ? scrollableOptions : {}), fastScrollSensitivity: options.fastScrollSensitivity };\n        }\n        if (scrollableOptions) {\n            this.scrollableElement.updateOptions(scrollableOptions);\n        }\n        if (options.paddingTop !== undefined && options.paddingTop !== this.rangeMap.paddingTop) {\n            // trigger a rerender\n            const lastRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n            const offset = options.paddingTop - this.rangeMap.paddingTop;\n            this.rangeMap.paddingTop = options.paddingTop;\n            this.render(lastRenderRange, Math.max(0, this.lastRenderTop + offset), this.lastRenderHeight, undefined, undefined, true);\n            this.setScrollTop(this.lastRenderTop);\n            this.eventuallyUpdateScrollDimensions();\n            if (this.supportDynamicHeights) {\n                this._rerender(this.lastRenderTop, this.lastRenderHeight);\n            }\n        }\n    }\n    createRangeMap(paddingTop) {\n        return new RangeMap(paddingTop);\n    }\n    splice(start, deleteCount, elements = []) {\n        if (this.splicing) {\n            throw new Error('Can\\'t run recursive splices.');\n        }\n        this.splicing = true;\n        try {\n            return this._splice(start, deleteCount, elements);\n        }\n        finally {\n            this.splicing = false;\n            this._onDidChangeContentHeight.fire(this.contentHeight);\n        }\n    }\n    _splice(start, deleteCount, elements = []) {\n        const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const deleteRange = { start, end: start + deleteCount };\n        const removeRange = Range.intersect(previousRenderRange, deleteRange);\n        // try to reuse rows, avoid removing them from DOM\n        const rowsToDispose = new Map();\n        for (let i = removeRange.end - 1; i >= removeRange.start; i--) {\n            const item = this.items[i];\n            item.dragStartDisposable.dispose();\n            item.checkedDisposable.dispose();\n            if (item.row) {\n                let rows = rowsToDispose.get(item.templateId);\n                if (!rows) {\n                    rows = [];\n                    rowsToDispose.set(item.templateId, rows);\n                }\n                const renderer = this.renderers.get(item.templateId);\n                if (renderer && renderer.disposeElement) {\n                    renderer.disposeElement(item.element, i, item.row.templateData, item.size);\n                }\n                rows.unshift(item.row);\n            }\n            item.row = null;\n            item.stale = true;\n        }\n        const previousRestRange = { start: start + deleteCount, end: this.items.length };\n        const previousRenderedRestRange = Range.intersect(previousRestRange, previousRenderRange);\n        const previousUnrenderedRestRanges = Range.relativeComplement(previousRestRange, previousRenderRange);\n        const inserted = elements.map(element => ({\n            id: String(this.itemId++),\n            element,\n            templateId: this.virtualDelegate.getTemplateId(element),\n            size: this.virtualDelegate.getHeight(element),\n            width: undefined,\n            hasDynamicHeight: !!this.virtualDelegate.hasDynamicHeight && this.virtualDelegate.hasDynamicHeight(element),\n            lastDynamicHeightWidth: undefined,\n            row: null,\n            uri: undefined,\n            dropTarget: false,\n            dragStartDisposable: Disposable.None,\n            checkedDisposable: Disposable.None,\n            stale: false\n        }));\n        let deleted;\n        // TODO@joao: improve this optimization to catch even more cases\n        if (start === 0 && deleteCount >= this.items.length) {\n            this.rangeMap = this.createRangeMap(this.rangeMap.paddingTop);\n            this.rangeMap.splice(0, 0, inserted);\n            deleted = this.items;\n            this.items = inserted;\n        }\n        else {\n            this.rangeMap.splice(start, deleteCount, inserted);\n            deleted = this.items.splice(start, deleteCount, ...inserted);\n        }\n        const delta = elements.length - deleteCount;\n        const renderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        const renderedRestRange = shift(previousRenderedRestRange, delta);\n        const updateRange = Range.intersect(renderRange, renderedRestRange);\n        for (let i = updateRange.start; i < updateRange.end; i++) {\n            this.updateItemInDOM(this.items[i], i);\n        }\n        const removeRanges = Range.relativeComplement(renderedRestRange, renderRange);\n        for (const range of removeRanges) {\n            for (let i = range.start; i < range.end; i++) {\n                this.removeItemFromDOM(i);\n            }\n        }\n        const unrenderedRestRanges = previousUnrenderedRestRanges.map(r => shift(r, delta));\n        const elementsRange = { start, end: start + elements.length };\n        const insertRanges = [elementsRange, ...unrenderedRestRanges].map(r => Range.intersect(renderRange, r)).reverse();\n        for (const range of insertRanges) {\n            for (let i = range.end - 1; i >= range.start; i--) {\n                const item = this.items[i];\n                const rows = rowsToDispose.get(item.templateId);\n                const row = rows === null || rows === void 0 ? void 0 : rows.pop();\n                this.insertItemInDOM(i, row);\n            }\n        }\n        for (const rows of rowsToDispose.values()) {\n            for (const row of rows) {\n                this.cache.release(row);\n            }\n        }\n        this.eventuallyUpdateScrollDimensions();\n        if (this.supportDynamicHeights) {\n            this._rerender(this.scrollTop, this.renderHeight);\n        }\n        return deleted.map(i => i.element);\n    }\n    eventuallyUpdateScrollDimensions() {\n        this._scrollHeight = this.contentHeight;\n        this.rowsContainer.style.height = `${this._scrollHeight}px`;\n        if (!this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable = scheduleAtNextAnimationFrame(getWindow(this.domNode), () => {\n                this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n                this.updateScrollWidth();\n                this.scrollableElementUpdateDisposable = null;\n            });\n        }\n    }\n    eventuallyUpdateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            this.scrollableElementWidthDelayer.cancel();\n            return;\n        }\n        this.scrollableElementWidthDelayer.trigger(() => this.updateScrollWidth());\n    }\n    updateScrollWidth() {\n        if (!this.horizontalScrolling) {\n            return;\n        }\n        let scrollWidth = 0;\n        for (const item of this.items) {\n            if (typeof item.width !== 'undefined') {\n                scrollWidth = Math.max(scrollWidth, item.width);\n            }\n        }\n        this.scrollWidth = scrollWidth;\n        this.scrollableElement.setScrollDimensions({ scrollWidth: scrollWidth === 0 ? 0 : (scrollWidth + 10) });\n        this._onDidChangeContentWidth.fire(this.scrollWidth);\n    }\n    rerender() {\n        if (!this.supportDynamicHeights) {\n            return;\n        }\n        for (const item of this.items) {\n            item.lastDynamicHeightWidth = undefined;\n        }\n        this._rerender(this.lastRenderTop, this.lastRenderHeight);\n    }\n    get length() {\n        return this.items.length;\n    }\n    get renderHeight() {\n        const scrollDimensions = this.scrollableElement.getScrollDimensions();\n        return scrollDimensions.height;\n    }\n    get firstVisibleIndex() {\n        const range = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n        return range.start;\n    }\n    element(index) {\n        return this.items[index].element;\n    }\n    indexOf(element) {\n        return this.items.findIndex(item => item.element === element);\n    }\n    domElement(index) {\n        const row = this.items[index].row;\n        return row && row.domNode;\n    }\n    elementHeight(index) {\n        return this.items[index].size;\n    }\n    elementTop(index) {\n        return this.rangeMap.positionAt(index);\n    }\n    indexAt(position) {\n        return this.rangeMap.indexAt(position);\n    }\n    indexAfter(position) {\n        return this.rangeMap.indexAfter(position);\n    }\n    layout(height, width) {\n        const scrollDimensions = {\n            height: typeof height === 'number' ? height : getContentHeight(this.domNode)\n        };\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            scrollDimensions.scrollHeight = this.scrollHeight;\n        }\n        this.scrollableElement.setScrollDimensions(scrollDimensions);\n        if (typeof width !== 'undefined') {\n            this.renderWidth = width;\n            if (this.supportDynamicHeights) {\n                this._rerender(this.scrollTop, this.renderHeight);\n            }\n        }\n        if (this.horizontalScrolling) {\n            this.scrollableElement.setScrollDimensions({\n                width: typeof width === 'number' ? width : getContentWidth(this.domNode)\n            });\n        }\n    }\n    // Render\n    render(previousRenderRange, renderTop, renderHeight, renderLeft, scrollWidth, updateItemsInDOM = false) {\n        const renderRange = this.getRenderRange(renderTop, renderHeight);\n        const rangesToInsert = Range.relativeComplement(renderRange, previousRenderRange).reverse();\n        const rangesToRemove = Range.relativeComplement(previousRenderRange, renderRange);\n        if (updateItemsInDOM) {\n            const rangesToUpdate = Range.intersect(previousRenderRange, renderRange);\n            for (let i = rangesToUpdate.start; i < rangesToUpdate.end; i++) {\n                this.updateItemInDOM(this.items[i], i);\n            }\n        }\n        this.cache.transact(() => {\n            for (const range of rangesToRemove) {\n                for (let i = range.start; i < range.end; i++) {\n                    this.removeItemFromDOM(i);\n                }\n            }\n            for (const range of rangesToInsert) {\n                for (let i = range.end - 1; i >= range.start; i--) {\n                    this.insertItemInDOM(i);\n                }\n            }\n        });\n        if (renderLeft !== undefined) {\n            this.rowsContainer.style.left = `-${renderLeft}px`;\n        }\n        this.rowsContainer.style.top = `-${renderTop}px`;\n        if (this.horizontalScrolling && scrollWidth !== undefined) {\n            this.rowsContainer.style.width = `${Math.max(scrollWidth, this.renderWidth)}px`;\n        }\n        this.lastRenderTop = renderTop;\n        this.lastRenderHeight = renderHeight;\n    }\n    // DOM operations\n    insertItemInDOM(index, row) {\n        var _a, _b, _c;\n        const item = this.items[index];\n        if (!item.row) {\n            if (row) {\n                item.row = row;\n                item.stale = true;\n            }\n            else {\n                const result = this.cache.alloc(item.templateId);\n                item.row = result.row;\n                item.stale || (item.stale = result.isReusingConnectedDomNode);\n            }\n        }\n        const role = this.accessibilityProvider.getRole(item.element) || 'listitem';\n        item.row.domNode.setAttribute('role', role);\n        const checked = this.accessibilityProvider.isChecked(item.element);\n        if (typeof checked === 'boolean') {\n            item.row.domNode.setAttribute('aria-checked', String(!!checked));\n        }\n        else if (checked) {\n            const update = (checked) => item.row.domNode.setAttribute('aria-checked', String(!!checked));\n            update(checked.value);\n            item.checkedDisposable = checked.onDidChange(() => update(checked.value));\n        }\n        if (item.stale || !item.row.domNode.parentElement) {\n            const referenceNode = (_c = (_b = (_a = this.items.at(index + 1)) === null || _a === void 0 ? void 0 : _a.row) === null || _b === void 0 ? void 0 : _b.domNode) !== null && _c !== void 0 ? _c : null;\n            if (item.row.domNode.parentElement !== this.rowsContainer || item.row.domNode.nextElementSibling !== referenceNode) {\n                this.rowsContainer.insertBefore(item.row.domNode, referenceNode);\n            }\n            item.stale = false;\n        }\n        this.updateItemInDOM(item, index);\n        const renderer = this.renderers.get(item.templateId);\n        if (!renderer) {\n            throw new Error(`No renderer found for template id ${item.templateId}`);\n        }\n        renderer === null || renderer === void 0 ? void 0 : renderer.renderElement(item.element, index, item.row.templateData, item.size);\n        const uri = this.dnd.getDragURI(item.element);\n        item.dragStartDisposable.dispose();\n        item.row.domNode.draggable = !!uri;\n        if (uri) {\n            item.dragStartDisposable = addDisposableListener(item.row.domNode, 'dragstart', event => this.onDragStart(item.element, uri, event));\n        }\n        if (this.horizontalScrolling) {\n            this.measureItemWidth(item);\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    measureItemWidth(item) {\n        if (!item.row || !item.row.domNode) {\n            return;\n        }\n        item.row.domNode.style.width = 'fit-content';\n        item.width = getContentWidth(item.row.domNode);\n        const style = getWindow(item.row.domNode).getComputedStyle(item.row.domNode);\n        if (style.paddingLeft) {\n            item.width += parseFloat(style.paddingLeft);\n        }\n        if (style.paddingRight) {\n            item.width += parseFloat(style.paddingRight);\n        }\n        item.row.domNode.style.width = '';\n    }\n    updateItemInDOM(item, index) {\n        item.row.domNode.style.top = `${this.elementTop(index)}px`;\n        if (this.setRowHeight) {\n            item.row.domNode.style.height = `${item.size}px`;\n        }\n        if (this.setRowLineHeight) {\n            item.row.domNode.style.lineHeight = `${item.size}px`;\n        }\n        item.row.domNode.setAttribute('data-index', `${index}`);\n        item.row.domNode.setAttribute('data-last-element', index === this.length - 1 ? 'true' : 'false');\n        item.row.domNode.setAttribute('data-parity', index % 2 === 0 ? 'even' : 'odd');\n        item.row.domNode.setAttribute('aria-setsize', String(this.accessibilityProvider.getSetSize(item.element, index, this.length)));\n        item.row.domNode.setAttribute('aria-posinset', String(this.accessibilityProvider.getPosInSet(item.element, index)));\n        item.row.domNode.setAttribute('id', this.getElementDomId(index));\n        item.row.domNode.classList.toggle('drop-target', item.dropTarget);\n    }\n    removeItemFromDOM(index) {\n        const item = this.items[index];\n        item.dragStartDisposable.dispose();\n        item.checkedDisposable.dispose();\n        if (item.row) {\n            const renderer = this.renderers.get(item.templateId);\n            if (renderer && renderer.disposeElement) {\n                renderer.disposeElement(item.element, index, item.row.templateData, item.size);\n            }\n            this.cache.release(item.row);\n            item.row = null;\n        }\n        if (this.horizontalScrolling) {\n            this.eventuallyUpdateScrollWidth();\n        }\n    }\n    getScrollTop() {\n        const scrollPosition = this.scrollableElement.getScrollPosition();\n        return scrollPosition.scrollTop;\n    }\n    setScrollTop(scrollTop, reuseAnimation) {\n        if (this.scrollableElementUpdateDisposable) {\n            this.scrollableElementUpdateDisposable.dispose();\n            this.scrollableElementUpdateDisposable = null;\n            this.scrollableElement.setScrollDimensions({ scrollHeight: this.scrollHeight });\n        }\n        this.scrollableElement.setScrollPosition({ scrollTop, reuseAnimation });\n    }\n    get scrollTop() {\n        return this.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.setScrollTop(scrollTop);\n    }\n    get scrollHeight() {\n        return this._scrollHeight + (this.horizontalScrolling ? 10 : 0) + this.paddingBottom;\n    }\n    // Events\n    get onMouseClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'click')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseDblClick() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'dblclick')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseMiddleClick() { return Event.filter(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'auxclick')).event, e => this.toMouseEvent(e), this.disposables), e => e.browserEvent.button === 1, this.disposables); }\n    get onMouseDown() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mousedown')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseOver() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseover')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onMouseOut() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'mouseout')).event, e => this.toMouseEvent(e), this.disposables); }\n    get onContextMenu() { return Event.any(Event.map(this.disposables.add(new DomEmitter(this.domNode, 'contextmenu')).event, e => this.toMouseEvent(e), this.disposables), Event.map(this.disposables.add(new DomEmitter(this.domNode, TouchEventType.Contextmenu)).event, e => this.toGestureEvent(e), this.disposables)); }\n    get onTouchStart() { return Event.map(this.disposables.add(new DomEmitter(this.domNode, 'touchstart')).event, e => this.toTouchEvent(e), this.disposables); }\n    get onTap() { return Event.map(this.disposables.add(new DomEmitter(this.rowsContainer, TouchEventType.Tap)).event, e => this.toGestureEvent(e), this.disposables); }\n    toMouseEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toTouchEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toGestureEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.initialTarget || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        return { browserEvent, index, element };\n    }\n    toDragEvent(browserEvent) {\n        const index = this.getItemIndexFromEventTarget(browserEvent.target || null);\n        const item = typeof index === 'undefined' ? undefined : this.items[index];\n        const element = item && item.element;\n        const sector = this.getTargetSector(browserEvent, index);\n        return { browserEvent, index, element, sector };\n    }\n    onScroll(e) {\n        try {\n            const previousRenderRange = this.getRenderRange(this.lastRenderTop, this.lastRenderHeight);\n            this.render(previousRenderRange, e.scrollTop, e.height, e.scrollLeft, e.scrollWidth);\n            if (this.supportDynamicHeights) {\n                this._rerender(e.scrollTop, e.height, e.inSmoothScrolling);\n            }\n        }\n        catch (err) {\n            console.error('Got bad scroll event:', e);\n            throw err;\n        }\n    }\n    onTouchChange(event) {\n        event.preventDefault();\n        event.stopPropagation();\n        this.scrollTop -= event.translationY;\n    }\n    // DND\n    onDragStart(element, uri, event) {\n        var _a, _b;\n        if (!event.dataTransfer) {\n            return;\n        }\n        const elements = this.dnd.getDragElements(element);\n        event.dataTransfer.effectAllowed = 'copyMove';\n        event.dataTransfer.setData(DataTransfers.TEXT, uri);\n        if (event.dataTransfer.setDragImage) {\n            let label;\n            if (this.dnd.getDragLabel) {\n                label = this.dnd.getDragLabel(elements, event);\n            }\n            if (typeof label === 'undefined') {\n                label = String(elements.length);\n            }\n            const dragImage = $('.monaco-drag-image');\n            dragImage.textContent = label;\n            const getDragImageContainer = (e) => {\n                while (e && !e.classList.contains('monaco-workbench')) {\n                    e = e.parentElement;\n                }\n                return e || this.domNode.ownerDocument;\n            };\n            const container = getDragImageContainer(this.domNode);\n            container.appendChild(dragImage);\n            event.dataTransfer.setDragImage(dragImage, -10, -10);\n            setTimeout(() => container.removeChild(dragImage), 0);\n        }\n        this.domNode.classList.add('dragging');\n        this.currentDragData = new ElementsDragAndDropData(elements);\n        StaticDND.CurrentDragAndDropData = new ExternalElementsDragAndDropData(elements);\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event);\n    }\n    onDragOver(event) {\n        var _a, _b;\n        event.browserEvent.preventDefault(); // needed so that the drop event fires (https://stackoverflow.com/questions/21339924/drop-event-not-firing-in-chrome)\n        this.onDragLeaveTimeout.dispose();\n        if (StaticDND.CurrentDragAndDropData && StaticDND.CurrentDragAndDropData.getData() === 'vscode-ui') {\n            return false;\n        }\n        this.setupDragAndDropScrollTopAnimation(event.browserEvent);\n        if (!event.browserEvent.dataTransfer) {\n            return false;\n        }\n        // Drag over from outside\n        if (!this.currentDragData) {\n            if (StaticDND.CurrentDragAndDropData) {\n                // Drag over from another list\n                this.currentDragData = StaticDND.CurrentDragAndDropData;\n            }\n            else {\n                // Drag over from the desktop\n                if (!event.browserEvent.dataTransfer.types) {\n                    return false;\n                }\n                this.currentDragData = new NativeDragAndDropData();\n            }\n        }\n        const result = this.dnd.onDragOver(this.currentDragData, event.element, event.index, event.sector, event.browserEvent);\n        this.canDrop = typeof result === 'boolean' ? result : result.accept;\n        if (!this.canDrop) {\n            this.currentDragFeedback = undefined;\n            this.currentDragFeedbackDisposable.dispose();\n            return false;\n        }\n        event.browserEvent.dataTransfer.dropEffect = (typeof result !== 'boolean' && ((_a = result.effect) === null || _a === void 0 ? void 0 : _a.type) === 0 /* ListDragOverEffectType.Copy */) ? 'copy' : 'move';\n        let feedback;\n        if (typeof result !== 'boolean' && result.feedback) {\n            feedback = result.feedback;\n        }\n        else {\n            if (typeof event.index === 'undefined') {\n                feedback = [-1];\n            }\n            else {\n                feedback = [event.index];\n            }\n        }\n        // sanitize feedback list\n        feedback = distinct(feedback).filter(i => i >= -1 && i < this.length).sort((a, b) => a - b);\n        feedback = feedback[0] === -1 ? [-1] : feedback;\n        let dragOverEffectPosition = typeof result !== 'boolean' && result.effect && result.effect.position ? result.effect.position : \"drop-target\" /* ListDragOverEffectPosition.Over */;\n        if (equalsDragFeedback(this.currentDragFeedback, feedback) && this.currentDragFeedbackPosition === dragOverEffectPosition) {\n            return true;\n        }\n        this.currentDragFeedback = feedback;\n        this.currentDragFeedbackPosition = dragOverEffectPosition;\n        this.currentDragFeedbackDisposable.dispose();\n        if (feedback[0] === -1) { // entire list feedback\n            this.domNode.classList.add(dragOverEffectPosition);\n            this.rowsContainer.classList.add(dragOverEffectPosition);\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                this.domNode.classList.remove(dragOverEffectPosition);\n                this.rowsContainer.classList.remove(dragOverEffectPosition);\n            });\n        }\n        else {\n            if (feedback.length > 1 && dragOverEffectPosition !== \"drop-target\" /* ListDragOverEffectPosition.Over */) {\n                throw new Error('Can\\'t use multiple feedbacks with position different than \\'over\\'');\n            }\n            // Make sure there is no flicker when moving between two items\n            // Always use the before feedback if possible\n            if (dragOverEffectPosition === \"drop-target-after\" /* ListDragOverEffectPosition.After */) {\n                if (feedback[0] < this.length - 1) {\n                    feedback[0] += 1;\n                    dragOverEffectPosition = \"drop-target-before\" /* ListDragOverEffectPosition.Before */;\n                }\n            }\n            for (const index of feedback) {\n                const item = this.items[index];\n                item.dropTarget = true;\n                (_b = item.row) === null || _b === void 0 ? void 0 : _b.domNode.classList.add(dragOverEffectPosition);\n            }\n            this.currentDragFeedbackDisposable = toDisposable(() => {\n                var _a;\n                for (const index of feedback) {\n                    const item = this.items[index];\n                    item.dropTarget = false;\n                    (_a = item.row) === null || _a === void 0 ? void 0 : _a.domNode.classList.remove(dragOverEffectPosition);\n                }\n            });\n        }\n        return true;\n    }\n    onDragLeave(event) {\n        var _a, _b;\n        this.onDragLeaveTimeout.dispose();\n        this.onDragLeaveTimeout = disposableTimeout(() => this.clearDragOverFeedback(), 100, this.disposables);\n        if (this.currentDragData) {\n            (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, this.currentDragData, event.element, event.index, event.browserEvent);\n        }\n    }\n    onDrop(event) {\n        if (!this.canDrop) {\n            return;\n        }\n        const dragData = this.currentDragData;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.domNode.classList.remove('dragging');\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        if (!dragData || !event.browserEvent.dataTransfer) {\n            return;\n        }\n        event.browserEvent.preventDefault();\n        dragData.update(event.browserEvent.dataTransfer);\n        this.dnd.drop(dragData, event.element, event.index, event.sector, event.browserEvent);\n    }\n    onDragEnd(event) {\n        var _a, _b;\n        this.canDrop = false;\n        this.teardownDragAndDropScrollTopAnimation();\n        this.clearDragOverFeedback();\n        this.domNode.classList.remove('dragging');\n        this.currentDragData = undefined;\n        StaticDND.CurrentDragAndDropData = undefined;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, event);\n    }\n    clearDragOverFeedback() {\n        this.currentDragFeedback = undefined;\n        this.currentDragFeedbackPosition = undefined;\n        this.currentDragFeedbackDisposable.dispose();\n        this.currentDragFeedbackDisposable = Disposable.None;\n    }\n    // DND scroll top animation\n    setupDragAndDropScrollTopAnimation(event) {\n        if (!this.dragOverAnimationDisposable) {\n            const viewTop = getTopLeftOffset(this.domNode).top;\n            this.dragOverAnimationDisposable = animate(getWindow(this.domNode), this.animateDragAndDropScrollTop.bind(this, viewTop));\n        }\n        this.dragOverAnimationStopDisposable.dispose();\n        this.dragOverAnimationStopDisposable = disposableTimeout(() => {\n            if (this.dragOverAnimationDisposable) {\n                this.dragOverAnimationDisposable.dispose();\n                this.dragOverAnimationDisposable = undefined;\n            }\n        }, 1000, this.disposables);\n        this.dragOverMouseY = event.pageY;\n    }\n    animateDragAndDropScrollTop(viewTop) {\n        if (this.dragOverMouseY === undefined) {\n            return;\n        }\n        const diff = this.dragOverMouseY - viewTop;\n        const upperLimit = this.renderHeight - 35;\n        if (diff < 35) {\n            this.scrollTop += Math.max(-14, Math.floor(0.3 * (diff - 35)));\n        }\n        else if (diff > upperLimit) {\n            this.scrollTop += Math.min(14, Math.floor(0.3 * (diff - upperLimit)));\n        }\n    }\n    teardownDragAndDropScrollTopAnimation() {\n        this.dragOverAnimationStopDisposable.dispose();\n        if (this.dragOverAnimationDisposable) {\n            this.dragOverAnimationDisposable.dispose();\n            this.dragOverAnimationDisposable = undefined;\n        }\n    }\n    // Util\n    getTargetSector(browserEvent, targetIndex) {\n        if (targetIndex === undefined) {\n            return undefined;\n        }\n        const relativePosition = browserEvent.offsetY / this.items[targetIndex].size;\n        const sector = Math.floor(relativePosition / 0.25);\n        return clamp(sector, 0, 3);\n    }\n    getItemIndexFromEventTarget(target) {\n        const scrollableElement = this.scrollableElement.getDomNode();\n        let element = target;\n        while (element instanceof HTMLElement && element !== this.rowsContainer && scrollableElement.contains(element)) {\n            const rawIndex = element.getAttribute('data-index');\n            if (rawIndex) {\n                const index = Number(rawIndex);\n                if (!isNaN(index)) {\n                    return index;\n                }\n            }\n            element = element.parentElement;\n        }\n        return undefined;\n    }\n    getRenderRange(renderTop, renderHeight) {\n        return {\n            start: this.rangeMap.indexAt(renderTop),\n            end: this.rangeMap.indexAfter(renderTop + renderHeight - 1)\n        };\n    }\n    /**\n     * Given a stable rendered state, checks every rendered element whether it needs\n     * to be probed for dynamic height. Adjusts scroll height and top if necessary.\n     */\n    _rerender(renderTop, renderHeight, inSmoothScrolling) {\n        const previousRenderRange = this.getRenderRange(renderTop, renderHeight);\n        // Let's remember the second element's position, this helps in scrolling up\n        // and preserving a linear upwards scroll movement\n        let anchorElementIndex;\n        let anchorElementTopDelta;\n        if (renderTop === this.elementTop(previousRenderRange.start)) {\n            anchorElementIndex = previousRenderRange.start;\n            anchorElementTopDelta = 0;\n        }\n        else if (previousRenderRange.end - previousRenderRange.start > 1) {\n            anchorElementIndex = previousRenderRange.start + 1;\n            anchorElementTopDelta = this.elementTop(anchorElementIndex) - renderTop;\n        }\n        let heightDiff = 0;\n        while (true) {\n            const renderRange = this.getRenderRange(renderTop, renderHeight);\n            let didChange = false;\n            for (let i = renderRange.start; i < renderRange.end; i++) {\n                const diff = this.probeDynamicHeight(i);\n                if (diff !== 0) {\n                    this.rangeMap.splice(i, 1, [this.items[i]]);\n                }\n                heightDiff += diff;\n                didChange = didChange || diff !== 0;\n            }\n            if (!didChange) {\n                if (heightDiff !== 0) {\n                    this.eventuallyUpdateScrollDimensions();\n                }\n                const unrenderRanges = Range.relativeComplement(previousRenderRange, renderRange);\n                for (const range of unrenderRanges) {\n                    for (let i = range.start; i < range.end; i++) {\n                        if (this.items[i].row) {\n                            this.removeItemFromDOM(i);\n                        }\n                    }\n                }\n                const renderRanges = Range.relativeComplement(renderRange, previousRenderRange).reverse();\n                for (const range of renderRanges) {\n                    for (let i = range.end - 1; i >= range.start; i--) {\n                        this.insertItemInDOM(i);\n                    }\n                }\n                for (let i = renderRange.start; i < renderRange.end; i++) {\n                    if (this.items[i].row) {\n                        this.updateItemInDOM(this.items[i], i);\n                    }\n                }\n                if (typeof anchorElementIndex === 'number') {\n                    // To compute a destination scroll top, we need to take into account the current smooth scrolling\n                    // animation, and then reuse it with a new target (to avoid prolonging the scroll)\n                    // See https://github.com/microsoft/vscode/issues/104144\n                    // See https://github.com/microsoft/vscode/pull/104284\n                    // See https://github.com/microsoft/vscode/issues/107704\n                    const deltaScrollTop = this.scrollable.getFutureScrollPosition().scrollTop - renderTop;\n                    const newScrollTop = this.elementTop(anchorElementIndex) - anchorElementTopDelta + deltaScrollTop;\n                    this.setScrollTop(newScrollTop, inSmoothScrolling);\n                }\n                this._onDidChangeContentHeight.fire(this.contentHeight);\n                return;\n            }\n        }\n    }\n    probeDynamicHeight(index) {\n        var _a, _b, _c;\n        const item = this.items[index];\n        if (!!this.virtualDelegate.getDynamicHeight) {\n            const newSize = this.virtualDelegate.getDynamicHeight(item.element);\n            if (newSize !== null) {\n                const size = item.size;\n                item.size = newSize;\n                item.lastDynamicHeightWidth = this.renderWidth;\n                return newSize - size;\n            }\n        }\n        if (!item.hasDynamicHeight || item.lastDynamicHeightWidth === this.renderWidth) {\n            return 0;\n        }\n        if (!!this.virtualDelegate.hasDynamicHeight && !this.virtualDelegate.hasDynamicHeight(item.element)) {\n            return 0;\n        }\n        const size = item.size;\n        if (item.row) {\n            item.row.domNode.style.height = '';\n            item.size = item.row.domNode.offsetHeight;\n            if (item.size === 0 && !isAncestor(item.row.domNode, getWindow(item.row.domNode).document.body)) {\n                console.warn('Measuring item node that is not in DOM! Add ListView to the DOM before measuring row height!');\n            }\n            item.lastDynamicHeightWidth = this.renderWidth;\n            return item.size - size;\n        }\n        const { row } = this.cache.alloc(item.templateId);\n        row.domNode.style.height = '';\n        this.rowsContainer.appendChild(row.domNode);\n        const renderer = this.renderers.get(item.templateId);\n        if (!renderer) {\n            throw new BugIndicatingError('Missing renderer for templateId: ' + item.templateId);\n        }\n        renderer.renderElement(item.element, index, row.templateData, undefined);\n        item.size = row.domNode.offsetHeight;\n        (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, index, row.templateData, undefined);\n        (_c = (_b = this.virtualDelegate).setDynamicHeight) === null || _c === void 0 ? void 0 : _c.call(_b, item.element, item.size);\n        item.lastDynamicHeightWidth = this.renderWidth;\n        this.rowsContainer.removeChild(row.domNode);\n        this.cache.release(row);\n        return item.size - size;\n    }\n    getElementDomId(index) {\n        return `${this.domId}_${index}`;\n    }\n    // Dispose\n    dispose() {\n        var _a, _b;\n        for (const item of this.items) {\n            item.dragStartDisposable.dispose();\n            item.checkedDisposable.dispose();\n            if (item.row) {\n                const renderer = this.renderers.get(item.row.templateId);\n                if (renderer) {\n                    (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, item.element, -1, item.row.templateData, undefined);\n                    renderer.disposeTemplate(item.row.templateData);\n                }\n            }\n        }\n        this.items = [];\n        if (this.domNode && this.domNode.parentNode) {\n            this.domNode.parentNode.removeChild(this.domNode);\n        }\n        (_b = this.dragOverAnimationDisposable) === null || _b === void 0 ? void 0 : _b.dispose();\n        this.disposables.dispose();\n    }\n}\nListView.InstanceCount = 0;\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDblClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseMiddleClick\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseDown\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseOver\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onMouseOut\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTouchStart\", null);\n__decorate([\n    memoize\n], ListView.prototype, \"onTap\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class CombinedSpliceable {\n    constructor(spliceables) {\n        this.spliceables = spliceables;\n    }\n    splice(start, deleteCount, elements) {\n        this.spliceables.forEach(s => s.splice(start, deleteCount, elements));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class ListError extends Error {\n    constructor(user, message) {\n        super(`ListError [${user}] ${message}`);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { asCssValueWithDefault, createStyleSheet, EventHelper, getActiveElement, getWindow, isMouseEvent } from '../../dom.js';\nimport { DomEmitter } from '../../event.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { Gesture } from '../../touch.js';\nimport { alert } from '../aria/aria.js';\nimport { CombinedSpliceable } from './splice.js';\nimport { binarySearch, firstOrDefault, range } from '../../../common/arrays.js';\nimport { timeout } from '../../../common/async.js';\nimport { Color } from '../../../common/color.js';\nimport { memoize } from '../../../common/decorators.js';\nimport { Emitter, Event, EventBufferer } from '../../../common/event.js';\nimport { matchesFuzzy2, matchesPrefix } from '../../../common/filters.js';\nimport { DisposableStore, dispose } from '../../../common/lifecycle.js';\nimport { clamp } from '../../../common/numbers.js';\nimport * as platform from '../../../common/platform.js';\nimport { isNumber } from '../../../common/types.js';\nimport './list.css';\nimport { ListError } from './list.js';\nimport { ListView } from './listView.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nimport { autorun, constObservable } from '../../../common/observable.js';\nclass TraitRenderer {\n    constructor(trait) {\n        this.trait = trait;\n        this.renderedElements = [];\n    }\n    get templateId() {\n        return `template:${this.trait.name}`;\n    }\n    renderTemplate(container) {\n        return container;\n    }\n    renderElement(element, index, templateData) {\n        const renderedElementIndex = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (renderedElementIndex >= 0) {\n            const rendered = this.renderedElements[renderedElementIndex];\n            this.trait.unrender(templateData);\n            rendered.index = index;\n        }\n        else {\n            const rendered = { index, templateData };\n            this.renderedElements.push(rendered);\n        }\n        this.trait.renderIndex(index, templateData);\n    }\n    splice(start, deleteCount, insertCount) {\n        const rendered = [];\n        for (const renderedElement of this.renderedElements) {\n            if (renderedElement.index < start) {\n                rendered.push(renderedElement);\n            }\n            else if (renderedElement.index >= start + deleteCount) {\n                rendered.push({\n                    index: renderedElement.index + insertCount - deleteCount,\n                    templateData: renderedElement.templateData\n                });\n            }\n        }\n        this.renderedElements = rendered;\n    }\n    renderIndexes(indexes) {\n        for (const { index, templateData } of this.renderedElements) {\n            if (indexes.indexOf(index) > -1) {\n                this.trait.renderIndex(index, templateData);\n            }\n        }\n    }\n    disposeTemplate(templateData) {\n        const index = this.renderedElements.findIndex(el => el.templateData === templateData);\n        if (index < 0) {\n            return;\n        }\n        this.renderedElements.splice(index, 1);\n    }\n}\nclass Trait {\n    get name() { return this._trait; }\n    get renderer() {\n        return new TraitRenderer(this);\n    }\n    constructor(_trait) {\n        this._trait = _trait;\n        this.indexes = [];\n        this.sortedIndexes = [];\n        this._onChange = new Emitter();\n        this.onChange = this._onChange.event;\n    }\n    splice(start, deleteCount, elements) {\n        const diff = elements.length - deleteCount;\n        const end = start + deleteCount;\n        const sortedIndexes = [];\n        let i = 0;\n        while (i < this.sortedIndexes.length && this.sortedIndexes[i] < start) {\n            sortedIndexes.push(this.sortedIndexes[i++]);\n        }\n        for (let j = 0; j < elements.length; j++) {\n            if (elements[j]) {\n                sortedIndexes.push(j + start);\n            }\n        }\n        while (i < this.sortedIndexes.length && this.sortedIndexes[i] >= end) {\n            sortedIndexes.push(this.sortedIndexes[i++] + diff);\n        }\n        this.renderer.splice(start, deleteCount, elements.length);\n        this._set(sortedIndexes, sortedIndexes);\n    }\n    renderIndex(index, container) {\n        container.classList.toggle(this._trait, this.contains(index));\n    }\n    unrender(container) {\n        container.classList.remove(this._trait);\n    }\n    /**\n     * Sets the indexes which should have this trait.\n     *\n     * @param indexes Indexes which should have this trait.\n     * @return The old indexes which had this trait.\n     */\n    set(indexes, browserEvent) {\n        return this._set(indexes, [...indexes].sort(numericSort), browserEvent);\n    }\n    _set(indexes, sortedIndexes, browserEvent) {\n        const result = this.indexes;\n        const sortedResult = this.sortedIndexes;\n        this.indexes = indexes;\n        this.sortedIndexes = sortedIndexes;\n        const toRender = disjunction(sortedResult, indexes);\n        this.renderer.renderIndexes(toRender);\n        this._onChange.fire({ indexes, browserEvent });\n        return result;\n    }\n    get() {\n        return this.indexes;\n    }\n    contains(index) {\n        return binarySearch(this.sortedIndexes, index, numericSort) >= 0;\n    }\n    dispose() {\n        dispose(this._onChange);\n    }\n}\n__decorate([\n    memoize\n], Trait.prototype, \"renderer\", null);\nclass SelectionTrait extends Trait {\n    constructor(setAriaSelected) {\n        super('selected');\n        this.setAriaSelected = setAriaSelected;\n    }\n    renderIndex(index, container) {\n        super.renderIndex(index, container);\n        if (this.setAriaSelected) {\n            if (this.contains(index)) {\n                container.setAttribute('aria-selected', 'true');\n            }\n            else {\n                container.setAttribute('aria-selected', 'false');\n            }\n        }\n    }\n}\n/**\n * The TraitSpliceable is used as a util class to be able\n * to preserve traits across splice calls, given an identity\n * provider.\n */\nclass TraitSpliceable {\n    constructor(trait, view, identityProvider) {\n        this.trait = trait;\n        this.view = view;\n        this.identityProvider = identityProvider;\n    }\n    splice(start, deleteCount, elements) {\n        if (!this.identityProvider) {\n            return this.trait.splice(start, deleteCount, new Array(elements.length).fill(false));\n        }\n        const pastElementsWithTrait = this.trait.get().map(i => this.identityProvider.getId(this.view.element(i)).toString());\n        if (pastElementsWithTrait.length === 0) {\n            return this.trait.splice(start, deleteCount, new Array(elements.length).fill(false));\n        }\n        const pastElementsWithTraitSet = new Set(pastElementsWithTrait);\n        const elementsWithTrait = elements.map(e => pastElementsWithTraitSet.has(this.identityProvider.getId(e).toString()));\n        this.trait.splice(start, deleteCount, elementsWithTrait);\n    }\n}\nexport function isInputElement(e) {\n    return e.tagName === 'INPUT' || e.tagName === 'TEXTAREA';\n}\nfunction isListElementDescendantOfClass(e, className) {\n    if (e.classList.contains(className)) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isListElementDescendantOfClass(e.parentElement, className);\n}\nexport function isMonacoEditor(e) {\n    return isListElementDescendantOfClass(e, 'monaco-editor');\n}\nexport function isMonacoCustomToggle(e) {\n    return isListElementDescendantOfClass(e, 'monaco-custom-toggle');\n}\nexport function isActionItem(e) {\n    return isListElementDescendantOfClass(e, 'action-item');\n}\nexport function isStickyScrollElement(e) {\n    return isListElementDescendantOfClass(e, 'monaco-tree-sticky-row');\n}\nexport function isStickyScrollContainer(e) {\n    return e.classList.contains('monaco-tree-sticky-container');\n}\nexport function isButton(e) {\n    if ((e.tagName === 'A' && e.classList.contains('monaco-button')) ||\n        (e.tagName === 'DIV' && e.classList.contains('monaco-button-dropdown'))) {\n        return true;\n    }\n    if (e.classList.contains('monaco-list')) {\n        return false;\n    }\n    if (!e.parentElement) {\n        return false;\n    }\n    return isButton(e.parentElement);\n}\nclass KeyboardController {\n    get onKeyDown() {\n        return Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event, $ => $.filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e)));\n    }\n    constructor(list, view, options) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        this.multipleSelectionDisposables = new DisposableStore();\n        this.multipleSelectionSupport = options.multipleSelectionSupport;\n        this.disposables.add(this.onKeyDown(e => {\n            switch (e.keyCode) {\n                case 3 /* KeyCode.Enter */:\n                    return this.onEnter(e);\n                case 16 /* KeyCode.UpArrow */:\n                    return this.onUpArrow(e);\n                case 18 /* KeyCode.DownArrow */:\n                    return this.onDownArrow(e);\n                case 11 /* KeyCode.PageUp */:\n                    return this.onPageUpArrow(e);\n                case 12 /* KeyCode.PageDown */:\n                    return this.onPageDownArrow(e);\n                case 9 /* KeyCode.Escape */:\n                    return this.onEscape(e);\n                case 31 /* KeyCode.KeyA */:\n                    if (this.multipleSelectionSupport && (platform.isMacintosh ? e.metaKey : e.ctrlKey)) {\n                        this.onCtrlA(e);\n                    }\n            }\n        }));\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionSupport = optionsUpdate.multipleSelectionSupport;\n        }\n    }\n    onEnter(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(this.list.getFocus(), e.browserEvent);\n    }\n    onUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPrevious(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNext(1, false, e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageUpArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusPreviousPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onPageDownArrow(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.focusNextPage(e.browserEvent);\n        const el = this.list.getFocus()[0];\n        this.list.setAnchor(el);\n        this.list.reveal(el);\n        this.view.domNode.focus();\n    }\n    onCtrlA(e) {\n        e.preventDefault();\n        e.stopPropagation();\n        this.list.setSelection(range(this.list.length), e.browserEvent);\n        this.list.setAnchor(undefined);\n        this.view.domNode.focus();\n    }\n    onEscape(e) {\n        if (this.list.getSelection().length) {\n            e.preventDefault();\n            e.stopPropagation();\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            this.view.domNode.focus();\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n        this.multipleSelectionDisposables.dispose();\n    }\n}\n__decorate([\n    memoize\n], KeyboardController.prototype, \"onKeyDown\", null);\nexport var TypeNavigationMode;\n(function (TypeNavigationMode) {\n    TypeNavigationMode[TypeNavigationMode[\"Automatic\"] = 0] = \"Automatic\";\n    TypeNavigationMode[TypeNavigationMode[\"Trigger\"] = 1] = \"Trigger\";\n})(TypeNavigationMode || (TypeNavigationMode = {}));\nvar TypeNavigationControllerState;\n(function (TypeNavigationControllerState) {\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Idle\"] = 0] = \"Idle\";\n    TypeNavigationControllerState[TypeNavigationControllerState[\"Typing\"] = 1] = \"Typing\";\n})(TypeNavigationControllerState || (TypeNavigationControllerState = {}));\nexport const DefaultKeyboardNavigationDelegate = new class {\n    mightProducePrintableCharacter(event) {\n        if (event.ctrlKey || event.metaKey || event.altKey) {\n            return false;\n        }\n        return (event.keyCode >= 31 /* KeyCode.KeyA */ && event.keyCode <= 56 /* KeyCode.KeyZ */)\n            || (event.keyCode >= 21 /* KeyCode.Digit0 */ && event.keyCode <= 30 /* KeyCode.Digit9 */)\n            || (event.keyCode >= 98 /* KeyCode.Numpad0 */ && event.keyCode <= 107 /* KeyCode.Numpad9 */)\n            || (event.keyCode >= 85 /* KeyCode.Semicolon */ && event.keyCode <= 95 /* KeyCode.Quote */);\n    }\n};\nclass TypeNavigationController {\n    constructor(list, view, keyboardNavigationLabelProvider, keyboardNavigationEventFilter, delegate) {\n        this.list = list;\n        this.view = view;\n        this.keyboardNavigationLabelProvider = keyboardNavigationLabelProvider;\n        this.keyboardNavigationEventFilter = keyboardNavigationEventFilter;\n        this.delegate = delegate;\n        this.enabled = false;\n        this.state = TypeNavigationControllerState.Idle;\n        this.mode = TypeNavigationMode.Automatic;\n        this.triggered = false;\n        this.previouslyFocused = -1;\n        this.enabledDisposables = new DisposableStore();\n        this.disposables = new DisposableStore();\n        this.updateOptions(list.options);\n    }\n    updateOptions(options) {\n        var _a, _b;\n        if ((_a = options.typeNavigationEnabled) !== null && _a !== void 0 ? _a : true) {\n            this.enable();\n        }\n        else {\n            this.disable();\n        }\n        this.mode = (_b = options.typeNavigationMode) !== null && _b !== void 0 ? _b : TypeNavigationMode.Automatic;\n    }\n    enable() {\n        if (this.enabled) {\n            return;\n        }\n        let typing = false;\n        const onChar = Event.chain(this.enabledDisposables.add(new DomEmitter(this.view.domNode, 'keydown')).event, $ => $.filter(e => !isInputElement(e.target))\n            .filter(() => this.mode === TypeNavigationMode.Automatic || this.triggered)\n            .map(event => new StandardKeyboardEvent(event))\n            .filter(e => typing || this.keyboardNavigationEventFilter(e))\n            .filter(e => this.delegate.mightProducePrintableCharacter(e))\n            .forEach(e => EventHelper.stop(e, true))\n            .map(event => event.browserEvent.key));\n        const onClear = Event.debounce(onChar, () => null, 800, undefined, undefined, undefined, this.enabledDisposables);\n        const onInput = Event.reduce(Event.any(onChar, onClear), (r, i) => i === null ? null : ((r || '') + i), undefined, this.enabledDisposables);\n        onInput(this.onInput, this, this.enabledDisposables);\n        onClear(this.onClear, this, this.enabledDisposables);\n        onChar(() => typing = true, undefined, this.enabledDisposables);\n        onClear(() => typing = false, undefined, this.enabledDisposables);\n        this.enabled = true;\n        this.triggered = false;\n    }\n    disable() {\n        if (!this.enabled) {\n            return;\n        }\n        this.enabledDisposables.clear();\n        this.enabled = false;\n        this.triggered = false;\n    }\n    onClear() {\n        var _a;\n        const focus = this.list.getFocus();\n        if (focus.length > 0 && focus[0] === this.previouslyFocused) {\n            // List: re-announce element on typing end since typed keys will interrupt aria label of focused element\n            // Do not announce if there was a focus change at the end to prevent duplication https://github.com/microsoft/vscode/issues/95961\n            const ariaLabel = (_a = this.list.options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getAriaLabel(this.list.element(focus[0]));\n            if (typeof ariaLabel === 'string') {\n                alert(ariaLabel);\n            }\n            else if (ariaLabel) {\n                alert(ariaLabel.get());\n            }\n        }\n        this.previouslyFocused = -1;\n    }\n    onInput(word) {\n        if (!word) {\n            this.state = TypeNavigationControllerState.Idle;\n            this.triggered = false;\n            return;\n        }\n        const focus = this.list.getFocus();\n        const start = focus.length > 0 ? focus[0] : 0;\n        const delta = this.state === TypeNavigationControllerState.Idle ? 1 : 0;\n        this.state = TypeNavigationControllerState.Typing;\n        for (let i = 0; i < this.list.length; i++) {\n            const index = (start + i + delta) % this.list.length;\n            const label = this.keyboardNavigationLabelProvider.getKeyboardNavigationLabel(this.view.element(index));\n            const labelStr = label && label.toString();\n            if (this.list.options.typeNavigationEnabled) {\n                if (typeof labelStr !== 'undefined') {\n                    // If prefix is found, focus and return early\n                    if (matchesPrefix(word, labelStr)) {\n                        this.previouslyFocused = start;\n                        this.list.setFocus([index]);\n                        this.list.reveal(index);\n                        return;\n                    }\n                    const fuzzy = matchesFuzzy2(word, labelStr);\n                    if (fuzzy) {\n                        const fuzzyScore = fuzzy[0].end - fuzzy[0].start;\n                        // ensures that when fuzzy matching, doesn't clash with prefix matching (1 input vs 1+ should be prefix and fuzzy respecitvely). Also makes sure that exact matches are prioritized.\n                        if (fuzzyScore > 1 && fuzzy.length === 1) {\n                            this.previouslyFocused = start;\n                            this.list.setFocus([index]);\n                            this.list.reveal(index);\n                            return;\n                        }\n                    }\n                }\n            }\n            else if (typeof labelStr === 'undefined' || matchesPrefix(word, labelStr)) {\n                this.previouslyFocused = start;\n                this.list.setFocus([index]);\n                this.list.reveal(index);\n                return;\n            }\n        }\n    }\n    dispose() {\n        this.disable();\n        this.enabledDisposables.dispose();\n        this.disposables.dispose();\n    }\n}\nclass DOMFocusController {\n    constructor(list, view) {\n        this.list = list;\n        this.view = view;\n        this.disposables = new DisposableStore();\n        const onKeyDown = Event.chain(this.disposables.add(new DomEmitter(view.domNode, 'keydown')).event, $ => $\n            .filter(e => !isInputElement(e.target))\n            .map(e => new StandardKeyboardEvent(e)));\n        const onTab = Event.chain(onKeyDown, $ => $.filter(e => e.keyCode === 2 /* KeyCode.Tab */ && !e.ctrlKey && !e.metaKey && !e.shiftKey && !e.altKey));\n        onTab(this.onTab, this, this.disposables);\n    }\n    onTab(e) {\n        if (e.target !== this.view.domNode) {\n            return;\n        }\n        const focus = this.list.getFocus();\n        if (focus.length === 0) {\n            return;\n        }\n        const focusedDomElement = this.view.domElement(focus[0]);\n        if (!focusedDomElement) {\n            return;\n        }\n        const tabIndexElement = focusedDomElement.querySelector('[tabIndex]');\n        if (!tabIndexElement || !(tabIndexElement instanceof HTMLElement) || tabIndexElement.tabIndex === -1) {\n            return;\n        }\n        const style = getWindow(tabIndexElement).getComputedStyle(tabIndexElement);\n        if (style.visibility === 'hidden' || style.display === 'none') {\n            return;\n        }\n        e.preventDefault();\n        e.stopPropagation();\n        tabIndexElement.focus();\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport function isSelectionSingleChangeEvent(event) {\n    return platform.isMacintosh ? event.browserEvent.metaKey : event.browserEvent.ctrlKey;\n}\nexport function isSelectionRangeChangeEvent(event) {\n    return event.browserEvent.shiftKey;\n}\nfunction isMouseRightClick(event) {\n    return isMouseEvent(event) && event.button === 2;\n}\nconst DefaultMultipleSelectionController = {\n    isSelectionSingleChangeEvent,\n    isSelectionRangeChangeEvent\n};\nexport class MouseController {\n    constructor(list) {\n        this.list = list;\n        this.disposables = new DisposableStore();\n        this._onPointer = new Emitter();\n        this.onPointer = this._onPointer.event;\n        if (list.options.multipleSelectionSupport !== false) {\n            this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n        }\n        this.mouseSupport = typeof list.options.mouseSupport === 'undefined' || !!list.options.mouseSupport;\n        if (this.mouseSupport) {\n            list.onMouseDown(this.onMouseDown, this, this.disposables);\n            list.onContextMenu(this.onContextMenu, this, this.disposables);\n            list.onMouseDblClick(this.onDoubleClick, this, this.disposables);\n            list.onTouchStart(this.onMouseDown, this, this.disposables);\n            this.disposables.add(Gesture.addTarget(list.getHTMLElement()));\n        }\n        Event.any(list.onMouseClick, list.onMouseMiddleClick, list.onTap)(this.onViewPointer, this, this.disposables);\n    }\n    updateOptions(optionsUpdate) {\n        if (optionsUpdate.multipleSelectionSupport !== undefined) {\n            this.multipleSelectionController = undefined;\n            if (optionsUpdate.multipleSelectionSupport) {\n                this.multipleSelectionController = this.list.options.multipleSelectionController || DefaultMultipleSelectionController;\n            }\n        }\n    }\n    isSelectionSingleChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionSingleChangeEvent(event);\n    }\n    isSelectionRangeChangeEvent(event) {\n        if (!this.multipleSelectionController) {\n            return false;\n        }\n        return this.multipleSelectionController.isSelectionRangeChangeEvent(event);\n    }\n    isSelectionChangeEvent(event) {\n        return this.isSelectionSingleChangeEvent(event) || this.isSelectionRangeChangeEvent(event);\n    }\n    onMouseDown(e) {\n        if (isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (getActiveElement() !== e.browserEvent.target) {\n            this.list.domFocus();\n        }\n    }\n    onContextMenu(e) {\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        const focus = typeof e.index === 'undefined' ? [] : [e.index];\n        this.list.setFocus(focus, e.browserEvent);\n    }\n    onViewPointer(e) {\n        if (!this.mouseSupport) {\n            return;\n        }\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        e.browserEvent.isHandledByList = true;\n        const focus = e.index;\n        if (typeof focus === 'undefined') {\n            this.list.setFocus([], e.browserEvent);\n            this.list.setSelection([], e.browserEvent);\n            this.list.setAnchor(undefined);\n            return;\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return this.changeSelection(e);\n        }\n        this.list.setFocus([focus], e.browserEvent);\n        this.list.setAnchor(focus);\n        if (!isMouseRightClick(e.browserEvent)) {\n            this.list.setSelection([focus], e.browserEvent);\n        }\n        this._onPointer.fire(e);\n    }\n    onDoubleClick(e) {\n        if (isInputElement(e.browserEvent.target) || isMonacoEditor(e.browserEvent.target)) {\n            return;\n        }\n        if (this.isSelectionChangeEvent(e)) {\n            return;\n        }\n        if (e.browserEvent.isHandledByList) {\n            return;\n        }\n        e.browserEvent.isHandledByList = true;\n        const focus = this.list.getFocus();\n        this.list.setSelection(focus, e.browserEvent);\n    }\n    changeSelection(e) {\n        const focus = e.index;\n        let anchor = this.list.getAnchor();\n        if (this.isSelectionRangeChangeEvent(e)) {\n            if (typeof anchor === 'undefined') {\n                const currentFocus = this.list.getFocus()[0];\n                anchor = currentFocus !== null && currentFocus !== void 0 ? currentFocus : focus;\n                this.list.setAnchor(anchor);\n            }\n            const min = Math.min(anchor, focus);\n            const max = Math.max(anchor, focus);\n            const rangeSelection = range(min, max + 1);\n            const selection = this.list.getSelection();\n            const contiguousRange = getContiguousRangeContaining(disjunction(selection, [anchor]), anchor);\n            if (contiguousRange.length === 0) {\n                return;\n            }\n            const newSelection = disjunction(rangeSelection, relativeComplement(selection, contiguousRange));\n            this.list.setSelection(newSelection, e.browserEvent);\n            this.list.setFocus([focus], e.browserEvent);\n        }\n        else if (this.isSelectionSingleChangeEvent(e)) {\n            const selection = this.list.getSelection();\n            const newSelection = selection.filter(i => i !== focus);\n            this.list.setFocus([focus]);\n            this.list.setAnchor(focus);\n            if (selection.length === newSelection.length) {\n                this.list.setSelection([...newSelection, focus], e.browserEvent);\n            }\n            else {\n                this.list.setSelection(newSelection, e.browserEvent);\n            }\n        }\n    }\n    dispose() {\n        this.disposables.dispose();\n    }\n}\nexport class DefaultStyleController {\n    constructor(styleElement, selectorSuffix) {\n        this.styleElement = styleElement;\n        this.selectorSuffix = selectorSuffix;\n    }\n    style(styles) {\n        var _a, _b;\n        const suffix = this.selectorSuffix && `.${this.selectorSuffix}`;\n        const content = [];\n        if (styles.listBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-rows { background: ${styles.listBackground}; }`);\n        }\n        if (styles.listFocusBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { background-color: ${styles.listFocusBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused:hover { background-color: ${styles.listFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listFocusForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused { color: ${styles.listFocusForeground}; }`);\n        }\n        if (styles.listActiveSelectionBackground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { background-color: ${styles.listActiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected:hover { background-color: ${styles.listActiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listActiveSelectionForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected { color: ${styles.listActiveSelectionForeground}; }`);\n        }\n        if (styles.listActiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.selected .codicon { color: ${styles.listActiveSelectionIconForeground}; }`);\n        }\n        if (styles.listFocusAndSelectionBackground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { background-color: ${styles.listFocusAndSelectionBackground}; }\n\t\t\t`);\n        }\n        if (styles.listFocusAndSelectionForeground) {\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.selected.focused { color: ${styles.listFocusAndSelectionForeground}; }\n\t\t\t`);\n        }\n        if (styles.listInactiveFocusForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { color:  ${styles.listInactiveFocusForeground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { color:  ${styles.listInactiveFocusForeground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionIconForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused .codicon { color:  ${styles.listInactiveSelectionIconForeground}; }`);\n        }\n        if (styles.listInactiveFocusBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { background-color:  ${styles.listInactiveFocusBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused:hover { background-color:  ${styles.listInactiveFocusBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionBackground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { background-color:  ${styles.listInactiveSelectionBackground}; }`);\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected:hover { background-color:  ${styles.listInactiveSelectionBackground}; }`); // overwrite :hover style in this case!\n        }\n        if (styles.listInactiveSelectionForeground) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { color: ${styles.listInactiveSelectionForeground}; }`);\n        }\n        if (styles.listHoverBackground) {\n            content.push(`.monaco-list${suffix}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { background-color: ${styles.listHoverBackground}; }`);\n        }\n        if (styles.listHoverForeground) {\n            content.push(`.monaco-list${suffix}:not(.drop-target):not(.dragging) .monaco-list-row:hover:not(.selected):not(.focused) { color:  ${styles.listHoverForeground}; }`);\n        }\n        /**\n         * Outlines\n         */\n        const focusAndSelectionOutline = asCssValueWithDefault(styles.listFocusAndSelectionOutline, asCssValueWithDefault(styles.listSelectionOutline, (_a = styles.listFocusOutline) !== null && _a !== void 0 ? _a : ''));\n        if (focusAndSelectionOutline) { // default: listFocusOutline\n            content.push(`.monaco-list${suffix}:focus .monaco-list-row.focused.selected { outline: 1px solid ${focusAndSelectionOutline}; outline-offset: -1px;}`);\n        }\n        if (styles.listFocusOutline) { // default: set\n            content.push(`\n\t\t\t\t.monaco-drag-image,\n\t\t\t\t.monaco-list${suffix}:focus .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t\t.monaco-workbench.context-menu-visible .monaco-list${suffix}.last-focused .monaco-list-row.focused { outline: 1px solid ${styles.listFocusOutline}; outline-offset: -1px; }\n\t\t\t`);\n        }\n        const inactiveFocusAndSelectionOutline = asCssValueWithDefault(styles.listSelectionOutline, (_b = styles.listInactiveFocusOutline) !== null && _b !== void 0 ? _b : '');\n        if (inactiveFocusAndSelectionOutline) {\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused.selected { outline: 1px dotted ${inactiveFocusAndSelectionOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listSelectionOutline) { // default: activeContrastBorder\n            content.push(`.monaco-list${suffix} .monaco-list-row.selected { outline: 1px dotted ${styles.listSelectionOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listInactiveFocusOutline) { // default: null\n            content.push(`.monaco-list${suffix} .monaco-list-row.focused { outline: 1px dotted ${styles.listInactiveFocusOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listHoverOutline) { // default: activeContrastBorder\n            content.push(`.monaco-list${suffix} .monaco-list-row:hover { outline: 1px dashed ${styles.listHoverOutline}; outline-offset: -1px; }`);\n        }\n        if (styles.listDropOverBackground) {\n            content.push(`\n\t\t\t\t.monaco-list${suffix}.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target,\n\t\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target { background-color: ${styles.listDropOverBackground} !important; color: inherit !important; }\n\t\t\t`);\n        }\n        if (styles.listDropBetweenBackground) {\n            content.push(`\n\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target-before .monaco-list-row:first-child::before,\n\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target-before::before {\n\t\t\t\tcontent: \"\"; position: absolute; top: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ${styles.listDropBetweenBackground};\n\t\t\t}`);\n            content.push(`\n\t\t\t.monaco-list${suffix} .monaco-list-rows.drop-target-after .monaco-list-row:last-child::after,\n\t\t\t.monaco-list${suffix} .monaco-list-row.drop-target-after::after {\n\t\t\t\tcontent: \"\"; position: absolute; bottom: 0px; left: 0px; width: 100%; height: 1px;\n\t\t\t\tbackground-color: ${styles.listDropBetweenBackground};\n\t\t\t}`);\n        }\n        if (styles.tableColumnsBorder) {\n            content.push(`\n\t\t\t\t.monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-table > .monaco-split-view2 .monaco-sash.vertical::before,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table:hover > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: ${styles.tableColumnsBorder};\n\t\t\t\t}\n\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2,\n\t\t\t\t.monaco-workbench:not(.reduce-motion) .monaco-table > .monaco-split-view2 .monaco-sash.vertical::before {\n\t\t\t\t\tborder-color: transparent;\n\t\t\t\t}\n\t\t\t`);\n        }\n        if (styles.tableOddRowsBackgroundColor) {\n            content.push(`\n\t\t\t\t.monaco-table .monaco-list-row[data-parity=odd]:not(.focused):not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(:focus) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr,\n\t\t\t\t.monaco-table .monaco-list:not(.focused) .monaco-list-row[data-parity=odd].focused:not(.selected):not(:hover) .monaco-table-tr {\n\t\t\t\t\tbackground-color: ${styles.tableOddRowsBackgroundColor};\n\t\t\t\t}\n\t\t\t`);\n        }\n        this.styleElement.textContent = content.join('\\n');\n    }\n}\nexport const unthemedListStyles = {\n    listFocusBackground: '#7FB0D0',\n    listActiveSelectionBackground: '#0E639C',\n    listActiveSelectionForeground: '#FFFFFF',\n    listActiveSelectionIconForeground: '#FFFFFF',\n    listFocusAndSelectionOutline: '#90C2F9',\n    listFocusAndSelectionBackground: '#094771',\n    listFocusAndSelectionForeground: '#FFFFFF',\n    listInactiveSelectionBackground: '#3F3F46',\n    listInactiveSelectionIconForeground: '#FFFFFF',\n    listHoverBackground: '#2A2D2E',\n    listDropOverBackground: '#383B3D',\n    listDropBetweenBackground: '#EEEEEE',\n    treeIndentGuidesStroke: '#a9a9a9',\n    treeInactiveIndentGuidesStroke: Color.fromHex('#a9a9a9').transparent(0.4).toString(),\n    tableColumnsBorder: Color.fromHex('#cccccc').transparent(0.2).toString(),\n    tableOddRowsBackgroundColor: Color.fromHex('#cccccc').transparent(0.04).toString(),\n    listBackground: undefined,\n    listFocusForeground: undefined,\n    listInactiveSelectionForeground: undefined,\n    listInactiveFocusForeground: undefined,\n    listInactiveFocusBackground: undefined,\n    listHoverForeground: undefined,\n    listFocusOutline: undefined,\n    listInactiveFocusOutline: undefined,\n    listSelectionOutline: undefined,\n    listHoverOutline: undefined,\n    treeStickyScrollBackground: undefined,\n    treeStickyScrollBorder: undefined,\n    treeStickyScrollShadow: undefined\n};\nconst DefaultOptions = {\n    keyboardSupport: true,\n    mouseSupport: true,\n    multipleSelectionSupport: true,\n    dnd: {\n        getDragURI() { return null; },\n        onDragStart() { },\n        onDragOver() { return false; },\n        drop() { },\n        dispose() { }\n    }\n};\n// TODO@Joao: move these utils into a SortedArray class\nfunction getContiguousRangeContaining(range, value) {\n    const index = range.indexOf(value);\n    if (index === -1) {\n        return [];\n    }\n    const result = [];\n    let i = index - 1;\n    while (i >= 0 && range[i] === value - (index - i)) {\n        result.push(range[i--]);\n    }\n    result.reverse();\n    i = index;\n    while (i < range.length && range[i] === value + (i - index)) {\n        result.push(range[i++]);\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the intersection\n * between them (OR).\n */\nfunction disjunction(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            result.push(one[i]);\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            result.push(other[j++]);\n        }\n    }\n    return result;\n}\n/**\n * Given two sorted collections of numbers, returns the relative\n * complement between them (XOR).\n */\nfunction relativeComplement(one, other) {\n    const result = [];\n    let i = 0, j = 0;\n    while (i < one.length || j < other.length) {\n        if (i >= one.length) {\n            result.push(other[j++]);\n        }\n        else if (j >= other.length) {\n            result.push(one[i++]);\n        }\n        else if (one[i] === other[j]) {\n            i++;\n            j++;\n            continue;\n        }\n        else if (one[i] < other[j]) {\n            result.push(one[i++]);\n        }\n        else {\n            j++;\n        }\n    }\n    return result;\n}\nconst numericSort = (a, b) => a - b;\nclass PipelineRenderer {\n    constructor(_templateId, renderers) {\n        this._templateId = _templateId;\n        this.renderers = renderers;\n    }\n    get templateId() {\n        return this._templateId;\n    }\n    renderTemplate(container) {\n        return this.renderers.map(r => r.renderTemplate(container));\n    }\n    renderElement(element, index, templateData, height) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.renderElement(element, index, templateData[i++], height);\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        var _a;\n        let i = 0;\n        for (const renderer of this.renderers) {\n            (_a = renderer.disposeElement) === null || _a === void 0 ? void 0 : _a.call(renderer, element, index, templateData[i], height);\n            i += 1;\n        }\n    }\n    disposeTemplate(templateData) {\n        let i = 0;\n        for (const renderer of this.renderers) {\n            renderer.disposeTemplate(templateData[i++]);\n        }\n    }\n}\nclass AccessibiltyRenderer {\n    constructor(accessibilityProvider) {\n        this.accessibilityProvider = accessibilityProvider;\n        this.templateId = 'a18n';\n    }\n    renderTemplate(container) {\n        return { container, disposables: new DisposableStore() };\n    }\n    renderElement(element, index, data) {\n        const ariaLabel = this.accessibilityProvider.getAriaLabel(element);\n        const observable = (ariaLabel && typeof ariaLabel !== 'string') ? ariaLabel : constObservable(ariaLabel);\n        data.disposables.add(autorun(reader => {\n            this.setAriaLabel(reader.readObservable(observable), data.container);\n        }));\n        const ariaLevel = this.accessibilityProvider.getAriaLevel && this.accessibilityProvider.getAriaLevel(element);\n        if (typeof ariaLevel === 'number') {\n            data.container.setAttribute('aria-level', `${ariaLevel}`);\n        }\n        else {\n            data.container.removeAttribute('aria-level');\n        }\n    }\n    setAriaLabel(ariaLabel, element) {\n        if (ariaLabel) {\n            element.setAttribute('aria-label', ariaLabel);\n        }\n        else {\n            element.removeAttribute('aria-label');\n        }\n    }\n    disposeElement(element, index, templateData, height) {\n        templateData.disposables.clear();\n    }\n    disposeTemplate(templateData) {\n        templateData.disposables.dispose();\n    }\n}\nclass ListViewDragAndDrop {\n    constructor(list, dnd) {\n        this.list = list;\n        this.dnd = dnd;\n    }\n    getDragElements(element) {\n        const selection = this.list.getSelectedElements();\n        const elements = selection.indexOf(element) > -1 ? selection : [element];\n        return elements;\n    }\n    getDragURI(element) {\n        return this.dnd.getDragURI(element);\n    }\n    getDragLabel(elements, originalEvent) {\n        if (this.dnd.getDragLabel) {\n            return this.dnd.getDragLabel(elements, originalEvent);\n        }\n        return undefined;\n    }\n    onDragStart(data, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragStart) === null || _b === void 0 ? void 0 : _b.call(_a, data, originalEvent);\n    }\n    onDragOver(data, targetElement, targetIndex, targetSector, originalEvent) {\n        return this.dnd.onDragOver(data, targetElement, targetIndex, targetSector, originalEvent);\n    }\n    onDragLeave(data, targetElement, targetIndex, originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragLeave) === null || _b === void 0 ? void 0 : _b.call(_a, data, targetElement, targetIndex, originalEvent);\n    }\n    onDragEnd(originalEvent) {\n        var _a, _b;\n        (_b = (_a = this.dnd).onDragEnd) === null || _b === void 0 ? void 0 : _b.call(_a, originalEvent);\n    }\n    drop(data, targetElement, targetIndex, targetSector, originalEvent) {\n        this.dnd.drop(data, targetElement, targetIndex, targetSector, originalEvent);\n    }\n    dispose() {\n        this.dnd.dispose();\n    }\n}\n/**\n * The {@link List} is a virtual scrolling widget, built on top of the {@link ListView}\n * widget.\n *\n * Features:\n * - Customizable keyboard and mouse support\n * - Element traits: focus, selection, achor\n * - Accessibility support\n * - Touch support\n * - Performant template-based rendering\n * - Horizontal scrolling\n * - Variable element height support\n * - Dynamic element height support\n * - Drag-and-drop support\n */\nexport class List {\n    get onDidChangeFocus() {\n        return Event.map(this.eventBufferer.wrapEvent(this.focus.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get onDidChangeSelection() {\n        return Event.map(this.eventBufferer.wrapEvent(this.selection.onChange), e => this.toListEvent(e), this.disposables);\n    }\n    get domId() { return this.view.domId; }\n    get onDidScroll() { return this.view.onDidScroll; }\n    get onMouseClick() { return this.view.onMouseClick; }\n    get onMouseDblClick() { return this.view.onMouseDblClick; }\n    get onMouseMiddleClick() { return this.view.onMouseMiddleClick; }\n    get onPointer() { return this.mouseController.onPointer; }\n    get onMouseDown() { return this.view.onMouseDown; }\n    get onMouseOver() { return this.view.onMouseOver; }\n    get onMouseOut() { return this.view.onMouseOut; }\n    get onTouchStart() { return this.view.onTouchStart; }\n    get onTap() { return this.view.onTap; }\n    /**\n     * Possible context menu trigger events:\n     * - ContextMenu key\n     * - Shift F10\n     * - Ctrl Option Shift M (macOS with VoiceOver)\n     * - Mouse right click\n     */\n    get onContextMenu() {\n        let didJustPressContextMenuKey = false;\n        const fromKeyDown = Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event, $ => $.map(e => new StandardKeyboardEvent(e))\n            .filter(e => didJustPressContextMenuKey = e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(e => EventHelper.stop(e, true))\n            .filter(() => false));\n        const fromKeyUp = Event.chain(this.disposables.add(new DomEmitter(this.view.domNode, 'keyup')).event, $ => $.forEach(() => didJustPressContextMenuKey = false)\n            .map(e => new StandardKeyboardEvent(e))\n            .filter(e => e.keyCode === 58 /* KeyCode.ContextMenu */ || (e.shiftKey && e.keyCode === 68 /* KeyCode.F10 */))\n            .map(e => EventHelper.stop(e, true))\n            .map(({ browserEvent }) => {\n            const focus = this.getFocus();\n            const index = focus.length ? focus[0] : undefined;\n            const element = typeof index !== 'undefined' ? this.view.element(index) : undefined;\n            const anchor = typeof index !== 'undefined' ? this.view.domElement(index) : this.view.domNode;\n            return { index, element, anchor, browserEvent };\n        }));\n        const fromMouse = Event.chain(this.view.onContextMenu, $ => $.filter(_ => !didJustPressContextMenuKey)\n            .map(({ element, index, browserEvent }) => ({ element, index, anchor: new StandardMouseEvent(getWindow(this.view.domNode), browserEvent), browserEvent })));\n        return Event.any(fromKeyDown, fromKeyUp, fromMouse);\n    }\n    get onKeyDown() { return this.disposables.add(new DomEmitter(this.view.domNode, 'keydown')).event; }\n    get onDidFocus() { return Event.signal(this.disposables.add(new DomEmitter(this.view.domNode, 'focus', true)).event); }\n    get onDidBlur() { return Event.signal(this.disposables.add(new DomEmitter(this.view.domNode, 'blur', true)).event); }\n    constructor(user, container, virtualDelegate, renderers, _options = DefaultOptions) {\n        var _a, _b, _c, _d;\n        this.user = user;\n        this._options = _options;\n        this.focus = new Trait('focused');\n        this.anchor = new Trait('anchor');\n        this.eventBufferer = new EventBufferer();\n        this._ariaLabel = '';\n        this.disposables = new DisposableStore();\n        this._onDidDispose = new Emitter();\n        this.onDidDispose = this._onDidDispose.event;\n        const role = this._options.accessibilityProvider && this._options.accessibilityProvider.getWidgetRole ? (_a = this._options.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getWidgetRole() : 'list';\n        this.selection = new SelectionTrait(role !== 'listbox');\n        const baseRenderers = [this.focus.renderer, this.selection.renderer];\n        this.accessibilityProvider = _options.accessibilityProvider;\n        if (this.accessibilityProvider) {\n            baseRenderers.push(new AccessibiltyRenderer(this.accessibilityProvider));\n            (_c = (_b = this.accessibilityProvider).onDidChangeActiveDescendant) === null || _c === void 0 ? void 0 : _c.call(_b, this.onDidChangeActiveDescendant, this, this.disposables);\n        }\n        renderers = renderers.map(r => new PipelineRenderer(r.templateId, [...baseRenderers, r]));\n        const viewOptions = {\n            ..._options,\n            dnd: _options.dnd && new ListViewDragAndDrop(this, _options.dnd)\n        };\n        this.view = this.createListView(container, virtualDelegate, renderers, viewOptions);\n        this.view.domNode.setAttribute('role', role);\n        if (_options.styleController) {\n            this.styleController = _options.styleController(this.view.domId);\n        }\n        else {\n            const styleElement = createStyleSheet(this.view.domNode);\n            this.styleController = new DefaultStyleController(styleElement, this.view.domId);\n        }\n        this.spliceable = new CombinedSpliceable([\n            new TraitSpliceable(this.focus, this.view, _options.identityProvider),\n            new TraitSpliceable(this.selection, this.view, _options.identityProvider),\n            new TraitSpliceable(this.anchor, this.view, _options.identityProvider),\n            this.view\n        ]);\n        this.disposables.add(this.focus);\n        this.disposables.add(this.selection);\n        this.disposables.add(this.anchor);\n        this.disposables.add(this.view);\n        this.disposables.add(this._onDidDispose);\n        this.disposables.add(new DOMFocusController(this, this.view));\n        if (typeof _options.keyboardSupport !== 'boolean' || _options.keyboardSupport) {\n            this.keyboardController = new KeyboardController(this, this.view, _options);\n            this.disposables.add(this.keyboardController);\n        }\n        if (_options.keyboardNavigationLabelProvider) {\n            const delegate = _options.keyboardNavigationDelegate || DefaultKeyboardNavigationDelegate;\n            this.typeNavigationController = new TypeNavigationController(this, this.view, _options.keyboardNavigationLabelProvider, (_d = _options.keyboardNavigationEventFilter) !== null && _d !== void 0 ? _d : (() => true), delegate);\n            this.disposables.add(this.typeNavigationController);\n        }\n        this.mouseController = this.createMouseController(_options);\n        this.disposables.add(this.mouseController);\n        this.onDidChangeFocus(this._onFocusChange, this, this.disposables);\n        this.onDidChangeSelection(this._onSelectionChange, this, this.disposables);\n        if (this.accessibilityProvider) {\n            this.ariaLabel = this.accessibilityProvider.getWidgetAriaLabel();\n        }\n        if (this._options.multipleSelectionSupport !== false) {\n            this.view.domNode.setAttribute('aria-multiselectable', 'true');\n        }\n    }\n    createListView(container, virtualDelegate, renderers, viewOptions) {\n        return new ListView(container, virtualDelegate, renderers, viewOptions);\n    }\n    createMouseController(options) {\n        return new MouseController(this);\n    }\n    updateOptions(optionsUpdate = {}) {\n        var _a, _b;\n        this._options = { ...this._options, ...optionsUpdate };\n        (_a = this.typeNavigationController) === null || _a === void 0 ? void 0 : _a.updateOptions(this._options);\n        if (this._options.multipleSelectionController !== undefined) {\n            if (this._options.multipleSelectionSupport) {\n                this.view.domNode.setAttribute('aria-multiselectable', 'true');\n            }\n            else {\n                this.view.domNode.removeAttribute('aria-multiselectable');\n            }\n        }\n        this.mouseController.updateOptions(optionsUpdate);\n        (_b = this.keyboardController) === null || _b === void 0 ? void 0 : _b.updateOptions(optionsUpdate);\n        this.view.updateOptions(optionsUpdate);\n    }\n    get options() {\n        return this._options;\n    }\n    splice(start, deleteCount, elements = []) {\n        if (start < 0 || start > this.view.length) {\n            throw new ListError(this.user, `Invalid start index: ${start}`);\n        }\n        if (deleteCount < 0) {\n            throw new ListError(this.user, `Invalid delete count: ${deleteCount}`);\n        }\n        if (deleteCount === 0 && elements.length === 0) {\n            return;\n        }\n        this.eventBufferer.bufferEvents(() => this.spliceable.splice(start, deleteCount, elements));\n    }\n    rerender() {\n        this.view.rerender();\n    }\n    element(index) {\n        return this.view.element(index);\n    }\n    indexOf(element) {\n        return this.view.indexOf(element);\n    }\n    indexAt(position) {\n        return this.view.indexAt(position);\n    }\n    get length() {\n        return this.view.length;\n    }\n    get contentHeight() {\n        return this.view.contentHeight;\n    }\n    get onDidChangeContentHeight() {\n        return this.view.onDidChangeContentHeight;\n    }\n    get scrollTop() {\n        return this.view.getScrollTop();\n    }\n    set scrollTop(scrollTop) {\n        this.view.setScrollTop(scrollTop);\n    }\n    get scrollHeight() {\n        return this.view.scrollHeight;\n    }\n    get renderHeight() {\n        return this.view.renderHeight;\n    }\n    get firstVisibleIndex() {\n        return this.view.firstVisibleIndex;\n    }\n    get ariaLabel() {\n        return this._ariaLabel;\n    }\n    set ariaLabel(value) {\n        this._ariaLabel = value;\n        this.view.domNode.setAttribute('aria-label', value);\n    }\n    domFocus() {\n        this.view.domNode.focus({ preventScroll: true });\n    }\n    layout(height, width) {\n        this.view.layout(height, width);\n    }\n    setSelection(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.selection.set(indexes, browserEvent);\n    }\n    getSelection() {\n        return this.selection.get();\n    }\n    getSelectedElements() {\n        return this.getSelection().map(i => this.view.element(i));\n    }\n    setAnchor(index) {\n        if (typeof index === 'undefined') {\n            this.anchor.set([]);\n            return;\n        }\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        this.anchor.set([index]);\n    }\n    getAnchor() {\n        return firstOrDefault(this.anchor.get(), undefined);\n    }\n    getAnchorElement() {\n        const anchor = this.getAnchor();\n        return typeof anchor === 'undefined' ? undefined : this.element(anchor);\n    }\n    setFocus(indexes, browserEvent) {\n        for (const index of indexes) {\n            if (index < 0 || index >= this.length) {\n                throw new ListError(this.user, `Invalid index ${index}`);\n            }\n        }\n        this.focus.set(indexes, browserEvent);\n    }\n    focusNext(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findNextIndex(focus.length > 0 ? focus[0] + n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusPrevious(n = 1, loop = false, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const focus = this.focus.get();\n        const index = this.findPreviousIndex(focus.length > 0 ? focus[0] - n : 0, loop, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    async focusNextPage(browserEvent, filter) {\n        let lastPageIndex = this.view.indexAt(this.view.getScrollTop() + this.view.renderHeight);\n        lastPageIndex = lastPageIndex === 0 ? 0 : lastPageIndex - 1;\n        const currentlyFocusedElementIndex = this.getFocus()[0];\n        if (currentlyFocusedElementIndex !== lastPageIndex && (currentlyFocusedElementIndex === undefined || lastPageIndex > currentlyFocusedElementIndex)) {\n            const lastGoodPageIndex = this.findPreviousIndex(lastPageIndex, false, filter);\n            if (lastGoodPageIndex > -1 && currentlyFocusedElementIndex !== lastGoodPageIndex) {\n                this.setFocus([lastGoodPageIndex], browserEvent);\n            }\n            else {\n                this.setFocus([lastPageIndex], browserEvent);\n            }\n        }\n        else {\n            const previousScrollTop = this.view.getScrollTop();\n            let nextpageScrollTop = previousScrollTop + this.view.renderHeight;\n            if (lastPageIndex > currentlyFocusedElementIndex) {\n                // scroll last page element to the top only if the last page element is below the focused element\n                nextpageScrollTop -= this.view.elementHeight(lastPageIndex);\n            }\n            this.view.setScrollTop(nextpageScrollTop);\n            if (this.view.getScrollTop() !== previousScrollTop) {\n                this.setFocus([]);\n                // Let the scroll event listener run\n                await timeout(0);\n                await this.focusNextPage(browserEvent, filter);\n            }\n        }\n    }\n    async focusPreviousPage(browserEvent, filter, getPaddingTop = () => 0) {\n        let firstPageIndex;\n        const paddingTop = getPaddingTop();\n        const scrollTop = this.view.getScrollTop() + paddingTop;\n        if (scrollTop === 0) {\n            firstPageIndex = this.view.indexAt(scrollTop);\n        }\n        else {\n            firstPageIndex = this.view.indexAfter(scrollTop - 1);\n        }\n        const currentlyFocusedElementIndex = this.getFocus()[0];\n        if (currentlyFocusedElementIndex !== firstPageIndex && (currentlyFocusedElementIndex === undefined || currentlyFocusedElementIndex >= firstPageIndex)) {\n            const firstGoodPageIndex = this.findNextIndex(firstPageIndex, false, filter);\n            if (firstGoodPageIndex > -1 && currentlyFocusedElementIndex !== firstGoodPageIndex) {\n                this.setFocus([firstGoodPageIndex], browserEvent);\n            }\n            else {\n                this.setFocus([firstPageIndex], browserEvent);\n            }\n        }\n        else {\n            const previousScrollTop = scrollTop;\n            this.view.setScrollTop(scrollTop - this.view.renderHeight - paddingTop);\n            if (this.view.getScrollTop() + getPaddingTop() !== previousScrollTop) {\n                this.setFocus([]);\n                // Let the scroll event listener run\n                await timeout(0);\n                await this.focusPreviousPage(browserEvent, filter, getPaddingTop);\n            }\n        }\n    }\n    focusLast(browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findPreviousIndex(this.length - 1, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    focusFirst(browserEvent, filter) {\n        this.focusNth(0, browserEvent, filter);\n    }\n    focusNth(n, browserEvent, filter) {\n        if (this.length === 0) {\n            return;\n        }\n        const index = this.findNextIndex(n, false, filter);\n        if (index > -1) {\n            this.setFocus([index], browserEvent);\n        }\n    }\n    findNextIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index >= this.length && !loop) {\n                return -1;\n            }\n            index = index % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index++;\n        }\n        return -1;\n    }\n    findPreviousIndex(index, loop = false, filter) {\n        for (let i = 0; i < this.length; i++) {\n            if (index < 0 && !loop) {\n                return -1;\n            }\n            index = (this.length + (index % this.length)) % this.length;\n            if (!filter || filter(this.element(index))) {\n                return index;\n            }\n            index--;\n        }\n        return -1;\n    }\n    getFocus() {\n        return this.focus.get();\n    }\n    getFocusedElements() {\n        return this.getFocus().map(i => this.view.element(i));\n    }\n    reveal(index, relativeTop, paddingTop = 0) {\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        const scrollTop = this.view.getScrollTop();\n        const elementTop = this.view.elementTop(index);\n        const elementHeight = this.view.elementHeight(index);\n        if (isNumber(relativeTop)) {\n            // y = mx + b\n            const m = elementHeight - this.view.renderHeight + paddingTop;\n            this.view.setScrollTop(m * clamp(relativeTop, 0, 1) + elementTop - paddingTop);\n        }\n        else {\n            const viewItemBottom = elementTop + elementHeight;\n            const scrollBottom = scrollTop + this.view.renderHeight;\n            if (elementTop < scrollTop + paddingTop && viewItemBottom >= scrollBottom) {\n                // The element is already overflowing the viewport, no-op\n            }\n            else if (elementTop < scrollTop + paddingTop || (viewItemBottom >= scrollBottom && elementHeight >= this.view.renderHeight)) {\n                this.view.setScrollTop(elementTop - paddingTop);\n            }\n            else if (viewItemBottom >= scrollBottom) {\n                this.view.setScrollTop(viewItemBottom - this.view.renderHeight);\n            }\n        }\n    }\n    /**\n     * Returns the relative position of an element rendered in the list.\n     * Returns `null` if the element isn't *entirely* in the visible viewport.\n     */\n    getRelativeTop(index, paddingTop = 0) {\n        if (index < 0 || index >= this.length) {\n            throw new ListError(this.user, `Invalid index ${index}`);\n        }\n        const scrollTop = this.view.getScrollTop();\n        const elementTop = this.view.elementTop(index);\n        const elementHeight = this.view.elementHeight(index);\n        if (elementTop < scrollTop + paddingTop || elementTop + elementHeight > scrollTop + this.view.renderHeight) {\n            return null;\n        }\n        // y = mx + b\n        const m = elementHeight - this.view.renderHeight + paddingTop;\n        return Math.abs((scrollTop + paddingTop - elementTop) / m);\n    }\n    getHTMLElement() {\n        return this.view.domNode;\n    }\n    getScrollableElement() {\n        return this.view.scrollableElementDomNode;\n    }\n    getElementID(index) {\n        return this.view.getElementDomId(index);\n    }\n    getElementTop(index) {\n        return this.view.elementTop(index);\n    }\n    style(styles) {\n        this.styleController.style(styles);\n    }\n    toListEvent({ indexes, browserEvent }) {\n        return { indexes, elements: indexes.map(i => this.view.element(i)), browserEvent };\n    }\n    _onFocusChange() {\n        const focus = this.focus.get();\n        this.view.domNode.classList.toggle('element-focused', focus.length > 0);\n        this.onDidChangeActiveDescendant();\n    }\n    onDidChangeActiveDescendant() {\n        var _a;\n        const focus = this.focus.get();\n        if (focus.length > 0) {\n            let id;\n            if ((_a = this.accessibilityProvider) === null || _a === void 0 ? void 0 : _a.getActiveDescendantId) {\n                id = this.accessibilityProvider.getActiveDescendantId(this.view.element(focus[0]));\n            }\n            this.view.domNode.setAttribute('aria-activedescendant', id || this.view.getElementDomId(focus[0]));\n        }\n        else {\n            this.view.domNode.removeAttribute('aria-activedescendant');\n        }\n    }\n    _onSelectionChange() {\n        const selection = this.selection.get();\n        this.view.domNode.classList.toggle('selection-none', selection.length === 0);\n        this.view.domNode.classList.toggle('selection-single', selection.length === 1);\n        this.view.domNode.classList.toggle('selection-multiple', selection.length > 1);\n    }\n    dispose() {\n        this._onDidDispose.fire();\n        this.disposables.dispose();\n        this._onDidDispose.dispose();\n    }\n}\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeFocus\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidChangeSelection\", null);\n__decorate([\n    memoize\n], List.prototype, \"onContextMenu\", null);\n__decorate([\n    memoize\n], List.prototype, \"onKeyDown\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidFocus\", null);\n__decorate([\n    memoize\n], List.prototype, \"onDidBlur\", null);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { isFirefox } from '../../browser.js';\nimport { EventType as TouchEventType, Gesture } from '../../touch.js';\nimport { $, addDisposableListener, append, clearNode, createStyleSheet, Dimension, EventHelper, EventType, getActiveElement, getWindow, isAncestor, isInShadowDOM } from '../../dom.js';\nimport { StandardKeyboardEvent } from '../../keyboardEvent.js';\nimport { StandardMouseEvent } from '../../mouseEvent.js';\nimport { ActionBar } from '../actionbar/actionbar.js';\nimport { ActionViewItem, BaseActionViewItem } from '../actionbar/actionViewItems.js';\nimport { layout } from '../contextview/contextview.js';\nimport { DomScrollableElement } from '../scrollbar/scrollableElement.js';\nimport { EmptySubmenuAction, Separator, SubmenuAction } from '../../../common/actions.js';\nimport { RunOnceScheduler } from '../../../common/async.js';\nimport { Codicon } from '../../../common/codicons.js';\nimport { getCodiconFontCharacters } from '../../../common/codiconsUtil.js';\nimport { ThemeIcon } from '../../../common/themables.js';\nimport { stripIcons } from '../../../common/iconLabels.js';\nimport { DisposableStore } from '../../../common/lifecycle.js';\nimport { isLinux, isMacintosh } from '../../../common/platform.js';\nimport * as strings from '../../../common/strings.js';\nexport const MENU_MNEMONIC_REGEX = /\\(&([^\\s&])\\)|(^|[^&])&([^\\s&])/;\nexport const MENU_ESCAPED_MNEMONIC_REGEX = /(&amp;)?(&amp;)([^\\s&])/g;\nexport var HorizontalDirection;\n(function (HorizontalDirection) {\n    HorizontalDirection[HorizontalDirection[\"Right\"] = 0] = \"Right\";\n    HorizontalDirection[HorizontalDirection[\"Left\"] = 1] = \"Left\";\n})(HorizontalDirection || (HorizontalDirection = {}));\nexport var VerticalDirection;\n(function (VerticalDirection) {\n    VerticalDirection[VerticalDirection[\"Above\"] = 0] = \"Above\";\n    VerticalDirection[VerticalDirection[\"Below\"] = 1] = \"Below\";\n})(VerticalDirection || (VerticalDirection = {}));\nexport class Menu extends ActionBar {\n    constructor(container, actions, options, menuStyles) {\n        container.classList.add('monaco-menu-container');\n        container.setAttribute('role', 'presentation');\n        const menuElement = document.createElement('div');\n        menuElement.classList.add('monaco-menu');\n        menuElement.setAttribute('role', 'presentation');\n        super(menuElement, {\n            orientation: 1 /* ActionsOrientation.VERTICAL */,\n            actionViewItemProvider: action => this.doGetActionViewItem(action, options, parentData),\n            context: options.context,\n            actionRunner: options.actionRunner,\n            ariaLabel: options.ariaLabel,\n            ariaRole: 'menu',\n            focusOnlyEnabledItems: true,\n            triggerKeys: { keys: [3 /* KeyCode.Enter */, ...(isMacintosh || isLinux ? [10 /* KeyCode.Space */] : [])], keyDown: true }\n        });\n        this.menuStyles = menuStyles;\n        this.menuElement = menuElement;\n        this.actionsList.tabIndex = 0;\n        this.initializeOrUpdateStyleSheet(container, menuStyles);\n        this._register(Gesture.addTarget(menuElement));\n        this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n            const event = new StandardKeyboardEvent(e);\n            // Stop tab navigation of menus\n            if (event.equals(2 /* KeyCode.Tab */)) {\n                e.preventDefault();\n            }\n        }));\n        if (options.enableMnemonics) {\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, (e) => {\n                const key = e.key.toLocaleLowerCase();\n                if (this.mnemonics.has(key)) {\n                    EventHelper.stop(e, true);\n                    const actions = this.mnemonics.get(key);\n                    if (actions.length === 1) {\n                        if (actions[0] instanceof SubmenuMenuActionViewItem && actions[0].container) {\n                            this.focusItemByElement(actions[0].container);\n                        }\n                        actions[0].onClick(e);\n                    }\n                    if (actions.length > 1) {\n                        const action = actions.shift();\n                        if (action && action.container) {\n                            this.focusItemByElement(action.container);\n                            actions.push(action);\n                        }\n                        this.mnemonics.set(key, actions);\n                    }\n                }\n            }));\n        }\n        if (isLinux) {\n            this._register(addDisposableListener(menuElement, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(14 /* KeyCode.Home */) || event.equals(11 /* KeyCode.PageUp */)) {\n                    this.focusedItem = this.viewItems.length - 1;\n                    this.focusNext();\n                    EventHelper.stop(e, true);\n                }\n                else if (event.equals(13 /* KeyCode.End */) || event.equals(12 /* KeyCode.PageDown */)) {\n                    this.focusedItem = 0;\n                    this.focusPrevious();\n                    EventHelper.stop(e, true);\n                }\n            }));\n        }\n        this._register(addDisposableListener(this.domNode, EventType.MOUSE_OUT, e => {\n            const relatedTarget = e.relatedTarget;\n            if (!isAncestor(relatedTarget, this.domNode)) {\n                this.focusedItem = undefined;\n                this.updateFocus();\n                e.stopPropagation();\n            }\n        }));\n        this._register(addDisposableListener(this.actionsList, EventType.MOUSE_OVER, e => {\n            let target = e.target;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        // Support touch on actions list to focus items (needed for submenus)\n        this._register(Gesture.addTarget(this.actionsList));\n        this._register(addDisposableListener(this.actionsList, TouchEventType.Tap, e => {\n            let target = e.initialTarget;\n            if (!target || !isAncestor(target, this.actionsList) || target === this.actionsList) {\n                return;\n            }\n            while (target.parentElement !== this.actionsList && target.parentElement !== null) {\n                target = target.parentElement;\n            }\n            if (target.classList.contains('action-item')) {\n                const lastFocusedItem = this.focusedItem;\n                this.setFocusedItem(target);\n                if (lastFocusedItem !== this.focusedItem) {\n                    this.updateFocus();\n                }\n            }\n        }));\n        const parentData = {\n            parent: this\n        };\n        this.mnemonics = new Map();\n        // Scroll Logic\n        this.scrollableElement = this._register(new DomScrollableElement(menuElement, {\n            alwaysConsumeMouseWheel: true,\n            horizontal: 2 /* ScrollbarVisibility.Hidden */,\n            vertical: 3 /* ScrollbarVisibility.Visible */,\n            verticalScrollbarSize: 7,\n            handleMouseWheel: true,\n            useShadows: true\n        }));\n        const scrollElement = this.scrollableElement.getDomNode();\n        scrollElement.style.position = '';\n        this.styleScrollElement(scrollElement, menuStyles);\n        // Support scroll on menu drag\n        this._register(addDisposableListener(menuElement, TouchEventType.Change, e => {\n            EventHelper.stop(e, true);\n            const scrollTop = this.scrollableElement.getScrollPosition().scrollTop;\n            this.scrollableElement.setScrollPosition({ scrollTop: scrollTop - e.translationY });\n        }));\n        this._register(addDisposableListener(scrollElement, EventType.MOUSE_UP, e => {\n            // Absorb clicks in menu dead space https://github.com/microsoft/vscode/issues/63575\n            // We do this on the scroll element so the scroll bar doesn't dismiss the menu either\n            e.preventDefault();\n        }));\n        const window = getWindow(container);\n        menuElement.style.maxHeight = `${Math.max(10, window.innerHeight - container.getBoundingClientRect().top - 35)}px`;\n        actions = actions.filter((a, idx) => {\n            var _a;\n            if ((_a = options.submenuIds) === null || _a === void 0 ? void 0 : _a.has(a.id)) {\n                console.warn(`Found submenu cycle: ${a.id}`);\n                return false;\n            }\n            // Filter out consecutive or useless separators\n            if (a instanceof Separator) {\n                if (idx === actions.length - 1 || idx === 0) {\n                    return false;\n                }\n                const prevAction = actions[idx - 1];\n                if (prevAction instanceof Separator) {\n                    return false;\n                }\n            }\n            return true;\n        });\n        this.push(actions, { icon: true, label: true, isMenu: true });\n        container.appendChild(this.scrollableElement.getDomNode());\n        this.scrollableElement.scanDomNode();\n        this.viewItems.filter(item => !(item instanceof MenuSeparatorActionViewItem)).forEach((item, index, array) => {\n            item.updatePositionInSet(index + 1, array.length);\n        });\n    }\n    initializeOrUpdateStyleSheet(container, style) {\n        if (!this.styleSheet) {\n            if (isInShadowDOM(container)) {\n                this.styleSheet = createStyleSheet(container);\n            }\n            else {\n                if (!Menu.globalStyleSheet) {\n                    Menu.globalStyleSheet = createStyleSheet();\n                }\n                this.styleSheet = Menu.globalStyleSheet;\n            }\n        }\n        this.styleSheet.textContent = getMenuWidgetCSS(style, isInShadowDOM(container));\n    }\n    styleScrollElement(scrollElement, style) {\n        var _a, _b;\n        const fgColor = (_a = style.foregroundColor) !== null && _a !== void 0 ? _a : '';\n        const bgColor = (_b = style.backgroundColor) !== null && _b !== void 0 ? _b : '';\n        const border = style.borderColor ? `1px solid ${style.borderColor}` : '';\n        const borderRadius = '5px';\n        const shadow = style.shadowColor ? `0 2px 8px ${style.shadowColor}` : '';\n        scrollElement.style.outline = border;\n        scrollElement.style.borderRadius = borderRadius;\n        scrollElement.style.color = fgColor;\n        scrollElement.style.backgroundColor = bgColor;\n        scrollElement.style.boxShadow = shadow;\n    }\n    getContainer() {\n        return this.scrollableElement.getDomNode();\n    }\n    get onScroll() {\n        return this.scrollableElement.onScroll;\n    }\n    focusItemByElement(element) {\n        const lastFocusedItem = this.focusedItem;\n        this.setFocusedItem(element);\n        if (lastFocusedItem !== this.focusedItem) {\n            this.updateFocus();\n        }\n    }\n    setFocusedItem(element) {\n        for (let i = 0; i < this.actionsList.children.length; i++) {\n            const elem = this.actionsList.children[i];\n            if (element === elem) {\n                this.focusedItem = i;\n                break;\n            }\n        }\n    }\n    updateFocus(fromRight) {\n        super.updateFocus(fromRight, true, true);\n        if (typeof this.focusedItem !== 'undefined') {\n            // Workaround for #80047 caused by an issue in chromium\n            // https://bugs.chromium.org/p/chromium/issues/detail?id=414283\n            // When that's fixed, just call this.scrollableElement.scanDomNode()\n            this.scrollableElement.setScrollPosition({\n                scrollTop: Math.round(this.menuElement.scrollTop)\n            });\n        }\n    }\n    doGetActionViewItem(action, options, parentData) {\n        if (action instanceof Separator) {\n            return new MenuSeparatorActionViewItem(options.context, action, { icon: true }, this.menuStyles);\n        }\n        else if (action instanceof SubmenuAction) {\n            const menuActionViewItem = new SubmenuMenuActionViewItem(action, action.actions, parentData, { ...options, submenuIds: new Set([...(options.submenuIds || []), action.id]) }, this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n        else {\n            const menuItemOptions = { enableMnemonics: options.enableMnemonics, useEventAsContext: options.useEventAsContext };\n            if (options.getKeyBinding) {\n                const keybinding = options.getKeyBinding(action);\n                if (keybinding) {\n                    const keybindingLabel = keybinding.getLabel();\n                    if (keybindingLabel) {\n                        menuItemOptions.keybinding = keybindingLabel;\n                    }\n                }\n            }\n            const menuActionViewItem = new BaseMenuActionViewItem(options.context, action, menuItemOptions, this.menuStyles);\n            if (options.enableMnemonics) {\n                const mnemonic = menuActionViewItem.getMnemonic();\n                if (mnemonic && menuActionViewItem.isEnabled()) {\n                    let actionViewItems = [];\n                    if (this.mnemonics.has(mnemonic)) {\n                        actionViewItems = this.mnemonics.get(mnemonic);\n                    }\n                    actionViewItems.push(menuActionViewItem);\n                    this.mnemonics.set(mnemonic, actionViewItems);\n                }\n            }\n            return menuActionViewItem;\n        }\n    }\n}\nclass BaseMenuActionViewItem extends BaseActionViewItem {\n    constructor(ctx, action, options, menuStyle) {\n        options.isMenu = true;\n        super(action, action, options);\n        this.menuStyle = menuStyle;\n        this.options = options;\n        this.options.icon = options.icon !== undefined ? options.icon : false;\n        this.options.label = options.label !== undefined ? options.label : true;\n        this.cssClass = '';\n        // Set mnemonic\n        if (this.options.label && options.enableMnemonics) {\n            const label = this.action.label;\n            if (label) {\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    this.mnemonic = (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase();\n                }\n            }\n        }\n        // Add mouse up listener later to avoid accidental clicks\n        this.runOnceToEnableMouseUp = new RunOnceScheduler(() => {\n            if (!this.element) {\n                return;\n            }\n            this._register(addDisposableListener(this.element, EventType.MOUSE_UP, e => {\n                // removed default prevention as it conflicts\n                // with BaseActionViewItem #101537\n                // add back if issues arise and link new issue\n                EventHelper.stop(e, true);\n                // See https://developer.mozilla.org/en-US/Add-ons/WebExtensions/Interact_with_the_clipboard\n                // > Writing to the clipboard\n                // > You can use the \"cut\" and \"copy\" commands without any special\n                // permission if you are using them in a short-lived event handler\n                // for a user action (for example, a click handler).\n                // => to get the Copy and Paste context menu actions working on Firefox,\n                // there should be no timeout here\n                if (isFirefox) {\n                    const mouseEvent = new StandardMouseEvent(getWindow(this.element), e);\n                    // Allowing right click to trigger the event causes the issue described below,\n                    // but since the solution below does not work in FF, we must disable right click\n                    if (mouseEvent.rightButton) {\n                        return;\n                    }\n                    this.onClick(e);\n                }\n                // In all other cases, set timeout to allow context menu cancellation to trigger\n                // otherwise the action will destroy the menu and a second context menu\n                // will still trigger for right click.\n                else {\n                    setTimeout(() => {\n                        this.onClick(e);\n                    }, 0);\n                }\n            }));\n            this._register(addDisposableListener(this.element, EventType.CONTEXT_MENU, e => {\n                EventHelper.stop(e, true);\n            }));\n        }, 100);\n        this._register(this.runOnceToEnableMouseUp);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        this.container = container;\n        this.item = append(this.element, $('a.action-menu-item'));\n        if (this._action.id === Separator.ID) {\n            // A separator is a presentation item\n            this.item.setAttribute('role', 'presentation');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            if (this.mnemonic) {\n                this.item.setAttribute('aria-keyshortcuts', `${this.mnemonic}`);\n            }\n        }\n        this.check = append(this.item, $('span.menu-item-check' + ThemeIcon.asCSSSelector(Codicon.menuSelection)));\n        this.check.setAttribute('role', 'none');\n        this.label = append(this.item, $('span.action-label'));\n        if (this.options.label && this.options.keybinding) {\n            append(this.item, $('span.keybinding')).textContent = this.options.keybinding;\n        }\n        // Adds mouse up listener to actually run the action\n        this.runOnceToEnableMouseUp.schedule();\n        this.updateClass();\n        this.updateLabel();\n        this.updateTooltip();\n        this.updateEnabled();\n        this.updateChecked();\n        this.applyStyle();\n    }\n    blur() {\n        super.blur();\n        this.applyStyle();\n    }\n    focus() {\n        var _a;\n        super.focus();\n        (_a = this.item) === null || _a === void 0 ? void 0 : _a.focus();\n        this.applyStyle();\n    }\n    updatePositionInSet(pos, setSize) {\n        if (this.item) {\n            this.item.setAttribute('aria-posinset', `${pos}`);\n            this.item.setAttribute('aria-setsize', `${setSize}`);\n        }\n    }\n    updateLabel() {\n        var _a;\n        if (!this.label) {\n            return;\n        }\n        if (this.options.label) {\n            clearNode(this.label);\n            let label = stripIcons(this.action.label);\n            if (label) {\n                const cleanLabel = cleanMnemonic(label);\n                if (!this.options.enableMnemonics) {\n                    label = cleanLabel;\n                }\n                this.label.setAttribute('aria-label', cleanLabel.replace(/&&/g, '&'));\n                const matches = MENU_MNEMONIC_REGEX.exec(label);\n                if (matches) {\n                    label = strings.escape(label);\n                    // This is global, reset it\n                    MENU_ESCAPED_MNEMONIC_REGEX.lastIndex = 0;\n                    let escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    // We can't use negative lookbehind so if we match our negative and skip\n                    while (escMatch && escMatch[1]) {\n                        escMatch = MENU_ESCAPED_MNEMONIC_REGEX.exec(label);\n                    }\n                    const replaceDoubleEscapes = (str) => str.replace(/&amp;&amp;/g, '&amp;');\n                    if (escMatch) {\n                        this.label.append(strings.ltrim(replaceDoubleEscapes(label.substr(0, escMatch.index)), ' '), $('u', { 'aria-hidden': 'true' }, escMatch[3]), strings.rtrim(replaceDoubleEscapes(label.substr(escMatch.index + escMatch[0].length)), ' '));\n                    }\n                    else {\n                        this.label.innerText = replaceDoubleEscapes(label).trim();\n                    }\n                    (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-keyshortcuts', (!!matches[1] ? matches[1] : matches[3]).toLocaleLowerCase());\n                }\n                else {\n                    this.label.innerText = label.replace(/&&/g, '&').trim();\n                }\n            }\n        }\n    }\n    updateTooltip() {\n        // menus should function like native menus and they do not have tooltips\n    }\n    updateClass() {\n        if (this.cssClass && this.item) {\n            this.item.classList.remove(...this.cssClass.split(' '));\n        }\n        if (this.options.icon && this.label) {\n            this.cssClass = this.action.class || '';\n            this.label.classList.add('icon');\n            if (this.cssClass) {\n                this.label.classList.add(...this.cssClass.split(' '));\n            }\n            this.updateEnabled();\n        }\n        else if (this.label) {\n            this.label.classList.remove('icon');\n        }\n    }\n    updateEnabled() {\n        if (this.action.enabled) {\n            if (this.element) {\n                this.element.classList.remove('disabled');\n                this.element.removeAttribute('aria-disabled');\n            }\n            if (this.item) {\n                this.item.classList.remove('disabled');\n                this.item.removeAttribute('aria-disabled');\n                this.item.tabIndex = 0;\n            }\n        }\n        else {\n            if (this.element) {\n                this.element.classList.add('disabled');\n                this.element.setAttribute('aria-disabled', 'true');\n            }\n            if (this.item) {\n                this.item.classList.add('disabled');\n                this.item.setAttribute('aria-disabled', 'true');\n            }\n        }\n    }\n    updateChecked() {\n        if (!this.item) {\n            return;\n        }\n        const checked = this.action.checked;\n        this.item.classList.toggle('checked', !!checked);\n        if (checked !== undefined) {\n            this.item.setAttribute('role', 'menuitemcheckbox');\n            this.item.setAttribute('aria-checked', checked ? 'true' : 'false');\n        }\n        else {\n            this.item.setAttribute('role', 'menuitem');\n            this.item.setAttribute('aria-checked', '');\n        }\n    }\n    getMnemonic() {\n        return this.mnemonic;\n    }\n    applyStyle() {\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        const bgColor = isSelected && this.menuStyle.selectionBackgroundColor ? this.menuStyle.selectionBackgroundColor : undefined;\n        const outline = isSelected && this.menuStyle.selectionBorderColor ? `1px solid ${this.menuStyle.selectionBorderColor}` : '';\n        const outlineOffset = isSelected && this.menuStyle.selectionBorderColor ? `-1px` : '';\n        if (this.item) {\n            this.item.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n            this.item.style.backgroundColor = bgColor !== null && bgColor !== void 0 ? bgColor : '';\n            this.item.style.outline = outline;\n            this.item.style.outlineOffset = outlineOffset;\n        }\n        if (this.check) {\n            this.check.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n        }\n    }\n}\nclass SubmenuMenuActionViewItem extends BaseMenuActionViewItem {\n    constructor(action, submenuActions, parentData, submenuOptions, menuStyles) {\n        super(action, action, submenuOptions, menuStyles);\n        this.submenuActions = submenuActions;\n        this.parentData = parentData;\n        this.submenuOptions = submenuOptions;\n        this.mysubmenu = null;\n        this.submenuDisposables = this._register(new DisposableStore());\n        this.mouseOver = false;\n        this.expandDirection = submenuOptions && submenuOptions.expandDirection !== undefined ? submenuOptions.expandDirection : { horizontal: HorizontalDirection.Right, vertical: VerticalDirection.Below };\n        this.showScheduler = new RunOnceScheduler(() => {\n            if (this.mouseOver) {\n                this.cleanupExistingSubmenu(false);\n                this.createSubmenu(false);\n            }\n        }, 250);\n        this.hideScheduler = new RunOnceScheduler(() => {\n            if (this.element && (!isAncestor(getActiveElement(), this.element) && this.parentData.submenu === this.mysubmenu)) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }, 750);\n    }\n    render(container) {\n        super.render(container);\n        if (!this.element) {\n            return;\n        }\n        if (this.item) {\n            this.item.classList.add('monaco-submenu-item');\n            this.item.tabIndex = 0;\n            this.item.setAttribute('aria-haspopup', 'true');\n            this.updateAriaExpanded('false');\n            this.submenuIndicator = append(this.item, $('span.submenu-indicator' + ThemeIcon.asCSSSelector(Codicon.menuSubmenu)));\n            this.submenuIndicator.setAttribute('aria-hidden', 'true');\n        }\n        this._register(addDisposableListener(this.element, EventType.KEY_UP, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                EventHelper.stop(e, true);\n                this.createSubmenu(true);\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.KEY_DOWN, e => {\n            const event = new StandardKeyboardEvent(e);\n            if (getActiveElement() === this.item) {\n                if (event.equals(17 /* KeyCode.RightArrow */) || event.equals(3 /* KeyCode.Enter */)) {\n                    EventHelper.stop(e, true);\n                }\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_OVER, e => {\n            if (!this.mouseOver) {\n                this.mouseOver = true;\n                this.showScheduler.schedule();\n            }\n        }));\n        this._register(addDisposableListener(this.element, EventType.MOUSE_LEAVE, e => {\n            this.mouseOver = false;\n        }));\n        this._register(addDisposableListener(this.element, EventType.FOCUS_OUT, e => {\n            if (this.element && !isAncestor(getActiveElement(), this.element)) {\n                this.hideScheduler.schedule();\n            }\n        }));\n        this._register(this.parentData.parent.onScroll(() => {\n            if (this.parentData.submenu === this.mysubmenu) {\n                this.parentData.parent.focus(false);\n                this.cleanupExistingSubmenu(true);\n            }\n        }));\n    }\n    updateEnabled() {\n        // override on submenu entry\n        // native menus do not observe enablement on sumbenus\n        // we mimic that behavior\n    }\n    onClick(e) {\n        // stop clicking from trying to run an action\n        EventHelper.stop(e, true);\n        this.cleanupExistingSubmenu(false);\n        this.createSubmenu(true);\n    }\n    cleanupExistingSubmenu(force) {\n        if (this.parentData.submenu && (force || (this.parentData.submenu !== this.mysubmenu))) {\n            // disposal may throw if the submenu has already been removed\n            try {\n                this.parentData.submenu.dispose();\n            }\n            catch (_a) { }\n            this.parentData.submenu = undefined;\n            this.updateAriaExpanded('false');\n            if (this.submenuContainer) {\n                this.submenuDisposables.clear();\n                this.submenuContainer = undefined;\n            }\n        }\n    }\n    calculateSubmenuMenuLayout(windowDimensions, submenu, entry, expandDirection) {\n        const ret = { top: 0, left: 0 };\n        // Start with horizontal\n        ret.left = layout(windowDimensions.width, submenu.width, { position: expandDirection.horizontal === HorizontalDirection.Right ? 0 /* LayoutAnchorPosition.Before */ : 1 /* LayoutAnchorPosition.After */, offset: entry.left, size: entry.width });\n        // We don't have enough room to layout the menu fully, so we are overlapping the menu\n        if (ret.left >= entry.left && ret.left < entry.left + entry.width) {\n            if (entry.left + 10 + submenu.width <= windowDimensions.width) {\n                ret.left = entry.left + 10;\n            }\n            entry.top += 10;\n            entry.height = 0;\n        }\n        // Now that we have a horizontal position, try layout vertically\n        ret.top = layout(windowDimensions.height, submenu.height, { position: 0 /* LayoutAnchorPosition.Before */, offset: entry.top, size: 0 });\n        // We didn't have enough room below, but we did above, so we shift down to align the menu\n        if (ret.top + submenu.height === entry.top && ret.top + entry.height + submenu.height <= windowDimensions.height) {\n            ret.top += entry.height;\n        }\n        return ret;\n    }\n    createSubmenu(selectFirstItem = true) {\n        if (!this.element) {\n            return;\n        }\n        if (!this.parentData.submenu) {\n            this.updateAriaExpanded('true');\n            this.submenuContainer = append(this.element, $('div.monaco-submenu'));\n            this.submenuContainer.classList.add('menubar-menu-items-holder', 'context-view');\n            // Set the top value of the menu container before construction\n            // This allows the menu constructor to calculate the proper max height\n            const computedStyles = getWindow(this.parentData.parent.domNode).getComputedStyle(this.parentData.parent.domNode);\n            const paddingTop = parseFloat(computedStyles.paddingTop || '0') || 0;\n            // this.submenuContainer.style.top = `${this.element.offsetTop - this.parentData.parent.scrollOffset - paddingTop}px`;\n            this.submenuContainer.style.zIndex = '1';\n            this.submenuContainer.style.position = 'fixed';\n            this.submenuContainer.style.top = '0';\n            this.submenuContainer.style.left = '0';\n            this.parentData.submenu = new Menu(this.submenuContainer, this.submenuActions.length ? this.submenuActions : [new EmptySubmenuAction()], this.submenuOptions, this.menuStyle);\n            // layout submenu\n            const entryBox = this.element.getBoundingClientRect();\n            const entryBoxUpdated = {\n                top: entryBox.top - paddingTop,\n                left: entryBox.left,\n                height: entryBox.height + 2 * paddingTop,\n                width: entryBox.width\n            };\n            const viewBox = this.submenuContainer.getBoundingClientRect();\n            const window = getWindow(this.element);\n            const { top, left } = this.calculateSubmenuMenuLayout(new Dimension(window.innerWidth, window.innerHeight), Dimension.lift(viewBox), entryBoxUpdated, this.expandDirection);\n            // subtract offsets caused by transform parent\n            this.submenuContainer.style.left = `${left - viewBox.left}px`;\n            this.submenuContainer.style.top = `${top - viewBox.top}px`;\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_UP, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                    this.parentData.parent.focus();\n                    this.cleanupExistingSubmenu(true);\n                }\n            }));\n            this.submenuDisposables.add(addDisposableListener(this.submenuContainer, EventType.KEY_DOWN, e => {\n                const event = new StandardKeyboardEvent(e);\n                if (event.equals(15 /* KeyCode.LeftArrow */)) {\n                    EventHelper.stop(e, true);\n                }\n            }));\n            this.submenuDisposables.add(this.parentData.submenu.onDidCancel(() => {\n                this.parentData.parent.focus();\n                this.cleanupExistingSubmenu(true);\n            }));\n            this.parentData.submenu.focus(selectFirstItem);\n            this.mysubmenu = this.parentData.submenu;\n        }\n        else {\n            this.parentData.submenu.focus(false);\n        }\n    }\n    updateAriaExpanded(value) {\n        var _a;\n        if (this.item) {\n            (_a = this.item) === null || _a === void 0 ? void 0 : _a.setAttribute('aria-expanded', value);\n        }\n    }\n    applyStyle() {\n        super.applyStyle();\n        const isSelected = this.element && this.element.classList.contains('focused');\n        const fgColor = isSelected && this.menuStyle.selectionForegroundColor ? this.menuStyle.selectionForegroundColor : this.menuStyle.foregroundColor;\n        if (this.submenuIndicator) {\n            this.submenuIndicator.style.color = fgColor !== null && fgColor !== void 0 ? fgColor : '';\n        }\n    }\n    dispose() {\n        super.dispose();\n        this.hideScheduler.dispose();\n        if (this.mysubmenu) {\n            this.mysubmenu.dispose();\n            this.mysubmenu = null;\n        }\n        if (this.submenuContainer) {\n            this.submenuContainer = undefined;\n        }\n    }\n}\nclass MenuSeparatorActionViewItem extends ActionViewItem {\n    constructor(context, action, options, menuStyles) {\n        super(context, action, options);\n        this.menuStyles = menuStyles;\n    }\n    render(container) {\n        super.render(container);\n        if (this.label) {\n            this.label.style.borderBottomColor = this.menuStyles.separatorColor ? `${this.menuStyles.separatorColor}` : '';\n        }\n    }\n}\nexport function cleanMnemonic(label) {\n    const regex = MENU_MNEMONIC_REGEX;\n    const matches = regex.exec(label);\n    if (!matches) {\n        return label;\n    }\n    const mnemonicInText = !matches[1];\n    return label.replace(regex, mnemonicInText ? '$2$3' : '').trim();\n}\nexport function formatRule(c) {\n    const fontCharacter = getCodiconFontCharacters()[c.id];\n    return `.codicon-${c.id}:before { content: '\\\\${fontCharacter.toString(16)}'; }`;\n}\nfunction getMenuWidgetCSS(style, isForShadowDom) {\n    let result = /* css */ `\n.monaco-menu {\n\tfont-size: 13px;\n\tborder-radius: 5px;\n\tmin-width: 160px;\n}\n\n${formatRule(Codicon.menuSelection)}\n${formatRule(Codicon.menuSubmenu)}\n\n.monaco-menu .monaco-action-bar {\n\ttext-align: right;\n\toverflow: hidden;\n\twhite-space: nowrap;\n}\n\n.monaco-menu .monaco-action-bar .actions-container {\n\tdisplay: flex;\n\tmargin: 0 auto;\n\tpadding: 0;\n\twidth: 100%;\n\tjustify-content: flex-end;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar.reverse .actions-container {\n\tflex-direction: row-reverse;\n}\n\n.monaco-menu .monaco-action-bar .action-item {\n\tcursor: pointer;\n\tdisplay: inline-block;\n\ttransition: transform 50ms ease;\n\tposition: relative;  /* DO NOT REMOVE - this is the key to preventing the ghosting icon bug in Chrome 42 */\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled {\n\tcursor: default;\n}\n\n.monaco-menu .monaco-action-bar .action-item .icon,\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: inline-block;\n}\n\n.monaco-menu .monaco-action-bar .action-item .codicon {\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar .action-label {\n\tfont-size: 11px;\n\tmargin-right: 4px;\n}\n\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label,\n.monaco-menu .monaco-action-bar .action-item.disabled .action-label:hover {\n\tcolor: var(--vscode-disabledForeground);\n}\n\n/* Vertical actions */\n\n.monaco-menu .monaco-action-bar.vertical {\n\ttext-align: left;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tdisplay: block;\n\tborder-bottom: 1px solid var(--vscode-menu-separatorBackground);\n\tpadding-top: 1px;\n\tpadding: 30px;\n}\n\n.monaco-menu .secondary-actions .monaco-action-bar .action-label {\n\tmargin-left: 6px;\n}\n\n/* Action Items */\n.monaco-menu .monaco-action-bar .action-item.select-container {\n\toverflow: hidden; /* somehow the dropdown overflows its container, we prevent it here to not push */\n\tflex: 1;\n\tmax-width: 170px;\n\tmin-width: 60px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\tmargin-right: 10px;\n}\n\n.monaco-menu .monaco-action-bar.vertical {\n\tmargin-left: 0;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .actions-container {\n\tdisplay: block;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tpadding: 0;\n\ttransform: none;\n\tdisplay: flex;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.active {\n\ttransform: none;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\tflex: 1 1 auto;\n\tdisplay: flex;\n\theight: 2em;\n\talign-items: center;\n\tposition: relative;\n\tmargin: 0 4px;\n\tborder-radius: 4px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:hover .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-menu-item:focus .keybinding {\n\topacity: unset;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label {\n\tflex: 1 1 auto;\n\ttext-decoration: none;\n\tpadding: 0 1em;\n\tbackground: none;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .keybinding,\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tdisplay: inline-block;\n\tflex: 2 1 auto;\n\tpadding: 0 1em;\n\ttext-align: right;\n\tfont-size: 12px;\n\tline-height: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon {\n\tfont-size: 16px !important;\n\tdisplay: flex;\n\talign-items: center;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator.codicon::before {\n\tmargin-left: auto;\n\tmargin-right: -20px;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .keybinding,\n.monaco-menu .monaco-action-bar.vertical .action-item.disabled .submenu-indicator {\n\topacity: 0.4;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator) {\n\tdisplay: inline-block;\n\tbox-sizing: border-box;\n\tmargin: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item {\n\tposition: static;\n\toverflow: visible;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-item .monaco-submenu {\n\tposition: absolute;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\twidth: 100%;\n\theight: 0px !important;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator.text {\n\tpadding: 0.7em 1em 0.1em 1em;\n\tfont-weight: bold;\n\topacity: 1;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:hover {\n\tcolor: inherit;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tposition: absolute;\n\tvisibility: hidden;\n\twidth: 1em;\n\theight: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item.checked .menu-item-check {\n\tvisibility: visible;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n}\n\n/* Context Menu */\n\n.context-view.monaco-menu-container {\n\toutline: 0;\n\tborder: none;\n\tanimation: fadeIn 0.083s linear;\n\t-webkit-app-region: no-drag;\n}\n\n.context-view.monaco-menu-container :focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical:focus,\n.context-view.monaco-menu-container .monaco-action-bar.vertical :focus {\n\toutline: 0;\n}\n\n.hc-black .context-view.monaco-menu-container,\n.hc-light .context-view.monaco-menu-container,\n:host-context(.hc-black) .context-view.monaco-menu-container,\n:host-context(.hc-light) .context-view.monaco-menu-container {\n\tbox-shadow: none;\n}\n\n.hc-black .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n.hc-light .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-black) .monaco-menu .monaco-action-bar.vertical .action-item.focused,\n:host-context(.hc-light) .monaco-menu .monaco-action-bar.vertical .action-item.focused {\n\tbackground: none;\n}\n\n/* Vertical Action Bar Styles */\n\n.monaco-menu .monaco-action-bar.vertical {\n\tpadding: 4px 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-menu-item {\n\theight: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label:not(.separator),\n.monaco-menu .monaco-action-bar.vertical .keybinding {\n\tfont-size: inherit;\n\tpadding: 0 2em;\n\tmax-height: 100%;\n}\n\n.monaco-menu .monaco-action-bar.vertical .menu-item-check {\n\tfont-size: inherit;\n\twidth: 2em;\n}\n\n.monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tfont-size: inherit;\n\tmargin: 5px 0 !important;\n\tpadding: 0;\n\tborder-radius: 0;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .action-label.separator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .action-label.separator {\n\tmargin-left: 0;\n\tmargin-right: 0;\n}\n\n.monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\tfont-size: 60%;\n\tpadding: 0 1.8em;\n}\n\n.linux .monaco-menu .monaco-action-bar.vertical .submenu-indicator,\n:host-context(.linux) .monaco-menu .monaco-action-bar.vertical .submenu-indicator {\n\theight: 100%;\n\tmask-size: 10px 10px;\n\t-webkit-mask-size: 10px 10px;\n}\n\n.monaco-menu .action-item {\n\tcursor: default;\n}`;\n    if (isForShadowDom) {\n        // Only define scrollbar styles when used inside shadow dom,\n        // otherwise leave their styling to the global workbench styling.\n        result += `\n\t\t\t/* Arrows */\n\t\t\t.monaco-scrollable-element > .scrollbar > .scra {\n\t\t\t\tcursor: pointer;\n\t\t\t\tfont-size: 11px !important;\n\t\t\t}\n\n\t\t\t.monaco-scrollable-element > .visible {\n\t\t\t\topacity: 1;\n\n\t\t\t\t/* Background rule added for IE9 - to allow clicks on dom node */\n\t\t\t\tbackground:rgba(0,0,0,0);\n\n\t\t\t\ttransition: opacity 100ms linear;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible {\n\t\t\t\topacity: 0;\n\t\t\t\tpointer-events: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .invisible.fade {\n\t\t\t\ttransition: opacity 800ms linear;\n\t\t\t}\n\n\t\t\t/* Scrollable Content Inset Shadow */\n\t\t\t.monaco-scrollable-element > .shadow {\n\t\t\t\tposition: absolute;\n\t\t\t\tdisplay: none;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 3px;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 100%;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 3px;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 100%;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t\t.monaco-scrollable-element > .shadow.top-left-corner {\n\t\t\t\tdisplay: block;\n\t\t\t\ttop: 0;\n\t\t\t\tleft: 0;\n\t\t\t\theight: 3px;\n\t\t\t\twidth: 3px;\n\t\t\t}\n\t\t`;\n        // Scrollbars\n        const scrollbarShadowColor = style.scrollbarShadow;\n        if (scrollbarShadowColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .shadow.top {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 0 6px 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 0 6px -6px inset;\n\t\t\t\t}\n\n\t\t\t\t.monaco-scrollable-element > .shadow.top.left {\n\t\t\t\t\tbox-shadow: ${scrollbarShadowColor} 6px 6px 6px -6px inset;\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderBackgroundColor = style.scrollbarSliderBackground;\n        if (scrollbarSliderBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider {\n\t\t\t\t\tbackground: ${scrollbarSliderBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderHoverBackgroundColor = style.scrollbarSliderHoverBackground;\n        if (scrollbarSliderHoverBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider:hover {\n\t\t\t\t\tbackground: ${scrollbarSliderHoverBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n        const scrollbarSliderActiveBackgroundColor = style.scrollbarSliderActiveBackground;\n        if (scrollbarSliderActiveBackgroundColor) {\n            result += `\n\t\t\t\t.monaco-scrollable-element > .scrollbar > .slider.active {\n\t\t\t\t\tbackground: ${scrollbarSliderActiveBackgroundColor};\n\t\t\t\t}\n\t\t\t`;\n        }\n    }\n    return result;\n}\n"],"names":["$","dom","unthemedKeybindingLabelOptions","keybindingLabelBackground","undefined","keybindingLabelForeground","keybindingLabelBorder","keybindingLabelBottomBorder","keybindingLabelShadow","KeybindingLabel","Disposable","constructor","container","os","options","super","this","keyElements","Set","Object","create","labelForeground","domNode","style","color","hover","_register","getBaseLayerHoverDelegate","setupUpdatableHover","getDefaultHoverDelegate","didEverRender","appendChild","element","set","keybinding","matches","areSame","render","_a","clear","chords","getChords","renderChord","firstPart","i","length","chordPart","title","disableTitle","getAriaLabel","update","setAttribute","renderUnboundKeybindings","renderUnbound","parent","chord","match","modifierLabels","UILabelProvider","ctrlKey","renderKey","Boolean","separator","shiftKey","altKey","metaKey","keyLabel","keyCode","label","highlight","createKeyElement","localize","keyElement","arguments","add","backgroundColor","borderColor","borderBottomColor","boxShadow","concat","a","b","equals","PagedRenderer","templateId","renderer","modelProvider","renderTemplate","data","disposable","None","renderElement","index","_","height","dispose","model","isResolved","get","cts","CancellationTokenSource","promise","resolve","token","cancel","renderPlaceholder","then","entry","disposeTemplate","PagedAccessibilityProvider","accessibilityProvider","getWidgetAriaLabel","PagedList","user","virtualDelegate","renderers","pagedRenderers","map","r","list","List","fromPagedListOptions","updateOptions","getHTMLElement","onDidFocus","widget","onDidDispose","onMouseDblClick","Event","_ref","browserEvent","_model","onPointer","_ref2","onDidChangeSelection","_ref3","elements","indexes","e","splice","range","getFocus","getSelection","getSelectedElements","styles","groupIntersect","groups","result","start","end","intersection","Range","intersect","isEmpty","push","size","shift","much","RangeMap","paddingTop","_paddingTop","_size","topPadding","deleteCount","items","diff","before","after","Number","POSITIVE_INFINITY","g","middle","item","_len","Array","_key","previousGroup","group","consolidate","reduce","t","count","len","indexAt","position","newSize","Math","floor","indexAfter","min","positionAt","groupCount","newCount","RowCache","cache","Map","transactionNodesPendingRemoval","inTransaction","alloc","getTemplateCache","pop","isStale","has","delete","templateData","getRenderer","row","isReusingConnectedDomNode","release","releaseRow","transact","makeChanges","Error","doRemoveNode","classList","remove","parentElement","removeChild","removeFromParent","forEach","cachedRows","cachedRow","__decorate","decorators","target","key","desc","d","c","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","StaticDND","CurrentDragAndDropData","DefaultOptions","useShadows","verticalScrollMode","setRowLineHeight","setRowHeight","supportDynamicHeights","dnd","getDragElements","getDragURI","onDragStart","onDragOver","drop","horizontalScrolling","transformOptimization","alwaysConsumeMouseWheel","ElementsDragAndDropData","getData","ExternalElementsDragAndDropData","NativeDragAndDropData","types","files","dataTransfer","file","type","ListViewAccessibilityProvider","getSetSize","bind","l","getPosInSet","getRole","isChecked","ListView","contentHeight","rangeMap","onDidScroll","scrollableElement","onScroll","scrollableElementDomNode","getDomNode","_horizontalScrolling","value","toggle","measureItemWidth","updateScrollWidth","setScrollDimensions","width","getContentWidth","rowsContainer","max","scrollWidth","renderWidth","scrollableElementWidthDelayer","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","domId","InstanceCount","_scrollHeight","scrollableElementUpdateDisposable","Delayer","splicing","dragOverAnimationStopDisposable","dragOverMouseY","canDrop","currentDragFeedbackDisposable","onDragLeaveTimeout","disposables","DisposableStore","_onDidChangeContentHeight","Emitter","_onDidChangeContentWidth","onDidChangeContentHeight","latch","event","itemId","createRangeMap","lastRenderTop","lastRenderHeight","document","createElement","className","tabIndex","mouseSupport","paddingBottom","transform","overflow","contain","Gesture","addTarget","scrollable","Scrollable","forceIntegerValues","smoothScrollDuration","smoothScrolling","scheduleAtNextAnimationFrame","cb","getWindow","SmoothScrollableElement","horizontal","vertical","mouseWheelScrollSensitivity","fastScrollSensitivity","scrollByPage","addDisposableListener","TouchEventType","Change","onTouchChange","scrollTop","toDragEvent","onDrop","onDragLeave","onDragEnd","layout","initialSize","scrollableOptions","scrollHeight","setSmoothScrollDuration","lastRenderRange","getRenderRange","offset","setScrollTop","eventuallyUpdateScrollDimensions","_rerender","_splice","fire","previousRenderRange","deleteRange","removeRange","rowsToDispose","dragStartDisposable","checkedDisposable","rows","disposeElement","unshift","stale","previousRestRange","previousRenderedRestRange","previousUnrenderedRestRanges","relativeComplement","inserted","id","String","getTemplateId","getHeight","hasDynamicHeight","lastDynamicHeightWidth","uri","dropTarget","deleted","delta","renderRange","renderedRestRange","updateRange","updateItemInDOM","removeRanges","removeItemFromDOM","unrenderedRestRanges","insertRanges","reverse","insertItemInDOM","values","renderHeight","eventuallyUpdateScrollWidth","trigger","rerender","getScrollDimensions","firstVisibleIndex","indexOf","findIndex","domElement","elementHeight","elementTop","scrollDimensions","getContentHeight","renderTop","renderLeft","updateItemsInDOM","rangesToInsert","rangesToRemove","rangesToUpdate","left","top","role","checked","onDidChange","referenceNode","at","nextElementSibling","insertBefore","draggable","getComputedStyle","paddingLeft","parseFloat","paddingRight","lineHeight","getElementDomId","getScrollTop","getScrollPosition","reuseAnimation","setScrollPosition","onMouseClick","DomEmitter","toMouseEvent","onMouseMiddleClick","filter","button","onMouseDown","onMouseOver","onMouseOut","onContextMenu","any","Contextmenu","toGestureEvent","onTouchStart","toTouchEvent","onTap","Tap","getItemIndexFromEventTarget","initialTarget","sector","getTargetSector","scrollLeft","inSmoothScrolling","err","console","error","preventDefault","stopPropagation","translationY","effectAllowed","setData","DataTransfers","TEXT","setDragImage","getDragLabel","dragImage","textContent","contains","ownerDocument","getDragImageContainer","setTimeout","currentDragData","call","setupDragAndDropScrollTopAnimation","accept","currentDragFeedback","feedback","dropEffect","effect","distinct","sort","dragOverEffectPosition","f1","f2","isArray","currentDragFeedbackPosition","toDisposable","disposableTimeout","clearDragOverFeedback","dragData","teardownDragAndDropScrollTopAnimation","dragOverAnimationDisposable","viewTop","getTopLeftOffset","animate","animateDragAndDropScrollTop","pageY","upperLimit","targetIndex","relativePosition","offsetY","clamp","HTMLElement","rawIndex","getAttribute","isNaN","anchorElementIndex","anchorElementTopDelta","heightDiff","didChange","probeDynamicHeight","unrenderRanges","renderRanges","deltaScrollTop","getFutureScrollPosition","newScrollTop","getDynamicHeight","offsetHeight","isAncestor","body","warn","BugIndicatingError","setDynamicHeight","parentNode","memoize","prototype","CombinedSpliceable","spliceables","s","ListError","message","TypeNavigationMode","TypeNavigationControllerState","TraitRenderer","trait","renderedElements","name","renderedElementIndex","el","rendered","unrender","renderIndex","insertCount","renderedElement","renderIndexes","Trait","_trait","sortedIndexes","_onChange","onChange","j","_set","numericSort","sortedResult","toRender","disjunction","binarySearch","SelectionTrait","setAriaSelected","TraitSpliceable","view","identityProvider","fill","pastElementsWithTrait","getId","toString","pastElementsWithTraitSet","elementsWithTrait","isInputElement","tagName","isListElementDescendantOfClass","isMonacoEditor","isMonacoCustomToggle","isActionItem","isStickyScrollElement","isStickyScrollContainer","isButton","KeyboardController","onKeyDown","chain","StandardKeyboardEvent","multipleSelectionDisposables","multipleSelectionSupport","onEnter","onUpArrow","onDownArrow","onPageUpArrow","onPageDownArrow","onEscape","platform","onCtrlA","optionsUpdate","setSelection","focusPrevious","setAnchor","reveal","focus","focusNext","focusPreviousPage","focusNextPage","DefaultKeyboardNavigationDelegate","mightProducePrintableCharacter","TypeNavigationController","keyboardNavigationLabelProvider","keyboardNavigationEventFilter","delegate","enabled","state","Idle","mode","Automatic","triggered","previouslyFocused","enabledDisposables","typeNavigationEnabled","enable","disable","typeNavigationMode","typing","onChar","EventHelper","stop","onClear","debounce","onInput","ariaLabel","alert","word","Typing","getKeyboardNavigationLabel","labelStr","matchesPrefix","setFocus","fuzzy","matchesFuzzy2","DOMFocusController","onTab","focusedDomElement","tabIndexElement","querySelector","visibility","display","isSelectionSingleChangeEvent","isSelectionRangeChangeEvent","DefaultMultipleSelectionController","MouseController","_onPointer","multipleSelectionController","onDoubleClick","onViewPointer","isSelectionChangeEvent","getActiveElement","domFocus","isHandledByList","changeSelection","isMouseEvent","anchor","getAnchor","currentFocus","rangeSelection","selection","contiguousRange","getContiguousRangeContaining","newSelection","one","other","DefaultStyleController","styleElement","selectorSuffix","suffix","content","listBackground","listFocusBackground","listFocusForeground","listActiveSelectionBackground","listActiveSelectionForeground","listActiveSelectionIconForeground","listFocusAndSelectionBackground","listFocusAndSelectionForeground","listInactiveFocusForeground","listInactiveSelectionIconForeground","listInactiveFocusBackground","listInactiveSelectionBackground","listInactiveSelectionForeground","listHoverBackground","listHoverForeground","focusAndSelectionOutline","asCssValueWithDefault","listFocusAndSelectionOutline","listSelectionOutline","listFocusOutline","inactiveFocusAndSelectionOutline","listInactiveFocusOutline","listHoverOutline","listDropOverBackground","listDropBetweenBackground","tableColumnsBorder","tableOddRowsBackgroundColor","join","unthemedListStyles","treeIndentGuidesStroke","treeInactiveIndentGuidesStroke","Color","fromHex","transparent","treeStickyScrollBackground","treeStickyScrollBorder","treeStickyScrollShadow","keyboardSupport","PipelineRenderer","_templateId","AccessibiltyRenderer","observable","constObservable","autorun","reader","setAriaLabel","readObservable","ariaLevel","getAriaLevel","removeAttribute","ListViewDragAndDrop","originalEvent","targetElement","targetSector","onDidChangeFocus","eventBufferer","wrapEvent","toListEvent","mouseController","didJustPressContextMenuKey","fromKeyDown","fromKeyUp","fromMouse","StandardMouseEvent","signal","onDidBlur","_options","EventBufferer","_ariaLabel","_onDidDispose","getWidgetRole","baseRenderers","onDidChangeActiveDescendant","viewOptions","createListView","styleController","createStyleSheet","spliceable","keyboardController","keyboardNavigationDelegate","typeNavigationController","createMouseController","_onFocusChange","_onSelectionChange","bufferEvents","preventScroll","firstOrDefault","getAnchorElement","n","loop","findNextIndex","findPreviousIndex","lastPageIndex","currentlyFocusedElementIndex","lastGoodPageIndex","previousScrollTop","nextpageScrollTop","timeout","firstPageIndex","getPaddingTop","firstGoodPageIndex","focusLast","focusFirst","focusNth","getFocusedElements","relativeTop","isNumber","m","viewItemBottom","scrollBottom","getRelativeTop","abs","getScrollableElement","getElementID","getElementTop","getActiveDescendantId","MENU_MNEMONIC_REGEX","MENU_ESCAPED_MNEMONIC_REGEX","HorizontalDirection","VerticalDirection","Menu","ActionBar","actions","menuStyles","menuElement","orientation","actionViewItemProvider","action","doGetActionViewItem","parentData","context","actionRunner","ariaRole","focusOnlyEnabledItems","triggerKeys","keys","isMacintosh","isLinux","keyDown","actionsList","initializeOrUpdateStyleSheet","EventType","KEY_DOWN","enableMnemonics","toLocaleLowerCase","mnemonics","SubmenuMenuActionViewItem","focusItemByElement","onClick","focusedItem","viewItems","MOUSE_OUT","relatedTarget","updateFocus","MOUSE_OVER","lastFocusedItem","setFocusedItem","DomScrollableElement","verticalScrollbarSize","handleMouseWheel","scrollElement","styleScrollElement","MOUSE_UP","window","maxHeight","innerHeight","getBoundingClientRect","idx","submenuIds","Separator","icon","isMenu","scanDomNode","MenuSeparatorActionViewItem","array","updatePositionInSet","styleSheet","isInShadowDOM","globalStyleSheet","isForShadowDom","formatRule","Codicon","menuSelection","menuSubmenu","scrollbarShadowColor","scrollbarShadow","scrollbarSliderBackgroundColor","scrollbarSliderBackground","scrollbarSliderHoverBackgroundColor","scrollbarSliderHoverBackground","scrollbarSliderActiveBackgroundColor","scrollbarSliderActiveBackground","getMenuWidgetCSS","fgColor","foregroundColor","bgColor","border","shadow","shadowColor","outline","borderRadius","getContainer","children","fromRight","round","SubmenuAction","menuActionViewItem","mnemonic","getMnemonic","isEnabled","actionViewItems","menuItemOptions","useEventAsContext","getKeyBinding","keybindingLabel","getLabel","BaseMenuActionViewItem","BaseActionViewItem","ctx","menuStyle","cssClass","exec","runOnceToEnableMouseUp","RunOnceScheduler","isFirefox","rightButton","CONTEXT_MENU","append","_action","ID","check","ThemeIcon","asCSSSelector","schedule","updateClass","updateLabel","updateTooltip","updateEnabled","updateChecked","applyStyle","blur","pos","setSize","clearNode","stripIcons","cleanLabel","regex","mnemonicInText","replace","trim","cleanMnemonic","strings","lastIndex","escMatch","replaceDoubleEscapes","str","substr","innerText","split","class","isSelected","selectionForegroundColor","selectionBackgroundColor","selectionBorderColor","outlineOffset","submenuActions","submenuOptions","mysubmenu","submenuDisposables","mouseOver","expandDirection","Right","Below","showScheduler","cleanupExistingSubmenu","createSubmenu","hideScheduler","submenu","updateAriaExpanded","submenuIndicator","KEY_UP","MOUSE_LEAVE","FOCUS_OUT","force","submenuContainer","calculateSubmenuMenuLayout","windowDimensions","ret","selectFirstItem","computedStyles","zIndex","EmptySubmenuAction","entryBox","entryBoxUpdated","viewBox","Dimension","innerWidth","lift","onDidCancel","ActionViewItem","separatorColor","fontCharacter","getCodiconFontCharacters"],"sourceRoot":""}