"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[678],{30381:(e,t,i)=>{i.d(t,{M:()=>n});var o=i(86675);function n(e,t){e instanceof o.D?(e.setFontFamily(t.getMassagedFontFamily()),e.setFontWeight(t.fontWeight),e.setFontSize(t.fontSize),e.setFontFeatureSettings(t.fontFeatureSettings),e.setFontVariationSettings(t.fontVariationSettings),e.setLineHeight(t.lineHeight),e.setLetterSpacing(t.letterSpacing)):(e.style.fontFamily=t.getMassagedFontFamily(),e.style.fontWeight=t.fontWeight,e.style.fontSize=t.fontSize+"px",e.style.fontFeatureSettings=t.fontFeatureSettings,e.style.fontVariationSettings=t.fontVariationSettings,e.style.lineHeight=t.lineHeight+"px",e.style.letterSpacing=t.letterSpacing+"px")}},62498:(e,t,i)=>{i.d(t,{g:()=>y});var o=i(49685),n=i(61498),s=i(48250),r=i(87766),a=i(28826),l=i(66731),c=i(89071),u=i(79810);class h{constructor(e,t){this.key=e,this.migrate=t}apply(e){const t=h._read(e,this.key);this.migrate(t,(t=>h._read(e,t)),((t,i)=>h._write(e,t,i)))}static _read(e,t){if("undefined"===typeof e)return;const i=t.indexOf(".");if(i>=0){const o=t.substring(0,i);return this._read(e[o],t.substring(i+1))}return e[t]}static _write(e,t,i){const o=t.indexOf(".");if(o>=0){const n=t.substring(0,o);return e[n]=e[n]||{},void this._write(e[n],t.substring(o+1),i)}e[t]=i}}function d(e,t){h.items.push(new h(e,t))}function p(e,t){d(e,((i,o,n)=>{if("undefined"!==typeof i)for(const[s,r]of t)if(i===s)return void n(e,r)}))}h.items=[],p("wordWrap",[[!0,"on"],[!1,"off"]]),p("lineNumbers",[[!0,"on"],[!1,"off"]]),p("cursorBlinking",[["visible","solid"]]),p("renderWhitespace",[[!0,"boundary"],[!1,"none"]]),p("renderLineHighlight",[[!0,"line"],[!1,"none"]]),p("acceptSuggestionOnEnter",[[!0,"on"],[!1,"off"]]),p("tabCompletion",[[!1,"off"],[!0,"onlySnippets"]]),p("hover",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),p("parameterHints",[[!0,{enabled:!0}],[!1,{enabled:!1}]]),p("autoIndent",[[!1,"advanced"],[!0,"full"]]),p("matchBrackets",[[!0,"always"],[!1,"never"]]),p("renderFinalNewline",[[!0,"on"],[!1,"off"]]),p("cursorSmoothCaretAnimation",[[!0,"on"],[!1,"off"]]),d("autoClosingBrackets",((e,t,i)=>{!1===e&&(i("autoClosingBrackets","never"),"undefined"===typeof t("autoClosingQuotes")&&i("autoClosingQuotes","never"),"undefined"===typeof t("autoSurround")&&i("autoSurround","never"))})),d("renderIndentGuides",((e,t,i)=>{"undefined"!==typeof e&&(i("renderIndentGuides",void 0),"undefined"===typeof t("guides.indentation")&&i("guides.indentation",!!e))})),d("highlightActiveIndentGuide",((e,t,i)=>{"undefined"!==typeof e&&(i("highlightActiveIndentGuide",void 0),"undefined"===typeof t("guides.highlightActiveIndentation")&&i("guides.highlightActiveIndentation",!!e))}));const g={method:"showMethods",function:"showFunctions",constructor:"showConstructors",deprecated:"showDeprecated",field:"showFields",variable:"showVariables",class:"showClasses",struct:"showStructs",interface:"showInterfaces",module:"showModules",property:"showProperties",event:"showEvents",operator:"showOperators",unit:"showUnits",value:"showValues",constant:"showConstants",enum:"showEnums",enumMember:"showEnumMembers",keyword:"showKeywords",text:"showWords",color:"showColors",file:"showFiles",reference:"showReferences",folder:"showFolders",typeParameter:"showTypeParameters",snippet:"showSnippets"};d("suggest.filteredTypes",((e,t,i)=>{if(e&&"object"===typeof e){for(const o of Object.entries(g)){!1===e[o[0]]&&"undefined"===typeof t("suggest.".concat(o[1]))&&i("suggest.".concat(o[1]),!1)}i("suggest.filteredTypes",void 0)}})),d("quickSuggestions",((e,t,i)=>{if("boolean"===typeof e){const t=e?"on":"off";i("quickSuggestions",{comments:t,strings:t,other:t})}})),d("experimental.stickyScroll.enabled",((e,t,i)=>{"boolean"===typeof e&&(i("experimental.stickyScroll.enabled",void 0),"undefined"===typeof t("stickyScroll.enabled")&&i("stickyScroll.enabled",e))})),d("experimental.stickyScroll.maxLineCount",((e,t,i)=>{"number"===typeof e&&(i("experimental.stickyScroll.maxLineCount",void 0),"undefined"===typeof t("stickyScroll.maxLineCount")&&i("stickyScroll.maxLineCount",e))}));var m=i(95523),_=i(81196),f=i(54699),C=i(81788),v=i(73429),w=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},S=function(e,t){return function(i,o){t(i,o,e)}};let y=class extends r.jG{constructor(e,t,i,n){super(),this._accessibilityService=n,this._onDidChange=this._register(new s.vl),this.onDidChange=this._onDidChange.event,this._onDidChangeFast=this._register(new s.vl),this.onDidChangeFast=this._onDidChangeFast.event,this._isDominatedByLongLines=!1,this._viewLineCount=1,this._lineNumbersDigitCount=1,this._reservedHeight=0,this._glyphMarginDecorationLaneCount=1,this._computeOptionsMemory=new _.n0,this.isSimpleWidget=e,this._containerObserver=this._register(new c.u(i,t.dimension)),this._rawOptions=M(t),this._validatedOptions=T.validateOptions(this._rawOptions),this.options=this._computeOptions(),this.options.get(13)&&this._containerObserver.startObserving(),this._register(f.D.onDidChangeZoomLevel((()=>this._recomputeOptions()))),this._register(m.M.onDidChangeTabFocus((()=>this._recomputeOptions()))),this._register(this._containerObserver.onDidChange((()=>this._recomputeOptions()))),this._register(u.T.onDidChange((()=>this._recomputeOptions()))),this._register(o.cU.onDidChange((()=>this._recomputeOptions()))),this._register(this._accessibilityService.onDidChangeScreenReaderOptimized((()=>this._recomputeOptions())))}_recomputeOptions(){const e=this._computeOptions(),t=T.checkEquals(this.options,e);null!==t&&(this.options=e,this._onDidChangeFast.fire(t),this._onDidChange.fire(t))}_computeOptions(){const e=this._readEnvConfiguration(),t=C._8.createFromValidatedSettings(this._validatedOptions,e.pixelRatio,this.isSimpleWidget),i=this._readFontInfo(t),o={memory:this._computeOptionsMemory,outerWidth:e.outerWidth,outerHeight:e.outerHeight-this._reservedHeight,fontInfo:i,extraEditorClassName:e.extraEditorClassName,isDominatedByLongLines:this._isDominatedByLongLines,viewLineCount:this._viewLineCount,lineNumbersDigitCount:this._lineNumbersDigitCount,emptySelectionClipboard:e.emptySelectionClipboard,pixelRatio:e.pixelRatio,tabFocusMode:m.M.getTabFocusMode(),accessibilitySupport:e.accessibilitySupport,glyphMarginDecorationLaneCount:this._glyphMarginDecorationLaneCount};return T.computeOptions(this._validatedOptions,o)}_readEnvConfiguration(){return{extraEditorClassName:x(),outerWidth:this._containerObserver.getWidth(),outerHeight:this._containerObserver.getHeight(),emptySelectionClipboard:o.Tc||o.gm,pixelRatio:o.cU.value,accessibilitySupport:this._accessibilityService.isScreenReaderOptimized()?2:this._accessibilityService.getAccessibilitySupport()}}_readFontInfo(e){return u.T.readFontInfo(e)}getRawOptions(){return this._rawOptions}updateOptions(e){const t=M(e);T.applyUpdate(this._rawOptions,t)&&(this._validatedOptions=T.validateOptions(this._rawOptions),this._recomputeOptions())}observeContainer(e){this._containerObserver.observe(e)}setIsDominatedByLongLines(e){this._isDominatedByLongLines!==e&&(this._isDominatedByLongLines=e,this._recomputeOptions())}setModelLineCount(e){const t=function(e){let t=0;for(;e;)e=Math.floor(e/10),t++;return t||1}(e);this._lineNumbersDigitCount!==t&&(this._lineNumbersDigitCount=t,this._recomputeOptions())}setViewLineCount(e){this._viewLineCount!==e&&(this._viewLineCount=e,this._recomputeOptions())}setReservedHeight(e){this._reservedHeight!==e&&(this._reservedHeight=e,this._recomputeOptions())}setGlyphMarginDecorationLaneCount(e){this._glyphMarginDecorationLaneCount!==e&&(this._glyphMarginDecorationLaneCount=e,this._recomputeOptions())}};function x(){let e="";return o.nr||o.c8||(e+="no-user-select "),o.nr&&(e+="no-minimap-shadow ",e+="enable-user-select "),l.zx&&(e+="mac "),e}y=w([S(3,v.j)],y);class b{constructor(){this._values=[]}_read(e){return this._values[e]}get(e){return this._values[e]}_write(e,t){this._values[e]=t}}class E{constructor(){this._values=[]}_read(e){if(e>=this._values.length)throw new Error("Cannot read uninitialized value");return this._values[e]}get(e){return this._read(e)}_write(e,t){this._values[e]=t}}class T{static validateOptions(e){const t=new b;for(const i of _.BE){const o="_never_"===i.name?void 0:e[i.name];t._write(i.id,i.validate(o))}return t}static computeOptions(e,t){const i=new E;for(const o of _.BE)i._write(o.id,o.compute(t,i,e._read(o.id)));return i}static _deepEquals(e,t){if("object"!==typeof e||"object"!==typeof t||!e||!t)return e===t;if(Array.isArray(e)||Array.isArray(t))return!(!Array.isArray(e)||!Array.isArray(t))&&n.aI(e,t);if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const i in e)if(!T._deepEquals(e[i],t[i]))return!1;return!0}static checkEquals(e,t){const i=[];let o=!1;for(const n of _.BE){const s=!T._deepEquals(e._read(n.id),t._read(n.id));i[n.id]=s,s&&(o=!0)}return o?new _.lw(i):null}static applyUpdate(e,t){let i=!1;for(const o of _.BE)if(t.hasOwnProperty(o.name)){const n=o.applyUpdate(e[o.name],t[o.name]);e[o.name]=n.newValue,i=i||n.didChange}return i}}function M(e){const t=a.Go(e);return function(e){h.items.forEach((t=>t.apply(e)))}(t),t}},89071:(e,t,i)=>{i.d(t,{u:()=>s});var o=i(87766),n=i(48250);class s extends o.jG{constructor(e,t){super(),this._onDidChange=this._register(new n.vl),this.onDidChange=this._onDidChange.event,this._referenceDomElement=e,this._width=-1,this._height=-1,this._resizeObserver=null,this.measureReferenceDomElement(!1,t)}dispose(){this.stopObserving(),super.dispose()}getWidth(){return this._width}getHeight(){return this._height}startObserving(){if(!this._resizeObserver&&this._referenceDomElement){let e=null;const t=()=>{e?this.observe({width:e.width,height:e.height}):this.observe()};let i=!1,o=!1;const n=()=>{if(i&&!o)try{i=!1,o=!0,t()}finally{requestAnimationFrame((()=>{o=!1,n()}))}};this._resizeObserver=new ResizeObserver((t=>{e=t&&t[0]&&t[0].contentRect?t[0].contentRect:null,i=!0,n()})),this._resizeObserver.observe(this._referenceDomElement)}}stopObserving(){this._resizeObserver&&(this._resizeObserver.disconnect(),this._resizeObserver=null)}observe(e){this.measureReferenceDomElement(!0,e)}measureReferenceDomElement(e,t){let i=0,o=0;t?(i=t.width,o=t.height):this._referenceDomElement&&(i=this._referenceDomElement.clientWidth,o=this._referenceDomElement.clientHeight),i=Math.max(5,i),o=Math.max(5,o),this._width===i&&this._height===o||(this._width=i,this._height=o,e&&this._onDidChange.fire())}}},79810:(e,t,i)=>{i.d(t,{T:()=>p});var o=i(49685),n=i(48250),s=i(87766),r=i(30381);class a{constructor(e,t){this.chr=e,this.type=t,this.width=0}fulfill(e){this.width=e}}class l{constructor(e,t){this._bareFontInfo=e,this._requests=t,this._container=null,this._testElements=null}read(){this._createDomElements(),document.body.appendChild(this._container),this._readFromDomElements(),document.body.removeChild(this._container),this._container=null,this._testElements=null}_createDomElements(){const e=document.createElement("div");e.style.position="absolute",e.style.top="-50000px",e.style.width="50000px";const t=document.createElement("div");(0,r.M)(t,this._bareFontInfo),e.appendChild(t);const i=document.createElement("div");(0,r.M)(i,this._bareFontInfo),i.style.fontWeight="bold",e.appendChild(i);const o=document.createElement("div");(0,r.M)(o,this._bareFontInfo),o.style.fontStyle="italic",e.appendChild(o);const n=[];for(const s of this._requests){let e;0===s.type&&(e=t),2===s.type&&(e=i),1===s.type&&(e=o),e.appendChild(document.createElement("br"));const r=document.createElement("span");l._render(r,s),e.appendChild(r),n.push(r)}this._container=e,this._testElements=n}static _render(e,t){if(" "===t.chr){let t="\xa0";for(let e=0;e<8;e++)t+=t;e.innerText=t}else{let i=t.chr;for(let e=0;e<8;e++)i+=i;e.textContent=i}}_readFromDomElements(){for(let e=0,t=this._requests.length;e<t;e++){const t=this._requests[e],i=this._testElements[e];t.fulfill(i.offsetWidth/256)}}}var c=i(81196),u=i(81788);class h extends s.jG{constructor(){super(),this._onDidChange=this._register(new n.vl),this.onDidChange=this._onDidChange.event,this._cache=new d,this._evictUntrustedReadingsTimeout=-1}dispose(){-1!==this._evictUntrustedReadingsTimeout&&(window.clearTimeout(this._evictUntrustedReadingsTimeout),this._evictUntrustedReadingsTimeout=-1),super.dispose()}clearAllFontInfos(){this._cache=new d,this._onDidChange.fire()}_writeToCache(e,t){this._cache.put(e,t),t.isTrusted||-1!==this._evictUntrustedReadingsTimeout||(this._evictUntrustedReadingsTimeout=window.setTimeout((()=>{this._evictUntrustedReadingsTimeout=-1,this._evictUntrustedReadings()}),5e3))}_evictUntrustedReadings(){const e=this._cache.getValues();let t=!1;for(const i of e)i.isTrusted||(t=!0,this._cache.remove(i));t&&this._onDidChange.fire()}readFontInfo(e){if(!this._cache.has(e)){let t=this._actualReadFontInfo(e);(t.typicalHalfwidthCharacterWidth<=2||t.typicalFullwidthCharacterWidth<=2||t.spaceWidth<=2||t.maxDigitWidth<=2)&&(t=new u.YJ({pixelRatio:o.cU.value,fontFamily:t.fontFamily,fontWeight:t.fontWeight,fontSize:t.fontSize,fontFeatureSettings:t.fontFeatureSettings,fontVariationSettings:t.fontVariationSettings,lineHeight:t.lineHeight,letterSpacing:t.letterSpacing,isMonospace:t.isMonospace,typicalHalfwidthCharacterWidth:Math.max(t.typicalHalfwidthCharacterWidth,5),typicalFullwidthCharacterWidth:Math.max(t.typicalFullwidthCharacterWidth,5),canUseHalfwidthRightwardsArrow:t.canUseHalfwidthRightwardsArrow,spaceWidth:Math.max(t.spaceWidth,5),middotWidth:Math.max(t.middotWidth,5),wsmiddotWidth:Math.max(t.wsmiddotWidth,5),maxDigitWidth:Math.max(t.maxDigitWidth,5)},!1)),this._writeToCache(e,t)}return this._cache.get(e)}_createRequest(e,t,i,o){const n=new a(e,t);return i.push(n),null===o||void 0===o||o.push(n),n}_actualReadFontInfo(e){const t=[],i=[],n=this._createRequest("n",0,t,i),s=this._createRequest("\uff4d",0,t,null),r=this._createRequest(" ",0,t,i),a=this._createRequest("0",0,t,i),h=this._createRequest("1",0,t,i),d=this._createRequest("2",0,t,i),p=this._createRequest("3",0,t,i),g=this._createRequest("4",0,t,i),m=this._createRequest("5",0,t,i),_=this._createRequest("6",0,t,i),f=this._createRequest("7",0,t,i),C=this._createRequest("8",0,t,i),v=this._createRequest("9",0,t,i),w=this._createRequest("\u2192",0,t,i),S=this._createRequest("\uffeb",0,t,null),y=this._createRequest("\xb7",0,t,i),x=this._createRequest(String.fromCharCode(11825),0,t,null),b="|/-_ilm%";for(let o=0,l=8;o<l;o++)this._createRequest(b.charAt(o),0,t,i),this._createRequest(b.charAt(o),1,t,i),this._createRequest(b.charAt(o),2,t,i);!function(e,t){new l(e,t).read()}(e,t);const E=Math.max(a.width,h.width,d.width,p.width,g.width,m.width,_.width,f.width,C.width,v.width);let T=e.fontFeatureSettings===c.Bc.OFF;const M=i[0].width;for(let o=1,l=i.length;T&&o<l;o++){const e=M-i[o].width;if(e<-.001||e>.001){T=!1;break}}let A=!0;return T&&S.width!==M&&(A=!1),S.width>w.width&&(A=!1),new u.YJ({pixelRatio:o.cU.value,fontFamily:e.fontFamily,fontWeight:e.fontWeight,fontSize:e.fontSize,fontFeatureSettings:e.fontFeatureSettings,fontVariationSettings:e.fontVariationSettings,lineHeight:e.lineHeight,letterSpacing:e.letterSpacing,isMonospace:T,typicalHalfwidthCharacterWidth:n.width,typicalFullwidthCharacterWidth:s.width,canUseHalfwidthRightwardsArrow:A,spaceWidth:r.width,middotWidth:y.width,wsmiddotWidth:x.width,maxDigitWidth:E},!0)}}class d{constructor(){this._keys=Object.create(null),this._values=Object.create(null)}has(e){const t=e.getId();return!!this._values[t]}get(e){const t=e.getId();return this._values[t]}put(e,t){const i=e.getId();this._keys[i]=e,this._values[i]=t}remove(e){const t=e.getId();delete this._keys[t],delete this._values[t]}getValues(){return Object.keys(this._keys).map((e=>this._values[e]))}}const p=new h},95523:(e,t,i)=>{i.d(t,{M:()=>n});var o=i(48250);const n=new class{constructor(){this._tabFocus=!1,this._onDidChangeTabFocus=new o.vl,this.onDidChangeTabFocus=this._onDidChangeTabFocus.event}getTabFocusMode(){return this._tabFocus}setTabFocusMode(e){this._tabFocus=e,this._onDidChangeTabFocus.fire(this._tabFocus)}}},38524:(e,t,i)=>{i.d(t,{HP:()=>m,Or:()=>g,dQ:()=>f,nd:()=>y});var o,n=i(23726),s=i(92167),r=i(38867),a=i(23525),l=i(99005),c=i(47221),u=i(32605),h=i(77665);class d{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.hitTarget=e,this.type=0}}class p{constructor(e,t,i){this.position=e,this.spanNode=t,this.injectedText=i,this.type=1}}!function(e){e.createFromDOMInfo=function(e,t,i){const o=e.getPositionFromDOMInfo(t,i);return o?new p(o,t,null):new d(t)}}(o||(o={}));class g{constructor(e,t){this.lastViewCursorsRenderData=e,this.lastTextareaPosition=t}}class m{static _deduceRage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!t&&e?new l.Q(e.lineNumber,e.column,e.lineNumber,e.column):null!==t&&void 0!==t?t:null}static createUnknown(e,t,i){return{type:0,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createTextarea(e,t){return{type:1,element:e,mouseColumn:t,position:null,range:null}}static createMargin(e,t,i,o,n,s){return{type:e,element:t,mouseColumn:i,position:o,range:n,detail:s}}static createViewZone(e,t,i,o,n){return{type:e,element:t,mouseColumn:i,position:o,range:this._deduceRage(o),detail:n}}static createContentText(e,t,i,o,n){return{type:6,element:e,mouseColumn:t,position:i,range:this._deduceRage(i,o),detail:n}}static createContentEmpty(e,t,i,o){return{type:7,element:e,mouseColumn:t,position:i,range:this._deduceRage(i),detail:o}}static createContentWidget(e,t,i){return{type:9,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createScrollbar(e,t,i){return{type:11,element:e,mouseColumn:t,position:i,range:this._deduceRage(i)}}static createOverlayWidget(e,t,i){return{type:12,element:e,mouseColumn:t,position:null,range:null,detail:i}}static createOutsideEditor(e,t,i,o){return{type:13,element:null,mouseColumn:e,position:t,range:this._deduceRage(t),outsidePosition:i,outsideDistance:o}}static _typeToString(e){return 1===e?"TEXTAREA":2===e?"GUTTER_GLYPH_MARGIN":3===e?"GUTTER_LINE_NUMBERS":4===e?"GUTTER_LINE_DECORATIONS":5===e?"GUTTER_VIEW_ZONE":6===e?"CONTENT_TEXT":7===e?"CONTENT_EMPTY":8===e?"CONTENT_VIEW_ZONE":9===e?"CONTENT_WIDGET":10===e?"OVERVIEW_RULER":11===e?"SCROLLBAR":12===e?"OVERLAY_WIDGET":"UNKNOWN"}static toString(e){return this._typeToString(e.type)+": "+e.position+" - "+e.range+" - "+JSON.stringify(e.detail)}}class _{static isTextArea(e){return 2===e.length&&3===e[0]&&6===e[1]}static isChildOfViewLines(e){return e.length>=4&&3===e[0]&&7===e[3]}static isStrictChildOfViewLines(e){return e.length>4&&3===e[0]&&7===e[3]}static isChildOfScrollableElement(e){return e.length>=2&&3===e[0]&&5===e[1]}static isChildOfMinimap(e){return e.length>=2&&3===e[0]&&8===e[1]}static isChildOfContentWidgets(e){return e.length>=4&&3===e[0]&&1===e[3]}static isChildOfOverflowGuard(e){return e.length>=1&&3===e[0]}static isChildOfOverflowingContentWidgets(e){return e.length>=1&&2===e[0]}static isChildOfOverlayWidgets(e){return e.length>=2&&3===e[0]&&4===e[1]}}class f{constructor(e,t,i){this.viewModel=e.viewModel;const o=e.configuration.options;this.layoutInfo=o.get(143),this.viewDomNode=t.viewDomNode,this.lineHeight=o.get(66),this.stickyTabStops=o.get(115),this.typicalHalfwidthCharacterWidth=o.get(50).typicalHalfwidthCharacterWidth,this.lastRenderData=i,this._context=e,this._viewHelper=t}getZoneAtCoord(e){return f.getZoneAtCoord(this._context,e)}static getZoneAtCoord(e,t){const i=e.viewLayout.getWhitespaceAtVerticalOffset(t);if(i){const o=i.verticalOffset+i.height/2,n=e.viewModel.getLineCount();let s,r=null,l=null;return i.afterLineNumber!==n&&(l=new a.y(i.afterLineNumber+1,1)),i.afterLineNumber>0&&(r=new a.y(i.afterLineNumber,e.viewModel.getLineMaxColumn(i.afterLineNumber))),s=null===l?r:null===r?l:t<o?r:l,{viewZoneId:i.id,afterLineNumber:i.afterLineNumber,positionBefore:r,positionAfter:l,position:s}}return null}getFullLineRangeAtCoord(e){if(this._context.viewLayout.isAfterLines(e)){const e=this._context.viewModel.getLineCount(),t=this._context.viewModel.getLineMaxColumn(e);return{range:new l.Q(e,t,e,t),isAfterLines:!0}}const t=this._context.viewLayout.getLineNumberAtVerticalOffset(e),i=this._context.viewModel.getLineMaxColumn(t);return{range:new l.Q(t,1,t,i),isAfterLines:!1}}getLineNumberAtVerticalOffset(e){return this._context.viewLayout.getLineNumberAtVerticalOffset(e)}isAfterLines(e){return this._context.viewLayout.isAfterLines(e)}isInTopPadding(e){return this._context.viewLayout.isInTopPadding(e)}isInBottomPadding(e){return this._context.viewLayout.isInBottomPadding(e)}getVerticalOffsetForLineNumber(e){return this._context.viewLayout.getVerticalOffsetForLineNumber(e)}findAttribute(e,t){return f._findAttribute(e,t,this._viewHelper.viewDomNode)}static _findAttribute(e,t,i){for(;e&&e!==e.ownerDocument.body;){if(e.hasAttribute&&e.hasAttribute(t))return e.getAttribute(t);if(e===i)return null;e=e.parentNode}return null}getLineWidth(e){return this._viewHelper.getLineWidth(e)}visibleRangeForPosition(e,t){return this._viewHelper.visibleRangeForPosition(e,t)}getPositionFromDOMInfo(e,t){return this._viewHelper.getPositionFromDOMInfo(e,t)}getCurrentScrollTop(){return this._context.viewLayout.getCurrentScrollTop()}getCurrentScrollLeft(){return this._context.viewLayout.getCurrentScrollLeft()}}class C{constructor(e,t,i,o){this.editorPos=t,this.pos=i,this.relativePos=o,this.mouseVerticalOffset=Math.max(0,e.getCurrentScrollTop()+this.relativePos.y),this.mouseContentHorizontalOffset=e.getCurrentScrollLeft()+this.relativePos.x-e.layoutInfo.contentLeft,this.isInMarginArea=this.relativePos.x<e.layoutInfo.contentLeft&&this.relativePos.x>=e.layoutInfo.glyphMarginLeft,this.isInContentArea=!this.isInMarginArea,this.mouseColumn=Math.max(0,y._getMouseColumn(this.mouseContentHorizontalOffset,e.typicalHalfwidthCharacterWidth))}}class v extends C{constructor(e,t,i,o,n){super(e,t,i,o),this._ctx=e,n?(this.target=n,this.targetPath=s.L.collect(n,e.viewDomNode)):(this.target=null,this.targetPath=new Uint8Array(0))}toString(){return"pos(".concat(this.pos.x,",").concat(this.pos.y,"), editorPos(").concat(this.editorPos.x,",").concat(this.editorPos.y,"), relativePos(").concat(this.relativePos.x,",").concat(this.relativePos.y,"), mouseVerticalOffset: ").concat(this.mouseVerticalOffset,", mouseContentHorizontalOffset: ").concat(this.mouseContentHorizontalOffset,"\n\ttarget: ").concat(this.target?this.target.outerHTML:null)}_getMouseColumn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return e&&e.column<this._ctx.viewModel.getLineMaxColumn(e.lineNumber)?c.A.visibleColumnFromColumn(this._ctx.viewModel.getLineContent(e.lineNumber),e.column,this._ctx.viewModel.model.getOptions().tabSize)+1:this.mouseColumn}fulfillUnknown(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return m.createUnknown(this.target,this._getMouseColumn(e),e)}fulfillTextarea(){return m.createTextarea(this.target,this._getMouseColumn())}fulfillMargin(e,t,i,o){return m.createMargin(e,this.target,this._getMouseColumn(t),t,i,o)}fulfillViewZone(e,t,i){return m.createViewZone(e,this.target,this._getMouseColumn(t),t,i)}fulfillContentText(e,t,i){return m.createContentText(this.target,this._getMouseColumn(e),e,t,i)}fulfillContentEmpty(e,t){return m.createContentEmpty(this.target,this._getMouseColumn(e),e,t)}fulfillContentWidget(e){return m.createContentWidget(this.target,this._getMouseColumn(),e)}fulfillScrollbar(e){return m.createScrollbar(this.target,this._getMouseColumn(e),e)}fulfillOverlayWidget(e){return m.createOverlayWidget(this.target,this._getMouseColumn(),e)}withTarget(e){return new v(this._ctx,this.editorPos,this.pos,this.relativePos,e)}}const w={isAfterLines:!0};function S(e){return{isAfterLines:!1,horizontalDistanceToText:e}}class y{constructor(e,t){this._context=e,this._viewHelper=t}mouseTargetIsWidget(e){const t=e.target,i=s.L.collect(t,this._viewHelper.viewDomNode);return!(!_.isChildOfContentWidgets(i)&&!_.isChildOfOverflowingContentWidgets(i))||!!_.isChildOfOverlayWidgets(i)}createMouseTarget(e,t,i,o,n){const s=new f(this._context,this._viewHelper,e),r=new v(s,t,i,o,n);try{const e=y._createMouseTarget(s,r,!1);if(6===e.type&&s.stickyTabStops&&null!==e.position){const t=y._snapToSoftTabBoundary(e.position,s.viewModel),i=l.Q.fromPositions(t,t).plusRange(e.range);return r.fulfillContentText(t,i,e.detail)}return e}catch(a){return r.fulfillUnknown()}}static _createMouseTarget(e,t,i){if(null===t.target){if(i)return t.fulfillUnknown();const o=y._doHitTest(e,t);return 1===o.type?y.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position,o.injectedText):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}const o=t;let n=null;return _.isChildOfOverflowGuard(t.targetPath)||_.isChildOfOverflowingContentWidgets(t.targetPath)||(n=n||t.fulfillUnknown()),n=n||y._hitTestContentWidget(e,o),n=n||y._hitTestOverlayWidget(e,o),n=n||y._hitTestMinimap(e,o),n=n||y._hitTestScrollbarSlider(e,o),n=n||y._hitTestViewZone(e,o),n=n||y._hitTestMargin(e,o),n=n||y._hitTestViewCursor(e,o),n=n||y._hitTestTextArea(e,o),n=n||y._hitTestViewLines(e,o,i),n=n||y._hitTestScrollbar(e,o),n||t.fulfillUnknown()}static _hitTestContentWidget(e,t){if(_.isChildOfContentWidgets(t.targetPath)||_.isChildOfOverflowingContentWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillContentWidget(i):t.fulfillUnknown()}return null}static _hitTestOverlayWidget(e,t){if(_.isChildOfOverlayWidgets(t.targetPath)){const i=e.findAttribute(t.target,"widgetId");return i?t.fulfillOverlayWidget(i):t.fulfillUnknown()}return null}static _hitTestViewCursor(e,t){if(t.target){const i=e.lastRenderData.lastViewCursorsRenderData;for(const e of i)if(t.target===e.domNode)return t.fulfillContentText(e.position,null,{mightBeForeignElement:!1,injectedText:null})}if(t.isInContentArea){const i=e.lastRenderData.lastViewCursorsRenderData,o=t.mouseContentHorizontalOffset,n=t.mouseVerticalOffset;for(const s of i){if(o<s.contentLeft)continue;if(o>s.contentLeft+s.width)continue;const i=e.getVerticalOffsetForLineNumber(s.position.lineNumber);if(i<=n&&n<=i+s.height)return t.fulfillContentText(s.position,null,{mightBeForeignElement:!1,injectedText:null})}}return null}static _hitTestViewZone(e,t){const i=e.getZoneAtCoord(t.mouseVerticalOffset);if(i){const e=t.isInContentArea?8:5;return t.fulfillViewZone(e,i.position,i)}return null}static _hitTestTextArea(e,t){return _.isTextArea(t.targetPath)?e.lastRenderData.lastTextareaPosition?t.fulfillContentText(e.lastRenderData.lastTextareaPosition,null,{mightBeForeignElement:!1,injectedText:null}):t.fulfillTextarea():null}static _hitTestMargin(e,t){if(t.isInMarginArea){const i=e.getFullLineRangeAtCoord(t.mouseVerticalOffset),o=i.range.getStartPosition();let n=Math.abs(t.relativePos.x);const s={isAfterLines:i.isAfterLines,glyphMarginLeft:e.layoutInfo.glyphMarginLeft,glyphMarginWidth:e.layoutInfo.glyphMarginWidth,lineNumbersWidth:e.layoutInfo.lineNumbersWidth,offsetX:n};return n-=e.layoutInfo.glyphMarginLeft,n<=e.layoutInfo.glyphMarginWidth?t.fulfillMargin(2,o,i.range,s):(n-=e.layoutInfo.glyphMarginWidth,n<=e.layoutInfo.lineNumbersWidth?t.fulfillMargin(3,o,i.range,s):(n-=e.layoutInfo.lineNumbersWidth,t.fulfillMargin(4,o,i.range,s)))}return null}static _hitTestViewLines(e,t,i){if(!_.isChildOfViewLines(t.targetPath))return null;if(e.isInTopPadding(t.mouseVerticalOffset))return t.fulfillContentEmpty(new a.y(1,1),w);if(e.isAfterLines(t.mouseVerticalOffset)||e.isInBottomPadding(t.mouseVerticalOffset)){const i=e.viewModel.getLineCount(),o=e.viewModel.getLineMaxColumn(i);return t.fulfillContentEmpty(new a.y(i,o),w)}if(i){if(_.isStrictChildOfViewLines(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset);if(0===e.viewModel.getLineLength(i)){const o=e.getLineWidth(i),n=S(t.mouseContentHorizontalOffset-o);return t.fulfillContentEmpty(new a.y(i,1),n)}const o=e.getLineWidth(i);if(t.mouseContentHorizontalOffset>=o){const n=S(t.mouseContentHorizontalOffset-o),s=new a.y(i,e.viewModel.getLineMaxColumn(i));return t.fulfillContentEmpty(s,n)}}return t.fulfillUnknown()}const o=y._doHitTest(e,t);return 1===o.type?y.createMouseTargetFromHitTestPosition(e,t,o.spanNode,o.position,o.injectedText):this._createMouseTarget(e,t.withTarget(o.hitTarget),!0)}static _hitTestMinimap(e,t){if(_.isChildOfMinimap(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new a.y(i,o))}return null}static _hitTestScrollbarSlider(e,t){if(_.isChildOfScrollableElement(t.targetPath)&&t.target&&1===t.target.nodeType){const i=t.target.className;if(i&&/\b(slider|scrollbar)\b/.test(i)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new a.y(i,o))}}return null}static _hitTestScrollbar(e,t){if(_.isChildOfScrollableElement(t.targetPath)){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.viewModel.getLineMaxColumn(i);return t.fulfillScrollbar(new a.y(i,o))}return null}getMouseColumn(e){const t=this._context.configuration.options,i=t.get(143),o=this._context.viewLayout.getCurrentScrollLeft()+e.x-i.contentLeft;return y._getMouseColumn(o,t.get(50).typicalHalfwidthCharacterWidth)}static _getMouseColumn(e,t){if(e<0)return 1;return Math.round(e/t)+1}static createMouseTargetFromHitTestPosition(e,t,i,o,n){const s=o.lineNumber,r=o.column,c=e.getLineWidth(s);if(t.mouseContentHorizontalOffset>c){const e=S(t.mouseContentHorizontalOffset-c);return t.fulfillContentEmpty(o,e)}const u=e.visibleRangeForPosition(s,r);if(!u)return t.fulfillUnknown(o);const h=u.left;if(Math.abs(t.mouseContentHorizontalOffset-h)<1)return t.fulfillContentText(o,null,{mightBeForeignElement:!!n,injectedText:n});const d=[];if(d.push({offset:u.left,column:r}),r>1){const t=e.visibleRangeForPosition(s,r-1);t&&d.push({offset:t.left,column:r-1})}if(r<e.viewModel.getLineMaxColumn(s)){const t=e.visibleRangeForPosition(s,r+1);t&&d.push({offset:t.left,column:r+1})}d.sort(((e,t)=>e.offset-t.offset));const p=t.pos.toClientCoordinates(),g=i.getBoundingClientRect(),m=g.left<=p.clientX&&p.clientX<=g.right;let _=null;for(let f=1;f<d.length;f++){const e=d[f-1],i=d[f];if(e.offset<=t.mouseContentHorizontalOffset&&t.mouseContentHorizontalOffset<=i.offset){_=new l.Q(s,e.column,s,i.column);o=Math.abs(e.offset-t.mouseContentHorizontalOffset)<Math.abs(i.offset-t.mouseContentHorizontalOffset)?new a.y(s,e.column):new a.y(s,i.column);break}}return t.fulfillContentText(o,_,{mightBeForeignElement:!m||!!n,injectedText:n})}static _doHitTestWithCaretRangeFromPoint(e,t){const i=e.getLineNumberAtVerticalOffset(t.mouseVerticalOffset),o=e.getVerticalOffsetForLineNumber(i),s=o+e.lineHeight;if(!(i===e.viewModel.getLineCount()&&t.mouseVerticalOffset>s)){const i=Math.floor((o+s)/2);let r=t.pos.y+(i-t.mouseVerticalOffset);r<=t.editorPos.y&&(r=t.editorPos.y+1),r>=t.editorPos.y+t.editorPos.height&&(r=t.editorPos.y+t.editorPos.height-1);const a=new n.nz(t.pos.x,r),l=this._actualDoHitTestWithCaretRangeFromPoint(e,a.toClientCoordinates());if(1===l.type)return l}return this._actualDoHitTestWithCaretRangeFromPoint(e,t.pos.toClientCoordinates())}static _actualDoHitTestWithCaretRangeFromPoint(e,t){const i=u.jG(e.viewDomNode);let n;if(n=i?"undefined"===typeof i.caretRangeFromPoint?function(e,t,i){const o=document.createRange();let n=e.elementFromPoint(t,i);if(null!==n){for(;n&&n.firstChild&&n.firstChild.nodeType!==n.firstChild.TEXT_NODE&&n.lastChild&&n.lastChild.firstChild;)n=n.lastChild;const e=n.getBoundingClientRect(),i=window.getComputedStyle(n,null).getPropertyValue("font-style"),s=window.getComputedStyle(n,null).getPropertyValue("font-variant"),r=window.getComputedStyle(n,null).getPropertyValue("font-weight"),a=window.getComputedStyle(n,null).getPropertyValue("font-size"),l=window.getComputedStyle(n,null).getPropertyValue("line-height"),c=window.getComputedStyle(n,null).getPropertyValue("font-family"),u="".concat(i," ").concat(s," ").concat(r," ").concat(a,"/").concat(l," ").concat(c),h=n.innerText;let d,p=e.left,g=0;if(t>e.left+e.width)g=h.length;else{const e=x.getInstance();for(let i=0;i<h.length+1;i++){if(d=e.getCharWidth(h.charAt(i),u)/2,p+=d,t<p){g=i;break}p+=d}}o.setStart(n.firstChild,g),o.setEnd(n.firstChild,g)}return o}(i,t.clientX,t.clientY):i.caretRangeFromPoint(t.clientX,t.clientY):e.viewDomNode.ownerDocument.caretRangeFromPoint(t.clientX,t.clientY),!n||!n.startContainer)return new d;const s=n.startContainer;if(s.nodeType===s.TEXT_NODE){const t=s.parentNode,i=t?t.parentNode:null,a=i?i.parentNode:null;return(a&&a.nodeType===a.ELEMENT_NODE?a.className:null)===r.Gb.CLASS_NAME?o.createFromDOMInfo(e,t,n.startOffset):new d(s.parentNode)}if(s.nodeType===s.ELEMENT_NODE){const t=s.parentNode,i=t?t.parentNode:null;return(i&&i.nodeType===i.ELEMENT_NODE?i.className:null)===r.Gb.CLASS_NAME?o.createFromDOMInfo(e,s,s.textContent.length):new d(s)}return new d}static _doHitTestWithCaretPositionFromPoint(e,t){const i=e.viewDomNode.ownerDocument.caretPositionFromPoint(t.clientX,t.clientY);if(i.offsetNode.nodeType===i.offsetNode.TEXT_NODE){const t=i.offsetNode.parentNode,n=t?t.parentNode:null,s=n?n.parentNode:null;return(s&&s.nodeType===s.ELEMENT_NODE?s.className:null)===r.Gb.CLASS_NAME?o.createFromDOMInfo(e,i.offsetNode.parentNode,i.offset):new d(i.offsetNode.parentNode)}if(i.offsetNode.nodeType===i.offsetNode.ELEMENT_NODE){const t=i.offsetNode.parentNode,n=t&&t.nodeType===t.ELEMENT_NODE?t.className:null,s=t?t.parentNode:null,a=s&&s.nodeType===s.ELEMENT_NODE?s.className:null;if(n===r.Gb.CLASS_NAME){const t=i.offsetNode.childNodes[Math.min(i.offset,i.offsetNode.childNodes.length-1)];if(t)return o.createFromDOMInfo(e,t,0)}else if(a===r.Gb.CLASS_NAME)return o.createFromDOMInfo(e,i.offsetNode,0)}return new d(i.offsetNode)}static _snapToSoftTabBoundary(e,t){const i=t.getLineContent(e.lineNumber),{tabSize:o}=t.model.getOptions(),n=h.s.atomicPosition(i,e.column-1,o,2);return-1!==n?new a.y(e.lineNumber,n+1):e}static _doHitTest(e,t){let i=new d;if("function"===typeof e.viewDomNode.ownerDocument.caretRangeFromPoint?i=this._doHitTestWithCaretRangeFromPoint(e,t):e.viewDomNode.ownerDocument.caretPositionFromPoint&&(i=this._doHitTestWithCaretPositionFromPoint(e,t.pos.toClientCoordinates())),1===i.type){const t=e.viewModel.getInjectedTextAt(i.position),o=e.viewModel.normalizePosition(i.position,2);!t&&o.equals(i.position)||(i=new p(o,i.spanNode,t))}return i}}class x{static getInstance(){return x._INSTANCE||(x._INSTANCE=new x),x._INSTANCE}constructor(){this._cache={},this._canvas=document.createElement("canvas")}getCharWidth(e,t){const i=e+t;if(this._cache[i])return this._cache[i];const o=this._canvas.getContext("2d");o.font=t;const n=o.measureText(e).width;return this._cache[i]=n,n}}x._INSTANCE=null},79058:(e,t,i)=>{i.d(t,{J:()=>b});var o=i(32605),n=i(66731),s=i(58538),r=i(87766),a=i(46601),l=i(38524),c=i(23726),u=i(54699),h=i(23525),d=i(5190),p=i(67957),g=i(89067);class m extends p.i{constructor(e,t,i){super(),this._mouseLeaveMonitor=null,this._context=e,this.viewController=t,this.viewHelper=i,this.mouseTargetFactory=new l.nd(this._context,i),this._mouseDownOperation=this._register(new _(this._context,this.viewController,this.viewHelper,this.mouseTargetFactory,((e,t)=>this._createMouseTarget(e,t)),(e=>this._getMouseColumn(e)))),this.lastMouseLeaveTime=-1,this._height=this._context.configuration.options.get(143).height;const n=new c.$z(this.viewHelper.viewDomNode);this._register(n.onContextMenu(this.viewHelper.viewDomNode,(e=>this._onContextMenu(e,!0)))),this._register(n.onMouseMove(this.viewHelper.viewDomNode,(e=>{this._onMouseMove(e),this._mouseLeaveMonitor||(this._mouseLeaveMonitor=o.ko(this.viewHelper.viewDomNode.ownerDocument,"mousemove",(e=>{this.viewHelper.viewDomNode.contains(e.target)||this._onMouseLeave(new c.dO(e,!1,this.viewHelper.viewDomNode))})))}))),this._register(n.onMouseUp(this.viewHelper.viewDomNode,(e=>this._onMouseUp(e)))),this._register(n.onMouseLeave(this.viewHelper.viewDomNode,(e=>this._onMouseLeave(e))));let s=0;this._register(n.onPointerDown(this.viewHelper.viewDomNode,((e,t)=>{s=t}))),this._register(o.ko(this.viewHelper.viewDomNode,o.Bx.POINTER_UP,(e=>{this._mouseDownOperation.onPointerUp()}))),this._register(n.onMouseDown(this.viewHelper.viewDomNode,(e=>this._onMouseDown(e,s)))),this._setupMouseWheelZoomListener(),this._context.addEventHandler(this)}_setupMouseWheelZoomListener(){const e=g.QC.INSTANCE;let t=0,i=u.D.getZoomLevel(),s=!1,r=0;function l(e){return n.zx?(e.metaKey||e.ctrlKey)&&!e.shiftKey&&!e.altKey:e.ctrlKey&&!e.metaKey&&!e.shiftKey&&!e.altKey}this._register(o.ko(this.viewHelper.viewDomNode,o.Bx.MOUSE_WHEEL,(o=>{if(this.viewController.emitMouseWheel(o),!this._context.configuration.options.get(75))return;const n=new a.$(o);if(e.acceptStandardWheelEvent(n),e.isPhysicalMouseWheel()){if(l(o)){const e=u.D.getZoomLevel(),t=n.deltaY>0?1:-1;u.D.setZoomLevel(e+t),n.preventDefault(),n.stopPropagation()}}else Date.now()-t>50&&(i=u.D.getZoomLevel(),s=l(o),r=0),t=Date.now(),r+=n.deltaY,s&&(u.D.setZoomLevel(i+r/5),n.preventDefault(),n.stopPropagation())}),{capture:!0,passive:!1}))}dispose(){this._context.removeEventHandler(this),this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),super.dispose()}onConfigurationChanged(e){if(e.hasChanged(143)){const e=this._context.configuration.options.get(143).height;this._height!==e&&(this._height=e,this._mouseDownOperation.onHeightChanged())}return!1}onCursorStateChanged(e){return this._mouseDownOperation.onCursorStateChanged(e),!1}onFocusChanged(e){return!1}getTargetAtClientPoint(e,t){const i=new c.Hh(e,t).toPageCoordinates(),o=(0,c.wt)(this.viewHelper.viewDomNode);if(i.y<o.y||i.y>o.y+o.height||i.x<o.x||i.x>o.x+o.width)return null;const n=(0,c.i_)(this.viewHelper.viewDomNode,o,i);return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),o,i,n,null)}_createMouseTarget(e,t){let i=e.target;if(!this.viewHelper.viewDomNode.contains(i)){const t=o.jG(this.viewHelper.viewDomNode);t&&(i=t.elementsFromPoint(e.posx,e.posy).find((e=>this.viewHelper.viewDomNode.contains(e))))}return this.mouseTargetFactory.createMouseTarget(this.viewHelper.getLastRenderData(),e.editorPos,e.pos,e.relativePos,t?i:null)}_getMouseColumn(e){return this.mouseTargetFactory.getMouseColumn(e.relativePos)}_onContextMenu(e,t){this.viewController.emitContextMenu({event:e,target:this._createMouseTarget(e,t)})}_onMouseMove(e){if(this.mouseTargetFactory.mouseTargetIsWidget(e)||e.preventDefault(),this._mouseDownOperation.isActive())return;e.timestamp<this.lastMouseLeaveTime||this.viewController.emitMouseMove({event:e,target:this._createMouseTarget(e,!0)})}_onMouseLeave(e){this._mouseLeaveMonitor&&(this._mouseLeaveMonitor.dispose(),this._mouseLeaveMonitor=null),this.lastMouseLeaveTime=(new Date).getTime(),this.viewController.emitMouseLeave({event:e,target:null})}_onMouseUp(e){this.viewController.emitMouseUp({event:e,target:this._createMouseTarget(e,!0)})}_onMouseDown(e,t){const i=this._createMouseTarget(e,!0),o=6===i.type||7===i.type,s=2===i.type||3===i.type||4===i.type,r=3===i.type,a=this._context.configuration.options.get(108),l=8===i.type||5===i.type,c=9===i.type;let u=e.leftButton||e.middleButton;n.zx&&e.leftButton&&e.ctrlKey&&(u=!1);const h=()=>{e.preventDefault(),this.viewHelper.focusTextArea()};if(u&&(o||r&&a))h(),this._mouseDownOperation.start(i.type,e,t);else if(s)e.preventDefault();else if(l){const o=i.detail;u&&this.viewHelper.shouldSuppressMouseDownOnViewZone(o.viewZoneId)&&(h(),this._mouseDownOperation.start(i.type,e,t),e.preventDefault())}else c&&this.viewHelper.shouldSuppressMouseDownOnWidget(i.detail)&&(h(),e.preventDefault());this.viewController.emitMouseDown({event:e,target:i})}}class _ extends r.jG{constructor(e,t,i,o,n,s){super(),this._context=e,this._viewController=t,this._viewHelper=i,this._mouseTargetFactory=o,this._createMouseTarget=n,this._getMouseColumn=s,this._mouseMoveMonitor=this._register(new c.BA(this._viewHelper.viewDomNode)),this._topBottomDragScrolling=this._register(new f(this._context,this._viewHelper,this._mouseTargetFactory,((e,t,i)=>this._dispatchMouse(e,t,i)))),this._mouseState=new v,this._currentSelection=new d.L(1,1,1,1),this._isActive=!1,this._lastMouseEvent=null}dispose(){super.dispose()}isActive(){return this._isActive}_onMouseDownThenMove(e){this._lastMouseEvent=e,this._mouseState.setModifiers(e);const t=this._findMousePosition(e,!1);t&&(this._mouseState.isDragAndDrop?this._viewController.emitMouseDrag({event:e,target:t}):13!==t.type||"above"!==t.outsidePosition&&"below"!==t.outsidePosition?(this._topBottomDragScrolling.stop(),this._dispatchMouse(t,!0,1)):this._topBottomDragScrolling.start(t,e))}start(e,t,i){this._lastMouseEvent=t,this._mouseState.setStartedOnLineNumbers(3===e),this._mouseState.setStartButtons(t),this._mouseState.setModifiers(t);const o=this._findMousePosition(t,!0);if(!o||!o.position)return;this._mouseState.trySetCount(t.detail,o.position),t.detail=this._mouseState.count;const n=this._context.configuration.options;if(!n.get(90)&&n.get(35)&&!n.get(22)&&!this._mouseState.altKey&&t.detail<2&&!this._isActive&&!this._currentSelection.isEmpty()&&6===o.type&&o.position&&this._currentSelection.containsPosition(o.position))return this._mouseState.isDragAndDrop=!0,this._isActive=!0,void this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,(e=>this._onMouseDownThenMove(e)),(e=>{const t=this._findMousePosition(this._lastMouseEvent,!1);e&&e instanceof KeyboardEvent?this._viewController.emitMouseDropCanceled():this._viewController.emitMouseDrop({event:this._lastMouseEvent,target:t?this._createMouseTarget(this._lastMouseEvent,!0):null}),this._stop()}));this._mouseState.isDragAndDrop=!1,this._dispatchMouse(o,t.shiftKey,1),this._isActive||(this._isActive=!0,this._mouseMoveMonitor.startMonitoring(this._viewHelper.viewLinesDomNode,i,t.buttons,(e=>this._onMouseDownThenMove(e)),(()=>this._stop())))}_stop(){this._isActive=!1,this._topBottomDragScrolling.stop()}onHeightChanged(){this._mouseMoveMonitor.stopMonitoring()}onPointerUp(){this._mouseMoveMonitor.stopMonitoring()}onCursorStateChanged(e){this._currentSelection=e.selections[0]}_getPositionOutsideEditor(e){const t=e.editorPos,i=this._context.viewModel,o=this._context.viewLayout,n=this._getMouseColumn(e);if(e.posy<t.y){const i=t.y-e.posy,s=Math.max(o.getCurrentScrollTop()-i,0),r=l.dQ.getZoneAtCoord(this._context,s);if(r){const e=this._helpPositionJumpOverViewZone(r);if(e)return l.HP.createOutsideEditor(n,e,"above",i)}const a=o.getLineNumberAtVerticalOffset(s);return l.HP.createOutsideEditor(n,new h.y(a,1),"above",i)}if(e.posy>t.y+t.height){const s=e.posy-t.y-t.height,r=o.getCurrentScrollTop()+e.relativePos.y,a=l.dQ.getZoneAtCoord(this._context,r);if(a){const e=this._helpPositionJumpOverViewZone(a);if(e)return l.HP.createOutsideEditor(n,e,"below",s)}const c=o.getLineNumberAtVerticalOffset(r);return l.HP.createOutsideEditor(n,new h.y(c,i.getLineMaxColumn(c)),"below",s)}const s=o.getLineNumberAtVerticalOffset(o.getCurrentScrollTop()+e.relativePos.y);if(e.posx<t.x){const i=t.x-e.posx;return l.HP.createOutsideEditor(n,new h.y(s,1),"left",i)}if(e.posx>t.x+t.width){const o=e.posx-t.x-t.width;return l.HP.createOutsideEditor(n,new h.y(s,i.getLineMaxColumn(s)),"right",o)}return null}_findMousePosition(e,t){const i=this._getPositionOutsideEditor(e);if(i)return i;const o=this._createMouseTarget(e,t);if(!o.position)return null;if(8===o.type||5===o.type){const e=this._helpPositionJumpOverViewZone(o.detail);if(e)return l.HP.createViewZone(o.type,o.element,o.mouseColumn,e,o.detail)}return o}_helpPositionJumpOverViewZone(e){const t=new h.y(this._currentSelection.selectionStartLineNumber,this._currentSelection.selectionStartColumn),i=e.positionBefore,o=e.positionAfter;return i&&o?i.isBefore(t)?i:o:null}_dispatchMouse(e,t,i){e.position&&this._viewController.dispatchMouse({position:e.position,mouseColumn:e.mouseColumn,startedOnLineNumbers:this._mouseState.startedOnLineNumbers,revealType:i,inSelectionMode:t,mouseDownCount:this._mouseState.count,altKey:this._mouseState.altKey,ctrlKey:this._mouseState.ctrlKey,metaKey:this._mouseState.metaKey,shiftKey:this._mouseState.shiftKey,leftButton:this._mouseState.leftButton,middleButton:this._mouseState.middleButton,onInjectedText:6===e.type&&null!==e.detail.injectedText})}}class f extends r.jG{constructor(e,t,i,o){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=o,this._operation=null}dispose(){super.dispose(),this.stop()}start(e,t){this._operation?this._operation.setPosition(e,t):this._operation=new C(this._context,this._viewHelper,this._mouseTargetFactory,this._dispatchMouse,e,t)}stop(){this._operation&&(this._operation.dispose(),this._operation=null)}}class C extends r.jG{constructor(e,t,i,n,s,r){super(),this._context=e,this._viewHelper=t,this._mouseTargetFactory=i,this._dispatchMouse=n,this._position=s,this._mouseEvent=r,this._lastTime=Date.now(),this._animationFrameDisposable=o.PG((()=>this._execute()))}dispose(){this._animationFrameDisposable.dispose()}setPosition(e,t){this._position=e,this._mouseEvent=t}_tick(){const e=Date.now(),t=e-this._lastTime;return this._lastTime=e,t}_getScrollSpeed(){const e=this._context.configuration.options.get(66),t=this._context.configuration.options.get(143).height/e,i=this._position.outsideDistance/e;return i<=1.5?Math.max(30,t*(1+i)):i<=3?Math.max(60,t*(2+i)):Math.max(200,t*(7+i))}_execute(){const e=this._context.configuration.options.get(66),t=this._getScrollSpeed()*(this._tick()/1e3)*e,i="above"===this._position.outsidePosition?-t:t;this._context.viewModel.viewLayout.deltaScrollNow(0,i),this._viewHelper.renderNow();const n=this._context.viewLayout.getLinesViewportData(),s="above"===this._position.outsidePosition?n.startLineNumber:n.endLineNumber;let r;{const e=(0,c.wt)(this._viewHelper.viewDomNode),t=this._context.configuration.options.get(143).horizontalScrollbarHeight,i=new c.nz(this._mouseEvent.pos.x,e.y+e.height-t-.1),o=(0,c.i_)(this._viewHelper.viewDomNode,e,i);r=this._mouseTargetFactory.createMouseTarget(this._viewHelper.getLastRenderData(),e,i,o,null)}r.position&&r.position.lineNumber===s||(r="above"===this._position.outsidePosition?l.HP.createOutsideEditor(this._position.mouseColumn,new h.y(s,1),"above",this._position.outsideDistance):l.HP.createOutsideEditor(this._position.mouseColumn,new h.y(s,this._context.viewModel.getLineMaxColumn(s)),"below",this._position.outsideDistance)),this._dispatchMouse(r,!0,2),this._animationFrameDisposable=o.PG((()=>this._execute()))}}class v{get altKey(){return this._altKey}get ctrlKey(){return this._ctrlKey}get metaKey(){return this._metaKey}get shiftKey(){return this._shiftKey}get leftButton(){return this._leftButton}get middleButton(){return this._middleButton}get startedOnLineNumbers(){return this._startedOnLineNumbers}constructor(){this._altKey=!1,this._ctrlKey=!1,this._metaKey=!1,this._shiftKey=!1,this._leftButton=!1,this._middleButton=!1,this._startedOnLineNumbers=!1,this._lastMouseDownPosition=null,this._lastMouseDownPositionEqualCount=0,this._lastMouseDownCount=0,this._lastSetMouseDownCountTime=0,this.isDragAndDrop=!1}get count(){return this._lastMouseDownCount}setModifiers(e){this._altKey=e.altKey,this._ctrlKey=e.ctrlKey,this._metaKey=e.metaKey,this._shiftKey=e.shiftKey}setStartButtons(e){this._leftButton=e.leftButton,this._middleButton=e.middleButton}setStartedOnLineNumbers(e){this._startedOnLineNumbers=e}trySetCount(e,t){const i=(new Date).getTime();i-this._lastSetMouseDownCountTime>v.CLEAR_MOUSE_DOWN_COUNT_TIME&&(e=1),this._lastSetMouseDownCountTime=i,e>this._lastMouseDownCount+1&&(e=this._lastMouseDownCount+1),this._lastMouseDownPosition&&this._lastMouseDownPosition.equals(t)?this._lastMouseDownPositionEqualCount++:this._lastMouseDownPositionEqualCount=1,this._lastMouseDownPosition=t,this._lastMouseDownCount=Math.min(e,this._lastMouseDownPositionEqualCount)}}v.CLEAR_MOUSE_DOWN_COUNT_TIME=400;var w=i(75673),S=i(9984);class y extends m{constructor(e,t,i){super(e,t,i),this._register(s.q.addTarget(this.viewHelper.linesContentDomNode)),this._register(o.ko(this.viewHelper.linesContentDomNode,s.B.Tap,(e=>this.onTap(e)))),this._register(o.ko(this.viewHelper.linesContentDomNode,s.B.Change,(e=>this.onChange(e)))),this._register(o.ko(this.viewHelper.linesContentDomNode,s.B.Contextmenu,(e=>this._onContextMenu(new c.dO(e,!1,this.viewHelper.viewDomNode),!1)))),this._lastPointerType="mouse",this._register(o.ko(this.viewHelper.linesContentDomNode,"pointerdown",(e=>{const t=e.pointerType;this._lastPointerType="mouse"!==t?"touch"===t?"touch":"pen":"mouse"})));const n=new c.DW(this.viewHelper.viewDomNode);this._register(n.onPointerMove(this.viewHelper.viewDomNode,(e=>this._onMouseMove(e)))),this._register(n.onPointerUp(this.viewHelper.viewDomNode,(e=>this._onMouseUp(e)))),this._register(n.onPointerLeave(this.viewHelper.viewDomNode,(e=>this._onMouseLeave(e)))),this._register(n.onPointerDown(this.viewHelper.viewDomNode,((e,t)=>this._onMouseDown(e,t))))}onTap(e){if(!e.initialTarget||!this.viewHelper.linesContentDomNode.contains(e.initialTarget))return;e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new c.dO(e,!1,this.viewHelper.viewDomNode),!1);t.position&&this.viewController.dispatchMouse({position:t.position,mouseColumn:t.position.column,startedOnLineNumbers:!1,revealType:1,mouseDownCount:e.tapCount,inSelectionMode:!1,altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,leftButton:!1,middleButton:!1,onInjectedText:6===t.type&&null!==t.detail.injectedText})}onChange(e){"touch"===this._lastPointerType&&this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}_onMouseDown(e,t){"touch"!==e.browserEvent.pointerType&&super._onMouseDown(e,t)}}class x extends m{constructor(e,t,i){super(e,t,i),this._register(s.q.addTarget(this.viewHelper.linesContentDomNode)),this._register(o.ko(this.viewHelper.linesContentDomNode,s.B.Tap,(e=>this.onTap(e)))),this._register(o.ko(this.viewHelper.linesContentDomNode,s.B.Change,(e=>this.onChange(e)))),this._register(o.ko(this.viewHelper.linesContentDomNode,s.B.Contextmenu,(e=>this._onContextMenu(new c.dO(e,!1,this.viewHelper.viewDomNode),!1))))}onTap(e){e.preventDefault(),this.viewHelper.focusTextArea();const t=this._createMouseTarget(new c.dO(e,!1,this.viewHelper.viewDomNode),!1);if(t.position){const e=document.createEvent("CustomEvent");e.initEvent(S.$D.Tap,!1,!0),this.viewHelper.dispatchTextAreaEvent(e),this.viewController.moveTo(t.position,1)}}onChange(e){this._context.viewModel.viewLayout.deltaScrollNow(-e.translationX,-e.translationY)}}class b extends r.jG{constructor(e,t,i){super(),n.un&&w.e.pointerEvents?this.handler=this._register(new y(e,t,i)):window.TouchEvent?this.handler=this._register(new x(e,t,i)):this.handler=this._register(new m(e,t,i))}getTargetAtClientPoint(e,t){return this.handler.getTargetAtClientPoint(e,t)}}},19349:(e,t,i)=>{i.d(t,{P:()=>A});var o=i(51413),n=i(49685),s=i(86675),r=i(66731),a=i(12780),l=i(30381),c=i(9984),u=i(18625),h=i(92167),d=i(4625),p=i(17154),g=i(81196),m=i(89294),_=i(23525),f=i(99005),C=i(5190),v=i(67555),w=i(91861),S=i(57397),y=i(51443),x=i(16391),b=function(e,t,i,o){var n,s=arguments.length,r=s<3?t:null===o?o=Object.getOwnPropertyDescriptor(t,i):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,o);else for(var a=e.length-1;a>=0;a--)(n=e[a])&&(r=(s<3?n(r):s>3?n(t,i,r):n(t,i))||r);return s>3&&r&&Object.defineProperty(t,i,r),r},E=function(e,t){return function(i,o){t(i,o,e)}};class T{constructor(e,t,i,o,n){this._context=e,this.modelLineNumber=t,this.distanceToModelLineStart=i,this.widthOfHiddenLineTextBefore=o,this.distanceToModelLineEnd=n,this._visibleTextAreaBrand=void 0,this.startPosition=null,this.endPosition=null,this.visibleTextareaStart=null,this.visibleTextareaEnd=null,this._previousPresentation=null}prepareRender(e){const t=new _.y(this.modelLineNumber,this.distanceToModelLineStart+1),i=new _.y(this.modelLineNumber,this._context.viewModel.model.getLineMaxColumn(this.modelLineNumber)-this.distanceToModelLineEnd);this.startPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(t),this.endPosition=this._context.viewModel.coordinatesConverter.convertModelPositionToViewPosition(i),this.startPosition.lineNumber===this.endPosition.lineNumber?(this.visibleTextareaStart=e.visibleRangeForPosition(this.startPosition),this.visibleTextareaEnd=e.visibleRangeForPosition(this.endPosition)):(this.visibleTextareaStart=null,this.visibleTextareaEnd=null)}definePresentation(e){return this._previousPresentation||(this._previousPresentation=e||{foreground:1,italic:!1,bold:!1,underline:!1,strikethrough:!1}),this._previousPresentation}}const M=n.gm;let A=class extends h.p{constructor(e,t,i,a){super(e),this._keybindingService=a,this._primaryCursorPosition=new _.y(1,1),this._primaryCursorVisibleRange=null,this._viewController=t,this._visibleRangeProvider=i,this._scrollLeft=0,this._scrollTop=0;const d=this._context.configuration.options,p=d.get(143);this._setAccessibilityOptions(d),this._contentLeft=p.contentLeft,this._contentWidth=p.contentWidth,this._contentHeight=p.height,this._fontInfo=d.get(50),this._lineHeight=d.get(66),this._emptySelectionClipboard=d.get(37),this._copyWithSyntaxHighlighting=d.get(25),this._visibleTextArea=null,this._selections=[new C.L(1,1,1,1)],this._modelSelections=[new C.L(1,1,1,1)],this._lastRenderPosition=null,this.textArea=(0,s.Z)(document.createElement("textarea")),h.L.write(this.textArea,6),this.textArea.setClassName("inputarea ".concat(v.S)),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:g}=this._context.viewModel.model.getOptions();this.textArea.domNode.style.tabSize="".concat(g*this._fontInfo.spaceWidth,"px"),this.textArea.setAttribute("autocorrect","off"),this.textArea.setAttribute("autocapitalize","off"),this.textArea.setAttribute("autocomplete","off"),this.textArea.setAttribute("spellcheck","false"),this.textArea.setAttribute("aria-label",this._getAriaLabel(d)),this.textArea.setAttribute("aria-required",d.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(d.get(123))),this.textArea.setAttribute("role","textbox"),this.textArea.setAttribute("aria-roledescription",o.kg("editor","editor")),this.textArea.setAttribute("aria-multiline","true"),this.textArea.setAttribute("aria-autocomplete",d.get(90)?"none":"both"),this._ensureReadOnlyAttribute(),this.textAreaCover=(0,s.Z)(document.createElement("div")),this.textAreaCover.setPosition("absolute");const m={getLineCount:()=>this._context.viewModel.getLineCount(),getLineMaxColumn:e=>this._context.viewModel.getLineMaxColumn(e),getValueInRange:(e,t)=>this._context.viewModel.getValueInRange(e,t),getValueLengthInRange:(e,t)=>this._context.viewModel.getValueLengthInRange(e,t),modifyPosition:(e,t)=>this._context.viewModel.modifyPosition(e,t)},w={getDataToCopy:()=>{const e=this._context.viewModel.getPlainTextToCopy(this._modelSelections,this._emptySelectionClipboard,r.uF),t=this._context.viewModel.model.getEOL(),i=this._emptySelectionClipboard&&1===this._modelSelections.length&&this._modelSelections[0].isEmpty(),o=Array.isArray(e)?e:null,n=Array.isArray(e)?e.join(t):e;let s,a=null;if(c.Eq.forceCopyWithSyntaxHighlighting||this._copyWithSyntaxHighlighting&&n.length<65536){const e=this._context.viewModel.getRichTextToCopy(this._modelSelections,this._emptySelectionClipboard);e&&(s=e.html,a=e.mode)}return{isFromEmptySelection:i,multicursorText:o,text:n,html:s,mode:a}},getScreenReaderContent:()=>{if(1===this._accessibilitySupport){const e=this._selections[0];if(r.zx&&e.isEmpty()){const t=e.getStartPosition();let i=this._getWordBeforePosition(t);if(0===i.length&&(i=this._getCharacterBeforePosition(t)),i.length>0)return new u._O(i,i.length,i.length,f.Q.fromPositions(t),0)}const t=500;if(r.zx&&!e.isEmpty()&&m.getValueLengthInRange(e,0)<t){const t=m.getValueInRange(e,0);return new u._O(t,0,t.length,e,0)}if(n.nr&&!e.isEmpty()){const e="vscode-placeholder";return new u._O(e,0,e.length,null,void 0)}return u._O.EMPTY}if(n.m0){const e=this._selections[0];if(e.isEmpty()){const t=e.getStartPosition(),[i,o]=this._getAndroidWordAtPosition(t);if(i.length>0)return new u._O(i,o,o,f.Q.fromPositions(t),0)}return u._O.EMPTY}return u.Al.fromEditorSelection(m,this._selections[0],this._accessibilityPageSize,0===this._accessibilitySupport)},deduceModelPosition:(e,t,i)=>this._context.viewModel.deduceModelPositionRelativeToViewPosition(e,t,i)},S=this._register(new c.M0(this.textArea.domNode));this._textAreaInput=this._register(new c.No(w,S,r.OS,{isAndroid:n.m0,isChrome:n.H8,isFirefox:n.gm,isSafari:n.nr})),this._register(this._textAreaInput.onKeyDown((e=>{this._viewController.emitKeyDown(e)}))),this._register(this._textAreaInput.onKeyUp((e=>{this._viewController.emitKeyUp(e)}))),this._register(this._textAreaInput.onPaste((e=>{let t=!1,i=null,o=null;e.metadata&&(t=this._emptySelectionClipboard&&!!e.metadata.isFromEmptySelection,i="undefined"!==typeof e.metadata.multicursorText?e.metadata.multicursorText:null,o=e.metadata.mode),this._viewController.paste(e.text,t,i,o)}))),this._register(this._textAreaInput.onCut((()=>{this._viewController.cut()}))),this._register(this._textAreaInput.onType((e=>{e.replacePrevCharCnt||e.replaceNextCharCnt||e.positionDelta?(u.Hf&&console.log(" => compositionType: <<".concat(e.text,">>, ").concat(e.replacePrevCharCnt,", ").concat(e.replaceNextCharCnt,", ").concat(e.positionDelta)),this._viewController.compositionType(e.text,e.replacePrevCharCnt,e.replaceNextCharCnt,e.positionDelta)):(u.Hf&&console.log(" => type: <<".concat(e.text,">>")),this._viewController.type(e.text))}))),this._register(this._textAreaInput.onSelectionChangeRequest((e=>{this._viewController.setSelection(e)}))),this._register(this._textAreaInput.onCompositionStart((e=>{const t=this.textArea.domNode,i=this._modelSelections[0],{distanceToModelLineStart:o,widthOfHiddenTextBefore:n}=(()=>{const e=t.value.substring(0,Math.min(t.selectionStart,t.selectionEnd)),o=e.lastIndexOf("\n"),n=e.substring(o+1),s=n.lastIndexOf("\t"),r=n.length-s-1,a=i.getStartPosition(),c=Math.min(a.column-1,r),u=a.column-1-c,h=n.substring(0,n.length-c),{tabSize:d}=this._context.viewModel.model.getOptions(),p=function(e,t,i,o){if(0===t.length)return 0;const n=e.createElement("div");n.style.position="absolute",n.style.top="-50000px",n.style.width="50000px";const s=e.createElement("span");(0,l.M)(s,i),s.style.whiteSpace="pre",s.style.tabSize="".concat(o*i.spaceWidth,"px"),s.append(t),n.appendChild(s),e.body.appendChild(n);const r=s.offsetWidth;return e.body.removeChild(n),r}(this.textArea.domNode.ownerDocument,h,this._fontInfo,d);return{distanceToModelLineStart:u,widthOfHiddenTextBefore:p}})(),{distanceToModelLineEnd:s}=(()=>{const e=t.value.substring(Math.max(t.selectionStart,t.selectionEnd)),o=e.indexOf("\n"),n=-1===o?e:e.substring(0,o),s=n.indexOf("\t"),r=-1===s?n.length:n.length-s-1,a=i.getEndPosition(),l=Math.min(this._context.viewModel.model.getLineMaxColumn(a.lineNumber)-a.column,r);return{distanceToModelLineEnd:this._context.viewModel.model.getLineMaxColumn(a.lineNumber)-a.column-l}})();this._context.viewModel.revealRange("keyboard",!0,f.Q.fromPositions(this._selections[0].getStartPosition()),0,1),this._visibleTextArea=new T(this._context,i.startLineNumber,o,n,s),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render(),this.textArea.setClassName("inputarea ".concat(v.S," ime-input")),this._viewController.compositionStart(),this._context.viewModel.onCompositionStart()}))),this._register(this._textAreaInput.onCompositionUpdate((e=>{this._visibleTextArea&&(this._visibleTextArea.prepareRender(this._visibleRangeProvider),this._render())}))),this._register(this._textAreaInput.onCompositionEnd((()=>{this._visibleTextArea=null,this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off"),this._render(),this.textArea.setClassName("inputarea ".concat(v.S)),this._viewController.compositionEnd(),this._context.viewModel.onCompositionEnd()}))),this._register(this._textAreaInput.onFocus((()=>{this._context.viewModel.setHasFocus(!0)}))),this._register(this._textAreaInput.onBlur((()=>{this._context.viewModel.setHasFocus(!1)}))),this._register(y.M.onDidChange((()=>{this._ensureReadOnlyAttribute()})))}writeScreenReaderContent(e){this._textAreaInput.writeScreenReaderContent(e)}dispose(){super.dispose()}_getAndroidWordAtPosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=(0,m.i)('`~!@#$%^&*()-=+[{]}\\|;:",.<>/?');let o=!0,n=e.column,s=!0,r=e.column,a=0;for(;a<50&&(o||s);){if(o&&n<=1&&(o=!1),o){const e=t.charCodeAt(n-2);0!==i.get(e)?o=!1:n--}if(s&&r>t.length&&(s=!1),s){const e=t.charCodeAt(r-1);0!==i.get(e)?s=!1:r++}a++}return[t.substring(n-1,r-1),e.column-n]}_getWordBeforePosition(e){const t=this._context.viewModel.getLineContent(e.lineNumber),i=(0,m.i)(this._context.configuration.options.get(129));let o=e.column,n=0;for(;o>1;){const s=t.charCodeAt(o-2);if(0!==i.get(s)||n>50)return t.substring(o-1,e.column-1);n++,o--}return t.substring(0,e.column-1)}_getCharacterBeforePosition(e){if(e.column>1){const t=this._context.viewModel.getLineContent(e.lineNumber).charAt(e.column-2);if(!a.pc(t.charCodeAt(0)))return t}return""}_getAriaLabel(e){var t,i,n;if(1===e.get(2)){const e=null===(t=this._keybindingService.lookupKeybinding("editor.action.toggleScreenReaderAccessibilityMode"))||void 0===t?void 0:t.getAriaLabel(),s=null===(i=this._keybindingService.lookupKeybinding("workbench.action.showCommands"))||void 0===i?void 0:i.getAriaLabel(),r=null===(n=this._keybindingService.lookupKeybinding("workbench.action.openGlobalKeybindings"))||void 0===n?void 0:n.getAriaLabel(),a=o.kg("accessibilityModeOff","The editor is not accessible at this time.");return e?o.kg("accessibilityOffAriaLabel","{0} To enable screen reader optimized mode, use {1}",a,e):s?o.kg("accessibilityOffAriaLabelNoKb","{0} To enable screen reader optimized mode, open the quick pick with {1} and run the command Toggle Screen Reader Accessibility Mode, which is currently not triggerable via keyboard.",a,s):r?o.kg("accessibilityOffAriaLabelNoKbs","{0} Please assign a keybinding for the command Toggle Screen Reader Accessibility Mode by accessing the keybindings editor with {1} and run it.",a,r):a}return e.get(4)}_setAccessibilityOptions(e){this._accessibilitySupport=e.get(2);const t=e.get(3);2===this._accessibilitySupport&&t===g.qB.accessibilityPageSize.defaultValue?this._accessibilityPageSize=500:this._accessibilityPageSize=t;const i=e.get(143).wrappingColumn;if(-1!==i&&1!==this._accessibilitySupport){const t=e.get(50);this._textAreaWrapping=!0,this._textAreaWidth=Math.round(i*t.typicalHalfwidthCharacterWidth)}else this._textAreaWrapping=!1,this._textAreaWidth=M?0:1}onConfigurationChanged(e){const t=this._context.configuration.options,i=t.get(143);this._setAccessibilityOptions(t),this._contentLeft=i.contentLeft,this._contentWidth=i.contentWidth,this._contentHeight=i.height,this._fontInfo=t.get(50),this._lineHeight=t.get(66),this._emptySelectionClipboard=t.get(37),this._copyWithSyntaxHighlighting=t.get(25),this.textArea.setAttribute("wrap",this._textAreaWrapping&&!this._visibleTextArea?"on":"off");const{tabSize:o}=this._context.viewModel.model.getOptions();return this.textArea.domNode.style.tabSize="".concat(o*this._fontInfo.spaceWidth,"px"),this.textArea.setAttribute("aria-label",this._getAriaLabel(t)),this.textArea.setAttribute("aria-required",t.get(5)?"true":"false"),this.textArea.setAttribute("tabindex",String(t.get(123))),(e.hasChanged(34)||e.hasChanged(90))&&this._ensureReadOnlyAttribute(),e.hasChanged(2)&&this._textAreaInput.writeScreenReaderContent("strategy changed"),!0}onCursorStateChanged(e){return this._selections=e.selections.slice(0),this._modelSelections=e.modelSelections.slice(0),this._textAreaInput.writeScreenReaderContent("selection changed"),!0}onDecorationsChanged(e){return!0}onFlushed(e){return!0}onLinesChanged(e){return!0}onLinesDeleted(e){return!0}onLinesInserted(e){return!0}onScrollChanged(e){return this._scrollLeft=e.scrollLeft,this._scrollTop=e.scrollTop,!0}onZonesChanged(e){return!0}isFocused(){return this._textAreaInput.isFocused()}focusTextArea(){this._textAreaInput.focusTextArea()}getLastRenderData(){return this._lastRenderPosition}setAriaOptions(e){e.activeDescendant?(this.textArea.setAttribute("aria-haspopup","true"),this.textArea.setAttribute("aria-autocomplete","list"),this.textArea.setAttribute("aria-activedescendant",e.activeDescendant)):(this.textArea.setAttribute("aria-haspopup","false"),this.textArea.setAttribute("aria-autocomplete","both"),this.textArea.removeAttribute("aria-activedescendant")),e.role&&this.textArea.setAttribute("role",e.role)}_ensureReadOnlyAttribute(){const e=this._context.configuration.options;!y.M.enabled||e.get(34)&&e.get(90)?this.textArea.setAttribute("readonly","true"):this.textArea.removeAttribute("readonly")}prepareRender(e){var t;this._primaryCursorPosition=new _.y(this._selections[0].positionLineNumber,this._selections[0].positionColumn),this._primaryCursorVisibleRange=e.visibleRangeForPosition(this._primaryCursorPosition),null===(t=this._visibleTextArea)||void 0===t||t.prepareRender(e)}render(e){this._textAreaInput.writeScreenReaderContent("render"),this._render()}_render(){var e;if(this._visibleTextArea){const e=this._visibleTextArea.visibleTextareaStart,t=this._visibleTextArea.visibleTextareaEnd,i=this._visibleTextArea.startPosition,o=this._visibleTextArea.endPosition;if(i&&o&&e&&t&&t.left>=this._scrollLeft&&e.left<=this._scrollLeft+this._contentWidth){const n=this._context.viewLayout.getVerticalOffsetForLineNumber(this._primaryCursorPosition.lineNumber)-this._scrollTop,s=this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));let r=this._visibleTextArea.widthOfHiddenLineTextBefore,a=this._contentLeft+e.left-this._scrollLeft,l=t.left-e.left+1;if(a<this._contentLeft){const e=this._contentLeft-a;a+=e,r+=e,l-=e}l>this._contentWidth&&(l=this._contentWidth);const c=this._context.viewModel.getViewLineData(i.lineNumber),u=c.tokens.findTokenIndexAtOffset(i.column-1),h=u===c.tokens.findTokenIndexAtOffset(o.column-1),d=this._visibleTextArea.definePresentation(h?c.tokens.getPresentation(u):null);this.textArea.domNode.scrollTop=s*this._lineHeight,this.textArea.domNode.scrollLeft=r,this._doRender({lastRenderPosition:null,top:n,left:a,width:l,height:this._lineHeight,useCover:!1,color:(w.dG.getColorMap()||[])[d.foreground],italic:d.italic,bold:d.bold,underline:d.underline,strikethrough:d.strikethrough})}return}if(!this._primaryCursorVisibleRange)return void this._renderAtTopLeft();const t=this._contentLeft+this._primaryCursorVisibleRange.left-this._scrollLeft;if(t<this._contentLeft||t>this._contentLeft+this._contentWidth)return void this._renderAtTopLeft();const i=this._context.viewLayout.getVerticalOffsetForLineNumber(this._selections[0].positionLineNumber)-this._scrollTop;if(i<0||i>this._contentHeight)this._renderAtTopLeft();else if(r.zx){this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:this._lineHeight,useCover:!1}),this.textArea.domNode.scrollLeft=this._primaryCursorVisibleRange.left;const o=null!==(e=this._textAreaInput.textAreaState.newlineCountBeforeSelection)&&void 0!==e?e:this._newlinecount(this.textArea.domNode.value.substr(0,this.textArea.domNode.selectionStart));this.textArea.domNode.scrollTop=o*this._lineHeight}else this._doRender({lastRenderPosition:this._primaryCursorPosition,top:i,left:this._textAreaWrapping?this._contentLeft:t,width:this._textAreaWidth,height:M?0:1,useCover:!1})}_newlinecount(e){let t=0,i=-1;for(;;){if(i=e.indexOf("\n",i+1),-1===i)break;t++}return t}_renderAtTopLeft(){this._doRender({lastRenderPosition:null,top:0,left:0,width:this._textAreaWidth,height:M?0:1,useCover:!0})}_doRender(e){this._lastRenderPosition=e.lastRenderPosition;const t=this.textArea,i=this.textAreaCover;(0,l.M)(t,this._fontInfo),t.setTop(e.top),t.setLeft(e.left),t.setWidth(e.width),t.setHeight(e.height),t.setColor(e.color?S.Q1.Format.CSS.formatHex(e.color):""),t.setFontStyle(e.italic?"italic":""),e.bold&&t.setFontWeight("bold"),t.setTextDecoration("".concat(e.underline?" underline":"").concat(e.strikethrough?" line-through":"")),i.setTop(e.useCover?e.top:0),i.setLeft(e.useCover?e.left:0),i.setWidth(e.useCover?e.width:0),i.setHeight(e.useCover?e.height:0);const o=this._context.configuration.options;o.get(57)?i.setClassName("monaco-editor-background textAreaCover "+p.R.OUTER_CLASS_NAME):0!==o.get(67).renderType?i.setClassName("monaco-editor-background textAreaCover "+d.h.CLASS_NAME):i.setClassName("monaco-editor-background textAreaCover")}};A=b([E(3,x.b)],A)},9984:(e,t,i)=>{i.d(t,{$D:()=>o,Eq:()=>_,M0:()=>S,Mz:()=>w,No:()=>v,bs:()=>f});var o,n=i(49685),s=i(32605),r=i(59725),a=i(46250),l=i(49103),c=i(73990),u=i(48250),h=i(87766),d=i(70040),p=i(12780),g=i(18625),m=i(5190);!function(e){e.Tap="-monaco-textarea-synthetic-tap"}(o||(o={}));const _={forceCopyWithSyntaxHighlighting:!1};class f{constructor(){this._lastState=null}set(e,t){this._lastState={lastCopiedValue:e,data:t}}get(e){return this._lastState&&this._lastState.lastCopiedValue===e?this._lastState.data:(this._lastState=null,null)}}f.INSTANCE=new f;class C{constructor(){this._lastTypeTextLength=0}handleCompositionUpdate(e){const t={text:e=e||"",replacePrevCharCnt:this._lastTypeTextLength,replaceNextCharCnt:0,positionDelta:0};return this._lastTypeTextLength=e.length,t}}class v extends h.jG{get textAreaState(){return this._textAreaState}constructor(e,t,i,o){super(),this._host=e,this._textArea=t,this._OS=i,this._browser=o,this._onFocus=this._register(new u.vl),this.onFocus=this._onFocus.event,this._onBlur=this._register(new u.vl),this.onBlur=this._onBlur.event,this._onKeyDown=this._register(new u.vl),this.onKeyDown=this._onKeyDown.event,this._onKeyUp=this._register(new u.vl),this.onKeyUp=this._onKeyUp.event,this._onCut=this._register(new u.vl),this.onCut=this._onCut.event,this._onPaste=this._register(new u.vl),this.onPaste=this._onPaste.event,this._onType=this._register(new u.vl),this.onType=this._onType.event,this._onCompositionStart=this._register(new u.vl),this.onCompositionStart=this._onCompositionStart.event,this._onCompositionUpdate=this._register(new u.vl),this.onCompositionUpdate=this._onCompositionUpdate.event,this._onCompositionEnd=this._register(new u.vl),this.onCompositionEnd=this._onCompositionEnd.event,this._onSelectionChangeRequest=this._register(new u.vl),this.onSelectionChangeRequest=this._onSelectionChangeRequest.event,this._asyncTriggerCut=this._register(new c.uC((()=>this._onCut.fire()),0)),this._asyncFocusGainWriteScreenReaderContent=this._register(new c.uC((()=>this.writeScreenReaderContent("asyncFocusGain")),0)),this._textAreaState=g._O.EMPTY,this._selectionChangeListener=null,this.writeScreenReaderContent("ctor"),this._hasFocus=!1,this._currentComposition=null;let n=null;this._register(this._textArea.onKeyDown((e=>{const t=new a.Z(e);(114===t.keyCode||this._currentComposition&&1===t.keyCode)&&t.stopPropagation(),t.equals(9)&&t.preventDefault(),n=t,this._onKeyDown.fire(t)}))),this._register(this._textArea.onKeyUp((e=>{const t=new a.Z(e);this._onKeyUp.fire(t)}))),this._register(this._textArea.onCompositionStart((e=>{g.Hf&&console.log("[compositionstart]",e);const t=new C;if(this._currentComposition)this._currentComposition=t;else{if(this._currentComposition=t,2===this._OS&&n&&n.equals(114)&&this._textAreaState.selectionStart===this._textAreaState.selectionEnd&&this._textAreaState.selectionStart>0&&this._textAreaState.value.substr(this._textAreaState.selectionStart-1,1)===e.data&&("ArrowRight"===n.code||"ArrowLeft"===n.code))return g.Hf&&console.log("[compositionstart] Handling long press case on macOS + arrow key",e),t.handleCompositionUpdate("x"),void this._onCompositionStart.fire({data:e.data});this._browser.isAndroid,this._onCompositionStart.fire({data:e.data})}}))),this._register(this._textArea.onCompositionUpdate((e=>{g.Hf&&console.log("[compositionupdate]",e);const t=this._currentComposition;if(!t)return;if(this._browser.isAndroid){const t=g._O.readFromTextArea(this._textArea,this._textAreaState),i=g._O.deduceAndroidCompositionInput(this._textAreaState,t);return this._textAreaState=t,this._onType.fire(i),void this._onCompositionUpdate.fire(e)}const i=t.handleCompositionUpdate(e.data);this._textAreaState=g._O.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(i),this._onCompositionUpdate.fire(e)}))),this._register(this._textArea.onCompositionEnd((e=>{g.Hf&&console.log("[compositionend]",e);const t=this._currentComposition;if(!t)return;if(this._currentComposition=null,this._browser.isAndroid){const e=g._O.readFromTextArea(this._textArea,this._textAreaState),t=g._O.deduceAndroidCompositionInput(this._textAreaState,e);return this._textAreaState=e,this._onType.fire(t),void this._onCompositionEnd.fire()}const i=t.handleCompositionUpdate(e.data);this._textAreaState=g._O.readFromTextArea(this._textArea,this._textAreaState),this._onType.fire(i),this._onCompositionEnd.fire()}))),this._register(this._textArea.onInput((e=>{if(g.Hf&&console.log("[input]",e),this._textArea.setIgnoreSelectionChangeTime("received input event"),this._currentComposition)return;const t=g._O.readFromTextArea(this._textArea,this._textAreaState),i=g._O.deduceInput(this._textAreaState,t,2===this._OS);(0!==i.replacePrevCharCnt||1!==i.text.length||!p.pc(i.text.charCodeAt(0))&&127!==i.text.charCodeAt(0))&&(this._textAreaState=t,""===i.text&&0===i.replacePrevCharCnt&&0===i.replaceNextCharCnt&&0===i.positionDelta||this._onType.fire(i))}))),this._register(this._textArea.onCut((e=>{this._textArea.setIgnoreSelectionChangeTime("received cut event"),this._ensureClipboardGetsEditorSelection(e),this._asyncTriggerCut.schedule()}))),this._register(this._textArea.onCopy((e=>{this._ensureClipboardGetsEditorSelection(e)}))),this._register(this._textArea.onPaste((e=>{if(this._textArea.setIgnoreSelectionChangeTime("received paste event"),e.preventDefault(),!e.clipboardData)return;let[t,i]=w.getTextData(e.clipboardData);t&&(i=i||f.INSTANCE.get(t),this._onPaste.fire({text:t,metadata:i}))}))),this._register(this._textArea.onFocus((()=>{const e=this._hasFocus;this._setHasFocus(!0),this._browser.isSafari&&!e&&this._hasFocus&&this._asyncFocusGainWriteScreenReaderContent.schedule()}))),this._register(this._textArea.onBlur((()=>{this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("blurWithoutCompositionEnd"),this._onCompositionEnd.fire()),this._setHasFocus(!1)}))),this._register(this._textArea.onSyntheticTap((()=>{this._browser.isAndroid&&this._currentComposition&&(this._currentComposition=null,this.writeScreenReaderContent("tapWithoutCompositionEnd"),this._onCompositionEnd.fire())})))}_installSelectionChangeListener(){let e=0;return s.ko(this._textArea.ownerDocument,"selectionchange",(t=>{if(l.p.onSelectionChange(),!this._hasFocus)return;if(this._currentComposition)return;if(!this._browser.isChrome)return;const i=Date.now(),o=i-e;if(e=i,o<5)return;const n=i-this._textArea.getIgnoreSelectionChangeTime();if(this._textArea.resetSelectionChangeTime(),n<100)return;if(!this._textAreaState.selection)return;const s=this._textArea.getValue();if(this._textAreaState.value!==s)return;const r=this._textArea.getSelectionStart(),a=this._textArea.getSelectionEnd();if(this._textAreaState.selectionStart===r&&this._textAreaState.selectionEnd===a)return;const c=this._textAreaState.deduceEditorPosition(r),u=this._host.deduceModelPosition(c[0],c[1],c[2]),h=this._textAreaState.deduceEditorPosition(a),d=this._host.deduceModelPosition(h[0],h[1],h[2]),p=new m.L(u.lineNumber,u.column,d.lineNumber,d.column);this._onSelectionChangeRequest.fire(p)}))}dispose(){super.dispose(),this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null)}focusTextArea(){this._setHasFocus(!0),this.refreshFocusState()}isFocused(){return this._hasFocus}refreshFocusState(){this._setHasFocus(this._textArea.hasFocus())}_setHasFocus(e){this._hasFocus!==e&&(this._hasFocus=e,this._selectionChangeListener&&(this._selectionChangeListener.dispose(),this._selectionChangeListener=null),this._hasFocus&&(this._selectionChangeListener=this._installSelectionChangeListener()),this._hasFocus&&this.writeScreenReaderContent("focusgain"),this._hasFocus?this._onFocus.fire():this._onBlur.fire())}_setAndWriteTextAreaState(e,t){this._hasFocus||(t=t.collapseSelection()),t.writeToTextArea(e,this._textArea,this._hasFocus),this._textAreaState=t}writeScreenReaderContent(e){this._currentComposition||this._setAndWriteTextAreaState(e,this._host.getScreenReaderContent())}_ensureClipboardGetsEditorSelection(e){const t=this._host.getDataToCopy(),i={version:1,isFromEmptySelection:t.isFromEmptySelection,multicursorText:t.multicursorText,mode:t.mode};f.INSTANCE.set(this._browser.isFirefox?t.text.replace(/\r\n/g,"\n"):t.text,i),e.preventDefault(),e.clipboardData&&w.setTextData(e.clipboardData,t.text,t.html,i)}}const w={getTextData(e){const t=e.getData(d.K.text);let i=null;const o=e.getData("vscode-editor-data");if("string"===typeof o)try{i=JSON.parse(o),1!==i.version&&(i=null)}catch(n){}if(0===t.length&&null===i&&e.files.length>0){return[Array.prototype.slice.call(e.files,0).map((e=>e.name)).join("\n"),null]}return[t,i]},setTextData(e,t,i,o){e.setData(d.K.text,t),"string"===typeof i&&e.setData("text/html",i),e.setData("vscode-editor-data",JSON.stringify(o))}};class S extends h.jG{get ownerDocument(){return this._actual.ownerDocument}constructor(e){super(),this._actual=e,this.onKeyDown=this._register(new r.f(this._actual,"keydown")).event,this.onKeyUp=this._register(new r.f(this._actual,"keyup")).event,this.onCompositionStart=this._register(new r.f(this._actual,"compositionstart")).event,this.onCompositionUpdate=this._register(new r.f(this._actual,"compositionupdate")).event,this.onCompositionEnd=this._register(new r.f(this._actual,"compositionend")).event,this.onBeforeInput=this._register(new r.f(this._actual,"beforeinput")).event,this.onInput=this._register(new r.f(this._actual,"input")).event,this.onCut=this._register(new r.f(this._actual,"cut")).event,this.onCopy=this._register(new r.f(this._actual,"copy")).event,this.onPaste=this._register(new r.f(this._actual,"paste")).event,this.onFocus=this._register(new r.f(this._actual,"focus")).event,this.onBlur=this._register(new r.f(this._actual,"blur")).event,this._onSyntheticTap=this._register(new u.vl),this.onSyntheticTap=this._onSyntheticTap.event,this._ignoreSelectionChangeTime=0,this._register(this.onKeyDown((()=>l.p.onKeyDown()))),this._register(this.onBeforeInput((()=>l.p.onBeforeInput()))),this._register(this.onInput((()=>l.p.onInput()))),this._register(this.onKeyUp((()=>l.p.onKeyUp()))),this._register(s.ko(this._actual,o.Tap,(()=>this._onSyntheticTap.fire())))}hasFocus(){const e=s.jG(this._actual);return e?e.activeElement===this._actual:!!s.qD(this._actual)&&this._actual.ownerDocument.activeElement===this._actual}setIgnoreSelectionChangeTime(e){this._ignoreSelectionChangeTime=Date.now()}getIgnoreSelectionChangeTime(){return this._ignoreSelectionChangeTime}resetSelectionChangeTime(){this._ignoreSelectionChangeTime=0}getValue(){return this._actual.value}setValue(e,t){const i=this._actual;i.value!==t&&(this.setIgnoreSelectionChangeTime("setValue"),i.value=t)}getSelectionStart(){return"backward"===this._actual.selectionDirection?this._actual.selectionEnd:this._actual.selectionStart}getSelectionEnd(){return"backward"===this._actual.selectionDirection?this._actual.selectionStart:this._actual.selectionEnd}setSelectionRange(e,t,i){const o=this._actual;let r=null;const a=s.jG(o);r=a?a.activeElement:o.ownerDocument.activeElement;const l=r===o,c=o.selectionStart,u=o.selectionEnd;if(l&&c===t&&u===i)n.gm&&window.parent!==window&&o.focus();else{if(l)return this.setIgnoreSelectionChangeTime("setSelectionRange"),o.setSelectionRange(t,i),void(n.gm&&window.parent!==window&&o.focus());try{const e=s.zK(o);this.setIgnoreSelectionChangeTime("setSelectionRange"),o.focus(),o.setSelectionRange(t,i),s.wk(o,e)}catch(h){}}}}},18625:(e,t,i)=>{i.d(t,{Al:()=>a,Hf:()=>s,_O:()=>r});var o=i(12780),n=i(99005);const s=!1;class r{constructor(e,t,i,o,n){this.value=e,this.selectionStart=t,this.selectionEnd=i,this.selection=o,this.newlineCountBeforeSelection=n}toString(){return"[ <".concat(this.value,">, selectionStart: ").concat(this.selectionStart,", selectionEnd: ").concat(this.selectionEnd,"]")}static readFromTextArea(e,t){const i=e.getValue(),o=e.getSelectionStart(),n=e.getSelectionEnd();let s;if(t){i.substring(0,o)===t.value.substring(0,t.selectionStart)&&(s=t.newlineCountBeforeSelection)}return new r(i,o,n,null,s)}collapseSelection(){return this.selectionStart===this.value.length?this:new r(this.value,this.value.length,this.value.length,null,void 0)}writeToTextArea(e,t,i){s&&console.log("writeToTextArea ".concat(e,": ").concat(this.toString())),t.setValue(e,this.value),i&&t.setSelectionRange(e,this.selectionStart,this.selectionEnd)}deduceEditorPosition(e){var t,i,o,n,s,r,a,l;if(e<=this.selectionStart){const o=this.value.substring(e,this.selectionStart);return this._finishDeduceEditorPosition(null!==(i=null===(t=this.selection)||void 0===t?void 0:t.getStartPosition())&&void 0!==i?i:null,o,-1)}if(e>=this.selectionEnd){const t=this.value.substring(this.selectionEnd,e);return this._finishDeduceEditorPosition(null!==(n=null===(o=this.selection)||void 0===o?void 0:o.getEndPosition())&&void 0!==n?n:null,t,1)}const c=this.value.substring(this.selectionStart,e);if(-1===c.indexOf(String.fromCharCode(8230)))return this._finishDeduceEditorPosition(null!==(r=null===(s=this.selection)||void 0===s?void 0:s.getStartPosition())&&void 0!==r?r:null,c,1);const u=this.value.substring(e,this.selectionEnd);return this._finishDeduceEditorPosition(null!==(l=null===(a=this.selection)||void 0===a?void 0:a.getEndPosition())&&void 0!==l?l:null,u,-1)}_finishDeduceEditorPosition(e,t,i){let o=0,n=-1;for(;-1!==(n=t.indexOf("\n",n+1));)o++;return[e,i*t.length,o]}static deduceInput(e,t,i){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};s&&(console.log("------------------------deduceInput"),console.log("PREVIOUS STATE: ".concat(e.toString())),console.log("CURRENT STATE: ".concat(t.toString())));const n=Math.min(o.Qp(e.value,t.value),e.selectionStart,t.selectionStart),r=Math.min(o.Vi(e.value,t.value),e.value.length-e.selectionEnd,t.value.length-t.selectionEnd),a=e.value.substring(n,e.value.length-r),l=t.value.substring(n,t.value.length-r),c=e.selectionStart-n,u=e.selectionEnd-n,h=t.selectionStart-n,d=t.selectionEnd-n;if(s&&(console.log("AFTER DIFFING PREVIOUS STATE: <".concat(a,">, selectionStart: ").concat(c,", selectionEnd: ").concat(u)),console.log("AFTER DIFFING CURRENT STATE: <".concat(l,">, selectionStart: ").concat(h,", selectionEnd: ").concat(d))),h===d){const t=e.selectionStart-n;return s&&console.log("REMOVE PREVIOUS: ".concat(t," chars")),{text:l,replacePrevCharCnt:t,replaceNextCharCnt:0,positionDelta:0}}return{text:l,replacePrevCharCnt:u-c,replaceNextCharCnt:0,positionDelta:0}}static deduceAndroidCompositionInput(e,t){if(!e)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:0};if(s&&(console.log("------------------------deduceAndroidCompositionInput"),console.log("PREVIOUS STATE: ".concat(e.toString())),console.log("CURRENT STATE: ".concat(t.toString()))),e.value===t.value)return{text:"",replacePrevCharCnt:0,replaceNextCharCnt:0,positionDelta:t.selectionEnd-e.selectionEnd};const i=Math.min(o.Qp(e.value,t.value),e.selectionEnd),n=Math.min(o.Vi(e.value,t.value),e.value.length-e.selectionEnd),r=e.value.substring(i,e.value.length-n),a=t.value.substring(i,t.value.length-n),l=e.selectionStart-i,c=e.selectionEnd-i,u=t.selectionStart-i,h=t.selectionEnd-i;return s&&(console.log("AFTER DIFFING PREVIOUS STATE: <".concat(r,">, selectionStart: ").concat(l,", selectionEnd: ").concat(c)),console.log("AFTER DIFFING CURRENT STATE: <".concat(a,">, selectionStart: ").concat(u,", selectionEnd: ").concat(h))),{text:a,replacePrevCharCnt:c,replaceNextCharCnt:r.length-c,positionDelta:h-a.length}}}r.EMPTY=new r("",0,0,null,void 0);class a{static _getPageOfLine(e,t){return Math.floor((e-1)/t)}static _getRangeForPage(e,t){const i=e*t,o=i+1,s=i+t;return new n.Q(o,1,s+1,1)}static fromEditorSelection(e,t,i,o){const s=500,l=a._getPageOfLine(t.startLineNumber,i),c=a._getRangeForPage(l,i),u=a._getPageOfLine(t.endLineNumber,i),h=a._getRangeForPage(u,i);let d=c.intersectRanges(new n.Q(1,1,t.startLineNumber,t.startColumn));if(o&&e.getValueLengthInRange(d,1)>s){const t=e.modifyPosition(d.getEndPosition(),-500);d=n.Q.fromPositions(t,d.getEndPosition())}const p=e.getValueInRange(d,1),g=e.getLineCount(),m=e.getLineMaxColumn(g);let _=h.intersectRanges(new n.Q(t.endLineNumber,t.endColumn,g,m));if(o&&e.getValueLengthInRange(_,1)>s){const t=e.modifyPosition(_.getStartPosition(),s);_=n.Q.fromPositions(_.getStartPosition(),t)}const f=e.getValueInRange(_,1);let C;if(l===u||l+1===u)C=e.getValueInRange(t,1);else{const i=c.intersectRanges(t),o=h.intersectRanges(t);C=e.getValueInRange(i,1)+String.fromCharCode(8230)+e.getValueInRange(o,1)}return o&&C.length>1e3&&(C=C.substring(0,s)+String.fromCharCode(8230)+C.substring(C.length-s,C.length)),new r(p+C+f,p.length,p.length+C.length,t,d.endLineNumber-d.startLineNumber)}}},49300:(e,t,i)=>{i.d(t,{QM:()=>x,Yh:()=>A});var o=i(51413),n=i(49685),s=i(32031),r=i(82224),a=i(30050),l=i(32101),c=i(22003),u=i(97447),h=i(96642),d=i(11288),p=i(30756),g=i(23525),m=i(99005),_=i(72330),f=i(39686),C=i(1957),v=i(32605);class w extends a.DX{runEditorCommand(e,t,i){const o=t._getViewModel();o&&this.runCoreEditorCommand(o,i||{})}}var S,y,x;!function(e){e.description={description:"Scroll editor in the given direction",args:[{name:"Editor scroll argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'to': A mandatory direction value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'up', 'down'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'by': Unit to move. Default is computed based on 'to' value.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'line', 'wrappedLine', 'page', 'halfPage', 'editor'\n\t\t\t\t\t\t```\n\t\t\t\t\t* 'value': Number of units to move. Default is '1'.\n\t\t\t\t\t* 'revealCursor': If 'true' reveals the cursor if it is outside view port.\n\t\t\t\t",constraint:function(e){if(!s.Gv(e))return!1;const t=e;return!!s.Kg(t.to)&&(!(!s.b0(t.by)&&!s.Kg(t.by))&&(!(!s.b0(t.value)&&!s.Et(t.value))&&!(!s.b0(t.revealCursor)&&!s.Lm(t.revealCursor))))},schema:{type:"object",required:["to"],properties:{to:{type:"string",enum:["up","down"]},by:{type:"string",enum:["line","wrappedLine","page","halfPage","editor"]},value:{type:"number",default:1},revealCursor:{type:"boolean"}}}}]},e.RawDirection={Up:"up",Right:"right",Down:"down",Left:"left"},e.RawUnit={Line:"line",WrappedLine:"wrappedLine",Page:"page",HalfPage:"halfPage",Editor:"editor",Column:"column"},e.parse=function(t){let i,o;switch(t.to){case e.RawDirection.Up:i=1;break;case e.RawDirection.Right:i=2;break;case e.RawDirection.Down:i=3;break;case e.RawDirection.Left:i=4;break;default:return null}switch(t.by){case e.RawUnit.Line:o=1;break;case e.RawUnit.WrappedLine:o=2;break;case e.RawUnit.Page:o=3;break;case e.RawUnit.HalfPage:o=4;break;case e.RawUnit.Editor:o=5;break;case e.RawUnit.Column:o=6;break;default:o=2}return{direction:i,unit:o,value:Math.floor(t.value||1),revealCursor:!!t.revealCursor,select:!!t.select}}}(S||(S={})),function(e){e.description={description:"Reveal the given line at the given logical position",args:[{name:"Reveal line argument object",description:"Property-value pairs that can be passed through this argument:\n\t\t\t\t\t* 'lineNumber': A mandatory line number value.\n\t\t\t\t\t* 'at': Logical position at which line has to be revealed.\n\t\t\t\t\t\t```\n\t\t\t\t\t\t'top', 'center', 'bottom'\n\t\t\t\t\t\t```\n\t\t\t\t",constraint:function(e){if(!s.Gv(e))return!1;const t=e;return!(!s.Et(t.lineNumber)&&!s.Kg(t.lineNumber))&&!(!s.b0(t.at)&&!s.Kg(t.at))},schema:{type:"object",required:["lineNumber"],properties:{lineNumber:{type:["number","string"]},at:{type:"string",enum:["top","center","bottom"]}}}}]},e.RawAtArgument={Top:"top",Center:"center",Bottom:"bottom"}}(y||(y={}));class b{constructor(e){e.addImplementation(1e4,"code-editor",((e,t)=>{const i=e.get(l.T).getFocusedCodeEditor();return!(!i||!i.hasTextFocus())&&this._runEditorCommand(e,i,t)})),e.addImplementation(1e3,"generic-dom-input-textarea",((e,t)=>{const i=(0,v.bq)();return!!(i&&["input","textarea"].indexOf(i.tagName.toLowerCase())>=0)&&(this.runDOMCommand(i),!0)})),e.addImplementation(0,"generic-dom",((e,t)=>{const i=e.get(l.T).getActiveCodeEditor();return!!i&&(i.focus(),this._runEditorCommand(e,i,t))}))}_runEditorCommand(e,t,i){const o=this.runEditorCommand(e,t,i);return o||!0}}!function(e){class t extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){if(!t.position)return;e.model.pushStackElement();e.setCursorStates(t.source,3,[d.c.moveTo(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)])&&2!==t.revealType&&e.revealPrimaryCursor(t.source,!0,!0)}}e.MoveTo=(0,a.E_)(new t({id:"_moveTo",inSelectionMode:!1,precondition:void 0})),e.MoveToSelect=(0,a.E_)(new t({id:"_moveToSelect",inSelectionMode:!0,precondition:void 0}));class i extends w{runCoreEditorCommand(e,t){e.model.pushStackElement();const i=this._getColumnSelectResult(e,e.getPrimaryCursorState(),e.getCursorColumnSelectData(),t);null!==i&&(e.setCursorStates(t.source,3,i.viewStates.map((e=>u.MF.fromViewState(e)))),e.setCursorColumnSelectData({isReal:!0,fromViewLineNumber:i.fromLineNumber,fromViewVisualColumn:i.fromVisualColumn,toViewLineNumber:i.toLineNumber,toViewVisualColumn:i.toVisualColumn}),i.reversed?e.revealTopMostCursor(t.source):e.revealBottomMostCursor(t.source))}}e.ColumnSelect=(0,a.E_)(new class extends i{constructor(){super({id:"columnSelect",precondition:void 0})}_getColumnSelectResult(e,t,i,o){if("undefined"===typeof o.position||"undefined"===typeof o.viewPosition||"undefined"===typeof o.mouseColumn)return null;const n=e.model.validatePosition(o.position),s=e.coordinatesConverter.validateViewPosition(new g.y(o.viewPosition.lineNumber,o.viewPosition.column),n),r=o.doColumnSelect?i.fromViewLineNumber:s.lineNumber,a=o.doColumnSelect?i.fromViewVisualColumn:o.mouseColumn-1;return c.X.columnSelect(e.cursorConfig,e,r,a,s.lineNumber,o.mouseColumn-1)}}),e.CursorColumnSelectLeft=(0,a.E_)(new class extends i{constructor(){super({id:"cursorColumnSelectLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:3599,linux:{primary:0}}})}_getColumnSelectResult(e,t,i,o){return c.X.columnSelectLeft(e.cursorConfig,e,i)}}),e.CursorColumnSelectRight=(0,a.E_)(new class extends i{constructor(){super({id:"cursorColumnSelectRight",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:3601,linux:{primary:0}}})}_getColumnSelectResult(e,t,i,o){return c.X.columnSelectRight(e.cursorConfig,e,i)}});class s extends i{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,i,o){return c.X.columnSelectUp(e.cursorConfig,e,i,this._isPaged)}}e.CursorColumnSelectUp=(0,a.E_)(new s({isPaged:!1,id:"cursorColumnSelectUp",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:3600,linux:{primary:0}}})),e.CursorColumnSelectPageUp=(0,a.E_)(new s({isPaged:!0,id:"cursorColumnSelectPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:3595,linux:{primary:0}}}));class l extends i{constructor(e){super(e),this._isPaged=e.isPaged}_getColumnSelectResult(e,t,i,o){return c.X.columnSelectDown(e.cursorConfig,e,i,this._isPaged)}}e.CursorColumnSelectDown=(0,a.E_)(new l({isPaged:!1,id:"cursorColumnSelectDown",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:3602,linux:{primary:0}}})),e.CursorColumnSelectPageDown=(0,a.E_)(new l({isPaged:!0,id:"cursorColumnSelectPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:3596,linux:{primary:0}}}));class h extends w{constructor(){super({id:"cursorMove",precondition:void 0,description:d.S.description})}runCoreEditorCommand(e,t){const i=d.S.parse(t);i&&this._runCursorMove(e,t.source,i)}_runCursorMove(e,t,i){e.model.pushStackElement(),e.setCursorStates(t,3,h._move(e,e.getCursorStates(),i)),e.revealPrimaryCursor(t,!0)}static _move(e,t,i){const o=i.select,n=i.value;switch(i.direction){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 9:case 10:return d.c.simpleMove(e,t,i.direction,o,n,i.unit);case 11:case 13:case 12:case 14:return d.c.viewportMove(e,t,i.direction,o,n);default:return null}}}e.CursorMoveImpl=h,e.CursorMove=(0,a.E_)(new h);class p extends w{constructor(e){super(e),this._staticArgs=e.args}runCoreEditorCommand(e,t){let i=this._staticArgs;-1===this._staticArgs.value&&(i={direction:this._staticArgs.direction,unit:this._staticArgs.unit,select:this._staticArgs.select,value:t.pageSize||e.cursorConfig.pageSize}),e.model.pushStackElement(),e.setCursorStates(t.source,3,d.c.simpleMove(e,e.getCursorStates(),i.direction,i.select,i.value,i.unit)),e.revealPrimaryCursor(t.source,!0)}}e.CursorLeft=(0,a.E_)(new p({args:{direction:0,unit:0,select:!1,value:1},id:"cursorLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:15,mac:{primary:15,secondary:[288]}}})),e.CursorLeftSelect=(0,a.E_)(new p({args:{direction:0,unit:0,select:!0,value:1},id:"cursorLeftSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:1039}})),e.CursorRight=(0,a.E_)(new p({args:{direction:1,unit:0,select:!1,value:1},id:"cursorRight",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:17,mac:{primary:17,secondary:[292]}}})),e.CursorRightSelect=(0,a.E_)(new p({args:{direction:1,unit:0,select:!0,value:1},id:"cursorRightSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:1041}})),e.CursorUp=(0,a.E_)(new p({args:{direction:2,unit:2,select:!1,value:1},id:"cursorUp",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:16,mac:{primary:16,secondary:[302]}}})),e.CursorUpSelect=(0,a.E_)(new p({args:{direction:2,unit:2,select:!0,value:1},id:"cursorUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:1040,secondary:[3088],mac:{primary:1040},linux:{primary:1040}}})),e.CursorPageUp=(0,a.E_)(new p({args:{direction:2,unit:2,select:!1,value:-1},id:"cursorPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:11}})),e.CursorPageUpSelect=(0,a.E_)(new p({args:{direction:2,unit:2,select:!0,value:-1},id:"cursorPageUpSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:1035}})),e.CursorDown=(0,a.E_)(new p({args:{direction:3,unit:2,select:!1,value:1},id:"cursorDown",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:18,mac:{primary:18,secondary:[300]}}})),e.CursorDownSelect=(0,a.E_)(new p({args:{direction:3,unit:2,select:!0,value:1},id:"cursorDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:1042,secondary:[3090],mac:{primary:1042},linux:{primary:1042}}})),e.CursorPageDown=(0,a.E_)(new p({args:{direction:3,unit:2,select:!1,value:-1},id:"cursorPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:12}})),e.CursorPageDownSelect=(0,a.E_)(new p({args:{direction:3,unit:2,select:!0,value:-1},id:"cursorPageDownSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:1036}})),e.CreateCursor=(0,a.E_)(new class extends w{constructor(){super({id:"createCursor",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;let i;i=t.wholeLine?d.c.line(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition):d.c.moveTo(e,e.getPrimaryCursorState(),!1,t.position,t.viewPosition);const o=e.getCursorStates();if(o.length>1){const n=i.modelState?i.modelState.position:null,s=i.viewState?i.viewState.position:null;for(let i=0,r=o.length;i<r;i++){const r=o[i];if((!n||r.modelState.selection.containsPosition(n))&&(!s||r.viewState.selection.containsPosition(s)))return o.splice(i,1),e.model.pushStackElement(),void e.setCursorStates(t.source,3,o)}}o.push(i),e.model.pushStackElement(),e.setCursorStates(t.source,3,o)}}),e.LastCursorMoveToSelect=(0,a.E_)(new class extends w{constructor(){super({id:"_lastCursorMoveToSelect",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;const i=e.getLastAddedCursorIndex(),o=e.getCursorStates(),n=o.slice(0);n[i]=d.c.moveTo(e,o[i],!0,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,n)}});class f extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,d.c.moveToBeginningOfLine(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorHome=(0,a.E_)(new f({inSelectionMode:!1,id:"cursorHome",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:14,mac:{primary:14,secondary:[2063]}}})),e.CursorHomeSelect=(0,a.E_)(new f({inSelectionMode:!0,id:"cursorHomeSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:1038,mac:{primary:1038,secondary:[3087]}}}));class C extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e){const t=[];for(let i=0,o=e.length;i<o;i++){const o=e[i],n=o.modelState.position.lineNumber;t[i]=u.MF.fromModelState(o.modelState.move(this._inSelectionMode,n,1,0))}return t}}e.CursorLineStart=(0,a.E_)(new C({inSelectionMode:!1,id:"cursorLineStart",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:0,mac:{primary:287}}})),e.CursorLineStartSelect=(0,a.E_)(new C({inSelectionMode:!0,id:"cursorLineStartSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:0,mac:{primary:1311}}}));class v extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,d.c.moveToEndOfLine(e,e.getCursorStates(),this._inSelectionMode,t.sticky||!1)),e.revealPrimaryCursor(t.source,!0)}}e.CursorEnd=(0,a.E_)(new v({inSelectionMode:!1,id:"cursorEnd",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:_.R.textInputFocus,primary:13,mac:{primary:13,secondary:[2065]}},description:{description:"Go to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:o.kg("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}})),e.CursorEndSelect=(0,a.E_)(new v({inSelectionMode:!0,id:"cursorEndSelect",precondition:void 0,kbOpts:{args:{sticky:!1},weight:0,kbExpr:_.R.textInputFocus,primary:1037,mac:{primary:1037,secondary:[3089]}},description:{description:"Select to End",args:[{name:"args",schema:{type:"object",properties:{sticky:{description:o.kg("stickydesc","Stick to the end even when going to longer lines"),type:"boolean",default:!1}}}}]}}));class x extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,this._exec(e,e.getCursorStates())),e.revealPrimaryCursor(t.source,!0)}_exec(e,t){const i=[];for(let o=0,n=t.length;o<n;o++){const n=t[o],s=n.modelState.position.lineNumber,r=e.model.getLineMaxColumn(s);i[o]=u.MF.fromModelState(n.modelState.move(this._inSelectionMode,s,r,0))}return i}}e.CursorLineEnd=(0,a.E_)(new x({inSelectionMode:!1,id:"cursorLineEnd",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:0,mac:{primary:291}}})),e.CursorLineEndSelect=(0,a.E_)(new x({inSelectionMode:!0,id:"cursorLineEndSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:0,mac:{primary:1315}}}));class E extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,d.c.moveToBeginningOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorTop=(0,a.E_)(new E({inSelectionMode:!1,id:"cursorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:2062,mac:{primary:2064}}})),e.CursorTopSelect=(0,a.E_)(new E({inSelectionMode:!0,id:"cursorTopSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:3086,mac:{primary:3088}}}));class T extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,d.c.moveToEndOfBuffer(e,e.getCursorStates(),this._inSelectionMode)),e.revealPrimaryCursor(t.source,!0)}}e.CursorBottom=(0,a.E_)(new T({inSelectionMode:!1,id:"cursorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:2061,mac:{primary:2066}}})),e.CursorBottomSelect=(0,a.E_)(new T({inSelectionMode:!0,id:"cursorBottomSelect",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:3085,mac:{primary:3090}}}));class M extends w{constructor(){super({id:"editorScroll",precondition:void 0,description:S.description})}determineScrollMethod(e){return[6].includes(e.unit)&&[4,2].includes(e.direction)?this._runHorizontalEditorScroll.bind(this):[1,2,3,4,5,6].includes(e.unit)&&[1,3].includes(e.direction)?this._runVerticalEditorScroll.bind(this):null}runCoreEditorCommand(e,t){const i=S.parse(t);if(!i)return;const o=this.determineScrollMethod(i);o&&o(e,t.source,i)}_runVerticalEditorScroll(e,t,i){const o=this._computeDesiredScrollTop(e,i);if(i.revealCursor){const n=e.getCompletelyVisibleViewRangeAtScrollTop(o);e.setCursorStates(t,3,[d.c.findPositionInViewportIfOutside(e,e.getPrimaryCursorState(),n,i.select)])}e.viewLayout.setScrollPosition({scrollTop:o},0)}_computeDesiredScrollTop(e,t){if(1===t.unit){const i=e.viewLayout.getFutureViewport(),o=e.getCompletelyVisibleViewRangeAtScrollTop(i.top),n=e.coordinatesConverter.convertViewRangeToModelRange(o);let s;s=1===t.direction?Math.max(1,n.startLineNumber-t.value):Math.min(e.model.getLineCount(),n.startLineNumber+t.value);const r=e.coordinatesConverter.convertModelPositionToViewPosition(new g.y(s,1));return e.viewLayout.getVerticalOffsetForLineNumber(r.lineNumber)}if(5===t.unit){let i=0;return 3===t.direction&&(i=e.model.getLineCount()-e.cursorConfig.pageSize),e.viewLayout.getVerticalOffsetForLineNumber(i)}let i;i=3===t.unit?e.cursorConfig.pageSize*t.value:4===t.unit?Math.round(e.cursorConfig.pageSize/2)*t.value:t.value;const o=(1===t.direction?-1:1)*i;return e.viewLayout.getCurrentScrollTop()+o*e.cursorConfig.lineHeight}_runHorizontalEditorScroll(e,t,i){const o=this._computeDesiredScrollLeft(e,i);e.viewLayout.setScrollPosition({scrollLeft:o},0)}_computeDesiredScrollLeft(e,t){const i=(4===t.direction?-1:1)*t.value;return e.viewLayout.getCurrentScrollLeft()+i*e.cursorConfig.typicalHalfwidthCharacterWidth}}e.EditorScrollImpl=M,e.EditorScroll=(0,a.E_)(new M),e.ScrollLineUp=(0,a.E_)(new class extends w{constructor(){super({id:"scrollLineUp",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:2064,mac:{primary:267}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:S.RawDirection.Up,by:S.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollPageUp=(0,a.E_)(new class extends w{constructor(){super({id:"scrollPageUp",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:2059,win:{primary:523},linux:{primary:523}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:S.RawDirection.Up,by:S.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollEditorTop=(0,a.E_)(new class extends w{constructor(){super({id:"scrollEditorTop",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:S.RawDirection.Up,by:S.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollLineDown=(0,a.E_)(new class extends w{constructor(){super({id:"scrollLineDown",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:2066,mac:{primary:268}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:S.RawDirection.Down,by:S.RawUnit.WrappedLine,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollPageDown=(0,a.E_)(new class extends w{constructor(){super({id:"scrollPageDown",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:2060,win:{primary:524},linux:{primary:524}}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:S.RawDirection.Down,by:S.RawUnit.Page,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollEditorBottom=(0,a.E_)(new class extends w{constructor(){super({id:"scrollEditorBottom",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:S.RawDirection.Down,by:S.RawUnit.Editor,value:1,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollLeft=(0,a.E_)(new class extends w{constructor(){super({id:"scrollLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:S.RawDirection.Left,by:S.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:i.source})}}),e.ScrollRight=(0,a.E_)(new class extends w{constructor(){super({id:"scrollRight",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus}})}runCoreEditorCommand(t,i){e.EditorScroll.runCoreEditorCommand(t,{to:S.RawDirection.Right,by:S.RawUnit.Column,value:2,revealCursor:!1,select:!1,source:i.source})}});class A extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[d.c.word(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position)]),2!==t.revealType&&e.revealPrimaryCursor(t.source,!0,!0))}}e.WordSelect=(0,a.E_)(new A({inSelectionMode:!1,id:"_wordSelect",precondition:void 0})),e.WordSelectDrag=(0,a.E_)(new A({inSelectionMode:!0,id:"_wordSelectDrag",precondition:void 0})),e.LastCursorWordSelect=(0,a.E_)(new class extends w{constructor(){super({id:"lastCursorWordSelect",precondition:void 0})}runCoreEditorCommand(e,t){if(!t.position)return;const i=e.getLastAddedCursorIndex(),o=e.getCursorStates(),n=o.slice(0),s=o[i];n[i]=d.c.word(e,s,s.modelState.hasSelection(),t.position),e.model.pushStackElement(),e.setCursorStates(t.source,3,n)}});class L extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){t.position&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[d.c.line(e,e.getPrimaryCursorState(),this._inSelectionMode,t.position,t.viewPosition)]),2!==t.revealType&&e.revealPrimaryCursor(t.source,!1,!0))}}e.LineSelect=(0,a.E_)(new L({inSelectionMode:!1,id:"_lineSelect",precondition:void 0})),e.LineSelectDrag=(0,a.E_)(new L({inSelectionMode:!0,id:"_lineSelectDrag",precondition:void 0}));class D extends w{constructor(e){super(e),this._inSelectionMode=e.inSelectionMode}runCoreEditorCommand(e,t){if(!t.position)return;const i=e.getLastAddedCursorIndex(),o=e.getCursorStates(),n=o.slice(0);n[i]=d.c.line(e,o[i],this._inSelectionMode,t.position,t.viewPosition),e.model.pushStackElement(),e.setCursorStates(t.source,3,n)}}e.LastCursorLineSelect=(0,a.E_)(new D({inSelectionMode:!1,id:"lastCursorLineSelect",precondition:void 0})),e.LastCursorLineSelectDrag=(0,a.E_)(new D({inSelectionMode:!0,id:"lastCursorLineSelectDrag",precondition:void 0})),e.CancelSelection=(0,a.E_)(new class extends w{constructor(){super({id:"cancelSelection",precondition:_.R.hasNonEmptySelection,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[d.c.cancelSelection(e,e.getPrimaryCursorState())]),e.revealPrimaryCursor(t.source,!0)}}),e.RemoveSecondaryCursors=(0,a.E_)(new class extends w{constructor(){super({id:"removeSecondaryCursors",precondition:_.R.hasMultipleSelections,kbOpts:{weight:1,kbExpr:_.R.textInputFocus,primary:9,secondary:[1033]}})}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates(t.source,3,[e.getPrimaryCursorState()]),e.revealPrimaryCursor(t.source,!0),(0,r.h5)(o.kg("removedCursor","Removed secondary cursors"))}}),e.RevealLine=(0,a.E_)(new class extends w{constructor(){super({id:"revealLine",precondition:void 0,description:y.description})}runCoreEditorCommand(e,t){const i=t,o=i.lineNumber||0;let n="number"===typeof o?o+1:parseInt(o)+1;n<1&&(n=1);const s=e.model.getLineCount();n>s&&(n=s);const r=new m.Q(n,1,n,e.model.getLineMaxColumn(n));let a=0;if(i.at)switch(i.at){case y.RawAtArgument.Top:a=3;break;case y.RawAtArgument.Center:a=1;break;case y.RawAtArgument.Bottom:a=4}const l=e.coordinatesConverter.convertModelRangeToViewRange(r);e.revealRange(t.source,!1,l,a,0)}}),e.SelectAll=new class extends b{constructor(){super(a.tc)}runDOMCommand(e){n.gm&&(e.focus(),e.select()),e.ownerDocument.execCommand("selectAll")}runEditorCommand(e,t,i){const o=t._getViewModel();o&&this.runCoreEditorCommand(o,i)}runCoreEditorCommand(e,t){e.model.pushStackElement(),e.setCursorStates("keyboard",3,[d.c.selectAll(e,e.getPrimaryCursorState())])}},e.SetSelection=(0,a.E_)(new class extends w{constructor(){super({id:"setSelection",precondition:void 0})}runCoreEditorCommand(e,t){t.selection&&(e.model.pushStackElement(),e.setCursorStates(t.source,3,[u.MF.fromModelSelection(t.selection)]))}})}(x||(x={}));const E=f.M$.and(_.R.textInputFocus,_.R.columnSelection);function T(e,t){C.f.registerKeybindingRule({id:e,primary:t,when:E,weight:1})}function M(e){return e.register(),e}var A;T(x.CursorColumnSelectLeft.id,1039),T(x.CursorColumnSelectRight.id,1041),T(x.CursorColumnSelectUp.id,1040),T(x.CursorColumnSelectPageUp.id,1035),T(x.CursorColumnSelectDown.id,1042),T(x.CursorColumnSelectPageDown.id,1036),function(e){class t extends a.DX{runEditorCommand(e,t,i){const o=t._getViewModel();o&&this.runCoreEditingCommand(t,o,i||{})}}e.CoreEditingCommand=t,e.LineBreakInsert=(0,a.E_)(new class extends t{constructor(){super({id:"lineBreakInsert",precondition:_.R.writable,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:0,mac:{primary:301}}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,p.TK.lineBreakInsert(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection))))}}),e.Outdent=(0,a.E_)(new class extends t{constructor(){super({id:"outdent",precondition:_.R.writable,kbOpts:{weight:0,kbExpr:f.M$.and(_.R.editorTextFocus,_.R.tabDoesNotMoveFocus),primary:1026}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,p.TK.outdent(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.Tab=(0,a.E_)(new class extends t{constructor(){super({id:"tab",precondition:_.R.writable,kbOpts:{weight:0,kbExpr:f.M$.and(_.R.editorTextFocus,_.R.tabDoesNotMoveFocus),primary:2}})}runCoreEditingCommand(e,t,i){e.pushUndoStop(),e.executeCommands(this.id,p.TK.tab(t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)))),e.pushUndoStop()}}),e.DeleteLeft=(0,a.E_)(new class extends t{constructor(){super({id:"deleteLeft",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:1,secondary:[1025],mac:{primary:1,secondary:[1025,294,257]}}})}runCoreEditingCommand(e,t,i){const[o,n]=h.g.deleteLeft(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)),t.getCursorAutoClosedCharacters());o&&e.pushUndoStop(),e.executeCommands(this.id,n),t.setPrevEditOperationType(2)}}),e.DeleteRight=(0,a.E_)(new class extends t{constructor(){super({id:"deleteRight",precondition:void 0,kbOpts:{weight:0,kbExpr:_.R.textInputFocus,primary:20,mac:{primary:20,secondary:[290,276]}}})}runCoreEditingCommand(e,t,i){const[o,n]=h.g.deleteRight(t.getPrevEditOperationType(),t.cursorConfig,t.model,t.getCursorStates().map((e=>e.modelState.selection)));o&&e.pushUndoStop(),e.executeCommands(this.id,n),t.setPrevEditOperationType(3)}}),e.Undo=new class extends b{constructor(){super(a.aU)}runDOMCommand(e){e.ownerDocument.execCommand("undo")}runEditorCommand(e,t,i){if(t.hasModel()&&!0!==t.getOption(90))return t.getModel().undo()}},e.Redo=new class extends b{constructor(){super(a.ih)}runDOMCommand(e){e.ownerDocument.execCommand("redo")}runEditorCommand(e,t,i){if(t.hasModel()&&!0!==t.getOption(90))return t.getModel().redo()}}}(A||(A={}));class L extends a.uB{constructor(e,t,i){super({id:e,precondition:void 0,description:i}),this._handlerId=t}runCommand(e,t){const i=e.get(l.T).getFocusedCodeEditor();i&&i.trigger("keyboard",this._handlerId,t)}}function D(e,t){M(new L("default:"+e,e)),M(new L(e,e,t))}D("type",{description:"Type",args:[{name:"args",schema:{type:"object",required:["text"],properties:{text:{type:"string"}}}}]}),D("replacePreviousChar"),D("compositionType"),D("compositionStart"),D("compositionEnd"),D("paste"),D("cut")},85339:(e,t,i)=>{i.d(t,{l:()=>d,q:()=>c});var o=i(1987),n=i(86783),s=i(70040),r=i(97072),a=i(79732),l=function(e,t,i,o){return new(i||(i=Promise))((function(n,s){function r(e){try{l(o.next(e))}catch(t){s(t)}}function a(e){try{l(o.throw(e))}catch(t){s(t)}}function l(e){var t;e.done?n(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}l((o=o.apply(e,t||[])).next())}))};function c(e){const t=new n.Vq;for(const i of e.items){const e=i.type;if("string"===i.kind){const o=new Promise((e=>i.getAsString(e)));t.append(e,(0,n.gf)(o))}else if("file"===i.kind){const o=i.getAsFile();o&&t.append(e,u(o))}}return t}function u(e){const t=e.path?r.r.parse(e.path):void 0;return(0,n.VX)(e.name,t,(()=>l(this,void 0,void 0,(function*(){return new Uint8Array(yield e.arrayBuffer())}))))}const h=Object.freeze([a.sV.EDITORS,a.sV.FILES,o.t.RESOURCES,o.t.INTERNAL_URI_LIST]);function d(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const i=c(e),a=i.get(o.t.INTERNAL_URI_LIST);if(a)i.replace(s.K.uriList,a);else if(t||!i.has(s.K.uriList)){const t=[];for(const i of e.items){const e=i.getAsFile();if(e){const i=e.path;try{i?t.push(r.r.file(i).toString()):t.push(r.r.parse(e.name,!0).toString())}catch(l){}}}t.length&&i.replace(s.K.uriList,(0,n.gf)(n.jt.create(t)))}for(const o of h)i.delete(o);return i}}}]);
//# sourceMappingURL=monaco-editor-vendor.c0aa0059.bf0c58fd.js.map