"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[596],{86065:(e,t,i)=>{i.r(t),i.d(t,{DragAndDropController:()=>u});var s=i(65096),o=i(90650),n=i(95253),r=i(65631),a=i(17429),d=i(96601),h=i(78519);class c{constructor(e,t,i){this.selection=e,this.targetPosition=t,this.copy=i,this.targetSelection=null}getEditOperations(e,t){const i=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new a.e(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new d.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new d.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new d.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new d.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new d.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}computeCursorState(e,t){return this.targetSelection}}function l(e){return o.dz?e.altKey:e.ctrlKey}class u extends s.JT{constructor(e){super(),this._editor=e,this._dndDecorationIds=this._editor.createDecorationsCollection(),this._register(this._editor.onMouseDown((e=>this._onEditorMouseDown(e)))),this._register(this._editor.onMouseUp((e=>this._onEditorMouseUp(e)))),this._register(this._editor.onMouseDrag((e=>this._onEditorMouseDrag(e)))),this._register(this._editor.onMouseDrop((e=>this._onEditorMouseDrop(e)))),this._register(this._editor.onMouseDropCanceled((()=>this._onEditorMouseDropCanceled()))),this._register(this._editor.onKeyDown((e=>this.onEditorKeyDown(e)))),this._register(this._editor.onKeyUp((e=>this.onEditorKeyUp(e)))),this._register(this._editor.onDidBlurEditorWidget((()=>this.onEditorBlur()))),this._register(this._editor.onDidBlurEditorText((()=>this.onEditorBlur()))),this._mouseDown=!1,this._modifierPressed=!1,this._dragSelection=null}onEditorBlur(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}onEditorKeyDown(e){this._editor.getOption(35)&&!this._editor.getOption(22)&&(l(e)&&(this._modifierPressed=!0),this._mouseDown&&l(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}onEditorKeyUp(e){this._editor.getOption(35)&&!this._editor.getOption(22)&&(l(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===u.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}_onEditorMouseDown(e){this._mouseDown=!0}_onEditorMouseUp(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}_onEditorMouseDrag(e){const t=e.target;if(null===this._dragSelection){const e=(this._editor.getSelections()||[]).filter((e=>t.position&&e.containsPosition(t.position)));if(1!==e.length)return;this._dragSelection=e[0]}l(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}_onEditorMouseDropCanceled(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}_onEditorMouseDrop(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){const t=new r.L(e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){let i=null;if(e.event.shiftKey){const e=this._editor.getSelection();if(e){const{selectionStartLineNumber:s,selectionStartColumn:o}=e;i=[new d.Y(s,o,t.lineNumber,t.column)]}}else i=(this._editor.getSelections()||[]).map((e=>e.containsPosition(t)?new d.Y(t.lineNumber,t.column,t.lineNumber,t.column):e));this._editor.setSelections(i||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(l(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(u.ID,new c(this._dragSelection,t,l(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}showAt(e){this._dndDecorationIds.set([{range:new a.e(e.lineNumber,e.column,e.lineNumber,e.column),options:u._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}_removeDecoration(){this._dndDecorationIds.clear()}_hitContent(e){return 6===e.type||7===e.type}_hitMargin(e){return 2===e.type||3===e.type||4===e.type}dispose(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,super.dispose()}}u.ID="editor.contrib.dragAndDrop",u.TRIGGER_KEY_VALUE=o.dz?6:5,u._DECORATION_OPTIONS=h.qx.register({description:"dnd-target",className:"dnd-target"}),(0,n._K)(u.ID,u,2)},93022:(e,t,i)=>{i.r(t);var s=i(7388),o=i(63021),n=i(38821),r=i(7787),a=i(40455),d=i(99740),h=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(t){n(t)}}function a(e){try{d(s.throw(e))}catch(t){n(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};d.P.registerCommand("_executeDocumentSymbolProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),d=1;d<t;d++)i[d-1]=arguments[d];return h(this,void 0,void 0,(function*(){const[t]=i;(0,o.p_)(n.o.isUri(t));const d=e.get(a.Je),h=e.get(r.S),c=yield h.createModelReference(t);try{return(yield d.getOrCreate(c.object.textEditorModel,s.T.None)).getTopLevelSymbols()}finally{c.dispose()}}))}))},40455:(e,t,i)=>{i.d(t,{C3:()=>y,H3:()=>C,Je:()=>w,sT:()=>b});var s=i(38102),o=i(7388),n=i(74146),r=i(12928),a=i(29413),d=i(65631),h=i(17429),c=i(68200),l=i(64606),u=i(57832),p=i(26246),g=i(65096),_=i(65441),m=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},f=function(e,t){return function(i,s){t(i,s,e)}},v=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(t){n(t)}}function a(e){try{d(s.throw(e))}catch(t){n(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};class S{remove(){var e;null===(e=this.parent)||void 0===e||e.children.delete(this.id)}static findId(e,t){let i;"string"===typeof e?i="".concat(t.id,"/").concat(e):(i="".concat(t.id,"/").concat(e.name),void 0!==t.children.get(i)&&(i="".concat(t.id,"/").concat(e.name,"_").concat(e.range.startLineNumber,"_").concat(e.range.startColumn)));let s=i;for(let o=0;void 0!==t.children.get(s);o++)s="".concat(i,"_").concat(o);return s}static empty(e){return 0===e.children.size}}class b extends S{constructor(e,t,i){super(),this.id=e,this.parent=t,this.symbol=i,this.children=new Map}}class C extends S{constructor(e,t,i,s){super(),this.id=e,this.parent=t,this.label=i,this.order=s,this.children=new Map}}class y extends S{static create(e,t,i){const r=new o.A(i),a=new y(t.uri),d=e.ordered(t),h=d.map(((e,i)=>{var s;const o=S.findId("provider_".concat(i),a),d=new C(o,a,null!==(s=e.displayName)&&void 0!==s?s:"Unknown Outline Provider",i);return Promise.resolve(e.provideDocumentSymbols(t,r.token)).then((e=>{for(const t of e||[])y._makeOutlineElement(t,d);return d}),(e=>((0,n.Cp)(e),d))).then((e=>{S.empty(e)?e.remove():a._groups.set(o,e)}))})),c=e.onDidChange((()=>{const i=e.ordered(t);(0,s.fS)(i,d)||r.cancel()}));return Promise.all(h).then((()=>r.token.isCancellationRequested&&!i.isCancellationRequested?y.create(e,t,i):a._compact())).finally((()=>{r.dispose(),c.dispose(),r.dispose()}))}static _makeOutlineElement(e,t){const i=S.findId(e,t),s=new b(i,t,e);if(e.children)for(const o of e.children)y._makeOutlineElement(o,s);t.children.set(s.id,s)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[t,i]of this._groups)0===i.children.size?this._groups.delete(t):e+=1;if(1!==e)this.children=this._groups;else{const e=r.$.first(this._groups.values());for(const[,t]of e.children)t.parent=this,this.children.set(t.id,t)}return this}getTopLevelSymbols(){const e=[];for(const t of this.children.values())t instanceof b?e.push(t.symbol):e.push(...r.$.map(t.children.values(),(e=>e.symbol)));return e.sort(((e,t)=>h.e.compareRangesUsingStarts(e.range,t.range)))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),t=[];return y._flattenDocumentSymbols(t,e,""),t.sort(((e,t)=>d.L.compare(h.e.getStartPosition(e.range),h.e.getStartPosition(t.range))||d.L.compare(h.e.getEndPosition(t.range),h.e.getEndPosition(e.range))))}static _flattenDocumentSymbols(e,t,i){for(const s of t)e.push({kind:s.kind,tags:s.tags,name:s.name,detail:s.detail,containerName:s.containerName||i,range:s.range,selectionRange:s.selectionRange,children:void 0}),s.children&&y._flattenDocumentSymbols(e,s.children,s.name)}}const w=(0,l.yh)("IOutlineModelService");let x=class{constructor(e,t,i){this._languageFeaturesService=e,this._disposables=new g.SL,this._cache=new a.z6(10,.7),this._debounceInformation=t.for(e.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(i.onModelRemoved((e=>{this._cache.delete(e.id)})))}dispose(){this._disposables.dispose()}getOrCreate(e,t){return v(this,void 0,void 0,(function*(){const i=this._languageFeaturesService.documentSymbolProvider,n=i.ordered(e);let r=this._cache.get(e.id);if(!r||r.versionId!==e.getVersionId()||!(0,s.fS)(r.provider,n)){const t=new o.A;r={versionId:e.getVersionId(),provider:n,promiseCnt:0,source:t,promise:y.create(i,e,t.token),model:void 0},this._cache.set(e.id,r);const s=Date.now();r.promise.then((t=>{r.model=t,this._debounceInformation.update(e,Date.now()-s)})).catch((t=>{this._cache.delete(e.id)}))}if(r.model)return r.model;r.promiseCnt+=1;const a=t.onCancellationRequested((()=>{0===--r.promiseCnt&&(r.source.cancel(),this._cache.delete(e.id))}));try{return yield r.promise}finally{a.dispose()}}))}};x=m([f(0,_.p),f(1,c.A),f(2,p.q)],x),(0,u.z)(w,x,1)},70277:(e,t,i)=>{i.r(t);var s,o=i(95253),n=i(62636),r=i(32959),a=i(38102),d=i(71049),h=i(83392),c=i(65096),l=i(58915),u=i(90650),p=i(74812),g=i(19956),_=i(69815),m=i(48895),f=i(17429),v=i(65441),S=i(43845),b=i(16836),C=i(92303),y=i(18420),w=i(76344),x=i(8022),N=i(64606),I=i(28322),R=i(67949),D=i(31959),P=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},E=function(e,t){return function(i,s){t(i,s,e)}},M=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(t){n(t)}}function a(e){try{d(s.throw(e))}catch(t){n(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};const O="editor.changePasteType",F=new x.uy("pasteWidgetVisible",!1,(0,y.NC)("pasteWidgetVisible","Whether the paste widget is showing")),T="application/vnd.code.copyMetadata";let k=s=class extends c.JT{static get(e){return e.getContribution(s.ID)}constructor(e,t,i,s,o,n,a){super(),this._bulkEditService=i,this._clipboardService=s,this._languageFeaturesService=o,this._quickInputService=n,this._progressService=a,this._editor=e;const d=e.getContainerDomNode();this._register((0,r.nm)(d,"copy",(e=>this.handleCopy(e)))),this._register((0,r.nm)(d,"cut",(e=>this.handleCopy(e)))),this._register((0,r.nm)(d,"paste",(e=>this.handlePaste(e)),!0)),this._pasteProgressManager=this._register(new C.InlineProgressManager("pasteIntoEditor",e,t)),this._postPasteWidgetManager=this._register(t.createInstance(D.p,"pasteIntoEditor",e,F,{id:O,label:(0,y.NC)("postPasteWidgetTitle","Show paste options...")}))}changePasteType(){this._postPasteWidgetManager.tryShowSelector()}pasteAs(e){this._editor.focus();try{this._pasteAsActionContext={preferredId:e},(0,r.uP)().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}isPasteAsEnabled(){return this._editor.getOption(84).enabled&&!this._editor.getOption(90)}handleCopy(e){var t,i;if(!this._editor.hasTextFocus())return;if(u.$L&&this._clipboardService.writeResources([]),!e.clipboardData||!this.isPasteAsEnabled())return;const s=this._editor.getModel(),o=this._editor.getSelections();if(!s||!(null===o||void 0===o?void 0:o.length))return;const n=this._editor.getOption(37);let r=o;const h=1===o.length&&o[0].isEmpty();if(h){if(!n)return;r=[new f.e(r[0].startLineNumber,1,r[0].startLineNumber,1+s.getLineLength(r[0].startLineNumber))]}const c=null===(t=this._editor._getViewModel())||void 0===t?void 0:t.getPlainTextToCopy(o,n,u.ED),l={multicursorText:Array.isArray(c)?c:null,pasteOnNewLine:h,mode:null},g=this._languageFeaturesService.documentPasteEditProvider.ordered(s).filter((e=>!!e.prepareDocumentPaste));if(!g.length)return void this.setCopyMetadata(e.clipboardData,{defaultPastePayload:l});const m=(0,_.B)(e.clipboardData),v=g.flatMap((e=>{var t;return null!==(t=e.copyMimeTypes)&&void 0!==t?t:[]})),S=(0,p.R)();this.setCopyMetadata(e.clipboardData,{id:S,providerCopyMimeTypes:v,defaultPastePayload:l});const b=(0,d.PG)((e=>M(this,void 0,void 0,(function*(){const t=(0,a.kX)(yield Promise.all(g.map((t=>M(this,void 0,void 0,(function*(){try{return yield t.prepareDocumentPaste(s,r,m,e)}catch(i){return void console.error(i)}}))))));t.reverse();for(const e of t)for(const[t,i]of e)m.replace(t,i);return m}))));null===(i=this._currentCopyOperation)||void 0===i||i.dataTransferPromise.cancel(),this._currentCopyOperation={handle:S,dataTransferPromise:b}}handlePaste(e){var t,i;return M(this,void 0,void 0,(function*(){if(!e.clipboardData||!this._editor.hasTextFocus())return;null===(t=this._currentPasteOperation)||void 0===t||t.cancel(),this._currentPasteOperation=void 0;const s=this._editor.getModel(),o=this._editor.getSelections();if(!(null===o||void 0===o?void 0:o.length)||!s)return;if(!this.isPasteAsEnabled())return;const n=this.fetchCopyMetadata(e),r=(0,_.L)(e.clipboardData);r.delete(T);const a=[...e.clipboardData.types,...null!==(i=null===n||void 0===n?void 0:n.providerCopyMimeTypes)&&void 0!==i?i:[],l.v.uriList],d=this._languageFeaturesService.documentPasteEditProvider.ordered(s).filter((e=>{var t;return null===(t=e.pasteMimeTypes)||void 0===t?void 0:t.some((e=>(0,h.SN)(e,a)))}));d.length&&(e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferredId,d,o,r,n):this.doPasteInline(d,o,r,n))}))}doPasteInline(e,t,i,s){const o=(0,d.PG)((n=>M(this,void 0,void 0,(function*(){const r=this._editor;if(!r.hasModel())return;const a=r.getModel(),d=new b.Dl(r,3,void 0,n);try{if(yield this.mergeInDataFromCopy(i,s,d.token),d.token.isCancellationRequested)return;const o=e.filter((e=>A(e,i)));if(!o.length||1===o.length&&"text"===o[0].id)return void(yield this.applyDefaultPasteHandler(i,s,d.token));const n=yield this.getPasteEdits(o,i,a,t,d.token);if(d.token.isCancellationRequested)return;if(1===n.length&&"text"===n[0].providerId)return void(yield this.applyDefaultPasteHandler(i,s,d.token));if(n.length){const e="afterPaste"===r.getOption(84).showPasteSelector;return this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:n},e,d.token)}yield this.applyDefaultPasteHandler(i,s,d.token)}finally{d.dispose(),this._currentPasteOperation===o&&(this._currentPasteOperation=void 0)}}))));this._pasteProgressManager.showWhile(t[0].getEndPosition(),(0,y.NC)("pasteIntoEditorProgress","Running paste handlers. Click to cancel"),o),this._currentPasteOperation=o}showPasteAsPick(e,t,i,s,o){const n=(0,d.PG)((r=>M(this,void 0,void 0,(function*(){const a=this._editor;if(!a.hasModel())return;const d=a.getModel(),h=new b.Dl(a,3,void 0,r);try{if(yield this.mergeInDataFromCopy(s,o,h.token),h.token.isCancellationRequested)return;let n=t.filter((e=>A(e,s)));e&&(n=n.filter((t=>t.id===e)));const r=yield this.getPasteEdits(n,s,d,i,h.token);if(h.token.isCancellationRequested)return;if(!r.length)return;let a;if(e)a=r.at(0);else{const e=yield this._quickInputService.pick(r.map((e=>({label:e.label,description:e.providerId,detail:e.detail,edit:e}))),{placeHolder:(0,y.NC)("pasteAsPickerPlaceholder","Select Paste Action")});a=null===e||void 0===e?void 0:e.edit}if(!a)return;const c=(0,S.n)(d.uri,i,a);yield this._bulkEditService.apply(c,{editor:this._editor})}finally{h.dispose(),this._currentPasteOperation===n&&(this._currentPasteOperation=void 0)}}))));this._progressService.withProgress({location:10,title:(0,y.NC)("pasteAsProgress","Running paste handlers")},(()=>n))}setCopyMetadata(e,t){e.setData(T,JSON.stringify(t))}fetchCopyMetadata(e){var t;if(!e.clipboardData)return;const i=e.clipboardData.getData(T);if(i)try{return JSON.parse(i)}catch(n){return}const[s,o]=g.b6.getTextData(e.clipboardData);return o?{defaultPastePayload:{mode:o.mode,multicursorText:null!==(t=o.multicursorText)&&void 0!==t?t:null,pasteOnNewLine:!!o.isFromEmptySelection}}:void 0}mergeInDataFromCopy(e,t,i){var s;return M(this,void 0,void 0,(function*(){if((null===t||void 0===t?void 0:t.id)&&(null===(s=this._currentCopyOperation)||void 0===s?void 0:s.handle)===t.id){const t=yield this._currentCopyOperation.dataTransferPromise;if(i.isCancellationRequested)return;for(const[i,s]of t)e.replace(i,s)}if(!e.has(l.v.uriList)){const t=yield this._clipboardService.readResources();if(i.isCancellationRequested)return;t.length&&e.append(l.v.uriList,(0,h.ZO)(h.Z0.create(t)))}}))}getPasteEdits(e,t,i,s,o){return M(this,void 0,void 0,(function*(){const n=yield(0,d.eP)(Promise.all(e.map((e=>M(this,void 0,void 0,(function*(){var n;try{const r=yield null===(n=e.provideDocumentPasteEdits)||void 0===n?void 0:n.call(e,i,s,t,o);if(r)return Object.assign(Object.assign({},r),{providerId:e.id})}catch(r){console.error(r)}}))))),o),r=(0,a.kX)(null!==n&&void 0!==n?n:[]);return(0,S.C)(r)}))}applyDefaultPasteHandler(e,t,i){var s,o,n;return M(this,void 0,void 0,(function*(){const r=null!==(s=e.get(l.v.text))&&void 0!==s?s:e.get("text");if(!r)return;const a=yield r.asString();if(i.isCancellationRequested)return;const d={text:a,pasteOnNewLine:null!==(o=null===t||void 0===t?void 0:t.defaultPastePayload.pasteOnNewLine)&&void 0!==o&&o,multicursorText:null!==(n=null===t||void 0===t?void 0:t.defaultPastePayload.multicursorText)&&void 0!==n?n:null,mode:null};this._editor.trigger("keyboard","paste",d)}))}};function A(e,t){var i;return Boolean(null===(i=e.pasteMimeTypes)||void 0===i?void 0:i.some((e=>t.matches(e))))}k.ID="editor.contrib.copyPasteActionController",k=s=P([E(1,N.TG),E(2,m.vu),E(3,w.p),E(4,v.p),E(5,R.eJ),E(6,I.R9)],k);var L=i(58008);(0,o._K)(k.ID,k,0),(0,n.y)(L.v),(0,o.fK)(new class extends o._l{constructor(){super({id:O,precondition:F,kbOpts:{weight:100,primary:2137}})}runEditorCommand(e,t,i){var s;return null===(s=k.get(t))||void 0===s?void 0:s.changePasteType()}}),(0,o.Qr)(class extends o.R6{constructor(){super({id:"editor.action.pasteAs",label:y.NC("pasteAs","Paste As..."),alias:"Paste As...",precondition:void 0,description:{description:"Paste as",args:[{name:"args",schema:{type:"object",properties:{id:{type:"string",description:y.NC("pasteAs.id","The id of the paste edit to try applying. If not provided, the editor will show a picker.")}}}}]}})}run(e,t,i){var s;const o="string"===typeof(null===i||void 0===i?void 0:i.id)?i.id:void 0;return null===(s=k.get(t))||void 0===s?void 0:s.pasteAs(o)}})},58008:(e,t,i)=>{i.d(t,{P:()=>y,v:()=>w});var s=i(38102),o=i(83392),n=i(65096),r=i(58915),a=i(37649),d=i(44641),h=i(38821),c=i(65441),l=i(18420),u=i(55208),p=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},g=function(e,t){return function(i,s){t(i,s,e)}},_=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(t){n(t)}}function a(e){try{d(s.throw(e))}catch(t){n(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};const m=(0,l.NC)("builtIn","Built-in");class f{provideDocumentPasteEdits(e,t,i,s){return _(this,void 0,void 0,(function*(){const e=yield this.getEdit(i,s);return e?{insertText:e.insertText,label:e.label,detail:e.detail,handledMimeType:e.handledMimeType,yieldTo:e.yieldTo}:void 0}))}provideDocumentOnDropEdits(e,t,i,s){return _(this,void 0,void 0,(function*(){const e=yield this.getEdit(i,s);return e?{insertText:e.insertText,label:e.label,handledMimeType:e.handledMimeType,yieldTo:e.yieldTo}:void 0}))}}class v extends f{constructor(){super(...arguments),this.id="text",this.dropMimeTypes=[r.v.text],this.pasteMimeTypes=[r.v.text]}getEdit(e,t){return _(this,void 0,void 0,(function*(){const t=e.get(r.v.text);if(!t)return;if(e.has(r.v.uriList))return;const i=yield t.asString();return{handledMimeType:r.v.text,label:(0,l.NC)("text.label","Insert Plain Text"),detail:m,insertText:i}}))}}class S extends f{constructor(){super(...arguments),this.id="uri",this.dropMimeTypes=[r.v.uriList],this.pasteMimeTypes=[r.v.uriList]}getEdit(e,t){return _(this,void 0,void 0,(function*(){const i=yield C(e);if(!i.length||t.isCancellationRequested)return;let s=0;const o=i.map((e=>{let{uri:t,originalText:i}=e;return t.scheme===a.lg.file?t.fsPath:(s++,i)})).join(" ");let n;return n=s>0?i.length>1?(0,l.NC)("defaultDropProvider.uriList.uris","Insert Uris"):(0,l.NC)("defaultDropProvider.uriList.uri","Insert Uri"):i.length>1?(0,l.NC)("defaultDropProvider.uriList.paths","Insert Paths"):(0,l.NC)("defaultDropProvider.uriList.path","Insert Path"),{handledMimeType:r.v.uriList,insertText:o,label:n,detail:m}}))}}let b=class extends f{constructor(e){super(),this._workspaceContextService=e,this.id="relativePath",this.dropMimeTypes=[r.v.uriList],this.pasteMimeTypes=[r.v.uriList]}getEdit(e,t){return _(this,void 0,void 0,(function*(){const i=yield C(e);if(!i.length||t.isCancellationRequested)return;const o=(0,s.kX)(i.map((e=>{let{uri:t}=e;const i=this._workspaceContextService.getWorkspaceFolder(t);return i?(0,d.lX)(i.uri,t):void 0})));return o.length?{handledMimeType:r.v.uriList,insertText:o.join(" "),label:i.length>1?(0,l.NC)("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):(0,l.NC)("defaultDropProvider.uriList.relativePath","Insert Relative Path"),detail:m}:void 0}))}};function C(e){return _(this,void 0,void 0,(function*(){const t=e.get(r.v.uriList);if(!t)return[];const i=yield t.asString(),s=[];for(const e of o.Z0.parse(i))try{s.push({uri:h.o.parse(e),originalText:e})}catch(n){}return s}))}b=p([g(0,u.ec)],b);let y=class extends n.JT{constructor(e,t){super(),this._register(e.documentOnDropEditProvider.register("*",new v)),this._register(e.documentOnDropEditProvider.register("*",new S)),this._register(e.documentOnDropEditProvider.register("*",new b(t)))}};y=p([g(0,c.p),g(1,u.ec)],y);let w=class extends n.JT{constructor(e,t){super(),this._register(e.documentPasteEditProvider.register("*",new v)),this._register(e.documentPasteEditProvider.register("*",new S)),this._register(e.documentPasteEditProvider.register("*",new b(t)))}};w=p([g(0,c.p),g(1,u.ec)],w)},85052:(e,t,i)=>{i.r(t);var s,o=i(95253),n=i(89212),r=i(62636),a=i(58008),d=i(18420),h=i(92328),c=i(43357),l=i(38102),u=i(71049),p=i(83392),g=i(65096),_=i(69815),m=i(17429),f=i(65441),v=i(2260),S=i(81720),b=i(16836),C=i(92303),y=i(77819),w=i(8022),x=i(48909),N=i(64606),I=i(43845),R=i(31959),D=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},P=function(e,t){return function(i,s){t(i,s,e)}},E=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(t){n(t)}}function a(e){try{d(s.throw(e))}catch(t){n(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};const M="editor.experimental.dropIntoEditor.defaultProvider",O="editor.changeDropType",F=new w.uy("dropWidgetVisible",!1,(0,d.NC)("dropWidgetVisible","Whether the drop widget is showing"));let T=s=class extends g.JT{static get(e){return e.getContribution(s.ID)}constructor(e,t,i,s,o){super(),this._configService=i,this._languageFeaturesService=s,this._treeViewsDragAndDropService=o,this.treeItemsTransfer=x.Ej.getInstance(),this._dropProgressManager=this._register(t.createInstance(C.InlineProgressManager,"dropIntoEditor",e)),this._postDropWidgetManager=this._register(t.createInstance(R.p,"dropIntoEditor",e,F,{id:O,label:(0,d.NC)("postDropWidgetTitle","Show drop options...")})),this._register(e.onDropIntoEditor((t=>this.onDropIntoEditor(e,t.position,t.event))))}changeDropType(){this._postDropWidgetManager.tryShowSelector()}onDropIntoEditor(e,t,i){var s;return E(this,void 0,void 0,(function*(){if(!i.dataTransfer||!e.hasModel())return;null===(s=this._currentOperation)||void 0===s||s.cancel(),e.focus(),e.setPosition(t);const o=(0,u.PG)((s=>E(this,void 0,void 0,(function*(){const n=new b.Dl(e,1,void 0,s);try{const o=yield this.extractDataTransferData(i);if(0===o.size||n.token.isCancellationRequested)return;const r=e.getModel();if(!r)return;const a=this._languageFeaturesService.documentOnDropEditProvider.ordered(r).filter((e=>!e.dropMimeTypes||e.dropMimeTypes.some((e=>o.matches(e))))),d=yield this.getDropEdits(a,r,t,o,n);if(n.token.isCancellationRequested)return;if(d.length){const i=this.getInitialActiveEditIndex(r,d),o="afterDrop"===e.getOption(36).showDropSelector;yield this._postDropWidgetManager.applyEditAndShowIfNeeded([m.e.fromPositions(t)],{activeEditIndex:i,allEdits:d},o,s)}}finally{n.dispose(),this._currentOperation===o&&(this._currentOperation=void 0)}}))));this._dropProgressManager.showWhile(t,(0,d.NC)("dropIntoEditorProgress","Running drop handlers. Click to cancel"),o),this._currentOperation=o}))}getDropEdits(e,t,i,s,o){return E(this,void 0,void 0,(function*(){const n=yield(0,u.eP)(Promise.all(e.map((e=>E(this,void 0,void 0,(function*(){try{const n=yield e.provideDocumentOnDropEdits(t,i,s,o.token);if(n)return Object.assign(Object.assign({},n),{providerId:e.id})}catch(n){console.error(n)}}))))),o.token),r=(0,l.kX)(null!==n&&void 0!==n?n:[]);return(0,I.C)(r)}))}getInitialActiveEditIndex(e,t){const i=this._configService.getValue(M,{resource:e.uri});for(const[s,o]of Object.entries(i)){const e=t.findIndex((e=>o===e.providerId&&e.handledMimeType&&(0,p.SN)(s,[e.handledMimeType])));if(e>=0)return e}return 0}extractDataTransferData(e){return E(this,void 0,void 0,(function*(){if(!e.dataTransfer)return new p.Hl;const t=(0,_.L)(e.dataTransfer);if(this.treeItemsTransfer.hasData(v.f.prototype)){const e=this.treeItemsTransfer.getData(v.f.prototype);if(Array.isArray(e))for(const i of e){const e=yield this._treeViewsDragAndDropService.removeDragOperationTransfer(i.identifier);if(e)for(const[i,s]of e)t.replace(i,s)}}return t}))}};T.ID="editor.contrib.dropIntoEditorController",T=s=D([P(1,N.TG),P(2,y.Ui),P(3,f.p),P(4,S.m)],T),(0,o._K)(T.ID,T,2),(0,o.fK)(new class extends o._l{constructor(){super({id:O,precondition:F,kbOpts:{weight:100,primary:2137}})}runEditorCommand(e,t,i){var s;null===(s=T.get(t))||void 0===s||s.changeDropType()}}),(0,r.y)(a.P),c.B.as(h.IP.Configuration).registerConfiguration(Object.assign(Object.assign({},n.wk),{properties:{[M]:{type:"object",scope:5,description:d.NC("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}}}}))},43845:(e,t,i)=>{i.d(t,{C:()=>n,n:()=>o});var s=i(48895);function o(e,t,i){var o,n;return{edits:[...t.map((t=>new s.Gl(e,"string"===typeof i.insertText?{range:t,text:i.insertText,insertAsSnippet:!1}:{range:t,text:i.insertText.snippet,insertAsSnippet:!0}))),...null!==(n=null===(o=i.additionalEdit)||void 0===o?void 0:o.edits)&&void 0!==n?n:[]]}}function n(e){var t;function i(e,t){return"providerId"in e&&e.providerId===t.providerId||"mimeType"in e&&e.mimeType===t.handledMimeType}const s=new Map;for(const r of e)for(const o of null!==(t=r.yieldTo)&&void 0!==t?t:[])for(const t of e)if(t!==r&&i(o,t)){let e=s.get(r);e||(e=[],s.set(r,e)),e.push(t)}if(!s.size)return Array.from(e);const o=new Set,n=[];return function e(t){if(!t.length)return[];const i=t[0];if(n.includes(i))return console.warn("Yield to cycle detected for ".concat(i.providerId)),t;if(o.has(i))return e(t.slice(1));let r=[];const a=s.get(i);return a&&(n.push(i),r=e(a),n.pop()),o.add(i),[...r,i,...e(t.slice(1))]}(Array.from(e))}},31959:(e,t,i)=>{i.d(t,{p:()=>v});var s,o=i(32959),n=i(24713),r=i(93720),a=i(13880),d=i(65096),h=i(48895),c=i(8022),l=i(92361),u=i(64606),p=i(75256),g=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},_=function(e,t){return function(i,s){t(i,s,e)}},m=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(t){n(t)}}function a(e){try{d(s.throw(e))}catch(t){n(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};let f=s=class extends d.JT{constructor(e,t,i,s,o,n,r,h,c,l){super(),this.typeId=e,this.editor=t,this.showCommand=s,this.range=o,this.edits=n,this.onSelectNewEdit=r,this._contextMenuService=h,this._keybindingService=l,this.allowEditorOverflow=!0,this.suppressMouseDown=!0,this.create(),this.visibleContext=i.bindTo(c),this.visibleContext.set(!0),this._register((0,d.OF)((()=>this.visibleContext.reset()))),this.editor.addContentWidget(this),this.editor.layoutContentWidget(this),this._register((0,d.OF)((()=>this.editor.removeContentWidget(this)))),this._register(this.editor.onDidChangeCursorPosition((e=>{o.containsPosition(e.position)||this.dispose()}))),this._register(a.ju.runAndSubscribe(l.onDidUpdateKeybindings,(()=>{this._updateButtonTitle()})))}_updateButtonTitle(){var e;const t=null===(e=this._keybindingService.lookupKeybinding(this.showCommand.id))||void 0===e?void 0:e.getLabel();this.button.element.title=this.showCommand.label+(t?" (".concat(t,")"):"")}create(){this.domNode=o.$(".post-edit-widget"),this.button=this._register(new n.z(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(o.nm(this.domNode,o.tw.CLICK,(()=>this.showSelector())))}getId(){return s.baseId+"."+this.typeId}getDomNode(){return this.domNode}getPosition(){return{position:this.range.getEndPosition(),preference:[2]}}showSelector(){this._contextMenuService.showContextMenu({getAnchor:()=>{const e=o.i(this.button.element);return{x:e.left+e.width,y:e.top+e.height}},getActions:()=>this.edits.allEdits.map(((e,t)=>(0,r.xw)({id:"",label:e.label,checked:t===this.edits.activeEditIndex,run:()=>{if(t!==this.edits.activeEditIndex)return this.onSelectNewEdit(t)}})))})}};f.baseId="editor.widget.postEditWidget",f=s=g([_(7,l.i),_(8,c.i6),_(9,p.d)],f);let v=class extends d.JT{constructor(e,t,i,s,o,n){super(),this._id=e,this._editor=t,this._visibleContext=i,this._showCommand=s,this._instantiationService=o,this._bulkEditService=n,this._currentWidget=this._register(new d.XK),this._register(a.ju.any(t.onDidChangeModel,t.onDidChangeModelContent)((()=>this.clear())))}applyEditAndShowIfNeeded(e,t,i,s){var o,n;return m(this,void 0,void 0,(function*(){const r=this._editor.getModel();if(!r||!e.length)return;const a=t.allEdits[t.activeEditIndex];if(!a)return;let d=[];d=("string"===typeof a.insertText?""===a.insertText:""===a.insertText.snippet)?[]:e.map((e=>new h.Gl(r.uri,"string"===typeof a.insertText?{range:e,text:a.insertText,insertAsSnippet:!1}:{range:e,text:a.insertText.snippet,insertAsSnippet:!0})));const c={edits:[...d,...null!==(n=null===(o=a.additionalEdit)||void 0===o?void 0:o.edits)&&void 0!==n?n:[]]},l=e[0],u=r.deltaDecorations([],[{range:l,options:{description:"paste-line-suffix",stickiness:0}}]);let p,g;try{p=yield this._bulkEditService.apply(c,{editor:this._editor,token:s}),g=r.getDecorationRange(u[0])}finally{r.deltaDecorations(u,[])}i&&p.isApplied&&t.allEdits.length>1&&this.show(null!==g&&void 0!==g?g:l,t,(o=>m(this,void 0,void 0,(function*(){const n=this._editor.getModel();n&&(yield n.undo(),this.applyEditAndShowIfNeeded(e,{activeEditIndex:o,allEdits:t.allEdits},i,s))}))))}))}show(e,t,i){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(f,this._id,this._editor,this._visibleContext,this._showCommand,e,t,i))}clear(){this._currentWidget.clear()}tryShowSelector(){var e;null===(e=this._currentWidget.value)||void 0===e||e.showSelector()}};v=g([_(4,u.TG),_(5,h.vu)],v)},16836:(e,t,i)=>{i.d(t,{yy:()=>m,Dl:()=>f,YQ:()=>v});var s=i(31906),o=i(17429),n=i(7388),r=i(65096),a=i(95253),d=i(8022),h=i(49192),c=i(64606),l=i(57832),u=i(18420);const p=(0,c.yh)("IEditorCancelService"),g=new d.uy("cancellableOperation",!1,(0,u.NC)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,l.z)(p,class{constructor(){this._tokens=new WeakMap}add(e,t){let i,s=this._tokens.get(e);return s||(s=e.invokeWithinContext((e=>({key:g.bindTo(e.get(d.i6)),tokens:new h.S}))),this._tokens.set(e,s)),s.key.set(!0),i=s.tokens.push(t),()=>{i&&(i(),s.key.set(!s.tokens.isEmpty()),i=void 0)}}cancel(e){const t=this._tokens.get(e);if(!t)return;const i=t.tokens.pop();i&&(i.cancel(),t.key.set(!t.tokens.isEmpty()))}},1);class _ extends n.A{constructor(e,t){super(t),this.editor=e,this._unregister=e.invokeWithinContext((t=>t.get(p).add(e,this)))}dispose(){this._unregister(),super.dispose()}}(0,a.fK)(new class extends a._l{constructor(){super({id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:g})}runEditorCommand(e,t){e.get(p).cancel(t)}});class m{constructor(e,t){if(this.flags=t,0!==(1&this.flags)){const t=e.getModel();this.modelVersionId=t?s.WU("{0}#{1}",t.uri.toString(),t.getVersionId()):null}else this.modelVersionId=null;0!==(4&this.flags)?this.position=e.getPosition():this.position=null,0!==(2&this.flags)?this.selection=e.getSelection():this.selection=null,0!==(8&this.flags)?(this.scrollLeft=e.getScrollLeft(),this.scrollTop=e.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}_equals(e){if(!(e instanceof m))return!1;const t=e;return this.modelVersionId===t.modelVersionId&&(this.scrollLeft===t.scrollLeft&&this.scrollTop===t.scrollTop&&(!(!this.position&&t.position||this.position&&!t.position||this.position&&t.position&&!this.position.equals(t.position))&&!(!this.selection&&t.selection||this.selection&&!t.selection||this.selection&&t.selection&&!this.selection.equalsRange(t.selection))))}validate(e){return this._equals(new m(e,this.flags))}}class f extends _{constructor(e,t,i,s){super(e,s),this._listener=new r.SL,4&t&&this._listener.add(e.onDidChangeCursorPosition((e=>{i&&o.e.containsPosition(i,e.position)||this.cancel()}))),2&t&&this._listener.add(e.onDidChangeCursorSelection((e=>{i&&o.e.containsRange(i,e.selection)||this.cancel()}))),8&t&&this._listener.add(e.onDidScrollChange((e=>this.cancel()))),1&t&&(this._listener.add(e.onDidChangeModel((e=>this.cancel()))),this._listener.add(e.onDidChangeModelContent((e=>this.cancel()))))}dispose(){this._listener.dispose(),super.dispose()}}class v extends n.A{constructor(e,t){super(t),this._listener=e.onDidChangeContent((()=>this.cancel()))}dispose(){this._listener.dispose(),super.dispose()}}},88818:(e,t,i)=>{i.r(t),i.d(t,{CommonFindController:()=>gt,FindController:()=>_t,MatchFindAction:()=>bt,MoveToMatchFindAction:()=>wt,NextMatchFindAction:()=>Ct,NextSelectionMatchFindAction:()=>Nt,PreviousMatchFindAction:()=>yt,PreviousSelectionMatchFindAction:()=>It,SelectionMatchFindAction:()=>xt,StartFindAction:()=>mt,StartFindReplaceAction:()=>Rt,StartFindWithArgsAction:()=>vt,StartFindWithSelectionAction:()=>St,getSelectionSearchString:()=>pt});var s=i(71049),o=i(65096),n=i(31906),r=i(95253),a=i(59881),d=i(98926),h=i(20329),c=i(85928),l=i(18424),u=i(65631),p=i(17429),g=i(96601),_=i(25717),m=i(78519),f=i(43980),v=i(41335);class S{constructor(e){this._editor=e,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}dispose(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}reset(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}getCount(){return this._decorations.length}getFindScope(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}getFindScopes(){if(this._findScopeDecorationIds.length){const e=this._findScopeDecorationIds.map((e=>this._editor.getModel().getDecorationRange(e))).filter((e=>!!e));if(e.length)return e}return null}getStartPosition(){return this._startPosition}setStartPosition(e){this._startPosition=e,this.setCurrentFindMatch(null)}_getDecorationIndex(e){const t=this._decorations.indexOf(e);return t>=0?t+1:1}getDecorationRangeAt(e){const t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}getCurrentMatchesPosition(e){const t=this._editor.getModel().getDecorationsInRange(e);for(const i of t){const e=i.options;if(e===S._FIND_MATCH_DECORATION||e===S._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(i.id)}return 0}setCurrentFindMatch(e){let t=null,i=0;if(e)for(let s=0,o=this._decorations.length;s<o;s++){const o=this._editor.getModel().getDecorationRange(this._decorations[s]);if(e.equalsRange(o)){t=this._decorations[s],i=s+1;break}}return null===this._highlightedDecorationId&&null===t||this._editor.changeDecorations((e=>{if(null!==this._highlightedDecorationId&&(e.changeDecorationOptions(this._highlightedDecorationId,S._FIND_MATCH_DECORATION),this._highlightedDecorationId=null),null!==t&&(this._highlightedDecorationId=t,e.changeDecorationOptions(this._highlightedDecorationId,S._CURRENT_FIND_MATCH_DECORATION)),null!==this._rangeHighlightDecorationId&&(e.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),null!==t){let i=this._editor.getModel().getDecorationRange(t);if(i.startLineNumber!==i.endLineNumber&&1===i.endColumn){const e=i.endLineNumber-1,t=this._editor.getModel().getLineMaxColumn(e);i=new p.e(i.startLineNumber,i.startColumn,e,t)}this._rangeHighlightDecorationId=e.addDecoration(i,S._RANGE_HIGHLIGHT_DECORATION)}})),i}set(e,t){this._editor.changeDecorations((i=>{let s=S._FIND_MATCH_DECORATION;const o=[];if(e.length>1e3){s=S._FIND_MATCH_NO_OVERVIEW_DECORATION;const t=this._editor.getModel().getLineCount(),i=this._editor.getLayoutInfo().height/t,n=Math.max(2,Math.ceil(3/i));let r=e[0].range.startLineNumber,a=e[0].range.endLineNumber;for(let s=1,d=e.length;s<d;s++){const t=e[s].range;a+n>=t.startLineNumber?t.endLineNumber>a&&(a=t.endLineNumber):(o.push({range:new p.e(r,1,a,1),options:S._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),r=t.startLineNumber,a=t.endLineNumber)}o.push({range:new p.e(r,1,a,1),options:S._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}const n=new Array(e.length);for(let t=0,r=e.length;t<r;t++)n[t]={range:e[t].range,options:s};this._decorations=i.deltaDecorations(this._decorations,n),this._overviewRulerApproximateDecorations=i.deltaDecorations(this._overviewRulerApproximateDecorations,o),this._rangeHighlightDecorationId&&(i.removeDecoration(this._rangeHighlightDecorationId),this._rangeHighlightDecorationId=null),this._findScopeDecorationIds.length&&(this._findScopeDecorationIds.forEach((e=>i.removeDecoration(e))),this._findScopeDecorationIds=[]),(null===t||void 0===t?void 0:t.length)&&(this._findScopeDecorationIds=t.map((e=>i.addDecoration(e,S._FIND_SCOPE_DECORATION))))}))}matchBeforePosition(e){if(0===this._decorations.length)return null;for(let t=this._decorations.length-1;t>=0;t--){const i=this._decorations[t],s=this._editor.getModel().getDecorationRange(i);if(s&&!(s.endLineNumber>e.lineNumber)){if(s.endLineNumber<e.lineNumber)return s;if(!(s.endColumn>e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}matchAfterPosition(e){if(0===this._decorations.length)return null;for(let t=0,i=this._decorations.length;t<i;t++){const i=this._decorations[t],s=this._editor.getModel().getDecorationRange(i);if(s&&!(s.startLineNumber<e.lineNumber)){if(s.startLineNumber>e.lineNumber)return s;if(!(s.startColumn<e.column))return s}}return this._editor.getModel().getDecorationRange(this._decorations[0])}_allDecorations(){let e=[];return e=e.concat(this._decorations),e=e.concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length&&e.push(...this._findScopeDecorationIds),this._rangeHighlightDecorationId&&e.push(this._rangeHighlightDecorationId),e}}S._CURRENT_FIND_MATCH_DECORATION=m.qx.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:(0,v.EN)(f.Fm_),position:h.sh.Center},minimap:{color:(0,v.EN)(f.SUY),position:h.F5.Inline}}),S._FIND_MATCH_DECORATION=m.qx.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:(0,v.EN)(f.Fm_),position:h.sh.Center},minimap:{color:(0,v.EN)(f.SUY),position:h.F5.Inline}}),S._FIND_MATCH_NO_OVERVIEW_DECORATION=m.qx.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),S._FIND_MATCH_ONLY_OVERVIEW_DECORATION=m.qx.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,v.EN)(f.Fm_),position:h.sh.Center}}),S._RANGE_HIGHLIGHT_DECORATION=m.qx.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),S._FIND_SCOPE_DECORATION=m.qx.register({description:"find-scope",className:"findScope",isWholeLine:!0});class b{constructor(e,t,i){this._editorSelection=e,this._ranges=t,this._replaceStrings=i,this._trackedEditorSelectionId=null}getEditOperations(e,t){if(this._ranges.length>0){const e=[];for(let t=0;t<this._ranges.length;t++)e.push({range:this._ranges[t],text:this._replaceStrings[t]});e.sort(((e,t)=>p.e.compareRangesUsingStarts(e.range,t.range)));const i=[];let s=e[0];for(let t=1;t<e.length;t++)s.range.endLineNumber===e[t].range.startLineNumber&&s.range.endColumn===e[t].range.startColumn?(s.range=s.range.plusRange(e[t].range),s.text=s.text+e[t].text):(i.push(s),s=e[t]);i.push(s);for(const o of i)t.addEditOperation(o.range,o.text)}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}computeCursorState(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}var C=i(3498);class y{constructor(e){this.staticValue=e,this.kind=0}}class w{constructor(e){this.pieces=e,this.kind=1}}class x{static fromStaticValue(e){return new x([N.staticValue(e)])}get hasReplacementPatterns(){return 1===this._state.kind}constructor(e){e&&0!==e.length?1===e.length&&null!==e[0].staticValue?this._state=new y(e[0].staticValue):this._state=new w(e):this._state=new y("")}buildReplaceString(e,t){if(0===this._state.kind)return t?(0,C.o)(e,this._state.staticValue):this._state.staticValue;let i="";for(let s=0,o=this._state.pieces.length;s<o;s++){const t=this._state.pieces[s];if(null!==t.staticValue){i+=t.staticValue;continue}let o=x._substitute(t.matchIndex,e);if(null!==t.caseOps&&t.caseOps.length>0){const e=[],i=t.caseOps.length;let s=0;for(let n=0,r=o.length;n<r;n++){if(s>=i){e.push(o.slice(n));break}switch(t.caseOps[s]){case"U":e.push(o[n].toUpperCase());break;case"u":e.push(o[n].toUpperCase()),s++;break;case"L":e.push(o[n].toLowerCase());break;case"l":e.push(o[n].toLowerCase()),s++;break;default:e.push(o[n])}}o=e.join("")}i+=o}return i}static _substitute(e,t){if(null===t)return"";if(0===e)return t[0];let i="";for(;e>0;){if(e<t.length){return(t[e]||"")+i}i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}class N{static staticValue(e){return new N(e,-1,null)}static caseOps(e,t){return new N(null,e,t)}constructor(e,t,i){this.staticValue=e,this.matchIndex=t,i&&0!==i.length?this.caseOps=i.slice(0):this.caseOps=null}}class I{constructor(e){this._source=e,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}emitUnchanged(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}emitStatic(e,t){this._emitStatic(e),this._lastCharIndex=t}_emitStatic(e){0!==e.length&&(this._currentStaticPiece+=e)}emitMatchIndex(e,t,i){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=N.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=N.caseOps(e,i),this._lastCharIndex=t}finalize(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=N.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new x(this._result)}}var R=i(8022);const D=new R.uy("findWidgetVisible",!1),P=(D.toNegated(),new R.uy("findInputFocussed",!1)),E=new R.uy("replaceInputFocussed",!1),M={primary:545,mac:{primary:2593}},O={primary:565,mac:{primary:2613}},F={primary:560,mac:{primary:2608}},T={primary:554,mac:{primary:2602}},k={primary:558,mac:{primary:2606}},A="actions.find",L="actions.findWithSelection",W="editor.actions.findWithArgs",V="editor.action.nextMatchFindAction",B="editor.action.previousMatchFindAction",H="editor.action.goToMatchFindAction",q="editor.action.nextSelectionMatchFindAction",U="editor.action.previousSelectionMatchFindAction",K="editor.action.startFindReplaceAction",Z="closeFindWidget",j="toggleFindCaseSensitive",G="toggleFindWholeWord",z="toggleFindRegex",Y="toggleFindInSelection",J="togglePreserveCase",Q="editor.action.replaceOne",$="editor.action.replaceAll",X="editor.action.selectAllMatches",ee=19999;class te{constructor(e,t){this._toDispose=new o.SL,this._editor=e,this._state=t,this._isDisposed=!1,this._startSearchingTimer=new s._F,this._decorations=new S(e),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new s.pY((()=>this.research(!1)),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition((e=>{3!==e.reason&&5!==e.reason&&6!==e.reason||this._decorations.setStartPosition(this._editor.getPosition())}))),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent((e=>{this._ignoreModelContentChanged||(e.isFlush&&this._decorations.reset(),this._decorations.setStartPosition(this._editor.getPosition()),this._updateDecorationsScheduler.schedule())}))),this._toDispose.add(this._state.onFindReplaceStateChange((e=>this._onStateChanged(e)))),this.research(!1,this._state.searchScope)}dispose(){this._isDisposed=!0,(0,o.B9)(this._startSearchingTimer),this._toDispose.dispose()}_onStateChanged(e){if(!this._isDisposed&&this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)){this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet((()=>{e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)}),240)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor)}}static _getSearchRange(e,t){return t||e.getFullModelRange()}research(e,t){let i=null;"undefined"!==typeof t?null!==t&&(i=Array.isArray(t)?t:[t]):i=this._decorations.getFindScopes(),null!==i&&(i=i.map((e=>{if(e.startLineNumber!==e.endLineNumber){let t=e.endLineNumber;return 1===e.endColumn&&(t-=1),new p.e(e.startLineNumber,1,t,this._editor.getModel().getLineMaxColumn(t))}return e})));const s=this._findMatches(i,!1,ee);this._decorations.set(s,i);const o=this._editor.getSelection();let n=this._decorations.getCurrentMatchesPosition(o);if(0===n&&s.length>0){const e=(0,c.J_)(s.map((e=>e.range)),(e=>p.e.compareRangesUsingStarts(e,o)>=0));n=e>0?e-1+1:n}this._state.changeMatchInfo(n,this._decorations.getCount(),void 0),e&&this._editor.getOption(41).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}_hasMatches(){return this._state.matchesCount>0}_cannotFind(){if(!this._hasMatches()){const e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}_setCurrentFindMatch(e){const t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}_prevSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:s}=e;const o=this._editor.getModel();return t||1===s?(1===i?i=o.getLineCount():i--,s=o.getLineMaxColumn(i)):s--,new u.L(i,s)}_moveToPrevMatch(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._state.canNavigateBack()){const t=this._decorations.matchAfterPosition(e);return void(t&&this._setCurrentFindMatch(t))}if(this._decorations.getCount()<ee){let t=this._decorations.matchBeforePosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._prevSearchPosition(e),t=this._decorations.matchBeforePosition(e)),void(t&&this._setCurrentFindMatch(t))}if(this._cannotFind())return;const i=this._decorations.getFindScope(),s=te._getSearchRange(this._editor.getModel(),i);s.getEndPosition().isBefore(e)&&(e=s.getEndPosition()),e.isBefore(s.getStartPosition())&&(e=s.getEndPosition());const{lineNumber:o,column:n}=e,r=this._editor.getModel();let a=new u.L(o,n),d=r.findPreviousMatch(this._state.searchString,a,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(129):null,!1);return d&&d.range.isEmpty()&&d.range.getStartPosition().equals(a)&&(a=this._prevSearchPosition(a),d=r.findPreviousMatch(this._state.searchString,a,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(129):null,!1)),d?t||s.containsRange(d.range)?void this._setCurrentFindMatch(d.range):this._moveToPrevMatch(d.range.getStartPosition(),!0):void 0}moveToPrevMatch(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}_nextSearchPosition(e){const t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0);let{lineNumber:i,column:s}=e;const o=this._editor.getModel();return t||s===o.getLineMaxColumn(i)?(i===o.getLineCount()?i=1:i++,s=1):s++,new u.L(i,s)}_moveToNextMatch(e){if(!this._state.canNavigateForward()){const t=this._decorations.matchBeforePosition(e);return void(t&&this._setCurrentFindMatch(t))}if(this._decorations.getCount()<ee){let t=this._decorations.matchAfterPosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),void(t&&this._setCurrentFindMatch(t))}const t=this._getNextMatch(e,!1,!0);t&&this._setCurrentFindMatch(t.range)}_getNextMatch(e,t,i){let s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._cannotFind())return null;const o=this._decorations.getFindScope(),n=te._getSearchRange(this._editor.getModel(),o);n.getEndPosition().isBefore(e)&&(e=n.getStartPosition()),e.isBefore(n.getStartPosition())&&(e=n.getStartPosition());const{lineNumber:r,column:a}=e,d=this._editor.getModel();let h=new u.L(r,a),c=d.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(129):null,t);return i&&c&&c.range.isEmpty()&&c.range.getStartPosition().equals(h)&&(h=this._nextSearchPosition(h),c=d.findNextMatch(this._state.searchString,h,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(129):null,t)),c?s||n.containsRange(c.range)?c:this._getNextMatch(c.range.getEndPosition(),t,i,!0):null}moveToNextMatch(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}_moveToMatch(e){const t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}moveToMatch(e){this._moveToMatch(e)}_getReplacePattern(){return this._state.isRegex?function(e){if(!e||0===e.length)return new x(null);const t=[],i=new I(e);for(let s=0,o=e.length;s<o;s++){const n=e.charCodeAt(s);if(92!==n){if(36===n){if(s++,s>=o)break;const n=e.charCodeAt(s);if(36===n){i.emitUnchanged(s-1),i.emitStatic("$",s+1);continue}if(48===n||38===n){i.emitUnchanged(s-1),i.emitMatchIndex(0,s+1,t),t.length=0;continue}if(49<=n&&n<=57){let r=n-48;if(s+1<o){const o=e.charCodeAt(s+1);if(48<=o&&o<=57){s++,r=10*r+(o-48),i.emitUnchanged(s-2),i.emitMatchIndex(r,s+1,t),t.length=0;continue}}i.emitUnchanged(s-1),i.emitMatchIndex(r,s+1,t),t.length=0;continue}}}else{if(s++,s>=o)break;const n=e.charCodeAt(s);switch(n){case 92:i.emitUnchanged(s-1),i.emitStatic("\\",s+1);break;case 110:i.emitUnchanged(s-1),i.emitStatic("\n",s+1);break;case 116:i.emitUnchanged(s-1),i.emitStatic("\t",s+1);break;case 117:case 85:case 108:case 76:i.emitUnchanged(s-1),i.emitStatic("",s+1),t.push(String.fromCharCode(n))}}}return i.finalize()}(this._state.replaceString):x.fromStaticValue(this._state.replaceString)}replace(){if(!this._hasMatches())return;const e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){const s=e.buildReplaceString(i.matches,this._state.preserveCase),o=new l.T4(t,s);this._executeEditorCommand("replace",o),this._decorations.setStartPosition(new u.L(t.startLineNumber,t.startColumn+s.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}_findMatches(e,t,i){const s=(e||[null]).map((e=>te._getSearchRange(this._editor.getModel(),e)));return this._editor.getModel().findMatches(this._state.searchString,s,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(129):null,t,i)}replaceAll(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();null===e&&this._state.matchesCount>=ee?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}_largeReplaceAll(){const e=new _.bc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(129):null).parseSearchRequest();if(!e)return;let t=e.regex;if(!t.multiline){let e="mu";t.ignoreCase&&(e+="i"),t.global&&(e+="g"),t=new RegExp(t.source,e)}const i=this._editor.getModel(),s=i.getValue(1),o=i.getFullModelRange(),n=this._getReplacePattern();let r;const a=this._state.preserveCase;r=n.hasReplacementPatterns||a?s.replace(t,(function(){return n.buildReplaceString(arguments,a)})):s.replace(t,n.buildReplaceString(null,a));const d=new l.hP(o,r,this._editor.getSelection());this._executeEditorCommand("replaceAll",d)}_regularReplaceAll(e){const t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),s=[];for(let n=0,r=i.length;n<r;n++)s[n]=t.buildReplaceString(i[n].matches,this._state.preserveCase);const o=new b(this._editor.getSelection(),i.map((e=>e.range)),s);this._executeEditorCommand("replaceAll",o)}selectAllMatches(){if(!this._hasMatches())return;const e=this._decorations.getFindScopes();let t=this._findMatches(e,!1,1073741824).map((e=>new g.Y(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)));const i=this._editor.getSelection();for(let s=0,o=t.length;s<o;s++){if(t[s].equalsRange(i)){t=[i].concat(t.slice(0,s)).concat(t.slice(s+1));break}}this._editor.setSelections(t)}_executeEditorCommand(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}var ie=i(32959),se=i(47163),oe=i(13752);class ne extends oe.${constructor(e,t,i){super(),this._hideSoon=this._register(new s.pY((()=>this._hide()),2e3)),this._isVisible=!1,this._editor=e,this._state=t,this._keybindingService=i,this._domNode=document.createElement("div"),this._domNode.className="findOptionsWidget",this._domNode.style.display="none",this._domNode.style.top="10px",this._domNode.style.zIndex="12",this._domNode.setAttribute("role","presentation"),this._domNode.setAttribute("aria-hidden","true");const o={inputActiveOptionBorder:(0,f.n_1)(f.PRb),inputActiveOptionForeground:(0,f.n_1)(f.Pvw),inputActiveOptionBackground:(0,f.n_1)(f.XEs)};this.caseSensitive=this._register(new se.rk(Object.assign({appendTitle:this._keybindingLabelFor(j),isChecked:this._state.matchCase},o))),this._domNode.appendChild(this.caseSensitive.domNode),this._register(this.caseSensitive.onChange((()=>{this._state.change({matchCase:this.caseSensitive.checked},!1)}))),this.wholeWords=this._register(new se.Qx(Object.assign({appendTitle:this._keybindingLabelFor(G),isChecked:this._state.wholeWord},o))),this._domNode.appendChild(this.wholeWords.domNode),this._register(this.wholeWords.onChange((()=>{this._state.change({wholeWord:this.wholeWords.checked},!1)}))),this.regex=this._register(new se.eH(Object.assign({appendTitle:this._keybindingLabelFor(z),isChecked:this._state.isRegex},o))),this._domNode.appendChild(this.regex.domNode),this._register(this.regex.onChange((()=>{this._state.change({isRegex:this.regex.checked},!1)}))),this._editor.addOverlayWidget(this),this._register(this._state.onFindReplaceStateChange((e=>{let t=!1;e.isRegex&&(this.regex.checked=this._state.isRegex,t=!0),e.wholeWord&&(this.wholeWords.checked=this._state.wholeWord,t=!0),e.matchCase&&(this.caseSensitive.checked=this._state.matchCase,t=!0),!this._state.isRevealed&&t&&this._revealTemporarily()}))),this._register(ie.nm(this._domNode,ie.tw.MOUSE_LEAVE,(e=>this._onMouseLeave()))),this._register(ie.nm(this._domNode,"mouseover",(e=>this._onMouseOver())))}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}dispose(){this._editor.removeOverlayWidget(this),super.dispose()}getId(){return ne.ID}getDomNode(){return this._domNode}getPosition(){return{preference:0}}highlightFindOptions(){this._revealTemporarily()}_revealTemporarily(){this._show(),this._hideSoon.schedule()}_onMouseLeave(){this._hideSoon.schedule()}_onMouseOver(){this._hideSoon.cancel()}_show(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}_hide(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}ne.ID="editor.contrib.findOptionsWidget";var re=i(13880);function ae(e,t){return 1===e||2!==e&&t}class de extends o.JT{get searchString(){return this._searchString}get replaceString(){return this._replaceString}get isRevealed(){return this._isRevealed}get isReplaceRevealed(){return this._isReplaceRevealed}get isRegex(){return ae(this._isRegexOverride,this._isRegex)}get wholeWord(){return ae(this._wholeWordOverride,this._wholeWord)}get matchCase(){return ae(this._matchCaseOverride,this._matchCase)}get preserveCase(){return ae(this._preserveCaseOverride,this._preserveCase)}get actualIsRegex(){return this._isRegex}get actualWholeWord(){return this._wholeWord}get actualMatchCase(){return this._matchCase}get actualPreserveCase(){return this._preserveCase}get searchScope(){return this._searchScope}get matchesPosition(){return this._matchesPosition}get matchesCount(){return this._matchesCount}get currentMatch(){return this._currentMatch}constructor(){super(),this._onFindReplaceStateChange=this._register(new re.Q5),this.onFindReplaceStateChange=this._onFindReplaceStateChange.event,this._searchString="",this._replaceString="",this._isRevealed=!1,this._isReplaceRevealed=!1,this._isRegex=!1,this._isRegexOverride=0,this._wholeWord=!1,this._wholeWordOverride=0,this._matchCase=!1,this._matchCaseOverride=0,this._preserveCase=!1,this._preserveCaseOverride=0,this._searchScope=null,this._matchesPosition=0,this._matchesCount=0,this._currentMatch=null,this._loop=!0,this._isSearching=!1,this._filters=null}changeMatchInfo(e,t,i){const s={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;0===t&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,s.matchesPosition=!0,o=!0),this._matchesCount!==t&&(this._matchesCount=t,s.matchesCount=!0,o=!0),"undefined"!==typeof i&&(p.e.equalsRange(this._currentMatch,i)||(this._currentMatch=i,s.currentMatch=!0,o=!0)),o&&this._onFindReplaceStateChange.fire(s)}change(e,t){var i;const s={moveCursor:t,updateHistory:!(arguments.length>2&&void 0!==arguments[2])||arguments[2],searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1};let o=!1;const n=this.isRegex,r=this.wholeWord,a=this.matchCase,d=this.preserveCase;"undefined"!==typeof e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,s.searchString=!0,o=!0),"undefined"!==typeof e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,s.replaceString=!0,o=!0),"undefined"!==typeof e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,s.isRevealed=!0,o=!0),"undefined"!==typeof e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,s.isReplaceRevealed=!0,o=!0),"undefined"!==typeof e.isRegex&&(this._isRegex=e.isRegex),"undefined"!==typeof e.wholeWord&&(this._wholeWord=e.wholeWord),"undefined"!==typeof e.matchCase&&(this._matchCase=e.matchCase),"undefined"!==typeof e.preserveCase&&(this._preserveCase=e.preserveCase),"undefined"!==typeof e.searchScope&&((null===(i=e.searchScope)||void 0===i?void 0:i.every((e=>{var t;return null===(t=this._searchScope)||void 0===t?void 0:t.some((t=>!p.e.equalsRange(t,e)))})))||(this._searchScope=e.searchScope,s.searchScope=!0,o=!0)),"undefined"!==typeof e.loop&&this._loop!==e.loop&&(this._loop=e.loop,s.loop=!0,o=!0),"undefined"!==typeof e.isSearching&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,s.isSearching=!0,o=!0),"undefined"!==typeof e.filters&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,s.filters=!0,o=!0),this._isRegexOverride="undefined"!==typeof e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride="undefined"!==typeof e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride="undefined"!==typeof e.matchCaseOverride?e.matchCaseOverride:0,this._preserveCaseOverride="undefined"!==typeof e.preserveCaseOverride?e.preserveCaseOverride:0,n!==this.isRegex&&(o=!0,s.isRegex=!0),r!==this.wholeWord&&(o=!0,s.wholeWord=!0),a!==this.matchCase&&(o=!0,s.matchCase=!0),d!==this.preserveCase&&(o=!0,s.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(s)}canNavigateBack(){return this.canNavigateInLoop()||1!==this.matchesPosition}canNavigateForward(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}canNavigateInLoop(){return this._loop||this.matchesCount>=ee}}var he=i(46403),ce=i(50922),le=i(16860),ue=i(77409),pe=i(74146),ge=i(90650),_e=i(18420),me=i(46689),fe=i(24986),ve=i(87288),Se=i(79730),be=i(39707),Ce=i(63021),ye=i(87103),we=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(t){n(t)}}function a(e){try{d(s.throw(e))}catch(t){n(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};const xe=(0,ve.q5)("find-selection",ue.l.selection,_e.NC("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Ne=(0,ve.q5)("find-collapsed",ue.l.chevronRight,_e.NC("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Ie=(0,ve.q5)("find-expanded",ue.l.chevronDown,_e.NC("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),Re=(0,ve.q5)("find-replace",ue.l.replace,_e.NC("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),De=(0,ve.q5)("find-replace-all",ue.l.replaceAll,_e.NC("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),Pe=(0,ve.q5)("find-previous-match",ue.l.arrowUp,_e.NC("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),Ee=(0,ve.q5)("find-next-match",ue.l.arrowDown,_e.NC("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Me=_e.NC("label.findDialog","Find / Replace"),Oe=_e.NC("label.find","Find"),Fe=_e.NC("placeholder.find","Find"),Te=_e.NC("label.previousMatchButton","Previous Match"),ke=_e.NC("label.nextMatchButton","Next Match"),Ae=_e.NC("label.toggleSelectionFind","Find in Selection"),Le=_e.NC("label.closeButton","Close"),We=_e.NC("label.replace","Replace"),Ve=_e.NC("placeholder.replace","Replace"),Be=_e.NC("label.replaceButton","Replace"),He=_e.NC("label.replaceAllButton","Replace All"),qe=_e.NC("label.toggleReplaceButton","Toggle Replace"),Ue=_e.NC("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",ee),Ke=_e.NC("label.matchesLocation","{0} of {1}"),Ze=_e.NC("label.noResults","No results"),je=419;let Ge=69;const ze="ctrlEnterReplaceAll.windows.donotask",Ye=ge.dz?256:2048;class Je{constructor(e){this.afterLineNumber=e,this.heightInPx=33,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}}function Qe(e,t,i){const s=!!t.match(/\n/);i&&s&&i.selectionStart>0&&e.stopPropagation()}function $e(e,t,i){const s=!!t.match(/\n/);i&&s&&i.selectionEnd<i.value.length&&e.stopPropagation()}class Xe extends oe.${constructor(e,t,i,n,r,a,d,h,c){super(),this._cachedHeight=null,this._revealTimeouts=[],this._codeEditor=e,this._controller=t,this._state=i,this._contextViewProvider=n,this._keybindingService=r,this._contextKeyService=a,this._storageService=h,this._notificationService=c,this._ctrlEnterReplaceAllWarningPrompted=!!h.getBoolean(ze,0),this._isVisible=!1,this._isReplaceVisible=!1,this._ignoreChangeEvent=!1,this._updateHistoryDelayer=new s.vp(500),this._register((0,o.OF)((()=>this._updateHistoryDelayer.cancel()))),this._register(this._state.onFindReplaceStateChange((e=>this._onStateChanged(e)))),this._buildDomNode(),this._updateButtons(),this._tryUpdateWidgetWidth(),this._findInput.inputBox.layout(),this._register(this._codeEditor.onDidChangeConfiguration((e=>{if(e.hasChanged(90)&&(this._codeEditor.getOption(90)&&this._state.change({isReplaceRevealed:!1},!1),this._updateButtons()),e.hasChanged(143)&&this._tryUpdateWidgetWidth(),e.hasChanged(2)&&this.updateAccessibilitySupport(),e.hasChanged(41)){const e=this._codeEditor.getOption(41).loop;this._state.change({loop:e},!1);const t=this._codeEditor.getOption(41).addExtraSpaceOnTop;t&&!this._viewZone&&(this._viewZone=new Je(0),this._showViewZone()),!t&&this._viewZone&&this._removeViewZone()}}))),this.updateAccessibilitySupport(),this._register(this._codeEditor.onDidChangeCursorSelection((()=>{this._isVisible&&this._updateToggleSelectionFindButton()}))),this._register(this._codeEditor.onDidFocusEditorWidget((()=>we(this,void 0,void 0,(function*(){if(this._isVisible){const e=yield this._controller.getGlobalBufferTerm();e&&e!==this._state.searchString&&(this._state.change({searchString:e},!1),this._findInput.select())}}))))),this._findInputFocused=P.bindTo(a),this._findFocusTracker=this._register(ie.go(this._findInput.inputBox.inputElement)),this._register(this._findFocusTracker.onDidFocus((()=>{this._findInputFocused.set(!0),this._updateSearchScope()}))),this._register(this._findFocusTracker.onDidBlur((()=>{this._findInputFocused.set(!1)}))),this._replaceInputFocused=E.bindTo(a),this._replaceFocusTracker=this._register(ie.go(this._replaceInput.inputBox.inputElement)),this._register(this._replaceFocusTracker.onDidFocus((()=>{this._replaceInputFocused.set(!0),this._updateSearchScope()}))),this._register(this._replaceFocusTracker.onDidBlur((()=>{this._replaceInputFocused.set(!1)}))),this._codeEditor.addOverlayWidget(this),this._codeEditor.getOption(41).addExtraSpaceOnTop&&(this._viewZone=new Je(0)),this._register(this._codeEditor.onDidChangeModel((()=>{this._isVisible&&(this._viewZoneId=void 0)}))),this._register(this._codeEditor.onDidScrollChange((e=>{e.scrollTopChanged?this._layoutViewZone():setTimeout((()=>{this._layoutViewZone()}),0)})))}getId(){return Xe.ID}getDomNode(){return this._domNode}getPosition(){return this._isVisible?{preference:0}:null}_onStateChanged(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(90)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=ie.w(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){const e=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",e),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}_delayedUpdateHistory(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,pe.dL)}_updateHistory(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}_updateMatchesCount(){let e;if(this._matchesCount.style.minWidth=Ge+"px",this._state.matchesCount>=ee?this._matchesCount.title=Ue:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){let t=String(this._state.matchesCount);this._state.matchesCount>=ee&&(t+="+");let i=String(this._state.matchesPosition);"0"===i&&(i="?"),e=n.WU(Ke,i,t)}else e=Ze;this._matchesCount.appendChild(document.createTextNode(e)),(0,he.Z9)(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),Ge=Math.max(Ge,this._matchesCount.clientWidth)}_getAriaLabel(e,t,i){if(e===Ze)return""===i?_e.NC("ariaSearchNoResultEmpty","{0} found",e):_e.NC("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){const s=_e.NC("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),o=this._codeEditor.getModel();if(o&&t.startLineNumber<=o.getLineCount()&&t.startLineNumber>=1){const e=o.getLineContent(t.startLineNumber);return"".concat(e,", ").concat(s)}return s}return _e.NC("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}_updateToggleSelectionFindButton(){const e=this._codeEditor.getSelection(),t=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}_updateButtons(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);const e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);const i=!this._codeEditor.getOption(90);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}_reveal(){if(this._revealTimeouts.forEach((e=>{clearTimeout(e)})),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;const e=this._codeEditor.getSelection();switch(this._codeEditor.getOption(41).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":{const t=!!e&&e.startLineNumber!==e.endLineNumber;this._toggleSelectionFind.checked=t;break}}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout((()=>{this._domNode.classList.add("visible"),this._domNode.setAttribute("aria-hidden","false")}),0)),this._revealTimeouts.push(setTimeout((()=>{this._findInput.validate()}),200)),this._codeEditor.layoutOverlayWidget(this);let t=!0;if(this._codeEditor.getOption(41).seedSearchStringFromSelection&&e){const i=this._codeEditor.getDomNode();if(i){const s=ie.i(i),o=this._codeEditor.getScrolledVisiblePosition(e.getStartPosition()),n=s.left+(o?o.left:0),r=o?o.top:0;if(this._viewZone&&r<this._viewZone.heightInPx){e.endLineNumber>e.startLineNumber&&(t=!1);const i=ie.xQ(this._domNode).left;n>i&&(t=!1);const o=this._codeEditor.getScrolledVisiblePosition(e.getEndPosition());s.left+(o?o.left:0)>i&&(t=!1)}}}this._showViewZone(t)}}_hide(e){this._revealTimeouts.forEach((e=>{clearTimeout(e)})),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}_layoutViewZone(e){if(!this._codeEditor.getOption(41).addExtraSpaceOnTop)return void this._removeViewZone();if(!this._isVisible)return;const t=this._viewZone;void 0===this._viewZoneId&&t&&this._codeEditor.changeViewZones((i=>{t.heightInPx=this._getHeight(),this._viewZoneId=i.addZone(t),this._codeEditor.setScrollTop(e||this._codeEditor.getScrollTop()+t.heightInPx)}))}_showViewZone(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(!this._isVisible)return;if(!this._codeEditor.getOption(41).addExtraSpaceOnTop)return;void 0===this._viewZone&&(this._viewZone=new Je(0));const t=this._viewZone;this._codeEditor.changeViewZones((i=>{if(void 0!==this._viewZoneId){const s=this._getHeight();if(s===t.heightInPx)return;const o=s-t.heightInPx;return t.heightInPx=s,i.layoutZone(this._viewZoneId),void(e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+o))}{let s=this._getHeight();if(s-=this._codeEditor.getOption(83).top,s<=0)return;t.heightInPx=s,this._viewZoneId=i.addZone(t),e&&this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()+s)}}))}_removeViewZone(){this._codeEditor.changeViewZones((e=>{void 0!==this._viewZoneId&&(e.removeZone(this._viewZoneId),this._viewZoneId=void 0,this._viewZone&&(this._codeEditor.setScrollTop(this._codeEditor.getScrollTop()-this._viewZone.heightInPx),this._viewZone=void 0))}))}_tryUpdateWidgetWidth(){if(!this._isVisible)return;if(!ie.Uw(this._domNode))return;const e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0)return void this._domNode.classList.add("hiddenEditor");this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");const t=e.width,i=e.minimap.minimapWidth;let s=!1,o=!1,n=!1;if(this._resized){if(ie.w(this._domNode)>je)return this._domNode.style.maxWidth="".concat(t-28-i-15,"px"),void(this._replaceInput.width=ie.w(this._findInput.domNode))}if(447+i>=t&&(o=!0),447+i-Ge>=t&&(n=!0),447+i-Ge>=t+50&&(s=!0),this._domNode.classList.toggle("collapsed-find-widget",s),this._domNode.classList.toggle("narrow-find-widget",n),this._domNode.classList.toggle("reduced-find-widget",o),n||s||(this._domNode.style.maxWidth="".concat(t-28-i-15,"px")),this._findInput.layout({collapsedFindWidget:s,narrowFindWidget:n,reducedFindWidget:o}),this._resized){const e=this._findInput.inputBox.element.clientWidth;e>0&&(this._replaceInput.width=e)}else this._isReplaceVisible&&(this._replaceInput.width=ie.w(this._findInput.domNode))}_getHeight(){let e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4,e}_tryUpdateHeight(){const e=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==e)&&(this._cachedHeight=e,this._domNode.style.height="".concat(e,"px"),!0)}focusFindInput(){this._findInput.select(),this._findInput.focus()}focusReplaceInput(){this._replaceInput.select(),this._replaceInput.focus()}highlightFindOptions(){this._findInput.highlightFindOptions()}_updateSearchScope(){if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){const e=this._codeEditor.getSelections();e.map((e=>{1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1)));const t=this._state.currentMatch;return e.startLineNumber===e.endLineNumber||p.e.equalsRange(e,t)?null:e})).filter((e=>!!e)),e.length&&this._state.change({searchScope:e},!0)}}_onFindInputMouseDown(e){e.middleButton&&e.stopPropagation()}_onFindInputKeyDown(e){return e.equals(3|Ye)?(this._keybindingService.dispatchEvent(e,e.target)||this._findInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?Qe(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18)?$e(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}_onReplaceInputKeyDown(e){return e.equals(3|Ye)?(this._keybindingService.dispatchEvent(e,e.target)||(ge.ED&&ge.tY&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(_e.NC("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(ze,!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n")),void e.preventDefault()):e.equals(2)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?Qe(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18)?$e(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}getVerticalSashLeft(e){return 0}_keybindingLabelFor(e){const t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}_buildDomNode(){this._findInput=this._register(new me.Yb(null,this._contextViewProvider,{width:221,label:Oe,placeholder:Fe,appendCaseSensitiveLabel:this._keybindingLabelFor(j),appendWholeWordsLabel:this._keybindingLabelFor(G),appendRegexLabel:this._keybindingLabelFor(z),validation:e=>{if(0===e.length||!this._findInput.getRegex())return null;try{return new RegExp(e,"gu"),null}catch(t){return{content:t.message}}},flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:()=>(0,fe.u)(this._keybindingService),inputBoxStyles:ye.Hc,toggleStyles:ye.pl},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown((e=>this._onFindInputKeyDown(e)))),this._register(this._findInput.inputBox.onDidChange((()=>{this._ignoreChangeEvent||this._state.change({searchString:this._findInput.getValue()},!0)}))),this._register(this._findInput.onDidOptionChange((()=>{this._state.change({isRegex:this._findInput.getRegex(),wholeWord:this._findInput.getWholeWords(),matchCase:this._findInput.getCaseSensitive()},!0)}))),this._register(this._findInput.onCaseSensitiveKeyDown((e=>{e.equals(1026)&&this._isReplaceVisible&&(this._replaceInput.focus(),e.preventDefault())}))),this._register(this._findInput.onRegexKeyDown((e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceInput.focusOnPreserve(),e.preventDefault())}))),this._register(this._findInput.inputBox.onDidHeightChange((e=>{this._tryUpdateHeight()&&this._showViewZone()}))),ge.IJ&&this._register(this._findInput.onMouseDown((e=>this._onFindInputMouseDown(e)))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new et({label:Te+this._keybindingLabelFor(B),icon:Pe,onTrigger:()=>{(0,Ce.cW)(this._codeEditor.getAction(B)).run().then(void 0,pe.dL)}})),this._nextBtn=this._register(new et({label:ke+this._keybindingLabelFor(V),icon:Ee,onTrigger:()=>{(0,Ce.cW)(this._codeEditor.getAction(V)).run().then(void 0,pe.dL)}}));const e=document.createElement("div");e.className="find-part",e.appendChild(this._findInput.domNode);const t=document.createElement("div");t.className="find-actions",e.appendChild(t),t.appendChild(this._matchesCount),t.appendChild(this._prevBtn.domNode),t.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new ce.Z({icon:xe,title:Ae+this._keybindingLabelFor(Y),isChecked:!1,inputActiveOptionBackground:(0,f.n_1)(f.XEs),inputActiveOptionBorder:(0,f.n_1)(f.PRb),inputActiveOptionForeground:(0,f.n_1)(f.Pvw)})),this._register(this._toggleSelectionFind.onChange((()=>{if(this._toggleSelectionFind.checked){if(this._codeEditor.hasModel()){const e=this._codeEditor.getSelections();e.map((e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._codeEditor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e))).filter((e=>!!e)),e.length&&this._state.change({searchScope:e},!0)}}else this._state.change({searchScope:null},!0)}))),t.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new et({label:Le+this._keybindingLabelFor(Z),icon:ve.s_,onTrigger:()=>{this._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:e=>{e.equals(2)&&this._isReplaceVisible&&(this._replaceBtn.isEnabled()?this._replaceBtn.focus():this._codeEditor.focus(),e.preventDefault())}})),this._replaceInput=this._register(new me.Nq(null,void 0,{label:We,placeholder:Ve,appendPreserveCaseLabel:this._keybindingLabelFor(J),history:[],flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118,showHistoryHint:()=>(0,fe.u)(this._keybindingService),inputBoxStyles:ye.Hc,toggleStyles:ye.pl},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown((e=>this._onReplaceInputKeyDown(e)))),this._register(this._replaceInput.inputBox.onDidChange((()=>{this._state.change({replaceString:this._replaceInput.inputBox.value},!1)}))),this._register(this._replaceInput.inputBox.onDidHeightChange((e=>{this._isReplaceVisible&&this._tryUpdateHeight()&&this._showViewZone()}))),this._register(this._replaceInput.onDidOptionChange((()=>{this._state.change({preserveCase:this._replaceInput.getPreserveCase()},!0)}))),this._register(this._replaceInput.onPreserveCaseKeyDown((e=>{e.equals(2)&&(this._prevBtn.isEnabled()?this._prevBtn.focus():this._nextBtn.isEnabled()?this._nextBtn.focus():this._toggleSelectionFind.enabled?this._toggleSelectionFind.focus():this._closeBtn.isEnabled()&&this._closeBtn.focus(),e.preventDefault())}))),this._replaceBtn=this._register(new et({label:Be+this._keybindingLabelFor(Q),icon:Re,onTrigger:()=>{this._controller.replace()},onKeyDown:e=>{e.equals(1026)&&(this._closeBtn.focus(),e.preventDefault())}})),this._replaceAllBtn=this._register(new et({label:He+this._keybindingLabelFor($),icon:De,onTrigger:()=>{this._controller.replaceAll()}}));const i=document.createElement("div");i.className="replace-part",i.appendChild(this._replaceInput.domNode);const s=document.createElement("div");s.className="replace-actions",i.appendChild(s),s.appendChild(this._replaceBtn.domNode),s.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new et({label:qe,className:"codicon toggle left",onTrigger:()=>{this._state.change({isReplaceRevealed:!this._isReplaceVisible},!1),this._isReplaceVisible&&(this._replaceInput.width=ie.w(this._findInput.domNode),this._replaceInput.inputBox.layout()),this._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.ariaLabel=Me,this._domNode.role="dialog",this._domNode.style.width="".concat(je,"px"),this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(e),this._domNode.appendChild(this._closeBtn.domNode),this._domNode.appendChild(i),this._resizeSash=new le.g(this._domNode,this,{orientation:0,size:2}),this._resized=!1;let o=je;this._register(this._resizeSash.onDidStart((()=>{o=ie.w(this._domNode)}))),this._register(this._resizeSash.onDidChange((e=>{this._resized=!0;const t=o+e.startX-e.currentX;if(t<je)return;t>(parseFloat(ie.Dx(this._domNode).maxWidth)||0)||(this._domNode.style.width="".concat(t,"px"),this._isReplaceVisible&&(this._replaceInput.width=ie.w(this._findInput.domNode)),this._findInput.inputBox.layout(),this._tryUpdateHeight())}))),this._register(this._resizeSash.onDidReset((()=>{const e=ie.w(this._domNode);if(e<je)return;let t=je;if(!this._resized||e===je){const e=this._codeEditor.getLayoutInfo();t=e.width-28-e.minimap.minimapWidth-15,this._resized=!0}this._domNode.style.width="".concat(t,"px"),this._isReplaceVisible&&(this._replaceInput.width=ie.w(this._findInput.domNode)),this._findInput.inputBox.layout()})))}updateAccessibilitySupport(){const e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(2!==e)}}Xe.ID="editor.contrib.findWidget";class et extends oe.${constructor(e){super(),this._opts=e;let t="button";this._opts.className&&(t=t+" "+this._opts.className),this._opts.icon&&(t=t+" "+Se.k.asClassName(this._opts.icon)),this._domNode=document.createElement("div"),this._domNode.title=this._opts.label,this._domNode.tabIndex=0,this._domNode.className=t,this._domNode.setAttribute("role","button"),this._domNode.setAttribute("aria-label",this._opts.label),this.onclick(this._domNode,(e=>{this._opts.onTrigger(),e.preventDefault()})),this.onkeydown(this._domNode,(e=>{var t,i;if(e.equals(10)||e.equals(3))return this._opts.onTrigger(),void e.preventDefault();null===(i=(t=this._opts).onKeyDown)||void 0===i||i.call(t,e)}))}get domNode(){return this._domNode}isEnabled(){return this._domNode.tabIndex>=0}focus(){this._domNode.focus()}setEnabled(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}setExpanded(e){this._domNode.setAttribute("aria-expanded",String(!!e)),e?(this._domNode.classList.remove(...Se.k.asClassNameArray(Ne)),this._domNode.classList.add(...Se.k.asClassNameArray(Ie))):(this._domNode.classList.remove(...Se.k.asClassNameArray(Ie)),this._domNode.classList.add(...Se.k.asClassNameArray(Ne)))}}(0,v.Ic)(((e,t)=>{const i=(e,i)=>{i&&t.addRule(".monaco-editor ".concat(e," { background-color: ").concat(i,"; }"))};i(".findMatch",e.getColor(f.MUv)),i(".currentFindMatch",e.getColor(f.nyM)),i(".findScope",e.getColor(f.jUe));i(".find-widget",e.getColor(f.D0T));const s=e.getColor(f.rh);s&&t.addRule(".monaco-editor .find-widget { box-shadow: 0 0 8px 2px ".concat(s,"; }"));const o=e.getColor(f.A42);o&&t.addRule(".monaco-editor .find-widget { border-left: 1px solid ".concat(o,"; border-right: 1px solid ").concat(o,"; border-bottom: 1px solid ").concat(o,"; }"));const n=e.getColor(f.EiJ);n&&t.addRule(".monaco-editor .findMatch { border: 1px ".concat((0,be.c3)(e.type)?"dotted":"solid"," ").concat(n,"; box-sizing: border-box; }"));const r=e.getColor(f.pnM);r&&t.addRule(".monaco-editor .currentFindMatch { border: 2px solid ".concat(r,"; padding: 1px; box-sizing: border-box; }"));const a=e.getColor(f.gkn);a&&t.addRule(".monaco-editor .findScope { border: 1px ".concat((0,be.c3)(e.type)?"dashed":"solid"," ").concat(a,"; }"));const d=e.getColor(f.lRK);d&&t.addRule(".monaco-editor .find-widget { border: 1px solid ".concat(d,"; }"));const h=e.getColor(f.Hfx);h&&t.addRule(".monaco-editor .find-widget { color: ".concat(h,"; }"));const c=e.getColor(f.Ido);c&&t.addRule(".monaco-editor .find-widget.no-results .matchesCount { color: ".concat(c,"; }"));const l=e.getColor(f.Ng6);if(l)t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: ".concat(l,"; }"));else{const i=e.getColor(f.D1_);i&&t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: ".concat(i,"; }"))}const u=e.getColor(f.lUq);u&&t.addRule("\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ".concat(u," !important;\n\t\t}\n\t"));const p=e.getColor(f.R80);p&&t.addRule(".monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ".concat(p,"; }"))}));var tt,it=i(14443),st=i(76344),ot=i(92361),nt=i(75256),rt=i(49431),at=i(67949),dt=i(88463),ht=function(e,t,i,s){var o,n=arguments.length,r=n<3?t:null===s?s=Object.getOwnPropertyDescriptor(t,i):s;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,t,i,s);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(r=(n<3?o(r):n>3?o(t,i,r):o(t,i))||r);return n>3&&r&&Object.defineProperty(t,i,r),r},ct=function(e,t){return function(i,s){t(i,s,e)}},lt=function(e,t,i,s){return new(i||(i=Promise))((function(o,n){function r(e){try{d(s.next(e))}catch(t){n(t)}}function a(e){try{d(s.throw(e))}catch(t){n(t)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(r,a)}d((s=s.apply(e,t||[])).next())}))};const ut=524288;function pt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.hasModel())return null;const s=e.getSelection();if("single"===t&&s.startLineNumber===s.endLineNumber||"multiple"===t)if(s.isEmpty()){const t=e.getConfiguredWordAtPosition(s.getStartPosition());if(t&&!1===i)return t.word}else if(e.getModel().getValueLengthInRange(s)<ut)return e.getModel().getValueInRange(s);return null}let gt=tt=class extends o.JT{get editor(){return this._editor}static get(e){return e.getContribution(tt.ID)}constructor(e,t,i,o,n){super(),this._editor=e,this._findWidgetVisible=D.bindTo(t),this._contextKeyService=t,this._storageService=i,this._clipboardService=o,this._notificationService=n,this._updateHistoryDelayer=new s.vp(500),this._state=this._register(new de),this.loadQueryState(),this._register(this._state.onFindReplaceStateChange((e=>this._onStateChanged(e)))),this._model=null,this._register(this._editor.onDidChangeModel((()=>{const e=this._editor.getModel()&&this._state.isRevealed;this.disposeModel(),this._state.change({searchScope:null,matchCase:this._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:this._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&this._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:this._editor.getOption(41).loop})})))}dispose(){this.disposeModel(),super.dispose()}disposeModel(){this._model&&(this._model.dispose(),this._model=null)}_onStateChanged(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}saveQueryState(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}loadQueryState(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}isFindInputFocused(){return!!P.getValue(this._contextKeyService)}getState(){return this._state}closeFindWidget(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}toggleCaseSensitive(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleWholeWords(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}toggleRegex(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}togglePreserveCase(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}toggleSearchScope(){if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){const e=this._editor.getSelections();e.map((e=>(1===e.endColumn&&e.endLineNumber>e.startLineNumber&&(e=e.setEndPosition(e.endLineNumber-1,this._editor.getModel().getLineMaxColumn(e.endLineNumber-1))),e.isEmpty()?null:e))).filter((e=>!!e)),e.length&&this._state.change({searchScope:e},!0)}}setSearchString(e){this._state.isRegex&&(e=n.ec(e)),this._state.change({searchString:e},!1)}highlightFindOptions(){}_start(e,t){return lt(this,void 0,void 0,(function*(){if(this.disposeModel(),!this._editor.hasModel())return;const i=Object.assign(Object.assign({},t),{isRevealed:!0});if("single"===e.seedSearchStringFromSelection){const t=pt(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection);t&&(this._state.isRegex?i.searchString=n.ec(t):i.searchString=t)}else if("multiple"===e.seedSearchStringFromSelection&&!e.updateSearchScope){const t=pt(this._editor,e.seedSearchStringFromSelection);t&&(i.searchString=t)}if(!i.searchString&&e.seedSearchStringFromGlobalClipboard){const e=yield this.getGlobalBufferTerm();if(!this._editor.hasModel())return;e&&(i.searchString=e)}if(e.forceRevealReplace||i.isReplaceRevealed?i.isReplaceRevealed=!0:this._findWidgetVisible.get()||(i.isReplaceRevealed=!1),e.updateSearchScope){const e=this._editor.getSelections();e.some((e=>!e.isEmpty()))&&(i.searchScope=e)}i.loop=e.loop,this._state.change(i,!1),this._model||(this._model=new te(this._editor,this._state))}))}start(e,t){return this._start(e,t)}moveToNextMatch(){return!!this._model&&(this._model.moveToNextMatch(),!0)}moveToPrevMatch(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}goToMatch(e){return!!this._model&&(this._model.moveToMatch(e),!0)}replace(){return!!this._model&&(this._model.replace(),!0)}replaceAll(){var e;return!!this._model&&((null===(e=this._editor.getModel())||void 0===e?void 0:e.isTooLargeForHeapOperation())?(this._notificationService.warn(_e.NC("too.large.for.replaceall","The file is too large to perform a replace all operation.")),!1):(this._model.replaceAll(),!0))}selectAllMatches(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}getGlobalBufferTerm(){return lt(this,void 0,void 0,(function*(){return this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()?this._clipboardService.readFindText():""}))}setGlobalBufferTerm(e){this._editor.getOption(41).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}};gt.ID="editor.contrib.findController",gt=tt=ht([ct(1,R.i6),ct(2,dt.Uy),ct(3,st.p),ct(4,rt.lT)],gt);let _t=class extends gt{constructor(e,t,i,s,o,n,r,a){super(e,i,r,a,n),this._contextViewService=t,this._keybindingService=s,this._themeService=o,this._widget=null,this._findOptionsWidget=null}_start(e,t){const i=Object.create(null,{_start:{get:()=>super._start}});return lt(this,void 0,void 0,(function*(){this._widget||this._createFindWidget();const s=this._editor.getSelection();let o=!1;switch(this._editor.getOption(41).autoFindInSelection){case"always":o=!0;break;case"never":o=!1;break;case"multiline":o=!!s&&s.startLineNumber!==s.endLineNumber;break}e.updateSearchScope=e.updateSearchScope||o,yield i._start.call(this,e,t),this._widget&&(2===e.shouldFocus?this._widget.focusReplaceInput():1===e.shouldFocus&&this._widget.focusFindInput())}))}highlightFindOptions(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}_createFindWidget(){this._widget=this._register(new Xe(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new ne(this._editor,this._state,this._keybindingService))}};_t=ht([ct(1,ot.u),ct(2,R.i6),ct(3,nt.d),ct(4,v.XE),ct(5,rt.lT),ct(6,dt.Uy),ct(7,st.p)],_t);const mt=(0,r.rn)(new r.jY({id:A,label:_e.NC("startFindAction","Find"),alias:"Find",precondition:R.Ao.or(d.u.focus,R.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:it.eH.MenubarEditMenu,group:"3_find",title:_e.NC({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}}));mt.addImplementation(0,((e,t,i)=>{const s=gt.get(t);return!!s&&s.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(41).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(41).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getOption(41).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop})}));const ft={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:_e.NC("actions.find.isRegexOverride",'Overrides "Use Regular Expression" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:_e.NC("actions.find.wholeWordOverride",'Overrides "Match Whole Word" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:_e.NC("actions.find.matchCaseOverride",'Overrides "Math Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:_e.NC("actions.find.preserveCaseOverride",'Overrides "Preserve Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},findInSelection:{type:"boolean"}}}}]};class vt extends r.R6{constructor(){super({id:W,label:_e.NC("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:ft})}run(e,t,i){return lt(this,void 0,void 0,(function*(){const e=gt.get(t);if(e){const s=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:void 0!==i.replaceString,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{};yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===e.getState().searchString.length&&"never"!==t.getOption(41).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(41).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(null===i||void 0===i?void 0:i.findInSelection)||!1,loop:t.getOption(41).loop},s),e.setGlobalBufferTerm(e.getState().searchString)}}))}}class St extends r.R6{constructor(){super({id:L,label:_e.NC("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}run(e,t){return lt(this,void 0,void 0,(function*(){const e=gt.get(t);e&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),e.setGlobalBufferTerm(e.getState().searchString))}))}}class bt extends r.R6{run(e,t){return lt(this,void 0,void 0,(function*(){const e=gt.get(t);e&&!this._run(e)&&(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===e.getState().searchString.length&&"never"!==t.getOption(41).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(41).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(e))}))}}class Ct extends bt{constructor(){super({id:V,label:_e.NC("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:d.u.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:R.Ao.and(d.u.focus,P),primary:3,weight:100}]})}_run(e){return!!e.moveToNextMatch()&&(e.editor.pushUndoStop(),!0)}}class yt extends bt{constructor(){super({id:B,label:_e.NC("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:d.u.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:R.Ao.and(d.u.focus,P),primary:1027,weight:100}]})}_run(e){return e.moveToPrevMatch()}}class wt extends r.R6{constructor(){super({id:H,label:_e.NC("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:D}),this._highlightDecorations=[]}run(e,t,i){const s=gt.get(t);if(!s)return;const o=s.getState().matchesCount;if(o<1){return void e.get(rt.lT).notify({severity:rt.zb.Warning,message:_e.NC("findMatchAction.noResults","No matches. Try searching for something else.")})}const n=e.get(at.eJ).createInputBox();n.placeholder=_e.NC("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",o);const r=e=>{const t=parseInt(e);if(isNaN(t))return;const i=s.getState().matchesCount;return t>0&&t<=i?t-1:t<0&&t>=-i?i+t:void 0},a=e=>{const i=r(e);if("number"===typeof i){n.validationMessage=void 0,s.goToMatch(i);const e=s.getState().currentMatch;e&&this.addDecorations(t,e)}else n.validationMessage=_e.NC("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",s.getState().matchesCount),this.clearDecorations(t)};n.onDidChangeValue((e=>{a(e)})),n.onDidAccept((()=>{const e=r(n.value);"number"===typeof e?(s.goToMatch(e),n.hide()):n.validationMessage=_e.NC("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",s.getState().matchesCount)})),n.onDidHide((()=>{this.clearDecorations(t),n.dispose()})),n.show()}clearDecorations(e){e.changeDecorations((e=>{this._highlightDecorations=e.deltaDecorations(this._highlightDecorations,[])}))}addDecorations(e,t){e.changeDecorations((e=>{this._highlightDecorations=e.deltaDecorations(this._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:(0,v.EN)(a.m9),position:h.sh.Full}}}])}))}}class xt extends r.R6{run(e,t){return lt(this,void 0,void 0,(function*(){const e=gt.get(t);if(!e)return;const i=pt(t,"single",!1);i&&e.setSearchString(i),this._run(e)||(yield e.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop}),this._run(e))}))}}class Nt extends xt{constructor(){super({id:q,label:_e.NC("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:d.u.focus,primary:2109,weight:100}})}_run(e){return e.moveToNextMatch()}}class It extends xt{constructor(){super({id:U,label:_e.NC("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:d.u.focus,primary:3133,weight:100}})}_run(e){return e.moveToPrevMatch()}}const Rt=(0,r.rn)(new r.jY({id:K,label:_e.NC("startReplace","Replace"),alias:"Replace",precondition:R.Ao.or(d.u.focus,R.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:it.eH.MenubarEditMenu,group:"3_find",title:_e.NC({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}}));Rt.addImplementation(0,((e,t,i)=>{if(!t.hasModel()||t.getOption(90))return!1;const s=gt.get(t);if(!s)return!1;const o=t.getSelection(),n=s.isFindInputFocused(),r=!o.isEmpty()&&o.startLineNumber===o.endLineNumber&&"never"!==t.getOption(41).seedSearchStringFromSelection&&!n,a=n||r?2:1;return s.start({forceRevealReplace:!0,seedSearchStringFromSelection:r?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(41).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==t.getOption(41).seedSearchStringFromSelection,shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(41).loop})})),(0,r._K)(gt.ID,_t,0),(0,r.Qr)(vt),(0,r.Qr)(St),(0,r.Qr)(Ct),(0,r.Qr)(yt),(0,r.Qr)(wt),(0,r.Qr)(Nt),(0,r.Qr)(It);const Dt=r._l.bindToContribution(gt.get);(0,r.fK)(new Dt({id:Z,precondition:D,handler:e=>e.closeFindWidget(),kbOpts:{weight:105,kbExpr:R.Ao.and(d.u.focus,R.Ao.not("isComposing")),primary:9,secondary:[1033]}})),(0,r.fK)(new Dt({id:j,precondition:void 0,handler:e=>e.toggleCaseSensitive(),kbOpts:{weight:105,kbExpr:d.u.focus,primary:M.primary,mac:M.mac,win:M.win,linux:M.linux}})),(0,r.fK)(new Dt({id:G,precondition:void 0,handler:e=>e.toggleWholeWords(),kbOpts:{weight:105,kbExpr:d.u.focus,primary:O.primary,mac:O.mac,win:O.win,linux:O.linux}})),(0,r.fK)(new Dt({id:z,precondition:void 0,handler:e=>e.toggleRegex(),kbOpts:{weight:105,kbExpr:d.u.focus,primary:F.primary,mac:F.mac,win:F.win,linux:F.linux}})),(0,r.fK)(new Dt({id:Y,precondition:void 0,handler:e=>e.toggleSearchScope(),kbOpts:{weight:105,kbExpr:d.u.focus,primary:T.primary,mac:T.mac,win:T.win,linux:T.linux}})),(0,r.fK)(new Dt({id:J,precondition:void 0,handler:e=>e.togglePreserveCase(),kbOpts:{weight:105,kbExpr:d.u.focus,primary:k.primary,mac:k.mac,win:k.win,linux:k.linux}})),(0,r.fK)(new Dt({id:Q,precondition:D,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:d.u.focus,primary:3094}})),(0,r.fK)(new Dt({id:Q,precondition:D,handler:e=>e.replace(),kbOpts:{weight:105,kbExpr:R.Ao.and(d.u.focus,E),primary:3}})),(0,r.fK)(new Dt({id:$,precondition:D,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:d.u.focus,primary:2563}})),(0,r.fK)(new Dt({id:$,precondition:D,handler:e=>e.replaceAll(),kbOpts:{weight:105,kbExpr:R.Ao.and(d.u.focus,E),primary:void 0,mac:{primary:2051}}})),(0,r.fK)(new Dt({id:X,precondition:D,handler:e=>e.selectAllMatches(),kbOpts:{weight:105,kbExpr:d.u.focus,primary:515}}))}}]);
//# sourceMappingURL=monaco-editor-vendor.b74e11c3.2f7bde46.js.map