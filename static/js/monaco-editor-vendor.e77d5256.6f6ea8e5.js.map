{"version":3,"file":"static/js/monaco-editor-vendor.e77d5256.6f6ea8e5.js","mappings":"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","sources":["../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/dnd.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/editorBrowser.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/editorDom.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/editorExtensions.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/services/abstractCodeEditorService.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/services/bulkEditService.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/services/codeEditorService.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/services/editorWorkerService.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/services/markerDecorations.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/services/openerService.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/services/webWorker.js","../node_modules/@uiw/react-monacoeditor/node_modules/monaco-editor/esm/vs/editor/browser/stableEditorScroll.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { DataTransfers } from '../../base/browser/dnd.js';\nimport { createFileDataTransferItem, createStringDataTransferItem, UriList, VSDataTransfer } from '../../base/common/dataTransfer.js';\nimport { Mimes } from '../../base/common/mime.js';\nimport { URI } from '../../base/common/uri.js';\nimport { CodeDataTransfers, extractEditorsDropData } from '../../platform/dnd/browser/dnd.js';\nexport function toVSDataTransfer(dataTransfer) {\n    const vsDataTransfer = new VSDataTransfer();\n    for (const item of dataTransfer.items) {\n        const type = item.type;\n        if (item.kind === 'string') {\n            const asStringValue = new Promise(resolve => item.getAsString(resolve));\n            vsDataTransfer.append(type, createStringDataTransferItem(asStringValue));\n        }\n        else if (item.kind === 'file') {\n            const file = item.getAsFile();\n            if (file) {\n                vsDataTransfer.append(type, createFileDataTransferItemFromFile(file));\n            }\n        }\n    }\n    return vsDataTransfer;\n}\nfunction createFileDataTransferItemFromFile(file) {\n    const uri = file.path ? URI.parse(file.path) : undefined;\n    return createFileDataTransferItem(file.name, uri, () => __awaiter(this, void 0, void 0, function* () {\n        return new Uint8Array(yield file.arrayBuffer());\n    }));\n}\nconst INTERNAL_DND_MIME_TYPES = Object.freeze([\n    CodeDataTransfers.EDITORS,\n    CodeDataTransfers.FILES,\n    DataTransfers.RESOURCES,\n]);\nexport function addExternalEditorsDropData(dataTransfer, dragEvent, overwriteUriList = false) {\n    var _a;\n    if (dragEvent.dataTransfer && (overwriteUriList || !dataTransfer.has(Mimes.uriList))) {\n        const editorData = extractEditorsDropData(dragEvent)\n            .filter(input => input.resource)\n            .map(input => input.resource.toString());\n        // Also add in the files\n        for (const item of (_a = dragEvent.dataTransfer) === null || _a === void 0 ? void 0 : _a.items) {\n            const file = item.getAsFile();\n            if (file) {\n                editorData.push(file.path ? URI.file(file.path).toString() : file.name);\n            }\n        }\n        if (editorData.length) {\n            dataTransfer.replace(Mimes.uriList, createStringDataTransferItem(UriList.create(editorData)));\n        }\n    }\n    for (const internal of INTERNAL_DND_MIME_TYPES) {\n        dataTransfer.delete(internal);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as editorCommon from '../common/editorCommon.js';\n/**\n *@internal\n */\nexport function isCodeEditor(thing) {\n    if (thing && typeof thing.getEditorType === 'function') {\n        return thing.getEditorType() === editorCommon.EditorType.ICodeEditor;\n    }\n    else {\n        return false;\n    }\n}\n/**\n *@internal\n */\nexport function isDiffEditor(thing) {\n    if (thing && typeof thing.getEditorType === 'function') {\n        return thing.getEditorType() === editorCommon.EditorType.IDiffEditor;\n    }\n    else {\n        return false;\n    }\n}\n/**\n *@internal\n */\nexport function isCompositeEditor(thing) {\n    return !!thing\n        && typeof thing === 'object'\n        && typeof thing.onDidChangeActiveEditor === 'function';\n}\n/**\n *@internal\n */\nexport function getCodeEditor(thing) {\n    if (isCodeEditor(thing)) {\n        return thing;\n    }\n    if (isDiffEditor(thing)) {\n        return thing.getModifiedEditor();\n    }\n    if (isCompositeEditor(thing) && isCodeEditor(thing.activeCodeEditor)) {\n        return thing.activeCodeEditor;\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../base/browser/dom.js';\nimport { GlobalPointerMoveMonitor } from '../../base/browser/globalPointerMoveMonitor.js';\nimport { StandardMouseEvent } from '../../base/browser/mouseEvent.js';\nimport { RunOnceScheduler } from '../../base/common/async.js';\nimport { Disposable } from '../../base/common/lifecycle.js';\nimport { asCssVariable } from '../../platform/theme/common/colorRegistry.js';\n/**\n * Coordinates relative to the whole document (e.g. mouse event's pageX and pageY)\n */\nexport class PageCoordinates {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this._pageCoordinatesBrand = undefined;\n    }\n    toClientCoordinates() {\n        return new ClientCoordinates(this.x - window.scrollX, this.y - window.scrollY);\n    }\n}\n/**\n * Coordinates within the application's client area (i.e. origin is document's scroll position).\n *\n * For example, clicking in the top-left corner of the client area will\n * always result in a mouse event with a client.x value of 0, regardless\n * of whether the page is scrolled horizontally.\n */\nexport class ClientCoordinates {\n    constructor(clientX, clientY) {\n        this.clientX = clientX;\n        this.clientY = clientY;\n        this._clientCoordinatesBrand = undefined;\n    }\n    toPageCoordinates() {\n        return new PageCoordinates(this.clientX + window.scrollX, this.clientY + window.scrollY);\n    }\n}\n/**\n * The position of the editor in the page.\n */\nexport class EditorPagePosition {\n    constructor(x, y, width, height) {\n        this.x = x;\n        this.y = y;\n        this.width = width;\n        this.height = height;\n        this._editorPagePositionBrand = undefined;\n    }\n}\n/**\n * Coordinates relative to the the (top;left) of the editor that can be used safely with other internal editor metrics.\n * **NOTE**: This position is obtained by taking page coordinates and transforming them relative to the\n * editor's (top;left) position in a way in which scale transformations are taken into account.\n * **NOTE**: These coordinates could be negative if the mouse position is outside the editor.\n */\nexport class CoordinatesRelativeToEditor {\n    constructor(x, y) {\n        this.x = x;\n        this.y = y;\n        this._positionRelativeToEditorBrand = undefined;\n    }\n}\nexport function createEditorPagePosition(editorViewDomNode) {\n    const editorPos = dom.getDomNodePagePosition(editorViewDomNode);\n    return new EditorPagePosition(editorPos.left, editorPos.top, editorPos.width, editorPos.height);\n}\nexport function createCoordinatesRelativeToEditor(editorViewDomNode, editorPagePosition, pos) {\n    // The editor's page position is read from the DOM using getBoundingClientRect().\n    //\n    // getBoundingClientRect() returns the actual dimensions, while offsetWidth and offsetHeight\n    // reflect the unscaled size. We can use this difference to detect a transform:scale()\n    // and we will apply the transformation in inverse to get mouse coordinates that make sense inside the editor.\n    //\n    // This could be expanded to cover rotation as well maybe by walking the DOM up from `editorViewDomNode`\n    // and computing the effective transformation matrix using getComputedStyle(element).transform.\n    //\n    const scaleX = editorPagePosition.width / editorViewDomNode.offsetWidth;\n    const scaleY = editorPagePosition.height / editorViewDomNode.offsetHeight;\n    // Adjust mouse offsets if editor appears to be scaled via transforms\n    const relativeX = (pos.x - editorPagePosition.x) / scaleX;\n    const relativeY = (pos.y - editorPagePosition.y) / scaleY;\n    return new CoordinatesRelativeToEditor(relativeX, relativeY);\n}\nexport class EditorMouseEvent extends StandardMouseEvent {\n    constructor(e, isFromPointerCapture, editorViewDomNode) {\n        super(e);\n        this._editorMouseEventBrand = undefined;\n        this.isFromPointerCapture = isFromPointerCapture;\n        this.pos = new PageCoordinates(this.posx, this.posy);\n        this.editorPos = createEditorPagePosition(editorViewDomNode);\n        this.relativePos = createCoordinatesRelativeToEditor(editorViewDomNode, this.editorPos, this.pos);\n    }\n}\nexport class EditorMouseEventFactory {\n    constructor(editorViewDomNode) {\n        this._editorViewDomNode = editorViewDomNode;\n    }\n    _create(e) {\n        return new EditorMouseEvent(e, false, this._editorViewDomNode);\n    }\n    onContextMenu(target, callback) {\n        return dom.addDisposableListener(target, 'contextmenu', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseUp(target, callback) {\n        return dom.addDisposableListener(target, 'mouseup', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.MOUSE_DOWN, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_DOWN, (e) => {\n            callback(this._create(e), e.pointerId);\n        });\n    }\n    onMouseLeave(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.MOUSE_LEAVE, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onMouseMove(target, callback) {\n        return dom.addDisposableListener(target, 'mousemove', (e) => callback(this._create(e)));\n    }\n}\nexport class EditorPointerEventFactory {\n    constructor(editorViewDomNode) {\n        this._editorViewDomNode = editorViewDomNode;\n    }\n    _create(e) {\n        return new EditorMouseEvent(e, false, this._editorViewDomNode);\n    }\n    onPointerUp(target, callback) {\n        return dom.addDisposableListener(target, 'pointerup', (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerDown(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_DOWN, (e) => {\n            callback(this._create(e), e.pointerId);\n        });\n    }\n    onPointerLeave(target, callback) {\n        return dom.addDisposableListener(target, dom.EventType.POINTER_LEAVE, (e) => {\n            callback(this._create(e));\n        });\n    }\n    onPointerMove(target, callback) {\n        return dom.addDisposableListener(target, 'pointermove', (e) => callback(this._create(e)));\n    }\n}\nexport class GlobalEditorPointerMoveMonitor extends Disposable {\n    constructor(editorViewDomNode) {\n        super();\n        this._editorViewDomNode = editorViewDomNode;\n        this._globalPointerMoveMonitor = this._register(new GlobalPointerMoveMonitor());\n        this._keydownListener = null;\n    }\n    startMonitoring(initialElement, pointerId, initialButtons, pointerMoveCallback, onStopCallback) {\n        // Add a <<capture>> keydown event listener that will cancel the monitoring\n        // if something other than a modifier key is pressed\n        this._keydownListener = dom.addStandardDisposableListener(document, 'keydown', (e) => {\n            const chord = e.toKeyCodeChord();\n            if (chord.isModifierKey()) {\n                // Allow modifier keys\n                return;\n            }\n            this._globalPointerMoveMonitor.stopMonitoring(true, e.browserEvent);\n        }, true);\n        this._globalPointerMoveMonitor.startMonitoring(initialElement, pointerId, initialButtons, (e) => {\n            pointerMoveCallback(new EditorMouseEvent(e, true, this._editorViewDomNode));\n        }, (e) => {\n            this._keydownListener.dispose();\n            onStopCallback(e);\n        });\n    }\n    stopMonitoring() {\n        this._globalPointerMoveMonitor.stopMonitoring(true);\n    }\n}\n/**\n * A helper to create dynamic css rules, bound to a class name.\n * Rules are reused.\n * Reference counting and delayed garbage collection ensure that no rules leak.\n*/\nclass DynamicCssRules {\n    constructor(_editor) {\n        this._editor = _editor;\n        this._instanceId = ++DynamicCssRules._idPool;\n        this._counter = 0;\n        this._rules = new Map();\n        // We delay garbage collection so that hanging rules can be reused.\n        this._garbageCollectionScheduler = new RunOnceScheduler(() => this.garbageCollect(), 1000);\n    }\n    createClassNameRef(options) {\n        const rule = this.getOrCreateRule(options);\n        rule.increaseRefCount();\n        return {\n            className: rule.className,\n            dispose: () => {\n                rule.decreaseRefCount();\n                this._garbageCollectionScheduler.schedule();\n            }\n        };\n    }\n    getOrCreateRule(properties) {\n        const key = this.computeUniqueKey(properties);\n        let existingRule = this._rules.get(key);\n        if (!existingRule) {\n            const counter = this._counter++;\n            existingRule = new RefCountedCssRule(key, `dyn-rule-${this._instanceId}-${counter}`, dom.isInShadowDOM(this._editor.getContainerDomNode())\n                ? this._editor.getContainerDomNode()\n                : undefined, properties);\n            this._rules.set(key, existingRule);\n        }\n        return existingRule;\n    }\n    computeUniqueKey(properties) {\n        return JSON.stringify(properties);\n    }\n    garbageCollect() {\n        for (const rule of this._rules.values()) {\n            if (!rule.hasReferences()) {\n                this._rules.delete(rule.key);\n                rule.dispose();\n            }\n        }\n    }\n}\nDynamicCssRules._idPool = 0;\nexport { DynamicCssRules };\nclass RefCountedCssRule {\n    constructor(key, className, _containerElement, properties) {\n        this.key = key;\n        this.className = className;\n        this.properties = properties;\n        this._referenceCount = 0;\n        this._styleElement = dom.createStyleSheet(_containerElement);\n        this._styleElement.textContent = this.getCssText(this.className, this.properties);\n    }\n    getCssText(className, properties) {\n        let str = `.${className} {`;\n        for (const prop in properties) {\n            const value = properties[prop];\n            let cssValue;\n            if (typeof value === 'object') {\n                cssValue = asCssVariable(value.id);\n            }\n            else {\n                cssValue = value;\n            }\n            const cssPropName = camelToDashes(prop);\n            str += `\\n\\t${cssPropName}: ${cssValue};`;\n        }\n        str += `\\n}`;\n        return str;\n    }\n    dispose() {\n        this._styleElement.remove();\n    }\n    increaseRefCount() {\n        this._referenceCount++;\n    }\n    decreaseRefCount() {\n        this._referenceCount--;\n    }\n    hasReferences() {\n        return this._referenceCount > 0;\n    }\n}\nfunction camelToDashes(str) {\n    return str.replace(/(^[A-Z])/, ([first]) => first.toLowerCase())\n        .replace(/([A-Z])/g, ([letter]) => `-${letter.toLowerCase()}`);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as nls from '../../nls.js';\nimport { URI } from '../../base/common/uri.js';\nimport { ICodeEditorService } from './services/codeEditorService.js';\nimport { Position } from '../common/core/position.js';\nimport { IModelService } from '../common/services/model.js';\nimport { ITextModelService } from '../common/services/resolverService.js';\nimport { MenuId, MenuRegistry, Action2 } from '../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../platform/commands/common/commands.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../platform/instantiation/common/instantiation.js';\nimport { KeybindingsRegistry } from '../../platform/keybinding/common/keybindingsRegistry.js';\nimport { Registry } from '../../platform/registry/common/platform.js';\nimport { ITelemetryService } from '../../platform/telemetry/common/telemetry.js';\nimport { withNullAsUndefined, assertType } from '../../base/common/types.js';\nimport { ILogService } from '../../platform/log/common/log.js';\nexport class Command {\n    constructor(opts) {\n        this.id = opts.id;\n        this.precondition = opts.precondition;\n        this._kbOpts = opts.kbOpts;\n        this._menuOpts = opts.menuOpts;\n        this._description = opts.description;\n    }\n    register() {\n        if (Array.isArray(this._menuOpts)) {\n            this._menuOpts.forEach(this._registerMenuItem, this);\n        }\n        else if (this._menuOpts) {\n            this._registerMenuItem(this._menuOpts);\n        }\n        if (this._kbOpts) {\n            const kbOptsArr = Array.isArray(this._kbOpts) ? this._kbOpts : [this._kbOpts];\n            for (const kbOpts of kbOptsArr) {\n                let kbWhen = kbOpts.kbExpr;\n                if (this.precondition) {\n                    if (kbWhen) {\n                        kbWhen = ContextKeyExpr.and(kbWhen, this.precondition);\n                    }\n                    else {\n                        kbWhen = this.precondition;\n                    }\n                }\n                const desc = {\n                    id: this.id,\n                    weight: kbOpts.weight,\n                    args: kbOpts.args,\n                    when: kbWhen,\n                    primary: kbOpts.primary,\n                    secondary: kbOpts.secondary,\n                    win: kbOpts.win,\n                    linux: kbOpts.linux,\n                    mac: kbOpts.mac,\n                };\n                KeybindingsRegistry.registerKeybindingRule(desc);\n            }\n        }\n        CommandsRegistry.registerCommand({\n            id: this.id,\n            handler: (accessor, args) => this.runCommand(accessor, args),\n            description: this._description\n        });\n    }\n    _registerMenuItem(item) {\n        MenuRegistry.appendMenuItem(item.menuId, {\n            group: item.group,\n            command: {\n                id: this.id,\n                title: item.title,\n                icon: item.icon,\n                precondition: this.precondition\n            },\n            when: item.when,\n            order: item.order\n        });\n    }\n}\nexport class MultiCommand extends Command {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, name, implementation) {\n        this._implementations.push({ priority, name, implementation });\n        this._implementations.sort((a, b) => b.priority - a.priority);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i].implementation === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    runCommand(accessor, args) {\n        const logService = accessor.get(ILogService);\n        logService.trace(`Executing Command '${this.id}' which has ${this._implementations.length} bound.`);\n        for (const impl of this._implementations) {\n            const result = impl.implementation(accessor, args);\n            if (result) {\n                logService.trace(`Command '${this.id}' was handled by '${impl.name}'.`);\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n        logService.trace(`The Command '${this.id}' was not handled by any implementation.`);\n    }\n}\n//#endregion\n/**\n * A command that delegates to another command's implementation.\n *\n * This lets different commands be registered but share the same implementation\n */\nexport class ProxyCommand extends Command {\n    constructor(command, opts) {\n        super(opts);\n        this.command = command;\n    }\n    runCommand(accessor, args) {\n        return this.command.runCommand(accessor, args);\n    }\n}\nexport class EditorCommand extends Command {\n    /**\n     * Create a command class that is bound to a certain editor contribution.\n     */\n    static bindToContribution(controllerGetter) {\n        return class EditorControllerCommandImpl extends EditorCommand {\n            constructor(opts) {\n                super(opts);\n                this._callback = opts.handler;\n            }\n            runEditorCommand(accessor, editor, args) {\n                const controller = controllerGetter(editor);\n                if (controller) {\n                    this._callback(controller, args);\n                }\n            }\n        };\n    }\n    static runEditorCommand(accessor, args, precondition, runner) {\n        const codeEditorService = accessor.get(ICodeEditorService);\n        // Find the editor with text focus or active\n        const editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n        if (!editor) {\n            // well, at least we tried...\n            return;\n        }\n        return editor.invokeWithinContext((editorAccessor) => {\n            const kbService = editorAccessor.get(IContextKeyService);\n            if (!kbService.contextMatchesRules(withNullAsUndefined(precondition))) {\n                // precondition does not hold\n                return;\n            }\n            return runner(editorAccessor, editor, args);\n        });\n    }\n    runCommand(accessor, args) {\n        return EditorCommand.runEditorCommand(accessor, args, this.precondition, (accessor, editor, args) => this.runEditorCommand(accessor, editor, args));\n    }\n}\nexport class EditorAction extends EditorCommand {\n    static convertOptions(opts) {\n        let menuOpts;\n        if (Array.isArray(opts.menuOpts)) {\n            menuOpts = opts.menuOpts;\n        }\n        else if (opts.menuOpts) {\n            menuOpts = [opts.menuOpts];\n        }\n        else {\n            menuOpts = [];\n        }\n        function withDefaults(item) {\n            if (!item.menuId) {\n                item.menuId = MenuId.EditorContext;\n            }\n            if (!item.title) {\n                item.title = opts.label;\n            }\n            item.when = ContextKeyExpr.and(opts.precondition, item.when);\n            return item;\n        }\n        if (Array.isArray(opts.contextMenuOpts)) {\n            menuOpts.push(...opts.contextMenuOpts.map(withDefaults));\n        }\n        else if (opts.contextMenuOpts) {\n            menuOpts.push(withDefaults(opts.contextMenuOpts));\n        }\n        opts.menuOpts = menuOpts;\n        return opts;\n    }\n    constructor(opts) {\n        super(EditorAction.convertOptions(opts));\n        this.label = opts.label;\n        this.alias = opts.alias;\n    }\n    runEditorCommand(accessor, editor, args) {\n        this.reportTelemetry(accessor, editor);\n        return this.run(accessor, editor, args || {});\n    }\n    reportTelemetry(accessor, editor) {\n        accessor.get(ITelemetryService).publicLog2('editorActionInvoked', { name: this.label, id: this.id });\n    }\n}\nexport class MultiEditorAction extends EditorAction {\n    constructor() {\n        super(...arguments);\n        this._implementations = [];\n    }\n    /**\n     * A higher priority gets to be looked at first\n     */\n    addImplementation(priority, implementation) {\n        this._implementations.push([priority, implementation]);\n        this._implementations.sort((a, b) => b[0] - a[0]);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._implementations.length; i++) {\n                    if (this._implementations[i][1] === implementation) {\n                        this._implementations.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    run(accessor, editor, args) {\n        for (const impl of this._implementations) {\n            const result = impl[1](accessor, editor, args);\n            if (result) {\n                if (typeof result === 'boolean') {\n                    return;\n                }\n                return result;\n            }\n        }\n    }\n}\n//#endregion EditorAction\n//#region EditorAction2\nexport class EditorAction2 extends Action2 {\n    run(accessor, ...args) {\n        // Find the editor with text focus or active\n        const codeEditorService = accessor.get(ICodeEditorService);\n        const editor = codeEditorService.getFocusedCodeEditor() || codeEditorService.getActiveCodeEditor();\n        if (!editor) {\n            // well, at least we tried...\n            return;\n        }\n        // precondition does hold\n        return editor.invokeWithinContext((editorAccessor) => {\n            const kbService = editorAccessor.get(IContextKeyService);\n            if (kbService.contextMatchesRules(withNullAsUndefined(this.desc.precondition))) {\n                return this.runEditorCommand(editorAccessor, editor, ...args);\n            }\n        });\n    }\n}\n//#endregion\n// --- Registration of commands and actions\nexport function registerModelAndPositionCommand(id, handler) {\n    CommandsRegistry.registerCommand(id, function (accessor, ...args) {\n        const instaService = accessor.get(IInstantiationService);\n        const [resource, position] = args;\n        assertType(URI.isUri(resource));\n        assertType(Position.isIPosition(position));\n        const model = accessor.get(IModelService).getModel(resource);\n        if (model) {\n            const editorPosition = Position.lift(position);\n            return instaService.invokeFunction(handler, model, editorPosition, ...args.slice(2));\n        }\n        return accessor.get(ITextModelService).createModelReference(resource).then(reference => {\n            return new Promise((resolve, reject) => {\n                try {\n                    const result = instaService.invokeFunction(handler, reference.object.textEditorModel, Position.lift(position), args.slice(2));\n                    resolve(result);\n                }\n                catch (err) {\n                    reject(err);\n                }\n            }).finally(() => {\n                reference.dispose();\n            });\n        });\n    });\n}\nexport function registerEditorCommand(editorCommand) {\n    EditorContributionRegistry.INSTANCE.registerEditorCommand(editorCommand);\n    return editorCommand;\n}\nexport function registerEditorAction(ctor) {\n    const action = new ctor();\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerMultiEditorAction(action) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(action);\n    return action;\n}\nexport function registerInstantiatedEditorAction(editorAction) {\n    EditorContributionRegistry.INSTANCE.registerEditorAction(editorAction);\n}\n/**\n * Registers an editor contribution. Editor contributions have a lifecycle which is bound\n * to a specific code editor instance.\n */\nexport function registerEditorContribution(id, ctor, instantiation) {\n    EditorContributionRegistry.INSTANCE.registerEditorContribution(id, ctor, instantiation);\n}\nexport var EditorExtensionsRegistry;\n(function (EditorExtensionsRegistry) {\n    function getEditorCommand(commandId) {\n        return EditorContributionRegistry.INSTANCE.getEditorCommand(commandId);\n    }\n    EditorExtensionsRegistry.getEditorCommand = getEditorCommand;\n    function getEditorActions() {\n        return EditorContributionRegistry.INSTANCE.getEditorActions();\n    }\n    EditorExtensionsRegistry.getEditorActions = getEditorActions;\n    function getEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions();\n    }\n    EditorExtensionsRegistry.getEditorContributions = getEditorContributions;\n    function getSomeEditorContributions(ids) {\n        return EditorContributionRegistry.INSTANCE.getEditorContributions().filter(c => ids.indexOf(c.id) >= 0);\n    }\n    EditorExtensionsRegistry.getSomeEditorContributions = getSomeEditorContributions;\n    function getDiffEditorContributions() {\n        return EditorContributionRegistry.INSTANCE.getDiffEditorContributions();\n    }\n    EditorExtensionsRegistry.getDiffEditorContributions = getDiffEditorContributions;\n})(EditorExtensionsRegistry || (EditorExtensionsRegistry = {}));\n// Editor extension points\nconst Extensions = {\n    EditorCommonContributions: 'editor.contributions'\n};\nclass EditorContributionRegistry {\n    constructor() {\n        this.editorContributions = [];\n        this.diffEditorContributions = [];\n        this.editorActions = [];\n        this.editorCommands = Object.create(null);\n    }\n    registerEditorContribution(id, ctor, instantiation) {\n        this.editorContributions.push({ id, ctor: ctor, instantiation });\n    }\n    getEditorContributions() {\n        return this.editorContributions.slice(0);\n    }\n    getDiffEditorContributions() {\n        return this.diffEditorContributions.slice(0);\n    }\n    registerEditorAction(action) {\n        action.register();\n        this.editorActions.push(action);\n    }\n    getEditorActions() {\n        return this.editorActions;\n    }\n    registerEditorCommand(editorCommand) {\n        editorCommand.register();\n        this.editorCommands[editorCommand.id] = editorCommand;\n    }\n    getEditorCommand(commandId) {\n        return (this.editorCommands[commandId] || null);\n    }\n}\nEditorContributionRegistry.INSTANCE = new EditorContributionRegistry();\nRegistry.add(Extensions.EditorCommonContributions, EditorContributionRegistry.INSTANCE);\nfunction registerCommand(command) {\n    command.register();\n    return command;\n}\nexport const UndoCommand = registerCommand(new MultiCommand({\n    id: 'undo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 56 /* KeyCode.KeyZ */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miUndo', comment: ['&& denotes a mnemonic'] }, \"&&Undo\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('undo', \"Undo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(UndoCommand, { id: 'default:undo', precondition: undefined }));\nexport const RedoCommand = registerCommand(new MultiCommand({\n    id: 'redo',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 55 /* KeyCode.KeyY */,\n        secondary: [2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */],\n        mac: { primary: 2048 /* KeyMod.CtrlCmd */ | 1024 /* KeyMod.Shift */ | 56 /* KeyCode.KeyZ */ }\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarEditMenu,\n            group: '1_do',\n            title: nls.localize({ key: 'miRedo', comment: ['&& denotes a mnemonic'] }, \"&&Redo\"),\n            order: 2\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('redo', \"Redo\"),\n            order: 1\n        }]\n}));\nregisterCommand(new ProxyCommand(RedoCommand, { id: 'default:redo', precondition: undefined }));\nexport const SelectAllCommand = registerCommand(new MultiCommand({\n    id: 'editor.action.selectAll',\n    precondition: undefined,\n    kbOpts: {\n        weight: 0 /* KeybindingWeight.EditorCore */,\n        kbExpr: null,\n        primary: 2048 /* KeyMod.CtrlCmd */ | 31 /* KeyCode.KeyA */\n    },\n    menuOpts: [{\n            menuId: MenuId.MenubarSelectionMenu,\n            group: '1_basic',\n            title: nls.localize({ key: 'miSelectAll', comment: ['&& denotes a mnemonic'] }, \"&&Select All\"),\n            order: 1\n        }, {\n            menuId: MenuId.CommandPalette,\n            group: '',\n            title: nls.localize('selectAll', \"Select All\"),\n            order: 1\n        }]\n}));\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Emitter } from '../../../base/common/event.js';\nimport { Disposable, toDisposable } from '../../../base/common/lifecycle.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet AbstractCodeEditorService = class AbstractCodeEditorService extends Disposable {\n    constructor(_themeService) {\n        super();\n        this._themeService = _themeService;\n        this._onWillCreateCodeEditor = this._register(new Emitter());\n        this._onCodeEditorAdd = this._register(new Emitter());\n        this.onCodeEditorAdd = this._onCodeEditorAdd.event;\n        this._onCodeEditorRemove = this._register(new Emitter());\n        this.onCodeEditorRemove = this._onCodeEditorRemove.event;\n        this._onWillCreateDiffEditor = this._register(new Emitter());\n        this._onDiffEditorAdd = this._register(new Emitter());\n        this.onDiffEditorAdd = this._onDiffEditorAdd.event;\n        this._onDiffEditorRemove = this._register(new Emitter());\n        this.onDiffEditorRemove = this._onDiffEditorRemove.event;\n        this._decorationOptionProviders = new Map();\n        this._codeEditorOpenHandlers = new LinkedList();\n        this._modelProperties = new Map();\n        this._codeEditors = Object.create(null);\n        this._diffEditors = Object.create(null);\n        this._globalStyleSheet = null;\n    }\n    willCreateCodeEditor() {\n        this._onWillCreateCodeEditor.fire();\n    }\n    addCodeEditor(editor) {\n        this._codeEditors[editor.getId()] = editor;\n        this._onCodeEditorAdd.fire(editor);\n    }\n    removeCodeEditor(editor) {\n        if (delete this._codeEditors[editor.getId()]) {\n            this._onCodeEditorRemove.fire(editor);\n        }\n    }\n    listCodeEditors() {\n        return Object.keys(this._codeEditors).map(id => this._codeEditors[id]);\n    }\n    willCreateDiffEditor() {\n        this._onWillCreateDiffEditor.fire();\n    }\n    addDiffEditor(editor) {\n        this._diffEditors[editor.getId()] = editor;\n        this._onDiffEditorAdd.fire(editor);\n    }\n    removeDiffEditor(editor) {\n        if (delete this._diffEditors[editor.getId()]) {\n            this._onDiffEditorRemove.fire(editor);\n        }\n    }\n    listDiffEditors() {\n        return Object.keys(this._diffEditors).map(id => this._diffEditors[id]);\n    }\n    getFocusedCodeEditor() {\n        let editorWithWidgetFocus = null;\n        const editors = this.listCodeEditors();\n        for (const editor of editors) {\n            if (editor.hasTextFocus()) {\n                // bingo!\n                return editor;\n            }\n            if (editor.hasWidgetFocus()) {\n                editorWithWidgetFocus = editor;\n            }\n        }\n        return editorWithWidgetFocus;\n    }\n    removeDecorationType(key) {\n        const provider = this._decorationOptionProviders.get(key);\n        if (provider) {\n            provider.refCount--;\n            if (provider.refCount <= 0) {\n                this._decorationOptionProviders.delete(key);\n                provider.dispose();\n                this.listCodeEditors().forEach((ed) => ed.removeDecorationsByType(key));\n            }\n        }\n    }\n    setModelProperty(resource, key, value) {\n        const key1 = resource.toString();\n        let dest;\n        if (this._modelProperties.has(key1)) {\n            dest = this._modelProperties.get(key1);\n        }\n        else {\n            dest = new Map();\n            this._modelProperties.set(key1, dest);\n        }\n        dest.set(key, value);\n    }\n    getModelProperty(resource, key) {\n        const key1 = resource.toString();\n        if (this._modelProperties.has(key1)) {\n            const innerMap = this._modelProperties.get(key1);\n            return innerMap.get(key);\n        }\n        return undefined;\n    }\n    openCodeEditor(input, source, sideBySide) {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (const handler of this._codeEditorOpenHandlers) {\n                const candidate = yield handler(input, source, sideBySide);\n                if (candidate !== null) {\n                    return candidate;\n                }\n            }\n            return null;\n        });\n    }\n    registerCodeEditorOpenHandler(handler) {\n        const rm = this._codeEditorOpenHandlers.unshift(handler);\n        return toDisposable(rm);\n    }\n};\nAbstractCodeEditorService = __decorate([\n    __param(0, IThemeService)\n], AbstractCodeEditorService);\nexport { AbstractCodeEditorService };\nexport class GlobalStyleSheet {\n    constructor(styleSheet) {\n        this._styleSheet = styleSheet;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { isObject } from '../../../base/common/types.js';\nexport const IBulkEditService = createDecorator('IWorkspaceEditService');\nexport class ResourceEdit {\n    constructor(metadata) {\n        this.metadata = metadata;\n    }\n    static convert(edit) {\n        return edit.edits.map(edit => {\n            if (ResourceTextEdit.is(edit)) {\n                return ResourceTextEdit.lift(edit);\n            }\n            if (ResourceFileEdit.is(edit)) {\n                return ResourceFileEdit.lift(edit);\n            }\n            throw new Error('Unsupported edit');\n        });\n    }\n}\nexport class ResourceTextEdit extends ResourceEdit {\n    static is(candidate) {\n        if (candidate instanceof ResourceTextEdit) {\n            return true;\n        }\n        return isObject(candidate)\n            && URI.isUri(candidate.resource)\n            && isObject(candidate.textEdit);\n    }\n    static lift(edit) {\n        if (edit instanceof ResourceTextEdit) {\n            return edit;\n        }\n        else {\n            return new ResourceTextEdit(edit.resource, edit.textEdit, edit.versionId, edit.metadata);\n        }\n    }\n    constructor(resource, textEdit, versionId = undefined, metadata) {\n        super(metadata);\n        this.resource = resource;\n        this.textEdit = textEdit;\n        this.versionId = versionId;\n    }\n}\nexport class ResourceFileEdit extends ResourceEdit {\n    static is(candidate) {\n        if (candidate instanceof ResourceFileEdit) {\n            return true;\n        }\n        else {\n            return isObject(candidate)\n                && (Boolean(candidate.newResource) || Boolean(candidate.oldResource));\n        }\n    }\n    static lift(edit) {\n        if (edit instanceof ResourceFileEdit) {\n            return edit;\n        }\n        else {\n            return new ResourceFileEdit(edit.oldResource, edit.newResource, edit.options, edit.metadata);\n        }\n    }\n    constructor(oldResource, newResource, options = {}, metadata) {\n        super(metadata);\n        this.oldResource = oldResource;\n        this.newResource = newResource;\n        this.options = options;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const ICodeEditorService = createDecorator('codeEditorService');\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { IntervalTimer, timeout } from '../../../base/common/async.js';\nimport { Disposable, dispose, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { SimpleWorkerClient, logOnceWebWorkerWarning } from '../../../base/common/worker/simpleWorker.js';\nimport { DefaultWorkerFactory } from '../../../base/browser/defaultWorkerFactory.js';\nimport { Range } from '../../common/core/range.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { EditorSimpleWorker } from '../../common/services/editorSimpleWorker.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextResourceConfigurationService } from '../../common/services/textResourceConfiguration.js';\nimport { regExpFlags } from '../../../base/common/strings.js';\nimport { isNonEmptyArray } from '../../../base/common/arrays.js';\nimport { ILogService } from '../../../platform/log/common/log.js';\nimport { StopWatch } from '../../../base/common/stopwatch.js';\nimport { canceled } from '../../../base/common/errors.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { LineRangeMapping, LineRange, RangeMapping } from '../../common/diff/linesDiffComputer.js';\n/**\n * Stop syncing a model to the worker if it was not needed for 1 min.\n */\nconst STOP_SYNC_MODEL_DELTA_TIME_MS = 60 * 1000;\n/**\n * Stop the worker if it was not needed for 5 min.\n */\nconst STOP_WORKER_DELTA_TIME_MS = 5 * 60 * 1000;\nfunction canSyncModel(modelService, resource) {\n    const model = modelService.getModel(resource);\n    if (!model) {\n        return false;\n    }\n    if (model.isTooLargeForSyncing()) {\n        return false;\n    }\n    return true;\n}\nlet EditorWorkerService = class EditorWorkerService extends Disposable {\n    constructor(modelService, configurationService, logService, languageConfigurationService, languageFeaturesService) {\n        super();\n        this._modelService = modelService;\n        this._workerManager = this._register(new WorkerManager(this._modelService, languageConfigurationService));\n        this._logService = logService;\n        // register default link-provider and default completions-provider\n        this._register(languageFeaturesService.linkProvider.register({ language: '*', hasAccessToAllModels: true }, {\n            provideLinks: (model, token) => {\n                if (!canSyncModel(this._modelService, model.uri)) {\n                    return Promise.resolve({ links: [] }); // File too large\n                }\n                return this._workerManager.withWorker().then(client => client.computeLinks(model.uri)).then(links => {\n                    return links && { links };\n                });\n            }\n        }));\n        this._register(languageFeaturesService.completionProvider.register('*', new WordBasedCompletionItemProvider(this._workerManager, configurationService, this._modelService, languageConfigurationService)));\n    }\n    dispose() {\n        super.dispose();\n    }\n    canComputeUnicodeHighlights(uri) {\n        return canSyncModel(this._modelService, uri);\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._workerManager.withWorker().then(client => client.computedUnicodeHighlights(uri, options, range));\n    }\n    computeDiff(original, modified, options, algorithm) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const result = yield this._workerManager.withWorker().then(client => client.computeDiff(original, modified, options, algorithm));\n            if (!result) {\n                return null;\n            }\n            // Convert from space efficient JSON data to rich objects.\n            const diff = {\n                identical: result.identical,\n                quitEarly: result.quitEarly,\n                changes: result.changes.map((c) => {\n                    var _a;\n                    return new LineRangeMapping(new LineRange(c[0], c[1]), new LineRange(c[2], c[3]), (_a = c[4]) === null || _a === void 0 ? void 0 : _a.map((c) => new RangeMapping(new Range(c[0], c[1], c[2], c[3]), new Range(c[4], c[5], c[6], c[7]))));\n                }),\n            };\n            return diff;\n        });\n    }\n    computeMoreMinimalEdits(resource, edits) {\n        if (isNonEmptyArray(edits)) {\n            if (!canSyncModel(this._modelService, resource)) {\n                return Promise.resolve(edits); // File too large\n            }\n            const sw = StopWatch.create(true);\n            const result = this._workerManager.withWorker().then(client => client.computeMoreMinimalEdits(resource, edits));\n            result.finally(() => this._logService.trace('FORMAT#computeMoreMinimalEdits', resource.toString(true), sw.elapsed()));\n            return Promise.race([result, timeout(1000).then(() => edits)]);\n        }\n        else {\n            return Promise.resolve(undefined);\n        }\n    }\n    canNavigateValueSet(resource) {\n        return (canSyncModel(this._modelService, resource));\n    }\n    navigateValueSet(resource, range, up) {\n        return this._workerManager.withWorker().then(client => client.navigateValueSet(resource, range, up));\n    }\n    canComputeWordRanges(resource) {\n        return canSyncModel(this._modelService, resource);\n    }\n    computeWordRanges(resource, range) {\n        return this._workerManager.withWorker().then(client => client.computeWordRanges(resource, range));\n    }\n};\nEditorWorkerService = __decorate([\n    __param(0, IModelService),\n    __param(1, ITextResourceConfigurationService),\n    __param(2, ILogService),\n    __param(3, ILanguageConfigurationService),\n    __param(4, ILanguageFeaturesService)\n], EditorWorkerService);\nexport { EditorWorkerService };\nclass WordBasedCompletionItemProvider {\n    constructor(workerManager, configurationService, modelService, languageConfigurationService) {\n        this.languageConfigurationService = languageConfigurationService;\n        this._debugDisplayName = 'wordbasedCompletions';\n        this._workerManager = workerManager;\n        this._configurationService = configurationService;\n        this._modelService = modelService;\n    }\n    provideCompletionItems(model, position) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const config = this._configurationService.getValue(model.uri, position, 'editor');\n            if (!config.wordBasedSuggestions) {\n                return undefined;\n            }\n            const models = [];\n            if (config.wordBasedSuggestionsMode === 'currentDocument') {\n                // only current file and only if not too large\n                if (canSyncModel(this._modelService, model.uri)) {\n                    models.push(model.uri);\n                }\n            }\n            else {\n                // either all files or files of same language\n                for (const candidate of this._modelService.getModels()) {\n                    if (!canSyncModel(this._modelService, candidate.uri)) {\n                        continue;\n                    }\n                    if (candidate === model) {\n                        models.unshift(candidate.uri);\n                    }\n                    else if (config.wordBasedSuggestionsMode === 'allDocuments' || candidate.getLanguageId() === model.getLanguageId()) {\n                        models.push(candidate.uri);\n                    }\n                }\n            }\n            if (models.length === 0) {\n                return undefined; // File too large, no other files\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const word = model.getWordAtPosition(position);\n            const replace = !word ? Range.fromPositions(position) : new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n            const insert = replace.setEndPosition(position.lineNumber, position.column);\n            const client = yield this._workerManager.withWorker();\n            const data = yield client.textualSuggest(models, word === null || word === void 0 ? void 0 : word.word, wordDefRegExp);\n            if (!data) {\n                return undefined;\n            }\n            return {\n                duration: data.duration,\n                suggestions: data.words.map((word) => {\n                    return {\n                        kind: 18 /* languages.CompletionItemKind.Text */,\n                        label: word,\n                        insertText: word,\n                        range: { insert, replace }\n                    };\n                }),\n            };\n        });\n    }\n}\nclass WorkerManager extends Disposable {\n    constructor(modelService, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._modelService = modelService;\n        this._editorWorkerClient = null;\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        const stopWorkerInterval = this._register(new IntervalTimer());\n        stopWorkerInterval.cancelAndSet(() => this._checkStopIdleWorker(), Math.round(STOP_WORKER_DELTA_TIME_MS / 2));\n        this._register(this._modelService.onModelRemoved(_ => this._checkStopEmptyWorker()));\n    }\n    dispose() {\n        if (this._editorWorkerClient) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n        super.dispose();\n    }\n    /**\n     * Check if the model service has no more models and stop the worker if that is the case.\n     */\n    _checkStopEmptyWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const models = this._modelService.getModels();\n        if (models.length === 0) {\n            // There are no more models => nothing possible for me to do\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    /**\n     * Check if the worker has been idle for a while and then stop it.\n     */\n    _checkStopIdleWorker() {\n        if (!this._editorWorkerClient) {\n            return;\n        }\n        const timeSinceLastWorkerUsedTime = (new Date()).getTime() - this._lastWorkerUsedTime;\n        if (timeSinceLastWorkerUsedTime > STOP_WORKER_DELTA_TIME_MS) {\n            this._editorWorkerClient.dispose();\n            this._editorWorkerClient = null;\n        }\n    }\n    withWorker() {\n        this._lastWorkerUsedTime = (new Date()).getTime();\n        if (!this._editorWorkerClient) {\n            this._editorWorkerClient = new EditorWorkerClient(this._modelService, false, 'editorWorkerService', this.languageConfigurationService);\n        }\n        return Promise.resolve(this._editorWorkerClient);\n    }\n}\nclass EditorModelManager extends Disposable {\n    constructor(proxy, modelService, keepIdleModels) {\n        super();\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        this._proxy = proxy;\n        this._modelService = modelService;\n        if (!keepIdleModels) {\n            const timer = new IntervalTimer();\n            timer.cancelAndSet(() => this._checkStopModelSync(), Math.round(STOP_SYNC_MODEL_DELTA_TIME_MS / 2));\n            this._register(timer);\n        }\n    }\n    dispose() {\n        for (const modelUrl in this._syncedModels) {\n            dispose(this._syncedModels[modelUrl]);\n        }\n        this._syncedModels = Object.create(null);\n        this._syncedModelsLastUsedTime = Object.create(null);\n        super.dispose();\n    }\n    ensureSyncedResources(resources, forceLargeModels) {\n        for (const resource of resources) {\n            const resourceStr = resource.toString();\n            if (!this._syncedModels[resourceStr]) {\n                this._beginModelSync(resource, forceLargeModels);\n            }\n            if (this._syncedModels[resourceStr]) {\n                this._syncedModelsLastUsedTime[resourceStr] = (new Date()).getTime();\n            }\n        }\n    }\n    _checkStopModelSync() {\n        const currentTime = (new Date()).getTime();\n        const toRemove = [];\n        for (const modelUrl in this._syncedModelsLastUsedTime) {\n            const elapsedTime = currentTime - this._syncedModelsLastUsedTime[modelUrl];\n            if (elapsedTime > STOP_SYNC_MODEL_DELTA_TIME_MS) {\n                toRemove.push(modelUrl);\n            }\n        }\n        for (const e of toRemove) {\n            this._stopModelSync(e);\n        }\n    }\n    _beginModelSync(resource, forceLargeModels) {\n        const model = this._modelService.getModel(resource);\n        if (!model) {\n            return;\n        }\n        if (!forceLargeModels && model.isTooLargeForSyncing()) {\n            return;\n        }\n        const modelUrl = resource.toString();\n        this._proxy.acceptNewModel({\n            url: model.uri.toString(),\n            lines: model.getLinesContent(),\n            EOL: model.getEOL(),\n            versionId: model.getVersionId()\n        });\n        const toDispose = new DisposableStore();\n        toDispose.add(model.onDidChangeContent((e) => {\n            this._proxy.acceptModelChanged(modelUrl.toString(), e);\n        }));\n        toDispose.add(model.onWillDispose(() => {\n            this._stopModelSync(modelUrl);\n        }));\n        toDispose.add(toDisposable(() => {\n            this._proxy.acceptRemovedModel(modelUrl);\n        }));\n        this._syncedModels[modelUrl] = toDispose;\n    }\n    _stopModelSync(modelUrl) {\n        const toDispose = this._syncedModels[modelUrl];\n        delete this._syncedModels[modelUrl];\n        delete this._syncedModelsLastUsedTime[modelUrl];\n        dispose(toDispose);\n    }\n}\nclass SynchronousWorkerClient {\n    constructor(instance) {\n        this._instance = instance;\n        this._proxyObj = Promise.resolve(this._instance);\n    }\n    dispose() {\n        this._instance.dispose();\n    }\n    getProxyObject() {\n        return this._proxyObj;\n    }\n}\nexport class EditorWorkerHost {\n    constructor(workerClient) {\n        this._workerClient = workerClient;\n    }\n    // foreign host request\n    fhr(method, args) {\n        return this._workerClient.fhr(method, args);\n    }\n}\nexport class EditorWorkerClient extends Disposable {\n    constructor(modelService, keepIdleModels, label, languageConfigurationService) {\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        this._disposed = false;\n        this._modelService = modelService;\n        this._keepIdleModels = keepIdleModels;\n        this._workerFactory = new DefaultWorkerFactory(label);\n        this._worker = null;\n        this._modelManager = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        throw new Error(`Not implemented!`);\n    }\n    _getOrCreateWorker() {\n        if (!this._worker) {\n            try {\n                this._worker = this._register(new SimpleWorkerClient(this._workerFactory, 'vs/editor/common/services/editorSimpleWorker', new EditorWorkerHost(this)));\n            }\n            catch (err) {\n                logOnceWebWorkerWarning(err);\n                this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            }\n        }\n        return this._worker;\n    }\n    _getProxy() {\n        return this._getOrCreateWorker().getProxyObject().then(undefined, (err) => {\n            logOnceWebWorkerWarning(err);\n            this._worker = new SynchronousWorkerClient(new EditorSimpleWorker(new EditorWorkerHost(this), null));\n            return this._getOrCreateWorker().getProxyObject();\n        });\n    }\n    _getOrCreateModelManager(proxy) {\n        if (!this._modelManager) {\n            this._modelManager = this._register(new EditorModelManager(proxy, this._modelService, this._keepIdleModels));\n        }\n        return this._modelManager;\n    }\n    _withSyncedResources(resources, forceLargeModels = false) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (this._disposed) {\n                return Promise.reject(canceled());\n            }\n            return this._getProxy().then((proxy) => {\n                this._getOrCreateModelManager(proxy).ensureSyncedResources(resources, forceLargeModels);\n                return proxy;\n            });\n        });\n    }\n    computedUnicodeHighlights(uri, options, range) {\n        return this._withSyncedResources([uri]).then(proxy => {\n            return proxy.computeUnicodeHighlights(uri.toString(), options, range);\n        });\n    }\n    computeDiff(original, modified, options, algorithm) {\n        return this._withSyncedResources([original, modified], /* forceLargeModels */ true).then(proxy => {\n            return proxy.computeDiff(original.toString(), modified.toString(), options, algorithm);\n        });\n    }\n    computeMoreMinimalEdits(resource, edits) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeMoreMinimalEdits(resource.toString(), edits);\n        });\n    }\n    computeLinks(resource) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            return proxy.computeLinks(resource.toString());\n        });\n    }\n    textualSuggest(resources, leadingWord, wordDefRegExp) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const proxy = yield this._withSyncedResources(resources);\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.textualSuggest(resources.map(r => r.toString()), leadingWord, wordDef, wordDefFlags);\n        });\n    }\n    computeWordRanges(resource, range) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return Promise.resolve(null);\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.computeWordRanges(resource.toString(), range, wordDef, wordDefFlags);\n        });\n    }\n    navigateValueSet(resource, range, up) {\n        return this._withSyncedResources([resource]).then(proxy => {\n            const model = this._modelService.getModel(resource);\n            if (!model) {\n                return null;\n            }\n            const wordDefRegExp = this.languageConfigurationService.getLanguageConfiguration(model.getLanguageId()).getWordDefinition();\n            const wordDef = wordDefRegExp.source;\n            const wordDefFlags = regExpFlags(wordDefRegExp);\n            return proxy.navigateValueSet(resource.toString(), range, up, wordDef, wordDefFlags);\n        });\n    }\n    dispose() {\n        super.dispose();\n        this._disposed = true;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\nimport { registerEditorContribution } from '../editorExtensions.js';\nlet MarkerDecorationsContribution = class MarkerDecorationsContribution {\n    constructor(_editor, _markerDecorationsService) {\n        // Doesn't do anything, just requires `IMarkerDecorationsService` to make sure it gets instantiated\n    }\n    dispose() {\n    }\n};\nMarkerDecorationsContribution.ID = 'editor.contrib.markerDecorations';\nMarkerDecorationsContribution = __decorate([\n    __param(1, IMarkerDecorationsService)\n], MarkerDecorationsContribution);\nexport { MarkerDecorationsContribution };\nregisterEditorContribution(MarkerDecorationsContribution.ID, MarkerDecorationsContribution, 0 /* EditorContributionInstantiation.Eager */); // eager because it instantiates IMarkerDecorationsService which is responsible for rendering squiggles\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { CancellationToken } from '../../../base/common/cancellation.js';\nimport { LinkedList } from '../../../base/common/linkedList.js';\nimport { ResourceMap } from '../../../base/common/map.js';\nimport { parse } from '../../../base/common/marshalling.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { normalizePath } from '../../../base/common/resources.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { ICodeEditorService } from './codeEditorService.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { EditorOpenSource } from '../../../platform/editor/common/editor.js';\nimport { extractSelection, matchesScheme, matchesSomeScheme } from '../../../platform/opener/common/opener.js';\nlet CommandOpener = class CommandOpener {\n    constructor(_commandService) {\n        this._commandService = _commandService;\n    }\n    open(target, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (!matchesScheme(target, Schemas.command)) {\n                return false;\n            }\n            if (!(options === null || options === void 0 ? void 0 : options.allowCommands)) {\n                // silently ignore commands when command-links are disabled, also\n                // suppress other openers by returning TRUE\n                return true;\n            }\n            if (typeof target === 'string') {\n                target = URI.parse(target);\n            }\n            if (Array.isArray(options.allowCommands)) {\n                // Only allow specific commands\n                if (!options.allowCommands.includes(target.path)) {\n                    // Suppress other openers by returning TRUE\n                    return true;\n                }\n            }\n            // execute as command\n            let args = [];\n            try {\n                args = parse(decodeURIComponent(target.query));\n            }\n            catch (_a) {\n                // ignore and retry\n                try {\n                    args = parse(target.query);\n                }\n                catch (_b) {\n                    // ignore error\n                }\n            }\n            if (!Array.isArray(args)) {\n                args = [args];\n            }\n            yield this._commandService.executeCommand(target.path, ...args);\n            return true;\n        });\n    }\n};\nCommandOpener = __decorate([\n    __param(0, ICommandService)\n], CommandOpener);\nlet EditorOpener = class EditorOpener {\n    constructor(_editorService) {\n        this._editorService = _editorService;\n    }\n    open(target, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof target === 'string') {\n                target = URI.parse(target);\n            }\n            const { selection, uri } = extractSelection(target);\n            target = uri;\n            if (target.scheme === Schemas.file) {\n                target = normalizePath(target); // workaround for non-normalized paths (https://github.com/microsoft/vscode/issues/12954)\n            }\n            yield this._editorService.openCodeEditor({\n                resource: target,\n                options: Object.assign({ selection, source: (options === null || options === void 0 ? void 0 : options.fromUserGesture) ? EditorOpenSource.USER : EditorOpenSource.API }, options === null || options === void 0 ? void 0 : options.editorOptions)\n            }, this._editorService.getFocusedCodeEditor(), options === null || options === void 0 ? void 0 : options.openToSide);\n            return true;\n        });\n    }\n};\nEditorOpener = __decorate([\n    __param(0, ICodeEditorService)\n], EditorOpener);\nlet OpenerService = class OpenerService {\n    constructor(editorService, commandService) {\n        this._openers = new LinkedList();\n        this._validators = new LinkedList();\n        this._resolvers = new LinkedList();\n        this._resolvedUriTargets = new ResourceMap(uri => uri.with({ path: null, fragment: null, query: null }).toString());\n        this._externalOpeners = new LinkedList();\n        // Default external opener is going through window.open()\n        this._defaultExternalOpener = {\n            openExternal: (href) => __awaiter(this, void 0, void 0, function* () {\n                // ensure to open HTTP/HTTPS links into new windows\n                // to not trigger a navigation. Any other link is\n                // safe to be set as HREF to prevent a blank window\n                // from opening.\n                if (matchesSomeScheme(href, Schemas.http, Schemas.https)) {\n                    dom.windowOpenNoOpener(href);\n                }\n                else {\n                    window.location.href = href;\n                }\n                return true;\n            })\n        };\n        // Default opener: any external, maito, http(s), command, and catch-all-editors\n        this._openers.push({\n            open: (target, options) => __awaiter(this, void 0, void 0, function* () {\n                if ((options === null || options === void 0 ? void 0 : options.openExternal) || matchesSomeScheme(target, Schemas.mailto, Schemas.http, Schemas.https, Schemas.vsls)) {\n                    // open externally\n                    yield this._doOpenExternal(target, options);\n                    return true;\n                }\n                return false;\n            })\n        });\n        this._openers.push(new CommandOpener(commandService));\n        this._openers.push(new EditorOpener(editorService));\n    }\n    open(target, options) {\n        var _a;\n        return __awaiter(this, void 0, void 0, function* () {\n            // check with contributed validators\n            const targetURI = typeof target === 'string' ? URI.parse(target) : target;\n            // validate against the original URI that this URI resolves to, if one exists\n            const validationTarget = (_a = this._resolvedUriTargets.get(targetURI)) !== null && _a !== void 0 ? _a : target;\n            for (const validator of this._validators) {\n                if (!(yield validator.shouldOpen(validationTarget, options))) {\n                    return false;\n                }\n            }\n            // check with contributed openers\n            for (const opener of this._openers) {\n                const handled = yield opener.open(target, options);\n                if (handled) {\n                    return true;\n                }\n            }\n            return false;\n        });\n    }\n    resolveExternalUri(resource, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            for (const resolver of this._resolvers) {\n                try {\n                    const result = yield resolver.resolveExternalUri(resource, options);\n                    if (result) {\n                        if (!this._resolvedUriTargets.has(result.resolved)) {\n                            this._resolvedUriTargets.set(result.resolved, resource);\n                        }\n                        return result;\n                    }\n                }\n                catch (_a) {\n                    // noop\n                }\n            }\n            throw new Error('Could not resolve external URI: ' + resource.toString());\n        });\n    }\n    _doOpenExternal(resource, options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            //todo@jrieken IExternalUriResolver should support `uri: URI | string`\n            const uri = typeof resource === 'string' ? URI.parse(resource) : resource;\n            let externalUri;\n            try {\n                externalUri = (yield this.resolveExternalUri(uri, options)).resolved;\n            }\n            catch (_a) {\n                externalUri = uri;\n            }\n            let href;\n            if (typeof resource === 'string' && uri.toString() === externalUri.toString()) {\n                // open the url-string AS IS\n                href = resource;\n            }\n            else {\n                // open URI using the toString(noEncode)+encodeURI-trick\n                href = encodeURI(externalUri.toString(true));\n            }\n            if (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) {\n                const preferredOpenerId = typeof (options === null || options === void 0 ? void 0 : options.allowContributedOpeners) === 'string' ? options === null || options === void 0 ? void 0 : options.allowContributedOpeners : undefined;\n                for (const opener of this._externalOpeners) {\n                    const didOpen = yield opener.openExternal(href, {\n                        sourceUri: uri,\n                        preferredOpenerId,\n                    }, CancellationToken.None);\n                    if (didOpen) {\n                        return true;\n                    }\n                }\n            }\n            return this._defaultExternalOpener.openExternal(href, { sourceUri: uri }, CancellationToken.None);\n        });\n    }\n    dispose() {\n        this._validators.clear();\n    }\n};\nOpenerService = __decorate([\n    __param(0, ICodeEditorService),\n    __param(1, ICommandService)\n], OpenerService);\nexport { OpenerService };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getAllMethodNames } from '../../../base/common/objects.js';\nimport { EditorWorkerClient } from './editorWorkerService.js';\n/**\n * Create a new web worker that has model syncing capabilities built in.\n * Specify an AMD module to load that will `create` an object that will be proxied.\n */\nexport function createWebWorker(modelService, languageConfigurationService, opts) {\n    return new MonacoWebWorkerImpl(modelService, languageConfigurationService, opts);\n}\nclass MonacoWebWorkerImpl extends EditorWorkerClient {\n    constructor(modelService, languageConfigurationService, opts) {\n        super(modelService, opts.keepIdleModels || false, opts.label, languageConfigurationService);\n        this._foreignModuleId = opts.moduleId;\n        this._foreignModuleCreateData = opts.createData || null;\n        this._foreignModuleHost = opts.host || null;\n        this._foreignProxy = null;\n    }\n    // foreign host request\n    fhr(method, args) {\n        if (!this._foreignModuleHost || typeof this._foreignModuleHost[method] !== 'function') {\n            return Promise.reject(new Error('Missing method ' + method + ' or missing main thread foreign host.'));\n        }\n        try {\n            return Promise.resolve(this._foreignModuleHost[method].apply(this._foreignModuleHost, args));\n        }\n        catch (e) {\n            return Promise.reject(e);\n        }\n    }\n    _getForeignProxy() {\n        if (!this._foreignProxy) {\n            this._foreignProxy = this._getProxy().then((proxy) => {\n                const foreignHostMethods = this._foreignModuleHost ? getAllMethodNames(this._foreignModuleHost) : [];\n                return proxy.loadForeignModule(this._foreignModuleId, this._foreignModuleCreateData, foreignHostMethods).then((foreignMethods) => {\n                    this._foreignModuleCreateData = null;\n                    const proxyMethodRequest = (method, args) => {\n                        return proxy.fmr(method, args);\n                    };\n                    const createProxyMethod = (method, proxyMethodRequest) => {\n                        return function () {\n                            const args = Array.prototype.slice.call(arguments, 0);\n                            return proxyMethodRequest(method, args);\n                        };\n                    };\n                    const foreignProxy = {};\n                    for (const foreignMethod of foreignMethods) {\n                        foreignProxy[foreignMethod] = createProxyMethod(foreignMethod, proxyMethodRequest);\n                    }\n                    return foreignProxy;\n                });\n            });\n        }\n        return this._foreignProxy;\n    }\n    getProxy() {\n        return this._getForeignProxy();\n    }\n    withSyncedResources(resources) {\n        return this._withSyncedResources(resources).then(_ => this.getProxy());\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class StableEditorScrollState {\n    static capture(editor) {\n        let visiblePosition = null;\n        let visiblePositionScrollDelta = 0;\n        if (editor.getScrollTop() !== 0) {\n            const visibleRanges = editor.getVisibleRanges();\n            if (visibleRanges.length > 0) {\n                visiblePosition = visibleRanges[0].getStartPosition();\n                const visiblePositionScrollTop = editor.getTopForPosition(visiblePosition.lineNumber, visiblePosition.column);\n                visiblePositionScrollDelta = editor.getScrollTop() - visiblePositionScrollTop;\n            }\n        }\n        return new StableEditorScrollState(visiblePosition, visiblePositionScrollDelta, editor.getPosition());\n    }\n    constructor(_visiblePosition, _visiblePositionScrollDelta, _cursorPosition) {\n        this._visiblePosition = _visiblePosition;\n        this._visiblePositionScrollDelta = _visiblePositionScrollDelta;\n        this._cursorPosition = _cursorPosition;\n    }\n    restore(editor) {\n        if (this._visiblePosition) {\n            const visiblePositionScrollTop = editor.getTopForPosition(this._visiblePosition.lineNumber, this._visiblePosition.column);\n            editor.setScrollTop(visiblePositionScrollTop + this._visiblePositionScrollDelta);\n        }\n    }\n    restoreRelativeVerticalPositionOfCursor(editor) {\n        const currentCursorPosition = editor.getPosition();\n        if (!this._cursorPosition || !currentCursorPosition) {\n            return;\n        }\n        const offset = editor.getTopForLineNumber(currentCursorPosition.lineNumber) - editor.getTopForLineNumber(this._cursorPosition.lineNumber);\n        editor.setScrollTop(editor.getScrollTop() + offset);\n    }\n}\n"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","toVSDataTransfer","dataTransfer","_step","vsDataTransfer","VSDataTransfer","_iterator","_createForOfIteratorHelper","items","_loop","item","type","kind","asStringValue","getAsString","append","createStringDataTransferItem","file","getAsFile","_this","uri","path","URI","parse","undefined","createFileDataTransferItem","name","_regeneratorRuntime","mark","_callee","wrap","_context","prev","t0","Uint8Array","arrayBuffer","t1","sent","abrupt","stop","createFileDataTransferItemFromFile","s","n","err","f","INTERNAL_DND_MIME_TYPES","Object","freeze","CodeDataTransfers","EDITORS","FILES","DataTransfers","RESOURCES","addExternalEditorsDropData","dragEvent","_a","overwriteUriList","arguments","length","has","Mimes","uriList","_step2","editorData","extractEditorsDropData","filter","input","resource","map","toString","_iterator2","push","replace","UriList","create","_step3","_iterator3","internal","delete","isCodeEditor","thing","getEditorType","editorCommon","ICodeEditor","isDiffEditor","IDiffEditor","getCodeEditor","getModifiedEditor","onDidChangeActiveEditor","isCompositeEditor","activeCodeEditor","PageCoordinates","x","y","_classCallCheck","this","_pageCoordinatesBrand","_createClass","key","ClientCoordinates","window","scrollX","scrollY","clientX","clientY","_clientCoordinatesBrand","EditorPagePosition","width","height","_editorPagePositionBrand","CoordinatesRelativeToEditor","_positionRelativeToEditorBrand","createEditorPagePosition","editorViewDomNode","editorPos","dom","left","top","createCoordinatesRelativeToEditor","editorPagePosition","pos","scaleX","offsetWidth","scaleY","offsetHeight","relativeX","relativeY","EditorMouseEvent","_StandardMouseEvent","_inherits","_super","_createSuper","isFromPointerCapture","call","_editorMouseEventBrand","posx","posy","relativePos","StandardMouseEvent","EditorMouseEventFactory","_editorViewDomNode","target","callback","_this2","_create","_this3","_this4","MOUSE_DOWN","_this5","POINTER_DOWN","pointerId","_this6","MOUSE_LEAVE","_this7","EditorPointerEventFactory","_this8","_this9","_this10","POINTER_LEAVE","_this11","GlobalEditorPointerMoveMonitor","_Disposable","_super2","_this12","_globalPointerMoveMonitor","_register","GlobalPointerMoveMonitor","_keydownListener","initialElement","initialButtons","pointerMoveCallback","onStopCallback","_this13","document","toKeyCodeChord","isModifierKey","stopMonitoring","browserEvent","startMonitoring","dispose","Disposable","DynamicCssRules","_editor","_this14","_instanceId","_idPool","_counter","_rules","Map","_garbageCollectionScheduler","RunOnceScheduler","garbageCollect","options","_this15","rule","getOrCreateRule","increaseRefCount","className","decreaseRefCount","schedule","properties","computeUniqueKey","existingRule","get","counter","RefCountedCssRule","concat","getContainerDomNode","set","JSON","stringify","values","hasReferences","_containerElement","_referenceCount","_styleElement","textContent","getCssText","str","prop","cssValue","asCssVariable","id","cssPropName","camelToDashes","remove","_ref","_slicedToArray","toLowerCase","_ref3","letter","EditorExtensionsRegistry","Command","opts","precondition","_kbOpts","kbOpts","_menuOpts","menuOpts","_description","description","Array","isArray","forEach","_registerMenuItem","kbOptsArr","kbWhen","kbExpr","ContextKeyExpr","and","desc","weight","args","when","primary","secondary","win","linux","mac","KeybindingsRegistry","registerKeybindingRule","CommandsRegistry","registerCommand","handler","accessor","runCommand","MenuRegistry","appendMenuItem","menuId","group","command","title","icon","order","MultiCommand","_Command","_implementations","priority","implementation","sort","a","b","i","splice","logService","ILogService","trace","impl","ProxyCommand","_Command2","EditorCommand","_Command3","_super3","runEditorCommand","editor","controllerGetter","_EditorCommand","EditorControllerCommandImpl","_super4","_callback","controller","runner","codeEditorService","ICodeEditorService","getFocusedCodeEditor","getActiveCodeEditor","invokeWithinContext","editorAccessor","IContextKeyService","contextMatchesRules","withNullAsUndefined","EditorAction","_EditorCommand2","_super5","convertOptions","label","alias","reportTelemetry","run","ITelemetryService","publicLog2","withDefaults","MenuId","EditorContext","contextMenuOpts","_toConsumableArray","MultiEditorAction","_EditorAction","_super6","EditorAction2","_Action","_super7","_len","_key","Action2","registerModelAndPositionCommand","_len2","_key2","instaService","IInstantiationService","position","assertType","isUri","Position","isIPosition","model","IModelService","getModel","editorPosition","lift","invokeFunction","slice","ITextModelService","createModelReference","reference","object","textEditorModel","finally","registerEditorCommand","editorCommand","EditorContributionRegistry","INSTANCE","registerEditorAction","ctor","action","registerMultiEditorAction","registerInstantiatedEditorAction","editorAction","registerEditorContribution","instantiation","getEditorCommand","commandId","getEditorActions","getEditorContributions","getSomeEditorContributions","ids","c","indexOf","getDiffEditorContributions","editorContributions","diffEditorContributions","editorActions","editorCommands","register","Registry","add","UndoCommand","MenubarEditMenu","nls","comment","CommandPalette","RedoCommand","SelectAllCommand","MenubarSelectionMenu","__decorate","decorators","d","r","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","AbstractCodeEditorService","_themeService","_onWillCreateCodeEditor","Emitter","_onCodeEditorAdd","onCodeEditorAdd","event","_onCodeEditorRemove","onCodeEditorRemove","_onWillCreateDiffEditor","_onDiffEditorAdd","onDiffEditorAdd","_onDiffEditorRemove","onDiffEditorRemove","_decorationOptionProviders","_codeEditorOpenHandlers","LinkedList","_modelProperties","_codeEditors","_diffEditors","_globalStyleSheet","fire","getId","keys","editorWithWidgetFocus","editors","listCodeEditors","hasTextFocus","hasWidgetFocus","provider","refCount","ed","removeDecorationsByType","dest","key1","source","sideBySide","candidate","finish","rm","unshift","toDisposable","IThemeService","IBulkEditService","createDecorator","ResourceEdit","metadata","edit","edits","ResourceTextEdit","is","ResourceFileEdit","Error","_ResourceEdit","textEdit","versionId","isObject","_ResourceEdit2","oldResource","newResource","Boolean","STOP_WORKER_DELTA_TIME_MS","canSyncModel","modelService","isTooLargeForSyncing","EditorWorkerService","configurationService","languageConfigurationService","languageFeaturesService","_modelService","_workerManager","WorkerManager","_logService","linkProvider","language","hasAccessToAllModels","provideLinks","token","withWorker","client","computeLinks","links","completionProvider","WordBasedCompletionItemProvider","_get","_getPrototypeOf","prototype","range","computedUnicodeHighlights","original","modified","algorithm","diff","computeDiff","identical","quitEarly","changes","LineRangeMapping","LineRange","RangeMapping","Range","isNonEmptyArray","sw","StopWatch","computeMoreMinimalEdits","elapsed","race","timeout","up","navigateValueSet","computeWordRanges","ITextResourceConfigurationService","ILanguageConfigurationService","ILanguageFeaturesService","workerManager","_debugDisplayName","_configurationService","_callee2","config","models","wordDefRegExp","word","insert","data","_context2","getValue","wordBasedSuggestions","wordBasedSuggestionsMode","getModels","getLanguageId","getLanguageConfiguration","getWordDefinition","getWordAtPosition","lineNumber","startColumn","endColumn","fromPositions","setEndPosition","column","textualSuggest","duration","suggestions","words","insertText","_Disposable2","_editorWorkerClient","_lastWorkerUsedTime","Date","getTime","IntervalTimer","cancelAndSet","_checkStopIdleWorker","Math","round","onModelRemoved","_","_checkStopEmptyWorker","EditorWorkerClient","EditorModelManager","_Disposable3","proxy","keepIdleModels","_syncedModels","_syncedModelsLastUsedTime","_proxy","timer","_checkStopModelSync","STOP_SYNC_MODEL_DELTA_TIME_MS","modelUrl","resources","forceLargeModels","resourceStr","_beginModelSync","currentTime","toRemove","_i","_toRemove","_stopModelSync","acceptNewModel","url","lines","getLinesContent","EOL","getEOL","getVersionId","toDispose","DisposableStore","onDidChangeContent","acceptModelChanged","onWillDispose","acceptRemovedModel","SynchronousWorkerClient","instance","_instance","_proxyObj","EditorWorkerHost","workerClient","_workerClient","method","fhr","_Disposable4","_disposed","_keepIdleModels","_workerFactory","DefaultWorkerFactory","_worker","_modelManager","SimpleWorkerClient","logOnceWebWorkerWarning","EditorSimpleWorker","_getOrCreateWorker","getProxyObject","_callee3","_context3","canceled","_getProxy","_getOrCreateModelManager","ensureSyncedResources","_withSyncedResources","computeUnicodeHighlights","leadingWord","_callee4","wordDef","wordDefFlags","_context4","regExpFlags","MarkerDecorationsContribution","_markerDecorationsService","ID","IMarkerDecorationsService","CommandOpener","_commandService","_this$_commandService","matchesScheme","Schemas","allowCommands","includes","decodeURIComponent","query","_b","executeCommand","ICommandService","EditorOpener","_editorService","_extractSelection","selection","extractSelection","scheme","normalizePath","openCodeEditor","assign","fromUserGesture","EditorOpenSource","USER","API","editorOptions","openToSide","OpenerService","editorService","commandService","_openers","_validators","_resolvers","_resolvedUriTargets","ResourceMap","with","fragment","_externalOpeners","_defaultExternalOpener","openExternal","href","matchesSomeScheme","http","https","location","open","mailto","vsls","_doOpenExternal","_callee5","targetURI","validationTarget","validator","opener","_context5","shouldOpen","_callee6","resolver","_context6","resolveExternalUri","resolved","_callee7","externalUri","preferredOpenerId","_iterator4","_step4","_context7","encodeURI","allowContributedOpeners","sourceUri","CancellationToken","None","clear","createWebWorker","MonacoWebWorkerImpl","_EditorWorkerClient","_foreignModuleId","moduleId","_foreignModuleCreateData","createData","_foreignModuleHost","host","_foreignProxy","foreignHostMethods","getAllMethodNames","loadForeignModule","foreignMethods","proxyMethodRequest","fmr","createProxyMethod","foreignProxy","foreignMethod","_getForeignProxy","getProxy","StableEditorScrollState","_visiblePosition","_visiblePositionScrollDelta","_cursorPosition","visiblePositionScrollTop","getTopForPosition","setScrollTop","currentCursorPosition","getPosition","offset","getTopForLineNumber","getScrollTop","visiblePosition","visiblePositionScrollDelta","visibleRanges","getVisibleRanges","getStartPosition"],"sourceRoot":""}