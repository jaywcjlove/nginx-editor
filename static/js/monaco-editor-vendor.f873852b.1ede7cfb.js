"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[158],{81508:function(e,t,i){var n=i(15671),r=i(43144),o=i(11752),s=i(61120),a=i(60136),c=i(27277),l=i(82927),u=i(37858),d=i(39177),h=i(39912),p=i(851),g=i(21864),_=i(80598),f=function(){function e(t,i,r){(0,n.Z)(this,e),this.selection=t,this.targetPosition=i,this.copy=r,this.targetSelection=null}return(0,r.Z)(e,[{key:"getEditOperations",value:function(e,t){var i=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new p.e(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),i),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new g.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new g.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new g.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new g.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new g.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}},{key:"computeCursorState",value:function(e,t){return this.targetSelection}}]),e}();function v(e){return u.dz?e.altKey:e.ctrlKey}var m=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e){var r;return(0,n.Z)(this,i),(r=t.call(this))._editor=e,r._dndDecorationIds=r._editor.createDecorationsCollection(),r._register(r._editor.onMouseDown((function(e){return r._onEditorMouseDown(e)}))),r._register(r._editor.onMouseUp((function(e){return r._onEditorMouseUp(e)}))),r._register(r._editor.onMouseDrag((function(e){return r._onEditorMouseDrag(e)}))),r._register(r._editor.onMouseDrop((function(e){return r._onEditorMouseDrop(e)}))),r._register(r._editor.onMouseDropCanceled((function(){return r._onEditorMouseDropCanceled()}))),r._register(r._editor.onKeyDown((function(e){return r.onEditorKeyDown(e)}))),r._register(r._editor.onKeyUp((function(e){return r.onEditorKeyUp(e)}))),r._register(r._editor.onDidBlurEditorWidget((function(){return r.onEditorBlur()}))),r._register(r._editor.onDidBlurEditorText((function(){return r.onEditorBlur()}))),r._mouseDown=!1,r._modifierPressed=!1,r._dragSelection=null,r}return(0,r.Z)(i,[{key:"onEditorBlur",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}},{key:"onEditorKeyDown",value:function(e){this._editor.getOption(33)&&!this._editor.getOption(20)&&(v(e)&&(this._modifierPressed=!0),this._mouseDown&&v(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}},{key:"onEditorKeyUp",value:function(e){this._editor.getOption(33)&&!this._editor.getOption(20)&&(v(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===i.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}},{key:"_onEditorMouseDown",value:function(e){this._mouseDown=!0}},{key:"_onEditorMouseUp",value:function(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}},{key:"_onEditorMouseDrag",value:function(e){var t=e.target;if(null===this._dragSelection){var i=(this._editor.getSelections()||[]).filter((function(e){return t.position&&e.containsPosition(t.position)}));if(1!==i.length)return;this._dragSelection=i[0]}v(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}},{key:"_onEditorMouseDropCanceled",value:function(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"_onEditorMouseDrop",value:function(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){var t=new h.L(e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){var n=null;if(e.event.shiftKey){var r=this._editor.getSelection();if(r){var o=r.selectionStartLineNumber,s=r.selectionStartColumn;n=[new g.Y(o,s,t.lineNumber,t.column)]}}else n=(this._editor.getSelections()||[]).map((function(e){return e.containsPosition(t)?new g.Y(t.lineNumber,t.column,t.lineNumber,t.column):e}));this._editor.setSelections(n||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(v(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(i.ID,new f(this._dragSelection,t,v(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"showAt",value:function(e){this._dndDecorationIds.set([{range:new p.e(e.lineNumber,e.column,e.lineNumber,e.column),options:i._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}},{key:"_removeDecoration",value:function(){this._dndDecorationIds.clear()}},{key:"_hitContent",value:function(e){return 6===e.type||7===e.type}},{key:"_hitMargin",value:function(e){return 2===e.type||3===e.type||4===e.type}},{key:"dispose",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,(0,o.Z)((0,s.Z)(i.prototype),"dispose",this).call(this)}}]),i}(l.JT);m.ID="editor.contrib.dragAndDrop",m.TRIGGER_KEY_VALUE=u.dz?6:5,m._DECORATION_OPTIONS=_.qx.register({description:"dnd-target",className:"dnd-target"}),(0,d._K)(m.ID,m,2)},50156:function(e,t,i){var n=i(74165),r=i(24404),o=i(91189),s=i(97638),a=i(42832),c=i(32260),l=i(13134),u=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};l.P.registerCommand("_executeDocumentSymbolProvider",(function(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),l=1;l<t;l++)i[l-1]=arguments[l];return u(this,void 0,void 0,(0,n.Z)().mark((function t(){var l,u,d,h;return(0,n.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l=i[0],(0,o.p_)(s.o.isUri(l)),u=e.get(c.Je),d=e.get(a.S),t.next=6,d.createModelReference(l);case 6:return h=t.sent,t.prev=7,t.next=10,u.getOrCreate(h.object.textEditorModel,r.T.None);case 10:return t.abrupt("return",t.sent.getTopLevelSymbols());case 11:return t.prev=11,h.dispose(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[7,,11,14]])})))}))},32260:function(e,t,i){i.d(t,{C3:function(){return P},H3:function(){return D},Je:function(){return E},sT:function(){return I}});var n=i(74165),r=i(93433),o=i(29439),s=i(37762),a=i(60136),c=i(27277),l=i(15671),u=i(43144),d=i(85509),h=i(24404),p=i(61002),g=i(79620),_=i(82861),f=i(39912),v=i(851),m=i(60529),y=i(20893),b=i(41043),S=i(19920),C=i(82927),k=i(69561),w=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},x=function(e,t){return function(i,n){t(i,n,e)}},N=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},R=function(){function e(){(0,l.Z)(this,e)}return(0,u.Z)(e,[{key:"remove",value:function(){var e;null===(e=this.parent)||void 0===e||e.children.delete(this.id)}}],[{key:"findId",value:function(e,t){var i;"string"===typeof e?i="".concat(t.id,"/").concat(e):(i="".concat(t.id,"/").concat(e.name),void 0!==t.children.get(i)&&(i="".concat(t.id,"/").concat(e.name,"_").concat(e.range.startLineNumber,"_").concat(e.range.startColumn)));for(var n=i,r=0;void 0!==t.children.get(n);r++)n="".concat(i,"_").concat(r);return n}},{key:"empty",value:function(e){return 0===e.children.size}}]),e}(),I=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e,n,r){var o;return(0,l.Z)(this,i),(o=t.call(this)).id=e,o.parent=n,o.symbol=r,o.children=new Map,o}return(0,u.Z)(i)}(R),D=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e,n,r,o){var s;return(0,l.Z)(this,i),(s=t.call(this)).id=e,s.parent=n,s.label=r,s.order=o,s.children=new Map,s}return(0,u.Z)(i)}(R),P=function(e){(0,a.Z)(i,e);var t=(0,c.Z)(i);function i(e){var n;return(0,l.Z)(this,i),(n=t.call(this)).uri=e,n.id="root",n.parent=void 0,n._groups=new Map,n.children=new Map,n.id="root",n.parent=void 0,n}return(0,u.Z)(i,[{key:"_compact",value:function(){var e,t=0,i=(0,s.Z)(this._groups);try{for(i.s();!(e=i.n()).done;){var n=(0,o.Z)(e.value,2),r=n[0];0===n[1].children.size?this._groups.delete(r):t+=1}}catch(d){i.e(d)}finally{i.f()}if(1!==t)this.children=this._groups;else{var a,c=g.$.first(this._groups.values()),l=(0,s.Z)(c.children);try{for(l.s();!(a=l.n()).done;){var u=(0,o.Z)(a.value,2)[1];u.parent=this,this.children.set(u.id,u)}}catch(d){l.e(d)}finally{l.f()}}return this}},{key:"getTopLevelSymbols",value:function(){var e,t=[],i=(0,s.Z)(this.children.values());try{for(i.s();!(e=i.n()).done;){var n=e.value;n instanceof I?t.push(n.symbol):t.push.apply(t,(0,r.Z)(g.$.map(n.children.values(),(function(e){return e.symbol}))))}}catch(o){i.e(o)}finally{i.f()}return t.sort((function(e,t){return v.e.compareRangesUsingStarts(e.range,t.range)}))}},{key:"asListOfDocumentSymbols",value:function(){var e=this.getTopLevelSymbols(),t=[];return i._flattenDocumentSymbols(t,e,""),t.sort((function(e,t){return f.L.compare(v.e.getStartPosition(e.range),v.e.getStartPosition(t.range))||f.L.compare(v.e.getEndPosition(t.range),v.e.getEndPosition(e.range))}))}}],[{key:"create",value:function(e,t,n){var r=new h.A(n),o=new i(t.uri),a=e.ordered(t),c=a.map((function(e,n){var a,c=R.findId("provider_".concat(n),o),l=new D(c,o,null!==(a=e.displayName)&&void 0!==a?a:"Unknown Outline Provider",n);return Promise.resolve(e.provideDocumentSymbols(t,r.token)).then((function(e){var t,n=(0,s.Z)(e||[]);try{for(n.s();!(t=n.n()).done;){var r=t.value;i._makeOutlineElement(r,l)}}catch(o){n.e(o)}finally{n.f()}return l}),(function(e){return(0,p.Cp)(e),l})).then((function(e){R.empty(e)?e.remove():o._groups.set(c,e)}))})),l=e.onDidChange((function(){var i=e.ordered(t);(0,d.fS)(i,a)||r.cancel()}));return Promise.all(c).then((function(){return r.token.isCancellationRequested&&!n.isCancellationRequested?i.create(e,t,n):o._compact()})).finally((function(){l.dispose()}))}},{key:"_makeOutlineElement",value:function(e,t){var n=R.findId(e,t),r=new I(n,t,e);if(e.children){var o,a=(0,s.Z)(e.children);try{for(a.s();!(o=a.n()).done;){var c=o.value;i._makeOutlineElement(c,r)}}catch(l){a.e(l)}finally{a.f()}}t.children.set(r.id,r)}},{key:"_flattenDocumentSymbols",value:function(e,t,n){var r,o=(0,s.Z)(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;e.push({kind:a.kind,tags:a.tags,name:a.name,detail:a.detail,containerName:a.containerName||n,range:a.range,selectionRange:a.selectionRange,children:void 0}),a.children&&i._flattenDocumentSymbols(e,a.children,a.name)}}catch(c){o.e(c)}finally{o.f()}}}]),i}(R),E=(0,y.yh)("IOutlineModelService"),Z=function(){function e(t,i,n){var r=this;(0,l.Z)(this,e),this._languageFeaturesService=t,this._disposables=new C.SL,this._cache=new _.z6(10,.7),this._debounceInformation=i.for(t.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(n.onModelRemoved((function(e){r._cache.delete(e.id)})))}return(0,u.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose()}},{key:"getOrCreate",value:function(e,t){return N(this,void 0,void 0,(0,n.Z)().mark((function i(){var r,o,s,a,c,l,u=this;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(r=this._languageFeaturesService.documentSymbolProvider,o=r.ordered(e),(s=this._cache.get(e.id))&&s.versionId===e.getVersionId()&&(0,d.fS)(s.provider,o)||(a=new h.A,s={versionId:e.getVersionId(),provider:o,promiseCnt:0,source:a,promise:P.create(r,e,a.token),model:void 0},this._cache.set(e.id,s),c=Date.now(),s.promise.then((function(t){s.model=t,u._debounceInformation.update(e,Date.now()-c)})).catch((function(t){u._cache.delete(e.id)}))),!s.model){i.next=6;break}return i.abrupt("return",s.model);case 6:return s.promiseCnt+=1,l=t.onCancellationRequested((function(){0===--s.promiseCnt&&(s.source.cancel(),u._cache.delete(e.id))})),i.prev=8,i.next=11,s.promise;case 11:return i.abrupt("return",i.sent);case 12:return i.prev=12,l.dispose(),i.finish(12);case 15:case"end":return i.stop()}}),i,this,[[8,,12,15]])})))}}]),e}();Z=w([x(0,k.p),x(1,m.A),x(2,S.q)],Z),(0,b.z)(E,Z,1)},95593:function(e,t,i){var n=i(15671),r=i(43144),o=i(60136),s=i(27277),a=i(39177),c=i(38142),l=i(93433),u=i(29439),d=i(37762),h=i(74165),p=i(39165),g=i(85509),_=i(1670),f=i(37713),v=i(82927),m=i(76467),y=i(37858),b=i(53783),S=i(18630),C=i(59343),k=i(851),w=i(69561);function x(e,t,i){var n,r;return{edits:[].concat((0,l.Z)(t.map((function(t){return new C.Gl(e,"string"===typeof i.insertText?{range:t,text:i.insertText,insertAsSnippet:!1}:{range:t,text:i.insertText.snippet,insertAsSnippet:!0})}))),(0,l.Z)(null!==(r=null===(n=i.additionalEdit)||void 0===n?void 0:n.edits)&&void 0!==r?r:[]))}}var N=i(43887),R=i(42041),I=i(96531),D=i(55351),P=i(24154),E=i(20893),Z=i(36892),O=i(21017),M=i(93932),F=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},T=function(e,t){return function(i,n){t(i,n,e)}},L=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},A="editor.changePasteType",W=new P.uy("pasteWidgetVisible",!1,(0,I.NC)("pasteWidgetVisible","Whether the paste widget is showing")),V="application/vnd.code.copyMetadata",B=function(e){(0,o.Z)(i,e);var t=(0,s.Z)(i);function i(e,r,o,s,a,c,l){var u;(0,n.Z)(this,i),(u=t.call(this))._bulkEditService=o,u._clipboardService=s,u._languageFeaturesService=a,u._quickInputService=c,u._progressService=l,u._editor=e;var d=e.getContainerDomNode();return u._register((0,p.addDisposableListener)(d,"copy",(function(e){return u.handleCopy(e)}))),u._register((0,p.addDisposableListener)(d,"cut",(function(e){return u.handleCopy(e)}))),u._register((0,p.addDisposableListener)(d,"paste",(function(e){return u.handlePaste(e)}),!0)),u._pasteProgressManager=u._register(new R.r("pasteIntoEditor",e,r)),u._postPasteWidgetManager=u._register(r.createInstance(M.p,"pasteIntoEditor",e,W,{id:A,label:(0,I.NC)("postPasteWidgetTitle","Show paste options...")})),u}return(0,r.Z)(i,[{key:"changePasteType",value:function(){this._postPasteWidgetManager.tryShowSelector()}},{key:"pasteAs",value:function(e){this._editor.focus();try{this._pasteAsActionContext={preferredId:e},document.execCommand("paste")}finally{this._pasteAsActionContext=void 0}}},{key:"isPasteAsEnabled",value:function(){return this._editor.getOption(82).enabled&&!this._editor.getOption(88)}},{key:"handleCopy",value:function(e){var t,i,n=this;if(e.clipboardData&&this._editor.hasTextFocus()&&this.isPasteAsEnabled()){var r=this._editor.getModel(),o=this._editor.getSelections();if(r&&(null===o||void 0===o?void 0:o.length)){var s=this._editor.getOption(35),a=o,c=1===o.length&&o[0].isEmpty();if(c){if(!s)return;a=[new k.e(a[0].startLineNumber,1,a[0].startLineNumber,1+r.getLineLength(a[0].startLineNumber))]}var l=null===(t=this._editor._getViewModel())||void 0===t?void 0:t.getPlainTextToCopy(o,s,y.ED),p={multicursorText:Array.isArray(l)?l:null,pasteOnNewLine:c,mode:null},f=this._languageFeaturesService.documentPasteEditProvider.ordered(r).filter((function(e){return!!e.prepareDocumentPaste}));if(f.length){var v=(0,S.B)(e.clipboardData),m=f.flatMap((function(e){var t;return null!==(t=e.copyMimeTypes)&&void 0!==t?t:[]})),C=(0,b.R)();this.setCopyMetadata(e.clipboardData,{id:C,providerCopyMimeTypes:m,defaultPastePayload:p});var w=(0,_.PG)((function(e){return L(n,void 0,void 0,(0,h.Z)().mark((function t(){var i,n,o,s,c,l,p,_,m,y=this;return(0,h.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=g.kX,t.next=3,Promise.all(f.map((function(t){return L(y,void 0,void 0,(0,h.Z)().mark((function i(){return(0,h.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,t.prepareDocumentPaste(r,a,v,e);case 3:return i.abrupt("return",i.sent);case 6:return i.prev=6,i.t0=i.catch(0),console.error(i.t0),i.abrupt("return",void 0);case 10:case"end":return i.stop()}}),i,null,[[0,6]])})))})));case 3:t.t1=t.sent,(i=(0,t.t0)(t.t1)).reverse(),n=(0,d.Z)(i);try{for(n.s();!(o=n.n()).done;){s=o.value,c=(0,d.Z)(s);try{for(c.s();!(l=c.n()).done;)p=(0,u.Z)(l.value,2),_=p[0],m=p[1],v.replace(_,m)}catch(b){c.e(b)}finally{c.f()}}}catch(b){n.e(b)}finally{n.f()}return t.abrupt("return",v);case 9:case"end":return t.stop()}}),t)})))}));null===(i=this._currentCopyOperation)||void 0===i||i.dataTransferPromise.cancel(),this._currentCopyOperation={handle:C,dataTransferPromise:w}}else this.setCopyMetadata(e.clipboardData,{defaultPastePayload:p})}}}},{key:"handlePaste",value:function(e){var t,i;return L(this,void 0,void 0,(0,h.Z)().mark((function n(){var r,o,s,a,c,u;return(0,h.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.clipboardData&&this._editor.hasTextFocus()){n.next=2;break}return n.abrupt("return");case 2:if(null===(t=this._currentPasteOperation)||void 0===t||t.cancel(),this._currentPasteOperation=void 0,r=this._editor.getModel(),(null===(o=this._editor.getSelections())||void 0===o?void 0:o.length)&&r){n.next=8;break}return n.abrupt("return");case 8:if(this.isPasteAsEnabled()){n.next=10;break}return n.abrupt("return");case 10:if(s=this.fetchCopyMetadata(e.clipboardData),(a=(0,S.L)(e.clipboardData)).delete(V),c=[].concat((0,l.Z)(e.clipboardData.types),(0,l.Z)(null!==(i=null===s||void 0===s?void 0:s.providerCopyMimeTypes)&&void 0!==i?i:[]),[m.v.uriList]),u=this._languageFeaturesService.documentPasteEditProvider.ordered(r).filter((function(e){var t;return null===(t=e.pasteMimeTypes)||void 0===t?void 0:t.some((function(e){return(0,f.SN)(e,c)}))})),u.length){n.next=17;break}return n.abrupt("return");case 17:e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferredId,u,o,a,s):this.doPasteInline(u,o,a,s);case 20:case"end":return n.stop()}}),n,this)})))}},{key:"doPasteInline",value:function(e,t,i,n){var r=this,o=(0,_.PG)((function(s){return L(r,void 0,void 0,(0,h.Z)().mark((function r(){var a,c,l,u,d,p;return(0,h.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if((a=this._editor).hasModel()){r.next=3;break}return r.abrupt("return");case 3:return c=a.getModel(),l=new N.Dl(a,3,void 0,s),r.prev=5,r.next=8,this.mergeInDataFromCopy(i,n,l.token);case 8:if(!l.token.isCancellationRequested){r.next=10;break}return r.abrupt("return");case 10:if((u=e.filter((function(e){return H(e,i)}))).length&&(1!==u.length||"text"!==u[0].id)){r.next=15;break}return r.next=14,this.applyDefaultPasteHandler(i,n,l.token);case 14:return r.abrupt("return");case 15:return r.next=17,this.getPasteEdits(u,i,c,t,l.token);case 17:if(d=r.sent,!l.token.isCancellationRequested){r.next=20;break}return r.abrupt("return");case 20:if(!d.length){r.next=23;break}return p="afterPaste"===a.getOption(82).showPasteSelector,r.abrupt("return",this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:d},p,l.token));case 23:return r.next=25,this.applyDefaultPasteHandler(i,n,l.token);case 25:return r.prev=25,l.dispose(),this._currentPasteOperation===o&&(this._currentPasteOperation=void 0),r.finish(25);case 29:case"end":return r.stop()}}),r,this,[[5,,25,29]])})))}));this._pasteProgressManager.showWhile(t[0].getEndPosition(),(0,I.NC)("pasteIntoEditorProgress","Running paste handlers. Click to cancel"),o),this._currentPasteOperation=o}},{key:"showPasteAsPick",value:function(e,t,i,n,r){var o=this,s=(0,_.PG)((function(a){return L(o,void 0,void 0,(0,h.Z)().mark((function o(){var c,l,u,d,p,g,_,f;return(0,h.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if((c=this._editor).hasModel()){o.next=3;break}return o.abrupt("return");case 3:return l=c.getModel(),u=new N.Dl(c,3,void 0,a),o.prev=5,o.next=8,this.mergeInDataFromCopy(n,r,u.token);case 8:if(!u.token.isCancellationRequested){o.next=10;break}return o.abrupt("return");case 10:return d=t.filter((function(e){return H(e,n)})),o.next=13,this.getPasteEdits(d,n,l,i,u.token);case 13:if(p=o.sent,!u.token.isCancellationRequested){o.next=16;break}return o.abrupt("return");case 16:if(p.length){o.next=18;break}return o.abrupt("return");case 18:if("string"!==typeof e){o.next=22;break}g=p.find((function(t){return t.id===e})),o.next=26;break;case 22:return o.next=24,this._quickInputService.pick(p.map((function(e){return{label:e.label,description:e.id,detail:e.detail,edit:e}})),{placeHolder:(0,I.NC)("pasteAsPickerPlaceholder","Select Paste Action")});case 24:_=o.sent,g=null===_||void 0===_?void 0:_.edit;case 26:if(g){o.next=28;break}return o.abrupt("return");case 28:return f=x(l.uri,i,g),o.next=31,this._bulkEditService.apply(f,{editor:this._editor});case 31:return o.prev=31,u.dispose(),this._currentPasteOperation===s&&(this._currentPasteOperation=void 0),o.finish(31);case 35:case"end":return o.stop()}}),o,this,[[5,,31,35]])})))}));this._progressService.withProgress({location:10,title:(0,I.NC)("pasteAsProgress","Running paste handlers")},(function(){return s}))}},{key:"setCopyMetadata",value:function(e,t){e.setData(V,JSON.stringify(t))}},{key:"fetchCopyMetadata",value:function(e){var t=e.getData(V);if(t)try{return JSON.parse(t)}catch(i){return}}},{key:"mergeInDataFromCopy",value:function(e,t,i){var n;return L(this,void 0,void 0,(0,h.Z)().mark((function r(){var o,s,a,c,l,p,g;return(0,h.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(!(null===t||void 0===t?void 0:t.id)||(null===(n=this._currentCopyOperation)||void 0===n?void 0:n.handle)!==t.id){r.next=8;break}return r.next=3,this._currentCopyOperation.dataTransferPromise;case 3:if(o=r.sent,!i.isCancellationRequested){r.next=6;break}return r.abrupt("return");case 6:s=(0,d.Z)(o);try{for(s.s();!(a=s.n()).done;)c=(0,u.Z)(a.value,2),l=c[0],p=c[1],e.replace(l,p)}catch(h){s.e(h)}finally{s.f()}case 8:if(e.has(m.v.uriList)){r.next=15;break}return r.next=11,this._clipboardService.readResources();case 11:if(g=r.sent,!i.isCancellationRequested){r.next=14;break}return r.abrupt("return");case 14:g.length&&e.append(m.v.uriList,(0,f.ZO)(f.Z0.create(g)));case 15:case"end":return r.stop()}}),r,this)})))}},{key:"getPasteEdits",value:function(e,t,i,n,r){return L(this,void 0,void 0,(0,h.Z)().mark((function o(){var s;return(0,h.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,_.eP)(Promise.all(e.map((function(e){var o;try{return null===(o=e.provideDocumentPasteEdits)||void 0===o?void 0:o.call(e,i,n,t,r)}catch(s){return void console.error(s)}}))).then(g.kX),r);case 2:return null===(s=o.sent)||void 0===s||s.sort((function(e,t){return t.priority-e.priority})),o.abrupt("return",null!==s&&void 0!==s?s:[]);case 5:case"end":return o.stop()}}),o)})))}},{key:"applyDefaultPasteHandler",value:function(e,t,i){var n,r,o;return L(this,void 0,void 0,(0,h.Z)().mark((function s(){var a,c,l;return(0,h.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=null!==(n=e.get(m.v.text))&&void 0!==n?n:e.get("text")){s.next=3;break}return s.abrupt("return");case 3:return s.next=5,a.asString();case 5:if(c=s.sent,!i.isCancellationRequested){s.next=8;break}return s.abrupt("return");case 8:l={text:c,pasteOnNewLine:null!==(r=null===t||void 0===t?void 0:t.defaultPastePayload.pasteOnNewLine)&&void 0!==r&&r,multicursorText:null!==(o=null===t||void 0===t?void 0:t.defaultPastePayload.multicursorText)&&void 0!==o?o:null,mode:null},this._editor.trigger("keyboard","paste",l);case 10:case"end":return s.stop()}}),s,this)})))}}],[{key:"get",value:function(e){return e.getContribution(i.ID)}}]),i}(v.JT);function H(e,t){var i;return Boolean(null===(i=e.pasteMimeTypes)||void 0===i?void 0:i.some((function(e){return t.matches(e)})))}B.ID="editor.contrib.copyPasteActionController",B=F([T(1,E.TG),T(2,C.vu),T(3,D.p),T(4,w.p),T(5,O.eJ),T(6,Z.R9)],B);var q=i(5455);(0,a._K)(B.ID,B,0),(0,c.y)(q.v),(0,a.fK)(new(function(e){(0,o.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,n.Z)(this,i),t.call(this,{id:A,precondition:W,kbOpts:{weight:100,primary:2137}})}return(0,r.Z)(i,[{key:"runEditorCommand",value:function(e,t,i){var n;return null===(n=B.get(t))||void 0===n?void 0:n.changePasteType()}}]),i}(a._l))),(0,a.Qr)(function(e){(0,o.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,n.Z)(this,i),t.call(this,{id:"editor.action.pasteAs",label:I.NC("pasteAs","Paste As..."),alias:"Paste As...",precondition:void 0,description:{description:"Paste as",args:[{name:"args",schema:{type:"object",properties:{id:{type:"string",description:I.NC("pasteAs.id","The id of the paste edit to try applying. If not provided, the editor will show a picker.")}}}}]}})}return(0,r.Z)(i,[{key:"run",value:function(e,t,i){var n,r="string"===typeof(null===i||void 0===i?void 0:i.id)?i.id:void 0;return null===(n=B.get(t))||void 0===n?void 0:n.pasteAs(r)}}]),i}(a.R6))},5455:function(e,t,i){i.d(t,{P:function(){return I},v:function(){return D}});var n=i(37762),r=i(60136),o=i(27277),s=i(74165),a=i(15671),c=i(43144),l=i(85509),u=i(37713),d=i(82927),h=i(76467),p=i(11540),g=i(87558),_=i(97638),f=i(69561),v=i(96531),m=i(22073),y=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},b=function(e,t){return function(i,n){t(i,n,e)}},S=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},C=(0,v.NC)("builtIn","Built-in"),k=function(){function e(){(0,a.Z)(this,e)}return(0,c.Z)(e,[{key:"provideDocumentPasteEdits",value:function(e,t,i,n){return S(this,void 0,void 0,(0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEdit(i,n);case 2:return t=e.sent,e.abrupt("return",t?{id:this.id,insertText:t.insertText,label:t.label,detail:t.detail,priority:t.priority}:void 0);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"provideDocumentOnDropEdits",value:function(e,t,i,n){return S(this,void 0,void 0,(0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEdit(i,n);case 2:return t=e.sent,e.abrupt("return",t?{id:this.id,insertText:t.insertText,label:t.label,priority:t.priority}:void 0);case 4:case"end":return e.stop()}}),e,this)})))}}]),e}(),w=function(e){(0,r.Z)(i,e);var t=(0,o.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).id="text",e.dropMimeTypes=[h.v.text],e.pasteMimeTypes=[h.v.text],e}return(0,c.Z)(i,[{key:"getEdit",value:function(e,t){return S(this,void 0,void 0,(0,s.Z)().mark((function t(){var i,n;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.get(h.v.text)){t.next=3;break}return t.abrupt("return");case 3:if(!e.has(h.v.uriList)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,i.asString();case 7:return n=t.sent,t.abrupt("return",{id:this.id,priority:0,label:(0,v.NC)("text.label","Insert Plain Text"),detail:C,insertText:n});case 9:case"end":return t.stop()}}),t,this)})))}}]),i}(k),x=function(e){(0,r.Z)(i,e);var t=(0,o.Z)(i);function i(){var e;return(0,a.Z)(this,i),(e=t.apply(this,arguments)).id="uri",e.dropMimeTypes=[h.v.uriList],e.pasteMimeTypes=[h.v.uriList],e}return(0,c.Z)(i,[{key:"getEdit",value:function(e,t){return S(this,void 0,void 0,(0,s.Z)().mark((function i(){var n,r,o,a;return(0,s.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,R(e);case 2:if((n=i.sent).length&&!t.isCancellationRequested){i.next=5;break}return i.abrupt("return");case 5:return r=0,o=n.map((function(e){var t=e.uri,i=e.originalText;return t.scheme===p.lg.file?t.fsPath:(r++,i)})).join(" "),a=r>0?n.length>1?(0,v.NC)("defaultDropProvider.uriList.uris","Insert Uris"):(0,v.NC)("defaultDropProvider.uriList.uri","Insert Uri"):n.length>1?(0,v.NC)("defaultDropProvider.uriList.paths","Insert Paths"):(0,v.NC)("defaultDropProvider.uriList.path","Insert Path"),i.abrupt("return",{id:this.id,priority:0,insertText:o,label:a,detail:C});case 9:case"end":return i.stop()}}),i,this)})))}}]),i}(k),N=function(e){(0,r.Z)(i,e);var t=(0,o.Z)(i);function i(e){var n;return(0,a.Z)(this,i),(n=t.call(this))._workspaceContextService=e,n.id="relativePath",n.dropMimeTypes=[h.v.uriList],n.pasteMimeTypes=[h.v.uriList],n}return(0,c.Z)(i,[{key:"getEdit",value:function(e,t){return S(this,void 0,void 0,(0,s.Z)().mark((function i(){var n,r,o=this;return(0,s.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,R(e);case 2:if((n=i.sent).length&&!t.isCancellationRequested){i.next=5;break}return i.abrupt("return");case 5:if((r=(0,l.kX)(n.map((function(e){var t=e.uri,i=o._workspaceContextService.getWorkspaceFolder(t);return i?(0,g.lX)(i.uri,t):void 0})))).length){i.next=8;break}return i.abrupt("return");case 8:return i.abrupt("return",{id:this.id,priority:0,insertText:r.join(" "),label:n.length>1?(0,v.NC)("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):(0,v.NC)("defaultDropProvider.uriList.relativePath","Insert Relative Path"),detail:C});case 9:case"end":return i.stop()}}),i,this)})))}}]),i}(k);function R(e){return S(this,void 0,void 0,(0,s.Z)().mark((function t(){var i,r,o,a,c,l;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.get(h.v.uriList)){t.next=3;break}return t.abrupt("return",[]);case 3:return t.next=5,i.asString();case 5:r=t.sent,o=[],a=(0,n.Z)(u.Z0.parse(r));try{for(a.s();!(c=a.n()).done;){l=c.value;try{o.push({uri:_.o.parse(l),originalText:l})}catch(s){}}}catch(d){a.e(d)}finally{a.f()}return t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})))}N=y([b(0,m.ec)],N);var I=function(e){(0,r.Z)(i,e);var t=(0,o.Z)(i);function i(e,n){var r;return(0,a.Z)(this,i),(r=t.call(this))._register(e.documentOnDropEditProvider.register("*",new w)),r._register(e.documentOnDropEditProvider.register("*",new x)),r._register(e.documentOnDropEditProvider.register("*",new N(n))),r}return(0,c.Z)(i)}(d.JT);I=y([b(0,f.p),b(1,m.ec)],I);var D=function(e){(0,r.Z)(i,e);var t=(0,o.Z)(i);function i(e,n){var r;return(0,a.Z)(this,i),(r=t.call(this))._register(e.documentPasteEditProvider.register("*",new w)),r._register(e.documentPasteEditProvider.register("*",new x)),r._register(e.documentPasteEditProvider.register("*",new N(n))),r}return(0,c.Z)(i)}(d.JT);D=y([b(0,f.p),b(1,m.ec)],D)},94710:function(e,t,i){var n=i(15671),r=i(43144),o=i(60136),s=i(27277),a=i(39177),c=i(38142),l=i(5455),u=i(29439),d=i(37762),h=i(74165),p=i(85509),g=i(1670),_=i(37713),f=i(82927),v=i(18630),m=i(851),y=i(69561),b=i(44373),S=i(75521),C=i(43887),k=i(42041),w=i(96531),x=i(24154),N=i(62791),R=i(20893),I=i(93932),D=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},P=function(e,t){return function(i,n){t(i,n,e)}},E=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},Z="editor.changeDropType",O=new x.uy("dropWidgetVisible",!1,(0,w.NC)("dropWidgetVisible","Whether the drop widget is showing")),M=function(e){(0,o.Z)(i,e);var t=(0,s.Z)(i);function i(e,r,o,s){var a;return(0,n.Z)(this,i),(a=t.call(this))._languageFeaturesService=o,a._treeViewsDragAndDropService=s,a.treeItemsTransfer=N.Ej.getInstance(),a._dropProgressManager=a._register(r.createInstance(k.r,"dropIntoEditor",e)),a._postDropWidgetManager=a._register(r.createInstance(I.p,"dropIntoEditor",e,O,{id:Z,label:(0,w.NC)("postDropWidgetTitle","Show drop options...")})),a._register(e.onDropIntoEditor((function(t){return a.onDropIntoEditor(e,t.position,t.event)}))),a}return(0,r.Z)(i,[{key:"changeDropType",value:function(){this._postDropWidgetManager.tryShowSelector()}},{key:"onDropIntoEditor",value:function(e,t,i){var n;return E(this,void 0,void 0,(0,h.Z)().mark((function r(){var o,s=this;return(0,h.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(i.dataTransfer&&e.hasModel()){r.next=2;break}return r.abrupt("return");case 2:null===(n=this._currentOperation)||void 0===n||n.cancel(),e.focus(),e.setPosition(t),o=(0,g.PG)((function(n){return E(s,void 0,void 0,(0,h.Z)().mark((function r(){var s,a,c,l,u,d;return(0,h.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return s=new C.Dl(e,1,void 0,n),r.prev=1,r.next=4,this.extractDataTransferData(i);case 4:if(0!==(a=r.sent).size&&!s.token.isCancellationRequested){r.next=7;break}return r.abrupt("return");case 7:if(c=e.getModel()){r.next=10;break}return r.abrupt("return");case 10:return l=this._languageFeaturesService.documentOnDropEditProvider.ordered(c).filter((function(e){return!e.dropMimeTypes||e.dropMimeTypes.some((function(e){return a.matches(e)}))})),r.next=13,this.getDropEdits(l,c,t,a,s);case 13:if(u=r.sent,!s.token.isCancellationRequested){r.next=16;break}return r.abrupt("return");case 16:if(!u.length){r.next=20;break}return d="afterDrop"===e.getOption(34).showDropSelector,r.next=20,this._postDropWidgetManager.applyEditAndShowIfNeeded([m.e.fromPositions(t)],{activeEditIndex:0,allEdits:u},d,n);case 20:return r.prev=20,s.dispose(),this._currentOperation===o&&(this._currentOperation=void 0),r.finish(20);case 24:case"end":return r.stop()}}),r,this,[[1,,20,24]])})))})),this._dropProgressManager.showWhile(t,(0,w.NC)("dropIntoEditorProgress","Running drop handlers. Click to cancel"),o),this._currentOperation=o;case 8:case"end":return r.stop()}}),r,this)})))}},{key:"getDropEdits",value:function(e,t,i,n,r){return E(this,void 0,void 0,(0,h.Z)().mark((function o(){var s,a;return(0,h.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,g.eP)(Promise.all(e.map((function(e){return e.provideDocumentOnDropEdits(t,i,n,r.token)}))),r.token);case 2:return s=o.sent,(a=(0,p.kX)(null!==s&&void 0!==s?s:[])).sort((function(e,t){return t.priority-e.priority})),o.abrupt("return",a);case 6:case"end":return o.stop()}}),o)})))}},{key:"extractDataTransferData",value:function(e){return E(this,void 0,void 0,(0,h.Z)().mark((function t(){var i,n,r,o,s,a,c,l,p,g,f;return(0,h.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dataTransfer){t.next=2;break}return t.abrupt("return",new _.Hl);case 2:if(i=(0,v.L)(e.dataTransfer),!this.treeItemsTransfer.hasData(b.f.prototype)){t.next=25;break}if(n=this.treeItemsTransfer.getData(b.f.prototype),!Array.isArray(n)){t.next=25;break}r=(0,d.Z)(n),t.prev=7,r.s();case 9:if((o=r.n()).done){t.next=17;break}return s=o.value,t.next=13,this._treeViewsDragAndDropService.removeDragOperationTransfer(s.identifier);case 13:if(a=t.sent){c=(0,d.Z)(a);try{for(c.s();!(l=c.n()).done;)p=(0,u.Z)(l.value,2),g=p[0],f=p[1],i.replace(g,f)}catch(h){c.e(h)}finally{c.f()}}case 15:t.next=9;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(7),r.e(t.t0);case 22:return t.prev=22,r.f(),t.finish(22);case 25:return t.abrupt("return",i);case 26:case"end":return t.stop()}}),t,this,[[7,19,22,25]])})))}}],[{key:"get",value:function(e){return e.getContribution(i.ID)}}]),i}(f.JT);M.ID="editor.contrib.dropIntoEditorController",M=D([P(1,R.TG),P(2,y.p),P(3,S.m)],M),(0,a._K)(M.ID,M,2),(0,a.fK)(new(function(e){(0,o.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,n.Z)(this,i),t.call(this,{id:Z,precondition:O,kbOpts:{weight:100,primary:2137}})}return(0,r.Z)(i,[{key:"runEditorCommand",value:function(e,t,i){var n;null===(n=M.get(t))||void 0===n||n.changeDropType()}}]),i}(a._l))),(0,c.y)(l.P)},93932:function(e,t,i){i.d(t,{p:function(){return w}});var n=i(74165),r=i(93433),o=i(15671),s=i(43144),a=i(97326),c=i(60136),l=i(27277),u=i(39165),d=i(15663),h=i(98770),p=i(3318),g=i(82927),_=i(59343),f=i(24154),v=i(99292),m=i(20893),y=i(94341),b=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},S=function(e,t){return function(i,n){t(i,n,e)}},C=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},k=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,r,s,c,l,u,d,h,_){var f;return(0,o.Z)(this,i),(f=t.call(this)).typeId=e,f.editor=n,f.showCommand=s,f.range=c,f.edits=l,f.onSelectNewEdit=u,f._contextMenuService=d,f._keybindingService=_,f.allowEditorOverflow=!0,f.suppressMouseDown=!0,f.create(),f.visibleContext=r.bindTo(h),f.visibleContext.set(!0),f._register((0,g.OF)((function(){return f.visibleContext.reset()}))),f.editor.addContentWidget((0,a.Z)(f)),f.editor.layoutContentWidget((0,a.Z)(f)),f._register((0,g.OF)((function(){return f.editor.removeContentWidget((0,a.Z)(f))}))),f._register(f.editor.onDidChangeCursorPosition((function(e){c.containsPosition(e.position)||f.dispose()}))),f._register(p.ju.runAndSubscribe(_.onDidUpdateKeybindings,(function(){f._updateButtonTitle()}))),f}return(0,s.Z)(i,[{key:"_updateButtonTitle",value:function(){var e,t=null===(e=this._keybindingService.lookupKeybinding(this.showCommand.id))||void 0===e?void 0:e.getLabel();this.button.element.title=this.showCommand.label+(t?" (".concat(t,")"):"")}},{key:"create",value:function(){var e=this;this.domNode=u.$(".post-edit-widget"),this.button=this._register(new d.z(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(u.addDisposableListener(this.domNode,u.EventType.CLICK,(function(){return e.showSelector()})))}},{key:"getId",value:function(){return i.baseId+"."+this.typeId}},{key:"getDomNode",value:function(){return this.domNode}},{key:"getPosition",value:function(){return{position:this.range.getEndPosition(),preference:[2]}}},{key:"showSelector",value:function(){var e=this;this._contextMenuService.showContextMenu({getAnchor:function(){var t=u.getDomNodePagePosition(e.button.element);return{x:t.left+t.width,y:t.top+t.height}},getActions:function(){return e.edits.allEdits.map((function(t,i){return(0,h.xw)({id:"",label:t.label,checked:i===e.edits.activeEditIndex,run:function(){if(i!==e.edits.activeEditIndex)return e.onSelectNewEdit(i)}})}))}})}}]),i}(g.JT);k.baseId="editor.widget.postEditWidget",k=b([S(7,v.i),S(8,f.i6),S(9,y.d)],k);var w=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,r,s,a,c){var l;return(0,o.Z)(this,i),(l=t.call(this))._id=e,l._editor=n,l._visibleContext=r,l._showCommand=s,l._instantiationService=a,l._bulkEditService=c,l._currentWidget=l._register(new g.XK),l._register(p.ju.any(n.onDidChangeModel,n.onDidChangeModelContent)((function(){return l.clear()}))),l}return(0,s.Z)(i,[{key:"applyEditAndShowIfNeeded",value:function(e,t,i,o){var s,a;return C(this,void 0,void 0,(0,n.Z)().mark((function c(){var l,u,d,h,p,g,f,v=this;return(0,n.Z)().wrap((function(c){for(;;)switch(c.prev=c.next){case 0:if((l=this._editor.getModel())&&e.length){c.next=3;break}return c.abrupt("return");case 3:if(u=t.allEdits[t.activeEditIndex]){c.next=6;break}return c.abrupt("return");case 6:return d={edits:[].concat((0,r.Z)(e.map((function(e){return new _.Gl(l.uri,"string"===typeof u.insertText?{range:e,text:u.insertText,insertAsSnippet:!1}:{range:e,text:u.insertText.snippet,insertAsSnippet:!0})}))),(0,r.Z)(null!==(a=null===(s=u.additionalEdit)||void 0===s?void 0:s.edits)&&void 0!==a?a:[]))},h=e[0],p=l.deltaDecorations([],[{range:h,options:{description:"paste-line-suffix",stickiness:0}}]),c.prev=9,c.next=12,this._bulkEditService.apply(d,{editor:this._editor,token:o});case 12:g=c.sent,f=l.getDecorationRange(p[0]);case 14:return c.prev=14,l.deltaDecorations(p,[]),c.finish(14);case 17:i&&g.isApplied&&t.allEdits.length>1&&this.show(null!==f&&void 0!==f?f:h,t,(function(r){return C(v,void 0,void 0,(0,n.Z)().mark((function s(){var a;return(0,n.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a=this._editor.getModel()){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,a.undo();case 5:this.applyEditAndShowIfNeeded(e,{activeEditIndex:r,allEdits:t.allEdits},i,o);case 6:case"end":return n.stop()}}),s,this)})))}));case 18:case"end":return c.stop()}}),c,this,[[9,,14,17]])})))}},{key:"show",value:function(e,t,i){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(k,this._id,this._editor,this._visibleContext,this._showCommand,e,t,i))}},{key:"clear",value:function(){this._currentWidget.clear()}},{key:"tryShowSelector",value:function(){var e;null===(e=this._currentWidget.value)||void 0===e||e.showSelector()}}]),i}(g.JT);w=b([S(4,m.TG),S(5,_.vu)],w)},43887:function(e,t,i){i.d(t,{yy:function(){return k},Dl:function(){return w},YQ:function(){return x}});var n=i(11752),r=i(61120),o=i(60136),s=i(27277),a=i(15671),c=i(43144),l=i(62428),u=i(851),d=i(24404),h=i(82927),p=i(97326),g=i(39177),_=i(24154),f=i(19980),v=i(20893),m=i(41043),y=i(96531),b=(0,v.yh)("IEditorCancelService"),S=new _.uy("cancellableOperation",!1,(0,y.NC)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,m.z)(b,function(){function e(){(0,a.Z)(this,e),this._tokens=new WeakMap}return(0,c.Z)(e,[{key:"add",value:function(e,t){var i,n=this._tokens.get(e);return n||(n=e.invokeWithinContext((function(e){return{key:S.bindTo(e.get(_.i6)),tokens:new f.S}})),this._tokens.set(e,n)),n.key.set(!0),i=n.tokens.push(t),function(){i&&(i(),n.key.set(!n.tokens.isEmpty()),i=void 0)}}},{key:"cancel",value:function(e){var t=this._tokens.get(e);if(t){var i=t.tokens.pop();i&&(i.cancel(),t.key.set(!t.tokens.isEmpty()))}}}]),e}(),1);var C=function(e){(0,o.Z)(i,e);var t=(0,s.Z)(i);function i(e,n){var r;return(0,a.Z)(this,i),(r=t.call(this,n)).editor=e,r._unregister=e.invokeWithinContext((function(t){return t.get(b).add(e,(0,p.Z)(r))})),r}return(0,c.Z)(i,[{key:"dispose",value:function(){this._unregister(),(0,n.Z)((0,r.Z)(i.prototype),"dispose",this).call(this)}}]),i}(d.A);(0,g.fK)(new(function(e){(0,o.Z)(i,e);var t=(0,s.Z)(i);function i(){return(0,a.Z)(this,i),t.call(this,{id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:S})}return(0,c.Z)(i,[{key:"runEditorCommand",value:function(e,t){e.get(b).cancel(t)}}]),i}(g._l)));var k=function(){function e(t,i){if((0,a.Z)(this,e),this.flags=i,0!==(1&this.flags)){var n=t.getModel();this.modelVersionId=n?l.WU("{0}#{1}",n.uri.toString(),n.getVersionId()):null}else this.modelVersionId=null;0!==(4&this.flags)?this.position=t.getPosition():this.position=null,0!==(2&this.flags)?this.selection=t.getSelection():this.selection=null,0!==(8&this.flags)?(this.scrollLeft=t.getScrollLeft(),this.scrollTop=t.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}return(0,c.Z)(e,[{key:"_equals",value:function(t){if(!(t instanceof e))return!1;var i=t;return this.modelVersionId===i.modelVersionId&&(this.scrollLeft===i.scrollLeft&&this.scrollTop===i.scrollTop&&(!(!this.position&&i.position||this.position&&!i.position||this.position&&i.position&&!this.position.equals(i.position))&&!(!this.selection&&i.selection||this.selection&&!i.selection||this.selection&&i.selection&&!this.selection.equalsRange(i.selection))))}},{key:"validate",value:function(t){return this._equals(new e(t,this.flags))}}]),e}(),w=function(e){(0,o.Z)(i,e);var t=(0,s.Z)(i);function i(e,n,r,o){var s;return(0,a.Z)(this,i),(s=t.call(this,e,o))._listener=new h.SL,4&n&&s._listener.add(e.onDidChangeCursorPosition((function(e){r&&u.e.containsPosition(r,e.position)||s.cancel()}))),2&n&&s._listener.add(e.onDidChangeCursorSelection((function(e){r&&u.e.containsRange(r,e.selection)||s.cancel()}))),8&n&&s._listener.add(e.onDidScrollChange((function(e){return s.cancel()}))),1&n&&(s._listener.add(e.onDidChangeModel((function(e){return s.cancel()}))),s._listener.add(e.onDidChangeModelContent((function(e){return s.cancel()})))),s}return(0,c.Z)(i,[{key:"dispose",value:function(){this._listener.dispose(),(0,n.Z)((0,r.Z)(i.prototype),"dispose",this).call(this)}}]),i}(C),x=function(e){(0,o.Z)(i,e);var t=(0,s.Z)(i);function i(e,n){var r;return(0,a.Z)(this,i),(r=t.call(this,n))._listener=e.onDidChangeContent((function(){return r.cancel()})),r}return(0,c.Z)(i,[{key:"dispose",value:function(){this._listener.dispose(),(0,n.Z)((0,r.Z)(i.prototype),"dispose",this).call(this)}}]),i}(d.A)},14835:function(e,t,i){i.d(t,{pR:function(){return St}});var n=i(74165),r=i(15671),o=i(43144),s=i(11752),a=i(61120),c=i(60136),l=i(27277),u=i(1670),d=i(82927),h=i(62428),p=i(39177),g=i(36912),_=i(78656),f=i(428),v=i(85509),m=i(77982),y=i(39912),b=i(851),S=i(21864),C=i(34012),k=i(93433),w=i(37762),x=i(80598),N=i(35673),R=i(76634),I=function(){function e(t){(0,r.Z)(this,e),this._editor=t,this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null,this._startPosition=this._editor.getPosition()}return(0,o.Z)(e,[{key:"dispose",value:function(){this._editor.removeDecorations(this._allDecorations()),this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}},{key:"reset",value:function(){this._decorations=[],this._overviewRulerApproximateDecorations=[],this._findScopeDecorationIds=[],this._rangeHighlightDecorationId=null,this._highlightedDecorationId=null}},{key:"getCount",value:function(){return this._decorations.length}},{key:"getFindScope",value:function(){return this._findScopeDecorationIds[0]?this._editor.getModel().getDecorationRange(this._findScopeDecorationIds[0]):null}},{key:"getFindScopes",value:function(){var e=this;if(this._findScopeDecorationIds.length){var t=this._findScopeDecorationIds.map((function(t){return e._editor.getModel().getDecorationRange(t)})).filter((function(e){return!!e}));if(t.length)return t}return null}},{key:"getStartPosition",value:function(){return this._startPosition}},{key:"setStartPosition",value:function(e){this._startPosition=e,this.setCurrentFindMatch(null)}},{key:"_getDecorationIndex",value:function(e){var t=this._decorations.indexOf(e);return t>=0?t+1:1}},{key:"getDecorationRangeAt",value:function(e){var t=e<this._decorations.length?this._decorations[e]:null;return t?this._editor.getModel().getDecorationRange(t):null}},{key:"getCurrentMatchesPosition",value:function(t){var i,n=this._editor.getModel().getDecorationsInRange(t),r=(0,w.Z)(n);try{for(r.s();!(i=r.n()).done;){var o=i.value,s=o.options;if(s===e._FIND_MATCH_DECORATION||s===e._CURRENT_FIND_MATCH_DECORATION)return this._getDecorationIndex(o.id)}}catch(a){r.e(a)}finally{r.f()}return 0}},{key:"setCurrentFindMatch",value:function(t){var i=this,n=null,r=0;if(t)for(var o=0,s=this._decorations.length;o<s;o++){var a=this._editor.getModel().getDecorationRange(this._decorations[o]);if(t.equalsRange(a)){n=this._decorations[o],r=o+1;break}}return null===this._highlightedDecorationId&&null===n||this._editor.changeDecorations((function(t){if(null!==i._highlightedDecorationId&&(t.changeDecorationOptions(i._highlightedDecorationId,e._FIND_MATCH_DECORATION),i._highlightedDecorationId=null),null!==n&&(i._highlightedDecorationId=n,t.changeDecorationOptions(i._highlightedDecorationId,e._CURRENT_FIND_MATCH_DECORATION)),null!==i._rangeHighlightDecorationId&&(t.removeDecoration(i._rangeHighlightDecorationId),i._rangeHighlightDecorationId=null),null!==n){var r=i._editor.getModel().getDecorationRange(n);if(r.startLineNumber!==r.endLineNumber&&1===r.endColumn){var o=r.endLineNumber-1,s=i._editor.getModel().getLineMaxColumn(o);r=new b.e(r.startLineNumber,r.startColumn,o,s)}i._rangeHighlightDecorationId=t.addDecoration(r,e._RANGE_HIGHLIGHT_DECORATION)}})),r}},{key:"set",value:function(t,i){var n=this;this._editor.changeDecorations((function(r){var o=e._FIND_MATCH_DECORATION,s=[];if(t.length>1e3){o=e._FIND_MATCH_NO_OVERVIEW_DECORATION;for(var a=n._editor.getModel().getLineCount(),c=n._editor.getLayoutInfo().height/a,l=Math.max(2,Math.ceil(3/c)),u=t[0].range.startLineNumber,d=t[0].range.endLineNumber,h=1,p=t.length;h<p;h++){var g=t[h].range;d+l>=g.startLineNumber?g.endLineNumber>d&&(d=g.endLineNumber):(s.push({range:new b.e(u,1,d,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION}),u=g.startLineNumber,d=g.endLineNumber)}s.push({range:new b.e(u,1,d,1),options:e._FIND_MATCH_ONLY_OVERVIEW_DECORATION})}for(var _=new Array(t.length),f=0,v=t.length;f<v;f++)_[f]={range:t[f].range,options:o};n._decorations=r.deltaDecorations(n._decorations,_),n._overviewRulerApproximateDecorations=r.deltaDecorations(n._overviewRulerApproximateDecorations,s),n._rangeHighlightDecorationId&&(r.removeDecoration(n._rangeHighlightDecorationId),n._rangeHighlightDecorationId=null),n._findScopeDecorationIds.length&&(n._findScopeDecorationIds.forEach((function(e){return r.removeDecoration(e)})),n._findScopeDecorationIds=[]),(null===i||void 0===i?void 0:i.length)&&(n._findScopeDecorationIds=i.map((function(t){return r.addDecoration(t,e._FIND_SCOPE_DECORATION)})))}))}},{key:"matchBeforePosition",value:function(e){if(0===this._decorations.length)return null;for(var t=this._decorations.length-1;t>=0;t--){var i=this._decorations[t],n=this._editor.getModel().getDecorationRange(i);if(n&&!(n.endLineNumber>e.lineNumber)){if(n.endLineNumber<e.lineNumber)return n;if(!(n.endColumn>e.column))return n}}return this._editor.getModel().getDecorationRange(this._decorations[this._decorations.length-1])}},{key:"matchAfterPosition",value:function(e){if(0===this._decorations.length)return null;for(var t=0,i=this._decorations.length;t<i;t++){var n=this._decorations[t],r=this._editor.getModel().getDecorationRange(n);if(r&&!(r.startLineNumber<e.lineNumber)){if(r.startLineNumber>e.lineNumber)return r;if(!(r.startColumn<e.column))return r}}return this._editor.getModel().getDecorationRange(this._decorations[0])}},{key:"_allDecorations",value:function(){var e,t=[];(t=(t=t.concat(this._decorations)).concat(this._overviewRulerApproximateDecorations),this._findScopeDecorationIds.length)&&(e=t).push.apply(e,(0,k.Z)(this._findScopeDecorationIds));return this._rangeHighlightDecorationId&&t.push(this._rangeHighlightDecorationId),t}}]),e}();I._CURRENT_FIND_MATCH_DECORATION=x.qx.register({description:"current-find-match",stickiness:1,zIndex:13,className:"currentFindMatch",showIfCollapsed:!0,overviewRuler:{color:(0,R.EN)(N.Fm_),position:f.sh.Center},minimap:{color:(0,R.EN)(N.SUY),position:f.F5.Inline}}),I._FIND_MATCH_DECORATION=x.qx.register({description:"find-match",stickiness:1,zIndex:10,className:"findMatch",showIfCollapsed:!0,overviewRuler:{color:(0,R.EN)(N.Fm_),position:f.sh.Center},minimap:{color:(0,R.EN)(N.SUY),position:f.F5.Inline}}),I._FIND_MATCH_NO_OVERVIEW_DECORATION=x.qx.register({description:"find-match-no-overview",stickiness:1,className:"findMatch",showIfCollapsed:!0}),I._FIND_MATCH_ONLY_OVERVIEW_DECORATION=x.qx.register({description:"find-match-only-overview",stickiness:1,overviewRuler:{color:(0,R.EN)(N.Fm_),position:f.sh.Center}}),I._RANGE_HIGHLIGHT_DECORATION=x.qx.register({description:"find-range-highlight",stickiness:1,className:"rangeHighlight",isWholeLine:!0}),I._FIND_SCOPE_DECORATION=x.qx.register({description:"find-scope",className:"findScope",isWholeLine:!0});var D=function(){function e(t,i,n){(0,r.Z)(this,e),this._editorSelection=t,this._ranges=i,this._replaceStrings=n,this._trackedEditorSelectionId=null}return(0,o.Z)(e,[{key:"getEditOperations",value:function(e,t){if(this._ranges.length>0){for(var i=[],n=0;n<this._ranges.length;n++)i.push({range:this._ranges[n],text:this._replaceStrings[n]});i.sort((function(e,t){return b.e.compareRangesUsingStarts(e.range,t.range)}));for(var r=[],o=i[0],s=1;s<i.length;s++)o.range.endLineNumber===i[s].range.startLineNumber&&o.range.endColumn===i[s].range.startColumn?(o.range=o.range.plusRange(i[s].range),o.text=o.text+i[s].text):(r.push(o),o=i[s]);r.push(o);for(var a=0,c=r;a<c.length;a++){var l=c[a];t.addEditOperation(l.range,l.text)}}this._trackedEditorSelectionId=t.trackSelection(this._editorSelection)}},{key:"computeCursorState",value:function(e,t){return t.getTrackedSelection(this._trackedEditorSelectionId)}}]),e}(),P=i(60098),E=(0,o.Z)((function e(t){(0,r.Z)(this,e),this.staticValue=t,this.kind=0})),Z=(0,o.Z)((function e(t){(0,r.Z)(this,e),this.pieces=t,this.kind=1})),O=function(){function e(t){(0,r.Z)(this,e),t&&0!==t.length?1===t.length&&null!==t[0].staticValue?this._state=new E(t[0].staticValue):this._state=new Z(t):this._state=new E("")}return(0,o.Z)(e,[{key:"hasReplacementPatterns",get:function(){return 1===this._state.kind}},{key:"buildReplaceString",value:function(t,i){if(0===this._state.kind)return i?(0,P.o)(t,this._state.staticValue):this._state.staticValue;for(var n="",r=0,o=this._state.pieces.length;r<o;r++){var s=this._state.pieces[r];if(null===s.staticValue){var a=e._substitute(s.matchIndex,t);if(null!==s.caseOps&&s.caseOps.length>0){for(var c=[],l=s.caseOps.length,u=0,d=0,h=a.length;d<h;d++){if(u>=l){c.push(a.slice(d));break}switch(s.caseOps[u]){case"U":c.push(a[d].toUpperCase());break;case"u":c.push(a[d].toUpperCase()),u++;break;case"L":c.push(a[d].toLowerCase());break;case"l":c.push(a[d].toLowerCase()),u++;break;default:c.push(a[d])}}a=c.join("")}n+=a}else n+=s.staticValue}return n}}],[{key:"fromStaticValue",value:function(t){return new e([M.staticValue(t)])}},{key:"_substitute",value:function(e,t){if(null===t)return"";if(0===e)return t[0];for(var i="";e>0;){if(e<t.length)return(t[e]||"")+i;i=String(e%10)+i,e=Math.floor(e/10)}return"$"+i}}]),e}(),M=function(){function e(t,i,n){(0,r.Z)(this,e),this.staticValue=t,this.matchIndex=i,n&&0!==n.length?this.caseOps=n.slice(0):this.caseOps=null}return(0,o.Z)(e,null,[{key:"staticValue",value:function(t){return new e(t,-1,null)}},{key:"caseOps",value:function(t,i){return new e(null,t,i)}}]),e}(),F=function(){function e(t){(0,r.Z)(this,e),this._source=t,this._lastCharIndex=0,this._result=[],this._resultLen=0,this._currentStaticPiece=""}return(0,o.Z)(e,[{key:"emitUnchanged",value:function(e){this._emitStatic(this._source.substring(this._lastCharIndex,e)),this._lastCharIndex=e}},{key:"emitStatic",value:function(e,t){this._emitStatic(e),this._lastCharIndex=t}},{key:"_emitStatic",value:function(e){0!==e.length&&(this._currentStaticPiece+=e)}},{key:"emitMatchIndex",value:function(e,t,i){0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=M.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),this._result[this._resultLen++]=M.caseOps(e,i),this._lastCharIndex=t}},{key:"finalize",value:function(){return this.emitUnchanged(this._source.length),0!==this._currentStaticPiece.length&&(this._result[this._resultLen++]=M.staticValue(this._currentStaticPiece),this._currentStaticPiece=""),new O(this._result)}}]),e}();var T=i(24154),L=new T.uy("findWidgetVisible",!1),A=(L.toNegated(),new T.uy("findInputFocussed",!1)),W=new T.uy("replaceInputFocussed",!1),V={primary:545,mac:{primary:2593}},B={primary:565,mac:{primary:2613}},H={primary:560,mac:{primary:2608}},q={primary:554,mac:{primary:2602}},U={primary:558,mac:{primary:2606}},K="actions.find",G="actions.findWithSelection",j="editor.actions.findWithArgs",z="editor.action.nextMatchFindAction",Y="editor.action.previousMatchFindAction",J="editor.action.goToMatchFindAction",Q="editor.action.nextSelectionMatchFindAction",X="editor.action.previousSelectionMatchFindAction",$="editor.action.startFindReplaceAction",ee="closeFindWidget",te="toggleFindCaseSensitive",ie="toggleFindWholeWord",ne="toggleFindRegex",re="toggleFindInSelection",oe="togglePreserveCase",se="editor.action.replaceOne",ae="editor.action.replaceAll",ce="editor.action.selectAllMatches",le=19999,ue=function(){function e(t,i){var n=this;(0,r.Z)(this,e),this._toDispose=new d.SL,this._editor=t,this._state=i,this._isDisposed=!1,this._startSearchingTimer=new u._F,this._decorations=new I(t),this._toDispose.add(this._decorations),this._updateDecorationsScheduler=new u.pY((function(){return n.research(!1)}),100),this._toDispose.add(this._updateDecorationsScheduler),this._toDispose.add(this._editor.onDidChangeCursorPosition((function(e){3!==e.reason&&5!==e.reason&&6!==e.reason||n._decorations.setStartPosition(n._editor.getPosition())}))),this._ignoreModelContentChanged=!1,this._toDispose.add(this._editor.onDidChangeModelContent((function(e){n._ignoreModelContentChanged||(e.isFlush&&n._decorations.reset(),n._decorations.setStartPosition(n._editor.getPosition()),n._updateDecorationsScheduler.schedule())}))),this._toDispose.add(this._state.onFindReplaceStateChange((function(e){return n._onStateChanged(e)}))),this.research(!1,this._state.searchScope)}return(0,o.Z)(e,[{key:"dispose",value:function(){this._isDisposed=!0,(0,d.B9)(this._startSearchingTimer),this._toDispose.dispose()}},{key:"_onStateChanged",value:function(e){var t=this;this._isDisposed||this._editor.hasModel()&&(e.searchString||e.isReplaceRevealed||e.isRegex||e.wholeWord||e.matchCase||e.searchScope)&&(this._editor.getModel().isTooLargeForSyncing()?(this._startSearchingTimer.cancel(),this._startSearchingTimer.setIfNotSet((function(){e.searchScope?t.research(e.moveCursor,t._state.searchScope):t.research(e.moveCursor)}),240)):e.searchScope?this.research(e.moveCursor,this._state.searchScope):this.research(e.moveCursor))}},{key:"research",value:function(e,t){var i=this,n=null;"undefined"!==typeof t?null!==t&&(n=Array.isArray(t)?t:[t]):n=this._decorations.getFindScopes(),null!==n&&(n=n.map((function(e){if(e.startLineNumber!==e.endLineNumber){var t=e.endLineNumber;return 1===e.endColumn&&(t-=1),new b.e(e.startLineNumber,1,t,i._editor.getModel().getLineMaxColumn(t))}return e})));var r=this._findMatches(n,!1,le);this._decorations.set(r,n);var o=this._editor.getSelection(),s=this._decorations.getCurrentMatchesPosition(o);if(0===s&&r.length>0){var a=(0,v.lG)(r.map((function(e){return e.range})),(function(e){return b.e.compareRangesUsingStarts(e,o)>=0}));s=a>0?a-1+1:s}this._state.changeMatchInfo(s,this._decorations.getCount(),void 0),e&&this._editor.getOption(39).cursorMoveOnType&&this._moveToNextMatch(this._decorations.getStartPosition())}},{key:"_hasMatches",value:function(){return this._state.matchesCount>0}},{key:"_cannotFind",value:function(){if(!this._hasMatches()){var e=this._decorations.getFindScope();return e&&this._editor.revealRangeInCenterIfOutsideViewport(e,0),!0}return!1}},{key:"_setCurrentFindMatch",value:function(e){var t=this._decorations.setCurrentFindMatch(e);this._state.changeMatchInfo(t,this._decorations.getCount(),e),this._editor.setSelection(e),this._editor.revealRangeInCenterIfOutsideViewport(e,0)}},{key:"_prevSearchPosition",value:function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),i=e.lineNumber,n=e.column,r=this._editor.getModel();return t||1===n?(1===i?i=r.getLineCount():i--,n=r.getLineMaxColumn(i)):n--,new y.L(i,n)}},{key:"_moveToPrevMatch",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this._state.canNavigateBack()){if(this._decorations.getCount()<le){var n=this._decorations.matchBeforePosition(t);return n&&n.isEmpty()&&n.getStartPosition().equals(t)&&(t=this._prevSearchPosition(t),n=this._decorations.matchBeforePosition(t)),void(n&&this._setCurrentFindMatch(n))}if(!this._cannotFind()){var r=this._decorations.getFindScope(),o=e._getSearchRange(this._editor.getModel(),r);o.getEndPosition().isBefore(t)&&(t=o.getEndPosition()),t.isBefore(o.getStartPosition())&&(t=o.getEndPosition());var s=t,a=s.lineNumber,c=s.column,l=this._editor.getModel(),u=new y.L(a,c),d=l.findPreviousMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(126):null,!1);if(d&&d.range.isEmpty()&&d.range.getStartPosition().equals(u)&&(u=this._prevSearchPosition(u),d=l.findPreviousMatch(this._state.searchString,u,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(126):null,!1)),d)return i||o.containsRange(d.range)?void this._setCurrentFindMatch(d.range):this._moveToPrevMatch(d.range.getStartPosition(),!0)}}else{var h=this._decorations.matchAfterPosition(t);h&&this._setCurrentFindMatch(h)}}},{key:"moveToPrevMatch",value:function(){this._moveToPrevMatch(this._editor.getSelection().getStartPosition())}},{key:"_nextSearchPosition",value:function(e){var t=this._state.isRegex&&(this._state.searchString.indexOf("^")>=0||this._state.searchString.indexOf("$")>=0),i=e.lineNumber,n=e.column,r=this._editor.getModel();return t||n===r.getLineMaxColumn(i)?(i===r.getLineCount()?i=1:i++,n=1):n++,new y.L(i,n)}},{key:"_moveToNextMatch",value:function(e){if(this._state.canNavigateForward()){if(this._decorations.getCount()<le){var t=this._decorations.matchAfterPosition(e);return t&&t.isEmpty()&&t.getStartPosition().equals(e)&&(e=this._nextSearchPosition(e),t=this._decorations.matchAfterPosition(e)),void(t&&this._setCurrentFindMatch(t))}var i=this._getNextMatch(e,!1,!0);i&&this._setCurrentFindMatch(i.range)}else{var n=this._decorations.matchBeforePosition(e);n&&this._setCurrentFindMatch(n)}}},{key:"_getNextMatch",value:function(t,i,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(this._cannotFind())return null;var o=this._decorations.getFindScope(),s=e._getSearchRange(this._editor.getModel(),o);s.getEndPosition().isBefore(t)&&(t=s.getStartPosition()),t.isBefore(s.getStartPosition())&&(t=s.getStartPosition());var a=t,c=a.lineNumber,l=a.column,u=this._editor.getModel(),d=new y.L(c,l),h=u.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(126):null,i);return n&&h&&h.range.isEmpty()&&h.range.getStartPosition().equals(d)&&(d=this._nextSearchPosition(d),h=u.findNextMatch(this._state.searchString,d,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(126):null,i)),h?r||s.containsRange(h.range)?h:this._getNextMatch(h.range.getEndPosition(),i,n,!0):null}},{key:"moveToNextMatch",value:function(){this._moveToNextMatch(this._editor.getSelection().getEndPosition())}},{key:"_moveToMatch",value:function(e){var t=this._decorations.getDecorationRangeAt(e);t&&this._setCurrentFindMatch(t)}},{key:"moveToMatch",value:function(e){this._moveToMatch(e)}},{key:"_getReplacePattern",value:function(){return this._state.isRegex?function(e){if(!e||0===e.length)return new O(null);for(var t=[],i=new F(e),n=0,r=e.length;n<r;n++){var o=e.charCodeAt(n);if(92!==o){if(36===o){if(++n>=r)break;var s=e.charCodeAt(n);if(36===s){i.emitUnchanged(n-1),i.emitStatic("$",n+1);continue}if(48===s||38===s){i.emitUnchanged(n-1),i.emitMatchIndex(0,n+1,t),t.length=0;continue}if(49<=s&&s<=57){var a=s-48;if(n+1<r){var c=e.charCodeAt(n+1);if(48<=c&&c<=57){n++,a=10*a+(c-48),i.emitUnchanged(n-2),i.emitMatchIndex(a,n+1,t),t.length=0;continue}}i.emitUnchanged(n-1),i.emitMatchIndex(a,n+1,t),t.length=0;continue}}}else{if(++n>=r)break;var l=e.charCodeAt(n);switch(l){case 92:i.emitUnchanged(n-1),i.emitStatic("\\",n+1);break;case 110:i.emitUnchanged(n-1),i.emitStatic("\n",n+1);break;case 116:i.emitUnchanged(n-1),i.emitStatic("\t",n+1);break;case 117:case 85:case 108:case 76:i.emitUnchanged(n-1),i.emitStatic("",n+1),t.push(String.fromCharCode(l))}}}return i.finalize()}(this._state.replaceString):O.fromStaticValue(this._state.replaceString)}},{key:"replace",value:function(){if(this._hasMatches()){var e=this._getReplacePattern(),t=this._editor.getSelection(),i=this._getNextMatch(t.getStartPosition(),!0,!1);if(i)if(t.equalsRange(i.range)){var n=e.buildReplaceString(i.matches,this._state.preserveCase),r=new m.T4(t,n);this._executeEditorCommand("replace",r),this._decorations.setStartPosition(new y.L(t.startLineNumber,t.startColumn+n.length)),this.research(!0)}else this._decorations.setStartPosition(this._editor.getPosition()),this._setCurrentFindMatch(i.range)}}},{key:"_findMatches",value:function(t,i,n){var r=this,o=(t||[null]).map((function(t){return e._getSearchRange(r._editor.getModel(),t)}));return this._editor.getModel().findMatches(this._state.searchString,o,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(126):null,i,n)}},{key:"replaceAll",value:function(){if(this._hasMatches()){var e=this._decorations.getFindScopes();null===e&&this._state.matchesCount>=le?this._largeReplaceAll():this._regularReplaceAll(e),this.research(!1)}}},{key:"_largeReplaceAll",value:function(){var e=new C.bc(this._state.searchString,this._state.isRegex,this._state.matchCase,this._state.wholeWord?this._editor.getOption(126):null).parseSearchRequest();if(e){var t=e.regex;if(!t.multiline){var i="mu";t.ignoreCase&&(i+="i"),t.global&&(i+="g"),t=new RegExp(t.source,i)}var n,r=this._editor.getModel(),o=r.getValue(1),s=r.getFullModelRange(),a=this._getReplacePattern(),c=this._state.preserveCase;n=a.hasReplacementPatterns||c?o.replace(t,(function(){return a.buildReplaceString(arguments,c)})):o.replace(t,a.buildReplaceString(null,c));var l=new m.hP(s,n,this._editor.getSelection());this._executeEditorCommand("replaceAll",l)}}},{key:"_regularReplaceAll",value:function(e){for(var t=this._getReplacePattern(),i=this._findMatches(e,t.hasReplacementPatterns||this._state.preserveCase,1073741824),n=[],r=0,o=i.length;r<o;r++)n[r]=t.buildReplaceString(i[r].matches,this._state.preserveCase);var s=new D(this._editor.getSelection(),i.map((function(e){return e.range})),n);this._executeEditorCommand("replaceAll",s)}},{key:"selectAllMatches",value:function(){if(this._hasMatches()){for(var e=this._decorations.getFindScopes(),t=this._findMatches(e,!1,1073741824).map((function(e){return new S.Y(e.range.startLineNumber,e.range.startColumn,e.range.endLineNumber,e.range.endColumn)})),i=this._editor.getSelection(),n=0,r=t.length;n<r;n++){if(t[n].equalsRange(i)){t=[i].concat(t.slice(0,n)).concat(t.slice(n+1));break}}this._editor.setSelections(t)}}},{key:"_executeEditorCommand",value:function(e,t){try{this._ignoreModelContentChanged=!0,this._editor.pushUndoStop(),this._editor.executeCommand(e,t),this._editor.pushUndoStop()}finally{this._ignoreModelContentChanged=!1}}}],[{key:"_getSearchRange",value:function(e,t){return t||e.getFullModelRange()}}]),e}(),de=i(97326),he=i(39165),pe=i(10242),ge=i(59092),_e=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,o){var s;(0,r.Z)(this,i),(s=t.call(this))._hideSoon=s._register(new u.pY((function(){return s._hide()}),2e3)),s._isVisible=!1,s._editor=e,s._state=n,s._keybindingService=o,s._domNode=document.createElement("div"),s._domNode.className="findOptionsWidget",s._domNode.style.display="none",s._domNode.style.top="10px",s._domNode.style.zIndex="12",s._domNode.setAttribute("role","presentation"),s._domNode.setAttribute("aria-hidden","true");var a={inputActiveOptionBorder:(0,N.n_1)(N.PRb),inputActiveOptionForeground:(0,N.n_1)(N.Pvw),inputActiveOptionBackground:(0,N.n_1)(N.XEs)};return s.caseSensitive=s._register(new pe.rk(Object.assign({appendTitle:s._keybindingLabelFor(te),isChecked:s._state.matchCase},a))),s._domNode.appendChild(s.caseSensitive.domNode),s._register(s.caseSensitive.onChange((function(){s._state.change({matchCase:s.caseSensitive.checked},!1)}))),s.wholeWords=s._register(new pe.Qx(Object.assign({appendTitle:s._keybindingLabelFor(ie),isChecked:s._state.wholeWord},a))),s._domNode.appendChild(s.wholeWords.domNode),s._register(s.wholeWords.onChange((function(){s._state.change({wholeWord:s.wholeWords.checked},!1)}))),s.regex=s._register(new pe.eH(Object.assign({appendTitle:s._keybindingLabelFor(ne),isChecked:s._state.isRegex},a))),s._domNode.appendChild(s.regex.domNode),s._register(s.regex.onChange((function(){s._state.change({isRegex:s.regex.checked},!1)}))),s._editor.addOverlayWidget((0,de.Z)(s)),s._register(s._state.onFindReplaceStateChange((function(e){var t=!1;e.isRegex&&(s.regex.checked=s._state.isRegex,t=!0),e.wholeWord&&(s.wholeWords.checked=s._state.wholeWord,t=!0),e.matchCase&&(s.caseSensitive.checked=s._state.matchCase,t=!0),!s._state.isRevealed&&t&&s._revealTemporarily()}))),s._register(he.addDisposableListener(s._domNode,he.EventType.MOUSE_LEAVE,(function(e){return s._onMouseLeave()}))),s._register(he.addDisposableListener(s._domNode,"mouseover",(function(e){return s._onMouseOver()}))),s}return(0,o.Z)(i,[{key:"_keybindingLabelFor",value:function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}},{key:"dispose",value:function(){this._editor.removeOverlayWidget(this),(0,s.Z)((0,a.Z)(i.prototype),"dispose",this).call(this)}},{key:"getId",value:function(){return i.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return{preference:0}}},{key:"highlightFindOptions",value:function(){this._revealTemporarily()}},{key:"_revealTemporarily",value:function(){this._show(),this._hideSoon.schedule()}},{key:"_onMouseLeave",value:function(){this._hideSoon.schedule()}},{key:"_onMouseOver",value:function(){this._hideSoon.cancel()}},{key:"_show",value:function(){this._isVisible||(this._isVisible=!0,this._domNode.style.display="block")}},{key:"_hide",value:function(){this._isVisible&&(this._isVisible=!1,this._domNode.style.display="none")}}]),i}(ge.$);_e.ID="editor.contrib.findOptionsWidget";var fe=i(3318);function ve(e,t){return 1===e||2!==e&&t}var me=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){var e;return(0,r.Z)(this,i),(e=t.call(this))._onFindReplaceStateChange=e._register(new fe.Q5),e.onFindReplaceStateChange=e._onFindReplaceStateChange.event,e._searchString="",e._replaceString="",e._isRevealed=!1,e._isReplaceRevealed=!1,e._isRegex=!1,e._isRegexOverride=0,e._wholeWord=!1,e._wholeWordOverride=0,e._matchCase=!1,e._matchCaseOverride=0,e._preserveCase=!1,e._preserveCaseOverride=0,e._searchScope=null,e._matchesPosition=0,e._matchesCount=0,e._currentMatch=null,e._loop=!0,e._isSearching=!1,e._filters=null,e}return(0,o.Z)(i,[{key:"searchString",get:function(){return this._searchString}},{key:"replaceString",get:function(){return this._replaceString}},{key:"isRevealed",get:function(){return this._isRevealed}},{key:"isReplaceRevealed",get:function(){return this._isReplaceRevealed}},{key:"isRegex",get:function(){return ve(this._isRegexOverride,this._isRegex)}},{key:"wholeWord",get:function(){return ve(this._wholeWordOverride,this._wholeWord)}},{key:"matchCase",get:function(){return ve(this._matchCaseOverride,this._matchCase)}},{key:"preserveCase",get:function(){return ve(this._preserveCaseOverride,this._preserveCase)}},{key:"actualIsRegex",get:function(){return this._isRegex}},{key:"actualWholeWord",get:function(){return this._wholeWord}},{key:"actualMatchCase",get:function(){return this._matchCase}},{key:"actualPreserveCase",get:function(){return this._preserveCase}},{key:"searchScope",get:function(){return this._searchScope}},{key:"matchesPosition",get:function(){return this._matchesPosition}},{key:"matchesCount",get:function(){return this._matchesCount}},{key:"currentMatch",get:function(){return this._currentMatch}},{key:"changeMatchInfo",value:function(e,t,i){var n={moveCursor:!1,updateHistory:!1,searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},r=!1;0===t&&(e=0),e>t&&(e=t),this._matchesPosition!==e&&(this._matchesPosition=e,n.matchesPosition=!0,r=!0),this._matchesCount!==t&&(this._matchesCount=t,n.matchesCount=!0,r=!0),"undefined"!==typeof i&&(b.e.equalsRange(this._currentMatch,i)||(this._currentMatch=i,n.currentMatch=!0,r=!0)),r&&this._onFindReplaceStateChange.fire(n)}},{key:"change",value:function(e,t){var i,n=this,r={moveCursor:t,updateHistory:!(arguments.length>2&&void 0!==arguments[2])||arguments[2],searchString:!1,replaceString:!1,isRevealed:!1,isReplaceRevealed:!1,isRegex:!1,wholeWord:!1,matchCase:!1,preserveCase:!1,searchScope:!1,matchesPosition:!1,matchesCount:!1,currentMatch:!1,loop:!1,isSearching:!1,filters:!1},o=!1,s=this.isRegex,a=this.wholeWord,c=this.matchCase,l=this.preserveCase;"undefined"!==typeof e.searchString&&this._searchString!==e.searchString&&(this._searchString=e.searchString,r.searchString=!0,o=!0),"undefined"!==typeof e.replaceString&&this._replaceString!==e.replaceString&&(this._replaceString=e.replaceString,r.replaceString=!0,o=!0),"undefined"!==typeof e.isRevealed&&this._isRevealed!==e.isRevealed&&(this._isRevealed=e.isRevealed,r.isRevealed=!0,o=!0),"undefined"!==typeof e.isReplaceRevealed&&this._isReplaceRevealed!==e.isReplaceRevealed&&(this._isReplaceRevealed=e.isReplaceRevealed,r.isReplaceRevealed=!0,o=!0),"undefined"!==typeof e.isRegex&&(this._isRegex=e.isRegex),"undefined"!==typeof e.wholeWord&&(this._wholeWord=e.wholeWord),"undefined"!==typeof e.matchCase&&(this._matchCase=e.matchCase),"undefined"!==typeof e.preserveCase&&(this._preserveCase=e.preserveCase),"undefined"!==typeof e.searchScope&&((null===(i=e.searchScope)||void 0===i?void 0:i.every((function(e){var t;return null===(t=n._searchScope)||void 0===t?void 0:t.some((function(t){return!b.e.equalsRange(t,e)}))})))||(this._searchScope=e.searchScope,r.searchScope=!0,o=!0)),"undefined"!==typeof e.loop&&this._loop!==e.loop&&(this._loop=e.loop,r.loop=!0,o=!0),"undefined"!==typeof e.isSearching&&this._isSearching!==e.isSearching&&(this._isSearching=e.isSearching,r.isSearching=!0,o=!0),"undefined"!==typeof e.filters&&(this._filters?this._filters.update(e.filters):this._filters=e.filters,r.filters=!0,o=!0),this._isRegexOverride="undefined"!==typeof e.isRegexOverride?e.isRegexOverride:0,this._wholeWordOverride="undefined"!==typeof e.wholeWordOverride?e.wholeWordOverride:0,this._matchCaseOverride="undefined"!==typeof e.matchCaseOverride?e.matchCaseOverride:0,this._preserveCaseOverride="undefined"!==typeof e.preserveCaseOverride?e.preserveCaseOverride:0,s!==this.isRegex&&(o=!0,r.isRegex=!0),a!==this.wholeWord&&(o=!0,r.wholeWord=!0),c!==this.matchCase&&(o=!0,r.matchCase=!0),l!==this.preserveCase&&(o=!0,r.preserveCase=!0),o&&this._onFindReplaceStateChange.fire(r)}},{key:"canNavigateBack",value:function(){return this.canNavigateInLoop()||1!==this.matchesPosition}},{key:"canNavigateForward",value:function(){return this.canNavigateInLoop()||this.matchesPosition<this.matchesCount}},{key:"canNavigateInLoop",value:function(){return this._loop||this.matchesCount>=le}}]),i}(d.JT),ye=i(10202),be=i(37958),Se=i(85855),Ce=i(34922),ke=i(61002),we=i(37858),xe=i(96531),Ne=i(42687),Re=i(90835),Ie=i(47825),De=i(95696),Pe=i(71009),Ee=i(91189),Ze=i(76512),Oe=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},Me=(0,Ie.q5)("find-selection",Ce.l.selection,xe.NC("findSelectionIcon","Icon for 'Find in Selection' in the editor find widget.")),Fe=(0,Ie.q5)("find-collapsed",Ce.l.chevronRight,xe.NC("findCollapsedIcon","Icon to indicate that the editor find widget is collapsed.")),Te=(0,Ie.q5)("find-expanded",Ce.l.chevronDown,xe.NC("findExpandedIcon","Icon to indicate that the editor find widget is expanded.")),Le=(0,Ie.q5)("find-replace",Ce.l.replace,xe.NC("findReplaceIcon","Icon for 'Replace' in the editor find widget.")),Ae=(0,Ie.q5)("find-replace-all",Ce.l.replaceAll,xe.NC("findReplaceAllIcon","Icon for 'Replace All' in the editor find widget.")),We=(0,Ie.q5)("find-previous-match",Ce.l.arrowUp,xe.NC("findPreviousMatchIcon","Icon for 'Find Previous' in the editor find widget.")),Ve=(0,Ie.q5)("find-next-match",Ce.l.arrowDown,xe.NC("findNextMatchIcon","Icon for 'Find Next' in the editor find widget.")),Be=xe.NC("label.find","Find"),He=xe.NC("placeholder.find","Find"),qe=xe.NC("label.previousMatchButton","Previous Match"),Ue=xe.NC("label.nextMatchButton","Next Match"),Ke=xe.NC("label.toggleSelectionFind","Find in Selection"),Ge=xe.NC("label.closeButton","Close"),je=xe.NC("label.replace","Replace"),ze=xe.NC("placeholder.replace","Replace"),Ye=xe.NC("label.replaceButton","Replace"),Je=xe.NC("label.replaceAllButton","Replace All"),Qe=xe.NC("label.toggleReplaceButton","Toggle Replace"),Xe=xe.NC("title.matchesCountLimit","Only the first {0} results are highlighted, but all find operations work on the entire text.",le),$e=xe.NC("label.matchesLocation","{0} of {1}"),et=xe.NC("label.noResults","No results"),tt=419,it=69,nt="ctrlEnterReplaceAll.windows.donotask",rt=we.dz?256:2048,ot=(0,o.Z)((function e(t){(0,r.Z)(this,e),this.afterLineNumber=t,this.heightInPx=33,this.suppressMouseDown=!1,this.domNode=document.createElement("div"),this.domNode.className="dock-find-viewzone"}));function st(e,t,i){var n=!!t.match(/\n/);i&&n&&i.selectionStart>0&&e.stopPropagation()}function at(e,t,i){var n=!!t.match(/\n/);i&&n&&i.selectionEnd<i.value.length&&e.stopPropagation()}var ct=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(e,o,s,a,c,l,h,p,g){var _;return(0,r.Z)(this,i),(_=t.call(this))._cachedHeight=null,_._revealTimeouts=[],_._codeEditor=e,_._controller=o,_._state=s,_._contextViewProvider=a,_._keybindingService=c,_._contextKeyService=l,_._storageService=p,_._notificationService=g,_._ctrlEnterReplaceAllWarningPrompted=!!p.getBoolean(nt,0),_._isVisible=!1,_._isReplaceVisible=!1,_._ignoreChangeEvent=!1,_._updateHistoryDelayer=new u.vp(500),_._register((0,d.OF)((function(){return _._updateHistoryDelayer.cancel()}))),_._register(_._state.onFindReplaceStateChange((function(e){return _._onStateChanged(e)}))),_._buildDomNode(),_._updateButtons(),_._tryUpdateWidgetWidth(),_._findInput.inputBox.layout(),_._register(_._codeEditor.onDidChangeConfiguration((function(e){if(e.hasChanged(88)&&(_._codeEditor.getOption(88)&&_._state.change({isReplaceRevealed:!1},!1),_._updateButtons()),e.hasChanged(140)&&_._tryUpdateWidgetWidth(),e.hasChanged(2)&&_.updateAccessibilitySupport(),e.hasChanged(39)){var t=_._codeEditor.getOption(39).loop;_._state.change({loop:t},!1);var i=_._codeEditor.getOption(39).addExtraSpaceOnTop;i&&!_._viewZone&&(_._viewZone=new ot(0),_._showViewZone()),!i&&_._viewZone&&_._removeViewZone()}}))),_.updateAccessibilitySupport(),_._register(_._codeEditor.onDidChangeCursorSelection((function(){_._isVisible&&_._updateToggleSelectionFindButton()}))),_._register(_._codeEditor.onDidFocusEditorWidget((function(){return Oe((0,de.Z)(_),void 0,void 0,(0,n.Z)().mark((function e(){var t;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._isVisible){e.next=5;break}return e.next=3,this._controller.getGlobalBufferTerm();case 3:(t=e.sent)&&t!==this._state.searchString&&(this._state.change({searchString:t},!1),this._findInput.select());case 5:case"end":return e.stop()}}),e,this)})))}))),_._findInputFocused=A.bindTo(l),_._findFocusTracker=_._register(he.trackFocus(_._findInput.inputBox.inputElement)),_._register(_._findFocusTracker.onDidFocus((function(){_._findInputFocused.set(!0),_._updateSearchScope()}))),_._register(_._findFocusTracker.onDidBlur((function(){_._findInputFocused.set(!1)}))),_._replaceInputFocused=W.bindTo(l),_._replaceFocusTracker=_._register(he.trackFocus(_._replaceInput.inputBox.inputElement)),_._register(_._replaceFocusTracker.onDidFocus((function(){_._replaceInputFocused.set(!0),_._updateSearchScope()}))),_._register(_._replaceFocusTracker.onDidBlur((function(){_._replaceInputFocused.set(!1)}))),_._codeEditor.addOverlayWidget((0,de.Z)(_)),_._codeEditor.getOption(39).addExtraSpaceOnTop&&(_._viewZone=new ot(0)),_._register(_._codeEditor.onDidChangeModel((function(){_._isVisible&&(_._viewZoneId=void 0)}))),_._register(_._codeEditor.onDidScrollChange((function(e){e.scrollTopChanged?_._layoutViewZone():setTimeout((function(){_._layoutViewZone()}),0)}))),_}return(0,o.Z)(i,[{key:"getId",value:function(){return i.ID}},{key:"getDomNode",value:function(){return this._domNode}},{key:"getPosition",value:function(){return this._isVisible?{preference:0}:null}},{key:"_onStateChanged",value:function(e){if(e.searchString){try{this._ignoreChangeEvent=!0,this._findInput.setValue(this._state.searchString)}finally{this._ignoreChangeEvent=!1}this._updateButtons()}if(e.replaceString&&(this._replaceInput.inputBox.value=this._state.replaceString),e.isRevealed&&(this._state.isRevealed?this._reveal():this._hide(!0)),e.isReplaceRevealed&&(this._state.isReplaceRevealed?this._codeEditor.getOption(88)||this._isReplaceVisible||(this._isReplaceVisible=!0,this._replaceInput.width=he.getTotalWidth(this._findInput.domNode),this._updateButtons(),this._replaceInput.inputBox.layout()):this._isReplaceVisible&&(this._isReplaceVisible=!1,this._updateButtons())),(e.isRevealed||e.isReplaceRevealed)&&(this._state.isRevealed||this._state.isReplaceRevealed)&&this._tryUpdateHeight()&&this._showViewZone(),e.isRegex&&this._findInput.setRegex(this._state.isRegex),e.wholeWord&&this._findInput.setWholeWords(this._state.wholeWord),e.matchCase&&this._findInput.setCaseSensitive(this._state.matchCase),e.preserveCase&&this._replaceInput.setPreserveCase(this._state.preserveCase),e.searchScope&&(this._state.searchScope?this._toggleSelectionFind.checked=!0:this._toggleSelectionFind.checked=!1,this._updateToggleSelectionFindButton()),e.searchString||e.matchesCount||e.matchesPosition){var t=this._state.searchString.length>0&&0===this._state.matchesCount;this._domNode.classList.toggle("no-results",t),this._updateMatchesCount(),this._updateButtons()}(e.searchString||e.currentMatch)&&this._layoutViewZone(),e.updateHistory&&this._delayedUpdateHistory(),e.loop&&this._updateButtons()}},{key:"_delayedUpdateHistory",value:function(){this._updateHistoryDelayer.trigger(this._updateHistory.bind(this)).then(void 0,ke.dL)}},{key:"_updateHistory",value:function(){this._state.searchString&&this._findInput.inputBox.addToHistory(),this._state.replaceString&&this._replaceInput.inputBox.addToHistory()}},{key:"_updateMatchesCount",value:function(){var e;if(this._matchesCount.style.minWidth=it+"px",this._state.matchesCount>=le?this._matchesCount.title=Xe:this._matchesCount.title="",this._matchesCount.firstChild&&this._matchesCount.removeChild(this._matchesCount.firstChild),this._state.matchesCount>0){var t=String(this._state.matchesCount);this._state.matchesCount>=le&&(t+="+");var i=String(this._state.matchesPosition);"0"===i&&(i="?"),e=h.WU($e,i,t)}else e=et;this._matchesCount.appendChild(document.createTextNode(e)),(0,ye.Z9)(this._getAriaLabel(e,this._state.currentMatch,this._state.searchString)),it=Math.max(it,this._matchesCount.clientWidth)}},{key:"_getAriaLabel",value:function(e,t,i){if(e===et)return""===i?xe.NC("ariaSearchNoResultEmpty","{0} found",e):xe.NC("ariaSearchNoResult","{0} found for '{1}'",e,i);if(t){var n=xe.NC("ariaSearchNoResultWithLineNum","{0} found for '{1}', at {2}",e,i,t.startLineNumber+":"+t.startColumn),r=this._codeEditor.getModel();if(r&&t.startLineNumber<=r.getLineCount()&&t.startLineNumber>=1){var o=r.getLineContent(t.startLineNumber);return"".concat(o,", ").concat(n)}return n}return xe.NC("ariaSearchNoResultWithLineNumNoCurrentMatch","{0} found for '{1}'",e,i)}},{key:"_updateToggleSelectionFindButton",value:function(){var e=this._codeEditor.getSelection(),t=!!e&&(e.startLineNumber!==e.endLineNumber||e.startColumn!==e.endColumn),i=this._toggleSelectionFind.checked;this._isVisible&&(i||t)?this._toggleSelectionFind.enable():this._toggleSelectionFind.disable()}},{key:"_updateButtons",value:function(){this._findInput.setEnabled(this._isVisible),this._replaceInput.setEnabled(this._isVisible&&this._isReplaceVisible),this._updateToggleSelectionFindButton(),this._closeBtn.setEnabled(this._isVisible);var e=this._state.searchString.length>0,t=!!this._state.matchesCount;this._prevBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateBack()),this._nextBtn.setEnabled(this._isVisible&&e&&t&&this._state.canNavigateForward()),this._replaceBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._replaceAllBtn.setEnabled(this._isVisible&&this._isReplaceVisible&&e),this._domNode.classList.toggle("replaceToggled",this._isReplaceVisible),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible);var i=!this._codeEditor.getOption(88);this._toggleReplaceBtn.setEnabled(this._isVisible&&i)}},{key:"_reveal",value:function(){var e=this;if(this._revealTimeouts.forEach((function(e){clearTimeout(e)})),this._revealTimeouts=[],!this._isVisible){this._isVisible=!0;var t=this._codeEditor.getSelection();switch(this._codeEditor.getOption(39).autoFindInSelection){case"always":this._toggleSelectionFind.checked=!0;break;case"never":this._toggleSelectionFind.checked=!1;break;case"multiline":var i=!!t&&t.startLineNumber!==t.endLineNumber;this._toggleSelectionFind.checked=i}this._tryUpdateWidgetWidth(),this._updateButtons(),this._revealTimeouts.push(setTimeout((function(){e._domNode.classList.add("visible"),e._domNode.setAttribute("aria-hidden","false")}),0)),this._revealTimeouts.push(setTimeout((function(){e._findInput.validate()}),200)),this._codeEditor.layoutOverlayWidget(this);var n=!0;if(this._codeEditor.getOption(39).seedSearchStringFromSelection&&t){var r=this._codeEditor.getDomNode();if(r){var o=he.getDomNodePagePosition(r),s=this._codeEditor.getScrolledVisiblePosition(t.getStartPosition()),a=o.left+(s?s.left:0),c=s?s.top:0;if(this._viewZone&&c<this._viewZone.heightInPx){t.endLineNumber>t.startLineNumber&&(n=!1);var l=he.getTopLeftOffset(this._domNode).left;a>l&&(n=!1);var u=this._codeEditor.getScrolledVisiblePosition(t.getEndPosition());o.left+(u?u.left:0)>l&&(n=!1)}}}this._showViewZone(n)}}},{key:"_hide",value:function(e){this._revealTimeouts.forEach((function(e){clearTimeout(e)})),this._revealTimeouts=[],this._isVisible&&(this._isVisible=!1,this._updateButtons(),this._domNode.classList.remove("visible"),this._domNode.setAttribute("aria-hidden","true"),this._findInput.clearMessage(),e&&this._codeEditor.focus(),this._codeEditor.layoutOverlayWidget(this),this._removeViewZone())}},{key:"_layoutViewZone",value:function(e){var t=this;if(this._codeEditor.getOption(39).addExtraSpaceOnTop){if(this._isVisible){var i=this._viewZone;void 0===this._viewZoneId&&i&&this._codeEditor.changeViewZones((function(n){i.heightInPx=t._getHeight(),t._viewZoneId=n.addZone(i),t._codeEditor.setScrollTop(e||t._codeEditor.getScrollTop()+i.heightInPx)}))}}else this._removeViewZone()}},{key:"_showViewZone",value:function(){var e=this,t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this._isVisible&&this._codeEditor.getOption(39).addExtraSpaceOnTop){void 0===this._viewZone&&(this._viewZone=new ot(0));var i=this._viewZone;this._codeEditor.changeViewZones((function(n){if(void 0!==e._viewZoneId){var r=e._getHeight();if(r===i.heightInPx)return;var o=r-i.heightInPx;return i.heightInPx=r,n.layoutZone(e._viewZoneId),void(t&&e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()+o))}var s=e._getHeight();(s-=e._codeEditor.getOption(81).top)<=0||(i.heightInPx=s,e._viewZoneId=n.addZone(i),t&&e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()+s))}))}}},{key:"_removeViewZone",value:function(){var e=this;this._codeEditor.changeViewZones((function(t){void 0!==e._viewZoneId&&(t.removeZone(e._viewZoneId),e._viewZoneId=void 0,e._viewZone&&(e._codeEditor.setScrollTop(e._codeEditor.getScrollTop()-e._viewZone.heightInPx),e._viewZone=void 0))}))}},{key:"_tryUpdateWidgetWidth",value:function(){if(this._isVisible&&he.isInDOM(this._domNode)){var e=this._codeEditor.getLayoutInfo();if(e.contentWidth<=0)this._domNode.classList.add("hiddenEditor");else{this._domNode.classList.contains("hiddenEditor")&&this._domNode.classList.remove("hiddenEditor");var t=e.width,i=e.minimap.minimapWidth,n=!1,r=!1,o=!1;if(this._resized)if(he.getTotalWidth(this._domNode)>tt)return this._domNode.style.maxWidth="".concat(t-28-i-15,"px"),void(this._replaceInput.width=he.getTotalWidth(this._findInput.domNode));if(447+i>=t&&(r=!0),447+i-it>=t&&(o=!0),447+i-it>=t+50&&(n=!0),this._domNode.classList.toggle("collapsed-find-widget",n),this._domNode.classList.toggle("narrow-find-widget",o),this._domNode.classList.toggle("reduced-find-widget",r),o||n||(this._domNode.style.maxWidth="".concat(t-28-i-15,"px")),this._findInput.layout({collapsedFindWidget:n,narrowFindWidget:o,reducedFindWidget:r}),this._resized){var s=this._findInput.inputBox.element.clientWidth;s>0&&(this._replaceInput.width=s)}else this._isReplaceVisible&&(this._replaceInput.width=he.getTotalWidth(this._findInput.domNode))}}}},{key:"_getHeight",value:function(){var e=0;return e+=4,e+=this._findInput.inputBox.height+2,this._isReplaceVisible&&(e+=4,e+=this._replaceInput.inputBox.height+2),e+=4}},{key:"_tryUpdateHeight",value:function(){var e=this._getHeight();return(null===this._cachedHeight||this._cachedHeight!==e)&&(this._cachedHeight=e,this._domNode.style.height="".concat(e,"px"),!0)}},{key:"focusFindInput",value:function(){this._findInput.select(),this._findInput.focus()}},{key:"focusReplaceInput",value:function(){this._replaceInput.select(),this._replaceInput.focus()}},{key:"highlightFindOptions",value:function(){this._findInput.highlightFindOptions()}},{key:"_updateSearchScope",value:function(){var e=this;if(this._codeEditor.hasModel()&&this._toggleSelectionFind.checked){var t=this._codeEditor.getSelections();t.map((function(t){1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1)));var i=e._state.currentMatch;return t.startLineNumber===t.endLineNumber||b.e.equalsRange(t,i)?null:t})).filter((function(e){return!!e})),t.length&&this._state.change({searchScope:t},!0)}}},{key:"_onFindInputMouseDown",value:function(e){e.middleButton&&e.stopPropagation()}},{key:"_onFindInputKeyDown",value:function(e){return e.equals(3|rt)?(this._keybindingService.dispatchEvent(e,e.target)||this._findInput.inputBox.insertAtCursor("\n"),void e.preventDefault()):e.equals(2)?(this._isReplaceVisible?this._replaceInput.focus():this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?st(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):e.equals(18)?at(e,this._findInput.getValue(),this._findInput.domNode.querySelector("textarea")):void 0}},{key:"_onReplaceInputKeyDown",value:function(e){return e.equals(3|rt)?(this._keybindingService.dispatchEvent(e,e.target)||(we.ED&&we.tY&&!this._ctrlEnterReplaceAllWarningPrompted&&(this._notificationService.info(xe.NC("ctrlEnter.keybindingChanged","Ctrl+Enter now inserts line break instead of replacing all. You can modify the keybinding for editor.action.replaceAll to override this behavior.")),this._ctrlEnterReplaceAllWarningPrompted=!0,this._storageService.store(nt,!0,0,0)),this._replaceInput.inputBox.insertAtCursor("\n")),void e.preventDefault()):e.equals(2)?(this._findInput.focusOnCaseSensitive(),void e.preventDefault()):e.equals(1026)?(this._findInput.focus(),void e.preventDefault()):e.equals(2066)?(this._codeEditor.focus(),void e.preventDefault()):e.equals(16)?st(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):e.equals(18)?at(e,this._replaceInput.inputBox.value,this._replaceInput.inputBox.element.querySelector("textarea")):void 0}},{key:"getVerticalSashLeft",value:function(e){return 0}},{key:"_keybindingLabelFor",value:function(e){var t=this._keybindingService.lookupKeybinding(e);return t?" (".concat(t.getLabel(),")"):""}},{key:"_buildDomNode",value:function(){var e=this;this._findInput=this._register(new Ne.Yb(null,this._contextViewProvider,{width:221,label:Be,placeholder:He,appendCaseSensitiveLabel:this._keybindingLabelFor(te),appendWholeWordsLabel:this._keybindingLabelFor(ie),appendRegexLabel:this._keybindingLabelFor(ne),validation:function(t){if(0===t.length||!e._findInput.getRegex())return null;try{return new RegExp(t,"gu"),null}catch(i){return{content:i.message}}},flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118,showCommonFindToggles:!0,showHistoryHint:function(){return(0,Re.u)(e._keybindingService)},inputBoxStyles:Ze.Hc,toggleStyles:Ze.pl},this._contextKeyService)),this._findInput.setRegex(!!this._state.isRegex),this._findInput.setCaseSensitive(!!this._state.matchCase),this._findInput.setWholeWords(!!this._state.wholeWord),this._register(this._findInput.onKeyDown((function(t){return e._onFindInputKeyDown(t)}))),this._register(this._findInput.inputBox.onDidChange((function(){e._ignoreChangeEvent||e._state.change({searchString:e._findInput.getValue()},!0)}))),this._register(this._findInput.onDidOptionChange((function(){e._state.change({isRegex:e._findInput.getRegex(),wholeWord:e._findInput.getWholeWords(),matchCase:e._findInput.getCaseSensitive()},!0)}))),this._register(this._findInput.onCaseSensitiveKeyDown((function(t){t.equals(1026)&&e._isReplaceVisible&&(e._replaceInput.focus(),t.preventDefault())}))),this._register(this._findInput.onRegexKeyDown((function(t){t.equals(2)&&e._isReplaceVisible&&(e._replaceInput.focusOnPreserve(),t.preventDefault())}))),this._register(this._findInput.inputBox.onDidHeightChange((function(t){e._tryUpdateHeight()&&e._showViewZone()}))),we.IJ&&this._register(this._findInput.onMouseDown((function(t){return e._onFindInputMouseDown(t)}))),this._matchesCount=document.createElement("div"),this._matchesCount.className="matchesCount",this._updateMatchesCount(),this._prevBtn=this._register(new lt({label:qe+this._keybindingLabelFor(Y),icon:We,onTrigger:function(){(0,Ee.cW)(e._codeEditor.getAction(Y)).run().then(void 0,ke.dL)}})),this._nextBtn=this._register(new lt({label:Ue+this._keybindingLabelFor(z),icon:Ve,onTrigger:function(){(0,Ee.cW)(e._codeEditor.getAction(z)).run().then(void 0,ke.dL)}}));var t=document.createElement("div");t.className="find-part",t.appendChild(this._findInput.domNode);var i=document.createElement("div");i.className="find-actions",t.appendChild(i),i.appendChild(this._matchesCount),i.appendChild(this._prevBtn.domNode),i.appendChild(this._nextBtn.domNode),this._toggleSelectionFind=this._register(new be.Z({icon:Me,title:Ke+this._keybindingLabelFor(re),isChecked:!1,inputActiveOptionBackground:(0,N.n_1)(N.XEs),inputActiveOptionBorder:(0,N.n_1)(N.PRb),inputActiveOptionForeground:(0,N.n_1)(N.Pvw)})),this._register(this._toggleSelectionFind.onChange((function(){if(e._toggleSelectionFind.checked){if(e._codeEditor.hasModel()){var t=e._codeEditor.getSelections();t.map((function(t){return 1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._codeEditor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t})).filter((function(e){return!!e})),t.length&&e._state.change({searchScope:t},!0)}}else e._state.change({searchScope:null},!0)}))),i.appendChild(this._toggleSelectionFind.domNode),this._closeBtn=this._register(new lt({label:Ge+this._keybindingLabelFor(ee),icon:Ie.s_,onTrigger:function(){e._state.change({isRevealed:!1,searchScope:null},!1)},onKeyDown:function(t){t.equals(2)&&e._isReplaceVisible&&(e._replaceBtn.isEnabled()?e._replaceBtn.focus():e._codeEditor.focus(),t.preventDefault())}})),i.appendChild(this._closeBtn.domNode),this._replaceInput=this._register(new Ne.Nq(null,void 0,{label:je,placeholder:ze,appendPreserveCaseLabel:this._keybindingLabelFor(oe),history:[],flexibleHeight:true,flexibleWidth:true,flexibleMaxHeight:118,showHistoryHint:function(){return(0,Re.u)(e._keybindingService)},inputBoxStyles:Ze.Hc,toggleStyles:Ze.pl},this._contextKeyService,!0)),this._replaceInput.setPreserveCase(!!this._state.preserveCase),this._register(this._replaceInput.onKeyDown((function(t){return e._onReplaceInputKeyDown(t)}))),this._register(this._replaceInput.inputBox.onDidChange((function(){e._state.change({replaceString:e._replaceInput.inputBox.value},!1)}))),this._register(this._replaceInput.inputBox.onDidHeightChange((function(t){e._isReplaceVisible&&e._tryUpdateHeight()&&e._showViewZone()}))),this._register(this._replaceInput.onDidOptionChange((function(){e._state.change({preserveCase:e._replaceInput.getPreserveCase()},!0)}))),this._register(this._replaceInput.onPreserveCaseKeyDown((function(t){t.equals(2)&&(e._prevBtn.isEnabled()?e._prevBtn.focus():e._nextBtn.isEnabled()?e._nextBtn.focus():e._toggleSelectionFind.enabled?e._toggleSelectionFind.focus():e._closeBtn.isEnabled()&&e._closeBtn.focus(),t.preventDefault())}))),this._replaceBtn=this._register(new lt({label:Ye+this._keybindingLabelFor(se),icon:Le,onTrigger:function(){e._controller.replace()},onKeyDown:function(t){t.equals(1026)&&(e._closeBtn.focus(),t.preventDefault())}})),this._replaceAllBtn=this._register(new lt({label:Je+this._keybindingLabelFor(ae),icon:Ae,onTrigger:function(){e._controller.replaceAll()}}));var n=document.createElement("div");n.className="replace-part",n.appendChild(this._replaceInput.domNode);var r=document.createElement("div");r.className="replace-actions",n.appendChild(r),r.appendChild(this._replaceBtn.domNode),r.appendChild(this._replaceAllBtn.domNode),this._toggleReplaceBtn=this._register(new lt({label:Qe,className:"codicon toggle left",onTrigger:function(){e._state.change({isReplaceRevealed:!e._isReplaceVisible},!1),e._isReplaceVisible&&(e._replaceInput.width=he.getTotalWidth(e._findInput.domNode),e._replaceInput.inputBox.layout()),e._showViewZone()}})),this._toggleReplaceBtn.setExpanded(this._isReplaceVisible),this._domNode=document.createElement("div"),this._domNode.className="editor-widget find-widget",this._domNode.setAttribute("aria-hidden","true"),this._domNode.style.width="".concat(tt,"px"),this._domNode.appendChild(this._toggleReplaceBtn.domNode),this._domNode.appendChild(t),this._domNode.appendChild(n),this._resizeSash=new Se.g(this._domNode,this,{orientation:0,size:2}),this._resized=!1;var o=tt;this._register(this._resizeSash.onDidStart((function(){o=he.getTotalWidth(e._domNode)}))),this._register(this._resizeSash.onDidChange((function(t){e._resized=!0;var i=o+t.startX-t.currentX;i<tt||(i>(parseFloat(he.getComputedStyle(e._domNode).maxWidth)||0)||(e._domNode.style.width="".concat(i,"px"),e._isReplaceVisible&&(e._replaceInput.width=he.getTotalWidth(e._findInput.domNode)),e._findInput.inputBox.layout(),e._tryUpdateHeight()))}))),this._register(this._resizeSash.onDidReset((function(){var t=he.getTotalWidth(e._domNode);if(!(t<tt)){var i=tt;if(!e._resized||t===tt){var n=e._codeEditor.getLayoutInfo();i=n.width-28-n.minimap.minimapWidth-15,e._resized=!0}e._domNode.style.width="".concat(i,"px"),e._isReplaceVisible&&(e._replaceInput.width=he.getTotalWidth(e._findInput.domNode)),e._findInput.inputBox.layout()}})))}},{key:"updateAccessibilitySupport",value:function(){var e=this._codeEditor.getOption(2);this._findInput.setFocusInputOnOptionClick(2!==e)}}]),i}(ge.$);ct.ID="editor.contrib.findWidget";var lt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(e){var n;(0,r.Z)(this,i),(n=t.call(this))._opts=e;var o="button";return n._opts.className&&(o=o+" "+n._opts.className),n._opts.icon&&(o=o+" "+De.k.asClassName(n._opts.icon)),n._domNode=document.createElement("div"),n._domNode.title=n._opts.label,n._domNode.tabIndex=0,n._domNode.className=o,n._domNode.setAttribute("role","button"),n._domNode.setAttribute("aria-label",n._opts.label),n.onclick(n._domNode,(function(e){n._opts.onTrigger(),e.preventDefault()})),n.onkeydown(n._domNode,(function(e){var t,i;if(e.equals(10)||e.equals(3))return n._opts.onTrigger(),void e.preventDefault();null===(i=(t=n._opts).onKeyDown)||void 0===i||i.call(t,e)})),n}return(0,o.Z)(i,[{key:"domNode",get:function(){return this._domNode}},{key:"isEnabled",value:function(){return this._domNode.tabIndex>=0}},{key:"focus",value:function(){this._domNode.focus()}},{key:"setEnabled",value:function(e){this._domNode.classList.toggle("disabled",!e),this._domNode.setAttribute("aria-disabled",String(!e)),this._domNode.tabIndex=e?0:-1}},{key:"setExpanded",value:function(e){var t,i,n,r;(this._domNode.setAttribute("aria-expanded",String(!!e)),e)?((t=this._domNode.classList).remove.apply(t,(0,k.Z)(De.k.asClassNameArray(Fe))),(i=this._domNode.classList).add.apply(i,(0,k.Z)(De.k.asClassNameArray(Te)))):((n=this._domNode.classList).remove.apply(n,(0,k.Z)(De.k.asClassNameArray(Te))),(r=this._domNode.classList).add.apply(r,(0,k.Z)(De.k.asClassNameArray(Fe))))}}]),i}(ge.$);(0,R.Ic)((function(e,t){var i=function(e,i){i&&t.addRule(".monaco-editor ".concat(e," { background-color: ").concat(i,"; }"))};i(".findMatch",e.getColor(N.MUv)),i(".currentFindMatch",e.getColor(N.nyM)),i(".findScope",e.getColor(N.jUe)),i(".find-widget",e.getColor(N.D0T));var n=e.getColor(N.rh);n&&t.addRule(".monaco-editor .find-widget { box-shadow: 0 0 8px 2px ".concat(n,"; }"));var r=e.getColor(N.A42);r&&t.addRule(".monaco-editor .find-widget { border-left: 1px solid ".concat(r,"; border-right: 1px solid ").concat(r,"; border-bottom: 1px solid ").concat(r,"; }"));var o=e.getColor(N.EiJ);o&&t.addRule(".monaco-editor .findMatch { border: 1px ".concat((0,Pe.c3)(e.type)?"dotted":"solid"," ").concat(o,"; box-sizing: border-box; }"));var s=e.getColor(N.pnM);s&&t.addRule(".monaco-editor .currentFindMatch { border: 2px solid ".concat(s,"; padding: 1px; box-sizing: border-box; }"));var a=e.getColor(N.gkn);a&&t.addRule(".monaco-editor .findScope { border: 1px ".concat((0,Pe.c3)(e.type)?"dashed":"solid"," ").concat(a,"; }"));var c=e.getColor(N.lRK);c&&t.addRule(".monaco-editor .find-widget { border: 1px solid ".concat(c,"; }"));var l=e.getColor(N.Hfx);l&&t.addRule(".monaco-editor .find-widget { color: ".concat(l,"; }"));var u=e.getColor(N.Ido);u&&t.addRule(".monaco-editor .find-widget.no-results .matchesCount { color: ".concat(u,"; }"));var d=e.getColor(N.Ng6);if(d)t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: ".concat(d,"; }"));else{var h=e.getColor(N.D1_);h&&t.addRule(".monaco-editor .find-widget .monaco-sash { background-color: ".concat(h,"; }"))}var p=e.getColor(N.lUq);p&&t.addRule("\n\t\t.monaco-editor .find-widget .button:not(.disabled):hover,\n\t\t.monaco-editor .find-widget .codicon-find-selection:hover {\n\t\t\tbackground-color: ".concat(p," !important;\n\t\t}\n\t"));var g=e.getColor(N.R80);g&&t.addRule(".monaco-editor .find-widget .monaco-inputbox.synthetic-focus { outline-color: ".concat(g,"; }"))}));var ut=i(54998),dt=i(55351),ht=i(99292),pt=i(94341),gt=i(8439),_t=i(21017),ft=i(87327),vt=function(e,t,i,n){var r,o=arguments.length,s=o<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,i):n;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,i,n);else for(var a=e.length-1;a>=0;a--)(r=e[a])&&(s=(o<3?r(s):o>3?r(t,i,s):r(t,i))||s);return o>3&&s&&Object.defineProperty(t,i,s),s},mt=function(e,t){return function(i,n){t(i,n,e)}},yt=function(e,t,i,n){return new(i||(i=Promise))((function(r,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof i?t:new i((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};function bt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"single",i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e.hasModel())return null;var n=e.getSelection();if("single"===t&&n.startLineNumber===n.endLineNumber||"multiple"===t)if(n.isEmpty()){var r=e.getConfiguredWordAtPosition(n.getStartPosition());if(r&&!1===i)return r.word}else if(e.getModel().getValueLengthInRange(n)<524288)return e.getModel().getValueInRange(n);return null}var St=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,o,s){var a;return(0,r.Z)(this,i),(a=t.call(this))._editor=e,a._findWidgetVisible=L.bindTo(n),a._contextKeyService=n,a._storageService=o,a._clipboardService=s,a._updateHistoryDelayer=new u.vp(500),a._state=a._register(new me),a.loadQueryState(),a._register(a._state.onFindReplaceStateChange((function(e){return a._onStateChanged(e)}))),a._model=null,a._register(a._editor.onDidChangeModel((function(){var e=a._editor.getModel()&&a._state.isRevealed;a.disposeModel(),a._state.change({searchScope:null,matchCase:a._storageService.getBoolean("editor.matchCase",1,!1),wholeWord:a._storageService.getBoolean("editor.wholeWord",1,!1),isRegex:a._storageService.getBoolean("editor.isRegex",1,!1),preserveCase:a._storageService.getBoolean("editor.preserveCase",1,!1)},!1),e&&a._start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!1,updateSearchScope:!1,loop:a._editor.getOption(39).loop})}))),a}return(0,o.Z)(i,[{key:"editor",get:function(){return this._editor}},{key:"dispose",value:function(){this.disposeModel(),(0,s.Z)((0,a.Z)(i.prototype),"dispose",this).call(this)}},{key:"disposeModel",value:function(){this._model&&(this._model.dispose(),this._model=null)}},{key:"_onStateChanged",value:function(e){this.saveQueryState(e),e.isRevealed&&(this._state.isRevealed?this._findWidgetVisible.set(!0):(this._findWidgetVisible.reset(),this.disposeModel())),e.searchString&&this.setGlobalBufferTerm(this._state.searchString)}},{key:"saveQueryState",value:function(e){e.isRegex&&this._storageService.store("editor.isRegex",this._state.actualIsRegex,1,1),e.wholeWord&&this._storageService.store("editor.wholeWord",this._state.actualWholeWord,1,1),e.matchCase&&this._storageService.store("editor.matchCase",this._state.actualMatchCase,1,1),e.preserveCase&&this._storageService.store("editor.preserveCase",this._state.actualPreserveCase,1,1)}},{key:"loadQueryState",value:function(){this._state.change({matchCase:this._storageService.getBoolean("editor.matchCase",1,this._state.matchCase),wholeWord:this._storageService.getBoolean("editor.wholeWord",1,this._state.wholeWord),isRegex:this._storageService.getBoolean("editor.isRegex",1,this._state.isRegex),preserveCase:this._storageService.getBoolean("editor.preserveCase",1,this._state.preserveCase)},!1)}},{key:"isFindInputFocused",value:function(){return!!A.getValue(this._contextKeyService)}},{key:"getState",value:function(){return this._state}},{key:"closeFindWidget",value:function(){this._state.change({isRevealed:!1,searchScope:null},!1),this._editor.focus()}},{key:"toggleCaseSensitive",value:function(){this._state.change({matchCase:!this._state.matchCase},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleWholeWords",value:function(){this._state.change({wholeWord:!this._state.wholeWord},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleRegex",value:function(){this._state.change({isRegex:!this._state.isRegex},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"togglePreserveCase",value:function(){this._state.change({preserveCase:!this._state.preserveCase},!1),this._state.isRevealed||this.highlightFindOptions()}},{key:"toggleSearchScope",value:function(){var e=this;if(this._state.searchScope)this._state.change({searchScope:null},!0);else if(this._editor.hasModel()){var t=this._editor.getSelections();t.map((function(t){return 1===t.endColumn&&t.endLineNumber>t.startLineNumber&&(t=t.setEndPosition(t.endLineNumber-1,e._editor.getModel().getLineMaxColumn(t.endLineNumber-1))),t.isEmpty()?null:t})).filter((function(e){return!!e})),t.length&&this._state.change({searchScope:t},!0)}}},{key:"setSearchString",value:function(e){this._state.isRegex&&(e=h.ec(e)),this._state.change({searchString:e},!1)}},{key:"highlightFindOptions",value:function(){}},{key:"_start",value:function(e,t){return yt(this,void 0,void 0,(0,n.Z)().mark((function i(){var r,o,s,a,c;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.disposeModel(),this._editor.hasModel()){i.next=3;break}return i.abrupt("return");case 3:if(r=Object.assign(Object.assign({},t),{isRevealed:!0}),"single"===e.seedSearchStringFromSelection?(o=bt(this._editor,e.seedSearchStringFromSelection,e.seedSearchStringFromNonEmptySelection))&&(this._state.isRegex?r.searchString=h.ec(o):r.searchString=o):"multiple"!==e.seedSearchStringFromSelection||e.updateSearchScope||(s=bt(this._editor,e.seedSearchStringFromSelection))&&(r.searchString=s),r.searchString||!e.seedSearchStringFromGlobalClipboard){i.next=12;break}return i.next=8,this.getGlobalBufferTerm();case 8:if(a=i.sent,this._editor.hasModel()){i.next=11;break}return i.abrupt("return");case 11:a&&(r.searchString=a);case 12:e.forceRevealReplace||r.isReplaceRevealed?r.isReplaceRevealed=!0:this._findWidgetVisible.get()||(r.isReplaceRevealed=!1),e.updateSearchScope&&(c=this._editor.getSelections()).some((function(e){return!e.isEmpty()}))&&(r.searchScope=c),r.loop=e.loop,this._state.change(r,!1),this._model||(this._model=new ue(this._editor,this._state));case 17:case"end":return i.stop()}}),i,this)})))}},{key:"start",value:function(e,t){return this._start(e,t)}},{key:"moveToNextMatch",value:function(){return!!this._model&&(this._model.moveToNextMatch(),!0)}},{key:"moveToPrevMatch",value:function(){return!!this._model&&(this._model.moveToPrevMatch(),!0)}},{key:"goToMatch",value:function(e){return!!this._model&&(this._model.moveToMatch(e),!0)}},{key:"replace",value:function(){return!!this._model&&(this._model.replace(),!0)}},{key:"replaceAll",value:function(){return!!this._model&&(this._model.replaceAll(),!0)}},{key:"selectAllMatches",value:function(){return!!this._model&&(this._model.selectAllMatches(),this._editor.focus(),!0)}},{key:"getGlobalBufferTerm",value:function(){return yt(this,void 0,void 0,(0,n.Z)().mark((function e(){return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._editor.getOption(39).globalFindClipboard||!this._editor.hasModel()||this._editor.getModel().isTooLargeForSyncing()){e.next=2;break}return e.abrupt("return",this._clipboardService.readFindText());case 2:return e.abrupt("return","");case 3:case"end":return e.stop()}}),e,this)})))}},{key:"setGlobalBufferTerm",value:function(e){this._editor.getOption(39).globalFindClipboard&&this._editor.hasModel()&&!this._editor.getModel().isTooLargeForSyncing()&&this._clipboardService.writeFindText(e)}}],[{key:"get",value:function(e){return e.getContribution(i.ID)}}]),i}(d.JT);St.ID="editor.contrib.findController";var Ct=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(e,n,o,s,a,c,l,u){var d;return(0,r.Z)(this,i),(d=t.call(this,e,o,l,u))._contextViewService=n,d._keybindingService=s,d._themeService=a,d._notificationService=c,d._widget=null,d._findOptionsWidget=null,d}return(0,o.Z)(i,[{key:"_start",value:function(e,t){var r=this,o=Object.create(null,{_start:{get:function(){return(0,s.Z)((0,a.Z)(i.prototype),"_start",r)}}});return yt(this,void 0,void 0,(0,n.Z)().mark((function i(){var r,s,a;return(0,n.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:this._widget||this._createFindWidget(),r=this._editor.getSelection(),s=!1,i.t0=this._editor.getOption(39).autoFindInSelection,i.next="always"===i.t0?6:"never"===i.t0?8:"multiline"===i.t0?10:13;break;case 6:return s=!0,i.abrupt("break",14);case 8:return s=!1,i.abrupt("break",14);case 10:return a=!!r&&r.startLineNumber!==r.endLineNumber,s=a,i.abrupt("break",14);case 13:return i.abrupt("break",14);case 14:return e.updateSearchScope=e.updateSearchScope||s,i.next=17,o._start.call(this,e,t);case 17:this._widget&&(2===e.shouldFocus?this._widget.focusReplaceInput():1===e.shouldFocus&&this._widget.focusFindInput());case 18:case"end":return i.stop()}}),i,this)})))}},{key:"highlightFindOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._widget||this._createFindWidget(),this._state.isRevealed&&!e?this._widget.highlightFindOptions():this._findOptionsWidget.highlightFindOptions()}},{key:"_createFindWidget",value:function(){this._widget=this._register(new ct(this._editor,this,this._state,this._contextViewService,this._keybindingService,this._contextKeyService,this._themeService,this._storageService,this._notificationService)),this._findOptionsWidget=this._register(new _e(this._editor,this._state,this._keybindingService))}}]),i}(St=vt([mt(1,T.i6),mt(2,ft.Uy),mt(3,dt.p)],St));Ct=vt([mt(1,ht.u),mt(2,T.i6),mt(3,pt.d),mt(4,R.XE),mt(5,gt.lT),mt(6,ft.Uy),mt(7,dt.p)],Ct),(0,p.rn)(new p.jY({id:K,label:xe.NC("startFindAction","Find"),alias:"Find",precondition:T.Ao.or(_.u.focus,T.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2084,weight:100},menuOpts:{menuId:ut.eH.MenubarEditMenu,group:"3_find",title:xe.NC({key:"miFind",comment:["&& denotes a mnemonic"]},"&&Find"),order:1}})).addImplementation(0,(function(e,t,i){var n=St.get(t);return!!n&&n.start({forceRevealReplace:!1,seedSearchStringFromSelection:"never"!==t.getOption(39).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(39).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:t.getOption(39).globalFindClipboard,shouldFocus:1,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(39).loop})}));var kt={description:"Open a new In-Editor Find Widget.",args:[{name:"Open a new In-Editor Find Widget args",schema:{properties:{searchString:{type:"string"},replaceString:{type:"string"},regex:{type:"boolean"},regexOverride:{type:"number",description:xe.NC("actions.find.isRegexOverride",'Overrides "Use Regular Expression" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},wholeWord:{type:"boolean"},wholeWordOverride:{type:"number",description:xe.NC("actions.find.wholeWordOverride",'Overrides "Match Whole Word" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},matchCase:{type:"boolean"},matchCaseOverride:{type:"number",description:xe.NC("actions.find.matchCaseOverride",'Overrides "Math Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},preserveCase:{type:"boolean"},preserveCaseOverride:{type:"number",description:xe.NC("actions.find.preserveCaseOverride",'Overrides "Preserve Case" flag.\nThe flag will not be saved for the future.\n0: Do Nothing\n1: True\n2: False')},findInSelection:{type:"boolean"}}}}]},wt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,r.Z)(this,i),t.call(this,{id:j,label:xe.NC("startFindWithArgsAction","Find With Arguments"),alias:"Find With Arguments",precondition:void 0,kbOpts:{kbExpr:null,primary:0,weight:100},description:kt})}return(0,o.Z)(i,[{key:"run",value:function(e,t,i){return yt(this,void 0,void 0,(0,n.Z)().mark((function e(){var r,o;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=St.get(t))){e.next=6;break}return o=i?{searchString:i.searchString,replaceString:i.replaceString,isReplaceRevealed:void 0!==i.replaceString,isRegex:i.isRegex,wholeWord:i.matchWholeWord,matchCase:i.isCaseSensitive,preserveCase:i.preserveCase}:{},e.next=5,r.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===r.getState().searchString.length&&"never"!==t.getOption(39).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(39).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:1,shouldAnimate:!0,updateSearchScope:(null===i||void 0===i?void 0:i.findInSelection)||!1,loop:t.getOption(39).loop},o);case 5:r.setGlobalBufferTerm(r.getState().searchString);case 6:case"end":return e.stop()}}),e)})))}}]),i}(p.R6),xt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,r.Z)(this,i),t.call(this,{id:G,label:xe.NC("startFindWithSelectionAction","Find With Selection"),alias:"Find With Selection",precondition:void 0,kbOpts:{kbExpr:null,primary:0,mac:{primary:2083},weight:100}})}return(0,o.Z)(i,[{key:"run",value:function(e,t){return yt(this,void 0,void 0,(0,n.Z)().mark((function e(){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=St.get(t))){e.next=5;break}return e.next=4,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"multiple",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(39).loop});case 4:i.setGlobalBufferTerm(i.getState().searchString);case 5:case"end":return e.stop()}}),e)})))}}]),i}(p.R6),Nt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,r.Z)(this,i),t.apply(this,arguments)}return(0,o.Z)(i,[{key:"run",value:function(e,t){return yt(this,void 0,void 0,(0,n.Z)().mark((function e(){var i;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=St.get(t))||this._run(i)){e.next=5;break}return e.next=4,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:0===i.getState().searchString.length&&"never"!==t.getOption(39).seedSearchStringFromSelection?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(39).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:!0,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(39).loop});case 4:this._run(i);case 5:case"end":return e.stop()}}),e,this)})))}}]),i}(p.R6),Rt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,r.Z)(this,i),t.call(this,{id:z,label:xe.NC("findNextMatchAction","Find Next"),alias:"Find Next",precondition:void 0,kbOpts:[{kbExpr:_.u.focus,primary:61,mac:{primary:2085,secondary:[61]},weight:100},{kbExpr:T.Ao.and(_.u.focus,A),primary:3,weight:100}]})}return(0,o.Z)(i,[{key:"_run",value:function(e){return!!e.moveToNextMatch()&&(e.editor.pushUndoStop(),!0)}}]),i}(Nt),It=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,r.Z)(this,i),t.call(this,{id:Y,label:xe.NC("findPreviousMatchAction","Find Previous"),alias:"Find Previous",precondition:void 0,kbOpts:[{kbExpr:_.u.focus,primary:1085,mac:{primary:3109,secondary:[1085]},weight:100},{kbExpr:T.Ao.and(_.u.focus,A),primary:1027,weight:100}]})}return(0,o.Z)(i,[{key:"_run",value:function(e){return e.moveToPrevMatch()}}]),i}(Nt),Dt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){var e;return(0,r.Z)(this,i),(e=t.call(this,{id:J,label:xe.NC("findMatchAction.goToMatch","Go to Match..."),alias:"Go to Match...",precondition:L}))._highlightDecorations=[],e}return(0,o.Z)(i,[{key:"run",value:function(e,t,i){var n=this,r=St.get(t);if(r){var o=r.getState().matchesCount;if(o<1){e.get(gt.lT).notify({severity:gt.zb.Warning,message:xe.NC("findMatchAction.noResults","No matches. Try searching for something else.")})}else{var s=e.get(_t.eJ).createInputBox();s.placeholder=xe.NC("findMatchAction.inputPlaceHolder","Type a number to go to a specific match (between 1 and {0})",o);var a=function(e){var t=parseInt(e);if(!isNaN(t)){var i=r.getState().matchesCount;return t>0&&t<=i?t-1:t<0&&t>=-i?i+t:void 0}};s.onDidChangeValue((function(e){!function(e){var i=a(e);if("number"===typeof i){s.validationMessage=void 0,r.goToMatch(i);var o=r.getState().currentMatch;o&&n.addDecorations(t,o)}else s.validationMessage=xe.NC("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",r.getState().matchesCount),n.clearDecorations(t)}(e)})),s.onDidAccept((function(){var e=a(s.value);"number"===typeof e?(r.goToMatch(e),s.hide()):s.validationMessage=xe.NC("findMatchAction.inputValidationMessage","Please type a number between 1 and {0}",r.getState().matchesCount)})),s.onDidHide((function(){n.clearDecorations(t),s.dispose()})),s.show()}}}},{key:"clearDecorations",value:function(e){var t=this;e.changeDecorations((function(e){t._highlightDecorations=e.deltaDecorations(t._highlightDecorations,[])}))}},{key:"addDecorations",value:function(e,t){var i=this;e.changeDecorations((function(e){i._highlightDecorations=e.deltaDecorations(i._highlightDecorations,[{range:t,options:{description:"find-match-quick-access-range-highlight",className:"rangeHighlight",isWholeLine:!0}},{range:t,options:{description:"find-match-quick-access-range-highlight-overview",overviewRuler:{color:(0,R.EN)(g.m9),position:f.sh.Full}}}])}))}}]),i}(p.R6),Pt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,r.Z)(this,i),t.apply(this,arguments)}return(0,o.Z)(i,[{key:"run",value:function(e,t){return yt(this,void 0,void 0,(0,n.Z)().mark((function e(){var i,r;return(0,n.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=St.get(t)){e.next=3;break}return e.abrupt("return");case 3:if((r=bt(t,"single",!1))&&i.setSearchString(r),this._run(i)){e.next=9;break}return e.next=8,i.start({forceRevealReplace:!1,seedSearchStringFromSelection:"none",seedSearchStringFromNonEmptySelection:!1,seedSearchStringFromGlobalClipboard:!1,shouldFocus:0,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(39).loop});case 8:this._run(i);case 9:case"end":return e.stop()}}),e,this)})))}}]),i}(p.R6),Et=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,r.Z)(this,i),t.call(this,{id:Q,label:xe.NC("nextSelectionMatchFindAction","Find Next Selection"),alias:"Find Next Selection",precondition:void 0,kbOpts:{kbExpr:_.u.focus,primary:2109,weight:100}})}return(0,o.Z)(i,[{key:"_run",value:function(e){return e.moveToNextMatch()}}]),i}(Pt),Zt=function(e){(0,c.Z)(i,e);var t=(0,l.Z)(i);function i(){return(0,r.Z)(this,i),t.call(this,{id:X,label:xe.NC("previousSelectionMatchFindAction","Find Previous Selection"),alias:"Find Previous Selection",precondition:void 0,kbOpts:{kbExpr:_.u.focus,primary:3133,weight:100}})}return(0,o.Z)(i,[{key:"_run",value:function(e){return e.moveToPrevMatch()}}]),i}(Pt);(0,p.rn)(new p.jY({id:$,label:xe.NC("startReplace","Replace"),alias:"Replace",precondition:T.Ao.or(_.u.focus,T.Ao.has("editorIsOpen")),kbOpts:{kbExpr:null,primary:2086,mac:{primary:2596},weight:100},menuOpts:{menuId:ut.eH.MenubarEditMenu,group:"3_find",title:xe.NC({key:"miReplace",comment:["&& denotes a mnemonic"]},"&&Replace"),order:2}})).addImplementation(0,(function(e,t,i){if(!t.hasModel()||t.getOption(88))return!1;var n=St.get(t);if(!n)return!1;var r=t.getSelection(),o=n.isFindInputFocused(),s=!r.isEmpty()&&r.startLineNumber===r.endLineNumber&&"never"!==t.getOption(39).seedSearchStringFromSelection&&!o,a=o||s?2:1;return n.start({forceRevealReplace:!0,seedSearchStringFromSelection:s?"single":"none",seedSearchStringFromNonEmptySelection:"selection"===t.getOption(39).seedSearchStringFromSelection,seedSearchStringFromGlobalClipboard:"never"!==t.getOption(39).seedSearchStringFromSelection,shouldFocus:a,shouldAnimate:!0,updateSearchScope:!1,loop:t.getOption(39).loop})})),(0,p._K)(St.ID,Ct,0),(0,p.Qr)(wt),(0,p.Qr)(xt),(0,p.Qr)(Rt),(0,p.Qr)(It),(0,p.Qr)(Dt),(0,p.Qr)(Et),(0,p.Qr)(Zt);var Ot=p._l.bindToContribution(St.get);(0,p.fK)(new Ot({id:ee,precondition:L,handler:function(e){return e.closeFindWidget()},kbOpts:{weight:105,kbExpr:T.Ao.and(_.u.focus,T.Ao.not("isComposing")),primary:9,secondary:[1033]}})),(0,p.fK)(new Ot({id:te,precondition:void 0,handler:function(e){return e.toggleCaseSensitive()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:V.primary,mac:V.mac,win:V.win,linux:V.linux}})),(0,p.fK)(new Ot({id:ie,precondition:void 0,handler:function(e){return e.toggleWholeWords()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:B.primary,mac:B.mac,win:B.win,linux:B.linux}})),(0,p.fK)(new Ot({id:ne,precondition:void 0,handler:function(e){return e.toggleRegex()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:H.primary,mac:H.mac,win:H.win,linux:H.linux}})),(0,p.fK)(new Ot({id:re,precondition:void 0,handler:function(e){return e.toggleSearchScope()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:q.primary,mac:q.mac,win:q.win,linux:q.linux}})),(0,p.fK)(new Ot({id:oe,precondition:void 0,handler:function(e){return e.togglePreserveCase()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:U.primary,mac:U.mac,win:U.win,linux:U.linux}})),(0,p.fK)(new Ot({id:se,precondition:L,handler:function(e){return e.replace()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:3094}})),(0,p.fK)(new Ot({id:se,precondition:L,handler:function(e){return e.replace()},kbOpts:{weight:105,kbExpr:T.Ao.and(_.u.focus,W),primary:3}})),(0,p.fK)(new Ot({id:ae,precondition:L,handler:function(e){return e.replaceAll()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:2563}})),(0,p.fK)(new Ot({id:ae,precondition:L,handler:function(e){return e.replaceAll()},kbOpts:{weight:105,kbExpr:T.Ao.and(_.u.focus,W),primary:void 0,mac:{primary:2051}}})),(0,p.fK)(new Ot({id:ce,precondition:L,handler:function(e){return e.selectAllMatches()},kbOpts:{weight:105,kbExpr:_.u.focus,primary:515}}))}}]);
//# sourceMappingURL=monaco-editor-vendor.f873852b.1ede7cfb.js.map