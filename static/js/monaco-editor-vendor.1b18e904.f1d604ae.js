"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[929],{52308:function(e,t,n){n.r(t);var i=n(15671),r=n(43144),o=n(60136),a=n(27277),s=n(98351),u=n(22055),c=n(87697),l=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{id:"editor.action.fontZoomIn",label:c.NC("EditorFontZoomIn.label","Editor Font Zoom In"),alias:"Editor Font Zoom In",precondition:void 0})}return(0,r.Z)(n,[{key:"run",value:function(e,t){u.C.setZoomLevel(u.C.getZoomLevel()+1)}}]),n}(s.R6),d=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{id:"editor.action.fontZoomOut",label:c.NC("EditorFontZoomOut.label","Editor Font Zoom Out"),alias:"Editor Font Zoom Out",precondition:void 0})}return(0,r.Z)(n,[{key:"run",value:function(e,t){u.C.setZoomLevel(u.C.getZoomLevel()-1)}}]),n}(s.R6),h=function(e){(0,o.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{id:"editor.action.fontZoomReset",label:c.NC("EditorFontZoomReset.label","Editor Font Zoom Reset"),alias:"Editor Font Zoom Reset",precondition:void 0})}return(0,r.Z)(n,[{key:"run",value:function(e,t){u.C.setZoomLevel(0)}}]),n}(s.R6);(0,s.Qr)(l),(0,s.Qr)(d),(0,s.Qr)(h)},44817:function(e,t,n){n.d(t,{Qq:function(){return F},Qs:function(){return B},Zg:function(){return E},x$:function(){return T},xC:function(){return L}});var i=n(29439),r=n(93433),o=n(74165),a=n(15671),s=n(43144),u=n(37762),c=n(58340),l=n(71881),d=n(32124),h=n(68552),f=n(25138),g=n(49511),v=n(64272),p=n(50605),m=n(50004),_=n(21872),k=n(10849),y=n(30788),b=n(52091),w=n(70437),C=n(26777),x=n(77582),Z=n(87697),M=n(89850),S=n(73649),D=n(8850),P=n(45161),R=n(39701),N=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))};function E(e){if((e=e.filter((function(e){return e.range}))).length){for(var t=e[0].range,n=1;n<e.length;n++)t=y.e.plusRange(t,e[n].range);var i=t,r=i.startLineNumber,o=i.endLineNumber;r===o?1===e.length?(0,c.Z9)(Z.NC("hint11","Made 1 formatting edit on line {0}",r)):(0,c.Z9)(Z.NC("hintn1","Made {0} formatting edits on line {1}",e.length,r)):1===e.length?(0,c.Z9)(Z.NC("hint1n","Made 1 formatting edit between lines {0} and {1}",r,o)):(0,c.Z9)(Z.NC("hintnn","Made {0} formatting edits between lines {1} and {2}",e.length,r,o))}}function I(e,t,n){var i,r=[],o=new Set,a=e.ordered(n),s=(0,u.Z)(a);try{for(s.s();!(i=s.n()).done;){var c=i.value;r.push(c),c.extensionId&&o.add(S.k.toKey(c.extensionId))}}catch(g){s.e(g)}finally{s.f()}var l,d=t.ordered(n),h=(0,u.Z)(d);try{var f=function(){var e=l.value;if(e.extensionId){if(o.has(S.k.toKey(e.extensionId)))return"continue";o.add(S.k.toKey(e.extensionId))}r.push({displayName:e.displayName,extensionId:e.extensionId,provideDocumentFormattingEdits:function(t,n,i){return e.provideDocumentRangeFormattingEdits(t,t.getFullModelRange(),n,i)}})};for(h.s();!(l=h.n()).done;)f()}catch(g){h.e(g)}finally{h.f()}return r}var L=function(){function e(){(0,a.Z)(this,e)}return(0,s.Z)(e,null,[{key:"setFormatterSelector",value:function(t){return{dispose:e._selectors.unshift(t)}}},{key:"select",value:function(t,n,i){return N(this,void 0,void 0,(0,o.Z)().mark((function r(){var a;return(0,o.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(0!==t.length){r.next=2;break}return r.abrupt("return",void 0);case 2:if(!(a=f.$.first(e._selectors))){r.next=7;break}return r.next=6,a(t,n,i);case 6:return r.abrupt("return",r.sent);case 7:return r.abrupt("return",void 0);case 8:case"end":return r.stop()}}),r)})))}}]),e}();function T(e,t,n,i,r,a){return N(this,void 0,void 0,(0,o.Z)().mark((function s(){var u,c,l,d,h,f;return(0,o.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return u=e.get(D.TG),c=e.get(P.p),l=c.documentRangeFormattingEditProvider,d=(0,_.CL)(t)?t.getModel():t,h=l.ordered(d),o.next=6,L.select(h,d,i);case 6:if(!(f=o.sent)){o.next=11;break}return r.report(f),o.next=11,u.invokeFunction(O,f,t,n,a);case 11:case"end":return o.stop()}}),s)})))}function O(e,t,n,i,a){return N(this,void 0,void 0,(0,o.Z)().mark((function s(){var c,d,h,f,g,v,p,k,C,Z,M,S,D,P,I,L,T,O,F,A,W,K,B,G,H,U,V=this;return(0,o.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:c=e.get(w.p),d=e.get(R.VZ),(0,_.CL)(n)?(h=n.getModel(),f=new m.Dl(n,5,void 0,a)):(h=n,f=new m.YQ(n,a)),g=[],v=0,p=(0,u.Z)((0,l._2)(i).sort(y.e.compareRangesUsingStarts));try{for(p.s();!(k=p.n()).done;)C=k.value,v>0&&y.e.areIntersectingOrTouching(g[v-1],C)?g[v-1]=y.e.fromPositions(g[v-1].getStartPosition(),C.getEndPosition()):v=g.push(C)}catch(j){p.e(j)}finally{p.f()}Z=function(e){return N(V,void 0,void 0,(0,o.Z)().mark((function n(){var i,r,a;return(0,o.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return d.trace("[format][provideDocumentRangeFormattingEdits] (request)",null===(i=t.extensionId)||void 0===i?void 0:i.value,e),n.next=3,t.provideDocumentRangeFormattingEdits(h,e,h.getFormattingOptions(),f.token);case 3:if(n.t0=n.sent,n.t0){n.next=6;break}n.t0=[];case 6:return a=n.t0,d.trace("[format][provideDocumentRangeFormattingEdits] (response)",null===(r=t.extensionId)||void 0===r?void 0:r.value,a),n.abrupt("return",a);case 9:case"end":return n.stop()}}),n)})))},M=function(e,t){if(!e.length||!t.length)return!1;var n=e.reduce((function(e,t){return y.e.plusRange(e,t.range)}),e[0].range);if(!t.some((function(e){return y.e.intersectRanges(n,e.range)})))return!1;var i,r=(0,u.Z)(e);try{for(r.s();!(i=r.n()).done;){var o,a=i.value,s=(0,u.Z)(t);try{for(s.s();!(o=s.n()).done;){var c=o.value;if(y.e.intersectRanges(a.range,c.range))return!0}}catch(j){s.e(j)}finally{s.f()}}}catch(j){r.e(j)}finally{r.f()}return!1},S=[],D=[],s.prev=11,P=0,I=g;case 13:if(!(P<I.length)){s.next=25;break}if(L=I[P],!f.token.isCancellationRequested){s.next=17;break}return s.abrupt("return",!0);case 17:return s.t0=D,s.next=20,Z(L);case 20:s.t1=s.sent,s.t0.push.call(s.t0,s.t1);case 22:P++,s.next=13;break;case 25:T=0;case 26:if(!(T<g.length)){s.next=50;break}O=T+1;case 28:if(!(O<g.length)){s.next=47;break}if(!f.token.isCancellationRequested){s.next=31;break}return s.abrupt("return",!0);case 31:if(!M(D[T],D[O])){s.next=44;break}return F=y.e.plusRange(g[T],g[O]),s.next=35,Z(F);case 35:A=s.sent,g.splice(O,1),g.splice(T,1),g.push(F),D.splice(O,1),D.splice(T,1),D.push(A),T=0,O=0;case 44:++O,s.next=28;break;case 47:++T,s.next=26;break;case 50:W=0,K=D;case 51:if(!(W<K.length)){s.next=62;break}if(B=K[W],!f.token.isCancellationRequested){s.next=55;break}return s.abrupt("return",!0);case 55:return s.next=57,c.computeMoreMinimalEdits(h.uri,B);case 57:(G=s.sent)&&S.push.apply(S,(0,r.Z)(G));case 59:W++,s.next=51;break;case 62:return s.prev=62,f.dispose(),s.finish(62);case 65:if(0!==S.length){s.next=67;break}return s.abrupt("return",!1);case 67:return(0,_.CL)(n)?(x.V.execute(n,S,!0),E(S),n.revealPositionInCenterIfOutsideViewport(n.getPosition(),1)):(H=S[0].range,U=new b.Y(H.startLineNumber,H.startColumn,H.endLineNumber,H.endColumn),h.pushEditOperations([U],S.map((function(e){return{text:e.text,range:y.e.lift(e.range),forceMoveMarkers:!0}})),(function(e){var t,n=(0,u.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value.range;if(y.e.areIntersectingOrTouching(i,U))return[new b.Y(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)]}}catch(j){n.e(j)}finally{n.f()}return null}))),s.abrupt("return",!0);case 69:case"end":return s.stop()}}),s,null,[[11,,62,65]])})))}function F(e,t,n,i,r){return N(this,void 0,void 0,(0,o.Z)().mark((function a(){var s,u,c,l,d;return(0,o.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return s=e.get(D.TG),u=e.get(P.p),c=(0,_.CL)(t)?t.getModel():t,l=I(u.documentFormattingEditProvider,u.documentRangeFormattingEditProvider,c),o.next=6,L.select(l,c,n);case 6:if(!(d=o.sent)){o.next=11;break}return i.report(d),o.next=11,s.invokeFunction(A,d,t,n,r);case 11:case"end":return o.stop()}}),a)})))}function A(e,t,n,r,a){return N(this,void 0,void 0,(0,o.Z)().mark((function s(){var c,l,d,h,f,g,v,p,k;return(0,o.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return c=e.get(w.p),(0,_.CL)(n)?(l=n.getModel(),d=new m.Dl(n,5,void 0,a)):(l=n,d=new m.YQ(n,a)),o.prev=2,o.next=5,t.provideDocumentFormattingEdits(l,l.getFormattingOptions(),d.token);case 5:return f=o.sent,o.next=8,c.computeMoreMinimalEdits(l.uri,f);case 8:if(h=o.sent,!d.token.isCancellationRequested){o.next=11;break}return o.abrupt("return",!0);case 11:return o.prev=11,d.dispose(),o.finish(11);case 14:if(h&&0!==h.length){o.next=16;break}return o.abrupt("return",!1);case 16:return(0,_.CL)(n)?(x.V.execute(n,h,2!==r),2!==r&&(E(h),n.revealPositionInCenterIfOutsideViewport(n.getPosition(),1))):(g=h,v=(0,i.Z)(g,1),p=v[0].range,k=new b.Y(p.startLineNumber,p.startColumn,p.endLineNumber,p.endColumn),l.pushEditOperations([k],h.map((function(e){return{text:e.text,range:y.e.lift(e.range),forceMoveMarkers:!0}})),(function(e){var t,n=(0,u.Z)(e);try{for(n.s();!(t=n.n()).done;){var i=t.value.range;if(y.e.areIntersectingOrTouching(i,k))return[new b.Y(i.startLineNumber,i.startColumn,i.endLineNumber,i.endColumn)]}}catch(r){n.e(r)}finally{n.f()}return null}))),o.abrupt("return",!0);case 18:case"end":return o.stop()}}),s,null,[[2,,11,14]])})))}function W(e,t,n,i,r,a){return N(this,void 0,void 0,(0,o.Z)().mark((function s(){var c,d,f,g,v;return(0,o.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:c=t.documentRangeFormattingEditProvider.ordered(n),d=(0,u.Z)(c),o.prev=2,d.s();case 4:if((f=d.n()).done){o.next=15;break}return g=f.value,o.next=8,Promise.resolve(g.provideDocumentRangeFormattingEdits(n,i,r,a)).catch(h.Cp);case 8:if(v=o.sent,!(0,l.Of)(v)){o.next=13;break}return o.next=12,e.computeMoreMinimalEdits(n.uri,v);case 12:return o.abrupt("return",o.sent);case 13:o.next=4;break;case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(2),d.e(o.t0);case 20:return o.prev=20,d.f(),o.finish(20);case 23:return o.abrupt("return",void 0);case 24:case"end":return o.stop()}}),s,null,[[2,17,20,23]])})))}function K(e,t,n,i,r){return N(this,void 0,void 0,(0,o.Z)().mark((function a(){var s,c,d,f,g;return(0,o.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:s=I(t.documentFormattingEditProvider,t.documentRangeFormattingEditProvider,n),c=(0,u.Z)(s),o.prev=2,c.s();case 4:if((d=c.n()).done){o.next=15;break}return f=d.value,o.next=8,Promise.resolve(f.provideDocumentFormattingEdits(n,i,r)).catch(h.Cp);case 8:if(g=o.sent,!(0,l.Of)(g)){o.next=13;break}return o.next=12,e.computeMoreMinimalEdits(n.uri,g);case 12:return o.abrupt("return",o.sent);case 13:o.next=4;break;case 15:o.next=20;break;case 17:o.prev=17,o.t0=o.catch(2),c.e(o.t0);case 20:return o.prev=20,c.f(),o.finish(20);case 23:return o.abrupt("return",void 0);case 24:case"end":return o.stop()}}),a,null,[[2,17,20,23]])})))}function B(e,t,n,i,r,o,a){var s=t.onTypeFormattingEditProvider.ordered(n);return 0===s.length||s[0].autoFormatTriggerCharacters.indexOf(r)<0?Promise.resolve(void 0):Promise.resolve(s[0].provideOnTypeFormattingEdits(n,i,r,o,a)).catch(h.Cp).then((function(t){return e.computeMoreMinimalEdits(n.uri,t)}))}L._selectors=new g.S,M.P.registerCommand("_executeFormatRangeProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return N(this,void 0,void 0,(0,o.Z)().mark((function t(){var i,r,a,s,u,c,l;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n[0],r=n[1],a=n[2],(0,v.p_)(p.o.isUri(i)),(0,v.p_)(y.e.isIRange(r)),s=e.get(C.S),u=e.get(w.p),c=e.get(P.p),t.next=8,s.createModelReference(i);case 8:return l=t.sent,t.prev=9,t.abrupt("return",W(u,c,l.object.textEditorModel,y.e.lift(r),a,d.T.None));case 11:return t.prev=11,l.dispose(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[9,,11,14]])})))})),M.P.registerCommand("_executeFormatDocumentProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return N(this,void 0,void 0,(0,o.Z)().mark((function t(){var i,r,a,s,u,c;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n[0],r=n[1],(0,v.p_)(p.o.isUri(i)),a=e.get(C.S),s=e.get(w.p),u=e.get(P.p),t.next=7,a.createModelReference(i);case 7:return c=t.sent,t.prev=8,t.abrupt("return",K(s,u,c.object.textEditorModel,r,d.T.None));case 10:return t.prev=10,c.dispose(),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[8,,10,13]])})))})),M.P.registerCommand("_executeFormatOnTypeProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return N(this,void 0,void 0,(0,o.Z)().mark((function t(){var i,r,a,s,u,c,l,h;return(0,o.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=n[0],r=n[1],a=n[2],s=n[3],(0,v.p_)(p.o.isUri(i)),(0,v.p_)(k.L.isIPosition(r)),(0,v.p_)("string"===typeof a),u=e.get(C.S),c=e.get(w.p),l=e.get(P.p),t.next=9,u.createModelReference(i);case 9:return h=t.sent,t.prev=10,t.abrupt("return",B(c,l,h.object.textEditorModel,k.L.lift(r),a,s,d.T.None));case 12:return t.prev=12,h.dispose(),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[10,,12,15]])})))}))},70479:function(e,t,n){n.r(t);var i=n(74165),r=n(60136),o=n(27277),a=n(37762),s=n(29439),u=n(15671),c=n(43144),l=n(71881),d=n(32124),h=n(68552),f=n(27924),g=n(10526),v=n(98351),p=n(56692),m=n(70779),_=n(30788),k=n(44474),y=n(70437),b=n(45161),w=n(44817),C=n(77582),x=n(87697),Z=n(89850),M=n(49525),S=n(8850),D=n(26562),P=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},R=function(e,t){return function(n,i){t(n,i,e)}},N=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},E=function(){function e(t,n,i){var r=this;(0,u.Z)(this,e),this._editor=t,this._languageFeaturesService=n,this._workerService=i,this._disposables=new g.SL,this._sessionDisposables=new g.SL,this._disposables.add(n.onTypeFormattingEditProvider.onDidChange(this._update,this)),this._disposables.add(t.onDidChangeModel((function(){return r._update()}))),this._disposables.add(t.onDidChangeModelLanguage((function(){return r._update()}))),this._disposables.add(t.onDidChangeConfiguration((function(e){e.hasChanged(53)&&r._update()}))),this._update()}return(0,c.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._sessionDisposables.dispose()}},{key:"_update",value:function(){var e=this;if(this._sessionDisposables.clear(),this._editor.getOption(53)&&this._editor.hasModel()){var t=this._editor.getModel(),n=this._languageFeaturesService.onTypeFormattingEditProvider.ordered(t),i=(0,s.Z)(n,1)[0];if(i&&i.autoFormatTriggerCharacters){var r,o=new m.q,u=(0,a.Z)(i.autoFormatTriggerCharacters);try{for(u.s();!(r=u.n()).done;){var c=r.value;o.add(c.charCodeAt(0))}}catch(l){u.e(l)}finally{u.f()}this._sessionDisposables.add(this._editor.onDidType((function(t){var n=t.charCodeAt(t.length-1);o.has(n)&&e._trigger(String.fromCharCode(n))})))}}}},{key:"_trigger",value:function(e){var t=this;if(this._editor.hasModel()&&!(this._editor.getSelections().length>1)&&this._editor.getSelection().isEmpty()){var n=this._editor.getModel(),i=this._editor.getPosition(),r=new d.A,o=this._editor.onDidChangeModelContent((function(e){if(e.isFlush)return r.cancel(),void o.dispose();for(var t=0,n=e.changes.length;t<n;t++){if(e.changes[t].range.endLineNumber<=i.lineNumber)return r.cancel(),void o.dispose()}}));(0,w.Qs)(this._workerService,this._languageFeaturesService,n,i,e,n.getFormattingOptions(),r.token).then((function(e){r.token.isCancellationRequested||(0,l.Of)(e)&&(C.V.execute(t._editor,e,!0),(0,w.Zg)(e))})).finally((function(){o.dispose()}))}}}]),e}();E.ID="editor.contrib.autoFormat",E=P([R(1,b.p),R(2,y.p)],E);var I=function(){function e(t,n,i){var r=this;(0,u.Z)(this,e),this.editor=t,this._languageFeaturesService=n,this._instantiationService=i,this._callOnDispose=new g.SL,this._callOnModel=new g.SL,this._callOnDispose.add(t.onDidChangeConfiguration((function(){return r._update()}))),this._callOnDispose.add(t.onDidChangeModel((function(){return r._update()}))),this._callOnDispose.add(t.onDidChangeModelLanguage((function(){return r._update()}))),this._callOnDispose.add(n.documentRangeFormattingEditProvider.onDidChange(this._update,this))}return(0,c.Z)(e,[{key:"dispose",value:function(){this._callOnDispose.dispose(),this._callOnModel.dispose()}},{key:"_update",value:function(){var e=this;this._callOnModel.clear(),this.editor.getOption(52)&&this.editor.hasModel()&&this._languageFeaturesService.documentRangeFormattingEditProvider.has(this.editor.getModel())&&this._callOnModel.add(this.editor.onDidPaste((function(t){var n=t.range;return e._trigger(n)})))}},{key:"_trigger",value:function(e){this.editor.hasModel()&&(this.editor.getSelections().length>1||this._instantiationService.invokeFunction(w.x$,this.editor,e,2,D.Ex.None,d.T.None).catch(h.dL))}}]),e}();I.ID="editor.contrib.formatOnPaste",I=P([R(1,b.p),R(2,S.TG)],I);var L=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,u.Z)(this,n),t.call(this,{id:"editor.action.formatDocument",label:x.NC("formatDocument.label","Format Document"),alias:"Format Document",precondition:M.Ao.and(k.u.notInCompositeEditor,k.u.writable,k.u.hasDocumentFormattingProvider),kbOpts:{kbExpr:k.u.editorTextFocus,primary:1572,linux:{primary:3111},weight:100},contextMenuOpts:{group:"1_modification",order:1.3}})}return(0,c.Z)(n,[{key:"run",value:function(e,t){return N(this,void 0,void 0,(0,i.Z)().mark((function n(){var r,o;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.hasModel()){n.next=5;break}return r=e.get(S.TG),o=e.get(D.ek),n.next=5,o.showWhile(r.invokeFunction(w.Qq,t,1,D.Ex.None,d.T.None),250);case 5:case"end":return n.stop()}}),n)})))}}]),n}(v.R6),T=function(e){(0,r.Z)(n,e);var t=(0,o.Z)(n);function n(){return(0,u.Z)(this,n),t.call(this,{id:"editor.action.formatSelection",label:x.NC("formatSelection.label","Format Selection"),alias:"Format Selection",precondition:M.Ao.and(k.u.writable,k.u.hasDocumentSelectionFormattingProvider),kbOpts:{kbExpr:k.u.editorTextFocus,primary:(0,f.gx)(2089,2084),weight:100},contextMenuOpts:{when:k.u.hasNonEmptySelection,group:"1_modification",order:1.31}})}return(0,c.Z)(n,[{key:"run",value:function(e,t){return N(this,void 0,void 0,(0,i.Z)().mark((function n(){var r,o,a,s;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.hasModel()){n.next=2;break}return n.abrupt("return");case 2:return r=e.get(S.TG),o=t.getModel(),a=t.getSelections().map((function(e){return e.isEmpty()?new _.e(e.startLineNumber,1,e.startLineNumber,o.getLineMaxColumn(e.startLineNumber)):e})),s=e.get(D.ek),n.next=8,s.showWhile(r.invokeFunction(w.x$,t,a,1,D.Ex.None,d.T.None),250);case 8:case"end":return n.stop()}}),n)})))}}]),n}(v.R6);(0,v._K)(E.ID,E,2),(0,v._K)(I.ID,I,2),(0,v.Qr)(L),(0,v.Qr)(T),Z.P.registerCommand("editor.action.format",(function(e){return N(void 0,void 0,void 0,(0,i.Z)().mark((function t(){var n,r;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((n=e.get(p.$).getFocusedCodeEditor())&&n.hasModel()){t.next=3;break}return t.abrupt("return");case 3:if(r=e.get(Z.H),!n.getSelection().isEmpty()){t.next=9;break}return t.next=7,r.executeCommand("editor.action.formatDocument");case 7:t.next=11;break;case 9:return t.next=11,r.executeCommand("editor.action.formatSelection");case 11:case"end":return t.stop()}}),t)})))}))},77582:function(e,t,n){n.d(t,{V:function(){return c}});var i=n(37762),r=n(15671),o=n(43144),a=n(15261),s=n(30788),u=n(15520),c=function(){function e(){(0,r.Z)(this,e)}return(0,o.Z)(e,null,[{key:"_handleEolEdits",value:function(e,t){var n,r=void 0,o=[],a=(0,i.Z)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;"number"===typeof s.eol&&(r=s.eol),s.range&&"string"===typeof s.text&&o.push(s)}}catch(u){a.e(u)}finally{a.f()}return"number"===typeof r&&e.hasModel()&&e.getModel().pushEOL(r),o}},{key:"_isFullModelReplaceEdit",value:function(e,t){if(!e.hasModel())return!1;var n=e.getModel(),i=n.validateRange(t.range);return n.getFullModelRange().equalsRange(i)}},{key:"execute",value:function(t,n,i){i&&t.pushUndoStop();var r=u.Z.capture(t),o=e._handleEolEdits(t,n);1===o.length&&e._isFullModelReplaceEdit(t,o[0])?t.executeEdits("formatEditsCommand",o.map((function(e){return a.h.replace(s.e.lift(e.range),e.text)}))):t.executeEdits("formatEditsCommand",o.map((function(e){return a.h.replaceMove(s.e.lift(e.range),e.text)}))),i&&t.pushUndoStop(),r.restoreRelativeVerticalPositionOfCursor(t)}}]),e}()},68344:function(e,t,n){n.r(t),n.d(t,{MarkerController:function(){return he},NextMarkerAction:function(){return ge}});var i=n(60136),r=n(27277),o=n(74165),a=n(15671),s=n(43144),u=n(7579),c=n(10526),l=n(98351),d=n(56692),h=n(10849),f=n(30788),g=n(44474),v=n(37762),p=n(71881),m=n(28941),_=n(49511),k=n(26684),y=n(50605),b=n(11280),w=n(8850),C=n(52721),x=n(64644),Z=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},M=function(e,t){return function(n,i){t(n,i,e)}},S=(0,s.Z)((function e(t,n,i){(0,a.Z)(this,e),this.marker=t,this.index=n,this.total=i})),D=function(){function e(t,n,i){var r=this;(0,a.Z)(this,e),this._markerService=n,this._configService=i,this._onDidChange=new m.Q5,this.onDidChange=this._onDidChange.event,this._dispoables=new c.SL,this._markers=[],this._nextIdx=-1,y.o.isUri(t)?this._resourceFilter=function(e){return e.toString()===t.toString()}:t&&(this._resourceFilter=t);var o=this._configService.getValue("problems.sortOrder"),s=function(e,t){var n=(0,k.qu)(e.resource.toString(),t.resource.toString());return 0===n&&(n="position"===o?f.e.compareRangesUsingStarts(e,t)||C.ZL.compare(e.severity,t.severity):C.ZL.compare(e.severity,t.severity)||f.e.compareRangesUsingStarts(e,t)),n},u=function(){r._markers=r._markerService.read({resource:y.o.isUri(t)?t:void 0,severities:C.ZL.Error|C.ZL.Warning|C.ZL.Info}),"function"===typeof t&&(r._markers=r._markers.filter((function(e){return r._resourceFilter(e.resource)}))),r._markers.sort(s)};u(),this._dispoables.add(n.onMarkerChanged((function(e){r._resourceFilter&&!e.some((function(e){return r._resourceFilter(e)}))||(u(),r._nextIdx=-1,r._onDidChange.fire())})))}return(0,s.Z)(e,[{key:"dispose",value:function(){this._dispoables.dispose(),this._onDidChange.dispose()}},{key:"matches",value:function(e){return!this._resourceFilter&&!e||!(!this._resourceFilter||!e)&&this._resourceFilter(e)}},{key:"selected",get:function(){var e=this._markers[this._nextIdx];return e&&new S(e,this._nextIdx+1,this._markers.length)}},{key:"_initIdx",value:function(e,t,n){var i=!1,r=this._markers.findIndex((function(t){return t.resource.toString()===e.uri.toString()}));r<0&&(r=(0,p.ry)(this._markers,{resource:e.uri},(function(e,t){return(0,k.qu)(e.resource.toString(),t.resource.toString())})))<0&&(r=~r);for(var o=r;o<this._markers.length;o++){var a=f.e.lift(this._markers[o]);if(a.isEmpty()){var s=e.getWordAtPosition(a.getStartPosition());s&&(a=new f.e(a.startLineNumber,s.startColumn,a.startLineNumber,s.endColumn))}if(t&&(a.containsPosition(t)||t.isBeforeOrEqual(a.getStartPosition()))){this._nextIdx=o,i=!0;break}if(this._markers[o].resource.toString()!==e.uri.toString())break}i||(this._nextIdx=n?0:this._markers.length-1),this._nextIdx<0&&(this._nextIdx=this._markers.length-1)}},{key:"resetIndex",value:function(){this._nextIdx=-1}},{key:"move",value:function(e,t,n){if(0===this._markers.length)return!1;var i=this._nextIdx;return-1===this._nextIdx?this._initIdx(t,n,e):e?this._nextIdx=(this._nextIdx+1)%this._markers.length:e||(this._nextIdx=(this._nextIdx-1+this._markers.length)%this._markers.length),i!==this._nextIdx}},{key:"find",value:function(e,t){var n=this._markers.findIndex((function(t){return t.resource.toString()===e.toString()}));if(!(n<0))for(;n<this._markers.length;n++)if(f.e.containsPosition(this._markers[n],t))return new S(this._markers[n],n+1,this._markers.length)}}]),e}();D=Z([M(1,C.lT),M(2,x.Ui)],D);var P=(0,w.yh)("IMarkerNavigationService"),R=function(){function e(t,n){(0,a.Z)(this,e),this._markerService=t,this._configService=n,this._provider=new _.S}return(0,s.Z)(e,[{key:"getMarkerList",value:function(e){var t,n=(0,v.Z)(this._provider);try{for(n.s();!(t=n.n()).done;){var i=t.value.getMarkerList(e);if(i)return i}}catch(r){n.e(r)}finally{n.f()}return new D(e,this._markerService,this._configService)}}]),e}();R=Z([M(0,C.lT),M(1,x.Ui)],R),(0,b.z)(P,R,1);var N=n(87697),E=n(23911),I=n(49525),L=n(18191),T=n(97326),O=n(11752),F=n(61120),A=n(53210),W=n(48301),K=n(17424),B=n(34408),G=n(99892),H=n(47143),U=n(27518),V=n(74990),j=n(29081),Q=n(6574),q=n(3553),X=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},J=function(e,t){return function(n,i){t(n,i,e)}},z=function(){function e(t,n,i,r,o){var s=this;(0,a.Z)(this,e),this._openerService=r,this._labelService=o,this._lines=0,this._longestLineLength=0,this._relatedDiagnostics=new WeakMap,this._disposables=new c.SL,this._editor=n;var u=document.createElement("div");u.className="descriptioncontainer",this._messageBlock=document.createElement("div"),this._messageBlock.classList.add("message"),this._messageBlock.setAttribute("aria-live","assertive"),this._messageBlock.setAttribute("role","alert"),u.appendChild(this._messageBlock),this._relatedBlock=document.createElement("div"),u.appendChild(this._relatedBlock),this._disposables.add(A.addStandardDisposableListener(this._relatedBlock,"click",(function(e){e.preventDefault();var t=s._relatedDiagnostics.get(e.target);t&&i(t)}))),this._scrollable=new W.NB(u,{horizontal:1,vertical:1,useShadows:!1,horizontalScrollbarSize:6,verticalScrollbarSize:6}),t.appendChild(this._scrollable.getDomNode()),this._disposables.add(this._scrollable.onScroll((function(e){u.style.left="-".concat(e.scrollLeft,"px"),u.style.top="-".concat(e.scrollTop,"px")}))),this._disposables.add(this._scrollable)}return(0,s.Z)(e,[{key:"dispose",value:function(){(0,c.B9)(this._disposables)}},{key:"update",value:function(e){var t=this,n=e.source,i=e.message,r=e.relatedInformation,o=e.code,a=((null===n||void 0===n?void 0:n.length)||0)+"()".length;o&&(a+="string"===typeof o?o.length:o.value.length);var s=(0,k.uq)(i);this._lines=s.length,this._longestLineLength=0;var u,c=(0,v.Z)(s);try{for(c.s();!(u=c.n()).done;){var l=u.value;this._longestLineLength=Math.max(l.length+a,this._longestLineLength)}}catch(N){c.e(N)}finally{c.f()}A.clearNode(this._messageBlock),this._messageBlock.setAttribute("aria-label",this.getAriaLabel(e)),this._editor.applyFontInfo(this._messageBlock);var d,h=this._messageBlock,f=(0,v.Z)(s);try{for(f.s();!(d=f.n()).done;){var g=d.value;(h=document.createElement("div")).innerText=g,""===g&&(h.style.height=this._messageBlock.style.lineHeight),this._messageBlock.appendChild(h)}}catch(N){f.e(N)}finally{f.f()}if(n||o){var m=document.createElement("span");if(m.classList.add("details"),h.appendChild(m),n){var _=document.createElement("span");_.innerText=n,_.classList.add("source"),m.appendChild(_)}if(o)if("string"===typeof o){var y=document.createElement("span");y.innerText="(".concat(o,")"),y.classList.add("code"),m.appendChild(y)}else{this._codeLink=A.$("a.code-link"),this._codeLink.setAttribute("href","".concat(o.target.toString())),this._codeLink.onclick=function(e){t._openerService.open(o.target,{allowCommands:!0}),e.preventDefault(),e.stopPropagation()},A.append(this._codeLink,A.$("span")).innerText=o.value,m.appendChild(this._codeLink)}}if(A.clearNode(this._relatedBlock),this._editor.applyFontInfo(this._relatedBlock),(0,p.Of)(r)){var b=this._relatedBlock.appendChild(document.createElement("div"));b.style.paddingTop="".concat(Math.floor(.66*this._editor.getOption(63)),"px"),this._lines+=1;var w,C=(0,v.Z)(r);try{for(C.s();!(w=C.n()).done;){var x=w.value,Z=document.createElement("div"),M=document.createElement("a");M.classList.add("filename"),M.innerText="".concat(this._labelService.getUriBasenameLabel(x.resource),"(").concat(x.startLineNumber,", ").concat(x.startColumn,"): "),M.title=this._labelService.getUriLabel(x.resource),this._relatedDiagnostics.set(M,x);var S=document.createElement("span");S.innerText=x.message,Z.appendChild(M),Z.appendChild(S),this._lines+=1,b.appendChild(Z)}}catch(N){C.e(N)}finally{C.f()}}var D=this._editor.getOption(47),P=Math.ceil(D.typicalFullwidthCharacterWidth*this._longestLineLength*.75),R=D.lineHeight*this._lines;this._scrollable.setScrollDimensions({scrollWidth:P,scrollHeight:R})}},{key:"layout",value:function(e,t){this._scrollable.getDomNode().style.height="".concat(e,"px"),this._scrollable.getDomNode().style.width="".concat(t,"px"),this._scrollable.setScrollDimensions({width:t,height:e})}},{key:"getHeightInLines",value:function(){return Math.min(17,this._lines)}},{key:"getAriaLabel",value:function(e){var t="";switch(e.severity){case C.ZL.Error:t=N.NC("Error","Error");break;case C.ZL.Warning:t=N.NC("Warning","Warning");break;case C.ZL.Info:t=N.NC("Info","Info");break;case C.ZL.Hint:t=N.NC("Hint","Hint")}var n=N.NC("marker aria","{0} at {1}. ",t,e.startLineNumber+":"+e.startColumn),i=this._editor.getModel();if(i&&e.startLineNumber<=i.getLineCount()&&e.startLineNumber>=1){var r=i.getLineContent(e.startLineNumber);n="".concat(r,", ").concat(n)}return n}}]),e}(),$=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i,r,o,s,u,l){var d;return(0,a.Z)(this,n),(d=t.call(this,e,{showArrow:!0,showFrame:!0,isAccessible:!0,frameWidth:1},s))._themeService=i,d._openerService=r,d._menuService=o,d._contextKeyService=u,d._labelService=l,d._callOnDispose=new c.SL,d._onDidSelectRelatedInformation=new m.Q5,d.onDidSelectRelatedInformation=d._onDidSelectRelatedInformation.event,d._severity=C.ZL.Warning,d._backgroundColor=K.Il.white,d._applyTheme(i.getColorTheme()),d._callOnDispose.add(i.onDidColorThemeChange(d._applyTheme.bind((0,T.Z)(d)))),d.create(),d}return(0,s.Z)(n,[{key:"_applyTheme",value:function(e){this._backgroundColor=e.getColor(ue);var t=ne,n=ie;this._severity===C.ZL.Warning?(t=re,n=oe):this._severity===C.ZL.Info&&(t=ae,n=se);var i=e.getColor(t),r=e.getColor(n);this.style({arrowColor:i,frameColor:i,headerBackgroundColor:r,primaryHeadingColor:e.getColor(G.IH),secondaryHeadingColor:e.getColor(G.R7)})}},{key:"_applyStyles",value:function(){this._parentContainer&&(this._parentContainer.style.backgroundColor=this._backgroundColor?this._backgroundColor.toString():""),(0,O.Z)((0,F.Z)(n.prototype),"_applyStyles",this).call(this)}},{key:"dispose",value:function(){this._callOnDispose.dispose(),(0,O.Z)((0,F.Z)(n.prototype),"dispose",this).call(this)}},{key:"_fillHead",value:function(e){var t=this;(0,O.Z)((0,F.Z)(n.prototype),"_fillHead",this).call(this,e),this._disposables.add(this._actionbarWidget.actionRunner.onWillRun((function(e){return t.editor.focus()})));var i=[],r=this._menuService.createMenu(n.TitleMenu,this._contextKeyService);(0,H.vr)(r,void 0,i),this._actionbarWidget.push(i,{label:!1,icon:!0,index:0}),r.dispose()}},{key:"_fillTitleIcon",value:function(e){this._icon=A.append(e,A.$(""))}},{key:"_fillBody",value:function(e){var t=this;this._parentContainer=e,e.classList.add("marker-widget"),this._parentContainer.tabIndex=0,this._parentContainer.setAttribute("role","tooltip"),this._container=document.createElement("div"),e.appendChild(this._container),this._message=new z(this._container,this.editor,(function(e){return t._onDidSelectRelatedInformation.fire(e)}),this._openerService,this._labelService),this._disposables.add(this._message)}},{key:"show",value:function(){throw new Error("call showAtMarker")}},{key:"showAtMarker",value:function(e,t,i){this._container.classList.remove("stale"),this._message.update(e),this._severity=e.severity,this._applyTheme(this._themeService.getColorTheme());var r=f.e.lift(e),o=this.editor.getPosition(),a=o&&r.containsPosition(o)?o:r.getStartPosition();(0,O.Z)((0,F.Z)(n.prototype),"show",this).call(this,a,this.computeRequiredHeight());var s=this.editor.getModel();if(s){var u=i>1?N.NC("problems","{0} of {1} problems",t,i):N.NC("change","{0} of {1} problem",t,i);this.setTitle((0,B.EZ)(s.uri),u)}this._icon.className="codicon ".concat(j.j.className(C.ZL.toSeverity(this._severity))),this.editor.revealPositionNearTop(a,0),this.editor.focus()}},{key:"updateMarker",value:function(e){this._container.classList.remove("stale"),this._message.update(e)}},{key:"showStale",value:function(){this._container.classList.add("stale"),this._relayout()}},{key:"_doLayoutBody",value:function(e,t){(0,O.Z)((0,F.Z)(n.prototype),"_doLayoutBody",this).call(this,e,t),this._heightInPixel=e,this._message.layout(e,t),this._container.style.height="".concat(e,"px")}},{key:"_onWidth",value:function(e){this._message.layout(this._heightInPixel,e)}},{key:"_relayout",value:function(){(0,O.Z)((0,F.Z)(n.prototype),"_relayout",this).call(this,this.computeRequiredHeight())}},{key:"computeRequiredHeight",value:function(){return 3+this._message.getHeightInLines()}}]),n}(G.vk);$.TitleMenu=new E.eH("gotoErrorTitleMenu"),$=X([J(1,q.XE),J(2,V.v4),J(3,E.co),J(4,w.TG),J(5,I.i6),J(6,U.e)],$);var Y=(0,Q.kwl)(Q.lXJ,Q.b6y),ee=(0,Q.kwl)(Q.uoC,Q.pW3),te=(0,Q.kwl)(Q.c63,Q.T83),ne=(0,Q.P6G)("editorMarkerNavigationError.background",{dark:Y,light:Y,hcDark:Q.lRK,hcLight:Q.lRK},N.NC("editorMarkerNavigationError","Editor marker navigation widget error color.")),ie=(0,Q.P6G)("editorMarkerNavigationError.headerBackground",{dark:(0,Q.ZnX)(ne,.1),light:(0,Q.ZnX)(ne,.1),hcDark:null,hcLight:null},N.NC("editorMarkerNavigationErrorHeaderBackground","Editor marker navigation widget error heading background.")),re=(0,Q.P6G)("editorMarkerNavigationWarning.background",{dark:ee,light:ee,hcDark:Q.lRK,hcLight:Q.lRK},N.NC("editorMarkerNavigationWarning","Editor marker navigation widget warning color.")),oe=(0,Q.P6G)("editorMarkerNavigationWarning.headerBackground",{dark:(0,Q.ZnX)(re,.1),light:(0,Q.ZnX)(re,.1),hcDark:"#0C141F",hcLight:(0,Q.ZnX)(re,.2)},N.NC("editorMarkerNavigationWarningBackground","Editor marker navigation widget warning heading background.")),ae=(0,Q.P6G)("editorMarkerNavigationInfo.background",{dark:te,light:te,hcDark:Q.lRK,hcLight:Q.lRK},N.NC("editorMarkerNavigationInfo","Editor marker navigation widget info color.")),se=(0,Q.P6G)("editorMarkerNavigationInfo.headerBackground",{dark:(0,Q.ZnX)(ae,.1),light:(0,Q.ZnX)(ae,.1),hcDark:null,hcLight:null},N.NC("editorMarkerNavigationInfoHeaderBackground","Editor marker navigation widget info heading background.")),ue=(0,Q.P6G)("editorMarkerNavigation.background",{dark:Q.cvW,light:Q.cvW,hcDark:Q.cvW,hcLight:Q.cvW},N.NC("editorMarkerNavigationBackground","Editor marker navigation widget background.")),ce=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},le=function(e,t){return function(n,i){t(n,i,e)}},de=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},he=function(){function e(t,n,i,r,o){(0,a.Z)(this,e),this._markerNavigationService=n,this._contextKeyService=i,this._editorService=r,this._instantiationService=o,this._sessionDispoables=new c.SL,this._editor=t,this._widgetVisible=_e.bindTo(this._contextKeyService)}return(0,s.Z)(e,[{key:"dispose",value:function(){this._cleanUp(),this._sessionDispoables.dispose()}},{key:"_cleanUp",value:function(){this._widgetVisible.reset(),this._sessionDispoables.clear(),this._widget=void 0,this._model=void 0}},{key:"_getOrCreateModel",value:function(e){var t=this;if(this._model&&this._model.matches(e))return this._model;var n=!1;return this._model&&(n=!0,this._cleanUp()),this._model=this._markerNavigationService.getMarkerList(e),n&&this._model.move(!0,this._editor.getModel(),this._editor.getPosition()),this._widget=this._instantiationService.createInstance($,this._editor),this._widget.onDidClose((function(){return t.close()}),this,this._sessionDispoables),this._widgetVisible.set(!0),this._sessionDispoables.add(this._model),this._sessionDispoables.add(this._widget),this._sessionDispoables.add(this._editor.onDidChangeCursorPosition((function(e){var n,i,r;(null===(n=t._model)||void 0===n?void 0:n.selected)&&f.e.containsPosition(null===(i=t._model)||void 0===i?void 0:i.selected.marker,e.position)||null===(r=t._model)||void 0===r||r.resetIndex()}))),this._sessionDispoables.add(this._model.onDidChange((function(){if(t._widget&&t._widget.position&&t._model){var e=t._model.find(t._editor.getModel().uri,t._widget.position);e?t._widget.updateMarker(e.marker):t._widget.showStale()}}))),this._sessionDispoables.add(this._widget.onDidSelectRelatedInformation((function(e){t._editorService.openCodeEditor({resource:e.resource,options:{pinned:!0,revealIfOpened:!0,selection:f.e.lift(e).collapseToStart()}},t._editor),t.close(!1)}))),this._sessionDispoables.add(this._editor.onDidChangeModel((function(){return t._cleanUp()}))),this._model}},{key:"close",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._cleanUp(),e&&this._editor.focus()}},{key:"showAtMarker",value:function(e){if(this._editor.hasModel()){var t=this._getOrCreateModel(this._editor.getModel().uri);t.resetIndex(),t.move(!0,this._editor.getModel(),new h.L(e.startLineNumber,e.startColumn)),t.selected&&this._widget.showAtMarker(t.selected.marker,t.selected.index,t.selected.total)}}},{key:"nagivate",value:function(t,n){var i,r;return de(this,void 0,void 0,(0,o.Z)().mark((function a(){var s,u;return(0,o.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(!this._editor.hasModel()){o.next=14;break}if((s=this._getOrCreateModel(n?void 0:this._editor.getModel().uri)).move(t,this._editor.getModel(),this._editor.getPosition()),s.selected){o.next=5;break}return o.abrupt("return");case 5:if(s.selected.marker.resource.toString()===this._editor.getModel().uri.toString()){o.next=13;break}return this._cleanUp(),o.next=9,this._editorService.openCodeEditor({resource:s.selected.marker.resource,options:{pinned:!1,revealIfOpened:!0,selectionRevealType:2,selection:s.selected.marker}},this._editor);case 9:(u=o.sent)&&(null===(i=e.get(u))||void 0===i||i.close(),null===(r=e.get(u))||void 0===r||r.nagivate(t,n)),o.next=14;break;case 13:this._widget.showAtMarker(s.selected.marker,s.selected.index,s.selected.total);case 14:case"end":return o.stop()}}),a,this)})))}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();he.ID="editor.contrib.markerController",he=ce([le(1,P),le(2,I.i6),le(3,d.$),le(4,w.TG)],he);var fe=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i,r){var o;return(0,a.Z)(this,n),(o=t.call(this,r))._next=e,o._multiFile=i,o}return(0,s.Z)(n,[{key:"run",value:function(e,t){var n;return de(this,void 0,void 0,(0,o.Z)().mark((function e(){return(0,o.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.hasModel()&&(null===(n=he.get(t))||void 0===n||n.nagivate(this._next,this._multiFile));case 1:case"end":return e.stop()}}),e,this)})))}}]),n}(l.R6),ge=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,!0,!1,{id:n.ID,label:n.LABEL,alias:"Go to Next Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:g.u.focus,primary:578,weight:100},menuOpts:{menuId:$.TitleMenu,title:n.LABEL,icon:(0,L.q5)("marker-navigation-next",u.l.arrowDown,N.NC("nextMarkerIcon","Icon for goto next marker.")),group:"navigation",order:1}})}return(0,s.Z)(n)}(fe);ge.ID="editor.action.marker.next",ge.LABEL=N.NC("markerAction.next.label","Go to Next Problem (Error, Warning, Info)");var ve=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,!1,!1,{id:n.ID,label:n.LABEL,alias:"Go to Previous Problem (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:g.u.focus,primary:1602,weight:100},menuOpts:{menuId:$.TitleMenu,title:n.LABEL,icon:(0,L.q5)("marker-navigation-previous",u.l.arrowUp,N.NC("previousMarkerIcon","Icon for goto previous marker.")),group:"navigation",order:2}})}return(0,s.Z)(n)}(fe);ve.ID="editor.action.marker.prev",ve.LABEL=N.NC("markerAction.previous.label","Go to Previous Problem (Error, Warning, Info)");var pe=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,!0,!0,{id:"editor.action.marker.nextInFiles",label:N.NC("markerAction.nextInFiles.label","Go to Next Problem in Files (Error, Warning, Info)"),alias:"Go to Next Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:g.u.focus,primary:66,weight:100},menuOpts:{menuId:E.eH.MenubarGoMenu,title:N.NC({key:"miGotoNextProblem",comment:["&& denotes a mnemonic"]},"Next &&Problem"),group:"6_problem_nav",order:1}})}return(0,s.Z)(n)}(fe),me=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,!1,!0,{id:"editor.action.marker.prevInFiles",label:N.NC("markerAction.previousInFiles.label","Go to Previous Problem in Files (Error, Warning, Info)"),alias:"Go to Previous Problem in Files (Error, Warning, Info)",precondition:void 0,kbOpts:{kbExpr:g.u.focus,primary:1090,weight:100},menuOpts:{menuId:E.eH.MenubarGoMenu,title:N.NC({key:"miGotoPreviousProblem",comment:["&& denotes a mnemonic"]},"Previous &&Problem"),group:"6_problem_nav",order:2}})}return(0,s.Z)(n)}(fe);(0,l._K)(he.ID,he,4),(0,l.Qr)(ge),(0,l.Qr)(ve),(0,l.Qr)(pe),(0,l.Qr)(me);var _e=new I.uy("markersNavigationVisible",!1),ke=l._l.bindToContribution(he.get);(0,l.fK)(new ke({id:"closeMarkersNavigation",precondition:_e,handler:function(e){return e.close()},kbOpts:{weight:150,kbExpr:g.u.focus,primary:9,secondary:[1033]}}))},55584:function(e,t,n){n.r(t),n.d(t,{DefinitionAction:function(){return de},SymbolNavigationAction:function(){return le},SymbolNavigationAnchor:function(){return ce}});var i=n(11752),r=n(61120),o=n(37762),a=n(74165),s=n(97326),u=n(60136),c=n(27277),l=n(15671),d=n(43144),h=n(12426),f=n(58340),g=n(32590),v=n(27924),p=n(4827),m=n(64272),_=n(50605),k=n(50004),y=n(21872),b=n(98351),w=n(56692),C=n(77087),x=n(10849),Z=n(30788),M=n(44474),S=n(56417),D=n(57317),P=n(62302),R=n(28941),N=n(10526),E=n(34408),I=n(87697),L=n(49525),T=n(11280),O=n(8850),F=n(45753),A=n(90031),W=n(13023),K=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},B=function(e,t){return function(n,i){t(n,i,e)}},G=new L.uy("hasSymbols",!1,(0,I.NC)("hasSymbols","Whether there are symbol locations that can be navigated via keyboard-only.")),H=(0,O.yh)("ISymbolNavigationService"),U=function(){function e(t,n,i,r){(0,l.Z)(this,e),this._editorService=n,this._notificationService=i,this._keybindingService=r,this._currentModel=void 0,this._currentIdx=-1,this._ignoreEditorChange=!1,this._ctxHasSymbols=G.bindTo(t)}return(0,d.Z)(e,[{key:"reset",value:function(){var e,t;this._ctxHasSymbols.reset(),null===(e=this._currentState)||void 0===e||e.dispose(),null===(t=this._currentMessage)||void 0===t||t.dispose(),this._currentModel=void 0,this._currentIdx=-1}},{key:"put",value:function(e){var t=this,n=e.parent.parent;if(n.references.length<=1)this.reset();else{this._currentModel=n,this._currentIdx=n.references.indexOf(e),this._ctxHasSymbols.set(!0),this._showMessage();var i=new V(this._editorService),r=i.onDidChange((function(e){if(!t._ignoreEditorChange){var i=t._editorService.getActiveCodeEditor();if(i){var r=i.getModel(),a=i.getPosition();if(r&&a){var s,u=!1,c=!1,l=(0,o.Z)(n.references);try{for(l.s();!(s=l.n()).done;){var d=s.value;if((0,E.Xy)(d.uri,r.uri))u=!0,c=c||Z.e.containsPosition(d.range,a);else if(u)break}}catch(h){l.e(h)}finally{l.f()}u&&c||t.reset()}}}}));this._currentState=(0,N.F8)(i,r)}}},{key:"revealNext",value:function(e){var t=this;if(!this._currentModel)return Promise.resolve();this._currentIdx+=1,this._currentIdx%=this._currentModel.references.length;var n=this._currentModel.references[this._currentIdx];return this._showMessage(),this._ignoreEditorChange=!0,this._editorService.openCodeEditor({resource:n.uri,options:{selection:Z.e.collapseToStart(n.range),selectionRevealType:3}},e).finally((function(){t._ignoreEditorChange=!1}))}},{key:"_showMessage",value:function(){var e;null===(e=this._currentMessage)||void 0===e||e.dispose();var t=this._keybindingService.lookupKeybinding("editor.gotoNextSymbolFromResult"),n=t?(0,I.NC)("location.kb","Symbol {0} of {1}, {2} for next",this._currentIdx+1,this._currentModel.references.length,t.getLabel()):(0,I.NC)("location","Symbol {0} of {1}",this._currentIdx+1,this._currentModel.references.length);this._currentMessage=this._notificationService.status(n)}}]),e}();U=K([B(0,L.i6),B(1,w.$),B(2,W.lT),B(3,F.d)],U),(0,T.z)(H,U,1),(0,b.fK)(new(function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.call(this,{id:"editor.gotoNextSymbolFromResult",precondition:G,kbOpts:{weight:100,primary:70}})}return(0,d.Z)(n,[{key:"runEditorCommand",value:function(e,t){return e.get(H).revealNext(t)}}]),n}(b._l))),A.W.registerCommandAndKeybindingRule({id:"editor.gotoNextSymbolFromResult.cancel",weight:100,when:G,primary:9,handler:function(e){e.get(H).reset()}});var V=function(){function e(t){(0,l.Z)(this,e),this._listener=new Map,this._disposables=new N.SL,this._onDidChange=new R.Q5,this.onDidChange=this._onDidChange.event,this._disposables.add(t.onCodeEditorRemove(this._onDidRemoveEditor,this)),this._disposables.add(t.onCodeEditorAdd(this._onDidAddEditor,this)),t.listCodeEditors().forEach(this._onDidAddEditor,this)}return(0,d.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose(),this._onDidChange.dispose(),(0,N.B9)(this._listener.values())}},{key:"_onDidAddEditor",value:function(e){var t=this;this._listener.set(e,(0,N.F8)(e.onDidChangeCursorPosition((function(n){return t._onDidChange.fire({editor:e})})),e.onDidChangeModelContent((function(n){return t._onDidChange.fire({editor:e})}))))}},{key:"_onDidRemoveEditor",value:function(e){var t;null===(t=this._listener.get(e))||void 0===t||t.dispose(),this._listener.delete(e)}}]),e}();V=K([B(0,w.$)],V);var j,Q,q,X,J,z,$,Y,ee=n(94719),te=n(99892),ne=n(23911),ie=n(89850),re=n(26562),oe=n(66900),ae=n(45161),se=n(25138),ue=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))};ne.BH.appendMenuItem(ne.eH.EditorContext,{submenu:ne.eH.EditorContextPeek,title:I.NC("peek.submenu","Peek"),group:"navigation",order:100});var ce=function(){function e(t,n){(0,l.Z)(this,e),this.model=t,this.position=n}return(0,d.Z)(e,null,[{key:"is",value:function(t){return!(!t||"object"!==typeof t)&&(t instanceof e||!(!x.L.isIPosition(t.position)||!t.model))}}]),e}(),le=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(e,i){var r;return(0,l.Z)(this,n),(r=t.call(this,n._patchConfig(i))).configuration=e,n._allSymbolNavigationCommands.set(i.id,(0,s.Z)(r)),r}return(0,d.Z)(n,[{key:"runEditorCommand",value:function(e,t,i,r){var o=this;if(!t.hasModel())return Promise.resolve(void 0);var s=e.get(W.lT),u=e.get(w.$),c=e.get(re.ek),l=e.get(H),d=e.get(ae.p),h=e.get(O.TG),v=t.getModel(),p=t.getPosition(),m=ce.is(i)?i:new ce(v,p),_=new k.Dl(t,5),y=(0,g.eP)(this._getLocationModel(d,m.model,m.position,_.token),_.token).then((function(e){return ue(o,void 0,void 0,(0,a.Z)().mark((function o(){var s,c,d,g,m,k=this;return(0,a.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(e&&!_.token.isCancellationRequested){o.next=2;break}return o.abrupt("return");case 2:if((0,f.Z9)(e.ariaMessage),e.referenceAt(v.uri,p)&&(d=this._getAlternativeCommand(t),!n._activeAlternativeCommands.has(d)&&n._allSymbolNavigationCommands.has(d)&&(c=n._allSymbolNavigationCommands.get(d))),0!==(g=e.references.length)){o.next=9;break}this.configuration.muteMessage||(m=v.getWordAtPosition(p),null===(s=ee.O.get(t))||void 0===s||s.showMessage(this._getNoResultFoundMessage(m),p)),o.next=15;break;case 9:if(1!==g||!c){o.next=14;break}n._activeAlternativeCommands.add(this.desc.id),h.invokeFunction((function(e){return c.runEditorCommand(e,t,i,r).finally((function(){n._activeAlternativeCommands.delete(k.desc.id)}))})),o.next=15;break;case 14:return o.abrupt("return",this._onResult(u,l,t,e,r));case 15:case"end":return o.stop()}}),o,this)})))}),(function(e){s.error(e)})).finally((function(){_.dispose()}));return c.showWhile(y,250),y}},{key:"_onResult",value:function(e,t,n,i,r){return ue(this,void 0,void 0,(0,a.Z)().mark((function o(){var s,u,c,l;return(0,a.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=this._getGoToPreference(n),n instanceof C.H||!(this.configuration.openInPeek||"peek"===s&&i.references.length>1)){o.next=5;break}this._openInPeek(n,i,r),o.next=12;break;case 5:return u=i.firstReference(),c=i.references.length>1&&"gotoAndPeek"===s,o.next=9,this._openReference(n,e,u,this.configuration.openToSide,!c);case 9:l=o.sent,c&&l?this._openInPeek(l,i,r):i.dispose(),"goto"===s&&t.put(u);case 12:case"end":return o.stop()}}),o,this)})))}},{key:"_openReference",value:function(e,t,n,i,r){return ue(this,void 0,void 0,(0,a.Z)().mark((function o(){var s,u,c,l;return(0,a.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if(s=void 0,(0,S.vx)(n)&&(s=n.targetSelectionRange),s||(s=n.range),s){o.next=5;break}return o.abrupt("return",void 0);case 5:return o.next=7,t.openCodeEditor({resource:n.uri,options:{selection:Z.e.collapseToStart(s),selectionRevealType:3,selectionSource:"code.jump"}},e,i);case 7:if(u=o.sent){o.next=10;break}return o.abrupt("return",void 0);case 10:return r&&(c=u.getModel(),l=u.createDecorationsCollection([{range:s,options:{description:"symbol-navigate-action-highlight",className:"symbolHighlight"}}]),setTimeout((function(){u.getModel()===c&&l.clear()}),350)),o.abrupt("return",u);case 12:case"end":return o.stop()}}),o)})))}},{key:"_openInPeek",value:function(e,t,n){var i=D.J.get(e);i&&e.hasModel()?i.toggleWidget(null!==n&&void 0!==n?n:e.getSelection(),(0,g.PG)((function(e){return Promise.resolve(t)})),this.configuration.openInPeek):t.dispose()}}],[{key:"all",value:function(){return n._allSymbolNavigationCommands.values()}},{key:"_patchConfig",value:function(e){var t=Object.assign(Object.assign({},e),{f1:!0});if(t.menu){var n,i=(0,o.Z)(se.$.wrap(t.menu));try{for(i.s();!(n=i.n()).done;){var r=n.value;r.id!==ne.eH.EditorContext&&r.id!==ne.eH.EditorContextPeek||(r.when=L.Ao.and(e.precondition,r.when))}}catch(a){i.e(a)}finally{i.f()}}return t}}]),n}(b.x1);le._allSymbolNavigationCommands=new Map,le._activeAlternativeCommands=new Set;var de=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ue(this,void 0,void 0,(0,a.Z)().mark((function r(){return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=P.oQ,r.next=3,(0,oe.nD)(e.definitionProvider,t,n,i);case 3:return r.t1=r.sent,r.t2=I.NC("def.title","Definitions"),r.abrupt("return",new r.t0(r.t1,r.t2));case 6:case"end":return r.stop()}}),r)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?I.NC("noResultWord","No definition found for '{0}'",e.word):I.NC("generic.noResults","No definition found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(55).alternativeDefinitionCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(55).multipleDefinitions}}]),n}(le),he=p.$L&&!(0,h.isStandalone)()?2118:70;(0,ne.r1)(((j=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,l.Z)(this,n),e=t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.id,title:{value:I.NC("actions.goToDecl.label","Go to Definition"),original:"Go to Definition",mnemonicTitle:I.NC({key:"miGotoDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Definition")},precondition:L.Ao.and(M.u.hasDefinitionProvider,M.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:M.u.editorTextFocus,primary:he,weight:100},menu:[{id:ne.eH.EditorContext,group:"navigation",order:1.1},{id:ne.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:2}]}),ie.P.registerCommandAlias("editor.action.goToDeclaration",n.id),e}return(0,d.Z)(n)}(de)).id="editor.action.revealDefinition",j)),(0,ne.r1)(((Q=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,l.Z)(this,n),e=t.call(this,{openToSide:!0,openInPeek:!1,muteMessage:!1},{id:n.id,title:{value:I.NC("actions.goToDeclToSide.label","Open Definition to the Side"),original:"Open Definition to the Side"},precondition:L.Ao.and(M.u.hasDefinitionProvider,M.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:M.u.editorTextFocus,primary:(0,v.gx)(2089,he),weight:100}}),ie.P.registerCommandAlias("editor.action.openDeclarationToTheSide",n.id),e}return(0,d.Z)(n)}(de)).id="editor.action.revealDefinitionAside",Q)),(0,ne.r1)(((q=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){var e;return(0,l.Z)(this,n),e=t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.id,title:{value:I.NC("actions.previewDecl.label","Peek Definition"),original:"Peek Definition"},precondition:L.Ao.and(M.u.hasDefinitionProvider,te.Jy.notInPeekEditor,M.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:M.u.editorTextFocus,primary:582,linux:{primary:3140},weight:100},menu:{id:ne.eH.EditorContextPeek,group:"peek",order:2}}),ie.P.registerCommandAlias("editor.action.previewDeclaration",n.id),e}return(0,d.Z)(n)}(de)).id="editor.action.peekDefinition",q));var fe=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ue(this,void 0,void 0,(0,a.Z)().mark((function r(){return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=P.oQ,r.next=3,(0,oe.zq)(e.declarationProvider,t,n,i);case 3:return r.t1=r.sent,r.t2=I.NC("decl.title","Declarations"),r.abrupt("return",new r.t0(r.t1,r.t2));case 6:case"end":return r.stop()}}),r)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?I.NC("decl.noResultWord","No declaration found for '{0}'",e.word):I.NC("decl.generic.noResults","No declaration found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(55).alternativeDeclarationCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(55).multipleDeclarations}}]),n}(le);(0,ne.r1)(((X=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.id,title:{value:I.NC("actions.goToDeclaration.label","Go to Declaration"),original:"Go to Declaration",mnemonicTitle:I.NC({key:"miGotoDeclaration",comment:["&& denotes a mnemonic"]},"Go to &&Declaration")},precondition:L.Ao.and(M.u.hasDeclarationProvider,M.u.isInWalkThroughSnippet.toNegated()),menu:[{id:ne.eH.EditorContext,group:"navigation",order:1.3},{id:ne.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}return(0,d.Z)(n,[{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?I.NC("decl.noResultWord","No declaration found for '{0}'",e.word):I.NC("decl.generic.noResults","No declaration found")}}]),n}(fe)).id="editor.action.revealDeclaration",X)),(0,ne.r1)(function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.peekDeclaration",title:{value:I.NC("actions.peekDecl.label","Peek Declaration"),original:"Peek Declaration"},precondition:L.Ao.and(M.u.hasDeclarationProvider,te.Jy.notInPeekEditor,M.u.isInWalkThroughSnippet.toNegated()),menu:{id:ne.eH.EditorContextPeek,group:"peek",order:3}})}return(0,d.Z)(n)}(fe));var ge=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ue(this,void 0,void 0,(0,a.Z)().mark((function r(){return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=P.oQ,r.next=3,(0,oe.L3)(e.typeDefinitionProvider,t,n,i);case 3:return r.t1=r.sent,r.t2=I.NC("typedef.title","Type Definitions"),r.abrupt("return",new r.t0(r.t1,r.t2));case 6:case"end":return r.stop()}}),r)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?I.NC("goToTypeDefinition.noResultWord","No type definition found for '{0}'",e.word):I.NC("goToTypeDefinition.generic.noResults","No type definition found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(55).alternativeTypeDefinitionCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(55).multipleTypeDefinitions}}]),n}(le);(0,ne.r1)(((J=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.ID,title:{value:I.NC("actions.goToTypeDefinition.label","Go to Type Definition"),original:"Go to Type Definition",mnemonicTitle:I.NC({key:"miGotoTypeDefinition",comment:["&& denotes a mnemonic"]},"Go to &&Type Definition")},precondition:L.Ao.and(M.u.hasTypeDefinitionProvider,M.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:M.u.editorTextFocus,primary:0,weight:100},menu:[{id:ne.eH.EditorContext,group:"navigation",order:1.4},{id:ne.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:3}]})}return(0,d.Z)(n)}(ge)).ID="editor.action.goToTypeDefinition",J)),(0,ne.r1)(((z=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.ID,title:{value:I.NC("actions.peekTypeDefinition.label","Peek Type Definition"),original:"Peek Type Definition"},precondition:L.Ao.and(M.u.hasTypeDefinitionProvider,te.Jy.notInPeekEditor,M.u.isInWalkThroughSnippet.toNegated()),menu:{id:ne.eH.EditorContextPeek,group:"peek",order:4}})}return(0,d.Z)(n)}(ge)).ID="editor.action.peekTypeDefinition",z));var ve=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ue(this,void 0,void 0,(0,a.Z)().mark((function r(){return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=P.oQ,r.next=3,(0,oe.f4)(e.implementationProvider,t,n,i);case 3:return r.t1=r.sent,r.t2=I.NC("impl.title","Implementations"),r.abrupt("return",new r.t0(r.t1,r.t2));case 6:case"end":return r.stop()}}),r)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&e.word?I.NC("goToImplementation.noResultWord","No implementation found for '{0}'",e.word):I.NC("goToImplementation.generic.noResults","No implementation found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(55).alternativeImplementationCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(55).multipleImplementations}}]),n}(le);(0,ne.r1)((($=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:n.ID,title:{value:I.NC("actions.goToImplementation.label","Go to Implementations"),original:"Go to Implementations",mnemonicTitle:I.NC({key:"miGotoImplementation",comment:["&& denotes a mnemonic"]},"Go to &&Implementations")},precondition:L.Ao.and(M.u.hasImplementationProvider,M.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:M.u.editorTextFocus,primary:2118,weight:100},menu:[{id:ne.eH.EditorContext,group:"navigation",order:1.45},{id:ne.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:4}]})}return(0,d.Z)(n)}(ve)).ID="editor.action.goToImplementation",$)),(0,ne.r1)(((Y=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:n.ID,title:{value:I.NC("actions.peekImplementation.label","Peek Implementations"),original:"Peek Implementations"},precondition:L.Ao.and(M.u.hasImplementationProvider,te.Jy.notInPeekEditor,M.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:M.u.editorTextFocus,primary:3142,weight:100},menu:{id:ne.eH.EditorContextPeek,group:"peek",order:5}})}return(0,d.Z)(n)}(ve)).ID="editor.action.peekImplementation",Y));var pe=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"_getNoResultFoundMessage",value:function(e){return e?I.NC("references.no","No references found for '{0}'",e.word):I.NC("references.noGeneric","No references found")}},{key:"_getAlternativeCommand",value:function(e){return e.getOption(55).alternativeReferenceCommand}},{key:"_getGoToPreference",value:function(e){return e.getOption(55).multipleReferences}}]),n}(le);(0,ne.r1)(function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!1,muteMessage:!1},{id:"editor.action.goToReferences",title:{value:I.NC("goToReferences.label","Go to References"),original:"Go to References",mnemonicTitle:I.NC({key:"miGotoReference",comment:["&& denotes a mnemonic"]},"Go to &&References")},precondition:L.Ao.and(M.u.hasReferenceProvider,te.Jy.notInPeekEditor,M.u.isInWalkThroughSnippet.toNegated()),keybinding:{when:M.u.editorTextFocus,primary:1094,weight:100},menu:[{id:ne.eH.EditorContext,group:"navigation",order:1.45},{id:ne.eH.MenubarGoMenu,precondition:null,group:"4_symbol_nav",order:5}]})}return(0,d.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ue(this,void 0,void 0,(0,a.Z)().mark((function r(){return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=P.oQ,r.next=3,(0,oe.aA)(e.referenceProvider,t,n,!0,i);case 3:return r.t1=r.sent,r.t2=I.NC("ref.title","References"),r.abrupt("return",new r.t0(r.t1,r.t2));case 6:case"end":return r.stop()}}),r)})))}}]),n}(pe)),(0,ne.r1)(function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.call(this,{openToSide:!1,openInPeek:!0,muteMessage:!1},{id:"editor.action.referenceSearch.trigger",title:{value:I.NC("references.action.label","Peek References"),original:"Peek References"},precondition:L.Ao.and(M.u.hasReferenceProvider,te.Jy.notInPeekEditor,M.u.isInWalkThroughSnippet.toNegated()),menu:{id:ne.eH.EditorContextPeek,group:"peek",order:6}})}return(0,d.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ue(this,void 0,void 0,(0,a.Z)().mark((function r(){return(0,a.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=P.oQ,r.next=3,(0,oe.aA)(e.referenceProvider,t,n,!1,i);case 3:return r.t1=r.sent,r.t2=I.NC("ref.title","References"),r.abrupt("return",new r.t0(r.t1,r.t2));case 6:case"end":return r.stop()}}),r)})))}}]),n}(pe));var me=function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(e,i,r){var o;return(0,l.Z)(this,n),(o=t.call(this,e,{id:"editor.action.goToLocation",title:{value:I.NC("label.generic","Go to Any Symbol"),original:"Go to Any Symbol"},precondition:L.Ao.and(te.Jy.notInPeekEditor,M.u.isInWalkThroughSnippet.toNegated())}))._references=i,o._gotoMultipleBehaviour=r,o}return(0,d.Z)(n,[{key:"_getLocationModel",value:function(e,t,n,i){return ue(this,void 0,void 0,(0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new P.oQ(this._references,I.NC("generic.title","Locations")));case 1:case"end":return e.stop()}}),e,this)})))}},{key:"_getNoResultFoundMessage",value:function(e){return e&&I.NC("generic.noResult","No results for '{0}'",e.word)||""}},{key:"_getGoToPreference",value:function(e){var t;return null!==(t=this._gotoMultipleBehaviour)&&void 0!==t?t:e.getOption(55).multipleReferences}},{key:"_getAlternativeCommand",value:function(){return""}}]),n}(le);ie.P.registerCommand({id:"editor.action.goToLocations",description:{description:"Go to locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:_.o},{name:"position",description:"The position at which to start",constraint:x.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"},{name:"noResultsMessage",description:"Human readable message that shows when locations is empty."}]},handler:function(e,t,n,o,s,h,f){return ue(void 0,void 0,void 0,(0,a.Z)().mark((function g(){var v,p;return(0,a.Z)().wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return(0,m.p_)(_.o.isUri(t)),(0,m.p_)(x.L.isIPosition(n)),(0,m.p_)(Array.isArray(o)),(0,m.p_)("undefined"===typeof s||"string"===typeof s),(0,m.p_)("undefined"===typeof f||"boolean"===typeof f),v=e.get(w.$),a.next=8,v.openCodeEditor({resource:t},v.getFocusedCodeEditor());case 8:if(p=a.sent,!(0,y.CL)(p)){a.next=13;break}return p.setPosition(n),p.revealPositionInCenterIfOutsideViewport(n,0),a.abrupt("return",p.invokeWithinContext((function(e){var t=new(function(e){(0,u.Z)(n,e);var t=(0,c.Z)(n);function n(){return(0,l.Z)(this,n),t.apply(this,arguments)}return(0,d.Z)(n,[{key:"_getNoResultFoundMessage",value:function(e){return h||(0,i.Z)((0,r.Z)(n.prototype),"_getNoResultFoundMessage",this).call(this,e)}}]),n}(me))({muteMessage:!Boolean(h),openInPeek:Boolean(f),openToSide:!1},o,s);e.get(O.TG).invokeFunction(t.run.bind(t),p)})));case 13:case"end":return a.stop()}}),g)})))}}),ie.P.registerCommand({id:"editor.action.peekLocations",description:{description:"Peek locations from a position in a file",args:[{name:"uri",description:"The text document in which to start",constraint:_.o},{name:"position",description:"The position at which to start",constraint:x.L.isIPosition},{name:"locations",description:"An array of locations.",constraint:Array},{name:"multiple",description:"Define what to do when having multiple results, either `peek`, `gotoAndPeek`, or `goto"}]},handler:function(e,t,n,i,r){return ue(void 0,void 0,void 0,(0,a.Z)().mark((function o(){return(0,a.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:e.get(ie.H).executeCommand("editor.action.goToLocations",t,n,i,r,void 0,!0);case 1:case"end":return o.stop()}}),o)})))}}),ie.P.registerCommand({id:"editor.action.findReferences",handler:function(e,t,n){(0,m.p_)(_.o.isUri(t)),(0,m.p_)(x.L.isIPosition(n));var i=e.get(ae.p),r=e.get(w.$);return r.openCodeEditor({resource:t},r.getFocusedCodeEditor()).then((function(e){if((0,y.CL)(e)&&e.hasModel()){var t=D.J.get(e);if(t){var r=(0,g.PG)((function(t){return(0,oe.aA)(i.referenceProvider,e.getModel(),x.L.lift(n),!1,t).then((function(e){return new P.oQ(e,I.NC("ref.title","References"))}))})),o=new Z.e(n.lineNumber,n.column,n.lineNumber,n.column);return Promise.resolve(t.toggleWidget(o,r,!1))}}}))}}),ie.P.registerCommandAlias("editor.action.showReferences","editor.action.peekLocations")},66900:function(e,t,n){n.d(t,{L3:function(){return v},aA:function(){return p},f4:function(){return g},nD:function(){return h},zq:function(){return f}});var i=n(74165),r=n(71881),o=n(32124),a=n(68552),s=n(98351),u=n(45161),c=n(62302),l=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))};function d(e,t,n,o){return l(this,void 0,void 0,(0,i.Z)().mark((function s(){var u,c,l;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return u=n.ordered(e),c=u.map((function(n){return Promise.resolve(o(n,e,t)).then(void 0,(function(e){(0,a.Cp)(e)}))})),i.next=4,Promise.all(c);case 4:return l=i.sent,i.abrupt("return",(0,r.kX)(l.flat()));case 6:case"end":return i.stop()}}),s)})))}function h(e,t,n,i){return d(t,n,e,(function(e,t,n){return e.provideDefinition(t,n,i)}))}function f(e,t,n,i){return d(t,n,e,(function(e,t,n){return e.provideDeclaration(t,n,i)}))}function g(e,t,n,i){return d(t,n,e,(function(e,t,n){return e.provideImplementation(t,n,i)}))}function v(e,t,n,i){return d(t,n,e,(function(e,t,n){return e.provideTypeDefinition(t,n,i)}))}function p(e,t,n,r,o){var a=this;return d(t,n,e,(function(e,t,n){return l(a,void 0,void 0,(0,i.Z)().mark((function a(){var s,u;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,e.provideReferences(t,n,{includeDeclaration:!0},o);case 2:if(s=i.sent,r&&s&&2===s.length){i.next=5;break}return i.abrupt("return",s);case 5:return i.next=7,e.provideReferences(t,n,{includeDeclaration:!1},o);case 7:if(!(u=i.sent)||1!==u.length){i.next=10;break}return i.abrupt("return",u);case 10:return i.abrupt("return",s);case 11:case"end":return i.stop()}}),a)})))}))}function m(e){return l(this,void 0,void 0,(0,i.Z)().mark((function t(){var n,r,o;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e();case 2:return n=t.sent,r=new c.oQ(n,""),o=r.references.map((function(e){return e.link})),r.dispose(),t.abrupt("return",o);case 7:case"end":return t.stop()}}),t)})))}(0,s.sb)("_executeDefinitionProvider",(function(e,t,n){var i=h(e.get(u.p).definitionProvider,t,n,o.T.None);return m((function(){return i}))})),(0,s.sb)("_executeTypeDefinitionProvider",(function(e,t,n){var i=v(e.get(u.p).typeDefinitionProvider,t,n,o.T.None);return m((function(){return i}))})),(0,s.sb)("_executeDeclarationProvider",(function(e,t,n){var i=f(e.get(u.p).declarationProvider,t,n,o.T.None);return m((function(){return i}))})),(0,s.sb)("_executeReferenceProvider",(function(e,t,n){var i=p(e.get(u.p).referenceProvider,t,n,!1,o.T.None);return m((function(){return i}))})),(0,s.sb)("_executeImplementationProvider",(function(e,t,n){var i=g(e.get(u.p).implementationProvider,t,n,o.T.None);return m((function(){return i}))}))},61826:function(e,t,n){n.d(t,{yN:function(){return v}});var i=n(60136),r=n(27277),o=n(43144),a=n(15671),s=n(28941),u=n(10526),c=n(4827);function l(e,t){return!!e[t]}var d=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.target=t.target,this.isLeftClick=t.event.leftButton,this.isMiddleClick=t.event.middleButton,this.isRightClick=t.event.rightButton,this.hasTriggerModifier=l(t.event,n.triggerModifier),this.hasSideBySideModifier=l(t.event,n.triggerSideBySideModifier),this.isNoneOrSingleMouseDown=t.event.detail<=1})),h=(0,o.Z)((function e(t,n){(0,a.Z)(this,e),this.keyCodeIsTriggerKey=t.keyCode===n.triggerKey,this.keyCodeIsSideBySideKey=t.keyCode===n.triggerSideBySideKey,this.hasTriggerModifier=l(t,n.triggerModifier)})),f=function(){function e(t,n,i,r){(0,a.Z)(this,e),this.triggerKey=t,this.triggerModifier=n,this.triggerSideBySideKey=i,this.triggerSideBySideModifier=r}return(0,o.Z)(e,[{key:"equals",value:function(e){return this.triggerKey===e.triggerKey&&this.triggerModifier===e.triggerModifier&&this.triggerSideBySideKey===e.triggerSideBySideKey&&this.triggerSideBySideModifier===e.triggerSideBySideModifier}}]),e}();function g(e){return"altKey"===e?c.dz?new f(57,"metaKey",6,"altKey"):new f(5,"ctrlKey",6,"altKey"):c.dz?new f(6,"altKey",57,"metaKey"):new f(6,"altKey",5,"ctrlKey")}var v=function(e){(0,i.Z)(n,e);var t=(0,r.Z)(n);function n(e,i){var r;return(0,a.Z)(this,n),(r=t.call(this))._onMouseMoveOrRelevantKeyDown=r._register(new s.Q5),r.onMouseMoveOrRelevantKeyDown=r._onMouseMoveOrRelevantKeyDown.event,r._onExecute=r._register(new s.Q5),r.onExecute=r._onExecute.event,r._onCancel=r._register(new s.Q5),r.onCancel=r._onCancel.event,r._editor=e,r._alwaysFireExecuteOnMouseUp=i,r._opts=g(r._editor.getOption(74)),r._lastMouseMoveEvent=null,r._hasTriggerKeyOnMouseDown=!1,r._lineNumberOnMouseDown=0,r._register(r._editor.onDidChangeConfiguration((function(e){if(e.hasChanged(74)){var t=g(r._editor.getOption(74));if(r._opts.equals(t))return;r._opts=t,r._lastMouseMoveEvent=null,r._hasTriggerKeyOnMouseDown=!1,r._lineNumberOnMouseDown=0,r._onCancel.fire()}}))),r._register(r._editor.onMouseMove((function(e){return r._onEditorMouseMove(new d(e,r._opts))}))),r._register(r._editor.onMouseDown((function(e){return r._onEditorMouseDown(new d(e,r._opts))}))),r._register(r._editor.onMouseUp((function(e){return r._onEditorMouseUp(new d(e,r._opts))}))),r._register(r._editor.onKeyDown((function(e){return r._onEditorKeyDown(new h(e,r._opts))}))),r._register(r._editor.onKeyUp((function(e){return r._onEditorKeyUp(new h(e,r._opts))}))),r._register(r._editor.onMouseDrag((function(){return r._resetHandler()}))),r._register(r._editor.onDidChangeCursorSelection((function(e){return r._onDidChangeCursorSelection(e)}))),r._register(r._editor.onDidChangeModel((function(e){return r._resetHandler()}))),r._register(r._editor.onDidChangeModelContent((function(){return r._resetHandler()}))),r._register(r._editor.onDidScrollChange((function(e){(e.scrollTopChanged||e.scrollLeftChanged)&&r._resetHandler()}))),r}return(0,o.Z)(n,[{key:"_onDidChangeCursorSelection",value:function(e){e.selection&&e.selection.startColumn!==e.selection.endColumn&&this._resetHandler()}},{key:"_onEditorMouseMove",value:function(e){this._lastMouseMoveEvent=e,this._onMouseMoveOrRelevantKeyDown.fire([e,null])}},{key:"_onEditorMouseDown",value:function(e){this._hasTriggerKeyOnMouseDown=e.hasTriggerModifier,this._lineNumberOnMouseDown=e.target.position?e.target.position.lineNumber:0}},{key:"_onEditorMouseUp",value:function(e){var t=e.target.position?e.target.position.lineNumber:0;(this._hasTriggerKeyOnMouseDown&&this._lineNumberOnMouseDown&&this._lineNumberOnMouseDown===t||this._alwaysFireExecuteOnMouseUp)&&this._onExecute.fire(e)}},{key:"_onEditorKeyDown",value:function(e){this._lastMouseMoveEvent&&(e.keyCodeIsTriggerKey||e.keyCodeIsSideBySideKey&&e.hasTriggerModifier)?this._onMouseMoveOrRelevantKeyDown.fire([this._lastMouseMoveEvent,e]):e.hasTriggerModifier&&this._onCancel.fire()}},{key:"_onEditorKeyUp",value:function(e){e.keyCodeIsTriggerKey&&this._onCancel.fire()}},{key:"_resetHandler",value:function(){this._lastMouseMoveEvent=null,this._hasTriggerKeyOnMouseDown=!1,this._onCancel.fire()}}]),n}(u.JT)},24034:function(e,t,n){n.r(t),n.d(t,{GotoDefinitionAtPositionEditorContribution:function(){return P}});var i=n(37762),r=n(74165),o=n(29439),a=n(15671),s=n(43144),u=n(32590),c=n(68552),l=n(67277),d=n(10526),h=n(64272),f=n(50004),g=n(98351),v=n(30788),p=n(63024),m=n(26777),_=n(61826),k=n(99892),y=n(87697),b=n(49525),w=n(55584),C=n(66900),x=n(45161),Z=n(77161),M=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},S=function(e,t){return function(n,i){t(n,i,e)}},D=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},P=function(){function e(t,n,i,r){var s=this;(0,a.Z)(this,e),this.textModelResolverService=n,this.languageService=i,this.languageFeaturesService=r,this.toUnhook=new d.SL,this.toUnhookForKeyboard=new d.SL,this.currentWordAtPosition=null,this.previousPromise=null,this.editor=t,this.linkDecorations=this.editor.createDecorationsCollection();var u=new _.yN(t);this.toUnhook.add(u),this.toUnhook.add(u.onMouseMoveOrRelevantKeyDown((function(e){var t=(0,o.Z)(e,2),n=t[0],i=t[1];s.startFindDefinitionFromMouse(n,(0,h.f6)(i))}))),this.toUnhook.add(u.onExecute((function(e){s.isEnabled(e)&&s.gotoDefinition(e.target.position,e.hasSideBySideModifier).catch((function(e){(0,c.dL)(e)})).finally((function(){s.removeLinkDecorations()}))}))),this.toUnhook.add(u.onCancel((function(){s.removeLinkDecorations(),s.currentWordAtPosition=null})))}return(0,s.Z)(e,[{key:"startFindDefinitionFromCursor",value:function(e){return D(this,void 0,void 0,(0,r.Z)().mark((function t(){var n=this;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.startFindDefinition(e);case 2:this.toUnhookForKeyboard.add(this.editor.onDidChangeCursorPosition((function(){n.currentWordAtPosition=null,n.removeLinkDecorations(),n.toUnhookForKeyboard.clear()}))),this.toUnhookForKeyboard.add(this.editor.onKeyDown((function(e){e&&(n.currentWordAtPosition=null,n.removeLinkDecorations(),n.toUnhookForKeyboard.clear())})));case 4:case"end":return t.stop()}}),t,this)})))}},{key:"startFindDefinitionFromMouse",value:function(e,t){if(!(9===e.target.type&&this.linkDecorations.length>0)){if(!this.editor.hasModel()||!this.isEnabled(e,t))return this.currentWordAtPosition=null,void this.removeLinkDecorations();var n=e.target.position;this.startFindDefinition(n)}}},{key:"startFindDefinition",value:function(e){var t;return D(this,void 0,void 0,(0,r.Z)().mark((function n(){var o,a,s,d,h,g,p,m,_,k=this;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.toUnhookForKeyboard.clear(),o=e?null===(t=this.editor.getModel())||void 0===t?void 0:t.getWordAtPosition(e):null){n.next=6;break}return this.currentWordAtPosition=null,this.removeLinkDecorations(),n.abrupt("return");case 6:if(!this.currentWordAtPosition||this.currentWordAtPosition.startColumn!==o.startColumn||this.currentWordAtPosition.endColumn!==o.endColumn||this.currentWordAtPosition.word!==o.word){n.next=8;break}return n.abrupt("return");case 8:return this.currentWordAtPosition=o,a=new f.yy(this.editor,15),this.previousPromise&&(this.previousPromise.cancel(),this.previousPromise=null),this.previousPromise=(0,u.PG)((function(t){return k.findDefinition(e,t)})),n.prev=12,n.next=15,this.previousPromise;case 15:s=n.sent,n.next=22;break;case 18:return n.prev=18,n.t0=n.catch(12),(0,c.dL)(n.t0),n.abrupt("return");case 22:if(s&&s.length&&a.validate(this.editor)){n.next=25;break}return this.removeLinkDecorations(),n.abrupt("return");case 25:if(d=s[0].originSelectionRange?v.e.lift(s[0].originSelectionRange):new v.e(e.lineNumber,o.startColumn,e.lineNumber,o.endColumn),!(s.length>1)){n.next=33;break}h=d,g=(0,i.Z)(s);try{for(g.s();!(p=g.n()).done;)(m=p.value.originSelectionRange)&&(h=v.e.plusRange(h,m))}catch(r){g.e(r)}finally{g.f()}this.addDecoration(h,(new l.W5).appendText(y.NC("multipleResults","Click to show {0} definitions.",s.length))),n.next=37;break;case 33:if((_=s[0]).uri){n.next=36;break}return n.abrupt("return");case 36:this.textModelResolverService.createModelReference(_.uri).then((function(e){if(e.object&&e.object.textEditorModel){var t=e.object.textEditorModel,n=_.range.startLineNumber;if(n<1||n>t.getLineCount())e.dispose();else{var i=k.getPreviewValue(t,n,_),r=k.languageService.guessLanguageIdByFilepathOrFirstLine(t.uri);k.addDecoration(d,i?(new l.W5).appendCodeblock(r||"",i):void 0),e.dispose()}}else e.dispose()}));case 37:case"end":return n.stop()}}),n,this,[[12,18]])})))}},{key:"getPreviewValue",value:function(t,n,i){var r=i.range;return r.endLineNumber-r.startLineNumber>=e.MAX_SOURCE_PREVIEW_LINES&&(r=this.getPreviewRangeBasedOnIndentation(t,n)),this.stripIndentationFromPreviewRange(t,n,r)}},{key:"stripIndentationFromPreviewRange",value:function(e,t,n){for(var i=e.getLineFirstNonWhitespaceColumn(t),r=t+1;r<n.endLineNumber;r++){var o=e.getLineFirstNonWhitespaceColumn(r);i=Math.min(i,o)}return e.getValueInRange(n).replace(new RegExp("^\\s{".concat(i-1,"}"),"gm"),"").trim()}},{key:"getPreviewRangeBasedOnIndentation",value:function(t,n){for(var i=t.getLineFirstNonWhitespaceColumn(n),r=Math.min(t.getLineCount(),n+e.MAX_SOURCE_PREVIEW_LINES),o=n+1;o<r;o++){if(i===t.getLineFirstNonWhitespaceColumn(o))break}return new v.e(n,1,o+1,1)}},{key:"addDecoration",value:function(e,t){var n={range:e,options:{description:"goto-definition-link",inlineClassName:"goto-definition-link",hoverMessage:t}};this.linkDecorations.set([n])}},{key:"removeLinkDecorations",value:function(){this.linkDecorations.clear()}},{key:"isEnabled",value:function(e,t){var n;return this.editor.hasModel()&&e.isLeftClick&&e.isNoneOrSingleMouseDown&&6===e.target.type&&!((null===(n=e.target.detail.injectedText)||void 0===n?void 0:n.options)instanceof Z.HS)&&(e.hasTriggerModifier||!!t&&t.keyCodeIsTriggerKey)&&this.languageFeaturesService.definitionProvider.has(this.editor.getModel())}},{key:"findDefinition",value:function(e,t){var n=this.editor.getModel();return n?(0,C.nD)(this.languageFeaturesService.definitionProvider,n,e,t):Promise.resolve(null)}},{key:"gotoDefinition",value:function(e,t){var n=this;return this.editor.setPosition(e),this.editor.invokeWithinContext((function(e){var i=!t&&n.editor.getOption(83)&&!n.isInPeekEditor(e);return new w.DefinitionAction({openToSide:t,openInPeek:i,muteMessage:!0},{title:{value:"",original:""},id:"",precondition:void 0}).run(e)}))}},{key:"isInPeekEditor",value:function(e){var t=e.get(b.i6);return k.Jy.inPeekEditor.getValue(t)}},{key:"dispose",value:function(){this.toUnhook.dispose(),this.toUnhookForKeyboard.dispose()}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();P.ID="editor.contrib.gotodefinitionatposition",P.MAX_SOURCE_PREVIEW_LINES=8,P=M([S(1,m.S),S(2,p.O),S(3,x.p)],P),(0,g._K)(P.ID,P,2)},57317:function(e,t,n){n.d(t,{J:function(){return be}});var i=n(74165),r=n(15671),o=n(43144),a=n(32590),s=n(68552),u=n(27924),c=n(10526),l=n(56692),d=n(10849),h=n(30788),f=n(99892),g=n(87697),v=n(89850),p=n(64644),m=n(49525),_=n(8850),k=n(90031),y=n(48379),b=n(13023),w=n(63019),C=n(62302),x=n(97326),Z=n(11752),M=n(61120),S=n(60136),D=n(27277),P=n(93433),R=n(29439),N=n(37762),E=n(53210),I=n(96622),L=n(17424),T=n(28941),O=n(16496),F=n(34408),A=n(77087),W=n(77161),K=n(26765),B=n(73833),G=n(63024),H=n(26777),U=n(67944),V=n(94811),j=n(59501),Q=n(45842),q=n(45753),X=n(27518),J=n(35724),z=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},$=function(e,t){return function(n,i){t(n,i,e)}},Y=function(){function e(t){(0,r.Z)(this,e),this._resolverService=t}return(0,o.Z)(e,[{key:"hasChildren",value:function(e){return e instanceof C.oQ||e instanceof C.F2}},{key:"getChildren",value:function(e){if(e instanceof C.oQ)return e.groups;if(e instanceof C.F2)return e.resolve(this._resolverService).then((function(e){return e.children}));throw new Error("bad tree")}}]),e}();Y=z([$(0,H.S)],Y);var ee=function(){function e(){(0,r.Z)(this,e)}return(0,o.Z)(e,[{key:"getHeight",value:function(){return 23}},{key:"getTemplateId",value:function(e){return e instanceof C.F2?re.id:ae.id}}]),e}(),te=function(){function e(t){(0,r.Z)(this,e),this._keybindingService=t}return(0,o.Z)(e,[{key:"getKeyboardNavigationLabel",value:function(e){var t;if(e instanceof C.WX){var n=null===(t=e.parent.getPreview(e))||void 0===t?void 0:t.preview(e.range);if(n)return n.value}return(0,F.EZ)(e.uri)}}]),e}();te=z([$(0,q.d)],te);var ne=function(){function e(){(0,r.Z)(this,e)}return(0,o.Z)(e,[{key:"getId",value:function(e){return e instanceof C.WX?e.id:e.uri}}]),e}(),ie=function(e){(0,S.Z)(n,e);var t=(0,D.Z)(n);function n(e,i){var o;(0,r.Z)(this,n),(o=t.call(this))._labelService=i;var a=document.createElement("div");return a.classList.add("reference-file"),o.file=o._register(new j.g(a,{supportHighlights:!0})),o.badge=new U.Z(E.append(a,E.$(".count")),{},J.ku),e.appendChild(a),o}return(0,o.Z)(n,[{key:"set",value:function(e,t){var n=(0,F.XX)(e.uri);this.file.setLabel(this._labelService.getUriBasenameLabel(e.uri),this._labelService.getUriLabel(n,{relative:!0}),{title:this._labelService.getUriLabel(e.uri),matches:t});var i=e.children.length;this.badge.setCount(i),i>1?this.badge.setTitleFormat((0,g.NC)("referencesCount","{0} references",i)):this.badge.setTitleFormat((0,g.NC)("referenceCount","{0} reference",i))}}]),n}(c.JT);ie=z([$(1,X.e)],ie);var re=function(){function e(t){(0,r.Z)(this,e),this._instantiationService=t,this.templateId=e.id}return(0,o.Z)(e,[{key:"renderTemplate",value:function(e){return this._instantiationService.createInstance(ie,e)}},{key:"renderElement",value:function(e,t,n){n.set(e.element,(0,Q.mB)(e.filterData))}},{key:"disposeTemplate",value:function(e){e.dispose()}}]),e}();re.id="FileReferencesRenderer",re=z([$(0,_.TG)],re);var oe=function(){function e(t){(0,r.Z)(this,e),this.label=new V.q(t)}return(0,o.Z)(e,[{key:"set",value:function(e,t){var n,i=null===(n=e.parent.getPreview(e))||void 0===n?void 0:n.preview(e.range);if(i&&i.value){var r=i.value,o=i.highlight;t&&!Q.CL.isDefault(t)?(this.label.element.classList.toggle("referenceMatch",!1),this.label.set(r,(0,Q.mB)(t))):(this.label.element.classList.toggle("referenceMatch",!0),this.label.set(r,[o]))}else this.label.set("".concat((0,F.EZ)(e.uri),":").concat(e.range.startLineNumber+1,":").concat(e.range.startColumn+1))}}]),e}(),ae=function(){function e(){(0,r.Z)(this,e),this.templateId=e.id}return(0,o.Z)(e,[{key:"renderTemplate",value:function(e){return new oe(e)}},{key:"renderElement",value:function(e,t,n){n.set(e.element,e.filterData)}},{key:"disposeTemplate",value:function(){}}]),e}();ae.id="OneReferenceRenderer";var se=function(){function e(){(0,r.Z)(this,e)}return(0,o.Z)(e,[{key:"getWidgetAriaLabel",value:function(){return(0,g.NC)("treeAriaLabel","References")}},{key:"getAriaLabel",value:function(e){return e.ariaMessage}}]),e}(),ue=n(3553),ce=n(10217),le=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},de=function(e,t){return function(n,i){t(n,i,e)}},he=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},fe=function(){function e(t,n){var i=this;(0,r.Z)(this,e),this._editor=t,this._model=n,this._decorations=new Map,this._decorationIgnoreSet=new Set,this._callOnDispose=new c.SL,this._callOnModelChange=new c.SL,this._callOnDispose.add(this._editor.onDidChangeModel((function(){return i._onModelChanged()}))),this._onModelChanged()}return(0,o.Z)(e,[{key:"dispose",value:function(){this._callOnModelChange.dispose(),this._callOnDispose.dispose(),this.removeDecorations()}},{key:"_onModelChanged",value:function(){this._callOnModelChange.clear();var e=this._editor.getModel();if(e){var t,n=(0,N.Z)(this._model.references);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(i.uri.toString()===e.uri.toString())return void this._addDecorations(i.parent)}}catch(r){n.e(r)}finally{n.f()}}}},{key:"_addDecorations",value:function(t){var n=this;if(this._editor.hasModel()){this._callOnModelChange.add(this._editor.getModel().onDidChangeDecorations((function(){return n._onDecorationChanged()})));for(var i=[],r=[],o=0,a=t.children.length;o<a;o++){var s=t.children[o];this._decorationIgnoreSet.has(s.id)||s.uri.toString()===this._editor.getModel().uri.toString()&&(i.push({range:s.range,options:e.DecorationOptions}),r.push(o))}this._editor.changeDecorations((function(e){for(var o=e.deltaDecorations([],i),a=0;a<o.length;a++)n._decorations.set(o[a],t.children[r[a]])}))}}},{key:"_onDecorationChanged",value:function(){var e=[],t=this._editor.getModel();if(t){var n,i=(0,N.Z)(this._decorations);try{for(i.s();!(n=i.n()).done;){var r=(0,R.Z)(n.value,2),o=r[0],a=r[1],s=t.getDecorationRange(o);if(s){var u=!1;if(!h.e.equalsRange(s,a.range)){if(h.e.spansMultipleLines(s))u=!0;else a.range.endColumn-a.range.startColumn!==s.endColumn-s.startColumn&&(u=!0);u?(this._decorationIgnoreSet.add(a.id),e.push(o)):a.range=s}}}}catch(d){i.e(d)}finally{i.f()}for(var c=0,l=e.length;c<l;c++)this._decorations.delete(e[c]);this._editor.removeDecorations(e)}}},{key:"removeDecorations",value:function(){this._editor.removeDecorations((0,P.Z)(this._decorations.keys())),this._decorations.clear()}}]),e}();fe.DecorationOptions=W.qx.register({description:"reference-decoration",stickiness:1,className:"reference-decoration"});var ge=function(){function e(){(0,r.Z)(this,e),this.ratio=.7,this.heightInLines=18}return(0,o.Z)(e,null,[{key:"fromJSON",value:function(e){var t,n;try{var i=JSON.parse(e);t=i.ratio,n=i.heightInLines}catch(r){}return{ratio:t||.7,heightInLines:n||18}}}]),e}(),ve=function(e){(0,S.Z)(n,e);var t=(0,D.Z)(n);function n(){return(0,r.Z)(this,n),t.apply(this,arguments)}return(0,o.Z)(n)}(y.ls),pe=function(e){(0,S.Z)(n,e);var t=(0,D.Z)(n);function n(e,i,o,a,s,u,l,d,h,f,g,v){var p;return(0,r.Z)(this,n),(p=t.call(this,e,{showFrame:!1,showArrow:!0,isResizeable:!0,isAccessible:!0,supportOnTitleClick:!0},u))._defaultTreeKeyboardSupport=i,p.layoutData=o,p._textModelResolverService=s,p._instantiationService=u,p._peekViewService=l,p._uriLabel=d,p._undoRedoService=h,p._keybindingService=f,p._languageService=g,p._languageConfigurationService=v,p._disposeOnNewModel=new c.SL,p._callOnDispose=new c.SL,p._onDidSelectReference=new T.Q5,p.onDidSelectReference=p._onDidSelectReference.event,p._dim=new E.Dimension(0,0),p._applyTheme(a.getColorTheme()),p._callOnDispose.add(a.onDidColorThemeChange(p._applyTheme.bind((0,x.Z)(p)))),p._peekViewService.addExclusiveWidget(e,(0,x.Z)(p)),p.create(),p}return(0,o.Z)(n,[{key:"dispose",value:function(){this.setModel(void 0),this._callOnDispose.dispose(),this._disposeOnNewModel.dispose(),(0,c.B9)(this._preview),(0,c.B9)(this._previewNotAvailableMessage),(0,c.B9)(this._tree),(0,c.B9)(this._previewModelReference),this._splitView.dispose(),(0,Z.Z)((0,M.Z)(n.prototype),"dispose",this).call(this)}},{key:"_applyTheme",value:function(e){var t=e.getColor(f.SC)||L.Il.transparent;this.style({arrowColor:t,frameColor:t,headerBackgroundColor:e.getColor(f.KY)||L.Il.transparent,primaryHeadingColor:e.getColor(f.IH),secondaryHeadingColor:e.getColor(f.R7)})}},{key:"show",value:function(e){(0,Z.Z)((0,M.Z)(n.prototype),"show",this).call(this,e,this.layoutData.heightInLines||18)}},{key:"focusOnReferenceTree",value:function(){this._tree.domFocus()}},{key:"focusOnPreviewEditor",value:function(){this._preview.focus()}},{key:"isPreviewEditorFocused",value:function(){return this._preview.hasTextFocus()}},{key:"_onTitleClick",value:function(e){this._preview&&this._preview.getModel()&&this._onDidSelectReference.fire({element:this._getFocusedReference(),kind:e.ctrlKey||e.metaKey||e.altKey?"side":"open",source:"title"})}},{key:"_fillBody",value:function(e){var t=this;this.setCssClass("reference-zone-widget"),this._messageContainer=E.append(e,E.$("div.messages")),E.hide(this._messageContainer),this._splitView=new I.z(e,{orientation:1}),this._previewContainer=E.append(e,E.$("div.preview.inline"));this._preview=this._instantiationService.createInstance(A.H,this._previewContainer,{scrollBeyondLastLine:!1,scrollbar:{verticalScrollbarSize:14,horizontal:"auto",useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,alwaysConsumeMouseWheel:!1},overviewRulerLanes:2,fixedOverflowWidgets:!0,minimap:{enabled:!1}},this.editor),E.hide(this._previewContainer),this._previewNotAvailableMessage=new W.yO(g.NC("missingPreviewMessage","no preview available"),B.bd,W.yO.DEFAULT_CREATION_OPTIONS,null,this._undoRedoService,this._languageService,this._languageConfigurationService),this._treeContainer=E.append(e,E.$("div.ref-tree.inline"));var n={keyboardSupport:this._defaultTreeKeyboardSupport,accessibilityProvider:new se,keyboardNavigationLabelProvider:this._instantiationService.createInstance(te),identityProvider:new ne,openOnSingleClick:!0,selectionNavigation:!0,overrideStyles:{listBackground:f.M8}};this._defaultTreeKeyboardSupport&&this._callOnDispose.add(E.addStandardDisposableListener(this._treeContainer,"keydown",(function(e){e.equals(9)&&(t._keybindingService.dispatchEvent(e,e.target),e.stopPropagation())}),!0)),this._tree=this._instantiationService.createInstance(ve,"ReferencesWidget",this._treeContainer,new ee,[this._instantiationService.createInstance(re),this._instantiationService.createInstance(ae)],this._instantiationService.createInstance(Y),n),this._splitView.addView({onDidChange:T.ju.None,element:this._previewContainer,minimumSize:200,maximumSize:Number.MAX_VALUE,layout:function(e){t._preview.layout({height:t._dim.height,width:e})}},I.M.Distribute),this._splitView.addView({onDidChange:T.ju.None,element:this._treeContainer,minimumSize:100,maximumSize:Number.MAX_VALUE,layout:function(e){t._treeContainer.style.height="".concat(t._dim.height,"px"),t._treeContainer.style.width="".concat(e,"px"),t._tree.layout(t._dim.height,e)}},I.M.Distribute),this._disposables.add(this._splitView.onDidSashChange((function(){t._dim.width&&(t.layoutData.ratio=t._splitView.getViewSize(0)/t._dim.width)}),void 0));var i=function(e,n){e instanceof C.WX&&("show"===n&&t._revealReference(e,!1),t._onDidSelectReference.fire({element:e,kind:n,source:"tree"}))};this._tree.onDidOpen((function(e){e.sideBySide?i(e.element,"side"):e.editorOptions.pinned?i(e.element,"goto"):i(e.element,"show")})),E.hide(this._treeContainer)}},{key:"_onWidth",value:function(e){this._dim&&this._doLayoutBody(this._dim.height,e)}},{key:"_doLayoutBody",value:function(e,t){(0,Z.Z)((0,M.Z)(n.prototype),"_doLayoutBody",this).call(this,e,t),this._dim=new E.Dimension(t,e),this.layoutData.heightInLines=this._viewZone?this._viewZone.heightInLines:this.layoutData.heightInLines,this._splitView.layout(t),this._splitView.resizeView(0,t*this.layoutData.ratio)}},{key:"setSelection",value:function(e){var t=this;return this._revealReference(e,!0).then((function(){t._model&&(t._tree.setSelection([e]),t._tree.setFocus([e]))}))}},{key:"setModel",value:function(e){return this._disposeOnNewModel.clear(),this._model=e,this._model?this._onNewModel():Promise.resolve()}},{key:"_onNewModel",value:function(){var e=this;return this._model?this._model.isEmpty?(this.setTitle(""),this._messageContainer.innerText=g.NC("noResults","No results"),E.show(this._messageContainer),Promise.resolve(void 0)):(E.hide(this._messageContainer),this._decorationsManager=new fe(this._preview,this._model),this._disposeOnNewModel.add(this._decorationsManager),this._disposeOnNewModel.add(this._model.onDidChangeReferenceRange((function(t){return e._tree.rerender(t)}))),this._disposeOnNewModel.add(this._preview.onMouseDown((function(t){var n=t.event,i=t.target;if(2===n.detail){var r=e._getFocusedReference();r&&e._onDidSelectReference.fire({element:{uri:r.uri,range:i.range},kind:n.ctrlKey||n.metaKey||n.altKey?"side":"open",source:"editor"})}}))),this.container.classList.add("results-loaded"),E.show(this._treeContainer),E.show(this._previewContainer),this._splitView.layout(this._dim.width),this.focusOnReferenceTree(),this._tree.setInput(1===this._model.groups.length?this._model.groups[0]:this._model)):Promise.resolve(void 0)}},{key:"_getFocusedReference",value:function(){var e=this._tree.getFocus(),t=(0,R.Z)(e,1)[0];return t instanceof C.WX?t:t instanceof C.F2&&t.children.length>0?t.children[0]:void 0}},{key:"revealReference",value:function(e){return he(this,void 0,void 0,(0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._revealReference(e,!1);case 2:this._onDidSelectReference.fire({element:e,kind:"goto",source:"tree"});case 3:case"end":return t.stop()}}),t,this)})))}},{key:"_revealReference",value:function(e,t){return he(this,void 0,void 0,(0,i.Z)().mark((function n(){var r,o,a,s,u;return(0,i.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this._revealedReference!==e){n.next=2;break}return n.abrupt("return");case 2:if(this._revealedReference=e,e.uri.scheme!==O.lg.inMemory?this.setTitle((0,F.Hx)(e.uri),this._uriLabel.getUriLabel((0,F.XX)(e.uri))):this.setTitle(g.NC("peekView.alternateTitle","References")),r=this._textModelResolverService.createModelReference(e.uri),this._tree.getInput()!==e.parent){n.next=9;break}this._tree.reveal(e),n.next=13;break;case 9:return t&&this._tree.reveal(e.parent),n.next=12,this._tree.expand(e.parent);case 12:this._tree.reveal(e);case 13:return n.next=15,r;case 15:if(o=n.sent,this._model){n.next=19;break}return o.dispose(),n.abrupt("return");case 19:(0,c.B9)(this._previewModelReference),(a=o.object)?(s=this._preview.getModel()===a.textEditorModel?0:1,u=h.e.lift(e.range).collapseToStart(),this._previewModelReference=o,this._preview.setModel(a.textEditorModel),this._preview.setSelection(u),this._preview.revealRangeInCenter(u,s)):(this._preview.setModel(this._previewNotAvailableMessage),o.dispose());case 22:case"end":return n.stop()}}),n,this)})))}}]),n}(f.vk);pe=le([de(3,ue.XE),de(4,H.S),de(5,_.TG),de(6,f.Fw),de(7,X.e),de(8,ce.tJ),de(9,q.d),de(10,G.O),de(11,K.c_)],pe);var me=function(e,t,n,i){var r,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(r=e[s])&&(a=(o<3?r(a):o>3?r(t,n,a):r(t,n))||a);return o>3&&a&&Object.defineProperty(t,n,a),a},_e=function(e,t){return function(n,i){t(n,i,e)}},ke=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},ye=new m.uy("referenceSearchVisible",!1,g.NC("referenceSearchVisible","Whether reference peek is visible, like 'Peek References' or 'Peek Definition'")),be=function(){function e(t,n,i,o,a,s,u,l){(0,r.Z)(this,e),this._defaultTreeKeyboardSupport=t,this._editor=n,this._editorService=o,this._notificationService=a,this._instantiationService=s,this._storageService=u,this._configurationService=l,this._disposables=new c.SL,this._requestIdPool=0,this._ignoreModelChangeEvent=!1,this._referenceSearchVisible=ye.bindTo(i)}return(0,o.Z)(e,[{key:"dispose",value:function(){var e,t;this._referenceSearchVisible.reset(),this._disposables.dispose(),null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._widget=void 0,this._model=void 0}},{key:"toggleWidget",value:function(e,t,n){var i,r=this;if(this._widget&&(i=this._widget.position),this.closeWidget(),!i||!e.containsPosition(i)){this._peekMode=n,this._referenceSearchVisible.set(!0),this._disposables.add(this._editor.onDidChangeModelLanguage((function(){r.closeWidget()}))),this._disposables.add(this._editor.onDidChangeModel((function(){r._ignoreModelChangeEvent||r.closeWidget()})));var o="peekViewLayout",a=ge.fromJSON(this._storageService.get(o,0,"{}"));this._widget=this._instantiationService.createInstance(pe,this._editor,this._defaultTreeKeyboardSupport,a),this._widget.setTitle(g.NC("labelLoading","Loading...")),this._widget.show(e),this._disposables.add(this._widget.onDidClose((function(){t.cancel(),r._widget&&(r._storageService.store(o,JSON.stringify(r._widget.layoutData),0,1),r._widget=void 0),r.closeWidget()}))),this._disposables.add(this._widget.onDidSelectReference((function(e){var t=e.element,i=e.kind;if(t)switch(i){case"open":"editor"===e.source&&r._configurationService.getValue("editor.stablePeek")||r.openReference(t,!1,!1);break;case"side":r.openReference(t,!0,!1);break;case"goto":n?r._gotoReference(t,!0):r.openReference(t,!1,!0)}})));var s=++this._requestIdPool;t.then((function(t){var n;if(s===r._requestIdPool&&r._widget)return null===(n=r._model)||void 0===n||n.dispose(),r._model=t,r._widget.setModel(r._model).then((function(){if(r._widget&&r._model&&r._editor.hasModel()){r._model.isEmpty?r._widget.setMetaTitle(""):r._widget.setMetaTitle(g.NC("metaTitle.N","{0} ({1})",r._model.title,r._model.references.length));var t=r._editor.getModel().uri,n=new d.L(e.startLineNumber,e.startColumn),i=r._model.nearestReference(t,n);if(i)return r._widget.setSelection(i).then((function(){r._widget&&"editor"===r._editor.getOption(82)&&r._widget.focusOnPreviewEditor()}))}}));t.dispose()}),(function(e){r._notificationService.error(e)}))}}},{key:"changeFocusBetweenPreviewAndReferences",value:function(){this._widget&&(this._widget.isPreviewEditorFocused()?this._widget.focusOnReferenceTree():this._widget.focusOnPreviewEditor())}},{key:"goToNextOrPreviousReference",value:function(e){return ke(this,void 0,void 0,(0,i.Z)().mark((function t(){var n,r,o,a,s;return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()&&this._model&&this._widget){t.next=2;break}return t.abrupt("return");case 2:if(n=this._widget.position){t.next=5;break}return t.abrupt("return");case 5:if(r=this._model.nearestReference(this._editor.getModel().uri,n)){t.next=8;break}return t.abrupt("return");case 8:return o=this._model.nextOrPreviousReference(r,e),a=this._editor.hasTextFocus(),s=this._widget.isPreviewEditorFocused(),t.next=13,this._widget.setSelection(o);case 13:return t.next=15,this._gotoReference(o,!1);case 15:a?this._editor.focus():this._widget&&s&&this._widget.focusOnPreviewEditor();case 16:case"end":return t.stop()}}),t,this)})))}},{key:"revealReference",value:function(e){return ke(this,void 0,void 0,(0,i.Z)().mark((function t(){return(0,i.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this._editor.hasModel()&&this._model&&this._widget){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,this._widget.revealReference(e);case 4:case"end":return t.stop()}}),t,this)})))}},{key:"closeWidget",value:function(){var e,t,n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];null===(e=this._widget)||void 0===e||e.dispose(),null===(t=this._model)||void 0===t||t.dispose(),this._referenceSearchVisible.reset(),this._disposables.clear(),this._widget=void 0,this._model=void 0,n&&this._editor.focus(),this._requestIdPool+=1}},{key:"_gotoReference",value:function(t,n){var i,r=this;null===(i=this._widget)||void 0===i||i.hide(),this._ignoreModelChangeEvent=!0;var o=h.e.lift(t.range).collapseToStart();return this._editorService.openCodeEditor({resource:t.uri,options:{selection:o,selectionSource:"code.jump",pinned:n}},this._editor).then((function(t){var n;if(r._ignoreModelChangeEvent=!1,t&&r._widget)if(r._editor===t)r._widget.show(o),r._widget.focusOnReferenceTree();else{var i=e.get(t),s=r._model.clone();r.closeWidget(),t.focus(),null===i||void 0===i||i.toggleWidget(o,(0,a.PG)((function(e){return Promise.resolve(s)})),null!==(n=r._peekMode)&&void 0!==n&&n)}else r.closeWidget()}),(function(e){r._ignoreModelChangeEvent=!1,(0,s.dL)(e)}))}},{key:"openReference",value:function(e,t,n){t||this.closeWidget();var i=e.uri,r=e.range;this._editorService.openCodeEditor({resource:i,options:{selection:r,selectionSource:"code.jump",pinned:n}},this._editor,t)}}],[{key:"get",value:function(t){return t.getContribution(e.ID)}}]),e}();function we(e,t){var n=(0,f.rc)(e);if(n){var i=be.get(n);i&&t(i)}}be.ID="editor.contrib.referencesController",be=me([_e(2,m.i6),_e(3,l.$),_e(4,b.lT),_e(5,_.TG),_e(6,w.Uy),_e(7,p.Ui)],be),k.W.registerCommandAndKeybindingRule({id:"togglePeekWidgetFocus",weight:100,primary:(0,u.gx)(2089,60),when:m.Ao.or(ye,f.Jy.inPeekEditor),handler:function(e){we(e,(function(e){e.changeFocusBetweenPreviewAndReferences()}))}}),k.W.registerCommandAndKeybindingRule({id:"goToNextReference",weight:90,primary:62,secondary:[70],when:m.Ao.or(ye,f.Jy.inPeekEditor),handler:function(e){we(e,(function(e){e.goToNextOrPreviousReference(!0)}))}}),k.W.registerCommandAndKeybindingRule({id:"goToPreviousReference",weight:90,primary:1086,secondary:[1094],when:m.Ao.or(ye,f.Jy.inPeekEditor),handler:function(e){we(e,(function(e){e.goToNextOrPreviousReference(!1)}))}}),v.P.registerCommandAlias("goToNextReferenceFromEmbeddedEditor","goToNextReference"),v.P.registerCommandAlias("goToPreviousReferenceFromEmbeddedEditor","goToPreviousReference"),v.P.registerCommandAlias("closeReferenceSearchEditor","closeReferenceSearch"),v.P.registerCommand("closeReferenceSearch",(function(e){return we(e,(function(e){return e.closeWidget()}))})),k.W.registerKeybindingRule({id:"closeReferenceSearch",weight:-1,primary:9,secondary:[1033],when:m.Ao.and(f.Jy.inPeekEditor,m.Ao.not("config.editor.stablePeek"))}),k.W.registerKeybindingRule({id:"closeReferenceSearch",weight:250,primary:9,secondary:[1033],when:m.Ao.and(ye,m.Ao.not("config.editor.stablePeek"))}),k.W.registerCommandAndKeybindingRule({id:"revealReference",weight:200,primary:3,mac:{primary:3,secondary:[2066]},when:m.Ao.and(ye,y.CQ,y.PS.negate(),y.uJ.negate()),handler:function(e){var t,n=null===(t=e.get(y.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof C.WX&&we(e,(function(e){return e.revealReference(n[0])}))}}),k.W.registerCommandAndKeybindingRule({id:"openReferenceToSide",weight:100,primary:2051,mac:{primary:259},when:m.Ao.and(ye,y.CQ,y.PS.negate(),y.uJ.negate()),handler:function(e){var t,n=null===(t=e.get(y.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof C.WX&&we(e,(function(e){return e.openReference(n[0],!0,!0)}))}}),v.P.registerCommand("openReference",(function(e){var t,n=null===(t=e.get(y.Lw).lastFocusedList)||void 0===t?void 0:t.getFocus();Array.isArray(n)&&n[0]instanceof C.WX&&we(e,(function(e){return e.openReference(n[0],!1,!0)}))}))},62302:function(e,t,n){n.d(t,{F2:function(){return y},WX:function(){return _},oQ:function(){return b}});var i=n(29439),r=n(74165),o=n(37762),a=n(15671),s=n(43144),u=n(68552),c=n(28941),l=n(21123),d=n(10526),h=n(49584),f=n(34408),g=n(26684),v=n(30788),p=n(87697),m=function(e,t,n,i){return new(n||(n=Promise))((function(r,o){function a(e){try{u(i.next(e))}catch(t){o(t)}}function s(e){try{u(i.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}u((i=i.apply(e,t||[])).next())}))},_=function(){function e(t,n,i,r){(0,a.Z)(this,e),this.isProviderFirst=t,this.parent=n,this.link=i,this._rangeCallback=r,this.id=l.a.nextId()}return(0,s.Z)(e,[{key:"uri",get:function(){return this.link.uri}},{key:"range",get:function(){var e,t;return null!==(t=null!==(e=this._range)&&void 0!==e?e:this.link.targetSelectionRange)&&void 0!==t?t:this.link.range},set:function(e){this._range=e,this._rangeCallback(this)}},{key:"ariaMessage",get:function(){var e,t=null===(e=this.parent.getPreview(this))||void 0===e?void 0:e.preview(this.range);return t?(0,p.NC)({key:"aria.oneReference.preview",comment:["Placeholders are: 0: filename, 1:line number, 2: column number, 3: preview snippet of source code"]},"symbol in {0} on line {1} at column {2}, {3}",(0,f.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn,t.value):(0,p.NC)("aria.oneReference","symbol in {0} on line {1} at column {2}",(0,f.EZ)(this.uri),this.range.startLineNumber,this.range.startColumn)}}]),e}(),k=function(){function e(t){(0,a.Z)(this,e),this._modelReference=t}return(0,s.Z)(e,[{key:"dispose",value:function(){this._modelReference.dispose()}},{key:"preview",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=this._modelReference.object.textEditorModel;if(n){var i=e.startLineNumber,r=e.startColumn,o=e.endLineNumber,a=e.endColumn,s=n.getWordUntilPosition({lineNumber:i,column:r-t}),u=new v.e(i,s.startColumn,i,r),c=new v.e(o,a,o,1073741824),l=n.getValueInRange(u).replace(/^\s+/,""),d=n.getValueInRange(e);return{value:l+d+n.getValueInRange(c).replace(/\s+$/,""),highlight:{start:l.length,end:l.length+d.length}}}}}]),e}(),y=function(){function e(t,n){(0,a.Z)(this,e),this.parent=t,this.uri=n,this.children=[],this._previews=new h.Y9}return(0,s.Z)(e,[{key:"dispose",value:function(){(0,d.B9)(this._previews.values()),this._previews.clear()}},{key:"getPreview",value:function(e){return this._previews.get(e.uri)}},{key:"ariaMessage",get:function(){var e=this.children.length;return 1===e?(0,p.NC)("aria.fileReferences.1","1 symbol in {0}, full path {1}",(0,f.EZ)(this.uri),this.uri.fsPath):(0,p.NC)("aria.fileReferences.N","{0} symbols in {1}, full path {2}",e,(0,f.EZ)(this.uri),this.uri.fsPath)}},{key:"resolve",value:function(e){return m(this,void 0,void 0,(0,r.Z)().mark((function t(){var n,i,a,s;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(0===this._previews.size){t.next=2;break}return t.abrupt("return",this);case 2:n=(0,o.Z)(this.children),t.prev=3,n.s();case 5:if((i=n.n()).done){t.next=21;break}if(a=i.value,!this._previews.has(a.uri)){t.next=9;break}return t.abrupt("continue",19);case 9:return t.prev=9,t.next=12,e.createModelReference(a.uri);case 12:s=t.sent,this._previews.set(a.uri,new k(s)),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(9),(0,u.dL)(t.t0);case 19:t.next=5;break;case 21:t.next=26;break;case 23:t.prev=23,t.t1=t.catch(3),n.e(t.t1);case 26:return t.prev=26,n.f(),t.finish(26);case 29:return t.abrupt("return",this);case 30:case"end":return t.stop()}}),t,this,[[3,23,26,29],[9,16]])})))}}]),e}(),b=function(){function e(t,n){var r=this;(0,a.Z)(this,e),this.groups=[],this.references=[],this._onDidChangeReferenceRange=new c.Q5,this.onDidChangeReferenceRange=this._onDidChangeReferenceRange.event,this._links=t,this._title=n;var s,u=(0,i.Z)(t,1)[0];t.sort(e._compareReferences);var l,d=(0,o.Z)(t);try{for(d.s();!(l=d.n()).done;){var h=l.value;if(s&&f.SF.isEqual(s.uri,h.uri,!0)||(s=new y(this,h.uri),this.groups.push(s)),0===s.children.length||0!==e._compareReferences(h,s.children[s.children.length-1])){var g=new _(u===h,s,h,(function(e){return r._onDidChangeReferenceRange.fire(e)}));this.references.push(g),s.children.push(g)}}}catch(v){d.e(v)}finally{d.f()}}return(0,s.Z)(e,[{key:"dispose",value:function(){(0,d.B9)(this.groups),this._onDidChangeReferenceRange.dispose(),this.groups.length=0}},{key:"clone",value:function(){return new e(this._links,this._title)}},{key:"title",get:function(){return this._title}},{key:"isEmpty",get:function(){return 0===this.groups.length}},{key:"ariaMessage",get:function(){return this.isEmpty?(0,p.NC)("aria.result.0","No results found"):1===this.references.length?(0,p.NC)("aria.result.1","Found 1 symbol in {0}",this.references[0].uri.fsPath):1===this.groups.length?(0,p.NC)("aria.result.n1","Found {0} symbols in {1}",this.references.length,this.groups[0].uri.fsPath):(0,p.NC)("aria.result.nm","Found {0} symbols in {1} files",this.references.length,this.groups.length)}},{key:"nextOrPreviousReference",value:function(e,t){var n=e.parent,i=n.children.indexOf(e),r=n.children.length,o=n.parent.groups.length;return 1===o||t&&i+1<r||!t&&i>0?(i=t?(i+1)%r:(i+r-1)%r,n.children[i]):(i=n.parent.groups.indexOf(n),t?(i=(i+1)%o,n.parent.groups[i].children[0]):(i=(i+o-1)%o,n.parent.groups[i].children[n.parent.groups[i].children.length-1]))}},{key:"nearestReference",value:function(e,t){var n=this.references.map((function(n,i){return{idx:i,prefixLen:g.Mh(n.uri.toString(),e.toString()),offsetDist:100*Math.abs(n.range.startLineNumber-t.lineNumber)+Math.abs(n.range.startColumn-t.column)}})).sort((function(e,t){return e.prefixLen>t.prefixLen?-1:e.prefixLen<t.prefixLen?1:e.offsetDist<t.offsetDist?-1:e.offsetDist>t.offsetDist?1:0}))[0];if(n)return this.references[n.idx]}},{key:"referenceAt",value:function(e,t){var n,i=(0,o.Z)(this.references);try{for(i.s();!(n=i.n()).done;){var r=n.value;if(r.uri.toString()===e.toString()&&v.e.containsPosition(r.range,t))return r}}catch(a){i.e(a)}finally{i.f()}}},{key:"firstReference",value:function(){var e,t=(0,o.Z)(this.references);try{for(t.s();!(e=t.n()).done;){var n=e.value;if(n.isProviderFirst)return n}}catch(i){t.e(i)}finally{t.f()}return this.references[0]}}],[{key:"_compareReferences",value:function(e,t){return f.SF.compare(e.uri,t.uri)||v.e.compareRangesUsingStarts(e.range,t.range)}}]),e}()}}]);
//# sourceMappingURL=monaco-editor-vendor.1b18e904.f1d604ae.js.map