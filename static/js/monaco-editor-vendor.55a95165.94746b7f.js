"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[722],{75e3:(e,i,t)=>{t.d(i,{BG:()=>s,IO:()=>d,Y:()=>r,eh:()=>n,pj:()=>l,qN:()=>a});class o{constructor(e,i){this._restrictedRenderingContextBrand=void 0,this._viewLayout=e,this.viewportData=i,this.scrollWidth=this._viewLayout.getScrollWidth(),this.scrollHeight=this._viewLayout.getScrollHeight(),this.visibleRange=this.viewportData.visibleRange,this.bigNumbersDelta=this.viewportData.bigNumbersDelta;const t=this._viewLayout.getCurrentViewport();this.scrollTop=t.top,this.scrollLeft=t.left,this.viewportWidth=t.width,this.viewportHeight=t.height}getScrolledTopFromAbsoluteTop(e){return e-this.scrollTop}getVerticalOffsetForLineNumber(e,i){return this._viewLayout.getVerticalOffsetForLineNumber(e,i)}getVerticalOffsetAfterLineNumber(e,i){return this._viewLayout.getVerticalOffsetAfterLineNumber(e,i)}getDecorationsInViewport(){return this.viewportData.getDecorationsInViewport()}}class n extends o{constructor(e,i,t){super(e,i),this._renderingContextBrand=void 0,this._viewLines=t}linesVisibleRangesForRange(e,i){return this._viewLines.linesVisibleRangesForRange(e,i)}visibleRangeForPosition(e){return this._viewLines.visibleRangeForPosition(e)}}class s{constructor(e,i,t,o){this.outsideRenderedLine=e,this.lineNumber=i,this.ranges=t,this.continuesOnNextLine=o}}class r{static from(e){const i=new Array(e.length);for(let t=0,o=e.length;t<o;t++){const o=e[t];i[t]=new r(o.left,o.width)}return i}constructor(e,i){this._horizontalRangeBrand=void 0,this.left=Math.round(e),this.width=Math.round(i)}toString(){return"[".concat(this.left,",").concat(this.width,"]")}}class d{constructor(e,i){this._floatHorizontalRangeBrand=void 0,this.left=e,this.width=i}toString(){return"[".concat(this.left,",").concat(this.width,"]")}static compare(e,i){return e.left-i.left}}class a{constructor(e,i){this.outsideRenderedLine=e,this.originalLeft=i,this.left=Math.round(this.originalLeft)}}class l{constructor(e,i){this.outsideRenderedLine=e,this.ranges=i}}},19462:(e,i,t)=>{t.d(i,{W:()=>r});var o=t(49300),n=t(23525),s=t(66731);class r{constructor(e,i,t,o){this.configuration=e,this.viewModel=i,this.userInputEvents=t,this.commandDelegate=o}paste(e,i,t,o){this.commandDelegate.paste(e,i,t,o)}type(e){this.commandDelegate.type(e)}compositionType(e,i,t,o){this.commandDelegate.compositionType(e,i,t,o)}compositionStart(){this.commandDelegate.startComposition()}compositionEnd(){this.commandDelegate.endComposition()}cut(){this.commandDelegate.cut()}setSelection(e){o.QM.SetSelection.runCoreEditorCommand(this.viewModel,{source:"keyboard",selection:e})}_validateViewColumn(e){const i=this.viewModel.getLineMinColumn(e.lineNumber);return e.column<i?new n.y(e.lineNumber,i):e}_hasMulticursorModifier(e){switch(this.configuration.options.get(77)){case"altKey":return e.altKey;case"ctrlKey":return e.ctrlKey;case"metaKey":return e.metaKey;default:return!1}}_hasNonMulticursorModifier(e){switch(this.configuration.options.get(77)){case"altKey":return e.ctrlKey||e.metaKey;case"ctrlKey":return e.altKey||e.metaKey;case"metaKey":return e.ctrlKey||e.altKey;default:return!1}}dispatchMouse(e){const i=this.configuration.options,t=s.j9&&i.get(106),o=i.get(22);e.middleButton&&!t?this._columnSelect(e.position,e.mouseColumn,e.inSelectionMode):e.startedOnLineNumbers?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelect(e.position,e.revealType):this._createCursor(e.position,!0):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):e.mouseDownCount>=4?this._selectAll():3===e.mouseDownCount?this._hasMulticursorModifier(e)?e.inSelectionMode?this._lastCursorLineSelectDrag(e.position,e.revealType):this._lastCursorLineSelect(e.position,e.revealType):e.inSelectionMode?this._lineSelectDrag(e.position,e.revealType):this._lineSelect(e.position,e.revealType):2===e.mouseDownCount?e.onInjectedText||(this._hasMulticursorModifier(e)?this._lastCursorWordSelect(e.position,e.revealType):e.inSelectionMode?this._wordSelectDrag(e.position,e.revealType):this._wordSelect(e.position,e.revealType)):this._hasMulticursorModifier(e)?this._hasNonMulticursorModifier(e)||(e.shiftKey?this._columnSelect(e.position,e.mouseColumn,!0):e.inSelectionMode?this._lastCursorMoveToSelect(e.position,e.revealType):this._createCursor(e.position,!1)):e.inSelectionMode?e.altKey||o?this._columnSelect(e.position,e.mouseColumn,!0):this._moveToSelect(e.position,e.revealType):this.moveTo(e.position,e.revealType)}_usualArgs(e,i){return e=this._validateViewColumn(e),{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,revealType:i}}moveTo(e,i){o.QM.MoveTo.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_moveToSelect(e,i){o.QM.MoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_columnSelect(e,i,t){e=this._validateViewColumn(e),o.QM.ColumnSelect.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,mouseColumn:i,doColumnSelect:t})}_createCursor(e,i){e=this._validateViewColumn(e),o.QM.CreateCursor.runCoreEditorCommand(this.viewModel,{source:"mouse",position:this._convertViewToModelPosition(e),viewPosition:e,wholeLine:i})}_lastCursorMoveToSelect(e,i){o.QM.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_wordSelect(e,i){o.QM.WordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_wordSelectDrag(e,i){o.QM.WordSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_lastCursorWordSelect(e,i){o.QM.LastCursorWordSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_lineSelect(e,i){o.QM.LineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_lineSelectDrag(e,i){o.QM.LineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_lastCursorLineSelect(e,i){o.QM.LastCursorLineSelect.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_lastCursorLineSelectDrag(e,i){o.QM.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel,this._usualArgs(e,i))}_selectAll(){o.QM.SelectAll.runCoreEditorCommand(this.viewModel,{source:"mouse"})}_convertViewToModelPosition(e){return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(e)}emitKeyDown(e){this.userInputEvents.emitKeyDown(e)}emitKeyUp(e){this.userInputEvents.emitKeyUp(e)}emitContextMenu(e){this.userInputEvents.emitContextMenu(e)}emitMouseMove(e){this.userInputEvents.emitMouseMove(e)}emitMouseLeave(e){this.userInputEvents.emitMouseLeave(e)}emitMouseUp(e){this.userInputEvents.emitMouseUp(e)}emitMouseDown(e){this.userInputEvents.emitMouseDown(e)}emitMouseDrag(e){this.userInputEvents.emitMouseDrag(e)}emitMouseDrop(e){this.userInputEvents.emitMouseDrop(e)}emitMouseDropCanceled(){this.userInputEvents.emitMouseDropCanceled()}emitMouseWheel(e){this.userInputEvents.emitMouseWheel(e)}}},20429:(e,i,t)=>{t.d(i,{I:()=>a,T:()=>d});var o=t(86675),n=t(28925),s=t(29591),r=t(16724);class d{constructor(e){this._createLine=e,this._set(1,[])}flush(){this._set(1,[])}_set(e,i){this._lines=i,this._rendLineNumberStart=e}_get(){return{rendLineNumberStart:this._rendLineNumberStart,lines:this._lines}}getStartLineNumber(){return this._rendLineNumberStart}getEndLineNumber(){return this._rendLineNumberStart+this._lines.length-1}getCount(){return this._lines.length}getLine(e){const i=e-this._rendLineNumberStart;if(i<0||i>=this._lines.length)throw new s.D7("Illegal value for lineNumber");return this._lines[i]}onLinesDeleted(e,i){if(0===this.getCount())return null;const t=this.getStartLineNumber(),o=this.getEndLineNumber();if(i<t){const t=i-e+1;return this._rendLineNumberStart-=t,null}if(e>o)return null;let n=0,s=0;for(let r=t;r<=o;r++){const t=r-this._rendLineNumberStart;e<=r&&r<=i&&(0===s?(n=t,s=1):s++)}if(e<t){let o=0;o=i<t?i-e+1:t-e,this._rendLineNumberStart-=o}return this._lines.splice(n,s)}onLinesChanged(e,i){const t=e+i-1;if(0===this.getCount())return!1;const o=this.getStartLineNumber(),n=this.getEndLineNumber();let s=!1;for(let r=e;r<=t;r++)r>=o&&r<=n&&(this._lines[r-this._rendLineNumberStart].onContentChanged(),s=!0);return s}onLinesInserted(e,i){if(0===this.getCount())return null;const t=i-e+1,o=this.getStartLineNumber(),n=this.getEndLineNumber();if(e<=o)return this._rendLineNumberStart+=t,null;if(e>n)return null;if(t+e>n){return this._lines.splice(e-this._rendLineNumberStart,n-e+1)}const s=[];for(let h=0;h<t;h++)s[h]=this._createLine();const r=e-this._rendLineNumberStart,d=this._lines.slice(0,r),a=this._lines.slice(r,this._lines.length-t),l=this._lines.slice(this._lines.length-t,this._lines.length);return this._lines=d.concat(s).concat(a),l}onTokensChanged(e){if(0===this.getCount())return!1;const i=this.getStartLineNumber(),t=this.getEndLineNumber();let o=!1;for(let n=0,s=e.length;n<s;n++){const s=e[n];if(s.toLineNumber<i||s.fromLineNumber>t)continue;const r=Math.max(i,s.fromLineNumber),d=Math.min(t,s.toLineNumber);for(let e=r;e<=d;e++){const i=e-this._rendLineNumberStart;this._lines[i].onTokensChanged(),o=!0}}return o}}class a{constructor(e){this._host=e,this.domNode=this._createDomNode(),this._linesCollection=new d((()=>this._host.createVisibleLine()))}_createDomNode(){const e=(0,o.Z)(document.createElement("div"));return e.setClassName("view-layer"),e.setPosition("absolute"),e.domNode.setAttribute("role","presentation"),e.domNode.setAttribute("aria-hidden","true"),e}onConfigurationChanged(e){return!!e.hasChanged(143)}onFlushed(e){return this._linesCollection.flush(),!0}onLinesChanged(e){return this._linesCollection.onLinesChanged(e.fromLineNumber,e.count)}onLinesDeleted(e){const i=this._linesCollection.onLinesDeleted(e.fromLineNumber,e.toLineNumber);if(i)for(let t=0,o=i.length;t<o;t++){const e=i[t].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0}onLinesInserted(e){const i=this._linesCollection.onLinesInserted(e.fromLineNumber,e.toLineNumber);if(i)for(let t=0,o=i.length;t<o;t++){const e=i[t].getDomNode();e&&this.domNode.domNode.removeChild(e)}return!0}onScrollChanged(e){return e.scrollTopChanged}onTokensChanged(e){return this._linesCollection.onTokensChanged(e.ranges)}onZonesChanged(e){return!0}getStartLineNumber(){return this._linesCollection.getStartLineNumber()}getEndLineNumber(){return this._linesCollection.getEndLineNumber()}getVisibleLine(e){return this._linesCollection.getLine(e)}renderLines(e){const i=this._linesCollection._get(),t=new l(this.domNode.domNode,this._host,e),o={rendLineNumberStart:i.rendLineNumberStart,lines:i.lines,linesLength:i.lines.length},n=t.render(o,e.startLineNumber,e.endLineNumber,e.relativeVerticalOffset);this._linesCollection._set(n.rendLineNumberStart,n.lines)}}class l{constructor(e,i,t){this.domNode=e,this.host=i,this.viewportData=t}render(e,i,t,o){const n={rendLineNumberStart:e.rendLineNumberStart,lines:e.lines.slice(0),linesLength:e.linesLength};if(n.rendLineNumberStart+n.linesLength-1<i||t<n.rendLineNumberStart){n.rendLineNumberStart=i,n.linesLength=t-i+1,n.lines=[];for(let e=i;e<=t;e++)n.lines[e-i]=this.host.createVisibleLine();return this._finishRendering(n,!0,o),n}if(this._renderUntouchedLines(n,Math.max(i-n.rendLineNumberStart,0),Math.min(t-n.rendLineNumberStart,n.linesLength-1),o,i),n.rendLineNumberStart>i){const e=i,s=Math.min(t,n.rendLineNumberStart-1);e<=s&&(this._insertLinesBefore(n,e,s,o,i),n.linesLength+=s-e+1)}else if(n.rendLineNumberStart<i){const e=Math.min(n.linesLength,i-n.rendLineNumberStart);e>0&&(this._removeLinesBefore(n,e),n.linesLength-=e)}if(n.rendLineNumberStart=i,n.rendLineNumberStart+n.linesLength-1<t){const e=n.rendLineNumberStart+n.linesLength,s=t;e<=s&&(this._insertLinesAfter(n,e,s,o,i),n.linesLength+=s-e+1)}else if(n.rendLineNumberStart+n.linesLength-1>t){const e=Math.max(0,t-n.rendLineNumberStart+1),i=n.linesLength-1-e+1;i>0&&(this._removeLinesAfter(n,i),n.linesLength-=i)}return this._finishRendering(n,!1,o),n}_renderUntouchedLines(e,i,t,o,n){const s=e.rendLineNumberStart,r=e.lines;for(let d=i;d<=t;d++){const e=s+d;r[d].layoutLine(e,o[e-n])}}_insertLinesBefore(e,i,t,o,n){const s=[];let r=0;for(let d=i;d<=t;d++)s[r++]=this.host.createVisibleLine();e.lines=s.concat(e.lines)}_removeLinesBefore(e,i){for(let t=0;t<i;t++){const i=e.lines[t].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(0,i)}_insertLinesAfter(e,i,t,o,n){const s=[];let r=0;for(let d=i;d<=t;d++)s[r++]=this.host.createVisibleLine();e.lines=e.lines.concat(s)}_removeLinesAfter(e,i){const t=e.linesLength-i;for(let o=0;o<i;o++){const i=e.lines[t+o].getDomNode();i&&this.domNode.removeChild(i)}e.lines.splice(t,i)}_finishRenderingNewLines(e,i,t,o){l._ttPolicy&&(t=l._ttPolicy.createHTML(t));const n=this.domNode.lastChild;i||!n?this.domNode.innerHTML=t:n.insertAdjacentHTML("afterend",t);let s=this.domNode.lastChild;for(let r=e.linesLength-1;r>=0;r--){const i=e.lines[r];o[r]&&(i.setDomNode(s),s=s.previousSibling)}}_finishRenderingInvalidLines(e,i,t){const o=document.createElement("div");l._ttPolicy&&(i=l._ttPolicy.createHTML(i)),o.innerHTML=i;for(let n=0;n<e.linesLength;n++){const i=e.lines[n];if(t[n]){const e=o.firstChild,t=i.getDomNode();t.parentNode.replaceChild(e,t),i.setDomNode(e)}}}_finishRendering(e,i,t){const o=l._sb,n=e.linesLength,s=e.lines,r=e.rendLineNumberStart,d=[];{o.reset();let a=!1;for(let e=0;e<n;e++){const i=s[e];d[e]=!1;if(i.getDomNode())continue;i.renderLine(e+r,t[e],this.viewportData,o)&&(d[e]=!0,a=!0)}a&&this._finishRenderingNewLines(e,i,o.build(),d)}{o.reset();let i=!1;const a=[];for(let e=0;e<n;e++){const n=s[e];if(a[e]=!1,d[e])continue;n.renderLine(e+r,t[e],this.viewportData,o)&&(a[e]=!0,i=!0)}i&&this._finishRenderingInvalidLines(e,o.build(),a)}}}l._ttPolicy=(0,n.H)("editorViewLayer",{createHTML:e=>e}),l._sb=new r.fe(1e5)},27819:(e,i,t)=>{t.d(i,{EA:()=>l,jE:()=>h});var o=t(86675),n=t(30381),s=t(20429),r=t(92167);class d extends r.p{constructor(e){super(e),this._visibleLines=new s.I(this),this.domNode=this._visibleLines.domNode;const i=this._context.configuration.options.get(50);(0,n.M)(this.domNode,i),this._dynamicOverlays=[],this._isFocused=!1,this.domNode.setClassName("view-overlays")}shouldRender(){if(super.shouldRender())return!0;for(let e=0,i=this._dynamicOverlays.length;e<i;e++){if(this._dynamicOverlays[e].shouldRender())return!0}return!1}dispose(){super.dispose();for(let e=0,i=this._dynamicOverlays.length;e<i;e++){this._dynamicOverlays[e].dispose()}this._dynamicOverlays=[]}getDomNode(){return this.domNode}createVisibleLine(){return new a(this._context.configuration,this._dynamicOverlays)}addDynamicOverlay(e){this._dynamicOverlays.push(e)}onConfigurationChanged(e){this._visibleLines.onConfigurationChanged(e);const i=this._visibleLines.getStartLineNumber(),t=this._visibleLines.getEndLineNumber();for(let n=i;n<=t;n++){this._visibleLines.getVisibleLine(n).onConfigurationChanged(e)}const o=this._context.configuration.options.get(50);return(0,n.M)(this.domNode,o),!0}onFlushed(e){return this._visibleLines.onFlushed(e)}onFocusChanged(e){return this._isFocused=e.isFocused,!0}onLinesChanged(e){return this._visibleLines.onLinesChanged(e)}onLinesDeleted(e){return this._visibleLines.onLinesDeleted(e)}onLinesInserted(e){return this._visibleLines.onLinesInserted(e)}onScrollChanged(e){return this._visibleLines.onScrollChanged(e)||!0}onTokensChanged(e){return this._visibleLines.onTokensChanged(e)}onZonesChanged(e){return this._visibleLines.onZonesChanged(e)}prepareRender(e){const i=this._dynamicOverlays.filter((e=>e.shouldRender()));for(let t=0,o=i.length;t<o;t++){const o=i[t];o.prepareRender(e),o.onDidRender()}}render(e){this._viewOverlaysRender(e),this.domNode.toggleClassName("focused",this._isFocused)}_viewOverlaysRender(e){this._visibleLines.renderLines(e.viewportData)}}class a{constructor(e,i){this._configuration=e,this._lineHeight=this._configuration.options.get(66),this._dynamicOverlays=i,this._domNode=null,this._renderedContent=null}getDomNode(){return this._domNode?this._domNode.domNode:null}setDomNode(e){this._domNode=(0,o.Z)(e)}onContentChanged(){}onTokensChanged(){}onConfigurationChanged(e){this._lineHeight=this._configuration.options.get(66)}renderLine(e,i,t,o){let n="";for(let s=0,r=this._dynamicOverlays.length;s<r;s++){n+=this._dynamicOverlays[s].render(t.startLineNumber,e)}return this._renderedContent!==n&&(this._renderedContent=n,o.appendString('<div style="position:absolute;top:'),o.appendString(String(i)),o.appendString("px;width:100%;height:"),o.appendString(String(this._lineHeight)),o.appendString('px;">'),o.appendString(n),o.appendString("</div>"),!0)}layoutLine(e,i){this._domNode&&(this._domNode.setTop(i),this._domNode.setHeight(this._lineHeight))}}class l extends d{constructor(e){super(e);const i=this._context.configuration.options.get(143);this._contentWidth=i.contentWidth,this.domNode.setHeight(0)}onConfigurationChanged(e){const i=this._context.configuration.options.get(143);return this._contentWidth=i.contentWidth,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollWidthChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e),this.domNode.setWidth(Math.max(e.scrollWidth,this._contentWidth))}}class h extends d{constructor(e){super(e);const i=this._context.configuration.options,t=i.get(143);this._contentLeft=t.contentLeft,this.domNode.setClassName("margin-view-overlays"),this.domNode.setWidth(1),(0,n.M)(this.domNode,i.get(50))}onConfigurationChanged(e){const i=this._context.configuration.options;(0,n.M)(this.domNode,i.get(50));const t=i.get(143);return this._contentLeft=t.contentLeft,super.onConfigurationChanged(e)||!0}onScrollChanged(e){return super.onScrollChanged(e)||e.scrollHeightChanged}_viewOverlaysRender(e){super._viewOverlaysRender(e);const i=Math.min(e.scrollHeight,1e6);this.domNode.setHeight(i),this.domNode.setWidth(this._contentLeft)}}},92167:(e,i,t)=>{t.d(i,{L:()=>s,p:()=>n});var o=t(67957);class n extends o.i{constructor(e){super(),this._context=e,this._context.addEventHandler(this)}dispose(){this._context.removeEventHandler(this),super.dispose()}}class s{static write(e,i){e.setAttribute("data-mprt",String(i))}static read(e){const i=e.getAttribute("data-mprt");return null===i?0:parseInt(i,10)}static collect(e,i){const t=[];let o=0;for(;e&&e!==e.ownerDocument.body&&e!==i;)e.nodeType===e.ELEMENT_NODE&&(t[o++]=this.read(e)),e=e.parentElement;const n=new Uint8Array(o);for(let s=0;s<o;s++)n[s]=t[o-s-1];return n}}},23652:(e,i,t)=>{t.d(i,{o:()=>n});var o=t(23525);class n{constructor(e){this.onKeyDown=null,this.onKeyUp=null,this.onContextMenu=null,this.onMouseMove=null,this.onMouseLeave=null,this.onMouseDown=null,this.onMouseUp=null,this.onMouseDrag=null,this.onMouseDrop=null,this.onMouseDropCanceled=null,this.onMouseWheel=null,this._coordinatesConverter=e}emitKeyDown(e){var i;null===(i=this.onKeyDown)||void 0===i||i.call(this,e)}emitKeyUp(e){var i;null===(i=this.onKeyUp)||void 0===i||i.call(this,e)}emitContextMenu(e){var i;null===(i=this.onContextMenu)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseMove(e){var i;null===(i=this.onMouseMove)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseLeave(e){var i;null===(i=this.onMouseLeave)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDown(e){var i;null===(i=this.onMouseDown)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseUp(e){var i;null===(i=this.onMouseUp)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrag(e){var i;null===(i=this.onMouseDrag)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDrop(e){var i;null===(i=this.onMouseDrop)||void 0===i||i.call(this,this._convertViewToModelMouseEvent(e))}emitMouseDropCanceled(){var e;null===(e=this.onMouseDropCanceled)||void 0===e||e.call(this)}emitMouseWheel(e){var i;null===(i=this.onMouseWheel)||void 0===i||i.call(this,e)}_convertViewToModelMouseEvent(e){return e.target?{event:e.event,target:this._convertViewToModelMouseTarget(e.target)}:e}_convertViewToModelMouseTarget(e){return n.convertViewToModelMouseTarget(e,this._coordinatesConverter)}static convertViewToModelMouseTarget(e,i){const t=Object.assign({},e);return t.position&&(t.position=i.convertViewPositionToModelPosition(t.position)),t.range&&(t.range=i.convertViewRangeToModelRange(t.range)),5!==t.type&&8!==t.type||(t.detail=this.convertViewToModelViewZoneData(t.detail,i)),t}static convertViewToModelViewZoneData(e,i){return{viewZoneId:e.viewZoneId,positionBefore:e.positionBefore?i.convertViewPositionToModelPosition(e.positionBefore):e.positionBefore,positionAfter:e.positionAfter?i.convertViewPositionToModelPosition(e.positionAfter):e.positionAfter,position:i.convertViewPositionToModelPosition(e.position),afterLineNumber:i.convertViewPositionToModelPosition(new o.y(e.afterLineNumber,1)).lineNumber}}}},15683:(e,i,t)=>{t.d(i,{x:()=>G});t(51031);var o=t(51413),n=t(32605),s=t(29591),r=t(48250),d=t(87766),a=t(83888),l=t(62498),h=t(30050),c=t(32101),g=t(95399),u=t(23652),m=t(81196),f=t(47221),_=t(23525),v=t(99005),p=t(5190),C=t(89731),b=t(27860),w=t(72330),D=t(15739),y=t(16871),L=t(68010),M=t(74757),S=t(39587),R=t(39686),N=t(39263),E=t(92161),I=t(39895),T=t(19700),x=t(73429),P=t(80507),O=t(43540),V=t(2409),W=t(80158),A=t(30381),F=t(63910),k=t(73990);class H extends d.jG{constructor(){super(),this._editor=null,this._instantiationService=null,this._instances=this._register(new d.$w),this._pending=new Map,this._finishedInstantiation=[],this._finishedInstantiation[0]=!1,this._finishedInstantiation[1]=!1,this._finishedInstantiation[2]=!1,this._finishedInstantiation[3]=!1}initialize(e,i,t){this._editor=e,this._instantiationService=t;for(const o of i)this._pending.has(o.id)?(0,s.dz)(new Error("Cannot have two contributions with the same id ".concat(o.id))):this._pending.set(o.id,o);this._instantiateSome(0),this._register((0,k.cx)((()=>{this._instantiateSome(1)}))),this._register((0,k.cx)((()=>{this._instantiateSome(2)}))),this._register((0,k.cx)((()=>{this._instantiateSome(3)}),5e3))}saveViewState(){const e={};for(const[i,t]of this._instances)"function"===typeof t.saveViewState&&(e[i]=t.saveViewState());return e}restoreViewState(e){for(const[i,t]of this._instances)"function"===typeof t.restoreViewState&&t.restoreViewState(e[i])}get(e){return this._instantiateById(e),this._instances.get(e)||null}onBeforeInteractionEvent(){this._instantiateSome(2)}onAfterModelAttached(){this._register((0,k.cx)((()=>{this._instantiateSome(1)}),50))}_instantiateSome(e){if(this._finishedInstantiation[e])return;this._finishedInstantiation[e]=!0;const i=this._findPendingContributionsByInstantiation(e);for(const t of i)this._instantiateById(t.id)}_findPendingContributionsByInstantiation(e){const i=[];for(const[,t]of this._pending)t.instantiation===e&&i.push(t);return i}_instantiateById(e){const i=this._pending.get(e);if(i){if(this._pending.delete(e),!this._instantiationService||!this._editor)throw new Error("Cannot instantiate contributions before being initialized!");try{const e=this._instantiationService.createInstance(i.ctor,this._editor);this._instances.set(i.id,e),"function"===typeof e.restoreViewState&&0!==i.instantiation&&console.warn("Editor contribution '".concat(i.id,"' should be eager instantiated because it uses saveViewState / restoreViewState."))}catch(t){(0,s.dz)(t)}}}}var B,U=t(95523),Q=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},z=function(e,i){return function(t,o){i(t,o,e)}},j=function(e,i,t,o){return new(t||(t=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(i){s(i)}}function d(e){try{a(o.throw(e))}catch(i){s(i)}}function a(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(r,d)}a((o=o.apply(e,i||[])).next())}))};let Z=0;class K{constructor(e,i,t,o,n,s){this.model=e,this.viewModel=i,this.view=t,this.hasRealView=o,this.listenersToRemove=n,this.attachedView=s}dispose(){(0,d.AS)(this.listenersToRemove),this.model.onBeforeDetached(this.attachedView),this.hasRealView&&this.view.dispose(),this.viewModel.dispose()}}let G=B=class extends d.jG{get isSimpleWidget(){return this._configuration.isSimpleWidget}constructor(e,i,t,o,d,a,l,c,g,u,m,f){var _;super(),this.languageConfigurationService=m,this._deliveryQueue=(0,r.Qy)(),this._contributions=this._register(new H),this._onDidDispose=this._register(new r.vl),this.onDidDispose=this._onDidDispose.event,this._onDidChangeModelContent=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelContent=this._onDidChangeModelContent.event,this._onDidChangeModelLanguage=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguage=this._onDidChangeModelLanguage.event,this._onDidChangeModelLanguageConfiguration=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelLanguageConfiguration=this._onDidChangeModelLanguageConfiguration.event,this._onDidChangeModelOptions=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelOptions=this._onDidChangeModelOptions.event,this._onDidChangeModelDecorations=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelDecorations=this._onDidChangeModelDecorations.event,this._onDidChangeModelTokens=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModelTokens=this._onDidChangeModelTokens.event,this._onDidChangeConfiguration=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeConfiguration=this._onDidChangeConfiguration.event,this._onDidChangeModel=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeModel=this._onDidChangeModel.event,this._onDidChangeCursorPosition=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorPosition=this._onDidChangeCursorPosition.event,this._onDidChangeCursorSelection=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeCursorSelection=this._onDidChangeCursorSelection.event,this._onDidAttemptReadOnlyEdit=this._register(new Y(this._contributions,this._deliveryQueue)),this.onDidAttemptReadOnlyEdit=this._onDidAttemptReadOnlyEdit.event,this._onDidLayoutChange=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidLayoutChange=this._onDidLayoutChange.event,this._editorTextFocus=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorText=this._editorTextFocus.onDidChangeToTrue,this.onDidBlurEditorText=this._editorTextFocus.onDidChangeToFalse,this._editorWidgetFocus=this._register(new q({deliveryQueue:this._deliveryQueue})),this.onDidFocusEditorWidget=this._editorWidgetFocus.onDidChangeToTrue,this.onDidBlurEditorWidget=this._editorWidgetFocus.onDidChangeToFalse,this._onWillType=this._register(new Y(this._contributions,this._deliveryQueue)),this.onWillType=this._onWillType.event,this._onDidType=this._register(new Y(this._contributions,this._deliveryQueue)),this.onDidType=this._onDidType.event,this._onDidCompositionStart=this._register(new Y(this._contributions,this._deliveryQueue)),this.onDidCompositionStart=this._onDidCompositionStart.event,this._onDidCompositionEnd=this._register(new Y(this._contributions,this._deliveryQueue)),this.onDidCompositionEnd=this._onDidCompositionEnd.event,this._onDidPaste=this._register(new Y(this._contributions,this._deliveryQueue)),this.onDidPaste=this._onDidPaste.event,this._onMouseUp=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseUp=this._onMouseUp.event,this._onMouseDown=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseDown=this._onMouseDown.event,this._onMouseDrag=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseDrag=this._onMouseDrag.event,this._onMouseDrop=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseDrop=this._onMouseDrop.event,this._onMouseDropCanceled=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseDropCanceled=this._onMouseDropCanceled.event,this._onDropIntoEditor=this._register(new Y(this._contributions,this._deliveryQueue)),this.onDropIntoEditor=this._onDropIntoEditor.event,this._onContextMenu=this._register(new Y(this._contributions,this._deliveryQueue)),this.onContextMenu=this._onContextMenu.event,this._onMouseMove=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseMove=this._onMouseMove.event,this._onMouseLeave=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseLeave=this._onMouseLeave.event,this._onMouseWheel=this._register(new Y(this._contributions,this._deliveryQueue)),this.onMouseWheel=this._onMouseWheel.event,this._onKeyUp=this._register(new Y(this._contributions,this._deliveryQueue)),this.onKeyUp=this._onKeyUp.event,this._onKeyDown=this._register(new Y(this._contributions,this._deliveryQueue)),this.onKeyDown=this._onKeyDown.event,this._onDidContentSizeChange=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidContentSizeChange=this._onDidContentSizeChange.event,this._onDidScrollChange=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidScrollChange=this._onDidScrollChange.event,this._onDidChangeViewZones=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeViewZones=this._onDidChangeViewZones.event,this._onDidChangeHiddenAreas=this._register(new r.vl({deliveryQueue:this._deliveryQueue})),this.onDidChangeHiddenAreas=this._onDidChangeHiddenAreas.event,this._actions=new Map,this._bannerDomNode=null,this._dropIntoEditorDecorations=this.createDecorationsCollection(),d.willCreateCodeEditor();const v=Object.assign({},i);let p;this._domElement=e,this._overflowWidgetsDomNode=v.overflowWidgetsDomNode,delete v.overflowWidgetsDomNode,this._id=++Z,this._decorationTypeKeysToIds={},this._decorationTypeSubtypes={},this._telemetryData=t.telemetryData,this._configuration=this._register(this._createConfiguration(t.isSimpleWidget||!1,v,u)),this._register(this._configuration.onDidChange((e=>{this._onDidChangeConfiguration.fire(e);const i=this._configuration.options;if(e.hasChanged(143)){const e=i.get(143);this._onDidLayoutChange.fire(e)}}))),this._contextKeyService=this._register(l.createScoped(this._domElement)),this._notificationService=g,this._codeEditorService=d,this._commandService=a,this._themeService=c,this._register(new $(this,this._contextKeyService)),this._register(new J(this,this._contextKeyService,f)),this._instantiationService=o.createChild(new E.a([R.fN,this._contextKeyService])),this._modelData=null,this._focusTracker=new X(e),this._register(this._focusTracker.onChange((()=>{this._editorWidgetFocus.setValue(this._focusTracker.hasFocus())}))),this._contentWidgets={},this._overlayWidgets={},this._glyphMarginWidgets={},p=Array.isArray(t.contributions)?t.contributions:h.dS.getEditorContributions(),this._contributions.initialize(this,p,this._instantiationService);for(const n of h.dS.getEditorActions()){if(this._actions.has(n.id)){(0,s.dz)(new Error("Cannot have two actions with the same id ".concat(n.id)));continue}const e=new C.f(n.id,n.label,n.alias,null!==(_=n.precondition)&&void 0!==_?_:void 0,(()=>this._instantiationService.invokeFunction((e=>Promise.resolve(n.runEditorCommand(e,this,null))))),this._contextKeyService);this._actions.set(e.id,e)}const b=()=>!this._configuration.options.get(90)&&this._configuration.options.get(36).enabled;this._register(new n.pN(this._domElement,{onDragEnter:()=>{},onDragOver:e=>{if(!b())return;const i=this.getTargetAtClientPoint(e.clientX,e.clientY);(null===i||void 0===i?void 0:i.position)&&this.showDropIndicatorAt(i.position)},onDrop:e=>j(this,void 0,void 0,(function*(){if(!b())return;if(this.removeDropIndicator(),!e.dataTransfer)return;const i=this.getTargetAtClientPoint(e.clientX,e.clientY);(null===i||void 0===i?void 0:i.position)&&this._onDropIntoEditor.fire({position:i.position,event:e})})),onDragLeave:()=>{this.removeDropIndicator()},onDragEnd:()=>{this.removeDropIndicator()}})),this._codeEditorService.addCodeEditor(this)}writeScreenReaderContent(e){var i;null===(i=this._modelData)||void 0===i||i.view.writeScreenReaderContent(e)}_createConfiguration(e,i,t){return new l.g(e,i,this._domElement,t)}getId(){return this.getEditorType()+":"+this._id}getEditorType(){return b._.ICodeEditor}dispose(){this._codeEditorService.removeCodeEditor(this),this._focusTracker.dispose(),this._actions.clear(),this._contentWidgets={},this._overlayWidgets={},this._removeDecorationTypes(),this._postDetachModelCleanup(this._detachModel()),this._onDidDispose.fire(),super.dispose()}invokeWithinContext(e){return this._instantiationService.invokeFunction(e)}updateOptions(e){this._configuration.updateOptions(e||{})}getOptions(){return this._configuration.options}getOption(e){return this._configuration.options.get(e)}getRawOptions(){return this._configuration.getRawOptions()}getOverflowWidgetsDomNode(){return this._overflowWidgetsDomNode}getConfiguredWordAtPosition(e){return this._modelData?V.z.getWordAtPosition(this._modelData.model,this._configuration.options.get(129),e):null}getValue(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!this._modelData)return"";const i=!(!e||!e.preserveBOM);let t=0;return e&&e.lineEnding&&"\n"===e.lineEnding?t=1:e&&e.lineEnding&&"\r\n"===e.lineEnding&&(t=2),this._modelData.model.getValue(t,i)}setValue(e){this._modelData&&this._modelData.model.setValue(e)}getModel(){return this._modelData?this._modelData.model:null}setModel(){const e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(null===this._modelData&&null===e)return;if(this._modelData&&this._modelData.model===e)return;const i=this.hasTextFocus(),t=this._detachModel();this._attachModel(e),i&&this.hasModel()&&this.focus();const o={oldModelUrl:t?t.uri:null,newModelUrl:e?e.uri:null};this._removeDecorationTypes(),this._onDidChangeModel.fire(o),this._postDetachModelCleanup(t),this._contributions.onAfterModelAttached()}_removeDecorationTypes(){if(this._decorationTypeKeysToIds={},this._decorationTypeSubtypes){for(const e in this._decorationTypeSubtypes){const i=this._decorationTypeSubtypes[e];for(const t in i)this._removeDecorationType(e+"-"+t)}this._decorationTypeSubtypes={}}}getVisibleRanges(){return this._modelData?this._modelData.viewModel.getVisibleRanges():[]}getVisibleRangesPlusViewportAboveBelow(){return this._modelData?this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow():[]}getWhitespaces(){return this._modelData?this._modelData.viewModel.viewLayout.getWhitespaces():[]}static _getVerticalOffsetAfterPosition(e,i,t,o){const n=e.model.validatePosition({lineNumber:i,column:t}),s=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);return e.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(s.lineNumber,o)}getTopForLineNumber(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?B._getVerticalOffsetForPosition(this._modelData,e,1,i):-1}getTopForPosition(e,i){return this._modelData?B._getVerticalOffsetForPosition(this._modelData,e,i,!1):-1}static _getVerticalOffsetForPosition(e,i,t){let o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const n=e.model.validatePosition({lineNumber:i,column:t}),s=e.viewModel.coordinatesConverter.convertModelPositionToViewPosition(n);return e.viewModel.viewLayout.getVerticalOffsetForLineNumber(s.lineNumber,o)}getBottomForLineNumber(e){let i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this._modelData?B._getVerticalOffsetAfterPosition(this._modelData,e,1,i):-1}setHiddenAreas(e,i){var t;null===(t=this._modelData)||void 0===t||t.viewModel.setHiddenAreas(e.map((e=>v.Q.lift(e))),i)}getVisibleColumnFromPosition(e){if(!this._modelData)return e.column;const i=this._modelData.model.validatePosition(e),t=this._modelData.model.getOptions().tabSize;return f.A.visibleColumnFromColumn(this._modelData.model.getLineContent(i.lineNumber),i.column,t)+1}getPosition(){return this._modelData?this._modelData.viewModel.getPosition():null}setPosition(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";if(this._modelData){if(!_.y.isIPosition(e))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,[{selectionStartLineNumber:e.lineNumber,selectionStartColumn:e.column,positionLineNumber:e.lineNumber,positionColumn:e.column}])}}_sendRevealRange(e,i,t,o){if(!this._modelData)return;if(!v.Q.isIRange(e))throw new Error("Invalid arguments");const n=this._modelData.model.validateRange(e),s=this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(n);this._modelData.viewModel.revealRange("api",t,s,i,o)}revealLine(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,0,i)}revealLineInCenter(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,1,i)}revealLineInCenterIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,2,i)}revealLineNearTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealLine(e,5,i)}_revealLine(e,i,t){if("number"!==typeof e)throw new Error("Invalid arguments");this._sendRevealRange(new v.Q(e,1,e,1),i,!1,t)}revealPosition(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,0,!0,i)}revealPositionInCenter(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,1,!0,i)}revealPositionInCenterIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,2,!0,i)}revealPositionNearTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealPosition(e,5,!0,i)}_revealPosition(e,i,t,o){if(!_.y.isIPosition(e))throw new Error("Invalid arguments");this._sendRevealRange(new v.Q(e.lineNumber,e.column,e.lineNumber,e.column),i,t,o)}getSelection(){return this._modelData?this._modelData.viewModel.getSelection():null}getSelections(){return this._modelData?this._modelData.viewModel.getSelections():null}setSelection(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";const t=p.L.isISelection(e),o=v.Q.isIRange(e);if(!t&&!o)throw new Error("Invalid arguments");if(t)this._setSelectionImpl(e,i);else if(o){const t={selectionStartLineNumber:e.startLineNumber,selectionStartColumn:e.startColumn,positionLineNumber:e.endLineNumber,positionColumn:e.endColumn};this._setSelectionImpl(t,i)}}_setSelectionImpl(e,i){if(!this._modelData)return;const t=new p.L(e.selectionStartLineNumber,e.selectionStartColumn,e.positionLineNumber,e.positionColumn);this._modelData.viewModel.setSelections(i,[t])}revealLines(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,0,t)}revealLinesInCenter(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,1,t)}revealLinesInCenterIfOutsideViewport(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,2,t)}revealLinesNearTop(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._revealLines(e,i,5,t)}_revealLines(e,i,t,o){if("number"!==typeof e||"number"!==typeof i)throw new Error("Invalid arguments");this._sendRevealRange(new v.Q(e,1,i,1),t,!1,o)}revealRange(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._revealRange(e,t?1:0,o,i)}revealRangeInCenter(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,1,!0,i)}revealRangeInCenterIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,2,!0,i)}revealRangeNearTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,5,!0,i)}revealRangeNearTopIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,6,!0,i)}revealRangeAtTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._revealRange(e,3,!0,i)}_revealRange(e,i,t,o){if(!v.Q.isIRange(e))throw new Error("Invalid arguments");this._sendRevealRange(v.Q.lift(e),i,t,o)}setSelections(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api",t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(this._modelData){if(!e||0===e.length)throw new Error("Invalid arguments");for(let i=0,t=e.length;i<t;i++)if(!p.L.isISelection(e[i]))throw new Error("Invalid arguments");this._modelData.viewModel.setSelections(i,e,t)}}getContentWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getContentWidth():-1}getScrollWidth(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollWidth():-1}getScrollLeft(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollLeft():-1}getContentHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getContentHeight():-1}getScrollHeight(){return this._modelData?this._modelData.viewModel.viewLayout.getScrollHeight():-1}getScrollTop(){return this._modelData?this._modelData.viewModel.viewLayout.getCurrentScrollTop():-1}setScrollLeft(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollLeft:e},i)}}setScrollTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(this._modelData){if("number"!==typeof e)throw new Error("Invalid arguments");this._modelData.viewModel.viewLayout.setScrollPosition({scrollTop:e},i)}}setScrollPosition(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this._modelData&&this._modelData.viewModel.viewLayout.setScrollPosition(e,i)}hasPendingScrollAnimation(){return!!this._modelData&&this._modelData.viewModel.viewLayout.hasPendingScrollAnimation()}saveViewState(){if(!this._modelData)return null;const e=this._contributions.saveViewState();return{cursorState:this._modelData.viewModel.saveCursorState(),viewState:this._modelData.viewModel.saveState(),contributionsState:e}}restoreViewState(e){if(!this._modelData||!this._modelData.hasRealView)return;const i=e;if(i&&i.cursorState&&i.viewState){const e=i.cursorState;Array.isArray(e)?e.length>0&&this._modelData.viewModel.restoreCursorState(e):this._modelData.viewModel.restoreCursorState([e]),this._contributions.restoreViewState(i.contributionsState||{});const t=this._modelData.viewModel.reduceRestoreState(i.viewState);this._modelData.view.restoreState(t)}}handleInitialized(){var e;null===(e=this._getViewModel())||void 0===e||e.visibleLinesStabilized()}getContribution(e){return this._contributions.get(e)}getActions(){return Array.from(this._actions.values())}getSupportedActions(){let e=this.getActions();return e=e.filter((e=>e.isSupported())),e}getAction(e){return this._actions.get(e)||null}trigger(e,i,t){switch(t=t||{},i){case"compositionStart":return void this._startComposition();case"compositionEnd":return void this._endComposition(e);case"type":{const i=t;return void this._type(e,i.text||"")}case"replacePreviousChar":{const i=t;return void this._compositionType(e,i.text||"",i.replaceCharCnt||0,0,0)}case"compositionType":{const i=t;return void this._compositionType(e,i.text||"",i.replacePrevCharCnt||0,i.replaceNextCharCnt||0,i.positionDelta||0)}case"paste":{const i=t;return void this._paste(e,i.text||"",i.pasteOnNewLine||!1,i.multicursorText||null,i.mode||null)}case"cut":return void this._cut(e)}const o=this.getAction(i);o?Promise.resolve(o.run(t)).then(void 0,s.dz):this._modelData&&(this._triggerEditorCommand(e,i,t)||this._triggerCommand(i,t))}_triggerCommand(e,i){this._commandService.executeCommand(e,i)}_startComposition(){this._modelData&&(this._modelData.viewModel.startComposition(),this._onDidCompositionStart.fire())}_endComposition(e){this._modelData&&(this._modelData.viewModel.endComposition(e),this._onDidCompositionEnd.fire())}_type(e,i){this._modelData&&0!==i.length&&("keyboard"===e&&this._onWillType.fire(i),this._modelData.viewModel.type(i,e),"keyboard"===e&&this._onDidType.fire(i))}_compositionType(e,i,t,o,n){this._modelData&&this._modelData.viewModel.compositionType(i,t,o,n,e)}_paste(e,i,t,o,n){if(!this._modelData||0===i.length)return;const s=this._modelData.viewModel,r=s.getSelection().getStartPosition();s.paste(i,t,o,e);const d=s.getSelection().getStartPosition();"keyboard"===e&&this._onDidPaste.fire({range:new v.Q(r.lineNumber,r.column,d.lineNumber,d.column),languageId:n})}_cut(e){this._modelData&&this._modelData.viewModel.cut(e)}_triggerEditorCommand(e,i,t){const o=h.dS.getEditorCommand(i);return!!o&&((t=t||{}).source=e,this._instantiationService.invokeFunction((e=>{Promise.resolve(o.runEditorCommand(e,this,t)).then(void 0,s.dz)})),!0)}_getViewModel(){return this._modelData?this._modelData.viewModel:null}pushUndoStop(){return!!this._modelData&&(!this._configuration.options.get(90)&&(this._modelData.model.pushStackElement(),!0))}popUndoStop(){return!!this._modelData&&(!this._configuration.options.get(90)&&(this._modelData.model.popStackElement(),!0))}executeEdits(e,i,t){if(!this._modelData)return!1;if(this._configuration.options.get(90))return!1;let o;return o=t?Array.isArray(t)?()=>t:t:()=>null,this._modelData.viewModel.executeEdits(e,i,o),!0}executeCommand(e,i){this._modelData&&this._modelData.viewModel.executeCommand(i,e)}executeCommands(e,i){this._modelData&&this._modelData.viewModel.executeCommands(i,e)}createDecorationsCollection(e){return new ee(this,e)}changeDecorations(e){return this._modelData?this._modelData.model.changeDecorations(e,this._id):null}getLineDecorations(e){return this._modelData?this._modelData.model.getLineDecorations(e,this._id,(0,m.$C)(this._configuration.options)):null}getDecorationsInRange(e){return this._modelData?this._modelData.model.getDecorationsInRange(e,this._id,(0,m.$C)(this._configuration.options)):null}deltaDecorations(e,i){return this._modelData?0===e.length&&0===i.length?e:this._modelData.model.deltaDecorations(e,i,this._id):[]}removeDecorations(e){this._modelData&&0!==e.length&&this._modelData.model.changeDecorations((i=>{i.deltaDecorations(e,[])}))}removeDecorationsByType(e){const i=this._decorationTypeKeysToIds[e];i&&this.deltaDecorations(i,[]),this._decorationTypeKeysToIds.hasOwnProperty(e)&&delete this._decorationTypeKeysToIds[e],this._decorationTypeSubtypes.hasOwnProperty(e)&&delete this._decorationTypeSubtypes[e]}getLayoutInfo(){return this._configuration.options.get(143)}createOverviewRuler(e){return this._modelData&&this._modelData.hasRealView?this._modelData.view.createOverviewRuler(e):null}getContainerDomNode(){return this._domElement}getDomNode(){return this._modelData&&this._modelData.hasRealView?this._modelData.view.domNode.domNode:null}delegateVerticalScrollbarPointerDown(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateVerticalScrollbarPointerDown(e)}delegateScrollFromMouseWheelEvent(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.delegateScrollFromMouseWheelEvent(e)}layout(e){this._configuration.observeContainer(e),this.render()}focus(){this._modelData&&this._modelData.hasRealView&&this._modelData.view.focus()}hasTextFocus(){return!(!this._modelData||!this._modelData.hasRealView)&&this._modelData.view.isFocused()}hasWidgetFocus(){return this._focusTracker&&this._focusTracker.hasFocus()}addContentWidget(e){const i={widget:e,position:e.getPosition()};this._contentWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a content widget with the same id."),this._contentWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addContentWidget(i)}layoutContentWidget(e){const i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){const t=this._contentWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutContentWidget(t)}}removeContentWidget(e){const i=e.getId();if(this._contentWidgets.hasOwnProperty(i)){const e=this._contentWidgets[i];delete this._contentWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeContentWidget(e)}}addOverlayWidget(e){const i={widget:e,position:e.getPosition()};this._overlayWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting an overlay widget with the same id."),this._overlayWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addOverlayWidget(i)}layoutOverlayWidget(e){const i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){const t=this._overlayWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutOverlayWidget(t)}}removeOverlayWidget(e){const i=e.getId();if(this._overlayWidgets.hasOwnProperty(i)){const e=this._overlayWidgets[i];delete this._overlayWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeOverlayWidget(e)}}addGlyphMarginWidget(e){const i={widget:e,position:e.getPosition()};this._glyphMarginWidgets.hasOwnProperty(e.getId())&&console.warn("Overwriting a glyph margin widget with the same id."),this._glyphMarginWidgets[e.getId()]=i,this._modelData&&this._modelData.hasRealView&&this._modelData.view.addGlyphMarginWidget(i)}layoutGlyphMarginWidget(e){const i=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(i)){const t=this._glyphMarginWidgets[i];t.position=e.getPosition(),this._modelData&&this._modelData.hasRealView&&this._modelData.view.layoutGlyphMarginWidget(t)}}removeGlyphMarginWidget(e){const i=e.getId();if(this._glyphMarginWidgets.hasOwnProperty(i)){const e=this._glyphMarginWidgets[i];delete this._glyphMarginWidgets[i],this._modelData&&this._modelData.hasRealView&&this._modelData.view.removeGlyphMarginWidget(e)}}changeViewZones(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.change(e)}getTargetAtClientPoint(e,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getTargetAtClientPoint(e,i):null}getScrolledVisiblePosition(e){if(!this._modelData||!this._modelData.hasRealView)return null;const i=this._modelData.model.validatePosition(e),t=this._configuration.options,o=t.get(143);return{top:B._getVerticalOffsetForPosition(this._modelData,i.lineNumber,i.column)-this.getScrollTop(),left:this._modelData.view.getOffsetForColumn(i.lineNumber,i.column)+o.glyphMarginWidth+o.lineNumbersWidth+o.decorationsWidth-this.getScrollLeft(),height:t.get(66)}}getOffsetForColumn(e,i){return this._modelData&&this._modelData.hasRealView?this._modelData.view.getOffsetForColumn(e,i):-1}render(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._modelData&&this._modelData.hasRealView&&this._modelData.view.render(!0,e)}setAriaOptions(e){this._modelData&&this._modelData.hasRealView&&this._modelData.view.setAriaOptions(e)}applyFontInfo(e){(0,A.M)(e,this._configuration.options.get(50))}setBanner(e,i){this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),this._bannerDomNode=e,this._configuration.setReservedHeight(e?i:0),this._bannerDomNode&&this._domElement.prepend(this._bannerDomNode)}_attachModel(e){if(!e)return void(this._modelData=null);const i=[];this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._configuration.setIsDominatedByLongLines(e.isDominatedByLongLines()),this._configuration.setModelLineCount(e.getLineCount());const t=e.onBeforeAttached(),s=new M.J(this._id,this._configuration,e,O.K.create(),P.J.create(this._configuration.options),(e=>n.PG(e)),this.languageConfigurationService,this._themeService,t);i.push(e.onWillDispose((()=>this.setModel(null)))),i.push(s.onEvent((i=>{switch(i.kind){case 0:this._onDidContentSizeChange.fire(i);break;case 1:this._editorTextFocus.setValue(i.hasFocus);break;case 2:this._onDidScrollChange.fire(i);break;case 3:this._onDidChangeViewZones.fire();break;case 4:this._onDidChangeHiddenAreas.fire();break;case 5:this._onDidAttemptReadOnlyEdit.fire();break;case 6:{if(i.reachedMaxCursorCount){const e=this.getOption(79),i=o.kg("cursors.maximum","The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.",e);this._notificationService.prompt(I.AI.Warning,i,[{label:"Find and Replace",run:()=>{this._commandService.executeCommand("editor.action.startFindReplaceAction")}},{label:o.kg("goToSetting","Increase Multi Cursor Limit"),run:()=>{this._commandService.executeCommand("workbench.action.openSettings2",{query:"editor.multiCursorLimit"})}}])}const e=[];for(let o=0,s=i.selections.length;o<s;o++)e[o]=i.selections[o].getPosition();const t={position:e[0],secondaryPositions:e.slice(1),reason:i.reason,source:i.source};this._onDidChangeCursorPosition.fire(t);const n={selection:i.selections[0],secondarySelections:i.selections.slice(1),modelVersionId:i.modelVersionId,oldSelections:i.oldSelections,oldModelVersionId:i.oldModelVersionId,source:i.source,reason:i.reason};this._onDidChangeCursorSelection.fire(n);break}case 7:this._onDidChangeModelDecorations.fire(i.event);break;case 8:this._domElement.setAttribute("data-mode-id",e.getLanguageId()),this._onDidChangeModelLanguage.fire(i.event);break;case 9:this._onDidChangeModelLanguageConfiguration.fire(i.event);break;case 10:this._onDidChangeModelContent.fire(i.event);break;case 11:this._onDidChangeModelOptions.fire(i.event);break;case 12:this._onDidChangeModelTokens.fire(i.event)}})));const[r,d]=this._createView(s);if(d){this._domElement.appendChild(r.domNode.domNode);let i=Object.keys(this._contentWidgets);for(let e=0,t=i.length;e<t;e++){const t=i[e];r.addContentWidget(this._contentWidgets[t])}i=Object.keys(this._overlayWidgets);for(let e=0,t=i.length;e<t;e++){const t=i[e];r.addOverlayWidget(this._overlayWidgets[t])}i=Object.keys(this._glyphMarginWidgets);for(let e=0,t=i.length;e<t;e++){const t=i[e];r.addGlyphMarginWidget(this._glyphMarginWidgets[t])}r.render(!1,!0),r.domNode.domNode.setAttribute("data-uri",e.uri.toString())}this._modelData=new K(e,s,r,d,i,t)}_createView(e){let i;i=this.isSimpleWidget?{paste:(e,i,t,o)=>{this._paste("keyboard",e,i,t,o)},type:e=>{this._type("keyboard",e)},compositionType:(e,i,t,o)=>{this._compositionType("keyboard",e,i,t,o)},startComposition:()=>{this._startComposition()},endComposition:()=>{this._endComposition("keyboard")},cut:()=>{this._cut("keyboard")}}:{paste:(e,i,t,o)=>{const n={text:e,pasteOnNewLine:i,multicursorText:t,mode:o};this._commandService.executeCommand("paste",n)},type:e=>{const i={text:e};this._commandService.executeCommand("type",i)},compositionType:(e,i,t,o)=>{if(t||o){const n={text:e,replacePrevCharCnt:i,replaceNextCharCnt:t,positionDelta:o};this._commandService.executeCommand("compositionType",n)}else{const t={text:e,replaceCharCnt:i};this._commandService.executeCommand("replacePreviousChar",t)}},startComposition:()=>{this._commandService.executeCommand("compositionStart",{})},endComposition:()=>{this._commandService.executeCommand("compositionEnd",{})},cut:()=>{this._commandService.executeCommand("cut",{})}};const t=new u.o(e.coordinatesConverter);t.onKeyDown=e=>this._onKeyDown.fire(e),t.onKeyUp=e=>this._onKeyUp.fire(e),t.onContextMenu=e=>this._onContextMenu.fire(e),t.onMouseMove=e=>this._onMouseMove.fire(e),t.onMouseLeave=e=>this._onMouseLeave.fire(e),t.onMouseDown=e=>this._onMouseDown.fire(e),t.onMouseUp=e=>this._onMouseUp.fire(e),t.onMouseDrag=e=>this._onMouseDrag.fire(e),t.onMouseDrop=e=>this._onMouseDrop.fire(e),t.onMouseDropCanceled=e=>this._onMouseDropCanceled.fire(e),t.onMouseWheel=e=>this._onMouseWheel.fire(e);return[new g.S(i,this._configuration,this._themeService.getColorTheme(),e,t,this._overflowWidgetsDomNode,this._instantiationService),!0]}_postDetachModelCleanup(e){null===e||void 0===e||e.removeAllDecorationsWithOwnerId(this._id)}_detachModel(){if(!this._modelData)return null;const e=this._modelData.model,i=this._modelData.hasRealView?this._modelData.view.domNode.domNode:null;return this._modelData.dispose(),this._modelData=null,this._domElement.removeAttribute("data-mode-id"),i&&this._domElement.contains(i)&&this._domElement.removeChild(i),this._bannerDomNode&&this._domElement.contains(this._bannerDomNode)&&this._domElement.removeChild(this._bannerDomNode),e}_removeDecorationType(e){this._codeEditorService.removeDecorationType(e)}hasModel(){return null!==this._modelData}showDropIndicatorAt(e){const i=[{range:new v.Q(e.lineNumber,e.column,e.lineNumber,e.column),options:B.dropIntoEditorDecorationOptions}];this._dropIntoEditorDecorations.set(i),this.revealPosition(e,1)}removeDropIndicator(){this._dropIntoEditorDecorations.clear()}setContextValue(e,i){this._contextKeyService.createKey(e,i)}};G.dropIntoEditorDecorationOptions=D.kI.register({description:"workbench-dnd-target",className:"dnd-target"}),G=B=Q([z(3,N._Y),z(4,c.T),z(5,S.d),z(6,R.fN),z(7,T.Gy),z(8,I.Ot),z(9,x.j),z(10,W.JZ),z(11,F.u)],G);class q extends d.jG{constructor(e){super(),this._emitterOptions=e,this._onDidChangeToTrue=this._register(new r.vl(this._emitterOptions)),this.onDidChangeToTrue=this._onDidChangeToTrue.event,this._onDidChangeToFalse=this._register(new r.vl(this._emitterOptions)),this.onDidChangeToFalse=this._onDidChangeToFalse.event,this._value=0}setValue(e){const i=e?2:1;this._value!==i&&(this._value=i,2===this._value?this._onDidChangeToTrue.fire():1===this._value&&this._onDidChangeToFalse.fire())}}class Y extends r.vl{constructor(e,i){super({deliveryQueue:i}),this._contributions=e}fire(e){this._contributions.onBeforeInteractionEvent(),super.fire(e)}}class $ extends d.jG{constructor(e,i){super(),this._editor=e,i.createKey("editorId",e.getId()),this._editorSimpleInput=w.R.editorSimpleInput.bindTo(i),this._editorFocus=w.R.focus.bindTo(i),this._textInputFocus=w.R.textInputFocus.bindTo(i),this._editorTextFocus=w.R.editorTextFocus.bindTo(i),this._tabMovesFocus=w.R.tabMovesFocus.bindTo(i),this._editorReadonly=w.R.readOnly.bindTo(i),this._inDiffEditor=w.R.inDiffEditor.bindTo(i),this._editorColumnSelection=w.R.columnSelection.bindTo(i),this._hasMultipleSelections=w.R.hasMultipleSelections.bindTo(i),this._hasNonEmptySelection=w.R.hasNonEmptySelection.bindTo(i),this._canUndo=w.R.canUndo.bindTo(i),this._canRedo=w.R.canRedo.bindTo(i),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromConfig()))),this._register(this._editor.onDidChangeCursorSelection((()=>this._updateFromSelection()))),this._register(this._editor.onDidFocusEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorWidget((()=>this._updateFromFocus()))),this._register(this._editor.onDidFocusEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidBlurEditorText((()=>this._updateFromFocus()))),this._register(this._editor.onDidChangeModel((()=>this._updateFromModel()))),this._register(this._editor.onDidChangeConfiguration((()=>this._updateFromModel()))),this._register(U.M.onDidChangeTabFocus((e=>this._tabMovesFocus.set(e)))),this._updateFromConfig(),this._updateFromSelection(),this._updateFromFocus(),this._updateFromModel(),this._editorSimpleInput.set(this._editor.isSimpleWidget)}_updateFromConfig(){const e=this._editor.getOptions();this._tabMovesFocus.set(U.M.getTabFocusMode()),this._editorReadonly.set(e.get(90)),this._inDiffEditor.set(e.get(61)),this._editorColumnSelection.set(e.get(22))}_updateFromSelection(){const e=this._editor.getSelections();e?(this._hasMultipleSelections.set(e.length>1),this._hasNonEmptySelection.set(e.some((e=>!e.isEmpty())))):(this._hasMultipleSelections.reset(),this._hasNonEmptySelection.reset())}_updateFromFocus(){this._editorFocus.set(this._editor.hasWidgetFocus()&&!this._editor.isSimpleWidget),this._editorTextFocus.set(this._editor.hasTextFocus()&&!this._editor.isSimpleWidget),this._textInputFocus.set(this._editor.hasTextFocus())}_updateFromModel(){const e=this._editor.getModel();this._canUndo.set(Boolean(e&&e.canUndo())),this._canRedo.set(Boolean(e&&e.canRedo()))}}class J extends d.jG{constructor(e,i,t){super(),this._editor=e,this._contextKeyService=i,this._languageFeaturesService=t,this._langId=w.R.languageId.bindTo(i),this._hasCompletionItemProvider=w.R.hasCompletionItemProvider.bindTo(i),this._hasCodeActionsProvider=w.R.hasCodeActionsProvider.bindTo(i),this._hasCodeLensProvider=w.R.hasCodeLensProvider.bindTo(i),this._hasDefinitionProvider=w.R.hasDefinitionProvider.bindTo(i),this._hasDeclarationProvider=w.R.hasDeclarationProvider.bindTo(i),this._hasImplementationProvider=w.R.hasImplementationProvider.bindTo(i),this._hasTypeDefinitionProvider=w.R.hasTypeDefinitionProvider.bindTo(i),this._hasHoverProvider=w.R.hasHoverProvider.bindTo(i),this._hasDocumentHighlightProvider=w.R.hasDocumentHighlightProvider.bindTo(i),this._hasDocumentSymbolProvider=w.R.hasDocumentSymbolProvider.bindTo(i),this._hasReferenceProvider=w.R.hasReferenceProvider.bindTo(i),this._hasRenameProvider=w.R.hasRenameProvider.bindTo(i),this._hasSignatureHelpProvider=w.R.hasSignatureHelpProvider.bindTo(i),this._hasInlayHintsProvider=w.R.hasInlayHintsProvider.bindTo(i),this._hasDocumentFormattingProvider=w.R.hasDocumentFormattingProvider.bindTo(i),this._hasDocumentSelectionFormattingProvider=w.R.hasDocumentSelectionFormattingProvider.bindTo(i),this._hasMultipleDocumentFormattingProvider=w.R.hasMultipleDocumentFormattingProvider.bindTo(i),this._hasMultipleDocumentSelectionFormattingProvider=w.R.hasMultipleDocumentSelectionFormattingProvider.bindTo(i),this._isInWalkThrough=w.R.isInWalkThroughSnippet.bindTo(i);const o=()=>this._update();this._register(e.onDidChangeModel(o)),this._register(e.onDidChangeModelLanguage(o)),this._register(t.completionProvider.onDidChange(o)),this._register(t.codeActionProvider.onDidChange(o)),this._register(t.codeLensProvider.onDidChange(o)),this._register(t.definitionProvider.onDidChange(o)),this._register(t.declarationProvider.onDidChange(o)),this._register(t.implementationProvider.onDidChange(o)),this._register(t.typeDefinitionProvider.onDidChange(o)),this._register(t.hoverProvider.onDidChange(o)),this._register(t.documentHighlightProvider.onDidChange(o)),this._register(t.documentSymbolProvider.onDidChange(o)),this._register(t.referenceProvider.onDidChange(o)),this._register(t.renameProvider.onDidChange(o)),this._register(t.documentFormattingEditProvider.onDidChange(o)),this._register(t.documentRangeFormattingEditProvider.onDidChange(o)),this._register(t.signatureHelpProvider.onDidChange(o)),this._register(t.inlayHintsProvider.onDidChange(o)),o()}dispose(){super.dispose()}reset(){this._contextKeyService.bufferChangeEvents((()=>{this._langId.reset(),this._hasCompletionItemProvider.reset(),this._hasCodeActionsProvider.reset(),this._hasCodeLensProvider.reset(),this._hasDefinitionProvider.reset(),this._hasDeclarationProvider.reset(),this._hasImplementationProvider.reset(),this._hasTypeDefinitionProvider.reset(),this._hasHoverProvider.reset(),this._hasDocumentHighlightProvider.reset(),this._hasDocumentSymbolProvider.reset(),this._hasReferenceProvider.reset(),this._hasRenameProvider.reset(),this._hasDocumentFormattingProvider.reset(),this._hasDocumentSelectionFormattingProvider.reset(),this._hasSignatureHelpProvider.reset(),this._isInWalkThrough.reset()}))}_update(){const e=this._editor.getModel();e?this._contextKeyService.bufferChangeEvents((()=>{this._langId.set(e.getLanguageId()),this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(e)),this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(e)),this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(e)),this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(e)),this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(e)),this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(e)),this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(e)),this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(e)),this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(e)),this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(e)),this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(e)),this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(e)),this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(e)),this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(e)),this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(e)||this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(e)),this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(e).length+this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(e).length>1),this._isInWalkThrough.set(e.uri.scheme===a.ny.walkThroughSnippet)})):this.reset()}}class X extends d.jG{constructor(e){super(),this._onChange=this._register(new r.vl),this.onChange=this._onChange.event,this._hasFocus=!1,this._domFocusTracker=this._register(n.w5(e)),this._register(this._domFocusTracker.onDidFocus((()=>{this._hasFocus=!0,this._onChange.fire(void 0)}))),this._register(this._domFocusTracker.onDidBlur((()=>{this._hasFocus=!1,this._onChange.fire(void 0)})))}hasFocus(){return this._hasFocus}}class ee{get length(){return this._decorationIds.length}constructor(e,i){this._editor=e,this._decorationIds=[],this._isChangingDecorations=!1,Array.isArray(i)&&i.length>0&&this.set(i)}onDidChange(e,i,t){return this._editor.onDidChangeModelDecorations((t=>{this._isChangingDecorations||e.call(i,t)}),t)}getRange(e){return this._editor.hasModel()?e>=this._decorationIds.length?null:this._editor.getModel().getDecorationRange(this._decorationIds[e]):null}getRanges(){if(!this._editor.hasModel())return[];const e=this._editor.getModel(),i=[];for(const t of this._decorationIds){const o=e.getDecorationRange(t);o&&i.push(o)}return i}has(e){return this._decorationIds.includes(e.id)}clear(){0!==this._decorationIds.length&&this.set([])}set(e){try{this._isChangingDecorations=!0,this._editor.changeDecorations((i=>{this._decorationIds=i.deltaDecorations(this._decorationIds,e)}))}finally{this._isChangingDecorations=!1}return this._decorationIds}}const ie=encodeURIComponent("<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='"),te=encodeURIComponent("'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>");function oe(e){return ie+encodeURIComponent(e.toString())+te}const ne=encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" height="3" width="12"><g fill="'),se=encodeURIComponent('"><circle cx="1" cy="1" r="1"/><circle cx="5" cy="1" r="1"/><circle cx="9" cy="1" r="1"/></g></svg>');(0,T.zy)(((e,i)=>{const t=e.getColor(L.Rbi);t&&i.addRule(".monaco-editor .".concat("squiggly-error",' { background: url("data:image/svg+xml,',oe(t),'") repeat-x bottom left; }'));const o=e.getColor(L.Hng);o&&i.addRule(".monaco-editor .".concat("squiggly-warning",' { background: url("data:image/svg+xml,',oe(o),'") repeat-x bottom left; }'));const n=e.getColor(L.pOz);n&&i.addRule(".monaco-editor .".concat("squiggly-info",' { background: url("data:image/svg+xml,',oe(n),'") repeat-x bottom left; }'));const s=e.getColor(L.i61);s&&i.addRule(".monaco-editor .".concat("squiggly-hint",' { background: url("data:image/svg+xml,',ne+encodeURIComponent(s.toString())+se,'") no-repeat bottom left; }'));const r=e.getColor(y.yw);r&&i.addRule(".monaco-editor.showUnused .".concat("squiggly-inline-unnecessary"," { opacity: ",r.rgba.a,"; }"))}))},8879:(e,i,t)=>{var o=t(32605),n=t(62112),s=t(30050),r=t(32101),d=t(16119),a=t(72330),l=t(51413),h=t(35155),c=t(39587),g=t(66457),u=t(39686);class m extends h.L{constructor(){super({id:"diffEditor.toggleCollapseUnchangedRegions",title:{value:(0,l.kg)("toggleCollapseUnchangedRegions","Toggle Collapse Unchanged Regions"),original:"Toggle Collapse Unchanged Regions"},icon:n.W.map,toggled:u.M$.has("config.diffEditor.hideUnchangedRegions.enabled"),precondition:u.M$.has("isInDiffEditor"),menu:{when:u.M$.has("isInDiffEditor"),id:h.D8.EditorTitle,order:22,group:"navigation"}})}run(e){const i=e.get(g.pG),t=!i.getValue("diffEditor.hideUnchangedRegions.enabled");i.updateValue("diffEditor.hideUnchangedRegions.enabled",t)}}(0,h.ug)(m);class f extends h.L{constructor(){super({id:"diffEditor.toggleShowMovedCodeBlocks",title:{value:(0,l.kg)("toggleShowMovedCodeBlocks","Toggle Show Moved Code Blocks"),original:"Toggle Show Moved Code Blocks"},precondition:u.M$.has("isInDiffEditor")})}run(e){const i=e.get(g.pG),t=!i.getValue("diffEditor.experimental.showMoves");i.updateValue("diffEditor.experimental.showMoves",t)}}(0,h.ug)(f);class _ extends h.L{constructor(){super({id:"diffEditor.toggleUseInlineViewWhenSpaceIsLimited",title:{value:(0,l.kg)("toggleUseInlineViewWhenSpaceIsLimited","Toggle Use Inline View When Space Is Limited"),original:"Toggle Use Inline View When Space Is Limited"},precondition:u.M$.has("isInDiffEditor")})}run(e){const i=e.get(g.pG),t=!i.getValue("diffEditor.useInlineViewWhenSpaceIsLimited");i.updateValue("diffEditor.useInlineViewWhenSpaceIsLimited",t)}}(0,h.ug)(_),h.ZG.appendMenuItem(h.D8.EditorTitle,{command:{id:(new _).desc.id,title:(0,l.kg)("useInlineViewWhenSpaceIsLimited","Use Inline View When Space Is Limited"),toggled:u.M$.has("config.diffEditor.useInlineViewWhenSpaceIsLimited"),precondition:u.M$.has("isInDiffEditor")},order:11,group:"1_diff",when:u.M$.and(a.R.diffEditorRenderSideBySideInlineBreakpointReached,u.M$.has("isInDiffEditor"))}),h.ZG.appendMenuItem(h.D8.EditorTitle,{command:{id:(new f).desc.id,title:(0,l.kg)("showMoves","Show Moved Code Blocks"),icon:n.W.move,toggled:u.f1.create("config.diffEditor.experimental.showMoves",!0),precondition:u.M$.has("isInDiffEditor")},order:10,group:"1_diff",when:u.M$.has("isInDiffEditor")});const v={value:(0,l.kg)("diffEditor","Diff Editor"),original:"Diff Editor"};class p extends s.qO{constructor(){super({id:"diffEditor.switchSide",title:{value:(0,l.kg)("switchSide","Switch Side"),original:"Switch Side"},icon:n.W.arrowSwap,precondition:u.M$.has("isInDiffEditor"),f1:!0,category:v})}runEditorCommand(e,i,t){const o=M(e);if(o instanceof d.T){if(t&&t.dryRun)return{destinationSelection:o.mapToOtherSide().destinationSelection};o.switchSide()}}}(0,h.ug)(p);class C extends s.qO{constructor(){super({id:"diffEditor.exitCompareMove",title:{value:(0,l.kg)("exitCompareMove","Exit Compare Move"),original:"Exit Compare Move"},icon:n.W.close,precondition:a.R.comparingMovedCode,f1:!1,category:v,keybinding:{weight:1e4,primary:9}})}runEditorCommand(e,i){const t=M(e);t instanceof d.T&&t.exitCompareMove()}}(0,h.ug)(C);class b extends s.qO{constructor(){super({id:"diffEditor.collapseAllUnchangedRegions",title:{value:(0,l.kg)("collapseAllUnchangedRegions","Collapse All Unchanged Regions"),original:"Collapse All Unchanged Regions"},icon:n.W.fold,precondition:u.M$.has("isInDiffEditor"),f1:!0,category:v})}runEditorCommand(e,i){const t=M(e);t instanceof d.T&&t.collapseAllUnchangedRegions()}}(0,h.ug)(b);class w extends s.qO{constructor(){super({id:"diffEditor.showAllUnchangedRegions",title:{value:(0,l.kg)("showAllUnchangedRegions","Show All Unchanged Regions"),original:"Show All Unchanged Regions"},icon:n.W.unfold,precondition:u.M$.has("isInDiffEditor"),f1:!0,category:v})}runEditorCommand(e,i){const t=M(e);t instanceof d.T&&t.showAllUnchangedRegions()}}(0,h.ug)(w);const D={value:(0,l.kg)("accessibleDiffViewer","Accessible Diff Viewer"),original:"Accessible Diff Viewer"};class y extends h.L{constructor(){super({id:y.id,title:{value:(0,l.kg)("editor.action.accessibleDiffViewer.next","Go to Next Difference"),original:"Go to Next Difference"},category:D,precondition:u.M$.has("isInDiffEditor"),keybinding:{primary:65,weight:100},f1:!0})}run(e){const i=M(e);null===i||void 0===i||i.accessibleDiffViewerNext()}}y.id="editor.action.accessibleDiffViewer.next",h.ZG.appendMenuItem(h.D8.EditorTitle,{command:{id:y.id,title:(0,l.kg)("Open Accessible Diff Viewer","Open Accessible Diff Viewer"),precondition:u.M$.has("isInDiffEditor")},order:10,group:"2_diff",when:u.M$.and(a.R.accessibleDiffViewerVisible.negate(),u.M$.has("isInDiffEditor"))});class L extends h.L{constructor(){super({id:L.id,title:{value:(0,l.kg)("editor.action.accessibleDiffViewer.prev","Go to Previous Difference"),original:"Go to Previous Difference"},category:D,precondition:u.M$.has("isInDiffEditor"),keybinding:{primary:1089,weight:100},f1:!0})}run(e){const i=M(e);null===i||void 0===i||i.accessibleDiffViewerPrev()}}function M(e){var i;const t=e.get(r.T),n=t.listDiffEditors(),s=null!==(i=t.getFocusedCodeEditor())&&void 0!==i?i:t.getActiveCodeEditor();if(!s)return null;for(let o=0,r=n.length;o<r;o++){const e=n[o];if(e.getModifiedEditor().getId()===s.getId()||e.getOriginalEditor().getId()===s.getId())return e}const d=(0,o.bq)();if(d)for(const o of n){if(S(o.getContainerDomNode(),d))return o}return null}function S(e,i){let t=i;for(;t;){if(t===e)return!0;t=t.parentElement}return!1}L.id="editor.action.accessibleDiffViewer.prev",c.w.registerCommandAlias("editor.action.diffReview.next",y.id),(0,h.ug)(y),c.w.registerCommandAlias("editor.action.diffReview.prev",L.id),(0,h.ug)(L)},16119:(e,i,t)=>{t.d(i,{T:()=>at});var o=t(32605),n=t(21457),s=t(29591),r=t(48250),d=t(87766),a=t(96664),l=t(30050),h=t(32101),c=t(15683),g=t(28925),u=t(97567),m=t(89067),f=t(63169),_=t(61498),v=t(62112),p=t(70145),C=t(30381),b=t(25143),w=t(64020),D=t(89071);function y(e,i){const t=new d.Cm,o=e.createDecorationsCollection();return t.add((0,a.zL)({debugName:()=>"Apply decorations from ".concat(i.debugName)},(e=>{const t=i.read(e);o.set(t)}))),t.add({dispose:()=>{o.clear()}}),t}function L(e,i){return e.appendChild(i),(0,d.s)((()=>{e.removeChild(i)}))}class M extends d.jG{get width(){return this._width}get height(){return this._height}constructor(e,i){super(),this.elementSizeObserver=this._register(new D.u(e,i)),this._width=(0,a.FY)(this,this.elementSizeObserver.getWidth()),this._height=(0,a.FY)(this,this.elementSizeObserver.getHeight()),this._register(this.elementSizeObserver.onDidChange((e=>(0,a.Rn)((e=>{this._width.set(this.elementSizeObserver.getWidth(),e),this._height.set(this.elementSizeObserver.getHeight(),e)})))))}observe(e){this.elementSizeObserver.observe(e)}setAutomaticLayout(e){e?this.elementSizeObserver.startObserving():this.elementSizeObserver.stopObserving()}}function S(e,i){let t=e.get(),o=t,n=t;const s=(0,a.FY)("animatedValue",t);let r=-1;let d;function l(){const e=Date.now()-r;var i,a,h,c;n=Math.floor((a=o,h=t-o,(i=e)===(c=300)?a+h:h*(1-Math.pow(2,-10*i/c))+a)),e<300?d=requestAnimationFrame(l):n=t,s.set(n,void 0)}return i.add((0,a.Y)({createEmptyChangeSummary:()=>({animate:!1}),handleChange:(i,t)=>(i.didChange(e)&&(t.animate=t.animate||i.change),!0)},((i,s)=>{void 0!==d&&(cancelAnimationFrame(d),d=void 0),o=n,t=e.read(i),r=Date.now()-(s.animate?0:300),l()}))),s}class R extends d.jG{constructor(e,i,t){super(),this._register(new E(e,t)),this._register(I(t,{height:i.actualHeight,top:i.actualTop}))}}class N{get afterLineNumber(){return this._afterLineNumber.get()}constructor(e,i){this._afterLineNumber=e,this.heightInPx=i,this.domNode=document.createElement("div"),this._actualTop=(0,a.FY)(this,void 0),this._actualHeight=(0,a.FY)(this,void 0),this.actualTop=this._actualTop,this.actualHeight=this._actualHeight,this.showInHiddenAreas=!0,this.onChange=this._afterLineNumber,this.onDomNodeTop=e=>{this._actualTop.set(e,void 0)},this.onComputedHeight=e=>{this._actualHeight.set(e,void 0)}}}class E{constructor(e,i){this._editor=e,this._domElement=i,this._overlayWidgetId="managedOverlayWidget-".concat(E._counter++),this._overlayWidget={getId:()=>this._overlayWidgetId,getDomNode:()=>this._domElement,getPosition:()=>null},this._editor.addOverlayWidget(this._overlayWidget)}dispose(){this._editor.removeOverlayWidget(this._overlayWidget)}}function I(e,i){return(0,a.fm)((t=>{for(let[o,n]of Object.entries(i))n&&"object"===typeof n&&"read"in n&&(n=n.read(t)),"number"===typeof n&&(n="".concat(n,"px")),o=o.replace(/[A-Z]/g,(e=>"-"+e.toLowerCase())),e.style[o]=n}))}function T(e,i){return function(e,i){if((0,w.e)()){(0,a.yQ)("reload",(i=>(0,w.O)((t=>{if([...Object.values(t)].some((i=>e.includes(i))))return e=>(i(void 0),!0)})))).read(i)}}([e],i),e}function x(e,i,t){const o=new d.Cm,n=[];return o.add((0,a.fm)((s=>{const r=i.read(s),d=new Map,l=new Map;t&&t(!0),e.changeViewZones((e=>{for(const i of n)e.removeZone(i);n.length=0;for(const i of r){const t=e.addZone(i);n.push(t),d.set(i,t)}})),t&&t(!1),o.add((0,a.Y)({createEmptyChangeSummary:()=>[],handleChange(e,i){const t=l.get(e.changedObservable);return void 0!==t&&i.push(t),!0}},((i,o)=>{for(const e of r)e.onChange&&(l.set(e.onChange,d.get(e)),e.onChange.read(i));t&&t(!0),e.changeViewZones((e=>{for(const i of o)e.layoutZone(i)})),t&&t(!1)})))}))),o.add({dispose(){t&&t(!0),e.changeViewZones((e=>{for(const i of n)e.removeZone(i)})),t&&t(!1)}}),o}E._counter=0;class P extends b.Q{dispose(){super.dispose(!0)}}var O=t(81196),V=t(32499),W=t(75188),A=t(23525),F=t(99005),k=t(17475),H=t(63970),B=t(73957),U=t(98105),Q=t(95896),z=t(51413),j=t(41030),Z=t(39263),K=t(85514),G=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},q=function(e,i){return function(t,o){i(t,o,e)}},Y=function(e,i,t,o){return new(t||(t=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(i){s(i)}}function d(e){try{a(o.throw(e))}catch(i){s(i)}}function a(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(r,d)}a((o=o.apply(e,i||[])).next())}))};const $=(0,K.pU)("diff-review-insert",v.W.add,(0,z.kg)("accessibleDiffViewerInsertIcon","Icon for 'Insert' in accessible diff viewer.")),J=(0,K.pU)("diff-review-remove",v.W.remove,(0,z.kg)("accessibleDiffViewerRemoveIcon","Icon for 'Remove' in accessible diff viewer.")),X=(0,K.pU)("diff-review-close",v.W.close,(0,z.kg)("accessibleDiffViewerCloseIcon","Icon for 'Close' in accessible diff viewer."));let ee=class extends d.jG{constructor(e,i,t,o,n,s,r,d,l){super(),this._parentNode=e,this._visible=i,this._setVisible=t,this._canClose=o,this._width=n,this._height=s,this._diffs=r,this._editors=d,this._instantiationService=l,this.model=(0,a.rm)(this,((e,i)=>{const t=this._visible.read(e);if(this._parentNode.style.visibility=t?"visible":"hidden",!t)return null;const o=i.add(this._instantiationService.createInstance(ie,this._diffs,this._editors,this._setVisible,this._canClose));return{model:o,view:i.add(this._instantiationService.createInstance(le,this._parentNode,o,this._width,this._height,this._editors))}})),this._register((0,a.OI)(this.model))}next(){(0,a.Rn)((e=>{const i=this._visible.get();this._setVisible(!0,e),i&&this.model.get().model.nextGroup(e)}))}prev(){(0,a.Rn)((e=>{this._setVisible(!0,e),this.model.get().model.previousGroup(e)}))}close(){(0,a.Rn)((e=>{this._setVisible(!1,e)}))}};ee._ttPolicy=(0,g.H)("diffReview",{createHTML:e=>e}),ee=G([q(8,Z._Y)],ee);let ie=class extends d.jG{constructor(e,i,t,o,n){super(),this._diffs=e,this._editors=i,this._setVisible=t,this.canClose=o,this._audioCueService=n,this._groups=(0,a.FY)(this,[]),this._currentGroupIdx=(0,a.FY)(this,0),this._currentElementIdx=(0,a.FY)(this,0),this.groups=this._groups,this.currentGroup=this._currentGroupIdx.map(((e,i)=>this._groups.read(i)[e])),this.currentGroupIndex=this._currentGroupIdx,this.currentElement=this._currentElementIdx.map(((e,i)=>{var t;return null===(t=this.currentGroup.read(i))||void 0===t?void 0:t.lines[e]})),this._register((0,a.fm)((e=>{const i=this._diffs.read(e);if(!i)return void this._groups.set([],void 0);const t=function(e,i,t){const o=[];for(const n of(0,_.n)(e,((e,i)=>i.modified.startLineNumber-e.modified.endLineNumberExclusive<2*te))){const e=[];e.push(new se);const s=new V.M(Math.max(1,n[0].original.startLineNumber-te),Math.min(n[n.length-1].original.endLineNumberExclusive+te,i+1)),r=new V.M(Math.max(1,n[0].modified.startLineNumber-te),Math.min(n[n.length-1].modified.endLineNumberExclusive+te,t+1));(0,_.pN)(n,((i,t)=>{const o=new V.M(i?i.original.endLineNumberExclusive:s.startLineNumber,t?t.original.startLineNumber:s.endLineNumberExclusive),n=new V.M(i?i.modified.endLineNumberExclusive:r.startLineNumber,t?t.modified.startLineNumber:r.endLineNumberExclusive);o.forEach((i=>{e.push(new ae(i,n.startLineNumber+(i-o.startLineNumber)))})),t&&(t.original.forEach((i=>{e.push(new re(t,i))})),t.modified.forEach((i=>{e.push(new de(t,i))})))}));const d=n[0].modified.join(n[n.length-1].modified),a=n[0].original.join(n[n.length-1].original);o.push(new ne(new k.WL(d,a),e))}return o}(i,this._editors.original.getModel().getLineCount(),this._editors.modified.getModel().getLineCount());(0,a.Rn)((e=>{const i=this._editors.modified.getPosition();if(i){const o=t.findIndex((e=>(null===i||void 0===i?void 0:i.lineNumber)<e.range.modified.endLineNumberExclusive));-1!==o&&this._currentGroupIdx.set(o,e)}this._groups.set(t,e)}))}))),this._register((0,a.fm)((e=>{const i=this.currentElement.read(e);(null===i||void 0===i?void 0:i.type)===oe.Deleted?this._audioCueService.playAudioCue(j.gv.diffLineDeleted,{source:"accessibleDiffViewer.currentElementChanged"}):(null===i||void 0===i?void 0:i.type)===oe.Added&&this._audioCueService.playAudioCue(j.gv.diffLineInserted,{source:"accessibleDiffViewer.currentElementChanged"})}))),this._register((0,a.fm)((e=>{var i;const t=this.currentElement.read(e);if(t&&t.type!==oe.Header){const e=null!==(i=t.modifiedLineNumber)&&void 0!==i?i:t.diff.modified.startLineNumber;this._editors.modified.setSelection(F.Q.fromPositions(new A.y(e,1)))}})))}_goToGroupDelta(e,i){const t=this.groups.get();!t||t.length<=1||(0,a.PO)(i,(i=>{this._currentGroupIdx.set(W.L.ofLength(t.length).clipCyclic(this._currentGroupIdx.get()+e),i),this._currentElementIdx.set(0,i)}))}nextGroup(e){this._goToGroupDelta(1,e)}previousGroup(e){this._goToGroupDelta(-1,e)}_goToLineDelta(e){const i=this.currentGroup.get();!i||i.lines.length<=1||(0,a.Rn)((t=>{this._currentElementIdx.set(W.L.ofLength(i.lines.length).clip(this._currentElementIdx.get()+e),t)}))}goToNextLine(){this._goToLineDelta(1)}goToPreviousLine(){this._goToLineDelta(-1)}goToLine(e){const i=this.currentGroup.get();if(!i)return;const t=i.lines.indexOf(e);-1!==t&&(0,a.Rn)((e=>{this._currentElementIdx.set(t,e)}))}revealCurrentElementInEditor(){this._setVisible(!1,void 0);const e=this.currentElement.get();e&&(e.type===oe.Deleted?(this._editors.original.setSelection(F.Q.fromPositions(new A.y(e.originalLineNumber,1))),this._editors.original.revealLine(e.originalLineNumber),this._editors.original.focus()):(e.type!==oe.Header&&(this._editors.modified.setSelection(F.Q.fromPositions(new A.y(e.modifiedLineNumber,1))),this._editors.modified.revealLine(e.modifiedLineNumber)),this._editors.modified.focus()))}close(){this._setVisible(!1,void 0),this._editors.modified.focus()}};ie=G([q(4,j.C6)],ie);const te=3;var oe;!function(e){e[e.Header=0]="Header",e[e.Unchanged=1]="Unchanged",e[e.Deleted=2]="Deleted",e[e.Added=3]="Added"}(oe||(oe={}));class ne{constructor(e,i){this.range=e,this.lines=i}}class se{constructor(){this.type=oe.Header}}class re{constructor(e,i){this.diff=e,this.originalLineNumber=i,this.type=oe.Deleted,this.modifiedLineNumber=void 0}}class de{constructor(e,i){this.diff=e,this.modifiedLineNumber=i,this.type=oe.Added,this.originalLineNumber=void 0}}class ae{constructor(e,i){this.originalLineNumber=e,this.modifiedLineNumber=i,this.type=oe.Unchanged}}let le=class extends d.jG{constructor(e,i,t,n,s,r){super(),this._element=e,this._model=i,this._width=t,this._height=n,this._editors=s,this._languageService=r,this.domNode=this._element,this.domNode.className="diff-review monaco-editor-background";const l=document.createElement("div");l.className="diff-review-actions",this._actionBar=this._register(new u.E(l)),this._register((0,a.fm)((e=>{this._actionBar.clear(),this._model.canClose.read(e)&&this._actionBar.push(new f.rc("diffreview.close",(0,z.kg)("label.close","Close"),"close-diff-review "+p.L.asClassName(X),!0,(()=>Y(this,void 0,void 0,(function*(){return i.close()})))),{label:!1,icon:!0})}))),this._content=document.createElement("div"),this._content.className="diff-review-content",this._content.setAttribute("role","code"),this._scrollbar=this._register(new m.MU(this._content,{})),(0,o.Ln)(this.domNode,this._scrollbar.getDomNode(),l),this._register((0,d.s)((()=>{(0,o.Ln)(this.domNode)}))),this._register(I(this.domNode,{width:this._width,height:this._height})),this._register(I(this._content,{width:this._width,height:this._height})),this._register((0,a.yC)(((e,i)=>{this._model.currentGroup.read(e),this._render(i)}))),this._register((0,o.b2)(this.domNode,"keydown",(e=>{(e.equals(18)||e.equals(2066)||e.equals(530))&&(e.preventDefault(),this._model.goToNextLine()),(e.equals(16)||e.equals(2064)||e.equals(528))&&(e.preventDefault(),this._model.goToPreviousLine()),(e.equals(9)||e.equals(2057)||e.equals(521)||e.equals(1033))&&(e.preventDefault(),this._model.close()),(e.equals(10)||e.equals(3))&&(e.preventDefault(),this._model.revealCurrentElementInEditor())})))}_render(e){const i=this._editors.original.getOptions(),t=this._editors.modified.getOptions(),n=document.createElement("div");n.className="diff-review-table",n.setAttribute("role","list"),n.setAttribute("aria-label",(0,z.kg)("ariaLabel","Accessible Diff Viewer. Use arrow up and down to navigate.")),(0,C.M)(n,t.get(50)),(0,o.Ln)(this._content,n);const s=this._editors.original.getModel(),r=this._editors.modified.getModel();if(!s||!r)return;const d=s.getOptions(),l=r.getOptions(),h=t.get(66),c=this._model.currentGroup.get();for(const g of(null===c||void 0===c?void 0:c.lines)||[]){if(!c)break;let u;if(g.type===oe.Header){const e=document.createElement("div");e.className="diff-review-row",e.setAttribute("role","listitem");const i=c.range,t=this._model.currentGroupIndex.get(),o=this._model.groups.get().length,n=e=>0===e?(0,z.kg)("no_lines_changed","no lines changed"):1===e?(0,z.kg)("one_line_changed","1 line changed"):(0,z.kg)("more_lines_changed","{0} lines changed",e),s=n(i.original.length),r=n(i.modified.length);e.setAttribute("aria-label",(0,z.kg)({key:"header",comment:["This is the ARIA label for a git diff header.","A git diff header looks like this: @@ -154,12 +159,39 @@.","That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.","Variables 0 and 1 refer to the diff index out of total number of diffs.","Variables 2 and 4 will be numbers (a line number).",'Variables 3 and 5 will be "no lines changed", "1 line changed" or "X lines changed", localized separately.']},"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}",t+1,o,i.original.startLineNumber,s,i.modified.startLineNumber,r));const d=document.createElement("div");d.className="diff-review-cell diff-review-summary",d.appendChild(document.createTextNode("".concat(t+1,"/").concat(o,": @@ -").concat(i.original.startLineNumber,",").concat(i.original.length," +").concat(i.modified.startLineNumber,",").concat(i.modified.length," @@"))),e.appendChild(d),u=e}else u=this._createRow(g,h,this._width.get(),i,s,d,t,r,l);n.appendChild(u);const m=(0,a.un)((e=>this._model.currentElement.read(e)===g));e.add((0,a.fm)((e=>{const i=m.read(e);u.tabIndex=i?0:-1,i&&u.focus()}))),e.add((0,o.ko)(u,"focus",(()=>{this._model.goToLine(g)})))}this._scrollbar.scanDomNode()}_createRow(e,i,t,o,n,s,r,d,a){const l=o.get(143),h=l.glyphMarginWidth+l.lineNumbersWidth,c=r.get(143),g=10+c.glyphMarginWidth+c.lineNumbersWidth;let u="diff-review-row",m="";let f=null;switch(e.type){case oe.Added:u="diff-review-row line-insert",m=" char-insert",f=$;break;case oe.Deleted:u="diff-review-row line-delete",m=" char-delete",f=J}const _=document.createElement("div");_.style.minWidth=t+"px",_.className=u,_.setAttribute("role","listitem"),_.ariaLevel="";const v=document.createElement("div");v.className="diff-review-cell",v.style.height="".concat(i,"px"),_.appendChild(v);const C=document.createElement("span");C.style.width=h+"px",C.style.minWidth=h+"px",C.className="diff-review-line-number"+m,void 0!==e.originalLineNumber?C.appendChild(document.createTextNode(String(e.originalLineNumber))):C.innerText="\xa0",v.appendChild(C);const b=document.createElement("span");b.style.width=g+"px",b.style.minWidth=g+"px",b.style.paddingRight="10px",b.className="diff-review-line-number"+m,void 0!==e.modifiedLineNumber?b.appendChild(document.createTextNode(String(e.modifiedLineNumber))):b.innerText="\xa0",v.appendChild(b);const w=document.createElement("span");if(w.className="diff-review-spacer",f){const e=document.createElement("span");e.className=p.L.asClassName(f),e.innerText="\xa0\xa0",w.appendChild(e)}else w.innerText="\xa0\xa0";let D;if(v.appendChild(w),void 0!==e.modifiedLineNumber){let i=this._getLineHtml(d,r,a.tabSize,e.modifiedLineNumber,this._languageService.languageIdCodec);ee._ttPolicy&&(i=ee._ttPolicy.createHTML(i)),v.insertAdjacentHTML("beforeend",i),D=d.getLineContent(e.modifiedLineNumber)}else{let i=this._getLineHtml(n,o,s.tabSize,e.originalLineNumber,this._languageService.languageIdCodec);ee._ttPolicy&&(i=ee._ttPolicy.createHTML(i)),v.insertAdjacentHTML("beforeend",i),D=n.getLineContent(e.originalLineNumber)}0===D.length&&(D=(0,z.kg)("blankLine","blank"));let y="";switch(e.type){case oe.Unchanged:y=e.originalLineNumber===e.modifiedLineNumber?(0,z.kg)({key:"unchangedLine",comment:["The placeholders are contents of the line and should not be translated."]},"{0} unchanged line {1}",D,e.originalLineNumber):(0,z.kg)("equalLine","{0} original line {1} modified line {2}",D,e.originalLineNumber,e.modifiedLineNumber);break;case oe.Added:y=(0,z.kg)("insertLine","+ {0} modified line {1}",D,e.modifiedLineNumber);break;case oe.Deleted:y=(0,z.kg)("deleteLine","- {0} original line {1}",D,e.originalLineNumber)}return _.setAttribute("aria-label",y),_}_getLineHtml(e,i,t,o,n){const s=e.getLineContent(o),r=i.get(50),d=B.f.createEmpty(s,n),a=Q.qL.isBasicASCII(s,e.mightContainNonBasicASCII()),l=Q.qL.containsRTL(s,a,e.mightContainRTL());return(0,U.Md)(new U.zL(r.isMonospace&&!i.get(33),r.canUseHalfwidthRightwardsArrow,s,!1,a,l,0,d,[],t,0,r.spaceWidth,r.middotWidth,r.wsmiddotWidth,i.get(116),i.get(98),i.get(93),i.get(51)!==O.Bc.OFF,null)).html}};le=G([q(5,H.L)],le);var he=t(58348),ce=t(15739);const ge=(0,K.pU)("diff-insert",v.W.add,(0,z.kg)("diffInsertIcon","Line decoration for inserts in the diff editor.")),ue=(0,K.pU)("diff-remove",v.W.remove,(0,z.kg)("diffRemoveIcon","Line decoration for removals in the diff editor.")),me=ce.kI.register({className:"line-insert",description:"line-insert",isWholeLine:!0,linesDecorationsClassName:"insert-sign "+p.L.asClassName(ge),marginClassName:"gutter-insert"}),fe=ce.kI.register({className:"line-delete",description:"line-delete",isWholeLine:!0,linesDecorationsClassName:"delete-sign "+p.L.asClassName(ue),marginClassName:"gutter-delete"}),_e=ce.kI.register({className:"line-insert",description:"line-insert",isWholeLine:!0,marginClassName:"gutter-insert"}),ve=ce.kI.register({className:"line-delete",description:"line-delete",isWholeLine:!0,marginClassName:"gutter-delete"}),pe=ce.kI.register({className:"char-insert",description:"char-insert",shouldFillLineOnLineBreak:!0}),Ce=ce.kI.register({className:"char-insert",description:"char-insert",isWholeLine:!0}),be=ce.kI.register({className:"char-insert diff-range-empty",description:"char-insert diff-range-empty"}),we=ce.kI.register({className:"char-delete",description:"char-delete",shouldFillLineOnLineBreak:!0}),De=ce.kI.register({className:"char-delete",description:"char-delete",isWholeLine:!0}),ye=ce.kI.register({className:"char-delete diff-range-empty",description:"char-delete diff-range-empty"}),Le=ce.kI.register({description:"diff-editor-arrow-revert-change",glyphMarginHoverMessage:new he.Bc(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown((0,z.kg)("revertChangeHoverMessage","Click to revert change")),glyphMarginClassName:"arrow-revert-change "+p.L.asClassName(v.W.arrowRight),zIndex:10001});class Me extends d.jG{constructor(e,i,t,o,n){super(),this._rootElement=e,this._diffModel=i,this._originalEditorLayoutInfo=t,this._modifiedEditorLayoutInfo=o,this._editors=n,this._originalScrollTop=(0,a.y0)(this._editors.original.onDidScrollChange,(()=>this._editors.original.getScrollTop())),this._modifiedScrollTop=(0,a.y0)(this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollTop())),this._viewZonesChanged=(0,a.yQ)("onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this.width=(0,a.FY)(this,0),this._modifiedViewZonesChangedSignal=(0,a.yQ)("modified.onDidChangeViewZones",this._editors.modified.onDidChangeViewZones),this._originalViewZonesChangedSignal=(0,a.yQ)("original.onDidChangeViewZones",this._editors.original.onDidChangeViewZones),this._state=(0,a.rm)(((e,i)=>{var t;this._element.replaceChildren();const o=this._diffModel.read(e),n=null===(t=null===o||void 0===o?void 0:o.diff.read(e))||void 0===t?void 0:t.movedTexts;if(!n||0===n.length)return void this.width.set(0,void 0);this._viewZonesChanged.read(e);const s=this._originalEditorLayoutInfo.read(e),r=this._modifiedEditorLayoutInfo.read(e);if(!s||!r)return void this.width.set(0,void 0);this._modifiedViewZonesChangedSignal.read(e),this._originalViewZonesChangedSignal.read(e);const d=n.map((i=>{function t(e,i){return(i.getTopForLineNumber(e.startLineNumber,!0)+i.getTopForLineNumber(e.endLineNumberExclusive,!0))/2}const o=t(i.lineRangeMapping.original,this._editors.original),n=this._originalScrollTop.read(e),s=t(i.lineRangeMapping.modified,this._editors.modified),r=o-n,d=s-this._modifiedScrollTop.read(e),a=Math.min(o,s),l=Math.max(o,s);return{range:new W.L(a,l),from:r,to:d,fromWithoutScroll:o,toWithoutScroll:s,move:i}}));d.sort((0,_.nH)((0,_.VE)((e=>e.fromWithoutScroll>e.toWithoutScroll),_.TS),(0,_.VE)((e=>e.fromWithoutScroll>e.toWithoutScroll?e.fromWithoutScroll:-e.toWithoutScroll),_.U9)));const l=Se.compute(d.map((e=>e.range))),h=s.verticalScrollbarWidth,c=10*(l.getTrackCount()-1)+20,g=h+c+(r.contentLeft-Me.movedCodeBlockPadding);let u=0;for(const m of d){const e=h+10+10*l.getTrack(u),t=15,n=15,s=g,d=r.glyphMarginWidth+r.lineNumbersWidth,c=18,f=document.createElementNS("http://www.w3.org/2000/svg","rect");f.classList.add("arrow-rectangle"),f.setAttribute("x","".concat(s-d)),f.setAttribute("y","".concat(m.to-c/2)),f.setAttribute("width","".concat(d)),f.setAttribute("height","".concat(c)),this._element.appendChild(f);const _=document.createElementNS("http://www.w3.org/2000/svg","g"),v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("d","M ".concat(0," ",m.from," L ").concat(e," ").concat(m.from," L ").concat(e," ").concat(m.to," L ").concat(s-n," ").concat(m.to)),v.setAttribute("fill","none"),_.appendChild(v);const p=document.createElementNS("http://www.w3.org/2000/svg","polygon");p.classList.add("arrow"),i.add((0,a.fm)((e=>{v.classList.toggle("currentMove",m.move===o.activeMovedText.read(e)),p.classList.toggle("currentMove",m.move===o.activeMovedText.read(e))}))),p.setAttribute("points","".concat(s-n,",").concat(m.to-t/2," ").concat(s,",").concat(m.to," ").concat(s-n,",").concat(m.to+t/2)),_.appendChild(p),this._element.appendChild(_),u++}this.width.set(c,void 0)})),this._element=document.createElementNS("http://www.w3.org/2000/svg","svg"),this._element.setAttribute("class","moved-blocks-lines"),this._rootElement.appendChild(this._element),this._register((0,d.s)((()=>this._element.remove()))),this._register((0,a.fm)((e=>{const i=this._originalEditorLayoutInfo.read(e),t=this._modifiedEditorLayoutInfo.read(e);i&&t&&(this._element.style.left="".concat(i.width-i.verticalScrollbarWidth,"px"),this._element.style.height="".concat(i.height,"px"),this._element.style.width="".concat(i.verticalScrollbarWidth+i.contentLeft-Me.movedCodeBlockPadding+this.width.read(e),"px"))}))),this._register((0,a.OI)(this._state));const s=(0,a.un)((e=>{const i=this._diffModel.read(e),t=null===i||void 0===i?void 0:i.diff.read(e);return t?t.movedTexts.map((e=>({move:e,original:new N((0,a.lk)(e.lineRangeMapping.original.startLineNumber-1),18),modified:new N((0,a.lk)(e.lineRangeMapping.modified.startLineNumber-1),18)}))):[]}));this._register(x(this._editors.original,s.map((e=>e.map((e=>e.original)))))),this._register(x(this._editors.modified,s.map((e=>e.map((e=>e.modified)))))),this._register((0,a.yC)(((e,i)=>{const t=s.read(e);for(const o of t)i.add(new Re(this._editors.original,o.original,o.move,"original",this._diffModel.get())),i.add(new Re(this._editors.modified,o.modified,o.move,"modified",this._diffModel.get()))})));const r=(0,a.y0)(this._editors.original.onDidChangeCursorPosition,(()=>this._editors.original.getPosition())),l=(0,a.y0)(this._editors.modified.onDidChangeCursorPosition,(()=>this._editors.modified.getPosition())),h=(0,a.yQ)("original.onDidFocusEditorWidget",(e=>this._editors.original.onDidFocusEditorWidget((()=>setTimeout((()=>e(void 0)),0))))),c=(0,a.yQ)("modified.onDidFocusEditorWidget",(e=>this._editors.modified.onDidFocusEditorWidget((()=>setTimeout((()=>e(void 0)),0)))));let g="modified";this._register((0,a.Y)({createEmptyChangeSummary:()=>{},handleChange:(e,i)=>(e.didChange(h)&&(g="original"),e.didChange(c)&&(g="modified"),!0)},(e=>{h.read(e),c.read(e);const i=this._diffModel.read(e);if(!i)return;const t=i.diff.read(e);let o;if(t&&"original"===g){const i=r.read(e);i&&(o=t.movedTexts.find((e=>e.lineRangeMapping.original.contains(i.lineNumber))))}if(t&&"modified"===g){const i=l.read(e);i&&(o=t.movedTexts.find((e=>e.lineRangeMapping.modified.contains(i.lineNumber))))}o!==i.movedTextToCompare.get()&&i.movedTextToCompare.set(void 0,void 0),i.setActiveMovedText(o)})))}}Me.movedCodeBlockPadding=4;class Se{static compute(e){const i=[],t=[];for(const o of e){let e=i.findIndex((e=>!e.intersectsStrict(o)));if(-1===e){const t=6;i.length>=t?e=(0,n.oU)(i,(0,_.VE)((e=>e.intersectWithRangeLength(o)),_.U9)):(e=i.length,i.push(new W.h))}i[e].addRange(o),t.push(e)}return new Se(i.length,t)}constructor(e,i){this._trackCount=e,this.trackPerLineIdx=i}getTrack(e){return this.trackPerLineIdx[e]}getTrackCount(){return this._trackCount}}class Re extends R{constructor(e,i,t,n,s){const r=(0,o.h)("div.diff-hidden-lines-widget");super(e,i,r.root),this._editor=e,this._move=t,this._kind=n,this._diffModel=s,this._nodes=(0,o.h)("div.diff-moved-code-block",{style:{marginRight:"4px"}},[(0,o.h)("div.text-content@textContent"),(0,o.h)("div.action-bar@actionBar")]),r.root.appendChild(this._nodes.root);const d=(0,a.y0)(this._editor.onDidLayoutChange,(()=>this._editor.getLayoutInfo()));let l;this._register(I(this._nodes.root,{paddingRight:d.map((e=>e.verticalScrollbarWidth))})),l=t.changes.length>0?"original"===this._kind?(0,z.kg)("codeMovedToWithChanges","Code moved with changes to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,z.kg)("codeMovedFromWithChanges","Code moved with changes from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1):"original"===this._kind?(0,z.kg)("codeMovedTo","Code moved to line {0}-{1}",this._move.lineRangeMapping.modified.startLineNumber,this._move.lineRangeMapping.modified.endLineNumberExclusive-1):(0,z.kg)("codeMovedFrom","Code moved from line {0}-{1}",this._move.lineRangeMapping.original.startLineNumber,this._move.lineRangeMapping.original.endLineNumberExclusive-1);const h=this._register(new u.E(this._nodes.actionBar,{highlightToggledItems:!0})),c=new f.rc("",l,"",!1);h.push(c,{icon:!1,label:!0});const g=new f.rc("","Compare",p.L.asClassName(v.W.compareChanges),!0,(()=>{this._editor.focus(),this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get()===t?void 0:this._move,void 0)}));this._register((0,a.fm)((e=>{const i=this._diffModel.movedTextToCompare.read(e)===t;g.checked=i}))),h.push(g,{icon:!1,label:!0})}}class Ne extends d.jG{constructor(e,i,t){super(),this._editors=e,this._diffModel=i,this._options=t,this._decorations=(0,a.un)(this,(e=>{var i;const t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.diff.read(e);if(!t)return null;const o=this._diffModel.read(e).movedTextToCompare.read(e),n=this._options.renderIndicators.read(e),s=this._options.showEmptyDecorations.read(e),r=[],d=[];if(!o)for(const l of t.mappings){if(l.lineRangeMapping.original.isEmpty||r.push({range:l.lineRangeMapping.original.toInclusiveRange(),options:n?fe:ve}),l.lineRangeMapping.modified.isEmpty||d.push({range:l.lineRangeMapping.modified.toInclusiveRange(),options:n?me:_e}),l.lineRangeMapping.modified.isEmpty||l.lineRangeMapping.original.isEmpty)l.lineRangeMapping.original.isEmpty||r.push({range:l.lineRangeMapping.original.toInclusiveRange(),options:De}),l.lineRangeMapping.modified.isEmpty||d.push({range:l.lineRangeMapping.modified.toInclusiveRange(),options:Ce});else for(const e of l.lineRangeMapping.innerChanges||[])l.lineRangeMapping.original.contains(e.originalRange.startLineNumber)&&r.push({range:e.originalRange,options:e.originalRange.isEmpty()&&s?ye:we}),l.lineRangeMapping.modified.contains(e.modifiedRange.startLineNumber)&&d.push({range:e.modifiedRange,options:e.modifiedRange.isEmpty()&&s?be:pe});l.lineRangeMapping.modified.isEmpty||!this._options.shouldRenderRevertArrows.read(e)||o||d.push({range:F.Q.fromPositions(new A.y(l.lineRangeMapping.modified.startLineNumber,1)),options:Le})}if(o)for(const l of o.changes){const e=l.original.toInclusiveRange();e&&r.push({range:e,options:n?fe:ve});const i=l.modified.toInclusiveRange();i&&d.push({range:i,options:n?me:_e});for(const t of l.innerChanges||[])r.push({range:t.originalRange,options:we}),d.push({range:t.modifiedRange,options:pe})}const a=this._diffModel.read(e).activeMovedText.read(e);for(const l of t.movedTexts)r.push({range:l.lineRangeMapping.original.toInclusiveRange(),options:{description:"moved",blockClassName:"movedOriginal"+(l===a?" currentMove":""),blockPadding:[Me.movedCodeBlockPadding,0,Me.movedCodeBlockPadding,Me.movedCodeBlockPadding]}}),d.push({range:l.lineRangeMapping.modified.toInclusiveRange(),options:{description:"moved",blockClassName:"movedModified"+(l===a?" currentMove":""),blockPadding:[4,0,4,4]}});return{originalDecorations:r,modifiedDecorations:d}})),this._register(y(this._editors.original,this._decorations.map((e=>(null===e||void 0===e?void 0:e.originalDecorations)||[])))),this._register(y(this._editors.modified,this._decorations.map((e=>(null===e||void 0===e?void 0:e.modifiedDecorations)||[]))))}}var Ee=t(83444);class Ie extends d.jG{constructor(e,i,t){super(),this._options=e,this._domNode=i,this._dimensions=t,this._sashRatio=(0,a.FY)(this,void 0),this.sashLeft=(0,a.un)(this,(e=>{var i;const t=null!==(i=this._sashRatio.read(e))&&void 0!==i?i:this._options.splitViewDefaultRatio.read(e);return this._computeSashLeft(t,e)})),this._sash=this._register(new Ee.m(this._domNode,{getVerticalSashTop:e=>0,getVerticalSashLeft:e=>this.sashLeft.get(),getVerticalSashHeight:e=>this._dimensions.height.get()},{orientation:0})),this._startSashPosition=void 0,this._register(this._sash.onDidStart((()=>{this._startSashPosition=this.sashLeft.get()}))),this._register(this._sash.onDidChange((e=>{const i=this._dimensions.width.get(),t=this._computeSashLeft((this._startSashPosition+(e.currentX-e.startX))/i,void 0);this._sashRatio.set(t/i,void 0)}))),this._register(this._sash.onDidEnd((()=>this._sash.layout()))),this._register(this._sash.onDidReset((()=>this._sashRatio.set(void 0,void 0)))),this._register((0,a.fm)((e=>{const i=this._options.enableSplitViewResizing.read(e);this._sash.state=i?3:0,this.sashLeft.read(e),this._dimensions.height.read(e),this._sash.layout()})))}setBoundarySashes(e){this._sash.orthogonalEndSash=e.bottom}_computeSashLeft(e,i){const t=this._dimensions.width.read(i),o=Math.floor(this._options.splitViewDefaultRatio.read(i)*t),n=this._options.enableSplitViewResizing.read(i)?Math.floor(e*t):o,s=100;return t<=200?o:n<s?s:n>t-s?t-s:n}}var Te=t(58250),xe=t(32031),Pe=t(47522);class Oe{remove(){var e;null===(e=this.parent)||void 0===e||e.children.delete(this.id)}static findId(e,i){let t;"string"===typeof e?t="".concat(i.id,"/").concat(e):(t="".concat(i.id,"/").concat(e.name),void 0!==i.children.get(t)&&(t="".concat(i.id,"/").concat(e.name,"_").concat(e.range.startLineNumber,"_").concat(e.range.startColumn)));let o=t;for(let n=0;void 0!==i.children.get(o);n++)o="".concat(t,"_").concat(n);return o}static empty(e){return 0===e.children.size}}class Ve extends Oe{constructor(e,i,t){super(),this.id=e,this.parent=i,this.symbol=t,this.children=new Map}}class We extends Oe{constructor(e,i,t,o){super(),this.id=e,this.parent=i,this.label=t,this.order=o,this.children=new Map}}class Ae extends Oe{static create(e,i,t){const o=new b.Q(t),n=new Ae(i.uri),r=e.ordered(i),d=r.map(((e,t)=>{var r;const d=Oe.findId("provider_".concat(t),n),a=new We(d,n,null!==(r=e.displayName)&&void 0!==r?r:"Unknown Outline Provider",t);return Promise.resolve(e.provideDocumentSymbols(i,o.token)).then((e=>{for(const i of e||[])Ae._makeOutlineElement(i,a);return a}),(e=>((0,s.M_)(e),a))).then((e=>{Oe.empty(e)?e.remove():n._groups.set(d,e)}))})),a=e.onDidChange((()=>{const t=e.ordered(i);(0,_.aI)(t,r)||o.cancel()}));return Promise.all(d).then((()=>o.token.isCancellationRequested&&!t.isCancellationRequested?Ae.create(e,i,t):n._compact())).finally((()=>{o.dispose(),a.dispose()}))}static _makeOutlineElement(e,i){const t=Oe.findId(e,i),o=new Ve(t,i,e);if(e.children)for(const n of e.children)Ae._makeOutlineElement(n,o);i.children.set(o.id,o)}constructor(e){super(),this.uri=e,this.id="root",this.parent=void 0,this._groups=new Map,this.children=new Map,this.id="root",this.parent=void 0}_compact(){let e=0;for(const[i,t]of this._groups)0===t.children.size?this._groups.delete(i):e+=1;if(1!==e)this.children=this._groups;else{const e=Pe.f.first(this._groups.values());for(const[,i]of e.children)i.parent=this,this.children.set(i.id,i)}return this}getTopLevelSymbols(){const e=[];for(const i of this.children.values())i instanceof Ve?e.push(i.symbol):e.push(...Pe.f.map(i.children.values(),(e=>e.symbol)));return e.sort(((e,i)=>F.Q.compareRangesUsingStarts(e.range,i.range)))}asListOfDocumentSymbols(){const e=this.getTopLevelSymbols(),i=[];return Ae._flattenDocumentSymbols(i,e,""),i.sort(((e,i)=>A.y.compare(F.Q.getStartPosition(e.range),F.Q.getStartPosition(i.range))||A.y.compare(F.Q.getEndPosition(i.range),F.Q.getEndPosition(e.range))))}static _flattenDocumentSymbols(e,i,t){for(const o of i)e.push({kind:o.kind,tags:o.tags,name:o.name,detail:o.detail,containerName:o.containerName||t,range:o.range,selectionRange:o.selectionRange,children:void 0}),o.children&&Ae._flattenDocumentSymbols(e,o.children,o.name)}}var Fe=t(91861),ke=t(63910),He=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},Be=function(e,i){return function(t,o){i(t,o,e)}},Ue=function(e,i,t,o){return new(t||(t=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(i){s(i)}}function d(e){try{a(o.throw(e))}catch(i){s(i)}}function a(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(r,d)}a((o=o.apply(e,i||[])).next())}))};let Qe=class extends d.jG{get isUpdatingViewZones(){return this._isUpdatingViewZones}constructor(e,i,t,o){super(),this._editors=e,this._diffModel=i,this._options=t,this._languageFeaturesService=o,this._isUpdatingViewZones=!1,this._modifiedOutlineSource=(0,a.rm)(this,((e,i)=>{const t=this._editors.modifiedModel.read(e);if(t)return i.add(new ze(this._languageFeaturesService,t))})),this._register(this._editors.original.onDidChangeCursorPosition((e=>{if(3===e.reason){const e=this._diffModel.get();(0,a.Rn)((i=>{for(const t of this._editors.original.getSelections()||[])null===e||void 0===e||e.ensureOriginalLineIsVisible(t.getStartPosition().lineNumber,i),null===e||void 0===e||e.ensureOriginalLineIsVisible(t.getEndPosition().lineNumber,i)}))}}))),this._register(this._editors.modified.onDidChangeCursorPosition((e=>{if(3===e.reason){const e=this._diffModel.get();(0,a.Rn)((i=>{for(const t of this._editors.modified.getSelections()||[])null===e||void 0===e||e.ensureModifiedLineIsVisible(t.getStartPosition().lineNumber,i),null===e||void 0===e||e.ensureModifiedLineIsVisible(t.getEndPosition().lineNumber,i)}))}})));const n=this._diffModel.map(((e,i)=>{var t,o;return 0===(null===(t=null===e||void 0===e?void 0:e.diff.read(i))||void 0===t?void 0:t.mappings.length)?[]:null!==(o=null===e||void 0===e?void 0:e.unchangedRegions.read(i))&&void 0!==o?o:[]})),s=(0,a.rm)(this,((e,i)=>{const t=this._modifiedOutlineSource.read(e);if(!t)return{origViewZones:[],modViewZones:[]};const o=[],s=[],r=this._options.renderSideBySide.read(e),d=n.read(e);for(const n of d)if(!n.shouldHideControls(e)){{const e=(0,a.un)((e=>n.getHiddenOriginalRange(e).startLineNumber-1)),s=new N(e,24);o.push(s),i.add(new je(this._editors.original,s,n,n.originalUnchangedRange,!r,t,(e=>this._diffModel.get().ensureModifiedLineIsVisible(e,void 0)),this._options))}{const e=(0,a.un)((e=>n.getHiddenModifiedRange(e).startLineNumber-1)),o=new N(e,24);s.push(o),i.add(new je(this._editors.modified,o,n,n.modifiedUnchangedRange,!1,t,(e=>this._diffModel.get().ensureModifiedLineIsVisible(e,void 0)),this._options))}}return{origViewZones:o,modViewZones:s}})),r={description:"unchanged lines",className:"diff-unchanged-lines",isWholeLine:!0},d={description:"Fold Unchanged",glyphMarginHoverMessage:new he.Bc(void 0,{isTrusted:!0,supportThemeIcons:!0}).appendMarkdown((0,z.kg)("foldUnchanged","Fold Unchanged Region")),glyphMarginClassName:"fold-unchanged "+p.L.asClassName(v.W.fold),zIndex:10001};this._register(y(this._editors.original,(0,a.un)((e=>{const i=n.read(e),t=i.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:r})));for(const o of i)o.shouldHideControls(e)&&t.push({range:F.Q.fromPositions(new A.y(o.originalLineNumber,1)),options:d});return t})))),this._register(y(this._editors.modified,(0,a.un)((e=>{const i=n.read(e),t=i.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:r})));for(const o of i)o.shouldHideControls(e)&&t.push({range:V.M.ofLength(o.modifiedLineNumber,1).toInclusiveRange(),options:d});return t})))),this._register(x(this._editors.original,s.map((e=>e.origViewZones)),(e=>this._isUpdatingViewZones=e))),this._register(x(this._editors.modified,s.map((e=>e.modViewZones)),(e=>this._isUpdatingViewZones=e))),this._register((0,a.fm)((e=>{const i=n.read(e);this._editors.original.setHiddenAreas(i.map((i=>i.getHiddenOriginalRange(e).toInclusiveRange())).filter(xe.O9)),this._editors.modified.setHiddenAreas(i.map((i=>i.getHiddenModifiedRange(e).toInclusiveRange())).filter(xe.O9))}))),this._register(this._editors.modified.onMouseUp((e=>{var i;if(!e.event.rightButton&&e.target.position&&(null===(i=e.target.element)||void 0===i?void 0:i.className.includes("fold-unchanged"))){const i=e.target.position.lineNumber,t=this._diffModel.get();if(!t)return;const o=t.unchangedRegions.get().find((e=>e.modifiedUnchangedRange.includes(i)));if(!o)return;o.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}}))),this._register(this._editors.original.onMouseUp((e=>{var i;if(!e.event.rightButton&&e.target.position&&(null===(i=e.target.element)||void 0===i?void 0:i.className.includes("fold-unchanged"))){const i=e.target.position.lineNumber,t=this._diffModel.get();if(!t)return;const o=t.unchangedRegions.get().find((e=>e.originalUnchangedRange.includes(i)));if(!o)return;o.collapseAll(void 0),e.event.stopPropagation(),e.event.preventDefault()}})))}};Qe=He([Be(3,ke.u)],Qe);let ze=class extends d.jG{constructor(e,i){super(),this._languageFeaturesService=e,this._textModel=i,this._currentModel=(0,a.FY)(this,void 0);const t=(0,a.yQ)("documentSymbolProvider.onDidChange",this._languageFeaturesService.documentSymbolProvider.onDidChange),o=(0,a.yQ)("_textModel.onDidChangeContent",r.Jh.debounce((e=>this._textModel.onDidChangeContent(e)),(()=>{}),100));this._register((0,a.yC)(((e,i)=>Ue(this,void 0,void 0,(function*(){t.read(e),o.read(e);const n=i.add(new P),s=yield Ae.create(this._languageFeaturesService.documentSymbolProvider,this._textModel,n.token);i.isDisposed||this._currentModel.set(s,void 0)})))))}getBreadcrumbItems(e,i){const t=this._currentModel.read(i);if(!t)return[];const o=t.asListOfDocumentSymbols().filter((i=>e.contains(i.range.startLineNumber)&&!e.contains(i.range.endLineNumber)));return o.sort((0,_.Hw)((0,_.VE)((e=>e.range.endLineNumber-e.range.startLineNumber),_.U9))),o.map((e=>({name:e.name,kind:e.kind,startLineNumber:e.range.startLineNumber})))}};ze=He([Be(0,ke.u)],ze);class je extends R{constructor(e,i,t,n,s,r,d,l){const h=(0,o.h)("div.diff-hidden-lines-widget");super(e,i,h.root),this._editor=e,this._unchangedRegion=t,this._unchangedRegionRange=n,this.hide=s,this._modifiedOutlineSource=r,this._revealModifiedHiddenLine=d,this._options=l,this._nodes=(0,o.h)("div.diff-hidden-lines",[(0,o.h)("div.top@top",{title:(0,z.kg)("diff.hiddenLines.top","Click or drag to show more above")}),(0,o.h)("div.center@content",{style:{display:"flex"}},[(0,o.h)("div@first",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexShrink:"0"}},[(0,o.$)("a",{title:(0,z.kg)("showAll","Show all"),role:"button",onclick:()=>{this._unchangedRegion.showAll(void 0)}},...(0,Te.n)("$(unfold)"))]),(0,o.h)("div@others",{style:{display:"flex",justifyContent:"center",alignItems:"center"}})]),(0,o.h)("div.bottom@bottom",{title:(0,z.kg)("diff.bottom","Click or drag to show more below"),role:"button"})]),h.root.appendChild(this._nodes.root);const c=(0,a.y0)(this._editor.onDidLayoutChange,(()=>this._editor.getLayoutInfo()));this.hide?(0,o.Ln)(this._nodes.first):this._register(I(this._nodes.first,{width:c.map((e=>e.contentLeft))}));const g=this._editor;this._register((0,o.ko)(this._nodes.top,"mousedown",(e=>{if(0!==e.button)return;this._nodes.top.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();const i=e.clientY;let t=!1;const n=this._unchangedRegion.visibleLineCountTop.get();this._unchangedRegion.isDragged.set(!0,void 0);const s=(0,o.ko)(window,"mousemove",(e=>{const o=e.clientY-i;t=t||Math.abs(o)>2;const s=Math.round(o/g.getOption(66)),r=Math.max(0,Math.min(n+s,this._unchangedRegion.getMaxVisibleLineCountTop()));this._unchangedRegion.visibleLineCountTop.set(r,void 0)})),r=(0,o.ko)(window,"mouseup",(e=>{t||this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0),this._nodes.top.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),this._unchangedRegion.isDragged.set(!1,void 0),s.dispose(),r.dispose()}))}))),this._register((0,o.ko)(this._nodes.bottom,"mousedown",(e=>{if(0!==e.button)return;this._nodes.bottom.classList.toggle("dragging",!0),this._nodes.root.classList.toggle("dragging",!0),e.preventDefault();const i=e.clientY;let t=!1;const n=this._unchangedRegion.visibleLineCountBottom.get();this._unchangedRegion.isDragged.set(!0,void 0);const s=(0,o.ko)(window,"mousemove",(e=>{const o=e.clientY-i;t=t||Math.abs(o)>2;const s=Math.round(o/g.getOption(66)),r=Math.max(0,Math.min(n-s,this._unchangedRegion.getMaxVisibleLineCountBottom())),d=g.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.visibleLineCountBottom.set(r,void 0);const a=g.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);g.setScrollTop(g.getScrollTop()+(a-d))})),r=(0,o.ko)(window,"mouseup",(e=>{if(this._unchangedRegion.isDragged.set(!1,void 0),!t){const e=g.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(),void 0);const i=g.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);g.setScrollTop(g.getScrollTop()+(i-e))}this._nodes.bottom.classList.toggle("dragging",!1),this._nodes.root.classList.toggle("dragging",!1),s.dispose(),r.dispose()}))}))),this._register((0,a.fm)((e=>{const i=[];if(!this.hide){const n=t.getHiddenModifiedRange(e).length,s=(0,z.kg)("hiddenLines","{0} hidden lines",n),r=(0,o.$)("span",{title:(0,z.kg)("diff.hiddenLines.expandAll","Double click to unfold")},s);r.addEventListener("dblclick",(e=>{0===e.button&&(e.preventDefault(),this._unchangedRegion.showAll(void 0))})),i.push(r);const d=this._unchangedRegion.getHiddenModifiedRange(e),a=this._modifiedOutlineSource.getBreadcrumbItems(d,e);if(a.length>0){i.push((0,o.$)("span",void 0,"\xa0\xa0|\xa0\xa0"));for(let e=0;e<a.length;e++){const t=a[e],n=Fe.gP.toIcon(t.kind),s=(0,o.h)("div.breadcrumb-item",{style:{display:"flex",alignItems:"center"}},[(0,Te.s)(n),"\xa0",t.name,...e===a.length-1?[]:[(0,Te.s)(v.W.chevronRight)]]).root;i.push(s),s.onclick=()=>{this._revealModifiedHiddenLine(t.startLineNumber)}}}}(0,o.Ln)(this._nodes.others,...i)})))}}var Ze,Ke=t(73990),Ge=t(56718),qe=t(40997),Ye=t(35296),$e=t(96819),Je=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},Xe=function(e,i){return function(t,o){i(t,o,e)}},ei=function(e,i,t,o){return new(t||(t=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(i){s(i)}}function d(e){try{a(o.throw(e))}catch(i){s(i)}}function a(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(r,d)}a((o=o.apply(e,i||[])).next())}))};let ii=Ze=class{constructor(e,i,t){this.editorWorkerService=i,this.telemetryService=t,this.onDidChangeEventEmitter=new r.vl,this.onDidChange=this.onDidChangeEventEmitter.event,this.diffAlgorithm="advanced",this.diffAlgorithmOnDidChangeSubscription=void 0,this.setOptions(e)}dispose(){var e;null===(e=this.diffAlgorithmOnDidChangeSubscription)||void 0===e||e.dispose()}computeDiff(e,i,t,o){var n,s;return ei(this,void 0,void 0,(function*(){if("string"!==typeof this.diffAlgorithm)return this.diffAlgorithm.computeDiff(e,i,t,o);if(1===e.getLineCount()&&1===e.getLineMaxColumn(1))return 1===i.getLineCount()&&1===i.getLineMaxColumn(1)?{changes:[],identical:!0,quitEarly:!1,moves:[]}:{changes:[new k.wm(new V.M(1,2),new V.M(1,i.getLineCount()+1),[new k.q6(e.getFullModelRange(),i.getFullModelRange())])],identical:!1,quitEarly:!1,moves:[]};const r=JSON.stringify([e.uri.toString(),i.uri.toString()]),d=JSON.stringify([e.id,i.id,e.getAlternativeVersionId(),i.getAlternativeVersionId(),JSON.stringify(t)]),a=Ze.diffCache.get(r);if(a&&a.context===d)return a.result;const l=qe.W.create(),h=yield this.editorWorkerService.computeDiff(e.uri,i.uri,t,this.diffAlgorithm),c=l.elapsed();if(this.telemetryService.publicLog2("diffEditor.computeDiff",{timeMs:c,timedOut:null===(n=null===h||void 0===h?void 0:h.quitEarly)||void 0===n||n,detectedMoves:t.computeMoves?null!==(s=null===h||void 0===h?void 0:h.moves.length)&&void 0!==s?s:0:-1}),o.isCancellationRequested)return{changes:[],identical:!1,quitEarly:!0,moves:[]};if(!h)throw new Error("no diff result available");return Ze.diffCache.size>10&&Ze.diffCache.delete(Ze.diffCache.keys().next().value),Ze.diffCache.set(r,{result:h,context:d}),h}))}setOptions(e){var i;let t=!1;e.diffAlgorithm&&this.diffAlgorithm!==e.diffAlgorithm&&(null===(i=this.diffAlgorithmOnDidChangeSubscription)||void 0===i||i.dispose(),this.diffAlgorithmOnDidChangeSubscription=void 0,this.diffAlgorithm=e.diffAlgorithm,"string"!==typeof e.diffAlgorithm&&(this.diffAlgorithmOnDidChangeSubscription=e.diffAlgorithm.onDidChange((()=>this.onDidChangeEventEmitter.fire()))),t=!0),t&&this.onDidChangeEventEmitter.fire()}};ii.diffCache=new Map,ii=Ze=Je([Xe(1,Ye.w),Xe(2,$e.k)],ii);var ti=t(42502),oi=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},ni=function(e,i){return function(t,o){i(t,o,e)}};const si=(0,Z.u1)("diffProviderFactoryService");let ri=class{constructor(e){this.instantiationService=e}createDiffProvider(e,i){return this.instantiationService.createInstance(ii,i)}};ri=oi([ni(0,Z._Y)],ri),(0,ti.v)(si,ri,1);var di=t(8874),ai=t(88370),li=t(72956),hi=t(99569),ci=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},gi=function(e,i){return function(t,o){i(t,o,e)}},ui=function(e,i,t,o){return new(t||(t=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(i){s(i)}}function d(e){try{a(o.throw(e))}catch(i){s(i)}}function a(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(r,d)}a((o=o.apply(e,i||[])).next())}))};let mi=class extends d.jG{setActiveMovedText(e){this._activeMovedText.set(e,void 0)}constructor(e,i,t,o){super(),this.model=e,this._options=i,this._editor=t,this._diffProviderFactoryService=o,this._isDiffUpToDate=(0,a.FY)(this,!1),this.isDiffUpToDate=this._isDiffUpToDate,this._diff=(0,a.FY)(this,void 0),this.diff=this._diff,this._unchangedRegions=(0,a.FY)(this,{regions:[],originalDecorationIds:[],modifiedDecorationIds:[]}),this.unchangedRegions=(0,a.un)(this,(e=>this._options.hideUnchangedRegions.read(e)?this._unchangedRegions.read(e).regions:((0,a.Rn)((e=>{for(const i of this._unchangedRegions.get().regions)i.collapseAll(e)})),[]))),this.movedTextToCompare=(0,a.FY)(this,void 0),this._activeMovedText=(0,a.FY)(this,void 0),this._hoveredMovedText=(0,a.FY)(this,void 0),this.activeMovedText=(0,a.un)(this,(e=>{var i,t;return null!==(t=null!==(i=this.movedTextToCompare.read(e))&&void 0!==i?i:this._hoveredMovedText.read(e))&&void 0!==t?t:this._activeMovedText.read(e)})),this._cancellationTokenSource=new b.Q,this._diffProvider=(0,a.un)(this,(e=>{const i=this._diffProviderFactoryService.createDiffProvider(this._editor,{diffAlgorithm:this._options.diffAlgorithm.read(e)});return{diffProvider:i,onChangeSignal:(0,a.yQ)("onDidChange",i.onDidChange)}})),this._register((0,d.s)((()=>this._cancellationTokenSource.cancel())));const n=(0,a.Yd)("contentChangedSignal"),s=this._register(new Ke.uC((()=>n.trigger(void 0)),200)),r=(i,t,o)=>{const n=vi.fromDiffs(i.changes,e.original.getLineCount(),e.modified.getLineCount(),this._options.hideUnchangedRegionsMinimumLineCount.read(o),this._options.hideUnchangedRegionsContextLineCount.read(o)),s=this._unchangedRegions.get(),r=s.originalDecorationIds.map((i=>e.original.getDecorationRange(i))).filter((e=>!!e)).map((e=>V.M.fromRange(e))),d=s.modifiedDecorationIds.map((i=>e.modified.getDecorationRange(i))).filter((e=>!!e)).map((e=>V.M.fromRange(e))),a=e.original.deltaDecorations(s.originalDecorationIds,n.map((e=>({range:e.originalUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}})))),l=e.modified.deltaDecorations(s.modifiedDecorationIds,n.map((e=>({range:e.modifiedUnchangedRange.toInclusiveRange(),options:{description:"unchanged"}}))));for(const e of n)for(let i=0;i<s.regions.length;i++)if(e.originalUnchangedRange.intersectsStrict(r[i])&&e.modifiedUnchangedRange.intersectsStrict(d[i])){e.setHiddenModifiedRange(s.regions[i].getHiddenModifiedRange(void 0),t);break}this._unchangedRegions.set({regions:n,originalDecorationIds:a,modifiedDecorationIds:l},t)};this._register(e.modified.onDidChangeContent((i=>{if(this._diff.get()){const t=ai.c.fromModelContentChanges(i.changes),o=Ci(this._lastDiff,t,e.original,e.modified);o&&(this._lastDiff=o,(0,a.Rn)((e=>{this._diff.set(fi.fromDiffResult(this._lastDiff),e),r(o,e);const i=this.movedTextToCompare.get();this.movedTextToCompare.set(i?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(i.lineRangeMapping.modified))):void 0,e)})))}s.schedule()}))),this._register(e.original.onDidChangeContent((i=>{if(this._diff.get()){const t=ai.c.fromModelContentChanges(i.changes),o=pi(this._lastDiff,t,e.original,e.modified);o&&(this._lastDiff=o,(0,a.Rn)((e=>{this._diff.set(fi.fromDiffResult(this._lastDiff),e),r(o,e);const i=this.movedTextToCompare.get();this.movedTextToCompare.set(i?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(i.lineRangeMapping.modified))):void 0,e)})))}s.schedule()}))),this._register((0,a.yC)(((i,t)=>ui(this,void 0,void 0,(function*(){var o,d;this._options.hideUnchangedRegionsMinimumLineCount.read(i),this._options.hideUnchangedRegionsContextLineCount.read(i),s.cancel(),n.read(i);const l=this._diffProvider.read(i);l.onChangeSignal.read(i),T(di.D8,i),T(hi.NC,i),this._isDiffUpToDate.set(!1,void 0);let h=[];t.add(e.original.onDidChangeContent((e=>{const i=ai.c.fromModelContentChanges(e.changes);h=(0,li.M)(h,i)})));let c=[];t.add(e.modified.onDidChangeContent((e=>{const i=ai.c.fromModelContentChanges(e.changes);c=(0,li.M)(c,i)})));let g=yield l.diffProvider.computeDiff(e.original,e.modified,{ignoreTrimWhitespace:this._options.ignoreTrimWhitespace.read(i),maxComputationTimeMs:this._options.maxComputationTimeMs.read(i),computeMoves:this._options.showMoves.read(i)},this._cancellationTokenSource.token);var u,m,f;this._cancellationTokenSource.token.isCancellationRequested||(u=g,m=e.original,f=e.modified,g={changes:u.changes.map((e=>new k.wm(e.original,e.modified,e.innerChanges?e.innerChanges.map((e=>function(e,i,t){let o=e.originalRange,n=e.modifiedRange;return(1!==o.endColumn||1!==n.endColumn)&&o.endColumn===i.getLineMaxColumn(o.endLineNumber)&&n.endColumn===t.getLineMaxColumn(n.endLineNumber)&&o.endLineNumber<i.getLineCount()&&n.endLineNumber<t.getLineCount()&&(o=o.setEndPosition(o.endLineNumber+1,1),n=n.setEndPosition(n.endLineNumber+1,1)),new k.q6(o,n)}(e,m,f))):void 0))),moves:u.moves,identical:u.identical,quitEarly:u.quitEarly},g=null!==(o=pi(g,h,e.original,e.modified))&&void 0!==o?o:g,g=null!==(d=Ci(g,c,e.original,e.modified))&&void 0!==d?d:g,(0,a.Rn)((e=>{r(g,e),this._lastDiff=g;const i=fi.fromDiffResult(g);this._diff.set(i,e),this._isDiffUpToDate.set(!0,e);const t=this.movedTextToCompare.get();this.movedTextToCompare.set(t?this._lastDiff.moves.find((e=>e.lineRangeMapping.modified.intersect(t.lineRangeMapping.modified))):void 0,e)})))})))))}ensureModifiedLineIsVisible(e,i){var t;if(0===(null===(t=this.diff.get())||void 0===t?void 0:t.mappings.length))return;const o=this._unchangedRegions.get().regions;for(const n of o)if(n.getHiddenModifiedRange(void 0).contains(e))return void n.showModifiedLine(e,i)}ensureOriginalLineIsVisible(e,i){var t;if(0===(null===(t=this.diff.get())||void 0===t?void 0:t.mappings.length))return;const o=this._unchangedRegions.get().regions;for(const n of o)if(n.getHiddenOriginalRange(void 0).contains(e))return void n.showOriginalLine(e,i)}waitForDiff(){return ui(this,void 0,void 0,(function*(){yield(0,a.oJ)(this.isDiffUpToDate,(e=>e))}))}serializeState(){return{collapsedRegions:this._unchangedRegions.get().regions.map((e=>({range:e.getHiddenModifiedRange(void 0).serialize()})))}}restoreSerializedState(e){const i=e.collapsedRegions.map((e=>V.M.deserialize(e.range))),t=this._unchangedRegions.get();(0,a.Rn)((e=>{for(const o of t.regions)for(const t of i)if(o.modifiedUnchangedRange.intersect(t)){o.setHiddenModifiedRange(t,e);break}}))}};mi=ci([gi(3,si)],mi);class fi{static fromDiffResult(e){return new fi(e.changes.map((e=>new _i(e))),e.moves||[],e.identical,e.quitEarly)}constructor(e,i,t,o){this.mappings=e,this.movedTexts=i,this.identical=t,this.quitEarly=o}}class _i{constructor(e){this.lineRangeMapping=e}}class vi{static fromDiffs(e,i,t,o,n){const s=k.wm.inverse(e,i,t),r=[];for(const d of s){let e=d.original.startLineNumber,s=d.modified.startLineNumber,a=d.original.length;const l=1===e&&1===s,h=e+a===i+1&&s+a===t+1;(l||h)&&a>=n+o?(l&&!h&&(a-=n),h&&!l&&(e+=n,s+=n,a-=n),r.push(new vi(e,s,a,0,0))):a>=2*n+o&&(e+=n,s+=n,a-=2*n,r.push(new vi(e,s,a,0,0)))}return r}get originalUnchangedRange(){return V.M.ofLength(this.originalLineNumber,this.lineCount)}get modifiedUnchangedRange(){return V.M.ofLength(this.modifiedLineNumber,this.lineCount)}constructor(e,i,t,o,n){this.originalLineNumber=e,this.modifiedLineNumber=i,this.lineCount=t,this._visibleLineCountTop=(0,a.FY)(this,0),this.visibleLineCountTop=this._visibleLineCountTop,this._visibleLineCountBottom=(0,a.FY)(this,0),this.visibleLineCountBottom=this._visibleLineCountBottom,this._shouldHideControls=(0,a.un)(this,(e=>this.visibleLineCountTop.read(e)+this.visibleLineCountBottom.read(e)===this.lineCount&&!this.isDragged.read(e))),this.isDragged=(0,a.FY)(this,!1),this._visibleLineCountTop.set(o,void 0),this._visibleLineCountBottom.set(n,void 0)}shouldHideControls(e){return this._shouldHideControls.read(e)}getHiddenOriginalRange(e){return V.M.ofLength(this.originalLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}getHiddenModifiedRange(e){return V.M.ofLength(this.modifiedLineNumber+this._visibleLineCountTop.read(e),this.lineCount-this._visibleLineCountTop.read(e)-this._visibleLineCountBottom.read(e))}setHiddenModifiedRange(e,i){const t=e.startLineNumber-this.modifiedLineNumber,o=this.modifiedLineNumber+this.lineCount-e.endLineNumberExclusive;this.setState(t,o,i)}getMaxVisibleLineCountTop(){return this.lineCount-this._visibleLineCountBottom.get()}getMaxVisibleLineCountBottom(){return this.lineCount-this._visibleLineCountTop.get()}showMoreAbove(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1?arguments[1]:void 0;const t=this.getMaxVisibleLineCountTop();this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+e,t),i)}showMoreBelow(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10,i=arguments.length>1?arguments[1]:void 0;const t=this.lineCount-this._visibleLineCountTop.get();this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+e,t),i)}showAll(e){this._visibleLineCountBottom.set(this.lineCount-this._visibleLineCountTop.get(),e)}showModifiedLine(e,i){const t=e+1-(this.modifiedLineNumber+this._visibleLineCountTop.get()),o=this.modifiedLineNumber-this._visibleLineCountBottom.get()+this.lineCount-e;t<o?this._visibleLineCountTop.set(this._visibleLineCountTop.get()+t,i):this._visibleLineCountBottom.set(this._visibleLineCountBottom.get()+o,i)}showOriginalLine(e,i){const t=e-this.originalLineNumber,o=this.originalLineNumber+this.lineCount-e;t<o?this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get()+o-t,this.getMaxVisibleLineCountTop()),i):this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get()+t-o,this.getMaxVisibleLineCountBottom()),i)}collapseAll(e){this._visibleLineCountTop.set(0,e),this._visibleLineCountBottom.set(0,e)}setState(e,i,t){e=Math.max(Math.min(e,this.lineCount),0),i=Math.max(Math.min(i,this.lineCount-e),0),this._visibleLineCountTop.set(e,t),this._visibleLineCountBottom.set(i,t)}}function pi(e,i,t,o){}function Ci(e,i,t,o){}var bi=t(66731),wi=function(e,i,t,o){return new(t||(t=Promise))((function(n,s){function r(e){try{a(o.next(e))}catch(i){s(i)}}function d(e){try{a(o.throw(e))}catch(i){s(i)}}function a(e){var i;e.done?n(e.value):(i=e.value,i instanceof t?i:new t((function(e){e(i)}))).then(r,d)}a((o=o.apply(e,i||[])).next())}))};class Di extends d.jG{get visibility(){return this._visibility}set visibility(e){this._visibility!==e&&(this._visibility=e,this._diffActions.style.visibility=e?"visible":"hidden")}constructor(e,i,t,n,s,r,d,a,l){super(),this._getViewZoneId=e,this._marginDomNode=i,this._modifiedEditor=t,this._diff=n,this._editor=s,this._viewLineCounts=r,this._originalTextModel=d,this._contextMenuService=a,this._clipboardService=l,this._visibility=!1,this._marginDomNode.style.zIndex="10",this._diffActions=document.createElement("div"),this._diffActions.className=p.L.asClassName(v.W.lightBulb)+" lightbulb-glyph",this._diffActions.style.position="absolute";const h=this._modifiedEditor.getOption(66);this._diffActions.style.right="0px",this._diffActions.style.visibility="hidden",this._diffActions.style.height="".concat(h,"px"),this._diffActions.style.lineHeight="".concat(h,"px"),this._marginDomNode.appendChild(this._diffActions);let c=0;const g=t.getOption(126)&&!bi.un,u=(e,i)=>{var o;this._contextMenuService.showContextMenu({domForShadowRoot:g&&null!==(o=t.getDomNode())&&void 0!==o?o:void 0,getAnchor:()=>({x:e,y:i}),getActions:()=>{const e=[],i=n.modified.isEmpty;e.push(new f.rc("diff.clipboard.copyDeletedContent",i?n.original.length>1?(0,z.kg)("diff.clipboard.copyDeletedLinesContent.label","Copy deleted lines"):(0,z.kg)("diff.clipboard.copyDeletedLinesContent.single.label","Copy deleted line"):n.original.length>1?(0,z.kg)("diff.clipboard.copyChangedLinesContent.label","Copy changed lines"):(0,z.kg)("diff.clipboard.copyChangedLinesContent.single.label","Copy changed line"),void 0,!0,(()=>wi(this,void 0,void 0,(function*(){const e=this._originalTextModel.getValueInRange(n.original.toExclusiveRange());yield this._clipboardService.writeText(e)}))))),n.original.length>1&&e.push(new f.rc("diff.clipboard.copyDeletedLineContent",i?(0,z.kg)("diff.clipboard.copyDeletedLineContent.label","Copy deleted line ({0})",n.original.startLineNumber+c):(0,z.kg)("diff.clipboard.copyChangedLineContent.label","Copy changed line ({0})",n.original.startLineNumber+c),void 0,!0,(()=>wi(this,void 0,void 0,(function*(){let e=this._originalTextModel.getLineContent(n.original.startLineNumber+c);if(""===e){e=0===this._originalTextModel.getEndOfLineSequence()?"\n":"\r\n"}yield this._clipboardService.writeText(e)})))));return t.getOption(90)||e.push(new f.rc("diff.inline.revertChange",(0,z.kg)("diff.inline.revertChange.label","Revert this change"),void 0,!0,(()=>wi(this,void 0,void 0,(function*(){this._editor.revert(this._diff)}))))),e},autoSelectFirstItem:!0})};this._register((0,o.b2)(this._diffActions,"mousedown",(e=>{const{top:i,height:t}=(0,o.BK)(this._diffActions),n=Math.floor(h/3);e.preventDefault(),u(e.posx,i+t+n)}))),this._register(t.onMouseMove((e=>{8!==e.target.type&&5!==e.target.type||e.target.detail.viewZoneId!==this._getViewZoneId()?this.visibility=!1:(c=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,h),this.visibility=!0)}))),this._register(t.onMouseDown((e=>{if(e.event.rightButton&&(8===e.target.type||5===e.target.type)){e.target.detail.viewZoneId===this._getViewZoneId()&&(e.event.preventDefault(),c=this._updateLightBulbPosition(this._marginDomNode,e.event.browserEvent.y,h),u(e.event.posx,e.event.posy+h))}})))}_updateLightBulbPosition(e,i,t){const{top:n}=(0,o.BK)(e),s=i-n,r=Math.floor(s/t),d=r*t;if(this._diffActions.style.top="".concat(d,"px"),this._viewLineCounts){let e=0;for(let i=0;i<this._viewLineCounts.length;i++)if(e+=this._viewLineCounts[i],r<e)return i}return r}}var yi=t(16724),Li=t(23033);const Mi=(0,g.H)("diffEditorWidget",{createHTML:e=>e});function Si(e,i,t,o){(0,C.M)(o,i.fontInfo);const n=t.length>0,s=new yi.fe(1e4);let r=0,d=0;const a=[];for(let c=0;c<e.lineTokens.length;c++){const o=c+1,l=e.lineTokens[c],h=e.lineBreakData[c],g=Li.d.filter(t,o,1,Number.MAX_SAFE_INTEGER);if(h){let t=0;for(const o of h.breakOffsets){const a=l.sliceAndInflate(t,o,0);r=Math.max(r,Ei(d,a,Li.d.extractWrapped(g,t,o),n,e.mightContainNonBasicASCII,e.mightContainRTL,i,s)),d++,t=o}a.push(h.breakOffsets.length)}else a.push(1),r=Math.max(r,Ei(d,l,g,n,e.mightContainNonBasicASCII,e.mightContainRTL,i,s)),d++}r+=i.scrollBeyondLastColumn;const l=s.build(),h=Mi?Mi.createHTML(l):l;o.innerHTML=h;return{heightInLines:d,minWidthInPx:r*i.typicalHalfwidthCharacterWidth,viewLineCounts:a}}class Ri{constructor(e,i,t,o){this.lineTokens=e,this.lineBreakData=i,this.mightContainNonBasicASCII=t,this.mightContainRTL=o}}class Ni{static fromEditor(e){var i;const t=e.getOptions(),o=t.get(50),n=t.get(143);return new Ni((null===(i=e.getModel())||void 0===i?void 0:i.getOptions().tabSize)||0,o,t.get(33),o.typicalHalfwidthCharacterWidth,t.get(103),t.get(66),n.decorationsWidth,t.get(116),t.get(98),t.get(93),t.get(51))}constructor(e,i,t,o,n,s,r,d,a,l,h){this.tabSize=e,this.fontInfo=i,this.disableMonospaceOptimizations=t,this.typicalHalfwidthCharacterWidth=o,this.scrollBeyondLastColumn=n,this.lineHeight=s,this.lineDecorationsWidth=r,this.stopRenderingLineAfter=d,this.renderWhitespace=a,this.renderControlCharacters=l,this.fontLigatures=h}}function Ei(e,i,t,o,n,s,r,d){d.appendString('<div class="view-line'),o||d.appendString(" char-delete"),d.appendString('" style="top:'),d.appendString(String(e*r.lineHeight)),d.appendString('px;width:1000000px;">');const a=i.getLineContent(),l=Q.qL.isBasicASCII(a,n),h=Q.qL.containsRTL(a,l,s),c=(0,U.UW)(new U.zL(r.fontInfo.isMonospace&&!r.disableMonospaceOptimizations,r.fontInfo.canUseHalfwidthRightwardsArrow,a,!1,l,h,0,i,t,r.tabSize,0,r.fontInfo.spaceWidth,r.fontInfo.middotWidth,r.fontInfo.wsmiddotWidth,r.stopRenderingLineAfter,r.renderWhitespace,r.renderControlCharacters,r.fontLigatures!==O.Bc.OFF,null),d);return d.appendString("</div>"),c.characterMapping.getHorizontalOffset(c.characterMapping.length)}var Ii=t(2826),Ti=t(6748),xi=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},Pi=function(e,i){return function(t,o){i(t,o,e)}};let Oi=class extends d.jG{constructor(e,i,t,n,s,r,l){super(),this._editors=e,this._diffModel=i,this._options=t,this._diffEditorWidget=n,this._canIgnoreViewZoneUpdateEvent=s,this._clipboardService=r,this._contextMenuService=l,this._originalTopPadding=(0,a.FY)(this,0),this._originalScrollOffset=(0,a.FY)(this,0),this._originalScrollOffsetAnimated=S(this._originalScrollOffset,this._store),this._modifiedTopPadding=(0,a.FY)(this,0),this._modifiedScrollOffset=(0,a.FY)(this,0),this._modifiedScrollOffsetAnimated=S(this._modifiedScrollOffset,this._store);let h=!1;const c=(0,a.FY)("state",0),g=this._register(new Ke.uC((()=>{c.set(c.get()+1,void 0)}),0));this._register(this._editors.original.onDidChangeViewZones((e=>{h||this._canIgnoreViewZoneUpdateEvent()||g.schedule()}))),this._register(this._editors.modified.onDidChangeViewZones((e=>{h||this._canIgnoreViewZoneUpdateEvent()||g.schedule()}))),this._register(this._editors.original.onDidChangeConfiguration((e=>{(e.hasChanged(144)||e.hasChanged(66))&&g.schedule()}))),this._register(this._editors.modified.onDidChangeConfiguration((e=>{(e.hasChanged(144)||e.hasChanged(66))&&g.schedule()})));const u=this._diffModel.map((e=>e?(0,a.y0)(e.model.original.onDidChangeTokens,(()=>2===e.model.original.tokenization.backgroundTokenizationState)):void 0)).map(((e,i)=>null===e||void 0===e?void 0:e.read(i))),m=new Set,f=new Set,_=(0,a.un)((e=>{const i=this._diffModel.read(e),t=null===i||void 0===i?void 0:i.diff.read(e);if(!i||!t)return null;c.read(e);const o=this._options.renderSideBySide.read(e);return Vi(this._editors.original,this._editors.modified,t.mappings,m,f,o)})),b=(0,a.un)((e=>{var i;const t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.movedTextToCompare.read(e);if(!t)return null;c.read(e);const o=t.changes.map((e=>new _i(e)));return Vi(this._editors.original,this._editors.modified,o,m,f,!0)}));function w(){const e=document.createElement("div");return e.className="diagonal-fill",e}const D=this._register(new d.Cm),y=(0,a.un)((e=>{var i,t,n,s,r,d,a,l;D.clear();const h=_.read(e)||[],c=[],g=[],m=this._modifiedTopPadding.read(e);m>0&&g.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:m,showInHiddenAreas:!0,suppressMouseDown:!0});const f=this._originalTopPadding.read(e);f>0&&c.push({afterLineNumber:0,domNode:document.createElement("div"),heightInPx:f,showInHiddenAreas:!0,suppressMouseDown:!0});const y=this._options.renderSideBySide.read(e),L=y||null===(i=this._editors.modified._getViewModel())||void 0===i?void 0:i.createLineBreaksComputer();if(L)for(const x of h)if(x.diff)for(let P=x.originalRange.startLineNumber;P<x.originalRange.endLineNumberExclusive;P++)null===L||void 0===L||L.addRequest(this._editors.original.getModel().getLineContent(P),null,null);const M=null!==(t=null===L||void 0===L?void 0:L.finalize())&&void 0!==t?t:[];let S=0;const R=this._editors.modified.getOption(66),N=null===(n=this._diffModel.read(e))||void 0===n?void 0:n.movedTextToCompare.read(e),E=null!==(r=null===(s=this._editors.original.getModel())||void 0===s?void 0:s.mightContainNonBasicASCII())&&void 0!==r&&r,I=null!==(a=null===(d=this._editors.original.getModel())||void 0===d?void 0:d.mightContainRTL())&&void 0!==a&&a,T=Ni.fromEditor(this._editors.modified);for(const O of h)if(O.diff&&!y){if(!O.originalRange.isEmpty){u.read(e);const W=document.createElement("div");W.classList.add("view-lines","line-delete","monaco-mouse-cursor-text");const A=new Ri(O.originalRange.mapToLineArray((e=>this._editors.original.getModel().tokenization.getLineTokens(e))),O.originalRange.mapToLineArray((e=>M[S++])),E,I),F=[];for(const U of O.diff.innerChanges||[])F.push(new Q.kI(U.originalRange.delta(-(O.diff.original.startLineNumber-1)),we.className,0));const k=Si(A,T,F,W),H=document.createElement("div");if(H.className="inline-deleted-margin-view-zone",(0,C.M)(H,T.fontInfo),this._options.renderIndicators.read(e))for(let z=0;z<k.heightInLines;z++){const j=document.createElement("div");j.className="delete-sign ".concat(p.L.asClassName(ue)),j.setAttribute("style","position:absolute;top:".concat(z*R,"px;width:").concat(T.lineDecorationsWidth,"px;height:").concat(R,"px;right:0;")),H.appendChild(j)}let B;D.add(new Di((()=>(0,xe.eU)(B)),H,this._editors.modified,O.diff,this._diffEditorWidget,k.viewLineCounts,this._editors.original.getModel(),this._contextMenuService,this._clipboardService));for(let Z=0;Z<k.viewLineCounts.length;Z++){const K=k.viewLineCounts[Z];K>1&&c.push({afterLineNumber:O.originalRange.startLineNumber+Z,domNode:w(),heightInPx:(K-1)*R,showInHiddenAreas:!0,suppressMouseDown:!0})}g.push({afterLineNumber:O.modifiedRange.startLineNumber-1,domNode:W,heightInPx:k.heightInLines*R,minWidthInPx:k.minWidthInPx,marginDomNode:H,setZoneId(e){B=e},showInHiddenAreas:!0,suppressMouseDown:!0})}const V=document.createElement("div");V.className="gutter-delete",c.push({afterLineNumber:O.originalRange.endLineNumberExclusive-1,domNode:w(),heightInPx:O.modifiedHeightInPx,marginDomNode:V,showInHiddenAreas:!0,suppressMouseDown:!0})}else{const G=O.modifiedHeightInPx-O.originalHeightInPx;if(G>0){if(null===N||void 0===N?void 0:N.lineRangeMapping.original.delta(-1).deltaLength(2).contains(O.originalRange.endLineNumberExclusive-1))continue;c.push({afterLineNumber:O.originalRange.endLineNumberExclusive-1,domNode:w(),heightInPx:G,showInHiddenAreas:!0,suppressMouseDown:!0})}else{if(null===N||void 0===N?void 0:N.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(O.modifiedRange.endLineNumberExclusive-1))continue;function q(){const e=document.createElement("div");return e.className="arrow-revert-change "+p.L.asClassName(v.W.arrowRight),(0,o.$)("div",{},e)}let Y;O.diff&&O.diff.modified.isEmpty&&this._options.shouldRenderRevertArrows.read(e)&&(Y=q()),g.push({afterLineNumber:O.modifiedRange.endLineNumberExclusive-1,domNode:w(),heightInPx:-G,marginDomNode:Y,showInHiddenAreas:!0,suppressMouseDown:!0})}}for(const $ of null!==(l=b.read(e))&&void 0!==l?l:[]){if(!(null===N||void 0===N?void 0:N.lineRangeMapping.original.intersect($.originalRange))||!(null===N||void 0===N?void 0:N.lineRangeMapping.modified.intersect($.modifiedRange)))continue;const J=$.modifiedHeightInPx-$.originalHeightInPx;J>0?c.push({afterLineNumber:$.originalRange.endLineNumberExclusive-1,domNode:w(),heightInPx:J,showInHiddenAreas:!0,suppressMouseDown:!0}):g.push({afterLineNumber:$.modifiedRange.endLineNumberExclusive-1,domNode:w(),heightInPx:-J,showInHiddenAreas:!0,suppressMouseDown:!0})}return{orig:c,mod:g}}));this._register((0,a.yC)((e=>{const i=Ge.D.capture(this._editors.modified),t=y.read(e);h=!0,this._editors.original.changeViewZones((e=>{for(const i of m)e.removeZone(i);m.clear();for(const i of t.orig){const t=e.addZone(i);i.setZoneId&&i.setZoneId(t),m.add(t)}})),this._editors.modified.changeViewZones((e=>{for(const i of f)e.removeZone(i);f.clear();for(const i of t.mod){const t=e.addZone(i);i.setZoneId&&i.setZoneId(t),f.add(t)}})),h=!1,i.restore(this._editors.modified)}))),this._register((0,d.s)((()=>{this._editors.original.changeViewZones((e=>{for(const i of m)e.removeZone(i);m.clear()})),this._editors.modified.changeViewZones((e=>{for(const i of f)e.removeZone(i);f.clear()}))})));let L=!1;this._register(this._editors.original.onDidScrollChange((e=>{e.scrollLeftChanged&&!L&&(L=!0,this._editors.modified.setScrollLeft(e.scrollLeft),L=!1)}))),this._register(this._editors.modified.onDidScrollChange((e=>{e.scrollLeftChanged&&!L&&(L=!0,this._editors.original.setScrollLeft(e.scrollLeft),L=!1)}))),this._originalScrollTop=(0,a.y0)(this._editors.original.onDidScrollChange,(()=>this._editors.original.getScrollTop())),this._modifiedScrollTop=(0,a.y0)(this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollTop())),this._register((0,a.fm)((e=>{const i=this._originalScrollTop.read(e)-(this._originalScrollOffsetAnimated.get()-this._modifiedScrollOffsetAnimated.read(e))-(this._originalTopPadding.get()-this._modifiedTopPadding.read(e));i!==this._editors.modified.getScrollTop()&&this._editors.modified.setScrollTop(i,1)}))),this._register((0,a.fm)((e=>{const i=this._modifiedScrollTop.read(e)-(this._modifiedScrollOffsetAnimated.get()-this._originalScrollOffsetAnimated.read(e))-(this._modifiedTopPadding.get()-this._originalTopPadding.read(e));i!==this._editors.original.getScrollTop()&&this._editors.original.setScrollTop(i,1)}))),this._register((0,a.fm)((e=>{var i;const t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.movedTextToCompare.read(e);let o=0;if(t){const e=this._editors.original.getTopForLineNumber(t.lineRangeMapping.original.startLineNumber,!0)-this._originalTopPadding.get();o=this._editors.modified.getTopForLineNumber(t.lineRangeMapping.modified.startLineNumber,!0)-this._modifiedTopPadding.get()-e}o>0?(this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(o,void 0)):o<0?(this._modifiedTopPadding.set(-o,void 0),this._originalTopPadding.set(0,void 0)):setTimeout((()=>{this._modifiedTopPadding.set(0,void 0),this._originalTopPadding.set(0,void 0)}),400),this._editors.modified.hasTextFocus()?this._originalScrollOffset.set(this._modifiedScrollOffset.get()-o,void 0,!0):this._modifiedScrollOffset.set(this._originalScrollOffset.get()+o,void 0,!0)})))}};function Vi(e,i,t,o,n,s){const r=new _.j3(Wi(e,o)),d=new _.j3(Wi(i,n)),a=e.getOption(66),l=i.getOption(66),h=[];let c=0,g=0;function u(e,i){for(;;){let t=r.peek(),o=d.peek();if(t&&t.lineNumber>=e&&(t=void 0),o&&o.lineNumber>=i&&(o=void 0),!t&&!o)break;const n=t?t.lineNumber-c:Number.MAX_VALUE,s=o?o.lineNumber-g:Number.MAX_VALUE;n<s?(r.dequeue(),o={lineNumber:t.lineNumber-c+g,heightInPx:0}):n>s?(d.dequeue(),t={lineNumber:o.lineNumber-g+c,heightInPx:0}):(r.dequeue(),d.dequeue()),h.push({originalRange:V.M.ofLength(t.lineNumber,1),modifiedRange:V.M.ofLength(o.lineNumber,1),originalHeightInPx:a+t.heightInPx,modifiedHeightInPx:l+o.heightInPx,diff:void 0})}}for(const m of t){const f=m.lineRangeMapping;u(f.original.startLineNumber,f.modified.startLineNumber);let v=!0,p=f.modified.startLineNumber,C=f.original.startLineNumber;function b(e,i){var t,o,n,s;if(e<C||i<p)return;if(v)v=!1;else if(e===C||i===p)return;const c=new V.M(C,e),g=new V.M(p,i);if(c.isEmpty&&g.isEmpty)return;const u=null!==(o=null===(t=r.takeWhile((i=>i.lineNumber<e)))||void 0===t?void 0:t.reduce(((e,i)=>e+i.heightInPx),0))&&void 0!==o?o:0,f=null!==(s=null===(n=d.takeWhile((e=>e.lineNumber<i)))||void 0===n?void 0:n.reduce(((e,i)=>e+i.heightInPx),0))&&void 0!==s?s:0;h.push({originalRange:c,modifiedRange:g,originalHeightInPx:c.length*a+u,modifiedHeightInPx:g.length*l+f,diff:m.lineRangeMapping}),C=e,p=i}if(s)for(const w of f.innerChanges||[])w.originalRange.startColumn>1&&w.modifiedRange.startColumn>1&&b(w.originalRange.startLineNumber,w.modifiedRange.startLineNumber),w.originalRange.endColumn<e.getModel().getLineMaxColumn(w.originalRange.endLineNumber)&&b(w.originalRange.endLineNumber,w.modifiedRange.endLineNumber);b(f.original.endLineNumberExclusive,f.modified.endLineNumberExclusive),c=f.original.endLineNumberExclusive,g=f.modified.endLineNumberExclusive}return u(Number.MAX_VALUE,Number.MAX_VALUE),h}function Wi(e,i){const t=[],o=[],n=-1!==e.getOption(144).wrappingColumn,s=e._getViewModel().coordinatesConverter,r=e.getOption(66);if(n)for(let d=1;d<=e.getModel().getLineCount();d++){const e=s.getModelLineViewLineCount(d);e>1&&o.push({lineNumber:d,heightInPx:r*(e-1)})}for(const d of e.getWhitespaces()){if(i.has(d.id))continue;const e=0===d.afterLineNumber?0:s.convertViewPositionToModelPosition(new A.y(d.afterLineNumber,1)).lineNumber;t.push({lineNumber:e,heightInPx:d.height})}return function(e,i,t,o){if(0===e.length)return i;if(0===i.length)return e;const n=[];let s=0,r=0;for(;s<e.length&&r<i.length;){const d=e[s],a=i[r],l=t(d),h=t(a);l<h?(n.push(d),s++):l>h?(n.push(a),r++):(n.push(o(d,a)),s++,r++)}for(;s<e.length;)n.push(e[s]),s++;for(;r<i.length;)n.push(i[r]),r++;return n}(t,o,(e=>e.lineNumber),((e,i)=>({lineNumber:e.lineNumber,heightInPx:e.heightInPx+i.heightInPx})))}Oi=xi([Pi(5,Ii.h),Pi(6,Ti.Z)],Oi);var Ai,Fi=t(86675),ki=t(32666),Hi=t(5731),Bi=t(68010),Ui=t(19700),Qi=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},zi=function(e,i){return function(t,o){i(t,o,e)}};let ji=Ai=class extends d.jG{constructor(e,i,t,n,s,r,d,l){super(),this._editors=e,this._rootElement=i,this._diffModel=t,this._rootWidth=n,this._rootHeight=s,this._modifiedEditorLayoutInfo=r,this._options=d,this._themeService=l;const h=(0,a.y0)(this._themeService.onDidColorThemeChange,(()=>this._themeService.getColorTheme())),c=(0,a.un)((e=>{const i=h.read(e);return{insertColor:i.getColor(Bi.ld8)||(i.getColor(Bi.Gj6)||Bi.EY1).transparent(2),removeColor:i.getColor(Bi.$BZ)||(i.getColor(Bi.GNm)||Bi.ZEf).transparent(2)}})),g=(0,a.y0)(this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollTop())),u=(0,a.y0)(this._editors.modified.onDidScrollChange,(()=>this._editors.modified.getScrollHeight()));this._register((0,a.yC)(((e,i)=>{if(!this._options.renderOverviewRuler.read(e))return;const t=(0,Fi.Z)(document.createElement("div"));t.setClassName("diffViewport"),t.setPosition("absolute");const n=(0,o.h)("div.diffOverview",{style:{position:"absolute",top:"0px",width:Ai.ENTIRE_DIFF_OVERVIEW_WIDTH+"px"}}).root;i.add(L(n,t.domNode)),i.add((0,o.b2)(n,o.Bx.POINTER_DOWN,(e=>{this._editors.modified.delegateVerticalScrollbarPointerDown(e)}))),i.add((0,o.ko)(n,o.Bx.MOUSE_WHEEL,(e=>{this._editors.modified.delegateScrollFromMouseWheelEvent(e)}),{passive:!1})),i.add(L(this._rootElement,n)),i.add((0,a.yC)(((e,i)=>{const o=this._diffModel.read(e),s=this._editors.original.createOverviewRuler("original diffOverviewRuler");s&&(i.add(s),i.add(L(n,s.getDomNode())));const r=this._editors.modified.createOverviewRuler("modified diffOverviewRuler");if(r&&(i.add(r),i.add(L(n,r.getDomNode()))),!s||!r)return;const d=(0,a.yQ)("viewZoneChanged",this._editors.original.onDidChangeViewZones),l=(0,a.yQ)("viewZoneChanged",this._editors.modified.onDidChangeViewZones),h=(0,a.yQ)("hiddenRangesChanged",this._editors.original.onDidChangeHiddenAreas),m=(0,a.yQ)("hiddenRangesChanged",this._editors.modified.onDidChangeHiddenAreas);i.add((0,a.fm)((e=>{var i;d.read(e),l.read(e),h.read(e),m.read(e);const t=c.read(e),n=null===(i=null===o||void 0===o?void 0:o.diff.read(e))||void 0===i?void 0:i.mappings;function a(e,i,t){const o=t._getViewModel();return o?e.filter((e=>e.length>0)).map((e=>{const t=o.coordinatesConverter.convertModelPositionToViewPosition(new A.y(e.startLineNumber,1)),n=o.coordinatesConverter.convertModelPositionToViewPosition(new A.y(e.endLineNumberExclusive,1)),s=n.lineNumber-t.lineNumber;return new Hi.iE(t.lineNumber,n.lineNumber,s,i.toString())})):[]}const g=a((n||[]).map((e=>e.lineRangeMapping.original)),t.removeColor,this._editors.original),u=a((n||[]).map((e=>e.lineRangeMapping.modified)),t.insertColor,this._editors.modified);null===s||void 0===s||s.setZones(g),null===r||void 0===r||r.setZones(u)}))),i.add((0,a.fm)((e=>{const i=this._rootHeight.read(e),o=this._rootWidth.read(e),d=this._modifiedEditorLayoutInfo.read(e);if(d){const o=Ai.ENTIRE_DIFF_OVERVIEW_WIDTH-2*Ai.ONE_OVERVIEW_WIDTH;s.setLayout({top:0,height:i,right:o+Ai.ONE_OVERVIEW_WIDTH,width:Ai.ONE_OVERVIEW_WIDTH}),r.setLayout({top:0,height:i,right:0,width:Ai.ONE_OVERVIEW_WIDTH});const n=g.read(e),a=u.read(e),l=this._editors.modified.getOption(102),h=new ki.m(l.verticalHasArrows?l.arrowSize:0,l.verticalScrollbarSize,0,d.height,a,n);t.setTop(h.getSliderPosition()),t.setHeight(h.getSliderSize())}else t.setTop(0),t.setHeight(0);n.style.height=i+"px",n.style.left=o-Ai.ENTIRE_DIFF_OVERVIEW_WIDTH+"px",t.setWidth(Ai.ENTIRE_DIFF_OVERVIEW_WIDTH)})))})))})))}};ji.ONE_OVERVIEW_WIDTH=15,ji.ENTIRE_DIFF_OVERVIEW_WIDTH=2*Ai.ONE_OVERVIEW_WIDTH,ji=Ai=Qi([zi(7,Ui.Gy)],ji);var Zi=t(27860),Ki=t(72330),Gi=t(98659),qi=t(39686),Yi=t(92161),$i=t(3607);(0,Bi.x1A)("diffEditor.move.border",{dark:"#8b8b8b9c",light:"#8b8b8b9c",hcDark:"#8b8b8b9c",hcLight:"#8b8b8b9c"},(0,z.kg)("diffEditor.move.border","The border color for text that got moved in the diff editor.")),(0,Bi.x1A)("diffEditor.moveActive.border",{dark:"#FFA500",light:"#FFA500",hcDark:"#FFA500",hcLight:"#FFA500"},(0,z.kg)("diffEditor.moveActive.border","The active border color for text that got moved in the diff editor."));class Ji extends d.jG{constructor(){super(...arguments),this._id=++Ji.idCounter,this._onDidDispose=this._register(new r.vl),this.onDidDispose=this._onDidDispose.event}getId(){return this.getEditorType()+":v2:"+this._id}getVisibleColumnFromPosition(e){return this._targetEditor.getVisibleColumnFromPosition(e)}getPosition(){return this._targetEditor.getPosition()}setPosition(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setPosition(e,i)}revealLine(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLine(e,i)}revealLineInCenter(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenter(e,i)}revealLineInCenterIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineInCenterIfOutsideViewport(e,i)}revealLineNearTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealLineNearTop(e,i)}revealPosition(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPosition(e,i)}revealPositionInCenter(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenter(e,i)}revealPositionInCenterIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionInCenterIfOutsideViewport(e,i)}revealPositionNearTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealPositionNearTop(e,i)}getSelection(){return this._targetEditor.getSelection()}getSelections(){return this._targetEditor.getSelections()}setSelection(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelection(e,i)}setSelections(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"api";this._targetEditor.setSelections(e,i)}revealLines(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLines(e,i,t)}revealLinesInCenter(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenter(e,i,t)}revealLinesInCenterIfOutsideViewport(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesInCenterIfOutsideViewport(e,i,t)}revealLinesNearTop(e,i){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this._targetEditor.revealLinesNearTop(e,i,t)}revealRange(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];this._targetEditor.revealRange(e,i,t,o)}revealRangeInCenter(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenter(e,i)}revealRangeInCenterIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeInCenterIfOutsideViewport(e,i)}revealRangeNearTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTop(e,i)}revealRangeNearTopIfOutsideViewport(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeNearTopIfOutsideViewport(e,i)}revealRangeAtTop(e){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this._targetEditor.revealRangeAtTop(e,i)}getSupportedActions(){return this._targetEditor.getSupportedActions()}focus(){this._targetEditor.focus()}trigger(e,i,t){this._targetEditor.trigger(e,i,t)}createDecorationsCollection(e){return this._targetEditor.createDecorationsCollection(e)}changeDecorations(e){return this._targetEditor.changeDecorations(e)}}Ji.idCounter=0;var Xi=t(16391),et=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},it=function(e,i){return function(t,o){i(t,o,e)}};let tt=class extends d.jG{constructor(e,i,t,o,n,s,d){super(),this.originalEditorElement=e,this.modifiedEditorElement=i,this._options=t,this._createInnerEditor=n,this._instantiationService=s,this._keybindingService=d,this._onDidContentSizeChange=this._register(new r.vl),this.original=this._register(this._createLeftHandSideEditor(t.editorOptions.get(),o.originalEditor||{})),this.modified=this._register(this._createRightHandSideEditor(t.editorOptions.get(),o.modifiedEditor||{})),this.modifiedModel=(0,a.y0)(this.modified.onDidChangeModel,(()=>this.modified.getModel())),this._register((0,a.Y)({createEmptyChangeSummary:()=>({}),handleChange:(e,i)=>(e.didChange(t.editorOptions)&&Object.assign(i,e.change.changedOptions),!0)},((e,i)=>{t.editorOptions.read(e),this._options.renderSideBySide.read(e),this.modified.updateOptions(this._adjustOptionsForRightHandSide(e,i)),this.original.updateOptions(this._adjustOptionsForLeftHandSide(e,i))})))}_createLeftHandSideEditor(e,i){const t=this._adjustOptionsForLeftHandSide(void 0,e),o=this._constructInnerEditor(this._instantiationService,this.originalEditorElement,t,i);return o.setContextValue("isInDiffLeftEditor",!0),o}_createRightHandSideEditor(e,i){const t=this._adjustOptionsForRightHandSide(void 0,e),o=this._constructInnerEditor(this._instantiationService,this.modifiedEditorElement,t,i);return o.setContextValue("isInDiffRightEditor",!0),o}_constructInnerEditor(e,i,t,o){const n=this._createInnerEditor(e,i,t,o);return this._register(n.onDidContentSizeChange((e=>{const i=this.original.getContentWidth()+this.modified.getContentWidth()+ji.ENTIRE_DIFF_OVERVIEW_WIDTH,t=Math.max(this.modified.getContentHeight(),this.original.getContentHeight());this._onDidContentSizeChange.fire({contentHeight:t,contentWidth:i,contentHeightChanged:e.contentHeightChanged,contentWidthChanged:e.contentWidthChanged})}))),n}_adjustOptionsForLeftHandSide(e,i){const t=this._adjustOptionsForSubEditor(i);return this._options.renderSideBySide.get()?(t.unicodeHighlight=this._options.editorOptions.get().unicodeHighlight||{},t.wordWrapOverride1=this._options.diffWordWrap.get()):(t.wordWrapOverride1="off",t.wordWrapOverride2="off",t.stickyScroll={enabled:!1},t.unicodeHighlight={nonBasicASCII:!1,ambiguousCharacters:!1,invisibleCharacters:!1}),i.originalAriaLabel&&(t.ariaLabel=i.originalAriaLabel),t.ariaLabel=this._updateAriaLabel(t.ariaLabel),t.readOnly=!this._options.originalEditable.get(),t.dropIntoEditor={enabled:!t.readOnly},t.extraEditorClassName="original-in-monaco-diff-editor",t}_adjustOptionsForRightHandSide(e,i){const t=this._adjustOptionsForSubEditor(i);return i.modifiedAriaLabel&&(t.ariaLabel=i.modifiedAriaLabel),t.ariaLabel=this._updateAriaLabel(t.ariaLabel),t.wordWrapOverride1=this._options.diffWordWrap.get(),t.revealHorizontalRightPadding=O.qB.revealHorizontalRightPadding.defaultValue+ji.ENTIRE_DIFF_OVERVIEW_WIDTH,t.scrollbar.verticalHasArrows=!1,t.extraEditorClassName="modified-in-monaco-diff-editor",t}_adjustOptionsForSubEditor(e){const i=Object.assign(Object.assign({},e),{dimension:{height:0,width:0}});return i.inDiffEditor=!0,i.automaticLayout=!1,i.scrollbar=Object.assign({},i.scrollbar||{}),i.scrollbar.vertical="visible",i.folding=!1,i.codeLens=this._options.diffCodeLens.get(),i.fixedOverflowWidgets=!0,i.minimap=Object.assign({},i.minimap||{}),i.minimap.enabled=!1,this._options.hideUnchangedRegions.get()?i.stickyScroll={enabled:!1}:i.stickyScroll=this._options.editorOptions.get().stickyScroll,i}_updateAriaLabel(e){var i;e||(e="");const t=(0,z.kg)("diff-aria-navigation-tip"," use {0} to open the accessibility help.",null===(i=this._keybindingService.lookupKeybinding("editor.action.accessibilityHelp"))||void 0===i?void 0:i.getAriaLabel());return this._options.accessibilityVerbose.get()?e+t:e?e.replaceAll(t,""):""}};tt=et([it(5,Z._Y),it(6,Xi.b)],tt);var ot=t(15339);class nt{get editorOptions(){return this._options}constructor(e,i){this.diffEditorWidth=i,this.couldShowInlineViewBecauseOfSize=(0,a.un)(this,(e=>this._options.read(e).renderSideBySide&&this.diffEditorWidth.read(e)<=this._options.read(e).renderSideBySideInlineBreakpoint)),this.renderOverviewRuler=(0,a.un)(this,(e=>this._options.read(e).renderOverviewRuler)),this.renderSideBySide=(0,a.un)(this,(e=>this._options.read(e).renderSideBySide&&!(this._options.read(e).useInlineViewWhenSpaceIsLimited&&this.couldShowInlineViewBecauseOfSize.read(e)))),this.readOnly=(0,a.un)(this,(e=>this._options.read(e).readOnly)),this.shouldRenderRevertArrows=(0,a.un)(this,(e=>!!this._options.read(e).renderMarginRevertIcon&&(!!this.renderSideBySide.read(e)&&!this.readOnly.read(e)))),this.renderIndicators=(0,a.un)(this,(e=>this._options.read(e).renderIndicators)),this.enableSplitViewResizing=(0,a.un)(this,(e=>this._options.read(e).enableSplitViewResizing)),this.splitViewDefaultRatio=(0,a.un)(this,(e=>this._options.read(e).splitViewDefaultRatio)),this.ignoreTrimWhitespace=(0,a.un)(this,(e=>this._options.read(e).ignoreTrimWhitespace)),this.maxComputationTimeMs=(0,a.un)(this,(e=>this._options.read(e).maxComputationTime)),this.showMoves=(0,a.un)(this,(e=>this._options.read(e).experimental.showMoves&&this.renderSideBySide.read(e))),this.isInEmbeddedEditor=(0,a.un)(this,(e=>this._options.read(e).isInEmbeddedEditor)),this.diffWordWrap=(0,a.un)(this,(e=>this._options.read(e).diffWordWrap)),this.originalEditable=(0,a.un)(this,(e=>this._options.read(e).originalEditable)),this.diffCodeLens=(0,a.un)(this,(e=>this._options.read(e).diffCodeLens)),this.accessibilityVerbose=(0,a.un)(this,(e=>this._options.read(e).accessibilityVerbose)),this.diffAlgorithm=(0,a.un)(this,(e=>this._options.read(e).diffAlgorithm)),this.showEmptyDecorations=(0,a.un)(this,(e=>this._options.read(e).experimental.showEmptyDecorations)),this.onlyShowAccessibleDiffViewer=(0,a.un)(this,(e=>this._options.read(e).onlyShowAccessibleDiffViewer)),this.hideUnchangedRegions=(0,a.un)(this,(e=>this._options.read(e).hideUnchangedRegions.enabled)),this.hideUnchangedRegionsRevealLineCount=(0,a.un)(this,(e=>this._options.read(e).hideUnchangedRegions.revealLineCount)),this.hideUnchangedRegionsContextLineCount=(0,a.un)(this,(e=>this._options.read(e).hideUnchangedRegions.contextLineCount)),this.hideUnchangedRegionsMinimumLineCount=(0,a.un)(this,(e=>this._options.read(e).hideUnchangedRegions.minimumLineCount));const t=Object.assign(Object.assign({},e),st(e,ot.q));this._options=(0,a.FY)(this,t)}updateOptions(e){const i=st(e,this._options.get()),t=Object.assign(Object.assign(Object.assign({},this._options.get()),e),i);this._options.set(t,void 0,{changedOptions:e})}}function st(e,i){var t,o,n,s,r,d,a,l;return{enableSplitViewResizing:(0,O.zM)(e.enableSplitViewResizing,i.enableSplitViewResizing),splitViewDefaultRatio:(0,O.ls)(e.splitViewDefaultRatio,.5,.1,.9),renderSideBySide:(0,O.zM)(e.renderSideBySide,i.renderSideBySide),renderMarginRevertIcon:(0,O.zM)(e.renderMarginRevertIcon,i.renderMarginRevertIcon),maxComputationTime:(0,O.wA)(e.maxComputationTime,i.maxComputationTime,0,1073741824),maxFileSize:(0,O.wA)(e.maxFileSize,i.maxFileSize,0,1073741824),ignoreTrimWhitespace:(0,O.zM)(e.ignoreTrimWhitespace,i.ignoreTrimWhitespace),renderIndicators:(0,O.zM)(e.renderIndicators,i.renderIndicators),originalEditable:(0,O.zM)(e.originalEditable,i.originalEditable),diffCodeLens:(0,O.zM)(e.diffCodeLens,i.diffCodeLens),renderOverviewRuler:(0,O.zM)(e.renderOverviewRuler,i.renderOverviewRuler),diffWordWrap:(0,O.O4)(e.diffWordWrap,i.diffWordWrap,["off","on","inherit"]),diffAlgorithm:(0,O.O4)(e.diffAlgorithm,i.diffAlgorithm,["legacy","advanced"],{smart:"legacy",experimental:"advanced"}),accessibilityVerbose:(0,O.zM)(e.accessibilityVerbose,i.accessibilityVerbose),experimental:{showMoves:(0,O.zM)(null===(t=e.experimental)||void 0===t?void 0:t.showMoves,i.experimental.showMoves),showEmptyDecorations:(0,O.zM)(null===(o=e.experimental)||void 0===o?void 0:o.showEmptyDecorations,i.experimental.showEmptyDecorations)},hideUnchangedRegions:{enabled:(0,O.zM)(null!==(s=null===(n=e.hideUnchangedRegions)||void 0===n?void 0:n.enabled)&&void 0!==s?s:null===(r=e.experimental)||void 0===r?void 0:r.collapseUnchangedRegions,i.hideUnchangedRegions.enabled),contextLineCount:(0,O.wA)(null===(d=e.hideUnchangedRegions)||void 0===d?void 0:d.contextLineCount,i.hideUnchangedRegions.contextLineCount,0,1073741824),minimumLineCount:(0,O.wA)(null===(a=e.hideUnchangedRegions)||void 0===a?void 0:a.minimumLineCount,i.hideUnchangedRegions.minimumLineCount,0,1073741824),revealLineCount:(0,O.wA)(null===(l=e.hideUnchangedRegions)||void 0===l?void 0:l.revealLineCount,i.hideUnchangedRegions.revealLineCount,0,1073741824)},isInEmbeddedEditor:(0,O.zM)(e.isInEmbeddedEditor,i.isInEmbeddedEditor),onlyShowAccessibleDiffViewer:(0,O.zM)(e.onlyShowAccessibleDiffViewer,i.onlyShowAccessibleDiffViewer),renderSideBySideInlineBreakpoint:(0,O.wA)(e.renderSideBySideInlineBreakpoint,i.renderSideBySideInlineBreakpoint,0,1073741824),useInlineViewWhenSpaceIsLimited:(0,O.zM)(e.useInlineViewWhenSpaceIsLimited,i.useInlineViewWhenSpaceIsLimited)}}var rt=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},dt=function(e,i){return function(t,o){i(t,o,e)}};let at=class extends Ji{constructor(e,i,t,n,s,l,h,c){var g;super(),this._domElement=e,this._parentContextKeyService=n,this._parentInstantiationService=s,this._audioCueService=h,this._editorProgressService=c,this.elements=(0,o.h)("div.monaco-diff-editor.side-by-side",{style:{position:"relative",height:"100%"}},[(0,o.h)("div.noModificationsOverlay@overlay",{style:{position:"absolute",height:"100%",visibility:"hidden"}},[(0,o.$)("span",{},"No Changes")]),(0,o.h)("div.editor.original@original",{style:{position:"absolute",height:"100%"}}),(0,o.h)("div.editor.modified@modified",{style:{position:"absolute",height:"100%"}}),(0,o.h)("div.accessibleDiffViewer@accessibleDiffViewer",{style:{position:"absolute",height:"100%"}})]),this._diffModel=this._register((0,a.X2)("diffModel",void 0)),this.onDidChangeModel=r.Jh.fromObservableLight(this._diffModel),this._contextKeyService=this._register(this._parentContextKeyService.createScoped(this._domElement)),this._instantiationService=this._parentInstantiationService.createChild(new Yi.a([qi.fN,this._contextKeyService])),this._boundarySashes=(0,a.FY)(this,void 0),this._accessibleDiffViewerShouldBeVisible=(0,a.FY)(this,!1),this._accessibleDiffViewerVisible=(0,a.un)(this,(e=>!!this._options.onlyShowAccessibleDiffViewer.read(e)||this._accessibleDiffViewerShouldBeVisible.read(e))),this.movedBlocksLinesPart=(0,a.FY)(this,void 0),this._layoutInfo=(0,a.un)(this,(e=>{var i,t,o;const n=this._rootSizeObserver.width.read(e),s=this._rootSizeObserver.height.read(e),r=null===(i=this._sash.read(e))||void 0===i?void 0:i.sashLeft.read(e),d=null!==r&&void 0!==r?r:Math.max(5,this._editors.original.getLayoutInfo().decorationsLeft),a=n-d-(this._options.renderOverviewRuler.read(e)?ji.ENTIRE_DIFF_OVERVIEW_WIDTH:0),l=d-(null!==(o=null===(t=this.movedBlocksLinesPart.read(e))||void 0===t?void 0:t.width.read(e))&&void 0!==o?o:0);return this.elements.original.style.width=l+"px",this.elements.original.style.left="0px",this.elements.modified.style.width=a+"px",this.elements.modified.style.left=d+"px",this._editors.original.layout({width:l,height:s}),this._editors.modified.layout({width:a,height:s}),{modifiedEditor:this._editors.modified.getLayoutInfo(),originalEditor:this._editors.original.getLayoutInfo()}})),this._diffValue=this._diffModel.map(((e,i)=>null===e||void 0===e?void 0:e.diff.read(i))),this.onDidUpdateDiff=r.Jh.fromObservableLight(this._diffValue),l.willCreateDiffEditor(),this._contextKeyService.createKey("isInDiffEditor",!0),this._domElement.appendChild(this.elements.root),this._register((0,d.s)((()=>this._domElement.removeChild(this.elements.root)))),this._rootSizeObserver=this._register(new M(this.elements.root,i.dimension)),this._rootSizeObserver.setAutomaticLayout(null!==(g=i.automaticLayout)&&void 0!==g&&g),this._options=new nt(i,this._rootSizeObserver.width),this._contextKeyService.createKey(Ki.R.isEmbeddedDiffEditor.key,!1);const u=Ki.R.isEmbeddedDiffEditor.bindTo(this._contextKeyService);this._register((0,a.fm)((e=>{u.set(this._options.isInEmbeddedEditor.read(e))})));const m=Ki.R.comparingMovedCode.bindTo(this._contextKeyService);this._register((0,a.fm)((e=>{var i;m.set(!!(null===(i=this._diffModel.read(e))||void 0===i?void 0:i.movedTextToCompare.read(e)))})));const f=Ki.R.diffEditorRenderSideBySideInlineBreakpointReached.bindTo(this._contextKeyService);this._register((0,a.fm)((e=>{f.set(this._options.couldShowInlineViewBecauseOfSize.read(e))}))),this._editors=this._register(this._instantiationService.createInstance(tt,this.elements.original,this.elements.modified,this._options,t,((e,i,t,o)=>this._createInnerEditor(e,i,t,o)))),this._sash=(0,a.rm)(this,((e,i)=>{const t=this._options.renderSideBySide.read(e);if(this.elements.root.classList.toggle("side-by-side",t),!t)return;const o=i.add(new Ie(this._options,this.elements.root,{height:this._rootSizeObserver.height,width:this._rootSizeObserver.width.map(((e,i)=>e-(this._options.renderOverviewRuler.read(i)?ji.ENTIRE_DIFF_OVERVIEW_WIDTH:0)))}));return i.add((0,a.fm)((e=>{const i=this._boundarySashes.read(e);i&&o.setBoundarySashes(i)}))),o})),this._register((0,a.OI)(this._sash)),this._register((0,a.yC)(((e,i)=>{this.unchangedRangesFeature=i.add(this._instantiationService.createInstance(T(Qe,e),this._editors,this._diffModel,this._options))}))),this._register((0,a.yC)(((e,i)=>{i.add(new(T(Ne,e))(this._editors,this._diffModel,this._options))}))),this._register((0,a.yC)(((e,i)=>{i.add(this._instantiationService.createInstance(T(Oi,e),this._editors,this._diffModel,this._options,this,(()=>this.unchangedRangesFeature.isUpdatingViewZones)))}))),this._register((0,a.yC)(((e,i)=>{i.add(this._instantiationService.createInstance(T(ji,e),this._editors,this.elements.root,this._diffModel,this._rootSizeObserver.width,this._rootSizeObserver.height,this._layoutInfo.map((e=>e.modifiedEditor)),this._options))}))),this._register((0,a.yC)(((e,i)=>{this._accessibleDiffViewer=i.add(this._register(this._instantiationService.createInstance(T(ee,e),this.elements.accessibleDiffViewer,this._accessibleDiffViewerVisible,((e,i)=>this._accessibleDiffViewerShouldBeVisible.set(e,i)),this._options.onlyShowAccessibleDiffViewer.map((e=>!e)),this._rootSizeObserver.width,this._rootSizeObserver.height,this._diffModel.map(((e,i)=>{var t;return null===(t=null===e||void 0===e?void 0:e.diff.read(i))||void 0===t?void 0:t.mappings.map((e=>e.lineRangeMapping))})),this._editors)))})));const _=this._accessibleDiffViewerVisible.map((e=>e?"hidden":"visible"));this._register(I(this.elements.modified,{visibility:_})),this._register(I(this.elements.original,{visibility:_})),this._createDiffEditorContributions(),l.addDiffEditor(this),this._register((0,a.OI)(this._layoutInfo)),this._register((0,a.yC)(((e,i)=>{this.movedBlocksLinesPart.set(i.add(new(T(Me,e))(this.elements.root,this._diffModel,this._layoutInfo.map((e=>e.originalEditor)),this._layoutInfo.map((e=>e.modifiedEditor)),this._editors)),void 0)}))),this._register(I(this.elements.overlay,{width:this._layoutInfo.map(((e,i)=>e.originalEditor.width+(this._options.renderSideBySide.read(i)?0:e.modifiedEditor.width))),visibility:(0,a.un)((e=>{var i,t;return this._options.hideUnchangedRegions.read(e)&&0===(null===(t=null===(i=this._diffModel.read(e))||void 0===i?void 0:i.diff.read(e))||void 0===t?void 0:t.mappings.length)?"visible":"hidden"}))})),this._register(this._editors.modified.onMouseDown((e=>{var i,t;if(!e.event.rightButton&&e.target.position&&(null===(i=e.target.element)||void 0===i?void 0:i.className.includes("arrow-revert-change"))){const i=e.target.position.lineNumber,o=e.target,n=this._diffModel.get();if(!n)return;const s=null===(t=n.diff.get())||void 0===t?void 0:t.mappings;if(!s)return;const r=s.find((e=>(null===o||void 0===o?void 0:o.detail.afterLineNumber)===e.lineRangeMapping.modified.startLineNumber-1||e.lineRangeMapping.modified.startLineNumber===i));if(!r)return;this.revert(r.lineRangeMapping),e.event.stopPropagation()}}))),this._register(r.Jh.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition,(e=>{var i,t;if(3===(null===e||void 0===e?void 0:e.reason)){const o=null===(t=null===(i=this._diffModel.get())||void 0===i?void 0:i.diff.get())||void 0===t?void 0:t.mappings.find((i=>i.lineRangeMapping.modified.contains(e.position.lineNumber)));(null===o||void 0===o?void 0:o.lineRangeMapping.modified.isEmpty)?this._audioCueService.playAudioCue(j.gv.diffLineDeleted,{source:"diffEditor.cursorPositionChanged"}):(null===o||void 0===o?void 0:o.lineRangeMapping.original.isEmpty)?this._audioCueService.playAudioCue(j.gv.diffLineInserted,{source:"diffEditor.cursorPositionChanged"}):o&&this._audioCueService.playAudioCue(j.gv.diffLineModified,{source:"diffEditor.cursorPositionChanged"})}})));const v=this._diffModel.map(((e,i)=>null===e||void 0===e?void 0:e.isDiffUpToDate.read(i)));this._register((0,a.yC)(((e,i)=>{if(!1===v.read(e)){const e=this._editorProgressService.show(!0,1e3);i.add((0,d.s)((()=>e.done())))}})))}_createInnerEditor(e,i,t,o){return e.createInstance(c.x,i,t,o)}_createDiffEditorContributions(){const e=l.dS.getDiffEditorContributions();for(const t of e)try{this._register(this._instantiationService.createInstance(t.ctor,this))}catch(i){(0,s.dz)(i)}}get _targetEditor(){return this._editors.modified}getEditorType(){return Zi._.IDiffEditor}layout(e){this._rootSizeObserver.observe(e)}hasTextFocus(){return this._editors.original.hasTextFocus()||this._editors.modified.hasTextFocus()}saveViewState(){var e;return{original:this._editors.original.saveViewState(),modified:this._editors.modified.saveViewState(),modelState:null===(e=this._diffModel.get())||void 0===e?void 0:e.serializeState()}}restoreViewState(e){var i;if(e&&e.original&&e.modified){const t=e;this._editors.original.restoreViewState(t.original),this._editors.modified.restoreViewState(t.modified),t.modelState&&(null===(i=this._diffModel.get())||void 0===i||i.restoreSerializedState(t.modelState))}}createViewModel(e){return this._instantiationService.createInstance(mi,e,this._options,this)}getModel(){var e,i;return null!==(i=null===(e=this._diffModel.get())||void 0===e?void 0:e.model)&&void 0!==i?i:null}setModel(e){!e&&this._diffModel.get()&&this._accessibleDiffViewer.close();const i=e?"model"in e?e:this.createViewModel(e):void 0;this._editors.original.setModel(i?i.model.original:null),this._editors.modified.setModel(i?i.model.modified:null),(0,a.Rn)((e=>{this._diffModel.set(i,e)}))}updateOptions(e){this._options.updateOptions(e)}getContainerDomNode(){return this._domElement}getOriginalEditor(){return this._editors.original}getModifiedEditor(){return this._editors.modified}getLineChanges(){var e;const i=null===(e=this._diffModel.get())||void 0===e?void 0:e.diff.get();return i?i.mappings.map((e=>{const i=e.lineRangeMapping;let t,o,n,s,r=i.innerChanges;return i.original.isEmpty?(t=i.original.startLineNumber-1,o=0,r=void 0):(t=i.original.startLineNumber,o=i.original.endLineNumberExclusive-1),i.modified.isEmpty?(n=i.modified.startLineNumber-1,s=0,r=void 0):(n=i.modified.startLineNumber,s=i.modified.endLineNumberExclusive-1),{originalStartLineNumber:t,originalEndLineNumber:o,modifiedStartLineNumber:n,modifiedEndLineNumber:s,charChanges:null===r||void 0===r?void 0:r.map((e=>({originalStartLineNumber:e.originalRange.startLineNumber,originalStartColumn:e.originalRange.startColumn,originalEndLineNumber:e.originalRange.endLineNumber,originalEndColumn:e.originalRange.endColumn,modifiedStartLineNumber:e.modifiedRange.startLineNumber,modifiedStartColumn:e.modifiedRange.startColumn,modifiedEndLineNumber:e.modifiedRange.endLineNumber,modifiedEndColumn:e.modifiedRange.endColumn})))}})):null}revert(e){var i;const t=null===(i=this._diffModel.get())||void 0===i?void 0:i.model;if(!t)return;const o=e.innerChanges?e.innerChanges.map((e=>({range:e.modifiedRange,text:t.original.getValueInRange(e.originalRange)}))):[{range:e.modified.toExclusiveRange(),text:t.original.getValueInRange(e.original.toExclusiveRange())}];this._editors.modified.executeEdits("diffEditor",o)}accessibleDiffViewerNext(){this._accessibleDiffViewer.next()}accessibleDiffViewerPrev(){this._accessibleDiffViewer.prev()}mapToOtherSide(){var e,i;const t=this._editors.modified.hasWidgetFocus(),o=t?this._editors.modified:this._editors.original,n=t?this._editors.original:this._editors.modified;let s;const r=o.getSelection();if(r){const o=null===(i=null===(e=this._diffModel.get())||void 0===e?void 0:e.diff.get())||void 0===i?void 0:i.mappings.map((e=>t?e.lineRangeMapping.flip():e.lineRangeMapping));if(o){const e=lt(r.getStartPosition(),o),i=lt(r.getEndPosition(),o);s=F.Q.plusRange(e,i)}}return{destination:n,destinationSelection:s}}switchSide(){const{destination:e,destinationSelection:i}=this.mapToOtherSide();e.focus(),i&&e.setSelection(i)}exitCompareMove(){const e=this._diffModel.get();e&&e.movedTextToCompare.set(void 0,void 0)}collapseAllUnchangedRegions(){var e;const i=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();i&&(0,a.Rn)((e=>{for(const t of i)t.collapseAll(e)}))}showAllUnchangedRegions(){var e;const i=null===(e=this._diffModel.get())||void 0===e?void 0:e.unchangedRegions.get();i&&(0,a.Rn)((e=>{for(const t of i)t.showAll(e)}))}};function lt(e,i){const t=(0,n.Uk)(i,(i=>i.original.startLineNumber<=e.lineNumber));if(!t)return F.Q.fromPositions(e);if(t.original.endLineNumberExclusive<=e.lineNumber){const i=e.lineNumber-t.original.endLineNumberExclusive+t.modified.endLineNumberExclusive;return F.Q.fromPositions(new A.y(i,e.column))}if(!t.innerChanges)return F.Q.fromPositions(new A.y(t.modified.startLineNumber,1));const o=(0,n.Uk)(t.innerChanges,(i=>i.originalRange.getStartPosition().isBeforeOrEqual(e)));if(!o){const i=e.lineNumber-t.original.startLineNumber+t.modified.startLineNumber;return F.Q.fromPositions(new A.y(i,e.column))}if(o.originalRange.containsPosition(e))return o.modifiedRange;{const i=(d=o.originalRange.getEndPosition(),a=e,d.lineNumber===a.lineNumber?new Gi.K$(0,a.column-d.column):new Gi.K$(a.lineNumber-d.lineNumber,a.column-1));return F.Q.fromPositions((s=o.modifiedRange.getEndPosition(),0===(r=i).lineCount?new A.y(s.lineNumber,s.column+r.columnCount):new A.y(s.lineNumber+r.lineCount,r.columnCount+1)))}var s,r,d,a}at=rt([dt(3,qi.fN),dt(4,Z._Y),dt(5,h.T),dt(6,j.C6),dt(7,$i.N8)],at)},19214:(e,i,t)=>{t.d(i,{t:()=>_});var o=t(28826),n=t(32101),s=t(15683),r=t(80158),d=t(63910),a=t(73429),l=t(39587),h=t(39686),c=t(39263),g=t(39895),u=t(19700),m=function(e,i,t,o){var n,s=arguments.length,r=s<3?i:null===o?o=Object.getOwnPropertyDescriptor(i,t):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)r=Reflect.decorate(e,i,t,o);else for(var d=e.length-1;d>=0;d--)(n=e[d])&&(r=(s<3?n(r):s>3?n(i,t,r):n(i,t))||r);return s>3&&r&&Object.defineProperty(i,t,r),r},f=function(e,i){return function(t,o){i(t,o,e)}};let _=class extends s.x{constructor(e,i,t,o,n,s,r,d,a,l,h,c,g){super(e,Object.assign(Object.assign({},o.getRawOptions()),{overflowWidgetsDomNode:o.getOverflowWidgetsDomNode()}),t,n,s,r,d,a,l,h,c,g),this._parentEditor=o,this._overwriteOptions=i,super.updateOptions(this._overwriteOptions),this._register(o.onDidChangeConfiguration((e=>this._onParentConfigurationChanged(e))))}getParentEditor(){return this._parentEditor}_onParentConfigurationChanged(e){super.updateOptions(this._parentEditor.getRawOptions()),super.updateOptions(this._overwriteOptions)}updateOptions(e){o.co(this._overwriteOptions,e,!0),super.updateOptions(this._overwriteOptions)}};_=m([f(4,c._Y),f(5,n.T),f(6,l.d),f(7,h.fN),f(8,u.Gy),f(9,g.Ot),f(10,a.j),f(11,r.JZ),f(12,d.u)],_)}}]);
//# sourceMappingURL=monaco-editor-vendor.55a95165.94746b7f.js.map