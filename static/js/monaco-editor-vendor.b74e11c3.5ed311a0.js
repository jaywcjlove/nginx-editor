"use strict";(self.webpackChunkmonaco_editor_nginx=self.webpackChunkmonaco_editor_nginx||[]).push([[3596],{86065:function(e,t,n){n.r(t),n.d(t,{DragAndDropController:function(){return y}});var r=n(15671),i=n(43144),o=n(11752),s=n(61120),a=n(60136),u=n(27277),c=n(65096),l=n(90650),d=n(95253),p=n(65631),h=n(17429),f=n(96601),v=n(78519),g=function(){function e(t,n,i){(0,r.Z)(this,e),this.selection=t,this.targetPosition=n,this.copy=i,this.targetSelection=null}return(0,i.Z)(e,[{key:"getEditOperations",value:function(e,t){var n=e.getValueInRange(this.selection);this.copy||t.addEditOperation(this.selection,null),t.addEditOperation(new h.e(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column),n),!this.selection.containsPosition(this.targetPosition)||this.copy&&(this.selection.getEndPosition().equals(this.targetPosition)||this.selection.getStartPosition().equals(this.targetPosition))?this.copy?this.targetSelection=new f.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.selection.endLineNumber-this.selection.startLineNumber+this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber>this.selection.endLineNumber?this.targetSelection=new f.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.targetPosition.lineNumber<this.selection.endLineNumber?this.targetSelection=new f.Y(this.targetPosition.lineNumber,this.targetPosition.column,this.targetPosition.lineNumber+this.selection.endLineNumber-this.selection.startLineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column+this.selection.endColumn-this.selection.startColumn:this.selection.endColumn):this.selection.endColumn<=this.targetPosition.column?this.targetSelection=new f.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,(this.selection.startLineNumber,this.selection.endLineNumber,this.targetPosition.column-this.selection.endColumn+this.selection.startColumn),this.targetPosition.lineNumber,this.selection.startLineNumber===this.selection.endLineNumber?this.targetPosition.column:this.selection.endColumn):this.targetSelection=new f.Y(this.targetPosition.lineNumber-this.selection.endLineNumber+this.selection.startLineNumber,this.targetPosition.column,this.targetPosition.lineNumber,this.targetPosition.column+this.selection.endColumn-this.selection.startColumn):this.targetSelection=this.selection}},{key:"computeCursorState",value:function(e,t){return this.targetSelection}}]),e}();function m(e){return l.dz?e.altKey:e.ctrlKey}var y=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(e){var i;return(0,r.Z)(this,n),(i=t.call(this))._editor=e,i._dndDecorationIds=i._editor.createDecorationsCollection(),i._register(i._editor.onMouseDown((function(e){return i._onEditorMouseDown(e)}))),i._register(i._editor.onMouseUp((function(e){return i._onEditorMouseUp(e)}))),i._register(i._editor.onMouseDrag((function(e){return i._onEditorMouseDrag(e)}))),i._register(i._editor.onMouseDrop((function(e){return i._onEditorMouseDrop(e)}))),i._register(i._editor.onMouseDropCanceled((function(){return i._onEditorMouseDropCanceled()}))),i._register(i._editor.onKeyDown((function(e){return i.onEditorKeyDown(e)}))),i._register(i._editor.onKeyUp((function(e){return i.onEditorKeyUp(e)}))),i._register(i._editor.onDidBlurEditorWidget((function(){return i.onEditorBlur()}))),i._register(i._editor.onDidBlurEditorText((function(){return i.onEditorBlur()}))),i._mouseDown=!1,i._modifierPressed=!1,i._dragSelection=null,i}return(0,i.Z)(n,[{key:"onEditorBlur",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1}},{key:"onEditorKeyDown",value:function(e){this._editor.getOption(35)&&!this._editor.getOption(22)&&(m(e)&&(this._modifierPressed=!0),this._mouseDown&&m(e)&&this._editor.updateOptions({mouseStyle:"copy"}))}},{key:"onEditorKeyUp",value:function(e){this._editor.getOption(35)&&!this._editor.getOption(22)&&(m(e)&&(this._modifierPressed=!1),this._mouseDown&&e.keyCode===n.TRIGGER_KEY_VALUE&&this._editor.updateOptions({mouseStyle:"default"}))}},{key:"_onEditorMouseDown",value:function(e){this._mouseDown=!0}},{key:"_onEditorMouseUp",value:function(e){this._mouseDown=!1,this._editor.updateOptions({mouseStyle:"text"})}},{key:"_onEditorMouseDrag",value:function(e){var t=e.target;if(null===this._dragSelection){var n=(this._editor.getSelections()||[]).filter((function(e){return t.position&&e.containsPosition(t.position)}));if(1!==n.length)return;this._dragSelection=n[0]}m(e.event)?this._editor.updateOptions({mouseStyle:"copy"}):this._editor.updateOptions({mouseStyle:"default"}),t.position&&(this._dragSelection.containsPosition(t.position)?this._removeDecoration():this.showAt(t.position))}},{key:"_onEditorMouseDropCanceled",value:function(){this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"_onEditorMouseDrop",value:function(e){if(e.target&&(this._hitContent(e.target)||this._hitMargin(e.target))&&e.target.position){var t=new p.L(e.target.position.lineNumber,e.target.position.column);if(null===this._dragSelection){var r=null;if(e.event.shiftKey){var i=this._editor.getSelection();if(i){var o=i.selectionStartLineNumber,s=i.selectionStartColumn;r=[new f.Y(o,s,t.lineNumber,t.column)]}}else r=(this._editor.getSelections()||[]).map((function(e){return e.containsPosition(t)?new f.Y(t.lineNumber,t.column,t.lineNumber,t.column):e}));this._editor.setSelections(r||[],"mouse",3)}else(!this._dragSelection.containsPosition(t)||(m(e.event)||this._modifierPressed)&&(this._dragSelection.getEndPosition().equals(t)||this._dragSelection.getStartPosition().equals(t)))&&(this._editor.pushUndoStop(),this._editor.executeCommand(n.ID,new g(this._dragSelection,t,m(e.event)||this._modifierPressed)),this._editor.pushUndoStop())}this._editor.updateOptions({mouseStyle:"text"}),this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1}},{key:"showAt",value:function(e){this._dndDecorationIds.set([{range:new h.e(e.lineNumber,e.column,e.lineNumber,e.column),options:n._DECORATION_OPTIONS}]),this._editor.revealPosition(e,1)}},{key:"_removeDecoration",value:function(){this._dndDecorationIds.clear()}},{key:"_hitContent",value:function(e){return 6===e.type||7===e.type}},{key:"_hitMargin",value:function(e){return 2===e.type||3===e.type||4===e.type}},{key:"dispose",value:function(){this._removeDecoration(),this._dragSelection=null,this._mouseDown=!1,this._modifierPressed=!1,(0,o.Z)((0,s.Z)(n.prototype),"dispose",this).call(this)}}]),n}(c.JT);y.ID="editor.contrib.dragAndDrop",y.TRIGGER_KEY_VALUE=l.dz?6:5,y._DECORATION_OPTIONS=v.qx.register({description:"dnd-target",className:"dnd-target"}),(0,d._K)(y.ID,y,2)},93022:function(e,t,n){n.r(t);var r=n(74165),i=n(7388),o=n(63021),s=n(38821),a=n(7787),u=n(40455),c=n(99740),l=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))};c.P.registerCommand("_executeDocumentSymbolProvider",(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),c=1;c<t;c++)n[c-1]=arguments[c];return l(this,void 0,void 0,(0,r.Z)().mark((function t(){var c,l,d,p;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c=n[0],(0,o.p_)(s.o.isUri(c)),l=e.get(u.Je),d=e.get(a.S),t.next=6,d.createModelReference(c);case 6:return p=t.sent,t.prev=7,t.next=10,l.getOrCreate(p.object.textEditorModel,i.T.None);case 10:return t.abrupt("return",t.sent.getTopLevelSymbols());case 11:return t.prev=11,p.dispose(),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[7,,11,14]])})))}))},40455:function(e,t,n){n.d(t,{C3:function(){return T},H3:function(){return E},Je:function(){return I},sT:function(){return S}});var r=n(74165),i=n(93433),o=n(29439),s=n(37762),a=n(60136),u=n(27277),c=n(15671),l=n(43144),d=n(38102),p=n(7388),h=n(74146),f=n(12928),v=n(29413),g=n(65631),m=n(17429),y=n(68200),b=n(64606),_=n(57832),k=n(26246),P=n(65096),x=n(65441),w=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},Z=function(e,t){return function(n,r){t(n,r,e)}},D=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},C=function(){function e(){(0,c.Z)(this,e)}return(0,l.Z)(e,[{key:"remove",value:function(){var e;null===(e=this.parent)||void 0===e||e.children.delete(this.id)}}],[{key:"findId",value:function(e,t){var n;"string"===typeof e?n="".concat(t.id,"/").concat(e):(n="".concat(t.id,"/").concat(e.name),void 0!==t.children.get(n)&&(n="".concat(t.id,"/").concat(e.name,"_").concat(e.range.startLineNumber,"_").concat(e.range.startColumn)));for(var r=n,i=0;void 0!==t.children.get(r);i++)r="".concat(n,"_").concat(i);return r}},{key:"empty",value:function(e){return 0===e.children.size}}]),e}(),S=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i){var o;return(0,c.Z)(this,n),(o=t.call(this)).id=e,o.parent=r,o.symbol=i,o.children=new Map,o}return(0,l.Z)(n)}(C),E=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,o){var s;return(0,c.Z)(this,n),(s=t.call(this)).id=e,s.parent=r,s.label=i,s.order=o,s.children=new Map,s}return(0,l.Z)(n)}(C),T=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(e){var r;return(0,c.Z)(this,n),(r=t.call(this)).uri=e,r.id="root",r.parent=void 0,r._groups=new Map,r.children=new Map,r.id="root",r.parent=void 0,r}return(0,l.Z)(n,[{key:"_compact",value:function(){var e,t=0,n=(0,s.Z)(this._groups);try{for(n.s();!(e=n.n()).done;){var r=(0,o.Z)(e.value,2),i=r[0];0===r[1].children.size?this._groups.delete(i):t+=1}}catch(d){n.e(d)}finally{n.f()}if(1!==t)this.children=this._groups;else{var a,u=f.$.first(this._groups.values()),c=(0,s.Z)(u.children);try{for(c.s();!(a=c.n()).done;){var l=(0,o.Z)(a.value,2)[1];l.parent=this,this.children.set(l.id,l)}}catch(d){c.e(d)}finally{c.f()}}return this}},{key:"getTopLevelSymbols",value:function(){var e,t=[],n=(0,s.Z)(this.children.values());try{for(n.s();!(e=n.n()).done;){var r=e.value;r instanceof S?t.push(r.symbol):t.push.apply(t,(0,i.Z)(f.$.map(r.children.values(),(function(e){return e.symbol}))))}}catch(o){n.e(o)}finally{n.f()}return t.sort((function(e,t){return m.e.compareRangesUsingStarts(e.range,t.range)}))}},{key:"asListOfDocumentSymbols",value:function(){var e=this.getTopLevelSymbols(),t=[];return n._flattenDocumentSymbols(t,e,""),t.sort((function(e,t){return g.L.compare(m.e.getStartPosition(e.range),m.e.getStartPosition(t.range))||g.L.compare(m.e.getEndPosition(t.range),m.e.getEndPosition(e.range))}))}}],[{key:"create",value:function(e,t,r){var i=new p.A(r),o=new n(t.uri),a=e.ordered(t),u=a.map((function(e,r){var a,u=C.findId("provider_".concat(r),o),c=new E(u,o,null!==(a=e.displayName)&&void 0!==a?a:"Unknown Outline Provider",r);return Promise.resolve(e.provideDocumentSymbols(t,i.token)).then((function(e){var t,r=(0,s.Z)(e||[]);try{for(r.s();!(t=r.n()).done;){var i=t.value;n._makeOutlineElement(i,c)}}catch(o){r.e(o)}finally{r.f()}return c}),(function(e){return(0,h.Cp)(e),c})).then((function(e){C.empty(e)?e.remove():o._groups.set(u,e)}))})),c=e.onDidChange((function(){var n=e.ordered(t);(0,d.fS)(n,a)||i.cancel()}));return Promise.all(u).then((function(){return i.token.isCancellationRequested&&!r.isCancellationRequested?n.create(e,t,r):o._compact()})).finally((function(){i.dispose(),c.dispose(),i.dispose()}))}},{key:"_makeOutlineElement",value:function(e,t){var r=C.findId(e,t),i=new S(r,t,e);if(e.children){var o,a=(0,s.Z)(e.children);try{for(a.s();!(o=a.n()).done;){var u=o.value;n._makeOutlineElement(u,i)}}catch(c){a.e(c)}finally{a.f()}}t.children.set(i.id,i)}},{key:"_flattenDocumentSymbols",value:function(e,t,r){var i,o=(0,s.Z)(t);try{for(o.s();!(i=o.n()).done;){var a=i.value;e.push({kind:a.kind,tags:a.tags,name:a.name,detail:a.detail,containerName:a.containerName||r,range:a.range,selectionRange:a.selectionRange,children:void 0}),a.children&&n._flattenDocumentSymbols(e,a.children,a.name)}}catch(u){o.e(u)}finally{o.f()}}}]),n}(C),I=(0,b.yh)("IOutlineModelService"),N=function(){function e(t,n,r){var i=this;(0,c.Z)(this,e),this._languageFeaturesService=t,this._disposables=new P.SL,this._cache=new v.z6(10,.7),this._debounceInformation=n.for(t.documentSymbolProvider,"DocumentSymbols",{min:350}),this._disposables.add(r.onModelRemoved((function(e){i._cache.delete(e.id)})))}return(0,l.Z)(e,[{key:"dispose",value:function(){this._disposables.dispose()}},{key:"getOrCreate",value:function(e,t){return D(this,void 0,void 0,(0,r.Z)().mark((function n(){var i,o,s,a,u,c,l=this;return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this._languageFeaturesService.documentSymbolProvider,o=i.ordered(e),(s=this._cache.get(e.id))&&s.versionId===e.getVersionId()&&(0,d.fS)(s.provider,o)||(a=new p.A,s={versionId:e.getVersionId(),provider:o,promiseCnt:0,source:a,promise:T.create(i,e,a.token),model:void 0},this._cache.set(e.id,s),u=Date.now(),s.promise.then((function(t){s.model=t,l._debounceInformation.update(e,Date.now()-u)})).catch((function(t){l._cache.delete(e.id)}))),!s.model){n.next=6;break}return n.abrupt("return",s.model);case 6:return s.promiseCnt+=1,c=t.onCancellationRequested((function(){0===--s.promiseCnt&&(s.source.cancel(),l._cache.delete(e.id))})),n.prev=8,n.next=11,s.promise;case 11:return n.abrupt("return",n.sent);case 12:return n.prev=12,c.dispose(),n.finish(12);case 15:case"end":return n.stop()}}),n,this,[[8,,12,15]])})))}}]),e}();N=w([Z(0,x.p),Z(1,y.A),Z(2,k.q)],N),(0,_.z)(I,N,1)},70277:function(e,t,n){n.r(t);var r,i=n(15671),o=n(43144),s=n(60136),a=n(27277),u=n(95253),c=n(62636),l=n(93433),d=n(29439),p=n(37762),h=n(74165),f=n(32959),v=n(38102),g=n(71049),m=n(83392),y=n(65096),b=n(58915),_=n(90650),k=n(74812),P=n(19956),x=n(69815),w=n(48895),Z=n(17429),D=n(65441),C=n(43845),S=n(16836),E=n(92303),T=n(18420),I=n(76344),N=n(8022),O=n(64606),M=n(28322),L=n(67949),A=n(31959),R=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},W=function(e,t){return function(n,r){t(n,r,e)}},j=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},q="editor.changePasteType",K=new N.uy("pasteWidgetVisible",!1,(0,T.NC)("pasteWidgetVisible","Whether the paste widget is showing")),U="application/vnd.code.copyMetadata",V=r=function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(e,r,o,s,a,u,c){var l;(0,i.Z)(this,n),(l=t.call(this))._bulkEditService=o,l._clipboardService=s,l._languageFeaturesService=a,l._quickInputService=u,l._progressService=c,l._editor=e;var d=e.getContainerDomNode();return l._register((0,f.addDisposableListener)(d,"copy",(function(e){return l.handleCopy(e)}))),l._register((0,f.addDisposableListener)(d,"cut",(function(e){return l.handleCopy(e)}))),l._register((0,f.addDisposableListener)(d,"paste",(function(e){return l.handlePaste(e)}),!0)),l._pasteProgressManager=l._register(new E.InlineProgressManager("pasteIntoEditor",e,r)),l._postPasteWidgetManager=l._register(r.createInstance(A.p,"pasteIntoEditor",e,K,{id:q,label:(0,T.NC)("postPasteWidgetTitle","Show paste options...")})),l}return(0,o.Z)(n,[{key:"changePasteType",value:function(){this._postPasteWidgetManager.tryShowSelector()}},{key:"pasteAs",value:function(e){this._editor.focus();try{this._pasteAsActionContext={preferredId:e},(0,f.getActiveDocument)().execCommand("paste")}finally{this._pasteAsActionContext=void 0}}},{key:"isPasteAsEnabled",value:function(){return this._editor.getOption(84).enabled&&!this._editor.getOption(90)}},{key:"handleCopy",value:function(e){var t,n,r=this;if(this._editor.hasTextFocus()&&(_.$L&&this._clipboardService.writeResources([]),e.clipboardData&&this.isPasteAsEnabled())){var i=this._editor.getModel(),o=this._editor.getSelections();if(i&&(null===o||void 0===o?void 0:o.length)){var s=this._editor.getOption(37),a=o,u=1===o.length&&o[0].isEmpty();if(u){if(!s)return;a=[new Z.e(a[0].startLineNumber,1,a[0].startLineNumber,1+i.getLineLength(a[0].startLineNumber))]}var c=null===(t=this._editor._getViewModel())||void 0===t?void 0:t.getPlainTextToCopy(o,s,_.ED),l={multicursorText:Array.isArray(c)?c:null,pasteOnNewLine:u,mode:null},f=this._languageFeaturesService.documentPasteEditProvider.ordered(i).filter((function(e){return!!e.prepareDocumentPaste}));if(f.length){var m=(0,x.B)(e.clipboardData),y=f.flatMap((function(e){var t;return null!==(t=e.copyMimeTypes)&&void 0!==t?t:[]})),b=(0,k.R)();this.setCopyMetadata(e.clipboardData,{id:b,providerCopyMimeTypes:y,defaultPastePayload:l});var P=(0,g.PG)((function(e){return j(r,void 0,void 0,(0,h.Z)().mark((function t(){var n,r,o,s,u,c,l,g,y,b=this;return(0,h.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=v.kX,t.next=3,Promise.all(f.map((function(t){return j(b,void 0,void 0,(0,h.Z)().mark((function n(){return(0,h.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,t.prepareDocumentPaste(i,a,m,e);case 3:return n.abrupt("return",n.sent);case 6:return n.prev=6,n.t0=n.catch(0),console.error(n.t0),n.abrupt("return",void 0);case 10:case"end":return n.stop()}}),n,null,[[0,6]])})))})));case 3:t.t1=t.sent,(n=(0,t.t0)(t.t1)).reverse(),r=(0,p.Z)(n);try{for(r.s();!(o=r.n()).done;){s=o.value,u=(0,p.Z)(s);try{for(u.s();!(c=u.n()).done;)l=(0,d.Z)(c.value,2),g=l[0],y=l[1],m.replace(g,y)}catch(_){u.e(_)}finally{u.f()}}}catch(_){r.e(_)}finally{r.f()}return t.abrupt("return",m);case 9:case"end":return t.stop()}}),t)})))}));null===(n=this._currentCopyOperation)||void 0===n||n.dataTransferPromise.cancel(),this._currentCopyOperation={handle:b,dataTransferPromise:P}}else this.setCopyMetadata(e.clipboardData,{defaultPastePayload:l})}}}},{key:"handlePaste",value:function(e){var t,n;return j(this,void 0,void 0,(0,h.Z)().mark((function r(){var i,o,s,a,u,c;return(0,h.Z)().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e.clipboardData&&this._editor.hasTextFocus()){r.next=2;break}return r.abrupt("return");case 2:if(null===(t=this._currentPasteOperation)||void 0===t||t.cancel(),this._currentPasteOperation=void 0,i=this._editor.getModel(),(null===(o=this._editor.getSelections())||void 0===o?void 0:o.length)&&i){r.next=8;break}return r.abrupt("return");case 8:if(this.isPasteAsEnabled()){r.next=10;break}return r.abrupt("return");case 10:if(s=this.fetchCopyMetadata(e),(a=(0,x.L)(e.clipboardData)).delete(U),u=[].concat((0,l.Z)(e.clipboardData.types),(0,l.Z)(null!==(n=null===s||void 0===s?void 0:s.providerCopyMimeTypes)&&void 0!==n?n:[]),[b.v.uriList]),c=this._languageFeaturesService.documentPasteEditProvider.ordered(i).filter((function(e){var t;return null===(t=e.pasteMimeTypes)||void 0===t?void 0:t.some((function(e){return(0,m.SN)(e,u)}))})),c.length){r.next=17;break}return r.abrupt("return");case 17:e.preventDefault(),e.stopImmediatePropagation(),this._pasteAsActionContext?this.showPasteAsPick(this._pasteAsActionContext.preferredId,c,o,a,s):this.doPasteInline(c,o,a,s);case 20:case"end":return r.stop()}}),r,this)})))}},{key:"doPasteInline",value:function(e,t,n,r){var i=this,o=(0,g.PG)((function(s){return j(i,void 0,void 0,(0,h.Z)().mark((function i(){var a,u,c,l,d,p;return(0,h.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if((a=this._editor).hasModel()){i.next=3;break}return i.abrupt("return");case 3:return u=a.getModel(),c=new S.Dl(a,3,void 0,s),i.prev=5,i.next=8,this.mergeInDataFromCopy(n,r,c.token);case 8:if(!c.token.isCancellationRequested){i.next=10;break}return i.abrupt("return");case 10:if((l=e.filter((function(e){return F(e,n)}))).length&&(1!==l.length||"text"!==l[0].id)){i.next=15;break}return i.next=14,this.applyDefaultPasteHandler(n,r,c.token);case 14:case 23:return i.abrupt("return");case 15:return i.next=17,this.getPasteEdits(l,n,u,t,c.token);case 17:if(d=i.sent,!c.token.isCancellationRequested){i.next=20;break}return i.abrupt("return");case 20:if(1!==d.length||"text"!==d[0].providerId){i.next=24;break}return i.next=23,this.applyDefaultPasteHandler(n,r,c.token);case 24:if(!d.length){i.next=27;break}return p="afterPaste"===a.getOption(84).showPasteSelector,i.abrupt("return",this._postPasteWidgetManager.applyEditAndShowIfNeeded(t,{activeEditIndex:0,allEdits:d},p,c.token));case 27:return i.next=29,this.applyDefaultPasteHandler(n,r,c.token);case 29:return i.prev=29,c.dispose(),this._currentPasteOperation===o&&(this._currentPasteOperation=void 0),i.finish(29);case 33:case"end":return i.stop()}}),i,this,[[5,,29,33]])})))}));this._pasteProgressManager.showWhile(t[0].getEndPosition(),(0,T.NC)("pasteIntoEditorProgress","Running paste handlers. Click to cancel"),o),this._currentPasteOperation=o}},{key:"showPasteAsPick",value:function(e,t,n,r,i){var o=this,s=(0,g.PG)((function(a){return j(o,void 0,void 0,(0,h.Z)().mark((function o(){var u,c,l,d,p,f,v,g;return(0,h.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:if((u=this._editor).hasModel()){o.next=3;break}return o.abrupt("return");case 3:return c=u.getModel(),l=new S.Dl(u,3,void 0,a),o.prev=5,o.next=8,this.mergeInDataFromCopy(r,i,l.token);case 8:if(!l.token.isCancellationRequested){o.next=10;break}return o.abrupt("return");case 10:return d=t.filter((function(e){return F(e,r)})),e&&(d=d.filter((function(t){return t.id===e}))),o.next=14,this.getPasteEdits(d,r,c,n,l.token);case 14:if(p=o.sent,!l.token.isCancellationRequested){o.next=17;break}return o.abrupt("return");case 17:if(p.length){o.next=19;break}return o.abrupt("return");case 19:if(!e){o.next=23;break}f=p.at(0),o.next=27;break;case 23:return o.next=25,this._quickInputService.pick(p.map((function(e){return{label:e.label,description:e.providerId,detail:e.detail,edit:e}})),{placeHolder:(0,T.NC)("pasteAsPickerPlaceholder","Select Paste Action")});case 25:v=o.sent,f=null===v||void 0===v?void 0:v.edit;case 27:if(f){o.next=29;break}return o.abrupt("return");case 29:return g=(0,C.n)(c.uri,n,f),o.next=32,this._bulkEditService.apply(g,{editor:this._editor});case 32:return o.prev=32,l.dispose(),this._currentPasteOperation===s&&(this._currentPasteOperation=void 0),o.finish(32);case 36:case"end":return o.stop()}}),o,this,[[5,,32,36]])})))}));this._progressService.withProgress({location:10,title:(0,T.NC)("pasteAsProgress","Running paste handlers")},(function(){return s}))}},{key:"setCopyMetadata",value:function(e,t){e.setData(U,JSON.stringify(t))}},{key:"fetchCopyMetadata",value:function(e){var t;if(e.clipboardData){var n=e.clipboardData.getData(U);if(n)try{return JSON.parse(n)}catch(s){return}var r=P.b6.getTextData(e.clipboardData),i=(0,d.Z)(r,2),o=(i[0],i[1]);return o?{defaultPastePayload:{mode:o.mode,multicursorText:null!==(t=o.multicursorText)&&void 0!==t?t:null,pasteOnNewLine:!!o.isFromEmptySelection}}:void 0}}},{key:"mergeInDataFromCopy",value:function(e,t,n){var r;return j(this,void 0,void 0,(0,h.Z)().mark((function i(){var o,s,a,u,c,l,f;return(0,h.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(!(null===t||void 0===t?void 0:t.id)||(null===(r=this._currentCopyOperation)||void 0===r?void 0:r.handle)!==t.id){i.next=8;break}return i.next=3,this._currentCopyOperation.dataTransferPromise;case 3:if(o=i.sent,!n.isCancellationRequested){i.next=6;break}return i.abrupt("return");case 6:s=(0,p.Z)(o);try{for(s.s();!(a=s.n()).done;)u=(0,d.Z)(a.value,2),c=u[0],l=u[1],e.replace(c,l)}catch(h){s.e(h)}finally{s.f()}case 8:if(e.has(b.v.uriList)){i.next=15;break}return i.next=11,this._clipboardService.readResources();case 11:if(f=i.sent,!n.isCancellationRequested){i.next=14;break}return i.abrupt("return");case 14:f.length&&e.append(b.v.uriList,(0,m.ZO)(m.Z0.create(f)));case 15:case"end":return i.stop()}}),i,this)})))}},{key:"getPasteEdits",value:function(e,t,n,r,i){return j(this,void 0,void 0,(0,h.Z)().mark((function o(){var s,a,u=this;return(0,h.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,g.eP)(Promise.all(e.map((function(e){return j(u,void 0,void 0,(0,h.Z)().mark((function o(){var s,a;return(0,h.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,null===(s=e.provideDocumentPasteEdits)||void 0===s?void 0:s.call(e,n,r,t,i);case 3:if(!(a=o.sent)){o.next=6;break}return o.abrupt("return",Object.assign(Object.assign({},a),{providerId:e.id}));case 6:o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),console.error(o.t0);case 11:return o.abrupt("return",void 0);case 12:case"end":return o.stop()}}),o,null,[[0,8]])})))}))),i);case 2:return s=o.sent,a=(0,v.kX)(null!==s&&void 0!==s?s:[]),o.abrupt("return",(0,C.C)(a));case 5:case"end":return o.stop()}}),o)})))}},{key:"applyDefaultPasteHandler",value:function(e,t,n){var r,i,o;return j(this,void 0,void 0,(0,h.Z)().mark((function s(){var a,u,c;return(0,h.Z)().wrap((function(s){for(;;)switch(s.prev=s.next){case 0:if(a=null!==(r=e.get(b.v.text))&&void 0!==r?r:e.get("text")){s.next=3;break}return s.abrupt("return");case 3:return s.next=5,a.asString();case 5:if(u=s.sent,!n.isCancellationRequested){s.next=8;break}return s.abrupt("return");case 8:c={text:u,pasteOnNewLine:null!==(i=null===t||void 0===t?void 0:t.defaultPastePayload.pasteOnNewLine)&&void 0!==i&&i,multicursorText:null!==(o=null===t||void 0===t?void 0:t.defaultPastePayload.multicursorText)&&void 0!==o?o:null,mode:null},this._editor.trigger("keyboard","paste",c);case 10:case"end":return s.stop()}}),s,this)})))}}],[{key:"get",value:function(e){return e.getContribution(r.ID)}}]),n}(y.JT);function F(e,t){var n;return Boolean(null===(n=e.pasteMimeTypes)||void 0===n?void 0:n.some((function(e){return t.matches(e)})))}V.ID="editor.contrib.copyPasteActionController",V=r=R([W(1,O.TG),W(2,w.vu),W(3,I.p),W(4,D.p),W(5,L.eJ),W(6,M.R9)],V);var G=n(58008);(0,u._K)(V.ID,V,0),(0,c.y)(G.v),(0,u.fK)(new(function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{id:q,precondition:K,kbOpts:{weight:100,primary:2137}})}return(0,o.Z)(n,[{key:"runEditorCommand",value:function(e,t,n){var r;return null===(r=V.get(t))||void 0===r?void 0:r.changePasteType()}}]),n}(u._l))),(0,u.Qr)(function(e){(0,s.Z)(n,e);var t=(0,a.Z)(n);function n(){return(0,i.Z)(this,n),t.call(this,{id:"editor.action.pasteAs",label:T.NC("pasteAs","Paste As..."),alias:"Paste As...",precondition:void 0,description:{description:"Paste as",args:[{name:"args",schema:{type:"object",properties:{id:{type:"string",description:T.NC("pasteAs.id","The id of the paste edit to try applying. If not provided, the editor will show a picker.")}}}}]}})}return(0,o.Z)(n,[{key:"run",value:function(e,t,n){var r,i="string"===typeof(null===n||void 0===n?void 0:n.id)?n.id:void 0;return null===(r=V.get(t))||void 0===r?void 0:r.pasteAs(i)}}]),n}(u.R6))},58008:function(e,t,n){n.d(t,{P:function(){return S},v:function(){return E}});var r=n(37762),i=n(60136),o=n(27277),s=n(74165),a=n(15671),u=n(43144),c=n(38102),l=n(83392),d=n(65096),p=n(58915),h=n(37649),f=n(44641),v=n(38821),g=n(65441),m=n(18420),y=n(55208),b=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},_=function(e,t){return function(n,r){t(n,r,e)}},k=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},P=(0,m.NC)("builtIn","Built-in"),x=function(){function e(){(0,a.Z)(this,e)}return(0,u.Z)(e,[{key:"provideDocumentPasteEdits",value:function(e,t,n,r){return k(this,void 0,void 0,(0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEdit(n,r);case 2:return t=e.sent,e.abrupt("return",t?{insertText:t.insertText,label:t.label,detail:t.detail,handledMimeType:t.handledMimeType,yieldTo:t.yieldTo}:void 0);case 4:case"end":return e.stop()}}),e,this)})))}},{key:"provideDocumentOnDropEdits",value:function(e,t,n,r){return k(this,void 0,void 0,(0,s.Z)().mark((function e(){var t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getEdit(n,r);case 2:return t=e.sent,e.abrupt("return",t?{insertText:t.insertText,label:t.label,handledMimeType:t.handledMimeType,yieldTo:t.yieldTo}:void 0);case 4:case"end":return e.stop()}}),e,this)})))}}]),e}(),w=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).id="text",e.dropMimeTypes=[p.v.text],e.pasteMimeTypes=[p.v.text],e}return(0,u.Z)(n,[{key:"getEdit",value:function(e,t){return k(this,void 0,void 0,(0,s.Z)().mark((function t(){var n,r;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.get(p.v.text)){t.next=3;break}return t.abrupt("return");case 3:if(!e.has(p.v.uriList)){t.next=5;break}return t.abrupt("return");case 5:return t.next=7,n.asString();case 7:return r=t.sent,t.abrupt("return",{handledMimeType:p.v.text,label:(0,m.NC)("text.label","Insert Plain Text"),detail:P,insertText:r});case 9:case"end":return t.stop()}}),t)})))}}]),n}(x),Z=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(){var e;return(0,a.Z)(this,n),(e=t.apply(this,arguments)).id="uri",e.dropMimeTypes=[p.v.uriList],e.pasteMimeTypes=[p.v.uriList],e}return(0,u.Z)(n,[{key:"getEdit",value:function(e,t){return k(this,void 0,void 0,(0,s.Z)().mark((function n(){var r,i,o,a;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C(e);case 2:if((r=n.sent).length&&!t.isCancellationRequested){n.next=5;break}return n.abrupt("return");case 5:return i=0,o=r.map((function(e){var t=e.uri,n=e.originalText;return t.scheme===h.lg.file?t.fsPath:(i++,n)})).join(" "),a=i>0?r.length>1?(0,m.NC)("defaultDropProvider.uriList.uris","Insert Uris"):(0,m.NC)("defaultDropProvider.uriList.uri","Insert Uri"):r.length>1?(0,m.NC)("defaultDropProvider.uriList.paths","Insert Paths"):(0,m.NC)("defaultDropProvider.uriList.path","Insert Path"),n.abrupt("return",{handledMimeType:p.v.uriList,insertText:o,label:a,detail:P});case 9:case"end":return n.stop()}}),n)})))}}]),n}(x),D=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(e){var r;return(0,a.Z)(this,n),(r=t.call(this))._workspaceContextService=e,r.id="relativePath",r.dropMimeTypes=[p.v.uriList],r.pasteMimeTypes=[p.v.uriList],r}return(0,u.Z)(n,[{key:"getEdit",value:function(e,t){return k(this,void 0,void 0,(0,s.Z)().mark((function n(){var r,i,o=this;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,C(e);case 2:if((r=n.sent).length&&!t.isCancellationRequested){n.next=5;break}return n.abrupt("return");case 5:if((i=(0,c.kX)(r.map((function(e){var t=e.uri,n=o._workspaceContextService.getWorkspaceFolder(t);return n?(0,f.lX)(n.uri,t):void 0})))).length){n.next=8;break}return n.abrupt("return");case 8:return n.abrupt("return",{handledMimeType:p.v.uriList,insertText:i.join(" "),label:r.length>1?(0,m.NC)("defaultDropProvider.uriList.relativePaths","Insert Relative Paths"):(0,m.NC)("defaultDropProvider.uriList.relativePath","Insert Relative Path"),detail:P});case 9:case"end":return n.stop()}}),n)})))}}]),n}(x);function C(e){return k(this,void 0,void 0,(0,s.Z)().mark((function t(){var n,i,o,a,u,c;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.get(p.v.uriList)){t.next=3;break}return t.abrupt("return",[]);case 3:return t.next=5,n.asString();case 5:i=t.sent,o=[],a=(0,r.Z)(l.Z0.parse(i));try{for(a.s();!(u=a.n()).done;){c=u.value;try{o.push({uri:v.o.parse(c),originalText:c})}catch(s){}}}catch(d){a.e(d)}finally{a.f()}return t.abrupt("return",o);case 10:case"end":return t.stop()}}),t)})))}D=b([_(0,y.ec)],D);var S=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this))._register(e.documentOnDropEditProvider.register("*",new w)),i._register(e.documentOnDropEditProvider.register("*",new Z)),i._register(e.documentOnDropEditProvider.register("*",new D(r))),i}return(0,u.Z)(n)}(d.JT);S=b([_(0,g.p),_(1,y.ec)],S);var E=function(e){(0,i.Z)(n,e);var t=(0,o.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this))._register(e.documentPasteEditProvider.register("*",new w)),i._register(e.documentPasteEditProvider.register("*",new Z)),i._register(e.documentPasteEditProvider.register("*",new D(r))),i}return(0,u.Z)(n)}(d.JT);E=b([_(0,g.p),_(1,y.ec)],E)},85052:function(e,t,n){n.r(t);var r,i=n(4942),o=n(15671),s=n(43144),a=n(60136),u=n(27277),c=n(95253),l=n(89212),d=n(62636),p=n(58008),h=n(18420),f=n(92328),v=n(43357),g=n(37762),m=n(29439),y=n(74165),b=n(38102),_=n(71049),k=n(83392),P=n(65096),x=n(69815),w=n(17429),Z=n(65441),D=n(2260),C=n(81720),S=n(16836),E=n(92303),T=n(77819),I=n(8022),N=n(48909),O=n(64606),M=n(43845),L=n(31959),A=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},R=function(e,t){return function(n,r){t(n,r,e)}},W=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},j="editor.experimental.dropIntoEditor.defaultProvider",q="editor.changeDropType",K=new I.uy("dropWidgetVisible",!1,(0,h.NC)("dropWidgetVisible","Whether the drop widget is showing")),U=r=function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(e,r,i,s,a){var u;return(0,o.Z)(this,n),(u=t.call(this))._configService=i,u._languageFeaturesService=s,u._treeViewsDragAndDropService=a,u.treeItemsTransfer=N.Ej.getInstance(),u._dropProgressManager=u._register(r.createInstance(E.InlineProgressManager,"dropIntoEditor",e)),u._postDropWidgetManager=u._register(r.createInstance(L.p,"dropIntoEditor",e,K,{id:q,label:(0,h.NC)("postDropWidgetTitle","Show drop options...")})),u._register(e.onDropIntoEditor((function(t){return u.onDropIntoEditor(e,t.position,t.event)}))),u}return(0,s.Z)(n,[{key:"changeDropType",value:function(){this._postDropWidgetManager.tryShowSelector()}},{key:"onDropIntoEditor",value:function(e,t,n){var r;return W(this,void 0,void 0,(0,y.Z)().mark((function i(){var o,s=this;return(0,y.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(n.dataTransfer&&e.hasModel()){i.next=2;break}return i.abrupt("return");case 2:null===(r=this._currentOperation)||void 0===r||r.cancel(),e.focus(),e.setPosition(t),o=(0,_.PG)((function(r){return W(s,void 0,void 0,(0,y.Z)().mark((function i(){var s,a,u,c,l,d,p;return(0,y.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return s=new S.Dl(e,1,void 0,r),i.prev=1,i.next=4,this.extractDataTransferData(n);case 4:if(0!==(a=i.sent).size&&!s.token.isCancellationRequested){i.next=7;break}return i.abrupt("return");case 7:if(u=e.getModel()){i.next=10;break}return i.abrupt("return");case 10:return c=this._languageFeaturesService.documentOnDropEditProvider.ordered(u).filter((function(e){return!e.dropMimeTypes||e.dropMimeTypes.some((function(e){return a.matches(e)}))})),i.next=13,this.getDropEdits(c,u,t,a,s);case 13:if(l=i.sent,!s.token.isCancellationRequested){i.next=16;break}return i.abrupt("return");case 16:if(!l.length){i.next=21;break}return d=this.getInitialActiveEditIndex(u,l),p="afterDrop"===e.getOption(36).showDropSelector,i.next=21,this._postDropWidgetManager.applyEditAndShowIfNeeded([w.e.fromPositions(t)],{activeEditIndex:d,allEdits:l},p,r);case 21:return i.prev=21,s.dispose(),this._currentOperation===o&&(this._currentOperation=void 0),i.finish(21);case 25:case"end":return i.stop()}}),i,this,[[1,,21,25]])})))})),this._dropProgressManager.showWhile(t,(0,h.NC)("dropIntoEditorProgress","Running drop handlers. Click to cancel"),o),this._currentOperation=o;case 8:case"end":return i.stop()}}),i,this)})))}},{key:"getDropEdits",value:function(e,t,n,r,i){return W(this,void 0,void 0,(0,y.Z)().mark((function o(){var s,a,u=this;return(0,y.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,_.eP)(Promise.all(e.map((function(e){return W(u,void 0,void 0,(0,y.Z)().mark((function o(){var s;return(0,y.Z)().wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,e.provideDocumentOnDropEdits(t,n,r,i.token);case 3:if(!(s=o.sent)){o.next=6;break}return o.abrupt("return",Object.assign(Object.assign({},s),{providerId:e.id}));case 6:o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),console.error(o.t0);case 11:return o.abrupt("return",void 0);case 12:case"end":return o.stop()}}),o,null,[[0,8]])})))}))),i.token);case 2:return s=o.sent,a=(0,b.kX)(null!==s&&void 0!==s?s:[]),o.abrupt("return",(0,M.C)(a));case 5:case"end":return o.stop()}}),o)})))}},{key:"getInitialActiveEditIndex",value:function(e,t){for(var n,r=this._configService.getValue(j,{resource:e.uri}),i=function(){var e=(0,m.Z)(s[o],2),n=e[0],r=e[1],i=t.findIndex((function(e){return r===e.providerId&&e.handledMimeType&&(0,k.SN)(n,[e.handledMimeType])}));if(i>=0)return{v:i}},o=0,s=Object.entries(r);o<s.length;o++)if(n=i())return n.v;return 0}},{key:"extractDataTransferData",value:function(e){return W(this,void 0,void 0,(0,y.Z)().mark((function t(){var n,r,i,o,s,a,u,c,l,d,p;return(0,y.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.dataTransfer){t.next=2;break}return t.abrupt("return",new k.Hl);case 2:if(n=(0,x.L)(e.dataTransfer),!this.treeItemsTransfer.hasData(D.f.prototype)){t.next=25;break}if(r=this.treeItemsTransfer.getData(D.f.prototype),!Array.isArray(r)){t.next=25;break}i=(0,g.Z)(r),t.prev=7,i.s();case 9:if((o=i.n()).done){t.next=17;break}return s=o.value,t.next=13,this._treeViewsDragAndDropService.removeDragOperationTransfer(s.identifier);case 13:if(a=t.sent){u=(0,g.Z)(a);try{for(u.s();!(c=u.n()).done;)l=(0,m.Z)(c.value,2),d=l[0],p=l[1],n.replace(d,p)}catch(h){u.e(h)}finally{u.f()}}case 15:t.next=9;break;case 17:t.next=22;break;case 19:t.prev=19,t.t0=t.catch(7),i.e(t.t0);case 22:return t.prev=22,i.f(),t.finish(22);case 25:return t.abrupt("return",n);case 26:case"end":return t.stop()}}),t,this,[[7,19,22,25]])})))}}],[{key:"get",value:function(e){return e.getContribution(r.ID)}}]),n}(P.JT);U.ID="editor.contrib.dropIntoEditorController",U=r=A([R(1,O.TG),R(2,T.Ui),R(3,Z.p),R(4,C.m)],U),(0,c._K)(U.ID,U,2),(0,c.fK)(new(function(e){(0,a.Z)(n,e);var t=(0,u.Z)(n);function n(){return(0,o.Z)(this,n),t.call(this,{id:q,precondition:K,kbOpts:{weight:100,primary:2137}})}return(0,s.Z)(n,[{key:"runEditorCommand",value:function(e,t,n){var r;null===(r=U.get(t))||void 0===r||r.changeDropType()}}]),n}(c._l))),(0,d.y)(p.P),v.B.as(f.IP.Configuration).registerConfiguration(Object.assign(Object.assign({},l.wk),{properties:(0,i.Z)({},j,{type:"object",scope:5,description:h.NC("defaultProviderDescription","Configures the default drop provider to use for content of a given mime type."),default:{},additionalProperties:{type:"string"}})}))},43845:function(e,t,n){n.d(t,{C:function(){return a},n:function(){return s}});var r=n(37762),i=n(93433),o=n(48895);function s(e,t,n){var r,s;return{edits:[].concat((0,i.Z)(t.map((function(t){return new o.Gl(e,"string"===typeof n.insertText?{range:t,text:n.insertText,insertAsSnippet:!1}:{range:t,text:n.insertText.snippet,insertAsSnippet:!0})}))),(0,i.Z)(null!==(s=null===(r=n.additionalEdit)||void 0===r?void 0:r.edits)&&void 0!==s?s:[]))}}function a(e){var t;function n(e,t){return"providerId"in e&&e.providerId===t.providerId||"mimeType"in e&&e.mimeType===t.handledMimeType}var o,s=new Map,a=(0,r.Z)(e);try{for(a.s();!(o=a.n()).done;){var u,c=o.value,l=(0,r.Z)(null!==(t=c.yieldTo)&&void 0!==t?t:[]);try{for(l.s();!(u=l.n()).done;){var d,p=u.value,h=(0,r.Z)(e);try{for(h.s();!(d=h.n()).done;){var f=d.value;if(f!==c&&n(p,f)){var v=s.get(c);v||(v=[],s.set(c,v)),v.push(f)}}}catch(y){h.e(y)}finally{h.f()}}}catch(y){l.e(y)}finally{l.f()}}}catch(y){a.e(y)}finally{a.f()}if(!s.size)return Array.from(e);var g=new Set,m=[];return function e(t){if(!t.length)return[];var n=t[0];if(m.includes(n))return console.warn("Yield to cycle detected for ".concat(n.providerId)),t;if(g.has(n))return e(t.slice(1));var r=[],o=s.get(n);return o&&(m.push(n),r=e(o),m.pop()),g.add(n),[].concat((0,i.Z)(r),[n],(0,i.Z)(e(t.slice(1))))}(Array.from(e))}},31959:function(e,t,n){n.d(t,{p:function(){return Z}});var r,i=n(74165),o=n(93433),s=n(15671),a=n(43144),u=n(97326),c=n(60136),l=n(27277),d=n(32959),p=n(24713),h=n(93720),f=n(13880),v=n(65096),g=n(48895),m=n(8022),y=n(92361),b=n(64606),_=n(75256),k=function(e,t,n,r){var i,o=arguments.length,s=o<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)s=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(i=e[a])&&(s=(o<3?i(s):o>3?i(t,n,s):i(t,n))||s);return o>3&&s&&Object.defineProperty(t,n,s),s},P=function(e,t){return function(n,r){t(n,r,e)}},x=function(e,t,n,r){return new(n||(n=Promise))((function(i,o){function s(e){try{u(r.next(e))}catch(t){o(t)}}function a(e){try{u(r.throw(e))}catch(t){o(t)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}u((r=r.apply(e,t||[])).next())}))},w=r=function(e){(0,c.Z)(n,e);var t=(0,l.Z)(n);function n(e,r,i,o,a,c,l,d,p,h){var g;return(0,s.Z)(this,n),(g=t.call(this)).typeId=e,g.editor=r,g.showCommand=o,g.range=a,g.edits=c,g.onSelectNewEdit=l,g._contextMenuService=d,g._keybindingService=h,g.allowEditorOverflow=!0,g.suppressMouseDown=!0,g.create(),g.visibleContext=i.bindTo(p),g.visibleContext.set(!0),g._register((0,v.OF)((function(){return g.visibleContext.reset()}))),g.editor.addContentWidget((0,u.Z)(g)),g.editor.layoutContentWidget((0,u.Z)(g)),g._register((0,v.OF)((function(){return g.editor.removeContentWidget((0,u.Z)(g))}))),g._register(g.editor.onDidChangeCursorPosition((function(e){a.containsPosition(e.position)||g.dispose()}))),g._register(f.ju.runAndSubscribe(h.onDidUpdateKeybindings,(function(){g._updateButtonTitle()}))),g}return(0,a.Z)(n,[{key:"_updateButtonTitle",value:function(){var e,t=null===(e=this._keybindingService.lookupKeybinding(this.showCommand.id))||void 0===e?void 0:e.getLabel();this.button.element.title=this.showCommand.label+(t?" (".concat(t,")"):"")}},{key:"create",value:function(){var e=this;this.domNode=d.$(".post-edit-widget"),this.button=this._register(new p.z(this.domNode,{supportIcons:!0})),this.button.label="$(insert)",this._register(d.addDisposableListener(this.domNode,d.EventType.CLICK,(function(){return e.showSelector()})))}},{key:"getId",value:function(){return r.baseId+"."+this.typeId}},{key:"getDomNode",value:function(){return this.domNode}},{key:"getPosition",value:function(){return{position:this.range.getEndPosition(),preference:[2]}}},{key:"showSelector",value:function(){var e=this;this._contextMenuService.showContextMenu({getAnchor:function(){var t=d.getDomNodePagePosition(e.button.element);return{x:t.left+t.width,y:t.top+t.height}},getActions:function(){return e.edits.allEdits.map((function(t,n){return(0,h.xw)({id:"",label:t.label,checked:n===e.edits.activeEditIndex,run:function(){if(n!==e.edits.activeEditIndex)return e.onSelectNewEdit(n)}})}))}})}}]),n}(v.JT);w.baseId="editor.widget.postEditWidget",w=r=k([P(7,y.i),P(8,m.i6),P(9,_.d)],w);var Z=function(e){(0,c.Z)(n,e);var t=(0,l.Z)(n);function n(e,r,i,o,a,u){var c;return(0,s.Z)(this,n),(c=t.call(this))._id=e,c._editor=r,c._visibleContext=i,c._showCommand=o,c._instantiationService=a,c._bulkEditService=u,c._currentWidget=c._register(new v.XK),c._register(f.ju.any(r.onDidChangeModel,r.onDidChangeModelContent)((function(){return c.clear()}))),c}return(0,a.Z)(n,[{key:"applyEditAndShowIfNeeded",value:function(e,t,n,r){var s,a;return x(this,void 0,void 0,(0,i.Z)().mark((function u(){var c,l,d,p,h,f,v,m,y,b=this;return(0,i.Z)().wrap((function(u){for(;;)switch(u.prev=u.next){case 0:if((c=this._editor.getModel())&&e.length){u.next=3;break}return u.abrupt("return");case 3:if(l=t.allEdits[t.activeEditIndex]){u.next=6;break}return u.abrupt("return");case 6:return d=[],d=("string"===typeof l.insertText?""===l.insertText:""===l.insertText.snippet)?[]:e.map((function(e){return new g.Gl(c.uri,"string"===typeof l.insertText?{range:e,text:l.insertText,insertAsSnippet:!1}:{range:e,text:l.insertText.snippet,insertAsSnippet:!0})})),p=[].concat((0,o.Z)(d),(0,o.Z)(null!==(a=null===(s=l.additionalEdit)||void 0===s?void 0:s.edits)&&void 0!==a?a:[])),h={edits:p},f=e[0],v=c.deltaDecorations([],[{range:f,options:{description:"paste-line-suffix",stickiness:0}}]),u.prev=12,u.next=15,this._bulkEditService.apply(h,{editor:this._editor,token:r});case 15:m=u.sent,y=c.getDecorationRange(v[0]);case 17:return u.prev=17,c.deltaDecorations(v,[]),u.finish(17);case 20:n&&m.isApplied&&t.allEdits.length>1&&this.show(null!==y&&void 0!==y?y:f,t,(function(o){return x(b,void 0,void 0,(0,i.Z)().mark((function s(){var a;return(0,i.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=this._editor.getModel()){i.next=3;break}return i.abrupt("return");case 3:return i.next=5,a.undo();case 5:this.applyEditAndShowIfNeeded(e,{activeEditIndex:o,allEdits:t.allEdits},n,r);case 6:case"end":return i.stop()}}),s,this)})))}));case 21:case"end":return u.stop()}}),u,this,[[12,,17,20]])})))}},{key:"show",value:function(e,t,n){this.clear(),this._editor.hasModel()&&(this._currentWidget.value=this._instantiationService.createInstance(w,this._id,this._editor,this._visibleContext,this._showCommand,e,t,n))}},{key:"clear",value:function(){this._currentWidget.clear()}},{key:"tryShowSelector",value:function(){var e;null===(e=this._currentWidget.value)||void 0===e||e.showSelector()}}]),n}(v.JT);Z=k([P(4,b.TG),P(5,g.vu)],Z)},16836:function(e,t,n){n.d(t,{yy:function(){return x},Dl:function(){return w},YQ:function(){return Z}});var r=n(11752),i=n(61120),o=n(60136),s=n(27277),a=n(15671),u=n(43144),c=n(31906),l=n(17429),d=n(7388),p=n(65096),h=n(97326),f=n(95253),v=n(8022),g=n(49192),m=n(64606),y=n(57832),b=n(18420),_=(0,m.yh)("IEditorCancelService"),k=new v.uy("cancellableOperation",!1,(0,b.NC)("cancellableOperation","Whether the editor runs a cancellable operation, e.g. like 'Peek References'"));(0,y.z)(_,function(){function e(){(0,a.Z)(this,e),this._tokens=new WeakMap}return(0,u.Z)(e,[{key:"add",value:function(e,t){var n,r=this._tokens.get(e);return r||(r=e.invokeWithinContext((function(e){return{key:k.bindTo(e.get(v.i6)),tokens:new g.S}})),this._tokens.set(e,r)),r.key.set(!0),n=r.tokens.push(t),function(){n&&(n(),r.key.set(!r.tokens.isEmpty()),n=void 0)}}},{key:"cancel",value:function(e){var t=this._tokens.get(e);if(t){var n=t.tokens.pop();n&&(n.cancel(),t.key.set(!t.tokens.isEmpty()))}}}]),e}(),1);var P=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,r)).editor=e,i._unregister=e.invokeWithinContext((function(t){return t.get(_).add(e,(0,h.Z)(i))})),i}return(0,u.Z)(n,[{key:"dispose",value:function(){this._unregister(),(0,r.Z)((0,i.Z)(n.prototype),"dispose",this).call(this)}}]),n}(d.A);(0,f.fK)(new(function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(){return(0,a.Z)(this,n),t.call(this,{id:"editor.cancelOperation",kbOpts:{weight:100,primary:9},precondition:k})}return(0,u.Z)(n,[{key:"runEditorCommand",value:function(e,t){e.get(_).cancel(t)}}]),n}(f._l)));var x=function(){function e(t,n){if((0,a.Z)(this,e),this.flags=n,0!==(1&this.flags)){var r=t.getModel();this.modelVersionId=r?c.WU("{0}#{1}",r.uri.toString(),r.getVersionId()):null}else this.modelVersionId=null;0!==(4&this.flags)?this.position=t.getPosition():this.position=null,0!==(2&this.flags)?this.selection=t.getSelection():this.selection=null,0!==(8&this.flags)?(this.scrollLeft=t.getScrollLeft(),this.scrollTop=t.getScrollTop()):(this.scrollLeft=-1,this.scrollTop=-1)}return(0,u.Z)(e,[{key:"_equals",value:function(t){if(!(t instanceof e))return!1;var n=t;return this.modelVersionId===n.modelVersionId&&(this.scrollLeft===n.scrollLeft&&this.scrollTop===n.scrollTop&&(!(!this.position&&n.position||this.position&&!n.position||this.position&&n.position&&!this.position.equals(n.position))&&!(!this.selection&&n.selection||this.selection&&!n.selection||this.selection&&n.selection&&!this.selection.equalsRange(n.selection))))}},{key:"validate",value:function(t){return this._equals(new e(t,this.flags))}}]),e}(),w=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,r,i,o){var s;return(0,a.Z)(this,n),(s=t.call(this,e,o))._listener=new p.SL,4&r&&s._listener.add(e.onDidChangeCursorPosition((function(e){i&&l.e.containsPosition(i,e.position)||s.cancel()}))),2&r&&s._listener.add(e.onDidChangeCursorSelection((function(e){i&&l.e.containsRange(i,e.selection)||s.cancel()}))),8&r&&s._listener.add(e.onDidScrollChange((function(e){return s.cancel()}))),1&r&&(s._listener.add(e.onDidChangeModel((function(e){return s.cancel()}))),s._listener.add(e.onDidChangeModelContent((function(e){return s.cancel()})))),s}return(0,u.Z)(n,[{key:"dispose",value:function(){this._listener.dispose(),(0,r.Z)((0,i.Z)(n.prototype),"dispose",this).call(this)}}]),n}(P),Z=function(e){(0,o.Z)(n,e);var t=(0,s.Z)(n);function n(e,r){var i;return(0,a.Z)(this,n),(i=t.call(this,r))._listener=e.onDidChangeContent((function(){return i.cancel()})),i}return(0,u.Z)(n,[{key:"dispose",value:function(){this._listener.dispose(),(0,r.Z)((0,i.Z)(n.prototype),"dispose",this).call(this)}}]),n}(d.A)}}]);
//# sourceMappingURL=monaco-editor-vendor.b74e11c3.5ed311a0.js.map