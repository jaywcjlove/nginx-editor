{"version":3,"file":"static/js/monaco-editor-vendor.55a95165.94746b7f.js","mappings":"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","sources":["../../node_modules/monaco-editor/esm/vs/editor/browser/view/renderingContext.js","../../node_modules/monaco-editor/esm/vs/editor/browser/view/viewController.js","../../node_modules/monaco-editor/esm/vs/editor/browser/view/viewLayer.js","../../node_modules/monaco-editor/esm/vs/editor/browser/view/viewOverlays.js","../../node_modules/monaco-editor/esm/vs/editor/browser/view/viewPart.js","../../node_modules/monaco-editor/esm/vs/editor/browser/view/viewUserInputEvents.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorContributions.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/codeEditorWidget.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditor.contribution.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/utils.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/accessibleDiffViewer.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/decorations.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/movedBlocksLines.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorDecorations.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorSash.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/outlineModel.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/hideUnchangedRegionsFeature.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/workerBasedDocumentDiffProvider.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffProviderFactoryService.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorViewModel.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/inlineDiffDeletedCodeMargin.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/renderLines.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/lineAlignment.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/overviewRulerPart.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/colors.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/delegatingEditorImpl.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorEditors.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorOptions.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/diffEditor/diffEditorWidget.js","../../node_modules/monaco-editor/esm/vs/editor/browser/widget/embeddedCodeEditorWidget.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport class RestrictedRenderingContext {\n    constructor(viewLayout, viewportData) {\n        this._restrictedRenderingContextBrand = undefined;\n        this._viewLayout = viewLayout;\n        this.viewportData = viewportData;\n        this.scrollWidth = this._viewLayout.getScrollWidth();\n        this.scrollHeight = this._viewLayout.getScrollHeight();\n        this.visibleRange = this.viewportData.visibleRange;\n        this.bigNumbersDelta = this.viewportData.bigNumbersDelta;\n        const vInfo = this._viewLayout.getCurrentViewport();\n        this.scrollTop = vInfo.top;\n        this.scrollLeft = vInfo.left;\n        this.viewportWidth = vInfo.width;\n        this.viewportHeight = vInfo.height;\n    }\n    getScrolledTopFromAbsoluteTop(absoluteTop) {\n        return absoluteTop - this.scrollTop;\n    }\n    getVerticalOffsetForLineNumber(lineNumber, includeViewZones) {\n        return this._viewLayout.getVerticalOffsetForLineNumber(lineNumber, includeViewZones);\n    }\n    getVerticalOffsetAfterLineNumber(lineNumber, includeViewZones) {\n        return this._viewLayout.getVerticalOffsetAfterLineNumber(lineNumber, includeViewZones);\n    }\n    getDecorationsInViewport() {\n        return this.viewportData.getDecorationsInViewport();\n    }\n}\nexport class RenderingContext extends RestrictedRenderingContext {\n    constructor(viewLayout, viewportData, viewLines) {\n        super(viewLayout, viewportData);\n        this._renderingContextBrand = undefined;\n        this._viewLines = viewLines;\n    }\n    linesVisibleRangesForRange(range, includeNewLines) {\n        return this._viewLines.linesVisibleRangesForRange(range, includeNewLines);\n    }\n    visibleRangeForPosition(position) {\n        return this._viewLines.visibleRangeForPosition(position);\n    }\n}\nexport class LineVisibleRanges {\n    constructor(outsideRenderedLine, lineNumber, ranges, \n    /**\n     * Indicates if the requested range does not end in this line, but continues on the next line.\n     */\n    continuesOnNextLine) {\n        this.outsideRenderedLine = outsideRenderedLine;\n        this.lineNumber = lineNumber;\n        this.ranges = ranges;\n        this.continuesOnNextLine = continuesOnNextLine;\n    }\n}\nexport class HorizontalRange {\n    static from(ranges) {\n        const result = new Array(ranges.length);\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            const range = ranges[i];\n            result[i] = new HorizontalRange(range.left, range.width);\n        }\n        return result;\n    }\n    constructor(left, width) {\n        this._horizontalRangeBrand = undefined;\n        this.left = Math.round(left);\n        this.width = Math.round(width);\n    }\n    toString() {\n        return `[${this.left},${this.width}]`;\n    }\n}\nexport class FloatHorizontalRange {\n    constructor(left, width) {\n        this._floatHorizontalRangeBrand = undefined;\n        this.left = left;\n        this.width = width;\n    }\n    toString() {\n        return `[${this.left},${this.width}]`;\n    }\n    static compare(a, b) {\n        return a.left - b.left;\n    }\n}\nexport class HorizontalPosition {\n    constructor(outsideRenderedLine, left) {\n        this.outsideRenderedLine = outsideRenderedLine;\n        this.originalLeft = left;\n        this.left = Math.round(this.originalLeft);\n    }\n}\nexport class VisibleRanges {\n    constructor(outsideRenderedLine, ranges) {\n        this.outsideRenderedLine = outsideRenderedLine;\n        this.ranges = ranges;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CoreNavigationCommands } from '../coreCommands.js';\nimport { Position } from '../../common/core/position.js';\nimport * as platform from '../../../base/common/platform.js';\nexport class ViewController {\n    constructor(configuration, viewModel, userInputEvents, commandDelegate) {\n        this.configuration = configuration;\n        this.viewModel = viewModel;\n        this.userInputEvents = userInputEvents;\n        this.commandDelegate = commandDelegate;\n    }\n    paste(text, pasteOnNewLine, multicursorText, mode) {\n        this.commandDelegate.paste(text, pasteOnNewLine, multicursorText, mode);\n    }\n    type(text) {\n        this.commandDelegate.type(text);\n    }\n    compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) {\n        this.commandDelegate.compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta);\n    }\n    compositionStart() {\n        this.commandDelegate.startComposition();\n    }\n    compositionEnd() {\n        this.commandDelegate.endComposition();\n    }\n    cut() {\n        this.commandDelegate.cut();\n    }\n    setSelection(modelSelection) {\n        CoreNavigationCommands.SetSelection.runCoreEditorCommand(this.viewModel, {\n            source: 'keyboard',\n            selection: modelSelection\n        });\n    }\n    _validateViewColumn(viewPosition) {\n        const minColumn = this.viewModel.getLineMinColumn(viewPosition.lineNumber);\n        if (viewPosition.column < minColumn) {\n            return new Position(viewPosition.lineNumber, minColumn);\n        }\n        return viewPosition;\n    }\n    _hasMulticursorModifier(data) {\n        switch (this.configuration.options.get(77 /* EditorOption.multiCursorModifier */)) {\n            case 'altKey':\n                return data.altKey;\n            case 'ctrlKey':\n                return data.ctrlKey;\n            case 'metaKey':\n                return data.metaKey;\n            default:\n                return false;\n        }\n    }\n    _hasNonMulticursorModifier(data) {\n        switch (this.configuration.options.get(77 /* EditorOption.multiCursorModifier */)) {\n            case 'altKey':\n                return data.ctrlKey || data.metaKey;\n            case 'ctrlKey':\n                return data.altKey || data.metaKey;\n            case 'metaKey':\n                return data.ctrlKey || data.altKey;\n            default:\n                return false;\n        }\n    }\n    dispatchMouse(data) {\n        const options = this.configuration.options;\n        const selectionClipboardIsOn = (platform.isLinux && options.get(106 /* EditorOption.selectionClipboard */));\n        const columnSelection = options.get(22 /* EditorOption.columnSelection */);\n        if (data.middleButton && !selectionClipboardIsOn) {\n            this._columnSelect(data.position, data.mouseColumn, data.inSelectionMode);\n        }\n        else if (data.startedOnLineNumbers) {\n            // If the dragging started on the gutter, then have operations work on the entire line\n            if (this._hasMulticursorModifier(data)) {\n                if (data.inSelectionMode) {\n                    this._lastCursorLineSelect(data.position, data.revealType);\n                }\n                else {\n                    this._createCursor(data.position, true);\n                }\n            }\n            else {\n                if (data.inSelectionMode) {\n                    this._lineSelectDrag(data.position, data.revealType);\n                }\n                else {\n                    this._lineSelect(data.position, data.revealType);\n                }\n            }\n        }\n        else if (data.mouseDownCount >= 4) {\n            this._selectAll();\n        }\n        else if (data.mouseDownCount === 3) {\n            if (this._hasMulticursorModifier(data)) {\n                if (data.inSelectionMode) {\n                    this._lastCursorLineSelectDrag(data.position, data.revealType);\n                }\n                else {\n                    this._lastCursorLineSelect(data.position, data.revealType);\n                }\n            }\n            else {\n                if (data.inSelectionMode) {\n                    this._lineSelectDrag(data.position, data.revealType);\n                }\n                else {\n                    this._lineSelect(data.position, data.revealType);\n                }\n            }\n        }\n        else if (data.mouseDownCount === 2) {\n            if (!data.onInjectedText) {\n                if (this._hasMulticursorModifier(data)) {\n                    this._lastCursorWordSelect(data.position, data.revealType);\n                }\n                else {\n                    if (data.inSelectionMode) {\n                        this._wordSelectDrag(data.position, data.revealType);\n                    }\n                    else {\n                        this._wordSelect(data.position, data.revealType);\n                    }\n                }\n            }\n        }\n        else {\n            if (this._hasMulticursorModifier(data)) {\n                if (!this._hasNonMulticursorModifier(data)) {\n                    if (data.shiftKey) {\n                        this._columnSelect(data.position, data.mouseColumn, true);\n                    }\n                    else {\n                        // Do multi-cursor operations only when purely alt is pressed\n                        if (data.inSelectionMode) {\n                            this._lastCursorMoveToSelect(data.position, data.revealType);\n                        }\n                        else {\n                            this._createCursor(data.position, false);\n                        }\n                    }\n                }\n            }\n            else {\n                if (data.inSelectionMode) {\n                    if (data.altKey) {\n                        this._columnSelect(data.position, data.mouseColumn, true);\n                    }\n                    else {\n                        if (columnSelection) {\n                            this._columnSelect(data.position, data.mouseColumn, true);\n                        }\n                        else {\n                            this._moveToSelect(data.position, data.revealType);\n                        }\n                    }\n                }\n                else {\n                    this.moveTo(data.position, data.revealType);\n                }\n            }\n        }\n    }\n    _usualArgs(viewPosition, revealType) {\n        viewPosition = this._validateViewColumn(viewPosition);\n        return {\n            source: 'mouse',\n            position: this._convertViewToModelPosition(viewPosition),\n            viewPosition,\n            revealType\n        };\n    }\n    moveTo(viewPosition, revealType) {\n        CoreNavigationCommands.MoveTo.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _moveToSelect(viewPosition, revealType) {\n        CoreNavigationCommands.MoveToSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _columnSelect(viewPosition, mouseColumn, doColumnSelect) {\n        viewPosition = this._validateViewColumn(viewPosition);\n        CoreNavigationCommands.ColumnSelect.runCoreEditorCommand(this.viewModel, {\n            source: 'mouse',\n            position: this._convertViewToModelPosition(viewPosition),\n            viewPosition: viewPosition,\n            mouseColumn: mouseColumn,\n            doColumnSelect: doColumnSelect\n        });\n    }\n    _createCursor(viewPosition, wholeLine) {\n        viewPosition = this._validateViewColumn(viewPosition);\n        CoreNavigationCommands.CreateCursor.runCoreEditorCommand(this.viewModel, {\n            source: 'mouse',\n            position: this._convertViewToModelPosition(viewPosition),\n            viewPosition: viewPosition,\n            wholeLine: wholeLine\n        });\n    }\n    _lastCursorMoveToSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorMoveToSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _wordSelect(viewPosition, revealType) {\n        CoreNavigationCommands.WordSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _wordSelectDrag(viewPosition, revealType) {\n        CoreNavigationCommands.WordSelectDrag.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lastCursorWordSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorWordSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lineSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LineSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lineSelectDrag(viewPosition, revealType) {\n        CoreNavigationCommands.LineSelectDrag.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lastCursorLineSelect(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorLineSelect.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _lastCursorLineSelectDrag(viewPosition, revealType) {\n        CoreNavigationCommands.LastCursorLineSelectDrag.runCoreEditorCommand(this.viewModel, this._usualArgs(viewPosition, revealType));\n    }\n    _selectAll() {\n        CoreNavigationCommands.SelectAll.runCoreEditorCommand(this.viewModel, { source: 'mouse' });\n    }\n    // ----------------------\n    _convertViewToModelPosition(viewPosition) {\n        return this.viewModel.coordinatesConverter.convertViewPositionToModelPosition(viewPosition);\n    }\n    emitKeyDown(e) {\n        this.userInputEvents.emitKeyDown(e);\n    }\n    emitKeyUp(e) {\n        this.userInputEvents.emitKeyUp(e);\n    }\n    emitContextMenu(e) {\n        this.userInputEvents.emitContextMenu(e);\n    }\n    emitMouseMove(e) {\n        this.userInputEvents.emitMouseMove(e);\n    }\n    emitMouseLeave(e) {\n        this.userInputEvents.emitMouseLeave(e);\n    }\n    emitMouseUp(e) {\n        this.userInputEvents.emitMouseUp(e);\n    }\n    emitMouseDown(e) {\n        this.userInputEvents.emitMouseDown(e);\n    }\n    emitMouseDrag(e) {\n        this.userInputEvents.emitMouseDrag(e);\n    }\n    emitMouseDrop(e) {\n        this.userInputEvents.emitMouseDrop(e);\n    }\n    emitMouseDropCanceled() {\n        this.userInputEvents.emitMouseDropCanceled();\n    }\n    emitMouseWheel(e) {\n        this.userInputEvents.emitMouseWheel(e);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { createTrustedTypesPolicy } from '../../../base/browser/trustedTypes.js';\nimport { BugIndicatingError } from '../../../base/common/errors.js';\nimport { StringBuilder } from '../../common/core/stringBuilder.js';\nexport class RenderedLinesCollection {\n    constructor(createLine) {\n        this._createLine = createLine;\n        this._set(1, []);\n    }\n    flush() {\n        this._set(1, []);\n    }\n    _set(rendLineNumberStart, lines) {\n        this._lines = lines;\n        this._rendLineNumberStart = rendLineNumberStart;\n    }\n    _get() {\n        return {\n            rendLineNumberStart: this._rendLineNumberStart,\n            lines: this._lines\n        };\n    }\n    /**\n     * @returns Inclusive line number that is inside this collection\n     */\n    getStartLineNumber() {\n        return this._rendLineNumberStart;\n    }\n    /**\n     * @returns Inclusive line number that is inside this collection\n     */\n    getEndLineNumber() {\n        return this._rendLineNumberStart + this._lines.length - 1;\n    }\n    getCount() {\n        return this._lines.length;\n    }\n    getLine(lineNumber) {\n        const lineIndex = lineNumber - this._rendLineNumberStart;\n        if (lineIndex < 0 || lineIndex >= this._lines.length) {\n            throw new BugIndicatingError('Illegal value for lineNumber');\n        }\n        return this._lines[lineIndex];\n    }\n    /**\n     * @returns Lines that were removed from this collection\n     */\n    onLinesDeleted(deleteFromLineNumber, deleteToLineNumber) {\n        if (this.getCount() === 0) {\n            // no lines\n            return null;\n        }\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        if (deleteToLineNumber < startLineNumber) {\n            // deleting above the viewport\n            const deleteCnt = deleteToLineNumber - deleteFromLineNumber + 1;\n            this._rendLineNumberStart -= deleteCnt;\n            return null;\n        }\n        if (deleteFromLineNumber > endLineNumber) {\n            // deleted below the viewport\n            return null;\n        }\n        // Record what needs to be deleted\n        let deleteStartIndex = 0;\n        let deleteCount = 0;\n        for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n            const lineIndex = lineNumber - this._rendLineNumberStart;\n            if (deleteFromLineNumber <= lineNumber && lineNumber <= deleteToLineNumber) {\n                // this is a line to be deleted\n                if (deleteCount === 0) {\n                    // this is the first line to be deleted\n                    deleteStartIndex = lineIndex;\n                    deleteCount = 1;\n                }\n                else {\n                    deleteCount++;\n                }\n            }\n        }\n        // Adjust this._rendLineNumberStart for lines deleted above\n        if (deleteFromLineNumber < startLineNumber) {\n            // Something was deleted above\n            let deleteAboveCount = 0;\n            if (deleteToLineNumber < startLineNumber) {\n                // the entire deleted lines are above\n                deleteAboveCount = deleteToLineNumber - deleteFromLineNumber + 1;\n            }\n            else {\n                deleteAboveCount = startLineNumber - deleteFromLineNumber;\n            }\n            this._rendLineNumberStart -= deleteAboveCount;\n        }\n        const deleted = this._lines.splice(deleteStartIndex, deleteCount);\n        return deleted;\n    }\n    onLinesChanged(changeFromLineNumber, changeCount) {\n        const changeToLineNumber = changeFromLineNumber + changeCount - 1;\n        if (this.getCount() === 0) {\n            // no lines\n            return false;\n        }\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        let someoneNotified = false;\n        for (let changedLineNumber = changeFromLineNumber; changedLineNumber <= changeToLineNumber; changedLineNumber++) {\n            if (changedLineNumber >= startLineNumber && changedLineNumber <= endLineNumber) {\n                // Notify the line\n                this._lines[changedLineNumber - this._rendLineNumberStart].onContentChanged();\n                someoneNotified = true;\n            }\n        }\n        return someoneNotified;\n    }\n    onLinesInserted(insertFromLineNumber, insertToLineNumber) {\n        if (this.getCount() === 0) {\n            // no lines\n            return null;\n        }\n        const insertCnt = insertToLineNumber - insertFromLineNumber + 1;\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        if (insertFromLineNumber <= startLineNumber) {\n            // inserting above the viewport\n            this._rendLineNumberStart += insertCnt;\n            return null;\n        }\n        if (insertFromLineNumber > endLineNumber) {\n            // inserting below the viewport\n            return null;\n        }\n        if (insertCnt + insertFromLineNumber > endLineNumber) {\n            // insert inside the viewport in such a way that all remaining lines are pushed outside\n            const deleted = this._lines.splice(insertFromLineNumber - this._rendLineNumberStart, endLineNumber - insertFromLineNumber + 1);\n            return deleted;\n        }\n        // insert inside the viewport, push out some lines, but not all remaining lines\n        const newLines = [];\n        for (let i = 0; i < insertCnt; i++) {\n            newLines[i] = this._createLine();\n        }\n        const insertIndex = insertFromLineNumber - this._rendLineNumberStart;\n        const beforeLines = this._lines.slice(0, insertIndex);\n        const afterLines = this._lines.slice(insertIndex, this._lines.length - insertCnt);\n        const deletedLines = this._lines.slice(this._lines.length - insertCnt, this._lines.length);\n        this._lines = beforeLines.concat(newLines).concat(afterLines);\n        return deletedLines;\n    }\n    onTokensChanged(ranges) {\n        if (this.getCount() === 0) {\n            // no lines\n            return false;\n        }\n        const startLineNumber = this.getStartLineNumber();\n        const endLineNumber = this.getEndLineNumber();\n        let notifiedSomeone = false;\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            const rng = ranges[i];\n            if (rng.toLineNumber < startLineNumber || rng.fromLineNumber > endLineNumber) {\n                // range outside viewport\n                continue;\n            }\n            const from = Math.max(startLineNumber, rng.fromLineNumber);\n            const to = Math.min(endLineNumber, rng.toLineNumber);\n            for (let lineNumber = from; lineNumber <= to; lineNumber++) {\n                const lineIndex = lineNumber - this._rendLineNumberStart;\n                this._lines[lineIndex].onTokensChanged();\n                notifiedSomeone = true;\n            }\n        }\n        return notifiedSomeone;\n    }\n}\nexport class VisibleLinesCollection {\n    constructor(host) {\n        this._host = host;\n        this.domNode = this._createDomNode();\n        this._linesCollection = new RenderedLinesCollection(() => this._host.createVisibleLine());\n    }\n    _createDomNode() {\n        const domNode = createFastDomNode(document.createElement('div'));\n        domNode.setClassName('view-layer');\n        domNode.setPosition('absolute');\n        domNode.domNode.setAttribute('role', 'presentation');\n        domNode.domNode.setAttribute('aria-hidden', 'true');\n        return domNode;\n    }\n    // ---- begin view event handlers\n    onConfigurationChanged(e) {\n        if (e.hasChanged(143 /* EditorOption.layoutInfo */)) {\n            return true;\n        }\n        return false;\n    }\n    onFlushed(e) {\n        this._linesCollection.flush();\n        // No need to clear the dom node because a full .innerHTML will occur in ViewLayerRenderer._render\n        return true;\n    }\n    onLinesChanged(e) {\n        return this._linesCollection.onLinesChanged(e.fromLineNumber, e.count);\n    }\n    onLinesDeleted(e) {\n        const deleted = this._linesCollection.onLinesDeleted(e.fromLineNumber, e.toLineNumber);\n        if (deleted) {\n            // Remove from DOM\n            for (let i = 0, len = deleted.length; i < len; i++) {\n                const lineDomNode = deleted[i].getDomNode();\n                if (lineDomNode) {\n                    this.domNode.domNode.removeChild(lineDomNode);\n                }\n            }\n        }\n        return true;\n    }\n    onLinesInserted(e) {\n        const deleted = this._linesCollection.onLinesInserted(e.fromLineNumber, e.toLineNumber);\n        if (deleted) {\n            // Remove from DOM\n            for (let i = 0, len = deleted.length; i < len; i++) {\n                const lineDomNode = deleted[i].getDomNode();\n                if (lineDomNode) {\n                    this.domNode.domNode.removeChild(lineDomNode);\n                }\n            }\n        }\n        return true;\n    }\n    onScrollChanged(e) {\n        return e.scrollTopChanged;\n    }\n    onTokensChanged(e) {\n        return this._linesCollection.onTokensChanged(e.ranges);\n    }\n    onZonesChanged(e) {\n        return true;\n    }\n    // ---- end view event handlers\n    getStartLineNumber() {\n        return this._linesCollection.getStartLineNumber();\n    }\n    getEndLineNumber() {\n        return this._linesCollection.getEndLineNumber();\n    }\n    getVisibleLine(lineNumber) {\n        return this._linesCollection.getLine(lineNumber);\n    }\n    renderLines(viewportData) {\n        const inp = this._linesCollection._get();\n        const renderer = new ViewLayerRenderer(this.domNode.domNode, this._host, viewportData);\n        const ctx = {\n            rendLineNumberStart: inp.rendLineNumberStart,\n            lines: inp.lines,\n            linesLength: inp.lines.length\n        };\n        // Decide if this render will do a single update (single large .innerHTML) or many updates (inserting/removing dom nodes)\n        const resCtx = renderer.render(ctx, viewportData.startLineNumber, viewportData.endLineNumber, viewportData.relativeVerticalOffset);\n        this._linesCollection._set(resCtx.rendLineNumberStart, resCtx.lines);\n    }\n}\nclass ViewLayerRenderer {\n    constructor(domNode, host, viewportData) {\n        this.domNode = domNode;\n        this.host = host;\n        this.viewportData = viewportData;\n    }\n    render(inContext, startLineNumber, stopLineNumber, deltaTop) {\n        const ctx = {\n            rendLineNumberStart: inContext.rendLineNumberStart,\n            lines: inContext.lines.slice(0),\n            linesLength: inContext.linesLength\n        };\n        if ((ctx.rendLineNumberStart + ctx.linesLength - 1 < startLineNumber) || (stopLineNumber < ctx.rendLineNumberStart)) {\n            // There is no overlap whatsoever\n            ctx.rendLineNumberStart = startLineNumber;\n            ctx.linesLength = stopLineNumber - startLineNumber + 1;\n            ctx.lines = [];\n            for (let x = startLineNumber; x <= stopLineNumber; x++) {\n                ctx.lines[x - startLineNumber] = this.host.createVisibleLine();\n            }\n            this._finishRendering(ctx, true, deltaTop);\n            return ctx;\n        }\n        // Update lines which will remain untouched\n        this._renderUntouchedLines(ctx, Math.max(startLineNumber - ctx.rendLineNumberStart, 0), Math.min(stopLineNumber - ctx.rendLineNumberStart, ctx.linesLength - 1), deltaTop, startLineNumber);\n        if (ctx.rendLineNumberStart > startLineNumber) {\n            // Insert lines before\n            const fromLineNumber = startLineNumber;\n            const toLineNumber = Math.min(stopLineNumber, ctx.rendLineNumberStart - 1);\n            if (fromLineNumber <= toLineNumber) {\n                this._insertLinesBefore(ctx, fromLineNumber, toLineNumber, deltaTop, startLineNumber);\n                ctx.linesLength += toLineNumber - fromLineNumber + 1;\n            }\n        }\n        else if (ctx.rendLineNumberStart < startLineNumber) {\n            // Remove lines before\n            const removeCnt = Math.min(ctx.linesLength, startLineNumber - ctx.rendLineNumberStart);\n            if (removeCnt > 0) {\n                this._removeLinesBefore(ctx, removeCnt);\n                ctx.linesLength -= removeCnt;\n            }\n        }\n        ctx.rendLineNumberStart = startLineNumber;\n        if (ctx.rendLineNumberStart + ctx.linesLength - 1 < stopLineNumber) {\n            // Insert lines after\n            const fromLineNumber = ctx.rendLineNumberStart + ctx.linesLength;\n            const toLineNumber = stopLineNumber;\n            if (fromLineNumber <= toLineNumber) {\n                this._insertLinesAfter(ctx, fromLineNumber, toLineNumber, deltaTop, startLineNumber);\n                ctx.linesLength += toLineNumber - fromLineNumber + 1;\n            }\n        }\n        else if (ctx.rendLineNumberStart + ctx.linesLength - 1 > stopLineNumber) {\n            // Remove lines after\n            const fromLineNumber = Math.max(0, stopLineNumber - ctx.rendLineNumberStart + 1);\n            const toLineNumber = ctx.linesLength - 1;\n            const removeCnt = toLineNumber - fromLineNumber + 1;\n            if (removeCnt > 0) {\n                this._removeLinesAfter(ctx, removeCnt);\n                ctx.linesLength -= removeCnt;\n            }\n        }\n        this._finishRendering(ctx, false, deltaTop);\n        return ctx;\n    }\n    _renderUntouchedLines(ctx, startIndex, endIndex, deltaTop, deltaLN) {\n        const rendLineNumberStart = ctx.rendLineNumberStart;\n        const lines = ctx.lines;\n        for (let i = startIndex; i <= endIndex; i++) {\n            const lineNumber = rendLineNumberStart + i;\n            lines[i].layoutLine(lineNumber, deltaTop[lineNumber - deltaLN]);\n        }\n    }\n    _insertLinesBefore(ctx, fromLineNumber, toLineNumber, deltaTop, deltaLN) {\n        const newLines = [];\n        let newLinesLen = 0;\n        for (let lineNumber = fromLineNumber; lineNumber <= toLineNumber; lineNumber++) {\n            newLines[newLinesLen++] = this.host.createVisibleLine();\n        }\n        ctx.lines = newLines.concat(ctx.lines);\n    }\n    _removeLinesBefore(ctx, removeCount) {\n        for (let i = 0; i < removeCount; i++) {\n            const lineDomNode = ctx.lines[i].getDomNode();\n            if (lineDomNode) {\n                this.domNode.removeChild(lineDomNode);\n            }\n        }\n        ctx.lines.splice(0, removeCount);\n    }\n    _insertLinesAfter(ctx, fromLineNumber, toLineNumber, deltaTop, deltaLN) {\n        const newLines = [];\n        let newLinesLen = 0;\n        for (let lineNumber = fromLineNumber; lineNumber <= toLineNumber; lineNumber++) {\n            newLines[newLinesLen++] = this.host.createVisibleLine();\n        }\n        ctx.lines = ctx.lines.concat(newLines);\n    }\n    _removeLinesAfter(ctx, removeCount) {\n        const removeIndex = ctx.linesLength - removeCount;\n        for (let i = 0; i < removeCount; i++) {\n            const lineDomNode = ctx.lines[removeIndex + i].getDomNode();\n            if (lineDomNode) {\n                this.domNode.removeChild(lineDomNode);\n            }\n        }\n        ctx.lines.splice(removeIndex, removeCount);\n    }\n    _finishRenderingNewLines(ctx, domNodeIsEmpty, newLinesHTML, wasNew) {\n        if (ViewLayerRenderer._ttPolicy) {\n            newLinesHTML = ViewLayerRenderer._ttPolicy.createHTML(newLinesHTML);\n        }\n        const lastChild = this.domNode.lastChild;\n        if (domNodeIsEmpty || !lastChild) {\n            this.domNode.innerHTML = newLinesHTML; // explains the ugly casts -> https://github.com/microsoft/vscode/issues/106396#issuecomment-692625393;\n        }\n        else {\n            lastChild.insertAdjacentHTML('afterend', newLinesHTML);\n        }\n        let currChild = this.domNode.lastChild;\n        for (let i = ctx.linesLength - 1; i >= 0; i--) {\n            const line = ctx.lines[i];\n            if (wasNew[i]) {\n                line.setDomNode(currChild);\n                currChild = currChild.previousSibling;\n            }\n        }\n    }\n    _finishRenderingInvalidLines(ctx, invalidLinesHTML, wasInvalid) {\n        const hugeDomNode = document.createElement('div');\n        if (ViewLayerRenderer._ttPolicy) {\n            invalidLinesHTML = ViewLayerRenderer._ttPolicy.createHTML(invalidLinesHTML);\n        }\n        hugeDomNode.innerHTML = invalidLinesHTML;\n        for (let i = 0; i < ctx.linesLength; i++) {\n            const line = ctx.lines[i];\n            if (wasInvalid[i]) {\n                const source = hugeDomNode.firstChild;\n                const lineDomNode = line.getDomNode();\n                lineDomNode.parentNode.replaceChild(source, lineDomNode);\n                line.setDomNode(source);\n            }\n        }\n    }\n    _finishRendering(ctx, domNodeIsEmpty, deltaTop) {\n        const sb = ViewLayerRenderer._sb;\n        const linesLength = ctx.linesLength;\n        const lines = ctx.lines;\n        const rendLineNumberStart = ctx.rendLineNumberStart;\n        const wasNew = [];\n        {\n            sb.reset();\n            let hadNewLine = false;\n            for (let i = 0; i < linesLength; i++) {\n                const line = lines[i];\n                wasNew[i] = false;\n                const lineDomNode = line.getDomNode();\n                if (lineDomNode) {\n                    // line is not new\n                    continue;\n                }\n                const renderResult = line.renderLine(i + rendLineNumberStart, deltaTop[i], this.viewportData, sb);\n                if (!renderResult) {\n                    // line does not need rendering\n                    continue;\n                }\n                wasNew[i] = true;\n                hadNewLine = true;\n            }\n            if (hadNewLine) {\n                this._finishRenderingNewLines(ctx, domNodeIsEmpty, sb.build(), wasNew);\n            }\n        }\n        {\n            sb.reset();\n            let hadInvalidLine = false;\n            const wasInvalid = [];\n            for (let i = 0; i < linesLength; i++) {\n                const line = lines[i];\n                wasInvalid[i] = false;\n                if (wasNew[i]) {\n                    // line was new\n                    continue;\n                }\n                const renderResult = line.renderLine(i + rendLineNumberStart, deltaTop[i], this.viewportData, sb);\n                if (!renderResult) {\n                    // line does not need rendering\n                    continue;\n                }\n                wasInvalid[i] = true;\n                hadInvalidLine = true;\n            }\n            if (hadInvalidLine) {\n                this._finishRenderingInvalidLines(ctx, sb.build(), wasInvalid);\n            }\n        }\n    }\n}\nViewLayerRenderer._ttPolicy = createTrustedTypesPolicy('editorViewLayer', { createHTML: value => value });\nViewLayerRenderer._sb = new StringBuilder(100000);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createFastDomNode } from '../../../base/browser/fastDomNode.js';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { VisibleLinesCollection } from './viewLayer.js';\nimport { ViewPart } from './viewPart.js';\nexport class ViewOverlays extends ViewPart {\n    constructor(context) {\n        super(context);\n        this._visibleLines = new VisibleLinesCollection(this);\n        this.domNode = this._visibleLines.domNode;\n        const options = this._context.configuration.options;\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        applyFontInfo(this.domNode, fontInfo);\n        this._dynamicOverlays = [];\n        this._isFocused = false;\n        this.domNode.setClassName('view-overlays');\n    }\n    shouldRender() {\n        if (super.shouldRender()) {\n            return true;\n        }\n        for (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n            const dynamicOverlay = this._dynamicOverlays[i];\n            if (dynamicOverlay.shouldRender()) {\n                return true;\n            }\n        }\n        return false;\n    }\n    dispose() {\n        super.dispose();\n        for (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n            const dynamicOverlay = this._dynamicOverlays[i];\n            dynamicOverlay.dispose();\n        }\n        this._dynamicOverlays = [];\n    }\n    getDomNode() {\n        return this.domNode;\n    }\n    // ---- begin IVisibleLinesHost\n    createVisibleLine() {\n        return new ViewOverlayLine(this._context.configuration, this._dynamicOverlays);\n    }\n    // ---- end IVisibleLinesHost\n    addDynamicOverlay(overlay) {\n        this._dynamicOverlays.push(overlay);\n    }\n    // ----- event handlers\n    onConfigurationChanged(e) {\n        this._visibleLines.onConfigurationChanged(e);\n        const startLineNumber = this._visibleLines.getStartLineNumber();\n        const endLineNumber = this._visibleLines.getEndLineNumber();\n        for (let lineNumber = startLineNumber; lineNumber <= endLineNumber; lineNumber++) {\n            const line = this._visibleLines.getVisibleLine(lineNumber);\n            line.onConfigurationChanged(e);\n        }\n        const options = this._context.configuration.options;\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        applyFontInfo(this.domNode, fontInfo);\n        return true;\n    }\n    onFlushed(e) {\n        return this._visibleLines.onFlushed(e);\n    }\n    onFocusChanged(e) {\n        this._isFocused = e.isFocused;\n        return true;\n    }\n    onLinesChanged(e) {\n        return this._visibleLines.onLinesChanged(e);\n    }\n    onLinesDeleted(e) {\n        return this._visibleLines.onLinesDeleted(e);\n    }\n    onLinesInserted(e) {\n        return this._visibleLines.onLinesInserted(e);\n    }\n    onScrollChanged(e) {\n        return this._visibleLines.onScrollChanged(e) || true;\n    }\n    onTokensChanged(e) {\n        return this._visibleLines.onTokensChanged(e);\n    }\n    onZonesChanged(e) {\n        return this._visibleLines.onZonesChanged(e);\n    }\n    // ----- end event handlers\n    prepareRender(ctx) {\n        const toRender = this._dynamicOverlays.filter(overlay => overlay.shouldRender());\n        for (let i = 0, len = toRender.length; i < len; i++) {\n            const dynamicOverlay = toRender[i];\n            dynamicOverlay.prepareRender(ctx);\n            dynamicOverlay.onDidRender();\n        }\n    }\n    render(ctx) {\n        // Overwriting to bypass `shouldRender` flag\n        this._viewOverlaysRender(ctx);\n        this.domNode.toggleClassName('focused', this._isFocused);\n    }\n    _viewOverlaysRender(ctx) {\n        this._visibleLines.renderLines(ctx.viewportData);\n    }\n}\nexport class ViewOverlayLine {\n    constructor(configuration, dynamicOverlays) {\n        this._configuration = configuration;\n        this._lineHeight = this._configuration.options.get(66 /* EditorOption.lineHeight */);\n        this._dynamicOverlays = dynamicOverlays;\n        this._domNode = null;\n        this._renderedContent = null;\n    }\n    getDomNode() {\n        if (!this._domNode) {\n            return null;\n        }\n        return this._domNode.domNode;\n    }\n    setDomNode(domNode) {\n        this._domNode = createFastDomNode(domNode);\n    }\n    onContentChanged() {\n        // Nothing\n    }\n    onTokensChanged() {\n        // Nothing\n    }\n    onConfigurationChanged(e) {\n        this._lineHeight = this._configuration.options.get(66 /* EditorOption.lineHeight */);\n    }\n    renderLine(lineNumber, deltaTop, viewportData, sb) {\n        let result = '';\n        for (let i = 0, len = this._dynamicOverlays.length; i < len; i++) {\n            const dynamicOverlay = this._dynamicOverlays[i];\n            result += dynamicOverlay.render(viewportData.startLineNumber, lineNumber);\n        }\n        if (this._renderedContent === result) {\n            // No rendering needed\n            return false;\n        }\n        this._renderedContent = result;\n        sb.appendString('<div style=\"position:absolute;top:');\n        sb.appendString(String(deltaTop));\n        sb.appendString('px;width:100%;height:');\n        sb.appendString(String(this._lineHeight));\n        sb.appendString('px;\">');\n        sb.appendString(result);\n        sb.appendString('</div>');\n        return true;\n    }\n    layoutLine(lineNumber, deltaTop) {\n        if (this._domNode) {\n            this._domNode.setTop(deltaTop);\n            this._domNode.setHeight(this._lineHeight);\n        }\n    }\n}\nexport class ContentViewOverlays extends ViewOverlays {\n    constructor(context) {\n        super(context);\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n        this._contentWidth = layoutInfo.contentWidth;\n        this.domNode.setHeight(0);\n    }\n    // --- begin event handlers\n    onConfigurationChanged(e) {\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n        this._contentWidth = layoutInfo.contentWidth;\n        return super.onConfigurationChanged(e) || true;\n    }\n    onScrollChanged(e) {\n        return super.onScrollChanged(e) || e.scrollWidthChanged;\n    }\n    // --- end event handlers\n    _viewOverlaysRender(ctx) {\n        super._viewOverlaysRender(ctx);\n        this.domNode.setWidth(Math.max(ctx.scrollWidth, this._contentWidth));\n    }\n}\nexport class MarginViewOverlays extends ViewOverlays {\n    constructor(context) {\n        super(context);\n        const options = this._context.configuration.options;\n        const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n        this._contentLeft = layoutInfo.contentLeft;\n        this.domNode.setClassName('margin-view-overlays');\n        this.domNode.setWidth(1);\n        applyFontInfo(this.domNode, options.get(50 /* EditorOption.fontInfo */));\n    }\n    onConfigurationChanged(e) {\n        const options = this._context.configuration.options;\n        applyFontInfo(this.domNode, options.get(50 /* EditorOption.fontInfo */));\n        const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n        this._contentLeft = layoutInfo.contentLeft;\n        return super.onConfigurationChanged(e) || true;\n    }\n    onScrollChanged(e) {\n        return super.onScrollChanged(e) || e.scrollHeightChanged;\n    }\n    _viewOverlaysRender(ctx) {\n        super._viewOverlaysRender(ctx);\n        const height = Math.min(ctx.scrollHeight, 1000000);\n        this.domNode.setHeight(height);\n        this.domNode.setWidth(this._contentLeft);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { ViewEventHandler } from '../../common/viewEventHandler.js';\nexport class ViewPart extends ViewEventHandler {\n    constructor(context) {\n        super();\n        this._context = context;\n        this._context.addEventHandler(this);\n    }\n    dispose() {\n        this._context.removeEventHandler(this);\n        super.dispose();\n    }\n}\nexport class PartFingerprints {\n    static write(target, partId) {\n        target.setAttribute('data-mprt', String(partId));\n    }\n    static read(target) {\n        const r = target.getAttribute('data-mprt');\n        if (r === null) {\n            return 0 /* PartFingerprint.None */;\n        }\n        return parseInt(r, 10);\n    }\n    static collect(child, stopAt) {\n        const result = [];\n        let resultLen = 0;\n        while (child && child !== child.ownerDocument.body) {\n            if (child === stopAt) {\n                break;\n            }\n            if (child.nodeType === child.ELEMENT_NODE) {\n                result[resultLen++] = this.read(child);\n            }\n            child = child.parentElement;\n        }\n        const r = new Uint8Array(resultLen);\n        for (let i = 0; i < resultLen; i++) {\n            r[i] = result[resultLen - i - 1];\n        }\n        return r;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Position } from '../../common/core/position.js';\nexport class ViewUserInputEvents {\n    constructor(coordinatesConverter) {\n        this.onKeyDown = null;\n        this.onKeyUp = null;\n        this.onContextMenu = null;\n        this.onMouseMove = null;\n        this.onMouseLeave = null;\n        this.onMouseDown = null;\n        this.onMouseUp = null;\n        this.onMouseDrag = null;\n        this.onMouseDrop = null;\n        this.onMouseDropCanceled = null;\n        this.onMouseWheel = null;\n        this._coordinatesConverter = coordinatesConverter;\n    }\n    emitKeyDown(e) {\n        var _a;\n        (_a = this.onKeyDown) === null || _a === void 0 ? void 0 : _a.call(this, e);\n    }\n    emitKeyUp(e) {\n        var _a;\n        (_a = this.onKeyUp) === null || _a === void 0 ? void 0 : _a.call(this, e);\n    }\n    emitContextMenu(e) {\n        var _a;\n        (_a = this.onContextMenu) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseMove(e) {\n        var _a;\n        (_a = this.onMouseMove) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseLeave(e) {\n        var _a;\n        (_a = this.onMouseLeave) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDown(e) {\n        var _a;\n        (_a = this.onMouseDown) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseUp(e) {\n        var _a;\n        (_a = this.onMouseUp) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDrag(e) {\n        var _a;\n        (_a = this.onMouseDrag) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDrop(e) {\n        var _a;\n        (_a = this.onMouseDrop) === null || _a === void 0 ? void 0 : _a.call(this, this._convertViewToModelMouseEvent(e));\n    }\n    emitMouseDropCanceled() {\n        var _a;\n        (_a = this.onMouseDropCanceled) === null || _a === void 0 ? void 0 : _a.call(this);\n    }\n    emitMouseWheel(e) {\n        var _a;\n        (_a = this.onMouseWheel) === null || _a === void 0 ? void 0 : _a.call(this, e);\n    }\n    _convertViewToModelMouseEvent(e) {\n        if (e.target) {\n            return {\n                event: e.event,\n                target: this._convertViewToModelMouseTarget(e.target)\n            };\n        }\n        return e;\n    }\n    _convertViewToModelMouseTarget(target) {\n        return ViewUserInputEvents.convertViewToModelMouseTarget(target, this._coordinatesConverter);\n    }\n    static convertViewToModelMouseTarget(target, coordinatesConverter) {\n        const result = Object.assign({}, target);\n        if (result.position) {\n            result.position = coordinatesConverter.convertViewPositionToModelPosition(result.position);\n        }\n        if (result.range) {\n            result.range = coordinatesConverter.convertViewRangeToModelRange(result.range);\n        }\n        if (result.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */ || result.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */) {\n            result.detail = this.convertViewToModelViewZoneData(result.detail, coordinatesConverter);\n        }\n        return result;\n    }\n    static convertViewToModelViewZoneData(data, coordinatesConverter) {\n        return {\n            viewZoneId: data.viewZoneId,\n            positionBefore: data.positionBefore ? coordinatesConverter.convertViewPositionToModelPosition(data.positionBefore) : data.positionBefore,\n            positionAfter: data.positionAfter ? coordinatesConverter.convertViewPositionToModelPosition(data.positionAfter) : data.positionAfter,\n            position: coordinatesConverter.convertViewPositionToModelPosition(data.position),\n            afterLineNumber: coordinatesConverter.convertViewPositionToModelPosition(new Position(data.afterLineNumber, 1)).lineNumber,\n        };\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { runWhenIdle } from '../../../base/common/async.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Disposable, DisposableMap } from '../../../base/common/lifecycle.js';\nexport class CodeEditorContributions extends Disposable {\n    constructor() {\n        super();\n        this._editor = null;\n        this._instantiationService = null;\n        /**\n         * Contains all instantiated contributions.\n         */\n        this._instances = this._register(new DisposableMap());\n        /**\n         * Contains contributions which are not yet instantiated.\n         */\n        this._pending = new Map();\n        /**\n         * Tracks which instantiation kinds are still left in `_pending`.\n         */\n        this._finishedInstantiation = [];\n        this._finishedInstantiation[0 /* EditorContributionInstantiation.Eager */] = false;\n        this._finishedInstantiation[1 /* EditorContributionInstantiation.AfterFirstRender */] = false;\n        this._finishedInstantiation[2 /* EditorContributionInstantiation.BeforeFirstInteraction */] = false;\n        this._finishedInstantiation[3 /* EditorContributionInstantiation.Eventually */] = false;\n    }\n    initialize(editor, contributions, instantiationService) {\n        this._editor = editor;\n        this._instantiationService = instantiationService;\n        for (const desc of contributions) {\n            if (this._pending.has(desc.id)) {\n                onUnexpectedError(new Error(`Cannot have two contributions with the same id ${desc.id}`));\n                continue;\n            }\n            this._pending.set(desc.id, desc);\n        }\n        this._instantiateSome(0 /* EditorContributionInstantiation.Eager */);\n        // AfterFirstRender\n        // - these extensions will be instantiated at the latest 50ms after the first render.\n        // - but if there is idle time, we will instantiate them sooner.\n        this._register(runWhenIdle(() => {\n            this._instantiateSome(1 /* EditorContributionInstantiation.AfterFirstRender */);\n        }));\n        // BeforeFirstInteraction\n        // - these extensions will be instantiated at the latest before a mouse or a keyboard event.\n        // - but if there is idle time, we will instantiate them sooner.\n        this._register(runWhenIdle(() => {\n            this._instantiateSome(2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n        }));\n        // Eventually\n        // - these extensions will only be instantiated when there is idle time.\n        // - since there is no guarantee that there will ever be idle time, we set a timeout of 5s here.\n        this._register(runWhenIdle(() => {\n            this._instantiateSome(3 /* EditorContributionInstantiation.Eventually */);\n        }, 5000));\n    }\n    saveViewState() {\n        const contributionsState = {};\n        for (const [id, contribution] of this._instances) {\n            if (typeof contribution.saveViewState === 'function') {\n                contributionsState[id] = contribution.saveViewState();\n            }\n        }\n        return contributionsState;\n    }\n    restoreViewState(contributionsState) {\n        for (const [id, contribution] of this._instances) {\n            if (typeof contribution.restoreViewState === 'function') {\n                contribution.restoreViewState(contributionsState[id]);\n            }\n        }\n    }\n    get(id) {\n        this._instantiateById(id);\n        return this._instances.get(id) || null;\n    }\n    onBeforeInteractionEvent() {\n        // this method is called very often by the editor!\n        this._instantiateSome(2 /* EditorContributionInstantiation.BeforeFirstInteraction */);\n    }\n    onAfterModelAttached() {\n        this._register(runWhenIdle(() => {\n            this._instantiateSome(1 /* EditorContributionInstantiation.AfterFirstRender */);\n        }, 50));\n    }\n    _instantiateSome(instantiation) {\n        if (this._finishedInstantiation[instantiation]) {\n            // already done with this instantiation!\n            return;\n        }\n        this._finishedInstantiation[instantiation] = true;\n        const contribs = this._findPendingContributionsByInstantiation(instantiation);\n        for (const contrib of contribs) {\n            this._instantiateById(contrib.id);\n        }\n    }\n    _findPendingContributionsByInstantiation(instantiation) {\n        const result = [];\n        for (const [, desc] of this._pending) {\n            if (desc.instantiation === instantiation) {\n                result.push(desc);\n            }\n        }\n        return result;\n    }\n    _instantiateById(id) {\n        const desc = this._pending.get(id);\n        if (!desc) {\n            return;\n        }\n        this._pending.delete(id);\n        if (!this._instantiationService || !this._editor) {\n            throw new Error(`Cannot instantiate contributions before being initialized!`);\n        }\n        try {\n            const instance = this._instantiationService.createInstance(desc.ctor, this._editor);\n            this._instances.set(desc.id, instance);\n            if (typeof instance.restoreViewState === 'function' && desc.instantiation !== 0 /* EditorContributionInstantiation.Eager */) {\n                console.warn(`Editor contribution '${desc.id}' should be eager instantiated because it uses saveViewState / restoreViewState.`);\n            }\n        }\n        catch (err) {\n            onUnexpectedError(err);\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar CodeEditorWidget_1;\nimport '../services/markerDecorations.js';\nimport './media/editor.css';\nimport * as nls from '../../../nls.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { Emitter, createEventDeliveryQueue } from '../../../base/common/event.js';\nimport { Disposable, dispose } from '../../../base/common/lifecycle.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { EditorConfiguration } from '../config/editorConfiguration.js';\nimport { EditorExtensionsRegistry } from '../editorExtensions.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { View } from '../view.js';\nimport { ViewUserInputEvents } from '../view/viewUserInputEvents.js';\nimport { filterValidationDecorations } from '../../common/config/editorOptions.js';\nimport { CursorColumns } from '../../common/core/cursorColumns.js';\nimport { Position } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { Selection } from '../../common/core/selection.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport * as editorCommon from '../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../common/editorContextKeys.js';\nimport { ModelDecorationOptions } from '../../common/model/textModel.js';\nimport { editorUnnecessaryCodeOpacity } from '../../common/core/editorColorRegistry.js';\nimport { editorErrorForeground, editorHintForeground, editorInfoForeground, editorWarningForeground } from '../../../platform/theme/common/colorRegistry.js';\nimport { ViewModel } from '../../common/viewModel/viewModelImpl.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { INotificationService, Severity } from '../../../platform/notification/common/notification.js';\nimport { IThemeService, registerThemingParticipant } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { MonospaceLineBreaksComputerFactory } from '../../common/viewModel/monospaceLineBreaksComputer.js';\nimport { DOMLineBreaksComputerFactory } from '../view/domLineBreaksComputer.js';\nimport { WordOperations } from '../../common/cursor/cursorWordOperations.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { applyFontInfo } from '../config/domFontInfo.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { CodeEditorContributions } from './codeEditorContributions.js';\nimport { TabFocus } from '../config/tabFocus.js';\nlet EDITOR_ID = 0;\nclass ModelData {\n    constructor(model, viewModel, view, hasRealView, listenersToRemove, attachedView) {\n        this.model = model;\n        this.viewModel = viewModel;\n        this.view = view;\n        this.hasRealView = hasRealView;\n        this.listenersToRemove = listenersToRemove;\n        this.attachedView = attachedView;\n    }\n    dispose() {\n        dispose(this.listenersToRemove);\n        this.model.onBeforeDetached(this.attachedView);\n        if (this.hasRealView) {\n            this.view.dispose();\n        }\n        this.viewModel.dispose();\n    }\n}\nlet CodeEditorWidget = CodeEditorWidget_1 = class CodeEditorWidget extends Disposable {\n    //#endregion\n    get isSimpleWidget() {\n        return this._configuration.isSimpleWidget;\n    }\n    constructor(domElement, _options, codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        var _a;\n        super();\n        this.languageConfigurationService = languageConfigurationService;\n        //#region Eventing\n        this._deliveryQueue = createEventDeliveryQueue();\n        this._contributions = this._register(new CodeEditorContributions());\n        this._onDidDispose = this._register(new Emitter());\n        this.onDidDispose = this._onDidDispose.event;\n        this._onDidChangeModelContent = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelContent = this._onDidChangeModelContent.event;\n        this._onDidChangeModelLanguage = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelLanguage = this._onDidChangeModelLanguage.event;\n        this._onDidChangeModelLanguageConfiguration = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelLanguageConfiguration = this._onDidChangeModelLanguageConfiguration.event;\n        this._onDidChangeModelOptions = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelOptions = this._onDidChangeModelOptions.event;\n        this._onDidChangeModelDecorations = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelDecorations = this._onDidChangeModelDecorations.event;\n        this._onDidChangeModelTokens = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModelTokens = this._onDidChangeModelTokens.event;\n        this._onDidChangeConfiguration = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n        this._onDidChangeModel = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeModel = this._onDidChangeModel.event;\n        this._onDidChangeCursorPosition = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeCursorPosition = this._onDidChangeCursorPosition.event;\n        this._onDidChangeCursorSelection = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeCursorSelection = this._onDidChangeCursorSelection.event;\n        this._onDidAttemptReadOnlyEdit = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidAttemptReadOnlyEdit = this._onDidAttemptReadOnlyEdit.event;\n        this._onDidLayoutChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidLayoutChange = this._onDidLayoutChange.event;\n        this._editorTextFocus = this._register(new BooleanEventEmitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidFocusEditorText = this._editorTextFocus.onDidChangeToTrue;\n        this.onDidBlurEditorText = this._editorTextFocus.onDidChangeToFalse;\n        this._editorWidgetFocus = this._register(new BooleanEventEmitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidFocusEditorWidget = this._editorWidgetFocus.onDidChangeToTrue;\n        this.onDidBlurEditorWidget = this._editorWidgetFocus.onDidChangeToFalse;\n        this._onWillType = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onWillType = this._onWillType.event;\n        this._onDidType = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidType = this._onDidType.event;\n        this._onDidCompositionStart = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidCompositionStart = this._onDidCompositionStart.event;\n        this._onDidCompositionEnd = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidCompositionEnd = this._onDidCompositionEnd.event;\n        this._onDidPaste = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDidPaste = this._onDidPaste.event;\n        this._onMouseUp = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseUp = this._onMouseUp.event;\n        this._onMouseDown = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDown = this._onMouseDown.event;\n        this._onMouseDrag = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDrag = this._onMouseDrag.event;\n        this._onMouseDrop = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDrop = this._onMouseDrop.event;\n        this._onMouseDropCanceled = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseDropCanceled = this._onMouseDropCanceled.event;\n        this._onDropIntoEditor = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onDropIntoEditor = this._onDropIntoEditor.event;\n        this._onContextMenu = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onContextMenu = this._onContextMenu.event;\n        this._onMouseMove = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseMove = this._onMouseMove.event;\n        this._onMouseLeave = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseLeave = this._onMouseLeave.event;\n        this._onMouseWheel = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onMouseWheel = this._onMouseWheel.event;\n        this._onKeyUp = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onKeyUp = this._onKeyUp.event;\n        this._onKeyDown = this._register(new InteractionEmitter(this._contributions, this._deliveryQueue));\n        this.onKeyDown = this._onKeyDown.event;\n        this._onDidContentSizeChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidContentSizeChange = this._onDidContentSizeChange.event;\n        this._onDidScrollChange = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidScrollChange = this._onDidScrollChange.event;\n        this._onDidChangeViewZones = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeViewZones = this._onDidChangeViewZones.event;\n        this._onDidChangeHiddenAreas = this._register(new Emitter({ deliveryQueue: this._deliveryQueue }));\n        this.onDidChangeHiddenAreas = this._onDidChangeHiddenAreas.event;\n        this._actions = new Map();\n        this._bannerDomNode = null;\n        this._dropIntoEditorDecorations = this.createDecorationsCollection();\n        codeEditorService.willCreateCodeEditor();\n        const options = Object.assign({}, _options);\n        this._domElement = domElement;\n        this._overflowWidgetsDomNode = options.overflowWidgetsDomNode;\n        delete options.overflowWidgetsDomNode;\n        this._id = (++EDITOR_ID);\n        this._decorationTypeKeysToIds = {};\n        this._decorationTypeSubtypes = {};\n        this._telemetryData = codeEditorWidgetOptions.telemetryData;\n        this._configuration = this._register(this._createConfiguration(codeEditorWidgetOptions.isSimpleWidget || false, options, accessibilityService));\n        this._register(this._configuration.onDidChange((e) => {\n            this._onDidChangeConfiguration.fire(e);\n            const options = this._configuration.options;\n            if (e.hasChanged(143 /* EditorOption.layoutInfo */)) {\n                const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n                this._onDidLayoutChange.fire(layoutInfo);\n            }\n        }));\n        this._contextKeyService = this._register(contextKeyService.createScoped(this._domElement));\n        this._notificationService = notificationService;\n        this._codeEditorService = codeEditorService;\n        this._commandService = commandService;\n        this._themeService = themeService;\n        this._register(new EditorContextKeysManager(this, this._contextKeyService));\n        this._register(new EditorModeContext(this, this._contextKeyService, languageFeaturesService));\n        this._instantiationService = instantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._modelData = null;\n        this._focusTracker = new CodeEditorWidgetFocusTracker(domElement);\n        this._register(this._focusTracker.onChange(() => {\n            this._editorWidgetFocus.setValue(this._focusTracker.hasFocus());\n        }));\n        this._contentWidgets = {};\n        this._overlayWidgets = {};\n        this._glyphMarginWidgets = {};\n        let contributions;\n        if (Array.isArray(codeEditorWidgetOptions.contributions)) {\n            contributions = codeEditorWidgetOptions.contributions;\n        }\n        else {\n            contributions = EditorExtensionsRegistry.getEditorContributions();\n        }\n        this._contributions.initialize(this, contributions, this._instantiationService);\n        for (const action of EditorExtensionsRegistry.getEditorActions()) {\n            if (this._actions.has(action.id)) {\n                onUnexpectedError(new Error(`Cannot have two actions with the same id ${action.id}`));\n                continue;\n            }\n            const internalAction = new InternalEditorAction(action.id, action.label, action.alias, (_a = action.precondition) !== null && _a !== void 0 ? _a : undefined, () => {\n                return this._instantiationService.invokeFunction((accessor) => {\n                    return Promise.resolve(action.runEditorCommand(accessor, this, null));\n                });\n            }, this._contextKeyService);\n            this._actions.set(internalAction.id, internalAction);\n        }\n        const isDropIntoEnabled = () => {\n            return !this._configuration.options.get(90 /* EditorOption.readOnly */)\n                && this._configuration.options.get(36 /* EditorOption.dropIntoEditor */).enabled;\n        };\n        this._register(new dom.DragAndDropObserver(this._domElement, {\n            onDragEnter: () => undefined,\n            onDragOver: e => {\n                if (!isDropIntoEnabled()) {\n                    return;\n                }\n                const target = this.getTargetAtClientPoint(e.clientX, e.clientY);\n                if (target === null || target === void 0 ? void 0 : target.position) {\n                    this.showDropIndicatorAt(target.position);\n                }\n            },\n            onDrop: (e) => __awaiter(this, void 0, void 0, function* () {\n                if (!isDropIntoEnabled()) {\n                    return;\n                }\n                this.removeDropIndicator();\n                if (!e.dataTransfer) {\n                    return;\n                }\n                const target = this.getTargetAtClientPoint(e.clientX, e.clientY);\n                if (target === null || target === void 0 ? void 0 : target.position) {\n                    this._onDropIntoEditor.fire({ position: target.position, event: e });\n                }\n            }),\n            onDragLeave: () => {\n                this.removeDropIndicator();\n            },\n            onDragEnd: () => {\n                this.removeDropIndicator();\n            },\n        }));\n        this._codeEditorService.addCodeEditor(this);\n    }\n    writeScreenReaderContent(reason) {\n        var _a;\n        (_a = this._modelData) === null || _a === void 0 ? void 0 : _a.view.writeScreenReaderContent(reason);\n    }\n    _createConfiguration(isSimpleWidget, options, accessibilityService) {\n        return new EditorConfiguration(isSimpleWidget, options, this._domElement, accessibilityService);\n    }\n    getId() {\n        return this.getEditorType() + ':' + this._id;\n    }\n    getEditorType() {\n        return editorCommon.EditorType.ICodeEditor;\n    }\n    dispose() {\n        this._codeEditorService.removeCodeEditor(this);\n        this._focusTracker.dispose();\n        this._actions.clear();\n        this._contentWidgets = {};\n        this._overlayWidgets = {};\n        this._removeDecorationTypes();\n        this._postDetachModelCleanup(this._detachModel());\n        this._onDidDispose.fire();\n        super.dispose();\n    }\n    invokeWithinContext(fn) {\n        return this._instantiationService.invokeFunction(fn);\n    }\n    updateOptions(newOptions) {\n        this._configuration.updateOptions(newOptions || {});\n    }\n    getOptions() {\n        return this._configuration.options;\n    }\n    getOption(id) {\n        return this._configuration.options.get(id);\n    }\n    getRawOptions() {\n        return this._configuration.getRawOptions();\n    }\n    getOverflowWidgetsDomNode() {\n        return this._overflowWidgetsDomNode;\n    }\n    getConfiguredWordAtPosition(position) {\n        if (!this._modelData) {\n            return null;\n        }\n        return WordOperations.getWordAtPosition(this._modelData.model, this._configuration.options.get(129 /* EditorOption.wordSeparators */), position);\n    }\n    getValue(options = null) {\n        if (!this._modelData) {\n            return '';\n        }\n        const preserveBOM = (options && options.preserveBOM) ? true : false;\n        let eolPreference = 0 /* EndOfLinePreference.TextDefined */;\n        if (options && options.lineEnding && options.lineEnding === '\\n') {\n            eolPreference = 1 /* EndOfLinePreference.LF */;\n        }\n        else if (options && options.lineEnding && options.lineEnding === '\\r\\n') {\n            eolPreference = 2 /* EndOfLinePreference.CRLF */;\n        }\n        return this._modelData.model.getValue(eolPreference, preserveBOM);\n    }\n    setValue(newValue) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.model.setValue(newValue);\n    }\n    getModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model;\n    }\n    setModel(_model = null) {\n        const model = _model;\n        if (this._modelData === null && model === null) {\n            // Current model is the new model\n            return;\n        }\n        if (this._modelData && this._modelData.model === model) {\n            // Current model is the new model\n            return;\n        }\n        const hasTextFocus = this.hasTextFocus();\n        const detachedModel = this._detachModel();\n        this._attachModel(model);\n        if (hasTextFocus && this.hasModel()) {\n            this.focus();\n        }\n        const e = {\n            oldModelUrl: detachedModel ? detachedModel.uri : null,\n            newModelUrl: model ? model.uri : null\n        };\n        this._removeDecorationTypes();\n        this._onDidChangeModel.fire(e);\n        this._postDetachModelCleanup(detachedModel);\n        this._contributions.onAfterModelAttached();\n    }\n    _removeDecorationTypes() {\n        this._decorationTypeKeysToIds = {};\n        if (this._decorationTypeSubtypes) {\n            for (const decorationType in this._decorationTypeSubtypes) {\n                const subTypes = this._decorationTypeSubtypes[decorationType];\n                for (const subType in subTypes) {\n                    this._removeDecorationType(decorationType + '-' + subType);\n                }\n            }\n            this._decorationTypeSubtypes = {};\n        }\n    }\n    getVisibleRanges() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.getVisibleRanges();\n    }\n    getVisibleRangesPlusViewportAboveBelow() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.getVisibleRangesPlusViewportAboveBelow();\n    }\n    getWhitespaces() {\n        if (!this._modelData) {\n            return [];\n        }\n        return this._modelData.viewModel.viewLayout.getWhitespaces();\n    }\n    static _getVerticalOffsetAfterPosition(modelData, modelLineNumber, modelColumn, includeViewZones) {\n        const modelPosition = modelData.model.validatePosition({\n            lineNumber: modelLineNumber,\n            column: modelColumn\n        });\n        const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n        return modelData.viewModel.viewLayout.getVerticalOffsetAfterLineNumber(viewPosition.lineNumber, includeViewZones);\n    }\n    getTopForLineNumber(lineNumber, includeViewZones = false) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget_1._getVerticalOffsetForPosition(this._modelData, lineNumber, 1, includeViewZones);\n    }\n    getTopForPosition(lineNumber, column) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget_1._getVerticalOffsetForPosition(this._modelData, lineNumber, column, false);\n    }\n    static _getVerticalOffsetForPosition(modelData, modelLineNumber, modelColumn, includeViewZones = false) {\n        const modelPosition = modelData.model.validatePosition({\n            lineNumber: modelLineNumber,\n            column: modelColumn\n        });\n        const viewPosition = modelData.viewModel.coordinatesConverter.convertModelPositionToViewPosition(modelPosition);\n        return modelData.viewModel.viewLayout.getVerticalOffsetForLineNumber(viewPosition.lineNumber, includeViewZones);\n    }\n    getBottomForLineNumber(lineNumber, includeViewZones = false) {\n        if (!this._modelData) {\n            return -1;\n        }\n        return CodeEditorWidget_1._getVerticalOffsetAfterPosition(this._modelData, lineNumber, 1, includeViewZones);\n    }\n    setHiddenAreas(ranges, source) {\n        var _a;\n        (_a = this._modelData) === null || _a === void 0 ? void 0 : _a.viewModel.setHiddenAreas(ranges.map(r => Range.lift(r)), source);\n    }\n    getVisibleColumnFromPosition(rawPosition) {\n        if (!this._modelData) {\n            return rawPosition.column;\n        }\n        const position = this._modelData.model.validatePosition(rawPosition);\n        const tabSize = this._modelData.model.getOptions().tabSize;\n        return CursorColumns.visibleColumnFromColumn(this._modelData.model.getLineContent(position.lineNumber), position.column, tabSize) + 1;\n    }\n    getPosition() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getPosition();\n    }\n    setPosition(position, source = 'api') {\n        if (!this._modelData) {\n            return;\n        }\n        if (!Position.isIPosition(position)) {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.setSelections(source, [{\n                selectionStartLineNumber: position.lineNumber,\n                selectionStartColumn: position.column,\n                positionLineNumber: position.lineNumber,\n                positionColumn: position.column\n            }]);\n    }\n    _sendRevealRange(modelRange, verticalType, revealHorizontal, scrollType) {\n        if (!this._modelData) {\n            return;\n        }\n        if (!Range.isIRange(modelRange)) {\n            throw new Error('Invalid arguments');\n        }\n        const validatedModelRange = this._modelData.model.validateRange(modelRange);\n        const viewRange = this._modelData.viewModel.coordinatesConverter.convertModelRangeToViewRange(validatedModelRange);\n        this._modelData.viewModel.revealRange('api', revealHorizontal, viewRange, verticalType, scrollType);\n    }\n    revealLine(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 0 /* VerticalRevealType.Simple */, scrollType);\n    }\n    revealLineInCenter(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 1 /* VerticalRevealType.Center */, scrollType);\n    }\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 2 /* VerticalRevealType.CenterIfOutsideViewport */, scrollType);\n    }\n    revealLineNearTop(lineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLine(lineNumber, 5 /* VerticalRevealType.NearTop */, scrollType);\n    }\n    _revealLine(lineNumber, revealType, scrollType) {\n        if (typeof lineNumber !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(lineNumber, 1, lineNumber, 1), revealType, false, scrollType);\n    }\n    revealPosition(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 0 /* VerticalRevealType.Simple */, true, scrollType);\n    }\n    revealPositionInCenter(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 1 /* VerticalRevealType.Center */, true, scrollType);\n    }\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 2 /* VerticalRevealType.CenterIfOutsideViewport */, true, scrollType);\n    }\n    revealPositionNearTop(position, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealPosition(position, 5 /* VerticalRevealType.NearTop */, true, scrollType);\n    }\n    _revealPosition(position, verticalType, revealHorizontal, scrollType) {\n        if (!Position.isIPosition(position)) {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(position.lineNumber, position.column, position.lineNumber, position.column), verticalType, revealHorizontal, scrollType);\n    }\n    getSelection() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getSelection();\n    }\n    getSelections() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel.getSelections();\n    }\n    setSelection(something, source = 'api') {\n        const isSelection = Selection.isISelection(something);\n        const isRange = Range.isIRange(something);\n        if (!isSelection && !isRange) {\n            throw new Error('Invalid arguments');\n        }\n        if (isSelection) {\n            this._setSelectionImpl(something, source);\n        }\n        else if (isRange) {\n            // act as if it was an IRange\n            const selection = {\n                selectionStartLineNumber: something.startLineNumber,\n                selectionStartColumn: something.startColumn,\n                positionLineNumber: something.endLineNumber,\n                positionColumn: something.endColumn\n            };\n            this._setSelectionImpl(selection, source);\n        }\n    }\n    _setSelectionImpl(sel, source) {\n        if (!this._modelData) {\n            return;\n        }\n        const selection = new Selection(sel.selectionStartLineNumber, sel.selectionStartColumn, sel.positionLineNumber, sel.positionColumn);\n        this._modelData.viewModel.setSelections(source, [selection]);\n    }\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 0 /* VerticalRevealType.Simple */, scrollType);\n    }\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 1 /* VerticalRevealType.Center */, scrollType);\n    }\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 2 /* VerticalRevealType.CenterIfOutsideViewport */, scrollType);\n    }\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealLines(startLineNumber, endLineNumber, 5 /* VerticalRevealType.NearTop */, scrollType);\n    }\n    _revealLines(startLineNumber, endLineNumber, verticalType, scrollType) {\n        if (typeof startLineNumber !== 'number' || typeof endLineNumber !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(new Range(startLineNumber, 1, endLineNumber, 1), verticalType, false, scrollType);\n    }\n    revealRange(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\n        this._revealRange(range, revealVerticalInCenter ? 1 /* VerticalRevealType.Center */ : 0 /* VerticalRevealType.Simple */, revealHorizontal, scrollType);\n    }\n    revealRangeInCenter(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 1 /* VerticalRevealType.Center */, true, scrollType);\n    }\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 2 /* VerticalRevealType.CenterIfOutsideViewport */, true, scrollType);\n    }\n    revealRangeNearTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 5 /* VerticalRevealType.NearTop */, true, scrollType);\n    }\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 6 /* VerticalRevealType.NearTopIfOutsideViewport */, true, scrollType);\n    }\n    revealRangeAtTop(range, scrollType = 0 /* editorCommon.ScrollType.Smooth */) {\n        this._revealRange(range, 3 /* VerticalRevealType.Top */, true, scrollType);\n    }\n    _revealRange(range, verticalType, revealHorizontal, scrollType) {\n        if (!Range.isIRange(range)) {\n            throw new Error('Invalid arguments');\n        }\n        this._sendRevealRange(Range.lift(range), verticalType, revealHorizontal, scrollType);\n    }\n    setSelections(ranges, source = 'api', reason = 0 /* CursorChangeReason.NotSet */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (!ranges || ranges.length === 0) {\n            throw new Error('Invalid arguments');\n        }\n        for (let i = 0, len = ranges.length; i < len; i++) {\n            if (!Selection.isISelection(ranges[i])) {\n                throw new Error('Invalid arguments');\n            }\n        }\n        this._modelData.viewModel.setSelections(source, ranges, reason);\n    }\n    getContentWidth() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getContentWidth();\n    }\n    getScrollWidth() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getScrollWidth();\n    }\n    getScrollLeft() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getCurrentScrollLeft();\n    }\n    getContentHeight() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getContentHeight();\n    }\n    getScrollHeight() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getScrollHeight();\n    }\n    getScrollTop() {\n        if (!this._modelData) {\n            return -1;\n        }\n        return this._modelData.viewModel.viewLayout.getCurrentScrollTop();\n    }\n    setScrollLeft(newScrollLeft, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (typeof newScrollLeft !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition({\n            scrollLeft: newScrollLeft\n        }, scrollType);\n    }\n    setScrollTop(newScrollTop, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        if (typeof newScrollTop !== 'number') {\n            throw new Error('Invalid arguments');\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition({\n            scrollTop: newScrollTop\n        }, scrollType);\n    }\n    setScrollPosition(position, scrollType = 1 /* editorCommon.ScrollType.Immediate */) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.viewLayout.setScrollPosition(position, scrollType);\n    }\n    hasPendingScrollAnimation() {\n        if (!this._modelData) {\n            return false;\n        }\n        return this._modelData.viewModel.viewLayout.hasPendingScrollAnimation();\n    }\n    saveViewState() {\n        if (!this._modelData) {\n            return null;\n        }\n        const contributionsState = this._contributions.saveViewState();\n        const cursorState = this._modelData.viewModel.saveCursorState();\n        const viewState = this._modelData.viewModel.saveState();\n        return {\n            cursorState: cursorState,\n            viewState: viewState,\n            contributionsState: contributionsState\n        };\n    }\n    restoreViewState(s) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        const codeEditorState = s;\n        if (codeEditorState && codeEditorState.cursorState && codeEditorState.viewState) {\n            const cursorState = codeEditorState.cursorState;\n            if (Array.isArray(cursorState)) {\n                if (cursorState.length > 0) {\n                    this._modelData.viewModel.restoreCursorState(cursorState);\n                }\n            }\n            else {\n                // Backwards compatibility\n                this._modelData.viewModel.restoreCursorState([cursorState]);\n            }\n            this._contributions.restoreViewState(codeEditorState.contributionsState || {});\n            const reducedState = this._modelData.viewModel.reduceRestoreState(codeEditorState.viewState);\n            this._modelData.view.restoreState(reducedState);\n        }\n    }\n    handleInitialized() {\n        var _a;\n        (_a = this._getViewModel()) === null || _a === void 0 ? void 0 : _a.visibleLinesStabilized();\n    }\n    getContribution(id) {\n        return this._contributions.get(id);\n    }\n    getActions() {\n        return Array.from(this._actions.values());\n    }\n    getSupportedActions() {\n        let result = this.getActions();\n        result = result.filter(action => action.isSupported());\n        return result;\n    }\n    getAction(id) {\n        return this._actions.get(id) || null;\n    }\n    trigger(source, handlerId, payload) {\n        payload = payload || {};\n        switch (handlerId) {\n            case \"compositionStart\" /* editorCommon.Handler.CompositionStart */:\n                this._startComposition();\n                return;\n            case \"compositionEnd\" /* editorCommon.Handler.CompositionEnd */:\n                this._endComposition(source);\n                return;\n            case \"type\" /* editorCommon.Handler.Type */: {\n                const args = payload;\n                this._type(source, args.text || '');\n                return;\n            }\n            case \"replacePreviousChar\" /* editorCommon.Handler.ReplacePreviousChar */: {\n                const args = payload;\n                this._compositionType(source, args.text || '', args.replaceCharCnt || 0, 0, 0);\n                return;\n            }\n            case \"compositionType\" /* editorCommon.Handler.CompositionType */: {\n                const args = payload;\n                this._compositionType(source, args.text || '', args.replacePrevCharCnt || 0, args.replaceNextCharCnt || 0, args.positionDelta || 0);\n                return;\n            }\n            case \"paste\" /* editorCommon.Handler.Paste */: {\n                const args = payload;\n                this._paste(source, args.text || '', args.pasteOnNewLine || false, args.multicursorText || null, args.mode || null);\n                return;\n            }\n            case \"cut\" /* editorCommon.Handler.Cut */:\n                this._cut(source);\n                return;\n        }\n        const action = this.getAction(handlerId);\n        if (action) {\n            Promise.resolve(action.run(payload)).then(undefined, onUnexpectedError);\n            return;\n        }\n        if (!this._modelData) {\n            return;\n        }\n        if (this._triggerEditorCommand(source, handlerId, payload)) {\n            return;\n        }\n        this._triggerCommand(handlerId, payload);\n    }\n    _triggerCommand(handlerId, payload) {\n        this._commandService.executeCommand(handlerId, payload);\n    }\n    _startComposition() {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.startComposition();\n        this._onDidCompositionStart.fire();\n    }\n    _endComposition(source) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.endComposition(source);\n        this._onDidCompositionEnd.fire();\n    }\n    _type(source, text) {\n        if (!this._modelData || text.length === 0) {\n            return;\n        }\n        if (source === 'keyboard') {\n            this._onWillType.fire(text);\n        }\n        this._modelData.viewModel.type(text, source);\n        if (source === 'keyboard') {\n            this._onDidType.fire(text);\n        }\n    }\n    _compositionType(source, text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.compositionType(text, replacePrevCharCnt, replaceNextCharCnt, positionDelta, source);\n    }\n    _paste(source, text, pasteOnNewLine, multicursorText, mode) {\n        if (!this._modelData || text.length === 0) {\n            return;\n        }\n        const viewModel = this._modelData.viewModel;\n        const startPosition = viewModel.getSelection().getStartPosition();\n        viewModel.paste(text, pasteOnNewLine, multicursorText, source);\n        const endPosition = viewModel.getSelection().getStartPosition();\n        if (source === 'keyboard') {\n            this._onDidPaste.fire({\n                range: new Range(startPosition.lineNumber, startPosition.column, endPosition.lineNumber, endPosition.column),\n                languageId: mode\n            });\n        }\n    }\n    _cut(source) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.cut(source);\n    }\n    _triggerEditorCommand(source, handlerId, payload) {\n        const command = EditorExtensionsRegistry.getEditorCommand(handlerId);\n        if (command) {\n            payload = payload || {};\n            payload.source = source;\n            this._instantiationService.invokeFunction((accessor) => {\n                Promise.resolve(command.runEditorCommand(accessor, this, payload)).then(undefined, onUnexpectedError);\n            });\n            return true;\n        }\n        return false;\n    }\n    _getViewModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.viewModel;\n    }\n    pushUndoStop() {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(90 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        this._modelData.model.pushStackElement();\n        return true;\n    }\n    popUndoStop() {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(90 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        this._modelData.model.popStackElement();\n        return true;\n    }\n    executeEdits(source, edits, endCursorState) {\n        if (!this._modelData) {\n            return false;\n        }\n        if (this._configuration.options.get(90 /* EditorOption.readOnly */)) {\n            // read only editor => sorry!\n            return false;\n        }\n        let cursorStateComputer;\n        if (!endCursorState) {\n            cursorStateComputer = () => null;\n        }\n        else if (Array.isArray(endCursorState)) {\n            cursorStateComputer = () => endCursorState;\n        }\n        else {\n            cursorStateComputer = endCursorState;\n        }\n        this._modelData.viewModel.executeEdits(source, edits, cursorStateComputer);\n        return true;\n    }\n    executeCommand(source, command) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.executeCommand(command, source);\n    }\n    executeCommands(source, commands) {\n        if (!this._modelData) {\n            return;\n        }\n        this._modelData.viewModel.executeCommands(commands, source);\n    }\n    createDecorationsCollection(decorations) {\n        return new EditorDecorationsCollection(this, decorations);\n    }\n    changeDecorations(callback) {\n        if (!this._modelData) {\n            // callback will not be called\n            return null;\n        }\n        return this._modelData.model.changeDecorations(callback, this._id);\n    }\n    getLineDecorations(lineNumber) {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model.getLineDecorations(lineNumber, this._id, filterValidationDecorations(this._configuration.options));\n    }\n    getDecorationsInRange(range) {\n        if (!this._modelData) {\n            return null;\n        }\n        return this._modelData.model.getDecorationsInRange(range, this._id, filterValidationDecorations(this._configuration.options));\n    }\n    /**\n     * @deprecated\n     */\n    deltaDecorations(oldDecorations, newDecorations) {\n        if (!this._modelData) {\n            return [];\n        }\n        if (oldDecorations.length === 0 && newDecorations.length === 0) {\n            return oldDecorations;\n        }\n        return this._modelData.model.deltaDecorations(oldDecorations, newDecorations, this._id);\n    }\n    removeDecorations(decorationIds) {\n        if (!this._modelData || decorationIds.length === 0) {\n            return;\n        }\n        this._modelData.model.changeDecorations((changeAccessor) => {\n            changeAccessor.deltaDecorations(decorationIds, []);\n        });\n    }\n    removeDecorationsByType(decorationTypeKey) {\n        // remove decorations for type and sub type\n        const oldDecorationsIds = this._decorationTypeKeysToIds[decorationTypeKey];\n        if (oldDecorationsIds) {\n            this.deltaDecorations(oldDecorationsIds, []);\n        }\n        if (this._decorationTypeKeysToIds.hasOwnProperty(decorationTypeKey)) {\n            delete this._decorationTypeKeysToIds[decorationTypeKey];\n        }\n        if (this._decorationTypeSubtypes.hasOwnProperty(decorationTypeKey)) {\n            delete this._decorationTypeSubtypes[decorationTypeKey];\n        }\n    }\n    getLayoutInfo() {\n        const options = this._configuration.options;\n        const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n        return layoutInfo;\n    }\n    createOverviewRuler(cssClassName) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.createOverviewRuler(cssClassName);\n    }\n    getContainerDomNode() {\n        return this._domElement;\n    }\n    getDomNode() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.domNode.domNode;\n    }\n    delegateVerticalScrollbarPointerDown(browserEvent) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.delegateVerticalScrollbarPointerDown(browserEvent);\n    }\n    delegateScrollFromMouseWheelEvent(browserEvent) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.delegateScrollFromMouseWheelEvent(browserEvent);\n    }\n    layout(dimension) {\n        this._configuration.observeContainer(dimension);\n        this.render();\n    }\n    focus() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.focus();\n    }\n    hasTextFocus() {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return false;\n        }\n        return this._modelData.view.isFocused();\n    }\n    hasWidgetFocus() {\n        return this._focusTracker && this._focusTracker.hasFocus();\n    }\n    addContentWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._contentWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting a content widget with the same id.');\n        }\n        this._contentWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addContentWidget(widgetData);\n        }\n    }\n    layoutContentWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._contentWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutContentWidget(widgetData);\n            }\n        }\n    }\n    removeContentWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._contentWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._contentWidgets[widgetId];\n            delete this._contentWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeContentWidget(widgetData);\n            }\n        }\n    }\n    addOverlayWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._overlayWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting an overlay widget with the same id.');\n        }\n        this._overlayWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addOverlayWidget(widgetData);\n        }\n    }\n    layoutOverlayWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._overlayWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutOverlayWidget(widgetData);\n            }\n        }\n    }\n    removeOverlayWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._overlayWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._overlayWidgets[widgetId];\n            delete this._overlayWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeOverlayWidget(widgetData);\n            }\n        }\n    }\n    addGlyphMarginWidget(widget) {\n        const widgetData = {\n            widget: widget,\n            position: widget.getPosition()\n        };\n        if (this._glyphMarginWidgets.hasOwnProperty(widget.getId())) {\n            console.warn('Overwriting a glyph margin widget with the same id.');\n        }\n        this._glyphMarginWidgets[widget.getId()] = widgetData;\n        if (this._modelData && this._modelData.hasRealView) {\n            this._modelData.view.addGlyphMarginWidget(widgetData);\n        }\n    }\n    layoutGlyphMarginWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._glyphMarginWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._glyphMarginWidgets[widgetId];\n            widgetData.position = widget.getPosition();\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.layoutGlyphMarginWidget(widgetData);\n            }\n        }\n    }\n    removeGlyphMarginWidget(widget) {\n        const widgetId = widget.getId();\n        if (this._glyphMarginWidgets.hasOwnProperty(widgetId)) {\n            const widgetData = this._glyphMarginWidgets[widgetId];\n            delete this._glyphMarginWidgets[widgetId];\n            if (this._modelData && this._modelData.hasRealView) {\n                this._modelData.view.removeGlyphMarginWidget(widgetData);\n            }\n        }\n    }\n    changeViewZones(callback) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.change(callback);\n    }\n    getTargetAtClientPoint(clientX, clientY) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        return this._modelData.view.getTargetAtClientPoint(clientX, clientY);\n    }\n    getScrolledVisiblePosition(rawPosition) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return null;\n        }\n        const position = this._modelData.model.validatePosition(rawPosition);\n        const options = this._configuration.options;\n        const layoutInfo = options.get(143 /* EditorOption.layoutInfo */);\n        const top = CodeEditorWidget_1._getVerticalOffsetForPosition(this._modelData, position.lineNumber, position.column) - this.getScrollTop();\n        const left = this._modelData.view.getOffsetForColumn(position.lineNumber, position.column) + layoutInfo.glyphMarginWidth + layoutInfo.lineNumbersWidth + layoutInfo.decorationsWidth - this.getScrollLeft();\n        return {\n            top: top,\n            left: left,\n            height: options.get(66 /* EditorOption.lineHeight */)\n        };\n    }\n    getOffsetForColumn(lineNumber, column) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return -1;\n        }\n        return this._modelData.view.getOffsetForColumn(lineNumber, column);\n    }\n    render(forceRedraw = false) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.render(true, forceRedraw);\n    }\n    setAriaOptions(options) {\n        if (!this._modelData || !this._modelData.hasRealView) {\n            return;\n        }\n        this._modelData.view.setAriaOptions(options);\n    }\n    applyFontInfo(target) {\n        applyFontInfo(target, this._configuration.options.get(50 /* EditorOption.fontInfo */));\n    }\n    setBanner(domNode, domNodeHeight) {\n        if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n            this._domElement.removeChild(this._bannerDomNode);\n        }\n        this._bannerDomNode = domNode;\n        this._configuration.setReservedHeight(domNode ? domNodeHeight : 0);\n        if (this._bannerDomNode) {\n            this._domElement.prepend(this._bannerDomNode);\n        }\n    }\n    _attachModel(model) {\n        if (!model) {\n            this._modelData = null;\n            return;\n        }\n        const listenersToRemove = [];\n        this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n        this._configuration.setIsDominatedByLongLines(model.isDominatedByLongLines());\n        this._configuration.setModelLineCount(model.getLineCount());\n        const attachedView = model.onBeforeAttached();\n        const viewModel = new ViewModel(this._id, this._configuration, model, DOMLineBreaksComputerFactory.create(), MonospaceLineBreaksComputerFactory.create(this._configuration.options), (callback) => dom.scheduleAtNextAnimationFrame(callback), this.languageConfigurationService, this._themeService, attachedView);\n        // Someone might destroy the model from under the editor, so prevent any exceptions by setting a null model\n        listenersToRemove.push(model.onWillDispose(() => this.setModel(null)));\n        listenersToRemove.push(viewModel.onEvent((e) => {\n            switch (e.kind) {\n                case 0 /* OutgoingViewModelEventKind.ContentSizeChanged */:\n                    this._onDidContentSizeChange.fire(e);\n                    break;\n                case 1 /* OutgoingViewModelEventKind.FocusChanged */:\n                    this._editorTextFocus.setValue(e.hasFocus);\n                    break;\n                case 2 /* OutgoingViewModelEventKind.ScrollChanged */:\n                    this._onDidScrollChange.fire(e);\n                    break;\n                case 3 /* OutgoingViewModelEventKind.ViewZonesChanged */:\n                    this._onDidChangeViewZones.fire();\n                    break;\n                case 4 /* OutgoingViewModelEventKind.HiddenAreasChanged */:\n                    this._onDidChangeHiddenAreas.fire();\n                    break;\n                case 5 /* OutgoingViewModelEventKind.ReadOnlyEditAttempt */:\n                    this._onDidAttemptReadOnlyEdit.fire();\n                    break;\n                case 6 /* OutgoingViewModelEventKind.CursorStateChanged */: {\n                    if (e.reachedMaxCursorCount) {\n                        const multiCursorLimit = this.getOption(79 /* EditorOption.multiCursorLimit */);\n                        const message = nls.localize('cursors.maximum', \"The number of cursors has been limited to {0}. Consider using [find and replace](https://code.visualstudio.com/docs/editor/codebasics#_find-and-replace) for larger changes or increase the editor multi cursor limit setting.\", multiCursorLimit);\n                        this._notificationService.prompt(Severity.Warning, message, [\n                            {\n                                label: 'Find and Replace',\n                                run: () => {\n                                    this._commandService.executeCommand('editor.action.startFindReplaceAction');\n                                }\n                            },\n                            {\n                                label: nls.localize('goToSetting', 'Increase Multi Cursor Limit'),\n                                run: () => {\n                                    this._commandService.executeCommand('workbench.action.openSettings2', {\n                                        query: 'editor.multiCursorLimit'\n                                    });\n                                }\n                            }\n                        ]);\n                    }\n                    const positions = [];\n                    for (let i = 0, len = e.selections.length; i < len; i++) {\n                        positions[i] = e.selections[i].getPosition();\n                    }\n                    const e1 = {\n                        position: positions[0],\n                        secondaryPositions: positions.slice(1),\n                        reason: e.reason,\n                        source: e.source\n                    };\n                    this._onDidChangeCursorPosition.fire(e1);\n                    const e2 = {\n                        selection: e.selections[0],\n                        secondarySelections: e.selections.slice(1),\n                        modelVersionId: e.modelVersionId,\n                        oldSelections: e.oldSelections,\n                        oldModelVersionId: e.oldModelVersionId,\n                        source: e.source,\n                        reason: e.reason\n                    };\n                    this._onDidChangeCursorSelection.fire(e2);\n                    break;\n                }\n                case 7 /* OutgoingViewModelEventKind.ModelDecorationsChanged */:\n                    this._onDidChangeModelDecorations.fire(e.event);\n                    break;\n                case 8 /* OutgoingViewModelEventKind.ModelLanguageChanged */:\n                    this._domElement.setAttribute('data-mode-id', model.getLanguageId());\n                    this._onDidChangeModelLanguage.fire(e.event);\n                    break;\n                case 9 /* OutgoingViewModelEventKind.ModelLanguageConfigurationChanged */:\n                    this._onDidChangeModelLanguageConfiguration.fire(e.event);\n                    break;\n                case 10 /* OutgoingViewModelEventKind.ModelContentChanged */:\n                    this._onDidChangeModelContent.fire(e.event);\n                    break;\n                case 11 /* OutgoingViewModelEventKind.ModelOptionsChanged */:\n                    this._onDidChangeModelOptions.fire(e.event);\n                    break;\n                case 12 /* OutgoingViewModelEventKind.ModelTokensChanged */:\n                    this._onDidChangeModelTokens.fire(e.event);\n                    break;\n            }\n        }));\n        const [view, hasRealView] = this._createView(viewModel);\n        if (hasRealView) {\n            this._domElement.appendChild(view.domNode.domNode);\n            let keys = Object.keys(this._contentWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addContentWidget(this._contentWidgets[widgetId]);\n            }\n            keys = Object.keys(this._overlayWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addOverlayWidget(this._overlayWidgets[widgetId]);\n            }\n            keys = Object.keys(this._glyphMarginWidgets);\n            for (let i = 0, len = keys.length; i < len; i++) {\n                const widgetId = keys[i];\n                view.addGlyphMarginWidget(this._glyphMarginWidgets[widgetId]);\n            }\n            view.render(false, true);\n            view.domNode.domNode.setAttribute('data-uri', model.uri.toString());\n        }\n        this._modelData = new ModelData(model, viewModel, view, hasRealView, listenersToRemove, attachedView);\n    }\n    _createView(viewModel) {\n        let commandDelegate;\n        if (this.isSimpleWidget) {\n            commandDelegate = {\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\n                    this._paste('keyboard', text, pasteOnNewLine, multicursorText, mode);\n                },\n                type: (text) => {\n                    this._type('keyboard', text);\n                },\n                compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n                    this._compositionType('keyboard', text, replacePrevCharCnt, replaceNextCharCnt, positionDelta);\n                },\n                startComposition: () => {\n                    this._startComposition();\n                },\n                endComposition: () => {\n                    this._endComposition('keyboard');\n                },\n                cut: () => {\n                    this._cut('keyboard');\n                }\n            };\n        }\n        else {\n            commandDelegate = {\n                paste: (text, pasteOnNewLine, multicursorText, mode) => {\n                    const payload = { text, pasteOnNewLine, multicursorText, mode };\n                    this._commandService.executeCommand(\"paste\" /* editorCommon.Handler.Paste */, payload);\n                },\n                type: (text) => {\n                    const payload = { text };\n                    this._commandService.executeCommand(\"type\" /* editorCommon.Handler.Type */, payload);\n                },\n                compositionType: (text, replacePrevCharCnt, replaceNextCharCnt, positionDelta) => {\n                    // Try if possible to go through the existing `replacePreviousChar` command\n                    if (replaceNextCharCnt || positionDelta) {\n                        // must be handled through the new command\n                        const payload = { text, replacePrevCharCnt, replaceNextCharCnt, positionDelta };\n                        this._commandService.executeCommand(\"compositionType\" /* editorCommon.Handler.CompositionType */, payload);\n                    }\n                    else {\n                        const payload = { text, replaceCharCnt: replacePrevCharCnt };\n                        this._commandService.executeCommand(\"replacePreviousChar\" /* editorCommon.Handler.ReplacePreviousChar */, payload);\n                    }\n                },\n                startComposition: () => {\n                    this._commandService.executeCommand(\"compositionStart\" /* editorCommon.Handler.CompositionStart */, {});\n                },\n                endComposition: () => {\n                    this._commandService.executeCommand(\"compositionEnd\" /* editorCommon.Handler.CompositionEnd */, {});\n                },\n                cut: () => {\n                    this._commandService.executeCommand(\"cut\" /* editorCommon.Handler.Cut */, {});\n                }\n            };\n        }\n        const viewUserInputEvents = new ViewUserInputEvents(viewModel.coordinatesConverter);\n        viewUserInputEvents.onKeyDown = (e) => this._onKeyDown.fire(e);\n        viewUserInputEvents.onKeyUp = (e) => this._onKeyUp.fire(e);\n        viewUserInputEvents.onContextMenu = (e) => this._onContextMenu.fire(e);\n        viewUserInputEvents.onMouseMove = (e) => this._onMouseMove.fire(e);\n        viewUserInputEvents.onMouseLeave = (e) => this._onMouseLeave.fire(e);\n        viewUserInputEvents.onMouseDown = (e) => this._onMouseDown.fire(e);\n        viewUserInputEvents.onMouseUp = (e) => this._onMouseUp.fire(e);\n        viewUserInputEvents.onMouseDrag = (e) => this._onMouseDrag.fire(e);\n        viewUserInputEvents.onMouseDrop = (e) => this._onMouseDrop.fire(e);\n        viewUserInputEvents.onMouseDropCanceled = (e) => this._onMouseDropCanceled.fire(e);\n        viewUserInputEvents.onMouseWheel = (e) => this._onMouseWheel.fire(e);\n        const view = new View(commandDelegate, this._configuration, this._themeService.getColorTheme(), viewModel, viewUserInputEvents, this._overflowWidgetsDomNode, this._instantiationService);\n        return [view, true];\n    }\n    _postDetachModelCleanup(detachedModel) {\n        detachedModel === null || detachedModel === void 0 ? void 0 : detachedModel.removeAllDecorationsWithOwnerId(this._id);\n    }\n    _detachModel() {\n        if (!this._modelData) {\n            return null;\n        }\n        const model = this._modelData.model;\n        const removeDomNode = this._modelData.hasRealView ? this._modelData.view.domNode.domNode : null;\n        this._modelData.dispose();\n        this._modelData = null;\n        this._domElement.removeAttribute('data-mode-id');\n        if (removeDomNode && this._domElement.contains(removeDomNode)) {\n            this._domElement.removeChild(removeDomNode);\n        }\n        if (this._bannerDomNode && this._domElement.contains(this._bannerDomNode)) {\n            this._domElement.removeChild(this._bannerDomNode);\n        }\n        return model;\n    }\n    _removeDecorationType(key) {\n        this._codeEditorService.removeDecorationType(key);\n    }\n    hasModel() {\n        return (this._modelData !== null);\n    }\n    showDropIndicatorAt(position) {\n        const newDecorations = [{\n                range: new Range(position.lineNumber, position.column, position.lineNumber, position.column),\n                options: CodeEditorWidget_1.dropIntoEditorDecorationOptions\n            }];\n        this._dropIntoEditorDecorations.set(newDecorations);\n        this.revealPosition(position, 1 /* editorCommon.ScrollType.Immediate */);\n    }\n    removeDropIndicator() {\n        this._dropIntoEditorDecorations.clear();\n    }\n    setContextValue(key, value) {\n        this._contextKeyService.createKey(key, value);\n    }\n};\nCodeEditorWidget.dropIntoEditorDecorationOptions = ModelDecorationOptions.register({\n    description: 'workbench-dnd-target',\n    className: 'dnd-target'\n});\nCodeEditorWidget = CodeEditorWidget_1 = __decorate([\n    __param(3, IInstantiationService),\n    __param(4, ICodeEditorService),\n    __param(5, ICommandService),\n    __param(6, IContextKeyService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService),\n    __param(11, ILanguageFeaturesService)\n], CodeEditorWidget);\nexport { CodeEditorWidget };\nexport class BooleanEventEmitter extends Disposable {\n    constructor(_emitterOptions) {\n        super();\n        this._emitterOptions = _emitterOptions;\n        this._onDidChangeToTrue = this._register(new Emitter(this._emitterOptions));\n        this.onDidChangeToTrue = this._onDidChangeToTrue.event;\n        this._onDidChangeToFalse = this._register(new Emitter(this._emitterOptions));\n        this.onDidChangeToFalse = this._onDidChangeToFalse.event;\n        this._value = 0 /* BooleanEventValue.NotSet */;\n    }\n    setValue(_value) {\n        const value = (_value ? 2 /* BooleanEventValue.True */ : 1 /* BooleanEventValue.False */);\n        if (this._value === value) {\n            return;\n        }\n        this._value = value;\n        if (this._value === 2 /* BooleanEventValue.True */) {\n            this._onDidChangeToTrue.fire();\n        }\n        else if (this._value === 1 /* BooleanEventValue.False */) {\n            this._onDidChangeToFalse.fire();\n        }\n    }\n}\n/**\n * A regular event emitter that also makes sure contributions are instantiated if necessary\n */\nclass InteractionEmitter extends Emitter {\n    constructor(_contributions, deliveryQueue) {\n        super({ deliveryQueue });\n        this._contributions = _contributions;\n    }\n    fire(event) {\n        this._contributions.onBeforeInteractionEvent();\n        super.fire(event);\n    }\n}\nclass EditorContextKeysManager extends Disposable {\n    constructor(editor, contextKeyService) {\n        super();\n        this._editor = editor;\n        contextKeyService.createKey('editorId', editor.getId());\n        this._editorSimpleInput = EditorContextKeys.editorSimpleInput.bindTo(contextKeyService);\n        this._editorFocus = EditorContextKeys.focus.bindTo(contextKeyService);\n        this._textInputFocus = EditorContextKeys.textInputFocus.bindTo(contextKeyService);\n        this._editorTextFocus = EditorContextKeys.editorTextFocus.bindTo(contextKeyService);\n        this._tabMovesFocus = EditorContextKeys.tabMovesFocus.bindTo(contextKeyService);\n        this._editorReadonly = EditorContextKeys.readOnly.bindTo(contextKeyService);\n        this._inDiffEditor = EditorContextKeys.inDiffEditor.bindTo(contextKeyService);\n        this._editorColumnSelection = EditorContextKeys.columnSelection.bindTo(contextKeyService);\n        this._hasMultipleSelections = EditorContextKeys.hasMultipleSelections.bindTo(contextKeyService);\n        this._hasNonEmptySelection = EditorContextKeys.hasNonEmptySelection.bindTo(contextKeyService);\n        this._canUndo = EditorContextKeys.canUndo.bindTo(contextKeyService);\n        this._canRedo = EditorContextKeys.canRedo.bindTo(contextKeyService);\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromConfig()));\n        this._register(this._editor.onDidChangeCursorSelection(() => this._updateFromSelection()));\n        this._register(this._editor.onDidFocusEditorWidget(() => this._updateFromFocus()));\n        this._register(this._editor.onDidBlurEditorWidget(() => this._updateFromFocus()));\n        this._register(this._editor.onDidFocusEditorText(() => this._updateFromFocus()));\n        this._register(this._editor.onDidBlurEditorText(() => this._updateFromFocus()));\n        this._register(this._editor.onDidChangeModel(() => this._updateFromModel()));\n        this._register(this._editor.onDidChangeConfiguration(() => this._updateFromModel()));\n        this._register(TabFocus.onDidChangeTabFocus((tabFocusMode) => this._tabMovesFocus.set(tabFocusMode)));\n        this._updateFromConfig();\n        this._updateFromSelection();\n        this._updateFromFocus();\n        this._updateFromModel();\n        this._editorSimpleInput.set(this._editor.isSimpleWidget);\n    }\n    _updateFromConfig() {\n        const options = this._editor.getOptions();\n        this._tabMovesFocus.set(TabFocus.getTabFocusMode());\n        this._editorReadonly.set(options.get(90 /* EditorOption.readOnly */));\n        this._inDiffEditor.set(options.get(61 /* EditorOption.inDiffEditor */));\n        this._editorColumnSelection.set(options.get(22 /* EditorOption.columnSelection */));\n    }\n    _updateFromSelection() {\n        const selections = this._editor.getSelections();\n        if (!selections) {\n            this._hasMultipleSelections.reset();\n            this._hasNonEmptySelection.reset();\n        }\n        else {\n            this._hasMultipleSelections.set(selections.length > 1);\n            this._hasNonEmptySelection.set(selections.some(s => !s.isEmpty()));\n        }\n    }\n    _updateFromFocus() {\n        this._editorFocus.set(this._editor.hasWidgetFocus() && !this._editor.isSimpleWidget);\n        this._editorTextFocus.set(this._editor.hasTextFocus() && !this._editor.isSimpleWidget);\n        this._textInputFocus.set(this._editor.hasTextFocus());\n    }\n    _updateFromModel() {\n        const model = this._editor.getModel();\n        this._canUndo.set(Boolean(model && model.canUndo()));\n        this._canRedo.set(Boolean(model && model.canRedo()));\n    }\n}\nexport class EditorModeContext extends Disposable {\n    constructor(_editor, _contextKeyService, _languageFeaturesService) {\n        super();\n        this._editor = _editor;\n        this._contextKeyService = _contextKeyService;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._langId = EditorContextKeys.languageId.bindTo(_contextKeyService);\n        this._hasCompletionItemProvider = EditorContextKeys.hasCompletionItemProvider.bindTo(_contextKeyService);\n        this._hasCodeActionsProvider = EditorContextKeys.hasCodeActionsProvider.bindTo(_contextKeyService);\n        this._hasCodeLensProvider = EditorContextKeys.hasCodeLensProvider.bindTo(_contextKeyService);\n        this._hasDefinitionProvider = EditorContextKeys.hasDefinitionProvider.bindTo(_contextKeyService);\n        this._hasDeclarationProvider = EditorContextKeys.hasDeclarationProvider.bindTo(_contextKeyService);\n        this._hasImplementationProvider = EditorContextKeys.hasImplementationProvider.bindTo(_contextKeyService);\n        this._hasTypeDefinitionProvider = EditorContextKeys.hasTypeDefinitionProvider.bindTo(_contextKeyService);\n        this._hasHoverProvider = EditorContextKeys.hasHoverProvider.bindTo(_contextKeyService);\n        this._hasDocumentHighlightProvider = EditorContextKeys.hasDocumentHighlightProvider.bindTo(_contextKeyService);\n        this._hasDocumentSymbolProvider = EditorContextKeys.hasDocumentSymbolProvider.bindTo(_contextKeyService);\n        this._hasReferenceProvider = EditorContextKeys.hasReferenceProvider.bindTo(_contextKeyService);\n        this._hasRenameProvider = EditorContextKeys.hasRenameProvider.bindTo(_contextKeyService);\n        this._hasSignatureHelpProvider = EditorContextKeys.hasSignatureHelpProvider.bindTo(_contextKeyService);\n        this._hasInlayHintsProvider = EditorContextKeys.hasInlayHintsProvider.bindTo(_contextKeyService);\n        this._hasDocumentFormattingProvider = EditorContextKeys.hasDocumentFormattingProvider.bindTo(_contextKeyService);\n        this._hasDocumentSelectionFormattingProvider = EditorContextKeys.hasDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n        this._hasMultipleDocumentFormattingProvider = EditorContextKeys.hasMultipleDocumentFormattingProvider.bindTo(_contextKeyService);\n        this._hasMultipleDocumentSelectionFormattingProvider = EditorContextKeys.hasMultipleDocumentSelectionFormattingProvider.bindTo(_contextKeyService);\n        this._isInWalkThrough = EditorContextKeys.isInWalkThroughSnippet.bindTo(_contextKeyService);\n        const update = () => this._update();\n        // update when model/mode changes\n        this._register(_editor.onDidChangeModel(update));\n        this._register(_editor.onDidChangeModelLanguage(update));\n        // update when registries change\n        this._register(_languageFeaturesService.completionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.codeActionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.codeLensProvider.onDidChange(update));\n        this._register(_languageFeaturesService.definitionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.declarationProvider.onDidChange(update));\n        this._register(_languageFeaturesService.implementationProvider.onDidChange(update));\n        this._register(_languageFeaturesService.typeDefinitionProvider.onDidChange(update));\n        this._register(_languageFeaturesService.hoverProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentHighlightProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentSymbolProvider.onDidChange(update));\n        this._register(_languageFeaturesService.referenceProvider.onDidChange(update));\n        this._register(_languageFeaturesService.renameProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentFormattingEditProvider.onDidChange(update));\n        this._register(_languageFeaturesService.documentRangeFormattingEditProvider.onDidChange(update));\n        this._register(_languageFeaturesService.signatureHelpProvider.onDidChange(update));\n        this._register(_languageFeaturesService.inlayHintsProvider.onDidChange(update));\n        update();\n    }\n    dispose() {\n        super.dispose();\n    }\n    reset() {\n        this._contextKeyService.bufferChangeEvents(() => {\n            this._langId.reset();\n            this._hasCompletionItemProvider.reset();\n            this._hasCodeActionsProvider.reset();\n            this._hasCodeLensProvider.reset();\n            this._hasDefinitionProvider.reset();\n            this._hasDeclarationProvider.reset();\n            this._hasImplementationProvider.reset();\n            this._hasTypeDefinitionProvider.reset();\n            this._hasHoverProvider.reset();\n            this._hasDocumentHighlightProvider.reset();\n            this._hasDocumentSymbolProvider.reset();\n            this._hasReferenceProvider.reset();\n            this._hasRenameProvider.reset();\n            this._hasDocumentFormattingProvider.reset();\n            this._hasDocumentSelectionFormattingProvider.reset();\n            this._hasSignatureHelpProvider.reset();\n            this._isInWalkThrough.reset();\n        });\n    }\n    _update() {\n        const model = this._editor.getModel();\n        if (!model) {\n            this.reset();\n            return;\n        }\n        this._contextKeyService.bufferChangeEvents(() => {\n            this._langId.set(model.getLanguageId());\n            this._hasCompletionItemProvider.set(this._languageFeaturesService.completionProvider.has(model));\n            this._hasCodeActionsProvider.set(this._languageFeaturesService.codeActionProvider.has(model));\n            this._hasCodeLensProvider.set(this._languageFeaturesService.codeLensProvider.has(model));\n            this._hasDefinitionProvider.set(this._languageFeaturesService.definitionProvider.has(model));\n            this._hasDeclarationProvider.set(this._languageFeaturesService.declarationProvider.has(model));\n            this._hasImplementationProvider.set(this._languageFeaturesService.implementationProvider.has(model));\n            this._hasTypeDefinitionProvider.set(this._languageFeaturesService.typeDefinitionProvider.has(model));\n            this._hasHoverProvider.set(this._languageFeaturesService.hoverProvider.has(model));\n            this._hasDocumentHighlightProvider.set(this._languageFeaturesService.documentHighlightProvider.has(model));\n            this._hasDocumentSymbolProvider.set(this._languageFeaturesService.documentSymbolProvider.has(model));\n            this._hasReferenceProvider.set(this._languageFeaturesService.referenceProvider.has(model));\n            this._hasRenameProvider.set(this._languageFeaturesService.renameProvider.has(model));\n            this._hasSignatureHelpProvider.set(this._languageFeaturesService.signatureHelpProvider.has(model));\n            this._hasInlayHintsProvider.set(this._languageFeaturesService.inlayHintsProvider.has(model));\n            this._hasDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.has(model) || this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));\n            this._hasDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.has(model));\n            this._hasMultipleDocumentFormattingProvider.set(this._languageFeaturesService.documentFormattingEditProvider.all(model).length + this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);\n            this._hasMultipleDocumentSelectionFormattingProvider.set(this._languageFeaturesService.documentRangeFormattingEditProvider.all(model).length > 1);\n            this._isInWalkThrough.set(model.uri.scheme === Schemas.walkThroughSnippet);\n        });\n    }\n}\nclass CodeEditorWidgetFocusTracker extends Disposable {\n    constructor(domElement) {\n        super();\n        this._onChange = this._register(new Emitter());\n        this.onChange = this._onChange.event;\n        this._hasFocus = false;\n        this._domFocusTracker = this._register(dom.trackFocus(domElement));\n        this._register(this._domFocusTracker.onDidFocus(() => {\n            this._hasFocus = true;\n            this._onChange.fire(undefined);\n        }));\n        this._register(this._domFocusTracker.onDidBlur(() => {\n            this._hasFocus = false;\n            this._onChange.fire(undefined);\n        }));\n    }\n    hasFocus() {\n        return this._hasFocus;\n    }\n}\nclass EditorDecorationsCollection {\n    get length() {\n        return this._decorationIds.length;\n    }\n    constructor(_editor, decorations) {\n        this._editor = _editor;\n        this._decorationIds = [];\n        this._isChangingDecorations = false;\n        if (Array.isArray(decorations) && decorations.length > 0) {\n            this.set(decorations);\n        }\n    }\n    onDidChange(listener, thisArgs, disposables) {\n        return this._editor.onDidChangeModelDecorations((e) => {\n            if (this._isChangingDecorations) {\n                return;\n            }\n            listener.call(thisArgs, e);\n        }, disposables);\n    }\n    getRange(index) {\n        if (!this._editor.hasModel()) {\n            return null;\n        }\n        if (index >= this._decorationIds.length) {\n            return null;\n        }\n        return this._editor.getModel().getDecorationRange(this._decorationIds[index]);\n    }\n    getRanges() {\n        if (!this._editor.hasModel()) {\n            return [];\n        }\n        const model = this._editor.getModel();\n        const result = [];\n        for (const decorationId of this._decorationIds) {\n            const range = model.getDecorationRange(decorationId);\n            if (range) {\n                result.push(range);\n            }\n        }\n        return result;\n    }\n    has(decoration) {\n        return this._decorationIds.includes(decoration.id);\n    }\n    clear() {\n        if (this._decorationIds.length === 0) {\n            // nothing to do\n            return;\n        }\n        this.set([]);\n    }\n    set(newDecorations) {\n        try {\n            this._isChangingDecorations = true;\n            this._editor.changeDecorations((accessor) => {\n                this._decorationIds = accessor.deltaDecorations(this._decorationIds, newDecorations);\n            });\n        }\n        finally {\n            this._isChangingDecorations = false;\n        }\n        return this._decorationIds;\n    }\n}\nconst squigglyStart = encodeURIComponent(`<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 6 3' enable-background='new 0 0 6 3' height='3' width='6'><g fill='`);\nconst squigglyEnd = encodeURIComponent(`'><polygon points='5.5,0 2.5,3 1.1,3 4.1,0'/><polygon points='4,0 6,2 6,0.6 5.4,0'/><polygon points='0,2 1,3 2.4,3 0,0.6'/></g></svg>`);\nfunction getSquigglySVGData(color) {\n    return squigglyStart + encodeURIComponent(color.toString()) + squigglyEnd;\n}\nconst dotdotdotStart = encodeURIComponent(`<svg xmlns=\"http://www.w3.org/2000/svg\" height=\"3\" width=\"12\"><g fill=\"`);\nconst dotdotdotEnd = encodeURIComponent(`\"><circle cx=\"1\" cy=\"1\" r=\"1\"/><circle cx=\"5\" cy=\"1\" r=\"1\"/><circle cx=\"9\" cy=\"1\" r=\"1\"/></g></svg>`);\nfunction getDotDotDotSVGData(color) {\n    return dotdotdotStart + encodeURIComponent(color.toString()) + dotdotdotEnd;\n}\nregisterThemingParticipant((theme, collector) => {\n    const errorForeground = theme.getColor(editorErrorForeground);\n    if (errorForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-error\" /* ClassName.EditorErrorDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(errorForeground)}\") repeat-x bottom left; }`);\n    }\n    const warningForeground = theme.getColor(editorWarningForeground);\n    if (warningForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-warning\" /* ClassName.EditorWarningDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(warningForeground)}\") repeat-x bottom left; }`);\n    }\n    const infoForeground = theme.getColor(editorInfoForeground);\n    if (infoForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-info\" /* ClassName.EditorInfoDecoration */} { background: url(\"data:image/svg+xml,${getSquigglySVGData(infoForeground)}\") repeat-x bottom left; }`);\n    }\n    const hintForeground = theme.getColor(editorHintForeground);\n    if (hintForeground) {\n        collector.addRule(`.monaco-editor .${\"squiggly-hint\" /* ClassName.EditorHintDecoration */} { background: url(\"data:image/svg+xml,${getDotDotDotSVGData(hintForeground)}\") no-repeat bottom left; }`);\n    }\n    const unnecessaryForeground = theme.getColor(editorUnnecessaryCodeOpacity);\n    if (unnecessaryForeground) {\n        collector.addRule(`.monaco-editor.showUnused .${\"squiggly-inline-unnecessary\" /* ClassName.EditorUnnecessaryInlineDecoration */} { opacity: ${unnecessaryForeground.rgba.a}; }`);\n    }\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { getActiveElement } from '../../../../base/browser/dom.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { EditorAction2 } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { DiffEditorWidget } from './diffEditorWidget.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { localize } from '../../../../nls.js';\nimport { Action2, MenuId, MenuRegistry, registerAction2 } from '../../../../platform/actions/common/actions.js';\nimport { CommandsRegistry } from '../../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nimport { ContextKeyEqualsExpr, ContextKeyExpr } from '../../../../platform/contextkey/common/contextkey.js';\nexport class ToggleCollapseUnchangedRegions extends Action2 {\n    constructor() {\n        super({\n            id: 'diffEditor.toggleCollapseUnchangedRegions',\n            title: { value: localize('toggleCollapseUnchangedRegions', \"Toggle Collapse Unchanged Regions\"), original: 'Toggle Collapse Unchanged Regions' },\n            icon: Codicon.map,\n            toggled: ContextKeyExpr.has('config.diffEditor.hideUnchangedRegions.enabled'),\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            menu: {\n                when: ContextKeyExpr.has('isInDiffEditor'),\n                id: MenuId.EditorTitle,\n                order: 22,\n                group: 'navigation',\n            },\n        });\n    }\n    run(accessor, ...args) {\n        const configurationService = accessor.get(IConfigurationService);\n        const newValue = !configurationService.getValue('diffEditor.hideUnchangedRegions.enabled');\n        configurationService.updateValue('diffEditor.hideUnchangedRegions.enabled', newValue);\n    }\n}\nregisterAction2(ToggleCollapseUnchangedRegions);\nexport class ToggleShowMovedCodeBlocks extends Action2 {\n    constructor() {\n        super({\n            id: 'diffEditor.toggleShowMovedCodeBlocks',\n            title: { value: localize('toggleShowMovedCodeBlocks', \"Toggle Show Moved Code Blocks\"), original: 'Toggle Show Moved Code Blocks' },\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n        });\n    }\n    run(accessor, ...args) {\n        const configurationService = accessor.get(IConfigurationService);\n        const newValue = !configurationService.getValue('diffEditor.experimental.showMoves');\n        configurationService.updateValue('diffEditor.experimental.showMoves', newValue);\n    }\n}\nregisterAction2(ToggleShowMovedCodeBlocks);\nexport class ToggleUseInlineViewWhenSpaceIsLimited extends Action2 {\n    constructor() {\n        super({\n            id: 'diffEditor.toggleUseInlineViewWhenSpaceIsLimited',\n            title: { value: localize('toggleUseInlineViewWhenSpaceIsLimited', \"Toggle Use Inline View When Space Is Limited\"), original: 'Toggle Use Inline View When Space Is Limited' },\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n        });\n    }\n    run(accessor, ...args) {\n        const configurationService = accessor.get(IConfigurationService);\n        const newValue = !configurationService.getValue('diffEditor.useInlineViewWhenSpaceIsLimited');\n        configurationService.updateValue('diffEditor.useInlineViewWhenSpaceIsLimited', newValue);\n    }\n}\nregisterAction2(ToggleUseInlineViewWhenSpaceIsLimited);\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n    command: {\n        id: new ToggleUseInlineViewWhenSpaceIsLimited().desc.id,\n        title: localize('useInlineViewWhenSpaceIsLimited', \"Use Inline View When Space Is Limited\"),\n        toggled: ContextKeyExpr.has('config.diffEditor.useInlineViewWhenSpaceIsLimited'),\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\n    },\n    order: 11,\n    group: '1_diff',\n    when: ContextKeyExpr.and(EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached, ContextKeyExpr.has('isInDiffEditor')),\n});\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n    command: {\n        id: new ToggleShowMovedCodeBlocks().desc.id,\n        title: localize('showMoves', \"Show Moved Code Blocks\"),\n        icon: Codicon.move,\n        toggled: ContextKeyEqualsExpr.create('config.diffEditor.experimental.showMoves', true),\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\n    },\n    order: 10,\n    group: '1_diff',\n    when: ContextKeyExpr.has('isInDiffEditor'),\n});\nconst diffEditorCategory = {\n    value: localize('diffEditor', 'Diff Editor'),\n    original: 'Diff Editor',\n};\nexport class SwitchSide extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'diffEditor.switchSide',\n            title: { value: localize('switchSide', \"Switch Side\"), original: 'Switch Side' },\n            icon: Codicon.arrowSwap,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            f1: true,\n            category: diffEditorCategory,\n        });\n    }\n    runEditorCommand(accessor, editor, arg) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        if (diffEditor instanceof DiffEditorWidget) {\n            if (arg && arg.dryRun) {\n                return { destinationSelection: diffEditor.mapToOtherSide().destinationSelection };\n            }\n            else {\n                diffEditor.switchSide();\n            }\n        }\n        return undefined;\n    }\n}\nregisterAction2(SwitchSide);\nexport class ExitCompareMove extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'diffEditor.exitCompareMove',\n            title: { value: localize('exitCompareMove', \"Exit Compare Move\"), original: 'Exit Compare Move' },\n            icon: Codicon.close,\n            precondition: EditorContextKeys.comparingMovedCode,\n            f1: false,\n            category: diffEditorCategory,\n            keybinding: {\n                weight: 10000,\n                primary: 9 /* KeyCode.Escape */,\n            }\n        });\n    }\n    runEditorCommand(accessor, editor, ...args) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        if (diffEditor instanceof DiffEditorWidget) {\n            diffEditor.exitCompareMove();\n        }\n    }\n}\nregisterAction2(ExitCompareMove);\nexport class CollapseAllUnchangedRegions extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'diffEditor.collapseAllUnchangedRegions',\n            title: { value: localize('collapseAllUnchangedRegions', \"Collapse All Unchanged Regions\"), original: 'Collapse All Unchanged Regions' },\n            icon: Codicon.fold,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            f1: true,\n            category: diffEditorCategory,\n        });\n    }\n    runEditorCommand(accessor, editor, ...args) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        if (diffEditor instanceof DiffEditorWidget) {\n            diffEditor.collapseAllUnchangedRegions();\n        }\n    }\n}\nregisterAction2(CollapseAllUnchangedRegions);\nexport class ShowAllUnchangedRegions extends EditorAction2 {\n    constructor() {\n        super({\n            id: 'diffEditor.showAllUnchangedRegions',\n            title: { value: localize('showAllUnchangedRegions', \"Show All Unchanged Regions\"), original: 'Show All Unchanged Regions' },\n            icon: Codicon.unfold,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            f1: true,\n            category: diffEditorCategory,\n        });\n    }\n    runEditorCommand(accessor, editor, ...args) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        if (diffEditor instanceof DiffEditorWidget) {\n            diffEditor.showAllUnchangedRegions();\n        }\n    }\n}\nregisterAction2(ShowAllUnchangedRegions);\nconst accessibleDiffViewerCategory = {\n    value: localize('accessibleDiffViewer', 'Accessible Diff Viewer'),\n    original: 'Accessible Diff Viewer',\n};\nexport class AccessibleDiffViewerNext extends Action2 {\n    constructor() {\n        super({\n            id: AccessibleDiffViewerNext.id,\n            title: { value: localize('editor.action.accessibleDiffViewer.next', \"Go to Next Difference\"), original: 'Go to Next Difference' },\n            category: accessibleDiffViewerCategory,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            keybinding: {\n                primary: 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            f1: true,\n        });\n    }\n    run(accessor) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerNext();\n    }\n}\nAccessibleDiffViewerNext.id = 'editor.action.accessibleDiffViewer.next';\nMenuRegistry.appendMenuItem(MenuId.EditorTitle, {\n    command: {\n        id: AccessibleDiffViewerNext.id,\n        title: localize('Open Accessible Diff Viewer', \"Open Accessible Diff Viewer\"),\n        precondition: ContextKeyExpr.has('isInDiffEditor'),\n    },\n    order: 10,\n    group: '2_diff',\n    when: ContextKeyExpr.and(EditorContextKeys.accessibleDiffViewerVisible.negate(), ContextKeyExpr.has('isInDiffEditor')),\n});\nexport class AccessibleDiffViewerPrev extends Action2 {\n    constructor() {\n        super({\n            id: AccessibleDiffViewerPrev.id,\n            title: { value: localize('editor.action.accessibleDiffViewer.prev', \"Go to Previous Difference\"), original: 'Go to Previous Difference' },\n            category: accessibleDiffViewerCategory,\n            precondition: ContextKeyExpr.has('isInDiffEditor'),\n            keybinding: {\n                primary: 1024 /* KeyMod.Shift */ | 65 /* KeyCode.F7 */,\n                weight: 100 /* KeybindingWeight.EditorContrib */\n            },\n            f1: true,\n        });\n    }\n    run(accessor) {\n        const diffEditor = findFocusedDiffEditor(accessor);\n        diffEditor === null || diffEditor === void 0 ? void 0 : diffEditor.accessibleDiffViewerPrev();\n    }\n}\nAccessibleDiffViewerPrev.id = 'editor.action.accessibleDiffViewer.prev';\nexport function findFocusedDiffEditor(accessor) {\n    var _a;\n    const codeEditorService = accessor.get(ICodeEditorService);\n    const diffEditors = codeEditorService.listDiffEditors();\n    const activeCodeEditor = (_a = codeEditorService.getFocusedCodeEditor()) !== null && _a !== void 0 ? _a : codeEditorService.getActiveCodeEditor();\n    if (!activeCodeEditor) {\n        return null;\n    }\n    for (let i = 0, len = diffEditors.length; i < len; i++) {\n        const diffEditor = diffEditors[i];\n        if (diffEditor.getModifiedEditor().getId() === activeCodeEditor.getId() || diffEditor.getOriginalEditor().getId() === activeCodeEditor.getId()) {\n            return diffEditor;\n        }\n    }\n    const activeElement = getActiveElement();\n    if (activeElement) {\n        for (const d of diffEditors) {\n            const container = d.getContainerDomNode();\n            if (isElementOrParentOf(container, activeElement)) {\n                return d;\n            }\n        }\n    }\n    return null;\n}\nfunction isElementOrParentOf(elementOrParent, element) {\n    let e = element;\n    while (e) {\n        if (e === elementOrParent) {\n            return true;\n        }\n        e = e.parentElement;\n    }\n    return false;\n}\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.next', AccessibleDiffViewerNext.id);\nregisterAction2(AccessibleDiffViewerNext);\nCommandsRegistry.registerCommandAlias('editor.action.diffReview.prev', AccessibleDiffViewerPrev.id);\nregisterAction2(AccessibleDiffViewerPrev);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { isHotReloadEnabled, registerHotReloadHandler } from '../../../../base/common/hotReload.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunHandleChanges, autorunOpts, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { ElementSizeObserver } from '../../config/elementSizeObserver.js';\nexport function joinCombine(arr1, arr2, keySelector, combine) {\n    if (arr1.length === 0) {\n        return arr2;\n    }\n    if (arr2.length === 0) {\n        return arr1;\n    }\n    const result = [];\n    let i = 0;\n    let j = 0;\n    while (i < arr1.length && j < arr2.length) {\n        const val1 = arr1[i];\n        const val2 = arr2[j];\n        const key1 = keySelector(val1);\n        const key2 = keySelector(val2);\n        if (key1 < key2) {\n            result.push(val1);\n            i++;\n        }\n        else if (key1 > key2) {\n            result.push(val2);\n            j++;\n        }\n        else {\n            result.push(combine(val1, val2));\n            i++;\n            j++;\n        }\n    }\n    while (i < arr1.length) {\n        result.push(arr1[i]);\n        i++;\n    }\n    while (j < arr2.length) {\n        result.push(arr2[j]);\n        j++;\n    }\n    return result;\n}\n// TODO make utility\nexport function applyObservableDecorations(editor, decorations) {\n    const d = new DisposableStore();\n    const decorationsCollection = editor.createDecorationsCollection();\n    d.add(autorunOpts({ debugName: () => `Apply decorations from ${decorations.debugName}` }, reader => {\n        const d = decorations.read(reader);\n        decorationsCollection.set(d);\n    }));\n    d.add({\n        dispose: () => {\n            decorationsCollection.clear();\n        }\n    });\n    return d;\n}\nexport function appendRemoveOnDispose(parent, child) {\n    parent.appendChild(child);\n    return toDisposable(() => {\n        parent.removeChild(child);\n    });\n}\nexport class ObservableElementSizeObserver extends Disposable {\n    get width() { return this._width; }\n    get height() { return this._height; }\n    constructor(element, dimension) {\n        super();\n        this.elementSizeObserver = this._register(new ElementSizeObserver(element, dimension));\n        this._width = observableValue(this, this.elementSizeObserver.getWidth());\n        this._height = observableValue(this, this.elementSizeObserver.getHeight());\n        this._register(this.elementSizeObserver.onDidChange(e => transaction(tx => {\n            /** @description Set width/height from elementSizeObserver */\n            this._width.set(this.elementSizeObserver.getWidth(), tx);\n            this._height.set(this.elementSizeObserver.getHeight(), tx);\n        })));\n    }\n    observe(dimension) {\n        this.elementSizeObserver.observe(dimension);\n    }\n    setAutomaticLayout(automaticLayout) {\n        if (automaticLayout) {\n            this.elementSizeObserver.startObserving();\n        }\n        else {\n            this.elementSizeObserver.stopObserving();\n        }\n    }\n}\nexport function animatedObservable(base, store) {\n    let targetVal = base.get();\n    let startVal = targetVal;\n    let curVal = targetVal;\n    const result = observableValue('animatedValue', targetVal);\n    let animationStartMs = -1;\n    const durationMs = 300;\n    let animationFrame = undefined;\n    store.add(autorunHandleChanges({\n        createEmptyChangeSummary: () => ({ animate: false }),\n        handleChange: (ctx, s) => {\n            if (ctx.didChange(base)) {\n                s.animate = s.animate || ctx.change;\n            }\n            return true;\n        }\n    }, (reader, s) => {\n        /** @description update value */\n        if (animationFrame !== undefined) {\n            cancelAnimationFrame(animationFrame);\n            animationFrame = undefined;\n        }\n        startVal = curVal;\n        targetVal = base.read(reader);\n        animationStartMs = Date.now() - (s.animate ? 0 : durationMs);\n        update();\n    }));\n    function update() {\n        const passedMs = Date.now() - animationStartMs;\n        curVal = Math.floor(easeOutExpo(passedMs, startVal, targetVal - startVal, durationMs));\n        if (passedMs < durationMs) {\n            animationFrame = requestAnimationFrame(update);\n        }\n        else {\n            curVal = targetVal;\n        }\n        result.set(curVal, undefined);\n    }\n    return result;\n}\nfunction easeOutExpo(t, b, c, d) {\n    return t === d ? b + c : c * (-Math.pow(2, -10 * t / d) + 1) + b;\n}\nexport class ViewZoneOverlayWidget extends Disposable {\n    constructor(editor, viewZone, htmlElement) {\n        super();\n        this._register(new ManagedOverlayWidget(editor, htmlElement));\n        this._register(applyStyle(htmlElement, {\n            height: viewZone.actualHeight,\n            top: viewZone.actualTop,\n        }));\n    }\n}\nexport class PlaceholderViewZone {\n    get afterLineNumber() { return this._afterLineNumber.get(); }\n    constructor(_afterLineNumber, heightInPx) {\n        this._afterLineNumber = _afterLineNumber;\n        this.heightInPx = heightInPx;\n        this.domNode = document.createElement('div');\n        this._actualTop = observableValue(this, undefined);\n        this._actualHeight = observableValue(this, undefined);\n        this.actualTop = this._actualTop;\n        this.actualHeight = this._actualHeight;\n        this.showInHiddenAreas = true;\n        this.onChange = this._afterLineNumber;\n        this.onDomNodeTop = (top) => {\n            this._actualTop.set(top, undefined);\n        };\n        this.onComputedHeight = (height) => {\n            this._actualHeight.set(height, undefined);\n        };\n    }\n}\nexport class ManagedOverlayWidget {\n    constructor(_editor, _domElement) {\n        this._editor = _editor;\n        this._domElement = _domElement;\n        this._overlayWidgetId = `managedOverlayWidget-${ManagedOverlayWidget._counter++}`;\n        this._overlayWidget = {\n            getId: () => this._overlayWidgetId,\n            getDomNode: () => this._domElement,\n            getPosition: () => null\n        };\n        this._editor.addOverlayWidget(this._overlayWidget);\n    }\n    dispose() {\n        this._editor.removeOverlayWidget(this._overlayWidget);\n    }\n}\nManagedOverlayWidget._counter = 0;\nexport function applyStyle(domNode, style) {\n    return autorun(reader => {\n        /** @description applyStyle */\n        for (let [key, val] of Object.entries(style)) {\n            if (val && typeof val === 'object' && 'read' in val) {\n                val = val.read(reader);\n            }\n            if (typeof val === 'number') {\n                val = `${val}px`;\n            }\n            key = key.replace(/[A-Z]/g, m => '-' + m.toLowerCase());\n            domNode.style[key] = val;\n        }\n    });\n}\nexport function readHotReloadableExport(value, reader) {\n    observeHotReloadableExports([value], reader);\n    return value;\n}\nexport function observeHotReloadableExports(values, reader) {\n    if (isHotReloadEnabled()) {\n        const o = observableSignalFromEvent('reload', event => registerHotReloadHandler(oldExports => {\n            if (![...Object.values(oldExports)].some(v => values.includes(v))) {\n                return undefined;\n            }\n            return (_newExports) => {\n                event(undefined);\n                return true;\n            };\n        }));\n        o.read(reader);\n    }\n}\nexport function applyViewZones(editor, viewZones, setIsUpdating) {\n    const store = new DisposableStore();\n    const lastViewZoneIds = [];\n    store.add(autorun(reader => {\n        /** @description applyViewZones */\n        const curViewZones = viewZones.read(reader);\n        const viewZonIdsPerViewZone = new Map();\n        const viewZoneIdPerOnChangeObservable = new Map();\n        if (setIsUpdating) {\n            setIsUpdating(true);\n        }\n        editor.changeViewZones(a => {\n            for (const id of lastViewZoneIds) {\n                a.removeZone(id);\n            }\n            lastViewZoneIds.length = 0;\n            for (const z of curViewZones) {\n                const id = a.addZone(z);\n                lastViewZoneIds.push(id);\n                viewZonIdsPerViewZone.set(z, id);\n            }\n        });\n        if (setIsUpdating) {\n            setIsUpdating(false);\n        }\n        store.add(autorunHandleChanges({\n            createEmptyChangeSummary() {\n                return [];\n            },\n            handleChange(context, changeSummary) {\n                const id = viewZoneIdPerOnChangeObservable.get(context.changedObservable);\n                if (id !== undefined) {\n                    changeSummary.push(id);\n                }\n                return true;\n            },\n        }, (reader, changeSummary) => {\n            /** @description layoutZone on change */\n            for (const vz of curViewZones) {\n                if (vz.onChange) {\n                    viewZoneIdPerOnChangeObservable.set(vz.onChange, viewZonIdsPerViewZone.get(vz));\n                    vz.onChange.read(reader);\n                }\n            }\n            if (setIsUpdating) {\n                setIsUpdating(true);\n            }\n            editor.changeViewZones(a => { for (const id of changeSummary) {\n                a.layoutZone(id);\n            } });\n            if (setIsUpdating) {\n                setIsUpdating(false);\n            }\n        }));\n    }));\n    store.add({\n        dispose() {\n            if (setIsUpdating) {\n                setIsUpdating(true);\n            }\n            editor.changeViewZones(a => { for (const id of lastViewZoneIds) {\n                a.removeZone(id);\n            } });\n            if (setIsUpdating) {\n                setIsUpdating(false);\n            }\n        }\n    });\n    return store;\n}\nexport class DisposableCancellationTokenSource extends CancellationTokenSource {\n    dispose() {\n        super.dispose(true);\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { addDisposableListener, addStandardDisposableListener, reset } from '../../../../base/browser/dom.js';\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { DomScrollableElement } from '../../../../base/browser/ui/scrollbar/scrollableElement.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { forEachAdjacent, groupAdjacentBy } from '../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, recomputeInitiallyAndOnChange, observableValue, subtransaction, transaction } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { applyStyle } from './utils.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { OffsetRange } from '../../../common/core/offsetRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { LineRangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { ILanguageService } from '../../../common/languages/language.js';\nimport { LineTokens } from '../../../common/tokens/lineTokens.js';\nimport { RenderLineInput, renderViewLine2 } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../common/viewModel.js';\nimport { localize } from '../../../../nls.js';\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nimport './accessibleDiffViewer.css';\nconst accessibleDiffViewerInsertIcon = registerIcon('diff-review-insert', Codicon.add, localize('accessibleDiffViewerInsertIcon', 'Icon for \\'Insert\\' in accessible diff viewer.'));\nconst accessibleDiffViewerRemoveIcon = registerIcon('diff-review-remove', Codicon.remove, localize('accessibleDiffViewerRemoveIcon', 'Icon for \\'Remove\\' in accessible diff viewer.'));\nconst accessibleDiffViewerCloseIcon = registerIcon('diff-review-close', Codicon.close, localize('accessibleDiffViewerCloseIcon', 'Icon for \\'Close\\' in accessible diff viewer.'));\nlet AccessibleDiffViewer = class AccessibleDiffViewer extends Disposable {\n    constructor(_parentNode, _visible, _setVisible, _canClose, _width, _height, _diffs, _editors, _instantiationService) {\n        super();\n        this._parentNode = _parentNode;\n        this._visible = _visible;\n        this._setVisible = _setVisible;\n        this._canClose = _canClose;\n        this._width = _width;\n        this._height = _height;\n        this._diffs = _diffs;\n        this._editors = _editors;\n        this._instantiationService = _instantiationService;\n        this.model = derivedWithStore(this, (reader, store) => {\n            const visible = this._visible.read(reader);\n            this._parentNode.style.visibility = visible ? 'visible' : 'hidden';\n            if (!visible) {\n                return null;\n            }\n            const model = store.add(this._instantiationService.createInstance(ViewModel, this._diffs, this._editors, this._setVisible, this._canClose));\n            const view = store.add(this._instantiationService.createInstance(View, this._parentNode, model, this._width, this._height, this._editors));\n            return {\n                model,\n                view\n            };\n        });\n        this._register(recomputeInitiallyAndOnChange(this.model));\n    }\n    next() {\n        transaction(tx => {\n            const isVisible = this._visible.get();\n            this._setVisible(true, tx);\n            if (isVisible) {\n                this.model.get().model.nextGroup(tx);\n            }\n        });\n    }\n    prev() {\n        transaction(tx => {\n            this._setVisible(true, tx);\n            this.model.get().model.previousGroup(tx);\n        });\n    }\n    close() {\n        transaction(tx => {\n            this._setVisible(false, tx);\n        });\n    }\n};\nAccessibleDiffViewer._ttPolicy = createTrustedTypesPolicy('diffReview', { createHTML: value => value });\nAccessibleDiffViewer = __decorate([\n    __param(8, IInstantiationService)\n], AccessibleDiffViewer);\nexport { AccessibleDiffViewer };\nlet ViewModel = class ViewModel extends Disposable {\n    constructor(_diffs, _editors, _setVisible, canClose, _audioCueService) {\n        super();\n        this._diffs = _diffs;\n        this._editors = _editors;\n        this._setVisible = _setVisible;\n        this.canClose = canClose;\n        this._audioCueService = _audioCueService;\n        this._groups = observableValue(this, []);\n        this._currentGroupIdx = observableValue(this, 0);\n        this._currentElementIdx = observableValue(this, 0);\n        this.groups = this._groups;\n        this.currentGroup = this._currentGroupIdx.map((idx, r) => this._groups.read(r)[idx]);\n        this.currentGroupIndex = this._currentGroupIdx;\n        this.currentElement = this._currentElementIdx.map((idx, r) => { var _a; return (_a = this.currentGroup.read(r)) === null || _a === void 0 ? void 0 : _a.lines[idx]; });\n        this._register(autorun(reader => {\n            /** @description update groups */\n            const diffs = this._diffs.read(reader);\n            if (!diffs) {\n                this._groups.set([], undefined);\n                return;\n            }\n            const groups = computeViewElementGroups(diffs, this._editors.original.getModel().getLineCount(), this._editors.modified.getModel().getLineCount());\n            transaction(tx => {\n                const p = this._editors.modified.getPosition();\n                if (p) {\n                    const nextGroup = groups.findIndex(g => (p === null || p === void 0 ? void 0 : p.lineNumber) < g.range.modified.endLineNumberExclusive);\n                    if (nextGroup !== -1) {\n                        this._currentGroupIdx.set(nextGroup, tx);\n                    }\n                }\n                this._groups.set(groups, tx);\n            });\n        }));\n        this._register(autorun(reader => {\n            /** @description play audio-cue for diff */\n            const currentViewItem = this.currentElement.read(reader);\n            if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Deleted) {\n                this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, { source: 'accessibleDiffViewer.currentElementChanged' });\n            }\n            else if ((currentViewItem === null || currentViewItem === void 0 ? void 0 : currentViewItem.type) === LineType.Added) {\n                this._audioCueService.playAudioCue(AudioCue.diffLineInserted, { source: 'accessibleDiffViewer.currentElementChanged' });\n            }\n        }));\n        this._register(autorun(reader => {\n            var _a;\n            /** @description select lines in editor */\n            // This ensures editor commands (like revert/stage) work\n            const currentViewItem = this.currentElement.read(reader);\n            if (currentViewItem && currentViewItem.type !== LineType.Header) {\n                const lineNumber = (_a = currentViewItem.modifiedLineNumber) !== null && _a !== void 0 ? _a : currentViewItem.diff.modified.startLineNumber;\n                this._editors.modified.setSelection(Range.fromPositions(new Position(lineNumber, 1)));\n            }\n        }));\n    }\n    _goToGroupDelta(delta, tx) {\n        const groups = this.groups.get();\n        if (!groups || groups.length <= 1) {\n            return;\n        }\n        subtransaction(tx, tx => {\n            this._currentGroupIdx.set(OffsetRange.ofLength(groups.length).clipCyclic(this._currentGroupIdx.get() + delta), tx);\n            this._currentElementIdx.set(0, tx);\n        });\n    }\n    nextGroup(tx) { this._goToGroupDelta(1, tx); }\n    previousGroup(tx) { this._goToGroupDelta(-1, tx); }\n    _goToLineDelta(delta) {\n        const group = this.currentGroup.get();\n        if (!group || group.lines.length <= 1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(OffsetRange.ofLength(group.lines.length).clip(this._currentElementIdx.get() + delta), tx);\n        });\n    }\n    goToNextLine() { this._goToLineDelta(1); }\n    goToPreviousLine() { this._goToLineDelta(-1); }\n    goToLine(line) {\n        const group = this.currentGroup.get();\n        if (!group) {\n            return;\n        }\n        const idx = group.lines.indexOf(line);\n        if (idx === -1) {\n            return;\n        }\n        transaction(tx => {\n            this._currentElementIdx.set(idx, tx);\n        });\n    }\n    revealCurrentElementInEditor() {\n        this._setVisible(false, undefined);\n        const curElem = this.currentElement.get();\n        if (curElem) {\n            if (curElem.type === LineType.Deleted) {\n                this._editors.original.setSelection(Range.fromPositions(new Position(curElem.originalLineNumber, 1)));\n                this._editors.original.revealLine(curElem.originalLineNumber);\n                this._editors.original.focus();\n            }\n            else {\n                if (curElem.type !== LineType.Header) {\n                    this._editors.modified.setSelection(Range.fromPositions(new Position(curElem.modifiedLineNumber, 1)));\n                    this._editors.modified.revealLine(curElem.modifiedLineNumber);\n                }\n                this._editors.modified.focus();\n            }\n        }\n    }\n    close() {\n        this._setVisible(false, undefined);\n        this._editors.modified.focus();\n    }\n};\nViewModel = __decorate([\n    __param(4, IAudioCueService)\n], ViewModel);\nconst viewElementGroupLineMargin = 3;\nfunction computeViewElementGroups(diffs, originalLineCount, modifiedLineCount) {\n    const result = [];\n    for (const g of groupAdjacentBy(diffs, (a, b) => (b.modified.startLineNumber - a.modified.endLineNumberExclusive < 2 * viewElementGroupLineMargin))) {\n        const viewElements = [];\n        viewElements.push(new HeaderViewElement());\n        const origFullRange = new LineRange(Math.max(1, g[0].original.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].original.endLineNumberExclusive + viewElementGroupLineMargin, originalLineCount + 1));\n        const modifiedFullRange = new LineRange(Math.max(1, g[0].modified.startLineNumber - viewElementGroupLineMargin), Math.min(g[g.length - 1].modified.endLineNumberExclusive + viewElementGroupLineMargin, modifiedLineCount + 1));\n        forEachAdjacent(g, (a, b) => {\n            const origRange = new LineRange(a ? a.original.endLineNumberExclusive : origFullRange.startLineNumber, b ? b.original.startLineNumber : origFullRange.endLineNumberExclusive);\n            const modifiedRange = new LineRange(a ? a.modified.endLineNumberExclusive : modifiedFullRange.startLineNumber, b ? b.modified.startLineNumber : modifiedFullRange.endLineNumberExclusive);\n            origRange.forEach(origLineNumber => {\n                viewElements.push(new UnchangedLineViewElement(origLineNumber, modifiedRange.startLineNumber + (origLineNumber - origRange.startLineNumber)));\n            });\n            if (b) {\n                b.original.forEach(origLineNumber => {\n                    viewElements.push(new DeletedLineViewElement(b, origLineNumber));\n                });\n                b.modified.forEach(modifiedLineNumber => {\n                    viewElements.push(new AddedLineViewElement(b, modifiedLineNumber));\n                });\n            }\n        });\n        const modifiedRange = g[0].modified.join(g[g.length - 1].modified);\n        const originalRange = g[0].original.join(g[g.length - 1].original);\n        result.push(new ViewElementGroup(new LineRangeMapping(modifiedRange, originalRange), viewElements));\n    }\n    return result;\n}\nvar LineType;\n(function (LineType) {\n    LineType[LineType[\"Header\"] = 0] = \"Header\";\n    LineType[LineType[\"Unchanged\"] = 1] = \"Unchanged\";\n    LineType[LineType[\"Deleted\"] = 2] = \"Deleted\";\n    LineType[LineType[\"Added\"] = 3] = \"Added\";\n})(LineType || (LineType = {}));\nclass ViewElementGroup {\n    constructor(range, lines) {\n        this.range = range;\n        this.lines = lines;\n    }\n}\nclass HeaderViewElement {\n    constructor() {\n        this.type = LineType.Header;\n    }\n}\nclass DeletedLineViewElement {\n    constructor(diff, originalLineNumber) {\n        this.diff = diff;\n        this.originalLineNumber = originalLineNumber;\n        this.type = LineType.Deleted;\n        this.modifiedLineNumber = undefined;\n    }\n}\nclass AddedLineViewElement {\n    constructor(diff, modifiedLineNumber) {\n        this.diff = diff;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Added;\n        this.originalLineNumber = undefined;\n    }\n}\nclass UnchangedLineViewElement {\n    constructor(originalLineNumber, modifiedLineNumber) {\n        this.originalLineNumber = originalLineNumber;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.type = LineType.Unchanged;\n    }\n}\nlet View = class View extends Disposable {\n    constructor(_element, _model, _width, _height, _editors, _languageService) {\n        super();\n        this._element = _element;\n        this._model = _model;\n        this._width = _width;\n        this._height = _height;\n        this._editors = _editors;\n        this._languageService = _languageService;\n        this.domNode = this._element;\n        this.domNode.className = 'diff-review monaco-editor-background';\n        const actionBarContainer = document.createElement('div');\n        actionBarContainer.className = 'diff-review-actions';\n        this._actionBar = this._register(new ActionBar(actionBarContainer));\n        this._register(autorun(reader => {\n            /** @description update actions */\n            this._actionBar.clear();\n            if (this._model.canClose.read(reader)) {\n                this._actionBar.push(new Action('diffreview.close', localize('label.close', \"Close\"), 'close-diff-review ' + ThemeIcon.asClassName(accessibleDiffViewerCloseIcon), true, () => __awaiter(this, void 0, void 0, function* () { return _model.close(); })), { label: false, icon: true });\n            }\n        }));\n        this._content = document.createElement('div');\n        this._content.className = 'diff-review-content';\n        this._content.setAttribute('role', 'code');\n        this._scrollbar = this._register(new DomScrollableElement(this._content, {}));\n        reset(this.domNode, this._scrollbar.getDomNode(), actionBarContainer);\n        this._register(toDisposable(() => { reset(this.domNode); }));\n        this._register(applyStyle(this.domNode, { width: this._width, height: this._height }));\n        this._register(applyStyle(this._content, { width: this._width, height: this._height }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description render */\n            this._model.currentGroup.read(reader);\n            this._render(store);\n        }));\n        // TODO@hediet use commands\n        this._register(addStandardDisposableListener(this.domNode, 'keydown', (e) => {\n            if (e.equals(18 /* KeyCode.DownArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 18 /* KeyCode.DownArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 18 /* KeyCode.DownArrow */)) {\n                e.preventDefault();\n                this._model.goToNextLine();\n            }\n            if (e.equals(16 /* KeyCode.UpArrow */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 16 /* KeyCode.UpArrow */)\n                || e.equals(512 /* KeyMod.Alt */ | 16 /* KeyCode.UpArrow */)) {\n                e.preventDefault();\n                this._model.goToPreviousLine();\n            }\n            if (e.equals(9 /* KeyCode.Escape */)\n                || e.equals(2048 /* KeyMod.CtrlCmd */ | 9 /* KeyCode.Escape */)\n                || e.equals(512 /* KeyMod.Alt */ | 9 /* KeyCode.Escape */)\n                || e.equals(1024 /* KeyMod.Shift */ | 9 /* KeyCode.Escape */)) {\n                e.preventDefault();\n                this._model.close();\n            }\n            if (e.equals(10 /* KeyCode.Space */)\n                || e.equals(3 /* KeyCode.Enter */)) {\n                e.preventDefault();\n                this._model.revealCurrentElementInEditor();\n            }\n        }));\n    }\n    _render(store) {\n        const originalOptions = this._editors.original.getOptions();\n        const modifiedOptions = this._editors.modified.getOptions();\n        const container = document.createElement('div');\n        container.className = 'diff-review-table';\n        container.setAttribute('role', 'list');\n        container.setAttribute('aria-label', localize('ariaLabel', 'Accessible Diff Viewer. Use arrow up and down to navigate.'));\n        applyFontInfo(container, modifiedOptions.get(50 /* EditorOption.fontInfo */));\n        reset(this._content, container);\n        const originalModel = this._editors.original.getModel();\n        const modifiedModel = this._editors.modified.getModel();\n        if (!originalModel || !modifiedModel) {\n            return;\n        }\n        const originalModelOpts = originalModel.getOptions();\n        const modifiedModelOpts = modifiedModel.getOptions();\n        const lineHeight = modifiedOptions.get(66 /* EditorOption.lineHeight */);\n        const group = this._model.currentGroup.get();\n        for (const viewItem of (group === null || group === void 0 ? void 0 : group.lines) || []) {\n            if (!group) {\n                break;\n            }\n            let row;\n            if (viewItem.type === LineType.Header) {\n                const header = document.createElement('div');\n                header.className = 'diff-review-row';\n                header.setAttribute('role', 'listitem');\n                const r = group.range;\n                const diffIndex = this._model.currentGroupIndex.get();\n                const diffsLength = this._model.groups.get().length;\n                const getAriaLines = (lines) => lines === 0 ? localize('no_lines_changed', \"no lines changed\")\n                    : lines === 1 ? localize('one_line_changed', \"1 line changed\")\n                        : localize('more_lines_changed', \"{0} lines changed\", lines);\n                const originalChangedLinesCntAria = getAriaLines(r.original.length);\n                const modifiedChangedLinesCntAria = getAriaLines(r.modified.length);\n                header.setAttribute('aria-label', localize({\n                    key: 'header',\n                    comment: [\n                        'This is the ARIA label for a git diff header.',\n                        'A git diff header looks like this: @@ -154,12 +159,39 @@.',\n                        'That encodes that at original line 154 (which is now line 159), 12 lines were removed/changed with 39 lines.',\n                        'Variables 0 and 1 refer to the diff index out of total number of diffs.',\n                        'Variables 2 and 4 will be numbers (a line number).',\n                        'Variables 3 and 5 will be \"no lines changed\", \"1 line changed\" or \"X lines changed\", localized separately.'\n                    ]\n                }, \"Difference {0} of {1}: original line {2}, {3}, modified line {4}, {5}\", (diffIndex + 1), diffsLength, r.original.startLineNumber, originalChangedLinesCntAria, r.modified.startLineNumber, modifiedChangedLinesCntAria));\n                const cell = document.createElement('div');\n                cell.className = 'diff-review-cell diff-review-summary';\n                // e.g.: `1/10: @@ -504,7 +517,7 @@`\n                cell.appendChild(document.createTextNode(`${diffIndex + 1}/${diffsLength}: @@ -${r.original.startLineNumber},${r.original.length} +${r.modified.startLineNumber},${r.modified.length} @@`));\n                header.appendChild(cell);\n                row = header;\n            }\n            else {\n                row = this._createRow(viewItem, lineHeight, this._width.get(), originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts);\n            }\n            container.appendChild(row);\n            const isSelectedObs = derived(reader => /** @description isSelected */ this._model.currentElement.read(reader) === viewItem);\n            store.add(autorun(reader => {\n                /** @description update tab index */\n                const isSelected = isSelectedObs.read(reader);\n                row.tabIndex = isSelected ? 0 : -1;\n                if (isSelected) {\n                    row.focus();\n                }\n            }));\n            store.add(addDisposableListener(row, 'focus', () => {\n                this._model.goToLine(viewItem);\n            }));\n        }\n        this._scrollbar.scanDomNode();\n    }\n    _createRow(item, lineHeight, width, originalOptions, originalModel, originalModelOpts, modifiedOptions, modifiedModel, modifiedModelOpts) {\n        const originalLayoutInfo = originalOptions.get(143 /* EditorOption.layoutInfo */);\n        const originalLineNumbersWidth = originalLayoutInfo.glyphMarginWidth + originalLayoutInfo.lineNumbersWidth;\n        const modifiedLayoutInfo = modifiedOptions.get(143 /* EditorOption.layoutInfo */);\n        const modifiedLineNumbersWidth = 10 + modifiedLayoutInfo.glyphMarginWidth + modifiedLayoutInfo.lineNumbersWidth;\n        let rowClassName = 'diff-review-row';\n        let lineNumbersExtraClassName = '';\n        const spacerClassName = 'diff-review-spacer';\n        let spacerIcon = null;\n        switch (item.type) {\n            case LineType.Added:\n                rowClassName = 'diff-review-row line-insert';\n                lineNumbersExtraClassName = ' char-insert';\n                spacerIcon = accessibleDiffViewerInsertIcon;\n                break;\n            case LineType.Deleted:\n                rowClassName = 'diff-review-row line-delete';\n                lineNumbersExtraClassName = ' char-delete';\n                spacerIcon = accessibleDiffViewerRemoveIcon;\n                break;\n        }\n        const row = document.createElement('div');\n        row.style.minWidth = width + 'px';\n        row.className = rowClassName;\n        row.setAttribute('role', 'listitem');\n        row.ariaLevel = '';\n        const cell = document.createElement('div');\n        cell.className = 'diff-review-cell';\n        cell.style.height = `${lineHeight}px`;\n        row.appendChild(cell);\n        const originalLineNumber = document.createElement('span');\n        originalLineNumber.style.width = (originalLineNumbersWidth + 'px');\n        originalLineNumber.style.minWidth = (originalLineNumbersWidth + 'px');\n        originalLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.originalLineNumber !== undefined) {\n            originalLineNumber.appendChild(document.createTextNode(String(item.originalLineNumber)));\n        }\n        else {\n            originalLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(originalLineNumber);\n        const modifiedLineNumber = document.createElement('span');\n        modifiedLineNumber.style.width = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.minWidth = (modifiedLineNumbersWidth + 'px');\n        modifiedLineNumber.style.paddingRight = '10px';\n        modifiedLineNumber.className = 'diff-review-line-number' + lineNumbersExtraClassName;\n        if (item.modifiedLineNumber !== undefined) {\n            modifiedLineNumber.appendChild(document.createTextNode(String(item.modifiedLineNumber)));\n        }\n        else {\n            modifiedLineNumber.innerText = '\\u00a0';\n        }\n        cell.appendChild(modifiedLineNumber);\n        const spacer = document.createElement('span');\n        spacer.className = spacerClassName;\n        if (spacerIcon) {\n            const spacerCodicon = document.createElement('span');\n            spacerCodicon.className = ThemeIcon.asClassName(spacerIcon);\n            spacerCodicon.innerText = '\\u00a0\\u00a0';\n            spacer.appendChild(spacerCodicon);\n        }\n        else {\n            spacer.innerText = '\\u00a0\\u00a0';\n        }\n        cell.appendChild(spacer);\n        let lineContent;\n        if (item.modifiedLineNumber !== undefined) {\n            let html = this._getLineHtml(modifiedModel, modifiedOptions, modifiedModelOpts.tabSize, item.modifiedLineNumber, this._languageService.languageIdCodec);\n            if (AccessibleDiffViewer._ttPolicy) {\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = modifiedModel.getLineContent(item.modifiedLineNumber);\n        }\n        else {\n            let html = this._getLineHtml(originalModel, originalOptions, originalModelOpts.tabSize, item.originalLineNumber, this._languageService.languageIdCodec);\n            if (AccessibleDiffViewer._ttPolicy) {\n                html = AccessibleDiffViewer._ttPolicy.createHTML(html);\n            }\n            cell.insertAdjacentHTML('beforeend', html);\n            lineContent = originalModel.getLineContent(item.originalLineNumber);\n        }\n        if (lineContent.length === 0) {\n            lineContent = localize('blankLine', \"blank\");\n        }\n        let ariaLabel = '';\n        switch (item.type) {\n            case LineType.Unchanged:\n                if (item.originalLineNumber === item.modifiedLineNumber) {\n                    ariaLabel = localize({ key: 'unchangedLine', comment: ['The placeholders are contents of the line and should not be translated.'] }, \"{0} unchanged line {1}\", lineContent, item.originalLineNumber);\n                }\n                else {\n                    ariaLabel = localize('equalLine', \"{0} original line {1} modified line {2}\", lineContent, item.originalLineNumber, item.modifiedLineNumber);\n                }\n                break;\n            case LineType.Added:\n                ariaLabel = localize('insertLine', \"+ {0} modified line {1}\", lineContent, item.modifiedLineNumber);\n                break;\n            case LineType.Deleted:\n                ariaLabel = localize('deleteLine', \"- {0} original line {1}\", lineContent, item.originalLineNumber);\n                break;\n        }\n        row.setAttribute('aria-label', ariaLabel);\n        return row;\n    }\n    _getLineHtml(model, options, tabSize, lineNumber, languageIdCodec) {\n        const lineContent = model.getLineContent(lineNumber);\n        const fontInfo = options.get(50 /* EditorOption.fontInfo */);\n        const lineTokens = LineTokens.createEmpty(lineContent, languageIdCodec);\n        const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, model.mightContainNonBasicASCII());\n        const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, model.mightContainRTL());\n        const r = renderViewLine2(new RenderLineInput((fontInfo.isMonospace && !options.get(33 /* EditorOption.disableMonospaceOptimizations */)), fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, [], tabSize, 0, fontInfo.spaceWidth, fontInfo.middotWidth, fontInfo.wsmiddotWidth, options.get(116 /* EditorOption.stopRenderingLineAfter */), options.get(98 /* EditorOption.renderWhitespace */), options.get(93 /* EditorOption.renderControlCharacters */), options.get(51 /* EditorOption.fontLigatures */) !== EditorFontLigatures.OFF, null));\n        return r.html;\n    }\n};\nView = __decorate([\n    __param(5, ILanguageService)\n], View);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { ModelDecorationOptions } from '../../../common/model/textModel.js';\nimport { localize } from '../../../../nls.js';\nimport { registerIcon } from '../../../../platform/theme/common/iconRegistry.js';\nexport const diffInsertIcon = registerIcon('diff-insert', Codicon.add, localize('diffInsertIcon', 'Line decoration for inserts in the diff editor.'));\nexport const diffRemoveIcon = registerIcon('diff-remove', Codicon.remove, localize('diffRemoveIcon', 'Line decoration for removals in the diff editor.'));\nexport const diffLineAddDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\n    className: 'line-insert',\n    description: 'line-insert',\n    isWholeLine: true,\n    linesDecorationsClassName: 'insert-sign ' + ThemeIcon.asClassName(diffInsertIcon),\n    marginClassName: 'gutter-insert',\n});\nexport const diffLineDeleteDecorationBackgroundWithIndicator = ModelDecorationOptions.register({\n    className: 'line-delete',\n    description: 'line-delete',\n    isWholeLine: true,\n    linesDecorationsClassName: 'delete-sign ' + ThemeIcon.asClassName(diffRemoveIcon),\n    marginClassName: 'gutter-delete',\n});\nexport const diffLineAddDecorationBackground = ModelDecorationOptions.register({\n    className: 'line-insert',\n    description: 'line-insert',\n    isWholeLine: true,\n    marginClassName: 'gutter-insert',\n});\nexport const diffLineDeleteDecorationBackground = ModelDecorationOptions.register({\n    className: 'line-delete',\n    description: 'line-delete',\n    isWholeLine: true,\n    marginClassName: 'gutter-delete',\n});\nexport const diffAddDecoration = ModelDecorationOptions.register({\n    className: 'char-insert',\n    description: 'char-insert',\n    shouldFillLineOnLineBreak: true,\n});\nexport const diffWholeLineAddDecoration = ModelDecorationOptions.register({\n    className: 'char-insert',\n    description: 'char-insert',\n    isWholeLine: true,\n});\nexport const diffAddDecorationEmpty = ModelDecorationOptions.register({\n    className: 'char-insert diff-range-empty',\n    description: 'char-insert diff-range-empty',\n});\nexport const diffDeleteDecoration = ModelDecorationOptions.register({\n    className: 'char-delete',\n    description: 'char-delete',\n    shouldFillLineOnLineBreak: true,\n});\nexport const diffWholeLineDeleteDecoration = ModelDecorationOptions.register({\n    className: 'char-delete',\n    description: 'char-delete',\n    isWholeLine: true,\n});\nexport const diffDeleteDecorationEmpty = ModelDecorationOptions.register({\n    className: 'char-delete diff-range-empty',\n    description: 'char-delete diff-range-empty',\n});\nexport const arrowRevertChange = ModelDecorationOptions.register({\n    description: 'diff-editor-arrow-revert-change',\n    glyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true })\n        .appendMarkdown(localize('revertChangeHoverMessage', 'Click to revert change')),\n    glyphMarginClassName: 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight),\n    zIndex: 10001,\n});\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { h } from '../../../../base/browser/dom.js';\nimport { ActionBar } from '../../../../base/browser/ui/actionbar/actionbar.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { booleanComparator, compareBy, numberComparator, tieBreakComparators } from '../../../../base/common/arrays.js';\nimport { findMaxIdxBy } from '../../../../base/common/arraysFind.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunHandleChanges, autorunWithStore, constObservable, derived, derivedWithStore, observableFromEvent, observableSignalFromEvent, observableValue, recomputeInitiallyAndOnChange } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { PlaceholderViewZone, ViewZoneOverlayWidget, applyStyle, applyViewZones } from './utils.js';\nimport { OffsetRange, OffsetRangeSet } from '../../../common/core/offsetRange.js';\nimport { localize } from '../../../../nls.js';\nexport class MovedBlocksLinesPart extends Disposable {\n    constructor(_rootElement, _diffModel, _originalEditorLayoutInfo, _modifiedEditorLayoutInfo, _editors) {\n        super();\n        this._rootElement = _rootElement;\n        this._diffModel = _diffModel;\n        this._originalEditorLayoutInfo = _originalEditorLayoutInfo;\n        this._modifiedEditorLayoutInfo = _modifiedEditorLayoutInfo;\n        this._editors = _editors;\n        this._originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => this._editors.original.getScrollTop());\n        this._modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\n        this._viewZonesChanged = observableSignalFromEvent('onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\n        this.width = observableValue(this, 0);\n        this._modifiedViewZonesChangedSignal = observableSignalFromEvent('modified.onDidChangeViewZones', this._editors.modified.onDidChangeViewZones);\n        this._originalViewZonesChangedSignal = observableSignalFromEvent('original.onDidChangeViewZones', this._editors.original.onDidChangeViewZones);\n        this._state = derivedWithStore((reader, store) => {\n            /** @description state */\n            var _a;\n            this._element.replaceChildren();\n            const model = this._diffModel.read(reader);\n            const moves = (_a = model === null || model === void 0 ? void 0 : model.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTexts;\n            if (!moves || moves.length === 0) {\n                this.width.set(0, undefined);\n                return;\n            }\n            this._viewZonesChanged.read(reader);\n            const infoOrig = this._originalEditorLayoutInfo.read(reader);\n            const infoMod = this._modifiedEditorLayoutInfo.read(reader);\n            if (!infoOrig || !infoMod) {\n                this.width.set(0, undefined);\n                return;\n            }\n            this._modifiedViewZonesChangedSignal.read(reader);\n            this._originalViewZonesChangedSignal.read(reader);\n            const lines = moves.map((move) => {\n                function computeLineStart(range, editor) {\n                    const t1 = editor.getTopForLineNumber(range.startLineNumber, true);\n                    const t2 = editor.getTopForLineNumber(range.endLineNumberExclusive, true);\n                    return (t1 + t2) / 2;\n                }\n                const start = computeLineStart(move.lineRangeMapping.original, this._editors.original);\n                const startOffset = this._originalScrollTop.read(reader);\n                const end = computeLineStart(move.lineRangeMapping.modified, this._editors.modified);\n                const endOffset = this._modifiedScrollTop.read(reader);\n                const from = start - startOffset;\n                const to = end - endOffset;\n                const top = Math.min(start, end);\n                const bottom = Math.max(start, end);\n                return { range: new OffsetRange(top, bottom), from, to, fromWithoutScroll: start, toWithoutScroll: end, move };\n            });\n            lines.sort(tieBreakComparators(compareBy(l => l.fromWithoutScroll > l.toWithoutScroll, booleanComparator), compareBy(l => l.fromWithoutScroll > l.toWithoutScroll ? l.fromWithoutScroll : -l.toWithoutScroll, numberComparator)));\n            const layout = LinesLayout.compute(lines.map(l => l.range));\n            const padding = 10;\n            const lineAreaLeft = infoOrig.verticalScrollbarWidth;\n            const lineAreaWidth = (layout.getTrackCount() - 1) * 10 + padding * 2;\n            const width = lineAreaLeft + lineAreaWidth + (infoMod.contentLeft - MovedBlocksLinesPart.movedCodeBlockPadding);\n            let idx = 0;\n            for (const line of lines) {\n                const track = layout.getTrack(idx);\n                const verticalY = lineAreaLeft + padding + track * 10;\n                const arrowHeight = 15;\n                const arrowWidth = 15;\n                const right = width;\n                const rectWidth = infoMod.glyphMarginWidth + infoMod.lineNumbersWidth;\n                const rectHeight = 18;\n                const rect = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\n                rect.classList.add('arrow-rectangle');\n                rect.setAttribute('x', `${right - rectWidth}`);\n                rect.setAttribute('y', `${line.to - rectHeight / 2}`);\n                rect.setAttribute('width', `${rectWidth}`);\n                rect.setAttribute('height', `${rectHeight}`);\n                this._element.appendChild(rect);\n                const g = document.createElementNS('http://www.w3.org/2000/svg', 'g');\n                const path = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n                path.setAttribute('d', `M ${0} ${line.from} L ${verticalY} ${line.from} L ${verticalY} ${line.to} L ${right - arrowWidth} ${line.to}`);\n                path.setAttribute('fill', 'none');\n                g.appendChild(path);\n                const arrowRight = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n                arrowRight.classList.add('arrow');\n                store.add(autorun(reader => {\n                    path.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\n                    arrowRight.classList.toggle('currentMove', line.move === model.activeMovedText.read(reader));\n                }));\n                arrowRight.setAttribute('points', `${right - arrowWidth},${line.to - arrowHeight / 2} ${right},${line.to} ${right - arrowWidth},${line.to + arrowHeight / 2}`);\n                g.appendChild(arrowRight);\n                this._element.appendChild(g);\n                /*\n                TODO@hediet\n                path.addEventListener('mouseenter', () => {\n                    model.setHoveredMovedText(line.move);\n                });\n                path.addEventListener('mouseleave', () => {\n                    model.setHoveredMovedText(undefined);\n                });*/\n                idx++;\n            }\n            this.width.set(lineAreaWidth, undefined);\n        });\n        this._element = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\n        this._element.setAttribute('class', 'moved-blocks-lines');\n        this._rootElement.appendChild(this._element);\n        this._register(toDisposable(() => this._element.remove()));\n        this._register(autorun(reader => {\n            /** @description update moved blocks lines positioning */\n            const info = this._originalEditorLayoutInfo.read(reader);\n            const info2 = this._modifiedEditorLayoutInfo.read(reader);\n            if (!info || !info2) {\n                return;\n            }\n            this._element.style.left = `${info.width - info.verticalScrollbarWidth}px`;\n            this._element.style.height = `${info.height}px`;\n            this._element.style.width = `${info.verticalScrollbarWidth + info.contentLeft - MovedBlocksLinesPart.movedCodeBlockPadding + this.width.read(reader)}px`;\n        }));\n        this._register(recomputeInitiallyAndOnChange(this._state));\n        const movedBlockViewZones = derived(reader => {\n            const model = this._diffModel.read(reader);\n            const d = model === null || model === void 0 ? void 0 : model.diff.read(reader);\n            if (!d) {\n                return [];\n            }\n            return d.movedTexts.map(move => ({\n                move,\n                original: new PlaceholderViewZone(constObservable(move.lineRangeMapping.original.startLineNumber - 1), 18),\n                modified: new PlaceholderViewZone(constObservable(move.lineRangeMapping.modified.startLineNumber - 1), 18),\n            }));\n        });\n        this._register(applyViewZones(this._editors.original, movedBlockViewZones.map(zones => zones.map(z => z.original))));\n        this._register(applyViewZones(this._editors.modified, movedBlockViewZones.map(zones => zones.map(z => z.modified))));\n        this._register(autorunWithStore((reader, store) => {\n            const blocks = movedBlockViewZones.read(reader);\n            for (const b of blocks) {\n                store.add(new MovedBlockOverlayWidget(this._editors.original, b.original, b.move, 'original', this._diffModel.get()));\n                store.add(new MovedBlockOverlayWidget(this._editors.modified, b.modified, b.move, 'modified', this._diffModel.get()));\n            }\n        }));\n        const originalCursorPosition = observableFromEvent(this._editors.original.onDidChangeCursorPosition, () => this._editors.original.getPosition());\n        const modifiedCursorPosition = observableFromEvent(this._editors.modified.onDidChangeCursorPosition, () => this._editors.modified.getPosition());\n        const originalHasFocus = observableSignalFromEvent('original.onDidFocusEditorWidget', e => this._editors.original.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0)));\n        const modifiedHasFocus = observableSignalFromEvent('modified.onDidFocusEditorWidget', e => this._editors.modified.onDidFocusEditorWidget(() => setTimeout(() => e(undefined), 0)));\n        let lastChangedEditor = 'modified';\n        this._register(autorunHandleChanges({\n            createEmptyChangeSummary: () => undefined,\n            handleChange: (ctx, summary) => {\n                if (ctx.didChange(originalHasFocus)) {\n                    lastChangedEditor = 'original';\n                }\n                if (ctx.didChange(modifiedHasFocus)) {\n                    lastChangedEditor = 'modified';\n                }\n                return true;\n            }\n        }, reader => {\n            originalHasFocus.read(reader);\n            modifiedHasFocus.read(reader);\n            const m = this._diffModel.read(reader);\n            if (!m) {\n                return;\n            }\n            const diff = m.diff.read(reader);\n            let movedText = undefined;\n            if (diff && lastChangedEditor === 'original') {\n                const originalPos = originalCursorPosition.read(reader);\n                if (originalPos) {\n                    movedText = diff.movedTexts.find(m => m.lineRangeMapping.original.contains(originalPos.lineNumber));\n                }\n            }\n            if (diff && lastChangedEditor === 'modified') {\n                const modifiedPos = modifiedCursorPosition.read(reader);\n                if (modifiedPos) {\n                    movedText = diff.movedTexts.find(m => m.lineRangeMapping.modified.contains(modifiedPos.lineNumber));\n                }\n            }\n            if (movedText !== m.movedTextToCompare.get()) {\n                m.movedTextToCompare.set(undefined, undefined);\n            }\n            m.setActiveMovedText(movedText);\n        }));\n    }\n}\nMovedBlocksLinesPart.movedCodeBlockPadding = 4;\nclass LinesLayout {\n    static compute(lines) {\n        const setsPerTrack = [];\n        const trackPerLineIdx = [];\n        for (const line of lines) {\n            let trackIdx = setsPerTrack.findIndex(set => !set.intersectsStrict(line));\n            if (trackIdx === -1) {\n                const maxTrackCount = 6;\n                if (setsPerTrack.length >= maxTrackCount) {\n                    trackIdx = findMaxIdxBy(setsPerTrack, compareBy(set => set.intersectWithRangeLength(line), numberComparator));\n                }\n                else {\n                    trackIdx = setsPerTrack.length;\n                    setsPerTrack.push(new OffsetRangeSet());\n                }\n            }\n            setsPerTrack[trackIdx].addRange(line);\n            trackPerLineIdx.push(trackIdx);\n        }\n        return new LinesLayout(setsPerTrack.length, trackPerLineIdx);\n    }\n    constructor(_trackCount, trackPerLineIdx) {\n        this._trackCount = _trackCount;\n        this.trackPerLineIdx = trackPerLineIdx;\n    }\n    getTrack(lineIdx) {\n        return this.trackPerLineIdx[lineIdx];\n    }\n    getTrackCount() {\n        return this._trackCount;\n    }\n}\nclass MovedBlockOverlayWidget extends ViewZoneOverlayWidget {\n    constructor(_editor, _viewZone, _move, _kind, _diffModel) {\n        const root = h('div.diff-hidden-lines-widget');\n        super(_editor, _viewZone, root.root);\n        this._editor = _editor;\n        this._move = _move;\n        this._kind = _kind;\n        this._diffModel = _diffModel;\n        this._nodes = h('div.diff-moved-code-block', { style: { marginRight: '4px' } }, [\n            h('div.text-content@textContent'),\n            h('div.action-bar@actionBar'),\n        ]);\n        root.root.appendChild(this._nodes.root);\n        const editorLayout = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\n        this._register(applyStyle(this._nodes.root, {\n            paddingRight: editorLayout.map(l => l.verticalScrollbarWidth)\n        }));\n        let text;\n        if (_move.changes.length > 0) {\n            text = this._kind === 'original' ? localize('codeMovedToWithChanges', 'Code moved with changes to line {0}-{1}', this._move.lineRangeMapping.modified.startLineNumber, this._move.lineRangeMapping.modified.endLineNumberExclusive - 1) : localize('codeMovedFromWithChanges', 'Code moved with changes from line {0}-{1}', this._move.lineRangeMapping.original.startLineNumber, this._move.lineRangeMapping.original.endLineNumberExclusive - 1);\n        }\n        else {\n            text = this._kind === 'original' ? localize('codeMovedTo', 'Code moved to line {0}-{1}', this._move.lineRangeMapping.modified.startLineNumber, this._move.lineRangeMapping.modified.endLineNumberExclusive - 1) : localize('codeMovedFrom', 'Code moved from line {0}-{1}', this._move.lineRangeMapping.original.startLineNumber, this._move.lineRangeMapping.original.endLineNumberExclusive - 1);\n        }\n        const actionBar = this._register(new ActionBar(this._nodes.actionBar, {\n            highlightToggledItems: true,\n        }));\n        const caption = new Action('', text, '', false);\n        actionBar.push(caption, { icon: false, label: true });\n        const actionCompare = new Action('', 'Compare', ThemeIcon.asClassName(Codicon.compareChanges), true, () => {\n            this._editor.focus();\n            this._diffModel.movedTextToCompare.set(this._diffModel.movedTextToCompare.get() === _move ? undefined : this._move, undefined);\n        });\n        this._register(autorun(reader => {\n            const isActive = this._diffModel.movedTextToCompare.read(reader) === _move;\n            actionCompare.checked = isActive;\n        }));\n        actionBar.push(actionCompare, { icon: false, label: true });\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { derived } from '../../../../base/common/observable.js';\nimport { arrowRevertChange, diffAddDecoration, diffAddDecorationEmpty, diffDeleteDecoration, diffDeleteDecorationEmpty, diffLineAddDecorationBackground, diffLineAddDecorationBackgroundWithIndicator, diffLineDeleteDecorationBackground, diffLineDeleteDecorationBackgroundWithIndicator, diffWholeLineAddDecoration, diffWholeLineDeleteDecoration } from './decorations.js';\nimport { MovedBlocksLinesPart } from './movedBlocksLines.js';\nimport { applyObservableDecorations } from './utils.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nexport class DiffEditorDecorations extends Disposable {\n    constructor(_editors, _diffModel, _options) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._decorations = derived(this, (reader) => {\n            var _a;\n            const diff = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader);\n            if (!diff) {\n                return null;\n            }\n            const movedTextToCompare = this._diffModel.read(reader).movedTextToCompare.read(reader);\n            const renderIndicators = this._options.renderIndicators.read(reader);\n            const showEmptyDecorations = this._options.showEmptyDecorations.read(reader);\n            const originalDecorations = [];\n            const modifiedDecorations = [];\n            if (!movedTextToCompare) {\n                for (const m of diff.mappings) {\n                    if (!m.lineRangeMapping.original.isEmpty) {\n                        originalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange(), options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n                    }\n                    if (!m.lineRangeMapping.modified.isEmpty) {\n                        modifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange(), options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n                    }\n                    if (m.lineRangeMapping.modified.isEmpty || m.lineRangeMapping.original.isEmpty) {\n                        if (!m.lineRangeMapping.original.isEmpty) {\n                            originalDecorations.push({ range: m.lineRangeMapping.original.toInclusiveRange(), options: diffWholeLineDeleteDecoration });\n                        }\n                        if (!m.lineRangeMapping.modified.isEmpty) {\n                            modifiedDecorations.push({ range: m.lineRangeMapping.modified.toInclusiveRange(), options: diffWholeLineAddDecoration });\n                        }\n                    }\n                    else {\n                        for (const i of m.lineRangeMapping.innerChanges || []) {\n                            // Don't show empty markers outside the line range\n                            if (m.lineRangeMapping.original.contains(i.originalRange.startLineNumber)) {\n                                originalDecorations.push({ range: i.originalRange, options: (i.originalRange.isEmpty() && showEmptyDecorations) ? diffDeleteDecorationEmpty : diffDeleteDecoration });\n                            }\n                            if (m.lineRangeMapping.modified.contains(i.modifiedRange.startLineNumber)) {\n                                modifiedDecorations.push({ range: i.modifiedRange, options: (i.modifiedRange.isEmpty() && showEmptyDecorations) ? diffAddDecorationEmpty : diffAddDecoration });\n                            }\n                        }\n                    }\n                    if (!m.lineRangeMapping.modified.isEmpty && this._options.shouldRenderRevertArrows.read(reader) && !movedTextToCompare) {\n                        modifiedDecorations.push({ range: Range.fromPositions(new Position(m.lineRangeMapping.modified.startLineNumber, 1)), options: arrowRevertChange });\n                    }\n                }\n            }\n            if (movedTextToCompare) {\n                for (const m of movedTextToCompare.changes) {\n                    const fullRangeOriginal = m.original.toInclusiveRange();\n                    if (fullRangeOriginal) {\n                        originalDecorations.push({ range: fullRangeOriginal, options: renderIndicators ? diffLineDeleteDecorationBackgroundWithIndicator : diffLineDeleteDecorationBackground });\n                    }\n                    const fullRangeModified = m.modified.toInclusiveRange();\n                    if (fullRangeModified) {\n                        modifiedDecorations.push({ range: fullRangeModified, options: renderIndicators ? diffLineAddDecorationBackgroundWithIndicator : diffLineAddDecorationBackground });\n                    }\n                    for (const i of m.innerChanges || []) {\n                        originalDecorations.push({ range: i.originalRange, options: diffDeleteDecoration });\n                        modifiedDecorations.push({ range: i.modifiedRange, options: diffAddDecoration });\n                    }\n                }\n            }\n            const activeMovedText = this._diffModel.read(reader).activeMovedText.read(reader);\n            for (const m of diff.movedTexts) {\n                originalDecorations.push({\n                    range: m.lineRangeMapping.original.toInclusiveRange(), options: {\n                        description: 'moved',\n                        blockClassName: 'movedOriginal' + (m === activeMovedText ? ' currentMove' : ''),\n                        blockPadding: [MovedBlocksLinesPart.movedCodeBlockPadding, 0, MovedBlocksLinesPart.movedCodeBlockPadding, MovedBlocksLinesPart.movedCodeBlockPadding],\n                    }\n                });\n                modifiedDecorations.push({\n                    range: m.lineRangeMapping.modified.toInclusiveRange(), options: {\n                        description: 'moved',\n                        blockClassName: 'movedModified' + (m === activeMovedText ? ' currentMove' : ''),\n                        blockPadding: [4, 0, 4, 4],\n                    }\n                });\n            }\n            return { originalDecorations, modifiedDecorations };\n        });\n        this._register(applyObservableDecorations(this._editors.original, this._decorations.map(d => (d === null || d === void 0 ? void 0 : d.originalDecorations) || [])));\n        this._register(applyObservableDecorations(this._editors.modified, this._decorations.map(d => (d === null || d === void 0 ? void 0 : d.modifiedDecorations) || [])));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Sash } from '../../../../base/browser/ui/sash/sash.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, derived, observableValue } from '../../../../base/common/observable.js';\nexport class DiffEditorSash extends Disposable {\n    constructor(_options, _domNode, _dimensions) {\n        super();\n        this._options = _options;\n        this._domNode = _domNode;\n        this._dimensions = _dimensions;\n        this._sashRatio = observableValue(this, undefined);\n        this.sashLeft = derived(this, reader => {\n            var _a;\n            const ratio = (_a = this._sashRatio.read(reader)) !== null && _a !== void 0 ? _a : this._options.splitViewDefaultRatio.read(reader);\n            return this._computeSashLeft(ratio, reader);\n        });\n        this._sash = this._register(new Sash(this._domNode, {\n            getVerticalSashTop: (_sash) => 0,\n            getVerticalSashLeft: (_sash) => this.sashLeft.get(),\n            getVerticalSashHeight: (_sash) => this._dimensions.height.get(),\n        }, { orientation: 0 /* Orientation.VERTICAL */ }));\n        this._startSashPosition = undefined;\n        this._register(this._sash.onDidStart(() => {\n            this._startSashPosition = this.sashLeft.get();\n        }));\n        this._register(this._sash.onDidChange((e) => {\n            const contentWidth = this._dimensions.width.get();\n            const sashPosition = this._computeSashLeft((this._startSashPosition + (e.currentX - e.startX)) / contentWidth, undefined);\n            this._sashRatio.set(sashPosition / contentWidth, undefined);\n        }));\n        this._register(this._sash.onDidEnd(() => this._sash.layout()));\n        this._register(this._sash.onDidReset(() => this._sashRatio.set(undefined, undefined)));\n        this._register(autorun(reader => {\n            /** @description update sash layout */\n            const enabled = this._options.enableSplitViewResizing.read(reader);\n            this._sash.state = enabled ? 3 /* SashState.Enabled */ : 0 /* SashState.Disabled */;\n            this.sashLeft.read(reader);\n            this._dimensions.height.read(reader);\n            this._sash.layout();\n        }));\n    }\n    setBoundarySashes(sashes) {\n        this._sash.orthogonalEndSash = sashes.bottom;\n    }\n    /** @pure */\n    _computeSashLeft(desiredRatio, reader) {\n        const contentWidth = this._dimensions.width.read(reader);\n        const midPoint = Math.floor(this._options.splitViewDefaultRatio.read(reader) * contentWidth);\n        const sashLeft = this._options.enableSplitViewResizing.read(reader) ? Math.floor(desiredRatio * contentWidth) : midPoint;\n        const MINIMUM_EDITOR_WIDTH = 100;\n        if (contentWidth <= MINIMUM_EDITOR_WIDTH * 2) {\n            return midPoint;\n        }\n        if (sashLeft < MINIMUM_EDITOR_WIDTH) {\n            return MINIMUM_EDITOR_WIDTH;\n        }\n        if (sashLeft > contentWidth - MINIMUM_EDITOR_WIDTH) {\n            return contentWidth - MINIMUM_EDITOR_WIDTH;\n        }\n        return sashLeft;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { equals } from '../../../../base/common/arrays.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { onUnexpectedExternalError } from '../../../../base/common/errors.js';\nimport { Iterable } from '../../../../base/common/iterator.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\n// TODO@hediet: These classes are copied from outlineModel.ts because of layering issues.\n// Because these classes just depend on the DocumentSymbolProvider (which is in the core editor),\n// they should be moved to the core editor as well.\nexport class TreeElement {\n    remove() {\n        var _a;\n        (_a = this.parent) === null || _a === void 0 ? void 0 : _a.children.delete(this.id);\n    }\n    static findId(candidate, container) {\n        // complex id-computation which contains the origin/extension,\n        // the parent path, and some dedupe logic when names collide\n        let candidateId;\n        if (typeof candidate === 'string') {\n            candidateId = `${container.id}/${candidate}`;\n        }\n        else {\n            candidateId = `${container.id}/${candidate.name}`;\n            if (container.children.get(candidateId) !== undefined) {\n                candidateId = `${container.id}/${candidate.name}_${candidate.range.startLineNumber}_${candidate.range.startColumn}`;\n            }\n        }\n        let id = candidateId;\n        for (let i = 0; container.children.get(id) !== undefined; i++) {\n            id = `${candidateId}_${i}`;\n        }\n        return id;\n    }\n    static empty(element) {\n        return element.children.size === 0;\n    }\n}\nexport class OutlineElement extends TreeElement {\n    constructor(id, parent, symbol) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.symbol = symbol;\n        this.children = new Map();\n    }\n}\nexport class OutlineGroup extends TreeElement {\n    constructor(id, parent, label, order) {\n        super();\n        this.id = id;\n        this.parent = parent;\n        this.label = label;\n        this.order = order;\n        this.children = new Map();\n    }\n}\nexport class OutlineModel extends TreeElement {\n    static create(registry, textModel, token) {\n        const cts = new CancellationTokenSource(token);\n        const result = new OutlineModel(textModel.uri);\n        const provider = registry.ordered(textModel);\n        const promises = provider.map((provider, index) => {\n            var _a;\n            const id = TreeElement.findId(`provider_${index}`, result);\n            const group = new OutlineGroup(id, result, (_a = provider.displayName) !== null && _a !== void 0 ? _a : 'Unknown Outline Provider', index);\n            return Promise.resolve(provider.provideDocumentSymbols(textModel, cts.token)).then(result => {\n                for (const info of result || []) {\n                    OutlineModel._makeOutlineElement(info, group);\n                }\n                return group;\n            }, err => {\n                onUnexpectedExternalError(err);\n                return group;\n            }).then(group => {\n                if (!TreeElement.empty(group)) {\n                    result._groups.set(id, group);\n                }\n                else {\n                    group.remove();\n                }\n            });\n        });\n        const listener = registry.onDidChange(() => {\n            const newProvider = registry.ordered(textModel);\n            if (!equals(newProvider, provider)) {\n                cts.cancel();\n            }\n        });\n        return Promise.all(promises).then(() => {\n            if (cts.token.isCancellationRequested && !token.isCancellationRequested) {\n                return OutlineModel.create(registry, textModel, token);\n            }\n            else {\n                return result._compact();\n            }\n        }).finally(() => {\n            cts.dispose();\n            listener.dispose();\n        });\n    }\n    static _makeOutlineElement(info, container) {\n        const id = TreeElement.findId(info, container);\n        const res = new OutlineElement(id, container, info);\n        if (info.children) {\n            for (const childInfo of info.children) {\n                OutlineModel._makeOutlineElement(childInfo, res);\n            }\n        }\n        container.children.set(res.id, res);\n    }\n    constructor(uri) {\n        super();\n        this.uri = uri;\n        this.id = 'root';\n        this.parent = undefined;\n        this._groups = new Map();\n        this.children = new Map();\n        this.id = 'root';\n        this.parent = undefined;\n    }\n    _compact() {\n        let count = 0;\n        for (const [key, group] of this._groups) {\n            if (group.children.size === 0) { // empty\n                this._groups.delete(key);\n            }\n            else {\n                count += 1;\n            }\n        }\n        if (count !== 1) {\n            //\n            this.children = this._groups;\n        }\n        else {\n            // adopt all elements of the first group\n            const group = Iterable.first(this._groups.values());\n            for (const [, child] of group.children) {\n                child.parent = this;\n                this.children.set(child.id, child);\n            }\n        }\n        return this;\n    }\n    getTopLevelSymbols() {\n        const roots = [];\n        for (const child of this.children.values()) {\n            if (child instanceof OutlineElement) {\n                roots.push(child.symbol);\n            }\n            else {\n                roots.push(...Iterable.map(child.children.values(), child => child.symbol));\n            }\n        }\n        return roots.sort((a, b) => Range.compareRangesUsingStarts(a.range, b.range));\n    }\n    asListOfDocumentSymbols() {\n        const roots = this.getTopLevelSymbols();\n        const bucket = [];\n        OutlineModel._flattenDocumentSymbols(bucket, roots, '');\n        return bucket.sort((a, b) => Position.compare(Range.getStartPosition(a.range), Range.getStartPosition(b.range)) || Position.compare(Range.getEndPosition(b.range), Range.getEndPosition(a.range)));\n    }\n    static _flattenDocumentSymbols(bucket, entries, overrideContainerLabel) {\n        for (const entry of entries) {\n            bucket.push({\n                kind: entry.kind,\n                tags: entry.tags,\n                name: entry.name,\n                detail: entry.detail,\n                containerName: entry.containerName || overrideContainerLabel,\n                range: entry.range,\n                selectionRange: entry.selectionRange,\n                children: undefined, // we flatten it...\n            });\n            // Recurse over children\n            if (entry.children) {\n                OutlineModel._flattenDocumentSymbols(bucket, entry.children, entry.name);\n            }\n        }\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { $, addDisposableListener, h, reset } from '../../../../base/browser/dom.js';\nimport { renderIcon, renderLabelWithIcons } from '../../../../base/browser/ui/iconLabel/iconLabels.js';\nimport { compareBy, numberComparator, reverseOrder } from '../../../../base/common/arrays.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { MarkdownString } from '../../../../base/common/htmlContent.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, observableFromEvent, observableSignalFromEvent, observableValue, transaction } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { isDefined } from '../../../../base/common/types.js';\nimport { OutlineModel } from './outlineModel.js';\nimport { DisposableCancellationTokenSource, PlaceholderViewZone, ViewZoneOverlayWidget, applyObservableDecorations, applyStyle, applyViewZones } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { SymbolKinds } from '../../../common/languages.js';\nimport { ILanguageFeaturesService } from '../../../common/services/languageFeatures.js';\nimport { localize } from '../../../../nls.js';\nlet HideUnchangedRegionsFeature = class HideUnchangedRegionsFeature extends Disposable {\n    get isUpdatingViewZones() { return this._isUpdatingViewZones; }\n    constructor(_editors, _diffModel, _options, _languageFeaturesService) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._languageFeaturesService = _languageFeaturesService;\n        this._isUpdatingViewZones = false;\n        this._modifiedOutlineSource = derivedWithStore(this, (reader, store) => {\n            const m = this._editors.modifiedModel.read(reader);\n            if (!m) {\n                return undefined;\n            }\n            return store.add(new OutlineSource(this._languageFeaturesService, m));\n        });\n        this._register(this._editors.original.onDidChangeCursorPosition(e => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                const m = this._diffModel.get();\n                transaction(tx => {\n                    for (const s of this._editors.original.getSelections() || []) {\n                        m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getStartPosition().lineNumber, tx);\n                        m === null || m === void 0 ? void 0 : m.ensureOriginalLineIsVisible(s.getEndPosition().lineNumber, tx);\n                    }\n                });\n            }\n        }));\n        this._register(this._editors.modified.onDidChangeCursorPosition(e => {\n            if (e.reason === 3 /* CursorChangeReason.Explicit */) {\n                const m = this._diffModel.get();\n                transaction(tx => {\n                    for (const s of this._editors.modified.getSelections() || []) {\n                        m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getStartPosition().lineNumber, tx);\n                        m === null || m === void 0 ? void 0 : m.ensureModifiedLineIsVisible(s.getEndPosition().lineNumber, tx);\n                    }\n                });\n            }\n        }));\n        const unchangedRegions = this._diffModel.map((m, reader) => { var _a, _b; return ((_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0 ? [] : (_b = m === null || m === void 0 ? void 0 : m.unchangedRegions.read(reader)) !== null && _b !== void 0 ? _b : []; });\n        const viewZones = derivedWithStore(this, (reader, store) => {\n            /** @description view Zones */\n            const modifiedOutlineSource = this._modifiedOutlineSource.read(reader);\n            if (!modifiedOutlineSource) {\n                return { origViewZones: [], modViewZones: [] };\n            }\n            const origViewZones = [];\n            const modViewZones = [];\n            const sideBySide = this._options.renderSideBySide.read(reader);\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    continue;\n                }\n                {\n                    const d = derived(reader => /** @description hiddenOriginalRangeStart */ r.getHiddenOriginalRange(reader).startLineNumber - 1);\n                    const origVz = new PlaceholderViewZone(d, 24);\n                    origViewZones.push(origVz);\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.original, origVz, r, r.originalUnchangedRange, !sideBySide, modifiedOutlineSource, l => this._diffModel.get().ensureModifiedLineIsVisible(l, undefined), this._options));\n                }\n                {\n                    const d = derived(reader => /** @description hiddenModifiedRangeStart */ r.getHiddenModifiedRange(reader).startLineNumber - 1);\n                    const modViewZone = new PlaceholderViewZone(d, 24);\n                    modViewZones.push(modViewZone);\n                    store.add(new CollapsedCodeOverlayWidget(this._editors.modified, modViewZone, r, r.modifiedUnchangedRange, false, modifiedOutlineSource, l => this._diffModel.get().ensureModifiedLineIsVisible(l, undefined), this._options));\n                }\n            }\n            return { origViewZones, modViewZones, };\n        });\n        const unchangedLinesDecoration = {\n            description: 'unchanged lines',\n            className: 'diff-unchanged-lines',\n            isWholeLine: true,\n        };\n        const unchangedLinesDecorationShow = {\n            description: 'Fold Unchanged',\n            glyphMarginHoverMessage: new MarkdownString(undefined, { isTrusted: true, supportThemeIcons: true })\n                .appendMarkdown(localize('foldUnchanged', 'Fold Unchanged Region')),\n            glyphMarginClassName: 'fold-unchanged ' + ThemeIcon.asClassName(Codicon.fold),\n            zIndex: 10001,\n        };\n        this._register(applyObservableDecorations(this._editors.original, derived(reader => {\n            /** @description decorations */\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            const result = curUnchangedRegions.map(r => ({\n                range: r.originalUnchangedRange.toInclusiveRange(),\n                options: unchangedLinesDecoration,\n            }));\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    result.push({\n                        range: Range.fromPositions(new Position(r.originalLineNumber, 1)),\n                        options: unchangedLinesDecorationShow,\n                    });\n                }\n            }\n            return result;\n        })));\n        this._register(applyObservableDecorations(this._editors.modified, derived(reader => {\n            /** @description decorations */\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            const result = curUnchangedRegions.map(r => ({\n                range: r.modifiedUnchangedRange.toInclusiveRange(),\n                options: unchangedLinesDecoration,\n            }));\n            for (const r of curUnchangedRegions) {\n                if (r.shouldHideControls(reader)) {\n                    result.push({\n                        range: LineRange.ofLength(r.modifiedLineNumber, 1).toInclusiveRange(),\n                        options: unchangedLinesDecorationShow,\n                    });\n                }\n            }\n            return result;\n        })));\n        this._register(applyViewZones(this._editors.original, viewZones.map(v => v.origViewZones), v => this._isUpdatingViewZones = v));\n        this._register(applyViewZones(this._editors.modified, viewZones.map(v => v.modViewZones), v => this._isUpdatingViewZones = v));\n        this._register(autorun((reader) => {\n            /** @description update folded unchanged regions */\n            const curUnchangedRegions = unchangedRegions.read(reader);\n            this._editors.original.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenOriginalRange(reader).toInclusiveRange()).filter(isDefined));\n            this._editors.modified.setHiddenAreas(curUnchangedRegions.map(r => r.getHiddenModifiedRange(reader).toInclusiveRange()).filter(isDefined));\n        }));\n        this._register(this._editors.modified.onMouseUp(event => {\n            var _a;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const region = model.unchangedRegions.get().find(r => r.modifiedUnchangedRange.includes(lineNumber));\n                if (!region) {\n                    return;\n                }\n                region.collapseAll(undefined);\n                event.event.stopPropagation();\n                event.event.preventDefault();\n            }\n        }));\n        this._register(this._editors.original.onMouseUp(event => {\n            var _a;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('fold-unchanged'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const region = model.unchangedRegions.get().find(r => r.originalUnchangedRange.includes(lineNumber));\n                if (!region) {\n                    return;\n                }\n                region.collapseAll(undefined);\n                event.event.stopPropagation();\n                event.event.preventDefault();\n            }\n        }));\n    }\n};\nHideUnchangedRegionsFeature = __decorate([\n    __param(3, ILanguageFeaturesService)\n], HideUnchangedRegionsFeature);\nexport { HideUnchangedRegionsFeature };\nlet OutlineSource = class OutlineSource extends Disposable {\n    constructor(_languageFeaturesService, _textModel) {\n        super();\n        this._languageFeaturesService = _languageFeaturesService;\n        this._textModel = _textModel;\n        this._currentModel = observableValue(this, undefined);\n        const documentSymbolProviderChanged = observableSignalFromEvent('documentSymbolProvider.onDidChange', this._languageFeaturesService.documentSymbolProvider.onDidChange);\n        const textModelChanged = observableSignalFromEvent('_textModel.onDidChangeContent', Event.debounce(e => this._textModel.onDidChangeContent(e), () => undefined, 100));\n        this._register(autorunWithStore((reader, store) => __awaiter(this, void 0, void 0, function* () {\n            documentSymbolProviderChanged.read(reader);\n            textModelChanged.read(reader);\n            const src = store.add(new DisposableCancellationTokenSource());\n            const model = yield OutlineModel.create(this._languageFeaturesService.documentSymbolProvider, this._textModel, src.token);\n            if (store.isDisposed) {\n                return;\n            }\n            this._currentModel.set(model, undefined);\n        })));\n    }\n    getBreadcrumbItems(startRange, reader) {\n        const m = this._currentModel.read(reader);\n        if (!m) {\n            return [];\n        }\n        const symbols = m.asListOfDocumentSymbols()\n            .filter(s => startRange.contains(s.range.startLineNumber) && !startRange.contains(s.range.endLineNumber));\n        symbols.sort(reverseOrder(compareBy(s => s.range.endLineNumber - s.range.startLineNumber, numberComparator)));\n        return symbols.map(s => ({ name: s.name, kind: s.kind, startLineNumber: s.range.startLineNumber }));\n    }\n};\nOutlineSource = __decorate([\n    __param(0, ILanguageFeaturesService)\n], OutlineSource);\nclass CollapsedCodeOverlayWidget extends ViewZoneOverlayWidget {\n    constructor(_editor, _viewZone, _unchangedRegion, _unchangedRegionRange, hide, _modifiedOutlineSource, _revealModifiedHiddenLine, _options) {\n        const root = h('div.diff-hidden-lines-widget');\n        super(_editor, _viewZone, root.root);\n        this._editor = _editor;\n        this._unchangedRegion = _unchangedRegion;\n        this._unchangedRegionRange = _unchangedRegionRange;\n        this.hide = hide;\n        this._modifiedOutlineSource = _modifiedOutlineSource;\n        this._revealModifiedHiddenLine = _revealModifiedHiddenLine;\n        this._options = _options;\n        this._nodes = h('div.diff-hidden-lines', [\n            h('div.top@top', { title: localize('diff.hiddenLines.top', 'Click or drag to show more above') }),\n            h('div.center@content', { style: { display: 'flex' } }, [\n                h('div@first', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center', flexShrink: '0' } }, [$('a', { title: localize('showAll', 'Show all'), role: 'button', onclick: () => { this._unchangedRegion.showAll(undefined); } }, ...renderLabelWithIcons('$(unfold)'))]),\n                h('div@others', { style: { display: 'flex', justifyContent: 'center', alignItems: 'center' } }),\n            ]),\n            h('div.bottom@bottom', { title: localize('diff.bottom', 'Click or drag to show more below'), role: 'button' }),\n        ]);\n        root.root.appendChild(this._nodes.root);\n        const layoutInfo = observableFromEvent(this._editor.onDidLayoutChange, () => this._editor.getLayoutInfo());\n        if (!this.hide) {\n            this._register(applyStyle(this._nodes.first, { width: layoutInfo.map((l) => l.contentLeft) }));\n        }\n        else {\n            reset(this._nodes.first);\n        }\n        const editor = this._editor;\n        this._register(addDisposableListener(this._nodes.top, 'mousedown', e => {\n            if (e.button !== 0) {\n                return;\n            }\n            this._nodes.top.classList.toggle('dragging', true);\n            this._nodes.root.classList.toggle('dragging', true);\n            e.preventDefault();\n            const startTop = e.clientY;\n            let didMove = false;\n            const cur = this._unchangedRegion.visibleLineCountTop.get();\n            this._unchangedRegion.isDragged.set(true, undefined);\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n                const currentTop = e.clientY;\n                const delta = currentTop - startTop;\n                didMove = didMove || Math.abs(delta) > 2;\n                const lineDelta = Math.round(delta / editor.getOption(66 /* EditorOption.lineHeight */));\n                const newVal = Math.max(0, Math.min(cur + lineDelta, this._unchangedRegion.getMaxVisibleLineCountTop()));\n                this._unchangedRegion.visibleLineCountTop.set(newVal, undefined);\n            });\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n                if (!didMove) {\n                    this._unchangedRegion.showMoreAbove(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\n                }\n                this._nodes.top.classList.toggle('dragging', false);\n                this._nodes.root.classList.toggle('dragging', false);\n                this._unchangedRegion.isDragged.set(false, undefined);\n                mouseMoveListener.dispose();\n                mouseUpListener.dispose();\n            });\n        }));\n        this._register(addDisposableListener(this._nodes.bottom, 'mousedown', e => {\n            if (e.button !== 0) {\n                return;\n            }\n            this._nodes.bottom.classList.toggle('dragging', true);\n            this._nodes.root.classList.toggle('dragging', true);\n            e.preventDefault();\n            const startTop = e.clientY;\n            let didMove = false;\n            const cur = this._unchangedRegion.visibleLineCountBottom.get();\n            this._unchangedRegion.isDragged.set(true, undefined);\n            const mouseMoveListener = addDisposableListener(window, 'mousemove', e => {\n                const currentTop = e.clientY;\n                const delta = currentTop - startTop;\n                didMove = didMove || Math.abs(delta) > 2;\n                const lineDelta = Math.round(delta / editor.getOption(66 /* EditorOption.lineHeight */));\n                const newVal = Math.max(0, Math.min(cur - lineDelta, this._unchangedRegion.getMaxVisibleLineCountBottom()));\n                const top = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                this._unchangedRegion.visibleLineCountBottom.set(newVal, undefined);\n                const top2 = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n            });\n            const mouseUpListener = addDisposableListener(window, 'mouseup', e => {\n                this._unchangedRegion.isDragged.set(false, undefined);\n                if (!didMove) {\n                    const top = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                    this._unchangedRegion.showMoreBelow(this._options.hideUnchangedRegionsRevealLineCount.get(), undefined);\n                    const top2 = editor.getTopForLineNumber(this._unchangedRegionRange.endLineNumberExclusive);\n                    editor.setScrollTop(editor.getScrollTop() + (top2 - top));\n                }\n                this._nodes.bottom.classList.toggle('dragging', false);\n                this._nodes.root.classList.toggle('dragging', false);\n                mouseMoveListener.dispose();\n                mouseUpListener.dispose();\n            });\n        }));\n        this._register(autorun(reader => {\n            /** @description update labels */\n            const children = [];\n            if (!this.hide) {\n                const lineCount = _unchangedRegion.getHiddenModifiedRange(reader).length;\n                const linesHiddenText = localize('hiddenLines', '{0} hidden lines', lineCount);\n                const span = $('span', { title: localize('diff.hiddenLines.expandAll', 'Double click to unfold') }, linesHiddenText);\n                span.addEventListener('dblclick', e => {\n                    if (e.button !== 0) {\n                        return;\n                    }\n                    e.preventDefault();\n                    this._unchangedRegion.showAll(undefined);\n                });\n                children.push(span);\n                const range = this._unchangedRegion.getHiddenModifiedRange(reader);\n                const items = this._modifiedOutlineSource.getBreadcrumbItems(range, reader);\n                if (items.length > 0) {\n                    children.push($('span', undefined, '\\u00a0\\u00a0|\\u00a0\\u00a0'));\n                    for (let i = 0; i < items.length; i++) {\n                        const item = items[i];\n                        const icon = SymbolKinds.toIcon(item.kind);\n                        const divItem = h('div.breadcrumb-item', {\n                            style: { display: 'flex', alignItems: 'center' },\n                        }, [\n                            renderIcon(icon),\n                            '\\u00a0',\n                            item.name,\n                            ...(i === items.length - 1\n                                ? []\n                                : [renderIcon(Codicon.chevronRight)])\n                        ]).root;\n                        children.push(divItem);\n                        divItem.onclick = () => {\n                            this._revealModifiedHiddenLine(item.startLineNumber);\n                        };\n                    }\n                }\n            }\n            reset(this._nodes.others, ...children);\n        }));\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar WorkerBasedDocumentDiffProvider_1;\nimport { Emitter } from '../../../../base/common/event.js';\nimport { StopWatch } from '../../../../base/common/stopwatch.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { DetailedLineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { IEditorWorkerService } from '../../../common/services/editorWorker.js';\nimport { ITelemetryService } from '../../../../platform/telemetry/common/telemetry.js';\nlet WorkerBasedDocumentDiffProvider = WorkerBasedDocumentDiffProvider_1 = class WorkerBasedDocumentDiffProvider {\n    constructor(options, editorWorkerService, telemetryService) {\n        this.editorWorkerService = editorWorkerService;\n        this.telemetryService = telemetryService;\n        this.onDidChangeEventEmitter = new Emitter();\n        this.onDidChange = this.onDidChangeEventEmitter.event;\n        this.diffAlgorithm = 'advanced';\n        this.diffAlgorithmOnDidChangeSubscription = undefined;\n        this.setOptions(options);\n    }\n    dispose() {\n        var _a;\n        (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\n    }\n    computeDiff(original, modified, options, cancellationToken) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            if (typeof this.diffAlgorithm !== 'string') {\n                return this.diffAlgorithm.computeDiff(original, modified, options, cancellationToken);\n            }\n            // This significantly speeds up the case when the original file is empty\n            if (original.getLineCount() === 1 && original.getLineMaxColumn(1) === 1) {\n                if (modified.getLineCount() === 1 && modified.getLineMaxColumn(1) === 1) {\n                    return {\n                        changes: [],\n                        identical: true,\n                        quitEarly: false,\n                        moves: [],\n                    };\n                }\n                return {\n                    changes: [\n                        new DetailedLineRangeMapping(new LineRange(1, 2), new LineRange(1, modified.getLineCount() + 1), [\n                            new RangeMapping(original.getFullModelRange(), modified.getFullModelRange())\n                        ])\n                    ],\n                    identical: false,\n                    quitEarly: false,\n                    moves: [],\n                };\n            }\n            const uriKey = JSON.stringify([original.uri.toString(), modified.uri.toString()]);\n            const context = JSON.stringify([original.id, modified.id, original.getAlternativeVersionId(), modified.getAlternativeVersionId(), JSON.stringify(options)]);\n            const c = WorkerBasedDocumentDiffProvider_1.diffCache.get(uriKey);\n            if (c && c.context === context) {\n                return c.result;\n            }\n            const sw = StopWatch.create();\n            const result = yield this.editorWorkerService.computeDiff(original.uri, modified.uri, options, this.diffAlgorithm);\n            const timeMs = sw.elapsed();\n            this.telemetryService.publicLog2('diffEditor.computeDiff', {\n                timeMs,\n                timedOut: (_a = result === null || result === void 0 ? void 0 : result.quitEarly) !== null && _a !== void 0 ? _a : true,\n                detectedMoves: options.computeMoves ? ((_b = result === null || result === void 0 ? void 0 : result.moves.length) !== null && _b !== void 0 ? _b : 0) : -1,\n            });\n            if (cancellationToken.isCancellationRequested) {\n                // Text models might be disposed!\n                return {\n                    changes: [],\n                    identical: false,\n                    quitEarly: true,\n                    moves: [],\n                };\n            }\n            if (!result) {\n                throw new Error('no diff result available');\n            }\n            // max 10 items in cache\n            if (WorkerBasedDocumentDiffProvider_1.diffCache.size > 10) {\n                WorkerBasedDocumentDiffProvider_1.diffCache.delete(WorkerBasedDocumentDiffProvider_1.diffCache.keys().next().value);\n            }\n            WorkerBasedDocumentDiffProvider_1.diffCache.set(uriKey, { result, context });\n            return result;\n        });\n    }\n    setOptions(newOptions) {\n        var _a;\n        let didChange = false;\n        if (newOptions.diffAlgorithm) {\n            if (this.diffAlgorithm !== newOptions.diffAlgorithm) {\n                (_a = this.diffAlgorithmOnDidChangeSubscription) === null || _a === void 0 ? void 0 : _a.dispose();\n                this.diffAlgorithmOnDidChangeSubscription = undefined;\n                this.diffAlgorithm = newOptions.diffAlgorithm;\n                if (typeof newOptions.diffAlgorithm !== 'string') {\n                    this.diffAlgorithmOnDidChangeSubscription = newOptions.diffAlgorithm.onDidChange(() => this.onDidChangeEventEmitter.fire());\n                }\n                didChange = true;\n            }\n        }\n        if (didChange) {\n            this.onDidChangeEventEmitter.fire();\n        }\n    }\n};\nWorkerBasedDocumentDiffProvider.diffCache = new Map();\nWorkerBasedDocumentDiffProvider = WorkerBasedDocumentDiffProvider_1 = __decorate([\n    __param(1, IEditorWorkerService),\n    __param(2, ITelemetryService)\n], WorkerBasedDocumentDiffProvider);\nexport { WorkerBasedDocumentDiffProvider };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { WorkerBasedDocumentDiffProvider } from './workerBasedDocumentDiffProvider.js';\nimport { registerSingleton } from '../../../../platform/instantiation/common/extensions.js';\nimport { IInstantiationService, createDecorator } from '../../../../platform/instantiation/common/instantiation.js';\nexport const IDiffProviderFactoryService = createDecorator('diffProviderFactoryService');\nlet DiffProviderFactoryService = class DiffProviderFactoryService {\n    constructor(instantiationService) {\n        this.instantiationService = instantiationService;\n    }\n    createDiffProvider(editor, options) {\n        return this.instantiationService.createInstance(WorkerBasedDocumentDiffProvider, options);\n    }\n};\nDiffProviderFactoryService = __decorate([\n    __param(0, IInstantiationService)\n], DiffProviderFactoryService);\nexport { DiffProviderFactoryService };\nregisterSingleton(IDiffProviderFactoryService, DiffProviderFactoryService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { CancellationTokenSource } from '../../../../base/common/cancellation.js';\nimport { Disposable, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorunWithStore, derived, observableSignal, observableSignalFromEvent, observableValue, transaction, waitForState } from '../../../../base/common/observable.js';\nimport { IDiffProviderFactoryService } from './diffProviderFactoryService.js';\nimport { readHotReloadableExport } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { DefaultLinesDiffComputer } from '../../../common/diff/defaultLinesDiffComputer/defaultLinesDiffComputer.js';\nimport { DetailedLineRangeMapping, RangeMapping } from '../../../common/diff/rangeMapping.js';\nimport { TextEditInfo } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/beforeEditPositionMapper.js';\nimport { combineTextEditInfos } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/combineTextEditInfos.js';\nimport { optimizeSequenceDiffs } from '../../../common/diff/defaultLinesDiffComputer/heuristicSequenceOptimizations.js';\nlet DiffEditorViewModel = class DiffEditorViewModel extends Disposable {\n    setActiveMovedText(movedText) {\n        this._activeMovedText.set(movedText, undefined);\n    }\n    constructor(model, _options, _editor, _diffProviderFactoryService) {\n        super();\n        this.model = model;\n        this._options = _options;\n        this._editor = _editor;\n        this._diffProviderFactoryService = _diffProviderFactoryService;\n        this._isDiffUpToDate = observableValue(this, false);\n        this.isDiffUpToDate = this._isDiffUpToDate;\n        this._diff = observableValue(this, undefined);\n        this.diff = this._diff;\n        this._unchangedRegions = observableValue(this, { regions: [], originalDecorationIds: [], modifiedDecorationIds: [] });\n        this.unchangedRegions = derived(this, r => {\n            if (this._options.hideUnchangedRegions.read(r)) {\n                return this._unchangedRegions.read(r).regions;\n            }\n            else {\n                // Reset state\n                transaction(tx => {\n                    for (const r of this._unchangedRegions.get().regions) {\n                        r.collapseAll(tx);\n                    }\n                });\n                return [];\n            }\n        });\n        this.movedTextToCompare = observableValue(this, undefined);\n        this._activeMovedText = observableValue(this, undefined);\n        this._hoveredMovedText = observableValue(this, undefined);\n        this.activeMovedText = derived(this, r => { var _a, _b; return (_b = (_a = this.movedTextToCompare.read(r)) !== null && _a !== void 0 ? _a : this._hoveredMovedText.read(r)) !== null && _b !== void 0 ? _b : this._activeMovedText.read(r); });\n        this._cancellationTokenSource = new CancellationTokenSource();\n        this._diffProvider = derived(this, reader => {\n            const diffProvider = this._diffProviderFactoryService.createDiffProvider(this._editor, {\n                diffAlgorithm: this._options.diffAlgorithm.read(reader)\n            });\n            const onChangeSignal = observableSignalFromEvent('onDidChange', diffProvider.onDidChange);\n            return {\n                diffProvider,\n                onChangeSignal,\n            };\n        });\n        this._register(toDisposable(() => this._cancellationTokenSource.cancel()));\n        const contentChangedSignal = observableSignal('contentChangedSignal');\n        const debouncer = this._register(new RunOnceScheduler(() => contentChangedSignal.trigger(undefined), 200));\n        const updateUnchangedRegions = (result, tx, reader) => {\n            const newUnchangedRegions = UnchangedRegion.fromDiffs(result.changes, model.original.getLineCount(), model.modified.getLineCount(), this._options.hideUnchangedRegionsMinimumLineCount.read(reader), this._options.hideUnchangedRegionsContextLineCount.read(reader));\n            // Transfer state from cur state\n            const lastUnchangedRegions = this._unchangedRegions.get();\n            const lastUnchangedRegionsOrigRanges = lastUnchangedRegions.originalDecorationIds\n                .map(id => model.original.getDecorationRange(id))\n                .filter(r => !!r)\n                .map(r => LineRange.fromRange(r));\n            const lastUnchangedRegionsModRanges = lastUnchangedRegions.modifiedDecorationIds\n                .map(id => model.modified.getDecorationRange(id))\n                .filter(r => !!r)\n                .map(r => LineRange.fromRange(r));\n            const originalDecorationIds = model.original.deltaDecorations(lastUnchangedRegions.originalDecorationIds, newUnchangedRegions.map(r => ({ range: r.originalUnchangedRange.toInclusiveRange(), options: { description: 'unchanged' } })));\n            const modifiedDecorationIds = model.modified.deltaDecorations(lastUnchangedRegions.modifiedDecorationIds, newUnchangedRegions.map(r => ({ range: r.modifiedUnchangedRange.toInclusiveRange(), options: { description: 'unchanged' } })));\n            for (const r of newUnchangedRegions) {\n                for (let i = 0; i < lastUnchangedRegions.regions.length; i++) {\n                    if (r.originalUnchangedRange.intersectsStrict(lastUnchangedRegionsOrigRanges[i])\n                        && r.modifiedUnchangedRange.intersectsStrict(lastUnchangedRegionsModRanges[i])) {\n                        r.setHiddenModifiedRange(lastUnchangedRegions.regions[i].getHiddenModifiedRange(undefined), tx);\n                        break;\n                    }\n                }\n            }\n            this._unchangedRegions.set({\n                regions: newUnchangedRegions,\n                originalDecorationIds,\n                modifiedDecorationIds\n            }, tx);\n        };\n        this._register(model.modified.onDidChangeContent((e) => {\n            const diff = this._diff.get();\n            if (diff) {\n                const textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n                const result = applyModifiedEdits(this._lastDiff, textEdits, model.original, model.modified);\n                if (result) {\n                    this._lastDiff = result;\n                    transaction(tx => {\n                        this._diff.set(DiffState.fromDiffResult(this._lastDiff), tx);\n                        updateUnchangedRegions(result, tx);\n                        const currentSyncedMovedText = this.movedTextToCompare.get();\n                        this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n                    });\n                }\n            }\n            debouncer.schedule();\n        }));\n        this._register(model.original.onDidChangeContent((e) => {\n            const diff = this._diff.get();\n            if (diff) {\n                const textEdits = TextEditInfo.fromModelContentChanges(e.changes);\n                const result = applyOriginalEdits(this._lastDiff, textEdits, model.original, model.modified);\n                if (result) {\n                    this._lastDiff = result;\n                    transaction(tx => {\n                        this._diff.set(DiffState.fromDiffResult(this._lastDiff), tx);\n                        updateUnchangedRegions(result, tx);\n                        const currentSyncedMovedText = this.movedTextToCompare.get();\n                        this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n                    });\n                }\n            }\n            debouncer.schedule();\n        }));\n        this._register(autorunWithStore((reader, store) => __awaiter(this, void 0, void 0, function* () {\n            /** @description compute diff */\n            var _a, _b;\n            // So that they get recomputed when these settings change\n            this._options.hideUnchangedRegionsMinimumLineCount.read(reader);\n            this._options.hideUnchangedRegionsContextLineCount.read(reader);\n            debouncer.cancel();\n            contentChangedSignal.read(reader);\n            const documentDiffProvider = this._diffProvider.read(reader);\n            documentDiffProvider.onChangeSignal.read(reader);\n            readHotReloadableExport(DefaultLinesDiffComputer, reader);\n            readHotReloadableExport(optimizeSequenceDiffs, reader);\n            this._isDiffUpToDate.set(false, undefined);\n            let originalTextEditInfos = [];\n            store.add(model.original.onDidChangeContent((e) => {\n                const edits = TextEditInfo.fromModelContentChanges(e.changes);\n                originalTextEditInfos = combineTextEditInfos(originalTextEditInfos, edits);\n            }));\n            let modifiedTextEditInfos = [];\n            store.add(model.modified.onDidChangeContent((e) => {\n                const edits = TextEditInfo.fromModelContentChanges(e.changes);\n                modifiedTextEditInfos = combineTextEditInfos(modifiedTextEditInfos, edits);\n            }));\n            let result = yield documentDiffProvider.diffProvider.computeDiff(model.original, model.modified, {\n                ignoreTrimWhitespace: this._options.ignoreTrimWhitespace.read(reader),\n                maxComputationTimeMs: this._options.maxComputationTimeMs.read(reader),\n                computeMoves: this._options.showMoves.read(reader),\n            }, this._cancellationTokenSource.token);\n            if (this._cancellationTokenSource.token.isCancellationRequested) {\n                return;\n            }\n            result = normalizeDocumentDiff(result, model.original, model.modified);\n            result = (_a = applyOriginalEdits(result, originalTextEditInfos, model.original, model.modified)) !== null && _a !== void 0 ? _a : result;\n            result = (_b = applyModifiedEdits(result, modifiedTextEditInfos, model.original, model.modified)) !== null && _b !== void 0 ? _b : result;\n            transaction(tx => {\n                updateUnchangedRegions(result, tx);\n                this._lastDiff = result;\n                const state = DiffState.fromDiffResult(result);\n                this._diff.set(state, tx);\n                this._isDiffUpToDate.set(true, tx);\n                const currentSyncedMovedText = this.movedTextToCompare.get();\n                this.movedTextToCompare.set(currentSyncedMovedText ? this._lastDiff.moves.find(m => m.lineRangeMapping.modified.intersect(currentSyncedMovedText.lineRangeMapping.modified)) : undefined, tx);\n            });\n        })));\n    }\n    ensureModifiedLineIsVisible(lineNumber, tx) {\n        var _a;\n        if (((_a = this.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0) {\n            return;\n        }\n        const unchangedRegions = this._unchangedRegions.get().regions;\n        for (const r of unchangedRegions) {\n            if (r.getHiddenModifiedRange(undefined).contains(lineNumber)) {\n                r.showModifiedLine(lineNumber, tx);\n                return;\n            }\n        }\n    }\n    ensureOriginalLineIsVisible(lineNumber, tx) {\n        var _a;\n        if (((_a = this.diff.get()) === null || _a === void 0 ? void 0 : _a.mappings.length) === 0) {\n            return;\n        }\n        const unchangedRegions = this._unchangedRegions.get().regions;\n        for (const r of unchangedRegions) {\n            if (r.getHiddenOriginalRange(undefined).contains(lineNumber)) {\n                r.showOriginalLine(lineNumber, tx);\n                return;\n            }\n        }\n    }\n    waitForDiff() {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield waitForState(this.isDiffUpToDate, s => s);\n        });\n    }\n    serializeState() {\n        const regions = this._unchangedRegions.get();\n        return {\n            collapsedRegions: regions.regions.map(r => ({ range: r.getHiddenModifiedRange(undefined).serialize() }))\n        };\n    }\n    restoreSerializedState(state) {\n        const ranges = state.collapsedRegions.map(r => LineRange.deserialize(r.range));\n        const regions = this._unchangedRegions.get();\n        transaction(tx => {\n            for (const r of regions.regions) {\n                for (const range of ranges) {\n                    if (r.modifiedUnchangedRange.intersect(range)) {\n                        r.setHiddenModifiedRange(range, tx);\n                        break;\n                    }\n                }\n            }\n        });\n    }\n};\nDiffEditorViewModel = __decorate([\n    __param(3, IDiffProviderFactoryService)\n], DiffEditorViewModel);\nexport { DiffEditorViewModel };\nfunction normalizeDocumentDiff(diff, original, modified) {\n    return {\n        changes: diff.changes.map(c => new DetailedLineRangeMapping(c.original, c.modified, c.innerChanges ? c.innerChanges.map(i => normalizeRangeMapping(i, original, modified)) : undefined)),\n        moves: diff.moves,\n        identical: diff.identical,\n        quitEarly: diff.quitEarly,\n    };\n}\nfunction normalizeRangeMapping(rangeMapping, original, modified) {\n    let originalRange = rangeMapping.originalRange;\n    let modifiedRange = rangeMapping.modifiedRange;\n    if ((originalRange.endColumn !== 1 || modifiedRange.endColumn !== 1) &&\n        originalRange.endColumn === original.getLineMaxColumn(originalRange.endLineNumber)\n        && modifiedRange.endColumn === modified.getLineMaxColumn(modifiedRange.endLineNumber)\n        && originalRange.endLineNumber < original.getLineCount()\n        && modifiedRange.endLineNumber < modified.getLineCount()) {\n        originalRange = originalRange.setEndPosition(originalRange.endLineNumber + 1, 1);\n        modifiedRange = modifiedRange.setEndPosition(modifiedRange.endLineNumber + 1, 1);\n    }\n    return new RangeMapping(originalRange, modifiedRange);\n}\nexport class DiffState {\n    static fromDiffResult(result) {\n        return new DiffState(result.changes.map(c => new DiffMapping(c)), result.moves || [], result.identical, result.quitEarly);\n    }\n    constructor(mappings, movedTexts, identical, quitEarly) {\n        this.mappings = mappings;\n        this.movedTexts = movedTexts;\n        this.identical = identical;\n        this.quitEarly = quitEarly;\n    }\n}\nexport class DiffMapping {\n    constructor(lineRangeMapping) {\n        this.lineRangeMapping = lineRangeMapping;\n        /*\n        readonly movedTo: MovedText | undefined,\n        readonly movedFrom: MovedText | undefined,\n\n        if (movedTo) {\n            assertFn(() =>\n                movedTo.lineRangeMapping.modifiedRange.equals(lineRangeMapping.modifiedRange)\n                && lineRangeMapping.originalRange.isEmpty\n                && !movedFrom\n            );\n        } else if (movedFrom) {\n            assertFn(() =>\n                movedFrom.lineRangeMapping.originalRange.equals(lineRangeMapping.originalRange)\n                && lineRangeMapping.modifiedRange.isEmpty\n                && !movedTo\n            );\n        }\n        */\n    }\n}\nexport class UnchangedRegion {\n    static fromDiffs(changes, originalLineCount, modifiedLineCount, minHiddenLineCount, minContext) {\n        const inversedMappings = DetailedLineRangeMapping.inverse(changes, originalLineCount, modifiedLineCount);\n        const result = [];\n        for (const mapping of inversedMappings) {\n            let origStart = mapping.original.startLineNumber;\n            let modStart = mapping.modified.startLineNumber;\n            let length = mapping.original.length;\n            const atStart = origStart === 1 && modStart === 1;\n            const atEnd = origStart + length === originalLineCount + 1 && modStart + length === modifiedLineCount + 1;\n            if ((atStart || atEnd) && length >= minContext + minHiddenLineCount) {\n                if (atStart && !atEnd) {\n                    length -= minContext;\n                }\n                if (atEnd && !atStart) {\n                    origStart += minContext;\n                    modStart += minContext;\n                    length -= minContext;\n                }\n                result.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n            }\n            else if (length >= minContext * 2 + minHiddenLineCount) {\n                origStart += minContext;\n                modStart += minContext;\n                length -= minContext * 2;\n                result.push(new UnchangedRegion(origStart, modStart, length, 0, 0));\n            }\n        }\n        return result;\n    }\n    get originalUnchangedRange() {\n        return LineRange.ofLength(this.originalLineNumber, this.lineCount);\n    }\n    get modifiedUnchangedRange() {\n        return LineRange.ofLength(this.modifiedLineNumber, this.lineCount);\n    }\n    constructor(originalLineNumber, modifiedLineNumber, lineCount, visibleLineCountTop, visibleLineCountBottom) {\n        this.originalLineNumber = originalLineNumber;\n        this.modifiedLineNumber = modifiedLineNumber;\n        this.lineCount = lineCount;\n        this._visibleLineCountTop = observableValue(this, 0);\n        this.visibleLineCountTop = this._visibleLineCountTop;\n        this._visibleLineCountBottom = observableValue(this, 0);\n        this.visibleLineCountBottom = this._visibleLineCountBottom;\n        this._shouldHideControls = derived(this, reader => /** @description isVisible */ this.visibleLineCountTop.read(reader) + this.visibleLineCountBottom.read(reader) === this.lineCount && !this.isDragged.read(reader));\n        this.isDragged = observableValue(this, false);\n        this._visibleLineCountTop.set(visibleLineCountTop, undefined);\n        this._visibleLineCountBottom.set(visibleLineCountBottom, undefined);\n    }\n    shouldHideControls(reader) {\n        return this._shouldHideControls.read(reader);\n    }\n    getHiddenOriginalRange(reader) {\n        return LineRange.ofLength(this.originalLineNumber + this._visibleLineCountTop.read(reader), this.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader));\n    }\n    getHiddenModifiedRange(reader) {\n        return LineRange.ofLength(this.modifiedLineNumber + this._visibleLineCountTop.read(reader), this.lineCount - this._visibleLineCountTop.read(reader) - this._visibleLineCountBottom.read(reader));\n    }\n    setHiddenModifiedRange(range, tx) {\n        const visibleLineCountTop = range.startLineNumber - this.modifiedLineNumber;\n        const visibleLineCountBottom = (this.modifiedLineNumber + this.lineCount) - range.endLineNumberExclusive;\n        this.setState(visibleLineCountTop, visibleLineCountBottom, tx);\n    }\n    getMaxVisibleLineCountTop() {\n        return this.lineCount - this._visibleLineCountBottom.get();\n    }\n    getMaxVisibleLineCountBottom() {\n        return this.lineCount - this._visibleLineCountTop.get();\n    }\n    showMoreAbove(count = 10, tx) {\n        const maxVisibleLineCountTop = this.getMaxVisibleLineCountTop();\n        this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + count, maxVisibleLineCountTop), tx);\n    }\n    showMoreBelow(count = 10, tx) {\n        const maxVisibleLineCountBottom = this.lineCount - this._visibleLineCountTop.get();\n        this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + count, maxVisibleLineCountBottom), tx);\n    }\n    showAll(tx) {\n        this._visibleLineCountBottom.set(this.lineCount - this._visibleLineCountTop.get(), tx);\n    }\n    showModifiedLine(lineNumber, tx) {\n        const top = lineNumber + 1 - (this.modifiedLineNumber + this._visibleLineCountTop.get());\n        const bottom = (this.modifiedLineNumber - this._visibleLineCountBottom.get() + this.lineCount) - lineNumber;\n        if (top < bottom) {\n            this._visibleLineCountTop.set(this._visibleLineCountTop.get() + top, tx);\n        }\n        else {\n            this._visibleLineCountBottom.set(this._visibleLineCountBottom.get() + bottom, tx);\n        }\n    }\n    showOriginalLine(lineNumber, tx) {\n        const top = lineNumber - this.originalLineNumber;\n        const bottom = (this.originalLineNumber + this.lineCount) - lineNumber;\n        if (top < bottom) {\n            this._visibleLineCountTop.set(Math.min(this._visibleLineCountTop.get() + bottom - top, this.getMaxVisibleLineCountTop()), tx);\n        }\n        else {\n            this._visibleLineCountBottom.set(Math.min(this._visibleLineCountBottom.get() + top - bottom, this.getMaxVisibleLineCountBottom()), tx);\n        }\n    }\n    collapseAll(tx) {\n        this._visibleLineCountTop.set(0, tx);\n        this._visibleLineCountBottom.set(0, tx);\n    }\n    setState(visibleLineCountTop, visibleLineCountBottom, tx) {\n        visibleLineCountTop = Math.max(Math.min(visibleLineCountTop, this.lineCount), 0);\n        visibleLineCountBottom = Math.max(Math.min(visibleLineCountBottom, this.lineCount - visibleLineCountTop), 0);\n        this._visibleLineCountTop.set(visibleLineCountTop, tx);\n        this._visibleLineCountBottom.set(visibleLineCountBottom, tx);\n    }\n}\nfunction applyOriginalEdits(diff, textEdits, originalTextModel, modifiedTextModel) {\n    return undefined;\n    /*\n    TODO@hediet\n    if (textEdits.length === 0) {\n        return diff;\n    }\n\n    const diff2 = flip(diff);\n    const diff3 = applyModifiedEdits(diff2, textEdits, modifiedTextModel, originalTextModel);\n    if (!diff3) {\n        return undefined;\n    }\n    return flip(diff3);*/\n}\n/*\nfunction flip(diff: IDocumentDiff): IDocumentDiff {\n    return {\n        changes: diff.changes.map(c => c.flip()),\n        moves: diff.moves.map(m => m.flip()),\n        identical: diff.identical,\n        quitEarly: diff.quitEarly,\n    };\n}\n*/\nfunction applyModifiedEdits(diff, textEdits, originalTextModel, modifiedTextModel) {\n    return undefined;\n    /*\n    TODO@hediet\n    if (textEdits.length === 0) {\n        return diff;\n    }\n    if (diff.changes.some(c => !c.innerChanges) || diff.moves.length > 0) {\n        // TODO support these cases\n        return undefined;\n    }\n\n    const changes = applyModifiedEditsToLineRangeMappings(diff.changes, textEdits, originalTextModel, modifiedTextModel);\n\n    const moves = diff.moves.map(m => {\n        const newModifiedRange = applyEditToLineRange(m.lineRangeMapping.modified, textEdits);\n        return newModifiedRange ? new MovedText(\n            new SimpleLineRangeMapping(m.lineRangeMapping.original, newModifiedRange),\n            applyModifiedEditsToLineRangeMappings(m.changes, textEdits, originalTextModel, modifiedTextModel),\n        ) : undefined;\n    }).filter(isDefined);\n\n    return {\n        identical: false,\n        quitEarly: false,\n        changes,\n        moves,\n    };*/\n}\n/*\nfunction applyEditToLineRange(range: LineRange, textEdits: TextEditInfo[]): LineRange | undefined {\n    let rangeStartLineNumber = range.startLineNumber;\n    let rangeEndLineNumberEx = range.endLineNumberExclusive;\n\n    for (let i = textEdits.length - 1; i >= 0; i--) {\n        const textEdit = textEdits[i];\n        const textEditStartLineNumber = lengthGetLineCount(textEdit.startOffset) + 1;\n        const textEditEndLineNumber = lengthGetLineCount(textEdit.endOffset) + 1;\n        const newLengthLineCount = lengthGetLineCount(textEdit.newLength);\n        const delta = newLengthLineCount - (textEditEndLineNumber - textEditStartLineNumber);\n\n        if (textEditEndLineNumber < rangeStartLineNumber) {\n            // the text edit is before us\n            rangeStartLineNumber += delta;\n            rangeEndLineNumberEx += delta;\n        } else if (textEditStartLineNumber > rangeEndLineNumberEx) {\n            // the text edit is after us\n            // NOOP\n        } else if (textEditStartLineNumber < rangeStartLineNumber && rangeEndLineNumberEx < textEditEndLineNumber) {\n            // the range is fully contained in the text edit\n            return undefined;\n        } else if (textEditStartLineNumber < rangeStartLineNumber && textEditEndLineNumber <= rangeEndLineNumberEx) {\n            // the text edit ends inside our range\n            rangeStartLineNumber = textEditEndLineNumber + 1;\n            rangeStartLineNumber += delta;\n            rangeEndLineNumberEx += delta;\n        } else if (rangeStartLineNumber <= textEditStartLineNumber && textEditEndLineNumber < rangeStartLineNumber) {\n            // the text edit starts inside our range\n            rangeEndLineNumberEx = textEditStartLineNumber;\n        } else {\n            rangeEndLineNumberEx += delta;\n        }\n    }\n\n    return new LineRange(rangeStartLineNumber, rangeEndLineNumberEx);\n}\n\nfunction applyModifiedEditsToLineRangeMappings(changes: readonly LineRangeMapping[], textEdits: TextEditInfo[], originalTextModel: ITextModel, modifiedTextModel: ITextModel): LineRangeMapping[] {\n    const diffTextEdits = changes.flatMap(c => c.innerChanges!.map(c => new TextEditInfo(\n        positionToLength(c.originalRange.getStartPosition()),\n        positionToLength(c.originalRange.getEndPosition()),\n        lengthOfRange(c.modifiedRange).toLength(),\n    )));\n\n    const combined = combineTextEditInfos(diffTextEdits, textEdits);\n\n    let lastOriginalEndOffset = lengthZero;\n    let lastModifiedEndOffset = lengthZero;\n    const rangeMappings = combined.map(c => {\n        const modifiedStartOffset = lengthAdd(lastModifiedEndOffset, lengthDiffNonNegative(lastOriginalEndOffset, c.startOffset));\n        lastOriginalEndOffset = c.endOffset;\n        lastModifiedEndOffset = lengthAdd(modifiedStartOffset, c.newLength);\n\n        return new RangeMapping(\n            Range.fromPositions(lengthToPosition(c.startOffset), lengthToPosition(c.endOffset)),\n            Range.fromPositions(lengthToPosition(modifiedStartOffset), lengthToPosition(lastModifiedEndOffset)),\n        );\n    });\n\n    const newChanges = lineRangeMappingFromRangeMappings(\n        rangeMappings,\n        originalTextModel.getLinesContent(),\n        modifiedTextModel.getLinesContent(),\n    );\n    return newChanges;\n}\n*/\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { addStandardDisposableListener, getDomNodePagePosition } from '../../../../base/browser/dom.js';\nimport { Action } from '../../../../base/common/actions.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { isIOS } from '../../../../base/common/platform.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { localize } from '../../../../nls.js';\nexport class InlineDiffDeletedCodeMargin extends Disposable {\n    get visibility() {\n        return this._visibility;\n    }\n    set visibility(_visibility) {\n        if (this._visibility !== _visibility) {\n            this._visibility = _visibility;\n            this._diffActions.style.visibility = _visibility ? 'visible' : 'hidden';\n        }\n    }\n    constructor(_getViewZoneId, _marginDomNode, _modifiedEditor, _diff, _editor, _viewLineCounts, _originalTextModel, _contextMenuService, _clipboardService) {\n        super();\n        this._getViewZoneId = _getViewZoneId;\n        this._marginDomNode = _marginDomNode;\n        this._modifiedEditor = _modifiedEditor;\n        this._diff = _diff;\n        this._editor = _editor;\n        this._viewLineCounts = _viewLineCounts;\n        this._originalTextModel = _originalTextModel;\n        this._contextMenuService = _contextMenuService;\n        this._clipboardService = _clipboardService;\n        this._visibility = false;\n        // make sure the diff margin shows above overlay.\n        this._marginDomNode.style.zIndex = '10';\n        this._diffActions = document.createElement('div');\n        this._diffActions.className = ThemeIcon.asClassName(Codicon.lightBulb) + ' lightbulb-glyph';\n        this._diffActions.style.position = 'absolute';\n        const lineHeight = this._modifiedEditor.getOption(66 /* EditorOption.lineHeight */);\n        this._diffActions.style.right = '0px';\n        this._diffActions.style.visibility = 'hidden';\n        this._diffActions.style.height = `${lineHeight}px`;\n        this._diffActions.style.lineHeight = `${lineHeight}px`;\n        this._marginDomNode.appendChild(this._diffActions);\n        let currentLineNumberOffset = 0;\n        const useShadowDOM = _modifiedEditor.getOption(126 /* EditorOption.useShadowDOM */) && !isIOS; // Do not use shadow dom on IOS #122035\n        const showContextMenu = (x, y) => {\n            var _a;\n            this._contextMenuService.showContextMenu({\n                domForShadowRoot: useShadowDOM ? (_a = _modifiedEditor.getDomNode()) !== null && _a !== void 0 ? _a : undefined : undefined,\n                getAnchor: () => ({ x, y }),\n                getActions: () => {\n                    const actions = [];\n                    const isDeletion = _diff.modified.isEmpty;\n                    // default action\n                    actions.push(new Action('diff.clipboard.copyDeletedContent', isDeletion\n                        ? (_diff.original.length > 1\n                            ? localize('diff.clipboard.copyDeletedLinesContent.label', \"Copy deleted lines\")\n                            : localize('diff.clipboard.copyDeletedLinesContent.single.label', \"Copy deleted line\"))\n                        : (_diff.original.length > 1\n                            ? localize('diff.clipboard.copyChangedLinesContent.label', \"Copy changed lines\")\n                            : localize('diff.clipboard.copyChangedLinesContent.single.label', \"Copy changed line\")), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                        const originalText = this._originalTextModel.getValueInRange(_diff.original.toExclusiveRange());\n                        yield this._clipboardService.writeText(originalText);\n                    })));\n                    if (_diff.original.length > 1) {\n                        actions.push(new Action('diff.clipboard.copyDeletedLineContent', isDeletion\n                            ? localize('diff.clipboard.copyDeletedLineContent.label', \"Copy deleted line ({0})\", _diff.original.startLineNumber + currentLineNumberOffset)\n                            : localize('diff.clipboard.copyChangedLineContent.label', \"Copy changed line ({0})\", _diff.original.startLineNumber + currentLineNumberOffset), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                            let lineContent = this._originalTextModel.getLineContent(_diff.original.startLineNumber + currentLineNumberOffset);\n                            if (lineContent === '') {\n                                // empty line -> new line\n                                const eof = this._originalTextModel.getEndOfLineSequence();\n                                lineContent = eof === 0 /* EndOfLineSequence.LF */ ? '\\n' : '\\r\\n';\n                            }\n                            yield this._clipboardService.writeText(lineContent);\n                        })));\n                    }\n                    const readOnly = _modifiedEditor.getOption(90 /* EditorOption.readOnly */);\n                    if (!readOnly) {\n                        actions.push(new Action('diff.inline.revertChange', localize('diff.inline.revertChange.label', \"Revert this change\"), undefined, true, () => __awaiter(this, void 0, void 0, function* () {\n                            this._editor.revert(this._diff);\n                        })));\n                    }\n                    return actions;\n                },\n                autoSelectFirstItem: true\n            });\n        };\n        this._register(addStandardDisposableListener(this._diffActions, 'mousedown', e => {\n            const { top, height } = getDomNodePagePosition(this._diffActions);\n            const pad = Math.floor(lineHeight / 3);\n            e.preventDefault();\n            showContextMenu(e.posx, top + height + pad);\n        }));\n        this._register(_modifiedEditor.onMouseMove((e) => {\n            if ((e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) && e.target.detail.viewZoneId === this._getViewZoneId()) {\n                currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                this.visibility = true;\n            }\n            else {\n                this.visibility = false;\n            }\n        }));\n        this._register(_modifiedEditor.onMouseDown((e) => {\n            if (!e.event.rightButton) {\n                return;\n            }\n            if (e.target.type === 8 /* MouseTargetType.CONTENT_VIEW_ZONE */ || e.target.type === 5 /* MouseTargetType.GUTTER_VIEW_ZONE */) {\n                const viewZoneId = e.target.detail.viewZoneId;\n                if (viewZoneId === this._getViewZoneId()) {\n                    e.event.preventDefault();\n                    currentLineNumberOffset = this._updateLightBulbPosition(this._marginDomNode, e.event.browserEvent.y, lineHeight);\n                    showContextMenu(e.event.posx, e.event.posy + lineHeight);\n                }\n            }\n        }));\n    }\n    _updateLightBulbPosition(marginDomNode, y, lineHeight) {\n        const { top } = getDomNodePagePosition(marginDomNode);\n        const offset = y - top;\n        const lineNumberOffset = Math.floor(offset / lineHeight);\n        const newTop = lineNumberOffset * lineHeight;\n        this._diffActions.style.top = `${newTop}px`;\n        if (this._viewLineCounts) {\n            let acc = 0;\n            for (let i = 0; i < this._viewLineCounts.length; i++) {\n                acc += this._viewLineCounts[i];\n                if (lineNumberOffset < acc) {\n                    return i;\n                }\n            }\n        }\n        return lineNumberOffset;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createTrustedTypesPolicy } from '../../../../base/browser/trustedTypes.js';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { EditorFontLigatures } from '../../../common/config/editorOptions.js';\nimport { StringBuilder } from '../../../common/core/stringBuilder.js';\nimport { LineDecoration } from '../../../common/viewLayout/lineDecorations.js';\nimport { RenderLineInput, renderViewLine } from '../../../common/viewLayout/viewLineRenderer.js';\nimport { ViewLineRenderingData } from '../../../common/viewModel.js';\nconst ttPolicy = createTrustedTypesPolicy('diffEditorWidget', { createHTML: value => value });\nexport function renderLines(source, options, decorations, domNode) {\n    applyFontInfo(domNode, options.fontInfo);\n    const hasCharChanges = (decorations.length > 0);\n    const sb = new StringBuilder(10000);\n    let maxCharsPerLine = 0;\n    let renderedLineCount = 0;\n    const viewLineCounts = [];\n    for (let lineIndex = 0; lineIndex < source.lineTokens.length; lineIndex++) {\n        const lineNumber = lineIndex + 1;\n        const lineTokens = source.lineTokens[lineIndex];\n        const lineBreakData = source.lineBreakData[lineIndex];\n        const actualDecorations = LineDecoration.filter(decorations, lineNumber, 1, Number.MAX_SAFE_INTEGER);\n        if (lineBreakData) {\n            let lastBreakOffset = 0;\n            for (const breakOffset of lineBreakData.breakOffsets) {\n                const viewLineTokens = lineTokens.sliceAndInflate(lastBreakOffset, breakOffset, 0);\n                maxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(renderedLineCount, viewLineTokens, LineDecoration.extractWrapped(actualDecorations, lastBreakOffset, breakOffset), hasCharChanges, source.mightContainNonBasicASCII, source.mightContainRTL, options, sb));\n                renderedLineCount++;\n                lastBreakOffset = breakOffset;\n            }\n            viewLineCounts.push(lineBreakData.breakOffsets.length);\n        }\n        else {\n            viewLineCounts.push(1);\n            maxCharsPerLine = Math.max(maxCharsPerLine, renderOriginalLine(renderedLineCount, lineTokens, actualDecorations, hasCharChanges, source.mightContainNonBasicASCII, source.mightContainRTL, options, sb));\n            renderedLineCount++;\n        }\n    }\n    maxCharsPerLine += options.scrollBeyondLastColumn;\n    const html = sb.build();\n    const trustedhtml = ttPolicy ? ttPolicy.createHTML(html) : html;\n    domNode.innerHTML = trustedhtml;\n    const minWidthInPx = (maxCharsPerLine * options.typicalHalfwidthCharacterWidth);\n    return {\n        heightInLines: renderedLineCount,\n        minWidthInPx,\n        viewLineCounts,\n    };\n}\nexport class LineSource {\n    constructor(lineTokens, lineBreakData, mightContainNonBasicASCII, mightContainRTL) {\n        this.lineTokens = lineTokens;\n        this.lineBreakData = lineBreakData;\n        this.mightContainNonBasicASCII = mightContainNonBasicASCII;\n        this.mightContainRTL = mightContainRTL;\n    }\n}\nexport class RenderOptions {\n    static fromEditor(editor) {\n        var _a;\n        const modifiedEditorOptions = editor.getOptions();\n        const fontInfo = modifiedEditorOptions.get(50 /* EditorOption.fontInfo */);\n        const layoutInfo = modifiedEditorOptions.get(143 /* EditorOption.layoutInfo */);\n        return new RenderOptions(((_a = editor.getModel()) === null || _a === void 0 ? void 0 : _a.getOptions().tabSize) || 0, fontInfo, modifiedEditorOptions.get(33 /* EditorOption.disableMonospaceOptimizations */), fontInfo.typicalHalfwidthCharacterWidth, modifiedEditorOptions.get(103 /* EditorOption.scrollBeyondLastColumn */), modifiedEditorOptions.get(66 /* EditorOption.lineHeight */), layoutInfo.decorationsWidth, modifiedEditorOptions.get(116 /* EditorOption.stopRenderingLineAfter */), modifiedEditorOptions.get(98 /* EditorOption.renderWhitespace */), modifiedEditorOptions.get(93 /* EditorOption.renderControlCharacters */), modifiedEditorOptions.get(51 /* EditorOption.fontLigatures */));\n    }\n    constructor(tabSize, fontInfo, disableMonospaceOptimizations, typicalHalfwidthCharacterWidth, scrollBeyondLastColumn, lineHeight, lineDecorationsWidth, stopRenderingLineAfter, renderWhitespace, renderControlCharacters, fontLigatures) {\n        this.tabSize = tabSize;\n        this.fontInfo = fontInfo;\n        this.disableMonospaceOptimizations = disableMonospaceOptimizations;\n        this.typicalHalfwidthCharacterWidth = typicalHalfwidthCharacterWidth;\n        this.scrollBeyondLastColumn = scrollBeyondLastColumn;\n        this.lineHeight = lineHeight;\n        this.lineDecorationsWidth = lineDecorationsWidth;\n        this.stopRenderingLineAfter = stopRenderingLineAfter;\n        this.renderWhitespace = renderWhitespace;\n        this.renderControlCharacters = renderControlCharacters;\n        this.fontLigatures = fontLigatures;\n    }\n}\nfunction renderOriginalLine(viewLineIdx, lineTokens, decorations, hasCharChanges, mightContainNonBasicASCII, mightContainRTL, options, sb) {\n    sb.appendString('<div class=\"view-line');\n    if (!hasCharChanges) {\n        // No char changes\n        sb.appendString(' char-delete');\n    }\n    sb.appendString('\" style=\"top:');\n    sb.appendString(String(viewLineIdx * options.lineHeight));\n    sb.appendString('px;width:1000000px;\">');\n    const lineContent = lineTokens.getLineContent();\n    const isBasicASCII = ViewLineRenderingData.isBasicASCII(lineContent, mightContainNonBasicASCII);\n    const containsRTL = ViewLineRenderingData.containsRTL(lineContent, isBasicASCII, mightContainRTL);\n    const output = renderViewLine(new RenderLineInput((options.fontInfo.isMonospace && !options.disableMonospaceOptimizations), options.fontInfo.canUseHalfwidthRightwardsArrow, lineContent, false, isBasicASCII, containsRTL, 0, lineTokens, decorations, options.tabSize, 0, options.fontInfo.spaceWidth, options.fontInfo.middotWidth, options.fontInfo.wsmiddotWidth, options.stopRenderingLineAfter, options.renderWhitespace, options.renderControlCharacters, options.fontLigatures !== EditorFontLigatures.OFF, null // Send no selections, original line cannot be selected\n    ), sb);\n    sb.appendString('</div>');\n    return output.characterMapping.getHorizontalOffset(output.characterMapping.length);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { $ } from '../../../../base/browser/dom.js';\nimport { ArrayQueue } from '../../../../base/common/arrays.js';\nimport { RunOnceScheduler } from '../../../../base/common/async.js';\nimport { Codicon } from '../../../../base/common/codicons.js';\nimport { Disposable, DisposableStore, toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableFromEvent, observableValue } from '../../../../base/common/observable.js';\nimport { ThemeIcon } from '../../../../base/common/themables.js';\nimport { assertIsDefined } from '../../../../base/common/types.js';\nimport { applyFontInfo } from '../../config/domFontInfo.js';\nimport { StableEditorScrollState } from '../../stableEditorScroll.js';\nimport { diffDeleteDecoration, diffRemoveIcon } from './decorations.js';\nimport { DiffMapping } from './diffEditorViewModel.js';\nimport { InlineDiffDeletedCodeMargin } from './inlineDiffDeletedCodeMargin.js';\nimport { LineSource, RenderOptions, renderLines } from './renderLines.js';\nimport { animatedObservable, joinCombine } from './utils.js';\nimport { LineRange } from '../../../common/core/lineRange.js';\nimport { Position } from '../../../common/core/position.js';\nimport { InlineDecoration } from '../../../common/viewModel.js';\nimport { IClipboardService } from '../../../../platform/clipboard/common/clipboardService.js';\nimport { IContextMenuService } from '../../../../platform/contextview/browser/contextView.js';\n/**\n * Ensures both editors have the same height by aligning unchanged lines.\n * In inline view mode, inserts viewzones to show deleted code from the original text model in the modified code editor.\n * Synchronizes scrolling.\n */\nlet ViewZoneManager = class ViewZoneManager extends Disposable {\n    constructor(_editors, _diffModel, _options, _diffEditorWidget, _canIgnoreViewZoneUpdateEvent, _clipboardService, _contextMenuService) {\n        super();\n        this._editors = _editors;\n        this._diffModel = _diffModel;\n        this._options = _options;\n        this._diffEditorWidget = _diffEditorWidget;\n        this._canIgnoreViewZoneUpdateEvent = _canIgnoreViewZoneUpdateEvent;\n        this._clipboardService = _clipboardService;\n        this._contextMenuService = _contextMenuService;\n        this._originalTopPadding = observableValue(this, 0);\n        this._originalScrollOffset = observableValue(this, 0);\n        this._originalScrollOffsetAnimated = animatedObservable(this._originalScrollOffset, this._store);\n        this._modifiedTopPadding = observableValue(this, 0);\n        this._modifiedScrollOffset = observableValue(this, 0);\n        this._modifiedScrollOffsetAnimated = animatedObservable(this._modifiedScrollOffset, this._store);\n        let isChangingViewZones = false;\n        const state = observableValue('state', 0);\n        const updateImmediately = this._register(new RunOnceScheduler(() => {\n            state.set(state.get() + 1, undefined);\n        }, 0));\n        this._register(this._editors.original.onDidChangeViewZones((_args) => { if (!isChangingViewZones && !this._canIgnoreViewZoneUpdateEvent()) {\n            updateImmediately.schedule();\n        } }));\n        this._register(this._editors.modified.onDidChangeViewZones((_args) => { if (!isChangingViewZones && !this._canIgnoreViewZoneUpdateEvent()) {\n            updateImmediately.schedule();\n        } }));\n        this._register(this._editors.original.onDidChangeConfiguration((args) => {\n            if (args.hasChanged(144 /* EditorOption.wrappingInfo */) || args.hasChanged(66 /* EditorOption.lineHeight */)) {\n                updateImmediately.schedule();\n            }\n        }));\n        this._register(this._editors.modified.onDidChangeConfiguration((args) => {\n            if (args.hasChanged(144 /* EditorOption.wrappingInfo */) || args.hasChanged(66 /* EditorOption.lineHeight */)) {\n                updateImmediately.schedule();\n            }\n        }));\n        const originalModelTokenizationCompleted = this._diffModel.map(m => m ? observableFromEvent(m.model.original.onDidChangeTokens, () => m.model.original.tokenization.backgroundTokenizationState === 2 /* BackgroundTokenizationState.Completed */) : undefined).map((m, reader) => m === null || m === void 0 ? void 0 : m.read(reader));\n        const alignmentViewZoneIdsOrig = new Set();\n        const alignmentViewZoneIdsMod = new Set();\n        const alignments = derived((reader) => {\n            /** @description alignments */\n            const diffModel = this._diffModel.read(reader);\n            const diff = diffModel === null || diffModel === void 0 ? void 0 : diffModel.diff.read(reader);\n            if (!diffModel || !diff) {\n                return null;\n            }\n            state.read(reader);\n            const renderSideBySide = this._options.renderSideBySide.read(reader);\n            const innerHunkAlignment = renderSideBySide;\n            return computeRangeAlignment(this._editors.original, this._editors.modified, diff.mappings, alignmentViewZoneIdsOrig, alignmentViewZoneIdsMod, innerHunkAlignment);\n        });\n        const alignmentsSyncedMovedText = derived((reader) => {\n            var _a;\n            /** @description alignments */\n            const syncedMovedText = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader);\n            if (!syncedMovedText) {\n                return null;\n            }\n            state.read(reader);\n            const mappings = syncedMovedText.changes.map(c => new DiffMapping(c));\n            // TODO dont include alignments outside syncedMovedText\n            return computeRangeAlignment(this._editors.original, this._editors.modified, mappings, alignmentViewZoneIdsOrig, alignmentViewZoneIdsMod, true);\n        });\n        function createFakeLinesDiv() {\n            const r = document.createElement('div');\n            r.className = 'diagonal-fill';\n            return r;\n        }\n        const alignmentViewZonesDisposables = this._register(new DisposableStore());\n        const alignmentViewZones = derived((reader) => {\n            var _a, _b, _c, _d, _e, _f, _g, _h;\n            /** @description alignment viewzones */\n            alignmentViewZonesDisposables.clear();\n            const alignmentsVal = alignments.read(reader) || [];\n            const origViewZones = [];\n            const modViewZones = [];\n            const modifiedTopPaddingVal = this._modifiedTopPadding.read(reader);\n            if (modifiedTopPaddingVal > 0) {\n                modViewZones.push({\n                    afterLineNumber: 0,\n                    domNode: document.createElement('div'),\n                    heightInPx: modifiedTopPaddingVal,\n                    showInHiddenAreas: true,\n                    suppressMouseDown: true,\n                });\n            }\n            const originalTopPaddingVal = this._originalTopPadding.read(reader);\n            if (originalTopPaddingVal > 0) {\n                origViewZones.push({\n                    afterLineNumber: 0,\n                    domNode: document.createElement('div'),\n                    heightInPx: originalTopPaddingVal,\n                    showInHiddenAreas: true,\n                    suppressMouseDown: true,\n                });\n            }\n            const renderSideBySide = this._options.renderSideBySide.read(reader);\n            const deletedCodeLineBreaksComputer = !renderSideBySide ? (_a = this._editors.modified._getViewModel()) === null || _a === void 0 ? void 0 : _a.createLineBreaksComputer() : undefined;\n            if (deletedCodeLineBreaksComputer) {\n                for (const a of alignmentsVal) {\n                    if (a.diff) {\n                        for (let i = a.originalRange.startLineNumber; i < a.originalRange.endLineNumberExclusive; i++) {\n                            deletedCodeLineBreaksComputer === null || deletedCodeLineBreaksComputer === void 0 ? void 0 : deletedCodeLineBreaksComputer.addRequest(this._editors.original.getModel().getLineContent(i), null, null);\n                        }\n                    }\n                }\n            }\n            const lineBreakData = (_b = deletedCodeLineBreaksComputer === null || deletedCodeLineBreaksComputer === void 0 ? void 0 : deletedCodeLineBreaksComputer.finalize()) !== null && _b !== void 0 ? _b : [];\n            let lineBreakDataIdx = 0;\n            const modLineHeight = this._editors.modified.getOption(66 /* EditorOption.lineHeight */);\n            const syncedMovedText = (_c = this._diffModel.read(reader)) === null || _c === void 0 ? void 0 : _c.movedTextToCompare.read(reader);\n            const mightContainNonBasicASCII = (_e = (_d = this._editors.original.getModel()) === null || _d === void 0 ? void 0 : _d.mightContainNonBasicASCII()) !== null && _e !== void 0 ? _e : false;\n            const mightContainRTL = (_g = (_f = this._editors.original.getModel()) === null || _f === void 0 ? void 0 : _f.mightContainRTL()) !== null && _g !== void 0 ? _g : false;\n            const renderOptions = RenderOptions.fromEditor(this._editors.modified);\n            for (const a of alignmentsVal) {\n                if (a.diff && !renderSideBySide) {\n                    if (!a.originalRange.isEmpty) {\n                        originalModelTokenizationCompleted.read(reader); // Update view-zones once tokenization completes\n                        const deletedCodeDomNode = document.createElement('div');\n                        deletedCodeDomNode.classList.add('view-lines', 'line-delete', 'monaco-mouse-cursor-text');\n                        const source = new LineSource(a.originalRange.mapToLineArray(l => this._editors.original.getModel().tokenization.getLineTokens(l)), a.originalRange.mapToLineArray(_ => lineBreakData[lineBreakDataIdx++]), mightContainNonBasicASCII, mightContainRTL);\n                        const decorations = [];\n                        for (const i of a.diff.innerChanges || []) {\n                            decorations.push(new InlineDecoration(i.originalRange.delta(-(a.diff.original.startLineNumber - 1)), diffDeleteDecoration.className, 0 /* InlineDecorationType.Regular */));\n                        }\n                        const result = renderLines(source, renderOptions, decorations, deletedCodeDomNode);\n                        const marginDomNode = document.createElement('div');\n                        marginDomNode.className = 'inline-deleted-margin-view-zone';\n                        applyFontInfo(marginDomNode, renderOptions.fontInfo);\n                        if (this._options.renderIndicators.read(reader)) {\n                            for (let i = 0; i < result.heightInLines; i++) {\n                                const marginElement = document.createElement('div');\n                                marginElement.className = `delete-sign ${ThemeIcon.asClassName(diffRemoveIcon)}`;\n                                marginElement.setAttribute('style', `position:absolute;top:${i * modLineHeight}px;width:${renderOptions.lineDecorationsWidth}px;height:${modLineHeight}px;right:0;`);\n                                marginDomNode.appendChild(marginElement);\n                            }\n                        }\n                        let zoneId = undefined;\n                        alignmentViewZonesDisposables.add(new InlineDiffDeletedCodeMargin(() => assertIsDefined(zoneId), marginDomNode, this._editors.modified, a.diff, this._diffEditorWidget, result.viewLineCounts, this._editors.original.getModel(), this._contextMenuService, this._clipboardService));\n                        for (let i = 0; i < result.viewLineCounts.length; i++) {\n                            const count = result.viewLineCounts[i];\n                            // Account for wrapped lines in the (collapsed) original editor (which doesn't wrap lines).\n                            if (count > 1) {\n                                origViewZones.push({\n                                    afterLineNumber: a.originalRange.startLineNumber + i,\n                                    domNode: createFakeLinesDiv(),\n                                    heightInPx: (count - 1) * modLineHeight,\n                                    showInHiddenAreas: true,\n                                    suppressMouseDown: true,\n                                });\n                            }\n                        }\n                        modViewZones.push({\n                            afterLineNumber: a.modifiedRange.startLineNumber - 1,\n                            domNode: deletedCodeDomNode,\n                            heightInPx: result.heightInLines * modLineHeight,\n                            minWidthInPx: result.minWidthInPx,\n                            marginDomNode,\n                            setZoneId(id) { zoneId = id; },\n                            showInHiddenAreas: true,\n                            suppressMouseDown: true,\n                        });\n                    }\n                    const marginDomNode = document.createElement('div');\n                    marginDomNode.className = 'gutter-delete';\n                    origViewZones.push({\n                        afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: a.modifiedHeightInPx,\n                        marginDomNode,\n                        showInHiddenAreas: true,\n                        suppressMouseDown: true,\n                    });\n                }\n                else {\n                    const delta = a.modifiedHeightInPx - a.originalHeightInPx;\n                    if (delta > 0) {\n                        if (syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.original.delta(-1).deltaLength(2).contains(a.originalRange.endLineNumberExclusive - 1)) {\n                            continue;\n                        }\n                        origViewZones.push({\n                            afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                            domNode: createFakeLinesDiv(),\n                            heightInPx: delta,\n                            showInHiddenAreas: true,\n                            suppressMouseDown: true,\n                        });\n                    }\n                    else {\n                        if (syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.modified.delta(-1).deltaLength(2).contains(a.modifiedRange.endLineNumberExclusive - 1)) {\n                            continue;\n                        }\n                        function createViewZoneMarginArrow() {\n                            const arrow = document.createElement('div');\n                            arrow.className = 'arrow-revert-change ' + ThemeIcon.asClassName(Codicon.arrowRight);\n                            return $('div', {}, arrow);\n                        }\n                        let marginDomNode = undefined;\n                        if (a.diff && a.diff.modified.isEmpty && this._options.shouldRenderRevertArrows.read(reader)) {\n                            marginDomNode = createViewZoneMarginArrow();\n                        }\n                        modViewZones.push({\n                            afterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n                            domNode: createFakeLinesDiv(),\n                            heightInPx: -delta,\n                            marginDomNode,\n                            showInHiddenAreas: true,\n                            suppressMouseDown: true,\n                        });\n                    }\n                }\n            }\n            for (const a of (_h = alignmentsSyncedMovedText.read(reader)) !== null && _h !== void 0 ? _h : []) {\n                if (!(syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.original.intersect(a.originalRange))\n                    || !(syncedMovedText === null || syncedMovedText === void 0 ? void 0 : syncedMovedText.lineRangeMapping.modified.intersect(a.modifiedRange))) {\n                    // ignore unrelated alignments outside the synced moved text\n                    continue;\n                }\n                const delta = a.modifiedHeightInPx - a.originalHeightInPx;\n                if (delta > 0) {\n                    origViewZones.push({\n                        afterLineNumber: a.originalRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: delta,\n                        showInHiddenAreas: true,\n                        suppressMouseDown: true,\n                    });\n                }\n                else {\n                    modViewZones.push({\n                        afterLineNumber: a.modifiedRange.endLineNumberExclusive - 1,\n                        domNode: createFakeLinesDiv(),\n                        heightInPx: -delta,\n                        showInHiddenAreas: true,\n                        suppressMouseDown: true,\n                    });\n                }\n            }\n            return { orig: origViewZones, mod: modViewZones };\n        });\n        this._register(autorunWithStore((reader) => {\n            /** @description alignment viewzones */\n            const scrollState = StableEditorScrollState.capture(this._editors.modified);\n            const alignmentViewZones_ = alignmentViewZones.read(reader);\n            isChangingViewZones = true;\n            this._editors.original.changeViewZones((aOrig) => {\n                for (const id of alignmentViewZoneIdsOrig) {\n                    aOrig.removeZone(id);\n                }\n                alignmentViewZoneIdsOrig.clear();\n                for (const z of alignmentViewZones_.orig) {\n                    const id = aOrig.addZone(z);\n                    if (z.setZoneId) {\n                        z.setZoneId(id);\n                    }\n                    alignmentViewZoneIdsOrig.add(id);\n                }\n            });\n            this._editors.modified.changeViewZones(aMod => {\n                for (const id of alignmentViewZoneIdsMod) {\n                    aMod.removeZone(id);\n                }\n                alignmentViewZoneIdsMod.clear();\n                for (const z of alignmentViewZones_.mod) {\n                    const id = aMod.addZone(z);\n                    if (z.setZoneId) {\n                        z.setZoneId(id);\n                    }\n                    alignmentViewZoneIdsMod.add(id);\n                }\n            });\n            isChangingViewZones = false;\n            scrollState.restore(this._editors.modified);\n        }));\n        this._register(toDisposable(() => {\n            this._editors.original.changeViewZones((a) => {\n                for (const id of alignmentViewZoneIdsOrig) {\n                    a.removeZone(id);\n                }\n                alignmentViewZoneIdsOrig.clear();\n            });\n            this._editors.modified.changeViewZones((a) => {\n                for (const id of alignmentViewZoneIdsMod) {\n                    a.removeZone(id);\n                }\n                alignmentViewZoneIdsMod.clear();\n            });\n        }));\n        let ignoreChange = false;\n        this._register(this._editors.original.onDidScrollChange(e => {\n            if (e.scrollLeftChanged && !ignoreChange) {\n                ignoreChange = true;\n                this._editors.modified.setScrollLeft(e.scrollLeft);\n                ignoreChange = false;\n            }\n        }));\n        this._register(this._editors.modified.onDidScrollChange(e => {\n            if (e.scrollLeftChanged && !ignoreChange) {\n                ignoreChange = true;\n                this._editors.original.setScrollLeft(e.scrollLeft);\n                ignoreChange = false;\n            }\n        }));\n        this._originalScrollTop = observableFromEvent(this._editors.original.onDidScrollChange, () => this._editors.original.getScrollTop());\n        this._modifiedScrollTop = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\n        // origExtraHeight + origOffset - origScrollTop = modExtraHeight + modOffset - modScrollTop\n        // origScrollTop = origExtraHeight + origOffset - modExtraHeight - modOffset + modScrollTop\n        // modScrollTop = modExtraHeight + modOffset - origExtraHeight - origOffset + origScrollTop\n        // origOffset - modOffset = heightOfLines(1..Y) - heightOfLines(1..X)\n        // origScrollTop >= 0, modScrollTop >= 0\n        this._register(autorun(reader => {\n            /** @description update scroll modified */\n            const newScrollTopModified = this._originalScrollTop.read(reader)\n                - (this._originalScrollOffsetAnimated.get() - this._modifiedScrollOffsetAnimated.read(reader))\n                - (this._originalTopPadding.get() - this._modifiedTopPadding.read(reader));\n            if (newScrollTopModified !== this._editors.modified.getScrollTop()) {\n                this._editors.modified.setScrollTop(newScrollTopModified, 1 /* ScrollType.Immediate */);\n            }\n        }));\n        this._register(autorun(reader => {\n            /** @description update scroll original */\n            const newScrollTopOriginal = this._modifiedScrollTop.read(reader)\n                - (this._modifiedScrollOffsetAnimated.get() - this._originalScrollOffsetAnimated.read(reader))\n                - (this._modifiedTopPadding.get() - this._originalTopPadding.read(reader));\n            if (newScrollTopOriginal !== this._editors.original.getScrollTop()) {\n                this._editors.original.setScrollTop(newScrollTopOriginal, 1 /* ScrollType.Immediate */);\n            }\n        }));\n        this._register(autorun(reader => {\n            var _a;\n            /** @description update editor top offsets */\n            const m = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader);\n            let deltaOrigToMod = 0;\n            if (m) {\n                const trueTopOriginal = this._editors.original.getTopForLineNumber(m.lineRangeMapping.original.startLineNumber, true) - this._originalTopPadding.get();\n                const trueTopModified = this._editors.modified.getTopForLineNumber(m.lineRangeMapping.modified.startLineNumber, true) - this._modifiedTopPadding.get();\n                deltaOrigToMod = trueTopModified - trueTopOriginal;\n            }\n            if (deltaOrigToMod > 0) {\n                this._modifiedTopPadding.set(0, undefined);\n                this._originalTopPadding.set(deltaOrigToMod, undefined);\n            }\n            else if (deltaOrigToMod < 0) {\n                this._modifiedTopPadding.set(-deltaOrigToMod, undefined);\n                this._originalTopPadding.set(0, undefined);\n            }\n            else {\n                setTimeout(() => {\n                    this._modifiedTopPadding.set(0, undefined);\n                    this._originalTopPadding.set(0, undefined);\n                }, 400);\n            }\n            if (this._editors.modified.hasTextFocus()) {\n                this._originalScrollOffset.set(this._modifiedScrollOffset.get() - deltaOrigToMod, undefined, true);\n            }\n            else {\n                this._modifiedScrollOffset.set(this._originalScrollOffset.get() + deltaOrigToMod, undefined, true);\n            }\n        }));\n    }\n};\nViewZoneManager = __decorate([\n    __param(5, IClipboardService),\n    __param(6, IContextMenuService)\n], ViewZoneManager);\nexport { ViewZoneManager };\nfunction computeRangeAlignment(originalEditor, modifiedEditor, diffs, originalEditorAlignmentViewZones, modifiedEditorAlignmentViewZones, innerHunkAlignment) {\n    const originalLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(originalEditor, originalEditorAlignmentViewZones));\n    const modifiedLineHeightOverrides = new ArrayQueue(getAdditionalLineHeights(modifiedEditor, modifiedEditorAlignmentViewZones));\n    const origLineHeight = originalEditor.getOption(66 /* EditorOption.lineHeight */);\n    const modLineHeight = modifiedEditor.getOption(66 /* EditorOption.lineHeight */);\n    const result = [];\n    let lastOriginalLineNumber = 0;\n    let lastModifiedLineNumber = 0;\n    function handleAlignmentsOutsideOfDiffs(untilOriginalLineNumberExclusive, untilModifiedLineNumberExclusive) {\n        while (true) {\n            let origNext = originalLineHeightOverrides.peek();\n            let modNext = modifiedLineHeightOverrides.peek();\n            if (origNext && origNext.lineNumber >= untilOriginalLineNumberExclusive) {\n                origNext = undefined;\n            }\n            if (modNext && modNext.lineNumber >= untilModifiedLineNumberExclusive) {\n                modNext = undefined;\n            }\n            if (!origNext && !modNext) {\n                break;\n            }\n            const distOrig = origNext ? origNext.lineNumber - lastOriginalLineNumber : Number.MAX_VALUE;\n            const distNext = modNext ? modNext.lineNumber - lastModifiedLineNumber : Number.MAX_VALUE;\n            if (distOrig < distNext) {\n                originalLineHeightOverrides.dequeue();\n                modNext = {\n                    lineNumber: origNext.lineNumber - lastOriginalLineNumber + lastModifiedLineNumber,\n                    heightInPx: 0,\n                };\n            }\n            else if (distOrig > distNext) {\n                modifiedLineHeightOverrides.dequeue();\n                origNext = {\n                    lineNumber: modNext.lineNumber - lastModifiedLineNumber + lastOriginalLineNumber,\n                    heightInPx: 0,\n                };\n            }\n            else {\n                originalLineHeightOverrides.dequeue();\n                modifiedLineHeightOverrides.dequeue();\n            }\n            result.push({\n                originalRange: LineRange.ofLength(origNext.lineNumber, 1),\n                modifiedRange: LineRange.ofLength(modNext.lineNumber, 1),\n                originalHeightInPx: origLineHeight + origNext.heightInPx,\n                modifiedHeightInPx: modLineHeight + modNext.heightInPx,\n                diff: undefined,\n            });\n        }\n    }\n    for (const m of diffs) {\n        const c = m.lineRangeMapping;\n        handleAlignmentsOutsideOfDiffs(c.original.startLineNumber, c.modified.startLineNumber);\n        let first = true;\n        let lastModLineNumber = c.modified.startLineNumber;\n        let lastOrigLineNumber = c.original.startLineNumber;\n        function emitAlignment(origLineNumberExclusive, modLineNumberExclusive) {\n            var _a, _b, _c, _d;\n            if (origLineNumberExclusive < lastOrigLineNumber || modLineNumberExclusive < lastModLineNumber) {\n                return;\n            }\n            if (first) {\n                first = false;\n            }\n            else if (origLineNumberExclusive === lastOrigLineNumber || modLineNumberExclusive === lastModLineNumber) {\n                return;\n            }\n            const originalRange = new LineRange(lastOrigLineNumber, origLineNumberExclusive);\n            const modifiedRange = new LineRange(lastModLineNumber, modLineNumberExclusive);\n            if (originalRange.isEmpty && modifiedRange.isEmpty) {\n                return;\n            }\n            const originalAdditionalHeight = (_b = (_a = originalLineHeightOverrides\n                .takeWhile(v => v.lineNumber < origLineNumberExclusive)) === null || _a === void 0 ? void 0 : _a.reduce((p, c) => p + c.heightInPx, 0)) !== null && _b !== void 0 ? _b : 0;\n            const modifiedAdditionalHeight = (_d = (_c = modifiedLineHeightOverrides\n                .takeWhile(v => v.lineNumber < modLineNumberExclusive)) === null || _c === void 0 ? void 0 : _c.reduce((p, c) => p + c.heightInPx, 0)) !== null && _d !== void 0 ? _d : 0;\n            result.push({\n                originalRange,\n                modifiedRange,\n                originalHeightInPx: originalRange.length * origLineHeight + originalAdditionalHeight,\n                modifiedHeightInPx: modifiedRange.length * modLineHeight + modifiedAdditionalHeight,\n                diff: m.lineRangeMapping,\n            });\n            lastOrigLineNumber = origLineNumberExclusive;\n            lastModLineNumber = modLineNumberExclusive;\n        }\n        if (innerHunkAlignment) {\n            for (const i of c.innerChanges || []) {\n                if (i.originalRange.startColumn > 1 && i.modifiedRange.startColumn > 1) {\n                    // There is some unmodified text on this line before the diff\n                    emitAlignment(i.originalRange.startLineNumber, i.modifiedRange.startLineNumber);\n                }\n                if (i.originalRange.endColumn < originalEditor.getModel().getLineMaxColumn(i.originalRange.endLineNumber)) {\n                    // // There is some unmodified text on this line after the diff\n                    emitAlignment(i.originalRange.endLineNumber, i.modifiedRange.endLineNumber);\n                }\n            }\n        }\n        emitAlignment(c.original.endLineNumberExclusive, c.modified.endLineNumberExclusive);\n        lastOriginalLineNumber = c.original.endLineNumberExclusive;\n        lastModifiedLineNumber = c.modified.endLineNumberExclusive;\n    }\n    handleAlignmentsOutsideOfDiffs(Number.MAX_VALUE, Number.MAX_VALUE);\n    return result;\n}\nfunction getAdditionalLineHeights(editor, viewZonesToIgnore) {\n    const viewZoneHeights = [];\n    const wrappingZoneHeights = [];\n    const hasWrapping = editor.getOption(144 /* EditorOption.wrappingInfo */).wrappingColumn !== -1;\n    const coordinatesConverter = editor._getViewModel().coordinatesConverter;\n    const editorLineHeight = editor.getOption(66 /* EditorOption.lineHeight */);\n    if (hasWrapping) {\n        for (let i = 1; i <= editor.getModel().getLineCount(); i++) {\n            const lineCount = coordinatesConverter.getModelLineViewLineCount(i);\n            if (lineCount > 1) {\n                wrappingZoneHeights.push({ lineNumber: i, heightInPx: editorLineHeight * (lineCount - 1) });\n            }\n        }\n    }\n    for (const w of editor.getWhitespaces()) {\n        if (viewZonesToIgnore.has(w.id)) {\n            continue;\n        }\n        const modelLineNumber = w.afterLineNumber === 0 ? 0 : coordinatesConverter.convertViewPositionToModelPosition(new Position(w.afterLineNumber, 1)).lineNumber;\n        viewZoneHeights.push({ lineNumber: modelLineNumber, heightInPx: w.height });\n    }\n    const result = joinCombine(viewZoneHeights, wrappingZoneHeights, v => v.lineNumber, (v1, v2) => ({ lineNumber: v1.lineNumber, heightInPx: v1.heightInPx + v2.heightInPx }));\n    return result;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar OverviewRulerPart_1;\nimport { EventType, addDisposableListener, addStandardDisposableListener, h } from '../../../../base/browser/dom.js';\nimport { createFastDomNode } from '../../../../base/browser/fastDomNode.js';\nimport { ScrollbarState } from '../../../../base/browser/ui/scrollbar/scrollbarState.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, observableFromEvent, observableSignalFromEvent } from '../../../../base/common/observable.js';\nimport { appendRemoveOnDispose } from './utils.js';\nimport { Position } from '../../../common/core/position.js';\nimport { OverviewRulerZone } from '../../../common/viewModel/overviewZoneManager.js';\nimport { defaultInsertColor, defaultRemoveColor, diffInserted, diffOverviewRulerInserted, diffOverviewRulerRemoved, diffRemoved } from '../../../../platform/theme/common/colorRegistry.js';\nimport { IThemeService } from '../../../../platform/theme/common/themeService.js';\nlet OverviewRulerPart = OverviewRulerPart_1 = class OverviewRulerPart extends Disposable {\n    constructor(_editors, _rootElement, _diffModel, _rootWidth, _rootHeight, _modifiedEditorLayoutInfo, _options, _themeService) {\n        super();\n        this._editors = _editors;\n        this._rootElement = _rootElement;\n        this._diffModel = _diffModel;\n        this._rootWidth = _rootWidth;\n        this._rootHeight = _rootHeight;\n        this._modifiedEditorLayoutInfo = _modifiedEditorLayoutInfo;\n        this._options = _options;\n        this._themeService = _themeService;\n        const currentColorTheme = observableFromEvent(this._themeService.onDidColorThemeChange, () => this._themeService.getColorTheme());\n        const currentColors = derived(reader => {\n            /** @description colors */\n            const theme = currentColorTheme.read(reader);\n            const insertColor = theme.getColor(diffOverviewRulerInserted) || (theme.getColor(diffInserted) || defaultInsertColor).transparent(2);\n            const removeColor = theme.getColor(diffOverviewRulerRemoved) || (theme.getColor(diffRemoved) || defaultRemoveColor).transparent(2);\n            return { insertColor, removeColor };\n        });\n        const scrollTopObservable = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollTop());\n        const scrollHeightObservable = observableFromEvent(this._editors.modified.onDidScrollChange, () => this._editors.modified.getScrollHeight());\n        this._register(autorunWithStore((reader, store) => {\n            /** @description create diff editor overview ruler if enabled */\n            if (!this._options.renderOverviewRuler.read(reader)) {\n                return;\n            }\n            const viewportDomElement = createFastDomNode(document.createElement('div'));\n            viewportDomElement.setClassName('diffViewport');\n            viewportDomElement.setPosition('absolute');\n            const diffOverviewRoot = h('div.diffOverview', {\n                style: { position: 'absolute', top: '0px', width: OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH + 'px' }\n            }).root;\n            store.add(appendRemoveOnDispose(diffOverviewRoot, viewportDomElement.domNode));\n            store.add(addStandardDisposableListener(diffOverviewRoot, EventType.POINTER_DOWN, (e) => {\n                this._editors.modified.delegateVerticalScrollbarPointerDown(e);\n            }));\n            store.add(addDisposableListener(diffOverviewRoot, EventType.MOUSE_WHEEL, (e) => {\n                this._editors.modified.delegateScrollFromMouseWheelEvent(e);\n            }, { passive: false }));\n            store.add(appendRemoveOnDispose(this._rootElement, diffOverviewRoot));\n            store.add(autorunWithStore((reader, store) => {\n                /** @description recreate overview rules when model changes */\n                const m = this._diffModel.read(reader);\n                const originalOverviewRuler = this._editors.original.createOverviewRuler('original diffOverviewRuler');\n                if (originalOverviewRuler) {\n                    store.add(originalOverviewRuler);\n                    store.add(appendRemoveOnDispose(diffOverviewRoot, originalOverviewRuler.getDomNode()));\n                }\n                const modifiedOverviewRuler = this._editors.modified.createOverviewRuler('modified diffOverviewRuler');\n                if (modifiedOverviewRuler) {\n                    store.add(modifiedOverviewRuler);\n                    store.add(appendRemoveOnDispose(diffOverviewRoot, modifiedOverviewRuler.getDomNode()));\n                }\n                if (!originalOverviewRuler || !modifiedOverviewRuler) {\n                    // probably no model\n                    return;\n                }\n                const origViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.original.onDidChangeViewZones);\n                const modViewZonesChanged = observableSignalFromEvent('viewZoneChanged', this._editors.modified.onDidChangeViewZones);\n                const origHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.original.onDidChangeHiddenAreas);\n                const modHiddenRangesChanged = observableSignalFromEvent('hiddenRangesChanged', this._editors.modified.onDidChangeHiddenAreas);\n                store.add(autorun(reader => {\n                    var _a;\n                    /** @description set overview ruler zones */\n                    origViewZonesChanged.read(reader);\n                    modViewZonesChanged.read(reader);\n                    origHiddenRangesChanged.read(reader);\n                    modHiddenRangesChanged.read(reader);\n                    const colors = currentColors.read(reader);\n                    const diff = (_a = m === null || m === void 0 ? void 0 : m.diff.read(reader)) === null || _a === void 0 ? void 0 : _a.mappings;\n                    function createZones(ranges, color, editor) {\n                        const vm = editor._getViewModel();\n                        if (!vm) {\n                            return [];\n                        }\n                        return ranges\n                            .filter(d => d.length > 0)\n                            .map(r => {\n                            const start = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.startLineNumber, 1));\n                            const end = vm.coordinatesConverter.convertModelPositionToViewPosition(new Position(r.endLineNumberExclusive, 1));\n                            // By computing the lineCount, we won't ask the view model later for the bottom vertical position.\n                            // (The view model will take into account the alignment viewzones, which will give\n                            // modifications and deletetions always the same height.)\n                            const lineCount = end.lineNumber - start.lineNumber;\n                            return new OverviewRulerZone(start.lineNumber, end.lineNumber, lineCount, color.toString());\n                        });\n                    }\n                    const originalZones = createZones((diff || []).map(d => d.lineRangeMapping.original), colors.removeColor, this._editors.original);\n                    const modifiedZones = createZones((diff || []).map(d => d.lineRangeMapping.modified), colors.insertColor, this._editors.modified);\n                    originalOverviewRuler === null || originalOverviewRuler === void 0 ? void 0 : originalOverviewRuler.setZones(originalZones);\n                    modifiedOverviewRuler === null || modifiedOverviewRuler === void 0 ? void 0 : modifiedOverviewRuler.setZones(modifiedZones);\n                }));\n                store.add(autorun(reader => {\n                    /** @description layout overview ruler */\n                    const height = this._rootHeight.read(reader);\n                    const width = this._rootWidth.read(reader);\n                    const layoutInfo = this._modifiedEditorLayoutInfo.read(reader);\n                    if (layoutInfo) {\n                        const freeSpace = OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH - 2 * OverviewRulerPart_1.ONE_OVERVIEW_WIDTH;\n                        originalOverviewRuler.setLayout({\n                            top: 0,\n                            height: height,\n                            right: freeSpace + OverviewRulerPart_1.ONE_OVERVIEW_WIDTH,\n                            width: OverviewRulerPart_1.ONE_OVERVIEW_WIDTH,\n                        });\n                        modifiedOverviewRuler.setLayout({\n                            top: 0,\n                            height: height,\n                            right: 0,\n                            width: OverviewRulerPart_1.ONE_OVERVIEW_WIDTH,\n                        });\n                        const scrollTop = scrollTopObservable.read(reader);\n                        const scrollHeight = scrollHeightObservable.read(reader);\n                        const scrollBarOptions = this._editors.modified.getOption(102 /* EditorOption.scrollbar */);\n                        const state = new ScrollbarState(scrollBarOptions.verticalHasArrows ? scrollBarOptions.arrowSize : 0, scrollBarOptions.verticalScrollbarSize, 0, layoutInfo.height, scrollHeight, scrollTop);\n                        viewportDomElement.setTop(state.getSliderPosition());\n                        viewportDomElement.setHeight(state.getSliderSize());\n                    }\n                    else {\n                        viewportDomElement.setTop(0);\n                        viewportDomElement.setHeight(0);\n                    }\n                    diffOverviewRoot.style.height = height + 'px';\n                    diffOverviewRoot.style.left = (width - OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH) + 'px';\n                    viewportDomElement.setWidth(OverviewRulerPart_1.ENTIRE_DIFF_OVERVIEW_WIDTH);\n                }));\n            }));\n        }));\n    }\n};\nOverviewRulerPart.ONE_OVERVIEW_WIDTH = 15;\nOverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH = OverviewRulerPart_1.ONE_OVERVIEW_WIDTH * 2;\nOverviewRulerPart = OverviewRulerPart_1 = __decorate([\n    __param(7, IThemeService)\n], OverviewRulerPart);\nexport { OverviewRulerPart };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { localize } from '../../../../nls.js';\nimport { registerColor } from '../../../../platform/theme/common/colorRegistry.js';\nexport const diffMoveBorder = registerColor('diffEditor.move.border', { dark: '#8b8b8b9c', light: '#8b8b8b9c', hcDark: '#8b8b8b9c', hcLight: '#8b8b8b9c', }, localize('diffEditor.move.border', 'The border color for text that got moved in the diff editor.'));\nexport const diffMoveBorderActive = registerColor('diffEditor.moveActive.border', { dark: '#FFA500', light: '#FFA500', hcDark: '#FFA500', hcLight: '#FFA500', }, localize('diffEditor.moveActive.border', 'The active border color for text that got moved in the diff editor.'));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nexport class DelegatingEditor extends Disposable {\n    constructor() {\n        super(...arguments);\n        this._id = ++DelegatingEditor.idCounter;\n        this._onDidDispose = this._register(new Emitter());\n        this.onDidDispose = this._onDidDispose.event;\n        // #endregion\n    }\n    getId() { return this.getEditorType() + ':v2:' + this._id; }\n    // #region editorBrowser.IDiffEditor: Delegating to modified Editor\n    getVisibleColumnFromPosition(position) {\n        return this._targetEditor.getVisibleColumnFromPosition(position);\n    }\n    getPosition() {\n        return this._targetEditor.getPosition();\n    }\n    setPosition(position, source = 'api') {\n        this._targetEditor.setPosition(position, source);\n    }\n    revealLine(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLine(lineNumber, scrollType);\n    }\n    revealLineInCenter(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineInCenter(lineNumber, scrollType);\n    }\n    revealLineInCenterIfOutsideViewport(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineInCenterIfOutsideViewport(lineNumber, scrollType);\n    }\n    revealLineNearTop(lineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLineNearTop(lineNumber, scrollType);\n    }\n    revealPosition(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPosition(position, scrollType);\n    }\n    revealPositionInCenter(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionInCenter(position, scrollType);\n    }\n    revealPositionInCenterIfOutsideViewport(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionInCenterIfOutsideViewport(position, scrollType);\n    }\n    revealPositionNearTop(position, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealPositionNearTop(position, scrollType);\n    }\n    getSelection() {\n        return this._targetEditor.getSelection();\n    }\n    getSelections() {\n        return this._targetEditor.getSelections();\n    }\n    setSelection(something, source = 'api') {\n        this._targetEditor.setSelection(something, source);\n    }\n    setSelections(ranges, source = 'api') {\n        this._targetEditor.setSelections(ranges, source);\n    }\n    revealLines(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLines(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenter(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesInCenter(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesInCenterIfOutsideViewport(startLineNumber, endLineNumber, scrollType);\n    }\n    revealLinesNearTop(startLineNumber, endLineNumber, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealLinesNearTop(startLineNumber, endLineNumber, scrollType);\n    }\n    revealRange(range, scrollType = 0 /* ScrollType.Smooth */, revealVerticalInCenter = false, revealHorizontal = true) {\n        this._targetEditor.revealRange(range, scrollType, revealVerticalInCenter, revealHorizontal);\n    }\n    revealRangeInCenter(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeInCenter(range, scrollType);\n    }\n    revealRangeInCenterIfOutsideViewport(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeInCenterIfOutsideViewport(range, scrollType);\n    }\n    revealRangeNearTop(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeNearTop(range, scrollType);\n    }\n    revealRangeNearTopIfOutsideViewport(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeNearTopIfOutsideViewport(range, scrollType);\n    }\n    revealRangeAtTop(range, scrollType = 0 /* ScrollType.Smooth */) {\n        this._targetEditor.revealRangeAtTop(range, scrollType);\n    }\n    getSupportedActions() {\n        return this._targetEditor.getSupportedActions();\n    }\n    focus() {\n        this._targetEditor.focus();\n    }\n    trigger(source, handlerId, payload) {\n        this._targetEditor.trigger(source, handlerId, payload);\n    }\n    createDecorationsCollection(decorations) {\n        return this._targetEditor.createDecorationsCollection(decorations);\n    }\n    changeDecorations(callback) {\n        return this._targetEditor.changeDecorations(callback);\n    }\n}\nDelegatingEditor.idCounter = 0;\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { Emitter } from '../../../../base/common/event.js';\nimport { Disposable } from '../../../../base/common/lifecycle.js';\nimport { autorunHandleChanges, observableFromEvent } from '../../../../base/common/observable.js';\nimport { OverviewRulerPart } from './overviewRulerPart.js';\nimport { EditorOptions } from '../../../common/config/editorOptions.js';\nimport { localize } from '../../../../nls.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../../platform/keybinding/common/keybinding.js';\nlet DiffEditorEditors = class DiffEditorEditors extends Disposable {\n    constructor(originalEditorElement, modifiedEditorElement, _options, codeEditorWidgetOptions, _createInnerEditor, _instantiationService, _keybindingService) {\n        super();\n        this.originalEditorElement = originalEditorElement;\n        this.modifiedEditorElement = modifiedEditorElement;\n        this._options = _options;\n        this._createInnerEditor = _createInnerEditor;\n        this._instantiationService = _instantiationService;\n        this._keybindingService = _keybindingService;\n        this._onDidContentSizeChange = this._register(new Emitter());\n        this.original = this._register(this._createLeftHandSideEditor(_options.editorOptions.get(), codeEditorWidgetOptions.originalEditor || {}));\n        this.modified = this._register(this._createRightHandSideEditor(_options.editorOptions.get(), codeEditorWidgetOptions.modifiedEditor || {}));\n        this.modifiedModel = observableFromEvent(this.modified.onDidChangeModel, () => this.modified.getModel());\n        this._register(autorunHandleChanges({\n            createEmptyChangeSummary: () => ({}),\n            handleChange: (ctx, changeSummary) => {\n                if (ctx.didChange(_options.editorOptions)) {\n                    Object.assign(changeSummary, ctx.change.changedOptions);\n                }\n                return true;\n            }\n        }, (reader, changeSummary) => {\n            /** @description update editor options */\n            _options.editorOptions.read(reader);\n            this._options.renderSideBySide.read(reader);\n            this.modified.updateOptions(this._adjustOptionsForRightHandSide(reader, changeSummary));\n            this.original.updateOptions(this._adjustOptionsForLeftHandSide(reader, changeSummary));\n        }));\n    }\n    _createLeftHandSideEditor(options, codeEditorWidgetOptions) {\n        const leftHandSideOptions = this._adjustOptionsForLeftHandSide(undefined, options);\n        const editor = this._constructInnerEditor(this._instantiationService, this.originalEditorElement, leftHandSideOptions, codeEditorWidgetOptions);\n        editor.setContextValue('isInDiffLeftEditor', true);\n        return editor;\n    }\n    _createRightHandSideEditor(options, codeEditorWidgetOptions) {\n        const rightHandSideOptions = this._adjustOptionsForRightHandSide(undefined, options);\n        const editor = this._constructInnerEditor(this._instantiationService, this.modifiedEditorElement, rightHandSideOptions, codeEditorWidgetOptions);\n        editor.setContextValue('isInDiffRightEditor', true);\n        return editor;\n    }\n    _constructInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n        const editor = this._createInnerEditor(instantiationService, container, options, editorWidgetOptions);\n        this._register(editor.onDidContentSizeChange(e => {\n            const width = this.original.getContentWidth() + this.modified.getContentWidth() + OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH;\n            const height = Math.max(this.modified.getContentHeight(), this.original.getContentHeight());\n            this._onDidContentSizeChange.fire({\n                contentHeight: height,\n                contentWidth: width,\n                contentHeightChanged: e.contentHeightChanged,\n                contentWidthChanged: e.contentWidthChanged\n            });\n        }));\n        return editor;\n    }\n    _adjustOptionsForLeftHandSide(_reader, changedOptions) {\n        const result = this._adjustOptionsForSubEditor(changedOptions);\n        if (!this._options.renderSideBySide.get()) {\n            // never wrap hidden editor\n            result.wordWrapOverride1 = 'off';\n            result.wordWrapOverride2 = 'off';\n            result.stickyScroll = { enabled: false };\n            // Disable unicode highlighting for the original side in inline mode, as they are not shown anyway.\n            result.unicodeHighlight = { nonBasicASCII: false, ambiguousCharacters: false, invisibleCharacters: false };\n        }\n        else {\n            result.unicodeHighlight = this._options.editorOptions.get().unicodeHighlight || {};\n            result.wordWrapOverride1 = this._options.diffWordWrap.get();\n        }\n        if (changedOptions.originalAriaLabel) {\n            result.ariaLabel = changedOptions.originalAriaLabel;\n        }\n        result.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n        result.readOnly = !this._options.originalEditable.get();\n        result.dropIntoEditor = { enabled: !result.readOnly };\n        result.extraEditorClassName = 'original-in-monaco-diff-editor';\n        return result;\n    }\n    _adjustOptionsForRightHandSide(reader, changedOptions) {\n        const result = this._adjustOptionsForSubEditor(changedOptions);\n        if (changedOptions.modifiedAriaLabel) {\n            result.ariaLabel = changedOptions.modifiedAriaLabel;\n        }\n        result.ariaLabel = this._updateAriaLabel(result.ariaLabel);\n        result.wordWrapOverride1 = this._options.diffWordWrap.get();\n        result.revealHorizontalRightPadding = EditorOptions.revealHorizontalRightPadding.defaultValue + OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH;\n        result.scrollbar.verticalHasArrows = false;\n        result.extraEditorClassName = 'modified-in-monaco-diff-editor';\n        return result;\n    }\n    _adjustOptionsForSubEditor(options) {\n        const clonedOptions = Object.assign(Object.assign({}, options), { dimension: {\n                height: 0,\n                width: 0\n            } });\n        clonedOptions.inDiffEditor = true;\n        clonedOptions.automaticLayout = false;\n        // Clone scrollbar options before changing them\n        clonedOptions.scrollbar = Object.assign({}, (clonedOptions.scrollbar || {}));\n        clonedOptions.scrollbar.vertical = 'visible';\n        clonedOptions.folding = false;\n        clonedOptions.codeLens = this._options.diffCodeLens.get();\n        clonedOptions.fixedOverflowWidgets = true;\n        // Clone minimap options before changing them\n        clonedOptions.minimap = Object.assign({}, (clonedOptions.minimap || {}));\n        clonedOptions.minimap.enabled = false;\n        if (this._options.hideUnchangedRegions.get()) {\n            clonedOptions.stickyScroll = { enabled: false };\n        }\n        else {\n            clonedOptions.stickyScroll = this._options.editorOptions.get().stickyScroll;\n        }\n        return clonedOptions;\n    }\n    _updateAriaLabel(ariaLabel) {\n        var _a;\n        if (!ariaLabel) {\n            ariaLabel = '';\n        }\n        const ariaNavigationTip = localize('diff-aria-navigation-tip', ' use {0} to open the accessibility help.', (_a = this._keybindingService.lookupKeybinding('editor.action.accessibilityHelp')) === null || _a === void 0 ? void 0 : _a.getAriaLabel());\n        if (this._options.accessibilityVerbose.get()) {\n            return ariaLabel + ariaNavigationTip;\n        }\n        else if (ariaLabel) {\n            return ariaLabel.replaceAll(ariaNavigationTip, '');\n        }\n        return '';\n    }\n};\nDiffEditorEditors = __decorate([\n    __param(5, IInstantiationService),\n    __param(6, IKeybindingService)\n], DiffEditorEditors);\nexport { DiffEditorEditors };\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { derived, observableValue } from '../../../../base/common/observable.js';\nimport { diffEditorDefaultOptions } from '../../../common/config/diffEditor.js';\nimport { clampedFloat, clampedInt, boolean as validateBooleanOption, stringSet as validateStringSetOption } from '../../../common/config/editorOptions.js';\nexport class DiffEditorOptions {\n    get editorOptions() { return this._options; }\n    constructor(options, diffEditorWidth) {\n        this.diffEditorWidth = diffEditorWidth;\n        this.couldShowInlineViewBecauseOfSize = derived(this, reader => this._options.read(reader).renderSideBySide && this.diffEditorWidth.read(reader) <= this._options.read(reader).renderSideBySideInlineBreakpoint);\n        this.renderOverviewRuler = derived(this, reader => this._options.read(reader).renderOverviewRuler);\n        this.renderSideBySide = derived(this, reader => this._options.read(reader).renderSideBySide\n            && !(this._options.read(reader).useInlineViewWhenSpaceIsLimited && this.couldShowInlineViewBecauseOfSize.read(reader)));\n        this.readOnly = derived(this, reader => this._options.read(reader).readOnly);\n        this.shouldRenderRevertArrows = derived(this, reader => {\n            if (!this._options.read(reader).renderMarginRevertIcon) {\n                return false;\n            }\n            if (!this.renderSideBySide.read(reader)) {\n                return false;\n            }\n            if (this.readOnly.read(reader)) {\n                return false;\n            }\n            return true;\n        });\n        this.renderIndicators = derived(this, reader => this._options.read(reader).renderIndicators);\n        this.enableSplitViewResizing = derived(this, reader => this._options.read(reader).enableSplitViewResizing);\n        this.splitViewDefaultRatio = derived(this, reader => this._options.read(reader).splitViewDefaultRatio);\n        this.ignoreTrimWhitespace = derived(this, reader => this._options.read(reader).ignoreTrimWhitespace);\n        this.maxComputationTimeMs = derived(this, reader => this._options.read(reader).maxComputationTime);\n        this.showMoves = derived(this, reader => this._options.read(reader).experimental.showMoves && this.renderSideBySide.read(reader));\n        this.isInEmbeddedEditor = derived(this, reader => this._options.read(reader).isInEmbeddedEditor);\n        this.diffWordWrap = derived(this, reader => this._options.read(reader).diffWordWrap);\n        this.originalEditable = derived(this, reader => this._options.read(reader).originalEditable);\n        this.diffCodeLens = derived(this, reader => this._options.read(reader).diffCodeLens);\n        this.accessibilityVerbose = derived(this, reader => this._options.read(reader).accessibilityVerbose);\n        this.diffAlgorithm = derived(this, reader => this._options.read(reader).diffAlgorithm);\n        this.showEmptyDecorations = derived(this, reader => this._options.read(reader).experimental.showEmptyDecorations);\n        this.onlyShowAccessibleDiffViewer = derived(this, reader => this._options.read(reader).onlyShowAccessibleDiffViewer);\n        this.hideUnchangedRegions = derived(this, reader => this._options.read(reader).hideUnchangedRegions.enabled);\n        this.hideUnchangedRegionsRevealLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.revealLineCount);\n        this.hideUnchangedRegionsContextLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.contextLineCount);\n        this.hideUnchangedRegionsMinimumLineCount = derived(this, reader => this._options.read(reader).hideUnchangedRegions.minimumLineCount);\n        const optionsCopy = Object.assign(Object.assign({}, options), validateDiffEditorOptions(options, diffEditorDefaultOptions));\n        this._options = observableValue(this, optionsCopy);\n    }\n    updateOptions(changedOptions) {\n        const newDiffEditorOptions = validateDiffEditorOptions(changedOptions, this._options.get());\n        const newOptions = Object.assign(Object.assign(Object.assign({}, this._options.get()), changedOptions), newDiffEditorOptions);\n        this._options.set(newOptions, undefined, { changedOptions: changedOptions });\n    }\n}\nfunction validateDiffEditorOptions(options, defaults) {\n    var _a, _b, _c, _d, _e, _f, _g, _h;\n    return {\n        enableSplitViewResizing: validateBooleanOption(options.enableSplitViewResizing, defaults.enableSplitViewResizing),\n        splitViewDefaultRatio: clampedFloat(options.splitViewDefaultRatio, 0.5, 0.1, 0.9),\n        renderSideBySide: validateBooleanOption(options.renderSideBySide, defaults.renderSideBySide),\n        renderMarginRevertIcon: validateBooleanOption(options.renderMarginRevertIcon, defaults.renderMarginRevertIcon),\n        maxComputationTime: clampedInt(options.maxComputationTime, defaults.maxComputationTime, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        maxFileSize: clampedInt(options.maxFileSize, defaults.maxFileSize, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        ignoreTrimWhitespace: validateBooleanOption(options.ignoreTrimWhitespace, defaults.ignoreTrimWhitespace),\n        renderIndicators: validateBooleanOption(options.renderIndicators, defaults.renderIndicators),\n        originalEditable: validateBooleanOption(options.originalEditable, defaults.originalEditable),\n        diffCodeLens: validateBooleanOption(options.diffCodeLens, defaults.diffCodeLens),\n        renderOverviewRuler: validateBooleanOption(options.renderOverviewRuler, defaults.renderOverviewRuler),\n        diffWordWrap: validateStringSetOption(options.diffWordWrap, defaults.diffWordWrap, ['off', 'on', 'inherit']),\n        diffAlgorithm: validateStringSetOption(options.diffAlgorithm, defaults.diffAlgorithm, ['legacy', 'advanced'], { 'smart': 'legacy', 'experimental': 'advanced' }),\n        accessibilityVerbose: validateBooleanOption(options.accessibilityVerbose, defaults.accessibilityVerbose),\n        experimental: {\n            showMoves: validateBooleanOption((_a = options.experimental) === null || _a === void 0 ? void 0 : _a.showMoves, defaults.experimental.showMoves),\n            showEmptyDecorations: validateBooleanOption((_b = options.experimental) === null || _b === void 0 ? void 0 : _b.showEmptyDecorations, defaults.experimental.showEmptyDecorations),\n        },\n        hideUnchangedRegions: {\n            enabled: validateBooleanOption((_d = (_c = options.hideUnchangedRegions) === null || _c === void 0 ? void 0 : _c.enabled) !== null && _d !== void 0 ? _d : (_e = options.experimental) === null || _e === void 0 ? void 0 : _e.collapseUnchangedRegions, defaults.hideUnchangedRegions.enabled),\n            contextLineCount: clampedInt((_f = options.hideUnchangedRegions) === null || _f === void 0 ? void 0 : _f.contextLineCount, defaults.hideUnchangedRegions.contextLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n            minimumLineCount: clampedInt((_g = options.hideUnchangedRegions) === null || _g === void 0 ? void 0 : _g.minimumLineCount, defaults.hideUnchangedRegions.minimumLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n            revealLineCount: clampedInt((_h = options.hideUnchangedRegions) === null || _h === void 0 ? void 0 : _h.revealLineCount, defaults.hideUnchangedRegions.revealLineCount, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        },\n        isInEmbeddedEditor: validateBooleanOption(options.isInEmbeddedEditor, defaults.isInEmbeddedEditor),\n        onlyShowAccessibleDiffViewer: validateBooleanOption(options.onlyShowAccessibleDiffViewer, defaults.onlyShowAccessibleDiffViewer),\n        renderSideBySideInlineBreakpoint: clampedInt(options.renderSideBySideInlineBreakpoint, defaults.renderSideBySideInlineBreakpoint, 0, 1073741824 /* Constants.MAX_SAFE_SMALL_INTEGER */),\n        useInlineViewWhenSpaceIsLimited: validateBooleanOption(options.useInlineViewWhenSpaceIsLimited, defaults.useInlineViewWhenSpaceIsLimited),\n    };\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\n/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { $, h } from '../../../../base/browser/dom.js';\nimport { findLast } from '../../../../base/common/arraysFind.js';\nimport { onUnexpectedError } from '../../../../base/common/errors.js';\nimport { Event } from '../../../../base/common/event.js';\nimport { toDisposable } from '../../../../base/common/lifecycle.js';\nimport { autorun, autorunWithStore, derived, derivedWithStore, disposableObservableValue, recomputeInitiallyAndOnChange, observableValue, transaction } from '../../../../base/common/observable.js';\nimport './style.css';\nimport { EditorExtensionsRegistry } from '../../editorExtensions.js';\nimport { ICodeEditorService } from '../../services/codeEditorService.js';\nimport { CodeEditorWidget } from '../codeEditorWidget.js';\nimport { AccessibleDiffViewer } from './accessibleDiffViewer.js';\nimport { DiffEditorDecorations } from './diffEditorDecorations.js';\nimport { DiffEditorSash } from './diffEditorSash.js';\nimport { HideUnchangedRegionsFeature } from './hideUnchangedRegionsFeature.js';\nimport { ViewZoneManager } from './lineAlignment.js';\nimport { MovedBlocksLinesPart } from './movedBlocksLines.js';\nimport { OverviewRulerPart } from './overviewRulerPart.js';\nimport { ObservableElementSizeObserver, applyStyle, readHotReloadableExport } from './utils.js';\nimport { Position } from '../../../common/core/position.js';\nimport { Range } from '../../../common/core/range.js';\nimport { EditorType } from '../../../common/editorCommon.js';\nimport { EditorContextKeys } from '../../../common/editorContextKeys.js';\nimport { LengthObj } from '../../../common/model/bracketPairsTextModelPart/bracketPairsTree/length.js';\nimport { AudioCue, IAudioCueService } from '../../../../platform/audioCues/browser/audioCueService.js';\nimport { IContextKeyService } from '../../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../../platform/instantiation/common/instantiation.js';\nimport { ServiceCollection } from '../../../../platform/instantiation/common/serviceCollection.js';\nimport { IEditorProgressService } from '../../../../platform/progress/common/progress.js';\nimport './colors.js';\nimport { DelegatingEditor } from './delegatingEditorImpl.js';\nimport { DiffEditorEditors } from './diffEditorEditors.js';\nimport { DiffEditorOptions } from './diffEditorOptions.js';\nimport { DiffEditorViewModel } from './diffEditorViewModel.js';\nlet DiffEditorWidget = class DiffEditorWidget extends DelegatingEditor {\n    constructor(_domElement, options, codeEditorWidgetOptions, _parentContextKeyService, _parentInstantiationService, codeEditorService, _audioCueService, _editorProgressService) {\n        var _a;\n        super();\n        this._domElement = _domElement;\n        this._parentContextKeyService = _parentContextKeyService;\n        this._parentInstantiationService = _parentInstantiationService;\n        this._audioCueService = _audioCueService;\n        this._editorProgressService = _editorProgressService;\n        this.elements = h('div.monaco-diff-editor.side-by-side', { style: { position: 'relative', height: '100%' } }, [\n            h('div.noModificationsOverlay@overlay', { style: { position: 'absolute', height: '100%', visibility: 'hidden', } }, [$('span', {}, 'No Changes')]),\n            h('div.editor.original@original', { style: { position: 'absolute', height: '100%' } }),\n            h('div.editor.modified@modified', { style: { position: 'absolute', height: '100%' } }),\n            h('div.accessibleDiffViewer@accessibleDiffViewer', { style: { position: 'absolute', height: '100%' } }),\n        ]);\n        this._diffModel = this._register(disposableObservableValue('diffModel', undefined));\n        this.onDidChangeModel = Event.fromObservableLight(this._diffModel);\n        this._contextKeyService = this._register(this._parentContextKeyService.createScoped(this._domElement));\n        this._instantiationService = this._parentInstantiationService.createChild(new ServiceCollection([IContextKeyService, this._contextKeyService]));\n        this._boundarySashes = observableValue(this, undefined);\n        this._accessibleDiffViewerShouldBeVisible = observableValue(this, false);\n        this._accessibleDiffViewerVisible = derived(this, reader => this._options.onlyShowAccessibleDiffViewer.read(reader)\n            ? true\n            : this._accessibleDiffViewerShouldBeVisible.read(reader));\n        this.movedBlocksLinesPart = observableValue(this, undefined);\n        this._layoutInfo = derived(this, reader => {\n            var _a, _b, _c;\n            const width = this._rootSizeObserver.width.read(reader);\n            const height = this._rootSizeObserver.height.read(reader);\n            const sashLeft = (_a = this._sash.read(reader)) === null || _a === void 0 ? void 0 : _a.sashLeft.read(reader);\n            const originalWidth = sashLeft !== null && sashLeft !== void 0 ? sashLeft : Math.max(5, this._editors.original.getLayoutInfo().decorationsLeft);\n            const modifiedWidth = width - originalWidth - (this._options.renderOverviewRuler.read(reader) ? OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH : 0);\n            const movedBlocksLinesWidth = (_c = (_b = this.movedBlocksLinesPart.read(reader)) === null || _b === void 0 ? void 0 : _b.width.read(reader)) !== null && _c !== void 0 ? _c : 0;\n            const originalWidthWithoutMovedBlockLines = originalWidth - movedBlocksLinesWidth;\n            this.elements.original.style.width = originalWidthWithoutMovedBlockLines + 'px';\n            this.elements.original.style.left = '0px';\n            this.elements.modified.style.width = modifiedWidth + 'px';\n            this.elements.modified.style.left = originalWidth + 'px';\n            this._editors.original.layout({ width: originalWidthWithoutMovedBlockLines, height });\n            this._editors.modified.layout({ width: modifiedWidth, height });\n            return {\n                modifiedEditor: this._editors.modified.getLayoutInfo(),\n                originalEditor: this._editors.original.getLayoutInfo(),\n            };\n        });\n        this._diffValue = this._diffModel.map((m, r) => m === null || m === void 0 ? void 0 : m.diff.read(r));\n        this.onDidUpdateDiff = Event.fromObservableLight(this._diffValue);\n        codeEditorService.willCreateDiffEditor();\n        this._contextKeyService.createKey('isInDiffEditor', true);\n        this._domElement.appendChild(this.elements.root);\n        this._register(toDisposable(() => this._domElement.removeChild(this.elements.root)));\n        this._rootSizeObserver = this._register(new ObservableElementSizeObserver(this.elements.root, options.dimension));\n        this._rootSizeObserver.setAutomaticLayout((_a = options.automaticLayout) !== null && _a !== void 0 ? _a : false);\n        this._options = new DiffEditorOptions(options, this._rootSizeObserver.width);\n        this._contextKeyService.createKey(EditorContextKeys.isEmbeddedDiffEditor.key, false);\n        const isEmbeddedDiffEditorKey = EditorContextKeys.isEmbeddedDiffEditor.bindTo(this._contextKeyService);\n        this._register(autorun(reader => {\n            /** @description update isEmbeddedDiffEditorKey */\n            isEmbeddedDiffEditorKey.set(this._options.isInEmbeddedEditor.read(reader));\n        }));\n        const comparingMovedCodeKey = EditorContextKeys.comparingMovedCode.bindTo(this._contextKeyService);\n        this._register(autorun(reader => {\n            var _a;\n            /** @description update comparingMovedCodeKey */\n            comparingMovedCodeKey.set(!!((_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.movedTextToCompare.read(reader)));\n        }));\n        const diffEditorRenderSideBySideInlineBreakpointReachedContextKeyValue = EditorContextKeys.diffEditorRenderSideBySideInlineBreakpointReached.bindTo(this._contextKeyService);\n        this._register(autorun(reader => {\n            /** @description update accessibleDiffViewerVisible context key */\n            diffEditorRenderSideBySideInlineBreakpointReachedContextKeyValue.set(this._options.couldShowInlineViewBecauseOfSize.read(reader));\n        }));\n        this._editors = this._register(this._instantiationService.createInstance(DiffEditorEditors, this.elements.original, this.elements.modified, this._options, codeEditorWidgetOptions, (i, c, o, o2) => this._createInnerEditor(i, c, o, o2)));\n        this._sash = derivedWithStore(this, (reader, store) => {\n            const showSash = this._options.renderSideBySide.read(reader);\n            this.elements.root.classList.toggle('side-by-side', showSash);\n            if (!showSash) {\n                return undefined;\n            }\n            const result = store.add(new DiffEditorSash(this._options, this.elements.root, {\n                height: this._rootSizeObserver.height,\n                width: this._rootSizeObserver.width.map((w, reader) => w - (this._options.renderOverviewRuler.read(reader) ? OverviewRulerPart.ENTIRE_DIFF_OVERVIEW_WIDTH : 0)),\n            }));\n            store.add(autorun(reader => {\n                /** @description setBoundarySashes */\n                const boundarySashes = this._boundarySashes.read(reader);\n                if (boundarySashes) {\n                    result.setBoundarySashes(boundarySashes);\n                }\n            }));\n            return result;\n        });\n        this._register(recomputeInitiallyAndOnChange(this._sash));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description UnchangedRangesFeature */\n            this.unchangedRangesFeature = store.add(this._instantiationService.createInstance(readHotReloadableExport(HideUnchangedRegionsFeature, reader), this._editors, this._diffModel, this._options));\n        }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description DiffEditorDecorations */\n            store.add(new (readHotReloadableExport(DiffEditorDecorations, reader))(this._editors, this._diffModel, this._options));\n        }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description ViewZoneManager */\n            store.add(this._instantiationService.createInstance(readHotReloadableExport(ViewZoneManager, reader), this._editors, this._diffModel, this._options, this, () => this.unchangedRangesFeature.isUpdatingViewZones));\n        }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description OverviewRulerPart */\n            store.add(this._instantiationService.createInstance(readHotReloadableExport(OverviewRulerPart, reader), this._editors, this.elements.root, this._diffModel, this._rootSizeObserver.width, this._rootSizeObserver.height, this._layoutInfo.map(i => i.modifiedEditor), this._options));\n        }));\n        this._register(autorunWithStore((reader, store) => {\n            /** @description _accessibleDiffViewer */\n            this._accessibleDiffViewer = store.add(this._register(this._instantiationService.createInstance(readHotReloadableExport(AccessibleDiffViewer, reader), this.elements.accessibleDiffViewer, this._accessibleDiffViewerVisible, (visible, tx) => this._accessibleDiffViewerShouldBeVisible.set(visible, tx), this._options.onlyShowAccessibleDiffViewer.map(v => !v), this._rootSizeObserver.width, this._rootSizeObserver.height, this._diffModel.map((m, r) => { var _a; return (_a = m === null || m === void 0 ? void 0 : m.diff.read(r)) === null || _a === void 0 ? void 0 : _a.mappings.map(m => m.lineRangeMapping); }), this._editors)));\n        }));\n        const visibility = this._accessibleDiffViewerVisible.map(v => v ? 'hidden' : 'visible');\n        this._register(applyStyle(this.elements.modified, { visibility }));\n        this._register(applyStyle(this.elements.original, { visibility }));\n        this._createDiffEditorContributions();\n        codeEditorService.addDiffEditor(this);\n        this._register(recomputeInitiallyAndOnChange(this._layoutInfo));\n        this._register(autorunWithStore((reader, store) => {\n            this.movedBlocksLinesPart.set(store.add(new (readHotReloadableExport(MovedBlocksLinesPart, reader))(this.elements.root, this._diffModel, this._layoutInfo.map(i => i.originalEditor), this._layoutInfo.map(i => i.modifiedEditor), this._editors)), undefined);\n        }));\n        this._register(applyStyle(this.elements.overlay, {\n            width: this._layoutInfo.map((i, r) => i.originalEditor.width + (this._options.renderSideBySide.read(r) ? 0 : i.modifiedEditor.width)),\n            visibility: derived(reader => /** @description visibility */ {\n                var _a, _b;\n                return (this._options.hideUnchangedRegions.read(reader) && ((_b = (_a = this._diffModel.read(reader)) === null || _a === void 0 ? void 0 : _a.diff.read(reader)) === null || _b === void 0 ? void 0 : _b.mappings.length) === 0)\n                    ? 'visible' : 'hidden';\n            }),\n        }));\n        // Revert change when an arrow is clicked.\n        this._register(this._editors.modified.onMouseDown(event => {\n            var _a, _b;\n            if (!event.event.rightButton && event.target.position && ((_a = event.target.element) === null || _a === void 0 ? void 0 : _a.className.includes('arrow-revert-change'))) {\n                const lineNumber = event.target.position.lineNumber;\n                const viewZone = event.target;\n                const model = this._diffModel.get();\n                if (!model) {\n                    return;\n                }\n                const diffs = (_b = model.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings;\n                if (!diffs) {\n                    return;\n                }\n                const diff = diffs.find(d => (viewZone === null || viewZone === void 0 ? void 0 : viewZone.detail.afterLineNumber) === d.lineRangeMapping.modified.startLineNumber - 1 ||\n                    d.lineRangeMapping.modified.startLineNumber === lineNumber);\n                if (!diff) {\n                    return;\n                }\n                this.revert(diff.lineRangeMapping);\n                event.event.stopPropagation();\n            }\n        }));\n        this._register(Event.runAndSubscribe(this._editors.modified.onDidChangeCursorPosition, (e) => {\n            var _a, _b;\n            if ((e === null || e === void 0 ? void 0 : e.reason) === 3 /* CursorChangeReason.Explicit */) {\n                const diff = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.find(m => m.lineRangeMapping.modified.contains(e.position.lineNumber));\n                if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.modified.isEmpty) {\n                    this._audioCueService.playAudioCue(AudioCue.diffLineDeleted, { source: 'diffEditor.cursorPositionChanged' });\n                }\n                else if (diff === null || diff === void 0 ? void 0 : diff.lineRangeMapping.original.isEmpty) {\n                    this._audioCueService.playAudioCue(AudioCue.diffLineInserted, { source: 'diffEditor.cursorPositionChanged' });\n                }\n                else if (diff) {\n                    this._audioCueService.playAudioCue(AudioCue.diffLineModified, { source: 'diffEditor.cursorPositionChanged' });\n                }\n            }\n        }));\n        const isDiffUpToDate = this._diffModel.map((m, reader) => m === null || m === void 0 ? void 0 : m.isDiffUpToDate.read(reader));\n        this._register(autorunWithStore((reader, store) => {\n            if (isDiffUpToDate.read(reader) === false) {\n                const r = this._editorProgressService.show(true, 1000);\n                store.add(toDisposable(() => r.done()));\n            }\n        }));\n    }\n    _createInnerEditor(instantiationService, container, options, editorWidgetOptions) {\n        const editor = instantiationService.createInstance(CodeEditorWidget, container, options, editorWidgetOptions);\n        return editor;\n    }\n    _createDiffEditorContributions() {\n        const contributions = EditorExtensionsRegistry.getDiffEditorContributions();\n        for (const desc of contributions) {\n            try {\n                this._register(this._instantiationService.createInstance(desc.ctor, this));\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n    }\n    get _targetEditor() { return this._editors.modified; }\n    getEditorType() { return EditorType.IDiffEditor; }\n    layout(dimension) { this._rootSizeObserver.observe(dimension); }\n    hasTextFocus() { return this._editors.original.hasTextFocus() || this._editors.modified.hasTextFocus(); }\n    saveViewState() {\n        var _a;\n        const originalViewState = this._editors.original.saveViewState();\n        const modifiedViewState = this._editors.modified.saveViewState();\n        return {\n            original: originalViewState,\n            modified: modifiedViewState,\n            modelState: (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.serializeState(),\n        };\n    }\n    restoreViewState(s) {\n        var _a;\n        if (s && s.original && s.modified) {\n            const diffEditorState = s;\n            this._editors.original.restoreViewState(diffEditorState.original);\n            this._editors.modified.restoreViewState(diffEditorState.modified);\n            if (diffEditorState.modelState) {\n                (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.restoreSerializedState(diffEditorState.modelState);\n            }\n        }\n    }\n    createViewModel(model) {\n        return this._instantiationService.createInstance(DiffEditorViewModel, model, this._options, this);\n    }\n    getModel() { var _a, _b; return (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.model) !== null && _b !== void 0 ? _b : null; }\n    setModel(model) {\n        if (!model && this._diffModel.get()) {\n            // Transitioning from a model to no-model\n            this._accessibleDiffViewer.close();\n        }\n        const vm = model ? ('model' in model) ? model : this.createViewModel(model) : undefined;\n        this._editors.original.setModel(vm ? vm.model.original : null);\n        this._editors.modified.setModel(vm ? vm.model.modified : null);\n        transaction(tx => {\n            this._diffModel.set(vm, tx);\n        });\n    }\n    /**\n     * @param changedOptions Only has values for top-level options that have actually changed.\n     */\n    updateOptions(changedOptions) {\n        this._options.updateOptions(changedOptions);\n    }\n    getContainerDomNode() { return this._domElement; }\n    getOriginalEditor() { return this._editors.original; }\n    getModifiedEditor() { return this._editors.modified; }\n    /**\n     * @deprecated Use `this.getDiffComputationResult().changes2` instead.\n     */\n    getLineChanges() {\n        var _a;\n        const diffState = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get();\n        if (!diffState) {\n            return null;\n        }\n        return toLineChanges(diffState);\n    }\n    revert(diff) {\n        var _a;\n        const model = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.model;\n        if (!model) {\n            return;\n        }\n        const changes = diff.innerChanges\n            ? diff.innerChanges.map(c => ({\n                range: c.modifiedRange,\n                text: model.original.getValueInRange(c.originalRange)\n            }))\n            : [\n                {\n                    range: diff.modified.toExclusiveRange(),\n                    text: model.original.getValueInRange(diff.original.toExclusiveRange())\n                }\n            ];\n        this._editors.modified.executeEdits('diffEditor', changes);\n    }\n    accessibleDiffViewerNext() { this._accessibleDiffViewer.next(); }\n    accessibleDiffViewerPrev() { this._accessibleDiffViewer.prev(); }\n    mapToOtherSide() {\n        var _a, _b;\n        const isModifiedFocus = this._editors.modified.hasWidgetFocus();\n        const source = isModifiedFocus ? this._editors.modified : this._editors.original;\n        const destination = isModifiedFocus ? this._editors.original : this._editors.modified;\n        let destinationSelection;\n        const sourceSelection = source.getSelection();\n        if (sourceSelection) {\n            const mappings = (_b = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.diff.get()) === null || _b === void 0 ? void 0 : _b.mappings.map(m => isModifiedFocus ? m.lineRangeMapping.flip() : m.lineRangeMapping);\n            if (mappings) {\n                const newRange1 = translatePosition(sourceSelection.getStartPosition(), mappings);\n                const newRange2 = translatePosition(sourceSelection.getEndPosition(), mappings);\n                destinationSelection = Range.plusRange(newRange1, newRange2);\n            }\n        }\n        return { destination, destinationSelection };\n    }\n    switchSide() {\n        const { destination, destinationSelection } = this.mapToOtherSide();\n        destination.focus();\n        if (destinationSelection) {\n            destination.setSelection(destinationSelection);\n        }\n    }\n    exitCompareMove() {\n        const model = this._diffModel.get();\n        if (!model) {\n            return;\n        }\n        model.movedTextToCompare.set(undefined, undefined);\n    }\n    collapseAllUnchangedRegions() {\n        var _a;\n        const unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\n        if (!unchangedRegions) {\n            return;\n        }\n        transaction(tx => {\n            for (const region of unchangedRegions) {\n                region.collapseAll(tx);\n            }\n        });\n    }\n    showAllUnchangedRegions() {\n        var _a;\n        const unchangedRegions = (_a = this._diffModel.get()) === null || _a === void 0 ? void 0 : _a.unchangedRegions.get();\n        if (!unchangedRegions) {\n            return;\n        }\n        transaction(tx => {\n            for (const region of unchangedRegions) {\n                region.showAll(tx);\n            }\n        });\n    }\n};\nDiffEditorWidget = __decorate([\n    __param(3, IContextKeyService),\n    __param(4, IInstantiationService),\n    __param(5, ICodeEditorService),\n    __param(6, IAudioCueService),\n    __param(7, IEditorProgressService)\n], DiffEditorWidget);\nexport { DiffEditorWidget };\nfunction translatePosition(posInOriginal, mappings) {\n    const mapping = findLast(mappings, m => m.original.startLineNumber <= posInOriginal.lineNumber);\n    if (!mapping) {\n        // No changes before the position\n        return Range.fromPositions(posInOriginal);\n    }\n    if (mapping.original.endLineNumberExclusive <= posInOriginal.lineNumber) {\n        const newLineNumber = posInOriginal.lineNumber - mapping.original.endLineNumberExclusive + mapping.modified.endLineNumberExclusive;\n        return Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n    }\n    if (!mapping.innerChanges) {\n        // Only for legacy algorithm\n        return Range.fromPositions(new Position(mapping.modified.startLineNumber, 1));\n    }\n    const innerMapping = findLast(mapping.innerChanges, m => m.originalRange.getStartPosition().isBeforeOrEqual(posInOriginal));\n    if (!innerMapping) {\n        const newLineNumber = posInOriginal.lineNumber - mapping.original.startLineNumber + mapping.modified.startLineNumber;\n        return Range.fromPositions(new Position(newLineNumber, posInOriginal.column));\n    }\n    if (innerMapping.originalRange.containsPosition(posInOriginal)) {\n        return innerMapping.modifiedRange;\n    }\n    else {\n        const l = lengthBetweenPositions(innerMapping.originalRange.getEndPosition(), posInOriginal);\n        return Range.fromPositions(addLength(innerMapping.modifiedRange.getEndPosition(), l));\n    }\n}\nfunction lengthBetweenPositions(position1, position2) {\n    if (position1.lineNumber === position2.lineNumber) {\n        return new LengthObj(0, position2.column - position1.column);\n    }\n    else {\n        return new LengthObj(position2.lineNumber - position1.lineNumber, position2.column - 1);\n    }\n}\nfunction addLength(position, length) {\n    if (length.lineCount === 0) {\n        return new Position(position.lineNumber, position.column + length.columnCount);\n    }\n    else {\n        return new Position(position.lineNumber + length.lineCount, length.columnCount + 1);\n    }\n}\nfunction toLineChanges(state) {\n    return state.mappings.map(x => {\n        const m = x.lineRangeMapping;\n        let originalStartLineNumber;\n        let originalEndLineNumber;\n        let modifiedStartLineNumber;\n        let modifiedEndLineNumber;\n        let innerChanges = m.innerChanges;\n        if (m.original.isEmpty) {\n            // Insertion\n            originalStartLineNumber = m.original.startLineNumber - 1;\n            originalEndLineNumber = 0;\n            innerChanges = undefined;\n        }\n        else {\n            originalStartLineNumber = m.original.startLineNumber;\n            originalEndLineNumber = m.original.endLineNumberExclusive - 1;\n        }\n        if (m.modified.isEmpty) {\n            // Deletion\n            modifiedStartLineNumber = m.modified.startLineNumber - 1;\n            modifiedEndLineNumber = 0;\n            innerChanges = undefined;\n        }\n        else {\n            modifiedStartLineNumber = m.modified.startLineNumber;\n            modifiedEndLineNumber = m.modified.endLineNumberExclusive - 1;\n        }\n        return {\n            originalStartLineNumber,\n            originalEndLineNumber,\n            modifiedStartLineNumber,\n            modifiedEndLineNumber,\n            charChanges: innerChanges === null || innerChanges === void 0 ? void 0 : innerChanges.map(m => ({\n                originalStartLineNumber: m.originalRange.startLineNumber,\n                originalStartColumn: m.originalRange.startColumn,\n                originalEndLineNumber: m.originalRange.endLineNumber,\n                originalEndColumn: m.originalRange.endColumn,\n                modifiedStartLineNumber: m.modifiedRange.startLineNumber,\n                modifiedStartColumn: m.modifiedRange.startColumn,\n                modifiedEndLineNumber: m.modifiedRange.endLineNumber,\n                modifiedEndColumn: m.modifiedRange.endColumn,\n            }))\n        };\n    });\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as objects from '../../../base/common/objects.js';\nimport { ICodeEditorService } from '../services/codeEditorService.js';\nimport { CodeEditorWidget } from './codeEditorWidget.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet EmbeddedCodeEditorWidget = class EmbeddedCodeEditorWidget extends CodeEditorWidget {\n    constructor(domElement, options, codeEditorWidgetOptions, parentEditor, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        super(domElement, Object.assign(Object.assign({}, parentEditor.getRawOptions()), { overflowWidgetsDomNode: parentEditor.getOverflowWidgetsDomNode() }), codeEditorWidgetOptions, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        this._parentEditor = parentEditor;\n        this._overwriteOptions = options;\n        // Overwrite parent's options\n        super.updateOptions(this._overwriteOptions);\n        this._register(parentEditor.onDidChangeConfiguration((e) => this._onParentConfigurationChanged(e)));\n    }\n    getParentEditor() {\n        return this._parentEditor;\n    }\n    _onParentConfigurationChanged(e) {\n        super.updateOptions(this._parentEditor.getRawOptions());\n        super.updateOptions(this._overwriteOptions);\n    }\n    updateOptions(newOptions) {\n        objects.mixin(this._overwriteOptions, newOptions, true);\n        super.updateOptions(this._overwriteOptions);\n    }\n};\nEmbeddedCodeEditorWidget = __decorate([\n    __param(4, IInstantiationService),\n    __param(5, ICodeEditorService),\n    __param(6, ICommandService),\n    __param(7, IContextKeyService),\n    __param(8, IThemeService),\n    __param(9, INotificationService),\n    __param(10, IAccessibilityService),\n    __param(11, ILanguageConfigurationService),\n    __param(12, ILanguageFeaturesService)\n], EmbeddedCodeEditorWidget);\nexport { EmbeddedCodeEditorWidget };\n"],"names":["RestrictedRenderingContext","constructor","viewLayout","viewportData","this","_restrictedRenderingContextBrand","undefined","_viewLayout","scrollWidth","getScrollWidth","scrollHeight","getScrollHeight","visibleRange","bigNumbersDelta","vInfo","getCurrentViewport","scrollTop","top","scrollLeft","left","viewportWidth","width","viewportHeight","height","getScrolledTopFromAbsoluteTop","absoluteTop","getVerticalOffsetForLineNumber","lineNumber","includeViewZones","getVerticalOffsetAfterLineNumber","getDecorationsInViewport","RenderingContext","viewLines","super","_renderingContextBrand","_viewLines","linesVisibleRangesForRange","range","includeNewLines","visibleRangeForPosition","position","LineVisibleRanges","outsideRenderedLine","ranges","continuesOnNextLine","HorizontalRange","from","result","Array","length","i","len","_horizontalRangeBrand","Math","round","toString","concat","FloatHorizontalRange","_floatHorizontalRangeBrand","compare","a","b","HorizontalPosition","originalLeft","VisibleRanges","ViewController","configuration","viewModel","userInputEvents","commandDelegate","paste","text","pasteOnNewLine","multicursorText","mode","type","compositionType","replacePrevCharCnt","replaceNextCharCnt","positionDelta","compositionStart","startComposition","compositionEnd","endComposition","cut","setSelection","modelSelection","CoreNavigationCommands","SetSelection","runCoreEditorCommand","source","selection","_validateViewColumn","viewPosition","minColumn","getLineMinColumn","column","Position","_hasMulticursorModifier","data","options","get","altKey","ctrlKey","metaKey","_hasNonMulticursorModifier","dispatchMouse","selectionClipboardIsOn","platform","columnSelection","middleButton","_columnSelect","mouseColumn","inSelectionMode","startedOnLineNumbers","_lastCursorLineSelect","revealType","_createCursor","_lineSelectDrag","_lineSelect","mouseDownCount","_selectAll","_lastCursorLineSelectDrag","onInjectedText","_lastCursorWordSelect","_wordSelectDrag","_wordSelect","shiftKey","_lastCursorMoveToSelect","_moveToSelect","moveTo","_usualArgs","_convertViewToModelPosition","MoveTo","MoveToSelect","doColumnSelect","ColumnSelect","wholeLine","CreateCursor","LastCursorMoveToSelect","WordSelect","WordSelectDrag","LastCursorWordSelect","LineSelect","LineSelectDrag","LastCursorLineSelect","LastCursorLineSelectDrag","SelectAll","coordinatesConverter","convertViewPositionToModelPosition","emitKeyDown","e","emitKeyUp","emitContextMenu","emitMouseMove","emitMouseLeave","emitMouseUp","emitMouseDown","emitMouseDrag","emitMouseDrop","emitMouseDropCanceled","emitMouseWheel","RenderedLinesCollection","createLine","_createLine","_set","flush","rendLineNumberStart","lines","_lines","_rendLineNumberStart","_get","getStartLineNumber","getEndLineNumber","getCount","getLine","lineIndex","BugIndicatingError","onLinesDeleted","deleteFromLineNumber","deleteToLineNumber","startLineNumber","endLineNumber","deleteCnt","deleteStartIndex","deleteCount","deleteAboveCount","splice","onLinesChanged","changeFromLineNumber","changeCount","changeToLineNumber","someoneNotified","changedLineNumber","onContentChanged","onLinesInserted","insertFromLineNumber","insertToLineNumber","insertCnt","newLines","insertIndex","beforeLines","slice","afterLines","deletedLines","onTokensChanged","notifiedSomeone","rng","toLineNumber","fromLineNumber","max","to","min","VisibleLinesCollection","host","_host","domNode","_createDomNode","_linesCollection","createVisibleLine","createFastDomNode","document","createElement","setClassName","setPosition","setAttribute","onConfigurationChanged","hasChanged","onFlushed","count","deleted","lineDomNode","getDomNode","removeChild","onScrollChanged","scrollTopChanged","onZonesChanged","getVisibleLine","renderLines","inp","renderer","ViewLayerRenderer","ctx","linesLength","resCtx","render","relativeVerticalOffset","inContext","stopLineNumber","deltaTop","x","_finishRendering","_renderUntouchedLines","_insertLinesBefore","removeCnt","_removeLinesBefore","_insertLinesAfter","_removeLinesAfter","startIndex","endIndex","deltaLN","layoutLine","newLinesLen","removeCount","removeIndex","_finishRenderingNewLines","domNodeIsEmpty","newLinesHTML","wasNew","_ttPolicy","createHTML","lastChild","innerHTML","insertAdjacentHTML","currChild","line","setDomNode","previousSibling","_finishRenderingInvalidLines","invalidLinesHTML","wasInvalid","hugeDomNode","firstChild","parentNode","replaceChild","sb","_sb","reset","hadNewLine","renderLine","build","hadInvalidLine","createTrustedTypesPolicy","value","StringBuilder","ViewOverlays","ViewPart","context","_visibleLines","fontInfo","_context","applyFontInfo","_dynamicOverlays","_isFocused","shouldRender","dispose","ViewOverlayLine","addDynamicOverlay","overlay","push","onFocusChanged","isFocused","prepareRender","toRender","filter","dynamicOverlay","onDidRender","_viewOverlaysRender","toggleClassName","dynamicOverlays","_configuration","_lineHeight","_domNode","_renderedContent","appendString","String","setTop","setHeight","ContentViewOverlays","layoutInfo","_contentWidth","contentWidth","scrollWidthChanged","setWidth","MarginViewOverlays","_contentLeft","contentLeft","scrollHeightChanged","ViewEventHandler","addEventHandler","removeEventHandler","PartFingerprints","write","target","partId","read","r","getAttribute","parseInt","collect","child","stopAt","resultLen","ownerDocument","body","nodeType","ELEMENT_NODE","parentElement","Uint8Array","ViewUserInputEvents","onKeyDown","onKeyUp","onContextMenu","onMouseMove","onMouseLeave","onMouseDown","onMouseUp","onMouseDrag","onMouseDrop","onMouseDropCanceled","onMouseWheel","_coordinatesConverter","_a","call","_convertViewToModelMouseEvent","event","_convertViewToModelMouseTarget","convertViewToModelMouseTarget","Object","assign","convertViewRangeToModelRange","detail","convertViewToModelViewZoneData","viewZoneId","positionBefore","positionAfter","afterLineNumber","CodeEditorContributions","Disposable","_editor","_instantiationService","_instances","_register","DisposableMap","_pending","Map","_finishedInstantiation","initialize","editor","contributions","instantiationService","desc","has","id","onUnexpectedError","Error","set","_instantiateSome","runWhenIdle","saveViewState","contributionsState","contribution","restoreViewState","_instantiateById","onBeforeInteractionEvent","onAfterModelAttached","instantiation","contribs","_findPendingContributionsByInstantiation","contrib","delete","instance","createInstance","ctor","console","warn","err","CodeEditorWidget_1","__decorate","decorators","key","d","c","arguments","getOwnPropertyDescriptor","Reflect","decorate","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","rejected","done","then","apply","EDITOR_ID","ModelData","model","view","hasRealView","listenersToRemove","attachedView","onBeforeDetached","CodeEditorWidget","isSimpleWidget","domElement","_options","codeEditorWidgetOptions","codeEditorService","commandService","contextKeyService","themeService","notificationService","accessibilityService","languageConfigurationService","languageFeaturesService","_deliveryQueue","createEventDeliveryQueue","_contributions","_onDidDispose","Emitter","onDidDispose","_onDidChangeModelContent","deliveryQueue","onDidChangeModelContent","_onDidChangeModelLanguage","onDidChangeModelLanguage","_onDidChangeModelLanguageConfiguration","onDidChangeModelLanguageConfiguration","_onDidChangeModelOptions","onDidChangeModelOptions","_onDidChangeModelDecorations","onDidChangeModelDecorations","_onDidChangeModelTokens","onDidChangeModelTokens","_onDidChangeConfiguration","onDidChangeConfiguration","_onDidChangeModel","onDidChangeModel","_onDidChangeCursorPosition","onDidChangeCursorPosition","_onDidChangeCursorSelection","onDidChangeCursorSelection","_onDidAttemptReadOnlyEdit","InteractionEmitter","onDidAttemptReadOnlyEdit","_onDidLayoutChange","onDidLayoutChange","_editorTextFocus","BooleanEventEmitter","onDidFocusEditorText","onDidChangeToTrue","onDidBlurEditorText","onDidChangeToFalse","_editorWidgetFocus","onDidFocusEditorWidget","onDidBlurEditorWidget","_onWillType","onWillType","_onDidType","onDidType","_onDidCompositionStart","onDidCompositionStart","_onDidCompositionEnd","onDidCompositionEnd","_onDidPaste","onDidPaste","_onMouseUp","_onMouseDown","_onMouseDrag","_onMouseDrop","_onMouseDropCanceled","_onDropIntoEditor","onDropIntoEditor","_onContextMenu","_onMouseMove","_onMouseLeave","_onMouseWheel","_onKeyUp","_onKeyDown","_onDidContentSizeChange","onDidContentSizeChange","_onDidScrollChange","onDidScrollChange","_onDidChangeViewZones","onDidChangeViewZones","_onDidChangeHiddenAreas","onDidChangeHiddenAreas","_actions","_bannerDomNode","_dropIntoEditorDecorations","createDecorationsCollection","willCreateCodeEditor","_domElement","_overflowWidgetsDomNode","overflowWidgetsDomNode","_id","_decorationTypeKeysToIds","_decorationTypeSubtypes","_telemetryData","telemetryData","_createConfiguration","onDidChange","fire","_contextKeyService","createScoped","_notificationService","_codeEditorService","_commandService","_themeService","EditorContextKeysManager","EditorModeContext","createChild","ServiceCollection","IContextKeyService","_modelData","_focusTracker","CodeEditorWidgetFocusTracker","onChange","setValue","hasFocus","_contentWidgets","_overlayWidgets","_glyphMarginWidgets","isArray","EditorExtensionsRegistry","getEditorContributions","action","getEditorActions","internalAction","InternalEditorAction","label","alias","precondition","invokeFunction","accessor","runEditorCommand","isDropIntoEnabled","enabled","dom","onDragEnter","onDragOver","getTargetAtClientPoint","clientX","clientY","showDropIndicatorAt","onDrop","removeDropIndicator","dataTransfer","onDragLeave","onDragEnd","addCodeEditor","writeScreenReaderContent","reason","EditorConfiguration","getId","getEditorType","editorCommon","ICodeEditor","removeCodeEditor","clear","_removeDecorationTypes","_postDetachModelCleanup","_detachModel","invokeWithinContext","fn","updateOptions","newOptions","getOptions","getOption","getRawOptions","getOverflowWidgetsDomNode","getConfiguredWordAtPosition","WordOperations","getWordAtPosition","getValue","preserveBOM","eolPreference","lineEnding","newValue","getModel","setModel","hasTextFocus","detachedModel","_attachModel","hasModel","focus","oldModelUrl","uri","newModelUrl","decorationType","subTypes","subType","_removeDecorationType","getVisibleRanges","getVisibleRangesPlusViewportAboveBelow","getWhitespaces","_getVerticalOffsetAfterPosition","modelData","modelLineNumber","modelColumn","modelPosition","validatePosition","convertModelPositionToViewPosition","getTopForLineNumber","_getVerticalOffsetForPosition","getTopForPosition","getBottomForLineNumber","setHiddenAreas","map","Range","lift","getVisibleColumnFromPosition","rawPosition","tabSize","CursorColumns","visibleColumnFromColumn","getLineContent","getPosition","isIPosition","setSelections","selectionStartLineNumber","selectionStartColumn","positionLineNumber","positionColumn","_sendRevealRange","modelRange","verticalType","revealHorizontal","scrollType","isIRange","validatedModelRange","validateRange","viewRange","convertModelRangeToViewRange","revealRange","revealLine","_revealLine","revealLineInCenter","revealLineInCenterIfOutsideViewport","revealLineNearTop","revealPosition","_revealPosition","revealPositionInCenter","revealPositionInCenterIfOutsideViewport","revealPositionNearTop","getSelection","getSelections","something","isSelection","Selection","isISelection","isRange","_setSelectionImpl","startColumn","endColumn","sel","revealLines","_revealLines","revealLinesInCenter","revealLinesInCenterIfOutsideViewport","revealLinesNearTop","revealVerticalInCenter","_revealRange","revealRangeInCenter","revealRangeInCenterIfOutsideViewport","revealRangeNearTop","revealRangeNearTopIfOutsideViewport","revealRangeAtTop","getContentWidth","getScrollLeft","getCurrentScrollLeft","getContentHeight","getScrollTop","getCurrentScrollTop","setScrollLeft","newScrollLeft","setScrollPosition","setScrollTop","newScrollTop","hasPendingScrollAnimation","cursorState","saveCursorState","viewState","saveState","s","codeEditorState","restoreCursorState","reducedState","reduceRestoreState","restoreState","handleInitialized","_getViewModel","visibleLinesStabilized","getContribution","getActions","values","getSupportedActions","isSupported","getAction","trigger","handlerId","payload","_startComposition","_endComposition","args","_type","_compositionType","replaceCharCnt","_paste","_cut","run","_triggerEditorCommand","_triggerCommand","executeCommand","startPosition","getStartPosition","endPosition","languageId","command","getEditorCommand","pushUndoStop","pushStackElement","popUndoStop","popStackElement","executeEdits","edits","endCursorState","cursorStateComputer","executeCommands","commands","decorations","EditorDecorationsCollection","changeDecorations","callback","getLineDecorations","filterValidationDecorations","getDecorationsInRange","deltaDecorations","oldDecorations","newDecorations","removeDecorations","decorationIds","changeAccessor","removeDecorationsByType","decorationTypeKey","oldDecorationsIds","hasOwnProperty","getLayoutInfo","createOverviewRuler","cssClassName","getContainerDomNode","delegateVerticalScrollbarPointerDown","browserEvent","delegateScrollFromMouseWheelEvent","layout","dimension","observeContainer","hasWidgetFocus","addContentWidget","widget","widgetData","layoutContentWidget","widgetId","removeContentWidget","addOverlayWidget","layoutOverlayWidget","removeOverlayWidget","addGlyphMarginWidget","layoutGlyphMarginWidget","removeGlyphMarginWidget","changeViewZones","change","getScrolledVisiblePosition","getOffsetForColumn","glyphMarginWidth","lineNumbersWidth","decorationsWidth","forceRedraw","setAriaOptions","setBanner","domNodeHeight","contains","setReservedHeight","prepend","getLanguageId","setIsDominatedByLongLines","isDominatedByLongLines","setModelLineCount","getLineCount","onBeforeAttached","ViewModel","DOMLineBreaksComputerFactory","create","MonospaceLineBreaksComputerFactory","onWillDispose","onEvent","kind","reachedMaxCursorCount","multiCursorLimit","message","nls","prompt","Severity","Warning","query","positions","selections","e1","secondaryPositions","e2","secondarySelections","modelVersionId","oldSelections","oldModelVersionId","_createView","appendChild","keys","viewUserInputEvents","View","getColorTheme","removeAllDecorationsWithOwnerId","removeDomNode","removeAttribute","removeDecorationType","dropIntoEditorDecorationOptions","setContextValue","createKey","ModelDecorationOptions","register","description","className","IInstantiationService","ICodeEditorService","ICommandService","IThemeService","INotificationService","IAccessibilityService","ILanguageConfigurationService","ILanguageFeaturesService","_emitterOptions","_onDidChangeToTrue","_onDidChangeToFalse","_value","_editorSimpleInput","EditorContextKeys","editorSimpleInput","bindTo","_editorFocus","_textInputFocus","textInputFocus","editorTextFocus","_tabMovesFocus","tabMovesFocus","_editorReadonly","readOnly","_inDiffEditor","inDiffEditor","_editorColumnSelection","_hasMultipleSelections","hasMultipleSelections","_hasNonEmptySelection","hasNonEmptySelection","_canUndo","canUndo","_canRedo","canRedo","_updateFromConfig","_updateFromSelection","_updateFromFocus","_updateFromModel","TabFocus","onDidChangeTabFocus","tabFocusMode","getTabFocusMode","some","isEmpty","Boolean","_languageFeaturesService","_langId","_hasCompletionItemProvider","hasCompletionItemProvider","_hasCodeActionsProvider","hasCodeActionsProvider","_hasCodeLensProvider","hasCodeLensProvider","_hasDefinitionProvider","hasDefinitionProvider","_hasDeclarationProvider","hasDeclarationProvider","_hasImplementationProvider","hasImplementationProvider","_hasTypeDefinitionProvider","hasTypeDefinitionProvider","_hasHoverProvider","hasHoverProvider","_hasDocumentHighlightProvider","hasDocumentHighlightProvider","_hasDocumentSymbolProvider","hasDocumentSymbolProvider","_hasReferenceProvider","hasReferenceProvider","_hasRenameProvider","hasRenameProvider","_hasSignatureHelpProvider","hasSignatureHelpProvider","_hasInlayHintsProvider","hasInlayHintsProvider","_hasDocumentFormattingProvider","hasDocumentFormattingProvider","_hasDocumentSelectionFormattingProvider","hasDocumentSelectionFormattingProvider","_hasMultipleDocumentFormattingProvider","hasMultipleDocumentFormattingProvider","_hasMultipleDocumentSelectionFormattingProvider","hasMultipleDocumentSelectionFormattingProvider","_isInWalkThrough","isInWalkThroughSnippet","update","_update","completionProvider","codeActionProvider","codeLensProvider","definitionProvider","declarationProvider","implementationProvider","typeDefinitionProvider","hoverProvider","documentHighlightProvider","documentSymbolProvider","referenceProvider","renameProvider","documentFormattingEditProvider","documentRangeFormattingEditProvider","signatureHelpProvider","inlayHintsProvider","bufferChangeEvents","all","scheme","Schemas","walkThroughSnippet","_onChange","_hasFocus","_domFocusTracker","onDidFocus","onDidBlur","_decorationIds","_isChangingDecorations","listener","thisArgs","disposables","getRange","index","getDecorationRange","getRanges","decorationId","decoration","includes","squigglyStart","encodeURIComponent","squigglyEnd","getSquigglySVGData","color","dotdotdotStart","dotdotdotEnd","registerThemingParticipant","theme","collector","errorForeground","getColor","editorErrorForeground","addRule","warningForeground","editorWarningForeground","infoForeground","editorInfoForeground","hintForeground","editorHintForeground","unnecessaryForeground","editorUnnecessaryCodeOpacity","rgba","ToggleCollapseUnchangedRegions","Action2","title","localize","original","icon","Codicon","toggled","ContextKeyExpr","menu","when","MenuId","EditorTitle","order","group","configurationService","IConfigurationService","updateValue","registerAction2","ToggleShowMovedCodeBlocks","ToggleUseInlineViewWhenSpaceIsLimited","MenuRegistry","appendMenuItem","and","diffEditorRenderSideBySideInlineBreakpointReached","move","ContextKeyEqualsExpr","diffEditorCategory","SwitchSide","EditorAction2","arrowSwap","f1","category","arg","diffEditor","findFocusedDiffEditor","DiffEditorWidget","dryRun","destinationSelection","mapToOtherSide","switchSide","ExitCompareMove","close","comparingMovedCode","keybinding","weight","primary","exitCompareMove","CollapseAllUnchangedRegions","fold","collapseAllUnchangedRegions","ShowAllUnchangedRegions","unfold","showAllUnchangedRegions","accessibleDiffViewerCategory","AccessibleDiffViewerNext","accessibleDiffViewerNext","accessibleDiffViewerVisible","negate","AccessibleDiffViewerPrev","accessibleDiffViewerPrev","diffEditors","listDiffEditors","activeCodeEditor","getFocusedCodeEditor","getActiveCodeEditor","getModifiedEditor","getOriginalEditor","activeElement","getActiveElement","isElementOrParentOf","elementOrParent","element","CommandsRegistry","registerCommandAlias","applyObservableDecorations","DisposableStore","decorationsCollection","add","autorunOpts","debugName","reader","appendRemoveOnDispose","parent","toDisposable","ObservableElementSizeObserver","_width","_height","elementSizeObserver","ElementSizeObserver","observableValue","getWidth","getHeight","transaction","tx","observe","setAutomaticLayout","automaticLayout","startObserving","stopObserving","animatedObservable","base","store","targetVal","startVal","curVal","animationStartMs","animationFrame","passedMs","Date","now","t","floor","pow","requestAnimationFrame","autorunHandleChanges","createEmptyChangeSummary","animate","handleChange","didChange","cancelAnimationFrame","ViewZoneOverlayWidget","viewZone","htmlElement","ManagedOverlayWidget","applyStyle","actualHeight","actualTop","PlaceholderViewZone","_afterLineNumber","heightInPx","_actualTop","_actualHeight","showInHiddenAreas","onDomNodeTop","onComputedHeight","_overlayWidgetId","_counter","_overlayWidget","style","autorun","val","entries","replace","m","toLowerCase","readHotReloadableExport","isHotReloadEnabled","observableSignalFromEvent","registerHotReloadHandler","oldExports","v","_newExports","observeHotReloadableExports","applyViewZones","viewZones","setIsUpdating","lastViewZoneIds","curViewZones","viewZonIdsPerViewZone","viewZoneIdPerOnChangeObservable","removeZone","z","addZone","changeSummary","changedObservable","vz","layoutZone","DisposableCancellationTokenSource","CancellationTokenSource","accessibleDiffViewerInsertIcon","registerIcon","accessibleDiffViewerRemoveIcon","remove","accessibleDiffViewerCloseIcon","AccessibleDiffViewer","_parentNode","_visible","_setVisible","_canClose","_diffs","_editors","derivedWithStore","visible","visibility","recomputeInitiallyAndOnChange","isVisible","nextGroup","prev","previousGroup","canClose","_audioCueService","_groups","_currentGroupIdx","_currentElementIdx","groups","currentGroup","idx","currentGroupIndex","currentElement","diffs","originalLineCount","modifiedLineCount","g","groupAdjacentBy","modified","endLineNumberExclusive","viewElementGroupLineMargin","viewElements","HeaderViewElement","origFullRange","LineRange","modifiedFullRange","forEachAdjacent","origRange","modifiedRange","forEach","origLineNumber","UnchangedLineViewElement","DeletedLineViewElement","modifiedLineNumber","AddedLineViewElement","join","originalRange","ViewElementGroup","LineRangeMapping","computeViewElementGroups","p","findIndex","currentViewItem","LineType","Deleted","playAudioCue","AudioCue","diffLineDeleted","Added","diffLineInserted","Header","diff","fromPositions","_goToGroupDelta","delta","subtransaction","OffsetRange","ofLength","clipCyclic","_goToLineDelta","clip","goToNextLine","goToPreviousLine","goToLine","indexOf","revealCurrentElementInEditor","curElem","originalLineNumber","IAudioCueService","Unchanged","_element","_model","_languageService","actionBarContainer","_actionBar","ActionBar","Action","ThemeIcon","asClassName","_content","_scrollbar","DomScrollableElement","autorunWithStore","_render","addStandardDisposableListener","equals","preventDefault","originalOptions","modifiedOptions","container","originalModel","modifiedModel","originalModelOpts","modifiedModelOpts","lineHeight","viewItem","row","header","diffIndex","diffsLength","getAriaLines","originalChangedLinesCntAria","modifiedChangedLinesCntAria","comment","cell","createTextNode","_createRow","isSelectedObs","derived","isSelected","tabIndex","addDisposableListener","scanDomNode","item","originalLayoutInfo","originalLineNumbersWidth","modifiedLayoutInfo","modifiedLineNumbersWidth","rowClassName","lineNumbersExtraClassName","spacerIcon","minWidth","ariaLevel","innerText","paddingRight","spacer","spacerCodicon","lineContent","html","_getLineHtml","languageIdCodec","ariaLabel","lineTokens","LineTokens","createEmpty","isBasicASCII","ViewLineRenderingData","mightContainNonBasicASCII","containsRTL","mightContainRTL","renderViewLine2","RenderLineInput","isMonospace","canUseHalfwidthRightwardsArrow","spaceWidth","middotWidth","wsmiddotWidth","EditorFontLigatures","OFF","ILanguageService","diffInsertIcon","diffRemoveIcon","diffLineAddDecorationBackgroundWithIndicator","isWholeLine","linesDecorationsClassName","marginClassName","diffLineDeleteDecorationBackgroundWithIndicator","diffLineAddDecorationBackground","diffLineDeleteDecorationBackground","diffAddDecoration","shouldFillLineOnLineBreak","diffWholeLineAddDecoration","diffAddDecorationEmpty","diffDeleteDecoration","diffWholeLineDeleteDecoration","diffDeleteDecorationEmpty","arrowRevertChange","glyphMarginHoverMessage","MarkdownString","isTrusted","supportThemeIcons","appendMarkdown","glyphMarginClassName","arrowRight","zIndex","MovedBlocksLinesPart","_rootElement","_diffModel","_originalEditorLayoutInfo","_modifiedEditorLayoutInfo","_originalScrollTop","observableFromEvent","_modifiedScrollTop","_viewZonesChanged","_modifiedViewZonesChangedSignal","_originalViewZonesChangedSignal","_state","replaceChildren","moves","movedTexts","infoOrig","infoMod","computeLineStart","start","lineRangeMapping","startOffset","end","bottom","fromWithoutScroll","toWithoutScroll","sort","tieBreakComparators","compareBy","l","booleanComparator","numberComparator","LinesLayout","compute","lineAreaLeft","verticalScrollbarWidth","lineAreaWidth","getTrackCount","padding","movedCodeBlockPadding","verticalY","getTrack","arrowHeight","arrowWidth","right","rectWidth","rectHeight","rect","createElementNS","classList","path","toggle","activeMovedText","info","info2","movedBlockViewZones","constObservable","zones","blocks","MovedBlockOverlayWidget","originalCursorPosition","modifiedCursorPosition","originalHasFocus","setTimeout","modifiedHasFocus","lastChangedEditor","summary","movedText","originalPos","find","modifiedPos","movedTextToCompare","setActiveMovedText","setsPerTrack","trackPerLineIdx","trackIdx","intersectsStrict","maxTrackCount","findMaxIdxBy","intersectWithRangeLength","OffsetRangeSet","addRange","_trackCount","lineIdx","_viewZone","_move","_kind","root","h","_nodes","marginRight","editorLayout","changes","actionBar","highlightToggledItems","caption","actionCompare","compareChanges","isActive","checked","DiffEditorDecorations","_decorations","renderIndicators","showEmptyDecorations","originalDecorations","modifiedDecorations","mappings","toInclusiveRange","innerChanges","shouldRenderRevertArrows","fullRangeOriginal","fullRangeModified","blockClassName","blockPadding","DiffEditorSash","_dimensions","_sashRatio","sashLeft","ratio","splitViewDefaultRatio","_computeSashLeft","_sash","Sash","getVerticalSashTop","getVerticalSashLeft","getVerticalSashHeight","orientation","_startSashPosition","onDidStart","sashPosition","currentX","startX","onDidEnd","onDidReset","enableSplitViewResizing","state","setBoundarySashes","sashes","orthogonalEndSash","desiredRatio","midPoint","MINIMUM_EDITOR_WIDTH","TreeElement","children","findId","candidate","candidateId","name","empty","size","OutlineElement","symbol","OutlineGroup","OutlineModel","registry","textModel","token","cts","provider","ordered","promises","displayName","provideDocumentSymbols","_makeOutlineElement","onUnexpectedExternalError","newProvider","cancel","isCancellationRequested","_compact","finally","res","childInfo","Iterable","first","getTopLevelSymbols","roots","compareRangesUsingStarts","asListOfDocumentSymbols","bucket","_flattenDocumentSymbols","getEndPosition","overrideContainerLabel","entry","tags","containerName","selectionRange","HideUnchangedRegionsFeature","isUpdatingViewZones","_isUpdatingViewZones","_modifiedOutlineSource","OutlineSource","ensureOriginalLineIsVisible","ensureModifiedLineIsVisible","unchangedRegions","_b","modifiedOutlineSource","origViewZones","modViewZones","sideBySide","renderSideBySide","curUnchangedRegions","shouldHideControls","getHiddenOriginalRange","origVz","CollapsedCodeOverlayWidget","originalUnchangedRange","getHiddenModifiedRange","modViewZone","modifiedUnchangedRange","unchangedLinesDecoration","unchangedLinesDecorationShow","isDefined","rightButton","region","collapseAll","stopPropagation","_textModel","_currentModel","documentSymbolProviderChanged","textModelChanged","Event","debounce","onDidChangeContent","src","isDisposed","getBreadcrumbItems","startRange","symbols","reverseOrder","_unchangedRegion","_unchangedRegionRange","hide","_revealModifiedHiddenLine","display","justifyContent","alignItems","flexShrink","$","role","onclick","showAll","renderLabelWithIcons","button","startTop","didMove","cur","visibleLineCountTop","isDragged","mouseMoveListener","window","abs","lineDelta","newVal","getMaxVisibleLineCountTop","mouseUpListener","showMoreAbove","hideUnchangedRegionsRevealLineCount","visibleLineCountBottom","getMaxVisibleLineCountBottom","top2","showMoreBelow","lineCount","linesHiddenText","span","addEventListener","items","SymbolKinds","toIcon","divItem","renderIcon","chevronRight","others","WorkerBasedDocumentDiffProvider_1","WorkerBasedDocumentDiffProvider","editorWorkerService","telemetryService","onDidChangeEventEmitter","diffAlgorithm","diffAlgorithmOnDidChangeSubscription","setOptions","computeDiff","cancellationToken","getLineMaxColumn","identical","quitEarly","DetailedLineRangeMapping","RangeMapping","getFullModelRange","uriKey","JSON","stringify","getAlternativeVersionId","diffCache","sw","StopWatch","timeMs","elapsed","publicLog2","timedOut","detectedMoves","computeMoves","IEditorWorkerService","ITelemetryService","IDiffProviderFactoryService","createDecorator","DiffProviderFactoryService","createDiffProvider","registerSingleton","DiffEditorViewModel","_activeMovedText","_diffProviderFactoryService","_isDiffUpToDate","isDiffUpToDate","_diff","_unchangedRegions","regions","originalDecorationIds","modifiedDecorationIds","hideUnchangedRegions","_hoveredMovedText","_cancellationTokenSource","_diffProvider","diffProvider","onChangeSignal","contentChangedSignal","observableSignal","debouncer","RunOnceScheduler","updateUnchangedRegions","newUnchangedRegions","UnchangedRegion","fromDiffs","hideUnchangedRegionsMinimumLineCount","hideUnchangedRegionsContextLineCount","lastUnchangedRegions","lastUnchangedRegionsOrigRanges","fromRange","lastUnchangedRegionsModRanges","setHiddenModifiedRange","textEdits","TextEditInfo","fromModelContentChanges","applyModifiedEdits","_lastDiff","DiffState","fromDiffResult","currentSyncedMovedText","intersect","schedule","applyOriginalEdits","documentDiffProvider","DefaultLinesDiffComputer","optimizeSequenceDiffs","originalTextEditInfos","combineTextEditInfos","modifiedTextEditInfos","ignoreTrimWhitespace","maxComputationTimeMs","showMoves","rangeMapping","setEndPosition","normalizeRangeMapping","showModifiedLine","showOriginalLine","waitForDiff","waitForState","serializeState","collapsedRegions","serialize","restoreSerializedState","deserialize","DiffMapping","minHiddenLineCount","minContext","inversedMappings","inverse","mapping","origStart","modStart","atStart","atEnd","_visibleLineCountTop","_visibleLineCountBottom","_shouldHideControls","setState","maxVisibleLineCountTop","maxVisibleLineCountBottom","originalTextModel","modifiedTextModel","InlineDiffDeletedCodeMargin","_visibility","_diffActions","_getViewZoneId","_marginDomNode","_modifiedEditor","_viewLineCounts","_originalTextModel","_contextMenuService","_clipboardService","lightBulb","currentLineNumberOffset","useShadowDOM","isIOS","showContextMenu","y","domForShadowRoot","getAnchor","actions","isDeletion","originalText","getValueInRange","toExclusiveRange","writeText","getEndOfLineSequence","revert","autoSelectFirstItem","getDomNodePagePosition","pad","posx","_updateLightBulbPosition","posy","marginDomNode","offset","lineNumberOffset","newTop","acc","ttPolicy","hasCharChanges","maxCharsPerLine","renderedLineCount","viewLineCounts","lineBreakData","actualDecorations","LineDecoration","Number","MAX_SAFE_INTEGER","lastBreakOffset","breakOffset","breakOffsets","viewLineTokens","sliceAndInflate","renderOriginalLine","extractWrapped","scrollBeyondLastColumn","trustedhtml","heightInLines","minWidthInPx","typicalHalfwidthCharacterWidth","LineSource","RenderOptions","fromEditor","modifiedEditorOptions","disableMonospaceOptimizations","lineDecorationsWidth","stopRenderingLineAfter","renderWhitespace","renderControlCharacters","fontLigatures","viewLineIdx","output","renderViewLine","characterMapping","getHorizontalOffset","ViewZoneManager","_diffEditorWidget","_canIgnoreViewZoneUpdateEvent","_originalTopPadding","_originalScrollOffset","_originalScrollOffsetAnimated","_store","_modifiedTopPadding","_modifiedScrollOffset","_modifiedScrollOffsetAnimated","isChangingViewZones","updateImmediately","_args","originalModelTokenizationCompleted","onDidChangeTokens","tokenization","backgroundTokenizationState","alignmentViewZoneIdsOrig","Set","alignmentViewZoneIdsMod","alignments","diffModel","innerHunkAlignment","computeRangeAlignment","alignmentsSyncedMovedText","syncedMovedText","createFakeLinesDiv","alignmentViewZonesDisposables","alignmentViewZones","_c","_d","_e","_f","_g","_h","alignmentsVal","modifiedTopPaddingVal","suppressMouseDown","originalTopPaddingVal","deletedCodeLineBreaksComputer","createLineBreaksComputer","addRequest","finalize","lineBreakDataIdx","modLineHeight","renderOptions","deletedCodeDomNode","mapToLineArray","getLineTokens","_","InlineDecoration","marginElement","zoneId","assertIsDefined","setZoneId","modifiedHeightInPx","originalHeightInPx","deltaLength","createViewZoneMarginArrow","arrow","orig","mod","scrollState","StableEditorScrollState","capture","alignmentViewZones_","aOrig","aMod","restore","ignoreChange","scrollLeftChanged","newScrollTopModified","newScrollTopOriginal","deltaOrigToMod","trueTopOriginal","originalEditor","modifiedEditor","originalEditorAlignmentViewZones","modifiedEditorAlignmentViewZones","originalLineHeightOverrides","ArrayQueue","getAdditionalLineHeights","modifiedLineHeightOverrides","origLineHeight","lastOriginalLineNumber","lastModifiedLineNumber","handleAlignmentsOutsideOfDiffs","untilOriginalLineNumberExclusive","untilModifiedLineNumberExclusive","origNext","peek","modNext","distOrig","MAX_VALUE","distNext","dequeue","lastModLineNumber","lastOrigLineNumber","emitAlignment","origLineNumberExclusive","modLineNumberExclusive","originalAdditionalHeight","takeWhile","reduce","modifiedAdditionalHeight","viewZonesToIgnore","viewZoneHeights","wrappingZoneHeights","hasWrapping","wrappingColumn","editorLineHeight","getModelLineViewLineCount","w","arr1","arr2","keySelector","combine","j","val1","val2","key1","key2","joinCombine","v1","v2","IClipboardService","IContextMenuService","OverviewRulerPart_1","OverviewRulerPart","_rootWidth","_rootHeight","currentColorTheme","onDidColorThemeChange","currentColors","insertColor","diffOverviewRulerInserted","diffInserted","defaultInsertColor","transparent","removeColor","diffOverviewRulerRemoved","diffRemoved","defaultRemoveColor","scrollTopObservable","scrollHeightObservable","renderOverviewRuler","viewportDomElement","diffOverviewRoot","ENTIRE_DIFF_OVERVIEW_WIDTH","EventType","POINTER_DOWN","MOUSE_WHEEL","passive","originalOverviewRuler","modifiedOverviewRuler","origViewZonesChanged","modViewZonesChanged","origHiddenRangesChanged","modHiddenRangesChanged","colors","createZones","vm","OverviewRulerZone","originalZones","modifiedZones","setZones","freeSpace","ONE_OVERVIEW_WIDTH","setLayout","scrollBarOptions","ScrollbarState","verticalHasArrows","arrowSize","verticalScrollbarSize","getSliderPosition","getSliderSize","registerColor","dark","light","hcDark","hcLight","DelegatingEditor","idCounter","_targetEditor","DiffEditorEditors","originalEditorElement","modifiedEditorElement","_createInnerEditor","_keybindingService","_createLeftHandSideEditor","editorOptions","_createRightHandSideEditor","changedOptions","_adjustOptionsForRightHandSide","_adjustOptionsForLeftHandSide","leftHandSideOptions","_constructInnerEditor","rightHandSideOptions","editorWidgetOptions","contentHeight","contentHeightChanged","contentWidthChanged","_reader","_adjustOptionsForSubEditor","unicodeHighlight","wordWrapOverride1","diffWordWrap","wordWrapOverride2","stickyScroll","nonBasicASCII","ambiguousCharacters","invisibleCharacters","originalAriaLabel","_updateAriaLabel","originalEditable","dropIntoEditor","extraEditorClassName","modifiedAriaLabel","revealHorizontalRightPadding","EditorOptions","defaultValue","scrollbar","clonedOptions","vertical","folding","codeLens","diffCodeLens","fixedOverflowWidgets","minimap","ariaNavigationTip","lookupKeybinding","getAriaLabel","accessibilityVerbose","replaceAll","IKeybindingService","DiffEditorOptions","diffEditorWidth","couldShowInlineViewBecauseOfSize","renderSideBySideInlineBreakpoint","useInlineViewWhenSpaceIsLimited","renderMarginRevertIcon","maxComputationTime","experimental","isInEmbeddedEditor","onlyShowAccessibleDiffViewer","revealLineCount","contextLineCount","minimumLineCount","optionsCopy","validateDiffEditorOptions","diffEditorDefaultOptions","newDiffEditorOptions","defaults","validateBooleanOption","clampedFloat","clampedInt","maxFileSize","validateStringSetOption","collapseUnchangedRegions","_parentContextKeyService","_parentInstantiationService","_editorProgressService","elements","disposableObservableValue","fromObservableLight","_boundarySashes","_accessibleDiffViewerShouldBeVisible","_accessibleDiffViewerVisible","movedBlocksLinesPart","_layoutInfo","_rootSizeObserver","originalWidth","decorationsLeft","modifiedWidth","originalWidthWithoutMovedBlockLines","_diffValue","onDidUpdateDiff","willCreateDiffEditor","isEmbeddedDiffEditor","isEmbeddedDiffEditorKey","comparingMovedCodeKey","diffEditorRenderSideBySideInlineBreakpointReachedContextKeyValue","o","o2","showSash","boundarySashes","unchangedRangesFeature","_accessibleDiffViewer","accessibleDiffViewer","_createDiffEditorContributions","addDiffEditor","runAndSubscribe","diffLineModified","show","getDiffEditorContributions","EditorType","IDiffEditor","modelState","diffEditorState","createViewModel","getLineChanges","diffState","originalStartLineNumber","originalEndLineNumber","modifiedStartLineNumber","modifiedEndLineNumber","charChanges","originalStartColumn","originalEndColumn","modifiedStartColumn","modifiedEndColumn","isModifiedFocus","destination","sourceSelection","flip","newRange1","translatePosition","newRange2","plusRange","posInOriginal","findLast","newLineNumber","innerMapping","isBeforeOrEqual","containsPosition","position1","position2","LengthObj","columnCount","IEditorProgressService","EmbeddedCodeEditorWidget","parentEditor","_parentEditor","_overwriteOptions","_onParentConfigurationChanged","getParentEditor","objects"],"sourceRoot":""}