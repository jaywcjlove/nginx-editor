{"version":3,"file":"static/js/monaco-editor-vendor.ec949289.e7bb09cf.js","mappings":"8TAIIA,EAA0C,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2HC,EAAvHC,EAAIC,UAAUC,OAAQC,EAAIH,EAAI,EAAIJ,EAAkB,OAATE,EAAgBA,EAAOM,OAAOC,yBAAyBT,EAAQC,GAAOC,EACrH,GAAuB,kBAAZQ,SAAoD,oBAArBA,QAAQC,SAAyBJ,EAAIG,QAAQC,SAASZ,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIU,EAAIb,EAAWO,OAAS,EAAGM,GAAK,EAAGA,KAAST,EAAIJ,EAAWa,MAAIL,GAAKH,EAAI,EAAID,EAAEI,GAAKH,EAAI,EAAID,EAAEH,EAAQC,EAAKM,GAAKJ,EAAEH,EAAQC,KAASM,GAChJ,OAAOH,EAAI,GAAKG,GAAKC,OAAOK,eAAeb,EAAQC,EAAKM,GAAIA,CAChE,EACIO,EAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAUhB,EAAQC,GAAOe,EAAUhB,EAAQC,EAAKc,EAAa,CACxE,EACIE,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,EAAQ,KAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,OAClE,GACJ,EAQIO,EAA2B,SAAAC,IAAAC,EAAAA,EAAAA,GAAAF,EAAAC,GAAA,IAAAE,GAAAC,EAAAA,EAAAA,GAAAJ,GAC3B,SAAAA,EAAYK,EAAmBC,GAAc,IAAAC,EAWrC,OAXqCC,EAAAA,EAAAA,GAAA,KAAAR,IACzCO,EAAAJ,EAAAM,KAAA,KAAMH,IACDI,iBAAgB,kBAAMH,EAAKI,kBAAkB,IAClDJ,EAAKK,oBAAmB,kBAAML,EAAKI,kBAAkB,IACrDJ,EAAKM,cAAgBR,EAAkBS,UAAU,gBAAgB,GACjEP,EAAKQ,kBAAoB,KACzBR,EAAKS,+BAA8B,SAACC,EAAOC,EAAQC,GAAU,OAAKrC,GAASsC,EAAAA,EAAAA,GAAAb,QAAO,OAAQ,GAAMc,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAhC,MAAA,UACzFyB,EAAQ,CAAFO,EAAAhC,KAAA,eAAAgC,EAAAE,OAAA,SACA,MAAI,cAAAF,EAAAE,OAAA,SAERC,KAAKC,aAAaX,EAAQD,IAAM,wBAAAQ,EAAAK,OAAA,GAAAP,EAAA,SACzC,IAAEhB,CACR,CAqDC,OArDAwB,EAAAA,EAAAA,GAAA/B,EAAA,EAAAlC,IAAA,mBAAAyB,MACD,WACI,IAC2CyC,EADvCC,GAAgB,EAAMC,GAAAC,EAAAA,EAAAA,GACLP,KAAKQ,mBAAiB,IAA3C,IAAAF,EAAAG,MAAAL,EAAAE,EAAAI,KAAAzC,MAA6C,CACzC,IADamC,EAAAzC,MACDgD,eAAgB,CACxBN,GAAgB,EAChB,KACJ,CACJ,CAAC,OAAAO,GAAAN,EAAAxC,EAAA8C,EAAA,SAAAN,EAAAO,GAAA,CACDb,KAAKf,cAAc6B,IAAIT,EAC3B,GAAC,CAAAnE,IAAA,sBAAAyB,MACD,SAAoBoD,GAChBf,KAAKb,kBAAoB4B,CAC7B,GAAC,CAAA7E,IAAA,sBAAAyB,MACD,WACI,OAAOqC,KAAKb,iBAChB,GAAC,CAAAjD,IAAA,eAAAyB,MACD,SAAaqD,EAAQ3B,GAEjB,IADcW,KAAKiB,UAAUD,EAAQ3B,EAAM6B,UAC/B,CACR,GAAI7B,EAAM6B,SAAU,CAChB,IAAMC,EAAS9B,EAAM6B,SAASE,OAC9B,GAAID,IAAWE,EAAAA,GAAQC,MAAQH,IAAWE,EAAAA,GAAQE,MAG9C,OADAC,EAAAA,EAAAA,oBAAmBnC,EAAM6B,SAASO,YAC3BT,CAEf,CACA,OAAO,IACX,CACA,IAAMU,EAAarC,EAAMsC,QAAUtC,EAAMsC,QAAQD,UAAY,KAC7D,GAAIA,EACA,GAAuC,kBAA5BA,EAAUE,eAA6D,kBAAxBF,EAAUG,UAChEb,EAAOc,aAAaJ,GACpBV,EAAOe,oBAAoBL,EAAW,OAErC,CACD,IAAMM,EAAM,CACRC,WAAYP,EAAUQ,gBACtBC,OAAQT,EAAUU,aAEtBpB,EAAOqB,YAAYL,GACnBhB,EAAOsB,uBAAuBN,EAAK,EACvC,CAEJ,OAAOhB,CACX,GAAC,CAAA9E,IAAA,YAAAyB,MACD,SAAUqD,EAAQE,GACd,IAAMqB,EAAQvB,EAAOwB,WACrB,OAAID,GAASA,EAAME,IAAIhB,aAAeP,EAASO,WACpC,KAEJc,CACX,KAACnE,CAAA,CAlE0B,CAA6CsE,EAAAA,GAoE5EtE,EAA8BrC,EAAW,CACrCgB,EAAQ,EAAG4F,EAAAA,IACX5F,EAAQ,EAAG6F,EAAAA,KACZxE,IAEHyE,EAAAA,EAAAA,GAAkBC,EAAAA,EAAoB1E,EAA6B,E,wnBClG/DrC,GAA0C,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2HC,EAAvHC,EAAIC,UAAUC,OAAQC,EAAIH,EAAI,EAAIJ,EAAkB,OAATE,EAAgBA,EAAOM,OAAOC,yBAAyBT,EAAQC,GAAOC,EACrH,GAAuB,kBAAZQ,SAAoD,oBAArBA,QAAQC,SAAyBJ,EAAIG,QAAQC,SAASZ,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIU,EAAIb,EAAWO,OAAS,EAAGM,GAAK,EAAGA,KAAST,EAAIJ,EAAWa,MAAIL,GAAKH,EAAI,EAAID,EAAEI,GAAKH,EAAI,EAAID,EAAEH,EAAQC,EAAKM,GAAKJ,EAAEH,EAAQC,KAASM,GAChJ,OAAOH,EAAI,GAAKG,GAAKC,OAAOK,eAAeb,EAAQC,EAAKM,GAAIA,CAChE,EACIO,GAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAUhB,EAAQC,GAAOe,EAAUhB,EAAQC,EAAKc,EAAa,CACxE,EA8BI+F,GAA4B,EAC5BC,IAAqB,EAkBzB,IAAIC,GAAoB,SAAAC,IAAA5E,EAAAA,EAAAA,GAAA2E,EAAAC,GAAA,IAAA3E,GAAAC,EAAAA,EAAAA,GAAAyE,GACpB,SAAAA,EAAYE,EAAYC,EAAUC,EAAsBC,EAAmBC,EAAgB9E,EAAmB+E,EAAmB9E,EAAc+E,EAAqBC,EAAsBC,EAA8BC,GAAyB,IAAAjF,GAAAC,EAAAA,EAAAA,GAAA,KAAAqE,GAC7O,IAAMtB,EAAUlF,OAAOoH,OAAO,CAAC,EAAGT,GAUc,OAThDzB,EAAQmC,UAAYnC,EAAQmC,WAAaC,EAAAA,GAAwBC,0BACjErC,EAAQmC,UAAYnC,EAAQmC,UAAY,IAAOC,EAAAA,GAAwBE,yBACvEtF,EAAAJ,EAAAM,KAAA,KAAMsE,EAAYxB,EAAS,CAAC,EAAG0B,EAAsBC,EAAmBC,EAAgB9E,EAAmBC,EAAc+E,EAAqBC,EAAsBC,EAA8BC,GAC9LJ,aAA6BU,EAAAA,GAC7BvF,EAAKwF,6BAA+BX,EAGpC7E,EAAKwF,6BAA+B,KAtBhD,SAA2BC,GACvB,IAAKA,EAAQ,CACT,GAAIpB,GACA,OAEJA,IAAqB,CACzB,CACAqB,EAAAA,GAAsBD,GAAUE,SAASC,KAC7C,CAgBQC,CAAkB7C,EAAQ8C,sBAAsB9F,CACpD,CAgFC,OAhFAwB,EAAAA,EAAAA,GAAA8C,EAAA,EAAA/G,IAAA,aAAAyB,MACD,SAAW+G,EAAYC,EAASC,GAC5B,IAAK5E,KAAKmE,6BAEN,OADAU,QAAQC,KAAK,8FACN,KAEX,IAAMC,EAAY,cAAgBhC,GAC5BiC,EAAiBC,EAAAA,GAAeC,YAAYN,GAElD,OADA5E,KAAKmE,6BAA6BgB,qBAAqBJ,EAAWL,EAAYC,EAASK,GAChFD,CACX,GAAC,CAAA7I,IAAA,mBAAAyB,MACD,SAAiBzB,EAAKkJ,GAClB,OAAOpF,KAAKqF,mBAAmBnG,UAAUhD,EAAKkJ,EAClD,GAAC,CAAAlJ,IAAA,YAAAyB,MACD,SAAU2H,GAAa,IAAAC,EAAA,KACnB,GAA+B,kBAAnBD,EAAYE,IAAkD,kBAAtBF,EAAYG,OAAmD,oBAApBH,EAAYI,IACvG,MAAM,IAAIC,MAAM,+EAEpB,IAAK3F,KAAKmE,6BAEN,OADAU,QAAQC,KAAK,iGACNc,EAAAA,GAAWC,KAGtB,IAAML,EAAKF,EAAYE,GACjBC,EAAQH,EAAYG,MACpBK,EAAeb,EAAAA,GAAec,IAAId,EAAAA,GAAee,OAAO,WAAYhG,KAAKiG,SAAUhB,EAAAA,GAAeC,YAAYI,EAAYQ,eAC1HI,EAAcZ,EAAYY,YAC1BC,EAAkBlB,EAAAA,GAAec,IAAID,EAAcb,EAAAA,GAAeC,YAAYI,EAAYc,oBAC1FC,EAAqBf,EAAYe,oBAAsB,KACvDC,EAAmBhB,EAAYgB,kBAAoB,EACnDZ,EAAM,SAACa,GAAuB,QAAAC,EAAAlK,UAAAC,OAATkK,EAAI,IAAAC,MAAAF,EAAA,EAAAA,EAAA,KAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAJF,EAAIE,EAAA,GAAArK,UAAAqK,GAC3B,OAAOpJ,QAAQC,QAAQ8H,EAAYI,IAAGvH,MAAfmH,EAAW,CAAKC,GAAIqB,OAAKH,IACpD,EACMI,EAAY,IAAIC,EAAAA,GAEhBC,EAAW/G,KAAKiG,QAAU,IAAMT,EAItC,GAFAqB,EAAUG,IAAIC,EAAAA,EAAiBC,gBAAgBH,EAAUrB,IAErDW,EAAoB,CACpB,IAAMc,EAAW,CACbC,QAAS,CACL5B,GAAIuB,EACJM,MAAO5B,GAEX6B,KAAMxB,EACNyB,MAAOlB,EACPmB,MAAOlB,GAEXO,EAAUG,IAAIS,EAAAA,GAAaC,eAAeC,EAAAA,GAAOC,cAAeT,GACpE,CAEA,GAAIT,MAAMmB,QAAQ3B,GAAc,KACA9F,EADAE,GAAAC,EAAAA,EAAAA,GACX2F,GAAW,IAA5B,IAAA5F,EAAAG,MAAAL,EAAAE,EAAAI,KAAAzC,MAA8B,KAAnB6J,EAAE1H,EAAAzC,MACTkJ,EAAUG,IAAIhH,KAAKmE,6BAA6BgB,qBAAqB4B,EAAUe,EAAIpC,EAAKS,GAC5F,CAAC,OAAAvF,GAAAN,EAAAxC,EAAA8C,EAAA,SAAAN,EAAAO,GAAA,CACL,CAEA,IAAMkH,EAAiB,IAAIC,EAAAA,EAAqBjB,EAAUtB,EAAOA,EAAOK,GAAc,mBAAAmC,EAAA3L,UAAAC,OAAIkK,EAAI,IAAAC,MAAAuB,GAAAC,EAAA,EAAAA,EAAAD,EAAAC,IAAJzB,EAAIyB,GAAA5L,UAAA4L,GAAA,OAAK3K,QAAQC,QAAQ8H,EAAYI,IAAGvH,MAAfmH,EAAW,CAAKC,GAAIqB,OAAKH,IAAM,GAAEzG,KAAKqF,oBAMzJ,OAJArF,KAAKmI,SAASrH,IAAI0E,EAAIuC,GACtBlB,EAAUG,KAAIoB,EAAAA,EAAAA,KAAa,WACvB7C,EAAK4C,SAASE,OAAO7C,EACzB,KACOqB,CACX,GAAC,CAAA3K,IAAA,kBAAAyB,MACD,SAAgB2K,EAAWC,GACvB,GAAIvI,KAAKwI,8BAA8BpK,EAAAA,EAEnC,IACI4B,KAAKwI,mBAAmBC,oBAAoBzI,OAC5C0I,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA1F,EAAA2F,WAAA,wBAAA/J,KAAA,KAAsByJ,EAAWC,EACrC,CAAC,QAEGvI,KAAKwI,mBAAmBC,oBAAoB,KAChD,MAGAC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA1F,EAAA2F,WAAA,wBAAA/J,KAAA,KAAsByJ,EAAWC,EAEzC,KAACtF,CAAA,CA7FmB,CAAsC4F,EAAAA,IA4G1DC,GAAgB,SAAAC,IAAAzK,EAAAA,EAAAA,GAAAwK,EAAAC,GAAA,IAAAC,GAAAxK,EAAAA,EAAAA,GAAAsK,GAChB,SAAAA,EAAY3F,EAAYC,EAAUC,EAAsBC,EAAmBC,EAAgB9E,EAAmB+E,EAAmB9E,EAAc+E,EAAqBwF,EAAsBvF,EAAsBwF,EAAcC,EAAiBxF,EAA8BC,GAAyB,IAAAwF,GAAAxK,EAAAA,EAAAA,GAAA,KAAAkK,GAClS,IAAMnH,EAAUlF,OAAOoH,OAAO,CAAC,EAAGT,IAClCiG,EAAAA,EAAAA,IAA2BJ,EAAsBtH,GAAS,GAC1D,IAAM2H,EAAuB5K,EAAa6K,wBAAwBpG,GACrC,kBAAlBxB,EAAQ6H,OACf9K,EAAa+K,SAAS9H,EAAQ6H,OAEY,qBAAnC7H,EAAQ+H,wBACfhL,EAAaiL,0BAA0BC,QAAQjI,EAAQ+H,yBAE3D,IAMInH,EANEsH,EAASlI,EAAQY,MAOvB,UANOZ,EAAQY,OACf6G,EAAAJ,EAAAnK,KAAA,KAAMsE,EAAYxB,EAAS0B,EAAsBC,EAAmBC,EAAgB9E,EAAmB+E,EAAmB9E,EAAc+E,EAAqBC,EAAsBC,EAA8BC,IAC5MkG,sBAAwBb,EAC7BG,EAAKW,wBAA0BrL,EAC/B0K,EAAKY,UAAUV,GAEO,qBAAXO,EAAwB,CAC/B,IAAMI,EAAad,EAAgBe,wBAAwBvI,EAAQwI,WAAaxI,EAAQwI,UAAYC,EAAAA,GACpG7H,EAAQ8H,GAAgBnB,EAAcC,EAAiBxH,EAAQhE,OAAS,GAAIsM,OAAYK,GACxFlB,EAAKmB,YAAa,CACtB,MAEIhI,EAAQsH,EACRT,EAAKmB,YAAa,EAGtB,GADAnB,EAAKoB,aAAajI,GACdA,EAAO,CACP,IAAMzE,EAAI,CACN2M,YAAa,KACbC,YAAanI,EAAME,KAEvB2G,EAAKuB,kBAAkBC,KAAK9M,EAChC,CAAC,OAAAsL,CACL,CAoBC,OApBAjJ,EAAAA,EAAAA,GAAA2I,EAAA,EAAA5M,IAAA,UAAAyB,MACD,YACI+K,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAG,EAAAF,WAAA,gBAAA/J,KAAA,KACJ,GAAC,CAAA3C,IAAA,gBAAAyB,MACD,SAAckN,IACVxB,EAAAA,EAAAA,IAA2BrJ,KAAK8J,sBAAuBe,GAAY,GACnC,kBAArBA,EAAWrB,OAClBxJ,KAAK+J,wBAAwBN,SAASoB,EAAWrB,OAEJ,qBAAtCqB,EAAWnB,wBAClB1J,KAAK+J,wBAAwBJ,0BAA0BC,QAAQiB,EAAWnB,0BAE9EhB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAG,EAAAF,WAAA,sBAAA/J,KAAA,KAAoBgM,EACxB,GAAC,CAAA3O,IAAA,0BAAAyB,MACD,SAAwBmN,IACpBpC,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAG,EAAAF,WAAA,gCAAA/J,KAAA,KAA8BiM,GAC1BA,GAAiB9K,KAAKuK,aACtBO,EAAcC,UACd/K,KAAKuK,YAAa,EAE1B,KAACzB,CAAA,CAvDe,CAbpB7F,GAAuBlH,GAAW,CAC9BgB,GAAQ,EAAGiO,EAAAA,IACXjO,GAAQ,EAAG+F,EAAAA,GACX/F,GAAQ,EAAGkO,EAAAA,GACXlO,GAAQ,EAAG4F,EAAAA,IACX5F,GAAQ,EAAGmO,EAAAA,GACXnO,GAAQ,EAAG6F,EAAAA,IACX7F,GAAQ,EAAGoO,EAAAA,IACXpO,GAAQ,EAAGqO,EAAAA,GACXrO,GAAQ,GAAIsO,EAAAA,IACZtO,GAAQ,GAAIuO,EAAAA,IACbrI,KA2DH6F,GAAmB/M,GAAW,CAC1BgB,GAAQ,EAAGiO,EAAAA,IACXjO,GAAQ,EAAG+F,EAAAA,GACX/F,GAAQ,EAAGkO,EAAAA,GACXlO,GAAQ,EAAG4F,EAAAA,IACX5F,GAAQ,EAAGmO,EAAAA,GACXnO,GAAQ,EAAGwO,EAAAA,GACXxO,GAAQ,EAAGoO,EAAAA,IACXpO,GAAQ,EAAGyO,EAAAA,IACXzO,GAAQ,GAAIqO,EAAAA,GACZrO,GAAQ,GAAI0O,EAAAA,GACZ1O,GAAQ,GAAI2O,EAAAA,GACZ3O,GAAQ,GAAIsO,EAAAA,IACZtO,GAAQ,GAAIuO,EAAAA,IACbxC,IAEH,IAAI6C,GAAoB,SAAAC,IAAAtN,EAAAA,EAAAA,GAAAqN,EAAAC,GAAA,IAAAC,GAAArN,EAAAA,EAAAA,GAAAmN,GACpB,SAAAA,EAAYxI,EAAYC,EAAUC,EAAsB5E,EAAmB6E,EAAmB5E,EAAc+E,EAAqBwF,EAAsB6C,EAAoBC,EAAuBC,GAAkB,IAAAC,GAAArN,EAAAA,EAAAA,GAAA,KAAA+M,GAChN,IAAMhK,EAAUlF,OAAOoH,OAAO,CAAC,EAAGT,IAClCiG,EAAAA,EAAAA,IAA2BJ,EAAsBtH,GAAS,GAC1D,IAAM2H,EAAuB5K,EAAa6K,wBAAwBpG,GAU7B,MATR,kBAAlBxB,EAAQ6H,OACf9K,EAAa+K,SAAS9H,EAAQ6H,OAEY,qBAAnC7H,EAAQ+H,wBACfhL,EAAaiL,0BAA0BC,QAAQjI,EAAQ+H,0BAE3DuC,EAAAJ,EAAAhN,KAAA,KAAMsE,EAAYxB,EAAS,CAAC,EAAGqK,EAAkBvN,EAAmB4E,EAAsBC,EAAmB5E,EAAc+E,EAAqBqI,EAAoBC,IAC/JjC,sBAAwBb,EAC7BgD,EAAKlC,wBAA0BrL,EAC/BuN,EAAKjC,UAAUV,GAAsB2C,CACzC,CA+BC,OA/BA9L,EAAAA,EAAAA,GAAAwL,EAAA,EAAAzP,IAAA,UAAAyB,MACD,YACI+K,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAgD,EAAA/C,WAAA,gBAAA/J,KAAA,KACJ,GAAC,CAAA3C,IAAA,gBAAAyB,MACD,SAAckN,IACVxB,EAAAA,EAAAA,IAA2BrJ,KAAK8J,sBAAuBe,GAAY,GACnC,kBAArBA,EAAWrB,OAClBxJ,KAAK+J,wBAAwBN,SAASoB,EAAWrB,OAEJ,qBAAtCqB,EAAWnB,wBAClB1J,KAAK+J,wBAAwBJ,0BAA0BC,QAAQiB,EAAWnB,0BAE9EhB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAgD,EAAA/C,WAAA,sBAAA/J,KAAA,KAAoBgM,EACxB,GAAC,CAAA3O,IAAA,qBAAAyB,MACD,SAAmB0F,EAAsB6I,EAAWvK,GAChD,OAAO0B,EAAqB8I,eAAelJ,GAAsBiJ,EAAWvK,EAChF,GAAC,CAAAzF,IAAA,oBAAAyB,MACD,WACI,OAAA+K,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAgD,EAAA/C,WAAA,0BAAA/J,KAAA,KACJ,GAAC,CAAA3C,IAAA,oBAAAyB,MACD,WACI,OAAA+K,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAgD,EAAA/C,WAAA,0BAAA/J,KAAA,KACJ,GAAC,CAAA3C,IAAA,aAAAyB,MACD,SAAW+G,EAAYC,EAASC,GAC5B,OAAO5E,KAAKoM,oBAAoBC,WAAW3H,EAAYC,EAASC,EACpE,GAAC,CAAA1I,IAAA,mBAAAyB,MACD,SAAiBzB,EAAKkJ,GAClB,OAAOpF,KAAKoM,oBAAoBE,iBAAiBpQ,EAAKkJ,EAC1D,GAAC,CAAAlJ,IAAA,YAAAyB,MACD,SAAU4O,GACN,OAAOvM,KAAKoM,oBAAoBI,UAAUD,EAC9C,KAACZ,CAAA,CA9CmB,CAAsCc,EAAAA,GAgD9Dd,GAAuB5P,GAAW,CAC9BgB,GAAQ,EAAGiO,EAAAA,IACXjO,GAAQ,EAAG4F,EAAAA,IACX5F,GAAQ,EAAG+F,EAAAA,GACX/F,GAAQ,EAAGwO,EAAAA,GACXxO,GAAQ,EAAGoO,EAAAA,IACXpO,GAAQ,EAAGyO,EAAAA,IACXzO,GAAQ,EAAG2P,EAAAA,GACX3P,GAAQ,EAAG4P,EAAAA,IACX5P,GAAQ,GAAI6P,EAAAA,IACbjB,IAEH,IAAIkB,GAAqB,SAAAC,IAAAxO,EAAAA,EAAAA,GAAAuO,EAAAC,GAAA,IAAAC,GAAAvO,EAAAA,EAAAA,GAAAqO,GACrB,SAAAA,EAAY1J,EAAYC,EAAUC,EAAsB5E,EAAmB6E,EAAmB5E,EAAc+E,EAAqBwF,EAAsB6C,EAAoBC,EAAuBC,EAAkBgB,GAAiB,IAAAC,GAAArO,EAAAA,EAAAA,GAAA,KAAAiO,GACjO,IAAMlL,EAAUlF,OAAOoH,OAAO,CAAC,EAAGT,IAClCiG,EAAAA,EAAAA,IAA2BJ,EAAsBtH,GAAS,GAC1D,IAAM2H,EAAuB5K,EAAa6K,wBAAwBpG,GAU7B,MATR,kBAAlBxB,EAAQ6H,OACf9K,EAAa+K,SAAS9H,EAAQ6H,OAEY,qBAAnC7H,EAAQ+H,wBACfhL,EAAaiL,0BAA0BC,QAAQjI,EAAQ+H,0BAE3DuD,EAAAF,EAAAlO,KAAA,KAAMsE,EAAYxB,EAAS,CAAC,EAAGlD,EAAmB4E,EAAsBC,EAAmB0J,IACtFlD,sBAAwBb,EAC7BgE,EAAKlD,wBAA0BrL,EAC/BuO,EAAKjD,UAAUV,GAAsB2D,CACzC,CA+BC,OA/BA9M,EAAAA,EAAAA,GAAA0M,EAAA,EAAA3Q,IAAA,UAAAyB,MACD,YACI+K,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAkE,EAAAjE,WAAA,gBAAA/J,KAAA,KACJ,GAAC,CAAA3C,IAAA,gBAAAyB,MACD,SAAckN,IACVxB,EAAAA,EAAAA,IAA2BrJ,KAAK8J,sBAAuBe,GAAY,GACnC,kBAArBA,EAAWrB,OAClBxJ,KAAK+J,wBAAwBN,SAASoB,EAAWrB,OAEJ,qBAAtCqB,EAAWnB,wBAClB1J,KAAK+J,wBAAwBJ,0BAA0BC,QAAQiB,EAAWnB,0BAE9EhB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAkE,EAAAjE,WAAA,sBAAA/J,KAAA,KAAoBgM,EACxB,GAAC,CAAA3O,IAAA,qBAAAyB,MACD,SAAmB0F,EAAsB6I,EAAWvK,GAChD,OAAO0B,EAAqB8I,eAAelJ,GAAsBiJ,EAAWvK,EAChF,GAAC,CAAAzF,IAAA,oBAAAyB,MACD,WACI,OAAA+K,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAkE,EAAAjE,WAAA,0BAAA/J,KAAA,KACJ,GAAC,CAAA3C,IAAA,oBAAAyB,MACD,WACI,OAAA+K,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAAkE,EAAAjE,WAAA,0BAAA/J,KAAA,KACJ,GAAC,CAAA3C,IAAA,aAAAyB,MACD,SAAW+G,EAAYC,EAASC,GAC5B,OAAO5E,KAAKoM,oBAAoBC,WAAW3H,EAAYC,EAASC,EACpE,GAAC,CAAA1I,IAAA,mBAAAyB,MACD,SAAiBzB,EAAKkJ,GAClB,OAAOpF,KAAKoM,oBAAoBE,iBAAiBpQ,EAAKkJ,EAC1D,GAAC,CAAAlJ,IAAA,YAAAyB,MACD,SAAU4O,GACN,OAAOvM,KAAKoM,oBAAoBI,UAAUD,EAC9C,KAACM,CAAA,CA9CoB,CAAuCK,EAAAA,GAgEzD,SAAS7C,GAAgBnB,EAAcC,EAAiBxL,EAAOsM,EAAYxH,GAE9E,GADA9E,EAAQA,GAAS,IACZsM,EAAY,CACb,IAAMkD,EAAUxP,EAAMyP,QAAQ,MAC1BC,EAAY1P,EAIhB,OAHiB,IAAbwP,IACAE,EAAY1P,EAAM2P,UAAU,EAAGH,IAE5BI,GAAcrE,EAAcvL,EAAOwL,EAAgBqE,4BAA4B/K,GAAO,KAAM4K,GAAY5K,EACnH,CACA,OAAO8K,GAAcrE,EAAcvL,EAAOwL,EAAgBsE,WAAWxD,GAAaxH,EACtF,CAIA,SAAS8K,GAAcrE,EAAcvL,EAAO+P,EAAmBjL,GAC3D,OAAOyG,EAAayE,YAAYhQ,EAAO+P,EAAmBjL,EAC9D,CAjCAoK,GAAwB9Q,GAAW,CAC/BgB,GAAQ,EAAGiO,EAAAA,IACXjO,GAAQ,EAAG4F,EAAAA,IACX5F,GAAQ,EAAG+F,EAAAA,GACX/F,GAAQ,EAAGwO,EAAAA,GACXxO,GAAQ,EAAGoO,EAAAA,IACXpO,GAAQ,EAAGyO,EAAAA,IACXzO,GAAQ,EAAG2P,EAAAA,GACX3P,GAAQ,EAAG4P,EAAAA,IACX5P,GAAQ,GAAI6P,EAAAA,GACZ7P,GAAQ,GAAI6Q,EAAAA,KACbf,I,4ECrWC3P,GAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,EAAQ,KAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,OAClE,GACJ,EAuCO,SAASgQ,GAAO1K,EAAYxB,EAASmM,GAExC,OAD6BC,EAAAA,GAAmBC,WAAWF,GAAY,CAAC,GAC5C3B,eAAerD,GAAkB3F,EAAYxB,EAC7E,CAMO,SAASsM,GAAkBC,GAE9B,OAD0BH,EAAAA,GAAmBI,IAAIrL,EAAAA,GACxBhE,iBAAgB,SAACkC,GACtCkN,EAASlN,EACb,GACJ,CAKO,SAASoN,GAAsBF,GAElC,OAD0BH,EAAAA,GAAmBI,IAAIrL,EAAAA,GACxBuL,iBAAgB,SAACrN,GACtCkN,EAASlN,EACb,GACJ,CAIO,SAASsN,KAEZ,OAD0BP,EAAAA,GAAmBI,IAAIrL,EAAAA,GACxBtC,iBAC7B,CAIO,SAAS+N,KAEZ,OAD0BR,EAAAA,GAAmBI,IAAIrL,EAAAA,GACxB0L,iBAC7B,CAMO,SAASC,GAAiBtL,EAAYxB,EAASmM,GAClD,IAAIY,EACErL,EAAuB0K,EAAAA,GAAmBC,WAAWF,GAAY,CAAC,GACxE,OAAsF,QAAjFY,EAAiB,OAAZ/M,QAAgC,IAAZA,OAAqB,EAASA,EAAQgN,oBAAiC,IAAPD,OAAgB,EAASA,EAAGE,aAC/GvL,EAAqB8I,eAAeU,GAAuB1J,EAAYxB,GAE3E0B,EAAqB8I,eAAeR,GAAsBxI,EAAYxB,EACjF,CACO,SAASkN,GAAoBC,EAAYC,GAE5C,OAD6BhB,EAAAA,GAAmBC,WAAW,CAAC,GAChC7B,eAAe6C,EAAAA,EAAeF,EAAYC,EAC1E,CAIO,SAAS1C,GAAWE,GACvB,GAA8B,kBAAlBA,EAAW/G,IAA+C,oBAAnB+G,EAAW7G,IAC1D,MAAM,IAAIC,MAAM,uEAEpB,OAAOsB,EAAAA,EAAiBC,gBAAgBqF,EAAW/G,GAAI+G,EAAW7G,IACtE,CAIO,SAASuJ,GAAgB1C,GAC5B,GAA8B,kBAAlBA,EAAW/G,IAAiD,kBAArB+G,EAAW9G,OAAkD,oBAAnB8G,EAAW7G,IACpG,MAAM,IAAIC,MAAM,+EAEpB,IAAMG,EAAeb,EAAAA,GAAeC,YAAYqH,EAAWzG,cAIrDe,EAAY,IAAIC,EAAAA,GAItB,GAFAD,EAAUG,IAAIC,EAAAA,EAAiBC,gBAAgBqF,EAAW/G,IAL9C,SAAC0J,GAAsB,QAAA1I,EAAAlK,UAAAC,OAATkK,EAAI,IAAAC,MAAAF,EAAA,EAAAA,EAAA,KAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAJF,EAAIE,EAAA,GAAArK,UAAAqK,GAC1B,OAAOwI,GAAAA,GAAcC,iBAAiBF,EAAUzI,EAAMX,GAAc,SAACoJ,EAAUlO,EAAQyF,GAAI,OAAKlJ,QAAQC,QAAQ+O,EAAW7G,IAAGvH,MAAdoO,EAAU,CAAKvL,GAAM4F,QAAAyI,EAAAA,EAAAA,GAAK5I,KAAM,GACpJ,KAKI8F,EAAWlG,mBAAoB,CAC/B,IAAMc,EAAW,CACbC,QAAS,CACL5B,GAAI+G,EAAW/G,GACf6B,MAAOkF,EAAW9G,OAEtB6B,KAAMxB,EACNyB,MAAOgF,EAAWlG,mBAClBmB,MAAO+E,EAAWjG,kBAAoB,GAE1CO,EAAUG,IAAIS,EAAAA,GAAaC,eAAeC,EAAAA,GAAOC,cAAeT,GACpE,CAEA,GAAIT,MAAMmB,QAAQ0E,EAAWrG,aAAc,CACvC,IAAM1C,EAAoBuK,EAAAA,GAAmBI,IAAIjD,EAAAA,GACjD,GAAM1H,aAA6BU,EAAAA,GAG9B,CACD,IAAMiC,EAAkBlB,EAAAA,GAAec,IAAID,EAAcb,EAAAA,GAAeC,YAAYqH,EAAWnG,oBAC/FS,EAAUG,IAAIxD,EAAkB8L,sBAAsB/C,EAAWrG,YAAYqJ,KAAI,SAAC7K,GAC9E,MAAO,CACHA,WAAAA,EACA0C,QAASmF,EAAW/G,GACpB8B,KAAMnB,EAEd,KACJ,MAXItB,QAAQC,KAAK,gGAYrB,CACA,OAAO+B,CACX,CAIO,SAAS2I,GAAkBC,GAC9B,OAAOC,GAAmB,CAACD,GAC/B,CAIO,SAASC,GAAmBC,GAC/B,IAAMnM,EAAoBuK,EAAAA,GAAmBI,IAAIjD,EAAAA,GACjD,OAAM1H,aAA6BU,EAAAA,GAI5BV,EAAkB8L,sBAAsBK,EAAMJ,KAAI,SAACE,GACtD,MAAO,CACH/K,WAAY+K,EAAK/K,WACjB0C,QAASqI,EAAKrI,QACdwI,YAAaH,EAAKG,YAClBtI,KAAMrC,EAAAA,GAAeC,YAAYuK,EAAKnI,MAE9C,MAVIzC,QAAQC,KAAK,iGACNc,EAAAA,GAAWC,KAU1B,CAKO,SAAS8H,GAAYhQ,EAAOwM,EAAU1H,GACzC,IAAM0G,EAAkB4E,EAAAA,GAAmBI,IAAIzC,EAAAA,GACzCzB,EAAad,EAAgBe,wBAAwBC,IAAaA,EACxE,OAAOE,GAAgB0D,EAAAA,GAAmBI,IAAI1C,EAAAA,GAAgBtC,EAAiBxL,EAAOsM,EAAYxH,EACtG,CAIO,SAASoN,GAAiBtN,EAAOuN,GACpC,IAAM3G,EAAkB4E,EAAAA,GAAmBI,IAAIzC,EAAAA,GACzCzB,EAAad,EAAgBe,wBAAwB4F,IAAyBA,GAAwB1F,EAAAA,GAC5G7H,EAAMwN,YAAY5G,EAAgBsE,WAAWxD,GACjD,CAIO,SAAS+F,GAAgBzN,EAAO0N,EAAOC,GACtC3N,GACsBwL,EAAAA,GAAmBI,IAAIgC,GAAAA,IAC/BC,UAAUH,EAAO1N,EAAME,IAAKyN,EAElD,CAIO,SAASG,GAAiBJ,GACPlC,EAAAA,GAAmBI,IAAIgC,GAAAA,IAC/BG,UAAUL,EAAO,GACnC,CAMO,SAASM,GAAgBC,GAE5B,OADsBzC,EAAAA,GAAmBI,IAAIgC,GAAAA,IACxBM,KAAKD,EAC9B,CAKO,SAASE,GAAmBxC,GAE/B,OADsBH,EAAAA,GAAmBI,IAAIgC,GAAAA,IACxBQ,gBAAgBzC,EACzC,CAIO,SAAS1L,GAASC,GAErB,OADqBsL,EAAAA,GAAmBI,IAAI1C,EAAAA,GACxBjJ,SAASC,EACjC,CAIO,SAASmO,KAEZ,OADqB7C,EAAAA,GAAmBI,IAAI1C,EAAAA,GACxBmF,WACxB,CAKO,SAASC,GAAiB3C,GAE7B,OADqBH,EAAAA,GAAmBI,IAAI1C,EAAAA,GACxBqF,aAAa5C,EACrC,CAKO,SAAS6C,GAAmB7C,GAE/B,OADqBH,EAAAA,GAAmBI,IAAI1C,EAAAA,GACxBuF,eAAe9C,EACvC,CAKO,SAAS+C,GAAyB/C,GAErC,OADqBH,EAAAA,GAAmBI,IAAI1C,EAAAA,GACxByF,wBAAuB,SAACpT,GACxCoQ,EAAS,CACL3L,MAAOzE,EAAEyE,MACT4O,YAAarT,EAAEsT,eAEvB,GACJ,CAKO,SAASC,GAAgBtC,GAC5B,OAAOuC,EAAAA,EAAAA,GAAsBvD,EAAAA,GAAmBI,IAAI1C,EAAAA,GAAgBsC,EAAAA,GAAmBI,IAAI9C,EAAAA,IAAgC0D,EAC/H,CAIO,SAASwC,GAAgBC,EAAS7P,GACrC,IAAMwH,EAAkB4E,EAAAA,GAAmBI,IAAIzC,EAAAA,GACzChN,EAAeqP,EAAAA,GAAmBI,IAAI5C,EAAAA,GAE5C,OADA7M,EAAa6K,wBAAwBiI,GAC9BC,EAAAA,EAAUF,gBAAgB7S,EAAcyK,EAAiBqI,EAAS7P,EAC7E,CAIO,SAAS+P,GAASC,EAAM1H,EAAYtI,GACvC,IAAMwH,EAAkB4E,EAAAA,GAAmBI,IAAIzC,EAAAA,GAG/C,OAFqBqC,EAAAA,GAAmBI,IAAI5C,EAAAA,GAC/BhC,wBAAwBjF,SAASC,MACvCkN,EAAAA,EAAUC,SAASvI,EAAiBwI,EAAM1H,EAAYtI,EACjE,CAIO,SAASiQ,GAAkBrP,EAAON,GAAyB,IAAb4P,EAAOvV,UAAAC,OAAA,QAAA+N,IAAAhO,UAAA,GAAAA,UAAA,GAAG,EAG3D,OAFqByR,EAAAA,GAAmBI,IAAI5C,EAAAA,GAC/BhC,wBAAwBjF,SAASC,MACvCkN,EAAAA,EAAUG,kBAAkBrP,EAAON,EAAY4P,EAC1D,CAiBO,SAASC,GAASH,EAAM1H,GAE3B8H,EAAAA,GAA+BC,YAAY/H,GAK3C,IAJA,IAAMgI,EAhBV,SAAoC9H,GAChC,IAAM8H,EAAsBF,EAAAA,GAA+B5D,IAAIhE,GAC/D,OAAI8H,GAGG,CACHC,gBAAiB,kBAAMC,EAAAA,EAAS,EAChCL,SAAU,SAACM,EAAMC,EAAQC,GAAK,OAAKC,EAAAA,EAAAA,IAAapI,EAAUmI,EAAM,EAExE,CAOgCE,CAA2BvI,GACjDwI,GAAQC,EAAAA,EAAAA,IAAWf,GACnB3T,EAAS,GACXsU,EAAQL,EAAoBC,kBACvBrV,EAAI,EAAG8V,EAAMF,EAAMlW,OAAQM,EAAI8V,EAAK9V,IAAK,CAC9C,IAAMuV,EAAOK,EAAM5V,GACb+V,EAAqBX,EAAoBH,SAASM,GAAM,EAAME,GACpEtU,EAAOnB,GAAK+V,EAAmBC,OAC/BP,EAAQM,EAAmBE,QAC/B,CACA,OAAO9U,CACX,CAIO,SAAS+U,GAAYC,EAAWC,GACJlF,EAAAA,GAAmBI,IAAI5C,EAAAA,GAC/BwH,YAAYC,EAAWC,EAClD,CAIO,SAASxJ,GAASuJ,GACUjF,EAAAA,GAAmBI,IAAI5C,EAAAA,GAC/B9B,SAASuJ,EACpC,CAIO,SAASE,KACZC,EAAAA,EAAiBC,mBACrB,CAIO,SAASlM,GAAgB1B,EAAIb,GAChC,OAAOsC,EAAAA,EAAiBC,gBAAgB,CAAE1B,GAAAA,EAAIb,QAAAA,GAClD,CAOO,SAAS0O,GAAmBC,GAE/B,OADsBvF,EAAAA,GAAmBI,IAAIoF,GAAAA,IACxBC,eAAe,CAChCC,KAAI,SAACvS,GACD,OAAOhE,GAAU8C,UAAM,OAAQ,GAAMP,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAhC,MAAA,OAGlC,MAFuB,kBAAbqD,IACPA,EAAWwS,EAAAA,EAAIC,MAAMzS,IACxBrB,EAAAE,OAAA,SACMuT,EAAOG,KAAKvS,IAAS,wBAAArB,EAAAK,OAAA,GAAAP,EAAA,IAEpC,GAER,CASO,SAASiU,GAAqBN,GAAQ,IAAA3U,EAAA,KAEzC,OAD0BoP,EAAAA,GAAmBI,IAAIrL,EAAAA,GACxB1D,+BAA8B,SAACC,EAAOC,EAAQC,GAAU,OAAKrC,GAAUyB,OAAM,OAAQ,GAAMc,EAAAA,EAAAA,KAAAC,MAAE,SAAAmU,IAAA,IAAAnF,EAAAhN,EAAAoS,EAAA,OAAArU,EAAAA,EAAAA,KAAAG,MAAA,SAAAmU,GAAA,cAAAA,EAAAjU,KAAAiU,EAAAlW,MAAA,UAE7GyB,EAAQ,CAAFyU,EAAAlW,KAAA,eAAAkW,EAAAhU,OAAA,SACA,MAAI,OAUX,OARE2B,EAAqC,QAAxBgN,EAAKrP,EAAMsC,eAA4B,IAAP+M,OAAgB,EAASA,EAAGhN,YAE3B,kBAA5BA,EAAUE,eAA6D,kBAAxBF,EAAUG,UAC7EiS,EAAsBpS,EAEjBA,IACLoS,EAAsB,CAAE7R,WAAYP,EAAUQ,gBAAiBC,OAAQT,EAAUU,cACpF2R,EAAAlW,KAAA,EACSyV,EAAOU,eAAe1U,EAAQD,EAAM6B,SAAU4S,GAAoB,WAAAC,EAAAE,KAAE,CAAFF,EAAAlW,KAAA,eAAAkW,EAAAhU,OAAA,SACjET,GAAM,cAAAyU,EAAAhU,OAAA,SAEV,MAAI,wBAAAgU,EAAA7T,OAAA,GAAA2T,EAAA,IACb,GACN,CAIO,SAASK,KACZ,MAAO,CAEHrG,OAAQA,GACRS,WAAYA,GACZC,eAAgBA,GAChBN,kBAAmBA,GACnBG,sBAAuBA,GACvBK,iBAAkBA,GAClBI,oBAAqBA,GACrBxC,WAAYA,GACZ4C,gBAAiBA,GACjBO,kBAAmBA,GACnBE,mBAAoBA,GACpB/B,YAAaA,GACbkC,iBAAkBA,GAClBG,gBAAiBA,GACjBO,gBAAiBA,GACjBF,iBAAkBA,GAClBK,mBAAoBA,GACpBE,UAAWA,GACXpO,SAAUA,GACVqO,iBAAkBA,GAClBE,mBAAoBA,GACpBE,yBAA0BA,GAC1BI,gBAAiBA,GACjBE,gBAAiBA,GACjBG,SAAUA,GACVE,kBAAmBA,GACnBE,SAAUA,GACViB,YAAaA,GACbtJ,SAAUA,GACVyJ,eAAgBA,GAChBhM,gBAAiBA,GACjBmM,mBAAoBA,GACpBO,qBAAsBA,GAEtBO,qBAAsBC,EAAAA,GACtBC,gCAAiCD,EAAAA,GACjCE,mBAAoBF,EAAAA,GACpBG,iBAAkBH,EAAAA,GAClBI,yBAA0BJ,EAAAA,GAC1BK,aAAcL,EAAAA,GACdM,oBAAqBN,EAAAA,GACrBO,kBAAmBP,EAAAA,GACnBQ,gBAAiBR,EAAAA,GACjBS,gBAAiBT,EAAAA,GACjBU,gCAAiCV,EAAAA,GACjCW,kBAAmBX,EAAAA,GACnBY,gBAAiBZ,EAAAA,EACjBa,sBAAuBb,EAAAA,GACvBc,cAAed,EAAAA,GACfe,oBAAqBf,EAAAA,GACrBgB,WAAYhB,EAAAA,GACZiB,8BAA+BjB,EAAAA,GAC/BkB,sBAAuBlB,EAAAA,GACvBmB,uBAAwBnB,EAAAA,GACxBoB,eAAgBpB,EAAAA,GAChBqB,wBAAyBrB,EAAAA,GACzBsB,iBAAkBtB,EAAAA,GAElBuB,0BAA2BA,EAAAA,GAC3BC,aAAcA,EAAAA,GACdC,SAAUA,EAAAA,GACVC,yBAA0BA,EAAAA,GAC1BC,UAAWA,EAAAA,GACXC,kBAAmBA,EAAAA,GACnBC,UAAWA,GAAAA,EACXC,iBAAkBA,GAAAA,GAClBC,aAAcA,GAAAA,GACdC,WAAYA,GAAAA,EACZC,UAAWA,GAAAA,GACXC,uBAAwBA,GAAAA,GAExBC,WAAYA,EAAAA,EACZC,cAAeA,EAAAA,GAEvB,C,6MCldA,SAASC,EAAKC,EAAMC,GAChB,MAAoB,mBAATD,EACAA,EAEJC,CACX,CACA,SAASC,EAAOF,EAAMC,GAClB,MAAsB,kBAAVD,EACDA,EAEJC,CACX,CAQA,SAASE,EAAqBC,GAA8B,IAAzBC,EAAeza,UAAAC,OAAA,QAAA+N,IAAAhO,UAAA,IAAAA,UAAA,GAC1Cya,IACAD,EAAMA,EAAIvH,KAAI,SAAUyH,GAAK,OAAOA,EAAEC,aAAe,KAEzD,IAAMC,EAXV,SAAqBC,GACjB,IACqBC,EADfpZ,EAAS,CAAC,EAAEqZ,GAAA9W,EAAAA,EAAAA,GACF4W,GAAK,IAArB,IAAAE,EAAA5W,MAAA2W,EAAAC,EAAA3W,KAAAzC,MACID,EADQoZ,EAAAzZ,QACI,CACf,OAAAiD,GAAAyW,EAAAvZ,EAAA8C,EAAA,SAAAyW,EAAAxW,GAAA,CACD,OAAO7C,CACX,CAKiBsZ,CAAYR,GACzB,OAAIC,EACO,SAAUQ,GACb,YAAoCjN,IAA7B4M,EAAKK,EAAKN,gBAAgCC,EAAKM,eAAeD,EAAKN,cAC9E,EAGO,SAAUM,GACb,YAAsBjN,IAAf4M,EAAKK,IAAuBL,EAAKM,eAAeD,EAC3D,CAER,CASA,SAASE,EAAcC,EAAOC,GAE1BA,EAAMA,EAAIC,QAAQ,MAAO,QACzB,IACIC,EADAnX,EAAI,EAER,GACImX,GAAe,EACfF,EAAMA,EAAIC,QAAQ,WAAW,SAAUnX,EAAGqX,GACtCD,GAAe,EACf,IAAIE,EAAM,GACV,GAA6B,kBAAjBL,EAAMI,GACdC,EAAML,EAAMI,OAEX,MAAIJ,EAAMI,IAASJ,EAAMI,aAAiBE,QAI3C,WAAoB1N,IAAhBoN,EAAMI,GACAG,EAAAA,GAA0BP,EAAO,mDAAsDI,EAAO,eAAkBH,GAGhHM,EAAAA,GAA0BP,EAAO,wBAA2BI,EAAO,gCAAmCH,GAPhHI,EAAML,EAAMI,GAAMxY,MAStB,CACA,OAAQ2Y,EAAAA,GAAoBF,GAAO,GAAK,MAAQA,EAAM,GAC1D,IACArX,UACKmX,GAAgBnX,EAAI,GAE7BiX,EAAMA,EAAIC,QAAQ,QAAS,KAC3B,IAAMM,GAASR,EAAMS,WAAa,IAAM,KAAOT,EAAMU,QAAU,IAAM,IACrE,OAAO,IAAIJ,OAAOL,EAAKO,EAC3B,CAuBA,SAASG,EAAYX,EAAOY,EAAUC,EAAMC,GAExC,IAAIC,GAAS,EACTC,EAAQH,EACRI,EAAUJ,EAAKK,MAAM,8BACrBD,IACIA,EAAQ,KACRF,EAAQI,SAASF,EAAQ,IACrBA,EAAQ,KACRF,GAAgB,MAGxBC,EAAQC,EAAQ,IAGpB,IAiBIG,EAjBAC,EAAK,IACLC,EAAMN,EAkBV,GAjBKA,GAA0B,IAAjBA,EAAMnc,OAIX,QAAQ0c,KAAKD,GAClBD,EAAK,MAGLJ,EAAUD,EAAME,MAAM,8BAElBG,EAAKJ,EAAQ,GACbK,EAAML,EAAQ,KAVlBI,EAAK,KACLC,EAAM,IAeE,MAAPD,GAAqB,OAAPA,IAAgB,aAAaE,KAAKD,GAIhD,GAAW,MAAPD,GAAqB,OAAPA,EAAa,CAChC,IAAMG,EAAQxB,EAAMsB,GACpB,IAAKE,EACD,MAAMjB,EAAAA,GAA0BP,EAAO,uBAA0BsB,EAAM,8BAAiCV,GAE5G,IA3JR,SAAmBa,EAAUC,GACzB,IAAKA,EACD,OAAO,EAEX,IAAM1S,MAAMmB,QAAQuR,GAChB,OAAO,EACV,IACmBhZ,EADnBE,GAAAC,EAAAA,EAAAA,GACgB6Y,GAAG,IAApB,IAAA9Y,EAAAG,MAAAL,EAAAE,EAAAI,KAAAzC,MACI,IAAMkb,EADG/Y,EAAAzC,OAEL,OAAO,CAEd,OAAAiD,GAAAN,EAAAxC,EAAA8C,EAAA,SAAAN,EAAAO,GAAA,CACD,OAAO,CACX,CA8IcwY,EAAU,SAAUC,GAAQ,MAA0B,kBAAVA,CAAqB,GAAGJ,GACtE,MAAMjB,EAAAA,GAA0BP,EAAO,uBAA0BsB,EAAM,2CAA8CV,GAEzH,IAAMiB,EAAU1C,EAAqBqC,EAAOxB,EAAMS,YAClDW,EAAS,SAAUrY,GAAK,MAAe,MAAPsY,EAAaQ,EAAQ9Y,IAAM8Y,EAAQ9Y,EAAK,CAC5E,MACK,GAAW,MAAPsY,GAAqB,OAAPA,EACnB,GAAIC,EAAI5L,QAAQ,KAAO,EAAG,CAEtB,IAAMoM,EAAK/B,EAAcC,EAAO,IAAMsB,EAAM,KAC5CF,EAAS,SAAUrY,GAAK,MAAe,MAAPsY,EAAaS,EAAGP,KAAKxY,IAAM+Y,EAAGP,KAAKxY,EAAK,CAC5E,MAEIqY,EAAS,SAAUrY,EAAG+E,EAAImT,EAASrG,GAE/B,OADWmF,EAAcC,EAAO,IAAMO,EAAAA,GAAgCP,EAAOsB,EAAKxT,EAAImT,EAASrG,GAAS,KAC9F2G,KAAKxY,EACnB,OAIJ,GAAIuY,EAAI5L,QAAQ,KAAO,EAAG,CACtB,IAAMqM,EAAOxB,EAAAA,GAAsBP,EAAOsB,GAC1CF,EAAS,SAAUrY,GAAK,MAAe,OAAPsY,EAActY,IAAMgZ,EAAOhZ,IAAMgZ,CAAO,CAC5E,KACK,CACD,IAAMA,EAAOxB,EAAAA,GAAsBP,EAAOsB,GAC1CF,EAAS,SAAUrY,EAAG+E,EAAImT,EAASrG,EAAOoH,GACtC,IAAMC,EAAS1B,EAAAA,GAAgCP,EAAO+B,EAAMjU,EAAImT,EAASrG,GACzE,MAAe,OAAPyG,EAActY,IAAMkZ,EAASlZ,IAAMkZ,CAC/C,CACJ,KAvCuD,CACvD,IAAMJ,EAAU1C,EAAqBmC,EAAIY,MAAM,KAAMlC,EAAMS,YAC3DW,EAAS,SAAUrY,GAAK,MAAe,MAAPsY,EAAaQ,EAAQ9Y,IAAM8Y,EAAQ9Y,EAAK,CAC5E,CAuCA,OAAe,IAAXgY,EACO,CACHoB,KAAMtB,EAAM5a,MAAO6a,EAAKS,KAAM,SAAUzT,EAAImT,EAASrG,EAAOoH,GACxD,OAAOZ,EAAOtT,EAAIA,EAAImT,EAASrG,EAAOoH,EAC1C,GAIG,CACHG,KAAMtB,EAAM5a,MAAO6a,EAAKS,KAAM,SAAUzT,EAAImT,EAASrG,EAAOoH,GACxD,IAAMI,EAvGtB,SAAyBtU,EAAImT,EAASrG,EAAOyH,GACzC,GAAIA,EAAM,EACN,OAAOvU,EAEX,GAAIuU,EAAMpB,EAAQpc,OACd,OAAOoc,EAAQoB,GAEnB,GAAIA,GAAO,IAAK,CACZA,GAAY,IACZ,IAAMC,EAAQ1H,EAAMsH,MAAM,KAE1B,GADAI,EAAMC,QAAQ3H,GACVyH,EAAMC,EAAMzd,OACZ,OAAOyd,EAAMD,EAErB,CACA,OAAO,IACX,CAuFkCG,CAAgB1U,EAAImT,EAASrG,EAAOmG,GACtD,OAAOK,EAAQgB,GAAY,GAAgBtU,EAAImT,EAASrG,EAAOoH,EACnE,EAGZ,CASA,SAASS,EAAczC,EAAOY,EAAU8B,GACpC,GAAKA,EAGA,IAAwB,kBAAZA,EACb,OAAOA,EAEN,GAAIA,EAAOC,OAA0B,KAAjBD,EAAOC,MAAc,CAC1C,GAA8B,kBAAlBD,EAAOC,MACf,MAAMpC,EAAAA,GAA0BP,EAAO,wDAA4DY,GAInG,IAAMgC,EAAY,CAAED,MAAOD,EAAOC,OAIlC,GAHID,EAAOC,MAAMjN,QAAQ,MAAQ,IAC7BkN,EAAUC,YAAa,GAEK,kBAApBH,EAAOI,QACf,GAAuB,UAAnBJ,EAAOI,QACPF,EAAUE,QAAU,MAEnB,IAAuB,WAAnBJ,EAAOI,QAIZ,MAAMvC,EAAAA,GAA0BP,EAAO,sEAA8EY,GAHrHgC,EAAUE,SAAW,CAIzB,CAEJ,GAAIJ,EAAOvc,KAAM,CACb,GAA6B,kBAAjBuc,EAAOvc,KACf,MAAMoa,EAAAA,GAA0BP,EAAO,kDAAoDY,GAG3F,IAAIza,EAAOuc,EAAOvc,KAClB,IAAK,yBAAyBob,KAAKpb,KACf,MAAZA,EAAK,KACLA,EAAOA,EAAK4c,OAAO,IAEnB5c,EAAKuP,QAAQ,KAAO,IACf6K,EAAAA,GAA0BP,EAAOO,EAAAA,GAAgCP,EAAO7Z,EAAM,GAAI,GAAI,MACvF,MAAMoa,EAAAA,GAA0BP,EAAO,mBAAsB0C,EAAOvc,KAAO,6BAAgCya,GAIvHgC,EAAUzc,KAAOA,CAEzB,CAcA,MAb+B,kBAAnBuc,EAAOM,SACfJ,EAAUI,OAASN,EAAOM,QAEG,kBAArBN,EAAOO,WACfL,EAAUK,SAAWP,EAAOO,UAEJ,kBAAhBP,EAAOQ,MACfN,EAAUM,IAAMR,EAAOQ,KAEU,kBAAzBR,EAAOS,eACfP,EAAUO,aAAeT,EAAOS,aAChCnD,EAAMoD,cAAe,GAElBR,CAEf,CACK,GAAI5T,MAAMmB,QAAQuS,GAAS,CAE5B,IADA,IAAMW,EAAU,GACPle,EAAI,EAAG8V,EAAMyH,EAAO7d,OAAQM,EAAI8V,EAAK9V,IAC1Cke,EAAQle,GAAKsd,EAAczC,EAAOY,EAAU8B,EAAOvd,IAEvD,MAAO,CAAE0K,MAAOwT,EACpB,CACK,GAAIX,EAAOY,MAAO,CAEnB,IAAMA,EAAQ,GAEd,IAAK,IAAMzC,KAAQ6B,EAAOY,MACtB,GAAIZ,EAAOY,MAAMxD,eAAee,GAAO,CACnC,IAAMC,EAAM2B,EAAczC,EAAOY,EAAU8B,EAAOY,MAAMzC,IAE3C,aAATA,GAAgC,MAATA,GAAyB,KAATA,EACvCyC,EAAMC,KAAK,CAAEhC,UAAM3O,EAAW3M,MAAO6a,EAAKqB,KAAMtB,IAElC,SAATA,EACLyC,EAAMC,KAAK,CAAEhC,KAAM,SAAUzT,EAAImT,EAASrG,EAAOoH,GAAO,OAAOA,CAAK,EAAG/b,MAAO6a,EAAKqB,KAAMtB,IAGzFyC,EAAMC,KAAK5C,EAAYX,EAAOY,EAAUC,EAAMC,GAEtD,CAGJ,IAAM0C,EAAMxD,EAAMyD,aAClB,MAAO,CACHlC,KAAM,SAAUzT,EAAImT,EAASrG,EAAOoH,GAChC,IAAK,IAAL0B,EAAA,EAAAC,EAAoBL,EAAKI,EAAAC,EAAA9e,OAAA6e,IAAE,CAAtB,IAAME,EAAKD,EAAAD,GAEZ,IADmBE,EAAMrC,MAAQqC,EAAMrC,KAAKzT,EAAImT,EAASrG,EAAOoH,GAE5D,OAAO4B,EAAM3d,KAErB,CACA,OAAOud,CACX,EAER,CAEI,MAAMjD,EAAAA,GAA0BP,EAAO,+GAAqHY,EAChK,CAvGI,MAAO,CAAE+B,MAAO,GAwGxB,CACA,IAGMkB,EAAI,WACN,SAAAA,EAAY1B,IAAMjb,EAAAA,EAAAA,GAAA,KAAA2c,GACdvb,KAAKwb,MAAQ,IAAIxD,OAAO,IACxBhY,KAAKoa,OAAS,CAAEC,MAAO,IACvBra,KAAKyb,sBAAuB,EAC5Bzb,KAAK6Z,KAAO,GACZ7Z,KAAK6Z,KAAOA,CAChB,CAkBC,OAlBA1Z,EAAAA,EAAAA,GAAAob,EAAA,EAAArf,IAAA,WAAAyB,MACD,SAAS+Z,EAAO8B,GACZ,IAAIkC,EACJ,GAAoB,kBAARlC,EACRkC,EAASlC,MAER,MAAIA,aAAcxB,QAInB,MAAMC,EAAAA,GAA0BP,EAAO,+DAAiE1X,KAAK6Z,MAH7G6B,EAASlC,EAAGla,MAIhB,CACAU,KAAKyb,qBAAwBC,EAAOnf,OAAS,GAAmB,MAAdmf,EAAO,GACzD1b,KAAK6Z,KAAO7Z,KAAK6Z,KAAO,KAAO6B,EAC/B1b,KAAKwb,MAAQ/D,EAAcC,EAAO,QAAU1X,KAAKyb,qBAAuBC,EAAOjB,OAAO,GAAKiB,GAAU,IACzG,GAAC,CAAAxf,IAAA,YAAAyB,MACD,SAAU+Z,EAAOiE,GACb3b,KAAKoa,OAASD,EAAczC,EAAO1X,KAAK6Z,KAAM8B,EAClD,KAACJ,CAAA,CAzBK,GAoCH,SAASK,EAAQ3R,EAAY4R,GAChC,IAAKA,GAA0B,kBAAVA,EACjB,MAAM,IAAIlW,MAAM,mDAGpB,IAAM+R,EAAQ,CAAC,EACfA,EAAMzN,WAAaA,EACnByN,EAAMoE,UAAYrF,EAAKoF,EAAKC,WAAW,GACvCpE,EAAMqE,SAAU,EAChBrE,EAAMsE,SAAW,IAEjBtE,EAAMuE,MAA+B,kBAAfJ,EAAKI,MAAqBJ,EAAKI,MAAQ,KAC7DvE,EAAMS,WAAa1B,EAAKoF,EAAK1D,YAAY,GACzCT,EAAMU,QAAU3B,EAAKoF,EAAKzD,SAAS,GACnCV,EAAMwE,aAAetF,EAAOiF,EAAKK,aAAc,IAAMxE,EAAMzN,YAC3DyN,EAAMyD,aAAevE,EAAOiF,EAAKV,aAAc,UAC/CzD,EAAMoD,cAAe,EAErB,IAAMqB,EAAWN,EAUjB,SAASO,EAAS9J,EAAO+J,EAAU1M,GAAO,IACd2M,EADcC,GAAAhc,EAAAA,EAAAA,GACnBoP,GAAK,IAAxB,IAAA4M,EAAA9b,MAAA6b,EAAAC,EAAA7b,KAAAzC,MAA0B,KAAfwR,EAAI6M,EAAA3e,MACP6e,EAAU/M,EAAK+M,QACnB,GAAIA,EAAS,CACT,GAAyB,kBAAbA,EACR,MAAMvE,EAAAA,GAA0BP,EAAO,+CAAmDpF,GAK9F,GAHmB,MAAfkK,EAAQ,KACRA,EAAUA,EAAQ/B,OAAO,KAExBoB,EAAKY,UAAUD,GAChB,MAAMvE,EAAAA,GAA0BP,EAAO,mBAAsB8E,EAAU,wBAA2BlK,GAEtG8J,EAAS9J,EAAQ,IAAMkK,EAASH,EAAUR,EAAKY,UAAUD,GAC7D,KACK,CACD,IAAME,EAAU,IAAInB,EAAKjJ,GAEzB,GAAI5L,MAAMmB,QAAQ4H,IAASA,EAAKlT,QAAU,GAAKkT,EAAKlT,QAAU,EAE1D,GADAmgB,EAAQC,SAASR,EAAU1M,EAAK,IAC5BA,EAAKlT,QAAU,EACf,GAAyB,kBAAbkT,EAAK,GACbiN,EAAQE,UAAUT,EAAU,CAAE9B,MAAO5K,EAAK,GAAI5R,KAAM4R,EAAK,SAExD,IAAyB,kBAAbA,EAAK,GAMlB,MAAMwI,EAAAA,GAA0BP,EAAO,mHAAqHpF,GAL5J,IAAMuK,EAAQpN,EAAK,GACnBoN,EAAMhf,KAAO4R,EAAK,GAClBiN,EAAQE,UAAUT,EAAUU,EAIhC,MAGAH,EAAQE,UAAUT,EAAU1M,EAAK,QAGpC,CACD,IAAKA,EAAK+L,MACN,MAAMvD,EAAAA,GAA0BP,EAAO,sFAA4FpF,GAEnI7C,EAAKoK,MACoB,kBAAdpK,EAAKoK,OACZ6C,EAAQ7C,KAAOpK,EAAKoK,MAGxBpK,EAAKqN,mBACLJ,EAAQjB,qBAAuBhF,EAAKhH,EAAKgM,sBAAsB,IAEnEiB,EAAQC,SAASR,EAAU1M,EAAK+L,OAChCkB,EAAQE,UAAUT,EAAU1M,EAAK2K,OACrC,CACAiC,EAASpB,KAAKyB,EAClB,CACJ,CAAC,OAAA9b,GAAA2b,EAAAze,EAAA8C,EAAA,SAAA2b,EAAA1b,GAAA,CACL,CAEA,GAlEAsb,EAASlS,WAAaA,EACtBkS,EAASL,UAAYpE,EAAMoE,UAC3BK,EAAShE,WAAaT,EAAMS,WAC5BgE,EAAS/D,QAAUV,EAAMU,QACzB+D,EAASJ,QAAUrE,EAAMqE,QACzBI,EAASrB,aAAepD,EAAMoD,aAC9BqB,EAASY,WAAalB,EAAKY,UAC3BN,EAAShB,aAAezD,EAAMyD,cA2DzBU,EAAKY,WAAyC,kBAApBZ,EAAKY,UAChC,MAAMxE,EAAAA,GAA0BP,EAAO,4EAG3C,IAAK,IAAMxb,KADXwb,EAAM+E,UAAY,GACAZ,EAAKY,UACnB,GAAIZ,EAAKY,UAAUjF,eAAetb,GAAM,CAC/Bwb,EAAMuE,QACPvE,EAAMuE,MAAQ/f,GAElB,IAAMyT,EAAQkM,EAAKY,UAAUvgB,GAC7Bwb,EAAM+E,UAAUvgB,GAAO,IAAIwK,MAC3B0V,EAAS,aAAelgB,EAAKwb,EAAM+E,UAAUvgB,GAAMyT,EACvD,CAIJ,GAFA+H,EAAMoD,aAAeqB,EAASrB,aAE1Be,EAAKmB,UACL,IAAMtW,MAAMmB,QAAQgU,EAAKmB,UACrB,MAAM/E,EAAAA,GAA0BP,EAAO,6DAI3CmE,EAAKmB,SAAW,CACZ,CAAEvJ,KAAM,IAAKwJ,MAAO,IAAK5C,MAAO,mBAChC,CAAE5G,KAAM,IAAKwJ,MAAO,IAAK5C,MAAO,oBAChC,CAAE5G,KAAM,IAAKwJ,MAAO,IAAK5C,MAAO,yBAChC,CAAE5G,KAAM,IAAKwJ,MAAO,IAAK5C,MAAO,oBAGxC,IAC8B6C,EADxBF,EAAW,GAAGG,GAAA5c,EAAAA,EAAAA,GACHsb,EAAKmB,UAAQ,IAA9B,IAAAG,EAAA1c,MAAAyc,EAAAC,EAAAzc,KAAAzC,MAAgC,KACxB9B,EADK+gB,EAAAvf,MAKT,GAHIxB,GAAQuK,MAAMmB,QAAQ1L,IAAyB,IAAhBA,EAAKI,SACpCJ,EAAO,CAAEke,MAAOle,EAAK,GAAIsX,KAAMtX,EAAK,GAAI8gB,MAAO9gB,EAAK,KAEpDA,EAAKsX,OAAStX,EAAK8gB,MACnB,MAAMhF,EAAAA,GAA0BP,EAAO,wEAA4Evb,EAAKsX,KACpH,mFAER,GAAyB,kBAAdtX,EAAKsX,MAA2C,kBAAftX,EAAKke,OAA4C,kBAAfle,EAAK8gB,MAQ/E,MAAMhF,EAAAA,GAA0BP,EAAO,wFAPvCsF,EAAS/B,KAAK,CACVZ,MAAOle,EAAKke,MAAQ3C,EAAMwE,aAC1BzI,KAAMwE,EAAAA,GAAsBP,EAAOvb,EAAKsX,MACxCwJ,MAAOhF,EAAAA,GAAsBP,EAAOvb,EAAK8gB,QAMrD,CAAC,OAAArc,GAAAuc,EAAArf,EAAA8C,EAAA,SAAAuc,EAAAtc,GAAA,CAID,OAHA6W,EAAMsF,SAAWA,EAEjBtF,EAAMqE,SAAU,EACTrE,CACX,C,2DC9fIxa,EAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,EAAQ,KAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,OAClE,GACJ,EAkBO,SAASuf,EAASjT,GAGrBkT,EAAAA,GAAcC,iBAAiBnT,EACnC,CAIO,SAASoT,IACZ,IAAIvf,EAAS,GAEb,OADAA,EAASA,EAAO4I,OAAOyW,EAAAA,GAAcE,eAEzC,CACO,SAASC,EAAqBvT,GAEjC,OADwB8D,EAAAA,GAAmBI,IAAIzC,EAAAA,GACxB+R,gBAAgBC,iBAAiBzT,EAC5D,CAKO,SAAS0T,EAAW1T,EAAY2T,GACnC,OAAO7P,EAAAA,GAAmB8P,cAAa,WACnC,IACMC,EADkB/P,EAAAA,GAAmBI,IAAIzC,EAAAA,GACZqS,kCAAiC,SAACC,GAC7DA,IAA0B/T,IAE1B6T,EAAW/S,UAEX6S,IAER,IACA,OAAOE,CACX,GACJ,CAMO,SAASG,EAAsBhU,EAAY2T,GAC9C,OAAO7P,EAAAA,GAAmB8P,cAAa,WACnC,IACMC,EADkB/P,EAAAA,GAAmBI,IAAIzC,EAAAA,GACZwS,mCAAkC,SAACF,GAC9DA,IAA0B/T,IAE1B6T,EAAW/S,UAEX6S,IAER,IACA,OAAOE,CACX,GACJ,CAIO,SAASK,EAAyBlU,EAAYmU,GAEjD,IADwBrQ,EAAAA,GAAmBI,IAAIzC,EAAAA,GAC1B2S,uBAAuBpU,GACxC,MAAM,IAAItE,MAAM,iDAADiB,OAAkDqD,IAGrE,OADqC8D,EAAAA,GAAmBI,IAAI9C,EAAAA,IACxB+R,SAASnT,EAAYmU,EAAe,IAC5E,CAIO,IAAME,EAAiC,WAC1C,SAAAA,EAAYrU,EAAYsU,IAAQ3f,EAAAA,EAAAA,GAAA,KAAA0f,GAC5Bte,KAAKwe,YAAcvU,EACnBjK,KAAKye,QAAUF,CACnB,CAgBC,OAhBApe,EAAAA,EAAAA,GAAAme,EAAA,EAAApiB,IAAA,UAAAyB,MACD,WACI,GACH,CAAAzB,IAAA,kBAAAyB,MACD,WACI,OAAOqC,KAAKye,QAAQvM,iBACxB,GAAC,CAAAhW,IAAA,WAAAyB,MACD,SAASyU,EAAMC,EAAQC,GACnB,GAAqC,oBAA1BtS,KAAKye,QAAQ3M,SACpB,OAAO4M,EAA2BC,cAAc3e,KAAKwe,YAAaxe,KAAKye,QAASrM,EAAME,GAE1F,MAAM,IAAI3M,MAAM,iBACpB,GAAC,CAAAzJ,IAAA,kBAAAyB,MACD,SAAgByU,EAAMC,EAAQC,GAC1B,IAAMtU,EAASgC,KAAKye,QAAQG,gBAAgBxM,EAAME,GAClD,OAAO,IAAIP,EAAAA,GAAoC/T,EAAO6U,OAAQ7U,EAAO8U,SACzE,KAACwL,CAAA,CApByC,GAyBjCI,EAA0B,WACnC,SAAAA,EAAYF,EAAaC,EAASI,EAAkB9U,IAAyBnL,EAAAA,EAAAA,GAAA,KAAA8f,GACzE1e,KAAKwe,YAAcA,EACnBxe,KAAKye,QAAUA,EACfze,KAAK6e,iBAAmBA,EACxB7e,KAAK+J,wBAA0BA,CACnC,CAuCC,OAvCA5J,EAAAA,EAAAA,GAAAue,EAAA,EAAAxiB,IAAA,UAAAyB,MACD,WACI,GACH,CAAAzB,IAAA,kBAAAyB,MACD,WACI,OAAOqC,KAAKye,QAAQvM,iBACxB,GAAC,CAAAhW,IAAA,WAAAyB,MAkCD,SAASyU,EAAMC,EAAQC,GACnB,OAAOoM,EAA2BC,cAAc3e,KAAKwe,YAAaxe,KAAKye,QAASrM,EAAME,EAC1F,GAAC,CAAApW,IAAA,kBAAAyB,MACD,SAAgB8f,EAAiB5K,GAM7B,IALA,IAAM5I,EAAawT,EAAgBC,iBAAiB1d,KAAKwe,aACnDM,EAAa9e,KAAK+J,wBAAwBgV,gBAAgBD,WAC1D9gB,EAAS,GACXghB,EAAY,EACZC,EAAqB,EAChBpiB,EAAI,EAAG8V,EAAME,EAAOtW,OAAQM,EAAI8V,EAAK9V,IAAK,CAC/C,IAAMqiB,EAAIrM,EAAOhW,GACXsiB,EAAoD,KAAzCL,EAAWlG,MAAM3O,EAAYiV,EAAEE,QAChD,KAAIJ,EAAY,GAAKhhB,EAAOghB,EAAY,KAAOG,GAA/C,CAIA,IAAIE,EAAaH,EAAEG,WAET,IAANxiB,EAEAwiB,EAAa,EAERA,EAAaJ,IAElBI,EAAaJ,GAEjBjhB,EAAOghB,KAAeK,EACtBrhB,EAAOghB,KAAeG,EACtBF,EAAqBI,CAbrB,CAcJ,CAEA,IADA,IAAMC,EAAe,IAAIC,YAAYP,GAC5BniB,EAAI,EAAGA,EAAImiB,EAAWniB,IAC3ByiB,EAAaziB,GAAKmB,EAAOnB,GAE7B,OAAOyiB,CACX,GAAC,CAAApjB,IAAA,kBAAAyB,MACD,SAAgByU,EAAMC,EAAQC,GAC1B,IAEIQ,EAFEwM,EAAetf,KAAKye,QAAQ3M,SAASM,EAAME,GAC3CO,EAAS7S,KAAKwf,gBAAgBxf,KAAK6e,iBAAiBpB,gBAAiB6B,EAAazM,QASxF,OALIC,EADAwM,EAAaxM,SAAS9M,OAAOsM,GAClBA,EAGAgN,EAAaxM,SAErB,IAAIf,EAAAA,GAAoCc,EAAQC,EAC3D,IAAC,EAAA5W,IAAA,mBAAAyB,MAjFD,SAAwBkV,EAAQ1I,GAG5B,IAFA,IAAMnM,EAAS,GACXihB,EAAqB,EAChBpiB,EAAI,EAAG8V,EAAME,EAAOtW,OAAQM,EAAI8V,EAAK9V,IAAK,CAC/C,IAAMqiB,EAAIrM,EAAOhW,GACbwiB,EAAaH,EAAEG,WAET,IAANxiB,EAEAwiB,EAAa,EAERA,EAAaJ,IAElBI,EAAaJ,GAEjBjhB,EAAOnB,GAAK,IAAIkV,EAAAA,GAAgBsN,EAAYH,EAAEE,OAAQjV,GACtD8U,EAAqBI,CACzB,CACA,OAAOrhB,CACX,GAAC,CAAA9B,IAAA,gBAAAyB,MACD,SAAqBwM,EAAUoU,EAAQnM,EAAME,GACzC,IAEIQ,EAFEwM,EAAef,EAAOzM,SAASM,EAAME,GACrCO,EAAS6L,EAA2Be,iBAAiBH,EAAazM,OAAQ1I,GAShF,OALI2I,EADAwM,EAAaxM,SAAS9M,OAAOsM,GAClBA,EAGAgN,EAAaxM,SAErB,IAAIf,EAAAA,GAA6Bc,EAAQC,EACpD,KAAC4L,CAAA,CA7CkC,GAsGvC,SAASgB,EAAWtG,GAChB,OAAOA,GAA2B,oBAAbA,EAAIlb,IAC7B,CAKO,SAASyhB,EAAYC,GACxB,IAAMC,EAAyB9R,EAAAA,GAAmBI,IAAI5C,EAAAA,GACtD,GAAIqU,EAAU,CAEV,IADA,IAAM5hB,EAAS,CAAC,MACPnB,EAAI,EAAG8V,EAAMiN,EAASrjB,OAAQM,EAAI8V,EAAK9V,IAC5CmB,EAAOnB,GAAKijB,EAAAA,GAAMC,QAAQH,EAAS/iB,IAEvCgjB,EAAuBG,oBAAoBhiB,EAC/C,MAEI6hB,EAAuBG,oBAAoB,KAEnD,CAIA,SAASC,EAAiChW,EAAYiW,GAClD,OA3BJ,SAAiCA,GAC7B,MAAO,oBAAqBA,CAChC,CAyBQC,CAAwBD,GACjB,IAAI5B,EAAkCrU,EAAYiW,GAGlD,IAAIxB,EAA2BzU,EAAYiW,EAAUnS,EAAAA,GAAmBI,IAAIzC,EAAAA,GAAmBqC,EAAAA,GAAmBI,IAAI5C,EAAAA,GAErI,CAMO,SAAS6U,EAA8BnW,EAAYoW,GAAS,IAAA1hB,EAAA,KACzD2hB,EAAiB,IAAIvO,EAAAA,IAAkC,kBAAM7U,EAAUyB,OAAM,OAAQ,GAAMc,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,IAAA3B,EAAA,OAAAyB,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAhC,MAAA,OAChF,OADgFgC,EAAAhC,KAAA,EAC1EN,QAAQC,QAAQ6iB,EAAQxS,UAAS,OAA1C,GAAN7P,EAAM6B,EAAAoU,KACC,CAAFpU,EAAAhC,KAAA,eAAAgC,EAAAE,OAAA,SACA,MAAI,UA7CyB,oBA+ClB/B,EA/CFkU,gBA+CW,CAAFrS,EAAAhC,KAAA,eAAAgC,EAAAE,OAAA,SAClBkgB,EAAiChW,EAAYjM,IAAO,cAAA6B,EAAAE,OAAA,SAExD,IAAIwgB,EAAAA,EAAiBxS,EAAAA,GAAmBI,IAAIzC,EAAAA,GAAmBqC,EAAAA,GAAmBI,IAAI5C,EAAAA,GAA0BtB,EAAY2R,EAAQ3R,EAAYjM,GAAS+P,EAAAA,GAAmBI,IAAI3C,EAAAA,MAAuB,wBAAA3L,EAAAK,OAAA,GAAAP,EAAA,IAChN,IACF,OAAOoS,EAAAA,GAA+ByO,gBAAgBvW,EAAYqW,EACtE,CAOO,SAASG,EAAkBxW,EAAYiW,GAE1C,IADwBnS,EAAAA,GAAmBI,IAAIzC,EAAAA,GAC1B2S,uBAAuBpU,GACxC,MAAM,IAAItE,MAAM,mDAADiB,OAAoDqD,IAEvE,OAAIyV,EAAWQ,GACJE,EAA8BnW,EAAY,CAAE4D,OAAQ,kBAAMqS,CAAQ,IAEtEnO,EAAAA,GAA+BqL,SAASnT,EAAYgW,EAAiChW,EAAYiW,GAC5G,CAOO,SAASQ,EAAyBzW,EAAY0W,GAIjD,OAAIjB,EAAWiB,GACJP,EAA8BnW,EAAY,CAAE4D,OAAQ,kBAAM8S,CAAW,IAEzE5O,EAAAA,GAA+BqL,SAASnT,EANhC,SAAC0W,GACZ,OAAO,IAAIJ,EAAAA,EAAiBxS,EAAAA,GAAmBI,IAAIzC,EAAAA,GAAmBqC,EAAAA,GAAmBI,IAAI5C,EAAAA,GAA0BtB,EAAY2R,EAAQ3R,EAAY0W,GAAc5S,EAAAA,GAAmBI,IAAI3C,EAAAA,IAChM,CAI2DqC,CAAO8S,GACtE,CAIO,SAASC,EAA0BC,EAAkBX,GAExD,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxBwV,kBAAkB1D,SAASyD,EAAkBX,EAChF,CAIO,SAASa,EAAuBF,EAAkBX,GAErD,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxB0V,eAAe5D,SAASyD,EAAkBX,EAC7E,CAIO,SAASe,EAA8BJ,EAAkBX,GAE5D,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxB4V,sBAAsB9D,SAASyD,EAAkBX,EACpF,CAIO,SAASiB,EAAsBN,EAAkBX,GAEpD,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxB8V,cAAchE,SAASyD,EAAkB,CACpEQ,aAAc,SAAC9e,EAAO+e,EAAUjH,GAC5B,IAAM9C,EAAOhV,EAAMgf,kBAAkBD,GACrC,OAAO/jB,QAAQC,QAAQ0iB,EAASmB,aAAa9e,EAAO+e,EAAUjH,IAAQnc,MAAK,SAACP,GACxE,GAAKA,EASL,OANKA,EAAM6jB,OAASjK,IAChB5Z,EAAM6jB,MAAQ,IAAIC,EAAAA,EAAMH,EAASrf,WAAYsV,EAAKnV,YAAakf,EAASrf,WAAYsV,EAAK1V,YAExFlE,EAAM6jB,QACP7jB,EAAM6jB,MAAQ,IAAIC,EAAAA,EAAMH,EAASrf,WAAYqf,EAASnf,OAAQmf,EAASrf,WAAYqf,EAASnf,SAEzFxE,CACX,GACJ,GAER,CAIO,SAAS+jB,EAA+Bb,EAAkBX,GAE7D,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxBqW,uBAAuBvE,SAASyD,EAAkBX,EACrF,CAIO,SAAS0B,EAAkCf,EAAkBX,GAEhE,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxBuW,0BAA0BzE,SAASyD,EAAkBX,EACxF,CAIO,SAAS4B,EAAmCjB,EAAkBX,GAEjE,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxByW,2BAA2B3E,SAASyD,EAAkBX,EACzF,CAIO,SAAS8B,EAA2BnB,EAAkBX,GAEzD,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxB2W,mBAAmB7E,SAASyD,EAAkBX,EACjF,CAIO,SAASgC,EAA+BrB,EAAkBX,GAE7D,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxB6W,uBAAuB/E,SAASyD,EAAkBX,EACrF,CAIO,SAASkC,EAA+BvB,EAAkBX,GAE7D,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxB+W,uBAAuBjF,SAASyD,EAAkBX,EACrF,CAIO,SAASoC,GAAyBzB,EAAkBX,GAEvD,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxBiX,iBAAiBnF,SAASyD,EAAkBX,EAC/E,CAIO,SAASsC,GAA2B3B,EAAkBX,EAAUf,GAEnE,OADgCpR,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxBmX,mBAAmBrF,SAASyD,EAAkB,CACzE6B,wBAAsC,OAAbvD,QAAkC,IAAbA,OAAsB,EAASA,EAASuD,wBACtFC,cAA4B,OAAbxD,QAAkC,IAAbA,OAAsB,EAASA,EAASwD,cAC5EC,mBAAoB,SAACrgB,EAAOif,EAAO5c,EAASyV,GACxC,IACMnK,EADgBnC,EAAAA,GAAmBI,IAAIgC,EAAAA,IACfM,KAAK,CAAEvP,SAAUqB,EAAME,MAAO+N,QAAO,SAAAqS,GAC/D,OAAOpB,EAAAA,EAAMqB,0BAA0BD,EAAGrB,EAC9C,IACA,OAAOtB,EAAS0C,mBAAmBrgB,EAAOif,EAAO,CAAEtR,QAAAA,EAAS6S,KAAMne,EAAQme,KAAMC,QAASpe,EAAQoe,SAAW3I,EAChH,EACA4I,kBAAmB/C,EAAS+C,mBAEpC,CAIO,SAASC,GAAuCrC,EAAkBX,GAErE,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxB6X,+BAA+B/F,SAASyD,EAAkBX,EAC7F,CAIO,SAASkD,GAA4CvC,EAAkBX,GAE1E,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxB+X,oCAAoCjG,SAASyD,EAAkBX,EAClG,CAIO,SAASoD,GAAqCzC,EAAkBX,GAEnE,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxBiY,6BAA6BnG,SAASyD,EAAkBX,EAC3F,CAIO,SAASsD,GAAqB3C,EAAkBX,GAEnD,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxBmY,aAAarG,SAASyD,EAAkBX,EAC3E,CAIO,SAASwD,GAA+B7C,EAAkBX,GAE7D,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxBqY,mBAAmBvG,SAASyD,EAAkBX,EACjF,CAIO,SAAS0D,GAAsB/C,EAAkBX,GAEpD,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxBuY,cAAczG,SAASyD,EAAkBX,EAC5E,CAIO,SAAS4D,GAA6BjD,EAAkBX,GAE3D,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxByY,qBAAqB3G,SAASyD,EAAkBX,EACnF,CAIO,SAAS8D,GAA4BnD,EAAkBX,GAE1D,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxB2Y,oBAAoB7G,SAASyD,EAAkBX,EAClF,CAIO,SAASgE,GAA+BrD,EAAkBX,GAE7D,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxB6Y,uBAAuB/G,SAASyD,EAAkBX,EACrF,CAQO,SAASkE,GAAuCvD,EAAkBX,GAErE,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxB+Y,+BAA+BjH,SAASyD,EAAkBX,EAC7F,CAQO,SAASoE,GAA4CzD,EAAkBX,GAE1E,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxBiZ,oCAAoCnH,SAASyD,EAAkBX,EAClG,CAIO,SAASsE,GAAkC3D,EAAkBX,GAEhE,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxBmZ,0BAA0BrH,SAASyD,EAAkBX,EACxF,CAIO,SAASwE,GAA2B7D,EAAkBX,GAEzD,OADgCnS,EAAAA,GAAmBI,IAAI7C,EAAAA,GACxBqZ,mBAAmBvH,SAASyD,EAAkBX,EACjF,CAIO,SAAS0E,KACZ,MAAO,CACHxH,SAAUA,EACVG,aAAcA,EACdI,WAAYA,EACZM,sBAAuBA,EACvBT,qBAAsBA,EAEtBW,yBAA0BA,EAC1BwB,YAAaA,EACbS,8BAA+BA,EAC/BK,kBAAmBA,EACnBC,yBAA0BA,EAC1BE,0BAA2BA,EAC3BG,uBAAwBA,EACxB2C,+BAAgCA,GAChCzC,8BAA+BA,EAC/BE,sBAAuBA,EACvBO,+BAAgCA,EAChCE,kCAAmCA,EACnCE,mCAAoCA,EACpCE,2BAA4BA,EAC5BE,+BAAgCA,EAChCE,+BAAgCA,EAChCE,yBAA0BA,GAC1BE,2BAA4BA,GAC5BU,uCAAwCA,GACxCE,4CAA6CA,GAC7CE,qCAAsCA,GACtCE,qBAAsBA,GACtBI,sBAAuBA,GACvBE,6BAA8BA,GAC9BE,4BAA6BA,GAC7BE,+BAAgCA,GAChCE,uCAAwCA,GACxCE,4CAA6CA,GAC7CE,kCAAmCA,GACnCE,2BAA4BA,GAE5BG,sBAAuBzQ,EAAAA,GACvB0Q,mBAAoB1Q,EAAAA,GACpB2Q,kBAAmB3Q,EAAAA,GACnB4Q,6BAA8B5Q,EAAAA,GAC9B6Q,WAAY7Q,EAAAA,GACZ8Q,UAAW9Q,EAAAA,GACX+Q,aAAc/Q,EAAAA,GACdgR,sBAAuBhR,EAAAA,GACvBiR,yBAA0BjR,EAAAA,GAC1BkR,cAAelR,EAAAA,GACfmR,4BAA6BnR,EAAAA,GAC7BoR,sBAAuBpR,EAAAA,GAEvBqR,iBAAkB1T,EAAAA,GAClB2T,uBAAwB3T,EAAAA,GAEhC,C,+JCzjBIhW,EAA0C,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2HC,EAAvHC,EAAIC,UAAUC,OAAQC,EAAIH,EAAI,EAAIJ,EAAkB,OAATE,EAAgBA,EAAOM,OAAOC,yBAAyBT,EAAQC,GAAOC,EACrH,GAAuB,kBAAZQ,SAAoD,oBAArBA,QAAQC,SAAyBJ,EAAIG,QAAQC,SAASZ,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIU,EAAIb,EAAWO,OAAS,EAAGM,GAAK,EAAGA,KAAST,EAAIJ,EAAWa,MAAIL,GAAKH,EAAI,EAAID,EAAEI,GAAKH,EAAI,EAAID,EAAEH,EAAQC,EAAKM,GAAKJ,EAAEH,EAAQC,KAASM,GAChJ,OAAOH,EAAI,GAAKG,GAAKC,OAAOK,eAAeb,EAAQC,EAAKM,GAAIA,CAChE,EACIO,EAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAUhB,EAAQC,GAAOe,EAAUhB,EAAQC,EAAKc,EAAa,CACxE,EAMI2oB,EAAuB,WAsBvB,SAAAA,EAAYnd,IAAoB5J,EAAAA,EAAAA,GAAA,KAAA+mB,GAC5B3lB,KAAKwI,mBAAqBA,EAC1BxI,KAAK4lB,YAAcC,EAAAA,GAAMhgB,KACzB7F,KAAK8lB,OAAS,CAAEC,IAAK,EAAGC,aAAc,EAC1C,CALC,OAKA7lB,EAAAA,EAAAA,GAAAwlB,EAAA,EAAAzpB,IAAA,YAAAiS,IAzBD,WAII,OAHKnO,KAAKimB,aACNjmB,KAAKimB,WAAaC,EAAAA,cAAkBC,OAAO7hB,SAASC,OAEjDvE,KAAKimB,UAChB,GAAC,CAAA/pB,IAAA,eAAAiS,IACD,WACI,OAAO,CACX,GAAC,CAAAjS,IAAA,YAAAiS,IACD,WAMI,MAAM,IAAIxI,MAAM,sEACpB,GAAC,CAAAzJ,IAAA,QAAAyB,MACD,WACI,IAAI+Q,EACsD,QAAzDA,EAAK1O,KAAKwI,mBAAmB4d,8BAA2C,IAAP1X,GAAyBA,EAAG2X,OAClG,KAACV,CAAA,CArBsB,GA+BvBW,EAAyB,SAAAC,IAAAjoB,EAAAA,EAAAA,GAAAgoB,EAAAC,GAAA,IAAAhoB,GAAAC,EAAAA,EAAAA,GAAA8nB,GAOzB,SAAAA,EAAYE,EAAYljB,GAAmB,IAAA3E,EAEV,OAFUC,EAAAA,EAAAA,GAAA,KAAA0nB,IACvC3nB,EAAAJ,EAAAM,KAAA,KAAMyE,IACDkjB,WAAaA,EAAW7nB,CACjC,CAJC,OAIAwB,EAAAA,EAAAA,GAAAmmB,EAAA,EAAApqB,IAAA,eAAAiS,IATD,WACI,OAAO,CACX,GAAC,CAAAjS,IAAA,YAAAiS,IACD,WACI,OAAOnO,KAAKwmB,UAChB,KAACF,CAAA,CANwB,CAH7BX,EAA0B5pB,EAAW,CACjCgB,EAAQ,EAAG+F,EAAAA,IACZ6iB,IAaHW,EAA4BvqB,EAAW,CACnCgB,EAAQ,EAAG+F,EAAAA,IACZwjB,IAEHzjB,EAAAA,EAAAA,GAAkB4jB,EAAAA,EAAgBd,EAAyB,E,yoCC7DvD5pB,GAA0C,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2HC,EAAvHC,EAAIC,UAAUC,OAAQC,EAAIH,EAAI,EAAIJ,EAAkB,OAATE,EAAgBA,EAAOM,OAAOC,yBAAyBT,EAAQC,GAAOC,EACrH,GAAuB,kBAAZQ,SAAoD,oBAArBA,QAAQC,SAAyBJ,EAAIG,QAAQC,SAASZ,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIU,EAAIb,EAAWO,OAAS,EAAGM,GAAK,EAAGA,KAAST,EAAIJ,EAAWa,MAAIL,GAAKH,EAAI,EAAID,EAAEI,GAAKH,EAAI,EAAID,EAAEH,EAAQC,EAAKM,GAAKJ,EAAEH,EAAQC,KAASM,GAChJ,OAAOH,EAAI,GAAKG,GAAKC,OAAOK,eAAeb,EAAQC,EAAKM,GAAIA,CAChE,EACIO,GAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAUhB,EAAQC,GAAOe,EAAUhB,EAAQC,EAAKc,EAAa,CACxE,EACIE,GAAwC,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUC,GAAS,IAAMC,EAAKN,EAAUO,KAAKF,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC1F,SAASC,EAASJ,GAAS,IAAMC,EAAKN,EAAiB,MAAEK,GAAS,CAAE,MAAOG,GAAKL,EAAOK,EAAI,CAAE,CAC7F,SAASF,EAAKI,GAJlB,IAAeL,EAIaK,EAAOC,KAAOT,EAAQQ,EAAOL,QAJ1CA,EAIyDK,EAAOL,MAJhDA,aAAiBN,EAAIM,EAAQ,IAAIN,GAAE,SAAUG,GAAWA,EAAQG,EAAQ,KAIjBO,KAAKR,EAAWK,EAAW,CAC7GH,GAAMN,EAAYA,EAAUa,MAAMhB,EAASC,GAAc,KAAKS,OAClE,GACJ,EAqFM6oB,GAAW,WACb,SAAAA,EAAYnkB,IAAO3D,EAAAA,EAAAA,GAAA,KAAA8nB,GACf1mB,KAAK2mB,UAAW,EAChB3mB,KAAKuC,MAAQA,EACbvC,KAAK4mB,eAAiB,IAAIC,EAAAA,EAC9B,CAOC,OAPA1mB,EAAAA,EAAAA,GAAAumB,EAAA,EAAAxqB,IAAA,kBAAAiS,IACD,WACI,OAAOnO,KAAKuC,KAChB,GAAC,CAAArG,IAAA,UAAAyB,MACD,WACIqC,KAAK2mB,UAAW,EAChB3mB,KAAK4mB,eAAehc,MACxB,KAAC8b,CAAA,CAZY,GAcbI,GAA0B,WAC1B,SAAAA,EAAY5d,IAActK,EAAAA,EAAAA,GAAA,KAAAkoB,GACtB9mB,KAAKkJ,aAAeA,CACxB,CAOC,OAPA/I,EAAAA,EAAAA,GAAA2mB,EAAA,EAAA5qB,IAAA,uBAAAyB,MACD,SAAqBuD,GACjB,IAAMqB,EAAQvC,KAAKkJ,aAAa1G,SAAStB,GACzC,OAAKqB,EAGEhF,QAAQC,QAAQ,IAAIupB,EAAAA,GAAkB,IAAIL,GAAYnkB,KAFlDhF,QAAQE,OAAO,IAAIkI,MAAM,mBAGxC,KAACmhB,CAAA,CAVyB,GAY9BA,GAA6B/qB,GAAW,CACpCgB,GAAQ,EAAG0O,EAAAA,IACZqb,IAA4B,IACzBE,GAA+B,oBAAAA,KAAApoB,EAAAA,EAAAA,GAAA,KAAAooB,EAAA,CAQhC,OARgC7mB,EAAAA,EAAAA,GAAA6mB,EAAA,EAAA9qB,IAAA,OAAAyB,MACjC,WACI,OAAOqpB,EAAgCC,oBAC3C,GAAC,CAAA/qB,IAAA,YAAAyB,MACD,SAAUupB,EAASC,GACf,OAAOjqB,GAAU8C,UAAM,OAAQ,GAAMP,EAAAA,EAAAA,KAAAC,MAAE,SAAAC,IAAA,OAAAF,EAAAA,EAAAA,KAAAG,MAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAhC,MAAA,OACnC,OADmCgC,EAAAhC,KAAA,EAC7BqpB,EAAO,wBAAArnB,EAAAK,OAAA,GAAAP,EAAA,IAErB,KAACqnB,CAAA,CARgC,GAUrCA,GAAgCC,qBAAuB,CACnDhpB,KAAM,WAAQ,EACdmpB,MAAO,WAAQ,EACfC,OAAQ,WAAQ,GAClB,IACIC,GAAyB,oBAAAA,KAAA1oB,EAAAA,EAAAA,GAAA,KAAA0oB,EAAA,CAK1B,OAL0BnnB,EAAAA,EAAAA,GAAAmnB,EAAA,EAAAprB,IAAA,eAAAyB,MAC3B,SAAayF,EAAUmkB,EAAMC,GACzB,OAAOD,EAAK,CACRE,OAAQ,WAAQ,GAExB,KAACH,CAAA,CAL0B,GAOzBI,IAA4BvnB,EAAAA,EAAAA,IAC9B,SAAAunB,KAAc9oB,EAAAA,EAAAA,GAAA,KAAA8oB,GACV1nB,KAAK2nB,wBAAyB,EAC9B3nB,KAAK4nB,SAAU,CACnB,IAEEC,GAAuB,oBAAAA,KAAAjpB,EAAAA,EAAAA,GAAA,KAAAipB,EAAA,CAoCxB,OApCwB1nB,EAAAA,EAAAA,GAAA0nB,EAAA,EAAA3rB,IAAA,UAAAyB,MACzB,SAAQmqB,GACJ,OAAO5qB,GAAU8C,UAAM,OAAQ,GAAMP,EAAAA,EAAAA,KAAAC,MAAE,SAAAmU,IAAA,IAAAkU,EAAA,OAAAtoB,EAAAA,EAAAA,KAAAG,MAAA,SAAAmU,GAAA,cAAAA,EAAAjU,KAAAiU,EAAAlW,MAAA,OACwC,OAArEkqB,EAAY/nB,KAAKgoB,UAAUF,EAAaG,QAASH,EAAaI,QAAOnU,EAAAhU,OAAA,SACpE,CACHgoB,UAAAA,EACAI,iBAAiB,IACpB,wBAAApU,EAAA7T,OAAA,GAAA2T,EAAA,SAET,GAAC,CAAA3X,IAAA,YAAAyB,MACD,SAAUsqB,EAASC,GACf,IAAIE,EAAcH,EAIlB,OAHIC,IACAE,EAAcA,EAAc,OAASF,GAElC/B,OAAOkC,QAAQD,EAC1B,GAAC,CAAAlsB,IAAA,SAAAyB,MACD,SAAO2qB,GACH,IAAI5Z,EAAI6Z,EACR,OAAOrrB,GAAU8C,UAAM,OAAQ,GAAMP,EAAAA,EAAAA,KAAAC,MAAE,SAAA8oB,IAAA,IAAAxqB,EAAAyqB,EAAA,OAAAhpB,EAAAA,EAAAA,KAAAG,MAAA,SAAA8oB,GAAA,cAAAA,EAAA5oB,KAAA4oB,EAAA7qB,MAAA,OAE4B,GAD3DG,OAASsM,GACKtK,KAAKgoB,UAAUM,EAAOL,QAASK,EAAOJ,QACzC,CAAFQ,EAAA7qB,KAAA,QAKA,OAJH4qB,GAAapZ,EAAAA,EAAAA,GAAkC,QAAzBX,EAAK4Z,EAAOK,eAA4B,IAAPja,EAAgBA,EAAK,IAC9E4Z,EAAOM,cAA+C,kBAAxBN,EAAOM,cAA4D,mBAAxBN,EAAOM,cAChFH,EAAcxN,KAAKqN,EAAOM,cAC7BF,EAAA7qB,KAAA,EAC2C,QAA3B0qB,EAAKE,EAAc,UAAuB,IAAPF,OAAgB,EAASA,EAAG7iB,IAAI,CAAEyiB,iBAAiB,IAAS,OAAhHnqB,EAAM0qB,EAAAzU,KAAA,cAAAyU,EAAA3oB,OAAA,SAEH,CAAE/B,OAAAA,IAAQ,wBAAA0qB,EAAAxoB,OAAA,GAAAsoB,EAAA,SAEzB,GAAC,CAAAtsB,IAAA,QAAAyB,MACD,SAAMsqB,EAASC,GACX,OAAOhrB,GAAU8C,UAAM,OAAQ,GAAMP,EAAAA,EAAAA,KAAAC,MAAE,SAAAmpB,IAAA,OAAAppB,EAAAA,EAAAA,KAAAG,MAAA,SAAAkpB,GAAA,cAAAA,EAAAhpB,KAAAgpB,EAAAjrB,MAAA,OACnC,OADmCirB,EAAAjrB,KAAA,EAC7BmC,KAAKsoB,OAAO,CAAES,KAAMC,EAAAA,EAASrjB,MAAOsiB,QAAAA,EAASC,OAAAA,IAAS,wBAAAY,EAAA5oB,OAAA,GAAA2oB,EAAA,SAEpE,KAAChB,CAAA,CApCwB,GAsChBoB,GAA6B,oBAAAA,KAAArqB,EAAAA,EAAAA,GAAA,KAAAqqB,EAAA,CA6BrC,OA7BqC9oB,EAAAA,EAAAA,GAAA8oB,EAAA,EAAA/sB,IAAA,OAAAyB,MACtC,SAAKsqB,GACD,OAAOjoB,KAAKkpB,OAAO,CAAEC,SAAUH,EAAAA,EAASI,KAAMnB,QAAAA,GAClD,GAAC,CAAA/rB,IAAA,OAAAyB,MACD,SAAKsqB,GACD,OAAOjoB,KAAKkpB,OAAO,CAAEC,SAAUH,EAAAA,EAASK,QAASpB,QAAAA,GACrD,GAAC,CAAA/rB,IAAA,QAAAyB,MACD,SAAM2rB,GACF,OAAOtpB,KAAKkpB,OAAO,CAAEC,SAAUH,EAAAA,EAASrjB,MAAOsiB,QAASqB,GAC5D,GAAC,CAAAptB,IAAA,SAAAyB,MACD,SAAO4rB,GACH,OAAQA,EAAaJ,UACjB,KAAKH,EAAAA,EAASrjB,MACVd,QAAQykB,MAAMC,EAAatB,SAC3B,MACJ,KAAKe,EAAAA,EAASK,QACVxkB,QAAQC,KAAKykB,EAAatB,SAC1B,MACJ,QACIpjB,QAAQ+V,IAAI2O,EAAatB,SAGjC,OAAOgB,EAA8BO,KACzC,GAAC,CAAAttB,IAAA,SAAAyB,MACD,SAAOwrB,EAAUlB,EAASwB,EAAS9nB,GAC/B,OAAOsnB,EAA8BO,KACzC,GAAC,CAAAttB,IAAA,SAAAyB,MACD,SAAOsqB,EAAStmB,GACZ,OAAOiE,EAAAA,GAAWC,IACtB,KAACojB,CAAA,CA7BqC,GA+B1CA,GAA8BO,MAAQ,IAAIE,EAAAA,GAC1C,IAAIC,GAAwB,WACxB,SAAAA,EAAYtmB,IAAsBzE,EAAAA,EAAAA,GAAA,KAAA+qB,GAC9B3pB,KAAK4pB,sBAAwB,IAAI/C,EAAAA,GACjC7mB,KAAK6pB,qBAAuB,IAAIhD,EAAAA,GAChC7mB,KAAK8pB,oBAAsB9pB,KAAK6pB,qBAAqBE,MACrD/pB,KAAKgqB,sBAAwB3mB,CACjC,CAeC,OAfAlD,EAAAA,EAAAA,GAAAwpB,EAAA,EAAAztB,IAAA,iBAAAyB,MACD,SAAe6H,GACX,IAAM4B,EAAUH,EAAAA,EAAiBgjB,WAAWzkB,GAC5C,IAAK4B,EACD,OAAO7J,QAAQE,OAAO,IAAIkI,MAAM,YAADiB,OAAapB,EAAE,iBAElD,IAAI,QAAAgB,EAAAlK,UAAAC,OALckK,EAAI,IAAAC,MAAAF,EAAA,EAAAA,EAAA,KAAAG,EAAA,EAAAA,EAAAH,EAAAG,IAAJF,EAAIE,EAAA,GAAArK,UAAAqK,GAMlB3G,KAAK4pB,sBAAsBhf,KAAK,CAAE7F,UAAWS,EAAIiB,KAAAA,IACjD,IAAMzI,EAASgC,KAAKgqB,sBAAsBE,eAAe/rB,MAAM6B,KAAKgqB,sBAAuB,CAAC5iB,EAAQzC,SAAOiC,OAAKH,IAEhH,OADAzG,KAAK6pB,qBAAqBjf,KAAK,CAAE7F,UAAWS,EAAIiB,KAAAA,IACzClJ,QAAQC,QAAQQ,EAC3B,CACA,MAAO4C,GACH,OAAOrD,QAAQE,OAAOmD,EAC1B,CACJ,KAAC+oB,CAAA,CArBuB,GAuB5BA,GAA2B5tB,GAAW,CAClCgB,GAAQ,EAAGiO,EAAAA,KACZ2e,IAEH,IAAIzlB,GAA2B,SAAAimB,IAAA7rB,EAAAA,EAAAA,GAAA4F,EAAAimB,GAAA,IAAA5rB,GAAAC,EAAAA,EAAAA,GAAA0F,GAC3B,SAAAA,EAAYzF,EAAmB8E,EAAgB6mB,EAAkB3mB,EAAqB4mB,EAAY/mB,GAAmB,IAAA3E,GAAAC,EAAAA,EAAAA,GAAA,KAAAsF,IACjHvF,EAAAJ,EAAAM,KAAA,KAAMJ,EAAmB8E,EAAgB6mB,EAAkB3mB,EAAqB4mB,IAC3EC,gBAAkB,KACvB3rB,EAAK4rB,oBAAsB,GAC3B5rB,EAAK6rB,kBAAoB,GACzB,IAAMC,EAAe,SAACjZ,GAClB,IAAMkZ,EAAc,IAAI5jB,EAAAA,GAExB4jB,EAAY1jB,IAAIkf,EAAAA,sBAA0B1U,EAAS0U,EAAAA,UAAcyE,UAAU,SAAC7sB,GACxE,IAAM8sB,EAAW,IAAIC,EAAAA,EAAsB/sB,GACda,EAAKmsB,UAAUF,EAAUA,EAAS3uB,UAE3D2uB,EAASG,iBACTH,EAASI,kBAEjB,KAEAN,EAAY1jB,IAAIkf,EAAAA,sBAA0B1U,EAAS0U,EAAAA,UAAc+E,QAAQ,SAACntB,GACtE,IAAM8sB,EAAW,IAAIC,EAAAA,EAAsB/sB,GACda,EAAKusB,wBAAwBN,EAAUA,EAAS3uB,SAEzE2uB,EAASG,gBAEjB,KACApsB,EAAK6rB,kBAAkBvP,KAAK,IAAIkQ,GAAiB3Z,EAASkZ,GAC9D,EACMU,EAAkB,SAAC5Z,GACrB,IAAK,IAAI3U,EAAI,EAAGA,EAAI8B,EAAK6rB,kBAAkBjuB,OAAQM,IAAK,CACpD,IAAMwuB,EAAmB1sB,EAAK6rB,kBAAkB3tB,GAC5CwuB,EAAiB7Z,UAAYA,IAC7B7S,EAAK6rB,kBAAkBc,OAAOzuB,EAAG,GACjCwuB,EAAiBtgB,UAEzB,CACJ,EACMwgB,EAAgB,SAACC,GACfA,EAAWC,UAAU,KAGzBhB,EAAae,EAAWE,sBAC5B,EAOA/sB,EAAKqL,UAAU1G,EAAkBxE,gBAAgBysB,IACjD5sB,EAAKqL,UAAU1G,EAAkBtE,oBAPR,SAACwsB,GAClBA,EAAWC,UAAU,KAGzBL,EAAgBI,EAAWE,sBAC/B,KAGApoB,EAAkB9C,kBAAkBmrB,QAAQJ,GAC5C,IAAMK,EAAgB,SAAC9c,GACnB2b,EAAa3b,EAAW4c,sBAC5B,EAM2D,OAF3D/sB,EAAKqL,UAAU1G,EAAkB+K,gBAAgBud,IACjDjtB,EAAKqL,UAAU1G,EAAkBuoB,oBAJR,SAAC/c,GACtBsc,EAAgBtc,EAAW4c,sBAC/B,KAGApoB,EAAkBkL,kBAAkBmd,QAAQC,GAAejtB,CAC/D,CAyEC,OAzEAwB,EAAAA,EAAAA,GAAA+D,EAAA,EAAAhI,IAAA,uBAAAyB,MACD,SAAqByJ,EAAS1C,EAAYC,EAAS2C,GAC/C,OAAOwkB,EAAAA,EAAAA,IAAmB7kB,EAAAA,EAAiBC,gBAAgBE,EAASzC,GAAU3E,KAAKsP,sBAAsB,CAAC,CAClG5K,WAAAA,EACA0C,QAAAA,EACAE,KAAAA,KAEZ,GAAC,CAAApL,IAAA,wBAAAyB,MACD,SAAsBgS,GAAO,IAAApK,EAAA,KACnBwmB,EAAUpc,EAAMJ,KAAI,SAACE,GACvB,IAAIf,EAEJ,MAAO,CACHhK,YAFesnB,EAAAA,EAAAA,IAAiBvc,EAAK/K,WAAYunB,EAAAA,IAGjD7kB,QAAiC,QAAvBsH,EAAKe,EAAKrI,eAA4B,IAAPsH,EAAgBA,EAAK,KAC9DkB,YAAaH,EAAKG,YAClBtI,KAAMmI,EAAKnI,KACX4kB,QAAS,IACTC,QAAS,EACTC,YAAa,KACbC,oBAAoB,EAE5B,IAGA,OAFArsB,KAAKuqB,oBAAsBvqB,KAAKuqB,oBAAoB3jB,OAAOmlB,GAC3D/rB,KAAKssB,kBACElkB,EAAAA,EAAAA,KAAa,WAEhB,IAAK,IAAIvL,EAAI,EAAGA,EAAI0I,EAAKglB,oBAAoBhuB,OAAQM,IACjD,GAAI0I,EAAKglB,oBAAoB1tB,KAAOkvB,EAAQ,GAGxC,OAFAxmB,EAAKglB,oBAAoBe,OAAOzuB,EAAGkvB,EAAQxvB,aAC3CgJ,EAAK+mB,gBAIjB,GACJ,GAAC,CAAApwB,IAAA,iBAAAyB,MACD,WACIqC,KAAKsqB,gBAAkB,KACvBtqB,KAAKusB,wBAAwB3hB,MACjC,GAAC,CAAA1O,IAAA,eAAAyB,MACD,WAAe,IAAAyL,EAAA,KACX,IAAKpJ,KAAKsqB,gBAAiB,CACvB,IAAMkC,EAAWxsB,KAAKysB,6BAA6BC,EAAAA,EAAoBC,yBAAyB,GAC1FC,EAAY5sB,KAAKysB,6BAA6BzsB,KAAKuqB,qBAAqB,GAC9EvqB,KAAKsqB,gBAAkB,IAAIuC,EAAAA,EAAmBL,EAAUI,GAAW,SAACjV,GAAG,OAAKvO,EAAK0jB,KAAKnV,EAAI,GAC9F,CACA,OAAO3X,KAAKsqB,eAChB,GAAC,CAAApuB,IAAA,oBAAAyB,MACD,WACI,OAAO2G,SAASyoB,UACpB,GAAC,CAAA7wB,IAAA,+BAAAyB,MACD,SAA6BqvB,EAAOC,GAChC,IAEwB7sB,EAFlBpC,EAAS,GACXghB,EAAY,EAAE1e,GAAAC,EAAAA,EAAAA,GACCysB,GAAK,IAAxB,IAAA1sB,EAAAG,MAAAL,EAAAE,EAAAI,KAAAzC,MAA0B,KAAfivB,EAAI9sB,EAAAzC,MACL2J,EAAO4lB,EAAK5lB,WAAQgD,EACpB5F,EAAawoB,EAAKxoB,WACxB,GAAKA,EAIA,CACD,IACoD0S,EAD9C+V,EAAsBC,EAAAA,EAA2BC,kBAAkB3oB,EAAYunB,EAAAA,IAAI5U,GAAA9W,EAAAA,EAAAA,GACxD4sB,GAAmB,IAApD,IAAA9V,EAAA5W,MAAA2W,EAAAC,EAAA3W,KAAAzC,MAAsD,KAA3CqvB,EAAkBlW,EAAAzZ,MACzBK,EAAOghB,KAAe,IAAIuO,EAAAA,EAAuBD,EAAoBJ,EAAK9lB,QAAS8lB,EAAKtd,YAAatI,EAAM2lB,EAAW,MAAM,EAChI,CAAC,OAAArsB,GAAAyW,EAAAvZ,EAAA8C,EAAA,SAAAyW,EAAAxW,GAAA,CACL,MAPI7C,EAAOghB,KAAe,IAAIuO,EAAAA,OAAuBjjB,EAAW4iB,EAAK9lB,QAAS8lB,EAAKtd,YAAatI,EAAM2lB,EAAW,MAAM,EAQ3H,CAAC,OAAArsB,GAAAN,EAAAxC,EAAA8C,EAAA,SAAAN,EAAAO,GAAA,CACD,OAAO7C,CACX,GAAC,CAAA9B,IAAA,uBAAAyB,MACD,SAAqB6vB,GACjB,IAAMC,EAAQ,IAAIC,EAAAA,GAAaF,EAAcG,QAASH,EAAcI,SAAUJ,EAAcK,OAAQL,EAAcM,QAASN,EAAcO,SACzI,OAAO,IAAIX,EAAAA,EAA2B,CAACK,GAAQxB,EAAAA,GACnD,KAAC/nB,CAAA,CArI0B,CAA6C8pB,EAAAA,GAuI5E9pB,GAA8BnI,GAAW,CACrCgB,GAAQ,EAAG4F,EAAAA,IACX5F,GAAQ,EAAGkO,EAAAA,GACXlO,GAAQ,EAAGkxB,EAAAA,GACXlxB,GAAQ,EAAGoO,EAAAA,IACXpO,GAAQ,EAAGmxB,EAAAA,IACXnxB,GAAQ,EAAG+F,EAAAA,IACZoB,IACoC,IACjCinB,GAAgB,SAAAgD,IAAA7vB,EAAAA,EAAAA,GAAA6sB,EAAAgD,GAAA,IAAAnlB,GAAAxK,EAAAA,EAAAA,GAAA2sB,GAClB,SAAAA,EAAY3Z,EAASkZ,GAAa,IAAAze,EAGF,OAHErN,EAAAA,EAAAA,GAAA,KAAAusB,IAC9Blf,EAAAjD,EAAAnK,KAAA,OACK2S,QAAUA,EACfvF,EAAKjC,UAAU0gB,GAAaze,CAChC,CAAC,OAAA9L,EAAAA,EAAAA,GAAAgrB,EAAA,CALiB,CAASvlB,EAAAA,IAO/B,SAASwoB,GAAyBC,GAC9B,OAAOA,GACiB,kBAAVA,KACLA,EAAMC,oBAA0D,kBAA7BD,EAAMC,uBACzCD,EAAMntB,UAAYmtB,EAAMntB,oBAAoBwS,EAAAA,EACzD,CACO,IAAM6a,GAA8B,WACvC,SAAAA,KAAc3vB,EAAAA,EAAAA,GAAA,KAAA2vB,GACVvuB,KAAKwuB,0BAA4B,IAAI3H,EAAAA,GACrC7mB,KAAKyuB,yBAA2BzuB,KAAKwuB,0BAA0BzE,MAC/D,IAAM2E,EAAuB,IAAIC,GAAAA,EACjC3uB,KAAK4uB,eAAiB,IAAIC,EAAAA,GAAcH,EAAqBI,SAAU,IAAIC,EAAAA,GAAsB,IAAIA,EAAAA,GAAsB,IAAIA,EAAAA,IAC/HL,EAAqB3jB,SACzB,CA8BC,OA9BA5K,EAAAA,EAAAA,GAAAouB,EAAA,EAAAryB,IAAA,WAAAyB,MACD,SAASqxB,EAAMC,GACX,IAAMC,EAA0B,kBAATF,EAAoBA,OAAO1kB,EAC5CsiB,EAAYwB,GAAyBY,GAAQA,EAAOZ,GAAyBa,GAAQA,EAAO,CAAC,EACnG,OAAOjvB,KAAK4uB,eAAeO,SAASD,EAAStC,OAAWtiB,EAC5D,GAAC,CAAApO,IAAA,eAAAyB,MACD,SAAayxB,GACT,IAE0B9S,EAFpB+S,EAAW,CAAEC,KAAMtvB,KAAK4uB,eAAeW,UACvCC,EAAc,GAAGjT,GAAAhc,EAAAA,EAAAA,GACH6uB,GAAM,IAA1B,IAAA7S,EAAA9b,MAAA6b,EAAAC,EAAA7b,KAAAzC,MAA4B,KAAjBwxB,EAAKnT,EAAA3e,MACZ+xB,GAAAC,EAAAA,EAAAA,GAAqBF,EAAK,GAAnBvzB,EAAGwzB,EAAA,GAAE/xB,EAAK+xB,EAAA,GACb1vB,KAAKmvB,SAASjzB,KAASyB,IAG3BqC,KAAK4uB,eAAegB,YAAY1zB,EAAKyB,GACrC6xB,EAAYvU,KAAK/e,GACrB,CAAC,OAAA0E,GAAA2b,EAAAze,EAAA8C,EAAA,SAAA2b,EAAA1b,GAAA,CACD,GAAI2uB,EAAYjzB,OAAS,EAAG,CACxB,IAAMszB,EAA2B,IAAIC,EAAAA,GAAyB,CAAEC,KAAMP,EAAa5C,UAAW,IAAMyC,EAAUrvB,KAAK4uB,gBACnHiB,EAAyBvwB,OAAS,EAClCuwB,EAAyBG,aAAe,KACxChwB,KAAKwuB,0BAA0B5jB,KAAKilB,EACxC,CACA,OAAOtyB,QAAQC,SACnB,GAAC,CAAAtB,IAAA,cAAAyB,MACD,SAAYzB,EAAKyB,EAAOsyB,EAAMC,GAC1B,OAAOlwB,KAAKmwB,aAAa,CAAC,CAACj0B,EAAKyB,IACpC,GAAC,CAAAzB,IAAA,UAAAyB,MACD,SAAQzB,GAAmB,IAAdyF,EAAOrF,UAAAC,OAAA,QAAA+N,IAAAhO,UAAA,GAAAA,UAAA,GAAG,CAAC,EACpB,OAAO0D,KAAK4uB,eAAewB,QAAQl0B,EAAKyF,OAAS2I,EACrD,KAACikB,CAAA,CArCsC,GAuCvC8B,GAAsC,WACtC,SAAAA,EAAYpnB,EAAsBC,EAAcC,GAAiB,IAAA8D,EAAA,MAAArO,EAAAA,EAAAA,GAAA,KAAAyxB,GAC7DrwB,KAAKiJ,qBAAuBA,EAC5BjJ,KAAKkJ,aAAeA,EACpBlJ,KAAKmJ,gBAAkBA,EACvBnJ,KAAKwuB,0BAA4B,IAAI3H,EAAAA,GACrC7mB,KAAKiJ,qBAAqBwlB,0BAAyB,SAAC3wB,GAChDmP,EAAKuhB,0BAA0B5jB,KAAK,CAAE0lB,aAAcxyB,EAAEwyB,aAAcC,qBAAsB,SAACrvB,EAAUkd,GAAa,OAAKtgB,EAAEyyB,qBAAqBnS,EAAc,GAChK,GACJ,CAsBC,OAtBAje,EAAAA,EAAAA,GAAAkwB,EAAA,EAAAn0B,IAAA,WAAAyB,MACD,SAASuD,EAAU+tB,EAAMgB,GACrB,IAAM3O,EAAWkP,EAAAA,EAAIC,YAAYxB,GAAQA,EAAO,KAC1CC,EAAU5N,EAA4B,kBAAT2O,EAAoBA,OAAO3lB,EAA8B,kBAAT2kB,EAAoBA,OAAO3kB,EACxGH,EAAWjJ,EAAWlB,KAAK0wB,YAAYxvB,EAAUogB,QAAYhX,EACnE,MAAuB,qBAAZ4kB,EACAlvB,KAAKiJ,qBAAqBkmB,SAAS,CACtCjuB,SAAAA,EACAotB,mBAAoBnkB,IAGrBnK,KAAKiJ,qBAAqBkmB,SAASD,EAAS,CAC/ChuB,SAAAA,EACAotB,mBAAoBnkB,GAE5B,GAAC,CAAAjO,IAAA,cAAAyB,MACD,SAAYuD,EAAUogB,GAClB,IAAM/e,EAAQvC,KAAKkJ,aAAa1G,SAAStB,GACzC,OAAIqB,EACO+e,EAAW/e,EAAMouB,wBAAwBrP,EAASrf,WAAYqf,EAASnf,QAAUI,EAAMquB,gBAE3F5wB,KAAKmJ,gBAAgB0nB,qCAAqC3vB,EACrE,KAACmvB,CAAA,CA/BqC,GAiC1CA,GAAyCt0B,GAAW,CAChDgB,GAAQ,EAAGyO,EAAAA,IACXzO,GAAQ,EAAG0O,EAAAA,GACX1O,GAAQ,EAAG2O,GAAAA,IACZ2kB,IACH,IAAIS,GAAmC,WACnC,SAAAA,EAAY7nB,IAAsBrK,EAAAA,EAAAA,GAAA,KAAAkyB,GAC9B9wB,KAAKiJ,qBAAuBA,CAChC,CAOC,OAPA9I,EAAAA,EAAAA,GAAA2wB,EAAA,EAAA50B,IAAA,SAAAyB,MACD,SAAOuD,EAAUiJ,GACb,IAAM4mB,EAAM/wB,KAAKiJ,qBAAqBkmB,SAAS,YAAa,CAAEb,mBAAoBnkB,EAAUjJ,SAAAA,IAC5F,OAAI6vB,GAAsB,kBAARA,GAA4B,SAARA,EAC3BA,EAEHC,EAAAA,IAAWC,EAAAA,GAAe,KAAO,MAC7C,KAACH,CAAA,CAVkC,GAYvCA,GAAsC/0B,GAAW,CAC7CgB,GAAQ,EAAGyO,EAAAA,KACZslB,IAAqC,IAClCI,GAA0B,oBAAAA,KAAAtyB,EAAAA,EAAAA,GAAA,KAAAsyB,EAAA,CACZ,OADY/wB,EAAAA,EAAAA,GAAA+wB,EAAA,EAAAh1B,IAAA,aAAAyB,MAC5B,WAAe,KAACuzB,CAAA,CADY,GAG1BC,GAAiC,WACnC,SAAAA,KAAcvyB,EAAAA,EAAAA,GAAA,KAAAuyB,GACV,IAAMjwB,EAAWwS,EAAAA,EAAI0d,KAAK,CAAEhwB,OAAQ+vB,EAAkCE,OAAQC,UAAW,QAASC,KAAM,MACxGvxB,KAAKwxB,UAAY,CAAEhsB,GAAIisB,EAAAA,GAAgCC,QAAS,CAAC,IAAIC,EAAAA,GAAgB,CAAElvB,IAAKvB,EAAU2Y,KAAM,GAAI+X,MAAO,KAC3H,CAMC,OANAzxB,EAAAA,EAAAA,GAAAgxB,EAAA,EAAAj1B,IAAA,eAAAyB,MACD,WACI,OAAOqC,KAAKwxB,SAChB,GAAC,CAAAt1B,IAAA,qBAAAyB,MACD,SAAmBuD,GACf,OAAOA,GAAYA,EAASE,SAAW+vB,EAAkCE,OAASrxB,KAAKwxB,UAAUE,QAAQ,GAAK,IAClH,KAACP,CAAA,CAVkC,GAahC,SAAS9nB,GAA2BJ,EAAsB3J,EAAQuyB,GACrE,GAAKvyB,GAGC2J,aAAgCslB,GAAtC,CAGA,IAAMuD,EAAW,GACjBr1B,OAAOszB,KAAKzwB,GAAQqsB,SAAQ,SAACzvB,IACrB61B,EAAAA,EAAAA,IAAyB71B,IACzB41B,EAAS7W,KAAK,CAAC,UAADrU,OAAW1K,GAAOoD,EAAOpD,KAEvC21B,IAAgBG,EAAAA,EAAAA,IAA6B91B,IAC7C41B,EAAS7W,KAAK,CAAC,cAADrU,OAAe1K,GAAOoD,EAAOpD,IAEnD,IACI41B,EAASv1B,OAAS,GAClB0M,EAAqBknB,aAAa2B,EAXtC,CAaJ,CApBAX,GAAkCE,OAAS,WAqB3C,IAAIY,GAAyB,WACzB,SAAAA,EAAYC,IAAetzB,EAAAA,EAAAA,GAAA,KAAAqzB,GACvBjyB,KAAKkyB,cAAgBA,CAEzB,CAwCC,OAxCA/xB,EAAAA,EAAAA,GAAA8xB,EAAA,EAAA/1B,IAAA,oBAAAyB,MACD,WACI,OAAO,CACX,GAAC,CAAAzB,IAAA,QAAAyB,MACD,SAAMw0B,EAAS/uB,GACX,OAAOlG,GAAU8C,UAAM,OAAQ,GAAMP,EAAAA,EAAAA,KAAAC,MAAE,SAAA0yB,IAAA,IAAAC,EAAAC,EAAAnV,EAAAD,EAAAqV,EAAAhwB,EAAA4U,EAAAqb,EAAAC,EAAAC,EAAAC,EAAAC,EAAA/oB,EAAAgpB,EAAA,OAAApzB,EAAAA,EAAAA,KAAAG,MAAA,SAAAkzB,GAAA,cAAAA,EAAAhzB,KAAAgzB,EAAAj1B,MAAA,OAC7Bw0B,EAAQ3rB,MAAMmB,QAAQsqB,GAAWA,EAAUY,EAAAA,GAAaC,QAAQb,GAChEG,EAAY,IAAIW,IAAK9V,GAAA5c,EAAAA,EAAAA,GACR8xB,GAAKS,EAAAhzB,KAAA,EAAAqd,EAAA1c,IAAA,WAAAyc,EAAAC,EAAAzc,KAAAzC,KAAE,CAAF60B,EAAAj1B,KAAA,SAAT,IAAJ00B,EAAIrV,EAAAvf,iBACWu1B,EAAAA,GAAgB,CAAAJ,EAAAj1B,KAAA,cAC5B,IAAI8H,MAAM,4CAA2C,OAEP,GAAlDpD,EAAQvC,KAAKkyB,cAAc1vB,SAAS+vB,EAAKrxB,UACnC,CAAF4xB,EAAAj1B,KAAA,eACA,IAAI8H,MAAM,8BAA6B,WAEnB,kBAAnB4sB,EAAKY,WAA0B5wB,EAAM6wB,iBAAmBb,EAAKY,UAAS,CAAAL,EAAAj1B,KAAA,eACvE,IAAI8H,MAAM,6CAA4C,SAE5DwR,EAAQmb,EAAUnkB,IAAI5L,MAEtB4U,EAAQ,GACRmb,EAAUxxB,IAAIyB,EAAO4U,IAEzBA,EAAM8D,KAAKoY,EAAAA,EAAcC,YAAY7R,EAAAA,EAAM8R,KAAKhB,EAAKiB,SAAShS,OAAQ+Q,EAAKiB,SAAS7hB,OAAO,QAAAmhB,EAAAj1B,KAAA,gBAAAi1B,EAAAj1B,KAAA,iBAAAi1B,EAAAhzB,KAAA,GAAAgzB,EAAAW,GAAAX,EAAA,SAAA3V,EAAArf,EAAAg1B,EAAAW,IAAA,eAAAX,EAAAhzB,KAAA,GAAAqd,EAAAtc,IAAAiyB,EAAAY,OAAA,YAE3FlB,EAAa,EACbC,EAAa,EAACC,GAAAnyB,EAAAA,EAAAA,GACW+xB,GAAS,IAAtC,IAAAI,EAAAjyB,MAAAkyB,EAAAD,EAAAhyB,KAAAzC,MAAwC20B,GAAAjD,EAAAA,EAAAA,GAAAgD,EAAAh1B,MAAA,GAA5B4E,EAAKqwB,EAAA,GAAEP,EAAKO,EAAA,GACpBrwB,EAAMoxB,mBACNpxB,EAAMqxB,mBAAmB,GAAIvB,GAAO,iBAAM,EAAE,IAC5C9vB,EAAMoxB,mBACNlB,GAAc,EACdD,GAAcH,EAAM91B,MACvB,OAAAqE,GAAA8xB,EAAA50B,EAAA8C,EAAA,SAAA8xB,EAAA7xB,GAAA,QAAAiyB,EAAA/yB,OAAA,SACM,CACH8zB,YAAaC,EAAAA,GAAeC,EAAAA,GAAsBC,uBAAwBxB,EAAYC,GACtFwB,UAAWzB,EAAa,IAC3B,yBAAAM,EAAA5yB,OAAA,GAAAkyB,EAAA,wBAET,KAACH,CAAA,CA5CwB,GA8C7BA,GAA4Bl2B,GAAW,CACnCgB,GAAQ,EAAG0O,EAAAA,IACZwmB,IAA2B,IACxBiC,GAAyB,oBAAAA,KAAAt1B,EAAAA,EAAAA,GAAA,KAAAs1B,EAAA,CAS1B,OAT0B/zB,EAAAA,EAAAA,GAAA+zB,EAAA,EAAAh4B,IAAA,cAAAyB,MAC3B,SAAYuD,EAAUS,GAClB,MAAwB,SAApBT,EAASE,OACFF,EAASizB,OAEbjzB,EAASqwB,IACpB,GAAC,CAAAr1B,IAAA,sBAAAyB,MACD,SAAoBuD,GAChB,OAAOkzB,EAAAA,EAAAA,IAASlzB,EACpB,KAACgzB,CAAA,CAT0B,GAW3BG,GAA4B,SAAAC,IAAAh2B,EAAAA,EAAAA,GAAA+1B,EAAAC,GAAA,IAAAzoB,GAAArN,EAAAA,EAAAA,GAAA61B,GAC5B,SAAAA,EAAYE,EAAe/rB,GAAoB,IAAAgsB,EAEE,OAFF51B,EAAAA,EAAAA,GAAA,KAAAy1B,IAC3CG,EAAA3oB,EAAAhN,KAAA,KAAM01B,IACD/rB,mBAAqBA,EAAmBgsB,CACjD,CASC,OATAr0B,EAAAA,EAAAA,GAAAk0B,EAAA,EAAAn4B,IAAA,kBAAAyB,MACD,SAAgB82B,EAAUvoB,EAAWwoB,GACjC,IAAKxoB,EAAW,CACZ,IAAMsf,EAAaxrB,KAAKwI,mBAAmB4d,wBAA0BpmB,KAAKwI,mBAAmBmsB,sBACzFnJ,IACAtf,EAAYsf,EAAWE,sBAE/B,CACA,OAAAhjB,EAAAA,EAAAA,IAAAC,EAAAA,EAAAA,GAAA0rB,EAAAzrB,WAAA,wBAAA/J,KAAA,KAA6B41B,EAAUvoB,EAAWwoB,EACtD,KAACL,CAAA,CAb2B,CAA8CO,GAAAA,GAe9EP,GAA+Bt4B,GAAW,CACtCgB,GAAQ,EAAG0pB,EAAAA,GACX1pB,GAAQ,EAAG+F,EAAAA,IACZuxB,IAA8B,IAC3BQ,GAAyC,WAC3C,SAAAA,KAAcj2B,EAAAA,EAAAA,GAAA,KAAAi2B,GACV70B,KAAK80B,cAAgB,IAAIjO,EAAAA,GACzB7mB,KAAK+0B,iBAAmB/0B,KAAK80B,cAAc/K,KAC/C,CAGC,OAHA5pB,EAAAA,EAAAA,GAAA00B,EAAA,EAAA34B,IAAA,qBAAAyB,MACD,WACI,OAAO,CACX,KAACk3B,CAAA,CAP0C,GASzCG,GAAyB,SAAAC,IAAA32B,EAAAA,EAAAA,GAAA02B,EAAAC,GAAA,IAAAloB,GAAAvO,EAAAA,EAAAA,GAAAw2B,GAC3B,SAAAA,IAAc,OAAAp2B,EAAAA,EAAAA,GAAA,KAAAo2B,GAAAjoB,EAAAlO,KAAA,KAEd,CAAC,OAAAsB,EAAAA,EAAAA,GAAA60B,EAAA,CAH0B,CAASE,GAAAA,GAKlCC,GAAoB,SAAAC,IAAA92B,EAAAA,EAAAA,GAAA62B,EAAAC,GAAA,IAAAC,GAAA72B,EAAAA,EAAAA,GAAA22B,GACtB,SAAAA,IAAc,OAAAv2B,EAAAA,EAAAA,GAAA,KAAAu2B,GAAAE,EAAAx2B,KAAA,KACJ,IAAIy2B,EAAAA,GACd,CAAC,OAAAn1B,EAAAA,EAAAA,GAAAg1B,EAAA,CAHqB,CAASI,GAAAA,GAK/BC,GAA4B,SAAAC,IAAAn3B,EAAAA,EAAAA,GAAAk3B,EAAAC,GAAA,IAAAC,GAAAl3B,EAAAA,EAAAA,GAAAg3B,GAC5B,SAAAA,EAAYpL,EAAkB3mB,EAAqBkyB,EAAoBnyB,EAAmBoyB,EAAan3B,GAAmB,IAAAo3B,EAE/E,OAF+Ej3B,EAAAA,EAAAA,GAAA,KAAA42B,IACtHK,EAAAH,EAAA72B,KAAA,KAAMurB,EAAkB3mB,EAAqBkyB,EAAoBnyB,EAAmBoyB,EAAan3B,IAC5Fq3B,UAAU,CAAEC,YAAY,IAAUF,CAC3C,CAAC,OAAA11B,EAAAA,EAAAA,GAAAq1B,EAAA,CAJ2B,CAA8CQ,GAAAA,GAM9ER,GAA+Bz5B,GAAW,CACtCgB,GAAQ,EAAGkxB,EAAAA,GACXlxB,GAAQ,EAAGoO,EAAAA,IACXpO,GAAQ,EAAGk5B,EAAAA,GACXl5B,GAAQ,EAAGmO,EAAAA,GACXnO,GAAQ,EAAGm5B,GAAAA,IACXn5B,GAAQ,EAAG4F,EAAAA,KACZ6yB,IAA8B,IA6CtBznB,GA5CLooB,GAAsB,oBAAAA,KAAAv3B,EAAAA,EAAAA,GAAA,KAAAu3B,EAAA,CAIvB,OAJuBh2B,EAAAA,EAAAA,GAAAg2B,EAAA,EAAAj6B,IAAA,eAAAyB,MACxB,SAAay4B,EAAKC,GACd,OAAOn5B,GAAU8C,UAAM,OAAQ,GAAMP,EAAAA,EAAAA,KAAAC,MAAE,SAAA42B,IAAA,OAAA72B,EAAAA,EAAAA,KAAAG,MAAA,SAAA22B,GAAA,cAAAA,EAAAz2B,KAAAy2B,EAAA14B,MAAA,wBAAA04B,EAAAr2B,OAAA,GAAAo2B,EAAA,IAE3C,KAACH,CAAA,CAJuB,IAM5BtzB,EAAAA,GAAAA,GAAkB2I,EAAAA,GAAuB+iB,GAAgC,IACzE1rB,EAAAA,GAAAA,GAAkB2zB,EAAAA,EAAmCnG,GAAwC,IAC7FxtB,EAAAA,GAAAA,GAAkB4zB,EAAAA,EAAgC3F,GAAqC,IACvFjuB,EAAAA,GAAAA,GAAkB6zB,EAAAA,GAA0BvF,GAAmC,IAC/EtuB,EAAAA,GAAAA,GAAkB8zB,EAAAA,EAAezC,GAA2B,IAC5DrxB,EAAAA,GAAAA,GAAkBorB,EAAAA,EAAmBiD,GAA4B,IACjEruB,EAAAA,GAAAA,GAAkB+zB,EAAAA,EAAgB/O,GAAyB,IAC3DhlB,EAAAA,GAAAA,GAAkBg0B,GAAAA,EAAqBnP,GAA8B,IACrE7kB,EAAAA,GAAAA,GAAkBsI,EAAAA,GAAsB8d,GAA+B,IACvEpmB,EAAAA,GAAAA,GAAkBsN,GAAAA,GAAgB2mB,GAAAA,EAAe,IACjDj0B,EAAAA,GAAAA,GAAkB6I,GAAAA,EAAkBspB,GAA2B,IAC/DnyB,EAAAA,GAAAA,GAAkB0I,GAAAA,EAAyBwrB,GAAAA,GAAwB,IACnEl0B,EAAAA,GAAAA,GAAkBqrB,EAAAA,GAAaiH,GAAsB,IACrDtyB,EAAAA,GAAAA,GAAkB4I,EAAAA,EAAeurB,GAAAA,EAAc,IAC/Cn0B,EAAAA,GAAAA,GAAkBo0B,GAAAA,EAA2BC,GAAAA,EAA0B,IACvEr0B,EAAAA,GAAAA,GAAkBF,EAAAA,GAAoBw0B,GAAAA,GAAmB,IACzDt0B,EAAAA,GAAAA,GAAkBu0B,EAAAA,GAAkB9P,GAA2B,IAC/DzkB,EAAAA,GAAAA,GAAkB8J,EAAAA,GAAwBqa,GAAiC,IAC3EnkB,EAAAA,GAAAA,GAAkBw0B,GAAAA,GAAiBC,GAAAA,GAAwB,IAC3Dz0B,EAAAA,GAAAA,GAAkB00B,GAAAA,EAAsBC,GAAAA,GAAqB,IAC7D30B,EAAAA,GAAAA,GAAkB40B,EAAAA,GAAkBxF,GAA2B,IAC/DpvB,EAAAA,GAAAA,GAAkB60B,EAAAA,EAAkC7C,GAA2C,IAC/FhyB,EAAAA,GAAAA,GAAkB80B,EAAAA,EAAmB7Q,GAA4B,IACjEjkB,EAAAA,GAAAA,GAAkBuI,GAAAA,EAAuBwsB,GAAAA,EAAsB,IAC/D/0B,EAAAA,GAAAA,GAAkBg1B,GAAAA,GAAcC,GAAAA,GAAa,IAC7Cj1B,EAAAA,GAAAA,GAAkBoI,EAAAA,EAAiB0e,GAA0B,IAC7D9mB,EAAAA,GAAAA,GAAkBqI,EAAAA,EAAoBhH,GAA6B,IACnErB,EAAAA,GAAAA,GAAkBk1B,GAAAA,GAAoBC,GAAAA,GAA6B,IACnEn1B,EAAAA,GAAAA,GAAkBozB,EAAAA,EAAqB5B,GAA8B,IACrExxB,EAAAA,GAAAA,GAAkB0Q,GAAAA,GAAgB0kB,GAAAA,EAAe,IACjDp1B,EAAAA,GAAAA,GAAkB+J,GAAAA,EAAmBsrB,GAAAA,EAAyB,IAC9Dr1B,EAAAA,GAAAA,GAAkB6J,EAAAA,EAAqB8oB,GAA8B,IACrE3yB,EAAAA,GAAAA,GAAkBqzB,GAAAA,GAAciC,GAAAA,EAAa,IAC7Ct1B,EAAAA,GAAAA,GAAkB+K,GAAAA,GAAkBuoB,GAAwB,GAM5D,SAAWpoB,GACP,IAC+DqqB,EADzDC,EAAoB,IAAIC,GAAAA,EAAoBC,GAAAh4B,EAAAA,EAAAA,IACnBi4B,EAAAA,GAAAA,MAAgC,IAA/D,IAAAD,EAAA93B,MAAA23B,EAAAG,EAAA73B,KAAAzC,MAAiE,KAAAw6B,GAAA9I,EAAAA,EAAAA,GAAAyI,EAAAz6B,MAAA,GAArD6H,EAAEizB,EAAA,GAAElsB,EAAUksB,EAAA,GACtBJ,EAAkBv3B,IAAI0E,EAAI+G,EAC9B,CAAC,OAAA3L,GAAA23B,EAAAz6B,EAAA8C,EAAA,SAAA23B,EAAA13B,GAAA,CACD,IAAMwC,EAAuB,IAAIq1B,GAAAA,EAAqBL,GAAmB,GACzEA,EAAkBv3B,IAAIkK,EAAAA,GAAuB3H,GAa7C0K,EAAmBI,IAZnB,SAAawqB,GACT,IAAMn8B,EAAI67B,EAAkBlqB,IAAIwqB,GAChC,IAAKn8B,EACD,MAAM,IAAImJ,MAAM,mBAAqBgzB,GAEzC,OAAIn8B,aAAao8B,GAAAA,EACNv1B,EAAqB6mB,gBAAe,SAAChb,GAAQ,OAAKA,EAASf,IAAIwqB,EAAU,IAGzEn8B,CAEf,EAEA,IAAIq8B,GAAc,EACZC,EAAkB,IAAIjS,EAAAA,GAoC5B9Y,EAAmBC,WAnCnB,SAAoB4e,GAChB,GAAIiM,EACA,OAAOx1B,EAEXw1B,GAAc,EACd,IAC+DE,EAD/DC,GAAAz4B,EAAAA,EAAAA,IAC+Bi4B,EAAAA,GAAAA,MAAgC,IAA/D,IAAAQ,EAAAv4B,MAAAs4B,EAAAC,EAAAt4B,KAAAzC,MAAiE,KAAAg7B,GAAAtJ,EAAAA,EAAAA,GAAAoJ,EAAAp7B,MAAA,GAArD6H,EAAEyzB,EAAA,GAAE1sB,EAAU0sB,EAAA,GACjBZ,EAAkBlqB,IAAI3I,IACvB6yB,EAAkBv3B,IAAI0E,EAAI+G,EAElC,CAEA,OAAA3L,GAAAo4B,EAAAl7B,EAAA8C,EAAA,SAAAo4B,EAAAn4B,GAAA,CACA,IAAK,IAAM83B,KAAa/L,EACpB,GAAIA,EAAUpV,eAAemhB,GAAY,CACrC,IAAMO,GAAoBC,EAAAA,EAAAA,IAAgBR,GAChCN,EAAkBlqB,IAAI+qB,aACfN,GAAAA,GACbP,EAAkBv3B,IAAIo4B,EAAmBtM,EAAU+L,GAE3D,CAGJ,IACoCS,EAD9BC,GAAiBC,EAAAA,GAAAA,KAAoBC,GAAAh5B,EAAAA,EAAAA,GACrB84B,GAAc,IAApC,IAAAE,EAAA94B,MAAA24B,EAAAG,EAAA74B,KAAAzC,MAAsC,KAA3Bu7B,EAAOJ,EAAAz7B,MACd,IACI0F,EAAqB8I,eAAeqtB,EACxC,CACA,MAAO54B,IACH64B,EAAAA,GAAAA,IAAkB74B,EACtB,CACJ,CAAC,OAAAA,GAAA24B,EAAAz7B,EAAA8C,EAAA,SAAA24B,EAAA14B,GAAA,CAED,OADAi4B,EAAgBluB,OACTvH,CACX,EAgBA0K,EAAmB8P,aAXnB,SAAsBD,GAClB,GAAIib,EACA,OAAOjb,IAEX,IAAME,EAAa,IAAIhX,EAAAA,GACjBoH,EAAW4P,EAAW9W,IAAI8xB,EAAgB/O,OAAM,WAClD7b,EAASnD,UACT+S,EAAW9W,IAAI4W,IACnB,KACA,OAAOE,CACX,CAEH,CAzED,CAyEG/P,KAAuBA,GAAqB,CAAC,G,oVChwBnC2rB,EAAK,CACdC,KAAM,KACNC,SAAS,EACTjqB,MAAO,CACH,CAAE0K,MAAO,GAAIwf,WAAY,SAAUC,WAAY,UAC/C,CAAEzf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,WAAY0f,UAAW,UAChC,CAAE1f,MAAO,SAAU0f,UAAW,QAC9B,CAAE1f,MAAO,WAAYwf,WAAY,UACjC,CAAExf,MAAO,sBAAuBwf,WAAY,UAC5C,CAAExf,MAAO,WAAYwf,WAAY,UACjC,CAAExf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,SAAUwf,WAAY,UAC/B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,SAAUwf,WAAY,UAC/B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,OAAQwf,WAAY,UAC7B,CAAExf,MAAO,YAAawf,WAAY,UAClC,CAAExf,MAAO,iBAAkBwf,WAAY,UACvC,CAAExf,MAAO,gBAAiBwf,WAAY,UACtC,CAAExf,MAAO,MAAOwf,WAAY,UAC5B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,gBAAiBwf,WAAY,UACtC,CAAExf,MAAO,YAAawf,WAAY,UAClC,CAAExf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,uBAAwBwf,WAAY,UAC7C,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,cAAewf,WAAY,UACpC,CAAExf,MAAO,cAAe0f,UAAW,QACnC,CAAE1f,MAAO,MAAOwf,WAAY,UAC5B,CAAExf,MAAO,kBAAmBwf,WAAY,UACxC,CAAExf,MAAO,oBAAqBwf,WAAY,UAC1C,CAAExf,MAAO,iBAAkBwf,WAAY,UACvC,CAAExf,MAAO,kBAAmBwf,WAAY,UACxC,CAAExf,MAAO,yBAA0Bwf,WAAY,UAC/C,CAAExf,MAAO,uBAAwBwf,WAAY,UAC7C,CAAExf,MAAO,uBAAwBwf,WAAY,UAC7C,CAAExf,MAAO,sBAAuBwf,WAAY,UAC5C,CAAExf,MAAO,SAAUwf,WAAY,UAC/B,CAAExf,MAAO,cAAewf,WAAY,UACpC,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,cAAewf,WAAY,UACpC,CAAExf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,oBAAqBwf,WAAY,UAC1C,CAAExf,MAAO,gBAAiBwf,WAAY,UACtC,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,iBAAkBwf,WAAY,UACvC,CAAExf,MAAO,iBAAkBwf,WAAY,WAE3CG,QAAMC,EAAA,IAAAC,EAAAA,EAAAA,GAAAD,EACDE,EAAAA,IAAmB,YAASD,EAAAA,EAAAA,GAAAD,EAC5BG,EAAAA,IAAmB,YAASF,EAAAA,EAAAA,GAAAD,EAC5BI,EAAAA,IAA0B,YAASH,EAAAA,EAAAA,GAAAD,EACnCK,EAAAA,GAAqB,YAASJ,EAAAA,EAAAA,GAAAD,EAC9BM,EAAAA,GAA2B,YAASL,EAAAA,EAAAA,GAAAD,EACpCO,EAAAA,IAA2B,aAAWP,IAKlCQ,EAAU,CACnBd,KAAM,UACNC,SAAS,EACTjqB,MAAO,CACH,CAAE0K,MAAO,GAAIwf,WAAY,SAAUC,WAAY,UAC/C,CAAEzf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,WAAY0f,UAAW,UAChC,CAAE1f,MAAO,SAAU0f,UAAW,QAC9B,CAAE1f,MAAO,WAAYwf,WAAY,UACjC,CAAExf,MAAO,sBAAuBwf,WAAY,UAC5C,CAAExf,MAAO,qBAAsBwf,WAAY,UAC3C,CAAExf,MAAO,WAAYwf,WAAY,UACjC,CAAExf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,SAAUwf,WAAY,UAC/B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,SAAUwf,WAAY,UAC/B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,OAAQwf,WAAY,UAC7B,CAAExf,MAAO,YAAawf,WAAY,UAClC,CAAExf,MAAO,iBAAkBwf,WAAY,UACvC,CAAExf,MAAO,gBAAiBwf,WAAY,UACtC,CAAExf,MAAO,MAAOwf,WAAY,UAC5B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,gBAAiBwf,WAAY,UACtC,CAAExf,MAAO,YAAawf,WAAY,UAClC,CAAExf,MAAO,WAAYwf,WAAY,UACjC,CAAExf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,uBAAwBwf,WAAY,UAC7C,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,cAAewf,WAAY,UACpC,CAAExf,MAAO,cAAe0f,UAAW,QACnC,CAAE1f,MAAO,MAAOwf,WAAY,UAC5B,CAAExf,MAAO,kBAAmBwf,WAAY,UACxC,CAAExf,MAAO,oBAAqBwf,WAAY,UAC1C,CAAExf,MAAO,iBAAkBwf,WAAY,UACvC,CAAExf,MAAO,kBAAmBwf,WAAY,UACxC,CAAExf,MAAO,6BAA8Bwf,WAAY,UACnD,CAAExf,MAAO,2BAA4Bwf,WAAY,UACjD,CAAExf,MAAO,0BAA2Bwf,WAAY,UAChD,CAAExf,MAAO,SAAUwf,WAAY,UAC/B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,oBAAqBwf,WAAY,UAC1C,CAAExf,MAAO,gBAAiBwf,WAAY,UACtC,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,iBAAkBwf,WAAY,UACvC,CAAExf,MAAO,iBAAkBwf,WAAY,WAE3CG,QAAMU,EAAA,IAAAR,EAAAA,EAAAA,GAAAQ,EACDP,EAAAA,IAAmB,YAASD,EAAAA,EAAAA,GAAAQ,EAC5BN,EAAAA,IAAmB,YAASF,EAAAA,EAAAA,GAAAQ,EAC5BL,EAAAA,IAA0B,YAASH,EAAAA,EAAAA,GAAAQ,EACnCJ,EAAAA,GAAqB,YAASJ,EAAAA,EAAAA,GAAAQ,EAC9BH,EAAAA,GAA2B,YAASL,EAAAA,EAAAA,GAAAQ,EACpCF,EAAAA,IAA2B,aAAWE,IAKlCC,EAAW,CACpBhB,KAAM,WACNC,SAAS,EACTjqB,MAAO,CACH,CAAE0K,MAAO,GAAIwf,WAAY,SAAUC,WAAY,UAC/C,CAAEzf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,WAAY0f,UAAW,UAChC,CAAE1f,MAAO,SAAU0f,UAAW,QAC9B,CAAE1f,MAAO,WAAYwf,WAAY,UACjC,CAAExf,MAAO,qBAAsBwf,WAAY,UAC3C,CAAExf,MAAO,WAAYwf,WAAY,UACjC,CAAExf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,SAAUwf,WAAY,UAC/B,CAAExf,MAAO,SAAUwf,WAAY,UAC/B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,OAAQwf,WAAY,UAC7B,CAAExf,MAAO,YAAawf,WAAY,UAClC,CAAExf,MAAO,iBAAkBwf,WAAY,UACvC,CAAExf,MAAO,MAAOwf,WAAY,UAC5B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,gBAAiBwf,WAAY,UACtC,CAAExf,MAAO,OAAQwf,WAAY,UAC7B,CAAExf,MAAO,WAAYwf,WAAY,UACjC,CAAExf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,uBAAwBwf,WAAY,UAC7C,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,cAAewf,WAAY,UACpC,CAAExf,MAAO,cAAe0f,UAAW,QACnC,CAAE1f,MAAO,MAAOwf,WAAY,UAC5B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,iBAAkBwf,WAAY,UACvC,CAAExf,MAAO,kBAAmBwf,WAAY,UACxC,CAAExf,MAAO,SAAUwf,WAAY,UAC/B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,iBAAkBwf,WAAY,UACvC,CAAExf,MAAO,iBAAkBwf,WAAY,WAE3CG,QAAMY,EAAA,IAAAV,EAAAA,EAAAA,GAAAU,EACDT,EAAAA,IAAmB,YAASD,EAAAA,EAAAA,GAAAU,EAC5BR,EAAAA,IAAmB,YAASF,EAAAA,EAAAA,GAAAU,EAC5BN,EAAAA,GAAqB,YAASJ,EAAAA,EAAAA,GAAAU,EAC9BL,EAAAA,GAA2B,WAASK,IAKhCC,EAAW,CACpBlB,KAAM,WACNC,SAAS,EACTjqB,MAAO,CACH,CAAE0K,MAAO,GAAIwf,WAAY,SAAUC,WAAY,UAC/C,CAAEzf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,WAAY0f,UAAW,UAChC,CAAE1f,MAAO,SAAU0f,UAAW,QAC9B,CAAE1f,MAAO,WAAYwf,WAAY,UACjC,CAAExf,MAAO,sBAAuBwf,WAAY,UAC5C,CAAExf,MAAO,WAAYwf,WAAY,UACjC,CAAExf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,SAAUwf,WAAY,UAC/B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,SAAUwf,WAAY,UAC/B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,OAAQwf,WAAY,UAC7B,CAAExf,MAAO,YAAawf,WAAY,UAClC,CAAExf,MAAO,iBAAkBwf,WAAY,UACvC,CAAExf,MAAO,MAAOwf,WAAY,UAC5B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,gBAAiBwf,WAAY,UACtC,CAAExf,MAAO,YAAawf,WAAY,UAClC,CAAExf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,uBAAwBwf,WAAY,UAC7C,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,cAAewf,WAAY,UACpC,CAAExf,MAAO,cAAe0f,UAAW,QACnC,CAAE1f,MAAO,MAAOwf,WAAY,UAC5B,CAAExf,MAAO,kBAAmBwf,WAAY,UACxC,CAAExf,MAAO,oBAAqBwf,WAAY,UAC1C,CAAExf,MAAO,iBAAkBwf,WAAY,UACvC,CAAExf,MAAO,kBAAmBwf,WAAY,UACxC,CAAExf,MAAO,SAAUwf,WAAY,UAC/B,CAAExf,MAAO,aAAcwf,WAAY,UACnC,CAAExf,MAAO,UAAWwf,WAAY,UAChC,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,eAAgBwf,WAAY,UACrC,CAAExf,MAAO,iBAAkBwf,WAAY,UACvC,CAAExf,MAAO,iBAAkBwf,WAAY,WAE3CG,QAAMc,EAAA,IAAAZ,EAAAA,EAAAA,GAAAY,EACDX,EAAAA,IAAmB,YAASD,EAAAA,EAAAA,GAAAY,EAC5BV,EAAAA,IAAmB,YAASF,EAAAA,EAAAA,GAAAY,EAC5BR,EAAAA,GAAqB,YAASJ,EAAAA,EAAAA,GAAAY,EAC9BP,EAAAA,GAA2B,WAASO,I,sDC/MhCC,EAAsB,KACtBC,EAAqB,UACrBC,EAAsB,WACtBC,EAAsB,WAC7BC,EAAgBC,EAAAA,EAASC,GAAGC,EAAAA,IAAWC,mBACvCC,EAAkBJ,EAAAA,EAASC,GAAGI,EAAAA,GAAkBC,qBAChDC,EAAe,WACjB,SAAAA,EAAY9hB,EAAM+hB,IAAqBh9B,EAAAA,EAAAA,GAAA,KAAA+8B,GACnC37B,KAAK67B,sBAAuB,EAC5B77B,KAAKiT,UAAY2oB,EACjB,IAAMjC,EAAOiC,EAAoBjC,KAC7B9f,EAAKtd,OAAS,GACVu/B,EAAejiB,GACf7Z,KAAKwF,GAAKqU,EAGV7Z,KAAKwF,GAAKm0B,EAAO,IAAM9f,EAE3B7Z,KAAKgT,UAAY6G,IAGjB7Z,KAAKwF,GAAKm0B,EACV35B,KAAKgT,UAAY2mB,GAErB35B,KAAKg6B,OAAS,KACdh6B,KAAK+7B,cAAgBt/B,OAAOoR,OAAO,MACnC7N,KAAKg8B,YAAc,IACvB,CAuGC,OAvGA77B,EAAAA,EAAAA,GAAAw7B,EAAA,EAAAz/B,IAAA,OAAAiS,IACD,WACI,OAAOnO,KAAKiT,UAAU0mB,IAC1B,GAAC,CAAAz9B,IAAA,oBAAAyB,MACD,WACQqC,KAAKiT,UAAU2mB,UACf55B,KAAKg6B,OAAS,KACdh6B,KAAKg8B,YAAc,KAE3B,GAAC,CAAA9/B,IAAA,YAAAyB,MACD,WACI,IAAKqC,KAAKg6B,OAAQ,CACd,IAAMA,EAAS,IAAI/G,IACnB,IAAK,IAAMztB,KAAMxF,KAAKiT,UAAU+mB,OAC5BA,EAAOl5B,IAAI0E,EAAIsa,EAAAA,GAAMC,QAAQ/f,KAAKiT,UAAU+mB,OAAOx0B,KAEvD,GAAIxF,KAAKiT,UAAU2mB,QAAS,CACxB,IAAMqC,EAAWC,EAAgBl8B,KAAKiT,UAAU0mB,MAChD,IAAK,IAAMn0B,KAAMy2B,EAASjC,OACjBA,EAAOmC,IAAI32B,IACZw0B,EAAOl5B,IAAI0E,EAAIsa,EAAAA,GAAMC,QAAQkc,EAASjC,OAAOx0B,IAGzD,CACAxF,KAAKg6B,OAASA,CAClB,CACA,OAAOh6B,KAAKg6B,MAChB,GAAC,CAAA99B,IAAA,WAAAyB,MACD,SAASy+B,EAASC,GACd,IAAMC,EAAQt8B,KAAKu8B,YAAYpuB,IAAIiuB,GACnC,OAAIE,KAGe,IAAfD,EACOr8B,KAAKw8B,WAAWJ,QAD3B,EAIJ,GAAC,CAAAlgC,IAAA,aAAAyB,MACD,SAAWy+B,GACP,IAAIE,EAAQt8B,KAAK+7B,cAAcK,GAC/B,OAAIE,IAGJA,EAAQnB,EAAcsB,oBAAoBL,EAASp8B,MACnDA,KAAK+7B,cAAcK,GAAWE,EACvBA,EACX,GAAC,CAAApgC,IAAA,UAAAyB,MACD,SAAQy+B,GACJ,OAAOp8B,KAAKu8B,YAAYJ,IAAIC,EAChC,GAAC,CAAAlgC,IAAA,OAAAiS,IACD,WACI,OAAQnO,KAAK25B,MACT,KAAKoB,EAAqB,OAAO2B,EAAAA,GAAYC,MAC7C,KAAK1B,EAAqB,OAAOyB,EAAAA,GAAYE,mBAC7C,KAAK1B,EAAqB,OAAOwB,EAAAA,GAAYG,oBAC7C,QAAS,OAAOH,EAAAA,GAAYI,KAEpC,GAAC,CAAA5gC,IAAA,aAAAiS,IACD,WACI,IAAKnO,KAAKg8B,YAAa,CACnB,IAAIrsB,EAAQ,GACRotB,EAAsB,GAC1B,GAAI/8B,KAAKiT,UAAU2mB,QAAS,CACxB,IAAMqC,EAAWC,EAAgBl8B,KAAKiT,UAAU0mB,MAChDhqB,EAAQssB,EAAStsB,MACbssB,EAASc,sBACTA,EAAsBd,EAASc,oBAEvC,CAEA,IAAM3C,EAAmBp6B,KAAKiT,UAAU+mB,OAAO,qBACzCG,EAAmBn6B,KAAKiT,UAAU+mB,OAAO,qBAC/C,GAAII,GAAoBD,EAAkB,CACtC,IAAM1qB,EAAO,CAAE4K,MAAO,IAClB+f,IACA3qB,EAAKoqB,WAAaO,GAElBD,IACA1qB,EAAKqqB,WAAaK,GAEtBxqB,EAAMsL,KAAKxL,EACf,CACAE,EAAQA,EAAM/I,OAAO5G,KAAKiT,UAAUtD,OAChC3P,KAAKiT,UAAU8pB,sBACfA,EAAsB/8B,KAAKiT,UAAU8pB,qBAEzC/8B,KAAKg8B,YAAcgB,EAAAA,GAAWC,wBAAwBttB,EAAOotB,EACjE,CACA,OAAO/8B,KAAKg8B,WAChB,GAAC,CAAA9/B,IAAA,wBAAAyB,MACD,SAAsBorB,EAAMmU,EAAWC,GAEnC,IACMhe,EADQnf,KAAK8e,WAAWse,OAAO,CAACrU,GAAMniB,OAAOs2B,GAAWG,KAAK,MAC5Cle,SACjB0a,EAAayD,EAAAA,EAAcC,cAAcpe,GACzC4a,EAAYuD,EAAAA,EAAcE,aAAare,GAC7C,MAAO,CACH0a,WAAYA,EACZ4D,OAAQ7zB,QAAoB,EAAZmwB,GAChB2D,KAAM9zB,QAAoB,EAAZmwB,GACd4D,UAAW/zB,QAAoB,EAAZmwB,GACnB6D,cAAeh0B,QAAoB,EAAZmwB,GAE/B,KAAC4B,CAAA,CA5HgB,GA8HrB,SAASG,EAAe9oB,GACpB,OAAQA,IAAc+nB,GACf/nB,IAAcgoB,GACdhoB,IAAcioB,GACdjoB,IAAckoB,CACzB,CACA,SAASgB,EAAgB2B,GACrB,OAAQA,GACJ,KAAK9C,EACD,OAAOrB,EACX,KAAKsB,EACD,OAAOP,EACX,KAAKQ,EACD,OAAON,EACX,KAAKO,EACD,OAAOL,EAEnB,CACA,SAASiD,EAAgBD,GACrB,IAAM5qB,EAAYipB,EAAgB2B,GAClC,OAAO,IAAIlC,EAAgBkC,EAAc5qB,EAC7C,CACO,IAAM8jB,EAAsB,SAAA5I,IAAA7vB,EAAAA,EAAAA,GAAAy4B,EAAA5I,GAAA,IAAA5vB,GAAAC,EAAAA,EAAAA,GAAAu4B,GAC/B,SAAAA,IAAc,IAAAp4B,GAAAC,EAAAA,EAAAA,GAAA,KAAAm4B,IACVp4B,EAAAJ,EAAAM,KAAA,OACKk/B,oBAAsBp/B,EAAKqL,UAAU,IAAI6c,EAAAA,IAC9CloB,EAAKq/B,sBAAwBr/B,EAAKo/B,oBAAoBhU,MACtDprB,EAAKs/B,0BAA4Bt/B,EAAKqL,UAAU,IAAI6c,EAAAA,IACpDloB,EAAKu/B,4BAA8Bv/B,EAAKs/B,0BAA0BlU,MAClEprB,EAAKw/B,aAAe1hC,OAAOoR,OAAO,MAClClP,EAAKy/B,yBAA2B,IAAIC,EAAAA,EACpC1/B,EAAK2/B,yBAA0B,EAC/B3/B,EAAK4/B,aAAe,IAAItL,IACxBt0B,EAAK4/B,aAAaz9B,IAAIi6B,EAAqB+C,EAAgB/C,IAC3Dp8B,EAAK4/B,aAAaz9B,IAAIk6B,EAAoB8C,EAAgB9C,IAC1Dr8B,EAAK4/B,aAAaz9B,IAAIm6B,EAAqB6C,EAAgB7C,IAC3Dt8B,EAAK4/B,aAAaz9B,IAAIo6B,EAAqB4C,EAAgB5C,IAC3D,IAAMsD,GAAkBC,EAAAA,EAAAA,IAAkBj/B,EAAAA,EAAAA,GAAAb,IAevC,OAdHA,EAAK+/B,YAAcF,EAAgBG,SACnChgC,EAAKigC,UAAY,GACjBjgC,EAAKkgC,QAAU,GAAHj4B,OAAMjI,EAAK+/B,YAAW,MAAA93B,OAAKjI,EAAKigC,WAC5CjgC,EAAKmgC,oBAAsB,KAC3BngC,EAAKogC,eAAiB,GACtBpgC,EAAKqgC,kBAAoB,KACzBrgC,EAAK8K,SAASsxB,GACdp8B,EAAKsgC,qBACLT,EAAgBU,aAAY,WACxBvgC,EAAK+/B,YAAcF,EAAgBG,SACnChgC,EAAKwgC,YACT,KACAC,EAAAA,EAAAA,IAA4B,2BAA2B,WACnDzgC,EAAKsgC,oBACT,IAAGtgC,CACP,CA2IC,OA3IAwB,EAAAA,EAAAA,GAAA42B,EAAA,EAAA76B,IAAA,0BAAAyB,MACD,SAAwB6T,GACpB,OAAI0U,EAAImZ,cAAc7tB,GACXxR,KAAKs/B,4BAA4B9tB,GAErCxR,KAAKu/B,iCAChB,GAAC,CAAArjC,IAAA,kCAAAyB,MACD,WAAkC,IAAA4H,EAAA,KAQ9B,OAPKvF,KAAK8+B,sBACN9+B,KAAK8+B,oBAAsB5Y,EAAIsZ,sBAAiBl1B,GAAW,SAAAm1B,GACvDA,EAAMC,UAAY,gBAClBD,EAAME,YAAcp6B,EAAKs5B,OAC7B,IACA7+B,KAAK++B,eAAe9jB,KAAKjb,KAAK8+B,sBAE3Bl5B,EAAAA,GAAWC,IACtB,GAAC,CAAA3J,IAAA,8BAAAyB,MACD,SAA4B6T,GAAS,IAAApI,EAAA,KAC3Bw2B,EAAe1Z,EAAIsZ,iBAAiBhuB,GAAS,SAAAiuB,GAC/CA,EAAMC,UAAY,gBAClBD,EAAME,YAAcv2B,EAAKy1B,OAC7B,IAEA,OADA7+B,KAAK++B,eAAe9jB,KAAK2kB,GAClB,CACH70B,QAAS,WACL,IAAK,IAAIlO,EAAI,EAAGA,EAAIuM,EAAK21B,eAAexiC,OAAQM,IAC5C,GAAIuM,EAAK21B,eAAeliC,KAAO+iC,EAE3B,YADAx2B,EAAK21B,eAAezT,OAAOzuB,EAAG,EAI1C,EAER,GAAC,CAAAX,IAAA,cAAAyB,MACD,SAAYqV,EAAWC,GACnB,IAAK,iBAAiBgG,KAAKjG,GACvB,MAAM,IAAIrN,MAAM,uBAEpB,IAAKm2B,EAAe7oB,EAAU0mB,QAAUmC,EAAe9oB,GACnD,MAAM,IAAIrN,MAAM,uBAGpB3F,KAAKu+B,aAAaz9B,IAAIkS,EAAW,IAAI2oB,EAAgB3oB,EAAWC,IAC5D6oB,EAAe9oB,IACfhT,KAAKu+B,aAAa5S,SAAQ,SAAAniB,GAClBA,EAAMmwB,OAAS3mB,GACfxJ,EAAMq2B,mBAEd,IAEA7/B,KAAK8/B,OAAO9sB,YAAcA,GAC1BhT,KAAKyJ,SAASuJ,EAEtB,GAAC,CAAA9W,IAAA,gBAAAyB,MACD,WACI,OAAOqC,KAAK8/B,MAChB,GAAC,CAAA5jC,IAAA,sBAAAyB,MACD,SAAoBoiC,GAChB//B,KAAKg/B,kBAAoBe,EACzB//B,KAAKggC,wBACT,GAAC,CAAA9jC,IAAA,WAAAyB,MACD,SAASqV,GACL,IAAIxJ,EAEAA,EADAxJ,KAAKu+B,aAAapC,IAAInpB,GACdhT,KAAKu+B,aAAapwB,IAAI6E,GAGtBhT,KAAKu+B,aAAapwB,IAAI4sB,GAElC/6B,KAAKigC,mBAAmBz2B,EAC5B,GAAC,CAAAtN,IAAA,qBAAAyB,MACD,SAAmBuiC,GACVA,GAAgBlgC,KAAK8/B,SAAWI,IAIrClgC,KAAK8/B,OAASI,EACdlgC,KAAKggC,yBACT,GAAC,CAAA9jC,IAAA,qBAAAyB,MACD,WACI,GAAIqC,KAAKs+B,wBAAyB,CAC9B,IAGQ6B,EAHFC,EAAoBja,OAAOka,WAAW,2BAA2B1nB,QACvE,GAAIynB,KAAsBE,EAAAA,EAAAA,IAAetgC,KAAK8/B,OAAO/W,MAI7CoX,GADAI,EAAAA,EAAAA,IAAOvgC,KAAK8/B,OAAO/W,MACJqX,EAAoBnF,EAAsBD,EAG1CoF,EAAoBlF,EAAsBH,EAE7D/6B,KAAKigC,mBAAmBjgC,KAAKu+B,aAAapwB,IAAIgyB,GAEtD,CACJ,GAAC,CAAAjkC,IAAA,4BAAAyB,MACD,SAA0B+L,GACtB1J,KAAKs+B,wBAA0B50B,EAC/B1J,KAAKi/B,oBACT,GAAC,CAAA/iC,IAAA,yBAAAyB,MACD,WAAyB,IAAAsO,EAAA,KACfu0B,EAAW,GACXC,EAAU,CAAC,EACXC,EAAgB,CAClBC,QAAS,SAAClxB,GACDgxB,EAAQhxB,KACT+wB,EAASvlB,KAAKxL,GACdgxB,EAAQhxB,IAAQ,EAExB,GAEJ+rB,EAAgBoF,yBAAyBjV,SAAQ,SAAAkV,GAAC,OAAIA,EAAE50B,EAAK6zB,OAAQY,EAAez0B,EAAKkyB,aAAa,IACtG,IAC4C/9B,EADtC0gC,EAAiB,GAAGxgC,GAAAC,EAAAA,EAAAA,GACP46B,EAAcoB,aAAW,IAA5C,IAAAj8B,EAAAG,MAAAL,EAAAE,EAAAI,KAAAzC,MAA8C,KAAnCivB,EAAI9sB,EAAAzC,MACL2+B,EAAQt8B,KAAK8/B,OAAOiB,SAAS7T,EAAK1nB,IAAI,GACxC82B,GACAwE,EAAe7lB,KAAK,GAADrU,QAAIo6B,EAAAA,EAAAA,KAAkB9T,EAAK1nB,IAAG,MAAAoB,OAAK01B,EAAM76B,WAAU,KAE9E,CAAC,OAAAb,GAAAN,EAAAxC,EAAA8C,EAAA,SAAAN,EAAAO,GAAA,CACD6/B,EAAcC,QAAQ,yCAAD/5B,OAA0Ck6B,EAAezD,KAAK,MAAK,OACxF,IAAMzd,EAAW5f,KAAKg/B,mBAAqBh/B,KAAK8/B,OAAOhhB,WAAWmiB,cAClEP,EAAcC,SAAQO,EAAAA,EAAAA,IAA6BthB,IACnD5f,KAAK4+B,UAAY4B,EAASnD,KAAK,MAC/Br9B,KAAKm/B,aACLgC,EAAAA,GAAqBxhB,YAAYC,GACjC5f,KAAK+9B,oBAAoBnzB,KAAK5K,KAAK8/B,OACvC,GAAC,CAAA5jC,IAAA,aAAAyB,MACD,WAAa,IAAAsP,EAAA,KACTjN,KAAK6+B,QAAU,GAAHj4B,OAAM5G,KAAK0+B,YAAW,MAAA93B,OAAK5G,KAAK4+B,WAC5C5+B,KAAK++B,eAAepT,SAAQ,SAAAiU,GAAY,OAAIA,EAAaD,YAAc1yB,EAAK4xB,OAAO,GACvF,GAAC,CAAA3iC,IAAA,mBAAAyB,MACD,WACI,MAAO,CACHyjC,cAAc,EACdC,gBAAgB,EAChBC,qBAAqB,EAE7B,GAAC,CAAAplC,IAAA,sBAAAyB,MACD,WACI,OAAOqC,KAAKo+B,wBAChB,KAACrH,CAAA,CA1K8B,CAASnxB,EAAAA,G,sICnKtC27B,EAAkB,SAAAC,IAAAljC,EAAAA,EAAAA,GAAAijC,EAAAC,GAAA,IAAAjjC,GAAAC,EAAAA,EAAAA,GAAA+iC,GACpB,SAAAA,IAAc,IAAA5iC,EAOqB,OAPrBC,EAAAA,EAAAA,GAAA,KAAA2iC,IACV5iC,EAAAJ,EAAAM,KAAA,KAAM,CACF2G,GAAI,mCACJC,MAAOg8B,EAAAA,GAAsBC,mBAC7BC,MAAO,6BACP77B,kBAAcwE,KAEbs3B,mBAAqB,KAAKjjC,CACnC,CAaC,OAbAwB,EAAAA,EAAAA,GAAAohC,EAAA,EAAArlC,IAAA,MAAAyB,MACD,SAAIuR,EAAUlO,GACV,IAAM6e,EAAyB3Q,EAASf,IAAI5C,EAAAA,GACtCs2B,EAAehiB,EAAuBd,iBACxCuhB,EAAAA,EAAAA,IAAeuB,EAAa9Y,OAE5BlJ,EAAuBpW,SAASzJ,KAAK4hC,sBAAuBrB,EAAAA,EAAAA,IAAOsB,EAAa9Y,MAAQiS,EAAAA,GAAqBD,EAAAA,KAC7G/6B,KAAK4hC,mBAAqB,OAG1B/hB,EAAuBpW,UAAS82B,EAAAA,EAAAA,IAAOsB,EAAa9Y,MAAQkS,EAAAA,GAAsBC,EAAAA,IAClFl7B,KAAK4hC,mBAAqBC,EAAa7uB,UAE/C,KAACuuB,CAAA,CAtBmB,CAASO,EAAAA,KAwBjCC,EAAAA,EAAAA,IAAqBR,E,wBC1Bd,SAASS,EAAcC,GAC1B,OAJG,SAA0BA,GAC7B,OAAQv7B,MAAMmB,QAAQo6B,EAC1B,CAEYC,CAAiBD,EAC7B,CACO,SAASE,EAASF,GACrB,MAAwB,kBAATA,CACnB,CACO,SAASG,EAAUH,GACtB,OAAQE,EAASF,EACrB,CAKO,SAASI,EAAM5hC,GAClB,OAAQA,CACZ,CAIO,SAAS6hC,EAAQ5qB,EAAOC,GAC3B,OAAQD,EAAMS,YAAcR,EAAMA,EAAIV,cAAgBU,CAC1D,CAIO,SAAS4qB,EAAS9hC,GACrB,OAAOA,EAAEmX,QAAQ,YAAa,IAClC,CAKO,SAASgD,EAAIlD,EAAO8qB,GACvB39B,QAAQ+V,IAAI,GAADhU,OAAI8Q,EAAMzN,WAAU,MAAArD,OAAK47B,GACxC,CAEO,SAASC,EAAY/qB,EAAO8qB,GAC/B,OAAO,IAAI78B,MAAM,GAADiB,OAAI8Q,EAAMzN,WAAU,MAAArD,OAAK47B,GAC7C,CAWO,SAASE,EAAkBhrB,EAAOC,EAAKnS,EAAImT,EAASrG,GACvD,IACIqwB,EAAe,KACnB,OAAOhrB,EAAIC,QAFA,4CAEY,SAAUgrB,EAAM7qB,EAAK8qB,EAAQ3rB,EAAMxW,EAAGD,EAAGqX,EAAMgrB,EAAK1b,GACvE,OAAKib,EAAMQ,GAGNR,EAAMnrB,IAGNmrB,EAAM3hC,IAAMA,EAAIiY,EAAQpc,OAClB+lC,EAAQ5qB,EAAOiB,EAAQjY,KAE7B2hC,EAAMvqB,IAASJ,GAAkC,kBAAjBA,EAAMI,GAChCJ,EAAMI,IAEI,OAAjB6qB,IACAA,EAAerwB,EAAMsH,MAAM,MACdK,QAAQ3H,IAEpB+vB,EAAM5hC,IAAMA,EAAIkiC,EAAapmC,OACvB+lC,EAAQ5qB,EAAOirB,EAAaliC,IAEhC,IAfI6hC,EAAQ5qB,EAAOlS,GAHf,GAmBf,GACJ,CAIO,SAASu9B,EAAUrrB,EAAOsrB,GAE7B,IADA,IAAI1wB,EAAQ0wB,EACL1wB,GAASA,EAAM/V,OAAS,GAAG,CAC9B,IAAMoT,EAAQ+H,EAAM+E,UAAUnK,GAC9B,GAAI3C,EACA,OAAOA,EAEX,IAAMszB,EAAM3wB,EAAM4wB,YAAY,KAE1B5wB,EADA2wB,EAAM,EACE,KAGA3wB,EAAMmI,OAAO,EAAGwoB,EAEhC,CACA,OAAO,IACX,CAMO,SAASE,EAAYzrB,EAAOsrB,GAE/B,IADA,IAAI1wB,EAAQ0wB,EACL1wB,GAASA,EAAM/V,OAAS,GAAG,CAE9B,GADcmb,EAAMqF,WAAWzK,GAE3B,OAAO,EAEX,IAAM2wB,EAAM3wB,EAAM4wB,YAAY,KAE1B5wB,EADA2wB,EAAM,EACE,KAGA3wB,EAAMmI,OAAO,EAAGwoB,EAEhC,CACA,OAAO,CACX,C,wZCvHIlnC,EAA0C,SAAUC,EAAYC,EAAQC,EAAKC,GAC7E,IAA2HC,EAAvHC,EAAIC,UAAUC,OAAQC,EAAIH,EAAI,EAAIJ,EAAkB,OAATE,EAAgBA,EAAOM,OAAOC,yBAAyBT,EAAQC,GAAOC,EACrH,GAAuB,kBAAZQ,SAAoD,oBAArBA,QAAQC,SAAyBJ,EAAIG,QAAQC,SAASZ,EAAYC,EAAQC,EAAKC,QACpH,IAAK,IAAIU,EAAIb,EAAWO,OAAS,EAAGM,GAAK,EAAGA,KAAST,EAAIJ,EAAWa,MAAIL,GAAKH,EAAI,EAAID,EAAEI,GAAKH,EAAI,EAAID,EAAEH,EAAQC,EAAKM,GAAKJ,EAAEH,EAAQC,KAASM,GAChJ,OAAOH,EAAI,GAAKG,GAAKC,OAAOK,eAAeb,EAAQC,EAAKM,GAAIA,CAChE,EACIO,EAAoC,SAAUC,EAAYC,GAC1D,OAAO,SAAUhB,EAAQC,GAAOe,EAAUhB,EAAQC,EAAKc,EAAa,CACxE,EASMomC,EAA0B,WAI5B,SAAAA,EAAYC,IAAezkC,EAAAA,EAAAA,GAAA,KAAAwkC,GACvBpjC,KAAKsjC,eAAiBD,EACtBrjC,KAAKujC,SAAW9mC,OAAOoR,OAAO,KAClC,CAJC,OAIA1N,EAAAA,EAAAA,GAAAijC,EAAA,EAAAlnC,IAAA,SAAAyB,MACD,SAAOyG,EAAQkO,GACX,GAAe,OAAXlO,GAAmBA,EAAOo/B,OAASxjC,KAAKsjC,eAExC,OAAO,IAAIG,EAAoBr/B,EAAQkO,GAE3C,IAAIoxB,EAAiBD,EAAoBE,kBAAkBv/B,GACvDs/B,EAAennC,OAAS,IACxBmnC,GAAkB,KAEtBA,GAAkBpxB,EAClB,IAAItU,EAASgC,KAAKujC,SAASG,GAC3B,OAAI1lC,IAGJA,EAAS,IAAIylC,EAAoBr/B,EAAQkO,GACzCtS,KAAKujC,SAASG,GAAkB1lC,EACzBA,EACX,IAAC,EAAA9B,IAAA,SAAAyB,MAxBD,SAAcyG,EAAQkO,GAClB,OAAOtS,KAAK4jC,UAAU/1B,OAAOzJ,EAAQkO,EACzC,KAAC8wB,CAAA,CAH2B,GA2BhCA,EAA2BQ,UAAY,IAAIR,EA/BjB,GA+B+D,IACnFK,EAAmB,WACrB,SAAAA,EAAYr/B,EAAQkO,IAAO1T,EAAAA,EAAAA,GAAA,KAAA6kC,GACvBzjC,KAAKoE,OAASA,EACdpE,KAAKsS,MAAQA,EACbtS,KAAKwjC,OAASxjC,KAAKoE,OAASpE,KAAKoE,OAAOo/B,MAAQ,GAAK,CACzD,CA2BC,OA3BArjC,EAAAA,EAAAA,GAAAsjC,EAAA,EAAAvnC,IAAA,SAAAyB,MA4BD,SAAOkmC,GACH,OAAOJ,EAAoBK,QAAQ9jC,KAAM6jC,EAC7C,GAAC,CAAA3nC,IAAA,OAAAyB,MACD,SAAK2U,GACD,OAAO8wB,EAA2Bv1B,OAAO7N,KAAMsS,EACnD,GAAC,CAAApW,IAAA,MAAAyB,MACD,WACI,OAAOqC,KAAKoE,MAChB,GAAC,CAAAlI,IAAA,SAAAyB,MACD,WAEI,IADA,IAAIK,EAASgC,KACNhC,EAAOoG,QACVpG,EAASA,EAAOoG,OAEpB,OAAOpG,CACX,GAAC,CAAA9B,IAAA,WAAAyB,MACD,SAAS2U,GACL,OAAO8wB,EAA2Bv1B,OAAO7N,KAAKoE,OAAQkO,EAC1D,IAAC,EAAApW,IAAA,oBAAAyB,MA7CD,SAAyBomC,GAErB,IADA,IAAI/lC,EAAS,GACM,OAAZ+lC,GACC/lC,EAAOzB,OAAS,IAChByB,GAAU,KAEdA,GAAU+lC,EAAQzxB,MAClByxB,EAAUA,EAAQ3/B,OAEtB,OAAOpG,CACX,GAAC,CAAA9B,IAAA,UAAAyB,MACD,SAAeqmC,EAAGC,GACd,KAAa,OAAND,GAAoB,OAANC,GAAY,CAC7B,GAAID,IAAMC,EACN,OAAO,EAEX,GAAID,EAAE1xB,QAAU2xB,EAAE3xB,MACd,OAAO,EAEX0xB,EAAIA,EAAE5/B,OACN6/B,EAAIA,EAAE7/B,MACV,CACA,OAAU,OAAN4/B,GAAoB,OAANC,CAItB,KAACR,CAAA,CAhCoB,GAqDnBS,EAAoB,WACtB,SAAAA,EAAYj6B,EAAYqI,IAAO1T,EAAAA,EAAAA,GAAA,KAAAslC,GAC3BlkC,KAAKiK,WAAaA,EAClBjK,KAAKsS,MAAQA,CACjB,CAYC,OAZAnS,EAAAA,EAAAA,GAAA+jC,EAAA,EAAAhoC,IAAA,SAAAyB,MACD,SAAOkmC,GACH,OAAQ7jC,KAAKiK,aAAe45B,EAAM55B,YAC3BjK,KAAKsS,MAAMtM,OAAO69B,EAAMvxB,MACnC,GAAC,CAAApW,IAAA,QAAAyB,MACD,WAGI,OAFmBqC,KAAKsS,MAAM6xB,UAEXnkC,KAAKsS,MACbtS,KAEJ,IAAIkkC,EAAqBlkC,KAAKiK,WAAYjK,KAAKsS,MAC1D,KAAC4xB,CAAA,CAhBqB,GAqBpBE,EAAuB,WAIzB,SAAAA,EAAYf,IAAezkC,EAAAA,EAAAA,GAAA,KAAAwlC,GACvBpkC,KAAKsjC,eAAiBD,EACtBrjC,KAAKujC,SAAW9mC,OAAOoR,OAAO,KAClC,CAJC,OAIA1N,EAAAA,EAAAA,GAAAikC,EAAA,EAAAloC,IAAA,SAAAyB,MACD,SAAO0mC,EAAOC,GACV,GAA6B,OAAzBA,EAEA,OAAO,IAAIC,EAAiBF,EAAOC,GAEvC,GAAc,OAAVD,GAAkBA,EAAMb,OAASxjC,KAAKsjC,eAEtC,OAAO,IAAIiB,EAAiBF,EAAOC,GAEvC,IAAMZ,EAAiBD,EAAoBE,kBAAkBU,GACzDrmC,EAASgC,KAAKujC,SAASG,GAC3B,OAAI1lC,IAGJA,EAAS,IAAIumC,EAAiBF,EAAO,MACrCrkC,KAAKujC,SAASG,GAAkB1lC,EACzBA,EACX,IAAC,EAAA9B,IAAA,SAAAyB,MAxBD,SAAc0mC,EAAOC,GACjB,OAAOtkC,KAAK4jC,UAAU/1B,OAAOw2B,EAAOC,EACxC,KAACF,CAAA,CAHwB,GA2B7BA,EAAwBR,UAAY,IAAIQ,EArId,GAqIyD,IAC7EG,EAAgB,WAClB,SAAAA,EAAYF,EAAOC,IAAsB1lC,EAAAA,EAAAA,GAAA,KAAA2lC,GACrCvkC,KAAKqkC,MAAQA,EACbrkC,KAAKskC,qBAAuBA,CAChC,CAuBC,OAvBAnkC,EAAAA,EAAAA,GAAAokC,EAAA,EAAAroC,IAAA,QAAAyB,MACD,WAGI,OAFkCqC,KAAKskC,qBAAuBtkC,KAAKskC,qBAAqBH,QAAU,QAEhEnkC,KAAKskC,qBAC5BtkC,KAEJokC,EAAwBv2B,OAAO7N,KAAKqkC,MAAOrkC,KAAKskC,qBAC3D,GAAC,CAAApoC,IAAA,SAAAyB,MACD,SAAOkmC,GACH,OAAMA,aAAiBU,MAGlBvkC,KAAKqkC,MAAMr+B,OAAO69B,EAAMQ,SAGK,OAA9BrkC,KAAKskC,sBAAgE,OAA/BT,EAAMS,sBAGd,OAA9BtkC,KAAKskC,sBAAgE,OAA/BT,EAAMS,sBAGzCtkC,KAAKskC,qBAAqBt+B,OAAO69B,EAAMS,uBAClD,KAACC,CAAA,CA3BiB,GA6BhBC,EAA6B,WAC/B,SAAAA,KAAc5lC,EAAAA,EAAAA,GAAA,KAAA4lC,GACVxkC,KAAKykC,QAAU,GACfzkC,KAAKwe,YAAc,KACnBxe,KAAK0kC,eAAiB,KACtB1kC,KAAK2kC,mBAAqB,IAC9B,CAqCC,OArCAxkC,EAAAA,EAAAA,GAAAqkC,EAAA,EAAAtoC,IAAA,gBAAAyB,MACD,SAAcsM,GACVjK,KAAKwe,YAAcvU,CACvB,GAAC,CAAA/N,IAAA,OAAAyB,MACD,SAAKinC,EAAa7b,GACV/oB,KAAK0kC,iBAAmB3b,GAAQ/oB,KAAK2kC,qBAAuB3kC,KAAKwe,cAGrExe,KAAK0kC,eAAiB3b,EACtB/oB,KAAK2kC,mBAAqB3kC,KAAKwe,YAC/Bxe,KAAKykC,QAAQxpB,KAAK,IAAIlJ,EAAAA,GAAgB6yB,EAAa7b,EAAM/oB,KAAKwe,cAClE,GAAC,CAAAtiB,IAAA,yBAAAyB,MACD,SAAuBknC,EAAsBxyB,EAAQiyB,EAAsBQ,GACvE,IAAMC,EAAmBT,EAAqBr6B,WACxC+6B,EAAoBV,EAAqBhyB,MACzC2yB,EAAoClzB,EAAAA,GAA+B5D,IAAI42B,GAC7E,IAAKE,EAGD,OAFAjlC,KAAKklC,cAAcH,GACnB/kC,KAAKmlC,KAAKL,EAAa,IAChBE,EAEX,IAAMI,EAAeH,EAAkCnzB,SAAS+yB,EAAsBxyB,EAAQ2yB,GAC9F,GAAoB,IAAhBF,EAAmB,KACoB1kC,EADpBE,GAAAC,EAAAA,EAAAA,GACC6kC,EAAavyB,QAAM,IAAvC,IAAAvS,EAAAG,MAAAL,EAAAE,EAAAI,KAAAzC,MAAyC,KAA9Boc,EAAKja,EAAAzC,MACZqC,KAAKykC,QAAQxpB,KAAK,IAAIlJ,EAAAA,GAAgBsI,EAAMyL,OAASgf,EAAazqB,EAAM0O,KAAM1O,EAAMlQ,UACxF,CAAC,OAAAvJ,GAAAN,EAAAxC,EAAA8C,EAAA,SAAAN,EAAAO,GAAA,CACL,MAEIb,KAAKykC,QAAUzkC,KAAKykC,QAAQ79B,OAAOw+B,EAAavyB,QAKpD,OAHA7S,KAAK0kC,eAAiB,KACtB1kC,KAAK2kC,mBAAqB,KAC1B3kC,KAAKwe,YAAc,KACZ4mB,EAAatyB,QACxB,GAAC,CAAA5W,IAAA,WAAAyB,MACD,SAASmV,GACL,OAAO,IAAIf,EAAAA,GAA6B/R,KAAKykC,QAAS3xB,EAC1D,KAAC0xB,CAAA,CA3C8B,GA6C7Ba,EAA4B,WAC9B,SAAAA,EAAYl8B,EAAiBK,IAAO5K,EAAAA,EAAAA,GAAA,KAAAymC,GAChCrlC,KAAK6e,iBAAmB1V,EACxBnJ,KAAK8/B,OAASt2B,EACdxJ,KAAKslC,eAAiB,KACtBtlC,KAAKykC,QAAU,GACfzkC,KAAKulC,mBAAqB,EAC1BvlC,KAAKwlC,mBAAqB,CAC9B,CAqCC,OArCArlC,EAAAA,EAAAA,GAAAklC,EAAA,EAAAnpC,IAAA,gBAAAyB,MACD,SAAcsM,GACVjK,KAAKulC,mBAAqBvlC,KAAK6e,iBAAiBpB,gBAAgBC,iBAAiBzT,EACrF,GAAC,CAAA/N,IAAA,OAAAyB,MACD,SAAKinC,EAAa7b,GACd,IAAM5J,EAA8D,KAAnDnf,KAAK8/B,OAAOlnB,MAAM5Y,KAAKulC,mBAAoBxc,GACxD/oB,KAAKwlC,qBAAuBrmB,IAGhCnf,KAAKwlC,mBAAqBrmB,EAC1Bnf,KAAKykC,QAAQxpB,KAAK2pB,GAClB5kC,KAAKykC,QAAQxpB,KAAKkE,GACtB,GAAC,CAAAjjB,IAAA,yBAAAyB,MA0BD,SAAuBknC,EAAsBxyB,EAAQiyB,EAAsBQ,GACvE,IAAMC,EAAmBT,EAAqBr6B,WACxC+6B,EAAoBV,EAAqBhyB,MACzC2yB,EAAoClzB,EAAAA,GAA+B5D,IAAI42B,GAC7E,IAAKE,EAGD,OAFAjlC,KAAKklC,cAAcH,GACnB/kC,KAAKmlC,KAAKL,EAAa,IAChBE,EAEX,IAAMI,EAAeH,EAAkCrmB,gBAAgBimB,EAAsBxyB,EAAQ2yB,GACrG,GAAoB,IAAhBF,EACA,IAAK,IAAIjoC,EAAI,EAAG8V,EAAMyyB,EAAavyB,OAAOtW,OAAQM,EAAI8V,EAAK9V,GAAK,EAC5DuoC,EAAavyB,OAAOhW,IAAMioC,EAOlC,OAJA9kC,KAAKslC,eAAiBD,EAA6BI,OAAOzlC,KAAKslC,eAAgBtlC,KAAKykC,QAASW,EAAavyB,QAC1G7S,KAAKykC,QAAU,GACfzkC,KAAKulC,mBAAqB,EAC1BvlC,KAAKwlC,mBAAqB,EACnBJ,EAAatyB,QACxB,GAAC,CAAA5W,IAAA,WAAAyB,MACD,SAASmV,GACL,OAAO,IAAIf,EAAAA,GAAoCszB,EAA6BI,OAAOzlC,KAAKslC,eAAgBtlC,KAAKykC,QAAS,MAAO3xB,EACjI,IAAC,EAAA5W,IAAA,SAAAyB,MAhDD,SAAcqmC,EAAGC,EAAG5nC,GAChB,IAAMqpC,EAAc,OAAN1B,EAAaA,EAAEznC,OAAS,EAChCopC,EAAO1B,EAAE1nC,OACTqpC,EAAc,OAANvpC,EAAaA,EAAEE,OAAS,EACtC,GAAa,IAATmpC,GAAuB,IAATC,GAAuB,IAATC,EAC5B,OAAO,IAAIrmB,YAAY,GAE3B,GAAa,IAATmmB,GAAuB,IAATC,EACd,OAAOtpC,EAEX,GAAa,IAATspC,GAAuB,IAATC,EACd,OAAO5B,EAEX,IAAMhmC,EAAS,IAAIuhB,YAAYmmB,EAAOC,EAAOC,GACnC,OAAN5B,GACAhmC,EAAO8C,IAAIkjC,GAEf,IAAK,IAAInnC,EAAI,EAAGA,EAAI8oC,EAAM9oC,IACtBmB,EAAO0nC,EAAO7oC,GAAKonC,EAAEpnC,GAKzB,OAHU,OAANR,GACA2B,EAAO8C,IAAIzE,EAAGqpC,EAAOC,GAElB3nC,CACX,KAACqnC,CAAA,CA7C6B,GAuE9B9kB,EAAgB,WAChB,SAAAA,EAAYpX,EAAiB0W,EAAwB5V,EAAYyN,EAAO5N,GAAuB,IAAAnL,EAAA,MAAAC,EAAAA,EAAAA,GAAA,KAAA2hB,GAC3FvgB,KAAK8J,sBAAwBA,EAC7B9J,KAAK6e,iBAAmB1V,EACxBnJ,KAAK+J,wBAA0B8V,EAC/B7f,KAAKwe,YAAcvU,EACnBjK,KAAK6lC,OAASnuB,EACd1X,KAAK8lC,mBAAqBrpC,OAAOoR,OAAO,MACxC7N,KAAK+lC,eAAiBxoC,QAAQC,aAAQ8M,GAEtC,IAAI07B,GAAW,EACfhmC,KAAKimC,8BAAgCl0B,EAAAA,GAA+BmtB,aAAY,SAACphC,GAC7E,IAAIkoC,EAAJ,CAIA,IADA,IAAIE,GAAyB,EACpBrpC,EAAI,EAAG8V,EAAM7U,EAAEqoC,iBAAiB5pC,OAAQM,EAAI8V,EAAK9V,IAAK,CAC3D,IAAMsN,EAAWrM,EAAEqoC,iBAAiBtpC,GACpC,GAAI8B,EAAKmnC,mBAAmB37B,GAAW,CACnC+7B,GAAyB,EACzB,KACJ,CACJ,CACIA,IACAF,GAAW,EACXj0B,EAAAA,GAA+Bq0B,aAAa,CAACznC,EAAK6f,cAClDwnB,GAAW,EAZf,CAcJ,IACAhmC,KAAKqmC,2BAA6BrmC,KAAK8J,sBAAsBqlB,SAAS,mCAAoC,CACtGb,mBAAoBtuB,KAAKwe,cAE7Bxe,KAAK8J,sBAAsB2kB,0BAAyB,SAAA3wB,GAC5CA,EAAEyyB,qBAAqB,sCACvB5xB,EAAK0nC,2BAA6B1nC,EAAKmL,sBAAsBqlB,SAAS,mCAAoC,CACtGb,mBAAoB3vB,EAAK6f,cAGrC,GACJ,CAkZC,OAlZAre,EAAAA,EAAAA,GAAAogB,EAAA,EAAArkB,IAAA,UAAAyB,MACD,WACIqC,KAAKimC,8BAA8Bl7B,SACvC,GAAC,CAAA7O,IAAA,gBAAAyB,MACD,WACI,IAAM2oC,EAAW,GACjB,IAAK,IAAMvB,KAAoB/kC,KAAK8lC,mBAAoB,CACpD,IAAM7zB,EAAsBF,EAAAA,GAA+B5D,IAAI42B,GAC/D,GAAI9yB,GAEA,GAAIA,aAA+BsO,EAAkB,CACjD,IAAMgmB,EAAmBt0B,EAAoBu0B,iBACb,IAA5BD,EAAiBE,QACjBH,EAASrrB,KAAKsrB,EAAiBrf,QAEvC,OAGCnV,EAAAA,GAA+B20B,WAAW3B,IAE3CuB,EAASrrB,KAAKlJ,EAAAA,GAA+BC,YAAY+yB,GAEjE,CACA,OAAwB,IAApBuB,EAAS/pC,OACF,CACHkqC,QAAQ,GAGT,CACHA,QAAQ,EACRvf,QAAS3pB,QAAQopC,IAAIL,GAAUpoC,MAAK,SAAA0oC,GAAc,IAE1D,GAAC,CAAA1qC,IAAA,kBAAAyB,MACD,WACI,IAAMkpC,EAAYzD,EAA2Bv1B,OAAO,KAAM7N,KAAK6lC,OAAO5pB,OACtE,OAAOmoB,EAAwBv2B,OAAOg5B,EAAW,KACrD,GAAC,CAAA3qC,IAAA,WAAAyB,MACD,SAASyU,EAAMC,EAAQy0B,GACnB,GAAI10B,EAAK7V,QAAUyD,KAAKqmC,2BACpB,OAAO9zB,EAAAA,EAAAA,IAAavS,KAAKwe,YAAasoB,GAE1C,IAAMC,EAAkB,IAAIvC,EACtBwC,EAAehnC,KAAKinC,UAAU70B,EAAMC,EAAQy0B,EAAWC,GAC7D,OAAOA,EAAgBG,SAASF,EACpC,GAAC,CAAA9qC,IAAA,kBAAAyB,MACD,SAAgByU,EAAMC,EAAQy0B,GAC1B,GAAI10B,EAAK7V,QAAUyD,KAAKqmC,2BACpB,OAAOc,EAAAA,EAAAA,IAAoBnnC,KAAK6e,iBAAiBpB,gBAAgBC,iBAAiB1d,KAAKwe,aAAcsoB,GAEzG,IAAMC,EAAkB,IAAI1B,EAA6BrlC,KAAK6e,iBAAkB7e,KAAK+J,wBAAwBgV,gBAAgBD,YACvHkoB,EAAehnC,KAAKinC,UAAU70B,EAAMC,EAAQy0B,EAAWC,GAC7D,OAAOA,EAAgBG,SAASF,EACpC,GAAC,CAAA9qC,IAAA,YAAAyB,MACD,SAAUyU,EAAMC,EAAQy0B,EAAWM,GAC/B,OAAIN,EAAUxC,qBACHtkC,KAAKqnC,gBAAgBj1B,EAAMC,EAAQy0B,EAAW,EAAGM,GAGjDpnC,KAAKsnC,YAAYl1B,EAAMC,EAAQy0B,EAAW,EAAGM,EAE5D,GAAC,CAAAlrC,IAAA,mCAAAyB,MACD,SAAiCyU,EAAME,GACnC,IAAI3C,EAAQ3P,KAAK6lC,OAAOppB,UAAUnK,EAAM+xB,MAAM/xB,OAC9C,IAAK3C,KACDA,EAAQsI,EAAAA,GAAwBjY,KAAK6lC,OAAQvzB,EAAM+xB,MAAM/xB,QAErD,MAAM2F,EAAAA,GAA0BjY,KAAK6lC,OAAQ,mCAAqCvzB,EAAM+xB,MAAM/xB,OAGtG,IAEwB8E,EAFpBmwB,GAAa,EACbC,GAAqB,EAAMnwB,GAAA9W,EAAAA,EAAAA,GACZoP,GAAK,IAAxB,IAAA0H,EAAA5W,MAAA2W,EAAAC,EAAA3W,KAAAzC,MAA0B,KAAfwR,EAAI2H,EAAAzZ,MACX,GAAKsa,EAAAA,EAAwBxI,EAAK2K,SAAwC,SAA7B3K,EAAK2K,OAAOS,aAAzD,CAGA2sB,GAAqB,EACrB,IAAIhsB,EAAQ/L,EAAK+L,MACXisB,EAAch4B,EAAK+L,MAAMlc,OAC/B,GAAiC,SAA7BmoC,EAAYhtB,OAAO,EAAG,IAAmE,MAAlDgtB,EAAYhtB,OAAOgtB,EAAYlrC,OAAS,EAAG,GAAY,CAC9F,IAAM2b,GAASsD,EAAMrD,WAAa,IAAM,KAAOqD,EAAMpD,QAAU,IAAM,IACrEoD,EAAQ,IAAIxD,OAAOyvB,EAAYhtB,OAAO,EAAGgtB,EAAYlrC,OAAS,GAAI2b,EACtE,CACA,IAAMla,EAASoU,EAAKs1B,OAAOlsB,IACX,IAAZxd,GAA6B,IAAXA,GAAgByR,EAAKgM,wBAGxB,IAAf8rB,GAAoBvpC,EAASupC,KAC7BA,EAAYvpC,EAbhB,CAeJ,CAAC,OAAA4C,GAAAyW,EAAAvZ,EAAA8C,EAAA,SAAAyW,EAAAxW,GAAA,CACD,IAAK2mC,EACD,MAAMvvB,EAAAA,GAA0BjY,KAAK6lC,OAAQ,wEAA0EvzB,EAAM+xB,MAAM/xB,OAEvI,OAAOi1B,CACX,GAAC,CAAArrC,IAAA,kBAAAyB,MACD,SAAgByU,EAAMC,EAAQy0B,EAAWhC,EAAaiC,GAClD,IAAMQ,EAAYvnC,KAAK2nC,iCAAiCv1B,EAAM00B,GAC9D,IAAmB,IAAfS,EAAkB,CAElB,IAAMK,EAAiBb,EAAgBc,uBAAuBz1B,EAAMC,EAAQy0B,EAAUxC,qBAAsBQ,GAC5G,OAAOV,EAAwBv2B,OAAOi5B,EAAUzC,MAAO,IAAIH,EAAqB4C,EAAUxC,qBAAqBr6B,WAAY29B,GAC/H,CACA,IAAME,EAAqB11B,EAAK9E,UAAU,EAAGi6B,GACzCO,EAAmBvrC,OAAS,GAE5BwqC,EAAgBc,uBAAuBC,GAAoB,EAAOhB,EAAUxC,qBAAsBQ,GAEtG,IAAMiD,EAAgB31B,EAAK9E,UAAUi6B,GACrC,OAAOvnC,KAAKsnC,YAAYS,EAAe11B,EAAQy0B,EAAWhC,EAAcyC,EAAWR,EACvF,GAAC,CAAA7qC,IAAA,gBAAAyB,MACD,SAAc8R,GACV,OAAIA,EACOA,EAAKoK,KAET,WACX,GAAC,CAAA3d,IAAA,cAAAyB,MACD,SAAYqqC,EAAe31B,EAAQy0B,EAAWhC,EAAaiC,GAAiB,IAAAxhC,EAAA,KACxEwhC,EAAgB7B,cAAcllC,KAAKwe,aAWnC,IAVA,IAAMypB,EAAsBD,EAAczrC,OACpC6V,EAAQC,GAAUrS,KAAK6lC,OAAO/pB,UAAYksB,EAAgB,KAAOA,EACjEE,EAAa91B,EAAK7V,OACpB+nC,EAAuBwC,EAAUxC,qBACjCD,EAAQyC,EAAUzC,MAClBriC,EAAM,EACNmmC,EAAgB,KAGhBC,GAAkB,EACfA,GAAmBpmC,EAAMkmC,GAAY,CACxC,IAAMG,EAAOrmC,EACPsmC,EAAYjE,EAAMb,MAClB+E,EAAYJ,EAAgBA,EAAcK,OAAOjsC,OAAS,EAC1D+V,EAAQ+xB,EAAM/xB,MAChBqG,EAAU,KACV8vB,EAAU,KACVruB,EAAS,KACT3K,EAAO,KACPi5B,EAA2B,KAE/B,GAAIP,EAAe,CACfxvB,EAAUwvB,EAAcxvB,QACxB,IAAMgwB,EAAaR,EAAcK,OAAOI,QACxCH,EAAUE,EAAWF,QACrBruB,EAASuuB,EAAWvuB,OACpB3K,EAAO04B,EAAc14B,KAEe,IAAhC04B,EAAcK,OAAOjsC,SACrB4rC,EAAgB,KAExB,KACK,CAED,IAAKC,GAAmBpmC,GAAOkmC,EAE3B,MAEJE,GAAkB,EAElB,IAAIz4B,EAAQ3P,KAAK6lC,OAAOppB,UAAUnK,GAClC,IAAK3C,KACDA,EAAQsI,EAAAA,GAAwBjY,KAAK6lC,OAAQvzB,IAEzC,MAAM2F,EAAAA,GAA0BjY,KAAK6lC,OAAQ,mCAAqCvzB,GAI1F,IACwBgK,EADlBusB,EAAaz2B,EAAKqI,OAAOzY,GAAKua,GAAAhc,EAAAA,EAAAA,GACjBoP,GAAK,IAAxB,IAAA4M,EAAA9b,MAAA6b,EAAAC,EAAA7b,KAAAzC,MAA0B,KAAfwR,EAAI6M,EAAA3e,MACX,IAAY,IAARqE,IAAcyN,EAAKgM,wBACnB9C,EAAUkwB,EAAWjwB,MAAMnJ,EAAK+L,QACnB,CACTitB,EAAU9vB,EAAQ,GAClByB,EAAS3K,EAAK2K,OACd,KACJ,CAER,CAAC,OAAAxZ,GAAA2b,EAAAze,EAAA8C,EAAA,SAAA2b,EAAA1b,GAAA,CACL,CAeA,GAbK8X,IACDA,EAAU,CAAC,IACX8vB,EAAU,IAETruB,IAGGpY,EAAMkmC,IAENO,GADA9vB,EAAU,CAACvG,EAAK02B,OAAO9mC,KACL,IAEtBoY,EAASpa,KAAK6lC,OAAO1qB,cAET,OAAZstB,EAEA,MAKJ,IAFAzmC,GAAOymC,EAAQlsC,OAER0b,EAAAA,GAA4BmC,IAAWnC,EAAAA,EAAwBmC,IAAWA,EAAOnB,MACpFmB,EAASA,EAAOnB,KAAKwvB,EAAS9vB,EAASrG,EAAOtQ,IAAQkmC,GAE1D,IAAIlqC,EAAS,KAEb,GAAsB,kBAAXoc,GAAuB1T,MAAMmB,QAAQuS,GAC5Cpc,EAASoc,OAER,GAAIA,EAAO7S,MACZvJ,EAASoc,EAAO7S,WAEf,GAAqB,OAAjB6S,EAAOC,YAAmC/P,IAAjB8P,EAAOC,MAAqB,CAS1D,GANIrc,EADAoc,EAAOG,WACEtC,EAAAA,GAAgCjY,KAAK6lC,OAAQzrB,EAAOC,MAAOouB,EAAS9vB,EAASrG,GAG7E8H,EAAOC,MAGhBD,EAAOS,aACP,GAA4B,SAAxBT,EAAOS,aAAyB,CAChC,IAAKypB,EACD,MAAMrsB,EAAAA,GAA0BjY,KAAK6lC,OAAQ,kDAEjDvB,EAAuB,IAC3B,KACK,IAAIA,EACL,MAAMrsB,EAAAA,GAA0BjY,KAAK6lC,OAAQ,mEAG7C6C,EAA2BzwB,EAAAA,GAAgCjY,KAAK6lC,OAAQzrB,EAAOS,aAAc4tB,EAAS9vB,EAASrG,EACnH,CAMJ,GAHI8H,EAAOM,SACP1Y,EAAM+mC,KAAKC,IAAI,EAAGhnC,EAAMoY,EAAOM,SAE/BN,EAAOO,UAAuC,kBAApBP,EAAOO,SAAuB,CACxD,IAAIsuB,EAAYhxB,EAAAA,GAAgCjY,KAAK6lC,OAAQzrB,EAAOO,SAAU8tB,EAAS9vB,EAASrG,GAIhG,GAHqB,MAAjB22B,EAAU,KACVA,EAAYA,EAAUxuB,OAAO,KAE5BxC,EAAAA,GAAwBjY,KAAK6lC,OAAQoD,GACtC,MAAMhxB,EAAAA,GAA0BjY,KAAK6lC,OAAQ,gCAAmCoD,EAAY,gCAAmCjpC,KAAKkpC,cAAcz5B,IAGlJ40B,EAAQA,EAAM1pB,SAASsuB,EAE/B,KACK,IAAI7uB,EAAO+uB,WAAyC,oBAArB/uB,EAAO+uB,UACvC,MAAMlxB,EAAAA,GAA0BjY,KAAK6lC,OAAQ,kCAE5C,GAAIzrB,EAAOvc,KACZ,GAAoB,UAAhBuc,EAAOvc,KAAkB,CACzB,GAAIwmC,EAAMb,OAASxjC,KAAK6lC,OAAO7pB,SAC3B,MAAM/D,EAAAA,GAA0BjY,KAAK6lC,OAAQ,0CACzCxB,EAAM/xB,MAAQ,IAAM+xB,EAAMjgC,OAAOkO,MAAQ,SAG7C+xB,EAAQA,EAAMppB,KAAK3I,EAE3B,MACK,GAAoB,SAAhB8H,EAAOvc,KAAiB,CAC7B,GAAIwmC,EAAMb,OAAS,EACf,MAAMvrB,EAAAA,GAA0BjY,KAAK6lC,OAAQ,yCAA2C7lC,KAAKkpC,cAAcz5B,IAG3G40B,EAAQA,EAAM+E,KAEtB,MACK,GAAoB,YAAhBhvB,EAAOvc,KACZwmC,EAAQA,EAAMgF,aAEb,CACD,IAAIJ,EAAYhxB,EAAAA,GAAgCjY,KAAK6lC,OAAQzrB,EAAOvc,KAAM4qC,EAAS9vB,EAASrG,GAI5F,GAHqB,MAAjB22B,EAAU,KACVA,EAAYA,EAAUxuB,OAAO,KAE5BxC,EAAAA,GAAwBjY,KAAK6lC,OAAQoD,GACtC,MAAMhxB,EAAAA,GAA0BjY,KAAK6lC,OAAQ,+BAAkCoD,EAAY,gCAAmCjpC,KAAKkpC,cAAcz5B,IAGjJ40B,EAAQA,EAAMppB,KAAKguB,EAE3B,CACJ,CACI7uB,EAAOQ,KAA+B,kBAAhBR,EAAOQ,KAC7B3C,EAAAA,GAAkBjY,KAAK6lC,OAAQ7lC,KAAK6lC,OAAO57B,WAAa,KAAOgO,EAAAA,GAAgCjY,KAAK6lC,OAAQzrB,EAAOQ,IAAK6tB,EAAS9vB,EAASrG,GAElJ,CAEA,GAAe,OAAXtU,EACA,MAAMia,EAAAA,GAA0BjY,KAAK6lC,OAAQ,kDAAoD7lC,KAAKkpC,cAAcz5B,IAExH,IAAM65B,EAAqC,SAACZ,GAExC,IAAMz+B,EAAc1E,EAAKsZ,iBAAiB0qB,4BAA4Bb,IAC/DnjC,EAAKsZ,iBAAiB3U,wBAAwBw+B,IAC9CA,EACDpE,EAAuB/+B,EAAKikC,+BAA+Bv/B,GACjE,GAAIjI,EAAMkmC,EAAY,CAElB,IAAMW,EAAab,EAAcvtB,OAAOzY,GACxC,OAAOuD,EAAK8hC,gBAAgBwB,EAAYx2B,EAAQ+xB,EAAwBv2B,OAAOw2B,EAAOC,GAAuBQ,EAAc9iC,EAAK+kC,EACpI,CAEI,OAAO3C,EAAwBv2B,OAAOw2B,EAAOC,EAErD,EAEA,GAAI59B,MAAMmB,QAAQ7J,GAAlB,CACI,GAAImqC,GAAiBA,EAAcK,OAAOjsC,OAAS,EAC/C,MAAM0b,EAAAA,GAA0BjY,KAAK6lC,OAAQ,4BAA8B7lC,KAAKkpC,cAAcz5B,IAElG,GAAIkJ,EAAQpc,SAAWyB,EAAOzB,OAAS,EACnC,MAAM0b,EAAAA,GAA0BjY,KAAK6lC,OAAQ,0EAA4E7lC,KAAKkpC,cAAcz5B,IAGhJ,IADA,IAAIg6B,EAAW,EACN5sC,EAAI,EAAGA,EAAI8b,EAAQpc,OAAQM,IAChC4sC,GAAY9wB,EAAQ9b,GAAGN,OAE3B,GAAIktC,IAAahB,EAAQlsC,OACrB,MAAM0b,EAAAA,GAA0BjY,KAAK6lC,OAAQ,gFAAkF7lC,KAAKkpC,cAAcz5B,IAEtJ04B,EAAgB,CACZ14B,KAAMA,EACNkJ,QAASA,EACT6vB,OAAQ,IAEZ,IAAK,IAAI3rC,EAAI,EAAGA,EAAImB,EAAOzB,OAAQM,IAC/BsrC,EAAcK,OAAO3rC,GAAK,CACtBud,OAAQpc,EAAOnB,GACf4rC,QAAS9vB,EAAQ9b,EAAI,IAG7BmF,GAAOymC,EAAQlsC,MA6CnB,KAtEA,CAgCI,GAAe,aAAXyB,IACAgE,GAAOymC,EAAQlsC,OACfksC,EAAU,GACV9vB,EAAU,KACV3a,EAAS,GAGwB,OAA7B0qC,GACA,OAAOY,EAAmCZ,GAIlD,GAAuB,IAAnBD,EAAQlsC,OAAc,CACtB,GAAmB,IAAf2rC,GAAoBI,IAAcjE,EAAMb,OAASlxB,IAAU+xB,EAAM/xB,QAAW61B,EAAoBA,EAAcK,OAAOjsC,OAAzB,KAAqCgsC,EACjI,SAGA,MAAMtwB,EAAAA,GAA0BjY,KAAK6lC,OAAQ,qCAAuC7lC,KAAKkpC,cAAcz5B,GAE/G,CAGA,IAAIi6B,EAAY,KAChB,GAAIzxB,EAAAA,GAAuBja,IAA2C,IAAhCA,EAAOoP,QAAQ,aAAoB,CACrE,IAAMu8B,EAAO3rC,EAAOyc,OAAO,GACrBD,EAAUovB,EAAY5pC,KAAK6lC,OAAQ4C,GACzC,IAAKjuB,EACD,MAAMvC,EAAAA,GAA0BjY,KAAK6lC,OAAQ,uDAAyD4C,GAE1GiB,EAAYzxB,EAAAA,GAAuBuC,EAAQH,MAAQsvB,EACvD,KACK,CACD,IAAMtvB,EAAoB,KAAXrc,EAAgB,GAAKA,EAASgC,KAAK6lC,OAAO3pB,aACzDwtB,EAAYzxB,EAAAA,GAAuBoC,EACvC,CAKJ,GAJQguB,EAAOJ,GACPlB,EAAgB5B,KAAKkD,EAAOvD,EAAa4E,GAGhB,OAA7BhB,EACA,OAAOY,EAAmCZ,EAF9C,CAIJ,CACA,OAAOtE,EAAwBv2B,OAAOw2B,EAAOC,EACjD,GAAC,CAAApoC,IAAA,iCAAAyB,MACD,SAA+BsM,GAC3B,IAAKjK,KAAK6e,iBAAiBR,uBAAuBpU,GAC9C,OAAO,IAAIi6B,EAAqBj6B,EAAYkI,EAAAA,IAE5ClI,IAAejK,KAAKwe,cAEpBxe,KAAK6e,iBAAiBgrB,6BAA6B5/B,GACnD8H,EAAAA,GAA+BC,YAAY/H,GAC3CjK,KAAK8lC,mBAAmB77B,IAAc,GAE1C,IAAMgI,EAAsBF,EAAAA,GAA+B5D,IAAIlE,GAC/D,OACW,IAAIi6B,EAAqBj6B,EADhCgI,EAC4CA,EAAoBC,kBAExBC,EAAAA,GAChD,KAACoO,CAAA,CAzbe,GAkcpB,SAASqpB,EAAYlyB,EAAO+wB,GACxB,IAAKA,EACD,OAAO,KAEXA,EAAUxwB,EAAAA,GAAsBP,EAAO+wB,GACvC,IAC8BvrB,EADxBF,EAAWtF,EAAMsF,SAASG,GAAA5c,EAAAA,EAAAA,GACVyc,GAAQ,IAA9B,IAAAG,EAAA1c,MAAAyc,EAAAC,EAAAzc,KAAAzC,MAAgC,KAArBuc,EAAO0C,EAAAvf,MACd,GAAI6c,EAAQ/G,OAASg1B,EACjB,MAAO,CAAEpuB,MAAOG,EAAQH,MAAOyvB,YAAa,GAE3C,GAAItvB,EAAQyC,QAAUwrB,EACvB,MAAO,CAAEpuB,MAAOG,EAAQH,MAAOyvB,aAAc,EAErD,CAAC,OAAAlpC,GAAAuc,EAAArf,EAAA8C,EAAA,SAAAuc,EAAAtc,GAAA,CACD,OAAO,IACX,CAtBA0f,EAAmBxkB,EAAW,CAC1BgB,EAAQ,EAAGyO,EAAAA,KACZ+U,E,4DChuBUhV,GAA0B4tB,E,SAAAA,IAAgB,e","sources":["../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditorService.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneCodeEditor.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneEditor.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCompile.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneLanguages.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneLayoutService.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneServices.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/themes.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/standaloneThemeService.js","../node_modules/monaco-editor/esm/vs/editor/standalone/browser/toggleHighContrast/toggleHighContrast.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/monarch/monarchCommon.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/monarch/monarchLexer.js","../node_modules/monaco-editor/esm/vs/editor/standalone/common/standaloneTheme.js"],"sourcesContent":["/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { windowOpenNoOpener } from '../../../base/browser/dom.js';\nimport { Schemas } from '../../../base/common/network.js';\nimport { AbstractCodeEditorService } from '../../browser/services/abstractCodeEditorService.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nlet StandaloneCodeEditorService = class StandaloneCodeEditorService extends AbstractCodeEditorService {\n    constructor(contextKeyService, themeService) {\n        super(themeService);\n        this.onCodeEditorAdd(() => this._checkContextKey());\n        this.onCodeEditorRemove(() => this._checkContextKey());\n        this._editorIsOpen = contextKeyService.createKey('editorIsOpen', false);\n        this._activeCodeEditor = null;\n        this.registerCodeEditorOpenHandler((input, source, sideBySide) => __awaiter(this, void 0, void 0, function* () {\n            if (!source) {\n                return null;\n            }\n            return this.doOpenEditor(source, input);\n        }));\n    }\n    _checkContextKey() {\n        let hasCodeEditor = false;\n        for (const editor of this.listCodeEditors()) {\n            if (!editor.isSimpleWidget) {\n                hasCodeEditor = true;\n                break;\n            }\n        }\n        this._editorIsOpen.set(hasCodeEditor);\n    }\n    setActiveCodeEditor(activeCodeEditor) {\n        this._activeCodeEditor = activeCodeEditor;\n    }\n    getActiveCodeEditor() {\n        return this._activeCodeEditor;\n    }\n    doOpenEditor(editor, input) {\n        const model = this.findModel(editor, input.resource);\n        if (!model) {\n            if (input.resource) {\n                const schema = input.resource.scheme;\n                if (schema === Schemas.http || schema === Schemas.https) {\n                    // This is a fully qualified http or https URL\n                    windowOpenNoOpener(input.resource.toString());\n                    return editor;\n                }\n            }\n            return null;\n        }\n        const selection = (input.options ? input.options.selection : null);\n        if (selection) {\n            if (typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\n                editor.setSelection(selection);\n                editor.revealRangeInCenter(selection, 1 /* ScrollType.Immediate */);\n            }\n            else {\n                const pos = {\n                    lineNumber: selection.startLineNumber,\n                    column: selection.startColumn\n                };\n                editor.setPosition(pos);\n                editor.revealPositionInCenter(pos, 1 /* ScrollType.Immediate */);\n            }\n        }\n        return editor;\n    }\n    findModel(editor, resource) {\n        const model = editor.getModel();\n        if (model && model.uri.toString() !== resource.toString()) {\n            return null;\n        }\n        return model;\n    }\n};\nStandaloneCodeEditorService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, IThemeService)\n], StandaloneCodeEditorService);\nexport { StandaloneCodeEditorService };\nregisterSingleton(ICodeEditorService, StandaloneCodeEditorService, 0 /* InstantiationType.Eager */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as aria from '../../../base/browser/ui/aria/aria.js';\nimport { Disposable, toDisposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { CodeEditorWidget } from '../../browser/widget/codeEditorWidget.js';\nimport { DiffEditorWidget } from '../../browser/widget/diffEditorWidget.js';\nimport { InternalEditorAction } from '../../common/editorAction.js';\nimport { StandaloneKeybindingService, updateConfigurationService } from './standaloneServices.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { MenuId, MenuRegistry } from '../../../platform/actions/common/actions.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { ContextKeyExpr, IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IContextMenuService } from '../../../platform/contextview/browser/contextView.js';\nimport { IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { INotificationService } from '../../../platform/notification/common/notification.js';\nimport { IThemeService } from '../../../platform/theme/common/themeService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { StandaloneCodeEditorNLS } from '../../common/standaloneStrings.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { IEditorProgressService } from '../../../platform/progress/common/progress.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { StandaloneCodeEditorService } from './standaloneCodeEditorService.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../common/languages/modesRegistry.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { DiffEditorWidget2 } from '../../browser/widget/diffEditorWidget2/diffEditorWidget2.js';\nimport { IAudioCueService } from '../../../platform/audioCues/browser/audioCueService.js';\nlet LAST_GENERATED_COMMAND_ID = 0;\nlet ariaDomNodeCreated = false;\n/**\n * Create ARIA dom node inside parent,\n * or only for the first editor instantiation inside document.body.\n * @param parent container element for ARIA dom node\n */\nfunction createAriaDomNode(parent) {\n    if (!parent) {\n        if (ariaDomNodeCreated) {\n            return;\n        }\n        ariaDomNodeCreated = true;\n    }\n    aria.setARIAContainer(parent || document.body);\n}\n/**\n * A code editor to be used both by the standalone editor and the standalone diff editor.\n */\nlet StandaloneCodeEditor = class StandaloneCodeEditor extends CodeEditorWidget {\n    constructor(domElement, _options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService) {\n        const options = Object.assign({}, _options);\n        options.ariaLabel = options.ariaLabel || StandaloneCodeEditorNLS.editorViewAccessibleLabel;\n        options.ariaLabel = options.ariaLabel + ';' + (StandaloneCodeEditorNLS.accessibilityHelpMessage);\n        super(domElement, options, {}, instantiationService, codeEditorService, commandService, contextKeyService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        if (keybindingService instanceof StandaloneKeybindingService) {\n            this._standaloneKeybindingService = keybindingService;\n        }\n        else {\n            this._standaloneKeybindingService = null;\n        }\n        createAriaDomNode(options.ariaContainerElement);\n    }\n    addCommand(keybinding, handler, context) {\n        if (!this._standaloneKeybindingService) {\n            console.warn('Cannot add command because the editor is configured with an unrecognized KeybindingService');\n            return null;\n        }\n        const commandId = 'DYNAMIC_' + (++LAST_GENERATED_COMMAND_ID);\n        const whenExpression = ContextKeyExpr.deserialize(context);\n        this._standaloneKeybindingService.addDynamicKeybinding(commandId, keybinding, handler, whenExpression);\n        return commandId;\n    }\n    createContextKey(key, defaultValue) {\n        return this._contextKeyService.createKey(key, defaultValue);\n    }\n    addAction(_descriptor) {\n        if ((typeof _descriptor.id !== 'string') || (typeof _descriptor.label !== 'string') || (typeof _descriptor.run !== 'function')) {\n            throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\n        }\n        if (!this._standaloneKeybindingService) {\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n            return Disposable.None;\n        }\n        // Read descriptor options\n        const id = _descriptor.id;\n        const label = _descriptor.label;\n        const precondition = ContextKeyExpr.and(ContextKeyExpr.equals('editorId', this.getId()), ContextKeyExpr.deserialize(_descriptor.precondition));\n        const keybindings = _descriptor.keybindings;\n        const keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(_descriptor.keybindingContext));\n        const contextMenuGroupId = _descriptor.contextMenuGroupId || null;\n        const contextMenuOrder = _descriptor.contextMenuOrder || 0;\n        const run = (_accessor, ...args) => {\n            return Promise.resolve(_descriptor.run(this, ...args));\n        };\n        const toDispose = new DisposableStore();\n        // Generate a unique id to allow the same descriptor.id across multiple editor instances\n        const uniqueId = this.getId() + ':' + id;\n        // Register the command\n        toDispose.add(CommandsRegistry.registerCommand(uniqueId, run));\n        // Register the context menu item\n        if (contextMenuGroupId) {\n            const menuItem = {\n                command: {\n                    id: uniqueId,\n                    title: label\n                },\n                when: precondition,\n                group: contextMenuGroupId,\n                order: contextMenuOrder\n            };\n            toDispose.add(MenuRegistry.appendMenuItem(MenuId.EditorContext, menuItem));\n        }\n        // Register the keybindings\n        if (Array.isArray(keybindings)) {\n            for (const kb of keybindings) {\n                toDispose.add(this._standaloneKeybindingService.addDynamicKeybinding(uniqueId, kb, run, keybindingsWhen));\n            }\n        }\n        // Finally, register an internal editor action\n        const internalAction = new InternalEditorAction(uniqueId, label, label, precondition, (...args) => Promise.resolve(_descriptor.run(this, ...args)), this._contextKeyService);\n        // Store it under the original id, such that trigger with the original id will work\n        this._actions.set(id, internalAction);\n        toDispose.add(toDisposable(() => {\n            this._actions.delete(id);\n        }));\n        return toDispose;\n    }\n    _triggerCommand(handlerId, payload) {\n        if (this._codeEditorService instanceof StandaloneCodeEditorService) {\n            // Help commands find this editor as the active editor\n            try {\n                this._codeEditorService.setActiveCodeEditor(this);\n                super._triggerCommand(handlerId, payload);\n            }\n            finally {\n                this._codeEditorService.setActiveCodeEditor(null);\n            }\n        }\n        else {\n            super._triggerCommand(handlerId, payload);\n        }\n    }\n};\nStandaloneCodeEditor = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, ICodeEditorService),\n    __param(4, ICommandService),\n    __param(5, IContextKeyService),\n    __param(6, IKeybindingService),\n    __param(7, IThemeService),\n    __param(8, INotificationService),\n    __param(9, IAccessibilityService),\n    __param(10, ILanguageConfigurationService),\n    __param(11, ILanguageFeaturesService)\n], StandaloneCodeEditor);\nexport { StandaloneCodeEditor };\nlet StandaloneEditor = class StandaloneEditor extends StandaloneCodeEditor {\n    constructor(domElement, _options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, configurationService, accessibilityService, modelService, languageService, languageConfigurationService, languageFeaturesService) {\n        const options = Object.assign({}, _options);\n        updateConfigurationService(configurationService, options, false);\n        const themeDomRegistration = themeService.registerEditorContainer(domElement);\n        if (typeof options.theme === 'string') {\n            themeService.setTheme(options.theme);\n        }\n        if (typeof options.autoDetectHighContrast !== 'undefined') {\n            themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\n        }\n        const _model = options.model;\n        delete options.model;\n        super(domElement, options, instantiationService, codeEditorService, commandService, contextKeyService, keybindingService, themeService, notificationService, accessibilityService, languageConfigurationService, languageFeaturesService);\n        this._configurationService = configurationService;\n        this._standaloneThemeService = themeService;\n        this._register(themeDomRegistration);\n        let model;\n        if (typeof _model === 'undefined') {\n            const languageId = languageService.getLanguageIdByMimeType(options.language) || options.language || PLAINTEXT_LANGUAGE_ID;\n            model = createTextModel(modelService, languageService, options.value || '', languageId, undefined);\n            this._ownsModel = true;\n        }\n        else {\n            model = _model;\n            this._ownsModel = false;\n        }\n        this._attachModel(model);\n        if (model) {\n            const e = {\n                oldModelUrl: null,\n                newModelUrl: model.uri\n            };\n            this._onDidChangeModel.fire(e);\n        }\n    }\n    dispose() {\n        super.dispose();\n    }\n    updateOptions(newOptions) {\n        updateConfigurationService(this._configurationService, newOptions, false);\n        if (typeof newOptions.theme === 'string') {\n            this._standaloneThemeService.setTheme(newOptions.theme);\n        }\n        if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\n            this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\n        }\n        super.updateOptions(newOptions);\n    }\n    _postDetachModelCleanup(detachedModel) {\n        super._postDetachModelCleanup(detachedModel);\n        if (detachedModel && this._ownsModel) {\n            detachedModel.dispose();\n            this._ownsModel = false;\n        }\n    }\n};\nStandaloneEditor = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, ICodeEditorService),\n    __param(4, ICommandService),\n    __param(5, IContextKeyService),\n    __param(6, IKeybindingService),\n    __param(7, IStandaloneThemeService),\n    __param(8, INotificationService),\n    __param(9, IConfigurationService),\n    __param(10, IAccessibilityService),\n    __param(11, IModelService),\n    __param(12, ILanguageService),\n    __param(13, ILanguageConfigurationService),\n    __param(14, ILanguageFeaturesService)\n], StandaloneEditor);\nexport { StandaloneEditor };\nlet StandaloneDiffEditor = class StandaloneDiffEditor extends DiffEditorWidget {\n    constructor(domElement, _options, instantiationService, contextKeyService, codeEditorService, themeService, notificationService, configurationService, contextMenuService, editorProgressService, clipboardService) {\n        const options = Object.assign({}, _options);\n        updateConfigurationService(configurationService, options, true);\n        const themeDomRegistration = themeService.registerEditorContainer(domElement);\n        if (typeof options.theme === 'string') {\n            themeService.setTheme(options.theme);\n        }\n        if (typeof options.autoDetectHighContrast !== 'undefined') {\n            themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\n        }\n        super(domElement, options, {}, clipboardService, contextKeyService, instantiationService, codeEditorService, themeService, notificationService, contextMenuService, editorProgressService);\n        this._configurationService = configurationService;\n        this._standaloneThemeService = themeService;\n        this._register(themeDomRegistration);\n    }\n    dispose() {\n        super.dispose();\n    }\n    updateOptions(newOptions) {\n        updateConfigurationService(this._configurationService, newOptions, true);\n        if (typeof newOptions.theme === 'string') {\n            this._standaloneThemeService.setTheme(newOptions.theme);\n        }\n        if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\n            this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\n        }\n        super.updateOptions(newOptions);\n    }\n    _createInnerEditor(instantiationService, container, options) {\n        return instantiationService.createInstance(StandaloneCodeEditor, container, options);\n    }\n    getOriginalEditor() {\n        return super.getOriginalEditor();\n    }\n    getModifiedEditor() {\n        return super.getModifiedEditor();\n    }\n    addCommand(keybinding, handler, context) {\n        return this.getModifiedEditor().addCommand(keybinding, handler, context);\n    }\n    createContextKey(key, defaultValue) {\n        return this.getModifiedEditor().createContextKey(key, defaultValue);\n    }\n    addAction(descriptor) {\n        return this.getModifiedEditor().addAction(descriptor);\n    }\n};\nStandaloneDiffEditor = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, IContextKeyService),\n    __param(4, ICodeEditorService),\n    __param(5, IStandaloneThemeService),\n    __param(6, INotificationService),\n    __param(7, IConfigurationService),\n    __param(8, IContextMenuService),\n    __param(9, IEditorProgressService),\n    __param(10, IClipboardService)\n], StandaloneDiffEditor);\nexport { StandaloneDiffEditor };\nlet StandaloneDiffEditor2 = class StandaloneDiffEditor2 extends DiffEditorWidget2 {\n    constructor(domElement, _options, instantiationService, contextKeyService, codeEditorService, themeService, notificationService, configurationService, contextMenuService, editorProgressService, clipboardService, audioCueService) {\n        const options = Object.assign({}, _options);\n        updateConfigurationService(configurationService, options, true);\n        const themeDomRegistration = themeService.registerEditorContainer(domElement);\n        if (typeof options.theme === 'string') {\n            themeService.setTheme(options.theme);\n        }\n        if (typeof options.autoDetectHighContrast !== 'undefined') {\n            themeService.setAutoDetectHighContrast(Boolean(options.autoDetectHighContrast));\n        }\n        super(domElement, options, {}, contextKeyService, instantiationService, codeEditorService, audioCueService);\n        this._configurationService = configurationService;\n        this._standaloneThemeService = themeService;\n        this._register(themeDomRegistration);\n    }\n    dispose() {\n        super.dispose();\n    }\n    updateOptions(newOptions) {\n        updateConfigurationService(this._configurationService, newOptions, true);\n        if (typeof newOptions.theme === 'string') {\n            this._standaloneThemeService.setTheme(newOptions.theme);\n        }\n        if (typeof newOptions.autoDetectHighContrast !== 'undefined') {\n            this._standaloneThemeService.setAutoDetectHighContrast(Boolean(newOptions.autoDetectHighContrast));\n        }\n        super.updateOptions(newOptions);\n    }\n    _createInnerEditor(instantiationService, container, options) {\n        return instantiationService.createInstance(StandaloneCodeEditor, container, options);\n    }\n    getOriginalEditor() {\n        return super.getOriginalEditor();\n    }\n    getModifiedEditor() {\n        return super.getModifiedEditor();\n    }\n    addCommand(keybinding, handler, context) {\n        return this.getModifiedEditor().addCommand(keybinding, handler, context);\n    }\n    createContextKey(key, defaultValue) {\n        return this.getModifiedEditor().createContextKey(key, defaultValue);\n    }\n    addAction(descriptor) {\n        return this.getModifiedEditor().addAction(descriptor);\n    }\n};\nStandaloneDiffEditor2 = __decorate([\n    __param(2, IInstantiationService),\n    __param(3, IContextKeyService),\n    __param(4, ICodeEditorService),\n    __param(5, IStandaloneThemeService),\n    __param(6, INotificationService),\n    __param(7, IConfigurationService),\n    __param(8, IContextMenuService),\n    __param(9, IEditorProgressService),\n    __param(10, IClipboardService),\n    __param(11, IAudioCueService)\n], StandaloneDiffEditor2);\nexport { StandaloneDiffEditor2 };\n/**\n * @internal\n */\nexport function createTextModel(modelService, languageService, value, languageId, uri) {\n    value = value || '';\n    if (!languageId) {\n        const firstLF = value.indexOf('\\n');\n        let firstLine = value;\n        if (firstLF !== -1) {\n            firstLine = value.substring(0, firstLF);\n        }\n        return doCreateModel(modelService, value, languageService.createByFilepathOrFirstLine(uri || null, firstLine), uri);\n    }\n    return doCreateModel(modelService, value, languageService.createById(languageId), uri);\n}\n/**\n * @internal\n */\nfunction doCreateModel(modelService, value, languageSelection, uri) {\n    return modelService.createModel(value, languageSelection, uri);\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport './standalone-tokens.css';\nimport { Disposable, DisposableStore } from '../../../base/common/lifecycle.js';\nimport { splitLines } from '../../../base/common/strings.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { FontMeasurements } from '../../browser/config/fontMeasurements.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { DiffNavigator } from '../../browser/widget/diffNavigator.js';\nimport { ApplyUpdateResult, ConfigurationChangedEvent, EditorOptions } from '../../common/config/editorOptions.js';\nimport { BareFontInfo, FontInfo } from '../../common/config/fontInfo.js';\nimport { EditorType } from '../../common/editorCommon.js';\nimport { FindMatch, TextModelResolvedOptions } from '../../common/model.js';\nimport * as languages from '../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { NullState, nullTokenize } from '../../common/languages/nullTokenize.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { createWebWorker as actualCreateWebWorker } from '../../browser/services/webWorker.js';\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\nimport { Colorizer } from './colorizer.js';\nimport { createTextModel, StandaloneDiffEditor, StandaloneDiffEditor2, StandaloneEditor } from './standaloneCodeEditor.js';\nimport { StandaloneKeybindingService, StandaloneServices } from './standaloneServices.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { CommandsRegistry } from '../../../platform/commands/common/commands.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { EditorCommand } from '../../browser/editorExtensions.js';\nimport { MenuRegistry, MenuId } from '../../../platform/actions/common/actions.js';\nimport { ContextKeyExpr } from '../../../platform/contextkey/common/contextkey.js';\nimport { PLAINTEXT_LANGUAGE_ID } from '../../common/languages/modesRegistry.js';\nimport { LineRangeMapping, MovedText, RangeMapping, SimpleLineRangeMapping } from '../../common/diff/linesDiffComputer.js';\nimport { LineRange } from '../../common/core/lineRange.js';\nimport { EditorZoom } from '../../common/config/editorZoom.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\n/**\n * Create a new editor under `domElement`.\n * `domElement` should be empty (not contain other dom nodes).\n * The editor will read the size of `domElement`.\n */\nexport function create(domElement, options, override) {\n    const instantiationService = StandaloneServices.initialize(override || {});\n    return instantiationService.createInstance(StandaloneEditor, domElement, options);\n}\n/**\n * Emitted when an editor is created.\n * Creating a diff editor might cause this listener to be invoked with the two editors.\n * @event\n */\nexport function onDidCreateEditor(listener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.onCodeEditorAdd((editor) => {\n        listener(editor);\n    });\n}\n/**\n * Emitted when an diff editor is created.\n * @event\n */\nexport function onDidCreateDiffEditor(listener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.onDiffEditorAdd((editor) => {\n        listener(editor);\n    });\n}\n/**\n * Get all the created editors.\n */\nexport function getEditors() {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.listCodeEditors();\n}\n/**\n * Get all the created diff editors.\n */\nexport function getDiffEditors() {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.listDiffEditors();\n}\n/**\n * Create a new diff editor under `domElement`.\n * `domElement` should be empty (not contain other dom nodes).\n * The editor will read the size of `domElement`.\n */\nexport function createDiffEditor(domElement, options, override) {\n    var _a;\n    const instantiationService = StandaloneServices.initialize(override || {});\n    if ((_a = options === null || options === void 0 ? void 0 : options.experimental) === null || _a === void 0 ? void 0 : _a.useVersion2) {\n        return instantiationService.createInstance(StandaloneDiffEditor2, domElement, options);\n    }\n    return instantiationService.createInstance(StandaloneDiffEditor, domElement, options);\n}\nexport function createDiffNavigator(diffEditor, opts) {\n    const instantiationService = StandaloneServices.initialize({});\n    return instantiationService.createInstance(DiffNavigator, diffEditor, opts);\n}\n/**\n * Add a command.\n */\nexport function addCommand(descriptor) {\n    if ((typeof descriptor.id !== 'string') || (typeof descriptor.run !== 'function')) {\n        throw new Error('Invalid command descriptor, `id` and `run` are required properties!');\n    }\n    return CommandsRegistry.registerCommand(descriptor.id, descriptor.run);\n}\n/**\n * Add an action to all editors.\n */\nexport function addEditorAction(descriptor) {\n    if ((typeof descriptor.id !== 'string') || (typeof descriptor.label !== 'string') || (typeof descriptor.run !== 'function')) {\n        throw new Error('Invalid action descriptor, `id`, `label` and `run` are required properties!');\n    }\n    const precondition = ContextKeyExpr.deserialize(descriptor.precondition);\n    const run = (accessor, ...args) => {\n        return EditorCommand.runEditorCommand(accessor, args, precondition, (accessor, editor, args) => Promise.resolve(descriptor.run(editor, ...args)));\n    };\n    const toDispose = new DisposableStore();\n    // Register the command\n    toDispose.add(CommandsRegistry.registerCommand(descriptor.id, run));\n    // Register the context menu item\n    if (descriptor.contextMenuGroupId) {\n        const menuItem = {\n            command: {\n                id: descriptor.id,\n                title: descriptor.label\n            },\n            when: precondition,\n            group: descriptor.contextMenuGroupId,\n            order: descriptor.contextMenuOrder || 0\n        };\n        toDispose.add(MenuRegistry.appendMenuItem(MenuId.EditorContext, menuItem));\n    }\n    // Register the keybindings\n    if (Array.isArray(descriptor.keybindings)) {\n        const keybindingService = StandaloneServices.get(IKeybindingService);\n        if (!(keybindingService instanceof StandaloneKeybindingService)) {\n            console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n        }\n        else {\n            const keybindingsWhen = ContextKeyExpr.and(precondition, ContextKeyExpr.deserialize(descriptor.keybindingContext));\n            toDispose.add(keybindingService.addDynamicKeybindings(descriptor.keybindings.map((keybinding) => {\n                return {\n                    keybinding,\n                    command: descriptor.id,\n                    when: keybindingsWhen\n                };\n            })));\n        }\n    }\n    return toDispose;\n}\n/**\n * Add a keybinding rule.\n */\nexport function addKeybindingRule(rule) {\n    return addKeybindingRules([rule]);\n}\n/**\n * Add keybinding rules.\n */\nexport function addKeybindingRules(rules) {\n    const keybindingService = StandaloneServices.get(IKeybindingService);\n    if (!(keybindingService instanceof StandaloneKeybindingService)) {\n        console.warn('Cannot add keybinding because the editor is configured with an unrecognized KeybindingService');\n        return Disposable.None;\n    }\n    return keybindingService.addDynamicKeybindings(rules.map((rule) => {\n        return {\n            keybinding: rule.keybinding,\n            command: rule.command,\n            commandArgs: rule.commandArgs,\n            when: ContextKeyExpr.deserialize(rule.when),\n        };\n    }));\n}\n/**\n * Create a new editor model.\n * You can specify the language that should be set for this model or let the language be inferred from the `uri`.\n */\nexport function createModel(value, language, uri) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const languageId = languageService.getLanguageIdByMimeType(language) || language;\n    return createTextModel(StandaloneServices.get(IModelService), languageService, value, languageId, uri);\n}\n/**\n * Change the language for a model.\n */\nexport function setModelLanguage(model, mimeTypeOrLanguageId) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const languageId = languageService.getLanguageIdByMimeType(mimeTypeOrLanguageId) || mimeTypeOrLanguageId || PLAINTEXT_LANGUAGE_ID;\n    model.setLanguage(languageService.createById(languageId));\n}\n/**\n * Set the markers for a model.\n */\nexport function setModelMarkers(model, owner, markers) {\n    if (model) {\n        const markerService = StandaloneServices.get(IMarkerService);\n        markerService.changeOne(owner, model.uri, markers);\n    }\n}\n/**\n * Remove all markers of an owner.\n */\nexport function removeAllMarkers(owner) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    markerService.changeAll(owner, []);\n}\n/**\n * Get markers for owner and/or resource\n *\n * @returns list of markers\n */\nexport function getModelMarkers(filter) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    return markerService.read(filter);\n}\n/**\n * Emitted when markers change for a model.\n * @event\n */\nexport function onDidChangeMarkers(listener) {\n    const markerService = StandaloneServices.get(IMarkerService);\n    return markerService.onMarkerChanged(listener);\n}\n/**\n * Get the model that has `uri` if it exists.\n */\nexport function getModel(uri) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.getModel(uri);\n}\n/**\n * Get all the created models.\n */\nexport function getModels() {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.getModels();\n}\n/**\n * Emitted when a model is created.\n * @event\n */\nexport function onDidCreateModel(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelAdded(listener);\n}\n/**\n * Emitted right before a model is disposed.\n * @event\n */\nexport function onWillDisposeModel(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelRemoved(listener);\n}\n/**\n * Emitted when a different language is set to a model.\n * @event\n */\nexport function onDidChangeModelLanguage(listener) {\n    const modelService = StandaloneServices.get(IModelService);\n    return modelService.onModelLanguageChanged((e) => {\n        listener({\n            model: e.model,\n            oldLanguage: e.oldLanguageId\n        });\n    });\n}\n/**\n * Create a new web worker that has model syncing capabilities built in.\n * Specify an AMD module to load that will `create` an object that will be proxied.\n */\nexport function createWebWorker(opts) {\n    return actualCreateWebWorker(StandaloneServices.get(IModelService), StandaloneServices.get(ILanguageConfigurationService), opts);\n}\n/**\n * Colorize the contents of `domNode` using attribute `data-lang`.\n */\nexport function colorizeElement(domNode, options) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    themeService.registerEditorContainer(domNode);\n    return Colorizer.colorizeElement(themeService, languageService, domNode, options);\n}\n/**\n * Colorize `text` using language `languageId`.\n */\nexport function colorize(text, languageId, options) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    themeService.registerEditorContainer(document.body);\n    return Colorizer.colorize(languageService, text, languageId, options);\n}\n/**\n * Colorize a line in a model.\n */\nexport function colorizeModelLine(model, lineNumber, tabSize = 4) {\n    const themeService = StandaloneServices.get(IStandaloneThemeService);\n    themeService.registerEditorContainer(document.body);\n    return Colorizer.colorizeModelLine(model, lineNumber, tabSize);\n}\n/**\n * @internal\n */\nfunction getSafeTokenizationSupport(language) {\n    const tokenizationSupport = languages.TokenizationRegistry.get(language);\n    if (tokenizationSupport) {\n        return tokenizationSupport;\n    }\n    return {\n        getInitialState: () => NullState,\n        tokenize: (line, hasEOL, state) => nullTokenize(language, state)\n    };\n}\n/**\n * Tokenize `text` using language `languageId`\n */\nexport function tokenize(text, languageId) {\n    // Needed in order to get the mode registered for subsequent look-ups\n    languages.TokenizationRegistry.getOrCreate(languageId);\n    const tokenizationSupport = getSafeTokenizationSupport(languageId);\n    const lines = splitLines(text);\n    const result = [];\n    let state = tokenizationSupport.getInitialState();\n    for (let i = 0, len = lines.length; i < len; i++) {\n        const line = lines[i];\n        const tokenizationResult = tokenizationSupport.tokenize(line, true, state);\n        result[i] = tokenizationResult.tokens;\n        state = tokenizationResult.endState;\n    }\n    return result;\n}\n/**\n * Define a new theme or update an existing theme.\n */\nexport function defineTheme(themeName, themeData) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    standaloneThemeService.defineTheme(themeName, themeData);\n}\n/**\n * Switches to a theme.\n */\nexport function setTheme(themeName) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    standaloneThemeService.setTheme(themeName);\n}\n/**\n * Clears all cached font measurements and triggers re-measurement.\n */\nexport function remeasureFonts() {\n    FontMeasurements.clearAllFontInfos();\n}\n/**\n * Register a command.\n */\nexport function registerCommand(id, handler) {\n    return CommandsRegistry.registerCommand({ id, handler });\n}\n/**\n * Registers a handler that is called when a link is opened in any editor. The handler callback should return `true` if the link was handled and `false` otherwise.\n * The handler that was registered last will be called first when a link is opened.\n *\n * Returns a disposable that can unregister the opener again.\n */\nexport function registerLinkOpener(opener) {\n    const openerService = StandaloneServices.get(IOpenerService);\n    return openerService.registerOpener({\n        open(resource) {\n            return __awaiter(this, void 0, void 0, function* () {\n                if (typeof resource === 'string') {\n                    resource = URI.parse(resource);\n                }\n                return opener.open(resource);\n            });\n        }\n    });\n}\n/**\n * Registers a handler that is called when a resource other than the current model should be opened in the editor (e.g. \"go to definition\").\n * The handler callback should return `true` if the request was handled and `false` otherwise.\n *\n * Returns a disposable that can unregister the opener again.\n *\n * If no handler is registered the default behavior is to do nothing for models other than the currently attached one.\n */\nexport function registerEditorOpener(opener) {\n    const codeEditorService = StandaloneServices.get(ICodeEditorService);\n    return codeEditorService.registerCodeEditorOpenHandler((input, source, sideBySide) => __awaiter(this, void 0, void 0, function* () {\n        var _a;\n        if (!source) {\n            return null;\n        }\n        const selection = (_a = input.options) === null || _a === void 0 ? void 0 : _a.selection;\n        let selectionOrPosition;\n        if (selection && typeof selection.endLineNumber === 'number' && typeof selection.endColumn === 'number') {\n            selectionOrPosition = selection;\n        }\n        else if (selection) {\n            selectionOrPosition = { lineNumber: selection.startLineNumber, column: selection.startColumn };\n        }\n        if (yield opener.openCodeEditor(source, input.resource, selectionOrPosition)) {\n            return source; // return source editor to indicate that this handler has successfully handled the opening\n        }\n        return null; // fallback to other registered handlers\n    }));\n}\n/**\n * @internal\n */\nexport function createMonacoEditorAPI() {\n    return {\n        // methods\n        create: create,\n        getEditors: getEditors,\n        getDiffEditors: getDiffEditors,\n        onDidCreateEditor: onDidCreateEditor,\n        onDidCreateDiffEditor: onDidCreateDiffEditor,\n        createDiffEditor: createDiffEditor,\n        createDiffNavigator: createDiffNavigator,\n        addCommand: addCommand,\n        addEditorAction: addEditorAction,\n        addKeybindingRule: addKeybindingRule,\n        addKeybindingRules: addKeybindingRules,\n        createModel: createModel,\n        setModelLanguage: setModelLanguage,\n        setModelMarkers: setModelMarkers,\n        getModelMarkers: getModelMarkers,\n        removeAllMarkers: removeAllMarkers,\n        onDidChangeMarkers: onDidChangeMarkers,\n        getModels: getModels,\n        getModel: getModel,\n        onDidCreateModel: onDidCreateModel,\n        onWillDisposeModel: onWillDisposeModel,\n        onDidChangeModelLanguage: onDidChangeModelLanguage,\n        createWebWorker: createWebWorker,\n        colorizeElement: colorizeElement,\n        colorize: colorize,\n        colorizeModelLine: colorizeModelLine,\n        tokenize: tokenize,\n        defineTheme: defineTheme,\n        setTheme: setTheme,\n        remeasureFonts: remeasureFonts,\n        registerCommand: registerCommand,\n        registerLinkOpener: registerLinkOpener,\n        registerEditorOpener: registerEditorOpener,\n        // enums\n        AccessibilitySupport: standaloneEnums.AccessibilitySupport,\n        ContentWidgetPositionPreference: standaloneEnums.ContentWidgetPositionPreference,\n        CursorChangeReason: standaloneEnums.CursorChangeReason,\n        DefaultEndOfLine: standaloneEnums.DefaultEndOfLine,\n        EditorAutoIndentStrategy: standaloneEnums.EditorAutoIndentStrategy,\n        EditorOption: standaloneEnums.EditorOption,\n        EndOfLinePreference: standaloneEnums.EndOfLinePreference,\n        EndOfLineSequence: standaloneEnums.EndOfLineSequence,\n        MinimapPosition: standaloneEnums.MinimapPosition,\n        MouseTargetType: standaloneEnums.MouseTargetType,\n        OverlayWidgetPositionPreference: standaloneEnums.OverlayWidgetPositionPreference,\n        OverviewRulerLane: standaloneEnums.OverviewRulerLane,\n        GlyphMarginLane: standaloneEnums.GlyphMarginLane,\n        RenderLineNumbersType: standaloneEnums.RenderLineNumbersType,\n        RenderMinimap: standaloneEnums.RenderMinimap,\n        ScrollbarVisibility: standaloneEnums.ScrollbarVisibility,\n        ScrollType: standaloneEnums.ScrollType,\n        TextEditorCursorBlinkingStyle: standaloneEnums.TextEditorCursorBlinkingStyle,\n        TextEditorCursorStyle: standaloneEnums.TextEditorCursorStyle,\n        TrackedRangeStickiness: standaloneEnums.TrackedRangeStickiness,\n        WrappingIndent: standaloneEnums.WrappingIndent,\n        InjectedTextCursorStops: standaloneEnums.InjectedTextCursorStops,\n        PositionAffinity: standaloneEnums.PositionAffinity,\n        // classes\n        ConfigurationChangedEvent: ConfigurationChangedEvent,\n        BareFontInfo: BareFontInfo,\n        FontInfo: FontInfo,\n        TextModelResolvedOptions: TextModelResolvedOptions,\n        FindMatch: FindMatch,\n        ApplyUpdateResult: ApplyUpdateResult,\n        LineRange: LineRange,\n        LineRangeMapping: LineRangeMapping,\n        RangeMapping: RangeMapping,\n        EditorZoom: EditorZoom,\n        MovedText: MovedText,\n        SimpleLineRangeMapping: SimpleLineRangeMapping,\n        // vars\n        EditorType: EditorType,\n        EditorOptions: EditorOptions\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\n/*\n * This module only exports 'compile' which compiles a JSON language definition\n * into a typed and checked ILexer definition.\n */\nimport * as monarchCommon from './monarchCommon.js';\n/*\n * Type helpers\n *\n * Note: this is just for sanity checks on the JSON description which is\n * helpful for the programmer. No checks are done anymore once the lexer is\n * already 'compiled and checked'.\n *\n */\nfunction isArrayOf(elemType, obj) {\n    if (!obj) {\n        return false;\n    }\n    if (!(Array.isArray(obj))) {\n        return false;\n    }\n    for (const el of obj) {\n        if (!(elemType(el))) {\n            return false;\n        }\n    }\n    return true;\n}\nfunction bool(prop, defValue) {\n    if (typeof prop === 'boolean') {\n        return prop;\n    }\n    return defValue;\n}\nfunction string(prop, defValue) {\n    if (typeof (prop) === 'string') {\n        return prop;\n    }\n    return defValue;\n}\nfunction arrayToHash(array) {\n    const result = {};\n    for (const e of array) {\n        result[e] = true;\n    }\n    return result;\n}\nfunction createKeywordMatcher(arr, caseInsensitive = false) {\n    if (caseInsensitive) {\n        arr = arr.map(function (x) { return x.toLowerCase(); });\n    }\n    const hash = arrayToHash(arr);\n    if (caseInsensitive) {\n        return function (word) {\n            return hash[word.toLowerCase()] !== undefined && hash.hasOwnProperty(word.toLowerCase());\n        };\n    }\n    else {\n        return function (word) {\n            return hash[word] !== undefined && hash.hasOwnProperty(word);\n        };\n    }\n}\n// Lexer helpers\n/**\n * Compiles a regular expression string, adding the 'i' flag if 'ignoreCase' is set, and the 'u' flag if 'unicode' is set.\n * Also replaces @\\w+ or sequences with the content of the specified attribute\n * @\\w+ replacement can be avoided by escaping `@` signs with another `@` sign.\n * @example /@attr/ will be replaced with the value of lexer[attr]\n * @example /@@text/ will not be replaced and will become /@text/.\n */\nfunction compileRegExp(lexer, str) {\n    // @@ must be interpreted as a literal @, so we replace all occurences of @@ with a placeholder character\n    str = str.replace(/@@/g, `\\x01`);\n    let n = 0;\n    let hadExpansion;\n    do {\n        hadExpansion = false;\n        str = str.replace(/@(\\w+)/g, function (s, attr) {\n            hadExpansion = true;\n            let sub = '';\n            if (typeof (lexer[attr]) === 'string') {\n                sub = lexer[attr];\n            }\n            else if (lexer[attr] && lexer[attr] instanceof RegExp) {\n                sub = lexer[attr].source;\n            }\n            else {\n                if (lexer[attr] === undefined) {\n                    throw monarchCommon.createError(lexer, 'language definition does not contain attribute \\'' + attr + '\\', used at: ' + str);\n                }\n                else {\n                    throw monarchCommon.createError(lexer, 'attribute reference \\'' + attr + '\\' must be a string, used at: ' + str);\n                }\n            }\n            return (monarchCommon.empty(sub) ? '' : '(?:' + sub + ')');\n        });\n        n++;\n    } while (hadExpansion && n < 5);\n    // handle escaped @@\n    str = str.replace(/\\x01/g, '@');\n    const flags = (lexer.ignoreCase ? 'i' : '') + (lexer.unicode ? 'u' : '');\n    return new RegExp(str, flags);\n}\n/**\n * Compiles guard functions for case matches.\n * This compiles 'cases' attributes into efficient match functions.\n *\n */\nfunction selectScrutinee(id, matches, state, num) {\n    if (num < 0) {\n        return id;\n    }\n    if (num < matches.length) {\n        return matches[num];\n    }\n    if (num >= 100) {\n        num = num - 100;\n        const parts = state.split('.');\n        parts.unshift(state);\n        if (num < parts.length) {\n            return parts[num];\n        }\n    }\n    return null;\n}\nfunction createGuard(lexer, ruleName, tkey, val) {\n    // get the scrutinee and pattern\n    let scrut = -1; // -1: $!, 0-99: $n, 100+n: $Sn\n    let oppat = tkey;\n    let matches = tkey.match(/^\\$(([sS]?)(\\d\\d?)|#)(.*)$/);\n    if (matches) {\n        if (matches[3]) { // if digits\n            scrut = parseInt(matches[3]);\n            if (matches[2]) {\n                scrut = scrut + 100; // if [sS] present\n            }\n        }\n        oppat = matches[4];\n    }\n    // get operator\n    let op = '~';\n    let pat = oppat;\n    if (!oppat || oppat.length === 0) {\n        op = '!=';\n        pat = '';\n    }\n    else if (/^\\w*$/.test(pat)) { // just a word\n        op = '==';\n    }\n    else {\n        matches = oppat.match(/^(@|!@|~|!~|==|!=)(.*)$/);\n        if (matches) {\n            op = matches[1];\n            pat = matches[2];\n        }\n    }\n    // set the tester function\n    let tester;\n    // special case a regexp that matches just words\n    if ((op === '~' || op === '!~') && /^(\\w|\\|)*$/.test(pat)) {\n        const inWords = createKeywordMatcher(pat.split('|'), lexer.ignoreCase);\n        tester = function (s) { return (op === '~' ? inWords(s) : !inWords(s)); };\n    }\n    else if (op === '@' || op === '!@') {\n        const words = lexer[pat];\n        if (!words) {\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' is not defined, in rule: ' + ruleName);\n        }\n        if (!(isArrayOf(function (elem) { return (typeof (elem) === 'string'); }, words))) {\n            throw monarchCommon.createError(lexer, 'the @ match target \\'' + pat + '\\' must be an array of strings, in rule: ' + ruleName);\n        }\n        const inWords = createKeywordMatcher(words, lexer.ignoreCase);\n        tester = function (s) { return (op === '@' ? inWords(s) : !inWords(s)); };\n    }\n    else if (op === '~' || op === '!~') {\n        if (pat.indexOf('$') < 0) {\n            // precompile regular expression\n            const re = compileRegExp(lexer, '^' + pat + '$');\n            tester = function (s) { return (op === '~' ? re.test(s) : !re.test(s)); };\n        }\n        else {\n            tester = function (s, id, matches, state) {\n                const re = compileRegExp(lexer, '^' + monarchCommon.substituteMatches(lexer, pat, id, matches, state) + '$');\n                return re.test(s);\n            };\n        }\n    }\n    else { // if (op==='==' || op==='!=') {\n        if (pat.indexOf('$') < 0) {\n            const patx = monarchCommon.fixCase(lexer, pat);\n            tester = function (s) { return (op === '==' ? s === patx : s !== patx); };\n        }\n        else {\n            const patx = monarchCommon.fixCase(lexer, pat);\n            tester = function (s, id, matches, state, eos) {\n                const patexp = monarchCommon.substituteMatches(lexer, patx, id, matches, state);\n                return (op === '==' ? s === patexp : s !== patexp);\n            };\n        }\n    }\n    // return the branch object\n    if (scrut === -1) {\n        return {\n            name: tkey, value: val, test: function (id, matches, state, eos) {\n                return tester(id, id, matches, state, eos);\n            }\n        };\n    }\n    else {\n        return {\n            name: tkey, value: val, test: function (id, matches, state, eos) {\n                const scrutinee = selectScrutinee(id, matches, state, scrut);\n                return tester(!scrutinee ? '' : scrutinee, id, matches, state, eos);\n            }\n        };\n    }\n}\n/**\n * Compiles an action: i.e. optimize regular expressions and case matches\n * and do many sanity checks.\n *\n * This is called only during compilation but if the lexer definition\n * contains user functions as actions (which is usually not allowed), then this\n * may be called during lexing. It is important therefore to compile common cases efficiently\n */\nfunction compileAction(lexer, ruleName, action) {\n    if (!action) {\n        return { token: '' };\n    }\n    else if (typeof (action) === 'string') {\n        return action; // { token: action };\n    }\n    else if (action.token || action.token === '') {\n        if (typeof (action.token) !== 'string') {\n            throw monarchCommon.createError(lexer, 'a \\'token\\' attribute must be of type string, in rule: ' + ruleName);\n        }\n        else {\n            // only copy specific typed fields (only happens once during compile Lexer)\n            const newAction = { token: action.token };\n            if (action.token.indexOf('$') >= 0) {\n                newAction.tokenSubst = true;\n            }\n            if (typeof (action.bracket) === 'string') {\n                if (action.bracket === '@open') {\n                    newAction.bracket = 1 /* monarchCommon.MonarchBracket.Open */;\n                }\n                else if (action.bracket === '@close') {\n                    newAction.bracket = -1 /* monarchCommon.MonarchBracket.Close */;\n                }\n                else {\n                    throw monarchCommon.createError(lexer, 'a \\'bracket\\' attribute must be either \\'@open\\' or \\'@close\\', in rule: ' + ruleName);\n                }\n            }\n            if (action.next) {\n                if (typeof (action.next) !== 'string') {\n                    throw monarchCommon.createError(lexer, 'the next state must be a string value in rule: ' + ruleName);\n                }\n                else {\n                    let next = action.next;\n                    if (!/^(@pop|@push|@popall)$/.test(next)) {\n                        if (next[0] === '@') {\n                            next = next.substr(1); // peel off starting @ sign\n                        }\n                        if (next.indexOf('$') < 0) { // no dollar substitution, we can check if the state exists\n                            if (!monarchCommon.stateExists(lexer, monarchCommon.substituteMatches(lexer, next, '', [], ''))) {\n                                throw monarchCommon.createError(lexer, 'the next state \\'' + action.next + '\\' is not defined in rule: ' + ruleName);\n                            }\n                        }\n                    }\n                    newAction.next = next;\n                }\n            }\n            if (typeof (action.goBack) === 'number') {\n                newAction.goBack = action.goBack;\n            }\n            if (typeof (action.switchTo) === 'string') {\n                newAction.switchTo = action.switchTo;\n            }\n            if (typeof (action.log) === 'string') {\n                newAction.log = action.log;\n            }\n            if (typeof (action.nextEmbedded) === 'string') {\n                newAction.nextEmbedded = action.nextEmbedded;\n                lexer.usesEmbedded = true;\n            }\n            return newAction;\n        }\n    }\n    else if (Array.isArray(action)) {\n        const results = [];\n        for (let i = 0, len = action.length; i < len; i++) {\n            results[i] = compileAction(lexer, ruleName, action[i]);\n        }\n        return { group: results };\n    }\n    else if (action.cases) {\n        // build an array of test cases\n        const cases = [];\n        // for each case, push a test function and result value\n        for (const tkey in action.cases) {\n            if (action.cases.hasOwnProperty(tkey)) {\n                const val = compileAction(lexer, ruleName, action.cases[tkey]);\n                // what kind of case\n                if (tkey === '@default' || tkey === '@' || tkey === '') {\n                    cases.push({ test: undefined, value: val, name: tkey });\n                }\n                else if (tkey === '@eos') {\n                    cases.push({ test: function (id, matches, state, eos) { return eos; }, value: val, name: tkey });\n                }\n                else {\n                    cases.push(createGuard(lexer, ruleName, tkey, val)); // call separate function to avoid local variable capture\n                }\n            }\n        }\n        // create a matching function\n        const def = lexer.defaultToken;\n        return {\n            test: function (id, matches, state, eos) {\n                for (const _case of cases) {\n                    const didmatch = (!_case.test || _case.test(id, matches, state, eos));\n                    if (didmatch) {\n                        return _case.value;\n                    }\n                }\n                return def;\n            }\n        };\n    }\n    else {\n        throw monarchCommon.createError(lexer, 'an action must be a string, an object with a \\'token\\' or \\'cases\\' attribute, or an array of actions; in rule: ' + ruleName);\n    }\n}\n/**\n * Helper class for creating matching rules\n */\nclass Rule {\n    constructor(name) {\n        this.regex = new RegExp('');\n        this.action = { token: '' };\n        this.matchOnlyAtLineStart = false;\n        this.name = '';\n        this.name = name;\n    }\n    setRegex(lexer, re) {\n        let sregex;\n        if (typeof (re) === 'string') {\n            sregex = re;\n        }\n        else if (re instanceof RegExp) {\n            sregex = re.source;\n        }\n        else {\n            throw monarchCommon.createError(lexer, 'rules must start with a match string or regular expression: ' + this.name);\n        }\n        this.matchOnlyAtLineStart = (sregex.length > 0 && sregex[0] === '^');\n        this.name = this.name + ': ' + sregex;\n        this.regex = compileRegExp(lexer, '^(?:' + (this.matchOnlyAtLineStart ? sregex.substr(1) : sregex) + ')');\n    }\n    setAction(lexer, act) {\n        this.action = compileAction(lexer, this.name, act);\n    }\n}\n/**\n * Compiles a json description function into json where all regular expressions,\n * case matches etc, are compiled and all include rules are expanded.\n * We also compile the bracket definitions, supply defaults, and do many sanity checks.\n * If the 'jsonStrict' parameter is 'false', we allow at certain locations\n * regular expression objects and functions that get called during lexing.\n * (Currently we have no samples that need this so perhaps we should always have\n * jsonStrict to true).\n */\nexport function compile(languageId, json) {\n    if (!json || typeof (json) !== 'object') {\n        throw new Error('Monarch: expecting a language definition object');\n    }\n    // Create our lexer\n    const lexer = {};\n    lexer.languageId = languageId;\n    lexer.includeLF = bool(json.includeLF, false);\n    lexer.noThrow = false; // raise exceptions during compilation\n    lexer.maxStack = 100;\n    // Set standard fields: be defensive about types\n    lexer.start = (typeof json.start === 'string' ? json.start : null);\n    lexer.ignoreCase = bool(json.ignoreCase, false);\n    lexer.unicode = bool(json.unicode, false);\n    lexer.tokenPostfix = string(json.tokenPostfix, '.' + lexer.languageId);\n    lexer.defaultToken = string(json.defaultToken, 'source');\n    lexer.usesEmbedded = false; // becomes true if we find a nextEmbedded action\n    // For calling compileAction later on\n    const lexerMin = json;\n    lexerMin.languageId = languageId;\n    lexerMin.includeLF = lexer.includeLF;\n    lexerMin.ignoreCase = lexer.ignoreCase;\n    lexerMin.unicode = lexer.unicode;\n    lexerMin.noThrow = lexer.noThrow;\n    lexerMin.usesEmbedded = lexer.usesEmbedded;\n    lexerMin.stateNames = json.tokenizer;\n    lexerMin.defaultToken = lexer.defaultToken;\n    // Compile an array of rules into newrules where RegExp objects are created.\n    function addRules(state, newrules, rules) {\n        for (const rule of rules) {\n            let include = rule.include;\n            if (include) {\n                if (typeof (include) !== 'string') {\n                    throw monarchCommon.createError(lexer, 'an \\'include\\' attribute must be a string at: ' + state);\n                }\n                if (include[0] === '@') {\n                    include = include.substr(1); // peel off starting @\n                }\n                if (!json.tokenizer[include]) {\n                    throw monarchCommon.createError(lexer, 'include target \\'' + include + '\\' is not defined at: ' + state);\n                }\n                addRules(state + '.' + include, newrules, json.tokenizer[include]);\n            }\n            else {\n                const newrule = new Rule(state);\n                // Set up new rule attributes\n                if (Array.isArray(rule) && rule.length >= 1 && rule.length <= 3) {\n                    newrule.setRegex(lexerMin, rule[0]);\n                    if (rule.length >= 3) {\n                        if (typeof (rule[1]) === 'string') {\n                            newrule.setAction(lexerMin, { token: rule[1], next: rule[2] });\n                        }\n                        else if (typeof (rule[1]) === 'object') {\n                            const rule1 = rule[1];\n                            rule1.next = rule[2];\n                            newrule.setAction(lexerMin, rule1);\n                        }\n                        else {\n                            throw monarchCommon.createError(lexer, 'a next state as the last element of a rule can only be given if the action is either an object or a string, at: ' + state);\n                        }\n                    }\n                    else {\n                        newrule.setAction(lexerMin, rule[1]);\n                    }\n                }\n                else {\n                    if (!rule.regex) {\n                        throw monarchCommon.createError(lexer, 'a rule must either be an array, or an object with a \\'regex\\' or \\'include\\' field at: ' + state);\n                    }\n                    if (rule.name) {\n                        if (typeof rule.name === 'string') {\n                            newrule.name = rule.name;\n                        }\n                    }\n                    if (rule.matchOnlyAtStart) {\n                        newrule.matchOnlyAtLineStart = bool(rule.matchOnlyAtLineStart, false);\n                    }\n                    newrule.setRegex(lexerMin, rule.regex);\n                    newrule.setAction(lexerMin, rule.action);\n                }\n                newrules.push(newrule);\n            }\n        }\n    }\n    // compile the tokenizer rules\n    if (!json.tokenizer || typeof (json.tokenizer) !== 'object') {\n        throw monarchCommon.createError(lexer, 'a language definition must define the \\'tokenizer\\' attribute as an object');\n    }\n    lexer.tokenizer = [];\n    for (const key in json.tokenizer) {\n        if (json.tokenizer.hasOwnProperty(key)) {\n            if (!lexer.start) {\n                lexer.start = key;\n            }\n            const rules = json.tokenizer[key];\n            lexer.tokenizer[key] = new Array();\n            addRules('tokenizer.' + key, lexer.tokenizer[key], rules);\n        }\n    }\n    lexer.usesEmbedded = lexerMin.usesEmbedded; // can be set during compileAction\n    // Set simple brackets\n    if (json.brackets) {\n        if (!(Array.isArray(json.brackets))) {\n            throw monarchCommon.createError(lexer, 'the \\'brackets\\' attribute must be defined as an array');\n        }\n    }\n    else {\n        json.brackets = [\n            { open: '{', close: '}', token: 'delimiter.curly' },\n            { open: '[', close: ']', token: 'delimiter.square' },\n            { open: '(', close: ')', token: 'delimiter.parenthesis' },\n            { open: '<', close: '>', token: 'delimiter.angle' }\n        ];\n    }\n    const brackets = [];\n    for (const el of json.brackets) {\n        let desc = el;\n        if (desc && Array.isArray(desc) && desc.length === 3) {\n            desc = { token: desc[2], open: desc[0], close: desc[1] };\n        }\n        if (desc.open === desc.close) {\n            throw monarchCommon.createError(lexer, 'open and close brackets in a \\'brackets\\' attribute must be different: ' + desc.open +\n                '\\n hint: use the \\'bracket\\' attribute if matching on equal brackets is required.');\n        }\n        if (typeof desc.open === 'string' && typeof desc.token === 'string' && typeof desc.close === 'string') {\n            brackets.push({\n                token: desc.token + lexer.tokenPostfix,\n                open: monarchCommon.fixCase(lexer, desc.open),\n                close: monarchCommon.fixCase(lexer, desc.close)\n            });\n        }\n        else {\n            throw monarchCommon.createError(lexer, 'every element in the \\'brackets\\' array must be a \\'{open,close,token}\\' object or array');\n        }\n    }\n    lexer.brackets = brackets;\n    // Disable throw so the syntax highlighter goes, no matter what\n    lexer.noThrow = true;\n    return lexer;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport { Color } from '../../../base/common/color.js';\nimport { Range } from '../../common/core/range.js';\nimport * as languages from '../../common/languages.js';\nimport { ILanguageConfigurationService } from '../../common/languages/languageConfigurationRegistry.js';\nimport { ModesRegistry } from '../../common/languages/modesRegistry.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport * as standaloneEnums from '../../common/standalone/standaloneEnums.js';\nimport { StandaloneServices } from './standaloneServices.js';\nimport { compile } from '../common/monarch/monarchCompile.js';\nimport { MonarchTokenizer } from '../common/monarch/monarchLexer.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { ILanguageFeaturesService } from '../../common/services/languageFeatures.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\n/**\n * Register information about a new language.\n */\nexport function register(language) {\n    // Intentionally using the `ModesRegistry` here to avoid\n    // instantiating services too quickly in the standalone editor.\n    ModesRegistry.registerLanguage(language);\n}\n/**\n * Get the information of all the registered languages.\n */\nexport function getLanguages() {\n    let result = [];\n    result = result.concat(ModesRegistry.getLanguages());\n    return result;\n}\nexport function getEncodedLanguageId(languageId) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    return languageService.languageIdCodec.encodeLanguageId(languageId);\n}\n/**\n * An event emitted when a language is associated for the first time with a text model.\n * @event\n */\nexport function onLanguage(languageId, callback) {\n    return StandaloneServices.withServices(() => {\n        const languageService = StandaloneServices.get(ILanguageService);\n        const disposable = languageService.onDidRequestRichLanguageFeatures((encounteredLanguageId) => {\n            if (encounteredLanguageId === languageId) {\n                // stop listening\n                disposable.dispose();\n                // invoke actual listener\n                callback();\n            }\n        });\n        return disposable;\n    });\n}\n/**\n * An event emitted when a language is associated for the first time with a text model or\n * whena language is encountered during the tokenization of another language.\n * @event\n */\nexport function onLanguageEncountered(languageId, callback) {\n    return StandaloneServices.withServices(() => {\n        const languageService = StandaloneServices.get(ILanguageService);\n        const disposable = languageService.onDidRequestBasicLanguageFeatures((encounteredLanguageId) => {\n            if (encounteredLanguageId === languageId) {\n                // stop listening\n                disposable.dispose();\n                // invoke actual listener\n                callback();\n            }\n        });\n        return disposable;\n    });\n}\n/**\n * Set the editing configuration for a language.\n */\nexport function setLanguageConfiguration(languageId, configuration) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    if (!languageService.isRegisteredLanguageId(languageId)) {\n        throw new Error(`Cannot set configuration for unknown language ${languageId}`);\n    }\n    const languageConfigurationService = StandaloneServices.get(ILanguageConfigurationService);\n    return languageConfigurationService.register(languageId, configuration, 100);\n}\n/**\n * @internal\n */\nexport class EncodedTokenizationSupportAdapter {\n    constructor(languageId, actual) {\n        this._languageId = languageId;\n        this._actual = actual;\n    }\n    dispose() {\n        // NOOP\n    }\n    getInitialState() {\n        return this._actual.getInitialState();\n    }\n    tokenize(line, hasEOL, state) {\n        if (typeof this._actual.tokenize === 'function') {\n            return TokenizationSupportAdapter.adaptTokenize(this._languageId, this._actual, line, state);\n        }\n        throw new Error('Not supported!');\n    }\n    tokenizeEncoded(line, hasEOL, state) {\n        const result = this._actual.tokenizeEncoded(line, state);\n        return new languages.EncodedTokenizationResult(result.tokens, result.endState);\n    }\n}\n/**\n * @internal\n */\nexport class TokenizationSupportAdapter {\n    constructor(_languageId, _actual, _languageService, _standaloneThemeService) {\n        this._languageId = _languageId;\n        this._actual = _actual;\n        this._languageService = _languageService;\n        this._standaloneThemeService = _standaloneThemeService;\n    }\n    dispose() {\n        // NOOP\n    }\n    getInitialState() {\n        return this._actual.getInitialState();\n    }\n    static _toClassicTokens(tokens, language) {\n        const result = [];\n        let previousStartIndex = 0;\n        for (let i = 0, len = tokens.length; i < len; i++) {\n            const t = tokens[i];\n            let startIndex = t.startIndex;\n            // Prevent issues stemming from a buggy external tokenizer.\n            if (i === 0) {\n                // Force first token to start at first index!\n                startIndex = 0;\n            }\n            else if (startIndex < previousStartIndex) {\n                // Force tokens to be after one another!\n                startIndex = previousStartIndex;\n            }\n            result[i] = new languages.Token(startIndex, t.scopes, language);\n            previousStartIndex = startIndex;\n        }\n        return result;\n    }\n    static adaptTokenize(language, actual, line, state) {\n        const actualResult = actual.tokenize(line, state);\n        const tokens = TokenizationSupportAdapter._toClassicTokens(actualResult.tokens, language);\n        let endState;\n        // try to save an object if possible\n        if (actualResult.endState.equals(state)) {\n            endState = state;\n        }\n        else {\n            endState = actualResult.endState;\n        }\n        return new languages.TokenizationResult(tokens, endState);\n    }\n    tokenize(line, hasEOL, state) {\n        return TokenizationSupportAdapter.adaptTokenize(this._languageId, this._actual, line, state);\n    }\n    _toBinaryTokens(languageIdCodec, tokens) {\n        const languageId = languageIdCodec.encodeLanguageId(this._languageId);\n        const tokenTheme = this._standaloneThemeService.getColorTheme().tokenTheme;\n        const result = [];\n        let resultLen = 0;\n        let previousStartIndex = 0;\n        for (let i = 0, len = tokens.length; i < len; i++) {\n            const t = tokens[i];\n            const metadata = tokenTheme.match(languageId, t.scopes) | 1024 /* MetadataConsts.BALANCED_BRACKETS_MASK */;\n            if (resultLen > 0 && result[resultLen - 1] === metadata) {\n                // same metadata\n                continue;\n            }\n            let startIndex = t.startIndex;\n            // Prevent issues stemming from a buggy external tokenizer.\n            if (i === 0) {\n                // Force first token to start at first index!\n                startIndex = 0;\n            }\n            else if (startIndex < previousStartIndex) {\n                // Force tokens to be after one another!\n                startIndex = previousStartIndex;\n            }\n            result[resultLen++] = startIndex;\n            result[resultLen++] = metadata;\n            previousStartIndex = startIndex;\n        }\n        const actualResult = new Uint32Array(resultLen);\n        for (let i = 0; i < resultLen; i++) {\n            actualResult[i] = result[i];\n        }\n        return actualResult;\n    }\n    tokenizeEncoded(line, hasEOL, state) {\n        const actualResult = this._actual.tokenize(line, state);\n        const tokens = this._toBinaryTokens(this._languageService.languageIdCodec, actualResult.tokens);\n        let endState;\n        // try to save an object if possible\n        if (actualResult.endState.equals(state)) {\n            endState = state;\n        }\n        else {\n            endState = actualResult.endState;\n        }\n        return new languages.EncodedTokenizationResult(tokens, endState);\n    }\n}\nfunction isATokensProvider(provider) {\n    return (typeof provider.getInitialState === 'function');\n}\nfunction isEncodedTokensProvider(provider) {\n    return 'tokenizeEncoded' in provider;\n}\nfunction isThenable(obj) {\n    return obj && typeof obj.then === 'function';\n}\n/**\n * Change the color map that is used for token colors.\n * Supported formats (hex): #RRGGBB, $RRGGBBAA, #RGB, #RGBA\n */\nexport function setColorMap(colorMap) {\n    const standaloneThemeService = StandaloneServices.get(IStandaloneThemeService);\n    if (colorMap) {\n        const result = [null];\n        for (let i = 1, len = colorMap.length; i < len; i++) {\n            result[i] = Color.fromHex(colorMap[i]);\n        }\n        standaloneThemeService.setColorMapOverride(result);\n    }\n    else {\n        standaloneThemeService.setColorMapOverride(null);\n    }\n}\n/**\n * @internal\n */\nfunction createTokenizationSupportAdapter(languageId, provider) {\n    if (isEncodedTokensProvider(provider)) {\n        return new EncodedTokenizationSupportAdapter(languageId, provider);\n    }\n    else {\n        return new TokenizationSupportAdapter(languageId, provider, StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService));\n    }\n}\n/**\n * Register a tokens provider factory for a language. This tokenizer will be exclusive with a tokenizer\n * set using `setTokensProvider` or one created using `setMonarchTokensProvider`, but will work together\n * with a tokens provider set using `registerDocumentSemanticTokensProvider` or `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function registerTokensProviderFactory(languageId, factory) {\n    const adaptedFactory = new languages.LazyTokenizationSupport(() => __awaiter(this, void 0, void 0, function* () {\n        const result = yield Promise.resolve(factory.create());\n        if (!result) {\n            return null;\n        }\n        if (isATokensProvider(result)) {\n            return createTokenizationSupportAdapter(languageId, result);\n        }\n        return new MonarchTokenizer(StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService), languageId, compile(languageId, result), StandaloneServices.get(IConfigurationService));\n    }));\n    return languages.TokenizationRegistry.registerFactory(languageId, adaptedFactory);\n}\n/**\n * Set the tokens provider for a language (manual implementation). This tokenizer will be exclusive\n * with a tokenizer created using `setMonarchTokensProvider`, or with `registerTokensProviderFactory`,\n * but will work together with a tokens provider set using `registerDocumentSemanticTokensProvider`\n * or `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function setTokensProvider(languageId, provider) {\n    const languageService = StandaloneServices.get(ILanguageService);\n    if (!languageService.isRegisteredLanguageId(languageId)) {\n        throw new Error(`Cannot set tokens provider for unknown language ${languageId}`);\n    }\n    if (isThenable(provider)) {\n        return registerTokensProviderFactory(languageId, { create: () => provider });\n    }\n    return languages.TokenizationRegistry.register(languageId, createTokenizationSupportAdapter(languageId, provider));\n}\n/**\n * Set the tokens provider for a language (monarch implementation). This tokenizer will be exclusive\n * with a tokenizer set using `setTokensProvider`, or with `registerTokensProviderFactory`, but will\n * work together with a tokens provider set using `registerDocumentSemanticTokensProvider` or\n * `registerDocumentRangeSemanticTokensProvider`.\n */\nexport function setMonarchTokensProvider(languageId, languageDef) {\n    const create = (languageDef) => {\n        return new MonarchTokenizer(StandaloneServices.get(ILanguageService), StandaloneServices.get(IStandaloneThemeService), languageId, compile(languageId, languageDef), StandaloneServices.get(IConfigurationService));\n    };\n    if (isThenable(languageDef)) {\n        return registerTokensProviderFactory(languageId, { create: () => languageDef });\n    }\n    return languages.TokenizationRegistry.register(languageId, create(languageDef));\n}\n/**\n * Register a reference provider (used by e.g. reference search).\n */\nexport function registerReferenceProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.referenceProvider.register(languageSelector, provider);\n}\n/**\n * Register a rename provider (used by e.g. rename symbol).\n */\nexport function registerRenameProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.renameProvider.register(languageSelector, provider);\n}\n/**\n * Register a signature help provider (used by e.g. parameter hints).\n */\nexport function registerSignatureHelpProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.signatureHelpProvider.register(languageSelector, provider);\n}\n/**\n * Register a hover provider (used by e.g. editor hover).\n */\nexport function registerHoverProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.hoverProvider.register(languageSelector, {\n        provideHover: (model, position, token) => {\n            const word = model.getWordAtPosition(position);\n            return Promise.resolve(provider.provideHover(model, position, token)).then((value) => {\n                if (!value) {\n                    return undefined;\n                }\n                if (!value.range && word) {\n                    value.range = new Range(position.lineNumber, word.startColumn, position.lineNumber, word.endColumn);\n                }\n                if (!value.range) {\n                    value.range = new Range(position.lineNumber, position.column, position.lineNumber, position.column);\n                }\n                return value;\n            });\n        }\n    });\n}\n/**\n * Register a document symbol provider (used by e.g. outline).\n */\nexport function registerDocumentSymbolProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentSymbolProvider.register(languageSelector, provider);\n}\n/**\n * Register a document highlight provider (used by e.g. highlight occurrences).\n */\nexport function registerDocumentHighlightProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentHighlightProvider.register(languageSelector, provider);\n}\n/**\n * Register an linked editing range provider.\n */\nexport function registerLinkedEditingRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.linkedEditingRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a definition provider (used by e.g. go to definition).\n */\nexport function registerDefinitionProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.definitionProvider.register(languageSelector, provider);\n}\n/**\n * Register a implementation provider (used by e.g. go to implementation).\n */\nexport function registerImplementationProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.implementationProvider.register(languageSelector, provider);\n}\n/**\n * Register a type definition provider (used by e.g. go to type definition).\n */\nexport function registerTypeDefinitionProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.typeDefinitionProvider.register(languageSelector, provider);\n}\n/**\n * Register a code lens provider (used by e.g. inline code lenses).\n */\nexport function registerCodeLensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.codeLensProvider.register(languageSelector, provider);\n}\n/**\n * Register a code action provider (used by e.g. quick fix).\n */\nexport function registerCodeActionProvider(languageSelector, provider, metadata) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.codeActionProvider.register(languageSelector, {\n        providedCodeActionKinds: metadata === null || metadata === void 0 ? void 0 : metadata.providedCodeActionKinds,\n        documentation: metadata === null || metadata === void 0 ? void 0 : metadata.documentation,\n        provideCodeActions: (model, range, context, token) => {\n            const markerService = StandaloneServices.get(IMarkerService);\n            const markers = markerService.read({ resource: model.uri }).filter(m => {\n                return Range.areIntersectingOrTouching(m, range);\n            });\n            return provider.provideCodeActions(model, range, { markers, only: context.only, trigger: context.trigger }, token);\n        },\n        resolveCodeAction: provider.resolveCodeAction\n    });\n}\n/**\n * Register a formatter that can handle only entire models.\n */\nexport function registerDocumentFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a formatter that can handle a range inside a model.\n */\nexport function registerDocumentRangeFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentRangeFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a formatter than can do formatting as the user types.\n */\nexport function registerOnTypeFormattingEditProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.onTypeFormattingEditProvider.register(languageSelector, provider);\n}\n/**\n * Register a link provider that can find links in text.\n */\nexport function registerLinkProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.linkProvider.register(languageSelector, provider);\n}\n/**\n * Register a completion item provider (use by e.g. suggestions).\n */\nexport function registerCompletionItemProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.completionProvider.register(languageSelector, provider);\n}\n/**\n * Register a document color provider (used by Color Picker, Color Decorator).\n */\nexport function registerColorProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.colorProvider.register(languageSelector, provider);\n}\n/**\n * Register a folding range provider\n */\nexport function registerFoldingRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.foldingRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a declaration provider\n */\nexport function registerDeclarationProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.declarationProvider.register(languageSelector, provider);\n}\n/**\n * Register a selection range provider\n */\nexport function registerSelectionRangeProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.selectionRangeProvider.register(languageSelector, provider);\n}\n/**\n * Register a document semantic tokens provider. A semantic tokens provider will complement and enhance a\n * simple top-down tokenizer. Simple top-down tokenizers can be set either via `setMonarchTokensProvider`\n * or `setTokensProvider`.\n *\n * For the best user experience, register both a semantic tokens provider and a top-down tokenizer.\n */\nexport function registerDocumentSemanticTokensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentSemanticTokensProvider.register(languageSelector, provider);\n}\n/**\n * Register a document range semantic tokens provider. A semantic tokens provider will complement and enhance a\n * simple top-down tokenizer. Simple top-down tokenizers can be set either via `setMonarchTokensProvider`\n * or `setTokensProvider`.\n *\n * For the best user experience, register both a semantic tokens provider and a top-down tokenizer.\n */\nexport function registerDocumentRangeSemanticTokensProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.documentRangeSemanticTokensProvider.register(languageSelector, provider);\n}\n/**\n * Register an inline completions provider.\n */\nexport function registerInlineCompletionsProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.inlineCompletionsProvider.register(languageSelector, provider);\n}\n/**\n * Register an inlay hints provider.\n */\nexport function registerInlayHintsProvider(languageSelector, provider) {\n    const languageFeaturesService = StandaloneServices.get(ILanguageFeaturesService);\n    return languageFeaturesService.inlayHintsProvider.register(languageSelector, provider);\n}\n/**\n * @internal\n */\nexport function createMonacoLanguagesAPI() {\n    return {\n        register: register,\n        getLanguages: getLanguages,\n        onLanguage: onLanguage,\n        onLanguageEncountered: onLanguageEncountered,\n        getEncodedLanguageId: getEncodedLanguageId,\n        // provider methods\n        setLanguageConfiguration: setLanguageConfiguration,\n        setColorMap: setColorMap,\n        registerTokensProviderFactory: registerTokensProviderFactory,\n        setTokensProvider: setTokensProvider,\n        setMonarchTokensProvider: setMonarchTokensProvider,\n        registerReferenceProvider: registerReferenceProvider,\n        registerRenameProvider: registerRenameProvider,\n        registerCompletionItemProvider: registerCompletionItemProvider,\n        registerSignatureHelpProvider: registerSignatureHelpProvider,\n        registerHoverProvider: registerHoverProvider,\n        registerDocumentSymbolProvider: registerDocumentSymbolProvider,\n        registerDocumentHighlightProvider: registerDocumentHighlightProvider,\n        registerLinkedEditingRangeProvider: registerLinkedEditingRangeProvider,\n        registerDefinitionProvider: registerDefinitionProvider,\n        registerImplementationProvider: registerImplementationProvider,\n        registerTypeDefinitionProvider: registerTypeDefinitionProvider,\n        registerCodeLensProvider: registerCodeLensProvider,\n        registerCodeActionProvider: registerCodeActionProvider,\n        registerDocumentFormattingEditProvider: registerDocumentFormattingEditProvider,\n        registerDocumentRangeFormattingEditProvider: registerDocumentRangeFormattingEditProvider,\n        registerOnTypeFormattingEditProvider: registerOnTypeFormattingEditProvider,\n        registerLinkProvider: registerLinkProvider,\n        registerColorProvider: registerColorProvider,\n        registerFoldingRangeProvider: registerFoldingRangeProvider,\n        registerDeclarationProvider: registerDeclarationProvider,\n        registerSelectionRangeProvider: registerSelectionRangeProvider,\n        registerDocumentSemanticTokensProvider: registerDocumentSemanticTokensProvider,\n        registerDocumentRangeSemanticTokensProvider: registerDocumentRangeSemanticTokensProvider,\n        registerInlineCompletionsProvider: registerInlineCompletionsProvider,\n        registerInlayHintsProvider: registerInlayHintsProvider,\n        // enums\n        DocumentHighlightKind: standaloneEnums.DocumentHighlightKind,\n        CompletionItemKind: standaloneEnums.CompletionItemKind,\n        CompletionItemTag: standaloneEnums.CompletionItemTag,\n        CompletionItemInsertTextRule: standaloneEnums.CompletionItemInsertTextRule,\n        SymbolKind: standaloneEnums.SymbolKind,\n        SymbolTag: standaloneEnums.SymbolTag,\n        IndentAction: standaloneEnums.IndentAction,\n        CompletionTriggerKind: standaloneEnums.CompletionTriggerKind,\n        SignatureHelpTriggerKind: standaloneEnums.SignatureHelpTriggerKind,\n        InlayHintKind: standaloneEnums.InlayHintKind,\n        InlineCompletionTriggerKind: standaloneEnums.InlineCompletionTriggerKind,\n        CodeActionTriggerType: standaloneEnums.CodeActionTriggerType,\n        // classes\n        FoldingRangeKind: languages.FoldingRangeKind,\n        SelectedSuggestionInfo: languages.SelectedSuggestionInfo,\n    };\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as dom from '../../../base/browser/dom.js';\nimport { Event } from '../../../base/common/event.js';\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nlet StandaloneLayoutService = class StandaloneLayoutService {\n    get dimension() {\n        if (!this._dimension) {\n            this._dimension = dom.getClientArea(window.document.body);\n        }\n        return this._dimension;\n    }\n    get hasContainer() {\n        return false;\n    }\n    get container() {\n        // On a page, multiple editors can be created. Therefore, there are multiple containers, not\n        // just a single one. Please use `ICodeEditorService` to get the current focused code editor\n        // and use its container if necessary. You can also instantiate `EditorScopedLayoutService`\n        // which implements `ILayoutService` but is not a part of the service collection because\n        // it is code editor instance specific.\n        throw new Error(`ILayoutService.container is not available in the standalone editor!`);\n    }\n    focus() {\n        var _a;\n        (_a = this._codeEditorService.getFocusedCodeEditor()) === null || _a === void 0 ? void 0 : _a.focus();\n    }\n    constructor(_codeEditorService) {\n        this._codeEditorService = _codeEditorService;\n        this.onDidLayout = Event.None;\n        this.offset = { top: 0, quickPickTop: 0 };\n    }\n};\nStandaloneLayoutService = __decorate([\n    __param(0, ICodeEditorService)\n], StandaloneLayoutService);\nlet EditorScopedLayoutService = class EditorScopedLayoutService extends StandaloneLayoutService {\n    get hasContainer() {\n        return false;\n    }\n    get container() {\n        return this._container;\n    }\n    constructor(_container, codeEditorService) {\n        super(codeEditorService);\n        this._container = _container;\n    }\n};\nEditorScopedLayoutService = __decorate([\n    __param(1, ICodeEditorService)\n], EditorScopedLayoutService);\nexport { EditorScopedLayoutService };\nregisterSingleton(ILayoutService, StandaloneLayoutService, 1 /* InstantiationType.Delayed */);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nimport '../../common/languages/languageConfigurationRegistry.js';\nimport './standaloneCodeEditorService.js';\nimport './standaloneLayoutService.js';\nimport '../../../platform/undoRedo/common/undoRedoService.js';\nimport '../../common/services/languageFeatureDebounce.js';\nimport '../../common/services/semanticTokensStylingService.js';\nimport '../../common/services/languageFeaturesService.js';\nimport * as strings from '../../../base/common/strings.js';\nimport * as dom from '../../../base/browser/dom.js';\nimport { StandardKeyboardEvent } from '../../../base/browser/keyboardEvent.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { KeyCodeChord, decodeKeybinding } from '../../../base/common/keybindings.js';\nimport { ImmortalReference, toDisposable, DisposableStore, Disposable, combinedDisposable } from '../../../base/common/lifecycle.js';\nimport { OS, isLinux, isMacintosh } from '../../../base/common/platform.js';\nimport Severity from '../../../base/common/severity.js';\nimport { URI } from '../../../base/common/uri.js';\nimport { IBulkEditService, ResourceEdit, ResourceTextEdit } from '../../browser/services/bulkEditService.js';\nimport { isDiffEditorConfigurationKey, isEditorConfigurationKey } from '../../common/config/editorConfigurationSchema.js';\nimport { EditOperation } from '../../common/core/editOperation.js';\nimport { Position as Pos } from '../../common/core/position.js';\nimport { Range } from '../../common/core/range.js';\nimport { IModelService } from '../../common/services/model.js';\nimport { ITextModelService } from '../../common/services/resolverService.js';\nimport { ITextResourceConfigurationService, ITextResourcePropertiesService } from '../../common/services/textResourceConfiguration.js';\nimport { CommandsRegistry, ICommandService } from '../../../platform/commands/common/commands.js';\nimport { IConfigurationService } from '../../../platform/configuration/common/configuration.js';\nimport { Configuration, ConfigurationModel, ConfigurationChangeEvent } from '../../../platform/configuration/common/configurationModels.js';\nimport { IContextKeyService } from '../../../platform/contextkey/common/contextkey.js';\nimport { IDialogService } from '../../../platform/dialogs/common/dialogs.js';\nimport { createDecorator, IInstantiationService } from '../../../platform/instantiation/common/instantiation.js';\nimport { AbstractKeybindingService } from '../../../platform/keybinding/common/abstractKeybindingService.js';\nimport { IKeybindingService } from '../../../platform/keybinding/common/keybinding.js';\nimport { KeybindingResolver } from '../../../platform/keybinding/common/keybindingResolver.js';\nimport { KeybindingsRegistry } from '../../../platform/keybinding/common/keybindingsRegistry.js';\nimport { ResolvedKeybindingItem } from '../../../platform/keybinding/common/resolvedKeybindingItem.js';\nimport { USLayoutResolvedKeybinding } from '../../../platform/keybinding/common/usLayoutResolvedKeybinding.js';\nimport { ILabelService } from '../../../platform/label/common/label.js';\nimport { INotificationService, NoOpNotification } from '../../../platform/notification/common/notification.js';\nimport { IEditorProgressService, IProgressService } from '../../../platform/progress/common/progress.js';\nimport { ITelemetryService } from '../../../platform/telemetry/common/telemetry.js';\nimport { IWorkspaceContextService, WorkspaceFolder, STANDALONE_EDITOR_WORKSPACE_ID } from '../../../platform/workspace/common/workspace.js';\nimport { ILayoutService } from '../../../platform/layout/browser/layoutService.js';\nimport { StandaloneServicesNLS } from '../../common/standaloneStrings.js';\nimport { basename } from '../../../base/common/resources.js';\nimport { ICodeEditorService } from '../../browser/services/codeEditorService.js';\nimport { ConsoleLogger, ILogService } from '../../../platform/log/common/log.js';\nimport { IWorkspaceTrustManagementService } from '../../../platform/workspace/common/workspaceTrust.js';\nimport { IContextMenuService, IContextViewService } from '../../../platform/contextview/browser/contextView.js';\nimport { ContextViewService } from '../../../platform/contextview/browser/contextViewService.js';\nimport { LanguageService } from '../../common/services/languageService.js';\nimport { ContextMenuService } from '../../../platform/contextview/browser/contextMenuService.js';\nimport { getSingletonServiceDescriptors, registerSingleton } from '../../../platform/instantiation/common/extensions.js';\nimport { OpenerService } from '../../browser/services/openerService.js';\nimport { IEditorWorkerService } from '../../common/services/editorWorker.js';\nimport { EditorWorkerService } from '../../browser/services/editorWorkerService.js';\nimport { ILanguageService } from '../../common/languages/language.js';\nimport { MarkerDecorationsService } from '../../common/services/markerDecorationsService.js';\nimport { IMarkerDecorationsService } from '../../common/services/markerDecorations.js';\nimport { ModelService } from '../../common/services/modelService.js';\nimport { StandaloneQuickInputService } from './quickInput/standaloneQuickInputService.js';\nimport { StandaloneThemeService } from './standaloneThemeService.js';\nimport { IStandaloneThemeService } from '../common/standaloneTheme.js';\nimport { AccessibilityService } from '../../../platform/accessibility/browser/accessibilityService.js';\nimport { IAccessibilityService } from '../../../platform/accessibility/common/accessibility.js';\nimport { IMenuService } from '../../../platform/actions/common/actions.js';\nimport { MenuService } from '../../../platform/actions/common/menuService.js';\nimport { BrowserClipboardService } from '../../../platform/clipboard/browser/clipboardService.js';\nimport { IClipboardService } from '../../../platform/clipboard/common/clipboardService.js';\nimport { ContextKeyService } from '../../../platform/contextkey/browser/contextKeyService.js';\nimport { SyncDescriptor } from '../../../platform/instantiation/common/descriptors.js';\nimport { InstantiationService } from '../../../platform/instantiation/common/instantiationService.js';\nimport { ServiceCollection } from '../../../platform/instantiation/common/serviceCollection.js';\nimport { IListService, ListService } from '../../../platform/list/browser/listService.js';\nimport { IMarkerService } from '../../../platform/markers/common/markers.js';\nimport { MarkerService } from '../../../platform/markers/common/markerService.js';\nimport { IOpenerService } from '../../../platform/opener/common/opener.js';\nimport { IQuickInputService } from '../../../platform/quickinput/common/quickInput.js';\nimport { IStorageService, InMemoryStorageService } from '../../../platform/storage/common/storage.js';\nimport { DefaultConfiguration } from '../../../platform/configuration/common/configurations.js';\nimport { IAudioCueService } from '../../../platform/audioCues/browser/audioCueService.js';\nimport { LogService } from '../../../platform/log/common/logService.js';\nimport { getEditorFeatures } from '../../common/editorFeatures.js';\nimport { onUnexpectedError } from '../../../base/common/errors.js';\nimport { IEnvironmentService } from '../../../platform/environment/common/environment.js';\nclass SimpleModel {\n    constructor(model) {\n        this.disposed = false;\n        this.model = model;\n        this._onWillDispose = new Emitter();\n    }\n    get textEditorModel() {\n        return this.model;\n    }\n    dispose() {\n        this.disposed = true;\n        this._onWillDispose.fire();\n    }\n}\nlet StandaloneTextModelService = class StandaloneTextModelService {\n    constructor(modelService) {\n        this.modelService = modelService;\n    }\n    createModelReference(resource) {\n        const model = this.modelService.getModel(resource);\n        if (!model) {\n            return Promise.reject(new Error(`Model not found`));\n        }\n        return Promise.resolve(new ImmortalReference(new SimpleModel(model)));\n    }\n};\nStandaloneTextModelService = __decorate([\n    __param(0, IModelService)\n], StandaloneTextModelService);\nclass StandaloneEditorProgressService {\n    show() {\n        return StandaloneEditorProgressService.NULL_PROGRESS_RUNNER;\n    }\n    showWhile(promise, delay) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield promise;\n        });\n    }\n}\nStandaloneEditorProgressService.NULL_PROGRESS_RUNNER = {\n    done: () => { },\n    total: () => { },\n    worked: () => { }\n};\nclass StandaloneProgressService {\n    withProgress(_options, task, onDidCancel) {\n        return task({\n            report: () => { },\n        });\n    }\n}\nclass StandaloneEnvironmentService {\n    constructor() {\n        this.isExtensionDevelopment = false;\n        this.isBuilt = false;\n    }\n}\nclass StandaloneDialogService {\n    confirm(confirmation) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const confirmed = this.doConfirm(confirmation.message, confirmation.detail);\n            return {\n                confirmed,\n                checkboxChecked: false // unsupported\n            };\n        });\n    }\n    doConfirm(message, detail) {\n        let messageText = message;\n        if (detail) {\n            messageText = messageText + '\\n\\n' + detail;\n        }\n        return window.confirm(messageText);\n    }\n    prompt(prompt) {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function* () {\n            let result = undefined;\n            const confirmed = this.doConfirm(prompt.message, prompt.detail);\n            if (confirmed) {\n                const promptButtons = [...((_a = prompt.buttons) !== null && _a !== void 0 ? _a : [])];\n                if (prompt.cancelButton && typeof prompt.cancelButton !== 'string' && typeof prompt.cancelButton !== 'boolean') {\n                    promptButtons.push(prompt.cancelButton);\n                }\n                result = yield ((_b = promptButtons[0]) === null || _b === void 0 ? void 0 : _b.run({ checkboxChecked: false }));\n            }\n            return { result };\n        });\n    }\n    error(message, detail) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this.prompt({ type: Severity.Error, message, detail });\n        });\n    }\n}\nexport class StandaloneNotificationService {\n    info(message) {\n        return this.notify({ severity: Severity.Info, message });\n    }\n    warn(message) {\n        return this.notify({ severity: Severity.Warning, message });\n    }\n    error(error) {\n        return this.notify({ severity: Severity.Error, message: error });\n    }\n    notify(notification) {\n        switch (notification.severity) {\n            case Severity.Error:\n                console.error(notification.message);\n                break;\n            case Severity.Warning:\n                console.warn(notification.message);\n                break;\n            default:\n                console.log(notification.message);\n                break;\n        }\n        return StandaloneNotificationService.NO_OP;\n    }\n    prompt(severity, message, choices, options) {\n        return StandaloneNotificationService.NO_OP;\n    }\n    status(message, options) {\n        return Disposable.None;\n    }\n}\nStandaloneNotificationService.NO_OP = new NoOpNotification();\nlet StandaloneCommandService = class StandaloneCommandService {\n    constructor(instantiationService) {\n        this._onWillExecuteCommand = new Emitter();\n        this._onDidExecuteCommand = new Emitter();\n        this.onDidExecuteCommand = this._onDidExecuteCommand.event;\n        this._instantiationService = instantiationService;\n    }\n    executeCommand(id, ...args) {\n        const command = CommandsRegistry.getCommand(id);\n        if (!command) {\n            return Promise.reject(new Error(`command '${id}' not found`));\n        }\n        try {\n            this._onWillExecuteCommand.fire({ commandId: id, args });\n            const result = this._instantiationService.invokeFunction.apply(this._instantiationService, [command.handler, ...args]);\n            this._onDidExecuteCommand.fire({ commandId: id, args });\n            return Promise.resolve(result);\n        }\n        catch (err) {\n            return Promise.reject(err);\n        }\n    }\n};\nStandaloneCommandService = __decorate([\n    __param(0, IInstantiationService)\n], StandaloneCommandService);\nexport { StandaloneCommandService };\nlet StandaloneKeybindingService = class StandaloneKeybindingService extends AbstractKeybindingService {\n    constructor(contextKeyService, commandService, telemetryService, notificationService, logService, codeEditorService) {\n        super(contextKeyService, commandService, telemetryService, notificationService, logService);\n        this._cachedResolver = null;\n        this._dynamicKeybindings = [];\n        this._domNodeListeners = [];\n        const addContainer = (domNode) => {\n            const disposables = new DisposableStore();\n            // for standard keybindings\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_DOWN, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                const shouldPreventDefault = this._dispatch(keyEvent, keyEvent.target);\n                if (shouldPreventDefault) {\n                    keyEvent.preventDefault();\n                    keyEvent.stopPropagation();\n                }\n            }));\n            // for single modifier chord keybindings (e.g. shift shift)\n            disposables.add(dom.addDisposableListener(domNode, dom.EventType.KEY_UP, (e) => {\n                const keyEvent = new StandardKeyboardEvent(e);\n                const shouldPreventDefault = this._singleModifierDispatch(keyEvent, keyEvent.target);\n                if (shouldPreventDefault) {\n                    keyEvent.preventDefault();\n                }\n            }));\n            this._domNodeListeners.push(new DomNodeListeners(domNode, disposables));\n        };\n        const removeContainer = (domNode) => {\n            for (let i = 0; i < this._domNodeListeners.length; i++) {\n                const domNodeListeners = this._domNodeListeners[i];\n                if (domNodeListeners.domNode === domNode) {\n                    this._domNodeListeners.splice(i, 1);\n                    domNodeListeners.dispose();\n                }\n            }\n        };\n        const addCodeEditor = (codeEditor) => {\n            if (codeEditor.getOption(60 /* EditorOption.inDiffEditor */)) {\n                return;\n            }\n            addContainer(codeEditor.getContainerDomNode());\n        };\n        const removeCodeEditor = (codeEditor) => {\n            if (codeEditor.getOption(60 /* EditorOption.inDiffEditor */)) {\n                return;\n            }\n            removeContainer(codeEditor.getContainerDomNode());\n        };\n        this._register(codeEditorService.onCodeEditorAdd(addCodeEditor));\n        this._register(codeEditorService.onCodeEditorRemove(removeCodeEditor));\n        codeEditorService.listCodeEditors().forEach(addCodeEditor);\n        const addDiffEditor = (diffEditor) => {\n            addContainer(diffEditor.getContainerDomNode());\n        };\n        const removeDiffEditor = (diffEditor) => {\n            removeContainer(diffEditor.getContainerDomNode());\n        };\n        this._register(codeEditorService.onDiffEditorAdd(addDiffEditor));\n        this._register(codeEditorService.onDiffEditorRemove(removeDiffEditor));\n        codeEditorService.listDiffEditors().forEach(addDiffEditor);\n    }\n    addDynamicKeybinding(command, keybinding, handler, when) {\n        return combinedDisposable(CommandsRegistry.registerCommand(command, handler), this.addDynamicKeybindings([{\n                keybinding,\n                command,\n                when\n            }]));\n    }\n    addDynamicKeybindings(rules) {\n        const entries = rules.map((rule) => {\n            var _a;\n            const keybinding = decodeKeybinding(rule.keybinding, OS);\n            return {\n                keybinding,\n                command: (_a = rule.command) !== null && _a !== void 0 ? _a : null,\n                commandArgs: rule.commandArgs,\n                when: rule.when,\n                weight1: 1000,\n                weight2: 0,\n                extensionId: null,\n                isBuiltinExtension: false\n            };\n        });\n        this._dynamicKeybindings = this._dynamicKeybindings.concat(entries);\n        this.updateResolver();\n        return toDisposable(() => {\n            // Search the first entry and remove them all since they will be contiguous\n            for (let i = 0; i < this._dynamicKeybindings.length; i++) {\n                if (this._dynamicKeybindings[i] === entries[0]) {\n                    this._dynamicKeybindings.splice(i, entries.length);\n                    this.updateResolver();\n                    return;\n                }\n            }\n        });\n    }\n    updateResolver() {\n        this._cachedResolver = null;\n        this._onDidUpdateKeybindings.fire();\n    }\n    _getResolver() {\n        if (!this._cachedResolver) {\n            const defaults = this._toNormalizedKeybindingItems(KeybindingsRegistry.getDefaultKeybindings(), true);\n            const overrides = this._toNormalizedKeybindingItems(this._dynamicKeybindings, false);\n            this._cachedResolver = new KeybindingResolver(defaults, overrides, (str) => this._log(str));\n        }\n        return this._cachedResolver;\n    }\n    _documentHasFocus() {\n        return document.hasFocus();\n    }\n    _toNormalizedKeybindingItems(items, isDefault) {\n        const result = [];\n        let resultLen = 0;\n        for (const item of items) {\n            const when = item.when || undefined;\n            const keybinding = item.keybinding;\n            if (!keybinding) {\n                // This might be a removal keybinding item in user settings => accept it\n                result[resultLen++] = new ResolvedKeybindingItem(undefined, item.command, item.commandArgs, when, isDefault, null, false);\n            }\n            else {\n                const resolvedKeybindings = USLayoutResolvedKeybinding.resolveKeybinding(keybinding, OS);\n                for (const resolvedKeybinding of resolvedKeybindings) {\n                    result[resultLen++] = new ResolvedKeybindingItem(resolvedKeybinding, item.command, item.commandArgs, when, isDefault, null, false);\n                }\n            }\n        }\n        return result;\n    }\n    resolveKeyboardEvent(keyboardEvent) {\n        const chord = new KeyCodeChord(keyboardEvent.ctrlKey, keyboardEvent.shiftKey, keyboardEvent.altKey, keyboardEvent.metaKey, keyboardEvent.keyCode);\n        return new USLayoutResolvedKeybinding([chord], OS);\n    }\n};\nStandaloneKeybindingService = __decorate([\n    __param(0, IContextKeyService),\n    __param(1, ICommandService),\n    __param(2, ITelemetryService),\n    __param(3, INotificationService),\n    __param(4, ILogService),\n    __param(5, ICodeEditorService)\n], StandaloneKeybindingService);\nexport { StandaloneKeybindingService };\nclass DomNodeListeners extends Disposable {\n    constructor(domNode, disposables) {\n        super();\n        this.domNode = domNode;\n        this._register(disposables);\n    }\n}\nfunction isConfigurationOverrides(thing) {\n    return thing\n        && typeof thing === 'object'\n        && (!thing.overrideIdentifier || typeof thing.overrideIdentifier === 'string')\n        && (!thing.resource || thing.resource instanceof URI);\n}\nexport class StandaloneConfigurationService {\n    constructor() {\n        this._onDidChangeConfiguration = new Emitter();\n        this.onDidChangeConfiguration = this._onDidChangeConfiguration.event;\n        const defaultConfiguration = new DefaultConfiguration();\n        this._configuration = new Configuration(defaultConfiguration.reload(), new ConfigurationModel(), new ConfigurationModel(), new ConfigurationModel());\n        defaultConfiguration.dispose();\n    }\n    getValue(arg1, arg2) {\n        const section = typeof arg1 === 'string' ? arg1 : undefined;\n        const overrides = isConfigurationOverrides(arg1) ? arg1 : isConfigurationOverrides(arg2) ? arg2 : {};\n        return this._configuration.getValue(section, overrides, undefined);\n    }\n    updateValues(values) {\n        const previous = { data: this._configuration.toData() };\n        const changedKeys = [];\n        for (const entry of values) {\n            const [key, value] = entry;\n            if (this.getValue(key) === value) {\n                continue;\n            }\n            this._configuration.updateValue(key, value);\n            changedKeys.push(key);\n        }\n        if (changedKeys.length > 0) {\n            const configurationChangeEvent = new ConfigurationChangeEvent({ keys: changedKeys, overrides: [] }, previous, this._configuration);\n            configurationChangeEvent.source = 8 /* ConfigurationTarget.MEMORY */;\n            configurationChangeEvent.sourceConfig = null;\n            this._onDidChangeConfiguration.fire(configurationChangeEvent);\n        }\n        return Promise.resolve();\n    }\n    updateValue(key, value, arg3, arg4) {\n        return this.updateValues([[key, value]]);\n    }\n    inspect(key, options = {}) {\n        return this._configuration.inspect(key, options, undefined);\n    }\n}\nlet StandaloneResourceConfigurationService = class StandaloneResourceConfigurationService {\n    constructor(configurationService, modelService, languageService) {\n        this.configurationService = configurationService;\n        this.modelService = modelService;\n        this.languageService = languageService;\n        this._onDidChangeConfiguration = new Emitter();\n        this.configurationService.onDidChangeConfiguration((e) => {\n            this._onDidChangeConfiguration.fire({ affectedKeys: e.affectedKeys, affectsConfiguration: (resource, configuration) => e.affectsConfiguration(configuration) });\n        });\n    }\n    getValue(resource, arg2, arg3) {\n        const position = Pos.isIPosition(arg2) ? arg2 : null;\n        const section = position ? (typeof arg3 === 'string' ? arg3 : undefined) : (typeof arg2 === 'string' ? arg2 : undefined);\n        const language = resource ? this.getLanguage(resource, position) : undefined;\n        if (typeof section === 'undefined') {\n            return this.configurationService.getValue({\n                resource,\n                overrideIdentifier: language\n            });\n        }\n        return this.configurationService.getValue(section, {\n            resource,\n            overrideIdentifier: language\n        });\n    }\n    getLanguage(resource, position) {\n        const model = this.modelService.getModel(resource);\n        if (model) {\n            return position ? model.getLanguageIdAtPosition(position.lineNumber, position.column) : model.getLanguageId();\n        }\n        return this.languageService.guessLanguageIdByFilepathOrFirstLine(resource);\n    }\n};\nStandaloneResourceConfigurationService = __decorate([\n    __param(0, IConfigurationService),\n    __param(1, IModelService),\n    __param(2, ILanguageService)\n], StandaloneResourceConfigurationService);\nlet StandaloneResourcePropertiesService = class StandaloneResourcePropertiesService {\n    constructor(configurationService) {\n        this.configurationService = configurationService;\n    }\n    getEOL(resource, language) {\n        const eol = this.configurationService.getValue('files.eol', { overrideIdentifier: language, resource });\n        if (eol && typeof eol === 'string' && eol !== 'auto') {\n            return eol;\n        }\n        return (isLinux || isMacintosh) ? '\\n' : '\\r\\n';\n    }\n};\nStandaloneResourcePropertiesService = __decorate([\n    __param(0, IConfigurationService)\n], StandaloneResourcePropertiesService);\nclass StandaloneTelemetryService {\n    publicLog2() { }\n}\nclass StandaloneWorkspaceContextService {\n    constructor() {\n        const resource = URI.from({ scheme: StandaloneWorkspaceContextService.SCHEME, authority: 'model', path: '/' });\n        this.workspace = { id: STANDALONE_EDITOR_WORKSPACE_ID, folders: [new WorkspaceFolder({ uri: resource, name: '', index: 0 })] };\n    }\n    getWorkspace() {\n        return this.workspace;\n    }\n    getWorkspaceFolder(resource) {\n        return resource && resource.scheme === StandaloneWorkspaceContextService.SCHEME ? this.workspace.folders[0] : null;\n    }\n}\nStandaloneWorkspaceContextService.SCHEME = 'inmemory';\nexport function updateConfigurationService(configurationService, source, isDiffEditor) {\n    if (!source) {\n        return;\n    }\n    if (!(configurationService instanceof StandaloneConfigurationService)) {\n        return;\n    }\n    const toUpdate = [];\n    Object.keys(source).forEach((key) => {\n        if (isEditorConfigurationKey(key)) {\n            toUpdate.push([`editor.${key}`, source[key]]);\n        }\n        if (isDiffEditor && isDiffEditorConfigurationKey(key)) {\n            toUpdate.push([`diffEditor.${key}`, source[key]]);\n        }\n    });\n    if (toUpdate.length > 0) {\n        configurationService.updateValues(toUpdate);\n    }\n}\nlet StandaloneBulkEditService = class StandaloneBulkEditService {\n    constructor(_modelService) {\n        this._modelService = _modelService;\n        //\n    }\n    hasPreviewHandler() {\n        return false;\n    }\n    apply(editsIn, _options) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const edits = Array.isArray(editsIn) ? editsIn : ResourceEdit.convert(editsIn);\n            const textEdits = new Map();\n            for (const edit of edits) {\n                if (!(edit instanceof ResourceTextEdit)) {\n                    throw new Error('bad edit - only text edits are supported');\n                }\n                const model = this._modelService.getModel(edit.resource);\n                if (!model) {\n                    throw new Error('bad edit - model not found');\n                }\n                if (typeof edit.versionId === 'number' && model.getVersionId() !== edit.versionId) {\n                    throw new Error('bad state - model changed in the meantime');\n                }\n                let array = textEdits.get(model);\n                if (!array) {\n                    array = [];\n                    textEdits.set(model, array);\n                }\n                array.push(EditOperation.replaceMove(Range.lift(edit.textEdit.range), edit.textEdit.text));\n            }\n            let totalEdits = 0;\n            let totalFiles = 0;\n            for (const [model, edits] of textEdits) {\n                model.pushStackElement();\n                model.pushEditOperations([], edits, () => []);\n                model.pushStackElement();\n                totalFiles += 1;\n                totalEdits += edits.length;\n            }\n            return {\n                ariaSummary: strings.format(StandaloneServicesNLS.bulkEditServiceSummary, totalEdits, totalFiles),\n                isApplied: totalEdits > 0\n            };\n        });\n    }\n};\nStandaloneBulkEditService = __decorate([\n    __param(0, IModelService)\n], StandaloneBulkEditService);\nclass StandaloneUriLabelService {\n    getUriLabel(resource, options) {\n        if (resource.scheme === 'file') {\n            return resource.fsPath;\n        }\n        return resource.path;\n    }\n    getUriBasenameLabel(resource) {\n        return basename(resource);\n    }\n}\nlet StandaloneContextViewService = class StandaloneContextViewService extends ContextViewService {\n    constructor(layoutService, _codeEditorService) {\n        super(layoutService);\n        this._codeEditorService = _codeEditorService;\n    }\n    showContextView(delegate, container, shadowRoot) {\n        if (!container) {\n            const codeEditor = this._codeEditorService.getFocusedCodeEditor() || this._codeEditorService.getActiveCodeEditor();\n            if (codeEditor) {\n                container = codeEditor.getContainerDomNode();\n            }\n        }\n        return super.showContextView(delegate, container, shadowRoot);\n    }\n};\nStandaloneContextViewService = __decorate([\n    __param(0, ILayoutService),\n    __param(1, ICodeEditorService)\n], StandaloneContextViewService);\nclass StandaloneWorkspaceTrustManagementService {\n    constructor() {\n        this._neverEmitter = new Emitter();\n        this.onDidChangeTrust = this._neverEmitter.event;\n    }\n    isWorkspaceTrusted() {\n        return true;\n    }\n}\nclass StandaloneLanguageService extends LanguageService {\n    constructor() {\n        super();\n    }\n}\nclass StandaloneLogService extends LogService {\n    constructor() {\n        super(new ConsoleLogger());\n    }\n}\nlet StandaloneContextMenuService = class StandaloneContextMenuService extends ContextMenuService {\n    constructor(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService) {\n        super(telemetryService, notificationService, contextViewService, keybindingService, menuService, contextKeyService);\n        this.configure({ blockMouse: false }); // we do not want that in the standalone editor\n    }\n};\nStandaloneContextMenuService = __decorate([\n    __param(0, ITelemetryService),\n    __param(1, INotificationService),\n    __param(2, IContextViewService),\n    __param(3, IKeybindingService),\n    __param(4, IMenuService),\n    __param(5, IContextKeyService)\n], StandaloneContextMenuService);\nclass StandaloneAudioService {\n    playAudioCue(cue, allowManyInParallel) {\n        return __awaiter(this, void 0, void 0, function* () {\n        });\n    }\n}\nregisterSingleton(IConfigurationService, StandaloneConfigurationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextResourceConfigurationService, StandaloneResourceConfigurationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextResourcePropertiesService, StandaloneResourcePropertiesService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IWorkspaceContextService, StandaloneWorkspaceContextService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ILabelService, StandaloneUriLabelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITelemetryService, StandaloneTelemetryService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IDialogService, StandaloneDialogService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEnvironmentService, StandaloneEnvironmentService, 0 /* InstantiationType.Eager */);\nregisterSingleton(INotificationService, StandaloneNotificationService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMarkerService, MarkerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ILanguageService, StandaloneLanguageService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IStandaloneThemeService, StandaloneThemeService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ILogService, StandaloneLogService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IModelService, ModelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMarkerDecorationsService, MarkerDecorationsService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextKeyService, ContextKeyService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IProgressService, StandaloneProgressService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEditorProgressService, StandaloneEditorProgressService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IStorageService, InMemoryStorageService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IEditorWorkerService, EditorWorkerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IBulkEditService, StandaloneBulkEditService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IWorkspaceTrustManagementService, StandaloneWorkspaceTrustManagementService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ITextModelService, StandaloneTextModelService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IAccessibilityService, AccessibilityService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IListService, ListService, 0 /* InstantiationType.Eager */);\nregisterSingleton(ICommandService, StandaloneCommandService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IKeybindingService, StandaloneKeybindingService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IQuickInputService, StandaloneQuickInputService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextViewService, StandaloneContextViewService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IOpenerService, OpenerService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IClipboardService, BrowserClipboardService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IContextMenuService, StandaloneContextMenuService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IMenuService, MenuService, 0 /* InstantiationType.Eager */);\nregisterSingleton(IAudioCueService, StandaloneAudioService, 0 /* InstantiationType.Eager */);\n/**\n * We don't want to eagerly instantiate services because embedders get a one time chance\n * to override services when they create the first editor.\n */\nexport var StandaloneServices;\n(function (StandaloneServices) {\n    const serviceCollection = new ServiceCollection();\n    for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n        serviceCollection.set(id, descriptor);\n    }\n    const instantiationService = new InstantiationService(serviceCollection, true);\n    serviceCollection.set(IInstantiationService, instantiationService);\n    function get(serviceId) {\n        const r = serviceCollection.get(serviceId);\n        if (!r) {\n            throw new Error('Missing service ' + serviceId);\n        }\n        if (r instanceof SyncDescriptor) {\n            return instantiationService.invokeFunction((accessor) => accessor.get(serviceId));\n        }\n        else {\n            return r;\n        }\n    }\n    StandaloneServices.get = get;\n    let initialized = false;\n    const onDidInitialize = new Emitter();\n    function initialize(overrides) {\n        if (initialized) {\n            return instantiationService;\n        }\n        initialized = true;\n        // Add singletons that were registered after this module loaded\n        for (const [id, descriptor] of getSingletonServiceDescriptors()) {\n            if (!serviceCollection.get(id)) {\n                serviceCollection.set(id, descriptor);\n            }\n        }\n        // Initialize the service collection with the overrides, but only if the\n        // service was not instantiated in the meantime.\n        for (const serviceId in overrides) {\n            if (overrides.hasOwnProperty(serviceId)) {\n                const serviceIdentifier = createDecorator(serviceId);\n                const r = serviceCollection.get(serviceIdentifier);\n                if (r instanceof SyncDescriptor) {\n                    serviceCollection.set(serviceIdentifier, overrides[serviceId]);\n                }\n            }\n        }\n        // Instantiate all editor features\n        const editorFeatures = getEditorFeatures();\n        for (const feature of editorFeatures) {\n            try {\n                instantiationService.createInstance(feature);\n            }\n            catch (err) {\n                onUnexpectedError(err);\n            }\n        }\n        onDidInitialize.fire();\n        return instantiationService;\n    }\n    StandaloneServices.initialize = initialize;\n    /**\n     * Executes callback once services are initialized.\n     */\n    function withServices(callback) {\n        if (initialized) {\n            return callback();\n        }\n        const disposable = new DisposableStore();\n        const listener = disposable.add(onDidInitialize.event(() => {\n            listener.dispose();\n            disposable.add(callback());\n        }));\n        return disposable;\n    }\n    StandaloneServices.withServices = withServices;\n})(StandaloneServices || (StandaloneServices = {}));\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { editorActiveIndentGuide1, editorIndentGuide1 } from '../../common/core/editorColorRegistry.js';\nimport { editorBackground, editorForeground, editorInactiveSelection, editorSelectionHighlight } from '../../../platform/theme/common/colorRegistry.js';\n/* -------------------------------- Begin vs theme -------------------------------- */\nexport const vs = {\n    base: 'vs',\n    inherit: false,\n    rules: [\n        { token: '', foreground: '000000', background: 'fffffe' },\n        { token: 'invalid', foreground: 'cd3131' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '001188' },\n        { token: 'variable.predefined', foreground: '4864AA' },\n        { token: 'constant', foreground: 'dd0000' },\n        { token: 'comment', foreground: '008000' },\n        { token: 'number', foreground: '098658' },\n        { token: 'number.hex', foreground: '3030c0' },\n        { token: 'regexp', foreground: '800000' },\n        { token: 'annotation', foreground: '808080' },\n        { token: 'type', foreground: '008080' },\n        { token: 'delimiter', foreground: '000000' },\n        { token: 'delimiter.html', foreground: '383838' },\n        { token: 'delimiter.xml', foreground: '0000FF' },\n        { token: 'tag', foreground: '800000' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta.scss', foreground: '800000' },\n        { token: 'metatag', foreground: 'e00000' },\n        { token: 'metatag.content.html', foreground: 'FF0000' },\n        { token: 'metatag.html', foreground: '808080' },\n        { token: 'metatag.xml', foreground: '808080' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '863B00' },\n        { token: 'string.key.json', foreground: 'A31515' },\n        { token: 'string.value.json', foreground: '0451A5' },\n        { token: 'attribute.name', foreground: 'FF0000' },\n        { token: 'attribute.value', foreground: '0451A5' },\n        { token: 'attribute.value.number', foreground: '098658' },\n        { token: 'attribute.value.unit', foreground: '098658' },\n        { token: 'attribute.value.html', foreground: '0000FF' },\n        { token: 'attribute.value.xml', foreground: '0000FF' },\n        { token: 'string', foreground: 'A31515' },\n        { token: 'string.html', foreground: '0000FF' },\n        { token: 'string.sql', foreground: 'FF0000' },\n        { token: 'string.yaml', foreground: '0451A5' },\n        { token: 'keyword', foreground: '0000FF' },\n        { token: 'keyword.json', foreground: '0451A5' },\n        { token: 'keyword.flow', foreground: 'AF00DB' },\n        { token: 'keyword.flow.scss', foreground: '0000FF' },\n        { token: 'operator.scss', foreground: '666666' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '666666' },\n        { token: 'predefined.sql', foreground: 'C700C7' },\n    ],\n    colors: {\n        [editorBackground]: '#FFFFFE',\n        [editorForeground]: '#000000',\n        [editorInactiveSelection]: '#E5EBF1',\n        [editorIndentGuide1]: '#D3D3D3',\n        [editorActiveIndentGuide1]: '#939393',\n        [editorSelectionHighlight]: '#ADD6FF4D'\n    }\n};\n/* -------------------------------- End vs theme -------------------------------- */\n/* -------------------------------- Begin vs-dark theme -------------------------------- */\nexport const vs_dark = {\n    base: 'vs-dark',\n    inherit: false,\n    rules: [\n        { token: '', foreground: 'D4D4D4', background: '1E1E1E' },\n        { token: 'invalid', foreground: 'f44747' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '74B0DF' },\n        { token: 'variable.predefined', foreground: '4864AA' },\n        { token: 'variable.parameter', foreground: '9CDCFE' },\n        { token: 'constant', foreground: '569CD6' },\n        { token: 'comment', foreground: '608B4E' },\n        { token: 'number', foreground: 'B5CEA8' },\n        { token: 'number.hex', foreground: '5BB498' },\n        { token: 'regexp', foreground: 'B46695' },\n        { token: 'annotation', foreground: 'cc6666' },\n        { token: 'type', foreground: '3DC9B0' },\n        { token: 'delimiter', foreground: 'DCDCDC' },\n        { token: 'delimiter.html', foreground: '808080' },\n        { token: 'delimiter.xml', foreground: '808080' },\n        { token: 'tag', foreground: '569CD6' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta.scss', foreground: 'A79873' },\n        { token: 'meta.tag', foreground: 'CE9178' },\n        { token: 'metatag', foreground: 'DD6A6F' },\n        { token: 'metatag.content.html', foreground: '9CDCFE' },\n        { token: 'metatag.html', foreground: '569CD6' },\n        { token: 'metatag.xml', foreground: '569CD6' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '9CDCFE' },\n        { token: 'string.key.json', foreground: '9CDCFE' },\n        { token: 'string.value.json', foreground: 'CE9178' },\n        { token: 'attribute.name', foreground: '9CDCFE' },\n        { token: 'attribute.value', foreground: 'CE9178' },\n        { token: 'attribute.value.number.css', foreground: 'B5CEA8' },\n        { token: 'attribute.value.unit.css', foreground: 'B5CEA8' },\n        { token: 'attribute.value.hex.css', foreground: 'D4D4D4' },\n        { token: 'string', foreground: 'CE9178' },\n        { token: 'string.sql', foreground: 'FF0000' },\n        { token: 'keyword', foreground: '569CD6' },\n        { token: 'keyword.flow', foreground: 'C586C0' },\n        { token: 'keyword.json', foreground: 'CE9178' },\n        { token: 'keyword.flow.scss', foreground: '569CD6' },\n        { token: 'operator.scss', foreground: '909090' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '909090' },\n        { token: 'predefined.sql', foreground: 'FF00FF' },\n    ],\n    colors: {\n        [editorBackground]: '#1E1E1E',\n        [editorForeground]: '#D4D4D4',\n        [editorInactiveSelection]: '#3A3D41',\n        [editorIndentGuide1]: '#404040',\n        [editorActiveIndentGuide1]: '#707070',\n        [editorSelectionHighlight]: '#ADD6FF26'\n    }\n};\n/* -------------------------------- End vs-dark theme -------------------------------- */\n/* -------------------------------- Begin hc-black theme -------------------------------- */\nexport const hc_black = {\n    base: 'hc-black',\n    inherit: false,\n    rules: [\n        { token: '', foreground: 'FFFFFF', background: '000000' },\n        { token: 'invalid', foreground: 'f44747' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '1AEBFF' },\n        { token: 'variable.parameter', foreground: '9CDCFE' },\n        { token: 'constant', foreground: '569CD6' },\n        { token: 'comment', foreground: '608B4E' },\n        { token: 'number', foreground: 'FFFFFF' },\n        { token: 'regexp', foreground: 'C0C0C0' },\n        { token: 'annotation', foreground: '569CD6' },\n        { token: 'type', foreground: '3DC9B0' },\n        { token: 'delimiter', foreground: 'FFFF00' },\n        { token: 'delimiter.html', foreground: 'FFFF00' },\n        { token: 'tag', foreground: '569CD6' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta', foreground: 'D4D4D4' },\n        { token: 'meta.tag', foreground: 'CE9178' },\n        { token: 'metatag', foreground: '569CD6' },\n        { token: 'metatag.content.html', foreground: '1AEBFF' },\n        { token: 'metatag.html', foreground: '569CD6' },\n        { token: 'metatag.xml', foreground: '569CD6' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '9CDCFE' },\n        { token: 'string.key', foreground: '9CDCFE' },\n        { token: 'string.value', foreground: 'CE9178' },\n        { token: 'attribute.name', foreground: '569CD6' },\n        { token: 'attribute.value', foreground: '3FF23F' },\n        { token: 'string', foreground: 'CE9178' },\n        { token: 'string.sql', foreground: 'FF0000' },\n        { token: 'keyword', foreground: '569CD6' },\n        { token: 'keyword.flow', foreground: 'C586C0' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '909090' },\n        { token: 'predefined.sql', foreground: 'FF00FF' },\n    ],\n    colors: {\n        [editorBackground]: '#000000',\n        [editorForeground]: '#FFFFFF',\n        [editorIndentGuide1]: '#FFFFFF',\n        [editorActiveIndentGuide1]: '#FFFFFF',\n    }\n};\n/* -------------------------------- End hc-black theme -------------------------------- */\n/* -------------------------------- Begin hc-light theme -------------------------------- */\nexport const hc_light = {\n    base: 'hc-light',\n    inherit: false,\n    rules: [\n        { token: '', foreground: '292929', background: 'FFFFFF' },\n        { token: 'invalid', foreground: 'B5200D' },\n        { token: 'emphasis', fontStyle: 'italic' },\n        { token: 'strong', fontStyle: 'bold' },\n        { token: 'variable', foreground: '264F70' },\n        { token: 'variable.predefined', foreground: '4864AA' },\n        { token: 'constant', foreground: 'dd0000' },\n        { token: 'comment', foreground: '008000' },\n        { token: 'number', foreground: '098658' },\n        { token: 'number.hex', foreground: '3030c0' },\n        { token: 'regexp', foreground: '800000' },\n        { token: 'annotation', foreground: '808080' },\n        { token: 'type', foreground: '008080' },\n        { token: 'delimiter', foreground: '000000' },\n        { token: 'delimiter.html', foreground: '383838' },\n        { token: 'tag', foreground: '800000' },\n        { token: 'tag.id.pug', foreground: '4F76AC' },\n        { token: 'tag.class.pug', foreground: '4F76AC' },\n        { token: 'meta.scss', foreground: '800000' },\n        { token: 'metatag', foreground: 'e00000' },\n        { token: 'metatag.content.html', foreground: 'B5200D' },\n        { token: 'metatag.html', foreground: '808080' },\n        { token: 'metatag.xml', foreground: '808080' },\n        { token: 'metatag.php', fontStyle: 'bold' },\n        { token: 'key', foreground: '863B00' },\n        { token: 'string.key.json', foreground: 'A31515' },\n        { token: 'string.value.json', foreground: '0451A5' },\n        { token: 'attribute.name', foreground: '264F78' },\n        { token: 'attribute.value', foreground: '0451A5' },\n        { token: 'string', foreground: 'A31515' },\n        { token: 'string.sql', foreground: 'B5200D' },\n        { token: 'keyword', foreground: '0000FF' },\n        { token: 'keyword.flow', foreground: 'AF00DB' },\n        { token: 'operator.sql', foreground: '778899' },\n        { token: 'operator.swift', foreground: '666666' },\n        { token: 'predefined.sql', foreground: 'C700C7' },\n    ],\n    colors: {\n        [editorBackground]: '#FFFFFF',\n        [editorForeground]: '#292929',\n        [editorIndentGuide1]: '#292929',\n        [editorActiveIndentGuide1]: '#292929',\n    }\n};\n/* -------------------------------- End hc-light theme -------------------------------- */\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport * as dom from '../../../base/browser/dom.js';\nimport { addMatchMediaChangeListener } from '../../../base/browser/browser.js';\nimport { Color } from '../../../base/common/color.js';\nimport { Emitter } from '../../../base/common/event.js';\nimport { TokenizationRegistry } from '../../common/languages.js';\nimport { TokenMetadata } from '../../common/encodedTokenAttributes.js';\nimport { TokenTheme, generateTokensCSSForColorMap } from '../../common/languages/supports/tokenization.js';\nimport { hc_black, hc_light, vs, vs_dark } from '../common/themes.js';\nimport { Registry } from '../../../platform/registry/common/platform.js';\nimport { asCssVariableName, Extensions } from '../../../platform/theme/common/colorRegistry.js';\nimport { Extensions as ThemingExtensions } from '../../../platform/theme/common/themeService.js';\nimport { Disposable } from '../../../base/common/lifecycle.js';\nimport { ColorScheme, isDark, isHighContrast } from '../../../platform/theme/common/theme.js';\nimport { getIconsStyleSheet, UnthemedProductIconTheme } from '../../../platform/theme/browser/iconsStyleSheet.js';\nexport const VS_LIGHT_THEME_NAME = 'vs';\nexport const VS_DARK_THEME_NAME = 'vs-dark';\nexport const HC_BLACK_THEME_NAME = 'hc-black';\nexport const HC_LIGHT_THEME_NAME = 'hc-light';\nconst colorRegistry = Registry.as(Extensions.ColorContribution);\nconst themingRegistry = Registry.as(ThemingExtensions.ThemingContribution);\nclass StandaloneTheme {\n    constructor(name, standaloneThemeData) {\n        this.semanticHighlighting = false;\n        this.themeData = standaloneThemeData;\n        const base = standaloneThemeData.base;\n        if (name.length > 0) {\n            if (isBuiltinTheme(name)) {\n                this.id = name;\n            }\n            else {\n                this.id = base + ' ' + name;\n            }\n            this.themeName = name;\n        }\n        else {\n            this.id = base;\n            this.themeName = base;\n        }\n        this.colors = null;\n        this.defaultColors = Object.create(null);\n        this._tokenTheme = null;\n    }\n    get base() {\n        return this.themeData.base;\n    }\n    notifyBaseUpdated() {\n        if (this.themeData.inherit) {\n            this.colors = null;\n            this._tokenTheme = null;\n        }\n    }\n    getColors() {\n        if (!this.colors) {\n            const colors = new Map();\n            for (const id in this.themeData.colors) {\n                colors.set(id, Color.fromHex(this.themeData.colors[id]));\n            }\n            if (this.themeData.inherit) {\n                const baseData = getBuiltinRules(this.themeData.base);\n                for (const id in baseData.colors) {\n                    if (!colors.has(id)) {\n                        colors.set(id, Color.fromHex(baseData.colors[id]));\n                    }\n                }\n            }\n            this.colors = colors;\n        }\n        return this.colors;\n    }\n    getColor(colorId, useDefault) {\n        const color = this.getColors().get(colorId);\n        if (color) {\n            return color;\n        }\n        if (useDefault !== false) {\n            return this.getDefault(colorId);\n        }\n        return undefined;\n    }\n    getDefault(colorId) {\n        let color = this.defaultColors[colorId];\n        if (color) {\n            return color;\n        }\n        color = colorRegistry.resolveDefaultColor(colorId, this);\n        this.defaultColors[colorId] = color;\n        return color;\n    }\n    defines(colorId) {\n        return this.getColors().has(colorId);\n    }\n    get type() {\n        switch (this.base) {\n            case VS_LIGHT_THEME_NAME: return ColorScheme.LIGHT;\n            case HC_BLACK_THEME_NAME: return ColorScheme.HIGH_CONTRAST_DARK;\n            case HC_LIGHT_THEME_NAME: return ColorScheme.HIGH_CONTRAST_LIGHT;\n            default: return ColorScheme.DARK;\n        }\n    }\n    get tokenTheme() {\n        if (!this._tokenTheme) {\n            let rules = [];\n            let encodedTokensColors = [];\n            if (this.themeData.inherit) {\n                const baseData = getBuiltinRules(this.themeData.base);\n                rules = baseData.rules;\n                if (baseData.encodedTokensColors) {\n                    encodedTokensColors = baseData.encodedTokensColors;\n                }\n            }\n            // Pick up default colors from `editor.foreground` and `editor.background` if available\n            const editorForeground = this.themeData.colors['editor.foreground'];\n            const editorBackground = this.themeData.colors['editor.background'];\n            if (editorForeground || editorBackground) {\n                const rule = { token: '' };\n                if (editorForeground) {\n                    rule.foreground = editorForeground;\n                }\n                if (editorBackground) {\n                    rule.background = editorBackground;\n                }\n                rules.push(rule);\n            }\n            rules = rules.concat(this.themeData.rules);\n            if (this.themeData.encodedTokensColors) {\n                encodedTokensColors = this.themeData.encodedTokensColors;\n            }\n            this._tokenTheme = TokenTheme.createFromRawTokenTheme(rules, encodedTokensColors);\n        }\n        return this._tokenTheme;\n    }\n    getTokenStyleMetadata(type, modifiers, modelLanguage) {\n        // use theme rules match\n        const style = this.tokenTheme._match([type].concat(modifiers).join('.'));\n        const metadata = style.metadata;\n        const foreground = TokenMetadata.getForeground(metadata);\n        const fontStyle = TokenMetadata.getFontStyle(metadata);\n        return {\n            foreground: foreground,\n            italic: Boolean(fontStyle & 1 /* FontStyle.Italic */),\n            bold: Boolean(fontStyle & 2 /* FontStyle.Bold */),\n            underline: Boolean(fontStyle & 4 /* FontStyle.Underline */),\n            strikethrough: Boolean(fontStyle & 8 /* FontStyle.Strikethrough */)\n        };\n    }\n}\nfunction isBuiltinTheme(themeName) {\n    return (themeName === VS_LIGHT_THEME_NAME\n        || themeName === VS_DARK_THEME_NAME\n        || themeName === HC_BLACK_THEME_NAME\n        || themeName === HC_LIGHT_THEME_NAME);\n}\nfunction getBuiltinRules(builtinTheme) {\n    switch (builtinTheme) {\n        case VS_LIGHT_THEME_NAME:\n            return vs;\n        case VS_DARK_THEME_NAME:\n            return vs_dark;\n        case HC_BLACK_THEME_NAME:\n            return hc_black;\n        case HC_LIGHT_THEME_NAME:\n            return hc_light;\n    }\n}\nfunction newBuiltInTheme(builtinTheme) {\n    const themeData = getBuiltinRules(builtinTheme);\n    return new StandaloneTheme(builtinTheme, themeData);\n}\nexport class StandaloneThemeService extends Disposable {\n    constructor() {\n        super();\n        this._onColorThemeChange = this._register(new Emitter());\n        this.onDidColorThemeChange = this._onColorThemeChange.event;\n        this._onProductIconThemeChange = this._register(new Emitter());\n        this.onDidProductIconThemeChange = this._onProductIconThemeChange.event;\n        this._environment = Object.create(null);\n        this._builtInProductIconTheme = new UnthemedProductIconTheme();\n        this._autoDetectHighContrast = true;\n        this._knownThemes = new Map();\n        this._knownThemes.set(VS_LIGHT_THEME_NAME, newBuiltInTheme(VS_LIGHT_THEME_NAME));\n        this._knownThemes.set(VS_DARK_THEME_NAME, newBuiltInTheme(VS_DARK_THEME_NAME));\n        this._knownThemes.set(HC_BLACK_THEME_NAME, newBuiltInTheme(HC_BLACK_THEME_NAME));\n        this._knownThemes.set(HC_LIGHT_THEME_NAME, newBuiltInTheme(HC_LIGHT_THEME_NAME));\n        const iconsStyleSheet = getIconsStyleSheet(this);\n        this._codiconCSS = iconsStyleSheet.getCSS();\n        this._themeCSS = '';\n        this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n        this._globalStyleElement = null;\n        this._styleElements = [];\n        this._colorMapOverride = null;\n        this.setTheme(VS_LIGHT_THEME_NAME);\n        this._onOSSchemeChanged();\n        iconsStyleSheet.onDidChange(() => {\n            this._codiconCSS = iconsStyleSheet.getCSS();\n            this._updateCSS();\n        });\n        addMatchMediaChangeListener('(forced-colors: active)', () => {\n            this._onOSSchemeChanged();\n        });\n    }\n    registerEditorContainer(domNode) {\n        if (dom.isInShadowDOM(domNode)) {\n            return this._registerShadowDomContainer(domNode);\n        }\n        return this._registerRegularEditorContainer();\n    }\n    _registerRegularEditorContainer() {\n        if (!this._globalStyleElement) {\n            this._globalStyleElement = dom.createStyleSheet(undefined, style => {\n                style.className = 'monaco-colors';\n                style.textContent = this._allCSS;\n            });\n            this._styleElements.push(this._globalStyleElement);\n        }\n        return Disposable.None;\n    }\n    _registerShadowDomContainer(domNode) {\n        const styleElement = dom.createStyleSheet(domNode, style => {\n            style.className = 'monaco-colors';\n            style.textContent = this._allCSS;\n        });\n        this._styleElements.push(styleElement);\n        return {\n            dispose: () => {\n                for (let i = 0; i < this._styleElements.length; i++) {\n                    if (this._styleElements[i] === styleElement) {\n                        this._styleElements.splice(i, 1);\n                        return;\n                    }\n                }\n            }\n        };\n    }\n    defineTheme(themeName, themeData) {\n        if (!/^[a-z0-9\\-]+$/i.test(themeName)) {\n            throw new Error('Illegal theme name!');\n        }\n        if (!isBuiltinTheme(themeData.base) && !isBuiltinTheme(themeName)) {\n            throw new Error('Illegal theme base!');\n        }\n        // set or replace theme\n        this._knownThemes.set(themeName, new StandaloneTheme(themeName, themeData));\n        if (isBuiltinTheme(themeName)) {\n            this._knownThemes.forEach(theme => {\n                if (theme.base === themeName) {\n                    theme.notifyBaseUpdated();\n                }\n            });\n        }\n        if (this._theme.themeName === themeName) {\n            this.setTheme(themeName); // refresh theme\n        }\n    }\n    getColorTheme() {\n        return this._theme;\n    }\n    setColorMapOverride(colorMapOverride) {\n        this._colorMapOverride = colorMapOverride;\n        this._updateThemeOrColorMap();\n    }\n    setTheme(themeName) {\n        let theme;\n        if (this._knownThemes.has(themeName)) {\n            theme = this._knownThemes.get(themeName);\n        }\n        else {\n            theme = this._knownThemes.get(VS_LIGHT_THEME_NAME);\n        }\n        this._updateActualTheme(theme);\n    }\n    _updateActualTheme(desiredTheme) {\n        if (!desiredTheme || this._theme === desiredTheme) {\n            // Nothing to do\n            return;\n        }\n        this._theme = desiredTheme;\n        this._updateThemeOrColorMap();\n    }\n    _onOSSchemeChanged() {\n        if (this._autoDetectHighContrast) {\n            const wantsHighContrast = window.matchMedia(`(forced-colors: active)`).matches;\n            if (wantsHighContrast !== isHighContrast(this._theme.type)) {\n                // switch to high contrast or non-high contrast but stick to dark or light\n                let newThemeName;\n                if (isDark(this._theme.type)) {\n                    newThemeName = wantsHighContrast ? HC_BLACK_THEME_NAME : VS_DARK_THEME_NAME;\n                }\n                else {\n                    newThemeName = wantsHighContrast ? HC_LIGHT_THEME_NAME : VS_LIGHT_THEME_NAME;\n                }\n                this._updateActualTheme(this._knownThemes.get(newThemeName));\n            }\n        }\n    }\n    setAutoDetectHighContrast(autoDetectHighContrast) {\n        this._autoDetectHighContrast = autoDetectHighContrast;\n        this._onOSSchemeChanged();\n    }\n    _updateThemeOrColorMap() {\n        const cssRules = [];\n        const hasRule = {};\n        const ruleCollector = {\n            addRule: (rule) => {\n                if (!hasRule[rule]) {\n                    cssRules.push(rule);\n                    hasRule[rule] = true;\n                }\n            }\n        };\n        themingRegistry.getThemingParticipants().forEach(p => p(this._theme, ruleCollector, this._environment));\n        const colorVariables = [];\n        for (const item of colorRegistry.getColors()) {\n            const color = this._theme.getColor(item.id, true);\n            if (color) {\n                colorVariables.push(`${asCssVariableName(item.id)}: ${color.toString()};`);\n            }\n        }\n        ruleCollector.addRule(`.monaco-editor, .monaco-diff-editor { ${colorVariables.join('\\n')} }`);\n        const colorMap = this._colorMapOverride || this._theme.tokenTheme.getColorMap();\n        ruleCollector.addRule(generateTokensCSSForColorMap(colorMap));\n        this._themeCSS = cssRules.join('\\n');\n        this._updateCSS();\n        TokenizationRegistry.setColorMap(colorMap);\n        this._onColorThemeChange.fire(this._theme);\n    }\n    _updateCSS() {\n        this._allCSS = `${this._codiconCSS}\\n${this._themeCSS}`;\n        this._styleElements.forEach(styleElement => styleElement.textContent = this._allCSS);\n    }\n    getFileIconTheme() {\n        return {\n            hasFileIcons: false,\n            hasFolderIcons: false,\n            hidesExplorerArrows: false\n        };\n    }\n    getProductIconTheme() {\n        return this._builtInProductIconTheme;\n    }\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { EditorAction, registerEditorAction } from '../../../browser/editorExtensions.js';\nimport { IStandaloneThemeService } from '../../common/standaloneTheme.js';\nimport { ToggleHighContrastNLS } from '../../../common/standaloneStrings.js';\nimport { isDark, isHighContrast } from '../../../../platform/theme/common/theme.js';\nimport { HC_BLACK_THEME_NAME, HC_LIGHT_THEME_NAME, VS_DARK_THEME_NAME, VS_LIGHT_THEME_NAME } from '../standaloneThemeService.js';\nclass ToggleHighContrast extends EditorAction {\n    constructor() {\n        super({\n            id: 'editor.action.toggleHighContrast',\n            label: ToggleHighContrastNLS.toggleHighContrast,\n            alias: 'Toggle High Contrast Theme',\n            precondition: undefined\n        });\n        this._originalThemeName = null;\n    }\n    run(accessor, editor) {\n        const standaloneThemeService = accessor.get(IStandaloneThemeService);\n        const currentTheme = standaloneThemeService.getColorTheme();\n        if (isHighContrast(currentTheme.type)) {\n            // We must toggle back to the integrator's theme\n            standaloneThemeService.setTheme(this._originalThemeName || (isDark(currentTheme.type) ? VS_DARK_THEME_NAME : VS_LIGHT_THEME_NAME));\n            this._originalThemeName = null;\n        }\n        else {\n            standaloneThemeService.setTheme(isDark(currentTheme.type) ? HC_BLACK_THEME_NAME : HC_LIGHT_THEME_NAME);\n            this._originalThemeName = currentTheme.themeName;\n        }\n    }\n}\nregisterEditorAction(ToggleHighContrast);\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nexport function isFuzzyActionArr(what) {\n    return (Array.isArray(what));\n}\nexport function isFuzzyAction(what) {\n    return !isFuzzyActionArr(what);\n}\nexport function isString(what) {\n    return (typeof what === 'string');\n}\nexport function isIAction(what) {\n    return !isString(what);\n}\n// Small helper functions\n/**\n * Is a string null, undefined, or empty?\n */\nexport function empty(s) {\n    return (s ? false : true);\n}\n/**\n * Puts a string to lower case if 'ignoreCase' is set.\n */\nexport function fixCase(lexer, str) {\n    return (lexer.ignoreCase && str ? str.toLowerCase() : str);\n}\n/**\n * Ensures there are no bad characters in a CSS token class.\n */\nexport function sanitize(s) {\n    return s.replace(/[&<>'\"_]/g, '-'); // used on all output token CSS classes\n}\n// Logging\n/**\n * Logs a message.\n */\nexport function log(lexer, msg) {\n    console.log(`${lexer.languageId}: ${msg}`);\n}\n// Throwing errors\nexport function createError(lexer, msg) {\n    return new Error(`${lexer.languageId}: ${msg}`);\n}\n// Helper functions for rule finding and substitution\n/**\n * substituteMatches is used on lexer strings and can substitutes predefined patterns:\n * \t\t$$  => $\n * \t\t$#  => id\n * \t\t$n  => matched entry n\n * \t\t@attr => contents of lexer[attr]\n *\n * See documentation for more info\n */\nexport function substituteMatches(lexer, str, id, matches, state) {\n    const re = /\\$((\\$)|(#)|(\\d\\d?)|[sS](\\d\\d?)|@(\\w+))/g;\n    let stateMatches = null;\n    return str.replace(re, function (full, sub, dollar, hash, n, s, attr, ofs, total) {\n        if (!empty(dollar)) {\n            return '$'; // $$\n        }\n        if (!empty(hash)) {\n            return fixCase(lexer, id); // default $#\n        }\n        if (!empty(n) && n < matches.length) {\n            return fixCase(lexer, matches[n]); // $n\n        }\n        if (!empty(attr) && lexer && typeof (lexer[attr]) === 'string') {\n            return lexer[attr]; //@attribute\n        }\n        if (stateMatches === null) { // split state on demand\n            stateMatches = state.split('.');\n            stateMatches.unshift(state);\n        }\n        if (!empty(s) && s < stateMatches.length) {\n            return fixCase(lexer, stateMatches[s]); //$Sn\n        }\n        return '';\n    });\n}\n/**\n * Find the tokenizer rules for a specific state (i.e. next action)\n */\nexport function findRules(lexer, inState) {\n    let state = inState;\n    while (state && state.length > 0) {\n        const rules = lexer.tokenizer[state];\n        if (rules) {\n            return rules;\n        }\n        const idx = state.lastIndexOf('.');\n        if (idx < 0) {\n            state = null; // no further parent\n        }\n        else {\n            state = state.substr(0, idx);\n        }\n    }\n    return null;\n}\n/**\n * Is a certain state defined? In contrast to 'findRules' this works on a ILexerMin.\n * This is used during compilation where we may know the defined states\n * but not yet whether the corresponding rules are correct.\n */\nexport function stateExists(lexer, inState) {\n    let state = inState;\n    while (state && state.length > 0) {\n        const exist = lexer.stateNames[state];\n        if (exist) {\n            return true;\n        }\n        const idx = state.lastIndexOf('.');\n        if (idx < 0) {\n            state = null; // no further parent\n        }\n        else {\n            state = state.substr(0, idx);\n        }\n    }\n    return false;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport * as languages from '../../../common/languages.js';\nimport { NullState, nullTokenizeEncoded, nullTokenize } from '../../../common/languages/nullTokenize.js';\nimport * as monarchCommon from './monarchCommon.js';\nimport { IConfigurationService } from '../../../../platform/configuration/common/configuration.js';\nconst CACHE_STACK_DEPTH = 5;\n/**\n * Reuse the same stack elements up to a certain depth.\n */\nclass MonarchStackElementFactory {\n    static create(parent, state) {\n        return this._INSTANCE.create(parent, state);\n    }\n    constructor(maxCacheDepth) {\n        this._maxCacheDepth = maxCacheDepth;\n        this._entries = Object.create(null);\n    }\n    create(parent, state) {\n        if (parent !== null && parent.depth >= this._maxCacheDepth) {\n            // no caching above a certain depth\n            return new MonarchStackElement(parent, state);\n        }\n        let stackElementId = MonarchStackElement.getStackElementId(parent);\n        if (stackElementId.length > 0) {\n            stackElementId += '|';\n        }\n        stackElementId += state;\n        let result = this._entries[stackElementId];\n        if (result) {\n            return result;\n        }\n        result = new MonarchStackElement(parent, state);\n        this._entries[stackElementId] = result;\n        return result;\n    }\n}\nMonarchStackElementFactory._INSTANCE = new MonarchStackElementFactory(CACHE_STACK_DEPTH);\nclass MonarchStackElement {\n    constructor(parent, state) {\n        this.parent = parent;\n        this.state = state;\n        this.depth = (this.parent ? this.parent.depth : 0) + 1;\n    }\n    static getStackElementId(element) {\n        let result = '';\n        while (element !== null) {\n            if (result.length > 0) {\n                result += '|';\n            }\n            result += element.state;\n            element = element.parent;\n        }\n        return result;\n    }\n    static _equals(a, b) {\n        while (a !== null && b !== null) {\n            if (a === b) {\n                return true;\n            }\n            if (a.state !== b.state) {\n                return false;\n            }\n            a = a.parent;\n            b = b.parent;\n        }\n        if (a === null && b === null) {\n            return true;\n        }\n        return false;\n    }\n    equals(other) {\n        return MonarchStackElement._equals(this, other);\n    }\n    push(state) {\n        return MonarchStackElementFactory.create(this, state);\n    }\n    pop() {\n        return this.parent;\n    }\n    popall() {\n        let result = this;\n        while (result.parent) {\n            result = result.parent;\n        }\n        return result;\n    }\n    switchTo(state) {\n        return MonarchStackElementFactory.create(this.parent, state);\n    }\n}\nclass EmbeddedLanguageData {\n    constructor(languageId, state) {\n        this.languageId = languageId;\n        this.state = state;\n    }\n    equals(other) {\n        return (this.languageId === other.languageId\n            && this.state.equals(other.state));\n    }\n    clone() {\n        const stateClone = this.state.clone();\n        // save an object\n        if (stateClone === this.state) {\n            return this;\n        }\n        return new EmbeddedLanguageData(this.languageId, this.state);\n    }\n}\n/**\n * Reuse the same line states up to a certain depth.\n */\nclass MonarchLineStateFactory {\n    static create(stack, embeddedLanguageData) {\n        return this._INSTANCE.create(stack, embeddedLanguageData);\n    }\n    constructor(maxCacheDepth) {\n        this._maxCacheDepth = maxCacheDepth;\n        this._entries = Object.create(null);\n    }\n    create(stack, embeddedLanguageData) {\n        if (embeddedLanguageData !== null) {\n            // no caching when embedding\n            return new MonarchLineState(stack, embeddedLanguageData);\n        }\n        if (stack !== null && stack.depth >= this._maxCacheDepth) {\n            // no caching above a certain depth\n            return new MonarchLineState(stack, embeddedLanguageData);\n        }\n        const stackElementId = MonarchStackElement.getStackElementId(stack);\n        let result = this._entries[stackElementId];\n        if (result) {\n            return result;\n        }\n        result = new MonarchLineState(stack, null);\n        this._entries[stackElementId] = result;\n        return result;\n    }\n}\nMonarchLineStateFactory._INSTANCE = new MonarchLineStateFactory(CACHE_STACK_DEPTH);\nclass MonarchLineState {\n    constructor(stack, embeddedLanguageData) {\n        this.stack = stack;\n        this.embeddedLanguageData = embeddedLanguageData;\n    }\n    clone() {\n        const embeddedlanguageDataClone = this.embeddedLanguageData ? this.embeddedLanguageData.clone() : null;\n        // save an object\n        if (embeddedlanguageDataClone === this.embeddedLanguageData) {\n            return this;\n        }\n        return MonarchLineStateFactory.create(this.stack, this.embeddedLanguageData);\n    }\n    equals(other) {\n        if (!(other instanceof MonarchLineState)) {\n            return false;\n        }\n        if (!this.stack.equals(other.stack)) {\n            return false;\n        }\n        if (this.embeddedLanguageData === null && other.embeddedLanguageData === null) {\n            return true;\n        }\n        if (this.embeddedLanguageData === null || other.embeddedLanguageData === null) {\n            return false;\n        }\n        return this.embeddedLanguageData.equals(other.embeddedLanguageData);\n    }\n}\nclass MonarchClassicTokensCollector {\n    constructor() {\n        this._tokens = [];\n        this._languageId = null;\n        this._lastTokenType = null;\n        this._lastTokenLanguage = null;\n    }\n    enterLanguage(languageId) {\n        this._languageId = languageId;\n    }\n    emit(startOffset, type) {\n        if (this._lastTokenType === type && this._lastTokenLanguage === this._languageId) {\n            return;\n        }\n        this._lastTokenType = type;\n        this._lastTokenLanguage = this._languageId;\n        this._tokens.push(new languages.Token(startOffset, type, this._languageId));\n    }\n    nestedLanguageTokenize(embeddedLanguageLine, hasEOL, embeddedLanguageData, offsetDelta) {\n        const nestedLanguageId = embeddedLanguageData.languageId;\n        const embeddedModeState = embeddedLanguageData.state;\n        const nestedLanguageTokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n        if (!nestedLanguageTokenizationSupport) {\n            this.enterLanguage(nestedLanguageId);\n            this.emit(offsetDelta, '');\n            return embeddedModeState;\n        }\n        const nestedResult = nestedLanguageTokenizationSupport.tokenize(embeddedLanguageLine, hasEOL, embeddedModeState);\n        if (offsetDelta !== 0) {\n            for (const token of nestedResult.tokens) {\n                this._tokens.push(new languages.Token(token.offset + offsetDelta, token.type, token.language));\n            }\n        }\n        else {\n            this._tokens = this._tokens.concat(nestedResult.tokens);\n        }\n        this._lastTokenType = null;\n        this._lastTokenLanguage = null;\n        this._languageId = null;\n        return nestedResult.endState;\n    }\n    finalize(endState) {\n        return new languages.TokenizationResult(this._tokens, endState);\n    }\n}\nclass MonarchModernTokensCollector {\n    constructor(languageService, theme) {\n        this._languageService = languageService;\n        this._theme = theme;\n        this._prependTokens = null;\n        this._tokens = [];\n        this._currentLanguageId = 0 /* LanguageId.Null */;\n        this._lastTokenMetadata = 0;\n    }\n    enterLanguage(languageId) {\n        this._currentLanguageId = this._languageService.languageIdCodec.encodeLanguageId(languageId);\n    }\n    emit(startOffset, type) {\n        const metadata = this._theme.match(this._currentLanguageId, type) | 1024 /* MetadataConsts.BALANCED_BRACKETS_MASK */;\n        if (this._lastTokenMetadata === metadata) {\n            return;\n        }\n        this._lastTokenMetadata = metadata;\n        this._tokens.push(startOffset);\n        this._tokens.push(metadata);\n    }\n    static _merge(a, b, c) {\n        const aLen = (a !== null ? a.length : 0);\n        const bLen = b.length;\n        const cLen = (c !== null ? c.length : 0);\n        if (aLen === 0 && bLen === 0 && cLen === 0) {\n            return new Uint32Array(0);\n        }\n        if (aLen === 0 && bLen === 0) {\n            return c;\n        }\n        if (bLen === 0 && cLen === 0) {\n            return a;\n        }\n        const result = new Uint32Array(aLen + bLen + cLen);\n        if (a !== null) {\n            result.set(a);\n        }\n        for (let i = 0; i < bLen; i++) {\n            result[aLen + i] = b[i];\n        }\n        if (c !== null) {\n            result.set(c, aLen + bLen);\n        }\n        return result;\n    }\n    nestedLanguageTokenize(embeddedLanguageLine, hasEOL, embeddedLanguageData, offsetDelta) {\n        const nestedLanguageId = embeddedLanguageData.languageId;\n        const embeddedModeState = embeddedLanguageData.state;\n        const nestedLanguageTokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n        if (!nestedLanguageTokenizationSupport) {\n            this.enterLanguage(nestedLanguageId);\n            this.emit(offsetDelta, '');\n            return embeddedModeState;\n        }\n        const nestedResult = nestedLanguageTokenizationSupport.tokenizeEncoded(embeddedLanguageLine, hasEOL, embeddedModeState);\n        if (offsetDelta !== 0) {\n            for (let i = 0, len = nestedResult.tokens.length; i < len; i += 2) {\n                nestedResult.tokens[i] += offsetDelta;\n            }\n        }\n        this._prependTokens = MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, nestedResult.tokens);\n        this._tokens = [];\n        this._currentLanguageId = 0;\n        this._lastTokenMetadata = 0;\n        return nestedResult.endState;\n    }\n    finalize(endState) {\n        return new languages.EncodedTokenizationResult(MonarchModernTokensCollector._merge(this._prependTokens, this._tokens, null), endState);\n    }\n}\nlet MonarchTokenizer = class MonarchTokenizer {\n    constructor(languageService, standaloneThemeService, languageId, lexer, _configurationService) {\n        this._configurationService = _configurationService;\n        this._languageService = languageService;\n        this._standaloneThemeService = standaloneThemeService;\n        this._languageId = languageId;\n        this._lexer = lexer;\n        this._embeddedLanguages = Object.create(null);\n        this.embeddedLoaded = Promise.resolve(undefined);\n        // Set up listening for embedded modes\n        let emitting = false;\n        this._tokenizationRegistryListener = languages.TokenizationRegistry.onDidChange((e) => {\n            if (emitting) {\n                return;\n            }\n            let isOneOfMyEmbeddedModes = false;\n            for (let i = 0, len = e.changedLanguages.length; i < len; i++) {\n                const language = e.changedLanguages[i];\n                if (this._embeddedLanguages[language]) {\n                    isOneOfMyEmbeddedModes = true;\n                    break;\n                }\n            }\n            if (isOneOfMyEmbeddedModes) {\n                emitting = true;\n                languages.TokenizationRegistry.handleChange([this._languageId]);\n                emitting = false;\n            }\n        });\n        this._maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n            overrideIdentifier: this._languageId\n        });\n        this._configurationService.onDidChangeConfiguration(e => {\n            if (e.affectsConfiguration('editor.maxTokenizationLineLength')) {\n                this._maxTokenizationLineLength = this._configurationService.getValue('editor.maxTokenizationLineLength', {\n                    overrideIdentifier: this._languageId\n                });\n            }\n        });\n    }\n    dispose() {\n        this._tokenizationRegistryListener.dispose();\n    }\n    getLoadStatus() {\n        const promises = [];\n        for (const nestedLanguageId in this._embeddedLanguages) {\n            const tokenizationSupport = languages.TokenizationRegistry.get(nestedLanguageId);\n            if (tokenizationSupport) {\n                // The nested language is already loaded\n                if (tokenizationSupport instanceof MonarchTokenizer) {\n                    const nestedModeStatus = tokenizationSupport.getLoadStatus();\n                    if (nestedModeStatus.loaded === false) {\n                        promises.push(nestedModeStatus.promise);\n                    }\n                }\n                continue;\n            }\n            if (!languages.TokenizationRegistry.isResolved(nestedLanguageId)) {\n                // The nested language is in the process of being loaded\n                promises.push(languages.TokenizationRegistry.getOrCreate(nestedLanguageId));\n            }\n        }\n        if (promises.length === 0) {\n            return {\n                loaded: true\n            };\n        }\n        return {\n            loaded: false,\n            promise: Promise.all(promises).then(_ => undefined)\n        };\n    }\n    getInitialState() {\n        const rootState = MonarchStackElementFactory.create(null, this._lexer.start);\n        return MonarchLineStateFactory.create(rootState, null);\n    }\n    tokenize(line, hasEOL, lineState) {\n        if (line.length >= this._maxTokenizationLineLength) {\n            return nullTokenize(this._languageId, lineState);\n        }\n        const tokensCollector = new MonarchClassicTokensCollector();\n        const endLineState = this._tokenize(line, hasEOL, lineState, tokensCollector);\n        return tokensCollector.finalize(endLineState);\n    }\n    tokenizeEncoded(line, hasEOL, lineState) {\n        if (line.length >= this._maxTokenizationLineLength) {\n            return nullTokenizeEncoded(this._languageService.languageIdCodec.encodeLanguageId(this._languageId), lineState);\n        }\n        const tokensCollector = new MonarchModernTokensCollector(this._languageService, this._standaloneThemeService.getColorTheme().tokenTheme);\n        const endLineState = this._tokenize(line, hasEOL, lineState, tokensCollector);\n        return tokensCollector.finalize(endLineState);\n    }\n    _tokenize(line, hasEOL, lineState, collector) {\n        if (lineState.embeddedLanguageData) {\n            return this._nestedTokenize(line, hasEOL, lineState, 0, collector);\n        }\n        else {\n            return this._myTokenize(line, hasEOL, lineState, 0, collector);\n        }\n    }\n    _findLeavingNestedLanguageOffset(line, state) {\n        let rules = this._lexer.tokenizer[state.stack.state];\n        if (!rules) {\n            rules = monarchCommon.findRules(this._lexer, state.stack.state); // do parent matching\n            if (!rules) {\n                throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state.stack.state);\n            }\n        }\n        let popOffset = -1;\n        let hasEmbeddedPopRule = false;\n        for (const rule of rules) {\n            if (!monarchCommon.isIAction(rule.action) || rule.action.nextEmbedded !== '@pop') {\n                continue;\n            }\n            hasEmbeddedPopRule = true;\n            let regex = rule.regex;\n            const regexSource = rule.regex.source;\n            if (regexSource.substr(0, 4) === '^(?:' && regexSource.substr(regexSource.length - 1, 1) === ')') {\n                const flags = (regex.ignoreCase ? 'i' : '') + (regex.unicode ? 'u' : '');\n                regex = new RegExp(regexSource.substr(4, regexSource.length - 5), flags);\n            }\n            const result = line.search(regex);\n            if (result === -1 || (result !== 0 && rule.matchOnlyAtLineStart)) {\n                continue;\n            }\n            if (popOffset === -1 || result < popOffset) {\n                popOffset = result;\n            }\n        }\n        if (!hasEmbeddedPopRule) {\n            throw monarchCommon.createError(this._lexer, 'no rule containing nextEmbedded: \"@pop\" in tokenizer embedded state: ' + state.stack.state);\n        }\n        return popOffset;\n    }\n    _nestedTokenize(line, hasEOL, lineState, offsetDelta, tokensCollector) {\n        const popOffset = this._findLeavingNestedLanguageOffset(line, lineState);\n        if (popOffset === -1) {\n            // tokenization will not leave nested language\n            const nestedEndState = tokensCollector.nestedLanguageTokenize(line, hasEOL, lineState.embeddedLanguageData, offsetDelta);\n            return MonarchLineStateFactory.create(lineState.stack, new EmbeddedLanguageData(lineState.embeddedLanguageData.languageId, nestedEndState));\n        }\n        const nestedLanguageLine = line.substring(0, popOffset);\n        if (nestedLanguageLine.length > 0) {\n            // tokenize with the nested language\n            tokensCollector.nestedLanguageTokenize(nestedLanguageLine, false, lineState.embeddedLanguageData, offsetDelta);\n        }\n        const restOfTheLine = line.substring(popOffset);\n        return this._myTokenize(restOfTheLine, hasEOL, lineState, offsetDelta + popOffset, tokensCollector);\n    }\n    _safeRuleName(rule) {\n        if (rule) {\n            return rule.name;\n        }\n        return '(unknown)';\n    }\n    _myTokenize(lineWithoutLF, hasEOL, lineState, offsetDelta, tokensCollector) {\n        tokensCollector.enterLanguage(this._languageId);\n        const lineWithoutLFLength = lineWithoutLF.length;\n        const line = (hasEOL && this._lexer.includeLF ? lineWithoutLF + '\\n' : lineWithoutLF);\n        const lineLength = line.length;\n        let embeddedLanguageData = lineState.embeddedLanguageData;\n        let stack = lineState.stack;\n        let pos = 0;\n        let groupMatching = null;\n        // See https://github.com/microsoft/monaco-editor/issues/1235\n        // Evaluate rules at least once for an empty line\n        let forceEvaluation = true;\n        while (forceEvaluation || pos < lineLength) {\n            const pos0 = pos;\n            const stackLen0 = stack.depth;\n            const groupLen0 = groupMatching ? groupMatching.groups.length : 0;\n            const state = stack.state;\n            let matches = null;\n            let matched = null;\n            let action = null;\n            let rule = null;\n            let enteringEmbeddedLanguage = null;\n            // check if we need to process group matches first\n            if (groupMatching) {\n                matches = groupMatching.matches;\n                const groupEntry = groupMatching.groups.shift();\n                matched = groupEntry.matched;\n                action = groupEntry.action;\n                rule = groupMatching.rule;\n                // cleanup if necessary\n                if (groupMatching.groups.length === 0) {\n                    groupMatching = null;\n                }\n            }\n            else {\n                // otherwise we match on the token stream\n                if (!forceEvaluation && pos >= lineLength) {\n                    // nothing to do\n                    break;\n                }\n                forceEvaluation = false;\n                // get the rules for this state\n                let rules = this._lexer.tokenizer[state];\n                if (!rules) {\n                    rules = monarchCommon.findRules(this._lexer, state); // do parent matching\n                    if (!rules) {\n                        throw monarchCommon.createError(this._lexer, 'tokenizer state is not defined: ' + state);\n                    }\n                }\n                // try each rule until we match\n                const restOfLine = line.substr(pos);\n                for (const rule of rules) {\n                    if (pos === 0 || !rule.matchOnlyAtLineStart) {\n                        matches = restOfLine.match(rule.regex);\n                        if (matches) {\n                            matched = matches[0];\n                            action = rule.action;\n                            break;\n                        }\n                    }\n                }\n            }\n            // We matched 'rule' with 'matches' and 'action'\n            if (!matches) {\n                matches = [''];\n                matched = '';\n            }\n            if (!action) {\n                // bad: we didn't match anything, and there is no action to take\n                // we need to advance the stream or we get progress trouble\n                if (pos < lineLength) {\n                    matches = [line.charAt(pos)];\n                    matched = matches[0];\n                }\n                action = this._lexer.defaultToken;\n            }\n            if (matched === null) {\n                // should never happen, needed for strict null checking\n                break;\n            }\n            // advance stream\n            pos += matched.length;\n            // maybe call action function (used for 'cases')\n            while (monarchCommon.isFuzzyAction(action) && monarchCommon.isIAction(action) && action.test) {\n                action = action.test(matched, matches, state, pos === lineLength);\n            }\n            let result = null;\n            // set the result: either a string or an array of actions\n            if (typeof action === 'string' || Array.isArray(action)) {\n                result = action;\n            }\n            else if (action.group) {\n                result = action.group;\n            }\n            else if (action.token !== null && action.token !== undefined) {\n                // do $n replacements?\n                if (action.tokenSubst) {\n                    result = monarchCommon.substituteMatches(this._lexer, action.token, matched, matches, state);\n                }\n                else {\n                    result = action.token;\n                }\n                // enter embedded language?\n                if (action.nextEmbedded) {\n                    if (action.nextEmbedded === '@pop') {\n                        if (!embeddedLanguageData) {\n                            throw monarchCommon.createError(this._lexer, 'cannot pop embedded language if not inside one');\n                        }\n                        embeddedLanguageData = null;\n                    }\n                    else if (embeddedLanguageData) {\n                        throw monarchCommon.createError(this._lexer, 'cannot enter embedded language from within an embedded language');\n                    }\n                    else {\n                        enteringEmbeddedLanguage = monarchCommon.substituteMatches(this._lexer, action.nextEmbedded, matched, matches, state);\n                    }\n                }\n                // state transformations\n                if (action.goBack) { // back up the stream..\n                    pos = Math.max(0, pos - action.goBack);\n                }\n                if (action.switchTo && typeof action.switchTo === 'string') {\n                    let nextState = monarchCommon.substituteMatches(this._lexer, action.switchTo, matched, matches, state); // switch state without a push...\n                    if (nextState[0] === '@') {\n                        nextState = nextState.substr(1); // peel off starting '@'\n                    }\n                    if (!monarchCommon.findRules(this._lexer, nextState)) {\n                        throw monarchCommon.createError(this._lexer, 'trying to switch to a state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\n                    }\n                    else {\n                        stack = stack.switchTo(nextState);\n                    }\n                }\n                else if (action.transform && typeof action.transform === 'function') {\n                    throw monarchCommon.createError(this._lexer, 'action.transform not supported');\n                }\n                else if (action.next) {\n                    if (action.next === '@push') {\n                        if (stack.depth >= this._lexer.maxStack) {\n                            throw monarchCommon.createError(this._lexer, 'maximum tokenizer stack size reached: [' +\n                                stack.state + ',' + stack.parent.state + ',...]');\n                        }\n                        else {\n                            stack = stack.push(state);\n                        }\n                    }\n                    else if (action.next === '@pop') {\n                        if (stack.depth <= 1) {\n                            throw monarchCommon.createError(this._lexer, 'trying to pop an empty stack in rule: ' + this._safeRuleName(rule));\n                        }\n                        else {\n                            stack = stack.pop();\n                        }\n                    }\n                    else if (action.next === '@popall') {\n                        stack = stack.popall();\n                    }\n                    else {\n                        let nextState = monarchCommon.substituteMatches(this._lexer, action.next, matched, matches, state);\n                        if (nextState[0] === '@') {\n                            nextState = nextState.substr(1); // peel off starting '@'\n                        }\n                        if (!monarchCommon.findRules(this._lexer, nextState)) {\n                            throw monarchCommon.createError(this._lexer, 'trying to set a next state \\'' + nextState + '\\' that is undefined in rule: ' + this._safeRuleName(rule));\n                        }\n                        else {\n                            stack = stack.push(nextState);\n                        }\n                    }\n                }\n                if (action.log && typeof (action.log) === 'string') {\n                    monarchCommon.log(this._lexer, this._lexer.languageId + ': ' + monarchCommon.substituteMatches(this._lexer, action.log, matched, matches, state));\n                }\n            }\n            // check result\n            if (result === null) {\n                throw monarchCommon.createError(this._lexer, 'lexer rule has no well-defined action in rule: ' + this._safeRuleName(rule));\n            }\n            const computeNewStateForEmbeddedLanguage = (enteringEmbeddedLanguage) => {\n                // support language names, mime types, and language ids\n                const languageId = (this._languageService.getLanguageIdByLanguageName(enteringEmbeddedLanguage)\n                    || this._languageService.getLanguageIdByMimeType(enteringEmbeddedLanguage)\n                    || enteringEmbeddedLanguage);\n                const embeddedLanguageData = this._getNestedEmbeddedLanguageData(languageId);\n                if (pos < lineLength) {\n                    // there is content from the embedded language on this line\n                    const restOfLine = lineWithoutLF.substr(pos);\n                    return this._nestedTokenize(restOfLine, hasEOL, MonarchLineStateFactory.create(stack, embeddedLanguageData), offsetDelta + pos, tokensCollector);\n                }\n                else {\n                    return MonarchLineStateFactory.create(stack, embeddedLanguageData);\n                }\n            };\n            // is the result a group match?\n            if (Array.isArray(result)) {\n                if (groupMatching && groupMatching.groups.length > 0) {\n                    throw monarchCommon.createError(this._lexer, 'groups cannot be nested: ' + this._safeRuleName(rule));\n                }\n                if (matches.length !== result.length + 1) {\n                    throw monarchCommon.createError(this._lexer, 'matched number of groups does not match the number of actions in rule: ' + this._safeRuleName(rule));\n                }\n                let totalLen = 0;\n                for (let i = 1; i < matches.length; i++) {\n                    totalLen += matches[i].length;\n                }\n                if (totalLen !== matched.length) {\n                    throw monarchCommon.createError(this._lexer, 'with groups, all characters should be matched in consecutive groups in rule: ' + this._safeRuleName(rule));\n                }\n                groupMatching = {\n                    rule: rule,\n                    matches: matches,\n                    groups: []\n                };\n                for (let i = 0; i < result.length; i++) {\n                    groupMatching.groups[i] = {\n                        action: result[i],\n                        matched: matches[i + 1]\n                    };\n                }\n                pos -= matched.length;\n                // call recursively to initiate first result match\n                continue;\n            }\n            else {\n                // regular result\n                // check for '@rematch'\n                if (result === '@rematch') {\n                    pos -= matched.length;\n                    matched = ''; // better set the next state too..\n                    matches = null;\n                    result = '';\n                    // Even though `@rematch` was specified, if `nextEmbedded` also specified,\n                    // a state transition should occur.\n                    if (enteringEmbeddedLanguage !== null) {\n                        return computeNewStateForEmbeddedLanguage(enteringEmbeddedLanguage);\n                    }\n                }\n                // check progress\n                if (matched.length === 0) {\n                    if (lineLength === 0 || stackLen0 !== stack.depth || state !== stack.state || (!groupMatching ? 0 : groupMatching.groups.length) !== groupLen0) {\n                        continue;\n                    }\n                    else {\n                        throw monarchCommon.createError(this._lexer, 'no progress in tokenizer in rule: ' + this._safeRuleName(rule));\n                    }\n                }\n                // return the result (and check for brace matching)\n                // todo: for efficiency we could pre-sanitize tokenPostfix and substitutions\n                let tokenType = null;\n                if (monarchCommon.isString(result) && result.indexOf('@brackets') === 0) {\n                    const rest = result.substr('@brackets'.length);\n                    const bracket = findBracket(this._lexer, matched);\n                    if (!bracket) {\n                        throw monarchCommon.createError(this._lexer, '@brackets token returned but no bracket defined as: ' + matched);\n                    }\n                    tokenType = monarchCommon.sanitize(bracket.token + rest);\n                }\n                else {\n                    const token = (result === '' ? '' : result + this._lexer.tokenPostfix);\n                    tokenType = monarchCommon.sanitize(token);\n                }\n                if (pos0 < lineWithoutLFLength) {\n                    tokensCollector.emit(pos0 + offsetDelta, tokenType);\n                }\n            }\n            if (enteringEmbeddedLanguage !== null) {\n                return computeNewStateForEmbeddedLanguage(enteringEmbeddedLanguage);\n            }\n        }\n        return MonarchLineStateFactory.create(stack, embeddedLanguageData);\n    }\n    _getNestedEmbeddedLanguageData(languageId) {\n        if (!this._languageService.isRegisteredLanguageId(languageId)) {\n            return new EmbeddedLanguageData(languageId, NullState);\n        }\n        if (languageId !== this._languageId) {\n            // Fire language loading event\n            this._languageService.requestBasicLanguageFeatures(languageId);\n            languages.TokenizationRegistry.getOrCreate(languageId);\n            this._embeddedLanguages[languageId] = true;\n        }\n        const tokenizationSupport = languages.TokenizationRegistry.get(languageId);\n        if (tokenizationSupport) {\n            return new EmbeddedLanguageData(languageId, tokenizationSupport.getInitialState());\n        }\n        return new EmbeddedLanguageData(languageId, NullState);\n    }\n};\nMonarchTokenizer = __decorate([\n    __param(4, IConfigurationService)\n], MonarchTokenizer);\nexport { MonarchTokenizer };\n/**\n * Searches for a bracket in the 'brackets' attribute that matches the input.\n */\nfunction findBracket(lexer, matched) {\n    if (!matched) {\n        return null;\n    }\n    matched = monarchCommon.fixCase(lexer, matched);\n    const brackets = lexer.brackets;\n    for (const bracket of brackets) {\n        if (bracket.open === matched) {\n            return { token: bracket.token, bracketType: 1 /* monarchCommon.MonarchBracket.Open */ };\n        }\n        else if (bracket.close === matched) {\n            return { token: bracket.token, bracketType: -1 /* monarchCommon.MonarchBracket.Close */ };\n        }\n    }\n    return null;\n}\n","/*---------------------------------------------------------------------------------------------\n *  Copyright (c) Microsoft Corporation. All rights reserved.\n *  Licensed under the MIT License. See License.txt in the project root for license information.\n *--------------------------------------------------------------------------------------------*/\nimport { createDecorator } from '../../../platform/instantiation/common/instantiation.js';\nexport const IStandaloneThemeService = createDecorator('themeService');\n"],"names":["__decorate","decorators","target","key","desc","d","c","arguments","length","r","Object","getOwnPropertyDescriptor","Reflect","decorate","i","defineProperty","__param","paramIndex","decorator","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","result","done","then","apply","StandaloneCodeEditorService","_AbstractCodeEditorSe","_inherits","_super","_createSuper","contextKeyService","themeService","_this","_classCallCheck","call","onCodeEditorAdd","_checkContextKey","onCodeEditorRemove","_editorIsOpen","createKey","_activeCodeEditor","registerCodeEditorOpenHandler","input","source","sideBySide","_assertThisInitialized","_regeneratorRuntime","mark","_callee","wrap","_context","prev","abrupt","this","doOpenEditor","stop","_createClass","_step","hasCodeEditor","_iterator","_createForOfIteratorHelper","listCodeEditors","s","n","isSimpleWidget","err","f","set","activeCodeEditor","editor","findModel","resource","schema","scheme","Schemas","http","https","windowOpenNoOpener","toString","selection","options","endLineNumber","endColumn","setSelection","revealRangeInCenter","pos","lineNumber","startLineNumber","column","startColumn","setPosition","revealPositionInCenter","model","getModel","uri","AbstractCodeEditorService","IContextKeyService","IThemeService","registerSingleton","ICodeEditorService","LAST_GENERATED_COMMAND_ID","ariaDomNodeCreated","StandaloneCodeEditor","_CodeEditorWidget","domElement","_options","instantiationService","codeEditorService","commandService","keybindingService","notificationService","accessibilityService","languageConfigurationService","languageFeaturesService","assign","ariaLabel","StandaloneCodeEditorNLS","editorViewAccessibleLabel","accessibilityHelpMessage","StandaloneKeybindingService","_standaloneKeybindingService","parent","aria","document","body","createAriaDomNode","ariaContainerElement","keybinding","handler","context","console","warn","commandId","whenExpression","ContextKeyExpr","deserialize","addDynamicKeybinding","defaultValue","_contextKeyService","_descriptor","_this2","id","label","run","Error","Disposable","None","precondition","and","equals","getId","keybindings","keybindingsWhen","keybindingContext","contextMenuGroupId","contextMenuOrder","_accessor","_len","args","Array","_key","concat","toDispose","DisposableStore","uniqueId","add","CommandsRegistry","registerCommand","menuItem","command","title","when","group","order","MenuRegistry","appendMenuItem","MenuId","EditorContext","isArray","kb","internalAction","InternalEditorAction","_len2","_key2","_actions","toDisposable","delete","handlerId","payload","_codeEditorService","setActiveCodeEditor","_get","_getPrototypeOf","prototype","CodeEditorWidget","StandaloneEditor","_StandaloneCodeEditor","_super2","configurationService","modelService","languageService","_this3","updateConfigurationService","themeDomRegistration","registerEditorContainer","theme","setTheme","autoDetectHighContrast","setAutoDetectHighContrast","Boolean","_model","_configurationService","_standaloneThemeService","_register","languageId","getLanguageIdByMimeType","language","PLAINTEXT_LANGUAGE_ID","createTextModel","undefined","_ownsModel","_attachModel","oldModelUrl","newModelUrl","_onDidChangeModel","fire","newOptions","detachedModel","dispose","IInstantiationService","ICommandService","IKeybindingService","INotificationService","IAccessibilityService","ILanguageConfigurationService","ILanguageFeaturesService","IStandaloneThemeService","IConfigurationService","IModelService","ILanguageService","StandaloneDiffEditor","_DiffEditorWidget","_super3","contextMenuService","editorProgressService","clipboardService","_this4","container","createInstance","getModifiedEditor","addCommand","createContextKey","descriptor","addAction","DiffEditorWidget","IContextMenuService","IEditorProgressService","IClipboardService","StandaloneDiffEditor2","_DiffEditorWidget2","_super4","audioCueService","_this5","DiffEditorWidget2","firstLF","indexOf","firstLine","substring","doCreateModel","createByFilepathOrFirstLine","createById","languageSelection","createModel","IAudioCueService","create","override","StandaloneServices","initialize","onDidCreateEditor","listener","get","onDidCreateDiffEditor","onDiffEditorAdd","getEditors","getDiffEditors","listDiffEditors","createDiffEditor","_a","experimental","useVersion2","createDiffNavigator","diffEditor","opts","DiffNavigator","addEditorAction","accessor","EditorCommand","runEditorCommand","_toConsumableArray","addDynamicKeybindings","map","addKeybindingRule","rule","addKeybindingRules","rules","commandArgs","setModelLanguage","mimeTypeOrLanguageId","setLanguage","setModelMarkers","owner","markers","IMarkerService","changeOne","removeAllMarkers","changeAll","getModelMarkers","filter","read","onDidChangeMarkers","onMarkerChanged","getModels","onDidCreateModel","onModelAdded","onWillDisposeModel","onModelRemoved","onDidChangeModelLanguage","onModelLanguageChanged","oldLanguage","oldLanguageId","createWebWorker","actualCreateWebWorker","colorizeElement","domNode","Colorizer","colorize","text","colorizeModelLine","tabSize","tokenize","languages","getOrCreate","tokenizationSupport","getInitialState","NullState","line","hasEOL","state","nullTokenize","getSafeTokenizationSupport","lines","splitLines","len","tokenizationResult","tokens","endState","defineTheme","themeName","themeData","remeasureFonts","FontMeasurements","clearAllFontInfos","registerLinkOpener","opener","IOpenerService","registerOpener","open","URI","parse","registerEditorOpener","_callee2","selectionOrPosition","_context2","openCodeEditor","sent","createMonacoEditorAPI","AccessibilitySupport","standaloneEnums","ContentWidgetPositionPreference","CursorChangeReason","DefaultEndOfLine","EditorAutoIndentStrategy","EditorOption","EndOfLinePreference","EndOfLineSequence","MinimapPosition","MouseTargetType","OverlayWidgetPositionPreference","OverviewRulerLane","GlyphMarginLane","RenderLineNumbersType","RenderMinimap","ScrollbarVisibility","ScrollType","TextEditorCursorBlinkingStyle","TextEditorCursorStyle","TrackedRangeStickiness","WrappingIndent","InjectedTextCursorStops","PositionAffinity","ConfigurationChangedEvent","BareFontInfo","FontInfo","TextModelResolvedOptions","FindMatch","ApplyUpdateResult","LineRange","LineRangeMapping","RangeMapping","EditorZoom","MovedText","SimpleLineRangeMapping","EditorType","EditorOptions","bool","prop","defValue","string","createKeywordMatcher","arr","caseInsensitive","x","toLowerCase","hash","array","_step2","_iterator2","arrayToHash","word","hasOwnProperty","compileRegExp","lexer","str","replace","hadExpansion","attr","sub","RegExp","monarchCommon","flags","ignoreCase","unicode","createGuard","ruleName","tkey","val","scrut","oppat","matches","match","parseInt","tester","op","pat","test","words","elemType","obj","isArrayOf","elem","inWords","re","patx","eos","patexp","split","name","scrutinee","num","parts","unshift","selectScrutinee","compileAction","action","token","newAction","tokenSubst","bracket","substr","goBack","switchTo","log","nextEmbedded","usesEmbedded","results","cases","push","def","defaultToken","_i","_cases","_case","Rule","regex","matchOnlyAtLineStart","sregex","act","compile","json","includeLF","noThrow","maxStack","start","tokenPostfix","lexerMin","addRules","newrules","_step3","_iterator3","include","tokenizer","newrule","setRegex","setAction","rule1","matchOnlyAtStart","stateNames","brackets","close","_step4","_iterator4","register","ModesRegistry","registerLanguage","getLanguages","getEncodedLanguageId","languageIdCodec","encodeLanguageId","onLanguage","callback","withServices","disposable","onDidRequestRichLanguageFeatures","encounteredLanguageId","onLanguageEncountered","onDidRequestBasicLanguageFeatures","setLanguageConfiguration","configuration","isRegisteredLanguageId","EncodedTokenizationSupportAdapter","actual","_languageId","_actual","TokenizationSupportAdapter","adaptTokenize","tokenizeEncoded","_languageService","tokenTheme","getColorTheme","resultLen","previousStartIndex","t","metadata","scopes","startIndex","actualResult","Uint32Array","_toBinaryTokens","_toClassicTokens","isThenable","setColorMap","colorMap","standaloneThemeService","Color","fromHex","setColorMapOverride","createTokenizationSupportAdapter","provider","isEncodedTokensProvider","registerTokensProviderFactory","factory","adaptedFactory","MonarchTokenizer","registerFactory","setTokensProvider","setMonarchTokensProvider","languageDef","registerReferenceProvider","languageSelector","referenceProvider","registerRenameProvider","renameProvider","registerSignatureHelpProvider","signatureHelpProvider","registerHoverProvider","hoverProvider","provideHover","position","getWordAtPosition","range","Range","registerDocumentSymbolProvider","documentSymbolProvider","registerDocumentHighlightProvider","documentHighlightProvider","registerLinkedEditingRangeProvider","linkedEditingRangeProvider","registerDefinitionProvider","definitionProvider","registerImplementationProvider","implementationProvider","registerTypeDefinitionProvider","typeDefinitionProvider","registerCodeLensProvider","codeLensProvider","registerCodeActionProvider","codeActionProvider","providedCodeActionKinds","documentation","provideCodeActions","m","areIntersectingOrTouching","only","trigger","resolveCodeAction","registerDocumentFormattingEditProvider","documentFormattingEditProvider","registerDocumentRangeFormattingEditProvider","documentRangeFormattingEditProvider","registerOnTypeFormattingEditProvider","onTypeFormattingEditProvider","registerLinkProvider","linkProvider","registerCompletionItemProvider","completionProvider","registerColorProvider","colorProvider","registerFoldingRangeProvider","foldingRangeProvider","registerDeclarationProvider","declarationProvider","registerSelectionRangeProvider","selectionRangeProvider","registerDocumentSemanticTokensProvider","documentSemanticTokensProvider","registerDocumentRangeSemanticTokensProvider","documentRangeSemanticTokensProvider","registerInlineCompletionsProvider","inlineCompletionsProvider","registerInlayHintsProvider","inlayHintsProvider","createMonacoLanguagesAPI","DocumentHighlightKind","CompletionItemKind","CompletionItemTag","CompletionItemInsertTextRule","SymbolKind","SymbolTag","IndentAction","CompletionTriggerKind","SignatureHelpTriggerKind","InlayHintKind","InlineCompletionTriggerKind","CodeActionTriggerType","FoldingRangeKind","SelectedSuggestionInfo","StandaloneLayoutService","onDidLayout","Event","offset","top","quickPickTop","_dimension","dom","window","getFocusedCodeEditor","focus","EditorScopedLayoutService","_StandaloneLayoutServ","_container","ILayoutService","SimpleModel","disposed","_onWillDispose","Emitter","StandaloneTextModelService","ImmortalReference","StandaloneEditorProgressService","NULL_PROGRESS_RUNNER","promise","delay","total","worked","StandaloneProgressService","task","onDidCancel","report","StandaloneEnvironmentService","isExtensionDevelopment","isBuilt","StandaloneDialogService","confirmation","confirmed","doConfirm","message","detail","checkboxChecked","messageText","confirm","prompt","_b","_callee3","promptButtons","_context3","buttons","cancelButton","_callee4","_context4","type","Severity","StandaloneNotificationService","notify","severity","Info","Warning","error","notification","NO_OP","choices","NoOpNotification","StandaloneCommandService","_onWillExecuteCommand","_onDidExecuteCommand","onDidExecuteCommand","event","_instantiationService","getCommand","invokeFunction","_AbstractKeybindingSe","telemetryService","logService","_cachedResolver","_dynamicKeybindings","_domNodeListeners","addContainer","disposables","KEY_DOWN","keyEvent","StandardKeyboardEvent","_dispatch","preventDefault","stopPropagation","KEY_UP","_singleModifierDispatch","DomNodeListeners","removeContainer","domNodeListeners","splice","addCodeEditor","codeEditor","getOption","getContainerDomNode","forEach","addDiffEditor","onDiffEditorRemove","combinedDisposable","entries","decodeKeybinding","OS","weight1","weight2","extensionId","isBuiltinExtension","updateResolver","_onDidUpdateKeybindings","defaults","_toNormalizedKeybindingItems","KeybindingsRegistry","getDefaultKeybindings","overrides","KeybindingResolver","_log","hasFocus","items","isDefault","item","resolvedKeybindings","USLayoutResolvedKeybinding","resolveKeybinding","resolvedKeybinding","ResolvedKeybindingItem","keyboardEvent","chord","KeyCodeChord","ctrlKey","shiftKey","altKey","metaKey","keyCode","AbstractKeybindingService","ITelemetryService","ILogService","_Disposable","isConfigurationOverrides","thing","overrideIdentifier","StandaloneConfigurationService","_onDidChangeConfiguration","onDidChangeConfiguration","defaultConfiguration","DefaultConfiguration","_configuration","Configuration","reload","ConfigurationModel","arg1","arg2","section","getValue","values","previous","data","toData","changedKeys","entry","_entry","_slicedToArray","updateValue","configurationChangeEvent","ConfigurationChangeEvent","keys","sourceConfig","arg3","arg4","updateValues","inspect","StandaloneResourceConfigurationService","affectedKeys","affectsConfiguration","Pos","isIPosition","getLanguage","getLanguageIdAtPosition","getLanguageId","guessLanguageIdByFilepathOrFirstLine","StandaloneResourcePropertiesService","eol","isLinux","isMacintosh","StandaloneTelemetryService","StandaloneWorkspaceContextService","from","SCHEME","authority","path","workspace","STANDALONE_EDITOR_WORKSPACE_ID","folders","WorkspaceFolder","index","isDiffEditor","toUpdate","isEditorConfigurationKey","isDiffEditorConfigurationKey","StandaloneBulkEditService","_modelService","editsIn","_callee5","edits","textEdits","edit","totalEdits","totalFiles","_iterator5","_step5","_step5$value","_edits","_context5","ResourceEdit","convert","Map","ResourceTextEdit","versionId","getVersionId","EditOperation","replaceMove","lift","textEdit","t0","finish","pushStackElement","pushEditOperations","ariaSummary","strings","StandaloneServicesNLS","bulkEditServiceSummary","isApplied","StandaloneUriLabelService","fsPath","basename","StandaloneContextViewService","_ContextViewService","layoutService","_this6","delegate","shadowRoot","getActiveCodeEditor","ContextViewService","StandaloneWorkspaceTrustManagementService","_neverEmitter","onDidChangeTrust","StandaloneLanguageService","_LanguageService","LanguageService","StandaloneLogService","_LogService","_super5","ConsoleLogger","LogService","StandaloneContextMenuService","_ContextMenuService","_super6","contextViewService","menuService","_this7","configure","blockMouse","ContextMenuService","IContextViewService","IMenuService","StandaloneAudioService","cue","allowManyInParallel","_callee6","_context6","ITextResourceConfigurationService","ITextResourcePropertiesService","IWorkspaceContextService","ILabelService","IDialogService","IEnvironmentService","MarkerService","StandaloneThemeService","ModelService","IMarkerDecorationsService","MarkerDecorationsService","ContextKeyService","IProgressService","IStorageService","InMemoryStorageService","IEditorWorkerService","EditorWorkerService","IBulkEditService","IWorkspaceTrustManagementService","ITextModelService","AccessibilityService","IListService","ListService","IQuickInputService","StandaloneQuickInputService","OpenerService","BrowserClipboardService","MenuService","_step6","serviceCollection","ServiceCollection","_iterator6","getSingletonServiceDescriptors","_step6$value","InstantiationService","serviceId","SyncDescriptor","initialized","onDidInitialize","_step7","_iterator7","_step7$value","serviceIdentifier","createDecorator","_step8","editorFeatures","getEditorFeatures","_iterator8","feature","onUnexpectedError","vs","base","inherit","foreground","background","fontStyle","colors","_colors","_defineProperty","editorBackground","editorForeground","editorInactiveSelection","editorIndentGuide1","editorActiveIndentGuide1","editorSelectionHighlight","vs_dark","_colors2","hc_black","_colors3","hc_light","_colors4","VS_LIGHT_THEME_NAME","VS_DARK_THEME_NAME","HC_BLACK_THEME_NAME","HC_LIGHT_THEME_NAME","colorRegistry","Registry","as","Extensions","ColorContribution","themingRegistry","ThemingExtensions","ThemingContribution","StandaloneTheme","standaloneThemeData","semanticHighlighting","isBuiltinTheme","defaultColors","_tokenTheme","baseData","getBuiltinRules","has","colorId","useDefault","color","getColors","getDefault","resolveDefaultColor","ColorScheme","LIGHT","HIGH_CONTRAST_DARK","HIGH_CONTRAST_LIGHT","DARK","encodedTokensColors","TokenTheme","createFromRawTokenTheme","modifiers","modelLanguage","_match","join","TokenMetadata","getForeground","getFontStyle","italic","bold","underline","strikethrough","builtinTheme","newBuiltInTheme","_onColorThemeChange","onDidColorThemeChange","_onProductIconThemeChange","onDidProductIconThemeChange","_environment","_builtInProductIconTheme","UnthemedProductIconTheme","_autoDetectHighContrast","_knownThemes","iconsStyleSheet","getIconsStyleSheet","_codiconCSS","getCSS","_themeCSS","_allCSS","_globalStyleElement","_styleElements","_colorMapOverride","_onOSSchemeChanged","onDidChange","_updateCSS","addMatchMediaChangeListener","isInShadowDOM","_registerShadowDomContainer","_registerRegularEditorContainer","createStyleSheet","style","className","textContent","styleElement","notifyBaseUpdated","_theme","colorMapOverride","_updateThemeOrColorMap","_updateActualTheme","desiredTheme","newThemeName","wantsHighContrast","matchMedia","isHighContrast","isDark","cssRules","hasRule","ruleCollector","addRule","getThemingParticipants","p","colorVariables","getColor","asCssVariableName","getColorMap","generateTokensCSSForColorMap","TokenizationRegistry","hasFileIcons","hasFolderIcons","hidesExplorerArrows","ToggleHighContrast","_EditorAction","ToggleHighContrastNLS","toggleHighContrast","alias","_originalThemeName","currentTheme","EditorAction","registerEditorAction","isFuzzyAction","what","isFuzzyActionArr","isString","isIAction","empty","fixCase","sanitize","msg","createError","substituteMatches","stateMatches","full","dollar","ofs","findRules","inState","idx","lastIndexOf","stateExists","MonarchStackElementFactory","maxCacheDepth","_maxCacheDepth","_entries","depth","MonarchStackElement","stackElementId","getStackElementId","_INSTANCE","other","_equals","element","a","b","EmbeddedLanguageData","clone","MonarchLineStateFactory","stack","embeddedLanguageData","MonarchLineState","MonarchClassicTokensCollector","_tokens","_lastTokenType","_lastTokenLanguage","startOffset","embeddedLanguageLine","offsetDelta","nestedLanguageId","embeddedModeState","nestedLanguageTokenizationSupport","enterLanguage","emit","nestedResult","MonarchModernTokensCollector","_prependTokens","_currentLanguageId","_lastTokenMetadata","_merge","aLen","bLen","cLen","_lexer","_embeddedLanguages","embeddedLoaded","emitting","_tokenizationRegistryListener","isOneOfMyEmbeddedModes","changedLanguages","handleChange","_maxTokenizationLineLength","promises","nestedModeStatus","getLoadStatus","loaded","isResolved","all","_","rootState","lineState","tokensCollector","endLineState","_tokenize","finalize","nullTokenizeEncoded","collector","_nestedTokenize","_myTokenize","popOffset","hasEmbeddedPopRule","regexSource","search","_findLeavingNestedLanguageOffset","nestedEndState","nestedLanguageTokenize","nestedLanguageLine","restOfTheLine","lineWithoutLF","lineWithoutLFLength","lineLength","groupMatching","forceEvaluation","pos0","stackLen0","groupLen0","groups","matched","enteringEmbeddedLanguage","groupEntry","shift","restOfLine","charAt","Math","max","nextState","_safeRuleName","transform","pop","popall","computeNewStateForEmbeddedLanguage","getLanguageIdByLanguageName","_getNestedEmbeddedLanguageData","totalLen","tokenType","rest","findBracket","requestBasicLanguageFeatures","bracketType"],"sourceRoot":""}